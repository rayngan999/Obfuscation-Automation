function initTapPlugin(n,t){"use strict";var u="._tap",h="._tapActive",l="tap",f="clientX clientY screenX screenY pageX pageY".split(" "),e,r,o,s={count:0,event:0},a=function(n,i){var o=i.originalEvent,u=t.Event(o),r,e;for(u.type=n,r=0,e=f.length;r<e;r++)u[f[r]]=i[f[r]];return u},v=function(n){if(n.isTrigger)return!1;var r=s.event,u=Math.abs(n.pageX-r.pageX),f=Math.abs(n.pageY-r.pageY),e=Math.max(u,f);return n.timeStamp-r.timeStamp<t.tap.TIME_DELTA&&e<t.tap.POSITION_DELTA&&(!r.touches||s.count===1)&&i.isTracking},y=function(n){if(!o)return!1;var i=Math.abs(n.pageX-o.pageX),r=Math.abs(n.pageY-o.pageY),u=Math.max(i,r);return Math.abs(n.timeStamp-o.timeStamp)<750&&u<t.tap.POSITION_DELTA},c=function(n){if(n.type.indexOf("touch")===0){n.touches=n.originalEvent.changedTouches;for(var i=n.touches[0],t=0,r=f.length;t<r;t++)n[f[t]]=i[f[t]]}n.timeStamp=Date.now?Date.now():+new Date},i={isEnabled:!1,isTracking:!1,enable:function(){i.isEnabled||(i.isEnabled=!0,e=t(n.body).on("touchstart"+u,i.onStart).on("mousedown"+u,i.onStart).on("click"+u,i.onClick))},disable:function(){i.isEnabled&&(i.isEnabled=!1,e.off(u))},onStart:function(n){if(!n.isTrigger&&(c(n),!t.tap.LEFT_BUTTON_ONLY||n.touches||n.which===1)&&(n.touches&&(s.count=n.touches.length),!i.isTracking)&&(n.touches||!y(n)))if(i.isTracking=!0,s.event=n,n.touches){o=n;e.on("touchend"+u+h,i.onEnd).on("touchcancel"+u+h,i.onCancel)}else e.on("mouseup"+u+h,i.onEnd)},onEnd:function(n){var u;if(!n.isTrigger){c(n);v(n)&&(u=a(l,n),r=u,t(s.event.target).trigger(u));i.onCancel(n)}},onCancel:function(n){n&&n.type==="touchcancel"&&n.preventDefault();i.isTracking=!1;e.off(h)},onClick:function(n){if(!n.isTrigger&&r&&r.isDefaultPrevented()&&r.target===n.target&&r.pageX===n.pageX&&r.pageY===n.pageY&&n.timeStamp-r.timeStamp<750)return r=null,!1}};t(n).ready(i.enable);t.tap={POSITION_DELTA:10,TIME_DELTA:400,LEFT_BUTTON_ONLY:!0}}