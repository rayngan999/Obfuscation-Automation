class AmeMh extends HTMLElement{constructor(){super()}connectedCallback(){this.config(),document.querySelector(this.selectorWrapper).classList.add("mh2021Page")}config(){let e=document.createElement("style");e.textContent=this.style(),this.appendChild(e),this.insertAdjacentHTML("beforeend",this.template()),this.js()}template(){return'\n            <div id="mh2021" class="mhInView">\n                <div id="adv-gpt-masthead-leaderboard-container1" class="mh2021Strip adv strip"></div>\n            </div>\n            <div id="mh2021Fake"></div>\n            <div id="bottomStrip2021">\n                <div id="gpt_stripmobile"></div>\n            </div>\n        '}style(){return`\n            :root {\n                --altezzaMh2021: 33vw;\n                --bgMh2021: #fff;\n                --bgMh2021Page: #fff\n            }\n            #mh2021 {\n                height: var(--altezzaMh2021);\n                width: 100vw;\n                position: fixed;\n                top: 0;\n                left: 0;\n                overflow: hidden;\n            }\n            #mh2021.mhForeground {\n                z-index: 9999;\n            }\n            #mh2021Fake {\n                height: var(--altezzaMh2021);\n                width: 90vw;\n                position: absolute;\n                top: 0;\n                left: 5vw;\n                overflow: hidden;\n                z-index: -100;\n            }\n            .mh2021Page {\n                margin-top: 0;\n                transition: margin 300ms ease-in-out;\n                position: relative;\n                z-index: 1;\n                ${"rgba(0, 0, 0, 0)"==window.getComputedStyle(document.querySelector(this.selectorWrapper)).backgroundColor?"background:var(--bgMh2021Page);":""}\n            }\n            .mh2021Strip {\n                width: 100vw;\n                max-height: var(--altezzaMh2021);\n                overflow: hidden;\n                background: var(--bgMh2021);\n                display: flex;\n                justify-content: center;\n                align-items: flex-start;\n            }\n            #bottomStrip2021 {\n                width: 100vw;\n                height: 100px;\n                position: fixed;\n                bottom: -100px;\n                left: 0;\n                display: flex;\n                justify-content: center;\n                align-items: start;\n                z-index: 99999;\n                background-color: rgba(255,255,255,.8);\n                transform: translateY(0);\n                transition: transform 50ms ease-in-out;\n            }\n            #bottomStrip2021 > div {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n            @media all and (min-width: 1000px) {\n                :root {\n                    --altezzaMh2021 : 250px;\n                }\n                .mh2021Strip {\n                    background: ${this.bgMh?this.bgMh:"var(--bgMh2021)"};\n                }\n            }\n        `}js(){if(window.googletag=window.googletag||{cmd:[]},"true"!=this.disableStrip&&!document.querySelector(".no-strip-mobile")){postTcfReady(()=>{setTimeout(()=>{document.getElementById("flyfirst-mobile-placement")?0==document.getElementById("flyfirst-mobile-placement").childNodes.length?startStripMobile("fallback timer"):console.log("[strip mobile 2021] fallback fallita per presenza flyfirst"):startStripMobile("fallback timer")},2e4)})}}get selectorWrapper(){return this.getAttribute("selector-wrapper")}get bgMh(){return this.getAttribute("bg-mh")}get disableStrip(){return this.getAttribute("disable-strip")}static strip_animation(){let e,t=document.querySelector("ame-mh"),n=t.getAttribute("enable-events"),i=t.getAttribute("disable-strip"),o=Number(t.getAttribute("view-time-limit")),r=Number(t.getAttribute("first-delay")),a=o&&""!=o?o:5e3,l=r&&""!=r?r:3e3,s=document.getElementById("mh2021"),m=document.getElementById("mh2021Fake"),d=document.querySelector(".mh2021Page"),c=document.querySelector(".mh2021Strip"),g=document.getElementById("flyfirst-mobile-placement"),h=0;let p=(e,t)=>{localStorage.getItem("mh2021Debug")&&console.log("[mh2021] - "+e,t)};if(0==(c.offsetHeight||0))return p("Strip ad altezza 0 -> return false"),!1;if(void 0!==window.stripanimationrun)return console.warn("[mh2021] - ATTENZIONE! Strip animation richiamata piÃ¹ volte!"),!1;window.stripanimationrun=1,"true"==n&&(window.gtag?gtag("event","Start",{event_category:"mh2021",event_label:document.location.href,non_interaction:!0}):window.ga&&ga("send","event","mh2021","Start",document.location.href,{nonInteraction:!0}));let u=e=>{p("mh2021PageInTopView",e),b.disconnect();let t=s.firstElementChild.offsetHeight;t<=50&&(t=0),d.style.marginTop=t+"px",h=1,"true"==n&&(window.gtag?gtag("event",e,{event_category:"mh2021",event_label:document.location.href,non_interaction:!0}):window.ga&&ga("send","event","mh2021",e,document.location.href,{nonInteraction:!0}))};setTimeout(()=>{e&&u("In top view all'inizio")},l+100),setTimeout(()=>{p("Fix inizio",performance.now()),s.classList.add("mhForeground")},l+400),setTimeout(()=>{p("Defix",performance.now()),s.classList.remove("mhForeground"),"true"==i||document.querySelector(".no-strip-mobile")||g&&0==g.childNodes.length&&setTimeout(()=>{startStripMobile("mh fixed")},1e3)},l+a+400);let b=new IntersectionObserver((t,n)=>{t.forEach(t=>{t.isIntersecting?(0==h&&0==e&&u("Ritorno in top view"),e=!0):e=!1})},{rootMargin:"0px",threshold:1});p("Start observer",""),b.observe(m)}static callbackStripMobile(){googletag.pubads().addEventListener("slotOnload",function(e){if(e.slot===stripmobile){console.log("[strip mobile 2021] slotOnload");let e=document.getElementById("bottomStrip2021"),t=document.getElementById("gpt_stripmobile").offsetHeight;console.log("[strip mobile 2021] height:",t),e.style.transform="translateY("+-1*t+"px)"}})}}customElements.define("ame-mh",AmeMh);
//# sourceMappingURL=ame-mh.min.js.map