(self.AMP=self.AMP||[]).push({n:"amp-bind",ev:"0.1",l:true,v:"2107170150000",m:1,f:function(AMP,_){function q(a){return a?Array.prototype.slice.call(a):[]}let u=Array.isArray;function aa(a,b){let c=[];let d=0;for(let e=0;e<a.length;e++){let f=a[e];b(f,e,a)?c.push(f):(d<e&&(a[d]=f),d++)}d<a.length&&(a.length=d);return c}function ba(a,b){for(let c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1}let v=Object.prototype.hasOwnProperty,ca=Object.prototype.toString;function w(a){return"[object Object]"===ca.call(a)}function y(a){let b=Object.create(null);a&&Object.assign(b,a);return b}function A(a){return a||{}}function B(a,b){if(v.call(a,b))return a[b]}function da(a,b){let c=[],d=[];for(d.push({t:a,s:b,d:0});0<d.length;){let{d:e,s:f,t:g}=d.shift();if(c.includes(f))throw Error("Source object has a circular reference.");c.push(f);if(g!==f)if(10<e)Object.assign(g,f);else for(let h of Object.keys(f)){a=f[h];if(v.call(g,h)&&(b=g[h],w(a)&&w(b))){d.push({t:b,s:a,d:e+1});continue}g[h]=a}}}function D(a,b){if("."==b)return a;let c=b.split(".");for(let d of c)if(d&&a&&void 0!==a[d]&&"object"==typeof a&&v.call(a,d))a=a[d];else{a=void 0;break}return a}function ea(a){return 1==(null===a||void 0===a?void 0:a.nodeType)?a.tagName.toLowerCase()+(a.id?`#${a.id}`:""):a}function fa(a,b,c="Assertion failed",d){var e,f;let g=c;if(!b){a&&-1==g.indexOf(a)&&(g+=a);c=3;for(var h=g.split("%s"),k=h.shift(),l=[k];h.length;){let m=arguments[c++],n=h.shift();k+=ea(m)+n;l.push(m,n.trim())}c=Error(k);c.messageArray=aa(l,(m=>""!==m));null===(e=(f=self).__AMP_REPORT_ERROR)||void 0===e?void 0:e.call(f,c);throw c}}function E(a,b,c){fa("âââ",a,b,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}class ha extends AMP.BaseElement{getLayoutPriority(){return 1}isAlwaysFixed(){return!0}isLayoutSupported(){return!0}renderOutsideViewport(){return!0}M(){return"<amp-bind-macro> "+(this.element.getAttribute("id")||"<unknown id>")}}let ia;function F(){return ia?ia:ia=Promise.resolve(void 0)}class G{constructor(){this.promise=new Promise(((a,b)=>{this.resolve=a;this.reject=b}))}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function ja(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function ka(a,b){return a.closest?a.closest(b):ja(a,(c=>{let d=c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector;return d?d.call(c,b):!1}))}function la(a,b){let c=a.length;for(let d=0;d<c;d++)b(a[d],d)}function ma(a){var b;return"SCRIPT"==a.tagName&&"APPLICATION/JSON"==(null===(b=a.getAttribute("type"))||void 0===b?void 0:b.toUpperCase())}let H=self.AMP_CONFIG||{},na=("string"==typeof H.cdnProxyRegex?new RegExp(H.cdnProxyRegex):H.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function oa(a){if(!self.document||!self.document.head||self.location&&na.test(self.location.origin))return null;let b=self.document.head.querySelector(`meta[name="${a}"]`);return b&&b.getAttribute("content")||null}let I={thirdParty:H.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:H.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof H.thirdPartyFrameRegex?new RegExp(H.thirdPartyFrameRegex):H.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:H.cdnUrl||oa("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:na,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:H.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:H.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:H.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:H.geoApiUrl||oa("amp-geo-api")};function pa(a){let b=Object.getOwnPropertyDescriptor(a,"message");if(null!==b&&void 0!==b&&b.writable)return a;let c=a.stack,d=Error(a.message);for(let e in a)d[e]=a[e];d.stack=c;return d}function qa(a,b){function c(){d=0;let g=5e3-(a.Date.now()-e);if(0<g)d=a.setTimeout(c,g);else{var h=f;f=null;b.apply(null,h)}}let d=0,e=0,f=null;return function(...g){e=a.Date.now();f=g;d||(d=a.setTimeout(c,5e3))}}let ra=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function sa(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}function ta(a){let b=y();if(!a)return b;for(var c;c=ra.exec(a);){let d=sa(c[1],c[1]);c=c[2]?sa(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b}let ua="";function J(){var a=self;if(a.__AMP_MODE)a=a.__AMP_MODE;else{var b=ta(a.location.originalHash||a.location.hash);var c=ta(a.location.originalHash||a.location.hash);c=!(!["1","actions","amp","amp4ads","amp4email"].includes(c.development)&&!a.AMP_DEV_MODE);var d=b["amp-geo"];b=b.log;if(!ua){var e;ua=(null===(e=a.AMP_CONFIG)||void 0===e?void 0:e.v)||"012107170150000"}a=a.__AMP_MODE={localDev:!1,development:c,esm:!0,geoOverride:d,minified:!0,test:!1,log:b,version:"2107170150000",rtvVersion:ua}}return a}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let K=self.__AMP_LOG;function L(){if(!K.user)throw Error("failed to call initLogConstructor");return K.user}function M(){if(K.dev)return K.dev;throw Error("failed to call initLogConstructor")}function N(a,b,c,d,e){return L().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)}function O(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return P(a,b)}function Q(a,b){var c=R(a);c=S(c);return P(c,b)}function va(a,b){a=R(a);a=S(a);return wa(a,b)?P(a,b):null}function R(a){return a.nodeType?O((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function S(a){a=R(a);return a.isSingleDoc()?a.win:a}function P(a,b){wa(a,b);a=T(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function xa(a,b,c,d){let e=T(a);let f=e[c];f||(f=e[c]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1});f.ctor||(f.ctor=d,f.context=b,f.sharedInstance=!1,f.resolve&&P(a,c))}function ya(a,b){let c=za(a,b);if(c)return c;a=T(a);a[b]=Aa();return a[b].promise}function za(a,b){let c=T(a)[b];if(c){if(c.promise)return c.promise;P(a,b);return c.promise=Promise.resolve(c.obj)}return null}function T(a){let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function wa(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function Aa(){let a=new G,b=a.promise,c=a.reject,d=a.resolve;b.catch((()=>{}));return{obj:null,promise:b,resolve:d,reject:c,context:null,ctor:null}}function Ba(){let a=J().esm?".mjs":".js";var b=I.cdn;return`${b}/rtv/${J().rtvVersion}/ww${a}`}function Ca(a){let b=za(S(a),"bind");if(b)return b;let c=R(a);return c.whenExtensionsKnown().then((()=>{let d=c.getExtensionVersion("amp-bind");return d?O(c.win,"extensions").waitForExtension("amp-bind",d):null})).then((d=>d?ya(S(a),"bind"):null))}function Da(a){let b=va(a,"bind");return b?Promise.resolve(b):Ca(a)}let Ea=new Set(["c","v","a","ad"]);let Fa;let V=a=>"string"==typeof a?U(a):a;function U(a){Fa||(Fa=self.document.createElement("a"));var b=Fa;b.href="";return new URL(a,b.href)}function Ga(a,b){N(null!=a,"%s %s must be available",b,"source");var c=V(a);var d;(d="https:"==c.protocol||"localhost"==c.hostname||"127.0.0.1"==c.hostname)||(c=c.hostname,d=c.length-10,d=0<=d&&c.indexOf(".localhost",d)==d);N(d||/^\/\//.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,"source",a)}function W(a){return I.cdnProxyRegex.test(V(a).origin)}function Ha(a){a=V(a);if(!W(a))return a.href;var b=a.pathname.split("/");N(Ea.has(b[1]),"Unknown path prefix in url %s",a.href);let c=b[2];var d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);N(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(/[?&](amp_(js[^&=]*|gsa|r|kit)|usqp)\b[^&]*/g,"").replace(/^[?&]/,""))?"?"+d:"":"";return b+d+(a.hash||"")}function Ia(a,b){b=V(b);return new URL(a,b.href).toString()}function Ja(a){let b=U(a),c=ta(b.search);N(!("__amp_source_origin"in c),"Source origin is not allowed in %s",a)}function Ka(a,b,c={}){let{expr:d=".",urlReplacement:e=0,refresh:f=!1,xssiPrefix:g}=c;Ga(b.getAttribute("src"),b);let h=O(a.win,"batched-xhr");return La(b,e,f).then((k=>h.fetchJson(k.xhrUrl,k.fetchOpt))).then((k=>O(a.win,"xhr").xssiJson(k,g))).then((k=>{if(null==k)throw Error("Response is undefined.");return D(k,d||".")})).catch((k=>{throw L().createError("failed fetching JSON data",k)}))}function La(a,b,c){let d=a.getAttribute("src"),e=va(a,"url-replace");return(1<=b?e.expandUrlAsync(d):Promise.resolve(d)).then((f=>{if(1==b){let h=e.collectDisallowedVarsSync(a);if(0<h.length)throw L().createError(`URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. Please add data-amp-replace="${h.join(" ")}" to the <${a.tagName}> element. See https://bit.ly/amp-var-subs.`)}let g={};a.hasAttribute("credentials")&&(g.credentials=a.getAttribute("credentials"));c&&(g.cache="reload");return{xhrUrl:f,fetchOpt:g}}))}function Ma(a,b,c,d){c={detail:c};Object.assign(c,d);return new a.CustomEvent(b,c)}let Na;let Oa="Webkit webkit Moz moz ms O o".split(" ");function Pa(a){var b=!1;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function Qa(a,b){try{return JSON.parse(a)}catch(c){return null===b||void 0===b?void 0:b(c),null}}function Ra(a,b){if(!isFinite(20))throw Error("Invalid depth: 20");if(a===b)return!0;for(a=[{a:a,b:b,depth:20}];0<a.length;){let{a:c,b:d,depth:e}=a.shift();if(0<e){if(typeof c!==typeof d)return!1;if(u(c)&&u(d)){if(c.length!==d.length)return!1;for(b=0;b<c.length;b++)a.push({a:c[b],b:d[b],depth:e-1});continue}else if(c&&d&&"object"===typeof c&&"object"===typeof d){let f=Object.keys(c),g=Object.keys(d);if(f.length!==g.length)return!1;for(let h of f)a.push({a:c[h],b:d[h],depth:e-1});continue}}if(c!==d)return!1}return!0}function Sa(a,b,c){b||(a.W=new G);let d=a.W;a.getAmpDoc().whenFirstVisible().then((()=>Ta(a,b,c))).then((e=>Ua(a,e,b))).then((()=>d.resolve())).catch((e=>{d.resolve();throw e}))}function Va(a){let b=a.element.children;if(0==b.length)return null;let c=a.M();if(1!=b.length)return a.user().error(c,"Should contain exactly one <script> child."),null;let d=b[0];return ma(d)?Qa(d.textContent,(e=>{a.user().error(c,"Failed to parse state. Is it valid JSON?",e)})):(a.user().error(c,'State should be in a <script> tag with type="application/json".'),null)}function Ua(a,b,c){if(void 0===b||null===b)return F();let d=N(a.element.id,"<amp-state> must have an id.");return Da(a.element).then((e=>{let f=y();f[d]=b;e.setState(f,{skipEval:c,skipAmpState:!c})}))}function Ta(a,b,c){let d=a.element,e=a.getAmpDoc();var f=d.getAttribute("src");f=U(Ha(f)).origin===U(Ha(e.win.location)).origin||b?2:1;return Ka(e,a.element,{urlReplacement:f,refresh:c}).catch((g=>{g=g?Ma(a.win,"amp-state.error",A({response:g.response})):null;va(d,"action").trigger(d,"fetch-error",g,1)}))}class Wa extends AMP.BaseElement{constructor(a){super(a);this.N=void 0;this.W=new G}getLayoutPriority(){return 1}isAlwaysFixed(){return!0}isLayoutSupported(){return!0}buildCallback(){Pa(this.element);this.element.setAttribute("aria-hidden","true");let a=this.element;a.hasAttribute("overridable")&&Da(a).then((b=>{b.addOverridableKey(a.getAttribute("id"))}));this.parseAndUpdate();this.element.hasAttribute("src")&&Sa(this,!0);this.registerAction("refresh",(()=>{N(this.element.hasAttribute("src"),'Can\'t refresh <amp-state> without "src" attribute.');Sa(this,!1,!0)}))}mutatedAttributesCallback(a){if(this.getAmpDoc().hasBeenVisible())void 0!==a.src&&this.element.hasAttribute("src")&&Sa(this,!1);else{let b=this.M();M().error(b,"ampdoc must be visible before mutation.")}}renderOutsideViewport(){return!0}parseAndUpdate(){return void 0===this.N&&(this.N=Va(this),null!==this.N)?Ua(this,this.N,!0):F()}getFetchingPromise(){return this.element.hasAttribute("src")?this.W.promise:F()}M(){return"<amp-state> "+(this.element.getAttribute("id")||"<unknown id>")}}let Xa=/(\S+)(?:\s+(?:(-?\d+(?:\.\d+)?)([a-zA-Z]*)))?\s*(?:,|$)/g;function Ya(a){let b=[];let c;for(;c=Xa.exec(a);){let d=c[1];let e,f;if(c[2]){let g=c[3].toLowerCase();if("w"==g)e=parseInt(c[2],10);else if("x"==g)f=parseFloat(c[2]);else continue}else f=1;b.push({url:d,width:e,dpr:f})}return new Za(b)}class Za{constructor(a){E(0<a.length,"Srcset must have at least one source");this.L=a;let b=!1,c=!1;for(let d=0;d<a.length;d++){let e=a[d];b=b||!!e.width;c=c||!!e.dpr}E(!!(b^c),"Srcset must have width or dpr sources, but not both");a.sort(b?cb:db);this.qa=b}select(a,b){if(this.qa){b*=a;a=this.L;var c=0,d=1/0,e=1/0;for(var f=0;f<a.length;f++){let g=a[f].width,h=Math.abs(g-b);if(h<=1.1*d||1.2<b/e)c=f,d=h,e=g;else break}b=c}else{a=this.L;c=0;d=1/0;for(e=0;e<a.length;e++)if(f=Math.abs(a[e].dpr-b),f<=d)c=e,d=f;else break;b=c}return this.L[b].url}getUrls(){return this.L.map((a=>a.url))}stringify(a){let b=[],c=this.L;for(let d=0;d<c.length;d++){let e=c[d];let f=e.url;a&&(f=a(f));f=this.qa?f+` ${e.width}w`:f+` ${e.dpr}x`;b.push(f)}return b.join(", ")}}function cb(a,b){E(a.width!=b.width,"Duplicate width: %s",a.width);return a.width-b.width}function db(a,b){E(a.dpr!=b.dpr,"Duplicate dpr: %s",a.dpr);return a.dpr-b.dpr}let eb={"class":{denylistedValueRegex:"(^|\\W)i-amphtml-"},hidden:null,text:null},fb={width:null,height:null},gb={"AMP-AUDIO":{album:null,artist:null,artwork:null,controlsList:null,loop:null,src:{allowedProtocols:{https:!0}},title:null},"AMP-AUTOCOMPLETE":{src:{allowedProtocols:{https:!0}}},"AMP-BASE-CAROUSEL":{"advance-count":null,"auto-advance-count":null,"auto-advance-interval":null,"auto-advance-loops":null,"auto-advance":null,horizontal:null,"initial-index":null,loop:null,"mixed-length":null,"side-slide-count":null,slide:null,"snap-align":null,"snap-by":null,snap:null,"visible-count":null},"AMP-BRIGHTCOVE":{"data-account":null,"data-embed":null,"data-player":null,"data-player-id":null,"data-playlist-id":null,"data-video-id":null},"AMP-CAROUSEL":{slide:null},"AMP-DATE-PICKER":{max:null,min:null,src:{allowedProtocols:{https:!0}}},"AMP-GOOGLE-DOCUMENT-EMBED":{src:null,title:null},"AMP-IFRAME":{src:null,title:null},"AMP-IMG":{alt:null,attribution:null,src:{allowedProtocols:{data:!0,http:!0,https:!0}},srcset:{alternativeName:"src"}},"AMP-LIGHTBOX":{open:null},"AMP-LIST":{src:{allowedProtocols:{https:!0}},state:null,"is-layout-container":null},"AMP-RENDER":{src:{allowedProtocols:{https:!0}}},"AMP-SELECTOR":{disabled:null,selected:null},"AMP-STATE":{src:{allowedProtocols:{https:!0}}},"AMP-TIMEAGO":{datetime:null,title:null},"AMP-TWITTER":{"data-tweetid":null},"AMP-VIDEO":{album:null,alt:null,artist:null,artwork:null,attribution:null,controls:null,controlslist:null,loop:null,poster:null,preload:null,src:{allowedProtocols:{https:!0}},title:null},"AMP-YOUTUBE":{"data-videoid":null},A:{href:{allowedProtocols:{ftp:!0,geo:!0,http:!0,https:!0,mailto:!0,maps:!0,bip:!0,bbmi:!0,chrome:!0,"itms-services":!0,facetime:!0,"fb-me":!0,"fb-messenger":!0,intent:!0,line:!0,skype:!0,sms:!0,snapchat:!0,tel:!0,tg:!0,threema:!0,twitter:!0,viber:!0,webcal:!0,"web+mastodon":!0,wh:!0,whatsapp:!0}}},BUTTON:{disabled:null,type:null,value:null},DETAILS:{open:null},FIELDSET:{disabled:null},IMAGE:{"xlink:href":{allowedProtocols:{http:!0,https:!0}}},INPUT:{accept:null,accesskey:null,autocomplete:null,checked:null,disabled:null,height:null,inputmode:null,max:null,maxlength:null,min:null,minlength:null,multiple:null,pattern:null,placeholder:null,readonly:null,required:null,selectiondirection:null,size:null,spellcheck:null,step:null,type:{denylistedValueRegex:"(^|\\s)(button|image|)(\\s|$)"},value:null,width:null},OPTION:{disabled:null,label:null,selected:null,value:null},OPTGROUP:{disabled:null,label:null},SECTION:{"data-expand":null,expanded:null},SELECT:{autofocus:null,disabled:null,multiple:null,required:null,size:null},SOURCE:{src:{allowedProtocols:{https:!0}},type:null},TRACK:{label:null,src:{allowedProtocols:{https:!0}},srclang:null},TEXTAREA:{autocomplete:null,autofocus:null,cols:null,disabled:null,maxlength:null,minlength:null,pattern:null,placeholder:null,readonly:null,required:null,rows:null,selectiondirection:null,selectionend:null,selectionstart:null,spellcheck:null,wrap:null,defaulttext:null}},hb={src:!0,srcset:!0,href:!0,"xlink:href":!0};function ib(a,b,c){if(c.startsWith("aria-"))return null;if(!B(hb,c)||a.sa){var d=B(eb,c);if(void 0!==d)return d;var e=B(fb,c);if(b.startsWith("AMP-")&&void 0!==e)return e;var f=B(gb,b);if(f)return f[c]}}class jb{constructor(a){this.sa=a}canBind(a,b){return void 0!==ib(this,a,b)}isResultValid(a,b,c){let d=ib(this,a,b);d&&d.alternativeName&&(d=ib(this,a,d.alternativeName));if(void 0===d)return!1;if(null===d)return!0;if(c&&B(hb,b)){let g;if("srcset"===b){let h;try{h=Ya(c)}catch(k){return L().error("amp-bind","Failed to parse srcset: ",k),!1}g=h.getUrls()}else g=[c];for(a=0;a<g.length;a++){a:{var e=g[a];b=d;if(e){if(/__amp_source_origin/.test(e)){b=!1;break a}if(b=b.allowedProtocols)if(e=/^([^:\/?#.]+):[\s\S]*$/.exec(e),null!==e&&(e=e[1].toLowerCase().trim(),!v.call(b,e))){b=!1;break a}}b=!0}if(!b)return!1}}let f=d.denylistedValueRegex;return c&&f&&new RegExp(f,"i").test(c)?!1:!0}}class kb{constructor(){this.F=[]}peek(){let a=this.length;return a?this.F[a-1].item:null}enqueue(a,b){if(isNaN(b))throw Error("Priority must not be NaN.");let c=-1,d=0,e=this.length;for(;d<=e;){c=Math.floor((d+e)/2);if(c===this.length)break;if(this.F[c].priority<b)d=c+1;else if(0<c&&this.F[c-1].priority>=b)e=c-1;else break}this.F.splice(c,0,{item:a,priority:b})}forEach(a){let b=this.length;for(;b--;)a(this.F[b].item)}dequeue(){return this.length?this.F.pop().item:null}get length(){return this.F.length}}let lb=!1;function mb(a){if(!lb){lb=!0;a=a.body;var b={opacity:1,visibility:"visible",animation:"none"};for(let h in b){var c=a,d=b[h];a:{var e=c.style;var f=h;if(f.startsWith("--")){e=f;break a}Na||(Na=y());let k=Na[f];if(!k){k=f;if(void 0===e[f]){var g=f;g=g.charAt(0).toUpperCase()+g.slice(1);b:{for(let l=0;l<Oa.length;l++){let m=Oa[l]+g;if(void 0!==e[m]){g=m;break b}}g=""}void 0!==e[g]&&(k=g)}Na[f]=k}e=k}e&&(e.startsWith("--")?c.style.setProperty(e,d):c.style[e]=d)}}}let nb=/nochunking=1/.test(self.location.hash);let ob=F();function pb(a,b){if(nb)ob.then(b);else{var c=qb;let d=R(a),e=S(d);xa(e,d,"chunk",c);Q(a,"chunk").run(b,10)}}function rb(a,b){if("run"!=a.state){a.state="run";try{a.U(b)}catch(c){throw a.ia(),c}}}class sb{constructor(a){this.state="not_run";this.U=a}M(){return this.U.displayName||this.U.name}ia(){}fa(){return!1}oa(){return!1}}class tb extends sb{constructor(a,b){super(a);this.aa=b}ia(){mb(self.document)}fa(){return this.aa.ampdoc.isVisible()}oa(){return this.aa.ba}}function ub(a){if(!a.P){var b=vb(a);b&&(b.fa()?(a.P=!0,wb(a)):b.oa()&&a.h.requestIdleCallback?xb(a.h,a.$):yb(a))}}function vb(a,b){let c=a.I.peek();for(;c&&"not_run"!==c.state;)a.I.dequeue(),c=a.I.peek();c&&b&&a.I.dequeue();return c}function yb(a){a.h.postMessage("amp-macro-task","*")}function wb(a){a.ta&&(a.Ba?a.h.navigator.scheduling.isInputPending():5<a.J)?(a.J=0,yb(a)):ob.then((()=>{a.$(null)}))}class qb{constructor(a){this.ampdoc=a;this.h=a.win;this.I=new kb;this.$=this.da.bind(this);this.J=0;this.Ba=!(!this.h.navigator.scheduling||!this.h.navigator.scheduling.isInputPending);this.P=!1;this.ta=this.h.document.documentElement.hasAttribute("i-amphtml-no-boilerplate");this.h.addEventListener("message",(b=>{"amp-macro-task"==b.data&&this.da(null)}));this.ba=!1;ya(S(a),"viewer").then((()=>{this.ba=!0}));a.onVisibilityChanged((()=>{a.isVisible()&&ub(this)}))}run(a,b){a=new sb(a);this.I.enqueue(a,b);ub(this)}runForStartup(a){a=new tb(a,this);this.I.enqueue(a,Number.POSITIVE_INFINITY);ub(this)}da(a){let b=vb(this,!0);if(!b)return this.P=!1,this.J=0,!1;let c;try{c=Date.now(),rb(b,a)}finally{ob.then().then().then().then().then().then().then().then().then((()=>{this.P=!1;this.J+=Date.now()-c;ub(this)}))}return!0}}function xb(a,b){function c(e){if(15>e.timeRemaining()){let f=2e3-(Date.now()-d);0>=f||e.didTimeout?b(e):a.requestIdleCallback(c,{timeout:f})}else b(e)}let d=Date.now();a.requestIdleCallback(c,{timeout:2e3})}class zb{constructor(){this.B=y();this.C=null}get(a){a=this.B[a];return null==a?null:a}whenSignal(a){var b;let c=null===(b=this.C)||void 0===b?void 0:b[a];c||(b=this.B[a],c=null!=b?{promise:"number"==typeof b?Promise.resolve(b):Promise.reject(b)}:new G,this.C||(this.C=y()),this.C[a]=c);return c.promise}signal(a,b){var c;if(null==this.B[a]){var d=null!==b&&void 0!==b?b:Date.now();this.B[a]=d;a=null===(c=this.C)||void 0===c?void 0:c[a];null!==a&&void 0!==a&&a.resolve&&(a.resolve(d),a.resolve=void 0,a.reject=void 0)}}rejectSignal(a,b){var c;null==this.B[a]&&(this.B[a]=b,a=null===(c=this.C)||void 0===c?void 0:c[a],null!==a&&void 0!==a&&a.reject&&(a.reject(b),a.promise.catch((()=>{})),a.resolve=void 0,a.reject=void 0))}reset(a){var b;this.B[a]&&delete this.B[a];let c=null===(b=this.C)||void 0===b?void 0:b[a];c&&!c.resolve&&delete this.C[a]}}function Ab(a){a.tagName.startsWith("AMP-");if(a.createdCallback)return Promise.resolve(a);if(!a.__AMP_UPG_PRM){let b=new G;a.__AMP_UPG_PRM=b.promise;a.__AMP_UPG_RES=b.resolve}return a.__AMP_UPG_PRM}function Bb(a,b,c,d){return a.ea.then((()=>new Promise(((e,f)=>{let g=a.ua++;a.O[g]={method:b,resolve:e,reject:f};e=d||a.h;f=a.ra.indexOf(e);e=0<=f?f:a.ra.push(e)-1;a.Y.postMessage({method:b,args:c,scope:e,id:g})}))))}class Cb{constructor(a){this.h=a;this.Da=O(a,"xhr");let b=Ba();this.Y=null;this.ea=this.Da.fetchText(b,{ampCors:!1,bypassInterceptorForDev:!1}).then((c=>c.text())).then((c=>{c=c.replace(/^\/\/# sourceMappingURL=.*/,`//# sourceMappingURL=${`${b}.map`}`);c=new a.Blob([c+"\n//# sourceurl="+b],{type:"text/javascript"});let d=a.URL.createObjectURL(c);this.Y=new a.Worker(d);this.Y.onmessage=this.Aa.bind(this)}));this.O={};this.ua=0;this.ra=[a]}Aa(a){let b=a.data.id,c=a.data.method,d=a.data.returnValue;(a=this.O[b])?(a.resolve(d),delete this.O[b]):M().error("web-worker",`Received unexpected message (${c}, ${b}) from worker.`)}hasPendingMessages(){return 0<Object.keys(this.O).length}Ea(){return this.ea}}function Db(a){let b=a.documentElement;return["â¡4email","amp4email"].some((c=>b.hasAttribute(c)))}function Eb(){let a=Fb();return b=>setTimeout(b,a())}function Fb(){let a=0;return()=>{let b=Math.pow(1.5,a++);var c=b*(c||.3)*Math.random();.5<Math.random()&&(c*=-1);b+=c;return 1e3*b}}let X=self.__AMP_ERRORS||[];self.__AMP_ERRORS=X;function Gb(a){Gb=Eb();return Gb(a)}function Hb(a){try{return JSON.stringify(a)}catch(b){return String(a)}}function Y(a,b){try{if(a)if(void 0!==a.message)a=pa(a);else{let d=a;a=Error(Hb(d));a.origError=d}else a=Error("Unknown error");if(!a.reported){a.reported=!0;if(a.messageArray){let d=ba(a.messageArray,(e=>null===e||void 0===e?void 0:e.tagName));-1<d&&(a.associatedElement=a.messageArray[d])}var c=b||a.associatedElement;c&&c.classList&&c.classList.add("i-amphtml-error");if(self.console&&(0<=a.message.indexOf("âââ")||!a.expected)){let d=console.error||console.log;a.messageArray?d.apply(console,a.messageArray):c?d.call(console,a.message,c):d.call(console,a.message)}c&&c.xa&&c.xa("amp:error",a.message);Ib.call(self,void 0,void 0,void 0,void 0,a)}}catch(d){setTimeout((function(){throw d}))}}function Ib(a,b,c,d,e){!this||!this.document||e&&e.expected||mb(this.document);let f=!1;try{f=Jb()}catch(h){}if(!(f&&.01<Math.random())){var g=Kb(a,b,c,d,e,f);g&&Gb((()=>{try{return Lb(this,g).catch((()=>{}))}catch(h){}}))}}function Lb(a,b){return b.pt&&.9>Math.random()?F():Mb(a,b).then((c=>{if(!c){let d=new XMLHttpRequest;d.open("POST",.1>Math.random()?I.betaErrorReporting:I.errorReporting,!0);d.send(JSON.stringify(b))}}))}function Mb(a,b){a=O(a,"ampdoc");if(!a.isSingleDoc())return Promise.resolve(!1);let c=a.getSingleDoc();if(!c.getRootNode().documentElement.hasAttribute("report-errors-to-viewer"))return Promise.resolve(!1);let d=Q(c,"viewer");return d.hasCapability("errorReporter")?d.isTrustedViewer().then((e=>{if(!e)return!1;d.sendMessage("error",A({m:b.m,a:b.a,s:b.s,el:b.el,ex:b.ex,v:b.v,pt:b.pt}));return!0})):Promise.resolve(!1)}function Kb(a,b,c,d,e,f){var g=a;e&&(g=e.message?e.message:String(e));g||(g="Unknown error");a=g;let h=!(!e||!e.expected);if(!/_reported_/.test(a)&&"CANCELLED"!=a){var k=!(self&&self.window),l=Math.random();if(-1!=a.indexOf("Failed to load:")||"Script error."==a||k)if(h=!0,.001<l)return;var m=0<=a.indexOf("âââ");if(!(m&&.1<l)){g=Object.create(null);g.v=J().rtvVersion;g.noAmp=f?"1":"0";g.m=a.replace("âââ","");g.a=m?"1":"0";g.ex=h?"1":"0";g.dw=k?"1":"0";var n="1p";n="esm";g.esm="1";g.rt=n;"inabox"===n&&(g.adid=J().a4aId);var r;f=!(null===(r=self.AMP_CONFIG)||void 0===r||!r.canary);g.ca=f?"1":"0";var p;r=(null===(p=self.AMP_CONFIG)||void 0===p?void 0:p.type)||"unknown";g.bt=r;self.location.ancestorOrigins&&self.location.ancestorOrigins[0]&&(g.or=self.location.ancestorOrigins[0]);self.viewerState&&(g.vs=self.viewerState);self.parent&&self.parent!=self&&(g.iem="1");if(self.AMP&&self.AMP.viewer){let x=self.AMP.viewer.getResolvedViewerUrl(),t=self.AMP.viewer.maybeGetMessagingOrigin();x&&(g.rvu=x);t&&(g.mso=t)}var z=[];p=self.__AMP__EXPERIMENT_TOGGLES||null;for(let x in p)z.push(`${x}=${p[x]?"1":"0"}`);g.exps=z.join(",");if(e){var C;g.el=(null===(C=e.associatedElement)||void 0===C?void 0:C.tagName)||"u";e.args&&(g.args=JSON.stringify(e.args));m||e.ignoreStack||!e.stack||(g.s=e.stack);e.message&&(e.message+=" _reported_")}else g.f=b||"",g.l=c||"",g.c=d||"";g.r=self.document?self.document.referrer:"";g.ae=X.join(",");g.fr=self.location.originalHash||self.location.hash;"production"===g.bt&&(g.pt="1");b=a;25<=X.length&&X.splice(0,X.length-25+1);X.push(b);return g}}}function Jb(){var a=self;if(!a.document)return!1;a=a.document.querySelectorAll("script[src]");for(let b=0;b<a.length;b++)if(!W(a[b].src.toLowerCase()))return!0;return!1}function Nb(a,b,c){var d=self.location;Ja(c);let e=W(d),f=U(Ha(d));if("href"==b&&!c.startsWith("#"))return Ia(c,f);if("src"==b)return"amp-img"==a?Ob(c,f,e):Ia(c,f);if("srcset"==b){let g;try{g=Ya(c)}catch(h){return L().error("URL-REWRITE","Failed to parse srcset: ",h),c}return g.stringify((h=>Ob(h,f,e)))}return c}function Ob(a,b,c){a=U(Ia(a,b));return"data:"==a.protocol||W(a)||!c?a.href:`${I.cdn}/i/`+("https:"==a.protocol?"s/":"")+encodeURIComponent(a.host)+a.pathname+(a.search||"")+(a.hash||"")}let Pb=/^(i?-)?amp(html)?-/,Qb={INPUT:{checked:!0,value:!0},OPTION:{selected:!0},TEXTAREA:{text:!0,disabled:!0}},Rb=y({"AMP-CAROUSEL":["slide"],"AMP-LIST":["is-layout-container"],"AMP-SELECTOR":["selected"]}),Sb=["AMP-LIST","AMP-RENDER"];function Tb(a,b){let c=!Db(a.G.document);a.pa=new jb(c);return Z(a,"bind.init",[c]).then((()=>Promise.all([Ub(a).then((()=>a.Z.resolve())),Vb(a,[b])]))).then((()=>{b.addEventListener("amp:dom-update",(d=>Wb(a,d)))})).then((()=>{let d=b.querySelectorAll("AMP-STATE"),e=q(d).map((f=>Ab(f).then((()=>f.getImpl(!1))).then((g=>g.parseAndUpdate()))));return Promise.all(e)})).then((()=>{a.S.sendMessage("bindReady",void 0)}))}function Xb(a){return Z(a,"bind.evaluateBindings",[a.j]).then((b=>{let c=b.errors;b=b.results;Object.keys(c).forEach((d=>{let e=a.o[d];if(0<e.length){let f=c[d],g=L().createError('%s: Expression evaluation error in "%s". %s',"amp-bind",d,f.message);g.stack=f.stack;Y(g,e[0])}}));return b}))}function Yb(a,b,c){let d=[];a.D.forEach((e=>{if(!c.skipAmpState||"AMP-STATE"!==e.element.tagName)if(!c.constrain||c.constrain.some((h=>h.contains(e.element)))){var f=e.element,g=Zb(e.boundProperties,b);c.evaluateOnly||d.push($b(a,f,g))}}));return Promise.all(d)}function ac(a,b,c){return a.K.then((()=>{Object.assign(c,a.j);return Z(a,"bind.evaluateExpression",[b,c])})).then((d=>{let e=d.error;d=d.result;if(e)throw bc(e,"amp-bind: Expression eval failed.");return d}))}function cc(a,b){a.R=a.setState(b).then((()=>dc(a))).then((c=>{c&&a.V.replace(c)}));return a.R}function ec(a){if(void 0===a)return null;try{return JSON.parse(JSON.stringify(a))}catch(b){M().error("amp-bind","Failed to copy JSON ("+a+") with error: "+b)}return null}function dc(a){let b=A({data:A({"amp-bind":a.j}),title:a.G.document.title});return a.S.isEmbedded()?a.S.isTrustedViewer().then((c=>c?b:null)):Promise.resolve(b)}function fc(a,b,c,d){return(d.fast?gc(a,b,c):hc(a,b,c)).then((()=>{if(d.update)return Xb(a).then((e=>Yb(a,e,{constrain:b,evaluateOnly:"evaluate"===d.update})))}))}function gc(a,b,c){let d=ic(a,c),e=[],f=b.filter((h=>h.hasAttribute("i-amphtml-binding")));b.forEach((h=>{h=h.querySelectorAll("[i-amphtml-binding]");Array.prototype.push.apply(f,h)}));let g=a.H-a.numberOfBindings();for(b=0;b<f.length&&!jc(a,f[b],g-e.length,e);b++);d.then((()=>{}));return 0<e.length?kc(a,e):F()}function hc(a,b,c){return ic(a,c).then((()=>Vb(a,b))).then((()=>{}))}function ic(a,b){if(!b.length)return Promise.resolve(0);aa(a.D,(e=>{for(let f=0;f<b.length;f++)if(b[f].contains(e.element))return!0;return!1}));let c=[];for(let e in a.o){let f=a.o[e];aa(f,(g=>{for(let h=0;h<b.length;h++)if(b[h].contains(g))return!0;return!1}));0==f.length&&(c.push(e),delete a.o[e])}let d=c.length;return 0<d?Z(a,"bind.removeBindingsWithExpressionStrings",[c]).then((()=>d)):Promise.resolve(0)}function jc(a,b,c,d){let e=!1;let f=lc(a,b);f.length>c&&(f.length=c,e=!0);0<f.length&&a.D.push({element:b,boundProperties:f});let g=b.tagName;f.forEach((h=>{let k=h.expressionString;d.push({tagName:g,property:h.property,expressionString:k});a.o[k]||(a.o[k]=[]);a.o[k].push(b)}));return e}function kc(a,b){return Z(a,"bind.addBindings",[b]).then((c=>{Object.keys(c).forEach((d=>{let e=a.o[d];0<e.length&&bc(c[d],`amp-bind: Expression compile error in "${d}".`,e[0])}));return b.length}))}function Z(a,b,c){var d=a.h;a=a.G;if(d.Worker){var e=d,f=Cb;e=e.__AMP_TOP||(e.__AMP_TOP=e);xa(e,e,"amp-worker",f);b=Bb(O(d,"amp-worker"),b,c||[],a)}else b=Promise.reject("Worker not supported in window.");return b}function Ub(a){let b=a.ampdoc.getBody().querySelectorAll("AMP-BIND-MACRO"),c=[];la(b,(d=>{let e=(d.getAttribute("arguments")||"").split(",").map((f=>f.trim()));c.push({id:d.getAttribute("id"),argumentNames:e,expressionString:d.getAttribute("expression")})}));return 0==c.length?Promise.resolve(0):Z(a,"bind.addMacros",[c]).then((d=>{d.forEach(((e,f)=>{bc(e,"amp-bind: Parsing amp-bind-macro failed.",b[f])}));return c.length}))}function Vb(a,b){if(!b.length)return Promise.resolve(0);let c=b.map((d=>{let e=a.H-a.numberOfBindings();return mc(a,d,e).then((f=>{let g=f.bindings;f.limitExceeded&&M().expectedError("amp-bind","Maximum number of bindings reached (%s). Additional elements with bindings will be ignored.",a.H);return g}))}));return Promise.all(c).then((d=>{d=Array.prototype.concat.apply([],d);return 0<d.length?kc(a,d):0}))}function Wb(a,b){b=b.target;let c=b.parentNode;c&&Sb.includes(c.nodeName)||hc(a,[b],[b]).then((()=>{}))}function bc(a,b,c){b=L().createError("%s %s",b,a.message);b.stack=a.stack;Y(b,c);return b}function mc(a,b,c){let d=[],e=new nc(b);let f=!1;let g=()=>{let h=e.currentNode;if(h.nodeType!==Node.ELEMENT_NODE)return!e.nextNode();jc(a,h,c-d.length,d)&&(f=!0);return!(Sb.includes(h.nodeName)?e.skipSubtree():e.nextNode())||f};return new Promise((h=>{let k=l=>{let m=!1;if(l&&!l.didTimeout)for(;1<l.timeRemaining()&&!m;)m=g();else for(l=0;250>l&&!m;l++)m=g();m?h({bindings:d,limitExceeded:f}):pb(a.ampdoc,k)};pb(a.ampdoc,k)}))}function lc(a,b){let c=[],d=b.attributes;for(let h=0,k=d.length;h<k;h++){a:{let l;var e=a,f=d[h];var g=b;let m=g.tagName,n=f.name;if(2<n.length&&"["===n[0]&&"]"===n[n.length-1])l=n.substr(1,n.length-2);else if(n.startsWith("data-amp-bind-")&&(l=n.substr(14),g.hasAttribute(`[${l}]`))){g=null;break a}if(l){if(e.pa.canBind(m,l)){g={property:l,expressionString:f.value};break a}e=L().createError("%s: Binding to [%s] on <%s> is not allowed.","amp-bind",l,m);Y(e,g)}g=null}g&&c.push(g)}return c}function oc(a,b){for(let c=0;c<a.length;c++)if(a[c].contains(b))return!0;return!1}function Zb(a,b){let c=[];a.forEach((d=>{let e=d.previousResult,f=b[d.expressionString];void 0===f||Ra(f,e)||(d.previousResult=f,c.push({boundProperty:d,newValue:f}))}));return c}function $b(a,b,c){return 0===c.length?F():a.ha.mutateElement(b,(()=>{let d=y();let e,f;c.forEach((g=>{var h=g.boundProperty,k=g.newValue,l=h.property;a:{h=h.property;var m=b.tagName;switch(h){case"defaulttext":b.textContent=String(k);break;case"text":h=String(k);"TITLE"===m&&b.parentNode===a.G.document.head&&(a.G.document.title=h);"TEXTAREA"===m?b.value=h:b.textContent=h;break;case"class":h=[];for(var n=0;n<b.classList.length;n++)m=b.classList[n],Pb.test(m)&&h.push(m);Array.isArray(k)||"string"===typeof k?b.setAttribute("class",h.concat(k).join(" ")):null===k?b.setAttribute("class",h.join(" ")):(h=L().createError('%s: "%s" is not a valid result for [class].',"amp-bind",k),Y(h,b));break;default:var r="INPUT"===m&&h in b,p=b.getAttribute(h);m=!1;if("boolean"===typeof k){if(r&&b[h]!==k&&(b[h]=k,m=!0),k&&""!==p?(b.setAttribute(h,""),m=!0):k||null===p||(b.removeAttribute(h),m=!0),m&&"OPTION"===b.tagName&&"selected"===h&&k&&O(a.h,"platform").isSafari()&&(n=ka(b,"select"))){var z=q(n.options).indexOf(b);0<=z&&(n.selectedIndex=z)}}else if("object"===typeof k&&null!==k)m=!0;else if(k!==p)b:{p=h;var C=String(k);try{z=b.tagName.toLowerCase();let t=p.toLowerCase();n="src"==t||"href"==t||"xlink:href"==t||"srcset"==t?Nb(z,t,C):C;if(W(self.location)&&"a"===z&&"href"===t){let $a=b.getAttribute(t),ab="#"===n[0],bb=$a&&"#"===$a[0];ab&&!bb?(b.__AMP_ORIGINAL_TARGET_VALUE_||(b.__AMP_ORIGINAL_TARGET_VALUE_=b.getAttribute("target")),b.removeAttribute("target")):bb&&!ab&&b.setAttribute("target",b.__AMP_ORIGINAL_TARGET_VALUE_||"_top")}r&&(b[t]=n);b.setAttribute(t,n);m=!0;break b}catch(t){n=L().createError('%s: "%s" is not a valid result for [%]',"amp-bind",C,p,t),Y(n,b)}m=!1}if(m){h={name:h,value:k};break a}}h=null}let x=h;x&&(d[x.name]=x.value,"width"==l?e="number"===typeof k&&isFinite(k)?Number(k):e:"height"==l&&(f="number"===typeof k&&isFinite(k)?Number(k):f));(k=Qb[b.tagName])&&k[l]&&(l="OPTION"===b.tagName?ka(b,"SELECT"):b)&&(k=Ma(a.G,"amp:form-value-change",null,{bubbles:!0}),l.dispatchEvent(k))}));void 0===e&&void 0===f||a.ha.forceChangeSize(b,f,e);if("function"===typeof b.mutatedAttributesCallback)try{b.mutatedAttributesCallback(d)}catch(g){let h=L().createError("%s: Applying expression results (%s) failed with error,","amp-bind",JSON.stringify(d),g);Y(h,b)}}))}function pc(a,b){let c=ba(a.D,(f=>f.element==b));if(!(0>c)){var d=[],{boundProperties:e}=a.D[c];e.forEach((f=>{d.push(ac(a,f.expressionString,a.j))}));Promise.all(d).then((f=>{let g=y();e.forEach(((h,k)=>{g[h.property]=f[k]}))}))}}class qc{constructor(a){this.ampdoc=a;this.G=this.h=a.win;this.T=[];this.ya=qa(this.h,(()=>{this.T.length=0}));this.D=[];this.o=y();this.V=Q(a,"history");this.ja=[];this.H=1e3;this.ha=Q(a,"mutator");this.j=y();this.Ca=P(this.h,"timer");this.pa=null;this.S=Q(this.ampdoc,"viewer");this.S.onMessageRespond("premutate",this.za.bind(this));this.ka=a.whenFirstVisible().then((()=>a.whenReady().then((()=>a.getRootNode()))));this.K=this.ka.then((c=>Tb(this,c)));this.Z=new G;this.R=null;this.la=new zb;let b=self.AMP;b.printState=b.printState||this.wa.bind(this);b.setState=b.setState||(c=>this.setState(c));b.eval=b.eval||this.va.bind(this)}signals(){return this.la}setState(a,b={}){try{da(this.j,a)}catch(c){L().error("amp-bind","Failed to merge result from AMP.setState().",c)}return b.skipEval?F():this.R=this.K.then((()=>Xb(this))).then((c=>Yb(this,c,{skipAmpState:b.skipAmpState,constrain:b.constrain})))}invoke(a){var b=a.args;let c=a.event,d=a.method,e=a.sequenceId,f=a.tagOrTarget;if(this.T.includes(e))return L().error("amp-bind","One state action allowed per event."),F();this.T.push(e);this.ya();if(b=b.__AMP_OBJECT_STRING__){this.H=Math.min(2e3,Math.max(1e3,this.H+500));this.la.signal("FIRST_MUTATE");let g={};c&&c.detail&&(g.event=c.detail);switch(d){case"setState":return this.setStateWithExpression(b,g);case"pushState":return this.pushStateWithExpression(b,g);default:return Promise.reject(M().createError("Unrecognized method: %s.%s",f,d))}}else L().error("AMP-BIND","Please use the object-literal syntax, e.g. \"AMP.setState({foo: 'bar'})\" instead of \"AMP.setState(foo='bar')\".");return F()}setStateWithExpression(a,b){return ac(this,a,b).then((c=>cc(this,c)))}setStateWithObject(a){return(a=ec(a))?cc(this,a):Promise.reject("Invalid state")}pushStateWithExpression(a,b){return ac(this,a,b).then((c=>{let d=y();Object.keys(c).forEach((f=>{d[f]=ec(this.j[f])}));let e=()=>this.setState(d);return this.setState(c).then((()=>dc(this))).then((f=>{this.V.push(e,f)}))}))}rescan(a,b,c={}){return(c.fast?this.Z.promise:this.K).then((()=>this.Ca.timeoutPromise(c.timeout||2e3,fc(this,a,b,c),"Timed out waiting for amp-bind to rescan.")))}getState(a){a=a?D(this.j,a):void 0;return w(a)||u(a)?ec(a):a}getStateAsync(a){let b=/^[^.]*/.exec(a)[0];return this.ka.then((c=>{let d=c.querySelector(`#${CSS.escape(b)}`);if(!d)throw Error(`#${b} does not exist.`);return Ab(d).then((e=>e.getImpl(!0))).then((e=>e.getFetchingPromise())).catch((()=>{})).then((()=>this.getState(a)))}))}getStateValue(a){a=D(this.j,a);return void 0===a||null===a?null:w(a)||u(a)?JSON.stringify(a):String(a)}numberOfBindings(){return this.D.reduce(((a,b)=>a+b.boundProperties.length),0)}Ha(a){this.H=a}Fa(){return this.V}za(a){let b=[];return this.K.then((()=>{Object.keys(a.state).forEach((c=>{this.ja.includes(c)||(delete a.state[c],b.push(c))}));return this.setState(a.state)}))}addOverridableKey(a){this.ja.push(a)}Ja(a,b=null){let c={};this.D.forEach((d=>{let e=d.boundProperties,f=d.element;b&&!oc(b,f)||e.forEach((g=>{var h=a[g.expressionString];if(void 0!==h){var k=g.property,l=Rb[f.tagName];if(l&&l.includes(k))var m=null;else{switch(k){case"text":k=f.textContent;h=String(h);l=k.trim()===h.trim();break;case"class":k=[];for(l=0;l<f.classList.length;l++){var n=f.classList[l];Pb.test(n)||k.push(n)}n=[];Array.isArray(h)?n=h:"string"===typeof h?(l=h.trim(),0<l.length&&(n=l.split(" "))):(l=L().createError('%s: "%s" is not a valid result for [class].',"amp-bind",h),Y(l,f));b:{l=k;var r=n;if(l.length!==r.length)l=!1;else{n=(u(l)?l:q(l)).sort();r=(u(r)?r:q(r)).sort();for(let p=0;p<l.length;p++)if(n[p]!==r[p]){l=!1;break b}l=!0}}break;default:k=f.getAttribute(k),l=!0===h?""===k:!1===h?null===k:"number"===typeof h?Number(k)===h:k===h}m=l?null:{expected:h,actual:k}}m&&(c[`${f.tagName}[${g.property}]${m.expected}:${m.actual}`]=!0)}}))}));return Object.keys(c)}wa(a){if(a)if("string"==typeof a)D(this.j,a);else if(a.nodeType==Node.ELEMENT_NODE){let b=L().assertElement(a);pc(this,b)}}va(a){ac(this,a,this.j).then((()=>{}))}Ga(){return this.K}Ia(){return this.R}}class nc{constructor(a){let b=a.nodeType==Node.DOCUMENT_NODE?a:a.ownerDocument,c=b.documentElement.hasAttribute("i-amphtml-binding");this.na=c;this.currentNode=a;this.ga=0;this.X=c?q(a.querySelectorAll("[i-amphtml-binding]")):[];c&&a.nodeType===Node.ELEMENT_NODE&&a.hasAttribute("i-amphtml-binding")&&this.X.unshift(a);this.ma=c?null:b.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,null,!1)}nextNode(){if(this.na){if(this.ga==this.X.length)return null;let b=this.X[this.ga++];return this.currentNode=b}let a=this.ma.nextNode();null!==a&&(this.currentNode=a);return a}skipSubtree(){if(this.na){let b=this.currentNode;do{var a=this.nextNode()}while(null!==a&&b.contains(a));return a}a=this.ma;for(let b=a.currentNode;b;b=a.parentNode()){let c=a.nextSibling();if(null!==c)return this.currentNode=c}return null}}(function(a){a.registerServiceForDoc("bind",qc);a.registerElement("amp-state",Wa);a.registerElement("amp-bind-macro",ha)})(self.AMP)}});//# sourceMappingURL=amp-bind-0.1.mjs.map