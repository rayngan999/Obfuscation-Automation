/*! fangcloud - v1.0.1 */

define("modules/home_a7b0ee3",["jquery","egeui","videojs","unslider","../templates/home_62775a6","handlebars","./guest_base_ffb145a","underscore","./common_efe2ae4","i18n","fingerprint2","../templates/base_7107372"],function(e,t,n){var p=e("jquery"),i=e("egeui");e("videojs"),e("unslider");var o=e("../templates/home_62775a6"),s=e("./guest_base_ffb145a"),a=(s.ua.msie&&s.ua.version,i.Dialog);videojs.options.flash.swf=s.asset_url+"lib/videojs/4.12.15/video-js.swf";var r={};function c(e,t,n,i){var o=p(window).innerWidth();t<o?(e.css("display","block"),"center"===i&&e.css("top",-.5*n*(o/t-1)),"bottom"===i&&e.css("top",-1*n*(o/t-1))):e.css("display","none")}r.Strut={random:function(e,t){return Math.random()*(t-e)+e},arrayRandom:function(e){return e[Math.floor(Math.random()*e.length)]},interpolate:function(e,t,n){return e*(1-n)+t*n},rangePosition:function(e,t,n){return(n-e)/(t-e)},clamp:function(e,t,n){return Math.max(Math.min(e,n),t)},queryArray:function(e,t){return t||(t=document.body),Array.prototype.slice.call(t.querySelectorAll(e))},ready:function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},debounce:function(e,t){var n=void 0;return function(){clearTimeout(n),n=setTimeout(function(){return e.apply(this,arguments)},t)}},throttle:function(e,t,n){var i=n||this,o=null,a=null,s=function s(){e.apply(i,a),o=null};return function(){o||(a=arguments,o=setTimeout(s,t))}}},r.Slide=function(e,t){if(this.container=e=p(e),!e.length)return!1;var n=this,i=e.find(".slide"),o=e.find(".slide_nav");this.options=_.extend({},{triggerType:"click",autoplay:!1,animate:"display",animTime:40,stopTime:2500,loop:!1},t),this.index=0,this.slides=i,this.navs=o,this.length=i.length,this.SHOW_CLASS="active",i.eq(0).css({display:"block"}).addClass(this.SHOW_CLASS),o.eq(0).addClass(this.SHOW_CLASS),o.each(function(e,t){p(t).on(n.options.triggerType,function(){n.moveTo(e)})}),"fade"===this.options.animate&&i.each(function(e,t){e===n.index?n.initSlideItem(p(t),1):n.initSlideItem(p(t),0)}),this.options.autoplay&&this.options.stopTime&&(this.playtime=setTimeout(function(){n.play()},this.options.stopTime),o.on("mouseover",function(){n.stop()}),o.on("mouseout",function(){clearTimeout(n.playtime),n.playtime=setTimeout(function(){n.play()},n.options.stopTime)}))},r.Slide.prototype.initSlideItem=function(e,t){var n;"fade"===this.options.animate&&(n=t?1:0,e.css("opacity",n),e.css("display",t?"block":"none"))},r.Slide.prototype.stop=function(){clearTimeout(this.playtime),this.stopAutoPlay=!0},r.Slide.prototype.play=function(){var e=this;new Date;this.stopAutoPlay=!1,this.next().then(function(){!e.stopAutoPlay&&e.options.autoplay&&e.options.stopTime&&(e.playtime=setTimeout(function(){e.play()},e.options.stopTime))})},r.Slide.prototype.moveTo=function(e){var t;if(e<0||e>=this.length||e===this.index)return(t=p.Deferred()).reject(),t;"function"==typeof this.onmove&&this.onmove(this.index,e);var n=this.slides.eq(this.index);n.removeClass(this.SHOW_CLASS),this.navs.eq(this.index).removeClass(this.SHOW_CLASS),this.index=e;var i=this.slides.eq(e);return i.addClass(this.SHOW_CLASS),this.navs.eq(e).addClass(this.SHOW_CLASS),this.options.animate&&"display"!==this.options.animate?(this.animSlideList&&(this.animSlideList[0].stop(),this.initSlideItem(this.animSlideList[0],0),this.animSlideList[1].stop(),delete this.animSlideList),t="fade"===this.options.animate?p.when(n.fadeTo(this.options.animTime,0),i.fadeTo(this.options.animTime,1)):p.when(n.animate(this.options.animate,this.options.animTime),i.animate(this.options.animate,this.options.animTime)),this.animSlideList=[n,i]):(t=p.Deferred(),n.css({display:"none"}),i.css({display:"block"}),t.resolve()),t},r.Slide.prototype.prev=function(){var e=this.index-1;return this.options.loop&&e<0&&(e=this.length-1),this.moveTo(e)},r.Slide.prototype.next=function(){var e=this.index+1;return this.options.loop&&e>=this.length&&(e=0),this.moveTo(e)},r.initScroll=function(){var d=p(window),e=p(".section-block"),h=[];e.each(function(e,t){h.push(p(t).offset().top+p(t).height())}),d.scroll(function(){var e=d.scrollTop(),t=window.innerWidth,n=p(".head-banner").height()||0;if(n<e?p(".header").addClass("fixed"):p(".header").removeClass("fixed"),1280<t&&p(".home-main-banner").length){var i=p(".home-main-banner").offset().top-e,o=p(".fake-banner").offset().top-e;i<60&&!p(".home-main-banner").hasClass("fixed")?(p(".home-main-banner").addClass("fixed"),p(".fake-banner").addClass("show")):60<o&&p(".home-main-banner").hasClass("fixed")&&(p(".home-main-banner").removeClass("fixed"),p(".fake-banner").removeClass("show"));for(var a=0,s=0;s<h.length;s++)if(e+130<h[s]){a=s;break}e+130>h[h.length-1]&&(a=-1),p(".home-main-banner .active").removeClass("active"),-1<a&&p(".home-main-banner a").eq(a).addClass("active")}if(1280<t&&p(".second-banner").length){var r=p(".second-banner").offset().top-e,c=p(".fake-banner").offset().top-e,l=parseInt(p(".second-banner").attr("data-fixed-height"))||0;r<n-l&&!p(".second-banner").hasClass("fixed")?(p(".second-banner").addClass("fixed"),p(".fake-banner").addClass("show")):n-l<c&&p(".second-banner").hasClass("fixed")&&(p(".second-banner").removeClass("fixed"),p(".fake-banner").removeClass("show"))}p(".plan-banner").length&&(480<e&&!p(".plan-banner").hasClass("show")?p(".plan-banner").addClass("show").fadeIn():e<480&&p(".plan-banner").hasClass("show")&&p(".plan-banner").removeClass("show").fadeOut())}),p(".header").show(),p(window).trigger("scroll")},r.initDropDown=function(){var s=!1,e=parseInt(p(".container-1 .right").css("paddingLeft").slice(0,p(".container-1 .right").css("paddingLeft").length-2)),t=parseInt(p(".icon-box").css("marginTop").slice(0,p(".icon-box").css("marginTop").length-2));p(".wechat-code").css({left:e+p(".wechat").width()/2-p(".wechat-code").width()/2,top:p(".connect-us").height()+t-(p(".wechat-code").height()+10)+"px"}),p(".drop-btn").each(function(e,t){var a=p(t);a.on("mouseover",function(){s=!0;var e=p(".header .container"),t=".item-"+p(this).attr("data-target"),n=p(this).attr("data-position"),i=p(t),o=a.offset().left-e.offset().left+a.outerWidth()/2-i.outerWidth()/2;o=Math.max(o,0),"right"===n&&(o=a.offset().left-e.offset().left),i.css({left:o}).addClass("active").siblings(".active").removeClass("active"),"register"===p(this).attr("data-target")&&p(this).addClass("btn-active"),p(this).find(".iconfont-web.icon-arrow-down").removeClass("icon-arrow-down").addClass("icon-arrow-up")}),a.on("mouseout",function(){s=!1,setTimeout(function(){s||(p(".header .iconfont-web.icon-arrow-up").removeClass("icon-arrow-up").addClass("icon-arrow-down"),p(".drop-item").removeClass("active"))},500)})}),p(".drop-item").each(function(e,t){p(t).on("mouseover",function(){s=!0}),p(t).on("mouseout",function(){s=!1,setTimeout(function(){s||(p(".header .iconfont-web.icon-arrow-up").removeClass("icon-arrow-up").addClass("icon-arrow-down"),p(".drop-item").removeClass("active"))},500)})}),p(".right .wechat").on("mouseenter",function(e){e.stopPropagation(),p(".wechat-code").show()}),p(".right .wechat").on("mouseleave",function(e){e.stopPropagation(),p(".wechat-code").hide()})},r.initSlideScreen=function(t,i,n,o){var a,s=p(t).length;function r(e,t){e.addClass("active").siblings().removeClass("active");var n=p(i).eq(t);n.addClass("active").siblings().removeClass("active"),setTimeout(function(){n.addClass("sub-active").siblings().removeClass("sub-active")},50),a&&clearTimeout(a),a=setTimeout(function(){c()},5e3)}function c(){if(n){var e=p(t+".active").attr("data-index")||-1;e<s-1?e++:e=0,r(p(t).eq(e),e)}}p(t).each(function(e,t){t.onclick=function(){r(p(t),e)},"hover"===o&&(t.onmouseover=function(){r(p(t),e)})}),setTimeout(function(){c()},5e3)},r.lazyload=function(){var n=p("img[data-status=0]"),i=n.length;setTimeout(function o(){for(var e=0;e<i;e++)if(0==n.eq(e).attr("data-status")){var t=n.eq(e).attr("data-src");n.eq(e).attr("src",t).attr("data-status",1)}},4)},r.resizebg=function(){if(s.h5||0===p(".ie-image").length)return!1;var e=p(".ie-image"),t=e.innerWidth(),n=e.innerHeight(),i=e.attr("data-resize-position")||"center";e.css("width","100%"),p(window).on("resize",function(){c(e,t,n,i)}),c(e,t,n,i)},r.playVideo=function(){return new a({classPrefix:"egeui-video",closeTpl:'<i class="icon icon-close" title="'+s.getI18n("base.close")+'"></i>',content:'<div style="display:block;width:960px;height:540px;"><video id="home_video" class="video-js vjs-egeui-skin" controls preload="none" width="960" height="540" data-setup="{}"><source src="https://app.fangcloud.com/video/release-2017.mp4" type="video/mp4" /></video></div>',mask:!0}).after("render",function(){this.player=videojs("home_video",{autoplay:!0})}).before("destroy",function(){this.player.dispose()}).after("hide","destroy").show()},r.other=function(){p("ul.nav-list li").on("click",function(){var e=p(this),t=e.index();e.hasClass("selected")||(e.addClass("selected").siblings().removeClass("selected"),p(".main-content").removeClass("show").eq(t).addClass("show"))}).eq(0).click(),p("ul.ques-list li").on("click",".ques-title",function(e){e.preventDefault();var t=p(this),n=t.parent("li");n.hasClass("open")?(t.find("i").removeClass("icon-fold").addClass("icon-unfold"),n.removeClass("open")):(t.find("i").removeClass("icon-unfold").addClass("icon-fold"),n.addClass("open"))})},0<p("#landing_page").length&&(r.landing_page=p("#landing_page").val()),r.landingDialog=function(){var e=p("#landing_page"),t=e.attr("pageimage"),n="/auth/register?landing="+e.val(),i=new Image;i.src=t,i.onload=function(){new a({classPrefix:"egeui-landing-dialog",closeTpl:"",width:"100%",height:"100%",content:o["home/landing_page"]({link:n}),mask:{opacity:.5}}).after("hide",function(e){this.destroy(),p("html").css({overflow:"auto",height:"auto"}),p("body").css("height","auto")}).show(),p("html").css({overflow:"hidden",height:"100%"}),p("body").css("height","100%"),p(".landing-box .landing-body").css({height:i.height+"px","background-image":"url("+t+")"})}},r.showPicDialog=function(e){return new a({closeTpl:'<i class="iconfont icon-close"></i>',content:'<div class="dialog-pic-box"><img style="width: 950px" id="dialog-img" src="'+e+'"/></div>',mask:!0,events:{}}).before("render",function(){p("body")[0].style.overflow="hidden"}).after("hide","destroy").before("destroy",function(){p("body")[0].style.overflow=""}).show()},r.complaint=function(n,e){var i=p.Deferred();return s.ajax({url:"/apps/share_links/accuse",type:"json",data:n,success:function(e){if(e.success)i.resolve(n);else if(e.errors){var t=e.errors.validation_errors;i.reject(t)}},accept_errors:["validation_errors"]}),i},r.submitComplaint=function(){p(".complaint #submit").click(function(){p(".complaint .error-msg").siblings(".error").removeClass("error").end().remove();var n,i={type:p("#complaint-type .icon-radio.checked").parent().data("radio-value")||0,description:p.trim(p("#description").val()),content_url:p.trim(p("#content_url").val()),content_password:p.trim(p("#share_word").val()),contact_name:p.trim(p("#contact_name").val()),contact_phone_number:p.trim(p("#contact_phone_number").val()),captcha:p.trim(p("#captcha").val()).toUpperCase()},o={content_url:s.getI18n("home.complaint.contentUrl"),description:s.getI18n("home.complaint.description"),captcha:s.getI18n("home.complaint.captcha")},a=function(){p(".auth-code-img").trigger("click"),p("#captcha").val("")};if(5===i.type&&(o={content_url:s.getI18n("home.complaint.contentUrl"),description:s.getI18n("home.complaint.description"),contact_name:s.getI18n("home.complaint.contactName"),contact_phone_number:s.getI18n("home.complaint.contactPhoneNumber"),captcha:s.getI18n("home.complaint.captcha")}),_.each(o,function(e,t){i[t]||(p("#"+t).addClass("error"),s.showSubmitError(o[t],p("#"+t)),!n&&(n=t),a())}),n&&p(window).scrollTop(p("#"+n).offset().top-60-40),i.content_password&&!/^(?:[A-Za-z0-9]+|\*{6})$/.test(i.content_password))return s.alert(s.getI18n("home.complaint.onlyCharOrNumber")),a(),!1;!n&&r.complaint(i).fail(function(e){_.each(e,function(e){e.field?(s.showSubmitError(e.error_tr_msg,p(".complaint #"+e.field)),p(".complaint #"+e.field).addClass("error"),!n&&(n=e.field)):s.showSubmitError(e.error_tr_msg,p(".complaint #submit"))}),p(window).scrollTop(p("#"+n).offset().top-60-40),a()}).then(function(){s.topNotify(s.getI18n("home.complaint.submitSuccess")),p(".complaint").find("input").val("").end().find("#description").val("").attr("placeholder",s.getI18n("home.complaint.detailDescription")).end().find(".radio-item:eq(0), .auth-code-img").trigger("click")})})},r.initLinkClick=function(e){p(e).click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=p(this.hash);if((e=e.length&&e).length){var t=e.offset().top;return p("html,body").animate({scrollTop:t-135},500),!1}}})},r.initPopup=function(){p(".plan-list .icon-info1").each(function(e,t){new i.Tip({trigger:t,pos:"right",className:"plan-tips"})})},r.initBdOnline=function(){var e=p("#bd-online-btn"),t=p("#bd-online-phone"),n=p("#bd-online-dialog .close-btn"),i=p("#bd-online-dialog"),o=p("#bd-online-call-dialog"),a=e.attr("data-href"),s=p('<iframe src="'+a+'" frameborder="0"></iframe>');e.on("click",function(){i.addClass("show"),i.find(".content").append(s)}),n.on("click",function(){i.removeClass("show"),i.find("iframe").remove()}),t.on("mouseover",function(){o.show()}),t.on("mouseout",function(){o.hide()})},r.newsSwipe=function(){var t=p(".news-wrap .news-item"),n=p(".news-wrap .news-list"),i=0;!function o(e){setTimeout(function(){i<t.length-1?i++:i=0,n.css({transform:"translate3d(0, "+-26*i+"px, 0)","transition-duration":0===i?"0s":"300ms"}),o(0===i||i===t.length-1?1500:3e3)},e)}(3e3)},r.showConsulting=function(){p("#bd-online-btn").hasClass("hide")||p("#bd-online-btn").trigger("click")},r.initTabs=function(e){p(e).each(function(e,t){p(t).on("click",function(){var e=p(t).attr("target");p(t).addClass("active").siblings(".active").removeClass("active"),p(e).addClass("active").siblings(".active").removeClass("active")})})},r.resizeEmbed=function(){var n=p(".embed-main.new"),i=p(".embed-main.new iframe");if(n.length){var e=r.Strut.throttle(function(){var e=p(window).innerWidth(),t=Math.max(660,parseInt(.35*e));n.height(t),i.css({top:(t-60-480)/2+60+"px"})},16);p(window).on("resize",e),e()}},r.init=function(){if(r.initScroll(),r.initDropDown(),r.lazyload(),r.resizeEmbed(),p(".bd-online-btn").length&&r.initBdOnline(),p(".news-wrap").length&&r.newsSwipe(),p(".section .custom-section").length&&r.initSlideScreen(".section .custom-section .item",".section .custom-section li",!1,"hover"),p(".section.cooperate").length&&r.initSlideScreen(".cooperate .cooperate-index li",".cooperate .cooperate-content .slide li",!0),0<p(".video").length&&p(".video").on("click",function(e){e.preventDefault(),r.playVideo()}),p(".head-banner .close-btn").length&&p(".head-banner .close-btn").on("click",function(e){e.preventDefault(),p(".head-banner").addClass("hide")}),p(".dlp .btn").length&&p(".dlp .btn").on("click",function(e){e.preventDefault(),r.showConsulting()}),p(".industry-consult-btn").length&&p(".industry-consult-btn").on("click",function(e){e.preventDefault(),r.showConsulting()}),r.resizebg(),0<p(".other-container").length&&r.other(),r.landing_page&&r.landingDialog(),p(".other-container.complaint")[0]){var e=window.location.search.match(/^\?sharedata=([0-9a-zA-Z\/]+)$/);e&&(e=window.location.protocol+"//"+window.location.host+e[1],p("#content_url").val(e)),p(".auth-code-box .auth-code-img").on("click",function(){p(this).attr("src","/apps/share_links/get_accusation_pic_captcha/?t="+(new Date).getTime())}),p("#complaint-type .radio-item").click(function(){var e=p(this).find(".icon-radio");if(!e.hasClass("checked")){e.addClass("checked"),p(this).siblings().find(".icon-radio").removeClass("checked");var t="",n=s.getI18n("home.complaint.detailDescription"),i=s.getI18n("home.complaint.contactHint"),o=p(".informant-box .form-control-group"),a=p(".complaint #description");5===p(this).data("radio-value")?(t=i,o.addClass("required").eq(0).show()):(t=n,o.removeClass("required").eq(0).hide()),a.attr("placeholder",t)}}),r.submitComplaint()}s.createI18nPopup(".external-language-switch"),0<p(".be-partner").length&&p(".be-partner").on("click",function(e){r.showConsulting()}),0<p(".cust-top").length&&r.initLinkClick(".cust-top a"),0<p(".home-main-banner").length&&r.initLinkClick(".home-main-banner a"),0<p(".plan-list .icon-info1").length&&r.initPopup(),p(".download-tabs .tab").length&&r.initTabs(".download-tabs .tab")},n.exports=r});