!function(){window.AjaxQueue=function(e){var d=$({});return function(i){var o=void 0,n=$.Deferred(),s=n.promise(),a=function(t){return(o=e(i)).retry&&o.retry({times:2,statusCodes:[500,503]}),o.done(n.resolve).fail(n.reject).then(t,t)},t=function(t){var e,r;return o?o.abort(t):(r=d.queue(),-1<(e=[].indexOf.call(r,a))&&r.splice(e,1),n.rejectWith(i.context||i,[s,t,""]),s)};return d.queue(a),s.abort=t,s}}}.call(this),function(){function e(t,e){return function(){return t.apply(e,arguments)}}var t,r;function i(t){null==t&&(t={}),this.getCurrentProductWithVariations=e(this.getCurrentProductWithVariations,this),this.setProductWithVariationsCache=e(this.setProductWithVariationsCache,this),this.getProductWithVariations=e(this.getProductWithVariations,this),t.hostURL&&(r=t.hostURL),t.ajax?this.ajax=t.ajax:window.AjaxQueue?this.ajax=window.AjaxQueue($.ajax):this.ajax=$.ajax,this.promise=t.promise||$.when,this.cache={productWithVariations:{}}}(t=window.location).origin||(t.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),r=window.location.origin,i.prototype.getProductWithVariations=function(e){var r=this;return this.promise(this.cache.productWithVariations[e]||$.ajax(this._getBaseCatalogSystemURL()+"/products/variations/"+e)).done(function(t){return r.setProductWithVariationsCache(e,t)})},i.prototype.setProductWithVariationsCache=function(t,e){return this.cache.productWithVariations[t]=e},i.prototype.getCurrentProductWithVariations=function(){var t,e,r;if(window.skuJson)return this.promise(window.skuJson);for(t in r=this.cache.productWithVariations)return e=r[t],this.promise(e)},i.prototype._getBaseCatalogSystemURL=function(){return r+"/api/catalog_system/pub"},t=i,window.vtexjs||(window.vtexjs={}),window.vtexjs.Catalog=t,window.vtexjs.catalog=new window.vtexjs.Catalog}.call(this),function(){function e(t,e){return function(){return t.apply(e,arguments)}}var r,i,o,n,t,s,a,d,h,c=[].slice;function u(t){null==t&&(t={}),this._getFinishTransactionURL=e(this._getFinishTransactionURL,this),this._getGatewayCallbackURL=e(this._getGatewayCallbackURL,this),this._getProfileURL=e(this._getProfileURL,this),this._getPostalCodeURL=e(this._getPostalCodeURL,this),this._getSimulationURL=e(this._getSimulationURL,this),this._getOrdersURL=e(this._getOrdersURL,this),this._manualPriceURL=e(this._manualPriceURL,this),this._getAddToCartURL=e(this._getAddToCartURL,this),this._getRemoveGiftRegistryURL=e(this._getRemoveGiftRegistryURL,this),this._getUpdateSelectableGifts=e(this._getUpdateSelectableGifts,this),this._getCloneItemURL=e(this._getCloneItemURL,this),this._getUpdateItemURL=e(this._getUpdateItemURL,this),this._startTransactionURL=e(this._startTransactionURL,this),this._getAddCouponURL=e(this._getAddCouponURL,this),this._getCustomDataUrl=e(this._getCustomDataUrl,this),this._getChangeOrdinationURL=e(this._getChangeOrdinationURL,this),this._getItemAttachmentURL=e(this._getItemAttachmentURL,this),this._getBundleItemAttachmentURL=e(this._getBundleItemAttachmentURL,this),this._getRemoveOfferingsURL=e(this._getRemoveOfferingsURL,this),this._getAddOfferingsURL=e(this._getAddOfferingsURL,this),this._getSaveAttachmentURL=e(this._getSaveAttachmentURL,this),this._getOrderFormURLWithId=e(this._getOrderFormURLWithId,this),this._getOrderFormURL=e(this._getOrderFormURL,this),this._getOrderFormIdFromURL=e(this._getOrderFormIdFromURL,this),this._getOrderFormIdFromCookie=e(this._getOrderFormIdFromCookie,this),this._getOrderFormId=e(this._getOrderFormId,this),this.replaceSKU=e(this.replaceSKU,this),this.getChangeToAnonymousUserURL=e(this.getChangeToAnonymousUserURL,this),this.removeAccountId=e(this.removeAccountId,this),this.clearMessages=e(this.clearMessages,this),this.getOrders=e(this.getOrders,this),this.startTransaction=e(this.startTransaction,this),this.getProfileByEmail=e(this.getProfileByEmail,this),this.getAddressInformation=e(this.getAddressInformation,this),this.simulateShipping=e(this.simulateShipping,this),this.calculateShipping=e(this.calculateShipping,this),this.removeGiftRegistry=e(this.removeGiftRegistry,this),this.removeDiscountCoupon=e(this.removeDiscountCoupon,this),this.setCustomData=e(this.setCustomData,this),this.addDiscountCoupon=e(this.addDiscountCoupon,this),this.removeBundleItemAttachment=e(this.removeBundleItemAttachment,this),this.addBundleItemAttachment=e(this.addBundleItemAttachment,this),this.removeItemAttachment=e(this.removeItemAttachment,this),this.addItemAttachment=e(this.addItemAttachment,this),this.removeManualPrice=e(this.removeManualPrice,this),this.setManualPrice=e(this.setManualPrice,this),this.changeItemsOrdination=e(this.changeItemsOrdination,this),this.cloneItem=e(this.cloneItem,this),this.removeAllItems=e(this.removeAllItems,this),this.removeItems=e(this.removeItems,this),this.updateItems=e(this.updateItems,this),this.addToCart=e(this.addToCart,this),this.removeOffering=e(this.removeOffering,this),this.addOffering=e(this.addOffering,this),this.addOfferingWithInfo=e(this.addOfferingWithInfo,this),this.updateSelectableGifts=e(this.updateSelectableGifts,this),this.finishTransaction=e(this.finishTransaction,this),this.sendLocale=e(this.sendLocale,this),this.sendAttachment=e(this.sendAttachment,this),this.getOrderForm=e(this.getOrderForm,this),this._updateOrderForm=e(this._updateOrderForm,this),this._broadcastOrderFormUnlessPendingRequests=e(this._broadcastOrderFormUnlessPendingRequests,this),this._decreasePendingRequests=e(this._decreasePendingRequests,this),this._increasePendingRequests=e(this._increasePendingRequests,this),this._cacheOrderForm=e(this._cacheOrderForm,this),t.hostURL&&(d=t.hostURL),t.ajax?this.ajax=t.ajax:window.AjaxQueue?this.ajax=window.AjaxQueue($.ajax):this.ajax=$.ajax,this.promise=t.promise||$.when,this.CHECKOUT_ID="checkout",this.orderForm=void 0,this.orderFormId=void 0,this._pendingRequestCounter=0,this._urlToRequestMap={},this._allOrderFormSections=["items","totalizers","clientProfileData","shippingData","paymentData","sellers","messages","marketingData","clientPreferencesData","storePreferencesData","giftRegistryData","ratesAndBenefitsData","openTextField","commercialConditionData","customData"]}t=function(t){return t.replace(/^\s+|\s+$/g,"")},r=function(t,e,r,i,o){for(var n,s,a={},d=t.split(e),h=0,u=d.length;h<u;h++)n=(s=d[h].split(r))[0],s=2<=s.length?c.call(s,1):[],a[i(n)]=o(s.join("="));return a},s=function(){return r(window.location.search.substring(1),"&","=",decodeURIComponent,decodeURIComponent)},o=function(){return r(document.cookie,";","=",t,unescape)},i=function(t){return o()[t]},n=function(t,e){return r(e,"&","=",function(t){return t},unescape)[t]},(a=window.location).origin||(a.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),d=window.location.origin,h={ORDER_FORM_UPDATED:"orderFormUpdated.vtex",REQUEST_BEGIN:"checkoutRequestBegin.vtex",REQUEST_END:"checkoutRequestEnd.vtex"},u.prototype._cacheOrderForm=function(t){return this.orderFormId=t.orderFormId,this.orderForm=t},u.prototype._increasePendingRequests=function(t){return this._pendingRequestCounter++,$(window).trigger(h.REQUEST_BEGIN,[t])},u.prototype._decreasePendingRequests=function(){return this._pendingRequestCounter--,$(window).trigger(h.REQUEST_END,arguments)},u.prototype._broadcastOrderFormUnlessPendingRequests=function(t){if(0===this._pendingRequestCounter)return $(window).trigger(h.ORDER_FORM_UPDATED,[t])},u.prototype._orderFormHasExpectedSections=function(t,e){var r,i;if(!t||!t instanceof Object)return!1;for(r=0,i=e.length;r<i;r++)if(!t[e[r]])return!1;return!0},u.prototype._updateOrderForm=function(t){var e,r,i=this;if(null==t||!t.url)throw new Error("options.url is required when sending request");return t.type||(t.type="POST"),t.contentType||(t.contentType="application/json; charset=utf-8"),t.dataType||(t.dataType="json"),this._increasePendingRequests(t),e=this.ajax(t),null!=(r=this._urlToRequestMap[t.url])&&r.abort(),(this._urlToRequestMap[t.url]=e).always(function(){return delete i._urlToRequestMap[t.url]}),e.always(this._decreasePendingRequests),e.done(this._cacheOrderForm),e.done(this._broadcastOrderFormUnlessPendingRequests),e},u.prototype.getOrderForm=function(t){return null==t&&(t=this._allOrderFormSections),this._orderFormHasExpectedSections(this.orderForm,t)?this.promise(this.orderForm):(t={expectedOrderFormSections:t},(t=this.ajax({url:this._getOrderFormURLWithId()+"?refreshOutdatedData=true",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t)})).done(this._cacheOrderForm),t.done(this._broadcastOrderFormUnlessPendingRequests))},u.prototype.sendAttachment=function(t,e,r){var i;return null==r&&(r=this._allOrderFormSections),void 0===t||void 0===e?((i=$.Deferred()).reject("Invalid arguments"),i.promise()):(e.expectedOrderFormSections=r,this._updateOrderForm({url:this._getSaveAttachmentURL(t),data:JSON.stringify(e)}))},u.prototype.sendLocale=function(t){return this.sendAttachment("clientPreferencesData",{locale:t=null==t?"pt-BR":t},[])},u.prototype.finishTransaction=function(t,e){return null==e&&(e=this._allOrderFormSections),this._updateOrderForm({url:this._getFinishTransactionURL(t)})},u.prototype.updateSelectableGifts=function(t,e,r){r={id:t,selectedGifts:e,expectedOrderFormSections:r=null==r?this._allOrderFormSections:r};return this._updateOrderForm({url:this._getUpdateSelectableGifts(t),data:JSON.stringify(r)})},u.prototype.addOfferingWithInfo=function(t,e,r,i){i={id:t,info:e,expectedOrderFormSections:i=null==i?this._allOrderFormSections:i};return this._updateOrderForm({url:this._getAddOfferingsURL(r),data:JSON.stringify(i)})},u.prototype.addOffering=function(t,e,r){return this.addOfferingWithInfo(t,null,e,r)},u.prototype.removeOffering=function(t,e,r){r={Id:t,expectedOrderFormSections:r=null==r?this._allOrderFormSections:r};return this._updateOrderForm({url:this._getRemoveOfferingsURL(e,t),data:JSON.stringify(r)})},u.prototype.addToCart=function(t,e,r){e={orderItems:t,expectedOrderFormSections:e=null==e?this._allOrderFormSections:e},r=r?"?sc="+r:"";return this._updateOrderForm({url:this._getAddToCartURL()+r,data:JSON.stringify(e)})},u.prototype.updateItems=function(t,e,r){r={orderItems:t,expectedOrderFormSections:e=null==e?this._allOrderFormSections:e,noSplitItem:!(r=null==r?!0:r)};return this._updateOrderForm({url:this._getUpdateItemURL(),data:JSON.stringify(r)})},u.prototype.removeItems=function(t,e){var r,i,o,n,s;if(null==e&&(e=this._allOrderFormSections),t&&0===t.length)return this.getOrderForm(e);for(o=[],r=n=0,s=t.length;n<s;r=++n)i=t[r],o.push({index:i.index,quantity:0});return this.updateItems(o,e)},u.prototype.removeAllItems=function(s){var a=this;return null==s&&(s=this._allOrderFormSections),this.getOrderForm(["items"]).then(function(t){var e,r,i,o,n=t.items;if(n&&0===n.length)return t;for(r=[],e=i=0,o=n.length;i<o;e=++i)n[e],r.push({index:e,quantity:0});return a.updateItems(r,s)})},u.prototype.cloneItem=function(t,e,r){return null==r&&(r=this._allOrderFormSections),this._updateOrderForm({url:this._getCloneItemURL(t),data:JSON.stringify(e)})},u.prototype.changeItemsOrdination=function(t,e,r){r={criteria:t,ascending:e,expectedOrderFormSections:r=null==r?this._allOrderFormSections:r};return this._updateOrderForm({url:this._getChangeOrdinationURL(),data:JSON.stringify(r)})},u.prototype.setManualPrice=function(t,e){e={price:e};return this._updateOrderForm({url:this._manualPriceURL(t),type:"PUT",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(e)})},u.prototype.removeManualPrice=function(t){return this._updateOrderForm({url:this._manualPriceURL(t),type:"DELETE",contentType:"application/json; charset=utf-8",dataType:"json"})},u.prototype.addItemAttachment=function(t,e,r,i,o){o={content:r,expectedOrderFormSections:i=null==i?this._allOrderFormSections:i,noSplitItem:!(o=null==o?!0:o)};return this._updateOrderForm({url:this._getItemAttachmentURL(t,e),data:JSON.stringify(o)})},u.prototype.removeItemAttachment=function(t,e,r,i){i={content:r,expectedOrderFormSections:i=null==i?this._allOrderFormSections:i};return this._updateOrderForm({url:this._getItemAttachmentURL(t,e),type:"DELETE",data:JSON.stringify(i)})},u.prototype.addBundleItemAttachment=function(t,e,r,i,o){o={content:i,expectedOrderFormSections:o=null==o?this._allOrderFormSections:o};return this._updateOrderForm({url:this._getBundleItemAttachmentURL(t,e,r),data:JSON.stringify(o)})},u.prototype.removeBundleItemAttachment=function(t,e,r,i,o){o={content:i,expectedOrderFormSections:o=null==o?this._allOrderFormSections:o};return this._updateOrderForm({url:this._getBundleItemAttachmentURL(t,e,r),type:"DELETE",data:JSON.stringify(o)})},u.prototype.addDiscountCoupon=function(t,e){e={text:t,expectedOrderFormSections:e=null==e?this._allOrderFormSections:e};return this._updateOrderForm({url:this._getAddCouponURL(),data:JSON.stringify(e)})},u.prototype.setCustomData=function(t){var e={value:t.value};return this._updateOrderForm({type:"PUT",url:this._getCustomDataUrl({app:t.app,field:t.field}),data:JSON.stringify(e)})},u.prototype.removeDiscountCoupon=function(t){return this.addDiscountCoupon("",t)},u.prototype.removeGiftRegistry=function(t){t={expectedOrderFormSections:t=null==t?this._allOrderFormSections:t};return this._updateOrderForm({url:this._getRemoveGiftRegistryURL(),data:JSON.stringify(t)})},u.prototype.calculateShipping=function(t){return this.sendAttachment("shippingData",{address:t})},u.prototype.simulateShipping=function(){var t,e=null,r=[arguments[2],arguments[3]],i=r[0],r=r[1];return e=Array.isArray(arguments[0])?(console.warn("Calling simulateShipping with a list of items and postal code is deprecated.\nCall it with shippingData and orderFormId instead."),{items:(t=[arguments[0],arguments[1]])[0],postalCode:t[1],country:i}):{shippingData:(t=[arguments[0],arguments[1]])[0],orderFormId:t[1],country:i},r=r?"?sc="+r:"",this.ajax({url:this._getSimulationURL()+r,type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(e)})},u.prototype.getAddressInformation=function(t){return this.ajax({url:this._getPostalCodeURL(t.postalCode,t.country),type:"GET",timeout:2e4})},u.prototype.getProfileByEmail=function(t,e){return null==e&&(e=1),this.ajax({url:this._getProfileURL(),type:"GET",data:{email:t,sc:e}})},u.prototype.startTransaction=function(t,e,r,i,o,n,s,a){return null==i&&(i=!1),null==n&&(n=this._allOrderFormSections),a={referenceId:this._getOrderFormId(),savePersonalData:i,optinNewsLetter:o,value:t,referenceValue:e,interestValue:r,expectedOrderFormSections:n,recaptchaKey:s,recaptchaToken:a},this._updateOrderForm({url:this._startTransactionURL(),data:JSON.stringify(a)})},u.prototype.getOrders=function(t){return this.ajax({url:this._getOrdersURL(t),type:"GET",contentType:"application/json; charset=utf-8",dataType:"json"})},u.prototype.clearMessages=function(t){t={expectedOrderFormSections:t=null==t?this._allOrderFormSections:t};return this.ajax({url:this._getOrderFormURL()+"/messages/clear",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t)})},u.prototype.removeAccountId=function(t,e){e={expectedOrderFormSections:e=null==e?this._allOrderFormSections:e};return this._updateOrderForm({url:this._getOrderFormURL()+"/paymentAccount/"+t+"/remove",data:JSON.stringify(e)})},u.prototype.getLogoutURL=u.prototype.getChangeToAnonymousUserURL=function(){return d+"/checkout/changeToAnonymousUser/"+this._getOrderFormId()},u.prototype.replaceSKU=function(t,e,r){return null==e&&(e=this._allOrderFormSections),null==r&&(r=!0),this._updateOrderForm({url:this._getAddToCartURL(),type:"PATCH",data:JSON.stringify({orderItems:t,expectedOrderFormSections:e,noSplitItem:!r})})},u.prototype._getOrderFormId=function(){return this._getOrderFormIdFromURL()||this.orderFormId||this._getOrderFormIdFromCookie()||""},u.prototype._getOrderFormIdFromCookie=function(){var t=i("checkout.vtex.com");if(void 0!==t&&""!==t)return n(t,"__ofid")},u.prototype._getOrderFormIdFromURL=function(){return s().orderFormId},u.prototype._getBaseOrderFormURL=function(){return d+"/api/checkout/pub/orderForm"},u.prototype._getOrderFormURL=function(){var t=this._getOrderFormId();if(""===t)throw new Error("This method requires an OrderForm. Use getOrderForm beforehand.");return this._getBaseOrderFormURL()+"/"+t},u.prototype._getOrderFormURLWithId=function(){var t=this._getOrderFormId();return t?this._getBaseOrderFormURL()+"/"+t:this._getBaseOrderFormURL()},u.prototype._getSaveAttachmentURL=function(t){return this._getOrderFormURL()+"/attachments/"+t},u.prototype._getAddOfferingsURL=function(t){return this._getOrderFormURL()+"/items/"+t+"/offerings"},u.prototype._getRemoveOfferingsURL=function(t,e){return this._getOrderFormURL()+"/items/"+t+"/offerings/"+e+"/remove"},u.prototype._getBundleItemAttachmentURL=function(t,e,r){return this._getOrderFormURL()+"/items/"+t+"/bundles/"+e+"/attachments/"+r},u.prototype._getItemAttachmentURL=function(t,e){return this._getOrderFormURL()+"/items/"+t+"/attachments/"+e},u.prototype._getChangeOrdinationURL=function(){return this._getOrderFormURL()+"/itemsOrdination"},u.prototype._getCustomDataUrl=function(t){return this._getOrderFormURL()+"/customData/"+t.app+"/"+t.field},u.prototype._getAddCouponURL=function(){return this._getOrderFormURL()+"/coupons"},u.prototype._startTransactionURL=function(){return this._getOrderFormURL()+"/transaction"},u.prototype._getUpdateItemURL=function(){return this._getOrderFormURL()+"/items/update/"},u.prototype._getCloneItemURL=function(t){return this._getOrderFormURL()+"/items/"+t+"/clone"},u.prototype._getUpdateSelectableGifts=function(t){return this._getOrderFormURL()+"/selectable-gifts/"+t},u.prototype._getRemoveGiftRegistryURL=function(){return this._getBaseOrderFormURL()+("/giftRegistry/"+this._getOrderFormId())+"/remove"},u.prototype._getAddToCartURL=function(){return this._getOrderFormURL()+"/items"},u.prototype._manualPriceURL=function(t){return this._getOrderFormURL()+"/items/"+t+"/price"},u.prototype._getOrdersURL=function(t){return d+"/api/checkout/pub/orders/order-group/"+t},u.prototype._getSimulationURL=function(){return d+"/api/checkout/pub/orderForms/simulation"},u.prototype._getPostalCodeURL=function(t,e){return d+"/api/checkout/pub/postal-code/"+(e=null==e?"BRA":e)+"/"+(t=null==t?"":t)},u.prototype._getProfileURL=function(){return d+"/api/checkout/pub/profiles/"},u.prototype._getGatewayCallbackURL=function(){return d+"/checkout/gatewayCallback/{0}/{1}/{2}"},u.prototype._getFinishTransactionURL=function(t){return d+"/api/checkout/pub/gatewayCallback/"+t},a=u,window.vtexjs||(window.vtexjs={}),window.vtexjs.Checkout=a,window.vtexjs.checkout=new window.vtexjs.Checkout}.call(this);
//# sourceMappingURL=vtex.min.js.map