"use strict";!function(){var p,y,u,w,b,a,c,r={},v=function(){function e(e,t,r,o,i){if(y=e,a=o,b=r,p=t,u=i)w=u.storage;else if("ls"===e.storage)try{w=new(brandmetrics.getModule(5))(y,p,!1)}catch(e){w=void 0}}return e.prototype.isReady=function(){return c&&c.isInitiated},e.prototype.hasConsent=function(){return!0},e.prototype.addEventListener=function(e){"ready"===e.event&&this.isReady()?e.handler({api:this}):p.on(e)},e.prototype.triggerSurvey=function(o){var e,d,u=this,c=!1;void 0!==(null===(e=o)||void 0===e?void 0:e.timeout)&&0<o.timeout&&(d=setTimeout(function(){v(!(c=!0)),p.emit("surveyloaded",{available:!1,showed:!1})},o.timeout));var v=function(e,t,r){o&&o.callback&&o.callback(e,t,r)},l={mid:(o=o||{}).mid,bid:o.bid,callback:o.callback,autoRender:void 0===o.autoRender||o.autoRender,force:void 0!==o.force&&o.force,isTest:void 0!==o.isTest&&o.isTest,dtName:o.dtName},t=!1,r=[];if("none"!==y.storage&&w){var i=w.state(),a=0,n=0;for(var s in i)if(i.hasOwnProperty(s)){var m=i[s];if(!0!==l.isTest&&l.mid===m.mid&&!0===m.isAnswered){t=!0;break}!1===m.isAnswered&&m.nbrOfSurveys<y.survey.max&&Date.now()-m.lastSurvey>1e3*y.survey.interval*60&&(a=Math.max(a,m.lastSurvey),Date.now()-m.lastSurvey<6048e5&&(n+=m.nbrOfSurveys),r.push(m))}(n>=y.survey.maxTot||Date.now()-a<1e3*y.survey.intervalTot*60)&&(t=!0)}if(!0===t)return clearInterval(d),v(!1),void p.emit("surveyloaded",{available:!1,showed:!1});var f=Math.random()<=y.surveyRandomization;l.callback||l.mid||l.isTest||l.force||f?b.ExecuteConfigRequest(l.mid||null,l.isTest||!1,l.force,l.dtName,r,function(e){if(!c){clearTimeout(d);var t=!1,r=!1,o=!1;if(void 0!==e)for(var i=0,a=e.surveys;i<a.length;i++){var n=a[i];o=!0;var s=u.createSurvey(n);v(!0,n,s),t=!0,l.autoRender&&(s.show(),r=!0)}t||v(!1),p.emit("surveyloaded",{available:o,showed:r})}}):f||(clearTimeout(d),p.emit("surveyloaded",{available:!1,showed:!1}),p.emit("surveyloadskipped",l))},e.prototype.createSurvey=function(e){if(void 0===e||void 0===e.measurementId||void 0===e.displayOption)throw new Error("");if(a){var t=a(b,e,p,w||(u?u.storage:void 0));return r[e.measurementId]=t}throw new Error("brandmetrics: This configuration does not support creating surveys.")},e.prototype.addMetadata=function(e){if(void 0===e||void 0===e.name||void 0===e.value||"string"!=typeof e.value)throw new Error("Invalid Argument");b.upsertParam(e.name,e.value)},e.prototype.setDoNotTrack=function(){var e=localStorage;e&&(e.setItem("__bmdnt","true"),e.removeItem("__bm_m"),e.removeItem("__bm_s")),b.postOptout()},e.prototype.triggerExposure=function(e){if(void 0===u)throw new Error("brandmetrics: triggerExposure only works collection is activated.");u.triggerApiExposure(e)},e.prototype.collectAds=function(e){},e.prototype.getState=function(){return w?w.state():void 0},e.prototype.reinitialize=function(){void 0!==u&&u.reinitialize()},e.prototype.addUserIds=function(e){b.ConfigureDefaultParams({uid:{value:e.join(",")}})},e.prototype.getOptions=function(){return y},e.prototype.stop=function(){void 0!==u&&u.stop()},e}();window.brandmetrics.register({id:0,ctor:function(e,t,r,o,i,a,n){var s=new v(e,t,r,o,i),d={bm:s,collection:u,options:e,utils:t,client:r,callback:function(){n(s),p.emit("ready",{api:s})}};switch(a){case 0:c=new(brandmetrics.getModule(19))(d);break;case 1:c=new(brandmetrics.getModule(20))(d);break;default:throw new Error("Failed to start brandmetrics, the mode: "+a+" is not defined.")}c.start()}})}();"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(){var a,h,g,y,k,w,u,i=!1,E=[],b=[],S={},x=function(e,s,o){e.forEach(function(e){var t;switch(e.status){case 1:O(e);var n=Math.floor((e.last-e.start)/1e3),i=s.storage.updateExp(e.mid,e.uid,0,n);y.postEvent(11,e.mid,i,{pid:e.uid,ts:(n+1).toString()})}var r=E.indexOf(e);o?(null===(t=g)||void 0===t||t.unObserve(e.element),E.splice(r,1)):E[r]={status:3,uid:e.uid,mid:e.mid,element:e.element}}),c(s.storage,!0)},o=function(e,t){var n=E.indexOf(e),i=t.storage.updateExp(e.mid,e.uid,1,1);y.postEvent(10,e.mid,i,{pid:e.uid,first:S[e.uid].sentTrackingExposure?void 0:"true"}),S[e.uid].sentTrackingExposure=!0,E[n]=__assign(__assign({},e),{status:1,start:Date.now()-1e3,last:Date.now()})},O=function(e){var t=Date.now(),n=k.getIdleTimeout();if(t-e.last>n+1){var i=e.last-e.start;e.start=t-i-n}e.last=t},l=function(r,s){for(var e=function(e){var t,n,i=(t=e.element,0<(n=s.filter(function(e){return e.element===t})).length&&n[0]);switch(e.status){case 1:i&&1!==i.state?x([e],r,!1):O(e);break;case 0:case 3:i&&1===i.state&&o(e,r)}},t=0,n=E;t<n.length;t++){e(n[t])}c(r.storage,!0)},c=function(e,t){var n=E.map(function(e){return 1===e.status?{mid:e.mid,uid:e.uid,start:e.start,last:e.last}:null});e.setSession(n.filter(function(e){return null!==e})),t&&m()},s=function(a,u,l){var e,c=!1,d=null;if(u.element instanceof HTMLElement)d=u.element;else if(u.element&&-1===u.element.indexOf("/"))try{var t=document.querySelectorAll(k.escapeSelector("#"+u.element));d=0<t.length?t[t.length-1]:null}catch(e){d=null}for(var f=null!==d?E.filter(function(e){return e.element===d}):[],p=[],n=function(t){var e=I(t.keys,u.key);if(null!==e){var n=function(t,e){var n;if(void 0===e)switch(t.source){case"apn":n=["creativeId"];break;case"gpt":n=["creativeId","lineItemId"];break;case"pbj":n=["dealId"];break;case"ntv":case"api":case"slot":n=["key"];break;case"instant":n=["pid"];break;default:throw Error("Constructing id's from source: "+t.source+" is not implemented.")}else n=e;return n.map(function(e){return t[e]}).join(":")}(u.key,t.uks),i=h.adSlot.hostCollectionConfiguration;if(i&&w&&("all"===i.type||"specified"===i.type&&-1!==i.ids.indexOf(t.id)))return w.transmitBeacon(t.id,n),{value:void 0};if(e.meta&&!0===e.meta.collect&&u.ad&&b.indexOf(n)<0&&b.push(n),l&&S[n]&&!0===S[n].seen?y.postEvent(13,t.id,void 0,{pid:n}):y.postEvent(12,t.id,void 0,{pid:n}),S[n]||(S[n]={seen:!0,sentTrackingExposure:!1}),void 0===g||null===d){var r=a.storage.updateExp(t.id,n,1,1);y.postEvent(10,t.id,r,{pid:n,first:S[n].sentTrackingExposure?void 0:"true",noel:"true"}),S[n].sentTrackingExposure=!0}else{c=!0;var s=E.filter(function(e){return 1===e.status&&e.mid===t.id&&(d===e.element||e.element.id&&d.querySelector(k.escapeSelector("#"+e.element.id))||d.id&&e.element.querySelector(k.escapeSelector("#"+d.id)))})[0];if(s)O(s);else{if(0<f.length){var o=f.filter(function(e){return e.uid!==n});x(o,a,!0)}E.push({status:0,mid:t.id,uid:n,element:d}),p.push(d)}}}},i=0,r=h.measurements;i<r.length;i++){var s=n(r[i]);if("object"==typeof s)return s.value}for(var o=0,v=p;o<v.length;o++){var m=v[o];null===(e=g)||void 0===e||e.observe(m)}!c&&0<f.length&&x(f,a,!0)},d=function(e,t,n){n=n?2*n:100,e.isReady()?t():setTimeout(function(){return d(e,t,n)},n)},f=function(e){u.clean(h.measurements);for(var t=0,n=e;t<n.length;t++){var i=n[t],r=Math.floor((i.last-i.start)/1e3),s=u.updateExp(i.mid,i.uid,0,r);y.postEvent(11,i.mid,s,{pid:i.uid,ts:r.toString()})}u.setSession([])},n=function(e){a.forEach(function(e){return e.setActive(!1)}),t(),x(E.filter(function(){return!0}),e,!0),f(u.getSession())},r=function(t,n){a.filter(function(e){return e.isReady()}).map(function(e){return e.getDisplayedSlots()}).forEach(function(e){e.forEach(function(e){return s(t,e,n)})}),a.forEach(function(e){return e.setActive(!0)}),m()},p=function(e,t){if(i)switch(e){case 0:r(t,!0);break;case 1:n(t)}},v=function(e){var t,n=brandmetrics.getModule(17),i=brandmetrics.getModule(18),r=brandmetrics.getModule(16),s=brandmetrics.getModule(15);return(window.omid3p||window.oo)&&i?t=new i(e):window.mraid&&n?t=new n(e):window.IntersectionObserver&&r?t=new r(e):s&&(t=new s(e)),t},e=0,m=function(){e&&clearInterval(e),e=setInterval(function(){for(var e=0,t=E;e<t.length;e++){var n=t[e];1===n.status&&O(n)}c(u,!1)},1e3)},t=function(){e&&clearInterval(e)},I=function(e,t){for(var n=null,i=0,r=e;i<r.length;i++){var s=r[i],o=!0;for(var a in s)if(s.hasOwnProperty(a)){if("ntv"===s.source&&"urlPattern"===a||"meta"===a)continue;if(s[a]!=t[a]){o=!1;break}}if(o){n=s;break}}return n},_=function(){function e(e,t,n,i,r,s){var o=this;this.storage=r,u=r,y=t,a=i,w=s,g=v({collection:this,callback:l,utils:k=n,threshold:(h=e).inview.threshold||1e3}),k.on({event:"pagestatus",handler:function(e){p(e,o)}})}return e.prototype.isInitiated=function(){return null!=a&&null!=this.storage},e.prototype.reinitialize=function(){var t=this;n(this),r(this,!1),a.forEach(function(e){e.slotDisplayed(function(e){return s(t,e,!1)})})},e.prototype.start=function(){var r=this;f(u.getSession()),f(u.getAndRemoveOutdatedSessions());for(var e=function(i){d(i,function(){for(var e=0,t=i.getDisplayedSlots();e<t.length;e++){var n=t[e];s(r,n,!1)}i.slotDisplayed(function(e){return s(r,e,!1)})})},t=0,n=a;t<n.length;t++){e(n[t])}m(),i=!0},e.prototype.stop=function(){n(this)},e.prototype.getState=function(){return this.storage.state()},e.prototype.triggerApiExposure=function(e){var t;e.key?t={key:{source:"api",key:e.key},element:e.element}:e.mid&&(t={key:{source:"instant",mid:e.mid,pid:e.pid||e.mid},element:e.element},function(t,e){var n=h.measurements.filter(function(e){return e.id===t});if(0<n.length){var i=n[0];null===I(i.keys,e)&&i.keys.push(e)}else h.measurements.push({id:t,keys:[e]})}(e.mid,t.key)),t&&s(this,t,!1)},e.prototype.endExposure=function(t){var e=E.filter(function(e){return e.element===t});x(e,this,!0)},e}();window.brandmetrics.register({id:1,ctor:_})}();"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n};!function(){var a=3e4,r=/^#([0-9])/,n=[],c=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];n.forEach(function(e){e.event===t&&e.handler.apply(e,r)})},d=function(e){return!0===e?1:2},t=function(){var e,t=!0,r=function(e,t,r){e.addEventListener&&e.addEventListener(t,r)},n=function(){t||(c("pagestatus",0),t=!0),clearTimeout(e),e=setTimeout(o,a)},o=function(){t&&(c("pagestatus",1),t=!1)},i=window;(r(i,"load",n),r(i,"touchstart",n),r(i,"keypress",n),r(i,"scroll",n),r(i,"pagehide",o),r(i,"beforeunload",o),r(document,"visibilitychange",function(){document.hidden?o():n()}),i.IntersectionObserver)&&new IntersectionObserver(function(){n()},{threshold:.1}).observe(document.documentElement);n()},s=function(e){return Math.abs((e[2]-e[0])*(e[1]-e[3]))},i=new Array,u=function(e,t,r){if(0<i.length&&(null===e||e.isReady())){var n=i.shift();try{l(e,n,r)}catch(e){var o="Error in command: "+n.cmd+", msg: "+e;throw t.postDiagnostics(o),new Error(o)}u(e,t,r)}},l=function(e,t,r){var n,o,i,a,c,d,s,u;if(null!==e&&!e.isReady())throw new Error("Try to execute commands before initiated");switch(t.cmd=void 0===t.cmd?"":t.cmd.toLowerCase(),t.cmd){case"_loadsurvey":null===(n=e)||void 0===n||n.triggerSurvey(t.val);break;case"_forcesurvey":null===(o=e)||void 0===o||o.triggerSurvey({mid:t.val.mid,force:!0,dtName:t.val.style});break;case"_querysurvey":if(void 0===t.val||void 0===t.val.callback)throw new Error("No callback defined");null===(i=e)||void 0===i||i.triggerSurvey({autoRender:!1,callback:t.val.callback});break;case"_addmetadata":var l=t.val;void 0===l.value&&void 0!==l.val&&(l.value=l.val),null===(a=e)||void 0===a||a.addMetadata(l);break;case"_setdonottrack":null===(c=e)||void 0===c||c.setDoNotTrack();break;case"_triggerexposure":if(void 0===t.val)throw new Error("The command _triggerexposure needs a value.");null===(d=e)||void 0===d||d.triggerExposure(t.val);break;case"_addeventlistener":null!==e?e.addEventListener(t.val):r.on(t.val);break;case"_adduserids":void 0!==t.val&&(null===(s=e)||void 0===s||s.addUserIds(t.val));break;case"_reinitialize":null===(u=e)||void 0===u||u.reinitialize();break;default:throw new Error("unknown cmd")}},e=function(){function e(e){this.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.escapeSelector=function(e){var t=r.exec(e);return t&&(e=e.replace(t[0],"#\\3"+t[1]+" ")),e},e.idleTimeout&&(a=1e3*e.idleTimeout),t()}return e.prototype.getPageRect=function(){var e=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,t=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return[e,t,e+("innerWidth"in window?window.innerWidth:document.body.clientWidth),t+("innerHeight"in window?window.innerHeight:document.body.clientHeight)]},e.prototype.getElementRect=function(e){for(var t=0,r=0,n=e.offsetWidth,o=e.offsetHeight;null!==e.offsetParent;)t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return[t,r,t+n,r+o]},e.prototype.rectsIntersect=function(e,t){return e[0]<t[2]&&e[2]>t[0]&&e[1]<t[3]&&e[3]>t[1]},e.prototype.rectsRatio=function(e,t){var r=0;if(this.rectsIntersect(e,t)){var n=Math.max(e[0],t[0]),o=Math.min(e[2],t[2]),i=Math.max(e[1],t[1]),a=Math.min(e[3],t[3]);r=s([n,i,o,a])/s(t)}return r},e.prototype.inView=function(e){var t=this.getPageRect(),r=this.getElementRect(e),n=s(r)>s(t),o=this.inViewByRatio(this.rectsRatio(t,r)),i=n?d(.25<this.rectsRatio(r,t)):this.inViewByRatio(this.rectsRatio(r,t));return d(1===o||1===i)},e.prototype.inViewByRatio=function(e){return d(.5<=e)},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.apply(void 0,__spreadArrays([e],t))},e.prototype.on=function(e){n.push(e)},e.prototype.un=function(e){for(var t=n.length-1;0<=t;t--){var r=n[t];r.event===e.event&&r.handler===e.handler&&n.splice(t,1)}},e.prototype.getIdleTimeout=function(){return a},e.prototype.initProcessing=function(r,n){var o=this;window.brandmetrics.cmd=window.brandmetrics.cmd||window._brandmetrics||[],window._brandmetrics||(window._brandmetrics=window.brandmetrics.cmd),window.brandmetrics.cmd.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.push.apply(i,e),u(r,n,o),Array.prototype.push.apply(this,e)},i.push.apply(i,window.brandmetrics.cmd)},e.prototype.process=function(e,t){u(e,t,this)},e}();window.brandmetrics.register({id:2,ctor:e})}();"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(){var p,c,e,l,a,f=function(t,e){var n=[];for(var r in e=e||{},a)if(a.hasOwnProperty(r)&&(0===t.length||0<=t.indexOf(r))||e.hasOwnProperty(r)){var o=a[r],i=e[r]||o.value||(void 0!==o.func?o.func():void 0);null!=i&&""!==i&&n.push(r+"="+m(i))}return n.join("&")},v=function(t){return!(t&&(!e||-1===e.indexOf(t)))},m=function(t){return"function"==typeof encodeURIComponent?encodeURIComponent(t):window.escape(t)},n=function(){var t=document.location.ancestorOrigins&&0<document.location.ancestorOrigins.length?document.location.ancestorOrigins:[window.document.location.href],e=t[t.length-1],n=document.createElement("a");return n.href=e,n.host||""},g=function(t,e){(new Image).src=p.baseUrl+"/"+t+"?"+e},t=function(){function t(t){c={},a={siteid:{value:(p=t).siteId},toploc:{func:function(){return n()}},test:{value:p.isTest?"true":void 0},qdata:{},mid:{},pid:{},meta:{},state:{},ms:{},forced:{},msg:{},eid:{},ts:{},rt:{},rnd:{func:function(){return Math.floor(9999001*Math.random()+1e3).toString()}},adkey:{},dtname:{},slang:{value:p.language},sname:{},sit:{},uid:{value:p.userIds?p.userIds.join(","):void 0},tpl:{},first:{},noel:{}}}return t.prototype.GetBaseUrl=function(){return p.baseUrl},t.prototype.GetTemplateUrl=function(t,e,n){var r={mid:t};e?r.dtname=e:n&&(r.tpl=n);var o=f(["siteid","toploc","test","slang"],r);return(p.cdnUrl?p.cdnUrl:p.baseUrl)+"/s.html?"+o},t.prototype.upsertParam=function(t,e){c[t]=e},t.prototype.postAd=function(t,e,n,r){var o=f([],{mid:t,adkey:e}),i=new XMLHttpRequest;i.open("POST",p.baseUrl+"/ac?"+o,!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify({content:n,key:r}))},t.prototype.postAnswer=function(t,e,n,r,o,i){var a,s="";if(void 0!==o){var u=Math.max.apply(Math,o.pixels.map(function(t){return t.lastexp}));s=o.uid+";"+o.nbrOfSurveys+";"+o.pixels.map(function(t){return t.uid+","+t.exp+","+t.time}).join(";")+";"+u}var d=f([],{test:"true"===(i=i||{}).test?"true":void 0,pid:i.pid,forced:"true"===i.forced?"true":void 0,dtname:i.dtname,mid:t,qdata:e,state:s,meta:function(){var t=[];for(var e in c)if(c.hasOwnProperty(e)){var n=c[e];null!=n&&""!==n&&t.push(e+"="+m(n))}return t.join("&")}(),sname:""!==n?n:void 0,sit:r,uid:v(t)?null===(a=l)||void 0===a?void 0:a.join(","):void 0});g("a",d)},t.prototype.postDiagnostics=function(t){if(p.logErrors){var e=f(["rnd"],{msg:t});g("diagnostics",e)}},t.prototype.postOptout=function(){if(void 0!==p.siteId){var t=f(["siteid"]);g("optout",t)}},t.prototype.postEvent=function(t,e,n,r){var o=function(t,e,n,r){var o;r=r||{};var i="";if(void 0!==n){for(var a=0,s=0,u=n.pixels;s<u.length;s++)a+=u[s].exp;i=""+a}return f([],{test:"true"===r.test?"true":void 0,forced:"true"===r.forced?"true":void 0,dtname:r.dtname,pid:r.pid,eid:t.toString(),ts:r.ts,state:i,mid:e,uid:v(e)?null===(o=l)||void 0===o?void 0:o.join(","):void 0,first:"true"===r.first?"true":void 0,noel:"true"===r.noel?"true":void 0})}(t,e,n,r);g("i",o)},t.prototype.GetRedirectUrl=function(t){var e=f([],{siteid:p.siteId,rt:t});return p.baseUrl+"/r?"+e},t.prototype.ConfigureDefaultParams=function(t){a=__assign(__assign({},a),t)},t.prototype.RestrictSingleUserMesurement=function(t){e=t},t.prototype.ConfigureSingleUsers=function(t){l=t},t.prototype.ExecuteConfigRequest=function(t,e,n,r,o,i){void 0===e&&(e=!1),void 0===n&&(n=!1);var a=function(t,e,n,r,o){var i;void 0===e&&(e=!1),void 0===n&&(n=!1);var a="";if(0<o.length)for(var s=0,u=o;s<u.length;s++){var d=u[s];a=a+(d.uid+";")+d.mid+";"+d.pixels.map(function(t){return t.uid+","+t.exp}).join(";")+"|"}var c=f([],{test:e?"true":void 0,forced:n?"true":void 0,dtname:r,mid:null===t?void 0:t,ms:a,uid:v(t)?null===(i=l)||void 0===i?void 0:i.join(","):void 0,slang:p.language});return p.baseUrl+"/c.js?"+c}(t,e,n,r,o);if("xhr"===p.dataRequestType){var s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("GET",a+"&json",!0),s.withCredentials=!0,s.onload=function(){var t=""!==s.responseText?JSON.parse(s.responseText):void 0;i(t)},s.send(null)}else!function(t,e){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=e||null;var r=document.getElementsByTagName("script")[0];if(null==r||null==r.parentNode)throw new Error("can't find script tag");r.parentNode.insertBefore(n,r)}(a,function(){var t=brandmetrics.getModule(-1);i(t)})},t}();window.brandmetrics.register({id:3,ctor:t})}();"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};!function(){var c,u,p,l,r,f,y="created",m=!1,v=!1,g=[],i=window.IntersectionObserver?new IntersectionObserver(function(e){.5<=e[0].intersectionRatio&&void 0===r?r=setTimeout(function(){if(!m){var e=l?l.updateSrv(c.measurementId,!1):void 0;u.postEvent(2,c.measurementId,e,c.props),m=!0}r=setTimeout(function(){if(!v){var e=l?l.state()[c.measurementId]:void 0;u.postEvent(5,c.measurementId,e,c.props),v=!0}},4e3)},1e3):void 0!==r&&(clearTimeout(r),r=void 0)},{threshold:[0,.5]}):void 0,s={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},a=function(e){try{if(void 0!==e.data.req&&"get"===e.data.req&&("created"===y||"completed"!==y&&"closed"!==y&&("dfp"===c.displayOption.type||"apn"===c.displayOption.type))){y="requested";var t=e.data.dtname;t&&(c.props||(c.props={}),c.props.dtname=t);var n={key:e.data.key,iframeCss:c.displayOption.iframeCss,url:u.GetTemplateUrl(c.measurementId,t,c.templateId),mid:c.measurementId};return g.push(e.data.key),void e.source.postMessage(n,"*")}var r=e.data.message||e.data;if(!(e.data.origin===u.GetBaseUrl()||"null"===e.origin||e.data.key&&-1!==g.indexOf(e.data.key)))return void("string"==typeof e.data&&-1<e.data.indexOf(c.measurementId)&&u.postDiagnostics("Message origin not expected "+e.origin));var i=function(e){if("string"!=typeof e||-1===e.indexOf(c.measurementId))return null;var t=e.split("|"),n=t[1];switch(n){case"closed":return{mid:t[0],type:n};case"completed":var r,i="true",s="";return 2<t.length&&-1<(r=t[2]).indexOf("closeSurvey")&&(i=r.substring(r.lastIndexOf("=")+1)),3<t.length&&-1<(r=t[3]).indexOf("closeSurveyTimeout")&&(s=r.substring(r.lastIndexOf("=")+1)),{mid:t[0],type:n,closeSurvey:i,closeSurveyTimeout:s};case"rendered":var o=t[2],a=o.substring(o.lastIndexOf("=")+1),d="";if(3<t.length){var u=t[3];d=u.substring(u.lastIndexOf("=")+1)}return{mid:t[0],type:n,size:a,surveyType:d};case"resize":return{mid:t[0],type:n,size:e.substring(e.lastIndexOf("=")+1)};case"answer":var p=S(t,"surveyName");return{mid:t[0],type:n,answer:t[2],surveyName:p};case"redirect":return{target:t[2],type:n};case"updateStyle":return{mid:t[0],type:n,style:e.substring(e.lastIndexOf("=")+1)};case"requestClientSize":return{mid:t[0],type:n};case"surveyinview":return{mid:t[0],type:n,time:parseInt(t[2],10)};default:return null}}(r);if(null===i)return;var s=void 0===l?void 0:l.state()[c.measurementId];switch(i.type){case"rendered":"answered"===y||"closed"===y?f.close():"rendered"!==y&&(y="rendered",u.postEvent(1,i.mid,s,c.props),!i.surveyType||"2"!==i.surveyType&&"3"!==i.surveyType?w(f.element()):h(f.element()),f.resize(i.size),p.emit("surveyrendered",{}));break;case"resize":f.resize(i.size);break;case"answer":var o=v?5:m?1:0,a=l?l.updateSrv(c.measurementId,!0):void 0;u.postAnswer(i.mid,i.answer,i.surveyName,o,a,c.props),p.emit("surveyanswered",{});break;case"completed":if(y="completed",u.postEvent(3,i.mid,s,c.props),"true"===i.closeSurvey){var d=Number(i.closeSurveyTimeout);!isNaN(d)&&0<d?setTimeout(function(){f.close()},d):f.close()}break;case"closed":u.postEvent(4,i.mid,s,c.props),f.close(),p.emit("surveyclosed",{});break;case"redirect":window.location.href=u.GetRedirectUrl(i.target);break;case"updateStyle":f.updateStyle(i.style);break;case"requestClientSize":f.requestClientSize(i.mid);break;case"surveyinview":1===i.time?(s=l?l.updateSrv(c.measurementId,!1):void 0,u.postEvent(2,i.mid,s,c.props),m=!0):1<i.time&&(u.postEvent(5,i.mid,s,c.props),v=!0)}}catch(e){u.postDiagnostics("Error in handleMessage, "+e)}},w=function(e){i&&e&&!v&&i.observe(e)},h=function(t){if(void 0!==t){var e="";for(var n in s)""!==t.style.getPropertyValue(n)&&(e=s[n]);""!==e&&t.addEventListener(e,function(){var e;t.clientWidth<150||t.clientHeight<150?(e=t,i&&e&&(clearTimeout(r),r=void 0,i.unobserve(e))):w(t)},!1)}},t=function(){var e,t=c,n=document.createElement("iframe");return"inject"===t.displayOption.type&&t.displayOption.sandboxProps?n.sandbox.value=t.displayOption.sandboxProps+" allow-scripts":n.sandbox.value="allow-scripts",n.setAttribute("data-bmsurvey",""),n.height="0","inject"===c.displayOption.type&&(e=c.displayOption.displayTypeName),n.style.cssText=c.displayOption.iframeCss,n.src=u.GetTemplateUrl(t.measurementId,e,t.templateId),n.scrolling="no",n},o=function(e,t,n){if(void 0!==window.apntag&&window.apntag.loaded){var r=window.apntag,i={};n?(i[e]=t,r.setKeywords(n,i)):r.anq.push(function(){(i=r.requests?r.requests.keywords:{})[e]=t,r.setPageOpts({keywords:i})})}else setTimeout(function(){o(e,t,n)},200)},n=function(t){var n=window.apntag;n.anq.push(function(){var e=n.requests?n.requests.keywords:{};delete e[t],n.setPageOpts({keywords:e})})},d=function(t,e){if(void 0!==window.googletag&&window.googletag.apiReady){var n=window.googletag;if(t){var r=n.pubads().getSlots().filter(function(e){return e.getSlotElementId()===t})[0];r&&r.setTargeting(e,"yes")}else n.pubads().setTargeting(e,"yes"),n&&n.pubads&&n.pubads().getTargetingKeys}else setTimeout(function(){d(t,e)},200)},b=function(e){window.googletag&&window.googletag.pubads().clearTargeting(e)},_=function(e,t){void 0!==window.adhese?window.adhese.registerRequestParameters(e,t):setTimeout(function(){_(e,t)},200)},S=function(e,t){if(e){for(var n=-1,r=0;r<e.length;r++){if(e[r].substring(0,t.length)===t){n=r;break}}if(0<=n){var i=e[n];return i.substring(i.lastIndexOf("=")+1)}}return""},T=function(){function e(e){var t=this;this._dc=e,p.on({event:"surveyanswered",handler:function(){b(t._dc.targetKey||"brandmetrics-survey")}})}return e.prototype.state=function(){return y},e.prototype.resize=function(){},e.prototype.element=function(){},e.prototype.close=function(){y="closed"},e.prototype.updateStyle=function(){},e.prototype.requestClientSize=function(e){},e.prototype.show=function(){var e=this._dc.targetKey||"brandmetrics-survey",t=this._dc.adSlot;d(t,e)},e}(),O=function(){function e(e){var t=this;this._dc=e,p.on({event:"surveyanswered",handler:function(){n(t._dc.targetKeyword||"brandmetrics-survey")}})}return e.prototype.state=function(){return y},e.prototype.resize=function(){},e.prototype.element=function(){},e.prototype.close=function(){y="closed"},e.prototype.updateStyle=function(){},e.prototype.requestClientSize=function(e){},e.prototype.show=function(){var e=this._dc.targetKeyword||"kw",t=this._dc.targetValue||"brandmetrics-survey",n=this._dc.adSlot;o(e,t,n)},e}(),I=function(){function e(e){this._dc=e}return e.prototype.state=function(){return y},e.prototype.resize=function(){},e.prototype.element=function(){},e.prototype.close=function(){y="closed"},e.prototype.updateStyle=function(){},e.prototype.requestClientSize=function(e){},e.prototype.show=function(){this._dc.targetKeyword&&this._dc.targetValue&&_(this._dc.targetKeyword,this._dc.targetValue)},e}(),k=function(){function e(e){this._dc=e,this._iframe=t()}return e.prototype.state=function(){return y},e.prototype.resize=function(e){var t=null,n=null;if(0<e.indexOf(",")){var r=e.split(",");t=r[0],n=r[1]}else t=e;this._iframe.height=t+"px",n&&(this._iframe.width=n+"px")},e.prototype.element=function(){return this._iframe},e.prototype.close=function(){y="closed",this._iframe.style.display="none"},e.prototype.updateStyle=function(e){for(var t=0,n=e.split(";");t<n.length;t++){var r=n[t];if(""!==r.trim()){var i=r.split(":");this._iframe.style.setProperty(i[0].trim(),i[1].trim())}}},e.prototype.requestClientSize=function(e){var t;this._iframe.contentWindow&&this._iframe.contentWindow.postMessage(e+"|clientsize|"+(t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+","+t),"*")},e.prototype.show=function(){if("block"!==this._iframe.style.display){var e=this._dc.element||function(e){var t=e.selector;if(!t)throw new Error("No targetElement configured");var n=(!0===e.onTop?window.top.document:window.document).querySelectorAll(p.escapeSelector(t));if(n.length<=0)throw new Error("can't find target element: "+t);return n[n.length-1]}(this._dc);null==e.querySelector("iframe[data-bmsurvey]")&&(!function(e,t,n){var r=t.offsetWidth;e.style.cssText=n.iframeCss.replace("{{targetwidth}}",r.toString());var i=!1;try{""!=("before"===n.injectType?"beforebegin":"after"===n.injectType?"afterend":"prepend"===n.injectType?"afterbegin":"append"===n.injectType?"beforeend":"")&&(t.insertAdjacentElement("beforebegin",e),i=!0)}catch(e){}!1===i&&t.appendChild(e)}(this._iframe,e,this._dc),this._iframe.style.display="block")}},e}();window.brandmetrics.register({id:4,ctor:function(e,t,n,r){u=e,p=n,l=r;var i=(c=t).displayOption;if("vpaid"===i.type){var s=brandmetrics.getModule(25),o=getVPAIDAd().getSlot();o&&o.ownerDocument&&o.ownerDocument.defaultView&&o.ownerDocument.defaultView.addEventListener("message",a,!1),f=new s(i,new k(__assign(__assign({},i),{type:"inject",element:getVPAIDAd().getSlot()})),p)}else"inject"===c.displayOption.type&&!0===c.displayOption.onTop?window.top.addEventListener("message",a,!1):window.addEventListener("message",a,!1),f="dfp"===i.type?new T(i):"apn"===i.type?new O(i):"adh"===i.type?new I(i):"inject"===i.type?new k(i):{state:function(){return"failed"},resize:function(){},element:function(){},show:function(){},close:function(){},updateStyle:function(){},requestClientSize:function(){}};return f}})}();"use strict";!function(){var s,f,h,i,m="__bm_m",u="__bm_s",v={},o=!1,y=function(e){if(void 0===e&&(e=!1),o||e){var t=h.getItem(m),r={};try{r=null!=t?f.DeserializeMeasurements(t):{}}catch(e){h.removeItem(m)}v=r}return v},t=function(){return o?u+"#"+i:u},a=function(){function e(){this._data={},this.length=0}return e.prototype.calcLength=function(){this.length=Object.keys(this._data).length},e.prototype.getItem=function(e){return this._data.hasOwnProperty(e)?this._data[e]:null},e.prototype.setItem=function(e,t){var r=this._data[e]=String(t);return this.calcLength(),r},e.prototype.removeItem=function(e){var t=delete this._data[e];return this.calcLength(),t},e.prototype.clear=function(){return this._data={},this.calcLength(),this._data},e.prototype.key=function(e){var t=Object.keys(this._data);return t.length<e?t[e]:null},e}(),e=function(){function e(e,t,r){f=new(brandmetrics.getModule(21)),s=t,o=r;var n="__bm_ls_check";try{localStorage.setItem(n,n),localStorage.removeItem(n),h=localStorage}catch(e){h=new a}v=y(!0),i=Math.floor(1e6*Math.random())}return e.prototype.clean=function(e){var r={},n=y(),i=0,t=function(t){n.hasOwnProperty(t)&&(i++,void 0!==e.filter(function(e){return e.id===t})[0]&&(r[t]=n[t]))};for(var o in n)t(o);(0!==e.length&&i-e.length==1||(i-e.length)/i<=.2)&&(n=r);var a=Date.now();for(var o in n)if(n.hasOwnProperty(o)){for(var s=n[o],u=Math.max(s.created,s.lastSurvey),l=0,c=s.pixels;l<c.length;l++){var p=c[l];u=Math.max(u,p.lastexp)}var d=a-u;d<a&&24192e5<d&&delete n[o]}v=n,h.setItem(m,f.SerializeMeasurements(n))},e.prototype.state=function(){return y()},e.prototype.updateExp=function(e,t,r,n){var i=y(),o=i[e];void 0===o&&(o={mid:e,uid:s.guid(),isAnswered:!1,lastSurvey:0,nbrOfSurveys:0,created:Date.now(),pixels:[]},i[e]=o);var a=o.pixels.filter(function(e){return e.uid===t})[0];return void 0===a&&(a={uid:t,exp:0,lastexp:0,time:0},o.pixels.push(a)),a.exp=a.exp+r,a.time=a.time+n,a.lastexp=Date.now(),h.setItem(m,f.SerializeMeasurements(i)),o},e.prototype.updateSrv=function(e,t){var r=y(),n=r[e];return void 0===n&&(n={mid:e,uid:s.guid(),created:Date.now(),isAnswered:!1,lastSurvey:0,nbrOfSurveys:0,pixels:[]},r[e]=n),!0===t?n.isAnswered=!0:(n.lastSurvey=Date.now(),n.nbrOfSurveys=n.nbrOfSurveys+1),h.setItem(m,f.SerializeMeasurements(r)),n},e.prototype.getTemp=function(){return[]},e.prototype.setTemp=function(e){throw new Error("Method not implemented."+e)},e.prototype.getSession=function(){var e=h.getItem(t());return null!=e?f.DeserializeSessions(e):[]},e.prototype.setSession=function(e){h.setItem(t(),f.SerializeSessions(e))},e.prototype.getAndRemoveOutdatedSessions=function(){var a,s=[];if(o)for(var e=function(e,t){var r=h.key(e);if(0===(null===(a=r)||void 0===a?void 0:a.indexOf(u+"#"))){var n=f.DeserializeSessions(h.getItem(r)),i=(new Date).getTime(),o=!0;n.forEach(function(e){i-e.last<3e5&&(o=!1)}),o&&(s.push.apply(s,n),h.removeItem(r))}},t=0,r=h.length;t<r;t++)e(t);return s},e}();window.brandmetrics.register({id:5,ctor:e})}();"use strict";!function(){var o={exposedEvent:"slotRenderEnded"},i=function(t){var e=t,n=t.getResponseInformation(),o={source:"gpt",advertiserId:n&&n.advertiserId,campaignId:n&&n.campaignId,creativeId:""+(n&&n.creativeId),lineItemId:""+(n&&n.lineItemId)},i={key:o,element:e.getSlotElementId(),ad:e.getHtml()};return i},t=function(){function t(t){this.active=!0,o="gpt"===t.type&&t.conf?t.conf:o}return t.prototype.isReady=function(){var t=!(!window.googletag||!window.googletag.apiReady);return t},t.prototype.getDisplayedSlots=function(){var t=window.googletag.pubads().getSlots().filter(function(t){return t.getResponseInformation()}).map(function(t){return i(t)});return t},t.prototype.slotDisplayed=function(e){var n=this;window.googletag.pubads().addEventListener(o.exposedEvent,function(t){n.active&&e(i(t.slot))})},t.prototype.setActive=function(t){this.active=t},t}();window.brandmetrics.register({id:8,ctor:t})}();"use strict";!function(){var e,r,i,l=1e3,u=[],o=null,c=function(){var t,n=u.filter(function(t){var n=i.inView(t.element);return n!==t.state&&(t.state=n,!0)});t=n,e&&e(r,t)},t=function(){function t(t){r=t.collection,e=t.callback,i=t.utils,l=t.threshold}return t.prototype.observe=function(t){if(!this.isWatching(t)){var n={element:t,state:i.inView(t)};u.push(n)}null===o&&(o=setInterval(function(){c()},l))},t.prototype.unObserve=function(n){0===(u=u.filter(function(t){return t.element!==n})).length&&null!==o&&(clearInterval(o),o=null)},t.prototype.isWatching=function(n){return 0<u.filter(function(t){return t.element===n}).length},t}();window.brandmetrics.register({id:15,ctor:t})}();"use strict";!function(){var e,n,u,i,r=[],o=1e3,s={},c=function(t){e&&e(n,t)},l=function(t){t.state=0;var e=setTimeout(function(){0===t.state&&(t.state=1,c([t]))},o);s[t]=e},a=function(o){var t=r.filter(function(t){var e,n,i=(e=t.element,0<(n=o.filter(function(t){return t.target===e})).length?n[0]:null);if(i){var r=u.inViewByRatio(i.intersectionRatio);if(2===r&&i.isIntersecting&&i.rootBounds&&i.boundingClientRect)i.rootBounds.height*i.rootBounds.width<i.boundingClientRect.height*i.boundingClientRect.width&&(r=u.inView(t.element));if(r!==t.state){if(2===r)return void 0!==s[t]&&(clearTimeout(s[t]),delete s[t]),t.state=r,!0;1===r&&2===t.state&&l(t)}}return!1});c(t)},t=function(){function t(t){o=t.threshold,n=t.collection,e=t.callback,u=t.utils,i=new IntersectionObserver(a,{threshold:[0,.1,.2,.3,.4,.5]})}return t.prototype.observe=function(t){if(!this.isWatching(t)){var e={element:t,state:u.inView(t)};r.push(e),1===e.state&&l(e),i.observe(t)}},t.prototype.unObserve=function(e){r=r.filter(function(t){return t.element!==e}),i.unobserve(e)},t.prototype.isWatching=function(e){return 0<r.filter(function(t){return t.element===e}).length},t}();window.brandmetrics.register({id:16,ctor:t})}();"use strict";!function(){var u,l=function(t,e){var i;void 0===e&&(e=!0);var n,s,o,r,a=u.options;if("auto"===a.startMode.type||"sessionSubsequent"===a.startMode.type&&(n=a.startMode,s="__bmsessionviews",o=1,null!==(r=sessionStorage.getItem(s))&&(o=parseInt(r,10)+1),sessionStorage.setItem(s,o.toString()),o>n.conf.count)){var c=!function(t){for(var e=window.location.href,i=0,n=t;i<n.length;i++){var s=n[i],o=new RegExp(s);if(e.match(o))return!0}return!1}((null===(i=a.startMode.conf)||void 0===i?void 0:i.excluded)||[]);if(c&&a.startMode.conf&&a.startMode.conf.requiredElement)document.querySelector(u.utils.escapeSelector(a.startMode.conf.requiredElement))||(c=!1,e&&setTimeout(function(){l(t,!1)},1e3));c?t.triggerSurvey():u.utils.emit("surveyloaded",{available:!1,showed:!1})}},t=function(){function t(t){this.isInitiated=!1,u=t}return t.prototype.start=function(){var t=this,e=u.bm,i=u.collection,n=u.callback;if(this.isInitiated)n();else if(u.utils.initProcessing(e,u.client),i){i.start();var s=function(){i.isInitiated()?(t.isInitiated=!0,u.utils.process(e,u.client),l(e),n()):setTimeout(function(){return s()},100)};s()}else this.isInitiated=!0,u.utils.process(e,u.client),l(e),n()},t}();window.brandmetrics.register({id:19,ctor:t})}();"use strict";!function(){var e=function(){function e(){}return e.prototype.SerializeMeasurements=function(e){for(var r="",t=0,n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];r+=0!==t?"Â¤":"";var a=e[s];r+=s+"|"+a.isAnswered+"|"+a.lastSurvey+"|"+a.nbrOfSurveys+"|"+a.uid+"|"+a.created;for(var o=0,l=a.pixels;o<l.length;o++){var p=l[o];r+=";"+p.exp+"|"+p.lastexp+"|"+p.time+"|"+p.uid}t++}return r},e.prototype.DeserializeMeasurements=function(e){var s={};if(e&&""!==e)for(var a,r=0,t=e.split("Â¤");r<t.length;r++){t[r].split(";").forEach(function(e,r){if(e&&""!==e){var t=e.split("|");if(0===r){if(5!==t.length&&6!==t.length)throw new Error("The string cannot be deserialized");a={mid:t[0],isAnswered:(i=t[1],"true"===i.toLowerCase()),lastSurvey:parseInt(t[2],10),nbrOfSurveys:parseInt(t[3],10),uid:t[4],created:6===t.length?parseInt(t[5],10):Date.now(),pixels:[]},s[a.mid]=a}else{if(4!==t.length)throw new Error;var n={exp:parseInt(t[0],10),lastexp:parseInt(t[1],10),time:parseInt(t[2],10),uid:t[3]};a.pixels.push(n)}}var i})}return s},e.prototype.SerializeSessions=function(e){var t="";return e.forEach(function(e,r){t+=0!==r?";":"",t+=e.last+"|"+e.mid+"|"+e.start+"|"+e.uid}),t},e.prototype.DeserializeSessions=function(e){var r=[];if(e&&""!==e)for(var t=0,n=e.split(";");t<n.length;t++){var i=n[t].split("|");if(4!==i.length)throw new Error("The string cannot be deserialized");r.push({last:parseInt(i[0],10),mid:i[1],start:parseInt(i[2],10),uid:i[3]})}return r},e}();window.brandmetrics.register({id:21,ctor:e})}();"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(){var i,o,a={},c=function(e){for(var t=e;t.parent!==window;)t=t.parent;for(var n=document.getElementsByTagName("iframe"),s=0;s<n.length;s++)if(n[s].contentWindow===t)return n[s]},t=function(e){var t=e.data;"bm"!==t.system||a[t.id]||function(e,t){switch(a[t.id]=!0,t.type){case"beacon":var n=c(e);i.triggerApiExposure({element:n,mid:t.mid,pid:t.pid});var s={system:"bm",type:"accept",id:t.id};e.postMessage(s,"*");break;case"beacon_end":i.endExposure(c(e));break;case"query_host":var r=__assign(__assign({},o),{system:"bm",type:"query_host_reply",id:t.id});e.postMessage(r,"*");break;default:throw new Error("brandmetrics: Host does not support message- type: "+t.type)}}(e.source,t)},e=function(e){i=e.collection,o=e.options.hostConfiguration||{surveysAtClient:{type:"none"},collectionAtHost:{type:"all"}},window.addEventListener("message",t,!1)};window.brandmetrics.register({id:26,ctor:e})}();