(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{303:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=o(t(110)),i=o(t(111));function o(e){return e&&e.__esModule?e:{default:e}}var c=t(244),u=t(304),l=function(){function e(n){(0,s.default)(this,e),this.menuHandlers=n,this.$html=document.querySelector("html"),this.mainContentSelector=".main-container-wrapper",this.closeHandleSelector=".js-menu-handle-close",this.parentMenuElSelector=".level-top.parent",this.notParentMenuElSelector="li.level-top:not(.parent)",this.submenuElSelector=this.parentMenuElSelector+"> ul",this.submenuLinkSelector=this.submenuElSelector+" a",this.menuActiveClass="menu-active",this.backgroundOverlay=document.querySelector(".js-background-overlay-menu"),this.accordionAnimationSpeed=400,this.accordionMenuMQ="screen and (max-width: 1024px)",this.isAccordionMenu=u.mq(this.accordionMenuMQ),this.enableDocumentScrollLock=!u.touch||!this.isAccordionMenu,this.searchHandles=document.querySelectorAll(".js-search-handle"),this.storeSwitcherHandles=document.querySelectorAll(".js-store-currency-selected")}return(0,i.default)(e,[{key:"init",value:function(){c(window).on("resize",_.debounce(function(){this.isAccordionMenu=u.mq(this.accordionMenuMQ),this.enableDocumentScrollLock=!u.touch||!this.isAccordionMenu},300)),this.renderMenu()}},{key:"renderMenu",value:function(){var e=this,n=document.querySelector(".site-notices"),t=void 0,s=void 0;c(".js-menu-account-links-placeholder","#nav").append(c(".js-menu-account-links li").clone()),c('a.level-top:contains("SALE")',"#nav").addClass("primary-nav__highlighted-item"),c("#search_mini_form").on("submit",function(e){void 0!==window.sessionStorage&&sessionStorage.setItem("search_query",e.currentTarget.find("#search").val().replace(/ /g,"+"))}),c("#search").on("keydown",function(e){13===e.which&&void 0!==window.sessionStorage&&sessionStorage.setItem("search_query",e.currentTarget.value.replace(/ /g,"+"))}),c("#search").on("keyup",function(e){8===e.which&&0===c(e.currentTarget).val().length&&c("#search_autocomplete").empty()}),window.Mage.Cookies.get("MG_cookiesAccepted")||this.isAccordionMenu||(t=setInterval(function(){var e=c(".cookie-banner");e.length&&(s=e.height(),clearInterval(t))},150)),c("body").on("mg-cookie-banner-removed",function(){e.isAccordionMenu||c(".js-menu--catalog").css("top",parseInt(c(".js-menu--catalog").css("top"),10)-s)}),n.outerHeight>0&&!this.isAccordionMenu&&c(".js-menu--catalog").css("top",parseInt(c(".js-menu--catalog").css("top"),10)+n.outerHeight),this.menuHandlers.forEach(function(n){var t=document.querySelector(c(n).data("menu"));e.createMenu(n,t)})}},{key:"createMenu",value:function(e,n){var t=this,s=n.querySelectorAll(this.parentMenuElSelector),i=n.querySelectorAll(this.notParentMenuElSelector),o=(n.querySelectorAll(this.submenuElSelector),n.querySelectorAll(this.submenuLinkSelector)),u=n.querySelectorAll(this.closeHandleSelector),l=c(e),a=c(n);if(c(o),e.addEventListener("click",this.handleClickHandler.bind(this,e,n)),this.searchHandles.forEach(function(e){e.addEventListener("click",function(){a.hasClass(t.menuActiveClass)&&t.closeMenu(l,a)})}),this.storeSwitcherHandles.forEach(function(e){e.addEventListener("click",function(){a.hasClass(t.menuActiveClass)&&t.closeMenu(l,a)})}),a.on("click",".js-new-signup-link > a",function(){a.hasClass(t.menuActiveClass)&&t.closeMenu(l,a)}),u.forEach(function(s){s.addEventListener("click",t.handleClickHandler.bind(t,e,n))}),this.backgroundOverlay.addEventListener("click",function(){t.closeMenu(l,a)}),s.forEach(function(e){var n=e.querySelector(t.submenuElSelector);hoverintent(e,function(){t.isAccordionMenu||t.openSubmenu(n)},function(){}).options({timeout:100}),e.addEventListener("click",function(e){var s=c(e.target);(s.is("a.level-top")||s.parent("a.level-top").length)&&t.menuTouchHandler(n,e)})}),i.forEach(function(e){hoverintent(e,function(){t.closeSubmenu(t.getActiveSubmenus())},function(){}).options({timeout:100})}),window.navigator.userAgent.match(/iP(ad|hone)/i)&&window.navigator.userAgent.match(/WebKit/i)){var r=void 0,h=n.querySelector(".primary-nav__menu");o.forEach(function(e){e.addEventListener("touchstart",function(){r=h.scrollTop}),e.addEventListener("touchend",function(){h.scrollTop===r&&(window.location=e.href)})})}}},{key:"openMenu",value:function(e,n){c(e).addClass(this.menuActiveClass).attr("aria-expanded","true"),c(n).addClass(this.menuActiveClass),c(this.backgroundOverlay).addClass(this.menuActiveClass),(window.experiments.mobileMenuRestyle||this.enableDocumentScrollLock)&&this.lockDocumentScrolling(!0)}},{key:"closeMenu",value:function(e,n){c(e).removeClass(this.menuActiveClass).attr("aria-expanded","false"),c(n).removeClass(this.menuActiveClass),c(this.backgroundOverlay).removeClass(this.menuActiveClass),this.closeSubmenu(),(window.experiments.mobileMenuRestyle||this.enableDocumentScrollLock)&&this.lockDocumentScrolling(!1)}},{key:"handleClickHandler",value:function(e,n){c(n).hasClass(this.menuActiveClass)?this.closeMenu(e,n):this.openMenu(e,n)}},{key:"openSubmenu",value:function(e){var n=c(e),t=n.prev("a");this.closeSubmenu(this.getActiveSubmenus()),t.addClass(this.menuActiveClass),n.addClass(this.menuActiveClass),this.isAccordionMenu&&n.slideDown(this.accordionAnimationSpeed)}},{key:"closeSubmenu",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.allSubmenuEls,n=c(e);n.prev("a").removeClass(this.menuActiveClass),n.removeClass(this.menuActiveClass),this.isAccordionMenu&&n.slideUp(this.accordionAnimationSpeed,function(){n.removeAttr("style")})}},{key:"getActiveSubmenus",value:function(){return c(this.submenuElSelector+"."+this.menuActiveClass)}},{key:"isSubmenuActive",value:function(e){return c(e).hasClass(this.menuActiveClass)}},{key:"lockDocumentScrolling",value:function(e){c(this.$html).toggleClass("fancybox-lock",e)}},{key:"menuTouchHandler",value:function(e,n){void 0!==n&&n.preventDefault(),this.isSubmenuActive(e)&&this.isAccordionMenu?this.closeSubmenu(e):(this.closeSubmenu(this.getActiveSubmenus()),this.openSubmenu(e))}}]),e}();n.default=l}}]);