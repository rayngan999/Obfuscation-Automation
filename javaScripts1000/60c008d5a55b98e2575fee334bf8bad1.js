(window.webpackJsonp=window.webpackJsonp||[]).push([[23,5,6,8,13],{678:function(e,t,i){"use strict";(function(e){var r=i(2),n=i(0),o=i(4),c=i.n(o),a=i(89),s=i(685);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(i,!0).forEach((function(t){d(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n.g.register([{rel:"stylesheet",type:"text/css",href:"public/[WEB_VER]/css/page/commonV2/card/article.css"}]),t.a={components:{},inject:{block_title:{from:"block_title",default:""}},filters:{},mixins:[a.a],props:u({article:{type:Object,default:function(){},required:!1},loading:{type:Boolean,default:!1,required:!1},sourceFrom:{type:String,default:"",required:!1},project_info:{type:Object,default:function(){},required:!1},member_info:{type:Object,default:function(){},required:!1},isNeedLogin:{type:Boolean,default:!0,required:!1},forceLogin:{type:Boolean,default:!1,required:!1},sourcePage:{type:String,default:"index"}},s.a,{keyword:{type:String,default:"",required:!1},LastReadingTimelineKey:{type:String,default:"",required:!1},assign_id:{type:String,default:"",required:!1}}),data:function(){return{pc_min_size:768,mode_type:"",collected_action:!1,post_types_name:{public:"å¬é",private:"ä»è²»",limited:"éæå¬é"},attachment_type_icons_name:{image:"icon-picture",file:"icon-link",audio:"icon-icon_sound_earphone_solid",video:"icon-camera_video"},status_type_icons_name:{lock:"icon-lock",hide:"icon-eye_solid_off"},collect_images:{default:{src:"/public/img/collect-default.png",srcset:["/public/img/collect-default@2x.png 2x","/public/img/collect-default@3x.png 3x"]},active:{src:"/public/img/collect-active.png",srcset:["/public/img/collect-active@2x.png 2x","/public/img/collect-active@3x.png 3x"]}},toggleCollect:!1,isClicked:!1}},computed:u({},Object(r.mapGetters)(["PageSetting"]),{},Object(r.mapState)({ppServerTime:function(e){return c()(new Date(e.ppServerTime),c.a.HTML5_FMT.DATETIME_LOCAL_SECONDS)}}),{isLogin:function(){return!!this.member_info.member_id},creator:function(){return"".concat(this.article.project.owner.nickname||this.article.project.owner.username)},from:function(){return"".concat(this.article.project.project_title)},needLogin:function(){return"private"===this.article.post_type&&this.isNeedLogin},isLimit:function(){return"limited"===this.article.type&&!!this.article.limited},countDownText:function(){var e="",t=this.time,i=t.years,r=t.months,n=t.days,o=t.hours,c=t.minutes,a=t.seconds,s=(t.asDays,t.asHours),l=t.asMinutes;t.asSeconds;return t.timesUp?e="å·²çµæ":"number"!=typeof i&&"number"!=typeof r&&"number"!=typeof n&&"number"!=typeof o&&"number"!=typeof c&&"number"!=typeof a||(e=0===i&&0===r&&0===n&&0===o?"éæå¬éåªå© ".concat(l," å"):"éæå¬éåªå© ".concat(s," å°æ ").concat(c," å")),e},notEmptyLabel:function(){return!!this.article.labels&&this.article.labels.length>0},sourceType:function(){return this.isLimit?"limited_time":"featured"},time:function(){if(this.article&&this.isLimit){var e=this.article.limited.end_time,t=this.ppServerTime,i=c()(e).diff(t,"seconds"),r=c.a.duration(i,"seconds");r.asSeconds()<=0&&clearInterval(this.timeInterval);var n=c.a.duration(r).years(),o=c.a.duration(r).months(),a=c.a.duration(r).days(),s=c.a.duration(r).hours(),l=c.a.duration(r).minutes(),u=c.a.duration(r).seconds(),d=c.a.duration(r,"seconds").asDays(),p=c.a.duration(r,"seconds").asHours(),h=c.a.duration(r,"seconds").asMinutes(),f=c.a.duration(r,"seconds").asSeconds(),m={years:n,months:o,days:a,hours:s,minutes:l,seconds:u,asDays:Math.floor(d),asHours:Math.floor(p),asMinutes:Math.floor(h),asSeconds:Math.floor(f),timesUp:0===n&&0===o&&0===a&&0===s&&0===l&&0===u};return m}return{years:"--",months:"--",days:"--",hours:"--",minutes:"--",seconds:"--",asDays:"--",asHours:"--",asMinutes:"--",asSeconds:"--",timesUp:!1}},releaseTime:function(){var e="YYYY/MM/DD HH:mm";return"mobile"===this.mode_type&&(e="YYYY/MM/DD"),this.formatTime(this.article.release_time,e)},reserveRelease:function(){var e=c()();return c()(this.article.release_time,c.a.HTML5_FMT.DATETIME_LOCAL_SECONDS).diff(e)>0&&!!this.project_info&&this.project_info.is_manager},attachmentMedia:function(){return this.article.attachment_type.filter((function(e){return!["image","file"].includes(e)})).sort((function(e,t){return e<t?1:e>t?-1:0}))},containerMedia:function(){return this.article.attachment_type.filter((function(e){return["video","audio"].includes(e)})).some((function(e){return e}))},duration:function(){var e=Math.floor(this.article.duration/60/60),t=Math.floor(this.article.duration/60%60),i=Math.floor(this.article.duration%60);return this.article.duration?0===e&&0===t&&0===i?"":0===e&&0===t||0===e?"".concat(this.pad(t),":").concat(this.pad(i)):"".concat(this.pad(e),":").concat(this.pad(t),":").concat(this.pad(i)):""},recordMaxCompleted:function(){var e=0;return this.article&&this.article.record&&this.article.record.max_completed&&(e=this.article.record.max_completed),e},articleRewardIds:function(){return this.article.groups.map((function(e){return e.reward_id}))},articleStatus:function(){var e,t=this.article,i=t.display_status,r=t.post_type,n=t.can_play;return this.isLogin?this.project_info&&this.project_info.is_manager?"n"===i&&(e="hide"):n||(e="lock"):"public"!==r&&(e="lock"),e},isSetBookTheme:function(){return!!this.project_info&&!!this.project_info.project_config.VIPP_THEME&&this.project_info.project_config.VIPP_THEME.split(",").includes("book")},displayProjectCreator:function(){return["collect_articles"].includes(this.$route.name)||["general"].includes(this.$route.name)&&Object.keys(this.$route.query).length<=0},displayTop:function(){return["articles"].includes(this.$route.name)||["general"].includes(this.$route.name)&&Object.keys(this.$route.query).length>0}}),watch:{PageSetting:{handler:function(e){e.width?e.width<this.pc_min_size?this.mode_type="mobile":this.mode_type="pc":this.mode_type=e.mode_type},immediate:!0},article:{handler:function(e){e&&(this.toggleCollect=e.is_collected)},deep:!0,immediate:!0}},created:function(){},mounted:function(){var e=this;e.$nextTick().then((function(){e.lazyImg()}))},updated:function(){},destroyed:function(){},methods:u({},Object(r.mapActions)([]),{},Object(r.mapMutations)([]),{exposureAct:function(){this.article&&(this.exposureCount+=1,n.c.enterTimeline(this.article.timeline_key,"articleCard",this.sourceFrom))},lazyImg:function(){e(this.$el).find(".lazyload").removeClass("lazy-bind lazy-empty"),e("body").trigger("lazyImg")},formatMoney:n.s.formatMoney,formatNumber:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this;return e<1e4?t.formatMoney(e):e>=1e4&&e<1e7?"".concat(t.formatMoney((e/1e3).toFixed(2)),"k"):"".concat(t.formatMoney((e/1e6).toFixed(2)),"m")},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getTime(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD";return c()(e,c.a.HTML5_FMT.DATETIME_LOCAL_SECONDS).format(t)},clickArticleCard:function(e){if(this.sendClickDataTask(),(!this.forceLogin||this.openLoginModal(e))&&(!this.needLogin||this.openLoginModal(e))){var t={project_id:this.article.project.project_id,timeline_key:this.article.timeline_key,source_from:this.sourceFrom||"",card_type:this.card_type||""};if(this.article.analytics&&(Object.keys(this.article.analytics).length>0||this.album.analytics.length>0)&&(t.analytics=this.article.analytics),n.s.getQueryVariable("search_keyword")&&(t.search_keyword=n.s.getQueryVariable("search_keyword")),n.s.getQueryVariable("type")&&(t.type=n.s.getQueryVariable("type")),this.$route){var i=this.$route.params.activity_id;i&&(t.activity_id=i)}this.block_title&&(t.block_title=this.block_title),void 0!==this.article.can_play&&(this.article.can_play?t.can_read=!0:t.can_read=!1),this.assign_id&&(t.assign_id=this.assign_id),n.p.pageAction("articleCard_click",t)}},collect:function(e){this.openLoginModal(e)&&(this.collected_action||this.collectAct())},collectAct:function(){var e=this,t={project_id:e.article.project.project_id,timeline_key:e.article.timeline_key};e.collected_action=!0,e.toggleCollect=!e.toggleCollect,e.$store.dispatch("setPPGlobalCollectionTimeline",t).then((function(i){e.collected_action=!1,n.p.pageAction("projectArticle_collect_click",u({},t,{},i.data,{card_type:e.card_type,sourceFrom:e.sourceFrom}))})).catch((function(t){e.collected_action=!1,n.o.warning({html:"æ¶èå¤±æï¼è«æ´½è©¢å®¢æäººå¡"})}))},openLoginModal:function(t){var i=e(t.target||t.currentTarget);i&&!i.hasClass("detect-target")&&(i=i.parents(".detect-target"));return i&&i.data("target"),!!this.isLogin||(t.preventDefault&&(t.preventDefault(),t.stopPropagation()),n.j.isMobileApp()?n.j.openNativeLogin():this.$store.dispatch("PressPlayLoginModalTriggerOpen",{}),!1)},sendClickDataTask:function(){if("home"===this.$route.name&&!this.isClicked&&(this.isClicked=!0,this.sourceType&&this.sourcePage&&this.article.timeline_key)){var e=JSON.parse(JSON.stringify({source_page:this.sourcePage,action:{click:{}}}));e.action.click[this.sourceType]=[this.article.timeline_key],this.$store.dispatch("sendPromotedCollect",e)}},labelTag:function(e){return e?"pp-route-link":"div"},highlight:function(e){return this.keyword?e.replace(new RegExp(this.keyword,"gi"),(function(e){return'<span class="highlight">'.concat(e,"</span>")})):e},pad:function(e){return"0".concat(e).slice(-2)}})}}).call(this,i(1))},685:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var r={};Object.keys(r).reduce((function(e,t){return e[t]=r[t].default,e}),{}),Object.keys(r).reduce((function(e,t){return e[t]=r[t].type,e}),{})},686:function(e,t,i){"use strict";var r=i(678).a,n=i(5),o=Object(n.a)(r,void 0,void 0,!1,null,"dfff1ace",null);t.a=o.exports}}]);