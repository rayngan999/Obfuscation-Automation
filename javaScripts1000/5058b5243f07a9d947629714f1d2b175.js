(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-049f6e62"],{"50f6":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"login-content",class:t.rootClassObj},[t.type===t.$_types.CHECKOUT_GATE?s("div",{staticClass:"login-guest-container lsco-col-xs-21 lsco-col-md-offset-1 lsco-col-md-6"},[s("heading-container",{staticClass:"login-heading-container",class:t.headingClassObj,attrs:{title:t.$t("i18n.guestCustomers").toUpperCase(),details:t.getGuestLoyaltyMsg}}),s("button",{staticClass:"btn btn-tertiary btn-block guestCheckoutBtn",attrs:{type:"button",id:"checkout-modal-button","aria-label":t.$t("i18n.checkoutAsGuest")},on:{click:t.checkoutAsGuest}},[t._v(" "+t._s(t.$t("i18n.checkoutAsGuest"))+" ")])],1):t._e(),s("div",{staticClass:"separator lsco-col-md-1"}),s("div",{class:t.innerClassObj},[s("heading-container",{staticClass:"login-heading-container",class:t.headingClassObj,attrs:{title:t.title,details:t.subCopy},scopedSlots:t._u([t.showLogo?{key:"content-above",fn:function(){return[s("div",{staticClass:"icon-wrapper",class:[{"checkout-gate-logo":t.type===t.$_types.CHECKOUT_GATE},{redTabLogo:t.isRedTabEnabled}]},[s("svg-icon",{class:["logo--"+t.getBrand,{nonLoyal:t.isNonLoyalty}],attrs:{name:t.modifiedLogoName,title:"Levis Red tab Logo"}})],1)]},proxy:!0}:null],null,!0)}),t.type===t.$_types.RESET_RESULT?s("div",{staticClass:"message-container"},[t.isResetSuccess?s("div",{staticClass:"success-message"},[s("SvgIcon",{staticClass:"success-icon",attrs:{name:"checkmark",title:"success icon"}}),s("span",[t._v(t._s(t.$t("i18n.resetPasswordSuccess")))])],1):s("div",{staticClass:"error-message"},[s("SvgIcon",{staticClass:"error-icon",attrs:{name:"error-exclamation",title:"error icon"}}),s("span",{staticClass:"error-msg",domProps:{innerHTML:t._s(t.$t("i18n.resetPasswordFail"))}})],1)]):t._e(),s("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.pristine,n=e.reset,o=e.validate;return[s("form",{staticClass:"login-form",attrs:{method:"POST",action:"javascript:void(0);","aria-label":t.$t("i18n.logIn")},on:{submit:function(e){return t.login({reset:n,validate:o})}}},[t.isEmailEditable?s("text-input",{class:["email-input",{"hide-label":!t.email},{isResetPassword:t.type===t.$_types.RESET_RESULT}],attrs:{name:t.$t("i18n.formEmailAddressLabel").toLowerCase(),rules:t.rules.requiredEmail,"is-required":!0,"show-label":!0,label:t.$t("i18n.formEmailLabel"),id:"login-email","validation-options":t.emailValidationOptions,placeholder:t.$t("i18n.formEmailLabel")},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}):t.type===t.$_types.SOFT?s("div",{staticClass:"email-text"},[t._v(" "+t._s(t.email)+" ")]):t._e(),s("password-input",{class:["password-input",{"hide-label":!t.password}],attrs:{label:t.$t("i18n.passwordText"),"is-field-required":t.type===t.$_types.SOFT,"aria-details-id":t.clickwrapNoticeId,"show-label":!0,"custom-errors":t.passwordCustomErrors,placeholder:t.$t("i18n.passwordText")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t.componentErrorMsgHtml?s("div",{staticClass:"message-container"},[s("div",{staticClass:"error-message"},[s("span",{staticClass:"error-msg",domProps:{innerHTML:t._s(t.componentErrorMsgHtml)}})])]):t._e(),s("div",{staticClass:"reset-password"},[s("a",{attrs:{tabindex:"0"},on:{click:t.onResetPasswordClick,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onResetPasswordClick(e)}}},[t._v(t._s(t.$t("i18n.forgotPasswordTitle")))])]),s("clickwrap-notice",{attrs:{"content-id":t.clickwrapNoticeId,html:t.clickwrapNotice}}),s("button-and-link",{staticClass:"button-and-link",attrs:{"button-text":t.$t("i18n.logIn"),"link-text":t.linkText,disabled:i||t.submitting},on:{linkClick:t.onLinkClick}})],1)]}}])})],1)])},n=[],o=s("a34a"),r=s.n(o),a=s("2f62"),c=s("a862"),l=s("bc86"),u=s("a60f"),d=s("77a5"),h=s("f0ac"),p=s("10e9"),m=s("0d6e"),f=s("2c0f"),g=s("5fb0"),b=s("e137"),E=s("ccd1"),C=s("12ed"),y=s("dc80"),O=s("bc58");function k(t,e,s,i,n,o,r){try{var a=t[o](r),c=a.value}catch(l){return void s(l)}a.done?e(c):Promise.resolve(c).then(i,n)}function w(t){return function(){var e=this,s=arguments;return new Promise((function(i,n){var o=t.apply(e,s);function r(t){k(o,i,n,r,a,"next",t)}function a(t){k(o,i,n,r,a,"throw",t)}r(void 0)}))}}function v(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function T(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?v(Object(s),!0).forEach((function(e){S(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function S(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var L={mixins:[d["a"],h["a"]],components:{ButtonAndLink:c["a"],ClickwrapNotice:O["a"],PasswordInput:l["a"],TextInput:u["a"],ValidationObserver:m["a"],HeadingContainer:f["a"],SvgIcon:p["a"]},props:{useEmail:{type:String,default:""},type:{type:String,default:y["a"].DEFAULT,validate:function(t){return!!y["a"].includes(t)&&!(t===y["a"].POST_SUBSCRIPTION&&!this.useEmail)}},isResetSuccess:{type:Boolean,default:!1},routingTo:{type:Object,default:null},titleText:{type:String,default:""}},data:function(){return{password:"",email:this.useEmail||"",show:{password:!1},submitting:!1,componentErrorMsgHtml:"",serverErrors:[]}},computed:T(T(T(T(T(T(T(T(T(T({},Object(a["d"])("cmsState",["globalModalLoginContent"])),Object(a["d"])("localization",["locale","country"])),Object(a["d"])("login",["redirectSA","redirectPath"])),Object(a["c"])({cartCode:"cart/code"})),Object(a["c"])("userProfileState",["uid"])),Object(a["c"])("configState",["isLevis247Enabled"])),Object(a["d"])({routeName:function(t){return t.route.name},blah:function(t){return t.route}})),Object(a["d"])("checkoutState",["isExpressCheckout"])),Object(a["c"])("configState",["paths","logoName","isNonLoyalty","isRedTabEnabled","isLevis247Enabled","isSTSOEnabled"])),{},{analyticsParamsForCheckout:function(){return{checkoutId:this.cartCode,checkoutType:this.isExpressCheckout?"express":"default"}},modifiedLogoName:function(){return"dockers"===this.logoName?"".concat(this.logoName,"-logo"):this.logoName},clickwrapNoticeId:function(){return"login-clickwrap-notice"},clickwrapNotice:function(){return this.globalModalLoginContent.clickwrap_notice||""},credentials:function(){return{username:this.email.toLowerCase(),password:this.password}},isEmailEditable:function(){return this.type===y["a"].DEFAULT||this.type===y["a"].CHECKOUT_GATE||this.type===y["a"].RESET_RESULT},emailValidationOptions:function(){return{errorTextAllReplaceWith:{i18nPath:"errors.regex"},customErrors:this.serverErrors}},inCheckoutPage:function(){return this.routeName===g["P"].CHECKOUT},inCheckoutExperience:function(){var t,e=(null===(t=this.routingTo)||void 0===t?void 0:t.name)===g["P"].CHECKOUT;return this.inCheckoutPage||e},passwordCustomErrors:function(){return this.type===y["a"].DEFAULT?[]:this.serverErrors},rootClassObj:function(){var t=["lsco-col-xs-offset-2","lsco-col-xs-offset-right-2","lsco-col-md-7"];return this.type===y["a"].CHECKOUT_GATE?["checkout-gate","lsco-col-xs-20","lsco-col-xs-offset-2","lsco-col-xs-offset-right-2","lsco-col-md-offset-0","lsco-col-md-15","lsco-col-md-offset-right-1"]:this.type===y["a"].SOFT?(t.push("soft-login"),t):t},innerClassObj:function(){return this.type===y["a"].CHECKOUT_GATE?["login-side","lsco-col-xs-21","lsco-col-md-offset-1","lsco-col-md-6"]:[]},headingClassObj:function(){return this.type===y["a"].SOFT?["login-heading-container--alignment"]:this.type===y["a"].CHECKOUT_GATE?["login-heading-container--alignment","login-heading-container--gate"]:[]},linkText:function(){return this.type===y["a"].SOFT?this.inCheckoutPage?this.$t("i18n.returnToBag"):"":this.$t("i18n.createANewAccount")},title:function(){if(this.titleText)return this.titleText;switch(this.type){case y["a"].CHECKOUT_GATE:return this.isRedTabEnabled||this.isLevis247Enabled?this.$t("i18n.members").toUpperCase():this.$t("i18n.nonLoyaltyMembers").toUpperCase();case y["a"].RESET_RESULT:if(this.isResetSuccess)return this.$t("i18n.youreBackWelcomeMsg");break;case y["a"].SOFT:return this.$t("i18n.looksLikeYouveBeenAway");default:return this.globalModalLoginContent.headline}return this.globalModalLoginContent.headline},subCopy:function(){return this.type===y["a"].RESET_RESULT&&this.isResetSuccess?"":this.type===y["a"].SOFT?this.$t("i18n.forSecurityPurposesSignin"):this.globalModalLoginContent.copy},showLogo:function(){return this.type!==y["a"].SOFT&&!(this.type===y["a"].CHECKOUT_GATE&&this.isNonLoyalty)},getGuestLoyaltyMsg:function(){return this.isRedTabEnabled?this.$t("i18n.guestCheckoutDescRedTab"):this.isLevis247Enabled?this.$t("i18n.guestCheckoutDesc247"):this.$t("i18n.guestCheckoutDescNoLoyalty")},getBrand:function(){return Object(b["a"])()}}),created:function(){if(this.$_types=y["a"],window.onResetPasswordClick=this.onResetPasswordClick,this.isSTSOEnabled){var t,e={name:this.$route.name,path:this.$route.path,page:null===(t=this.$route.query)||void 0===t?void 0:t.page,params:this.$router.params};this.$store.commit("pickupInStoreState/updateState",{property:"routeParms",value:e},{root:!0})}},beforeDestroy:function(){delete window.onResetPasswordClick},mounted:function(){this.type===y["a"].SOFT&&(this.email=this.uid),this.sendViewAnalytics()},methods:{focusOnEmailFieldIfExists:function(){document.getElementById("login-email")&&this.focusOnEmailFieldIfExists()},resetServerErrors:function(){this.serverErrors=[]},login:function(t){var e=this,s=t.reset,i=t.validate;this.resetServerErrors(),this.componentErrorMsgHtml="",Object(C["c"])(),i().then((function(t){var i=t.valid;i&&(e.submitting=!0,e.$store.dispatch("userProfileState/loginAndGetUser",e.credentials).then((function(t){var i=t.status,n=t.cartMerged,o=t.emailAlreadyExists;if(e.submitting=!1,i===g["Y"].SUCCESS)setTimeout((function(){if(window.LSCO&&window.LSCO.dtos&&window.LSCO.dtos.globalData&&window.LSCO.dtos.globalData.customer){var t=window.LSCO.dtos.globalData.customer;Object(C["i"])(e.uid,t.auth_status,t.levi_id,t.city,t.state,t.adobe_id)}}),1e3),e.sendSuccessAnalytics(),e.type===y["a"].POST_SUBSCRIPTION&&e.isLevis247Enabled&&e.$store.dispatch("registerUser/setEmailOptIn"),e.$emit("loginSuccess",n,o);else if(i===g["Y"].INVALID_CREDENTIALS)if(e.isLevis247Enabled)e.loginETOUser();else{var r=e.serverErrMsgMapper(i),a=r.emailLogin;e.serverErrors=a,e.focusOnEmailFieldIfExists()}else i===g["Y"].ACCOUNT_LOCKED?(e.componentErrorMsgHtml=e.$t("i18n.AccountLockedError"),e.focusOnEmailFieldIfExists(),s()):e.componentErrorMsgHtml=e.$t("i18n.technicalDifficultiesTryAgain")})).catch((function(t){throw e.submitting=!1,e.focusOnEmailFieldIfExists(),new Error(t)})))})),this.type===this.$_types.CHECKOUT_GATE&&Object(E["L"])("login")},loginETOUser:function(){var t=this;return w(r.a.mark((function e(){var s,i,n,o,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("login/loginETOUser",t.credentials);case 2:if(s=e.sent,!s.CrmId){e.next=11;break}return i={login:t.credentials.username,password:t.credentials.password},e.next=7,t.$store.dispatch("registerUser/registerUser",{tempUser:i});case 7:n=e.sent,n.emailAlreadyExists&&t.$emit("existingUserFound",t.email,!0),e.next=14;break;case 11:o=t.serverErrMsgMapper(g["Y"].INVALID_CREDENTIALS),a=o.emailLogin,t.serverErrors=a,t.focusOnEmailFieldIfExists();case 14:case"end":return e.stop()}}),e)})))()},onLinkClick:function(){this.inCheckoutPage?this.$emit("returnToBag"):this.$emit("registerUser"),(this.type===this.$_types.CHECKOUT_GATE||this.inCheckoutPage)&&Object(E["L"])(this.linkText)},onResetPasswordClick:function(){this.$emit("resetPassword",this.email)},checkoutAsGuest:function(){this.$emit("guestCheckout"),this.sendGuestAnalytics()},sendGuestAnalytics:function(){Object(E["L"])("Guest"),Object(E["N"])(this.analyticsParamsForCheckout)},sendSuccessAnalytics:function(){Object(C["d"])(),this.inCheckoutExperience&&Object(E["N"])(this.analyticsParamsForCheckout)},sendViewAnalytics:function(){Object(C["e"])(),this.inCheckoutExperience&&Object(E["O"])(this.analyticsParamsForCheckout)}}},_=L,x=(s("9e1d"),s("2877")),$=Object(x["a"])(_,i,n,!1,null,"7e1eb88e",null);e["a"]=$.exports},"9e1d":function(t,e,s){"use strict";s("d543")},d543:function(t,e,s){}}]);