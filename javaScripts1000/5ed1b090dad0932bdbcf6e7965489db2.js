"use strict";window.freedom.nsValidate=function(r){var u={error:"error",errorMessage:"error-message",show:"show",ok:"ok",tooltip:"tooltip",wrapper:"tooltip-item"},e=!1,o=!1,a={},n=[],v=document.createElement("span");function f(e,r){if(!(e&&0<e.length)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e&&e[r]?e[r]:e;for(var t=0,a=e.length;t<a;t++)if(e[t].checked)return e[t][r]}function d(e){freedom&&window.freedom.i18n&&window.freedom.i18n.messages?e(window.freedom.i18n.messages):r.warn("Freedom i18n validation messages not loaded")}function i(e){var r,t=Object.prototype.hasOwnProperty;for(r in a)t.call(a,r)&&e.setMessage(r,a[r])}function l(t){e?n.push(t):(e=!0,d(function(e){if(o=!0,a=e,window.freedom.i18n.messages||(window.freedom.i18n.messages=e),t&&i(t),0<n.length)for(var r=n.length;r--;)i(n[r])}))}function t(e,r,t){var a=new FormValidator(e,r,t);return o||l(a),i(a),a}function s(e,r){var t=null,a=[];if(0<e.length)for(var o=0,n=e.length;o<n;o++){var d=e[o].element,i=d.dataset&&d.dataset.name?d.dataset.name:d.getAttribute("data-name"),l=d.dataset&&d.dataset.errorwrapper?d.dataset.errorwrapper:d.getAttribute("data-errorwrapper");d.classList.add(u.error),l&&(t=document.getElementById(l)),i&&e[o].message&&a.push(e[o].message.replace(e[o].name,i))}return r&&"function"==typeof r&&r(t,a),!1}function c(e){if(e)for(var r=e.elements,t=0,a=r.length;t<a;t++)"INPUT"===r[t].nodeName.toUpperCase()&&r[t].classList.remove(u.error);return!1}function m(e,r,t,a){for(var o="",n=window.freedom.isIe8&&a&&a.innerText?a.innerText:"",d=0,i=r.length;d<i;d++)o+='<div class="'+t+'">'+r[d]+"</div>";return e&&(e.innerHTML=o,a&&(window.freedom.isIe8&&a&&(a.innerText=n),e.appendChild(a)),e.classList.add(u.show)),!1}function p(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function w(e){e&&e.parentNode&&(p(e.parentNode.querySelector("."+u.errorMessage)),window.freedom.removeClass(e.parentNode,u.error))}function g(e){if(e){for(var r=e.querySelectorAll("."+u.errorMessage),t=r.length;t--;)p(r[t]);for(var a=e.querySelectorAll("."+u.error),o=a.length;o--;)window.freedom.removeClass(a[o],u.error)}}function h(e,r){if(g(e),0<r.length)for(var t=r.length,a={};t--;){var o=r[t],n=o.element&&0<o.element.length?o.element[0]:o.element,d="OPTION"===n.nodeName.toUpperCase(),i=n.parentNode,l=n.closest(".tooltip-item"),s=o.message?o.message:"",c=v.cloneNode(!0),m=d?i:n,f=m&&m.title?m.title:o.display,p=m?m.getAttribute("data-group"):null;c.innerHTML=s.replace(o.name,f),i&&i.disabled||n&&n.disabled?(window.freedom.removeClass(l,u.error),n.nextSibling&&0===n.nextSibling.className.indexOf("error-message")&&n.nextSibling.remove()):l&&!a[p]&&(p&&(a[p]=!0),l.appendChild(c),window.freedom.addClass(l,u.error))}return!1}function y(e,r){var t=e.form;e.errors=e.errors.filter(function(e){return e.name!==r.name}),!r.validator||r.validator.disabled||r.validator.readOnly||("radio"===r.type?r.validator.value=t[r.name]&&""!==t[r.name].value?t[r.name].value:void 0:r.validator.value=r.value,"radio"!==r.type&&"checkbox"!==r.type||(r.validator.checked=f(t[r.name],"checked")),r.validator.depends&&"function"==typeof r.validator.depends?r.validator.depends.call(e,r)&&e.validateField(r.validator):r.validator.depends&&"string"==typeof r.validator.depends&&e.conditionals[r.validator.depends]&&!e.conditionals[r.validator.depends].call(e,r.validator)||e.validateField(r.validator),h(t,e.errors))}function b(t){function e(e){y(t,e.target)}function r(e){var r='[name="'+e.target.attributes.name.value+'"]:checked';document.querySelector(r)&&y(t,e.target)}function a(e){y(t,e.target)}var o,n=t.form,d=Object.prototype.hasOwnProperty;for(o in t.fields)if(d.call(t.fields,o)){var i=t.fields[o],l=n[o];if(i.id=l?f(l,"id"):null,i.element=l,i.type=l&&0<l.length?l[0].type:l&&l.type||null,i.value=f(l,"value"),i.checked=f(l,"checked"),!l||"select-one"!==l.type&&"select-multiple"!==l.type||(i.type=l.type),!l||l.length&&"select-one"!==l.type&&"select-multiple"!==l.type){if(l){var s=l.length;if(0<s)for(;s--;)l[s].validator=i}}else l.validator=i;if(l)if(l.length&&l.item&&"radio"===l.item(0).type)for(var c=0;c<l.length;c++){var m=l.item(c);window.freedom.addEvent("blur",m,r),window.freedom.addEvent("click",m,r)}else"checkbox"===l.type?window.freedom.addEvent("change",l,a):(window.freedom.addEvent("blur",l,e),window.freedom.addEvent("change",l,e))}}window.freedom.nsPubSub.sub("FormValidator.loaded",function(){FormValidator.prototype.validateField=function(e){this._validateField(e)},l(),window.freedom.addClass(v,u.errorMessage),window.freedom.addClass(v,u.tooltip),window.freedom.nsPubSub.pub("formValidationCore.loaded",{classList:u,validate:t,processElementsErrors:s,clearErrors:c,showMessages:m,getMessages:d,removeLabelError:p,showErrors:h,validateFieldsOnBlock:y,validateFieldsOnBlur:b,cleanField:w,clean:g})})}(console);