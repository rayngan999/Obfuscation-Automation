!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://cdn1.affirm.com/products/affirmjs/master/dist/",n(n.s=76)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),o=a(n(1)),i=a(n(49));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l={buildParams:function(e,t,n){Array.isArray(t)?t.forEach(function(t,r){e.match(/\[]$/)?n(e,t):l.buildParams("".concat(e,"[").concat("object"===c(t)?r:"","]"),t,n)}):l.isObject(t)?Object.keys(t).forEach(function(r){l.buildParams("".concat(e,"[").concat(r,"]"),t[r],n)}):null!==t&&n(e,t)},delay:function(e,t){return setTimeout(e,t)},extend:function(e,t){return l.isObject(t)?(Object.keys(t).forEach(function(n){var r=t[n];Object.prototype.hasOwnProperty.call(t,n)&&(!r||"object"!==c(r)||Array.isArray(r)||l.isElement(r)?e[n]=r:"object"===c(e[n])?e[n]=l.extend(e[n],l.extend({},r)):e[n]=l.extend({},r))}),e):e},formattedUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(e.split("#"),2),r=n[0],o=n[1],i=r.match(/\?/)?"&":"?",a=r;return a="".concat(a).concat(i).concat(l.param(t)),o&&(a+="#".concat("".concat(o))),a},getApiUrl:function(e){return l.getResourceUrl(r.default.api_url,e)},getDomain:function(e){try{var t=document.createElement("a");t.href=encodeURI(e);var n=""!==t.port?":".concat(t.port):"";return"".concat(t.protocol,"//").concat(t.hostname).concat(n,"/")}catch(t){return e}},getElementById:function(e){var t=e;return"string"==typeof t&&(t=document.getElementById(t.replace(/^#/,""))),t},getResourceUrl:function(e,t){var n="",r=e&&e.length&&"/"!==e[e.length-1],o=t&&t.length&&"/"!==t[0];return r&&o&&(n="/"),"".concat(e).concat(n).concat(t)},getFrontendUrl:function(e){return l.getResourceUrl(r.default.frontend_url,e)},getUserAgent:function(){return navigator.userAgent},getNavigatorVendor:function(){return navigator.vendor},getUserTimeZone:function(){return Intl&&"function"==typeof Intl.DateTimeFormat&&"function"==typeof Intl.DateTimeFormat().resolvedOptions&&Intl.DateTimeFormat().resolvedOptions().timeZone||null},getWebhookSessionId:function(){return window._affirm_config?window._affirm_config.session_id:null},isAffirmWebView:function(){var e=l.getUserAgent(),t=!!e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari).*(Affirm-iOS).*/i),n=!!e.match(/(Android).*AppleWebKit.*(Affirm-Android).*/i);return t||n},isElement:function(e){try{return e instanceof HTMLElement}catch(e){}try{return"object"===c(e)&&1===e.nodeType&&"object"===c(e.style)&&"object"===c(e.ownerDocument)}catch(e){}return!1},isIe:function(){return l.getUserAgent().match(/MSIE/i)||l.getUserAgent().match(/Trident.*rv:11\./)},isMobile:function(){return l.getUserAgent().match(/Android/i)||l.getUserAgent().match(/iPad/i)||l.getUserAgent().match(/iPod/i)||l.getUserAgent().match(/webOS/i)||l.getUserAgent().match(/iPhone/i)||l.getUserAgent().match(/BlackBerry/i)},isSafariDesktop:function(){var e=l.getUserAgent(),t=l.getNavigatorVendor();return/Safari/i.test(e)&&/Apple Computer/.test(t)&&!/Mobi|Android/i.test(e)},isObject:function(e){return e&&"object"===c(e)},isTouch:function(){return l.getUserAgent().match(/Android/i)||l.getUserAgent().match(/iPad/i)||l.getUserAgent().match(/iPod/i)||l.getUserAgent().match(/iPhone/i)},isIosWebView:function(){return!!l.getUserAgent().match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)},logEvent:function(e,t){o.default.trackPageView(e,!0,t)},param:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=function(e,t){var r=t;"function"==typeof t?r=t():null!==t&&void 0!==t||(r=""),n[n.length]="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r))};return Array.isArray(e)?e.forEach(function(e,t){l.buildParams(t,e,r)}):l.isObject(e)&&Object.keys(e).forEach(function(t){l.buildParams(t,e[t],r)}),n=n.join("&"),t&&(n=n.replace(/%20/g,"+")),n},postToUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r=document.createElement("form");l.setElementAttrs(r,{"accept-charset":"utf-8",action:e,method:n}),l.isObject(t)&&Object.keys(t).forEach(function(e){var n=t[e];Object.prototype.hasOwnProperty.call(t,e)&&("string"==typeof n&&(n=[n]),n.forEach(function(t){var n=document.createElement("input");l.setElementAttrs(n,{name:e,type:"hidden",value:t}),r.appendChild(n)}))}),document.body.appendChild(r),o.default.trackActionLog("AFJS_form_sent",{checkoutToken:t.checkout_token,path:e,method:n}),r.submit()},preconnectTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];["preconnect","dns-prefetch"].forEach(function(n){var r=document.createElement("link");r.rel=n,r.href=e,t&&(r.crossOrigin=""),document.head.appendChild(r)})},queryObj:function(e){var t={};return(e?l.queryString(e):window.location.search).slice(1).split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]||""}}),t},queryString:function(e){var t=e.indexOf("?");return t>-1?e.substring(t):""},setElementAttrs:function(e,t){l.isObject(t)&&Object.keys(t).forEach(function(n){var r=t[n];try{e.setAttribute(n,r)}catch(t){e[n]=r}})},setElementStyle:function(e,t){l.isObject(t)&&Object.keys(t).forEach(function(n){e.style[n]=t[n]})},setUrl:function(e){document.location.assign&&document.location.assign(e),document.location.href=e},sniffer:{failed:[],promises:{},register:function(e,t){if(t.async){var n=t.test();return l.sniffer.promises[e]=n,void n.then(function(n){l.sniffer[e]=n,n||l.sniffer.failed.push(t.message)})}try{l.sniffer[e]=t.test()}catch(t){l.sniffer[e]=!1}l.sniffer[e]||l.sniffer.failed.push(t.message)}},swapStyle:function(e,t,n){if(e.style[t]){var r=e.style[n];e.style[n]=e.style[t],e.style[t]=r}if(e.style[n]){var o=e.style[t];e.style[t]=e.style[n],e.style[n]=o}},throwErrIfNotObject:function(e){if(!e||e.constructor!==Object)throw new Error("Provided argument is not an object")}},f={cookies:{message:"Cookies Disabled",test:i.default.cookies},cors:{message:"Cross Origin Resource Sharing not available",test:i.default.cors},JSON:{message:"JSON not available",test:i.default.json},localstorage:{message:"localStorage Disabled",test:i.default.localStorage},thirdPartyCookies:{async:!0,message:"Third Party Cookies not available",test:function(){return i.default.thirdPartyCookies(l.getFrontendUrl("api/v2/".concat(r.default.resource_urls.third_party_cookie_check)))}}};Object.keys(f).forEach(function(e){l.sniffer.register(e,f[e])}),l.get_domain=l.getDomain;var d=l;t.default=d},function(e,t,n){"use strict";n.r(t),n.d(t,"ANALYTICS_STORAGE_COLLECTORS",function(){return _}),n.d(t,"USER_ACTIONS",function(){return w}),n.d(t,"flushEventQueue",function(){return j}),n.d(t,"trackEvent",function(){return N}),n.d(t,"trackCustomEvent",function(){return L}),n.d(t,"trackDebugEvent",function(){return F}),n.d(t,"trackOnExit",function(){return U}),n.d(t,"trackPageView",function(){return B}),n.d(t,"trackImpression",function(){return H}),n.d(t,"trackActionLog",function(){return W}),n.d(t,"trackAPI",function(){return V}),n.d(t,"trackBrowserNotSupportedImpression",function(){return q}),n.d(t,"trackLongTasksEntries",function(){return K}),n.d(t,"trackResourceTiming",function(){return J}),n.d(t,"trackApplicationResponseTime",function(){return z}),n.d(t,"trackUserInteraction",function(){return X}),n.d(t,"trackFirstInputDelay",function(){return Z}),n.d(t,"trackTimeToInteractive",function(){return $}),n.d(t,"trackAppAbandonment",function(){return ee}),n.d(t,"tag",function(){return te}),n.d(t,"untag",function(){return ne}),n.d(t,"clearTags",function(){return re}),n.d(t,"init",function(){return ie});var r=n(2),o=n(72),i=n.n(o),a=n(42),s=n.n(a),u=n(73),c=n(40),l=n.n(c),f=n(24),d=n.n(f),p=n(74),h=n(25),m=n(26),g=n(75),y=n.n(g);n(117);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A="last_session_id",b=window.Rollbar||window.affirm&&window.affirm.Rollbar,_={DEFAULT:"/collect",CHRONO:"/api/chrono/v1/collect2"},w={CLICK:"Click",DISMISS:"Dismiss",HOVER:"Hover",SWIPE_LEFT:"Swipe Left",SWIPE_RIGHT:"Swipe Right",TAP:"Tap"},E={},k="",O="",S=!1,P=null,I=[],T=null,M=1;function C(e,t,n){void 0===n&&(n={});window.fetch(e,v({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},n)).catch(function(t){!Object(h.a)(t)&&Math.random()<.01&&b&&b.warn("Network error fetching "+e,t,{version:"v2"})})}function R(e,t){if(void 0===e&&(e={}),void 0===t&&(t=!1),k){var n="https://"+k+_.DEFAULT,r=""+O+_.CHRONO,o=t?_.CHRONO:_.DEFAULT,i="localhost"===k?o:t?r:n;if(t)C(i,e);else if(navigator&&"function"==typeof navigator.sendBeacon)navigator.sendBeacon(i,JSON.stringify(e))||Math.random()<.01&&b&&b.warn("Error queueing beacon to "+i,void 0,{version:"v2"});else C(i,e,{credentials:"include"})}else if(window.console&&"function"==typeof console.log){var a=t?"Tracking event with Chrono: "+e[0].eventType:"Tracking event: "+e.eventType;console.log(a,e)}}function x(){var e,t,n=(e=window.location.href,(t=document.createElement("a")).href=e,t);return{hash:n.hash,hostname:n.hostname,pathname:n.pathname,queryParams:n.search}}function j(){for(;0!==I.length;){var e=I.pop(),t=e.payloadData,n=e.useChrono;Object.assign(t,E),R(t,n)}}function D(e,t,n){void 0===n&&(n=!0);var r={hr:window.location.href,ts:Date.now(),ms:window.performance?window.performance.now():null,is_load_finished:null!=P},o={};Object.assign(o,E),Object.assign(o,{eventType:e}),Object.assign(o,r),Object.assign(o,t),"user-interaction"===e?T=o:T&&"page-view"===e&&(o.screen_transition={latency:o.ms-T.ms,start_page_key:T.pageKey,start_user_action:T.user_action,start_element_name:T.element_name},T=null);var i=s()(o),a=i;return n&&(a=d()(i)),a}function N(e,t,n,r,o){if(void 0===t&&(t={}),void 0===n&&(n=1),void 0===r&&(r=!0),void 0===o&&(o=!1),!(Math.random()>n)){var i=D(e,t,r);if(window.Rollbar&&"function"==typeof window.Rollbar.captureEvent&&"resource-timing"!==e){var a={eventType:e,action_name:t.action_name,url:t.url,response_status:t.response_status,pageKey:t.pageKey,user_action:t.user_action,element_name:t.element_name,referrer:t.referrer,load_type:t.load_type};i&&(a.screen_transition=i.screen_transition),window.Rollbar.captureEvent(a,"info")}var s=o?function(e,t){return[v({},e,{eventType:t,merchantPublicApiKey:E.public_api_key})]}(t,e):i;S?(R(s,o),j()):I.push({payloadData:s,useChrono:o})}}function L(e,t){void 0===t&&(t={}),ae.trackEvent("custom-event",v({customEventName:e},t))}function F(e,t){void 0===t&&(t={}),ae.trackEvent("debug-event",v({debugEventName:e},t))}function U(e,t){void 0===e&&(e={}),void 0===t&&(t="resource-timing"),R(D(t,{entry:e&&e.entry?e.entry:{entryType:"exit_page"}}))}function B(e,t,n){void 0===t&&(t=!0),void 0===n&&(n={});var r=v({},n,{load_type:t?"full":"dynamic",referrer:document.referrer});e&&Object.assign(r,{pageKey:e}),te({path:x()}),N("page-view",r)}function H(e,t){void 0===t&&(t={}),ae.trackEvent("impression",v({},t,{element_name:e}))}function W(e,t){N("action-log",{action_name:e,action_data:t})}function V(e,t,n,r){var o;void 0===r&&(r={}),o="string"!=typeof n?JSON.stringify(n):n;var i=t<=299?M:1;N("api",v({},r,{url:e,response_status:t||"unknown",response_message:o}),i)}function q(e,t){N("Browser does not support PerformanceEntry type "+e,{errorMessage:t?t.message:""})}function G(e){e.forEach(function(e){var t=e.toJSON();t.entryName=t.name,delete t.name,N("resource-timing",{entry:t})})}function Q(e,t){void 0===t&&(t={});var n=Object.assign({},e);n.entryName=n.name,delete n.name;var r=Object.assign({},n,t);if(!!r.responseStart){var o=r.redirectEnd-r.redirectStart,i=0!==o,a=r.domainLookupStart-r.fetchStart==0,s=r.domainLookupEnd-r.domainLookupStart,u=0===s,c=r.connectEnd-r.connectStart,l=0===c;Object.assign(r,{isBrowserCached:a,isDNSCached:u,isPersistentConnection:l,isRedirected:i,resourceConnectionTime:c,resourceContentDownloadTime:r.responseEnd-r.responseStart,resourceDNSLookupTime:s,resourceRedirectTime:o,resourceTTFB:r.responseStart-r.startTime,resourceTTLB:r.responseEnd-r.startTime})}return r}function Y(e,t){e.reduce(function(e,n){if("function"!=typeof n.toJSON)return e;var r=_.DEFAULT,o=n.toJSON(),i="localhost"===k?r:"https://"+k+r;if(-1!==o.name.indexOf(i))return e;if(t&&t.length&&!t.find(function(e){return o.name.indexOf(e)>-1}))return e;return e.push(Q(o)),e},[]).forEach(function(e){ae.trackEvent("resource-timing",{entry:e})})}function K(e){e.forEach(function(e){var t=e.toJSON();if(t&&t.attribution){var n=Q(t);delete n.attribution,t.attribution.forEach(function(e){var t=e;t.attributionName=t.name,delete t.name,ae.trackEvent("resource-timing",{entry:n,attribution:t})})}else{q("longtask",{message:"TaskAttributionTiming not present in the entry"})}})}function J(){}function z(e){N("resource-timing",{applicationResponseData:e})}function X(e,t,n){void 0===n&&(n={}),Object.keys(w).some(function(e){return w[e]===t})&&ae.trackEvent("user-interaction",v({},n,{element_name:e,user_action:t}))}function Z(){try{perfMetrics.onFirstInputDelay(function(e){ae.trackEvent("resource-timing",{entry:{entryType:"first-input-delay",duration:e}})})}catch(e){q("first-input-delay",e)}return r.default.deviceId}function $(){return window.performance&&window.PerformanceLongTaskTiming?(window.__tti={entries:[]},window.__tti.entries=window.__tti.entries.concat(window.performance.getEntriesByType("longtask")),y.a.getFirstConsistentlyInteractive().then(function(e){ae.trackEvent("resource-timing",{entry:{entryType:"time-to-interactive",duration:e}})})):r.default.deviceId}function ee(){document.addEventListener("visibilitychange",function e(){document.removeEventListener("visibilitychange",e),ae.trackOnExit({entry:{entryType:"app-abandonment",startTime:window.performance?window.performance.now():null}},"page-view")})}function te(e){return void 0===e&&(e={}),Object.assign(E,d()(s()(e))),this}function ne(e){return(Array.isArray(e)?e:[e]).forEach(function(e){return delete E[e]}),this}function re(){return E={},this}function oe(e){var t,n,o=r.default.localDeviceId,a=m.a.read(A),s=((t={})[r.default.COOKIE_KEY]=o,t);return a&&(s[A]=a),te(s),S=!0,e.firePageView&&(n=function(){N("page-load",{performance:i()(),load_type:"full",is_performance_observed:"PerformanceObserver"in window})},Object(p.loadEventListener)(function(){return setTimeout(n,0)}),B()),e.fireAppAbandonment&&ee(),j(),r.default.deviceId}function ie(e,t,n,o,i,a,s,c,f,d,p,h,m,g){void 0===i&&(i={}),void 0===a&&(a=!0),void 0===s&&(s=1),void 0===c&&(c=[]),void 0===f&&(f=!0),void 0===d&&(d=!0),void 0===p&&(p=1),void 0===h&&(h=!0),void 0===m&&(m=p),void 0===g&&(g=""),M=m;var y=navigator.userAgent,A=l()(y),b=Object(u.parseUserAgentIntoDeviceType)(y),_=navigator.connection?navigator.connection.effectiveType:"";k=o,O=g;var w={firePageView:a,fireAppAbandonment:h,defaultObserverSampleRate:s};return te({client:{appName:e,appVersion:t,browser:A,deviceType:b,connectionType:_},path:x()}),te(i),te({pageKey:window.location.href}),r.default.initialize({apiUrl:n}).then(function(){return oe(w)}).then(function(){return function(e,t){if(Math.random()>t)return r.default.deviceId;try{window.performance&&window.performance.getEntriesByType&&Y(window.performance.getEntriesByType("resource"),e),new PerformanceObserver(function(t){Y(t.getEntries(),e)}).observe({entryTypes:["resource"]})}catch(e){q("resource",e)}return r.default.deviceId}(c,p)}).then(function(){Math.random()>s||function(){if(window.performance&&window.performance.getEntriesByType&&(G(window.performance.getEntriesByType("paint")),window.PerformanceObserver)){var e=new PerformanceObserver(function(t){G(t.getEntries()),e.disconnect()});try{e.observe({entryTypes:["paint"]})}catch(e){q("paint",e)}}return r.default.deviceId}().then(function(){return function(){if(window.performance&&window.performance.getEntriesByType&&(K(window.performance.getEntriesByType("longtask")),window.PerformanceObserver)){var e=new PerformanceObserver(function(e){K(e.getEntries())});try{e.observe({entryTypes:["longtask"]})}catch(e){q("longtask",e)}}return r.default.deviceId}()}).then(function(){return function(){var e="largest-contentful-paint";try{new PerformanceObserver(function(e){var t=e.getEntries(),n=t[t.length-1];P={startTime:n.renderTime||n.loadTime,size:n.size,url:n.url,element:{text:n.element&&n.element.innerText,pageUrl:n.element&&n.element.baseURI}}}).observe({type:e,buffered:!0}),document.addEventListener("visibilitychange",function(){P&&"hidden"===document.visibilityState&&ae.trackOnExit({entry:v({entryType:"largest-contentful-paint"},P)})})}catch(t){q(e,t)}return r.default.deviceId}()}).then(function(){return d&&$()}).then(function(){return f&&Z()})}),this}var ae={clearTags:re,init:ie,tag:te,untag:ne,trackEvent:N,trackBrowserNotSupportedImpression:q,trackCustomEvent:L,trackDebugEvent:F,trackOnExit:U,trackActionLog:W,trackApplicationResponseTime:z,trackImpression:H,trackUserInteraction:X,trackResourceTiming:J,trackResourceTimingEntries:Y,trackLongTasksEntries:K,trackTimeToInteractive:$,trackFirstInputDelay:Z,trackAppAbandonment:ee,trackAPI:V,trackPageView:B,postTrackingEvent:R,USER_ACTIONS:w};t.default=ae},function(e,t,n){"use strict";function r(e){var t=e.match(/Chrom[^ \/]+\/(\d+)[\.\d]/);return t&&parseInt(t[1],10)}function o(e){var t=e.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return t&&parseInt(t[1],10)}function i(e){var t=e.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//);return{major:t&&parseInt(t[1],10),minor:t&&parseInt(t[2],10)}}function a(e){return Boolean(e.match(/Chrom(e|ium)/))}n.r(t),n.d(t,"default",function(){return b});var s={chromeMajorVersion:r,iosMajorVersion:o,macosxVersion:i,isChromeMajorVersion:function(e,t){return r(e)===t},isChromiumBased:a,isIosMajorVersion:function(e,t){return o(e)===t},isMacEmbeddedBrowser:function(e){return Boolean(e.match(/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\)+ AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/))},isMacosxVersion:function(e,t,n){void 0===n&&(n=null);var r=i(e),o=r.major,a=r.minor;return n?o===t&&a===n:o===t},isSafariBased:function(e){return!a(e)&&Boolean(e.match(/Version\/.* Safari\//))}},u={};function c(){var e=navigator.userAgent;return!(!s.isIosMajorVersion(e,12)&&!s.isMacosxVersion(e,10,14)||!s.isSafariBased(e)&&!s.isMacEmbeddedBrowser(e))||!!(s.isChromiumBased(e)&&s.chromeMajorVersion(e)<67)}function l(e){window.Rollbar&&"function"==typeof window.Rollbar.warning&&window.Rollbar.warning(e)}function f(e,t,n,r,o){try{var i;if(n){var a=new Date(Date.now());a.setTime(a.getTime()+24*n*60*60*1e3),i=a.toUTCString()}else i="";u.buildCookie(e,t,r||"",i,o)}catch(e){l(e)}}function d(e){try{var t=window.location.hostname.split(".");t.slice(0,-1).forEach(function(n,r){var o=t.slice(r).join(".");u.buildCookie(e,"",o,"Thu, 01 Jan 1970 00:00:01 GMT")})}catch(e){l(e)}}function p(e){try{for(var t=document.cookie.split(";"),n=0;n<t.length;n+=1){var r=t[n],o=new RegExp("s*"+e+"=(.*)").exec(r);if(o&&o.length>1)return o[1]}}catch(e){l(e)}return null}u.buildCookie=function(e,t,n,r,o){void 0===o&&(o="Lax");var i=r?"; expires="+r:"",a=n?"; domain="+n:"",s="https:"===location.protocol&&"None"===o?"; Secure":"",u=e+"="+t+i+a+"; path=/";c()?document.cookie=u:document.cookie=u+"; SameSite="+o+s},u.create=f,u.enabled=function(){try{u.buildCookie("cookietest","1","","","None");var e=-1!==document.cookie.indexOf("cookietest=");return u.buildCookie("cookietest","1","","Thu, 01 Jan 1970 00:00:01 GMT","None"),e}catch(e){return l(e),!1}},u.erase=d,u.read=p,u.upsert=function(e,t,n,r,o){try{p(e)&&d(e),f(e,t,n,r,o)}catch(e){l(e)}},u.isSameSiteNoneIncompatible=c;var h=u;var m={getParamValue:function(e){var t=window.location.search.substring(1);if(""===t)return null;t=t.split("&");for(var n=0;n<t.length;n+=1){var r=t[n].split("=");if(r[0]===e){if(void 0===r[1])break;return decodeURIComponent(r[1])}}return null}};function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y,v,A,b=function(){var e,t,n;function r(e){if(void 0===e&&(e={}),r.instance)return r.instance;window.affirm=window.affirm||{},window.affirm.deviceId=window.affirm.deviceId||{},this.config=e,this.config.apiUrl||(this.config.apiUrl=r.API_URL),"/"!==this.config.apiUrl.slice(-1)&&(this.config.apiUrl=this.config.apiUrl+"/")}return r.initialize=function(e){return r.instance?r.deviceId:(r.instance=new r(e),r.deviceId.then(function(e){return e&&(r.deviceId=e),e}))},r.reset=function(){r.instance=null,window.affirm&&window.affirm.deviceId&&delete window.affirm.deviceId},e=r,n=[{key:"API_URL",get:function(){return"/api/v2/"}},{key:"COOKIE_EXPIRATION",get:function(){return 1825}},{key:"COOKIE_KEY",get:function(){return"tracker_device"}},{key:"DEVICE_ID_URL",get:function(){return"session/touch_track"}},{key:"SEARCH_PARAM",get:function(){return"device_id"}},{key:"deviceId",get:function(){return new Promise(function(e){var t=r.localDeviceId;return e(t||r.deviceIdFromApi)})},set:function(e){h.upsert(r.COOKIE_KEY,e,r.COOKIE_EXPIRATION),window.affirm&&window.affirm.deviceId&&(window.affirm.deviceId.value=e)}},{key:"deviceIdFromApi",get:function(){if(window.affirm.deviceId.promise)return window.affirm.deviceId.promise;var e=r.instance.config.apiUrl+r.DEVICE_ID_URL,t=window.fetch(e,{credentials:"include",method:"GET"}).then(function(e){return e.json()}).then(function(e){return e.id}).catch(function(){return null}).finally(function(){return delete window.affirm.deviceId.promise});return window.affirm.deviceId.promise=t,t}},{key:"deviceIdFromCookies",get:function(){return h.read(r.COOKIE_KEY)}},{key:"deviceIdFromSearchParam",get:function(){return m.getParamValue(r.SEARCH_PARAM)}},{key:"localDeviceId",get:function(){return window.affirm.deviceId.value||r.deviceIdFromSearchParam||r.deviceIdFromCookies}}],(t=null)&&g(e.prototype,t),n&&g(e,n),r}();A=null,(v="instance")in(y=b)?Object.defineProperty(y,v,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[v]=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(112)),o=n(14),i=s(n(5)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u,c,l=i.default.getPublicApiKey();u=r.default.tracking_blacklist,c=l,(0,o.indexOf)(u,c)>-1||(a.default.init("affirm-js-v2","10.92.4",r.default.api_url,r.default.tracking_endpoint,{},!1,0,[r.default.api_url,r.default.base_cdn_url,r.default.frontend_url,r.default.minified_url],!1,!1,.01,!1,1,r.default.frontend_url),l||a.default.trackEvent("Merchant API Key Not Set",{},.01));var f=r.default;t.default=f},function(e,t,n){var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o=60103,i={use_static:!1};function a(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function s(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}function u(e,t){s(e,t,function(){throw new y("The "+t+" method cannot be invoked on an Immutable data structure.")})}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(i.use_static=Boolean(t.use_static));var c="__immutable_invariants_hold";function l(e){return"object"!=typeof e||null===e||Boolean(Object.getOwnPropertyDescriptor(e,c))}function f(e,t){return e===t||e!=e&&t!=t}function d(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var p=["setPrototypeOf"],h=p.concat(["push","pop","sort","splice","shift","unshift","reverse"]),m=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),g=p.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function y(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function v(e,t){for(var n in s(e,c,!0),t)t.hasOwnProperty(n)&&u(e,t[n]);return Object.freeze(e),e}function A(e,t){var n=e[t];s(e,t,function(){return Q(n.apply(e,arguments))})}function b(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=Q.merge(this[e],t,{deep:!0,mode:"replace"})),f(this[e],t)))return this;var o=P.call(this);return o[e]=Q(t),E(o)}y.prototype=new Error,y.prototype.constructor=Error;var _=Q([]);function w(e,t,n){var r=e[0];if(1===e.length)return b.call(this,r,t,n);var o,i=e.slice(1),a=this[r];if("object"==typeof a&&null!==a)o=Q.setIn(a,i,t);else{var s=i[0];o=""!==s&&isFinite(s)?w.call(_,i,t):L.call(N,i,t)}if(r in this&&a===o)return this;var u=P.call(this);return u[r]=o,E(u)}function E(e){for(var t in m)m.hasOwnProperty(t)&&A(e,m[t]);i.use_static||(s(e,"flatMap",O),s(e,"asObject",I),s(e,"asMutable",P),s(e,"set",b),s(e,"setIn",w),s(e,"update",U),s(e,"updateIn",H),s(e,"getIn",W));for(var n=0,r=e.length;n<r;n++)e[n]=Q(e[n]);return v(e,h)}function k(){return new Date(this.getTime())}function O(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return E(n)}function S(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach(function(e,t,n){"number"==typeof e&&(n[t]=e.toString())}),e=function(e,n){return-1!==t.indexOf(n)}}var n=a(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return G(n)}function P(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(T(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function I(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this),i=o[0],a=o[1];n[i]=a}return G(n)}function T(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,c)||e instanceof Date?e:Q.asMutable(e,{deep:!0})}function M(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function C(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),i=t&&t.deep,s=t&&t.mode||"merge",u=t&&t.merger;function c(e,r,o){var s,c=Q(r[o]),l=u&&u(e[o],c,t),p=e[o];void 0===n&&void 0===l&&e.hasOwnProperty(o)&&f(c,p)||f(p,s=void 0!==l?l:i&&d(p)&&d(c)?Q.merge(p,c,t):c)&&e.hasOwnProperty(o)||(void 0===n&&(n=M(e,a(e))),n[o]=s)}if(o)for(var l=0,p=e.length;l<p;l++){var h=e[l];for(r in h)h.hasOwnProperty(r)&&c(void 0!==n?n:this,h,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&c(this,e,r);"replace"===s&&function(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=M(e,a(e))),delete n[r])}(this,e)}return void 0===n?this:G(n)}function R(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return Q.merge(this,e,{deep:n,mode:"replace"})}var x,j,D,N=Q({});function L(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return F.call(this,r,t,n);var o,i=e.slice(1),s=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?Q.setIn(s,i,t):L.call(N,i,t),this.hasOwnProperty(r)&&s===o)return this;var u=M(this,a(this));return u[r]=o,G(u)}function F(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&d(t)&&d(this[e])&&(t=Q.merge(this[e],t,{deep:!0,mode:"replace"})),f(this[e],t)))return this;var o=M(this,a(this));return o[e]=Q(t),G(o)}function U(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return Q.set(this,e,t.apply(r,[r].concat(n)))}function B(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function H(e,t){var n=Array.prototype.slice.call(arguments,2),r=B(this,e);return Q.setIn(this,e,t.apply(r,[r].concat(n)))}function W(e,t){var n=B(this,e);return void 0===n?t:n}function V(e){var t,n=a(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=T(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function q(){return{}}function G(e){return i.use_static||(s(e,"merge",C),s(e,"replace",R),s(e,"without",S),s(e,"asMutable",V),s(e,"set",F),s(e,"setIn",L),s(e,"update",U),s(e,"updateIn",H),s(e,"getIn",W)),v(e,p)}function Q(e,t,n){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(e.$$typeof===o||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(Q);if(Array.isArray(e))return E(e.slice());if(e instanceof Date)return a=new Date(e.getTime()),i.use_static||s(a,"asMutable",k),v(a,g);var a,u=t&&t.prototype,c=(u&&u!==Object.prototype?function(){return Object.create(u)}:q)();if(null==n&&(n=64),n<=0)throw new y("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var f in n-=1,e)Object.getOwnPropertyDescriptor(e,f)&&(c[f]=Q(e[f],void 0,n));return G(c)}function Y(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function K(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return Q.from=Q,Q.isImmutable=l,Q.ImmutableError=y,Q.merge=Y(C),Q.replace=Y(R),Q.without=Y(S),Q.asMutable=(x=V,j=P,D=k,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?j.apply(t,e):t instanceof Date?D.apply(t,e):x.apply(t,e)}),Q.set=K(F,b),Q.setIn=K(L,w),Q.update=Y(U),Q.updateIn=Y(H),Q.getIn=Y(W),Q.flatMap=Y(O),Q.asObject=Y(I),i.use_static||(Q.static=e({use_static:!0})),Object.freeze(Q),Q}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(9)),o=s(n(10)),i=s(n(116)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=["YOUR_PUBLIC_KEY","XXXXXXXXXXXXXXX"],h=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,r.default);var t,n,o,s=f(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this)).publicApiKey=null,e.getPublicApiKey()&&e.setPublicApiKey(e.getPublicApiKey()),e}return t=u,(n=[{key:"checkPublicApiKey",value:function(){return!!this.getPublicApiKey()}},{key:"getPublicApiKey",value:function(){var e=this.publicApiKey||i.default.queryObj().public_api_key||window._affirm_config&&(window._affirm_config.public_api_key||window._affirm_config.publicApiKey);return-1===p.indexOf(e)?e:null}},{key:"setPublicApiKey",value:function(e){var t=this;this.publicApiKey=e,a.default.tag({public_api_key:e}),i.default.delay(function(){t.trigger("public_api_key_set")})}}])&&c(t.prototype,n),o&&c(t,o),u}()),m=(0,o.default)(h,["checkPublicApiKey","getPublicApiKey","off","on","setPublicApiKey","trigger"]);t.default=m},function(e,t,n){var r=n(89),o={},i=!1;function a(e,t){return t===s(e)}function s(e){var t=typeof e;return"object"!==t?t:e?e instanceof Error?"error":{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function u(e){return a(e,"function")}function c(e){var t=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),n=RegExp("^"+t+"$");return l(e)&&n.test(e)}function l(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function f(){var e=v();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)})}var d={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function p(e,t){var n,r;try{n=o.stringify(e)}catch(o){if(t&&u(t))try{n=t(e)}catch(e){r=e}else r=o}return{error:r,value:n}}function h(e,t){return function(n,r){try{t(n,r)}catch(t){e.error(t)}}}var m=["log","network","dom","navigation","error","manual"],g=["critical","error","warning","info","debug"];function y(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function v(){return Date.now?+Date.now():+new Date}e.exports={addParamsAndAccessTokenToPath:function(e,t,n){(n=n||{}).access_token=e;var r,o=[];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&o.push([r,n[r]].join("="));var i="?"+o.sort().join("&");(t=t||{}).path=t.path||"";var a,s=t.path.indexOf("?"),u=t.path.indexOf("#");-1!==s&&(-1===u||u>s)?(a=t.path,t.path=a.substring(0,s)+i+"&"+a.substring(s+1)):-1!==u?(a=t.path,t.path=a.substring(0,u)+i+a.substring(u)):t.path=t.path+i},createItem:function(e,t,n,o,i){for(var a,u,c,l,d,p,m=[],g=[],y=0,A=e.length;y<A;++y){var b=s(p=e[y]);switch(g.push(b),b){case"undefined":break;case"string":a?m.push(p):a=p;break;case"function":l=h(t,p);break;case"date":m.push(p);break;case"error":case"domexception":case"exception":u?m.push(p):u=p;break;case"object":case"array":if(p instanceof Error||"undefined"!=typeof DOMException&&p instanceof DOMException){u?m.push(p):u=p;break}if(o&&"object"===b&&!d){for(var _=0,w=o.length;_<w;++_)if(void 0!==p[o[_]]){d=p;break}if(d)break}c?m.push(p):c=p;break;default:if(p instanceof Error||"undefined"!=typeof DOMException&&p instanceof DOMException){u?m.push(p):u=p;break}m.push(p)}}m.length>0&&((c=r(c)).extraArgs=m);var E={message:a,err:u,custom:c,timestamp:v(),callback:l,notifier:n,diagnostic:{},uuid:f()};return function(e,t){t&&void 0!==t.level&&(e.level=t.level,delete t.level),t&&void 0!==t.skipFrames&&(e.skipFrames=t.skipFrames,delete t.skipFrames)}(E,c),o&&d&&(E.request=d),i&&(E.lambdaContext=i),E._originalArgs=e,E.diagnostic.original_arg_types=g,E},addErrorContext:function(e,t){var n=e.data.custom||{},o=!1;try{for(var i=0;i<t.length;++i)t[i].hasOwnProperty("rollbarContext")&&(n=r(n,t[i].rollbarContext),o=!0);o&&(e.data.custom=n)}catch(t){e.diagnostic.error_context="Failed: "+t.message}},createTelemetryEvent:function(e){for(var t,n,r,o,i=0,a=e.length;i<a;++i)switch(s(o=e[i])){case"string":!t&&y(m,o)?t=o:!r&&y(g,o)&&(r=o);break;case"object":n=o}return{type:t||"manual",metadata:n||{},level:r}},filterIp:function(e,t){if(e&&e.user_ip&&!0!==t){var n=e.user_ip;if(t)try{var r;if(-1!==n.indexOf("."))(r=n.split(".")).pop(),r.push("0"),n=r.join(".");else if(-1!==n.indexOf(":")){if((r=n.split(":")).length>2){var o=r.slice(0,3),i=o[2].indexOf("/");-1!==i&&(o[2]=o[2].substring(0,i)),n=o.concat("0000:0000:0000:0000:0000").join(":")}}else n=null}catch(e){n=null}else n=null;e.user_ip=n}},formatArgsAsString:function(e){var t,n,r,o=[];for(t=0,n=e.length;t<n;++t){switch(s(r=e[t])){case"object":(r=(r=p(r)).error||r.value).length>500&&(r=r.substr(0,497)+"...");break;case"null":r="null";break;case"undefined":r="undefined";break;case"symbol":r=r.toString()}o.push(r)}return o.join(" ")},formatUrl:function(e,t){if(!(t=t||e.protocol)&&e.port&&(80===e.port?t="http:":443===e.port&&(t="https:")),t=t||"https:",!e.hostname)return null;var n=t+"//"+e.hostname;return e.port&&(n=n+":"+e.port),e.path&&(n+=e.path),n},get:function(e,t){if(e){var n=t.split("."),r=e;try{for(var o=0,i=n.length;o<i;++o)r=r[n[o]]}catch(e){r=void 0}return r}},handleOptions:function(e,t,n){var o=r(e,t,n);return!t||t.overwriteScrubFields?o:(t.scrubFields&&(o.scrubFields=(e.scrubFields||[]).concat(t.scrubFields)),o)},isError:function(e){return a(e,"error")||a(e,"exception")},isFunction:u,isIterable:function(e){var t=s(e);return"object"===t||"array"===t},isNativeFunction:c,isType:a,isObject:l,isString:function(e){return"string"==typeof e||e instanceof String},jsonParse:function(e){var t,n;try{t=o.parse(e)}catch(e){n=e}return{error:n,value:t}},LEVELS:{debug:0,info:1,warning:2,error:3,critical:4},makeUnhandledStackInfo:function(e,t,n,r,o,i,a,s){var u={url:t||"",line:n,column:r};u.func=s.guessFunctionName(u.url,u.line),u.context=s.gatherContext(u.url,u.line);var c=document&&document.location&&document.location.href,l=window&&window.navigator&&window.navigator.userAgent;return{mode:i,message:o?String(o):e||a,url:c,stack:[u],useragent:l}},merge:r,now:v,redact:function(){return"********"},sanitizeUrl:function(e){var t=function(e){if(a(e,"string")){for(var t=d,n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},o=0,i=t.key.length;o<i;++o)r[t.key[o]]=n[o]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,o){n&&(r[t.q.name][n]=o)}),r}}(e);return t?(""===t.anchor&&(t.source=t.source.replace("#","")),e=t.source.replace("?"+t.query,"")):"(unknown)"},set:function(e,t,n){if(e){var r=t.split("."),o=r.length;if(!(o<1))if(1!==o)try{for(var i=e[r[0]]||{},a=i,s=1;s<o-1;++s)i[r[s]]=i[r[s]]||{},i=i[r[s]];i[r[o-1]]=n,e[r[0]]=a}catch(e){return}else e[r[0]]=n}},setupJSON:function(e){i||(i=!0,a(JSON,"undefined")||(c(JSON.stringify)&&(o.stringify=JSON.stringify),c(JSON.parse)&&(o.parse=JSON.parse)),u(o.stringify)&&u(o.parse)||e(o))},stringify:p,maxByteSize:function(e){for(var t=0,n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);o<128?t+=1:o<2048?t+=2:o<65536&&(t+=3)}return t},typeName:s,uuid4:f}},function(e,t,n){"use strict";function r(e,t){for(var n,r=t,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if("string"==typeof t&&(r=e,i.push(t)),!i.length)throw new Error("bindAll requires at least one method name to bind");i.forEach(function(t){if("function"!=typeof(n=e[t]))throw new Error(t+" is not a method on object");e[t]=n.bind(r)})}n.r(t),n.d(t,"default",function(){return r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getItemsInput=function(e){if(!e||!e.length)return null;var t=e.map(d);return JSON.stringify(t)},t.getPublicApiKeyByWindowLocation=function(){var e=window.location.hostname;return e.indexOf("americangirl.com")>-1?"J58O9ZQ92CVD2JUI":e.indexOf("shiekh.com")>-1?"Y7YCRFSNMXGWVY2B":e.indexOf("eshakti.com")>-1?"FDZPOIM536QEZPP5":e.indexOf("511tactical.com")>-1?"4UDO5IUJVOMQ5PHD":e.indexOf("luisaviaroma.com")>-1?"19QM9L004P0D521M":e.indexOf("neimanmarcus.com")>-1?"BF1E98V0I4ZFN4LF":e.indexOf("mavix.com")>-1?"5HQ4NWB4X643A4GM":e.indexOf("revzilla.com")>-1?"LV2522QG9NXCFS23":""},t.getTuftAndNeedleSplitPayExperiment=function(e){if(o.default.getPublicApiKey()!==l)return Promise.resolve(!1);null===f&&(f=a.AxpClient.getExperimentVariants([s]));return f.then(function(t){f=null;var n=t[s],r="treatment"===n;return e&&a.AxpClient.trackImpression(s,n,r?a.impressionTypes.SHOWN_TREATMENT:a.impressionTypes.SHOWN_DEFAULT),r}).catch(function(e){return f=null,window.affirm&&window.affirm.Rollbar&&"function"==typeof window.affirm.Rollbar.warning&&Math.random()<.1&&window.affirm.Rollbar.warning("AXP Impression failed",e),!1})},t.getInlineExperiment=function(e){null===f&&(f=a.AxpClient.getExperimentVariants([u]));return f.then(function(t){f=null;var n=t[u],r="default"===n;return e&&a.AxpClient.trackImpression(u,n,r?a.impressionTypes.SHOWN_DEFAULT:a.impressionTypes.SHOWN_TREATMENT),r}).catch(function(e){return f=null,window.affirm&&window.affirm.Rollbar&&"function"==typeof window.affirm.Rollbar.warning&&Math.random()<.1&&window.affirm.Rollbar.warning("AXP Impression failed",e),!1})},t.getAdaptiveCheckoutExperiment=function(e){if(-1===i.ADAPTIVE_CHECKOUT_PUBLIC_API_KEYS.indexOf(o.default.getPublicApiKey()))return Promise.resolve(!1);null===f&&(f=a.AxpClient.getExperimentVariants([c]));return f.then(function(t){f=null;var n=t[c],r="treatment"===n;return e&&("treatment"===n?a.AxpClient.trackImpression(c,n,a.impressionTypes.SHOWN_TREATMENT):"default"===n&&a.AxpClient.trackImpression(c,n,a.impressionTypes.SHOWN_DEFAULT)),r}).catch(function(e){return f=null,window.affirm&&window.affirm.Rollbar&&"function"==typeof window.affirm.Rollbar.warning&&Math.random()<.1&&window.affirm.Rollbar.warning("AXP Impression failed",e),!1})},t.throttle=p,t.logWarning=t.ADAPTIVE_CHECKOUT_EXPERIMENT=t.INLINE_VALUE_PROPS_EXPERIMENT=t.TUFT_AND_NEEDLE_SP_FP=t.TUFT_AND_NEEDLE_SPLIT_PAY_EXPERIMENT=void 0;var r,o=(r=n(5))&&r.__esModule?r:{default:r},i=n(120),a=n(71);var s="tuft_and_needle_split_pay_experiment";t.TUFT_AND_NEEDLE_SPLIT_PAY_EXPERIMENT=s;t.TUFT_AND_NEEDLE_SP_FP="affirm_go_v3_integrated_merchant_mtl_nonexempt";var u="inline_value_props_experiment";t.INLINE_VALUE_PROPS_EXPERIMENT=u;var c="adaptive_checkout_experiment";t.ADAPTIVE_CHECKOUT_EXPERIMENT=c;var l="WB4ZGZRQ5529WGHY",f=null;function d(e){return{sku:e.sku,display_name:e.displayName,qty:e.qty,unit_price:e.unitPrice,item_url:e.itemUrl,item_image_url:e.itemImageUrl,upc:e.upc}}function p(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return function(){t||(e.apply(void 0,arguments),t=!0,setTimeout(function(){t=!1},n))}}var h=p(function(e){var t,n,r;console.warn(e),null===(t=window)||void 0===t||null===(n=t.affirm)||void 0===n||null===(r=n.Rollbar)||void 0===r||r.warning(e)});t.logWarning=h},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.on=this.on.bind(this),this.off=this.off.bind(this),this.trigger=this.trigger.bind(this),this.logError=this.logError.bind(this),this.name=t||"AFFIRM_ELEMENT_".concat(Math.round(10*Math.random())),this.uuid="".concat(10*Math.random()).replace(/\./,"-"),this.on("error",this.logError)}var t,n,i;return t=e,(n=[{key:"on",value:function(e,t){var n=this,r=e;return"string"==typeof r&&(r=[r]),this.events||(this.events={}),r.forEach(function(e){n.events[e]||(n.events[e]=[]),n.events[e].push(t)}),this}},{key:"off",value:function(e,t){var n=this,r=e;return"string"==typeof r&&(r=[r]),this.events||(this.events={}),r.forEach(function(e){return window.setTimeout(function(){if(n.events[e]){var r=-1;if(Object.keys(n.events[e]).forEach(function(o){n.events[e][o]===t&&(r=o)}),r>=0)return n.events[e].splice(r,1)}})})}},{key:"trigger",value:function(e,t){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e;"string"==typeof o&&(o=[o]),this.events||(this.events={});var i=[];return o.forEach(function(e){n.events[e]&&n.events[e].forEach(function(r){i.push("function"==typeof r.call?r.call(n,t,e):void 0)}),r&&n.events.all&&n.events.all.forEach(function(r){i.push("function"==typeof r.call?r.call(n,t,e):void 0)})}),i}},{key:"logError",value:function(e,t){var n=t,o=e;"object"===r(e)&&e.data&&(n=e.data.data||{},o=e.data.error_name);var i="Affirm Error (".concat(this.name,"):");try{return console.log(i,o,n)}catch(e){return}}}])&&o(t.prototype,n),i&&o(t,i),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={instance:e};return t.forEach(function(t){n[t]=e[t].bind(e)}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(50)),o=l(n(138)),i=l(n(0)),a=l(n(49)),s=l(n(7)),u=l(n(140)),c=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return y(e)}(this,n)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r.default);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var u={width:o.default.DEFAULT_OPTIONS.popupWidth};if(!(e=t.call(this,i.default.extend({popupCss:u},a))).constructor.isValidMode(r.mode))throw new Error(e.constructor.INVALID_MODE_ERROR);return e.config=i.default.extend({},r),(0,s.default)(y(e),"configureMessaging","startConfiguringMessaging"),e}return h(n,[{key:"configPayload",get:function(){return{id:this.currentPostMessageId||this.constructor.POST_MESSAGE_ID}}},{key:"targetWindow",get:function(){return this.config.mode===n.MODE_MODAL?this.$iframe.contentWindow:this.config.mode===n.MODE_POPUP?this.popup&&this.popup.popupWindow:null}}],[{key:"determineMode",value:function(e){return n.isModalSupported().then(function(e){return e}).catch(function(){return!1}).then(function(t){var r=e||n.MODE_UNSUPPORTED;return r!==n.MODE_MODAL||t||(r=n.MODE_POPUP),r!==n.MODE_POPUP||n.isPopupSupported()||(r=t?n.MODE_MODAL:n.MODE_UNSUPPORTED),r})}},{key:"isModalSupported",value:function(){var e;return e=i.default.sniffer.promises&&i.default.sniffer.promises.thirdPartyCookies?i.default.sniffer.promises.thirdPartyCookies:a.default.thirdPartyCookies(),(0,u.default)(e,500).catch(function(){return!1})}},{key:"isPopupSupported",value:function(){return!i.default.isIe()}},{key:"isValidMode",value:function(e){return e===n.MODE_MODAL||e===n.MODE_POPUP||e===n.MODE_UNSUPPORTED}},{key:"APP_NAME",get:function(){return"modal-popup-widget"}},{key:"INVALID_MODE_ERROR",get:function(){return"Widget mode must either be 'modal' or 'popup'"}},{key:"MAX_CONFIG_ATTEMPTS",get:function(){return 50}},{key:"MODE_MODAL",get:function(){return"modal"}},{key:"MODE_POPUP",get:function(){return"popup"}},{key:"MODE_UNSUPPORTED",get:function(){return"unsupported"}},{key:"POPUP_TIMEOUT",get:function(){return 0}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_MESSAGES"}},{key:"POPUP_OVERLAY_MESSAGE",get:function(){return"Please click continue if you don't see the Affirm pop-up window. You may need to turn off your pop-up blocker."}}]),h(n,[{key:"clearTimers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.config.mode===n.MODE_POPUP&&this.popup&&this.popup.clearTimer(),clearInterval(this.payloadMessageTimer),delete this.payloadMessageTimer,e&&"Affirm Checkout"===this.constructor.APP_NAME&&c.default.trackActionLog("AFJS_post_message_config_succeeded",{elapsedTime:Date.now()-this.widgetOpenTime,isIFrameReady:this.isIFrameReady,widgetMode:this.config.mode,checkoutAri:this.config.checkoutAri})}},{key:"close",value:function(e){this.clearTimers(),this.config.mode===n.MODE_MODAL?d(v(n.prototype),"close",this).call(this,e):this.config.mode===n.MODE_POPUP?(this.trigger("hiding"),this.popup&&this.popup.close(e)):"function"==typeof e&&e()}},{key:"configureMessaging",value:function(e){var t="function"==typeof window.postMessage;this.payloadMessageCounter<this.constructor.MAX_CONFIG_ATTEMPTS?(this.postMessage(e||this.configPayload),this.payloadMessageCounter+=1):(this.clearTimers(),c.default.trackActionLog("AFJS_post_message_config_failed",{checkoutAri:this.config.checkoutAri,elapsedTime:Date.now()-this.widgetOpenTime,isIFrameReady:this.isIFrameReady,isPostMessageSupported:t,widgetMode:this.config.mode,widgetType:this.constructor.APP_NAME}))}},{key:"open",value:function(e){this.widgetOpenTime=Date.now(),"Affirm Checkout"===this.constructor.APP_NAME&&c.default.trackActionLog("AFJS_open_checkout_modal_popup_widget",{widgetMode:this.config.mode,checkoutAri:this.config.checkoutAri}),this.config.mode===n.MODE_MODAL?(d(v(n.prototype),"open",this).call(this,e),this.startConfiguringMessaging()):this.config.mode===n.MODE_POPUP?(this.popup||(this.popup=new o.default({popupName:this.constructor.APP_NAME,popupOverlayMessage:this.constructor.POPUP_OVERLAY_MESSAGE,popupTimeout:this.constructor.POPUP_TIMEOUT,popupWidth:this.options.popupCss.width,src:this.options.src})),this.popup.open(this.onPopupOpen.bind(this,e))):"function"==typeof e&&e()}},{key:"onPopupOpen",value:function(e){this.options.src&&setTimeout(this.startConfiguringMessaging,500),"function"==typeof e&&e()}},{key:"postMessage",value:function(e){if(this.config.mode===n.MODE_MODAL)d(v(n.prototype),"postMessage",this).call(this,e);else if(this.config.mode===n.MODE_POPUP&&this.options.src){var t=i.default.extend({id:this.currentPostMessageId||this.constructor.POST_MESSAGE_ID},e);this.targetWindow&&this.targetWindow.postMessage(JSON.stringify(t),i.default.getDomain(this.options.src))}}},{key:"startConfiguringMessaging",value:function(e){var t=this;this.payloadMessageTimer||(this.payloadMessageCounter=0,this.payloadMessageTimer=setInterval(function(){return t.configureMessaging(e)},500))}},{key:"updatePopupSource",value:function(e,t){this.options.src=e,this.popup.updateSource(e),setTimeout(this.startConfiguringMessaging,500),"function"==typeof t&&t()}}]),n}();t.default=A},function(e,t,n){"use strict";n.r(t),t.default={bind:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},unbind:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}var a=new r.default,s=(0,o.default)(a,["off","on","trigger"]);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findIndex=t.get=t.isValidItems=t.validateCheckoutAri=t.applyLigatures=t.addInsertListener=t.childWindowParams=t.setLocalStorage=t.moneyWithCents=t.indexOf=void 0;t.indexOf=function(e,t){for(var n=0;void 0!==e[n];){if(e[n]===t)return n;n+=1}return-1};t.moneyWithCents=function(e){return(parseInt(e,10)/100).toFixed(2)};t.setLocalStorage=function(e,t){return localStorage.setItem(e,JSON.stringify(t))};t.childWindowParams=function(e){var t=void 0!==window.screenX?window.screenX:window.screenLeft,n=void 0!==window.screenY?window.screenY:window.screenTop,r=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,o=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,i=Math.max(t,0),a=.8*o,s=parseInt(e,10),u=parseInt(i+(r-s)/2,10),c=parseInt(n+(o-a)/2.5,10);return"width=".concat(s,", height=").concat(a,", left=").concat(u,", top=").concat(c,", toolbar=0, scrollbars=1")};t.addInsertListener=function(e,t){var n=function(n){n.animationName===e&&t(n.target)};document.addEventListener&&(document.addEventListener("animationstart",n,!1),document.addEventListener("MSAnimationStart",n,!1),document.addEventListener("webkitAnimationStart",n,!1))};t.applyLigatures=function(e,t){if(e){var n=e.innerText,r=e.innerHTML,o=t[n||r];o&&e.classList.add("__ligature__".concat(o,"__")),e.classList.add("__processed")}};t.validateCheckoutAri=function(e){return!(!e||16!==e.length||null!==e.match(/[\Wa-z]{1,}/))};t.isValidItems=function(e){return!(!Array.isArray(e)||!e.length)&&e.every(function(e){return e.displayName&&e.sku&&e.unitPrice&&e.qty})};t.get=function e(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return t&&t[n]&&(o.length?e.apply(void 0,[t[n]].concat(o)):t[n])};t.findIndex=function(e,t){for(var n=0;n<e.length;n+=1)if(t(e[n],n))return n;return-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(9)),o=s(n(10)),i=s(n(0)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,r.default);var t,n,o,s=f(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this)).data={},e}return t=u,(n=[{key:"get",value:function(){return this.data}},{key:"resetPrequal",value:function(){this.data={},this.trigger("reset")}},{key:"set",value:function(e){i.default.throwErrIfNotObject(e),this.data=e,a.default.trackActionLog("Prequal Config Set",{keys:Object.keys(this.data).join(",")}),this.trigger("set",this.data)}},{key:"updatePrequal",value:function(e){i.default.throwErrIfNotObject(e),this.data=Object.assign(this.data,e),this.trigger("update",this.data)}}])&&c(t.prototype,n),o&&c(t,o),u}()),h=(0,o.default)(p,["get","resetPrequal","set","updatePrequal"]);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=v(n(2)),o=n(23),i=v(n(35)),a=v(n(5)),s=v(n(3)),u=n(8),c=v(n(13)),l=n(20),f=v(n(11)),d=v(n(18)),p=v(n(0)),h=v(n(1)),m=v(n(7)),g=v(n(37)),y=v(n(12));function v(e){return e&&e.__esModule?e:{default:e}}function A(e){"@babel/helpers - typeof";return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;return O(e)}(this,n)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=p.default.getFrontendUrl(s.default.resource_urls.prequal_backend_route),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(n,f.default);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=Object.assign({mode:r.mode||f.default.MODE_MODAL},r);return(e=t.call(this,i,Object.assign({name:"prequal-application",popupCss:{width:"500px"},src:n.constructURL(r.urlParams)},o))).isPrequalComplete=!1,(0,m.default)(O(e),"postMessageListener"),e.on("prequalFinished",function(e){var t=r.onSuccess;"function"==typeof t&&t(e)}),e}return w(n,[{key:"configPayload",get:function(){var e=this.config,t=e.merchant||{};return t.name=e.merchant_name,t.public_api_key=a.default.getPublicApiKey(),Object.assign({id:this.currentPostMessageId||n.POST_MESSAGE_ID,merchant:t,meta:{__affirm_tracking_uuid:r.default.localDeviceId,user_timezone:p.default.getUserTimeZone()},referring_url:window.location.href},this.config)}},{key:"defaultOptions",get:function(){var e=S(P(n.prototype),"defaultOptions",this);return e.resizeHeight=!0,e}}],[{key:"generatePromoPrequalConfig",value:function(e,t,n,o){return b({},e,{urlParams:{device_id:r.default.localDeviceId,merchant_name:e.merchant_name,promo_external_id:t.promoId,referring_url:encodeURIComponent(o),unit_price:t.amount,webhook_session_id:e.webhook_session_id||p.default.getWebhookSessionId(),use_promo:e.use_promo||"",page_type:t.page_type,cohort_id:t.cohort_id,split_pay_go_enabled:t.split_pay_go_enabled||null,use_adaptive:t.use_adaptive||null,inline:t.inline||null},mode:n,page_type:"home"})}},{key:"constructURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=b({public_api_key:a.default.getPublicApiKey()},e);return"".concat(I,"?").concat(n.urlParamsToQueryString(t))}},{key:"urlParamsToQueryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,g.default)(e,function(e){return null!==e&&void 0!==e});return(null===t||void 0===t?void 0:t.items)&&(t.items=(0,u.getItemsInput)(t.items)),e&&Object.keys(t).length?"".concat(Object.keys(t).map(function(e){return t[e]?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e])):""}).join("&")):""}},{key:"APP_NAME",get:function(){return"Affirm Prequal"}},{key:"POPUP_OVERLAY_MESSAGE",get:function(){return"Select continue, or turn off your pop-up blocker."}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_PREQUAL_MESSAGES"}}]),w(n,[{key:"close",value:function(e){var t=this;y.default.unbind(window,"message",this.postMessageListener),S(P(n.prototype),"close",this).call(this,function(){t.isPrequalComplete||t.unload(),c.default.trigger("prequal:close"),"function"==typeof e&&e()})}},{key:"open",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y.default.bind(window,"message",this.postMessageListener),f.default.determineMode(r.mode||this.config.mode||f.default.MODE_MODAL).then(function(o){if(o===f.default.MODE_UNSUPPORTED)return(0,l.showError)({body:"Affirm Prequal requires third party cookies in order to work properly. Please enable them in your settings before continuing, or use a different browser.",title:"Your browser is missing important features"}),void("function"==typeof e&&e());t.config=Object.assign(t.config,r,{mode:o}),o===f.default.MODE_MODAL?h.default.trackImpression("Prequal Modal Page"):o===n.MODE_POPUP&&h.default.trackImpression("Prequal Popup Page"),S(P(n.prototype),"open",t).call(t,e)})}},{key:"postMessageListener",value:function(e){var t=d.default.parsePostMessageData(e);if(t&&t.id===n.POST_MESSAGE_ID)switch(t.name){case"AFFIRM_PREQUAL_FINISHED":h.default.trackActionLog("Prequal Finished"),this.isPrequalComplete=!0,c.default.trigger("prequal:complete",t.data),this.trigger("prequalFinished",t.data);break;case"AFFIRM_PREQUAL_SIGNED_OUT":this.trigger("prequalSignedOut");break;case"AFFIRM_PREQUAL_CLOSE":this.close(),i.default.open(o.Apps.toast,{forceShow:!0,onSuccess:!0});break;case"AFFIRM_PREQUAL_INIT":this.clearTimers(!0)}}},{key:"unload",value:function(){S(P(n.prototype),"unload",this).call(this),y.default.unbind(window,"message",this.postMessageListener)}}]),n}();t.default=T},function(e,t){function n(e){var t=e.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return t&&parseInt(t[1],10)}function r(e){var t=e.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//);return{major:t&&parseInt(t[1],10),minor:t&&parseInt(t[2],10)}}function o(e){var t=e.match(/Chrom[^ \/]+\/(\d+)[\.\d]/);return t&&parseInt(t[1],10)}function i(e){return Boolean(e.match(/Chrom(e|ium)/))}e.exports={iosMajorVersion:n,isIosMajorVersion:function(e,t){return n(e)===t},macosxVersion:r,isMacosxVersion:function(e,t,n){void 0===n&&(n=null);var o=r(e),i=o.major,a=o.minor;return n?i===t&&a===n:i===t},chromeMajorVersion:o,isChromeMajorVersion:function(e,t){return o(e)===t},isChromiumBased:i,isSafariBased:function(e){return!i(e)&&Boolean(e.match(/Version\/.* Safari\//))},isMacEmbeddedBrowser:function(e){return Boolean(e.match(/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\)+ AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(3)),o=c(n(9)),i=c(n(0)),a=c(n(1)),s=c(n(7)),u=c(n(12));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,o.default);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this,r.name)).options=r,e.generateFrame(),(0,s.default)(g(e),"handlePostMessage","handleResizeEvent"),e.on("resize",e.handleResizeEvent),u.default.bind(window,"message",e.handlePostMessage),window["_affirm_post_message_".concat(e.name)]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.trigger(t,n)},e}return p(n,null,[{key:"APP_NAME",get:function(){return"Affirm"}},{key:"IFRAME_CLASSNAME",get:function(){return"affirm-sandbox-iframe"}},{key:"RESIZE_INTERVAL",get:function(){return 500}},{key:"SANDBOX_CONTAINER_CLASSNAME",get:function(){return"affirm-sandbox-container"}},{key:"SANDBOX_PERMISSIONS",get:function(){return{"allow-forms":!0,"allow-modals":!0,"allow-popups":!0,"allow-same-origin":!0,"allow-scripts":!0}}}]),p(n,[{key:"generateFrame",value:function(){var e=this;this.cssOptions=i.default.extend({overflow:"hidden",width:"100%",height:"100%"},this.options.css||{});var t=document.createElement("div");t.className=n.SANDBOX_CONTAINER_CLASSNAME,this.options.iframe_container_css&&i.default.setElementStyle(t,this.options.iframe_container_css);var r=document.createElement("iframe");return r.className=n.IFRAME_CLASSNAME,i.default.setElementAttrs(r,{id:this.name,width:this.cssOptions.width,height:this.cssOptions.height,frameborder:0,allowScroll:"no",allowTransparency:!0,sandbox:Object.keys(this.constructor.SANDBOX_PERMISSIONS||{}).join(" "),title:this.constructor.APP_NAME}),i.default.isObject(this.cssOptions)&&Object.keys(this.cssOptions).forEach(function(t){r.style[t]=e.cssOptions[t]}),this.defaultContainerDisplayStyle=(null!=this.options.iframe_container_css?this.options.iframe_container_css.display:void 0)||"block",t.style.display="none",this.$iframe=r,this.$iframe_container=t,this.orientation=window.orientation,this.bind("ready",function(){return e.trigger("ready")}),this.$iframe_container}},{key:"handlePostMessage",value:function(e){var t,n=e||{data:""};try{t=JSON.parse(n.data)}catch(e){t={}}var r=new RegExp("".concat(this.name,"_"));if(t&&t.name&&t.name.match(r)){var o=t.name.replace(r,"").toLowerCase(),i=t.data||{};this.trigger(o,i)}}},{key:"regenerateIfAlreadyAppended",value:function(){if(!this.isOrphan()&&this.$iframe_container.parentNode){var e=this.$iframe_container.style.display;this.$iframe_container.parentNode.removeChild(this.$iframe_container),this.generateFrame(),this.$iframe_container.style.display=e}}},{key:"appendTo",value:function(e){var t=i.default.getElementById(e);return this.regenerateIfAlreadyAppended(),this.$iframe_container.appendChild(this.$iframe),t&&t.appendChild&&t.appendChild(this.$iframe_container),this}},{key:"content",value:function(e){if(this.isOrphan())return this.logError("Tried to set content on orphaned iframe",{content:e}),this;var t=this.$iframe.contentWindow.document;return this.write(e),this.write(this.insertPostMessageSender()),this.write(this.insertPostMessageReceiver()),this.write(n.insertResizeListener()),t.close(),this}},{key:"write",value:function(e){try{this.$iframe.contentWindow.document.write(e)}catch(e){}}},{key:"insertPostMessageSender",value:function(){return["<scr","ipt"," defer='defer'>","window.trigger = function(name,data){","try{","_name = '".concat(this.name,"_' + name;"),"_d = JSON.stringify({ name: _name, data: data });","window.parent.postMessage( _d, '".concat(document.location.origin,"' );"),"} catch(e) {","window.parent._affirm_post_message_".concat(this.name,"(name, data);"),"}","}","</scr","ipt>"].join("")}},{key:"insertPostMessageReceiver",value:function(){return["<scr","ipt"," defer='defer'>","if(window.addEventListener){","_action = 'addEventListener';","_event  = 'message';","} else {","_action = 'attachEvent';","_event  = 'onmessage';","}","window[_action](_event, function(ev){","var _event = ev || {data:''},","_namespace_regex = new RegExp('".concat(this.name,"_');"),"try{","_data = JSON.parse(_event.data);","} catch (e){","_data = {};","}","if(_data && _data.name && _data.name.match(_namespace_regex)){","var _n = _data.name.replace(_namespace_regex, '').toLowerCase();","var _d = _data.data || {};","try{","if (window.affirm_events && window.affirm_events[_n]) {","window.affirm_events[_n].call(window,_d);","}","}catch(e){}","}","});","</scr","ipt>"].join("")}},{key:"handleResizeEvent",value:function(e,t){var n=this,r=t||e||{},o=this.orientation;if(this.orientation=window.orientation,window.orientation!==o&&(i.default.swapStyle(this.$iframe_container,"top","bottom"),i.default.swapStyle(this.$iframe_container,"left","right"),this.$iframe_container.style.width)){var a=this.$iframe_container.style.width;this.$iframe_container.style.width="",window.requestAnimationFrame(function(){n.$iframe_container.style.width=a})}r.height&&this.$iframe.scrollHeight<r.height&&(this.$iframe.style.height=r.height+100)}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t.data||t;f(y(n.prototype),"trigger",this).call(this,e,o);var s={name:"".concat(this.name,"_").concat(e),data:o};try{s=JSON.stringify(s)}catch(e){s=""}var u=i.default.getDomain(this.src())!==i.default.getDomain(window.location.href);if(r&&(u||!this.isOrphan())){var c=this.getTargetWindow();c?c.postMessage(s,this.origin()):a.default.trackActionLog("Post message error: target window not found on event trigger")}}},{key:"origin",value:function(){return(this.src()||document.location.href).split("/").slice(0,3).join("/")}},{key:"isOrphan",value:function(){try{return!(this.$iframe&&this.$iframe.contentWindow&&this.$iframe.contentWindow.document)}catch(e){return!this.$iframe.parentNode}}},{key:"bind",value:function(e,t){u.default.bind(this.$iframe,e,t)}},{key:"unbind",value:function(e,t){u.default.unbind(this.$iframe(e,t))}},{key:"src",value:function(e){if(!e)try{return this.$iframe.getAttribute("src")}catch(e){return this.$iframe.src}return i.default.setElementAttrs(this.$iframe,{src:e}),this}},{key:"hide",value:function(){return this.trigger("hiding",{},!1),this.$iframe_container.style.display="none",this}},{key:"show",value:function(){return this.activeElementBeforeShown=document.activeElement,this.trigger("showing",{},!1),this.$iframe_container.style.display=this.defaultContainerDisplayStyle,this}},{key:"remove",value:function(){return u.default.unbind(window,"message",this.handlePostMessage),this.$iframe_container.parentNode&&this.$iframe_container.parentNode.removeChild(this.$iframe_container),this.trigger("remove",{},!1),this}},{key:"getTargetWindow",value:function(){return this.$iframe.contentWindow}}],[{key:"insertResizeListener",value:function(){return["<scr","ipt"," defer='defer'>","(function(){","function getHeight(){","var body = document.body, html = document.documentElement,","max_height = Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight );","return body.scrollHeight;","}","var _current_height = 0;","setInterval(function(){","if(_current_height != getHeight()){","trigger('resize', {height: getHeight()});","_current_height = getHeight();","}","}, ".concat(n.RESIZE_INTERVAL,");"),"}());","</scr","ipt>"].join("")}},{key:"postMessageHasValidOrigin",value:function(e){return e.origin===r.default.frontend_url.replace(/\/$/,"")}},{key:"parsePostMessageData",value:function(e){var t=null;if(n.postMessageHasValidOrigin(e)&&"string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){}return t}}]),n}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=A(n(5)),o=A(n(57)),i=A(n(38)),a=A(n(3)),s=A(n(15)),u=A(n(21)),c=A(n(13)),l=n(66),f=A(n(11)),d=A(n(36)),p=A(n(16)),h=A(n(67)),m=n(14),g=A(n(0)),y=A(n(1)),v=n(8);function A(e){return e&&e.__esModule?e:{default:e}}function b(e){"@babel/helpers - typeof";return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S="Subject to credit check and approval. Down payment may be required. For purchases under $100, limited payment options are available. Estimated payment amount excludes taxes and shipping fees. Affirm loans are made by Cross River Bank, a New Jersey State Chartered Commercial Bank, Member FDIC. See www.affirm.com/faqs for details.",P="Make easy monthly payments over 3, 6, or 12 months",I="Make easy monthly payments for your purchase",T="Rates from 10&ndash;30% APR.",M="Rates from 0&ndash;30% APR.",C="${payment}/mo based on a purchase price of ${amount} at 0% APR for {term_length} months. Rates from 0&ndash;30% APR.",R="${payment}/mo based on a purchase price of ${amount} at 10% APR for {term_length} months. Rates from 10&ndash;30% APR.",x="XXXXXXXXXXXXXXX",j={quick_and_easy:{icon:"quick",header:"Quick and easy",body:"Enter a few pieces of information for a real-time decision. Checking your eligibility won't affect your credit score."},no_hidden_fees:{icon:"transparent",header:"No hidden fees",body:"Know up front exactly what you'll owe, with no hidden costs and no surprises."},select_affirm_at_checkout:{icon:"bag",header:"Just select Affirm at checkout",body:"Just a few pieces of information is all it takes to get a real-time decision."},make_interest_free_payments:{icon:"loan",header:"Pay monthly without interest",body:"Your purchase is split up into three payments. Thereâs no interestâand never any hidden fees!"}},D="Multicolor Affirm Logo cta",N="Multicolor Affirm Logo cta - just select Affirm at checkout",L="Product Page Promo Modal",F="Site Wide Promo Modal",U={contentSpace1:"quick_and_easy",contentSpace2:"no_hidden_fees",apr:.1,termLength:12,footer:S,styles:{}},B={contentSpace1:"quick_and_easy",contentSpace2:"no_hidden_fees",footer:S,styles:{}},H=window.devicePixelRatio>1,W={},V={};function q(e,t,n){var r="";return e||(r+="affirm-no-hero-image "),t||(r+="affirm-merchant-no-logo "),"fast"===n&&(r+="affirm_fast "),r}function G(e,t){var n=r.default.getPublicApiKey();if(!t)return"product_page_modal"===e?i.default.getPromoConfig(n,e,t,U):i.default.getPromoConfig(n,e,t,B);if(h.default.isPromoSet(t))return"product_page_modal"===e?h.default.getConfig(t,"productPageModal"):h.default.getConfig(t,"siteWideModal");var o="affirm-modal:".concat(n,":").concat(e,":").concat(t);if(!W[o]){var s="".concat(a.default.promos_url_prefix).concat(e,"/").concat(n,"/").concat(t,".json");W[o]=fetch(s).then(function(n){return n.json().then(function(e){return(0,m.setLocalStorage)(o,e),e}).catch(function(){return console.error("Error while retrieving the modal config ".concat(e," ").concat(t,". Returning Default")),G(e)})})}return W[o]}function Q(e,t){var a=n(39),u=t.modalId,c=t.promoId,l=t.type,d=t.amount&&parseFloat(t.amount);"product_page_modal"===l?y.default.trackUserInteraction(L,y.default.USER_ACTIONS.CLICK):y.default.trackUserInteraction(F,y.default.USER_ACTIONS.CLICK);var m=null;(m=c||u)===x&&(m=void 0);var A=r.default.getPublicApiKey();return i.default.useV2Api(A,m)?i.default.getPromoResponse(A,{amount:d,pageType:t.pageType,promoId:m},i.default.TEMPLATE_FIELD.modal).then(function(n){y.default.trackEvent("LearnMoreWidget: openModal",{promoResponse:n});return-1!==["J5E24QQQJ9ZL9LMD","8F5E01N5KIO60DJ6","ZPQY8VGE0U8Y6WP2","5X8V8MQUX8VFYCME","D3ACIW1WYYJXNX1M"].indexOf(A)?new Y({DOMNode:e,renderedPromo:n.promo}):o.default.getFinancingExperimentCohortId(A).then(function(e){return(0,v.getTuftAndNeedleSplitPayExperiment)(!0).then(function(n){return(0,v.getAdaptiveCheckoutExperiment)(!0).then(function(r){var o="".concat(l,"/").concat(m,"/").concat(d,"/").concat(t.pageType);V[o]||(V[o]=new p.default(p.default.generatePromoPrequalConfig(Object.assign(s.default.get(),{use_promo:!0}),{amount:d,cohort_id:e,page_type:t.pageType,promoId:m,split_pay_go_enabled:n,use_adaptive:r},f.default.MODE_MODAL,window.location.href))),V[o].open()})})})}):G(l,m).then(function(e){var t=Object.assign({},e);if(t.promoId=m,d){var n,r,o;if(t.amount=d,t.termLengthIntervals&&(r=h.default.getTermLengthIntervalForAmount(t.termLengthIntervals,d)),r)n=r.apr,o=r.termLength;else n=t.apr,o=t.termLength;return a.getEstimate({apr:n,amount:d,months:o}).then(function(e){var r={};return g.default.extend(r,t),r.amount=d,r.apr=n,r.months=o,r.payment=e.payment,r.termLength=e.months||o,r})}return t}).catch(function(){return G(l).then(function(e){if(d){var t=e.apr,n=e.termLength;return a.getEstimate({apr:t,amount:d,months:n}).then(function(r){var o={};return g.default.extend(o,e),o.payment=r.payment,o.amount=d,o.months=n,o.termLength=r.months||n,o.apr=t,o})}return e})}).then(function(n){var r,o=Object.assign({},n);if(o.promo_prequal_enabled){var i="".concat(l,"/").concat(o.promoId,"/").concat(d,"/").concat(t.pageType);V[i]||(h.default.isPromoSet(o.promoId)||(o.promoId=null),r=new p.default(p.default.generatePromoPrequalConfig(Object.assign(s.default.get(),{use_promo:!0}),o,f.default.MODE_MODAL,window.location.href)),V[i]=r),V[i].open()}else r=new Y({amount:o.amount,apr:o.apr,config:o,DOMNode:e,months:o.months,payment:o.payment,termLength:o.termLength});return r})}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(i,d.default);var t,n,r,o=E(i);function i(){var e,t,n,r,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var f=s.DOMNode;delete s.DOMNode;var d=H?"2x":"",p="";if(s.renderedPromo){(n=s.renderedPromo.config.images["hero".concat(d)])&&(n="background-image: url('".concat(n,"')")),r=s.renderedPromo.config.images["logo".concat(d)],t="";var h=s.renderedPromo.config.promo_style;"fast"!==h&&(y.default.trackImpression(D),t=s.renderedPromo.button.replace(/affirm/gi,'<span class="__affirm-logo __affirm-logo-primary __ligature__affirm_full_logo__ __processed">Affirm</span>')),e=o.call(this,g.default.extend({name:"affirm_learn_more_splitpay",template:"templates/learn_more_split_pay.html",template_args:{color:s.renderedPromo.config.styles.color||"auto",copy:{tagline:s.renderedPromo.headline,promo:s.renderedPromo.tagline,cta:t,section_1:i.getSection(s.renderedPromo.content_space_1),section_2:i.getSection(s.renderedPromo.content_space_2)},fontFamily:s.renderedPromo.config.styles.fontFamily||"inherit",footer:s.renderedPromo.footer,hero_image:n,logo_image:r,modal_class:q(n,r,h)}},s))}else{var v,A,b,_=!!s.amount;v=_?U:B,a={},g.default.extend(a,v),g.default.extend(a,s.config),g.default.isMobile()&&s.source&&("function"==typeof s.source.trigger&&s.source.trigger("loading"),null!=s.source.product_key&&u.default.setProduct(s.source.product_key)),n=a["heroImage".concat(d)],r=a["logo".concat(d)];var w=null!=s.apr&&0===parseFloat(s.apr);if(_){t="",b=a.pricingTemplate;var E=a&&0===a.apr&&3===a.termLength&&a.termLengthIntervals&&1===a.termLengthIntervals.length;E?p+="affirm_fast ":(y.default.trackImpression(N),t='Just select <span class="__affirm-logo __affirm-logo-primary __ligature__affirm_full_logo__ __processed">Affirm</span> at checkout.'),b||E||(b=w?C:R),b=(b=(b=(b=b.replace(/{payment}/gi,"$".concat((0,m.moneyWithCents)(s.payment)))).replace(/{amount}/gi,"$".concat((0,m.moneyWithCents)(s.amount)))).replace(/{apr}/gi,parseInt(100*s.apr,10))).replace(/{term_length}/gi,s.termLength),A=a.headlineTemplate}else{(b=a.pricing)||(b=w?M:T),A=a.headline}if(!A)A=!s.termLength||[3,6,12].indexOf(s.termLength)>-1?P:I;n&&(n="background-image: url('".concat(n,"')")),p+=q(n,r),e=o.call(this,g.default.extend({name:"affirm_learn_more_splitpay",template:"templates/learn_more_split_pay.html",template_args:{color:a.styles.color||"auto",copy:{tagline:A,promo:b,cta:t,section_1:i.getSection(a.contentSpace1),section_2:i.getSection(a.contentSpace2)},fontFamily:a.styles.fontFamily||"inherit",footer:a.footer,hero_image:n,logo_image:r,modal_class:p}},s))}e.on("continue",function(){return e.trigger("close")});var O=!1;return a=(0,l.findAffirmConfig)(f),e.on("close",function(){O||((a=(0,l.findAffirmConfig)(f))&&"function"==typeof a.onCloseModal&&a.onCloseModal(),O=!0,c.default.trigger("learnMore:close"))}),e.open(a?a.onOpenModal:void 0),s.DOMNode=f,k(e)}return t=i,r=[{key:"getSection",value:function(e){return j[e]}},{key:"openModal",value:function(e,t){return Q(e,t)}},{key:"setupSiteElements",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.length,o=0;o<r;o+=1){var i=(t=e[o]).getAttribute("data-modal-id"),a=t.getAttribute("data-page-type")||"product",s=t.getAttribute("data-promo-id");t.getAttribute("data-amount")&&console&&console.error("Affirm: data-amount not valid in site modals. Element",t),t.style.cursor||(t.style.cursor="pointer");var u={modalId:i,pageType:a,promoId:s,type:"site_wide_modal"};(0,l.setAffirmConfig)(t,u);var c=s||i;c?y.default.trackImpression("Custom ".concat(F)):y.default.trackImpression("Default ".concat(F)),h.default.isPromoSet(c)&&y.default.trackImpression("Promo Set Promo Modal");var f=t.innerText||t.innerHTML;t.setAttribute("aria-label","".concat(f," - Affirm Financing (opens in modal)")),t.onclick=function(e,t){return function(){return Q(e,t)}}(t,u),n.trackPromos&&y.default.trackEvent("Promo: Learn More Click Attached",{elapsedTime:Date.now()-n.promoTimer,version:"site"})}}},{key:"setupProductElements",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.length,o=0;o<r;o+=1){var i=(t=e[o]).getAttribute("data-amount"),a=t.getAttribute("data-modal-id"),s=t.getAttribute("data-page-type"),u=t.getAttribute("data-promo-id");console&&(i||console.error("Affirm: data-amount attribute is required in product modals",t),i<5e3&&console.error("Affirm: data-amount is lower than the minimum ($50)."),i>175e4&&console.error("Affirm: data-amount is higher than the maximum ($17500).")),t.style.cursor||(t.style.cursor="pointer");var c={amount:i,modalId:a,pageType:s,promoId:u,type:"product_page_modal"};(0,l.setAffirmConfig)(t,c);var f=u||a;f?y.default.trackImpression("Custom ".concat(L)):y.default.trackImpression("Default ".concat(L)),h.default.isPromoSet(f)&&y.default.trackImpression("Promo Set Promo Modal");var d=t.innerText||t.innerHTML;t.setAttribute("aria-label","".concat(d," - Affirm Financing (opens in modal)")),t.onclick=function(e,t){return function(){return Q(e,t)}}(t,c),n.trackPromos&&y.default.trackEvent("Promo: Learn More Click Attached",{elapsedTime:Date.now()-n.promoTimer,version:"product"})}}},{key:"APP_NAME",get:function(){return"Learn More About Affirm"}}],(n=null)&&_(t.prototype,n),r&&_(t,r),i}();t.default=Y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showError=v,t.ErrorModalWidget=void 0;var r=c(n(3)),o=c(n(9)),i=c(n(50)),a=c(n(0)),s=c(n(7)),u=c(n(12));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(!a.default.sniffer.cors||!a.default.sniffer.JSON){var t=a.default.extend({body:"If you continue to have trouble, please contact us at help@affirm.com.",title:"We encountered a problem with your checkout."},e);return alert("".concat(t.title,"\n\n").concat(t.body)),v.trigger("close")}var n=new A(e);return n.open(),n}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,i.default);var t=m(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=a.default.extend({body:"If you continue to have trouble, please contact us at help@affirm.com.",merchantName:r.default&&r.default.merchant||"the Merchant",title:"We encountered a problem with your checkout."},o),c={name:"affirm-error-modal",src:"".concat(r.default.assets_root.replace("affirmjs","afjs_error_modal"),"index.html?").concat(a.default.param(i,!1))};return o.container&&o.iframe_container_css&&(c.container=o.container,c.iframe_container_css=o.iframe_container_css),(e=t.call(this,c)).on("all",function(e,t){return v.trigger(t,e,!1)}),(0,s.default)(g(e),"postMessageListener"),u.default.bind(window,"message",e.postMessageListener),e}return p(n,null,[{key:"APP_NAME",get:function(){return"Affirm Error"}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_ERROR_MESSAGES"}}]),p(n,[{key:"hide",value:function(){var e=this;f(y(n.prototype),"hide",this).call(this),this.trigger("close"),a.default.delay(function(){return e.remove()},300)}},{key:"postMessageListener",value:function(e){var t;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){}t&&t.id===n.POST_MESSAGE_ID&&"close"===t.name&&this.hide()}}]),n}();t.ErrorModalWidget=A,["on","off","trigger"].forEach(function(e){v[e]=o.default.prototype[e]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=y(n(2)),o=y(n(5)),i=y(n(3)),a=n(8),s=y(n(9)),u=y(n(29)),c=y(n(122)),l=y(n(31)),f=y(n(126)),d=y(n(136)),p=y(n(141)),h=y(n(11)),m=y(n(0)),g=y(n(1));function y(e){return e&&e.__esModule?e:{default:e}}function v(e){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _.set(e)}["on","off","trigger"].forEach(function(e){_[e]=s.default.prototype[e]}),m.default.extend(_,{add:function(){var e=this;this.data.items||(this.data.items={});for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){[].concat(t).forEach(function(t){var n=t;["sku","unit_price"].forEach(function(e){if(null==n[e])throw"No ".concat(e," given for item")}),n.qty||(n.qty=1),["qty","unit_price"].forEach(function(e){if(n[e]=parseInt(n[e],10),"NaN"===n[e].toString())throw"item ".concat(e," must be an integer")}),e.data.items[n.sku]&&e.data.items[n.sku].sku===n.sku?e.data.items[n.sku].qty+=parseInt(n.qty,10):e.data.items[n.sku]=n})}),this},attr:function(e,t){if("items"===e)return t&&this.items()?(this.empty(),this.add(t)):this.items();if(["productKey","financial_product_key"].indexOf(e)>-1)return null!=t?this.setProduct(t):this.getProduct();if(["publicApiKey","public_api_key"].indexOf(e)>-1)return null!=t?o.default.setPublicApiKey(t):o.default.getPublicApiKey();var n,r;n=e.match(/^[^.]+(\.[^.]+)+$/)?e.split("."):e.match(/^[^[\]]+(\[[^[\]]+])+$/)?e.replace("][","]").replace(/]$/,"").split(/]|\[/):[e];for(var i=this.data;r=n.shift();){if(null!=t&&0===n.length)return i[r]=t,this;if(null==i[r]){if(null==t)return null;i[r]={}}i=i[r]}return null!=t?this:i},checkCaasParams:function(e){if("string"!=typeof e.merchant.caas)throw new Error("Caas parameter must be string.");if(!this.isModal(e))throw new Error("Credit as a Service is only compatible with mode modal.")},checkData:function(e,t){var n=this;if(Array.isArray(t)){var r=[];return t.forEach(function(e){r.push(n.checkData(null,e))}),r}if(m.default.isObject(t)){var o={};return Object.keys(t).forEach(function(e){o[e]=n.checkData(e,t[e])}),o}return"name"===e&&"string"==typeof t?{full:t}:void 0===t?null:t},cleanData:function(){return this.checkData(null,m.default.extend({},this.data))},close:function(){g.default.trackUserInteraction("Inline Checkout closed"),f.default.hide(this.inlineCheckoutWidget)},currentProduct:null,empty:function(){return this.data.items={},this},get:function(e){return this.attr(e)},getProduct:function(){return this.currentProduct},init:function(){var e,t=this;this.data={items:{}},this._data=this.data,e=window.affirm.checkout&&window.affirm.checkout._?window.affirm.checkout._:[],m.default.delay(function(){e.forEach(function(e){t[e[0]].apply(t,A(e[1]))}),t.ready()})},inline:function(e){var t=this;return(0,a.getInlineExperiment)(!0).then(function(n){if(n){null!=e.data&&t.set(e.data);var r={container:e.merchant&&e.merchant.inline_container,data:Object.assign({},t.payload())};g.default.trackImpression("Inline Checkout initiated",{checkoutData:t.data}),t.inlineCheckoutWidget?t.inlineCheckoutWidget.update(r):(t.inlineCheckoutWidget=new p.default(r),t.inlineCheckoutWidget.on("removed",function(){return delete t.inlineCheckoutWidget})),f.default.show(t.inlineCheckoutWidget)}})},isModal:function(e){return e&&e.metadata&&e.metadata.mode===h.default.MODE_MODAL},isReady:!1,items:function(){var e=this;this.data.items||(this.data.items={});var t=[];return m.default.isObject(this.data.items)&&Object.keys(this.data.items).forEach(function(n){t.push(e.data.items[n])}),t},open:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=t.checkout_data&&this.set(t.checkout_data),!(0,c.default)())return!1;var n=this.get("metadata")||{};t.merchant&&t.merchant.use_vcn||g.default.trackEvent("Checkout initiated",{widgetMode:n.mode});var r=m.default.extend({checkoutPayload:Object.assign({},this.payload()),mode:n.mode||"redirect"},this.cleanData());return t.onFail&&(r.onFail=t.onFail),t.onSuccess&&(r.onSuccess=t.onSuccess),this.checkoutWidget||(t.modalContainerId?(r.checkoutPayload.metadata=Object.assign({external_modal:!0},r.checkoutPayload.metadata),this.checkoutWidget=new d.default(r,{container:document.getElementById(t.modalContainerId),iframe_container_css:{position:"relative",height:"100%"}})):this.checkoutWidget=new d.default(r),this.checkoutWidget.on("unload",function(){return delete e.checkoutWidget}),this.checkoutWidget.open()),this},openVcn:function(e){var t=m.default.extend(e,{checkout_data:{merchant:{use_vcn:!0}}}),n=t.checkout_data.metadata||{};if(g.default.trackEvent("VCN Checkout initiated",{widgetMode:n.mode}),n.mode=n.mode||d.default.MODE_POPUP,t.checkout_data.metadata=n,!t.success||!t.error)throw"success and error callbacks must be specified";t.onFail=t.error,t.onSuccess=t.success,delete t.error,delete t.success,this.open(t)},payload:function(){var e=o.default.getPublicApiKey();return m.default.extend({api_version:"v2",bluecore_distinct_id:l.default.getDistinctID(e),bluecore_token:l.default.getToken(e),config:{financial_product_key:_.getProduct()},merchant:{public_api_key:e},meta:{__affirm_tracking_uuid:r.default.localDeviceId,release:null!=(null!=i.default?i.default.version:void 0),user_timezone:m.default.getUserTimeZone()}},this.cleanData())},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.open(m.default.extend(e,{redirect:!0}))},ready:function(e){e?this.isReady?"function"==typeof e&&e():this.on("ready",e):(this.trigger("ready"),this.isReady=!0)},reset:function(){return this.data={items:{}},this._data=this.data,this},set:function(e,t){var n=this;if(!t&&"object"===v(e)){var r=m.default.extend({},e);return["financial_product_key","items","productKey","public_api_key","publicApiKey"].forEach(function(e){r[e]&&(n.attr(e,r[e]),delete r[e])}),this.data=m.default.extend(this.data||{},r),this._data=this.data,d.default.isCaas(this.data)&&this.checkCaasParams(this.data),this.data.config&&this.data.config.public_api_key&&o.default.setPublicApiKey(this.data.config.public_api_key),this}return this.attr(e,t)},setProduct:function(e){var t=this;e!==this.currentProduct&&(this.currentProduct=e,this.trigger("product_changed",this.getProduct()),m.default.delay(function(){return u.default.get(t.currentProduct)})),g.default.tag({productKey:e})}}),_.open_vcn=_.openVcn,_.init();var w=_;t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(3)),o=s(n(0)),i=s(n(123)),a=s(n(24));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={},f={get:function(e,t){l[e]?o.default.delay(function(){return t.call(window,l[e])}):i.default.get(e).then(function(e,n){return t(n)})},put:function(e,t){l[e]=t},render:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=t;o.ASSETS_ROOT||(o.ASSETS_ROOT=r.default.assets_root);var i=(0,a.default)(o),s=function(e){return i[e]||""},c=n.match(/{{! *([a-zA-Z0-9$_.]+) *}}/g);c&&c.forEach(function(t){var r=n.indexOf(t),o=u(t.match(/{{! *([a-zA-Z0-9$_.]+) *}}/),2);e=o[1];var i="{{/ *".concat(e," *}}"),a=n.match(i),c=a.index,l=s(e);n=l?(n=n.replace(t,"")).replace(a[0],""):n.substr(0,r)+n.substr(c+a[0].length)});var l=n.match(/{{ *([a-zA-Z0-9$_.]+) *}}/g);return l?(l.forEach(function(e){var t=u(e.match(/{{ *([a-zA-Z0-9$_.]+) *}}/),2)[1],r=s(t);n=n.replace(new RegExp(e),r)}),n):n}};t.default=f},function(e,t,n){"use strict";var r,o,i,a;n.r(t),n.d(t,"Selectors",function(){return r}),n.d(t,"Sources",function(){return o}),n.d(t,"Events",function(){return i}),n.d(t,"Apps",function(){return a}),function(e){e.wrapper="wrapper"}(r||(r={})),function(e){e.merchantConfig="merchantConfig",e.breakpoints="breakpoints"}(o||(o={})),function(e){e.style="style",e.dataRequest="dataRequest",e.dataResponse="dataResponse",e.open="open",e.close="close"}(i||(i={})),function(e){e.prequal="prequal",e.toast="toast"}(a||(a={}))},function(e,t){var n;n=function(e){var t;return null==e&&(e={}),t={},Object.keys(e).forEach(function(r){var o;if(e.hasOwnProperty(r))return Array.isArray(e[r])?t[r+"_json"]=JSON.stringify(e[r]):"object"==typeof e[r]&&null!==e[r]?(o=n(e[r]),Object.keys(o).forEach(function(e){return t[r+"."+e]=o[e]})):t[r]=e[r]}),t},e.exports=n},function(e,t,n){"use strict";function r(e){var t=e&&e.message&&"function"==typeof e.message.toLowerCase&&e.message.toLowerCase()||"";return t.indexOf("failed to fetch")>-1||t.indexOf("network request failed")>-1}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return u});var r=n(17),o={};function i(e){window.Rollbar&&"function"==typeof window.Rollbar.warning&&window.Rollbar.warning(e)}function a(){var e=navigator.userAgent;return!(!Object(r.isIosMajorVersion)(e,12)&&!Object(r.isMacosxVersion)(e,10,14)||!Object(r.isSafariBased)(e)&&!Object(r.isMacEmbeddedBrowser)(e))||!!(Object(r.isChromiumBased)(e)&&Object(r.chromeMajorVersion)(e)<67)}function s(e,t,n,r,a){try{var s;if(n){var u=new Date(Date.now());u.setTime(u.getTime()+24*n*60*60*1e3),s=u.toUTCString()}else s="";o.buildCookie(e,t,r||"",s,a)}catch(e){i(e)}}function u(){try{o.buildCookie("cookietest","1","","","None");var e=-1!==document.cookie.indexOf("cookietest=");return o.buildCookie("cookietest","1","","Thu, 01 Jan 1970 00:00:01 GMT","None"),e}catch(e){return i(e),!1}}function c(e){try{var t=window.location.hostname.split(".");t.slice(0,-1).forEach(function(n,r){var i=t.slice(r).join(".");o.buildCookie(e,"",i,"Thu, 01 Jan 1970 00:00:01 GMT")})}catch(e){i(e)}}function l(e){try{for(var t=document.cookie.split(";"),n=0;n<t.length;n+=1){var r=t[n],o=new RegExp("s*"+e+"=(.*)").exec(r);if(o&&o.length>1)return o[1]}}catch(e){i(e)}return null}o.buildCookie=function(e,t,n,r,o){void 0===o&&(o="Lax");var i=r?"; expires="+r:"",s=n?"; domain="+n:"",u="https:"===location.protocol&&"None"===o?"; Secure":"",c=e+"="+t+i+s+"; path=/";a()?document.cookie=c:document.cookie=c+"; SameSite="+o+u},o.create=s,o.enabled=u,o.erase=c,o.read=l,o.upsert=function(e,t,n,r,o){try{l(e)&&c(e),s(e,t,n,r,o)}catch(e){i(e)}},o.isSameSiteNoneIncompatible=a,t.a=o},function(e,t,n){n(94);var r=n(95),o=n(6);e.exports={error:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),r.ieVersion()<=8?console.error(o.formatArgsAsString(e)):console.error.apply(console,e)},info:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),r.ieVersion()<=8?console.info(o.formatArgsAsString(e)):console.info.apply(console,e)},log:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),r.ieVersion()<=8?console.log(o.formatArgsAsString(e)):console.log.apply(console,e)}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,(0,((r=n(111))&&r.__esModule?r:{default:r}).default)();var o=function(e,t){var n=e.split(".");return function e(t,n,r){var o=n.shift();if(0===n.length){var i;if(o in t)for(i in t[o])t[o].hasOwnProperty(i)&&!r.hasOwnProperty(i)&&(r[i]=t[o][i]);t[o]=r}else o in t||(t[o]={}),e(t[o],n,r);return t}(window.affirm,n,t)};t.default=o},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(5)),i=c(n(3)),a=(c(n(28)),c(n(0))),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(121));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}var l={};function f(e,t){var n=a.default.getDomain(i.default.assets_root),r="".concat(n,"0/merchant/").concat(o.default.getPublicApiKey(),"/product/").concat(e,"/config.json"),u="_".concat(Math.round(1e14*Math.random()));l.callbacks[u]=function(n){l.products[e]=n;try{t(n)}catch(e){}try{i.default.merchant=n.merchant_name}catch(e){}},l.__callbacks=l.callbacks,s.loadjs("".concat(r,"?callback=affirm.product.__callbacks.").concat(u))}Object.assign(l,{callbacks:[],clearCache:function(){this.products={},this.__products=this.products},get:function(e,t){var n=this;if(this.products[e]&&"function"==typeof t)return a.default.delay(function(){return t(n.products[e])});o.default.getPublicApiKey()&&f(e,t),o.default.on("public_api_key_set",function n(){f(e,t),o.default.off("public_api_key_set",n)})},products:{}});var d=l;t.default=d},function(e,t,n){"use strict";n.r(t),t.default={getScrollbarWidth:function(){var e=document.createElement("div");e.style.msOverflowStyle="scrollbar",e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),t-r},hasVerticalScrollbar:function(){return window.innerWidth>document.documentElement.clientWidth}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=["PreSeededApiKeyDirect","27GDB3KH87ZPDICH","JWT2LAPPJQTDK2SW","ZY2590ABAF62S9KM"],o=function(e){return-1!==r.indexOf(e)},i={getDistinctID:function(e){if(o(e))return window.triggermail&&window.triggermail.lytics&&window.triggermail.lytics.cookie&&window.triggermail.lytics.cookie.props&&window.triggermail.lytics.cookie.props.distinct_id},getToken:function(e){if(o(e))return window.triggermail&&window.triggermail.lytics&&window.triggermail.lytics.config&&window.triggermail.lytics.config.token}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),o=a(n(129)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r.default);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this,r.id)).options=i.default.extend({container:document.body,styles:{height:"100%",overflow:"hidden",width:"100%"}},r),e.state={isLoaded:!1,isShown:!1,shouldCallSizeChange:!1,resizingIframe:!1},e.registerEventListeners(),e}return c(n,null,[{key:"enableHeaderAuth",value:function(){return!(i.default.isAffirmWebView()||i.default.sniffer.cookies&&i.default.sniffer.localstorage)}},{key:"IFRAME_CLASSNAME",get:function(){return"affirm-iframe-widget"}},{key:"IFRAME_PERMISSIONS",get:function(){return{"allow-forms":!0,"allow-modals":!0,"allow-popups":!0,"allow-same-origin":!0,"allow-scripts":!0}}},{key:"IFRAME_TITLE",get:function(){return"Affirm"}}]),c(n,[{key:"append",value:function(){var e=i.default.getElementById(this.options.container);if(!e)throw new Error("Widget container does not exist");e.appendChild(this.$iframe)}},{key:"detach",value:function(){var e=this.$iframe.parentElement;e&&e.removeChild(this.$iframe),delete this.$iframe,this.state.isLoaded=!1,this.state.isShown=!1}},{key:"generateFrame",value:function(){var e=this;this.$iframe=document.createElement("iframe"),i.default.setElementAttrs(this.$iframe,{allowScroll:"no",allowTransparency:!0,class:n.IFRAME_CLASSNAME,frameborder:0,height:this.options.styles.height,id:this.options.id,sandbox:Object.keys(this.constructor.IFRAME_PERMISSIONS||{}).join(" "),title:this.constructor.IFRAME_TITLE,width:this.options.styles.width}),Object.keys(this.options.styles).forEach(function(t){e.$iframe.style[t]=e.options.styles[t]})}},{key:"hide",value:function(){this.state.isShown&&(this.$iframe.style.display="none",this.state.isShown=!1,this.trigger("hidden",{},!1))}},{key:"load",value:function(){var e=this;if(!this.state.isLoaded){if(!this.options.src)throw new Error("src is required");this.$iframe||this.generateFrame(),this.$iframe.onload=function(){e.src()&&(e.state.isLoaded=!0,e.trigger("iframeReady"))};var t=this.setupPostMessageTunnel();this.src(t),this.append(),this.postMessageClient.setTargetWindow(this.$iframe.contentWindow)}}},{key:"registerEventListeners",value:function(){this.on("sizeChange",this.resize),this.on("closeRequest",this.remove)}},{key:"reload",value:function(e){this.options=Object.assign(this.options,e),this.remove(!0),this.load()}},{key:"remove",value:function(e){this.$iframe&&(o.default.removeClient(this.postMessageClient),delete this.postMessageClient,this.detach(),e||this.trigger("removed",{},!1))}},{key:"resize",value:function(e){var t=this;if(i.default.isSafariDesktop())if(this.state.resizingIframe){var n=i.default.getElementById(this.options.container).getBoundingClientRect();({width:n.width,height:n.height}).height<e.height&&(this.updateContainerSize(e),this.state.shouldCallSizeChange=!0,setTimeout(function(){t.state.shouldCallSizeChange=!1},200))}else this.updateContainerSize(e),this.state.resizingIframe=!0,setTimeout(function(){t.state.resizingIframe=!1},100);else this.updateContainerSize(e)}},{key:"updateContainerSize",value:function(e){var t;this.$iframe&&e&&void 0!==e.height&&("string"==typeof e.height?t=e.height:"number"==typeof e.height&&(t="".concat(e.height,"px")),this.$iframe.style.height=t)}},{key:"setupPostMessageTunnel",value:function(){var e=this;return this.postMessageClient?this.postMessageClient.url:(this.postMessageClient=o.default.createClient(this.options.src,{name:this.options.id}),this.postMessageClient.onClientResize(function(t){if(t&&!e.state.shouldCallSizeChange){var n=t.data;n&&e.trigger("sizeChange",n)}}),this.postMessageClient.onClose(function(){e.trigger("closeRequest")}),this.postMessageClient.onInitialized(function(){e.trigger("postMessageReady")}),this.postMessageClient.onStateChange(function(t){if(t){var n=t.data.state;n&&e.trigger("stateChange",n)}}),this.postMessageClient.onStepChange(function(t){if(t){var n=t.data.step;n&&e.trigger("stepChange",n)}}),this.postMessageClient.on("InlineCheckoutOpenEduModal",function(){e.trigger("openLearnMore")}),this.postMessageClient.url)}},{key:"show",value:function(){this.state.isShown||(this.$iframe.style.display=this.options.styles.display||"block",this.state.isShown=!0,this.trigger("shown",{},!1))}},{key:"src",value:function(e){return e&&(this.$iframe.src=e),this.$iframe.src}}]),n}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendParams=t.getClientParams=t.arrayFindBy=t.uuidv4=t.getOrigin=void 0;var r=n(133);t.getOrigin=function(e){return"function"==typeof URL?new URL(e).origin:r.getOriginForIE(e)},t.uuidv4=function(){if("function"==typeof URL&&"function"==typeof URL.createObjectURL){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}return r.uuidForIE()},t.arrayFindBy=function(e,t){return e.filter(t)[0]},t.getClientParams=function(e){if("function"==typeof URLSearchParams){var t=new URLSearchParams(e);return{id:t.get("frameId"),origin:t.get("origin")}}var n=r.getQueryStringParamsForIE(e);return{id:n.frameId||null,origin:n.origin||null}},t.appendParams=function(e,t){if("function"==typeof URL){var n=new URL(e);return Object.keys(t).forEach(function(e){n.searchParams.append(e,t[e])}),n.href}return r.appendParamsForIE(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROTOCOL_VERSION=void 0,t.PROTOCOL_VERSION=1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppRegistry=t.App=void 0;var r=g(n(2)),o=g(n(5)),i=g(n(3)),a=g(n(165)),s=g(n(13)),u=g(n(1)),c=g(n(15)),l=g(n(16)),f=n(23),d=g(n(10)),p=g(n(11)),h=g(n(0)),m=n(14);function g(e){return e&&e.__esModule?e:{default:e}}function y(e){"@babel/helpers - typeof";return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var T={},M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(n,a.default);var t=S(n);function n(e){var r;_(this,n);var o=h.default.getFrontendUrl("apps/".concat(e,"/"));return(r=t.call(this,o)).appName=e,r.configKeys=[],r.breakpointIndex=null,r.setupListeners(),r.processBreakpoints(),r.wrapper.setAttribute("data-test-id","".concat(e,"-wrapper")),r.frame.setAttribute("data-test-id","".concat(e,"-frame")),r.frame.setAttribute("title","Affirm ".concat(e)),r}return E(n,[{key:"open",value:function(e){this.send(f.Events.open,I({merchantPublicApiKey:o.default.getPublicApiKey()},e))}},{key:"close",value:function(){k(P(n.prototype),"close",this).call(this),window.removeEventListener("orientationchange",this.processBreakpoints),window.removeEventListener("resize",this.processBreakpoints)}},{key:"setupListeners",value:function(){var e=this;this.on(f.Events.style,this.applyStyles),this.on(f.Events.dataRequest,function(t){t.sources.forEach(function(t){return e.handleDataRequest(t)})}),this.on(f.Events.open,function(e){var t=e.app,n=e.data;t===f.Apps.prequal?function(e){if(!T[e]){var t=c.default.get();T[e]=new l.default(I({},t,{urlParams:{unit_price:e,device_id:r.default.localDeviceId,merchant_name:t.merchant_name,referring_url:encodeURIComponent(window.location.href),webhook_session_id:t.webhook_session_id||h.default.getWebhookSessionId()}}))}T[e].open(),T[e]}(n.amount):R.open(t,n)}),s.default.on("config",function(t){e.sendMerchantConfig(t)}),this.on(f.Events.close,function(){return e.close()}),window.addEventListener("orientationchange",function(){return e.processBreakpoints()}),window.addEventListener("resize",function(){return e.processBreakpoints()})}},{key:"handleDataRequest",value:function(e){var t,n=e.source,r=e.query,o=(b(t={},f.Sources.merchantConfig,this.handleMerchantConfigRequest),b(t,f.Sources.breakpoints,this.handleBreakpointRequest),t)[n];o&&o.call(this,r)}},{key:"handleBreakpointRequest",value:function(e){var t=e.breakpoints;this.breakpoints=t,this.processBreakpoints()}},{key:"getBreakpointIndex",value:function(e){var t=(0,m.findIndex)(this.breakpoints,function(t){return e<=t});return t<0?this.breakpoints.length:t}},{key:"processBreakpoints",value:function(){if(this.breakpoints){var e=this.getBreakpointIndex(window.innerWidth);e!==this.breakpointIndex&&(this.breakpointIndex=e,this.send(f.Events.dataResponse,b({},f.Sources.breakpoints,{breakpointIndex:this.breakpointIndex})))}}},{key:"handleMerchantConfigRequest",value:function(e){var t=e.keys;this.configKeys=t,this.sendMerchantConfig(i.default)}},{key:"getMerchantConfig",value:function(e){var t={};return this.configKeys.forEach(function(n){var r=m.get.apply(void 0,[e].concat(v(n.split("."))));void 0!==r&&(t[n]=r)}),t}},{key:"sendMerchantConfig",value:function(e){var t=this.getMerchantConfig(e);Object.keys(t).length&&this.send(f.Events.dataResponse,b({},f.Sources.merchantConfig,t))}},{key:"applyStyles",value:function(e){var t=e.styles,n=b({},f.Selectors.wrapper,this.wrapper);t.forEach(function(e){var t=e.selector,r=e.style;n[t]&&Object.assign(n[t].style,r)})}}]),n}();t.App=M;var C=function(){function e(){_(this,e),this.appRegistry={},this.eligible=p.default.isModalSupported()}return E(e,[{key:"open",value:function(e,t){var n=this;return this.eligible.then(function(r){try{return r&&(n.appRegistry[e]||(n.appRegistry[e]=new M(e)),n.appRegistry[e].open(t)),r}catch(e){return void u.default.trackActionLog("AppService Open Error",{errorMessage:e&&e.message})}})}},{key:"close",value:function(e){var t=this.appRegistry[e];t&&(t.close(),delete this.appRegistry[e])}},{key:"reset",value:function(){Object.keys(this.appRegistry).forEach(this.close)}}]),e}();t.AppRegistry=C;var R=new C,x=(0,d.default)(R,["close","open","reset"]);t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(51)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,r.default);var t=u(n);function n(e){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var a={"-webkit-tap-highlight-color":"transparent",display:"flex",justifyContent:"center",overflowY:"auto",position:"fixed",bottom:"0",left:"0",right:"0",top:"0",zIndex:r.default.MAX_ZINDEX_VALUE,margin:"0",border:"0",padding:"0"};o.default.isMobile()&&(a["-webkit-overflow-scrolling"]="touch",a["-webkit-transform"]="translate3d(0, 0, 0)",a.transform="translate3d(0, 0, 0)",a.overflow="scroll",a.background="#fff");var s=o.default.extend({css:{overflowX:"hidden",overflowY:"auto",height:"100%",width:"100%",margin:"0",border:"0",padding:"0"},iframe_container_css:a,on:{close:function(){return i.close()}}},e);return i=t.call(this,s)}return n}();t.default=l},function(e,t,n){"use strict";function r(e,t){var n,o=null;return Array.isArray(e)?(o=[],e.forEach(function(e){n=r(e,t),t(n)&&o.push(n)})):null!==e&&"object"==typeof e?(o={},Object.keys(e).forEach(function(i){n=r(e[i],t),t(n)&&(o[i]=n)})):t(e)&&(o=e),o}n.r(t),n.d(t,"default",function(){return r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(8),o=s(n(0)),i=s(n(1)),a=s(n(37));function s(e){return e&&e.__esModule?e:{default:e}}var u=["TEST_BLACKLISTED_MERCHANT"],c="promo_set",l="api/promos/v2",f={all:"all",ala:"ala",modal:"modal"},d={promo:{ala:"Buy in monthly payments with Affirm on orders over $50. Learn more",html_ala:'Buy in monthly payments with Affirm on orders over $50. <a class="affirm-modal-trigger">Learn more</a>',button:"Just select Affirm at checkout.",config:{calculate_ala_option:"longest_loan_term",images:{hero:null,hero2x:null,logo:null,logo2x:null},promo_prequal_enabled:!1,styles:{color:null,fontFamily:null}},content_space_1:"quick_and_easy",content_space_2:"no_hidden_fees",footer:"Subject to credit check and approval. Down payment may be required. Available for purchases over $50. Estimated payment amount excludes taxes and shipping fees. Affirm loans are made by Cross River Bank, a New Jersey State Chartered Commercial Bank, Member FDIC. See www.affirm.com/faqs for details.",headline:"Make easy monthly payments for your purchase",tagline:"Rates from 10-30% APR"},offer:{terms:[],expiry:null}};var p={getPromoConfig:function(e,t,n,r){var a=o.default.getApiUrl("promos/".concat(e,"/").concat(t));return n&&(a+="?promo_external_id=".concat(n)),window.fetch(a).then(function(e){return e.ok?e.json().then(function(t){return i.default.trackAPI(e.url,e.status,t),t}):e.json().then(function(t){return i.default.trackAPI(e.url,e.status,t.message),r})})},getPromoResponse:function(e,t,n){var s,u=f[n]||f.all;return(0,r.getTuftAndNeedleSplitPayExperiment)(!0).then(function(n){return(0,r.getAdaptiveCheckoutExperiment)(!0).then(function(i){var c="".concat(l,"/").concat(e).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.default)(e,function(e){return""!==e&&null!==e&&void 0!==e});return e&&Object.keys(t).length?"?".concat(Object.keys(t).map(function(e){return t[e]?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e])):""}).join("&")):""}({amount:t.amount,field:u,items:(0,r.getItemsInput)(t.items),logo_color:t.logoColor,logo_type:t.logoType,page_type:t.pageType,promo_external_id:t.promoId,show_cta:t.showCTA,split_pay_go_enabled:n||null,use_adaptive:i||null}));return s=o.default.getFrontendUrl(c),window.fetch(s,{credentials:"include"})})}).then(function(e){return e.ok?e.json().then(function(t){return i.default.trackAPI(e.url,e.status,t),t}):e.json().then(function(t){return i.default.trackAPI(e.url,e.status,t.message),d})}).catch(function(e){return i.default.trackAPI(s,500,"Promo fetch error message: ".concat(e?e.message:"FALSY ERROR OBJECT")),d})},useV2Api:function(e,t){var n,r=-1!==u.indexOf(e);return t?(n=t)&&n.indexOf&&0===n.indexOf(c)&&!r:!r},DEFAULT_PROMO_RESPONSE:d,TEMPLATE_FIELD:f};t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(5)),o=u(n(3)),i=u(n(19)),a=u(n(0)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c={};var l={getEstimate:function(e,t){var n,u=e.amount,l=e.apr,f=e.months,d=r.default.getPublicApiKey(),p=new Date,h="".concat(p.getUTCFullYear(),"/").concat(p.getUTCMonth()+1,"/").concat(p.getUTCDate()),m=[u,l,f,h],g=c[m],y="".concat(a.default.getDomain(o.default.payments_url_base),"promos/payment_estimate_path");return g?n=g:(n=window.fetch("".concat(y,"/").concat(d,"/").concat(l,"/").concat(u,"/").concat(f,"?date=").concat(h)).then(function(e){return e.ok?e.json().then(function(t){return{json:t,status:e.status,url:e.url}}):e.json().then(function(t){return s.default.trackAPI(e.url,e.status,t.message),Promise.reject("Could not get an estimate for apr: ".concat(l,", amount: ").concat(u,", months: ").concat(f,". Error: ").concat(t.error))})}).then(function(t){var n=t.json,r=t.status,o=t.url;s.default.trackAPI(o,r,n.disclosure);var a=n;return a.open_modal=function(t){var n,r,o,c;t&&"function"==typeof t.preventDefault&&t.preventDefault(),s.default.trackUserInteraction("Promo Modal",s.default.USER_ACTIONS.CLICK),new i.default({amount:u,apr:l,disclosure:(n=a.payment,r=a.disclosure,o=Math.floor(n/100),c=n%100,c=c<10?"0".concat(c):c,"$".concat(o,".").concat(c,"/mo ").concat(r[0].toLowerCase()).concat(r.slice(1))),DOMNode:e.elem,months:f,payment:a.payment,termLength:a.months})},a}).catch(function(e){return Promise.reject("Could not get an estimate for apr: ".concat(l,", amount: ").concat(u,", months: ").concat(f,". Error: ").concat(e.error))}),c[m]=n),t&&n.then(t),n}};l.get_estimate=l.getEstimate;var f=l;t.default=f},function(e,t){e.exports=function(e){return-1!==e.indexOf("Opera")||-1!==e.indexOf("OPR")?"Opera":-1!==e.indexOf("Edge")?"Edge":-1!==e.indexOf("Chrome")?"Chrome":-1!==e.indexOf("Safari")?"Safari":-1!==e.indexOf("Firefox")?"Firefox":-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident")?"IE":"Other"}},function(e,t){function n(e){return Array.isArray(e)}function r(e){return"object"==typeof e&&!n(e)}e.exports={isArray:n,isObject:r,isPlainObject:function(e){return r(e)&&"[object Object]"===String(e)}}},function(e,t){var n=["ssn","cvc","dob","name","phone","email","line1","address","zipcode","ssn_last4","card_number","phone_number","account_number"];e.exports=function e(t,r){if(void 0===t||null===t||"boolean"==typeof t)return t;if("string"==typeof t||"number"==typeof t)return r?(""+t).replace(/[0-9a-z]/gi,"*"):t;if(Array.isArray(t))return t.map(function(t){return e(t,r)});if("object"==typeof t){var o={};return Object.keys(t).forEach(function(i){o[i]=e(t[i],function(e){return-1!==n.indexOf(e)}(i)||r)}),o}return null}},function(e,t,n){var r,o;!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in i)i[u]&&(s+="; "+u,!0!==i[u]&&(s+="="+i[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(o[c]=u,e===c)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports={parse:function(e){var t,n,r={protocol:null,auth:null,host:null,path:null,hash:null,href:e,hostname:null,port:null,pathname:null,search:null,query:null};if(-1!==(t=e.indexOf("//"))?(r.protocol=e.substring(0,t),n=t+2):n=0,-1!==(t=e.indexOf("@",n))&&(r.auth=e.substring(n,t),n=t+1),-1===(t=e.indexOf("/",n))){if(-1===(t=e.indexOf("?",n)))return-1===(t=e.indexOf("#",n))?r.host=e.substring(n):(r.host=e.substring(n,t),r.hash=e.substring(t)),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),r;r.host=e.substring(n,t),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),n=t}else r.host=e.substring(n,t),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),n=t;if(-1===(t=e.indexOf("#",n))?r.path=e.substring(n):(r.path=e.substring(n,t),r.hash=e.substring(t)),r.path){var o=r.path.split("?");r.pathname=o[0],r.query=o[1],r.search=r.query?"?"+r.query:null}return r}}},function(e,t,n){var r=n(99),o="?",i=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");function a(){return null}function s(e){var t={};return t._stackFrame=e,t.url=e.fileName,t.line=e.lineNumber,t.func=e.functionName,t.column=e.columnNumber,t.args=e.args,t.context=null,t}function u(e,t){return{stack:function(){var n=[];t=t||0;try{n=r.parse(e)}catch(e){n=[]}for(var o=[],i=t;i<n.length;i++)o.push(new s(n[i]));return o}(),message:e.message,name:function(e){var t=e.name&&e.name.length&&e.name,n=e.constructor.name&&e.constructor.name.length&&e.constructor.name;if(!t||!n)return t||n;if("Error"===t)return n;return t}(e),rawStack:e.stack,rawException:e}}e.exports={guessFunctionName:function(){return o},guessErrorClass:function(e){if(!e||!e.match)return["Unknown error. There was no error message to display.",""];var t=e.match(i),n="(unknown)";return t&&(n=t[t.length-1],e=(e=e.replace((t[t.length-2]||"")+n+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[n,e]},gatherContext:a,parse:function(e,t){var n=e;if(n.nested){for(var r=[];n;)r.push(new u(n,t)),n=n.nested,t=0;return r[0].traceChain=r,r[0]}return new u(n,t)},Stack:u,Frame:s}},function(e,t,n){var r=n(6),o=n(48);function i(e,t){var n=t.split("."),o=n.length-1;try{for(var i=0;i<=o;++i)i<o?e=e[n[i]]:e[n[i]]=r.redact()}catch(e){}}e.exports=function(e,t,n){if(t=t||[],n)for(var a=0;a<n.length;++a)i(e,n[a]);var s=function(e){for(var t,n=[],r=0;r<e.length;++r)t="^\\[?(%5[bB])?"+e[r]+"\\[?(%5[bB])?\\]?(%5[dD])?$",n.push(new RegExp(t,"i"));return n}(t),u=function(e){for(var t,n=[],r=0;r<e.length;++r)t="\\[?(%5[bB])?"+e[r]+"\\[?(%5[bB])?\\]?(%5[dD])?",n.push(new RegExp("("+t+"=)([^&\\n]+)","igm"));return n}(t);function c(e,t){return t+r.redact()}return o(e,function e(t,n,i){var a=function(e,t){var n;for(n=0;n<s.length;++n)if(s[n].test(e)){t=r.redact();break}return t}(t,n);return a===n?r.isType(n,"object")||r.isType(n,"array")?o(n,e,i):function(e){var t;if(r.isType(e,"string"))for(t=0;t<u.length;++t)e=e.replace(u[t],c);return e}(a):a},[])}},function(e,t,n){var r=n(6);e.exports=function(e,t,n){var o,i,a,s=r.isType(e,"object"),u=r.isType(e,"array"),c=[];if(s&&-1!==n.indexOf(e))return e;if(n.push(e),s)for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&c.push(o);else if(u)for(a=0;a<e.length;++a)c.push(a);var l=s?{}:[],f=!0;for(a=0;a<c.length;++a)i=e[o=c[a]],l[o]=t(o,i,n),f=f&&l[o]===e[o];return 0==c.length||f?e:l}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(25),i=n(26),a={};a.cookies=i.b,a.cors=function(){return!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest)},a.json=function(){try{return window.JSON.parse(window.JSON.stringify({affirmsniffer:!0})),!0}catch(e){return!1}},a.localStorage=function(){try{return window.localStorage.setItem("affirmsniffer","affirmsniffer"),window.localStorage.getItem("affirmsniffer"),window.localStorage.removeItem("affirmsniffer"),!0}catch(e){return!1}},a.postMessage=function(){return!!window.postMessage},a.thirdPartyCookies=function(e,t){return void 0===t&&(t=!1),function(e){return window.fetch(e,{credentials:"include",headers:{Accept:"application/json"},method:"GET"})}(e).then(function(e){return e.json()}).then(function(n){return!!n.cookie_sent||!t&&a.thirdPartyCookies(e,!0)}).catch(function(e){if(Object(o.a)(e))r.default.trackEvent("Third party cookie check failed",{},.1);else{var t=window.Rollbar||window.affirm&&window.affirm.Rollbar;t&&t.error("Error conducting third party cookie check",e)}return!1})},a.ie11=function(){return!(window.navigator.userAgent.indexOf("Trident")>-1)},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(51)),o=l(n(18)),i=l(n(0)),a=l(n(7)),s=l(n(12)),u=l(n(125)),c=l(n(30));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return y(e)}(this,n)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r.default);var t=g(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var s={"-webkit-tap-highlight-color":"transparent",overflow:"hidden",position:"fixed",bottom:"0",left:"0",right:"0",top:"0",zIndex:r.default.MAX_ZINDEX_VALUE,margin:"0",border:"0",padding:"0"},u={height:"100%",width:"100%",margin:"0",border:"0",padding:"0"};i.default.isMobile()&&(u=i.default.extend({position:"fixed","overflow-y":"scroll","-webkit-overflow-scrolling":"touch","-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)",background:"#fff"},u));var l=i.default.extend({css:{height:"100%",width:"100%",margin:"0",border:"0",padding:"0"},iframe_container_css:s,modalCss:u},e);return(o=t.call(this,l)).isIFrameReady=!1,o.options=i.default.extend(o.defaultOptions,o.options),o.options.src=e.src,i.default.isMobile()||(o.scrollbarWidth=c.default.getScrollbarWidth()),(0,a.default)(y(o),"alignModalAndPage","handleBackgroundClick","modalMessageListener","resetBodyPosition","resetModalAndPageAlignment","setBodyPosition"),o.registerWidgetListeners(),o}return h(n,[{key:"defaultOptions",get:function(){return{minModalHeight:0,resizeHeight:!1,resizeWidth:!1}}},{key:"targetWindow",get:function(){return this.$iframe.contentWindow}}],[{key:"IFRAME_CONTAINER_CLASSNAME",get:function(){return"affirm-sandbox-iframe-container"}},{key:"MODAL_MARGIN",get:function(){return 40}}]),h(n,[{key:"alignModalAndPage",value:function(){var e={},t=this.exceedsViewportHeight();if(void 0===this.bodyPosition&&void 0===this.bodyMarginRight&&(this.bodyPosition=document.body.style.position,this.bodyMarginRight=document.body.style.marginRight),this.bodyHasVerticalScroll){var n;try{var r=getComputedStyle(document.body);n=parseInt(r["margin-right"],10)}catch(e){n=0}i.default.setElementStyle(document.body,{position:"relative",marginRight:"".concat(this.scrollbarWidth+n,"px")}),t||0===this.scrollbarWidth?e.marginRight="0":e.marginRight="".concat(this.scrollbarWidth,"px")}else t&&0!==this.scrollbarWidth?e.marginRight="-".concat(this.scrollbarWidth,"px"):e.marginRight="0";i.default.setElementStyle(this.modal,e)}},{key:"appendTo",value:function(e){var t=i.default.getElementById(e);return this.regenerateIfAlreadyAppended(),this.modal.appendChild(this.$iframe),this.$iframe_container.appendChild(this.modal),t&&t.appendChild&&t.appendChild(this.$iframe_container),this}},{key:"exceedsViewportHeight",value:function(){return this.modalContainerHeight+this.modalVerticalMargins>window.innerHeight}},{key:"generateFrame",value:function(){d(v(n.prototype),"generateFrame",this).call(this);var e=document.createElement("div");e.className=n.IFRAME_CONTAINER_CLASSNAME,i.default.setElementStyle(e,this.options.modalCss),this.modal=e}},{key:"handleBackgroundClick",value:function(e){e.currentTarget===this.$iframe_container&&this.close()}},{key:"maxViewableHeight",value:function(){return window.innerHeight-this.modalVerticalMargins}},{key:"modalMessageListener",value:function(e){var t=o.default.parsePostMessageData(e);if(t&&t.id===u.default.POST_MESSAGE_ID)switch(t.name){case u.default.IFRAME_DIMENSIONS_MESSAGE:this.resizeModal(t);break;case u.default.IFRAME_READY_MESSAGE:this.isIFrameReady=!0;break;case u.default.REQUEST_PARENT_BOUNDS_MESSAGE:this.sendModalBounds()}}},{key:"open",value:function(e){d(v(n.prototype),"open",this).call(this,e),i.default.isMobile()||this.requestModalContentDimensions()}},{key:"optimizeUiCalculations",value:function(e){this.modalContainerHeight=parseInt(e.modalCss.height,10),this.modalVerticalMargins=parseInt(this.modal.style.marginBottom,10)+parseInt(this.modal.style.marginTop,10),this.scrollbarWidth=c.default.getScrollbarWidth()}},{key:"registerWidgetListeners",value:function(){i.default.isMobile()?(this.on("hiding",this.resetBodyPosition),this.on("showing",this.setBodyPosition)):(this.on("hiding",this.resetModalAndPageAlignment),this.on("showing",this.alignModalAndPage),s.default.bind(this.$iframe_container,"click",this.handleBackgroundClick)),s.default.bind(window,"message",this.modalMessageListener)}},{key:"requestModalContentDimensions",value:function(){this.postMessage({name:u.default.REQUEST_IFRAME_DIMENSIONS_MESSAGE})}},{key:"resetBodyPosition",value:function(){void 0!==this.bodyPosition&&(i.default.setElementStyle(document.body,{position:this.bodyPosition}),delete this.bodyPosition)}},{key:"resetModalAndPageAlignment",value:function(){i.default.setElementStyle(document.body,{position:this.bodyPosition,marginRight:this.bodyMarginRight}),delete this.bodyPosition,delete this.bodyMarginRight}},{key:"resizeModal",value:function(e){if(e&&e.height&&e.width){var t={},n=e.height>this.modalContainerHeight;if(this.options.resizeHeight&&(n||this.exceedsViewportHeight())){var r=Math.max(e.height,this.maxViewableHeight(),this.options.minModalHeight);t.height="".concat(r,"px"),this.modalContainerHeight=r}this.options.resizeWidth&&(t.width="".concat(e.width,"px")),(t.height||t.width)&&(i.default.setElementStyle(this.modal,t),this.alignModalAndPage())}}},{key:"postMessage",value:function(e){var t=this.src();if(t){var n=i.default.extend({id:u.default.POST_MESSAGE_ID},e);this.isIFrameReady&&this.targetWindow.postMessage(JSON.stringify(n),i.default.getDomain(t))}}},{key:"sendModalBounds",value:function(){var e=Math.round(this.$iframe_container.scrollTop);i.default.isMobile()||(e-=n.MODAL_MARGIN),e=Math.max(e,0);var t=this.modalContainerHeight-e,r=Math.min(t,window.innerHeight);this.postMessage({availableHeight:r,modalHeight:this.modalContainerHeight,name:u.default.PARENT_BOUNDS_MESSAGE,scrollTop:e})}},{key:"setBodyPosition",value:function(){void 0===this.bodyPosition&&(this.bodyPosition=document.body.style.position,i.default.setElementStyle(document.body,{position:"fixed"}))}},{key:"unload",value:function(){this.isIFrameReady=!1,d(v(n.prototype),"unload",this).call(this)}}]),n}();t.default=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(52)),o=s(n(53)),i=s(n(7)),a=s(n(30));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return h(e)}(this,n)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.default);var t=p(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,e),(0,i.default)(h(r),"disablePageScroll","resetPageScroll","setIFrameFocus"),r.registerEventHandlers(),r}return f(n,null,[{key:"MAX_ZINDEX_VALUE",get:function(){return 2147483647}}]),f(n,[{key:"close",value:function(e){o.default.close(e)}},{key:"disablePageScroll",value:function(){void 0===this.bodyOverflowStyle&&this.disablePageScrollOnShow()&&(this.bodyHasVerticalScroll=a.default.hasVerticalScrollbar(),this.htmlOverflowStyle=document.documentElement.style.overflow,document.documentElement.style.overflow="unset",this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden")}},{key:"disablePageScrollOnShow",value:function(){return!0}},{key:"hide",value:function(){var e=this;c(m(n.prototype),"hide",this).call(this),setTimeout(function(){e.activeElementBeforeShown&&e.activeElementBeforeShown.focus&&(e.activeElementBeforeShown.focus(),delete e.activeElementBeforeShown)},0)}},{key:"open",value:function(e){var t,n=this;this.isOrphan()?(this.on("ready",t=function(){n.off("ready",t),o.default.open(n,n.setIFrameFocus),"function"==typeof e&&e()}),o.default.load(this)):o.default.open(this,this.setIFrameFocus)}},{key:"preload",value:function(){o.default.load(this)}},{key:"registerEventHandlers",value:function(){this.on("hiding",this.resetPageScroll).on("showing",this.disablePageScroll)}},{key:"resetPageScroll",value:function(){document.documentElement.style.overflow=this.htmlOverflowStyle,delete this.htmlOverflowStyle,document.body.style.overflow=this.bodyOverflowStyle,delete this.bodyOverflowStyle}},{key:"setIFrameFocus",value:function(){this.$iframe&&!this.isOrphan()&&"function"==typeof this.$iframe.focus&&this.$iframe.focus()}},{key:"unload",value:function(){o.default.remove(this)}}]),n}();t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(18)),o=a(n(22)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,r.default);var t,n,a,s=l(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),e=s.call(this,t),i.default.isObject(e.options.on)&&Object.keys(e.options.on).forEach(function(t){e.on(t,e.options.on[t])}),e}return t=f,(n=[{key:"container",value:function(){return this.isOrphan()?this.options.container:this.$iframe_container.parentNode}},{key:"paint",value:function(){var e=this;if(!this.options.container)return this.logError("Cannot paint widget without container",{options:this.options});if(!this.options.src&&!this.options.content&&!this.options.template)return this.logError("Cannot paint widget without src, content, or template",{options:this.options});if(this.appendTo(this.options.container),this.options.src)this.$iframe.onload=function(){e.trigger("ready")},this.src(this.options.src);else if(this.options.content)this.content(this.options.content),this.trigger("ready");else if(this.options.template){var t=this.options.template_args||{};o.default.get(this.options.template,function(n){e.content(o.default.render(t,n)),e.trigger("ready")})}return this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.default.extend(this.options,e),this.paint()}}])&&u(t.prototype,n),a&&u(t,a),f}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.widgets=[],this.hidden=!0,(0,o.default)(this,"close","load","open","remove","transition")}var t,n,i;return t=e,(n=[{key:"close",value:function(e){return this.hidden?("function"==typeof e&&e(),this):(this.widgets.forEach(function(e){e.hide()}),this.hidden=!0,r.default.delay(function(){"function"==typeof e&&e()},250))}},{key:"load",value:function(e){e.options.container||(e.options.container=document.body),e.paint(),this.widgets.push(e)}},{key:"open",value:function(e,t){return this.hidden?(-1===this.widgets.indexOf(e)&&this.load(e),e.show(),this.hidden=!1,r.default.delay(function(){"function"==typeof t&&r.default.delay(t,250)})):this.transition(e,t)}},{key:"remove",value:function(e){this.widgets=this.widgets.filter(function(t){return t!==e}),"function"==typeof e.remove&&e.remove()}},{key:"transition",value:function(e,t){return this.hidden?this.open(e,t):(-1===this.widgets.indexOf(e)&&this.load(e),this.widgets.forEach(function(t){t!==e&&t.hide()}),e.show(),r.default.delay(function(){"function"==typeof t&&t()},250))}}])&&a(t.prototype,n),i&&a(t,i),e}());t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowState=t.EventName=t.CHANNEL=void 0,t.CHANNEL="affirm",function(e){e.Initialized="initialized",e.InitializedAck="initializedAck",e.ClientResize="clientResize",e.StepChange="stepChange",e.StateChange="stateChange",e.Close="close",e.RequestClose="requestClose"}(t.EventName||(t.EventName={})),function(e){e.PrequalComplete="PrequalComplete",e.CheckoutComplete="CheckoutComplete",e.UserSignout="UserSignout"}(t.FlowState||(t.FlowState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.listeners={}}return e.prototype.addEventListener=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(e in this.listeners){var n=this.listeners[e],r=n.indexOf(t);-1!==r&&n.splice(r,1)}},e.prototype.dispatchEvent=function(e){var t=this;e.type in this.listeners&&this.listeners[e.type].forEach(function(n){n.call(t,e)})},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.consoleLog=t.DEBUG_LEVEL=void 0,t.DEBUG_LEVEL={ERROR:0,WARNING:1,INFO:2,DEBUG:3},t.consoleLog=o;var i=function(){function e(e,n){void 0===n&&(n=t.DEBUG_LEVEL.ERROR),this.name=e,this.level=n}return e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.apply(void 0,r([this.name],e))},e.prototype.warning=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.level>=t.DEBUG_LEVEL.WARNING&&o.apply(void 0,r([this.name],e))},e.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.level>=t.DEBUG_LEVEL.INFO&&o.apply(void 0,r([this.name],e))},e.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.level>=t.DEBUG_LEVEL.DEBUG&&o.apply(void 0,r([this.name],e))},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cachePromises=a,t.cacheSinglePromise=function(e){var t,n=!1;return function(){return n?t:(t=e(),n=!0,t)}},t.default=void 0;var r,o=(r=n(0))&&r.__esModule?r:{default:r};var i={};function a(e){var t={};return function(n){if(n in t)return t[n];var r=e(n);return t[n]=r,r}}a(function(e){return Promise.resolve()});var s={getExperimentPageType:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],Promise.resolve(t)},getFinancingExperimentCohortId:function(e){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Promise.resolve()},getUniqueExperimentIDs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t={};return o.default.isObject(e)&&Object.keys(e).forEach(function(n){t[e[n].experimentId]=!0}),Object.keys(t)}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(1)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.checkoutData,n=e.checkoutAri,i=e.mode,a=e.userConfirmationUrl,s=e.userConfirmationUrlAction;r.default.trackActionLog("AFJS_default_checkout_on_success",{checkoutAri:n,checkoutToken:t.checkout_token,widgetMode:i});var u={};t.checkout_token?u.checkout_token=t.checkout_token:u.charge_id=t.id,"GET"===s&&(u=Object.assign(o.default.queryObj(a),u)),o.default.postToUrl(a,u,s)};t.default=a},function(e,t,n){"use strict";var r,o=(r=n(1))&&r.__esModule?r:{default:r};var i={};e.exports={onClick:function(e,t){i[e]=t},getClickHandler:function(e){var t=Object.keys(i).filter(function(t){return function(e,t){return(Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector).call(e,t)}(e,t)});return 0===t.length?null:(t.length>1&&o.default.trackEvent("Element matches multiple selectors",t.length),i[t[0]])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=m(n(5)),o=n(145),i=m(n(3)),a=m(n(13)),s=m(n(58)),u=n(20),c=m(n(11)),l=m(n(16)),f=m(n(18)),d=m(n(0)),p=m(n(12)),h=n(1);function m(e){return e&&e.__esModule?e:{default:e}}function g(e){"@babel/helpers - typeof";return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;return E(e)}(this,n)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O={prequal:"prequal",orders:"orders",checkout:"checkout"},S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(S,l.default);var t,n,m,g=w(S);function S(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(n=g.call(this,r,Object.assign(o,{popupCss:{width:"960px"},src:null}))).startAtOrders=!!r.startAtOrders,n.currentApp=n.startAtOrders?O.orders:O.prequal,n.onCheckoutSuccess=(null===i.default||void 0===i.default?void 0:null===(e=i.default.merchant)||void 0===e?void 0:e.onCheckoutSuccess)||n.onCheckoutSuccess,n.onCheckoutSuccess=n.onCheckoutSuccess.bind(E(n)),n.onCheckoutFailure=(null===i.default||void 0===i.default?void 0:null===(t=i.default.merchant)||void 0===t?void 0:t.onCheckoutFailure)||S.onCheckoutFail,n.onCheckoutFailure=n.onCheckoutFailure.bind(E(n)),n.items=r.items,n.discountCodes=r.discountCodes,n.boundRedirectPostMessageListener=n.redirectPostMessageListener.bind(E(n)),p.default.bind(window,"message",n.boundRedirectPostMessageListener),n.postMessageListenerAttached=!0,n}return t=S,m=[{key:"isValidPostMessageId",value:function(e){var t=this;return-1!==Object.keys(this.appNameToPostMessageId).map(function(e){return t.appNameToPostMessageId[e]}).indexOf(e)}},{key:"onCheckoutFail",value:function(){window.location=i.default.merchant.user_cancel_url.url}},{key:"appNameToPostMessageId",get:function(){var e;return y(e={},O.orders,"AFFIRM_ORDER_MESSAGES"),y(e,O.prequal,"AFFIRM_PREQUAL_MESSAGES"),y(e,O.checkout,"AFFIRM_CHECKOUT_MESSAGES"),e}}],(n=[{key:"makeMerchantRequest",value:function(e){var t=this;return new Promise(function(n){var r={id:S.appNameToPostMessageId[O.orders],name:"AFFIRM_MERCHANT_REQUEST_COMPLETED"};if(!(e&&e.requestData&&e.merchantUrl&&e.submitUrl))return t.postMessage(Object.assign({success:!1},r)),void n();var o=e.requestData,i=e.merchantUrl,a=e.submitUrl;fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:{order:o}})}).then(function(e){e.status>=400?((0,h.trackAPI)(i,e.status,"error"),t.postMessage(Object.assign({success:!1},r)),n()):e.ok&&e.json().then(function(o){(0,h.trackAPI)(i,e.status,o),t.postMessage(Object.assign({success:!0,response:o,submitUrl:a},r)),n()})}).catch(function(){(0,h.trackEvent)("orders/merchantFetchFailure"),t.postMessage(Object.assign({success:!1},r)),n()})})}},{key:"redirectPostMessageListener",value:function(e){var t=f.default.parsePostMessageData(e),n=e.source;if(t&&S.isValidPostMessageId(t.id))switch(t.name){case"AFFIRM_REDIRECT":n.location=t.url;var r=S.appNameToPostMessageId[t.redirectAppName],o=r&&{id:r};this.startConfiguringMessaging(o);break;case"AFFIRM_INIT":t.id===S.appNameToPostMessageId[O.orders]&&a.default.trigger("orders:open"),this.clearTimers(!0);break;case"AFFIRM_CLOSE":this.close();break;case"AFFIRM_CHECKOUT_CLOSE":this.checkoutClose(t);break;case"AFFIRM_CHECKOUT_INIT":this.clearTimers(!0);break;case"AFFIRM_MAKE_MERCHANT_REQUEST":this.makeMerchantRequest(t)}}},{key:"checkoutClose",value:function(e){var t=this;return new Promise(function(n){t.close(function(){if(!e)return t.onCheckoutFailure(),t.unload(),void n();var r=e.success?t.onCheckoutSuccess:t.onCheckoutFailure;i.default.merchant.use_vcn?(0,o.getOrder)(t.flowAri).then(function(t){r(v({order_id:t.data.merchant_internal_order_id},e.data))}).catch(function(){return t.onCheckoutFailure(e.data)}).then(function(){t.unload(),n()}):(r(e.data),t.unload(),n())})})}},{key:"onCheckoutSuccess",value:function(e){return(0,s.default)({checkoutData:e,mode:this.config.mode,userConfirmationUrl:i.default.merchant.user_confirmation_url.url,userConfirmationUrlAction:i.default.merchant.user_confirmation_url.action})}},{key:"onGetOrderData",value:function(e,t){if(e&&e.ari){this.flowAri=e.ari;var n=this.options.src.indexOf("?")>-1?"&":"?";this.options.src="".concat(this.options.src).concat(n,"flow_ari=").concat(e.ari,"&public_api_key=").concat(r.default.getPublicApiKey())}this.config.mode===c.default.MODE_MODAL?b(k(S.prototype),"open",this).call(this,t,this.prequalOrderConfig):this.config.mode===c.default.MODE_POPUP&&this.updatePopupSource(this.options.src,t)}},{key:"loadPrequalOrderSource",value:function(e){var t=this;return this.options.src=this.startAtOrders?d.default.getFrontendUrl(i.default.resource_urls.orders_backend_route):l.default.constructURL(this.config.urlParams),(0,o.createOrder)({items:this.items,discount_codes:this.discountCodes}).then(function(n){return t.onGetOrderData(n,e)}).catch(function(){return t.onGetOrderData(null,e)})}},{key:"onPopupOpen",value:function(e){b(k(S.prototype),"onPopupOpen",this).call(this),this.loadPrequalOrderSource(e)}},{key:"open",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.postMessageListenerAttached||p.default.bind(window,"message",this.boundRedirectPostMessageListener),this.popup=null,this.options.src=null,this.prequalOrderConfig=n,c.default.determineMode(this.config.mode).then(function(r){var o=r;t.config.mode=o,o===c.default.MODE_MODAL?t.loadPrequalOrderSource(e):o===c.default.MODE_POPUP?b(k(S.prototype),"open",t).call(t,e,n):o===c.default.MODE_UNSUPPORTED&&((0,u.showError)({body:"Affirm requires third party cookies in order to work properly. Please enable them in your settings before continuing, or use a different browser.",title:"Your browser is missing important features"}),"function"==typeof e&&e())})}},{key:"unload",value:function(){b(k(S.prototype),"unload",this).call(this),p.default.unbind(window,"message",this.boundRedirectPostMessageListener),this.postMessageListenerAttached=!1}},{key:"currentPostMessageId",get:function(){return S.appNameToPostMessageId[this.currentApp]}}])&&A(t.prototype,n),m&&A(t,m),S}();t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(62)),o=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}var a=new r.default({service:"affirm.ui.ready"});a.runQueuedActions();var s=(0,o.default)(a,["on","off","ready","trigger"]);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),o=a(n(0)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d="affirm.jsReady",p="affirm.ui.ready",h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,r.default);var t,n,a,s=l(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this)).isReady=!1,t.service=e.service||"",t}return t=f,(n=[{key:"getActionLog",value:function(){var e;switch(this.service){case d:e=window.affirm&&window.affirm._;break;case p:e=window.affirm&&window.affirm.ui&&window.affirm.ui._;break;default:e=[]}return e||[]}},{key:"ready",value:function(e){if(e)if(this.isReady){if("function"==typeof e)try{e()}catch(e){i.default.trackEvent("".concat(this.service," Callback Error"),e)}}else this.on("ready",e);else this.trigger("ready"),this.isReady=!0;return this.isReady}},{key:"runQueuedActions",value:function(){var e=this,t=this.getActionLog();o.default.delay(function(){t.forEach(function(t){e[t[0]].apply(e,t[1])})})}}])&&u(t.prototype,n),a&&u(t,a),f}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(10));function o(e){return e&&e.__esModule?e:{default:e}}var i=new(o(n(62)).default)({service:"affirm.jsReady"});i.runQueuedActions();var a=(0,r.default)(i,["ready"]);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(10));function o(e){return e&&e.__esModule?e:{default:e}}var i=new(o(n(147)).default),a=(0,r.default)(i,["launchPrequalFlow"]);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=b(n(2)),o=b(n(38)),i=b(n(5)),a=b(n(3)),s=n(8),u=b(n(15)),c=b(n(59)),l=b(n(19)),f=b(n(11)),d=b(n(39)),p=b(n(60)),h=b(n(16)),m=b(n(67)),g=n(14),y=b(n(0)),v=b(n(31));n(68);var A=b(n(1));function b(e){return e&&e.__esModule?e:{default:e}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var w={},E={apr:.1,pricingTemplate:"Starting at {payment}/month with {affirm_logo}",termLength:12},k=["text","logo","symbol"],O=["black","blue","primary","white"],S={},P=function(e){return{displayName:"DISPLAYNAME-SKU",qty:1,sku:e.trim(),unitPrice:1}},I=function(e){if(!e.isDefault){var t=u.default.get(),n=i.default.getPublicApiKey();return _({},t,{urlParams:{device_id:r.default.localDeviceId,merchant_name:t.merchant_name,promo_external_id:e.promoId,referring_url:encodeURIComponent(window.location.href),unit_price:e.amount,webhook_session_id:t.webhook_session_id||y.default.getWebhookSessionId(),page_type:e.pageType,use_promo:!0,bluecore_distinct_id:v.default.getDistinctID(n),bluecore_token:v.default.getToken(n),split_pay_go_enabled:e.tuftAndNeedleSplitPayGoEnabled||null,use_adaptive:e.adaptiveCheckoutEnabled||null},mode:f.default.MODE_MODAL,page_type:"home"})}return null},T=function(e){var t=i.default.getPublicApiKey();if(!e)return o.default.getPromoConfig(t,"as_low_as",e,E);var n="affirm-promo:".concat(t,"-").concat(e);if(!S[n]){var r="".concat(a.default.promos_url_prefix,"as_low_as/").concat(t,"/").concat(e,".json");S[n]=window.fetch(r).then(function(e){return e.ok&&A.default.trackAPI(r,e.statusCode,e),e.json()}).catch(function(){return E})}return S[n]},M=function(e,t,n,r){var o=e.replace(/\{lowest_apr\}/gi,(100*n).toString());return o=(o=o.replace(/\{payment\}/gi,'<span class="affirm-ala-price">$'.concat(t,"</span>"))).replace(/\{affirm_logo\}/gi,r)},C=function(e,t,n,r){return!w.promoPrequalWidgets[t]||e?(0,s.getTuftAndNeedleSplitPayExperiment)(!0).then(function(o){return(0,s.getAdaptiveCheckoutExperiment)(!0).then(function(i){n.tuftAndNeedleSplitPayGoEnabled=o,n.adaptiveCheckoutEnabled=i;var a,s=I(n);s.items=e,s.urlParams.items=e,a=e?new p.default(s,{}):new h.default(s),w.promoPrequalWidgets[t]=a,a.on(["prequalFinished","prequalSignedOut"],function(){r&&D(r)}),a.open(null,{mode:f.default.MODE_MODAL})})}):(w.promoPrequalWidgets[t].open(null,{mode:f.default.MODE_MODAL}),Promise.resolve())},R=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t,i=o.promoId;if(A.default.trackUserInteraction("As Low As",A.default.USER_ACTIONS.CLICK,{isPromoDefault:o.isDefault}),o.isDefault)return l.default.openModal(e,o),Promise.resolve();var a="".concat(i,"-").concat(o.amount,"-").concat(o.pageType),s=c.default.getClickHandler(r);if(s)return Promise.resolve(s()).then(function(e){var t=e.items;return(0,g.isValidItems)(t)?C(t,a,o,r):C({},a,o,r)});var u=null===r||void 0===r?void 0:null===(n=r.getAttribute)||void 0===n?void 0:n.call(r,"data-sku");if(u){var f=[];if(u=u?u.trim():u)if(f=u.split(",").map(P),(0,g.isValidItems)(f))return C(f,a,o,r)}return C(null,a,o,r)},x=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Learn more";if(n){""!==e.innerHTML&&(e.innerHTML+=". ");var i=document.createElement("a");i.innerHTML=o,i.setAttribute("aria-label","".concat(o," about Affirm Financing (opens in modal)")),i.setAttribute("href","javascript:void(0)"),i.onclick=function(n){n.preventDefault(),R(n,t,e)},e.appendChild(i)}else if(r){var a=e.innerText||e.innerHTML;e.setAttribute("aria-label","".concat(a," - Affirm Financing (opens in modal)")),e.setAttribute("href","javascript:void(0)"),e.onclick=function(n){n.preventDefault(),R(n,t,e)},e.style="cursor: pointer;"}},j=function(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=i;if(u.isDefault=!o.promo_prequal_enabled,o.termLengthIntervals){if(!(t=m.default.getTermLengthIntervalForAmount(o.termLengthIntervals,u.amount))){if(o.defaultMessage){var c=o.defaultMessage.replace(/\{affirm_logo\}/gi,u.affirmLogo),l=m.default.getMinAPR(o.termLengthIntervals);e.innerHTML=c.replace(/\{lowest_apr\}/gi,(100*l).toString()),w.setSiteWideModalOnElement(e,u)}else e.innerHTML="";return}var f=t;n=f.apr,r=f.termLength}else{if(u.amount<5e3)return void(e.innerHTML="");n=o.apr,r=o.termLength}d.default.getEstimate({amount:u.amount,apr:n,months:r,elem:e}).then(function(t){u.apr=n,u.termLength=r,u.paymentString=t.payment_string,u.pricingTemplate=o.pricingTemplate,w.setPromoOnElement(e,u),w.setProductPageModalOnElement(e,u),s.trackPromos&&A.default.trackEvent("Promo: ALA Rendered",{elapsedTime:Date.now()-s.promoTimer,version:"v1"}),a&&a()})},D=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.getAttribute("data-amount"),s=e.getAttribute("data-affirm-color")||"blue",u=e.getAttribute("data-affirm-type")||"logo",c="false"!==e.getAttribute("data-learnmore-show"),l=e.getAttribute("data-page-type"),f=[],d=e.getAttribute("data-sku");(d=d?d.trim():d)&&(f=d.split(",").map(P));var p="XXXXXXXXXXXXXXX"===e.getAttribute("data-promo-id")?null:e.getAttribute("data-promo-id");if(t=n?"true"===e.getAttribute("data-clickable"):"false"!==e.getAttribute("data-clickable"),!a)throw new Error("Affirm: data-amount is required in as low as promos. Element:",e);if(a>175e4)return e.innerHTML="",Promise.resolve();if(-1===k.indexOf(u))throw new Error('Affirm: Received a wrong data-affirm-type value "'.concat(u,'". Element:'),e);if(-1===O.indexOf(s))throw new Error('Affirm: Received a wrong data-affirm-color value "'.concat(s,'". Element:'),e);var h={amount:a,affirmLogo:function(e,t){var n="symbol"===t?"affirm":"Affirm";return"text"===t?"Affirm":'<span class="__affirm-logo __affirm-logo-'.concat(e,'">').concat(n,"</span>")}(s,u),learnMore:c,clickable:t,promoId:p,pageType:l};r.trackPromos&&A.default.trackEvent("Promo: ALA Pre-fetch",{elapsedTime:Date.now()-r.promoTimer});var m=i.default.getPublicApiKey();if(o.default.useV2Api(m,p)){var g={promoId:h.promoId,amount:h.amount,pageType:h.pageType,logoType:u,showCTA:c?"true":"false",logoColor:s};f.length>0&&(g.items=f);var y=o.default.TEMPLATE_FIELD.ala;return o.default.getPromoResponse(m,g,y).then(function(n){var o=n?n.promo:null;if(o&&o.config){var i={amount:h.amount,pageType:h.pageType,promoId:p,type:"product_page_modal"};e.innerHTML=o.html_ala,r.trackPromos&&A.default.trackEvent("Promo: ALA Rendered",{elapsedTime:Date.now()-r.promoTimer,version:"v2"}),t&&function(e,t){var n=e.getElementsByClassName("affirm-modal-trigger");if(0!==n.length){n.length>1&&A.default.trackEvent("too many affirm-modal-trigger elements found",_({numElements:n.length},t));var r=n[0],o=r.innerText||r.innerHTML;r.setAttribute("aria-label","".concat(o," about Affirm Financing (opens in modal)")),r.setAttribute("href","javascript:void(0)"),r.onclick=function(n){n.preventDefault(),R(n,t,e)}}else A.default.trackEvent("no affirm-modal-trigger found",_({},t))}(e,i)}})}return w.getConfig(p).then(function(t){j(e,t,h,null,r)})},N=function(e,t){return-1!==e.parentElement.className.indexOf(t)};w.defaultConfig=E,w.generatePromoPrequalConfig=I,w.getConfig=function(e){return m.default.isPromoSet(e)?m.default.getConfig(e,"asLowAs").catch(function(){return T(e)}):T(e)},w.getDisplayText=M,w.getPromoConfig=T,w.openModalAssociatedWithPromoId=R,w.processConfigAndSetElement=j,w.promoPrequalWidgets={},w.promos=S,w.setProductPageModalOnElement=function(e,t){var n=e.getAttribute("data-promo-id"),r=e.getAttribute("data-modal-id"),o={isDefault:t.isDefault,modalId:r,amount:t.amount,promoId:n,apr:t.apr,termLength:t.termLength,type:"product_page_modal"};x(e,o,t.learnMore,t.clickable)},w.setPromoOnElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.innerHTML=M(t.pricingTemplate,t.paymentString,t.apr,t.affirmLogo)},w.setSiteWideModalOnElement=function(e,t){var n=e.getAttribute("data-promo-id"),r=e.getAttribute("data-modal-id"),o={isDefault:t.isDefault,modalId:r,promoId:n,type:"site_wide_modal"};x(e,o,t.learnMore,t.clickable)},w.setupElement=D,w.setupElements=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;n<e.length;n+=1){var r=e[n];try{var o=N(r,"affirm-product-modal")||N(r,"affirm-site-modal");D(r,o,t)}catch(e){console.error(e)}}};var L=w;t.default=L},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){return e&&e.affirmConfig?e.affirmConfig:null}Object.defineProperty(t,"__esModule",{value:!0}),t.findAffirmConfig=o,t.setAffirmConfig=function(e,t){var n=o(e)||{};return e.affirmConfig=r({},n,t),e.affirmConfig}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),o=a(n(5)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u={},c=["asLowAs","productPageModal","siteWideModal"],l=function(e){return e&&e.indexOf&&0===e.indexOf("promo_set")||!1},f={getConfig:function(e,t){if(!l(e))return Promise.reject("The provided promoSetId ".concat(e," is not a valid promoset."));if(-1===c.indexOf(t))return Promise.reject("The provided key ".concat(t," must be one of: ").concat(c.join(", "),"."));var n=o.default.getPublicApiKey(),a="affirm-promoset:".concat(n,"-").concat(e);if(!u[a]){var f="".concat(r.default.promos_url_prefix,"promo_set/").concat(n,"/").concat(e,".json");u[a]=window.fetch(f).then(function(e){return e.ok?(i.default.trackAPI(f,e.statusCode,e),e.json()):Promise.reject("Invalid promoset")})}return u[a].then(function(e){return s({},e[t],{promo_prequal_enabled:e.promo_prequal_enabled})})},getMinAPR:function(e){for(var t=1,n=0;n<e.length;n+=1)e[n].apr<=t&&(t=e[n].apr);return t},getTermLengthIntervalForAmount:function(e,t){var n,r;for(r=0;r<e.length;r+=1)e[r].minimumLoanAmount<=t&&(n=e[r]);return n},isPromoSet:l};t.default=f},function(e,t,n){var r=n(148);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(153)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(r.default.checkPublicApiKey()){var t=e||{},n=t.amount||null,i={pageType:t.pageType||null,promoId:t.id||t.promoId||null,isSdk:"true"===t.isSdk};n&&n>=a&&n<=s?(i.type="product_page_modal",i.amount=n):i.type="site_wide_modal";var u=document.createElement("p");return o.default.openModal(u,i),u}return console.warn("Missing API Key"),null};var r=i(n(5)),o=i(n(19));function i(e){return e&&e.__esModule?e:{default:e}}var a=5e3,s=175e4},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.default.checkPublicApiKey()){var t=Date.now(),n=e.trackPromos,l="IE"===(0,c.default)(window.navigator.userAgent);if(!l){var f=document.getElementsByClassName("affirm-as-low-as");o.default.setupElements(f,{promoTimer:t,trackPromos:n});var d=document.getElementsByClassName("affirm-site-modal");a.default.setupSiteElements(d,{promoTimer:t,trackPromos:n});var p=document.getElementsByClassName("affirm-product-modal");a.default.setupProductElements(p,{promoTimer:t,trackPromos:n});var h=document.getElementsByClassName("affirm-prequal-text");i.default.setupElements(h);var m=u.default.queryObj();"t"===m.aff_fm&&"true"!==sessionStorage.getItem("AffirmLearnMore")&&function(e,t,n){var r,o={};r=t.length>0?t:e.length>0?e:n;if(r.length>0){var i=r[0].getAttribute("data-promo-id"),a=r[0].getAttribute("data-modal-id"),u=r[0].getAttribute("data-page-type");o.id=i||a,o.pageType=u;var c=r[0].getAttribute("data-amount");c&&(o.amount=c)}(0,s.default)(o),sessionStorage.setItem("AffirmLearnMore","true")}(f,p,d)}}else console.warn("Missing API Key")};var r=l(n(5)),o=l(n(65)),i=l(n(155)),a=l(n(19)),s=l(n(69)),u=l(n(0)),c=l(n(40));function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";n.r(t),n.d(t,"AxpClient",function(){return R}),n.d(t,"axpClientMiddleware",function(){return N}),n.d(t,"buildAxpGetAssignmentsAction",function(){return L}),n.d(t,"buildAxpTrackImpressionAction",function(){return F}),n.d(t,"buildAxpSetCustomAttributeAction",function(){return U}),n.d(t,"buildAxpClearCustomAttributeAction",function(){return B}),n.d(t,"axpAssignmentsReducer",function(){return q}),n.d(t,"axpAssignmentsReducerWrappedWith",function(){return G}),n.d(t,"assignmentFetchStatus",function(){return v}),n.d(t,"impressionTypes",function(){return i}),n.d(t,"SHOWN_DEFAULT",function(){return Q}),n.d(t,"SHOWN_TREATMENT",function(){return Y});var r=n(4),o=n.n(r),i=Object.freeze({SHOWN_DEFAULT:"shown_default",SHOWN_TREATMENT:"shown_treatment"}),a=function(e,t,n,r){var i={assignment:e,impressionType:t,impressionAt:n,impressionData:r||{}};return o()(i)},s=n(43),u=n.n(s),c=n(2),l=function(){function e(e,t,n){if(void 0===n&&(n={}),!e||"string"!=typeof e)throw new Error("HeaderConfig: appName must be provided to constructor as string");if(!t||"string"!=typeof t)throw new Error("HeaderConfig: appVersion must be provided to constructor as string");if(n&&"object"!=typeof n)throw new Error("HeaderConfig: appHeaders must be an object");this.universalHeaders={Accept:"text/html, application/json","Affirm-User-Agent":"Affirm-Web","Affirm-Platform":e,"Affirm-App-Version":t},this.appHeaders=n,this.defaultHeaders={"Content-Type":"application/json"}}var t=e.prototype;return t.updateWithResponseHeaders=function(e){void 0===e&&(e=new Map),e.get("Affirm-Authorization")&&(this.universalHeaders["Affirm-Authorization"]=e.get("Affirm-Authorization"))},t.getCombinedHeaders=function(e){return void 0===e&&(e={}),Object.assign({},this.defaultHeaders,e,this.appHeaders,this.universalHeaders)},e}(),f=function(e,t,n,r,o){void 0===t&&(t={}),void 0===n&&(n="GET"),void 0===r&&(r={}),void 0===o&&(o="include");var i={credentials:o,headers:r,method:n},a=r["Content-Type"];return"POST"!==n&&"PUT"!==n&&"PATCH"!==n||(t instanceof FormData?(i.body=t,delete i.headers["Content-Type"]):i.body=JSON.stringify(t)),fetch(e,i).then(function(e){if(e.status>=500||404===e.status)return{responseData:{message:404===e.status?"Not Found":"Unexpected Error"},responseHeaders:e.headers,responseStatus:e.status};switch(a){case"application/json":return e.json().then(function(t){return{responseData:t,responseHeaders:e.headers,responseStatus:e.status}});default:return e.text().then(function(t){return{responseData:t,responseHeaders:e.headers,responseStatus:e.status}})}})},d=Object.freeze({APP_NAME:"Affirm-Platform",APP_VERSION:"Affirm-App-Version",APP_USER_AGENT:"Affirm-User-Agent",APP_CAPABILITIES:"Affirm-Client-Capabilities"});function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(e,t,n,r){if(void 0===r&&(r={}),p(this,"urlBase",null),p(this,"headerConfig",null),void 0===e||null===e||!t||!n)throw Error("AXP client: invalid configuration");this.urlBase=e,this.headerConfig=new l(t,n,r)}var t=e.prototype;return t.getHeaders=function(){return this.headerConfig.getCombinedHeaders()},t.getAssignments=function(e,t,n,r,i){var a,s,u=this.getHeaders(),c={experiment_names:e,feature_flag_names:t,custom_attributes:n,related_units:r},l=f(this.urlBase+"/api/axp/v1/assignments/fetch",c,"POST",u);return(a=i,s=l,new Promise(function(e,t){setTimeout(function(){t(new Error("Axp Client fetch timeout"))},a),s.then(e,t)})).then(function(i){if(200!==i.responseStatus)throw new Error(i.responseData.message);var a=i.responseData.assignments||{},s=i.responseData.feature_flag_assignments||{},u=(new Date).toISOString(),c={},l={};return e.forEach(function(e){c[e]=function(e,t,n,r,i){if(void 0===r&&(r={}),void 0===i&&(i={}),t&&t.experiment_name!==e)throw Error("assignment experiment name mismatch");var a={experimentName:e,hasVariant:!!t&&!!Object.keys(t).length,experimentUuid:t&&t.experiment_uuid,assignmentUuid:t&&t.assignment_uuid,unitType:t&&t.unit_type,unitValue:t&&t.unit_value,variantName:t&&t.variant_name,internalReason:t&&t.internal_reason,assignmentAt:n,customAttributesData:r,relatedUnits:i};return o()(a)}(e,a[e]||void 0,u,n,r)}),t.forEach(function(e){l[e]=function(e,t,n,r,i){void 0===r&&(r={}),void 0===i&&(i={});var a={featureFlagName:e,variantName:t,assignmentAt:n,customAttributesData:r,relatedUnits:i};return o()(a)}(e,s[e]||void 0,u,n,r)}),o()({experimentAssignments:c,featureFlagAssignments:l})})},t.fireImpressions=function(e){var t=this.getHeaders(),n=[];e.forEach(function(e){if(e.getIn(["assignment","hasVariant"])){var t={assignment:{experiment_name:e.getIn(["assignment","experimentName"]),experiment_uuid:e.getIn(["assignment","experimentUuid"]),assignment_uuid:e.getIn(["assignment","assignmentUuid"]),unit_type:e.getIn(["assignment","unitType"]),unit_value:e.getIn(["assignment","unitValue"]),variant_name:e.getIn(["assignment","variantName"]),internal_reason:e.getIn(["assignment","internalReason"])},impression_type:e.impressionType,impression_at:e.impressionAt,data:Object.assign({},{assignment_data:{assignment_at:e.getIn(["assignment","assignmentAt"]),custom_attributes:e.getIn(["assignment","customAttributesData"]),related_units:e.getIn(["assignment","relatedUnits"])}},e.impressionData)};n.push(t)}});var r,o={impressions:n};return n.length?f((r=this.urlBase,r+"/api/axp/v1/assignments/impressions"),o,"POST",t).then(function(e){if(200!==e.responseStatus)throw new Error(e.responseData.message);return!!e.responseData.results}):Promise.resolve(!1)},e}();var m=Object.freeze({appName:{required:!0,objectType:"String"},appVersion:{required:!0,objectType:"String"},capabilities:{required:!1,objectType:"Array",defaultTo:[]},forceMemoryStorage:{required:!1,objectType:"Boolean",defaultTo:!1},cacheTtlMs:{required:!1,objectType:"Number",defaultTo:3e5},impressionFlushIntervalMs:{required:!1,objectType:"Number",defaultTo:1e3},assignmentFetchTimeoutMs:{required:!1,objectType:"Number",defaultTo:3e3},networkRetryThreshold:{required:!1,objectType:"Number",defaultTo:5}}),g=function(){function e(e){var t,n,r;r=null,(n="config")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r;var i={};if(Object.keys(e).filter(function(e){return!Object.prototype.hasOwnProperty.call(m,e)}).length>0)throw Error("Unsupported Axp ClientConfig");Object.keys(m).forEach(function(t){var n=m[t];if(n.required&&!e[t])throw Error("Missing client config");var r=e[t]||n.defaultTo;if(Object.prototype.toString.call(r)!=="[object "+n.objectType+"]")throw Error("Unexpected client config type");i[t]=r}),this.config=o()(i)}return e.prototype.getAdditionalAppHeaders=function(){var e;return this.config.capabilities.length>0?((e={})[d.APP_CAPABILITIES]=this.config.capabilities,e):{}},e}(),y=Object.freeze({CLIENT_PLATFORM:"client_platform",CLIENT_VERSION_STR:"client_version_str",CLIENT_USER_AGENT:"client_user_agent",CLIENT_ALL_CAPABILITIES:"client_all_capabilities"}),v=Object.freeze({PENDING:"pending",SUCCESS:"success",FAILED:"failed"});var A=function(){function e(e){var t,n,r;if(void 0===e&&(e={}),r=null,(n="attributes")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,"object"!=typeof e)throw Error("Invalid custom attributes");this.attributes=o()(e)}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes=this.attributes.set(e,o()(t))},t.getAttributes=function(){return this.attributes},t.getAttributesJS=function(){return this.getAttributes()},t.clearAttribute=function(e){this.attributes=o.a.without(this.attributes,e)},e.constructClientAttributesFromHeaders=function(e){var t,n=((t={})[y.CLIENT_PLATFORM]=e[d.APP_NAME],t[y.CLIENT_VERSION_STR]=e[d.APP_VERSION],t[y.CLIENT_USER_AGENT]=e[d.APP_USER_AGENT],t[y.CLIENT_ALL_CAPABILITIES]=e[d.APP_CAPABILITIES],t);return o()(n)},e}();function b(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(e){_(this,"storageKey",null),this.storageKey=e}var t=e.prototype;return t.putItem=function(e,t){var n=this.getAllContent().set(e,t);this.write(JSON.stringify(n))},t.getItem=function(e){return this.getAllContent()[e]},t.deleteItem=function(e){var t=o.a.without(this.getAllContent(),e);this.write(JSON.stringify(t))},t.getAllContent=function(){return o()(JSON.parse(this.read())||{})},t.clearStorage=function(){this.clear()},e.featureSupported=function(){var e=new this("affirmsniffer");try{return e.write("{}"),e.read(),e.clear(),!0}catch(e){return!1}},e}(),E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t=e.call.apply(e,[this].concat(r))||this),"memory",{}),t}b(t,e);var n=t.prototype;return n.read=function(){return this.memory[this.storageKey]||null},n.write=function(e){this.memory[this.storageKey]=e},n.clear=function(){delete this.memory[this.storageKey]},t}(w),k=function(e){function t(){return e.apply(this,arguments)||this}b(t,e);var n=t.prototype;return n.read=function(){return localStorage.getItem(this.storageKey)},n.write=function(e){localStorage.setItem(this.storageKey,e)},n.clear=function(){localStorage.removeItem(this.storageKey)},t}(w),O=function(e){var t={};return Object.keys(e).forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),t},S=function(e,t){return function(e,t){var n=Object.keys(e).sort(),r=Object.keys(t).sort();return n.length===r.length&&n.every(function(n,o){var i=r[o];return n===i&&e[n]===t[i]})}(O(e),O(t))};function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I="axp-client-experiments-store",T="axp-client-feature-flags-store",M={experiment:"_axp_mock_exp",featureFlag:"_axp_mock_ff"},C=function(){function e(t,n,r){if(void 0===r&&(r={}),P(this,"urlBase",null),P(this,"apiInstance",null),P(this,"clientConfigInstance",null),P(this,"customAttributesInstance",null),P(this,"experimentsStorageInstance",null),P(this,"featureFlagsStorageInstance",null),P(this,"impressionsQueue",[]),P(this,"impressionsRetryCount",0),P(this,"impressionsFlushTimer",null),null!==e.instance)return e.instance;this.urlBase=t,c.default.initialize({apiUrl:t}),this.clientConfigInstance=new g(n);var o=this.clientConfigInstance.config,i=o.appName,a=o.appVersion;this.apiInstance=new h(this.urlBase,i,a,this.clientConfigInstance.getAdditionalAppHeaders());var s=this.apiInstance.getHeaders(),u=A.constructClientAttributesFromHeaders(s);this.customAttributesInstance=new A(Object.assign({},r,u)),!this.clientConfigInstance.config.forceMemoryStorage&&this.clientConfigInstance.config.cacheTtlMs&&k.featureSupported()?(this.experimentsStorageInstance=new k(I),this.featureFlagsStorageInstance=new k(T)):(this.experimentsStorageInstance=new E(I),this.featureFlagsStorageInstance=new E(T)),e.instance=this,this.flushImpressionsAndSetTimer=this.flushImpressionsAndSetTimer.bind(this),this.flushImpressionsAndSetTimer()}e.initialize=function(t,n,r){if(void 0===r&&(r={}),null!==e.instance)throw Error("Axp Client has already been initialized");return new e(t,n,r)},e.getExperimentVariants=function(e){return this.getAxpVariants({experimentNames:e,featureFlagNames:[]}).then(function(e){return e.experimentVariants})},e.getAxpVariants=function(t){var n=t.experimentNames,r=t.featureFlagNames,o=t.prepopulatedRelatedUnits,i=void 0===o?null:o;if(e.raiseIfNotInstantiated(),!(n&&n.length||r&&r.length))return Promise.resolve({experimentVariants:{},featureFlagVariants:{}});if(e.isMockMode())return Promise.resolve(e.useMockResults({experimentNames:n,featureFlagNames:r}));var a=e.instance.customAttributesInstance.getAttributes();i&&Object.keys(i).forEach(function(t){t in e.constants.relatedUnits||e.warnToRollbar("AXP Client invalid prepopulated related unit",{message:t})});var s=i||{};return c.default.deviceId.then(function(e){!e||"device_id"in s||(s.device_id=e)}).then(function(){var t=e.instance.getAssignmentsFromStore("experiment",n,a,s),o=t.assignmentVariants,i=t.uncached,u=e.instance.getAssignmentsFromStore("featureFlag",r,a,s),c=u.assignmentVariants,l=u.uncached;return i.length||l.length?e.instance.fetchAssignments(i,l,a,s).then(function(t){var n=t.experimentAssignments,r=t.featureFlagAssignments;return i.forEach(function(t){var r=n[t];r&&(o[t]=r.variantName,e.instance.addExperimentAssignmentToStore(t,r))}),l.forEach(function(t){var n=r[t];n&&(c[t]=n.variantName,e.instance.addFeatureFlagAssignmentToStore(t,n))}),{experimentVariants:o,featureFlagVariants:c}}).catch(function(t){return e.warnToRollbar("AXP Client store assignment error",t),Promise.reject(t)}):{experimentVariants:o,featureFlagVariants:c}}).catch(function(){return{experimentVariants:{},featureFlagVariants:{}}})},e.trackImpression=function(t,n,r,o,s){if(void 0===o&&(o={}),void 0===s&&(s=!1),e.raiseIfNotInstantiated(),e.isMockMode())return!0;var u=(new Date).toISOString(),c=e.instance.getExperimentAssignmentFromStore(t);if(-1===Object.keys(i).map(function(e){return i[e]}).indexOf(r))return e.warnToRollbar("AXP Client Invalid Impression Type",new Error("Invalid impressionType "+r+" for "+t+"-"+n)),!1;if(c){if(!c.hasVariant)return!1;if(c.variantName!==n)return e.warnToRollbar("AXP Client Assignment vs. Impression Variant Mismatch",new Error("Mismatched variantName on assignment for "+t+": "+n+" instead of "+c.variantName)),!1;var l=a(c,r,u,o);return e.instance.impressionsQueue.push(l),s&&e.instance.flushImpressionsAndSetTimer(),!0}return e.warnToRollbar("AXP Client No Assignment But Impression Fired",new Error("Assignment missing but impression fired: "+t+"-"+n)),!1},e.setCustomAttribute=function(t,n){e.raiseIfNotInstantiated(),e.instance.customAttributesInstance.setAttribute(t,n)},e.clearCustomAttribute=function(t){e.raiseIfNotInstantiated(),e.instance.customAttributesInstance.clearAttribute(t)};var t=e.prototype;return t.getExperimentAssignmentFromStore=function(e){return this.experimentsStorageInstance.getItem(e)},t.getFeatureFlagAssignmentFromStore=function(e){return this.featureFlagsStorageInstance.getItem(e)},t.addExperimentAssignmentToStore=function(e,t){this.experimentsStorageInstance.putItem(e,t)},t.addFeatureFlagAssignmentToStore=function(e,t){this.featureFlagsStorageInstance.putItem(e,t)},t.canUseExistingAssignment=function(e,t,n){void 0===n&&(n={});var r=new Date(Date.now());return r.setMilliseconds(-1*this.clientConfigInstance.config.cacheTtlMs),!(e.assignmentAt<r.toISOString()||!S(e.customAttributesData,t)||!S(e.relatedUnits,n))},t.fetchAssignments=function(t,n,r,i){var a=o()(t),s=o()(n),u=this.clientConfigInstance.config.assignmentFetchTimeoutMs;return this.apiInstance.getAssignments(a,s,r,i,u).catch(function(t){return e.warnToRollbar("AXP Client Fetch Timeout",t),o()({experimentAssignments:{},featureFlagAssignments:{}})})},t.flushImpressionsAndSetTimer=function(){var t=this;clearTimeout(this.impressionsFlushTimer);var n=this.impressionsQueue.slice();return this.apiInstance.fireImpressions(n).then(function(){return!0}).catch(function(){return!1}).then(function(n){return n?(t.impressionsQueue=[],t.impressionsRetryCount=0):t.impressionsRetryCount+=1,t.impressionsRetryCount<=t.clientConfigInstance.config.networkRetryThreshold?t.impressionsFlushTimer=setTimeout(t.flushImpressionsAndSetTimer,t.clientConfigInstance.config.impressionFlushIntervalMs*Math.pow(2,t.impressionsRetryCount)):e.errorToRollbar("AXP Client Impression Fire Retry Limit Exceeded",new Error("Too many errors when trying to fire impressions. Giving up..")),n})},t.getAssignmentsFromStore=function(e,t,n,r){var o=this,i={},a=[];if(!t||!t.length)return{assignmentVariants:i,uncached:a};var s="experiment"===e?this.getExperimentAssignmentFromStore:this.getFeatureFlagAssignmentFromStore;return t.forEach(function(e){var t=s.call(o,e);t&&o.canUseExistingAssignment(t,n,r)?i[e]=t.variantName:a.push(e)}),{assignmentVariants:i,uncached:a}},e.errorToRollbar=function(e,t,n){void 0===n&&(n=!1);var r=t.message,o=window.Rollbar||window.affirm&&window.affirm.Rollbar;o&&(n?o.warn(e,r,{version:"v2"}):o.error(e,r,{version:"v2"}))},e.warnToRollbar=function(t,n){e.errorToRollbar(t,n,!0)},e.raiseIfNotInstantiated=function(){if(!e.instance)throw Error("Axp Client has not been instantiated")},e.isMockMode=function(){return"true"===u.a.get("_axp_mock_mode")},e.useMockResults=function(t){var n=t.experimentNames,r=t.featureFlagNames;return{experimentVariants:e.fetchFromCookies(n,"experiment"),featureFlagVariants:e.fetchFromCookies(r,"featureFlag")}},e.fetchFromCookies=function(e,t){var n=M[t],r={};return e.forEach(function(e){r[e]=u.a.get(n+"_"+e)}),r},e}();P(C,"instance",null),P(C,"constants",{relatedUnits:{application_ari:"application_ari",charge_ari:"charge_ari",checkout_ari:"checkout_ari",device_id:"device_id",guarantee_ari:"guarantee_ari",merchant_ari:"merchant_ari",merchant_public_key:"merchant_public_key",offer_ari:"offer_ari",prequal_ari:"prequal_ari",root_flow_type:"root_flow_type",root_flow_ari:"root_flow_ari",session_ari:"session_ari",user_ari:"user_ari"}});var R=C,x="axp/GET-ASSIGNMENTS-SENT",j="axp/GET-ASSIGNMENTS-SUCCESS",D="axp/GET-ASSIGNMENTS-FAILED",N=function(e){return function(t){var n=t.dispatch;return function(t){return function(r){if(!e)throw new Error("Axp Client is not initialized");if(function(e){return"object"==typeof e&&"axp/CLEAR_CUSTOM_ATTRIBUTE"===e.type}(r)){var o=r.attributeKey;return R.clearCustomAttribute(o),t(r)}if(function(e){return"object"==typeof e&&"axp/GET_ASSIGNMENTS"===e.type}(r)){var i=r.experimentNames,a=r.featureFlagNames,s=r.pendingActions,u=r.successActions,c=r.failureActions,l=r.sideEffectData;return s&&s.forEach(function(e){n({type:e,experimentNames:i,featureFlagNames:a,sideEffectData:l})}),R.getAxpVariants({experimentNames:i,featureFlagNames:a}).then(function(e){var t=e.experimentVariants,r=e.featureFlagVariants;return u.forEach(function(e){n({type:e,experimentVariants:t,featureFlagVariants:r,experimentNames:i,featureFlagNames:a,sideEffectData:l})}),t}).catch(function(e){return c.forEach(function(t){n({type:t,error:e.message,experimentNames:i,featureFlagNames:a,sideEffectData:l})}),!1})}if(function(e){return"object"==typeof e&&"axp/SET_CUSTOM_ATTRIBUTE"===e.type}(r)){var f=r.attributeKey,d=r.attributeValue;return R.setCustomAttribute(f,d),t(r)}if(function(e){return"object"==typeof e&&"axp/TRACK_IMPRESSION"===e.type}(r)){var p=r.experimentName,h=r.variantName,m=r.impressionType,g=r.additionalData,y=r.flushImmediately;return R.trackImpression(p,h,m,g,!!y),t(r)}return t(r)}}}},L=function(e){var t=e.experimentNames,n=e.featureFlagNames,r=e.pendingAction,o=e.successAction,i=e.failureAction,a=e.sideEffectData;return{type:"axp/GET_ASSIGNMENTS",experimentNames:t,featureFlagNames:n,pendingActions:[x,r].filter(function(e){return!!e}),successActions:[j,o].filter(function(e){return!!e}),failureActions:[D,i].filter(function(e){return!!e}),sideEffectData:a}},F=function(e){var t=e.experimentName,n=e.variantName,r=e.impressionType,o=e.impressionData,i=void 0===o?{}:o,a=e.flushImmediately;return{type:"axp/TRACK_IMPRESSION",experimentName:t,variantName:n,impressionType:r,additionalData:i,flushImmediately:void 0!==a&&a}},U=function(e){return{type:"axp/SET_CUSTOM_ATTRIBUTE",attributeKey:e.attributeKey,attributeValue:e.attributeValue}},B=function(e){return{type:"axp/CLEAR_CUSTOM_ATTRIBUTE",attributeKey:e.attributeKey}},H=function(e){var t=e.currentAxpAssignments,n=e.experimentVariants,r=e.fetchedExperimentNames,o=e.fetchStatus,i=e.featureFlagVariants,a=e.fetchedFeatureFlagNames,s={},u={},c={},l={};if(t){var f=t.experimentVariants,d=t.experimentVariantsFetchStatus,p=t.featureFlagVariants,h=t.featureFlagVariantsFetchStatus;Object.keys(f).forEach(function(e){s[e]=f[e],u[e]=d[e]}),Object.keys(p).forEach(function(e){c[e]=p[e],l[e]=h[e]})}var m=n||{},g=i||{};return r&&r.forEach(function(e){s[e]=m[e],u[e]=o}),a&&a.forEach(function(e){c[e]=g[e],l[e]=o}),{experimentVariants:s,experimentVariantsFetchStatus:u,featureFlagVariants:c,featureFlagVariantsFetchStatus:l}},W=H({currentAxpAssignments:null,experimentVariants:null,fetchedExperimentNames:[],fetchStatus:v.PENDING,featureFlagVariants:null,featureFlagFetchStatus:v.PENDING,fetchedFeatureFlagNames:[]}),V=function(e,t,n,r){var o,i=e||(n?n(W):W);switch(r&&(i=r(i)),t.type){case x:o=H({currentAxpAssignments:i,experimentVariants:null,fetchedExperimentNames:t.experimentNames,fetchStatus:v.PENDING,featureFlagVariants:null,fetchedFeatureFlagNames:t.featureFlagNames});break;case j:o=H({currentAxpAssignments:i,experimentVariants:t.experimentVariants,fetchedExperimentNames:t.experimentNames,fetchStatus:v.SUCCESS,featureFlagVariants:t.featureFlagVariants,fetchedFeatureFlagNames:t.featureFlagNames});break;case D:o=H({currentAxpAssignments:i,experimentVariants:null,fetchedExperimentNames:t.experimentNames,fetchStatus:v.FAILED,featureFlagVariants:null,fetchedFeatureFlagNames:t.featureFlagNames});break;default:o=i}return n?n(o):o},q=function(e,t){return V(e,t)},G=function(e){var t=e.wrapper,n=e.unWrapper;if(!t||!n)throw Error("Both wrapper and unWrapper functions are required");return function(e,r){return V(e,r,t,n)}},Q=i.SHOWN_DEFAULT,Y=i.SHOWN_TREATMENT},function(e,t){var n=function(){n={};var e=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;if(e){Object.keys(Object.getPrototypeOf(e.timing)).forEach(function(t){"function"!=typeof e.timing[t]&&(n[t]=e.timing[t])});var t=n.fetchStart;Object.keys(n).forEach(function(e){0!==n[e]&&(n[e]=n[e]-t)}),Object.assign(n,{TTFB:n.responseStart,contentDownloadTime:n.responseEnd-n.responseStart,domContentLoaded:n.domContentLoadedEventStart-n.domLoading,domProcessing:n.domComplete-n.domLoading,pageLoadTime:n.loadEventEnd})}return n};e.exports=n},function(e,t){var n=["Android","BlackBerry","iPad","iPhone","iPod","webOS","Windows Phone"],r=["Linux","Macintosh","Windows"];function o(e){for(var t=0;t<n.length;t+=1){var o=n[t];if(-1!==e.indexOf(o))return o}for(var i=0;i<r.length;i+=1){var a=r[i];if(-1!==e.indexOf(a))return a}return"Other"}e.exports={parseUserAgentIntoDeviceType:o,isMobile:function(){var e=o(navigator.userAgent);return-1!==n.indexOf(e)}}},function(e,t){e.exports={loadEventListener:function(e){"complete"===document.readyState?e():window.addEventListener&&window.addEventListener("load",e,!1)}}},function(e,t,n){(function(n){var r;!function(){var o="undefined"!=typeof window&&window===this?this:void 0!==n&&null!=n?n:this,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function a(){a=function(){},o.Symbol||(o.Symbol=u)}var s=0;function u(e){return"jscomp_symbol_"+(e||"")+s++}function c(){a();var e=o.Symbol.iterator;e||(e=o.Symbol.iterator=o.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&i(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return l(this)}}),c=function(){}}function l(e){var t=0;return function(e){return c(),(e={next:e})[o.Symbol.iterator]=function(){return this},e}(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function f(e){c();var t=e[Symbol.iterator];return t?t.call(e):l(e)}function d(e){if(!(e instanceof Array)){e=f(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var p=0;var h="img script iframe link audio video source".split(" ");function m(e,t){for(var n=(e=f(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||m(n.children,t))return!0;return!1}function g(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=f(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=f(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort(function(e,t){return e.timestamp-t.timestamp}),e=e.length,t=n.length-1;0<=t;t--)switch(r=n[t],r.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function y(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var t=window.__tti&&window.__tti.o;this.a=e?e.map(function(e){return{start:e.startTime,end:e.startTime+e.duration}}):[],t&&t.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(e,t){var n=XMLHttpRequest.prototype.send,r=p++;XMLHttpRequest.prototype.send=function(o){for(var i=[],a=0;a<arguments.length;++a)i[a-0]=arguments[a];var s=this;return e(r),this.addEventListener("readystatechange",function(){4===s.readyState&&t(r)}),n.apply(this,i)}}(this.m.bind(this),this.l.bind(this)),function(e,t){var n=fetch;fetch=function(r){for(var o=[],i=0;i<arguments.length;++i)o[i-0]=arguments[i];return new Promise(function(r,i){var a=p++;e(a),n.apply(null,[].concat(d(o))).then(function(e){t(a),r(e)},function(e){t(e),i(e)})})}}(this.m.bind(this),this.l.bind(this)),function(e){e.c=new PerformanceObserver(function(t){for(var n=(t=f(t.getEntries())).next();!n.done;n=t.next())if("resource"===(n=n.value).entryType&&(e.b.push({start:n.fetchStart,end:n.responseEnd}),A(e,g(e.g,e.b)+5e3)),"longtask"===n.entryType){var r=n.startTime+n.duration;e.a.push({start:n.startTime,end:r}),A(e,r+5e3)}}),e.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(e){var t=new MutationObserver(function(t){for(var n=(t=f(t)).next();!n.done;n=t.next())"childList"==(n=n.value).type&&m(n.addedNodes,h)?e(n):"attributes"==n.type&&h.includes(n.target.tagName.toLowerCase())&&e(n)});return t.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t}(this.B.bind(this)))}function v(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=g(e.g,e.b);A(e,Math.max(n+5e3,t))}function A(e,t){!e.i||e.v>t||(clearTimeout(e.j),e.j=setTimeout(function(){var t=performance.timing.navigationStart,n=g(e.g,e.b);t=(window.a&&window.a.A?1e3*window.a.A().C-t:0)||performance.timing.domContentLoadedEventEnd-t;if(e.u)var r=e.u;else performance.timing.domContentLoadedEventEnd?r=(r=performance.timing).domContentLoadedEventEnd-r.navigationStart:r=null;var o=performance.now();null===r&&A(e,Math.max(n+5e3,o+1e3));var i=e.a;5e3>o-n?n=null:n=5e3>o-(n=i.length?i[i.length-1].end:t)?null:Math.max(n,r),n&&(e.s(n),clearTimeout(e.j),e.i=!1,e.c&&e.c.disconnect(),e.h&&e.h.disconnect()),A(e,performance.now()+1e3)},t-performance.now()),e.v=t)}y.prototype.getFirstConsistentlyInteractive=function(){var e=this;return new Promise(function(t){e.s=t,"complete"==document.readyState?v(e):window.addEventListener("load",function(){v(e)})})},y.prototype.m=function(e){this.f.set(e,performance.now())},y.prototype.l=function(e){this.f.delete(e)},y.prototype.B=function(){A(this,performance.now()+5e3)},o.Object.defineProperties(y.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(d(this.f.values()))}}});var b={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new y(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};e.exports?e.exports=b:void 0===(r=function(){return b}.apply(t,[]))||(e.exports=r)}()}).call(this,n(44))},function(e,t,n){"use strict";n(77).polyfill(),n(78).polyfill(),n(80),n(81),n(85),(0,n(28).default)("config",n(3).default),(0,n(118).default)();try{n(156),n(161).default()}catch(e){Math.random()<.01&&window.affirm&&window.affirm.Rollbar&&window.affirm.Rollbar.error(e)}},function(e,t,n){"use strict";function r(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var u=i[a],c=Object.getOwnPropertyDescriptor(o,u);void 0!==c&&c.enumerable&&(n[u]=o[u])}}return n}e.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},function(e,t,n){(function(t,n){var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,s=function(e,t){h[o]=e,h[o+1]=t,2===(o+=2)&&(a?a(m):b())};var u="undefined"!=typeof window?window:void 0,c=u||{},l=c.MutationObserver||c.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var h=new Array(1e3);function m(){for(var e=0;e<o;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}o=0}var g,y,v,A,b=void 0;function _(e,t){var n=this,r=new this.constructor(k);void 0===r[E]&&L(r);var o=n._state;if(o){var i=arguments[o-1];s(function(){return D(o,r,i,n._result)})}else x(n,r,e,t);return r}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(k);return T(t,e),t}f?b=function(){return t.nextTick(m)}:l?(y=0,v=new l(m),A=document.createTextNode(""),v.observe(A,{characterData:!0}),b=function(){A.data=y=++y%2}):d?((g=new MessageChannel).port1.onmessage=m,b=function(){return g.port2.postMessage(0)}):b=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(m)}:p()}catch(e){return p()}}():p();var E=Math.random().toString(36).substring(2);function k(){}var O=void 0,S=1,P=2;function I(t,n,r){n.constructor===t.constructor&&r===_&&n.constructor.resolve===w?function(e,t){t._state===S?C(e,t._result):t._state===P?R(e,t._result):x(t,void 0,function(t){return T(e,t)},function(t){return R(e,t)})}(t,n):void 0===r?C(t,n):e(r)?function(e,t,n){s(function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?T(e,n):C(e,n))},function(t){r||(r=!0,R(e,t))},e._label);!r&&o&&(r=!0,R(e,o))},e)}(t,n,r):C(t,n)}function T(e,t){if(e===t)R(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=t),null===r||"object"!==o&&"function"!==o)C(e,t);else{var n=void 0;try{n=t.then}catch(t){return void R(e,t)}I(e,t,n)}var r,o}function M(e){e._onerror&&e._onerror(e._result),j(e)}function C(e,t){e._state===O&&(e._result=t,e._state=S,0!==e._subscribers.length&&s(j,e))}function R(e,t){e._state===O&&(e._state=P,e._result=t,s(M,e))}function x(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+S]=n,o[i+P]=r,0===i&&e._state&&s(j,e)}function j(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?D(n,r,o,i):o(i);e._subscribers.length=0}}function D(t,n,r,o){var i=e(r),a=void 0,s=void 0,u=!0;if(i){try{a=r(o)}catch(e){u=!1,s=e}if(n===a)return void R(n,new TypeError("A promises callback cannot return that same promise."))}else a=o;n._state!==O||(i&&u?T(n,a):!1===u?R(n,s):t===S?C(n,a):t===P&&R(n,a))}var N=0;function L(e){e[E]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}var F=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[E]||L(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&C(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===O&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===w){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(e){a=!0,i=e}if(o===_&&e._state!==O)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===U){var s=new n(k);a?R(s,i):I(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===O&&(this._remaining--,e===P?R(r,n):this._result[t]=n),0===this._remaining&&C(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;x(e,void 0,function(e){return n._settledAt(S,t,e)},function(e){return n._settledAt(P,t,e)})},e}();var U=function(){function t(e){this[E]=N++,this._result=this._state=void 0,this._subscribers=[],k!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){T(e,t)},function(t){R(e,t)})}catch(t){R(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return U.prototype.then=_,U.all=function(e){return new F(this,e).promise},U.race=function(e){var t=this;return r(e)?new t(function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},U.resolve=w,U.reject=function(e){var t=new this(k);return R(t,e),t},U._setScheduler=function(e){a=e},U._setAsap=function(e){s=e},U._asap=s,U.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=U},U.Promise=U,U},e.exports=r()}).call(this,n(79),n(44))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},o=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};l.prototype.append=function(e,t){e=s(e),t=u(t);var n=this.map[e];this.map[e]=n?n+","+t:t},l.prototype.delete=function(e){delete this.map[s(e)]},l.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},l.prototype.set=function(e,t){this.map[s(e)]=u(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),c(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),c(e)},t.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},m.call(g.prototype),m.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];v.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=g,e.Response=v,e.fetch=function(e,n){return new Promise(function(r,o){var i=new g(e,n),a=new XMLHttpRequest;a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new v(o,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function p(e){var t=new FileReader,n=d(t);return t.readAsArrayBuffer(e),n}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!o(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=h(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e,t,n,r=f(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=d(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(e,t){var n,r,o=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),i.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function v(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,n){},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSamplingRateChecker=l;var r=c(n(86)),o=c(n(106)),i=c(n(47)),a=c(n(108)),s=c(n(109)),u=c(n(110));function c(e){return e&&e.__esModule?e:{default:e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])[0],r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(t instanceof Error?t.toString():t).toLowerCase(),r=Object.keys(e).find(function(e){return n.indexOf(e.toLowerCase())>=0});return r?{samplingRate:e[r]}:null}(e,n);if(r){var o=Math.random();return r.samplingRate<o}return!1}}r.default.setComponents({telemeter:a.default,instrumenter:o.default,polyfillJSON:u.default,scrub:i.default,truncation:s.default}),(window.affirm||{}).Rollbar=new r.default({accessToken:"a118d4416b08480984711912aca9ac51",autoInstrument:!1,captureUncaught:!0,hostWhiteList:["affirm.js"],scrubTelemetryInputs:!0,payload:{client:{javascript:{code_version:"".concat("affirm-js",":").concat("10.92.4"),guess_uncaught_frames:!0,source_map_enabled:!0}},environment:"".concat("affirm-js","-").concat("live")},checkIgnore:l({"Error conducting third party cookie check":.01,"Unexpected token / in JSON at position 0":.01,cancelled:.01,"property 'setAttribute' of undefined":.2,"property 'setAttribute' of null":.2,"property '0' of undefined":.2,"property '0' of null":.2,"property 'toString' of undefined":.1,"property 'toString' of null":.1,"Can't find variable: variant":.2,"variant is not defined":.2,"null is not an object (evaluating 'w.$(G).append')":.1,"affirm.ui.refresh is not a function":.1})})},function(e,t,n){var r=n(87),o=n(6),i=n(92),a=n(27),s=n(96),u=n(97),c=n(45),l=n(98),f=n(101),d=n(102),p=n(103),h=n(46);function m(e,t){this.options=o.handleOptions(w,e),this.options._configuredOptions=e;var n=this.components.telemeter,s=this.components.instrumenter,h=this.components.polyfillJSON;this.wrapGlobals=this.components.wrapGlobals,this.scrub=this.components.scrub;var m=this.components.truncation,g=new u(m),y=new i(this.options,g,c,m);n&&(this.telemeter=new n(this.options)),this.client=t||new r(this.options,y,a,this.telemeter,"browser");var v=A(),b="undefined"!=typeof document&&document;this.isChrome=v.chrome&&v.chrome.runtime,this.anonymousErrorsPending=0,function(e,t,n){e.addTransform(l.handleDomException).addTransform(l.handleItemWithError).addTransform(l.ensureItemHasSomethingToSay).addTransform(l.addBaseInfo).addTransform(l.addRequestInfo(n)).addTransform(l.addClientInfo(n)).addTransform(l.addPluginInfo(n)).addTransform(l.addBody).addTransform(f.addMessageWithError).addTransform(f.addTelemetryData).addTransform(f.addConfigToPayload).addTransform(l.addScrubber(t.scrub)).addTransform(f.userTransform(a)).addTransform(f.addConfiguredOptions).addTransform(f.addDiagnosticKeys).addTransform(f.itemToPayload)}(this.client.notifier,this,v),this.client.queue.addPredicate(p.checkLevel).addPredicate(d.checkIgnore).addPredicate(p.userCheckIgnore(a)).addPredicate(p.urlIsNotBlacklisted(a)).addPredicate(p.urlIsWhitelisted(a)).addPredicate(p.messageIsIgnored(a)),this.setupUnhandledCapture(),s&&(this.instrumenter=new s(this.options,this.client.telemeter,this,v,b),this.instrumenter.instrument()),o.setupJSON(h)}var g=null;function y(e){var t="Rollbar is not initialized";a.error(t),e&&e(new Error(t))}function v(e){for(var t=0,n=e.length;t<n;++t)if(o.isFunction(e[t]))return e[t]}function A(){return"undefined"!=typeof window&&window||"undefined"!=typeof self&&self}m.init=function(e,t){return g?g.global(e).configure(e):g=new m(e,t)},m.prototype.components={},m.setComponents=function(e){m.prototype.components=e},m.prototype.global=function(e){return this.client.global(e),this},m.global=function(e){if(g)return g.global(e);y()},m.prototype.configure=function(e,t){var n=this.options,r={};return t&&(r={payload:t}),this.options=o.handleOptions(n,e,r),this.options._configuredOptions=o.handleOptions(n._configuredOptions,e,r),this.client.configure(this.options,t),this.instrumenter&&this.instrumenter.configure(this.options),this.setupUnhandledCapture(),this},m.configure=function(e,t){if(g)return g.configure(e,t);y()},m.prototype.lastError=function(){return this.client.lastError},m.lastError=function(){if(g)return g.lastError();y()},m.prototype.log=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.log(e),{uuid:t}},m.log=function(){if(g)return g.log.apply(g,arguments);y(v(arguments))},m.prototype.debug=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.debug(e),{uuid:t}},m.debug=function(){if(g)return g.debug.apply(g,arguments);y(v(arguments))},m.prototype.info=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.info(e),{uuid:t}},m.info=function(){if(g)return g.info.apply(g,arguments);y(v(arguments))},m.prototype.warn=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.warn(e),{uuid:t}},m.warn=function(){if(g)return g.warn.apply(g,arguments);y(v(arguments))},m.prototype.warning=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.warning(e),{uuid:t}},m.warning=function(){if(g)return g.warning.apply(g,arguments);y(v(arguments))},m.prototype.error=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.error(e),{uuid:t}},m.error=function(){if(g)return g.error.apply(g,arguments);y(v(arguments))},m.prototype.critical=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.critical(e),{uuid:t}},m.critical=function(){if(g)return g.critical.apply(g,arguments);y(v(arguments))},m.prototype.buildJsonPayload=function(e){return this.client.buildJsonPayload(e)},m.buildJsonPayload=function(){if(g)return g.buildJsonPayload.apply(g,arguments);y()},m.prototype.sendJsonPayload=function(e){return this.client.sendJsonPayload(e)},m.sendJsonPayload=function(){if(g)return g.sendJsonPayload.apply(g,arguments);y()},m.prototype.setupUnhandledCapture=function(){var e=A();this.unhandledExceptionsInitialized||(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(s.captureUncaughtExceptions(e,this),this.wrapGlobals&&this.options.wrapGlobalEventHandlers&&this.wrapGlobals(e,this),this.unhandledExceptionsInitialized=!0),this.unhandledRejectionsInitialized||(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&(s.captureUnhandledRejections(e,this),this.unhandledRejectionsInitialized=!0)},m.prototype.handleUncaughtException=function(e,t,n,r,i,a){if(this.options.captureUncaught||this.options.handleUncaughtExceptions){if(this.options.inspectAnonymousErrors&&this.isChrome&&null===i)return"anonymous";var s,u=o.makeUnhandledStackInfo(e,t,n,r,i,"onerror","uncaught exception",h);o.isError(i)?(s=this._createItem([e,i,a]))._unhandledStackInfo=u:o.isError(t)?(s=this._createItem([e,t,a]))._unhandledStackInfo=u:(s=this._createItem([e,a])).stackInfo=u,s.level=this.options.uncaughtErrorLevel,s._isUncaught=!0,this.client.log(s)}},m.prototype.handleAnonymousErrors=function(){if(this.options.inspectAnonymousErrors&&this.isChrome){var e=this;try{Error.prepareStackTrace=function(t,n){if(e.options.inspectAnonymousErrors&&e.anonymousErrorsPending){if(e.anonymousErrorsPending-=1,!t)return;t._isAnonymous=!0,e.handleUncaughtException(t.message,null,null,null,t)}return t.stack}}catch(e){this.options.inspectAnonymousErrors=!1,this.error("anonymous error handler failed",e)}}},m.prototype.handleUnhandledRejection=function(e,t){if(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections){var n="unhandled rejection was null or undefined!";if(e)if(e.message)n=e.message;else{var r=o.stringify(e);r.value&&(n=r.value)}var i,a=e&&e._rollbarContext||t&&t._rollbarContext;o.isError(e)?i=this._createItem([n,e,a]):(i=this._createItem([n,e,a])).stackInfo=o.makeUnhandledStackInfo(n,"",0,0,null,"unhandledrejection","",h),i.level=this.options.uncaughtErrorLevel,i._isUncaught=!0,i._originalArgs=i._originalArgs||[],i._originalArgs.push(t),this.client.log(i)}},m.prototype.wrap=function(e,t,n){try{var r;if(r=o.isFunction(t)?t:function(){return t||{}},!o.isFunction(e))return e;if(e._isWrap)return e;if(!e._rollbar_wrapped&&(e._rollbar_wrapped=function(){n&&o.isFunction(n)&&n.apply(this,arguments);try{return e.apply(this,arguments)}catch(n){var t=n;throw t&&window._rollbarWrappedError!==t&&(o.isType(t,"string")&&(t=new String(t)),t._rollbarContext=r()||{},t._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=t),t}},e._rollbar_wrapped._isWrap=!0,e.hasOwnProperty))for(var i in e)e.hasOwnProperty(i)&&"_rollbar_wrapped"!==i&&(e._rollbar_wrapped[i]=e[i]);return e._rollbar_wrapped}catch(t){return e}},m.wrap=function(e,t){if(g)return g.wrap(e,t);y()},m.prototype.captureEvent=function(){var e=o.createTelemetryEvent(arguments);return this.client.captureEvent(e.type,e.metadata,e.level)},m.captureEvent=function(){if(g)return g.captureEvent.apply(g,arguments);y()},m.prototype.captureDomContentLoaded=function(e,t){return t||(t=new Date),this.client.captureDomContentLoaded(t)},m.prototype.captureLoad=function(e,t){return t||(t=new Date),this.client.captureLoad(t)},m.prototype.loadFull=function(){a.info("Unexpected Rollbar.loadFull() called on a Notifier instance. This can happen when Rollbar is loaded multiple times.")},m.prototype._createItem=function(e){return o.createItem(e,a,this)};var b=n(104),_=n(105),w={version:b.version,scrubFields:_.scrubFields,logLevel:b.logLevel,reportLevel:b.reportLevel,uncaughtErrorLevel:b.uncaughtErrorLevel,endpoint:b.endpoint,verbose:!1,enabled:!0,transmit:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0,inspectAnonymousErrors:!0,ignoreDuplicateErrors:!0,wrapGlobalEventHandlers:!1};e.exports=m},function(e,t,n){var r=n(88),o=n(90),i=n(91),a=n(6);function s(e,t,n,r,l){this.options=a.merge(e),this.logger=n,s.rateLimiter.configureGlobal(this.options),s.rateLimiter.setPlatformOptions(l,this.options),this.api=t,this.queue=new o(s.rateLimiter,t,n,this.options);var f=this.options.tracer||null;c(f)?(this.tracer=f,this.options.tracer="opentracing-tracer-enabled",this.options._configuredOptions.tracer="opentracing-tracer-enabled"):this.tracer=null,this.notifier=new i(this.queue,this.options),this.telemeter=r,u(e),this.lastError=null,this.lastErrorHash="none"}function u(e){e.stackTraceLimit&&(Error.stackTraceLimit=e.stackTraceLimit)}function c(e){if(!e)return!1;if(!e.scope||"function"!=typeof e.scope)return!1;var t=e.scope();return!(!t||!t.active||"function"!=typeof t.active)}s.rateLimiter=new r({maxItems:0,itemsPerMinute:60}),s.prototype.global=function(e){return s.rateLimiter.configureGlobal(e),this},s.prototype.configure=function(e,t){var n=this.options,r={};t&&(r={payload:t}),this.options=a.merge(n,e,r);var o=this.options.tracer||null;return c(o)?(this.tracer=o,this.options.tracer="opentracing-tracer-enabled",this.options._configuredOptions.tracer="opentracing-tracer-enabled"):this.tracer=null,this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),u(e),this.global(this.options),c(e.tracer)&&(this.tracer=e.tracer),this},s.prototype.log=function(e){var t=this._defaultLogLevel();return this._log(t,e)},s.prototype.debug=function(e){this._log("debug",e)},s.prototype.info=function(e){this._log("info",e)},s.prototype.warn=function(e){this._log("warning",e)},s.prototype.warning=function(e){this._log("warning",e)},s.prototype.error=function(e){this._log("error",e)},s.prototype.critical=function(e){this._log("critical",e)},s.prototype.wait=function(e){this.queue.wait(e)},s.prototype.captureEvent=function(e,t,n){return this.telemeter&&this.telemeter.captureEvent(e,t,n)},s.prototype.captureDomContentLoaded=function(e){return this.telemeter&&this.telemeter.captureDomContentLoaded(e)},s.prototype.captureLoad=function(e){return this.telemeter&&this.telemeter.captureLoad(e)},s.prototype.buildJsonPayload=function(e){return this.api.buildJsonPayload(e)},s.prototype.sendJsonPayload=function(e){this.api.postJsonPayload(e)},s.prototype._log=function(e,t){var n;if(t.callback&&(n=t.callback,delete t.callback),this.options.ignoreDuplicateErrors&&this._sameAsLastError(t)){if(n){var r=new Error("ignored identical item");r.item=t,n(r)}}else try{this._addTracingInfo(t),t.level=t.level||e,this.telemeter&&this.telemeter._captureRollbarItem(t),t.telemetryEvents=this.telemeter&&this.telemeter.copyEvents()||[],this.notifier.log(t,n)}catch(e){this.logger.error(e)}},s.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},s.prototype._sameAsLastError=function(e){if(!e._isUncaught)return!1;var t=function(e){var t=e.message||"",n=(e.err||{}).stack||String(e.err);return t+"::"+n}(e);return this.lastErrorHash===t||(this.lastError=e.err,this.lastErrorHash=t,!1)},s.prototype._addTracingInfo=function(e){if(this.tracer){var t=this.tracer.scope().active();if(function(e){if(!e||!e.context||"function"!=typeof e.context)return!1;var t=e.context();if(!t||!t.toSpanId||!t.toTraceId||"function"!=typeof t.toSpanId||"function"!=typeof t.toTraceId)return!1;return!0}(t)){t.setTag("rollbar.error_uuid",e.uuid),t.setTag("rollbar.has_error",!0);var n=t.context().toSpanId(),r=t.context().toTraceId();e.custom?(e.custom.opentracing_span_id=n,e.custom.opentracing_trace_id=r):e.custom={opentracing_span_id:n,opentracing_trace_id:r}}}},e.exports=s},function(e,t,n){var r=n(6);function o(e){this.startTime=r.now(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(e)}function i(e,t,n){return!e.ignoreRateLimit&&t>=1&&n>t}function a(e,t,n,r,o,i,a){var s=null;return n&&(n=new Error(n)),n||r||(s=function(e,t,n,r,o){var i,a=t.environment||t.payload&&t.payload.environment;i=o?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.";var s={body:{message:{body:i,extra:{maxItems:n,itemsPerMinute:r}}},language:"javascript",environment:a,notifier:{version:t.notifier&&t.notifier.version||t.version}};"browser"===e?(s.platform="browser",s.framework="browser-js",s.notifier.name="rollbar-browser-js"):"server"===e?(s.framework=t.framework||"node-js",s.notifier.name=t.notifier.name):"react-native"===e&&(s.framework=t.framework||"react-native",s.notifier.name=t.notifier.name);return s}(e,t,o,i,a)),{error:n,shouldSend:r,payload:s}}o.globalSettings={startTime:r.now(),maxItems:void 0,itemsPerMinute:void 0},o.prototype.configureGlobal=function(e){void 0!==e.startTime&&(o.globalSettings.startTime=e.startTime),void 0!==e.maxItems&&(o.globalSettings.maxItems=e.maxItems),void 0!==e.itemsPerMinute&&(o.globalSettings.itemsPerMinute=e.itemsPerMinute)},o.prototype.shouldSend=function(e,t){var n=(t=t||r.now())-this.startTime;(n<0||n>=6e4)&&(this.startTime=t,this.perMinCounter=0);var s=o.globalSettings.maxItems,u=o.globalSettings.itemsPerMinute;if(i(e,s,this.counter))return a(this.platform,this.platformOptions,s+" max items reached",!1);if(i(e,u,this.perMinCounter))return a(this.platform,this.platformOptions,u+" items per minute reached",!1);this.counter++,this.perMinCounter++;var c=!i(e,s,this.counter),l=c;return c=c&&!i(e,u,this.perMinCounter),a(this.platform,this.platformOptions,null,c,s,u,l)},o.prototype.setPlatformOptions=function(e,t){this.platform=e,this.platformOptions=t},e.exports=o},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t,n=r.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;for(t in e);return void 0===t||r.call(e,t)};e.exports=function e(){var t,n,r,o,a,s={},u=null,c=arguments.length;for(t=0;t<c;t++)if(null!=(u=arguments[t]))for(a in u)n=s[a],s!==(r=u[a])&&(r&&i(r)?(o=n&&i(n)?n:{},s[a]=e(o,r)):void 0!==r&&(s[a]=r));return s}},function(e,t,n){var r=n(6);function o(e,t,n,r){this.rateLimiter=e,this.api=t,this.logger=n,this.options=r,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}o.prototype.configure=function(e){this.api&&this.api.configure(e);var t=this.options;return this.options=r.merge(t,e),this},o.prototype.addPredicate=function(e){return r.isFunction(e)&&this.predicates.push(e),this},o.prototype.addPendingItem=function(e){this.pendingItems.push(e)},o.prototype.removePendingItem=function(e){var t=this.pendingItems.indexOf(e);-1!==t&&this.pendingItems.splice(t,1)},o.prototype.addItem=function(e,t,n,o){t&&r.isFunction(t)||(t=function(){});var i=this._applyPredicates(e);if(i.stop)return this.removePendingItem(o),void t(i.err);if(this._maybeLog(e,n),this.removePendingItem(o),this.options.transmit){this.pendingRequests.push(e);try{this._makeApiRequest(e,function(n,r){this._dequeuePendingRequest(e),t(n,r)}.bind(this))}catch(n){this._dequeuePendingRequest(e),t(n)}}else t(new Error("Transmit disabled"))},o.prototype.wait=function(e){r.isFunction(e)&&(this.waitCallback=e,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))},o.prototype._applyPredicates=function(e){for(var t=null,n=0,r=this.predicates.length;n<r;n++)if(!(t=this.predicates[n](e,this.options))||void 0!==t.err)return{stop:!0,err:t.err};return{stop:!1,err:null}},o.prototype._makeApiRequest=function(e,t){var n=this.rateLimiter.shouldSend(e);n.shouldSend?this.api.postItem(e,function(n,r){n?this._maybeRetry(n,e,t):t(n,r)}.bind(this)):n.error?t(n.error):this.api.postItem(n.payload,t)};var i=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];o.prototype._maybeRetry=function(e,t,n){var r=!1;if(this.options.retryInterval)for(var o=0,a=i.length;o<a;o++)if(e.code===i[o]){r=!0;break}r?this._retryApiRequest(t,n):n(e)},o.prototype._retryApiRequest=function(e,t){this.retryQueue.push({item:e,callback:t}),this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var e=this.retryQueue.shift();this._makeApiRequest(e.item,e.callback)}}.bind(this),this.options.retryInterval))},o.prototype._dequeuePendingRequest=function(e){var t=this.pendingRequests.indexOf(e);-1!==t&&(this.pendingRequests.splice(t,1),this._maybeCallWait())},o.prototype._maybeLog=function(e,t){if(this.logger&&this.options.verbose){var n=t;if(n=(n=n||r.get(e,"body.trace.exception.message"))||r.get(e,"body.trace_chain.0.exception.message"))return void this.logger.error(n);(n=r.get(e,"body.message.body"))&&this.logger.log(n)}},o.prototype._maybeCallWait=function(){return!(!r.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length)&&(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),!0)},e.exports=o},function(e,t,n){var r=n(6);function o(e,t){this.queue=e,this.options=t,this.transforms=[],this.diagnostic={}}o.prototype.configure=function(e){this.queue&&this.queue.configure(e);var t=this.options;return this.options=r.merge(t,e),this},o.prototype.addTransform=function(e){return r.isFunction(e)&&this.transforms.push(e),this},o.prototype.log=function(e,t){if(t&&r.isFunction(t)||(t=function(){}),!this.options.enabled)return t(new Error("Rollbar is not enabled"));this.queue.addPendingItem(e);var n=e.err;this._applyTransforms(e,function(r,o){if(r)return this.queue.removePendingItem(e),t(r,null);this.queue.addItem(o,t,n,e)}.bind(this))},o.prototype._applyTransforms=function(e,t){var n=-1,r=this.transforms.length,o=this.transforms,i=this.options,a=function(e,s){e?t(e,null):++n!==r?o[n](s,i,a):t(null,s)};a(null,e)},e.exports=o},function(e,t,n){var r=n(6),o=n(93),i={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};function a(e,t,n,r,o){this.options=e,this.transport=t,this.url=n,this.truncation=r,this.jsonBackup=o,this.accessToken=e.accessToken,this.transportOptions=s(e,n)}function s(e,t){return o.getTransportFromOptions(e,i,t)}a.prototype.postItem=function(e,t){var n=o.transportOptions(this.transportOptions,"POST"),r=o.buildPayload(this.accessToken,e,this.jsonBackup);this.transport.post(this.accessToken,n,r,t)},a.prototype.buildJsonPayload=function(e,t){var n,i=o.buildPayload(this.accessToken,e,this.jsonBackup);return(n=this.truncation?this.truncation.truncate(i):r.stringify(i)).error?(t&&t(n.error),null):n.value},a.prototype.postJsonPayload=function(e,t){var n=o.transportOptions(this.transportOptions,"POST");this.transport.postJsonPayload(this.accessToken,n,e,t)},a.prototype.configure=function(e){var t=this.oldOptions;return this.options=r.merge(t,e),this.transportOptions=s(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this},e.exports=a},function(e,t,n){var r=n(6);e.exports={buildPayload:function(e,t,n){if(!r.isType(t.context,"string")){var o=r.stringify(t.context,n);o.error?t.context="Error: could not serialize 'context'":t.context=o.value||"",t.context.length>255&&(t.context=t.context.substr(0,255))}return{access_token:e,data:t}},getTransportFromOptions:function(e,t,n){var r=t.hostname,o=t.protocol,i=t.port,a=t.path,s=t.search,u=e.proxy;if(e.endpoint){var c=n.parse(e.endpoint);r=c.hostname,o=c.protocol,i=c.port,a=c.pathname,s=c.search}return{hostname:r,protocol:o,port:i,path:a,search:s,proxy:u}},transportOptions:function(e,t){var n=e.protocol||"https:",r=e.port||("http:"===n?80:"https:"===n?443:void 0),o=e.hostname,i=e.path;return e.search&&(i+=e.search),e.proxy&&(i=n+"//"+o+i,o=e.proxy.host||e.proxy.hostname,r=e.proxy.port,n=e.proxy.protocol||n),{protocol:n,hostname:o,path:i,port:r,method:t}},appendPathToPath:function(e,t){var n=/\/$/.test(e),r=/^\//.test(t);return n&&r?t=t.substring(1):n||r||(t="/"+t),e+t}}},function(e,t){!function(e){"use strict";e.console||(e.console={});for(var t,n,r=e.console,o=function(){},i=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=i.pop();)r[t]||(r[t]={});for(;n=a.pop();)r[n]||(r[n]=o)}("undefined"==typeof window?this:window)},function(e,t){var n={ieVersion:function(){if("undefined"!=typeof document){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:void 0}}};e.exports=n},function(e,t){e.exports={captureUncaughtExceptions:function(e,t,n){if(e){var r;if("function"==typeof t._rollbarOldOnError)r=t._rollbarOldOnError;else if(e.onerror){for(r=e.onerror;r._rollbarOldOnError;)r=r._rollbarOldOnError;t._rollbarOldOnError=r}t.handleAnonymousErrors();var o=function(){var n=Array.prototype.slice.call(arguments,0);!function(e,t,n,r){e._rollbarWrappedError&&(r[4]||(r[4]=e._rollbarWrappedError),r[5]||(r[5]=e._rollbarWrappedError._rollbarContext),e._rollbarWrappedError=null);var o=t.handleUncaughtException.apply(t,r);n&&n.apply(e,r),"anonymous"===o&&(t.anonymousErrorsPending+=1)}(e,t,r,n)};n&&(o._rollbarOldOnError=r),e.onerror=o}},captureUnhandledRejections:function(e,t,n){if(e){"function"==typeof e._rollbarURH&&e._rollbarURH.belongsToShim&&e.removeEventListener("unhandledrejection",e._rollbarURH);var r=function(e){var n,r,o;try{n=e.reason}catch(e){n=void 0}try{r=e.promise}catch(e){r="[unhandledrejection] error getting `promise` from event"}try{o=e.detail,!n&&o&&(n=o.reason,r=o.promise)}catch(e){}n||(n="[unhandledrejection] error getting `reason` from event"),t&&t.handleUnhandledRejection&&t.handleUnhandledRejection(n,r)};r.belongsToShim=n,e._rollbarURH=r,e.addEventListener("unhandledrejection",r)}}}},function(e,t,n){var r=n(6),o=n(27);function i(e){this.truncation=e}function a(e,t,n,r,o,i){var a="undefined"!=typeof window&&window||"undefined"!=typeof self&&self,u=a&&a.Zone&&a.Zone.current;u&&"angular"===u._name?u._parent.run(function(){s(e,t,n,r,o,i)}):s(e,t,n,r,o,i)}function s(e,t,n,i,a,s){if("undefined"!=typeof RollbarProxy)return function(e,t){(new RollbarProxy).sendJsonPayload(e,function(e){},function(e){t(new Error(e))})}(i,a);var c;if(!(c=s?s():function(){var e,t,n=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],r=n.length;for(t=0;t<r;t++)try{e=n[t]();break}catch(e){}return e}()))return a(new Error("No way to send a request"));try{try{var l=function(){try{if(l&&4===c.readyState){l=void 0;var e=r.jsonParse(c.responseText);if((i=c)&&i.status&&200===i.status)return void a(e.error,e.value);if(function(e){return e&&r.isType(e.status,"number")&&e.status>=400&&e.status<600}(c)){if(403===c.status){var t=e.value&&e.value.message;o.error(t)}a(new Error(String(c.status)))}else{a(u("XHR response had no status code (likely connection failure)"))}}}catch(e){var n;n=e&&e.stack?e:new Error(e),a(n)}var i};c.open(n,t,!0),c.setRequestHeader&&(c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("X-Rollbar-Access-Token",e)),c.onreadystatechange=l,c.send(i)}catch(e){if("undefined"!=typeof XDomainRequest){if(!window||!window.location)return a(new Error("No window available during request, unknown environment"));"http:"===window.location.href.substring(0,5)&&"https"===t.substring(0,5)&&(t="http"+t.substring(5));var f=new XDomainRequest;f.onprogress=function(){},f.ontimeout=function(){a(u("Request timed out","ETIMEDOUT"))},f.onerror=function(){a(new Error("Error during request"))},f.onload=function(){var e=r.jsonParse(f.responseText);a(e.error,e.value)},f.open(n,t,!0),f.send(i)}else a(new Error("Cannot find a method to transport a request"))}}catch(e){a(e)}}function u(e,t){var n=new Error(e);return n.code=t||"ENOTFOUND",n}i.prototype.get=function(e,t,n,o,i){o&&r.isFunction(o)||(o=function(){}),r.addParamsAndAccessTokenToPath(e,t,n);a(e,r.formatUrl(t),"GET",null,o,i)},i.prototype.post=function(e,t,n,o,i){if(o&&r.isFunction(o)||(o=function(){}),!n)return o(new Error("Cannot send empty request"));var s;if((s=this.truncation?this.truncation.truncate(n):r.stringify(n)).error)return o(s.error);var u=s.value;a(e,r.formatUrl(t),"POST",u,o,i)},i.prototype.postJsonPayload=function(e,t,n,o,i){o&&r.isFunction(o)||(o=function(){});a(e,r.formatUrl(t),"POST",n,o,i)},e.exports=i},function(e,t,n){var r=n(6),o=n(46),i=n(27);function a(e,t,n){var o=e.message,i=e.custom;o||(o="Item sent with null or missing arguments.");var a={body:o};i&&(a.extra=r.merge(i)),r.set(e,"data.body",{message:a}),n(null,e)}function s(e){var t=e.stackInfo.stack;return t&&0===t.length&&e._unhandledStackInfo&&e._unhandledStackInfo.stack&&(t=e._unhandledStackInfo.stack),t}function u(e,t,n){var i=e&&e.data.description,a=e&&e.custom,u=s(e),l=o.guessErrorClass(t.message),f={exception:{class:c(t,l[0],n),message:l[1]}};if(i&&(f.exception.description=i),u){var d,p,h,m,g,y,v,A;for(0===u.length&&(f.exception.stack=t.rawStack,f.exception.raw=String(t.rawException)),f.frames=[],v=0;v<u.length;++v)p={filename:(d=u[v]).url?r.sanitizeUrl(d.url):"(unknown)",lineno:d.line||null,method:d.func&&"?"!==d.func?d.func:"[anonymous]",colno:d.column},n.sendFrameUrl&&(p.url=d.url),p.method&&p.method.endsWith&&p.method.endsWith("_rollbar_wrapped")||(h=m=g=null,(y=d.context?d.context.length:0)&&(A=Math.floor(y/2),m=d.context.slice(0,A),h=d.context[A],g=d.context.slice(A)),h&&(p.code=h),(m||g)&&(p.context={},m&&m.length&&(p.context.pre=m),g&&g.length&&(p.context.post=g)),d.args&&(p.args=d.args),f.frames.push(p));f.frames.reverse(),a&&(f.extra=r.merge(a))}return f}function c(e,t,n){return e.name?e.name:n.guessErrorClass?t:"(unknown)"}e.exports={handleDomException:function(e,t,n){if(e.err&&"DOMException"===o.Stack(e.err).name){var r=new Error;r.name=e.err.name,r.message=e.err.message,r.stack=e.err.stack,r.nested=e.err,e.err=r}n(null,e)},handleItemWithError:function(e,t,n){if(e.data=e.data||{},e.err)try{e.stackInfo=e.err._savedStackTrace||o.parse(e.err,e.skipFrames),t.addErrorContext&&function(e){var t=[],n=e.err;for(t.push(n);n.nested;)n=n.nested,t.push(n);r.addErrorContext(e,t)}(e)}catch(t){i.error("Error while parsing the error object.",t);try{e.message=e.err.message||e.err.description||e.message||String(e.err)}catch(t){e.message=String(e.err)||String(t)}delete e.err}n(null,e)},ensureItemHasSomethingToSay:function(e,t,n){e.message||e.stackInfo||e.custom||n(new Error("No message, stack info, or custom data"),null),n(null,e)},addBaseInfo:function(e,t,n){var o=t.payload&&t.payload.environment||t.environment;e.data=r.merge(e.data,{environment:o,level:e.level,endpoint:t.endpoint,platform:"browser",framework:"browser-js",language:"javascript",server:{},uuid:e.uuid,notifier:{name:"rollbar-browser-js",version:t.version},custom:e.custom}),n(null,e)},addRequestInfo:function(e){return function(t,n,o){if(!e||!e.location)return o(null,t);var i="$remote_ip";n.captureIp?!0!==n.captureIp&&(i+="_anonymize"):i=null,r.set(t,"data.request",{url:e.location.href,query_string:e.location.search,user_ip:i}),o(null,t)}},addClientInfo:function(e){return function(t,n,o){if(!e)return o(null,t);var i=e.navigator||{},a=e.screen||{};r.set(t,"data.client",{runtime_ms:t.timestamp-e._rollbarStartTime,timestamp:Math.round(t.timestamp/1e3),javascript:{browser:i.userAgent,language:i.language,cookie_enabled:i.cookieEnabled,screen:{width:a.width,height:a.height}}}),o(null,t)}},addPluginInfo:function(e){return function(t,n,o){if(!e||!e.navigator)return o(null,t);for(var i,a=[],s=e.navigator.plugins||[],u=0,c=s.length;u<c;++u)i=s[u],a.push({name:i.name,description:i.description});r.set(t,"data.client.javascript.plugins",a),o(null,t)}},addBody:function(e,t,n){e.stackInfo?e.stackInfo.traceChain?function(e,t,n){for(var o=e.stackInfo.traceChain,i=[],a=o.length,s=0;s<a;s++){var c=u(e,o[s],t);i.push(c)}r.set(e,"data.body",{trace_chain:i}),n(null,e)}(e,t,n):function(e,t,n){if(s(e)){var i=u(e,e.stackInfo,t);r.set(e,"data.body",{trace:i}),n(null,e)}else{var l=e.stackInfo,f=o.guessErrorClass(l.message),d=c(l,f[0],t),p=f[1];e.message=d+": "+p,a(e,0,n)}}(e,t,n):a(e,0,n)},addScrubber:function(e){return function(t,n,r){if(e){var o=n.scrubFields||[],i=n.scrubPaths||[];t.data=e(t.data,o,i)}r(null,t)}}}},function(e,t,n){var r,o,i;!function(a,s){"use strict";o=[n(100)],void 0===(i="function"==typeof(r=function(e){var t=/(^|@)\S+:\d+/,n=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){var r=t.stack.split("\n").filter(function(e){return!!e.match(n)},this);return r.map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=n.match(/ (\((.+):(\d+):(\d+)\)$)/),o=(n=r?n.replace(r[0],""):n).split(/\s+/).slice(1),i=this.extractLocation(r?r[1]:o.pop()),a=o.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new e({functionName:a,fileName:s,lineNumber:i[1],columnNumber:i[2],source:t})},this)},parseFFOrSafari:function(t){var n=t.stack.split("\n").filter(function(e){return!e.match(r)},this);return n.map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),o=r&&r[1]?r[1]:void 0,i=this.extractLocation(t.replace(n,""));return new e({functionName:o,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),o=[],i=2,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e({fileName:s[2],lineNumber:s[1],source:r[i]}))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),o=[],i=0,a=r.length;i<a;i+=2){var s=n.exec(r[i]);s&&o.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:r[i]}))}return o},parseOpera11:function(n){var r=n.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return r.map(function(t){var n,r=t.split("@"),o=this.extractLocation(r.pop()),i=r.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;i.match(/\(([^)]*)\)/)&&(n=i.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:a,args:s,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})},this)}}})?r.apply(t,o):r)||(e.exports=i)}()},function(e,t,n){var r,o,i;!function(n,a){"use strict";o=[],void 0===(i="function"==typeof(r=function(){function e(e){return e.charAt(0).toUpperCase()+e.substring(1)}function t(e){return function(){return this[e]}}var n=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],o=["fileName","functionName","source"],i=n.concat(r,o,["args"],["evalOrigin"]);function a(t){if(t)for(var n=0;n<i.length;n++)void 0!==t[i[n]]&&this["set"+e(i[n])](t[i[n]])}a.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof a)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new a(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",n=this.getColumnNumber()||"",r=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+n+")":"[eval]:"+t+":"+n:r?r+" ("+e+":"+t+":"+n+")":e+":"+t+":"+n}},a.fromString=function(e){var t=e.indexOf("("),n=e.lastIndexOf(")"),r=e.substring(0,t),o=e.substring(t+1,n).split(","),i=e.substring(n+1);if(0===i.indexOf("@"))var s=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i,""),u=s[1],c=s[2],l=s[3];return new a({functionName:r,args:o||void 0,fileName:u,lineNumber:c||void 0,columnNumber:l||void 0})};for(var s=0;s<n.length;s++)a.prototype["get"+e(n[s])]=t(n[s]),a.prototype["set"+e(n[s])]=function(e){return function(t){this[e]=Boolean(t)}}(n[s]);for(var u=0;u<r.length;u++)a.prototype["get"+e(r[u])]=t(r[u]),a.prototype["set"+e(r[u])]=function(e){return function(t){if(n=t,isNaN(parseFloat(n))||!isFinite(n))throw new TypeError(e+" must be a Number");var n;this[e]=Number(t)}}(r[u]);for(var c=0;c<o.length;c++)a.prototype["get"+e(o[c])]=t(o[c]),a.prototype["set"+e(o[c])]=function(e){return function(t){this[e]=String(t)}}(o[c]);return a})?r.apply(t,o):r)||(e.exports=i)}()},function(e,t,n){var r=n(6);function o(e,t){r.isFunction(e[t])&&(e[t]=e[t].toString())}e.exports={itemToPayload:function(e,t,n){var o=t.payload||{};o.body&&delete o.body;var i=r.merge(e.data,o);e._isUncaught&&(i._isUncaught=!0),e._originalArgs&&(i._originalArgs=e._originalArgs),n(null,i)},addTelemetryData:function(e,t,n){e.telemetryEvents&&r.set(e,"data.body.telemetry",e.telemetryEvents),n(null,e)},addMessageWithError:function(e,t,n){if(e.message){var o="data.body.trace_chain.0",i=r.get(e,o);if(i||(o="data.body.trace",i=r.get(e,o)),i){if(!i.exception||!i.exception.description)return r.set(e,o+".exception.description",e.message),void n(null,e);var a=r.get(e,o+".extra")||{},s=r.merge(a,{message:e.message});r.set(e,o+".extra",s)}n(null,e)}else n(null,e)},userTransform:function(e){return function(t,n,o){var i=r.merge(t);try{r.isFunction(n.transform)&&n.transform(i.data,t)}catch(r){return n.transform=null,e.error("Error while calling custom transform() function. Removing custom transform().",r),void o(null,t)}o(null,i)}},addConfigToPayload:function(e,t,n){if(!t.sendConfig)return n(null,e);var o=r.get(e,"data.custom")||{};o._rollbarConfig=t,e.data.custom=o,n(null,e)},addConfiguredOptions:function(e,t,n){var r=t._configuredOptions;o(r,"transform"),o(r,"checkIgnore"),o(r,"onSendCallback"),delete r.accessToken,e.data.notifier.configured_options=r,n(null,e)},addDiagnosticKeys:function(e,t,n){var o=r.merge(e.notifier.client.notifier.diagnostic,e.diagnostic);if(r.get(e,"err._isAnonymous")&&(o.is_anonymous=!0),e._isUncaught&&(o.is_uncaught=e._isUncaught),e.err)try{o.raw_error={message:e.err.message,name:e.err.name,constructor_name:e.err.constructor&&e.err.constructor.name,filename:e.err.fileName,line:e.err.lineNumber,column:e.err.columnNumber,stack:e.err.stack}}catch(e){o.raw_error={failed:String(e)}}e.data.notifier.diagnostic=r.merge(e.data.notifier.diagnostic,o),n(null,e)}}},function(e,t,n){var r=n(6);e.exports={checkIgnore:function(e,t){return!r.get(t,"plugins.jquery.ignoreAjaxErrors")||!r.get(e,"body.message.extra.isAjax")}}},function(e,t,n){var r=n(6);function o(e,t,n){if(!e)return!n;var o,i,a=e.frames;if(!a||0===a.length)return!n;for(var s=t.length,u=a.length,c=0;c<u;c++){if(o=a[c].filename,!r.isType(o,"string"))return!n;for(var l=0;l<s;l++)if(i=t[l],new RegExp(i).test(o))return!0}return!1}function i(e,t,n,i){var a,s,u=!1;"blacklist"===n&&(u=!0);try{if(a=u?t.hostBlackList:t.hostWhiteList,s=r.get(e,"body.trace_chain")||[r.get(e,"body.trace")],!a||0===a.length)return!u;if(0===s.length||!s[0])return!u;for(var c=s.length,l=0;l<c;l++)if(o(s[l],a,u))return!0}catch(e){u?t.hostBlackList=null:t.hostWhiteList=null;var f=u?"hostBlackList":"hostWhiteList";return i.error("Error while reading your configuration's "+f+" option. Removing custom "+f+".",e),!u}return!1}e.exports={checkLevel:function(e,t){var n=e.level,o=r.LEVELS[n]||0,i=t.reportLevel;return!(o<(r.LEVELS[i]||0))},userCheckIgnore:function(e){return function(t,n){var o=!!t._isUncaught;delete t._isUncaught;var i=t._originalArgs;delete t._originalArgs;try{r.isFunction(n.onSendCallback)&&n.onSendCallback(o,i,t)}catch(t){n.onSendCallback=null,e.error("Error while calling onSendCallback, removing",t)}try{if(r.isFunction(n.checkIgnore)&&n.checkIgnore(o,i,t))return!1}catch(t){n.checkIgnore=null,e.error("Error while calling custom checkIgnore(), removing",t)}return!0}},urlIsNotBlacklisted:function(e){return function(t,n){return!i(t,n,"blacklist",e)}},urlIsWhitelisted:function(e){return function(t,n){return i(t,n,"whitelist",e)}},messageIsIgnored:function(e){return function(t,n){var o,i,a,s,u,c,l,f;try{if(u=!1,!(a=n.ignoredMessages)||0===a.length)return!0;if(c=t.body,l=r.get(c,"trace.exception.message"),f=r.get(c,"message.body"),!(o=l||f))return!0;for(s=a.length,i=0;i<s&&!(u=new RegExp(a[i],"gi").test(o));i++);}catch(t){n.ignoredMessages=null,e.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!u}}}},function(e,t){e.exports={version:"2.19.2",endpoint:"api.rollbar.com/api/1/item/",logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",maxItems:0,itemsPerMin:60}},function(e,t){e.exports={scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","X-Rollbar-Access-Token","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","ccname","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp","ccmonth","ccyear"]}},function(e,t,n){var r=n(6),o=n(47),i=n(45),a=n(107),s={network:!0,networkResponseHeaders:!1,networkResponseBody:!1,networkRequestHeaders:!1,networkRequestBody:!1,networkErrorOnHttp5xx:!1,networkErrorOnHttp4xx:!1,networkErrorOnHttp0:!1,log:!0,dom:!0,navigation:!0,connectivity:!0};function u(e,t,n,r,o){var i=e[t];e[t]=n(i),r&&r[o].push([e,t,i])}function c(e,t){for(var n;e[t].length;)(n=e[t].shift())[0][n[1]]=n[2]}function l(e,t,n,o,i){this.options=e;var a=e.autoInstrument;!1===e.enabled||!1===a?this.autoInstrument={}:(r.isType(a,"object")||(a=s),this.autoInstrument=r.merge(s,a)),this.scrubTelemetryInputs=!!e.scrubTelemetryInputs,this.telemetryScrubber=e.telemetryScrubber,this.defaultValueScrubber=function(e){for(var t=[],n=0;n<e.length;++n)t.push(new RegExp(e[n],"i"));return function(e){var n=function(e){if(!e||!e.attributes)return null;for(var t=e.attributes,n=0;n<t.length;++n)if("name"===t[n].key)return t[n].value;return null}(e);if(!n)return!1;for(var r=0;r<t.length;++r)if(t[r].test(n))return!0;return!1}}(e.scrubFields),this.telemeter=t,this.rollbar=n,this.diagnostic=n.client.notifier.diagnostic,this._window=o||{},this._document=i||{},this.replacements={network:[],log:[],navigation:[],connectivity:[]},this.eventRemovers={dom:[],connectivity:[]},this._location=this._window.location,this._lastHref=this._location&&this._location.href}l.prototype.configure=function(e){this.options=r.merge(this.options,e);var t=e.autoInstrument,n=r.merge(this.autoInstrument);!1===e.enabled||!1===t?this.autoInstrument={}:(r.isType(t,"object")||(t=s),this.autoInstrument=r.merge(s,t)),this.instrument(n),void 0!==e.scrubTelemetryInputs&&(this.scrubTelemetryInputs=!!e.scrubTelemetryInputs),void 0!==e.telemetryScrubber&&(this.telemetryScrubber=e.telemetryScrubber)},l.prototype.instrument=function(e){!this.autoInstrument.network||e&&e.network?!this.autoInstrument.network&&e&&e.network&&this.deinstrumentNetwork():this.instrumentNetwork(),!this.autoInstrument.log||e&&e.log?!this.autoInstrument.log&&e&&e.log&&this.deinstrumentConsole():this.instrumentConsole(),!this.autoInstrument.dom||e&&e.dom?!this.autoInstrument.dom&&e&&e.dom&&this.deinstrumentDom():this.instrumentDom(),!this.autoInstrument.navigation||e&&e.navigation?!this.autoInstrument.navigation&&e&&e.navigation&&this.deinstrumentNavigation():this.instrumentNavigation(),!this.autoInstrument.connectivity||e&&e.connectivity?!this.autoInstrument.connectivity&&e&&e.connectivity&&this.deinstrumentConnectivity():this.instrumentConnectivity()},l.prototype.deinstrumentNetwork=function(){c(this.replacements,"network")},l.prototype.instrumentNetwork=function(){var e=this;function t(t,n){t in n&&r.isFunction(n[t])&&u(n,t,function(t){return e.rollbar.wrap(t)})}if("XMLHttpRequest"in this._window){var n=this._window.XMLHttpRequest.prototype;u(n,"open",function(e){return function(t,n){return r.isType(n,"string")&&(this.__rollbar_xhr?(this.__rollbar_xhr.method=t,this.__rollbar_xhr.url=n,this.__rollbar_xhr.status_code=null,this.__rollbar_xhr.start_time_ms=r.now(),this.__rollbar_xhr.end_time_ms=null):this.__rollbar_xhr={method:t,url:n,status_code:null,start_time_ms:r.now(),end_time_ms:null}),e.apply(this,arguments)}},this.replacements,"network"),u(n,"setRequestHeader",function(t){return function(n,o){return this.__rollbar_xhr||(this.__rollbar_xhr={}),r.isType(n,"string")&&r.isType(o,"string")&&(e.autoInstrument.networkRequestHeaders&&(this.__rollbar_xhr.request_headers||(this.__rollbar_xhr.request_headers={}),this.__rollbar_xhr.request_headers[n]=o),"content-type"===n.toLowerCase()&&(this.__rollbar_xhr.request_content_type=o)),t.apply(this,arguments)}},this.replacements,"network"),u(n,"send",function(n){return function(o){var i=this;function a(){if(i.__rollbar_xhr&&(null===i.__rollbar_xhr.status_code&&(i.__rollbar_xhr.status_code=0,e.autoInstrument.networkRequestBody&&(i.__rollbar_xhr.request=o),i.__rollbar_event=e.captureNetwork(i.__rollbar_xhr,"xhr",void 0)),i.readyState<2&&(i.__rollbar_xhr.start_time_ms=r.now()),i.readyState>3)){i.__rollbar_xhr.end_time_ms=r.now();var t=null;if(i.__rollbar_xhr.response_content_type=i.getResponseHeader("Content-Type"),e.autoInstrument.networkResponseHeaders){var n=e.autoInstrument.networkResponseHeaders;t={};try{var a,s;if(!0===n){var u=i.getAllResponseHeaders();if(u){var c,l,f=u.trim().split(/[\r\n]+/);for(s=0;s<f.length;s++)a=(c=f[s].split(": ")).shift(),l=c.join(": "),t[a]=l}}else for(s=0;s<n.length;s++)t[a=n[s]]=i.getResponseHeader(a)}catch(e){}}var d=null;if(e.autoInstrument.networkResponseBody)try{d=i.responseText}catch(e){}var p=null;(d||t)&&(p={},d&&(e.isJsonContentType(i.__rollbar_xhr.request_content_type)?p.body=e.scrubJson(d):p.body=d),t&&(p.headers=t)),p&&(i.__rollbar_xhr.response=p);try{var h=i.status;h=1223===h?204:h,i.__rollbar_xhr.status_code=h,i.__rollbar_event.level=e.telemeter.levelFromStatus(h),e.errorOnHttpStatus(i.__rollbar_xhr)}catch(e){}}}return t("onload",i),t("onerror",i),t("onprogress",i),"onreadystatechange"in i&&r.isFunction(i.onreadystatechange)?u(i,"onreadystatechange",function(t){return e.rollbar.wrap(t,void 0,a)}):i.onreadystatechange=a,i.__rollbar_xhr&&e.trackHttpErrors()&&(i.__rollbar_xhr.stack=(new Error).stack),n.apply(this,arguments)}},this.replacements,"network")}"fetch"in this._window&&u(this._window,"fetch",function(t){return function(n,o){for(var i=new Array(arguments.length),a=0,s=i.length;a<s;a++)i[a]=arguments[a];var u,c=i[0],l="GET";r.isType(c,"string")?u=c:c&&(u=c.url,c.method&&(l=c.method)),i[1]&&i[1].method&&(l=i[1].method);var f={method:l,url:u,status_code:null,start_time_ms:r.now(),end_time_ms:null};if(i[1]&&i[1].headers){var d=new Headers(i[1].headers);f.request_content_type=d.get("Content-Type"),e.autoInstrument.networkRequestHeaders&&(f.request_headers=e.fetchHeaders(d,e.autoInstrument.networkRequestHeaders))}return e.autoInstrument.networkRequestBody&&(i[1]&&i[1].body?f.request=i[1].body:i[0]&&!r.isType(i[0],"string")&&i[0].body&&(f.request=i[0].body)),e.captureNetwork(f,"fetch",void 0),e.trackHttpErrors()&&(f.stack=(new Error).stack),t.apply(this,i).then(function(t){f.end_time_ms=r.now(),f.status_code=t.status,f.response_content_type=t.headers.get("Content-Type");var n=null;e.autoInstrument.networkResponseHeaders&&(n=e.fetchHeaders(t.headers,e.autoInstrument.networkResponseHeaders));var o=null;return e.autoInstrument.networkResponseBody&&"function"==typeof t.text&&(o=t.clone().text()),(n||o)&&(f.response={},o&&("function"==typeof o.then?o.then(function(t){e.isJsonContentType(f.response_content_type)&&(f.response.body=e.scrubJson(t))}):f.response.body=o),n&&(f.response.headers=n)),e.errorOnHttpStatus(f),t})}},this.replacements,"network")},l.prototype.captureNetwork=function(e,t,n){return e.request&&this.isJsonContentType(e.request_content_type)&&(e.request=this.scrubJson(e.request)),this.telemeter.captureNetwork(e,t,n)},l.prototype.isJsonContentType=function(e){return!(!e||!e.toLowerCase().includes("json"))},l.prototype.scrubJson=function(e){return JSON.stringify(o(JSON.parse(e),this.options.scrubFields))},l.prototype.fetchHeaders=function(e,t){var n={};try{var r;if(!0===t){if("function"==typeof e.entries)for(var o=e.entries(),i=o.next();!i.done;)n[i.value[0]]=i.value[1],i=o.next()}else for(r=0;r<t.length;r++){var a=t[r];n[a]=e.get(a)}}catch(e){}return n},l.prototype.trackHttpErrors=function(){return this.autoInstrument.networkErrorOnHttp5xx||this.autoInstrument.networkErrorOnHttp4xx||this.autoInstrument.networkErrorOnHttp0},l.prototype.errorOnHttpStatus=function(e){var t=e.status_code;if(t>=500&&this.autoInstrument.networkErrorOnHttp5xx||t>=400&&this.autoInstrument.networkErrorOnHttp4xx||0===t&&this.autoInstrument.networkErrorOnHttp0){var n=new Error("HTTP request failed with Status "+t);n.stack=e.stack,this.rollbar.error(n,{skipFrames:1})}},l.prototype.deinstrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var e;this.replacements.log.length;)e=this.replacements.log.shift(),this._window.console[e[0]]=e[1]},l.prototype.instrumentConsole=function(){if("console"in this._window&&this._window.console.log){var e=this,t=this._window.console,n=["debug","info","warn","error","log"];try{for(var o=0,i=n.length;o<i;o++)a(n[o])}catch(e){this.diagnostic.instrumentConsole={error:e.message}}}function a(n){"use strict";var o=t[n],i=t,a="warn"===n?"warning":n;t[n]=function(){var t=Array.prototype.slice.call(arguments),n=r.formatArgsAsString(t);e.telemeter.captureLog(n,a),o&&Function.prototype.apply.call(o,i,t)},e.replacements.log.push([n,o])}},l.prototype.deinstrumentDom=function(){("addEventListener"in this._window||"attachEvent"in this._window)&&this.removeListeners("dom")},l.prototype.instrumentDom=function(){if("addEventListener"in this._window||"attachEvent"in this._window){var e=this.handleClick.bind(this),t=this.handleBlur.bind(this);this.addListener("dom",this._window,"click","onclick",e,!0),this.addListener("dom",this._window,"blur","onfocusout",t,!0)}},l.prototype.handleClick=function(e){try{var t=a.getElementFromEvent(e,this._document),n=t&&t.tagName,r=a.isDescribedElement(t,"a")||a.isDescribedElement(t,"button");n&&(r||a.isDescribedElement(t,"input",["button","submit"]))?this.captureDomEvent("click",t):a.isDescribedElement(t,"input",["checkbox","radio"])&&this.captureDomEvent("input",t,t.value,t.checked)}catch(e){}},l.prototype.handleBlur=function(e){try{var t=a.getElementFromEvent(e,this._document);t&&t.tagName&&(a.isDescribedElement(t,"textarea")?this.captureDomEvent("input",t,t.value):a.isDescribedElement(t,"select")&&t.options&&t.options.length?this.handleSelectInputChanged(t):a.isDescribedElement(t,"input")&&!a.isDescribedElement(t,"input",["button","submit","hidden","checkbox","radio"])&&this.captureDomEvent("input",t,t.value))}catch(e){}},l.prototype.handleSelectInputChanged=function(e){if(e.multiple)for(var t=0;t<e.options.length;t++)e.options[t].selected&&this.captureDomEvent("input",e,e.options[t].value);else e.selectedIndex>=0&&e.options[e.selectedIndex]&&this.captureDomEvent("input",e,e.options[e.selectedIndex].value)},l.prototype.captureDomEvent=function(e,t,n,r){if(void 0!==n)if(this.scrubTelemetryInputs||"password"===a.getElementType(t))n="[scrubbed]";else{var o=a.describeElement(t);this.telemetryScrubber?this.telemetryScrubber(o)&&(n="[scrubbed]"):this.defaultValueScrubber(o)&&(n="[scrubbed]")}var i=a.elementArrayToString(a.treeToArray(t));this.telemeter.captureDom(e,i,n,r)},l.prototype.deinstrumentNavigation=function(){var e=this._window.chrome;!(e&&e.app&&e.app.runtime)&&this._window.history&&this._window.history.pushState&&c(this.replacements,"navigation")},l.prototype.instrumentNavigation=function(){var e=this._window.chrome;if(!(e&&e.app&&e.app.runtime)&&this._window.history&&this._window.history.pushState){var t=this;u(this._window,"onpopstate",function(e){return function(){var n=t._location.href;t.handleUrlChange(t._lastHref,n),e&&e.apply(this,arguments)}},this.replacements,"navigation"),u(this._window.history,"pushState",function(e){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&t.handleUrlChange(t._lastHref,n+""),e.apply(this,arguments)}},this.replacements,"navigation")}},l.prototype.handleUrlChange=function(e,t){var n=i.parse(this._location.href),r=i.parse(t),o=i.parse(e);this._lastHref=t,n.protocol===r.protocol&&n.host===r.host&&(t=r.path+(r.hash||"")),n.protocol===o.protocol&&n.host===o.host&&(e=o.path+(o.hash||"")),this.telemeter.captureNavigation(e,t)},l.prototype.deinstrumentConnectivity=function(){("addEventListener"in this._window||"body"in this._document)&&(this._window.addEventListener?this.removeListeners("connectivity"):c(this.replacements,"connectivity"))},l.prototype.instrumentConnectivity=function(){if("addEventListener"in this._window||"body"in this._document)if(this._window.addEventListener)this.addListener("connectivity",this._window,"online",void 0,function(){this.telemeter.captureConnectivityChange("online")}.bind(this),!0),this.addListener("connectivity",this._window,"offline",void 0,function(){this.telemeter.captureConnectivityChange("offline")}.bind(this),!0);else{var e=this;u(this._document.body,"ononline",function(t){return function(){e.telemeter.captureConnectivityChange("online"),t&&t.apply(this,arguments)}},this.replacements,"connectivity"),u(this._document.body,"onoffline",function(t){return function(){e.telemeter.captureConnectivityChange("offline"),t&&t.apply(this,arguments)}},this.replacements,"connectivity")}},l.prototype.addListener=function(e,t,n,r,o,i){t.addEventListener?(t.addEventListener(n,o,i),this.eventRemovers[e].push(function(){t.removeEventListener(n,o,i)})):r&&(t.attachEvent(r,o),this.eventRemovers[e].push(function(){t.detachEvent(r,o)}))},l.prototype.removeListeners=function(e){for(;this.eventRemovers[e].length;)this.eventRemovers[e].shift()()},e.exports=l},function(e,t){function n(e){return(e.getAttribute("type")||"").toLowerCase()}function r(e){if(!e||!e.tagName)return"";var t=[e.tagName];e.id&&t.push("#"+e.id),e.classes&&t.push("."+e.classes.join("."));for(var n=0;n<e.attributes.length;n++)t.push("["+e.attributes[n].key+'="'+e.attributes[n].value+'"]');return t.join("")}function o(e){if(!e||!e.tagName)return null;var t,n,r,o,i={};i.tagName=e.tagName.toLowerCase(),e.id&&(i.id=e.id),(t=e.className)&&"string"==typeof t&&(i.classes=t.split(/\s+/));var a=["type","name","title","alt"];for(i.attributes=[],o=0;o<a.length;o++)n=a[o],(r=e.getAttribute(n))&&i.attributes.push({key:n,value:r});return i}e.exports={describeElement:o,descriptionToString:r,elementArrayToString:function(e){for(var t,n,o=" > ".length,i=[],a=0,s=e.length-1;s>=0;s--){if(t=r(e[s]),n=a+i.length*o+t.length,s<e.length-1&&n>=83){i.unshift("...");break}i.unshift(t),a+=t.length}return i.join(" > ")},treeToArray:function(e){for(var t,n=[],r=0;e&&r<5&&"html"!==(t=o(e)).tagName;r++)n.unshift(t),e=e.parentNode;return n},getElementFromEvent:function(e,t){return e.target?e.target:t&&t.elementFromPoint?t.elementFromPoint(e.clientX,e.clientY):void 0},isDescribedElement:function(e,t,r){if(e.tagName.toLowerCase()!==t.toLowerCase())return!1;if(!r)return!0;e=n(e);for(var o=0;o<r.length;o++)if(r[o]===e)return!0;return!1},getElementType:n}},function(e,t,n){var r=n(6),o=100;function i(e){this.queue=[],this.options=r.merge(e);var t=this.options.maxTelemetryEvents||o;this.maxQueueSize=Math.max(0,Math.min(t,o))}i.prototype.configure=function(e){var t=this.options;this.options=r.merge(t,e);var n=this.options.maxTelemetryEvents||o,i=Math.max(0,Math.min(n,o)),a=0;this.maxQueueSize>i&&(a=this.maxQueueSize-i),this.maxQueueSize=i,this.queue.splice(0,a)},i.prototype.copyEvents=function(){var e=Array.prototype.slice.call(this.queue,0);if(r.isFunction(this.options.filterTelemetry))try{for(var t=e.length;t--;)this.options.filterTelemetry(e[t])&&e.splice(t,1)}catch(e){this.options.filterTelemetry=null}return e},i.prototype.capture=function(e,t,n,o,i){var a={level:function(e,t){if(t)return t;return{error:"error",manual:"info"}[e]||"info"}(e,n),type:e,timestamp_ms:i||r.now(),body:t,source:"client"};o&&(a.uuid=o);try{if(r.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(a))return!1}catch(e){this.options.filterTelemetry=null}return this.push(a),a},i.prototype.captureEvent=function(e,t,n,r){return this.capture(e,t,n,r)},i.prototype.captureError=function(e,t,n,r){var o={message:e.message||String(e)};return e.stack&&(o.stack=e.stack),this.capture("error",o,t,n,r)},i.prototype.captureLog=function(e,t,n,r){return this.capture("log",{message:e},t,n,r)},i.prototype.captureNetwork=function(e,t,n,r){t=t||"xhr",e.subtype=e.subtype||t,r&&(e.request=r);var o=this.levelFromStatus(e.status_code);return this.capture("network",e,o,n)},i.prototype.levelFromStatus=function(e){return e>=200&&e<400?"info":0===e||e>=400?"error":"info"},i.prototype.captureDom=function(e,t,n,r,o){var i={subtype:e,element:t};return void 0!==n&&(i.value=n),void 0!==r&&(i.checked=r),this.capture("dom",i,"info",o)},i.prototype.captureNavigation=function(e,t,n){return this.capture("navigation",{from:e,to:t},"info",n)},i.prototype.captureDomContentLoaded=function(e){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,e&&e.getTime())},i.prototype.captureLoad=function(e){return this.capture("navigation",{subtype:"load"},"info",void 0,e&&e.getTime())},i.prototype.captureConnectivityChange=function(e,t){return this.captureNetwork({change:e},"connectivity",t)},i.prototype._captureRollbarItem=function(e){if(this.options.includeItemsInTelemetry)return e.err?this.captureError(e.err,e.level,e.uuid,e.timestamp):e.message?this.captureLog(e.message,e.level,e.uuid,e.timestamp):e.custom?this.capture("log",e.custom,e.level,e.uuid,e.timestamp):void 0},i.prototype.push=function(e){this.queue.push(e),this.queue.length>this.maxQueueSize&&this.queue.shift()},e.exports=i},function(e,t,n){var r=n(6),o=n(48);function i(e,t){return[e,r.stringify(e,t)]}function a(e,t){var n=e.length;return n>2*t?e.slice(0,t).concat(e.slice(n-t)):e}function s(e,t,n){n=void 0===n?30:n;var o,i=e.data.body;if(i.trace_chain)for(var s=i.trace_chain,u=0;u<s.length;u++)o=a(o=s[u].frames,n),s[u].frames=o;else i.trace&&(o=a(o=i.trace.frames,n),i.trace.frames=o);return[e,r.stringify(e,t)]}function u(e,t){return t&&t.length>e?t.slice(0,e-3).concat("..."):t}function c(e,t,n){return[t=o(t,function t(n,i,a){switch(r.typeName(i)){case"string":return u(e,i);case"object":case"array":return o(i,t,a);default:return i}},[]),r.stringify(t,n)]}function l(e){return e.exception&&(delete e.exception.description,e.exception.message=u(255,e.exception.message)),e.frames=a(e.frames,1),e}function f(e,t){var n=e.data.body;if(n.trace_chain)for(var o=n.trace_chain,i=0;i<o.length;i++)o[i]=l(o[i]);else n.trace&&(n.trace=l(n.trace));return[e,r.stringify(e,t)]}function d(e,t){return r.maxByteSize(e)>t}e.exports={truncate:function(e,t,n){n=void 0===n?524288:n;for(var r,o,a,u=[i,s,c.bind(null,1024),c.bind(null,512),c.bind(null,256),f];r=u.shift();)if(e=(o=r(e,t))[0],(a=o[1]).error||!d(a.value,n))return a;return a},raw:i,truncateFrames:s,truncateStrings:c,maybeTruncateValue:u}},function(e,t){e.exports=function(e){var t,n,r,o,i=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function a(e){return e<10?"0"+e:e}function s(){return this.valueOf()}function u(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=s,Number.prototype.toJSON=s,String.prototype.toJSON=s),"function"!=typeof e.stringify&&(r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e.stringify=function(e,r,i){var a;if(t="",n="","number"==typeof i)for(a=0;a<i;a+=1)n+=" ";else"string"==typeof i&&(n=i);if(o=r,r&&"function"!=typeof r&&("object"!=typeof r||"number"!=typeof r.length))throw new Error("JSON.stringify");return function e(r,i){var a,s,c,l,f,d=t,p=i[r];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(r)),"function"==typeof o&&(p=o.call(i,r,p)),typeof p){case"string":return u(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(t+=n,f=[],"[object Array]"===Object.prototype.toString.apply(p)){for(l=p.length,a=0;a<l;a+=1)f[a]=e(a,p)||"null";return c=0===f.length?"[]":t?"[\n"+t+f.join(",\n"+t)+"\n"+d+"]":"["+f.join(",")+"]",t=d,c}if(o&&"object"==typeof o)for(l=o.length,a=0;a<l;a+=1)"string"==typeof o[a]&&(c=e(s=o[a],p))&&f.push(u(s)+(t?": ":":")+c);else for(s in p)Object.prototype.hasOwnProperty.call(p,s)&&(c=e(s,p))&&f.push(u(s)+(t?": ":":")+c);return c=0===f.length?"{}":t?"{\n"+t+f.join(",\n"+t)+"\n"+d+"}":"{"+f.join(",")+"}",t=d,c}}("",{"":e})}),"function"!=typeof e.parse&&(e.parse=(h={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},m={go:function(){c="ok"},firstokey:function(){d=p,c="colon"},okey:function(){d=p,c="colon"},ovalue:function(){c="ocomma"},firstavalue:function(){c="acomma"},avalue:function(){c="acomma"}},g={go:function(){c="ok"},ovalue:function(){c="ocomma"},firstavalue:function(){c="acomma"},avalue:function(){c="acomma"}},y={"{":{go:function(){l.push({state:"ok"}),f={},c="firstokey"},ovalue:function(){l.push({container:f,state:"ocomma",key:d}),f={},c="firstokey"},firstavalue:function(){l.push({container:f,state:"acomma"}),f={},c="firstokey"},avalue:function(){l.push({container:f,state:"acomma"}),f={},c="firstokey"}},"}":{firstokey:function(){var e=l.pop();p=f,f=e.container,d=e.key,c=e.state},ocomma:function(){var e=l.pop();f[d]=p,p=f,f=e.container,d=e.key,c=e.state}},"[":{go:function(){l.push({state:"ok"}),f=[],c="firstavalue"},ovalue:function(){l.push({container:f,state:"ocomma",key:d}),f=[],c="firstavalue"},firstavalue:function(){l.push({container:f,state:"acomma"}),f=[],c="firstavalue"},avalue:function(){l.push({container:f,state:"acomma"}),f=[],c="firstavalue"}},"]":{firstavalue:function(){var e=l.pop();p=f,f=e.container,d=e.key,c=e.state},acomma:function(){var e=l.pop();f.push(p),p=f,f=e.container,d=e.key,c=e.state}},":":{colon:function(){if(Object.hasOwnProperty.call(f,d))throw new SyntaxError("Duplicate key '"+d+'"');c="ovalue"}},",":{ocomma:function(){f[d]=p,c="okey"},acomma:function(){f.push(p),c="avalue"}},true:{go:function(){p=!0,c="ok"},ovalue:function(){p=!0,c="ocomma"},firstavalue:function(){p=!0,c="acomma"},avalue:function(){p=!0,c="acomma"}},false:{go:function(){p=!1,c="ok"},ovalue:function(){p=!1,c="ocomma"},firstavalue:function(){p=!1,c="acomma"},avalue:function(){p=!1,c="acomma"}},null:{go:function(){p=null,c="ok"},ovalue:function(){p=null,c="ocomma"},firstavalue:function(){p=null,c="acomma"},avalue:function(){p=null,c="acomma"}}},function(e,t){var n,r,o=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;c="go",l=[];try{for(;n=o.exec(e);)n[1]?y[n[1]][c]():n[2]?(p=+n[2],g[c]()):(r=n[3],p=r.replace(/\\(?:u(.{4})|([^u]))/g,function(e,t,n){return t?String.fromCharCode(parseInt(t,16)):h[n]}),m[c]()),e=e.slice(n[0].length)}catch(e){c=e}if("ok"!==c||/[^\u0020\t\n\r]/.test(e))throw c instanceof SyntaxError?c:new SyntaxError("JSON");return"function"==typeof t?function e(n,r){var o,i,a=n[r];if(a&&"object"==typeof a)for(o in p)Object.prototype.hasOwnProperty.call(a,o)&&(void 0!==(i=e(a,o))?a[o]=i:delete a[o]);return t.call(n,r,a)}({"":p},""):p}));var c,l,f,d,p,h,m,g,y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){window.affirm=window.affirm||{},window.affirm.lib={},window.affirm.VERSION="@VERSION",window.affirm.VERSION_DATE="@DATE"}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=new(((r=n(113))&&r.__esModule?r:{default:r}).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(13)),o=i(n(114));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api_url="https://api-cf.affirm.com/api/v2/",this.assets_root="https://cdn1.affirm.com/products/affirmjs/master/dist/",this.base_cdn_url="https://promos.affirm.com/static",this.cart={},this.country_code="US",this.frontend_url="https://www.affirm.com",this.minified_url="https://cdn1.affirm.com/js/v2/affirm.js",this.pageType="",this.payments_url_base="https://calculator.affirm.com",this.promos_url_prefix="https://cdn1.affirm.com/platform/public/promos/",this.resource_urls={checkout_button_route:"apps/checkout-button/",new_order:"checkout/",new_future_checkout:"checkout/?as_future=1",orders_backend_route:"apps/orders/",prequal_backend_route:"apps/prequal/",prequal_frontend_learn_more_route:"#/prequalifications/learn-more",send_future_checkout:"send_future_checkout",third_party_cookie_check:"cookie_sent",toast_backend_route:"apps/toast"},this.tracking_blacklist=Object({0:"E0QK6BONBI305A0Y"}),this.toast={onCartPage:!1,onPrequalSuccess:!1},this.tracking_endpoint="tracker.affirm.com",this.extend=this.extend.bind(this)}var t,n,i;return t=e,i=[{key:"scrubConfig",value:function(e){var t=(0,o.default)({},e);return delete t.scrubConfig,delete t.extend,delete t.learn_more,t}}],(n=[{key:"extend",value:function(t){var n=e.scrubConfig(t);(0,o.default)(this,n),r.default.trigger("config",n)}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=s},function(e,t,n){e.exports=n(115).default},function(e,t,n){"use strict";n.r(t),n.d(t,"extend",function(){return i});var r=n(41),o=n.n(r);function i(e,t){return Object.keys(t).forEach(function(n){var r=t[n];null!=r&&Object.prototype.hasOwnProperty.call(t,n)&&(o.a.isPlainObject(r)?o.a.isPlainObject(e[n])?e[n]=i(e[n],i({},r)):e[n]=i({},r):e[n]=r)}),e}i.default=i,t.default=i},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t={};return(e?function(e){var t=e.indexOf("?");return t>-1?e.substring(t):""}(e):window.location.search).slice(1).split("&").forEach(function(e){if(e){var n=r(e.split("="),2),o=n[0],i=n[1];t[o]=i||""}}),t}function a(e,t){setTimeout(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.queryObj=i,t.delay=a,t.default=void 0;var s={queryObj:i,delay:a};t.default=s},function(e,t){!function(e,t){var n,r,o,i=[],a={passive:!0,capture:!0},s=new Date,u="pointerup",c="pointercancel";function l(e,i){n||(n=i,r=e,o=new Date,p(t),f())}function f(){r>=0&&r<o-s&&(i.forEach(function(e){e(r,n)}),i=[])}function d(n){if(n.cancelable){var r=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,r){function o(){l(n,r),s()}function i(){s()}function s(){t(u,o,a),t(c,i,a)}e(u,o,a),e(c,i,a)}(r,n):l(r,n)}}function p(e){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(t){e(t,d,a)})}p(e),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(e){i.push(e),f()}}(addEventListener,removeEventListener)},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)("config",a.default),(0,s.default)("promo",l.default),(0,s.default)("util",h.default),(0,s.default)("jsReady",p.default.ready),(0,s.default)("checkout",i.default),(0,s.default)("events",m.default),(0,s.default)("product",c.default),(0,s.default)("ui",d.default),(0,s.default)("ui.components",f.default),(0,s.default)("findAffirmConfig",v.findAffirmConfig),(0,s.default)("setAffirmConfig",v.setAffirmConfig),(0,s.default)("ui.error",A.showError),(0,s.default)("widgets.learn_more",b.default),(0,s.default)("widgets.as_low_as",y.default),(0,s.default)("analytics",o),(0,s.default)("ui.modal",S.default),(0,s.default)("ui.modal_access",w.default),(0,s.default)("ui.payments",E.default),(0,s.default)("ui.template",O.default),(0,s.default)("ui.refresh",k.default),(0,s.default)("ui.openModal",_.default),(0,s.default)("ui.prequal",g.default),(0,s.default)("prequal",u.default)};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=I();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(119)),i=P(n(21)),a=P(n(3)),s=P(n(28)),u=P(n(15)),c=P(n(29)),l=P(n(59)),f=P(n(142)),d=P(n(61)),p=P(n(63)),h=P(n(0)),m=P(n(13)),g=P(n(64)),y=P(n(65)),v=n(66),A=n(20),b=P(n(19)),_=P(n(69)),w=P(n(36)),E=P(n(39)),k=P(n(70)),O=P(n(22)),S=P(n(53));function P(e){return e&&e.__esModule?e:{default:e}}function I(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return I=function(){return e},e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackOrderUpdated=t.trackOrderRefunded=t.trackOrderCancelled=t.trackOrderConfirmed=t.trackCheckoutPaymentEntered=t.trackCheckoutStepCompleted=t.trackCheckoutStepViewed=t.trackCheckoutStarted=t.trackCartViewed=t.trackProductRemoved=t.trackProductAdded=t.trackProductViewed=t.trackProductClicked=t.trackPromotionClicked=t.trackPromotionViewed=t.trackProductListViewed=t.trackProductsSearched=t.schematizePromotion=t.schematizeProduct=t.schematizeOrder=t.schematizeListOfProducts=t.schematizeCart=void 0;var r,o=(r=n(1))&&r.__esModule?r:{default:r},i=n(8);var a=function(e){return null===e||void 0===e},s=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.label,s=(e=o,t="step",Object.prototype.hasOwnProperty.call(e,t)),u=["currency","orderId","paymentMethod","total"].filter(function(e){return a(r[e])});s&&(a(o.step)&&u.push("step"));if(u.length>0){var c=u.map(function(e){return'"'.concat(e,'"')}).join(", ");return{isValid:!1,errorMessage:"Affirm.js - Error calling ".concat(i,". Required fields: ").concat(c,".")}}return n=r.total,/^\d+$/.test(n)?{isValid:!0,errorMessage:null}:{isValid:!1,errorMessage:"Affirm.js - Error calling ".concat(i,'. "total" field must be an integer.')}},u=function(e,t){return{timestamp:(new Date).toISOString(),currency:e.currency,orderId:e.orderId,paymentMethod:e.paymentMethod,orderTotal:e.total,product:t}},c=function(e,t){return{timestamp:(new Date).toISOString(),currency:e.currency,order_id:e.orderId,payment_method:e.paymentMethod,order_total:e.total,step:t}},l=function(e){return{ctid:e.cartId,ctnm:e.name}};t.schematizeCart=l;var f=function(e){return{ltid:e.listId,ltc:e.category,ltnm:e.name}};t.schematizeListOfProducts=f;var d=function(e){return{osn:e.storeName,oci:e.checkoutId,occ:e.coupon,ocu:e.currency,od:e.discount,ooi:e.orderId,opm:e.paymentMethod,or:e.revenue,os:e.shipping,osm:e.shippingMethod,otx:e.tax,ot:e.total}};t.schematizeOrder=d;var p=function(e){return{prbr:e.brand,prca:e.category,prcc:e.coupon,prcu:e.currency,prnm:e.name,prpr:e.price,prid:e.productId,prqt:e.quantity,prva:e.variant}};t.schematizeProduct=p;var h=function(e){return{pmmc:e.creativeId,pmms:e.message,pmpo:e.position,pmpi:e.promotionId}};t.schematizePromotion=h;t.trackProductsSearched=function(e){var t={query:decodeURIComponent(e)};o.default.trackEvent("trackProductsSearched",t,1,!1)};t.trackProductListViewed=function(e,t){var n={list:f(e),products:t.map(function(e){return p(e)})};o.default.trackEvent("trackProductListViewed",n,1,!1)};t.trackPromotionViewed=function(e){var t={promotion:h(e)};o.default.trackEvent("trackPromotionViewed",t,1,!1)};t.trackPromotionClicked=function(e){var t={promotion:h(e)};o.default.trackEvent("trackPromotionClicked",t,1,!1)};t.trackProductClicked=function(e){var t={product:p(e)};o.default.trackEvent("trackProductClicked",t,1,!1)};t.trackProductViewed=function(e){var t={product:p(e)};o.default.trackEvent("trackProductViewed",t,1,!1)};t.trackProductAdded=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={cart:l(t),product:p(e)};o.default.trackEvent("trackProductAdded",n,1,!1)};t.trackProductRemoved=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={cart:l(t),product:p(e)};o.default.trackEvent("trackProductRemoved",n,1,!1)};t.trackCartViewed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={cart:l(t),products:e.map(function(e){return p(e)})};o.default.trackEvent("trackCartViewed",n,1,!1)};t.trackCheckoutStarted=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t||[];if(n){var a=s(e,{label:"trackCheckoutStarted"}),c=a.isValid,l=a.errorMessage;return c?o.default.trackEvent("UserBeginsPixelOrder",u(e,r),1,!1,n):(0,i.logWarning)(l)}return o.default.trackEvent("trackCheckoutStarted",{order:d(e),products:r.map(p)},1,!1,n)};t.trackCheckoutStepViewed=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var r=s(t,{label:"trackCheckoutStepViewed",step:e}),a=r.isValid,u=r.errorMessage;return a?o.default.trackEvent("UserViewsPixelCheckoutStep",c(t,e),1,!1,n):(0,i.logWarning)(u)}return o.default.trackEvent("trackCheckoutStepViewed",{step:e,order:d(t)},1,!1,n)};t.trackCheckoutStepCompleted=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var r=s(t,{label:"trackCheckoutStepCompleted",step:e}),a=r.isValid,u=r.errorMessage;return a?o.default.trackEvent("UserCompletesPixelCheckoutStep",c(t,e),1,!1,n):(0,i.logWarning)(u)}return o.default.trackEvent("trackCheckoutStepCompleted",{step:e,order:d(t)},1,!1,n)};t.trackCheckoutPaymentEntered=function(e,t){var n={order:d(t),step:e};o.default.trackEvent("trackCheckoutPaymentEntered",n,1,!1)};t.trackOrderConfirmed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t||[];if(n){var a=s(e,{label:"trackOrderConfirmed"}),c=a.isValid,l=a.errorMessage;return c?o.default.trackEvent("UserConfirmsPixelOrder",u(e,r),1,!1,n):(0,i.logWarning)(l)}return o.default.trackEvent("trackOrderConfirmed",{order:d(e),products:r.map(p)},1,!1,n)};t.trackOrderCancelled=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t||[];if(n){var a=s(e,{label:"trackOrderCancelled"}),c=a.isValid,l=a.errorMessage;return c?o.default.trackEvent("UserCancelsPixelOrder",u(e,r),1,!1,n):(0,i.logWarning)(l)}return o.default.trackEvent("trackOrderCancelled",{order:d(e),products:r.map(p)},1,!1,n)};t.trackOrderRefunded=function(e,t,n){var r={amount:e,currency:t,orderId:n,products:((arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])||[]).map(function(e){return p(e)})};o.default.trackEvent("trackOrderRefunded",r,1,!1)};t.trackOrderUpdated=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t||[];if(n){var a=s(e,{label:"trackOrderUpdated"}),c=a.isValid,l=a.errorMessage;return c?o.default.trackEvent("UserUpdatesPixelOrder",u(e,r),1,!1,n):(0,i.logWarning)(l)}return o.default.trackEvent("trackOrderUpdated",{order:d(e),products:r.map(p)},1,!1,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADAPTIVE_CHECKOUT_PUBLIC_API_KEYS=void 0;t.ADAPTIVE_CHECKOUT_PUBLIC_API_KEYS=["27GDB3KH87ZPDICH","JWT2LAPPJQTDK2SW","FDZPOIM536QEZPP5","SXO2XZQ1OQ4KFWZC","6UD7GEK4U046B61J","QN6SCT3JOMWTJ90E","FFPUYR6P1654ODTA","DYNB1M9QLFHS47AR","VZ60GS0BX7RPPVWN","TNF5NU0UBXCB9XD5","H9DOZHJKDAZK68WU","3OQOHEB92S5AL33F","Y7YCRFSNMXGWVY2B","PIH7A1LKPA9ZAU24","V49TV5P48A687DU7","HXF83ZEBF449AP02","AK2DBZ68BRNLSZ55","J64NYL3G1DKJKB1V","BOZ5XSH959LDM4ZU","4UDO5IUJVOMQ5PHD","N6HM56EKFFUEFTT0","S6FHDTFYV6DDXZD5","Y4GXFJ6ZZ0NIWGIF","R2KS4FNU3WA5ILQX","PUKW23HVGVQF1XJN","YJM31BCW00Q58S3V","DZK2I17PYFDUIO1L","6HDNQ9YCNUNWNETV","LVEC84XYH1TYGG30","7SXFPNH8IFLCFIJ4","62ZNI4BHHBCQL1FA","QOE1IY8O7SUPIEQW","QM417IPHRV7F0TT6","YJ978EA9EIHRI7CN","A85J1VARSMJ4LB32","4IFF0LPB412QVJ6X","19QM9L004P0D521M","3YXHZXT8GGPGRIUH","D2FYAAX8YTGWLYZB","8JTVMFX5Q7GT8KJ0","OFADH1CHSEQIDHDP","94NCH5PAXPFSDW6I","EAXE45QORTXPR8HY","5HQ4NWB4X643A4GM","BF1E98V0I4ZFN4LF","PTCKDSV4A44PRCP8","P3B3CYAZ2MG3F623","D50TRX6V0QC4GUQC","LC8L7YAYS7LJH37I","WB4ZGZRQ5529WGHY","8JXGSBOZCN9DKILG","6JUZU4FBFQTV1ZCD","WMBM5MOFR503HKQJ","HZ9STG0UUTT5V84S","G6KDN1FTYUWEW1OT","YATW0CPO4ZX2PC0Z","LV2522QG9NXCFS23","CJHE6X1MCL5D9GYZ","A3R18WNBS6DVDZS8","R4DN4G53PT26BCMJ","RQ3WYPYYIFM1SRDR","K1TCS68DO4W0BA0Y","Y4Z8UKWYCL5NLBS9","MFA17HWWXAUEV9C0","DD1IFOA504CED288","GTYB1LCHAZZKE6DR"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadjs=void 0;var r,o,i=(r=document.getElementsByTagName("script")[0],o=r.parentNode,function(e,t){var n=document.createElement("script");n.src=e,n.type="text/javascript","function"==typeof n.addEventListener?n.addEventListener("load",t,!1):n.onreadystatechange=function(){n.readyState in{loaded:1,complete:1}&&(n.onreadystatechange=null,t())},o.insertBefore(n,r)});t.loadjs=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!o.default.sniffer.cors)return(0,r.showError)({body:u,title:s}),i.default.trackEvent(c),!1;return!0};var r=n(20),o=a(n(0)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s="Your browser is out of date",u="Your browser is missing important features that allow Affirm checkout to work properly. Please upgrade your browser at http://browsehappy.com before continuing.",c="CORS not available"},function(e,t,n){"use strict";(function(e){!function(e){function t(){this._callbacks=[]}function n(e,n,r,i){var a,s,u=new t;r=r||{},i=i||{};try{a=function(){var e;if(window.XMLHttpRequest)(e=new XMLHttpRequest).withCredentials=!0;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}return e}()}catch(e){return u.done(o.ENOXHR,""),u}for(var c in s=function(e){var t="";if("string"==typeof e)t=e;else{var n=encodeURIComponent;for(var r in e)e.hasOwnProperty(r)&&(t+="&"+n(r)+"="+n(e[r]))}return t}(r),"GET"===e&&s&&(n+="?"+s,s=null),a.open(e,n),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i)i.hasOwnProperty(c)&&a.setRequestHeader(c,i[c]);var l=o.ajaxTimeout;if(l)var f=setTimeout(function(){a.abort(),u.done(o.ETIMEOUT,"",a)},l);return a.onreadystatechange=function(){if(l&&clearTimeout(f),4===a.readyState){var e=!a.status||(a.status<200||a.status>=300)&&304!==a.status;u.done(e,a.responseText,a)}},a.send(s),u}function r(e){return function(t,r,o){return n(e,t,r,o)}}t.prototype.then=function(e,n){var r;return this._isdone?r=e.apply(n,this.result):(r=new t,this._callbacks.push(function(){var t=e.apply(n,arguments);t&&"function"==typeof t.then&&t.then(r.done,r)})),r},t.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var e=0;e<this._callbacks.length;e++)this._callbacks[e].apply(null,arguments);this._callbacks=[]};var o={Promise:t,join:function(e){var n=new t,r=[];if(!e||!e.length)return n.done(r),n;var o=0,i=e.length;function a(e){return function(){o+=1,r[e]=Array.prototype.slice.call(arguments),o===i&&n.done(r)}}for(var s=0;s<i;s++)e[s].then(a(s));return n},chain:function e(n,r){var o=new t;return 0===n.length?o.done.apply(o,r):n[0].apply(null,r).then(function(){n.splice(0,1),e(n,arguments).then(function(){o.done.apply(o,arguments)})}),o},ajax:n,get:r("GET"),post:r("POST"),put:r("PUT"),del:r("DELETE"),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:0};e.exports=o}(e)}).call(this,n(124)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t);var r=n(12),o="iframe-dimensions",i="iframe-ready",a="AFFIRM_FRAME_MESSAGES",s="request-parent-bounds",u="request-iframe-dimensions";function c(e){var t=l(e);t&&t.name===u&&f()}function l(e){var t;if("string"==typeof e.data)try{(t=JSON.parse(e.data)).id!==a&&(t=null)}catch(e){t=null}return t}function f(){var e=document.body.style.height,t=document.body.style.minHeight;document.body.style.height="auto",document.body.style.minHeight=0;var n={height:document.body.offsetHeight,id:a,name:o,width:document.body.offsetWidth};document.body.style.height=e,document.body.style.minHeight=t,window.parent.postMessage(JSON.stringify(n),"*")}t.default={IFRAME_DIMENSIONS_MESSAGE:o,IFRAME_READY_MESSAGE:i,initMessageListener:function(){r.default.bind(window,"message",c),window.parent.postMessage(JSON.stringify({id:a,name:i}),"*"),f()},isInIFrame:function(){return window.self!==window.top&&window.parent},requestParentBounds:function(){window.parent.postMessage(JSON.stringify({id:a,name:s}),"*")},parsePostMessageData:l,sendBodyDimensions:f,PARENT_BOUNDS_MESSAGE:"parent-bounds",POST_MESSAGE_ID:a,REQUEST_PARENT_BOUNDS_MESSAGE:s,REQUEST_IFRAME_DIMENSIONS_MESSAGE:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(10));function o(e){return e&&e.__esModule?e:{default:e}}var i=new(o(n(127)).default),a=(0,r.default)(i,["hide","remove","show"]);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(7)),o=a(n(128)),i=a(n(32));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fullScreenWidgets=[],this.widgets=[],(0,r.default)(this,"hideAll","remove","show")}var t,n,a;return t=e,(n=[{key:"contains",value:function(e){return e instanceof o.default?this.fullScreenWidgets.indexOf(e)>-1:this.widgets.indexOf(e)>-1}},{key:"hide",value:function(e){e instanceof i.default&&e.state.isShown&&e.hide()}},{key:"hideAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.fullScreenWidgets.forEach(function(e){return e.hide()}),e||this.widgets.forEach(function(e){return e.hide()})}},{key:"remove",value:function(e){e instanceof i.default&&(e instanceof o.default?this.fullScreenWidgets=this.fullScreenWidgets.filter(function(t){return t!==e}):this.widgets=this.widgets.filter(function(t){return t!==e}),e.remove())}},{key:"show",value:function(e){var t=this;if(e instanceof i.default&&!e.state.isShown){if(e.on("removed",function n(){e.off("removed",n),t.remove(e)}),e instanceof o.default&&this.hideAll(),this.track(e),e.state.isLoaded)e.show();else{e.on("iframeReady",function t(){e.off("iframeReady",t),e.show()}),e.load()}}}},{key:"track",value:function(e){e instanceof i.default&&!this.contains(e)&&(e instanceof o.default?this.fullScreenWidgets.push(e):this.widgets.push(e))}}])&&s(t.prototype,n),a&&s(t,a),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(32)),o=s(n(0)),i=s(n(7)),a=s(n(30));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;return p(e)}(this,n)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,r.default);var t=d(n);function n(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var a={"-webkit-tap-highlight-color":"transparent",overflow:"hidden",position:"fixed",bottom:"0",left:"0",right:"0",top:"0",zIndex:n.MAX_ZINDEX_VALUE,margin:"0",border:"0",padding:"0"};return o.default.isMobile()&&(a=o.default.extend({"-webkit-overflow-scrolling":"touch","overflow-y":"scroll",position:"fixed","-webkit-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)"},a)),r=t.call(this,o.default.extend({styles:a},e)),(0,i.default)(p(r),"onHide","onShow"),r.on("hidden",r.onHide).on("shown",r.onShow),r}return l(n,null,[{key:"MAX_ZINDEX_VALUE",get:function(){return 2147483647}}]),l(n,[{key:"disablePageScroll",value:function(){void 0===this.bodyOverflowStyle&&(this.bodyHasVerticalScroll=a.default.hasVerticalScrollbar(),this.documentOverflowStyle=document.documentElement.style.overflow,document.documentElement.style.overflow="unset",this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden")}},{key:"onHide",value:function(){this.resetFocus(),this.resetPageScroll(),o.default.isMobile()&&this.resetBodyPosition()}},{key:"onShow",value:function(){this.activeElementBeforeShown=document.activeElement,o.default.isMobile()&&this.setBodyPosition(),this.disablePageScroll(),this.setFocus()}},{key:"resetBodyPosition",value:function(){void 0!==this.bodyPosition&&(o.default.setElementStyle(document.body,{position:this.bodyPosition}),delete this.bodyPosition)}},{key:"resetFocus",value:function(){this.activeElementBeforeShown&&"function"==typeof this.activeElementBeforeShown.focus&&(this.activeElementBeforeShown.focus(),delete this.activeElementBeforeShown)}},{key:"resetPageScroll",value:function(){document.documentElement.style.overflow=this.documentOverflowStyle,delete this.documentOverflowStyle,document.body.style.overflow=this.bodyOverflowStyle,delete this.bodyOverflowStyle}},{key:"setBodyPosition",value:function(){void 0===this.bodyPosition&&(this.bodyPosition=document.body.style.position,o.default.setElementStyle(document.body,{position:"fixed"}))}},{key:"setFocus",value:function(){this.$iframe&&"function"==typeof this.$iframe.focus&&this.$iframe.focus()}}]),n}();t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(130),i=(r=n(10))&&r.__esModule?r:{default:r};var a=new o.Host,s=(0,i.default)(a,["createClient","getClient","removeClient"]);t.default=s},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=t.Host=void 0;var o=n(131);Object.defineProperty(t,"Host",{enumerable:!0,get:function(){return r(o).default}});var i=n(134);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(132)),i=r(n(56)),a=n(33),s=n(34),u=function(){function e(e){var t=this;this.clients=[],this.nameAliases={},this.messageListener=function(e){t.logger.debug("Receiving event",e);var n=a.arrayFindBy(t.clients,function(t){return t.targetWindow===e.source});if(n){var r=e.data;r&&r.frameId===n.id?(t.logger.debug("dispatchEvent",{type:r.event,data:r}),n.dispatchEvent({type:r.event,data:r})):t.logger.warning("Incorrect frameId, receiving "+(null===r||void 0===r?void 0:r.frameId)+", expecting "+n.id)}else t.logger.debug("Message source not among registered clients",e.source)},this.logger=new i.default("PostMessageHost",null===e||void 0===e?void 0:e.debugLevel),this.listenMessage()}return e.init=function(t){return new e(t)},e.prototype.createClient=function(e,t){var n=null===t||void 0===t?void 0:t.name;if(n&&this.nameAliases[n])throw new Error("Duplicated name for the client");var r=new o.default(e,t);return this.clients.push(r),n&&(this.nameAliases[n]=r.id),r},e.prototype.getClient=function(e){var t=this.nameAliases[e]||e;return a.arrayFindBy(this.clients,function(e){return e.id===t})},e.prototype.removeClient=function(e){var t="string"==typeof e?this.getClient(e):e;if(t){var n=this.clients.indexOf(t);-1!==n&&this.clients.splice(n,1)}},e.prototype.tearDown=function(){window.removeEventListener("message",this.messageListener)},e.prototype.listenMessage=function(){window.addEventListener("message",this.messageListener)},e.PROTOCOL_VERSION=s.PROTOCOL_VERSION,e}();t.default=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(54),s=i(n(55)),u=n(33),c=n(34),l=function(e){function t(t,n){var r=e.call(this)||this;return r.targetWindow=null,r.origin=u.getOrigin(t),r.id=u.uuidv4(),r.targetWindow=(null===n||void 0===n?void 0:n.targetWindow)||null,r.name=null===n||void 0===n?void 0:n.name,r.url=u.appendParams(t,{frameId:r.id,origin:u.getOrigin(window.location.href)}),r.ackOnInit(),r}return o(t,e),t.prototype.setTargetWindow=function(e){this.targetWindow=e},t.prototype.on=function(e,t){var n=this;this.addEventListener(e,function(e){var r=e.data;t.call(n,r)})},t.prototype.notify=function(e,t){if(!this.targetWindow)throw new Error("No targetWindow available");var n={channel:a.CHANNEL,protocolVersion:c.PROTOCOL_VERSION,event:e};t&&(n.data=t),this.targetWindow.postMessage(n,this.origin)},t.prototype.onInitialized=function(e){this.on(a.EventName.Initialized,e)},t.prototype.onClose=function(e){this.on(a.EventName.Close,e)},t.prototype.onClientResize=function(e){this.on(a.EventName.ClientResize,e)},t.prototype.onStepChange=function(e){this.on(a.EventName.StepChange,e)},t.prototype.onStateChange=function(e){this.on(a.EventName.StateChange,e)},t.prototype.ackOnInit=function(){var e=this;this.onInitialized(function(){e.notify(a.EventName.InitializedAck)})},t}(s.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendParamsForIE=t.getQueryStringParamsForIE=t.getOriginForIE=t.uuidForIE=void 0,t.uuidForIE=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.getOriginForIE=function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+(t.host&&t.host.split(":")[0])+(t.port?":"+t.port:"")},t.getQueryStringParamsForIE=function(e){return(0===e.indexOf("?")?e.slice(1):e).split("&").reduce(function(e,t){var n=t.split("="),r=n[0],o=n[1];return e[r]=o?decodeURIComponent(o.replace(/\+/g," ")):"",e},{})},t.appendParamsForIE=function(e,t){return e+(-1===e.indexOf("?")?"?":"&")+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=u(n(55)),l=u(n(135)),f=n(54),d=n(33),p=n(34),h=s(n(56)),m=function(e){function t(t,n,r){var o=e.call(this)||this;return o.id=t,o.origin=n,o.targetWindow=window.parent,o.listener=function(e){var t;if(o.logger.debug("Receiving event",e),e.origin===o.origin)if(e.data&&e.data.channel===f.CHANNEL)if(e.source===o.targetWindow){var n=e.data;o.logger.debug("dispatchEvent",{type:n.event,data:n}),o.dispatchEvent({type:n.event,data:n})}else o.logger.info("different source from targetWindow");else o.logger.info("event.data.channel: "+(null===(t=e.data)||void 0===t?void 0:t.channel));else o.logger.info("event.origin: "+e.origin,"this.origin: "+o.origin)},o.origin=n,o.id=t,o.logger=new h.default("PostMessageClient",null===r||void 0===r?void 0:r.debugLevel),o.listenMessage(),o.notify(f.EventName.Initialized,null===r||void 0===r?void 0:r.initData),o}return o(t,e),t.checkEnvironment=function(){var e=d.getClientParams(window.location.search),t=e.id,n=e.origin;return t&&n?window.parent===window.self?(h.consoleLog("Running client in parent window, noop"),!1):{id:t,origin:n}:(h.consoleLog("Invalid id or origin"),!1)},t.init=function(e,n){void 0===n&&(n=!1);var r=t.checkEnvironment();if(!r){if(n)return new l.default;throw new Error("Invalid id or origin")}return new t(r.id,r.origin,e)},t.prototype.notify=function(e,t){var n={channel:f.CHANNEL,protocolVersion:p.PROTOCOL_VERSION,event:e,frameId:this.id};t&&(n.data=t),this.logger.debug("postMessage",n,this.origin),this.targetWindow.postMessage(n,this.origin)},t.prototype.on=function(e,t){var n=this;this.addEventListener(e,function(e){var r=e.data;t.call(n,r)})},t.prototype.tearDown=function(){window.removeEventListener("message",this.listener)},t.prototype.notifyClientResize=function(e){this.notify(f.EventName.ClientResize,e)},t.prototype.notifyClose=function(e){this.notify(f.EventName.Close,e)},t.prototype.notifyStateChange=function(e){this.notify(f.EventName.StateChange,{state:e})},t.prototype.notifyStepChange=function(e){this.notify(f.EventName.StepChange,{step:e})},t.prototype.listenMessage=function(){window.addEventListener("message",this.listener)},t.PROTOCOL_VERSION=p.PROTOCOL_VERSION,t}(c.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){return this.id=null,this.origin=null,new Proxy(this,{get:function(e,t){if(t in e)return e[t];throw new Error("client is not initialized")}})}}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=w(n(137)),o=w(n(2)),i=n(23),a=w(n(35)),s=w(n(57)),u=w(n(5)),c=w(n(3)),l=n(8),f=w(n(13)),d=w(n(58)),p=n(20),h=w(n(11)),m=w(n(18)),g=n(14),y=w(n(0)),v=w(n(1)),A=w(n(7)),b=w(n(37)),_=w(n(12));function w(e){return e&&e.__esModule?e:{default:e}}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e){"@babel/helpers - typeof";return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;return C(e)}(this,n)}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(n,h.default);var t=M(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),!r.checkoutPayload&&!r.src)throw new Error(n.MISSING_SOURCE_ERROR);var i=Object.assign({mode:r.mode||n.MODE_REDIRECT},r),a={name:"checkout-application",popupCss:{width:"640px"}};return r.src&&(a.src=n.decorateUrlWithDeviceId(r.src)),(e=t.call(this,i,Object.assign(a,o))).config=Object.assign(e.config,e.defaultConfig,i),(0,A.default)(C(e),"onGetCheckoutDataError","onPopupClose","postMessageListener"),(0,A.default)(e.config,C(e),"onFail","onSuccess"),_.default.bind(window,"message",e.postMessageListener),e}return I(n,[{key:"defaultConfig",get:function(){return{mode:n.MODE_REDIRECT,onFail:this.onCheckoutFail,onSuccess:this.onCheckoutSuccess}}},{key:"defaultOptions",get:function(){var e=R(x(n.prototype),"defaultOptions",this);return e.resizeHeight=!0,e}}],[{key:"addCohortIdToPayload",value:function(e){return s.default.getFinancingExperimentCohortId(u.default.getPublicApiKey()).then(function(t){if(!t)return e;var n=Object.assign({},e);return n.meta=n.meta||{},n.meta.cohort_id=t,n})}},{key:"decorateUrlWithDeviceId",value:function(e){var t=o.default.localDeviceId;return t?y.default.formattedUrl(e,{device_id:t}):e}},{key:"createCheckout",value:function(e){return n.addCohortIdToPayload(e).then(function(e){return fetch(n.CREATE_CHECKOUT_URL,{body:y.default.param(e),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},method:"POST",mode:"cors"})})}},{key:"createCheckoutUrl",value:function(e,t){var r=n.CHECKOUT_FRONTEND_URL;return{checkoutUrl:"".concat(r).concat(t.merchant.public_api_key,"/new/").concat(e,"/"),checkoutAri:e}}},{key:"getErrorDialogConfig",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.ERROR_MAPPING,i=t.field&&t.field.match(/^(shipping|billing|total)/i);if(["financial-product-state-exclusion","inactive-merchant"].indexOf(t.code)>-1)e={body:t.message};else if("invalid_field"===t.code&&i)if(t.ui&&t.ui.main&&t.ui.sub){var a=t.ui.sub_extra,s="";a&&a.length&&(s="<br /><p>".concat(a.map(r.default).join("</p><p>"),"</p>")),e={body:(0,r.default)(t.ui.sub),body_extra:s,title:(0,r.default)(t.ui.main)}}else if(o[t.field]&&"state"===t.message)e={title:"Your address is outside the United States.",body:"We're sorry, Affirm currently only provides financing in the United States. Please return to the merchant to choose another payment method."};else if(o[t.field]){var u=o[t.field];e={body:"Please return to the merchant to correct your ".concat(u,"."),title:"You provided an invalid ".concat(u,".")}}else e=t.message?{body:t.message}:{body:"We're sorry, there was an issue with the ".concat(i[0]," information provided, please update your information and try again.")};else"checkout-amount-over-limit"===t.code?e={body:"Your purchase amount is over Affirm's limit. Please choose another payment method or modify your purchase total.",title:"Please choose another payment method"}:"service_unavailable"===t.code&&(e={body:"We're working hard to make Affirm even better. Please try again later.",icon_class:"affirm-alert-icon-large",title:"Affirm is temporarily unavailable due to regular maintenance"});return e}},{key:"handleCheckoutWithIdResponse",value:function(e){var t=e.checkoutUrl,r=e.checkoutAri;return(0,g.validateCheckoutAri)(r)?{token:r,url:t}:Promise.reject({error:n.INVALID_CHECKOUT_ARI})}},{key:"handleCheckoutResponse",value:function(e){var t=e.checkoutData,r=e.response;if(v.default.trackAPI(n.CREATE_CHECKOUT_URL,r.status,t),200===r.status){var o=t.redirect_url;if(o){var i=t.id;if(!i)i=O(o.match(/\/new\/(\w*)/)||[],2)[1];var a={token:i,url:o};return t.js_callback_id&&(a.js_callback_id=t.js_callback_id),a}var s={error:n.UNKNOWN_ERROR};return Promise.reject(s)}var u=t||n.UNKNOWN_ERROR;return 503===r.status&&(u={code:"service_unavailable"}),Promise.reject(u)}},{key:"isValidMode",value:function(e){return h.default.isValidMode(e)||e===n.MODE_REDIRECT||e===n.MODE_INLINE}},{key:"isCaas",value:function(e){return e&&e.merchant&&e.merchant.caas}},{key:"parseCheckoutResponse",value:function(e){return e.json().then(function(t){return{checkoutData:t,response:e}}).catch(function(){return e.text().then(function(t){return{checkoutData:t,response:e}}).catch(function(){return{checkoutData:e.body,response:e}})})}},{key:"payloadFilter",value:function(e){return void 0!==e&&null!==e&&(!!Array.isArray(e)||("object"!==k(e)||Object.keys(e).length>0))}},{key:"showGetCheckoutDataError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.isCaas?(0,p.showError)(E({},n.getErrorDialogConfig(e),{container:t.externalContainer,iframe_container_css:{position:"relative",height:"100%"},fullscreen:1})):(0,p.showError)(n.getErrorDialogConfig(e))}},{key:"windowReload",value:function(e){window.location=e}},{key:"APP_NAME",get:function(){return"Affirm Checkout"}},{key:"CREATE_CHECKOUT_URL",get:function(){return encodeURI(y.default.getApiUrl(c.default.resource_urls.new_order))}},{key:"CHECKOUT_FRONTEND_URL",get:function(){return encodeURI(y.default.getFrontendUrl(c.default.resource_urls.new_order))}},{key:"ERROR_MAPPING",get:function(){return{"billing.address":"billing address","billing.phone_number.phone_number":"billing phone number","billing.phone_number":"billing phone number","billing.name.first":"billing first name","billing.name.last":"billing last name","billing.email.email":"billing email","billing.name":"billing name","billing.email":"billing email","shipping.address":"shipping address","shipping.phone_number.phone_number":"shipping phone number","shipping.phone_number":"shipping phone number","shipping.name":"shipping name","shipping.name.first":"shipping first name","shipping.name.last":"shipping last name","shipping.email.email":"shipping email","shipping.email":"shipping email",total:"total"}}},{key:"INVALID_CHECKOUT_ARI",get:function(){return"Checkout ARI must be non-empty and may only contain characters [A-Z] and [0-9]"}},{key:"INVALID_MODE_ERROR",get:function(){return"Widget mode must either be 'modal', 'popup', 'inline', or 'redirect'"}},{key:"MISSING_SOURCE_ERROR",get:function(){return"Widget config must either include a checkoutPayload or a src"}},{key:"MODE_REDIRECT",get:function(){return"redirect"}},{key:"MODE_INLINE",get:function(){return"inline"}},{key:"POPUP_OVERLAY_MESSAGE",get:function(){return"Please click continue if you don't see the Affirm Checkout window. You may need to turn off your pop-up blocker."}},{key:"POST_MESSAGE_ID",get:function(){return"AFFIRM_CHECKOUT_MESSAGES"}},{key:"REQUEST_CHECKOUT_CLOSE_MESSAGE",get:function(){return"REQUEST_CHECKOUT_CLOSE"}},{key:"UNKNOWN_ERROR",get:function(){return{code:"unknown_error",message:"An unknown error has occurred",type:"unknown_error"}}}]),I(n,[{key:"close",value:function(e,t){var r=this;this.isInvalidCheckoutSuccessData(t)?v.default.trackActionLog("AFJS Checkout invalid success data",{checkoutAri:this.config.checkoutAri,checkoutToken:t.data.checkout_token}):t?R(x(n.prototype),"close",this).call(this,function(){t.success?(r.isValidVcnCheckoutSuccessData(t.data)||v.default.trackActionLog("AFJS Checkout invalid vcn success data",{checkoutAri:r.config.checkoutAri,checkoutToken:t.data&&t.data.checkout_token,checkoutSuccessData:Object.keys(t.data)}),v.default.trackActionLog("AFJS_checkout_succeeded",{checkoutAri:r.config.checkoutAri,checkoutToken:t.data&&t.data.checkout_token,elapsedTime:Date.now()-r.widgetOpenTime,isIFrameReady:r.isIFrameReady,widgetMode:r.config.mode}),r.config.onSuccess(t.data)):(v.default.trackActionLog("AFJS_checkout_failed",{checkoutAri:r.config.checkoutAri,elapsedTime:Date.now()-r.widgetOpenTime,isIFrameReady:r.isIFrameReady,widgetMode:r.config.mode}),r.config.onFail(t.data)),r.unload(),"function"==typeof e&&(v.default.trackActionLog("AFJS_checkout_close_callback",{checkoutAri:r.config.checkoutAri,widgetMode:r.config.mode}),e())}):(v.default.trackActionLog("AFJS_user_closed_modal",{checkoutAri:this.config.checkoutAri,widgetMode:this.config.mode}),this.postMessage({id:n.POST_MESSAGE_ID,name:n.REQUEST_CHECKOUT_CLOSE_MESSAGE}))}},{key:"enableHeaderAuth",value:function(e){if(!y.default.sniffer.cookies||!y.default.sniffer.localstorage)return v.default.trackActionLog("AFJS_checkout_header_auth_enabled",{checkoutAri:this.config.checkoutAri,reason:"cookies",widgetMode:e}),Promise.resolve(!0);if(n.isCaas(this.config.checkoutPayload)){var t=e===h.default.MODE_POPUP||e===h.default.MODE_UNSUPPORTED;return t&&v.default.trackActionLog("AFJS_checkout_header_auth_enabled",{checkoutAri:this.config.checkoutAri,reason:"caas",widgetMode:e}),Promise.resolve(t)}return e===h.default.MODE_POPUP&&y.default.isIosWebView()&&!y.default.isAffirmWebView()?(v.default.trackActionLog("AFJS_checkout_header_auth_enabled",{checkoutAri:this.config.checkoutAri,reason:"ios in-app",widgetMode:e}),Promise.resolve(!0)):Promise.resolve(!1)}},{key:"getCheckoutData",value:function(){var e=(0,b.default)(this.config.checkoutPayload,n.payloadFilter),t=this.config.checkoutAri;return t?Promise.resolve(n.createCheckoutUrl(t,e)).then(n.handleCheckoutWithIdResponse):n.createCheckout(e).then(n.parseCheckoutResponse).then(n.handleCheckoutResponse)}},{key:"isInvalidCheckoutSuccessData",value:function(e){return e&&e.success&&e.data&&e.data.checkout_token&&0!==e.data.checkout_token.indexOf("LS-")&&e.data.checkout_token!==this.config.checkoutAri}},{key:"isValidVcnCheckoutSuccessData",value:function(e){var t=this.config&&this.config.merchant&&this.config.merchant.use_vcn,n=e&&e.billing_address&&e.cardholder_name&&e.checkout_token&&e.created&&e.cvv&&e.expiration&&e.id&&e.number,r=e&&e.is_pay_now&&e.cardholder_name&&e.cvv&&e.expiration;return r&&delete e.is_pay_now,!t||n||r}},{key:"loadCheckoutSource",value:function(e){var t=this;this.getCheckoutData().then(function(n){t.onGetCheckoutDataSuccess(n,e)},this.onGetCheckoutDataError)}},{key:"onCheckoutFail",value:function(e){"declined"===e.reason?n.windowReload(this.config.merchant.user_decline_url):n.windowReload(this.config.merchant.user_cancel_url)}},{key:"onCheckoutSuccess",value:function(e){return(0,d.default)({checkoutData:e,checkoutAri:this.config.checkoutAri,mode:this.config.mode,userConfirmationUrl:this.config.merchant.user_confirmation_url,userConfirmationUrlAction:this.config.merchant.user_confirmation_url_action})}},{key:"onGetCheckoutDataError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R(x(n.prototype),"close",this).call(this,function(){e.unload();var r={isCaas:n.isCaas(e.config.checkoutPayload),externalContainer:e.options.container};n.showGetCheckoutDataError(t,r)})}},{key:"onGetCheckoutDataSuccess",value:function(e,t){this.setCheckoutData(e),v.default.trackActionLog("AFJS_open_checkout",{checkoutAri:this.config.checkoutAri,widgetMode:this.config.mode}),this.config.mode===h.default.MODE_MODAL||this.config.mode===n.MODE_INLINE?R(x(n.prototype),"open",this).call(this,t):this.config.mode===h.default.MODE_POPUP?this.updatePopupSource(this.options.src,t):this.config.mode===n.MODE_REDIRECT&&(y.default.setUrl(this.options.src),"function"==typeof t&&t())}},{key:"onPopupClose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.popup.off("close",this.onPopupClose),v.default.trackActionLog("AFJS_popup_closed_by_user",{checkoutAri:this.config.checkoutAri,widgetMode:this.config.mode,canceled:e}),e&&this.close(null,{data:{reason:"canceled"},success:!1})}},{key:"onPopupOpen",value:function(e){var t=this;this.popup.on("close",this.onPopupClose),R(x(n.prototype),"onPopupOpen",this).call(this,function(){t.options.src?"function"==typeof e&&e():t.loadCheckoutSource(e)})}},{key:"open",value:function(e){var t=this;return h.default.determineMode(this.config.mode).then(function(r){return t.enableHeaderAuth(r).then(function(o){var i=r,a=t.config.checkoutPayload;o&&((a=a||{}).merchant=a.merchant||{},a.merchant.use_headers=!0,t.config.checkoutPayload=a,i=h.default.MODE_MODAL),(0,l.getTuftAndNeedleSplitPayExperiment)().then(function(r){(0,l.getAdaptiveCheckoutExperiment)(!0).then(function(o){if(a=a||{},r&&(a.financing_program=l.TUFT_AND_NEEDLE_SP_FP),a.use_adaptive=o,t.config.checkoutPayload=a,y.default.isAffirmWebView()&&i!==n.MODE_REDIRECT&&(i=h.default.MODE_MODAL),i===h.default.MODE_UNSUPPORTED){var s=a&&a.merchant&&a.merchant.use_vcn;i=s?n.MODE_UNSUPPORTED:n.MODE_REDIRECT}t.config.mode=i,i===h.default.MODE_MODAL||i===n.MODE_INLINE?(v.default.trackImpression(i===n.MODE_INLINE?"Checkout Inline Page":"Checkout Modal Page"),t.options.src?R(x(n.prototype),"open",t).call(t,e):t.loadCheckoutSource(e)):i===h.default.MODE_POPUP?(v.default.trackImpression("Checkout Popup Page"),R(x(n.prototype),"open",t).call(t,e)):i===n.MODE_REDIRECT?(v.default.trackImpression("Checkout Redirect Page"),t.options.src?(v.default.trackActionLog("AFJS_open_checkout_with_src_set",{checkoutAri:t.config.checkoutAri,widgetMode:t.config.mode,src:t.options.src}),y.default.setUrl(t.options.src)):t.loadCheckoutSource(e)):i===h.default.MODE_UNSUPPORTED&&(v.default.trackActionLog("AFJS_open_checkout_mode_unsupported_error",{checkoutAri:t.config.checkoutAri,widgetMode:t.config.mode}),(0,p.showError)({body:"Affirm Checkout requires third party cookies in order to work properly. Please enable them in your settings before continuing, or use a different browser.",title:"Your browser is missing important features"}),"function"==typeof e&&e())})})})})}},{key:"postMessageListener",value:function(e){var t=m.default.parsePostMessageData(e);if(t&&t.id===n.POST_MESSAGE_ID)switch(t.name){case"AFFIRM_CHECKOUT_CLOSE":v.default.trackActionLog("AFJS_checkout_post_message_received",{checkoutAri:this.config.checkoutAri,isIFrameReady:this.isIFrameReady,messageName:t.name,widgetMode:this.config.mode}),this.close(null,t),a.default.open(i.Apps.toast,{forceShow:!0,onSuccess:!0});break;case"AFFIRM_CHECKOUT_INIT":this.clearTimers(!0);break;case"AFFIRM_CHECKOUT_STEP":f.default.trigger("checkout:step",{step:t.data&&t.data.step})}}},{key:"setCheckoutData",value:function(e){this.config.checkoutAri=e.token,this.options.src=n.decorateUrlWithDeviceId(y.default.formattedUrl(e.url,{fs:1}))}},{key:"unload",value:function(){R(x(n.prototype),"unload",this).call(this),_.default.unbind(window,"message",this.postMessageListener),this.trigger("unload",{},!1)}}]),n}();t.default=j},function(e,t,n){"use strict";var r=/["'&<>]/;e.exports=function(e){var t,n=""+e,o=r.exec(n);if(!o)return n;var i="",a=0,s=0;for(a=o.index;a<n.length;a++){switch(n.charCodeAt(a)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}s!==a&&(i+=n.substring(s,a)),s=a+1,i+=t}return s!==a?i+n.substring(s,a):i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(9)),o=u(n(139)),i=u(n(22)),a=n(14),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,r.default);var t=p(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this,"Popup")).options=Object.assign(n.DEFAULT_OPTIONS,r),e}return f(n,null,[{key:"DEFAULT_OPTIONS",get:function(){return{popupName:"Affirm",popupOverlayMessage:"Please click continue if you don't see the Affirm window. You may need to turn off your pop-up blocker.",popupTimeout:2500,popupWidth:400}}}]),f(n,[{key:"clearTimer",value:function(){clearTimeout(this.popupTimer),delete this.popupTimer}},{key:"close",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.clearTimer(),this.popupOverlay&&this.popupOverlay.close(),this.popupWindow&&(this.popupWindow.close(),delete this.popupWindow),this.trigger("close",t),"function"==typeof e&&e(t)}},{key:"getLoadingPage",value:function(){i.default.get("templates/loading.html",this.renderLoadingPage.bind(this))}},{key:"open",value:function(e){return this.popupWindow&&!this.popupWindow.top&&delete this.popupWindow,this.popupWindow?this.popupWindow.focus():(this.popupTimer=setTimeout(this.openPopupOverlay.bind(this,e),this.options.popupTimeout),this.popupWindow=window.open(this.options.src||"",this.options.popupName,(0,a.childWindowParams)(this.options.popupWidth)),this.options.src||this.getLoadingPage()),"function"==typeof e&&e(),this.popupWindow}},{key:"openPopupOverlay",value:function(e){delete this.popupTimer,this.popupOverlay?this.popupOverlay.open():(this.popupOverlay=new o.default({template_args:{title:this.options.popupOverlayMessage}}),this.popupOverlay.on("close",this.close.bind(this,null,!0)).on("continue",this.open.bind(this,e)).on("continue",function(){s.default.trackImpression("Popup Appeared From Continue")}))}},{key:"renderLoadingPage",value:function(e){var t=i.default.render({},e);!this.options.src&&this.popupWindow&&this.popupWindow.document&&(this.popupWindow.document.open(),this.popupWindow.document.write(t),this.popupWindow.document.close())}},{key:"updateSource",value:function(e){this.options.src=e,this.popupWindow&&this.popupWindow.location&&this.popupWindow.location.replace(e)}}]),n}();t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(36)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,r.default);var t,n,i,a=c(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=a.call(this,o.default.extend({name:"affirm_overlay",template:"templates/overlay.html",template_args:{title:"Please click continue if you don't see the Affirm window. You may need to turn off your pop-up blocker."}},t))).open(),e}return t=l,i=[{key:"APP_NAME",get:function(){return"Affirm Overlay"}}],(n=null)&&s(t.prototype,n),i&&s(t,i),l}();t.default=f},function(e,t,n){"use strict";n.r(t),n.d(t,"TIMEOUT_ERROR",function(){return r});var r="TIMED_OUT";t.default=function(e,t){var n,o,i,a=new Promise(function(e,a){o=a,i=e,n=setTimeout(function(){a(r)},t)});return Promise.race([e,a]).then(function(e){return clearTimeout(n),i(),e}).catch(function(e){throw clearTimeout(n),o(),e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(n(2)),o=f(n(5)),i=f(n(32)),a=f(n(11)),s=f(n(15)),u=f(n(16)),c=f(n(1)),l=f(n(0));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,i.default);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this,r)).options=l.default.extend({styles:{height:"290px",width:"100%","min-width":"278px","max-width":"424px",transition:"100ms height ease-in"}},r),e.setupIframeOptions(e.options),e.setupListeners(),e}return h(n,null,[{key:"generateCheckoutUrl",value:function(e){var t=r.default.localDeviceId,n=(e.data||{}).total;return l.default.formattedUrl(l.default.getFrontendUrl("products/inline_checkout"),{amount:n,device_id:t,merchant_public_key:o.default.getPublicApiKey()})}},{key:"generateModalOptions",value:function(e){var t=(e.data||{}).total;return u.default.generatePromoPrequalConfig(Object.assign(s.default.get(),{use_promo:!0}),{amount:t,inline:!0},a.default.MODE_MODAL,window.location.href)}},{key:"DEFAULT_CONTAINER_ID",get:function(){return"affirm-inline-checkout-container"}},{key:"IFRAME_TITLE",get:function(){return"Inline Checkout"}}]),h(n,[{key:"getContainer",value:function(e){return e.container||this.options.container||n.DEFAULT_CONTAINER_ID}},{key:"openPrequalModal",value:function(){var e=n.generateModalOptions(this.options);return this.modalElement||(this.modalElement=new u.default(e)),this.modalElement.open(null,e)}},{key:"setupIframeOptions",value:function(e){this.options.container=this.getContainer(e),this.options.src=n.generateCheckoutUrl(e)}},{key:"setupListeners",value:function(){var e=this;this.on("openLearnMore",function(){c.default.trackUserInteraction("Inline Learn More Clicked",c.default.USER_ACTIONS.CLICK),e.openPrequalModal()})}},{key:"update",value:function(e){if(null!=e){var t={container:this.getContainer(e)};this.options=Object.assign(this.options,e,t)}this.setupIframeOptions(e),this.reload(this.options)}}]),n}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(143)),o=i(n(146));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={"checkout-button":r.default,promo:o.default},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s[e])throw new Error("".concat(e," is not a valid Affirm component type"));return new s[e](t).getApi()}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(3)),o=u(n(13)),i=u(n(144)),a=u(n(60)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,i.default);var t=g(n);function n(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=s.default.getFrontendUrl(r.default.resource_urls.checkout_button_route);return(o=t.call(this,{id:"checkout-button",src:i},e)).setupEventListeners(),o}return h(n,null,[{key:"isEqualItems",value:function(e,t){return!(!e||!t)&&(e.length===t.length&&e.every(function(e,n){return e.display_name===t[n].display_name&&e.unit_price===t[n].unit_price&&e.qty===t[n].qty&&e.sku===t[n].sku}))}}]),h(n,[{key:"handlePostMessage",value:function(e){var t=e.name,r=f(e,["name"]);if(d(y(n.prototype),"handlePostMessage",this).call(this,l({name:t},r)),t===n.OPEN_ORDERS){if("click"in this.eventHandlers)return this.handleOnClick();this.setupOrders({})}return null}},{key:"handleOnClick",value:function(){var e=this.eventHandlers.click;return Promise.resolve(e()).then(this.setupOrders.bind(this))}},{key:"setupOrders",value:function(e){var t=e.items,r=e.blockModal,i=e.discount_codes;if(r&&!0===r)o.default.trigger("orders:blocked");else{var s=t||this.options.items;this.prequalOrderWidget&&n.isEqualItems(this.prequalOrderWidget.items,s)||(this.prequalOrderWidget=new a.default({startAtOrders:!0,items:s,discountCodes:i||this.options.discount_codes},{})),this.prequalOrderWidget.open()}}},{key:"setupEventListeners",value:function(){var e=this;o.default.on("orders:open",function(){e.postMessage(n.ORDERS_HAS_OPENED)}),o.default.on("orders:blocked",function(){e.postMessage(n.ORDERS_BLOCKED)})}}]),n}();t.default=A,v(A,"OPEN_ORDERS","AFFIRM_COMPONENT_CHECKOUT_BUTTON_OPEN_ORDERS"),v(A,"ORDERS_HAS_OPENED","AFFIRM_COMPONENT_CHECKOUT_BUTTON_ORDERS_HAS_OPENED"),v(A,"ORDERS_BLOCKED","AFFIRM_COMPONENT_CHECKOUT_BUTTON_ORDERS_BLOCKED")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(2)),o=u(n(5)),i=u(n(18)),a=u(n(0)),s=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var f=function(){function e(t,n){var i=t.id,a=t.src;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!i)throw new Error("An id is required to create a component.");if(!a)throw new Error("A src is required to create a component.");this.options=Object.assign({},n),this.id="".concat(i,"-").concat(parseInt(1e16*Math.random(),10));var s=r.default.localDeviceId,u=a.indexOf("?")>-1?"&":"?";this.src="".concat(a).concat(u,"componentId=").concat(this.id,"&device_id=").concat(s,"&public_api_key=").concat(o.default.getPublicApiKey()),this.setupIFrame(),this.setupPostMessage(),this.eventHandlers={},this.externalApi={render:this.render.bind(this),update:this.update.bind(this),unmount:this.unmount.bind(this),on:this.on.bind(this),off:this.off.bind(this)}}return l(e,null,[{key:"POST_MESSAGES",get:function(){return{iframeReady:"AFFIRM_COMPONENT_IFRAME_READY",style:"AFFIRM_COMPONENT_STYLE",updateOptions:"AFFIRM_COMPONENT_UPDATE_OPTIONS"}}},{key:"DEFAULT_STYLES",get:function(){return{width:"0",height:"0",display:"block"}}},{key:"IFRAME_CLASS",get:function(){return"affirm-component-iframe"}}]),l(e,[{key:"setupIFrame",value:function(){this.isIFrameReady=!1,this.iframe=document.createElement("iframe"),a.default.setElementAttrs(this.iframe,{id:this.id,class:e.IFRAME_CLASS,width:e.DEFAULT_STYLES.width,height:e.DEFAULT_STYLES.height,frameborder:0,allowScroll:"no",allowTransparency:!0,src:this.src}),a.default.setElementStyle(this.iframe,e.DEFAULT_STYLES)}},{key:"setupPostMessage",value:function(){s.default.bind(window,"message",this.postMessageListener.bind(this))}},{key:"render",value:function(e){var t=document.querySelector(e);if(!t)throw new Error("There are no elements matching the selector ".concat(e));if(this.iframe.parentNode===t)return this.getApi();if(this.iframe.parentNode)throw new Error("You must unmount() this element before rendering it to a different container");return t.appendChild(this.iframe),this.getApi()}},{key:"unmount",value:function(){return this.iframe.parentNode&&(this.iframe.parentNode.removeChild(this.iframe),this.isIFrameReady=!1),this.getApi()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.options,t),this.postMessage(e.POST_MESSAGES.updateOptions,this.options),this.getApi()}},{key:"on",value:function(e,t){return this.eventHandlers[e]=t,this.getApi()}},{key:"off",value:function(e){return e in this.eventHandlers&&delete this.eventHandlers[e],this.getApi()}},{key:"getApi",value:function(){return this.externalApi}},{key:"postMessage",value:function(e,t){if(!this.isIFrameReady||!this.iframe.contentWindow)return!1;var n=JSON.stringify({id:this.id,name:e,data:t});return this.iframe.contentWindow.postMessage(n,a.default.getDomain(this.src)),!0}},{key:"updateStyles",value:function(e){e.width&&this.iframe.setAttribute("width",e.width),e.height&&this.iframe.setAttribute("height",e.height),a.default.setElementStyle(this.iframe,e)}},{key:"handlePostMessage",value:function(t){switch(t.name){case e.POST_MESSAGES.iframeReady:this.isIFrameReady=!0,this.update();break;case e.POST_MESSAGES.style:this.updateStyles(t.data)}}},{key:"postMessageListener",value:function(e){var t=i.default.parsePostMessageData(e);t&&t.id===this.id&&this.handlePostMessage(t)}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrder=t.createOrder=void 0;var r=a(n(5)),o=a(n(3)),i=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s=i.default.getFrontendUrl("api/pf/orders/v1/"),u=function(){console.error("Affirm could not create an order because of invalid options. Please check documentation (https://docs.affirm.com/) for valid options.")};t.createOrder=function(e){var t=e.items,n=e.discount_codes,i=void 0===n?[]:n,a=o.default.merchant;if(!a)return u(),Promise.resolve();var c={items:t,merchant:{merchant_apply_discount_endpoint:a.merchant_apply_discount_endpoint,merchant_create_order_endpoint:a.merchant_create_order_endpoint,merchant_update_shipping_option_newsletter_endpoint:a.merchant_update_shipping_option_newsletter_endpoint,name:a.merchant_name,public_api_key:r.default.getPublicApiKey(),user_cancel_url:a.user_cancel_url,user_confirmation_url:a.user_confirmation_url,use_vcn:a.use_vcn,newsletter_config_enabled:a.newsletter_config_enabled,discount_config_enabled:a.discount_config_enabled},discount_codes:i};return o.default.checkout&&o.default.checkout.metadata&&(c.metadata=o.default.checkout.metadata),fetch(s,{body:JSON.stringify(c),headers:{"Content-Type":"application/json"},method:"POST",mode:"cors"}).then(function(e){return e.json()}).catch(console.error).then(function(e){return e&&e.ari?e:u()})};t.getOrder=function(e){return fetch(function(e){return i.default.getFrontendUrl("api/pf/orders/v1/".concat(e))}(e),{method:"GET",mode:"cors",credentials:"include"}).then(function(e){return 200!==e.status?Promise.reject("Failed to get order from server"):e.json()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(n(2)),o=p(n(38)),i=p(n(5)),a=n(8),s=p(n(15)),u=p(n(11)),c=p(n(16)),l=p(n(0)),f=p(n(31)),d=p(n(1));function p(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=["logo","symbol","text"],v=["black","blue","white"],A=3e6,b=.01,_=["qty","unitPrice","displayName","sku"],w=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"getFormattedOptions",function(e){return Object.assign({affirmLogoColor:"blue",affirmLogoType:"logo",amount:0,learnMoreShow:!0,items:[]},e)}),g(this,"getPromo",function(){n.promoJson=null;var t=n.options,r=t.amount,i=t.pageType,a=t.affirmLogoType,s=t.affirmLogoColor,u=t.promoId,c=t.learnMoreShow,l=t.items;if(!e.optionsAreValid(n.options))return Promise.resolve(null);if(!i)return console.error("ERROR (Affirm): No pageType provided."),Promise.resolve(null);if(r>A)return console.error("ERROR (Affirm): Amount provided is greater than maximum loan amount."),Promise.resolve(null);if(-1===y.indexOf(a))return console.error('ERROR (Affirm): Received an incorrect affirmLogoType value: "'.concat(a,'".')),Promise.resolve(null);if(-1===v.indexOf(s))return console.error('ERROR (Affirm): Received an incorrect affirmLogoColor value: "'.concat(s,'".')),Promise.resolve(null);var f=[];if(l.forEach(function(e){var t=Object.keys(e);_.forEach(function(e){-1===t.indexOf(e)&&-1===f.indexOf(e)&&f.push(e)})}),f.length>0)return console.error('ERROR (Affirm): "'.concat(f,'" is a required field for each item.')),Promise.resolve(null);var p=Date.now(),h=Object.assign({},n.options),m={promoId:u,amount:r,pageType:i,items:l,logoType:a,logoColor:s,showCTA:c.toString()};return o.default.getPromoResponse(n.apiKey,m,o.default.TEMPLATE_FIELD.ala).then(function(e){return d.default.trackEvent("Promo JS: create ALA",{elapsedTime:Date.now()-p},b),JSON.stringify(n.options)!==JSON.stringify(h)?null:(n.promoJson=e?e.promo:null,e?e.promo:null)})}),g(this,"generatePromoPrequalConfig",function(e){var t=e.promoId,o=e.amount,i=e.pageType,a=e.items,c=e.adaptiveCheckoutEnabled,d=e.tuftAndNeedleSplitPayGoEnabled,p=s.default.get(),m=n.apiKey;return h({},p,{urlParams:{device_id:r.default.localDeviceId,items:a,merchant_name:p.merchant_name,promo_external_id:t,referring_url:encodeURIComponent(window.location.href),unit_price:o,webhook_session_id:p.webhook_session_id||l.default.getWebhookSessionId(),page_type:i,use_promo:!0,bluecore_distinct_id:f.default.getDistinctID(m),bluecore_token:f.default.getToken(m),split_pay_go_enabled:d||null,use_adaptive:c||null},mode:u.default.MODE_MODAL})}),g(this,"openPrequalModal",function(e){return n.modalElement?n.modalElement.open(null,{mode:u.default.MODE_MODAL}):(0,a.getTuftAndNeedleSplitPayExperiment)(!0).then(function(t){return(0,a.getAdaptiveCheckoutExperiment)(!0).then(function(r){var o=n.generatePromoPrequalConfig(h({},e,{tuftAndNeedleSplitPayGoEnabled:t,adaptiveCheckoutEnabled:r})),i=new c.default(o);return n.modalElement=i,i.open(null,{mode:u.default.MODE_MODAL})})})}),g(this,"setupAffirmModalTrigger",function(e,t){var n=e.getElementsByClassName("affirm-modal-trigger");if(0===n.length)return d.default.trackEvent("no affirm-modal-trigger found",h({},t)),null;if(n.length>1)return d.default.trackEvent("too many affirm-modal-trigger elements found",h({numElements:n.length},t)),null;var r=n[0],o=r.innerText||r.innerHTML;return r.setAttribute("aria-label","".concat(o," - Affirm Financing Promotions (opens in modal)")),r.setAttribute("href","javascript:void(0)"),r}),this.apiKey=i.default.getPublicApiKey(),this.options=this.getFormattedOptions(t),this.promo=this.getPromo(),this.promoJson=null,this.modalElement=null,this.externalApi={render:this.render.bind(this),update:this.update.bind(this)}}var t,n,p;return t=e,p=[{key:"optionsAreValid",value:function(e){if(!e)return console.error("ERROR (Affirm): No options were passed."),!1;var t=["affirmLogoColor","affirmLogoType","amount","brand","category","learnMoreShow","pageType","promoId","sku","items"];return!!Object.keys(e).every(function(e){return t.indexOf(e)>=0})||(console.error("ERROR (Affirm): Received invalid options."),!1)}}],(n=[{key:"getApi",value:function(){return this.externalApi}},{key:"attachModalToAla",value:function(e){var t=this;this.hasRendered=!0,this.isRendering=!1,d.default.trackImpression("Promo JS: ALA Rendered");var n={amount:this.options.amount,pageType:this.options.pageType,promoId:this.options.promoId,type:"product_page_modal",items:(0,a.getItemsInput)(this.options.items)},r=this.setupAffirmModalTrigger(e,n);r&&(r.onclick=function(e){e.preventDefault(),d.default.trackUserInteraction("Promo JS: CTA Clicked",d.default.USER_ACTIONS.CLICK),t.openPrequalModal(n)})}},{key:"render",value:function(e){var t=this,n=document.querySelector(e);return n?(this.cssSelectorForPromo=e,this.isRendering=!0,this.promoJson?(n.innerHTML=this.promoJson.html_ala,this.attachModalToAla(n)):this.promo.then(function(e){e&&(n.innerHTML=e.html_ala,t.attachModalToAla(n))}),this.getApi()):(console.error("ERROR (Affirm): There are no elements matching the selector ".concat(e)),null)}},{key:"update",value:function(t){var n=this;return e.optionsAreValid(t)?(this.modalElement=null,Object.keys(t).forEach(function(e){n.options[e]=t[e]}),this.promo=this.getPromo(),d.default.trackImpression("Promo JS: ALA Updated"),(this.isRendering||this.hasRendered)&&this.render(this.cssSelectorForPromo),this.getApi()):null}}])&&m(t.prototype,n),p&&m(t,p),e}();t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(2)),o=u(n(15)),i=u(n(16)),a=u(n(0)),s=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,s.default)(this,"createPrequalWidget","launchPrequalFlow"),o.default.instance.on(["reset","set","update"],this.createPrequalWidget)}var t,n,u;return t=e,(n=[{key:"createPrequalWidget",value:function(){if(!this.prequalWidget){var e=o.default.get();this.prequalWidget=new i.default(c({},e,{urlParams:{device_id:r.default.localDeviceId,merchant_name:e.merchant_name,referring_url:encodeURIComponent(window.location.href),webhook_session_id:e.webhook_session_id||a.default.getWebhookSessionId()}}))}}},{key:"launchPrequalFlow",value:function(){return this.prequalWidget||this.createPrequalWidget(),this.prequalWidget.open(null,o.default.get()),this.prequalWidget.getTargetWindow()}}])&&l(t.prototype,n),u&&l(t,u),e}();t.default=f},function(e,t,n){var r=n(149);(e.exports=n(150)(!1)).push([e.i,"@font-face {\n  font-family: 'affirm';\n  src: url("+r(n(151))+') format("woff2"), url('+r(n(152))+') format("woff");\n  font-weight: normal;\n  font-style: normal; }\n\n.__affirm-logo {\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: \'affirm\' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  position: relative;\n  white-space: nowrap;\n  /* Enable Ligatures ================ */\n  letter-spacing: 0;\n  -ms-font-feature-settings: "liga" 1;\n  -webkit-font-feature-settings: "liga";\n          font-feature-settings: "liga";\n  -webkit-font-variant-ligatures: discretionary-ligatures;\n          font-variant-ligatures: discretionary-ligatures;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-size: 0.8em;\n  -webkit-text-size-adjust: 100%;\n     -moz-text-size-adjust: 100%;\n      -ms-text-size-adjust: 100%;\n          text-size-adjust: 100%; }\n  .__affirm-logo.__affirm-logo-black {\n    color: #060809; }\n    .__affirm-logo.__affirm-logo-black.__ligature__affirm_full_logo__:after, .__affirm-logo.__affirm-logo-black.__ligature__affirm_short_logo__:after {\n      color: #060809; }\n  .__affirm-logo.__affirm-logo-white {\n    color: #FFFFFF; }\n    .__affirm-logo.__affirm-logo-white.__ligature__affirm_full_logo__:after, .__affirm-logo.__affirm-logo-white.__ligature__affirm_short_logo__:after {\n      color: #FFFFFF; }\n  .__affirm-logo.__affirm-logo-primary, .__affirm-logo.__affirm-logo-blue {\n    color: #060809; }\n    .__affirm-logo.__affirm-logo-primary.__ligature__affirm_full_logo__:after, .__affirm-logo.__affirm-logo-primary.__ligature__affirm_short_logo__:after, .__affirm-logo.__affirm-logo-blue.__ligature__affirm_full_logo__:after, .__affirm-logo.__affirm-logo-blue.__ligature__affirm_short_logo__:after {\n      color: #4A4AF4; }\n    .__affirm-logo.__affirm-logo-primary.__affirm-logo-dark, .__affirm-logo.__affirm-logo-blue.__affirm-logo-dark {\n      color: #fff; }\n  .__affirm-logo.__ligature__affirm_full_logo__:after, .__affirm-logo.__ligature__affirm_short_logo__:after {\n    position: absolute;\n    left: 0;\n    bottom: 0; }\n  .__affirm-logo.__ligature__affirm_full_logo__ {\n    font-size: 1.236em; }\n    .__affirm-logo.__ligature__affirm_full_logo__:after {\n      content: "\\E90C"; }\n  .__affirm-logo.__ligature__affirm_short_logo__:after {\n    content: "\\E90A"; }\n\n@-webkit-keyframes affirm_logo_listener {\n  from {\n    outline: 1px solid transparent; }\n  to {\n    outline: 0 solid transparent; } }\n\n@keyframes affirm_logo_listener {\n  from {\n    outline: 1px solid transparent; }\n  to {\n    outline: 0 solid transparent; } }\n\n@-webkit-keyframes affirm_asset_listener {\n  from {\n    outline: 1px solid transparent; }\n  to {\n    outline: 0 solid transparent; } }\n\n@keyframes affirm_asset_listener {\n  from {\n    outline: 1px solid transparent; }\n  to {\n    outline: 0 solid transparent; } }\n\n.__affirm-logo:not(.__processed) {\n  -webkit-animation: affirm_logo_listener 0.001s;\n          animation: affirm_logo_listener 0.001s; }\n\nimg[src*="cdn-assets.affirm.com"]:not(.__processed) {\n  -webkit-animation: affirm_asset_listener 0.001s;\n          animation: affirm_asset_listener 0.001s; }\n',""])},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t){e.exports="data:font/woff2;base64,d09GMgABAAAAAAlYAA8AAAAAFEgAAAj7AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP0ZGVE0cGjYbIByCNgZgAIMOEQgKl1STPAtOAAE2AiQDgRgEIAWDDweBXRvXEKOikpOP7J8HtjG14VAQdRidULZRWmJz/PX9gfVZGNoYNTYNkUdykoOcYRFOjgiqZevZ3U9BEbJaB5JColAp+KxeCdwXEmXRCBmF/UIh1B3hZs0iKSTgoajWgaqnTVU5QXs1PVd9c+X97+fDncPk9NVmcrp3Maiw/LbS9KefxeqTq7lsVGfuqwEdAAnDKqRcgW30I8LmTrn+tfaqdzIvALg/jD6ejYqM3LvgfjwIIik0IuMz2RSIZR0JV2HT8ZXyK10hK4zqsTbkAKOC1kX1d6+EAHyuRIoB+C1p0XErAoaA9oImbIiSrWLEYGKGWDIbBms5wlJA8CmgT0MHzbwjfcDBAjRhgCgdnTQOo7gxY6eutggEs84OL5CK2RUNFcSyCZxnfxNBI16eCh49plnm3YfnUaseBiftfDKiReKW/gZMGGK4lgabkEQkbohUITFSUkpqLIjADiNG2mdR4OMQYMDo6BBkTmskKWxAXLacGgePgkgEkyqc7ONRzaDtDHTIiEwq4lBVESatQiS5EtUxW5nlRbTGmQjpLT0LYN6cJf4gMbiQphdTYB5CCx7zTrgIednDQABhdxBA1mwQ+jJRIceGpad8iejcehHEIJ9fp1FTF+ErXvi/y5VnKbyCuu3hq3JVm0/D1bAtbA1bwka5Sq4EJiRSSoMdGqINEPnMkQAkhZNAgZPQctN2hwPcPsHjg2DyiPcXoACwCkULqAlrUFVAx/gA5H+L1rquq3h6ILKgbEwIU4VVGEEYG8np/weNVsPj2dmx9mStVCTKNOHqaDdLzjFnarTMTF+28AMKteyMhtjBIIyYYHaOZBiVxam8tlpGXZHZ+TKI9B9M4yhKegE3HC+Pk1KtzLflEpNjEifNF73vN4tbHmmB8Jx3KJmOsvBx3RintyEkYEHWJImEIQQZEWwoEDX6BiinGF9yoNxGhnjV6ja5HafcRSHP3zSx4yFmCyvxmMwlNlx1MpmLYB9B2EUCSTc5CumvjGmYILMR7pBzjV6r4i+SbQaTj1xO4Yrf3sIUsnuQunEyJ4iLYIjPg5G4YLrsvp26w33LSYSU/8f4rpW4QvgwCKU/lMx5ykP2brfvn9YxXrchFGVENHzSNCjkqKQKKlsK0jbZRjdSD9Xh2sIy8JDY7AJxHiOu5FUk9KMh4GOxs4M5TlBKtoC0qH+cuoQ54DNNwsG+o0izAL4L3GXxntYmo7jIjpuAo3VjKbR7AwflxzNCBccU8HLDKoTnANrsrZ5hTagZwm2y2ea5bdwAgORtqK4n7cCBc4WA7I2l3WhbHifFHILrswp+x5kwtstHQDohZmcGGuedshntuXYZDEWKL86YnLN0W8bX5Rsg4uZ2ECB6g6KWdrloRSfG+faQf1WP8zk1S5a1AMxd9GKnUUhzbjK311k9kGQSFH3Esd6jTKhEEs/Lsft+nBJHE0tfJvylk733IR3OdnvQLwgY5og5C0H6h+CI6DNCyjLkil0Tu8exTHDUYldXn++xqMfaSBeLgVk8LU/GCuPwcFlb2dJixIRy9EDGFtYX/LnmL5WhELhKyZiYftsg//9zsN98LVO41tXqqFn2vEn1DzZ/3KRV6iJ1Xq9qiFLVKvX8jSG5NXxoZmOlZMHPW0tFthiT2MA4TdNBlo26sdAsNh+PH+fKL5US57ESf4AaX+j3lYTP7LHsKyZ7p1vElmOWFT0LF/G4l+seB5ten7f1yzdtdcuWoXK7wbbVhPVyPO4zLzz7o/SQRWxuBNfH7z9revYjytUzPDGIYWUwycYzmG8Bzo+XwnuO979zvAe/Djo/T3TKbpDkDdl9Mr6YdCXWcihriWXSiLYsG9XYbqw2VY+NebXG9vbqEaH84jHbq9zLnjSFSt562+M5ubOE2nXS0/72243w9dsKT3DyFFVy8mS75+2vqLUN69aRz5K55r6VOfkshEnWLDZn2GWK5j7L7fnza6x4iVgC+cdBkIhBbIxpOGiLSS4rSyaL4f3r4MkWd4f9S2vVQtpoNVEK4cBQKzEtozi1JDsbAKKL7XmQ2x1R56dosDfJAxIzrSnG4lLyYihx+fqRe8V5Lh0ACBZvArJr/wI+Qgj2NsmLetw/8gYKrRMA8q1RiIHsXwgxu3/98Atpv6mVvqifhl9I/1QrH3L8PBxZVFWUBkUDvM4oRzkpOHQRzDVAuVJDtE97en5NABAcPIRMNV/Gmb23LGgtyBzJPJUxkjGptXh4/TBknJnRGp4cMjRSgQBFahq1r3sWzJ7QdsHGO3PPLDYfgztmHp3Cvc2teQ175+bFSCdLaVHMsbYmD/saW+dEPQFyj0vHSFIkbWTXpNClqUVPOqVJGpKSeDE8PY+efWN7YgAAoO/keUmZorqzLXY0JhQb2rI1VItjo711zNatxKkZjW3rFD2+jPTuk772mrS6lI5ZlzonZfbt23NSZ6esW1+QRrx12+s9Z10MXSqpFn8z++A6bevooFXoJ2/alLp+d2rSkEXeZirETp5sdC9YkFTfP86XFcq6P2H/yuzMDCr123/TEtj23ZqMGVZPNj0+B3r23xnptmaPc2ZBbmtum7ZjUFGZWJxIVVg7G+rRZ/BP7Y3tiTmw3zmcMLwmsBhZoqHf2CvJWcFAJoPJQHv2F6GEt+5J8pyUjUAdzi/frSzrBGHWbxxmwaur/tDc4a7Kd57HAUMFz9Ex9F4hgkOE1L4WsIsb0MMErSjewK88h+wYhSrgrMBvrjXXavnRyt7akgAIqA5rWz5jp0RHwAiGMJIIVppZkEkLQI1fC6GftgGWtvapPDKwQYWLeNnYj0FARpkY4igLoMCPLVIzxQCmj8YlWeNOKBvbaUgvuHt+3+DBAJeCOozq4TUE/uJ3AyA5/8qL3goaMqxTvz4GLvGc4AOB47jinVqqI2k64rR3COrbIqjXiKAA22cqA5pfv8qCVyuLB197mPVWcRnt7/83ORd5nfmZK4gEjGACk0WRYpRStDLlKlSpVqNWnXoNGjVp1sITLMRGGIpAHMRFOCIQD/GRAAmxjp6pA5NcEaN9nU6ns/EoTnc6wQVuSIJkSIFUSIN0yIcCZSEAAA=="},function(e,t){e.exports="data:font/woff;base64,d09GRgABAAAAABJkAAwAAAAAEhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABHAAAASwAAAEs32rhc09TLzIAAAJIAAAAYAAAAGAPEgcYY21hcAAAAqgAAACEAAAAhOoj63VnYXNwAAADLAAAAAgAAAAIAAAAEGdseWYAAAM0AAAMOAAADDiQsAItaGVhZAAAD2wAAAA2AAAANhi1tNFoaGVhAAAPpAAAACQAAAAkDVAJd2htdHgAAA/IAAAAlAAAAJQ+lAb4bG9jYQAAEFwAAABMAAAATBxmH/xtYXhwAAAQqAAAACAAAAAgACwAqW5hbWUAABDIAAABegAAAXp7w/pPcG9zdAAAEkQAAAAgAAAAIAADAAAAAQAAAAoAHgAsAAFsYXRuAAgABAAAAAAAAAABAAAAAWxpZ2EACAAAAAEAAAABAAQABAAAAAEACgAAAAEAHAALADYASABaAGYAdgCGAJQApADUAN4A6AABAAsABAAFAAYABwALAA4AEwAWABwAHQAhAAEABAAeAAYACQAJAAwAFAAPAAEABAAjAAYACQAJAAwAFAAPAAEABAAfAAMABQAKAAEABAAbAAUADgARABUACAABAAQAGQAFAAUAEgASABgAAQAEACAABAARAAUAEAABAAQAHAAFABcADAAHAA0AAgAGAB4AHQALABQABQAQABUAEgAFABQACAAQABYAGgAIAAsAFwAPAAYAFQAXABIAAQAEACMAAgAcAAEABAAjAAIAHQABAAQAIAACACEAAwTiAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpDAPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAaAAAABYAEAADAAYAAQAgAEEAYwBpAHUAeekC6Qz//f//AAAAAAAgAEEAYQBlAGsAeekA6QT//f//AAH/4//D/6T/o/+i/58XGRcYAAMAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAAFAAD/wAQAA8AAGwA4AFQAYABsAAABIgcOAQcGFRQXHgEXFjMyNz4BNzY1NCcuAScmAyInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBiMTJgYHDgEjIiYnLgEHDgEXFhceARcWMzI2NzYmJRQGIyImNTQ2MzIWBRQGIyImNTQ2MzIWAgBqXV2LKSgoKYtdXWpqXV2LKSgoKYtdXWpYTk10IiIiInRNTlhYTk10IiIiInRNTljzECIKHGU2OmEcCiIQEAgHExwcRCcmKFCLKQcI/qgmGhslJRsaJgEqJRsaJiYaGyUDwCgpi11dampdXYspKCgpi11dampdXYspKPxVIiJ0TU5YWE5NdCIiIiJ0TU5YWE5NdCIiAVEKCxAwOjowEAgHCSIQJBscJgsKT0cQIuMbJSUbGyUlGxslJRsbJSUAAAADAAD/xAQAA8AAJgArAFcAAAEjNiYnLgErAQ4BFRYGByMOAQcjIgYVERQWOwEeATMhMjY1ETQmIwUzESMRARQGIyEiJicuASsBET4BNz4BNzY3PgE3NiczMhYXHgEHBhYXHgE7ATIWFREDVaYNEyAaSSYrIzIDShcEEyUMhSMyMiO4IE4wAapHZGRH/QBWVgNWMiT+ViQ5FwkZDAkGDQcGDgkqHx4nCQkCJyAjChMHCQQMDQ0gE6YkMgJzeoUjGhEDMiCwSgYHFw0yI/5VIzIUE2VGAV5DY43+VgGq/oUkMg0NBgcBtwMIBgcHAwoZGVM7O0wHChNuXRMhEA0RMiP+qwAAAAEA4gCVAx4C3gAmAAABJiIPAScmIgcGFB8BBwYUFx4BMzI2PwEXHgEzMjY3NjQvATc2NCcDHg0iDeLiDSINDQ3i4g0NBxEGBhEH4uIHEQYGEQcNDeLiDQ0C3g0N4uINDQ0iDeLiDSINBgcHBuLiBgcHBg0iDeLiDSINAAADAAD/wANuA8AANABRAGQAAAE3NjQnJiIPAS4BJzUzMjY1NCYrASIGFRQWOwEVBgcOAQcGFRQXHgEXFjMyNz4BNzY1NCYnASInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBiMTIzU0JiMiBh0BFBY7ATI2NTQmAw4hDg4PKA4hMHI/MBUcHBXDFBwcFDFSR0hpHh4iI3dQUFtbUFB3IiMzLf6pRz4+XRsaGhtdPj5HRj8+XBsbGxtcPj9GkpIdFBQdHRTDFB0dAokhDigPDg4hJTEHMx0UFB0dFBQdMwkmJXVLS1VbUFB3IyIiI3dQUFtOizn9mRobXT4+R0Y/PlwbGxsbXD4/Rkc+Pl0bGgFVkhQdHRTDFB0dFBQdAAMAAP/AAwADwAAPAB8AWgAAJRE0JiMhIgYVERQWMyEyNichIiY1ETQ2MyEyFhURFAYDIyImNTQ2OwEyNjU0JisBNTQmIyIGHQEiBhUUFjsBMhYVFAYrASIGFRQWOwEVFBYzMjY9ATI2NTQmIwMAMiP9qiMyMiMCViMya/3WCQ0NCQIqCQ0N81YRGRkRqxIZGRJVGRISGTVLSzVWERkZEasSGRkSVRkSEhk1S0s1FQNWIzIyI/yqIzIyIw0JAyoJDQ0J/NYJDQHWGRESGRkSERkrEhkZEitLNTVLGRESGRkSERkrEhkZEitLNTVLAAAAAAYAAP/uCLgCVgAhACsARgBwAKIApgAAEyIGBxc+ATMyFhUUBgcOARUUFjM4ATEyNj8BFTMRNCYjMQMiJjU0NjcUBiMBETM1NDYzOAExMhYXMTcuASMqASMxIgYHNSMlDgEHMS4BIyoBIyIGBxU1IxEzNTQ2MzIWHQEzNTQ2MzIWHQEzETQmIzEFIzU0NjMyFhcnNzAmIyIGHQEjNTQ2MzgBMTIWFzU3LgEjIgYdASMVMxEzETMRMxEzNTsBESPJMmgfJhlKJSIlGBhae0g9KkYVAWtkSSgXF0pGNysEYXRBHg4ZChULGQ0BAQEtOhJsAy8oRBYRQikBAgEnPxFvczAbGSdzLx0XKHNPOPu5aSUUDhsMASQ1MTdnryUUDhsLIw8zIzdnQkJ0rnRoRXNzAZkoGU8WIhcYDxEDDDtFNz4oIQE/AQdSR/6pFRIjHQctQQFL/m3CRTIIB2sEBScoRAwBJiAhJiggAT3+bc84NiMp8c85NSMo8gEWREUMKSgcBwYBURdKYh0pKBwGBwFRCQ5KYh1Z/sUBO/7GATpZ/m0AAwBVABUDqwNrABYAHgBBAAAlAy4BKwE0JiMiBhUjIgYHAwYWMyEyNgEyFhUjNDYzASEiJjUTNDY7ARUUFjMyNj0BMxUUFjMyNj0BMzIWFRMUBiMDq1oGKyBVZUZGZVUdLgZaBjEmArQmMf5PIzKqMiMBPP2ICQxRDAlAGBMTGKoYExMYQAYPUQwJfAIAHSdGZWVGJx3+ACdAPQLDMiMjMv1WEAkB1gYLKxMYGBMrKxMYGBMrCwb+KgkQAAADAAD/wAQAA8AAOgBWAHMAAAEzMjY1NCYrATU0JiMiBh0BIgYVFBY7ATIWFRQGKwEiBhUUFjsBFRQWMzI2PQEyNjU0JisBIiY1NDYzEyIHDgEHBhUUFx4BFxYzMjc+ATc2NTQnLgEnJgMiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBw4BBwYjAdWrExgYE1UYExMYNkpKNlYTFxcTqxMYGBNVGBMTGDZKSjZWExcXEytqXV2LKSgoKYtdXWpqXV2LKSgoKYtdXWpYTk10IiIiInRNTlhYTk10IiIiInRNTlgCQBcUExcrExgYEytJNzZKFxMUFxcUExcrExgYEytJNzZKFxMUFwGAKCmLXV1qal1diykoKCmLXV1qal1diyko/FUiInRNTlhYTk10IiIiInRNTlhYTk10IiIAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAX/wAWJA8AAOgAABTY3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFhcjJicuAScmNTQ3PgE3NjMyFx4BFxYVFAcOAQcGByMEnBcSEhkHBiwtmWdndnVnZ5osLAYHGRISF6ISDg4UBQU4N8CBgJKTgIG/ODcFBRMODhKiQCIlJlAqKyx1Z2eaLC0tLJpnZ3UsKypQJiUiJCYmUCkqK5KBgMA4Nzc4wICBkisqKVAmJiQAAAACAY3/xQPCAkoAKAAyAAABIgcOAQcGBxc+ATMyFhUUBgcGBw4BBwYVFBYzMjY3FTMRNCcuAScmIwMiJjU0NjMUBiMCvCYnJ0ohIBc5JnA3NDgmI0Q7O1YZGXBiPGcdoxQURy8wODAnKn1cSj4CSggIGxISEnkjMyMkFxsDBw4OMyUlNFNePTRfAY09LCs4DQ39+iAcOiY9XwAAAAABBC//9QmOA8AALgAAASIHDgEHBgczNjc+ATc2MzIXHgEXFhUcARUUBgc3Mzc+ATU8ATUVNCcuAScmIzEGynRsbLFAQB5xGTQ0klpaY3lubaUxMBEQAW0CDA83N7+BgZUDwCYmhVpbaE5GR2ogIC0spHR0kAIEAjxzNgYDMnE7AgMCAaCHh8M2NwAAAAEAAAABAAAqWeqfXw889QALBAAAAAAA2AQ4KgAAAADYBDgqAAD/wAmOA8AAAAAIAAIAAAAAAAAAAQAAA8D/wAAACZEAAAAACY4AAQAAAAAAAAAAAAAAAAAAACUEAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAADiA4AAAAMAAAAJkQAABAAAVQQAAAAAAAAABY8ABQVjAY0JkQQvAAAAAAAKABQAHgAoADIAPABGAFAAWgBkAG4AeACCAIwAlgCgAKoAtAC+AMgA0gDcAOYA8AGSAhQCUgLgA1gEKASGBSQFLgWIBdYGHAABAAAAJQCnAAYAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABgAAAAEAAAAAAAIABwBXAAEAAAAAAAMABgAzAAEAAAAAAAQABgBsAAEAAAAAAAUACwASAAEAAAAAAAYABgBFAAEAAAAAAAoAGgB+AAMAAQQJAAEADAAGAAMAAQQJAAIADgBeAAMAAQQJAAMADAA5AAMAAQQJAAQADAByAAMAAQQJAAUAFgAdAAMAAQQJAAYADABLAAMAAQQJAAoANACYYWZmaXJtAGEAZgBmAGkAcgBtVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwYWZmaXJtAGEAZgBmAGkAcgBtYWZmaXJtAGEAZgBmAGkAcgBtUmVndWxhcgBSAGUAZwB1AGwAYQByYWZmaXJtAGEAZgBmAGkAcgBtRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,c=0,l=[],f=n(154);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(v(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(v(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function g(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),h(e,t),t}function y(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var a=c++;n=u||(u=g(t)),r=_.bind(null,n,a,!1),o=_.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",y(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=f(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}e&&d(p(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete i[s.id]}}}};var A,b=(A=[],function(e,t){return A[e]=t,A.filter(Boolean).join("\n")});function _(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(3)),o=s(n(5)),i=s(n(64)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}n(68);var u={},c=["text","logo","symbol"],l=["black","blue","primary","white"],f=function(e){var t,n=e,r=n.getAttribute("data-promo-id"),o=n.getAttribute("data-affirm-color")||"primary",s=n.getAttribute("data-affirm-type")||"logo",f="true"===n.getAttribute("data-learnmore-show"),d="false"!==n.getAttribute("data-clickable");if(-1===c.indexOf(s))throw new Error('Affirm: Received a wrong data-affirm-type value "'.concat(s,'". Element:'),n);if(-1===l.indexOf(o))throw new Error('Affirm: Received a wrong data-affirm-color value "'.concat(o,'". Element:'),n);return t="text"===s?"Affirm":'<span class="__affirm-logo __affirm-logo-'.concat(o,'">').concat("symbol"===s?"affirm":"Affirm","</span>"),a.default.trackImpression("Inline Prequal Promo"),u.getConfig(r).then(function(e){var r=e.pricingTemplate;if(r=r.replace(/\{affirm_logo\}/gi,t),n.innerHTML=r,f){n.innerHTML="".concat(n.innerHTML,". ");var o=document.createElement("a");o.innerHTML="Learn more",o.setAttribute("aria-label","".concat("Learn more"," about Affirm Financing Prequalification (opens in modal)")),o.setAttribute("href","javascript:void(0)"),o.onclick=function(e){a.default.trackUserInteraction("Inline Prequal Promo",a.default.USER_ACTIONS.CLICK),e.preventDefault(),i.default.launchPrequalFlow()},n.appendChild(o)}else d&&(n.setAttribute("aria-label","".concat(r," - Affirm Financing Prequalification (opens in modal)")),n.setAttribute("href","#"),n.onclick=function(e){a.default.trackUserInteraction("Inline Prequal Promo",a.default.USER_ACTIONS.CLICK),e.preventDefault(),i.default.launchPrequalFlow()},n.style="cursor: pointer;")})};u.getConfig=function(e){var t="".concat(r.default.promos_url_prefix,"prequal_text/").concat(o.default.getPublicApiKey(),"/").concat(e,".json");return window.fetch(t).then(function(e){return e.ok?e.json():Promise.reject("Invalid promo ID")})},u.setupElement=f,u.setupElements=function(e){for(var t=0;t<e.length;t+=1){var n=e[t];f(n)}};var d=u;t.default=d},function(e,t,n){"use strict";var r,o=(r=n(22))&&r.__esModule?r:{default:r};o.default.put("templates/learn_more_split_pay.html",n(157)),o.default.put("templates/loading.html",n(158)),o.default.put("templates/promo.html",n(159)),o.default.put("templates/overlay.html",n(160))},function(e,t){e.exports='<!DOCTYPE html>\n<head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n    <title>Learn More About Affirm</title>\n    <meta name="description" content="">\n    <link rel="stylesheet" href="{{ASSETS_ROOT}}styles/main.css">\n</head>\n<body>\n  <div id="modal-wrapper" style="display:none;">\n    <div class="affirm_learn_more_modal-background" onclick="trigger(\'close\');"></div>\n    <div id="affirm_learn_more_modal" class=" {{modal_class}}">\n      <div class="affirm-content-wrapper" style="font-family: {{font}}">\n        <div class="affirm-modal-hero" style="{{ hero_image }}">\n        </div>\n        <div class="affirm-modal-content">\n          <button class="close-modal-button btn" href="javascript:;" onclick="trigger(\'close\');">\n            <span class="close-icon">close</span>\n          </button>\n          <div class="affirm-content-text">\n            <div class="affirm-modal-header">\n              <span class="__affirm-logo __affirm-logo-primary __ligature__affirm_full_logo__ __processed">Affirm</span>\n              <span class="affirm-modal-plus">+</span>\n              <img src="{{logo_image}}" class="affirm-merchant-logo" />\n            </div>\n            <h1 class="affirm-tagline" tabindex="-1">\n              {{copy.tagline}}\n            </h1>\n            <p class="affirm-promo-text" style="font-family: {{fontFamily}};">\n              {{copy.promo}}\n            </p>\n            <div class="affirm-copy-sections">\n              <div class="copy-section">\n                <span class="copy-section-icon" style="color:{{color}};">{{copy.section_1.icon}}</span>\n                <h2 style="font-family: {{fontFamily}};">{{copy.section_1.header}}</h2>\n                <p style="font-family: {{fontFamily}};">{{copy.section_1.body}}</p>\n              </div>\n              <div class="copy-section">\n                <span class="copy-section-icon" style="color:{{color}};">{{copy.section_2.icon}}</span>\n                <h2 style="font-family: {{fontFamily}};">{{copy.section_2.header}}</h2>\n                <p style="font-family: {{fontFamily}};">{{copy.section_2.body}}</p>\n              </div>\n            </div>\n            <div class="affirm-checkout">\n              {{copy.cta}}\n            </div>\n          </div>\n          <div class="affirm-footer">\n            {{footer}}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <script>\n    window[\'affirm_events\'] = {\n      hiding: function(){\n        document.getElementById("modal-wrapper").className = "";\n      },\n\n      showing: function(){\n        document.getElementById("modal-wrapper").className = "show";\n      }\n    };\n\n    setTimeout(function(){\n      window.affirm_events.showing();\n    },100);\n  <\/script>\n</body>\n</html>\n'},function(e,t){e.exports='<!DOCTYPE html>\n  <head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n    <title>Loading</title>\n    <link rel="stylesheet" href="{{ASSETS_ROOT}}styles/main.css"/>\n  </head>\n  <body>\n    <div class="loading-wrapper">\n      <div class="loader">\n        <div class="dots">\n          <div class="dot dot-a"></div>\n          <div class="dot dot-b"></div>\n          <div class="dot dot-c"></div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>'},function(e,t){e.exports='<!DOCTYPE html>\n  <head>\n    <meta charset="utf-8">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n    <title>Affirm Promo</title>\n    <meta name="description" content="">\n    <link rel="stylesheet" href="{{ASSETS_ROOT}}styles/main.css"/>\n    <style>{{custom_css}}</style>\n  </head>\n  <body class="affirm-promo">\n    <a href="javascript:;" id="affirm_promo_link" onclick="trigger(\'click\');">\n      <img src="{{img_src}}" />\n    </a>\n  </body>\n</html>\n'},function(e,t){e.exports='<!DOCTYPE html>\n<head>\n  <meta charset="utf-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n  <title>Affirm Overlay</title>\n  <meta name="description" content="">\n  <link rel="stylesheet" href="{{ASSETS_ROOT}}styles/main.css">\n</head>\n<body>\n  <div id="modal-wrapper" style="display:none;">\n    <button\n      aria-label="Close Modal"\n      class="close-modal-button btn"\n      onclick="trigger(\'close\');"\n    >&times;</button>\n    <div id="affirm-overlay">\n      <div class="affirm-content-wrapper">\n        <div>\n          <h1 class="affirm-section" tabindex="-1">{{title}}</h1>\n        </div>\n        <button\n          aria-label="Continue"\n          id="affirm-primary-action-button"\n          class="btn"\n          onclick="trigger(\'continue\');"\n        >Continue</button>\n      </div>\n    </div>\n  </div>\n  <script>\n    window[\'affirm_events\'] = {\n      hiding: function() {\n        document.getElementById(\'modal-wrapper\').className = \'\';\n      },\n      showing: function() {\n        document.getElementById(\'modal-wrapper\').className = \'show\';\n      },\n    };\n\n    setTimeout(function() {\n      window.affirm_events.showing();\n    }, 100);\n  <\/script>\n</body>\n</html>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=Date.now(),t=Math.random()<g;s.default.ready(),r.default.initialize({apiUrl:f.default.getApiUrl("")}).then(function(){(0,i.getTuftAndNeedleSplitPayExperiment)(!1),(0,i.getAdaptiveCheckoutExperiment)(!1),p.default.ready(function(){var n,r;n=f.default.getApiUrl(""),r=f.default.getFrontendUrl(""),f.default.preconnectTo(n),f.default.preconnectTo(n,!0),f.default.preconnectTo(r),f.default.preconnectTo(r,!0),t&&h.default.trackEvent("DOM: Ready",{elapsedTime:Date.now()-e});for(var i={affirm:"affirm_short_logo",Affirm:"affirm_full_logo"},s=document.getElementsByClassName("__affirm-logo"),p=0;p<s.length;p+=1)(0,d.applyLigatures)(s[p],i);(0,d.addInsertListener)("affirm_logo_listener",function(e){(0,d.applyLigatures)(e,i)});var m=Array.prototype.slice.call(document.getElementsByClassName("affirm-promo"));m.forEach(function(e){if(e)try{new c.default({container:e})}catch(e){h.default.trackActionLog("Promo: incorrect merchant PromoWidget config")}}),a.default.open(o.Apps.toast,{initial:!0}),t&&h.default.trackEvent("Promo: Pre-delay",{elapsedTime:Date.now()-e}),f.default.delay(function(){t&&h.default.trackEvent("Promo: Refresh",{elapsedTime:Date.now()-e}),(0,l.default)({trackPromos:t})}),console&&"function"==typeof console.warn&&f.default.sniffer.failed.forEach(function(e){console.warn("Warning: affirm.js may not work properly due to the follow issue: ".concat(e))}),u.default.ready()})})};var r=m(n(2)),o=n(23);n(162);var i=n(8),a=(m(n(21)),m(n(35))),s=m(n(63)),u=m(n(61)),c=m(n(163)),l=m(n(70)),f=m(n(0)),d=n(14),p=m(n(164)),h=m(n(1));function m(e){return e&&e.__esModule?e:{default:e}}var g=.1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(71),o=s(n(5)),i=s(n(3)),a=n(8);function s(e){return e&&e.__esModule?e:{default:e}}var u="".concat(i.default.frontend_url.replace(/\/$/,"")),c={merchant_public_key:o.default.getPublicApiKey()||(0,a.getPublicApiKeyByWindowLocation)()},l=r.AxpClient.initialize(u,{appName:"affirm-js",appVersion:"10.92.4"},c);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(3)),o=l(n(29)),i=l(n(21)),a=l(n(19)),s=l(n(52)),u=l(n(0)),c=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,s.default);var t=m(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=o.container;if(!i)throw new Error("missing container");var a=o.size||i.getAttribute("data-promo-size");if(!a)throw new Error("missing size");var s=(a=a.toLowerCase()).split("x"),c=parseInt(s[0],10),l=parseInt(s[1],10),f=o.key||i.getAttribute("data-promo-key"),d=o.content||i.getAttribute("data-promo-content");if(!f&&!d)throw new Error("missing ARI or content");var p=null;p=d||"".concat(r.default.base_cdn_url,"/").concat(f,"_").concat(a);var h=u.default.extend({container:i,css:{height:l,width:c},template_args:{img_src:p,target_href:"".concat(u.default.getDomain(r.default.url),"learn-more/")}},o||{});return(e=t.call(this,u.default.extend(h,{name:"affirm_promo",template:"templates/promo.html"}))).setupWidget(o,i),e.promo_ari=f,e}return p(n,null,[{key:"APP_NAME",get:function(){return"Affirm Promo"}}]),p(n,[{key:"renderWidget",value:function(){this.paint()&&this.show(),c.default.trackImpression("Promo Widget")}},{key:"setupWidget",value:function(e,t){var n=this,r=e.productKey||t.getAttribute("data-financial-product-key")||t.getAttribute("data-product-key")||i.default.getProduct();this.product_key=r,r?o.default.get(r,function(e){n.details=e,n.renderWidget()}):this.renderWidget(),this.on("click",function(){u.default.isMobile()&&window.scrollTo(0,0),null!=n.learn_more_window?n.learn_more_window.open():n.learn_more_window=new a.default({source:n})})}}]),n}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=new function(){var e=!1,t=[];function n(e,t,n){window.addEventListener?t.addEventListener(e,n,!1):document.attachEvent&&t.attachEvent("on".concat(e),n)}function r(){!0!==e&&(t.forEach(function(e){"function"==typeof e&&e()}),e=!0)}function o(){if(!0!==e){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(o,1)}r()}}this.ready=function(n){!0!==e||"function"!=typeof n?t.push(n):n()},"complete"!==document.readyState?document.addEventListener?(n("DOMContentLoaded",document,r),n("load",window,r)):document.attachEvent&&(n("load",window,r),n("readystatechange",document,r),document.documentElement.doScroll&&null===window.frameset&&o()):r()};t.default=r},function(e,t,n){"use strict";n.r(t),n.d(t,"WRAPPER_STYLES",function(){return g}),n.d(t,"FRAME_STYLES",function(){return y});var r,o,i="@affirm/messages/v1";!function(e){e.handshake="handshake",e.event="event",e.reply="reply"}(r||(r={})),function(e){e.success="success",e.error="error"}(o||(o={}));var a,s=(a={},function(e){var t=a[e]||1;return a[e]=t+1,t}),u={trackEvent:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("event",t)},tag:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("tag",t)}};try{var c=n(1);u.trackEvent=function(e,t,n){return void 0===n&&(n=1),c.trackEvent("action-log",{action_name:e,action_data:t},n)},u.tag=c.tag}catch(e){}var l=u;function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(){var e=this;d(this,"events",void 0),d(this,"transactions",void 0),d(this,"ready",void 0),d(this,"resolve",void 0),d(this,"reject",void 0),d(this,"origin",void 0),d(this,"messageId",void 0),d(this,"listener",void 0),d(this,"target",void 0),this.reject=function(){},this.resolve=function(){},this.target=window.parent,this.origin="",this.messageId=-1,this.events={},this.transactions={},this.ready=new Promise(function(t,n){e.resolve=t,e.reject=n}),l.tag({postMessageVersion:i})}var t=e.prototype;return t.isSafe=function(e){return(!this.origin||e.origin===this.origin)&&e.data&&e.data.version===i&&(this.messageId<0||e.data.id===this.messageId)},t.onReady=function(e){this.ready.then(e)},t.listen=function(){var e=this;return this.listener=function(t){if(e.isSafe(t)){var n=t.data,i=n.type,a=n.events,s=n.transactionId,u=n.response,c=n.index,f=n.replyType;switch(i){case r.event:a.forEach(function(t,n){var r=t.event,i=t.data;e.events[r]?Object.keys(e.events[r]).forEach(function(t){try{Promise.resolve(e.events[r][t].call(e,i)).then(function(t){e.reply(s,n,t,o.success)})}catch(i){l.trackEvent("Affirm Messages: Internal Error in Callback",{eventName:r,callbackIndex:t,callbackError:i}),e.reply(s,n,i,o.error)}}):l.trackEvent("Affirm Messsages: Event is not registered",{eventType:r})});break;case r.reply:e.transactions[s][c][f](u);break;default:l.trackEvent("Affirm Messages: Received unsupported message type",{messageType:i})}}},window.addEventListener("message",this.listener,!1),this.resolve(this),this},t.on=function(e,t){var n,r=s("listener");this.events[e]?this.events[e][r]=t:this.events[e]=((n={})[r]=t,n)},t.remove=function(e,t){var n=this;Object.keys(this.events[e]).forEach(function(r){n.events[e][r]===t&&delete n.events[e][r]})},t.reply=function(e,t,n,o){this.sendMessage({type:r.reply,transactionId:e,index:t,response:n,replyType:o})},t.close=function(){void 0!==this.listener&&window.removeEventListener("message",this.listener,!1)},t.sendMessage=function(e){var t=this;void 0!==this.target&&this.ready.then(function(){try{t.target.postMessage(f({version:i,id:t.messageId},e),t.origin)}catch(r){l.trackEvent("Affirm Messages: Failed to send message",{message:e,error:r,origin:t.origin});var n=e.transactionId;n&&t.transactions[n]&&t.transactions[n].forEach(function(e){e[o.error]({error:r})})}})},t.send=function(e,t){return this.sendAll([{event:e,data:t}])[0]},t.sendAll=function(e){var t=[],n=e.map(function(e,n){return new Promise(function(e,r){var i;t[n]=((i={})[o.success]=e,i[o.error]=r,i)})}),i=s("transaction");return this.transactions[i]=t,this.sendMessage({type:r.event,transactionId:i,events:e}),n},e}();function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=Object.freeze({height:"1px",width:"1px",position:"fixed",zIndex:2147483646}),y=Object.freeze({height:"100%",width:"100%",margin:"0",border:"0",padding:"0"}),v=function(e){var t,n;function o(t,n){var r;return void 0===n&&(n=document.body),m(h(r=e.call(this)||this),"url",void 0),m(h(r),"frame",void 0),m(h(r),"container",void 0),m(h(r),"wrapper",void 0),r.url=t,r.container=n,r.messageId=Date.now()+Math.random(),l.tag({postMessageId:r.messageId}),r.wrapper=document.createElement("div"),r.frame=r.generateFrame(r.wrapper),null===r.frame.contentWindow?(r.reject(),h(r)||h(r)):(r.target=r.frame.contentWindow,r.handshake(),h(r)||h(r))}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=o.prototype;return a.generateFrame=function(e){var t=document.createElement("iframe");return Object.assign(e.style,g),Object.assign(t.style,y),e.id=""+this.messageId,e.appendChild(t),this.container.appendChild(e),t},a.close=function(){e.prototype.close.call(this),null!==this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper)},a.handshake=function(){var e,t,n=this;this.origin=(e=this.url,(t=document.createElement("a")).href=e,void 0===t.origin?t.protocol+"//"+(t.host&&t.host.split(":")[0]):t.origin);var o,a=performance.now(),s=!1;window.addEventListener("message",function e(t){if(n.isSafe(t)){if(t.data.type!==r.handshake)return l.trackEvent("Affirm Messages: Received unsupported handshake type",{messageType:t.data.type}),n.reject();clearInterval(o),window.removeEventListener("message",e,!1),n.origin=t.origin,s&&l.trackEvent("Affirm Message: Recovered hanshake connection after failure");var i=performance.now();return l.trackEvent("Affirm Messages: Handshake completed",{totalTime:i-a},.1),n.listen()}return null},!1);var u=function(){try{n.target.postMessage({version:i,type:r.handshake,id:n.messageId},n.origin)}catch(e){l.trackEvent("Affirm Messages: Initial handshake failed",{origin:n.origin,error:e})}};this.frame.addEventListener("load",function(){o=function(e,t,n,r){if(n<1)return-1;var o=1,i=window.setInterval(function(){e(),(o+=1)>=n&&("function"==typeof r&&r(),window.clearInterval(i))},t);return e(),i}(u,500,50,function(){s=!0,l.trackEvent("Affirm Messages: Failed to complete handshake connection")})},!0),this.frame.src=this.url},o}(p);t.default=v}]);