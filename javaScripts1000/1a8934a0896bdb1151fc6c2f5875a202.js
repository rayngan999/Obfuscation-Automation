"use strict";var WebsocketConn={dataFlow:!1,maxConnectionRetry:7,connectionRetryCount:0,defaults:{websocketUrl:"wss://nc.ciner.com.tr/sub/dot",reconnectInterval:1e3},settings:null,init:function(e,n){var o=this;o.settings=$.extend({},o.defaults,e),{ws:null,dataCheckTimeoutDefault:5e3,dataCheckTimeoutMax:2e4,dataCheckTimeoutOffset:1e3,dataCheckTimeout:4e3,dataFlow:!1,updateMessage:function(e){if(o.isJson(e)){this.dataFlow=!0;var t=jQuery.parseJSON(e);n(t)}else console.log(e)},connect:function(){if(o.connectionRetryCount++,o.connectionRetryCount>o.maxConnectionRetry)return!1;console.log(".");var t=this;t.ws=new WebSocket(o.settings.websocketUrl),t.ws.onopen=function(){t.checkDataFlow()},t.ws.onmessage=function(e){t.updateMessage(e.data)},t.ws.onclose=function(e){t.reconnect()},t.ws.onerror=function(e){t.updateMessage("Socket encountered error: "+e.message+". Closing socket.."),t.disconnect()}},disconnect:function(){this.ws.close()},reconnect:function(){var e=this;setTimeout(function(){e.connect()},o.reconnectInterval)},checkDataFlow:function(){var e=this;e.dataCheckTimeout=parseInt(e.dataCheckTimeout+e.dataCheckTimeoutOffset),e.dataCheckTimeout>e.dataCheckTimeoutMax&&(e.dataCheckTimeout=e.dataCheckTimeoutDefault),setTimeout(function(){e.dataFlow||e.disconnect()},e.dataCheckTimeout)}}.connect()},isJson:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}};