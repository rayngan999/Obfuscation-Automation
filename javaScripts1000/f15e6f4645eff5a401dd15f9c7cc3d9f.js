define(["modules/id.core","modules/id.nonAmdLoader"],function(e){"use strict";e.utils.log("loading id.emqTr.js");var t=function(){this.conf={eventName:"emetriqDataReceived"};var t=this;this.trackEmetriq=function(t){t&&""!=""+t&&e.event.publish(e.event.constants.CUA.TRACK,[{event:"INTERACTION",index:"user-insights",payload:{segments:""+t}}])},this.init=function(){window.traffective&&window.traffective.emetriqData?(e.utils.log("window.traffective.emetriqData data is already there, call tracking directly"),t.trackEmetriq(window.traffective.emetriqData)):(e.utils.log("window.traffective.emetriqData is missing, adding event listener."),document.addEventListener(this.conf.eventName,function(i){e.utils.log("traffective emetriq event received, call tracking"),t.trackEmetriq(i.detail)}))}};return t});