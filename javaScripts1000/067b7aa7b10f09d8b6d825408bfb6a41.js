new Vue({data:member_data_layer,created:function(){if(this.initDataLayer(),void 0===this.login_user)return!1;this.login_user.user_type_name&&this.sendDataLayer(this.login_user.user_type_name),this.login_user.login.status&&this.sendLoginEvent()},methods:{initDataLayer:function(){window.dataLayer=window.dataLayer||[]},sendDataLayer:function(e){dataLayer.push({member:e})},sendLoginEvent:function(){dataLayer.push({eventCategory:"Member-Login Response",eventAction:"Login Success",eventLabel:"cw|header Login|success",event:"LoginReferrer"})}}}),function(e,n,t){var r=function(e,r){function u(e,n){var r=arguments.length>2&&arguments[2]!==t?arguments[2]:null;return null!==e?e[n]:r}function a(){return u(v,"uuid",null)}function i(){return u(d,"email",null)}function c(){return null===u(v,"uuid",null)?null:"cw"}function o(){var e=u(v,"subscribe",!1);return e?_.get(e,"KCW.status",!1)?"auto":"not_auto":null}function l(){return u(v,"user_type_text",null)}function s(e){function n(e){return"no"===e||null===e?"no":e.split(" ")[0]}var t=void 0;switch(e){case"web":return t=u(v,"wenddate","no"),n(t);case"app":return t=u(v,"eenddate","no"),n(t);case"daily":return t=u(v,"denddate","no"),n(t);case"paper":return t=u(v,"cenddate","no"),n(t)}}var d=e,v=r,f=new RegExp("(?:(?:^|.*;\\s*)__eruids*=s*([^;]*).*$)|^.*");return $dmpid=n.cookie.replace(f,"$1"),{pushProfile:function(){var e={dmpid:$dmpid,user_id:a(),email:i(),member:c(),subscriber:l(),subscribe_renew:o(),w_end_date:s("web"),e_end_date:s("app"),d_end_date:s("daily"),c_end_date:s("paper")};_.forEach(e,function(n,t){null===n&&delete e[t]}),qg("identify",e)}}},u=function(e){var n=e;return{status:function(){!0===n.status&&qg("event","login_complete",{})}}},a=function(n){function t(){var e=["id","channel","subchannel","title","author","keyword"];return _.pick(r,e)}var r=n;return{visit:function(){qg("event","article_view",r)},keywordSearch:function(){qg("event","search_result_click",t())},keywordClick:function(n,t){qg("event","keyword_click",{keyword:n}),e.open(t,"_blank")},share:function(e){var n=t();n.method=e,qg("event","article_share",n)},bookmark:function(e){var n=t();n.collect=e?"add":"cancel",qg("event","article_collect",n)},readComplete:function(){var e=t();qg("event","article_readcomplete",e)}}},i=function(e){var n=e;return{keyword:function(){qg("event","keyword_search",{keyword:n.text})}}},c=function(){function n(){var n=new URLSearchParams(e.location.search),t=n.has("source")?n.get("source"):null,r=n.has("utm_source")?n.get("utm_source"):null,u=t||(r||null);return _.includes(["fb_cw","line_cw","email_spedm","web_cw","paywall0","paywall1","header","ldp","btb"],u)?u:null}return{visit:function(){var e=n();null!==e&&qg("event","subscribe_view",{source:e})},leave:function(){var e=n();null!==e&&qg("event","subscribe_close",{source:e})},orderInfo:function(e){qg("event","product_added_to_cart",{product_name:e.title,source:e.source})},complete:function(e){qg("event","checkout_completed",{product_name:e.title,order_id:e.order_number})}}},o=function(n){function t(){var n=new URLSearchParams(e.location.search),t=n.has("source")?n.get("source"):null,r=n.has("utm_source")?n.get("utm_source"):null,u=t||(r||null);return _.includes(["fb_cw","line_cw","email_spedm","web_cw","paywall0","paywall1","header","ldp","btb"],u)?u:null}var r=n;return{visit:function(){null!==t()&&qg("event","marketing_view",_.merge(r,{source:t()}))},leave:function(){var e=t();null!==e&&qg("event","marketing_close",_.merge(r,{source:e}))}}};e.Appier={userProfile:r,login:u,article:a,search:i,payment:c,marketing:o}}(window,document);