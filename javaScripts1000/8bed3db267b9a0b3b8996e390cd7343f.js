"use strict";var CartsGuruTracker=function(){this.baseUrl="https://api.carts.guru/javascript",this.isCorsSupported=this._isCorsSupported()};CartsGuruTracker.prototype.trackCart=function(t){""!==t.accountId&&null!==t.accountId&&t.accountId!==undefined&&((t=this._deepClone(t))._type="cart",this._track(t))},CartsGuruTracker.prototype.trackOrder=function(t){t=this._deepClone(t);t._type="order",this._track(t)},CartsGuruTracker.prototype._track=function(t){t.items&&"string"!=typeof t.items&&(t.items=JSON.stringify(t.items)),t.custom&&"string"!=typeof t.custom&&(t.custom=JSON.stringify(t.custom)),this.isCorsSupported?this._trackByRequest(t):this._trackByPixel(t)},CartsGuruTracker.prototype._deepClone=function(t){return JSON.parse(JSON.stringify(t))},CartsGuruTracker.prototype._trackByPixel=function(t){var r=this.baseUrl+"/__trk.gif?"+this._encodeParams(t),t=document.createElement("img");t.style.display="none",t.src=r,document.body.appendChild(t)},CartsGuruTracker.prototype._trackByRequest=function(t){var r=this.baseUrl+"/__trk?"+this._encodeParams(t),t=new XMLHttpRequest;t.open("GET",r),t.withCredentials=!0,t.send()},CartsGuruTracker.prototype._encodeParams=function(r){return Object.keys(r).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(r[t])}).join("&")},CartsGuruTracker.prototype._isCorsSupported=function(){try{var t=new XMLHttpRequest;return"withCredentials"in(t=XMLHttpRequest.isNormalizedObject&&t._object?t._object:t)}catch(r){return!1}},CartsGuruTracker.prototype.doAsyncCalls=function(){if("undefined"==typeof window._cg)"complete"!==document.readyState&&"interactive"!==document.readyState&&(window.onload=function(){CartsGuru.tracker.doAsyncCalls()});else{var t=window._cg.slice();window._cg=[];for(var r=0;r<t.length;r+=1){var e=t[r],a=e[0],n=e[1];"string"==typeof a&&CartsGuru.tracker[a]!==undefined?CartsGuru.tracker[a](n):window._cg.push(e)}}},window.CartsGuru===undefined&&(window.CartsGuru={},CartsGuru.tracker=new CartsGuruTracker,CartsGuru.trackCart=function(t){CartsGuru.tracker.trackCart(t)},CartsGuru.trackOrder=function(t){CartsGuru.tracker.trackOrder(t)}),CartsGuru.tracker.doAsyncCalls();