(this.webpackJsonpreact_customer=this.webpackJsonpreact_customer||[]).push([[239],{1508:function(e,t,n){"use strict";var a=n(79),o=n(89),i=n(109),r=n(90),c=n(61),s=n(108),u=n(4),l=n(132),d=n(0),p=n.n(d),m=n(56),g=n(66),b=n(439),f=m.a.FRENCH_DEPARTMENT,h={FRENCH_CANADA:{tag:m.a.FRENCH_TAG,widget:"fr_CA",department:f,greeting:{online:"Discute avec nous",offline:"Laissez-nous un message"},concierge:{name:"Comment pouvons-nous vous aider?",title:"Posez toutes vos questions"},window:{title:"Skip"},messages:{orderNumber:"Num\xe9ro de commande: {{orderNumber}}"}},ENGLISH:{tag:"",widget:"en",department:m.a.DEFAULT_DEPARTMENT,greeting:{online:"Chat with us",offline:"Leave us a message"},concierge:{name:"How can we help?",title:"Ask us anything"},window:{title:"SkipTheDishes"},messages:{orderNumber:"Order Number: {{orderNumber}}"}}},w=function(){window.$zopim&&(window.$zopim.livechat.window.setSize("large"),window.$zopim.livechat.window.setOffsetVertical(0),window.$zopim.livechat.window.setOffsetHorizontal(15))},O={initialize:function(e,t){!function(e){if(e&&"object"===Object(b.a)(e)&&Object.prototype.hasOwnProperty.call(e,"tag")&&Object.prototype.hasOwnProperty.call(e,"widget")&&Object.prototype.hasOwnProperty.call(e,"department")&&Object.prototype.hasOwnProperty.call(e,"greeting")&&Object.prototype.hasOwnProperty.call(e,"concierge")&&Object.prototype.hasOwnProperty.call(e,"window"))return!0;throw new Error("Please use ZopimLanguage object to configure.")}(e);try{var n=function(e){var t={};return e.name&&(t.name=e.name),e.email&&(t.email=e.email),e.phone&&(t.phone=e.phone),e.windowType&&(t.windowType=e.windowType),t}(t),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.ENGLISH.messages,n=[];return e.orderNumber&&t.orderNumber&&n.push(String(t.orderNumber).replace(/{{orderNumber}}/g,e.orderNumber)),e.orderDetails&&n.push(Object.values(e.orderDetails).join(", ")),e.initialMessage&&n.push("- ".concat(e.initialMessage)),n.join(" ")}(t,e.messages),o=[e.tag].concat(Object(g.a)(t.tags||[]));if(window.$zopim.livechat.set(n),window.$zopim.livechat.prechatForm.setGreetings(""),window.$zopim.livechat.departments.filter(""),window.$zopim.livechat.setLanguage(e.widget),window.$zopim.livechat.addTags(o),window.$zopim.livechat.setGreetings(e.greeting),e.concierge){var i=e.concierge,r=i.name,c=i.title;window.$zopim.livechat.concierge.setName(r),window.$zopim.livechat.concierge.setTitle(c)}if(window.$zopim.livechat.departments.setVisitorDepartment(e.department),a&&window.$zopim.livechat.setOnChatStart((function(){window.$zopim.livechat.say(a)})),"popup"===n.windowType)this.openPopout();else{var s=e.window?e.window.title:"SkipTheDishes";this.show({windowTitle:s})}}catch(u){console.error(u)}},show:function(e){var t=e.windowTitle;try{window.$zopim.livechat.window.show(),window.$zopim.livechat.window.setTitle(t)}catch(n){console.error(n)}},openPopout:function(){try{window.$zopim.livechat.window.openPopout()}catch(e){console.error(e)}},hide:function(){try{window.$zopim((function(){window.$zopim.livechat.hideAll()}))}catch(e){console.error(e)}}},v=function(){function e(t){var n=this;Object(a.a)(this,e),Object(u.a)(this,"loadScript",(function(){var e=document.createElement("script");return e.id=n.id,Object.keys(n.scriptTagProps).forEach((function(t){e[t]=n.scriptTagProps[t]})),new Promise((function(t,a){e.addEventListener("load",n.waitForScriptLoad((function(){return t(e)})),!1),e.onerror=function(e){var t;try{t=JSON.stringify(e,(function(e,t){if(t instanceof Error){var n={};return Object.getOwnPropertyNames(t).forEach((function(e){n[e]=t[e]})),n}return t}))||e.toString()}catch(o){t=e}a(new Error("".concat(n.id," failed to load. Error: ").concat(t)))};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)}))})),Object(u.a)(this,"isScriptLoaded",(function(){return!!document.getElementById(n.id)}));var o=t.id,i=t.globalVariableToLoad,r=t.scriptTagProps,c=t.waitStrategyProps;this.id=o,this.globalVariableToLoad=i,this.scriptTagProps=r,this.waitStrategyProps={maxRetryCount:c.maxRetryCount||10,retryDelayTime:c.retryDelayTime||250},this.retryCount=0}return Object(o.a)(e,[{key:"waitForScriptLoad",value:function(e){var t=this,n=this.waitStrategyProps,a=n.maxRetryCount,o=n.retryDelayTime;if(this.retryCount>a)throw new Error("".concat(this.id," failed to load after retrying ").concat(this.retryCount," time").concat(this.retryCount>1?"s":""));void 0===window[this.id]||void 0===window[this.globalVariableToLoad]?(this.retryCount+=1,setTimeout((function(){return t.waitForScriptLoad(e)}),o)):(this.retryCount=0,e())}},{key:"load",value:function(){var e=this;return new Promise((function(t,n){if(e.isScriptLoaded())t(window[e.id]);else try{e.loadScript().then((function(){return t(window[e.id])}))}catch(a){n(a)}}))}}]),e}(),j=n(52),y=n(253),E=n(13),L=n(181),C=E.c.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-7cn2v4-0"})(["z-index:9999;transform:translateZ(0px);position:fixed;height:50px;right:15px;margin:10px 20px;bottom:0;"]),N=E.c.div.withConfig({displayName:"styles__Loader",componentId:"sc-7cn2v4-1"})(["box-sizing:border-box;padding:0.75rem 1rem;font-size:1.07143rem;border-radius:999rem;height:45.95px;bottom:0;background-color:",";color:",";"],(function(e){var t=e.theme;return["prod"].includes(L.a)?t.palette.common.brand:"#F28A98"}),(function(e){return e.theme.palette.common.white})),S=function(){return p.a.createElement(C,null,p.a.createElement(N,null,p.a.createElement(y.default,{color:"inherit",size:20})))};t.a=function(e){var t=function(t){function n(){var e,t;Object(a.a)(this,n);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return t=Object(i.a)(this,(e=Object(r.a)(n)).call.apply(e,[this].concat(s))),Object(u.a)(Object(c.a)(t),"state",{isLoading:!1}),Object(u.a)(Object(c.a)(t),"isOpen",!1),Object(u.a)(Object(c.a)(t),"isUnmounted",!1),Object(u.a)(Object(c.a)(t),"open",(function(){if(!t.isUnmounted){var e=t.props,n=(e.isChatOpen,e.t);t.isLoaded=!0,zE((function(){$zopim((function(){w(),O.initialize("FR"===Object(j.h)({t:n})?h.ENGLISH:h.FRENCH_CANADA,t.options),t.setState({isLoading:!1}),t.props.handleOpenChat&&t.props.handleOpenChat()}))}))}})),Object(u.a)(Object(c.a)(t),"start",(function(e){(t.options=e,t.setState({isLoading:!0}),t.isLoaded)?t.open():new v({id:"ze-snippet",globalVariableToLoad:"zE",scriptTagProps:{src:m.a.ZENDESK_CHAT_URL,defer:!0,async:!0},waitStrategyProps:{maxRetryCount:10,retryDelayTime:1e3}}).load().then(t.open)})),t}return Object(s.a)(n,t),Object(o.a)(n,[{key:"componentWillUnmount",value:function(){this.isUnmounted=!0}},{key:"render",value:function(){return p.a.createElement(d.Fragment,null,this.state.isLoading?p.a.createElement(S,null):null,p.a.createElement(e,Object.assign({startZopim:this.start},this.props)))}}]),n}(d.PureComponent);return Object(u.a)(t,"displayName","withZopim(".concat(Object(l.b)(e),")")),t}},1517:function(e,t,n){"use strict";var a=n(0),o=function(){var e={},t=function(t){return Boolean(e[t])},n=function(n,a,o){t(n)&&e[n].listeners[a].push(o)},a=function(n,a,o){t(n)&&(e[n].listeners[a]=e[n].listeners[a].filter((function(e){return e!==o})))},o=function(n,a){t(n)&&(e[n].status=a,e[n].listeners[a].length>0&&e[n].listeners[a].forEach((function(e){return e()})))};return{load:function(e,t){var n=document.getElementsByTagName("script")[0],a=document.createElement("script"),i=n.parentNode;a.id=e,a.type="text/javascript",a.src=t,a.defer=!0,a.addEventListener("load",(function(){return o(e,"LOADED")})),a.addEventListener("error",(function(){return o(e,"ERROR")})),i&&i.insertBefore(a,n)},emit:o,has:t,subscribe:function(o,i){var r=i.onLoaded,c=i.onError;return t(o)||(e[o]={status:"PENDING",listeners:{ERROR:[],LOADED:[],PENDING:[]}}),n(o,"ERROR",c),n(o,"LOADED",r),function(){a(o,"ERROR",c),a(o,"LOADED",r)}},isLoaded:function(t){return Boolean(e[t]&&"LOADED"===e[t].status)}}}();t.a=function(e){var t=e.name,n=e.src,i=e.onError,r=void 0===i?function(){}:i,c=e.onLoaded,s=void 0===c?function(){}:c;Object(a.useEffect)((function(){return function(e,t){var n="".concat(e.toLocaleLowerCase(),"-lib");return o.has(n)||o.load(n,t),{subscribe:function(e){return o.isLoaded(n)&&e.onLoaded&&e.onLoaded(),o.subscribe(n,e)}}}(t,n).subscribe({onLoaded:s,onError:r})}),[t,r,s,n])}},1568:function(e,t,n){"use strict";var a=n(51),o=n(0),i=n(56),r=n(16),c=n(1517),s={client_id:i.a.GOOGLE_CLIENT_ID,scope:"profile email",access_type:"online"};t.a=function(){var e=Object(o.useState)(!0),t=Object(a.a)(e,2),n=t[0],u=t[1],l=Object(o.useState)(!0),d=Object(a.a)(l,2),p=d[0],m=d[1],g=i.a.GOOGLE_LOGIN_JS,b=Object(o.useCallback)((function(){var e=window.gapi;e&&e.load("auth2",(function(){e.auth2.getAuthInstance()?(u(!1),m(!1)):e.auth2.init(s).then((function(){u(!1),m(!1)})).catch((function(){return console.log("Error initializing Google Auth Instance.")}))}))}),[]),f=Object(o.useCallback)((function(e){var t=e.getBasicProfile(),n=e.getAuthResponse();return{accessToken:n.access_token,email:t.getEmail(),id:t.getId(),name:t.getName(),idToken:n.id_token,type:r.a.GOOGLE}}),[]),h=Object(o.useCallback)((function(e){var t=e.error;return m(!1),Promise.reject(new Error(t))}),[]),w=Object(o.useCallback)((function(){var e=window.gapi;return m(!0),!n&&e?e.auth2.getAuthInstance().signIn({prompt:"select_account"}).then(f).catch(h):Promise.reject()}),[n,h,f]),O=Object(o.useCallback)((function(){var e=window.gapi.auth2.getAuthInstance();!n&&e&&e.disconnect().then((function(){return e.signOut()}))}),[n]);return Object(c.a)({name:"google-auth",src:g,onLoaded:b}),{isLoading:p,isDisabled:n,signIn:w,signOut:O}}},1743:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(13),o=a.c.div.withConfig({displayName:"styles__Notification",componentId:"sc-1lmdild-0"})(["",""],(function(e){var t=e.theme;return Object(a.b)(["background-color:",";border:2px solid ",";border-radius:50%;width:10px;height:10px;"],t.palette.common.brand,t.palette.common.white)}))},2458:function(e,t,n){"use strict";n.r(t);var a=n(26),o=n(15),i=n(132),r=n(5),c=n(122),s=n(14),u=n(76),l=n(80),d=n(4),p=n(24),m=n(6),g=n(52),b=n(305),f=n(60),h=n(30),w=n(199),O=n(239),v=n(34),j="ACCOUNT",y="ORDER_HISTORY",E="HELP",L="GIFT_CARD",C="LANGUAGE",N="COUNTRY",S="SIGNUP",T="LOGIN",x="REFER_A_FRIEND",I=Object(r.createSelector)(w.e,f.default,O.a,(function(e,t,n){var a,o=(a={},Object(d.a)(a,j,{id:"account",icon:"gear",href:Object(m.e)(t,{path:Object(p.generatePath)(m.b.accountSettings.path,{accountMenu:"profile"})}),name:t("accountDrawer.accountSettings"),actionId:j}),Object(d.a)(a,y,{id:"orders",icon:"orderHistory",href:Object(m.e)(t,{path:m.g}),name:t("accountDrawer.orders"),actionId:y}),Object(d.a)(a,L,{id:"gift-card",icon:"giftCard",href:Object(m.e)(t,{path:m.b.giftCardPurchase.path}),name:t("accountDrawer.giftCard"),actionId:L}),Object(d.a)(a,x,{id:"refer",icon:"friends",name:t("accountDrawer.referral",{referrerBonus:e?Object(v.a)(e.referrerBonus,!1,null,!0):void 0}),actionId:x}),Object(d.a)(a,E,{id:"support",icon:"question",name:t("accountDrawer.help"),actionId:E,iconProps:{padding:4,hasCircle:!0}}),Object(d.a)(a,C,{id:"language",icon:"globeMenu",link:Object(b.a)(Object(g.g)({t:t}),n),name:t("accountDrawer.language"),accessibleLabel:t("accessibility.languageLinkAriaLabel"),actionId:C}),a);return{itemsByActionId:o,itemsList:{type:"icon",items:Object.values(o)}}})),k=Object(r.createSelector)(f.default,(function(e){var t,n=(t={},Object(d.a)(t,T,{id:"login",icon:"login",name:e("accountDrawer.logIn"),actionId:T}),Object(d.a)(t,S,{id:"sign-up",icon:"signUp",href:Object(m.e)(e,{path:m.b.signUp.path}),name:e("accountDrawer.signUp"),actionId:S}),Object(d.a)(t,E,{id:"support",icon:"support",name:e("accountDrawer.chat"),actionId:E}),Object(d.a)(t,N,{id:"country",icon:"flagCanadaRounded",name:"Canada",actionId:N}),Object(d.a)(t,C,{id:"language",icon:"globeMenu",name:e("accountDrawer.language"),accessibleLabel:e("accessibility.languageLinkAriaLabel"),actionId:C}),t);return{itemsByActionId:n,itemsList:{type:"icon",items:Object.values(n)}}})),D=Object(r.createSelector)(h.l,I,k,f.default,(function(e,t,n){return e?t:n})),P=Object(r.createSelector)(c.k,f.default,(function(e,t){return e||t("login.welcome")})),R=n(232),A=Object(r.createStructuredSelector)({customer:c.f,drawerItems:D,isLoggedIn:c.b,isOpen:c.d,orderNumber:R.a,title:P}),z={handleChangeLanguage:function(e,t,n){return Object(s.a)({customer:e,language:t,languageHref:n})},handleClose:function(){return Object(s.G)(!1)},handleLogout:s.P,showLoginModal:function(){return Object(s.H)({showLoginModal:!0,isCloseable:!0})},showNeedHelpWidget:function(){return Object(l.j)(!0)},showRafModal:function(){return Object(u.l)(!0)}},_=Object(i.a)(Object(o.withTranslation)(),Object(a.c)(A,z)),G=n(2),B=n(0),$=n.n(B),F=n(42),H=n(1508),M=n(203),U=n(38),V=n(2475),W=n(145),Z="top",J="bottom",q="left",Y="right",K=null!=window.CSS&&null!=window.CSS.supports,Q="padding-top",X=function(e){return"safe-area-inset-".concat(e)},ee={top:X(Z),bottom:X(J),left:X(q),right:X(Y)},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee.top,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?"env(".concat(ee[e],")"):"constant(".concat(ee[e],")")},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return CSS.supports(Q,te(ee.top,e))},ae=function(){return ne(!0)},oe=function(){return ne()},ie=function(e){return oe()?te(e):ae()?te(e,!0):null},re=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"100%";if(K){var n;if(oe())n=e?"".concat(te(Z)," + ").concat(te(J)):"".concat(te(q)," + ").concat(te(Y));else{if(!ae())return t;n=e?"".concat(te(Z,!0)," + ").concat(te(J,!0)):"".concat(te(q,!0)," + ").concat(te(Y,!0))}return"calc(".concat(t," + ").concat(n,")")}return t}},ce={fullWidth:re(!1),fullHeight:re(!0),padding:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!K)return t;var n=ie(e);return null!==n&&CSS.supports(Q,"max(0px)")?"max(".concat(n,", ").concat(t,"px)"):t},negativePadding:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="".concat(t,"px");if(!K)return n;var a=ie(e);return a?"calc((-1 * ".concat(a,") + ").concat(n,")"):n},addSafeAreaToValue:function(e,t){if(K){var n=ie(e);return n?"calc(".concat(n," + ").concat(t,"px)"):t}return t}},se=n(952),ue={paddingTop:ce.padding(Z),paddingBottom:ce.padding(J)},le=Object(se.a)((function(e){return{fill:{display:"flex",flex:1},list:Object(d.a)({width:300},e.breakpoints.up("md"),{width:358}),title:Object(d.a)({padding:"28px 20px 20px"},e.breakpoints.up("md"),{padding:"36px 20px 20px"}),buttonContent:{width:"100%",display:"flex",justifyContent:"left"},logoutButton:{position:"fixed",bottom:0,width:"100%"},buttonIcon:{display:"flex",marginLeft:-10,marginRight:14},buttonTextContainer:{display:"flex",alignSelf:"center"},buttonTextSpan:{fontWeight:e.typography.fontWeightBold},logout:{boxShadow:e.shadows[21]},backdropColor:{backgroundColor:"rgba(255,255,255,0.7)"}}})),de=n(669),pe=Object(se.a)((function(e){return{buttonContent:{width:"100%",display:"flex",justifyContent:"left"},buttonIcon:{display:"flex",marginLeft:-10,marginRight:14},buttonTextContainer:{display:"flex",alignSelf:"center"},logout:{boxShadow:e.shadows[20]}}})),me=n(146),ge=n(45),be=n(1568),fe=Object(B.memo)((function(e){var t=e.handleLogout,n=Object(be.a)(),a=n.isDisabled,i=n.signOut,r=Object(o.useTranslation)().t,c=pe(),s=r("login.logout");return $.a.createElement("div",{className:c.logout},$.a.createElement(me.default,{accessibleLabel:s,dataTestId:"Logout",disabled:a,fullWidth:!0,onClick:function(){i(),t()},size:"large",variant:"clear"},$.a.createElement("div",{className:c.buttonContent},$.a.createElement("div",{className:c.buttonIcon},$.a.createElement(ge.a,{color:"grey",size:24,variant:"logout"})),$.a.createElement("div",{className:c.buttonTextContainer},s))))})),he=n(7),we=n.n(he),Oe=n(94),ve=n(1743),je=n(680),ye=n(254),Ee=Object(B.memo)((function(){var e=Object(ye.a)("rewards"),t=Object(Oe.e)(je.c);return e&&t?$.a.createElement(ve.a,null):null})),Le=n(516),Ce={style:{position:"fixed",top:0,bottom:0,height:"100%",boxShadow:"-2px 0 4px 0 rgba(0, 0, 0, 0.2)",transparentAppBar:{background:"transparent",boxShadow:"none"}}},Ne=Object(B.memo)((function(e){var t=e.drawerItems,n=e.customer,a=e.handleChangeLanguage,i=e.handleClose,r=e.handleLogout,c=e.isLoggedIn,s=e.isOpen,u=e.showLoginModal,l=e.showNeedHelpWidget,d=e.showRafModal,m=e.t,b=e.title,f=Object(B.useRef)(null),h=le(),w=Object(p.useReactRouter)().history,O=Object(Oe.d)();Object(B.useEffect)((function(){return s||Object(M.c)(f.current),M.a}),[s]);var v=Object(B.useCallback)((function(){a(n,Object(g.h)({t:m}),Object(g.g)({t:m}))}),[n,a,m]),S=Object(B.useCallback)((function(){i(),Object(M.c)(f.current)}),[i]),I=Object(B.useCallback)((function(){Object(M.b)(f.current)}),[]),k=Object(B.useCallback)((function(e){var n=we()(t.itemsByActionId[e],"href");switch(e!==C&&S(),e){case j:U.a.setEvent(U.a.actions.menuAccount);break;case y:U.a.setEvent(U.a.actions.menuPastOrders);break;case E:l(),U.a.setEvent(U.a.actions.menuHelp);break;case L:U.a.setEvent(U.a.actions.menuGiftCard);break;case C:v();var a="en"===o.default.language?"menuLanguageEnglish":"menuLanguageFrench";U.a.setEvent(U.a.actions[a]);break;case N:O(Object(Le.a)(!0));break;case T:u();break;case x:d(),U.a.setEvent(U.a.actions.menuFriends)}n&&w.push(n)}),[O,v,t.itemsByActionId,w,S,u,l,d]),D={items:t.itemsList.items.map((function(e){return"account"===e.id?Object(G.a)({},e,{rightView:$.a.createElement(Ee,null)}):e})),type:t.itemsList.type};return $.a.createElement($.a.Fragment,null,$.a.createElement(V.a,{anchor:"right",disableBackdropTransition:!0,disableDiscovery:!0,disableRestoreFocus:!0,disableSwipeToOpen:!0,ModalProps:{BackdropProps:{classes:{root:h.backdropColor}}},onClose:S,onOpen:function(){},onRendered:I,open:s,PaperProps:Ce},$.a.createElement("div",{ref:f,style:ue},$.a.createElement("div",{className:h.list},$.a.createElement("div",{className:h.title},$.a.createElement(W.a,{variant:"h6"},b)),$.a.createElement(de.a,{component:"div",data:D,handleClick:k,padding:"sm",role:"menu"})),$.a.createElement("div",{className:h.fill}),c?$.a.createElement("div",{className:h.logoutButton},$.a.createElement(fe,{handleLogout:r})):null)))})),Se=Object(F.compose)(H.a)(Ne);t.default=_(Se)}}]);
//# sourceMappingURL=ui-Header-AccountDrawer.becdf6fa.chunk.js.map