(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(18),c=(a=i)&&a.__esModule?a:{default:a},s=n(1),d=n(0),u=n(11);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),d.callbackOnElements.call(this,t.elements,this.setElement)}return o(e,[{key:"setElement",value:function(e){var t=e.getAttribute("data-tracking")?JSON.parse(JSON.stringify(e.getAttribute("data-tracking"))):{};e.trackingLayer={},this.setHandler(e,t)}},{key:"setHandler",value:function(e,t){var n=this.eventTracking,a=t.events;a||(a="INPUT"===e.nodeName||"SELECT"===e.nodeName||"TEXTAREA"===e.nodeName?"change":"click"),(a=a.trim().split(/(?:,| )+/)).forEach(function(a){"pageload"===a?window.dataLayer?n.call(this,e,t):window.addEventListener("load",n.bind(this,e,t)):"iframeclick"===a?window.addEventListener("blur",function(){window.setTimeout(function(){document.activeElement instanceof HTMLIFrameElement&&(document.activeElement===e||t.delegate&&document.activeElement.matches(t.delegate))&&n.call(this,e,t)}.bind(this),0)}.bind(this)):t.delegate?document.body.addEventListener(a,function(a){a.target.matches(t.delegate)&&n.call(this,e,t)}.bind(this)):e.addEventListener(a,n.bind(this,e,t))}.bind(this)),e.removeAttribute("data-tracking")}},{key:"getPropertyValue",value:function(e,t){return e[t]||e.getAttribute(t)||window.SFRA.Resources[t]||t}},{key:"getTrackObject",value:function(e,t){var n=t;if("object"===(void 0===t?"undefined":r(t))&&n.hasOwnProperty("asyncProperties")&&document.querySelector('[data-product-container="pdp"]')){n.asyncProperties=(0,u.removeParamFromURL)(n.asyncProperties,"qty"),n.asyncProperties=(0,u.removeParamFromURL)(n.asyncProperties,"price"),n.asyncProperties=(0,u.removeParamFromURL)(n.asyncProperties,"checkID");var a=document.querySelector('[data-product-component="qty"]').value,o=document.querySelector('[itemprop="price"]').getAttribute("content");a&&""!==a&&(n.asyncProperties=(0,u.appendParamToURL)(n.asyncProperties,"qty",a)),o&&""!==o&&(n.asyncProperties=(0,u.appendParamToURL)(n.asyncProperties,"price",o)),e.dataset.pid&&(n.asyncProperties=(0,u.appendParamToURL)(n.asyncProperties,"checkID",e.dataset.pid))}return n}},{key:"eventTracking",value:function(t,n){n.update?e.updateData(n.update,this.getTrackObject(t,n.trackProperties)):e.pushData(n.trackEvent,this.getTrackObject(t,n.trackProperties),n.trackMethod)}}],[{key:"getAsyncProperties",value:function(t,n){var a=n||0,r=Array.isArray(t.asyncProperties),o=r?t.asyncProperties[a]:t.asyncProperties;return c.default.resolve($.get(o)).then((function(n){return(0,d.objectAssign)(n,t),a++,r&&t.asyncProperties[a]?e.getAsyncProperties(n,a):(delete n.asyncProperties,n)}))}},{key:"triggerEvent",value:function(e){(0,d.callbackOnElements)(e,(function(e){(0,s.publishEvent)("actiondone",!1,e)}))}},{key:"updateData",value:function(e,t,n){window.dataLayer&&window[e]&&((0,d.objectAssign)(window[e],t),n=n&&window.dataLayer[n]?n:"view",window.dataLayer[n]&&window.dataLayer[n](window[e]))}},{key:"pushData",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"push",o=void 0;if(!window.dataLayer||!t)return!1;o=window.dataLayer[a]||window.dataLayer,"object"===(void 0===n?"undefined":r(n))?(n.event=n.hasOwnProperty("trackEvent")?n.trackEvent:t,n.asyncProperties?e.getAsyncProperties(n).then(o):o(n)):o(t,n)}}]),e}();t.default=p}}]);