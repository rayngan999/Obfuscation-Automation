define(["modules/id.core"],function(e){"use strict";e.utils.log("loading id.simpletab.js");var t,n={TABACTIVE_CLASS:"id-SimpleTab--active",TABACTIVE_SELECTOR:".id-SimpleTab--active",TABGENERATEDCLICK_CLASS:"id-SimpleTab--generatedClick",CONTENT_SELECTOR:".id-SimpleTab-content",CONTENT_ALT_SELECTOR:".id-SimpleTab-content2",TABNAV_ITEM_CLASS:"idjs-simpletab-nav-item",TABNAV_ITEM_SELECTOR:".idjs-simpletab-nav-item",TABNAV_HASH_DATAATTR_NAME:"id-simpletab-target",TARGET_CLOSE_SELECTOR:".idjs-simpletab-content-close",DISALLOW_SINGLE_TOGGLE:!1,CLOSE_OTHER_SELECTORS:[],PREVENT_CLOSE_CLASS:"id-js-simpletab-preventCloseFromOther",DONTCLOSE_DATAATTR_NAME:"id-simpletab-dontclose",USEPARENT_CLASS:"idjs-simpletab-use-parent",CUSTOMCLICK_DATAATTR_NAME:"id-simpletab-customclick",DONTCLOSEIFOPEN_PARAMETERNAME:"dontCloseIfOpen",GENERATEDCLICK_PARAMETERNAME:"generatedClick"};return e.event.subscribe(e.event.constants.SIMPLETAB_OPEN,function(t,i,o,s,a){var r,d,c=document.createTextNode(" ");t.addClass(o),i.addClass(o),e.feature.ios11&&(r=document.getElementById(i[0].id),r&&(d=r.style.display,r.appendChild(c),r.style.display="none",setTimeout(function(){r.style.display=d,c.parentNode.removeChild(c),e.event.publish(e.event.constants.SIMPLETAB_OPENED,i,t,a)},20))),a&&a.isGeneratedClick?(t.addClass(n.TABGENERATEDCLICK_CLASS),i.addClass(n.TABGENERATEDCLICK_CLASS)):(t.removeClass(n.TABGENERATEDCLICK_CLASS),i.removeClass(n.TABGENERATEDCLICK_CLASS)),s&&s.length>0&&e.dom.bind(s,"click",function(){e.event.publish(e.event.constants.SIMPLETAB_CLOSE,t,i,o,s,{isCloseElementClick:!0})}),e.event.publish(e.event.constants.SIMPLETAB_OPENED,i,t,a)},this),e.event.subscribe(e.event.constants.SIMPLETAB_CLOSE,function(t,i,o,s,a){t.removeClass(o),i.removeClass(o),a&&a.isGeneratedClick?(t.addClass(n.TABGENERATEDCLICK_CLASS),i.addClass(n.TABGENERATEDCLICK_CLASS)):(t.removeClass(n.TABGENERATEDCLICK_CLASS),i.removeClass(n.TABGENERATEDCLICK_CLASS)),s&&s.length>0&&e.dom.unbind(s,"click"),e.event.publish(e.event.constants.SIMPLETAB_CLOSED,i,t,a)},this),t=function(){this.conf={},e.utils.extend(this.conf,n);var t=this,i=!1;this.init=function(n){e.dom.bind(n,"click",function(o){i===!1&&(i=e.dom.$(t.conf.TABNAV_ITEM_SELECTOR,n));var s,a,r,d,c,l,E,u,T,h,_,A,f=i.length,m=t.conf.DISALLOW_SINGLE_TOGGLE,S=t.conf.CLOSE_OTHER_SELECTORS,C=null,g=null,v=!1,N=!1,R={};if(s=e.dom.$(o.target),s.hasClass(t.conf.USEPARENT_CLASS)&&(s=e.dom.$(t.conf.TABNAV_ITEM_SELECTOR,e.dom.closest(t.conf.CONTENT_ALT_SELECTOR,s).parent()[0]).first()),s.hasClass(t.conf.TABNAV_ITEM_CLASS)||(s=e.dom.closest(t.conf.TABNAV_ITEM_SELECTOR,s)),s&&(a=s[0].hash||s.data(t.conf.TABNAV_HASH_DATAATTR_NAME)),s&&a){for(o.preventDefault(),A=s.data(t.conf.CUSTOMCLICK_DATAATTR_NAME)?JSON.parse(s.data(t.conf.CUSTOMCLICK_DATAATTR_NAME)):null,null!==A&&(v=A[t.conf.DONTCLOSEIFOPEN_PARAMETERNAME]||!1,N=A[t.conf.GENERATEDCLICK_PARAMETERNAME]||!1,s.data(t.conf.CUSTOMCLICK_DATAATTR_NAME,"")),_=s.data(t.conf.DONTCLOSE_DATAATTR_NAME)?JSON.parse(s.data(t.conf.DONTCLOSE_DATAATTR_NAME)):[],l=0,E=S.length;E>l;l+=1)u=e.dom.$(t.conf.TABACTIVE_SELECTOR+t.conf.TABNAV_ITEM_SELECTOR,e.dom.$(S[l])).first(),u.length>0&&!e.dom.$(u).hasClass(t.conf.PREVENT_CLOSE_CLASS)&&!e.dom.$(s).hasClass("id-js-simpletab-dontCloseOther")&&(h=u[0].hash||e.dom.$(u[0]).data(t.conf.TABNAV_HASH_DATAATTR_NAME),T=e.dom.$(h),e.utils.inArray(h,_)||e.event.publish(e.event.constants.SIMPLETAB_CLOSE,u,T,t.conf.TABACTIVE_CLASS,e.dom.$(t.conf.TARGET_CLOSE_SELECTOR,T),{}));for(;f--;)c=i[f].hash||e.dom.$(i[f]).data(t.conf.TABNAV_HASH_DATAATTR_NAME),c===a?(d=[s,e.dom.$(a),e.dom.$(t.conf.TARGET_CLOSE_SELECTOR,e.dom.$(a))],!s.hasClass(t.conf.TABACTIVE_CLASS)||m||v?g=d:C=d):(r=e.dom.$(c),r.hasClass(t.conf.TABACTIVE_CLASS)&&(e.utils.inArray(c,_)||(C=[e.dom.$(i[f]),r,e.dom.$(t.conf.TARGET_CLOSE_SELECTOR,r)])));null!==C&&(R={isGeneratedClick:N},e.event.publish(e.event.constants.SIMPLETAB_CLOSE,C[0],C[1],t.conf.TABACTIVE_CLASS,C[2],R)),null!==g&&(R={triggeredElement:g[0],isGeneratedClick:N},e.event.publish(e.event.constants.SIMPLETAB_OPEN,g[0],g[1],t.conf.TABACTIVE_CLASS,g[2],R))}})}},{module:t,globalConf:n}});