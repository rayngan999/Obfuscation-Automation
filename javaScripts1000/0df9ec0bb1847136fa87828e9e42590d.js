var FootNoteProvide=FootNoteProvide||{};FootNoteProvide.Preview={FootNotes:[],Option:{},Replace:function(){var v=FootNoteProvide.Preview.Option,e=document.getElementsByTagName("body")[0].innerHTML,t=$("<div>"+e+"</div>");$("script,style,noscript",t).remove(),e=t.html();var r=/{{Footnote.([ANP]\d+)}}/g,I={Counter:{A:0,N:0,P:0},NoteMarks:{},AID:[],NID:[],PID:[],AllID:{},A:function(e,t){for(var o="",n=0;n<e;n++)o+="*";return this.AID.push(parseInt(t)),"<sup>"+o+"</sup>"},N:function(e,t){return this.NID.push(parseInt(t)),"<sup>"+e+"</sup>"},P:function(e,t){return this.PID.push(parseInt(t)),""},ReplaceNodes:function(e){for(var t=0;t<e.length;t++){var o=e[t];if("#text"==o.nodeName){if(0<=o.nodeValue.indexOf("{{")&&0<=o.nodeValue.indexOf("}}"))(n=o.nodeValue.replace(r,function(e,t){return I.NoteMarks[t]?'<span class="footnote-sub" data-original="'+e+'">'+I.NoteMarks[t]+"</span>":""}))!=o.nodeValue&&(o.nodeValue="",$("<span>"+n+"</span>").insertAfter(o),t++)}else if("footnote-sub"==o.className&&o.dataset.original&&0<=o.dataset.original.indexOf("{{")&&0<=o.dataset.original.indexOf("}}")){var n=o.dataset.original.replace(r,function(e,t){return I.NoteMarks[t]?I.NoteMarks[t]:""});o.innerHTML=n}else"SCRIPT"!=o.nodeName&&"NOSCRIPT"!=o.nodeName&&"#comment"!=o.nodeName&&I.ReplaceNodes(o.childNodes)}}},a=0;e.replace(r,function(e,t){var o=t.replace(/([ANP])\d+/g,function(e,t){return t}),n=t.replace(/[ANP](\d+)/g,function(e,t){return t});return I.NoteMarks[t]||""==I.NoteMarks[t]||(I.AllID[a]=n,I.Counter[o]+=1,I.NoteMarks[t]=I[o].call(I,I.Counter[o],n),I.NoteMarks[n]=I.NoteMarks[t],a++),I.NoteMarks[t]});var o={path:v.path,ids:I.AllID},m={};function D(e,t){return t&&t.indexOf("<p>")<0?"<p>"+e+t+"</p>":"<p>"+e+t.substring(3)}m.PlainTextFootnotes=[],m.AsteriskFootnotes=[],m.NumericFootnotes=[],$.post(v.getFootNoteUrl,o,function(e){if(e){for(var t={},o=0;o<e.length;o++){var n=e[o];t[n.ContentItemID]=n.Description,(-1==$.inArray(n.ContentItemID,I.AID)&&-1==$.inArray(n.ContentItemID,I.NID)||0<=$.inArray(n.ContentItemID,I.PID))&&m.PlainTextFootnotes.push(n.Description)}for(var r=0;r<I.AID.length;r++){var a=t[I.AID[r]];if(a){var i=I.NoteMarks["A"+I.AID[r]];i||(i=I.NoteMarks[I.AID[r]]);var s=i.replace("<sup>","").replace("</sup>","")+"&nbsp";m.AsteriskFootnotes.push(D(s,a))}}for(var p=0;p<I.NID.length;p++){var l=t[I.NID[p]];if(l){var u=I.NoteMarks["N"+I.NID[p]];u||(u=I.NoteMarks[I.NID[p]]);s=u.replace("<sup>","").replace("</sup>","")+".&nbsp";m.NumericFootnotes.push(D(s,l))}}var N=$(v.container),c=N.find("#PlainText").empty();$.each(m.PlainTextFootnotes,function(){c.append("<li>"+this+"</li>")});var d=N.find("#Asterisk").empty();$.each(m.AsteriskFootnotes,function(){d.append("<li>"+this+"</li>")});var f=N.find("#Numeric").empty();$.each(m.NumericFootnotes,function(){f.append("<li>"+this+"</li>")}),0<N.find("li").size()&&$(v.container).parents("#FootNote").show()}}),I.ReplaceNodes($("body")[0].childNodes)},Reload:function(){var e=$(FootNoteProvide.Preview.Option.container);e.find("#PlainText").empty(),e.find("#Asterisk").empty(),e.find("#Numeric").empty(),FootNoteProvide.Preview.Replace()}};