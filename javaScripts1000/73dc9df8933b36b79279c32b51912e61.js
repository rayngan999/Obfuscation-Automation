//tealium universal tag - utag.53 ut4.0.202106240822, Copyright 2021 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}
if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}
if(o.id){b.id=o.id;}
if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}
l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={"ut.env":"env","environmentVersion":"chatbot_country","cdnPrefix":"cdn_prefix","chatbotChannelId":"chatbot_channel_id","chatbotTokenId":"chatbot_token_id","chatbotMaintenanceStartDate":"chatbot_maintenance_start_date","chatbotMaintenanceEndDate":"chatbot_maintenance_end_date","chatbotMaintenanceEnv":"chatbot_maintenance_env","chatbotFile":"chatbot_file_name","ut.version":"utv"};u.extend=[function(a,b){try{if((/jp|cn/.test(b['environmentVersion'])&&b['pageType'].toString().toLowerCase()!='client_services'.toLowerCase()&&typeof b['cp.sap_chat_loaded']=='undefined')||(b['environmentVersion']=='us'&&b['pageType'].toString().toLowerCase()=='homepage'.toLowerCase()&&typeof b['cp.sap_chat_loaded']=='undefined')){return false}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){if(1){d=b['ut.env'];if(typeof d=='undefined')return;c=[{'dev':'webchat_int_v1.js'},{'qa':'webchat_light_v1.js'},{'prod':'webchat_light_v1.js'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['chatbotFile']=c[e][f];m=true};};if(m)break};if(!m)b['chatbotFile']='';}},function(a,b,c,d,e,f,g){if(b['ut.env'].toString().toLowerCase()=='dev'.toLowerCase()){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'cn':'54eae97625b0d86d1625cc448ee70577'},{'jp':'13b1bb86ad9d9903194d59920a7e972b'},{'us':'5c72d16a23c54a300bd5cca87e682718'},{'gb':'5c72d16a23c54a300bd5cca87e682718'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['chatbotTokenId']=c[e][f];m=true};};if(m)break};}},function(a,b,c,d,e,f,g){if(b['ut.env'].toString().toLowerCase()=='qa'.toLowerCase()){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'cn':'bd443fe6d9d22dea989c12f4d5a40b1c'},{'jp':'5775920d76d37219f8532dee9b2857d3'},{'us':'bdf59e35646720b5f604bab73f10042a'},{'gb':'bdf59e35646720b5f604bab73f10042a'},{'ca':'bdf59e35646720b5f604bab73f10042a'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['chatbotTokenId']=c[e][f];m=true};};if(m)break};}},function(a,b,c,d,e,f,g){if(b['ut.env'].toString().toLowerCase()=='prod'.toLowerCase()){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'cn':'1356826c792d8b942e1ff4ae8a25bb28'},{'jp':'d8acc7256180cc37d28dbfa767f9b515'},{'us':'f4b52c0623066d73da70c4482868f726'},{'gb':'f4b52c0623066d73da70c4482868f726'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['chatbotTokenId']=c[e][f];m=true};};if(m)break};}},function(a,b,c,d,e,f,g){if(b['ut.env'].toString().toLowerCase()=='dev'.toLowerCase()){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'cn':'97f271cc-a95d-42cd-be56-7f06927a4b79'},{'jp':'e71edd82-08e8-4e26-8ee3-fa17a4024465'},{'us':'4f8f5466-4d21-41b5-aed2-c70f5893c385'},{'gb':'4f8f5466-4d21-41b5-aed2-c70f5893c385'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['chatbotChannelId']=c[e][f];m=true};};if(m)break};}},function(a,b,c,d,e,f,g){if(b['ut.env'].toString().toLowerCase()=='qa'.toLowerCase()){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'cn':'f16b9819-dc03-4325-9238-53157c92cf15'},{'jp':'8f393bff-9d04-4bda-8636-90b538a5ed3f'},{'us':'232fc1a9-7663-4653-bbfc-e8a0233f74f2'},{'gb':'232fc1a9-7663-4653-bbfc-e8a0233f74f2'},{'ca':'232fc1a9-7663-4653-bbfc-e8a0233f74f2'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['chatbotChannelId']=c[e][f];m=true};};if(m)break};}},function(a,b,c,d,e,f,g){if(b['ut.env'].toString().toLowerCase()=='prod'.toLowerCase()){d=b['environmentVersion'];if(typeof d=='undefined')return;c=[{'cn':'116bb1b1-1dd9-440a-a721-5d59d48cd155'},{'jp':'441623db-462a-442e-accc-306b6dbcf534'},{'us':'56d99c05-31db-456c-b93c-bd931094309a'},{'gb':'56d99c05-31db-456c-b93c-bd931094309a'}];var m=false;for(e=0;e<c.length;e++){for(f in utag.loader.GV(c[e])){if(d==f){b['chatbotChannelId']=c[e][f];m=true};};if(m)break};}},function(a,b){try{if(1){b['chatbotMaintenanceStartDate']='202005300100';b['chatbotMaintenanceEndDate']='202005310600';b['chatbotMaintenanceEnv']='prod'}}catch(e){utag.DB(e);}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
u.chatbotInit=function(){if(typeof embedded_svc!=="object"){if(document.getElementById('cai-webchat-div')!==null){document.getElementById('cai-webchat-div').style.display='block';}else{if(embedded_svc.isButtonDisabled){if(document.getElementById('cai-webchat-div')!==null){document.getElementById('cai-webchat-div').style.display='block';}}else{if(document.getElementById('cai-webchat-div')!==null){document.getElementById('cai-webchat-div').style.display='none';}}}}}
if(!utag.loader.chkCanRunTime(u.data.chatbot_maintenance_start_date,u.data.chatbot_maintenance_end_date)||!u.data.env.match(u.data.chatbot_maintenance_env)){if(!u.initialized){var dom_extension=(u.data.chatbot_country.toLowerCase()=="cn")?"cn":"com";var script=document.createElement('script');script.src="https://"+u.data.cdn_prefix+".louisvuitton."+dom_extension+"/chatbotfront/"+u.data.chatbot_file_name+'?utv='+u.data.utv;script.setAttribute("channelId",u.data.chatbot_channel_id);script.setAttribute("token",u.data.chatbot_token_id);script.id="cai-webchat";document.head.appendChild(script);function waitForAddedNode(params){new MutationObserver(function(mutations){var el=document.getElementById(params.id);if(el){this.disconnect();params.done(el);}}).observe(params.parent||document,{childList:true,subtree:false});}
function setChatbotCookie(){document.cookie='sap_chat_loaded=1; path=/; expires=0;';}
waitForAddedNode({id:'cai-webchat-div',parent:document.body,done:function(el){el.addEventListener("click",setChatbotCookie);setTimeout(function(){if(document.querySelector('.CaiAppInput > textarea')!==null){document.querySelector('.CaiAppInput > textarea').addEventListener('keyup',function(e){if(e.which==13){autoData.sendEvent({'categoryGa':'sap_chat_bot','actionGa':'chat_bot_press_enter'});}});}},1000);window.webchatMethods={getMemory:(conversationId)=>{try{const memory={"additionInfosLV":{"utag_data_environmentLanguage":utag_data.environmentLanguage,"utag_data_invoicingCountryForSite":utag_data.invoicingCountryForSite,"currentURL":window.location.href,"utag_data_productSku":utag_data.productSku||""}};return{memory,merge:true}}catch(e){console.error(e);}}};u.initialized=true;setTimeout(u.chatbotInit,3000);}});}else{u.chatbotInit();}}
}};utag.o[loader].loader.LOAD(id);})("53","louisvuitton.vuestack");}catch(error){utag.DB(error);}
