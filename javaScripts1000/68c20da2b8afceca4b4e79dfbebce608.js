/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/
jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b+c;return-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b+c;return d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b+c;return-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b*b+c;return d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){if(b==0)return c;if(b==e)return c+d;if((b/=e/2)<1)return d/2*Math.pow(2,10*(b-1))+c;return d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){if((b/=e/2)<1)return-d/2*(Math.sqrt(1-b*b)-1)+c;return d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e)==1)return c+d;if(!g)g=e*.3;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e)==1)return c+d;if(!g)g=e*.3;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158;var g=0;var h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;if(!g)g=e*.3*1.5;if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);if(b<1)return-.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c;return h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){if(f==undefined)f=1.70158;return d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){if(f==undefined)f=1.70158;return d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){if(f==undefined)f=1.70158;if((b/=e/2)<1)return d/2*b*b*(((f*=1.525)+1)*b-f)+c;return d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){if((b/=e)<1/2.75){return d*7.5625*b*b+c}else if(b<2/2.75){return d*(7.5625*(b-=1.5/2.75)*b+.75)+c}else if(b<2.5/2.75){return d*(7.5625*(b-=2.25/2.75)*b+.9375)+c}else{return d*(7.5625*(b-=2.625/2.75)*b+.984375)+c}},easeInOutBounce:function(a,b,c,d,e){if(b<e/2)return jQuery.easing.easeInBounce(a,b*2,0,d,e)*.5+c;return jQuery.easing.easeOutBounce(a,b*2-e,0,d,e)*.5+d*.5+c}})
/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */
;/*
 * @author  Mudit Ameta
 * @license https://github.com/zeusdeux/isInViewport/blob/master/license.md MIT
 */
!function(a,b){function c(b){var c,d=a("<div></div>").css({width:"100%"});return b.append(d),c=b.width()-d.width(),d.remove(),c}function d(e,f){var g=e.getBoundingClientRect(),h=g.top,i=g.bottom,j=g.left,k=g.right,l=a.extend({tolerance:0,viewport:b},f),m=!1,n=l.viewport.jquery?l.viewport:a(l.viewport);n.length||(console.warn("isInViewport: The viewport selector you have provided matches no element on page."),console.warn("isInViewport: Defaulting to viewport as window"),n=a(b));var o=n.height(),p=n.width(),q=n.get(0).toString();if(n[0]!==b&&"[object Window]"!==q&&"[object DOMWindow]"!==q){var r=n.get(0).getBoundingClientRect();h-=r.top,i-=r.top,j-=r.left,k=j+p,d.scrollBarWidth=d.scrollBarWidth||c(n),p-=d.scrollBarWidth}return l.tolerance=~~Math.round(parseFloat(l.tolerance)),l.tolerance<0&&(l.tolerance=o+l.tolerance),Math.abs(j)>=p?m:m=l.tolerance?!!(h<=l.tolerance&&i>=l.tolerance):!!(i>0&&o>=h)}String.prototype.hasOwnProperty("trim")||(String.prototype.trim=function(){return this.replace(/^\s*(.*?)\s*$/,"$1")});var e=function(b){if(1===arguments.length&&"function"==typeof b&&(b=[b]),!(b instanceof Array))throw new SyntaxError("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions");for(var c=0;c<b.length;c++)if("function"==typeof b[c])for(var d=0;d<this.length;d++)b[c].call(a(this[d]));else console.warn("isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions"),console.warn("isInViewport: Ignoring non-function values in array and moving on");return this};a.fn["do"]=function(a){return console.warn("isInViewport: .do causes issues in IE and some browsers since its a reserved. Use $.fn.run instead i.e., $(el).run(fn)."),e(a)},a.fn.run=e,a.extend(a.expr[":"],{"in-viewport":function(a,b,c){if(c[3]){var e=c[3].split(",");return 1===e.length&&isNaN(e[0])&&(e[1]=e[0],e[0]=void 0),d(a,{tolerance:e[0]?e[0].trim():void 0,viewport:e[1]?e[1].trim():void 0})}return d(a)}})}(jQuery,window);
;/*
 Shadow animation 1.11
 http://www.bitstorm.org/jquery/shadow-animation/
 Copyright 2011, 2013 Edwin Martin <edwin@bitstorm.org>
 Contributors: Mark Carver, Xavier Lepretre and Jason Redding
 Released under the MIT and GPL licenses.
*/
'use strict';jQuery(function(h){function r(b,m,d){var l=[];h.each(b,function(f){var g=[],e=b[f];f=m[f];e.b&&g.push("inset");"undefined"!==typeof f.left&&g.push(parseFloat(e.left+d*(f.left-e.left))+"px "+parseFloat(e.top+d*(f.top-e.top))+"px");"undefined"!==typeof f.blur&&g.push(parseFloat(e.blur+d*(f.blur-e.blur))+"px");"undefined"!==typeof f.a&&g.push(parseFloat(e.a+d*(f.a-e.a))+"px");if("undefined"!==typeof f.color){var p="rgb"+(h.support.rgba?"a":"")+"("+parseInt(e.color[0]+d*(f.color[0]-e.color[0]),
10)+","+parseInt(e.color[1]+d*(f.color[1]-e.color[1]),10)+","+parseInt(e.color[2]+d*(f.color[2]-e.color[2]),10);h.support.rgba&&(p+=","+parseFloat(e.color[3]+d*(f.color[3]-e.color[3])));g.push(p+")")}l.push(g.join(" "))});return l.join(", ")}function q(b){function m(){var a=/^inset\b/.exec(b.substring(c));return null!==a&&0<a.length?(k.b=!0,c+=a[0].length,!0):!1}function d(){var a=/^(-?[0-9\.]+)(?:px)?\s+(-?[0-9\.]+)(?:px)?(?:\s+(-?[0-9\.]+)(?:px)?)?(?:\s+(-?[0-9\.]+)(?:px)?)?/.exec(b.substring(c));
return null!==a&&0<a.length?(k.left=parseInt(a[1],10),k.top=parseInt(a[2],10),k.blur=a[3]?parseInt(a[3],10):0,k.a=a[4]?parseInt(a[4],10):0,c+=a[0].length,!0):!1}function l(){var a=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(b.substring(c));if(null!==a&&0<a.length)return k.color=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1],c+=a[0].length,!0;a=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(b.substring(c));if(null!==a&&0<a.length)return k.color=[17*parseInt(a[1],16),17*parseInt(a[2],
16),17*parseInt(a[3],16),1],c+=a[0].length,!0;a=/^rgb\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)/.exec(b.substring(c));if(null!==a&&0<a.length)return k.color=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),1],c+=a[0].length,!0;a=/^rgba\(\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*,\s*([0-9\.]+)\s*\)/.exec(b.substring(c));return null!==a&&0<a.length?(k.color=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4])],c+=a[0].length,!0):!1}function f(){var a=/^\s+/.exec(b.substring(c));
null!==a&&0<a.length&&(c+=a[0].length)}function g(){var a=/^\s*,\s*/.exec(b.substring(c));return null!==a&&0<a.length?(c+=a[0].length,!0):!1}function e(a){if(h.isPlainObject(a)){var b,e,c=0,d=[];h.isArray(a.color)&&(e=a.color,c=e.length);for(b=0;4>b;b++)b<c?d.push(e[b]):3===b?d.push(1):d.push(0)}return h.extend({left:0,top:0,blur:0,spread:0},a)}for(var p=[],c=0,n=b.length,k=e();c<n;)if(m())f();else if(d())f();else if(l())f();else if(g())p.push(e(k)),k={};else break;p.push(e(k));return p}h.extend(!0,
h,{support:{rgba:function(){var b=h("script:first"),m=b.css("color"),d=!1;if(/^rgba/.test(m))d=!0;else try{d=m!==b.css("color","rgba(0, 0, 0, 0.5)").css("color"),b.css("color",m)}catch(l){}b.removeAttr("style");return d}()}});var s=h("html").prop("style"),n;h.each(["boxShadow","MozBoxShadow","WebkitBoxShadow"],function(b,h){if("undefined"!==typeof s[h])return n=h,!1});n&&(h.Tween.propHooks.boxShadow={get:function(b){return h(b.elem).css(n)},set:function(b){var m=b.elem.style,d=q(h(b.elem)[0].style[n]||
h(b.elem).css(n)),l=q(b.end),f=Math.max(d.length,l.length),g;for(g=0;g<f;g++)l[g]=h.extend({},d[g],l[g]),d[g]?"color"in d[g]&&!1!==h.isArray(d[g].color)||(d[g].color=l[g].color||[0,0,0,0]):d[g]=q("0 0 0 0 rgba(0,0,0,0)")[0];b.run=function(b){b=r(d,l,b);m[n]=b}}})});
;/*!
 * Fotorama 4.6.3 | http://fotorama.io/license/
 */
fotoramaVersion='4.6.3';(function(window,document,location,$,undefined){"use strict";var _fotoramaClass='fotorama',_fullscreenClass='fullscreen',wrapClass=_fotoramaClass+'__wrap',wrapCss2Class=wrapClass+'--css2',wrapCss3Class=wrapClass+'--css3',wrapVideoClass=wrapClass+'--video',wrapFadeClass=wrapClass+'--fade',wrapSlideClass=wrapClass+'--slide',wrapNoControlsClass=wrapClass+'--no-controls',wrapNoShadowsClass=wrapClass+'--no-shadows',wrapPanYClass=wrapClass+'--pan-y',wrapRtlClass=wrapClass+'--rtl',wrapOnlyActiveClass=wrapClass+'--only-active',wrapNoCaptionsClass=wrapClass+'--no-captions',wrapToggleArrowsClass=wrapClass+'--toggle-arrows',stageClass=_fotoramaClass+'__stage',stageFrameClass=stageClass+'__frame',stageFrameVideoClass=stageFrameClass+'--video',stageShaftClass=stageClass+'__shaft',grabClass=_fotoramaClass+'__grab',pointerClass=_fotoramaClass+'__pointer',arrClass=_fotoramaClass+'__arr',arrDisabledClass=arrClass+'--disabled',arrPrevClass=arrClass+'--prev',arrNextClass=arrClass+'--next',arrArrClass=arrClass+'__arr',navClass=_fotoramaClass+'__nav',navWrapClass=navClass+'-wrap',navShaftClass=navClass+'__shaft',navDotsClass=navClass+'--dots',navThumbsClass=navClass+'--thumbs',navFrameClass=navClass+'__frame',navFrameDotClass=navFrameClass+'--dot',navFrameThumbClass=navFrameClass+'--thumb',fadeClass=_fotoramaClass+'__fade',fadeFrontClass=fadeClass+'-front',fadeRearClass=fadeClass+'-rear',shadowClass=_fotoramaClass+'__shadow',shadowsClass=shadowClass+'s',shadowsLeftClass=shadowsClass+'--left',shadowsRightClass=shadowsClass+'--right',activeClass=_fotoramaClass+'__active',selectClass=_fotoramaClass+'__select',hiddenClass=_fotoramaClass+'--hidden',fullscreenClass=_fotoramaClass+'--fullscreen',fullscreenIconClass=_fotoramaClass+'__fullscreen-icon',errorClass=_fotoramaClass+'__error',loadingClass=_fotoramaClass+'__loading',loadedClass=_fotoramaClass+'__loaded',loadedFullClass=loadedClass+'--full',loadedImgClass=loadedClass+'--img',grabbingClass=_fotoramaClass+'__grabbing',imgClass=_fotoramaClass+'__img',imgFullClass=imgClass+'--full',dotClass=_fotoramaClass+'__dot',thumbClass=_fotoramaClass+'__thumb',thumbBorderClass=thumbClass+'-border',htmlClass=_fotoramaClass+'__html',videoClass=_fotoramaClass+'__video',videoPlayClass=videoClass+'-play',videoCloseClass=videoClass+'-close',captionClass=_fotoramaClass+'__caption',captionWrapClass=_fotoramaClass+'__caption__wrap',spinnerClass=_fotoramaClass+'__spinner',buttonAttributes='" tabindex="0" role="button';var JQUERY_VERSION=$&&$.fn.jquery.split('.');if(!JQUERY_VERSION||JQUERY_VERSION[0]<1||(JQUERY_VERSION[0]==1&&JQUERY_VERSION[1]<8)){throw'Fotorama requires jQuery 1.8 or later and will not run without it.';}
var _={};var Modernizr=(function(window,document,undefined){var version='2.6.2',Modernizr={},docElement=document.documentElement,mod='modernizr',modElem=document.createElement(mod),mStyle=modElem.style,inputElem,toString={}.toString,prefixes=' -webkit- -moz- -o- -ms- '.split(' '),omPrefixes='Webkit Moz O ms',cssomPrefixes=omPrefixes.split(' '),domPrefixes=omPrefixes.toLowerCase().split(' '),tests={},inputs={},attrs={},classes=[],slice=classes.slice,featureName,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement('div'),body=document.body,fakeBody=body||document.createElement('body');if(parseInt(nodes,10)){while(nodes--){node=document.createElement('div');node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node);}}
style=['&#173;','<style id="s',mod,'">',rule,'</style>'].join('');div.id=mod;(body?div:fakeBody).innerHTML+=style;fakeBody.appendChild(div);if(!body){fakeBody.style.background='';fakeBody.style.overflow='hidden';docOverflow=docElement.style.overflow;docElement.style.overflow='hidden';docElement.appendChild(fakeBody);}
ret=callback(div,rule);if(!body){fakeBody.parentNode.removeChild(fakeBody);docElement.style.overflow=docOverflow;}else{div.parentNode.removeChild(div);}
return!!ret;},_hasOwnProperty=({}).hasOwnProperty,hasOwnProp;if(!is(_hasOwnProperty,'undefined')&&!is(_hasOwnProperty.call,'undefined')){hasOwnProp=function(object,property){return _hasOwnProperty.call(object,property);};}
else{hasOwnProp=function(object,property){return((property in object)&&is(object.constructor.prototype[property],'undefined'));};}
if(!Function.prototype.bind){Function.prototype.bind=function bind(that){var target=this;if(typeof target!="function"){throw new TypeError();}
var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F();var result=target.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result){return result;}
return self;}else{return target.apply(that,args.concat(slice.call(arguments)));}};return bound;};}
function setCss(str){mStyle.cssText=str;}
function setCssAll(str1,str2){return setCss(prefixes.join(str1+';')+(str2||''));}
function is(obj,type){return typeof obj===type;}
function contains(str,substr){return!!~(''+str).indexOf(substr);}
function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined){return prefixed=='pfx'?prop:true;}}
return false;}
function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined){if(elem===false)return props[i];if(is(item,'function')){return item.bind(elem||obj);}
return item;}}
return false;}
function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+' '+cssomPrefixes.join(ucProp+' ')+ucProp).split(' ');if(is(prefixed,"string")||is(prefixed,"undefined")){return testProps(props,prefixed);}else{props=(prop+' '+(domPrefixes).join(ucProp+' ')+ucProp).split(' ');return testDOMProps(props,prefixed,elem);}}
tests['csstransforms3d']=function(){var ret=!!testPropsAll('perspective');return ret;};for(var feature in tests){if(hasOwnProp(tests,feature)){featureName=feature.toLowerCase();Modernizr[featureName]=tests[feature]();classes.push((Modernizr[featureName]?'':'no-')+featureName);}}
Modernizr.addTest=function(feature,test){if(typeof feature=='object'){for(var key in feature){if(hasOwnProp(feature,key)){Modernizr.addTest(key,feature[key]);}}}else{feature=feature.toLowerCase();if(Modernizr[feature]!==undefined){return Modernizr;}
test=typeof test=='function'?test():test;if(typeof enableClasses!=="undefined"&&enableClasses){docElement.className+=' '+(test?'':'no-')+feature;}
Modernizr[feature]=test;}
return Modernizr;};setCss('');modElem=inputElem=null;Modernizr._version=version;Modernizr._prefixes=prefixes;Modernizr._domPrefixes=domPrefixes;Modernizr._cssomPrefixes=cssomPrefixes;Modernizr.testProp=function(prop){return testProps([prop]);};Modernizr.testAllProps=testPropsAll;Modernizr.testStyles=injectElementWithStyles;Modernizr.prefixed=function(prop,obj,elem){if(!obj){return testPropsAll(prop,'pfx');}else{return testPropsAll(prop,obj,elem);}};return Modernizr;})(window,document);var fullScreenApi={ok:false,is:function(){return false;},request:function(){},cancel:function(){},event:'',prefix:''},browserPrefixes='webkit moz o ms khtml'.split(' ');if(typeof document.cancelFullScreen!='undefined'){fullScreenApi.ok=true;}else{for(var i=0,il=browserPrefixes.length;i<il;i++){fullScreenApi.prefix=browserPrefixes[i];if(typeof document[fullScreenApi.prefix+'CancelFullScreen']!='undefined'){fullScreenApi.ok=true;break;}}}
if(fullScreenApi.ok){fullScreenApi.event=fullScreenApi.prefix+'fullscreenchange';fullScreenApi.is=function(){switch(this.prefix){case'':return document.fullScreen;case'webkit':return document.webkitIsFullScreen;default:return document[this.prefix+'FullScreen'];}};fullScreenApi.request=function(el){return(this.prefix==='')?el.requestFullScreen():el[this.prefix+'RequestFullScreen']();};fullScreenApi.cancel=function(el){return(this.prefix==='')?document.cancelFullScreen():document[this.prefix+'CancelFullScreen']();};}
var Spinner,spinnerDefaults={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:'rgba(128, 128, 128, .75)',hwaccel:true},spinnerOverride={top:'auto',left:'auto',className:''};(function(root,factory){Spinner=factory();}
(this,function(){"use strict";var prefixes=['webkit','Moz','ms','O'],animations={},useCssAnimations
function createEl(tag,prop){var el=document.createElement(tag||'div'),n
for(n in prop)el[n]=prop[n]
return el}
function ins(parent){for(var i=1,n=arguments.length;i<n;i++)
parent.appendChild(arguments[i])
return parent}
var sheet=(function(){var el=createEl('style',{type:'text/css'})
ins(document.getElementsByTagName('head')[0],el)
return el.sheet||el.styleSheet}())
function addAnimation(alpha,trail,i,lines){var name=['opacity',trail,~~(alpha*100),i,lines].join('-'),start=0.01+i/lines*100,z=Math.max(1-(1-alpha)/trail*(100-start),alpha),prefix=useCssAnimations.substring(0,useCssAnimations.indexOf('Animation')).toLowerCase(),pre=prefix&&'-'+prefix+'-'||''
if(!animations[name]){sheet.insertRule('@'+pre+'keyframes '+name+'{'+'0%{opacity:'+z+'}'+
start+'%{opacity:'+alpha+'}'+
(start+0.01)+'%{opacity:1}'+
(start+trail)%100+'%{opacity:'+alpha+'}'+'100%{opacity:'+z+'}'+'}',sheet.cssRules.length)
animations[name]=1}
return name}
function vendor(el,prop){var s=el.style,pp,i
prop=prop.charAt(0).toUpperCase()+prop.slice(1)
for(i=0;i<prefixes.length;i++){pp=prefixes[i]+prop
if(s[pp]!==undefined)return pp}
if(s[prop]!==undefined)return prop}
function css(el,prop){for(var n in prop)
el.style[vendor(el,n)||n]=prop[n]
return el}
function merge(obj){for(var i=1;i<arguments.length;i++){var def=arguments[i]
for(var n in def)
if(obj[n]===undefined)obj[n]=def[n]}
return obj}
function pos(el){var o={x:el.offsetLeft,y:el.offsetTop}
while((el=el.offsetParent))
o.x+=el.offsetLeft,o.y+=el.offsetTop
return o}
function getColor(color,idx){return typeof color=='string'?color:color[idx%color.length]}
var defaults={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:'#000',direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:'spinner',top:'auto',left:'auto',position:'relative'}
function Spinner(o){if(typeof this=='undefined')return new Spinner(o)
this.opts=merge(o||{},Spinner.defaults,defaults)}
Spinner.defaults={}
merge(Spinner.prototype,{spin:function(target){this.stop()
var self=this,o=self.opts,el=self.el=css(createEl(0,{className:o.className}),{position:o.position,width:0,zIndex:o.zIndex}),mid=o.radius+o.length+o.width,ep,tp
if(target){target.insertBefore(el,target.firstChild||null)
tp=pos(target)
ep=pos(el)
css(el,{left:(o.left=='auto'?tp.x-ep.x+(target.offsetWidth>>1):parseInt(o.left,10)+mid)+'px',top:(o.top=='auto'?tp.y-ep.y+(target.offsetHeight>>1):parseInt(o.top,10)+mid)+'px'})}
el.setAttribute('role','progressbar')
self.lines(el,self.opts)
if(!useCssAnimations){var i=0,start=(o.lines-1)*(1-o.direction)/2,alpha,fps=o.fps,f=fps/o.speed,ostep=(1-o.opacity)/(f*o.trail/100),astep=f/o.lines;(function anim(){i++;for(var j=0;j<o.lines;j++){alpha=Math.max(1-(i+(o.lines-j)*astep)%f*ostep,o.opacity)
self.opacity(el,j*o.direction+start,alpha,o)}
self.timeout=self.el&&setTimeout(anim,~~(1000/fps))})()}
return self},stop:function(){var el=this.el
if(el){clearTimeout(this.timeout)
if(el.parentNode)el.parentNode.removeChild(el)
this.el=undefined}
return this},lines:function(el,o){var i=0,start=(o.lines-1)*(1-o.direction)/2,seg
function fill(color,shadow){return css(createEl(),{position:'absolute',width:(o.length+o.width)+'px',height:o.width+'px',background:color,boxShadow:shadow,transformOrigin:'left',transform:'rotate('+~~(360/o.lines*i+o.rotate)+'deg) translate('+o.radius+'px'+',0)',borderRadius:(o.corners*o.width>>1)+'px'})}
for(;i<o.lines;i++){seg=css(createEl(),{position:'absolute',top:1+~(o.width/2)+'px',transform:o.hwaccel?'translate3d(0,0,0)':'',opacity:o.opacity,animation:useCssAnimations&&addAnimation(o.opacity,o.trail,start+i*o.direction,o.lines)+' '+1/o.speed+'s linear infinite'})
if(o.shadow)ins(seg,css(fill('#000','0 0 4px '+'#000'),{top:2+'px'}))
ins(el,ins(seg,fill(getColor(o.color,i),'0 0 1px rgba(0,0,0,.1)')))}
return el},opacity:function(el,i,val){if(i<el.childNodes.length)el.childNodes[i].style.opacity=val}})
function initVML(){function vml(tag,attr){return createEl('<'+tag+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',attr)}
sheet.addRule('.spin-vml','behavior:url(#default#VML)')
Spinner.prototype.lines=function(el,o){var r=o.length+o.width,s=2*r
function grp(){return css(vml('group',{coordsize:s+' '+s,coordorigin:-r+' '+-r}),{width:s,height:s})}
var margin=-(o.width+o.length)*2+'px',g=css(grp(),{position:'absolute',top:margin,left:margin}),i
function seg(i,dx,filter){ins(g,ins(css(grp(),{rotation:360/o.lines*i+'deg',left:~~dx}),ins(css(vml('roundrect',{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:filter}),vml('fill',{color:getColor(o.color,i),opacity:o.opacity}),vml('stroke',{opacity:0}))))}
if(o.shadow)
for(i=1;i<=o.lines;i++)
seg(i,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)')
for(i=1;i<=o.lines;i++)seg(i)
return ins(el,g)}
Spinner.prototype.opacity=function(el,i,val,o){var c=el.firstChild
o=o.shadow&&o.lines||0
if(c&&i+o<c.childNodes.length){c=c.childNodes[i+o];c=c&&c.firstChild;c=c&&c.firstChild
if(c)c.opacity=val}}}
var probe=css(createEl('group'),{behavior:'url(#default#VML)'})
if(!vendor(probe,'transform')&&probe.adj)initVML()
else useCssAnimations=vendor(probe,'animation')
return Spinner}));function bez(coOrdArray){var encodedFuncName="bez_"+$.makeArray(arguments).join("_").replace(".","p");if(typeof $['easing'][encodedFuncName]!=="function"){var polyBez=function(p1,p2){var A=[null,null],B=[null,null],C=[null,null],bezCoOrd=function(t,ax){C[ax]=3*p1[ax];B[ax]=3*(p2[ax]-p1[ax])-C[ax];A[ax]=1-C[ax]-B[ax];return t*(C[ax]+t*(B[ax]+t*A[ax]));},xDeriv=function(t){return C[0]+t*(2*B[0]+3*A[0]*t);},xForT=function(t){var x=t,i=0,z;while(++i<14){z=bezCoOrd(x,0)-t;if(Math.abs(z)<1e-3)break;x-=z/xDeriv(x);}
return x;};return function(t){return bezCoOrd(xForT(t),1);}};$['easing'][encodedFuncName]=function(x,t,b,c,d){return c*polyBez([coOrdArray[0],coOrdArray[1]],[coOrdArray[2],coOrdArray[3]])(t/d)+b;}}
return encodedFuncName;}
var $WINDOW=$(window),$DOCUMENT=$(document),$HTML,$BODY,QUIRKS_FORCE=location.hash.replace('#','')==='quirks',TRANSFORMS3D=Modernizr.csstransforms3d,CSS3=TRANSFORMS3D&&!QUIRKS_FORCE,COMPAT=TRANSFORMS3D||document.compatMode==='CSS1Compat',FULLSCREEN=fullScreenApi.ok,MOBILE=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),SLOW=!CSS3||MOBILE,MS_POINTER=navigator.msPointerEnabled,WHEEL="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",TOUCH_TIMEOUT=250,TRANSITION_DURATION=300,SCROLL_LOCK_TIMEOUT=1400,AUTOPLAY_INTERVAL=5000,MARGIN=2,THUMB_SIZE=64,WIDTH=500,HEIGHT=333,STAGE_FRAME_KEY='$stageFrame',NAV_DOT_FRAME_KEY='$navDotFrame',NAV_THUMB_FRAME_KEY='$navThumbFrame',AUTO='auto',BEZIER=bez([.1,0,.25,1]),MAX_WIDTH=99999,FIFTYFIFTY='50%',OPTIONS={width:null,minwidth:null,maxwidth:'100%',height:null,minheight:null,maxheight:null,ratio:null,margin:MARGIN,glimpse:0,fit:'contain',position:FIFTYFIFTY,thumbposition:FIFTYFIFTY,nav:'dots',navposition:'bottom',navwidth:null,thumbwidth:THUMB_SIZE,thumbheight:THUMB_SIZE,thumbmargin:MARGIN,thumbborderwidth:MARGIN,thumbfit:'cover',allowfullscreen:false,transition:'slide',clicktransition:null,transitionduration:TRANSITION_DURATION,captions:true,hash:false,startindex:0,loop:false,autoplay:false,stopautoplayontouch:true,keyboard:false,arrows:true,click:true,swipe:true,trackpad:false,enableifsingleframe:false,controlsonstart:true,shuffle:false,direction:'ltr',shadows:true,spinner:null},KEYBOARD_OPTIONS={left:true,right:true,down:false,up:false,space:false,home:false,end:false};function noop(){}
function minMaxLimit(value,min,max){return Math.max(isNaN(min)?-Infinity:min,Math.min(isNaN(max)?Infinity:max,value));}
function readTransform(css){return css.match(/ma/)&&css.match(/-?\d+(?!d)/g)[css.match(/3d/)?12:4];}
function readPosition($el){if(CSS3){return+readTransform($el.css('transform'));}else{return+$el.css('left').replace('px','');}}
function getTranslate(pos){var obj={};if(CSS3){obj.transform='translate3d('+(pos)+'px,0,0)';}else{obj.left=pos;}
return obj;}
function getDuration(time){return{'transition-duration':time+'ms'};}
function unlessNaN(value,alternative){return isNaN(value)?alternative:value;}
function numberFromMeasure(value,measure){return unlessNaN(+String(value).replace(measure||'px',''));}
function numberFromPercent(value){return /%$/.test(value)?numberFromMeasure(value,'%'):undefined;}
function numberFromWhatever(value,whole){return unlessNaN(numberFromPercent(value)/100*whole,numberFromMeasure(value));}
function measureIsValid(value){return(!isNaN(numberFromMeasure(value))||!isNaN(numberFromMeasure(value,'%')))&&value;}
function getPosByIndex(index,side,margin,baseIndex){return(index-(baseIndex||0))*(side+(margin||0));}
function getIndexByPos(pos,side,margin,baseIndex){return-Math.round(pos/(side+(margin||0))-(baseIndex||0));}
function bindTransitionEnd($el){var elData=$el.data();if(elData.tEnd)return;var el=$el[0],transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',msTransition:'MSTransitionEnd',transition:'transitionend'};addEvent(el,transitionEndEvent[Modernizr.prefixed('transition')],function(e){elData.tProp&&e.propertyName.match(elData.tProp)&&elData.onEndFn();});elData.tEnd=true;}
function afterTransition($el,property,fn,time){var ok,elData=$el.data();if(elData){elData.onEndFn=function(){if(ok)return;ok=true;clearTimeout(elData.tT);fn();};elData.tProp=property;clearTimeout(elData.tT);elData.tT=setTimeout(function(){elData.onEndFn();},time*1.5);bindTransitionEnd($el);}}
function stop($el,left){if($el.length){var elData=$el.data();if(CSS3){$el.css(getDuration(0));elData.onEndFn=noop;clearTimeout(elData.tT);}else{$el.stop();}
var lockedLeft=getNumber(left,function(){return readPosition($el);});$el.css(getTranslate(lockedLeft));return lockedLeft;}}
function getNumber(){var number;for(var _i=0,_l=arguments.length;_i<_l;_i++){number=_i?arguments[_i]():arguments[_i];if(typeof number==='number'){break;}}
return number;}
function edgeResistance(pos,edge){return Math.round(pos+((edge-pos)/1.5));}
function getProtocol(){getProtocol.p=getProtocol.p||(location.protocol==='https:'?'https://':'http://');return getProtocol.p;}
function parseHref(href){var a=document.createElement('a');a.href=href;return a;}
function findVideoId(href,forceVideo){if(typeof href!=='string')return href;href=parseHref(href);var id,type;if(href.host.match(/youtube\.com/)&&href.search){id=href.search.split('v=')[1];if(id){var ampersandPosition=id.indexOf('&');if(ampersandPosition!==-1){id=id.substring(0,ampersandPosition);}
type='youtube';}}else if(href.host.match(/youtube\.com|youtu\.be/)){id=href.pathname.replace(/^\/(embed\/|v\/)?/,'').replace(/\/.*/,'');type='youtube';}else if(href.host.match(/vimeo\.com/)){type='vimeo';id=href.pathname.replace(/^\/(video\/)?/,'').replace(/\/.*/,'');}
if((!id||!type)&&forceVideo){id=href.href;type='custom';}
return id?{id:id,type:type,s:href.search.replace(/^\?/,''),p:getProtocol()}:false;}
function getVideoThumbs(dataFrame,data,fotorama){var img,thumb,video=dataFrame.video;if(video.type==='youtube'){thumb=getProtocol()+'img.youtube.com/vi/'+video.id+'/default.jpg';img=thumb.replace(/\/default.jpg$/,'/hqdefault.jpg');dataFrame.thumbsReady=true;}else if(video.type==='vimeo'){$.ajax({url:getProtocol()+'vimeo.com/api/v2/video/'+video.id+'.json',dataType:'jsonp',success:function(json){dataFrame.thumbsReady=true;updateData(data,{img:json[0].thumbnail_large,thumb:json[0].thumbnail_small},dataFrame.i,fotorama);}});}else{dataFrame.thumbsReady=true;}
return{img:img,thumb:thumb}}
function updateData(data,_dataFrame,i,fotorama){for(var _i=0,_l=data.length;_i<_l;_i++){var dataFrame=data[_i];if(dataFrame.i===i&&dataFrame.thumbsReady){var clear={videoReady:true};clear[STAGE_FRAME_KEY]=clear[NAV_THUMB_FRAME_KEY]=clear[NAV_DOT_FRAME_KEY]=false;fotorama.splice(_i,1,$.extend({},dataFrame,clear,_dataFrame));break;}}}
function getDataFromHtml($el){var data=[];function getDataFromImg($img,imgData,checkVideo){var $child=$img.children('img').eq(0),_imgHref=$img.attr('href'),_imgSrc=$img.attr('src'),_thumbSrc=$child.attr('src'),_video=imgData.video,video=checkVideo?findVideoId(_imgHref,_video===true):false;if(video){_imgHref=false;}else{video=_video;}
getDimensions($img,$child,$.extend(imgData,{video:video,img:imgData.img||_imgHref||_imgSrc||_thumbSrc,thumb:imgData.thumb||_thumbSrc||_imgSrc||_imgHref}));}
function getDimensions($img,$child,imgData){var separateThumbFLAG=imgData.thumb&&imgData.img!==imgData.thumb,width=numberFromMeasure(imgData.width||$img.attr('width')),height=numberFromMeasure(imgData.height||$img.attr('height'));$.extend(imgData,{width:width,height:height,thumbratio:getRatio(imgData.thumbratio||(numberFromMeasure(imgData.thumbwidth||($child&&$child.attr('width'))||separateThumbFLAG||width)/numberFromMeasure(imgData.thumbheight||($child&&$child.attr('height'))||separateThumbFLAG||height)))});}
$el.children().each(function(){var $this=$(this),dataFrame=optionsToLowerCase($.extend($this.data(),{id:$this.attr('id')}));if($this.is('a, img')){getDataFromImg($this,dataFrame,true);}else if(!$this.is(':empty')){getDimensions($this,null,$.extend(dataFrame,{html:this,_html:$this.html()}));}else return;data.push(dataFrame);});return data;}
function isHidden(el){return el.offsetWidth===0&&el.offsetHeight===0;}
function isDetached(el){return!$.contains(document.documentElement,el);}
function waitFor(test,fn,timeout,i){if(!waitFor.i){waitFor.i=1;waitFor.ii=[true];}
i=i||waitFor.i;if(typeof waitFor.ii[i]==='undefined'){waitFor.ii[i]=true;}
if(test()){fn();}else{waitFor.ii[i]&&setTimeout(function(){waitFor.ii[i]&&waitFor(test,fn,timeout,i);},timeout||100);}
return waitFor.i++;}
waitFor.stop=function(i){waitFor.ii[i]=false;};function setHash(hash){location.replace(location.protocol
+'//'
+location.host
+location.pathname.replace(/^\/?/,'/')
+location.search
+'#'+hash);}
function fit($el,measuresToFit,method,position){var elData=$el.data(),measures=elData.measures;if(measures&&(!elData.l||elData.l.W!==measures.width||elData.l.H!==measures.height||elData.l.r!==measures.ratio||elData.l.w!==measuresToFit.w||elData.l.h!==measuresToFit.h||elData.l.m!==method||elData.l.p!==position)){var width=measures.width,height=measures.height,ratio=measuresToFit.w/measuresToFit.h,biggerRatioFLAG=measures.ratio>=ratio,fitFLAG=method==='scaledown',containFLAG=method==='contain',coverFLAG=method==='cover',pos=parsePosition(position);if(biggerRatioFLAG&&(fitFLAG||containFLAG)||!biggerRatioFLAG&&coverFLAG){width=minMaxLimit(measuresToFit.w,0,fitFLAG?width:Infinity);height=width/measures.ratio;}else if(biggerRatioFLAG&&coverFLAG||!biggerRatioFLAG&&(fitFLAG||containFLAG)){height=minMaxLimit(measuresToFit.h,0,fitFLAG?height:Infinity);width=height*measures.ratio;}
$el.css({width:width,height:height,left:numberFromWhatever(pos.x,measuresToFit.w-width),top:numberFromWhatever(pos.y,measuresToFit.h-height)});elData.l={W:measures.width,H:measures.height,r:measures.ratio,w:measuresToFit.w,h:measuresToFit.h,m:method,p:position};}
return true;}
function setStyle($el,style){var el=$el[0];if(el.styleSheet){el.styleSheet.cssText=style;}else{$el.html(style);}}
function findShadowEdge(pos,min,max){return min===max?false:pos<=min?'left':pos>=max?'right':'left right';}
function getIndexFromHash(hash,data,ok,startindex){if(!ok)return false;if(!isNaN(hash))return hash-(startindex?0:1);var index;for(var _i=0,_l=data.length;_i<_l;_i++){var dataFrame=data[_i];if(dataFrame.id===hash){index=_i;break;}}
return index;}
function smartClick($el,fn,_options){_options=_options||{};$el.each(function(){var $this=$(this),thisData=$this.data(),startEvent;if(thisData.clickOn)return;thisData.clickOn=true;$.extend(touch($this,{onStart:function(e){startEvent=e;(_options.onStart||noop).call(this,e);},onMove:_options.onMove||noop,onTouchEnd:_options.onTouchEnd||noop,onEnd:function(result){if(result.moved)return;fn.call(this,startEvent);}}),{noMove:true});});}
function div(classes,child){return'<div class="'+classes+'">'+(child||'')+'</div>';}
function shuffle(array){var l=array.length;while(l){var i=Math.floor(Math.random()*l--);var t=array[l];array[l]=array[i];array[i]=t;}
return array;}
function clone(array){return Object.prototype.toString.call(array)=='[object Array]'&&$.map(array,function(frame){return $.extend({},frame);});}
function lockScroll($el,left,top){$el.scrollLeft(left||0).scrollTop(top||0);}
function optionsToLowerCase(options){if(options){var opts={};$.each(options,function(key,value){opts[key.toLowerCase()]=value;});return opts;}}
function getRatio(_ratio){if(!_ratio)return;var ratio=+_ratio;if(!isNaN(ratio)){return ratio;}else{ratio=_ratio.split('/');return+ratio[0]/+ratio[1]||undefined;}}
function addEvent(el,e,fn,bool){if(!e)return;el.addEventListener?el.addEventListener(e,fn,!!bool):el.attachEvent('on'+e,fn);}
function elIsDisabled(el){return!!el.getAttribute('disabled');}
function disableAttr(FLAG){return{tabindex:FLAG*-1+'',disabled:FLAG};}
function addEnterUp(el,fn){addEvent(el,'keyup',function(e){elIsDisabled(el)||e.keyCode==13&&fn.call(el,e);});}
function addFocus(el,fn){addEvent(el,'focus',el.onfocusin=function(e){fn.call(el,e);},true);}
function stopEvent(e,stopPropagation){e.preventDefault?e.preventDefault():(e.returnValue=false);stopPropagation&&e.stopPropagation&&e.stopPropagation();}
function getDirectionSign(forward){return forward?'>':'<';}
function parsePosition(rule){rule=(rule+'').split(/\s+/);return{x:measureIsValid(rule[0])||FIFTYFIFTY,y:measureIsValid(rule[1])||FIFTYFIFTY}}
function slide($el,options){var elData=$el.data(),elPos=Math.round(options.pos),onEndFn=function(){elData.sliding=false;(options.onEnd||noop)();};if(typeof options.overPos!=='undefined'&&options.overPos!==options.pos){elPos=options.overPos;onEndFn=function(){slide($el,$.extend({},options,{overPos:options.pos,time:Math.max(TRANSITION_DURATION,options.time/2)}))};}
var translate=$.extend(getTranslate(elPos),options.width&&{width:options.width});elData.sliding=true;if(CSS3){$el.css($.extend(getDuration(options.time),translate));if(options.time>10){afterTransition($el,'transform',onEndFn,options.time);}else{onEndFn();}}else{$el.stop().animate(translate,options.time,BEZIER,onEndFn);}}
function fade($el1,$el2,$frames,options,fadeStack,chain){var chainedFLAG=typeof chain!=='undefined';if(!chainedFLAG){fadeStack.push(arguments);Array.prototype.push.call(arguments,fadeStack.length);if(fadeStack.length>1)return;}
$el1=$el1||$($el1);$el2=$el2||$($el2);var _$el1=$el1[0],_$el2=$el2[0],crossfadeFLAG=options.method==='crossfade',onEndFn=function(){if(!onEndFn.done){onEndFn.done=true;var args=(chainedFLAG||fadeStack.shift())&&fadeStack.shift();args&&fade.apply(this,args);(options.onEnd||noop)(!!args);}},time=options.time/(chain||1);$frames.removeClass(fadeRearClass+' '+fadeFrontClass);$el1.stop().addClass(fadeRearClass);$el2.stop().addClass(fadeFrontClass);crossfadeFLAG&&_$el2&&$el1.fadeTo(0,0);$el1.fadeTo(crossfadeFLAG?time:0,1,crossfadeFLAG&&onEndFn);$el2.fadeTo(time,0,onEndFn);(_$el1&&crossfadeFLAG)||_$el2||onEndFn();}
var lastEvent,moveEventType,preventEvent,preventEventTimeout;function extendEvent(e){var touch=(e.touches||[])[0]||e;e._x=touch.pageX;e._y=touch.clientY;e._now=$.now();}
function touch($el,options){var el=$el[0],tail={},touchEnabledFLAG,startEvent,$target,controlTouch,touchFLAG,targetIsSelectFLAG,targetIsLinkFlag,tolerance,moved;function onStart(e){$target=$(e.target);tail.checked=targetIsSelectFLAG=targetIsLinkFlag=moved=false;if(touchEnabledFLAG||tail.flow||(e.touches&&e.touches.length>1)||e.which>1||(lastEvent&&lastEvent.type!==e.type&&preventEvent)||(targetIsSelectFLAG=options.select&&$target.is(options.select,el)))return targetIsSelectFLAG;touchFLAG=e.type==='touchstart';targetIsLinkFlag=$target.is('a, a *',el);controlTouch=tail.control;tolerance=(tail.noMove||tail.noSwipe||controlTouch)?16:!tail.snap?4:0;extendEvent(e);startEvent=lastEvent=e;moveEventType=e.type.replace(/down|start/,'move').replace(/Down/,'Move');(options.onStart||noop).call(el,e,{control:controlTouch,$target:$target});touchEnabledFLAG=tail.flow=true;if(!touchFLAG||tail.go)stopEvent(e);}
function onMove(e){if((e.touches&&e.touches.length>1)||(MS_POINTER&&!e.isPrimary)||moveEventType!==e.type||!touchEnabledFLAG){touchEnabledFLAG&&onEnd();(options.onTouchEnd||noop)();return;}
extendEvent(e);var xDiff=Math.abs(e._x-startEvent._x),yDiff=Math.abs(e._y-startEvent._y),xyDiff=xDiff-yDiff,xWin=(tail.go||tail.x||xyDiff>=0)&&!tail.noSwipe,yWin=xyDiff<0;if(touchFLAG&&!tail.checked){if(touchEnabledFLAG=xWin){stopEvent(e);}}else{stopEvent(e);(options.onMove||noop).call(el,e,{touch:touchFLAG});}
if(!moved&&Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2))>tolerance){moved=true;}
tail.checked=tail.checked||xWin||yWin;}
function onEnd(e){(options.onTouchEnd||noop)();var _touchEnabledFLAG=touchEnabledFLAG;tail.control=touchEnabledFLAG=false;if(_touchEnabledFLAG){tail.flow=false;}
if(!_touchEnabledFLAG||(targetIsLinkFlag&&!tail.checked))return;e&&stopEvent(e);preventEvent=true;clearTimeout(preventEventTimeout);preventEventTimeout=setTimeout(function(){preventEvent=false;},1000);(options.onEnd||noop).call(el,{moved:moved,$target:$target,control:controlTouch,touch:touchFLAG,startEvent:startEvent,aborted:!e||e.type==='MSPointerCancel'});}
function onOtherStart(){if(tail.flow)return;setTimeout(function(){tail.flow=true;},10);}
function onOtherEnd(){if(!tail.flow)return;setTimeout(function(){tail.flow=false;},TOUCH_TIMEOUT);}
if(MS_POINTER){addEvent(el,'MSPointerDown',onStart);addEvent(document,'MSPointerMove',onMove);addEvent(document,'MSPointerCancel',onEnd);addEvent(document,'MSPointerUp',onEnd);}else{addEvent(el,'touchstart',onStart);addEvent(el,'touchmove',onMove);addEvent(el,'touchend',onEnd);addEvent(document,'touchstart',onOtherStart);addEvent(document,'touchend',onOtherEnd);addEvent(document,'touchcancel',onOtherEnd);$WINDOW.on('scroll',onOtherEnd);$el.on('mousedown',onStart);$DOCUMENT.on('mousemove',onMove).on('mouseup',onEnd);}
$el.on('click','a',function(e){tail.checked&&stopEvent(e);});return tail;}
function moveOnTouch($el,options){var el=$el[0],elData=$el.data(),tail={},startCoo,coo,startElPos,moveElPos,edge,moveTrack,startTime,endTime,min,max,snap,slowFLAG,controlFLAG,moved,tracked;function startTracking(e,noStop){tracked=true;startCoo=coo=e._x;startTime=e._now;moveTrack=[[startTime,startCoo]];startElPos=moveElPos=tail.noMove||noStop?0:stop($el,(options.getPos||noop)());(options.onStart||noop).call(el,e);}
function onStart(e,result){min=tail.min;max=tail.max;snap=tail.snap;slowFLAG=e.altKey;tracked=moved=false;controlFLAG=result.control;if(!controlFLAG&&!elData.sliding){startTracking(e);}}
function onMove(e,result){if(!tail.noSwipe){if(!tracked){startTracking(e);}
coo=e._x;moveTrack.push([e._now,coo]);moveElPos=startElPos-(startCoo-coo);edge=findShadowEdge(moveElPos,min,max);if(moveElPos<=min){moveElPos=edgeResistance(moveElPos,min);}else if(moveElPos>=max){moveElPos=edgeResistance(moveElPos,max);}
if(!tail.noMove){$el.css(getTranslate(moveElPos));if(!moved){moved=true;result.touch||MS_POINTER||$el.addClass(grabbingClass);}
(options.onMove||noop).call(el,e,{pos:moveElPos,edge:edge});}}}
function onEnd(result){if(tail.noSwipe&&result.moved)return;if(!tracked){startTracking(result.startEvent,true);}
result.touch||MS_POINTER||$el.removeClass(grabbingClass);endTime=$.now();var _backTimeIdeal=endTime-TOUCH_TIMEOUT,_backTime,_timeDiff,_timeDiffLast,backTime=null,backCoo,virtualPos,limitPos,newPos,overPos,time=TRANSITION_DURATION,speed,friction=options.friction;for(var _i=moveTrack.length-1;_i>=0;_i--){_backTime=moveTrack[_i][0];_timeDiff=Math.abs(_backTime-_backTimeIdeal);if(backTime===null||_timeDiff<_timeDiffLast){backTime=_backTime;backCoo=moveTrack[_i][1];}else if(backTime===_backTimeIdeal||_timeDiff>_timeDiffLast){break;}
_timeDiffLast=_timeDiff;}
newPos=minMaxLimit(moveElPos,min,max);var cooDiff=backCoo-coo,forwardFLAG=cooDiff>=0,timeDiff=endTime-backTime,longTouchFLAG=timeDiff>TOUCH_TIMEOUT,swipeFLAG=!longTouchFLAG&&moveElPos!==startElPos&&newPos===moveElPos;if(snap){newPos=minMaxLimit(Math[swipeFLAG?(forwardFLAG?'floor':'ceil'):'round'](moveElPos/snap)*snap,min,max);min=max=newPos;}
if(swipeFLAG&&(snap||newPos===moveElPos)){speed=-(cooDiff/timeDiff);time*=minMaxLimit(Math.abs(speed),options.timeLow,options.timeHigh);virtualPos=Math.round(moveElPos+speed*time/friction);if(!snap){newPos=virtualPos;}
if(!forwardFLAG&&virtualPos>max||forwardFLAG&&virtualPos<min){limitPos=forwardFLAG?min:max;overPos=virtualPos-limitPos;if(!snap){newPos=limitPos;}
overPos=minMaxLimit(newPos+overPos*.03,limitPos-50,limitPos+50);time=Math.abs((moveElPos-overPos)/(speed/friction));}}
time*=slowFLAG?10:1;(options.onEnd||noop).call(el,$.extend(result,{moved:result.moved||longTouchFLAG&&snap,pos:moveElPos,newPos:newPos,overPos:overPos,time:time}));}
tail=$.extend(touch(options.$wrap,$.extend({},options,{onStart:onStart,onMove:onMove,onEnd:onEnd})),tail);return tail;}
function wheel($el,options){var el=$el[0],lockFLAG,lastDirection,lastNow,tail={prevent:{}};addEvent(el,WHEEL,function(e){var yDelta=e.wheelDeltaY||-1*e.deltaY||0,xDelta=e.wheelDeltaX||-1*e.deltaX||0,xWin=Math.abs(xDelta)&&!Math.abs(yDelta),direction=getDirectionSign(xDelta<0),sameDirection=lastDirection===direction,now=$.now(),tooFast=now-lastNow<TOUCH_TIMEOUT;lastDirection=direction;lastNow=now;if(!xWin||!tail.ok||tail.prevent[direction]&&!lockFLAG){return;}else{stopEvent(e,true);if(lockFLAG&&sameDirection&&tooFast){return;}}
if(options.shift){lockFLAG=true;clearTimeout(tail.t);tail.t=setTimeout(function(){lockFLAG=false;},SCROLL_LOCK_TIMEOUT);}
(options.onEnd||noop)(e,options.shift?direction:xDelta);});return tail;}
jQuery.Fotorama=function($fotorama,opts){$HTML=$('html');$BODY=$('body');var that=this,stamp=$.now(),stampClass=_fotoramaClass+stamp,fotorama=$fotorama[0],data,dataFrameCount=1,fotoramaData=$fotorama.data(),size,$style=$('<style></style>'),$anchor=$(div(hiddenClass)),$wrap=$(div(wrapClass)),$stage=$(div(stageClass)).appendTo($wrap),stage=$stage[0],$stageShaft=$(div(stageShaftClass)).appendTo($stage),$stageFrame=$(),$arrPrev=$(div(arrClass+' '+arrPrevClass+buttonAttributes)),$arrNext=$(div(arrClass+' '+arrNextClass+buttonAttributes)),$arrs=$arrPrev.add($arrNext).appendTo($stage),$navWrap=$(div(navWrapClass)),$nav=$(div(navClass)).appendTo($navWrap),$navShaft=$(div(navShaftClass)).appendTo($nav),$navFrame,$navDotFrame=$(),$navThumbFrame=$(),stageShaftData=$stageShaft.data(),navShaftData=$navShaft.data(),$thumbBorder=$(div(thumbBorderClass)).appendTo($navShaft),$fullscreenIcon=$(div(fullscreenIconClass+buttonAttributes)),fullscreenIcon=$fullscreenIcon[0],$videoPlay=$(div(videoPlayClass)),$videoClose=$(div(videoCloseClass)).appendTo($stage),videoClose=$videoClose[0],spinner,$spinner=$(div(spinnerClass)),$videoPlaying,activeIndex=false,activeFrame,activeIndexes,repositionIndex,dirtyIndex,lastActiveIndex,prevIndex,nextIndex,nextAutoplayIndex,startIndex,o_loop,o_nav,o_navThumbs,o_navTop,o_allowFullScreen,o_nativeFullScreen,o_fade,o_thumbSide,o_thumbSide2,o_transitionDuration,o_transition,o_shadows,o_rtl,o_keyboard,lastOptions={},measures={},measuresSetFLAG,stageShaftTouchTail={},stageWheelTail={},navShaftTouchTail={},navWheelTail={},scrollTop,scrollLeft,showedFLAG,pausedAutoplayFLAG,stoppedAutoplayFLAG,toDeactivate={},toDetach={},measuresStash,touchedFLAG,hoverFLAG,navFrameKey,stageLeft=0,fadeStack=[];$wrap[STAGE_FRAME_KEY]=$(div(stageFrameClass));$wrap[NAV_THUMB_FRAME_KEY]=$(div(navFrameClass+' '+navFrameThumbClass+buttonAttributes,div(thumbClass)));$wrap[NAV_DOT_FRAME_KEY]=$(div(navFrameClass+' '+navFrameDotClass+buttonAttributes,div(dotClass)));toDeactivate[STAGE_FRAME_KEY]=[];toDeactivate[NAV_THUMB_FRAME_KEY]=[];toDeactivate[NAV_DOT_FRAME_KEY]=[];toDetach[STAGE_FRAME_KEY]={};$wrap.addClass(CSS3?wrapCss3Class:wrapCss2Class).toggleClass(wrapNoControlsClass,!opts.controlsonstart);fotoramaData.fotorama=this;function checkForVideo(){$.each(data,function(i,dataFrame){if(!dataFrame.i){dataFrame.i=dataFrameCount++;var video=findVideoId(dataFrame.video,true);if(video){var thumbs={};dataFrame.video=video;if(!dataFrame.img&&!dataFrame.thumb){thumbs=getVideoThumbs(dataFrame,data,that);}else{dataFrame.thumbsReady=true;}
updateData(data,{img:thumbs.img,thumb:thumbs.thumb},dataFrame.i,that);}}});}
function allowKey(key){return o_keyboard[key]||that.fullScreen;}
function bindGlobalEvents(FLAG){var keydownCommon='keydown.'+_fotoramaClass,localStamp=_fotoramaClass+stamp,keydownLocal='keydown.'+localStamp,resizeLocal='resize.'+localStamp+' '+'orientationchange.'+localStamp;if(FLAG){$DOCUMENT.on(keydownLocal,function(e){var catched,index;if($videoPlaying&&e.keyCode===27){catched=true;unloadVideo($videoPlaying,true,true);}else if(that.fullScreen||(opts.keyboard&&!that.index)){if(e.keyCode===27){catched=true;that.cancelFullScreen();}else if((e.shiftKey&&e.keyCode===32&&allowKey('space'))||(e.keyCode===37&&allowKey('left'))||(e.keyCode===38&&allowKey('up'))){index='<';}else if((e.keyCode===32&&allowKey('space'))||(e.keyCode===39&&allowKey('right'))||(e.keyCode===40&&allowKey('down'))){index='>';}else if(e.keyCode===36&&allowKey('home')){index='<<';}else if(e.keyCode===35&&allowKey('end')){index='>>';}}
(catched||index)&&stopEvent(e);index&&that.show({index:index,slow:e.altKey,user:true});});if(!that.index){$DOCUMENT.off(keydownCommon).on(keydownCommon,'textarea, input, select',function(e){!$BODY.hasClass(_fullscreenClass)&&e.stopPropagation();});}
$WINDOW.on(resizeLocal,that.resize);}else{$DOCUMENT.off(keydownLocal);$WINDOW.off(resizeLocal);}}
function appendElements(FLAG){if(FLAG===appendElements.f)return;if(FLAG){$fotorama.html('').addClass(_fotoramaClass+' '+stampClass).append($wrap).before($style).before($anchor);addInstance(that);}else{$wrap.detach();$style.detach();$anchor.detach();$fotorama.html(fotoramaData.urtext).removeClass(stampClass);hideInstance(that);}
bindGlobalEvents(FLAG);appendElements.f=FLAG;}
function setData(){data=that.data=data||clone(opts.data)||getDataFromHtml($fotorama);size=that.size=data.length;!ready.ok&&opts.shuffle&&shuffle(data);checkForVideo();activeIndex=limitIndex(activeIndex);size&&appendElements(true);}
function stageNoMove(){var _noMove=(size<2&&!opts.enableifsingleframe)||$videoPlaying;stageShaftTouchTail.noMove=_noMove||o_fade;stageShaftTouchTail.noSwipe=_noMove||!opts.swipe;!o_transition&&$stageShaft.toggleClass(grabClass,!opts.click&&!stageShaftTouchTail.noMove&&!stageShaftTouchTail.noSwipe);MS_POINTER&&$wrap.toggleClass(wrapPanYClass,!stageShaftTouchTail.noSwipe);}
function setAutoplayInterval(interval){if(interval===true)interval='';opts.autoplay=Math.max(+interval||AUTOPLAY_INTERVAL,o_transitionDuration*1.5);}
function setOptions(){that.options=opts=optionsToLowerCase(opts);o_fade=(opts.transition==='crossfade'||opts.transition==='dissolve');o_loop=opts.loop&&(size>2||(o_fade&&(!o_transition||o_transition!=='slide')));o_transitionDuration=+opts.transitionduration||TRANSITION_DURATION;o_rtl=opts.direction==='rtl';o_keyboard=$.extend({},opts.keyboard&&KEYBOARD_OPTIONS,opts.keyboard);var classes={add:[],remove:[]};function addOrRemoveClass(FLAG,value){classes[FLAG?'add':'remove'].push(value);}
if(size>1||opts.enableifsingleframe){o_nav=opts.nav;o_navTop=opts.navposition==='top';classes.remove.push(selectClass);$arrs.toggle(!!opts.arrows);}else{o_nav=false;$arrs.hide();}
spinnerStop();spinner=new Spinner($.extend(spinnerDefaults,opts.spinner,spinnerOverride,{direction:o_rtl?-1:1}));arrsUpdate();stageWheelUpdate();if(opts.autoplay)setAutoplayInterval(opts.autoplay);o_thumbSide=numberFromMeasure(opts.thumbwidth)||THUMB_SIZE;o_thumbSide2=numberFromMeasure(opts.thumbheight)||THUMB_SIZE;stageWheelTail.ok=navWheelTail.ok=opts.trackpad&&!SLOW;stageNoMove();extendMeasures(opts,[measures]);o_navThumbs=o_nav==='thumbs';if(o_navThumbs){frameDraw(size,'navThumb');$navFrame=$navThumbFrame;navFrameKey=NAV_THUMB_FRAME_KEY;setStyle($style,$.Fotorama.jst.style({w:o_thumbSide,h:o_thumbSide2,b:opts.thumbborderwidth,m:opts.thumbmargin,s:stamp,q:!COMPAT}));$nav.addClass(navThumbsClass).removeClass(navDotsClass);}else if(o_nav==='dots'){frameDraw(size,'navDot');$navFrame=$navDotFrame;navFrameKey=NAV_DOT_FRAME_KEY;$nav.addClass(navDotsClass).removeClass(navThumbsClass);}else{o_nav=false;$nav.removeClass(navThumbsClass+' '+navDotsClass);}
if(o_nav){if(o_navTop){$navWrap.insertBefore($stage);}else{$navWrap.insertAfter($stage);}
frameAppend.nav=false;frameAppend($navFrame,$navShaft,'nav');}
o_allowFullScreen=opts.allowfullscreen;if(o_allowFullScreen){$fullscreenIcon.prependTo($stage);o_nativeFullScreen=FULLSCREEN&&o_allowFullScreen==='native';}else{$fullscreenIcon.detach();o_nativeFullScreen=false;}
addOrRemoveClass(o_fade,wrapFadeClass);addOrRemoveClass(!o_fade,wrapSlideClass);addOrRemoveClass(!opts.captions,wrapNoCaptionsClass);addOrRemoveClass(o_rtl,wrapRtlClass);addOrRemoveClass(opts.arrows!=='always',wrapToggleArrowsClass);o_shadows=opts.shadows&&!SLOW;addOrRemoveClass(!o_shadows,wrapNoShadowsClass);$wrap.addClass(classes.add.join(' ')).removeClass(classes.remove.join(' '));lastOptions=$.extend({},opts);}
function normalizeIndex(index){return index<0?(size+(index%size))%size:index>=size?index%size:index;}
function limitIndex(index){return minMaxLimit(index,0,size-1);}
function edgeIndex(index){return o_loop?normalizeIndex(index):limitIndex(index);}
function getPrevIndex(index){return index>0||o_loop?index-1:false;}
function getNextIndex(index){return index<size-1||o_loop?index+1:false;}
function setStageShaftMinmaxAndSnap(){stageShaftTouchTail.min=o_loop?-Infinity:-getPosByIndex(size-1,measures.w,opts.margin,repositionIndex);stageShaftTouchTail.max=o_loop?Infinity:-getPosByIndex(0,measures.w,opts.margin,repositionIndex);stageShaftTouchTail.snap=measures.w+opts.margin;}
function setNavShaftMinMax(){navShaftTouchTail.min=Math.min(0,measures.nw-$navShaft.width());navShaftTouchTail.max=0;$navShaft.toggleClass(grabClass,!(navShaftTouchTail.noMove=navShaftTouchTail.min===navShaftTouchTail.max));}
function eachIndex(indexes,type,fn){if(typeof indexes==='number'){indexes=new Array(indexes);var rangeFLAG=true;}
return $.each(indexes,function(i,index){if(rangeFLAG)index=i;if(typeof index==='number'){var dataFrame=data[normalizeIndex(index)];if(dataFrame){var key='$'+type+'Frame',$frame=dataFrame[key];fn.call(this,i,index,dataFrame,$frame,key,$frame&&$frame.data());}}});}
function setMeasures(width,height,ratio,index){if(!measuresSetFLAG||(measuresSetFLAG==='*'&&index===startIndex)){width=measureIsValid(opts.width)||measureIsValid(width)||WIDTH;height=measureIsValid(opts.height)||measureIsValid(height)||HEIGHT;that.resize({width:width,ratio:opts.ratio||ratio||width/height},0,index!==startIndex&&'*');}}
function loadImg(indexes,type,specialMeasures,method,position,again){eachIndex(indexes,type,function(i,index,dataFrame,$frame,key,frameData){if(!$frame)return;var fullFLAG=that.fullScreen&&dataFrame.full&&dataFrame.full!==dataFrame.img&&!frameData.$full&&type==='stage';if(frameData.$img&&!again&&!fullFLAG)return;var img=new Image(),$img=$(img),imgData=$img.data();frameData[fullFLAG?'$full':'$img']=$img;var srcKey=type==='stage'?(fullFLAG?'full':'img'):'thumb',src=dataFrame[srcKey],dummy=fullFLAG?null:dataFrame[type==='stage'?'thumb':'img'];if(type==='navThumb')$frame=frameData.$wrap;function triggerTriggerEvent(event){var _index=normalizeIndex(index);triggerEvent(event,{index:_index,src:src,frame:data[_index]});}
function error(){$img.remove();$.Fotorama.cache[src]='error';if((!dataFrame.html||type!=='stage')&&dummy&&dummy!==src){dataFrame[srcKey]=src=dummy;loadImg([index],type,specialMeasures,method,position,true);}else{if(src&&!dataFrame.html&&!fullFLAG){$frame.trigger('f:error').removeClass(loadingClass).addClass(errorClass);triggerTriggerEvent('error');}else if(type==='stage'){$frame.trigger('f:load').removeClass(loadingClass+' '+errorClass).addClass(loadedClass);triggerTriggerEvent('load');setMeasures();}
frameData.state='error';if(size>1&&data[index]===dataFrame&&!dataFrame.html&&!dataFrame.deleted&&!dataFrame.video&&!fullFLAG){dataFrame.deleted=true;that.splice(index,1);}}}
function loaded(){$.Fotorama.measures[src]=imgData.measures=$.Fotorama.measures[src]||{width:img.width,height:img.height,ratio:img.width/img.height};setMeasures(imgData.measures.width,imgData.measures.height,imgData.measures.ratio,index);$img.off('load error').addClass(imgClass+(fullFLAG?' '+imgFullClass:'')).prependTo($frame);fit($img,($.isFunction(specialMeasures)?specialMeasures():specialMeasures)||measures,method||dataFrame.fit||opts.fit,position||dataFrame.position||opts.position);$.Fotorama.cache[src]=frameData.state='loaded';setTimeout(function(){$frame.trigger('f:load').removeClass(loadingClass+' '+errorClass).addClass(loadedClass+' '+(fullFLAG?loadedFullClass:loadedImgClass));if(type==='stage'){triggerTriggerEvent('load');}else if(dataFrame.thumbratio===AUTO||!dataFrame.thumbratio&&opts.thumbratio===AUTO){dataFrame.thumbratio=imgData.measures.ratio;reset();}},0);}
if(!src){error();return;}
function waitAndLoad(){var _i=10;waitFor(function(){return!touchedFLAG||!_i--&&!SLOW;},function(){loaded();});}
if(!$.Fotorama.cache[src]){$.Fotorama.cache[src]='*';$img.on('load',waitAndLoad).on('error',error);}else{(function justWait(){if($.Fotorama.cache[src]==='error'){error();}else if($.Fotorama.cache[src]==='loaded'){setTimeout(waitAndLoad,0);}else{setTimeout(justWait,100);}})();}
frameData.state='';img.src=src;});}
function spinnerSpin($el){$spinner.append(spinner.spin().el).appendTo($el);}
function spinnerStop(){$spinner.detach();spinner&&spinner.stop();}
function updateFotoramaState(){var $frame=activeFrame[STAGE_FRAME_KEY];if($frame&&!$frame.data().state){spinnerSpin($frame);$frame.on('f:load f:error',function(){$frame.off('f:load f:error');spinnerStop();});}}
function addNavFrameEvents(frame){addEnterUp(frame,onNavFrameClick);addFocus(frame,function(){setTimeout(function(){lockScroll($nav);},0);slideNavShaft({time:o_transitionDuration,guessIndex:$(this).data().eq,minMax:navShaftTouchTail});});}
function frameDraw(indexes,type){eachIndex(indexes,type,function(i,index,dataFrame,$frame,key,frameData){if($frame)return;$frame=dataFrame[key]=$wrap[key].clone();frameData=$frame.data();frameData.data=dataFrame;var frame=$frame[0];if(type==='stage'){if(dataFrame.html){$('<div class="'+htmlClass+'"></div>').append(dataFrame._html?$(dataFrame.html).removeAttr('id').html(dataFrame._html):dataFrame.html).appendTo($frame);}
dataFrame.caption&&$(div(captionClass,div(captionWrapClass,dataFrame.caption))).appendTo($frame);dataFrame.video&&$frame.addClass(stageFrameVideoClass).append($videoPlay.clone());addFocus(frame,function(){setTimeout(function(){lockScroll($stage);},0);clickToShow({index:frameData.eq,user:true});});$stageFrame=$stageFrame.add($frame);}else if(type==='navDot'){addNavFrameEvents(frame);$navDotFrame=$navDotFrame.add($frame);}else if(type==='navThumb'){addNavFrameEvents(frame);frameData.$wrap=$frame.children(':first');$navThumbFrame=$navThumbFrame.add($frame);if(dataFrame.video){frameData.$wrap.append($videoPlay.clone());}}});}
function callFit($img,measuresToFit,method,position){return $img&&$img.length&&fit($img,measuresToFit,method,position);}
function stageFramePosition(indexes){eachIndex(indexes,'stage',function(i,index,dataFrame,$frame,key,frameData){if(!$frame)return;var normalizedIndex=normalizeIndex(index),method=dataFrame.fit||opts.fit,position=dataFrame.position||opts.position;frameData.eq=normalizedIndex;toDetach[STAGE_FRAME_KEY][normalizedIndex]=$frame.css($.extend({left:o_fade?0:getPosByIndex(index,measures.w,opts.margin,repositionIndex)},o_fade&&getDuration(0)));if(isDetached($frame[0])){$frame.appendTo($stageShaft);unloadVideo(dataFrame.$video);}
callFit(frameData.$img,measures,method,position);callFit(frameData.$full,measures,method,position);});}
function thumbsDraw(pos,loadFLAG){if(o_nav!=='thumbs'||isNaN(pos))return;var leftLimit=-pos,rightLimit=-pos+measures.nw;$navThumbFrame.each(function(){var $this=$(this),thisData=$this.data(),eq=thisData.eq,getSpecialMeasures=function(){return{h:o_thumbSide2,w:thisData.w}},specialMeasures=getSpecialMeasures(),dataFrame=data[eq]||{},method=dataFrame.thumbfit||opts.thumbfit,position=dataFrame.thumbposition||opts.thumbposition;specialMeasures.w=thisData.w;if(thisData.l+thisData.w<leftLimit||thisData.l>rightLimit||callFit(thisData.$img,specialMeasures,method,position))return;loadFLAG&&loadImg([eq],'navThumb',getSpecialMeasures,method,position);});}
function frameAppend($frames,$shaft,type){if(!frameAppend[type]){var thumbsFLAG=type==='nav'&&o_navThumbs,left=0;$shaft.append($frames.filter(function(){var actual,$this=$(this),frameData=$this.data();for(var _i=0,_l=data.length;_i<_l;_i++){if(frameData.data===data[_i]){actual=true;frameData.eq=_i;break;}}
return actual||$this.remove()&&false;}).sort(function(a,b){return $(a).data().eq-$(b).data().eq;}).each(function(){if(!thumbsFLAG)return;var $this=$(this),frameData=$this.data(),thumbwidth=Math.round(o_thumbSide2*frameData.data.thumbratio)||o_thumbSide;frameData.l=left;frameData.w=thumbwidth;$this.css({width:thumbwidth});left+=thumbwidth+opts.thumbmargin;}));frameAppend[type]=true;}}
function getDirection(x){return x-stageLeft>measures.w/3;}
function disableDirrection(i){return!o_loop&&(!(activeIndex+i)||!(activeIndex-size+i))&&!$videoPlaying;}
function arrsUpdate(){var disablePrev=disableDirrection(0),disableNext=disableDirrection(1);$arrPrev.toggleClass(arrDisabledClass,disablePrev).attr(disableAttr(disablePrev));$arrNext.toggleClass(arrDisabledClass,disableNext).attr(disableAttr(disableNext));}
function stageWheelUpdate(){if(stageWheelTail.ok){stageWheelTail.prevent={'<':disableDirrection(0),'>':disableDirrection(1)};}}
function getNavFrameBounds($navFrame){var navFrameData=$navFrame.data(),left,width;if(o_navThumbs){left=navFrameData.l;width=navFrameData.w;}else{left=$navFrame.position().left;width=$navFrame.width();}
return{c:left+width/2,min:-left+opts.thumbmargin*10,max:-left+measures.w-width-opts.thumbmargin*10};}
function slideThumbBorder(time){var navFrameData=activeFrame[navFrameKey].data();slide($thumbBorder,{time:time*1.2,pos:navFrameData.l,width:navFrameData.w-opts.thumbborderwidth*2});}
function slideNavShaft(options){var $guessNavFrame=data[options.guessIndex][navFrameKey];if($guessNavFrame){var overflowFLAG=navShaftTouchTail.min!==navShaftTouchTail.max,minMax=options.minMax||overflowFLAG&&getNavFrameBounds(activeFrame[navFrameKey]),l=overflowFLAG&&(options.keep&&slideNavShaft.l?slideNavShaft.l:minMaxLimit((options.coo||measures.nw/2)-getNavFrameBounds($guessNavFrame).c,minMax.min,minMax.max)),pos=overflowFLAG&&minMaxLimit(l,navShaftTouchTail.min,navShaftTouchTail.max),time=options.time*1.1;slide($navShaft,{time:time,pos:pos||0,onEnd:function(){thumbsDraw(pos,true);}});setShadow($nav,findShadowEdge(pos,navShaftTouchTail.min,navShaftTouchTail.max));slideNavShaft.l=l;}}
function navUpdate(){deactivateFrames(navFrameKey);toDeactivate[navFrameKey].push(activeFrame[navFrameKey].addClass(activeClass));}
function deactivateFrames(key){var _toDeactivate=toDeactivate[key];while(_toDeactivate.length){_toDeactivate.shift().removeClass(activeClass);}}
function detachFrames(key){var _toDetach=toDetach[key];$.each(activeIndexes,function(i,index){delete _toDetach[normalizeIndex(index)];});$.each(_toDetach,function(index,$frame){delete _toDetach[index];$frame.detach();});}
function stageShaftReposition(skipOnEnd){repositionIndex=dirtyIndex=activeIndex;var $frame=activeFrame[STAGE_FRAME_KEY];if($frame){deactivateFrames(STAGE_FRAME_KEY);toDeactivate[STAGE_FRAME_KEY].push($frame.addClass(activeClass));skipOnEnd||that.show.onEnd(true);stop($stageShaft,0,true);detachFrames(STAGE_FRAME_KEY);stageFramePosition(activeIndexes);setStageShaftMinmaxAndSnap();setNavShaftMinMax();}}
function extendMeasures(options,measuresArray){if(!options)return;$.each(measuresArray,function(i,measures){if(!measures)return;$.extend(measures,{width:options.width||measures.width,height:options.height,minwidth:options.minwidth,maxwidth:options.maxwidth,minheight:options.minheight,maxheight:options.maxheight,ratio:getRatio(options.ratio)})});}
function triggerEvent(event,extra){$fotorama.trigger(_fotoramaClass+':'+event,[that,extra]);}
function onTouchStart(){clearTimeout(onTouchEnd.t);touchedFLAG=1;if(opts.stopautoplayontouch){that.stopAutoplay();}else{pausedAutoplayFLAG=true;}}
function onTouchEnd(){if(!touchedFLAG)return;if(!opts.stopautoplayontouch){releaseAutoplay();changeAutoplay();}
onTouchEnd.t=setTimeout(function(){touchedFLAG=0;},TRANSITION_DURATION+TOUCH_TIMEOUT);}
function releaseAutoplay(){pausedAutoplayFLAG=!!($videoPlaying||stoppedAutoplayFLAG);}
function changeAutoplay(){clearTimeout(changeAutoplay.t);waitFor.stop(changeAutoplay.w);if(!opts.autoplay||pausedAutoplayFLAG){if(that.autoplay){that.autoplay=false;triggerEvent('stopautoplay');}
return;}
if(!that.autoplay){that.autoplay=true;triggerEvent('startautoplay');}
var _activeIndex=activeIndex;var frameData=activeFrame[STAGE_FRAME_KEY].data();changeAutoplay.w=waitFor(function(){return frameData.state||_activeIndex!==activeIndex;},function(){changeAutoplay.t=setTimeout(function(){if(pausedAutoplayFLAG||_activeIndex!==activeIndex)return;var _nextAutoplayIndex=nextAutoplayIndex,nextFrameData=data[_nextAutoplayIndex][STAGE_FRAME_KEY].data();changeAutoplay.w=waitFor(function(){return nextFrameData.state||_nextAutoplayIndex!==nextAutoplayIndex;},function(){if(pausedAutoplayFLAG||_nextAutoplayIndex!==nextAutoplayIndex)return;that.show(o_loop?getDirectionSign(!o_rtl):nextAutoplayIndex);});},opts.autoplay);});}
that.startAutoplay=function(interval){if(that.autoplay)return this;pausedAutoplayFLAG=stoppedAutoplayFLAG=false;setAutoplayInterval(interval||opts.autoplay);changeAutoplay();return this;};that.stopAutoplay=function(){if(that.autoplay){pausedAutoplayFLAG=stoppedAutoplayFLAG=true;changeAutoplay();}
return this;};that.show=function(options){var index;if(typeof options!=='object'){index=options;options={};}else{index=options.index;}
index=index==='>'?dirtyIndex+1:index==='<'?dirtyIndex-1:index==='<<'?0:index==='>>'?size-1:index;index=isNaN(index)?getIndexFromHash(index,data,true):index;index=typeof index==='undefined'?activeIndex||0:index;that.activeIndex=activeIndex=edgeIndex(index);prevIndex=getPrevIndex(activeIndex);nextIndex=getNextIndex(activeIndex);nextAutoplayIndex=normalizeIndex(activeIndex+(o_rtl?-1:1));activeIndexes=[activeIndex,prevIndex,nextIndex];dirtyIndex=o_loop?index:activeIndex;var diffIndex=Math.abs(lastActiveIndex-dirtyIndex),time=getNumber(options.time,function(){return Math.min(o_transitionDuration*(1+(diffIndex-1)/12),o_transitionDuration*2);}),overPos=options.overPos;if(options.slow)time*=10;var _activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;unloadVideo($videoPlaying,activeFrame.i!==data[normalizeIndex(repositionIndex)].i);frameDraw(activeIndexes,'stage');stageFramePosition(SLOW?[dirtyIndex]:[dirtyIndex,getPrevIndex(dirtyIndex),getNextIndex(dirtyIndex)]);updateTouchTails('go',true);silent||triggerEvent('show',{user:options.user,time:time});pausedAutoplayFLAG=true;var onEnd=that.show.onEnd=function(skipReposition){if(onEnd.ok)return;onEnd.ok=true;skipReposition||stageShaftReposition(true);if(!silent){triggerEvent('showend',{user:options.user});}
if(!skipReposition&&o_transition&&o_transition!==opts.transition){that.setOptions({transition:o_transition});o_transition=false;return;}
updateFotoramaState();loadImg(activeIndexes,'stage');updateTouchTails('go',false);stageWheelUpdate();stageCursor();releaseAutoplay();changeAutoplay();};if(!o_fade){slide($stageShaft,{pos:-getPosByIndex(dirtyIndex,measures.w,opts.margin,repositionIndex),overPos:overPos,time:time,onEnd:onEnd});}else{var $activeFrame=activeFrame[STAGE_FRAME_KEY],$prevActiveFrame=activeIndex!==lastActiveIndex?data[lastActiveIndex][STAGE_FRAME_KEY]:null;fade($activeFrame,$prevActiveFrame,$stageFrame,{time:time,method:opts.transition,onEnd:onEnd},fadeStack);}
arrsUpdate();if(o_nav){navUpdate();var guessIndex=limitIndex(activeIndex+minMaxLimit(dirtyIndex-lastActiveIndex,-1,1));slideNavShaft({time:time,coo:guessIndex!==activeIndex&&options.coo,guessIndex:typeof options.coo!=='undefined'?guessIndex:activeIndex,keep:silent});if(o_navThumbs)slideThumbBorder(time);}
showedFLAG=typeof lastActiveIndex!=='undefined'&&lastActiveIndex!==activeIndex;lastActiveIndex=activeIndex;opts.hash&&showedFLAG&&!that.eq&&setHash(activeFrame.id||activeIndex+1);return this;};that.requestFullScreen=function(){if(o_allowFullScreen&&!that.fullScreen){scrollTop=$WINDOW.scrollTop();scrollLeft=$WINDOW.scrollLeft();lockScroll($WINDOW);updateTouchTails('x',true);measuresStash=$.extend({},measures);$fotorama.addClass(fullscreenClass).appendTo($BODY.addClass(_fullscreenClass));$HTML.addClass(_fullscreenClass);unloadVideo($videoPlaying,true,true);that.fullScreen=true;if(o_nativeFullScreen){fullScreenApi.request(fotorama);}
that.resize();loadImg(activeIndexes,'stage');updateFotoramaState();triggerEvent('fullscreenenter');}
return this;};function cancelFullScreen(){if(that.fullScreen){that.fullScreen=false;if(FULLSCREEN){fullScreenApi.cancel(fotorama);}
$BODY.removeClass(_fullscreenClass);$HTML.removeClass(_fullscreenClass);$fotorama.removeClass(fullscreenClass).insertAfter($anchor);measures=$.extend({},measuresStash);unloadVideo($videoPlaying,true,true);updateTouchTails('x',false);that.resize();loadImg(activeIndexes,'stage');lockScroll($WINDOW,scrollLeft,scrollTop);triggerEvent('fullscreenexit');}}
that.cancelFullScreen=function(){if(o_nativeFullScreen&&fullScreenApi.is()){fullScreenApi.cancel(document);}else{cancelFullScreen();}
return this;};that.toggleFullScreen=function(){return that[(that.fullScreen?'cancel':'request')+'FullScreen']();};addEvent(document,fullScreenApi.event,function(){if(data&&!fullScreenApi.is()&&!$videoPlaying){cancelFullScreen();}});that.resize=function(options){if(!data)return this;var time=arguments[1]||0,setFLAG=arguments[2];extendMeasures(!that.fullScreen?optionsToLowerCase(options):{width:'100%',maxwidth:null,minwidth:null,height:'100%',maxheight:null,minheight:null},[measures,setFLAG||that.fullScreen||opts]);var width=measures.width,height=measures.height,ratio=measures.ratio,windowHeight=$WINDOW.height()-(o_nav?$nav.height():0);if(measureIsValid(width)){$wrap.addClass(wrapOnlyActiveClass).css({width:width,minWidth:measures.minwidth||0,maxWidth:measures.maxwidth||MAX_WIDTH});width=measures.W=measures.w=$wrap.width();measures.nw=o_nav&&numberFromWhatever(opts.navwidth,width)||width;if(opts.glimpse){measures.w-=Math.round((numberFromWhatever(opts.glimpse,width)||0)*2);}
$stageShaft.css({width:measures.w,marginLeft:(measures.W-measures.w)/2});height=numberFromWhatever(height,windowHeight);height=height||(ratio&&width/ratio);if(height){width=Math.round(width);height=measures.h=Math.round(minMaxLimit(height,numberFromWhatever(measures.minheight,windowHeight),numberFromWhatever(measures.maxheight,windowHeight)));$stage.stop().animate({width:width,height:height},time,function(){$wrap.removeClass(wrapOnlyActiveClass);});stageShaftReposition();if(o_nav){$nav.stop().animate({width:measures.nw},time);slideNavShaft({guessIndex:activeIndex,time:time,keep:true});if(o_navThumbs&&frameAppend.nav)slideThumbBorder(time);}
measuresSetFLAG=setFLAG||true;ready();}}
stageLeft=$stage.offset().left;return this;};that.setOptions=function(options){$.extend(opts,options);reset();return this;};that.shuffle=function(){data&&shuffle(data)&&reset();return this;};function setShadow($el,edge){if(o_shadows){$el.removeClass(shadowsLeftClass+' '+shadowsRightClass);edge&&!$videoPlaying&&$el.addClass(edge.replace(/^|\s/g,' '+shadowsClass+'--'));}}
that.destroy=function(){that.cancelFullScreen();that.stopAutoplay();data=that.data=null;appendElements();activeIndexes=[];detachFrames(STAGE_FRAME_KEY);reset.ok=false;return this;};that.playVideo=function(){var dataFrame=activeFrame,video=dataFrame.video,_activeIndex=activeIndex;if(typeof video==='object'&&dataFrame.videoReady){o_nativeFullScreen&&that.fullScreen&&that.cancelFullScreen();waitFor(function(){return!fullScreenApi.is()||_activeIndex!==activeIndex;},function(){if(_activeIndex===activeIndex){dataFrame.$video=dataFrame.$video||$($.Fotorama.jst.video(video));dataFrame.$video.appendTo(dataFrame[STAGE_FRAME_KEY]);$wrap.addClass(wrapVideoClass);$videoPlaying=dataFrame.$video;stageNoMove();$arrs.blur();$fullscreenIcon.blur();triggerEvent('loadvideo');}});}
return this;};that.stopVideo=function(){unloadVideo($videoPlaying,true,true);return this;};function unloadVideo($video,unloadActiveFLAG,releaseAutoplayFLAG){if(unloadActiveFLAG){$wrap.removeClass(wrapVideoClass);$videoPlaying=false;stageNoMove();}
if($video&&$video!==$videoPlaying){$video.remove();triggerEvent('unloadvideo');}
if(releaseAutoplayFLAG){releaseAutoplay();changeAutoplay();}}
function toggleControlsClass(FLAG){$wrap.toggleClass(wrapNoControlsClass,FLAG);}
function stageCursor(e){if(stageShaftTouchTail.flow)return;var x=e?e.pageX:stageCursor.x,pointerFLAG=x&&!disableDirrection(getDirection(x))&&opts.click;if(stageCursor.p!==pointerFLAG&&$stage.toggleClass(pointerClass,pointerFLAG)){stageCursor.p=pointerFLAG;stageCursor.x=x;}}
$stage.on('mousemove',stageCursor);function clickToShow(showOptions){clearTimeout(clickToShow.t);if(opts.clicktransition&&opts.clicktransition!==opts.transition){setTimeout(function(){var _o_transition=opts.transition;that.setOptions({transition:opts.clicktransition});o_transition=_o_transition;clickToShow.t=setTimeout(function(){that.show(showOptions);},10);},0);}else{that.show(showOptions);}}
function onStageTap(e,toggleControlsFLAG){var target=e.target,$target=$(target);if($target.hasClass(videoPlayClass)){that.playVideo();}else if(target===fullscreenIcon){that.toggleFullScreen();}else if($videoPlaying){target===videoClose&&unloadVideo($videoPlaying,true,true);}else{if(toggleControlsFLAG){toggleControlsClass();}else if(opts.click){clickToShow({index:e.shiftKey||getDirectionSign(getDirection(e._x)),slow:e.altKey,user:true});}}}
function updateTouchTails(key,value){stageShaftTouchTail[key]=navShaftTouchTail[key]=value;}
stageShaftTouchTail=moveOnTouch($stageShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($stage,result.edge);},onTouchEnd:onTouchEnd,onEnd:function(result){setShadow($stage);var toggleControlsFLAG=(MS_POINTER&&!hoverFLAG||result.touch)&&opts.arrows&&opts.arrows!=='always';if(result.moved||(toggleControlsFLAG&&result.pos!==result.newPos&&!result.control)){var index=getIndexByPos(result.newPos,measures.w,opts.margin,repositionIndex);that.show({index:index,time:o_fade?o_transitionDuration:result.time,overPos:result.overPos,user:true});}else if(!result.aborted&&!result.control){onStageTap(result.startEvent,toggleControlsFLAG);}},timeLow:1,timeHigh:1,friction:2,select:'.'+selectClass+', .'+selectClass+' *',$wrap:$stage});navShaftTouchTail=moveOnTouch($navShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($nav,result.edge);},onTouchEnd:onTouchEnd,onEnd:function(result){function onEnd(){slideNavShaft.l=result.newPos;releaseAutoplay();changeAutoplay();thumbsDraw(result.newPos,true);}
if(!result.moved){var target=result.$target.closest('.'+navFrameClass,$navShaft)[0];target&&onNavFrameClick.call(target,result.startEvent);}else if(result.pos!==result.newPos){pausedAutoplayFLAG=true;slide($navShaft,{time:result.time,pos:result.newPos,overPos:result.overPos,onEnd:onEnd});thumbsDraw(result.newPos);o_shadows&&setShadow($nav,findShadowEdge(result.newPos,navShaftTouchTail.min,navShaftTouchTail.max));}else{onEnd();}},timeLow:.5,timeHigh:2,friction:5,$wrap:$nav});stageWheelTail=wheel($stage,{shift:true,onEnd:function(e,direction){onTouchStart();onTouchEnd();that.show({index:direction,slow:e.altKey})}});navWheelTail=wheel($nav,{onEnd:function(e,direction){onTouchStart();onTouchEnd();var newPos=stop($navShaft)+direction*.25;$navShaft.css(getTranslate(minMaxLimit(newPos,navShaftTouchTail.min,navShaftTouchTail.max)));o_shadows&&setShadow($nav,findShadowEdge(newPos,navShaftTouchTail.min,navShaftTouchTail.max));navWheelTail.prevent={'<':newPos>=navShaftTouchTail.max,'>':newPos<=navShaftTouchTail.min};clearTimeout(navWheelTail.t);navWheelTail.t=setTimeout(function(){slideNavShaft.l=newPos;thumbsDraw(newPos,true)},TOUCH_TIMEOUT);thumbsDraw(newPos);}});$wrap.hover(function(){setTimeout(function(){if(touchedFLAG)return;toggleControlsClass(!(hoverFLAG=true));},0);},function(){if(!hoverFLAG)return;toggleControlsClass(!(hoverFLAG=false));});function onNavFrameClick(e){var index=$(this).data().eq;clickToShow({index:index,slow:e.altKey,user:true,coo:e._x-$nav.offset().left});}
function onArrClick(e){clickToShow({index:$arrs.index(this)?'>':'<',slow:e.altKey,user:true});}
smartClick($arrs,function(e){stopEvent(e);onArrClick.call(this,e);},{onStart:function(){onTouchStart();stageShaftTouchTail.control=true;},onTouchEnd:onTouchEnd});function addFocusOnControls(el){addFocus(el,function(){setTimeout(function(){lockScroll($stage);},0);toggleControlsClass(false);});}
$arrs.each(function(){addEnterUp(this,function(e){onArrClick.call(this,e);});addFocusOnControls(this);});addEnterUp(fullscreenIcon,that.toggleFullScreen);addFocusOnControls(fullscreenIcon);function reset(){setData();setOptions();if(!reset.i){reset.i=true;var _startindex=opts.startindex;if(_startindex||opts.hash&&location.hash){startIndex=getIndexFromHash(_startindex||location.hash.replace(/^#/,''),data,that.index===0||_startindex,_startindex);}
activeIndex=repositionIndex=dirtyIndex=lastActiveIndex=startIndex=edgeIndex(startIndex)||0;}
if(size){if(changeToRtl())return;if($videoPlaying){unloadVideo($videoPlaying,true);}
activeIndexes=[];detachFrames(STAGE_FRAME_KEY);reset.ok=true;that.show({index:activeIndex,time:0});that.resize();}else{that.destroy();}}
function changeToRtl(){if(!changeToRtl.f===o_rtl){changeToRtl.f=o_rtl;activeIndex=size-1-activeIndex;that.reverse();return true;}}
$.each('load push pop shift unshift reverse sort splice'.split(' '),function(i,method){that[method]=function(){data=data||[];if(method!=='load'){Array.prototype[method].apply(data,arguments);}else if(arguments[0]&&typeof arguments[0]==='object'&&arguments[0].length){data=clone(arguments[0]);}
reset();return that;}});function ready(){if(!ready.ok){ready.ok=true;triggerEvent('ready');}}
reset();};$.fn.fotorama=function(opts){return this.each(function(){var that=this,$fotorama=$(this),fotoramaData=$fotorama.data(),fotorama=fotoramaData.fotorama;if(!fotorama){waitFor(function(){return!isHidden(that);},function(){fotoramaData.urtext=$fotorama.html();new $.Fotorama($fotorama,$.extend({},OPTIONS,window.fotoramaDefaults,opts,fotoramaData));});}else{fotorama.setOptions(opts,true);}});};$.Fotorama.instances=[];function calculateIndexes(){$.each($.Fotorama.instances,function(index,instance){instance.index=index;});}
function addInstance(instance){$.Fotorama.instances.push(instance);calculateIndexes();}
function hideInstance(instance){$.Fotorama.instances.splice(instance.index,1);calculateIndexes();}
$.Fotorama.cache={};$.Fotorama.measures={};$=$||{};$.Fotorama=$.Fotorama||{};$.Fotorama.jst=$.Fotorama.jst||{};$.Fotorama.jst.style=function(v){var __t,__p='',__e=_.escape;__p+='.fotorama'+
((__t=(v.s))==null?'':__t)+' .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:'+
((__t=(v.m))==null?'':__t)+'px;\nheight:'+
((__t=(v.h))==null?'':__t)+'px}\n.fotorama'+
((__t=(v.s))==null?'':__t)+' .fotorama__thumb-border{\nheight:'+
((__t=(v.h-v.b*(v.q?0:2)))==null?'':__t)+'px;\nborder-width:'+
((__t=(v.b))==null?'':__t)+'px;\nmargin-top:'+
((__t=(v.m))==null?'':__t)+'px}';return __p};$.Fotorama.jst.video=function(v){var __t,__p='',__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}
__p+='<div class="fotorama__video"><iframe src="';print((v.type=='youtube'?v.p+'youtube.com/embed/'+v.id+'?autoplay=1':v.type=='vimeo'?v.p+'player.vimeo.com/video/'+v.id+'?autoplay=1&badge=0':v.id)+(v.s&&v.type!='custom'?'&'+v.s:''));__p+='" frameborder="0" allowfullscreen></iframe></div>\n';return __p};$(function(){$('.'+_fotoramaClass+':not([data-auto="false"])').fotorama();});})(window,document,location,typeof jQuery!=='undefined'&&jQuery);;var curritem=0;var animated=0;var hash=window.location.hash;var sign=1
var width=$(".b-main-menu__list-item__insert-item__img").width();var height=$(".b-main-menu__list-item__insert-item__img").height();var indexNum1=-1;var left=0;var items=$(".b-main-menu__list-item__insert-item__img-item");function animateImg1(items){var items;var inc_top=-5;var inc_left=-5;var inc_width=20;var inc_height=20;var inc_bigRight=-30;var inc_bigLeft=-10;indexNum1++;if(indexNum1==3){indexNum1=0;}
var item=items[indexNum1];var parnt=$(item).parent().parent();var widthLeft=$(parnt).children(".b-main-menu__list-item__insert-item__big-left").width();var widthRight=$(parnt).children(".b-main-menu__list-item__insert-item__big-right").width();var parntW=$(parnt).width();var parntH=$(parnt).height();$(item).animate({"top":"-=5px","left":"-=5px;","width":"+=20px","height":"+=20px"},1000);$(parnt).children(".b-main-menu__list-item__insert-item__big-right").animate({width:widthRight-20},1000,'easeOutSine');$(parnt).children(".b-main-menu__list-item__insert-item__big-left").animate({width:widthLeft-10},1000,'easeOutSine');$(item).animate({"top":"+=5px","left":"+=5px;","width":"-=20px","height":"-=20px"},1000);$(parnt).children(".b-main-menu__list-item__insert-item__big-right").animate({width:widthRight},1000,'easeOutSine');$(parnt).children(".b-main-menu__list-item__insert-item__big-left").animate({width:widthLeft},1000,'easeOutSine');}
$(document).ready(function(){var items=$(".b-main-menu__list-item__insert-item__img-item");mainWidth=$(window).width();mainHeight=$(window).height();if(mainWidth>=600){item_big_img_interval=setInterval(function(){animateImg1(items)},4000);}
headMenu();indexMenu();animateElem();sliderShema.init();var myslider=$(".b-main-staff_members");myslider.find(".b-main-staff_members-plate-item__info").addClass("info");myslider.find(".b-main-staff_members-plate-item__video").addClass("videos");Members.init(myslider,myslider.find('.b-main-staff_members-plate-item'),myslider.find('.b-main-staff_members-plate'),myslider.find('.b-main-staff_members-arrl'),myslider.find('.b-main-staff_members-arrr'));$(window).resize(function(){if(!$('html').hasClass('lt-ie9')){mainWidth=$(window).width();Members.changeSize(myslider);$('.b-main__slider-big').fotorama({width:$('.b-main__slider-big').innerWidth(),height:$('.b-main__slider-big').innerHeight()});$('.b-main__slider-small').fotorama({width:$('.b-main__slider-small').innerWidth(),height:$('.b-main__slider-small').innerHeight()-$('.b-main__slider-small .fotorama__nav').height(),navwidth:$('.b-main__slider-small .fotorama__nav').innerWidth(),thumbheight:$('.b-main__slider-small .fotorama__nav-wrap').height()-8,});fotoramaCaption();if($(window).width()>600){mDesign=0;$('.b-header-head__menu-list-first').remove();if(typeof item_big_img_interval==='undefined'){item_big_img_interval=setInterval(function(){animateImg1(items)},4000);}}else{if(!(typeof item_big_img_interval==='undefined')){clearInterval(item_big_img_interval);delete item_big_img_interval;}}}});$('.b-page-wr').css("min-height",$(window).height());$(".b-main-news__content-item, .b-allnews__list-item, .b-other-list__item").hover(function(){$(this).children("a").toggleClass("b-news__img_hover");$(this).children("span").children("a").toggleClass("b-news__link-hover");});if((($(".b-main-allnews__list").children("li").length/2)%1.0)!==0){$(".b-main-allnews__list").children("li:last-child").css("width","100%");}
$("span.b-vacancies__list-item__post").click(function(){$(this).toggleClass("b-activ");if($(this).hasClass("b-activ")){$(this).parent("li").find("span.b-vacancies__list-item__description").removeClass("activ");$(this).parent("li").find("span.b-vacancies__list-item__description").slideDown();}else{$(this).parent("li").find("span.b-vacancies__list-item__description").slideUp();}
window.location.hash="#"+$(this).data('hash');});console.log(hash);if(window.location.hash&&$('.b-vacancies__list .b-vacancies__list-item').length!=0){var index=window.location.hash;var tab=index.replace("#","");$('.b-vacancies__list').find('[data-hash="'+tab+'"]').trigger('click');}
var fotorama=$('.fotorama').fotorama({swipe:true,trackpad:true,keyboard:true,loop:true,arrows:false,autoplay:true,captions:false});$('.b-main__slider-big').fotorama({width:$('.b-main__slider-big').innerWidth(),height:$('.b-main__slider-big').innerHeight()});$('.b-main__slider-small').fotorama({width:$('.b-main__slider-small').innerWidth(),height:$('.b-main__slider-small').innerHeight()-$('.b-main__slider-small .fotorama__nav').height(),nav:'thumbs',navwidth:$('.b-main__slider-small .fotorama__nav').innerWidth(),thumbwidth:110,thumbheight:$('.b-main__slider-small .fotorama__nav-wrap').height()-8,thumbmargin:8,thumbborderwidth:2,transition:'dissolve',transitionduration:'800',navposition:'bottom'});$(".fotorama").each(function(i){$(this).attr("id","fotorama"+i);});$("<div class='slider-arr-prev'></div>").insertBefore(".b-main__slider-big, .b-main__slider-small .fotorama__nav-wrap");$("<div class='slider-arr-next'></div>").insertAfter(".b-main__slider-big, .b-main__slider-small .fotorama__nav-wrap");$('.slider-arr-prev').click(function(){var id=$(this).siblings(".b-main__slider-big").attr("id")||$(this).closest(".b-main__slider-small").attr("id");var item=$("#"+id).fotorama();var item=item.data("fotorama");item.show("<");});$('.slider-arr-next').click(function(){var id=$(this).siblings(".b-main__slider-big").attr("id")||$(this).closest(".b-main__slider-small").attr("id");var item=$("#"+id).fotorama();var item=item.data("fotorama");item.show(">");});function fotoramaCaption(){$('.fotorama__stage__frame').each(function(){$(this).children(".fotorama__caption").css({width:$(this).children("img").width(),left:$(this).children("img").css("left")});$(this).hover(function(){$(this).children(".fotorama__caption").stop().show(300);},function(){$(this).children(".fotorama__caption").stop().hide();})})}
$('.fotorama').on('fotorama:load ',function(e,fotorama){fotoramaCaption();$('.b-main__slider-big .fotorama__nav-wrap').on('mouseenter',function(){$('.fotorama__caption').stop().show(300);})});function getLang(){if(document.location.pathname.search('^/ukr')>=0){lang='ukr';}
if(document.location.pathname.search('^/eng')>=0){lang='eng';}
if(typeof lang=='undefined'){lang='rus'}
return lang;}
$('.allnews-more20').click(function(){allNewsOffset=$('.b-main-allnews__list li.b-allnews__list-item').length;tagName=$(this).attr('data-tagname');if(typeof tagName=='undefined'){tagName='';}
$.ajax({url:'/ajax/news.php',type:"POST",data:"offset="+allNewsOffset+"&"+"tagname="+tagName+"&"+"lang="+getLang(),dataType:'json',success:function(data){if(data==null){count_items=0;}else{count_items=data.length;for(i=0;i<count_items;++i){if(typeof data[i].thumb=='undefined'||typeof data[i].thumb=='boolean'||typeof data[i].thumb=='null'){data[i].thumb='';}
newsListItem='<li class="b-allnews__list-item b-allnews__list-item-loaded">';newsListItem+='<a class="b-allnews__list-item-link" href="'+data[i].url+'">';newsListItem+='<img width="150" height="100" src="'+data[i].thumb;newsListItem+='" class="b-allnews__list-item-link__img wp-post-image"';newsListItem+=' alt="two-tone-blurred-background-2-big"></a>';newsListItem+='<span class="b-allnews__list-item-info">';newsListItem+='<span class="b-allnews__list-item-info__data">'+data[i].date+'</span>';newsListItem+='<a class="b-allnews__link" href="'+data[i].url+'">'+data[i].title+'</a>';newsListItem+='</span></li>';$('.b-main-allnews__list').append(newsListItem);}
$('.b-allnews__list-item-loaded').css('display','none');$('.b-allnews__list-item-loaded').fadeIn(1000);$('.b-allnews__list-item-loaded').removeClass('b-allnews__list-item-loaded');}}});return false;});$('.b-footer-bs-book-2 img, .b-footer-bs-book-4 img, .b-footer-bs-book-6 img, .b-footer-bs-book-8 img').hover(function(){$(this).animate({"margin-top":"0px"},300,function(){});},function(){$(this).animate({"margin-top":"30"},300,function(){});});});function headMenu(){var headHeight,marginLog,logoHeight,logoWidth,navHeight,mainTop;$(".b-header-head__menu-list-item").each(function(){$(this).append("<span class='b-menu-hover'></span>");});$(".b-header-head__menu-list-item").hover(function(){if(mainWidth>600){$(this).children(".b-menu-hover").animate({height:$(this).height()},500,'easeOutQuad',function(){$(this).parent(".b-header-head__menu-list-item").children(".b-header-head__menu-list-item-link").css("color","#fff")});}},function(){$(this).children(".b-menu-hover").stop(true,true).animate({height:0},500,'easeOutQuad');$(this).children(".b-header-head__menu-list-item-link").stop(true,true).css("color","#424242");$(this).children(".b-header-head__menu-list-item-link.active").stop(true,true).css("color","#fff");});function itemSize(){headHeight=$('.b-header-head').height();marginLogo=parseInt($('.b-header-head__logo').css('margin-top'));logoHeight=$('.b-header-head__logo-link').height();logoWidth=$('.b-header-head__logo-link').width();navHeight=parseInt($('.b-header-head__menu-list-item').css('line-height'));mainTop=parseInt($('.b-main').css('padding-top'));}
itemSize();$(window).resize(function(){$('.b-header-head, .b-header-head__logo, .b-header-head__logo-link, b-header-head__logo-link>img, .b-header-head__menu-list-item, .b-main').removeAttr('style');itemSize();$('.b-header-head__menu-list-first').remove();if((mainWidth>=1024)&&($(window).scrollTop()>1)){$('.b-header-head').height("43px");$('.b-header-head__logo').css("margin-top","5px");$(".b-header-head__menu-list-item").css("line-height","43px");$(".b-main").css("padding-top","49px");$(".b-header-head__logo-link, .b-header-head__logo-link>img").height("33px");$(".b-header-nav").css("display","none");}
if((mainWidth>=1024)&&($(window).scrollTop()<1)){$(".b-header-head__logo-link, .b-header-head__logo-link>img").height("63px");$(".b-header-head__logo-link, .b-header-head__logo-link>img").width("");}
if(mainWidth<1024){$(".b-header-nav").css("display","block");$('.b-header-head__logo-link').width("");$(".b-header-head__logo-link, .b-header-head__logo-link>img").height("");}
if(mainWidth<600){$('.b-scheme').find('img').each(function(){$(this).attr('src',$(this).data('small'))});}})
$(window).scroll(function(){if(mainWidth>=1024){if($(this).scrollTop()>1){$(".b-header-nav").slideUp();$('.b-header-head').stop().animate({height:headHeight-70},400);$(".b-header-head__logo").stop(true,true).animate({marginTop:marginLogo-20},400);$(".b-header-head__logo-link, .b-header-head__logo-link>img").animate({height:logoHeight-30,width:logoWidth-100},400);$(".b-header-head__menu-list-item").stop(true,true).animate({lineHeight:navHeight-70},400);$(".b-main").stop(true,true).animate({paddingTop:mainTop-96},400);}
if($(this).scrollTop()<1){$(".b-header-nav").slideDown();$('.b-header-head').stop().animate({height:headHeight},400);$(".b-header-head__logo").stop(true,true).animate({marginTop:marginLogo},400);$(".b-header-head__logo-link, .b-header-head__logo-link>img").stop(true,true).animate({height:logoHeight,width:logoWidth},400);$(".b-header-head__menu-list-item").stop(true,true).animate({lineHeight:navHeight},400);$(".b-main").stop(true,true).animate({paddingTop:mainTop},400);}}});}
function indexMenu(){var widthDef,heightDef,bigRight,bigLeft;$(".b-main-menu__list-item__insert-item__big").click(function(){var url=$(this).find("a").attr("href");$(location).attr('href',url);});$(".b-main-menu__list-item__insert-item__small, .b-404__menu-item").append("<span class='b-item__small-hover'></span>");$(".b-main-menu__list-item__insert-item__small, .b-404__menu-item").hover(function(){if(mainWidth>=1024){$(this).find("span.b-item__small-hover").stop().animate({"height":$(this).height(),"opacity":1},700);$(this).find("a").stop().animate({"opacity":"0"},700);}},function(){if(mainWidth>=1024){$(this).find("span.b-item__small-hover").stop().animate({"height":0,"opacity":0},700);$(this).find("a").stop().animate({"opacity":"1"},700);}});$(".b-main-menu__list-item__insert-item__big").css({boxShadow:'0 0 0 #000'}).hover(function(){if(mainWidth>=1024){$(this).stop(true,true).animate({boxShadow:"0 0 7px #000"});}},function(){if(mainWidth>=1024){$(this).stop(true,true).animate({boxShadow:"0 0 0 #000"});}});function itemSize(){widthDef=$(".b-main-menu__list-item__insert-item__img").width();heightDef=$(".b-main-menu__list-item__insert-item__img").height();bigRight=$("span .b-main-menu__list-item__insert-item__big-right").width();bigLeft=$("span .b-main-menu__list-item__insert-item__big-left").width();}
$(window).resize(function(){$(".b-main-menu__list-item__insert-item__big").find('span').removeAttr('style');$(".b-main-menu__list-item__insert-item__img").removeAttr('style');itemSize();$('.b-header-head__menu-list-first').remove();});function itemSize1(){var ret=[];ret['widthDef']=$(".b-main-menu__list-item__insert-item__img").width();ret['heightDef']=$(".b-main-menu__list-item__insert-item__img").height();ret['bigRight']=$("span .b-main-menu__list-item__insert-item__big-right").width();ret['bigLeft']=$("span .b-main-menu__list-item__insert-item__big-left").width();return ret;}
s=itemSize1();function pause(ms)
{var date=new Date();var curDate=null;do{curDate=new Date();}
while(curDate-date<ms);}
function imghover(obj,ind,is_hover)
{inc_top=0;inc_left=0;inc_width=-20;inc_height=-20;inc_bigRight=30;inc_bigLeft=10;st=false;if(is_hover)
{var inc_top=-5;var inc_left=-5;var inc_width=20;var inc_height=20;var inc_bigRight=-30;var inc_bigLeft=-10;var st=true;}
t=ind*3400;$(obj).find(".b-main-menu__list-item__insert-item__img-item").stop(true,true).delay(100).animate({top:inc_top,left:inc_left,width:widthDef+inc_width,height:heightDef+inc_height},2000);$(obj).children("span").children("span .b-main-menu__list-item__insert-item__big-right").stop().animate({width:bigRight+inc_bigRight},700,'easeOutSine');$(obj).children("span").children("span .b-main-menu__list-item__insert-item__big-left").stop().animate({width:bigLeft+inc_bigLeft},700,'easeOutSine',function(){}).stop();}
if(mainWidth<600){$('.b-main-menu__list-item__insert-item__big-left,b-main-menu__list-item__insert-item__big-right ').css("display","none");}else{$('.b-main-menu__list-item__insert-item__big-left,b-main-menu__list-item__insert-item__big-right ').css("display","block");}
if(mainWidth>=600){itemSize();$(".b-main-menu__list-item__insert-item__big").hover(function(){clearInterval(item_big_img_interval);$(".b-main-menu__list-item__insert-item__img").removeAttr('style');if(mainWidth>=600){$(this).find(".b-main-menu__list-item__insert-item__img").stop(true,true).animate({top:-5,left:-5,width:widthDef+20,height:heightDef+20},1000);$(this).children("span").children("span .b-main-menu__list-item__insert-item__big-right").animate({width:bigRight-30},1000,'easeOutSine');$(this).children("span").children("span .b-main-menu__list-item__insert-item__big-left").animate({width:bigLeft-10},1000,'easeOutSine');}},function(){var items=$(".b-main-menu__list-item__insert-item__img-item");$(".b-main-menu__list-item__insert-item__img-item").removeAttr('style');item_big_img_interval=setInterval(function(){animateImg1(items)},3000);if(mainWidth>=600){$(this).find(".b-main-menu__list-item__insert-item__img").stop(true,true).animate({top:0,left:0,width:widthDef,height:heightDef},500);$(this).children("span").children("span .b-main-menu__list-item__insert-item__big-right").stop().animate({width:bigRight},1000,'easeOutSine');$(this).children("span").children("span .b-main-menu__list-item__insert-item__big-left").stop().animate({width:bigLeft},1000,'easeOutSine');}});}}
var _un_='undefined';var Members={init:function(element,elm,plate,arrl,arrr){this._id=false;this.inited=false;this.element=element;this.elm=elm;this.plate=plate;this.arrl=arrl;this.arrr=arrr;this.ww=element.width();this.wh=element.height();this.parent=this.element.parent();this.opt={duration:1000,easing:'swing'};this.switching=false;this.page=0;this.pageCount=0;this.item=[];this.create();},changeSize:function(element){this.ww=0;this.wh=0;this.ww=element.width();this.wh=element.height();this.resize();},create:function(){var self=this;var parent=this.element.parent();if(this.elm){for(var i=0;i<this.elm.length;i++){var obj=$(this.elm[i]);var item={id:i,obj:obj,info:obj.find('.info'),videoCnt:obj.find('.videos'),video:obj.find('video')};if(jQuery.support.leadingWhitespace){if(item.video.length){item.videoCnt.bind('mouseenter mouseleave',{id:i,item:item,video:item.video},function(e){switch(e.type){case'mouseenter':e.data.video[0].play(0);break;case'mouseleave':break;}});item.video.bind('ended',function(e){this.currentTime=0;});}}
this.item.push(item);}
this.pageCount=this.item.length-3;}
if(this.arrl&&this.arrr){if(this.pageCount>1){this.arrl.bind('click',function(e){self.prevPage();return false;});this.arrr.bind('click',function(e){self.nextPage();return false;});}else{this.arrl.css({display:'none'});this.arrr.css({display:'none'});}}
this.inited=true;this.resize();},resize:function(){this.height=0;this.itemWidth=0;this.plateHeight=0;this.arrWidth=60;this.arrPadding=60;if(this.isTeamPage){}
if(this.ww>1200){this.arrPadding=50;}else if(this.ww>1100){this.arrPadding=40;}else{this.arrWidth=10;this.arrPadding=10;}
this.itemWidth=Math.round((this.ww-this.arrWidth*2-this.arrPadding*6)/3);this.itemStartOffset=this.arrPadding*2+this.arrWidth;this.itemWidthWithPadding=this.itemWidth+this.arrPadding;for(var i=0;i<this.item.length;i++){var item=this.item[i];item.obj.css({width:this.itemWidth,left:this.itemStartOffset+i*(this.itemWidthWithPadding),top:0,display:i>2?'none':'block'});var infoHeight=item.info.outerHeight(true);if(infoHeight>this.plateHeight){this.plateHeight=infoHeight;}
var itemHeight=item.obj.outerHeight(true);if(itemHeight>this.height){this.height=itemHeight;}}
if(this.plate){this.plate.css({height:this.plateHeight});}
this.element.css({height:this.height});},prevPage:function(){var page=this.page-1;if(page<0){page=this.pageCount;};this.switchPage(page,false);$('.b-main-staff_members-plate-item, .b-main-staff_members').css('overflow','hidden');},nextPage:function(){var page=this.page+1;if(page>this.pageCount){page=0;}
this.switchPage(page,true);$('.b-main-staff_members-plate-item, .b-main-staff_members').css('overflow','hidden');},switchPage:function(page,dir){if($('.b-main-staff_members').hasClass('animate')===false){if(this.page==page)return;if(this.switching)return;this.switching=true;if(typeof dir==_un_)dir=true;var self=this;this.page=page;var itemsPerPage=3;maxLeftOffset=-1;minLeftOffset=10000;curLeftOffset=0;maxLeftOffsetIndex=0;minLeftOffsetIndex=-10000;cntItems=this.item.length;duration=700;$('.b-main-staff_members').addClass('animate');setTimeout(function(){$('.b-main-staff_members').removeClass('animate');},duration+50);for(i=0;i<cntItems;i++){curLeftOffset=parseFloat(this.item[i].obj.css('left'));if(curLeftOffset>maxLeftOffset){maxLeftOffsetIndex=i;maxLeftOffset=curLeftOffset;}
if(curLeftOffset<minLeftOffset){minLeftOffsetIndex=i;minLeftOffset=curLeftOffset;}}
for(var i=0;i<this.item.length;i++){if(dir===false){offset=1;if(i==maxLeftOffsetIndex){this.item[i].obj.css('left',this.itemStartOffset-this.itemWidthWithPadding);this.item[i].obj.css('display','block');this.item[i].obj.stop().animate({'left':this.itemStartOffset+'px','opacity':'1'},duration);}
if(i!=maxLeftOffsetIndex&&parseFloat(this.item[i].obj.css('left'))<(this.itemStartOffset+2*this.itemWidthWithPadding)){this.item[i].obj.stop().animate({left:parseFloat(this.item[i].obj.css('left'))+offset*this.itemWidthWithPadding+'px'},duration);}
if(i!=maxLeftOffsetIndex&&Math.abs((parseFloat(this.item[i].obj.css('left'))-(this.itemStartOffset+2*this.itemWidthWithPadding)))<40){this.item[i].obj.stop().animate({left:parseFloat(this.item[i].obj.css('left'))+offset*this.itemWidthWithPadding+'px','opacity':'0'},duration).promise().done(function(){this.css('display','none');});}
if(i!=maxLeftOffsetIndex&&parseFloat(this.item[i].obj.css('left'))>(this.itemStartOffset+2*this.itemWidthWithPadding)){this.item[i].obj.stop().animate({left:parseFloat(this.item[i].obj.css('left'))+offset*this.itemWidthWithPadding},duration);}}else{offset=-1;if(i==minLeftOffsetIndex){this.item[i].obj.stop().animate({'left':this.itemStartOffset-this.itemWidthWithPadding+'px','opacity':0},duration).animate({'left':this.itemStartOffset+(cntItems-1)*this.itemWidthWithPadding+'px'},1).promise().done(function(){this.css('display','none');});}
if(i!=minLeftOffsetIndex&&parseFloat(this.item[i].obj.css('left'))<(this.itemStartOffset+3*this.itemWidthWithPadding)){this.item[i].obj.stop().animate({left:parseFloat(this.item[i].obj.css('left'))+offset*this.itemWidthWithPadding+'px'},duration);}
if(i!=minLeftOffsetIndex&&Math.abs(parseFloat(this.item[i].obj.css('left'))-(this.itemStartOffset+3*this.itemWidthWithPadding))<40){this.item[i].obj.css('display','block').stop().animate({left:parseFloat(this.item[i].obj.css('left'))+offset*this.itemWidthWithPadding+'px','opacity':'1'},duration);}
if(i!=minLeftOffsetIndex&&parseFloat(this.item[i].obj.css('left'))>(this.itemStartOffset+3*this.itemWidthWithPadding)){this.item[i].obj.stop().animate({left:parseFloat(this.item[i].obj.css('left'))+offset*this.itemWidthWithPadding},duration);}}}
this.switching=false;}},remove:function(){this.rm();}};function anim(p)
{if(animated===0)
{var cnt=$(".b-scheme").find("span.scheme-img").children().length;curritem+=1;if(curritem>=cnt){curritem=0;}
$('#fake-bg').remove();if($('.b-scheme-center').children().first().attr('id')!='fake-bg'){$('.b-scheme-center').prepend('<div class="b-scheme-center__content-fake" id="fake-bg"></div>');}
if(mainWidth>=600){$('.b-scheme').find('.scheme-img').parent().parent().eq(0).children().css('border-bottom-style','none');$(".b-scheme").find("span").each(function(){$(this).removeClass("bg-active active line-top-active color-active line-active")});$("span.b-scheme-content-item").eq(curritem).addClass("active");$('.b-scheme').find('.scheme-img').parent().parent().eq(curritem).children().addClass("line-top-active color-active");$('.b-scheme').find('.scheme-img').parent().parent().eq(curritem).children("span:eq(1)").addClass("bg-active");$('.b-scheme').find('.scheme-img').parent().parent().eq(curritem).children("span:eq(-1)").addClass("line-active");var uri='url('+$('.b-scheme').find('.scheme-img').eq(curritem).children().data('big')+')';$('#fake-bg').css('backgroundImage',uri);}
else
{var lastch=$('.b-scheme').children().children().last();var uri='url('+$('.b-scheme').find('.scheme-img').find('img').children().data('big')+')';$('#fake-bg').css('backgroundImage',uri);}
animated=0;}}
var animateInterval;function animateScheme(param,obj){if(param){curritem--;if(animated===0){anim(obj);animateInterval=setInterval(function(){anim(obj);},3000);}}else{clearInterval(animateInterval);}}
function animateElem(){$(".b-scheme").find("span.scheme-img").bind({mouseenter:function(){$('#fake-bg').css('backgroundImage','none');clearInterval(animateInterval);if(mainWidth>=1024){$(".b-scheme").find("span").each(function(){$(this).removeClass("bg-active active line-top-active color-active line-active")});$("span.b-scheme-content-item").eq(($(this).parent("span").parent("div").index()-1)).addClass("active");$(this).parent("span").addClass("bg-active");if($(this).parent("span").parent("div").index()==1){$(this).parent("span").parent("div").children("span:eq(0)").addClass("color-active");$("span.b-scheme-development__line-top").addClass("line-top-active");}else{$(this).parent("span").parent("div").children("span:eq(0)").addClass("line-top-active color-active");}
$(this).parent("span").parent("div").children("span:eq(-1)").addClass("line-active");}
else
{$(".b-scheme").find("span").each(function(){$(this).removeClass("bg-active active line-top-active color-active line-active")});$('.b-scheme-center').prepend('<div class="b-scheme-center__content-fake" id="fake-bg"></div>');var lastch=$('.b-scheme').children().children().last();var uri='url('+$(this).find('img').data('big')+')';$('#fake-bg').css('backgroundImage',uri);}},mouseleave:function(){curritem--;}});var interval;$(".b-political__shema-item, .b-printing__shema1-round, .b-publishing__shema1-item_round").hover(function(){if(mainWidth>=1024){var self=this;function floatElement(){$(self).stop().animate({top:-15},800).animate({top:0},800);interval=setTimeout(floatElement,800);}
floatElement();}},function(){if(mainWidth>=1024){var self=this;$(self).stop(true).animate({top:0},800)
clearTimeout(interval);}});if(mainWidth>=1024){if($(window).scrollTop()<1){$(".b-main-career__shema .b-left").find('.b-second, .b-first').css({left:-200,opacity:0});$(".b-main-career__shema .b-right").find('.b-first, .b-second').css({right:-200,opacity:0});$('.b-main-career__shema .b-left .b-first:in-viewport(-200)').delay(600).animate({left:0,opacity:1},600,function(){$('.b-main-career__shema .b-left .b-second').animate({left:0,opacity:1},600);});$('.b-main-career__shema .b-right .b-first:in-viewport(-200)').delay(600).animate({right:0,opacity:1},600,function(){$('.b-main-career__shema .b-right .b-second').animate({right:0,opacity:1},600);});}}}
var sliderShema={init:function(){if(mainWidth>=1024){var myVar1,index=0,arrLength=$(".b-linear__shema .b-linear__shema-wr").length;function itemHover(startIndex){var curIndex,prevIndex;if(index<=arrLength){if(startIndex>0){index=startIndex;}
if(index==0){curIndex=0;prevIndex=-1;index++;}else{if(index==1){curIndex=index-1;if(startIndex>0){prevIndex=-1;}else{prevIndex=arrLength-1;}}else{curIndex=index-1;if(startIndex>0){prevIndex=-1;}else{prevIndex=curIndex-1;}}}
$myItem=$(".b-linear__shema .b-linear__shema-wr").eq(curIndex);$myItem.find(".b-linear__shema-num").toggleClass("num__hover");$myItem.find(".round2").toggleClass("round2-hover");$myItem.find(".round3").toggleClass("round3-hover");$myItem.find(".round4").toggleClass("round4-hover");$myItem.find(".b-linear__shema-text").fadeTo(500,1).delay(500).fadeOut();if(prevIndex>=0){$prevItem=$(".b-linear__shema .b-linear__shema-wr").eq(prevIndex);$prevItem.find(".b-linear__shema-num").toggleClass("num__hover");$prevItem.find(".round2").toggleClass("round2-hover");$prevItem.find(".round3").toggleClass("round3-hover");$prevItem.find(".round4").toggleClass("round4-hover");$prevItem.find(".b-linear__shema-text").fadeOut();}
myVar1=setTimeout(itemHover,1500);index++;}
if(index>arrLength){index=1;}}
itemHover();$(".b-linear__shema-wr").hover(function(){$(this).find(".b-linear__shema-text").css("display","inline-block");},function(){$(this).find(".b-linear__shema-text").css("display","none");})
$(".b-linear__shema").hover(function(){clearTimeout(myVar1);$(".b-linear__shema .round2").removeClass('round2-hover');$(".b-linear__shema .round3").removeClass('round3-hover');$(".b-linear__shema .round4").removeClass('round4-hover');$(".b-linear__shema-num").removeClass("num__hover");$(".b-linear__shema .b-linear__shema-text").fadeOut();},function(){$(".b-linear__shema .round2").removeClass('round2-hover');$(".b-linear__shema .round3").removeClass('round3-hover');$(".b-linear__shema .round4").removeClass('round4-hover');$(".b-linear__shema-num").removeClass("num__hover");$(".b-linear__shema .b-linear__shema-text").fadeOut();itemHover(index);})}}}
function checkWindowSize(){return $(window).width();};function resizeContentElements(){function itemSize(){headHeight=$('.b-header-head').height();marginLogo=parseInt($('.b-header-head__logo').css('margin-top'));logoHeight=$('.b-header-head__logo-link').height();logoWidth=$('.b-header-head__logo-link').width();navHeight=parseInt($('.b-header-head__menu-list-item').css('line-height'));mainTop=parseInt($('.b-main').css('padding-top'));}
$('.b-main-news-in__item-content img, .b-main-news-in__item-content iframe').each(function(i,elem){widthToHeight=elem.width/elem.height;hPadding=$(elem).outerWidth()-$(elem).width();if(elem.width>=$('.b-main-news-in__item-content').width()-hPadding){$(elem).css('width',($('.b-main-news-in__item-content').width()-hPadding)+'px');$(elem).css('height',Math.ceil(($('.b-main-news-in__item-content').width()-hPadding)/widthToHeight)+'px');}else{if($(elem).attr('data-orig-size')){sizes=$(elem).attr('data-orig-size').split('x');$(elem).css('width',sizes[0]+'px');$(elem).css('height',Math.ceil(sizes[1])+'px');}}});$('.b-scheme').find('.scheme-img').find('img').each(function(){$(this).attr('src',$(this).data('big'))});if(checkWindowSize()>600){$(".b-scheme").find("span.scheme-img").bind({mouseenter:function(){animateScheme(false,$('this'));},mouseleave:function(){animateScheme(true,$('this'));}});}
$(".b-main-menu__list-item__insert-item__big").find('span').removeAttr('style');itemSize();}
$(document).ready(function(){resizeContentElements();if(document.location.pathname.search('o-kompanii')>=0){animateScheme(true);}
var obj;var windowsize=checkWindowSize();$(window).resize(function(){if(!$('html').hasClass('lt-ie9')){windowsize=checkWindowSize();animateElem();if(document.location.pathname.search('o-kompanii')>=0){animateScheme(true);}}});$('.b-header-head__menu').remove('.b-header-head__menu-list-first');if(window.innerWidth<600){$('.b-scheme').find('img').each(function(){$(this).attr('src',$(this).data('small'))});$(".b-scheme").find("span").each(function(){$(this).removeClass("bg-active active line-top-active color-active line-active")});$('.b-main-menu__list').children().eq(1).children().children('.big').prependTo($('.b-main-menu__list').children().eq(1).children());var mDesign=0;var first_block='<div class="b-header-head__menu-list-first"><a class="b-header-head__menu-list-item-link" href="/" >ÐÐ»Ð°Ð²Ð½Ð°Ñ</a>';first_block+='<span class="b-header-head__menu-list-first-item-marker"></span></div>';$('.b-header-head__menu-list-first').remove();$('.b-header-head__menu').prepend(first_block);$('.b-header-head__menu-list-first-item-marker').click(function(){if($('.b-header-head__menu-list').css('display')=='none'){$('.b-header').css('overflow','visible');$('.b-header-head').css('overflow','visible');$('.b-header-head__menu-list').css('display','block');$('.b-header-head__menu-list').css('background-color','#FFFFFF');}else{$('.b-header-head__menu-list').css('display','none');}});mDesign=1;$('.b-scheme').find('span.scheme-img').each(function(){var item1=$(this).find('img').data('hover');var item2=$(this).find('img').data('small');var src=$(this).find('img').attr('src');$(this).attr('src',item2);$(this).find('img').attr('src',item1);$(this).css('background-image',item1);});}
else
{$('.b-main-menu__list').children().eq(1).children().children('.big').appendTo($('.b-main-menu__list').children().eq(1).children());$('.b-header-head__menu-list-first').remove();}
if((windowsize>=600)&&(windowsize<1024)){$('.b-scheme').find('span.scheme-img').each(function(){var item1=$(this).children().data('hover');var item2=$(this).children().data('small');var src=$(this).find('img').attr('src');$(this).data('big',src);$(this).attr('src',item2);$(this).find('img').attr('src',item2);$(this).css('background-image',item2);});$('.b-scheme-center').prepend('<div class="b-scheme-center__content-fake" id="fake-bg"></div>');var lastch=$('.b-scheme').children().children().last();var uri='url('+$('.b-scheme').last().find('.scheme-img').data('big')+')';$('#fake-bg').css('backgroundImage',uri);$(".b-scheme").find("span.scheme-img").bind({mouseenter:function(){$(".b-scheme").find("span").each(function(){$(this).removeClass("bg-active active line-top-active color-active line-active")});$("span.b-scheme-content-item").eq(($(this).parent("span").parent("div").index()-1)).addClass("active");$(this).addClass("bg-active");$(this).data('normal',$(this).find('img').attr('src'));$(this).find('img').attr('src',$(this).children().data('hover'));$(this).parent("span").addClass("bg-active");if($(this).parent("span").parent("div").index()==1){$(this).parent("span").parent("div").children("span:eq(0)").addClass("color-active");$("span.b-scheme-development__line-top").addClass("line-top-active");}else{$(this).parent("span").parent("div").children("span:eq(0)").addClass("line-top-active color-active");}
var uri='url('+$('.b-scheme').find('.scheme-img').find('img').children().data('big')+')';$(this).parent("span").parent("div").children("span:eq(-1)").addClass("line-active");uri='url('+$(this).children().data('big')+')';$('#fake-bg').css('backgroundImage',uri);},mouseleave:function(){$(this).find('img').attr('src',$(this).data('normal'));if($(this).parent("span").parent("div").index()==1){$(this).parent("span").parent("div").children("span:eq(0)").removeClass("color-active");$("span.b-scheme-development__line-top").removeClass("line-top-active");}else{$(this).parent("span").parent("div").children("span:eq(0)").removeClass("line-top-active color-active");}
$(this).parent("span").parent("div").children("span:eq(-1)").removeClass("line-active");}});$(".b-main-menu__list-item__insert-item__img").width($(".b-main-menu__list-item__insert-item__big").width());$(".b-main-menu__list-item__insert-item__img").removeAttr('style');}
$(window).scroll(function(){if($(window).scrollTop()>320){$('#b-top-arrow').fadeIn();}else{$('#b-top-arrow').fadeOut();}});$('#b-top-arrow').click(function(){console.log('*');$('body,html').stop(false,false).animate({scrollTop:0},800);return false;});});$(window).resize(function(){resizeContentElements();var windowHeight=$(window).height();var windowsize=$(window).width();if(window.innerWidth<600){$('.b-main-menu__list-item__insert-item__big-left,b-main-menu__list-item__insert-item__big-right ').css("display","none");$('.b-main-menu__list').children().eq(1).children().children('.big').prependTo($('.b-main-menu__list').children().eq(1).children());var mDesign=0;$('.b-header-head__menu-list-first').remove();$('.b-header-head__menu').prepend('<div class="b-header-head__menu-list-first"><a class="b-header-head__menu-list-item-link" href="/" >ÐÐ»Ð°Ð²Ð½Ð°Ñ</a><span class="b-header-head__menu-list-first-item-marker"></span></div>');$('.b-header-head__menu-list-first').click(function(){if($('.b-header-head__menu-list').css('display')=='none'){$('.b-header').css('overflow','visible');$('.b-header-head').css('overflow','visible');$('.b-header-head__menu-list').css('display','block');$('.b-header-head__menu-list').css('background-color','#FFFFFF');mDesign=1;}else{$('.b-header-head__menu-list').css('display','none');var mDesign=1;}});if(window.innerWidth>600&&mDesign==1){mDesign=0;$('.b-header-head__menu-list-first').remove();}
$('.b-scheme').find('span.scheme-img').each(function(){var item1=$(this).find('img').data('hover');var item2=$(this).find('img').data('small');var src=$(this).find('img').attr('src');$(this).data('big',src);$(this).attr('src',item2);$(this).find('img').attr('src',item1);$(this).css('background-image',item1);});}
else{$('.b-main-menu__list-item__insert-item__big-left,b-main-menu__list-item__insert-item__big-right ').css("display","block");$('.b-main-menu__list').children().eq(1).children().children('.big').appendTo($('.b-main-menu__list').children().eq(1).children());}});