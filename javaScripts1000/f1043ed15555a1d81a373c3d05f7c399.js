(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{12:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(18);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.a.mixinEvents(this)}var t,n,r;return t=e,(n=[{key:"_dispatchEvent",value:function(e,t,n){var i=this;if("string"==typeof e)i.emit(e,{type:e,target:n||i,data:t});else if("object"===a(e)&&e.hasOwnProperty("type")){var o=e;i.emit(o.type,{target:o.target,type:o.type,data:o.data})}}},{key:"addOnceEventListener",value:function(e,t,n){this.on(e,t,n,!0)}},{key:"addEventListener",value:function(e,t,n){this.on(e,t,n)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){this.off(e)}},{key:"mixin",value:function(e){var t;i.a.mixinEvents(e),(t=void 0!==e.prototype?e.prototype:e)._dispatchEvent=function(t,n,i){if("string"==typeof t)e.emit(t,{type:t,target:i||e,data:n});else if("object"===a(t)&&t.hasOwnProperty("type")){var o=t;e.emit(o.type,{type:o.type,target:o.target,data:o.data})}},t.addOnceEventListener=function(t,n,i){e.on(t,n,i,!0)},t.addEventListener=function(t,n,i){e.on(t,n,i)},t.removeEventListener=function(t,n){e.off(t,n)},t.removeAllListeners=function(t){e.off(t)}}}])&&o(t.prototype,n),r&&o(t,r),e}()},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(12),a=n(2),o=n(0),r=n(3);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=new a.a("VIDEO-BASE"),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(h,e);var t,i,a,d=v(h);function h(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(e=d.call(this)).video=null,e._poster=null,e._pastFirstQuartile=!1,e._pastMidpoint=!1,e._pastThirdQuartile=!1,e._bufferedTime=0,e._source=null,e.fastSeekEnabled=!1,e._isEnabled=!0,e._isRemoved=!1,e.type="native",e.videoPlayCount=0,e.containerId=null,e.videoId=null,e.sourceChanged=!1,e._isAd=!1,e.buffered=0,e.ended=!1,e.paused=!1,e.muted=!0,e.fullscreen=!1,e.videoWidth=NaN,e.videoHeight=NaN,e.metadata=null,e.currentTime=0,e.duration=0,e.startTime=0,e.width=0,e.height=0,e.playing=!1,e.parent=null,e.canplay=!1,e.canplaythrough=!1,e.volume=1,e.loop=null,e.stopped=!1,e.hasStarted=!1,e.qualityChanged=!1,e.seekTime=null,e.adsCuepoints=[],e.previousCuepointIndex=-1,e.currentQuality=null,e.relatedVideos=[],e.autoplay=!1,e.waiting=!1,e._stalled=!1,e._originalSource=null,e._onLoadStart=e._onLoadStart.bind(w(e)),e._onLoadedMetadata=e._onLoadedMetadata.bind(w(e)),e._onLoadedData=e._onLoadedData.bind(w(e)),e._onDurationChanged=e._onDurationChanged.bind(w(e)),e._onPlay=e._onPlay.bind(w(e)),e._onPause=e._onPause.bind(w(e)),e._onSeeked=e._onSeeked.bind(w(e)),e._onTimeUpdate=e._onTimeUpdate.bind(w(e)),e._onWaiting=e._onWaiting.bind(w(e)),e._onPlaying=e._onPlaying.bind(w(e)),e._onProgress=e._onProgress.bind(w(e)),e._onCanPlay=e._onCanPlay.bind(w(e)),e._onCanPlayThrough=e._onCanPlayThrough.bind(w(e)),e._onVolumeChange=e._onVolumeChange.bind(w(e)),e._onEnded=e._onEnded.bind(w(e)),e._onEmptied=e._onEmptied.bind(w(e)),e._onStalled=e._onStalled.bind(w(e)),e._onError=e._onError.bind(w(e)),e._onAbort=e._onAbort.bind(w(e)),e}return t=h,(i=[{key:"_init",value:function(e,t,n){if(this._isAd=n,this.containerId=e,this.videoId=t,this.video=document.getElementById(t),this.parent=this.video.parentNode,this._source=this.video.src,this.startTime=this.video.startTime||0,this.width=this.video.clientWidth,this.height=this.video.clientHeight,this.volume=this.video.getAttribute("volume")||1,this.muted=this.video.muted,this.videoHeight=this.video.clientHeight,this.videoWidth=this.video.clientWidth,window.client.browser.chrome&&this.initHeavyAdListener(),!n){if(this.loop=!window.Playlist&&window.CurrentVideoConfig.settings.loop,this._poster=window.CurrentVideoConfig.settings.poster,!this._poster){var i=window.CurrentVideoConfig.content.posterVersions;i?window.client.browser.chrome&&i.webp?this._poster=i.webp:i.optimized&&(this._poster=i.optimized):window.CurrentVideoConfig&&window.CurrentVideoConfig.content?this._poster=window.CurrentVideoConfig.content.poster:this._poster=this.video.poster}this._poster=Object(o.u)(this._poster),f.debug("Poster",this._poster),this.currentQuality=window.CurrentVideoConfig.settings.defaultHd?"hd":"sd",this.onVideoConfigChanged()}}},{key:"initHeavyAdListener",value:function(){var e=window.id;window.addEventListener("message",(function(t){try{var n=JSON.parse(t.data),i=JSON.parse(n.report);if("pwHeavyAdIntervention"===n.id&&"bolt"===n.product&&"intervention"===i.type&&"HeavyAdIntervention"===i.body.id){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({product:n.product,type:"heavyAd",id:n.id,url:i.url,ad:!1,content:!0,reportType:i.type},i.body),r={id:e,type:"heavyAd",msgData:a};window.parent.postMessage(JSON.stringify(r),Object(o.h)())}}catch(t){}}))}},{key:"isAd",value:function(e){f.debug("isAd() ABSTRACT METHOD")}},{key:"preload",value:function(){var e=this,t=document.body.getAttribute("data-default-src");e._isAd||null!==e._source&&""!==e._source||e.setSource(t),f.debug("Preload source",{id:e.containerId,src:e._source}),e._isEnabled||e.enable(!0),e.hls&&e.hls.destroy(),e._source.indexOf(".m3u8")>-1&&!window.client.nativeHLS?(e.hlsLoading=!0,n.e(10).then(n.t.bind(null,34,7)).then((function(t){var n=t.default;e.hls=new n,e.hls.ErrorTypes=n.ErrorTypes,e.hls.ErrorDetails=n.ErrorDetails,e.hls.DefaultConfig=n.DefaultConfig,e.hls.Events=n.Events,e.hls.attachMedia(e.video),e.hls.on(e.hls.Events.MANIFEST_PARSED,e._onHLSManifestParsed.bind(e)),e.hls.loadSource(e._source)})).catch((function(e){f.error("Caught error",{message:e.message,stack:e.stack})}))):(e.video.src=e._source,window.window.client.browser.firefox>0&&e.video.setAttribute("preload","metadata"),e.video.load())}},{key:"_playVideo",value:function(){var e=this,t=e.video.play();void 0!==t&&t.then((function(){f.info("Autoplay worked, playing video")})).catch((function(t){e.pause(),f.warn("Caught Error (Play promise)",{message:t.message,stack:t.stack})}))}},{key:"_onHLSManifestParsed",value:function(e,t){f.info("HLS manifest loaded, found ".concat(t.levels.length," quality level")),window.BoltAdManager&&window.BoltAdManager.sequentialPrerollAdRequested||this.play()}},{key:"play",value:function(){f.debug("Play",{id:this.containerId}),this.show(!0),this.ended?this.replay():(this._isEnabled||this.enable(!0),this._playVideo())}},{key:"replay",value:function(){f.debug("Replay",{id:this.containerId}),this.ended=!1,this.fastSeekEnabled?(f.debug("Pseudostream replay",{id:this.containerId,startTime:this.startTime}),this.startTime>0?(this.autoplay=!0,this.seek(0)):(this.stop(),this.play())):(this.autoplay=!0,this.seek(0))}},{key:"pause",value:function(){f.debug("Pause",{id:this.containerId,time:this.currentTime}),this.paused=!0,this.video.pause()}},{key:"resume",value:function(){this.playing||(f.debug("Resume",{id:this.containerId,time:this.video.currentTime}),this.show(!0),this._playVideo())}},{key:"stop",value:function(){this.stopped||(f.debug("Stop",{id:this.containerId}),this.stopped=!0,this.video.pause(),this.video.currentTime=0)}},{key:"seek",value:function(e){var t=e/this.duration*100;this._pastThirdQuartile=t>=75,this._pastMidpoint=t>=50||this._pastThirdQuartile,this._pastFirstQuartile=t>=25||this._pastMidpoint,this._pastFirstQuartile&&f.info("Seeking past first quartile"),this._pastMidpoint&&f.info("Seeking past midpoint"),this._pastThirdQuartile&&f.info("Seeking past third quartile")}},{key:"mute",value:function(e){f.warn("ABSTRACT METHOD NO OP")}},{key:"setVolume",value:function(e){f.warn("ABSTRACT METHOD NO OP")}},{key:"remove",value:function(e){f.debug("Remove",{id:this.containerId,videoId:this.videoId}),this._isRemoved=!0,this.video&&(this._disableVideoListeners(),this.video.pause(),this.video.src="",this.video.poster="",!0===e?(this.video.parentNode.removeChild(this.video),this.video=null):this._enableVideoListeners()),this._dispatchEvent(r.a.Player.Event.REMOVED),this.removeAllListeners()}},{key:"setSource",value:function(e){e=Object(o.u)(e),this._isRemoved=!1,this._originalSource=e,this.resetQuartiles(),this.metadata=null,this.playing=!1,this.hasStarted=!1,this.paused=!1,this.ended=!1,this.sourceChanged=!0,this.duration=0,this.buffered=0,this._bufferedTime=0,this.startTime=0,this.currentTime=0,this.waiting=!1,this._dispatchEvent(r.a.Media.Event.START_TIME_CHANGED,this.startTime),this._dispatchEvent(r.a.Player.Event.CONTENT_CHANGED),this.fastSeekEnabled=Object(o.c)(e),f.debug("Pseudo streaming enabled",{id:this.containerId,fastSeek:this.fastSeekEnabled}),this._enableVideoListeners(),this._updateVideoSource(e)}},{key:"setQuality",value:function(e,t){e!==this.currentQuality&&(f.debug("setQuality",{id:this.containerId,quality:e,url:t}),this._originalSource=t,this.autoplay=!0,this.currentQuality=e,this.qualityChanged=!0,this._dispatchEvent(r.a.Player.Event.QUALITY_CHANGED,this.currentQuality),this._updateVideoSource(t))}},{key:"_updateVideoSource",value:function(e){f.warn("ABSTRACT METHOD NO OP")}},{key:"getSource",value:function(){return this._source}},{key:"size",value:function(e,t){this.video.setAttribute("width",e),this.video.setAttribute("height",t),this.width=this.video.clientWidth,this.height=this.video.clientHeight,this._dispatchEvent(r.a.Player.Event.SIZE_CHANGED)}},{key:"setFullscreen",value:function(e){e!==this.fullscreen&&(this.fullscreen=e)}},{key:"show",value:function(e){!0===e&&"block"!==this.video.style.display?(f.debug("Show video",{id:this.containerId}),this.video.style.display="block"):!1===e&&"none"!==this.video.style.display&&(f.debug("Hide video",{id:this.containerId}),this.video.style.display="none")}},{key:"hitAdCuepoint",value:function(e){this.previousCuepointIndex=window.CurrentVideoConfig.advertising.cuepoints.indexOf(e)}},{key:"unload",value:function(){var e=this;f.info("Unload video",{id:e.containerId,src:this.video.currentSrc}),e._isRemoved=!0,e._disableVideoListeners(),e.hls?e.hls.destroy():(e.video.src="",e.video.load())}},{key:"enable",value:function(e){this._isEnabled=e,!0===e?(f.info("Enable Video",{id:this.containerId}),this._enableVideoListeners(),this.setSource(this._source)):(f.info("Disable Video",{id:this.containerId}),this.unload())}},{key:"_onDurationChanged",value:function(){f.warn("ABSTRACT METHOD NO OP")}},{key:"_onPlay",value:function(){this.stopped=!1,this.ended=!1,this.hasStarted?this.paused&&(this.paused=!1,this._dispatchEvent(r.a.Media.Event.RESUME)):(f.info("Dispatching play event"),this._dispatchEvent(r.a.Media.Event.PLAY),this.hasStarted=!0)}},{key:"_onPause",value:function(){f.info("onPause",{id:this.containerId,time:this.currentTime}),this.paused=!0,this.playing=!1,this._dispatchEvent(r.a.Media.Event.PAUSED),this.stopped&&this._dispatchEvent(r.a.Media.Event.STOPPED)}},{key:"_onSeeked",value:function(){f.info("onSeeked"),this.stopped||(this._dispatchEvent(r.a.Media.Event.SEEKED),this.autoplay&&this._playVideo()),this.seekTime=null}},{key:"_onTimeUpdate",value:function(){if(this.video){if(this._stalled=!1,this.qualityChanged)f.info("Quality changed",{id:this.containerId,quality:this.qualityChanged});else if(this.currentTime=this.video.currentTime+this.startTime,this.currentTime>this.duration&&(this.currentTime=this.duration),this._dispatchEvent(r.a.Media.Event.TIME_UPDATE,this.currentTime),this._checkQuartiles(),window.client.system.android>0&&28===window.client.browser.chrome&&Math.floor(this.currentTime)===Math.floor(this.video.duration)){var e=new CustomEvent("ended");this.video.dispatchEvent(e)}}else f.error("Video is null ".concat(this.containerId))}},{key:"_onWaiting",value:function(){this.waiting=!0,this._dispatchEvent(r.a.Media.Event.WAITING)}},{key:"_onPlaying",value:function(){f.debug("onPlaying",{id:this.containerId}),this.playing=!0,this.paused=!1,this._dispatchEvent(r.a.Media.Event.PLAYING)}},{key:"_onProgress",value:function(){try{var e=this.fastSeekEnabled?this.video.buffered.end(0)+this.startTime:this.video.buffered.end(0);e!==this._bufferedTime&&(e>this._bufferedTime&&(this._bufferedTime=e),this.buffered=Math.round(100*this._bufferedTime/this.duration),this.buffered>100&&(this.buffered=100))}catch(e){this.buffered=0,this._bufferedTime=0}this._dispatchEvent(r.a.Media.Event.LOAD_PROGRESS,this.buffered)}},{key:"_onLoadedMetadata",value:function(){this.metadata||(this.metadata={duration:this.video.duration,videoWidth:this.video.videoWidth,videoHeight:this.video.videoHeight},f.debug("Video metadata",{id:this.containerId}),this._dispatchEvent(r.a.Media.Event.METADATA,this.metadata))}},{key:"_onCanPlay",value:function(){f.debug("onCanPlay",{id:this.containerId}),this.waiting=!1,this.canplay=!0,this._dispatchEvent(r.a.Player.Event.CANPLAY),this._stalled&&(f.debug("onCanPlay after stalled",{id:this.containerId}),this._stalled=!1,this._playVideo())}},{key:"_onCanPlayThrough",value:function(){this.canplaythrough=!0,this._dispatchEvent(r.a.Player.Event.CANPLAYTHROUGH)}},{key:"_onVolumeChange",value:function(){this.volume=this.video.volume,f.info("onVolumeChange",{value:this.volume}),this._dispatchEvent(r.a.Media.Event.VOLUME_CHANGED,this.volume)}},{key:"_onEnded",value:function(){this._isAd||f.debug("onEnded",{id:this.containerId}),this.ended=!0,this.playing=!1,this.paused=!1,this.hasStarted=!1,this._dispatchEvent(r.a.Media.Event.ENDED)}},{key:"_onEmptied",value:function(){this._isRemoved||this.sourceChanged||(this._isAd||f.debug("onEmptied",{id:this.containerId}),this._dispatchEvent(r.a.Media.Event.EMPTIED))}},{key:"_onStalled",value:function(){this._isRemoved||(this._stalled=!0,this.playing&&(f.debug("Video stalled, calling play",{id:this.containerId}),this._playVideo()))}},{key:"_onError",value:function(){var e="";if(!this._isRemoved){if(this.video.error.code)switch(this.video.error.code){case 1:e="USER ABORT";break;case 2:e="NETWORK ERROR";break;case 3:e="DECODE ERROR";break;case 4:e="MEDIA NOT SUPPORTED"}f.error("Video Error: ".concat(this.containerId),{message:e,errorCode:this.video.error.code}),4===this.video.error.code?window.client.browser.firefoxWithoutMp4&&this._source.indexOf(".mp4")>-1?this._dispatchEvent(r.a.Media.Event.NOT_SUPPORTED):this._dispatchEvent(r.a.Media.Event.NOT_FOUND):""===this.video.src||this._isRemoved||this.sourceChanged||this._dispatchEvent(r.a.ERROR)}}},{key:"_onLoadedData",value:function(){this._isLoading=!1,f.debug("onLoadedData",{id:this.containerId}),this._dispatchEvent(r.a.Media.Event.LOADED)}},{key:"_onLoadStart",value:function(){this.video&&(this._isLoading=!0,f.debug("onLoadStart",{id:this.containerId}),this._dispatchEvent(r.a.Media.Event.WAITING))}},{key:"_onAbort",value:function(e){f.debug("onAbort",{id:this.containerId})}},{key:"_enableVideoListeners",value:function(){f.debug("Enable video listeners",{videoId:this.videoId}),this.video.addEventListener("loadstart",this._onLoadStart),this.video.addEventListener("loadedmetadata",this._onLoadedMetadata),this.video.addEventListener("loadeddata",this._onLoadedData),this.video.addEventListener("durationchange",this._onDurationChanged),this.video.addEventListener("play",this._onPlay),this.video.addEventListener("pause",this._onPause),this.video.addEventListener("seeked",this._onSeeked),this.video.addEventListener("timeupdate",this._onTimeUpdate),this.video.addEventListener("waiting",this._onWaiting),this.video.addEventListener("playing",this._onPlaying),this.video.addEventListener("progress",this._onProgress),this.video.addEventListener("canplay",this._onCanPlay),this.video.addEventListener("canplaythrough",this._onCanPlayThrough),this.video.addEventListener("volumechange",this._onVolumeChange),this.video.addEventListener("ended",this._onEnded),this.video.addEventListener("emptied",this._onEmptied),this.video.addEventListener("stalled",this._onStalled),this.video.addEventListener("error",this._onError),this.video.addEventListener("abort",this._onAbort)}},{key:"_disableVideoListeners",value:function(){f.debug("Disable video listeners",{id:this.containerId}),this.video.removeEventListener("loadstart",this._onLoadStart),this.video.removeEventListener("loadedmetadata",this._onLoadedMetadata),this.video.removeEventListener("loadeddata",this._onLoadedData),this.video.removeEventListener("durationchange",this._onDurationChanged),this.video.removeEventListener("play",this._onPlay),this.video.removeEventListener("pause",this._onPause),this.video.removeEventListener("seeked",this._onSeeked),this.video.removeEventListener("timeupdate",this._onTimeUpdate),this.video.removeEventListener("waiting",this._onWaiting),this.video.removeEventListener("playing",this._onPlaying),this.video.removeEventListener("progress",this._onProgress),this.video.removeEventListener("canplay",this._onCanPlay),this.video.removeEventListener("canplaythrough",this._onCanPlayThrough),this.video.removeEventListener("volumechange",this._onVolumeChange),this.video.removeEventListener("ended",this._onEnded),this.video.removeEventListener("emptied",this._onEmptied),this.video.removeEventListener("stalled",this._onStalled),this.video.removeEventListener("error",this._onError),this.video.removeEventListener("abort",this._onAbort),this.video.removeEventListener("ended",this._onEnded)}},{key:"onVideoConfigChanged",value:function(){(this.playing||this.paused)&&this.enable(!1);var e=window.CurrentVideoConfig;this._poster=e.content.poster,void 0===this.loop&&void 0===window.Playlist&&(this.loop=e.settings.loop),this.adsCuepoints=void 0!==e.advertising.cuepoints?e.advertising.cuepoints.concat():[],this._dispatchEvent(r.a.Player.Event.CONFIG_CHANGED)}},{key:"resetQuartiles",value:function(){this._pastFirstQuartile=!1,this._pastMidpoint=!1,this._pastThirdQuartile=!1}},{key:"_checkQuartiles",value:function(){if(this.currentTime&&this.duration){var e=this.currentTime/this.duration*100;!this._pastFirstQuartile&&e>=25?(this._pastFirstQuartile=!0,this._dispatchEvent(r.a.Media.Event.FIRSTQUARTILE,null)):!this._pastMidpoint&&e>=50?(this._pastMidpoint=!0,this._dispatchEvent(r.a.Media.Event.MIDPOINT,null)):!this._pastThirdQuartile&&e>=75&&(this._pastThirdQuartile=!0,this._dispatchEvent(r.a.Media.Event.THIRDQUARTILE,null))}}}])&&u(t.prototype,i),a&&u(t,a),h}(i.a)},18:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(){var e=1;if(!Object.create)var t=function(){};var n=Array.prototype.slice,a={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(e){a.eventHandlers[e.guid][e.type]||(a.eventHandlers[e.guid][e.type]=[]),a.eventHandlers[e.guid][e.type].push({guid:e.guid,handler:e.handler,scope:e.scope,type:e.type,once:e.once})},addEventHandler:function(e,t,n,i){var o,r={};for(var d in"string"==typeof e?(o=n||!1,r[e]=t):(o=t||!1,r=e),r)for(var s=r[d],l=d.split(" "),u=0,c=l.length;u<c;u++){var v=l[u];a.addEvent.call(this,{guid:this._guid||this._.guid,handler:s,scope:o,type:v,once:i})}},addGuid:function(t,n){t._guid&&!n||(t._guid=e++,a.attributes[t._guid]={},a.eventHandlers[t._guid]={})},attr:function(e){return a.attributes[e]},clone:function(e){var t=a.typeOf(e);return"object"===t?a.extend({},e):"array"===t?e.slice(0):void 0},create:function(e){return Object.create?Object.create(e):(t.prototype=e,new t)},emitEvents:function(e,t,i,o){i=i||!1,o=o||this._guid;for(var r=n.call(a.eventHandlers[o][e]),d=0,s=r.length;d<s;d++){var l=a.extend({},r[d]),u=l.scope?l.scope:this;i&&(l.type=i),l.scope=u,l.handler.call(l.scope,t,l),l.once&&a.removeEventHandler.call(this,l.type,l.handler)}},extend:function(){for(var e=n.call(arguments),t=e.shift(),i=0,a=e.length;i<a;i++){var o=e[i];for(var r in o)t[r]=o[r]}return t},extendThis:function(){var e=n.call(arguments);return e.unshift(this),a.extend.apply(this,e)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},removeAttribute:function(e,t){t=t||!1;for(var n=a.trim(e).split(" "),i={},o=0,r=n.length;o<r;o++){var d=a.trim(n[o]);d&&(i.key=d,i.oldValue=a.attr(this._guid)[d],delete a.attr(this._guid)[d],t||(this.emit("change",d),this.emit("change:"+d),this.emit("mutate",i),this.emit("mutate:"+d,i),this.emit("remove",d),this.emit("remove:"+d)),delete i.oldValue)}},removeEventHandler:function(e,t){var n=a.eventHandlers[this._guid];if(e&&t){if(!(n=n[e]))return;for(var i,o=0,r=n.length;o<r;o++)(i=n[o].handler)&&i===t&&(n.splice(o--,1),r--)}else e?delete n[e]:a.eventHandlers[this._guid]={}},setAttribute:function(e,t,n){n=n||!1;var i=this.has(e),o=a.attr(this._guid)[e];if(t!==o&&(a.attr(this._guid)[e]=t,!n)){this.emit("change",e),this.emit("change:"+e,t);var r={key:e,newValue:t,oldValue:o||null};this.emit("mutate",r),this.emit("mutate:"+e,r);var d=i?"update":"create";this.emit(d,e),this.emit(d+":"+e,t)}},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(e){return null==e?String(e):Object.prototype.toString.call(e).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(e,t,n){var i=this.get(e),o=a.typeOf(i);"object"!==o&&"array"!==o||(i=a.clone(i));var r=t.call(this,i,e);a.setAttribute.call(this,e,r,n||!1)}},o={emit:function(e,t){t=void 0===t?null:t;for(var n=e.split(" "),i=0,o=n.length;i<o;i++){var r=n[i];a.eventHandlers[-1].all&&a.emitEvents.call(this,"all",t,r,-1),a.eventHandlers[-1][r]&&a.emitEvents.call(this,r,t,r,-1),"number"==typeof this._guid&&(a.eventHandlers[this._guid].all&&a.emitEvents.call(this,"all",t,r),a.eventHandlers[this._guid][r]&&a.emitEvents.call(this,r,t))}},off:function(){a.removeEventHandler.apply(this,arguments)},on:function(){a.addEventHandler.apply(this,arguments)}};a.Module=function(){},a.Module.prototype={each:function(e,t){var n=a.attr(this._guid);for(var i in n){var o=n[i];e.call(t||this,o,i)}},extend:function(){return a.extendThis.apply(this,arguments)},filter:function(e){var t=[],n=a.attr(this._guid);for(var i in n)e.call(this,n[i],i)&&t.push(n[i]);return t},get:function(e){if("string"==typeof e){if(arguments.length>1){for(var t={},n=0,i=arguments.length;n<i;n++){var o=arguments[n];t[o]=this.get(o)}return t}return this.has(e)?a.attr(this._guid)[e]:null}if("function"==typeof e){var r=this.filter(e);return r.length?r[0]:null}},getAll:function(){return a.clone(a.attr(this._guid))},getAllAsArray:function(){var e=[],t=a.attr(this._guid);for(var n in t){var i=t[n];"object"!==a.typeOf(i)||i.id||(i.id=n),e.push(i)}return e},has:function(e){return void 0!==a.attr(this._guid)[e]},map:function(e,t){var n=[];return this.each((function(i,a){n.push(e.call(t||this,i,a))}),t||this),n},push:function(e,t){if("array"===a.typeOf(e))for(var n=0,i=e.length;n<i;n++)a.setAttribute.call(this,a.makeUuid(),e[n],t||!1);else a.setAttribute.call(this,a.makeUuid(),e,t||!1);return this},remove:function(e,t){return void 0===e?(a.attributes[this._guid]={},this.emit("change remove")):"function"==typeof e?this.each((function(n,i){e(n)&&a.removeAttribute.call(this,i,t)})):a.removeAttribute.call(this,e,t||!1),this},set:function(e,t,n){if("object"===i(e))for(var o in e)a.setAttribute.call(this,o,e[o],t||!1);else a.setAttribute.call(this,e,t,n||!1);return this},size:function(){var e=0,t=a.attr(this._guid);for(var n in t)e++;return e},update:function(e,t,n){return"string"==typeof e?a.updateAttribute.call(this,e,t,n||!1):"function"==typeof e&&this.each((function(t,n){a.updateAttribute.call(this,n,e)})),this}};var r={_:a,extend:function(){return a.extendThis.apply(a.Module.prototype,arguments)},mixinEvents:function(e){return e=e||{},a.addGuid(e),a.extend(e,o)},on:function(){a.addEventHandler.apply(this,arguments)},version:"0.8.1"};return window.Stapes=r,r}()},19:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var i=n(16),a=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=new(n(2).a)("IOS-VIDEO"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,i,o=l(u);function u(e,t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),h(c(i=o.call(this)),"hasBeenTouched",!1),h(c(i),"_isEnabled",!1);var a=c(i);return a._init(e,t,n),window.PlayerSettings.autoplay&&(a.hasBeenTouched=!0,a.mute(!0)),a.video.addEventListener("webkitendfullscreen",(function(){a.video.controls&&(a.video.controls=!1)})),i}return t=u,(n=[{key:"_updateVideoSource",value:function(e){w.debug(this.containerId,"'updateSource:' ".concat(e,", 'autoplay:' ").concat(this.autoplay));var t=-1===e.indexOf("?")?"?":"&";this.qualityChanged&&this.fastSeekEnabled&&this.currentTime>0&&(t=-1===e.indexOf("?")?"?":"&",e="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)),e===this.video.src&&(t=-1===e.indexOf("?")?"?":"&",e=this._source+t+Date.now()),this._source=e,this.qualityChanged&&this.hasStarted&&this.preload()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"seek",value:function(e){w.debug("Seek",e),d(v(u.prototype),"seek",this).call(this,e);var t=this;t.seekTime=e;var n=function(){var n=-1===t._originalSource.indexOf("?")?"?":"&";t.startTime=e,t._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e),t.video.src=e>0?"".concat(t._originalSource+n,"ec_seek=").concat(e,"&start=").concat(e):t._source,t.video.load()};t.fastSeekEnabled?t.startTime>0?n():e<=t._bufferedTime?t.video.currentTime=e:n():(t.video.currentTime=e,t.playing||t.hasBeenTouched&&t.play())}},{key:"_onDurationChanged",value:function(){w.debug("On duration changed",{id:this.containerId,action:"durationChanged",duration:this.video.duration}),this.sourceChanged?(this.duration=this.video.duration,this._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,this.duration),w.debug("On duration changed",{id:this.containerId,action:"sourceChanged",duration:this.video.duration}),this.sourceChanged=!1,this.hasBeenTouched&&this.autoplay&&this.play()):this.qualityChanged?w.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}):this.seekTime?(w.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),this.fastSeekEnabled&&(this.seekTime=null,this.hasBeenTouched&&this.play())):this.autoplay&&this.hasBeenTouched&&(w.debug("Duration changed & play"),this.play())}},{key:"_onLoadedData",value:function(){if(this.qualityChanged)w.debug("On loaded data: new quality"),this.qualityChanged=!1,this.fastSeekEnabled?(this.startTime=this.currentTime,this._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,this.currentTime),this.hasBeenTouched&&this.play()):this.seek(this.currentTime);else if(w.debug("onLoadedData"),d(v(u.prototype),"_onLoadedData",this).call(this),window.client.system.ios&&window.PlayerView.fullscreen)try{this.video.webkitEnterFullscreen()}catch(e){w.warn("Caught Error",{message:e.message,stack:e.stack}),window.PlayerView.fullscreen=!1,window.PlayerView.setFullscreen(!1)}}},{key:"touch",value:function(){w.debug("Touch",{videoId:this.videoId}),this.enable(!1),this.hasBeenTouched=!0}},{key:"mute",value:function(e){this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED)}}])&&r(t.prototype,n),i&&r(t,i),u}(i.a)},20:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var i=n(16),a=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=new(n(2).a)("MOBILE-VIDEO"),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,i,o=l(u);function u(e,t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var a=c(i=o.call(this));return a._init(e,t,n),a.hasBeenTouched=!1,a._isEnabled=!1,window.client.system.android&&window.PlayerSettings.autoplay&&(a.hasBeenTouched=!0,a.mute(!0)),window.PlayerSettings.automute&&a.video.addEventListener("webkitbeginfullscreen",(function(){a.mute(!1)})),i}return t=u,(n=[{key:"_init",value:function(e,t,n){d(v(u.prototype),"_init",this).call(this,e,t,n),h.debug("Init",{id:this.containerId})}},{key:"_updateVideoSource",value:function(e){h.debug("Update source",{id:this.containerId,src:e,currentSrc:this.video.src});var t=-1===e.indexOf("?")?"?":"&";this.qualityChanged&&this.fastSeekEnabled&&this.currentTime>0&&(t=-1===e.indexOf("?")?"?":"&",e="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)),e===this.video.src&&(t=-1===e.indexOf("?")?"?":"&",e=this._source+t+Date.now()),this._source=e,this.qualityChanged&&this.hasStarted&&this.preload()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"seek",value:function(e){h.debug("Seek",{val:e}),d(v(u.prototype),"seek",this).call(this,e);var t=this;t.seekTime=e;var n=function(){t.startTime=e,t._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e);var n=-1===t._originalSource.indexOf("?")?"?":"&";t.video.src=e>0?"".concat(t._originalSource+n,"ec_seek=").concat(e,"&start=").concat(e):t._source,t.video.load()};t.fastSeekEnabled?t.startTime>0?n():e<=t._bufferedTime?t.video.currentTime=e:n():(t.video.currentTime=e,t.playing||t.hasBeenTouched&&t.play())}},{key:"_onDurationChanged",value:function(){h.debug("On duration changed",{id:this.containerId,action:"durationChanged",duration:this.video.duration}),this.sourceChanged?(this.duration=this.video.duration,this._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,this.duration),h.debug("On duration changed",{id:this.containerId,action:"sourcechanged",duration:this.video.duration}),this.sourceChanged=!1,this.hasBeenTouched&&this.autoplay&&this.play()):this.qualityChanged?(h.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}),this.fastSeekEnabled?(this.startTime=this.currentTime,this._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,this.currentTime),this.hasBeenTouched&&this.video.play()):this.seek(this.currentTime),this.qualityChanged=!1):this.seekTime?(h.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),this.fastSeekEnabled&&(this.seekTime=null,this.hasBeenTouched&&this.video.play())):this.autoplay&&this.hasBeenTouched&&(h.debug("Duration changed & play"),this.video.play())}},{key:"touch",value:function(){h.debug("Touch",{videoId:this.videoId}),this.enable(!1),this.hasBeenTouched=!0}},{key:"mute",value:function(e){window.client.system.android&&(this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED))}}])&&r(t.prototype,n),i&&r(t,i),u}(i.a)},21:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var i=n(16),a=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=new(n(2).a)("VIDEO"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,i,o=l(u);function u(e,t,n,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(a=o.call(this))._init(e,t,n,i),a}return t=u,(n=[{key:"_init",value:function(e,t,n){d(c(u.prototype),"_init",this).call(this,e,t,n),this.video.oncontextmenu=function(){return!1},this._source&&(this.setSource(this._source),v.debug("Pseudo streaming enabled",{fastSeek:this.fastSeekEnabled})),this._enableVideoListeners()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"mute",value:function(e){v.info("mute",e),this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(a.a.Media.Event.MUTED):this._dispatchEvent(a.a.Media.Event.UNMUTED)}},{key:"setVolume",value:function(e){var t=void 0===e?1:parseFloat(e);v.info("set volume",t),this.video.volume=t,this.volume=this.video.volume}},{key:"_updateVideoSource",value:function(e){if(v.debug("Update source",{id:this.containerId,url:e}),this._source=e,this.qualityChanged){if(this.fastSeekEnabled&&this.currentTime>0){var t=-1===e.indexOf("?")?"?":"&";this._source="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)}this.hasStarted&&this.preload()}}},{key:"_onDurationChanged",value:function(){var e=this;e.sourceChanged?(e.duration=e.video.duration,e._dispatchEvent(a.a.Media.Event.DURATION_CHANGE,e.duration),v.debug("On duration changed",{id:this.containerId,action:"sourceChanged",duration:this.video.duration}),e.sourceChanged=!1,!e.autoplay||window.BoltAdManager&&window.BoltAdManager.sequentialPrerollAdRequested||e.play()):e.qualityChanged?(v.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}),e.fastSeekEnabled?(e.startTime=e.currentTime,e._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e.currentTime),e.play()):e.seek(e.currentTime),e.qualityChanged=!1):e.seekTime?(v.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),e.fastSeekEnabled&&(e.seekTime=null,e.play())):e.autoplay&&window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested&&e.play()}},{key:"seek",value:function(e){v.debug("Seek",e),d(c(u.prototype),"seek",this).call(this,e);var t=this;t.seekTime=e;var n=function(){t.startTime=e,t._dispatchEvent(a.a.Media.Event.START_TIME_CHANGED,e);var n=-1===t._originalSource.indexOf("?")?"?":"&";window.client.browser.firefox>0?(t._disableVideoListeners(),t.video.addEventListener("emptied",(function i(){v.info("FF video reset"),t.video.removeEventListener("emptied",i),t.video.src=e>0?"".concat(t._originalSource+n,"ec_seek=").concat(e,"&start=").concat(e):t._source,t._enableVideoListeners(),t.video.load()})),t.video.src=""):(t.video.src=e>0?"".concat(t._originalSource+n,"ec_seek=").concat(e,"&start=").concat(e):t._source,t.video.load())};t.fastSeekEnabled?t.startTime>0?n():e<=t._bufferedTime?(v.info("Seeking pseudo-streamed video within the buffer:".concat(e," of ").concat(t._bufferedTime)),t.video.currentTime=e,t.seekTime=null):n():(t.video.currentTime=e,t.seekTime=null,t.playing||t.play())}}])&&r(t.prototype,n),i&&r(t,i),u}(i.a)},24:function(e,t,n){"use strict";(function(e){var i=new(n(2).a)("MODULE-FACTORY"),a={buildLoadingIndicator:function(t){n.e(14).then(n.bind(null,27)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"LoadingIndicator"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildWatermark:function(t){n.e(21).then(n.bind(null,29)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"Watermark"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildContent:function(t){n.e(18).then(n.bind(null,35)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),n.invalidate(),t.call(null,n),i.debug("Module ready",{module:"Content"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildVolume:function(t){Promise.all([n.e(0),n.e(19)]).then(n.bind(null,22)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"Volume"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildControlBar:function(t){Promise.all([n.e(0),n.e(19)]).then(n.bind(null,30)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"ControlBar"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildScrubber:function(t){Promise.all([n.e(0),n.e(23)]).then(n.bind(null,31)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"Scrubber"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildRelatedVideos:function(t,a){n.e(22).then(n.bind(null,32)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(a),t.call(null,n),i.debug("Module ready",{module:"RelatedVideosUI"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildAgeGate:function(t){n.e(3).then(n.bind(null,33)).then((function(e){var n=new(0,e.default)(window.ContentPlayer);n.init(),t.call(null,n),i.debug("Module ready",{module:"AgeGateUI"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildAppearanceManager:function(t){n.e(17).then(n.bind(null,36)).then((function(e){var n=new(0,e.default);n.init(),t.call(null,n),i.debug("Module ready",{module:"AppearanceManager"})})).catch((function(t){i.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))}};t.a=a}).call(this,n(25)(e))},25:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},26:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var i=n(2),a=n(12),o=n(3),r=n(0);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=new i.a("AD-SESSION"),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(d,e);var t,n,i,a=u(d);function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),w(v(e=a.call(this)),"_startData",null),w(v(e),"_started",!1),w(v(e),"_completed",!1),w(v(e),"_faied",!1),w(v(e),"_aborted",!1),w(v(e),"_adloaded",!1),e}return t=d,(n=[{key:"reset",value:function(){y.info("reset"),this._startData=null,this._started=!1,this._completed=!1,this._failed=!1,this._aborted=!1,this._adloaded=!1}},{key:"getElapsedSecondsSinceStart",value:function(e){try{var t=(e.getTime()-this._startData.start_ts.getTime())/1e3;return parseFloat(t.toFixed(1))}catch(e){return-1}}},{key:"start",value:function(e){y.info("is backfilling? ".concat(e));var t=this;t._started&&y.warn("Previous session is still active"),t._started=!0;var n=window.BoltAdManager;t._startData={timing:n&&n.timing,publisher_id:Object(r.g)()||-1,video_id:window.CurrentVideoConfig.content.videoId||-1,player_width:parseFloat(window.Skin.clientWidth.toFixed(2)),player_height:parseFloat(window.Skin.clientHeight.toFixed(2)),fullscreen:window.PlayerView.fullscreen,start_ts:new Date,cuepoint:n&&n.cuepoint,server_type:n&&n.selectedServer.type,tag_type:n&&n.selectedServer.tagType,backfilling:e},t._dispatchEvent(o.a.Ad.Event.SESSION_START,t._startData)}},{key:"abort",value:function(){var e=this;if(e._started&&!e._aborted){e._aborted=!0,window.BoltAdManager._adSessionCount++;var t=new Date,n={timestamp:t,et_session_start:e.getElapsedSecondsSinceStart(t)};e._dispatchEvent(o.a.Ad.Event.SESSION_ABORT,n),e.reset(),y.info("Abort")}}},{key:"fail",value:function(){var e=this;if(e._started&&!e._failed){e._failed=!0,window.BoltAdManager._adSessionCount++;var t=new Date,n={timestamp:t,et_session_start:e.getElapsedSecondsSinceStart(t)};y.info("Ad Session failed",{data:n}),e._dispatchEvent(o.a.Ad.Event.SESSION_FAIL,n),e.reset(),y.info("Fail")}}},{key:"complete",value:function(){var e=this;if(e._started&&!e._completed){e._completed=!0,window.BoltAdManager._adSessionCount++;var t=new Date,n={timestamp:t,et_session_start:e.getElapsedSecondsSinceStart(t)};e._dispatchEvent(o.a.Ad.Event.SESSION_END,n),e.reset(),y.info("Complete")}}}])&&s(t.prototype,n),i&&s(t,i),d}(a.a)},56:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n(1),o=n(18),r=new i.a("PLAYER-STATE");function d(){this._data={},this._state=null,this._previousState=null,this._waitingStateDelay=null,o.a.mixinEvents(this),this.delayedWaitingState=this.delayedWaitingState.bind(this)}d.prototype={STATE_CHANGED:"stateChanged",AGE_GATE:"age-gate",START:"start",WAITING:"waiting",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",ERROR:"error",RELATED_VIDEOS:"related-videos",delayedWaitingState:function(e){var t=this;clearTimeout(t._waitingStateDelay),t._waitingStateDelay=setTimeout((function(){t.state=d.WAITING}),e)},get previousState(){return this._previousState},get state(){return this._state},set state(e){if(e){e!==this._state&&(clearTimeout(this._waitingStateDelay),e===this.WAITING&&this._state===this.PLAYING||Object(a.d)(window.document.body,"bolt-state-"+this._state),this._previousState=this._state,this._state=e,r.info("Player state:",{state:this._state,prevState:this._previousState}),Object(a.a)(window.document.body,"bolt-state-"+e),this.emit(this.STATE_CHANGED))}},get data(){return this._data},set data(e){this._data=e}};var s=d,l=n(3),u=n(0),c=n(12);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,e);var t,n,i,a=y(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).data=null,e.autoPaused=!1,e.closeButtonClicked=!1,e.userDidPause=!1,e}return t=o,(n=[{key:"update",value:function(e){var t=this,n=!0;t.data&&(n=t.data.top!==e.top||t.data.left!==e.left||t.data.right!==e.right||t.data.bottom!==e.bottom||t.data.percent!==e.percent),n&&(this.data=e,this._dispatchEvent("changed",this.data))}},{key:"requestMetrics",value:function(){var e={type:"zeus_event",name:"requestViewabilityMetrics",id:window.id};window.parent.postMessage(JSON.stringify(e),Object(u.h)())}}])&&h(t.prototype,n),i&&h(t,i),o}(c.a);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=new i.a("VIEW-EVENT-HANDLER"),b=function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"controller",void 0),g(this,"view",void 0),g(this,"_handleMediaEvents",(function(e){var t=i,n=e.target;e.type===l.a.Media.Event.PLAY?n.isAd()||window.PlayerState.delayedWaitingState(500):e.type===l.a.Media.Event.PLAYING?(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerSettings.minimumViewability&&(t.controller.viewability.data&&t.controller.viewability.data.percent&&t.controller.viewability.data.percent<window.PlayerSettings.minimumViewability&&(t.controller.viewability.userDidPause||t.controller.viewability.closeButtonClicked)?_.info("Viewability metrics changed",{msg:"below threshold",action:"defer autoplay",value:{inView:t.controller.viewability.data.percent}}):t.controller.viewability.userDidPause||(t.controller.viewability.autoPaused=!1)),n.isAd()||void 0===document.visibilityState||"hidden"!==document.visibilityState||t.controller.pause()):e.type===l.a.Media.Event.PAUSED?window.PlayerState.state=window.PlayerState.PAUSED:e.type===l.a.Media.Event.RESUME||(e.type===l.a.Media.Event.ENDED?(window.PlayerState.state=window.PlayerState.ENDED,n.isAd()||t.controller._adEnded()):e.type===l.a.Media.Event.DURATION_CHANGE?(window.PlayerState.data.duration=window.ContentPlayer.duration,!n.isAd()&&window.CurrentVideoConfig.advertising.on?(t.controller._overlayAdCueFinder.reset(!0,window.ContentPlayer.duration),window.BoltAdManager&&window.BoltAdManager.prefetchEnabled&&window.ContentPlayer.duration>=45&&window.BoltAdManager.prefetchAds("overlay")):window.AdBlockDetected&&t.controller._overlayAdCueFinder.reset(!0,window.ContentPlayer.duration)):e.type===l.a.Media.Event.TIME_UPDATE?n.playing&&!n.paused&&(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerState.data.currentTime=window.ContentPlayer.currentTime,t.controller._onTimeUpdated()):e.type===l.a.Media.Event.LOADED||(e.type===l.a.Media.Event.WAITING?n.isAd()?window.PlayerState.state=window.PlayerState.WAITING:window.PlayerState.delayedWaitingState(500):e.type===l.a.Media.Event.MUTED?(window.PlayerSettings.automute=!0,window.PlayerState.data.muted=window.PlayerSettings.automute):e.type===l.a.Media.Event.UNMUTED?(window.PlayerSettings.automute=!1,window.PlayerState.data.muted=window.PlayerSettings.automute):e.type===l.a.Media.Event.VOLUME_CHANGED?(window.PlayerSettings.volume=e.data,window.PlayerState.data.currentVolume=window.PlayerSettings.volume):e.type===l.a.Media.Event.SEEKED&&window.PlayerState.previousState===window.PlayerState.PAUSED&&(window.PlayerState.state=window.PlayerState.previousState)))})),g(this,"_handleUIEvents",(function(e){var t,n=i,a=n.view.currentPlayer;window.PlayerState;switch(e.type){case l.a.UI.Event.REPLAY:case l.a.UI.Event.PLAYPAUSE:n.controller.togglePlayPause();break;case l.a.UI.Event.TOGGLE_MUTE:if(t=!a.muted,a.mute(t),a.isAd()?window.ContentPlayer.mute(t):window.BoltAdManager&&window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.muted=t),!1===t&&0===parseFloat(a.volume)){var o=parseFloat(a.volume.toFixed(2));a.setVolume(o||1)}break;case l.a.UI.Event.CHANGE_VOLUME:a.setVolume(e.data),a.mute(0===e.data);break;case l.a.UI.Event.SEEK:n.controller.seek(e.data);break;case l.a.UI.Event.RELATED_VIDEO_SELECTED:a.autoplay=!0,n.controller.relatedVideosHelper.loadSelectedRelatedVideo(e.data);break;case l.a.UI.Event.AGE_GATE_FAILED:window.PlayerState.state=window.PlayerState.AGE_GATE;break;case l.a.UI.Event.IOS_FULLSCREEN_CHANGED:}}));var a=this;a.view=t,a.controller=n,t.addEventListener(l.a.Media.Event.PLAY,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.PLAYING,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.PAUSED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.RESUME,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.DURATION_CHANGE,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.ENDED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.TIME_UPDATE,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.LOADED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.MUTED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.UNMUTED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.VOLUME_CHANGED,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.WAITING,a._handleMediaEvents),t.addEventListener(l.a.Media.Event.SEEKED,a._handleMediaEvents),t.addEventListener(l.a.UI.Event.REPLAY,a._handleUIEvents),t.addEventListener(l.a.UI.Event.PLAYPAUSE,a._handleUIEvents),t.addEventListener(l.a.UI.Event.TOGGLE_MUTE,a._handleUIEvents),t.addEventListener(l.a.UI.Event.CHANGE_VOLUME,a._handleUIEvents),t.addEventListener(l.a.UI.Event.SEEK,a._handleUIEvents),t.addEventListener(l.a.UI.Event.RELATED_VIDEO_SELECTED,a._handleUIEvents),t.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,a._handleUIEvents),t.addEventListener(l.a.UI.Event.IOS_FULLSCREEN_CHANGED,a._handleUIEvents)},A=n(4);function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=new i.a("CONTENT-HELPER"),S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller=t}var t,n,i;return t=e,(n=[{key:"loadVideoWithQuality",value:function(e,t,n,i){var a=window.PlayerView.currentPlayer;if(e!==a.currentQuality||n){var o=a.getSource(),r=Object(u.j)(t,o,e);if(r){var d=r.quality,s=r.source;a.fastSeekEnabled=Object(u.c)(s),m.debug("Load video with quality",{oldSrc:o,newSrc:s,quality:d,autoplay:i,fastSeekEnabled:a.fastSeekEnabled}),a.autoplay=i,!0===n?(m.debug("loadVideoQuality",{quality:d}),a.currentQuality=d,a.setSource(s),a.preload(),window.PlayerState.delayedWaitingState(500)):(m.debug("loadVideoQuality",{quality:d}),a.setQuality(d,s),window.PlayerState.delayedWaitingState(500)),window.PlayerSettings.defaultHd="hd"===e,window.PlayerView.enableControls(!0)}}else m.debug("secleting the same video")}},{key:"loadNewVideo",value:function(e,t){var n=this;window.CurrentVideoConfig=e;var i=function(){if(window.CurrentVideoConfig.settings=Object(u.t)(window.CurrentVideoConfig.settings,window.PlayerSettings),Object(a.e)(),window.CurrentVideoConfig.advertising.on&&window.CurrentVideoConfig.advertising.cuepoints&&(window.CurrentVideoConfig.advertising.cuepoints=Object(u.y)(window.CurrentVideoConfig.advertising.cuepoints)),window.Playlist)for(var i=0;i<window.Playlist.length;i++)if(window.Playlist[i].videoId===e.content.videoId){window.CurrentPlaylistIndex=i,m.debug("Current playlist index",window.CurrentPlaylistIndex);break}m.info("Load new video",{config:e}),Object(u.w)(e.content.media,(function(i){void 0!==e.content.media.f4m?(m.debug("Processed media",{media:i}),i&&(e.content.media=i)):(e.content.media=i,m.debug("Transformed media",{media:e.content.media})),m.debug("Media data",{media:e.content.media}),window.CurrentVideoConfig.settings.minAge>0?(Object(A.b)(l.a.UI.POSTER),window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_PASSED,(function(){t?(m.debug("Age gate",{val:"passed"}),n.controller.play((function(){n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)}))):(window.PlayerState.state=window.PlayerState.START,m.debug("Age gate",{val:"passed"}),n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t))})),window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_FAILED,(function(){window.PlayerState.state=window.PlayerState.AGE_GATE}))):t?(m.info("No age-gate"),window.PlayerState.state=window.PlayerState.START,n.controller.playPrerollAd({failedOrCompleteCallback:function(){n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)}})):(window.PlayerState.state=window.PlayerState.START,n.loadVideoWithQuality(window.PlayerView.currentPlayer.currentQuality,e.content.media,!0,t)),window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested&&window.PlayerView.currentPlayer.onVideoConfigChanged()}))};window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested?window.BoltAdManager.init(i):i()}},{key:"loadNewVideoConfig",value:function(e,t){var n=this;Object(u.q)(e,(function(e){window.videoConfigChanged=!0,n.loadNewVideo(e,t)}),(function(){m.error("Failed to load video config: ".concat(e))}))}}])&&P(t.prototype,n),i&&P(t,i),e}();function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=new i.a("RELATED-VIDEOS-HELPER"),O=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"_relatedVideosFetched",(function(e){var t=n;if(e){var i="string"==typeof e?JSON.parse(e):e;window.RelatedVideos=i,window.RelatedVideos.length>0?(t.playerView.setRelatedVideosFetched(!0),t.playerView.setRelatedVideos(window.RelatedVideos),M.debug("Related videos",window.RelatedVideos)):(t._skipRelatedVideos(),M.debug("No related videos found"))}else t._skipRelatedVideos()})),C(this,"_skipRelatedVideos",(function(){n.playerView.setRelatedVideosFetched(!0),n.playerView.setRelatedVideos(null)})),this.contentHelper=t,this.playerView=window.PlayerView}var t,n,i;return t=e,(n=[{key:"fetch",value:function(){var e=this;window.CurrentVideoConfig.related?e.playerView.isRelatedVideoListFetched()||window.PlayerState.state!==window.PlayerState.PLAYING||(M.info("Fetching related videos"),e.playerView.setRelatedVideosFetched(!0),Object(u.F)({url:window.CurrentVideoConfig.related,method:"get",dataFormat:"json"}).then((function(t){e._relatedVideosFetched(t.data)})).catch(e._skipRelatedVideos)):(e._skipRelatedVideos(),M.debug("No related videos"))}},{key:"shouldAttemptPrefetch",value:function(){this.playerView=window.PlayerView;var e=this.playerView.currentPlayer;if(!window.CurrentVideoConfig.related)return!1;var t=!this.playerView.isRelatedVideoListFetched()&&0!==e.duration&&e.currentTime>e.duration-l.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS;return M.debug("Should attempt prefetching related videos",{value:!!t}),t}},{key:"showRelatedVideosMenu",value:function(){return!!this.playerView.isRelatedVideoListFetched()&&(Array.isArray(window.RelatedVideos)&&window.RelatedVideos.length>0?(M.debug("Show related videos"),this.playerView.showRelatedVideosMenu(),window.PlayerState.state=window.PlayerState.RELATED_VIDEOS):(M.debug("No related videos"),window.PlayerState.state=window.PlayerState.START),!0)}},{key:"loadSelectedRelatedVideo",value:function(e){var t;this.playerView.setRelatedVideosFetched(!1),window.PlayerState.delayedWaitingState(500);for(var n=0;n<window.RelatedVideos.length&&(t=window.RelatedVideos[n]).videoId!==e;n++);M.debug("Related video to load",{videoId:t.videoId}),this.contentHelper.loadNewVideoConfig(t.config,!0)}}])&&T(t.prototype,n),i&&T(t,i),e}();function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L=new i.a("FRAME-PLAYLIST-HELPER"),I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentHelper=t}var t,n,i;return t=e,(n=[{key:"processPlaylist",value:function(){var e=window.Playlist;if(window.CurrentPlaylistIndex<e.length-1){var t=e[++window.CurrentPlaylistIndex],n=!!window.PlayerSettings.playlistPlaythrough;L.info("Process playlist, player settings:",window.PlayerSettings),this.loadPlaylistVideo(t,n)}else window.PlayerState.state=window.PlayerState.ENDED}},{key:"loadPlaylistVideo",value:function(e,t){var n;window.PlayerState.delayedWaitingState(500),L.debug("Load playlist video",e),window.PlayerView.enableControls(!1),window.BoltAdManager&&window.BoltAdManager.abort(),(null===(n=window.BoltAdManager)||void 0===n?void 0:n.sequentialPrerollAdRequested)||window.ContentPlayer.unload(),this.contentHelper.loadNewVideoConfig(e.config,t)}}])&&k(t.prototype,n),i&&k(t,i),e}();function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V=new i.a("OVERLAY-AD-CUE-FINDER"),R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nextVideoAdCuepoint=0,this.lastVideoAdCuepoint=0,this.skip=!1,this._lastAttempt=0,this._videoDuration=0}var t,n,i;return t=e,(n=[{key:"hasCueForTime",value:function(e,t,n){var i=this,a=i.videoDuration>this.MIN_DURATION&&t>=this.MIN_WIDTH&&n>=this.MIN_HEIGHT,o=Math.floor(e);return a&&(a=i.videoDuration-o>this.MIN_DURATION)&&(a=o-i.lastVideoAdCuepoint>=15)&&i.lastAttempt>0&&(a=o-i.lastAttempt>=i.AD_INTERVAL),a&&i.nextVideoAdCuepoint>0&&(a=i.nextVideoAdCuepoint-o>=this.MIN_DURATION),a&&(i._lastAttempt=o),a}},{key:"reset",value:function(e,t){t||V.error("Null video duration"),this._videoDuration=t,this.lastVideoAdCuepoint=0,this.nextVideoAdCuepoint=0,e&&(this.skip=!1,this.lastAttempt=0)}},{key:"lastAttempt",get:function(){return this._lastAttempt},set:function(e){this._lastAttempt=Math.floor(e)}},{key:"videoDuration",get:function(){return this._videoDuration}},{key:"MIN_WIDTH",get:function(){return 327}},{key:"MIN_HEIGHT",get:function(){return 340}},{key:"AD_INTERVAL",get:function(){return 420}},{key:"MIN_DURATION",get:function(){return 45}}])&&D(t.prototype,n),i&&D(t,i),e}(),N=new i.a("FRAME-AD-HELPER");function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=new i.a("CONTROLLER"),H=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,"viewEventHandler",void 0),U(this,"contentHelper",void 0),U(this,"relatedVideosHelper",void 0),U(this,"playlistHelper",void 0),U(this,"_overlayAdCueFinder",void 0),U(this,"_shouldRequestPreroll",(function(e){var n=e.contentPlayer,i=void 0===n?window.ContentPlayer:n,a=e.adMgr,o=void 0===a?window.BoltAdManager:a;return!window.DebugMode.noPreroll&&o&&t._prerollEnabled&&window.CurrentVideoConfig.advertising.on&&(i.videoPlayCount-1)%i.videoAdRatio==0})),U(this,"_onViewabilityMetricsChanged",(function(e){var n=t,i=e.data,a=window.PlayerSettings.minimumViewability;window.PlayerView.currentPlayer&&a&&(i.percent<a?window.PlayerState.state===window.PlayerState.PLAYING&&(n.viewability.userDidPause||n.viewability.closeButtonClicked)?(G.info("Viewability metrics changed",{msg:"below threshold",action:"pause"}),n.pause(!0)):n.viewability.userDidPause||(n.viewability.autoPaused=!1):window.PlayerState.state===window.PlayerState.PAUSED&&n.viewability.autoPaused?(G.info("Viewability metrics changed",{msg:"above threshold",action:"resume"}),n.resume()):window.PlayerState.state===window.PlayerState.START&&n.autoplayWhenViewabilityMetricsChanged&&(G.info("Viewability metrics changed",{msg:"above threshold",action:"autoplay"}),n.autoplayWhenViewabilityMetricsChanged=!1,n.playPrerollAd({})))})),this.currentVideoConfig=window.CurrentVideoConfig,this.replay=this.replay.bind(this),this.viewability=new E,this.contentHelper=new S(this),this.relatedVideosHelper=new O(this.contentHelper),this.playlistHelper=new I(this.contentHelper),this._overlayAdCueFinder=new R}var t,n,i;return t=e,(n=[{key:"_doStartUp",value:function(){var e=this;if(window.BoltAdManager){window.BoltAdManager.addEventListener(l.a.Ad.Event.VMAP_CUEPOINTS_CHANGED,(function(t){e.currentVideoConfig.advertising.cuepoints||(e.currentVideoConfig.advertising.cuepoints=[]),e.currentVideoConfig.advertising.cuepoints=e.currentVideoConfig.advertising.cuepoints.concat(t.data),e.currentVideoConfig.advertising.cuepoints=Object(u.y)(Object(u.l)(e.currentVideoConfig.advertising.cuepoints)),window.ContentPlayer&&(window.ContentPlayer.adsCuepoints=e.currentVideoConfig.advertising.cuepoints.concat())}));var t=e.currentVideoConfig.advertising.prefetch;window.DebugMode.forcePrefetch&&!window.DebugMode.noPreroll?t=!0:window.DebugMode.forceNoPrefetch&&(t=!1),window.BoltAdManager.prefetchEnabled=t}window.ContentPlayer.pseudoAdsCuepoints=[],window.ContentPlayer.videoAdRatio=void 0!==e.currentVideoConfig.advertising.videoAdRatio?e.currentVideoConfig.advertising.videoAdRatio:1,window.ContentPlayer.videoPlayCount=1,e.viewEventHandler=new b(window.PlayerView,this),window.readyCallback.call(null,window.ContentPlayer.containerId);var n=function(){if(window.PlayerSettings.autoplay)if(window.PlayerSettings.minimumViewability){var t=window.PlayerSettings.minimumViewability;e.viewability.addOnceEventListener("changed",(function(n){var i=n.data;i.percent>=t?(G.info("Viewability metrics changed",{msg:"above threshold",action:"play",value:{inView:i.percent,threshold:t}}),window.BoltAdManager?"requesting"!==window.BoltAdManager.status&&e.playPrerollAd({}):e.play()):(G.info("Viewability metrics changed",{msg:"below threshold",action:"Defer autoplay",value:{inView:i.percent,threshold:t}}),window.PlayerState.state=window.PlayerState.START),e.autoplayWhenViewabilityMetricsChanged=!0,e.viewability.addEventListener("changed",e._onViewabilityMetricsChanged)})),e.viewability.requestMetrics()}else e.playPrerollAd({});else window.PlayerState.state=window.PlayerState.START,window.PlayerSettings.minimumViewability&&(e.viewability.requestMetrics(),e.viewability.addEventListener("changed",e._onViewabilityMetricsChanged))};!window.DebugMode.noPreroll&&window.BoltAdManager&&window.BoltAdManager.prefetchEnabled?(G.debug("Prefetch preroll ad"),window.PlayerState.state=window.PlayerState.WAITING,window.BoltAdManager.prefetchAds("preroll",n)):n()}},{key:"replay",value:function(){var e=window.PlayerView.currentPlayer;e.isAd()||(G.info("Replay content",{title:window.CurrentVideoConfig.settings.title}),e.videoPlayCount++,this._overlayAdCueFinder.reset(!1,e.duration),window.PostAdRefreshPlayerState=null,e.replay())}},{key:"_shouldPrefetchNextPreroll",value:function(e){var t=e.currentPlayer,n=void 0===t?window.PlayerView.currentPlayer:t,i=e.adMgr,a=void 0===i?window.BoltAdManager:i,o=e.adMgrStatus;return!o&&window.BoltAdManager&&window.BoltAdManager.status&&(o=window.BoltAdManager.status),!!window.PlayerSettings.playlistPlaythrough&&!n.isAd()&&!a.sequentialPrerollAdRequested&&"prefetching"!==o&&"requesting"!==o&&"media_located"!==o&&window.Zeus.sessionVideoPlayCount>1&&n.currentTime>=n.duration-l.a.Ad.AD_PREFETCH_TIME_BEFORE_VID_ENDS}},{key:"_onTimeUpdated",value:function(){var e=this,t=window.PlayerView.currentPlayer,n=window.BoltAdManager;if(window.PlayerState.state=window.PlayerState.PLAYING,!t.isAd()){var i=t.currentTime,a=null,o=null,r=!1;if(n&&n.hasVMAPBreak(i))return G.info("AdManager has a VMAP break at ".concat(i)),void e._playMidrollAd(window.parseInt(i,10));if(t.adsCuepoints&&t.adsCuepoints.length>0?(o=t.adsCuepoints,r=!1):t.pseudoAdsCuepoints&&t.pseudoAdsCuepoints.length>0&&(o=t.pseudoAdsCuepoints,r=!0),!window.DebugMode.noMidroll&&o){for(var d=0;d<o.length;d++)if(o[d]<t.currentTime){a=o.shift(),r||t.hitAdCuepoint(a);break}a&&(e._currentCuepoint=a,e._overlayAdCueFinder.lastVideoAdCuepoint=a,e._overlayAdCueFinder.nextVideoAdCuepoint=o[0],G.info("Event CB",{evt:"_onTimeUpdated",value:t.currentTime,data:{cue:a}}),e._playMidrollAd())}t.currentTime>=t.duration-l.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS&&e.relatedVideosHelper.shouldAttemptPrefetch()&&e.relatedVideosHelper.fetch({})}}},{key:"seek",value:function(e){var t=window.PlayerView.currentPlayer;if(!t.isAd()){var n=e;if(window.PlayerState.state=window.PlayerState.WAITING,!window.DebugMode.noMidroll&&window.CurrentVideoConfig.advertising.on){var i=t.adsCuepoints;if(i.length>0)for(var a=0;a<i.length;a++){var o=i[a];if(o<e){n=o;break}}}t.seek(n)}}},{key:"_requestAd",value:function(e){!function(e,t){var n,i=t.timing,o=t.adShouldBeQueued,r=t.loadAd,d=t.loadedCallback,s=t.finishedCallback,c=t.vmapBreakTime,v=function(){window.BoltAdManager.removeEventListener(l.a.Media.Event.LOADED,w),window.BoltAdManager.removeEventListener(l.a.Media.Event.ENDED,y),window.BoltAdManager.removeEventListener(l.a.Ad.Event.FAILED,f),window.BoltAdManager.removeEventListener(l.a.Ad.Event.ABORTED,p),window.BoltAdManager.removeEventListener(l.a.Ad.Event.TAG_NOT_AVAILABLE,h)},h=function(){v(),s()},w=function e(){window.playerIsHidden&&(window.playerIsHidden=!1,window.Zeus.dispatchEvent("showPlayer"));var t=window.BoltAdManager;t.removeEventListener(l.a.Media.Event.LOADED,e),N.debug("requestAd hit the ad loaded listener for a ".concat(i)),Object(a.a)(window.Skin,"bolt-ad-type-".concat(t.type));var n=null;t.type===l.a.Ad.Type.VAST?n=t.adPlayer.adPlayer:t.type===l.a.Ad.Type.GOOGLE||t.type===l.a.Ad.Type.GOOGLE_DCM_VPAID?(N.debug("AdPlayer set to Google"),n=t.adPlayer):n=t.adPlayer,N.debug("got a linear ad",i),"preroll"!==i&&"midroll"!==i||(window.client.system.ios&&window.PlayerView.fullscreen&&window.ContentPlayer.addOnceEventListener(l.a.Media.Event.PAUSED,(function(){N.debug("Exiting fullscreen"),window.ContentPlayer.video.webkitExitFullscreen()})),N.debug("About to pause the content player so ad can play"),window.ContentPlayer.pause()),window.PlayerView.setCurrentPlayer(n),t.type!==l.a.Ad.Type.GOOGLE_DCM_VPAID&&t.type!==l.a.Ad.Type.GOOGLE&&n.type!==l.a.Ad.Type.JS_VPAID&&n.play(),Object(A.b)(l.a.UI.LOADING_INDICATOR),d()},y=function(){window.AdSession.complete(),N.debug("hit the ad completed listener for a ".concat(i)),v(),Object(A.b)(l.a.UI.LOADING_INDICATOR),window.BoltAdManager.VMAPBreaksForCurrentAdTiming&&window.BoltAdManager.VMAPBreaksForCurrentAdTiming.length>0||window.BoltAdManager._adPlays<window.prerollAdAmt?e._requestAd({timing:i,loadedCallback:d,finishedCallback:s,vmapBreakTime:c}):(Object(a.d)(window.Skin,"bolt-ad-type-".concat(window.BoltAdManager.type)),window.BoltAdManager.remove(),"precontent"===window.PlayerSettings.playerType?(s(),window.PlayerSettings.adLoop||e._showHiddenContainer(window.ContentPlayer)):("adsonly"===window.PlayerSettings.playerType||window.PlayerView.setCurrentPlayer(window.ContentPlayer),s()))},f=function(){if(window.AdSession.fail(),N.debug("hit the ad failed listener for a ".concat(i)),v(),window.BoltAdManager.remove(),("precontent"===window.PlayerSettings.playerType||"adsonly"===window.PlayerSettings.playerType)&&"hide"===window.PlayerSettings.onAdUnavailable&&window.BoltAdManager._adPlays<window.prerollAdAmt)return window.playerIsHidden=!0,window.Zeus.dispatchEvent("hidePlayer"),void setTimeout((function(){console.log("Request ad again"),e._requestAd({timing:i,loadedCallback:d,finishedCallback:s})}),500);if(window.PlayerView._dispatchEvent(l.a.Ad.Event.FAILED,{timing:i}),"precontent"===window.PlayerSettings.playerType){if(!window.PlayerSettings.adLoop){var t=window.tycheData;Object(u.v)(t,"features","interstitial","on")&&t.features.interstitial.on?window.setTimeout((function(){e._showHiddenContainer(window.ContentPlayer)}),5e3):e._showHiddenContainer(window.ContentPlayer)}setTimeout((function(){s()}),5e3)}else"adsonly"===window.PlayerSettings.playerType||(window.PlayerView.setCurrentPlayer(window.ContentPlayer),Object(A.b)(l.a.UI.LOADING_INDICATOR)),s()},p=function(){window.AdSession.abort(),N.warn("Ad aborted"),Object(a.d)(window.Skin,"bolt-ad-type-".concat(window.BoltAdManager.type)),v(),window.PlayerView.setCurrentPlayer(window.ContentPlayer)};"midroll"===i||window.BoltAdManager.sequentialPrerollAdRequested||window.PlayerState.state!==window.PlayerState.PLAYING&&(window.PlayerState.state=window.PlayerState.WAITING),n=e._currentCuepoint?e._currentCuepoint:"preroll"===i?-1:99999999999,"midroll"===i&&c&&(n=c);var E=function(){window.BoltAdManager.requestAd({timing:i,cuepoint:n,adShouldBeQueued:o,loadAd:r,callbackIfRequestAccepted:function(){Object(A.f)(l.a.UI.AD_CONTAINER,"block","hidden"),window.BoltAdManager.addEventListener(l.a.Media.Event.LOADED,w),window.BoltAdManager.addEventListener(l.a.Media.Event.ENDED,y),window.BoltAdManager.addEventListener(l.a.Ad.Event.FAILED,f),window.BoltAdManager.addEventListener(l.a.Ad.Event.ABORTED,p),window.BoltAdManager.addEventListener(l.a.Ad.Event.TAG_NOT_AVAILABLE,h)}})};window.shouldSupportGDPR&&void 0===window.gdpr?(N.info("[_requestAd] querying GDPR"),window.MessageChannel.sendRequest("gdpr",(function(e){N.info("[_requestAd] received GDPR value:",e),window.gdpr=e,E()}))):E()}(this,e)}},{key:"playPrerollAd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=e.failedOrCompleteCallback,i=e.skipPrefetch,a=e.continueToContent,o=void 0===a||a,r=e.adShouldBeQueued,d=e.loadAd,s=window.ContentPlayer,l=window.BoltAdManager;if(window.CurrentVideoConfig.advertising.on||window.postLogMessage("Advertising is disabled for the current video","warn"),window.AdBlockDetected&&(window.AdBlocked.track("preroll"),l||t.play()),t._shouldRequestPreroll({contentPlayer:s,adMgr:l})){G.info("Preroll",{func:"playPrerollAd",action:"request"});var c=function(){},v=function(){if(l=window.BoltAdManager,G.info("Preroll",{func:"finishedCallback",action:"adComplete"}),window.PlayerSettings.adLoop)return G.info("Preroll",{func:"finishedCallback",action:"adLoop"}),void h();if(l.prefetchEnabled){var e=window.CurrentVideoConfig.advertising.cuepoints||[];!window.DebugMode.noMidroll&&e.length>0&&l.prefetchAds("midroll")}window.client.isMobile?setTimeout((function(){"function"==typeof n?n():o?window.PlayerSettings.adOnly||t.play():window.PlayerState.state=window.PostAdRefreshPlayerState||window.PlayerState.START}),500):"function"==typeof n?n():o?!window.PlayerSettings.adOnly&&l&&"prefetching"!==l.status&&t.play():window.PlayerState.state=window.PostAdRefreshPlayerState||window.PlayerState.START},h=function(){t._requestAd({timing:"preroll",adShouldBeQueued:r,loadAd:d,loadedCallback:c,finishedCallback:v})};if(l.prefetchEnabled&&!i)G.info("Preroll",{func:"playPrerollAd",action:"prefetch"}),window.PlayerState.state=window.PlayerState.WAITING,l.prefetchAds("preroll",h);else{var w=!!window.DebugMode.delayedPreroll;Object(u.v)(l.selectedServer,"siteTags","delayedPreroll")&&(w=l.selectedServer.siteTags.delayedPreroll||window.DebugMode.delayedPreroll),w&&"precontent"!==window.PlayerSettings.playerType&&(G.info("Preroll",{func:"playPrerollAd",action:"delayedPreroll"}),t.play()),h()}}else window.client.isMobile?setTimeout((function(){"function"==typeof n?n():t.play()}),500):"function"==typeof n?n():t.play()}},{key:"_shouldRequestMidroll",value:function(e){var t=e.contentPlayer,n=void 0===t?window.ContentPlayer:t,i=e.adMgr,a=void 0===i?window.BoltAdManager:i;return!window.DebugMode.noMidroll&&a&&window.CurrentVideoConfig.advertising.on&&(n.videoPlayCount-1)%n.videoAdRatio==0}},{key:"_playMidrollAd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,i=window.ContentPlayer,a=window.BoltAdManager;if(window.AdBlockDetected&&window.AdBlocked.track("midroll"),t||n._shouldRequestMidroll({contentPlayer:i,adMgr:a})){var o=function(){},r=function(){G.info("Midroll",{func:"finishedCallback",action:"adComplete"}),(window.CurrentVideoConfig.advertising.cuepoints||[]).length>0&&(a=window.BoltAdManager).prefetchEnabled&&(G.info("Midroll",{func:"finishedCallback",action:"refillAdPool"}),a.prefetchAds("midroll",null,!0),(i=window.ContentPlayer).duration>45e3&&(G.info("Midroll",{func:"finishedCallback",action:"refillOverlayPool"}),a.prefetchAds("overlay",null,!0))),n.resume()};n._requestAd({timing:"midroll",loadedCallback:o,finishedCallback:r,vmapBreakTime:e})}}},{key:"_adEnded",value:function(){var e=this;G.info("AdEnded",{func:"_adEnded",videoPlayCount:window.ContentPlayer.videoPlayCount}),window.PlayerState.state=window.PlayerState.WAITING,window.BoltAdManager&&!window.BoltAdManager.sequentialPrerollAdRequested&&window.CurrentVideoConfig.advertising.on&&(window.ContentPlayer.videoPlayCount-1)%window.ContentPlayer.videoAdRatio==0?window.Playlist&&window.CurrentPlaylistIndex!==window.Playlist.length-1?e.playlistHelper.processPlaylist():(window.PlayerState.state=window.PlayerState.WAITING,G.info("AdEnded",{func:"finishedCallback",action:"adComplete"}),window.Playlist?e.playlistHelper.processPlaylist():(window.ContentPlayer.loop||(window.client.system.ios&&window.PlayerView.fullscreen&&window.ContentPlayer.video.webkitExitFullscreen(),window.ContentPlayer.show(!1)),window.CurrentVideoConfig.related?(window.PlayerState.state=window.PlayerState.WAITING,e.relatedVideosHelper.showRelatedVideosMenu()):window.PlayerState.state=window.PostAdRefreshPlayerState||window.PlayerState.ENDED)):window.Playlist?e.playlistHelper.processPlaylist():window.ContentPlayer.loop?e.play():window.CurrentVideoConfig.related?(window.PlayerState.state=window.PlayerState.WAITING,e.relatedVideosHelper.showRelatedVideosMenu()):window.PlayerState.state=window.PostAdRefreshPlayerState||window.PlayerState.ENDED}},{key:"_showHiddenContainer",value:function(){var e=window.PlayerSettings.hiddenContainer||window.PlayerSettings.postAdContainer;e&&(G.info("Showing post content container",{hcId:e}),window.Zeus.dispatchEvent(window.Bolt.BOLT_AD_SESSION_COMPLETE,{hcId:e}))}},{key:"_setSize",value:function(e,t,n){window.PlayerView.size(t,n)}},{key:"play",value:function(){var e=window.PlayerView.currentPlayer;e&&window.PlayerState.state!==window.PlayerState.PLAYING&&(e.hasStarted&&e.paused?this.resume():e.ended?this.replay(e):(window.PlayerState.delayedWaitingState(500),"native"!==e.type&&"hls_xt"!==e.type||e.preload(),e.hlsLoading||e.play(),e.videoPlayCount++,window.Zeus.sessionVideoPlayCount++))}},{key:"pause",value:function(e){var t=this,n=window.PlayerView.currentPlayer;if(!n||n.isAd()){if("function"!=typeof n.pauseAd)return;n.pauseAd()}window.PlayerState.state=window.PlayerState.PAUSED,"function"==typeof n.pause&&n.pause(),t.viewability.autoPaused=e,t.viewability.userDidPause||e||(t.viewability.userDidPause=!0)}},{key:"togglePlayPause",value:function(){var e=this;window.client.isMobile&&window.BoltAdManager&&!window.BoltAdManager.hasBeenTouched&&(window.BoltAdManager.videoElement&&(window.BoltAdManager.videoElement.src="",window.BoltAdManager.videoElement.load()),window.BoltAdManager.hasBeenTouched=!0);var t=window.PlayerView.currentPlayer;if(t){if(window.client.isMobile&&!window.PlayerView.currentPlayer.isAd()&&!t.hasBeenTouched)try{t.touch()}catch(e){G.warn("Caught Error",{message:e.message,stack:e.stack})}t.hasStarted?t.paused?e.resume():e.pause():t.isAd()?e.play():e.playPrerollAd({})}}},{key:"resume",value:function(){window.PlayerView.currentPlayer&&(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerView.currentPlayer.resume())}},{key:"stop",value:function(){window.PlayerView.currentPlayer&&!window.PlayerView.currentPlayer.isAd()&&window.PlayerView.currentPlayer.stop()}},{key:"closeButtonClicked",value:function(){this.viewability.closeButtonClicked=!0}},{key:"setVolume",value:function(e){window.PlayerView.currentPlayer&&window.PlayerView.currentPlayer.setVolume(e)}},{key:"mute",value:function(e){window.PlayerView.currentPlayer&&window.PlayerView.currentPlayer.mute(e)}},{key:"updateViewabilityMetrics",value:function(e){this.viewability.update(e)}},{key:"_onVisibilityChange",value:function(){var e=this,t=window.PlayerView,n=window.PlayerState,i=t.currentPlayer;G.info("Visibility State",{visibilityState:document.visibilityState,playerState:n.state,isAd:i.isAd()}),i.isAd()||n.state===n.START||("hidden"===document.visibilityState?e.paused||e.pause():n.state===n.PAUSED&&n.previousState===n.PLAYING?e.play():n.state===n.PAUSED&&e.pause())}},{key:"startUp",value:function(){var e=this,t=window.pageViews;window.BENCHMARK.end("bolt_coreJSLoaded_to_controllerStartUp");var n,i=window.PlayerSettings.skips||0;if(e._prerollEnabled=t>i,e._prerollEnabled||window.postLogMessage("Preroll is disabled because the video has been viewed more than ".concat(i," times"),"warn"),window.PlayerSettings.pageviewForAds){n=window.PlayerSettings.pageviewForAds.split(",");for(var a=0;a<n.length;a++)n[a]=parseInt(n[a],10);e._prerollEnabled=n.indexOf(t)>-1}G.info("Preroll",{func:"startUp",data:{enabled:e._prerollEnabled,viewsForAds:n,pageViews:t,pageViewsToSkip:i}}),e._prerollEnabled||"precontent"!==window.PlayerSettings.playerType?(void 0!==document.visibilityState&&document.addEventListener("visibilitychange",(function(){e._onVisibilityChange()}),!1),window.PlayerView.addEventListener(l.a.Player.Event.VIEW_READY,(function(){window.client.showHideIframe&&window.Zeus.dispatchEvent("showiframe"),window.CurrentVideoConfig.settings.minAge>0?(window.PlayerState.state=window.PlayerState.AGE_GATE,window.PlayerView.addOnceEventListener(l.a.UI.Event.AGE_GATE_PASSED,(function(){G.info("Age gate passed"),e._doStartUp()}))):e._doStartUp()})),!0===window.PlayerSettings.adOnly||"adsonly"===window.PlayerSettings.playerType?window.PlayerView.init(!1):window.PlayerView.init(window.CurrentVideoConfig.settings.minAge>0)):e._showHiddenContainer()}}])&&B(t.prototype,n),i&&B(t,i),e}(),j=n(24);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=J(e);if(t){var a=J(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Q(this,n)}}function Q(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z,K=new i.a("VIEW"),Z=window.BENCHMARK,X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(d,e);var t,i,o,r=W(d);function d(e){var t,n,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=r.call(this),n=Y(t),a=420,(i="TINY_PLAYER_MAX_WIDTH")in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a;var o=Y(t);return t._handleIOSFullscreenEvents=t._handleIOSFullscreenEvents.bind(Y(t)),t.cssClass=e,t._isReady=!1,t.mouseInput=null,t._volumeControl=null,t._relatedVideoMenu=null,t._content=null,t._prerollScreen=null,t._uiModules=[],t._ageGateHandler=null,t._watermark=null,t._coreModules=["_controlbar","_scrubber"],window.client.isMobile||(t._coreModules.push("_volumeControl"),t._coreModules.push("mouseInput")),t._defaultBoxModel=null,t.fullscreen=!1,t.currentPlayer=null,t._enableAgeGate=!1,window.addEventListener("resize",(function(){window.PlayerSettings.tinyPlayer=!1,window.innerWidth<=t.TINY_PLAYER_MAX_WIDTH&&(window.PlayerSettings.tinyPlayer=!0);var e=setTimeout((function(){clearTimeout(e),o.invalidate()}),400)})),t.fixedControlbar=!1,t.fixedTitlebar=!1,t.fixedScrubber=!1,t.fixedBottomBar=!1,t}return t=d,(i=[{key:"enableAgeGate",value:function(e){var t=this;window.PlayerSettings.preview&&(e?t.currentPlayer&&t.currentPlayer.playing&&t.currentPlayer.pause():window.PlayerState.state=window.PlayerState.START),e?t._ageGateHandler?(t._ageGateHandler.invalidate(),t._ageGateHandler.invalidateCookie()):j.a.buildAgeGate((function(e){t._ageGateHandler=e,t._ageGateHandler.addEventListener(l.a.UI.Event.AGE_GATE_PASSED,(function(e){K.debug("Age gate",{passed:!0}),t._dispatchEvent(e.type,e.data)})),t._ageGateHandler.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,(function(e){K.debug("Age gate",{passed:!1}),t._dispatchEvent(e.type)})),t._ageGateHandler.invalidate(),t._ageGateHandler.invalidateCookie(),t._uiModules.push(t._ageGateHandler)})):(t._ageGateHandler?t._ageGateHandler.close():Object(A.b)(l.a.UI.AGE_GATE_LAYER),t._dispatchEvent(l.a.UI.Event.AGE_GATE_PASSED))}},{key:"showRelatedVideosMenu",value:function(){null!==this._relatedVideoMenu&&this._relatedVideoMenu.open()}},{key:"setRelatedVideos",value:function(e){var t=this;e?t._relatedVideoMenu?t._relatedVideoMenu.init(e):j.a.buildRelatedVideos((function(e){t._relatedVideoMenu=e,t._relatedVideoMenu.addEventListener(l.a.UI.Event.RELATED_VIDEO_SELECTED,(function(e){t._dispatchEvent(e.type,e.data)})),t._uiModules.push(t._relatedVideoMenu)}),e):t._relatedVideoMenu&&t._relatedVideoMenu.close()}},{key:"setRelatedVideosFetched",value:function(e){this._relatedVideosFetched=e}},{key:"isRelatedVideoListFetched",value:function(){return this._relatedVideosFetched}},{key:"enableControls",value:function(){}},{key:"toggleFullscreen",value:function(){K.debug("Toggle Fullscreen",{current:this.fullscreen}),this.setFullscreen(!this.fullscreen)}},{key:"setFullscreen",value:function(e){K.info("Set Fullscreen",{value:!!e});var t=this;if(!1!==window.PlayerSettings.fullscreen)if(this.fullscreenRequested=e,window.client.system.ios){if(!t.currentPlayer)return;!1===e?t.currentPlayer.video.webkitExitFullscreen():t.currentPlayer.video.webkitEnterFullscreen()}else window.fullscreenEnabled&&(!1===e?window.exitFullscreen():window.enterFullscreen()),t._dispatchEvent(l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,!t.fullscreen);else K.warn("Fullscreen is not allowed by the publisher")}},{key:"_handleIOSFullscreenEvents",value:function(e){K.debug("IOS Fullscreen Event",{type:e.type,data:e.data}),"webkitendfullscreen"===e.type?this.fullscreen=!1:(this.fullscreen=!0,this.fullscreenRequested=!1),this._dispatchEvent(l.a.UI.Event.IOS_FULLSCREEN_CHANGED,this.fullscreen)}},{key:"setCurrentPlayer",value:function(e){var t=l.a.UI,n=this;e!==n.currentPlayer?(n.currentPlayer&&(n.currentPlayer.removeEventListener(l.a.Player.Event.CANPLAY,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.CONTENT_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.QUALITY_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Player.Event.CONFIG_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PLAY,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PLAYING,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.DURATION_CHANGE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.ENDED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.PAUSED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.RESUME,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.STOPPED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.TIME_UPDATE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOAD_PROGRESS,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.WAITING,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOAD_START,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.LOADED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.START_TIME_CHANGED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.NOT_FOUND,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.FIRSTQUARTILE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.MIDPOINT,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.THIRDQUARTILE,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Media.Event.MUTED,n._onMuted),n.currentPlayer.removeEventListener(l.a.Media.Event.UNMUTED,n._onUnmuted),n.currentPlayer.removeEventListener(l.a.Media.Event.VOLUME_CHANGED,n._onVolumeChanged),n.currentPlayer.removeEventListener(l.a.Media.Event.SEEKED,n._handlePlayerEvents),n.currentPlayer.removeEventListener(l.a.Ad.Event.CUEPOINT,n._handlePlayerEvents),window.client.system.ios&&n.currentPlayer.video&&(n.currentPlayer.video.removeEventListener("webkitendfullscreen",n._handleIOSFullscreenEvents),n.currentPlayer.video.removeEventListener("webkitbeginfullscreen",n._handleIOSFullscreenEvents))),n._handlePlayerEvents=n._handlePlayerEvents.bind(this),e.addEventListener(l.a.Player.Event.CANPLAY,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.CONTENT_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PLAY,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PLAYING,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.DURATION_CHANGE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.ENDED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.PAUSED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.RESUME,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.STOPPED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.TIME_UPDATE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOAD_PROGRESS,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.WAITING,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOAD_START,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.LOADED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.FIRSTQUARTILE,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.MIDPOINT,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.THIRDQUARTILE,n._handlePlayerEvents),n._onMuted=n._onMuted.bind(this),e.addEventListener(l.a.Media.Event.MUTED,n._onMuted),n._onUnmuted=n._onUnmuted.bind(this),e.addEventListener(l.a.Media.Event.UNMUTED,n._onUnmuted),n._onVolumeChanged=n._onVolumeChanged.bind(this),e.addEventListener(l.a.Media.Event.VOLUME_CHANGED,n._onVolumeChanged),e.addEventListener(l.a.Media.Event.SEEKED,n._handlePlayerEvents),window.BoltAdManager,e.isAd()?(Object(a.a)(document.body,"bolt-linear-ad-on"),Object(a.d)(document.body,"bolt-content-on"),Object(A.b)(t.TITLE_BAR),Object(A.b)(t.SUBTITLE_TEXT),window.client.isMobile||n._volumeControl&&n._volumeControl.setPlayer(e)):window.PlayerSettings.adOnly||(Object(a.a)(document.body,"bolt-content-on"),Object(a.d)(document.body,"bolt-linear-ad-on"),e.addEventListener(l.a.Ad.Event.CUEPOINT,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.QUALITY_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Player.Event.CONFIG_CHANGED,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.NOT_FOUND,n._handlePlayerEvents),e.addEventListener(l.a.Media.Event.START_TIME_CHANGED,n._handlePlayerEvents),Object(A.b)(t.AD_CONTAINER),window.client.isMobile||n._volumeControl&&n._volumeControl.setPlayer(e),n.fixedControlbar=!1===window.PlayerSettings.appearance.controlbar.autohide),window.client.isMobile||(window.PlayerSettings.automute?e.setVolume(0):e.setVolume(window.PlayerSettings.volume||1)),e.mute(window.PlayerSettings.automute),n.currentPlayer=e,window.client.system.ios&&n.currentPlayer.video&&(n.currentPlayer.video.addEventListener("webkitendfullscreen",n._handleIOSFullscreenEvents),n.currentPlayer.video.addEventListener("webkitbeginfullscreen",n._handleIOSFullscreenEvents)),n._isReady?(n._dispatchEvent(l.a.UI.Event.PLAYER_CHANGED),n.invalidate()):n._waitForCoreModules()):K.debug("Attempting to set new player failed; not a new player.")}},{key:"_waitForCoreModules",value:function(){var e=this;K.debug("Core Modules",e._coreModules),z||(z=setInterval((function(){if(e._coreModules.every((function(t){return K.debug("Waiting for module...",t),!!e[t]}))){clearInterval(z),e._isReady=!0,K.debug("View is ready"),window.Skin.style.visibility="visible",e.appearanceManager.updateColors(),e.appearanceManager.updateTextColors();for(var t=0;t<e._uiModules.length;t++)e._uiModules[t].updateAppearance();e._dispatchEvent(l.a.UI.Event.PLAYER_CHANGED),e.invalidate(),e._dispatchEvent(l.a.Player.Event.VIEW_READY),e.enableAgeGate(e._enableAgeGate)}}),100))}},{key:"_handlePlayerEvents",value:function(e){var t=this,n=e.target,i=l.a.UI;if(e.type===l.a.Player.Event.CONFIG_CHANGED){var o=window.CurrentVideoConfig;K.info("Player config changed",{data:{config:o,newConfig:n.config}}),o.settings.minAge>0?t.enableAgeGate(!0):t.enableAgeGate(!1),Object.keys(o.content.media).length>1?(Object(a.d)(window.Skin,"bolt-hd-disabled"),Object(a.a)(window.Skin,"bolt-hd-enabled")):(Object(a.d)(window.Skin,"bolt-hd-enabled"),Object(a.a)(window.Skin,"bolt-hd-disabled")),Object(A.b)(i.ERROR_CONTAINER)}else e.type===l.a.Media.Event.PLAY?(K.info("Player currently playing",{type:e.type,data:e.data,playerSource:n.getSource()}),n.isAd()||Z.start("bolt_contentPlayRequested_to_contentPlaying"),t.invalidate()):e.type===l.a.Media.Event.PLAYING?n.isAd()||Z.end("bolt_contentPlayRequested_to_contentPlaying"):e.type===l.a.Media.Event.PAUSED||(e.type===l.a.Media.Event.RESUME?(K.info("Resume",{playerSource:n.getSource()}),n.isAd()||window.client.isMobile&&window.ContentPlayer.show(!0)):e.type===l.a.Media.Event.STOPPED?K.info("Stopped",{playerSource:n.getSource()}):e.type===l.a.Media.Event.DURATION_CHANGE?K.debug("Duration change",{duration:n.duration,playerSource:n.getSource()}):e.type===l.a.Media.Event.WAITING?K.info("Waiting",{playerSource:n.getSource()}):e.type===l.a.Media.Event.LOAD_PROGRESS||e.type===l.a.Media.Event.TIME_UPDATE||(e.type===l.a.Media.Event.ENDED?n.isAd()?K.info("Ended Ad"):K.info("Ended",{playerSource:n.getSource()}):e.type===l.a.Media.Event.START_TIME_CHANGED&&K.debug("Start time changed",{playerSource:n.getSource()})));t._dispatchEvent(e)}},{key:"showError",value:function(e){Object(A.f)(l.a.UI.ERROR_CONTAINER);var t=Object(A.a)(l.a.UI.ERROR_CONTAINER);t&&(t.firstElementChild.textContent=e),Object(A.b)(l.a.UI.LOADING_INDICATOR)}},{key:"init",value:function(e){var t=l.a.UI,i=this,o=window.Skin;o.style.width="100%",o.style.height="100%",i.cssClass&&Object(a.a)(window.Skin,i.cssClass),Object(a.g)(),Object(a.e)(),i._coreModules.push("appearanceManager"),j.a.buildAppearanceManager((function(e){i.appearanceManager=e})),!1===window.PlayerSettings.fullscreen&&(K.info("Fullscreen disabled"),Object(A.d)(t.FULLSCREEN_BTN)),window.PlayerSettings.adOnly?(i.fixedControlbar=!0,Object(a.a)(window.document.body,"bolt-linear-ad-on")):(i._enableAgeGate=e,i.fixedControlbar=!1===window.PlayerSettings.appearance.controlbar.autohide,K.info("Controlbar",{position:"fixed"}),i._coreModules.push("_loadingIndicator"),j.a.buildLoadingIndicator((function(e){i._loadingIndicator=e,i._uiModules.push(e)}))),window.client.isMobile?(i._buildVolumeControl(),Object(a.a)(document.body,"bolt-touch-input")):(i._buildVolumeControl(),n.e(29).then(n.bind(null,42)).then((function(e){var t=e.default;i.mouseInput=new t,i.mouseInput.on(l.a.UI.Event.MOUSE_OUT,(function(){i.onMouseOut(window.Skin)})),i.mouseInput.on(l.a.UI.Event.MOUSE_OVER,(function(){i.onMouseOver(window.Skin)}))})).catch((function(e){K.warn("Caught Error",{message:e.message,stack:e.stack})}))),i._defaultBoxModel={width:o.style.width,height:o.style.height,marginTop:o.style.marginTop,marginLeft:o.style.marginLeft,marginBottom:o.style.marginBottom,marginRight:o.style.marginRight,paddingTop:o.style.paddingTop,paddingLeft:o.style.paddingLeft,paddingBottom:o.style.paddingBottom,paddingRight:o.style.paddingRight,zIndex:o.style.zIndex,position:o.style.position,top:o.style.top,right:o.style.right,bottom:o.style.bottom,left:o.style.left},i._buildContent(),i._buildControlBar(),i._buildScrubber(),i._buildWatermark(),i.setCurrentPlayer(window.ContentPlayer)}},{key:"_buildContent",value:function(){var e=this;j.a.buildContent((function(t){e._uiModules.push(t),e._content=t}))}},{key:"_buildVolumeControl",value:function(){var e=this;e._volumeControl||j.a.buildVolume((function(t){e._uiModules.push(t),e._volumeControl=t,e._volumeControl.addEventListener(l.a.VALUE_CHANGED,(function(t){e._dispatchEvent(l.a.UI.Event.CHANGE_VOLUME,t.data)}))}))}},{key:"_buildScrubber",value:function(){var e=this;e._scrubber||j.a.buildScrubber((function(t){e._uiModules.push(t),e._scrubber=t,e._scrubber.on(l.a.UI.Event.SEEK,(function(t){K.info("Event: Seek",{currentTime:t.target._current,maxTime:t.target.max,seekTime:t.target.data,playerId:t.target.player.containerId}),e._dispatchEvent(t)}))}))}},{key:"_buildControlBar",value:function(){var e=this;e._controlbar||j.a.buildControlBar((function(t){e._uiModules.push(t),e._controlbar=t}))}},{key:"_isEnabled",value:function(e){return!Object(a.b)(e,l.a.UI.UI_DISABLED_CLASS)}},{key:"_buildWatermark",value:function(){var e=this;j.a.buildWatermark((function(t){e._watermark=t,e._uiModules.push(e._watermark)}))}},{key:"_getModuleForElement",value:function(e){for(var t=0;t<this._uiModules.length;t++){var n=this._uiModules[t];if(n.UI===e)return n}return null}},{key:"size",value:function(e,t){var n=this,i=e,a=t;-1===e.indexOf("%")&&-1===e.indexOf("px")&&(i="".concat(e,"px")),-1===t.indexOf("%")&&-1===t.indexOf("px")&&(a="".concat(t,"px")),n._defaultBoxModel.width=i,n._defaultBoxModel.height=a,n.invalidate()}},{key:"onMouseOver",value:function(e){Object(a.d)(window.Skin,"bolt-mouse-out"),Object(a.a)(window.Skin,"bolt-mouse-over"),this._dispatchEvent(l.a.UI.Event.MOUSE_OVER,null,e)}},{key:"onMouseOut",value:function(e){Object(a.d)(window.Skin,"bolt-mouse-over"),Object(a.a)(window.Skin,"bolt-mouse-out"),this._dispatchEvent(l.a.UI.Event.MOUSE_OUT,null,e)}},{key:"invalidate",value:function(e){var t=this,n=t._uiModules;e&&(e.fullscreen!==t.fullscreen&&(t.fullscreen=e.fullscreen,t.mouseInput&&t.mouseInput.setFullscreen(t.fullscreen),K.debug("Invalidate",{fullscreen:t.fullscreen}),t._controlbar.open()),e.customizer&&t.appearanceManager.update(e.customizer)),t.fixedScrubber?Object(a.a)(window.Skin,"bolt-static-scrubber"):Object(a.d)(window.Skin,"bolt-static-scrubber"),t.fixedControlbar?(t._controlbar.open(),Object(a.a)(window.Skin,"bolt-static-control-bar")):Object(a.d)(window.Skin,"bolt-static-control-bar"),t.currentPlayer&&t.currentPlayer.setFullscreen(t.fullscreen);for(var i=0;i<n.length;i++)n[i].invalidate();!0===t._isReady&&(window.client.browser.ie>0&&window.client.browser.ie<12?(t._controlbar.open(),t._titleBar&&t._titleBar.open()):window.Skin.style.visibility="visible"),Object(a.f)(window.Skin.clientWidth)}},{key:"_onVolumeChanged",value:function(e){void 0===e.data||e.data<0||e.data>1?K.info("Volume changed attempt, failed",{type:e.type,value:e.data}):(K.info("Volume changed",{type:e.type,value:e.data}),void 0!==e.data?this._dispatchEvent(e.type,e.data):K.warn("No volume data"))}},{key:"_onMuted",value:function(e){Object(a.d)(window.Skin,"bolt-automute-disabled"),Object(a.a)(window.Skin,"bolt-automute-enabled"),this._dispatchEvent(e.type)}},{key:"_onUnmuted",value:function(e){Object(a.d)(window.Skin,"bolt-automute-enabled"),Object(a.a)(window.Skin,"bolt-automute-disabled"),this._dispatchEvent(e.type)}},{key:"getAppearanceSettings",value:function(){this.appearanceManager.getInitialSettings()}}])&&x(t.prototype,i),o&&x(t,o),d}(c.a),$=n(26),ee=new i.a("IFRAME-VIEW-EVENTS"),te=function(e){var t,n=window.zeus_ga.label,i=window.zeus_ga.category,a=window.CurrentVideoConfig.content.videoId||0,o=Object(u.g)(),r="[videoId=".concat(a,"']");return e&&"function"==typeof e.isAd&&(t=e.isAd()?"".concat(n.ad," ").concat(r):"".concat(n.content," ").concat(r)),{gaCategory:i,gaLabel:n,videoId:a,publisherId:o,labelSuffix:r,selectedGALabel:t}},ne=function(e){e.type,l.a.Media.Event.TIME_UPDATE,e.type===l.a.Player.Event.LOADED?ie(e):e.type===l.a.Media.Event.METADATA?ae(e):e.type===l.a.Media.Event.PLAY?oe(e):e.type===l.a.Media.Event.PLAYING?re(e):e.type===l.a.Media.Event.STOPPED?de(e):e.type===l.a.Media.Event.PAUSED?se(e):e.type===l.a.Media.Event.RESUME?le(e):e.type===l.a.Media.Event.ENDED?ue(e):e.type===l.a.Ad.Event.CUEPOINT?ce(e):e.type===l.a.Ad.Event.FAILED?ve(e):e.type===l.a.Media.Event.FIRSTQUARTILE?he(e):e.type===l.a.Media.Event.MIDPOINT?we(e):e.type===l.a.Media.Event.THIRDQUARTILE?ye(e):e.type===l.a.Media.Event.NOT_FOUND?fe(e):e.type===l.a.Player.Event.CONFIG_NOT_FOUND?pe(e):e.type===l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE?Ee(e):e.type===l.a.UI.Event.AGE_GATE_PASSED?ge(e):e.type===l.a.UI.Event.AGE_GATE_FAILED?_e(e):e.type===l.a.UI.Event.APPEARANCE_SETTINGS_CHANGED?be(e):e.type===l.a.UI.Event.INITIAL_APPEARANCE_SETTINGS_LOADED?Ae(e):e.type===l.a.Media.Event.VOLUME_CHANGED?Pe(e):e.type===l.a.Media.Event.TIME_UPDATE?me(e):e.type===l.a.Player.Event.CONFIG_CHANGED&&Se(e)},ie=function(e){window.Bolt.dispatchEvent("playerLoaded",e.data)},ae=function(){window.Bolt.dispatchEvent(window.Bolt.BOLT_CONTENT_STATE_CHANGED,{state:"ready"})},oe=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel;if(n.isAd()){var s,l,c,v;window.postLogMessage("Ad starts"),"precontent"===window.PlayerSettings.playerType&&t.dispatchEvent(t.SET_IFRAME_VISIBILITY,{visibilityVal:"visible"});try{c=(v=window.BoltAdManager.ad.linear).tracking.events.click,l=Object(u.A)(v.clickThrough)}catch(e){}t.dispatchEvent(t.BOLT_AD_STARTED,{adType:(null==e||null===(s=e.data)||void 0===s?void 0:s.adType)||void 0,videoId:a,publisherId:o,linear:window.BoltAdManager.isLinear(),click_url:l,click_trackers:c}),t.dispatchAnalyticsEvent(t.BOLT_AD_STARTED,r.state,d),window.BoltAdManager.selectedVMAPBreak&&setTimeout((function(){window.BoltAdManager.trackVMAPEvent("breakStart")}),100)}else t.dispatchEvent(t.BOLT_CONTENT_STARTED,{videoId:a,publisherId:o,title:window.CurrentVideoConfig.settings.title,duration:window.CurrentVideoConfig.duration}),window.postLogMessage("Content starts"),t.dispatchAnalyticsEvent(t.BOLT_CONTENT_STARTED,r.state,d)},re=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.gaCategory,o=i.selectedGALabel;window.videoConfigChanged=!1,n.isAd()||t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"playing"}),t.dispatchAnalyticsEvent("playing",a.state,o)},de=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.gaCategory,o=i.selectedGALabel;n.isAd()||(t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"stopped"}),t.dispatchAnalyticsEvent("stopped",a.state,o))},se=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.gaCategory,o=i.selectedGALabel;n.isAd()||(window.postLogMessage("Content is paused"),t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"paused"}),t.dispatchAnalyticsEvent("paused",a.state,o))},le=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.gaCategory,o=i.selectedGALabel;n.isAd()||(window.postLogMessage("Content is resumed"),t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"resume"}),t.dispatchAnalyticsEvent("resume",a.state,o))},ue=function(e){var t,n=window.Bolt,i=e.target,a=te(i),o=a.gaCategory,r=a.selectedGALabel,d=a.videoId,s=a.publisherId;i.isAd()?(window.postLogMessage("Ad ends"),n.dispatchEvent(n.BOLT_AD_COMPLETE,{adType:(null==e||null===(t=e.data)||void 0===t?void 0:t.adType)||void 0,videoId:d,publisherId:s}),n.dispatchAnalyticsEvent(n.BOLT_AD_COMPLETE,o.state,r)):(window.postLogMessage("Content ends"),n.dispatchEvent(n.BOLT_CONTENT_COMPLETE,{videoId:d,publisherId:s}),n.dispatchAnalyticsEvent(n.BOLT_CONTENT_COMPLETE,o.state,r))},ce=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.gaCategory,o=i.selectedGALabel;window.postLogMessage("Cuepoint at ".concat(e.data," seconds is hit")),t.dispatchEvent(t.BOLT_AD_CUEPOINT,{cuepoint:e.data}),t.dispatchAnalyticsEvent(t.BOLT_AD_CUEPOINT,a.state,o,e.data)},ve=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.videoId,o=i.publisherId,r=i.gaCategory;window.postLogMessage("".concat(e.data.timing," Ad error"),"error"),(window.CurrentVideoConfig.settings.hiddenContainer||window.CurrentVideoConfig.settings.postAdContainer)&&t.dispatchEvent(t.PRE_CONTENT_AD_ERROR,{state:"noAdsAvailable"}),t.dispatchEvent(t.BOLT_AD_ERROR,{state:"noAdsAvailable",videoId:a,publisherId:o,timing:e.data.timing}),t.dispatchAnalyticsEvent("boltAdRequestFailed",r.state,"zeus ".concat(e.data.timing))},he=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,s=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(s," reached first quartile")),n.isAd()&&t.dispatchEvent(t.BOLT_FIRST_QUARTILE,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_FIRST_QUARTILE,r.state,d)},we=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,s=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(s," reached midpoint")),n.isAd()&&t.dispatchEvent(t.BOLT_MIDPOINT,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_MIDPOINT,r.state,d)},ye=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.videoId,o=i.publisherId,r=i.gaCategory,d=i.selectedGALabel,s=n.isAd()?"Ad":"Content";window.postLogMessage("".concat(s," reached third quartile")),n.isAd()&&t.dispatchEvent(t.BOLT_THIRD_QUARTILE,{videoId:a,publisherId:o}),t.dispatchAnalyticsEvent(t.BOLT_THIRD_QUARTILE,r.state,d)},fe=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.gaCategory,o=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_ERROR),t.dispatchAnalyticsEvent("boltContentNotFound",a.state,o)},pe=function(e){var t=window.Bolt,n=e.target,i=te(n),a=i.gaCategory,o=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_ERROR),t.dispatchAnalyticsEvent("boltConfigNotFound",a.state,o)},Ee=function(e){window.Bolt.dispatchEvent(e.type,e.data)},ge=function(e){var t=window.Bolt;window.CurrentVideoConfig.settings.minAge>0&&(ee.info("Age gate",{passed:!0}),t.dispatchEvent(t.BOLT_AGE_GATE_PASSED,e.data))},_e=function(){var e=window.Bolt;ee.info("Age gate",{passed:!1}),e.dispatchEvent(e.BOLT_AGE_GATE_FAILED)},be=function(e){window.Bolt.dispatchEvent(e.type,e.data)},Ae=function(e){window.Bolt.dispatchEvent(e.type,e.data)},Pe=function(e){var t=window.Bolt;ee.info("Volume changed",{value:e.data}),t.dispatchEvent(t.BOLT_VOLUME_CHANGED,e.data)},me=function(e){var t=window.Bolt;t.dispatchEvent(t.BOLT_TIME_CHANGED,e.data)},Se=function(){window.Bolt.dispatchEvent("videoConfigChanged",window.CurrentVideoConfig)};function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return ke}));var Oe=new i.a("IFRAME"),ke=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Me(this,"BOLT_CONTENT_STARTED","boltContentStarted"),Me(this,"BOLT_CONTENT_COMPLETE","boltContentComplete"),Me(this,"BOLT_CONTENT_ERROR","boltContentError"),Me(this,"BOLT_CONTENT_STATE_CHANGED","boltContentStateChanged"),Me(this,"BOLT_TOGGLE_FULLSCREEN","boltToggleFullscreen"),Me(this,"BOLT_FIRST_QUARTILE","boltFirstQuartile"),Me(this,"BOLT_MIDPOINT","boltMidPoint"),Me(this,"BOLT_THIRD_QUARTILE","boltThirdQuartile"),Me(this,"BOLT_AD_STARTED","boltAdStarted"),Me(this,"BOLT_AD_IMPRESSION","boltAdImpression"),Me(this,"BOLT_AD_VIDEO_START","boltAdVideoStart"),Me(this,"BOLT_AD_PLAYING","boltAdPlaying"),Me(this,"BOLT_AD_PAUSED","boltAdPaused"),Me(this,"BOLT_AD_COMPLETE","boltAdComplete"),Me(this,"BOLT_AD_ERROR","boltAdError"),Me(this,"BOLT_AGE_GATE_PASSED","boltAgeGatePassed"),Me(this,"BOLT_AGE_GATE_FAILED","boltAgeGateFailed"),Me(this,"BOLT_VOLUME_CHANGED","boltVolumeChanged"),Me(this,"BOLT_AD_SESSION_COMPLETE","boltAdSessionComplete"),Me(this,"BOLT_AD_CUEPOINT","boltAdCuepoint"),Me(this,"BOLT_TIME_CHANGED","boltTimeChanged"),Me(this,"SET_IFRAME_VISIBILITY","boltSetIframeVisibility"),Me(this,"PRE_CONTENT_AD_ERROR","noAdsAvailable"),Me(this,"sessionVideoPlayCount",1),Me(this,"embeds",void 0),Me(this,"Video",void 0),Me(this,"onMediaConfigProcessed",(function(e){var n=t;n.PWBM.end("bolt_coreJSLoaded_to_manifestParsed");var i=window.PlayerSettings,a=i.skin||n._defaultSkin,o=i.css||n._defaultCss,r=i.cssClass;Oe.info("Event CB",{evt:"onMediaConfigProcessed",value:e,data:window.CurrentVideoConfig.content.media}),void 0!==window.CurrentVideoConfig.content.media.f4m?e&&(window.CurrentVideoConfig.content.media=e):window.CurrentVideoConfig.content.media=e;var d=l.a.Player.ID_PREFIX+window.id;n._renderVideo(d,a,o,r)})),Me(this,"processCustomEmbedTags",(function(){if(window.PlayerSettings.adTag||window.PlayerSettings.desktopAdTag||window.PlayerSettings.html5AdTag||window.PlayerSettings.mobileAdTag||window.PlayerSettings.vmapAdTag){window.PlayerSettings.embedAds={servers:[{type:null,tags:{default:{standard:{},html5:{}}}}]};var e=window.PlayerSettings.embedAds.servers[0],t=function(e){return"mobile"===e?window.PlayerSettings.adTag=window.PlayerSettings.vmapAdTag||window.PlayerSettings.mobileAdTag||window.PlayerSettings.adTag:"desktop"===e&&(window.PlayerSettings.adTag=window.PlayerSettings.vmapAdTag||window.PlayerSettings.html5AdTag||window.PlayerSettings.adTag),Oe.debug("Embed ".concat(e," ad tag"),window.PlayerSettings.adTag),window.PlayerSettings.vmapAdTag?{vmap:window.PlayerSettings.adTag}:{preroll:window.PlayerSettings.adTag,midroll:window.PlayerSettings.adTag}};window.client.isMobile?e.tags.default.html5.mobile=t("mobile"):e.tags.default.html5.desktop=t("desktop"),e.type=(n=window.PlayerSettings.adTag,/g.doubleclick/.test(n)?"generic-google":"generic-vast"),Oe.debug("Embed ad settings",window.PlayerSettings.embedAds)}var n}));var n=this;n.PWBM=window.BENCHMARK,n.PWBM.end("bolt_bootCall_to_iframeScriptLoaded"),n.PWBM.start("bolt_iframeScriptLoaded_to_coreJSLoaded"),n.PWBM.start("bolt_coreJSLoaded_to_zeusAvailable"),n.PWBM.start("bolt_coreJSLoaded_to_renderPlayerCall"),n.PWBM.start("bolt_coreJSLoaded_to_initVideoCall"),n.PWBM.start("bolt_coreJSLoaded_to_initAdsCall"),n.PWBM.start("bolt_coreJSLoaded_to_manifestRequested"),n.PWBM.start("bolt_coreJSLoaded_to_manifestLoaded"),n.PWBM.start("bolt_coreJSLoaded_to_manifestParsed"),n.PWBM.start("bolt_coreJSLoaded_to_controllerStartUp"),n.PWBM.start("bolt_coreJSLoaded_to_skinRequested"),window.PlayerState=new s,n.controller=new H,n._isFullscreen=!1,n.playerRendered=!1,n._baseUrl=window.zeusBaseUrl,n._defaultSkin="".concat(n._baseUrl,"/skins/pegasus.html"),n._defaultAdSkin="".concat(n._baseUrl,"/skins/pegasus.html"),n._defaultCss="".concat(n._baseUrl,"/skins/pegasus.css"),n._dispatchTrackingEvent=n._dispatchTrackingEvent.bind(n),n.dispatchEvent=n.dispatchEvent.bind(n),n.dispatchAnalyticsEvent=n.dispatchAnalyticsEvent.bind(n),n._onAdRequested=n._onAdRequested.bind(n),n._onAdQueued=n._onAdQueued.bind(n),n.renderPlayer=n.renderPlayer.bind(n),n.setBaseUrl=n.setBaseUrl.bind(n),n.getBaseUrl=n.getBaseUrl.bind(n),n.getCSSUrl=n.getCSSUrl.bind(n),n.initVideo=n.initVideo.bind(n),n.playMedia=n.playMedia.bind(n),n.replayMedia=n.replayMedia.bind(n),n.closeVideo=n.closeVideo.bind(n),n.pauseMedia=n.pauseMedia.bind(n),n.togglePlay=n.togglePlay.bind(n),n.stopMedia=n.stopMedia.bind(n),n.setVolume=n.setVolume.bind(n),n.getVolume=n.getVolume.bind(n),n.muteMedia=n.muteMedia.bind(n),n.unmuteMedia=n.unmuteMedia.bind(n),n.seek=n.seek.bind(n),n.updateViewabilityMetrics=n.updateViewabilityMetrics.bind(n),n.PWBM.end("bolt_iframeScriptLoaded_to_coreJSLoaded"),n.PWBM.end("bolt_coreJSLoaded_to_zeusAvailable"),n.init()}var t,i,a;return t=e,(i=[{key:"init",value:function(){}},{key:"setBaseUrl",value:function(e){this._baseUrl=e,this._defaultSkin="pegasus.html",this._defaultAdSkin="pegasus.html",this._defaultCss="pegasus.css"}},{key:"getBaseUrl",value:function(){return this._baseUrl}},{key:"renderPlayer",value:function(){var e=this;e.playerRendered||(e.PWBM.end("bolt_coreJSLoaded_to_renderPlayerCall"),e.playerRendered=!0,window.CurrentVideoConfig.settings=Object(u.t)(window.CurrentVideoConfig.settings,window.PlayerSettings),Oe.info("Player settings",{data:window.PlayerSettings}),function(t){if(void 0===t.disabled)e.initVideo();else{var n=document.body;if(void 0!==t.disabled.image&&(n.style.backgroundImage="url('".concat(t.disabled.image,"')")),void 0!==t.disabled.message){var i=document.createElement("div");i.id="disabled-msg",i.innerHTML=t.disabled.message,i.style.fontSize="24px",i.style.backgroundColor="#ffffff",i.style.border="1px solid #000000",i.style.padding="5px",i.style.position="relative",i.style.top="40%",i.style.marginLeft="auto",i.style.marginRight="auto",i.style.textAlign="center",n.appendChild(i)}}}(window.CurrentVideoConfig))}},{key:"initVideo",value:function(){this.PWBM.end("bolt_coreJSLoaded_to_initVideoCall"),Object(u.w)(window.CurrentVideoConfig.content.media,this.onMediaConfigProcessed)}},{key:"_renderVideo",value:function(e,t,i,a){var o,r=this,d=document.body,s=window.CurrentVideoConfig.settings.defaultHd;if(!0===s?(window.CurrentVideoConfig.content.media.hd&&(o=Object(u.x)(window.CurrentVideoConfig.content.media.hd)),o||(delete window.CurrentVideoConfig.content.media.hd,s=!1,o=Object(u.x)(window.CurrentVideoConfig.content.media.sd))):(window.CurrentVideoConfig.content.media.sd&&(o=Object(u.x)(window.CurrentVideoConfig.content.media.sd)),o||(delete window.CurrentVideoConfig.content.media.sd,s=!0,o=Object(u.x)(window.CurrentVideoConfig.content.media.hd))),window.PlayerSettings.defaultHd=s,o)d.setAttribute("data-default-src",o),r.PWBM.start("bolt_loadCSS_to_CSSLoaded"),n.e(20).then(n.t.bind(null,37,7)).then((function(n){r.PWBM.end("bolt_loadCSS_to_CSSLoaded"),r._loadSkin(e,t,a)})).catch((function(e){Oe.error("Caught Error",{message:e.message,stack:e.stack})}));else{var l=document.createElement("p");l.id="err-msg",l.style.color="red",l.style.position="absolute",l.textContent="Media not supported",d.appendChild(l)}}},{key:"_onAdQueued",value:function(e){this.dispatchEvent("boltAdQueued",e.data)}},{key:"_onAdRequested",value:function(e){var t=window.CurrentVideoConfig.content.videoId||0,n="[videoId=".concat(t,"]");this.dispatchAnalyticsEvent("boltRequestAdSpot ".concat(window.BoltAdManager.timing),"ad",n),this.dispatchEvent("boltAdRequestStart",e.data)}},{key:"_bindAdListeners",value:function(e,t){var i=this;n.e(2).then(n.bind(null,26)).then((function(e){var t=e.default;window.AdSession=new t,window.AdSession.on(l.a.Ad.Event.SESSION_START,i._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_ABORT,i._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_END,i._dispatchTrackingEvent),window.AdSession.on(l.a.Ad.Event.SESSION_FAIL,i._dispatchTrackingEvent)})).catch((function(e){Oe.error("Caught error",{message:e.message,stack:e.stack})})),n.e(2).then(n.bind(null,38)).then((function(e){var t=e.default;window.AdRequest=new t,window.AdRequest.on(l.a.Ad.Event.REQUEST_START,i._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_ABORT,i._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_SUCCESS,i._dispatchTrackingEvent),window.AdRequest.on(l.a.Ad.Event.REQUEST_FAIL,i._dispatchTrackingEvent)})).catch((function(e){Oe.error("Caught error",{message:e.message,stack:e.stack})})),n.e(2).then(n.bind(null,39)).then((function(e){var t=e.default;window.SSTracker=new t})).catch((function(e){Oe.error("Caught error",{message:e.message,stack:e.stack})})),n.e(2).then(n.bind(null,57)).then((function(n){var a=n.default;window.BoltAdManager=new a(window.DebugMode.dcOverride,e),window.BoltAdManager.addEventListener(l.a.Ad.Event.QUEUED,i._onAdQueued),window.BoltAdManager.addEventListener(l.a.Ad.Event.REQUESTED,i._onAdRequested),window.BoltAdManager.addEventListener(l.a.Ad.Event.CLICKED,i._dispatchTrackingEvent),window.BoltAdManager.init((function(){Oe.debug("BoltAdManager initialized. Selected ad server object",window.BoltAdManager.selectedServer),t()}))})).catch((function(e){Oe.error("Caught error",{message:e.message,stack:e.stack})}))}},{key:"_initAds",value:function(e){var t=this;t.PWBM.end("bolt_coreJSLoaded_to_initAdsCall");var n="ad_".concat(window.id),i=Object(A.a)(l.a.UI.AD_CONTAINER);i&&(l.a.AD_CONTAINER=n,l.a.UI.AD_CONTAINER=n,i.setAttribute("id",n)),t.processCustomEmbedTags(),t._bindAdListeners(n,e)}},{key:"_dispatchTrackingEvent",value:function(e){this.dispatchEvent(e.type,e.data)}},{key:"_start",value:function(e){var t=this;if(void 0===window.ContentPlayer)return Oe.info("Content player undefined. Unable to start",{videoId:e}),null;window.ContentPlayer.show(!1),window.AdBlockDetected&&(Oe.info("Ad block",{detected:1,msg:"Tracking blocked ad session",data:{videoId:e}}),window.AdSession=new $.default,window.AdSession.on(l.a.Ad.Event.SESSION_START,t._dispatchTrackingEvent),window.AdSession.start(!1),n.e(13).then(n.bind(null,40)).then((function(e){var n=e.default;window.AdBlocked=new n,window.AdBlocked.on(l.a.Ad.Event.SESSION_BLOCKED,t._dispatchTrackingEvent)})).catch((function(e){Oe.error("Caught error",{message:e.message,stack:e.stack})})));var i=function(){if(window.PlayerView.addEventListener(l.a.Media.Event.TIME_UPDATE,ne),window.PlayerView.addEventListener(l.a.Media.Event.METADATA,ne),window.PlayerView.addEventListener(l.a.Media.Event.PLAY,ne),window.PlayerView.addEventListener(l.a.Media.Event.PLAYING,ne),window.PlayerView.addEventListener(l.a.Media.Event.STOPPED,ne),window.PlayerView.addEventListener(l.a.Media.Event.PAUSED,ne),window.PlayerView.addEventListener(l.a.Media.Event.RESUME,ne),window.PlayerView.addEventListener(l.a.Media.Event.ENDED,ne),window.PlayerView.addEventListener(l.a.Media.Event.FIRSTQUARTILE,ne),window.PlayerView.addEventListener(l.a.Media.Event.MIDPOINT,ne),window.PlayerView.addEventListener(l.a.Media.Event.THIRDQUARTILE,ne),window.PlayerView.addEventListener(l.a.Media.Event.VOLUME_CHANGED,ne),window.PlayerView.addEventListener(l.a.Ad.Event.CUEPOINT,ne),window.PlayerView.addEventListener(l.a.Ad.Event.FAILED,ne),window.PlayerView.addEventListener(l.a.Media.Event.NOT_FOUND,ne),window.PlayerView.addEventListener(l.a.Player.Event.CONFIG_NOT_FOUND,ne),window.PlayerView.addEventListener(l.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,ne),window.PlayerView.addEventListener(l.a.UI.Event.AGE_GATE_PASSED,ne),window.PlayerView.addEventListener(l.a.UI.Event.AGE_GATE_FAILED,ne),window.PlayerView.addEventListener(l.a.Player.Event.CONFIG_CHANGED,ne),window.PlayerView.addEventListener(l.a.Player.Event.LOADED,ne),window.PlayerView.addEventListener(l.a.UI.Event.APPEARANCE_SETTINGS_CHANGED,ne),window.PlayerView.addEventListener(l.a.UI.Event.INITIAL_APPEARANCE_SETTINGS_LOADED,ne),window.PlayerView.addEventListener(l.a.Media.Event.PLAY,t._dispatchTrackingEvent),!window.fullscreenEnabled&&window.client.hasTouch&&window.addEventListener("touchmove",(function(e){t._isFullscreen&&(e.preventDefault(),Oe.debug("Event CB",{evt:"Touchmove prevented",id:window.id}))})),Te(window.CurrentVideoConfig.settings.googleAnalytics)){var e=window.CurrentVideoConfig.settings.googleAnalytics;Oe.debug("Publisher GA Tracking Id",{trackingID:e}),t.dispatchEvent("start_google_analytics",{pubTrackingId:e,universal:window.CurrentVideoConfig.settings.googleUniversal})}t.controller.startUp()};return"off"===window.PlayerSettings.advertising?(Oe.info("Advertising is disabled via embed setting"),window.postLogMessage("Advertising is disabled via embed setting","warn"),i()):t._initAds(i),window.id}},{key:"dispatchAnalyticsEvent",value:function(e,t,n,i){n&&this.dispatchEvent("analyticsEvent",{action:e,category:t,label:n,value:i})}},{key:"_removeIosInlineAttribute",value:function(e){e.removeAttribute("muted"),e.removeAttribute("playsinline"),e.muted=!1}},{key:"_onSkinLoaded",value:function(e,t,i){var a=this;a.PWBM.end("bolt_loadSkin_to_skinLoaded");var o,r,d=document.body;e&&(d.insertAdjacentHTML("beforeend",e),function(){var e=document.body.getElementsByClassName("bolt-poster")[0];if(e){var t=Object(u.i)(window.CurrentVideoConfig.content);t&&(e.style.backgroundImage="url(".concat(t,")"),e.style.backgroundPosition="center center",e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat")}}(),r=d.getElementsByClassName("bolt-container")[0],window.Skin=r,r.style.visibility="hidden",(o=Object(A.a)(l.a.UI.MAIN_VIDEO_CONTAINER).firstElementChild).setAttribute("id",t),window.client.system.ios&&window.PlayerSettings.autoplay||a._removeIosInlineAttribute(o),function(){if(window.client.isMobile){var e=function(e){return a.Video=e,window.ContentPlayer=new e(window.id,t,!1),window.ContentPlayer.muted=!!window.PlayerSettings.autoplay,window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",window.PlayerView=new X(i),a._start(t)};window.client.system.ios?Promise.resolve().then(n.bind(null,19)).then((function(t){var n=t.default;e(n)})).catch((function(e){Oe.error("Caught Error",{message:e.message,stack:e.stack})})):Promise.resolve().then(n.bind(null,20)).then((function(t){var n=t.default;e(n)})).catch((function(e){Oe.error("Caught Error",{message:e.message,stack:e.stack})}))}else Promise.resolve().then(n.bind(null,21)).then((function(e){var n=e.default;return window.PlayerView=new X(i),a.Video=n,window.ContentPlayer=new n(window.id,t,!1),window.ContentPlayer.muted=!0===window.PlayerSettings.automute,window.ContentPlayer.volume=window.PlayerSettings.volume,0===window.ContentPlayer.volume&&(window.ContentPlayer.muted=!0),window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",a._start(t)})).catch((function(e){Oe.error("Caught Error",{message:e.message,stack:e.stack})}))}())}},{key:"_loadSkin",value:function(e,t,i){var a=this;a.PWBM.end("bolt_coreJSLoaded_to_skinRequested"),a.PWBM.start("bolt_loadSkin_to_skinLoaded"),n.e(20).then(n.t.bind(null,41,7)).then((function(t){var n=t.default;a._onSkinLoaded(n,e,i)})).catch((function(e){Oe.error("Caught error",{message:e.message,stack:e.stack})}))}},{key:"playMedia",value:function(){var e=window.PlayerView.currentPlayer;e&&(e.isAd()?this.controller.play():this.controller.playPrerollAd({}))}},{key:"stopMedia",value:function(){this.controller.stop()}},{key:"replayMedia",value:function(){this.controller.replay()}},{key:"closeVideo",value:function(){this.controller.closeVideo()}},{key:"pauseMedia",value:function(){this.controller.pause()}},{key:"closeButtonClicked",value:function(){this.controller.closeButtonClicked()}},{key:"muteMedia",value:function(){this.controller.mute(!0)}},{key:"unmuteMedia",value:function(){this.controller.mute(!1)}},{key:"togglePlay",value:function(){this.controller.togglePlayPause()}},{key:"seek",value:function(e){this.controller.seek(e)}},{key:"setVolume",value:function(e){e>1?e=1:e<0&&(e=0),this.controller.setVolume(e)}},{key:"getVolume",value:function(){if(window.PlayerView.currentPlayer)return window.PlayerView.currentPlayer.volume}},{key:"getCSSUrl",value:function(){return this._defaultCss}},{key:"dispatchEvent",value:function(e,t){var n=this,i=!1;try{i=window.PlayerView.currentPlayer.isAd()}catch(e){}var a={type:"zeus_event",name:e,id:window.id,isAd:i,data:t};window.parent.postMessage(JSON.stringify(a),Object(u.h)());var o,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bolt_ad_playback_milestones";return{pipeline:"boltAds",eventType:t,data:e}};switch(e){case l.a.Media.Event.PLAY:break;case l.a.Player.Event.LOADED:o=r(t,"bolt_players");break;case l.a.Ad.Event.SESSION_START:o=r(t,"bolt_ad_sessions"),window.AdBlockDetected&&window.AdSession&&(window.AdSession.off(l.a.Ad.Event.SESSION_START),delete window.AdSession);break;case l.a.Ad.Event.SESSION_FAIL:t.resultType="failed",n.dispatchEvent("updateAdSessionCount",{adSessionCount:window.BoltAdManager._adSessionCount,sessionResult:t.resultType}),o=r(t,"bolt_ad_sessions_results");break;case l.a.Ad.Event.SESSION_ABORT:t.resultType="aborted",n.dispatchEvent("updateAdSessionCount",{adSessionCount:window.BoltAdManager._adSessionCount,sessionResult:t.resultType}),o=r(t,"bolt_ad_sessions_results");break;case l.a.Ad.Event.SESSION_END:t.resultType="complete",n.dispatchEvent("updateAdSessionCount",{adSessionCount:window.BoltAdManager._adSessionCount,sessionResult:t.resultType}),o=r(t,"bolt_ad_sessions_results");break;case l.a.Ad.Event.SESSION_BLOCKED:t.resultType="blocked",n.dispatchEvent("updateAdSessionCount",{adSessionCount:0,sessionResult:t.resultType}),o=r(t,"bolt_ad_sessions_results");break;case l.a.Ad.Event.REQUEST_START:o=r(t,"bolt_ad_requests");break;case l.a.Ad.Event.REQUEST_SUCCESS:t.resultType="succeeded",o=r(t,"bolt_ad_request_results");break;case l.a.Ad.Event.REQUEST_FAIL:t.resultType="failed",o=r(t,"bolt_ad_request_results");break;case l.a.Ad.Event.REQUEST_ABORT:t.resultType="aborted",o=r(t,"bolt_ad_request_results");break;case n.BOLT_AD_STARTED:t.milestone="started",o=r(t);break;case n.BOLT_FIRST_QUARTILE:t.milestone="q1",o=r(t);break;case n.BOLT_MIDPOINT:t.milestone="q2",o=r(t);break;case n.BOLT_THIRD_QUARTILE:t.milestone="q3",o=r(t);break;case n.BOLT_AD_COMPLETE:t.milestone="complete",o=r(t);break;case n.BOLT_AD_ERROR:t.message="error",o=r(t);break;case l.a.Ad.Event.CLICKED:o=r({clickUrl:t},"bolt_ad_clicks")}o&&(window.kinesis?window.kinesis.send(o.eventType,o.data,o.pipeline):window.kinesisEventQueue.push(o))}},{key:"updateViewabilityMetrics",value:function(e){this.controller.updateViewabilityMetrics(e)}}])&&Ce(t.prototype,i),a&&Ce(t,a),e}()}}]);