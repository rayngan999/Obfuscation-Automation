// cpe-client v0.2.18 Dailymotion
var cpeapp=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l,c,u,d,p,h,f=Array.from||(l=function(e){return"function"==typeof e},c=Math.pow(2,53)-1,u=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),c)},d=function(t){if(null!=t){if(["string","number","boolean","symbol"].indexOf(e(t))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in t)return Symbol.iterator;if("@@iterator"in t)return"@@iterator"}},p=function(e,t){if(null!=e&&null!=t){var i=e[t];if(null==i)return;if(!l(i))throw new TypeError(i+" is not a function");return i}},h=function(e){var t=e.next();return!Boolean(t.done)&&t},function(e){var t,i,n,o=this,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!l(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(t=arguments[2])}var r=p(e,d(e));if(void 0!==r){i=l(o)?Object(new o):[];var s,c,f=r.call(e);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");for(n=0;;){if(!(s=h(f)))return i.length=n,i;c=s.value,i[n]=a?a.call(t,c,n):c,n++}}else{var y=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var g,v=u(y.length);for(i=l(o)?Object(new o(v)):new Array(v),n=0;n<v;)g=y[n],i[n]=a?a.call(t,g,n):g,n++;i.length=v}return i}),y=["stp-sound","pip-position","pip-margin-h","pip-margin-v","pip-width","pip-height","pip-at-start","ads-params","ads-params-var","playlist-id","query-string","referrerpolicy"],g=["channels","languages","keywords","tags","topics"],v=["playlist","source","sort","extend_parameter"],m=["no-autonext","no-queue","no-controls","no-stp","no-pip"],b=["ads_params","app","client_type"],w=function(){function e(i){t(this,e),this.element=i,this.fieldVideoIdList=[],this.fieldVideosList=[],this.specificConfig={},this.specificContents={},this.srcAttributes={},this.extractSpecificData()}return n(e,[{key:"extractSpecificData",value:function(){var e=this;f(this.element.attributes).forEach((function(t){e.getEffectsActivationAttributes(t),e.getConfigAttributes(t),e.getContentAttributes(t),e.extractSpecialContentAttribute(t),e.extractSrcAttributes(t)})),this.constructSpecificContentVideosField()}},{key:"getConfigAttributes",value:function(e){-1!==y.indexOf(e.name)&&(this.specificConfig[e.name]=e.value)}},{key:"getContentAttributes",value:function(e){this.getContentsAttributesMultiValues(e),this.getContentsAttributesOneValue(e)}},{key:"getContentsAttributesMultiValues",value:function(e){var t=this;if(-1!==g.indexOf(e.name))if(-1===e.value.indexOf(","))this.specificContents[e.name]=e.value.trim();else{var i=e.value.split(",");this.specificContents[e.name]=[],i.forEach((function(i){t.specificContents[e.name].push(i.trim())}))}}},{key:"getContentsAttributesOneValue",value:function(e){-1!==v.indexOf(e.name)&&(this.specificContents[e.name]=e.value.trim())}},{key:"getEffectsActivationAttributes",value:function(e){-1!==m.indexOf(e.name)&&(this.specificConfig[e.name]=!0)}},{key:"extractSpecialContentAttribute",value:function(e){var t,i=this;if("video-id"===e.name)t=e.value.trim(),this.fieldVideoIdList.push(t);else if("src"===e.name){var n=/dailymotion.com\/embed\/video\/([a-zA-Z0-9]+)/;n.exec(e.value)&&(t=n.exec(e.value)[1],this.fieldVideoIdList.push(t))}"videos"===e.name&&(-1===e.value.indexOf(",")?this.fieldVideosList.push(e.value.trim()):e.value.split(",").forEach((function(e){i.fieldVideosList.push(e.trim())})))}},{key:"extractSrcAttributes",value:function(e){var t=this;e&&"src"===e.name&&b.forEach((function(i){var n=new RegExp("[?|&]"+i+"=([^&;]+?)(&|#|;|$)");e.value.match(n)&&(t.srcAttributes[i]=e.value.match(n)[1])}))}},{key:"constructSpecificContentVideosField",value:function(){(this.fieldVideoIdList.length>0||this.fieldVideosList.length>0)&&(this.specificContents.videos=[],this.fieldVideoIdList.length>0&&(this.specificContents.videos=this.specificContents.videos.concat(this.fieldVideoIdList)),this.fieldVideosList.length>0&&(this.specificContents.videos=this.specificContents.videos.concat(this.fieldVideosList)))}},{key:"config",get:function(){return this.specificConfig}},{key:"contents",get:function(){return this.specificContents}}]),e}(),k={"int.000":{category:"Internal",title:"Unknown error",description:"An unknown error occured"},"params.000":{category:"Parameter",title:"Wrong CpeId",description:"The Dailymotion CPE Id used is invalid"},"params.001":{category:"Parameter",title:"Wrong VideoId",description:"The VideoId used is invalid"}},E=new(function(){function e(){t(this,e),this._levelPriority={NONE:0,ERROR:1,WARN:2,DEBUG:3,INFO:4,LOG:5},this._level="NONE",this.debugModeRequested()&&(this._level="LOG")}return n(e,[{key:"sendError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;k.hasOwnProperty(e)||(e="int.000");var i=k[e],n=null!==t?"CPEERROR (".concat(e,") ").concat(i.title,": ").concat(i.description," | '").concat(t,"'"):"CPEERROR (".concat(e,") ").concat(i.title,": ").concat(i.description);this.error(n)}},{key:"error",value:function(){if(this.hasError()&&this.isAuthorized("ERROR")){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.error.apply(console,t)}}},{key:"info",value:function(){if(this.hasInfo()&&this.isAuthorized("INFO")){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.info.apply(console,t)}}},{key:"warn",value:function(){if(this.hasWarn()&&this.isAuthorized("WARN")){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.warn.apply(console,t)}}},{key:"log",value:function(){if(this.hasLog()&&this.isAuthorized("LOG")){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.log.apply(console,t)}}},{key:"debug",value:function(){if(this.hasDebug()&&this.isAuthorized("DEBUG")){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.debug.apply(console,t)}}},{key:"debugModeRequested",value:function(){return!!window&&!!window.cpe&&!!window.cpe.debug}},{key:"isAuthorized",value:function(e){return this._levelPriority[e]<=this._levelPriority[this.level]}},{key:"hasError",value:function(){return console&&console.error}},{key:"hasInfo",value:function(){return console&&console.info}},{key:"hasWarn",value:function(){return console&&console.warn}},{key:"hasLog",value:function(){return console&&console.log}},{key:"hasDebug",value:function(){return console&&console.debug}},{key:"level",get:function(){return this._level},set:function(e){this._level=e}}]),e}());function C(e){return!e.player.muted}function _(e){return e.player.paused}function P(e){return e.player.playing}function x(e){return P(e)||A(e)}function L(e){return e.player.reduced||e.player.pipChanging}function A(e){return e.player.isVisible50()||e.player.isVisible75()||e.player.isVisible100()}function O(e){return L(e)&&P(e)}function M(e){return L(e)&&!P(e)}function S(e){return C(e)&&P(e)}function I(e){return L(e)&&C(e)&&P(e)}function N(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(!i.length)return e;var r=i.shift();if(J(e)&&J(r))for(var s in r)J(r[s])?(e[s]||a(e,o({},s,{})),N(e[s],r[s])):a(e,o({},s,r[s]));return N.apply(void 0,[e].concat(i))}function R(e){var t=0,i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=(window.pageYOffset+window.innerHeight||document.documentElement.scrollTop+document.documentElement.clientHeight||document.body.scrollTop+document.body.clientHeight)-i,o=e.getBoundingClientRect(),a=o.top,r=o.bottom,s=o.height;return a<0&&r<0||a>n&&r>n?t=0:a>0&&r<n?t=100:a<0&&r<n?t=100*r/s:a<n&&r>n&&(t=100*(n-a)/s),t}function T(){var e=[],t=window.crypto||window.msCrypto,i=new window.Uint16Array(8);return t.getRandomValues(i),i.forEach((function(t){return e.push(("000"+t.toString(16)).slice(-4))})),[e[0]+e[1],e[2],e[3],e[4],e[5]+e[6]+e[7]].join("-")}function V(e){var t=/cpe-[a-z0-9]{5}$/;return e&&e.match(t)?e.match(t)[0]:null}function B(e,t,i){var n;return function(){var o=this,a=arguments,r=function(){n=null,i||e.apply(o,a)},s=i&&!n;clearTimeout(n),n=setTimeout(r,t),s&&e.apply(o,a)}}function D(e){return e.charAt(0).toUpperCase()+e.slice(1)}function z(t,i){return function(t,i){return"object"===e(t[i])&&!!t["".concat(i,"_enable")]}(t,i)||function(e,t){return"boolean"==typeof e[t]&&e[t]}(t,i)}function j(e,t){var i=[];switch(Object.keys(e).forEach((function(t){return i.push(e[t])})),t){case"paused":return i.filter(_);case"playing":return i.filter(P);case"playingOrVisibleGe50":return i.filter(x);case"reduced":return i.filter(L);case"visibleGe50":return i.filter(A);case"notMutedAndPlaying":return i.filter(S)}return[]}function F(e,t){var i=[];switch(Object.keys(e).forEach((function(t){return i.push(e[t])})),t){case"mostVisible":return i.reduce((function(e,t){return e.player.visibility>t.player.visibility?e:t}));case"reduced":return i.filter(L);case"reducedAndPlaying":return i.filter(O);case"reducedAndNotPlayingFilter":return i.filter(M);case"playing":return i.filter(P);case"reducedAndNotMutedAndPlaying":return i.filter(I)}return[]}var U={PLATFORM_SAFARI:/iP(?:hone|od|ad).*?OS (\d+)_(\d+)_?(\d+)?/i,BROWSER_CHROME:/android.+Chrom(?:e|ium)\/([0-9]+)\./i,BROWSER_FIREFOX:/android.+firefox\/([0-9]+)\./i};function q(){var e;return!(!window.cpe||!window.cpe.fakeUserAgentMobile)||((e=U.PLATFORM_SAFARI.exec(navigator.userAgent))?(parseInt(e[1],10)||0)>=8:(e=U.BROWSER_CHROME.exec(navigator.userAgent))?(parseInt(e[1],10)||0)>=31:!!(e=U.BROWSER_FIREFOX.exec(navigator.userAgent))&&(parseInt(e[1],10)||0)>=35)}function H(){var e="prod",t=window&&window.location&&window.location.hostname?window.location.hostname:"localhost",i=/env=([^&]+)/.exec(window.location.search.substring(1));return("preprod.dailymotion.com"===t||"api-stage.dmcdn.net"===t||/stage-(\d+).dailymotion.com/.exec(t))&&(e="preprod"),i&&(e=i[1]),e}function X(e){return e&&e.touches&&e.touches.length>0?e.touches[0].pageX?e.touches[0].pageX:e.touches[0].clientX?e.touches[0].clientX:e.touches[0].screenX:null}function W(){switch(H()){case"dev":return"./cpeEvent.js";case"qualif":case"pprod":case"preprod":return"https://preprod.dailymotion.com/js/cpe/cpeEvent.js"}return"https://static1.dmcdn.net/js/cpe/cpeEvent.min.js"}function G(e,t,i){var n,o={bubbles:!1,cancelable:!1,detail:i};if("function"==typeof CustomEvent)n=new CustomEvent(t,o);else if(document.createEvent)try{(n=document.createEvent("CustomEvent")).initCustomEvent(t,o.bubbles,o.cancelable,o.detail)}catch(e){(n=document.createEvent("Event")).initEvent(t,o.bubbles,o.cancelable)}else(n=document.createEventObject()).eventType=t,n.detail=o.detail;e.dispatchEvent?e.dispatchEvent(n):e.fireEvent&&"on".concat(t)in e&&e.fireEvent("on".concat(t),n)}function J(t){return t&&"object"===e(t)&&!Array.isArray(t)}var Y=new(function(){function e(){t(this,e),this.playerEnvInfo=null,this.configVersion=1,this.cpeDefaultClassName="cpe-xxxxx",this.trackingInitialized=!1}return n(e,[{key:"info",value:function(){var e={info:{sdk:this.getSdkInfo(),device:this.getDeviceInfo(),landing:this.getLandingInfo(),player:this.getPlayerInfo(),visitor:this.getVisitorInfo()}};return this.playerEnvInfo&&(this.playerEnvInfo.browser&&(e.info.browser=this.playerEnvInfo.browser),this.playerEnvInfo.player&&(e.info.player=this.playerEnvInfo.player)),this.getReferer()&&(e.info.landing.referer=this.getReferer()),e}},{key:"addEventTrackingIframe",value:function(e){var t=this;if(!this.trackingInitialized){var i=document.createElement("iframe");i.setAttribute("style","display: none"),i.setAttribute("name","cpe_et"),i.onload=function(){var n=document.createElement("script");n.src=e,n.onload=function(){t.trackingInitialized=!0,t.sendDisplay()},i.contentDocument.getElementsByTagName("head")[0].appendChild(n)},document.body.appendChild(i)}}},{key:"getAppInfo",value:function(){return{type:"com.dailymotion.cpe",id:window.cpe.i,version:"v0.0.29",width:window.innerWidth,height:window.innerHeight}}},{key:"getComponentInfo",value:function(e,t,i){var n=i.getComputedSize(),o={type:"video",index:0,style:"pip"!==e?"embed":i.config.config.pip.tshirts._id};return t&&(o.xid=t),n&&(n.w&&(o.width=Number(n.w.match(/(^[0-9]+)/)[1])),n.h&&(o.height=Number(n.h.match(/(^[0-9]+)/)[1]))),o}},{key:"getCurrentUrl",value:function(){return document.location.href}},{key:"getDeviceInfo",value:function(){return{type:this.getDeviceType(),width:window.innerWidth,height:window.innerHeight}}},{key:"getDeviceType",value:function(){return q()?"mobile":"desktop"}},{key:"getLandingInfo",value:function(){return{id:this.getUid()}}},{key:"getMiniplayerUid",value:function(){return this.miniplayerUuid=this.miniplayerUuid?this.miniplayerUuid:T(),this.miniplayerUuid}},{key:"getPlayerUid",value:function(){return this.playerUuid=this.playerUuid?this.playerUuid:T(),this.playerUuid}},{key:"getReferer",value:function(){return document.referrer}},{key:"getScreenInfo",value:function(){return{id:this.getScreenUid(),space:"space_cpe",name:"cpe",width:window.innerWidth,height:window.innerHeight,url:this.getCurrentUrl()}}},{key:"getScreenUid",value:function(){return this.screenUuid=this.screenUuid?this.screenUuid:T(),this.screenUuid}},{key:"getSdkInfo",value:function(){return{id:"".concat(window.cpe.i,"/").concat(this.configVersion),name:"cpe",publisher:window.cpe.account,version:"v0.0.32"}}},{key:"getSectionInfo",value:function(e,t){var i={id:"pip"===e?this.getMiniplayerUid():this.getPlayerUid(),type:"pip"===e?"pip":"player",index:"pip"===e?1e3:0,template:"t1"};return t&&(i.xid=t),i}},{key:"getUid",value:function(){return this.uuid=this.uuid?this.uuid:T(),this.uuid}},{key:"getPlayerInfo",value:function(){return this.playerEnvInfo&&this.playerEnvInfo.player?this.playerEnvInfo.players:null}},{key:"getVisitorInfo",value:function(){var e=function(){if(window.localStorage)for(var e in window.localStorage)if(/^visitor_[0-9a-f-]*$/.test(e))return JSON.parse(localStorage.getItem(e));return null}(),t={onsite:!1};return this.playerEnvInfo&&this.playerEnvInfo.visitor&&(t=s(s({},this.playerEnvInfo.visitor),t)),e&&(t.visit_number=e.number,t.visit_id=e.lastVisit),t}},{key:"getEventBusDomain",value:function(){return this.playerEnvInfo&&this.playerEnvInfo.eventBusDomain}},{key:"setConfigVersion",value:function(e){this.configVersion=e}},{key:"setPlayerEnvInfo",value:function(e){this.playerEnvInfo=e}},{key:"getEventBusEndpoint",value:function(){return document.currentScript&&/^(https?:)?\/\/api-stage\.dmcdn\.net\/\S+$/.test(document.currentScript.src)?"https://pebed.stg.dm.gg":"https://pebed.dm-event.net"}},{key:"sendAction",value:function(e){var t=e.player,i=e.gesture,n=e.uiElement;if(i&&this.trackingInitialized){var o={},a=V(t.getClassName())||this.cpeDefaultClassName,r=t.reduced?"pip":"player",s=t.dmPlayer&&t.dmPlayer.video&&t.dmPlayer.video.videoId;n=n||null,o.env=H(),o.eventBusDomain=this.getEventBusDomain(),o[a]={data:{action:{gesture:i,referenced_type:"video",referenced_xid:s},component:this.getComponentInfo(r,s,t),info:this.info().info,name:"ui_action",screen:this.getScreenInfo(),section:this.getSectionInfo(r,s)}},n&&(o[a].data.action.ui_element=n),window.frames.cpe_et.postMessage(o,window.location.origin)}}},{key:"sendDisplay",value:function(){var e={};e.env=H(),e.eventBusDomain=this.getEventBusDomain(),e[this.cpeDefaultClassName]={data:{info:this.info().info,name:"ui_display",screen:this.getScreenInfo()}},window.frames.cpe_et.postMessage(e,window.location.origin)}},{key:"sendLifeCycleError",value:function(e){var t={name:"life_cycle.errorPlayer",version:"1.0",data:{error_from:"runtime",error_code:e,created_ts:Date.now(),info:{visitor:{onsite:!1},player:{embedder:document.location.href,embedder_hostname:document.location.hostname},landing:s(s({},this.getLandingInfo()),{},{referer:document.referrer})},screen:this.getScreenInfo(),settings:{pubtool:"cpe"}}},i={channel:"player",edward:"1.1",sent_ts:Date.now(),events:[t],stack_ctx:{player_stack:"noworker"}};window.fetch(this.getEventBusEndpoint(),{method:"POST",body:JSON.stringify(i)})}}]),e}()),$=function(){function e(){t(this,e)}return n(e,[{key:"constructUrl",value:function(e){if(!e)return!1;var t="".concat(function(){switch(H()){case"dev":case"qualif":case"preprod":case"pprod":return"https://api-staging.pxl.dailymotion.com/players/"}return"https://api.pxl.dailymotion.com/players/"}()).concat(e,"?fields=config");return window.cpe&&window.cpe.noCache&&(t="".concat(t,"&rd=").concat(T())),t}},{key:"send",value:function(e,t){var i=this.constructUrl(e);try{if(!i)throw new Error("Unvalid CPE ID ".concat(e));var n=new XMLHttpRequest;n.open("GET",i,!0),n.send(null),n.timeout=1e4,n.onload=function(){var e={};200===n.status&&((e=JSON.parse(n.responseText)).config.width&&delete e.config.width,e.config.height&&delete e.config.height),E.debug("CpeApi.send return : ",e.config),t(e.config)},n.onerror=function(){Y.sendLifeCycleError("CPE_XHR_CALL_FOR_PARTNER_CONF_FAILED"),t()},n.ontimeout=function(){Y.sendLifeCycleError("CPE_XHR_CALL_FOR_PARTNER_CONF_TIMEOUT"),t()}}catch(e){Y.sendLifeCycleError("CPE_XHR_CALL_FOR_PARTNER_CONF_FAILED"),t()}}}]),e}();function Q(e,t){e&&e.classList.add(t)}function Z(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.getElementsByClassName(t);n&&n[0]&&(n[0].style.opacity=i)}function K(e,t){e&&e.classList.remove(t)}var ee=new(function(){function e(){t(this,e)}return n(e,[{key:"addPoster",value:function(e,t,i){var n;e&&(0===t.getElementsByClassName("poster").length?(n=document.createElement("div")).setAttribute("class","poster hide hard"):(n=t.getElementsByClassName("poster")[0]).style.background="",n.style.background="url(".concat(e.thumbnail_url,")"),n.style["background-size"]="cover",n.style.width=i.w||"0px",n.style.height=i.h||"0px",t.appendChild(n))}},{key:"showElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;K(e,"hard"),setTimeout((function(){return K(e,"hide")}),1e3*t)}},{key:"hideElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;setTimeout((function(){return Q(e,"hide")}),1e3*t),Q(e,"hard")}}]),e}()),te={autonext_enable:!0,autonext:{timer:5e3},collapse_enable:!1,collapse:{direction:"height",speed:.5,type:"linear"},expand_enable:!1,new_player:!0,pip_enable:!1,pip:{margin:{h:10,v:30},tshirts:{_id:"M",dimensions:{desktop:{width:{L:"410",M:"365",S:"320"},height:{L:"230",M:"205",S:"180"}},mobile:{width:{L:"308",M:"274",S:"240"},height:{L:"173",M:"154",S:"134"}}}},position:"bottom-right"},pip_at_start_enable:!1,player_style_enable:!1,player_style:{player_color:"ffcc33",subtitles_enable:!1},responsive:!0,scroll_to_play_enable:!1,scroll_to_pause_enable:!1,scroll_to_play:{sound:!1},up_next_queue_enable:!0,version:0},ie=function(){function e(){t(this,e),this.defaultConfig=te,this.config={}}return n(e,[{key:"init",value:function(e){var t=q();this.config={isMobile:t,context:{env:H(),eventTrackingUrl:W(),host:window&&window.location&&window.location.host?window.location.host:"localhost:8080"}},N(this.config,this.defaultConfig,e),this.globalConfigInjector()}},{key:"getAll",value:function(){return this.config}},{key:"globalConfigInjector",value:function(){window.cpe&&window.cpe.f&&(E.debug("Config.globalConfigInjector > A new global partner config found: ",window.cpe.f),this.config.autonext_enable=window.cpe.f.hasOwnProperty("autonext_enable")?window.cpe.f.autonext_enable:this.config.autonext_enable,this.config.scroll_to_play.sound=window.cpe.f.hasOwnProperty("stp_sound")?window.cpe.f.stp_sound:this.config.scroll_to_play.sound,this.config.scroll_to_play_enable=window.cpe.f.hasOwnProperty("stp_enable")?window.cpe.f.stp_enable:this.config.scroll_to_play_enable,this.config.scroll_to_pause_enable=window.cpe.f.hasOwnProperty("scroll_to_pause")?window.cpe.f.scroll_to_pause:this.config.scroll_to_pause_enable,this.config.pip.position=window.cpe.f.pip_position?window.cpe.f.pip_position:this.config.pip.position,this.config.pip.height=window.cpe.f.pip_height?window.cpe.f.pip_height:this.config.pip.height,this.config.pip.width=window.cpe.f.pip_width?window.cpe.f.pip_width:this.config.pip.width,this.config.pip.margin.h=window.cpe.f.pip_margin_h?window.cpe.f.pip_margin_h:this.config.pip.margin.h,this.config.pip.margin.v=window.cpe.f.pip_margin_v?window.cpe.f.pip_margin_v:this.config.pip.margin.v,this.config.pip.tshirts._id=window.cpe.f.tshirt?window.cpe.f.tshirt:this.config.pip.tshirts._id,this.config.pip_enable=window.cpe.f.hasOwnProperty("pip_enable")?window.cpe.f.pip_enable:this.config.pip_enable,this.config.new_player=window.cpe.f.hasOwnProperty("new_player")?window.cpe.f.new_player:this.config.new_player,this.config.player_style_enable=window.cpe.f.hasOwnProperty("player_style_enable")?window.cpe.f.player_style_enable:this.config.player_style_enable,this.config.player_style.player_color=window.cpe.f.hasOwnProperty("player_style_color")?window.cpe.f.player_style_color:this.config.player_style.player_color)}},{key:"account",get:function(){return window.cpe.account=this.config.account,this.config.account||null}},{key:"autoNext",get:function(){return{nextSource:this.config.autonext.next_source,enable:this.config.autonext_enable,timer:this.config.autonext.timer}}},{key:"collapse",get:function(){return s({enable:this.config.collapse_enable},this.config.collapse)}},{key:"expand",get:function(){return this.config.expand_enable}},{key:"pip",get:function(){var e=this.config,t=e.pip_enable,i=e.pip,n=i.margin,o=i.position,a=i.tshirts.dimensions;return{enable:t,margin:n,position:o,width:a[this.isMobile?"mobile":"desktop"].width[this.config.pip.tshirts._id],height:a[this.isMobile?"mobile":"desktop"].height[this.config.pip.tshirts._id]}}},{key:"pipAtStart",get:function(){return{enable:this.config.pip_at_start_enable}}},{key:"playerStyle",get:function(){return s({enable:this.config.player_style_enable},this.config.player_style)}},{key:"responsive",get:function(){return this.config.responsive}},{key:"scrollToPlay",get:function(){return s({enable:this.config.scroll_to_play_enable},this.config.scroll_to_play)}},{key:"scrollToPause",get:function(){return{enable:this.config.scroll_to_pause_enable}}},{key:"context",get:function(){return this.config.context}},{key:"isMobile",get:function(){return this.config.isMobile}},{key:"upNextQueue",get:function(){return{enable:this.config.up_next_queue_enable}}},{key:"version",get:function(){return this.config.version}}]),e}(),ne=new(function(){function e(){t(this,e)}return n(e,[{key:"collapse",value:function(e){Q(e.dmPlayer,"linearHidden"),e.collapsed=!0}},{key:"expand",value:function(e){K(e.dmPlayer,"linearHidden"),e.collapsed=!1}}]),e}()),oe=new(function(){function e(){t(this,e),this.onEffectDuration=.2,this.offEffectDuration=.2,this.closeBtnTimeout=null,this.controlLayerTimeout=null,this.swipeOn=!1,this.swipeRight=null,this.swipeLeft=null,this.topMarginMini=41}return n(e,[{key:"reduce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.pipChanging||!e.reduceAllowed||e.reduced||(e.pipChanging=!0,Y.sendAction({player:e,gesture:"cpe_deactivate",uiElement:t}),this.reduceEffect(e),Y.sendAction({player:e,gesture:"cpe_activate",uiElement:t}))}},{key:"maximize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!e.pipChanging&&e.reduced&&(e.pipChanging=!0,Y.sendAction({player:e,gesture:"cpe_deactivate",uiElement:t}),this.maximizeEffect(e),t=this.getTrackingState(t),Y.sendAction({player:e,gesture:"cpe_activate",uiElement:t}))}},{key:"getTrackingState",value:function(e){return-1!==["close_icon","no_autonext","keypress"].indexOf(e)?"":e}},{key:"reduceEffect",value:function(e){var t=this;this.handlePoster(e,"show"),this.slide(e,e.config.pip),e.nearlyFinished||e.adPlaying||setTimeout((function(){return t.addCloseBtn(e)}),1e3*this.onEffectDuration)}},{key:"maximizeEffect",value:function(e){this.removeCloseBtn(e),this.slide(e,e.dmPlayerConfig),this.handlePoster(e,"hide")}},{key:"handlePoster",value:function(e,t){var i=e.insiderContainer.getElementsByClassName("poster");i&&1===i.length&&ee["".concat(t,"Element")](i[0],Math.min(this.onEffectDuration,this.offEffectDuration))}},{key:"getSlideDirection",value:function(e){var t=e.position;return this.swipeLeft||this.swipeRight?this.swipeLeft?"left":"right":/top/.test(t)?"top":"bottom"}},{key:"getTranslationValue",value:function(e,t,i){var n,o=e.reduced,a=i.width,r=i.height;i.margin;switch(t){case"top":n=-(Number(r)+2*this.topMarginMini);break;case"bottom":n=Number(r);break;case"left":n=-Number(a);break;case"right":n=Number(a)}return o?n:-n}},{key:"slide",value:function(e,t){var i,n=this,o=t.width,a=t.height,r=e.dmPlayer,s=e.reduced?this.offEffectDuration:this.onEffectDuration,l=this.getSlideDirection(e.config.pip),c=this.getTranslationValue(e,l,e.config.pip);e.reduced||(Q(e.playerContainer,"pip"),"top"===l||"bottom"===l?(i=e.config.pip.margin.v-Number(e.config.pip.height),"top"===l&&(i-=this.topMarginMini)):i=e.config.pip.margin.v-Number(e.config.pip.width),e.playerContainer.style[l]="".concat(i,"px"),r.width=o,r.height=a),r.style.transform="top"===l||"bottom"===l?"translateY(".concat(c,"px)"):"translateX(".concat(c,"px)"),r.style.transition="transform ".concat(s,"s ease-in-out"),setTimeout((function(){r.style.transform="",r.style.transition="",e.reduced?(K(e.playerContainer,"pip"),r.width=o,r.height=a,"top"===l||"bottom"===l?(i=Number(e.config.pip.margin.v),"top"===l&&(i+=n.topMarginMini)):i=Number(e.config.pip.margin.h),e.playerContainer.style[l]="".concat(i,"px"),e.reduced=!1):(e.playerContainer.style[l]="".concat("top"===l?e.config.pip.margin.v+n.topMarginMini:e.config.pip.margin.v,"px"),e.reduced=!0,e.play()),e.pipChanging=!1}),1e3*s),this.swipeLeft=null,this.swipeRight=null}},{key:"addCloseBtn",value:function(e){var t=this,i="cpeClosePipBtn",n=[{evt:"click",cb:this.onCloseBtnClicked.bind(this,e)}];q()?i+=" alwaysDisplayed":(e.playerContainer.addEventListener("mouseover",(function(i){return t.showCloseButton(e)})),e.playerContainer.addEventListener("mouseleave",(function(i){return t.hideCloseButton(e)}))),function(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=document.createElement("div"),r=document.createElement("img");a.setAttribute("class",t),r.setAttribute("src",n),r.setAttribute("class",i),o&&o.length>0&&o.forEach((function(e){return a.addEventListener(e.evt,e.cb)})),a.appendChild(r),e.appendChild(a)}(e.playerContainer,i,"cpeClosePipPicto","".concat(function(){switch(H()){case"dev":return"";case"qualif":case"pprod":case"preprod":return"https://api-stage.dmcdn.net/pxl/cpe/"}return"https://api.dmcdn.net/pxl/cpe/"}(),"btnClose.png"),n)}},{key:"removeCloseBtn",value:function(e){var t=this,i=[{evt:"click",cb:this.onCloseBtnClicked.bind(this,e)}];q()||(e.playerContainer.removeEventListener("mouseover",(function(i){return t.showCloseButton(e)})),e.playerContainer.removeEventListener("mouseleave",(function(i){return t.hideCloseButton(e)}))),function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.getElementsByClassName(t);n&&n[0]&&(i&&i.length>0&&i.forEach((function(e){return n[0].removeEventListener(e.evt,e.cb)})),e.removeChild(n[0]))}(e.playerContainer,"cpeClosePipBtn",i)}},{key:"onCloseBtnClicked",value:function(e,t){e.disablePip(),e.notifyManager({name:"btnClicked",data:"maximize"}),G(window,"cpepipclose",{player:e.dmPlayer})}},{key:"onTouchstart",value:function(e,t){this.swipeOn=!0,this.swipeX=X(t)||this.Swipe}},{key:"onTouchmove",value:function(e,t){if(this.swipeOn){var i=this.swipeX,n=this.swipeRight&&this.swipeRight?"right":this.swipeLeft&&this.swipeLeft?"left":null;this.swipeX=X(t)||this.Swipe,this.swipeRight=i<this.swipeX,this.swipeLeft=i>this.swipeX,this.swipeOn=!("right"===n&&!this.swipeRight||"left"===n&&!this.swipeLeft)}}},{key:"onTouchend",value:function(e,t){if(this.swipeOn){var i=/right/.test(e.config.pip.position)?"right":"left";this.swipeRight&&"right"===i||this.swipeLeft&&"left"===i?(e.disablePip(),e.notifyManager({name:"swipe",data:"maximize"})):(this.swipeRight=null,this.swipeLeft=null)}this.swipeOn=!1}},{key:"showCloseButton",value:function(e){clearTimeout(this.closeBtnTimeout),this.closeBtnTimeout=null,Z(e.playerContainer,"cpeClosePipBtn",.45)}},{key:"hideCloseButton",value:function(e){this.closeBtnTimeout||(this.closeBtnTimeout=setTimeout((function(){return Z(e.playerContainer,"cpeClosePipBtn",0)}),1500))}}]),e}()),ae=new(function(){function e(){t(this,e),this._account=null,this._cpeId=null,this.playerList={},this.ready=!1,this.initVideoLoadingDone=!1}return n(e,[{key:"addCpePlayer",value:function(e,t){this.playerList[e]&&(this.playerList[e].player=t)}},{key:"removeCpePlayers",value:function(){var e=this;Object.keys(this.playerList).forEach((function(t){return e.removeCpePlayer(e.playerList[t])}))}},{key:"removeCpePlayer",value:function(e){e.player.destroy()}},{key:"onApiReady",value:function(e){var t=this,i=0,n=[];Object.keys(this.playerList).forEach((function(e){return i+=t.playerList[e].player.apiReady?1:0})),this.ready=i===Object.keys(this.playerList).length,this.ready&&(Object.keys(this.playerList).forEach((function(e){return n.push(t.playerList[e].player.dmPlayer)})),G(window,"cpeready",{players:n}),E.log("Manager.onApiReady: Manager ready to rocks"))}},{key:"onAdPlay",value:function(e){var t=this.getPlayer(e);t&&(this.pipManagementOnAdPlay(t),this.onPlay(e))}},{key:"onAdEnd",value:function(e){var t=this.getPlayer(e);t&&this.pipManagementOnAdEnd(t)}},{key:"onBtnClicked",value:function(e,t){var i=this.getPlayer(e);if(i)switch(t){case"maximize":this.pipManagementOnMaximizeClicked(i,"close_icon"),this.stpManagementOnBtnClicked()}}},{key:"onEnded",value:function(e){var t=this.getPlayer(e);t&&(this.eacManagementOnEnded(t),this.pipManagementOnEnded(t),Y.sendAction({player:t,gesture:"cpe_video_end",cpeId:this._cpeId,account:this._account}))}},{key:"onError",value:function(e){var t=this.getPlayer(e);t&&t.destroy()}},{key:"onEscape",value:function(){this.pipManagementOnEscape()}},{key:"onFullscreenChange",value:function(e,t){var i=this.getPlayer(e);i&&this.pipManagementOnFullscreenChanged(i)}},{key:"onMuteChanged",value:function(e,t){var i=this.getPlayer(e);i&&(this.stpManagementOnMuteChanged(i),this.pipManagementOnMuteChanged(i))}},{key:"onPlay",value:function(e){var t=this.getPlayer(e);t&&this.pipManagementOnPlay(t)}},{key:"onSwipe",value:function(e,t){var i=this.getPlayer(e);if(i)switch(t){case"maximize":this.pipManagementOnMaximizeClicked(i,"swipe"),this.stpManagementOnBtnClicked()}}},{key:"onVideoChange",value:function(e,t){var i=this,n=this.getPlayer(e),o=0;n&&("first_load"===t&&(Object.keys(this.playerList).forEach((function(e){return o+=i.playerList[e].player.initLoading?1:0})),this.initVideoLoadingDone=o===Object.keys(this.playerList).length,this.initVideoLoadingDone&&(E.log("Manager.onVideoChange: Manager ready, all first video are loaded on each CPE"),this.stpManagementOnVideoChange())),n.reduced&&oe.addCloseBtn(n))}},{key:"onVideoEnd",value:function(e){var t=this.getPlayer(e);this.eacManagementOnEnded(t),this.pipManagementOnEnded(t),Y.sendAction({player:t,gesture:"cpe_video_end",cpeId:this._cpeId,account:this._account})}},{key:"onVisible",value:function(e){var t=this.getPlayer(e);t&&(this.pipManagementOnVisible(t),this.stpManagementOnVisible(t))}},{key:"eacManagementOnEnded",value:function(e){e.config.collapse.enable&&ne.collapse(e)}},{key:"pipManagementOnAdEnd",value:function(e){e.reduced&&!e.fullscreen&&oe.addCloseBtn(e)}},{key:"pipManagementOnAdPlay",value:function(e){e.reduced&&oe.removeCloseBtn(e)}},{key:"pipManagementOnEnded",value:function(e){e.reduced&&oe.removeCloseBtn(e),e.config.autoNext.enable||e.config.upNextQueue.enable||oe.maximize(e,"no_autonext")}},{key:"pipManagementOnEscape",value:function(){var e=F(this.playerList,"reduced")[0];if(e){var t=e.player;oe.maximize(t,"keypress"),t.disablePip()}}},{key:"pipManagementOnMaximizeClicked",value:function(e,t){oe.maximize(e,t)}},{key:"pipManagementOnMuteChanged",value:function(e){var t=F(this.playerList,"reduced");if((t=t.filter((function(t){return t.player.id!==e.id}))).length>0){var i=t[0].player;i.pause(),oe.maximize(i)}}},{key:"pipManagementOnPlay",value:function(e){var t=F(this.playerList,"reducedAndNotMutedAndPlaying");if(t=t.filter((function(t){return t.player.id!==e.id})),!e.muted&&t.length>0){var i=t[0].player;i.pause(),oe.maximize(i)}}},{key:"pipManagementOnVisible",value:function(e){if(e.visibility>=25)oe.maximize(e,"scroll");else if(e.config.pip.enable&&e.reduceAllowed&&e.playing&&e.visibility<=25&&!e.fullscreen){var t=F(this.playerList,"reduced");(t=t.filter((function(t){return t.player.id!==e.id}))).length>0?t[0].player.playing||(oe.maximize(t[0].player,"scroll"),oe.reduce(e,"scroll")):oe.reduce(e,"scroll")}}},{key:"pipManagementOnFullscreenChanged",value:function(e){var t=j(this.playerList,"reduced");(t=t.filter((function(t){return t.player.id!==e.id}))).forEach((function(e){var t=e.player;t.pause("cpe_paused"),oe.maximize(t)})),e.reduced&&!e.fullscreen&&oe.addCloseBtn(e)}},{key:"stpManagementOnBtnClicked",value:function(){var e=F(this.playerList,"mostVisible");e&&this.stpManagementOnVisible(e.player)}},{key:"stpManagementOnMuteChanged",value:function(e){if(!e.muted){var t=j(this.playerList,"notMutedAndPlaying");(t=t.filter((function(t){return t.player.id!==e.id}))).forEach((function(e){var t=e.player;t.setMuted(!0),t.visibility<50&&t.pause("cpe_paused")}))}}},{key:"stpManagementOnVideoChange",value:function(){var e=F(this.playerList,"mostVisible");e&&this.stpManagementOnVisible(e.player)}},{key:"stpManagementOnVisible",value:function(e){var t,i=this;e.config.scrollToPlay.enable&&e.config.scrollToPause.enable&&e.playing&&!e.reduced&&!e.fullscreen&&(0===e.visibility?e.pause("cpe_scrollToPause"):100===e.visibility&&this.startVideo(e)),e.visibility>=50&&e.config.scrollToPlay.enable&&e.autoplayAllowed&&((t=(t=j(this.playerList,"playingOrVisibleGe50")).filter((function(t){return t.player.id!==e.id}))).length>0?t.forEach((function(n){var o=n.player;e.config.scrollToPlay.sound?o.pipChanging||(o.visibility<=e.visibility?i.startVideo(e)&&(o.pause("cpe_paused"),oe.maximize(o)):i.startVideo(o)&&e.pause("cpe_paused")):o.muted?!o.reduced&&o.visibility<=e.visibility?(e.playing||i.startVideo(e))&&o.pause("cpe_paused"):o.reduced&&1===t.length?i.startVideo(e):o.playing&&e.playing&&e.pause("cpe_paused"):1===t.length&&(e.setMuted(!0),i.startVideo(e))})):e.pipChanging||this.startVideo(e))}},{key:"startVideo",value:function(e){var t=!1;return e.playing||e.ended||(e.play("cpe_playing","scroll"),t=!0,e.config.scrollToPlay.enable&&e.setMuted(!e.config.scrollToPlay.sound),e.collapsed&&e.eac.expand()),t}},{key:"getPlayer",value:function(e){return this.playerList[e]?this.playerList[e].player:null}},{key:"update",value:function(e,t){var i=this.getPlayer(e);if(i){switch(t.name){case"apiReady":this.onApiReady(e),i.config.pipAtStart.enable&&i.visibility<25&&oe.reduce(i,"pipAtStart");break;case"adPlay":this.onAdPlay(e);break;case"adEnd":this.onAdEnd(e);break;case"btnClicked":this.onBtnClicked(e,t.data);break;case"ended":this.onEnded(e);break;case"error":this.onError(e);break;case"escape":this.onEscape();break;case"fullscreen":this.onFullscreenChange(e);break;case"muteChanged":this.onMuteChanged(e,t.data);break;case"play":this.onPlay(e);break;case"swipe":this.onSwipe(e,t.data);break;case"videoChange":this.onVideoChange(e,t.data);break;case"videoEnd":this.onVideoEnd(e);break;case"visibility":this.onVisible(e)}E.log("Manager.update: event received for player["+e+"] > ",t)}}},{key:"account",set:function(e){this._account=e},get:function(){return this._account}},{key:"cpeId",set:function(e){this._cpeId=e},get:function(){return this._cpeId}}]),e}()),re=function(){function e(i,n,o,a,r){t(this,e),this.id=i,this.loadConfig(a,r),this.previousVideoId=null,this.initState(),o.params.mute=this.muted,this.dmPlayerConfig=o,"dev"===H()&&(DM._domain.www="http://stage-01.dailymotion.com"),"preprod"===H()&&(DM._domain.www="http://preprod.dailymotion.com"),this.dmPlayer=DM.player(n,this.dmPlayerConfig),this.playerContainer=this.dmPlayer.parentElement,this.insiderContainer=this.playerContainer.parentElement,this.addListeners(),this.playerCountdownTimer=null;var s=this.getComputedSize();this.initialWidth=s.w||null,this.initialHeight=s.h||null,this.dmPlayer.style.height="".concat(s.h,"px !important"),this.destroy=this.destroy.bind(this)}return n(e,[{key:"addListeners",value:function(){this.dmPlayer.addEventListener("apiready",this.onApiReady.bind(this)),this.dmPlayer.addEventListener("ad_end",this.onAdEnd.bind(this)),this.dmPlayer.addEventListener("error",this.onError.bind(this)),this.dmPlayer.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),this.dmPlayer.addEventListener("loadedmetadata",this.onLoaded.bind(this)),this.dmPlayer.addEventListener("pause",B(this.onPause.bind(this),100)),this.dmPlayer.addEventListener("ad_pause",this.onPause.bind(this)),this.dmPlayer.addEventListener("play",this.onPlay.bind(this)),this.dmPlayer.addEventListener("ad_play",this.onAdPlay.bind(this)),this.dmPlayer.addEventListener("seeking",this.onSeeking.bind(this)),this.dmPlayer.addEventListener("ad_start",this.onAdPlay.bind(this)),this.dmPlayer.addEventListener("start",this.onStart.bind(this)),this.dmPlayer.addEventListener("videochange",this.onVideoChange.bind(this)),this.dmPlayer.addEventListener("video_start",this.onPlay.bind(this)),this.dmPlayer.addEventListener("video_end",this.onVideoEnd.bind(this)),this.dmPlayer.addEventListener("volumechange",this.onVolumeChanged.bind(this)),document.addEventListener("keyup",this.onEscapePressed.bind(this)),document.addEventListener("scroll",B(this.onScroll.bind(this),100),!0),window.addEventListener("resize",B(this.onScreenResized.bind(this),100))}},{key:"removeListeners",value:function(){this.dmPlayer.removeEventListener("apiready",this.onApiReady.bind(this)),this.dmPlayer.removeEventListener("ad_end",this.onAdEnd.bind(this)),this.dmPlayer.removeEventListener("error",this.onError.bind(this)),this.dmPlayer.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),this.dmPlayer.removeEventListener("loadedmetadata",this.onLoaded.bind(this)),this.dmPlayer.removeEventListener("pause",this.onPause.bind(this)),this.dmPlayer.removeEventListener("ad_pause",this.onPause.bind(this)),this.dmPlayer.removeEventListener("play",this.onPlay.bind(this)),this.dmPlayer.removeEventListener("ad_play",this.onAdPlay.bind(this)),this.dmPlayer.removeEventListener("seeking",this.onSeeking.bind(this)),this.dmPlayer.removeEventListener("ad_start",this.onAdPlay.bind(this)),this.dmPlayer.removeEventListener("start",this.onStart.bind(this)),this.dmPlayer.removeEventListener("videochange",this.onVideoChange.bind(this)),this.dmPlayer.removeEventListener("video_start",this.onPlay.bind(this)),this.dmPlayer.removeEventListener("video_end",this.onVideoEnd.bind(this)),this.dmPlayer.removeEventListener("volumechange",this.onVolumeChanged.bind(this)),document.removeEventListener("keyup",this.onEscapePressed.bind(this)),document.removeEventListener("scroll",B(this.onScroll.bind(this),100),!0),window.removeEventListener("resize",B(this.onScreenResized.bind(this),100))}},{key:"initState",value:function(){this.state={adPlaying:!1,apiReady:!1,collapsed:!1,dataLoaded:!1,ended:!1,expanded:!1,fullscreen:!1,initLoading:!1,muted:this.config.scrollToPlay.enable&&!this.config.scrollToPlay.sound,reduced:!1,playing:!1,videoEnded:!1,visibility:0},this.autoplayAllowed=!0,this.autoplayAllowedSaved=!0,this.autopauseRequested=!1,this.pipChanging=!1,this.reduceAllowed=!0,this.pauseRequested=!1}},{key:"loadConfig",value:function(e,t){this.config=new ie,this.config.init(t),this.config.config.autonext_enable=!e["no-autonext"]&&this.config.config.autonext_enable,this.config.config.pip_enable=!e["no-pip"]&&this.config.config.pip_enable,this.config.config.pip.position=e["pip-position"]?e["pip-position"]:this.config.config.pip.position,this.config.config.pip.height=e["pip-height"]?e["pip-height"]:this.config.config.pip.height,this.config.config.pip.width=e["pip-width"]?e["pip-width"]:this.config.config.pip.width,this.config.config.pip.margin.h=e["pip-margin-h"]?e["pip-margin-h"]:this.config.config.pip.margin.h,this.config.config.pip.margin.v=e["pip-margin-v"]?e["pip-margin-v"]:this.config.config.pip.margin.v,this.config.config.pip_at_start_enable=e.hasOwnProperty("pip-at-start")||this.config.config.pip_at_start_enable,this.config.config.scroll_to_play_enable=!e["no-stp"]&&this.config.config.scroll_to_play_enable,this.config.config.scroll_to_play.sound=e["stp-sound"]?"true"===e["stp-sound"]:this.config.config.scroll_to_play.sound,this.config.config.responsive=e.responsive?"true"===e.responsive:this.config.config.responsive,E.log("CpePlayer.loadConfig: config used for player [".concat(this.id,"] > "),this.config.getAll())}},{key:"onApiReady",value:function(e){var t=this.getEnvironmentInfo();this.apiReady=!0,this.checkVisibility(),Y.setPlayerEnvInfo(t),this.dmPlayer.setProp("neon",Y.info()),Y.addEventTrackingIframe(this.config.context.eventTrackingUrl),this.notifyManager({name:"apiReady",data:!0})}},{key:"onEnd",value:function(e){this.ended=!0,this.playing=!1,this.notifyManager({name:"ended",data:!0})}},{key:"onAdEnd",value:function(e){this.adPlaying=!1,this.notifyManager({name:"adEnd",data:!0})}},{key:"onAdPlay",value:function(e){this.adPlaying||this.notifyManager({name:"adPlay",data:!0}),this.adPlaying=!0,this.playing=!0,this.onPlay(e)}},{key:"onError",value:function(e){this.notifyManager({name:"error",data:null})}},{key:"onEscapePressed",value:function(e){27===e.keyCode&&this.notifyManager({name:"escape",data:null})}},{key:"onFullscreenChange",value:function(e){this.fullscreen=!this.fullscreen,this.notifyManager({name:"fullscreen",data:this.fullscreen})}},{key:"onLoaded",value:function(e){this.dataLoaded=!0}},{key:"onMuteBtnClicked",value:function(e){this.setMuted(!this.muted)}},{key:"onPause",value:function(e){this.autopauseRequested||(this.disableStp(),this.config.scrollToPlay.enable&&Y.sendAction({player:this,gesture:"cpe_paused",uiElement:"player"})),this.autopauseRequested=!1,this.pauseRequested=!1,this.playing=!1}},{key:"onPlay",value:function(e){this.playing||this.notifyManager({name:"play",data:!0}),this.playing=!0,this.setMuted(this.muted)}},{key:"onScreenResized",value:function(e){var t=this.getComputedSize();this.initialWidth=t.w||null,this.initialHeight=t.h||null}},{key:"onScroll",value:function(e){this.checkVisibility()}},{key:"onStart",value:function(e){this.onPlay(e)}},{key:"onSeeking",value:function(e){this.autoplayAllowed=this.autoplayAllowedSaved,this.notifyManager({name:"seeking",data:this.dmPlayer.currentTime})}},{key:"onVideoChange",value:function(e){this.initLoading?this.notifyManager({name:"videoChange",data:"load"}):(this.initLoading=!0,this.notifyManager({name:"videoChange",data:"first_load"}))}},{key:"onVideoEnd",value:function(e){this.ended=!0,this.playing=!1,this.notifyManager({name:"videoEnd",data:!0})}},{key:"onVolumeChanged",value:function(e){var t=this.muted;this.muted=this.dmPlayer.muted,0===this.dmPlayer.volume&&(this.muted=!0),t!==this.muted&&this.notifyManager({name:"muteChanged",data:this.muted})}},{key:"disablePip",value:function(){this.reduceAllowed=!1}},{key:"disableStp",value:function(){this.config.scrollToPause.enable&&"cpe_scrollToPause"===this.pauseRequested?this.autoplayAllowed=!0:(this.autoplayAllowedSaved=this.autoplayAllowed,this.autoplayAllowed=!1)}},{key:"getClassName",value:function(){return this.insiderContainer.getAttribute("class")}},{key:"getComputedSize",value:function(){return{w:window.getComputedStyle(this.dmPlayer).width,h:window.getComputedStyle(this.dmPlayer).height}}},{key:"getEnvironmentInfo",value:function(){return this.dmPlayer._environmentInfo||null}},{key:"getWidth",value:function(){return this.insiderContainer.getElementsByTagName("iframe")[0].getBoundingClientRect().width}},{key:"goToEnd",value:function(e){this.apiReady&&this.dmPlayer.duration&&(this.dmPlayer.play(),this.dmPlayer.seek(this.dmPlayer.duration))}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.apiReady&&this.autoplayAllowed&&!this.playing&&(this.playing=!0,this.dmPlayer.play(),Y.sendAction({player:this,gesture:e,uiElement:t}))}},{key:"playPause",value:function(){this.apiReady&&(this.playing?this.pause():this.play())}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.apiReady&&this.playing&&(this.pauseRequested=e,this.autopauseRequested=!this.reduced,this.playing=!1,this.dmPlayer.pause(),Y.sendAction({player:this,gesture:e,uiElement:t}))}},{key:"seek",value:function(e){this.apiReady&&this.dmPlayer.seek(e)}},{key:"setMuted",value:function(e){e||0!==this.dmPlayer.volume?this.dmPlayer.setMuted(e):this.dmPlayer.setVolume(.5)}},{key:"notifyManager",value:function(e){ae.update(this.id,e)}},{key:"checkVisibility",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.visibility=R(this.insiderContainer),e&&!this.fullscreen&&this.notifyManager({name:"visibility",data:this.visibility})}},{key:"isHidden",value:function(){return 0===this.visibility}},{key:"isVisible25",value:function(){return 25===this.visibility}},{key:"isVisible50",value:function(){return 50===this.visibility}},{key:"isVisible75",value:function(){return 75===this.visibility}},{key:"isVisible100",value:function(){return 100===this.visibility}},{key:"destroy",value:function(){var e=ae.playerList[V(this.getClassName())];DM.destroy(this.dmPlayer.id),this.removeListeners(),e.container.parentNode.parentNode.replaceChild(window.cpe._ANCHORS[e.newClassName],e.container.parentNode),delete window.cpe._ANCHORS[e.newClassName],delete ae.playerList[e.newClassName],this.dmPlayer=null}},{key:"adPlaying",get:function(){return this.state.adPlaying},set:function(e){this.state.adPlaying=e}},{key:"apiReady",get:function(){return this.state.apiReady},set:function(e){this.state.apiReady=e}},{key:"collapsed",get:function(){return this.state.collapsed},set:function(e){this.state.collapsed=e}},{key:"countdownTimer",get:function(){return this.playerCountdownTimer},set:function(e){this.playerCountdownTimer=e}},{key:"dataLoaded",get:function(){return this.state.dataLoaded},set:function(e){this.state.dataLoaded=e}},{key:"ended",get:function(){return this.state.ended},set:function(e){this.state.ended=e}},{key:"expanded",get:function(){return this.state.expanded},set:function(e){this.state.expanded=e}},{key:"fullscreen",get:function(){return this.state.fullscreen},set:function(e){this.state.fullscreen=e}},{key:"initLoading",get:function(){return this.state.initLoading},set:function(e){this.state.initLoading=e}},{key:"muted",get:function(){return this.state.muted},set:function(e){this.state.muted=e}},{key:"reduced",get:function(){return this.state.reduced},set:function(e){this.state.reduced=e}},{key:"playing",get:function(){return this.state.playing},set:function(e){this.state.playing=e}},{key:"videoEnded",get:function(){return this.state.videoEnded},set:function(e){this.state.videoEnded=e}},{key:"visibility",get:function(){return this.state.visibility},set:function(e){this.state.visibility=function(e){var t=0;return 100===e?t=100:e>=75?t=75:e>=50?t=50:e>=25&&(t=25),t}(e)}}]),e}(),se=new(function(){function e(){t(this,e)}return n(e,[{key:"add",value:function(e,t,i,n,o){this.configLoader=o,this.style=document.createElement("style"),this.originalSize=i,this.responsivePlayer=n,this.addCommonStyle(t);var a=o.getAll();for(var r in a)z(a,r)&&this.hasOptionStyle(r)&&this["add".concat(D(r),"Style")](t);e.appendChild(this.style)}},{key:"addCollapseStyle",value:function(e){this.style.innerHTML+=".".concat(e," .linearHidden {\n      height: 0px;\n      -webkit-transition: ").concat(this.configLoader.collapse.direction," ").concat(this.configLoader.collapse.speed,"s ").concat(this.configLoader.collapse.type,";\n      -moz-transition: ").concat(this.configLoader.collapse.direction," ").concat(this.configLoader.collapse.speed,"s ").concat(this.configLoader.collapse.type,";\n      -ms-transition: ").concat(this.configLoader.collapse.direction," ").concat(this.configLoader.collapse.speed,"s ").concat(this.configLoader.collapse.type,";\n      -o-transition: ").concat(this.configLoader.collapse.direction," ").concat(this.configLoader.collapse.speed,"s ").concat(this.configLoader.collapse.type,";\n      transition: ").concat(this.configLoader.collapse.direction," ").concat(this.configLoader.collapse.speed,"s ").concat(this.configLoader.collapse.type,";\n    }")}},{key:"addPipStyle",value:function(e){this.style.innerHTML+="\n      @keyframes appear {\n        0% {opacity: 0;}\n        100% {opacity: 1;}\n      }\n      @keyframes disappear {\n        0% {opacity: 1;}\n        100% {opacity: 0;}\n      }\n      .".concat(e," i.cpe-btn-close {\n        z-index: 2147483647;\n        position: absolute;\n        top: 9px;\n        left: 9px;\n        width: 25px;\n        height: 25px;\n        cursor: pointer;\n        color: #ffffff;\n      }\n      .").concat(e," div.insider {\n        z-index: 2147483647;\n      }\n      .").concat(e," .pip iframe {\n        opacity: 1;\n        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.5), 0 6px 20px 0 rgba(0, 0, 0, 0.5);\n        position: absolute;\n      }\n      .").concat(e," .pip {\n        position: fixed;\n        ").concat(this.definePipPosition(),"\n        width: ").concat(this.configLoader.pip.width,"px;\n        height: ").concat(this.configLoader.pip.height,"px;\n        clear: both;\n      }\n      .").concat(e," .pip div.cpeClosePipBtn {\n        position: absolute;\n        z-index: 1;\n        cursor: pointer;\n        padding: 6px 9px;\n        right: 0;\n        top: -41px;\n        background-color: #000000;\n        opacity: 0;\n        object-fit: contain;\n        border-radius: 16.5px;\n        line-height: 21px;\n        font-size: 18px;\n        font-family: serif;\n      }\n      .").concat(e," .pip div.cpeClosePipBtn.alwaysDisplayed {\n        opacity: 0.45;\n      }\n      .").concat(e," .pip div.cpeClosePipBtn img.cpeClosePipPicto {\n        width: 15px !important;\n        height: 15px !important;\n        margin: 0 !important;\n      }")}},{key:"addCommonStyle",value:function(e){this.responsivePlayer?this.style.innerHTML+="\n        .".concat(e," {\n          clear: both;\n          overflow: hidden;\n          padding-bottom: 56.25%;\n  \t      height: 0;\n          position: relative;\n        }\n        .").concat(e," iframe {\n          margin: 0 !important;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100% !important;\n          height: 100% !important;\n        }"):this.style.innerHTML+="\n        .".concat(e," {\n          width: ").concat(this.originalSize.w,";\n          height: ").concat(this.originalSize.h,";\n          clear: both;\n          overflow: hidden;\n        }\n        .").concat(e," iframe {\n          margin: 0 !important;\n        }"),this.style.innerHTML+="\n      .".concat(e," .poster {\n        background-repeat:no-repeat;\n        background-size:cover;\n        height:100%;\n        width:100%;\n        background-color: #000000;\n        opacity: 1;\n        -webkit-transition: opacity 0.5s ease-in-out;\n        -moz-transition: opacity 0.5s ease-in-out;\n        -ms-transition: opacity 0.5s ease-in-out;\n        -o-transition: opacity 0.5s ease-in-out;\n        transition: opacity 0.5s ease-in-out;\n      }\n      .").concat(e," .hide {\n        opacity: 0 !important;\n        -webkit-transition: none;\n        -moz-transition: none;\n        -ms-transition: none;\n        -o-transition: none;\n        transition: none;\n      }\n      .").concat(e," .hide.hard {\n        display: none\n      }")}},{key:"hasOptionStyle",value:function(e){return"function"==typeof this["add".concat(D(e),"Style")]}},{key:"definePipPosition",value:function(){var e=this,t=this.configLoader.pip.position.split("-"),i="bottom: ".concat(this.configLoader.pip.margin.v,"px; "),n="right: ".concat(this.configLoader.pip.margin.h,"px; ");return t.forEach((function(t,o,a){-1!==["bottom","top"].indexOf(t)&&(i=-1!==["top"].indexOf(t)?"".concat(t,":").concat(e.configLoader.pip.margin.v+41,"px; "):"".concat(t,":").concat(e.configLoader.pip.margin.v,"px; ")),-1!==["right","left"].indexOf(t)&&(n="".concat(t,":").concat(e.configLoader.pip.margin.h,"px; "))})),i+n}}]),e}()),le=0,ce=new(function(){function e(){t(this,e)}return n(e,[{key:"load",value:function(e){this.config=new ie,this.config.init(e),this.loadAsync(),Y.setConfigVersion(this.config.version),E.debug("Loader.constructor: config used > ",this.config.getAll())}},{key:"init",value:function(){var e=this;Object.keys(ae.playerList).forEach((function(t){if(!ae.playerList[t].player){var i=ae.playerList[t],n=e.addPlayerDiv(i.container),o=s(s(s(s({},i.videoId&&{video:i.videoId}),i.playlistId&&{playlist:i.playlistId}),i.specificConfig.referrerpolicy&&{referrerPolicy:i.specificConfig.referrerpolicy}),{},{params:e.getDmPlayerOptions(i),width:"100%"});i.size&&(i.specificConfig.responsive="false",i.size.w&&(o.width=i.size.w),i.size.h&&(o.height=i.size.h));var a=new re(t,n,o,i.specificConfig,e.config.getAll());se.add(i.container.parentElement,i.newClassName,a.getComputedSize(),a.config.responsive,e.config),ae.addCpePlayer(t,a)}})),ae.account=this.config.account,E.log("Loader.init: PlayerList updated in Manager > ",ae.playerList)}},{key:"getDmPlayerOptions",value:function(e){le++;var t={autoplay:e&&e.attrExtractor&&e.attrExtractor.specificConfig&&e.attrExtractor.specificConfig.hasOwnProperty("pip-at-start"),mute:this.config.scrollToPlay.enable&&!this.config.scrollToPlay.sound,pubtool:"cpe",embed_index:le,api:"postMessage",apimode:"json","ui-highlight":!!(this.config.playerStyle&&this.config.playerStyle.enable&&this.config.playerStyle.player_color)&&this.config.playerStyle.player_color,"queue-enable":!(e&&e.attrExtractor&&e.attrExtractor.specificConfig&&e.attrExtractor.specificConfig.hasOwnProperty("no-queue"))&&this.config.upNextQueue.enable,"queue-autoplay-next":!(e&&e.attrExtractor&&e.attrExtractor.specificConfig&&e.attrExtractor.specificConfig.hasOwnProperty("no-autonext"))&&this.config.autoNext.enable};if(this.config.playerStyle&&this.config.playerStyle.enable&&!1===this.config.playerStyle.subtitles_enable&&(t["subtitles-default"]=""),e&&e.attrExtractor&&e.attrExtractor.specificConfig&&e.attrExtractor.specificConfig["ads-params"]&&(t.ads_params=e.attrExtractor.specificConfig["ads-params"],e.attrExtractor.specificConfig.hasOwnProperty("ads-params-var")&&(t.ads_params=e.attrExtractor.specificConfig["ads-params"].split(".").reduce((function(e,t){return e&&e[t]}),window))),e&&e.attrExtractor&&e.attrExtractor.specificConfig&&e.attrExtractor.specificConfig.hasOwnProperty("playlist-id")&&(t.playlist=e.attrExtractor.specificConfig["playlist-id"]),e&&e.attrExtractor&&e.attrExtractor.specificConfig&&e.attrExtractor.specificConfig.hasOwnProperty("no-controls")&&(t.controls="0"),e&&e.attrExtractor&&e.attrExtractor.specificConfig&&e.attrExtractor.specificConfig.hasOwnProperty("query-string")&&e.attrExtractor.specificConfig["query-string"]){var i={};e.attrExtractor.specificConfig["query-string"].replace(/([^=&]+)=([^&]*)/g,(function(e,t,n){i[t]=decodeURIComponent(n)})),N(t,i)}return e&&e.attrExtractor&&e.attrExtractor.srcAttributes&&e.attrExtractor.srcAttributes&&N(t,e.attrExtractor.srcAttributes),t}},{key:"addPlayerDiv",value:function(e){var t=document.createElement("div");return t.style["background-color"]="black",e.appendChild(t),t}},{key:"loadAsync",value:function(){var e=this;"DM"in window?this.init():(window.dmAsyncInit=function(){window.dmAsyncInit=null,e.init()},function(){var e=document.createElement("script");e.async=!0,e.src="https://api.dmcdn.net/all.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}())}}]),e}());function ue(e){var t;return e.getAttribute("width")&&!isNaN(Number(e.getAttribute("width")))?t=function(e){var t={};t.w=Number(e.getAttribute("width")),!e.getAttribute("height")||isNaN(Number(e.getAttribute("height")))?t.h=Math.round(9*t.w/16):t.h=Number(e.getAttribute("height"));return t}(e):e.getAttribute("height")&&!isNaN(Number(e.getAttribute("height")))&&(t=function(e){var t={};return t.h=Number(e.getAttribute("height")),t.w=Math.round(16*t.h/9),t}(e)),t}var de=Array.from||function(){var t=function(e){return"function"==typeof e},i=Math.pow(2,53)-1,n=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),i)},o=function(t){if(null!=t){if(["string","number","boolean","symbol"].indexOf(e(t))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in t)return Symbol.iterator;if("@@iterator"in t)return"@@iterator"}},a=function(e,i){if(null!=e&&null!=i){var n=e[i];if(null==n)return;if(!t(n))throw new TypeError(n+" is not a function");return n}},r=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(e){var i,s,l,c=this,u=arguments.length>1?arguments[1]:void 0;if(void 0!==u){if(!t(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}var d=a(e,o(e));if(void 0!==d){s=t(c)?Object(new c):[];var p,h,f=d.call(e);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");for(l=0;;){if(!(p=r(f)))return s.length=l,s;h=p.value,s[l]=u?u.call(i,h,l):h,l++}}else{var y=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var g,v=n(y.length);for(s=t(c)?Object(new c(v)):new Array(v),l=0;l<v;)g=y[l],s[l]=u?u.call(i,g,l):g,l++;s.length=v}return s}}();!function(){if(window.fetch){var e={name:"life_cycle.embedStart",version:"1.0",data:{created_ts:Date.now(),info:{visitor:{onsite:!1},player:{embedder:document.location.href,embedder_hostname:document.location.hostname},landing:s(s({},Y.getLandingInfo()),{},{referer:document.referrer})},screen:Y.getScreenInfo(),settings:{pubtool:"cpe"}}},t={channel:"player",edward:"1.1",sent_ts:Date.now(),events:[e],stack_ctx:{player_stack:"noworker"}};window.fetch(Y.getEventBusEndpoint(),{method:"POST",body:JSON.stringify(t)})}}();var pe=function(){function e(){t(this,e)}return n(e,[{key:"init",value:function(){var e=this;window.dailymotion?console.error("You are already using Dailymotion Player Embed Script, CPE script is deactivated"):"loading"!==document.readyState?this.parse():document.onreadystatechange=function(t){"loading"!==document.readyState&&e.parse()}}},{key:"parse",value:function(){var e=window.cpe&&window.cpe.i?window.cpe.i:null;if(document.onreadystatechange=null,e){ae.cpeId=e,this.api=new $,window.cpe&&void 0===window.cpe._ANCHORS&&(window.cpe._ANCHORS={},window.cpe.parse=this.parse.bind(this),window.cpe.destroy=this.destroy);var t=this.extractPlayers();this.getConfig(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.pip&&(e.pip.margin.h=Number(e.pip.margin.h),e.pip.margin.v=Number(e.pip.margin.v)),Object.keys(t).length>0&&(ae.playerList=s(s({},t),ae.playerList),ce.load(e))}))}}},{key:"destroy",value:function(e){if(e){var t="string"==typeof e?document.querySelector("#".concat(e)):e;if(!t||t.nodeType!==Node.ELEMENT_NODE)return void console.error("Invalid first argument sent to window.cpe.destroy(), requires a valid element: ",e);var i=ae.playerList[V(t.className)];if(!i)return void console.error("window.cpe.destroy(), fail to destroy cpe player with element:",e);ae.removeCpePlayer(i)}else{if(0===Object.keys(ae.playerList).length)return void console.error("window.cpe.destroy(): no cpe player to destroy");ae.removeCpePlayers()}}},{key:"extractPlayers",value:function(){var e,t,i,n=this,o={},a=this.extractElementFromDiv()||this.extractElementFromIframes()||[];return de(a).forEach((function(a,r){var s=V(a.className);if(!s||!window.cpe._ANCHORS[s]){var l="cpe-"+T().substr(-5);if(window.cpe._ANCHORS[l]=a.cloneNode(!0),"DIV"===a.nodeName||"SPAN"===a.nodeName||"FIGURE"===a.nodeName?(t=a.getAttribute("video-id"),i=a.getAttribute("playlist"),e=n.createElementFromDiv(a,l)):(t=function(e){var t=null;return e&&e.getAttribute("src")&&(t=(t=/dailymotion.com\/embed\/video\/([a-zA-Z0-9]+)/.exec(e.getAttribute("src")))&&t.length>1?t[1]:null),t}(a),e=n.createElementFromIframe(a,l)),e){var c=new w(a);o[l]={container:n.getContainer(e),id:e.id,videoId:t,playlistId:i,newClassName:l,size:ue(a),specificConfig:c.config,attrExtractor:c}}else E.sendError("params.001",t)}})),o}},{key:"createElementFromDiv",value:function(e,t){var i=e.getAttribute("class")?e.getAttribute("class"):"";return e.setAttribute("class","".concat(i," ").concat(t)),e}},{key:"createElementFromIframe",value:function(e,t){if(e&&e.parentNode){var i=document.createElement("div");return i.setAttribute("class","dailymotion-cpe ".concat(t)),e.id&&i.setAttribute("id",e.id),e.parentNode.insertBefore(i,e),e.parentNode.removeChild(e),i}return null}},{key:"extractElementFromDiv",value:function(){var e=document.getElementsByClassName("dailymotion-cpe");return e.length>0&&E.debug("Main.extractElementFromDiv"),e.length>0?Array.prototype.slice.call(e):null}},{key:"extractElementFromIframes",value:function(){var e=document.getElementsByTagName("iframe"),t=[];if(e.length>0){for(var i in e)e[i].src&&/\w*www.dailymotion.com\w*/.test(e[i].src)&&t.push(e[i]);E.debug("Main.extractElementFromIframes")}return t.length>0?[].concat(t):null}},{key:"getConfig",value:function(e,t){this.api.send(e,t)}},{key:"getContainer",value:function(e){return this.addInsiderDiv(e),e.getElementsByClassName("insider")[0]}},{key:"addInsiderDiv",value:function(e){var t=document.createElement("div");t.setAttribute("class","insider"),e.appendChild(t)}}]),e}();return(new pe).init(),pe}();
