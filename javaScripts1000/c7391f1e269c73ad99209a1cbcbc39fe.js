"use strict";const ortbInfo={timeout:8e3,convertSizes:function(e){if(!e)return;if("string"==typeof e&&e.includes("x")&&(e=e.split("x").map(e=>parseInt(e))),!e[0])return;let t=[];return Array.isArray(e[0])?e.forEach(e=>{t.push({w:e[0],h:e[1]})}):t.push({w:e[0],h:e[1]}),t}},createOrtb={nm:function(e,t){let i=ortbInfo.convertSizes(t.sizes||e.sizesAdUnit||e.size||e.sizes)||[300,250];return{bidder:"nm",endpoint:"https://pbs.nextmillmedia.com/openrtb2/auction",corsMode:"cors",body:{id:e.auctionId,source:{tid:e.auctionId,ext:{schain:{ver:"1.0",complete:1,nodes:[{asi:"nextmillennium.io",sid:"15170",hp:1}]}}},tmax:ortbInfo.timeout||8e3,imp:[{id:e.divId,ext:t.bidderParams||{},banner:{format:i}}],test:t.test||0,ext:t.rootExt,site:{publisher:{id:t.siteId||1},page:document.domain},device:{w:window.innerWidth||screen.availWidth,h:window.innerHeight||screen.availHeight},regs:{ext:{us_privacy:"1---"}}}}},loopme:function(e,t){let i=ortbInfo.convertSizes(t.sizes||e.sizesAdUnit||e.size||e.sizes)||[300,250];return{bidder:"loopMe",endpoint:"https://next-millennium-media-eu.loopmertb.com",corsMode:"no-cors",body:{id:e.auctionId,source:{tid:e.auctionId,ext:{schain:{ver:"1.0",complete:1,nodes:[{asi:"nextmillennium.io",sid:"15170",hp:1}]}}},tmax:8e3,imp:[{id:e.divId,ext:t.imp&&t.imp.biddersExt||{},ext:{},banner:{w:i[0].w,h:i[0].h,format:i}}],ext:{},site:{page:document.domain},device:{w:window.innerWidth||screen.availWidth,h:window.innerHeight||screen.availHeight,ip:t.ip,os:t.os,osv:t.osv,ua:window.navigator.userAgent},at:1,cur:["USD"],regs:{ext:{us_privacy:"1---"}}}}}};function wrapperPbjs(e){e.eventBus=createEventBus(),e.adMetrics=createMetrics(e.eventBus),e.startTime=Date.now(),e.eventBus.registerStartWrapper();const t=e.wPbjs||{};t.cmd=e.wPbjs.cmd||[],e.pWindow=void 0;try{e.parent.parent.document,e.pWindow=e.parent.parent.window}catch(t){try{e.parent.document,e.pWindow=e.parent.window}catch(t){e.pWindow=e}}const i="https://hb.brainlyads.com/metrics",n="https://report.hb.brainlyads.com/statistics",d=12e5,o=1500;let r=null,s=null,a=!1,c=!1,u=!1,p=[],l=[],g={},b={},m={},w=!1,h=!1,f="",A="",v=[],j={},y={},C={},P=void 0,S=0,E="",U=void 0,_=1,W=0,T=0,x=0,I=!1,D=!1,B=!1,$=null,z=!1;t.debug=!!("1"===function(t){let i=e.document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\\+^])/g,"\\$1")+"=([^;]*)"));return i?decodeURIComponent(i[1]):void 0}("hbdebug")||e.pWindow.location&&e.pWindow.location.search&&e.pWindow.location.search.replace(/^\\?/,"").split("&").some(e=>"hbdebug=1"===e)),t.run=function(n){if(F.logger.log(`wPbjs.run (${n&&n.divId}) >>>`,t),n){if(e.pbjsAuctionId=s=n.auctionId,e.pbjsUnit=n.unit,n.unitRule&&(l=n.unitRule),Array.isArray(n.customTargetings)){let e=n.customTargetings.find(e=>"refresh"==e[0]);e&&(S=parseInt(e[1])||0),n.unitIds.keyValueRefresh=S,n.unitIds.unitRule=l.reduce((e,t)=>(e[t.code]=t.price,e),{})}e.pbjs.analyticAdapterOptions.data[s]={unitIds:n.unitIds},e.pbjs.adUnitExpire[s]=Date.now()+d,n.debug&&(t.debug=!0),F.logger.log("wPbjs => wPbjs.run >>> ",n,e.pbjs.analyticAdapterOptions),n.adUnitCodeToDFPPath&&(b=n.adUnitCodeToDFPPath),n.biddingRule&&(m=n.biddingRule),n.skipDFP&&(h=n.skipDFP),n.codeAdUnit&&(f=n.codeAdUnit),n.divId&&(A=n.divId),n.adUnits&&(p=n.adUnits),n.nmAd&&(y=n.nmAd),n.unitIds&&(C=n.unitIds),!n.skipDFP&&n.customTargetings&&(v=n.customTargetings),n.unit&&n.unit.domain&&(U=n.unit.domain),n.schain&&(P={ver:"1.0",complete:1,nodes:[{asi:n.schain.asi,sid:n.schain.sellerId,hp:1}]}),n.amazonBids&&(_++,function(t){!function(e,t,i,n,d,o,r){function s(i,n){t[e]._Q.push([i,n])}t[e]||(t[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(o=i.createElement(n)).async=!0,o.src="//c.amazon-adsystem.com/aax2/apstag.js",(r=i.getElementsByTagName(n)[0]).parentNode.insertBefore(o,r))}("apstag",e,e.document,"script");let i,n={pubID:"79e40b05-e673-4b6c-85f9-79252a7f96a5",schain:P,bidTimeout:2e3},d={slots:[{sizes:t.sizesAdUnit}]};1==t.type&&(n.adServer="googletag",d.slots[0].slotName=t.codeAdUnit,d.slots[0].slotID=t.divId,i=function(t){e.googletag.cmd.push(function(){e.apstag.setDisplayBids(),N("amazon")})});2==t.type&&(n.videoAdServer="DFP",d.slots[0].mediaType="video",d.slots[0].slotID="video_HB",i=function(e){try{j=e&&e[0]&&e[0].qsParams&&e[0].qsParams.split("&").reduce((e,t)=>{if(t){let i=t.split("=");e[i[0]]=i[1]}return e},{})||{}}catch(e){console.error(e),j={}}u?G():u=!0});e.apstag.init(n),e.apstag.fetchBids(d,i)}(n),w=n.amazonBids),function(t){F.logger.log(`wPbjs => (${A}) loadScripts!!!!!`);const i={src:"https://www.googletagservices.com/tag/js/gpt.js",async:!0};let n=[];t.skipDFP||n.push(i);t.isBidderSublime&&n.push({src:`//sac.ayads.co/sublime/${t.sublimeZoneId}/prebid`,async:!1});_loadJSScripts(e,n)}(n),n.type&&1!=n.type?function(t){F.logger.log(`wPbjs => (${A}) >>> prebid video!!!!!`),e.adUnitSize=null,K(t.deducts),e.pbjs.que.push(function(){const i={debug:t.debug,priceGranularity:"high",consentManagement:{usp:{cmpApi:"iab",timeout:t.usPrivacyTimeout}},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}},cache:{url:t.cacheUrl},schain:{validation:"strict",config:P}};t.isGdrpIp&&(i.consentManagement.gdpr={cmpApi:"iab",defaultGdprScope:!0}),F.logger.log(`wPbjs => (${A}) pbjsConfig`,i),e.pbjs.setConfig(i),e.pbjs.addAdUnits(t.adUnits),e.pbjs.eventBidWonFuncs[s]={expire:Date.now()+d},e.pbjs.eventBidWonFuncs[s].func=function(t){F.logger.log(`wPbjs => (${A}) event bidWon`);try{e.pWindow.hb_win||(e.pWindow.hb_win={});var i=C[t.adUnitCode];e.pWindow.hb_win[i]||(e.pWindow.hb_win[i]={}),e.pWindow.hb_win[i][t.bidderCode]||(e.pWindow.hb_win[i][t.bidderCode]=0),e.pWindow.hb_win[i][t.bidderCode]++}catch(e){}},e.pbjs.requestBids({auctionId:s,bidsBackHandler:L,timeout:3e3})})}(n):function(t){F.logger.log(`wPbjs => (${A}) >>> prebid banner!!!!! (Skip GAM = ${t.skipDFP})`),e.apAds=new Event("apAds"),e.apAdsLine=new Event("apAds_line"),e.apAdsX=new Event("apAds_x"),e.apAdsHide=new Event("apAds_hide"),e.adUnitSize=null,t.skipDFP?(console.log("frameWindow.googletag >>>",e.googletag),e.googletag.pubads=function(){let i=e.document.getElementById(t.divId);return i}):e.googletag.cmd.push(function(){e.googletag.pubads().disableInitialLoad()});if(K(t.deducts),e.pbjs.que.push(function(){e.startAuctionTime=Date.now(),e.eventBus.registerStartAuction(e.pbjsAuctionId);const n={debug:t.debug,priceGranularity:"high",consentManagement:{usp:{cmpApi:"iab",timeout:t.usPrivacyTimeout}},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}},schain:{validation:"strict",config:P}};t.isLiveRamp&&(n.userSync.userIds=[{name:"identityLink",params:{pid:t.liverampPartnerId},storage:{type:"cookie",name:"idl_env",expires:1}}],n.userSync.syncDelay=t.userSyncDelay),t.isGdrpIp&&(n.consentManagement.gdpr={cmpApi:"iab",defaultGdprScope:!0}),t.pbsBidders.length&&(F.logger.log("Serverside!"),n.s2sConfig={accountId:"1",enabled:!0,bidders:t.pbsBidders,endpoint:"https://prebid.nextmillmedia.com/openrtb2/auction",adapter:"prebidServer",cookieSet:!0,syncEndpoint:"https://prebid.nextmillmedia.com/cookie_sync"}),F.logger.log("wPbjs => pbjsConfig",n),e.pbjs.setConfig(n),e.pbjs.eventBidWonFuncs[s]={expire:Date.now()+d},e.pbjs.eventBidWonFuncs[s].func=function(n){if(!p.some(e=>e.code==n.adUnitCode))return;e.renderAdTime=Date.now(),e.eventBus.registerWinAuction(e.pbjsAuctionId),e.adMetrics.flush(e.pbjsAuctionId,e.pbjsUnit,n,e.navigator.userAgent),function(t,n){F.logger.log(`wPbjs => (${A}) >>> sendMetrics`),X(i,{name:n&&n.name,domain:n&&n.domain,bidder:t.bidderCode,metrics:{prebidStartDuration:e.startAuctionTime-e.startTime,auctionDuration:e.endAuctionTime-e.startAuctionTime,renderAdDuration:e.renderAdTime-e.endAuctionTime}})}(n,t.unit),F.logger.log(`wPbjs => (${A}) >>> runned pbjs.renderAd`,n.adUnitCode);try{e.pWindow.hb_win||(e.pWindow.hb_win={});let i=t.unitIds[n.adUnitCode];e.pWindow.hb_win[i]||(e.pWindow.hb_win[i]={}),e.pWindow.hb_win[i][n.bidderCode]||(e.pWindow.hb_win[i][n.bidderCode]=0),e.pWindow.hb_win[i][n.bidderCode]++}catch(e){}let d=t.bidderOptions||{},o=t.size1x1||{};"gumgum"!=n.bidderCode&&"33across"!=n.bidderCode||(F.logger.log("wPbjs => apAds_hide now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide),F.logger.log("wPbjs => option remove code (bidder: "+n.bidderCode+")"),"gumgum"==n.bidderCode&&(e.pWindow.document.querySelector("head").appendChild(e.pWindow.document.createElement("script")).innerHTML=`setTimeout(function() {for(let i of window.document.querySelectorAll('[id^=ad_is]')) {try{i.remove();} catch(e) {console.log('error removing apAds ad (gumgum):');}}},${t.gumgumRemovalTime})`),"33across"==n.bidderCode&&(e.pWindow.document.querySelector("head").appendChild(e.pWindow.document.createElement("script")).innerHTML=`setTimeout(function() {for(let i of window.document.querySelectorAll('[class^="ttx"],[id^="tynt"]')) {try{i.remove();} catch(e) {console.log('error removing apAds ad (33across):');}}},${t.gumgumRemovalTime})`));let r=p.find(e=>e.code===n.adUnitCode);if(!r)return void F.logger.log(`wPbjs (${A}) >>> error: ad unit not found`,n.adUnitCode);"undertone"==n.bidderCode&&(F.logger.log("wPbjs => apAds now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAds),d[n.bidderCode].hideAd&&(F.logger.log("wPbjs => apAds_hide now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide)),d[n.bidderCode].removeX&&(F.logger.log("wPbjs => apAds_x now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAdsX)),d[n.bidderCode].removeCode&&(F.logger.log("wPbjs => option remove code (bidder: "+n.bidderCode+")"),e.pWindow.document.querySelector("head").appendChild(e.pWindow.document.createElement("script")).innerHTML=`setTimeout(function() {try{window.document.querySelector('.ut_container').remove();} catch(e) {console.log('error removing apAds ad:');}},${t.gumgumRemovalTime})`),o[n.bidderCode]&&!r.sizes.some(e=>e[0]===n.width&&e[1]===n.height)&&d[n.bidderCode].inlineHeight&&(F.logger.log("wPbjs => apAds_line now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAdsLine)));let a=!1;"teads"==n.bidderCode&&o.teads&&d.teads.apAdsDiv&&(1===n.width&&1===n.height||!r.sizes.some(e=>e[0]===n.width&&e[1]===n.height))&&(F.logger.log("wPbjs => apAds_div now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAds),a=!0,new CustomEvent("apAds_div",{detail:n.adUnitCode}),e.document.dispatchEvent(e.apAdsDiv)),["justpremium","sublime","teads","triplelift"].indexOf(n.bidderCode)>-1&&o[n.bidderCode]&&!r.sizes.some(e=>e[0]===n.width&&e[1]===n.height)&&(d[n.bidderCode].stopRefresh&&(F.logger.log("wPbjs => apAds now fired (bidder: "+n.bidderCode+")"),a||(e.document.dispatchEvent(e.apAds),a=!0)),d[n.bidderCode].inlineHeight&&(F.logger.log("wPbjs => apAds_line now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAdsLine)),d[n.bidderCode].removeX&&(F.logger.log("wPbjs => apAds_x now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAdsX)),d[n.bidderCode].hideAd&&(F.logger.log("wPbjs => apAds_hide now fired (bidder: "+n.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide))),setTimeout(deleteEventBidWon,1e4,s)},e.pbjs.addAdUnits(t.adUnits),c=!0,R(t)}),g={},!t.skipDFP){let i=[];t.sizeFluid&&i.push("fluid"),(!t.sizeFluid||t.sizeFluid&&!t.sizeFluidOnlyForGAM)&&(i=i.concat(t.sizesAdUnit)),e.googletag.cmd.push(function(){r=e.googletag.defineSlot(t.codeAdUnit,i,t.divId).addService(e.googletag.pubads()),e.googletag.pubads().enableSingleRequest(),e.googletag.enableServices(),R(t)})}setTimeout(H,3500)}(n),n.ortbBidders.length&&!h&&(_++,function(e){if(!(e=e.filter(e=>e.endpoint&&e.body)).length)return M();T=e.length,e.forEach((e,t)=>{fetch(e.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},mode:e.corsMode,body:JSON.stringify(e.body)}).then(e=>{if(200===e.status)return e.json()}).then(e=>{if(!e)return M();M(e)}).catch(t=>{console.error("error from ortb bidder: ",e.bidder||"",t),M()})}),settimeout(()=>{q()},o)}(B=(B=n.ortbBidders).map(e=>createOrtb[e.bidder](n,e.params||{}))))}};const F={logger:{log(){t.debug&&console.log.apply(console,arguments)},error(){t.debug&&console.error.apply(console,arguments)}}};function O(e){if("function"==typeof e)try{e.call()}catch(e){F.logger.error("Error processing command:",e.message,e.stack)}else F.logger.error("Command is not a function")}t.renderOrtbAd=function(t,i){if(z)return;if(z=!0,!$||!$.bid)return;let n=e.document.createElement("iframe");n.setAttribute("frameborder",0),n.setAttribute("scrolling","no"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("hspace","0"),n.setAttribute("vspace","0"),n.setAttribute("topmargin",0),n.setAttribute("leftmargin",0),n.setAttribute("allowtransparency",!0),n.setAttribute("border","0px"),n.setAttribute("width",$.bid.w),n.setAttribute("height",$.bid.w),n.style.width=$.bid.w+"px",n.style.height=$.bid.h+"px";try{t.body.appendChild(n)}catch(e){return void console.error("failed to append ortb frame, ",e)}let d=n.contentDocument;d?(d.open(),d.write($.bid.adm),d.close(),t.defaultView.frameElement.width=$.bid.w||300,t.defaultView.frameElement.height=$.bid.h||250):console.warn("failed to get frameDocument for ortb iframe")},t.renderAd=function(e,t){if(!y.id)return;F.logger.log(`wPbjs => (${A})renderAd - fakeAd nmAd.id=${y.id}`),e.defaultView.frameElement.width=y.size[0]||300,e.defaultView.frameElement.height=y.size[1]||250;let i=y.url||`https://hb.brainlyads.com/images/${y.img}`,n=e.createElement("img");n.src=i,n.style.padding="0px",n.style.margin="0px",n.style.border="0px",e.body.appendChild(n)},t.cmd.push=O,t.cmd.forEach(e=>{O(e)});let k=[];function M(e){I||(e&&k.push(e),++x>=T&&function(){if(I)return q();if(I=!0,!k.length)return q();let e,t=0;k.forEach((i,n)=>{i.seatbid.forEach((i,n)=>{i.bid.forEach((i,n)=>{i.price>t&&(e=i,t=i.price)})})}),e&&t&&($={cpm:t,bid:e,size:[e.w||300,e.h||250]});q()}())}function q(){if(D)return;D=!0;let t={};if(!($&&$.cpm&&$.bid))return N("openrtb");t={ortb_pb:$.cpm.toFixed(2),ortb_bidder:$.bidder||"unknown",ortb_size:($.size||[300,250]).join("x"),auction_id:s},e.googletag.cmd.push(()=>{Object.entries(t).forEach(e=>{r.setTargeting(e[0],e[1])})}),N("openrtb")}function R(t){(t.skipDFP||r&&c)&&e.pbjs.que.push(function(){e.pbjs.requestBids({auctionId:s,adUnitCodes:t.adUnits.map(e=>e.code),bidsBackHandler:H,timeout:t.prebidBidTimeout})})}function H(){F.logger.log(`wPbjs => (${A}) >>> func initAdserver - satrt, pbjs.initAdserverSet =`,a),a||(e.endAuctionTime=Date.now(),e.eventBus.registerEndAuction(e.pbjsAuctionId),a=!0,h?function(){F.logger.log(`wPbjs => (${A}) >>> initAdserverBannerSkipGAM`),e.googletag.cmd&&e.googletag.cmd[0]&&e.googletag.cmd[0]();let t=new CustomEvent("slotRenderEnded");t.isEmpty=!0,e.pbjs.que.push(function(){let i=Q(J()),n=i.adUnitCode;if(F.logger.log("wPbjs => func initAdserver - selectWin, winAdUnitCode =",n),i.isWin){t.isEmpty=!1,t.size=e.adUnitSize;let i=e.pbjs.getAdserverTargetingForAdUnitCode(n);F.logger.log("wPbjs => func initAdserver - getAdserverTargetingForAdUnitCode, winTargetData =",i),i=JSON.parse(JSON.stringify(i)),g[n]=i,g[n].rendered=!1,e.dataPbjsWin={},e.dataPbjsWin[n]=i;let d=new Event("setTargeting");e.document.dispatchEvent(d),N("prebid - skipDFP")}e.googletag.pubads().dispatchEvent(t)})}():(F.logger.log(`wPbjs => (${A}) >>> initAdserverBannerGAM`),e.googletag.cmd.push(function(){e.pbjs.que.push(function(){let t=Q(J()),i=t.adUnitCode,n=t.bidData;if(F.logger.log(`wPbjs => (${A}) winAdUnitCode = ${i}`),v.forEach(e=>{Array.isArray(e)&&e.length>1&&r.setTargeting(String(e[0]),String(e[1]))}),t.gamCpm&&!t.isWin&&(r.setTargeting("fp_pb",t.gamCpm.toFixed(2)),r.setTargeting("nm_id",y.id),V(t.gamCpm)),F.logger.log(`wPbjs => (${A}) >>> winAdUnitCode = ${i}`),t.isWin){F.logger.log(`wPbjs => (${A}) >>> set targetings, winAdUnitCode = ${i}`);let e=n.adserverTargeting;Object.keys(e).forEach(t=>{r.setTargeting(t,e[t])});let d=e&&parseFloat(e.hb_pb);if(r.setTargeting("orig_hb_pb",t.maxCpm.toFixed(2)),t.gamCpm&&t.maxCpm<t.gamCpm&&(d=t.gamCpm,r.setTargeting("hb_pb",d.toFixed(2)),V(t.gamCpm)),e&&m[e.hb_bidder]&&m[e.hb_bidder].value){if(Number.isNaN(d))return;let t=1==m[e.hb_bidder].type&&m[e.hb_bidder].value||2==m[e.hb_bidder].type&&m[e.hb_bidder].value*d||0;if(!t)return;let n=d+t;n=n.toFixed(2),r.setTargeting("hb_pb",n),F.logger.log(`wPbjs => (${A}) set targetings, winAdUnitCode = `,i,"hb_bidder=",e.hb_bidder,"hb_pb=",e.hb_pb,"google hb_pb=",n);let o="hb_pb_"+e.hb_bidder;r.getTargeting(o).length&&(r.setTargeting(o,n),F.logger.log(`wPbjs => (${A}) >>> set targetings, winAdUnitCode = `,i,"hb_bidder=",e.hb_bidder,"hb_pb=",e.hb_pb,"google "+o+"=",n))}}else r.setTargeting("hb_pb","0.00"),r.setTargeting("orig_hb_pb","0.00");N("prebid"),t.isWin&&(e.eventBus.registerWinAuction(e.pbjsAuctionId),e.adMetrics.flush(e.pbjsAuctionId,e.pbjsUnit,n,e.navigator.userAgent))})})))}function N(t){F.logger.log(`wPbjs => (${A}) >>> bidderTypeComplete(${t})`,W+1,_,r),++W==_&&(h?function(){if(F.logger.log(`wPbjs => (${A}) >>> renderAd - start`),!g)return;let t=Object.keys(g);F.logger.log(`wPbjs => (${A}) func renderAd - codes = `,t),t.forEach(t=>{if(g[t].rendered)return;g[t].rendered=!0;let i=e.document.getElementById(A);if(F.logger.log(`wPbjs => (${A}) func renderAd - block = `,i),!i)return;let n=e.document.createElement("iframe");n.id=`google_ads_iframe_${A}_0`,n.setAttribute("frameborder",0),n.setAttribute("scrolling","no"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("hspace","0"),n.setAttribute("vspace","0"),n.setAttribute("topmargin",0),n.setAttribute("leftmargin",0),n.setAttribute("allowtransparency",!0),n.setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("border","0px"),n.style.border="0",i.appendChild(n);let d=g[t],o=n.contentWindow.document;d&&d.hb_adid&&(F.logger.log(`wPbjs => (${A}) func renderAd - RUN pbjs.renderAd, adServerTargeting = `,d),e.pbjs.renderAd(o,d.hb_adid)),delete g[t]})}():e.googletag.cmd.push(function(){F.logger.log(`wPbjs => (${A}) >>> frameWindow.googletag.pubads().refresh([gptSlot])`),e.googletag.pubads().refresh([r])}))}function J(){return p.map(e=>e.code).reduce((t,i)=>{let n=e.pbjs.getBidResponsesForAdUnitCode(i);return n&&(t[i]=n),t},{})}function L(){F.logger.log(`wPbjs => (${A}) >>> run initAdserver video`);let e=Q(J());E=e.adUnitCode,(!w||w&&u)&&G(),w&&!u&&(u=!0)}function G(){F.logger.log(`wPbjs => (${A}) >>> run video`);let t=E||Object.keys(b)[0],i=v.reduce((e,t)=>(Array.isArray(t)&&t.length>1&&(e[String(t[0])]=String(t[1])),e),j),n=pbjs.adServers.dfp.buildVideoUrl({adUnit:p.find(function(e){return e.code==t}),bid:!E&&{}||void 0,params:{iu:b[t],cust_params:i,output:"vast"}});E&&e.pbjs.markWinningBidAsUsed({adUnitCode:E}),F.logger.log(`wPbjs => (${A}) >>> vastURL =`,n);let d=e.document.getElementById(A);d&&e.vastAd&&e.vastAd(n,d)}function V(e){X(n,[{eventName:"gamFloorprice",data:{auctionId:s,bidder:"gam",unitId:C&&C[Object.keys(C)[0]],domain:U,codeAdUnit:f,floorprice:parseFloat(e)},host:window.top&&window.top.location&&window.top.location.host||"",timestamp:Date.now()}])}function X(e,t){fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)})}function Q(t){F.logger.log(`wPbjs => (${A}) >>> selectWin`,t);let i=l,n=Object.keys(t),d=[];for(let e=0;e<n.length;e++){let i=p.find(t=>t.code===n[e]),o=0;d.push({winAdUnitCode:"",winAdUnitData:null});for(let r=0;r<t[n[e]].bids.length;r++)F.logger.log(`wPbjs => (${A}) Respopnse: adUnitCode=`+n[e]+" cpm=$"+t[n[e]].bids[r].cpm+" bidder="+t[n[e]].bids[r].bidder+" unitSizes="+JSON.stringify(i.sizes)+" responseSize=["+t[n[e]].bids[r].width+","+t[n[e]].bids[r].height+"]"),t[n[e]].bids[r].cpm>o&&(d[e].winAdUnitCode=n[e],d[e].winAdUnitData=t[n[e]].bids[r],o=t[n[e]].bids[r].cpm)}F.logger.log(`wPbjs => (${A}) winsAdUnit >>>`,d);let o,r={isWin:!1,adUnitCode:"",bidData:null,maxCpm:0,gamCpm:0},s=i.find(e=>"gam"===e.code);r.gamCpm=s&&s.price||0;for(let e=0;e<d.length;e++)d[e].winAdUnitCode&&d[e].winAdUnitData.cpm>r.maxCpm&&(r.adUnitCode=d[e].winAdUnitCode,r.bidData=d[e].winAdUnitData,r.maxCpm=d[e].winAdUnitData.cpm);if(F.logger.log(`wPbjs => (${A}) response >>>`,r),r.adUnitCode){o=p.find(e=>e.code===r.adUnitCode);let e=i.find(e=>e.code===r.bidData.bidderCode),t=e&&e.price;if(!t&&"rhythmone"==r.bidData.bidderCode){let e=o.bids.find(e=>"rhythmone"==e.bidder);t=e&&e.params&&e.params.floor||options.defaultFloorRhythmone}(!t||t&&t<=r.bidData.cpm)&&(r.isWin=!0,t&&t>0&&(F.logger.log(`wPbjs => (${A}) floorprice >>>`,t),C.floorprice=t))}return r.isWin&&(e.adUnitSize=[r.bidData.width,r.bidData.height],F.logger.log(`wPbjs => (${A}) Winner: adUnitCode=`+r.adUnitCode+" cpm=$"+r.bidData.cpm+" bidder="+r.bidData.bidder+" unitSizes="+JSON.stringify(o.sizes)+" responseSize=["+r.bidData.width+","+r.bidData.height+"]")),r}function K(t){let i=Object.keys(t);if(!t||i.length)return null;let n={};for(let e=0;e<i.length;e++)n[i[e]]={bidCpmAdjustment:function(n,d){return n*t[i[e]]}};e.pbjs.bidderSettings=n}}function loadJSScripts(e,t){console.log("loadJSScripts!!!!!");let i=[];const n={src:"https://hb.brainlyads.com/prebid.nm.1.0.js",async:!0};i.push({src:"https://js-sec.indexww.com/ht/p/188333-91751857837145.js",async:!0});let d=[n],o=!1,r=()=>{o||(o=!0,_loadJSScripts(e,d))};e.PWT.jsLoaded=r;let s=e.location.href,a="";if(s.indexOf("pwtv=")>0){let e=/pwtv=(.*?)(&|$)/g.exec(s);e.length>=2&&e[1].length>0&&(a=`/${e[1]}`)}i.push({src:`//ads.pubmatic.com/AdServer/js/pwt/157577/2378${a}/pwt.js`,async:!0}),_loadJSScripts(e,i,t),setTimeout(r,100)}function _loadJSScripts(e,t,i){if(!Array.isArray(t))return;let n=e.document.getElementsByTagName("script")[0],d=0;t.forEach(o=>{let r=e.document.createElement("script");r.async=!!o.async,r.type="text/javascript",r.src=o.src,"function"==typeof i&&(r.onload=function(){++d==t.length&&i()});try{n.parentNode.insertBefore(r,n)}catch(e){console.error(e)}})}function deleteEventBidWon(e){window.pbjs.eventBidWonFuncs[e]&&delete window.pbjs.eventBidWonFuncs[e]}function cleanerAdUnitExpire(){const e=Date.now();Object.keys(window.pbjs.adUnitExpire).forEach(t=>{e>window.pbjs.adUnitExpire[t]&&(delete window.pbjs.adUnitExpire[t],window.pbjs.que.push(()=>{window.pbjs.analyticAdapterOptions.data[t]&&(Object.keys(window.pbjs.analyticAdapterOptions.data[t]).forEach(e=>{window.pbjs.removeAdUnit(e)}),delete window.pbjs.analyticAdapterOptions.data[t])}),window.eventBus&&window.eventBus.cleanAuction(t)),window.pbjs.eventBidWonFuncs[t]&&e>window.pbjs.eventBidWonFuncs[t].expire&&delete window.pbjs.eventBidWonFuncs[t]}),setTimeout(cleanerAdUnitExpire,6e4)}function createEventBus(){const e="startWrapper",t="startAuction",i="endAuction",n="winAuction",d={auctions:{}},o={debug:!1},r={registerStartWrapper:function(){var t;d[t=e]=a(t),c(d[t]),d[t]},registerStartAuction:function(e){s(t,e)},registerEndAuction:function(e){s(i,e)},registerWinAuction:function(e){s(n,e)},cleanAuction:function(e){delete d.auctions[e]},getStartWrapper:()=>d[e]||null,getStartAuction:e=>r.getAuctionEvent(e,t),getEndAuction:e=>r.getAuctionEvent(e,i),getWinAuction:e=>r.getAuctionEvent(e,n),getAuctionEvent(e,t){const i=d.auctions[e];return i&&i[t]?i[t]:null},setDebug(e){o.debug=e}};return r;function s(e,t){return d.auctions[t]||(d.auctions[t]={}),d.auctions[t][e]=a(e),c(d.auctions[t][e]),d.auctions[t][e]}function a(e,t){const i={name:e,timestamp:Date.now(),performanceTime:performance?performance.now():null};return t&&(i.auctionId=t),i}function c(e){if(!0===o.debug){const t=[e.auctionId?e.auctionId+":"+e.name:e.name,"Timestamp: "+e.timestamp,"PerfomanceTime: "+e.performanceTime];console.log(t.join("; "))}}}function createMetrics(e){const t={flush:function(e,i,n,d){try{const o={name:i&&i.name,domain:i&&i.domain,bidder:n&&n.bidderCode,userAgent:d,metrics:t.calculate(e)};return t.send(o)}catch(e){console.error(e)}},calculate:function(t){return{auctionInit:function(t){const n=e.getStartWrapper(t),d=e.getStartAuction(t);return i(n,d)}(t),auctionHolding:function(t){const n=e.getStartAuction(t),d=e.getEndAuction(t);return i(n,d)}(t),auctionSelectWin:function(t){const n=e.getEndAuction(t),d=e.getWinAuction(t);return i(n,d)}(t)}},send(e){fetch("https://hb.brainlyads.com/metrics",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})}};return t;function i(e,t){let i=null;return e&&t?(i=e.hasOwnProperty("performanceTime")&&t.hasOwnProperty("performanceTime")?t.performanceTime-e.performanceTime:t.timestamp-e.timestamp)>0?i:Math.abs(i):i}}window.startTime=window.startTime||Date.now(),window.PWT=window.PWT||{},window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.pbjs.analyticAdapterOptions={version:"1.0",data:{}},window.pbjs.adUnitExpire={},window.pbjs.eventBidWonFuncs={},window.pbjs.que.push(function(){window.pbjs.enableAnalytics([{provider:"nextMillennium",options:window.pbjs.analyticAdapterOptions}]),window.pbjs.onEvent("bidWon",function(e){window.pbjs.eventBidWonFuncs[e.auctionId]&&window.pbjs.eventBidWonFuncs[e.auctionId].func(e)})}),cleanerAdUnitExpire();
