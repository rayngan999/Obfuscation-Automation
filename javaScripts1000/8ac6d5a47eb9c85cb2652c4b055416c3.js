//tealium universal tag - utag.25958 ut4.0.202101050833, Copyright 2021 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var b,c,l,a=document;if(o.type==="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l];}b.src=o.src;}if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}else{u.loader=utag.ut.loader;}
u.encode=function(a,b){b="";try{b=encodeURIComponent(a)}catch(e){utag.DB(e);}if(b==""){b=escape(a);}return b}
u.ev={"view":1};u.scriptrequested=false;u.rp=function(a,b){if(typeof a!=="undefined"&&a.indexOf("@@")>0){a=a.replace(/@@([^@]+)@@/g,function(m,d){if(b[d]){return u.encode(b[d]);}else{return"";}});}
return a;};u.map={};u.extend=[function(a,b){try{if(1){var fiveBySevenWeddingInvitationPfid=["AM1","AM0","ALU","ALV","BJ6","BJ5"];if(b&&b["Language"]==="en-us"){var hideFunction=(function(){'use strict';try{if(utag_data.AbsolutePath==="/cart.aspx"){hideEditLinkForCart();}
else if(utag_data.AbsolutePath==="/vp/ns/my_account/my_portfolio.aspx"){hideEditLinkForPortfolio();}}
catch(Exception){console.error("Coalmine flow: "+Exception.message);}});var hideEditLinkForCart=(function(){if(!utag_data.Quantities){return;}
var isEnvelopeExperienceCard=false;utag_data.PfIds.forEach(function(pfid){if(fiveBySevenWeddingInvitationPfid.indexOf(pfid)>=0){isEnvelopeExperienceCard=true;}else{var firstChar=pfid[0];var secondChar=pfid[1];var thirdChar=pfid[2];var expectedFirstChar='K';var highestSecondChar='P';var lowestSecondChar='R';if(firstChar===expectedFirstChar){if(secondChar>highestSecondChar&&secondChar<lowestSecondChar){isEnvelopeExperienceCard=true;}else if(secondChar===highestSecondChar&&thirdChar>='E'){isEnvelopeExperienceCard=true;}else if(secondChar===lowestSecondChar&&thirdChar<='K'){isEnvelopeExperienceCard=true;}}else if(firstChar==='L'){if(secondChar==='T'&&thirdChar>='D'&&thirdChar<='L'){isEnvelopeExperienceCard=true;}else if(secondChar>'W'&&secondChar<'X'){isEnvelopeExperienceCard=true;}else if(secondChar==='W'&&thirdChar>='A'){isEnvelopeExperienceCard=true;}else if(secondChar==='X'&&thirdChar<='4'){isEnvelopeExperienceCard=true;}}else if(firstChar==='P'){if(secondChar==='A'&&thirdChar>='A'&&thirdChar<='F'){isEnvelopeExperienceCard=true;}}}});var $allItemImgs=$(".view-larger img");for(var i=0;i<$allItemImgs.length;i++){var $itemImg=$($allItemImgs[i]);var pfid=$itemImg.context.src.match(/merchant_metadata=(\w+)*/)[1];if((isEnvelopeExperienceCard&&pfid==="310")||pfid==="A92"){$itemImg.parents('.preview-info').find('.action-EDIT').hide();}}});var hideEditLinkForPortfolio=(function(){var $allItemImgs=$('.doc-preview').find('img');for(var i=0;i<$allItemImgs.length;i++){var $itemImg=$($allItemImgs[i]);var pfid=$itemImg.context.src.match(/merchant_metadata=(\w+)*/)[1];if(pfid==="310"||pfid==="A92"){var $uploadImgIcon=$itemImg.parents('.doc-preview').siblings('.doc-info').find('img.labeled-icon');if($uploadImgIcon.length>0){$allLinksItem=$($itemImg.parents('.doc-preview').siblings('.doc-links')[0]).children();for(var j=0;j<$allLinksItem.length;j++){var $linkItem=$($allLinksItem[j]);if($linkItem.text().replace(/\s/g,"")=="Edit"){if($linkItem.is("nobr")){$($($itemImg.parents('.doc-preview').siblings('.doc-links')[0]).find('br')[0]).hide();}
$linkItem.hide();}}}}}});var carts=document.getElementsByClassName('cart');if(carts.length>0){var mutationObserverConfig={childList:true,subtree:true};var mutationObserver=new MutationObserver(hideFunction);for(var cartNumber=0;cartNumber<carts.length;cartNumber++){mutationObserver.observe(carts[cartNumber],mutationObserverConfig);}}
hideFunction();}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b&&(b["AbsolutePath"]==="/signs-posters/posters/templates"||b["AbsolutePath"]==="/signs-posters/car-door-magnets/templates")&&b["Language"]=="en-us"&&(utag_data.ActiveFeatureValues.includes("28611"))){!function(){if(window.localStorage.getItem("directUpload")=="true"){var $studioRedirectVeil=$('<div style="position: fixed; top: 0; bottom: 0; right: 0; left: 0; z-index: 100000; background-color: #292929e3; color: white; font-size: 48px; text-align:center; padding-top: 40%;" ><img style="background-color: #fff; margin-bottom: 20px;" src="https://prod-origin-cmsauth.storefront.vpsvc.com/sitecore/shell/Applications/-/media/4aa089ed013f4614b52e89889f397839.ashx" />Redirecting you to the design studio</div>');$("body").append($studioRedirectVeil);$('.upload-tile-action')[0].click();window.localStorage.setItem("directUpload","false");$('#FullBleedUploadPop #backButton .textbutton-inner')[0].click();}}();}
if(b&&(b["AbsolutePath"]==="/configure-product.aspx"&&window.location.search.indexOf("pc=21")>0)&&b["Language"]=="en-us"&&(utag_data.ActiveFeatureValues.includes("28611"))){!function(){var addUploadCtaClass=function(){var $uploadLink=$('.secondary-cta-link-text');if($uploadLink.length>0){var css="#ocm-secondary-cta { font-family: 'MarkPro',sans-serif; font-weight: bold; width: 100%; background: #006196; color: #fff; position: relative; box-sizing: border-box; overflow: hidden; min-width: .75em; padding: 12px 20px 11px 20px; font-size: 15px; line-height: 15px; text-align: center; text-overflow: ellipsis; white-space: nowrap; text-decoration: none; vertical-align: middle; border: 1px solid #c8cbcc; border-radius: 3px; cursor: pointer; }",head=document.head||document.getElementsByTagName('head')[0],style=document.createElement('style');style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=css;}else{style.appendChild(document.createTextNode(css));}
head.appendChild(style);}else{window.setTimeout(addUploadCtaClass,100);}}
addUploadCtaClass();}();}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b&&(b["AbsolutePath"]==="/signs-posters/mesh-banners/templates")&&b["Language"]=="en-us"&&(utag_data.ActiveFeatureValues.includes("28833"))){!function(){if(window.localStorage.getItem("directUpload")=="true"){var $studioRedirectVeil=$('<div style="position: fixed; top: 0; bottom: 0; right: 0; left: 0; z-index: 100000; background-color: #292929e3; color: white; font-size: 48px; text-align:center; padding-top: 40%;" ><img style="background-color: #fff; margin-bottom: 20px;" src="https://prod-origin-cmsauth.storefront.vpsvc.com/sitecore/shell/Applications/-/media/4aa089ed013f4614b52e89889f397839.ashx" />Redirecting you to the design studio</div>');$("body").append($studioRedirectVeil);$('.upload-tile-action')[0].click();window.localStorage.setItem("directUpload","false");$('#FullBleedUploadPop #backButton .textbutton-inner')[0].click();}}();}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b){(function(){try{var featureValue="28833";var pfids=["HY2","HY1","HY4","HY3","HY6","HY5","HY8","HY7","HY9","HYB","HYA","HYD","HYC","HYF","HYE","HYH","HYG","HYJ","HYL","HYK","HYM","HZ1","HZ0","HZ3","HZ2","HZ5","HYT","HZ4","HZ7","HYV","HZ6","HYU","HZ9","HYX","HZ8","HYW","HYZ","HYY","HZA","HZC","HZB","HZE","HZD","HY0"];var serversList=["www.vpdev.com","www.vptest.com","www.vppreprod.com","www.vistaprint.com"];var redirectButton=document.getElementById("aNextButton");var mobileRedirectButton=document.querySelector("div.continueButton a.continue.ui-btn");if(utag_data&&utag_data.AbsolutePath==="/studio/review.aspx"&&(redirectButton||mobileRedirectButton)&&utag_data.ServerName&&utag_data.ServerName.length>4&&serversList.indexOf(utag_data.ServerName.toLowerCase())!=-1&&utag_data.ActiveFeatureValues&&utag_data.ActiveFeatureValues.indexOf(featureValue)!=-1&&utag_data.PfIds&&utag_data.PfIds.length>0&&utag_data.PfIds[0]&&pfids.indexOf(utag_data.PfIds[0])!=-1){var serverName=utag_data.ServerName;var cookieDomainName=serverName.substring(3);var redirectUrl='https://'+serverName+'/vp/ns/sign_in.aspx?rd=1';var meshAccessoriesPage="https://"+serverName+"/cms/signs-posters/mesh-banners-accessories";var retUrlName="RETURL";var siteCookieName="SITE";var getParameterByName=function(name,url){if(!url)url=window.location.href;name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g," "));};if(redirectButton){redirectButton.removeAttribute("onclick");redirectButton.removeAttribute("href");redirectButton.addEventListener("click",function(e){if(!$('#divApprovalCheckBox input').is(':checked'))return;window.location=redirectUrl;e.preventDefault();},false);}else{mobileRedirectButton.removeAttribute("onclick");mobileRedirectButton.removeAttribute("href");mobileRedirectButton.addEventListener("click",function(e){if(!$('#approvalCheckBox').is(':checked'))return;window.location=redirectUrl;e.preventDefault();},false);}
function eraseCookie(name,domain){var expires="";var date=new Date();date.setTime(date.getTime()-(24*60*60*1000));expires="; expires="+date.toUTCString();document.cookie=name+"="+expires+"; path=/; domain="+domain;}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');var i,c;for(i=0;i<ca.length;i++){c=ca[i];while(c.charAt(0)===' '){c=c.substring(1,c.length);}
if(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length);}}
return null;}
function createSessionCookie(name,value,domain){document.cookie=name+"="+value+"; path=/; domain="+domain;}
function updateWithProjectAndDoc(url){var searchParams=window.location.search;if(url.indexOf('project_id')==-1){url=url+'&project_id='+getParameterByName('project_id');}
if(url.indexOf('alt_doc_id')==-1){url=url+'&alt_doc_id='+getParameterByName('alt_doc_id');}
return url;}
var siteCookie=readCookie(siteCookieName);if(siteCookie){var siteSubcookies=siteCookie.split("&");var retUrlFound=false;var i;for(i=0;i<siteSubcookies.length;i++){if(/^RETURL=/i.test(siteSubcookies[i])){retUrlFound=true;break;}}
var retUrl="";if(retUrlFound){var retUrl=siteSubcookies[i].substring(7);retUrl=decodeURIComponent(retUrl);var queryStringPos=retUrl.indexOf("?");var coalmineUrl=meshAccessoriesPage+"?"+retUrl.substring(queryStringPos+1);coalmineUrl=updateWithProjectAndDoc(coalmineUrl);siteSubcookies[i]=retUrlName+"="+encodeURIComponent(coalmineUrl);}
if(!retUrlFound||!retUrl){var coalmineUrl=meshAccessoriesPage+window.location.search;coalmineUrl=updateWithProjectAndDoc(coalmineUrl);siteSubcookies[i]=retUrlName+"="+encodeURIComponent(coalmineUrl);}
var updatedSiteCookie=siteSubcookies.join("&");eraseCookie(siteCookieName,cookieDomainName);createSessionCookie(siteCookieName,updatedSiteCookie,cookieDomainName);}}}
catch(Exception){throw new Error("Coalmine flow: "+Exception.message);}}());}}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f;u.data={"qsp_delim":"&"||"&","kvp_delim":"="||"=","qs_delim":"?"||"?","tag_type":"img","base_url":"","secure_base_url":"","static_params":"","cachebust":"disabled","cachevar":""||"_rnd","requestscriptonce":"disabled"};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:25958:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(typeof b[d]!=="undefined"&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(!u.data.hasOwnProperty(e[f])){c.push(e[f]+"##kvp_delim##"+u.encode(b[d]));}
u.data[e[f]]=b[d];}}}
if(!u.data.base_url){if(!u.data.secure_base_url){utag.DB("Error: No Base URL or Secure HTTPS Override Provided.");return;}else{u.data.base_url=u.data.secure_base_url;utag.DB("No Base URL provided, using Secure HTTPS Override.");}}
u.data.secure_base_url=u.data.secure_base_url||u.data.base_url;u.data.url=(location.protocol==="https:"?u.data.secure_base_url:u.data.base_url);if(u.data.url.indexOf("http")!==0&&u.data.url.indexOf("/")!==0){u.data.url=location.protocol+"//"+u.data.url;}
if(u.data.static_params){c.push(u.data.static_params);}
var cb_check=new RegExp("(\\"+u.data.qs_delim+"|"+u.data.qsp_delim+")"+u.data.cachevar+"=");if(u.data.cachebust==="enabled"&&!cb_check.test(u.data.url)){c.push([u.data.cachevar,Math.random()].join(u.data.kvp_delim));}
if(c.length>0){if(u.data.url.indexOf(u.data.qs_delim)<0){u.data.url+=u.data.qs_delim;}else if(u.data.url.indexOf(u.data.qs_delim)!==(u.data.url.length-1)){u.data.url+=u.data.qsp_delim;}}
u.data.url=u.rp(u.data.url,b)+u.rp(c.join(u.data.qsp_delim),b);u.data.url=u.data.url.replace(/##kvp_delim##/g,u.data.kvp_delim);u.callback=u.callback||function(){};if(u.data.requestscriptonce==="enabled"&&u.data.tag_type==="script"){if(!u.scriptrequested){u.scriptrequested=true;u.loader({"type":u.data.tag_type,"src":u.data.url,"loc":"script","id":"utag_25958","cb":u.callback});}else{u.callback();}}else{u.loader({"type":u.data.tag_type,"src":u.data.url,"loc":"script","id":"utag_25958","cb":u.callback});}
utag.DB("send:25958:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("25958","vprt.prf-main"));}catch(error){utag.DB(error);}
