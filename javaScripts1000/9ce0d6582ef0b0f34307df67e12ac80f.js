(()=>{var e;function t(){navigator.onLine?(jQuery(".topper").remove(),Topper({title:"",text:Lang.get("single.back_online"),style:"success",type:"bottom",autoclose:!0,autocloseAfter:2e3})):(jQuery(".topper").remove(),Topper({title:"",text:Lang.get("single.internet_error"),style:"danger",type:"bottom",autoclose:!1,autocloseAfter:1e3}))}window.kutils=window.kutils||{},window.kutils.purl=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new URI(e).addQuery((new URI).query(!0));return t?n.toString():n},window.kutils.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]},window.kutils.defer=function(e){var t=window.jQuery.Deferred();return t.resolve(e()),t.promise()},window.kutils.updateSondage=function(){var e=window.jQuery;e(".list-poll").filter("[data-total]").find("li[data-val]").each((function(){e(this).append('<span class="inner" style="width:'+e(this).attr("data-val")/e(this).parents(".list-poll").attr("data-total")*148+'%;">'+e(this).text()+"</span>")}))},window.kutils.pOpen=function(e){var t=window.jQuery('#popupTriggers [data-popup="'+e+'"]').get(0);t&&t.click()},window.kutils.pClose=function(e){window.jQuery('.popup-a.shown[data-title="'+e+'"]').find("a.close").click()},window.jQuery((function(e){var t;e("input.date").datepicker({language:"ar",position:"bottom left",maxDate:new Date,todayButton:new Date,clearButton:!0,autoClose:!0}),e("a[data-popup]").on("click",(function(t){e("form.popup-a").find(".close").trigger("click");var n=e(t.target);e(e('[data-title="'+n.data("popup")+'"]').get(0)).find("p.captcha img").trigger("click")})),(t=e("form.kreo-pdf-finder")).on("submit",(function(n){t.find(".message-box").hide(),n.preventDefault();var i=e(this).find('[name="date"]').val();e("body").addClass("loading"),window.kutils._axios.get("/"+document.querySelector('meta[name="language"]').content+"/pdf/download",{params:{date:i}}).then((function(t){window.open("/"+document.querySelector('meta[name="language"]').content+"/pdf/download?date="+i,"_blank"),e("body").removeClass("loading")})).catch((function(n){if(404==n.response.status)return t.find(".message-box").show(),e("body").removeClass("loading"),!1}))})),function(e,t){var n=t("#alert");n.on("click",(function(t){n.hasClass("toggle")&&e.post("/fr/alerte/close")})),n.find("a:not(.close)").each((function(){t(this).on("click",(function(){e.put(t(this).data("endpoint"))}))}))}(window.kutils._axios,e)})),function(e,t){var n=t.kutils.purl("/api/newsletter");new Vue({el:"#app_newsletter",data:{nom:null,email:null,errors:[],responseClass:""},methods:{send:function(){console.log("senddddddd");var e=this;t.kutils._axios.post(n,{nom:e.nom,email:e.email}).then((function(t){e.errors={succÃ¨s:[t.data.message]},e.responseClass="text-success"})).catch((function(t){if(422==t.response.status){var n=t.response.data;e.errors=n.errors,e.responseClass="text-error"}}))}}})}(window.jQuery,window),function(e,t,n){var i=t.kutils.purl("/api/meteo");new Vue({el:"#app_weather",data:{temperature:null,windSpeed:null,humidity:null,description:null,ready:!1,city:"Alger",cityAr:"Ø§ÙØ¬Ø²Ø§Ø¦Ø±",iconURL:null},methods:{updateWeatherData:function(e){this.temperature=e.temperature,this.windSpeed=e.windSpeed,this.humidity=e.humidity,this.description=e.weather.description,this.iconURL="/images/weather/"+e.icon+".svg"},init:function(e){var o=this;o.cityAr=e.options?e.options[e.options.selectedIndex].dataset.valueAr:o.cityAr,e=e.value?e.value:o.city,o.city=e,t.kutils._axios.get(i,{params:{city:e}}).then((function(e){var t=e.data;if(console.log(t),1==t.fake&&n){t=JSON.parse(n.getItem("meteo_cache"));return o.updateWeatherData(t),void(o.ready=!0)}n.setItem("meteo_cache",JSON.stringify(t)),o.updateWeatherData(t),o.ready=!0})).catch((function(e){e.response&&404==e.response.status&&(o.city=null)}))}},created:function(e){this.init(this.city)}})}(window.jQuery,window,window.localStorage),e=window.jQuery,window,e(".shorturl").click((function(t){t.preventDefault();var n=e(this).attr("href"),i=e("<input>");e("body").append(i),i.val(n).select(),document.execCommand("Copy"),i.remove(),e(this).html("&#x2714").addClass("active"),e(this).next().css("visibility","visible"),setTimeout((function(){e(".tooltip").css("visibility","hidden")}),6e3)})),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js").then((function(e){return console.log("service worker registered")})).catch((function(e){return console.log("service worker not registered",e)}))})),document.addEventListener("DOMContentLoaded",(function(e){navigator.onLine||t(),window.addEventListener("online",t,!1),window.addEventListener("offline",t,!1)})),window.addEventListener("load",(function(){firebase.initializeApp({messagingSenderId:"642321293338",apiKey:"AIzaSyDIPOvrLL-JrhuZsy58ExiXJAKf4HuklYw",projectId:"elbilad-b9afe",appId:"1:642321293338:web:7f65d900b82382dbe6b1a3"});var e=firebase.messaging();e.requestPermission().then((function(){return e.getToken()})).then((function(e){window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",axios.post("/api/token",{token:e,responseType:"json"}).then((function(e){}))})).catch((function(e){}))}))})();