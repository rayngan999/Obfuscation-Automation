(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1119:function(t,e,r){"use strict";var o=r(807).a,n=r(5),i=Object(n.a)(o,void 0,void 0,!1,null,"7d373a0b",null);e.a=i.exports},807:function(t,e,r){"use strict";(function(t){var o=r(2),n=r(0),i=r(4),c=r.n(i),s=r(89),a=r(960);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(r,!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}n.g.register([{rel:"stylesheet",type:"text/css",href:"public/[WEB_VER]/css/page/commonV2/card/project.css"}]),e.a={components:{},inject:{block_title:{from:"block_title",default:""}},filters:{},mixins:[s.a],props:p({project:{type:Object,default:function(){},required:!1},loading:{type:Boolean,default:!1,required:!1},sourceFrom:{type:String,default:"",required:!1},member_info:{type:Object,default:function(){},required:!1},clickDisable:{type:Boolean,default:!1,required:!1}},a.a),data:function(){return{follow_action:!1,reward_types_name:{subscribe:"è¨é±",purchase:"èª²ç¨"},follow_images:{default:{src:"/public/img/follow-default.png",srcset:["/public/img/follow-default@2x.png 2x","/public/img/follow-default@3x.png 3x"]},active:{src:"/public/img/follow-active.png",srcset:["/public/img/follow-active@2x.png 2x","/public/img/follow-active@3x.png 3x"]}},toggleFollow:!1}},computed:p({},Object(o.mapGetters)(["PageSetting"]),{},Object(o.mapState)({ppServerTime:function(t){return c()(new Date(t.ppServerTime),c.a.HTML5_FMT.DATETIME_LOCAL_SECONDS)}}),{isLogin:function(){return!!this.member_info.member_id},isPPO:function(){return"ppo"===this.project.project_attr},isInclusion:function(){return this.project.is_inclusion},creator:function(){return this.project.owner?"".concat(this.project.owner.nickname||this.project.owner.username):""},showBuyNumber:function(){return(this.project.subscribe_num>=0||this.project.purchase_num>=0)&&!this.project.is_inclusion},number:function(){return(this.project.subscribe_num>=0?this.project.subscribe_num:0)+(this.project.purchase_num>=0?this.project.purchase_num:0)},progress:function(){return!!this.project.funding&&{percent:this.project.funding.reach_percent>=100?"100%":"".concat(this.project.funding.reach_percent,"%"),type:this.project.reward_types.length>0?this.project.reward_types[0]:"subscribe"}},fundingPercentage:function(){return!!this.project.funding&&(this.project.funding.reach_percent>=100?"åè³éæ¨ ".concat(this.project.funding.reach_percent,"%"):"åè³é²åº¦ ".concat(this.project.funding.reach_percent,"%"))},foundingStatus:function(){if(this.project.funding&&this.project.funding.start_time&&this.project.funding.end_time){var t=this.project.funding,e=t.start_time,r=t.end_time,o=this.ppServerTime;return c()(e).diff(o,"seconds")>=0?"NOT_START":c()(r).diff(o,"seconds")<0?"THE_END":"IN_PROGRESS"}return!1},foundingText:function(){var t="";if(this.project.funding){var e=this.project.funding.start_time;switch(this.foundingStatus){case"NOT_START":t="".concat(this.formatTime(e)," éå§åè³");break;case"THE_END":t=this.project.funding.reach_percent<100?"åè³æªéæ¨":"è³¼è²·äººæ¸ ".concat(this.formatNumber(this.number));break;case"IN_PROGRESS":t=this.countDownText}}return t},countDownText:function(){var t="",e=this.time,r=e.years,o=e.months,n=e.days,i=e.hours,c=e.minutes,s=e.seconds,a=e.asDays,u=e.asHours,p=(e.asMinutes,e.asSeconds);return e.timesUp?t="åè³å·²çµæ":"number"!=typeof r&&"number"!=typeof o&&"number"!=typeof n&&"number"!=typeof i&&"number"!=typeof c&&"number"!=typeof s||(t=0===r&&0===o&&0===n&&0===i&&0===c?"éå© ".concat(p," ç§"):0===r&&0===o&&0===n&&0===i?"éå© ".concat(c," å ").concat(s," ç§"):0===r&&0===o&&0===n?"éå© ".concat(u," å°æ"):"éå© ".concat(a," å¤©")),t},notEmptyLabel:function(){return!!this.project.labels&&this.project.labels.length>0},labels:function(){return this.notEmptyLabel?this.project.labels.filter((function(t,e){return 0===e})):[]},time:function(){if(this.project&&this.project.funding){var t=this.project.funding.end_time;if(t&&"IN_PROGRESS"===this.foundingStatus){var e=this.ppServerTime,r=c()(t).diff(e,"seconds"),o=c.a.duration(r,"seconds");o.asSeconds()<=0&&clearInterval(this.timeInterval);var n=c.a.duration(o).years(),i=c.a.duration(o).months(),s=c.a.duration(o).days(),a=c.a.duration(o).hours(),u=c.a.duration(o).minutes(),p=c.a.duration(o).seconds(),l=c.a.duration(o,"seconds").asDays(),d=c.a.duration(o,"seconds").asHours(),f=c.a.duration(o,"seconds").asMinutes(),h=c.a.duration(o,"seconds").asSeconds(),m={years:n,months:i,days:s,hours:a,minutes:u,seconds:p,asDays:Math.floor(l),asHours:Math.floor(d),asMinutes:Math.floor(f),asSeconds:Math.floor(h),timesUp:0===n&&0===i&&0===s&&0===a&&0===u&&0===p};return m}}return{years:"--",months:"--",days:"--",hours:"--",minutes:"--",seconds:"--",asDays:"--",asHours:"--",asMinutes:"--",asSeconds:"--",timesUp:!1}}}),watch:{PageSetting:{handler:function(t){t.width?t.width<this.pc_min_size?this.mode_type="mobile":this.mode_type="pc":this.mode_type=t.mode_type},immediate:!0},project:{handler:function(t){t&&(this.toggleFollow=t.is_follower)},deep:!0,immediate:!0}},created:function(){},mounted:function(){var t=this;t.$nextTick().then((function(){t.lazyImg()}))},updated:function(){},destroyed:function(){},methods:p({},Object(o.mapActions)({}),{},Object(o.mapMutations)({}),{exposureAct:function(){this.project&&(this.exposureCount+=1,n.c.enterProject(this.project.project_id,"projectCard",this.sourceFrom))},lazyImg:function(){t(this.$el).find(".lazyload").removeClass("lazy-bind lazy-empty"),t("body").trigger("lazyImg")},formatMoney:n.s.formatMoney,formatNumber:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this;return t<1e4?e.formatMoney(t):t>=1e4&&t<1e7?"".concat(e.formatMoney((t/1e3).toFixed(2)),"k"):"".concat(e.formatMoney((t/1e6).toFixed(2)),"m")},formatTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getTime(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD";return c()(t,c.a.HTML5_FMT.DATETIME_LOCAL_SECONDS).format(e)},clickProjectCard:function(t){if(!0!==this.clickDisable){var e={project_id:this.project.project_id,source_from:this.sourceFrom||"",card_type:this.card_type||""};if(this.project.analytics&&(Object.keys(this.project.analytics).length>0||this.project.analytics.length>0)&&(e.analytics=this.project.analytics),n.s.getQueryVariable("search_keyword")&&(e.search_keyword=n.s.getQueryVariable("search_keyword")),n.s.getQueryVariable("type")&&(e.type=n.s.getQueryVariable("type")),this.$route){var r=this.$route.params.activity_id;r&&(e.activity_id=r)}this.block_title&&(e.block_title=this.block_title),n.p.pageAction("projectCard_click",e)}else t.preventDefault()},follow:function(t){this.openLoginModal(t)&&(this.follow_action||this.followAct())},followAct:function(){var t=this,e={project_id:t.project.project_id};t.follow_action=!0,t.toggleFollow=!t.toggleFollow,t.$store.dispatch("setPPGlobalFollowProject",e).then((function(r){t.follow_action=!1;var o={project_id:e.project_id,is_followed:r.data.is_followed,sourceFrom:t.sourceFrom,source_from:t.sourceFrom||"",card_type:t.card_type||""},n={data:r.data,ppPanel_data:o,event_category:"project",event_label:{project_id:e.project_id}};t.$store.commit("triggerProjectFollowLog",n)})).catch((function(e){t.follow_action=!1}))},openLoginModal:function(e){var r=t(e.target||e.currentTarget);r&&!r.hasClass("detect-target")&&(r=r.parents(".detect-target"));return r&&r.data("target"),!!this.isLogin||(e.preventDefault&&e.preventDefault(),n.j.isMobileApp()?n.j.openNativeLogin():this.$store.dispatch("PressPlayLoginModalTriggerOpen",{}),!1)},labelTag:function(t){return t?"pp-router-link":"div"}})}}).call(this,r(1))},960:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var o={};Object.keys(o).reduce((function(t,e){return t[e]=o[e].default,t}),{}),Object.keys(o).reduce((function(t,e){return t[e]=o[e].type,t}),{})}}]);