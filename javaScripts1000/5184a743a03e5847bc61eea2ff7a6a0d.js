"use strict";!function(){function a(e,i,t){this.prepare(t.formName,i),this.form&&this.init(e,t.validationCallback)}a.prototype.prepare=function(e,i){this.componentName=e,this.form=document.forms[e],this.customValidation=i},a.prototype.extractFormValidationRules=function(e){return Array.prototype.slice.call(e.querySelectorAll("[data-rules]")||[]).map(function(e){return{name:e.getAttribute("name"),display:e.getAttribute("name"),rules:e.getAttribute("data-rules")}})},a.prototype.init=function(e,i){var t=this.extractFormValidationRules(this.form);this.validator=e.validate(this.componentName,t,i),this.registerCallbacks(e),e.validateFieldsOnBlur(this.validator)},a.prototype.registerCallback=function(e,i){var t=this.customValidation[e],a=this.validator.registerCallback(e,t);i&&a.setMessage(e,i)},a.prototype.registerCallbacks=function(e){e.getMessages(function(e){this.registerCallback("alphaAndSpace",e.alpha_and_space),this.registerCallback("isCompleteZipCode",e.oops_check_this_field),this.registerCallback("isValidZipCode",e.oops_check_this_field),this.registerCallback("isCompletePhone",e.oops_check_this_field),this.registerCallback("minTwoWords",e.oops_check_this_field),this.registerCallback("forbiddenWords",e.oops_check_this_field),this.registerCallback("sameCharForCellphone",e.oops_check_this_field),this.registerCallback("sameCharForName",e.oops_check_this_field),this.registerCallback("minChars",e.oops_check_this_field),this.registerCallback("validPhone",e.oops_check_this_field),this.registerCallback("isNotZero",e.oops_check_this_field),this.registerCallback("checkInvoiceFullName",e.check_field_full_name)}.bind(this))},window.freedom.nsPubSub.sub("formValidationCore.loaded",function(t){window.freedom.nsPubSub.sub("formValidationCustom.loaded",function(i){window.freedom.nsPubSub.sub("formValidation.validateForm",function(e){window.freedom.nsPubSub.pub("formValidation.instance_"+e.formName,new a(t,i,e))}),window.freedom.nsPubSub.pub("formValidation.validateForm.loaded",t)})})}();