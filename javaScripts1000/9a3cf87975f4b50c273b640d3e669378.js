Cube("datav:/com/main-img/1.4.2",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/xss/0.3.4"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/bcore/0.0.18/event"),f=c("datav:/npm/jquery/2.1.4"),g=c("datav:/npm/lodash/4.6.1"),h=c("datav:/npm/xss/0.3.4"),i=function(a){if(!a)return"none";if("string"===typeof a)return a;switch(a.type){case"flat":return a.value;case"linearGradient":return"linear-gradient("+a.value.angle+"deg, "+g.map(a.value.stops,function(a){return a.color+" "+a.offset+"%"})+")";}};return a.exports=e.extend(function(a,b){this.container=f(a),this.apis=b.apis,this.config=g.defaultsDeep(b,{imageType:"bitmap","background-image":"",vectorImage:"",vectorFill:"#2483FF",repeat:"no-repeat",radius:0,"inner-style":{"image-rendering":"-webkit-optimize-contrast"},cursor:!0})},{render:function(a,b){if(a||(a=this._data),!!a){this._data=a;var c=this.container;this.config=g.defaultsDeep(b||{},this.config);var d=this.config,e=d.imageType,f=d.urlConfig,j=f.url,k=f.ifBlank,l=d.radius,m=d.cursor,n=d.vectorFill,o=g.get(a,["0","img"]);if("bitmap"===e){var p=o?o:g.get(d,"background-image");p&&!/url\(/.test(p)&&(p="url(\""+p+"\")"),d["inner-style"]["background-repeat"]=d.repeat,this.repeatFn("background-size"),d["inner-style"]&&c.css(d["inner-style"]),c.css({"background-image":p,"mask-image":"none","mask-repeat":"initial","mask-size":"initial"})}else{var q=o?o:g.get(d,"vectorImage");q&&!/url\(/.test(q)&&(q="url(\""+q+"\")"),d["inner-style"]["mask-repeat"]=d.repeat,this.repeatFn("mask-size"),d["inner-style"]&&c.css(d["inner-style"]),c.css({"mask-image":q,"background-image":"none",background:i(n),"background-repeat":"initial","background-size":"initial"})}c.css({"border-radius":l+"px",cursor:m&&"pointer"||"default"});var r=g.get(a,["0","url"])||j,s=k?"target=\"_blank\"":"";(a[0]&&a[0].url||j)&&(this.container.html(h("<a href=\""+r+"\" "+s+"></a>")),this.container.find("a").css({display:"block",width:"100%",height:"100%"}));var t=this;this.container.off("click").on("click",function(){t.eventFn("handleClick")}),this.container.off("mouseenter").on("mouseenter",function(){t.eventFn("mouseEnter")}),this.container.off("mouseleave").on("mouseleave",function(){t.eventFn("mouseLeave")})}},repeatFn:function(a){switch(g.get(this.config,"repeat")){case"no-repeat":this.config["inner-style"][a]="100% 100%";break;case"repeat-x":this.config["inner-style"][a]="auto 100%";break;case"repeat-y":this.config["inner-style"][a]="100% auto";break;case"repeat":this.config["inner-style"][a]="auto auto";break;default:}return this.config["inner-style"]},eventFn:function(a){if(this._data&&this._data.length&&!g.isEmpty(this._data[0].img))this.eventEmit(a,this._data[0]);else if(this._data&&this._data.length){var b=d({},this._data[0],{img:this.config["background-image"],url:this.config.urlConfig.url});this.eventEmit(a,b)}else this.eventEmit(a,{img:this.config["background-image"],url:this.config.urlConfig.url})},eventEmit:function(a,b){b&&this.emit(a,b)},destroy:function(){this.container.empty(),this.container.css("background",""),this._data=null}}),a.exports});