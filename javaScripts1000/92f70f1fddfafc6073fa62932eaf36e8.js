/*
 AngularJS v1.5.11
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(y){'use strict';function G(a,b){b=b||Error;return function(){var d=arguments[0],c;c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/1.5.11/"+(a?a+"/":"")+d;for(d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var f=encodeURIComponent,e;e=arguments[d];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;c+=f(e)}return new b(c)}}function la(a){if(null==a||Ya(a))return!1;if(I(a)||D(a)||F&&a instanceof
F)return!0;var b="length"in Object(a)&&a.length;return ba(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"===typeof a.item)}function q(a,b,d){var c,f;if(a)if(C(a))for(c in a)"prototype"===c||"length"===c||"name"===c||a.hasOwnProperty&&!a.hasOwnProperty(c)||b.call(d,a[c],c,a);else if(I(a)||la(a)){var e="object"!==typeof a;c=0;for(f=a.length;c<f;c++)(e||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==q)a.forEach(b,d,a);else if(xc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===
typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ua.call(a,c)&&b.call(d,a[c],c,a);return a}function yc(a,b,d){for(var c=Object.keys(a).sort(),f=0;f<c.length;f++)b.call(d,a[c[f]],c[f]);return c}function zc(a){return function(b,d){a(d,b)}}function ke(){return++sb}function Rb(a,b,d){for(var c=a.$$hashKey,f=0,e=b.length;f<e;++f){var g=b[f];if(E(g)||C(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var m=h[k],n=g[m];d&&E(n)?ja(n)?a[m]=new Date(n.valueOf()):
Za(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):Sb(n)?a[m]=n.clone():(E(a[m])||(a[m]=I(n)?[]:{}),Rb(a[m],[n],!0)):a[m]=n}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function R(a){return Rb(a,va.call(arguments,1),!1)}function le(a){return Rb(a,va.call(arguments,1),!0)}function Z(a){return parseInt(a,10)}function Tb(a,b){return R(Object.create(a),b)}function w(){}function $a(a){return a}function ha(a){return function(){return a}}function Ac(a){return C(a.toString)&&a.toString!==ma}function z(a){return"undefined"===
typeof a}function x(a){return"undefined"!==typeof a}function E(a){return null!==a&&"object"===typeof a}function xc(a){return null!==a&&"object"===typeof a&&!Bc(a)}function D(a){return"string"===typeof a}function ba(a){return"number"===typeof a}function ja(a){return"[object Date]"===ma.call(a)}function C(a){return"function"===typeof a}function Za(a){return"[object RegExp]"===ma.call(a)}function Ya(a){return a&&a.window===a}function ab(a){return a&&a.$evalAsync&&a.$watch}function Ka(a){return"boolean"===
typeof a}function me(a){return a&&ba(a.length)&&ne.test(ma.call(a))}function Sb(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function oe(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function wa(a){return Q(a.nodeName||a[0]&&a[0].nodeName)}function bb(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function sa(a,b){function d(a,b){var d=b.$$hashKey,e;if(I(a)){e=0;for(var f=a.length;e<f;e++)b.push(c(a[e]))}else if(xc(a))for(e in a)b[e]=c(a[e]);else if(a&&
"function"===typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&(b[e]=c(a[e]));else for(e in a)ua.call(a,e)&&(b[e]=c(a[e]));d?b.$$hashKey=d:delete b.$$hashKey;return b}function c(a){if(!E(a))return a;var b=e.indexOf(a);if(-1!==b)return g[b];if(Ya(a)||ab(a))throw xa("cpws");var b=!1,c=f(a);void 0===c&&(c=I(a)?[]:Object.create(Bc(a)),b=!0);e.push(a);g.push(c);return b?d(a,c):c}function f(a){switch(ma.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(c(a.buffer),
a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(C(a.cloneNode))return a.cloneNode(!0)}
var e=[],g=[];if(b){if(me(b)||"[object ArrayBuffer]"===ma.call(b))throw xa("cpta");if(a===b)throw xa("cpi");I(b)?b.length=0:q(b,function(a,d){"$$hashKey"!==d&&delete b[d]});e.push(a);g.push(b);return d(a,b)}return c(a)}function na(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d===typeof b&&"object"===d)if(I(a)){if(!I(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!na(a[c],b[c]))return!1;return!0}}else{if(ja(a))return ja(b)?na(a.getTime(),
b.getTime()):!1;if(Za(a))return Za(b)?a.toString()===b.toString():!1;if(ab(a)||ab(b)||Ya(a)||Ya(b)||I(b)||ja(b)||Za(b))return!1;d=V();for(c in a)if("$"!==c.charAt(0)&&!C(a[c])){if(!na(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&x(b[c])&&!C(b[c]))return!1;return!0}return!1}function cb(a,b,d){return a.concat(va.call(b,d))}function db(a,b){var d=2<arguments.length?va.call(arguments,2):[];return!C(b)||b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,
cb(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function pe(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:Ya(b)?d="$WINDOW":b&&y.document===b?d="$DOCUMENT":ab(b)&&(d="$SCOPE");return d}function eb(a,b){if(!z(a))return ba(b)||(b=b?2:null),JSON.stringify(a,pe,b)}function Cc(a){return D(a)?JSON.parse(a):a}function Dc(a,b){a=a.replace(qe,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return ia(d)?b:d}function Ub(a,
b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=Dc(b,c);d*=b-c;a=new Date(a.getTime());a.setMinutes(a.getMinutes()+d);return a}function ya(a){a=F(a).clone();try{a.empty()}catch(b){}var d=F("<div>").append(a).html();try{return a[0].nodeType===La?Q(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+Q(b)})}catch(c){return Q(d)}}function Ec(a){try{return decodeURIComponent(a)}catch(b){}}function Fc(a){var b={};q((a||"").split("&"),function(a){var c,f,e;a&&(f=a=a.replace(/\+/g,"%20"),
c=a.indexOf("="),-1!==c&&(f=a.substring(0,c),e=a.substring(c+1)),f=Ec(f),x(f)&&(e=x(e)?Ec(e):!0,ua.call(b,f)?I(b[f])?b[f].push(e):b[f]=[b[f],e]:b[f]=e))});return b}function Vb(a){var b=[];q(a,function(a,c){I(a)?q(a,function(a){b.push(oa(c,!0)+(!0===a?"":"="+oa(a,!0)))}):b.push(oa(c,!0)+(!0===a?"":"="+oa(a,!0)))});return b.length?b.join("&"):""}function tb(a){return oa(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function oa(a,b){return encodeURIComponent(a).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function re(a,b){var d,c,f=Oa.length;for(c=0;c<f;++c)if(d=Oa[c]+b,D(d=a.getAttribute(d)))return d;return null}function se(a,b){var d,c,f={};q(Oa,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});q(Oa,function(b){b+="app";var f;!d&&(f=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=f,c=f.getAttribute(b))});d&&(te?(f.strictDi=null!==re(d,"strict-di"),
b(d,c?[c]:[],f)):y.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function Gc(a,b,d){E(d)||(d={});d=R({strictDi:!1},d);var c=function(){a=F(a);if(a.injector()){var c=a[0]===y.document?"document":ya(a);throw xa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);
b.unshift("ng");c=fb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},f=/^NG_ENABLE_DEBUG_INFO!/,e=/^NG_DEFER_BOOTSTRAP!/;y&&f.test(y.name)&&(d.debugInfoEnabled=!0,y.name=y.name.replace(f,""));if(y&&!e.test(y.name))return c();y.name=y.name.replace(e,"");$.resumeBootstrap=function(a){q(a,function(a){b.push(a)});return c()};C($.resumeDeferredBootstrap)&&$.resumeDeferredBootstrap()}function ue(){y.name=
"NG_ENABLE_DEBUG_INFO!"+y.name;y.location.reload()}function ve(a){a=$.element(a).injector();if(!a)throw xa("test");return a.get("$$testability")}function Hc(a,b){b=b||"_";return a.replace(we,function(a,c){return(c?b:"")+a.toLowerCase()})}function xe(){var a;if(!Ic){var b=ub();(za=z(b)?y.jQuery:b?y[b]:void 0)&&za.fn.on?(F=za,R(za.fn,{scope:Pa.scope,isolateScope:Pa.isolateScope,controller:Pa.controller,injector:Pa.injector,inheritedData:Pa.inheritedData}),a=za.cleanData,za.cleanData=function(b){for(var c,
f=0,e;null!=(e=b[f]);f++)(c=za._data(e,"events"))&&c.$destroy&&za(e).triggerHandler("$destroy");a(b)}):F=W;$.element=F;Ic=!0}}function gb(a,b,d){if(!a)throw xa("areq",b||"?",d||"required");return a}function Qa(a,b,d){d&&I(a)&&(a=a[a.length-1]);gb(C(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Ra(a,b){if("hasOwnProperty"===a)throw xa("badname",b);}function Jc(a,b,d){if(!b)return a;b=b.split(".");for(var c,f=a,e=b.length,g=0;g<e;g++)c=
b[g],a&&(a=(f=a)[c]);return!d&&C(a)?db(f,a):a}function vb(a){for(var b=a[0],d=a[a.length-1],c,f=1;b!==d&&(b=b.nextSibling);f++)if(c||a[f]!==b)c||(c=F(va.call(a,0,f))),c.push(b);return c||a}function V(){return Object.create(null)}function ye(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=G("$injector"),c=G("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||G;return b(a,"module",function(){var a={};return function(e,g,h){if("hasOwnProperty"===e)throw c("badname","module");g&&a.hasOwnProperty(e)&&
(a[e]=null);return b(a,e,function(){function a(b,d,e,f){f||(f=c);return function(){f[e||"push"]([b,d,arguments]);return H}}function b(a,d){return function(b,f){f&&C(f)&&(f.$$moduleName=e);c.push([a,d,arguments]);return H}}if(!g)throw d("nomod",e);var c=[],f=[],r=[],s=a("$injector","invoke","push",f),H={_invokeQueue:c,_configBlocks:f,_runBlocks:r,requires:g,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide",
"constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:s,run:function(a){r.push(a);return this}};h&&s(h);return H})}})}function ka(a,b){if(I(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(E(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];
return b||a}function ze(a){R(a,{bootstrap:Gc,copy:sa,extend:R,merge:le,equals:na,element:F,forEach:q,injector:fb,noop:w,bind:db,toJson:eb,fromJson:Cc,identity:$a,isUndefined:z,isDefined:x,isString:D,isFunction:C,isObject:E,isNumber:ba,isElement:Sb,isArray:I,version:Ae,isDate:ja,lowercase:Q,uppercase:wb,callbacks:{$$counter:0},getTestability:ve,$$minErr:G,$$csp:da,reloadWithDebugInfo:ue});Wb=ye(y);Wb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Be});a.provider("$compile",Kc).directive({a:Ce,
input:Lc,textarea:Lc,form:De,script:Ee,select:Fe,option:Ge,ngBind:He,ngBindHtml:Ie,ngBindTemplate:Je,ngClass:Ke,ngClassEven:Le,ngClassOdd:Me,ngCloak:Ne,ngController:Oe,ngForm:Pe,ngHide:Qe,ngIf:Re,ngInclude:Se,ngInit:Te,ngNonBindable:Ue,ngPluralize:Ve,ngRepeat:We,ngShow:Xe,ngStyle:Ye,ngSwitch:Ze,ngSwitchWhen:$e,ngSwitchDefault:af,ngOptions:bf,ngTransclude:cf,ngModel:df,ngList:ef,ngChange:ff,pattern:Mc,ngPattern:Mc,required:Nc,ngRequired:Nc,minlength:Oc,ngMinlength:Oc,maxlength:Pc,ngMaxlength:Pc,ngValue:gf,
ngModelOptions:hf}).directive({ngInclude:jf}).directive(xb).directive(Qc);a.provider({$anchorScroll:kf,$animate:lf,$animateCss:mf,$$animateJs:nf,$$animateQueue:of,$$AnimateRunner:pf,$$animateAsyncRun:qf,$browser:rf,$cacheFactory:sf,$controller:tf,$document:uf,$exceptionHandler:vf,$filter:Rc,$$forceReflow:wf,$interpolate:xf,$interval:yf,$http:zf,$httpParamSerializer:Af,$httpParamSerializerJQLike:Bf,$httpBackend:Cf,$xhrFactory:Df,$jsonpCallbacks:Ef,$location:Ff,$log:Gf,$parse:Hf,$rootScope:If,$q:Jf,
$$q:Kf,$sce:Lf,$sceDelegate:Mf,$sniffer:Nf,$templateCache:Of,$templateRequest:Pf,$$testability:Qf,$timeout:Rf,$window:Sf,$$rAF:Tf,$$jqLite:Uf,$$HashMap:Vf,$$cookieReader:Wf})}])}function hb(a){return a.replace(Xf,function(a,d,c,f){return f?c.toUpperCase():c}).replace(Yf,"Moz$1")}function Sc(a){a=a.nodeType;return 1===a||!a||9===a}function Tc(a,b){var d,c,f=b.createDocumentFragment(),e=[];if(Xb.test(a)){d=f.appendChild(b.createElement("div"));c=(Zf.exec(a)||["",""])[1].toLowerCase();c=pa[c]||pa._default;
d.innerHTML=c[1]+a.replace($f,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;e=cb(e,d.childNodes);d=f.firstChild;d.textContent=""}else e.push(b.createTextNode(a));f.textContent="";f.innerHTML="";q(e,function(a){f.appendChild(a)});return f}function Uc(a,b){var d=a.parentNode;d&&d.replaceChild(b,a);b.appendChild(a)}function W(a){if(a instanceof W)return a;var b;D(a)&&(a=Y(a),b=!0);if(!(this instanceof W)){if(b&&"<"!==a.charAt(0))throw Yb("nosel");return new W(a)}if(b){b=y.document;var d;a=(d=ag.exec(a))?
[b.createElement(d[1])]:(d=Tc(a,b))?d.childNodes:[]}Vc(this,a)}function Zb(a){return a.cloneNode(!0)}function yb(a,b){b||ib(a);if(a.querySelectorAll)for(var d=a.querySelectorAll("*"),c=0,f=d.length;c<f;c++)ib(d[c])}function Wc(a,b,d,c){if(x(c))throw Yb("offargs");var f=(c=zb(a))&&c.events,e=c&&c.handle;if(e)if(b){var g=function(b){var c=f[b];x(d)&&bb(c||[],d);x(d)&&c&&0<c.length||(a.removeEventListener(b,e,!1),delete f[b])};q(b.split(" "),function(a){g(a);Ab[a]&&g(Ab[a])})}else for(b in f)"$destroy"!==
b&&a.removeEventListener(b,e,!1),delete f[b]}function ib(a,b){var d=a.ng339,c=d&&jb[d];c&&(b?delete c.data[b]:(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),Wc(a)),delete jb[d],a.ng339=void 0))}function zb(a,b){var d=a.ng339,d=d&&jb[d];b&&!d&&(a.ng339=d=++bg,d=jb[d]={events:{},data:{},handle:void 0});return d}function $b(a,b,d){if(Sc(a)){var c=x(d),f=!c&&b&&!E(b),e=!b;a=(a=zb(a,!f))&&a.data;if(c)a[b]=d;else{if(e)return a;if(f)return a&&a[b];R(a,b)}}}function Bb(a,b){return a.getAttribute?
-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Cb(a,b){b&&a.setAttribute&&q(b.split(" "),function(b){a.setAttribute("class",Y((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Y(b)+" "," ")))})}function Db(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");q(b.split(" "),function(a){a=Y(a);-1===d.indexOf(" "+a+" ")&&(d+=a+" ")});a.setAttribute("class",Y(d))}}function Vc(a,b){if(b)if(b.nodeType)a[a.length++]=
b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function Xc(a,b){return Eb(a,"$"+(b||"ngController")+"Controller")}function Eb(a,b,d){9===a.nodeType&&(a=a.documentElement);for(b=I(b)?b:[b];a;){for(var c=0,f=b.length;c<f;c++)if(x(d=F.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function Yc(a){for(yb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Fb(a,b){b||yb(a);var d=a.parentNode;d&&d.removeChild(a)}
function cg(a,b){b=b||y;if("complete"===b.document.readyState)b.setTimeout(a);else F(b).on("load",a)}function Zc(a,b){var d=Gb[b.toLowerCase()];return d&&$c[wa(a)]&&d}function dg(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],g=e?e.length:0;if(g){if(z(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=
function(){return!0===c.immediatePropagationStopped};var k=e.specialHandlerWrapper||eg;1<g&&(e=ka(e));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||k(a,c,e[l])}};d.elem=a;return d}function eg(a,b,d){d.call(a,b)}function fg(a,b,d){var c=b.relatedTarget;c&&(c===a||gg.call(a,c))||d.call(a,b)}function Uf(){this.$get=function(){return R(W,{hasClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Db(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);
return Cb(a,b)}})}}function Aa(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||ke)():d+":"+a}function Sa(a,b){if(b){var d=0;this.nextUid=function(){return++d}}q(a,this.put,this)}function ad(a){a=(Function.prototype.toString.call(a)+" ").replace(hg,"");return a.match(ig)||a.match(jg)}function kg(a){return(a=ad(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function fb(a,b){function d(a){return function(b,
c){if(E(b))q(b,zc(a));else return a(b,c)}}function c(a,b){Ra(a,"service");if(C(b)||I(b))b=r.instantiate(b);if(!b.$get)throw Ba("pget",a);return n[a+"Provider"]=b}function f(a,b){return function(){var c=u.invoke(b,this);if(z(c))throw Ba("undef",a);return c}}function e(a,b,d){return c(a,{$get:!1!==d?f(a,b):b})}function g(a){gb(z(a)||I(a),"modulesToLoad","not an array");var b=[],c;q(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=r.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,
!0);try{D(a)?(c=Wb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):C(a)?b.push(r.invoke(a)):I(a)?b.push(r.invoke(a)):Qa(a,"module")}catch(e){throw I(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ba("modulerr",a,e.stack||e.message||e);}}});return b}function h(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===k)throw Ba("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=
c(b,e),a[b]}catch(f){throw a[b]===k&&delete a[b],f;}finally{l.shift()}}function e(a,c,f){var g=[];a=fb.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if("string"!==typeof l)throw Ba("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);I(a)&&(a=a[a.length-1]);d=11>=Ia?!1:"function"===typeof a&&/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(a)+" ");return d?(c.unshift(null),new (Function.prototype.bind.apply(a,
c))):a.apply(b,c)},instantiate:function(a,b,c){var d=I(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:fb.$$annotate,has:function(b){return n.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],m=new Sa([],!0),n={$provide:{provider:d(c),factory:d(e),service:d(function(a,b){return e(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return e(a,ha(b),!1)}),constant:d(function(a,b){Ra(a,"constant");
n[a]=b;s[a]=b}),decorator:function(a,b){var c=r.get(a+"Provider"),d=c.$get;c.$get=function(){var a=u.invoke(d,c);return u.invoke(b,null,{$delegate:a})}}}},r=n.$injector=h(n,function(a,b){$.isString(b)&&l.push(b);throw Ba("unpr",l.join(" <- "));}),s={},H=h(s,function(a,b){var c=r.get(a+"Provider",b);return u.invoke(c.$get,c,void 0,a)}),u=H;n.$injectorProvider={$get:ha(H)};var p=g(a),u=H.get("$injector");u.strictDi=b;q(p,function(a){a&&u.invoke(a)});return u}function kf(){var a=!0;this.disableAutoScrolling=
function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function f(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===wa(a))return b=a,!0});return b}function e(a){if(a){a.scrollIntoView();var c;c=g.yOffset;C(c)?c=c():Sb(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):ba(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=D(a)?a:ba(a)?a.toString():d.hash();var b;a?(b=h.getElementById(a))?
e(b):(b=f(h.getElementsByName(a)))?e(b):"top"===a&&e(null):e(null)}var h=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||cg(function(){c.$evalAsync(g)})});return g}]}function kb(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;I(a)&&(a=a.join(" "));I(b)&&(b=b.join(" "));return a+" "+b}function lg(a){D(a)&&(a=a.split(" "));var b=V();q(a,function(a){a.length&&(b[a]=!0)});return b}function Ca(a){return E(a)?a:{}}function mg(a,b,d,c){function f(a){try{a.apply(null,
va.call(arguments,1))}finally{if(H--,0===H)for(;u.length;)try{u.pop()()}catch(b){d.error(b)}}}function e(){N=null;g();h()}function g(){p=L();p=z(p)?null:p;na(p,J)&&(p=J);J=p}function h(){if(A!==k.url()||K!==p)A=k.url(),K=p,q(O,function(a){a(k.url(),p)})}var k=this,l=a.location,m=a.history,n=a.setTimeout,r=a.clearTimeout,s={};k.isMock=!1;var H=0,u=[];k.$$completeOutstandingRequest=f;k.$$incOutstandingRequestCount=function(){H++};k.notifyWhenNoOutstandingRequests=function(a){0===H?a():u.push(a)};var p,
K,A=l.href,v=b.find("base"),N=null,L=c.history?function(){try{return m.state}catch(a){}}:w;g();K=p;k.url=function(b,d,e){z(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=K===e;if(A===b&&(!c.history||f))return k;var h=A&&Ga(A)===Ga(b);A=b;K=e;!c.history||h&&f?(h||(N=b),d?l.replace(b):h?(d=l,e=b.indexOf("#"),e=-1===e?"":b.substr(e),d.hash=e):l.href=b,l.href!==b&&(N=b)):(m[d?"replaceState":"pushState"](e,"",b),g(),K=p);N&&(N=b);return k}return N||l.href.replace(/%27/g,
"'")};k.state=function(){return p};var O=[],M=!1,J=null;k.onUrlChange=function(b){if(!M){if(c.history)F(a).on("popstate",e);F(a).on("hashchange",e);M=!0}O.push(b);return b};k.$$applicationDestroyed=function(){F(a).off("hashchange popstate",e)};k.$$checkUrlChange=h;k.baseHref=function(){var a=v.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,""):""};k.defer=function(a,b){var c;H++;c=n(function(){delete s[c];f(a)},b||0);s[c]=!0;return c};k.defer.cancel=function(a){return s[a]?(delete s[a],r(a),
f(w),!0):!1}}function rf(){this.$get=["$window","$log","$sniffer","$document",function(a,b,d,c){return new mg(a,c,b,d)}]}function sf(){this.$get=function(){function a(a,c){function f(a){a!==n&&(r?r===a&&(r=a.n):r=a,e(a.n,a.p),e(a,n),n=a,n.n=null)}function e(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw G("$cacheFactory")("iid",a);var g=0,h=R({},c,{id:a}),k=V(),l=c&&c.capacity||Number.MAX_VALUE,m=V(),n=null,r=null;return b[a]={put:function(a,b){if(!z(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]=
{key:a});f(c)}a in k||g++;k[a]=b;g>l&&this.remove(r.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;f(b)}return k[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===n&&(n=b.p);b===r&&(r=b.n);e(b.n,b.p);delete m[a]}a in k&&(delete k[a],g--)},removeAll:function(){k=V();g=0;m=V();n=r=null},destroy:function(){m=h=k=null;delete b[a]},info:function(){return R({},h,{size:g})}}}var b={};a.info=function(){var a={};q(b,function(b,f){a[f]=b.info()});return a};
a.get=function(a){return b[a]};return a}}function Of(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Kc(a,b){function d(a,b,c){var d=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,e=V();q(a,function(a,f){if(a in n)e[f]=n[a];else{var g=a.match(d);if(!g)throw fa("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f};g[4]&&(n[a]=e[f])}});return e}function c(a){var b=a.charAt(0);if(!b||
b!==Q(b))throw fa("baddir",a);if(a!==a.trim())throw fa("baddir",a);}function f(a){var b=a.require||a.controller&&a.name;!I(b)&&E(b)&&q(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var e={},g=/^\s*directive:\s*([\w-]+)\s+(.*)$/,h=/(([\w-]+)(?::([^;]+))?;?)/,k=oe("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,m=/^(on[a-z]+|formaction)$/,n=V();this.directive=function A(b,d){gb(b,"name");Ra(b,"directive");D(b)?(c(b),gb(d,"directiveFactory"),e.hasOwnProperty(b)||
(e[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];q(e[b],function(e,g){try{var h=a.invoke(e);C(h)?h={compile:ha(h)}:!h.compile&&h.link&&(h.compile=ha(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=f(h);var k=h,l=h.restrict;if(l&&(!D(l)||!/[EACM]/.test(l)))throw fa("badrestrict",l,b);k.restrict=l||"EA";h.$$moduleName=e.$$moduleName;d.push(h)}catch(m){c(m)}});return d}])),e[b].push(d)):q(b,zc(A));return this};this.component=function(a,b){function c(a){function e(b){return C(b)||
I(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:ng(b.controller)||b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};q(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)});return g}var d=b.controller||function(){};q(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,C(d)&&(d[b]=a))});c.$inject=["$injector"];
return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return x(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return x(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var r=!0;this.debugInfoEnabled=function(a){return x(a)?(r=a,this):r};var s=!0;this.preAssignBindingsEnabled=function(a){return x(a)?(s=a,this):s};var H=10;this.onChangesTtl=function(a){return arguments.length?(H=a,this):
H};var u=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(u=a,this):u};var p=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(p=a,this):p};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,b,c,f,n,M,J,B,T,S){function P(){try{if(!--xa)throw da=void 0,fa("infchng",H);J.$apply(function(){for(var a=[],b=0,c=da.length;b<c;++b)try{da[b]()}catch(d){a.push(d)}da=
void 0;if(a.length)throw a;})}finally{xa++}}function t(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function qa(a,b,c){ta.innerHTML="<span "+b+">";b=ta.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function Ja(a,b){try{a.addClass(b)}catch(c){}}function ca(a,b,c,d,e){a instanceof F||(a=F(a));for(var f=/\S+/,g=0,h=a.length;g<h;g++){var k=a[g];k.nodeType===La&&k.nodeValue.match(f)&&
Uc(k,a[g]=y.document.createElement("span"))}var l=Ma(a,b,a,c,d,e);ca.$$addScopeClass(a);var m=null;return function(b,c,d){gb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var f=d.parentBoundTranscludeFn,g=d.transcludeControllers;d=d.futureParentElement;f&&f.$$boundTransclude&&(f=f.$$boundTransclude);m||(m=(d=d&&d[0])?"foreignobject"!==wa(d)&&ma.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==m?F(ha(m,F("<div>").append(a).html())):c?Pa.clone.call(a):a;if(g)for(var h in g)d.data("$"+
h+"Controller",g[h].instance);ca.$$addScopeInfo(d,b);c&&c(d,b);l&&l(b,d,d,f);return d}}function Ma(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,n,s,A;if(p)for(A=Array(c.length),m=0;m<h.length;m+=3)f=h[m],A[f]=c[f];else A=c;m=0;for(n=h.length;m<n;)k=A[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),ca.$$addScopeInfo(F(k),l)):l=a,s=c.transcludeOnThisElement?G(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?G(a,b):null,c(f,l,k,d,s)):f&&f(a,k.childNodes,void 0,e)}for(var h=[],k,l,m,n,p,s=0;s<a.length;s++){k=
new t;l=cc(a[s],[],k,0===s?d:void 0,e);(f=l.length?W(l,a[s],k,b,c,null,[],[],f):null)&&f.scope&&ca.$$addScopeClass(k.$$element);k=f&&f.terminal||!(m=a[s].childNodes)||!m.length?null:Ma(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||k)h.push(s,f,k),n=!0,p=p||f;f=null}return n?g:null}function G(a,b,c){function d(e,f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=V(),
f;for(f in b.$$slots)e[f]=b.$$slots[f]?G(a,b.$$slots[f],c):null;return d}function cc(a,b,c,d,e){var f=c.$attr,g;switch(a.nodeType){case 1:g=wa(a);U(b,Da(g),"E",d,e);for(var k,l,m,n,p=a.attributes,s=0,A=p&&p.length;s<A;s++){var r=!1,u=!1;k=p[s];l=k.name;m=Y(k.value);k=Da(l);(n=Ga.test(k))&&(l=l.replace(bd,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));(k=k.match(Ha))&&Z(k[1])&&(r=l,u=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6));k=Da(l.toLowerCase());f[k]=l;if(n||!c.hasOwnProperty(k))c[k]=
m,Zc(a,k)&&(c[k]=!0);pa(a,b,m,k,n);U(b,k,"A",d,e,r,u)}"input"===g&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off");if(!Fa)break;f=a.className;E(f)&&(f=f.animVal);if(D(f)&&""!==f)for(;a=h.exec(f);)k=Da(a[2]),U(b,k,"C",d,e)&&(c[k]=Y(a[3])),f=f.substr(a.index+a[0].length);break;case La:if(11===Ia)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===La;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);ka(b,a.nodeValue);break;case 8:if(!Ea)break;
Ta(a,b,c,d,e)}b.sort(ja);return b}function Ta(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=Da(f[1]);U(b,h,"M",d,e)&&(c[h]=Y(f[2]))}}catch(k){}}function cd(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw fa("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return F(d)}function dd(a,b,c){return function(d,e,f,g,h){e=cd(e[0],b,c);return a(d,e,f,g,h)}}function dc(a,b,c,d,e,f){var g;return a?
ca(b,c,d,e,f):function(){g||(g=ca(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function W(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){if(a){c&&(a=dd(a,c,d));a.require=v.require;a.directiveName=S;if(u===v||v.$$isolateScope)a=ra(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=dd(b,c,d));b.require=v.require;b.directiveName=S;if(u===v||v.$$isolateScope)b=ra(b,{isolateScope:!0});k.push(b)}}function n(a,e,f,g,l){function m(a,b,c,d){var e;ab(a)||(d=c,c=b,b=a,a=void 0);H&&(e=J);c||(c=H?P.parent():P);if(d){var f=
l.$$slots[d];if(f)return f(a,b,e,c,qa);if(z(f))throw fa("noslot",d,ya(P));}else return l(a,b,e,c,qa)}var p,v,B,M,T,J,S,P;b===f?(g=d,P=d.$$element):(P=F(f),g=new t(P,d));T=e;u?M=e.$new(!0):A&&(T=e.$parent);l&&(S=m,S.$$boundTransclude=l,S.isSlotFilled=function(a){return!!l.$$slots[a]});r&&(J=ba(P,g,S,r,M,e,u));u&&(ca.$$addScopeInfo(P,M,!0,!(O&&(O===u||O===u.$$originalDirective))),ca.$$addScopeClass(P,!0),M.$$isolateBindings=u.$$isolateBindings,v=la(e,g,M,M.$$isolateBindings,u),v.removeWatches&&M.$on("$destroy",
v.removeWatches));for(p in J){v=r[p];B=J[p];var L=v.$$bindings.bindToController;if(s){B.bindingInfo=L?la(T,g,B.instance,L,v):{};var ac=B();ac!==B.instance&&(B.instance=ac,P.data("$"+v.name+"Controller",ac),B.bindingInfo.removeWatches&&B.bindingInfo.removeWatches(),B.bindingInfo=la(T,g,B.instance,L,v))}else B.instance=B(),P.data("$"+v.name+"Controller",B.instance),B.bindingInfo=la(T,g,B.instance,L,v)}q(r,function(a,b){var c=a.require;a.bindToController&&!I(c)&&E(c)&&R(J[b].instance,X(b,c,P,J))});q(J,
function(a){var b=a.instance;if(C(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(C(b.$onInit))try{b.$onInit()}catch(e){c(e)}C(b.$doCheck)&&(T.$watch(function(){b.$doCheck()}),b.$doCheck());C(b.$onDestroy)&&T.$on("$destroy",function(){b.$onDestroy()})});p=0;for(v=h.length;p<v;p++)B=h[p],sa(B,B.isolateScope?M:e,P,g,B.require&&X(B.directiveName,B.require,P,J),S);var qa=e;u&&(u.template||null===u.templateUrl)&&(qa=M);a&&a(qa,f.childNodes,void 0,l);for(p=k.length-1;0<=p;p--)B=
k[p],sa(B,B.isolateScope?M:e,P,g,B.require&&X(B.directiveName,B.require,P,J),S);q(J,function(a){a=a.instance;C(a.$postLink)&&a.$postLink()})}l=l||{};for(var p=-Number.MAX_VALUE,A=l.newScopeDirective,r=l.controllerDirectives,u=l.newIsolateScopeDirective,O=l.templateDirective,M=l.nonTlbTranscludeDirective,T=!1,J=!1,H=l.hasElementTranscludeDirective,B=d.$$element=F(b),v,S,P,L=e,qa,x=!1,Ja=!1,w,y=0,D=a.length;y<D;y++){v=a[y];var Ta=v.$$start,Ma=v.$$end;Ta&&(B=cd(b,Ta,Ma));P=void 0;if(p>v.priority)break;
if(w=v.scope)v.templateUrl||(E(w)?($("new/isolated scope",u||A,v,B),u=v):$("new/isolated scope",u,v,B)),A=A||v;S=v.name;if(!x&&(v.replace&&(v.templateUrl||v.template)||v.transclude&&!v.$$tlb)){for(w=y+1;x=a[w++];)if(x.transclude&&!x.$$tlb||x.replace&&(x.templateUrl||x.template)){Ja=!0;break}x=!0}!v.templateUrl&&v.controller&&(r=r||V(),$("'"+S+"' controller",r[S],v,B),r[S]=v);if(w=v.transclude)if(T=!0,v.$$tlb||($("transclusion",M,v,B),M=v),"element"===w)H=!0,p=v.priority,P=B,B=d.$$element=F(ca.$$createComment(S,
d[S])),b=B[0],ga(f,va.call(P,0),b),P[0].$$parentNode=P[0].parentNode,L=dc(Ja,P,e,p,g&&g.name,{nonTlbTranscludeDirective:M});else{var G=V();P=F(Zb(b)).contents();if(E(w)){P=[];var Q=V(),bc=V();q(w,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Q[a]=b;G[b]=null;bc[b]=c});q(B.contents(),function(a){var b=Q[Da(wa(a))];b?(bc[b]=!0,G[b]=G[b]||[],G[b].push(a)):P.push(a)});q(bc,function(a,b){if(!a)throw fa("reqslot",b);});for(var U in G)G[U]&&(G[U]=dc(Ja,G[U],e))}B.empty();L=dc(Ja,P,e,void 0,
void 0,{needsNewScope:v.$$isolateScope||v.$$newScope});L.$$slots=G}if(v.template)if(J=!0,$("template",O,v,B),O=v,w=C(v.template)?v.template(B,d):v.template,w=Ca(w),v.replace){g=v;P=Xb.test(w)?ed(ha(v.templateNamespace,Y(w))):[];b=P[0];if(1!==P.length||1!==b.nodeType)throw fa("tplrt",S,"");ga(f,B,b);D={$attr:{}};w=cc(b,[],D);var og=a.splice(y+1,a.length-(y+1));(u||A)&&aa(w,u,A);a=a.concat(w).concat(og);ea(d,D);D=a.length}else B.html(w);if(v.templateUrl)J=!0,$("template",O,v,B),O=v,v.replace&&(g=v),
n=ia(a.splice(y,a.length-y),B,d,f,T&&L,h,k,{controllerDirectives:r,newScopeDirective:A!==v&&A,newIsolateScopeDirective:u,templateDirective:O,nonTlbTranscludeDirective:M}),D=a.length;else if(v.compile)try{qa=v.compile(B,d,L);var Z=v.$$originalDirective||v;C(qa)?m(null,db(Z,qa),Ta,Ma):qa&&m(db(Z,qa.pre),db(Z,qa.post),Ta,Ma)}catch(da){c(da,ya(B))}v.terminal&&(n.terminal=!0,p=Math.max(p,v.priority))}n.scope=A&&!0===A.scope;n.transcludeOnThisElement=T;n.templateOnThisElement=J;n.transclude=L;l.hasElementTranscludeDirective=
H;return n}function X(a,b,c,d){var e;if(D(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e=g?c.inheritedData(h):c.data(h)}if(!e&&!f)throw fa("ctreq",b,a);}else if(I(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=X(a,b[g],c,d);else E(b)&&(e={},q(b,function(b,f){e[f]=X(a,b,c,d)}));return e||null}function ba(a,b,c,d,e,f,g){var h=V(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,
$attrs:b,$transclude:c},n=l.controller;"@"===n&&(n=b[l.name]);m=M(n,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function aa(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=Tb(a[d],{$$isolateScope:b,$$newScope:c})}function U(b,c,f,g,h,k,l){if(c===h)return null;var m=null;if(e.hasOwnProperty(c)){h=a.get(c+"Directive");for(var n=0,p=h.length;n<p;n++)if(c=h[n],(z(g)||g>c.priority)&&-1!==c.restrict.indexOf(f)){k&&(c=Tb(c,{$$start:k,$$end:l}));if(!c.$$bindings){var s=
m=c,r=c.name,v={isolateScope:null,bindToController:null};E(s.scope)&&(!0===s.bindToController?(v.bindToController=d(s.scope,r,!0),v.isolateScope={}):v.isolateScope=d(s.scope,r,!1));E(s.bindToController)&&(v.bindToController=d(s.bindToController,r,!0));if(v.bindToController&&!s.controller)throw fa("noctrl",r);m=m.$$bindings=v;E(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c);m=c}}return m}function Z(b){if(e.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,f=c.length;d<f;d++)if(b=
c[d],b.multiElement)return!0;return!1}function ea(a,b){var c=b.$attr,d=a.$attr;q(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}function ia(a,b,c,d,e,g,h,k){var l=[],m,n,p=b[0],s=a.shift(),A=Tb(s,{templateUrl:null,transclude:null,replace:null,$$originalDirective:s}),r=C(s.templateUrl)?s.templateUrl(b,c):s.templateUrl,v=s.templateNamespace;
b.empty();f(r).then(function(f){var u,B;f=Ca(f);if(s.replace){f=Xb.test(f)?ed(ha(v,Y(f))):[];u=f[0];if(1!==f.length||1!==u.nodeType)throw fa("tplrt",s.name,r);f={$attr:{}};ga(d,b,u);var O=cc(u,[],f);E(s.scope)&&aa(O,!0);a=O.concat(a);ea(c,f)}else u=p,b.html(f);a.unshift(A);m=W(a,u,c,e,b,s,g,h,k);q(d,function(a,c){a===u&&(d[c]=b[0])});for(n=Ma(b[0].childNodes,e);l.length;){f=l.shift();B=l.shift();var M=l.shift(),T=l.shift(),O=b[0];if(!f.$$destroyed){if(B!==p){var J=B.className;k.hasElementTranscludeDirective&&
s.replace||(O=Zb(u));ga(M,F(B),O);Ja(F(O),J)}B=m.transcludeOnThisElement?G(f,m.transclude,T):T;m(n,f,O,d,B)}}l=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(l?l.push(b,c,d,a):(m.transcludeOnThisElement&&(a=G(b,m.transclude,e)),m(n,b,c,d,a)))}}function ja(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function $(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw fa("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),
a,ya(d));}function ka(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&ca.$$addBindingClass(a);return function(a,c){var e=c.parent();b||ca.$$addBindingClass(e);ca.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ha(a,b){a=Q(a||"html");switch(a){case "svg":case "math":var c=y.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function oa(a,b){if("srcdoc"===
b)return B.HTML;var c=wa(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return B.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b)return B.RESOURCE_URL}function pa(a,c,d,e,f){var g=oa(a,e),h=k[e]||f,l=b(d,!f,g,h);if(l){if("multiple"===e&&"select"===wa(a))throw fa("selmulti",ya(a));c.push({priority:100,compile:function(){return{pre:function(a,c,f){c=f.$$observers||(f.$$observers=V());if(m.test(e))throw fa("nodomevents");var k=f[e];k!==d&&(l=
k&&b(k,!0,g,h),d=k);l&&(f[e]=l(a),(c[e]||(c[e]=[])).$$inter=!0,(f.$$observers&&f.$$observers[e].$$scope||a).$watch(l,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function ga(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]===d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=y.document.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);
F.hasData(d)&&(F.data(c,F.data(d)),F(d).off("$destroy"));F.cleanData(a.querySelectorAll("*"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function ra(a,b){return R(function(){return a.apply(null,arguments)},a,b)}function sa(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,ya(d))}}function la(a,c,d,e,f){function g(b,c,e){!C(d.$onChanges)||c===e||c!==c&&e!==e||(da||(a.$$postDigest(P),da=[]),m||(m={},da.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Hb(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],
l={},m;q(e,function(e,h){var m=e.attrName,p=e.optional,s,A,r,u;switch(e.mode){case "@":p||ua.call(c,m)||(d[h]=c[m]=void 0);p=c.$observe(m,function(a){if(D(a)||Ka(a))g(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;s=c[m];D(s)?d[h]=b(s)(a):Ka(s)&&(d[h]=s);l[h]=new Hb(ec,d[h]);k.push(p);break;case "=":if(!ua.call(c,m)){if(p)break;c[m]=void 0}if(p&&!c[m])break;A=n(c[m]);u=A.literal?na:function(a,b){return a===b||a!==a&&b!==b};r=A.assign||function(){s=d[h]=A(a);throw fa("nonassign",c[m],m,f.name);};s=
d[h]=A(a);p=function(b){u(b,d[h])||(u(b,s)?r(a,b=d[h]):d[h]=b);return s=b};p.$stateful=!0;p=e.collection?a.$watchCollection(c[m],p):a.$watch(n(c[m],p),null,A.literal);k.push(p);break;case "<":if(!ua.call(c,m)){if(p)break;c[m]=void 0}if(p&&!c[m])break;A=n(c[m]);var B=A.literal,M=d[h]=A(a);l[h]=new Hb(ec,d[h]);p=a.$watch(A,function(a,b){if(b===a){if(b===M||B&&na(b,M))return;b=M}g(h,a,b);d[h]=a},B);k.push(p);break;case "&":A=c.hasOwnProperty(m)?n(c[m]):w;if(A===w&&p)break;d[h]=function(b){return A(a,
b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var za=/^\w/,ta=y.document.createElement("div"),Ea=u,Fa=p,xa=H,da;t.prototype={$normalize:Da,$addClass:function(a){a&&0<a.length&&T.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&T.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=fd(a,b);c&&c.length&&T.addClass(this.$$element,c);(c=fd(b,a))&&c.length&&T.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=
Zc(this.$$element[0],a),g=gd[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Hc(a,"-"));f=wa(this.$$element);if("a"===f&&("href"===a||"xlinkHref"===a)||"img"===f&&"src"===a)this[a]=b=S(b,"src"===a);else if("img"===f&&"srcset"===a&&x(b)){for(var f="",g=Y(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),l=0;l<k;l++)var m=2*l,f=f+S(Y(g[m]),!0),f=f+(" "+Y(g[m+1]));g=Y(g[2*
l]).split(/\s/);f+=S(Y(g[0]),!0);2===g.length&&(f+=" "+Y(g[1]));this[a]=b=f}!1!==d&&(null===b||z(b)?this.$$element.removeAttr(e):za.test(e)?this.$$element.attr(e,b):qa(this.$$element[0],e,b));(a=this.$$observers)&&q(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=V()),e=d[a]||(d[a]=[]);e.push(b);J.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||z(c[a])||b(c[a])});return function(){bb(e,b)}}};var Aa=b.startSymbol(),Ba=b.endSymbol(),
Ca="{{"===Aa&&"}}"===Ba?$a:function(a){return a.replace(/\{\{/g,Aa).replace(/}}/g,Ba)},Ga=/^ngAttr[A-Z]/,Ha=/^(.+)Start$/;ca.$$addBindingInfo=r?function(a,b){var c=a.data("$binding")||[];I(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:w;ca.$$addBindingClass=r?function(a){Ja(a,"ng-binding")}:w;ca.$$addScopeInfo=r?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:w;ca.$$addScopeClass=r?function(a,b){Ja(a,b?"ng-isolate-scope":"ng-scope")}:w;ca.$$createComment=function(a,
b){var c="";r&&(c=" "+(a||"")+": ",b&&(c+=b+" "));return y.document.createComment(c)};return ca}]}function Hb(a,b){this.previousValue=a;this.currentValue=b}function Da(a){return hb(a.replace(bd,""))}function fd(a,b){var d="",c=a.split(/\s+/),f=b.split(/\s+/),e=0;a:for(;e<c.length;e++){for(var g=c[e],h=0;h<f.length;h++)if(g===f[h])continue a;d+=(0<d.length?" ":"")+g}return d}function ed(a){a=F(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===La&&""===d.nodeValue.trim())&&
pg.call(a,b,1)}return a}function ng(a,b){if(b&&D(b))return b;if(D(a)){var d=hd.exec(a);if(d)return d[3]}}function tf(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,c){Ra(b,"controller");E(b)?R(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(d,c){function f(a,b,c,d){if(!a||!E(a.$scope))throw G("$controller")("noscp",d,b);a.$scope[b]=c}return function(e,g,h,k){var l,m,n;h=!0===h;k&&D(k)&&(n=k);if(D(e)){k=e.match(hd);
if(!k)throw id("ctrlfmt",e);m=k[1];n=n||k[3];e=a.hasOwnProperty(m)?a[m]:Jc(g.$scope,m,!0)||(b?Jc(c,m,!0):void 0);if(!e)throw id("ctrlreg",m);Qa(e,m,!0)}if(h)return h=(I(e)?e[e.length-1]:e).prototype,l=Object.create(h||null),n&&f(g,n,l,m||e.name),R(function(){var a=d.invoke(e,l,g,m);a!==l&&(E(a)||C(a))&&(l=a,n&&f(g,n,l,m||e.name));return l},{instance:l,identifier:n});l=d.instantiate(e,g,m);n&&f(g,n,l,m||e.name);return l}}]}function uf(){this.$get=["$window",function(a){return F(a.document)}]}function vf(){this.$get=
["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function fc(a){return E(a)?ja(a)?a.toISOString():eb(a):a}function Af(){this.$get=function(){return function(a){if(!a)return"";var b=[];yc(a,function(a,c){null===a||z(a)||(I(a)?q(a,function(a){b.push(oa(c)+"="+oa(fc(a)))}):b.push(oa(c)+"="+oa(fc(a))))});return b.join("&")}}}function Bf(){this.$get=function(){return function(a){function b(a,f,e){null===a||z(a)||(I(a)?q(a,function(a,c){b(a,f+"["+(E(a)?c:"")+"]")}):E(a)&&!ja(a)?yc(a,
function(a,c){b(a,f+(e?"":"[")+c+(e?"":"]"))}):d.push(oa(f)+"="+oa(fc(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function gc(a,b){if(D(a)){var d=a.replace(qg,"").trim();if(d){var c=b("Content-Type");(c=c&&0===c.indexOf(jd))||(c=(c=d.match(rg))&&sg[c[0]].test(d));c&&(a=Cc(d))}}return a}function kd(a){var b=V(),d;D(a)?q(a.split("\n"),function(a){d=a.indexOf(":");var f=Q(Y(a.substr(0,d)));a=Y(a.substr(d+1));f&&(b[f]=b[f]?b[f]+", "+a:a)}):E(a)&&q(a,function(a,d){var e=Q(d),g=Y(a);e&&
(b[e]=b[e]?b[e]+", "+g:g)});return b}function ld(a){var b;return function(d){b||(b=kd(a));return d?(d=b[Q(d)],void 0===d&&(d=null),d):b}}function md(a,b,d,c){if(C(c))return c(a,b,d);q(c,function(c){a=c(a,b,d)});return a}function zf(){var a=this.defaults={transformResponse:[gc],transformRequest:[function(a){return E(a)&&"[object File]"!==ma.call(a)&&"[object Blob]"!==ma.call(a)&&"[object FormData]"!==ma.call(a)?eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ka(hc),put:ka(hc),
patch:ka(hc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},b=!1;this.useApplyAsync=function(a){return x(a)?(b=!!a,this):b};var d=!0;this.useLegacyPromiseExtensions=function(a){return x(a)?(d=!!a,this):d};var c=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(f,e,g,h,k,l){function m(b){function c(a,b){for(var d=0,e=b.length;d<e;){var f=b[d++],g=b[d++];a=a.then(f,g)}b.length=0;
return a}function e(a,b){var c,d={};q(a,function(a,e){C(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}function f(a){var b=R({},a);b.data=md(a.data,a.headers,a.status,g.transformResponse);a=a.status;return 200<=a&&300>a?b:k.reject(b)}if(!E(b))throw G("$http")("badreq",b);if(!D(b.url))throw G("$http")("badreq",b.url);var g=R({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},b);g.headers=function(b){var c=a.headers,d=R({},b.headers),
f,g,h,c=R({},c.common,c[Q(b.method)]);a:for(f in c){g=Q(f);for(h in d)if(Q(h)===g)continue a;d[f]=c[f]}return e(d,ka(b))}(b);g.method=wb(g.method);g.paramSerializer=D(g.paramSerializer)?l.get(g.paramSerializer):g.paramSerializer;var h=[],m=[],s=k.when(g);q(H,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&m.push(a.response,a.responseError)});s=c(s,h);s=s.then(function(b){var c=b.headers,d=md(b.data,ld(c),void 0,b.transformRequest);z(d)&&
q(c,function(a,b){"content-type"===Q(b)&&delete c[b]});z(b.withCredentials)&&!z(a.withCredentials)&&(b.withCredentials=a.withCredentials);return n(b,d).then(f,f)});s=c(s,m);d?(s.success=function(a){Qa(a,"fn");s.then(function(b){a(b.data,b.status,b.headers,g)});return s},s.error=function(a){Qa(a,"fn");s.then(null,function(b){a(b.data,b.status,b.headers,g)});return s}):(s.success=nd("success"),s.error=nd("error"));return s}function n(c,d){function g(a){if(a){var c={};q(a,function(a,d){c[d]=function(c){function d(){a(c)}
b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function l(a,c,d,e){function f(){n(c,a,d,e)}J&&(200<=a&&300>a?J.put(S,[a,c,kd(d),e]):J.remove(S));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function n(a,b,d,e){b=-1<=b?b:0;(200<=b&&300>b?O.resolve:O.reject)({data:a,status:b,headers:ld(d),config:c,statusText:e})}function H(a){n(a.data,a.status,ka(a.headers()),a.statusText)}function L(){var a=m.pendingRequests.indexOf(c);-1!==a&&m.pendingRequests.splice(a,1)}var O=k.defer(),M=O.promise,
J,B,T=c.headers,S=r(c.url,c.paramSerializer(c.params));m.pendingRequests.push(c);M.then(L,L);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(J=E(c.cache)?c.cache:E(a.cache)?a.cache:s);J&&(B=J.get(S),x(B)?B&&C(B.then)?B.then(H,H):I(B)?n(B[1],B[0],ka(B[2]),B[3]):n(B,200,{},"OK"):J.put(S,M));z(B)&&((B=od(c.url)?e()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(T[c.xsrfHeaderName||a.xsrfHeaderName]=B),f(c.method,S,d,l,T,c.timeout,c.withCredentials,c.responseType,g(c.eventHandlers),
g(c.uploadEventHandlers)));return M}function r(a,b){0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b);return a}var s=g("$http");a.paramSerializer=D(a.paramSerializer)?l.get(a.paramSerializer):a.paramSerializer;var H=[];q(c,function(a){H.unshift(D(a)?l.get(a):l.invoke(a))});m.pendingRequests=[];(function(a){q(arguments,function(a){m[a]=function(b,c){return m(R({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){m[a]=function(b,c,d){return m(R({},d||{},
{method:a,url:b,data:c}))}})})("post","put","patch");m.defaults=a;return m}]}function Df(){this.$get=function(){return function(){return new y.XMLHttpRequest}}}function Cf(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return tg(a,c,a.defer,b,d[0])}]}function tg(a,b,d,c,f){function e(a,b,d){a=a.replace("JSON_CALLBACK",b);var e=f.createElement("script"),m=null;e.type="text/javascript";e.src=a;e.async=!0;m=function(a){e.removeEventListener("load",m,!1);e.removeEventListener("error",
m,!1);f.body.removeChild(e);e=null;var g=-1,s="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),s=a.type,g="error"===a.type?404:200);d&&d(g,s)};e.addEventListener("load",m,!1);e.addEventListener("error",m,!1);f.body.appendChild(e);return m}return function(f,h,k,l,m,n,r,s,H,u){function p(){v&&v();N&&N.abort()}function K(b,c,e,f,g){x(O)&&d.cancel(O);v=N=null;b(c,e,f,g);a.$$completeOutstandingRequest(w)}a.$$incOutstandingRequestCount();h=h||a.url();if("jsonp"===Q(f))var A=c.createCallback(h),
v=e(h,A,function(a,b){var d=200===a&&c.getResponse(A);K(l,a,d,"",b);c.removeCallback(A)});else{var N=b(f,h);N.open(f,h,!0);q(m,function(a,b){x(a)&&N.setRequestHeader(b,a)});N.onload=function(){var a=N.statusText||"",b="response"in N?N.response:N.responseText,c=1223===N.status?204:N.status;0===c&&(c=b?200:"file"===ta(h).protocol?404:0);K(l,c,b,N.getAllResponseHeaders(),a)};f=function(){K(l,-1,null,null,"")};N.onerror=f;N.onabort=f;N.ontimeout=f;q(H,function(a,b){N.addEventListener(b,a)});q(u,function(a,
b){N.upload.addEventListener(b,a)});r&&(N.withCredentials=!0);if(s)try{N.responseType=s}catch(L){if("json"!==s)throw L;}N.send(z(k)?null:k)}if(0<n)var O=d(p,n);else n&&C(n.then)&&n.then(p)}}function xf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(d,c,f){function e(a){return"\\\\\\"+a}function g(c){return c.replace(n,a).replace(r,b)}function h(a,b,c,d){var e=a.$watch(function(a){e();
return d(a)},b,c);return e}function k(e,k,n,p){function r(a){try{var b=a;a=n?f.getTrusted(n,b):f.valueOf(b);var d;if(p&&!x(a))d=a;else if(null==a)d="";else{switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=eb(a)}d=a}return d}catch(g){c(Ha.interr(e,g))}}if(!e.length||-1===e.indexOf(a)){var A;k||(k=g(e),A=ha(k),A.exp=e,A.expressions=[],A.$$watchDelegate=h);return A}p=!!p;var v,q,L=0,O=[],M=[];A=e.length;for(var J=[],B=[];L<A;)if(-1!==(v=e.indexOf(a,L))&&-1!==(q=e.indexOf(b,v+
l)))L!==v&&J.push(g(e.substring(L,v))),L=e.substring(v+l,q),O.push(L),M.push(d(L,r)),L=q+m,B.push(J.length),J.push("");else{L!==A&&J.push(g(e.substring(L)));break}n&&1<J.length&&Ha.throwNoconcat(e);if(!k||O.length){var T=function(a){for(var b=0,c=O.length;b<c;b++){if(p&&z(a[b]))return;J[B[b]]=a[b]}return J.join("")};return R(function(a){var b=0,d=O.length,f=Array(d);try{for(;b<d;b++)f[b]=M[b](a);return T(f)}catch(g){c(Ha.interr(e,g))}},{exp:e,expressions:O,$$watchDelegate:function(a,b){var c;return a.$watchGroup(M,
function(d,e){var f=T(d);C(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,n=new RegExp(a.replace(/./g,e),"g"),r=new RegExp(b.replace(/./g,e),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function yf(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,d,c,f){function e(e,k,l,m){function n(){r?e.apply(null,s):e(p)}var r=4<arguments.length,s=r?va.call(arguments,4):[],H=b.setInterval,u=b.clearInterval,p=0,K=x(m)&&!m,A=(K?c:d).defer(),
v=A.promise;l=x(l)?l:0;v.$$intervalId=H(function(){K?f.defer(n):a.$evalAsync(n);A.notify(p++);0<l&&p>=l&&(A.resolve(p),u(v.$$intervalId),delete g[v.$$intervalId]);K||a.$apply()},k);g[v.$$intervalId]=A;return v}var g={};e.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return e}]}function ic(a){a=a.split("/");for(var b=a.length;b--;)a[b]=tb(a[b]);return a.join("/")}function pd(a,b){var d=ta(a);b.$$protocol=
d.protocol;b.$$host=d.hostname;b.$$port=Z(d.port)||ug[d.protocol]||null}function qd(a,b){if(vg.test(a))throw lb("badpath",a);var d="/"!==a.charAt(0);d&&(a="/"+a);var c=ta(a);b.$$path=decodeURIComponent(d&&"/"===c.pathname.charAt(0)?c.pathname.substring(1):c.pathname);b.$$search=Fc(c.search);b.$$hash=decodeURIComponent(c.hash);b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function ra(a,b){if(b.slice(0,a.length)===a)return b.substr(a.length)}function Ga(a){var b=a.indexOf("#");return-1===
b?a:a.substr(0,b)}function mb(a){return a.replace(/(#.+)|#$/,"$1")}function jc(a,b,d){this.$$html5=!0;d=d||"";pd(a,this);this.$$parse=function(a){var d=ra(b,a);if(!D(d))throw lb("ipthprfx",a,b);qd(d,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Vb(this.$$search),d=this.$$hash?"#"+tb(this.$$hash):"";this.$$url=ic(this.$$path)+(a?"?"+a:"")+d;this.$$absUrl=b+this.$$url.substr(1)};this.$$parseLinkUrl=function(c,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),
!0;var e,g;x(e=ra(a,c))?(g=e,g=d&&x(e=ra(d,e))?b+(ra("/",e)||e):a+g):x(e=ra(b,c))?g=b+e:b===c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function kc(a,b,d){pd(a,this);this.$$parse=function(c){var f=ra(a,c)||ra(b,c),e;z(f)||"#"!==f.charAt(0)?this.$$html5?e=f:(e="",z(f)&&(a=c,this.replace())):(e=ra(d,f),z(e)&&(e=f));qd(e,this);c=this.$$path;var f=a,g=/^\/[A-Z]:(\/.*)/;e.slice(0,f.length)===f&&(e=e.replace(f,""));g.exec(e)||(c=(e=g.exec(c))?e[1]:c);this.$$path=c;this.$$compose()};this.$$compose=function(){var b=
Vb(this.$$search),f=this.$$hash?"#"+tb(this.$$hash):"";this.$$url=ic(this.$$path)+(b?"?"+b:"")+f;this.$$absUrl=a+(this.$$url?d+this.$$url:"")};this.$$parseLinkUrl=function(b,d){return Ga(a)===Ga(b)?(this.$$parse(b),!0):!1}}function rd(a,b,d){this.$$html5=!0;kc.apply(this,arguments);this.$$parseLinkUrl=function(c,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var e,g;a===Ga(c)?e=c:(g=ra(b,c))?e=a+d+g:b===c+"/"&&(e=b);e&&this.$$parse(e);return!!e};this.$$compose=function(){var b=Vb(this.$$search),
f=this.$$hash?"#"+tb(this.$$hash):"";this.$$url=ic(this.$$path)+(b?"?"+b:"")+f;this.$$absUrl=a+d+this.$$url}}function Ib(a){return function(){return this[a]}}function sd(a,b){return function(d){if(z(d))return this[a];this[a]=b(d);this.$$compose();return this}}function Ff(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return x(b)?(a=b,this):a};this.html5Mode=function(a){if(Ka(a))return b.enabled=a,this;if(E(a)){Ka(a.enabled)&&(b.enabled=a.enabled);Ka(a.requireBase)&&
(b.requireBase=a.requireBase);if(Ka(a.rewriteLinks)||D(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,f,e,g){function h(a,b,d){var e=l.url(),f=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(g){throw l.url(e),l.$$state=f,g;}}function k(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,m;m=c.baseHref();var n=c.url(),r;if(b.enabled){if(!m&&b.requireBase)throw lb("nobase");
r=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(m||"/");m=f.history?jc:rd}else r=Ga(n),m=kc;var s=r.substr(0,Ga(r).lastIndexOf("/")+1);l=new m(r,s,"#"+a);l.$$parseLinkUrl(n,n);l.$$state=c.state();var H=/^\s*(javascript|mailto):/i;e.on("click",function(a){var f=b.rewriteLinks;if(f&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var h=F(a.target);"a"!==wa(h[0]);)if(h[0]===e[0]||!(h=h.parent())[0])return;if(!D(f)||!z(h.attr(f))){var f=h.prop("href"),k=h.attr("href")||h.attr("xlink:href");
E(f)&&"[object SVGAnimatedString]"===f.toString()&&(f=ta(f.animVal).href);H.test(f)||!f||h.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(f,k)||(a.preventDefault(),l.absUrl()!==c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}});mb(l.absUrl())!==mb(n)&&c.url(l.absUrl(),!0);var u=!0;c.onUrlChange(function(a,b){z(ra(s,a))?g.location.href=a:(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,f;a=mb(a);l.$$parse(a);l.$$state=b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;
l.absUrl()===a&&(f?(l.$$parse(c),l.$$state=e,h(c,!1,e)):(u=!1,k(c,e)))}),d.$$phase||d.$digest())});d.$watch(function(){var a=mb(c.url()),b=mb(l.absUrl()),e=c.state(),g=l.$$replace,m=a!==b||l.$$html5&&f.history&&e!==l.$$state;if(u||m)u=!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,e).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=e):(m&&h(b,g,e===l.$$state?null:l.$$state),k(a,e)))});l.$$replace=!1});return l}]}function Gf(){var a=!0,b=
this;this.debugEnabled=function(b){return x(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function f(a){var b=d.console||{},f=b[a]||b.log||w;a=!1;try{a=!!f.apply}catch(k){}return a?function(){var a=[];q(arguments,function(b){a.push(c(b))});return f.apply(b,a)}:function(a,b){f(a,null==b?"":b)}}return{log:f("log"),
info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Ua(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw ea("isecfld",b);return a}function wg(a){return a+""}function Ea(a,b){if(a){if(a.constructor===a)throw ea("isecfn",b);if(a.window===a)throw ea("isecwindow",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw ea("isecdom",b);if(a===
Object)throw ea("isecobj",b);}return a}function td(a,b){if(a){if(a.constructor===a)throw ea("isecfn",b);if(a===xg||a===yg||a===zg)throw ea("isecff",b);}}function Jb(a,b){if(a&&(a===ud||a===vd||a===wd||a===xd||a===yd||a===zd||a===Ag||a===Bg||a===Kb||a===Cg||a===Ad||a===Dg))throw ea("isecaf",b);}function Eg(a,b){return"undefined"!==typeof a?a:b}function Bd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function X(a,b){var d,c,f;switch(a.type){case t.Program:d=!0;q(a.body,function(a){X(a.expression,
b);d=d&&a.expression.constant});a.constant=d;break;case t.Literal:a.constant=!0;a.toWatch=[];break;case t.UnaryExpression:X(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case t.BinaryExpression:X(a.left,b);X(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case t.LogicalExpression:X(a.left,b);X(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case t.ConditionalExpression:X(a.test,
b);X(a.alternate,b);X(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case t.Identifier:a.constant=!1;a.toWatch=[a];break;case t.MemberExpression:X(a.object,b);a.computed&&X(a.property,b);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=[a];break;case t.CallExpression:d=f=a.filter?!b(a.callee.name).$stateful:!1;c=[];q(a.arguments,function(a){X(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});
a.constant=d;a.toWatch=f?c:[a];break;case t.AssignmentExpression:X(a.left,b);X(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case t.ArrayExpression:d=!0;c=[];q(a.elements,function(a){X(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=c;break;case t.ObjectExpression:d=!0;c=[];q(a.properties,function(a){X(a.value,b);d=d&&a.value.constant&&!a.computed;a.value.constant||c.push.apply(c,a.value.toWatch)});a.constant=d;a.toWatch=c;break;case t.ThisExpression:a.constant=
!1;a.toWatch=[];break;case t.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Cd(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Dd(a){return a.type===t.Identifier||a.type===t.MemberExpression}function Ed(a){if(1===a.body.length&&Dd(a.body[0].expression))return{type:t.AssignmentExpression,left:a.body[0].expression,right:{type:t.NGValueParameter},operator:"="}}function Fd(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===
t.Literal||a.body[0].expression.type===t.ArrayExpression||a.body[0].expression.type===t.ObjectExpression)}function Gd(a,b){this.astBuilder=a;this.$filter=b}function Hd(a,b){this.astBuilder=a;this.$filter=b}function Lb(a){return"constructor"===a}function lc(a){return C(a.valueOf)?a.valueOf():Fg.call(a)}function Hf(){var a=V(),b=V(),d={"true":!0,"false":!1,"null":null,undefined:void 0},c,f;this.addLiteral=function(a,b){d[a]=b};this.setIdentifierFns=function(a,b){c=a;f=b;return this};this.$get=["$filter",
function(e){function g(c,d,f){var g,k,H;f=f||K;switch(typeof c){case "string":H=c=c.trim();var q=f?b:a;g=q[H];if(!g){":"===c.charAt(0)&&":"===c.charAt(1)&&(k=!0,c=c.substring(2));g=f?p:u;var B=new mc(g);g=(new nc(B,e,g)).parse(c);g.constant?g.$$watchDelegate=r:k?g.$$watchDelegate=g.literal?n:m:g.inputs&&(g.$$watchDelegate=l);f&&(g=h(g));q[H]=g}return s(g,d);case "function":return s(c,d);default:return s(w,d)}}function h(a){function b(c,d,e,f){var g=K;K=!0;try{return a(c,d,e,f)}finally{K=g}}if(!a)return a;
b.$$watchDelegate=a.$$watchDelegate;b.assign=h(a.assign);b.constant=a.constant;b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=h(a.inputs[c]);b.inputs=a.inputs;return b}function k(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=lc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function l(a,b,c,d,e){var f=d.inputs,g;if(1===f.length){var h=k,f=f[0];return a.$watch(function(a){var b=f(a);k(b,h)||(g=d(a,void 0,void 0,[b]),h=b&&lc(b));return g},b,c,e)}for(var l=[],
m=[],n=0,s=f.length;n<s;n++)l[n]=k,m[n]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var h=f[c](a);if(b||(b=!k(h,l[c])))m[c]=h,l[c]=h&&lc(h)}b&&(g=d(a,void 0,void 0,m));return g},b,c,e)}function m(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;C(b)&&b.apply(this,arguments);x(a)&&d.$$postDigest(function(){x(f)&&e()})},c)}function n(a,b,c,d){function e(a){var b=!0;q(a,function(a){x(a)||(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},
function(a,c,d){g=a;C(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function r(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function s(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,c=c!==n&&c!==m?function(c,e,f,g){f=d&&g?g[0]:a(c,e,f,g);return b(f,c,e)}:function(c,d,e,f){e=a(c,d,e,f);c=b(e,c,d);return x(e)?c:e};a.$$watchDelegate&&a.$$watchDelegate!==l?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=l,d=!a.inputs,c.inputs=a.inputs?
a.inputs:[a]);return c}var H=da().noUnsafeEval,u={csp:H,expensiveChecks:!1,literals:sa(d),isIdentifierStart:C(c)&&c,isIdentifierContinue:C(f)&&f},p={csp:H,expensiveChecks:!0,literals:sa(d),isIdentifierStart:C(c)&&c,isIdentifierContinue:C(f)&&f},K=!1;g.$$runningExpensiveChecks=function(){return K};return g}]}function Jf(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Id(function(b){a.$evalAsync(b)},b)}]}function Kf(){this.$get=["$browser","$exceptionHandler",function(a,b){return Id(function(b){a.defer(b)},
b)}]}function Id(a,b){function d(){var a=new g;a.resolve=f(a,a.resolve);a.reject=f(a,a.reject);a.notify=f(a,a.notify);return a}function c(){this.$$state={status:0}}function f(a,b){return function(c){b.call(a,c)}}function e(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,a(function(){var a,d,e;e=c.pending;c.processScheduled=!1;c.pending=void 0;for(var f=0,g=e.length;f<g;++f){d=e[f][0];a=e[f][c.status];try{C(a)?d.resolve(a(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),
b(h)}}}))}function g(){this.promise=new c}function h(a){var b=new g;b.reject(a);return b.promise}function k(a,b,c){var d=null;try{C(c)&&(d=c())}catch(e){return h(e)}return d&&C(d.then)?d.then(function(){return b(a)},h):b(a)}function l(a,b,c,d){var e=new g;e.resolve(a);return e.promise.then(b,c,d)}function m(a){if(!C(a))throw n("norslvr",a);var b=new g;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise}var n=G("$q",TypeError);R(c.prototype,{then:function(a,b,c){if(z(a)&&z(b)&&z(c))return this;
var d=new g;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&e(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return k(b,r,a)},function(b){return k(b,h,a)},b)}});R(g.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(n("qcycle",a)):this.$$resolve(a))},$$resolve:function(a){function c(a){k||(k=!0,h.$$resolve(a))}function d(a){k||
(k=!0,h.$$reject(a))}var g,h=this,k=!1;try{if(E(a)||C(a))g=a&&a.then;C(g)?(this.promise.$$state.status=-1,g.call(a,c,d,f(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,e(this.promise.$$state))}catch(l){d(l),b(l)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;e(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&
d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;f<g;f++){e=d[f][0];a=d[f][3];try{e.notify(C(a)?a(c):c)}catch(h){b(h)}}})}});var r=l;m.prototype=c.prototype;m.defer=d;m.reject=h;m.when=l;m.resolve=r;m.all=function(a){var b=new g,c=0,d=I(a)?[]:{};q(a,function(a,e){c++;l(a).then(function(a){d[e]=a;--c||b.resolve(d)},function(a){b.reject(a)})});0===c&&b.resolve(d);return b.promise};m.race=function(a){var b=d();q(a,function(a){l(a).then(b.resolve,b.reject)});return b.promise};return m}function Tf(){this.$get=
["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,f=!!d,e=f?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};e.supported=f;return e}]}function If(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=
0;this.$id=++sb;this.$$ChildScope=null}b.prototype=a;return b}var b=10,d=G("$rootScope"),c=null,f=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(e,g,h){function k(a){a.currentScope.$$destroyed=!0}function l(a){9===Ia&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++sb;this.$$phase=
this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function n(a){if(K.$$phase)throw d("inprog",K.$$phase);K.$$phase=a}function r(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function H(){}function u(){for(;t.length;)try{t.shift()()}catch(a){e(a)}f=
null}function p(){null===f&&(f=h.defer(function(){K.$apply(u)}))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on("$destroy",k);return d},$watch:function(a,b,d,e){var f=g(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,
f,a);var h=this,k=h.$$watchers,l={fn:b,last:H,get:f,exp:e||a,eq:!!d};c=null;C(b)||(l.fn=w);k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1);k.unshift(l);k.$$digestWatchIndex++;r(this,1);return function(){var a=bb(k,l);0<=a&&(r(h,-1),a<k.$$digestWatchIndex&&k.$$digestWatchIndex--);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=
!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});q(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!z(e)){if(E(e))if(la(e))for(f!==n&&(f=n,s=f.length=0,l++),a=e.length,s!==a&&(l++,f.length=s=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==r&&(f=r={},s=0,l++);a=0;for(b in e)ua.call(e,
b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(s++,f[b]=g,l++));if(s>a)for(b in l++,f)ua.call(e,b)||(s--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),n=[],r={},p=!0,s=0;return this.$watch(m,function(){p?(p=!1,b(e,e,d)):b(e,h,d);if(k)if(E(e))if(la(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ua.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,k,l,m,r,p,s=b,q,t=[],N,x;n("$digest");
h.$$checkUrlChange();this===K&&null!==f&&(h.defer.cancel(f),u());c=null;do{p=!1;q=this;for(r=0;r<A.length;r++){try{x=A[r],x.scope.$eval(x.expression,x.locals)}catch(z){e(z)}c=null}A.length=0;a:do{if(r=q.$$watchers)for(r.$$digestWatchIndex=r.length;r.$$digestWatchIndex--;)try{if(a=r[r.$$digestWatchIndex])if(m=a.get,(g=m(q))!==(k=a.last)&&!(a.eq?na(g,k):ia(g)&&ia(k)))p=!0,c=a,a.last=a.eq?sa(g,null):g,l=a.fn,l(g,k===H?g:k,q),5>s&&(N=4-s,t[N]||(t[N]=[]),t[N].push({msg:C(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):
a.exp,newVal:g,oldVal:k}));else if(a===c){p=!1;break a}}catch(w){e(w)}if(!(r=q.$$watchersCount&&q.$$childHead||q!==this&&q.$$nextSibling))for(;q!==this&&!(r=q.$$nextSibling);)q=q.$parent}while(q=r);if((p||A.length)&&!s--)throw K.$$phase=null,d("infdig",b,t);}while(p||A.length);for(K.$$phase=null;L<v.length;)try{v[L++]()}catch(y){e(y)}v.length=L=0},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===K&&h.$$applicationDestroyed();r(this,
-this.$$watchersCount);for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=w;this.$on=this.$watch=this.$watchGroup=function(){return w};this.$$listeners=
{};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){K.$$phase||A.length||h.defer(function(){A.length&&K.$digest()});A.push({scope:this,expression:g(a),locals:b})},$$postDigest:function(a){v.push(a)},$apply:function(a){try{n("$apply");try{return this.$eval(a)}finally{K.$$phase=null}}catch(b){e(b)}finally{try{K.$digest()}catch(c){throw e(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&t.push(b);a=g(a);p()},$on:function(a,b){var c=
this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,s(e,1,a))}},$emit:function(a,b){var c=[],d,f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=cb([h],arguments,1),l,m;do{d=f.$$listeners[a]||c;h.currentScope=f;l=0;for(m=d.length;l<
m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){e(n)}else d.splice(l,1),l--,m--;if(g)return h.currentScope=null,h;f=f.$parent}while(f);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return f;for(var g=cb([f],arguments,1),h,k;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){e(l)}else d.splice(h,
1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}f.currentScope=null;return f}};var K=new m,A=K.$$asyncQueue=[],v=K.$$postDigestQueue=[],t=K.$$applyAsyncQueue=[],L=0;return K}]}function Be(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return x(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return x(a)?(b=a,this):b};
this.$get=function(){return function(d,c){var f=c?b:a,e;e=ta(d).href;return""===e||e.match(f)?d:"unsafe:"+e}}}function Gg(a){if("self"===a)return a;if(D(a)){if(-1<a.indexOf("***"))throw Fa("iwcard",a);a=Jd(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+a+"$")}if(Za(a))return new RegExp("^"+a.source+"$");throw Fa("imatcher");}function Kd(a){var b=[];x(a)&&q(a,function(a){b.push(Gg(a))});return b}function Mf(){this.SCE_CONTEXTS=ga;var a=["self"],b=[];this.resourceUrlWhitelist=
function(b){arguments.length&&(a=Kd(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=Kd(a));return b};this.$get=["$injector",function(d){function c(a,b){return"self"===a?od(b):!!a.exec(b.href)}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw Fa("unsafe");
};d.has("$sanitize")&&(e=d.get("$sanitize"));var g=f(),h={};h[ga.HTML]=f(g);h[ga.CSS]=f(g);h[ga.URL]=f(g);h[ga.JS]=f(g);h[ga.RESOURCE_URL]=f(h[ga.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Fa("icontext",a,b);if(null===b||z(b)||""===b)return b;if("string"!==typeof b)throw Fa("itype",a);return new c(b)},getTrusted:function(d,f){if(null===f||z(f)||""===f)return f;var g=h.hasOwnProperty(d)?h[d]:null;if(g&&f instanceof g)return f.$$unwrapTrustedValue();if(d===ga.RESOURCE_URL){var g=
ta(f.toString()),n,r,s=!1;n=0;for(r=a.length;n<r;n++)if(c(a[n],g)){s=!0;break}if(s)for(n=0,r=b.length;n<r;n++)if(c(b[n],g)){s=!1;break}if(s)return f;throw Fa("insecurl",f.toString());}if(d===ga.HTML)return e(f);throw Fa("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function Lf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>Ia)throw Fa("iequirks");var c=ka(ga);c.isEnabled=function(){return a};
c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=$a);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var f=c.parseAs,e=c.getTrusted,g=c.trustAs;q(ga,function(a,b){var d=Q(b);c[hb("parse_as_"+d)]=function(b){return f(a,b)};c[hb("get_trusted_"+d)]=function(b){return e(a,b)};c[hb("trust_as_"+d)]=function(b){return g(a,b)}});return c}]}function Nf(){this.$get=["$window",
"$document",function(a,b){var d={},c=!(a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,f=Z((/android (\d+)/.exec(Q((a.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h,k=/^(Moz|webkit|ms)(?=[A-Z])/,l=g.body&&g.body.style,m=!1,n=!1;if(l){for(var r in l)if(m=k.exec(r)){h=m[0];h=h[0].toUpperCase()+h.substr(1);break}h||(h="WebkitOpacity"in l&&"webkit");m=!!("transition"in l||
h+"Transition"in l);n=!!("animation"in l||h+"Animation"in l);!f||m&&n||(m=D(l.webkitTransition),n=D(l.webkitAnimation))}return{history:!(!c||4>f||e),hasEvent:function(a){if("input"===a&&11>=Ia)return!1;if(z(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:da(),vendorPrefix:h,transitions:m,animations:n,android:f}}]}function Pf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$templateCache","$http","$q","$sce",function(b,d,c,f){function e(g,h){e.totalPendingRequests++;
if(!D(g)||z(b.get(g)))g=f.getTrustedResourceUrl(g);var k=d.defaults&&d.defaults.transformResponse;I(k)?k=k.filter(function(a){return a!==gc}):k===gc&&(k=null);return d.get(g,R({cache:b,transformResponse:k},a))["finally"](function(){e.totalPendingRequests--}).then(function(a){b.put(g,a.data);return a.data},function(a){if(!h)throw Hg("tpload",g,a.status,a.statusText);return c.reject(a)})}e.totalPendingRequests=0;return e}]}function Qf(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,
b,d){a=a.getElementsByClassName("ng-binding");var g=[];q(a,function(a){var c=$.element(a).data("$binding");c&&q(c,function(c){d?(new RegExp("(^|\\s)"+Jd(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var k=a.querySelectorAll("["+g[h]+"model"+(d?"=":"*=")+'"'+b+'"]');if(k.length)return k}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},
whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Rf(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,f){function e(e,k,l){C(e)||(l=k,k=e,e=w);var m=va.call(arguments,3),n=x(l)&&!l,r=(n?c:d).defer(),s=r.promise,q;q=b.defer(function(){try{r.resolve(e.apply(null,m))}catch(b){r.reject(b),f(b)}finally{delete g[s.$$timeoutId]}n||a.$apply()},k);s.$$timeoutId=q;g[q]=r;return s}var g={};e.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),
delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return e}]}function ta(a){Ia&&(aa.setAttribute("href",a),a=aa.href);aa.setAttribute("href",a);return{href:aa.href,protocol:aa.protocol?aa.protocol.replace(/:$/,""):"",host:aa.host,search:aa.search?aa.search.replace(/^\?/,""):"",hash:aa.hash?aa.hash.replace(/^#/,""):"",hostname:aa.hostname,port:aa.port,pathname:"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname}}function od(a){a=D(a)?ta(a):a;return a.protocol===Ld.protocol&&a.host===Ld.host}
function Sf(){this.$get=ha(y)}function Md(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},f="";return function(){var a,g,h,k,l;try{a=d.cookie||""}catch(m){a=""}if(a!==f)for(f=a,a=f.split("; "),c={},h=0;h<a.length;h++)g=a[h],k=g.indexOf("="),0<k&&(l=b(g.substring(0,k)),z(c[l])&&(c[l]=b(g.substring(k+1))));return c}}function Wf(){this.$get=Md}function Rc(a){function b(d,c){if(E(d)){var f={};q(d,function(a,c){f[c]=b(c,a)});return f}return a.factory(d+"Filter",
c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",Nd);b("date",Od);b("filter",Ig);b("json",Jg);b("limitTo",Kg);b("lowercase",Lg);b("number",Pd);b("orderBy",Qd);b("uppercase",Mg)}function Ig(){return function(a,b,d,c){if(!la(a)){if(null==a)return a;throw G("filter")("notarray",a);}c=c||"$";var f;switch(oc(b)){case "function":break;case "boolean":case "null":case "number":case "string":f=!0;case "object":b=Ng(b,d,c,f);break;default:return a}return Array.prototype.filter.call(a,
b)}}function Ng(a,b,d,c){var f=E(a)&&d in a;!0===b?b=na:C(b)||(b=function(a,b){if(z(a))return!1;if(null===a||null===b)return a===b;if(E(b)||E(a)&&!Ac(a))return!1;a=Q(""+a);b=Q(""+b);return-1!==a.indexOf(b)});return function(e){return f&&!E(e)?Na(e,a[d],b,d,!1):Na(e,a,b,d,c)}}function Na(a,b,d,c,f,e){var g=oc(a),h=oc(b);if("string"===h&&"!"===b.charAt(0))return!Na(a,b.substring(1),d,c,f);if(I(a))return a.some(function(a){return Na(a,b,d,c,f)});switch(g){case "object":var k;if(f){for(k in a)if("$"!==
k.charAt(0)&&Na(a[k],b,d,c,!0))return!0;return e?!1:Na(a,b,d,c,!1)}if("object"===h){for(k in b)if(e=b[k],!C(e)&&!z(e)&&(g=k===c,!Na(g?a:a[k],e,d,c,g,g)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function oc(a){return null===a?"null":typeof a}function Nd(a){var b=a.NUMBER_FORMATS;return function(a,c,f){z(c)&&(c=b.CURRENCY_SYM);z(f)&&(f=b.PATTERNS[1].maxFrac);return null==a?a:Rd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,f).replace(/\u00A4/g,c)}}function Pd(a){var b=
a.NUMBER_FORMATS;return function(a,c){return null==a?a:Rd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Og(a){var b=0,d,c,f,e,g;-1<(c=a.indexOf(Sd))&&(a=a.replace(Sd,""));0<(f=a.search(/e/i))?(0>c&&(c=f),c+=+a.slice(f+1),a=a.substring(0,f)):0>c&&(c=a.length);for(f=0;a.charAt(f)===pc;f++);if(f===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===pc;)g--;c-=f;d=[];for(e=0;f<=g;f++,e++)d[e]=+a.charAt(f)}c>Td&&(d=d.splice(0,Td-1),b=c-1,c=1);return{d:d,e:b,i:c}}function Pg(a,b,d,c){var f=a.d,e=
f.length-a.i;b=z(b)?Math.min(Math.max(d,e),c):+b;d=b+a.i;c=f[d];if(0<d){f.splice(Math.max(a.i,d));for(var g=d;g<f.length;g++)f[g]=0}else for(e=Math.max(0,e),a.i=1,f.length=Math.max(1,d=b+1),f[0]=0,g=1;g<d;g++)f[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)f.unshift(0),a.i++;f.unshift(1);a.i++}else f[d-1]++;for(;e<Math.max(0,b);e++)f.push(0);if(b=f.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))f.unshift(b),a.i++}function Rd(a,b,d,c,f){if(!D(a)&&!ba(a)||isNaN(a))return"";var e=
!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(e)k="\u221e";else{g=Og(h);Pg(g,f,b.minFrac,b.maxFrac);k=g.d;h=g.i;f=g.e;e=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?e=k.splice(h,k.length):(e=k,k=[0]);h=[];for(k.length>=b.lgSize&&h.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>b.gSize;)h.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&h.unshift(k.join(""));k=h.join(d);e.length&&(k+=c+e.join(""));f&&(k+="e+"+f)}return 0>a&&!g?b.negPre+k+b.negSuf:b.posPre+
k+b.posSuf}function Mb(a,b,d,c){var f="";if(0>a||c&&0>=a)c?a=-a+1:(a=-a,f="-");for(a=""+a;a.length<b;)a=pc+a;d&&(a=a.substr(a.length-b));return f+a}function U(a,b,d,c,f){d=d||0;return function(e){e=e["get"+a]();if(0<d||e>-d)e+=d;0===e&&-12===d&&(e=12);return Mb(e,b,c,f)}}function nb(a,b,d){return function(c,f){var e=c["get"+a](),g=wb((d?"STANDALONE":"")+(b?"SHORT":"")+a);return f[g][e]}}function Ud(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Vd(a){return function(b){var d=
Ud(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Mb(b,a)}}function qc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Od(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var e=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,k=b[8]?a.setUTCHours:a.setHours;b[9]&&(e=Z(b[9]+b[10]),g=Z(b[9]+b[11]));h.call(a,Z(b[1]),Z(b[2])-1,Z(b[3]));e=Z(b[4]||0)-e;g=Z(b[5]||0)-g;h=Z(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||
0)));k.call(a,e,g,h,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;D(c)&&(c=Qg.test(c)?Z(c):b(c));ba(c)&&(c=new Date(c));if(!ja(c)||!isFinite(c.getTime()))return c;for(;d;)(l=Rg.exec(d))?(h=cb(h,l,1),d=h.pop()):(h.push(d),d=null);var m=c.getTimezoneOffset();e&&(m=Dc(e,m),c=Ub(c,e,!0));q(h,function(b){k=Sg[b];g+=k?k(c,a.DATETIME_FORMATS,m):
"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function Jg(){return function(a,b){z(b)&&(b=2);return eb(a,b)}}function Kg(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):Z(b);if(ia(b))return a;ba(a)&&(a=a.toString());if(!la(a))return a;d=!d||isNaN(d)?0:Z(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?rc(a,d,d+b):0===d?rc(a,b,a.length):rc(a,Math.max(0,d+b),d)}}function rc(a,b,d){return D(a)?a.slice(b,d):va.call(a,b,d)}function Qd(a){function b(b){return b.map(function(b){var c=
1,d=$a;if(C(b))d=b;else if(D(b)){if("+"===b.charAt(0)||"-"===b.charAt(0))c="-"===b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var f=d(),d=function(a){return a[f]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}function c(a,b){var c=0,d=a.type,k=b.type;if(d===k){var k=a.value,l=b.value;"string"===d?(k=k.toLowerCase(),l=l.toLowerCase()):"object"===d&&(E(k)&&(k=a.index),E(l)&&(l=b.index));k!==l&&(c=
k<l?-1:1)}else c=d<k?-1:1;return c}return function(a,e,g,h){if(null==a)return a;if(!la(a))throw G("orderBy")("notarray",a);I(e)||(e=[e]);0===e.length&&(e=["+"]);var k=b(e),l=g?-1:1,m=C(h)?h:c;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:k.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("object"===c)a:{if(C(e.valueOf)&&(e=e.valueOf(),d(e)))break a;Ac(e)&&(e=e.toString(),d(e))}return{value:e,type:c,
index:b}})}});a.sort(function(a,b){for(var c=0,d=k.length;c<d;c++){var e=m(a.predicateValues[c],b.predicateValues[c]);if(e)return e*k[c].descending*l}return m(a.tieBreaker,b.tieBreaker)*l});return a=a.map(function(a){return a.value})}}function Va(a){C(a)&&(a={link:a});a.restrict=a.restrict||"AC";return ha(a)}function Wd(a,b,d,c,f){var e=this,g=[];e.$error={};e.$$success={};e.$pending=void 0;e.$name=f(b.name||b.ngForm||"")(d);e.$dirty=!1;e.$pristine=!0;e.$valid=!0;e.$invalid=!1;e.$submitted=!1;e.$$parentForm=
Nb;e.$rollbackViewValue=function(){q(g,function(a){a.$rollbackViewValue()})};e.$commitViewValue=function(){q(g,function(a){a.$commitViewValue()})};e.$addControl=function(a){Ra(a.$name,"input");g.push(a);a.$name&&(e[a.$name]=a);a.$$parentForm=e};e.$$renameControl=function(a,b){var c=a.$name;e[c]===a&&delete e[c];e[b]=a;a.$name=b};e.$removeControl=function(a){a.$name&&e[a.$name]===a&&delete e[a.$name];q(e.$pending,function(b,c){e.$setValidity(c,null,a)});q(e.$error,function(b,c){e.$setValidity(c,null,
a)});q(e.$$success,function(b,c){e.$setValidity(c,null,a)});bb(g,a);a.$$parentForm=Nb};Xd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(bb(d,c),0===d.length&&delete a[b])},$animate:c});e.$setDirty=function(){c.removeClass(a,Wa);c.addClass(a,Ob);e.$dirty=!0;e.$pristine=!1;e.$$parentForm.$setDirty()};e.$setPristine=function(){c.setClass(a,Wa,Ob+" ng-submitted");e.$dirty=!1;e.$pristine=!0;e.$submitted=!1;q(g,function(a){a.$setPristine()})};
e.$setUntouched=function(){q(g,function(a){a.$setUntouched()})};e.$setSubmitted=function(){c.addClass(a,"ng-submitted");e.$submitted=!0;e.$$parentForm.$setSubmitted()}}function sc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Xa(a,b,d,c,f,e){var g=Q(b[0].type);if(!f.android){var h=!1;b.on("compositionstart",function(){h=!0});b.on("compositionend",function(){h=!1;l()})}var k,l=function(a){k&&(e.defer.cancel(k),k=null);if(!h){var f=b.val();a=a&&a.type;"password"===
g||d.ngTrim&&"false"===d.ngTrim||(f=Y(f));(c.$viewValue!==f||""===f&&c.$$hasNativeValidators)&&c.$setViewValue(f,a)}};if(f.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){k||(k=e.defer(function(){k=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(f.hasEvent("paste"))b.on("paste cut",m)}b.on("change",l);if(Yd[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!k){var b=
this.validity,c=b.badInput,d=b.typeMismatch;k=e.defer(function(){k=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Pb(a,b){return function(d,c){var f,e;if(ja(d))return d;if(D(d)){'"'===d.charAt(0)&&'"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(Tg.test(d))return new Date(d);a.lastIndex=0;if(f=a.exec(d))return f.shift(),e=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),
mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},q(f,function(a,c){c<b.length&&(e[b[c]]=+a)}),new Date(e.yyyy,e.MM-1,e.dd,e.HH,e.mm,e.ss||0,1E3*e.sss||0)}return NaN}}function ob(a,b,d,c){return function(f,e,g,h,k,l,m){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function r(a){return x(a)&&!ja(a)?d(a)||void 0:a}tc(f,e,g,h);Xa(f,e,g,h,k,l);var s=h&&h.$options&&h.$options.timezone,q;h.$$parserName=a;h.$parsers.push(function(a){if(h.$isEmpty(a))return null;
if(b.test(a))return a=d(a,q),s&&(a=Ub(a,s)),a});h.$formatters.push(function(a){if(a&&!ja(a))throw pb("datefmt",a);if(n(a))return(q=a)&&s&&(q=Ub(q,s,!0)),m("date")(a,c,s);q=null;return""});if(x(g.min)||g.ngMin){var u;h.$validators.min=function(a){return!n(a)||z(u)||d(a)>=u};g.$observe("min",function(a){u=r(a);h.$validate()})}if(x(g.max)||g.ngMax){var p;h.$validators.max=function(a){return!n(a)||z(p)||d(a)<=p};g.$observe("max",function(a){p=r(a);h.$validate()})}}}function tc(a,b,d,c){(c.$$hasNativeValidators=
E(b[0].validity))&&c.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function Zd(a){a.$$parserName="number";a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(Ug.test(b))return parseFloat(b)});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!ba(b))throw pb("numfmt",b);b=b.toString()}return b})}function qb(a){x(a)&&!ba(a)&&(a=parseFloat(a));return ia(a)?void 0:a}function uc(a){var b=a.toString(),d=b.indexOf(".");return-1===d?-1<a&&1>
a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function $d(a,b,d,c,f){if(x(c)){a=a(c);if(!a.constant)throw pb("constexpr",d,c);return a(b)}return f}function vc(a,b){a="ngClass"+a;return["$animate",function(d){function c(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var f=a[d],m=0;m<b.length;m++)if(f===b[m])continue a;c.push(f)}return c}function f(a){var b=[];return I(a)?(q(a,function(a){b=b.concat(f(a))}),b):D(a)?a.split(" "):E(a)?(q(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",
link:function(e,g,h){function k(a){a=l(a,1);h.$addClass(a)}function l(a,b){var c=g.data("$classCounts")||V(),d=[];q(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function m(a,b){var e=c(b,a),f=c(a,b),e=l(e,1),f=l(f,-1);e&&e.length&&d.addClass(g,e);f&&f.length&&d.removeClass(g,f)}function n(a){if(!0===b||(e.$index&1)===b){var c=f(a||[]);if(!r)k(c);else if(!na(a,r)){var d=f(r);m(d,c)}}r=I(a)?a.map(function(a){return ka(a)}):ka(a)}
var r;h.$observe("class",function(b){n(e.$eval(h[a]))});"ngClass"!==a&&e.$watch("$index",function(a,c){var d=a&1;if(d!==(c&1)){var e=f(r);d===b?k(e):(d=l(e,-1),h.$removeClass(d))}});e.$watch(h[a],n,!0)}}}]}function Xd(a){function b(a,b){b&&!e[a]?(k.addClass(f,a),e[a]=!0):!b&&e[a]&&(k.removeClass(f,a),e[a]=!1)}function d(a,c){a=a?"-"+Hc(a,"-"):"";b(rb+a,!0===c);b(ae+a,!1===c)}var c=a.ctrl,f=a.$element,e={},g=a.set,h=a.unset,k=a.$animate;e[ae]=!(e[rb]=f.hasClass(rb));c.$setValidity=function(a,e,f){z(e)?
(c.$pending||(c.$pending={}),g(c.$pending,a,f)):(c.$pending&&h(c.$pending,a,f),be(c.$pending)&&(c.$pending=void 0));Ka(e)?e?(h(c.$error,a,f),g(c.$$success,a,f)):(g(c.$error,a,f),h(c.$$success,a,f)):(h(c.$error,a,f),h(c.$$success,a,f));c.$pending?(b(ce,!0),c.$valid=c.$invalid=void 0,d("",null)):(b(ce,!1),c.$valid=be(c.$error),c.$invalid=!c.$valid,d("",c.$valid));e=c.$pending&&c.$pending[a]?void 0:c.$error[a]?!1:c.$$success[a]?!0:null;d(a,e);c.$$parentForm.$setValidity(a,e,c)}}function be(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;
return!0}var Vg=/^\/(.+)\/([a-z]*)$/,ua=Object.prototype.hasOwnProperty,Q=function(a){return D(a)?a.toLowerCase():a},wb=function(a){return D(a)?a.toUpperCase():a},Ia,F,za,va=[].slice,pg=[].splice,Wg=[].push,ma=Object.prototype.toString,Bc=Object.getPrototypeOf,xa=G("ng"),$=y.angular||(y.angular={}),Wb,sb=0;Ia=y.document.documentMode;var ia=Number.isNaN||function(a){return a!==a};w.$inject=[];$a.$inject=[];var I=Array.isArray,ne=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,
Y=function(a){return D(a)?a.trim():a},Jd=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},da=function(){if(!x(da.rules)){var a=y.document.querySelector("[ng-csp]")||y.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");da.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=da;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,
noInlineStyle:!1}}}return da.rules},ub=function(){if(x(ub.name_))return ub.name_;var a,b,d=Oa.length,c,f;for(b=0;b<d;++b)if(c=Oa[b],a=y.document.querySelector("["+c.replace(":","\\:")+"jq]")){f=a.getAttribute(c+"jq");break}return ub.name_=f},qe=/:/g,Oa=["ng-","data-ng-","ng:","x-ng-"],te=function(a){var b=a.currentScript,b=b&&b.getAttribute("src");if(!b)return!0;var d=a.createElement("a");d.href=b;if(a.location.origin===d.origin)return!0;switch(d.protocol){case "http:":case "https:":case "ftp:":case "blob:":case "file:":case "data:":return!0;
default:return!1}}(y.document),we=/[A-Z]/g,Ic=!1,La=3,Ae={full:"1.5.11",major:1,minor:5,dot:11,codeName:"princely-quest"};W.expando="ng339";var jb=W.cache={},bg=1;W._data=function(a){return this.cache[a[this.expando]]||{}};var Xf=/([:\-_]+(.))/g,Yf=/^moz([A-Z])/,Ab={mouseleave:"mouseout",mouseenter:"mouseover"},Yb=G("jqLite"),ag=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Xb=/<|&#?\w+;/,Zf=/<([\w:-]+)/,$f=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,pa={option:[1,'<select multiple="multiple">',
"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};pa.optgroup=pa.option;pa.tbody=pa.tfoot=pa.colgroup=pa.caption=pa.thead;pa.th=pa.td;var gg=y.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Pa=W.prototype={ready:function(a){function b(){d||(d=!0,a())}var d=!1;"complete"===y.document.readyState?y.setTimeout(b):
(this.on("DOMContentLoaded",b),W(y).on("load",b))},toString:function(){var a=[];q(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?F(this[a]):F(this[this.length+a])},length:0,push:Wg,sort:[].sort,splice:[].splice},Gb={};q("multiple selected checked disabled readOnly required open".split(" "),function(a){Gb[Q(a)]=a});var $c={};q("input select option textarea button form details".split(" "),function(a){$c[a]=!0});var gd={ngMinlength:"minlength",ngMaxlength:"maxlength",
ngMin:"min",ngMax:"max",ngPattern:"pattern"};q({data:$b,removeData:ib,hasData:function(a){for(var b in jb[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)ib(a[b])}},function(a,b){W[b]=a});q({data:$b,inheritedData:Eb,scope:function(a){return F.data(a,"$scope")||Eb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return F.data(a,"$isolateScope")||F.data(a,"$isolateScopeNoTemplate")},controller:Xc,injector:function(a){return Eb(a,"$injector")},removeAttr:function(a,
b){a.removeAttribute(b)},hasClass:Bb,css:function(a,b,d){b=hb(b);if(x(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==La&&2!==c&&8!==c)if(c=Q(b),Gb[c])if(x(d))d?(a[b]=!0,a.setAttribute(b,c)):(a[b]=!1,a.removeAttribute(c));else return a[b]||(a.attributes.getNamedItem(b)||w).specified?c:void 0;else if(x(d))a.setAttribute(b,d);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?void 0:a},prop:function(a,b,d){if(x(d))a[b]=d;else return a[b]},text:function(){function a(a,
d){if(z(d)){var c=a.nodeType;return 1===c||c===La?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(z(b)){if(a.multiple&&"select"===wa(a)){var d=[];q(a.options,function(a){a.selected&&d.push(a.value||a.text)});return 0===d.length?null:d}return a.value}a.value=b},html:function(a,b){if(z(b))return a.innerHTML;yb(a,!0);a.innerHTML=b},empty:Yc},function(a,b){W.prototype[b]=function(b,c){var f,e,g=this.length;if(a!==Yc&&z(2===a.length&&a!==Bb&&a!==Xc?b:c)){if(E(b)){for(f=0;f<g;f++)if(a===
$b)a(this[f],b);else for(e in b)a(this[f],e,b[e]);return this}f=a.$dv;g=z(f)?Math.min(g,1):g;for(e=0;e<g;e++){var h=a(this[e],b,c);f=f?f+h:h}return f}for(f=0;f<g;f++)a(this[f],b,c);return this}});q({removeData:ib,on:function(a,b,d,c){if(x(c))throw Yb("onargs");if(Sc(a)){c=zb(a,!0);var f=c.events,e=c.handle;e||(e=c.handle=dg(a,f));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,h=function(b,c,g){var h=f[b];h||(h=f[b]=[],h.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,e,!1));
h.push(d)};g--;)b=c[g],Ab[b]?(h(Ab[b],fg),h(b,void 0,!0)):h(b)}},off:Wc,one:function(a,b,d){a=F(a);a.on(b,function f(){a.off(b,d);a.off(b,f)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;yb(a);q(new W(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];q(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===
d){b=new W(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;q(new W(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){Uc(a,F(b).eq(0).clone()[0])},remove:Fb,detach:function(a){Fb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;if(c){b=new W(b);for(var f=0,e=b.length;f<e;f++){var g=b[f];c.insertBefore(g,d.nextSibling);d=g}}},addClass:Db,removeClass:Cb,toggleClass:function(a,b,d){b&&q(b.split(" "),function(b){var f=d;z(f)&&
(f=!Bb(a,b));(f?Db:Cb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Zb,triggerHandler:function(a,b,d){var c,f,e=b.type||b,g=zb(a);if(g=(g=g&&g.events)&&g[e])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=
!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:w,type:e,target:a},b.type&&(c=R(c,b)),b=ka(g),f=d?[c].concat(d):[c],q(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,f)})}},function(a,b){W.prototype[b]=function(b,c,f){for(var e,g=0,h=this.length;g<h;g++)z(e)?(e=a(this[g],b,c,f),x(e)&&(e=F(e))):Vc(e,a(this[g],b,c,f));return x(e)?e:this}});W.prototype.bind=W.prototype.on;W.prototype.unbind=W.prototype.off;Sa.prototype={put:function(a,
b){this[Aa(a,this.nextUid)]=b},get:function(a){return this[Aa(a,this.nextUid)]},remove:function(a){var b=this[a=Aa(a,this.nextUid)];delete this[a];return b}};var Vf=[function(){this.$get=[function(){return Sa}]}],ig=/^([^(]+?)=>/,jg=/^[^(]*\(\s*([^)]*)\)/m,Xg=/,/,Yg=/^\s*(_?)(\S+?)\1\s*$/,hg=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ba=G("$injector");fb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw D(d)&&d||(d=a.name||kg(a)),Ba("strictdi",d);b=
ad(a);q(b[1].split(Xg),function(a){a.replace(Yg,function(a,b,d){c.push(d)})})}a.$inject=c}}else I(a)?(b=a.length-1,Qa(a[b],"fn"),c=a.slice(0,b)):Qa(a,"fn",!0);return c};var de=G("$animate"),nf=function(){this.$get=w},of=function(){var a=new Sa,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function f(a,b,c){var d=!1;b&&(b=D(b)?b.split(" "):I(b)?b:[],q(b,function(b){b&&(d=!0,a[b]=c)}));return d}function e(){q(b,function(b){var c=a.get(b);if(c){var d=lg(b.attr("class")),e="",f="";q(c,
function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});q(b,function(a){e&&Db(a,e);f&&Cb(a,f)});a.remove(b)}});b.length=0}return{enabled:w,on:w,off:w,pin:w,push:function(g,h,k,l){l&&l();k=k||{};k.from&&g.css(k.from);k.to&&g.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(g)||{},h=f(k,h,!0),l=f(k,l,!1),h||l)a.put(g,k),b.push(g),1===b.length&&c.$$postDigest(e);g=new d;g.complete();return g}}}]},lf=["$provide",function(a){var b=this;this.$$registeredAnimations=
Object.create(null);this.register=function(d,c){if(d&&"."!==d.charAt(0))throw de("notcsel",d);var f=d+"-animation";b.$$registeredAnimations[d.substr(1)]=f;a.factory(f,c)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw de("nongcls","ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var h;a:{for(h=0;h<d.length;h++){var k=
d[h];if(1===k.nodeType){h=k;break a}}h=void 0}!h||h.parentNode||h.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(f,e,g,h){e=e&&F(e);g=g&&F(g);e=e||g.parent();b(f,e,g);return a.push(f,"enter",Ca(h))},move:function(f,e,g,h){e=e&&F(e);g=g&&F(g);e=e||g.parent();b(f,e,g);return a.push(f,"move",Ca(h))},leave:function(b,c){return a.push(b,"leave",Ca(c),function(){b.remove()})},addClass:function(b,
c,g){g=Ca(g);g.addClass=kb(g.addclass,c);return a.push(b,"addClass",g)},removeClass:function(b,c,g){g=Ca(g);g.removeClass=kb(g.removeClass,c);return a.push(b,"removeClass",g)},setClass:function(b,c,g,h){h=Ca(h);h.addClass=kb(h.addClass,c);h.removeClass=kb(h.removeClass,g);return a.push(b,"setClass",h)},animate:function(b,c,g,h,k){k=Ca(k);k.from=k.from?R(k.from,c):c;k.to=k.to?R(k.to,g):g;k.tempClasses=kb(k.tempClasses,h||"ng-inline-animate");return a.push(b,"animate",k)}}}]}],qf=function(){this.$get=
["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},pf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,d,c,f){function e(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){var d=c[0];d&&d.hidden?f(a,0,!1):b(a)};this._state=0}e.chain=function(a,b){function c(){if(d===a.length)b(!0);
else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};e.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;q(a,function(a){a.done(c)})};e.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:w,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},
"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(q(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=
0,this._state=2)}};return e}]},mf=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,f){function e(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);h||k.complete();h=!0});return k}var g=f||{};g.$$prepared||(g=sa(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var h,k=new d;return{start:e,end:e}}}]},fa=G("$compile"),ec=new function(){};
Kc.$inject=["$provide","$$sanitizeUriProvider"];Hb.prototype.isFirstChange=function(){return this.previousValue===ec};var bd=/^((?:x|data)[:\-_])/i,id=G("$controller"),hd=/^(\S+)(\s+as\s+([\w$]+))?$/,wf=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof F&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},jd="application/json",hc={"Content-Type":jd+";charset=utf-8"},rg=/^\[|^\{(?!\{)/,sg={"[":/]$/,"{":/}$/},qg=/^\)]\}',?\n/,Zg=G("$http"),nd=function(a){return function(){throw Zg("legacy",
a);}},Ha=$.$interpolateMinErr=G("$interpolate");Ha.throwNoconcat=function(a){throw Ha("noconcat",a);};Ha.interr=function(a,b){return Ha("interr",a,b.toString())};var Ef=function(){this.$get=["$window",function(a){function b(a){var b=function(a){b.data=a;b.called=!0};b.id=a;return b}var d=a.angular.callbacks,c={};return{createCallback:function(a){a="_"+(d.$$counter++).toString(36);var e="angular.callbacks."+a,g=b(a);c[e]=d[a]=g;return e},wasCalled:function(a){return c[a].called},getResponse:function(a){return c[a].data},
removeCallback:function(a){delete d[c[a].id];delete c[a]}}}]},$g=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,ug={http:80,https:443,ftp:21},lb=G("$location"),vg=/^\s*[\\/]{2,}/,ah={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Ib("$$absUrl"),url:function(a){if(z(a))return this.$$url;var b=$g.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Ib("$$protocol"),host:Ib("$$host"),port:Ib("$$port"),path:sd("$$path",function(a){a=
null!==a?a.toString():"";return"/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(D(a)||ba(a))a=a.toString(),this.$$search=Fc(a);else if(E(a))a=sa(a,{}),q(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw lb("isrcharg");break;default:z(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:sd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};
q([rd,kc,jc],function(a){a.prototype=Object.create(ah);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==jc||!this.$$html5)throw lb("nostate");this.$$state=z(b)?null:b;return this}});var ea=G("$parse"),ud=[].constructor,vd=(!1).constructor,wd=Function.constructor,xd=(0).constructor,yd={}.constructor,zd="".constructor,Ag=ud.prototype,Bg=vd.prototype,Kb=wd.prototype,Cg=xd.prototype,Ad=yd.prototype,Dg=zd.prototype,xg=Kb.call,yg=Kb.apply,zg=Kb.bind,Fg=Ad.valueOf,Qb=V();q("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),
function(a){Qb[a]=!0});var bh={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},mc=function(a){this.options=a};mc.prototype={constructor:mc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,
text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Qb[b],f=Qb[d];Qb[a]||c||f?(a=f?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===
typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},
isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=
x(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw ea("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=Q(this.text.charAt(this.index));if("."===d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"===a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||c&&this.isNumber(c)||"e"!==a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,
text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,f=!1;this.index<this.text.length;){var e=this.text.charAt(this.index),c=c+e;if(f)"u"===e?(f=this.text.substring(this.index+
1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=bh[e]||e,f=!1;else if("\\"===e)f=!0;else{if(e===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=e}this.index++}this.throwError("Unterminated quote",b)}};var t=function(a,b){this.lexer=a;this.options=b};t.Program="Program";t.ExpressionStatement="ExpressionStatement";t.AssignmentExpression="AssignmentExpression";t.ConditionalExpression=
"ConditionalExpression";t.LogicalExpression="LogicalExpression";t.BinaryExpression="BinaryExpression";t.UnaryExpression="UnaryExpression";t.CallExpression="CallExpression";t.MemberExpression="MemberExpression";t.Identifier="Identifier";t.Literal="Literal";t.ArrayExpression="ArrayExpression";t.Property="Property";t.ObjectExpression="ObjectExpression";t.ThisExpression="ThisExpression";t.LocalsExpression="LocalsExpression";t.NGValueParameter="NGValueParameter";t.prototype={ast:function(a){this.text=
a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:t.Program,body:a}},expressionStatement:function(){return{type:t.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},
expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Dd(a))throw ea("lval");a={type:t.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:t.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:t.LogicalExpression,
operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:t.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:t.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:t.BinaryExpression,operator:b.text,
left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:t.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:t.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:t.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},
primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=sa(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:t.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",
this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:t.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:t.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:t.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:t.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());
return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:t.Identifier,name:a.text}},constant:function(){return{type:t.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");
return{type:t.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:t.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),
b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");return{type:t.ObjectExpression,properties:a}},throwError:function(a,b){throw ea("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw ea("ueoe",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw ea("ueoe",
this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,f){if(this.tokens.length>a){a=this.tokens[a];var e=a.text;if(e===b||e===d||e===c||e===f||!(b||d||c||f))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:t.ThisExpression},$locals:{type:t.LocalsExpression}}};Gd.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.state={nextId:0,filters:{},
expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};X(c,d.$filter);var f="",e;this.stage="assign";if(e=Ed(c))this.state.computing="assign",f=this.nextId(),this.recurse(e,f),this.return_(f),f="fn.assign="+this.generateFunction("assign","s,v,l");e=Cd(c.body);d.stage="inputs";q(e,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}};d.state.computing=c;var e=d.nextId();d.recurse(a,e);d.return_(e);d.state.inputs.push(c);a.watchId=b});this.state.computing=
"fn";this.stage="main";this.recurse(c);f='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+f+this.watchFns()+"return fn;";f=(new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",f))(this.$filter,Ua,Ea,td,wg,Jb,Eg,Bd,a);this.state=this.stage=void 0;f.literal=Fd(c);f.constant=c.constant;return f},USE:"use",STRICT:"strict",watchFns:function(){var a=
[],b=this.state.inputs,d=this;q(b,function(b){a.push("var "+b+"="+d.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;q(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+
";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,f,e){var g,h,k=this,l,m,n;c=c||w;if(!e&&x(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,f,!0));else switch(a.type){case t.Program:q(a.body,function(b,c){k.recurse(b.expression,void 0,void 0,function(a){h=a});c!==a.body.length-1?k.current().body.push(h,";"):k.return_(h)});break;case t.Literal:m=this.escape(a.value);this.assign(b,m);c(m);break;
case t.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){h=a});m=a.operator+"("+this.ifDefined(h,0)+")";this.assign(b,m);c(m);break;case t.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){h=a});m="+"===a.operator?this.plus(g,h):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(h,0):"("+g+")"+a.operator+"("+h+")";this.assign(b,m);c(m);break;case t.LogicalExpression:b=b||this.nextId();k.recurse(a.left,b);
k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,b));c(b);break;case t.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));c(b);break;case t.Identifier:b=b||this.nextId();d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);Ua(a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||
"s",function(){f&&1!==f&&k.if_(k.not(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));(k.state.expensiveChecks||Lb(a.name))&&k.addEnsureSafeObject(b);c(b);break;case t.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();k.recurse(a.object,g,void 0,function(){k.if_(k.notNull(g),function(){f&&1!==f&&k.addEnsureSafeAssignContext(g);if(a.computed)h=
k.nextId(),k.recurse(a.property,h),k.getStringValue(h),k.addEnsureSafeMemberName(h),f&&1!==f&&k.if_(k.not(k.computedMember(g,h)),k.lazyAssign(k.computedMember(g,h),"{}")),m=k.ensureSafeObject(k.computedMember(g,h)),k.assign(b,m),d&&(d.computed=!0,d.name=h);else{Ua(a.property.name);f&&1!==f&&k.if_(k.not(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}"));m=k.nonComputedMember(g,a.property.name);if(k.state.expensiveChecks||Lb(a.property.name))m=k.ensureSafeObject(m);
k.assign(b,m);d&&(d.computed=!1,d.name=a.property.name)}},function(){k.assign(b,"undefined")});c(b)},!!f);break;case t.CallExpression:b=b||this.nextId();a.filter?(h=k.filter(a.callee.name),l=[],q(a.arguments,function(a){var b=k.nextId();k.recurse(a,b);l.push(b)}),m=h+"("+l.join(",")+")",k.assign(b,m),c(b)):(h=k.nextId(),g={},l=[],k.recurse(a.callee,h,g,function(){k.if_(k.notNull(h),function(){k.addEnsureSafeFunction(h);q(a.arguments,function(a){k.recurse(a,k.nextId(),void 0,function(a){l.push(k.ensureSafeObject(a))})});
g.name?(k.state.expensiveChecks||k.addEnsureSafeObject(g.context),m=k.member(g.context,g.name,g.computed)+"("+l.join(",")+")"):m=h+"("+l.join(",")+")";m=k.ensureSafeObject(m);k.assign(b,m)},function(){k.assign(b,"undefined")});c(b)}));break;case t.AssignmentExpression:h=this.nextId();g={};this.recurse(a.left,void 0,g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,h);k.addEnsureSafeObject(k.member(g.context,g.name,g.computed));k.addEnsureSafeAssignContext(g.context);m=k.member(g.context,
g.name,g.computed)+a.operator+h;k.assign(b,m);c(b||m)})},1);break;case t.ArrayExpression:l=[];q(a.elements,function(a){k.recurse(a,k.nextId(),void 0,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(m);break;case t.ObjectExpression:l=[];n=!1;q(a.properties,function(a){a.computed&&(n=!0)});n?(b=b||this.nextId(),this.assign(b,"{}"),q(a.properties,function(a){a.computed?(g=k.nextId(),k.recurse(a.key,g)):g=a.key.type===t.Identifier?a.key.name:""+a.key.value;h=k.nextId();k.recurse(a.value,
h);k.assign(k.member(b,g,a.computed),h)})):(q(a.properties,function(b){k.recurse(b.value,a.constant?void 0:k.nextId(),void 0,function(a){l.push(k.escape(b.key.type===t.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m));c(b||m);break;case t.ThisExpression:this.assign(b,"s");c("s");break;case t.LocalsExpression:this.assign(b,"l");c("l");break;case t.NGValueParameter:this.assign(b,"v"),c("v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||
(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;
c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),
";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},
getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,d,c,f,e){var g=this;return function(){g.recurse(a,b,d,c,f,e)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(D(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+
"'";if(ba(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw ea("esc");},nextId:function(a,b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};Hd.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.expression=a;this.expensiveChecks=b;X(c,d.$filter);var f,e;if(f=Ed(c))e=this.recurse(f);f=Cd(c.body);
var g;f&&(g=[],q(f,function(a,b){var c=d.recurse(a);a.input=c;g.push(c);a.watchId=b}));var h=[];q(c.body,function(a){h.push(d.recurse(a.expression))});f=0===c.body.length?w:1===c.body.length?h[0]:function(a,b){var c;q(h,function(d){c=d(a,b)});return c};e&&(f.assign=function(a,b,c){return e(a,c,b)});g&&(f.inputs=g);f.literal=Fd(c);f.constant=c.constant;return f},recurse:function(a,b,d){var c,f,e=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case t.Literal:return this.value(a.value,
b);case t.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,b);case t.BinaryExpression:return c=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](c,f,b);case t.LogicalExpression:return c=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](c,f,b);case t.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case t.Identifier:return Ua(a.name,e.expression),e.identifier(a.name,
e.expensiveChecks||Lb(a.name),b,d,e.expression);case t.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(Ua(a.property.name,e.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(c,f,b,d,e.expression):this.nonComputedMember(c,f,e.expensiveChecks,b,d,e.expression);case t.CallExpression:return g=[],q(a.arguments,function(a){g.push(e.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?
function(a,c,d,e){for(var n=[],r=0;r<g.length;++r)n.push(g[r](a,c,d,e));a=f.apply(void 0,n,e);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,m){var n=f(a,c,d,m),r;if(null!=n.value){Ea(n.context,e.expression);td(n.value,e.expression);r=[];for(var s=0;s<g.length;++s)r.push(Ea(g[s](a,c,d,m),e.expression));r=Ea(n.value.apply(n.context,r),e.expression)}return b?{value:r}:r};case t.AssignmentExpression:return c=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,d,g,m){var n=c(a,
d,g,m);a=f(a,d,g,m);Ea(n.value,e.expression);Jb(n.context);n.context[n.name]=a;return b?{value:a}:a};case t.ArrayExpression:return g=[],q(a.elements,function(a){g.push(e.recurse(a))}),function(a,c,d,e){for(var f=[],r=0;r<g.length;++r)f.push(g[r](a,c,d,e));return b?{value:f}:f};case t.ObjectExpression:return g=[],q(a.properties,function(a){a.computed?g.push({key:e.recurse(a.key),computed:!0,value:e.recurse(a.value)}):g.push({key:a.key.type===t.Identifier?a.key.name:""+a.key.value,computed:!1,value:e.recurse(a.value)})}),
function(a,c,d,e){for(var f={},r=0;r<g.length;++r)g[r].computed?f[g[r].key(a,c,d,e)]=g[r].value(a,c,d,e):f[g[r].key]=g[r].value(a,c,d,e);return b?{value:f}:f};case t.ThisExpression:return function(a){return b?{value:a}:a};case t.LocalsExpression:return function(a,c){return b?{value:c}:c};case t.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,f,e){d=a(d,c,f,e);d=x(d)?+d:0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,f,
e){d=a(d,c,f,e);d=x(d)?-d:0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,f,e){d=!a(d,c,f,e);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,f,e,g){var h=a(c,f,e,g);c=b(c,f,e,g);h=Bd(h,c);return d?{value:h}:h}},"binary-":function(a,b,d){return function(c,f,e,g){var h=a(c,f,e,g);c=b(c,f,e,g);h=(x(h)?h:0)-(x(c)?c:0);return d?{value:h}:h}},"binary*":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)*b(c,f,e,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,
f,e,g){c=a(c,f,e,g)/b(c,f,e,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)%b(c,f,e,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)===b(c,f,e,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)!==b(c,f,e,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)==b(c,f,e,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,
f,e,g){c=a(c,f,e,g)!=b(c,f,e,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)<b(c,f,e,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)>b(c,f,e,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)<=b(c,f,e,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)>=b(c,f,e,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,f,e,g){c=
a(c,f,e,g)&&b(c,f,e,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,f,e,g){c=a(c,f,e,g)||b(c,f,e,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(f,e,g,h){f=a(f,e,g,h)?b(f,e,g,h):d(f,e,g,h);return c?{value:f}:f}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d,c,f){return function(e,g,h,k){e=g&&a in g?g:e;c&&1!==c&&e&&!e[a]&&(e[a]={});g=e?e[a]:void 0;b&&Ea(g,f);return d?{context:e,name:a,
value:g}:g}},computedMember:function(a,b,d,c,f){return function(e,g,h,k){var l=a(e,g,h,k),m,n;null!=l&&(m=b(e,g,h,k),m+="",Ua(m,f),c&&1!==c&&(Jb(l),l&&!l[m]&&(l[m]={})),n=l[m],Ea(n,f));return d?{context:l,name:m,value:n}:n}},nonComputedMember:function(a,b,d,c,f,e){return function(g,h,k,l){g=a(g,h,k,l);f&&1!==f&&(Jb(g),g&&!g[b]&&(g[b]={}));h=null!=g?g[b]:void 0;(d||Lb(b))&&Ea(h,e);return c?{context:g,name:b,value:h}:h}},inputs:function(a,b){return function(d,c,f,e){return e?e[b]:a(d,c,f)}}};var nc=
function(a,b,d){this.lexer=a;this.$filter=b;this.options=d;this.ast=new t(a,d);this.astCompiler=d.csp?new Hd(this.ast,b):new Gd(this.ast,b)};nc.prototype={constructor:nc,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var Fa=G("$sce"),ga={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Hg=G("$compile"),aa=y.document.createElement("a"),Ld=ta(y.location.href);Md.$inject=["$document"];Rc.$inject=["$provide"];var Td=22,Sd=".",pc="0";Nd.$inject=["$locale"];
Pd.$inject=["$locale"];var Sg={yyyy:U("FullYear",4,0,!1,!0),yy:U("FullYear",2,0,!0,!0),y:U("FullYear",1,0,!1,!0),MMMM:nb("Month"),MMM:nb("Month",!0),MM:U("Month",2,1),M:U("Month",1,1),LLLL:nb("Month",!1,!0),dd:U("Date",2),d:U("Date",1),HH:U("Hours",2),H:U("Hours",1),hh:U("Hours",2,-12),h:U("Hours",1,-12),mm:U("Minutes",2),m:U("Minutes",1),ss:U("Seconds",2),s:U("Seconds",1),sss:U("Milliseconds",3),EEEE:nb("Day"),EEE:nb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,
b,d){a=-1*d;return a=(0<=a?"+":"")+(Mb(Math[0<a?"floor":"ceil"](a/60),2)+Mb(Math.abs(a%60),2))},ww:Vd(2),w:Vd(1),G:qc,GG:qc,GGG:qc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},Rg=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Qg=/^-?\d+$/;Od.$inject=["$locale"];var Lg=ha(Q),Mg=ha(wb);Qd.$inject=["$parse"];var Ce=ha({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var f=
"[object SVGAnimatedString]"===ma.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(f)||a.preventDefault()})}}}}),xb={};q(Gb,function(a,b){function d(a,d,f){a.$watch(f[c],function(a){f.$set(b,!!a)})}if("multiple"!==a){var c=Da("ng-"+b),f=d;"checked"===a&&(f=function(a,b,f){f.ngModel!==f[c]&&d(a,b,f)});xb[c]=function(){return{restrict:"A",priority:100,link:f}}}});q(gd,function(a,b){xb[b]=function(){return{priority:100,link:function(a,c,f){if("ngPattern"===b&&"/"===f.ngPattern.charAt(0)&&
(c=f.ngPattern.match(Vg))){f.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(f[b],function(a){f.$set(b,a)})}}}});q(["src","srcset","href"],function(a){var b=Da("ng-"+a);xb[b]=function(){return{priority:99,link:function(d,c,f){var e=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ma.call(c.prop("href"))&&(g="xlinkHref",f.$attr[g]="xlink:href",e=null);f.$observe(b,function(b){b?(f.$set(g,b),Ia&&e&&c.prop(e,f[g])):"href"===a&&f.$set(g,null)})}}}});var Nb={$addControl:w,$$renameControl:function(a,
b){a.$name=b},$removeControl:w,$setValidity:w,$setDirty:w,$setPristine:w,$setSubmitted:w};Wd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var ee=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||w}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Wd,compile:function(d,e){d.addClass(Wa).addClass(rb);var g=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var n=f[0];if(!("action"in
e)){var r=function(b){a.$apply(function(){n.$commitViewValue();n.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",r,!1);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",r,!1)},0,!1)})}(f[1]||n.$$parentForm).$addControl(n);var s=g?c(n.$name):w;g&&(s(a,n),e.$observe(g,function(b){n.$name!==b&&(s(a,void 0),n.$$parentForm.$$renameControl(n,b),s=c(n.$name),s(a,n))}));d.on("$destroy",function(){n.$$parentForm.$removeControl(n);s(a,void 0);R(n,Nb)})}}}}}]},De=
ee(),Pe=ee(!0),Tg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ch=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,dh=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Ug=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,fe=/^(\d{4,})-(\d{2})-(\d{2})$/,ge=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,
wc=/^(\d{4,})-W(\d\d)$/,he=/^(\d{4,})-(\d\d)$/,ie=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Yd=V();q(["date","datetime-local","month","time","week"],function(a){Yd[a]=!0});var je={text:function(a,b,d,c,f,e){Xa(a,b,d,c,f,e);sc(c)},date:ob("date",fe,Pb(fe,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ob("datetimelocal",ge,Pb(ge,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:ob("time",ie,Pb(ie,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ob("week",wc,function(a,b){if(ja(a))return a;
if(D(a)){wc.lastIndex=0;var d=wc.exec(a);if(d){var c=+d[1],f=+d[2],e=d=0,g=0,h=0,k=Ud(c),f=7*(f-1);b&&(d=b.getHours(),e=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(c,0,k.getDate()+f,d,e,g,h)}}return NaN},"yyyy-Www"),month:ob("month",he,Pb(he,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,f,e){tc(a,b,d,c);Xa(a,b,d,c,f,e);Zd(c);var g,h;if(x(d.min)||d.ngMin)c.$validators.min=function(a){return c.$isEmpty(a)||z(g)||a>=g},d.$observe("min",function(a){g=qb(a);c.$validate()});
if(x(d.max)||d.ngMax)c.$validators.max=function(a){return c.$isEmpty(a)||z(h)||a<=h},d.$observe("max",function(a){h=qb(a);c.$validate()})},url:function(a,b,d,c,f,e){Xa(a,b,d,c,f,e);sc(c);c.$$parserName="url";c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||ch.test(d)}},email:function(a,b,d,c,f,e){Xa(a,b,d,c,f,e);sc(c);c.$$parserName="email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||dh.test(d)}},radio:function(a,b,d,c){z(d.name)&&b.attr("name",++sb);b.on("click",
function(a){b[0].checked&&c.$setViewValue(d.value,a&&a.type)});c.$render=function(){b[0].checked=d.value==c.$viewValue};d.$observe("value",c.$render)},range:function(a,b,d,c,f,e){function g(a,c){b.attr(a,d[a]);d.$observe(a,c)}function h(a){n=qb(a);ia(c.$modelValue)||(m?(a=b.val(),n>a&&(a=n,b.val(a)),c.$setViewValue(a)):c.$validate())}function k(a){r=qb(a);ia(c.$modelValue)||(m?(a=b.val(),r<a&&(b.val(r),a=r<n?n:r),c.$setViewValue(a)):c.$validate())}function l(a){s=qb(a);ia(c.$modelValue)||(m&&c.$viewValue!==
b.val()?c.$setViewValue(b.val()):c.$validate())}tc(a,b,d,c);Zd(c);Xa(a,b,d,c,f,e);var m=c.$$hasNativeValidators&&"range"===b[0].type,n=m?0:void 0,r=m?100:void 0,s=m?1:void 0,q=b[0].validity;a=x(d.min);f=x(d.max);e=x(d.step);var u=c.$render;c.$render=m&&x(q.rangeUnderflow)&&x(q.rangeOverflow)?function(){u();c.$setViewValue(b.val())}:u;a&&(c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||z(n)||b>=n},g("min",h));f&&(c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||
z(r)||b<=r},g("max",k));e&&(c.$validators.step=m?function(){return!q.stepMismatch}:function(a,b){var d;if(!(d=c.$isEmpty(b)||z(s))){d=n||0;var e=s,f=Number(b);if((f|0)!==f||(d|0)!==d||(e|0)!==e){var g=Math.max(uc(f),uc(d),uc(e)),g=Math.pow(10,g),f=f*g;d*=g;e*=g}d=0===(f-d)%e}return d},g("step",l))},checkbox:function(a,b,d,c,f,e,g,h){var k=$d(h,a,"ngTrueValue",d.ngTrueValue,!0),l=$d(h,a,"ngFalseValue",d.ngFalseValue,!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=
c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return na(a,k)});c.$parsers.push(function(a){return a?k:l})},hidden:w,button:w,submit:w,reset:w,file:w},Lc=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(f,e,g,h){if(h[0]){var k=Q(g.type);"range"!==k||g.hasOwnProperty("ngInputRange")||(k="text");(je[k]||je.text)(f,e,g,h[0],b,a,d,c)}}}}}],eh=/^(true|false|\d+)$/,gf=function(){return{restrict:"A",
priority:100,compile:function(a,b){return eh.test(b.ngValue)?function(a,b,f){f.$set("value",a.$eval(f.ngValue))}:function(a,b,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},He=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,f){a.$$addBindingInfo(c,f.ngBind);c=c[0];b.$watch(f.ngBind,function(a){c.textContent=z(a)?"":a})}}}}],Je=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,
d,e){c=a(d.attr(e.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];e.$observe("ngBindTemplate",function(a){d.textContent=z(a)?"":a})}}}}],Ie=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,f){var e=b(f.ngBindHtml),g=b(f.ngBindHtml,function(b){return a.valueOf(b)});d.$$addBindingClass(c);return function(b,c,f){d.$$addBindingInfo(c,f.ngBindHtml);b.$watch(g,function(){var d=e(b);c.html(a.getTrustedHtml(d)||"")})}}}}],ff=ha({restrict:"A",require:"ngModel",
link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),Ke=vc("",!0),Me=vc("Odd",0),Le=vc("Even",1),Ne=Va({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Oe=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Qc={},fh={blur:!0,focus:!0};q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Da("ng-"+a);
Qc[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(f,e){var g=d(e[b],null,!0);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};fh[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Re=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,f,e,g){var h,k,l;d.$watch(f.ngIf,function(d){d?k||g(function(d,e){k=e;d[d.length++]=b.$$createComment("end ngIf",
f.ngIf);h={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),k&&(k.$destroy(),k=null),h&&(l=vb(h.clone),a.leave(l).done(function(a){!1!==a&&(l=null)}),h=null))})}}}],Se=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:$.noop,compile:function(c,f){var e=f.ngInclude||f.src,g=f.onload||"",h=f.autoscroll;return function(c,f,m,n,r){var q=0,t,u,p,z=function(){u&&(u.remove(),u=null);t&&(t.$destroy(),t=null);
p&&(d.leave(p).done(function(a){!1!==a&&(u=null)}),u=p,p=null)};c.$watch(e,function(e){var m=function(a){!1===a||!x(h)||h&&!c.$eval(h)||b()},u=++q;e?(a(e,!0).then(function(a){if(!c.$$destroyed&&u===q){var b=c.$new();n.template=a;a=r(b,function(a){z();d.enter(a,null,f).done(m)});t=b;p=a;t.$emit("$includeContentLoaded",e);c.$eval(g)}},function(){c.$$destroyed||u!==q||(z(),c.$emit("$includeContentError",e))}),c.$emit("$includeContentRequested",e)):(z(),n.template=null)})}}}}],jf=["$compile",function(a){return{restrict:"ECA",
priority:-400,require:"ngInclude",link:function(b,d,c,f){ma.call(d[0]).match(/SVG/)?(d.empty(),a(Tc(f.template,y.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),a(d.contents())(b))}}}],Te=Va({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),ef=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var f=b.attr(d.$attr.ngList)||", ",e="false"!==d.ngTrim,g=e?Y(f):f;c.$parsers.push(function(a){if(!z(a)){var b=
[];a&&q(a.split(g),function(a){a&&b.push(e?Y(a):a)});return b}});c.$formatters.push(function(a){if(I(a))return a.join(f)});c.$isEmpty=function(a){return!a||!a.length}}}},rb="ng-valid",ae="ng-invalid",Wa="ng-pristine",Ob="ng-dirty",ce="ng-pending",pb=G("ngModel"),gh=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,c,f,e,g,h,k,l){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};
this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=l(d.name||"",!1)(a);this.$$parentForm=Nb;var m=f(d.ngModel),n=m.assign,r=m,s=n,t=null,u,p=this;this.$$setOptions=function(a){if((p.$options=a)&&a.getterSetter){var b=f(d.ngModel+"()"),e=f(d.ngModel+"($$$p)");r=function(a){var c=m(a);C(c)&&(c=b(a));
return c};s=function(a,b){C(m(a))?e(a,{$$$p:b}):n(a,b)}}else if(!m.assign)throw pb("nonassign",d.ngModel,ya(c));};this.$render=w;this.$isEmpty=function(a){return z(a)||""===a||null===a||a!==a};this.$$updateEmptyClasses=function(a){p.$isEmpty(a)?(e.removeClass(c,"ng-not-empty"),e.addClass(c,"ng-empty")):(e.removeClass(c,"ng-empty"),e.addClass(c,"ng-not-empty"))};var y=0;Xd({ctrl:this,$element:c,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:e});this.$setPristine=function(){p.$dirty=
!1;p.$pristine=!0;e.removeClass(c,Ob);e.addClass(c,Wa)};this.$setDirty=function(){p.$dirty=!0;p.$pristine=!1;e.removeClass(c,Wa);e.addClass(c,Ob);p.$$parentForm.$setDirty()};this.$setUntouched=function(){p.$touched=!1;p.$untouched=!0;e.setClass(c,"ng-untouched","ng-touched")};this.$setTouched=function(){p.$touched=!0;p.$untouched=!1;e.setClass(c,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){g.cancel(t);p.$viewValue=p.$$lastCommittedViewValue;p.$render()};this.$validate=function(){if(!ia(p.$modelValue)){var a=
p.$$rawModelValue,b=p.$valid,c=p.$modelValue,d=p.$options&&p.$options.allowInvalid;p.$$runValidators(a,p.$$lastCommittedViewValue,function(e){d||b===e||(p.$modelValue=e?a:void 0,p.$modelValue!==c&&p.$$writeModelToScope())})}};this.$$runValidators=function(a,b,c){function d(){var c=!0;q(p.$validators,function(d,e){var g=d(a,b);c=c&&g;f(e,g)});return c?!0:(q(p.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;q(p.$asyncValidators,function(e,g){var h=e(a,b);if(!h||!C(h.then))throw pb("nopromise",
h);f(g,void 0);c.push(h.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});c.length?k.all(c).then(function(){g(d)},w):g(!0)}function f(a,b){h===y&&p.$setValidity(a,b)}function g(a){h===y&&c(a)}y++;var h=y;(function(){var a=p.$$parserName||"parse";if(z(u))f(a,null);else return u||(q(p.$validators,function(a,b){f(b,null)}),q(p.$asyncValidators,function(a,b){f(b,null)})),f(a,u),u;return!0})()?d()?e():g(!1):g(!1)};this.$commitViewValue=function(){var a=p.$viewValue;g.cancel(t);if(p.$$lastCommittedViewValue!==
a||""===a&&p.$$hasNativeValidators)p.$$updateEmptyClasses(a),p.$$lastCommittedViewValue=a,p.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=p.$$lastCommittedViewValue;if(u=z(b)?void 0:!0)for(var c=0;c<p.$parsers.length;c++)if(b=p.$parsers[c](b),z(b)){u=!1;break}ia(p.$modelValue)&&(p.$modelValue=r(a));var d=p.$modelValue,e=p.$options&&p.$options.allowInvalid;p.$$rawModelValue=b;e&&(p.$modelValue=b,p.$modelValue!==d&&p.$$writeModelToScope());p.$$runValidators(b,
p.$$lastCommittedViewValue,function(a){e||(p.$modelValue=a?b:void 0,p.$modelValue!==d&&p.$$writeModelToScope())})};this.$$writeModelToScope=function(){s(a,p.$modelValue);q(p.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})};this.$setViewValue=function(a,b){p.$viewValue=a;p.$options&&!p.$options.updateOnDefault||p.$$debounceViewValueCommit(b)};this.$$debounceViewValueCommit=function(b){var c=0,d=p.$options;d&&x(d.debounce)&&(d=d.debounce,ba(d)?c=d:ba(d[b])?c=d[b]:ba(d["default"])&&(c=d["default"]));
g.cancel(t);c?t=g(function(){p.$commitViewValue()},c):h.$$phase?p.$commitViewValue():a.$apply(function(){p.$commitViewValue()})};a.$watch(function(){var b=r(a);if(b!==p.$modelValue&&(p.$modelValue===p.$modelValue||b===b)){p.$modelValue=p.$$rawModelValue=b;u=void 0;for(var c=p.$formatters,d=c.length,e=b;d--;)e=c[d](e);p.$viewValue!==e&&(p.$$updateEmptyClasses(e),p.$viewValue=p.$$lastCommittedViewValue=e,p.$render(),p.$$runValidators(p.$modelValue,p.$viewValue,w))}return b})}],df=["$rootScope",function(a){return{restrict:"A",
require:["ngModel","^?form","^?ngModelOptions"],controller:gh,priority:1,compile:function(b){b.addClass(Wa).addClass("ng-untouched").addClass(rb);return{pre:function(a,b,f,e){var g=e[0];b=e[1]||g.$$parentForm;g.$$setOptions(e[2]&&e[2].$options);b.$addControl(g);f.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,f,e){var g=e[0];if(g.$options&&g.$options.updateOn)c.on(g.$options.updateOn,
function(a){g.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(){g.$touched||(a.$$phase?b.$evalAsync(g.$setTouched):b.$apply(g.$setTouched))})}}}}}],hh=/(\s+|^)default(\s+|$)/,hf=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=sa(a.$eval(b.ngModelOptions));x(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Y(this.$options.updateOn.replace(hh,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=
!0}]}},Ue=Va({terminal:!0,priority:1E3}),ih=G("ngOptions"),jh=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,bf=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!q&&la(a))b=a;else{b=
[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var n=a.match(jh);if(!n)throw ih("iexp",a,ya(b));var r=n[5]||n[7],q=n[6];a=/ as /.test(n[0])&&n[1];var t=n[9];b=d(n[2]?n[1]:r);var u=a&&d(a)||b,p=t&&d(t),x=t?function(a,b){return p(c,b)}:function(a){return Aa(a)},A=function(a,b){return x(a,C(a,b))},v=d(n[2]||n[1]),z=d(n[3]||""),L=d(n[4]||""),w=d(n[8]),y={},C=q?function(a,b){y[q]=b;y[r]=a;return y}:function(a){y[r]=a;return y};return{trackBy:t,getTrackByValue:A,getWatchables:d(w,
function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var h=a===d?g:d[g],l=a[h],h=C(l,h),l=x(l,h);b.push(l);if(n[2]||n[1])l=v(c,h),b.push(l);n[4]&&(h=L(c,h),b.push(h))}return b}),getOptions:function(){for(var a=[],b={},d=w(c)||[],g=f(d),h=g.length,n=0;n<h;n++){var p=d===g?n:g[n],r=C(d[p],p),q=u(c,r),p=x(q,r),s=v(c,r),y=z(c,r),r=L(c,r),q=new e(p,q,s,y,r);a.push(q);b[p]=q}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[A(a)]},getViewValueFromOption:function(a){return t?
sa(a.viewValue):a.viewValue}}}}}var f=y.document.createElement("option"),e=y.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=w},post:function(d,h,k,l){function m(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}function n(){var a=w&&r.readValue();if(w)for(var b=w.items.length-1;0<=b;b--){var c=w.items[b];x(c.group)?Fb(c.element.parentNode):
Fb(c.element)}w=C.getOptions();var d={};A&&h.prepend(u);w.items.forEach(function(a){var b;if(x(a.group)){b=d[a.group];b||(b=e.cloneNode(!1),D.appendChild(b),b.label=null===a.group?"null":a.group,d[a.group]=b);var c=f.cloneNode(!1)}else b=D,c=f.cloneNode(!1);b.appendChild(c);m(a,c)});h[0].appendChild(D);s.$render();s.$isEmpty(a)||(b=r.readValue(),(C.trackBy||t?na(a,b):a===b)||(s.$setViewValue(b),s.$render()))}var r=l[0],s=l[1],t=k.multiple,u;l=0;for(var p=h.children(),z=p.length;l<z;l++)if(""===p[l].value){u=
p.eq(l);break}var A=!!u,v=!1,y=F(f.cloneNode(!1));y.val("?");var w,C=c(k.ngOptions,h,d),D=b[0].createDocumentFragment(),E=function(){A?v&&u.removeAttr("selected"):u.remove()};t?(s.$isEmpty=function(a){return!a||0===a.length},r.writeValue=function(a){w.items.forEach(function(a){a.element.selected=!1});a&&a.forEach(function(a){if(a=w.getOptionFromViewValue(a))a.element.selected=!0})},r.readValue=function(){var a=h.val()||[],b=[];q(a,function(a){(a=w.selectValueMap[a])&&!a.disabled&&b.push(w.getViewValueFromOption(a))});
return b},C.trackBy&&d.$watchCollection(function(){if(I(s.$viewValue))return s.$viewValue.map(function(a){return C.getTrackByValue(a)})},function(){s.$render()})):(r.writeValue=function(a){var b=w.selectValueMap[h.val()],c=w.getOptionFromViewValue(a);b&&b.element.removeAttribute("selected");c?(h[0].value!==c.selectValue&&(y.remove(),E(),h[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):null===a||A?(y.remove(),A||h.prepend(u),h.val(""),v&&(u.prop("selected",
!0),u.attr("selected",!0))):(E(),h.prepend(y),h.val("?"),y.prop("selected",!0),y.attr("selected",!0))},r.readValue=function(){var a=w.selectValueMap[h.val()];return a&&!a.disabled?(E(),y.remove(),w.getViewValueFromOption(a)):null},C.trackBy&&d.$watch(function(){return C.getTrackByValue(s.$viewValue)},function(){s.$render()}));A?(u.remove(),a(u)(d),8===u[0].nodeType?(v=!1,r.registerOption=function(a,b){""===b.val()&&(v=!0,u=b,u.removeClass("ng-scope"),s.$render(),b.on("$destroy",function(){u=void 0;
v=!1}))}):(u.removeClass("ng-scope"),v=!0)):u=F(f.cloneNode(!1));h.empty();n();d.$watchCollection(C.getWatchables,n)}}}}],Ve=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(e,g,h){function k(a){g.text(a||"")}var l=h.count,m=h.$attr.when&&g.attr(h.$attr.when),n=h.offset||0,r=e.$eval(m)||{},s={},t=b.startSymbol(),u=b.endSymbol(),p=t+l+"-"+n+u,x=$.noop,A;q(h,function(a,b){var c=f.exec(b);c&&(c=(c[1]?"-":"")+Q(c[2]),r[c]=g.attr(h.$attr[b]))});q(r,
function(a,d){s[d]=b(a.replace(c,p))});e.$watch(l,function(b){var c=parseFloat(b),f=ia(c);f||c in r||(c=a.pluralCat(c-n));c===A||f&&ia(A)||(x(),f=s[c],z(f)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),x=w,k()):x=e.$watch(f,k),A=c)})}}}],We=["$parse","$animate","$compile",function(a,b,d){var c=G("ngRepeat"),f=function(a,b,c,d,f,m,n){a[c]=d;f&&(a[f]=m);a.$index=b;a.$first=0===b;a.$last=b===n-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,
transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(e,g){var h=g.ngRepeat,k=d.$$createComment("end ngRepeat",h),l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw c("iexp",h);var m=l[1],n=l[2],r=l[3],s=l[4],l=m.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!l)throw c("iidexp",m);var t=l[3]||l[1],u=l[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw c("badident",
r);var p,x,A,v,w={$id:Aa};s?p=a(s):(A=function(a,b){return Aa(b)},v=function(a){return a});return function(a,d,e,g,l){p&&(x=function(b,c,d){u&&(w[u]=b);w[t]=c;w.$index=d;return p(a,w)});var m=V();a.$watchCollection(n,function(e){var g,n,p=d[0],s,w=V(),z,y,C,D,F,E,G;r&&(a[r]=e);if(la(e))F=e,n=x||A;else for(G in n=x||v,F=[],e)ua.call(e,G)&&"$"!==G.charAt(0)&&F.push(G);z=F.length;G=Array(z);for(g=0;g<z;g++)if(y=e===F?g:F[g],C=e[y],D=n(y,C,g),m[D])E=m[D],delete m[D],w[D]=E,G[g]=E;else{if(w[D])throw q(G,
function(a){a&&a.scope&&(m[a.id]=a)}),c("dupes",h,D,C);G[g]={id:D,scope:void 0,clone:void 0};w[D]=!0}for(s in m){E=m[s];D=vb(E.clone);b.leave(D);if(D[0].parentNode)for(g=0,n=D.length;g<n;g++)D[g].$$NG_REMOVED=!0;E.scope.$destroy()}for(g=0;g<z;g++)if(y=e===F?g:F[g],C=e[y],E=G[g],E.scope){s=p;do s=s.nextSibling;while(s&&s.$$NG_REMOVED);E.clone[0]!==s&&b.move(vb(E.clone),null,p);p=E.clone[E.clone.length-1];f(E.scope,g,t,C,u,y,z)}else l(function(a,c){E.scope=c;var d=k.cloneNode(!1);a[a.length++]=d;b.enter(a,
null,p);p=d;E.clone=a;w[E.id]=E;f(E.scope,g,t,C,u,y,z)});m=w})}}}}],Xe=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Qe=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ye=Va(function(a,b,d){a.$watch(d.ngStyle,function(a,
d){d&&a!==d&&q(d,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),Ze=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,f,e){var g=[],h=[],k=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(f.ngSwitch||f.on,function(c){for(var d,f;k.length;)a.cancel(k.pop());d=0;for(f=l.length;d<f;++d){var t=vb(h[d].clone);l[d].$destroy();(k[d]=a.leave(t)).done(m(k,d))}h.length=0;l.length=0;(g=e.cases["!"+c]||e.cases["?"])&&
q(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],$e=Va({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,f){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a});q(a,function(a){c.cases["!"+a]=c.cases["!"+a]||[];c.cases["!"+a].push({transclude:f,element:b})})}}),af=Va({transclude:"element",
priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,f){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:f,element:b})}}),kh=G("ngTransclude"),cf=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var d=a(b.contents());b.empty();return function(a,b,e,g,h){function k(){d(a,function(a){b.append(a)})}if(!h)throw kh("orphan",ya(b));e.ngTransclude===e.$attr.ngTransclude&&(e.ngTransclude="");e=e.ngTransclude||e.ngTranscludeSlot;h(function(a,c){a.length?
b.append(a):(k(),c.$destroy())},null,e);e&&!h.isSlotFilled(e)&&k()}}}}],Ee=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"===d.type&&a.put(d.id,b[0].text)}}}],lh={$setViewValue:w,$render:w},mh=["$element","$scope",function(a,b){var d=this,c=new Sa;d.ngModelCtrl=lh;d.unknownOption=F(y.document.createElement("option"));d.renderUnknownOption=function(b){b="? "+Aa(b)+" ?";d.unknownOption.val(b);a.prepend(d.unknownOption);a.val(b)};b.$on("$destroy",
function(){d.renderUnknownOption=w});d.removeUnknownOption=function(){d.unknownOption.parent()&&d.unknownOption.remove()};d.readValue=function(){d.removeUnknownOption();return a.val()};d.writeValue=function(b){d.hasOption(b)?(d.removeUnknownOption(),a.val(b),""===b&&d.emptyOption.prop("selected",!0)):null==b&&d.emptyOption?(d.removeUnknownOption(),a.val("")):d.renderUnknownOption(b)};d.addOption=function(a,b){if(8!==b[0].nodeType){Ra(a,'"option value"');""===a&&(d.emptyOption=b);var g=c.get(a)||0;
c.put(a,g+1);d.ngModelCtrl.$render();b[0].hasAttribute("selected")&&(b[0].selected=!0)}};d.removeOption=function(a){var b=c.get(a);b&&(1===b?(c.remove(a),""===a&&(d.emptyOption=void 0)):c.put(a,b-1))};d.hasOption=function(a){return!!c.get(a)};d.registerOption=function(a,b,c,h,k){if(h){var l;c.$observe("value",function(a){x(l)&&d.removeOption(l);l=a;d.addOption(a,b)})}else k?a.$watch(k,function(a,f){c.$set("value",a);f!==a&&d.removeOption(f);d.addOption(a,b)}):d.addOption(c.value,b);b.on("$destroy",
function(){d.removeOption(c.value);d.ngModelCtrl.$render()})}}],Fe=function(){return{restrict:"E",require:["select","?ngModel"],controller:mh,priority:1,link:{pre:function(a,b,d,c){var f=c[1];if(f){var e=c[0];e.ngModelCtrl=f;b.on("change",function(){a.$apply(function(){f.$setViewValue(e.readValue())})});if(d.multiple){e.readValue=function(){var a=[];q(b.find("option"),function(b){b.selected&&a.push(b.value)});return a};e.writeValue=function(a){var c=new Sa(a);q(b.find("option"),function(a){a.selected=
x(c.get(a.value))})};var g,h=NaN;a.$watch(function(){h!==f.$viewValue||na(g,f.$viewValue)||(g=ka(f.$viewValue),f.$render());h=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}},post:function(a,b,d,c){var f=c[1];if(f){var e=c[0];f.$render=function(){e.writeValue(f.$viewValue)}}}}}},Ge=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){var c,f;x(d.ngValue)?c=!0:x(d.value)?c=a(d.value,!0):(f=a(b.text(),!0))||d.$set("value",b.text());return function(a,b,d){var k=
b.parent();(k=k.data("$selectController")||k.parent().data("$selectController"))&&k.registerOption(a,b,d,c,f)}}}}],Nc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},Mc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var f,e=d.ngPattern||d.pattern;d.$observe("pattern",function(a){D(a)&&0<a.length&&(a=
new RegExp("^"+a+"$"));if(a&&!a.test)throw G("ngPattern")("noregexp",e,a,ya(b));f=a||void 0;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||z(f)||f.test(b)}}}}},Pc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var f=-1;d.$observe("maxlength",function(a){a=Z(a);f=ia(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>f||c.$isEmpty(b)||b.length<=f}}}}},Oc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,
d,c){if(c){var f=0;d.$observe("minlength",function(a){f=Z(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=f}}}}};y.angular.bootstrap?y.console&&console.log("WARNING: Tried to load angular more than once."):(xe(),ze($),$.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",
mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var f=a|0,e=c;void 0===e&&(e=Math.min(b(a),3));Math.pow(10,e);return 1==f&&0==
e?"one":"other"}})}]),F(y.document).ready(function(){se(y.document,Gc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');


!function(window,angular){"use strict";function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function packageStyles(options){var styles={};return options&&(options.to||options.from)&&(styles.to=options.to,styles.from=options.from),styles}function pendClasses(classes,fix,isPrefix){var className="";return classes=isArray(classes)?classes:classes&&isString(classes)&&classes.length?classes.split(/\s+/):[],forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=i>0?" ":"",className+=isPrefix?fix+klass:klass+fix)}),className}function removeFromArray(arr,val){var index=arr.indexOf(val);val>=0&&arr.splice(index,1)}function stripCommentsFromElement(element){if(element instanceof jqLite)switch(element.length){case 0:return element;case 1:if(element[0].nodeType===ELEMENT_NODE)return element;break;default:return jqLite(extractElementNode(element))}return element.nodeType===ELEMENT_NODE?jqLite(element):void 0}function extractElementNode(element){if(!element[0])return element;for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}function $$addClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.addClass(elm,className)})}function $$removeClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.removeClass(elm,className)})}function applyAnimationClassesFactory($$jqLite){return function(element,options){options.addClass&&($$addClass($$jqLite,element,options.addClass),options.addClass=null),options.removeClass&&($$removeClass($$jqLite,element,options.removeClass),options.removeClass=null)}}function prepareAnimationOptions(options){if(options=options||{},!options.$$prepared){var domOperation=options.domOperation||noop;options.domOperation=function(){options.$$domOperationFired=!0,domOperation(),domOperation=noop},options.$$prepared=!0}return options}function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options),applyAnimationToStyles(element,options)}function applyAnimationFromStyles(element,options){options.from&&(element.css(options.from),options.from=null)}function applyAnimationToStyles(element,options){options.to&&(element.css(options.to),options.to=null)}function mergeAnimationDetails(element,oldAnimation,newAnimation){var target=oldAnimation.options||{},newOptions=newAnimation.options||{},toAdd=(target.addClass||"")+" "+(newOptions.addClass||""),toRemove=(target.removeClass||"")+" "+(newOptions.removeClass||""),classes=resolveElementClasses(element.attr("class"),toAdd,toRemove);newOptions.preparationClasses&&(target.preparationClasses=concatWithSpace(newOptions.preparationClasses,target.preparationClasses),delete newOptions.preparationClasses);var realDomOperation=target.domOperation!==noop?target.domOperation:null;return extend(target,newOptions),realDomOperation&&(target.domOperation=realDomOperation),classes.addClass?target.addClass=classes.addClass:target.addClass=null,classes.removeClass?target.removeClass=classes.removeClass:target.removeClass=null,oldAnimation.addClass=target.addClass,oldAnimation.removeClass=target.removeClass,target}function resolveElementClasses(existing,toAdd,toRemove){function splitClassesToLookup(classes){isString(classes)&&(classes=classes.split(" "));var obj={};return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}var ADD_CLASS=1,REMOVE_CLASS=-1,flags={};existing=splitClassesToLookup(existing),toAdd=splitClassesToLookup(toAdd),forEach(toAdd,function(value,key){flags[key]=ADD_CLASS}),toRemove=splitClassesToLookup(toRemove),forEach(toRemove,function(value,key){flags[key]=flags[key]===ADD_CLASS?null:REMOVE_CLASS});var classes={addClass:"",removeClass:""};return forEach(flags,function(val,klass){var prop,allow;val===ADD_CLASS?(prop="addClass",allow=!existing[klass]||existing[klass+REMOVE_CLASS_SUFFIX]):val===REMOVE_CLASS&&(prop="removeClass",allow=existing[klass]||existing[klass+ADD_CLASS_SUFFIX]),allow&&(classes[prop].length&&(classes[prop]+=" "),classes[prop]+=klass)}),classes}function getDomNode(element){return element instanceof jqLite?element[0]:element}function applyGeneratedPreparationClasses(element,event,options){var classes="";event&&(classes=pendClasses(event,EVENT_CLASS_PREFIX,!0)),options.addClass&&(classes=concatWithSpace(classes,pendClasses(options.addClass,ADD_CLASS_SUFFIX))),options.removeClass&&(classes=concatWithSpace(classes,pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX))),classes.length&&(options.preparationClasses=classes,element.addClass(classes))}function clearGeneratedClasses(element,options){options.preparationClasses&&(element.removeClass(options.preparationClasses),options.preparationClasses=null),options.activeClasses&&(element.removeClass(options.activeClasses),options.activeClasses=null)}function blockTransitions(node,duration){var value=duration?"-"+duration+"s":"";return applyInlineStyle(node,[TRANSITION_DELAY_PROP,value]),[TRANSITION_DELAY_PROP,value]}function blockKeyframeAnimations(node,applyBlock){var value=applyBlock?"paused":"",key=ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY;return applyInlineStyle(node,[key,value]),[key,value]}function applyInlineStyle(node,styleTuple){var prop=styleTuple[0],value=styleTuple[1];node.style[prop]=value}function concatWithSpace(a,b){return a?b?a+" "+b:a:b}function getCssKeyframeDurationStyle(duration){return[ANIMATION_DURATION_PROP,duration+"s"]}function getCssDelayStyle(delay,isKeyframeAnimation){var prop=isKeyframeAnimation?ANIMATION_DELAY_PROP:TRANSITION_DELAY_PROP;return[prop,delay+"s"]}function computeCssStyles($window,element,properties){var styles=Object.create(null),detectedStyles=$window.getComputedStyle(element)||{};return forEach(properties,function(formalStyleName,actualStyleName){var val=detectedStyles[formalStyleName];if(val){var c=val.charAt(0);("-"===c||"+"===c||c>=0)&&(val=parseMaxTime(val)),0===val&&(val=null),styles[actualStyleName]=val}}),styles}function parseMaxTime(str){var maxValue=0,values=str.split(/\s*,\s*/);return forEach(values,function(value){"s"===value.charAt(value.length-1)&&(value=value.substring(0,value.length-1)),value=parseFloat(value)||0,maxValue=maxValue?Math.max(value,maxValue):value}),maxValue}function truthyTimingValue(val){return 0===val||null!=val}function getCssTransitionDurationStyle(duration,applyOnlyDuration){var style=TRANSITION_PROP,value=duration+"s";return applyOnlyDuration?style+=DURATION_KEY:value+=" linear all",[style,value]}function createLocalCacheLookup(){var cache=Object.create(null);return{flush:function(){cache=Object.create(null)},count:function(key){var entry=cache[key];return entry?entry.total:0},get:function(key){var entry=cache[key];return entry&&entry.value},put:function(key,value){cache[key]?cache[key].total++:cache[key]={total:1,value:value}}}}function registerRestorableStyles(backup,node,properties){forEach(properties,function(prop){backup[prop]=isDefined(backup[prop])?backup[prop]:node.style.getPropertyValue(prop)})}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,ELEMENT_NODE=1,ADD_CLASS_SUFFIX="-add",REMOVE_CLASS_SUFFIX="-remove",EVENT_CLASS_PREFIX="ng-",ACTIVE_CLASS_SUFFIX="-active",PREPARE_CLASS_SUFFIX="-prepare",NG_ANIMATE_CLASSNAME="ng-animate",NG_ANIMATE_CHILDREN_DATA="$$ngAnimateChildren",CSS_PREFIX="";void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?(CSS_PREFIX="-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend?(CSS_PREFIX="-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var copy,extend,forEach,isArray,isDefined,isElement,isFunction,isObject,isString,isUndefined,jqLite,noop,DURATION_KEY="Duration",PROPERTY_KEY="Property",DELAY_KEY="Delay",TIMING_KEY="TimingFunction",ANIMATION_ITERATION_COUNT_KEY="IterationCount",ANIMATION_PLAYSTATE_KEY="PlayState",SAFE_FAST_FORWARD_DURATION_VALUE=9999,ANIMATION_DELAY_PROP=ANIMATION_PROP+DELAY_KEY,ANIMATION_DURATION_PROP=ANIMATION_PROP+DURATION_KEY,TRANSITION_DELAY_PROP=TRANSITION_PROP+DELAY_KEY,TRANSITION_DURATION_PROP=TRANSITION_PROP+DURATION_KEY,ngMinErr=angular.$$minErr("ng"),$$rAFSchedulerFactory=["$$rAF",function($$rAF){function scheduler(tasks){queue=queue.concat(tasks),nextTick()}function nextTick(){if(queue.length){for(var items=queue.shift(),i=0;i<items.length;i++)items[i]();cancelFn||$$rAF(function(){cancelFn||nextTick()})}}var queue,cancelFn;return queue=scheduler.queue=[],scheduler.waitUntilQuiet=function(fn){cancelFn&&cancelFn(),cancelFn=$$rAF(function(){cancelFn=null,fn(),nextTick()})},scheduler}],$$AnimateChildrenDirective=["$interpolate",function($interpolate){return{link:function(scope,element,attrs){function setData(value){value="on"===value||"true"===value,element.data(NG_ANIMATE_CHILDREN_DATA,value)}var val=attrs.ngAnimateChildren;isString(val)&&0===val.length?element.data(NG_ANIMATE_CHILDREN_DATA,!0):(setData($interpolate(val)(scope)),attrs.$observe("ngAnimateChildren",setData))}}}],ANIMATE_TIMER_KEY="$$animateCss",ONE_SECOND=1e3,ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,DETECT_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,transitionProperty:TRANSITION_PROP+PROPERTY_KEY,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP,animationIterationCount:ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY},DETECT_STAGGER_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP},$AnimateCssProvider=["$animateProvider",function($animateProvider){var gcsLookup=createLocalCacheLookup(),gcsStaggerLookup=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function($window,$$jqLite,$$AnimateRunner,$timeout,$$forceReflow,$sniffer,$$rAFScheduler,$$animateQueue){function gcsHashFn(node,extraClasses){var KEY="$$ngAnimateParentKey",parentNode=node.parentNode,parentID=parentNode[KEY]||(parentNode[KEY]=++parentCounter);return parentID+"-"+node.getAttribute("class")+"-"+extraClasses}function computeCachedCssStyles(node,className,cacheKey,properties){var timings=gcsLookup.get(cacheKey);return timings||(timings=computeCssStyles($window,node,properties),"infinite"===timings.animationIterationCount&&(timings.animationIterationCount=1)),gcsLookup.put(cacheKey,timings),timings}function computeCachedCssStaggerStyles(node,className,cacheKey,properties){var stagger;if(gcsLookup.count(cacheKey)>0&&(stagger=gcsStaggerLookup.get(cacheKey),!stagger)){var staggerClassName=pendClasses(className,"-stagger");$$jqLite.addClass(node,staggerClassName),stagger=computeCssStyles($window,node,properties),stagger.animationDuration=Math.max(stagger.animationDuration,0),stagger.transitionDuration=Math.max(stagger.transitionDuration,0),$$jqLite.removeClass(node,staggerClassName),gcsStaggerLookup.put(cacheKey,stagger)}return stagger||{}}function waitUntilQuiet(callback){rafWaitQueue.push(callback),$$rAFScheduler.waitUntilQuiet(function(){gcsLookup.flush(),gcsStaggerLookup.flush();for(var pageWidth=$$forceReflow(),i=0;i<rafWaitQueue.length;i++)rafWaitQueue[i](pageWidth);rafWaitQueue.length=0})}function computeTimings(node,className,cacheKey){var timings=computeCachedCssStyles(node,className,cacheKey,DETECT_CSS_PROPERTIES),aD=timings.animationDelay,tD=timings.transitionDelay;return timings.maxDelay=aD&&tD?Math.max(aD,tD):aD||tD,timings.maxDuration=Math.max(timings.animationDuration*timings.animationIterationCount,timings.transitionDuration),timings}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite),parentCounter=0,rafWaitQueue=[];return function(element,initialOptions){function endFn(){close()}function cancelFn(){close(!0)}function close(rejected){if(!(animationClosed||animationCompleted&&animationPaused)){animationClosed=!0,animationPaused=!1,options.$$skipPreparationClasses||$$jqLite.removeClass(element,preparationClasses),$$jqLite.removeClass(element,activeClasses),blockKeyframeAnimations(node,!1),blockTransitions(node,!1),forEach(temporaryStyles,function(entry){node.style[entry[0]]=""}),applyAnimationClasses(element,options),applyAnimationStyles(element,options),Object.keys(restoreStyles).length&&forEach(restoreStyles,function(value,prop){value?node.style.setProperty(prop,value):node.style.removeProperty(prop)}),options.onDone&&options.onDone(),events&&events.length&&element.off(events.join(" "),onAnimationProgress);var animationTimerData=element.data(ANIMATE_TIMER_KEY);animationTimerData&&($timeout.cancel(animationTimerData[0].timer),element.removeData(ANIMATE_TIMER_KEY)),runner&&runner.complete(!rejected)}}function applyBlocking(duration){flags.blockTransition&&blockTransitions(node,duration),flags.blockKeyframeAnimation&&blockKeyframeAnimations(node,!!duration)}function closeAndReturnNoopAnimator(){return runner=new $$AnimateRunner({end:endFn,cancel:cancelFn}),waitUntilQuiet(noop),close(),{$$willAnimate:!1,start:function(){return runner},end:endFn}}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&(animationCompleted=!0,close())}function start(){function triggerAnimationStart(){if(!animationClosed){if(applyBlocking(!1),forEach(temporaryStyles,function(entry){var key=entry[0],value=entry[1];node.style[key]=value}),applyAnimationClasses(element,options),$$jqLite.addClass(element,activeClasses),flags.recalculateTimingStyles){if(fullClassName=node.className+" "+preparationClasses,cacheKey=gcsHashFn(node,fullClassName),timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay,maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration,0===maxDuration)return void close();flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0}if(flags.applyAnimationDelay&&(relativeDelay="boolean"!=typeof options.delay&&truthyTimingValue(options.delay)?parseFloat(options.delay):relativeDelay,maxDelay=Math.max(relativeDelay,0),timings.animationDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay,!0),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1]),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.easing){var easeProp,easeVal=options.easing;flags.hasTransitions&&(easeProp=TRANSITION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal),flags.hasAnimations&&(easeProp=ANIMATION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal)}timings.transitionDuration&&events.push(TRANSITIONEND_EVENT),timings.animationDuration&&events.push(ANIMATIONEND_EVENT),startTime=Date.now();var timerTime=maxDelayTime+CLOSING_TIME_BUFFER*maxDurationTime,endTime=startTime+timerTime,animationsData=element.data(ANIMATE_TIMER_KEY)||[],setupFallbackTimer=!0;if(animationsData.length){var currentTimerData=animationsData[0];setupFallbackTimer=endTime>currentTimerData.expectedEndTime,setupFallbackTimer?$timeout.cancel(currentTimerData.timer):animationsData.push(close)}if(setupFallbackTimer){var timer=$timeout(onAnimationExpired,timerTime,!1);animationsData[0]={timer:timer,expectedEndTime:endTime},animationsData.push(close),element.data(ANIMATE_TIMER_KEY,animationsData)}events.length&&element.on(events.join(" "),onAnimationProgress),options.to&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.to)),applyAnimationToStyles(element,options))}}function onAnimationExpired(){var animationsData=element.data(ANIMATE_TIMER_KEY);if(animationsData){for(var i=1;i<animationsData.length;i++)animationsData[i]();element.removeData(ANIMATE_TIMER_KEY)}}if(!animationClosed){if(!node.parentNode)return void close();var playPause=function(playAnimation){if(animationCompleted)animationPaused&&playAnimation&&(animationPaused=!1,close());else if(animationPaused=!playAnimation,timings.animationDuration){var value=blockKeyframeAnimations(node,animationPaused);animationPaused?temporaryStyles.push(value):removeFromArray(temporaryStyles,value)}},maxStagger=itemIndex>0&&(timings.transitionDuration&&0===stagger.transitionDuration||timings.animationDuration&&0===stagger.animationDuration)&&Math.max(stagger.animationDelay,stagger.transitionDelay);maxStagger?$timeout(triggerAnimationStart,Math.floor(maxStagger*itemIndex*ONE_SECOND),!1):triggerAnimationStart(),runnerHost.resume=function(){playPause(!0)},runnerHost.pause=function(){playPause(!1)}}}var options=initialOptions||{};options.$$prepared||(options=prepareAnimationOptions(copy(options)));var restoreStyles={},node=getDomNode(element);if(!node||!node.parentNode||!$$animateQueue.enabled())return closeAndReturnNoopAnimator();var animationClosed,animationPaused,animationCompleted,runner,runnerHost,maxDelay,maxDelayTime,maxDuration,maxDurationTime,startTime,temporaryStyles=[],classes=element.attr("class"),styles=packageStyles(options),events=[];if(0===options.duration||!$sniffer.animations&&!$sniffer.transitions)return closeAndReturnNoopAnimator();var method=options.event&&isArray(options.event)?options.event.join(" "):options.event,isStructural=method&&options.structural,structuralClassName="",addRemoveClassName="";isStructural?structuralClassName=pendClasses(method,EVENT_CLASS_PREFIX,!0):method&&(structuralClassName=method),options.addClass&&(addRemoveClassName+=pendClasses(options.addClass,ADD_CLASS_SUFFIX)),options.removeClass&&(addRemoveClassName.length&&(addRemoveClassName+=" "),addRemoveClassName+=pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX)),options.applyClassesEarly&&addRemoveClassName.length&&applyAnimationClasses(element,options);var preparationClasses=[structuralClassName,addRemoveClassName].join(" ").trim(),fullClassName=classes+" "+preparationClasses,activeClasses=pendClasses(preparationClasses,ACTIVE_CLASS_SUFFIX),hasToStyles=styles.to&&Object.keys(styles.to).length>0,containsKeyframeAnimation=(options.keyframeStyle||"").length>0;if(!containsKeyframeAnimation&&!hasToStyles&&!preparationClasses)return closeAndReturnNoopAnimator();var cacheKey,stagger;if(options.stagger>0){var staggerVal=parseFloat(options.stagger);stagger={transitionDelay:staggerVal,animationDelay:staggerVal,transitionDuration:0,animationDuration:0}}else cacheKey=gcsHashFn(node,fullClassName),stagger=computeCachedCssStaggerStyles(node,preparationClasses,cacheKey,DETECT_STAGGER_CSS_PROPERTIES);options.$$skipPreparationClasses||$$jqLite.addClass(element,preparationClasses);var applyOnlyDuration;if(options.transitionStyle){var transitionStyle=[TRANSITION_PROP,options.transitionStyle];applyInlineStyle(node,transitionStyle),temporaryStyles.push(transitionStyle)}if(options.duration>=0){applyOnlyDuration=node.style[TRANSITION_PROP].length>0;var durationStyle=getCssTransitionDurationStyle(options.duration,applyOnlyDuration);applyInlineStyle(node,durationStyle),temporaryStyles.push(durationStyle)}if(options.keyframeStyle){var keyframeStyle=[ANIMATION_PROP,options.keyframeStyle];applyInlineStyle(node,keyframeStyle),temporaryStyles.push(keyframeStyle)}var itemIndex=stagger?options.staggerIndex>=0?options.staggerIndex:gcsLookup.count(cacheKey):0,isFirst=0===itemIndex;isFirst&&!options.skipBlocking&&blockTransitions(node,SAFE_FAST_FORWARD_DURATION_VALUE);var timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay;maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration;var flags={};if(flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0,flags.hasTransitionAll=flags.hasTransitions&&"all"===timings.transitionProperty,flags.applyTransitionDuration=hasToStyles&&(flags.hasTransitions&&!flags.hasTransitionAll||flags.hasAnimations&&!flags.hasTransitions),flags.applyAnimationDuration=options.duration&&flags.hasAnimations,flags.applyTransitionDelay=truthyTimingValue(options.delay)&&(flags.applyTransitionDuration||flags.hasTransitions),flags.applyAnimationDelay=truthyTimingValue(options.delay)&&flags.hasAnimations,flags.recalculateTimingStyles=addRemoveClassName.length>0,(flags.applyTransitionDuration||flags.applyAnimationDuration)&&(maxDuration=options.duration?parseFloat(options.duration):maxDuration,flags.applyTransitionDuration&&(flags.hasTransitions=!0,timings.transitionDuration=maxDuration,applyOnlyDuration=node.style[TRANSITION_PROP+PROPERTY_KEY].length>0,temporaryStyles.push(getCssTransitionDurationStyle(maxDuration,applyOnlyDuration))),flags.applyAnimationDuration&&(flags.hasAnimations=!0,timings.animationDuration=maxDuration,temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration)))),0===maxDuration&&!flags.recalculateTimingStyles)return closeAndReturnNoopAnimator();if(null!=options.delay){var delayStyle;"boolean"!=typeof options.delay&&(delayStyle=parseFloat(options.delay),maxDelay=Math.max(delayStyle,0)),flags.applyTransitionDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle)),flags.applyAnimationDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle,!0))}return null==options.duration&&timings.transitionDuration>0&&(flags.recalculateTimingStyles=flags.recalculateTimingStyles||isFirst),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.skipBlocking||(flags.blockTransition=timings.transitionDuration>0,flags.blockKeyframeAnimation=timings.animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration),options.from&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.from)),applyAnimationFromStyles(element,options)),flags.blockTransition||flags.blockKeyframeAnimation?applyBlocking(maxDuration):options.skipBlocking||blockTransitions(node,!1),{$$willAnimate:!0,end:endFn,start:function(){return animationClosed?void 0:(runnerHost={end:endFn,cancel:cancelFn,resume:null,pause:null},runner=new $$AnimateRunner(runnerHost),waitUntilQuiet(start),runner)}}}}]}],$$AnimateCssDriverProvider=["$$animationProvider",function($$animationProvider){function isDocumentFragment(node){return node.parentNode&&11===node.parentNode.nodeType}$$animationProvider.drivers.push("$$animateCssDriver");var NG_ANIMATE_SHIM_CLASS_NAME="ng-animate-shim",NG_ANIMATE_ANCHOR_CLASS_NAME="ng-anchor",NG_OUT_ANCHOR_CLASS_NAME="ng-anchor-out",NG_IN_ANCHOR_CLASS_NAME="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function($animateCss,$rootScope,$$AnimateRunner,$rootElement,$sniffer,$$jqLite,$document){function filterCssClasses(classes){return classes.replace(/\bng-\S+\b/g,"")}function getUniqueValues(a,b){return isString(a)&&(a=a.split(" ")),isString(b)&&(b=b.split(" ")),a.filter(function(val){return-1===b.indexOf(val)}).join(" ")}function prepareAnchoredAnimation(classes,outAnchor,inAnchor){function calculateAnchorStyles(anchor){var styles={},coords=getDomNode(anchor).getBoundingClientRect();return forEach(["width","height","top","left"],function(key){var value=coords[key];switch(key){case"top":value+=bodyNode.scrollTop;break;case"left":value+=bodyNode.scrollLeft}styles[key]=Math.floor(value)+"px"}),styles}function prepareOutAnimation(){var animator=$animateCss(clone,{addClass:NG_OUT_ANCHOR_CLASS_NAME,delay:!0,from:calculateAnchorStyles(outAnchor)});return animator.$$willAnimate?animator:null}function getClassVal(element){return element.attr("class")||""}function prepareInAnimation(){var endingClasses=filterCssClasses(getClassVal(inAnchor)),toAdd=getUniqueValues(endingClasses,startingClasses),toRemove=getUniqueValues(startingClasses,endingClasses),animator=$animateCss(clone,{to:calculateAnchorStyles(inAnchor),addClass:NG_IN_ANCHOR_CLASS_NAME+" "+toAdd,removeClass:NG_OUT_ANCHOR_CLASS_NAME+" "+toRemove,delay:!0});return animator.$$willAnimate?animator:null}function end(){clone.remove(),outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME)}var clone=jqLite(getDomNode(outAnchor).cloneNode(!0)),startingClasses=filterCssClasses(getClassVal(clone));outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),clone.addClass(NG_ANIMATE_ANCHOR_CLASS_NAME),rootBodyElement.append(clone);var animatorIn,animatorOut=prepareOutAnimation();if(!animatorOut&&(animatorIn=prepareInAnimation(),!animatorIn))return end();var startingAnimator=animatorOut||animatorIn;return{start:function(){function endFn(){currentAnimation&&currentAnimation.end()}var runner,currentAnimation=startingAnimator.start();return currentAnimation.done(function(){return currentAnimation=null,!animatorIn&&(animatorIn=prepareInAnimation())?(currentAnimation=animatorIn.start(),currentAnimation.done(function(){currentAnimation=null,end(),runner.complete()}),currentAnimation):(end(),void runner.complete())}),runner=new $$AnimateRunner({end:endFn,cancel:endFn})}}}function prepareFromToAnchorAnimation(from,to,classes,anchors){var fromAnimation=prepareRegularAnimation(from,noop),toAnimation=prepareRegularAnimation(to,noop),anchorAnimations=[];return forEach(anchors,function(anchor){var outElement=anchor.out,inElement=anchor["in"],animator=prepareAnchoredAnimation(classes,outElement,inElement);animator&&anchorAnimations.push(animator)}),fromAnimation||toAnimation||0!==anchorAnimations.length?{start:function(){function endFn(){forEach(animationRunners,function(runner){runner.end()})}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),forEach(anchorAnimations,function(animation){animationRunners.push(animation.start())});var runner=new $$AnimateRunner({end:endFn,cancel:endFn});return $$AnimateRunner.all(animationRunners,function(status){runner.complete(status)}),runner}}:void 0}function prepareRegularAnimation(animationDetails){var element=animationDetails.element,options=animationDetails.options||{};animationDetails.structural&&(options.event=animationDetails.event,options.structural=!0,options.applyClassesEarly=!0,"leave"===animationDetails.event&&(options.onDone=options.domOperation)),options.preparationClasses&&(options.event=concatWithSpace(options.event,options.preparationClasses));var animator=$animateCss(element,options);return animator.$$willAnimate?animator:null}if(!$sniffer.animations&&!$sniffer.transitions)return noop;var bodyNode=$document[0].body,rootNode=getDomNode($rootElement),rootBodyElement=jqLite(isDocumentFragment(rootNode)||bodyNode.contains(rootNode)?rootNode:bodyNode);return function(animationDetails){return animationDetails.from&&animationDetails.to?prepareFromToAnchorAnimation(animationDetails.from,animationDetails.to,animationDetails.classes,animationDetails.anchors):prepareRegularAnimation(animationDetails)}}]}],$$AnimateJsProvider=["$animateProvider",function($animateProvider){this.$get=["$injector","$$AnimateRunner","$$jqLite",function($injector,$$AnimateRunner,$$jqLite){function lookupAnimations(classes){classes=isArray(classes)?classes:classes.split(" ");for(var matches=[],flagMap={},i=0;i<classes.length;i++){var klass=classes[i],animationFactory=$animateProvider.$$registeredAnimations[klass];animationFactory&&!flagMap[klass]&&(matches.push($injector.get(animationFactory)),flagMap[klass]=!0)}return matches}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,classes,options){function applyOptions(){options.domOperation(),applyAnimationClasses(element,options)}function close(){animationClosed=!0,applyOptions(),applyAnimationStyles(element,options)}function executeAnimationFn(fn,element,event,options,onDone){var args;switch(event){case"animate":args=[element,options.from,options.to,onDone];break;case"setClass":args=[element,classesToAdd,classesToRemove,onDone];break;case"addClass":args=[element,classesToAdd,onDone];break;case"removeClass":args=[element,classesToRemove,onDone];break;default:args=[element,onDone]}args.push(options);var value=fn.apply(fn,args);if(value)if(isFunction(value.start)&&(value=value.start()),value instanceof $$AnimateRunner)value.done(onDone);else if(isFunction(value))return value;return noop}function groupEventedAnimations(element,event,options,animations,fnName){var operations=[];return forEach(animations,function(ani){var animation=ani[fnName];animation&&operations.push(function(){var runner,endProgressCb,resolved=!1,onAnimationComplete=function(rejected){resolved||(resolved=!0,(endProgressCb||noop)(rejected),runner.complete(!rejected))};return runner=new $$AnimateRunner({end:function(){onAnimationComplete()},cancel:function(){onAnimationComplete(!0)}}),endProgressCb=executeAnimationFn(animation,element,event,options,function(result){var cancelled=result===!1;onAnimationComplete(cancelled)}),runner})}),operations}function packageAnimations(element,event,options,animations,fnName){var operations=groupEventedAnimations(element,event,options,animations,fnName);if(0===operations.length){var a,b;"beforeSetClass"===fnName?(a=groupEventedAnimations(element,"removeClass",options,animations,"beforeRemoveClass"),b=groupEventedAnimations(element,"addClass",options,animations,"beforeAddClass")):"setClass"===fnName&&(a=groupEventedAnimations(element,"removeClass",options,animations,"removeClass"),b=groupEventedAnimations(element,"addClass",options,animations,"addClass")),a&&(operations=operations.concat(a)),b&&(operations=operations.concat(b))}if(0!==operations.length)return function(callback){var runners=[];return operations.length&&forEach(operations,function(animateFn){runners.push(animateFn())}),runners.length?$$AnimateRunner.all(runners,callback):callback(),function(reject){forEach(runners,function(runner){reject?runner.cancel():runner.end()})}}}var animationClosed=!1;3===arguments.length&&isObject(classes)&&(options=classes,classes=null),options=prepareAnimationOptions(options),classes||(classes=element.attr("class")||"",options.addClass&&(classes+=" "+options.addClass),options.removeClass&&(classes+=" "+options.removeClass));var before,after,classesToAdd=options.addClass,classesToRemove=options.removeClass,animations=lookupAnimations(classes);if(animations.length){var afterFn,beforeFn;"leave"===event?(beforeFn="leave",afterFn="afterLeave"):(beforeFn="before"+event.charAt(0).toUpperCase()+event.substr(1),afterFn=event),"enter"!==event&&"move"!==event&&(before=packageAnimations(element,event,options,animations,beforeFn)),after=packageAnimations(element,event,options,animations,afterFn)}if(before||after){var runner;return{$$willAnimate:!0,end:function(){return runner?runner.end():(close(),runner=new $$AnimateRunner,runner.complete(!0)),runner},start:function(){function onComplete(success){close(success),runner.complete(success)}function endAnimations(cancelled){animationClosed||((closeActiveAnimations||noop)(cancelled),onComplete(cancelled))}if(runner)return runner;runner=new $$AnimateRunner;var closeActiveAnimations,chain=[];return before&&chain.push(function(fn){closeActiveAnimations=before(fn)}),chain.length?chain.push(function(fn){applyOptions(),fn(!0)}):applyOptions(),after&&chain.push(function(fn){closeActiveAnimations=after(fn)}),runner.setHost({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}}),$$AnimateRunner.chain(chain,onComplete),runner}}}}}]}],$$AnimateJsDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function($$animateJs,$$AnimateRunner){
function prepareAnimation(animationDetails){var element=animationDetails.element,event=animationDetails.event,options=animationDetails.options,classes=animationDetails.classes;return $$animateJs(element,event,classes,options)}return function(animationDetails){if(animationDetails.from&&animationDetails.to){var fromAnimation=prepareAnimation(animationDetails.from),toAnimation=prepareAnimation(animationDetails.to);if(!fromAnimation&&!toAnimation)return;return{start:function(){function endFnFactory(){return function(){forEach(animationRunners,function(runner){runner.end()})}}function done(status){runner.complete(status)}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),$$AnimateRunner.all(animationRunners,done);var runner=new $$AnimateRunner({end:endFnFactory(),cancel:endFnFactory()});return runner}}}return prepareAnimation(animationDetails)}}]}],NG_ANIMATE_ATTR_NAME="data-ng-animate",NG_ANIMATE_PIN_DATA="$ngAnimatePin",$$AnimateQueueProvider=["$animateProvider",function($animateProvider){function makeTruthyCssClassMap(classString){if(!classString)return null;var keys=classString.split(ONE_SPACE),map=Object.create(null);return forEach(keys,function(key){map[key]=!0}),map}function hasMatchingClasses(newClassString,currentClassString){if(newClassString&&currentClassString){var currentClassMap=makeTruthyCssClassMap(currentClassString);return newClassString.split(ONE_SPACE).some(function(className){return currentClassMap[className]})}}function isAllowed(ruleType,element,currentAnimation,previousAnimation){return rules[ruleType].some(function(fn){return fn(element,currentAnimation,previousAnimation)})}function hasAnimationClasses(animation,and){var a=(animation.addClass||"").length>0,b=(animation.removeClass||"").length>0;return and?a&&b:a||b}var PRE_DIGEST_STATE=1,RUNNING_STATE=2,ONE_SPACE=" ",rules=this.rules={skip:[],cancel:[],join:[]};rules.join.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&hasAnimationClasses(newAnimation)}),rules.skip.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&!hasAnimationClasses(newAnimation)}),rules.skip.push(function(element,newAnimation,currentAnimation){return"leave"===currentAnimation.event&&newAnimation.structural}),rules.skip.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&currentAnimation.state===RUNNING_STATE&&!newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.state===RUNNING_STATE&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){if(currentAnimation.structural)return!1;var nA=newAnimation.addClass,nR=newAnimation.removeClass,cA=currentAnimation.addClass,cR=currentAnimation.removeClass;return isUndefined(nA)&&isUndefined(nR)||isUndefined(cA)&&isUndefined(cR)?!1:hasMatchingClasses(nA,cR)||hasMatchingClasses(nR,cA)}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function($$rAF,$rootScope,$rootElement,$document,$$HashMap,$$animation,$$AnimateRunner,$templateRequest,$$jqLite,$$forceReflow){function postDigestTaskFactory(){var postDigestCalled=!1;return function(fn){postDigestCalled?fn():$rootScope.$$postDigest(function(){postDigestCalled=!0,fn()})}}function normalizeAnimationDetails(element,animation){return mergeAnimationDetails(element,animation,{})}function findCallbacks(parent,element,event){var targetNode=getDomNode(element),targetParentNode=getDomNode(parent),matches=[],entries=callbackRegistry[event];return entries&&forEach(entries,function(entry){contains.call(entry.node,targetNode)?matches.push(entry.callback):"leave"===event&&contains.call(entry.node,targetParentNode)&&matches.push(entry.callback)}),matches}function filterFromRegistry(list,matchContainer,matchCallback){var containerNode=extractElementNode(matchContainer);return list.filter(function(entry){var isMatch=entry.node===containerNode&&(!matchCallback||entry.callback===matchCallback);return!isMatch})}function cleanupEventListeners(phase,element){"close"!==phase||element[0].parentNode||$animate.off(element)}function queueAnimation(element,event,initialOptions){function notifyProgress(runner,event,phase,data){runInNextPostDigestOrNow(function(){var callbacks=findCallbacks(parent,element,event);callbacks.length?$$rAF(function(){forEach(callbacks,function(callback){callback(element,phase,data)}),cleanupEventListeners(phase,element)}):cleanupEventListeners(phase,element)}),runner.progress(event,phase,data)}function close(reject){clearGeneratedClasses(element,options),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),runner.complete(!reject)}var node,parent,options=copy(initialOptions);element=stripCommentsFromElement(element),element&&(node=getDomNode(element),parent=element.parent()),options=prepareAnimationOptions(options);var runner=new $$AnimateRunner,runInNextPostDigestOrNow=postDigestTaskFactory();if(isArray(options.addClass)&&(options.addClass=options.addClass.join(" ")),options.addClass&&!isString(options.addClass)&&(options.addClass=null),isArray(options.removeClass)&&(options.removeClass=options.removeClass.join(" ")),options.removeClass&&!isString(options.removeClass)&&(options.removeClass=null),options.from&&!isObject(options.from)&&(options.from=null),options.to&&!isObject(options.to)&&(options.to=null),!node)return close(),runner;var className=[node.className,options.addClass,options.removeClass].join(" ");if(!isAnimatableClassName(className))return close(),runner;var isStructural=["enter","move","leave"].indexOf(event)>=0,documentHidden=$document[0].hidden,skipAnimations=!animationsEnabled||documentHidden||disabledElementsLookup.get(node),existingAnimation=!skipAnimations&&activeAnimationsLookup.get(node)||{},hasExistingAnimation=!!existingAnimation.state;if(skipAnimations||hasExistingAnimation&&existingAnimation.state===PRE_DIGEST_STATE||(skipAnimations=!areAnimationsAllowed(element,parent,event)),skipAnimations)return documentHidden&&notifyProgress(runner,event,"start"),close(),documentHidden&&notifyProgress(runner,event,"close"),runner;isStructural&&closeChildAnimations(element);var newAnimation={structural:isStructural,element:element,event:event,addClass:options.addClass,removeClass:options.removeClass,close:close,options:options,runner:runner};if(hasExistingAnimation){var skipAnimationFlag=isAllowed("skip",element,newAnimation,existingAnimation);if(skipAnimationFlag)return existingAnimation.state===RUNNING_STATE?(close(),runner):(mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner);var cancelAnimationFlag=isAllowed("cancel",element,newAnimation,existingAnimation);if(cancelAnimationFlag)if(existingAnimation.state===RUNNING_STATE)existingAnimation.runner.end();else{if(!existingAnimation.structural)return mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;existingAnimation.close()}else{var joinAnimationFlag=isAllowed("join",element,newAnimation,existingAnimation);if(joinAnimationFlag){if(existingAnimation.state!==RUNNING_STATE)return applyGeneratedPreparationClasses(element,isStructural?event:null,options),event=newAnimation.event=existingAnimation.event,options=mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;normalizeAnimationDetails(element,newAnimation)}}}else normalizeAnimationDetails(element,newAnimation);var isValidAnimation=newAnimation.structural;if(isValidAnimation||(isValidAnimation="animate"===newAnimation.event&&Object.keys(newAnimation.options.to||{}).length>0||hasAnimationClasses(newAnimation)),!isValidAnimation)return close(),clearElementAnimationState(element),runner;var counter=(existingAnimation.counter||0)+1;return newAnimation.counter=counter,markElementAnimationState(element,PRE_DIGEST_STATE,newAnimation),$rootScope.$$postDigest(function(){var animationDetails=activeAnimationsLookup.get(node),animationCancelled=!animationDetails;animationDetails=animationDetails||{};var parentElement=element.parent()||[],isValidAnimation=parentElement.length>0&&("animate"===animationDetails.event||animationDetails.structural||hasAnimationClasses(animationDetails));if(animationCancelled||animationDetails.counter!==counter||!isValidAnimation)return animationCancelled&&(applyAnimationClasses(element,options),applyAnimationStyles(element,options)),(animationCancelled||isStructural&&animationDetails.event!==event)&&(options.domOperation(),runner.end()),void(isValidAnimation||clearElementAnimationState(element));event=!animationDetails.structural&&hasAnimationClasses(animationDetails,!0)?"setClass":animationDetails.event,markElementAnimationState(element,RUNNING_STATE);var realRunner=$$animation(element,event,animationDetails.options);runner.setHost(realRunner),notifyProgress(runner,event,"start",{}),realRunner.done(function(status){close(!status);var animationDetails=activeAnimationsLookup.get(node);animationDetails&&animationDetails.counter===counter&&clearElementAnimationState(getDomNode(element)),notifyProgress(runner,event,"close",{})})}),runner}function closeChildAnimations(element){var node=getDomNode(element),children=node.querySelectorAll("["+NG_ANIMATE_ATTR_NAME+"]");forEach(children,function(child){var state=parseInt(child.getAttribute(NG_ANIMATE_ATTR_NAME),10),animationDetails=activeAnimationsLookup.get(child);if(animationDetails)switch(state){case RUNNING_STATE:animationDetails.runner.end();case PRE_DIGEST_STATE:activeAnimationsLookup.remove(child)}})}function clearElementAnimationState(element){var node=getDomNode(element);node.removeAttribute(NG_ANIMATE_ATTR_NAME),activeAnimationsLookup.remove(node)}function isMatchingElement(nodeOrElmA,nodeOrElmB){return getDomNode(nodeOrElmA)===getDomNode(nodeOrElmB)}function areAnimationsAllowed(element,parentElement,event){var animateChildren,bodyElement=jqLite($document[0].body),bodyElementDetected=isMatchingElement(element,bodyElement)||"HTML"===element[0].nodeName,rootElementDetected=isMatchingElement(element,$rootElement),parentAnimationDetected=!1,elementDisabled=disabledElementsLookup.get(getDomNode(element)),parentHost=jqLite.data(element[0],NG_ANIMATE_PIN_DATA);for(parentHost&&(parentElement=parentHost),parentElement=getDomNode(parentElement);parentElement&&(rootElementDetected||(rootElementDetected=isMatchingElement(parentElement,$rootElement)),parentElement.nodeType===ELEMENT_NODE);){var details=activeAnimationsLookup.get(parentElement)||{};if(!parentAnimationDetected){var parentElementDisabled=disabledElementsLookup.get(parentElement);if(parentElementDisabled===!0&&elementDisabled!==!1){elementDisabled=!0;break}parentElementDisabled===!1&&(elementDisabled=!1),parentAnimationDetected=details.structural}if(isUndefined(animateChildren)||animateChildren===!0){var value=jqLite.data(parentElement,NG_ANIMATE_CHILDREN_DATA);isDefined(value)&&(animateChildren=value)}if(parentAnimationDetected&&animateChildren===!1)break;if(bodyElementDetected||(bodyElementDetected=isMatchingElement(parentElement,bodyElement)),bodyElementDetected&&rootElementDetected)break;parentElement=rootElementDetected||!(parentHost=jqLite.data(parentElement,NG_ANIMATE_PIN_DATA))?parentElement.parentNode:getDomNode(parentHost)}var allowAnimation=(!parentAnimationDetected||animateChildren)&&elementDisabled!==!0;return allowAnimation&&rootElementDetected&&bodyElementDetected}function markElementAnimationState(element,state,details){details=details||{},details.state=state;var node=getDomNode(element);node.setAttribute(NG_ANIMATE_ATTR_NAME,state);var oldValue=activeAnimationsLookup.get(node),newValue=oldValue?extend(oldValue,details):details;activeAnimationsLookup.put(node,newValue)}var activeAnimationsLookup=new $$HashMap,disabledElementsLookup=new $$HashMap,animationsEnabled=null,deregisterWatch=$rootScope.$watch(function(){return 0===$templateRequest.totalPendingRequests},function(isEmpty){isEmpty&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){null===animationsEnabled&&(animationsEnabled=!0)})}))}),callbackRegistry=Object.create(null),classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0},applyAnimationClasses=applyAnimationClassesFactory($$jqLite),contains=window.Node.prototype.contains||function(arg){return this===arg||!!(16&this.compareDocumentPosition(arg))},$animate={on:function(event,container,callback){var node=extractElementNode(container);callbackRegistry[event]=callbackRegistry[event]||[],callbackRegistry[event].push({node:node,callback:callback}),jqLite(container).on("$destroy",function(){var animationDetails=activeAnimationsLookup.get(node);animationDetails||$animate.off(event,container,callback)})},off:function(event,container,callback){if(1!==arguments.length||isString(arguments[0])){var entries=callbackRegistry[event];entries&&(callbackRegistry[event]=1===arguments.length?null:filterFromRegistry(entries,container,callback))}else{container=arguments[0];for(var eventType in callbackRegistry)callbackRegistry[eventType]=filterFromRegistry(callbackRegistry[eventType],container)}},pin:function(element,parentElement){assertArg(isElement(element),"element","not an element"),assertArg(isElement(parentElement),"parentElement","not an element"),element.data(NG_ANIMATE_PIN_DATA,parentElement)},push:function(element,event,options,domOperation){return options=options||{},options.domOperation=domOperation,queueAnimation(element,event,options)},enabled:function(element,bool){var argCount=arguments.length;if(0===argCount)bool=!!animationsEnabled;else{var hasElement=isElement(element);if(hasElement){var node=getDomNode(element);1===argCount?bool=!disabledElementsLookup.get(node):disabledElementsLookup.put(node,!bool)}else bool=animationsEnabled=!!element}return bool}};return $animate}]}],$$AnimationProvider=["$animateProvider",function($animateProvider){function setRunner(element,runner){element.data(RUNNER_STORAGE_KEY,runner)}function removeRunner(element){element.removeData(RUNNER_STORAGE_KEY)}function getRunner(element){return element.data(RUNNER_STORAGE_KEY)}var NG_ANIMATE_REF_ATTR="ng-animate-ref",drivers=this.drivers=[],RUNNER_STORAGE_KEY="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function($$jqLite,$rootScope,$injector,$$AnimateRunner,$$HashMap,$$rAFScheduler){function sortAnimations(animations){function processNode(entry){if(entry.processed)return entry;entry.processed=!0;var elementNode=entry.domNode,parentNode=elementNode.parentNode;lookup.put(elementNode,entry);for(var parentEntry;parentNode;){if(parentEntry=lookup.get(parentNode)){parentEntry.processed||(parentEntry=processNode(parentEntry));break}parentNode=parentNode.parentNode}return(parentEntry||tree).children.push(entry),entry}function flatten(tree){var i,result=[],queue=[];for(i=0;i<tree.children.length;i++)queue.push(tree.children[i]);var remainingLevelEntries=queue.length,nextLevelEntries=0,row=[];for(i=0;i<queue.length;i++){var entry=queue[i];0>=remainingLevelEntries&&(remainingLevelEntries=nextLevelEntries,nextLevelEntries=0,result.push(row),row=[]),row.push(entry.fn),entry.children.forEach(function(childEntry){nextLevelEntries++,queue.push(childEntry)}),remainingLevelEntries--}return row.length&&result.push(row),result}var i,tree={children:[]},lookup=new $$HashMap;for(i=0;i<animations.length;i++){var animation=animations[i];lookup.put(animation.domNode,animations[i]={domNode:animation.domNode,fn:animation.fn,children:[]})}for(i=0;i<animations.length;i++)processNode(animations[i]);return flatten(tree)}var animationQueue=[],applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,options){function getAnchorNodes(node){var SELECTOR="["+NG_ANIMATE_REF_ATTR+"]",items=node.hasAttribute(NG_ANIMATE_REF_ATTR)?[node]:node.querySelectorAll(SELECTOR),anchors=[];return forEach(items,function(node){var attr=node.getAttribute(NG_ANIMATE_REF_ATTR);attr&&attr.length&&anchors.push(node)}),anchors}function groupAnimations(animations){var preparedAnimations=[],refLookup={};forEach(animations,function(animation,index){var element=animation.element,node=getDomNode(element),event=animation.event,enterOrMove=["enter","move"].indexOf(event)>=0,anchorNodes=animation.structural?getAnchorNodes(node):[];if(anchorNodes.length){var direction=enterOrMove?"to":"from";forEach(anchorNodes,function(anchor){var key=anchor.getAttribute(NG_ANIMATE_REF_ATTR);refLookup[key]=refLookup[key]||{},refLookup[key][direction]={animationID:index,element:jqLite(anchor)}})}else preparedAnimations.push(animation)});var usedIndicesLookup={},anchorGroups={};return forEach(refLookup,function(operations,key){var from=operations.from,to=operations.to;if(!from||!to){var index=from?from.animationID:to.animationID,indexKey=index.toString();return void(usedIndicesLookup[indexKey]||(usedIndicesLookup[indexKey]=!0,preparedAnimations.push(animations[index])))}var fromAnimation=animations[from.animationID],toAnimation=animations[to.animationID],lookupKey=from.animationID.toString();if(!anchorGroups[lookupKey]){var group=anchorGroups[lookupKey]={structural:!0,beforeStart:function(){fromAnimation.beforeStart(),toAnimation.beforeStart()},close:function(){fromAnimation.close(),toAnimation.close()},classes:cssClassesIntersection(fromAnimation.classes,toAnimation.classes),from:fromAnimation,to:toAnimation,anchors:[]};group.classes.length?preparedAnimations.push(group):(preparedAnimations.push(fromAnimation),preparedAnimations.push(toAnimation))}anchorGroups[lookupKey].anchors.push({out:from.element,"in":to.element})}),preparedAnimations}function cssClassesIntersection(a,b){a=a.split(" "),b=b.split(" ");for(var matches=[],i=0;i<a.length;i++){var aa=a[i];if("ng-"!==aa.substring(0,3))for(var j=0;j<b.length;j++)if(aa===b[j]){matches.push(aa);break}}return matches.join(" ")}function invokeFirstDriver(animationDetails){for(var i=drivers.length-1;i>=0;i--){var driverName=drivers[i],factory=$injector.get(driverName),driver=factory(animationDetails);if(driver)return driver}}function beforeStart(){element.addClass(NG_ANIMATE_CLASSNAME),tempClasses&&$$jqLite.addClass(element,tempClasses),prepareClassName&&($$jqLite.removeClass(element,prepareClassName),prepareClassName=null)}function updateAnimationRunners(animation,newRunner){function update(element){var runner=getRunner(element);runner&&runner.setHost(newRunner)}animation.from&&animation.to?(update(animation.from.element),update(animation.to.element)):update(animation.element)}function handleDestroyedElement(){var runner=getRunner(element);!runner||"leave"===event&&options.$$domOperationFired||runner.end()}function close(rejected){element.off("$destroy",handleDestroyedElement),removeRunner(element),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),tempClasses&&$$jqLite.removeClass(element,tempClasses),element.removeClass(NG_ANIMATE_CLASSNAME),runner.complete(!rejected)}options=prepareAnimationOptions(options);var isStructural=["enter","move","leave"].indexOf(event)>=0,runner=new $$AnimateRunner({end:function(){close()},cancel:function(){close(!0)}});if(!drivers.length)return close(),runner;setRunner(element,runner);var classes=mergeClasses(element.attr("class"),mergeClasses(options.addClass,options.removeClass)),tempClasses=options.tempClasses;tempClasses&&(classes+=" "+tempClasses,options.tempClasses=null);var prepareClassName;return isStructural&&(prepareClassName="ng-"+event+PREPARE_CLASS_SUFFIX,$$jqLite.addClass(element,prepareClassName)),animationQueue.push({element:element,classes:classes,event:event,structural:isStructural,options:options,beforeStart:beforeStart,close:close}),element.on("$destroy",handleDestroyedElement),animationQueue.length>1?runner:($rootScope.$$postDigest(function(){var animations=[];forEach(animationQueue,function(entry){getRunner(entry.element)?animations.push(entry):entry.close()}),animationQueue.length=0;var groupedAnimations=groupAnimations(animations),toBeSortedAnimations=[];forEach(groupedAnimations,function(animationEntry){toBeSortedAnimations.push({domNode:getDomNode(animationEntry.from?animationEntry.from.element:animationEntry.element),fn:function(){animationEntry.beforeStart();var startAnimationFn,closeFn=animationEntry.close,targetElement=animationEntry.anchors?animationEntry.from.element||animationEntry.to.element:animationEntry.element;if(getRunner(targetElement)){var operation=invokeFirstDriver(animationEntry);operation&&(startAnimationFn=operation.start)}if(startAnimationFn){var animationRunner=startAnimationFn();animationRunner.done(function(status){closeFn(!status)}),updateAnimationRunners(animationEntry,animationRunner)}else closeFn()}})}),$$rAFScheduler(sortAnimations(toBeSortedAnimations))}),runner)}}]}],ngAnimateSwapDirective=["$animate","$rootScope",function($animate,$rootScope){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(scope,$element,attrs,ctrl,$transclude){var previousElement,previousScope;scope.$watchCollection(attrs.ngAnimateSwap||attrs["for"],function(value){previousElement&&$animate.leave(previousElement),previousScope&&(previousScope.$destroy(),previousScope=null),(value||0===value)&&(previousScope=scope.$new(),$transclude(previousScope,function(element){previousElement=element,$animate.enter(element,null,$element)}))})}}}];angular.module("ngAnimate",[],function(){noop=angular.noop,copy=angular.copy,extend=angular.extend,jqLite=angular.element,forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,isUndefined=angular.isUndefined,isDefined=angular.isDefined,isFunction=angular.isFunction,isElement=angular.isElement}).directive("ngAnimateSwap",ngAnimateSwapDirective).directive("ngAnimateChildren",$$AnimateChildrenDirective).factory("$$rAFScheduler",$$rAFSchedulerFactory).provider("$$animateQueue",$$AnimateQueueProvider).provider("$$animation",$$AnimationProvider).provider("$animateCss",$AnimateCssProvider).provider("$$animateCssDriver",$$AnimateCssDriverProvider).provider("$$animateJs",$$AnimateJsProvider).provider("$$animateJsDriver",$$AnimateJsDriverProvider)}(window,window.angular);
angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function(e){"use strict";function i(e){try{return decodeURIComponent(e)}catch(i){}}return function(){function t(t,n,r){var o,s,p,u,a,c,d,x,f;r=r||{};var g=r.decode||i,l=r.encode||encodeURIComponent;if(void 0!==n)return n="object"==typeof n?JSON.stringify(n):n+"","number"==typeof r.expires&&(f=r.expires,r.expires=new Date,-1===f?r.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==r.expirationUnit?"hours"===r.expirationUnit?r.expires.setHours(r.expires.getHours()+f):"minutes"===r.expirationUnit?r.expires.setMinutes(r.expires.getMinutes()+f):"seconds"===r.expirationUnit?r.expires.setSeconds(r.expires.getSeconds()+f):"milliseconds"===r.expirationUnit?r.expires.setMilliseconds(r.expires.getMilliseconds()+f):r.expires.setDate(r.expires.getDate()+f):r.expires.setDate(r.expires.getDate()+f)),e[0].cookie=[l(t),"=",l(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("");for(s=[],x=e[0].cookie,x&&(s=x.split("; ")),o={},d=!1,p=0;s.length>p;++p)if(s[p]){if(u=s[p],a=u.indexOf("="),c=u.substring(0,a),n=g(u.substring(a+1)),angular.isUndefined(n))continue;if(void 0===t||t===c){try{o[c]=JSON.parse(n)}catch(m){o[c]=n}if(t===c)return o[c];d=!0}}return d&&void 0===t?o:void 0}return t.remove=function(e,i){var n=void 0!==t(e);return n&&(i||(i={}),i.expires=-1,t(e,"",i)),n},t}()}]);
!function(window){"use strict";angular.module("tmh.dynamicLocale",[]).config(["$provide",function($provide){function makeStateful($delegate){return $delegate.$stateful=!0,$delegate}$provide.decorator("dateFilter",["$delegate",makeStateful]),$provide.decorator("numberFilter",["$delegate",makeStateful]),$provide.decorator("currencyFilter",["$delegate",makeStateful])}]).provider("tmhDynamicLocale",function(){function loadScript(url,callback,errorCallback,$timeout){var script=document.createElement("script"),body=document.getElementsByTagName("body")[0],removed=!1;script.type="text/javascript",script.readyState?script.onreadystatechange=function(){("complete"===script.readyState||"loaded"===script.readyState)&&(script.onreadystatechange=null,$timeout(function(){removed||(removed=!0,body.removeChild(script),callback())},30,!1))}:(script.onload=function(){removed||(removed=!0,body.removeChild(script),callback())},script.onerror=function(){removed||(removed=!0,body.removeChild(script),errorCallback())}),script.src=url,script.async=!1,body.appendChild(script)}function loadLocale(localeUrl,$locale,localeId,$rootScope,$q,localeCache,$timeout){function overrideValues(oldObject,newObject){activeLocale===localeId&&(angular.forEach(oldObject,function(value,key){newObject[key]?angular.isArray(newObject[key])&&(oldObject[key].length=newObject[key].length):delete oldObject[key]}),angular.forEach(newObject,function(value,key){angular.isArray(newObject[key])||angular.isObject(newObject[key])?(oldObject[key]||(oldObject[key]=angular.isArray(newObject[key])?[]:{}),overrideValues(oldObject[key],newObject[key])):oldObject[key]=newObject[key]}))}if(promiseCache[localeId])return promiseCache[localeId];var cachedLocale,deferred=$q.defer();return localeId===activeLocale?deferred.resolve($locale):(cachedLocale=localeCache.get(localeId))?(activeLocale=localeId,$rootScope.$evalAsync(function(){overrideValues($locale,cachedLocale),$rootScope.$broadcast("$localeChangeSuccess",localeId,$locale),storage.put(storeKey,localeId),deferred.resolve($locale)})):(activeLocale=localeId,promiseCache[localeId]=deferred.promise,loadScript(localeUrl,function(){var localInjector=angular.injector(["ngLocale"]),externalLocale=localInjector.get("$locale");overrideValues($locale,externalLocale),localeCache.put(localeId,externalLocale),delete promiseCache[localeId],$rootScope.$apply(function(){$rootScope.$broadcast("$localeChangeSuccess",localeId,$locale),storage.put(storeKey,localeId),deferred.resolve($locale)})},function(){delete promiseCache[localeId],$rootScope.$apply(function(){activeLocale===localeId&&(activeLocale=$locale.id),$rootScope.$broadcast("$localeChangeError",localeId),deferred.reject(localeId)})},$timeout)),deferred.promise}var defaultLocale,storage,activeLocale,localeLocationPattern="angular/i18n/angular-locale_{{locale}}.js",storageFactory="tmhDynamicLocaleStorageCache",storeKey="tmhDynamicLocale.locale",promiseCache={};this.localeLocationPattern=function(value){return value?(localeLocationPattern=value,this):localeLocationPattern},this.useStorage=function(storageName){storageFactory=storageName},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(value){defaultLocale=value},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function($rootScope,$injector,interpolate,locale,$q,tmhDynamicLocaleCache,$timeout){var localeLocation=interpolate(localeLocationPattern);return storage=$injector.get(storageFactory),$rootScope.$evalAsync(function(){var initialLocale;(initialLocale=storage.get(storeKey)||defaultLocale)&&loadLocale(localeLocation({locale:initialLocale}),locale,initialLocale,$rootScope,$q,tmhDynamicLocaleCache,$timeout)}),{set:function(value){return loadLocale(localeLocation({locale:value}),locale,value,$rootScope,$q,tmhDynamicLocaleCache,$timeout)},get:function(){return activeLocale}}}]}).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop])}(window);
!function(){function FeatureFlags($q,featureFlagOverrides,initialFlags){var serverFlagCache={},flags=[],resolve=function(val){var deferred=$q.defer();return deferred.resolve(val),deferred.promise},isOverridden=function(key){return featureFlagOverrides.isPresent(key)},isOn=function(key){return isOverridden(key)?"true"===featureFlagOverrides.get(key):serverFlagCache[key]},isOnByDefault=function(key){return serverFlagCache[key]},updateFlagsAndGetAll=function(newFlags){return newFlags.forEach(function(flag){serverFlagCache[flag.key]=flag.active,flag.active=isOn(flag.key)}),angular.copy(newFlags,flags),flags},updateFlagsWithPromise=function(promise){return promise.then(function(value){return updateFlagsAndGetAll(value.data||value)})},get=function(){return flags},set=function(newFlags){return angular.isArray(newFlags)?resolve(updateFlagsAndGetAll(newFlags)):updateFlagsWithPromise(newFlags)},enable=function(flag){flag.active=!0,featureFlagOverrides.set(flag.key,!0)},disable=function(flag){flag.active=!1,featureFlagOverrides.set(flag.key,!1)},reset=function(flag){flag.active=serverFlagCache[flag.key],featureFlagOverrides.remove(flag.key)},init=function(){initialFlags&&set(initialFlags)};return init(),{set:set,get:get,enable:enable,disable:disable,reset:reset,isOn:isOn,isOnByDefault:isOnByDefault,isOverridden:isOverridden}}angular.module("feature-flags",[]),angular.module("feature-flags").directive("featureFlag",["featureFlags","$interpolate",function(featureFlags,$interpolate){return{transclude:"element",priority:599,terminal:!0,restrict:"A",$$tlb:!0,compile:function(tElement,tAttrs){var hasHideAttribute="featureFlagHide"in tAttrs;return tElement[0].textContent=" featureFlag: "+tAttrs.featureFlag+" is "+(hasHideAttribute?"on":"off")+" ",function($scope,element,attrs,ctrl,$transclude){var featureEl,childScope;$scope.$watch(function(){var featureFlag=$interpolate(attrs.featureFlag)($scope);return featureFlags.isOn(featureFlag)},function(isEnabled){var showElement=hasHideAttribute?!isEnabled:isEnabled;showElement?(childScope=$scope.$new(),$transclude(childScope,function(clone){featureEl=clone,element.after(featureEl).remove()})):(childScope&&(childScope.$destroy(),childScope=null),featureEl&&(featureEl.after(element).remove(),featureEl=null))})}}}}]),angular.module("feature-flags").directive("featureFlagOverrides",["featureFlags",function(featureFlags){return{restrict:"A",link:function($scope){$scope.flags=featureFlags.get(),$scope.isOn=featureFlags.isOn,$scope.isOverridden=featureFlags.isOverridden,$scope.enable=featureFlags.enable,$scope.disable=featureFlags.disable,$scope.reset=featureFlags.reset,$scope.isOnByDefault=featureFlags.isOnByDefault},template:'<div class="feature-flags">  <h1>Feature Flags</h1>  <div id="feature-flag--{{flag.key}}" class="feature-flags-flag" ng-repeat="flag in flags">    <div class="feature-flags-name">{{flag.name || flag.key}}</div>    <div id="feature-flag--{{flag.key}}--enable" class="feature-flags-switch" ng-click="enable(flag)" ng-class="{\'active\': isOverridden(flag.key) && isOn(flag.key)}">ON</div>    <div id="feature-flag--{{flag.key}}--disable" class="feature-flags-switch" ng-click="disable(flag)" ng-class="{\'active\': isOverridden(flag.key) && !isOn(flag.key)}">OFF</div>    <div id="feature-flag--{{flag.key}}--reset" class="feature-flags-switch" ng-click="reset(flag)" ng-class="{\'active\': !isOverridden(flag.key)}">DEFAULT ({{isOnByDefault(flag.key) ? \'ON\' : \'OFF\'}})</div>    <div class="feature-flags-desc">{{flag.description}}</div>  </div></div>',replace:!0}}]),angular.module("feature-flags").service("featureFlagOverrides",["$rootElement",function($rootElement){var appName=$rootElement.attr("ng-app"),keyPrefix="featureFlags."+appName+".",localStorageAvailable=function(){try{return localStorage.setItem("featureFlags.availableTest","test"),localStorage.removeItem("featureFlags.availableTest"),!0}catch(e){return!1}}(),prefixedKeyFor=function(flagName){return keyPrefix+flagName},isPrefixedKey=function(key){return 0===key.indexOf(keyPrefix)},set=function(value,flagName){localStorageAvailable&&localStorage.setItem(prefixedKeyFor(flagName),value)},get=function(flagName){return localStorageAvailable?localStorage.getItem(prefixedKeyFor(flagName)):void 0},remove=function(flagName){localStorageAvailable&&localStorage.removeItem(prefixedKeyFor(flagName))};return{isPresent:function(key){var value=get(key);return"undefined"!=typeof value&&null!==value},get:get,set:function(flag,value){angular.isObject(flag)?angular.forEach(flag,set):set(value,flag)},remove:remove,reset:function(){var key;if(localStorageAvailable)for(key in localStorage)isPrefixedKey(key)&&localStorage.removeItem(key)}}}]),angular.module("feature-flags").provider("featureFlags",function(){var initialFlags=[];this.setInitialFlags=function(flags){initialFlags=flags},this.$get=["$q","featureFlagOverrides",function($q,featureFlagOverrides){return new FeatureFlags($q,featureFlagOverrides,initialFlags)}]})}();
angular.module("hateoas",["ngResource"]).provider("HateoasInterface",function(){var globalHttpMethods,linksKey="links";return{setLinksKey:function(newLinksKey){linksKey=newLinksKey||linksKey},getLinksKey:function(){return linksKey},setHttpMethods:function(httpMethods){globalHttpMethods=angular.copy(httpMethods)},$get:["$injector",function($injector){var arrayToObject=function(keyItem,valueItem,array){var obj={};return angular.forEach(array,function(item,index){item[keyItem]&&item[valueItem]&&(obj[item[keyItem]]=item[valueItem])}),obj},resource=function(linkName,bindings,httpMethods){if(linkName in this[linksKey])return $injector.get("$resource")(this[linksKey][linkName],bindings,httpMethods||globalHttpMethods);throw"Link '"+linkName+"' is not present in object."},HateoasInterface=function(data){if(data[linksKey]){var links={};links[linksKey]=arrayToObject("rel","href",data[linksKey]),data=angular.extend(this,data,links,{resource:resource})}return angular.forEach(data,function(value,key){key!==linksKey&&angular.isObject(value)&&(angular.isArray(value)||value[linksKey])&&(data[key]=new HateoasInterface(value))}),data};return HateoasInterface}]}}).provider("HateoasInterceptor",["$httpProvider",function($httpProvider){return{transformAllResponses:function(){$httpProvider.interceptors.push("HateoasInterceptor")},$get:["HateoasInterface","$q",function(HateoasInterface,$q){return{response:function(response){return response&&angular.isObject(response.data)&&(response.data=new HateoasInterface(response.data)),response||$q.when(response)}}}]}}]);
/*
 AngularJS v1.5.11
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(R,b){'use strict';function G(s,g){g=g||{};b.forEach(g,function(b,k){delete g[k]});for(var k in s)!s.hasOwnProperty(k)||"$"===k.charAt(0)&&"$"===k.charAt(1)||(g[k]=s[k]);return g}var y=b.$$minErr("$resource"),N=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ngResource",["ng"]).provider("$resource",function(){var s=/^https?:\/\/[^/]*/,g=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},
"delete":{method:"DELETE"}}};this.$get=["$http","$log","$q","$timeout",function(k,M,H,I){function z(b,e){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function B(b,e){this.template=b;this.defaults=r({},g.defaults,e);this.urlParams={}}function J(A,e,p,m){function c(a,d){var c={};d=r({},e,d);u(d,function(d,e){w(d)&&(d=d(a));var f;if(d&&d.charAt&&"@"===d.charAt(0)){f=a;var l=d.substr(1);if(null==l||""===l||
"hasOwnProperty"===l||!N.test("."+l))throw y("badmember",l);for(var l=l.split("."),h=0,g=l.length;h<g&&b.isDefined(f);h++){var q=l[h];f=null!==f?f[q]:void 0}}else f=d;c[e]=f});return c}function O(a){return a.resource}function h(a){G(a||{},this)}var s=new B(A,m);p=r({},g.defaults.actions,p);h.prototype.toJSON=function(){var a=r({},this);delete a.$promise;delete a.$resolved;delete a.$cancelRequest;return a};u(p,function(a,d){var b=/^(POST|PUT|PATCH)$/i.test(a.method),e=a.timeout,g=K(a.cancellable)?
a.cancellable:s.defaults.cancellable;e&&!P(e)&&(M.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete a.timeout,e=null);h[d]=function(f,l,m,A){var q={},p,v,C;switch(arguments.length){case 4:C=A,v=m;case 3:case 2:if(w(l)){if(w(f)){v=f;C=l;break}v=l;C=m}else{q=f;p=l;v=m;break}case 1:w(f)?
v=f:b?p=f:q=f;break;case 0:break;default:throw y("badargs",arguments.length);}var D=this instanceof h,n=D?p:a.isArray?[]:new h(p),t={},z=a.interceptor&&a.interceptor.response||O,B=a.interceptor&&a.interceptor.responseError||void 0,x,E;u(a,function(a,d){switch(d){default:t[d]=Q(a);case "params":case "isArray":case "interceptor":case "cancellable":}});!D&&g&&(x=H.defer(),t.timeout=x.promise,e&&(E=I(x.resolve,e)));b&&(t.data=p);s.setUrlParams(t,r({},c(p,a.params||{}),q),a.url);q=k(t).then(function(f){var c=
f.data;if(c){if(L(c)!==!!a.isArray)throw y("badcfg",d,a.isArray?"array":"object",L(c)?"array":"object",t.method,t.url);if(a.isArray)n.length=0,u(c,function(a){"object"===typeof a?n.push(new h(a)):n.push(a)});else{var b=n.$promise;G(c,n);n.$promise=b}}f.resource=n;return f},function(a){(C||F)(a);return H.reject(a)});q["finally"](function(){n.$resolved=!0;!D&&g&&(n.$cancelRequest=F,I.cancel(E),x=E=t.timeout=null)});q=q.then(function(a){var d=z(a);(v||F)(d,a.headers,a.status,a.statusText);return d},
B);return D?q:(n.$promise=q,n.$resolved=!1,g&&(n.$cancelRequest=x.resolve),n)};h.prototype["$"+d]=function(a,c,b){w(a)&&(b=c,c=a,a={});a=h[d].call(this,a,this,c,b);return a.$promise||a}});h.bind=function(a){a=r({},e,a);return J(A,a,p,m)};return h}var F=b.noop,u=b.forEach,r=b.extend,Q=b.copy,L=b.isArray,K=b.isDefined,w=b.isFunction,P=b.isNumber;B.prototype={setUrlParams:function(b,e,g){var m=this,c=g||m.template,k,h,r="",a=m.urlParams={};u(c.split(/\W/),function(d){if("hasOwnProperty"===d)throw y("badname");
!/^\d+$/.test(d)&&d&&(new RegExp("(^|[^\\\\]):"+d+"(\\W|$)")).test(c)&&(a[d]={isQueryParamValue:(new RegExp("\\?.*=:"+d+"(?:\\W|$)")).test(c)})});c=c.replace(/\\:/g,":");c=c.replace(s,function(a){r=a;return""});e=e||{};u(m.urlParams,function(a,b){k=e.hasOwnProperty(b)?e[b]:m.defaults[b];K(k)&&null!==k?(h=a.isQueryParamValue?z(k,!0):z(k,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),c=c.replace(new RegExp(":"+b+"(\\W|$)","g"),function(a,b){return h+b})):c=c.replace(new RegExp("(/?):"+
b+"(\\W|$)","g"),function(a,b,d){return"/"===d.charAt(0)?d:b+d})});m.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/");c=c.replace(/\/\.(?=\w+($|\?))/,".");b.url=r+c.replace(/\/\\\./,"/.");u(e,function(a,c){m.urlParams[c]||(b.params=b.params||{},b.params[c]=a)})}};return J}]})})(window,window.angular);


/*
 AngularJS v1.5.11
 (c) 2010-2017 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(s,g){'use strict';function H(g){var l=[];t(l,A).chars(g);return l.join("")}var B=g.$$minErr("$sanitize"),C,l,D,E,q,A,F,t;g.module("ngSanitize",[]).provider("$sanitize",function(){function k(a,e){var b={},c=a.split(","),h;for(h=0;h<c.length;h++)b[e?q(c[h]):c[h]]=!0;return b}function I(a){for(var e={},b=0,c=a.length;b<c;b++){var h=a[b];e[h.name]=h.value}return e}function G(a){return a.replace(/&/g,"&amp;").replace(J,function(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(b-55296)+
(a-56320)+65536)+";"}).replace(K,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function x(a){for(;a;){if(a.nodeType===s.Node.ELEMENT_NODE)for(var e=a.attributes,b=0,c=e.length;b<c;b++){var h=e[b],d=h.name.toLowerCase();if("xmlns:ns1"===d||0===d.lastIndexOf("ns1:",0))a.removeAttributeNode(h),b--,c--}(e=a.firstChild)&&x(e);a=a.nextSibling}}var u=!1;this.$get=["$$sanitizeUri",function(a){u&&l(v,w);return function(e){var b=[];F(e,t(b,function(b,h){return!/^unsafe:/.test(a(b,
h))}));return b.join("")}}];this.enableSvg=function(a){return E(a)?(u=a,this):u};C=g.bind;l=g.extend;D=g.forEach;E=g.isDefined;q=g.lowercase;A=g.noop;F=function(a,e){null===a||void 0===a?a="":"string"!==typeof a&&(a=""+a);f.innerHTML=a;var b=5;do{if(0===b)throw B("uinput");b--;s.document.documentMode&&x(f);a=f.innerHTML;f.innerHTML=a}while(a!==f.innerHTML);for(b=f.firstChild;b;){switch(b.nodeType){case 1:e.start(b.nodeName.toLowerCase(),I(b.attributes));break;case 3:e.chars(b.textContent)}var c;if(!(c=
b.firstChild)&&(1===b.nodeType&&e.end(b.nodeName.toLowerCase()),c=b.nextSibling,!c))for(;null==c;){b=b.parentNode;if(b===f)break;c=b.nextSibling;1===b.nodeType&&e.end(b.nodeName.toLowerCase())}b=c}for(;b=f.firstChild;)f.removeChild(b)};t=function(a,e){var b=!1,c=C(a,a.push);return{start:function(a,d){a=q(a);!b&&z[a]&&(b=a);b||!0!==v[a]||(c("<"),c(a),D(d,function(b,d){var f=q(d),g="img"===a&&"src"===f||"background"===f;!0!==m[f]||!0===n[f]&&!e(b,g)||(c(" "),c(d),c('="'),c(G(b)),c('"'))}),c(">"))},
end:function(a){a=q(a);b||!0!==v[a]||!0===y[a]||(c("</"),c(a),c(">"));a==b&&(b=!1)},chars:function(a){b||c(G(a))}}};var J=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,K=/([^#-~ |!])/g,y=k("area,br,col,hr,img,wbr"),d=k("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),r=k("rp,rt"),p=l({},r,d),d=l({},d,k("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),r=l({},r,k("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
w=k("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),z=k("script,style"),v=l({},y,d,r,p),n=k("background,cite,href,longdesc,src,xlink:href"),p=k("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),
r=k("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0),m=l({},n,r,p),f;(function(a){if(a.document&&a.document.implementation)a=a.document.implementation.createHTMLDocument("inert");else throw B("noinert");var e=(a.documentElement||a.getDocumentElement()).getElementsByTagName("body");1===e.length?f=e[0]:(e=a.createElement("html"),f=a.createElement("body"),e.appendChild(f),a.appendChild(e))})(s)});g.module("ngSanitize").filter("linky",["$sanitize",function(k){var l=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
q=/^mailto:/i,x=g.$$minErr("linky"),u=g.isDefined,s=g.isFunction,t=g.isObject,y=g.isString;return function(d,g,p){function w(a){a&&m.push(H(a))}function z(a,b){var c,d=v(a);m.push("<a ");for(c in d)m.push(c+'="'+d[c]+'" ');!u(g)||"target"in d||m.push('target="',g,'" ');m.push('href="',a.replace(/"/g,"&quot;"),'">');w(b);m.push("</a>")}if(null==d||""===d)return d;if(!y(d))throw x("notstring",d);for(var v=s(p)?p:t(p)?function(){return p}:function(){return{}},n=d,m=[],f,a;d=n.match(l);)f=d[0],d[2]||
d[4]||(f=(d[3]?"http://":"mailto:")+f),a=d.index,w(n.substr(0,a)),z(f,d[0].replace(q,"")),n=n.substring(a+d[0].length);w(n);return k(m.join(""))}}])})(window,window.angular);


var duScrollDefaultEasing=function(x){"use strict";return.5>x?Math.pow(2*x,2)/2:1-Math.pow(2*(1-x),2)/2},duScroll=angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollSpyRefreshInterval",0).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active");"undefined"!=typeof module&&module&&module.exports&&(module.exports=duScroll),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function($window,$q,cancelAnimation,requestAnimation,duScrollEasing,duScrollDuration,duScrollOffset,duScrollCancelOnEvents){"use strict";var proto={},isDocument=function(el){return"undefined"!=typeof HTMLDocument&&el instanceof HTMLDocument||el.nodeType&&el.nodeType===el.DOCUMENT_NODE},isElement=function(el){return"undefined"!=typeof HTMLElement&&el instanceof HTMLElement||el.nodeType&&el.nodeType===el.ELEMENT_NODE},unwrap=function(el){return isElement(el)||isDocument(el)?el:el[0]};proto.duScrollTo=function(left,top,duration,easing){var aliasFn;if(angular.isElement(left)?aliasFn=this.duScrollToElement:angular.isDefined(duration)&&(aliasFn=this.duScrollToAnimated),aliasFn)return aliasFn.apply(this,arguments);var el=unwrap(this);return isDocument(el)?$window.scrollTo(left,top):(el.scrollLeft=left,void(el.scrollTop=top))};var scrollAnimation,deferred;proto.duScrollToAnimated=function(left,top,duration,easing){duration&&!easing&&(easing=duScrollEasing);var startLeft=this.duScrollLeft(),startTop=this.duScrollTop(),deltaLeft=Math.round(left-startLeft),deltaTop=Math.round(top-startTop),startTime=null,progress=0,el=this,cancelScrollAnimation=function($event){(!$event||progress&&$event.which>0)&&(duScrollCancelOnEvents&&el.unbind(duScrollCancelOnEvents,cancelScrollAnimation),cancelAnimation(scrollAnimation),deferred.reject(),scrollAnimation=null)};if(scrollAnimation&&cancelScrollAnimation(),deferred=$q.defer(),0===duration||!deltaLeft&&!deltaTop)return 0===duration&&el.duScrollTo(left,top),deferred.resolve(),deferred.promise;var animationStep=function(timestamp){null===startTime&&(startTime=timestamp),progress=timestamp-startTime;var percent=progress>=duration?1:easing(progress/duration);el.scrollTo(startLeft+Math.ceil(deltaLeft*percent),startTop+Math.ceil(deltaTop*percent)),1>percent?scrollAnimation=requestAnimation(animationStep):(duScrollCancelOnEvents&&el.unbind(duScrollCancelOnEvents,cancelScrollAnimation),scrollAnimation=null,deferred.resolve())};return el.duScrollTo(startLeft,startTop),duScrollCancelOnEvents&&el.bind(duScrollCancelOnEvents,cancelScrollAnimation),scrollAnimation=requestAnimation(animationStep),deferred.promise},proto.duScrollToElement=function(target,offset,duration,easing){var el=unwrap(this);(!angular.isNumber(offset)||isNaN(offset))&&(offset=duScrollOffset);var top=this.duScrollTop()+unwrap(target).getBoundingClientRect().top-offset;return isElement(el)&&(top-=el.getBoundingClientRect().top),this.duScrollTo(0,top,duration,easing)},proto.duScrollLeft=function(value,duration,easing){if(angular.isNumber(value))return this.duScrollTo(value,this.duScrollTop(),duration,easing);var el=unwrap(this);return isDocument(el)?$window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:el.scrollLeft},proto.duScrollTop=function(value,duration,easing){if(angular.isNumber(value))return this.duScrollTo(this.duScrollLeft(),value,duration,easing);var el=unwrap(this);return isDocument(el)?$window.scrollY||document.documentElement.scrollTop||document.body.scrollTop:el.scrollTop},proto.duScrollToElementAnimated=function(target,offset,duration,easing){return this.duScrollToElement(target,offset,duration||duScrollDuration,easing)},proto.duScrollTopAnimated=function(top,duration,easing){return this.duScrollTop(top,duration||duScrollDuration,easing)},proto.duScrollLeftAnimated=function(left,duration,easing){return this.duScrollLeft(left,duration||duScrollDuration,easing)},angular.forEach(proto,function(fn,key){angular.element.prototype[key]=fn;var unprefixed=key.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[unprefixed])&&(angular.element.prototype[unprefixed]=fn)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function($window){"use strict";var vendors=["webkit","moz","o","ms"];return function(fnName,fallback){if($window[fnName])return $window[fnName];for(var key,suffix=fnName.substr(0,1).toUpperCase()+fnName.substr(1),i=0;i<vendors.length;i++)if(key=vendors[i]+suffix,$window[key])return $window[key];return fallback}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(polyfill,$timeout){"use strict";var lastTime=0,fallback=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=$timeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id};return polyfill("requestAnimationFrame",fallback)}]).factory("cancelAnimation",["polyfill","$timeout",function(polyfill,$timeout){"use strict";var fallback=function(promise){$timeout.cancel(promise)};return polyfill("cancelAnimationFrame",fallback)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$interval","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollSpyRefreshInterval","duScrollBottomSpy","duScrollActiveClass",function($rootScope,$timeout,$interval,$window,$document,scrollContainerAPI,duScrollGreedy,duScrollSpyWait,duScrollSpyRefreshInterval,duScrollBottomSpy,duScrollActiveClass){"use strict";var createScrollHandler=function(context){var timer=!1,queued=!1,handler=function(){queued=!1;var bottomReached,container=context.container,containerEl=container[0],containerOffset=0;if("undefined"!=typeof HTMLElement&&containerEl instanceof HTMLElement||containerEl.nodeType&&containerEl.nodeType===containerEl.ELEMENT_NODE)containerOffset=containerEl.getBoundingClientRect().top,bottomReached=Math.round(containerEl.scrollTop+containerEl.clientHeight)>=containerEl.scrollHeight;else{var documentScrollHeight=$document[0].body.scrollHeight||$document[0].documentElement.scrollHeight;bottomReached=Math.round($window.pageYOffset+$window.innerHeight)>=documentScrollHeight}var i,currentlyActive,toBeActive,spies,spy,pos,compareProperty=duScrollBottomSpy&&bottomReached?"bottom":"top";for(spies=context.spies,currentlyActive=context.currentlyActive,toBeActive=void 0,i=0;i<spies.length;i++)spy=spies[i],pos=spy.getTargetPosition(),pos&&spy.$element&&(duScrollBottomSpy&&bottomReached||pos.top+spy.offset-containerOffset<20&&(duScrollGreedy||-1*pos.top+containerOffset)<pos.height)&&(!toBeActive||toBeActive[compareProperty]<pos[compareProperty])&&(toBeActive={spy:spy},toBeActive[compareProperty]=pos[compareProperty]);toBeActive&&(toBeActive=toBeActive.spy),currentlyActive===toBeActive||duScrollGreedy&&!toBeActive||(currentlyActive&&currentlyActive.$element&&(currentlyActive.$element.removeClass(duScrollActiveClass),$rootScope.$broadcast("duScrollspy:becameInactive",currentlyActive.$element,angular.element(currentlyActive.getTargetElement()))),toBeActive&&(toBeActive.$element.addClass(duScrollActiveClass),$rootScope.$broadcast("duScrollspy:becameActive",toBeActive.$element,angular.element(toBeActive.getTargetElement()))),context.currentlyActive=toBeActive)};return duScrollSpyWait?function(){timer?queued=!0:(handler(),timer=$timeout(function(){timer=!1,queued&&handler()},duScrollSpyWait,!1))}:handler},contexts={},createContext=function($scope){var id=$scope.$id,context={spies:[]};return context.handler=createScrollHandler(context),contexts[id]=context,$scope.$on("$destroy",function(){destroyContext($scope)}),id},destroyContext=function($scope){var id=$scope.$id,context=contexts[id],container=context.container;context.intervalPromise&&$interval.cancel(context.intervalPromise),container&&container.off("scroll",context.handler),delete contexts[id]},defaultContextId=createContext($rootScope),getContextForScope=function(scope){return contexts[scope.$id]?contexts[scope.$id]:scope.$parent?getContextForScope(scope.$parent):contexts[defaultContextId]},getContextForSpy=function(spy){var context,contextId,scope=spy.$scope;if(scope)return getContextForScope(scope);for(contextId in contexts)if(context=contexts[contextId],-1!==context.spies.indexOf(spy))return context},isElementInDocument=function(element){for(;element.parentNode;)if(element=element.parentNode,element===document)return!0;return!1},addSpy=function(spy){var context=getContextForSpy(spy);context&&(context.spies.push(spy),context.container&&isElementInDocument(context.container)||(context.container&&context.container.off("scroll",context.handler),context.container=scrollContainerAPI.getContainer(spy.$scope),duScrollSpyRefreshInterval&&!context.intervalPromise&&(context.intervalPromise=$interval(context.handler,duScrollSpyRefreshInterval,0,!1)),context.container.on("scroll",context.handler).triggerHandler("scroll")))},removeSpy=function(spy){var context=getContextForSpy(spy);spy===context.currentlyActive&&($rootScope.$broadcast("duScrollspy:becameInactive",context.currentlyActive.$element),context.currentlyActive=null);var i=context.spies.indexOf(spy);-1!==i&&context.spies.splice(i,1),spy.$element=null};return{addSpy:addSpy,removeSpy:removeSpy,createContext:createContext,destroyContext:destroyContext,getContextForScope:getContextForScope}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function($document){"use strict";var containers={},setContainer=function(scope,element){var id=scope.$id;return containers[id]=element,id},getContainerId=function(scope){return containers[scope.$id]?scope.$id:scope.$parent?getContainerId(scope.$parent):void 0},getContainer=function(scope){var id=getContainerId(scope);return id?containers[id]:$document},removeContainer=function(scope){var id=getContainerId(scope);id&&delete containers[id]};return{getContainerId:getContainerId,getContainer:getContainer,setContainer:setContainer,removeContainer:removeContainer}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(duScrollDuration,duScrollOffset,scrollContainerAPI){"use strict";return{link:function($scope,$element,$attr){$element.on("click",function(e){if($attr.href&&-1!==$attr.href.indexOf("#")||""!==$attr.duSmoothScroll){var id=$attr.href?$attr.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):$attr.duSmoothScroll,target=document.getElementById(id)||document.getElementsByName(id)[0];if(target&&target.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var offset=$attr.offset?parseInt($attr.offset,10):duScrollOffset,duration=$attr.duration?parseInt($attr.duration,10):duScrollDuration,container=scrollContainerAPI.getContainer($scope);container.duScrollToElement(angular.element(target),isNaN(offset)?0:offset,isNaN(duration)?0:duration)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(spyAPI){"use strict";return{restrict:"A",scope:!0,compile:function(tElement,tAttrs,transclude){return{pre:function($scope,iElement,iAttrs,controller){spyAPI.createContext($scope)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(scrollContainerAPI){"use strict";return{restrict:"A",scope:!0,compile:function(tElement,tAttrs,transclude){return{pre:function($scope,iElement,iAttrs,controller){iAttrs.$observe("duScrollContainer",function(element){angular.isString(element)&&(element=document.getElementById(element)),element=angular.isElement(element)?angular.element(element):iElement,scrollContainerAPI.setContainer($scope,element),$scope.$on("$destroy",function(){scrollContainerAPI.removeContainer($scope)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(spyAPI,duScrollOffset,$timeout,$rootScope){"use strict";var Spy=function(targetElementOrId,$scope,$element,offset){angular.isElement(targetElementOrId)?this.target=targetElementOrId:angular.isString(targetElementOrId)&&(this.targetId=targetElementOrId),this.$scope=$scope,this.$element=$element,this.offset=offset};return Spy.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},Spy.prototype.getTargetPosition=function(){var target=this.getTargetElement();return target?target.getBoundingClientRect():void 0},Spy.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function($scope,$element,$attr){var targetId,href=$attr.ngHref||$attr.href;if(href&&-1!==href.indexOf("#")?targetId=href.replace(/.*(?=#[^\s]+$)/,"").substring(1):$attr.duScrollspy?targetId=$attr.duScrollspy:$attr.duSmoothScroll&&(targetId=$attr.duSmoothScroll),targetId){var timeoutPromise=$timeout(function(){var spy=new Spy(targetId,$scope,$element,-($attr.offset?parseInt($attr.offset,10):duScrollOffset));spyAPI.addSpy(spy),$scope.$on("$locationChangeSuccess",spy.flushTargetCache.bind(spy));var deregisterOnStateChange=$rootScope.$on("$stateChangeSuccess",spy.flushTargetCache.bind(spy));$scope.$on("$destroy",function(){spyAPI.removeSpy(spy),deregisterOnStateChange()})},0,!1);$scope.$on("$destroy",function(){$timeout.cancel(timeoutPromise)})}}}}]);
!function(window,angular){"use strict";function nodeName_(element){return angular.lowercase(element.nodeName||element[0]&&element[0].nodeName)}function $TouchProvider($provide,$compileProvider){var ngClickOverrideEnabled=!1,ngClickDirectiveAdded=!1;this.ngClickOverrideEnabled=function(enabled){return angular.isDefined(enabled)?(enabled&&!ngClickDirectiveAdded&&(ngClickDirectiveAdded=!0,ngTouchClickDirectiveFactory.$$moduleName="ngTouch",$compileProvider.directive("ngClick",ngTouchClickDirectiveFactory),$provide.decorator("ngClickDirective",["$delegate",function($delegate){if(ngClickOverrideEnabled)$delegate.shift();else for(var i=$delegate.length-1;i>=0;){if("ngTouch"===$delegate[i].$$moduleName){$delegate.splice(i,1);break}i--}return $delegate}])),ngClickOverrideEnabled=enabled,this):ngClickOverrideEnabled},this.$get=function(){return{ngClickOverrideEnabled:function(){return ngClickOverrideEnabled}}}}function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){var MAX_VERTICAL_DISTANCE=75,MAX_VERTICAL_RATIO=.3,MIN_HORIZONTAL_DISTANCE=30;return function(scope,element,attr){function validSwipe(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&MAX_VERTICAL_DISTANCE>deltaY&&deltaX>0&&deltaX>MIN_HORIZONTAL_DISTANCE&&MAX_VERTICAL_RATIO>deltaY/deltaX}var startCoords,valid,swipeHandler=$parse(attr[directiveName]),pointerTypes=["touch"];angular.isDefined(attr.ngSwipeDisableMouse)||pointerTypes.push("mouse"),$swipe.bind(element,{start:function(coords,event){startCoords=coords,valid=!0},cancel:function(event){valid=!1},end:function(coords,event){validSwipe(coords)&&scope.$apply(function(){element.triggerHandler(eventName),swipeHandler(scope,{$event:event})})}},pointerTypes)}}])}var ngTouch=angular.module("ngTouch",[]);ngTouch.provider("$touch",$TouchProvider),$TouchProvider.$inject=["$provide","$compileProvider"],ngTouch.factory("$swipe",[function(){function getCoordinates(event){var originalEvent=event.originalEvent||event,touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=originalEvent.changedTouches&&originalEvent.changedTouches[0]||touches[0];return{x:e.clientX,y:e.clientY}}function getEvents(pointerTypes,eventType){var res=[];return angular.forEach(pointerTypes,function(pointerType){var eventName=POINTER_EVENTS[pointerType][eventType];eventName&&res.push(eventName)}),res.join(" ")}var MOVE_BUFFER_RADIUS=10,POINTER_EVENTS={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(element,eventHandlers,pointerTypes){var totalX,totalY,startCoords,lastPos,active=!1;pointerTypes=pointerTypes||["mouse","touch","pointer"],element.on(getEvents(pointerTypes,"start"),function(event){startCoords=getCoordinates(event),active=!0,totalX=0,totalY=0,lastPos=startCoords,eventHandlers.start&&eventHandlers.start(startCoords,event)});var events=getEvents(pointerTypes,"cancel");events&&element.on(events,function(event){active=!1,eventHandlers.cancel&&eventHandlers.cancel(event)}),element.on(getEvents(pointerTypes,"move"),function(event){if(active&&startCoords){var coords=getCoordinates(event);if(totalX+=Math.abs(coords.x-lastPos.x),totalY+=Math.abs(coords.y-lastPos.y),lastPos=coords,!(MOVE_BUFFER_RADIUS>totalX&&MOVE_BUFFER_RADIUS>totalY))return totalY>totalX?(active=!1,void(eventHandlers.cancel&&eventHandlers.cancel(event))):(event.preventDefault(),void(eventHandlers.move&&eventHandlers.move(coords,event)))}}),element.on(getEvents(pointerTypes,"end"),function(event){active&&(active=!1,eventHandlers.end&&eventHandlers.end(getCoordinates(event),event))})}}}]);var ngTouchClickDirectiveFactory=["$parse","$timeout","$rootElement",function($parse,$timeout,$rootElement){function hit(x1,y1,x2,y2){return Math.abs(x1-x2)<CLICKBUSTER_THRESHOLD&&Math.abs(y1-y2)<CLICKBUSTER_THRESHOLD}function checkAllowableRegions(touchCoordinates,x,y){for(var i=0;i<touchCoordinates.length;i+=2)if(hit(touchCoordinates[i],touchCoordinates[i+1],x,y))return touchCoordinates.splice(i,i+2),!0;return!1}function onClick(event){if(!(Date.now()-lastPreventedTime>PREVENT_DURATION)){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;1>x&&1>y||lastLabelClickCoordinates&&lastLabelClickCoordinates[0]===x&&lastLabelClickCoordinates[1]===y||(lastLabelClickCoordinates&&(lastLabelClickCoordinates=null),"label"===nodeName_(event.target)&&(lastLabelClickCoordinates=[x,y]),checkAllowableRegions(touchCoordinates,x,y)||(event.stopPropagation(),event.preventDefault(),event.target&&event.target.blur&&event.target.blur()))}}function onTouchStart(event){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;touchCoordinates.push(x,y),$timeout(function(){for(var i=0;i<touchCoordinates.length;i+=2)if(touchCoordinates[i]===x&&touchCoordinates[i+1]===y)return void touchCoordinates.splice(i,i+2)},PREVENT_DURATION,!1)}function preventGhostClick(x,y){touchCoordinates||($rootElement[0].addEventListener("click",onClick,!0),$rootElement[0].addEventListener("touchstart",onTouchStart,!0),touchCoordinates=[]),lastPreventedTime=Date.now(),checkAllowableRegions(touchCoordinates,x,y)}var lastPreventedTime,touchCoordinates,lastLabelClickCoordinates,TAP_DURATION=750,MOVE_TOLERANCE=12,PREVENT_DURATION=2500,CLICKBUSTER_THRESHOLD=25,ACTIVE_CLASS_NAME="ng-click-active";return function(scope,element,attr){function resetState(){tapping=!1,element.removeClass(ACTIVE_CLASS_NAME)}var tapElement,startTime,touchStartX,touchStartY,clickHandler=$parse(attr.ngClick),tapping=!1;element.on("touchstart",function(event){tapping=!0,tapElement=event.target?event.target:event.srcElement,3===tapElement.nodeType&&(tapElement=tapElement.parentNode),element.addClass(ACTIVE_CLASS_NAME),startTime=Date.now();var originalEvent=event.originalEvent||event,touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=touches[0];touchStartX=e.clientX,touchStartY=e.clientY}),element.on("touchcancel",function(event){resetState()}),element.on("touchend",function(event){var diff=Date.now()-startTime,originalEvent=event.originalEvent||event,touches=originalEvent.changedTouches&&originalEvent.changedTouches.length?originalEvent.changedTouches:originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=touches[0],x=e.clientX,y=e.clientY,dist=Math.sqrt(Math.pow(x-touchStartX,2)+Math.pow(y-touchStartY,2));tapping&&TAP_DURATION>diff&&MOVE_TOLERANCE>dist&&(preventGhostClick(x,y),tapElement&&tapElement.blur(),angular.isDefined(attr.disabled)&&attr.disabled!==!1||element.triggerHandler("click",[event])),resetState()}),element.onclick=function(event){},element.on("click",function(event,touchend){scope.$apply(function(){clickHandler(scope,{$event:touchend||event})})}),element.on("mousedown",function(event){element.addClass(ACTIVE_CLASS_NAME)}),element.on("mousemove mouseup",function(event){element.removeClass(ACTIVE_CLASS_NAME)})}}];makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular);
xml2json={parser:function(xmlcode,ignoretags,debug){ignoretags||(ignoretags=""),xmlcode=xmlcode.replace(/\s*\/>/g,"/>"),xmlcode=xmlcode.replace(/<\?[^>]*>/g,"").replace(/<\![^>]*>/g,""),ignoretags.sort||(ignoretags=ignoretags.split(","));var x=this.no_fast_endings(xmlcode);x=this.attris_to_tags(x),x=escape(x),x=x.split("%3C").join("<").split("%3E").join(">").split("%3D").join("=").split("%22").join('"');for(var i=0;i<ignoretags.length;i++)x=x.replace(new RegExp("<"+ignoretags[i]+">","g"),"*$**"+ignoretags[i]+"**$*"),x=x.replace(new RegExp("</"+ignoretags[i]+">","g"),"*$***"+ignoretags[i]+"**$*");x="<JSONTAGWRAPPER>"+x+"</JSONTAGWRAPPER>",this.xmlobject={};var y=this.xml_to_object(x).jsontagwrapper;return debug&&(y=this.show_json_structure(y,debug)),y},xml_to_object:function(xmlcode){var x=xmlcode.replace(/<\//g,"Â§");x=x.split("<");for(var y=[],level=0,opentags=[],i=1;i<x.length;i++){var tagname=x[i].split(">")[0];for(opentags.push(tagname),level++,y.push(level+"<"+x[i].split("Â§")[0]);x[i].indexOf("Â§"+opentags[opentags.length-1]+">")>=0;)level--,opentags.pop()}var oldniva=-1,objname="this.xmlobject";for(i=0;i<y.length;i++){var preeval="",niva=y[i].split("<")[0],tagnamn=y[i].split("<")[1].split(">")[0];tagnamn=tagnamn.toLowerCase();var rest=y[i].split(">")[1];if(oldniva>=niva)for(var tabort=oldniva-niva+1,j=0;tabort>j;j++)objname=objname.substring(0,objname.lastIndexOf("."));objname+="."+tagnamn,objname=objname.replace(/-/g,"");var pobject=objname.substring(0,objname.lastIndexOf("."));"object"!=eval("typeof "+pobject)&&(preeval+=pobject+"={value:"+pobject+"};\n");var objlast=objname.substring(objname.lastIndexOf(".")+1),already=!1;for(var k in eval(pobject))k==objlast&&(already=!0);for(var onlywhites=!0,s=0;s<rest.length;s+=3)"%"!=rest.charAt(s)&&(onlywhites=!1);""==rest||onlywhites?rest="{}":rest/1!=rest&&(rest="'"+rest.replace(/\'/g,"\\'")+"'",rest=rest.replace(/\*\$\*\*\*/g,"</"),rest=rest.replace(/\*\$\*\*/g,"<"),rest=rest.replace(/\*\*\$\*/g,">")),"'"==rest.charAt(0)&&(rest="unescape("+rest+")"),already&&!eval(objname+".sort")&&(preeval+=objname+"=["+objname+"];\n");var before="=",after="";already&&(before=".push(",after=")");var toeval=preeval+objname+before+rest+after;eval(toeval),eval(objname+".sort")&&(objname+="["+eval(objname+".length-1")+"]"),oldniva=niva}return this.xmlobject},show_json_structure:function(obj,debug,l){var x="";x+=obj.sort?"[\n":"{\n";for(i in obj)if(obj.hasOwnProperty(i))if(obj.sort||(x+=i+":"),"object"==typeof obj[i])x+=this.show_json_structure(obj[i],!1,1);else if("function"==typeof obj[i]){var v=obj[i]+"";x+=v}else x+="string"!=typeof obj[i]?obj[i]+",\n":"'"+obj[i].replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")+"',\n";if(x+=obj.sort?"],\n":"},\n",!l){x=x.substring(0,x.lastIndexOf(",")),x=x.replace(new RegExp(",\n}","g"),"\n}"),x=x.replace(new RegExp(",\n]","g"),"\n]");var y=x.split("\n");x="";for(var lvl=0,tabs="",i=0;i<y.length;i++){(y[i].indexOf("}")>=0||y[i].indexOf("]")>=0)&&lvl--,tabs="";for(var j=0;lvl>j;j++)tabs+="	";x+=tabs+y[i]+"\n",(y[i].indexOf("{")>=0||y[i].indexOf("[")>=0)&&lvl++}"html"==debug&&(x=x.replace(/</g,"&lt;").replace(/>/g,"&gt;"),x=x.replace(/\n/g,"<BR>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")),"compact"==debug&&(x=x.replace(/\n/g,"").replace(/\t/g,""))}return x},no_fast_endings:function(x){x=x.split("/>");for(var i=1;i<x.length;i++){var t=x[i-1].substring(x[i-1].lastIndexOf("<")+1).split(" ")[0];x[i]="></"+t+">"+x[i]}return x=x.join("")},attris_to_tags:function(x){var d=" =\"'".split("");x=x.split(">");for(var i=0;i<x.length;i++){var temp=x[i].split("<");for(r=0;4>r;r++)temp[0]=temp[0].replace(new RegExp(d[r],"g"),"_jsonconvtemp"+r+"_");if(temp[1]){temp[1]=temp[1].replace(/'/g,'"'),temp[1]=temp[1].split('"');for(var j=1;j<temp[1].length;j+=2)for(var r=0;4>r;r++)temp[1][j]=temp[1][j].replace(new RegExp(d[r],"g"),"_jsonconvtemp"+r+"_");temp[1]=temp[1].join('"')}x[i]=temp.join("<")}for(x=x.join(">"),x=x.replace(/ ([^=]*)=([^ |>]*)/g,"><$1>$2</$1"),x=x.replace(/>"/g,">").replace(/"</g,"<"),r=0;4>r;r++)x=x.replace(new RegExp("_jsonconvtemp"+r+"_","g"),d[r]);return x}},Array.prototype.push||(Array.prototype.push=function(x){return this[this.length]=x,!0}),Array.prototype.pop||(Array.prototype.pop=function(){var response=this[this.length-1];return this.length--,response}),function(){angular.module("angularXml2json",[]).factory("ngXml2json",function(){return xml2json})}();
/**
 * State-based routing for AngularJS
 * @version v0.2.13
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return M(new(M(function(){},{prototype:a})),b)}function e(a){return L(arguments,function(b){b!==a&&L(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var c=[];return b.forEach(a,function(a,b){c.push(b)}),c}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return M({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return L(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function m(a,b){var c=K(a),d=c?[]:{};return L(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function n(a,b){var c=K(a)?[]:{};return L(a,function(a,d){c[d]=b(a,d)}),c}function o(a,b){var d=1,f=2,i={},j=[],k=i,m=M(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,I(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);L(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return J(a)&&a.then&&a.$$promises}if(!J(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return L(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!G(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;L(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!J(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=m;var n=a.defer(),r=n.promise,s=r.$$promises={},t=M({},d),u=1+q.length/3,v=!1;if(G(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,l(f.$$inheritedValues,p)),M(s,f.$$promises),f.$$values?(v=e(t,l(f.$$values,p)),r.$$inheritedValues=l(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=l(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function p(a,b,c){this.fromConfig=function(a,b,c){return G(a.template)?this.fromString(a.template,b):G(a.templateUrl)?this.fromUrl(a.templateUrl,b):G(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return H(a)?a(b):a},this.fromUrl=function(c,d){return H(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function q(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new O.Param(b,c,d,e),p[b]}function g(a,b,c){var d=["",""],e=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return e;switch(c){case!1:d=["(",")"];break;case!0:d=["?(",")?"];break;default:d=["("+c+"|",")?"]}return e+d[0]+b+d[1]}function h(c,e){var f,g,h,i,j;return f=c[2]||c[3],j=b.params[f],h=a.substring(m,c.index),g=e?c[4]:c[4]||("*"==c[1]?".*":null),i=O.type(g||"string")||d(O.type("string"),{pattern:new RegExp(g)}),{id:f,regexp:g,segment:h,type:i,cfg:j}}b=M({params:{}},J(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new O.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function r(a){M(this,a)}function s(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(a){return this.pattern.test(a)}function i(){return{strict:t,caseInsensitive:p}}function j(a){return H(a)||K(a)&&H(a[a.length-1])}function k(){for(;x.length;){var a=x.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(v[a.name],o.invoke(a.def))}}function l(a){M(this,a||{})}O=this;var o,p=!1,t=!0,u=!1,v={},w=!0,x=[],y={string:{encode:a,decode:e,is:f,pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return G(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,is:b.identity,equals:b.equals,pattern:/.*/}};s.$$getDefaultValue=function(a){if(!j(a.value))return a.value;if(!o)throw new Error("Injectable functions cannot be called at configuration time");return o.invoke(a.value)},this.caseInsensitive=function(a){return G(a)&&(p=a),p},this.strictMode=function(a){return G(a)&&(t=a),t},this.defaultSquashPolicy=function(a){if(!G(a))return u;if(a!==!0&&a!==!1&&!I(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return u=a,a},this.compile=function(a,b){return new q(a,M(i(),b))},this.isMatcher=function(a){if(!J(a))return!1;var b=!0;return L(q.prototype,function(c,d){H(c)&&(b=b&&G(a[d])&&H(a[d]))}),b},this.type=function(a,b,c){if(!G(b))return v[a];if(v.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return v[a]=new r(M({name:a},b)),c&&(x.push({name:a,def:c}),w||k()),this},L(y,function(a,b){v[b]=new r(M({name:b},a))}),v=d(v,{}),this.$get=["$injector",function(a){return o=a,w=!1,k(),L(y,function(a,b){v[b]||(v[b]=new r(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=J(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=j(a.value)?a.value:function(){return a.value},a}function i(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof r?b.type:new r(b.type):"config"===d?v.any:v.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return M(b,c,d).array}function l(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!G(c)||null==c)return u;if(c===!0||I(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=K(a.replace)?a.replace:[],I(e)&&f.push({from:e,to:c}),g=n(f,function(a){return a.from}),m(i,function(a){return-1===h(g,a.from)}).concat(f)}function q(){if(!o)throw new Error("Injectable functions cannot be called at configuration time");return o.invoke(d.$$fn)}function s(a){function b(a){return function(b){return b.from===a}}function c(a){var c=n(m(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),G(a)?w.type.decode(a):q()}function t(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=i(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=l(d,y),A=p(d,x,y,z);M(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:s,dynamic:c,config:d,toString:t})},l.prototype={$$new:function(){return d(this,M(new l,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(l.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),L(b,function(b){L(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return L(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return L(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var b,c,d,e=!0,f=this;return L(this.$$keys(),function(g){d=f[g],c=a[g],b=!c&&d.isOptional,e=e&&(b||!!d.type.is(c))}),e},$$parent:c},this.ParamSet=l}function t(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return G(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(I(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){var e=o&&d.url()===o;if(o=c,e)return!0;var g,h=j.length;for(g=0;h>g;g++)if(b(j[g]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){d.url(a.format(b||{})),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!H(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(I(a)){var b=a;a=function(){return b}}else if(!H(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=I(b);if(I(a)&&(a=d.compile(a)),!h&&!H(b)&&!K(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),M(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:I(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),M(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function u(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function l(a,b){if(!a)return c;var d=I(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=l(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var m=y[e];return!m||!d&&(d||m!==a&&m.self!==a)?c:m}function m(a,b){z[a]||(z[a]=[]),z[a].push(b)}function o(a){for(var b=z[a]||[];b.length;)p(b.shift())}function p(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!I(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(y.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):I(b.parent)?b.parent:J(b.parent)&&I(b.parent.name)?b.parent.name:"";if(e&&!y[e])return m(e,b.self);for(var f in B)H(B[f])&&(b[f]=B[f](b,B.$delegates[f]));return y[c]=b,!b[A]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){x.$current.navigable==b&&j(a,c)||x.transitionTo(b,a,{inherit:!0,location:!1})}]),o(c),b}function q(a){return a.indexOf("*")>-1}function r(a){var b=a.split("."),c=x.$current.name.split(".");if("**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length)return!1;for(var d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return c.join("")===b.join("")}function s(a,b){return I(a)&&!G(b)?B[a]:H(b)&&I(a)?(B[a]&&!B.$delegates[a]&&(B.$delegates[a]=B[a]),B[a]=b,this):this}function t(a,b){return J(a)?b=a:b.name=a,p(b),this}function u(a,e,f,h,m,o,p){function s(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),B;if(!g.retry)return null;if(f.$retry)return p.update(),C;var h=x.transition=e.when(g.retry);return h.then(function(){return h!==x.transition?u:(b.options.$retry=!0,x.transitionTo(b.to,b.toParams,b.options))},function(){return B}),p.update(),h}function t(a,c,d,g,i,j){var l=d?c:k(a.params.$$keys(),c),n={$stateParams:l};i.resolve=m.resolve(a.resolve,n,i.resolve,a);var o=[i.resolve.then(function(a){i.globals=a})];return g&&o.push(g),L(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return f.load(d,{view:c,locals:n,params:l,notify:j.notify})||""}],o.push(m.resolve(e,n,i.resolve,a).then(function(f){if(H(c.controllerProvider)||K(c.controllerProvider)){var g=b.extend({},e,n);f.$$controller=h.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,f.$$controllerAs=c.controllerAs,i[d]=f}))}),e.all(o).then(function(){return i})}var u=e.reject(new Error("transition superseded")),z=e.reject(new Error("transition prevented")),B=e.reject(new Error("transition aborted")),C=e.reject(new Error("transition failed"));return w.locals={resolve:null,globals:{$stateParams:{}}},x={params:{},current:w.self,$current:w,transition:null},x.reload=function(){return x.transitionTo(x.current,o,{reload:!0,inherit:!1,notify:!0})},x.go=function(a,b,c){return x.transitionTo(a,b,M({inherit:!0,relative:x.$current},c))},x.transitionTo=function(b,c,f){c=c||{},f=M({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=x.$current,m=x.params,n=j.path,q=l(b,f.relative);if(!G(q)){var r={to:b,toParams:c,options:f},y=s(r,j.self,m,f);if(y)return y;if(b=r.to,c=r.toParams,f=r.options,q=l(b,f.relative),!G(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[A])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(o,c||{},x.$current,q)),!q.params.$$validates(c))return C;c=q.params.$$values(c),b=q;var B=b.path,D=0,E=B[D],F=w.locals,H=[];if(!f.reload)for(;E&&E===n[D]&&E.ownParams.$$equals(c,m);)F=H[D]=E.locals,D++,E=B[D];if(v(b,j,F,f))return b.self.reloadOnSearch!==!1&&p.update(),x.transition=null,e.when(x.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,m).defaultPrevented)return p.update(),z;for(var I=e.when(F),J=D;J<B.length;J++,E=B[J])F=H[J]=d(F),I=t(E,c,E===b,I,F,f);var K=x.transition=I.then(function(){var d,e,g;if(x.transition!==K)return u;for(d=n.length-1;d>=D;d--)g=n[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<B.length;d++)e=B[d],e.locals=H[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return x.transition!==K?u:(x.$current=b,x.current=b.self,x.params=c,N(x.params,o),x.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,m),p.update(!0),x.current)},function(d){return x.transition!==K?u:(x.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,m,d),g.defaultPrevented||p.update(),e.reject(d))});return K},x.is=function(a,b,d){d=M({relative:x.$current},d||{});var e=l(a,d.relative);return G(e)?x.$current!==e?!1:b?j(e.params.$$values(b),o):!0:c},x.includes=function(a,b,d){if(d=M({relative:x.$current},d||{}),I(a)&&q(a)){if(!r(a))return!1;a=x.$current.name}var e=l(a,d.relative);return G(e)?G(x.$current.includes[e.name])?b?j(e.params.$$values(b),o,g(b)):!0:!1:c},x.href=function(a,b,d){d=M({lossy:!0,inherit:!0,absolute:!1,relative:x.$current},d||{});var e=l(a,d.relative);if(!G(e))return null;d.inherit&&(b=i(o,b||{},x.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys(),b||{}),{absolute:d.absolute}):null},x.get=function(a,b){if(0===arguments.length)return n(g(y),function(a){return y[a].self});var c=l(a,b||x.$current);return c&&c.self?c.self:null},x}function v(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var w,x,y={},z={},A="abstract",B={parent:function(a){if(G(a.parent)&&a.parent)return l(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?l(b[1]):w},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=M({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(I(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||w).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new O.ParamSet;return L(a.params||{},function(a,c){b[c]||(b[c]=new O.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?M(a.parent.params.$$new(),a.ownParams):new O.ParamSet},views:function(a){var b={};return L(G(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?M({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};w=p({name:"",url:"^",views:null,"abstract":!0}),w.navigable=null,this.decorator=s,this.state=t,this.$get=u,u.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function v(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=M(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function w(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView()},0,!1)}}]}function x(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=z(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function y(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=z(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function z(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function A(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function B(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function C(a,c){var d=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=A(g.uiSref,a.current.name),j=null,k=B(f)||a.$current,l=null,m="A"===f.prop("tagName"),n="FORM"===f[0].nodeName,o=n?"action":"href",p=!0,q={relative:k,inherit:!0},r=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in r&&(q[a]=r[a])});var s=function(c){if(c&&(j=b.copy(c)),p){l=a.href(i.state,j,q);var d=h[1]||h[0];return d&&d.$$setStateInfo(i.state,j),null===l?(p=!1,!1):void g.$set(o,l)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a){a!==j&&s(a)},!0),j=b.copy(e.$eval(i.paramExpr))),s(),n||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,q)});b.preventDefault();var g=m&&!l?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function D(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(j):d.removeClass(j)}function g(){return"undefined"!=typeof e.uiSrefActiveEq?h&&a.is(h.name,i):h&&a.includes(h.name,i)}var h,i,j;j=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$setStateInfo=function(b,c){h=a.get(b,B(d)),i=c,f()},b.$on("$stateChangeSuccess",f)}]}}function E(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function F(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var G=b.isDefined,H=b.isFunction,I=b.isString,J=b.isObject,K=b.isArray,L=b.forEach,M=b.extend,N=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),o.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",o),p.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",p);var O;q.prototype.concat=function(a,b){var c={caseInsensitive:O.caseInsensitive(),strict:O.strictMode(),squash:O.defaultSquashPolicy()};return new q(this.sourcePath+a+this.sourceSearch,M(c,b),this)},q.prototype.toString=function(){return this.source},q.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/,"-")}var d=b(a).split(/-(?!\\)/),e=n(d,b);return n(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},q.prototype.parameters=function(a){return G(a)?this.params[a]||null:this.$$paramNames},q.prototype.validates=function(a){return this.params.$$validates(a)},q.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],o=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),o),q=p?m.squash:!1,r=m.type.encode(o);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=K(r)?n(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else I(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;K(r)||(r=[r]),r=n(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},r.prototype.is=function(){return!0},r.prototype.encode=function(a){return a},r.prototype.decode=function(a){return a},r.prototype.equals=function(a,b){return a==b},r.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},r.prototype.pattern=/.*/,r.prototype.toString=function(){return"{Type:"+this.name+"}"},r.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return K(a)?a:G(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=n(c,a);return b===!0?0===m(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",s),b.module("ui.router.util").run(["$urlMatcherFactory",function(){}]),t.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",t),u.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",u),v.$inject=[],b.module("ui.router.state").provider("$view",v),b.module("ui.router.state").provider("$uiViewScroll",w),x.$inject=["$state","$injector","$uiViewScroll","$interpolate"],y.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",x),b.module("ui.router.state").directive("uiView",y),C.$inject=["$state","$timeout"],D.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",C).directive("uiSrefActive",D).directive("uiSrefActiveEq",D),E.$inject=["$state"],F.$inject=["$state"],b.module("ui.router.state").filter("isState",E).filter("includedByState",F)}(window,window.angular);
/*!
  * Bowser - a browser detector
  * https://github.com/ded/bowser
  * MIT License | (c) Dustin Diaz 2014
  */
!function(e,t){typeof module!="undefined"&&module.exports?module.exports.browser=t():typeof define=="function"&&define.amd?define(t):this[e]=t()}("bowser",function(){function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}var r=n(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(t),s=!i&&/android/i.test(t),o=n(/version\/(\d+(\.\d+)?)/i),u=/tablet/i.test(t),a=!u&&/[^-]mobi/i.test(t),f;/opera|opr/i.test(t)?f={name:"Opera",opera:e,version:o||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(t)?f={name:"Windows Phone",windowsphone:e,msie:e,version:n(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(t)?f={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(t)?f={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?(f={name:r=="iphone"?"iPhone":r=="ipad"?"iPad":"iPod"},o&&(f.version=o)):/sailfish/i.test(t)?f={name:"Sailfish",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?f={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(f={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(f.firefoxos=e)):/silk/i.test(t)?f={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:s?f={name:"Android",version:o}:/phantom/i.test(t)?f={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?f={name:"BlackBerry",blackberry:e,version:o||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(t)?(f={name:"WebOS",webos:e,version:o||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(f.touchpad=e)):/bada/i.test(t)?f={name:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(t)?f={name:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||o}:/safari/i.test(t)?f={name:"Safari",safari:e,version:o}:f={},/(apple)?webkit/i.test(t)?(f.name=f.name||"Webkit",f.webkit=e,!f.version&&o&&(f.version=o)):!f.opera&&/gecko\//i.test(t)&&(f.name=f.name||"Gecko",f.gecko=e,f.version=f.version||n(/gecko\/(\d+(\.\d+)?)/i)),s||f.silk?f.android=e:r&&(f[r]=e,f.ios=e);var l="";r?(l=n(/os (\d+([_\s]\d+)*) like mac os x/i),l=l.replace(/[_\s]/g,".")):s?l=n(/android[ \/-](\d+(\.\d+)*)/i):f.windowsphone?l=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):f.webos?l=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):f.blackberry?l=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):f.bada?l=n(/bada\/(\d+(\.\d+)*)/i):f.tizen&&(l=n(/tizen[\/\s](\d+(\.\d+)*)/i)),l&&(f.osversion=l);var c=l.split(".")[0];if(u||r=="ipad"||s&&(c==3||c==4&&!a)||f.silk)f.tablet=e;else if(a||r=="iphone"||r=="ipod"||s||f.blackberry||f.webos||f.bada)f.mobile=e;return f.msie&&f.version>=10||f.chrome&&f.version>=20||f.firefox&&f.version>=20||f.safari&&f.version>=6||f.opera&&f.version>=10||f.ios&&f.osversion&&f.osversion.split(".")[0]>=6||f.blackberry&&f.version>=10.1?f.a=e:f.msie&&f.version<10||f.chrome&&f.version<20||f.firefox&&f.version<20||f.safari&&f.version<6||f.opera&&f.version<10||f.ios&&f.osversion&&f.osversion.split(".")[0]<6?f.c=e:f.x=e,f}var e=!0,n=t(typeof navigator!="undefined"?navigator.userAgent:"");return n._detect=t,n})
!function(window,angular){"use strict";function jsonStringToDate(string){var match,R_ISO8061_STR=/^(-?\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;if(match=string.match(R_ISO8061_STR)){var date=new Date(0),tzHour=0,tzMin=0;return match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),date.setUTCFullYear(toInt(match[1]),toInt(match[2])-1,toInt(match[3])),date.setUTCHours(toInt(match[4]||0)-tzHour,toInt(match[5]||0)-tzMin,toInt(match[6]||0),toInt(match[7]||0)),date}return string}function toInt(str){return parseInt(str,10)}function padNumberInMock(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function createHttpBackendMock($rootScope,$timeout,$delegate,$browser){function createResponse(status,data,headers,statusText){return angular.isFunction(status)?status:function(){return angular.isNumber(status)?[status,data,headers,statusText]:[200,status,data,headers]}}function $httpBackend(method,url,data,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers){function prettyPrint(data){return angular.isString(data)||angular.isFunction(data)||data instanceof RegExp?data:angular.toJson(data)}function wrapResponse(wrapped){function handleResponse(){var response=wrapped.response(method,url,data,headers,wrapped.params(url));xhr.$$respHeaders=response[2],callback(copy(response[0]),copy(response[1]),xhr.getAllResponseHeaders(),copy(response[3]||""))}function handleTimeout(){for(var i=0,ii=responses.length;ii>i;i++)if(responses[i]===handleResponse){responses.splice(i,1),callback(-1,void 0,"");break}}return!$browser&&timeout&&(timeout.then?timeout.then(handleTimeout):$timeout(handleTimeout,timeout)),handleResponse}var xhr=new MockXhr,expectation=expectations[0],wasExpected=!1;if(xhr.$$events=eventHandlers,xhr.upload.$$events=uploadEventHandlers,expectation&&expectation.match(method,url)){if(!expectation.matchData(data))throw new Error("Expected "+expectation+" with different data\nEXPECTED: "+prettyPrint(expectation.data)+"\nGOT:      "+data);if(!expectation.matchHeaders(headers))throw new Error("Expected "+expectation+" with different headers\nEXPECTED: "+prettyPrint(expectation.headers)+"\nGOT:      "+prettyPrint(headers));if(expectations.shift(),expectation.response)return void responses.push(wrapResponse(expectation));wasExpected=!0}for(var definition,i=-1;definition=definitions[++i];)if(definition.match(method,url,data,headers||{})){if(definition.response)($browser?$browser.defer:responsesPush)(wrapResponse(definition));else{if(!definition.passThrough)throw new Error("No response defined !");$delegate(method,url,data,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers)}return}throw wasExpected?new Error("No response defined !"):new Error("Unexpected request: "+method+" "+url+"\n"+(expectation?"Expected "+expectation:"No more request expected"))}function parseRoute(url){var ret={regexp:url},keys=ret.keys=[];return url&&angular.isString(url)?(url=url.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([?*])?/g,function(_,slash,key,option){var optional="?"===option?option:null,star="*"===option?option:null;return keys.push({name:key,optional:!!optional}),slash=slash||"",""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+?)"||"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$*])/g,"\\$1"),ret.regexp=new RegExp("^"+url,"i"),ret):ret}function createShortMethods(prefix){angular.forEach(["GET","DELETE","JSONP","HEAD"],function(method){$httpBackend[prefix+method]=function(url,headers,keys){return $httpBackend[prefix](method,url,void 0,headers,keys)}}),angular.forEach(["PUT","POST","PATCH"],function(method){$httpBackend[prefix+method]=function(url,data,headers,keys){return $httpBackend[prefix](method,url,data,headers,keys)}})}var definitions=[],expectations=[],responses=[],responsesPush=angular.bind(responses,responses.push),copy=angular.copy;return $httpBackend.when=function(method,url,data,headers,keys){var definition=new MockHttpExpectation(method,url,data,headers,keys),chain={respond:function(status,data,headers,statusText){return definition.passThrough=void 0,definition.response=createResponse(status,data,headers,statusText),chain}};return $browser&&(chain.passThrough=function(){return definition.response=void 0,definition.passThrough=!0,chain}),definitions.push(definition),chain},createShortMethods("when"),$httpBackend.whenRoute=function(method,url){var pathObj=parseRoute(url);return $httpBackend.when(method,pathObj.regexp,void 0,void 0,pathObj.keys)},$httpBackend.expect=function(method,url,data,headers,keys){var expectation=new MockHttpExpectation(method,url,data,headers,keys),chain={respond:function(status,data,headers,statusText){return expectation.response=createResponse(status,data,headers,statusText),chain}};return expectations.push(expectation),chain},createShortMethods("expect"),$httpBackend.expectRoute=function(method,url){var pathObj=parseRoute(url);return $httpBackend.expect(method,pathObj.regexp,void 0,void 0,pathObj.keys)},$httpBackend.flush=function(count,skip,digest){if(digest!==!1&&$rootScope.$digest(),skip=skip||0,skip>=responses.length)throw new Error("No pending request to flush !");if(angular.isDefined(count)&&null!==count)for(;count--;){var part=responses.splice(skip,1);if(!part.length)throw new Error("No more pending request to flush !");part[0]()}else for(;responses.length>skip;)responses.splice(skip,1)[0]();$httpBackend.verifyNoOutstandingExpectation(digest)},$httpBackend.verifyNoOutstandingExpectation=function(digest){if(digest!==!1&&$rootScope.$digest(),expectations.length)throw new Error("Unsatisfied requests: "+expectations.join(", "))},$httpBackend.verifyNoOutstandingRequest=function(){if(responses.length)throw new Error("Unflushed requests: "+responses.length)},$httpBackend.resetExpectations=function(){expectations.length=0,responses.length=0},$httpBackend}function MockHttpExpectation(method,url,data,headers,keys){function getUrlParams(u){var params=u.slice(u.indexOf("?")+1).split("&");return params.sort()}function compareUrl(u){return url.slice(0,url.indexOf("?"))===u.slice(0,u.indexOf("?"))&&getUrlParams(url).join()===getUrlParams(u).join()}this.data=data,this.headers=headers,this.match=function(m,u,d,h){return method!==m?!1:this.matchUrl(u)?angular.isDefined(d)&&!this.matchData(d)?!1:angular.isDefined(h)&&!this.matchHeaders(h)?!1:!0:!1},this.matchUrl=function(u){return url?angular.isFunction(url.test)?url.test(u):angular.isFunction(url)?url(u):url===u||compareUrl(u):!0},this.matchHeaders=function(h){return angular.isUndefined(headers)?!0:angular.isFunction(headers)?headers(h):angular.equals(headers,h)},this.matchData=function(d){return angular.isUndefined(data)?!0:data&&angular.isFunction(data.test)?data.test(d):data&&angular.isFunction(data)?data(d):data&&!angular.isString(data)?angular.equals(angular.fromJson(angular.toJson(data)),angular.fromJson(d)):data==d},this.toString=function(){return method+" "+url},this.params=function(u){function pathParams(){var keyObj={};if(!url||!angular.isFunction(url.test)||!keys||0===keys.length)return keyObj;var m=url.exec(u);if(!m)return keyObj;for(var i=1,len=m.length;len>i;++i){var key=keys[i-1],val=m[i];key&&val&&(keyObj[key.name||key]=val)}return keyObj}function parseQuery(){var key_value,key,obj={},queryStr=u.indexOf("?")>-1?u.substring(u.indexOf("?")+1):"";return angular.forEach(queryStr.split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),angular.isDefined(key))){var val=angular.isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?angular.isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}return angular.extend(parseQuery(),pathParams())}}function MockXhr(){MockXhr.$$lastInstance=this,this.open=function(method,url,async){this.$$method=method,this.$$url=url,this.$$async=async,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(data){this.$$data=data},this.setRequestHeader=function(key,value){this.$$reqHeaders[key]=value},this.getResponseHeader=function(name){var header=this.$$respHeaders[name];return header?header:(name=angular.lowercase(name),(header=this.$$respHeaders[name])?header:(header=void 0,angular.forEach(this.$$respHeaders,function(headerVal,headerName){header||angular.lowercase(headerName)!==name||(header=headerVal)}),header))},this.getAllResponseHeaders=function(){var lines=[];return angular.forEach(this.$$respHeaders,function(value,key){lines.push(key+": "+value)}),lines.join("\n")},this.abort=angular.noop,this.$$events={},this.addEventListener=function(name,listener){angular.isUndefined(this.$$events[name])&&(this.$$events[name]=[]),this.$$events[name].push(listener)},this.upload={$$events:{},addEventListener:this.addEventListener}}function createControllerDecorator(compileProvider){return angular.mock.$ControllerDecorator=["$delegate",function($delegate){return function(expression,locals,later,ident){if(later&&"object"==typeof later){var preAssignBindingsEnabled=compileProvider.preAssignBindingsEnabled(),instantiate=$delegate(expression,locals,!0,ident);preAssignBindingsEnabled&&angular.extend(instantiate.instance,later);var instance=instantiate();return preAssignBindingsEnabled&&instance===instantiate.instance||angular.extend(instance,later),instance}return $delegate(expression,locals,later,ident)}}],angular.mock.$ControllerDecorator}angular.mock={},angular.mock.$BrowserProvider=function(){this.$get=function(){return new angular.mock.$Browser}},angular.mock.$Browser=function(){var self=this;this.isMock=!0,self.$$url="http://server/",self.$$lastUrl=self.$$url,self.pollFns=[],self.$$completeOutstandingRequest=angular.noop,self.$$incOutstandingRequestCount=angular.noop,self.onUrlChange=function(listener){return self.pollFns.push(function(){(self.$$lastUrl!==self.$$url||self.$$state!==self.$$lastState)&&(self.$$lastUrl=self.$$url,self.$$lastState=self.$$state,listener(self.$$url,self.$$state))}),listener},self.$$applicationDestroyed=angular.noop,self.$$checkUrlChange=angular.noop,self.deferredFns=[],self.deferredNextId=0,self.defer=function(fn,delay){return delay=delay||0,self.deferredFns.push({time:self.defer.now+delay,fn:fn,id:self.deferredNextId}),self.deferredFns.sort(function(a,b){return a.time-b.time}),self.deferredNextId++},self.defer.now=0,self.defer.cancel=function(deferId){var fnIndex;return angular.forEach(self.deferredFns,function(fn,index){fn.id===deferId&&(fnIndex=index)}),angular.isDefined(fnIndex)?(self.deferredFns.splice(fnIndex,1),!0):!1},self.defer.flush=function(delay){var nextTime;if(angular.isDefined(delay))nextTime=self.defer.now+delay;else{if(!self.deferredFns.length)throw new Error("No deferred tasks to be flushed");nextTime=self.deferredFns[self.deferredFns.length-1].time}for(;self.deferredFns.length&&self.deferredFns[0].time<=nextTime;)self.defer.now=self.deferredFns[0].time,self.deferredFns.shift().fn();self.defer.now=nextTime},self.$$baseHref="/",self.baseHref=function(){return this.$$baseHref}},angular.mock.$Browser.prototype={poll:function(){angular.forEach(this.pollFns,function(pollFn){pollFn()})},url:function(url,replace,state){return angular.isUndefined(state)&&(state=null),url?(this.$$url=url,this.$$state=angular.copy(state),this):this.$$url},state:function(){return this.$$state},notifyWhenNoOutstandingRequests:function(fn){fn()}},angular.mock.$ExceptionHandlerProvider=function(){var handler;this.mode=function(mode){switch(mode){case"log":case"rethrow":var errors=[];handler=function(e){if(1===arguments.length?errors.push(e):errors.push([].slice.call(arguments,0)),"rethrow"===mode)throw e},handler.errors=errors;break;default:throw new Error("Unknown mode '"+mode+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return handler},this.mode("rethrow")},angular.mock.$LogProvider=function(){function concat(array1,array2,index){return array1.concat(Array.prototype.slice.call(array2,index))}var debug=!0;this.debugEnabled=function(flag){return angular.isDefined(flag)?(debug=flag,this):debug},this.$get=function(){var $log={log:function(){$log.log.logs.push(concat([],arguments,0))},warn:function(){$log.warn.logs.push(concat([],arguments,0))},info:function(){$log.info.logs.push(concat([],arguments,0))},error:function(){$log.error.logs.push(concat([],arguments,0))},debug:function(){debug&&$log.debug.logs.push(concat([],arguments,0))}};return $log.reset=function(){$log.log.logs=[],$log.info.logs=[],$log.warn.logs=[],$log.error.logs=[],$log.debug.logs=[]},$log.assertEmpty=function(){var errors=[];if(angular.forEach(["error","warn","info","log","debug"],function(logLevel){angular.forEach($log[logLevel].logs,function(log){angular.forEach(log,function(logItem){errors.push("MOCK $log ("+logLevel+"): "+String(logItem)+"\n"+(logItem.stack||""))})})}),errors.length)throw errors.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),errors.push(""),new Error(errors.join("\n---------\n"))},$log.reset(),$log}},angular.mock.$IntervalProvider=function(){this.$get=["$browser","$rootScope","$q","$$q",function($browser,$rootScope,$q,$$q){var repeatFns=[],nextRepeatId=0,now=0,$interval=function(fn,delay,count,invokeApply){function tick(){if(deferred.notify(iteration++),count>0&&iteration>=count){var fnIndex;deferred.resolve(iteration),angular.forEach(repeatFns,function(fn,index){fn.id===promise.$$intervalId&&(fnIndex=index)}),angular.isDefined(fnIndex)&&repeatFns.splice(fnIndex,1)}skipApply?$browser.defer.flush():$rootScope.$apply()}var hasParams=arguments.length>4,args=hasParams?Array.prototype.slice.call(arguments,4):[],iteration=0,skipApply=angular.isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=angular.isDefined(count)?count:0,promise.then(null,null,hasParams?function(){fn.apply(null,args)}:fn),promise.$$intervalId=nextRepeatId,repeatFns.push({nextTime:now+delay,delay:delay,fn:tick,id:nextRepeatId,deferred:deferred}),repeatFns.sort(function(a,b){return a.nextTime-b.nextTime}),nextRepeatId++,promise};return $interval.cancel=function(promise){if(!promise)return!1;var fnIndex;return angular.forEach(repeatFns,function(fn,index){fn.id===promise.$$intervalId&&(fnIndex=index)}),angular.isDefined(fnIndex)?(repeatFns[fnIndex].deferred.reject("canceled"),repeatFns.splice(fnIndex,1),!0):!1},$interval.flush=function(millis){for(now+=millis;repeatFns.length&&repeatFns[0].nextTime<=now;){var task=repeatFns[0];task.fn(),task.nextTime+=task.delay,repeatFns.sort(function(a,b){return a.nextTime-b.nextTime})}return millis},$interval}]},angular.mock.TzDate=function(offset,timestamp){var self=new Date(0);if(angular.isString(timestamp)){var tsStr=timestamp;if(self.origDate=jsonStringToDate(timestamp),timestamp=self.origDate.getTime(),isNaN(timestamp))throw{name:"Illegal Argument",message:"Arg '"+tsStr+"' passed into TzDate constructor is not a valid date string"}}else self.origDate=new Date(timestamp);var localOffset=new Date(timestamp).getTimezoneOffset();self.offsetDiff=60*localOffset*1e3-1e3*offset*60*60,self.date=new Date(timestamp+self.offsetDiff),self.getTime=function(){return self.date.getTime()-self.offsetDiff},self.toLocaleDateString=function(){return self.date.toLocaleDateString()},self.getFullYear=function(){return self.date.getFullYear()},self.getMonth=function(){return self.date.getMonth()},self.getDate=function(){return self.date.getDate()},self.getHours=function(){return self.date.getHours()},self.getMinutes=function(){return self.date.getMinutes()},self.getSeconds=function(){return self.date.getSeconds()},self.getMilliseconds=function(){return self.date.getMilliseconds()},self.getTimezoneOffset=function(){return 60*offset},self.getUTCFullYear=function(){return self.origDate.getUTCFullYear()},self.getUTCMonth=function(){return self.origDate.getUTCMonth()},self.getUTCDate=function(){return self.origDate.getUTCDate()},self.getUTCHours=function(){return self.origDate.getUTCHours()},self.getUTCMinutes=function(){return self.origDate.getUTCMinutes()},self.getUTCSeconds=function(){return self.origDate.getUTCSeconds()},self.getUTCMilliseconds=function(){return self.origDate.getUTCMilliseconds()},self.getDay=function(){return self.date.getDay()},self.toISOString&&(self.toISOString=function(){return padNumberInMock(self.origDate.getUTCFullYear(),4)+"-"+padNumberInMock(self.origDate.getUTCMonth()+1,2)+"-"+padNumberInMock(self.origDate.getUTCDate(),2)+"T"+padNumberInMock(self.origDate.getUTCHours(),2)+":"+padNumberInMock(self.origDate.getUTCMinutes(),2)+":"+padNumberInMock(self.origDate.getUTCSeconds(),2)+"."+padNumberInMock(self.origDate.getUTCMilliseconds(),3)+"Z"});var unimplementedMethods=["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"];return angular.forEach(unimplementedMethods,function(methodName){self[methodName]=function(){throw new Error("Method '"+methodName+"' is not implemented in the TzDate mock")}}),self},angular.mock.TzDate.prototype=Date.prototype,angular.mock.animate=angular.module("ngAnimateMock",["ng"]).config(["$provide",function($provide){$provide.factory("$$forceReflow",function(){function reflowFn(){reflowFn.totalReflows++}return reflowFn.totalReflows=0,reflowFn}),$provide.factory("$$animateAsyncRun",function(){var queue=[],queueFn=function(){return function(fn){queue.push(fn)}};return queueFn.flush=function(){if(0===queue.length)return!1;for(var i=0;i<queue.length;i++)queue[i]();return queue=[],!0},queueFn}),$provide.decorator("$$animateJs",["$delegate",function($delegate){var runners=[],animateJsConstructor=function(){var animator=$delegate.apply($delegate,arguments);return animator&&runners.push(animator),animator};return animateJsConstructor.$closeAndFlush=function(){runners.forEach(function(runner){runner.end()}),runners=[]},animateJsConstructor}]),$provide.decorator("$animateCss",["$delegate",function($delegate){var runners=[],animateCssConstructor=function(element,options){var animator=$delegate(element,options);return runners.push(animator),animator};return animateCssConstructor.$closeAndFlush=function(){runners.forEach(function(runner){runner.end()}),runners=[]},animateCssConstructor}]),$provide.decorator("$animate",["$delegate","$timeout","$browser","$$rAF","$animateCss","$$animateJs","$$forceReflow","$$animateAsyncRun","$rootScope",function($delegate,$timeout,$browser,$$rAF,$animateCss,$$animateJs,$$forceReflow,$$animateAsyncRun,$rootScope){var animate={queue:[],cancel:$delegate.cancel,on:$delegate.on,off:$delegate.off,pin:$delegate.pin,get reflows(){return $$forceReflow.totalReflows},enabled:$delegate.enabled,closeAndFlush:function(){this.flush(!0),$animateCss.$closeAndFlush(),$$animateJs.$closeAndFlush(),this.flush()},flush:function(hideErrors){$rootScope.$digest();var doNextRun,somethingFlushed=!1;do doNextRun=!1,$$rAF.queue.length&&($$rAF.flush(),doNextRun=somethingFlushed=!0),$$animateAsyncRun.flush()&&(doNextRun=somethingFlushed=!0);while(doNextRun);if(!somethingFlushed&&!hideErrors)throw new Error("No pending animations ready to be closed or flushed");$rootScope.$digest()}};return angular.forEach(["animate","enter","leave","move","addClass","removeClass","setClass"],function(method){animate[method]=function(){return animate.queue.push({event:method,element:arguments[0],options:arguments[arguments.length-1],args:arguments}),$delegate[method].apply($delegate,arguments)}}),animate}])}]),angular.mock.dump=function(object){function serialize(object){var out;return angular.isElement(object)?(object=angular.element(object),out=angular.element("<div></div>"),angular.forEach(object,function(element){out.append(angular.element(element).clone())}),out=out.html()):angular.isArray(object)?(out=[],angular.forEach(object,function(o){out.push(serialize(o))}),out="[ "+out.join(", ")+" ]"):out=angular.isObject(object)?angular.isFunction(object.$eval)&&angular.isFunction(object.$apply)?serializeScope(object):object instanceof Error?object.stack||""+object.name+": "+object.message:angular.toJson(object,!0):String(object),out}function serializeScope(scope,offset){offset=offset||"  ";var log=[offset+"Scope("+scope.$id+"): {"];for(var key in scope)Object.prototype.hasOwnProperty.call(scope,key)&&!key.match(/^(\$|this)/)&&log.push("  "+key+": "+angular.toJson(scope[key]));for(var child=scope.$$childHead;child;)log.push(serializeScope(child,offset+"  ")),child=child.$$nextSibling;return log.push("}"),log.join("\n"+offset)}return serialize(object)},angular.mock.$HttpBackendProvider=function(){this.$get=["$rootScope","$timeout",createHttpBackendMock]},angular.mock.$TimeoutDecorator=["$delegate","$browser",function($delegate,$browser){function formatPendingTasksAsString(tasks){var result=[];return angular.forEach(tasks,function(task){result.push("{id: "+task.id+", time: "+task.time+"}")}),result.join(", ")}return $delegate.flush=function(delay){$browser.defer.flush(delay)},$delegate.verifyNoPendingTasks=function(){if($browser.deferredFns.length)throw new Error("Deferred tasks to flush ("+$browser.deferredFns.length+"): "+formatPendingTasksAsString($browser.deferredFns))},$delegate}],angular.mock.$RAFDecorator=["$delegate",function($delegate){var rafFn=function(fn){var index=rafFn.queue.length;return rafFn.queue.push(fn),function(){rafFn.queue.splice(index,1)}};return rafFn.queue=[],rafFn.supported=$delegate.supported,rafFn.flush=function(){if(0===rafFn.queue.length)throw new Error("No rAF callbacks present");for(var length=rafFn.queue.length,i=0;length>i;i++)rafFn.queue[i]();rafFn.queue=rafFn.queue.slice(i)},rafFn}];var originalRootElement;angular.mock.$RootElementProvider=function(){this.$get=["$injector",function($injector){return originalRootElement=angular.element("<div ng-app></div>").data("$injector",$injector)}]},angular.mock.$ComponentControllerProvider=["$compileProvider",function($compileProvider){this.$get=["$controller","$injector","$rootScope",function($controller,$injector,$rootScope){return function(componentName,locals,bindings,ident){var directives=$injector.get(componentName+"Directive"),candidateDirectives=directives.filter(function(directiveInfo){return directiveInfo.controller&&directiveInfo.controllerAs&&"E"===directiveInfo.restrict});if(0===candidateDirectives.length)throw new Error("No component found");if(candidateDirectives.length>1)throw new Error("Too many components found");var directiveInfo=candidateDirectives[0];return locals=locals||{},locals.$scope=locals.$scope||$rootScope.$new(!0),$controller(directiveInfo.controller,locals,bindings,ident||directiveInfo.controllerAs)}}]}],angular.module("ngMock",["ng"]).provider({$browser:angular.mock.$BrowserProvider,$exceptionHandler:angular.mock.$ExceptionHandlerProvider,$log:angular.mock.$LogProvider,$interval:angular.mock.$IntervalProvider,$httpBackend:angular.mock.$HttpBackendProvider,$rootElement:angular.mock.$RootElementProvider,$componentController:angular.mock.$ComponentControllerProvider}).config(["$provide","$compileProvider",function($provide,$compileProvider){$provide.decorator("$timeout",angular.mock.$TimeoutDecorator),$provide.decorator("$$rAF",angular.mock.$RAFDecorator),$provide.decorator("$rootScope",angular.mock.$RootScopeDecorator),$provide.decorator("$controller",createControllerDecorator($compileProvider))}]),angular.module("ngMockE2E",["ng"]).config(["$provide",function($provide){$provide.value("$httpBackend",angular.injector(["ng"]).get("$httpBackend")),$provide.decorator("$httpBackend",angular.mock.e2e.$httpBackendDecorator)}]),angular.mock.e2e={},angular.mock.e2e.$httpBackendDecorator=["$rootScope","$timeout","$delegate","$browser",createHttpBackendMock],angular.mock.$RootScopeDecorator=["$delegate",function($delegate){function countChildScopes(){for(var currentScope,count=0,pendingChildHeads=[this.$$childHead];pendingChildHeads.length;)for(currentScope=pendingChildHeads.shift();currentScope;)count+=1,pendingChildHeads.push(currentScope.$$childHead),currentScope=currentScope.$$nextSibling;return count}function countWatchers(){for(var currentScope,count=this.$$watchers?this.$$watchers.length:0,pendingChildHeads=[this.$$childHead];pendingChildHeads.length;)for(currentScope=pendingChildHeads.shift();currentScope;)count+=currentScope.$$watchers?currentScope.$$watchers.length:0,pendingChildHeads.push(currentScope.$$childHead),currentScope=currentScope.$$nextSibling;return count}var $rootScopePrototype=Object.getPrototypeOf($delegate);return $rootScopePrototype.$countChildScopes=countChildScopes,$rootScopePrototype.$countWatchers=countWatchers,$delegate}],function(jasmineOrMocha){function InjectorState(){this.shared=!1,this.sharedError=null,this.cleanupAfterEach=function(){return!this.shared||this.sharedError}}if(jasmineOrMocha){var currentSpec=null,injectorState=new InjectorState,annotatedFunctions=[],wasInjectorCreated=function(){return!!currentSpec};angular.mock.$$annotate=angular.injector.$$annotate,angular.injector.$$annotate=function(fn){return"function"!=typeof fn||fn.$inject||annotatedFunctions.push(fn),angular.mock.$$annotate.apply(this,arguments)};var module=window.module=angular.mock.module=function(){function workFn(){if(currentSpec.$injector)throw new Error("Injector already created, can not register a module!");var fn,modules=currentSpec.$modules||(currentSpec.$modules=[]);angular.forEach(moduleFns,function(module){fn=angular.isObject(module)&&!angular.isArray(module)?["$provide",function($provide){angular.forEach(module,function(value,key){$provide.value(key,value)})}]:module,currentSpec.$providerInjector?currentSpec.$providerInjector.invoke(fn):modules.push(fn)})}var moduleFns=Array.prototype.slice.call(arguments,0);return wasInjectorCreated()?workFn():workFn};module.$$beforeAllHook=window.before||window.beforeAll,module.$$afterAllHook=window.after||window.afterAll,module.$$currentSpec=function(to){return 0===arguments.length?to:void(currentSpec=to)},module.sharedInjector=function(){if(!module.$$beforeAllHook||!module.$$afterAllHook)throw Error("sharedInjector() cannot be used unless your test runner defines beforeAll/afterAll");var initialized=!1;module.$$beforeAllHook(function(){if(injectorState.shared)throw injectorState.sharedError=Error("sharedInjector() cannot be called inside a context that has already called sharedInjector()"),injectorState.sharedError;initialized=!0,currentSpec=this,injectorState.shared=!0}),module.$$afterAllHook(function(){initialized?(injectorState=new InjectorState,module.$$cleanup()):injectorState.sharedError=null})},module.$$beforeEach=function(){if(injectorState.shared&&currentSpec&&currentSpec!==this){var state=currentSpec;currentSpec=this,angular.forEach(["$injector","$modules","$providerInjector","$injectorStrict"],function(k){currentSpec[k]=state[k],state[k]=null})}else currentSpec=this,originalRootElement=null,annotatedFunctions=[]},module.$$afterEach=function(){injectorState.cleanupAfterEach()&&module.$$cleanup()},module.$$cleanup=function(){var injector=currentSpec.$injector;if(annotatedFunctions.forEach(function(fn){delete fn.$inject}),angular.forEach(currentSpec.$modules,function(module){module&&module.$$hashKey&&(module.$$hashKey=void 0)}),currentSpec.$injector=null,currentSpec.$modules=null,currentSpec.$providerInjector=null,currentSpec=null,injector){var $rootElement=injector.get("$rootElement"),rootNode=$rootElement&&$rootElement[0],cleanUpNodes=originalRootElement?[originalRootElement[0]]:[];!rootNode||originalRootElement&&rootNode===originalRootElement[0]||cleanUpNodes.push(rootNode),angular.element.cleanData(cleanUpNodes);var $rootScope=injector.get("$rootScope");$rootScope&&$rootScope.$destroy&&$rootScope.$destroy()}angular.forEach(angular.element.fragments,function(val,key){delete angular.element.fragments[key]}),MockXhr.$$lastInstance=null,angular.forEach(angular.callbacks,function(val,key){delete angular.callbacks[key]}),angular.callbacks.$$counter=0},(window.beforeEach||window.setup)(module.$$beforeEach),(window.afterEach||window.teardown)(module.$$afterEach);var ErrorAddingDeclarationLocationStack=function(e,errorForStack){this.message=e.message,this.name=e.name,e.line&&(this.line=e.line),e.sourceId&&(this.sourceId=e.sourceId),e.stack&&errorForStack&&(this.stack=e.stack+"\n"+errorForStack.stack),e.stackArray&&(this.stackArray=e.stackArray)};ErrorAddingDeclarationLocationStack.prototype=Error.prototype,window.inject=angular.mock.inject=function(){function WorkFn(){var modules=currentSpec.$modules||[],strictDi=!!currentSpec.$injectorStrict;modules.unshift(["$injector",function($injector){currentSpec.$providerInjector=$injector}]),modules.unshift("ngMock"),modules.unshift("ng");var injector=currentSpec.$injector;injector||(strictDi&&angular.forEach(modules,function(moduleFn){"function"==typeof moduleFn&&angular.injector.$$annotate(moduleFn)}),injector=currentSpec.$injector=angular.injector(modules,strictDi),currentSpec.$injectorStrict=strictDi);for(var i=0,ii=blockFns.length;ii>i;i++){currentSpec.$injectorStrict&&injector.annotate(blockFns[i]);try{injector.invoke(blockFns[i]||angular.noop,this)}catch(e){if(e.stack&&errorForStack)throw new ErrorAddingDeclarationLocationStack(e,errorForStack);throw e}finally{errorForStack=null}}}var blockFns=Array.prototype.slice.call(arguments,0),errorForStack=new Error("Declaration Location");if(!errorForStack.stack)try{throw errorForStack}catch(e){}return wasInjectorCreated()?WorkFn.call(currentSpec):WorkFn},angular.mock.inject.strictDi=function(value){function workFn(){if(value!==currentSpec.$injectorStrict){if(currentSpec.$injector)throw new Error("Injector already created, can not modify strict annotations");currentSpec.$injectorStrict=value}}return value=arguments.length?!!value:!0,wasInjectorCreated()?workFn():workFn}}}(window.jasmine||window.mocha)}(window,window.angular);
!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.moment=factory()}(this,function(){"use strict";function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||"[object Array]"===Object.prototype.toString.call(input)}function isObject(input){return null!=input&&"[object Object]"===Object.prototype.toString.call(input)}function isObjectEmpty(obj){var k;for(k in obj)return!1;return!0}function isUndefined(input){return void 0===input}function isNumber(input){return"number"==typeof input||"[object Number]"===Object.prototype.toString.call(input)}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function getParsingFlags(m){return null==m._pf&&(m._pf=defaultParsingFlags()),m._pf}function isValid(m){if(null==m._isValid){var flags=getParsingFlags(m),parsedParts=some$1.call(flags.parsedDateParts,function(i){return null!=i}),isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict&&(isNowValid=isNowValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour),null!=Object.isFrozen&&Object.isFrozen(m))return isNowValid;m._isValid=isNowValid}return m._isValid}function createInvalid(flags){var m=createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}function copyConfig(to,from){var i,prop,val;if(isUndefined(from._isAMomentObject)||(to._isAMomentObject=from._isAMomentObject),isUndefined(from._i)||(to._i=from._i),isUndefined(from._f)||(to._f=from._f),isUndefined(from._l)||(to._l=from._l),isUndefined(from._strict)||(to._strict=from._strict),isUndefined(from._tzm)||(to._tzm=from._tzm),isUndefined(from._isUTC)||(to._isUTC=from._isUTC),isUndefined(from._offset)||(to._offset=from._offset),isUndefined(from._pf)||(to._pf=getParsingFlags(from)),isUndefined(from._locale)||(to._locale=from._locale),momentProperties.length>0)for(i=0;i<momentProperties.length;i++)prop=momentProperties[i],val=from[prop],isUndefined(val)||(to[prop]=val);return to}function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),updateInProgress===!1&&(updateInProgress=!0,hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return 0>number?Math.ceil(number)||0:Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;len>i;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function warn(msg){hooks.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){if(null!=hooks.deprecationHandler&&hooks.deprecationHandler(null,msg),firstTime){for(var arg,args=[],i=0;i<arguments.length;i++){if(arg="","object"==typeof arguments[i]){arg+="\n["+i+"] ";for(var key in arguments[0])arg+=key+": "+arguments[0][key]+", ";arg=arg.slice(0,-2)}else arg=arguments[i];args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+(new Error).stack),firstTime=!1}return fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){null!=hooks.deprecationHandler&&hooks.deprecationHandler(name,msg),deprecations[name]||(warn(msg),deprecations[name]=!0)}function isFunction(input){return input instanceof Function||"[object Function]"===Object.prototype.toString.call(input)}function set(config){var prop,i;for(i in config)prop=config[i],isFunction(prop)?this[i]=prop:this["_"+i]=prop;this._config=config,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var prop,res=extend({},parentConfig);for(prop in childConfig)hasOwnProp(childConfig,prop)&&(isObject(parentConfig[prop])&&isObject(childConfig[prop])?(res[prop]={},extend(res[prop],parentConfig[prop]),extend(res[prop],childConfig[prop])):null!=childConfig[prop]?res[prop]=childConfig[prop]:delete res[prop]);for(prop in parentConfig)hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])&&(res[prop]=extend({},res[prop]));return res}function Locale(config){null!=config&&this.set(config)}function calendar(key,mom,now){var output=this._calendar[key]||this._calendar.sameElse;return isFunction(output)?output.call(mom,now):output}function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])}function invalidDate(){return this._invalidDate}function ordinal(number){return this._ordinal.replace("%d",number)}function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj)units.push({unit:u,priority:priorities[u]});return units.sort(function(a,b){return a.priority-b.priority}),units}function makeGetSet(unit,keepTime){return function(value){return null!=value?(set$1(this,unit,value),hooks.updateOffset(this,keepTime),this):get(this,unit)}}function get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function set$1(mom,unit,value){mom.isValid()&&mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function stringGet(units){return units=normalizeUnits(units),isFunction(this[units])?this[units]():this}function stringSet(units,value){if("object"==typeof units){units=normalizeObjectUnits(units);for(var prioritized=getPrioritizedUnits(units),i=0;i<prioritized.length;i++)this[prioritized[i].unit](units[prioritized[i].unit])}else if(units=normalizeUnits(units),isFunction(this[units]))return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;length>i;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var i,output="";for(i=0;length>i;i++)output+=isFunction(array[i])?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(unescapeFormat(token))}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),isNumber(callback)&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function localeMonths(m,format){return m?isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]:isArray(this._months)?this._months:this._months.standalone}function localeMonthsShort(m,format){return m?isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;12>i;++i)mom=createUTC([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase();return strict?"MMM"===format?(ii=indexOf$1.call(this._shortMonthsParse,llc),-1!==ii?ii:null):(ii=indexOf$1.call(this._longMonthsParse,llc),-1!==ii?ii:null):"MMM"===format?(ii=indexOf$1.call(this._shortMonthsParse,llc),-1!==ii?ii:(ii=indexOf$1.call(this._longMonthsParse,llc),-1!==ii?ii:null)):(ii=indexOf$1.call(this._longMonthsParse,llc),-1!==ii?ii:(ii=indexOf$1.call(this._shortMonthsParse,llc),-1!==ii?ii:null))}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact)return handleStrictParse.call(this,monthName,format,strict);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(mom=createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid())return mom;if("string"==typeof value)if(/^\d+$/.test(value))value=toInt(value);else if(value=mom.localeData().monthsParse(value),!isNumber(value))return mom;return dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom}function getSetMonth(value){return null!=value?(setMonth(this,value),hooks.updateOffset(this,!0),this):get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=defaultMonthsShortRegex),this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex)}function monthsRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=defaultMonthsRegex),this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex)}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var i,mom,shortPieces=[],longPieces=[],mixedPieces=[];for(i=0;12>i;i++)mom=createUTC([2e3,i]),shortPieces.push(this.monthsShort(mom,"")),longPieces.push(this.months(mom,"")),mixedPieces.push(this.months(mom,"")),mixedPieces.push(this.monthsShort(mom,""));for(shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;12>i;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]);for(i=0;24>i;i++)mixedPieces[i]=regexEscape(mixedPieces[i]);this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return 100>y&&y>=0&&isFinite(date.getFullYear())&&date.setFullYear(y),date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return 100>y&&y>=0&&isFinite(date.getUTCFullYear())&&date.setUTCFullYear(y),date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var resYear,resDayOfYear,localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset;return 0>=dayOfYear?(resYear=year-1,resDayOfYear=daysInYear(resYear)+dayOfYear):dayOfYear>daysInYear(year)?(resYear=year+1,resDayOfYear=dayOfYear-daysInYear(year)):(resYear=year,resDayOfYear=dayOfYear),{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var resWeek,resYear,weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1;return 1>week?(resYear=mom.year()-1,resWeek=week+weeksInYear(resYear,dow,doy)):week>weeksInYear(mom.year(),dow,doy)?(resWeek=week-weeksInYear(mom.year(),dow,doy),resYear=mom.year()+1):(resYear=mom.year(),resWeek=week),{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")}function parseWeekday(input,locale){return"string"!=typeof input?input:isNaN(input)?(input=locale.weekdaysParse(input),"number"==typeof input?input:null):parseInt(input,10)}function parseIsoWeekday(input,locale){return"string"==typeof input?locale.weekdaysParse(input)%7||7:isNaN(input)?null:input}function localeWeekdays(m,format){return m?isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]:isArray(this._weekdays)?this._weekdays:this._weekdays.standalone}function localeWeekdaysShort(m){return m?this._weekdaysShort[m.day()]:this._weekdaysShort}function localeWeekdaysMin(m){return m?this._weekdaysMin[m.day()]:this._weekdaysMin}function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;7>i;++i)mom=createUTC([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase();return strict?"dddd"===format?(ii=indexOf$1.call(this._weekdaysParse,llc),-1!==ii?ii:null):"ddd"===format?(ii=indexOf$1.call(this._shortWeekdaysParse,llc),-1!==ii?ii:null):(ii=indexOf$1.call(this._minWeekdaysParse,llc),-1!==ii?ii:null):"dddd"===format?(ii=indexOf$1.call(this._weekdaysParse,llc),-1!==ii?ii:(ii=indexOf$1.call(this._shortWeekdaysParse,llc),-1!==ii?ii:(ii=indexOf$1.call(this._minWeekdaysParse,llc),-1!==ii?ii:null))):"ddd"===format?(ii=indexOf$1.call(this._shortWeekdaysParse,llc),-1!==ii?ii:(ii=indexOf$1.call(this._weekdaysParse,llc),-1!==ii?ii:(ii=indexOf$1.call(this._minWeekdaysParse,llc),-1!==ii?ii:null))):(ii=indexOf$1.call(this._minWeekdaysParse,llc),-1!==ii?ii:(ii=indexOf$1.call(this._weekdaysParse,llc),-1!==ii?ii:(ii=indexOf$1.call(this._shortWeekdaysParse,llc),-1!==ii?ii:null)))}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,weekdayName,format,strict);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;7>i;i++){if(mom=createUTC([2e3,1]).day(i),strict&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"dddd"===format&&this._fullWeekdaysParse[i].test(weekdayName))return i;if(strict&&"ddd"===format&&this._shortWeekdaysParse[i].test(weekdayName))return i;if(strict&&"dd"===format&&this._minWeekdaysParse[i].test(weekdayName))return i;if(!strict&&this._weekdaysParse[i].test(weekdayName))return i}}function getSetDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;if(null!=input){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}return this.day()||7}function weekdaysRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=defaultWeekdaysRegex),this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex)}function weekdaysShortRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=defaultWeekdaysShortRegex),this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function weekdaysMinRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=defaultWeekdaysMinRegex),this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var i,mom,minp,shortp,longp,minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[];for(i=0;7>i;i++)mom=createUTC([2e3,1]).day(i),minp=this.weekdaysMin(mom,""),shortp=this.weekdaysShort(mom,""),longp=this.weekdays(mom,""),minPieces.push(minp),shortPieces.push(shortp),longPieces.push(longp),mixedPieces.push(minp),mixedPieces.push(shortp),mixedPieces.push(longp);for(minPieces.sort(cmpLenRev),shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;7>i;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]),mixedPieces[i]=regexEscape(mixedPieces[i]);this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}function localeIsPM(input){return"p"===(input+"").toLowerCase().charAt(0)}function localeMeridiem(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,require("./locale/"+name),getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function getSetGlobalLocale(key,values){var data;return key&&(data=isUndefined(values)?getLocale(key):defineLocale(key,values),data&&(globalLocale=data)),globalLocale._abbr}function defineLocale(name,config){if(null!==config){var parentConfig=baseConfig;if(config.abbr=name,null!=locales[name])deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),parentConfig=locales[name]._config;else if(null!=config.parentLocale){if(null==locales[config.parentLocale])return localeFamilies[config.parentLocale]||(localeFamilies[config.parentLocale]=[]),localeFamilies[config.parentLocale].push({name:name,config:config}),null;parentConfig=locales[config.parentLocale]._config}return locales[name]=new Locale(mergeConfigs(parentConfig,config)),localeFamilies[name]&&localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config)}),getSetGlobalLocale(name),locales[name]}return delete locales[name],null}function updateLocale(name,config){if(null!=config){var locale,parentConfig=baseConfig;null!=locales[name]&&(parentConfig=locales[name]._config),config=mergeConfigs(parentConfig,config),locale=new Locale(config),locale.parentLocale=locales[name],locales[name]=locale,getSetGlobalLocale(name)}else null!=locales[name]&&(null!=locales[name].parentLocale?locales[name]=locales[name].parentLocale:null!=locales[name]&&delete locales[name]);return locales[name]}function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)}function listLocales(){return keys$1(locales)}function checkOverflow(m){var overflow,a=m._a;return a&&-2===getParsingFlags(m).overflow&&(overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(YEAR>overflow||overflow>DATE)&&(overflow=DATE),getParsingFlags(m)._overflowWeeks&&-1===overflow&&(overflow=WEEK),getParsingFlags(m)._overflowWeekday&&-1===overflow&&(overflow=WEEKDAY),getParsingFlags(m).overflow=overflow),m}function configFromISO(config){var i,l,allowTime,dateFormat,timeFormat,tzFormat,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;l>i;i++)if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0],allowTime=isoDates[i][2]!==!1;break}if(null==dateFormat)return void(config._isValid=!1);if(match[3]){for(i=0,l=isoTimes.length;l>i;i++)if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}if(null==timeFormat)return void(config._isValid=!1)}if(!allowTime&&null!=timeFormat)return void(config._isValid=!1);if(match[4]){if(!tzRegex.exec(match[4]))return void(config._isValid=!1);tzFormat="Z"}config._f=dateFormat+(timeFormat||"")+(tzFormat||""),configFromStringAndFormat(config)}else config._isValid=!1}function configFromRFC2822(config){var string,match,dayFormat,dateFormat,timeFormat,tzFormat,timezone,timezoneIndex,timezones={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},military="YXWVUTSRQPONZABCDEFGHIKLM";if(string=config._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),match=basicRfcRegex.exec(string)){if(dayFormat=match[1]?"ddd"+(5===match[1].length?", ":" "):"",dateFormat="D MMM "+(match[2].length>10?"YYYY ":"YY "),timeFormat="HH:mm"+(match[4]?":ss":""),match[1]){var momentDate=new Date(match[2]),momentDay=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][momentDate.getDay()];if(match[1].substr(0,3)!==momentDay)return getParsingFlags(config).weekdayMismatch=!0,void(config._isValid=!1)}switch(match[5].length){case 2:0===timezoneIndex?timezone=" +0000":(timezoneIndex=military.indexOf(match[5][1].toUpperCase())-12,timezone=(0>timezoneIndex?" -":" +")+(""+timezoneIndex).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:timezone=timezones[match[5]];break;default:timezone=timezones[" GMT"]}match[5]=timezone,config._i=match.splice(1).join(""),tzFormat=" ZZ",config._f=dayFormat+dateFormat+timeFormat+tzFormat,configFromStringAndFormat(config),getParsingFlags(config).rfc2822=!0}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);return null!==matched?void(config._d=new Date(+matched[1])):(configFromISO(config),void(config._isValid===!1&&(delete config._isValid,configFromRFC2822(config),config._isValid===!1&&(delete config._isValid,hooks.createFromInputFallback(config)))))}function defaults(a,b,c){return null!=a?a:null!=b?b:c}function currentDateArray(config){var nowValue=new Date(hooks.now());return config._useUTC?[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]:[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),null!=config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),(config._dayOfYear>daysInYear(yearToUse)||0===config._dayOfYear)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;if(w=config._w,null!=w.GG||null!=w.W||null!=w.E)dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1),(1>weekday||weekday>7)&&(weekdayOverflow=!0);else{dow=config._locale._week.dow,doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year),week=defaults(w.w,curWeek.week),null!=w.d?(weekday=w.d,(0>weekday||weekday>6)&&(weekdayOverflow=!0)):null!=w.e?(weekday=w.e+dow,(w.e<0||w.e>6)&&(weekdayOverflow=!0)):weekday=dow}1>week||week>weeksInYear(weekYear,dow,doy)?getParsingFlags(config)._overflowWeeks=!0:null!=weekdayOverflow?getParsingFlags(config)._overflowWeekday=!0:(temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear)}function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601)return void configFromISO(config);if(config._f===hooks.RFC_2822)return void configFromRFC2822(config);config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;
for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),config._a[HOUR]<=12&&getParsingFlags(config).bigHour===!0&&config._a[HOUR]>0&&(getParsingFlags(config).bigHour=void 0),getParsingFlags(config).parsedDateParts=config._a.slice(0),getParsingFlags(config).meridiem=config._meridiem,config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?(isPm=locale.isPM(meridiem),isPm&&12>hour&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||scoreToBeat>currentScore)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)}),configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||getLocale(config._l),null===input||void 0===format&&""===input?createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isDate(input)?config._d=input:isArray(format)?configFromStringAndArray(config):format?configFromStringAndFormat(config):configFromInput(config),isValid(config)||(config._d=null),config))}function configFromInput(config){var input=config._i;isUndefined(input)?config._d=new Date(hooks.now()):isDate(input)?config._d=new Date(input.valueOf()):"string"==typeof input?configFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):isObject(input)?configFromObject(config):isNumber(input)?config._d=new Date(input):hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};return(locale===!0||locale===!1)&&(strict=locale,locale=void 0),(isObject(input)&&isObjectEmpty(input)||isArray(input)&&0===input.length)&&(input=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,createFromConfig(c)}function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return createLocal();for(res=moments[0],i=1;i<moments.length;++i)(!moments[i].isValid()||moments[i][fn](res))&&(res=moments[i]);return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}function isDurationValid(m){for(var key in m)if(-1===ordering.indexOf(key)||null!=m[key]&&isNaN(m[key]))return!1;for(var unitHasDecimal=!1,i=0;i<ordering.length;++i)if(m[ordering[i]]){if(unitHasDecimal)return!1;parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])&&(unitHasDecimal=!0)}return!0}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput),this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+1e3*hours*60*60,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){return 0>number?-1*Math.round(-1*number):Math.round(number)}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return 0>offset&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}function offsetFromString(matcher,string){var matches=(string||"").match(matcher);if(null===matches)return null;var chunk=matches[matches.length-1]||[],parts=(chunk+"").match(chunkOffset)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return 0===minutes?0:"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf(),res._d.setTime(res._d.valueOf()+diff),hooks.updateOffset(res,!1),res):createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function getSetOffset(input,keepLocalTime,keepMinutes){var localAdjust,offset=this._offset||0;if(!this.isValid())return null!=input?this:NaN;if(null!=input){if("string"==typeof input){if(input=offsetFromString(matchShortOffset,input),null===input)return this}else Math.abs(input)<16&&!keepMinutes&&(input=60*input);return!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?addSubtract(this,createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?offset:getDateOffset(this)}function getSetZone(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var tZone=offsetFromString(matchOffset,this._i);null!=tZone?this.utcOffset(tZone):this.utcOffset(0,!0)}return this}function hasAlignedHourOffset(input){return this.isValid()?(input=input?createLocal(input).utcOffset():0,(this.utcOffset()-input)%60===0):!1}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var c={};if(copyConfig(c,this),c=prepareConfig(c),c._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:!1}function isUtcOffset(){return this.isValid()?this._isUTC:!1}function isUtc(){return this.isValid()?this._isUTC&&0===this._offset:!1}function createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:isNumber(input)?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(1e3*match[MILLISECOND]))*sign}):(match=isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return base.isValid()&&other.isValid()?(other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res):{milliseconds:0,months:0}}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=createDuration(val,period),addSubtract(this,dur,direction),this}}function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);mom.isValid()&&(updateOffset=null==updateOffset?!0:updateOffset,milliseconds&&mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding),days&&set$1(mom,"Date",get(mom,"Date")+days*isAdding),months&&setMonth(mom,get(mom,"Month")+months*isAdding),updateOffset&&hooks.updateOffset(mom,days||months))}function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",!0);return-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse"}function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=hooks.calendarFormat(this,sod)||"sameElse",output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);return this.isValid()&&localInput.isValid()?(units=normalizeUnits(isUndefined(units)?"millisecond":units),"millisecond"===units?this.valueOf()>localInput.valueOf():localInput.valueOf()<this.clone().startOf(units).valueOf()):!1}function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);return this.isValid()&&localInput.isValid()?(units=normalizeUnits(isUndefined(units)?"millisecond":units),"millisecond"===units?this.valueOf()<localInput.valueOf():this.clone().endOf(units).valueOf()<localInput.valueOf()):!1}function isBetween(from,to,units,inclusivity){return inclusivity=inclusivity||"()",("("===inclusivity[0]?this.isAfter(from,units):!this.isBefore(from,units))&&(")"===inclusivity[1]?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var inputMs,localInput=isMoment(input)?input:createLocal(input);return this.isValid()&&localInput.isValid()?(units=normalizeUnits(units||"millisecond"),"millisecond"===units?this.valueOf()===localInput.valueOf():(inputMs=localInput.valueOf(),this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf())):!1}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;return this.isValid()?(that=cloneWithOffset(input,this),that.isValid()?(zoneDelta=6e4*(that.utcOffset()-this.utcOffset()),units=normalizeUnits(units),"year"===units||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output)):NaN):NaN}function monthDiff(a,b){var anchor2,adjust,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return 0>b-anchor?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)||0}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(){if(!this.isValid())return null;var m=this.clone().utc();return m.year()<0||m.year()>9999?formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):isFunction(Date.prototype.toISOString)?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var func="moment",zone="";this.isLocal()||(func=0===this.utcOffset()?"moment.utc":"moment.parseZone",zone="Z");var prefix="["+func+'("]',year=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",datetime="-MM-DD[T]HH:mm:ss.SSS",suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix)}function format(inputString){inputString||(inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())?createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())?createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(newLocaleData=getLocale(key),null!=newLocaleData&&(this._locale=newLocaleData),this)}function localeData(){return this._locale}function startOf(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this}function endOf(units){return units=normalizeUnits(units),void 0===units||"millisecond"===units?this:("date"===units&&(units="day"),this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms"))}function valueOf(){return this._d.valueOf()-6e4*(this._offset||0)}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;return null==input?weekOfYear(this,dow,doy).year:(weeksTarget=weeksInYear(input,dow,doy),week>weeksTarget&&(week=weeksTarget),setWeekAll.call(this,input,week,weekday,dow,doy))}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);return this.year(date.getUTCFullYear()),this.month(date.getUTCMonth()),this.date(date.getUTCDate()),this}function getSetQuarter(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")}function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}function createUnix(input){return createLocal(1e3*input)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}function get$1(format,index,field,setter){var locale=getLocale(),utc=createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if(isNumber(format)&&(index=format,format=void 0),format=format||"",null!=index)return get$1(format,index,field,"month");var i,out=[];for(i=0;12>i;i++)out[i]=get$1(format,i,field,"month");return out}function listWeekdaysImpl(localeSorted,format,index,field){"boolean"==typeof localeSorted?(isNumber(format)&&(index=format,format=void 0),format=format||""):(format=localeSorted,index=format,localeSorted=!1,isNumber(format)&&(index=format,format=void 0),format=format||"");var locale=getLocale(),shift=localeSorted?locale._week.dow:0;if(null!=index)return get$1(format,(index+shift)%7,field,"day");var i,out=[];for(i=0;7>i;i++)out[i]=get$1(format,(i+shift)%7,field,"day");return out}function listMonths(format,index){return listMonthsImpl(format,index,"months")}function listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}function abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function add$1(input,value){return addSubtract$1(this,input,value,1)}function subtract$1(input,value){return addSubtract$1(this,input,value,-1)}function absCeil(number){return 0>number?Math.floor(number):Math.ceil(number)}function bubble(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return milliseconds>=0&&days>=0&&months>=0||0>=milliseconds&&0>=days&&0>=months||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),days=0,months=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,days+=absFloor(hours/24),monthsFromDays=absFloor(daysToMonths(days)),months+=monthsFromDays,days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function as(units){if(!this.isValid())return NaN;var days,months,milliseconds=this._milliseconds;if(units=normalizeUnits(units),"month"===units||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}}function valueOf$1(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12):NaN}function makeAs(alias){return function(){return this.as(alias)}}function get$2(units){return units=normalizeUnits(units),this.isValid()?this[units+"s"]():NaN}function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN}}function weeks(){return absFloor(this.days()/7)}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<=thresholds.ss&&["s",seconds]||seconds<thresholds.s&&["ss",seconds]||1>=minutes&&["m"]||minutes<thresholds.m&&["mm",minutes]||1>=hours&&["h"]||hours<thresholds.h&&["hh",hours]||1>=days&&["d"]||days<thresholds.d&&["dd",days]||1>=months&&["M"]||months<thresholds.M&&["MM",months]||1>=years&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale,substituteTimeAgo.apply(null,a)}function getSetRelativeTimeRounding(roundingFunction){return void 0===roundingFunction?round:"function"==typeof roundingFunction?(round=roundingFunction,!0):!1}function getSetRelativeTimeThreshold(threshold,limit){return void 0===thresholds[threshold]?!1:void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,"s"===threshold&&(thresholds.ss=limit-1),!0)}function humanize(withSuffix){if(!this.isValid())return this.localeData().invalidDate();var locale=this.localeData(),output=relativeTime$1(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var minutes,hours,years,seconds=abs$1(this._milliseconds)/1e3,days=abs$1(this._days),months=abs$1(this._months);minutes=absFloor(seconds/60),hours=absFloor(minutes/60),seconds%=60,minutes%=60,years=absFloor(months/12),months%=12;var Y=years,M=months,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(0>total?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var hookCallback,some;some=Array.prototype.some?Array.prototype.some:function(fun){for(var t=Object(this),len=t.length>>>0,i=0;len>i;i++)if(i in t&&fun.call(this,t[i],i,t))return!0;return!1};var some$1=some,momentProperties=hooks.momentProperties=[],updateInProgress=!1,deprecations={};hooks.suppressDeprecationWarnings=!1,hooks.deprecationHandler=null;var keys;keys=Object.keys?Object.keys:function(obj){var i,res=[];for(i in obj)hasOwnProp(obj,i)&&res.push(i);return res};var indexOf,keys$1=keys,defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},defaultInvalidDate="Invalid date",defaultOrdinal="%d",defaultDayOfMonthOrdinalParse=/\d{1,2}/,defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},aliases={},priorities={},formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={},match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={},tokens={},YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;indexOf=Array.prototype.indexOf?Array.prototype.indexOf:function(o){var i;for(i=0;i<this.length;++i)if(this[i]===o)return i;return-1};var indexOf$1=indexOf;addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)}),addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)}),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord;addFormatToken("Y",0,0,function(){var y=this.year();return 9999>=y?""+y:"+"+y}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input)}),addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)}),hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});var defaultLocaleWeek={dow:0,doy:6};addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)}),addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)}),addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)}),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,kFormat),addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)}),addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2);
}),addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("k",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addRegexToken("kk",match1to2,match2),addRegexToken("hmm",match3to4),addRegexToken("hmmss",match5to6),addRegexToken("Hmm",match3to4),addRegexToken("Hmmss",match5to6),addParseToken(["H","HH"],HOUR),addParseToken(["k","kk"],function(input,array,config){var kInput=toInt(input);array[HOUR]=24===kInput?0:kInput}),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0}),addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos)),getParsingFlags(config).bigHour=!0}),addParseToken("hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2)),getParsingFlags(config).bigHour=!0}),addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos))}),addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2))});var globalLocale,defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0),baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse},locales={},localeFamilies={},extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,basicRfcRegex=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),hooks.ISO_8601=function(){},hooks.RFC_2822=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?this>other?this:other:createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other>this?this:other:createInvalid()}),now=function(){return Date.now?Date.now():+new Date},ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchShortOffset),addRegexToken("ZZ",matchShortOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;hooks.updateOffset=function(){};var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;createDuration.fn=Duration.prototype,createDuration.invalid=createInvalid$1;var add=createAdder(1,"add"),subtract=createAdder(-1,"subtract");hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return void 0===key?this.localeData():this.locale(key)});addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._dayOfMonthOrdinalParse||locale._ordinalParse:locale._dayOfMonthOrdinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var proto=Moment.prototype;proto.add=add,proto.calendar=calendar$1,proto.clone=clone,proto.diff=diff,proto.endOf=endOf,proto.format=format,proto.from=from,proto.fromNow=fromNow,proto.to=to,proto.toNow=toNow,proto.get=stringGet,proto.invalidAt=invalidAt,proto.isAfter=isAfter,proto.isBefore=isBefore,proto.isBetween=isBetween,proto.isSame=isSame,proto.isSameOrAfter=isSameOrAfter,proto.isSameOrBefore=isSameOrBefore,proto.isValid=isValid$2,proto.lang=lang,proto.locale=locale,proto.localeData=localeData,proto.max=prototypeMax,proto.min=prototypeMin,proto.parsingFlags=parsingFlags,proto.set=stringSet,proto.startOf=startOf,proto.subtract=subtract,proto.toArray=toArray,proto.toObject=toObject,proto.toDate=toDate,proto.toISOString=toISOString,proto.inspect=inspect,proto.toJSON=toJSON,proto.toString=toString,proto.unix=unix,proto.valueOf=valueOf,proto.creationData=creationData,proto.year=getSetYear,proto.isLeapYear=getIsLeapYear,proto.weekYear=getSetWeekYear,proto.isoWeekYear=getSetISOWeekYear,proto.quarter=proto.quarters=getSetQuarter,proto.month=getSetMonth,proto.daysInMonth=getDaysInMonth,proto.week=proto.weeks=getSetWeek,proto.isoWeek=proto.isoWeeks=getSetISOWeek,proto.weeksInYear=getWeeksInYear,proto.isoWeeksInYear=getISOWeeksInYear,proto.date=getSetDayOfMonth,proto.day=proto.days=getSetDayOfWeek,proto.weekday=getSetLocaleDayOfWeek,proto.isoWeekday=getSetISODayOfWeek,proto.dayOfYear=getSetDayOfYear,proto.hour=proto.hours=getSetHour,proto.minute=proto.minutes=getSetMinute,proto.second=proto.seconds=getSetSecond,proto.millisecond=proto.milliseconds=getSetMillisecond,proto.utcOffset=getSetOffset,proto.utc=setOffsetToUTC,proto.local=setOffsetToLocal,proto.parseZone=setOffsetToParsedOffset,proto.hasAlignedHourOffset=hasAlignedHourOffset,proto.isDST=isDaylightSavingTime,proto.isLocal=isLocal,proto.isUtcOffset=isUtcOffset,proto.isUtc=isUtc,proto.isUTC=isUtc,proto.zoneAbbr=getZoneAbbr,proto.zoneName=getZoneName,proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone),proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);var proto$1=Locale.prototype;proto$1.calendar=calendar,proto$1.longDateFormat=longDateFormat,proto$1.invalidDate=invalidDate,proto$1.ordinal=ordinal,proto$1.preparse=preParsePostFormat,proto$1.postformat=preParsePostFormat,proto$1.relativeTime=relativeTime,proto$1.pastFuture=pastFuture,proto$1.set=set,proto$1.months=localeMonths,proto$1.monthsShort=localeMonthsShort,proto$1.monthsParse=localeMonthsParse,proto$1.monthsRegex=monthsRegex,proto$1.monthsShortRegex=monthsShortRegex,proto$1.week=localeWeek,proto$1.firstDayOfYear=localeFirstDayOfYear,proto$1.firstDayOfWeek=localeFirstDayOfWeek,proto$1.weekdays=localeWeekdays,proto$1.weekdaysMin=localeWeekdaysMin,proto$1.weekdaysShort=localeWeekdaysShort,proto$1.weekdaysParse=localeWeekdaysParse,proto$1.weekdaysRegex=weekdaysRegex,proto$1.weekdaysShortRegex=weekdaysShortRegex,proto$1.weekdaysMinRegex=weekdaysMinRegex,proto$1.isPM=localeIsPM,proto$1.meridiem=localeMeridiem,getSetGlobalLocale("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale),hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs,asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y"),milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years"),round=Math.round,thresholds={ss:44,s:45,m:45,h:22,d:26,M:11},abs$1=Math.abs,proto$2=Duration.prototype;return proto$2.isValid=isValid$1,proto$2.abs=abs,proto$2.add=add$1,proto$2.subtract=subtract$1,proto$2.as=as,proto$2.asMilliseconds=asMilliseconds,proto$2.asSeconds=asSeconds,proto$2.asMinutes=asMinutes,proto$2.asHours=asHours,proto$2.asDays=asDays,proto$2.asWeeks=asWeeks,proto$2.asMonths=asMonths,proto$2.asYears=asYears,proto$2.valueOf=valueOf$1,proto$2._bubble=bubble,proto$2.get=get$2,proto$2.milliseconds=milliseconds,proto$2.seconds=seconds,proto$2.minutes=minutes,proto$2.hours=hours,proto$2.days=days,proto$2.weeks=weeks,proto$2.months=months,proto$2.years=years,proto$2.humanize=humanize,proto$2.toISOString=toISOString$1,proto$2.toString=toISOString$1,proto$2.toJSON=toISOString$1,proto$2.locale=locale,proto$2.localeData=localeData,proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1),proto$2.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),hooks.version="2.18.1",setHookCallback(createLocal),hooks.fn=proto,hooks.min=min,hooks.max=max,hooks.now=now,hooks.utc=createUTC,hooks.unix=createUnix,hooks.months=listMonths,hooks.isDate=isDate,hooks.locale=getSetGlobalLocale,hooks.invalid=createInvalid,hooks.duration=createDuration,hooks.isMoment=isMoment,hooks.weekdays=listWeekdays,hooks.parseZone=createInZone,hooks.localeData=getLocale,hooks.isDuration=isDuration,hooks.monthsShort=listMonthsShort,hooks.weekdaysMin=listWeekdaysMin,hooks.defineLocale=defineLocale,hooks.updateLocale=updateLocale,hooks.locales=listLocales,hooks.weekdaysShort=listWeekdaysShort,hooks.normalizeUnits=normalizeUnits,hooks.relativeTimeRounding=getSetRelativeTimeRounding,hooks.relativeTimeThreshold=getSetRelativeTimeThreshold,hooks.calendarFormat=getCalendarFormat,hooks.prototype=proto,hooks});
!function(a){"use strict";a.module("uuid4",[]).factory("uuid4",function(){var a=function(a){return Math.pow(2,a)},b=(a(4),a(6)),c=a(8),d=a(12),e=(a(14),a(16)),f=a(32),g=(a(40),a(48),function(a,b){return Math.floor(Math.random()*(b-a+1))+a}),h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}})}(angular);
/* 
 * JSNLog 2.24.3
 * Open source under the MIT License.
 * Copyright 2012-2017 Mattijs Perdeck All rights reserved.
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,e,f){if(b){e=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var k=a[f];k in e||(e[k]={});e=e[k]}a=a[a.length-1];f=e[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.setPrototypeOf",function(a){return a?a:"object"!=typeof"".__proto__?null:function(a,e){a.__proto__=e;if(a.__proto__!==e)throw new TypeError(a+" is not extensible");return a}},"es6","es5");
var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var b in e)e.hasOwnProperty(b)&&(a[b]=e[b])};return function(b,e){function f(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)}}();
function JL(a){if(!a)return JL.__;Array.prototype.reduce||(Array.prototype.reduce=function(a,b){for(var e=b,f=0;f<this.length;f++)e=a(e,this[f],f,this);return e});var b="";return("."+a).split(".").reduce(function(a,f,k,n){b=b?b+("."+f):f;f=a["__"+b];void 0===f&&(JL.Logger.prototype=a,f=new JL.Logger(b),a["__"+b]=f);return f},JL.__)}
(function(a){function b(a,c,g){void 0!==c[a]&&(null===c[a]?delete g[a]:g[a]=c[a])}function e(d){if(null!=a.enabled&&!a.enabled||null!=a.maxMessages&&1>a.maxMessages)return!1;try{if(d.userAgentRegex&&!(new RegExp(d.userAgentRegex)).test(navigator.userAgent))return!1}catch(c){}try{if(d.ipRegex&&a.clientIP&&!(new RegExp(d.ipRegex)).test(a.clientIP))return!1}catch(c){}return!0}function f(a,c){try{if(a.disallow&&(new RegExp(a.disallow)).test(c))return!1}catch(g){}return!0}function k(a){return"function"==
typeof a?a instanceof RegExp?a.toString():a():a}function n(d){d=k(d);switch(typeof d){case "string":return new l(d,null,d);case "number":var c=d.toString();return new l(c,null,c);case "boolean":return c=d.toString(),new l(c,null,c);case "undefined":return new l("undefined",null,"undefined");case "object":if(d instanceof RegExp||d instanceof String||d instanceof Number||d instanceof Boolean)return c=d.toString(),new l(c,null,c);c="function"===typeof a.serialize?a.serialize.call(this,d):JSON.stringify(d);
return new l(null,d,c);default:return new l("unknown",null,"unknown")}}a.requestId="";var l=function(){return function(a,c,g){this.msg=a;this.meta=c;this.finalString=g}}();a.setOptions=function(a){b("enabled",a,this);b("maxMessages",a,this);b("defaultAjaxUrl",a,this);b("clientIP",a,this);b("requestId",a,this);b("defaultBeforeSend",a,this);b("serialize",a,this);return this};a.getAllLevel=function(){return-2147483648};a.getTraceLevel=function(){return 1E3};a.getDebugLevel=function(){return 2E3};a.getInfoLevel=
function(){return 3E3};a.getWarnLevel=function(){return 4E3};a.getErrorLevel=function(){return 5E3};a.getFatalLevel=function(){return 6E3};a.getOffLevel=function(){return 2147483647};var h=function(){return function(a,c){this.inner=c;this.name="JL.Exception";this.message=n(a).finalString}}();a.Exception=h;h.prototype=Error();var r=function(){return function(a,c,g,b){this.l=a;this.m=c;this.n=g;this.t=b}}();a.LogItem=r;h=function(){function d(c,g){this.appenderName=c;this.sendLogItems=g;this.level=
a.getTraceLevel();this.sendWithBufferLevel=2147483647;this.storeInBufferLevel=-2147483648;this.bufferSize=0;this.batchSize=1;this.batchTimeout=2147483647;this.buffer=[];this.batchBuffer=[];this.batchTimeoutTimer=null}d.prototype.clearTimeoutTimer=function(){this.batchTimeoutTimer&&(clearTimeout(this.batchTimeoutTimer),this.batchTimeoutTimer=null)};d.prototype.addLogItemToBuffer=function(a){this.batchBuffer.push(a);var c=this;this.batchTimeoutTimer||(this.batchTimeoutTimer=setTimeout(function(){c.sendBatch.call(c)},
this.batchTimeout))};d.prototype.setOptions=function(a){b("level",a,this);b("ipRegex",a,this);b("userAgentRegex",a,this);b("disallow",a,this);b("sendWithBufferLevel",a,this);b("storeInBufferLevel",a,this);b("bufferSize",a,this);b("batchSize",a,this);b("batchTimeout",a,this);this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize);return this};d.prototype.log=function(a,g,b,d,m,h,k){!e(this)||!f(this,h)||m<this.storeInBufferLevel||(a=new r(m,h,k,(new Date).getTime()),m<this.level?0<
this.bufferSize&&(this.buffer.push(a),this.buffer.length>this.bufferSize&&this.buffer.shift()):(m<this.sendWithBufferLevel||!this.buffer.length||(this.batchBuffer=this.batchBuffer.concat(this.buffer),this.buffer.length=0),this.addLogItemToBuffer(a),this.batchBuffer.length>=this.batchSize&&this.sendBatch()))};d.prototype.sendBatch=function(){this.clearTimeoutTimer();0==this.batchBuffer.length||null!=a.maxMessages&&1>a.maxMessages||(null!=a.maxMessages&&(a.maxMessages-=this.batchBuffer.length),this.sendLogItems(this.batchBuffer),
this.batchBuffer.length=0)};return d}();a.Appender=h;var p=function(d){function c(a){return d.call(this,a,c.prototype.sendLogItemsAjax)||this}__extends(c,d);c.prototype.setOptions=function(a){b("url",a,this);b("beforeSend",a,this);d.prototype.setOptions.call(this,a);return this};c.prototype.sendLogItemsAjax=function(c){try{var b="/jsnlog.logger";null!=a.defaultAjaxUrl&&(b=a.defaultAjaxUrl);this.url&&(b=this.url);var g=this.getXhr(b),d={r:a.requestId,lg:c};"function"===typeof this.beforeSend?this.beforeSend.call(this,
g,d):"function"===typeof a.defaultBeforeSend&&a.defaultBeforeSend.call(this,g,d);var e=JSON.stringify(d);g.send(e)}catch(u){}};c.prototype.getXhr=function(c){var b=new XMLHttpRequest;if(!("withCredentials"in b)&&"undefined"!=typeof XDomainRequest)return b=new XDomainRequest,b.open("POST",c),b;b.open("POST",c);b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("JSNLog-RequestId",a.requestId);return b};return c}(h);a.AjaxAppender=p;var q=function(b){function c(a){return b.call(this,
a,c.prototype.sendLogItemsConsole)||this}__extends(c,b);c.prototype.clog=function(a){console.log(a)};c.prototype.cerror=function(a){console.error?console.error(a):this.clog(a)};c.prototype.cwarn=function(a){console.warn?console.warn(a):this.clog(a)};c.prototype.cinfo=function(a){console.info?console.info(a):this.clog(a)};c.prototype.cdebug=function(a){console.debug?console.debug(a):this.cinfo(a)};c.prototype.sendLogItemsConsole=function(c){try{if(console){var b;for(b=0;b<c.length;++b){var d=c[b],
g=d.n+": "+d.m;"undefined"===typeof window&&(g=new Date(d.t)+" | "+g);d.l<=a.getDebugLevel()?this.cdebug(g):d.l<=a.getInfoLevel()?this.cinfo(g):d.l<=a.getWarnLevel()?this.cwarn(g):this.cerror(g)}}}catch(t){}};return c}(h);a.ConsoleAppender=q;h=function(){function a(a){this.loggerName=a;this.seenRegexes=[]}a.prototype.setOptions=function(a){b("level",a,this);b("userAgentRegex",a,this);b("disallow",a,this);b("ipRegex",a,this);b("appenders",a,this);b("onceOnly",a,this);this.seenRegexes=[];return this};
a.prototype.buildExceptionObject=function(a){var b={};a.stack?b.stack=a.stack:b.e=a;a.message&&(b.message=a.message);a.name&&(b.name=a.name);a.data&&(b.data=a.data);a.inner&&(b.inner=this.buildExceptionObject(a.inner));return b};a.prototype.log=function(a,b,d){var c=0;if(!this.appenders)return this;if(a>=this.level&&e(this)&&(d?(c=this.buildExceptionObject(d),c.logData=k(b)):c=b,b=n(c),f(this,b.finalString))){if(this.onceOnly)for(c=this.onceOnly.length-1;0<=c;){if((new RegExp(this.onceOnly[c])).test(b.finalString)){if(this.seenRegexes[c])return this;
this.seenRegexes[c]=!0}c--}b.meta=b.meta||{};for(c=this.appenders.length-1;0<=c;)this.appenders[c].log(1E3>=a?"trace":2E3>=a?"debug":3E3>=a?"info":4E3>=a?"warn":5E3>=a?"error":"fatal",b.msg,b.meta,function(){},a,b.finalString,this.loggerName),c--}return this};a.prototype.trace=function(a){return this.log(1E3,a)};a.prototype.debug=function(a){return this.log(2E3,a)};a.prototype.info=function(a){return this.log(3E3,a)};a.prototype.warn=function(a){return this.log(4E3,a)};a.prototype.error=function(a){return this.log(5E3,
a)};a.prototype.fatal=function(a){return this.log(6E3,a)};a.prototype.fatalException=function(a,b){return this.log(6E3,a,b)};return a}();a.Logger=h;a.createAjaxAppender=function(a){return new p(a)};a.createConsoleAppender=function(a){return new q(a)};h=new p("");"undefined"===typeof window&&(h=new q(""));a.__=new a.Logger("");a.__.setOptions({level:a.getDebugLevel(),appenders:[h]})})(JL||(JL={}));"undefined"!==typeof exports&&(exports.JL=JL);var define;
"function"==typeof define&&define.amd&&define("jsnlog",[],function(){return JL});"function"==typeof __jsnlog_configure&&__jsnlog_configure(JL);"undefined"===typeof window||window.onerror||(window.onerror=function(a,b,e,f,k){JL("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:a,url:b,"line number":e,column:f},k);return!1});
"undefined"===typeof window||window.onunhandledrejection||(window.onunhandledrejection=function(a){JL("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:a.reason?a.reason.message:null},a.reason)});

!function(ng){"use strict";ng.module("vcRecaptcha",[])}(angular),function(ng){"use strict";var app=ng.module("vcRecaptcha");app.service("vcRecaptchaService",["$window","$q",function($window,$q){function getRecaptcha(){return recaptcha?$q.when(recaptcha):promise}function validateRecaptchaInstance(){if(!recaptcha)throw new Error("reCaptcha has not been loaded yet.")}var recaptcha,deferred=$q.defer(),promise=deferred.promise;return $window.vcRecaptchaApiLoaded=function(){recaptcha=$window.grecaptcha,deferred.resolve(recaptcha)},ng.isDefined($window.grecaptcha)&&$window.vcRecaptchaApiLoaded(),{create:function(elm,key,fn,conf){return conf.callback=fn,conf.sitekey=key,getRecaptcha().then(function(recaptcha){return recaptcha.render(elm,conf)})},reload:function(widgetId){validateRecaptchaInstance(),recaptcha.reset(widgetId)},getResponse:function(widgetId){return validateRecaptchaInstance(),recaptcha.getResponse(widgetId)}}}])}(angular),function(ng){"use strict";function throwNoKeyException(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var app=ng.module("vcRecaptcha");app.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function($document,$timeout,vcRecaptcha){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=",theme:"=?",size:"=?",tabindex:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(scope,elm,attrs,ctrl){function destroy(){ctrl&&ctrl.$setValidity("recaptcha",null),sessionTimeout&&($timeout.cancel(sessionTimeout),sessionTimeout=null),cleanup()}function cleanup(){angular.element($document[0].querySelectorAll(".pls-container")).parent().remove()}attrs.hasOwnProperty("key")||throwNoKeyException(),scope.widgetId=null;var sessionTimeout,removeCreationListener=scope.$watch("key",function(key){if(key){40!==key.length&&throwNoKeyException();var callback=function(gRecaptchaResponse){$timeout(function(){ctrl&&ctrl.$setValidity("recaptcha",!0),scope.response=gRecaptchaResponse,scope.onSuccess({response:gRecaptchaResponse,widgetId:scope.widgetId})}),sessionTimeout=$timeout(function(){ctrl&&ctrl.$setValidity("recaptcha",!1),scope.response="",scope.onExpire({widgetId:scope.widgetId})},12e4)};vcRecaptcha.create(elm[0],key,callback,{theme:scope.theme||attrs.theme||null,tabindex:scope.tabindex||attrs.tabindex||null,size:scope.size||attrs.size||null}).then(function(widgetId){ctrl&&ctrl.$setValidity("recaptcha",!1),scope.widgetId=widgetId,scope.onCreate({widgetId:widgetId}),scope.$on("$destroy",destroy)}),removeCreationListener()}})}}}])}(angular);
!function(window,angular){"use strict";function $AriaProvider(){function watchExpr(attrName,ariaAttr,nodeBlackList,negate){return function(scope,elem,attr){var ariaCamelName=attr.$normalize(ariaAttr);!config[ariaCamelName]||isNodeOneOf(elem,nodeBlackList)||attr[ariaCamelName]||scope.$watch(attr[attrName],function(boolVal){boolVal=negate?!boolVal:!!boolVal,elem.attr(ariaAttr,boolVal)})}}var config={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeypress:!0,bindRoleForClick:!0};this.config=function(newConfig){config=angular.extend(config,newConfig)},this.$get=function(){return{config:function(key){return config[key]},$$watchExpr:watchExpr}}}var ngAriaModule=angular.module("ngAria",["ng"]).provider("$aria",$AriaProvider),nodeBlackList=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],isNodeOneOf=function(elem,nodeTypeArray){return-1!==nodeTypeArray.indexOf(elem[0].nodeName)?!0:void 0};ngAriaModule.directive("ngShow",["$aria",function($aria){return $aria.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function($aria){return $aria.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function($aria){return $aria.$$watchExpr("ngValue","aria-checked",nodeBlackList,!1)}]).directive("ngChecked",["$aria",function($aria){return $aria.$$watchExpr("ngChecked","aria-checked",nodeBlackList,!1)}]).directive("ngReadonly",["$aria",function($aria){return $aria.$$watchExpr("ngReadonly","aria-readonly",nodeBlackList,!1)}]).directive("ngRequired",["$aria",function($aria){return $aria.$$watchExpr("ngRequired","aria-required",nodeBlackList,!1)}]).directive("ngModel",["$aria",function($aria){function shouldAttachAttr(attr,normalizedAttr,elem,allowBlacklistEls){return $aria.config(normalizedAttr)&&!elem.attr(attr)&&(allowBlacklistEls||!isNodeOneOf(elem,nodeBlackList))}function shouldAttachRole(role,elem){return!elem.attr("role")&&elem.attr("type")===role&&"INPUT"!==elem[0].nodeName}function getShape(attr,elem){var type=attr.type,role=attr.role;return"checkbox"===(type||role)||"menuitemcheckbox"===role?"checkbox":"radio"===(type||role)||"menuitemradio"===role?"radio":"range"===type||"progressbar"===role||"slider"===role?"range":""}return{restrict:"A",require:"ngModel",priority:200,compile:function(elem,attr){var shape=getShape(attr,elem);return{pre:function(scope,elem,attr,ngModel){"checkbox"===shape&&(ngModel.$isEmpty=function(value){return value===!1})},post:function(scope,elem,attr,ngModel){function ngAriaWatchModelValue(){return ngModel.$modelValue}function getRadioReaction(newVal){var boolVal=attr.value==ngModel.$viewValue;elem.attr("aria-checked",boolVal)}function getCheckboxReaction(){elem.attr("aria-checked",!ngModel.$isEmpty(ngModel.$viewValue))}var needsTabIndex=shouldAttachAttr("tabindex","tabindex",elem,!1);switch(shape){case"radio":case"checkbox":shouldAttachRole(shape,elem)&&elem.attr("role",shape),shouldAttachAttr("aria-checked","ariaChecked",elem,!1)&&scope.$watch(ngAriaWatchModelValue,"radio"===shape?getRadioReaction:getCheckboxReaction),needsTabIndex&&elem.attr("tabindex",0);break;case"range":if(shouldAttachRole(shape,elem)&&elem.attr("role","slider"),$aria.config("ariaValue")){var needsAriaValuemin=!elem.attr("aria-valuemin")&&(attr.hasOwnProperty("min")||attr.hasOwnProperty("ngMin")),needsAriaValuemax=!elem.attr("aria-valuemax")&&(attr.hasOwnProperty("max")||attr.hasOwnProperty("ngMax")),needsAriaValuenow=!elem.attr("aria-valuenow");needsAriaValuemin&&attr.$observe("min",function(newVal){elem.attr("aria-valuemin",newVal)}),needsAriaValuemax&&attr.$observe("max",function(newVal){elem.attr("aria-valuemax",newVal)}),needsAriaValuenow&&scope.$watch(ngAriaWatchModelValue,function(newVal){elem.attr("aria-valuenow",newVal)})}needsTabIndex&&elem.attr("tabindex",0)}!attr.hasOwnProperty("ngRequired")&&ngModel.$validators.required&&shouldAttachAttr("aria-required","ariaRequired",elem,!1)&&attr.$observe("required",function(){elem.attr("aria-required",!!attr.required)}),shouldAttachAttr("aria-invalid","ariaInvalid",elem,!0)&&scope.$watch(function(){return ngModel.$invalid},function(newVal){elem.attr("aria-invalid",!!newVal)})}}}}}]).directive("ngDisabled",["$aria",function($aria){return $aria.$$watchExpr("ngDisabled","aria-disabled",nodeBlackList,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(scope,elem,attr,ngMessages){elem.attr("aria-live")||elem.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function($aria,$parse){return{restrict:"A",compile:function(elem,attr){var fn=$parse(attr.ngClick,null,!0);return function(scope,elem,attr){isNodeOneOf(elem,nodeBlackList)||($aria.config("bindRoleForClick")&&!elem.attr("role")&&elem.attr("role","button"),$aria.config("tabindex")&&!elem.attr("tabindex")&&elem.attr("tabindex",0),$aria.config("bindKeypress")&&!attr.ngKeypress&&elem.on("keypress",function(event){function callback(){fn(scope,{$event:event})}var keyCode=event.which||event.keyCode;(32===keyCode||13===keyCode)&&scope.$apply(callback)}))}}}}]).directive("ngDblclick",["$aria",function($aria){return function(scope,elem,attr){!$aria.config("tabindex")||elem.attr("tabindex")||isNodeOneOf(elem,nodeBlackList)||elem.attr("tabindex",0)}}])}(window,window.angular);
!function(){"use strict";var bindonceModule=angular.module("pasvaz.bindonce",[]);bindonceModule.directive("bindonce",function(){var toBoolean=function(value){if(value&&0!==value.length){var v=angular.lowercase(""+value);value=!("f"===v||"0"===v||"false"===v||"no"===v||"n"===v||"[]"===v)}else value=!1;return value},msie=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(msie)&&(msie=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var bindonceDirective={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function($scope,$element,$attrs,$interpolate){var showHideBinder=function(elm,attr,value){var show="show"===attr?"":"none",hide="hide"===attr?"":"none";elm.css("display",toBoolean(value)?show:hide)},classBinder=function(elm,value){if(angular.isObject(value)&&!angular.isArray(value)){var results=[];angular.forEach(value,function(value,index){value&&results.push(index)}),value=results}value&&elm.addClass(angular.isArray(value)?value.join(" "):value)},transclude=function(transcluder,scope){transcluder.transclude(scope,function(clone){var parent=transcluder.element.parent(),afterNode=transcluder.element&&transcluder.element[transcluder.element.length-1],parentNode=parent&&parent[0]||afterNode&&afterNode.parentNode,afterNextSibling=afterNode&&afterNode.nextSibling||null;angular.forEach(clone,function(node){parentNode.insertBefore(node,afterNextSibling)})})},ctrl={watcherRemover:void 0,binders:[],group:$attrs.boName,element:$element,ran:!1,addBinder:function(binder){this.binders.push(binder),this.ran&&this.runBinders()},setupWatcher:function(bindonceValue){var that=this;this.watcherRemover=$scope.$watch(bindonceValue,function(newValue){void 0!==newValue&&(that.removeWatcher(),that.checkBindonce(newValue))},!0)},checkBindonce:function(value){var that=this,promise=value.$promise?value.$promise.then:value.then;"function"==typeof promise?promise(function(){that.runBinders()}):that.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var binder=this.binders.shift();if(!this.group||this.group==binder.group){var value=binder.scope.$eval(binder.interpolate?$interpolate(binder.value):binder.value);switch(binder.attr){case"boIf":toBoolean(value)&&transclude(binder,binder.scope.$new());break;case"boSwitch":var selectedTranscludes,switchCtrl=binder.controller[0];(selectedTranscludes=switchCtrl.cases["!"+value]||switchCtrl.cases["?"])&&(binder.scope.$eval(binder.attrs.change),angular.forEach(selectedTranscludes,function(selectedTransclude){transclude(selectedTransclude,binder.scope.$new())}));break;case"boSwitchWhen":var ctrl=binder.controller[0];ctrl.cases["!"+binder.attrs.boSwitchWhen]=ctrl.cases["!"+binder.attrs.boSwitchWhen]||[],ctrl.cases["!"+binder.attrs.boSwitchWhen].push({transclude:binder.transclude,element:binder.element});break;case"boSwitchDefault":var ctrl=binder.controller[0];ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:binder.transclude,element:binder.element});break;case"hide":case"show":showHideBinder(binder.element,binder.attr,value);break;case"class":classBinder(binder.element,value);break;case"text":binder.element.text(value);break;case"html":binder.element.html(value);break;case"style":binder.element.css(value);break;case"disabled":binder.element.prop("disabled",value);break;case"src":binder.element.attr(binder.attr,value),msie&&binder.element.prop("src",value);break;case"attr":angular.forEach(binder.attrs,function(attrValue,attrKey){var newAttr,newValue;attrKey.match(/^boAttr./)&&binder.attrs[attrKey]&&(newAttr=attrKey.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),newValue=binder.scope.$eval(binder.attrs[attrKey]),binder.element.attr(newAttr,newValue))});break;case"href":case"alt":case"title":case"id":case"value":binder.element.attr(binder.attr,value)}}}this.ran=!0}};angular.extend(this,ctrl)}],link:function(scope,elm,attrs,bindonceController){var value=attrs.bindonce&&scope.$eval(attrs.bindonce);void 0!==value?bindonceController.checkBindonce(value):(bindonceController.setupWatcher(attrs.bindonce),elm.bind("$destroy",bindonceController.removeWatcher))}};return bindonceDirective}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boDisabled",attribute:"disabled"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(boDirective){var childPriority=200;return bindonceModule.directive(boDirective.directiveName,function(){var bindonceDirective={priority:boDirective.priority||childPriority,transclude:boDirective.transclude||!1,terminal:boDirective.terminal||!1,require:["^bindonce"].concat(boDirective.require||[]),controller:boDirective.controller,compile:function(tElement,tAttrs,transclude){return function(scope,elm,attrs,controllers){var bindonceController=controllers[0],name=attrs.boParent;if(name&&bindonceController.group!==name){var element=bindonceController.element.parent();bindonceController=void 0;for(var parentValue;9!==element[0].nodeType&&element.length;){if((parentValue=element.data("$bindonceController"))&&parentValue.group===name){bindonceController=parentValue;break}element=element.parent()}if(!bindonceController)throw new Error("No bindonce controller: "+name)}bindonceController.addBinder({element:elm,attr:boDirective.attribute||boDirective.directiveName,attrs:attrs,value:attrs[boDirective.directiveName],interpolate:boDirective.interpolate,group:name,transclude:transclude,controller:controllers.slice(1),scope:scope})}}};return bindonceDirective})})}();
!function(root,factory){"object"==typeof exports?module.exports=factory(require("moment")):"function"==typeof define&&define.amd?define(["moment"],factory):root.moment=factory(root.moment)}(this,function(moment){var DateRange,INTERVALS;return INTERVALS={year:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0},DateRange=function(){function DateRange(start,end){this.start=moment(start),this.end=moment(end)}return DateRange.prototype.clone=function(){return moment().range(this.start,this.end)},DateRange.prototype.contains=function(other,exclusive){return other instanceof DateRange?this.start<=other.start&&(this.end>other.end||this.end.isSame(other.end)&&!exclusive):this.start<=other&&(this.end>other||this.end.isSame(other)&&!exclusive)},DateRange.prototype._by_string=function(interval,hollaback,exclusive){var current,_results;for(current=moment(this.start),_results=[];this.contains(current,exclusive);)hollaback.call(this,current.clone()),_results.push(current.add(1,interval));return _results},DateRange.prototype._by_range=function(range_interval,hollaback,exclusive){var div,i,l,_i,_results;if(div=this/range_interval,l=Math.floor(div),l===1/0)return this;for(l===div&&exclusive&&(l-=1),_results=[],i=_i=0;l>=0?l>=_i:_i>=l;i=l>=0?++_i:--_i)_results.push(hollaback.call(this,moment(this.start.valueOf()+range_interval.valueOf()*i)));return _results},DateRange.prototype.overlaps=function(range){return null!==this.intersect(range)},DateRange.prototype.intersect=function(other){var _ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7;return this.start<=(_ref1=other.start)&&_ref1<(_ref=this.end)&&_ref<other.end?new DateRange(other.start,this.end):other.start<(_ref3=this.start)&&_ref3<(_ref2=other.end)&&_ref2<=this.end?new DateRange(this.start,other.end):other.start<(_ref5=this.start)&&_ref5<=(_ref4=this.end)&&_ref4<other.end?this:this.start<=(_ref7=other.start)&&_ref7<=(_ref6=other.end)&&_ref6<=this.end?other:null},DateRange.prototype.add=function(other){return this.overlaps(other)?new DateRange(moment.min(this.start,other.start),moment.max(this.end,other.end)):null},DateRange.prototype.subtract=function(other){var _ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7;return null===this.intersect(other)?[this]:other.start<=(_ref1=this.start)&&_ref1<(_ref=this.end)&&_ref<=other.end?[]:other.start<=(_ref3=this.start)&&_ref3<(_ref2=other.end)&&_ref2<this.end?[new DateRange(other.end,this.end)]:this.start<(_ref5=other.start)&&_ref5<(_ref4=this.end)&&_ref4<=other.end?[new DateRange(this.start,other.start)]:this.start<(_ref7=other.start)&&_ref7<(_ref6=other.end)&&_ref6<this.end?[new DateRange(this.start,other.start),new DateRange(other.end,this.end)]:void 0},DateRange.prototype.by=function(range,hollaback,exclusive){return"string"==typeof range?this._by_string(range,hollaback,exclusive):this._by_range(range,hollaback,exclusive),this},DateRange.prototype.valueOf=function(){return this.end-this.start},DateRange.prototype.center=function(){var center;return center=this.start+this.diff()/2,moment(center)},DateRange.prototype.toDate=function(){return[this.start.toDate(),this.end.toDate()]},DateRange.prototype.isSame=function(other){return this.start.isSame(other.start)&&this.end.isSame(other.end)},DateRange.prototype.diff=function(unit){return null==unit&&(unit=void 0),this.end.diff(this.start,unit)},DateRange}(),moment.range=function(start,end){return start in INTERVALS?new DateRange(moment(this).startOf(start),moment(this).endOf(start)):new DateRange(start,end)},moment.range.constructor=DateRange,moment.fn.range=moment.range,moment.fn.within=function(range){return range.contains(this._d)},moment});
(function(f,e){var d={extend:function(a,c){for(var h in c)-1!=="browser cpu device engine os".indexOf(h)&&0===c[h].length%2&&(a[h]=c[h].concat(a[h]));return a},has:function(a,c){if("string"===typeof a)return-1!==c.toLowerCase().indexOf(a.toLowerCase())},lowerize:function(a){return a.toLowerCase()}},n=function(){for(var a,c=0,h,b,f,m,g,d,n=arguments;c<n.length&&!g;){var l=n[c],p=n[c+1];if("undefined"===typeof a)for(f in a={},p)m=p[f],"object"===typeof m?a[m[0]]=e:a[m]=e;for(h=b=0;h<l.length&&!g;)if(g=
l[h++].exec(this.getUA()))for(f=0;f<p.length;f++)d=g[++b],m=p[f],"object"===typeof m&&0<m.length?2==m.length?a[m[0]]="function"==typeof m[1]?m[1].call(this,d):m[1]:3==m.length?a[m[0]]="function"!==typeof m[1]||m[1].exec&&m[1].test?d?d.replace(m[1],m[2]):e:d?m[1].call(this,d,m[2]):e:4==m.length&&(a[m[0]]=d?m[3].call(this,d.replace(m[1],m[2])):e):a[m]=d?d:e;c+=2}return a},b=function(a,c){for(var h in c)if("object"===typeof c[h]&&0<c[h].length)for(var b=0;b<c[h].length;b++){if(d.has(c[h][b],a))return"?"===
h?e:h}else if(d.has(c[h],a))return"?"===h?e:h;return a},g={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:"NT 6.4",RT:"ARM"},p={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],["name","version","major"],[/\s(opr)\/((\d+)?[\w\.]+)/i],[["name","Opera"],"version","major"],[/(kindle)\/((\d+)?[\w\.]+)/i,
/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],["name","version","major"],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[["name","IE"],"version","major"],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[["name","Yandex"],"version","major"],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],
[["name",/_/g," "],"version","major"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i],["name","version","major"],[/(dolfin)\/((\d+)?[\w\.]+)/i],[["name","Dolphin"],"version","major"],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[["name","Chrome"],"version","major"],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],["version","major",["name","Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],["version",
"major","name"],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],["name",["major",b,{1:["/8","/1","/3"],2:"/4","?":"/"}],["version",b,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],["name","version","major"],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[["name","Netscape"],"version","major"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,
/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],["name","version","major"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],
[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],["model","vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor",
"Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor","Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[["model",b,{"Fire Phone":["SD","KF"]}],["vendor","Amazon"],["type","mobile"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],
["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],["model",["vendor","Asus"],["type","tablet"]],
[/(sony)\s(tablet\s[ps])/i],["vendor","model",["type","tablet"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation\s[3portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",b,{HTC:"APA",Sprint:"Sprint"}],["model",b,{"Evo Shift 4G":"7373KT"}],["type","mobile"]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],["vendor","model",["type",
"tablet"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],["vendor",["model",/_/g," "],["type","mobile"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[["vendor","Motorola"],
"model",["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/(samsung);smarttv/i],["vendor","model",["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],
["model",["vendor","Sharp"],["type","smarttv"]],[/sie-(\w+)*/i],["model",["vendor","Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android\s3\.[\s\w-;]{10}(a\d{3})/i],["model",["vendor","Acer"],["type","tablet"]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],
["model",["vendor","LG"],["type","mobile"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],["model",["vendor","Lenovo"],["type","tablet"]],[/linux;.+((jolla));/i],["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/(mobile|tablet);.+rv\:.+gecko\//i],[["type",d.lowerize],"vendor","model"]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,
/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv\:([\w\.]+).*(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],["name",["version",b,g]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",b,g]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,
/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"],"version"],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,
/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],["name","version"],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,
/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]},q=function(a,c){if(!(this instanceof q))return(new q(a,c)).getResult();var h=a||(f&&f.navigator&&f.navigator.userAgent?f.navigator.userAgent:""),b=c?d.extend(p,c):p;this.getBrowser=function(){return n.apply(this,b.browser)};this.getCPU=function(){return n.apply(this,b.cpu)};this.getDevice=function(){return n.apply(this,b.device)};this.getEngine=
function(){return n.apply(this,b.engine)};this.getOS=function(){return n.apply(this,b.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return h};this.setUA=function(a){h=a;return this};this.setUA(h)};q.VERSION="0.7.3";q.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"};q.CPU={ARCHITECTURE:"architecture"};q.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",
MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"};q.ENGINE={NAME:"name",VERSION:"version"};q.OS={NAME:"name",VERSION:"version"};if("undefined"!==typeof exports)"undefined"!==typeof module&&module.exports&&(exports=module.exports=q),exports.UAParser=q;else{f.UAParser=q;"function"===typeof define&&define.amd&&define(function(){return q});var r=f.jQuery||f.Zepto;if("undefined"!==typeof r){var t=new q;r.ua=t.getResult();r.ua.get=function(){return t.getUA()};r.ua.set=
function(a){t.setUA(a);a=t.getResult();for(var c in a)r.ua[c]=a[c]}}}})(this);var Detector=function(){var f=["monospace","sans-serif","serif"],e=document.getElementsByTagName("body")[0],d=document.createElement("span");d.style.fontSize="72px";d.innerHTML="mmmmmmmmmmlli";var n={},b={},g;for(g in f)d.style.fontFamily=f[g],e.appendChild(d),n[f[g]]=d.offsetWidth,b[f[g]]=d.offsetHeight,e.removeChild(d);this.detect=function(g){var q=!1,r;for(r in f){d.style.fontFamily=g+","+f[r];e.appendChild(d);var t=d.offsetWidth!=n[f[r]]||d.offsetHeight!=b[f[r]];e.removeChild(d);q=q||t}return q}};var swfobject=function(){function f(){if(!A){try{var a=l.getElementsByTagName("body")[0].appendChild(l.createElement("span"));a.parentNode.removeChild(a)}catch(c){return}A=!0;for(var a=E.length,h=0;h<a;h++)E[h]()}}function e(a){A?a():E[E.length]=a}function d(a){if("undefined"!=typeof u.addEventListener)u.addEventListener("load",a,!1);else if("undefined"!=typeof l.addEventListener)l.addEventListener("load",a,!1);else if("undefined"!=typeof u.attachEvent)v(u,"onload",a);else if("function"==typeof u.onload){var c=
u.onload;u.onload=function(){c();a()}}else u.onload=a}function n(){var a=l.getElementsByTagName("body")[0],c=l.createElement("object");c.setAttribute("type","application/x-shockwave-flash");var h=a.appendChild(c);if(h){var e=0;(function(){if("undefined"!=typeof h.GetVariable){var d=h.GetVariable("$version");d&&(d=d.split(" ")[1].split(","),k.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)])}else if(10>e){e++;setTimeout(arguments.callee,10);return}a.removeChild(c);h=null;b()})()}else b()}
function b(){var a=y.length;if(0<a)for(var c=0;c<a;c++){var b=y[c].id,d=y[c].callbackFn,e={success:!1,id:b};if(0<k.pv[0]){var f=h(b);if(f)if(!D(y[c].swfVersion)||k.wk&&312>k.wk)if(y[c].expressInstall&&p()){e={};e.data=y[c].expressInstall;e.width=f.getAttribute("width")||"0";e.height=f.getAttribute("height")||"0";f.getAttribute("class")&&(e.styleclass=f.getAttribute("class"));f.getAttribute("align")&&(e.align=f.getAttribute("align"));for(var m={},f=f.getElementsByTagName("param"),l=f.length,n=0;n<
l;n++)"movie"!=f[n].getAttribute("name").toLowerCase()&&(m[f[n].getAttribute("name")]=f[n].getAttribute("value"));q(e,m,b,d)}else r(f),d&&d(e);else z(b,!0),d&&(e.success=!0,e.ref=g(b),d(e))}else z(b,!0),d&&((b=g(b))&&"undefined"!=typeof b.SetVariable&&(e.success=!0,e.ref=b),d(e))}}function g(a){var c=null;(a=h(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?c=a:(a=a.getElementsByTagName("object")[0])&&(c=a));return c}function p(){return!F&&D("6.0.65")&&(k.win||k.mac)&&!(k.wk&&312>k.wk)}
function q(c,b,e,d){F=!0;I=d||null;L={success:!1,id:e};var f=h(e);if(f){"OBJECT"==f.nodeName?(C=t(f),G=null):(C=f,G=e);c.id="SWFObjectExprInst";if("undefined"==typeof c.width||!/%$/.test(c.width)&&310>parseInt(c.width,10))c.width="310";if("undefined"==typeof c.height||!/%$/.test(c.height)&&137>parseInt(c.height,10))c.height="137";l.title=l.title.slice(0,47)+" - Flash Player Installation";d=k.ie&&k.win?"ActiveX":"PlugIn";d="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+
d+"&MMdoctitle="+l.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+d):d;k.ie&&k.win&&4!=f.readyState&&(d=l.createElement("div"),e+="SWFObjectNew",d.setAttribute("id",e),f.parentNode.insertBefore(d,f),f.style.display="none",function(){4==f.readyState?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}());a(c,b,e)}}function r(a){if(k.ie&&k.win&&4!=a.readyState){var c=l.createElement("div");a.parentNode.insertBefore(c,a);c.parentNode.replaceChild(t(a),c);a.style.display="none";
(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(t(a),a)}function t(a){var c=l.createElement("div");if(k.win&&k.ie)c.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var b=a.length,h=0;h<b;h++)1==a[h].nodeType&&"PARAM"==a[h].nodeName||8==a[h].nodeType||c.appendChild(a[h].cloneNode(!0));return c}function a(a,c,b){var e,f=h(b);if(k.wk&&312>k.wk)return e;if(f)if("undefined"==typeof a.id&&
(a.id=b),k.ie&&k.win){var d="",m;for(m in a)a[m]!=Object.prototype[m]&&("data"==m.toLowerCase()?c.movie=a[m]:"styleclass"==m.toLowerCase()?d+=' class="'+a[m]+'"':"classid"!=m.toLowerCase()&&(d+=" "+m+'="'+a[m]+'"'));m="";for(var g in c)c[g]!=Object.prototype[g]&&(m+='<param name="'+g+'" value="'+c[g]+'" />');f.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+d+">"+m+"</object>";H[H.length]=a.id;e=h(a.id)}else{g=l.createElement("object");g.setAttribute("type","application/x-shockwave-flash");
for(var n in a)a[n]!=Object.prototype[n]&&("styleclass"==n.toLowerCase()?g.setAttribute("class",a[n]):"classid"!=n.toLowerCase()&&g.setAttribute(n,a[n]));for(d in c)c[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&(a=g,m=d,n=c[d],b=l.createElement("param"),b.setAttribute("name",m),b.setAttribute("value",n),a.appendChild(b));f.parentNode.replaceChild(g,f);e=g}return e}function c(a){var c=h(a);c&&"OBJECT"==c.nodeName&&(k.ie&&k.win?(c.style.display="none",function(){if(4==c.readyState){var b=h(a);
if(b){for(var d in b)"function"==typeof b[d]&&(b[d]=null);b.parentNode.removeChild(b)}}else setTimeout(arguments.callee,10)}()):c.parentNode.removeChild(c))}function h(a){var c=null;try{c=l.getElementById(a)}catch(b){}return c}function v(a,c,b){a.attachEvent(c,b);B[B.length]=[a,c,b]}function D(a){var c=k.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return c[0]>a[0]||c[0]==a[0]&&c[1]>a[1]||c[0]==a[0]&&c[1]==a[1]&&c[2]>=a[2]?!0:!1}function m(a,c,b,h){if(!k.ie||
!k.mac){var d=l.getElementsByTagName("head")[0];d&&(b=b&&"string"==typeof b?b:"screen",h&&(J=w=null),w&&J==b||(h=l.createElement("style"),h.setAttribute("type","text/css"),h.setAttribute("media",b),w=d.appendChild(h),k.ie&&k.win&&"undefined"!=typeof l.styleSheets&&0<l.styleSheets.length&&(w=l.styleSheets[l.styleSheets.length-1]),J=b),k.ie&&k.win?w&&"object"==typeof w.addRule&&w.addRule(a,c):w&&"undefined"!=typeof l.createTextNode&&w.appendChild(l.createTextNode(a+" {"+c+"}")))}}function z(a,c){if(M){var b=
c?"visible":"hidden";A&&h(a)?h(a).style.visibility=b:m("#"+a,"visibility:"+b)}}function K(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var u=window,l=document,x=navigator,N=!1,E=[function(){N?n():b()}],y=[],H=[],B=[],C,G,I,L,A=!1,F=!1,w,J,M=!0,k=function(){var a="undefined"!=typeof l.getElementById&&"undefined"!=typeof l.getElementsByTagName&&"undefined"!=typeof l.createElement,c=x.userAgent.toLowerCase(),b=x.platform.toLowerCase(),h=b?/win/.test(b):
/win/.test(c),b=b?/mac/.test(b):/mac/.test(c),c=/webkit/.test(c)?parseFloat(c.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,d=!+"\v1",e=[0,0,0],f=null;if("undefined"!=typeof x.plugins&&"object"==typeof x.plugins["Shockwave Flash"])!(f=x.plugins["Shockwave Flash"].description)||"undefined"!=typeof x.mimeTypes&&x.mimeTypes["application/x-shockwave-flash"]&&!x.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(N=!0,d=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),e[0]=parseInt(f.replace(/^(.*)\..*$/,
"$1"),10),e[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),e[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof u.ActiveXObject)try{var m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");m&&(f=m.GetVariable("$version"))&&(d=!0,f=f.split(" ")[1].split(","),e=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}catch(g){}return{w3:a,pv:e,wk:c,ie:d,win:h,mac:b}}();(function(){k.w3&&(("undefined"!=typeof l.readyState&&"complete"==l.readyState||
"undefined"==typeof l.readyState&&(l.getElementsByTagName("body")[0]||l.body))&&f(),A||("undefined"!=typeof l.addEventListener&&l.addEventListener("DOMContentLoaded",f,!1),k.ie&&k.win&&(l.attachEvent("onreadystatechange",function(){"complete"==l.readyState&&(l.detachEvent("onreadystatechange",arguments.callee),f())}),u==top&&function(){if(!A){try{l.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}f()}}()),k.wk&&function(){A||(/loaded|complete/.test(l.readyState)?f():
setTimeout(arguments.callee,0))}(),d(f)))})();(function(){k.ie&&k.win&&window.attachEvent("onunload",function(){for(var a=B.length,b=0;b<a;b++)B[b][0].detachEvent(B[b][1],B[b][2]);a=H.length;for(b=0;b<a;b++)c(H[b]);for(var h in k)k[h]=null;k=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,c,b,h){if(k.w3&&a&&c){var d={};d.id=a;d.swfVersion=c;d.expressInstall=b;d.callbackFn=h;y[y.length]=d;z(a,!1)}else h&&h({success:!1,id:a})},getObjectById:function(a){if(k.w3)return g(a)},
embedSWF:function(c,b,h,d,f,m,g,n,l,v){var u={success:!1,id:b};k.w3&&!(k.wk&&312>k.wk)&&c&&b&&h&&d&&f?(z(b,!1),e(function(){h+="";d+="";var e={};if(l&&"object"===typeof l)for(var k in l)e[k]=l[k];e.data=c;e.width=h;e.height=d;k={};if(n&&"object"===typeof n)for(var r in n)k[r]=n[r];if(g&&"object"===typeof g)for(var t in g)k.flashvars="undefined"!=typeof k.flashvars?k.flashvars+("&"+t+"="+g[t]):t+"="+g[t];if(D(f))r=a(e,k,b),e.id==b&&z(b,!0),u.success=!0,u.ref=r;else{if(m&&p()){e.data=m;q(e,k,b,v);return}z(b,
!0)}v&&v(u)})):v&&v(u)},switchOffAutoHideShow:function(){M=!1},ua:k,getFlashPlayerVersion:function(){return{major:k.pv[0],minor:k.pv[1],release:k.pv[2]}},hasFlashPlayerVersion:D,createSWF:function(c,b,h){if(k.w3)return a(c,b,h)},showExpressInstall:function(a,c,b,h){k.w3&&p()&&q(a,c,b,h)},removeSWF:function(a){k.w3&&c(a)},createCSS:function(a,c,b,h){k.w3&&m(a,c,b,h)},addDomLoadEvent:e,addLoadEvent:d,getQueryParamValue:function(a){var c=l.location.search||l.location.hash;if(c){/\?/.test(c)&&(c=c.split("?")[1]);
if(null==a)return K(c);for(var c=c.split("&"),b=0;b<c.length;b++)if(c[b].substring(0,c[b].indexOf("="))==a)return K(c[b].substring(c[b].indexOf("=")+1))}return""},expressInstallCallback:function(){if(F){var a=h("SWFObjectExprInst");a&&C&&(a.parentNode.replaceChild(C,a),G&&(z(G,!0),k.ie&&k.win&&(C.style.display="block")),I&&I(L));F=!1}}}}();function murmurhash3_32_gc(f,e){var d,n,b,g,p;d=f.length&3;n=f.length-d;b=e;for(p=0;p<n;)g=f.charCodeAt(p)&255|(f.charCodeAt(++p)&255)<<8|(f.charCodeAt(++p)&255)<<16|(f.charCodeAt(++p)&255)<<24,++p,g=3432918353*(g&65535)+((3432918353*(g>>>16)&65535)<<16)&4294967295,g=g<<15|g>>>17,g=461845907*(g&65535)+((461845907*(g>>>16)&65535)<<16)&4294967295,b^=g,b=b<<13|b>>>19,b=5*(b&65535)+((5*(b>>>16)&65535)<<16)&4294967295,b=(b&65535)+27492+(((b>>>16)+58964&65535)<<16);g=0;switch(d){case 3:g^=(f.charCodeAt(p+
2)&255)<<16;case 2:g^=(f.charCodeAt(p+1)&255)<<8;case 1:g^=f.charCodeAt(p)&255,g=3432918353*(g&65535)+((3432918353*(g>>>16)&65535)<<16)&4294967295,g=g<<15|g>>>17,b^=461845907*(g&65535)+((461845907*(g>>>16)&65535)<<16)&4294967295}b^=f.length;b^=b>>>16;b=2246822507*(b&65535)+((2246822507*(b>>>16)&65535)<<16)&4294967295;b^=b>>>13;b=3266489909*(b&65535)+((3266489909*(b>>>16)&65535)<<16)&4294967295;return(b^b>>>16)>>>0};var deployJava=function(){function f(a){p.debug&&(console.log?console.log(a):alert(a))}function e(a){if(null==a||0==a.length)return"http://java.com/dt-redirect";"&"==a.charAt(0)&&(a=a.substring(1,a.length));return"http://java.com/dt-redirect?"+a}var d=["id","class","title","style"];"classid codebase codetype data type archive declare standby height width usemap name tabindex align border hspace vspace".split(" ").concat(d,["lang","dir"],"onclick ondblclick onmousedown onmouseup onmouseover onmousemove onmouseout onkeypress onkeydown onkeyup".split(" "));
var n="codebase code name archive object width height alt align hspace vspace".split(" ").concat(d),b;try{b=-1!=document.location.protocol.indexOf("http")?"//java.com/js/webstart.png":"http://java.com/js/webstart.png"}catch(g){b="http://java.com/js/webstart.png"}var p={debug:null,version:"20120801",firefoxJavaVersion:null,myInterval:null,preInstallJREList:null,returnPage:null,brand:null,locale:null,installType:null,EAInstallEnabled:!1,EarlyAccessURL:null,oldMimeType:"application/npruntime-scriptable-plugin;DeploymentToolkit",
mimeType:"application/java-deployment-toolkit",launchButtonPNG:b,browserName:null,browserName2:null,getJREs:function(){var a=[];if(this.isPluginInstalled())for(var c=this.getPlugin().jvms,b=0;b<c.getLength();b++)a[b]=c.get(b).version;else c=this.getBrowser(),"MSIE"==c?this.testUsingActiveX("1.7.0")?a[0]="1.7.0":this.testUsingActiveX("1.6.0")?a[0]="1.6.0":this.testUsingActiveX("1.5.0")?a[0]="1.5.0":this.testUsingActiveX("1.4.2")?a[0]="1.4.2":this.testForMSVM()&&(a[0]="1.1"):"Netscape Family"==c&&(this.getJPIVersionUsingMimeType(),
null!=this.firefoxJavaVersion?a[0]=this.firefoxJavaVersion:this.testUsingMimeTypes("1.7")?a[0]="1.7.0":this.testUsingMimeTypes("1.6")?a[0]="1.6.0":this.testUsingMimeTypes("1.5")?a[0]="1.5.0":this.testUsingMimeTypes("1.4.2")?a[0]="1.4.2":"Safari"==this.browserName2&&(this.testUsingPluginsArray("1.7.0")?a[0]="1.7.0":this.testUsingPluginsArray("1.6")?a[0]="1.6.0":this.testUsingPluginsArray("1.5")?a[0]="1.5.0":this.testUsingPluginsArray("1.4.2")&&(a[0]="1.4.2")));if(this.debug)for(b=0;b<a.length;++b)f("[getJREs()] We claim to have detected Java SE "+
a[b]);return a},installJRE:function(a,c){if(this.isPluginInstalled()&&this.isAutoInstallEnabled(a)){var b=!1;if(b=this.isCallbackSupported()?this.getPlugin().installJRE(a,c):this.getPlugin().installJRE(a))this.refresh(),null!=this.returnPage&&(document.location=this.returnPage);return b}return this.installLatestJRE()},isAutoInstallEnabled:function(a){if(!this.isPluginInstalled())return!1;"undefined"==typeof a&&(a=null);if("MSIE"!=deployJava.browserName||deployJava.compareVersionToPattern(deployJava.getPlugin().version,
["10","0","0"],!1,!0))a=!0;else if(null==a)a=!1;else{var c="1.6.0_33+";if(null==c||0==c.length)a=!0;else{var b=c.charAt(c.length-1);"+"!=b&&"*"!=b&&-1!=c.indexOf("_")&&"_"!=b&&(c+="*",b="*");c=c.substring(0,c.length-1);if(0<c.length){var d=c.charAt(c.length-1);if("."==d||"_"==d)c=c.substring(0,c.length-1)}a="*"==b?0==a.indexOf(c):"+"==b?c<=a:!1}a=!a}return a},isCallbackSupported:function(){return this.isPluginInstalled()&&this.compareVersionToPattern(this.getPlugin().version,["10","2","0"],!1,!0)},
installLatestJRE:function(a){if(this.isPluginInstalled()&&this.isAutoInstallEnabled()){var c=!1;if(c=this.isCallbackSupported()?this.getPlugin().installLatestJRE(a):this.getPlugin().installLatestJRE())this.refresh(),null!=this.returnPage&&(document.location=this.returnPage);return c}a=this.getBrowser();c=navigator.platform.toLowerCase();if("true"==this.EAInstallEnabled&&-1!=c.indexOf("win")&&null!=this.EarlyAccessURL)this.preInstallJREList=this.getJREs(),null!=this.returnPage&&(this.myInterval=setInterval("deployJava.poll()",
3E3)),location.href=this.EarlyAccessURL;else{if("MSIE"==a)return this.IEInstall();if("Netscape Family"==a&&-1!=c.indexOf("win32"))return this.FFInstall();location.href=e((null!=this.returnPage?"&returnPage="+this.returnPage:"")+(null!=this.locale?"&locale="+this.locale:"")+(null!=this.brand?"&brand="+this.brand:""))}return!1},runApplet:function(a,c,b){if("undefined"==b||null==b)b="1.1";var d=b.match("^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$");null==this.returnPage&&(this.returnPage=document.location);
null!=d?"?"!=this.getBrowser()?this.versionCheck(b+"+")?this.writeAppletTag(a,c):this.installJRE(b+"+")&&(this.refresh(),location.href=document.location,this.writeAppletTag(a,c)):this.writeAppletTag(a,c):f("[runApplet()] Invalid minimumVersion argument to runApplet():"+b)},writeAppletTag:function(a,c){var b="<applet ",d="",e=!0;if(null==c||"object"!=typeof c)c={};for(var f in a){var g;a:{g=f.toLowerCase();for(var p=n.length,q=0;q<p;q++)if(n[q]===g){g=!0;break a}g=!1}g?(b+=" "+f+'="'+a[f]+'"',"code"==
f&&(e=!1)):c[f]=a[f]}f=!1;for(var l in c){"codebase_lookup"==l&&(f=!0);if("object"==l||"java_object"==l||"java_code"==l)e=!1;d+='<param name="'+l+'" value="'+c[l]+'"/>'}f||(d+='<param name="codebase_lookup" value="false"/>');e&&(b+=' code="dummy"');document.write(b+">\n"+d+"\n</applet>")},versionCheck:function(a){var c=0,b=a.match("^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?(\\*|\\+)?$");if(null!=b){for(var d=a=!1,e=[],g=1;g<b.length;++g)"string"==typeof b[g]&&""!=b[g]&&(e[c]=b[g],c++);"+"==e[e.length-
1]?(d=!0,a=!1,e.length--):"*"==e[e.length-1]?(d=!1,a=!0,e.length--):4>e.length&&(d=!1,a=!0);c=this.getJREs();for(g=0;g<c.length;++g)if(this.compareVersionToPattern(c[g],e,a,d))return!0}else c="Invalid versionPattern passed to versionCheck: "+a,f("[versionCheck()] "+c),alert(c);return!1},isWebStartInstalled:function(a){if("?"==this.getBrowser())return!0;if("undefined"==a||null==a)a="1.4.2";var c=!1;null!=a.match("^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$")?c=this.versionCheck(a+"+"):(f("[isWebStartInstaller()] Invalid minimumVersion argument to isWebStartInstalled(): "+
a),c=this.versionCheck("1.4.2+"));return c},getJPIVersionUsingMimeType:function(){for(var a=0;a<navigator.mimeTypes.length;++a){var c=navigator.mimeTypes[a].type.match(/^application\/x-java-applet;jpi-version=(.*)$/);if(null!=c&&(this.firefoxJavaVersion=c[1],"Opera"!=this.browserName2))break}},launchWebStartApplication:function(a){navigator.userAgent.toLowerCase();this.getJPIVersionUsingMimeType();if(0==this.isWebStartInstalled("1.7.0")&&(0==this.installJRE("1.7.0+")||0==this.isWebStartInstalled("1.7.0")))return!1;
var c=null;document.documentURI&&(c=document.documentURI);null==c&&(c=document.URL);var b=this.getBrowser(),d;"MSIE"==b?d='<object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" width="0" height="0"><PARAM name="launchjnlp" value="'+a+'"><PARAM name="docbase" value="'+c+'"></object>':"Netscape Family"==b&&(d='<embed type="application/x-java-applet;jpi-version='+this.firefoxJavaVersion+'" width="0" height="0" launchjnlp="'+a+'"docbase="'+c+'" />');"undefined"==document.body||null==document.body?
(document.write(d),document.location=c):(a=document.createElement("div"),a.id="div1",a.style.position="relative",a.style.left="-10000px",a.style.margin="0px auto",a.className="dynamicDiv",a.innerHTML=d,document.body.appendChild(a))},createWebStartLaunchButtonEx:function(a,c){null==this.returnPage&&(this.returnPage=a);document.write('<a href="'+("javascript:deployJava.launchWebStartApplication('"+a+"');")+'" onMouseOver="window.status=\'\'; return true;"><img src="'+this.launchButtonPNG+'" border="0" /></a>')},
createWebStartLaunchButton:function(a,c){null==this.returnPage&&(this.returnPage=a);document.write('<a href="'+("javascript:if (!deployJava.isWebStartInstalled(&quot;"+c+"&quot;)) {if (deployJava.installLatestJRE()) {if (deployJava.launch(&quot;"+a+"&quot;)) {}}} else {if (deployJava.launch(&quot;"+a+"&quot;)) {}}")+'" onMouseOver="window.status=\'\'; return true;"><img src="'+this.launchButtonPNG+'" border="0" /></a>')},launch:function(a){document.location=a;return!0},isPluginInstalled:function(){var a=
this.getPlugin();return a&&a.jvms?!0:!1},isAutoUpdateEnabled:function(){return this.isPluginInstalled()?this.getPlugin().isAutoUpdateEnabled():!1},setAutoUpdateEnabled:function(){return this.isPluginInstalled()?this.getPlugin().setAutoUpdateEnabled():!1},setInstallerType:function(a){this.installType=a;return this.isPluginInstalled()?this.getPlugin().setInstallerType(a):!1},setAdditionalPackages:function(a){return this.isPluginInstalled()?this.getPlugin().setAdditionalPackages(a):!1},setEarlyAccess:function(a){this.EAInstallEnabled=
a},isPlugin2:function(){if(this.isPluginInstalled()&&this.versionCheck("1.6.0_10+"))try{return this.getPlugin().isPlugin2()}catch(a){}return!1},allowPlugin:function(){this.getBrowser();return"Safari"!=this.browserName2&&"Opera"!=this.browserName2},getPlugin:function(){this.refresh();var a=null;this.allowPlugin()&&(a=document.getElementById("deployJavaPlugin"));return a},compareVersionToPattern:function(a,c,b,d){if(void 0==a||void 0==c)return!1;var e=a.match("^(\\d+)(?:\\.(\\d+)(?:\\.(\\d+)(?:_(\\d+))?)?)?$");
if(null!=e){var f=0;a=[];for(var g=1;g<e.length;++g)"string"==typeof e[g]&&""!=e[g]&&(a[f]=e[g],f++);e=Math.min(a.length,c.length);if(d){for(g=0;g<e;++g){if(a[g]<c[g])return!1;if(a[g]>c[g])break}return!0}for(g=0;g<e;++g)if(a[g]!=c[g])return!1;return b?!0:a.length==c.length}return!1},getBrowser:function(){if(null==this.browserName){var a=navigator.userAgent.toLowerCase();f("[getBrowser()] navigator.userAgent.toLowerCase() -> "+a);-1!=a.indexOf("msie")&&-1==a.indexOf("opera")?this.browserName2=this.browserName=
"MSIE":-1!=a.indexOf("iphone")?(this.browserName="Netscape Family",this.browserName2="iPhone"):-1!=a.indexOf("firefox")&&-1==a.indexOf("opera")?(this.browserName="Netscape Family",this.browserName2="Firefox"):-1!=a.indexOf("chrome")?(this.browserName="Netscape Family",this.browserName2="Chrome"):-1!=a.indexOf("safari")?(this.browserName="Netscape Family",this.browserName2="Safari"):-1!=a.indexOf("mozilla")&&-1==a.indexOf("opera")?(this.browserName="Netscape Family",this.browserName2="Other"):-1!=
a.indexOf("opera")?(this.browserName="Netscape Family",this.browserName2="Opera"):(this.browserName="?",this.browserName2="unknown");f("[getBrowser()] Detected browser name:"+this.browserName+", "+this.browserName2)}return this.browserName},testUsingActiveX:function(a){a="JavaWebStart.isInstalled."+a+".0";if("undefined"==typeof ActiveXObject||!ActiveXObject)return f("[testUsingActiveX()] Browser claims to be IE, but no ActiveXObject object?"),!1;try{return null!=new ActiveXObject(a)}catch(c){return!1}},
testForMSVM:function(){if("undefined"!=typeof oClientCaps){var a=oClientCaps.getComponentVersion("{08B0E5C0-4FCB-11CF-AAA5-00401C608500}","ComponentID");return""==a||"5,0,5000,0"==a?!1:!0}return!1},testUsingMimeTypes:function(a){if(!navigator.mimeTypes)return f("[testUsingMimeTypes()] Browser claims to be Netscape family, but no mimeTypes[] array?"),!1;for(var c=0;c<navigator.mimeTypes.length;++c){s=navigator.mimeTypes[c].type;var b=s.match(/^application\/x-java-applet\x3Bversion=(1\.8|1\.7|1\.6|1\.5|1\.4\.2)$/);
if(null!=b&&this.compareVersions(b[1],a))return!0}return!1},testUsingPluginsArray:function(a){if(!navigator.plugins||!navigator.plugins.length)return!1;for(var c=navigator.platform.toLowerCase(),b=0;b<navigator.plugins.length;++b)if(s=navigator.plugins[b].description,-1!=s.search(/^Java Switchable Plug-in (Cocoa)/)){if(this.compareVersions("1.5.0",a))return!0}else if(-1!=s.search(/^Java/)&&-1!=c.indexOf("win")&&(this.compareVersions("1.5.0",a)||this.compareVersions("1.6.0",a)))return!0;return this.compareVersions("1.5.0",
a)?!0:!1},IEInstall:function(){location.href=e((null!=this.returnPage?"&returnPage="+this.returnPage:"")+(null!=this.locale?"&locale="+this.locale:"")+(null!=this.brand?"&brand="+this.brand:""));return!1},done:function(a,b){},FFInstall:function(){location.href=e((null!=this.returnPage?"&returnPage="+this.returnPage:"")+(null!=this.locale?"&locale="+this.locale:"")+(null!=this.brand?"&brand="+this.brand:"")+(null!=this.installType?"&type="+this.installType:""));return!1},compareVersions:function(a,
b){for(var d=a.split("."),e=b.split("."),f=0;f<d.length;++f)d[f]=Number(d[f]);for(f=0;f<e.length;++f)e[f]=Number(e[f]);2==d.length&&(d[2]=0);return d[0]>e[0]?!0:d[0]<e[0]?!1:d[1]>e[1]?!0:d[1]<e[1]?!1:d[2]>e[2]?!0:d[2]<e[2]?!1:!0},enableAlerts:function(){this.browserName=null;this.debug=!0},poll:function(){this.refresh();var a=this.getJREs();0==this.preInstallJREList.length&&0!=a.length&&(clearInterval(this.myInterval),null!=this.returnPage&&(location.href=this.returnPage));0!=this.preInstallJREList.length&&
0!=a.length&&this.preInstallJREList[0]!=a[0]&&(clearInterval(this.myInterval),null!=this.returnPage&&(location.href=this.returnPage))},writePluginTag:function(){var a=this.getBrowser();"MSIE"==a?document.write('<object classid="clsid:CAFEEFAC-DEC7-0000-0001-ABCDEFFEDCBA" id="deployJavaPlugin" width="0" height="0"></object>'):"Netscape Family"==a&&this.allowPlugin()&&this.writeEmbedTag()},refresh:function(){navigator.plugins.refresh(!1);"Netscape Family"==this.getBrowser()&&this.allowPlugin()&&null==
document.getElementById("deployJavaPlugin")&&this.writeEmbedTag()},writeEmbedTag:function(){var a=!1;if(null!=navigator.mimeTypes){for(var b=0;b<navigator.mimeTypes.length;b++)navigator.mimeTypes[b].type==this.mimeType&&navigator.mimeTypes[b].enabledPlugin&&(document.write('<embed id="deployJavaPlugin" type="'+this.mimeType+'" hidden="true" />'),a=!0);if(!a)for(b=0;b<navigator.mimeTypes.length;b++)navigator.mimeTypes[b].type==this.oldMimeType&&navigator.mimeTypes[b].enabledPlugin&&document.write('<embed id="deployJavaPlugin" type="'+
this.oldMimeType+'" hidden="true" />')}}};p.writePluginTag();if(null==p.locale){d=null;if(null==d)try{d=navigator.userLanguage}catch(q){}if(null==d)try{d=navigator.systemLanguage}catch(r){}if(null==d)try{d=navigator.language}catch(t){}null!=d&&(d.replace("-","_"),p.locale=d)}return p}();(function(f){var e,d=function(){e=(new UAParser).getResult();return this};d.prototype={getSoftwareVersion:function(){return"ClientJS 0.1.5"},getBrowserData:function(){return e},getFingerprint:function(){var d=e.ua,b=this.getScreenPrint(),f=this.getPlugins(),p=this.getFonts(),q=this.isLocalStorage(),r=this.isSessionStorage(),t=this.getTimeZone(),a=this.getLanguage(),c=this.getSystemLanguage(),h=this.isCookie(),v=this.getCanvasPrint();return murmurhash3_32_gc(d+"|"+b+"|"+f+"|"+p+"|"+q+"|"+r+"|"+t+"|"+
a+"|"+c+"|"+h+"|"+v,256)},getUserAgent:function(){return e.ua},getUserAgentLowerCase:function(){return e.ua.toLowerCase()},getBrowser:function(){return e.browser.name},getBrowserVersion:function(){return e.browser.version},getBrowserMajorVersion:function(){return e.browser.major},isIE:function(){return/IE/i.test(e.browser.name)},isChrome:function(){return/Chrome/i.test(e.browser.name)},isFirefox:function(){return/Firefox/i.test(e.browser.name)},isSafari:function(){return/Safari/i.test(e.browser.name)},
isOpera:function(){return/Opera/i.test(e.browser.name)},getEngine:function(){return e.engine.name},getEngineVersion:function(){return e.engine.version},getOS:function(){return e.os.name},getOSVersion:function(){return e.os.version},isWindows:function(){return/Windows/i.test(e.os.name)},isMac:function(){return/Mac/i.test(e.os.name)},isLinux:function(){return/Linux/i.test(e.os.name)},isUbuntu:function(){return/Ubuntu/i.test(e.os.name)},isSolaris:function(){return/Solaris/i.test(e.os.name)},getDevice:function(){return e.device.model},
getDeviceType:function(){return e.device.type},getDeviceVendor:function(){return e.device.vendor},getCPU:function(){return e.cpu.architecture},isMobile:function(){var d=e.ua||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(d)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(d.substr(0,
4))},isMobileMajor:function(){return this.isMobileAndroid()||this.isMobileBlackBerry()||this.isMobileIOS()||this.isMobileOpera()||this.isMobileWindows()},isMobileAndroid:function(){return e.ua.match(/Android/i)?!0:!1},isMobileOpera:function(){return e.ua.match(/Opera Mini/i)?!0:!1},isMobileWindows:function(){return e.ua.match(/IEMobile/i)?!0:!1},isMobileBlackBerry:function(){return e.ua.match(/BlackBerry/i)?!0:!1},isMobileIOS:function(){return e.ua.match(/iPhone|iPad|iPod/i)?!0:!1},isIphone:function(){return e.ua.match(/iPhone/i)?
!0:!1},isIpad:function(){return e.ua.match(/iPad/i)?!0:!1},isIpod:function(){return e.ua.match(/iPod/i)?!0:!1},getScreenPrint:function(){return"Current Resolution: "+this.getCurrentResolution()+", Avaiable Resolution: "+this.getAvailableResolution()+", Color Depth: "+this.getColorDepth()+", Device XDPI: "+this.getDeviceXDPI()+", Device YDPI: "+this.getDeviceYDPI()},getColorDepth:function(){return screen.colorDepth},getCurrentResolution:function(){return screen.width+"x"+screen.height},getAvailableResolution:function(){return screen.availWidth+
"x"+screen.availHeight},getDeviceXDPI:function(){return screen.deviceXDPI},getDeviceYDPI:function(){return screen.deviceYDPI},getPlugins:function(){for(var d="",b=0;b<navigator.plugins.length;b++)d=b==navigator.plugins.length-1?d+navigator.plugins[b].name:d+(navigator.plugins[b].name+", ");return d},isJava:function(){return navigator.javaEnabled()},getJavaVersion:function(){return deployJava.getJREs().toString()},isFlash:function(){return navigator.plugins["Shockwave Flash"]?!0:!1},getFlashVersion:function(){return this.isFlash()?
(objPlayerVersion=swfobject.getFlashPlayerVersion(),objPlayerVersion.major+"."+objPlayerVersion.minor+"."+objPlayerVersion.release):""},isSilverlight:function(){return navigator.plugins["Silverlight Plug-In"]?!0:!1},getSilverlightVersion:function(){return this.isSilverlight()?navigator.plugins["Silverlight Plug-In"].description:""},isMimeTypes:function(){return navigator.mimeTypes.length?!0:!1},getMimeTypes:function(){for(var d="",b=0;b<navigator.mimeTypes.length;b++)d=b==navigator.mimeTypes.length-
1?d+navigator.mimeTypes[b].description:d+(navigator.mimeTypes[b].description+", ");return d},isFont:function(d){return(new Detector).detect(d)},getFonts:function(){for(var d=new Detector,b="Abadi MT Condensed Light;Adobe Fangsong Std;Adobe Hebrew;Adobe Ming Std;Agency FB;Aharoni;Andalus;Angsana New;AngsanaUPC;Aparajita;Arab;Arabic Transparent;Arabic Typesetting;Arial Baltic;Arial Black;Arial CE;Arial CYR;Arial Greek;Arial TUR;Arial;Batang;BatangChe;Bauhaus 93;Bell MT;Bitstream Vera Serif;Bodoni MT;Bookman Old Style;Braggadocio;Broadway;Browallia New;BrowalliaUPC;Calibri Light;Calibri;Californian FB;Cambria Math;Cambria;Candara;Castellar;Casual;Centaur;Century Gothic;Chalkduster;Colonna MT;Comic Sans MS;Consolas;Constantia;Copperplate Gothic Light;Corbel;Cordia New;CordiaUPC;Courier New Baltic;Courier New CE;Courier New CYR;Courier New Greek;Courier New TUR;Courier New;DFKai-SB;DaunPenh;David;DejaVu LGC Sans Mono;Desdemona;DilleniaUPC;DokChampa;Dotum;DotumChe;Ebrima;Engravers MT;Eras Bold ITC;Estrangelo Edessa;EucrosiaUPC;Euphemia;Eurostile;FangSong;Forte;FrankRuehl;Franklin Gothic Heavy;Franklin Gothic Medium;FreesiaUPC;French Script MT;Gabriola;Gautami;Georgia;Gigi;Gisha;Goudy Old Style;Gulim;GulimChe;GungSeo;Gungsuh;GungsuhChe;Haettenschweiler;Harrington;Hei S;HeiT;Heisei Kaku Gothic;Hiragino Sans GB;Impact;Informal Roman;IrisUPC;Iskoola Pota;JasmineUPC;KacstOne;KaiTi;Kalinga;Kartika;Khmer UI;Kino MT;KodchiangUPC;Kokila;Kozuka Gothic Pr6N;Lao UI;Latha;Leelawadee;Levenim MT;LilyUPC;Lohit Gujarati;Loma;Lucida Bright;Lucida Console;Lucida Fax;Lucida Sans Unicode;MS Gothic;MS Mincho;MS PGothic;MS PMincho;MS Reference Sans Serif;MS UI Gothic;MV Boli;Magneto;Malgun Gothic;Mangal;Marlett;Matura MT Script Capitals;Meiryo UI;Meiryo;Menlo;Microsoft Himalaya;Microsoft JhengHei;Microsoft New Tai Lue;Microsoft PhagsPa;Microsoft Sans Serif;Microsoft Tai Le;Microsoft Uighur;Microsoft YaHei;Microsoft Yi Baiti;MingLiU;MingLiU-ExtB;MingLiU_HKSCS;MingLiU_HKSCS-ExtB;Miriam Fixed;Miriam;Mongolian Baiti;MoolBoran;NSimSun;Narkisim;News Gothic MT;Niagara Solid;Nyala;PMingLiU;PMingLiU-ExtB;Palace Script MT;Palatino Linotype;Papyrus;Perpetua;Plantagenet Cherokee;Playbill;Prelude Bold;Prelude Condensed Bold;Prelude Condensed Medium;Prelude Medium;PreludeCompressedWGL Black;PreludeCompressedWGL Bold;PreludeCompressedWGL Light;PreludeCompressedWGL Medium;PreludeCondensedWGL Black;PreludeCondensedWGL Bold;PreludeCondensedWGL Light;PreludeCondensedWGL Medium;PreludeWGL Black;PreludeWGL Bold;PreludeWGL Light;PreludeWGL Medium;Raavi;Rachana;Rockwell;Rod;Sakkal Majalla;Sawasdee;Script MT Bold;Segoe Print;Segoe Script;Segoe UI Light;Segoe UI Semibold;Segoe UI Symbol;Segoe UI;Shonar Bangla;Showcard Gothic;Shruti;SimHei;SimSun;SimSun-ExtB;Simplified Arabic Fixed;Simplified Arabic;Snap ITC;Sylfaen;Symbol;Tahoma;Times New Roman Baltic;Times New Roman CE;Times New Roman CYR;Times New Roman Greek;Times New Roman TUR;Times New Roman;TlwgMono;Traditional Arabic;Trebuchet MS;Tunga;Tw Cen MT Condensed Extra Bold;Ubuntu;Umpush;Univers;Utopia;Utsaah;Vani;Verdana;Vijaya;Vladimir Script;Vrinda;Webdings;Wide Latin;Wingdings".split(";"),
e="",f=0;f<b.length;f++)d.detect(b[f])&&(e=f==b.length-1?e+b[f]:e+(b[f]+", "));return e},isLocalStorage:function(){try{return!!f.localStorage}catch(d){return!0}},isSessionStorage:function(){try{return!!f.sessionStorage}catch(d){return!0}},isCookie:function(){return navigator.cookieEnabled},getTimeZone:function(){return String(String(new Date).split("(")[1]).split(")")[0]},getLanguage:function(){return navigator.language},getSystemLanguage:function(){return navigator.systemLanguage},isCanvas:function(){var d=
document.createElement("canvas");try{return!(!d.getContext||!d.getContext("2d"))}catch(b){return!1}},getCanvasPrint:function(){var d=document.createElement("canvas"),b;try{b=d.getContext("2d")}catch(e){return""}b.textBaseline="top";b.font="14px 'Arial'";b.textBaseline="alphabetic";b.fillStyle="#f60";b.fillRect(125,1,62,20);b.fillStyle="#069";b.fillText("http://valve.github.io",2,15);b.fillStyle="rgba(102, 204, 0, 0.7)";b.fillText("http://valve.github.io",4,17);return d.toDataURL()}};"object"===typeof module&&
"object"===typeof exports&&(module.exports=d);f.ClientJS=d})(window);

var ba=ba||{};ba.lang=ba.lang||{},function(n){ba.lang.namespace=function(){for(var e,t,r,o,i=".",a=arguments,c=0;c<a.length;c++)if(e=n,o=a[c],o.indexOf(i)>-1)for(r=o.split(i),t=0;t<r.length;t++)e[r[t]]=e[r[t]]||{},e=e[r[t]];else e[o]=e[o]||{},e=e[o];return e}}(this),function(){function n(n,e){var t;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},t=document.createEvent("CustomEvent"),t.initCustomEvent(n,e.bubbles,e.cancelable,e.detail),t}return"function"==typeof window.CustomEvent?!1:(n.prototype=window.Event.prototype,void(window.CustomEvent=n))}(),document.addEventListener("appready",function(n){var e=document.getElementById("pre-bootstrap");e&&setTimeout(function(){e.parentNode.removeChild(e)},window.environment&&window.environment.LOADING_INTERSTITIAL_TIMEOUT||0)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),ba.lang.namespace("ba.lang"),ba.lang.Lib=angular.module("ba-lang",["special-urls"]).config(["$provide","Environment","SpecialUrlsProvider",function(n,e,t){var r=function(n){for(var e=!1,r=0;!e&&r<t.getUrls().length;)0===n.toLowerCase().indexOf(t.getUrls()[r])&&(e=!0),r++;return!e},o=function(n,t,o){return n[0].compile=function(){return function(n,i,a){var c=t,u=i[0]instanceof SVGElement,s="href"===c,l="src"===c,f=e.get("BAA_CONTEXT_ROOT");u&&s&&(c="xlinkHref",a.$attr[c]="xlink:href"),a.$observe(o,function(n){var e=n;return n?(f&&r(n)&&(u||l)&&(0===n.indexOf("/")&&f.lastIndexOf("/")===f.length-1?f=f.slice(0,-1):0!==n.indexOf("/")&&f.lastIndexOf("/")!==f.length-1&&(f+="/"),e=f+n),a.$set(c,e),void(document.documentMode&&l&&i.prop(c,a[c]))):void(s&&a.$set(c,null))})}},n};n.decorator("ngSrcDirective",["$delegate",function(n){return o(n,"src","ngSrc")}]),n.decorator("ngHrefDirective",["$delegate",function(n){return o(n,"href","ngHref")}])}]).config(["$locationProvider",function(n){n.html5Mode(!0)}]).run(["$rootScope",function(n){var e=n.$on("$stateChangeSuccess",function(){var n=function(n,e,t){var r;return r=new CustomEvent(n,{bubbles:e,cancelable:t})};document.dispatchEvent(n("appready",!0,!1)),e()})}]),ba.lang.namespace("ba.lang"),ba.lang.Environment=function(){var n,e=function(e,t){if(!n){if(!window.environment)return t;n=window.environment,window.environment=null}return n[e]||t};return{get:function(n,t){return e(n,t)}}}(),ba.lang.Lib.constant("Environment",ba.lang.Environment),ba.lang.namespace("ba.lang"),ba.lang.SpecialUrls=function(){var n=["http://","https://","/cms/global","/assets/images/mediahub","/assets/images/destinations","/badp/static"],e={addUrls:function(e){e instanceof Array&&(n=n.concat(e))},getUrls:function(){return n}},t={};return e.$get=[function(){return t}],e},angular.module("special-urls",[]).provider("SpecialUrls",[ba.lang.SpecialUrls]),ba.lang.namespace("ba.lang"),ba.lang.ObjectInterceptor=function(n,e){var t=this;return this._={},this.rootName="public",this.isIE8=function(){return bowser.msie&&"8.0"===bowser.version},this.isIE8()&&(e[this.rootName]=n),this.createConfig=function(n){return{set:function(e){t._[n]=e},get:function(){return t._[n]}}},this.watches={},this.configureProperty=function(r,o,i){var a,c,u,s,l;t.isIE8()?("undefined"!=typeof o.get&&(n[r]=o.get.apply(t,[])),"undefined"!=typeof o.set&&(a=t.rootName+"."+r,c=t.watches[a],c&&c(),u=e.$watch(a,function(n,e){o.set.apply(t,[n,e])}),t.watches[a]=u)):(i&&(o.set&&(s=o.set,o.set=function(n){return s.apply(t,[n])}),o.get&&(l=o.get,o.get=function(){return l.apply(t,[])})),Object.defineProperty(n,r,o))},{configure:function(n,e){return t.configureProperty(n,e,!0),this},auto:function(e){var r;"undefined"!=typeof e&&(t._=e);for(r in n)n.hasOwnProperty(r)&&(t._[r]=n[r],t.configureProperty(r,t.createConfig(r),!1));return this}}},ba.lang.ObjectInterceptor.intercept=function(n,e){var t=e.$new(!0);return new ba.lang.ObjectInterceptor(n,t)},ba.lang.ObjectInterceptorService=function(n){return{intercept:function(e){return ba.lang.ObjectInterceptor.intercept(e,n)}}},ba.lang.Lib.service("ObjectInterceptorService",["$rootScope",ba.lang.ObjectInterceptorService]);
ba.lang.namespace("ba.moment"),ba.moment.Lib=angular.module("ba-moment",[]),ba.lang.namespace("ba.moment"),ba.moment.Moment=function(m){return m.moment},ba.moment.Lib.factory("Moment",["$window",ba.moment.Moment]);
ba.lang.namespace("ba.clickandtouchoff"),ba.clickandtouchoff.Module=angular.module("click-and-touch-off",[]),ba.lang.namespace("ba.clickandtouchoff"),ba.clickandtouchoff.ClickAndTouchOff=function(c,n,o,t){var e=0,u={},f=function(c,n){var o,t,e,u=n.length;if(!c||!n)return!1;for(e=0;u>e;e+=1){o=n[e],t=!1;try{t=o.contains(c)}catch(f){"undefined"!=typeof o.compareDocumentPosition&&(t=o===c||Boolean(16&o.compareDocumentPosition(c)))}if(t)return!0}return!1},l=function(n){var o=n.target||n.srcElement;angular.forEach(u,function(t){t.elm.contains(o)||f(o,t.clickAndTouchOffFilter)||c.$evalAsync(function(){t.cb(t.scope,{$event:n})})})};return{restrict:"A",compile:function(f,a){var i=n(a.clickAndTouchOffCallback);return function(f,r){var d,h,m=e+=1,k=!1,s=function(){t(function(){angular.element(o).on("touchstart touchmove",function(c){k="touchmove"===c.type?!0:!1}),angular.element(o).on("click touchend",function(c){k||l(c)}),u[m]={elm:r[0],cb:i,scope:f,clickAndTouchOffFilter:h}},100)},v=function(){angular.element(o).off("touchstart touchmove",function(c){k="touchmove"===c.type?!0:!1}),angular.element(o).off("click touchend",function(c){k||l(c)}),delete u[m]};h=document.querySelectorAll(f.$eval(a.clickAndTouchOffFilter)),a.$observe("clickAndTouchOffFilter",function(c){h=document.querySelectorAll(f.$eval(c))}),a.clickAndTouchOffIf?d=c.$watch(function(){return n(a.clickAndTouchOffIf)(f)},function(c){c?s():v()}):s(),f.$on("$destroy",function(){v(),d&&d()})}}}},ba.clickandtouchoff.Module.directive("clickAndTouchOff",["$rootScope","$parse","$document","$timeout",ba.clickandtouchoff.ClickAndTouchOff]);
ba.lang.namespace("ba.cookie"),ba.cookie.Lib=angular.module("ba-cookie",["ipCookie","ba-moment","ba-lang"]),ba.lang.namespace("ba.cookie"),ba.cookie.Lib.constant("BACookieConstants",{COOKIE_ACCESS_TOKEN:"token",COOKIE_REFRESH_TOKEN:"refreshtoken",COOKIE_PUBLIC_ACCESS_TOKEN:"publicAccessToken",COOKIE_PUBLIC_REFRESH_TOKEN:"publicRefreshToken",COOKIE_ALLOW:"Allow_BA_Cookies",COOKIE_ACCEPTED:"accepted",COOKIE_CLIENT_SESSION_ID:"ba_client_sessionId",CUSTOMER_SURVEY:"survey",CUSTOMER_SURVEY_SUPPRESS:"suppress",CUSTOMER_SURVEY_OPEN:"open",COOKIE_BAAUTHKEY:"BAAUTHKEY",COOKIE_BANGAUTH:"BANGAUTH",COOKIE_LOCKED_STATUS:"LOCKED_STATUS",COOKIE_REMEMBER_ME:"BA_LOGON_PERSIST_COOKIE",COOKIE_JOURNEY_ORIGIN_COUNTRY:"FO_JOURNEY_ORIGIN_COUNTRY",COOKIE_CUG_COOKIE:"CUG_COOKIE",COOKIE_NUMERICAL_IDENTIFIER:"Numerical_Identifier",BACOM:".britishairways.com",IE:"MSIE",EDGE:"Edge",TRIDENT:"Trident"}),ba.lang.namespace("ba.cookie"),ba.cookie.Lib.service("BACookieService",["ipCookie","BACookieConstants","BADomainService",function(e,o,i){return{getBACookieConstants:function(){return o},getLanguageCode:function(){return e("BA_LANGUAGE_CHOICE_COOKIE")},setLanguageCode:function(o){this.removeCookieFromCurrentAndMainDomain("BA_LANGUAGE_CHOICE_COOKIE"),e("BA_LANGUAGE_CHOICE_COOKIE",o.toUpperCase(),{expires:525600,expirationUnit:"minutes",path:"/",domain:i.getDomain()})},getCountryOfResidence:function(){return e("BA_COUNTRY_CHOICE_COOKIE")},setCountryOfResidence:function(o){this.removeCookieFromCurrentAndMainDomain("BA_COUNTRY_CHOICE_COOKIE"),e("BA_COUNTRY_CHOICE_COOKIE",o.toUpperCase(),{expires:525600,expirationUnit:"minutes",path:"/",domain:i.getDomain()})},baCookiesAccepted:function(){return!(!e(o.COOKIE_ALLOW)||e(o.COOKIE_ALLOW)!==o.COOKIE_ACCEPTED)},setAcceptCookies:function(i){e(o.COOKIE_ALLOW,i,{expires:525600,expirationUnit:"minutes",path:"/"})},baSurveySuppressed:function(){return!(!e(o.CUSTOMER_SURVEY)||e(o.CUSTOMER_SURVEY)!==o.CUSTOMER_SURVEY_SUPPRESS&&e(o.CUSTOMER_SURVEY)!==o.CUSTOMER_SURVEY_OPEN)},setSurveyCookie:function(i,t){void 0!==t?e(o.CUSTOMER_SURVEY,i,{expires:t,expirationUnit:"minutes",path:"/"}):e(o.CUSTOMER_SURVEY,i,{path:"/"})},getvFirstTracking:function(){return e("v1st")},getLoginType:function(){return e("opLoginType")},getExecClubTier:function(){return e("opExecClubTier")},setAccessToken:function(i,t){e(o.COOKIE_ACCESS_TOKEN,i,{expires:t?t:1200,expirationUnit:"seconds",path:"/",secure:!0})},getAccessToken:function(){return e(o.COOKIE_ACCESS_TOKEN)},removeAccessToken:function(){this.removeCookieFromCurrentAndMainDomain(o.COOKIE_ACCESS_TOKEN)},setRefreshToken:function(i,t){e(o.COOKIE_REFRESH_TOKEN,i,{expires:t?t:6e3,expirationUnit:"seconds",path:"/",secure:!0})},getCugCookie:function(){return e(o.COOKIE_CUG_COOKIE)},setCugCookie:function(i,t){return e(o.COOKIE_CUG_COOKIE,i,{expires:t||6e3,expirationUnit:"seconds",path:"/",secure:!0})},removeCugCookie:function(){e.remove(o.COOKIE_CUG_COOKIE,{path:"/"})},updateCugCookieExpiryDate:function(i){this.getCugCookie()&&e(o.COOKIE_CUG_COOKIE,this.getCugCookie(),{expires:i?i:6e3,expirationUnit:"seconds",path:"/",secure:!0})},getNumericalIDCugCookie:function(){return e(o.COOKIE_NUMERICAL_IDENTIFIER)},setNumericalIDCugCookie:function(i,t){return e(o.COOKIE_NUMERICAL_IDENTIFIER,i,{expires:t||6e3,expirationUnit:"seconds",path:"/",secure:!0})},removeNumericalIDCugCookie:function(){e.remove(o.COOKIE_NUMERICAL_IDENTIFIER,{path:"/"})},updateNumericalIDCugExpiryDate:function(i){this.getCugCookie()&&e(o.COOKIE_NUMERICAL_IDENTIFIER,this.getNumericalIDCugCookie(),{expires:i?i:6e3,expirationUnit:"seconds",path:"/",secure:!0})},getRefreshToken:function(){return e(o.COOKIE_REFRESH_TOKEN)},removeRefreshToken:function(){this.removeCookieFromCurrentAndMainDomain(o.COOKIE_REFRESH_TOKEN)},setBANGAUTH:function(i,t){e(o.COOKIE_BANGAUTH,i,{expires:t?t:6e3,expirationUnit:"seconds",path:"/"})},removeBANGAUTH:function(){e.remove(o.COOKIE_BANGAUTH,{path:"/"})},removeBAAUTHKEY:function(){e.remove(o.COOKIE_BAAUTHKEY,{path:"/"})},setPublicAccessToken:function(i,t){e(o.COOKIE_PUBLIC_ACCESS_TOKEN,i,{expires:t?t:1200,expirationUnit:"seconds",path:"/",secure:!0})},getPublicAccessToken:function(){return e(o.COOKIE_PUBLIC_ACCESS_TOKEN)},setPublicRefreshToken:function(i,t){e(o.COOKIE_PUBLIC_REFRESH_TOKEN,i,{expires:t?t:6e3,expirationUnit:"seconds",path:"/",secure:!0})},getPublicRefreshToken:function(){return e(o.COOKIE_PUBLIC_REFRESH_TOKEN)},removePublicAccessToken:function(){this.removeCookieFromCurrentAndMainDomain(o.COOKIE_PUBLIC_ACCESS_TOKEN)},removePublicRefreshToken:function(){this.removeCookieFromCurrentAndMainDomain(o.COOKIE_PUBLIC_REFRESH_TOKEN)},setClientSessionId:function(i,t){e(o.COOKIE_CLIENT_SESSION_ID,i,{expires:t,path:"/",secure:!0})},getClientSessionId:function(){return e(o.COOKIE_CLIENT_SESSION_ID)},removeClientSessionId:function(){e.remove(o.COOKIE_CLIENT_SESSION_ID,{path:"/"})},setUsername:function(i){e(o.COOKIE_REMEMBER_ME,i,{encode:function(e){return e},expires:365,path:"/"})},getUsername:function(){return e(o.COOKIE_REMEMBER_ME)},removeUsername:function(){e.remove(o.COOKIE_REMEMBER_ME,{path:"/"})},setLockedStatus:function(i){e(o.COOKIE_LOCKED_STATUS,i,{path:"/"})},getLockedStatus:function(){return e(o.COOKIE_LOCKED_STATUS)},setCookie:function(o,i,t,n,r,c){e(o,i,{expires:r,expirationUnit:c,path:t,secure:n})},getCookieValue:function(o){return e(o)},removeCookie:function(o,i){e.remove(o,{path:i})},removeCookieFromCurrentAndMainDomain:function(o){e.remove(o,{path:"/"}),e.remove(o,{path:"/",domain:i.getDomain()})}}}]),ba.lang.namespace("ba.cookie"),ba.cookie.Lib.service("BADomainService",["$window","BACookieConstants",function(e,o){return{getDomain:function(){var i,t=e.navigator.userAgent,n=e.location.hostname;return(-1!==t.indexOf(o.EDGE)||-1!==t.indexOf(o.IE)||-1!==t.indexOf(o.TRIDENT))&&(i=!0),n?-1!==n.indexOf(o.BACOM)||i?-1===n.indexOf(o.BACOM)&&i?n:o.BACOM:null:o.BACOM}}}]),ba.lang.namespace("ba.cookie"),ba.cookie.SellingCookieService=function(e,o,i){this.cookieUtil=e,this.BACookieService=o,this.destCookieModel={displayValue:"",destinationCode:"",fromDate:"",toDate:"",journeyType:"",cabin:"",ticketType:""},this.populateFromDestinationCookie(),this.moment=i},ba.cookie.SellingCookieService.prototype.isNull=function(e){return""===e||null===e||"undefined"==typeof e},ba.cookie.SellingCookieService.prototype.convertToTimeStamp=function(e){"use strict";var o;return void 0!==e&&""!==e&&(o=this.moment(e,"DD-MM-YY").unix()),isNaN(o)||0===o?"":o},ba.cookie.SellingCookieService.prototype.getCurrentDateFormat=function(e){var o=1===e.getDate().toString().length?"0"+e.getDate():e.getDate(),i=1===e.getMonth().toString().length?"0"+(e.getMonth()+1):e.getMonth()+1;return""+e.getFullYear()+"-"+i+"-"+o},ba.cookie.SellingCookieService.prototype.convertToDate=function(e){return this.isNull(e)||isNaN(e)?"":this.getCurrentDateFormat(new Date(1e3*e))},ba.cookie.SellingCookieService.prototype.populateFromDestinationCookie=function(){var e,o=this.cookieUtil("FO_DESTINATION_COOKIE");this.isNull(o)||(e=o.split("|"),6===e.length&&(this.destCookieModel.displayValue=e[0],this.destCookieModel.destinationCode=this.isNull(e[0])?"":this.extractDestinationCode(e[0]),this.destCookieModel.fromDate=this.convertToDate(e[1]),this.destCookieModel.toDate=this.convertToDate(e[2]),this.destCookieModel.journeyType=e[3],this.destCookieModel.cabin=e[4],this.destCookieModel.ticketType=e[5]))},ba.cookie.SellingCookieService.prototype.extractDestinationCode=function(e){var o=/\(([A-Z]{3})\),/,i=e.match(o);return this.isNull(i)?"":i[1]},ba.cookie.SellingCookieService.prototype.getDestinationCode=function(){return this.destCookieModel.destinationCode},ba.cookie.SellingCookieService.prototype.getDepartCountryCode=function(){return this.isNull(this.cookieUtil("FS_DEPT_COUNTRY"))?this.BACookieService.getCountryOfResidence():this.cookieUtil("FS_DEPT_COUNTRY")},ba.cookie.SellingCookieService.prototype.setDepartCountryCode=function(e){this.cookieUtil("FS_DEPT_COUNTRY",e,{expires:525600,expirationUnit:"minutes",path:"/"})},ba.cookie.SellingCookieService.prototype.getDepartAirportCode=function(){return this.isNull(this.cookieUtil("FS_DEPT_AIRPORT"))?"":this.cookieUtil("FS_DEPT_AIRPORT")},ba.cookie.SellingCookieService.prototype.setDepartAirportCode=function(e){this.cookieUtil("FS_DEPT_AIRPORT",e,{expires:525600,expirationUnit:"minutes",path:"/"})},ba.cookie.SellingCookieService.prototype.setJourneyOriginCountry=function(e){var o=this.BACookieService.getBACookieConstants().COOKIE_JOURNEY_ORIGIN_COUNTRY;this.cookieUtil(o,e,{expires:525600,expirationUnit:"minutes",path:"/"})},ba.cookie.SellingCookieService.prototype.getJourneyOriginCountry=function(){var e=this.BACookieService.getBACookieConstants().COOKIE_JOURNEY_ORIGIN_COUNTRY,o=this.cookieUtil(e);return this.isNull(o)?"":o||""},ba.cookie.SellingCookieService.prototype.getDepDate=function(){return this.moment(this.cookieUtil("depDate"),"DD/MM/YY").isValid()&&this.moment(this.cookieUtil("depDate"),"DD/MM/YY").isSameOrAfter(this.moment(this.moment().format("DD/MM/YY"),"DD/MM/YY"))&&(!this.cookieUtil("retDate")||this.moment(this.cookieUtil("depDate"),"DD/MM/YY").isSameOrBefore(this.moment(this.cookieUtil("retDate"),"DD/MM/YY")))?this.cookieUtil("depDate"):(this.setDepDate(""),void this.setRetDate(""))},ba.cookie.SellingCookieService.prototype.setDepDate=function(e){this.cookieUtil("depDate",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getRetDate=function(){return this.moment(this.cookieUtil("retDate"),"DD/MM/YY").isValid()&&this.moment(this.cookieUtil("retDate"),"DD/MM/YY").isSameOrAfter(this.moment(this.moment().format("DD/MM/YY"),"DD/MM/YY"))&&(!this.cookieUtil("depDate")||this.moment(this.cookieUtil("retDate"),"DD/MM/YY").isSameOrAfter(this.moment(this.cookieUtil("depDate"),"DD/MM/YY")))?this.cookieUtil("retDate"):void this.setDepDate("")},ba.cookie.SellingCookieService.prototype.setRetDate=function(e){this.cookieUtil("retDate",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getCheckInGO=function(){return this.cookieUtil("checkInGO")},ba.cookie.SellingCookieService.prototype.setCheckInGO=function(e){this.cookieUtil("checkInGO",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getCheckOutGO=function(){return this.cookieUtil("checkOutGO")},ba.cookie.SellingCookieService.prototype.setCheckOutGO=function(e){this.cookieUtil("checkOutGO",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getPickUpGO=function(){return this.cookieUtil("pickUpGO")},ba.cookie.SellingCookieService.prototype.setPickUpGO=function(e){this.cookieUtil("pickUpGO",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getDropOffGO=function(){return this.cookieUtil("dropOffGO")},ba.cookie.SellingCookieService.prototype.setDropOffGO=function(e){this.cookieUtil("dropOffGO",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getNumberOfNights=function(){return this.cookieUtil("numberOfNights")},ba.cookie.SellingCookieService.prototype.setNumberOfNights=function(e){this.cookieUtil("numberOfNights",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getNoOfAdult=function(){return this.cookieUtil("numAdultss")},ba.cookie.SellingCookieService.prototype.setNoOfAdult=function(e){this.cookieUtil("numAdultss",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getNoOfChildren=function(){return this.cookieUtil("numChilds")},ba.cookie.SellingCookieService.prototype.setNoOfChildren=function(e){this.cookieUtil("numChilds",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getNoOfInfant=function(){return this.cookieUtil("numInfants")},ba.cookie.SellingCookieService.prototype.setNoOfInfant=function(e){this.cookieUtil("numInfants",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getTicketType=function(){return this.destCookieModel.ticketType},ba.cookie.SellingCookieService.prototype.setTicketType=function(e){this.destCookieModel.ticketType=e,this.updateDestinationCookie()},ba.cookie.SellingCookieService.prototype.getCabin=function(){return this.destCookieModel.cabin},ba.cookie.SellingCookieService.prototype.setCabin=function(e){this.destCookieModel.cabin=e,this.updateDestinationCookie()},ba.cookie.SellingCookieService.prototype.getJourneyType=function(){return this.destCookieModel.journeyType},ba.cookie.SellingCookieService.prototype.setJourneyType=function(e){this.destCookieModel.journeyType=e,this.updateDestinationCookie()},ba.cookie.SellingCookieService.prototype.getFromDate=function(){return this.destCookieModel.fromDate},ba.cookie.SellingCookieService.prototype.setFromDate=function(e){this.destCookieModel.fromDate=e,this.updateDestinationCookie()},ba.cookie.SellingCookieService.prototype.getToDate=function(){return this.destCookieModel.toDate},ba.cookie.SellingCookieService.prototype.setToDate=function(e){this.destCookieModel.toDate=e,this.updateDestinationCookie()},ba.cookie.SellingCookieService.prototype.getDisplayValue=function(){return this.destCookieModel.displayValue},ba.cookie.SellingCookieService.prototype.setDisplayValue=function(e){this.destCookieModel.displayValue=e,this.updateDestinationCookie()},ba.cookie.SellingCookieService.prototype.setDestinationCode=function(e){this.destCookieModel.destinationCode=e},ba.cookie.SellingCookieService.prototype.updateDestinationCookie=function(){var e="|"+this.convertToTimeStamp(this.getFromDate())+"|"+this.convertToTimeStamp(this.getToDate())+"|"+this.getJourneyType()+"|"+this.getCabin()+"|"+this.getTicketType();this.cookieUtil("FO_DESTINATION_COOKIE",this.getDisplayValue().concat(e),{expires:20160,expirationUnit:"minutes",path:"/"})},ba.cookie.SellingCookieService.prototype.getShoppingBasketUrl=function(){return this.isNull(this.cookieUtil("BA_BASKET_URL"))?null:this.cookieUtil("BA_BASKET_URL")},ba.cookie.SellingCookieService.prototype.setShoppingBasketUrl=function(e){this.cookieUtil("BA_BASKET_URL",e,{path:"/",secure:!0})},ba.cookie.SellingCookieService.prototype.setDeviceFingerprint=function(e){this.cookieUtil("BA_DEVICE_FINGERPRINT",e,{secure:!1,expires:2,expirationUnit:"hours"})},ba.cookie.SellingCookieService.prototype.getDeviceFingerprint=function(){return this.cookieUtil("BA_DEVICE_FINGERPRINT")},ba.cookie.SellingCookieService.prototype.removeShoppingBasketUrl=function(){this.cookieUtil.remove("BA_BASKET_URL",{path:"/"})},ba.cookie.SellingCookieService.prototype.getPMD=function(){return this.cookieUtil("BA_PAYMENT_PMD")},ba.cookie.SellingCookieService.prototype.setPMD=function(e){this.cookieUtil("BA_PAYMENT_PMD",e,{expires:2,expirationUnit:"hours"})},ba.cookie.SellingCookieService.prototype.getPaymentReload=function(){return this.cookieUtil("BA_PAYMENT_RELOAD")},ba.cookie.SellingCookieService.prototype.setPaymentReload=function(e){this.cookieUtil("BA_PAYMENT_RELOAD",e,{expires:2,expirationUnit:"hours"})},ba.cookie.SellingCookieService.prototype.setHaul=function(e){this.cookieUtil("HAUL_TYPE",e,{path:"/"})},ba.cookie.SellingCookieService.prototype.getHaul=function(){return this.cookieUtil("HAUL_TYPE")},ba.cookie.Lib.service("SellingCookieService",["ipCookie","BACookieService","Moment",ba.cookie.SellingCookieService]);
ba.lang.namespace("ba.session"),ba.session.App=angular.module("ba-session",["uuid4","ba-cookie"]),ba.lang.namespace("ba.session"),ba.session.App.constant("DeviceFingerprintConstants",{APP_PREFIX:"BASFD",COLLECTOR_URL:"https://www.cdn-net.com",CCJS_SCRIPT:"/cc.js",SID:"e353fa561fb092a0",OverrideConfig:"990195",TYPE_TEXT_JAVASCRIPT:"text/javascript"}),ba.lang.namespace("ba.session"),ba.session.App.constant("SessionConstants",{SESSION_COOKIE_LIFE_DAYS:365}),ba.lang.namespace("ba.session"),ba.session.App.DeviceFingerprintProvider=function(e){var n,s=function(){return n||(n=e.APP_PREFIX+"-"+(new Date).getTime()),n},i=function(n){e.APP_PREFIX=n},t=function(e){n=e};this.setupDeviceFingerprint=function(n,a,o){var r,c;a&&i(a),o&&t(o),n.push(["cf",e.OverrideConfig]),n.push(["ci",{sid:e.SID,tid:s()}]),n.push(["run",e.COLLECTOR_URL]),r=document.createElement("script"),r.type=e.TYPE_TEXT_JAVASCRIPT,r.async=!0,r.src=e.COLLECTOR_URL+e.CCJS_SCRIPT,c=document.getElementsByTagName("script")[0],c.parentNode.insertBefore(r,c)},this.$get=function(){return{getUniqueId:s}}},ba.session.App.provider("DeviceFingerprint",["DeviceFingerprintConstants",ba.session.App.DeviceFingerprintProvider]),ba.lang.namespace("ba.session"),ba.session.App.service("BASessionIDService",["uuid4","BACookieService","SessionConstants",function(e,n,s){"use strict";var i=function(){var i=e.generate();return n.setClientSessionId(i,s.SESSION_COOKIE_LIFE_DAYS),i};return{getSessionID:function(){return n.getClientSessionId()||i()}}}]),ba.session.App.run(["BASessionIDService","$http",function(e,n){"use strict";n.defaults.headers.common.ba_client_sessionId=e.getSessionID()}]);
ba.lang.namespace("ba.logging"),ba.logging.Module=angular.module("ba-logging",["ba-session","ba-lang"]),ba.lang.namespace("ba.logging"),ba.logging.LogProvider=function(){var e=this,n=1200;return this.extendObj=function(e,n){return Object.keys(n).forEach(function(o){e[o]=n[o]}),e},this.masks=[{pattern:"\\b(3[47]\\d{2}([ -]?)(?!(\\d)\\3{5}|123456|234567|345678)\\d{6}\\2(?!(\\d)\\4{4})\\d{5}|((4\\d|5[1-5]|65)\\d{2}|6011)([ -]?)(?!(\\d)\\8{3}|1234|3456|5678)\\d{4}\\7(?!(\\d)\\9{3})\\d{4}\\7\\d{4})\\b",replacement:"xxxx xxxx xxxx xxxx"},{pattern:'"csc":[0-9]{1,4}',replacement:'"csc":"xxx"'},{pattern:'.\\"\\bcsc\\b.\\":\\d{1,4},',replacement:'\\"csc\\":\\"xxx\\",'},{pattern:'\\&password=.*?(\\")',replacement:'&password=*****"'},{pattern:"\\&password=.*?(\\&)",replacement:"&password=*****&"}],this.replaceValues=function(n){var o,t;for(o=0,t=e.masks.length;t>o;++o)n=n.replace(new RegExp(e.masks[o].pattern),e.masks[o].replacement);return n},this.mask=function(n){var o=n?n:"";return"string"==typeof o?o=e.replaceValues(o):(o=angular.toJson(o),o=e.replaceValues(o),o=angular.fromJson(o)),o},this.config={},e.applicationName="",{addMask:function(n,o){e.masks.push({pattern:n,replacement:o})},configure:function(n,o,t,a,r,i){e.config.url=o,e.config.level=t||5e3,e.config.batchSize=a||5,e.applicationName=n||"[!!APPLICATION NAME NOT SET!!]",e.maxErrorMessages=r||200,e.pageGeneralValues=i||!1},$get:["BASessionIDService","JL","$window","LogNotificationService",function(o,t,a,r){var i,g,c,s,l,u=t(e.applicationName),p=t.createAjaxAppender("appender");return t.requestId=o.getSessionID(),l=/localhost/.test(a.location.hostname)||/capdev/.test(a.location.hostname),e.applicationName?(s=function(e,t){t&&t.lg&&Array.isArray(t.lg)&&t.lg.forEach(function(e){e&&e.m&&(l&&r.showNotification(e.m,"Sending data to Logcatcher"),e.m=e.m.substring(0,n))}),e.setRequestHeader("ba_client_sessionId",o.getSessionID()),e.timeout=1e4,e.ontimeout=function(){console.log("Cannot log to server. Timed out after "+e.timeout)}},p.setOptions(e.config),p.setOptions({beforeSend:s})):(!a.it&&!a.describe||a.enableConsoleAppenderOverride)&&(p=t.createConsoleAppender("consoleAppender")),u.setOptions({appenders:[p]}),i={},i.addPageGeneralValues=function(n){e.pageGeneralValues=e.extendObj(e.pageGeneralValues,n)},g=["info","warn","error","fatalException"],c=function(n){i[n]=function(){var o=Array.prototype.slice.call(arguments);"[!!APPLICATION NAME NOT SET!!]"===e.applicationName&&u.warn("Logging not configured properly. See the BALoggingFramework page on the WEBTWO Wiki for more information");try{o[0]=e.mask(o[0]),e.pageGeneralValues&&"object"==typeof e.pageGeneralValues&&0!==e.pageGeneralValues.length&&(o[0]&&"string"==typeof o[0]&&(o[0]={code:o[0],filename:"null",level:"null",message:"null",authenticated:"null",locale:"null"}),o[0]&&"object"==typeof o[0]&&(o[0]=e.extendObj(o[0],e.pageGeneralValues))),"info"===n?u[n].apply(u,o):e.maxErrorMessages>0&&(u[n].apply(u,o),e.maxErrorMessages--)}catch(t){console.log("There has been an error logging to the server with the following arguments: ",o),console.log("The exception was: ",t)}}},angular.forEach(g,c),i}]}},ba.logging.Module.value("JL",JL),ba.logging.Module.provider("BALog",ba.logging.LogProvider),ba.lang.namespace("ba.logging"),ba.logging.ExceptionHandler=function(e,n){return function(o,t){var a=n.location.href.replace(/^.*\/\/[^\/]+/,""),r="Route: "+a+"\n";e.fatalException(r+t,o)}},ba.logging.Module.factory("$exceptionHandler",["BALog","$window",ba.logging.ExceptionHandler]),ba.lang.namespace("ba.logging"),ba.logging.LogToServerInterceptorConfiguration=function(){var e={longRequestWarningTimeout:5e3};return{setLongRequestWarningTimeout:function(n){e.longRequestWarningTimeout=n},$get:function(){return e}}},ba.logging.LogToServerInterceptor=function(e,n,o){var t=function(e){var n,o;return e.config?!e.config.url||-1===e.config.url.indexOf("webdata")&&-1===e.config.url.indexOf("logcatcher")?(n=e.config.bypassLoggingInterceptorOnStatus,o=e.config.bypassLoggingInterceptorFn,o&&"function"==typeof o?o(e):n?-1!==n.indexOf(e.status):void 0):!0:!1};return{request:function(e){return e.requestStartTime=(new Date).getTime(),e},response:function(e){var t,a=(new Date).getTime();return e.config&&(t=a-e.config.requestStartTime,t>=(e.config.longRequestWarningTimeout||o.longRequestWarningTimeout)&&n.warn({timeTakenInMs:t,config:e.config,data:e.data})),e},responseError:function(o){return t(o)||n.fatalException({data:o.data,status:o.status,config:o.config}),e.reject(o)}}},ba.logging.Module.provider("LogToServerInterceptorConfiguration",ba.logging.LogToServerInterceptorConfiguration),ba.logging.Module.factory("LogToServerInterceptor",["$q","BALog","LogToServerInterceptorConfiguration",ba.logging.LogToServerInterceptor]),ba.logging.Module.config(["$httpProvider",function(e){e.interceptors.push("LogToServerInterceptor")}]),ba.lang.namespace("ba.logging"),ba.logging.LogNotificationService=function(e){return{showNotification:function(n,o){var t=e.Notification;t&&(o=o||"Notification","granted"===t.permission?new t(o,{body:n}):"denied"!==t.permission&&t.requestPermission(function(e){"granted"===e&&new t(o,{body:n})}))}}},ba.logging.Module.service("LogNotificationService",["$window",ba.logging.LogNotificationService]);
ba.lang.namespace("ba.batitle"),ba.batitle.Lib=angular.module("ba-title",[]).run(["$rootScope","PageTitle",function(t,e){var n=t;n.$on("$stateChangeSuccess",function(){e.setTitleFromState()})}]),ba.lang.namespace("ba.batitle.Lib"),ba.batitle.Lib.PageTitle=function(){var t="British Airways - *",e=function(t){return angular.isFunction(t)?t():t},n=function(t){return!(t.parent&&t.parent.name)},a=function(t,i){return i||n(t)?e(i):a(t.parent)};return{setDefaultTitle:function(e){t=e},$get:["$timeout","$window","$state",function(n,i,r){var o=function(t){n(function(){i.document.title=t})};return{setTitleFromState:function(){o(this.getTitleFromState())},getDataFromState:function(n){var i,o=r.$current,u=e(n(o));return i=u?u:"undefined"!=typeof a(o,n(o))?a(o,n(o)):t},getKeyFromState:function(t){return this.getDataFromState(function(e){return e.locals.globals[t]})},getTitleFromState:function(){return this.getKeyFromState("$title")},getPageIdFromState:function(){return this.getKeyFromState("$pageId")}}}]}},ba.batitle.Lib.provider("PageTitle",[ba.batitle.Lib.PageTitle]);
ba.lang.namespace("ba.trapfocus"),ba.trapfocus.Lib=angular.module("ba-trap-focus",["ba-lang"]),ba.lang.namespace("ba.trapfocus"),ba.trapfocus.TrapFocus=function(e,l){return{restrict:"A",scope:{focusFirstElement:"=",firstElement:"@",lastElement:"@",overrideAutoFocus:"@?"},link:function(t,s){var a=function(l,s){s.replacingElem&&(t.lastFocusableElem=e[0].querySelector(s.replacingElem))},o=function(){l(function(){t.firstFocusableElem&&t.firstFocusableElem.focus()},0)},n=function(){var l=!1;t.focusableElementTypes=s[0].querySelectorAll('a[href]:not(.ng-hide), input:not([disabled]):not(.ng-hide), select:not([disabled]):not(.ng-hide), textarea:not([disabled]):not(.ng-hide), [tabindex="0"]:not(.ng-hide), button:not(.disable):not([disabled]):not(.ng-hide)'),t.allFocusableElems=Array.prototype.slice.call(t.focusableElementTypes),t.firstFocusableElem=t.allFocusableElems[0],t.lastFocusableElem=t.allFocusableElems[t.allFocusableElems.length-1],t.firstElement&&(t.firstFocusableElem=e[0].querySelector(t.firstElement)),t.oldFirstElement&&t.firstFocusableElem!==t.oldFirstElement&&(l=!0),t.lastElement&&(t.lastFocusableElem=e[0].querySelector(t.lastElement),"disabled"===t.lastFocusableElem.getAttribute("disabled")&&a(null,{replacingElem:"#sb-flight-travel-class"})),t.oldFirstElement=t.allFocusableElems[0],!t.allFocusableElems.includes(e[0].activeElement)&&l&&o()},c=function(l,s){s&&e[0].activeElement===t.firstFocusableElem?(l.preventDefault(),t.lastFocusableElem&&t.lastFocusableElem.focus()):s||e[0].activeElement!==t.lastFocusableElem||(l.preventDefault(),t.firstFocusableElem&&t.firstFocusableElem.focus())};l(function(){n(),t.firstFocusableElem&&!t.overrideAutoFocus&&t.firstFocusableElem.focus(),s.on("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&c(e,e.shiftKey)}),s.on("click",function(){t.firstFocusableElem===t.lastFocusableElem&&o()}),t.$on("updateFocusableElements",n),t.$on("focusFirstFocusableElement",o),t.$on("updateLastElement",a)},0),t.$watch("focusFirstElement",function(e){e&&o()})}}},ba.trapfocus.Lib.directive("trapFocus",["$document","$timeout",ba.trapfocus.TrapFocus]);
ba.lang.namespace("ba.solr"),ba.solr.Module=angular.module("ba-solr",["ba-logging","ba-moment"]),ba.lang.namespace("ba.selling.entrypoints"),ba.solr.Constants={CITY:"city",AIRPORT:"airport",FO_SOLR_URL:"/solr/lpbd/select",FO_ARRIVAL_CITY:"arrival_city",FO_ARRIVAL_AIRPORT:"arrival_airport",FO_DEPARTURE_CITY:"departure_city",FO_DEPARTURE_AIRPORT:"departure_airport",FO_OUTBOUND_DATE:"outbound_date",FO_CABIN:"cabin",FO_SORT_PARAM:"rounded_lowest_price",FO_TRIP_TYPE:"trip_type",FO_NUMBER_OF_NIGHTS:"number_of_nights",FH_SOLR_URL:"/solr/hotelPackages/select",FH_DEPARTURE_CITY:"departureCityCode",FH_DEPARTURE_AIRPORT:"depAirportCode_1_O",FH_HOTEL_LOCATION_ID:"hotelLocationId",FH_DESTINATION:"destAirportCode",FH_DEPT_DATE_1_O:"flightDepDate_1_O",FH_CheckOut_Date:"checkOutDate",FH_PRICE:"pricePP",FH_MARKET_CODE:"marketCode",FC_SOLR_URL:"/solr/carPackages/select",FC_DEPARTURE_CITY:"departureAirport",FC_DEPARTURE_AIRPORT:"depAirportCode_1_O",FC_DESTINATION:"arrivalAirport",FC_DEPARTURE_DATE:"departureDate",FC_DURATION:"packageDuration",FC_PRICE:"pricePP",FC_MARKET_CODE:"market",HO_SOLR_URL:"/solr/mmbHotels/select",HO_HOTEL_LOCATION_ID:"hotelLocationId",HO_CHECKIN_DATE:"hotelCheckInDate",HO_CHECKOUT_DATE:"hotelCheckOutDate",HO_DURATION:"numberOfNights",HO_PRICE:"pricePerPersonPerNight",HO_MARKET_CODE:"market",CO_SOLR_URL:"/solr/cars/select",CO_DESTINATION:"destinationAirportCode",CO_PICKUP_DATE:"pickUpDate",CO_DROPOFF_DATE:"dropOffDate",CO_DURATION:"carDuration",CO_PRICE:"dailyPrice",CO_MARKET_CODE:"market",DATE_FORMAT_YYYYMMDD:"YYYY-MM-DD",ONE_WAY_TRIP_TYPE:"OW",RETURN_TRIP_TYPE:"RT",DEFAULT_CABIN_CODE:"M",DEFAULT_TIMEOUT:5e3,GROUND_ONLY_MARKETCODE:"GB",LOG_INVALID_DATE_PARAMETER:"NG_SOLR_00001",LOG_FO_ORIGIN_TYPE_VALIDATION_ERROR:"NG_SOLR_00002",LOG_FO_ORIGIN_CITY_CODE_VALIDATION_ERROR:"NG_SOLR_00003",LOG_FO_ORIGIN_AIRPORT_CODE_VALIDATION_ERROR:"NG_SOLR_00004",LOG_FO_DESTINATION_TYPE_VALIDATION_ERROR:"NG_SOLR_00005",LOG_FO_DESTINATION_CITY_CODE_VALIDATION_ERROR:"NG_SOLR_00006",LOG_FO_DESTINATION_AIRPORT_CODE_VALIDATION_ERROR:"NG_SOLR_00007",LOG_FO_DEPART_DATE_VALIDATION_ERROR:"NG_SOLR_00008",LOG_FO_RESPONSE_ERROR:"NG_SOLR_10001",LOG_FH_RESPONSE_ERROR:"NG_SOLR_10002",LOG_FC_RESPONSE_ERROR:"NG_SOLR_10003",LOG_HO_RESPONSE_ERROR:"NG_SOLR_10004",LOG_CO_RESPONSE_ERROR:"NG_SOLR_10005",DEPARTURE_CITY:{CODES:[{cityCode:"CUN",AirportName:"Cancun International"},{cityCode:"LON",AirportName:"London (All Airports)"},{cityCode:"MEX",AirportName:"Mexico City"},{cityCode:"MIL",AirportName:"Milan (All Airports)"},{cityCode:"NYC",AirportName:"New York (All Airports)"},{cityCode:"PAR",AirportName:"Paris (All)"},{cityCode:"STO",AirportName:"Stockholm (All)"},{cityCode:"TCI",AirportName:"Tenerife (All Airports)"},{cityCode:"TYO",AirportName:"Tokyo (All)"},{cityCode:"WAS",AirportName:"Washington (All Airports)"}]}},ba.solr.Module.constant("SolrConstants",ba.solr.Constants),ba.lang.namespace("ba.solr"),ba.solr.Utility=function(t,s,o,r){this.constants=t,this.moment=s,this.log=o,this.$q=r},ba.solr.Utility.prototype.createQueryWithExactDateRange=function(t,s,o,r,e){var i,a,n;return this.moment.isMoment(s)?(i=this.moment.isMoment(o)?o:s.clone().add("undefined"!=typeof e?e:1,"days"),n=0===i.diff(s,"days")&&"packageDuration"===r?1:i.diff(s,"days"),a="("+t+":["+s.format(this.constants.DATE_FORMAT_YYYYMMDD)+"T00:00:00Z TO "+s.format(this.constants.DATE_FORMAT_YYYYMMDD)+"T23:59:59Z] AND "+r+":"+n+")"):(this.log.error(this.constants.LOG_INVALID_DATE_PARAMETER),"")},ba.solr.Utility.prototype.createQueryWithinDateRange=function(t,s,o,r,e,i,a){var n,_,c,O;return this.moment.isMoment(t)?(this.moment.isMoment(s)?(c=s.diff(t,"days"),c=0===c&&a?c:0===c?1:c,O=1>=c?c:"[1 TO "+c+"]",_=":["+t.format(this.constants.DATE_FORMAT_YYYYMMDD)+"T00:00:00Z TO "+s.format(this.constants.DATE_FORMAT_YYYYMMDD)+"T23:59:59Z]",n="("+o+_+" AND "+e+":"+O+")&fq="+r+_):n=this.createQueryWithExactDateRange(o,t,s,e,i),n):(this.log.error(this.constants.LOG_INVALID_DATE_PARAMETER),"")},ba.solr.Utility.prototype.createDateRangeQueryWithoutDuration=function(t,s){var o;return this.moment.isMoment(t)?o=s+":["+t.format(this.constants.DATE_FORMAT_YYYYMMDD)+"T00:00:00Z TO "+t.format(this.constants.DATE_FORMAT_YYYYMMDD)+"T23:59:59Z]":(this.log.error(this.constants.LOG_INVALID_DATE_PARAMETER),"")},ba.solr.Utility.prototype.validateCityCodes=function(t,s){var o,r=this.constants.DEPARTURE_CITY.CODES,e=r.length;for(o=0;e>o;o+=1)if(s===r[o].cityCode)return this.constants.CITY;return t},ba.solr.Utility.prototype.createParam=function(t,s,o,r,e){var i="";return o=this.validateCityCodes(o,s),o===this.constants.CITY?i=r+":"+t:o===this.constants.AIRPORT&&(i=e+":"+s),i},ba.solr.Utility.prototype.rejectAndLogValidationError=function(t){return this.log.error(t),this.$q.reject(t)},ba.solr.Module.service("Utility",["SolrConstants","Moment","BALog","$q",ba.solr.Utility]),ba.lang.namespace("ba.solr.proxies"),ba.solr.proxies.CarOnlyProxy=function(t,s,o,r,e,i){"use strict";this.$http=t,this.$q=s,this.log=o,this.constants=r,this.utility=e,this.moment=i},ba.solr.proxies.CarOnlyProxy.prototype.getLowestPricePropositionDetails=function(t,s,o){var r=this,e=this.constants.CO_SOLR_URL+"/?q=*:*&fq="+this.constants.CO_DESTINATION+":"+t+"&fq="+this.utility.createQueryWithinDateRange(s,o,this.constants.CO_PICKUP_DATE,this.constants.CO_DROPOFF_DATE,this.constants.CO_DURATION,7,!1)+"&fq="+this.constants.CO_MARKET_CODE+":"+this.constants.GROUND_ONLY_MARKETCODE+"&sort="+this.constants.CO_DURATION+" desc,"+this.constants.CO_PRICE+" asc&rows=1&wt=json",i={method:"GET",url:e,timeout:r.constants.DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]};return this.$http(i).then(function(t){return t.data.response.docs.length>0?t.data.response.docs[0]:{}})["catch"](function(t){return r.log.error(r.constants.LOG_CO_RESPONSE_ERROR+" : "+t.status),r.$q.reject(t.status)})},ba.solr.Module.service("CarOnlyProxy",["$http","$q","BALog","SolrConstants","Utility","Moment",ba.solr.proxies.CarOnlyProxy]),ba.lang.namespace("ba.solr.proxies"),ba.solr.proxies.CarPackageProxy=function(t,s,o,r,e){"use strict";this.$http=t,this.$q=s,this.log=o,this.constants=r,this.utility=e,this.getFilterQuery=function(t,s,o,r,e,i,a){var n=[];return n=n.concat(this.utility.createParam(s,o,r,this.constants.FC_DEPARTURE_CITY,this.constants.FC_DEPARTURE_AIRPORT)),n=n.concat(this.constants.FC_DESTINATION+":"+e),n=n.concat(this.utility.createQueryWithExactDateRange(this.constants.FC_DEPARTURE_DATE,i,a,this.constants.FC_DURATION)),n=n.concat(this.constants.FC_MARKET_CODE+":"+t)}},ba.solr.proxies.CarPackageProxy.prototype.getLowestPricePropositionDetails=function(t,s,o,r,e,i,a){var n=this,_={q:"*:*",fq:this.getFilterQuery(t,s,o,r,e,i,a),sort:this.constants.FC_PRICE+" asc",rows:"1",wt:"json"},c={method:"GET",url:this.constants.FC_SOLR_URL,params:_,timeout:n.constants.DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]};return this.$http(c).then(function(t){return t.data.response.docs.length>0?t.data.response.docs[0]:{}})["catch"](function(t){return n.log.error(n.constants.LOG_FC_RESPONSE_ERROR+" : "+t.status),n.$q.reject(t.status)})},ba.solr.Module.service("CarPackageProxy",["$http","$q","BALog","SolrConstants","Utility",ba.solr.proxies.CarPackageProxy]),ba.lang.namespace("ba.solr.proxies"),ba.solr.proxies.FlightOnlyProxy=function(t,s,o,r,e,i){"use strict";this.$http=t,this.$q=s,this.log=o,this.moment=r,this.constants=e,this.utility=i,this.getQuery=function(t,s,o){return this.utility.createParam(t,s,o,this.constants.FO_ARRIVAL_CITY,this.constants.FO_ARRIVAL_AIRPORT)},this.getFilterQuery=function(t,s,o,r,e){var i=[];return i=i.concat(this.utility.createParam(t,s,o,this.constants.FO_DEPARTURE_CITY,this.constants.FO_DEPARTURE_AIRPORT)),i=i.concat(this.createTripType(e)),i=i.concat(this.utility.createQueryWithExactDateRange(this.constants.FO_OUTBOUND_DATE,r,e,this.constants.FO_NUMBER_OF_NIGHTS,0)),i=i.concat(this.constants.FO_CABIN+":"+this.constants.DEFAULT_CABIN_CODE)},this.createTripType=function(t){var s=this.constants.FO_TRIP_TYPE+":";return this.moment.isMoment(t)?s+this.constants.RETURN_TRIP_TYPE:s+this.constants.ONE_WAY_TRIP_TYPE}},ba.solr.proxies.FlightOnlyProxy.prototype.getLowestPricePropositionDetails=function(t,s,o,r,e,i,a,n){var _,c,O=this;return o?o!==this.constants.CITY||t?o!==this.constants.AIRPORT||s?i?i!==this.constants.CITY||r?i!==this.constants.AIRPORT||e?this.moment.isMoment(a)?(c={q:this.getQuery(r,e,i),fq:this.getFilterQuery(t,s,o,a,n),sort:this.constants.FO_SORT_PARAM+" asc",rows:"1",wt:"json"},_={method:"GET",url:this.constants.FO_SOLR_URL,params:c,timeout:O.constants.DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]},this.$http(_).then(function(t){return t.data.response.docs.length>0?t.data.response.docs[0]:{}})["catch"](function(t){return O.log.error(O.constants.LOG_FO_RESPONSE_ERROR+" : "+t.status),O.$q.reject(t.status)})):this.utility.rejectAndLogValidationError(this.constants.LOG_FO_DEPART_DATE_VALIDATION_ERROR):this.utility.rejectAndLogValidationError(this.constants.LOG_FO_DESTINATION_AIRPORT_CODE_VALIDATION_ERROR):this.utility.rejectAndLogValidationError(this.constants.LOG_FO_DESTINATION_CITY_CODE_VALIDATION_ERROR):this.utility.rejectAndLogValidationError(this.constants.LOG_FO_DESTINATION_TYPE_VALIDATION_ERROR):this.utility.rejectAndLogValidationError(this.constants.LOG_FO_ORIGIN_AIRPORT_CODE_VALIDATION_ERROR):this.utility.rejectAndLogValidationError(this.constants.LOG_FO_ORIGIN_CITY_CODE_VALIDATION_ERROR):this.utility.rejectAndLogValidationError(this.constants.LOG_FO_ORIGIN_TYPE_VALIDATION_ERROR)},ba.solr.Module.service("FlightOnlyProxy",["$http","$q","BALog","Moment","SolrConstants","Utility",ba.solr.proxies.FlightOnlyProxy]),ba.lang.namespace("ba.solr.proxies"),ba.solr.proxies.HotelOnlyProxy=function(t,s,o,r,e,i){"use strict";this.$http=t,this.$q=s,this.log=o,this.constants=r,this.utility=e,this.moment=i},ba.solr.proxies.HotelOnlyProxy.prototype.getLowestPricePropositionDetails=function(t,s,o){var r=this,e=this.constants.HO_SOLR_URL+"/?q=*:*&fq="+this.constants.HO_HOTEL_LOCATION_ID+":"+t+"&fq="+this.utility.createQueryWithinDateRange(s,o,this.constants.HO_CHECKIN_DATE,this.constants.HO_CHECKOUT_DATE,this.constants.HO_DURATION,1,!0)+"&fq="+this.constants.HO_MARKET_CODE+":"+this.constants.GROUND_ONLY_MARKETCODE+"&sort="+this.constants.HO_PRICE+" asc&rows=1&wt=json",i={method:"GET",url:e,timeout:r.constants.DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]};return this.$http(i).then(function(t){return t.data.response.docs.length>0?t.data.response.docs[0]:{}})["catch"](function(t){return r.log.error(r.constants.LOG_HO_RESPONSE_ERROR+" : "+t.status),r.$q.reject(t.status)})},ba.solr.Module.service("HotelOnlyProxy",["$http","$q","BALog","SolrConstants","Utility","Moment",ba.solr.proxies.HotelOnlyProxy]),ba.lang.namespace("ba.solr.proxies"),ba.solr.proxies.HotelPackageProxy=function(t,s,o,r,e){"use strict";this.$http=t,this.$q=s,this.log=o,this.constants=r,this.utility=e,this.getFilterQuery=function(t,s,o,r,e,i,a){var n=[];return n=n.concat(this.utility.createParam(s,o,r,this.constants.FH_DEPARTURE_CITY,this.constants.FH_DEPARTURE_AIRPORT)),n=n.concat(this.constants.FH_HOTEL_LOCATION_ID+":"+e),n=n.concat(this.utility.createDateRangeQueryWithoutDuration(i,this.constants.FH_DEPT_DATE_1_O)),n=n.concat(this.utility.createDateRangeQueryWithoutDuration(a,this.constants.FH_CheckOut_Date)),n=n.concat(this.constants.FH_MARKET_CODE+":"+t)}},ba.solr.proxies.HotelPackageProxy.prototype.getLowestPricePropositionDetails=function(t,s,o,r,e,i,a){var n=this,_={q:"*:*",fq:this.getFilterQuery(t,s,o,r,e,i,a),sort:this.constants.FH_PRICE+" asc",rows:"1",wt:"json"},c={method:"GET",url:this.constants.FH_SOLR_URL,params:_,timeout:n.constants.DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]};return this.$http(c).then(function(t){return t.data.response.docs.length>0?t.data.response.docs[0]:{}})["catch"](function(t){return n.log.error(n.constants.LOG_FH_RESPONSE_ERROR+" : "+t.status),n.$q.reject(t.status)})},ba.solr.Module.service("HotelPackageProxy",["$http","$q","BALog","SolrConstants","Utility",ba.solr.proxies.HotelPackageProxy]),ba.lang.namespace("ba.solr.requestbuilder"),ba.solr.requestbuilder.SolrService=function(t,s,o){"use strict";this.$http=t,this.$q=s,this.log=o},ba.solr.requestbuilder.SolrService.prototype.execute=function(t,s,o,r,e,i,a,n,_,c,O){var R=this,l=this.$q.defer(),T=l.promise,h={q:s,fq:r,sort:a,rows:o,wt:n};return e&&(h.group=!0,h["group.field"]=e,h["group.main"]=i),_&&(h.facet=!0,h["facet.field"]=_,h["facet.mincount"]=1),c&&O&&(h.sfield=c,h.pt=O),t?o?(this.$http({method:"GET",url:t,params:h}).success(function(t){l.resolve(R.successCallBack(t))}).error(function(t){R.log.error({ErrorMessage:"BA_SOLR_001",Component:"SOLR Service - No data"}),l.reject(t)}),T):(this.validation("rows parameter required!",l),T):(this.validation("Url parameter required!",l),T)},ba.solr.requestbuilder.SolrService.prototype.successCallBack=function(t){return"undefined"!=typeof t.facet_counts?t.facet_counts:t.response.docs},ba.solr.requestbuilder.SolrService.prototype.validation=function(t,s){var o={message:t};s.reject(o)},ba.solr.Module.service("SolrService",["$http","$q","BALog",ba.solr.requestbuilder.SolrService]);
ba.lang.namespace("ba.date"),ba.date.Lib=angular.module("ba-date",[]),ba.lang.namespace("ba.date"),ba.date.Lib.filter("baLongDate",["$filter",function(t){return function(e){return t("date")(e,"mediumDate")}}]).filter("baLongDateWithDay",["$filter",function(t){return function(e){return t("date")(e,"EEE, ")+t("date")(e,"mediumDate")}}]),ba.lang.namespace("ba.date"),ba.date.Lib.filter("baShortDate",["$filter",function(t){return function(e){return t("date")(e,"d MMM")}}]).filter("baShortDateWithDay",["$filter",function(t){return function(e){return t("date")(e,"EEE d MMM")}}]).filter("baDateDayOnly",["$filter",function(t){return function(e){return t("date")(e,"EEE d")}}]).filter("baDateMonthAndYear",["$filter",function(t){return function(e){return t("date")(e,"MMM yyyy")}}]);
ba.lang.namespace("ba.filters.contrib"),ba.filters.contrib.Lib=angular.module("ba-filters-contrib",[]),ba.filters.contrib.Lib.filter("titlecase",function(){return function(r){var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;return r=r.toLowerCase(),r.replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(r,a,e){return a>0&&a+r.length!==e.length&&r.search(t)>-1&&":"!==e.charAt(a-2)&&("-"!==e.charAt(a+r.length)||"-"===e.charAt(a-1))&&e.charAt(a-1).search(/[^\s-]/)<0?r.toLowerCase():r.substr(1).search(/[A-Z]|\../)>-1?r:r.charAt(0).toUpperCase()+r.substr(1)})}});

ba.lang.namespace("ba.lookups"),ba.lookups.Module=angular.module("ba-lookups",["ba-logging","ba-lang"]),ba.lang.namespace("ba.lookups"),ba.lookups.LookupConstants={FLIGHT_ONLY:"FO",HOTEL_PACKAGE:"PAKFH",HOTEL_ONLY:"HO",CAR_PACKAGE:"PAKFC",CAR_ONLY:"CO",DEFAULT_LANGUAGE_CODE:"en",DEPARTURE_DESTINATION_SERVICE_DEFAULT_TIMEOUT:15e3,ERROR_IN_RESPONSE:"Error in data response",CABIN_ERROR_NO_PRODUCT:"NG_LU_00001",CABIN_ERROR_NO_ORIGIN:"NG_LU_00002",CABIN_ERROR_NO_DESTINATION:"NG_LU_00003",CABIN_ERROR_NO_LANGUAGE_CODE:"NG_LU_00004",ORIGIN_ERROR_NO_DEPT_COUNTRY:"NG_LU_00101",ORIGIN_ERROR_NO_LANGUAGE_CODE:"NG_LU_00102",DESTINATION_ERROR_NO_INPUT:"NG_LU_00201",CABIN_ERROR_IN_SERVICE_RESPONSE:"NG_LU_10001",CABIN_ERROR_FROM_SERVICE:"NG_LU_10002",ORIGIN_COUNTRY_DATA_ERROR_IN_SERVICE_RESPONSE:"NG_LU_10101",ORIGIN_COUNTRY_DATA_ERROR_FROM_SERVICE:"NG_LU_10102",ORIGIN_AIRPORT_DATA_ERROR_IN_SERVICE_RESPONSE:"NG_LU_10103",ORIGIN_AIRPORT_DATA_ERROR_FROM_SERVICE:"NG_LU_10104",DESTINATION_ERROR_IN_SERVICE_RESPONSE:"NG_LU_10201",DESTINATION_ERROR_FROM_SERVICE:"NG_LU_10202",PLM_ERROR_FROM_SERVICE:"NG_LU_10301",GLOBAL_ERROR_URL:"/travel/home/public/en_gb?betaabandon",PRODUCT_LOCATIONS_ENDPOINT:"/csdm-plm/rs/v1/productlocations",PRODUCT_BAH_LOCATIONS_ENDPOINT:"/csdm-plm/rs/v1/holidaydestinations",RELATIVE_REST_URL_PREFIX:"/api/sc4"},ba.lookups.Module.constant("LookupsConstants",ba.lookups.LookupConstants),ba.lang.namespace("ba.lookups"),ba.lookups.Utils=function(o,t){this.$q=o,this.bALog=t},ba.lookups.Utils.prototype.isNull=function(o){return""===o||null===o||"undefined"==typeof o},ba.lookups.Utils.prototype.rejectAndLogValidationError=function(o){return this.bALog.error(o),this.$q.reject(o)},ba.lookups.Module.service("LookupUtils",["$q","BALog",ba.lookups.Utils]),ba.lang.namespace("ba.lookups.cabinclass"),ba.lookups.cabinclass.CabinClassProxy=function(o,t,s,a){"use strict";this.$http=o,this.$q=t,this.bALog=s,this.lookupsConstants=a},ba.lookups.cabinclass.CabinClassProxy.prototype.getCabinList=function(o,t,s,a){var i,r=this;return i=o===r.lookupsConstants.FLIGHT_ONLY?"/lookup/jsonp/cabinHelper/getCabinsForRoute/"+t+"/"+s+"/"+a:"/lookup/jsonp/cabinHelper/getDPCabinsForRoute/"+t+"/"+s+"/"+a,r.$http({method:"GET",url:i,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}).then(function(o){return o.data.error?(r.bALog.error(r.lookupsConstants.CABIN_ERROR_IN_SERVICE_RESPONSE+" : "+o.data.error),r.$q.reject(r.lookupsConstants.ERROR_IN_RESPONSE)):o.data.reply},function(o){return r.bALog.error(r.lookupsConstants.CABIN_ERROR_FROM_SERVICE+" : "+o.status),r.$q.reject(o.status)})},ba.lookups.Module.service("CabinClassProxy",["$http","$q","BALog","LookupsConstants",ba.lookups.cabinclass.CabinClassProxy]),ba.lang.namespace("ba.lookups.cabinclass"),ba.lookups.cabinclass.CabinClassService=function(o,t,s,a,i){"use strict";this.$q=o,this.bALog=t,this.lookupsConstants=s,this.cabinClassProxy=a,this.lookupUtils=i},ba.lookups.cabinclass.CabinClassService.prototype.getCabinList=function(o,t,s,a){return this.lookupUtils.isNull(o)?this.lookupUtils.rejectAndLogValidationError(this.lookupsConstants.CABIN_ERROR_NO_PRODUCT):this.lookupUtils.isNull(t)?this.lookupUtils.rejectAndLogValidationError(this.lookupsConstants.CABIN_ERROR_NO_ORIGIN):this.lookupUtils.isNull(s)?this.lookupUtils.rejectAndLogValidationError(this.lookupsConstants.CABIN_ERROR_NO_DESTINATION):this.lookupUtils.isNull(a)?this.lookupUtils.rejectAndLogValidationError(this.lookupsConstants.CABIN_ERROR_NO_LANGUAGE_CODE):this.cabinClassProxy.getCabinList(o,t,s,a)},ba.lookups.Module.service("CabinClassService",["$q","BALog","LookupsConstants","CabinClassProxy","LookupUtils",ba.lookups.cabinclass.CabinClassService]),ba.lang.namespace("ba.lookups.departurelocation"),ba.lookups.departurelocation.OriginProxy=function(o,t,s,a){"use strict";this.$http=o,this.$q=t,this.bALog=s,this.lookupsConstants=a},ba.lookups.departurelocation.OriginProxy.prototype.departCountryData=function(o,t){"use strict";var s,a=this;return s="/lookup/jsonp/locationHelper/",s+="getDepartCountries/"+o+"/"+t,a.$http({method:"GET",url:s,timeout:a.lookupsConstants.DEPARTURE_DESTINATION_SERVICE_DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}).then(function(o){return o.data.error?(a.bALog.error(a.lookupsConstants.ORIGIN_COUNTRY_DATA_ERROR_IN_SERVICE_RESPONSE+" : "+o.data.error),a.$q.reject(a.lookupsConstants.ERROR_IN_RESPONSE)):o.data.reply},function(o){return a.bALog.error(a.lookupsConstants.ORIGIN_COUNTRY_DATA_ERROR_FROM_SERVICE+" : "+o.status),a.$q.reject(o.status)})},ba.lookups.departurelocation.OriginProxy.prototype.departAirportData=function(o,t){"use strict";var s,a=this;return s="/lookup/jsonp/locationHelper/",s+="getServicedCitiesForCountry/"+o+"/"+t,a.$http({method:"GET",url:s,timeout:a.lookupsConstants.DEPARTURE_DESTINATION_SERVICE_DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}).then(function(o){return o.data.error?(a.bALog.error(a.lookupsConstants.ORIGIN_AIRPORT_DATA_ERROR_IN_SERVICE_RESPONSE+" : "+o.data.error),a.$q.reject(a.lookupsConstants.ERROR_IN_RESPONSE)):o.data.reply},function(o){return a.bALog.error(a.lookupsConstants.ORIGIN_AIRPORT_DATA_ERROR_FROM_SERVICE+" : "+o.status),a.$q.reject(o.status)})},ba.lookups.Module.service("OriginProxy",["$http","$q","BALog","LookupsConstants",ba.lookups.departurelocation.OriginProxy]),ba.lang.namespace("ba.lookups.departurelocation"),ba.lookups.departurelocation.OriginService=function(o,t,s,a,i){"use strict";this.$q=o,this.bALog=t,this.lookupsConstants=s,this.originProxy=a,this.lookupUtils=i},ba.lookups.departurelocation.OriginService.prototype.departCountryData=function(o,t){"use strict";return this.lookupUtils.isNull(o)?this.lookupUtils.rejectAndLogValidationError(this.lookupsConstants.ORIGIN_ERROR_NO_DEPT_COUNTRY):this.originProxy.departCountryData(o,t)},ba.lookups.departurelocation.OriginService.prototype.departAirportData=function(o,t){"use strict";return this.lookupUtils.isNull(o)?this.lookupUtils.rejectAndLogValidationError(this.lookupsConstants.ORIGIN_ERROR_NO_DEPT_COUNTRY):this.lookupUtils.isNull(t)?this.lookupUtils.rejectAndLogValidationError(this.lookupsConstants.ORIGIN_ERROR_NO_LANGUAGE_CODE):this.originProxy.departAirportData(o,t)},ba.lookups.Module.service("OriginService",["$q","BALog","LookupsConstants","OriginProxy","LookupUtils",ba.lookups.departurelocation.OriginService]),ba.lang.namespace("ba.lookups.destinationlocation"),ba.lookups.destinationlocation.DestinationProxy=function(o,t,s,a){"use strict";this.$http=o,this.$q=t,this.bALog=s,this.lookupsConstants=a},ba.lookups.destinationlocation.DestinationProxy.prototype.getSuggestions=function(o){var t=this,s="/lookup/jsonp/locationHelper/getMatchedLocationsIncludingStatesAndType/"+o;return t.$http({method:"GET",url:s,timeout:this.lookupsConstants.DEPARTURE_DESTINATION_SERVICE_DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}).then(function(o){return o.data.error?(t.bALog.error(t.lookupsConstants.DESTINATION_ERROR_IN_SERVICE_RESPONSE+" : "+o.data.error),t.$q.reject(t.lookupsConstants.ERROR_IN_RESPONSE)):o.data.reply},function(o){return t.bALog.error(t.lookupsConstants.DESTINATION_ERROR_FROM_SERVICE+" : "+o.status),t.$q.reject(o.status)})},ba.lookups.Module.service("DestinationProxy",["$http","$q","BALog","LookupsConstants",ba.lookups.destinationlocation.DestinationProxy]),ba.lang.namespace("ba.lookups.destinationlocation"),ba.lookups.destinationlocation.DestinationService=function(o,t,s,a,i){"use strict";this.$q=o,this.bALog=t,this.lookupsConstants=s,this.destinationProxy=a,this.lookupUtils=i},ba.lookups.destinationlocation.DestinationService.prototype.getSuggestions=function(o){var t,s,a=/^[a-z ][^0-9]+$/i,i=/^[a-z ]*$/i;if(this.lookupUtils.isNull(o))return this.lookupUtils.rejectAndLogValidationError(this.lookupsConstants.DESTINATION_ERROR_NO_INPUT);if(o.length>12&&(o=o.substr(0,12)),t=o.length,a.test(o))for(s=t;s>=3&&(o=o.slice(0,s),!i.test(o));s-=1);return this.destinationProxy.getSuggestions(o)},ba.lookups.destinationlocation.DestinationService.prototype.getStyle=function(o){var t="";return-1!==o.locationKey.indexOf("Title")?t="titleParent":-1!==o.locationKey.indexOf("::")&&(t="titleChild "),t},ba.lookups.destinationlocation.DestinationService.prototype.buildQueryParameters=function(o){"use strict";var t,s,a,i=o.locationKey,r=o.locationType,n=o.locationValue;return i.length>"3"&&(t=i.length,s=i.lastIndexOf(":"),i=i.substring(s+1,t)),a={},a.locationKey=i,a.locationType=r,a.locationValue=n,a},ba.lookups.Module.service("DestinationService",["$q","BALog","LookupsConstants","DestinationProxy","LookupUtils",ba.lookups.destinationlocation.DestinationService]),ba.lang.namespace("ba.lookups.productlocation"),ba.lookups.productlocation.ProductLocationProxy=function(o,t,s,a,i,r){"use strict";this.$q=o,this.$http=t,this.$window=s,this.lookupsConstants=a,this.locationEndpoint=r.get("BA_API_CONTEXT",this.lookupsConstants.RELATIVE_REST_URL_PREFIX)+this.lookupsConstants.PRODUCT_LOCATIONS_ENDPOINT,this.bahDestinationsEndpoint=r.get("BA_API_CONTEXT",this.lookupsConstants.RELATIVE_REST_URL_PREFIX)+this.lookupsConstants.PRODUCT_BAH_LOCATIONS_ENDPOINT,this.bALog=i},ba.lookups.productlocation.ProductLocationProxy.prototype.getLocations=function(o,t,s,a){var i,r,n=this;return i=a?this.bahDestinationsEndpoint+";searchtext="+this.$window.encodeURIComponent(o):this.locationEndpoint+";searchText="+this.$window.encodeURIComponent(o),t&&t.length>0&&(i+=a?";productfilter="+this.$window.encodeURIComponent(t.toString()):";productSearch="+this.$window.encodeURIComponent(t.toString())),r={method:"GET",url:i,timeout:n.lookupsConstants.DEPARTURE_DESTINATION_SERVICE_DEFAULT_TIMEOUT,errorOverride:[{serverErrorCode:"*",displayType:s?"error":"disabled",resourceKeyToOverrideServerMessage:"lookups-global-message",callToActionUrl:n.lookupsConstants.GLOBAL_ERROR_URL,callToActionResourceKey:"lookups-global-link-message"}]},this.$http(r)["catch"](function(o){return n.bALog.error(n.lookupsConstants.PLM_ERROR_FROM_SERVICE+" : "+o.status),n.$q.reject(o.status)})},ba.lookups.Module.service("ProductLocationProxy",["$q","$http","$window","LookupsConstants","BALog","Environment",ba.lookups.productlocation.ProductLocationProxy]),ba.lang.namespace("ba.lookups.productlocation"),ba.lookups.productlocation.ProductLocationService=function(o,t){this.productLocationProxy=o,this.productLocationServiceTransformer=t},ba.lookups.productlocation.ProductLocationService.prototype.getLocationList=function(o,t,s,a){var i,r=this;return this.productLocationProxy.getLocations(o,t,s||!1,a).then(function(o){return i=a?r.productLocationServiceTransformer.transform(o.data,!0):r.productLocationServiceTransformer.transform(o.data.locations,!1)})},ba.lookups.Module.service("ProductLocationService",["ProductLocationProxy","ProductLocationServiceTransformer",ba.lookups.productlocation.ProductLocationService]),ba.lang.namespace("ba.lookups.productlocation"),ba.lookups.productlocation.BahLocationsTransformer=function(o){function t(t){var s=o("orderBy")(t.holidayEntry,"displayPriority"),a="";angular.forEach(s,function(o){a=a+", "+o.name}),this.locationValue=a.slice(2),this.refineTripValue=s[0].name,this.bahID=t.bahId}return t},ba.lookups.Module.factory("BahLocationsTransformer",["$filter",ba.lookups.productlocation.BahLocationsTransformer]),ba.lang.namespace("ba.lookups.productlocation"),ba.lookups.productlocation.ProductLocationServiceTransformer=function(o,t){this.TransformedProductLocation=o,this.BahLocationsTransformer=t},ba.lookups.productlocation.ProductLocationServiceTransformer.prototype.transform=function(o,t){var s=this,a=[];return angular.forEach(o,function(o){t?a.push(new s.BahLocationsTransformer(o)):a.push(new s.TransformedProductLocation(o))}),a},ba.lookups.Module.service("ProductLocationServiceTransformer",["TransformedProductLocation","BahLocationsTransformer",ba.lookups.productlocation.ProductLocationServiceTransformer]),ba.lang.namespace("ba.lookups.productlocation"),ba.lookups.productlocation.TransformedProductLocation=function(o){function t(o){this.locationType=o.locationType.toLowerCase(),this.airportCode=o.airportDetails.iataCode,this.airportName=o.airportDetails.name,this.airportOjId=o.airportDetails.bahID,this.cityCode=o.cityDetails.code,this.cityName=o.cityDetails.name,this.cityOjId=o.cityDetails.bahID,this.stateCode=o.stateDetails?o.stateDetails.code:void 0,this.stateName=o.stateDetails?o.stateDetails.name:void 0,this.countryCode=o.countryDetails.code,this.countryName=o.countryDetails.name,this.propositionAvailability=this.convertPropositionKeys(o.availableProducts),this.locationCode=this.airportCode,this.locationName=this.airportName,this.locationValue=this.generateDisplayName(this.cityName,this.airportName,this.airportCode,this.countryName)}return t.prototype={generateDisplayName:function(o,t,s,a){var i=o+", "+t+" ("+s.toUpperCase()+"), ";return i+=a},convertPropositionKeys:function(t){var s={};return s[o.FLIGHT_ONLY]=t.flightOnly,s[o.HOTEL_PACKAGE]=t.flightAndHotel,s[o.CAR_PACKAGE]=t.flightAndCar,s[o.HOTEL_ONLY]=t.hotelOnly,s[o.CAR_ONLY]=t.carOnly,s}},t},ba.lookups.Module.factory("TransformedProductLocation",["LookupsConstants",ba.lookups.productlocation.TransformedProductLocation]);
ba.lang.namespace("ba.pagemessages"),ba.pagemessages.Lib=angular.module("ba-page-messages",["ba-page-messages-templates"]),ba.lang.namespace("ba.pagemessages"),ba.pagemessages.PageMessageDirective=function(e){return{restrict:"AE",transclude:!0,scope:{messageTypeClass:"=",messageTitle:"=?",messageTitleLiteral:"=?",messageDescription:"=",pageDisabled:"=",inverted:"@"},templateUrl:"ba-page-messages/templates/ba-page-messages.html",link:function(a){var s=function(){angular.element(e).find("body").removeClass("no-scroll"),angular.element(e).find("html").removeClass("no-scroll")};a.$watch("pageDisabled",function(){a.pageDisabled?(angular.element(e).find("body").addClass("no-scroll"),angular.element(e).find("html").addClass("no-scroll")):s()}),a.$on("$destroy",function(){s()})}}},ba.pagemessages.Lib.directive("baPageMessages",["$document",ba.pagemessages.PageMessageDirective]);
angular.module("ba-page-messages-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-page-messages/templates/ba-page-messages.html",'<div class="page-message-overlay" ng-if="pageDisabled === true"></div><div class="page-messages {{messageTypeClass}}" data-ng-class="{\'page-message-disabled\': pageDisabled, \'inverted\': inverted === \'true\'}"><h4 ng-if="messageTitle" data-ba-resource-bundle-static="" data-key="{{messageTitle}}"></h4><h4 ng-if="messageTitleLiteral" ng-bind="messageTitleLiteral"></h4><p ng-bind-html="messageDescription" data-ng-if="messageDescription"></p><div data-ng-transclude=""></div></div>')}]);
ba.lang.namespace("ba.passengermix.validation"),ba.passengermix.validation.Lib=angular.module("ba-passengermix-validation",["passengermix-validation-main"]),ba.lang.namespace("ba.passengermix.validation"),ba.passengermix.validation.Module=angular.module("passengermix-validation-main",["ba-lang"]),ba.lang.namespace("ba.passengermix.validation"),ba.passengermix.validation.PaxValidationConstants={ERROR_KEY_MAX_TOTAL_PASSENGER_EXCLUDE_INFANT:"totalNumberOfPassengersCantExceedFC",ERROR_KEY_MAX_TOTAL_PASSENGER:"totalNumberOfPassengersCantExceed",ERROR_KEY_MAX_ADULT:"totalNumberOfAdultsCantExceed",ERROR_KEY_MIN_ADULT:"totalNumberOfAdultCantLess",ERROR_KEY_MAX_CHILD:"totalNumberOfChildsCantExceed",ERROR_KEY_MAX_YOUNG:"totalNumberOfYoungsCantExceed",ERROR_KEY_MAX_INFANTS:"totalNumberOfInfantsCantExceed",ERROR_KEY_INFANT_EQUAL_OR_LESS_THAN_ADULTS_PER_ROOM:"numberOfInfantsTravellingExceedAdults",ERROR_KEY_MAX_ROOMS:"maxRoom",ERROR_KEY_ADULT_MIN_PER_ROOM:"minAdultCountPerRoom",ERROR_KEY_TOTAL_PAX_MATCH_BASKET:"maxTotalPaxMatchBasket",PROPOSITION_FLIGHT_ONLY:"FlightOnly",PROPOSITION_FLIGHT_CAR:"FlightAndCar",PROPOSITION_FLIGHT_HOTEL:"FlightAndHotel",PROPOSITION_HOTEL_ONLY:"HotelOnly",RESOURCE_FILE_RULESET_JSON:"en_resources",PAXMIX_KEY_ADULT:"AdultKey",PAXMIX_KEY_YOUNG_ADULT:"YoungAdultKey",PAXMIX_KEY_CHILD:"ChildKey",PAXMIX_KEY_INFANT:"InfantKey",VALIDATION_RULESET:{RuleSet:{PropositionRules:{FlightOnly:{MAX_TOTAL_PASSENGERS:9,MAX_TOTAL_PASSENGERS_INCLUDE_INFANT:!1,MIN_ADULT:1,MAX_ADULT:9,MAX_YOUNG:8,MAX_CHILD:8,MAX_INFANTS:8,INFANT_EQUAL_OR_LESS_THAN_ADULTS_PER_ROOM:null,ADULT_MIN_PER_ROOM:1,MAX_ROOMS:1},FlightAndHotel:{MAX_TOTAL_PASSENGERS:9,MAX_TOTAL_PASSENGERS_INCLUDE_INFANT:!1,MIN_ADULT:1,MAX_ADULT:9,MAX_CHILD:8,MAX_INFANTS:8,INFANT_EQUAL_OR_LESS_THAN_ADULTS_PER_ROOM:null,ADULT_MIN_PER_ROOM:1,MAX_ROOMS:4},FlightAndCar:{MAX_TOTAL_PASSENGERS:7,MAX_TOTAL_PASSENGERS_INCLUDE_INFANT:!0,MIN_ADULT:1,MAX_ADULT:7,MAX_CHILD:6,MAX_INFANTS:6,INFANT_EQUAL_OR_LESS_THAN_ADULTS_PER_ROOM:null,ADULT_MIN_PER_ROOM:1,MAX_ROOMS:1},HotelOnly:{MAX_TOTAL_PASSENGERS:9,MAX_TOTAL_PASSENGERS_INCLUDE_INFANT:!1,MIN_ADULT:1,MAX_ADULT:9,MAX_CHILD:8,MAX_INFANTS:8,INFANT_EQUAL_OR_LESS_THAN_ADULTS_PER_ROOM:null,ADULT_MIN_PER_ROOM:1,MAX_ROOMS:4,TOTAL_PASSENGERS_MATCH_BASKET:!1}}}}},ba.passengermix.validation.Module.constant("PaxValidationConstants",ba.passengermix.validation.PaxValidationConstants),ba.lang.namespace("ba.passengermix.validation"),ba.passengermix.validation.BusinessValidationRuleProxy=function(a,_){this.getRuleSet=function(){return a.when({data:_.VALIDATION_RULESET})}},ba.passengermix.validation.Module.service("BusinessValidationRuleProxy",["$q","PaxValidationConstants",ba.passengermix.validation.BusinessValidationRuleProxy]),ba.lang.namespace("ba.passengermix.validation"),ba.passengermix.validation.BusinessValidationRuleService=function(a){"use strict";this.businessValidationRuleProxy=a},ba.passengermix.validation.BusinessValidationRuleService.prototype.getPropositionRulesObject=function(a){return this.businessValidationRuleProxy.getRuleSet().then(function(_){return _.data.RuleSet.PropositionRules[a]})},ba.passengermix.validation.Module.service("BusinessValidationRuleService",["BusinessValidationRuleProxy",ba.passengermix.validation.BusinessValidationRuleService]),ba.lang.namespace("ba.passengermix.validation"),ba.passengermix.validation.ValidationService=function(a){"use strict";var _,e,n,i,A,t,E,R,s,l,o,O,T,r,u,N,S,M;M=function(a){var _,e=!1;for(_=0;_<t.length;_++)if(t[_]===a){e=!0;break}e||t.push(a)},E=function(t){t.group.length>0&&angular.forEach(t,function(_){angular.forEach(_,function(_){angular.forEach(_,function(_){switch(_.title){case a.PAXMIX_KEY_ADULT:e+=_.value;break;case a.PAXMIX_KEY_YOUNG_ADULT:A+=_.value;break;case a.PAXMIX_KEY_CHILD:n+=_.value;break;case a.PAXMIX_KEY_INFANT:i+=_.value}})})}),_=e+A+i+n},R=function(e,n){n?_>e&&M(a.ERROR_KEY_MAX_TOTAL_PASSENGER):_-i>e&&M(a.ERROR_KEY_MAX_TOTAL_PASSENGER_EXCLUDE_INFANT)},s=function(_){e>_&&M(a.ERROR_KEY_MAX_ADULT)},l=function(_){_>e&&M(a.ERROR_KEY_MIN_ADULT)},o=function(_){n>_&&M(a.ERROR_KEY_MAX_CHILD)},O=function(_){A>_&&M(a.ERROR_KEY_MAX_YOUNG)},T=function(_){i>_&&M(a.ERROR_KEY_MAX_INFANTS)},r=function(_){var e=0,n=0;_.group.length>0&&angular.forEach(_,function(_){angular.forEach(_,function(_){e=0,n=0,angular.forEach(_,function(_){switch(_.title){case a.PAXMIX_KEY_ADULT:e=_.value;break;case a.PAXMIX_KEY_INFANT:n=_.value}n>e&&M(a.ERROR_KEY_INFANT_EQUAL_OR_LESS_THAN_ADULTS_PER_ROOM)})})})},u=function(_,e){var n=0;_.group.length>0&&(n=_.group.length,n>e&&M(a.ERROR_KEY_MAX_ROOMS))},N=function(_,e){_.group.length>0&&angular.forEach(_,function(_){angular.forEach(_,function(_){angular.forEach(_,function(_){_.title===a.PAXMIX_KEY_ADULT&&_.value<e&&M(a.ERROR_KEY_ADULT_MIN_PER_ROOM)})})})},S=function(e,n,i){n&&i>_&&M(a.ERROR_KEY_TOTAL_PAX_MATCH_BASKET)},ba.passengermix.validation.ValidationService.prototype.validate=function(a,M){var L,c=0;e=0,n=0,i=0,_=0,A=0,t=[],E(a);for(L in M)if(M.hasOwnProperty(L))switch(c=parseInt(M[L]),L){case"MAX_TOTAL_PASSENGERS":M.MAX_TOTAL_PASSENGERS_INCLUDE_INFANT?R(c,!0):R(c,!1);break;case"MAX_ADULT":s(c);break;case"MIN_ADULT":l(c);break;case"MAX_CHILD":o(c);break;case"MAX_YOUNG":O(c);break;case"MAX_INFANTS":T(c);break;case"INFANT_EQUAL_OR_LESS_THAN_ADULTS_PER_ROOM":r(a);break;case"MAX_ROOMS":u(a,c);break;case"ADULT_MIN_PER_ROOM":N(a,c);break;case"TOTAL_PASSENGERS_MATCH_BASKET":S(a,M.TOTAL_PASSENGERS_MATCH_BASKET,M.MAX_TOTAL_PASSENGERS)}return t}},ba.passengermix.validation.Module.service("ValidationService",["PaxValidationConstants",ba.passengermix.validation.ValidationService]);

ba.lang.namespace("ba.loading"),ba.loading.Lib=angular.module("ba-loading",["ba-loading-templates","loading-bar"]),ba.lang.namespace("ba.loading.bar"),ba.loading.bar.Module=angular.module("loading-bar",[]),ba.lang.namespace("ba.loading.bar"),ba.loading.bar.loadingBarDirective=function(){return{restrict:"A",templateUrl:"ba-loading/templates/ba-loading-bar.html",transclude:!0,scope:{loadingLabel:"=?",currentStage:"=?",totalStages:"=?",inverse:"=?",noLogo:"=?"},link:function(a){a.loadingLabel=a.loadingLabel||"LOADING",a.$watch("currentStage",function(){a.width="1.00",0!==a.currentStage&&(a.width=(a.currentStage/a.totalStages*100).toFixed(2))})}}},ba.loading.bar.Module.directive("loadingBar",[ba.loading.bar.loadingBarDirective]);
angular.module("ba-loading-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-loading/templates/ba-loading-bar.html",'<div class="loading-bar" data-ng-class="{\'inverse\': inverse}"><div class="loading-bar-logo" data-ng-if="!noLogo"></div><h2 class="loading-bar-label">{{loadingLabel}}</h2><div class="loader"><div class="loading-bar-fill" style="width: {{width}}%;" data-ng-class="{\'bounce\': currentStage === null || !totalStages}"></div></div></div>')}]);
ba.lang.namespace("ba.thirdpartyads"),ba.thirdpartyads.Module=angular.module("ba-third-party-ads",[]),ba.lang.namespace("ba.thirdpartyads"),ba.thirdpartyads.thirdPartyAdsComponent=function(t,e,a){"use strict";return{restrict:"A",scope:{mapping:"=?",displayId:"@",adUnitPath:"@",targeting:"=?",generalSize:"@?",refreshAds:"=?"},link:function(i){var r,d,n=function(n){i.adDisplayed=!1,i.mapping=e.addMapping(n,i.mapping)||e.getDefaultMapping(n),d=e.defineSlot(n,i.adUnitPath,i.displayId,i.mapping,i.generalSize),e.setTargeting(n,i.targeting,d),n.pubads().addEventListener("slotRenderEnded",function(t){t.isEmpty?i.showAds=!1:(i.adDisplayed=!0,i.showAds=!0)}),angular.element(a).bind("resize",function(){r&&t.cancel(r),r=t(function(){d.clearTargeting(),n.pubads().refresh()},1500)}),i.refreshWatch=i.$watch(function(){return i.refreshAds},function(){i.refreshAds&&(i.refreshAds=!1,d.clearTargeting(),e.updateTargeting(n,i.targeting,d),n.pubads().refresh())}),n.enableServices(),n.display(i.displayId)};i.showAds=!1,i.gTagWatch=i.$watch(function(){return void 0!==a.googletag&&a.googletag.apiReady},function(){void 0!==a.googletag&&a.googletag.apiReady&&(i.gTagWatch(),a.googletag.cmd.push(n(a.googletag)))})},templateUrl:"ba-third-party-ads/templates/third-party-ads-view.html"}},ba.thirdpartyads.Module.directive("thirdPartyAdsComponent",["$timeout","ThirdPartyAdsService","$window",ba.thirdpartyads.thirdPartyAdsComponent]),ba.lang.namespace("ba.thirdpartyads"),ba.thirdpartyads.ThirdPartyAdsService=function(t){"use strict";this.window=t,this.targetingSet=!1,this.generalSize=[0,0]},ba.thirdpartyads.ThirdPartyAdsService.prototype.getDefaultMapping=function(t){"use strict";return t.sizeMapping().addSize([1200,0],[970,90]).addSize([1e3,0],[970,90]).addSize([760,0],[728,90]).addSize([320,0],[320,50]).addSize([0,0],[]).build()},ba.thirdpartyads.ThirdPartyAdsService.prototype.addMapping=function(t,e){"use strict";var a,i,r;if(e&&e.length>0){for(r=t.sizeMapping(),a=0;a<e.length;a+=1)i=e[a],i.windowWidth&&i.advertWidth&&i.advertHeight?r=r.addSize([i.windowWidth,i.windowHeight],[i.advertWidth,i.advertHeight]):0===i.windowWidth&&(r=r.addSize([i.windowWidth,i.windowHeight],[]));return r.build()}return void 0},ba.thirdpartyads.ThirdPartyAdsService.prototype.defineSlot=function(t,e,a,i,r){"use strict";return this.generalSize=r||this.generalSize,t.destroySlots(),t.defineSlot(e,this.generalSize,a).defineSizeMapping(i).addService(t.pubads())},ba.thirdpartyads.ThirdPartyAdsService.prototype.updateTargeting=function(t,e,a){this.targetingSet=!1,this.setTargeting(t,e,a)},ba.thirdpartyads.ThirdPartyAdsService.prototype.setTargeting=function(t,e,a){"use strict";var i;if(!this.targetingSet){for(i in e)e.hasOwnProperty(i)&&void 0!==e[i]&&a.setTargeting(i,e[i]);t.pubads().enableSingleRequest(),t.pubads().collapseEmptyDivs(),this.targetingSet=!0}},ba.thirdpartyads.Module.service("ThirdPartyAdsService",["$window",ba.thirdpartyads.ThirdPartyAdsService]);
angular.module("ba-third-party-ads-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-third-party-ads/templates/third-party-ads-view.html",'<div ng-show="showAds" class="ads-container"><span class="ad-text" data-ba-resource-bundle-static="" data-key="advertisement"></span><div id="{{displayId}}"></div></div>')}]);
ba.lang.namespace("ba.url"),ba.url.Lib=angular.module("ba-url",["ba-lang"]),ba.lang.namespace("ba.url"),ba.url.baTeamsiteUrl=function(e,r){return{restrict:"A",replace:!1,link:function(a,t,i){var o=function(){var t,o={templateId:i.template,protocol:i.protocol,membership:i.membership,audience:i.audience},l=i.queryparams?r(i.queryparams)(a):"";i.pageid&&(t=e.formBATeamsiteURL(i.pageid,o,l),i.$set("href",t))};o(),i.$observe("template",o),i.$observe("protocol",o),i.$observe("membership",o),i.$observe("audience",o),i.$observe("queryparams",o),i.$observe("pageid",o)}}},ba.url.baLivesiteUrl=function(e,r){return{restrict:"A",replace:!1,link:function(a,t,i){var o=function(){var t,o=i.protocol,l=i.sitename,n=i.pagename,s=i.queryparams?r(i.queryparams)(a):"";l&&(t=e.formLiveSiteURL(l,o,n,s),i.$set("href",t))};o(),i.$observe("protocol",o),i.$observe("sitename",o),i.$observe("pagename",o),i.$observe("queryparams",o)}}},ba.url.Lib.directive("baLivesiteUrl",["URLFormulationService","$interpolate",ba.url.baLivesiteUrl]),ba.url.Lib.directive("baTeamsiteUrl",["URLFormulationService","$interpolate",ba.url.baTeamsiteUrl]),ba.lang.namespace("ba.url"),ba.url.URLFormulationService=function(e,r){this.locationService=e,this.environmentService=r},ba.url.URLFormulationService.prototype.formBATeamsiteURL=function(e,r,a){var t,i,o,l,n,s,c,m;if(!e)throw new Error("PageId needs to be passed");return t=this.locationService.absUrl(),o=this.createURLSegmentation(t),o.locale=o.locale.replace("-","_"),m=r||{},l=this.environmentService.get("BA_ASSET_HOST",o.hostName),n=m.protocol||o.protocol,s=m.membership||o.membership,c=m.audience||o.audience,i=n+"://"+l+"/"+c+"/",i=m&&m.templateId?i+m.templateId+"/"+e:i+e+"/"+s+"/"+o.locale,a&&(i=i+"?"+a),i},ba.url.URLFormulationService.prototype.formLiveSiteURL=function(e,r,a,t){var i,o,l,n,s,c,m;if(!e)throw new Error("siteName needs to be passed");return i=this.locationService.absUrl(),o=this.createURLSegmentation(i),m=this.environmentService.get("BA_ASSET_HOST",o.hostName),l=o.locale.replace("_","-"),s=r||o.protocol,c=a||"",n=s+"://"+m+"/"+l+"/"+e,c&&""!==c&&(n=n+"/"+c),t&&(n=n.concat("?"+t)),n},ba.url.URLFormulationService.prototype.identifyUrlType=function(e){var r,a=/^[a-zA-z]{2}-[a-zA-Z]{2}$/,t=/^([a-zA-z]{2}_[a-zA-z]{2})(#|\?|;)?/,i="default";return e&&(r=e.split("/"),r[1]&&a.test(r[1])?i="livesite":(r[4]&&t.test(r[4])||r[5]&&t.test(r[5]))&&(i="morph")),i},ba.url.URLFormulationService.prototype.createURLSegmentation=function(e){var r,a,t,i,o,l,n,s,c,m,b,u,p,v=/^([a-zA-z]{2}_[a-zA-z]{2})(#|\?|;)?/;if(e.indexOf("://")<0)throw new Error("Malformed URL: should contain a protocol followed by '://'");if(e)switch(a=e.split("://"),r=a[0]||"",e=a[1]||"",t=e.split("/"),p=this.identifyUrlType(e)){case"morph":i=t[0],o=t[1],l=t[2],n=t[3],t[4]&&v.test(t[4])?s=t[4].substr(0,5).replace("_","-"):t[5]&&v.test(t[5])&&(s=t[5].substr(0,5).replace("_","-"));break;case"livesite":i=t[0],s=t[1],c=t[2],m=t[3];break;case"default":default:b=window.location.pathname.match(/\b\w{2}\b_\b\w{2}\b/g),u=window.location.pathname.match(/\b\w{2}\b-\b\w{2}\b/g),s=b&&b[0]?b[0]:u&&u[0]?u[0]:"en-gb",i=t[0],o="travel",n="public"}return{protocol:r,hostName:i,audience:o||"travel",locale:s,pageId:l,membership:n||"public",siteName:c,livesitePageName:m}},ba.url.Lib.service("URLFormulationService",["$location","Environment",ba.url.URLFormulationService]);
ba.lang.namespace("ba.modal"),ba.modal.easeInOutCubic=function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},ba.modal.Module=angular.module("ba-modal",["ba-modal-templates","ba-trap-focus","duScroll","focus-modal"]).value("duScrollEasing",ba.modal.easeInOutCubic),ba.lang.namespace("ba.modal.focusmodal"),ba.modal.focusmodal.Module=angular.module("focus-modal",[]),ba.lang.namespace("ba.modal"),ba.modal.ModalDirective=function(e){return{restrict:"A",scope:{show:"=",type:"@?",fixedWidth:"@?",restrictExitFunctionality:"=",onClosing:"&",messageDescription:"@?",callbackFunction:"&?",closeIcon:"@?",ctaText:"@?"},transclude:!0,templateUrl:"ba-modal/templates/modal-template.html",link:function(t){var o,a=!1;t.getCloseIcon=function(){return"true"===t.closeIcon},t.getCtaText=function(){return"true"===t.ctaText},t.$watch("show",function(n){!!n!=!!a&&(n?(a=!0,o=e[0].activeElement,t.getCloseIcon(),t.$broadcast("updateFocusableElements"),angular.element(e).find("body").addClass("modal-open"),t.messageDescription||(t.messageDescription="Close")):(a=!1,angular.element(e).find("body").removeClass("modal-open")))}),t.callBackFunctionx=function(){t.callbackFunction?t.callbackFunction():t.hideModal()},t.hideModal=function(){t.onClosing(),t.show=!1,o&&o.focus()},t.hideModalRestricted=function(){t.restrictExitFunctionality||t.hideModal()},t.keyPress=function(e){var o=27;e.keyCode===o&&t.hideModalRestricted()}}}},ba.modal.Module.directive("modalDirective",["$document","$timeout",ba.modal.ModalDirective]),ba.lang.namespace("ba.modal"),ba.modal.PopUpDirective=function(e,t,o,a){return{restrict:"A",scope:{show:"=",selectorId:"=",restrictExitFunctionality:"=",startingTabIndex:"=",positionAdjustmentValues:"=",popUpId:"=",popUpHeight:"=",popUpWidth:"=",disablePositionAdjustment:"<"},transclude:!0,templateUrl:"ba-modal/templates/pop-up-modal.html",link:function(n){var i,l,s;n.dialogTop=0,n.dialogLeft=0,n.isPositionAdjusted=!1,i=function(){var t,a,i,d,c,u,r,m=e[0].getElementById(n.selectorId);m&&(t=m.getBoundingClientRect(),a=o.getComputedStyle(e[0].getElementById(n.popUpId)),c=parseInt(l(a,"max-width")),i=Number(n.popUpHeight?n.popUpHeight:l(a,"min-height")),d=Number(n.popUpWidth?n.popUpWidth:l(a,"min-width")),u=o.pageYOffset+t.top+(t.height-i)/2,r=o.pageXOffset+t.left+(t.width-d)/2,n.disablePositionAdjustment!==!0&&(u-=s("top"),r-=s("left"),r+c+35>o.innerWidth&&(r=o.innerWidth-(c+50)),n.isPositionAdjusted=!0),n.dialogLeft=0>r?0:r,n.dialogTop=0>u?0:u,n.show&&e.scrollTo(n.dialogLeft+s("left"),n.dialogTop+s("top"),500))},s=function(e){var t;return n.positionAdjustmentValues?(t=parseInt(n.positionAdjustmentValues[e]),isNaN(t)?0:t):0},l=function(e,t){var o=e.getPropertyValue(t);return o&&"none"!==o?o.replace("px",""):0},angular.element(o).bind("resize",function(){t(function(){i()},0)}),n.$watch("show",function(o,l){n.show?(i(),t(function(){a.$broadcast("updateFocusableElements")},0),angular.element(e).find("body").addClass("pop-up-open")):void 0!==l&&(t(function(){e[0].getElementById(n.selectorId).focus()},0),angular.element(e).find("body").removeClass("pop-up-open"))}),n.hidePopUp=function(){n.restrictExitFunctionality||(n.show=!1)},n.keyPress=function(e){var t=27;e.keyCode===t&&n.hidePopUp()},n.applyDialogPosition=function(){return n.disablePositionAdjustment!==!0?{top:n.dialogTop+"px",left:n.dialogLeft+"px"}:{}}}}},ba.modal.Module.directive("popUpDirective",["$document","$timeout","$window","$rootScope",ba.modal.PopUpDirective]),ba.lang.namespace("ba.modal"),ba.modal.TabMarkerDirective=function(){return{restrict:"A",link:function(e,t,o){var a=o.tabMarkerDirective,n=function(){a!==o.tabMarkerDirective&&(t[0].focus(),a=o.tabMarkerDirective)};o.$observe("tabMarkerDirective",n)}}},ba.modal.Module.directive("tabMarkerDirective",ba.modal.TabMarkerDirective),ba.lang.namespace("ba.modal.focusmodal"),ba.modal.focusmodal.Module.constant("FocusModalConstants",{ESCAPE_KEY:27,OPEN_MODAL_CLASS:"open-modal",MODAL_CLOSE_BUTTON_CLASS:"focus-modal-close-button",FOCUS_MODAL_CLASS:"focus-modal"}),ba.lang.namespace("ba.modal.focusmodal"),ba.modal.focusmodal.focusModal=function(e,t,o){return{restrict:"A",transclude:!0,scope:{focusIsOpen:"=",focusHasBeenOpen:"=?",focusReturnElement:"@"},link:function(a,n){var i,l=angular.element(e[0].querySelector("body"));n[0].setAttribute("role","dialog"),a.$watch("focusIsOpen",function(s){s?(i=e[0].activeElement,l.addClass(t.OPEN_MODAL_CLASS),n[0].getElementsByClassName(t.MODAL_CLOSE_BUTTON_CLASS)[0].focus(),a.focusHasBeenOpen=!0,n[0].setAttribute("tabindex",0),n[0].getElementsByClassName(t.MODAL_CLOSE_BUTTON_CLASS)[0].setAttribute("tabindex",0),n[0].removeAttribute("aria-hidden"),n[0].setAttribute("aria-modal",!0)):s===!1&&a.focusHasBeenOpen?(l.removeClass(t.OPEN_MODAL_CLASS),n[0].setAttribute("tabindex",-1),n[0].getElementsByClassName(t.MODAL_CLOSE_BUTTON_CLASS)[0].setAttribute("tabindex",-1),a.focusReturnElement&&"object"==typeof e[0].getElementsByClassName(a.focusReturnElement)[0]?e[0].getElementsByClassName(a.focusReturnElement)[0].focus():"object"==typeof i&&i.focus(),o(function(){a.focusHasBeenOpen=!1,a.$apply()},500),n[0].setAttribute("aria-hidden",!0),n[0].removeAttribute("aria-modal")):(l.removeClass(t.OPEN_MODAL_CLASS),n[0].setAttribute("tabindex",-1),n[0].getElementsByClassName(t.MODAL_CLOSE_BUTTON_CLASS)[0].setAttribute("tabindex",-1),n[0].setAttribute("aria-hidden",!0),n[0].removeAttribute("aria-modal"))}),a.focusEscape=function(e){e.keyCode===t.ESCAPE_KEY&&(a.focusIsOpen=!1)}},templateUrl:"ba-modal/templates/focus-modal.html"}},ba.modal.focusmodal.Module.directive("focusModal",["$document","FocusModalConstants","$timeout",ba.modal.focusmodal.focusModal]);
angular.module("ba-modal-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-modal/templates/modal-template.html",'<div class="modal" data-ng-if="show" data-ng-keydown="keyPress($event)"><div class="modal-overlay" data-ng-click="hideModalRestricted($event)"></div><div class="modal-dialog" data-trap-focus="ï¿½ï¿½" data-ng-animate="modal-slide" role="dialog"><div class="modal-close-container" data-ng-if="getCloseIcon()"><a href="javascript:void(0)" class="modal-close-button right" data-ng-click="hideModal()" role="button" id="modal-close-button" aria-label="close window" data-icon="&#xe610;" tabindex="0"></a></div><div data-ng-transclude="" class="modal-content" data-ng-class="{ \'no-close-button\': !getCtaText(), \'small\': type === \'small\', \'portrait\': type === \'portrait\', \'jumbo\': type === \'jumbo\', \'fixed-width-tablet\': fixedWidth === \'tablet\' || fixedWidth === \'all\', \'fixed-width-desktop\': fixedWidth === \'desktop\' || fixedWidth === \'all\' }"></div><div data-ng-if="getCtaText()"><button class="modalBottom bold" role="button" data-ng-click="callBackFunctionx()" aria-label="{{messageDescription}}"><span>{{messageDescription}}</span></button></div></div></div>'),$templateCache.put("ba-modal/templates/pop-up-modal.html",'<div class="pop-up" data-ng-show="show" data-ng-keydown="keyPress($event)" tabindex="-1"><div class="pop-up-overlay" data-ng-click="hidePopUp()"></div><div data-trap-focus="" data-focus-first-element="show" data-override-auto-focus="true" id="{{popUpId}}" data-ng-show="show" class="pop-up-dialog" data-ng-style="applyDialogPosition()" ng-class="{\'pop-up-animation\' : (disablePositionAdjustment !== true)}" data-ng-transclude=""></div></div>'),$templateCache.put("ba-modal/templates/focus-modal.html",'<div class="focus-modal" data-ng-class="{\'focus-modal-open\': focusIsOpen, \'focus-modal-closed\': !focusIsOpen && focusHasBeenOpen}" data-ng-keydown="focusEscape($event)" data-trap-focus="" data-focus-first-element="show" data-override-auto-focus="true"><div class="modal-close-container"><button class="modal-close-button focus-modal-close-button right" data-ng-click="focusIsOpen = false" id="modal-close-button" aria-label="close window"><img data-ng-src="/cms/global/assets/images/site/icon/header_cross.svg" alt="Close"></button></div><div class="modal-content" data-ng-transclude=""></div></div>')}]);
ba.lang.namespace("ba.http"),ba.http.Module=angular.module("ba-http",["ba-cookie","ba-url"]).config(["$httpProvider",function(t){t.interceptors.push("CAPTWOCommonHeadersInterceptor"),t.interceptors.push("LocaleInterceptor"),t.interceptors.push("ETagsInterceptor"),t.interceptors.push("ResponseCachingInterceptor"),t.interceptors.push("HttpErrorInterceptor"),t.interceptors.push("ShapeRedirectInterceptor")}]),ba.lang.namespace("ba.http"),ba.http.CacheHeaderInterceptor=function(){return{request:function(t){var e;return e=t.etag,"GET"===t.method?!bowser.msie||"11.0"!==bowser.version&&"10.0"!==bowser.version?e?(t.headers["Cache-Control"]="max-age=0",t.headers["If-None-Match"]=e.replace(/\"/g,""),t.headers.Pragma="no-cache"):(t.headers.Pragma="no-cache",t.headers["Cache-Control"]="no-cache, no-store, must-revalidate",t.headers.Expires="0"):t.headers.Pragma="no-cache":("POST"===t.method||"PUT"===t.method||"DELETE"===t.method)&&t.headers&&bowser.msie&&(t.headers["Cache-Control"]="no-cache, no-store, must-revalidate",t.headers.Pragma="no-cache",t.headers.Expires="0"),t}}},ba.http.Module.service("CacheHeaderInterceptor",ba.http.CacheHeaderInterceptor),ba.lang.namespace("ba.http"),ba.http.CAPTWOCommonHeadersInterceptor=function(t,e,a,r){var n=/\/rs\/v\d{1}/;return{request:function(o){return n.test(o.url)&&(o.headers.Accept="application/json,  application/javascript",o.headers["Accept-Language"]="EN",o.headers["Content-Type"]="application/json",o.headers.ba_client_applicationName="ba.com"+e.clientApplicationNameSuffix,o.headers.ba_client_organisation="BA",o.headers.ba_client_deviceType=a.getPlatform(),o.headers.ba_api_context=t.get("BA_API_CONTEXT","https://localhost:8443/api/"),o.headers.ba_provider_service_override=r.getCookieValue("BA_DEV_PROVIDER")),o}}},ba.http.Module.factory("CAPTWOCommonHeadersInterceptor",["Environment","BAHttpParam","PlatformDetectionService","BACookieService",ba.http.CAPTWOCommonHeadersInterceptor]),ba.lang.namespace("ba.http"),ba.http.ETagsInterceptor=function(t,e){var a=function(t,a){var r=e.getEtagCache(t.parentUrl?t.parentUrl:t.url);r&&t.headers&&(t.headers[a]=r.replace(/[W\/"]/g,""))};return{request:function(t){switch(t.method){case"GET":a(t,"If-None-Match");break;case"POST":case"PUT":case"DELETE":default:a(t,"If-Match")}return t},response:function(t){var a;return t&&t.config&&"GET"!==t.config.method?t:t&&t.headers&&t.config&&t.headers("etag")?(a=t.headers("etag"),a&&e.addToEtagCache(t.config.url,a),t):t}}},ba.http.Module.service("ETagsInterceptor",["$q","CacheManager",ba.http.ETagsInterceptor]),ba.lang.namespace("ba.http"),ba.http.HttpErrorInterceptor=function(t,e,a){var r="HTTP_REQUEST_FAILED",n=[a.get4xxRange(),a.get5xxRange()],o=function(t){var e;for(e=0;e<n.length;e++)if(n[e].isInRange(t))return!0;return!1},c=function(t){var e=t.config.bypassHttpErrorInterceptorOnStatus,a=t.config.bypassHttpErrorInterceptorFn;return a&&"function"==typeof a?a(t):e?-1!==e.indexOf(t.status):!1};return{getErrorEventName:function(){return r},responseError:function(a){return o(a.status)&&!c(a)&&(e.$emit(r,a),a.data=a.data||{},a.data.$httpStatus=a.status),t.reject(a)}}},ba.http.Module.factory("HttpErrorInterceptor",["$q","$rootScope","HttpStatusService",ba.http.HttpErrorInterceptor]),ba.lang.namespace("ba.http"),ba.http.LocaleInterceptor=function(t,e){var a,r;return a="locale="+t.getLanguage()+"_"+t.getCountry().toUpperCase(),r=function(t){var e,r,n=/locale=\w\w_\w\w/;return r=n.test(t),r||(e=t.indexOf("?")>-1?"&":"?",t=t+e+a),t},{request:function(a){var n;return e.get(a.url)?a:(n=t.getNoLocaleRegExp().some(function(t){return t.test(a.url)}))?a:(a.url=r(a.url),a.parentUrl&&(a.parentUrl=r(a.parentUrl)),a)}}},ba.http.Module.service("LocaleInterceptor",["ClientLocaleService","$templateCache",ba.http.LocaleInterceptor]),ba.lang.namespace("ba.http"),ba.http.ResponseCachingInterceptor=function(t,e){return{response:function(t){return t&&t.config&&"GET"===t.config.method&&e.addToResponseCache(t.config.url,t),t},responseError:function(a){var r;return a&&a.config&&"GET"===a.config.method&&304===a.status&&(r=e.getResponseCache(a.config.url))?r:t.reject(a)}}},ba.http.Module.service("ResponseCachingInterceptor",["$q","CacheManager",ba.http.ResponseCachingInterceptor]),ba.lang.namespace("ba.http"),ba.http.ShapeRedirectInterceptor=function(t,e){var a=function(t){return t.status&&429===t.status&&t.data&&t.data.unavailable&&t.data.unavailable===!0&&t.data.redirectUrl};return{responseError:function(r){return a(r)?void e.location.replace(r.data.redirectUrl):t.reject(r)}}},ba.http.Module.factory("ShapeRedirectInterceptor",["$q","$window",ba.http.ShapeRedirectInterceptor]),ba.lang.namespace("ba.http"),ba.http.$HttpParamSerializerProvider=function(){var t=function(t){return null!=t&&"object"==typeof t},e=function(t){return"undefined"==typeof t},a=function(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")},r=function(e){return t(e)?angular.isDate(e)?e.toISOString():angular.toJson(e):e};this.$get=function(){return function(t){var n=[];return t?(angular.forEach(t,function(t,o){null===t||e(t)||(Array.isArray(t)?angular.forEach(t,function(t){n.push(a(o)+"="+a(r(t)))}):n.push(a(o)+"="+a(r(t))))}),n.join("&")):""}}},ba.http.Module.provider("$HttpParamSerializer",ba.http.$HttpParamSerializerProvider),ba.lang.namespace("ba.http"),ba.http.BAHttpParamProvider=function(){var t=this;return this.providerData={clientApplicationNameSuffix:""},{updateClientApplicationNameSuffix:function(e){t.providerData.clientApplicationNameSuffix="_"+e},$get:[function(){return t.providerData}]}},ba.http.Module.provider("BAHttpParam",ba.http.BAHttpParamProvider),ba.lang.namespace("ba.http"),ba.http.CacheManager=function(t){var e,a;return e=t.get("etagsCache"),e||(e=t("etagsCache")),a=t.get("responseCache"),a||(a=t("responseCache")),{getEtagCache:function(t){return e.get(t)},addToEtagCache:function(t,a){e.put(t,a)},getResponseCache:function(t){return a.get(t)},addToResponseCache:function(t,e){a.put(t,e)}}},ba.http.Module.service("CacheManager",["$cacheFactory",ba.http.CacheManager]),ba.lang.namespace("ba.http"),ba.http.ClientLocaleService=function(t,e,a){var r,n=t.absUrl(),o=[],c=e.getCountryOfResidence(),i=e.getLanguageCode();n||(n=window.location.href);try{r=a.createURLSegmentation(n),r.locale&&-1===n.indexOf("localhost:8443")?o=r.locale.split("-"):c&&i?(o[0]=i,o[1]=c):(o[0]="en",o[1]="gb")}catch(p){o[0]="en",o[1]="gb"}this.language=o[0].toLowerCase(),this.country=o[1].toLowerCase(),this.locale=this.language+"-"+this.country},ba.http.ClientLocaleService.prototype.getCountry=function(){return this.country},ba.http.ClientLocaleService.prototype.getLanguage=function(){return this.language},ba.http.ClientLocaleService.prototype.getLocale=function(){return this.locale},ba.http.ClientLocaleService.prototype.addNoLocaleRegExp=function(t){var e=this;e.noLocaleRegExpArray||(e.noLocaleRegExpArray=[]),Array.isArray(t)||(t=[t]),t.forEach(function(t){e.noLocaleRegExpArray.some(function(e){return e.toString()===t.toString()})||e.noLocaleRegExpArray.push(t)})},ba.http.ClientLocaleService.prototype.getNoLocaleRegExp=function(){return this.noLocaleRegExpArray||[]},ba.http.Module.service("ClientLocaleService",["$location","BACookieService","URLFormulationService",ba.http.ClientLocaleService]),ba.lang.namespace("ba.http"),ba.http.HttpStatusRange=function(t){if(t%100!==0)throw new Error("Invalid start "+t);this.start=t,this.end=t+100},ba.http.HttpStatusRange.prototype.isInRange=function(t){return t>=this.start&&t<this.end},ba.http.HttpStatusService=function(){},ba.http.HttpStatusService.prototype.get1xxRange=function(){return new ba.http.HttpStatusRange(100)},ba.http.HttpStatusService.prototype.get2xxRange=function(){return new ba.http.HttpStatusRange(200)},ba.http.HttpStatusService.prototype.get3xxRange=function(){return new ba.http.HttpStatusRange(300)},ba.http.HttpStatusService.prototype.get4xxRange=function(){return new ba.http.HttpStatusRange(400)},ba.http.HttpStatusService.prototype.get5xxRange=function(){return new ba.http.HttpStatusRange(500)},ba.http.Module.service("HttpStatusService",ba.http.HttpStatusService),ba.lang.namespace("ba.http"),ba.http.HttpUtilsService=function(){},ba.http.HttpUtilsService.prototype.queryParams=function(t){var e,a;e=[];for(a in t)t.hasOwnProperty(a)&&e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e.join("&")},ba.http.Module.service("HttpUtilsService",ba.http.HttpUtilsService),ba.lang.namespace("ba.http"),ba.http.PlatformDetectionService=function(){var t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}},e={Android:function(){return navigator.userAgent.match(/Tablet/i)},iOS:function(){return navigator.userAgent.match(/iPad/i)},any:function(){return e.Android()||e.iOS()}};this.getPlatform=function(){return t.any()?"MOBILE":e.any()?"TABLET":"DESKTOP"},this.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},ba.http.Module.service("PlatformDetectionService",ba.http.PlatformDetectionService);
ba.lang.namespace("ba.auth"),ba.auth.Lib=angular.module("ba-auth",["ba-logging","ba-http","ngResource","ba-cookie"]),ba.lang.namespace("ba.auth"),ba.auth.AuthenticationConstants={LOG_ON_SUCCESS:"LOG_ON_SUCCESS",LOG_OFF_SUCCESS:"LOG_OFF_SUCCESS",LOG_ON_FAILED:"LOG_ON_FAILED",REFRESH_TOKEN_FAILED:"REFRESH_TOKEN_FAILED",PUBLIC_TOKEN_FAILED:"PUBLIC_TOKEN_FAILED",REFRESH_TOKEN:"refresh_token",ACCESS_TOKEN:"access_token",PASSWORD:"password",REFRESH_TOKEN_EXPIRY:"ba_refresh_expires_in",ACCESS_TOKEN_EXPIRY:"expires_in",CAP_LOGOUT_URL:"/main/loginr?eId=109005",GRANT_SERVICE_URL:"/api/grant",ERROR_BODY_INVALID_GRANT:"invalid_grant",ERROR_DESCRIPTION_INVALID_TOKEN:"invalid_token",DEFAULT_CLIENT_ID:"bacomng",LOCKED:"LOCKED",LOCK_LEVEL:"LOCK-LEVEL",TOKEN:"token",PUBLIC_GRANT_TYPE:"urn:com:baplc:oauth:grant:public",TRACKINGID_GRANT_TYPE:"urn:com:baplc:oauth:grant:trackingid",PASSWORD_GRANT_TYPE:"password"},ba.auth.Lib.constant("AuthenticationConstants",ba.auth.AuthenticationConstants),ba.lang.namespace("ba.auth"),ba.auth.AuthenticationInterceptor=function(e,t,n){var o=[],r=!1,i={},c=!1,a=function(e){var t=e.split("&"),o=[];return t.forEach(function(e){-1===e.indexOf(n.TOKEN)&&o.push(e)}),o.join("&")};return{request:function(n){var i,a;return n.url.match(/^(https:\/\/.*)?\/api\/sc\d.*/i)?(a=e.defer(),i=t.get("BAAuthenticationService"),i.isAuthenticatedAccessTokenExpired()||!i.isLoggedOn()&&i.isPublicAccessTokenExpired()?(o.push({config:n,deferred:a}),c||(c=!0,i.refreshToken().then(function(){c=!1,angular.forEach(o,function(e){e.config.headers.Authorization="Bearer "+i.retrieveBestAccessToken(),e.deferred.resolve(e.config)}),o=[]})["catch"](function(e){c=!1,angular.forEach(o,function(t){t.deferred.reject(e)}),o=[]}))):i.isLoggedOn()||i.hasPublicToken()?(n.headers.Authorization="Bearer "+i.retrieveBestAccessToken(),a.resolve(n)):(o.push({config:n,deferred:a}),r||(r=!0,i.createPublicToken().then(function(){r=!1,angular.forEach(o,function(e){e.config.headers.Authorization="Bearer "+i.retrieveBestAccessToken(),e.deferred.resolve(e.config)})})["catch"](function(e){r=!1,angular.forEach(o,function(t){t.deferred.reject(e)}),o=[]}))),a.promise):n},responseError:function(o){var r=e.defer(),c=t.get("$http"),s=t.get("BAAuthenticationService");return 400===o.status&&o.data.error===n.ERROR_BODY_INVALID_GRANT&&o.data.error_description===n.ERROR_DESCRIPTION_INVALID_TOKEN?(s.deleteAuthenticationCookies(),i={rejection:o,deferred:r},i.rejection.config.data&&(i.rejection.config.data=a(i.rejection.config.data)),c(i.rejection.config).then(function(e){i.deferred.resolve(e)},function(e){i.deferred.reject(e)}),r.promise):e.reject(o)}}},ba.auth.Lib.factory("AuthenticationInterceptor",["$q","$injector","AuthenticationConstants",ba.auth.AuthenticationInterceptor]).config(["$httpProvider",function(e){e.interceptors.unshift("AuthenticationInterceptor")}]),ba.lang.namespace("ba.auth"),ba.auth.Lib.service("BAAuthenticationProxy",["$q","$resource","$interpolate","HttpUtilsService","$http","AuthenticationConstants","BALog","Environment",function(e,t,n,o,r,i,c,a){var s=i.CAP_LOGOUT_URL,u=i.GRANT_SERVICE_URL,h=c,f=t(u,{},{getToken:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:n('Client client_id="{{clientId}}{{releaseStage ? ">" : ""}}{{releaseStage}}"')({clientId:a.get("BA_CLIENT_ID",i.DEFAULT_CLIENT_ID),releaseStage:a.get("BA_ENVIRONMENT_RELEASE_STAGE")})}}});return{logOn:function(t,n,r){var c,a;if(a=e.defer(),t||n||r){if(!t||!n)throw"Invalid Parameters passed to logOn";c={grant_type:i.PASSWORD_GRANT_TYPE,username:t,password:n},r&&(c.token=r)}else c={grant_type:i.PUBLIC_GRANT_TYPE};return f.getToken(o.queryParams(c)).$promise.then(function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise},refreshToken:function(t){var n,r;return n={grant_type:"refresh_token",refresh_token:t},r=e.defer(),f.getToken(o.queryParams(n)).$promise.then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},logOff:function(){return r.get(s).then(function(){},function(e){h.error("Failure to Log Out of CAP Platform "+e)})}}}]),ba.lang.namespace("ba.auth"),ba.auth.BAAuthenticationService=function(e,t,n,o,r,i){var c=function(){t.$emit(r.LOG_ON_SUCCESS)},a=function(e){t.$emit(r.LOCKED,e)},s=function(e,t,n){o.addTokens(e[r.ACCESS_TOKEN],e[r.REFRESH_TOKEN],e[r.ACCESS_TOKEN_EXPIRY],e[r.REFRESH_TOKEN_EXPIRY]),i.setBANGAUTH(!0,e[r.REFRESH_TOKEN_EXPIRY]),null!=n&&(n?i.setUsername(t):i.removeUsername()),o.clearPublicTokens()},u=function(e){o.addPublicTokens(e[r.ACCESS_TOKEN],e[r.REFRESH_TOKEN],e[r.ACCESS_TOKEN_EXPIRY],e[r.REFRESH_TOKEN_EXPIRY])},h=function(){t.$emit(r.LOG_OFF_SUCCESS)},f=function(e){t.$emit(r.LOG_ON_FAILED,e)},T=function(e){t.$emit(r.REFRESH_TOKEN_FAILED,e)},k=function(e){t.$emit(r.PUBLIC_TOKEN_FAILED,e)},E=function(){return!!o.getRefreshToken()},l=function(){return!o.getAccessToken()&&!!o.getRefreshToken()},A=function(){return!o.getPublicAccessToken()&&!!o.getPublicRefreshToken()},b=function(){return!!o.getPublicRefreshToken()},S=function(){i.removeBANGAUTH(),o.clearTokens(),o.clearPublicTokens()},_=function(t,u,h){var T=e.defer(),k=i.getLockedStatus(),E=k?void 0:o.getPublicAccessToken();return n.logOn(t,u,E).then(function(e){s(e,t,h),angular.isDefined(e.scope)&&(k=e.scope,k.indexOf(r.LOCK_LEVEL)>-1?(i.setLockedStatus(!0),a(e.scope)):(i.setLockedStatus(!1),c())),T.resolve(!0)})["catch"](function(e){f(e),T.reject(e)}),T.promise},v=function(){E()&&c()};return v(),{createPublicToken:function(){var t=e.defer();return n.logOn().then(function(e){u(e),t.resolve(!0)})["catch"](function(e){k(e),t.reject(e)}),t.promise},logOn:function(t,n,o,r){var i,a=e.defer(),u=function(e,t,n,o){_(e,t,n).then(function(){o.resolve(!0)})["catch"](function(e){o.reject(e)})};return t&&n||r?t&&r?(s(r,t,o),c(),a.resolve(!0)):A()?this.refreshToken()["finally"](function(){u(t,n,o,a)}):u(t,n,o,a):(i=new Error(["Username and password must be entered."]),f(i),a.reject(i)),a.promise},logOff:function(){return n.logOff()["finally"](function(){o.clearTokens(),i.removeBANGAUTH(),i.removeBAAUTHKEY(),h()})},isLoggedOn:E,isAuthenticatedAccessTokenExpired:l,isPublicAccessTokenExpired:A,hasPublicToken:b,deleteAuthenticationCookies:S,refreshToken:function(){var t=e.defer();return o.getRefreshToken()?n.refreshToken(o.getRefreshToken()).then(function(e){s(e),t.resolve(!0)})["catch"](function(e){o.clearTokens(),T(e),t.reject(e)}):o.getPublicRefreshToken()?n.refreshToken(o.getPublicRefreshToken()).then(function(e){u(e),t.resolve(!0)})["catch"](function(e){o.clearPublicTokens(),T(e),t.reject(e)}):(T(),t.reject("No public token found on attempt to refresh")),t.promise},retrieveBestAccessToken:function(){var e;return e=o.getAccessToken()?o.getAccessToken():o.getPublicAccessToken()}}},ba.auth.Lib.service("BAAuthenticationService",["$q","$rootScope","BAAuthenticationProxy","TokenService","AuthenticationConstants","BACookieService",ba.auth.BAAuthenticationService]),ba.lang.namespace("ba.auth"),ba.auth.TokenService=function(e){this.baCookieService=e},ba.auth.TokenService.prototype.addTokens=function(e,t,n,o){this.baCookieService.setAccessToken(e,n),this.baCookieService.setRefreshToken(t,o),this.baCookieService.updateCugCookieExpiryDate(o),this.baCookieService.updateNumericalIDCugExpiryDate(o)},ba.auth.TokenService.prototype.getAccessToken=function(){return this.baCookieService.getAccessToken()},ba.auth.TokenService.prototype.getRefreshToken=function(){return this.baCookieService.getRefreshToken()},ba.auth.TokenService.prototype.clearTokens=function(){this.baCookieService.removeAccessToken(),this.baCookieService.removeRefreshToken(),this.baCookieService.removeCugCookie(),this.baCookieService.removeNumericalIDCugCookie()},ba.auth.TokenService.prototype.leaveCUG=function(){this.baCookieService.removeAccessToken(),this.baCookieService.removeRefreshToken(),this.baCookieService.removePublicAccessToken(),this.baCookieService.removePublicRefreshToken(),this.baCookieService.removeCugCookie(),this.baCookieService.removeNumericalIDCugCookie()},ba.auth.TokenService.prototype.addPublicTokens=function(e,t,n,o){this.baCookieService.setPublicAccessToken(e,n),this.baCookieService.setPublicRefreshToken(t,o),this.baCookieService.updateCugCookieExpiryDate(o),this.baCookieService.updateNumericalIDCugExpiryDate(o)},ba.auth.TokenService.prototype.getPublicAccessToken=function(){return this.baCookieService.getPublicAccessToken()},ba.auth.TokenService.prototype.getPublicRefreshToken=function(){return this.baCookieService.getPublicRefreshToken()},ba.auth.TokenService.prototype.clearPublicTokens=function(){this.baCookieService.removePublicAccessToken(),this.baCookieService.removePublicRefreshToken()},ba.auth.Lib.service("TokenService",["BACookieService",ba.auth.TokenService]);
ba.lang.namespace("ba.customer"),ba.customer.Lib=angular.module("ba-customer",["ba-url","ngResource","hateoas","ba-cookie"]),ba.lang.namespace("ba.customer.Lib"),ba.customer.Lib.constant("CustomerConstants",{CUSTOMER_NOT_IDENTIFIED:"Customer could not be identified",FAILED_LOADING_LOYALTIES:"Unable to retrieve customer loyalties",FAILED_LOADING_ATTRIBUTES:"Unable to retrieve customer attributes",DEFAULT_BUSINESS_CONTEXT:"HomePage",DEFAULT_TRACKING_IDENTIFIER:"default",EC_MEMBER:"EXECUTIVE_CLUB",PREM_MEMBER:"PREMIER"}),ba.lang.namespace("ba.customer.Lib"),ba.customer.Lib.service("CustomerSummariesProxy",["$resource","$q","Environment","HateoasInterface","LoyaltiesProxy","PersonalAttributesProxy","CustomerConstants",function(e,t,r,a,n,o,s){var u=this,c=r.get("BA_REST_URL_PREFIX")+"/badotcomadapter-bdca/rs/v1/customerstatesummaries;trackingId=:trackingId;businessContext=:businessContext";return u.customerSummariesData=null,u.customerPersonalData=null,u.customerLoyaltyData=null,{getData:function(t){return u.customerSummariesData||(u.customerSummariesData=e(c,t).get().$promise),u.customerSummariesData},resetData:function(){u.customerSummariesData=null,u.customerPersonalData=null,u.customerLoyaltyData=null},getLoyaltiesProxy:function(e){return u.customerLoyaltyData||(u.customerLoyaltyData=this.getData(e).then(function(e){var r;try{r=new a(e).resource("loyalties",{},{getLoyalties:{method:"GET"}})}catch(o){return t.reject(o)}return new n(r)})["catch"](function(e){var r=e.data&&e.data.errors?e.errors:null;return t.reject(r||s.FAILED_LOADING_LOYALTIES)})),u.customerLoyaltyData},getPersonalAttributesProxy:function(e){return u.customerPersonalData||(u.customerPersonalData=this.getData(e).then(function(e){var r;try{r=new a(e).resource("personalAttributes",{},{getPersonalAttributes:{method:"GET"}})}catch(n){return t.reject(n)}return new o(r)})["catch"](function(e){var r=e.data&&e.data.errors?e.errors:null;return t.reject(r||s.FAILED_LOADING_ATTRIBUTES)})),u.customerPersonalData}}}]),ba.lang.namespace("ba.customer.Lib"),ba.customer.Lib.service("LoyaltiesProxy",[function(){return function(e){return{getLoyalties:function(){return e.getLoyalties().$promise}}}}]),ba.lang.namespace("ba.customer.Lib"),ba.customer.Lib.service("PersonalAttributesProxy",[function(){return function(e){return{getPersonalAttributes:function(){return e.getPersonalAttributes().$promise}}}}]),ba.lang.namespace("ba.customer.Lib"),ba.customer.Lib.CustomerLoginService=function(e,t,r,a,n){var o,s,u;o=this,o.constants=e,o.customerService=t,o.acceptanceRequired,o.remember_Me,o.username,this.logOn=function(e,t,c){return r.logOn(e,t,c).then(function(){o.customerService.getCustomerAttributes().then(function(t){o.acceptanceRequired=!1,o.username=e,o.remember_Me=c,o.tncBroadcast={acceptanceRequired:o.acceptanceRequired},t.customerType!==o.constants.EC_MEMBER&&t.customerType!==o.constants.PREM_MEMBER||t.registeredCustomer.ectcAcceptanceRequired!==!0||(s=a.getAccessToken(),u=a.getRefreshToken(),o.tncBroadcast={atoken:s,rtoken:u,acceptanceRequired:t.registeredCustomer.ectcAcceptanceRequired},r.logOff()),n.$broadcast("TermsAndConditionsBroadcast",o.tncBroadcast)})})},this.logOnAgain=function(e){return r.logOn(o.username,"",o.remember_Me,e)}},ba.customer.Lib.service("CustomerLoginService",["CustomerConstants","CustomerService","BAAuthenticationService","BACookieService","$rootScope",ba.customer.Lib.CustomerLoginService]),ba.lang.namespace("ba.customer.Lib"),ba.customer.Lib.provider("CustomerService",["CustomerConstants",function(e){var t,r=this,a=e.DEFAULT_BUSINESS_CONTEXT;this.setBusinessContext=function(e){a=e},this.$get=["$q","CustomerSummariesProxy","BACookieService","$rootScope",function(n,o,s,u){return o.resetData(),r.customerData=null,r.customerSummaryResult=null,t=u.$on("LOG_OFF_SUCCESS",function(){o.resetData(),r.customerData=null,r.customerSummaryResult=null}),u.$on("$destroy",t),{getCustomerAttributes:function(){var t;return r.customerSummaryResult||(t={trackingId:s.getvFirstTracking()||e.DEFAULT_TRACKING_IDENTIFIER,businessContext:a},r.customerSummaryResult=o.getData(t).then(function(a){var s,u;return a.identifiedCustomer?(s=o.getLoyaltiesProxy(t).then(function(e){return e.getLoyalties()}).then(function(e){return e.customer.registeredCustomer||{}}),u=o.getPersonalAttributesProxy(t).then(function(e){return e.getPersonalAttributes()}).then(function(e){return e.customer}),r.customerData=n.all([s,u]).then(function(e){return e.push({summary:a}),angular.extend.apply(null,e)})):r.customerData=n.reject(e.CUSTOMER_NOT_IDENTIFIED),r.customerData})["catch"](function(e){return n.reject(e)})),r.customerSummaryResult}}}]}]);
ba.lang.namespace("ba.i18n"),ba.i18n.Lib=angular.module("ba-i18n",["ba-http","ba-lang","tmh.dynamicLocale","ba-logging"]).config(["tmhDynamicLocaleProvider","Environment",function(e,t){"use strict";var n=t.get("BAA_CONTEXT_ROOT","/apps/ba-i18n");e.localeLocationPattern(n+"/lib/angular-i18n/angular-locale_{{locale}}.js")}]).run(["ResourceBundle","tmhDynamicLocale","ClientLocaleService","$rootScope","BALog","$window",function(e,t,n,a,o,r){var i=[],u=n.getLocale(),c=function(e){r.document.getElementsByTagName("html")[0].setAttribute(e,n.getLanguage())},s=a;e.loadBundleCache(),c("lang"),c("xml:lang"),s.$on("$localeChangeError",function(e,n){-1===i.indexOf(n)&&(i.push(n),t.set("en-gb"),o.info("BA-i18n: The locale file could not be loaded, or might not exist. Attempted locale: "+n))}),t.set(u)}]),ba.i18n.ResourceBundleConstants={resourceBundleLocation:"/en_resources-fa6220cc.json",defaultLocale:"en-gb"},ba.i18n.Lib.constant("ResourceBundleConstants",ba.i18n.ResourceBundleConstants),ba.i18n.ResourceBundleStatic=function(e){return{restrict:"A",scope:{key:"@",supplant:"=?"},template:"{{getValue()}}",link:function(t){t.getValue=function(){return e.getResourceTextAndSupplant(t.key,t.supplant)}}}},ba.i18n.Lib.directive("baResourceBundleStatic",["ResourceBundle",ba.i18n.ResourceBundleStatic]),ba.i18n.ResourceBundleDynamic=function(e){var t=function(t,n){return e.getResourceTextAndSupplant(t,n)},n=function(n,a){return e.hasLoaded()?t(n,a):""};return n.$stateful=!0,n},ba.i18n.Lib.filter("baResourceBundleDynamic",["ResourceBundle",ba.i18n.ResourceBundleDynamic]),ba.lang.namespace("ba.i18n"),ba.i18n.ContextCaptureProvider=function(e){var t,n=this,a={},o="'-yCfk7uH7nAIqtcXmaA5dw'";t=e.$get().document,this.setContextCapture=function(){a=t.createElement("script"),a.type="text/javascript",a.src="//d2c7xlmseob604.cloudfront.net/tracker.min.js",t.getElementsByTagName("head").item(0).appendChild(a),a.readyState?a.onreadystatechange=function(){("loaded"===a.readyState||"complete"===a.readyState)&&(a.onreadystatechange=null,n.addScript())}:a.onload=function(){n.addScript()}},this.addScript=function(){a={},a=t.createElement("script"),a.text="SmartlingContextTracker.init({orgId: "+o+"});",t.getElementsByTagName("head").item(0).appendChild(a)},this.$get=function(e){return new ba.i18n.ContextCaptureProvider(e)}},ba.i18n.Lib.provider("ContextCapture",["$windowProvider",ba.i18n.ContextCaptureProvider]),ba.i18n.ResourceBundle=function(e,t,n,a,o){var r=this;this.$q=e,this.$http=t,this.bundleCache=null,this.resourceBundleConstants=n,this.clientLocaleService=a,this.contextRoot=o,this.resourceBundleGetPromises=[],this.getResourceTextAndSupplant=function(e,t){var n,o=a.getLocale(),i=a.getCountry();return this.bundleCache?(n=r.bundleCache[e+"_"+o],n||(n=r.bundleCache[e+"_en-"+i],n||(n=r.bundleCache[e]))?t?n.replace(/#{([^{}]*)}#/g,function(e,n){var a=t[n];return"string"==typeof a||"number"==typeof a?a:"No Valid Supplant found for: "+e}):n:"Resource Not Found!"):""},this.hasLoaded=function(){return!!this.bundleCache}},ba.i18n.ResourceBundleProvider=function(){var e="";this.setContextRoot=function(t){e=t},this.$get=["$q","$http","ResourceBundleConstants","ClientLocaleService",function(t,n,a,o){return new ba.i18n.ResourceBundle(t,n,a,o,e)}]},ba.i18n.ResourceBundle.prototype.loadBundleCache=function(){var e,t=this,n=this.resourceBundleConstants.resourceBundleLocation,a=this.clientLocaleService.getLanguage();e=t.contextRoot+n.replace("en",a),t.$http.get(e,{cache:!0}).then(function(e){t.bundleCache=e.data||{},angular.forEach(t.resourceBundleGetPromises,function(e){e.promise.resolve(t.getResourceTextAndSupplant(e.key,e.supplants))})})},ba.i18n.ResourceBundle.prototype.get=function(e,t){var n=this.$q.defer();return this.bundleCache?n.resolve(this.getResourceTextAndSupplant(e,t)):this.resourceBundleGetPromises.push({promise:n,key:e,supplants:t}),n.promise},ba.i18n.Lib.provider("ResourceBundle",[ba.i18n.ResourceBundleProvider]);
ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.Lib=angular.module("ba-content-retrieval",["ba-url","ba-solr","ba-http","ba-lang","ba-logging"]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.BaContentRetrievalConstants={LPBM_ENDPOINT:"/solr/lpbm/select",LPBD_ENDPOINT:"/solr/lpbd/select",LP_ORIGIN:"lowPriceByDayAndMonth",LP_DATE_FILTER:"outbound_date",CARS_ENDPOINT:"/solr/cars/select",CARS_ORIGIN:"cars",CARS_DATE_FILTER:"pickUpDate",CARS_PACKAGES_ENDPOINT:"/solr/carPackages/select",CARS_PACKAGES_ORIGIN:"carPackages",CARS_PACKAGES_DATE_FILTER:"departureDate",CUSTOM_PRICE_HEADER_LENGTH:3,HOTELS_ENDPOINT:"/solr/mmbHotels/select",HOTELS_ORIGIN:"hotels",HOTELS_DATE_FILTER:"hotelCheckInDate",HOTEL_PACKAGES_ENDPOINT:"/solr/hotelPackages/select",HOTEL_PACKAGES_ORIGIN:"hotelPackages",HOTEL_PACKAGES_DATE_FILTER:"depDate",SPECIAL_OFFERS_ENDPOINT:"/solr/specialOffers/select",SPECIAL_OFFERS_ORIGIN:"specialOffers",SPECIAL_DATE_FILTERS:{cars:"pickUpDate",carPackages:"depDate",hotels:"checkInDate",hotelPackages:"depDate"},DATE_FILTERS:{lowPriceByDayAndMonth:"outbound_date",hotels:"hotelCheckInDate",cars:"pickUpDate",carPackages:"departureDate",hotelPackages:"depDate"},ENDPOINTS:{lpbm:"/solr/lpbm/select",lpbd:"/solr/lpbd/select",hotels:"/solr/mmbHotels/select",cars:"/solr/cars/select",carPackages:"/solr/carPackages/select",hotelPackages:"/solr/hotelPackages/select",specialOffers:"/solr/specialOffers/select"},YES:"yes",SFIELD:"departure_city_latlon",GEODIST:"geodist() asc, ",MARKET_QUERY_OBJECT:{lpbd:"departure_country_code",lpbm:"departure_country_code",hotelPackages:"marketCode",carPackages:"market",specialOffers:"marketCountryCode"}},ba.bacontentretrieval.Lib.constant("BaContentRetrievalConstants",ba.bacontentretrieval.BaContentRetrievalConstants),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.flightSelling=function(e){var t=function(e){var t=e.split("-");return t[2].substring(0,2)+"/"+t[1]+"/"+t[0].substring(2,4)},r=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+e[t]}).join("&")};return function(a){var o,n={};return a?(n.eId="111009",n.from=a.departureCode,n.to=a.destinationCode,a.departureDate&&(n.depDate=t(a.departureDate)),a.cabin?n.cabin=a.cabin:n.cabin="M",a.tripType?n.journeytype=a.tripType:n.journeytype="RT",n.source=a.source,a.adults?n.ad=a.adults:n.ad=1,a.regionCode&&(n.region=a.regionCode),o=r(n),e.formBATeamsiteURL("fx",{},o)):a}},ba.bacontentretrieval.Lib.filter("flightSellingFilter",["URLFormulationService",ba.bacontentretrieval.flightSelling]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.holidayFinder=function(e){var t=function(e){return Object.keys(e).map(function(t){return"depDate"===t?encodeURIComponent(t)+"="+e[t]:encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")};return function(r){var a,o,n,i,c={},s=["2","3","4","5"];return r?(r.starRating&&(n=r.starRating.split(","),s=s.slice(s.indexOf(n[0]))),i=s.join("!"),c.preset=!0,c.cities=r.destinationCode,c.cabin=r.cabin,c.duration=r.numNights,c.starrating=i,r.departureDate&&(o=r.departureDate.split("-"),r.sortByDate?c.depDate=o[2].substring(0,2)+"/"+o[1]+"/"+o[0].substring(2,4):c.month=parseInt(o[1])),a=t(c),e.formBATeamsiteURL("holiday-finder",{},a)):r}},ba.bacontentretrieval.Lib.filter("holidayFinderFilter",["URLFormulationService",ba.bacontentretrieval.holidayFinder]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.imgFilter=function(){return function(e){var t,r;return e?(r=e.split("/"),t="http:"===r[0]||"https:"===r[0]||"assets"===r[1]||e.match("/cms/global/")?e:"/cms/global"+e):e}},ba.bacontentretrieval.Lib.filter("imgFilter",[ba.bacontentretrieval.imgFilter]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.lowPriceFinder=function(e){var t=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")};return function(r){var a,o={};return r?(o.eId=113021,"OW"===r.tripType?o.oneway=!0:o.oneway=!1,o.cabin=r.cabin,o.destination=r.destinationCode,o.origin=r.departureCode,o.numNights=r.numNights,r.regionCode&&(o.region=r.regionCode),a=t(o),e.formBATeamsiteURL("low-price-finder",{},a)):r}},ba.bacontentretrieval.Lib.filter("lowPriceFinderFilter",["URLFormulationService",ba.bacontentretrieval.lowPriceFinder]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.urlFilter=function(e){return function(t,r,a,o){var n,i;return t?("http"===t.split("://")[0]||"https"===t.split("://")[0]?n=t:t.match(/\.page/)?(n=t.replace("/resp-","/").replace("/index.page","").replace(".page","").replace("/sites/","").replace("-en/","/").replace("/en-gb/",""),n=e.formLiveSiteURL(n,r,void 0,a)):(i=t.split("?"),t=i[0],i[1]&&(a=a?a+"&"+i[1]:i[1]),n=e.formBATeamsiteURL(t,o,a)),n):t}},ba.bacontentretrieval.Lib.filter("urlFilter",["URLFormulationService",ba.bacontentretrieval.urlFilter]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.ProductPriceModel=function(){this.modelPrice=function(e,t){var r,a,o=[];for(r=0;r<e.length;r++)a={},a.layout=t.layout,a.link=t.link,a.customPriceHeader=t.customPriceHeaders[r],a.starRating=t.starRating,a.eachWayPricing=t.eachWayPricing,a.outboundDate=e[r].outbound_date||e[r].depDate,a.inboundDate=e[r].inbound_date||e[r].arrDate,a.startDate=e[r].start_date,a.month=e[r].month_string,a.numberOfNights=e[r].number_of_nights||e[r].carDuration||e[r].duration||e[r].numberOfNights,a.tripType=e[r].trip_type,a.regionCode=e[r].region_code,a.cabin=e[r].cabin||e[r].overallCabin||e[r].cabinCode,a.departureCity=e[r].departure_city||e[r].depCityCode,a.departureAirport=e[r].departure_airport||e[r].departureCityCode||e[r].departureAirport||e[r].depAirportCode,a.departureCityName=e[r].dep_city_name||e[r].depAirportCityName||e[r].depCityName,a.arrivalCityName=e[r].arr_city_name,a.arrivalAirport=e[r].arrival_airport||e[r].destAirportCode,a.arrivalCity=e[r].arrival_city||e[r].destCityCode,a.arrivalCountryName=e[r].arrival_country_name,a.lowestPrice=e[r].lowest_price,a.currencyCode=e[r].currency_code||e[r].currencyCode,a.roundedLowestEachWayPrice=e[r].rounded_lowest_each_way_price,a.roundedLowestPrice=e[r].rounded_lowest_price,a.marketCode=e[r].marketCode,a.countryCode=e[r].countryCode,a.save=e[r].save,a.resortName=e[r].resortName,a.roomType=e[r].roomType,a.hotelCity=e[r].hotelCity,a.hotelDesc=e[r].hotelDesc,a.hotelName=e[r].hotelName,a.hotelNameCI=e[r].hotelNameCI,a.checkOutDate=e[r].checkOutDate,a.depAirportCityName=e[r].depAirportCityName,a.departureAirportTwo=e[r].depAirportCode_2_I,a.arrivalAirportOne=e[r].arrAirportCode_1_O,a.arrivalAirportNameOne=e[r].arrAirportName_1_O,a.arrivalAirportTwo=e[r].arrAirportCode_2_I,a.boardBasis=e[r].boardBasis,a.reviewRatingImg=e[r].reviewRatingImg,a.holidayFinderURL=e[r].holidayFinderURL,a.journeyTime=e[r].journeyTime,a.pickUpDate=e[r].pickUpDate,a.imgURL=e[r].imgURL,a.destinationAirportCode=e[r].destinationAirportCode||e[r].destAirportCode,a.carDepotLocation=e[r].carDepotLocation,a.extendedLocationCode=e[r].extendedLocationCode,a.market=e[r].market,a.deepLink=e[r].deepLink,a.makeModelId=e[r].makeModelId,a.carGroupIdentifier=e[r].carGroupIdentifier,a.carGroupShort=e[r].carGroupShort,a.carType=e[r].carType,a.carRentalPlan=e[r].carRentalPlan,a.carGroup=e[r].carGroup,a.carGroupDescriptionShort=e[r].carGroupDescriptionShort,a.carGroupDescription=e[r].carGroupDescription,a.carSupplier=e[r].carSupplier||e[r].carRentalCompanyName,a.dailyPrice=e[r].dailyPrice||e[r].totalPrice,a.categoryCode=e[r].categoryCode,a.destinationCountryCode=e[r].destinationCountryCode||e[r].destCityCode,a.destinationCityName=e[r].destinationCityName||e[r].destAirportCityName,a.totalPrice=e[r].totalPrice,a.ancillaryID=e[r].ancillaryID,a.departureAirportNameOne=e[r].depAirportName_1_O,a.dropOffDate=e[r].dropOffDate,a.pricePp=e[r].pricePP,a.tripAdvisorPartnerID=e[r].tripAdvisorPartnerID,a.totalRoundedPrice=e[r].totalRoundedPrice,a.hotelCityCode=e[r].hotelCityCode,a.resortId=e[r].resortId,a.isAirportHotel=e[r].isAirportHotel,a.isPackageRateOnly=e[r].isPackageRateOnly,a.hotelCheckOutDate=e[r].hotelCheckOutDate,a.hotelID=e[r].hotelID,a.hotelCheckInDate=e[r].hotelCheckInDate,a.pricePerPersonPerNight=e[r].pricePerPersonPerNight||e[r].pricePP,a.hotelDescription=e[r].hotelDescription,a.uniqueKey=e[r].uniqueKey,a.tripAdvisorReviewCount=e[r].tripAdvisorReviewCount,a.hotelCountryCode=e[r].hotelCountryCode,a.hotelImage=e[r].hotelImage,a.hotelStarRating=e[r].hotelStarRating,a.roundedHotelStarRating=e[r].roundedHotelStarRating,a.hotelStars=e[r].hotelStars,a.tripAdvisorHotelName=e[r].tripAdvisorHotelName,a.tripAdvisorGIFURL=e[r].tripAdvisorGIFURL,a.tripAdvisorReviewURL=e[r].tripAdvisorReviewURL,a.tripAdvisorRating=e[r].tripAdvisorRating,o.push(a);return o}},ba.bacontentretrieval.Lib.service("ProductPriceModel",[ba.bacontentretrieval.ProductPriceModel]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.ProductModel=function(e,t){var r=this;this.queryModel={},this.dateToISO=function(e,t){var r;return r=new Date(e),t&&(r.setDate(r.getDate()+1),r.setSeconds(r.getSeconds()-1)),r.toISOString()},this.setArrayParam=function(e,t,r){var a,o;return"object"!=typeof e&&(a=r===!0?e.split(","):e.replace(/\s/g,"").split(","),o=a.length>1?"("+t+":"+a.join(" OR "+t+":")+")":t+":"+a),o},this.setDateFilter=function(e,a){var o=[],n=a+"SearchPeriod",i=a+"StartDate",c=a+"EndDate",s="NOW",l="*",d=t.get("BA_PAGE_LOAD_DATETIME",null),u=new Date;return d&&(u=new Date(d)),e[n]&&"object"!=typeof e[n]&&o.push("NOW TO NOW/DAY+"+e[n]+"DAYS"),e[i]&&"object"!=typeof e[i]&&r.dateToISO(e[i])>u.toISOString()&&(s=r.dateToISO(e[i])),e[c]&&"object"!=typeof e[c]&&(l=r.dateToISO(e[c],!0)),(e[i]||e[c])&&o.push(s+" TO "+l),o.length>0?a+":["+o.join("] AND "+a+":[")+"]":void 0},this.generateLowPriceByDayAndMonthQueryModel=function(t,a){return t.dates={},t.outbound_dateSearchPeriod&&(t.dates.outbound_dateSearchPeriod=angular.fromJson(angular.toJson(t.outbound_dateSearchPeriod)),t.outbound_dateSearchPeriod=null),t.inbound_dateSearchPeriod&&(t.dates.inbound_dateSearchPeriod=angular.fromJson(angular.toJson(t.inbound_dateSearchPeriod)),t.inbound_dateSearchPeriod=null),t.outbound_dateEndDate&&(t.dates.outbound_dateEndDate=angular.fromJson(angular.toJson(t.outbound_dateEndDate)),t.outbound_dateEndDate=null),t.inbound_dateEndDate&&(t.dates.inbound_dateEndDate=angular.fromJson(angular.toJson(t.inbound_dateEndDate)),t.inbound_dateEndDate=null),t.inbound_dateStartDate&&(t.dates.inbound_dateStartDate=angular.fromJson(angular.toJson(t.inbound_dateStartDate)),t.inbound_dateStartDate=null),t.outbound_dateStartDate&&(t.dates.outbound_dateStartDate=angular.fromJson(angular.toJson(t.outbound_dateStartDate)),t.outbound_dateStartDate=null),r.queryModel=r.buildQueryModel(t,e.LP_ORIGIN),r.queryModel.url=e.ENDPOINTS[a],r.queryModel.coreName=a,r.queryModel},this.generateHotelsQueryModel=function(t,a){var o=this.getEndpointAndOrigin(e.HOTELS_ORIGIN,a);return t.dates={},t.hotelCheckInDateSearchPeriod&&(t.dates.hotelCheckInDateSearchPeriod=angular.fromJson(angular.toJson(t.hotelCheckInDateSearchPeriod)),t.hotelCheckInDateSearchPeriod=null),t.hotelCheckInDateStartDate&&(t.dates.hotelCheckInDateStartDate=angular.fromJson(angular.toJson(t.hotelCheckInDateStartDate)),t.hotelCheckInDateStartDate=null),t.hotelCheckInDateEndDate&&(t.dates.hotelCheckInDateEndDate=angular.fromJson(angular.toJson(t.hotelCheckInDateEndDate)),t.hotelCheckInDateEndDate=null),r.queryModel=r.buildQueryModel(t,o.origin,a),r.queryModel.url=o.endpoint,r.queryModel},this.generateHotelPackagesQueryModel=function(t,a){var o=this.getEndpointAndOrigin(e.HOTEL_PACKAGES_ORIGIN,a);return t.dates={},t.depDateSearchPeriod&&(t.dates.depDateSearchPeriod=angular.fromJson(angular.toJson(t.depDateSearchPeriod)),t.depDateSearchPeriod=null),t.depDateStartDate&&(t.dates.depDateStartDate=angular.fromJson(angular.toJson(t.depDateStartDate)),t.depDateStartDate=null),t.depDateEndDate&&(t.dates.depDateEndDate=angular.fromJson(angular.toJson(t.depDateEndDate)),t.depDateEndDate=null),r.queryModel=r.buildQueryModel(t,o.origin,a),r.queryModel.url=o.endpoint,r.queryModel},this.generateCarsQueryModel=function(t,a){var o=this.getEndpointAndOrigin(e.CARS_ORIGIN,a);return t.dates={},t.pickUpDateSearchPeriod&&(t.dates.pickUpDateSearchPeriod=angular.fromJson(angular.toJson(t.pickUpDateSearchPeriod)),t.pickUpDateSearchPeriod=null),t.pickUpDateStartDate&&(t.dates.pickUpDateStartDate=angular.fromJson(angular.toJson(t.pickUpDateStartDate)),t.pickUpDateStartDate=null),t.pickUpDateEndDate&&(t.dates.pickUpDateEndDate=angular.fromJson(angular.toJson(t.pickUpDateEndDate)),t.pickUpDateEndDate=null),r.queryModel=r.buildQueryModel(t,o.origin,a),r.queryModel.url=o.endpoint,r.queryModel},this.generateCarsPackagesQueryModel=function(t,a){var o=this.getEndpointAndOrigin(e.CARS_PACKAGES_ORIGIN,a);return t.dates={},t.departureDateSearchPeriod&&(t.dates.departureDateSearchPeriod=angular.fromJson(angular.toJson(t.departureDateSearchPeriod)),t.departureDateSearchPeriod=null),t.departureDateStartDate&&(t.dates.departureDateStartDate=angular.fromJson(angular.toJson(t.departureDateStartDate)),t.departureDateStartDate=null),t.departureDateEndDate&&(t.dates.departureDateEndDate=angular.fromJson(angular.toJson(t.departureDateEndDate)),t.departureDateEndDate=null),r.queryModel=r.buildQueryModel(t,o.origin,a),r.queryModel.url=o.endpoint,r.queryModel},this.generateSpecialOffersQueryModel=function(e){return e.hotelSOQuery?r.generateHotelsQueryModel(e.hotelSOQuery,!0):e.hotelPackagesSOQuery?r.generateHotelPackagesQueryModel(e.hotelPackagesSOQuery,!0):e.carsSOQuery?r.generateCarsQueryModel(e.carsSOQuery,!0):r.generateCarsPackagesQueryModel(e.carPackagesSOQuery,!0)},this.getEndpointAndOrigin=function(t,r){var a={};return a.endpoint=r?e.ENDPOINTS.specialOffers:e.ENDPOINTS[t],a.origin=t,a},this.buildQueryModel=function(t,a,o){var n,i,c,s,l={fq:[],link:{},customPriceHeaders:[]};l.customPriceHeaders.length=e.CUSTOM_PRICE_HEADER_LENGTH,i=o?e.SPECIAL_DATE_FILTERS[a]:e.DATE_FILTERS[a],l.coreName=o?e.SPECIAL_OFFERS_ORIGIN:a;for(s in t)if(t.hasOwnProperty(s))switch(s){case"header":l.layout=t.header;break;case"linkType":l.link.linkType=t.linkType;break;case"manualLink":l.link.manualLink=t.manualLink;break;case"sortBy":l.sort=t.sortBy;break;case"sortOrder":c=t.sortOrder;break;case"group":l.groupmain=!0,l.groupfield=t.group;break;case"geoTarget":l.geoTarget=t.geoTarget;break;case"rows":l.rows=t.rows;break;case"dates":n=r.setDateFilter(t.dates,i),n&&l.fq.push(n);break;case"eachWay":l.eachWayPricing=!0;break;case"saleOnly":l.fq.push(r.setArrayParam("Y","is_sales_fare"));break;case"boardBasis":l.fq.push('boardBasis:"'+t.boardBasis+'"');break;case"customPriceHeaderOne":l.customPriceHeaders[0]=t.customPriceHeaderOne;break;case"customPriceHeaderTwo":l.customPriceHeaders[1]=t.customPriceHeaderTwo;break;case"customPriceHeaderThree":l.customPriceHeaders[2]=t.customPriceHeaderThree;break;case"arrival_airport":l.fq.push(r.setArrayParam(t.arrival_airport,"arrival_airport"));break;case"arrivalAirport":l.fq.push(r.setArrayParam(t.arrivalAirport,"arrivalAirport"));break;case"arrival_city":l.fq.push(r.setArrayParam(t.arrival_city,"arrival_city"));break;case"destinationAirportCode":l.fq.push(r.setArrayParam(t.destinationAirportCode,"destinationAirportCode"));break;case"depAirportCode_1_O":l.fq.push(r.setArrayParam(t.depAirportCode_1_O,"depAirportCode_1_O"));break;case"depAirportCode":l.fq.push(r.setArrayParam(t.depAirportCode,"depAirportCode"));break;case"departureAirport":l.fq.push(r.setArrayParam(t.departureAirport,"departureAirport"));break;case"departure_airport":l.fq.push(r.setArrayParam(t.departure_airport,"departure_airport"));break;case"departure_city":l.fq.push(r.setArrayParam(t.departure_city,"departure_city"));break;case"departureCityCode":l.fq.push(r.setArrayParam(t.departureCityCode,"departureCityCode"));break;case"depCityCode":l.fq.push(r.setArrayParam(t.depCityCode,"depCityCode"));break;case"destAirportCode":l.fq.push(r.setArrayParam(t.destAirportCode,"destAirportCode"));break;case"destCityCode":l.fq.push(r.setArrayParam(t.destCityCode,"destCityCode"));break;case"hotelCityCode":l.fq.push(r.setArrayParam(t.hotelCityCode,"hotelCityCode"));break;case"hotelStars":l.fq.push(r.setArrayParam(t.hotelStars,"hotelStars")),"object"!=typeof t.hotelStars&&(l.starRating=t.hotelStars.replace(/\s/g,""));break;case"hotelID":l.fq.push(r.setArrayParam(t.hotelID,"hotelID"));break;case"cabinCode":l.fq.push(r.setArrayParam(t.cabinCode,"cabinCode"));break;case"duration":l.fq.push(r.setArrayParam(t.duration,"duration"));break;case"offerType":l.fq.push(r.setArrayParam(t.offerType,"offerType"));break;case"carGroup":l.fq.push(r.setArrayParam(t.carGroup,"carGroup"));break;case"lowest_price":l.fq.push(r.setArrayParam("[ "+t.lowest_price+" TO * ]","lowest_price",!0));break;case"pricePP":l.fq.push(r.setArrayParam("[ "+t.pricePP+" TO * ]","pricePP",!0));break;case"pricePerPersonPerNight":l.fq.push(r.setArrayParam("[ "+t.pricePerPersonPerNight+" TO * ]","pricePerPersonPerNight",!0));break;case"totalPrice":l.fq.push(r.setArrayParam("[ "+t.totalPrice+" TO * ]","totalPrice",!0));break;default:t[s]&&void 0!==t[s]&&"undefined"!==t[s]&&l.fq.push(s+":"+t[s])}return c&&l.sort&&(l.sort=l.sort+" "+c),l}},ba.bacontentretrieval.Lib.service("ProductModel",["BaContentRetrievalConstants","Environment",ba.bacontentretrieval.ProductModel]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.ContentRetrievalProxy=function(e,t,r,a){this.$q=e,this.$http=t,this.localeService=r,this.$timeout=a},ba.bacontentretrieval.ContentRetrievalProxy.prototype.getProxyData=function(e,t,r,a){var o={},n=this.$q.defer(),i="/content-platform/translation/"+this.localeService.getLocale(),c=this,s=[],l=1e4;return o.fq=[],-1!==e.indexOf('Content-Purpose_path:"disruption/serious event"')&&(l=3e3),e&&angular.forEach(e,function(e){o.fq.push(e)}),t?o.q=t:o.q="*",r&&(o.rows=r),a&&(o.group=!0,a.query?(angular.forEach(a.query,function(e){s.push(e)}),o["group.query"]=s):(o["group.field"]=a,o["group.main"]=!0)),this.$http({url:i,method:"GET",params:o,timeout:c.$timeout(function(){n.resolve(void 0)},l)}).then(function(e){n.resolve(e.data)})["catch"](function(){n.reject()}),n.promise},ba.bacontentretrieval.Lib.service("ContentRetrievalProxy",["$q","$http","ClientLocaleService","$timeout",ba.bacontentretrieval.ContentRetrievalProxy]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.ContentRetrievalService=function(e,t,r,a,o){var n=this;this.$q=e,this.ContentRetrievalTransformer=r,this.ContentRetrievalProxy=t,this.ClientLocaleService=a,this.log=o,this.list=[],this.addContentIdToList=function(e){n.list.push(e)},this.resetIdList=function(){n.list=[]},this.checkIdInList=function(e){return-1!==n.list.indexOf(e)?!0:!1}},ba.bacontentretrieval.ContentRetrievalService.prototype.getContentInstance=function(e){var t=this.$q.defer(),r=this,a="(Market_list:"+this.ClientLocaleService.getCountry().toUpperCase()+" OR Market_list:zzglobal)";return e&&e.fq?(e.fq.push(a),this.ContentRetrievalProxy.getProxyData(e.fq,e.q,e.rows,e.group).then(function(a){var o,n=0,i=[],c=!1;o=a.grouped?r.ContentRetrievalTransformer.transformGroupContent(a,e.group):r.ContentRetrievalTransformer.contentTransform(a),0===o.docs.length?t.reject():(angular.forEach(o.docs,function(t){r.checkIdInList(t.id)||c&&!e.batchRequest||(r.addContentIdToList(t.id),c=!0,i=i.concat(t),n++)}),r.$q.all(i).then(function(e){t.resolve({docs:e})})["catch"](function(){t.reject()}))})["catch"](function(){r.log.warn("BA_CONTENT_RETRIEVAL_002: Failed to obtain content from SOLR"),t.reject()})):t.reject(),t.promise},ba.bacontentretrieval.Lib.service("ContentRetrievalService",["$q","ContentRetrievalProxy","ContentRetrievalTransformer","ClientLocaleService","BALog",ba.bacontentretrieval.ContentRetrievalService]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.GeoService=function(e,t,r,a){this.geoLoc=null,this.environment=e,this.$http=t,this.$q=r,this.$timeout=a},ba.bacontentretrieval.GeoService.prototype.setInSession=function(e){var t=this,r=function(){var e=t.$q.defer(),r=1e3;return t.$timeout(function(){e.resolve(void 0)},r),e.promise};this.$http({method:"GET",url:"/cms/functional/includes/datastore.jsp?geo="+e,timeout:r()}).then(function(){return!0})["catch"](function(){return!1})},ba.bacontentretrieval.GeoService.prototype.setGeoLoc=function(){var e=this,t=function(){var t=e.$q.defer(),r=1e3;return e.$timeout(function(){t.resolve(void 0)},r),t.promise};return this.geoLoc=this.environment.get("BA_GEO_LOC"),this.ip=this.environment.get("BA_IP_ADDRESS"),this.geoLoc?!0:this.ip?void this.$http({method:"GET",url:"/solr/geo/safe?q=startIpNum:[*%20TO%20"+this.ip+"]AND%20endIpNum:["+this.ip+"%20TO%20*]",timeout:t()}).then(function(t){return t.data&&t.data.response&&t.data.response.docs[0]&&t.data.response.docs[0].latLon&&(e.geoLoc=t.data.response.docs[0].latLon,e.setInSession(e.geoLoc)),!0})["catch"](function(){return!0}):!1},ba.bacontentretrieval.GeoService.prototype.getGeoLoc=function(){return this.geoLoc},ba.bacontentretrieval.Lib.service("GeoService",["Environment","$http","$q","$timeout",ba.bacontentretrieval.GeoService]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.PriceRetrievalService=function(e,t,r,a,o,n,i){this.$q=e,this.SolrService=t,this.ProductPriceModel=r,this.ClientLocaleService=a,this.log=o,this.geoService=n,this["const"]=i},ba.bacontentretrieval.PriceRetrievalService.prototype.combinePricesArray=function(e){var t=[];return angular.forEach(e,function(e){angular.forEach(e,function(e){e&&t.push(e)})}),t},ba.bacontentretrieval.PriceRetrievalService.prototype.getPriceContent=function(e){var t,r=this,a=this.$q.defer();return t=r.getPricePromises(e),this.$q.all(t.prom).then(function(){t.serviceResponses.length>0?a.resolve(r.combinePricesArray(t.serviceResponses)):a.reject()})["catch"](function(){a.reject()}),a.promise},ba.bacontentretrieval.PriceRetrievalService.prototype.setGeoTarget=function(e){var t;return e.geoTarget===this["const"].YES&&(t=this.geoService.getGeoLoc(),t&&(e.sfield=this["const"].SFIELD,e.pt=t,e.sort=this["const"].GEODIST+e.sort)),e},ba.bacontentretrieval.PriceRetrievalService.prototype.getPricePromises=function(e){var t=this,r={prom:[],serviceResponses:[]};return e&&e.length>0&&angular.forEach(e,function(e,a){var o=t["const"].MARKET_QUERY_OBJECT,n=[];e=t.setGeoTarget(e),o[e.coreName]&&e.fq.push(o[e.coreName]+":*"+t.ClientLocaleService.getCountry().toUpperCase()+"*"),r.prom.push(t.SolrService.execute(e.url,"*",e.rows,e.fq,e.groupfield,e.groupmain,e.sort,"json",null,e.sfield,e.pt).then(function(o){n[a]=t.ProductPriceModel.modelPrice(o,e),r.serviceResponses[a]=n[a]})["catch"](function(){t.log.warn("BA_CONTENT_RETRIEVAL_001: Failed to obtain prices from solr")}))}),r},ba.bacontentretrieval.Lib.service("PriceRetrievalService",["$q","SolrService","ProductPriceModel","ClientLocaleService","BALog","GeoService","BaContentRetrievalConstants",ba.bacontentretrieval.PriceRetrievalService]),ba.lang.namespace("ba.bacontentretrieval"),ba.bacontentretrieval.ContentRetrievalTransformer=function(e){this.ProductModel=e},ba.bacontentretrieval.ContentRetrievalTransformer.prototype.contentTransform=function(e){var t,r=[],a={},o=this,n=[];return e&&e.response&&e.response.docs&&(t={},angular.forEach(e.response.docs,function(e){a={},a.id=e.id,a.baCustomerStatePath=e.BACustomerState_path,a.marketS=e.Market_s,a.languageS=e.language_s,a.membershipTierS=e["Membership-Tier_s"],a.membershipTypeS=e["Membership-Type_s"],a.campainPath=e.Campain_path,a.aboutProductPath=e["About-Product_path"],a.contentRankI=e["Content-Rank_i"],a.contentPurposePath=e["Content-Purpose_path"],a.aboutDestinationPath=e["About-Destination_path"],a.customerStatePath=e.CustomerState_path,a.keywordsT=e.keywords_t,a.type=e.documentType,a.countdown=e["Countdown-time"],a.content=e.content_translate,a.expires=e.Expires_dt,a.query=[],a.content&&a.content.banner&&a.content.banner.messageContent&&a.content.banner.messageContent.product&&(n=[],a.content.banner.messageContent.product.length>0?n=a.content.banner.messageContent.product:n[0]=a.content.banner.messageContent.product,angular.forEach(n,function(e){e.flightsByDay&&e.flightsByDay.productQuery&&e.flightsByDay.productQuery.lpbdQuery?a.query.push(o.ProductModel.generateLowPriceByDayAndMonthQueryModel(e.flightsByDay.productQuery.lpbdQuery,"lpbd")):e.flights&&e.flights.productQuery&&e.flights.productQuery.lpbmQuery?a.query.push(o.ProductModel.generateLowPriceByDayAndMonthQueryModel(e.flights.productQuery.lpbmQuery,"lpbm")):e.hotels&&e.hotels.productQuery&&e.hotels.productQuery.hotelQuery?a.query.push(o.ProductModel.generateHotelsQueryModel(e.hotels.productQuery.hotelQuery)):e.hotelPackages&&e.hotelPackages.productQuery&&e.hotelPackages.productQuery.hotelPackagesQuery?a.query.push(o.ProductModel.generateHotelPackagesQueryModel(e.hotelPackages.productQuery.hotelPackagesQuery)):e.cars&&e.cars.productQuery&&e.cars.productQuery.carsQuery?a.query.push(o.ProductModel.generateCarsQueryModel(e.cars.productQuery.carsQuery)):e.carPackages&&e.carPackages.productQuery&&e.carPackages.productQuery.carPackagesQuery?a.query.push(o.ProductModel.generateCarsPackagesQueryModel(e.carPackages.productQuery.carPackagesQuery)):(e.hotelSOQuery||e.hotelPackagesSOQuery||e.carsSOQuery||e.carPackagesSOQuery)&&a.query.push(o.ProductModel.generateSpecialOffersQueryModel(e))})),this.push(a)},r),t.docs=r),t},ba.bacontentretrieval.ContentRetrievalTransformer.prototype.transformGroupContent=function(e,t){var r=this,a={response:{docs:[]}};return angular.forEach(t.query,function(t){var r=e.grouped[t].doclist.docs[0];r&&r.id&&a.response.docs.push(e.grouped[t].doclist.docs[0])}),r.contentTransform(a)},ba.bacontentretrieval.Lib.service("ContentRetrievalTransformer",["ProductModel",ba.bacontentretrieval.ContentRetrievalTransformer]);
ba.lang.namespace("ba.cookies.popup"),ba.cookies.popup.Lib=angular.module("ba-cookies-popup",["ba-cookies-popup-templates","ba-i18n","ba-url","ba-modal","ba-cookie","ba-logging"]).run(["$compile","$rootScope","$document",function(o,e,i){var t=o("<div data-cookies></div>")(e);angular.element(i).find("body").prepend(t)}]),ba.lang.namespace("ba.cookies.popup"),ba.cookies.popup.BACookiePopupConstants={COOKIE_USE_OF_COOKIE_URL:"cookies-vsg"},ba.cookies.popup.Lib.constant("BACookiePopupConstants",ba.cookies.popup.BACookiePopupConstants),ba.lang.namespace("ba.cookies.popup"),ba.cookies.popup.AcceptCookiesDirective=function(o,e,i,t,a){return{restrict:"A",templateUrl:"ba-cookies-popup/templates/accept-cookies-template.html",scope:{},link:function(p){p.showCookieModal=!1,p.showBanner=!1,p.modalLoaded=!1,p.cookieAccepted=o.baCookiesAccepted(),p.cookieAcceptedDate=o.getCookieValue("Allow_BA_Cookies_Date"),p.policyUpdateDate=new Date(Date.parse("2018-05-08T09:52:00Z")),p.now=new Date(Date.now()),(!p.cookieAccepted||!p.cookieAcceptedDate||new Date(p.cookieAcceptedDate)<p.policyUpdateDate&&p.policyUpdateDate<p.now)&&(p.showBanner=!0),p.createCookie=function(e){o.setAcceptCookies(e),o.setCookie("Allow_BA_Cookies_Date",p.now,"/",!1,525600,"minutes"),p.showCookieModal=!1,p.showBanner=!1},p.cookieUrl=e.formBATeamsiteURL(i.COOKIE_USE_OF_COOKIE_URL),p.toggleModal=function(){p.showCookieModal=!p.showCookieModal,p.modalLoaded||t({method:"GET",url:p.cookieUrl}).success(function(o){var e=o.split('<div id="main-content">');e[1]&&(e=e[1].split("</section>"),e='<section><div id="main-content">'+e[0]+"</section>"),p.trustedHtml=a.trustAsHtml(e),p.modalLoaded=!0})},p.termsLink=e.formLiveSiteURL("information",null,"legal/website-terms-conditions"),p.privacyLink=e.formLiveSiteURL("information",null,"legal/privacy-policy")}}},ba.cookies.popup.Lib.directive("cookies",["BACookieService","URLFormulationService","BACookiePopupConstants","$http","$sce",ba.cookies.popup.AcceptCookiesDirective]);
angular.module("ba-cookies-popup-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-cookies-popup/templates/accept-cookies-template.html",'<div><div class="cookie-banner" ng-if="showBanner"><p class="cookie-banner-text"><span data-ba-resource-bundle-static="" data-key="cookie-banner-text-1"></span> <a data-ba-resource-bundle-static="" data-key="cookie-terms-link" href="{{termsLink}}"></a> <span data-ba-resource-bundle-static="" data-key="cookie-banner-text-2"></span> <a data-ba-resource-bundle-static="" data-key="use-of-cookies-link" class="cookie-link" tabindex="0" data-ng-click="toggleModal()" ng-keyup="$event.keyCode == 13 ? toggleModal() : null"></a> <span data-ba-resource-bundle-static="" data-key="cookie-banner-text-3"></span> <a data-ba-resource-bundle-static="" data-key="cookie-privacy-link" href="{{privacyLink}}"></a> <span data-ba-resource-bundle-static="" data-key="cookie-banner-text-4"></span></p><a role="button" tabindex="0" class="exit-icon secondary white small" ng-click="createCookie(\'accepted\')" ng-keyup="$event.keyCode == 13 ? createCookie(\'accepted\') : null" data-ba-resource-bundle-static="" data-key="cookie-continue-accept"></a></div><div class="cookie-modal" data-modal-directive="" data-show="showCookieModal"><div class="cookie-modal-div" data-ng-bind-html="trustedHtml"></div><span class="close-cookie-modal" data-icon="&#xe610;" tabindex="0" data-ng-click="toggleModal()" ng-keyup="$event.keyCode == 13 ? toggleModal() : null"></span><div class="cookie-button-container"><button class="primary" type="button" data-ng-click="createCookie(\'accepted\')" data-ba-resource-bundle-static="" data-key="cookie-continue-button"></button></div></div></div>')}]);
ba.lang.namespace("ba.datepicker"),ba.datepicker.Lib=angular.module("ba-datepicker",["ba-datepicker-templates","pasvaz.bindonce","ba-moment","ba-trap-focus","ngTouch","ba-i18n","ngAnimate"]),ba.lang.namespace("ba.datepicker"),ba.datepicker.Lib.DatepickerConstants={DATEPICKER_DAYS:"days",DATEPICKER_DAY:"day",DATEPICKER_WEEKS:"weeks",DATEPICKER_WEEK:"week",DATEPICKER_ISOWEEK:"isoweek",DATEPICKER_MONTH:"month",DATEPICKER_MONTHS:"months",DATEPICKER_SIMPLE:"simple",DATEPICKER_MULTIPLE:"multiple",DATEPICKER_TIMEFORMAT:"MMMM YYYY",DATEPICKER_DAYS_INDEX:[0,1,2,3,4,5,6]},ba.datepicker.Lib.constant("DatepickerConstants",ba.datepicker.Lib.DatepickerConstants),ba.lang.namespace("ba.datepicker"),ba.datepicker.DatepickerUtilityService=function(e,t){this.indexOfMoment=function(e,t,a){var n,i;for(n in e)if(e.hasOwnProperty(n)&&(i=e[n],t.isSame(i,a)))return n;return-1},this.isSelected=function(t,a){var n=this;return n.indexOfMoment(a,t,e.DATEPICKER_DAYS)>-1},this.buildWeek=function(t,a,n,i,o,l,s,r,h){var c,d,D=[],u=!0,g=e.DATEPICKER_ISOWEEK,m=this,p={};return n.isoWeek||(g=e.DATEPICKER_WEEK),c=t.startOf(g),angular.forEach(e.DATEPICKER_DAYS_INDEX,function(t){var g,p,E;g=c.clone().add(t,e.DATEPICKER_DAYS),E=g.month()===a,p=m.withinSelectableDateRange(g,i,o),n.filter&&(u=n.filter(g)),D.push({date:g,outboundSelected:(s||l[1]&&!s)&&E&&g.isSame(l[0]||r,e.DATEPICKER_DAYS),inboundSelected:(s||l[1]&&!s)&&E&&g.isSame(l[1]||r,e.DATEPICKER_DAYS),selected:m.isSelected(g,l)&&E,disabled:!(p&&E&&u),outOfMonth:!E}),0===h&&p&&E&&u&&(d=g,h++)}),p.days=D,p.navigateMonthStartDate=d,p.buildWeekInMonthIndex=h,p},this.withinSelectableDateRange=function(t,a,n){var i;return i=t.isBefore(a,e.DATEPICKER_DAYS)||t.isSame(a,e.DATEPICKER_DAYS),i=i&&(t.isAfter(n,e.DATEPICKER_DAYS)||t.isSame(n,e.DATEPICKER_DAYS))},this.nextDayInEnabledRange=function(t,a,n,i){var o=t.date.clone();return o.add(a,e.DATEPICKER_DAYS),this.withinSelectableDateRange(o,n,i)},this.canAddAdditionalDate=function(e,t){return e.length<t.maximumSelectableDates},this.findDayPositionInMonths=function(t,a){var n,i,o,l,s,r;for(l=a.length,n=0;l>n;n+=1)for(s=a[n].weeks.length,i=0;s>i;i+=1)for(r=a[n].weeks[i].length,o=0;r>o;o+=1)if(t.isSame(a[n].weeks[i][o].date,e.DATEPICKER_DAY)&&!a[n].weeks[i][o].disabled)return{month:n,week:i,day:o}},this.getNextVisibleDay=function(t,a,n,i){var o,l;return o=t.date,l=o.clone().add(a,e.DATEPICKER_DAYS),this.findDayPositionInMonths(l,n)||i},this.nextDayInVisibleRange=function(t,a,n,i){var o,l;return o=t.date.clone(),o.add(a,e.DATEPICKER_DAYS),l=12*(o.year()-t.date.year())+(o.month()-t.date.month()),i.month+l>=0&&i.month+l<n.length},this.isDayPresent=function(e,t,a,n){return n&&n[e]&&n[e].weeks&&n[e].weeks[t]&&n[e].weeks[t][a]},this.convertDayIndexToDate=function(e,t){return e[t.month].weeks[t.week][t.day].date},this.focusElement=function(e,a){t(function(){a[0].getElementsByClassName(e)[0].focus()},100)},this.shouldMonthMove=function(e,t,a,n){var i={left:37,right:39,enter:13,space:32},o=a===i[e]||a===i.enter||a===i.space;return"right"===e?t>0&&9999===a&&("click"===n.type||"touchend"===n.type)||o&&t>0:"left"===e?0>t&&9999===a&&("click"===n.type||"touchend"===n.type)||o&&0>t:void 0}},ba.datepicker.Lib.service("DatepickerUtilityService",["DatepickerConstants","$timeout",ba.datepicker.DatepickerUtilityService]),ba.lang.namespace("ba.datepicker"),ba.datepicker.Datepicker=function(e,t,a,n,i,o,l){return{restrict:"A",replace:!0,templateUrl:"ba-datepicker/templates/datepicker.html",scope:{firstSelectableDate:"=",lastSelectableDate:"=",model:"=ngModel",options:"=",openDatepicker:"=",isReturn:"=",userChoice:"="},link:function(s,r){var h,c,d,D,u,g,m,p,E={up:38,down:40,left:37,right:39,enter:13,space:32},f=e,k={months:1,filter:void 0,callback:void 0,maximumSelectableDates:2,sameDaySelection:!1,snaking:!1,isoWeek:!0},b={};s.language=l.getLanguage(),i.enabled(r,!1),s.highlightedDate=null,s.navigateMonthStartDate=null,s.selectableDateRangeStart=null,s.isActive=function(e,t,a){return null!==s.highlightedDate&&s.highlightedDate.month===e&&s.highlightedDate.week===t&&s.highlightedDate.day===a},s.isSnaked=function(e,t,n){if(s.model.length>0&&s.options.snaking&&a.isDayPresent(e,t,n,s.months)){if(s.isReturn)return s.highlightedDate&&a.withinSelectableDateRange(a.convertDayIndexToDate(s.months,s.highlightedDate),s.lastSelectableDate,s.selectableDateRangeStart)?s.months[e].weeks[t][n].date.isBetween(s.model[0],a.convertDayIndexToDate(s.months,s.highlightedDate),"day"):s.months[e].weeks[t][n].date.isBetween(s.model[0],s.model[1],"day");if(!s.isReturn&&s.model[1])return s.highlightedDate&&a.withinSelectableDateRange(a.convertDayIndexToDate(s.months,s.highlightedDate),s.lastSelectableDate,s.selectableDateRangeStart)?s.months[e].weeks[t][n].date.isBetween(a.convertDayIndexToDate(s.months,s.highlightedDate),s.model[1],"day"):s.months[e].weeks[t][n].date.isBetween(s.model[0],s.model[1],"day")}return!1},s.updateHighlightedDate=function(e,t,a){s.highlightedDate={month:e,week:t,day:a}},s.resetHighlightedDate=function(){angular.copy(s.highlightedDate,b),s.highlightedDate=null},s.isHighlightedDatePresent=function(){return!!s.highlightedDate},s.moveMonth=function(e,i,l){s.resetHighlightedDate(),i?(l&&i===E.space&&l.preventDefault(),a.shouldMonthMove("right",e,i,l)?(g.add(e,t.DATEPICKER_MONTH),s.srText=g.format("MMMM YYYY"),n(function(){D(),a.focusElement("next-month",r),n(function(){o.$broadcast("updateFocusableElements")},0)},500)):a.shouldMonthMove("left",e,i,l)&&(g.add(e,t.DATEPICKER_MONTH),o.$broadcast("updateFocusableElements"),s.srText=g.format("MMMM YYYY"),n(function(){D(),a.focusElement("previous-month",r),n(function(){o.$broadcast("updateFocusableElements")},0)},500))):(g.add(e,t.DATEPICKER_MONTH),D(),n(function(){o.$broadcast("updateFocusableElements")},0))},s.select=function(e,a,n,i,o,l){o&&0!==o.button&&o.keyCode!==E.enter&&o.keyCode!==E.space||e.disabled||(l||o.preventDefault(),s.isReturn?s.options.sameDaySelection?(s.model[1]=e.date,s.openDatepicker=!1):e.selected||(s.model[1]=e.date,s.openDatepicker=!1):(!s.isReturn&&s.model[1]&&e.date.isAfter(s.model[1],t.DATEPICKER_DAYS)&&s.model.pop(),s.options.sameDaySelection?(s.model[0]=e.date,s.openDatepicker=!1):e.selected||(s.model[0]=e.date,s.openDatepicker=!1)),s.options.callback&&s.options.callback(e.date))},s.keyPressed=function(e){var t;switch(!s.model[0]||s.isReturn||s.highlightedDate||(s.highlightedDate=a.findDayPositionInMonths(s.model[0],s.months)),s.model[1]&&s.isReturn&&!s.highlightedDate&&(s.highlightedDate=a.findDayPositionInMonths(s.model[1],s.months)),s.highlightedDate||(s.highlightedDate=a.findDayPositionInMonths(s.navigateMonthStartDate,s.months)),t=s.months[s.highlightedDate.month].weeks[s.highlightedDate.week][s.highlightedDate.day],e.keyCode){case E.up:u(t,-7,e);break;case E.down:u(t,7,e);break;case E.left:u(t,-1,e);break;case E.right:u(t,1,e);break;case E.enter||E.space:s.select(t,s.highlightedDate.month,s.highlightedDate.week,s.highlightedDate.day,e),e.preventDefault()}},s.$watchCollection("model",function(){d(),D()}),s.$watch("isReturn",function(){d(),D()}),s.$watch("openDatepicker",function(){a.focusElement("previous-month",r)}),s.touchSelect=function(e,t,a,i,o){n(function(){s.select(e,t,a,i,o,!0)},0)},s.escapeDatepicker=function(e){27===e.keyCode&&(s.openDatepicker=!1)},c=function(e,t){var n=a.buildWeek(e,t,s.options,s.lastSelectableDate,s.selectableDateRangeStart,s.model,s.isReturn,s.highlightedDate,m);return n.navigateMonthStartDate&&(s.navigateMonthStartDate=n.navigateMonthStartDate),m=n.buildWeekInMonthIndex,n.days},p=function(){var e,t;if(t=angular.copy(k),s.options)for(e in s.options)s.options.hasOwnProperty(e)&&(t[e]=s.options[e]);s.options=t,s.options.isoWeek?s.range=[1,2,3,4,5,6,7]:s.range=[7,1,2,3,4,5,6]},h=function(e){var a,n,i,o=[],l=e.clone().startOf(t.DATEPICKER_MONTH),r=e.clone().endOf(t.DATEPICKER_MONTH),h=[l.isoWeek(),r.isoWeek()];for(m=0,p(),s.options.isoWeek||(h=[l.week(),r.week()]),i=h[1]-h[0],0>i&&(i=53!==l.weeksInYear()&&53!==h[0]?l.weeksInYear()-h[0]+h[1]:h[1]),a=e.startOf(t.DATEPICKER_MONTH),n=0;i>=n;n+=1)o.push(c(a.clone().add(n,t.DATEPICKER_WEEKS),a.clone().month()));return{weeks:o,name:e.format(t.DATEPICKER_TIMEFORMAT)}},d=function(){var e;p(),s.resetHighlightedDate(),s.isReturn?s.model&&s.model.length>1?(s.selectableDateRangeStart=s.model[0],e=s.model[1]):s.model&&1===s.model.length&&(s.selectableDateRangeStart=s.model[0],e=s.highlightedDate&&a.withinSelectableDateRange(a.convertDayIndexToDate(s.months,s.highlightedDate),s.lastSelectableDate,s.selectableDateRangeStart)?a.convertDayIndexToDate(s.months,s.highlightedDate):s.model[0]):s.model&&s.model.length>0&&(s.selectableDateRangeStart=s.firstSelectableDate,e=s.model[0]),s.selectableDateRangeStart=s.selectableDateRangeStart||f().startOf(t.DATEPICKER_DAY),g=e?e.clone().startOf(t.DATEPICKER_MONTH):f()},D=function(){var e,a,n;for(n=[],a=s.options.months,e=0;a>e;e+=1)n.push(h(g.clone().add(e,t.DATEPICKER_MONTHS)));s.months=n,s.monthNameStyling={}},u=function(e,n,i){var o;i.preventDefault(),a.focusElement("date-instructions",r),a.nextDayInEnabledRange(e,n,s.lastSelectableDate,s.selectableDateRangeStart)&&(a.nextDayInVisibleRange(e,n,s.months,s.highlightedDate)||s.moveMonth(n>0?1:-1),o=a.getNextVisibleDay(e,n,s.months,s.highlightedDate),s.highlightedCurrentDay=e.date.clone().add(n,t.DATEPICKER_DAYS),s.srText=s.highlightedCurrentDay.format("D MMMM,YYYY")),o&&(s.highlightedDate=o,i.preventDefault())},a.focusElement("previous-month",r),d(),D()}}},ba.datepicker.Lib.directive("datepicker",["Moment","DatepickerConstants","DatepickerUtilityService","$timeout","$animate","$rootScope","ClientLocaleService",ba.datepicker.Datepicker]),ba.lang.namespace("ba.datepicker"),ba.datepicker.TouchstartOverrideDirective=function(){return{restrict:"A",scope:{touchstartCallback:"&"},link:function(e,t){t.on("touchstart",function(t){e.touchstartCallback(),t.preventDefault()})}}},ba.datepicker.Lib.directive("touchstartOverride",[ba.datepicker.TouchstartOverrideDirective]);
angular.module("ba-datepicker-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-datepicker/templates/datepicker.html",'<div id="ba-datepicker" data-ng-keydown="escapeDatepicker($event)"><div class="datepicker-inner"><div id="datepicker-open" class="screen-reader-only"><div class="screen-reader-only" aria-label="choose your travel date"></div><div class="screen-reader-only" data-ng-if="model[0]" aria-label="your selected outbound date is {{model[0].format(\'DD MMMM,YYYY\')}}"></div><div class="screen-reader-only" data-ng-if="model[1]" aria-label="your selected inbound date is {{model[1].format(\'DD MMMM,YYYY\')}}"></div></div><div class="datepicker-container" data-bindonce="" data-ng-repeat="month in months" data-ng-init="monthIndex = $index"><div role="dialog" aria-describedby="datepicker-open"><div class="datepicker-header"><div class="datepicker-title bold"><span data-ng-if="!isReturn" data-ba-resource-bundle-static="" data-key="datepickerTitleOneWay{{userChoice}}"></span> <span data-ng-if="isReturn" data-ba-resource-bundle-static="" data-key="datepickerTitleReturn{{userChoice}}"></span></div><div class="datepicker-month"><span class="month-name bold"><span>{{\'datepicker-month-\'+(month.weeks[1][0].date - 0 | date:\'M\') | baResourceBundleDynamic}}</span> {{month.weeks[1][0].date - 0 | date:\'yyyy\'}}</span> <span tabindex="0" role="button" data-ng-click="moveMonth(-1, 9999, $event)" data-ng-keydown="moveMonth(-1, $event.keyCode, $event)" aria-label="Previous Month" class="move-month previous-month"><span aria-hidden="true" data-icon="&#xe60a;"></span></span> <span tabindex="0" role="button" data-ng-click="moveMonth(1, 9999, $event)" data-ng-keydown="moveMonth(1, $event.keyCode, $event)" aria-label="Next Month" class="move-month next-month"><span aria-hidden="true" data-icon="&#xe60b;"></span></span></div></div></div><div class="datepicker-table"><div class="datepicker-table-header-container"><table class="datepicker-table-header" tabindex="-1" aria-disabled="true" aria-hidden="true"><thead><tr><th data-ng-if="language !== \'zh\'" data-ng-repeat="i in range" class="weekdays"><span>{{\'datepicker-day-\'+i | baResourceBundleDynamic | limitTo :1}}</span></th><th data-ng-if="language === \'zh\'" data-ng-repeat="i in range" class="weekdays"><span>{{\'datepicker-day-\'+i | baResourceBundleDynamic | limitTo :2}}</span></th></tr></thead></table></div><div tabindex="0" data-ng-keydown="keyPressed($event)" class="date-instructions screen-reader-only" aria-live="off">{{srText}} {{\'datepicker-instructions\' | baResourceBundleDynamic}}</div><div class="datepicker-table-dates-container"><table class="datepicker-table-dates" role="presentation"><tbody role="group" data-ng-keydown="keyPressed($event)" class="date-container"><tr data-bindonce="" data-ng-repeat="week in month.weeks" data-ng-init="weekIndex = $index" class="week"><td data-bo-class="{ \'day\': day, \'selected\': day.selected, \'outbound-selected\': day.outboundSelected, \'inbound-selected\': day.inboundSelected, \'disabled\': day.disabled, }" data-ng-repeat="day in week" data-ng-init="dayIndex = $index" data-touchstart-override="" data-touchstart-callback="touchSelect(day, monthIndex, weekIndex, dayIndex, $event)" data-ng-class="{active: isActive(monthIndex, weekIndex, dayIndex), snaked: isSnaked(monthIndex, weekIndex, dayIndex), inboundActive: isReturn && isActive(monthIndex, weekIndex, dayIndex) && !day.disabled, outboundActive: !isReturn && model.length>1 && isActive(monthIndex, weekIndex, dayIndex) && !day.disabled, \'selected-not-active\': !isReturn && day.outboundSelected && !isActive(monthIndex, weekIndex, dayIndex) && isHighlightedDatePresent()}" data-ng-mousedown="select(day, monthIndex, weekIndex, dayIndex, $event)" data-ng-mouseenter="updateHighlightedDate(monthIndex, weekIndex, dayIndex)" data-ng-mouseleave="resetHighlightedDate()" data-ng-keydown="select(day, monthIndex, weekIndex, dayIndex, $event)" class="needsclick"><div class="screen-reader-only" tabindex="-1" aria-disabled="true" aria-hidden="true" data-ng-if="day.outOfMonth || day.disabled" aria-label="date not available"></div><div tabindex="0" role="button" class="day-wrapper bold" data-ng-if="!day.outOfMonth && !day.disabled" aria-label="{{day.date.format(\'D MMMM,YYYY\')}}"><div class="screen-reader-only" aria-live="off"></div><span data-bo-text="day.date.date()" aria-hidden="true"></span></div><div tabindex="-1" class="day-wrapper bold" data-ng-if="!day.outOfMonth && day.disabled"><span data-bo-text="day.date.date()" aria-hidden="true"></span></div><div class="marker-wrapper" data-ng-if="!day.outOfMonth"><div class="day-marker" data-ng-if="day.marker" data-ng-bind-template=""></div></div></td></tr></tbody></table></div></div></div></div></div>')}]);
ba.lang.namespace("ba.filters"),ba.filters.Module=angular.module("ba-filters",["ba-currency-filters","ba-date-filters"]),ba.lang.namespace("ba.filters.currency"),ba.filters.currency.Module=angular.module("ba-currency-filters",["ngResource","ngSanitize","ba-http"]),ba.lang.namespace("ba.filters.date"),ba.filters.date.Module=angular.module("ba-date-filters",[]),ba.lang.namespace("ba.filters.currency"),ba.filters.currency.baCurrencyDescriptionFilter=function(){return function(e,r,t){return e!==r?t+" ("+r+", "+e+").":t+" ("+r+")."}},ba.filters.currency.Module.filter("baCurrencyDescription",[ba.filters.currency.baCurrencyDescriptionFilter]),ba.lang.namespace("ba.filters.currency"),ba.filters.currency.baExtendedCurrencyFilter=function(e,r){return function(t,n,a,i,c){var u,l;return null===t||void 0===t||""===t?t:(angular.isUndefined(n)&&(n=""),angular.isUndefined(a)&&(a=e.NUMBER_FORMATS.PATTERNS[1].maxFrac),l=angular.copy(e.NUMBER_FORMATS),l.GROUP_SEP=c?",":"",l.DECIMAL_SEP=".","R"===i?(l.PATTERNS[1].posSuf=" Â¤",l.PATTERNS[1].posPre="",l.PATTERNS[1].negPre="(",l.PATTERNS[1].negSuf=n?" Â¤)":"Â¤)"):1===n.length?(l.PATTERNS[1].negPre="(Â¤",l.PATTERNS[1].negSuf=")"):(l.PATTERNS[1].posSuf="",l.PATTERNS[1].posPre="Â¤ ",l.PATTERNS[1].negPre=n?"(Â¤ ":"(Â¤",l.PATTERNS[1].negSuf=")"),u=r.formatNumber(t,l.PATTERNS[1],l.GROUP_SEP,l.DECIMAL_SEP,a).replace(/\u00A4/g,r.parseHtmlEntities(n)),u.trim())}},ba.filters.currency.Module.filter("baExtendedCurrency",["$locale","UtilityService",ba.filters.currency.baExtendedCurrencyFilter]),ba.lang.namespace("ba.filters.currency"),ba.filters.currency.baCurrencyFilter=function(e,r){return function(t,n,a){var i,c,u,l,s=!0,f=e.NUMBER_FORMATS,o=!1;if(f.GROUP_SEP="",u=angular.copy(f),u.PATTERNS[1].posSuf=" Â¤",u.PATTERNS[1].posPre="",u.PATTERNS[1].negPre="(",u.PATTERNS[1].negSuf=" Â¤)",l=angular.copy(u),l.DECIMAL_SEP=",",angular.isUndefined(n))c="";else switch(n){case"USD":c="&#36;";break;case"GBP":c="&#163;";break;case"EUR":c="â¬",s=!1,o=!0;break;case"JPY":c="&#165;";break;default:c=n,s=!1}return angular.isUndefined(a)&&(a=f.PATTERNS[1].maxFrac),i=s?r.formatNumber(t,f.PATTERNS[1],f.GROUP_SEP,f.DECIMAL_SEP,a).replace(/\u00A4/g,r.parseHtmlEntities(c)):o?r.formatNumber(t,l.PATTERNS[1],l.GROUP_SEP,l.DECIMAL_SEP,a).replace(/\u00A4/g,r.parseHtmlEntities(c)):r.formatNumber(t,u.PATTERNS[1],u.GROUP_SEP,u.DECIMAL_SEP,a).replace(/\u00A4/g,r.parseHtmlEntities(c)),null==t?t:i}},ba.filters.currency.Module.filter("baCurrency",["$locale","UtilityService",ba.filters.currency.baCurrencyFilter]),ba.lang.namespace("ba.filters.currency"),ba.filters.currency.CurrencyProxy=function(e){this.$resource=e},ba.filters.currency.CurrencyProxy.prototype.getCurrencyDetails=function(e,r,t){var n="/cms/global/json/ba-currency-filter/"+r+"_resources-"+e+".json",a=this.$resource(n,{},{get:{method:"GET",errorOverride:t}});return a.get().$promise},ba.filters.currency.Module.service("CurrencyProxy",["$resource",ba.filters.currency.CurrencyProxy]),ba.lang.namespace("ba.filters.currency"),ba.filters.currency.CurrencyService=function(e,r){this.q=e,this.currencyProxy=r,this.currencyDetails={},this.error=[],this.allPromises={}},ba.filters.currency.CurrencyService.prototype.getCurrencyDetails=function(e,r){var t,n,a=this;return this.currencyDetails[e]&&this.currencyDetails[e].details?this.q.when(a.currencyDetails[e].details):(t=this.q.defer(),this.allPromises[e]||(this.allPromises[e]=[]),n=this.allPromises[e],n.push(t),this.currencyDetails[e]||(this.currencyDetails[e]={},this.currencyProxy.getCurrencyDetails(e,"en",r).then(function(r){a.currencyDetails[e].details=r,n.forEach(function(e){e.resolve(r)})})["catch"](function(r){a.currencyDetails[e]=null,n.forEach(function(e){e.reject(r)})})["finally"](function(){n=[]})),t.promise)},ba.filters.currency.Module.service("CurrencyService",["$q","CurrencyProxy",ba.filters.currency.CurrencyService]),ba.lang.namespace("ba.filters.currency"),ba.filters.currency.UtilityService=function(){},ba.filters.currency.UtilityService.prototype.formatNumber=function(e,r,t,n,a){var i,c,u,l,s,f,o,y,b,d,S=".",E=e+"",g="",P=!1,p=[];if(angular.isObject(e))return"";if(i=0>e,e=Math.abs(e),c=e===1/0,!c&&!isFinite(e))return"";if(c&&(g="â"),c||-1===E.indexOf("e")||(u=E.match(/([\d\.]+)e(-?)(\d+)/),u&&"-"===u[2]&&u[3]>a+1?e=0:(g=E,P=!0)),c||P)a>0&&1>e&&(g=e.toFixed(a),e=parseFloat(g),g=g.replace(S,n));else{if(l=(E.split(S)[1]||"").length,angular.isUndefined(a)&&(a=Math.min(Math.max(r.minFrac,l),r.maxFrac)),e=+(Math.round(+(e.toString()+"e"+a)).toString()+"e"+-a),s=(""+e).split(S),f=s[0],s=s[1]||"",y=0,b=r.lgSize,d=r.gSize,f.length>=b+d)for(y=f.length-b,o=0;y>o;o++)(y-o)%d===0&&0!==o&&(g+=t),g+=f.charAt(o);for(o=y;o<f.length;o++)(f.length-o)%b===0&&0!==o&&(g+=t),g+=f.charAt(o);for(;s.length<a;)s+="0";a&&"0"!==a&&(g+=n+s.substr(0,a))}return 0===e&&(i=!1),p.push(i?r.negPre:r.posPre,g,i?r.negSuf:r.posSuf),p.join("")},ba.filters.currency.UtilityService.prototype.parseHtmlEntities=function(e){return e.replace(/&#([0-9]{1,3});/gi,function(e,r){var t=parseInt(r,10);return String.fromCharCode(t)})},ba.filters.currency.Module.service("UtilityService",[ba.filters.currency.UtilityService]),ba.lang.namespace("ba.filters.date"),ba.filters.date.Module.filter("baLongDate",["$filter",function(e){return function(r){return e("date")(r,"mediumDate")}}]).filter("baLongDateWithDay",["$filter",function(e){return function(r){return e("date")(r,"EEE, ")+e("date")(r,"mediumDate")}}]),ba.lang.namespace("ba.filters.date"),ba.filters.date.Module.filter("baShortDate",["$filter",function(e){return function(r){return e("date")(r,"d MMM")}}]).filter("baShortDateWithDay",["$filter",function(e){return function(r){return e("date")(r,"EEE d MMM")}}]).filter("baDateDayOnly",["$filter",function(e){return function(r){return e("date")(r,"EEE d")}}]).filter("baDateMonthAndYear",["$filter",function(e){return function(r){return e("date")(r,"MMM yyyy")}}]);
ba.lang.namespace("ba.spinner"),ba.spinner.Module=angular.module("ba-spinner",["ba-spinner-templates","ngTouch","ba-i18n"]),ba.spinner.Module.config(["$locationProvider",function(n){n.html5Mode(!1)}]),ba.lang.namespace("ba.spinner"),ba.spinner.Spinner=function(n,e,a){return{restrict:"A",scope:{value:"=",min:"=",max:"=",override:"&",parentIndex:"=",label:"=",subLabel:"=?",getAriaLabel:"&"},templateUrl:"ba-spinner/templates/spinner.html",replace:!0,link:function(i,s,u){var l,r,t,b,d,o;l=angular.isUndefined(i.min)?0:parseInt(i.min,10),r=angular.isUndefined(i.max)?null:parseInt(i.max,10),t=angular.isUndefined(u.step)?1:parseInt(u.step,10),b=function(n){i.value=parseInt(n,10)},b(i.value),o=function(n,e){return"function"==typeof i.override&&i.override({newVal:n,index:i.parentIndex,optionalOverride:e})===!1},d=function(n){var e=i.value+n;return o(e,!1)?!1:angular.isNumber(l)&&l>e?(b(l),!1):angular.isNumber(r)&&e>r?(b(r),!1):void b(e)},i.ariaLabel={},i.minus=function(){d(-t),a(function(){e.$broadcast("updateStatus")},0)},i.plus=function(){d(t),a(function(){e.$broadcast("updateStatus")},0)},i.disableMinus=function(){return!!(o(i.value-t,!0)||angular.isNumber(l)&&i.value-t<l)},i.disablePlus=function(){return!!(o(i.value+t,!0)||angular.isNumber(r)&&i.value+t>r)},i.isMinusDisabled=i.disableMinus(),i.isPlusDisabled=i.disablePlus(),i.minusTab=i.isMinusDisabled?"-1":"0",i.plusTab=i.isPlusDisabled?"-1":"0",n.when(i.getAriaLabel(),function(n){i.ariaLabel.data=n||"items"}),i.$on("updateStatus",function(){i.isMinusDisabled=i.disableMinus(),i.isPlusDisabled=i.disablePlus(),i.minusTab=i.isMinusDisabled?"-1":"0",i.plusTab=i.isPlusDisabled?"-1":"0",a(function(){e.$broadcast("updateFocusableElements")},0)})}}},ba.spinner.Module.directive("spinner",["$q","$rootScope","$timeout",ba.spinner.Spinner]);
angular.module("ba-spinner-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-spinner/templates/spinner.html",'<div class="spinner"><div class="columns small-2 right-padding-zero"><span class="h1 spinner-value" data-ng-class="{\'spinner-value-zero\': value===0}" tabindex="-1" aria-live="assertive" aria-label="{{\'spinner-aria-label\' | baResourceBundleDynamic: {S1: ariaLabel.data, S2: value} }}">{{value}}</span></div><div class="columns small-5 left-padding-zero" data-ng-if="label || subLabel"><div class="p bold spinner-main-label" data-ng-if="label">{{label | baResourceBundleDynamic}}</div><div class="small-text spinner-sub-label" data-ng-if="subLabel">{{subLabel | baResourceBundleDynamic}}</div></div><div class="columns small-5"><div class="spinner-button-container"><button type="button" class="spinner-button decrease" data-ng-class="{\'disable\': isMinusDisabled}" data-type="decrease" data-ng-click="minus()" data-ng-attr-tabindex="{{minusTab}}" aria-label="{{\'minus-aria-label\' | baResourceBundleDynamic: {S1: ariaLabel.data} }}" data-icon="&#xe61a;"></button> <button type="button" class="spinner-button increase" data-ng-class="{\'disable\': isPlusDisabled}" data-type="increase" data-ng-click="plus()" data-ng-attr-tabindex="{{plusTab}}" aria-label="{{\'plus-aria-label\' | baResourceBundleDynamic: {S1: ariaLabel.data} }}" data-icon="&#xe61b;"></button></div></div></div>')}]);
ba.lang.namespace("ba.typeahead"),ba.typeahead.Lib=angular.module("ba-typeahead",["ba-logging","ba-i18n","ba-lookups","ba-auth","ba-typeahead-templates","ngSanitize","ba-auth","click-and-touch-off"]),ba.lang.namespace("ba.typeahead"),ba.typeahead.Constants={PLAN_FRAGMENT_URL:"/flights-and-holidays/flights",KEY_CODES:{up:38,down:40,enter:13,tab:9,backspace:8,escape:27,left:37,right:39},LOCATION_SERVICE_UNAVAILABLE_KEY:"typeahead-locationServiceUnavailable",WE_CANT_RECOGNIZE_KEY:"typeahead-weCantRecognise",ARIA_LABEL_LIST_EXPANDED:"typeahead-listExpandedAriaLabel",ARIA_LABEL_ARROW_UP_KEY:"typeahead-arrowUpKeyAriaLabel",ARIA_LABEL_ARROW_DOWN_KEY:"typeahead-arrowDownKeyAriaLabel",CONCUR:"CONCUR"},ba.typeahead.Lib.constant("TypeaheadConstants",ba.typeahead.Constants),ba.lang.namespace("ba.typeahead"),ba.typeahead.selectContentOnFocus=function(){return{restrict:"A",link:function(e,t){t.bind("click",function(){this.setSelectionRange(0,this.value.length)})}}},ba.typeahead.Lib.directive("selectContentOnFocus",ba.typeahead.selectContentOnFocus),ba.lang.namespace("ba.typeahead"),ba.typeahead.Typeahead=function(e,t,a){return{scope:{inputValue:"@",labelKey:"@",valueField:"@",className:"@",inputIcon:"=?",hideSuggestion:"=?",errorMessage:"=",getSuggestions:"&",suggestionSelected:"&",flightNotAvailableError:"=",disallowSelectionOnBlur:"=?",userChoice:"=",eligibilityErrorState:"=?",availabilityError:"="},restrict:"A",templateUrl:"ba-typeahead/templates/typeahead-partial.html",link:function(n,i,s){var o,l,u,d,g,r,c,p=function(){n.errorMessage="",n.suggestions=[]},h=function(e){e?e.length>0&&(n.errorMessage="",n.suggestions=e):n.suggestions=[]},b=function(e){e&&n.getSuggestions({value:e.value,next:h})},f=function(e){n.suggestionSelected(e)};n.suggestions=[],n.constants=e,o=function(e,t){return e.top<=t.top&&e.bottom>=t.bottom},l=function(e,t,a){return a>0?t.bottom-e.bottom:t.top-e.top},u=function(e,t,a,s){var u,g,r=t.getBoundingClientRect();n.suggestions[a+e]?(n.newIndex(a+e),g=i[0].querySelectorAll(".flightOptions"),u=g[a+e].getBoundingClientRect(),o(r,u)||(t.scrollTop+=l(r,u,e)),d=n.suggestions[a+e][n.valueField]):n.suggestions[a+2*e]&&n.navigate(s,a+e)},c=function(){n.setAriaLabel(g)},n.isServiceFailed=!1,n.fieldName=s.fieldName||"typeahead",n.tabIndex=s.tabIndex?parseInt(s.tabIndex):20,n.scrollTop=0,g=s.ariaLabelKey||"typeahead-defaultAriaLabel",t.get(g).then(function(e){r=n.ariaLabel=e}),n.initialListExpanded=!1,n.activeIndex=0,n.hideSuggestion=!0,n.showSuggestions=function(){return n.suggestions?(n.suggestions.length>0&&!n.initialListExpanded&&(n.setAriaLabel(e.ARIA_LABEL_LIST_EXPANDED,n.suggestions.length,r,n.suggestions[0][n.valueField]),n.initialListExpanded=!0),n.suggestions.length>0&&!n.hideSuggestion):!1},n.updateSuggestions=function(e,t){n.errorMessage="",n.eligibilityErrorState=!1,!e&&t?n.clearSelection():n.inputValue.length<15&&(b({value:n.inputValue}),n.hideSuggestion=!1)},n.setValue=function(e,t){var s;n.inputValue=e[n.valueField],f({selection:e}),p(),s=i.find("ul")[0],s.scrollTop=0,n.activeIndex=0,n.hideSuggestion=!0,n.initialListExpanded=!1,c(),"undefined"==typeof t&&a(function(){i.find("input")[0].select()},0)},n.loseFocus=function(){n.suggestions.length>0&&!n.hideSuggestion&&n.disallowSelectionOnBlur!==!0&&n.setValue(n.suggestions[0]),c()},n.clearSelection=function(){var e=i.find("ul")[0];e.scrollTop=0,n.inputValue="",f({selection:void 0}),n.activeIndex=0,n.hideSuggestion=!0,i.find("input")[0].select(),c(),n.initialListExpanded=!1},n.newIndex=function(e){n.activeIndex=parseInt(e)},n.navigate=function(t,a){var s,o=n.suggestions;if(o.length>0&&!n.hideSuggestion)switch(s=i.find("ul")[0],t.keyCode){case e.KEY_CODES.up:t.preventDefault(),u(-1,s,a,t),n.setAriaLabel(e.ARIA_LABEL_ARROW_UP_KEY,d);break;case e.KEY_CODES.down:t.preventDefault(),u(1,s,a,t),n.setAriaLabel(e.ARIA_LABEL_ARROW_DOWN_KEY,d);break;case e.KEY_CODES.enter:n.setValue(o[a],t);break;case e.KEY_CODES.tab:if(n.disallowSelectionOnBlur)n.loseFocus();else{if(t.shiftKey&&n.suggestions.length>0)return s.scrollTop=0,n.newIndex(0),t.preventDefault(),!1;n.setValue(o[a],t)}}else 0===n.suggestions.length&&n.hideSuggestion&&t.keyCode===e.KEY_CODES.tab&&n.disallowSelectionOnBlur&&(n.loseFocus(),c(),n.initialListExpanded=!1)},n.setAriaLabel=function(e,a,i,s){t.get(e,{S1:a?a:"",S2:i?i:"",S3:s?s:""}).then(function(e){n.ariaLabel=e})},n.$watch("errorMessage",function(t){"undefined"!=typeof t&&(n.isServiceFailed=t.indexOf(e.LOCATION_SERVICE_UNAVAILABLE_KEY)>=0)}),n.isConcur=function(){return n.userChoice===n.constants.CONCUR}}}},ba.typeahead.Lib.directive("typeahead",["TypeaheadConstants","ResourceBundle","$timeout",ba.typeahead.Typeahead]),ba.lang.namespace("ba.typeahead"),ba.typeahead.Embolden=function(e){return function(t,a){return a&&(t=t.replace(new RegExp("("+a+")","gi"),'<span class="autoCompleteMatch">$1</span>')),e.trustAsHtml(t)}},ba.typeahead.Lib.filter("Embolden",["$sce",ba.typeahead.Embolden]);
angular.module("ba-typeahead-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-typeahead/templates/typeahead-partial.html",'<div data-click-and-touch-off="" data-click-and-touch-off-callback="loseFocus()" data-click-and-touch-off-if="!hideSuggestion" class="typeahead-field" id="typeahead-{{fieldName}}" data-ng-class="{\'did-you-mean-error\' : (errorMessage === \'typeahead-weCantRecognise\' && suggestions.length > 0 && !isServiceFailed)}"><input type="text" name="searchEntry" data-ng-model="inputValue" data-ng-change="updateSuggestions(inputValue, \'{{inputValue}}\')" data-ng-keydown="navigate($event, activeIndex)" data-ng-required="true" autocomplete="off" id="{{fieldName}}" tabindex="{{tabIndex}}" role="textbox" class="{{className}}" data-ng-disabled="eligibilityErrorState" aria-label="{{ariaLabel}}" aria-live="polite" data-select-content-on-focus="" data-ng-class="{\'invalid-field\' : (errorMessage || availabilityError), \'invalid-field flight-error\' : (flightNotAvailableError === \'FlightNotAvailable\')}"> <label for="{{fieldName}}" aria-hidden="true">{{labelKey | baResourceBundleDynamic}} <span data-ba-resource-bundle-static="" data-key="locationPlaceHolder"></span></label> <span data-ng-if="showSuggestions()" class="search-field-arrow"></span><div class="search-bar-dropdown" data-ng-show="errorMessage || showSuggestions()" data-ng-class="{\'invalid-warning\': errorMessage}"><div role="alert" aria-live="assertive" class="dropdown-error" data-ng-if="errorMessage || isServiceFailed"><span data-ba-resource-bundle-static="" data-key="{{errorMessage}}" data-supplant="{\'S1\': inputValue}"></span></div><span role="alert" aria-live="assertive" data-ng-if="errorMessage === \'typeahead-weCantRecognise\' && suggestions.length > 0 && !isServiceFailed" data-ba-resource-bundle-static="" data-key="typeahead-didYouMean" class="did-you-mean-text"></span><ul data-ng-show="showSuggestions()" class="resultsContainer choicesContainer" tabindex="-1" role="listbox"><li role="option" data-ng-repeat="suggestion in suggestions track by $index" data-ng-class="{active: ($index === activeIndex)}" data-ng-mousedown="setValue(suggestion)" data-ng-mouseenter="newIndex($index)" data-ng-bind-html="suggestion[valueField] | Embolden: inputValue" aria-label="{{suggestions[valueField]}}" class="needsclick flightOptions"></li></ul></div></div>')}]);
ba.lang.namespace("ba.login.tsandcs"),ba.login.tsandcs.Module=angular.module("ba-login-ts-and-cs",["ba-login-ts-and-cs-templates","ba-customer","ngSanitize","ba-modal","ba-logging","ui.router"]),ba.lang.namespace("ba.login.tsandcs"),ba.login.tsandcs.loginModuleConstants={ECTC_SUMMARY_TITLE:"We've updated our Terms and Conditions",ECTC_DETAIL_TITLE:"Our new Terms and Conditions",SUMMARY_URL:"/assets/json/executive-club/terms-and-conditions-intro.json",DETAIL_URL:"/assets/json/executive-club/ec-terms-and-conditions.json",ACCEPT_URL:"/api/sc4/badotcomadapter-bdca/rs/v1/customers/acceptedterms",NG_ECTC_011:"NG_ECTC_011",NG_ECTC_012:"NG_ECTC_012"},ba.login.tsandcs.Module.constant("LoginModuleConstants",ba.login.tsandcs.loginModuleConstants),ba.lang.namespace("ba.login.tsandcs"),ba.login.tsandcs.baLoginDirective=function(t,e,n,c,o){return{restrict:"A",scope:{},transclude:!0,backdrop:"static",keyboard:!1,templateUrl:"ba-login-ts-and-cs/templates/ba-login-tc-popup.html",link:function(a){var s,i={},r=c,d={customer:{}},l=function(t){return t.subheading?t.subHeadingStyle="h3":(t.subheading="",t.subHeadingStyle="p"),t};a.isEctcAcepted=!1,a.listenToBroadcast=t.$on("TermsAndConditionsBroadcast",function(t,e){e.acceptanceRequired===!0&&(a.isEctcAcepted=e.acceptanceRequired,a.init(),i.access_token=e.atoken,i.refresh_token=e.rtoken,i.expires_in=7200,i.ba_refresh_expires_in=7200)}),a.refreshState=function(){o.go(o.current,{},{reload:!0})},a.hideModal=function(){a.showModal=!a.showModal},a.logIn=function(){e.logOnAgain(i),n.acceptEctc(d),t.$broadcast("TermsAndConditionsBroadcast",{acceptanceRequired:!1})},a.getEctc=function(){n.getEctcSummary().then(function(t){a.EctcSummary=a.assignSummary(t.bodyCopyContent.bodyCopyContainer.bodyCopyText)}),n.getEctcDetail().then(function(t){a.EctcDetail=t})},a.assignSummary=function(t){return Array.isArray(t)?angular.forEach(t,function(t){t=l(t),s=void 0===s?"<"+t.subHeadingStyle+">"+t.subheading+"</"+t.subHeadingStyle+">"+t.text:s+"<"+t.subHeadingStyle+">"+t.subheading+"</"+t.subHeadingStyle+">"+t.text}):(t=l(t),s="<"+t.subHeadingStyle+">"+t.subheading+"</"+t.subHeadingStyle+">"+t.text),s},a.contentToToggle=null,a.toggleContent=function(t,e){t===e&&(a.contentToToggle=null),(null===t||t!==e)&&(a.contentToToggle=e)},a.toggleEctcDetail=function(){a.ectcShowDetail=!a.ectcShowDetail,a.ectcShowDetail===!0?a.title=r.ECTC_DETAIL_TITLE:a.title=r.ECTC_SUMMARY_TITLE},a.init=function(){a.isEctcAcepted===!0&&(a.showModal=a.isEctcAcepted,a.ectcShowDetail=!a.isEctcAcepted,a.title=r.ECTC_SUMMARY_TITLE,a.getEctc())},a.$on("$destroy",function(){a.listenToBroadcast()})}}},ba.login.tsandcs.Module.directive("baLogintcPopup",["$rootScope","CustomerLoginService","EctcService","LoginModuleConstants","$state",ba.login.tsandcs.baLoginDirective]),ba.lang.namespace("ba.login.tsandcs"),ba.login.tsandcs.ectcService=function(t){this.ectcProxy=t},ba.login.tsandcs.ectcService.prototype.getEctcSummary=function(){return this.ectcProxy.getEctcSummary()},ba.login.tsandcs.ectcService.prototype.getEctcDetail=function(){return this.ectcProxy.getEctcDetail()},ba.login.tsandcs.ectcService.prototype.acceptEctc=function(t){return this.ectcProxy.acceptEctc(t)},ba.login.tsandcs.Module.service("EctcService",["EctcProxy",ba.login.tsandcs.ectcService]),ba.lang.namespace("ba.login.tsandcs"),ba.login.tsandcs.EctcProxy=function(t,e,n,c){this.$q=t,this.http=e,this.constants=n,this.baLog=c},ba.login.tsandcs.EctcProxy.prototype.getEctcSummary=function(){var t=this.$q.defer();return this.http({method:"GET",url:this.constants.SUMMARY_URL,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},ba.login.tsandcs.EctcProxy.prototype.getEctcDetail=function(){var t=this.$q.defer();return this.http({method:"GET",url:this.constants.DETAIL_URL,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},ba.login.tsandcs.EctcProxy.prototype.acceptEctc=function(t){var e=this.baLog,n=this.$q.defer();return this.http({method:"PUT",url:this.constants.ACCEPT_URL,data:angular.toJson(t),dataType:"json"}).then(function(t){n.resolve(t.data)},function(t){e.info("BA_HOME_ECTC_001: "+t.errors[0].reason),n.reject(t)}),n.promise},ba.login.tsandcs.Module.service("EctcProxy",["$q","$http","LoginModuleConstants","BACookieService","BALog",ba.login.tsandcs.EctcProxy]);
angular.module("ba-login-ts-and-cs-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-login-ts-and-cs/templates/ba-login-tc-details.html",'<div class="us-login-modal-terms-and-conditions"><div data-ng-repeat="pc in EctcDetail.showHideContent.showHide.paneContainer"><div class="accordion-wrapper" style="width:100%"><h3 data-ng-class="{\'accordion-closed\': (contentToToggle===null || contentToToggle!==pc), \'accordion-open\': (contentToToggle===pc)}" data-ng-click="toggleContent(contentToToggle,pc)" data-ng-bind-html="pc.heading"></h3><div class="accordion-document" data-ng-show="contentToToggle===pc"><p data-ng-bind-html="pc.paneContent.text"></p></div></div></div></div>'),$templateCache.put("ba-login-ts-and-cs/templates/ba-login-tc-popup.html",'<div data-modal-directive="" data-show="showModal" data-restrict-exit-functionality="true" class="tnc-popup" data-fixed-width="all" data-type="jumbo"><div class="content"><div data-ng-if="ectcShowDetail"><h4 class="tncBack"><a data-ng-click="toggleEctcDetail()" data-ba-resource-bundle-static="" data-key="tnc-back"></a></h4></div><h1>{{title}}</h1><p data-ng-if="!ectcShowDetail" class="tnc-confirmation"><span data-ba-resource-bundle-static="" data-key="tnc-confitmation-subheading"></span> <a data-ng-click="toggleEctcDetail()" data-ba-resource-bundle-static="" data-key="tnc-subheading"></a> <span data-ba-resource-bundle-static="" data-key="tnc-continue"></span></p><div data-ng-include="\'ba-login-ts-and-cs/templates/ba-login-tc-summary.html\'" data-ng-if="!ectcShowDetail"></div><div data-ng-include="\'ba-login-ts-and-cs/templates/ba-login-tc-details.html\'" data-ng-if="ectcShowDetail"></div><div data-ng-if="ectcShowDetail"><h4 class="tncBack"><a data-ng-click="toggleEctcDetail()" data-ba-resource-bundle-static="" data-key="tnc-back"></a></h4></div></div><div class="modal-button-container fixed-bottom hiddenOverflow"><div class="button-container"><button type="button" class="primary" data-ng-click="logIn(); hideModal()" role="button" data-ba-resource-bundle-static="" data-key="tnc-agree-login"></button> <button type="button" class="secondary tnc-agree-login" role="button" data-ng-click="refreshState();hideModal()" data-ba-resource-bundle-static="" data-key="tnc-login-later"></button></div></div></div>'),$templateCache.put("ba-login-ts-and-cs/templates/ba-login-tc-summary.html",'<div class="autoOverflow"><p data-ng-bind-html="EctcSummary" class="paneContent"></p></div>')}]);
ba.lang.namespace("ba.pageload"),ba.pageload.Lib=angular.module("ba-page-load",["ba-i18n","ba-lang","ba-page-load-templates","ngAnimate"]),ba.lang.namespace("ba.pageload"),ba.pageload.PageLoadDirective=function(){return{restrict:"AE",scope:{loadingReason:"=",largeLoadingImage:"=",smallLoadingImage:"=",merchandisingText:"=",imageAltText:"=",showPageLoad:"="},templateUrl:"ba-page-load/templates/loading-placeholder.html"}},ba.pageload.Lib.directive("baPageLoad",ba.pageload.PageLoadDirective),ba.lang.namespace("ba.flightselection"),ba.pageload.spinnerLoadDirective=function(){return{restrict:"A",scope:{heading:"=",description:"=",spinnerSize:"=",isLoading:"=",svgImg:"=?",gifImg:"=?"},templateUrl:"ba-page-load/templates/spinner-load.html",link:function(a){a.svgImg||(a.svgImg="images/ba-svg-loading-spinner.svg"),a.gifImg||(a.gifImg="images/ba-svg-loading-spinner.gif")}}},ba.pageload.Lib.directive("spinnerLoadDirective",[ba.pageload.spinnerLoadDirective]);
angular.module("ba-page-load-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-page-load/templates/loading-placeholder.html",'<div class="ba-loading" data-ng-show="showPageLoad"><h1>{{loadingReason}}</h1><div class="loading-modal"><div class="theProcessingClock"><span class="clockHandProcessing clockHourHandProcessing"></span> <span class="clockHandProcessing clockMinHandProcessing"></span></div><h2 class="merchandising-text">{{merchandisingText}}</h2><img class="loading-graphic hide-for-medium-up" data-ng-src="{{smallLoadingImage}}" alt="{{imageAltText}}"> <img class="loading-graphic show-for-medium-up" data-ng-src="{{largeLoadingImage}}" alt="{{imageAltText}}"></div></div>'),$templateCache.put("ba-page-load/templates/spinner-load.html",'<div class="loading-spinner" ng-if="isLoading"><svg ng-attr-width="{{spinnerSize}}" ng-attr-height="{{spinnerSize}}"><image data-ng-src="{{gifImg}}" xlink:href="{{svgImg}}" data-ng-href="{{svgImg}}" ng-attr-width="{{spinnerSize}}" ng-attr-height="{{spinnerSize}}" width="100" height="100" data-ng-alt="Loading spinner"></image></svg><p class="spinner-header bold">{{heading}}</p><p class="spinner-description">{{description}}</p></div>')}]);
ba.lang.namespace("ba.locale.selection.modal"),ba.locale.selection.modal.Module=angular.module("ba-locale-selection-modal",[]),ba.lang.namespace("ba.locale.selection.modal"),ba.locale.selection.modal.localeSelectionMenuComponent=function(e,o){"use strict";return{restrict:"A",scope:{onLocaleSubmit:"&?"},link:function(a){var t=e.getCountry(),l=e.getLanguage();a.localeBackups=e.localeBackups,a.user={selectedCountry:t||a.localeBackups.selectedCountry,selectedLanguage:l||a.localeBackups.selectedLanguage},a.countries=a.localeBackups.countries,a.languages=a.localeBackups.languages,a.localeChanged=!1,e.getLocaleData().then(function(e){a.countries=e.countries,a.languages=e.languages}),a.getCountryName=function(){return e.getCountryName(a.countries,a.user.selectedCountry)},a.getLanguageName=function(){return e.getLanguageName(a.languages,a.user.selectedLanguage)},a.updateLanguage=function(){var e=a.countries.filter(function(e){return e.code.toLowerCase()===a.user.selectedCountry});e.length&&e[0].defaultLang?a.user.selectedLanguage=e[0].defaultLang:a.user.selectedLanguage="en",a.updateLocale()},a.updateLocale=function(){a.user.selectedCountry!==t.toLowerCase()||a.user.selectedLanguage!==l.toLowerCase()?a.localeChanged=!0:a.localeChanged=!1},a.onLocaleSelectedKey=function(e){a.localeChanged&&13===e.keyCode&&a.onLocaleSelected()},a.onLocaleSelected=function(){a.user.selectedCountry=a.user.selectedCountry.toLowerCase(),a.user.selectedLanguage=a.user.selectedLanguage.toLowerCase(),e.setCountry(a.user.selectedCountry),e.setLanguage(a.user.selectedLanguage),(!t&&!l||a.user.selectedCountry!==t.toLowerCase()||a.user.selectedLanguage!==l.toLowerCase())&&(o.location.href="/main/home/public/"+a.user.selectedLanguage+"_"+a.user.selectedCountry),a.onLocaleSubmit&&a.onLocaleSubmit()}},templateUrl:"ba-locale-selection-modal/templates/locale-selection-menu-template.html"}},ba.locale.selection.modal.Module.directive("localeSelectionMenuComponent",["LocaleSelectionModalService","$window","$filter",ba.locale.selection.modal.localeSelectionMenuComponent]),ba.lang.namespace("ba.locale.selection.modal"),ba.locale.selection.modal.localeSelectionModalComponent=function(e,o){"use strict";return{restrict:"A",scope:{forceDisplayModal:"=",clickDisplayModal:"="},link:function(a){var t=e.getCountry(),l=e.getLanguage();a.localeBackups=e.localeBackups,a.user={selectedCountry:t||a.localeBackups.selectedCountry,selectedLanguage:l||a.localeBackups.selectedLanguage},a.countries=a.localeBackups.countries,a.languages=a.localeBackups.languages,!a.forceDisplayModal&&!a.clickDisplayModal&&t&&l?a.displayLocaleModal=!1:(a.displayLocaleModal=!0,e.getLocaleData().then(function(e){a.countries=e.countries,a.languages=e.languages})),a.updateLanguage=function(){var e=a.countries.filter(function(e){return e.code.toLowerCase()===a.user.selectedCountry});e.length&&e[0].defaultLang?a.user.selectedLanguage=e[0].defaultLang:a.user.selectedLanguage="en"},a.closeModal=function(){a.displayLocaleModal=!1,a.clickDisplayModal=!1},a.onLocaleSelected=function(){a.displayLocaleModal=!1,a.user.selectedCountry=a.user.selectedCountry.toLowerCase(),a.user.selectedLanguage=a.user.selectedLanguage.toLowerCase(),e.setCountry(a.user.selectedCountry),e.setLanguage(a.user.selectedLanguage),a.clickDisplayModal&&(a.clickDisplayModal=!1),(!t&&!l||a.user.selectedCountry!==t.toLowerCase()||a.user.selectedLanguage!==l.toLowerCase())&&(o.location.href="/main/home/public/"+a.user.selectedLanguage+"_"+a.user.selectedCountry)}},templateUrl:"ba-locale-selection-modal/templates/locale-selection-modal-template.html"}},ba.locale.selection.modal.Module.directive("localeSelectionModalComponent",["LocaleSelectionModalService","$window","$filter",ba.locale.selection.modal.localeSelectionModalComponent]),ba.lang.namespace("ba.locale.selection.modal"),ba.locale.selection.modal.LocaleSelectionModalService=function(e,o,a,t,l,n){this.$http=o,this.$q=e,this.BACookieService=a,this.ClientLocaleService=t,this.resourceBundle=l,this.country=t.getCountry(),this.language=t.getLanguage(),this.SITE_PREFERENCES_FILE="/php/siteLocalePref.json",this.localeBackups={selectedCountry:"gb",countries:[{code:"gb",name:"United Kingdom"}],selectedLanguage:"en",languages:[{code:"en",name:"English"}]},this.sortFunction=function(e,o){return e.name<o.name?-1:e.name>o.name?1:0},this.log=n},ba.locale.selection.modal.LocaleSelectionModalService.prototype.getLocaleData=function(){var e,o={},a=this.$q.defer(),t=this;return t.$http.get(t.SITE_PREFERENCES_FILE).success(function(l){l.countryList&&l.languageList?t.resourceBundle.get("languageList").then(function(n){e={},n.forEach(function(o){e[Object.keys(o)[0].toLowerCase()]=o[Object.keys(o)[0]]}),o.languages=l.languageList.map(function(o){return e[o.code]?{name:e[o.code],code:o.code}:void 0}),o.languages=o.languages.filter(function(e){return e&&e.name}),o.languages.sort(t.sortFunction),t.resourceBundle.get("countryList").then(function(n){e={},n.forEach(function(o){e[Object.keys(o)[0]]=o[Object.keys(o)[0]]}),o.countries=l.countryList.map(function(o){return e[o.code]?{name:e[o.code],code:o.code,defaultLang:o.defaultLang||""}:void 0}),o.countries=o.countries.filter(function(e){return e&&e.name}),o.countries.sort(t.sortFunction),a.resolve(o)})}):(t.log.error("BA_LOCALE_SELECTION_MODAL_002: SITE_PREFERENCES_FILE had invalid country and language content"),a.reject())})["catch"](function(){t.log.info("BA_LOCALE_SELECTION_MODAL_001: failed to get SITE_PREFERENCES_FILE"),a.reject()}),a.promise},ba.locale.selection.modal.LocaleSelectionModalService.prototype.getCountry=function(){return this.country},ba.locale.selection.modal.LocaleSelectionModalService.prototype.getLanguage=function(){return this.language},ba.locale.selection.modal.LocaleSelectionModalService.prototype.getCountryName=function(e,o){var a=e.filter(function(e){return e.code.toLowerCase()===o});return a[0].name},ba.locale.selection.modal.LocaleSelectionModalService.prototype.getLanguageName=function(e,o){var a=e.filter(function(e){return e.code.toLowerCase()===o});return a[0].name},ba.locale.selection.modal.LocaleSelectionModalService.prototype.setCountry=function(e){this.BACookieService.setCountryOfResidence(e)},ba.locale.selection.modal.LocaleSelectionModalService.prototype.setLanguage=function(e){this.BACookieService.setLanguageCode(e)},ba.locale.selection.modal.Module.service("LocaleSelectionModalService",["$q","$http","BACookieService","ClientLocaleService","ResourceBundle","BALog",ba.locale.selection.modal.LocaleSelectionModalService]);
angular.module("ba-locale-selection-modal-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-locale-selection-modal/templates/locale-selection-menu-template.html",'<div class="language-country-menu"><div class="menu-locale-header"><div class="menu-locale-ba-logo"><img data-ng-src="images/ba_speedmarque.png" width="86" height="22" alt="British Airways logo"></div></div><div class="menu-locale-centre"><img class="menu-country-flag" data-ng-src="/cms/global/assets/images/Wherewefly/routemaps2010/flags/24/{{user.selectedCountry}}.png" alt="{{ getCountryName() }}"><p class="menu-locale-name">{{ getCountryName() }} - {{ getLanguageName() }}</p><form data-ng-submit="" class="row content-wrapper"><div class="language-country-menu-form"><div class="select-wrap"><select tabindex="0" id="countryCode" name="countryCode" ng-model="user.selectedCountry" data-ng-change="updateLanguage()" aria-required="true"><option ng-repeat="country in countries track by $index" ng-selected="country.code.toLowerCase() === user.selectedCountry.toLowerCase()" value="{{country.code.toLowerCase()}}">{{country.name}}</option></select><label for="countryCode" data-ba-resource-bundle-static="" data-key="localeModalCountry"></label></div><div class="select-wrap"><select tabindex="0" id="languageCode" name="languageCode" ng-model="user.selectedLanguage" data-ng-change="updateLocale()" aria-required="true"><option ng-repeat="language in languages track by $index" ng-selected="language.code.toLowerCase() === user.selectedLanguage.toLowerCase()" value="{{language.code.toLowerCase()}}">{{language.name}}</option></select><label for="languageCode" data-ba-resource-bundle-static="" data-key="localeModalLanguage"></label></div></div></form><button tabindex="0" class="primary medium" type="button" data-ng-click="onLocaleSelected()" data-ng-keyup="onLocaleSelectedKey($event)" data-ba-resource-bundle-static="" data-key="localeMenuButton"></button></div><div class="menu-locale-footer"></div></div>'),$templateCache.put("ba-locale-selection-modal/templates/locale-selection-modal-template.html",'<div ng-show="clickDisplayModal" data-modal-directive="" data-show="displayLocaleModal" data-on-closing="closeModal()" data-restrict-exit-functionality="true" class="language-country-modal" data-close-icon="true"><p data-ba-resource-bundle-static="" data-key="localeModalSelectionText"></p><form data-ng-submit="" class="row content-wrapper"><div class="language-country-form"><div class="select-wrap"><select class="inverted" id="countryCode" name="countryCode" ng-model="user.selectedCountry" data-ng-change="updateLanguage()" aria-required="true" aria-describedby="countryLabel"><option ng-repeat="country in countries track by $index" ng-selected="country.code.toLowerCase() === user.selectedCountry.toLowerCase()" value="{{country.code.toLowerCase()}}">{{country.name}}</option></select><label for="countryCode" id="countryLabel" data-ba-resource-bundle-static="" data-key="localeModalCountry"></label></div><div class="select-wrap"><select class="inverted" id="languageCode" name="languageCode" ng-model="user.selectedLanguage" aria-required="true" aria-describedby="languageLabel"><option ng-repeat="language in languages track by $index" ng-selected="language.code.toLowerCase() === user.selectedLanguage.toLowerCase()" value="{{language.code.toLowerCase()}}">{{language.name}}</option></select><label for="languageCode" id="languageLabel" data-ba-resource-bundle-static="" data-key="localeModalLanguage"></label></div></div></form><div data-ng-if="clickDisplayModal" class="language-country-footer"><button class="primary" type="button" ng-click="onLocaleSelected()" data-ba-resource-bundle-static="" data-key="localeModalButton"></button></div><div data-ng-if="!clickDisplayModal" class="language-country-footer-full"><p data-ng-bind-html="\'localeModalTermsText\' | baResourceBundleDynamic: { S1: termsLink, S2: privacyLink, S3: cookiesLink }"></p><button class="primary" type="button" ng-click="onLocaleSelected()" data-ba-resource-bundle-static="" data-key="localeModalButton"></button></div></div>')}]);
ba.lang.namespace("ba.timeout"),ba.timeout.Lib=angular.module("ba-timeout",["ba-i18n","ba-lang","ba-timeout-main","ba-modal"]),ba.lang.namespace("ba.timeout"),ba.timeout.Module=angular.module("ba-timeout-main",["ba-timeout-templates"]),ba.lang.namespace("ba.timeout"),ba.timeout.TimeoutDirective=function(t){return{restrict:"A",scope:{timeoutType:"=",warningTimeLeft:"=",returnLink:"=",returnText:"="},templateUrl:"ba-timeout/templates/ba-timeout.html",link:function(e){e.showSeconds=!0,e.$watch("warningTimeLeft",function(){var t=parseInt(e.warningTimeLeft);isNaN(t)||1!==t?e.showSeconds=!0:e.showSeconds=!1}),e.returnToBaHome=function(){t.location=e.returnLink}}}},ba.timeout.Module.directive("baTimeout",["$window",ba.timeout.TimeoutDirective]);
angular.module("ba-timeout-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-timeout/templates/ba-timeout.html",'<div data-modal-directive="" data-cta-text="true" data-message-description="{{\'timeout-pageWillTimeoutButtonText\' | baResourceBundleDynamic}}" data-show="timeoutType===\'WARNING\'" data-restrict-exit-functionality="true" class="ba-timeout-warning"><div class="text-area"><div data-ba-resource-bundle-static="" data-key="timeout-pageWillTimeout" class="sorry-timed-out bold"></div><div class="sorry-warning-text small-text"><span data-ba-resource-bundle-static="" data-key="timeout-pageWillTimeoutText1"></span> <span class="sorry-warning-text-time bold"><span>{{warningTimeLeft}}</span> <span data-ba-resource-bundle-static="" data-key="timeout-pageWillTimeoutSecond" ng-if="showSeconds===false"></span> <span data-ba-resource-bundle-static="" data-key="timeout-pageWillTimeoutSeconds" ng-if="showSeconds===true"></span></span> <span data-ba-resource-bundle-static="" data-key="timeout-pageWillTimeoutText2"></span></div></div></div><div data-modal-directive="" data-cta-text="true" data-message-description="{{\'timeout-buttonBAHomePage\' | baResourceBundleDynamic}}" data-callback-function="returnToBaHome()" data-show="timeoutType!==\'WARNING\'" data-restrict-exit-functionality="true" class="ba-timeout-finished"><div class="text-area"><div data-ba-resource-bundle-static="" data-key="timeout-timedOut" class="sorry-timed-out bold"></div><div data-ba-resource-bundle-static="" data-key="timeout-timedOutText" class="sorry-timed-out-text small-text"></div></div></div>')}]);
ba.lang.namespace("ba.submit.html.form"),ba.submit.html.form.Lib=angular.module("ba-submit-html-form",["ui.router","ba-submit-html-form-templates","ba-i18n","ba-lang","ba-logging","ba-cookie","ipCookie","ba-moment"]),ba.lang.namespace("ba.submit.html.form"),ba.submit.html.form.submitFormDirective=function(m,t){return{restrict:"A",replace:!0,templateUrl:"ba-submit-html-form/templates/ba-submit-form.html",scope:{},link:function(i,o){var b;b=m.$on("form.submit",function(m,a){i.formData=a,t(function(){o[0].submit()}),i.$on("$destroy",b)})}}},ba.submit.html.form.Lib.directive("submitFormDirective",["$rootScope","$timeout",ba.submit.html.form.submitFormDirective]);
angular.module("ba-submit-html-form-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-submit-html-form/templates/ba-submit-form.html",'<form action="{{ formData.action }}" method="POST"><div data-ng-repeat="(key,val) in formData.params"><input type="hidden" name="{{ key }}" value="{{ val }}"></div></form>')}]);
ba.lang.namespace("ba.analytics"),ba.analytics.Module=angular.module("ba-analytics",["ui.router","ba-http","ba-cookie","ba-title","ba-customer","ba-auth"]),ba.analytics.Module.run(["$rootScope","$window","$location","$state","analytics","$timeout",function(a,t,e,n,i,r){var o=n.get(),s=o.length>0&&!(1===o.length&&"^"===o[0].url&&""===o[0].name),c=a;s||r(function(){i.trackPage(t.location.pathname+"#"+e.url())},0),c.$on("$stateChangeSuccess",function(){i.setCustomDimensions("Page",{}),r(function(){i.trackVirtualPage(t.location.pathname+"#"+e.url())},0)})}]),ba.lang.namespace("ba.analytics"),ba.analytics.Module.constant("BaAnalyticsConstants",{TRACKING_ID:"trackingId",SESSION_ID:"sessionId",WEBDATA_AWS_URL:"WEBDATA_AWS_URL",DATA_ANALYTICS:"data-analytics-data",PAGE_NAME:"page_name",PAGENAME:"pagename",DEVICE:"device",DEVICEMODEL:"devicemodel",USERLOCALTIME:"userlocaltime",USERLOCALTIME_UTC:"userlocaltime_utc",V1ST:"v1st",LAST_RECORDED_DATALAYER_STORAGE:"lastRecordedDataLayer",BA_SESSION_ID:"ba_client_sessionId",CLICK:"C",IMPRESSION:"I",EVENT_TYPE:"eventType",REDIRECT_HREF:"redirectHref",ADOBE_ID:"adobeId",AMCV_PARAM:"AMCV_718D3E2F59A96D3B0A495C46%40AdobeOrg",ERROR:"error",ANCHOR:"A",BUTTON:"button",CAMPAIGN:"campaign",IPADDRESS:"IPAddress",WEBDATA_ANALYTICS_GRANT_ERROR:"WEBDATA_ANALYTICS_001: unauthorised user, trackingId/URL not available",WEBDATA_ANALYTICS_RECORDS_ERROR:"WEBDATA_ANALYTICS_002: unauthorised user",GRANT_URL:"/grant",RECORDS_URL:"/streams/webdatastream/records",BRAND_KEY:"brand",BRAND_VALUE:"BA",PLATFORM_KEY:"platform",PLATFORM_VALUE:"Desktop site: Responsive",LOGINTYPE:{DEFAULT:"public",EXECUTIVE_CLUB:"execclub",PREMIER:"premier",BARC:"barc"},TIER:{DEFAULT:"",EXECUTIVE_BLUE:"blue",EXECUTIVE_BRONZE:"bronze",EXECUTIVE_SILVER:"silver",EXECUTIVE_GOLD:"gold",PREMIER:"premier"}}),ba.lang.namespace("ba.analytics"),ba.analytics.Module.directive("analyticsTrigger",["analytics",function(a){var t=function(a){var t=["a:","button:","button:button","button:submit","input:button","input:submit"];return t.indexOf(a.tagName.toLowerCase()+":"+(a.type||""))>=0},e=function(a){return t(a)?a.innerText||a.value:a.id||a.name||a.tagName};return{restrict:"A",link:function(t,n,i){var r=i.analyticsTrigger;r&&angular.element(n[0]).bind(r,function(){var r=i.analyticsEventName||e(n[0]),o={};i.analyticsData&&angular.extend(o,t.$eval(i.analyticsData)),a.trackEvent(r,o)})}}}]),ba.analytics.Module.directive("analyticsCustomDimensions",["analytics",function(a){return{restrict:"AE",scope:{dimensions:"=dimensions"},link:function(t,e,n){var i=n.lifetime;i&&t.dimensions&&a.setCustomDimensions(i,t.dimensions)}}}]),ba.lang.namespace("ba.analytics"),ba.analytics.Module.directive("analyticsTagman",["TagMan",function(a){return{restrict:"EA",scope:{tagmanParams:"=",tagmanSiteId:"@"},link:function(t){a.track(t.tagmanParams,!1,t.tagmanSiteId)}}}]),ba.lang.namespace("ba.analytics"),ba.analytics.ClickEventAnalytics=function(a,t,e){var n=function(a){return a.attr(t.DATA_ANALYTICS)?a.scope().$eval(a.attr(t.DATA_ANALYTICS)):null};return{link:function(i,r){r.on("click",function(i){var r,o=i.target.tagName,s=[t.ANCHOR,t.BUTTON];-1!==s.indexOf(o)&&(r=n(angular.element(i.target)),null!==r&&(i.preventDefault(),r[t.PAGENAME]=e.dataLayer?e.dataLayer.pagename:null,r[t.DEVICE]=e.dataLayer?e.dataLayer.device:null,r[t.DEVICEMODEL]=e.dataLayer?e.dataLayer.devicemodel:null,r[t.USERLOCALTIME_UTC]=e.dataLayer?e.dataLayer.userlocaltime_utc:null,r[t.USERLOCALTIME]=e.dataLayer?e.dataLayer.userlocaltime:null,r[t.REDIRECT_HREF]=i.target.href,a.sendAnalyticsData({eventType:t.CLICK,request:r})))})}}},ba.analytics.Module.directive("clickEventAnalytics",["AnalyticsWebdataService","BaAnalyticsConstants","$window",ba.analytics.ClickEventAnalytics]),ba.lang.namespace("ba.analytics"),ba.analytics.EventListener=function(a,t,e,n,i,r){function o(a){var t,e,n,i={};return null!=a?(t=decodeURIComponent(a.slice(a.indexOf("?")+1)),e=t.split("&"),e.length>1&&e.forEach(function(a){n=a.split("=",2),i[n[0]]=n[1]}),i):void 0}return{link:function(){t.$on("impressionTracking",function(){i(function(){var t,e=r.dataLayer.pageurl?r.dataLayer.pageurl:null,i=o(e);t=r.dataLayer,t[n.CAMPAIGN]=i,a.sendAnalyticsData({eventType:n.IMPRESSION,request:t})},4e3)})}}},ba.analytics.Module.directive("eventListener",["AnalyticsWebdataService","$rootScope","$location","BaAnalyticsConstants","$timeout","$window",ba.analytics.EventListener]),ba.lang.namespace("ba.analytics"),ba.analytics.AnalyticsProvider=function(){var a=!0,t={Page:"Page",Session:"Session",Visitor:"Visitor"},e={knownHandlers:{trackPage:[],trackVirtualPage:[],trackEvent:[],setCustomDimensions:[],beginTransaction:[],addTransactionItem:[],endTransaction:[]},customDimensionLifetime:t,globalDisable:function(){a=!1},globalEnable:function(){a=!0}},n=function(n){var i={customDimensionLifetime:t,disable:function(){a=!1},enable:function(){a=!0}};return angular.forEach(e.knownHandlers,function(t,r){i[r]=function(){var t=arguments,i=[];return a?(angular.forEach(e.knownHandlers[r],function(a){i.push(n.when(a.apply(this,t)))},this),n.all(i)):n.reject("Attempting to track with analytics when analytics is disabled")}}),i};return angular.forEach(e.knownHandlers,function(a,t){var n="register"+t[0].toUpperCase()+t.slice(1)+"Handler";e[n]=function(){e.knownHandlers[t].push(arguments[0])}}),e.$get=["$q",function(a){return n(a)}],e},ba.analytics.Module.provider("analytics",ba.analytics.AnalyticsProvider),ba.lang.namespace("ba.analytics"),ba.analytics.Module.provider("TagMan",function(){var a=3,t="britishairways",e=!1;return{disable:function(){e=!0},enable:function(){e=!1},$get:["$window",function(n){return{track:function(i,r,o){var s,c,l;e||i&&(o=o||a,r?angular.extend(n.tmParam,i):n.tmParam=i,s=n.document,c=s.createElement("script"),c.async=!0,c.type="text/javascript",c.src="//sec.levexis.com/clients/"+t+"/"+o+".js",c.tagman="st="+ +new Date+"&c="+t+"&sid="+o,l=s.getElementsByTagName("script")[0],l.parentNode.insertBefore(c,l))}}}]}}),ba.lang.namespace("ba.analytics"),ba.analytics.AnalyticsWebdataProxy=function(a,t,e,n){this.$http=a,this.baAnalyticsConstants=t,this.aws_URL=e.get(this.baAnalyticsConstants.WEBDATA_AWS_URL),this.$q=n},ba.analytics.AnalyticsWebdataProxy.prototype.getAuthenticationToken=function(a){var t=this.$q.defer();return void 0!==this.aws_URL?this.$http({method:"POST",url:this.aws_URL+this.baAnalyticsConstants.GRANT_URL,headers:{"Content-Type":"application/json"},data:a,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}):(t.reject(this.baAnalyticsConstants.WEBDATA_ANALYTICS_URL_ERROR),t.promise)},ba.analytics.AnalyticsWebdataProxy.prototype.sendWebdataAnalyticsData=function(a,t,e){var n=this.$q.defer();return void 0!==this.aws_URL?this.$http({method:"PUT",url:this.aws_URL+this.baAnalyticsConstants.RECORDS_URL,headers:{"Content-Type":"application/json",Authorization:t,"x-api-key":e},data:a,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}):(n.reject(this.baAnalyticsConstants.WEBDATA_ANALYTICS_URL_ERROR),n.promise)},ba.analytics.Module.service("AnalyticsWebdataProxy",["$http","BaAnalyticsConstants","Environment","$q",ba.analytics.AnalyticsWebdataProxy]),ba.lang.namespace("ba.analytics"),ba.analytics.AdobeDefaultTags=function(a,t,e,n,i,r){this.get=function(){return{Log:"1",v1stTracking:n.getvFirstTracking(),language:i.getLanguage(),country:i.getCountry(),logintype:n.getLoginType(),tier:n.getExecClubTier(),Timestamp:(new Date).getTime(),hostname:a.host(),protocol:a.protocol(),hardcodedname:r.getTitleFromState(),pageid:r.getPageIdFromState(),dt:t[0].title,dr:t[0].referrer,cb:(new Date).getTime(),sw:e.screen.width,sh:e.screen.height,cd:e.screen.colorDepth}}},ba.analytics.Module.service("AdobeDefaultTags",["$location","$document","$window","BACookieService","ClientLocaleService","PageTitle",ba.analytics.AdobeDefaultTags]),ba.lang.namespace("ba.analytics"),ba.analytics.Module.service("AnalyticsTrackingService",["$window","$location","$document","ClientLocaleService","PageTitle","$rootScope","BaAnalyticsConstants","CustomerService","BAAuthenticationService","BACookieService",function(a,t,e,n,i,r,o,s,c,l){var u,d;return d="undefined"!=typeof a.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?"mobile":"DESKTOP",{init:function(t){u||(t||(t={}),t.referrer=a.dataLayer&&a.dataLayer.referrer?a.dataLayer.referrer:e[0].referrer,a.dataLayer=t,u=!0)},setAttribute:function(t,e,n){if(!u)throw Error("Attempted to set attribute before initialising analytics tracking service");(a.dataLayer&&!a.dataLayer[t]&&n||!n)&&(a.dataLayer[t]=e)},triggerEvent:function(t){if(!a.Bootstrapper)throw Error("Attempted to trigger an event before Ensighten bootstrapped");a.Bootstrapper.ensEvent.trigger(t)},clearDataLayer:function(){a.dataLayer={}},setAndTrigger:function(t,e,n){if(!u)throw Error("Attempted to set attribute before initialising analytics tracking service");n?angular.extend(a.dataLayer,e):a.dataLayer=e,this.triggerEvent(t)},setGlobalAttributes:function(){var e=l.getCookieValue("loginType"),g=l.getCookieValue("execTier");if(!u)throw Error("Attempted to set Global Attributes before initialising analytics tracking service");a.dataLayer.language=n.getLanguage(),a.dataLayer.country=n.getCountry(),a.dataLayer.userlocaltime=(new Date).getTime(),a.dataLayer.hostname=t.host(),a.dataLayer.pagetitle=i.getTitleFromState(),a.dataLayer.pageurl=t.absUrl(),a.dataLayer.domain=t.host(),a.dataLayer.device=d,this.setAttribute(o.BRAND_KEY,o.BRAND_VALUE,!0),this.setAttribute(o.PLATFORM_KEY,o.PLATFORM_VALUE,!0),r.$emit("impressionTracking"),c.isLoggedOn()?e&&"public"!==e?(a.dataLayer.logintype=e,a.dataLayer.tier=g):s.getCustomerAttributes().then(function(t){a.dataLayer.logintype=o.LOGINTYPE[t.customerType]||o.LOGINTYPE.DEFAULT,a.dataLayer.tier=o.TIER[t.loyaltyAccountDetails.tierLevel]||o.TIER.DEFAULT})["catch"](function(){a.dataLayer.logintype=o.LOGINTYPE.DEFAULT,a.dataLayer.tier=o.TIER.DEFAULT}):(a.dataLayer.tier=o.TIER.DEFAULT,a.dataLayer.logintype=o.LOGINTYPE.DEFAULT)},getLastRecordedDataLayer:function(){var a;try{a=angular.fromJson(sessionStorage.getItem(o.LAST_RECORDED_DATALAYER_STORAGE))}catch(t){a=null}finally{return a}},restoreDataLayerFromSessionStorage:function(){var t=this.getLastRecordedDataLayer();t&&(a.dataLayer=t)}}}]),ba.lang.namespace("ba.analytics"),ba.analytics.AnalyticsWebdataService=function(a,t,e,n,i){var r,o,s,c=1,l=function(){var n={trackingId:a.getCookieValue(t.V1ST)};return e.getAuthenticationToken(n)},u=function(a){"C"===a.eventType&&(i.location.href=a.request.redirectHref)},d=function(a){l().then(function(t){t&&t.data&&(r=t.data.token,o=t.data.apiKey),r&&o&&s(a)})["catch"](function(){u(a)})};return s=function(a){var t=n.transformAnalyticsData(a);e.sendWebdataAnalyticsData(t,r,o).then(function(){c=1,u(a)})["catch"](function(t){403===t.status&&10>=c?(d(a),c++):u(a)})},{sendAnalyticsData:function(a){sessionStorage.setItem(t.LAST_RECORDED_DATALAYER_STORAGE,angular.toJson(i.dataLayer)),r&&o?s(a):d(a)}}},ba.analytics.Module.service("AnalyticsWebdataService",["BACookieService","BaAnalyticsConstants","AnalyticsWebdataProxy","AnalyticsWebdataTransformer","$window",ba.analytics.AnalyticsWebdataService]),ba.lang.namespace("ba.analytics"),ba.analytics.AnalyticsWebdataTransformer=function(a,t,e){this.baAnalyticsConstants=a,this.baCookieService=t,this.ipAddress=e.get("BA_IP_ADDRESS")},ba.analytics.AnalyticsWebdataTransformer.prototype.transformAnalyticsData=function(a){var t={trackingRecords:{Attributes:a.request}};return t.trackingRecords[this.baAnalyticsConstants.EVENT_TYPE]=a.eventType,t.trackingRecords[this.baAnalyticsConstants.TRACKING_ID]=this.baCookieService.getCookieValue(this.baAnalyticsConstants.V1ST),t.trackingRecords[this.baAnalyticsConstants.PAGE_NAME]=a.request.pagename,t.trackingRecords[this.baAnalyticsConstants.ADOBE_ID]=this.baCookieService.getCookieValue(this.baAnalyticsConstants.AMCV_PARAM),t.trackingRecords.Attributes[this.baAnalyticsConstants.SESSION_ID]=this.baCookieService.getCookieValue(this.baAnalyticsConstants.BA_SESSION_ID),t.trackingRecords.Attributes[this.baAnalyticsConstants.IPADDRESS]=this.ipAddress,t},ba.analytics.Module.service("AnalyticsWebdataTransformer",["BaAnalyticsConstants","BACookieService","Environment","$window",ba.analytics.AnalyticsWebdataTransformer]),angular.module("ba-analytics-adobe",["ba-analytics","ba-lang"]).config(["analyticsProvider","Environment",function(a,t){var e={},n=function(a){var t=new Image,e=angular.injector(["ng"]).get("$q"),n=e.defer();return t.onerror=t.onabort=function(){n.reject()},t.onload=function(){n.resolve()},t.src=a,n.promise},i=function(a){var e,i,r,o,s,c;return angular.injector(["ng"]).get("$window"),e=document.getElementsByTagName("body")[0],i=angular.element(e).injector(),i.get("$location"),r=i.get("AdobeDefaultTags"),o=angular.injector(["ba-http"]).get("$HttpParamSerializer"),c=angular.extend(r.get(),a),s=o(c),n("//"+t.get("BA_ADOBE_ANALYTICS_TRACKING_IMAGE_HOST","www.britishairways.com")+"/cms/s.gif?"+s)},r=function(t){return t=t||{},angular.extend(t,e[a.customDimensionLifetime.Page]),angular.extend(t,e[a.customDimensionLifetime.Session]),angular.extend(t,e[a.customDimensionLifetime.Visitor]),i(t)},o=function(a){var t,e,n=a.substring(1).split("&"),i={};for(e in n)""!==n[e]&&(t=n[e].split("="),i[decodeURIComponent(t[0])]=decodeURIComponent(t[1]));return i},s=function(a){var t,e,n={};for(e in a)""!==a[e]&&(t=a[e].split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]));return n},c=function(a){var t;for(t in a)if(a.hasOwnProperty(t))return!1;return angular.toJson(a)===angular.toJson({})},l=function(){var a,t;return a=window.location.search,a=a.split("?")[1],a?(-1!==a.indexOf("&")&&(a=a.split("&")),t=a[a.length-1],t&&"/"===t.charAt(t.length-1)&&(a[a.length-1]=t.substring(0,t.length-1)),a=s(a),r(c(a)?o(window.location.search):a)):void 0};a.registerTrackPageHandler(l),a.registerTrackVirtualPageHandler(l),a.registerTrackEventHandler(function(a,t){var e=angular.copy(t);return e.EventName=a,r(e)}),a.registerSetCustomDimensionsHandler(function(a,t){e[a]=t})}]),ba.analytics.Module.directive("adobeAddTrackingToChildHref",[function(){return{restrict:"A",priority:-1,link:function(a,t,e){var n=function(a,t){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")},i=function(a,t,e){var i,r,o,s=new RegExp("([?&])"+a+"=.*?(&|#|$)(.*)","gi");return s.test(e)?"undefined"!=typeof t&&null!==t?o=e.replace(s,"$1"+a+"="+n(t,!0)+"$2$3"):(i=e.split("#"),e=i[0].replace(s,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof i[1]&&null!==i[1]&&(e+="#"+i[1]),o=e):"undefined"!=typeof t&&null!==t?(r=-1!==e.indexOf("?")?"&":"?",i=e.split("#"),e=i[0]+r+a+"="+n(t,!0),"undefined"!=typeof i[1]&&null!==i[1]&&(e+="#"+i[1]),o=e):o=e,o},r=function(){return e.analyticsData?a.$eval(e.analyticsData):{}},o=function(a){return a.attr("data-analytics-data")?a.scope().$eval(a.attr("data-analytics-data")):{}},s=function(a){return angular.extend({},r(),o(a))},c=function(a){var t=a.attr("href"),e=s(a);angular.forEach(e,function(a,e){t=i(e,a,t||"")}),a.attr("href",t)},l=function(t){return a.$watch(function(){return t.attr("href")},function(){c(t)})},u=function(t){return a.$watch(function(){return s(t)},function(a,e){angular.equals(a,e)||c(t)},!0)},d=[];a.$watch(function(){return t.find("a").length},function(){var a,e,n=t.find("a");for(angular.forEach(d,function(a){a()}),d=[],a=0;a<n.length;a++)e=angular.element(n[a]),c(e),d.push(u(e)),d.push(l(e))})}}}]),angular.module("ba-analytics-console",["ba-analytics"]).config(["analyticsProvider",function(a){var t=angular.injector(["ng"]).get("$log");a.registerTrackPageHandler(function(a){t.log("[Analytics] Page tracked: "+a)}),a.registerTrackVirtualPageHandler(function(a){t.log("[Analytics] Virtual Page tracked: "+a)}),a.registerTrackEventHandler(function(a,e){t.log("[Analytics] Event tracked: "+a),t.log(e)}),a.registerSetCustomDimensionsHandler(function(a,e){t.log("[Analytics] Custom Dimensions Set ("+a+"):"),t.log(e)}),a.registerBeginTransactionHandler(function(a){t.log("[Analytics] Begin Transaction"),t.log(a)}),a.registerAddTransactionItemHandler(function(a){t.log("[Analytics] Transaction Item Added"),t.log(a)}),a.registerEndTransactionHandler(function(a){t.log("[Analytics] End Transaction"),t.log(a)})}]);
ba.lang.namespace("ba.captcha"),ba.captcha.Lib=angular.module("ba-captcha",["vcRecaptcha","ngResource","ba-lang","ba-captcha-templates","ba-modal","ba-i18n"]),ba.captcha.Lib.config(["$httpProvider",function(a){a.interceptors.push("CaptchaInterceptor")}]),ba.lang.namespace("ba.captcha"),ba.captcha.Lib.constant("CaptchaConstants",{CAPTCHA_REQUIRED:"captcha:required",CAPTCHA_REQUIRED_FROM_SERVICE:"captcha_required"}),ba.lang.namespace("ba.captcha"),ba.captcha.Lib.directive("captcha",["$rootScope","vcRecaptchaService","CaptchaConstants","CaptchaCallbackService","Environment","CaptchaKeyService",function(a,c,t,e,n,r){return{restrict:"A",templateUrl:"ba-captcha/templates/captcha.html",scope:{},link:function(n){var o,p;p=a.$on(t.CAPTCHA_REQUIRED,function(){n.showCaptcha=!0}),n.$on("$destroy",p),n.getKey=r.getKey,n.onCreate=function(a){o=a},n.onExpire=function(){c.reload(o)},n.onSuccess=function(a){n.showCaptcha=!1,e.callCallbacks(a)}}}}]),ba.lang.namespace("ba.captcha"),ba.captcha.Lib.factory("CaptchaInterceptor",["$q","$rootScope","$injector","CaptchaKeyService","CaptchaCallbackService","CaptchaConstants",function(a,c,t,e,n,r){return{responseError:function(o){var p=a.defer(),i=function(a){var c=t.get("$http");o.config.headers["ba-captcha"]=a.response,c(o.config).then(function(a){p.resolve(a)})["catch"](function(a){p.reject(a)})};return 429===o.status&&o.data.error===r.CAPTCHA_REQUIRED_FROM_SERVICE?(n.addCallback(i),o.data.site_key&&e.setKey(o.data.site_key),c.$emit(r.CAPTCHA_REQUIRED)):p.reject(o),p.promise}}}]),ba.lang.namespace("ba.captcha"),ba.captcha.Lib.service("CaptchaCallbackService",[function(){var a=[];this.addCallback=function(c){c&&a.push(c)},this.callCallbacks=function(c){angular.forEach(a,function(a){a(c)}),a=[]}}]),ba.lang.namespace("ba.captcha"),ba.captcha.Lib.service("CaptchaKeyService",["Environment",function(a){var c;return{getKey:function(){return c||a.get("BA_CAPTCHA_KEY")},setKey:function(a){c=a}}}]);
angular.module("ba-captcha-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-captcha/templates/captcha.html",'<div data-modal-directive="" data-show="showCaptcha" data-restrict-exit-functionality="true"><h3 data-ba-resource-bundle-static="" data-key="captchaTitle"></h3><p data-ba-resource-bundle-static="" data-key="captchaTextOne"></p><p data-ba-resource-bundle-static="" data-key="captchaTextTwo"></p><form><div data-ng-if="showCaptcha" data-vc-recaptcha="" data-key="getKey()" data-on-success="onSuccess({response:response})" data-on-expire="onExpire()" data-on-create="onCreate(widgetId)"></div></form></div>')}]);
ba.lang.namespace("ba.passengermix"),ba.passengermix.Module=angular.module("ba-passengermix",["ba-passengermix-templates","ngTouch","ba-spinner","ngSanitize","ba-i18n","ba-page-messages","ba-passengermix-validation","click-and-touch-off"]),ba.passengermix.Module.config(["$locationProvider",function(e){e.html5Mode(!1)}]),ba.lang.namespace("ba.passengermix"),ba.passengermix.Constants={FLIGHT_ONLY:"FO",HOTEL_PACKAGE:"PAKFH",HOTEL_ONLY:"HO",CAR_PACKAGE:"PAKFC",CAR_ONLY:"CO",MAX_PASSENGER_FLIGHT:9,MAX_PASSENGER_CAR:7,MAX_ADULTS_FLIGHT:9,MAX_ADULTS_CAR:7,MAX_CHILDREN_FLIGHT:8,MAX_CHILDREN_CAR:6,MAX_INFANTS_FLIGHT:8,MAX_INFANTS_CAR:3,MAX_YOUNG__ADULT_FLIGHT:8,ADULT_DISPLAY_KEY:"pax-adult",ADULTS_DISPLAY_KEY:"pax-adults",CHILD_DISPLAY_KEY:"pax-child",CHILDREN_DISPLAY_KEY:"pax-children",INFANTS_DISPLAY_KEY:"pax-infants",INFANT_DISPLAY_KEY:"pax-infant",YOUNG_ADULT_DISPLAY_KEY:"pax-young_adult",YOUNG_ADULTS_DISPLAY_KEY:"pax-young_adults",ADULTS_KEY:"adults",CHILDREN_KEY:"children",INFANTS_KEY:"infants",YOUNG_ADULT_KEY:"young_adults",ResultCode:{OK:0,CAPACITY:1,SAFETY:2,TYPE_CAPACITY:3},FO_AGE_RANGE:{ADULT:"pax-adultsAgeLimit_FO",YOUNG_ADULT:"pax-young_adultsAgeLimit_FO",CHILD:"pax-childrenAgeLimit_FO",INFANT:"pax-infantsAgeLimit_FO"},DP_AGE_RANGE:{ADULT:"pax-adultsAgeLimit_DP",CHILD:"pax-childrenAgeLimit_DP",INFANT:"pax-infantsAgeLimit_DP"}},ba.passengermix.Module.constant("PaxConstants",ba.passengermix.Constants),ba.lang.namespace("ba.passengermix"),ba.passengermix.PassengerAgeDropDown=function(){return{restrict:"A",scope:{getChildCount:"&childCount",childAges:"=",getChildAgeList:"&childAgeList",submitted:"=",showChildAgeError:"="},templateUrl:"ba-passengermix/templates/passenger-age-dropdown.html",link:function(e){var r,n="";e.childAgeErrorOnBlur=[],e.childAgeErrorOnBlur=e.showChildAgeError||[],e.createChildAgeDropdown=function(){return e.showChildAgeError&&e.showChildAgeError.length&&e.showChildAgeError.splice(e.getChildCount(),e.showChildAgeError.length),e.childAgeErrorOnBlur&&e.childAgeErrorOnBlur.length&&e.childAgeErrorOnBlur.splice(e.getChildCount(),e.childAgeErrorOnBlur.length),null!==e.childAges&&"undefined"!=typeof e.childAges?(r=e.childAges.length,e.getChildCount()>r?e.childAges[e.getChildCount()-1]=n:e.getChildCount()<r&&e.childAges.pop(),e.childAges):void 0},e.setChildAgeError=function(r){return e.childAgeErrorOnBlur.length&&e.childAgeErrorOnBlur[r]||e.showChildAgeError&&e.showChildAgeError.length&&""===e.showChildAgeError[r]},e.onChangeChildAge=function(r){e.showChildAgeError&&(e.showChildAgeError[r]=e.childAges[r]),e.childAgeErrorOnBlur&&(e.childAgeErrorOnBlur[r]=!e.childAges[r])},e.onBlurChildAge=function(r){e.childAgeErrorOnBlur[r]=!e.childAges[r]}}}},ba.passengermix.Module.directive("passengerAgeDropDown",ba.passengermix.PassengerAgeDropDown),ba.lang.namespace("ba.passengermix"),ba.passengermix.PassengerMix=function(e,r){return{restrict:"A",scope:{passengers:"=",index:"=",submitted:"=",ruleSet:"=",supermix:"=",supermixCallback:"&",resourceCallback:"&",parentIndex:"="},templateUrl:"ba-passengermix/templates/passenger-mix.html",link:function(n){n.requiresAgeList=function(e){return"[object Array]"===Object.prototype.toString.call(e.ages)},n.spinnerCallback=function(e,r,a){var s,o=angular.copy(n.passengers);return a||n.clearPassengerErrors(),o[r].value=e,s=n.supermixValidate(o,n.parentIndex),s.length>0?(a||(n.passengers[r].errors=s),!1):void 0},n.supermixValidate=function(e,a){var s=angular.copy(n.supermix);return s.group[a]=e,r.validate(s,n.ruleSet)},n.getResource=function(e){return n.resourceCallback({errorKey:e})},n.clearPassengerErrors=function(){angular.forEach(n.passengers,function(e){e.errors=[]})},n.ariaLabel=function(r){return e.get(n.passengers[r].displayKeyPlural).then(function(e){return e})}}}},ba.passengermix.Module.directive("passengerMixTwo",["ResourceBundle","ValidationService",ba.passengermix.PassengerMix]),ba.lang.namespace("ba.passengermix"),ba.passengermix.PaxSupermix=function(e,r,n,a,s,o){return{restrict:"A",scope:{supermix:"=",ruleSet:"=",submitted:"=",resourceCallback:"&",addRoomCallback:"&",addRoomTrackEventCallback:"&",removeRoomTrackEventCallback:"&",showPassengerRefinementInfo:"=",productForPassengerMix:"=",isProductForPassengerMixPackage:"="},templateUrl:"ba-passengermix/templates/passenger-supermix.html",link:function(t){var i=function(r){return angular.forEach(r,function(r){r.title===e.PAXMIX_KEY_ADULT?r.value=1:(r.value=0,angular.isArray(r.passengerAges)&&(r.passengerAges=[]))}),r},l=i(angular.copy(t.supermix.group[0])),u=function(){r.get("pax-thereAreXRooms",{S1:t.supermix.group.length}).then(function(e){t.thereAreXRooms=e}),a(function(){o.$broadcast("updateStatus")},0)},g={enter:13,space:32};t.productPassengerRefinementInfoLink=!1,t.supermixErrors=[],t.roomCount=0,t.removeRoomAriaLabel="",t.toggleRefinementLink=function(){t.productPassengerRefinementInfoLink=!t.productPassengerRefinementInfoLink},t.hasRooms=function(){return t.ruleSet?t.ruleSet.MAX_ROOMS>1:void 0},t.showAddRoomButton=function(){return t.hasRooms()&&t.supermix.group.length<t.ruleSet.MAX_ROOMS},t.addRoom=function(){var e,r=angular.copy(t.supermix);!t.isChildAgeValid()&&t.showAddRoomButton()&&(r.group.push(angular.copy(l)),e=r.group.length,t.supermixErrors=n.validate(r,t.ruleSet),0===t.supermixErrors.length&&(t.addRoomCallback&&t.addRoomCallback(),t.supermix.group.push(angular.copy(l)),u(),e>1&&t.supermix.group.forEach(function(e,r){e.showSummary=t.supermix.group.length-2>=r})),t.addRoomTrackEventCallback&&t.addRoomTrackEventCallback({roomNo:e}))},t.$watch("supermix.group.length",function(e,r){var n,o,i=angular.element(s[0].querySelector(".add-room-button .spinner-button")),l=t.supermix.group.length-1;e>r?a(function(){n=angular.element(s[0].getElementById("AdultKey"+l)),o=angular.element(n[0].querySelector(".increase")),o[0].focus()},0):e!==r&&i[0].focus()}),t.paxResourceCallback=function(e){return t.resourceCallback({errorKey:e})},t.getRoomSummary=function(e){var n,a=[],s="";return angular.forEach(e,function(e){if(e.value>0){if(n=e.displayKey,e.value>1&&(n=e.displayKeyPlural),s=e.value+"&nbsp;"+r.getResourceTextAndSupplant(n),e.passengerAges&&e.passengerAges.length>0){switch(s+="&nbsp;("+r.getResourceTextAndSupplant("pax-aged")+" ",e.passengerAges.length){case 1:s+=e.passengerAges[0];break;case 2:s+=e.passengerAges.join(" "+r.getResourceTextAndSupplant("and")+" ");break;default:s+=e.passengerAges.slice(0,-1).join(", ")+" "+r.getResourceTextAndSupplant("and")+" "+e.passengerAges.slice(-1)}s+=")"}a.push(s)}}),a.join(", ")},t.removeRoom=function(e){return e>0?(t.supermix.group.splice(e,1),u(),e===t.supermix.group.length&&(t.supermix.group[e-1].showSummary=!1),t.removeRoomTrackEventCallback&&t.removeRoomTrackEventCallback({roomNo:e+1}),void 0):!1},t.toggleRoomDetails=function(e){t.isChildAgeValid()||t.supermix.group.forEach(function(r,n){r.showSummary=e!==n})},t.supermixValidate=function(e,r){var a=angular.copy(t.supermix);return a.group[r]=e,n.validate(a,t.ruleSet)},t.clearErrors=function(e){e.stopPropagation(),t.supermixErrors=[]},t.shouldShowSummary=function(e,r){var n=e.$valid||!t.submitted;return n&&r},t.isChildAgeValid=function(){var e;return t.childAgeError=!1,angular.forEach(t.supermix.group,function(r){e=r[1].passengerAges,r[1].childAgeErrors=[],angular.forEach(e,function(e,n){e||(r[1].childAgeErrors[n]=e,t.childAgeError=!0)})}),t.childAgeError},t.callOnKeyDown=function(e,r,n){(e.keyCode===g.enter||e.keyCode===g.space)&&(e.preventDefault(),t[r](n))}}}},ba.passengermix.Module.directive("passengerSupermix",["PaxValidationConstants","ResourceBundle","ValidationService","$timeout","$document","$rootScope",ba.passengermix.PaxSupermix]),ba.lang.namespace("ba.passengermix"),ba.passengermix.PassengerViewData=function(e,r,n,a){this.validateInteger=function(e,r){if("number"==typeof e)return e;throw"Type error: "+r+" must be an integer"},this.type=e||"",this.value="number"==typeof a?a:0,this.min=this.validateInteger(r,"min value of passenger"),this.max=this.validateInteger(n,"max value of passenger"),this.message=""};
angular.module("ba-passengermix-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-passengermix/templates/multi-pax-mix-OLD.html",'<div class="multi-passenger-mix"><div class="passenger-mix-group" data-ng-repeat="group in groups track by $index" data-ng-form="" data-name="roomForm"><div data-ng-show="getRules().hasOwnProperty(\'maxRoom\')"><h4 class="room-title" data-ba-resource-bundle-static="" data-key="room" data-supplant="{\'S1\':$index + 1}"></h4><a class="expand-collapse-room" data-ng-click="toggleRoomDetails($index)" data-ng-show="$index + 1 < groups.length"><span class="expand-collapse-icon" data-ng-show="group.showSummary" aria-hidden="true" data-icon="&#xe601;"></span> <span class="expand-collapse-icon" data-ng-show="!group.showSummary" aria-hidden="true" data-icon="&#xe60c;"></span></a><p data-ng-if="shouldShowSummary(group.showSummary, roomForm)" class="paxmix-summary"><span data-ng-if="group.mix[0].value > 0">{{group.mix[0].value}}&nbsp;{{group.mix[0].value > 1 ?(\'adults\' | baResourceBundleDynamic) : (\'adult\' | baResourceBundleDynamic)}}</span><span data-ng-if="group.mix[1].value > 0">&#44;{{group.mix[1].value}}&nbsp;{{group.mix[1].value > 1 ?(\'children\' | baResourceBundleDynamic) : (\'child\' | baResourceBundleDynamic)}}</span><span data-ng-if="group.mix[2].value > 0">&#44;{{group.mix[2].value}}&nbsp;{{group.mix[2].value > 1 ?(\'infants\' | baResourceBundleDynamic) : (\'infant\' | baResourceBundleDynamic)}}</span></p><a class="remove-room-link" data-ng-click="removeGroup($index)" data-ng-show="showRemoveGroupButton && ($index > 0) && !group.showSummary" data-ng-disabled="isDisabled($index)" ng-class="{disabledButton: isDisabled($index)}" data-ba-resource-bundle-static="" data-key="remove"></a> <a class="expand-collapse-room" data-ng-click="toggleRoomDetails($index)" data-ng-show="$index + 1 < groups.length"><span class="expand-collapse-icon" data-ng-show="group.showSummary" aria-hidden="true" data-icon="&#xe601;"></span> <span class="expand-collapse-icon" data-ng-show="!group.showSummary" aria-hidden="true" data-icon="&#xe60c;"></span></a></div><div data-ng-class="{hideRoomDetails: shouldShowSummary(group.showSummary, roomForm)}" data-passenger-mix="" data-passengers="group.mix" data-horizontal="true" data-child-ages="group.childAges" data-submitted="submitted" data-index="$index" class="paxMixContainer"></div></div><a class="add-room-link" data-ng-show="showAddRoomButton" data-ng-click="addRoom()"><span class="add-room-icon" aria-hidden="true" data-icon="&#xe61b;"></span> <span class="add-room-text" data-ba-resource-bundle-static="" data-key="addRoom"></span></a><p class="passenger-validation-text" data-ng-if="resultCode"><span class="inline-close-ico close-ico" data-ng-click="passenger.message = \'\'"></span><span data-ng-bind-html="groups[0].message"></span></p></div>'),$templateCache.put("ba-passengermix/templates/passenger-age-dropdown.html",'<div data-ng-repeat="result in createChildAgeDropdown() track by $index" class="row child-age-dropdown"><div class="small-2 columns right-padding-zero"><img class="child-age-icon" data-ng-src="images/avatar_standard.svg" alt="passenger mix selector"></div><div class="small-5 columns left-padding-zero"><span class="child-age-text" data-ba-resource-bundle-static="" data-key="pax-childXAge" data-supplant="{\'S1\':$index + 1}"></span></div><div class="small-5 columns"><div class="select-wrap no-label" data-ng-class="{\'select-wrap-error\': (childAgeErrorOnBlur.length && childAgeErrorOnBlur[$index]) || (showChildAgeError && showChildAgeError.length && showChildAgeError[$index] === \'\')}"><select name="childAge" class="inverted no-label" data-ng-class="{\'select-age\': (childAgeErrorOnBlur.length && childAgeErrorOnBlur[$index]) || (showChildAgeError && showChildAgeError.length && showChildAgeError[$index] === \'\')}" id="select-dropdown" data-ng-model="childAges[$index]" data-ng-options="age for age in getChildAgeList()" data-required="" aria-required="true" data-ng-blur="onBlurChildAge($index)" data-ng-change="onChangeChildAge($index)"><option value="" data-ba-resource-bundle-static="" data-key="pax-selectAgeDropDown"></option></select></div></div><div data-ng-if="setChildAgeError($index)" data-ba-resource-bundle-static="" class="select-child-age" data-key="pax-selectChildAge" data-supplant="{\'S1\':$index + 1}"></div></div>'),$templateCache.put("ba-passengermix/templates/passenger-mix.html",'<div data-ng-repeat="passenger in passengers" class="ba-passenger-mix" data-ng-form="" data-name="paxMixForm" data-click-and-touch-off="" data-click-and-touch-off-if="passenger.errors.length > 0" data-click-and-touch-off-callback="clearPassengerErrors()"><div class="passenger-submix"><div id="{{passenger.title}}{{index}}" class="row" data-spinner="" data-label="passenger.displayKeyPlural" data-sub-label="passenger.ageRange" data-parent-index="$index" data-value="passenger.value" data-override="spinnerCallback(newVal, index, optionalOverride)" data-ng-model="passenger.value" data-get-aria-label="ariaLabel($index)"></div><div id="childAgeDropdown" data-ng-if="requiresAgeList(passenger)"><div data-passenger-age-drop-down="" data-child-count="passenger.value" data-child-ages="passenger.passengerAges" data-child-age-list="passenger.ages" data-submitted="submitted" data-show-child-age-error="passenger.childAgeErrors"></div></div><div class="error-messages" data-ba-page-messages="" role="alert" data-ng-show="passenger.errors.length > 0" data-message-type-class="\'information\'" data-message-description="getResource(passenger.errors[0]).resourceKey | baResourceBundleDynamic: getResource(passenger.errors[0]).supplants" data-inverted="true"></div></div></div>'),$templateCache.put("ba-passengermix/templates/passenger-supermix.html",'<div class="row pop-up-dialog-heading bold room-mix-header" data-ng-if="hasRooms()"><div class="small-6 columns room-header-txt" data-ba-resource-bundle-static="" data-key="how-many-rooms"></div><div class="small-6 columns spinner room-mix-spinner"><div class="spinner-button-container"><button class="spinner-button decrease-rooms" data-ng-click="removeRoom((supermix.group.length) -1)" data-ng-keydown="callOnKeyDown($event, \'removeRoom\', $index)" data-ng-class="{\'disable\' : ((supermix.group.length) === 1)}" aria-label="{{\'pax-removeRoomAria\' | baResourceBundleDynamic: {S1: (supermix.group.length)} }}" data-icon="&#xe61a;"></button> <span class="h1 spinner-value" data-ng-class="{\'spinner-value-zero\': supermix.group.length===0}">{{supermix.group.length}}</span><div class="add-room-button" data-click-and-touch-off="" data-click-and-touch-off-if="supermixErrors.length > 0" data-click-and-touch-off-callback="clearErrors()"><button class="spinner-button" data-ng-click="addRoom()" data-ng-keydown="callOnKeyDown($event, \'addRoom\')" data-ng-class="{\'disable\' : (ruleSet.MAX_ROOMS === supermix.group.length)}" aria-label="{{\'pax-addRoomAria\' | baResourceBundleDynamic: {S1: supermix.group.length + 1} }}" data-icon="&#xe61b;"></button></div></div></div><div class="small-12 columns"><div class="error-messages" data-ba-page-messages="" role="alert" data-ng-show="supermixErrors.length > 0" data-inverted="{{showPassengerRefinementInfo ? \'true\' : \'false\'}}" data-message-type-class="\'information\'" data-message-description="paxResourceCallback(supermixErrors[0]).resourceKey | baResourceBundleDynamic: paxResourceCallback(supermixErrors[0]).supplants"></div></div></div><div class="product-refinement" data-ng-if="showPassengerRefinementInfo" data-ng-include="\'ba-passengermix/templates/product-refinement-info.html\'"></div><div class="passenger-supermix" data-ng-class="{\'passenger-supermix-multi-passenger\': hasRooms()}"><div class="passenger-mix" data-ng-repeat="passengerMix in supermix.group track by $index" data-ng-form="" data-name="supermixForm"><div class="passenger-mix-information" data-ng-show="hasRooms()"><div class="passenger-mix-header"><span class="passenger-mix-title bold" data-ba-resource-bundle-static="" data-key="pax-room" data-supplant="{\'S1\':$index + 1}"></span></div><div class="passenger-mix-header"><p data-ng-class="{\'passenger-mix-summary-hide\': !shouldShowSummary(supermixForm, passengerMix.showSummary)}" class="passenger-mix-summary" data-ng-bind-html="getRoomSummary(passengerMix)"></p><a class="passenger-mix-edit-link small-text" data-ng-click="toggleRoomDetails($index, passengerMix)" data-ng-keydown="callOnKeyDown($event, \'toggleRoomDetails\', $index)" data-ng-show="shouldShowSummary(supermixForm, passengerMix.showSummary)" tabindex="0" data-ba-resource-bundle-static="" data-key="edit-link-text" role="link" aria-label="{{\'edit-link-label\' | baResourceBundleDynamic}} {{$index+1}}"></a></div></div><div class="passenger-mix-directive" data-ng-class="{\'passenger-mix-directive-hide\': shouldShowSummary(supermixForm, passengerMix.showSummary)}" data-passenger-mix-two="" data-parent-index="$index" data-passengers="passengerMix" data-submitted="submitted" data-index="$index" data-rule-set="ruleSet" data-supermix="supermix" data-resource-callback="paxResourceCallback(errorKey)"></div></div></div>'),$templateCache.put("ba-passengermix/templates/product-refinement-info.html",'<div class="small-12 columns passenger-age-product-refinement-info" data-ng-hide="showPassengerRefinementInfo && !isProductForPassengerMixPackage && productForPassengerMix === \'car\'"><p class="small-text"><span data-ng-if="productForPassengerMix === \'hotel\'" data-ba-resource-bundle-static="" data-key="pax-hotelPrice"></span> <span data-ng-if="isProductForPassengerMixPackage && productForPassengerMix === \'car\'" data-ba-resource-bundle-static="" data-key="pax-driverAge"></span><a class="passenger-age-product-refinement-link" tabindex="0" data-ng-hide="productPassengerRefinementInfoLink || (!isProductForPassengerMixPackage && productForPassengerMix === \'car\')" data-ba-resource-bundle-static="" data-ng-click="toggleRefinementLink()" href="javascript:void(0);" data-key="readMore"></a></p><div data-ng-show="productPassengerRefinementInfoLink" class="passenger-age-product-refinement-points"><ul data-ng-if="productForPassengerMix === \'hotel\' || (isProductForPassengerMixPackage && productForPassengerMix === \'car\')"><li data-ng-bind="productForPassengerMix ===\'hotel\' ? (\'pax-passengerAgeDescription\' | baResourceBundleDynamic) : (\'pax-carFirstDescription\' | baResourceBundleDynamic)"></li><li data-ng-bind="productForPassengerMix ===\'hotel\' ? (\'pax-childAgeDescription\' | baResourceBundleDynamic) : (\'pax-carSecondDescription\' | baResourceBundleDynamic)"></li><li data-ng-bind="productForPassengerMix ===\'hotel\' ? (\'pax-combinedFlight\' | baResourceBundleDynamic) : (\'pax-carThirdDescription\' | baResourceBundleDynamic)"></li></ul><a class="passenger-age-product-refinement-link" data-ng-show="productPassengerRefinementInfoLink" tabindex="0" href="javascript:void(0);" data-ba-resource-bundle-static="" data-ng-click="toggleRefinementLink()" data-key="readLess"></a></div></div>')}]);
ba.lang.namespace("ba.siteFurniture"),ba.siteFurniture.Lib=angular.module("ba-site-furniture",["ba-i18n","ba-site-furniture-templates","siteFurniture-footer","siteFurniture-header","ngSanitize","ba-analytics","ba-http","ba-url","ba-modal","ba-customer","ba-cookie","click-and-touch-off","ba-locale-selection-modal","ba-locale-selection-modal-templates","ba-loading","ba-trap-focus"]),ba.siteFurniture.Lib.config(["SpecialUrlsProvider",function(e){e.addUrls(["/assets/images"])}]),ba.lang.namespace("ba.siteFurniture.footer"),ba.siteFurniture.footer.Module=angular.module("siteFurniture-footer",["ba-site-furniture-templates","ba-content-retrieval"]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.Module=angular.module("siteFurniture-header",["ba-site-furniture-templates","ba-content-retrieval","ba-modal","ba-trap-focus","ba-auth","ba-captcha","ngTouch","ngSanitize","ba-loading"]),ba.lang.namespace("ba.siteFurniture"),ba.siteFurniture.generateUrl=function(e,t,a){return{restrict:"A",replace:!0,scope:{relativeUrl:"@"},controller:["$scope","$element","$attrs","$filter",function(n,r,o,i){function l(){var e=i("urlFilter")(n.relativeUrl);c()&&(e=e.replace("/public/","/execclub/_gf/")),o.$set("href",e)}var s,u,c=e.isLoggedOn;s=t.$on(a.LOG_ON_SUCCESS,function(){l()}),u=t.$on(a.LOG_OFF_SUCCESS,function(){l()}),n.$watch("relativeUrl",function(){l()}),t.$on("$destroy",s),t.$on("$destroy",u)}]}},ba.siteFurniture.Lib.directive("baGenerateUrl",["BAAuthenticationService","$rootScope","AuthenticationConstants",ba.siteFurniture.generateUrl]),ba.lang.namespace("ba.siteFurniture.footer"),ba.siteFurniture.footer.Module.constant("FooterConstants",{SITE_LINKS_DOC_TYPE:"documentType:furniture/globalFooter",LINK_TYPES:{TEXT_LINKS:"textLinks",SOCIAL_LINKS:"socialLinks"},BASIC_CONTENT:{TITLE_KEY:"footer-disability-assistance",HREF:"information/disability-assistance/disability-and-mobility-assistance.page",AUTH:"both",MARKET:!0,OPEN_STYLE:"_blank",ICONURL:null},OPEN_STYLE:{SELF:"_self",BLANK:"_blank"}}),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.header.Module.constant("GlobalConstants",{menu:[{title:"nav-fallback-discover",content:[{title:"nav-fallback-ba",items:[{type:"link",text:"nav-fallback-baExperience",href:"information/the-ba-experience.page"},{type:"link",text:"nav-fallback-travelClasses",href:"information/travel-classes.page"}]},{title:"nav-fallback-execclub",items:[{type:"link",text:"nav-fallback-aboutClub",href:"executive-club/about-the-club.page"},{type:"link",text:"nav-fallback-aboutAvios",href:"executive-club/avios.page"},{type:"link",text:"nav-fallback-joinExec",href:"execenrol"}]},{title:"nav-fallback-flightsDest",items:[{type:"link",text:"nav-fallback-exploreDest",href:"destinations.page"},{type:"link",text:"nav-fallback-routes",href:"information/flight-information.page"},{type:"link",text:"nav-fallback-baggageEss",href:"information/baggage-essentials.page"},{type:"link",text:"nav-fallback-airportInfo",href:"information/airport-information.page"}]},{title:"nav-fallback-holidays",items:[{type:"link",text:"nav-fallback-discoverHols",href:"flights-and-holidays/holidays.page"}]},{title:"nav-fallback-offers",items:[{type:"link",text:"nav-fallback-specialOffers",href:"offers/flight-deals.page"}]},{title:"nav-fallback-extras",items:[{type:"link",text:"nav-fallback-airportParking",href:"information/airport-information/airport-parking.page"},{type:"link",text:"nav-fallback-travelInsurance",href:"flights-and-holidays/travel-insurance.page"}]}]},{title:"nav-fallback-book",content:[{title:"nav-fallback-flights",items:[{type:"link",text:"nav-fallback-bookFlight",href:"flights-and-holidays/flights.page"},{type:"link",text:"nav-fallback-bookFlightAvios",href:"https://www.britishairways.com/travel/redeem/execclub?eId=106019&tab_selected=redeem&redemption_type=STD_RED"}]},{title:"nav-fallback-flightsMore",items:[{type:"link",text:"nav-fallback-flightHotel",href:"flights-and-holidays/holidays.page"},{type:"link",text:"nav-fallback-flightCar",href:"destinations/holiday-types/fly-drive-holidays.page"},{type:"link",text:"nav-fallback-findHotel",href:"flights-and-holidays/hotels.page"},{type:"link",text:"nav-fallback-hireCar",href:"flights-and-holidays/car-hire.page"},{type:"link",text:"nav-fallback-bookExperience",href:"destinations/holiday-types/things-to-do.page"}]}]},{title:"nav-fallback-manage",content:[{title:"nav-fallback-myBookings",isMMB:!0,items:[{type:"mmbPod"},{type:"link",text:"nav-fallback-flightStatus",href:"flightstatus"},{type:"link",text:"nav-fallback-flightInfo",href:"information/flight-information.page"}]},{title:"nav-fallback-execclub",items:[{type:"link",text:"nav-fallback-logIn",href:"echome"},{type:"link",text:"nav-fallback-joinExec",href:"execenrol",loggedOutOnly:"true"}]}]},{title:"nav-fallback-help",content:[{title:"nav-fallback-bookings",items:[{type:"link",text:"nav-fallback-delays",href:"information/delayed-or-cancelled-flights.page"},{type:"link",text:"nav-fallback-lostBags",href:"information/baggage-essentials/lost-and-damaged-baggage.page"}]},{title:"nav-fallback-assistance",items:[{type:"link",text:"nav-fallback-contact",href:"help-and-contacts"},{type:"link",text:"nav-fallback-disability",href:"information/disability-assistance.page"},{type:"link",text:"nav-fallback-travelAssistance",href:"information/travel-assistance.page"}]},{title:"nav-fallback-travelNews",items:[{type:"newsFeed",limit:3},{type:"link",text:"nav-fallback-moreNews",href:"flightops"}]}]}]}),ba.lang.namespace("ba.siteFurniture.appheader"),ba.siteFurniture.header.Module.constant("HeaderConstants",{LOCK_LEVEL_TWO:"LOCK-LEVEL-2",LOCK_LEVEL:"LOCK-LEVEL",LOG_ON_FAILED_ERROR:"invalid_grant",LOG_ON_FAILED_ERROR_DESCRIPTION:"invalid_credentials",LINK_TYPE_TEAMSITE:"teamsite",LINK_TYPE_LIVESITE:"livesite",LINK_TYPE_EXTERNAL:"external",LAST:"last",FIRST:"first",PUBLIC:"public",SEARCHICON:"#header-search-button",SEARCHINPUT:".header-search-input",LOGINMODAL:".login-modal",LOGINMODALCLOSE:".modal-close-button",ARIALABEL:"aria-label",ARIADESCRIBEDBY:"aria-describedby",ARIADIALOGDESC:"dialogDesc",ONFOCUS:"focus",ONBLUR:"blur",ONKEYPRESS:"keypress",ONCLICK:"click",EMPTY_LOGIN_FORM_MESSAGE:"Please enter your Email or username and PIN or password",LOGIN_LOADING_MESSAGE:"We're processing your details",SEARCH_TEMPLATE:"ba-site-furniture/templates/header-search.html",TAB_BACK:"tabBack",TAB_FORWARD:"tabForward",SEARCH_SELECT:"searchSelect",MOBILE_WIDTH:750,UK:"United Kingdom",ENGLISH:"English",ENGLISH_CODE:"en",GB_SHORT:"gb",UK_SHORT:"uk",SHOW:"show",OPEN_MODAL_CLASS:"open-modal",KEY_CODES:{ESCAPE:27,TAB:9,SHIFT:16,ENTER:13},TAB_KEY:9,ENT_KEY:13,ESC_KEY:27,PUBLIC_URL:"/public/",EXEC_URL:"/execclub/_gf/",LINKS_QUERY_MARKET_1:"Market_list:",LINKS_QUERY_MARKET_2:"+OR+Market_s:zzglobal",LINKS_QUERY_CONENT_PLAT:"/content-platform/translation/",LINKS_QUERY_LOCALE:"?locale=",LINKS_QUERY_FQ_1:"&fq=documentType:furniture%2FglobalNavigation&fq=(",LINKS_QUERY_FQ_2:")&q=*",POS:{LEFT:"left",CENTER:"center",RIGHT:"right"},CHOICE:{OPEN:"open",CLOSE:"close"},INTERACTION:{SELECT:"select",HOVER:"hover"},EVENT:{CLICK:"click",TOUCH:"touchend"},TRACKING:{interaction:"interaction",siteSearch:"Global Navigation: Site search",login:"Global Header: Log in",register:"Global Header: Register",brand:"Global Header: Brand logo"},DUAL_FORM_OLCI_ID:"olci",DUAL_FORM_MMB_ID:"mmb",DUAL_FORM_OLCI_VALUE:104510,DUAL_FORM_MMB_VALUE:104002,DUAL_FORM_PREFIX:"dualForm-",DUAL_FORM_EID:"?eId=",ENTER_KEY:13,SPACE_BAR:32,CLOSE_BROADCAST:"closeNavs",ABOUT_BETA_KEYS:[{text:"header-beta-about-faq-question1",answer:[{answerType:"paragraph",text:"header-beta-about-faq-answer1"}]},{text:"header-beta-about-faq-question2",answer:[{answerType:"paragraph",text:"header-beta-about-faq-answer2-2"},{answerType:"listItem",text:[{listItem:"header-beta-about-faq-answer2-list-item1"},{listItem:"header-beta-about-faq-answer2-list-item2"},{listItem:"header-beta-about-faq-answer2-list-item3"},{listItem:"header-beta-about-faq-answer2-list-item4"},{listItem:"header-beta-about-faq-answer2-list-item5"}]},{answerType:"paragraph",text:"header-beta-about-faq-answer2-3"}]},{text:"header-beta-about-faq-question3",answer:[{answerType:"paragraph",text:"header-beta-about-faq-answer3"}]},{text:"header-beta-about-faq-question4",answer:[{answerType:"paragraph",text:"header-beta-about-faq-answer4"}]},{text:"header-beta-about-faq-question5",answer:[{answerType:"paragraph",text:"header-beta-about-faq-answer5"}]},{text:"header-beta-about-faq-question6",answer:[{answerType:"paragraph",text:"header-beta-about-faq-answer6"}]},{text:"header-beta-about-faq-question7",answer:[{answerType:"paragraph",text:"header-beta-about-faq-answer7"}]}]}),ba.lang.namespace("ba.siteFurniture.footer"),ba.siteFurniture.footer.footerDirective=function(e,t,a,n){return{restrict:"A",templateUrl:"ba-site-furniture/templates/ba-footer.html",scope:{basic:"=",layout:"=?",generalDataModel:"=?"},link:function(r){var o={fq:[t.SITE_LINKS_DOC_TYPE]};r.isLoggedOn=n.isLoggedOn,r.basic?a.getBasicData().then(function(e){r.footersitelinks=e})["catch"](function(){r.footersitelinks=[]}):r.generalDataModel&&r.generalDataModel.siteLinks?r.footersitelinks=a.transformData(r.generalDataModel.siteLinks):r.generalDataModel&&r.generalDataModel.hasBeenCalled?r.footersitelinks=[]:e.getContentInstance(o).then(function(e){r.footersitelinks=a.transformData(e.docs[0].content)})["catch"](function(){a.getFallbackData().then(function(e){r.footersitelinks=e})["catch"](function(){r.footersitelinks=[]})})}}},ba.siteFurniture.footer.Module.directive("baFooter",["ContentRetrievalService","FooterConstants","FooterLinksModel","BAAuthenticationService",ba.siteFurniture.footer.footerDirective]),ba.lang.namespace("ba.siteFurniture.footer"),ba.siteFurniture.footer.FooterLinksModel=function(e,t,a,n,r){this.clientLocaleService=e,this.$rootScope=t,this.footerConstants=a,this.resourceBundle=n,this.$q=r},ba.siteFurniture.footer.FooterLinksModel.prototype.transformData=function(e){var t,a,n,r,o,i,l,s=this;if(r=function(e,t){var a,n,r={auth:"both",market:!0};return e&&(r.auth=e.authState),t&&t.markets&&(a=t.markets.replace(/\s/g,"").split(","),n=s.clientLocaleService.getCountry().toUpperCase(),("show"===t.option&&-1===a.indexOf(n)||"hide"===t.option&&-1!==a.indexOf(n))&&(r.market=!1)),r},i=function(e){return"new"===e?s.footerConstants.OPEN_STYLE.BLANK:s.footerConstants.OPEN_STYLE.SELF},l=function(e,t){var a,n,o=[];if(e&&"undefined"==typeof e.length&&(e=[e]),e)for(a=0;a<e.length;a++)n=e[a],t===s.footerConstants.LINK_TYPES.TEXT_LINKS&&o.push({text:n.text,href:n.href,iconURL:n.iconURL||null,openStyle:i(n.openStyle),visible:r(n.visibilityOptions,n.marketVisibility)}),t===s.footerConstants.LINK_TYPES.SOCIAL_LINKS&&o.push({text:n.iconAlt,href:n.iconHref,iconURL:n.iconURL||null,openStyle:s.footerConstants.OPEN_STYLE.BLANK,visible:r(n.visibilityOptions,n.marketVisibility)});return o},n=function(e){var t,a;return e.textLinks&&(e=e.textLinks,a=e.textLink,t=s.footerConstants.LINK_TYPES.TEXT_LINKS),e.socialLinks&&(e=e.socialLinks,a=e.socialLink,t=s.footerConstants.LINK_TYPES.SOCIAL_LINKS),{type:t,links:l(a,t),visible:r(e.visibilityOptions,e.marketVisibility)}},e.footer&&e.footer.linksSection)for(t=[],a=e.footer.linksSection,a&&"undefined"==typeof a.length&&(a=[a]),o=0;o<a.length;o++)t.push(n(a[o]));return t},ba.siteFurniture.footer.FooterLinksModel.prototype.getBasicData=function(){var e=this,t=e.$q.defer();return e.resourceBundle.get(e.footerConstants.BASIC_CONTENT.TITLE_KEY).then(function(a){t.resolve([{type:e.footerConstants.LINK_TYPES.TEXT_LINKS,links:[{href:e.footerConstants.BASIC_CONTENT.HREF,iconURL:e.footerConstants.BASIC_CONTENT.ICONURL,openStyle:e.footerConstants.BASIC_CONTENT.OPEN_STYLE,text:a,visible:{auth:e.footerConstants.BASIC_CONTENT.AUTH,market:e.footerConstants.BASIC_CONTENT.MARKET}}],visible:{auth:e.footerConstants.BASIC_CONTENT.AUTH,market:e.footerConstants.BASIC_CONTENT.MARKET}}])}),t.promise},ba.siteFurniture.footer.FooterLinksModel.prototype.getFallbackData=function(){var e,t=this,a=[];return e=[{links:[{href:"information/help-and-contacts/index.page?source=BOT_help_and_contacts",iconURL:null,openStyle:"_self",visible:{auth:"both",market:!0}},{href:"information/accessibility-site-help/index.page?source=BOT_accessibility",iconURL:null,openStyle:"_self",visible:{auth:"both",market:!0}},{href:"information/legal/website-security/index.page?source=BOT_website-security",iconURL:null,openStyle:"_self",visible:{auth:"both",market:!0}},{href:"information/legal/privacy-policy/index.page?source=BOT_privacy-policy",iconURL:null,openStyle:"_self",visible:{auth:"both",market:!0}},{href:"information/legal/index.page?source=BOT_legal",iconURL:null,openStyle:"_self",visible:{auth:"both",market:!0}},{href:"information/about-ba/csr/corporate-responsibility/index.page?source=BOT_corporate-responsibility",iconURL:null,openStyle:"_self",visible:{auth:"both",market:!0}},{href:"https://www.iairgroup.com/~/media/Files/I/IAG/Modern%20Slavery/2019%20Modern%20Slavery%20Statement%20Final.pdf",iconURL:null,openStyle:"_blank",visible:{auth:"both",market:!0}}],type:"textLinks",visible:{auth:"both",market:!0}}],a[0]=t.resourceBundle.get("footer-fallback-help").then(function(t){e[0].links[0].text=t}),a[1]=t.resourceBundle.get("footer-fallback-accessibility").then(function(t){e[0].links[1].text=t}),a[2]=t.resourceBundle.get("footer-fallback-web-security").then(function(t){e[0].links[2].text=t}),a[3]=t.resourceBundle.get("footer-fallback-privacy").then(function(t){e[0].links[3].text=t}),a[4]=t.resourceBundle.get("footer-fallback-legal").then(function(t){e[0].links[4].text=t}),a[5]=t.resourceBundle.get("footer-fallback-corp").then(function(t){e[0].links[5].text=t}),a[6]=t.resourceBundle.get("footer-fallback-modern").then(function(t){e[0].links[6].text=t}),t.$q.all([a[0]]).then(function(){return e})},ba.siteFurniture.footer.Module.service("FooterLinksModel",["ClientLocaleService","$rootScope","FooterConstants","ResourceBundle","$q",ba.siteFurniture.footer.FooterLinksModel]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.AppHeaderController=function(e,t,a,n,r,o,i){var l=this;this.headerConstants=r,n.get("header-new-about-sub1-paragraph2-link").then(function(e){l.aboutNewLink1='<a href="'+a.formLiveSiteURL("flights-and-holidays",null,"flights")+'">'+e+"</a>"}),n.get("header-new-about-sub2-paragraph2-link").then(function(e){l.aboutNewLink2='<a href="'+a.formLiveSiteURL("information",null,"accessibility-site-help")+'">'+e+"</a>"}),n.get("header-new-about-sub3-paragraph1-link").then(function(e){l.aboutNewLink3='<a href="'+a.formLiveSiteURL("information",null,"feedback/betaFlow")+'">'+e+"</a>"}),this.cugName=i.getCookieValue("CUG_COOKIE"),this.modalElements=o.modalElements,this.cycleTabs=function(e,t){o.cycleTabs(e,t)},this.toggleAboutBeta=function(){return o.toggleAboutBeta()},this.closeAboutBetaKey=function(e){return o.closeAboutBetaKey(e)}},ba.siteFurniture.header.Module.controller("AppHeaderController",["$scope","$rootScope","URLFormulationService","ResourceBundle","HeaderConstants","AboutBetaService","BACookieService",ba.siteFurniture.header.AppHeaderController]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.GlobalHeaderController=function(e,t,a,n,r,o,i,l,s,u,c,d,b,f,h){function g(){t.userInfo?t.$watch("userInfo",function(e){"loading"!==e&&(C.setUserData(e),C.isLoginModalOpen=!1,C.loginLoading=!1)}):C.loggedOn&&i.getCustomerAttributes().then(function(e){C.setUserData(e),C.isLoginModalOpen=!1,C.loginLoading=!1})["catch"](function(){C.isLoginModalOpen=!1,C.loginLoading=!1})}var m,p,v,L,S,C=this;C.resetLoginForm=function(){C.navLoginForm&&C.navLoginForm.$setPristine(),C.errorMessage="",C.loginFieldError=""},u.get("header-new-about-sub1-paragraph2-link").then(function(e){C.aboutNewLink1='<a href="'+o.formLiveSiteURL("flights-and-holidays",null,"flights")+'">'+e+"</a>"}),u.get("header-new-about-sub2-paragraph2-link").then(function(e){C.aboutNewLink2='<a href="'+o.formLiveSiteURL("information",null,"accessibility-site-help")+'">'+e+"</a>"}),u.get("header-new-about-sub3-paragraph1-link").then(function(e){C.aboutNewLink3='<a href="'+o.formLiveSiteURL("information",null,"feedback/betaFlow")+'">'+e+"</a>"}),u.get("header-beta-start-olci1").then(function(e){C.olciOnlineCheckTxt=e}),u.get("header-beta-start-olci2").then(function(e){C.olciInTxt=e}),S=a.$on("TermsAndConditionsBroadcast",function(e,t){t.acceptanceRequired?(C.allowLogOn=!1,C.userInfo.isLoggedIn=!1):C.allowLogOn=!0,l.setCookie("TermAndCondition",C.allowLogOn,"/")}),C.allowLogOn=l.getCookieValue("TermAndConditon"),void 0===C.allowLogOn?(C.allowLogOn=!0,l.setCookie("TermAndCondition",C.allowLogOn,"/")):C.allowLogOn=l.getCookieValue("TermAndCondition"),this.loggedOn=n.isLoggedOn(),this.errorMessage="",this.loginFieldError="",this.accountLocked=l.getLockedStatus()||!1,this.searchUrl=o.formBATeamsiteURL("searchba"),this.mmbUrl=o.formBATeamsiteURL("managebooking"),this.userInfo="",this.accountBarOpen=!1,this.rememberMe=!1,this.country=c.getCountry().toUpperCase(),this.language=c.getLanguage(),this.isLoginModalOpen=!1,this.loginLoading=!1,this.bookingRef="",this.lastname="",this.scrollToMain=function(e){this.scrollContent(e,"maincontent"),t.focusEvent(e,"tabBack")},this.scrollToNav=function(e){this.scrollContent(e,"skipper")},this.updateFormParams=function(t){var a=e.document.getElementById("dualForm");this.dualFormKey="olci"===t?104510:"mmb"===t?104002:{},a.action=this.mmbUrl+"?eId="+this.dualFormKey,a.submit()},this.scrollContent=function(t,a){var n;13===t.keyCode&&(n=e.document.getElementById(a),n&&(n.focus(),b(a)))},this.openPopup=function(t){var a;a=t.target.pathname?t.target.pathname:angular.element(t.target).parent()[0].href,t.preventDefault(),e.open(a,"","height=400,width=900")},this.setUserData=function(e){C.userInfo=e,C.allowLogOn&&(C.userInfo.isLoggedIn=!0)},C.allowLogOn&&g(),l.getUsername()&&(this.username=l.getUsername(),this.rememberMe=!0),l.getCookieValue("rememberMe")&&(this.rememberMe=!0),this.checkInvalid=function(){return void 0===C.username||""===C.username||void 0===C.password||""===C.password?!0:!1},this.logOn=function(){C.rememberMe?l.setCookie("rememberMe","1","/",!1,365,"days"):l.getCookieValue("rememberMe")&&l.removeCookie("rememberMe","/"),this.checkInvalid()||(f.logOn(C.username,C.password,C.rememberMe),h.setAttribute(s.TRACKING.interaction,s.TRACKING.login),C.loginLoading=!0)},this.checkLoginForm=function(){C.errorMessage="",C.loginFieldError="",void 0!==C.username&&""!==C.username||void 0!==C.password&&""!==C.password?void 0===C.username||""===C.username?C.loginFieldError="username":(void 0===C.password||""===C.password)&&(C.loginFieldError="password"):C.errorMessage=s.EMPTY_LOGIN_FORM_MESSAGE},this.logOff=function(){n.logOff()},u.get("header-beta-change-country-text-opt").then(function(e){C.optOut='<a href="'+o.formBATeamsiteURL("home",null,"betaabandon=true")+'">'+e+"</a>"}),m=a.$on(r.LOG_ON_FAILED,function(t,a){C.username&&C.password&&(a.data.error===s.LOG_ON_FAILED_ERROR&&a.data.error_description===s.LOG_ON_FAILED_ERROR_DESCRIPTION?u.get("header-beta-log-in-error").then(function(e){C.errorMessage=e}):e.location.href=o.formBATeamsiteURL("loginr")),C.loginLoading=!1}),p=a.$on(r.LOCKED,function(t,a){a.indexOf(s.LOCK_LEVEL_TWO)>-1?(C.accountLocked=l.getLockedStatus(),u.get("header-beta-locked-error").then(function(e){C.errorMessage=e})):a.indexOf(s.LOCK_LEVEL)>-1&&(C.accountLocked=l.getLockedStatus(),e.location.href=o.formBATeamsiteURL("loginr"))}),v=a.$on(r.LOG_ON_SUCCESS,function(){C.loggedOn=n.isLoggedOn(),C.allowLogOn&&g(),C.accountBarOpen=!1,C.accountLocked=l.getLockedStatus(),C.errorMessage=""}),L=a.$on(r.LOG_OFF_SUCCESS,function(){var t=e.location.href.match(/travel\/([a-z])\w+\//g),a=e.location.href.match(/\/([a-z]){2}\_([a-z]){2}[\s\S].*/gi);C.loggedOn=n.isLoggedOn(),l.removeCookie("TermAndCondition","/"),C.userInfo="",C.username=l.getUsername(),C.password="",C.allowLogOn&&t&&a&&(e.location.href="/"+t+s.PUBLIC+a)}),a.$on("$destroy",m),a.$on("$destroy",p),a.$on("$destroy",v),a.$on("$destroy",L),a.$on("$destroy",S)},ba.siteFurniture.header.Module.controller("GlobalHeaderController",["$window","$scope","$rootScope","BAAuthenticationService","AuthenticationConstants","URLFormulationService","CustomerService","BACookieService","HeaderConstants","ResourceBundle","ClientLocaleService","LocaleSelectionModalService","$anchorScroll","CustomerLoginService","AnalyticsTrackingService",ba.siteFurniture.header.GlobalHeaderController]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.SubNavController=function(e,t,a,n){var r,o,i,l=this;l.escapeNav=function(e){e.keyCode===t.ESC_KEY&&(a.$broadcast(t.CLOSE_BROADCAST,"escape"),a.$broadcast("open-nav",!1))},l.toggleNav=function(s,u,c,d){l.escapeNav(s),r=n.innerWidth<t.MOBILE_WIDTH,o=(s.keyCode===t.ENTER_KEY||s.keyCode===t.SPACE_BAR||c===t.INTERACTION.HOVER||s.type===t.EVENT.CLICK)&&!r,i=c===t.INTERACTION.SELECT&&(s.keyCode===t.ENTER_KEY||s.keyCode===t.SPACE_BAR||s.type===t.EVENT.CLICK||s.type===t.EVENT.TOUCH)&&r,(o||i)&&(s.preventDefault(),u===t.CHOICE.OPEN?e.openNav=!0:u===t.CHOICE.CLOSE?e.openNav=!1:e.openNav=!e.openNav,d||a.$broadcast("open-nav",e.openNav))},l.closeAll=function(){r=n.innerWidth<t.MOBILE_WIDTH,r||(a.$broadcast(t.CLOSE_BROADCAST,"escape"),a.$broadcast("open-nav",!1))}},ba.siteFurniture.header.Module.controller("SubNavController",["$scope","HeaderConstants","$rootScope","$window",ba.siteFurniture.header.SubNavController]),ba.lang.namespace("ba.siteFurniture.appheader"),ba.siteFurniture.appheader.appHeaderDirective=function(e){return{restrict:"A",templateUrl:"ba-site-furniture/templates/ba-appheader.html",controller:"AppHeaderController",transclude:!0,controllerAs:"appHeader",scope:{pageTitle:"=",currentPageNumber:"=",totalPages:"=",hideProgressBar:"="},link:function(t){t.faqs=e.ABOUT_BETA_KEYS,t.global=t.appHeader}}},ba.siteFurniture.Lib.directive("baAppheader",["HeaderConstants",ba.siteFurniture.appheader.appHeaderDirective]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.globalHeaderDirective=function(e,t,a,n,r,o,i,l,u,c,d,b,f,h,g){return{restrict:"A",transclude:!0,controller:"GlobalHeaderController",controllerAs:"global",scope:{layout:"=?",accountBar:"=?",userInfo:"=?",generalDataModel:"=?",pageTitle:"=?",disableLogin:"=?"},link:function(a){var m,p,v,L,S=angular.element(f[0].querySelector("body"));"undefined"!=typeof s&&(s.ActivityMap.linkExclusions="exclude-user-details"),a.headerConstants=n,a.showSearch=u.get("BA_SEARCH_ENABLED",!1),a.loadingMessage=n.LOGIN_LOADING_MESSAGE,L=angular.element(f[0].querySelector(".login-submit")),L.on("touch",function(){global.checkLoginForm(),global.loginLoading=!0}),a.toggleVisibility=function(e){a[e]=!a[e],a.hamburgerMenuActive&&a.global.accountBarOpen&&a.toggleAccountBar()},a.toggleAccountBar=function(){r.$broadcast("toggleAcBar")},p=r.$on("toggleAcBar",function(){a.global.accountBarOpen=!a.global.accountBarOpen,a.hamburgerMenuActive&&a.global.accountBarOpen&&(a.hamburgerMenuActive=!1)}),r.$on("$destroy",p),v=r.$on("open-nav",function(e,t){a.showFocusNav=t}),r.$on("$destroy",v),a.focusEvent=function(e,t){var r,o;e&&(r=e.keyCode===n.KEY_CODES.TAB&&e.shiftKey===!1,o=e.keyCode===n.KEY_CODES.TAB&&e.shiftKey===!0),e&&(t===n.TAB_FORWARD&&r||t===n.TAB_BACK&&o)&&(a.searchBarActive=!1,a.focusActive=!1)},a.trackEvent=function(e){g.setAttribute(n.TRACKING.interaction,n.TRACKING[e])},a.clickSearchEvent=function(){a.searchBarActive?(a.searchBarActive=!1,a.focusActive=!1,S.removeClass(n.OPEN_MODAL_CLASS),c(function(){angular.element(document.querySelector(n.SEARCHICON))[0].focus()},100)):(a.searchBarActive=!0,a.focusActive=!0,S.addClass(n.OPEN_MODAL_CLASS),c(function(){angular.element(document.querySelector(n.SEARCHINPUT))[0].focus()},100))},angular.element(e).on("resize",function(){a.hamburgerMenuActive&&(m=document.querySelector(".menu-icon-new"),a.hamburgerMenuActive=0!==m.offsetHeight,a.showFocusNav=!1,a.$apply())}),a.getDefaultLinks=function(){t.getData().then(function(e){a.navList=l.setVisible(e.menu),a.showSearch&&(a.showSearch=!0)})},a.openLoginModal=function(){a.renderLoginModal=!0,c(function(){a.global.loggedOn||a.global.userInfo?a.global.accountLocked&&(e.location.href="/travel/loginr/public/"+h.getLanguage()+"_"+h.getCountry()):(a.global.loginFields&&(document.querySelector(n.LOGINMODAL).setAttribute(n.ARIALABEL,a.global.loginFields.loginTitle),document.querySelector(n.LOGINMODAL).setAttribute(n.ARIADESCRIBEDBY,n.ARIADIALOGDESC)),a.global.isLoginModalOpen=!0,c(function(){angular.element(document.querySelector(n.LOGINMODALCLOSE))[0].focus()},100))},50)},a.generalDataModel&&a.generalDataModel.globalNav?(a.navList=i.transformData(a.generalDataModel.globalNav),a.showSearch&&(a.showSearch=d.isSearch(a.generalDataModel.globalNav)),a.global.loginFields=b.getFieldValues(a.generalDataModel.globalNav)):a.generalDataModel&&a.generalDataModel.hasBeenCalled?a.getDefaultLinks():o.getData().then(function(e){var t=i.transformData(e);a.showSearch&&(a.showSearch=d.isSearch(e)),a.global.loginFields=b.getFieldValues(e),t?a.navList=t:a.getDefaultLinks()})["catch"](function(){a.getDefaultLinks()})},templateUrl:"ba-site-furniture/templates/ba-globalheader.html"}},ba.siteFurniture.Lib.directive("baGlobalheader",["$window","DefaultHeaderProxy","$parse","HeaderConstants","$rootScope","HeaderLinksProxy","HeaderLinksModel","DefaultDataTransformer","Environment","$timeout","CheckSearchService","LoginReaderFieldsService","$document","ClientLocaleService","AnalyticsTrackingService",ba.siteFurniture.globalheader.globalHeaderDirective]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.mmbFormDirective=function(e,t,a,n){return{controller:"GlobalHeaderController",controllerAs:"global",scope:{formId:"=",title:"="},link:function(r){var o=n.isLoggedOn;r.updateFormParams=function(n,i){var l,s=e.document.getElementById(a.DUAL_FORM_PREFIX+r.formId);i.preventDefault(),o()&&(l={membership:"execclub/_gf"}),r.mmbUrl=t.formBATeamsiteURL("managebooking",l),n===a.DUAL_FORM_OLCI_ID?r.dualFormKey=a.DUAL_FORM_OLCI_VALUE:n===a.DUAL_FORM_MMB_ID&&(r.dualFormKey=a.DUAL_FORM_MMB_VALUE),s&&s.querySelector&&s.querySelector("#dualFormEID").setAttribute("value",r.dualFormKey),s.action=r.mmbUrl,""!==r.global.bookingRef&&""!==r.global.lastname&&s.submit()}},templateUrl:"ba-site-furniture/templates/ba-mmb-form.html"}},ba.siteFurniture.Lib.directive("mmbForm",["$window","URLFormulationService","HeaderConstants","BAAuthenticationService",ba.siteFurniture.globalheader.mmbFormDirective]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.newsFeedDirective=function(e){return{restrict:"A",scope:{limitValue:"="},link:function(t){e.getData().then(function(e){t.travelNews=e,t.newsLoaded=!0})},templateUrl:"ba-site-furniture/templates/ba-news-feed.html"}},ba.siteFurniture.Lib.directive("newsFeed",["TravelNewsProxy",ba.siteFurniture.globalheader.newsFeedDirective]),ba.lang.namespace("ba.siteFurniture.progressheader"),ba.siteFurniture.progressHeaderDirective=function(){return{scope:{pageTitle:"=",currentPageNumber:"=",totalPages:"="},restrict:"A",transclude:!0,templateUrl:"ba-site-furniture/templates/ba-progressheader.html"}},ba.siteFurniture.Lib.directive("baProgressHeader",[ba.siteFurniture.progressHeaderDirective]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.relativeUrl=function(e,t,a,n){return{restrict:"A",replace:!0,scope:{relativeUrl:"@"},controller:["$scope","$element","$attrs","$filter",function(r,o,i,l){function s(){var e=l("urlFilter")(r.relativeUrl);d()&&(e=e.replace(n.PUBLIC_URL,n.EXEC_URL)),i.$set("href",e)}var u,c,d=e.isLoggedOn;u=t.$on(a.LOG_ON_SUCCESS,function(){s()}),c=t.$on(a.LOG_OFF_SUCCESS,function(){s()}),r.$watch("relativeUrl",function(){s()}),t.$on("$destroy",u),t.$on("$destroy",c)}]}},ba.siteFurniture.Lib.directive("baRelativeUrl",["BAAuthenticationService","$rootScope","AuthenticationConstants","HeaderConstants",ba.siteFurniture.globalheader.relativeUrl]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.searchDirective=function(e,t,a,n,r){return{transclude:!0,scope:{searchBarActive:"=",focusActive:"=",focusFull:"=",closeSearch:"=",focusEvent:"=",hasSearchValue:"=?"},link:function(o){o.searchValue="",o.submitSearch=function(){r.setAttribute(t.TRACKING.interaction,t.TRACKING.siteSearch),e.location.href=a.formBATeamsiteURL("searchba",null,"p_search_text="+o.searchValue)},o.$watch("searchValue",function(){""!==o.searchValue?(o.hasSearchValue=!0,o.focusFull=!0):(o.hasSearchValue=!1,o.focusFull=!1)}),o.escape=function(e){27===e.keyCode&&(o.searchBarActive=!1,o.focusActive=!1,angular.element(document.querySelector("body")).removeClass(t.OPEN_MODAL_CLASS),n(function(){angular.element(document.querySelector(t.SEARCHICON))[0].focus()},100))}},templateUrl:t.SEARCH_TEMPLATE}},ba.siteFurniture.Lib.directive("baSearch",["$window","HeaderConstants","URLFormulationService","$timeout","AnalyticsTrackingService",ba.siteFurniture.globalheader.searchDirective]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.subNavDirective=function(e,t,a,n,r){return{restrict:"A",controller:"SubNavController",controllerAs:"subNav",scope:{navData:"=",navNum:"=",navTotal:"="},link:function(t){var o,i,l;t.openNav=!1,t.navPos=a.POS.LEFT,t.isLoggedOn=n.isLoggedOn(),i=e.$on(r.LOG_ON_SUCCESS,function(){t.isLoggedOn=n.isLoggedOn()}),l=e.$on(r.LOG_OFF_SUCCESS,function(){t.isLoggedOn=n.isLoggedOn()}),t.mmbInSub=!1,t.calcMmbPos=function(){t.navData&&t.navData.content&&angular.forEach(t.navData.content,function(e){e&&e.isMMB&&(t.mmbInSub=!0)})},t.calcSubLength=function(){t.subLength=0,t.navData&&t.navData.content&&angular.forEach(t.navData.content,function(e){(!t.isLoggedOn&&"prepin"===e.visible.auth||t.isLoggedOn&&"postpin"===e.visible.auth||"both"===e.visible.auth)&&e.visible.market&&(t.subLength=t.subLength+1)})},t.setNavPosition=function(){t.navTotal>1&&(t.navNum>t.navTotal/3*2&&(t.navPos=a.POS.RIGHT),t.navNum<=t.navTotal/2+1&&t.navNum>t.navTotal/2&&(t.navPos=a.POS.CENTER))},t.setNavPosition(),t.calcSubLength(),t.calcMmbPos(),o=e.$on(a.CLOSE_BROADCAST,function(e,a){a!==t.navNum&&(t.openNav=!1)}),e.$on("$destroy",o),e.$on("$destroy",i),e.$on("$destroy",l)},templateUrl:"ba-site-furniture/templates/ba-sub-nav.html"}},ba.siteFurniture.Lib.directive("subNav",["$rootScope","$window","HeaderConstants","BAAuthenticationService","AuthenticationConstants",ba.siteFurniture.globalheader.subNavDirective]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.subNavLocaleDirective=function(e,t,a,n,r){return{restrict:"A",controller:"SubNavController",controllerAs:"subNav",scope:{navNum:"="},link:function(o){var i;o.openNav=!1,o.navPos=a.POS.RIGHT,o.windowWidth=t.innerWidth,i=e.$on(a.CLOSE_BROADCAST,function(e,t){t!==o.navNum&&(o.openNav=!1)}),o.focusNav=function(){e.$broadcast(a.CLOSE_BROADCAST,o.navNum),e.$broadcast("open-nav",!1)},o.country=r.getCountry(),o.language=r.getLanguage(),o.country.toLowerCase()===a.GB_SHORT?o.countryLabel=a.UK_SHORT:o.countryLabel=o.country,n.getLocaleData().then(function(e){try{o.selectedCountry=e.countries.filter(function(e){return e.code.toLowerCase()===o.country}),o.countryName=o.selectedCountry[0].name}catch(t){o.countryName=a.UK}try{o.selectedLanguage=e.languages.filter(function(e){return e.code.toLowerCase()===o.language}),o.languageName=o.selectedLanguage[0].name}catch(t){o.languageName=a.ENGLISH}})["catch"](function(){o.countryName=a.UK,o.languageName=a.ENGLISH}),e.$on("$destroy",i)},templateUrl:"ba-site-furniture/templates/ba-sub-nav-locale.html"}},ba.siteFurniture.Lib.directive("subNavLocale",["$rootScope","$window","HeaderConstants","LocaleSelectionModalService","ClientLocaleService",ba.siteFurniture.globalheader.subNavLocaleDirective]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.subNavSearchDirective=function(e,t,a,n){
return{restrict:"A",controller:"SubNavController",controllerAs:"subNav",scope:{navNum:"="},link:function(t){var r;t.openNav=!1,t.navPos=a.POS.RIGHT,t.searchUrl=n.formBATeamsiteURL("searchba"),r=e.$on(a.CLOSE_BROADCAST,function(e,a){a!==t.navNum&&(t.openNav=!1)}),t.focusNav=function(){e.$broadcast(a.CLOSE_BROADCAST,t.navNum)},e.$on("$destroy",r)},templateUrl:"ba-site-furniture/templates/ba-sub-nav-search.html"}},ba.siteFurniture.Lib.directive("subNavSearch",["$rootScope","$window","HeaderConstants","URLFormulationService",ba.siteFurniture.globalheader.subNavSearchDirective]),ba.lang.namespace("ba.siteFurniture.globalheader"),ba.siteFurniture.globalheader.baTextInputDirective=function(e){return{restrict:"A",transclude:!0,scope:{fieldTitle:"=?",value:"=?",clear:"=?",fieldId:"=?"},link:function(t,a){var n=angular.element(a[0].querySelector("input")),r=angular.element(a[0].querySelector(".clear-button"));t.labelMove=!1,t.fieldId=n[0].id,void 0===t.clear&&(t.clear=!0),void 0!==t.value&&""!==t.value&&(t.labelMove=!0,t.showClear=!1),n.on(e.ONFOCUS,function(a){t.labelMove=!0,t.checkClear(e.ONFOCUS,a)}),n.on(e.ONBLUR,function(a){""===n.val()&&(t.labelMove=!1),t.checkClear(e.ONBLUR,a)}),t.$watch("value",function(){void 0!==t.value&&""!==t.value||""!==document.activeElement.id&&n[0].id===document.activeElement.id?t.labelMove=!0:t.labelMove=!1,""!==document.activeElement.id&&n[0].id===document.activeElement.id&&t.checkClear("focus",null)}),r.on(e.ONBLUR,function(){t.showClear=!1}),r.on(e.ONCLICK,function(){t.value="",t.showClear=!1,n[0].focus(),n.$empty=!0}),t.checkClear=function(a,n){t.clear&&(a===e.ONFOCUS&&(void 0===t.value||""===t.value?t.showClear=!1:t.showClear=!0),a===e.ONBLUR&&(n.explicitOriginalTarget&&n.originalTarget&&n.explicitOriginalTarget.nodeName!==n.originalTarget.nodeName?n.explicitOriginalTarget.form||(t.showClear=!1):(n.relatedTarget&&n.originalTarget||n.target&&n.relatedTarget)&&(n.originalTarget&&(!n.relatedTarget.form||"INPUT"===n.originalTarget.nodeName&&"INPUT"===n.relatedTarget.nodeName)&&(t.showClear=!1),n.target&&(!n.relatedTarget.form||"INPUT"===n.target.nodeName&&"INPUT"===n.relatedTarget.nodeName)&&(t.showClear=!1))))}},templateUrl:"ba-site-furniture/templates/ba-text-input.html"}},ba.siteFurniture.Lib.directive("baTextInput",["HeaderConstants",ba.siteFurniture.globalheader.baTextInputDirective]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.DefaultHeaderProxy=function(e,t,a,n){this.$q=e,this.$http=t,this.globalConstants=a,this.resourceBundle=n},ba.siteFurniture.header.DefaultHeaderProxy.prototype.getData=function(){var e=this;return angular.forEach(e.globalConstants.menu,function(t){e.resourceBundle.get(t.title).then(function(e){t.title=e}),angular.forEach(t.content,function(t){e.resourceBundle.get(t.title).then(function(e){t.title=e}),angular.forEach(t.items,function(t){e.resourceBundle.get(t.text).then(function(e){t.text=e})})})}),e.$q.when(e.globalConstants)},ba.siteFurniture.header.Module.service("DefaultHeaderProxy",["$q","$http","GlobalConstants","ResourceBundle",ba.siteFurniture.header.DefaultHeaderProxy]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.HeaderLinksProxy=function(e,t,a,n){var r,o,i,l;this.$q=e,this.$http=t,r=a.getCountry().toUpperCase(),o=a.getLanguage(),i=o+"_"+r,l=n.LINKS_QUERY_MARKET_1+r+n.LINKS_QUERY_MARKET_2,this.url=n.LINKS_QUERY_CONENT_PLAT+a.getLocale()+n.LINKS_QUERY_LOCALE+i+n.LINKS_QUERY_FQ_1+l+n.LINKS_QUERY_FQ_2},ba.siteFurniture.header.HeaderLinksProxy.prototype.getData=function(){var e=this,t=e.$q.defer();return e.$http({method:"GET",url:e.url}).then(function(e){t.resolve(e.data.response.docs[0].content_translate)})["catch"](function(){t.reject()}),t.promise},ba.siteFurniture.header.Module.service("HeaderLinksProxy",["$q","$http","ClientLocaleService","HeaderConstants",ba.siteFurniture.header.HeaderLinksProxy]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.TravelNewsProxy=function(e,t){this.$q=e,this.$http=t,this.url="/cms/functional/rss/travelNews_feed.json"},ba.siteFurniture.header.TravelNewsProxy.prototype.getData=function(){var e=this,t=e.$q.defer();return e.$http({method:"GET",url:e.url}).then(function(e){t.resolve(e.data.rss.channel)})["catch"](function(){t.reject()}),t.promise},ba.siteFurniture.header.Module.service("TravelNewsProxy",["$q","$http",ba.siteFurniture.header.TravelNewsProxy]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.Module.service("AboutBetaService",["HeaderConstants","$window",function(e,t){return{modalElements:{firstModalElement:!1,lastModalElement:!1},modalAboutLink:!1,cycleTabs:function(t,a){var n=9===t.keyCode,r=t.shiftKey&&9===t.keyCode;n&&!r&&a===e.LAST?(t.preventDefault(),this.modalElements.firstModalElement=!this.modalElements.firstModalElement):r&&a===e.FIRST&&(t.preventDefault(),this.modalElements.lastModalElement=!this.modalElements.lastModalElement)},toggleAboutBeta:function(){var e=t.document.getElementById("about-new-site");return this.modalAboutLink=!this.modalAboutLink,e&&e.children[0]&&e.children[0].focus(),this.modalAboutLink},closeAboutBetaKey:function(e){return 13===e.keyCode?this.toggleAboutBeta():this.modalAboutLink}}}]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.Module.service("CheckSearchService",["HeaderConstants",function(e){return{isSearch:function(t){return t.menu&&(t.menu.siteSearch&&t.menu.siteSearch.option===e.SHOW||!t.menu.siteSearch)?!0:!1}}}]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.Module.service("LoginReaderFieldsService",function(){return{getFieldValues:function(e){var t={};return e.menu&&void 0!==e.menu.loginModal&&e.menu.loginModal.title&&e.menu.loginModal.text?(t.loginTitle=e.menu.loginModal.title,t.loginDesc=e.menu.loginModal.text,t):null}}}),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.DefaultDataTransformer=function(){},ba.siteFurniture.header.DefaultDataTransformer.prototype.setVisible=function(e){var t;return t=function(e){e.hasOwnProperty("visible")||(e.visible={auth:"both",market:!0})},angular.forEach(e,function(e){t(e),angular.forEach(e.content,function(e){t(e),angular.forEach(e.items,function(e){t(e)})})}),e},ba.siteFurniture.header.Module.service("DefaultDataTransformer",[ba.siteFurniture.header.DefaultDataTransformer]),ba.lang.namespace("ba.siteFurniture.header"),ba.siteFurniture.header.HeaderLinksModel=function(e,t){this.clientLocaleService=e,this.$rootScope=t},ba.siteFurniture.header.HeaderLinksModel.prototype.transformData=function(e){var t,a,n,r,o,i,l,s,u,c,d=this;if(s=function(e,t){var a,n,r={auth:"both",market:!0};return e&&(r.auth=e.authState),t&&t.markets&&(a=t.markets.replace(/\s/g,"").split(","),n=d.clientLocaleService.getCountry().toUpperCase(),("show"===t.option&&-1===a.indexOf(n)||"hide"===t.option&&-1!==a.indexOf(n))&&(r.market=!1)),r},i=function(e){var t,a,n,r=[];if(e)for(t=0;t<e.length;t++)a=e[t],a.link&&(a=a.link,r.push({type:"link",text:a.text,href:a.href,iconURL:a.iconURL||null,buttonStyle:a.buttonStyle||null,visible:s(a.visibilityOptions,a.marketVisibility)})),a.plainText&&(a=a.plainText,n=a.text,r.push({type:"text",text:n,visible:s(a.visibilityOptions,a.marketVisibility)})),a.mmbPod&&(a=a.mmbPod,r.push({type:"mmbPod",visible:s(a.visibilityOptions,a.marketVisibility)})),a.travelNews&&(a=a.travelNews,r.push({type:"newsFeed",limit:3,visible:s(a.visibilityOptions,a.marketVisibility)}));return r},c=function(e){var t,a;if(e)for(t=0;t<e.length;t++)if(a=e[t],a.mmbPod)return!0;return!1},r=function(e){var t,a=[];if(e)for(t=0;t<e.length;t++)e[t].items&&"undefined"==typeof e[t].items.length&&(e[t].items=[e[t].items]),a.push({title:e[t].secondaryTitle,items:i(e[t].items),isMMB:c(e[t].items),visible:s(e[t].visibilityOptions,e[t].marketVisibility)});return a},n=function(e){return e.secondarySection&&"undefined"==typeof e.secondarySection.length&&(e.secondarySection=[e.secondarySection]),{title:e.primaryTitle,content:r(e.secondarySection),visible:s(e.visibilityOptions,e.marketVisibility)}},o=function(e){var t,a=[];for(t=0;t<e.length;t++)a.push({title:e[t].text,href:e[t].href,visible:s(e[t].visibilityOptions,e[t].marketVisibility)});return a},e.menu&&e.menu.primarySection)for(t=[],a=e.menu.primarySection,a&&"undefined"==typeof a.length&&(a=[a]),u=0;u<a.length;u++)t.push(n(a[u]));return e.menu&&e.menu.adhocLinks&&((null===t||void 0===t)&&(t=[]),l=e.menu.adhocLinks,"undefined"==typeof l.length&&(l=[l]),l=o(l),d.$rootScope.$broadcast("optional-link-set",l),t.push(l)),t},ba.siteFurniture.header.Module.service("HeaderLinksModel",["ClientLocaleService","$rootScope",ba.siteFurniture.header.HeaderLinksModel]);
angular.module("ba-site-furniture-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-site-furniture/templates/ba-footer.html",'<footer class="footer"><div class="row"><nav><ul data-ng-repeat="footerSection in footersitelinks" data-ng-class="{\'social-links\': footerSection.type === \'socialLinks\'}" data-ng-if="((!isLoggedOn() && footerSection.visible.auth === \'prepin\') || (isLoggedOn() && footerSection.visible.auth === \'postpin\') || (footerSection.visible.auth === \'both\')) && footerSection.visible.market"><li data-ng-repeat="siteLink in footerSection.links" data-ng-if="((!isLoggedOn() && siteLink.visible.auth === \'prepin\') || (isLoggedOn() && siteLink.visible.auth === \'postpin\') || (siteLink.visible.auth === \'both\')) && siteLink.visible.market"><a data-ng-if="footerSection.type === \'textLinks\'" data-ba-generate-url="" data-relative-url="{{siteLink.href}}" target="{{siteLink.openStyle}}">{{siteLink.text}}</a> <span data-ng-if="footerSection.type === \'textLinks\'" class="pipe" aria-hidden="true">|</span> <a data-ng-if="footerSection.type === \'socialLinks\'" title="{{siteLink.text}}" target="{{siteLink.openStyle}}" data-ba-generate-url="" data-relative-url="{{siteLink.href}}"><img data-ng-src="{{siteLink.iconURL}}" alt="{{siteLink.text}}"></a></li></ul></nav><p>&copy; {{ \'footer-copyright\' | baResourceBundleDynamic }}</p><div class="footer-images"><a title="{{ \'footer-home\' | baResourceBundleDynamic }}" data-ba-teamsite-url="" data-pageid="HOME" tabindex="0"><svg width="86" height="22"><title id="ba_masterbrand_positive" data-ba-resource-bundle-static="" data-key="site-furniture-british-airways"></title><image data-ng-src="images/ba_speedmarque.png" xlink:href="" data-ng-href="images/ba_speedmarque.svg" width="86" height="22" data-ng-alt="{{\'footer-home\' | baResourceBundleDynamic}}"></image></svg></a> <a ng-if="layout === \'incident\'" title="{{ \'footer-oneworld\' | baResourceBundleDynamic }}" data-ba-livesite-url="" data-sitename="information/flight-information/oneworld" class="oneworldLogo"><img data-ng-src="images/ow_gray_sm.png" width="40" alt="{{\'footer-oneworld\' | baResourceBundleDynamic}}"></a> <a ng-if="layout !== \'blank\' && layout !== \'incident\'" title="{{ \'footer-oneworld\' | baResourceBundleDynamic }}" data-ba-livesite-url="" data-sitename="information/flight-information/oneworld" class="oneworldLogo"><img data-ng-src="/cms/global/assets/images/site/icon/oneworldlrg.png" width="35" alt="{{\'footer-oneworld\' | baResourceBundleDynamic}}"></a></div></div></footer>'),$templateCache.put("ba-site-furniture/templates/header-search.html",'<div class="header-search" role="search"><div class="search-form-container" data-ng-click="escape($event)"><label for="search-input" class="search-label" data-ba-resource-bundle-static="" data-key="header-beta-search-label"></label><form data-ng-submit="submitSearch()" name="searchForm" class="search-form" data-ng-class="{\'hasValue\': hasSearchValue}"><input tabindex="1" id="search-input" class="header-search-input" data-ng-class="{\'hasValue\': hasSearchValue}" data-ng-model="searchValue" data-ng-focus="focusEvent($event, \'searchSelect\')" data-ng-keyup="escape($event)"> <button tabindex="1" type="submit" class="search search-icon" data-ng-class="{\'hasValue\': hasSearchValue}" aria-label="{{\'header-search-submit\' | baResourceBundleDynamic}}"><img data-ng-src="/cms/global/assets/images/site/icon/header_search.svg" alt="{{\'header-search\' | baResourceBundleDynamic}}"></button></form></div><button tabindex="1" class="close-icon" data-ng-click="closeSearch()" data-ng-keydown="focusEvent($event, \'tabForward\')"><img data-ng-src="/cms/global/assets/images/site/icon/header_cross.svg" alt="{{\'header-close\' | baResourceBundleDynamic}}"></button></div>'),$templateCache.put("ba-site-furniture/templates/old-ba-globalheader.html",'<header ng-class="{\'beta\': isBeta === \'forced\'}" class="header"><div class="skip"><a id="skipper" tabindex="1" accesskey="s" data-ng-keydown="global.scrollToMain($event, \'skipButton\')">Skip to main content</a></div><section class="header"><div class="logo-area clearfix" data-ng-class="{\'search-open\': searchBarActive === true, \'search-closed\': searchBarActive === false}"><a title="{{ \'header-britishAirwaysHome\' | baResourceBundleDynamic }}" data-ba-teamsite-url="" data-pageid="home" data-ng-keydown="focusEvent($event, \'tabBack\')" class="ba-logo {{layout}}" data-ng-class="{\'beta\': isBeta === true, \'exec\': global.userInfo.customerType === \'EXECUTIVE_CLUB\' || global.userInfo.customerType === \'PREMIER\'}" tabindex="1"></a></div><div data-ba-search="" class="header-search-container" data-focus-event="focusEvent" data-close-search="clickSearchEvent" data-search-bar-active="searchBarActive" data-focus-active="focusActive" data-ng-class="{\'search-open\': searchBarActive === true, \'search-closed\': searchBarActive === false}"></div><div class="push-right header-additional-menu" data-ng-if="!pageTitle" data-ng-include="\'ba-site-furniture/templates/header-additional-menu.html\'" data-ng-class="{\'search-open\': searchBarActive === true, \'search-closed\': searchBarActive === false}"></div><h1 class="title" data-ng-if="pageTitle" data-ng-bind-html="pageTitle"></h1></section><div class="focus-container" data-ng-if="focusActive === true" data-ng-click="clickSearchEvent()"></div><div data-ng-include="\'ba-site-furniture/templates/navigation.html\'"></div><div class="skip-back"><a tabindex="10" id="maincontent" accesskey="s" data-ng-keydown="global.scrollToNav($event)">Skip to Navigation</a></div></header>'),$templateCache.put("ba-site-furniture/templates/ba-account-section.html",'<li class="account-container" data-ng-if="!disableLogin && ((!global.loggedOn && !global.userInfo.isLoggedIn) || global.accountLocked)"><button class="account logged-out" tabindex="1" ng-click="openLoginModal()" aria-label="{{\'header-beta-login\' | baResourceBundleDynamic}}"><img data-ng-src="/cms/global/assets/images/site/icon/header_login.svg" alt="{{\'header-beta-login\' | baResourceBundleDynamic}}"> <span class="login" data-ba-resource-bundle-static="" data-key="header-beta-login" data-ng-if="(!global.loggedOn || !global.userInfo.isLoggedIn) || global.accountLocked"></span></button></li><li class="logged-in-details" data-ng-if="!disableLogin && (global.loggedOn || global.userInfo.isLoggedIn) && !global.accountLocked"><ul><li class="member-name"><a tabindex="1" data-ba-teamsite-url="" data-pageid="echome"><img data-ng-src="/cms/global/assets/images/site/icon/header_login.svg" alt="{{\'header-myAccount\' | baResourceBundleDynamic}}"> <span class="login" data-ng-class="{\'login-hide\' : (global.userInfo.name.lastName.length > 15)}">{{global.userInfo.name.title}} {{global.userInfo.name.lastName}}</span> <span class="linkExcluded">exclude-user-details</span></a></li><li class="member-spacer">|</li><li class="logout-cont"><a tabindex="1" data-ng-click="global.logOff()" class="logOut" href="javascript:void(0)"><span data-ba-resource-bundle-static="" data-key="header-beta-logout"></span></a></li></ul></li>'),$templateCache.put("ba-site-furniture/templates/ba-appheader.html",'<header class="appheader header-a row" data-ng-class="{\'progress-header-version\': !hideProgressBar}"><div class="column small-6 medium-3 large-4 no-padding-left"><a title="{{ \'header-britishAirwaysHome\' | baResourceBundleDynamic }}" data-ba-teamsite-url="" data-pageid="HOME"><svg class="without-text-size"><title data-ba-resource-bundle-static="" data-key="site-furniture-british-airways"></title><image data-ng-src="images/ba_speedmarque_positive.png" class="without-text-size" xlink:href="" data-ng-href="images/ba_speedmarque_positive.png" width="100%" height="100%" data-ng-alt="{{\'header-britishAirwaysLogo\' | baResourceBundleDynamic}}"></image></svg></a></div><div data-ba-progress-header="" data-ng-if="!hideProgressBar" data-page-title="pageTitle" data-current-page-number="currentPageNumber" data-total-pages="totalPages" class="ba-progress-header column medium-6 large-4 hide-for-small"><span data-ng-transclude=""></span></div><div ng-if="global.cugName" class="cug-name column small-6 medium-3 large-4 no-padding-left"><h3 title="{{global.cugName}}">{{global.cugName}}</h3></div></header>'),$templateCache.put("ba-site-furniture/templates/ba-globalheader.html",'<header class="header"><div class="skip"><a id="skipper" tabindex="1" accesskey="s" data-ng-keydown="global.scrollToMain($event)">{{ \'skip-main\' | baResourceBundleDynamic }}</a></div><section class="header" data-ng-class="{\'searchActive\': searchBarActive === true}" role="banner"><div class="logo-area clearfix" data-ng-class="{\'search-open\': searchBarActive === true, \'search-closed\': searchBarActive === false}"><a title="{{ \'header-britishAirwaysHome\' | baResourceBundleDynamic }}" data-ba-teamsite-url="" data-pageid="home" data-ng-keydown="focusEvent($event, \'tabBack\')" data-ng-click="trackEvent(\'brand\')" class="ba-logo {{layout}}" aria-label="home" data-ng-class="{\'beta\': isBeta === true, \'exec\': global.userInfo.customerType === \'EXECUTIVE_CLUB\' || global.userInfo.customerType === \'PREMIER\'}" tabindex="1"></a> <a tabindex="1" data-ng-if="layout !== \'blank\' && layout !== \'incident\'" data-ba-livesite-url="" data-sitename="information/flight-information/oneworld" class="one-world one-world-logo"><img data-ng-src="images/oneworldlrg.png" alt="{{\'header-oneworldFind\' | baResourceBundleDynamic}}"></a> <a ng-if="layout === \'incident\'" data-ba-livesite-url="" data-sitename="information/flight-information/oneworld" class="one-world-logo one-world-greyscale" tabindex="1"><img data-ng-src="images/ow_gray_sm.png" width="40" alt="{{\'header-oneworldFind\' | baResourceBundleDynamic}}"></a></div><div data-ba-search="" class="header-search-container" data-focus-event="focusEvent" data-close-search="clickSearchEvent" data-search-bar-active="searchBarActive" data-focus-active="focusActive" data-focus-full="focusFull" data-ng-class="{\'search-open\': searchBarActive === true, \'search-closed\': searchBarActive === false}" role="search"></div><div class="push-right header-additional-menu" data-ng-if="!pageTitle" data-ng-include="\'ba-site-furniture/templates/header-additional-menu.html\'" data-ng-class="{\'search-open\': searchBarActive === true, \'search-closed\': searchBarActive === false}"></div><div data-ng-if="renderLoginModal" class="login-modal" data-ng-class="{\'open\': global.isLoginModalOpen, \'loading\': global.loginLoading}" data-focus-modal="" style="z-index: 1001" data-focus-is-open="global.isLoginModalOpen" data-focus-return-element="account" aria-hidden="{true: global.isLoginModalOpen === true, false: global.isLoginModalOpen === false}"><div data-ng-include="\'ba-site-furniture/templates/ba-login-form.html\'"></div></div><div data-ba-logintc-popup=""></div><h1 class="title" data-ng-if="(pageTitle !== undefined && pageTitle !== \'\')" data-ng-bind-html="pageTitle"></h1></section><div class="focus-container" data-ng-click="clickSearchEvent()" data-ng-class="{\'focusActive\': focusActive, \'focusFull\': focusFull}"></div><div data-ng-include="\'ba-site-furniture/templates/ba-navigation.html\'"></div><div class="skip-back"><a tabindex="10" id="maincontent" accesskey="s" data-ng-keydown="global.scrollToNav($event)">{{ \'skip-nav\' | baResourceBundleDynamic }}</a></div></header>'),$templateCache.put("ba-site-furniture/templates/ba-login-form.html",'<div data-ng-if="!global.loginLoading && !global.loggedOn" class="login-modal-content"><div class="main-form-container" aria-hidden="{{!global.isLoginModalOpen}}"><div class="login-form"><h2 data-ba-resource-bundle-static="" data-key="header-beta-welcome-message"></h2><div data-ng-if="global.errorMessage !== \'\'" class="log-on-failed"><p data-ng-bind-html="\'header-beta-login-error\' | baResourceBundleDynamic: {S1: global.errorMessage}" role="alert"></p></div><form data-ng-submit="global.logOn()" name="global.navLoginForm" id="navLoginForm" novalidate=""><div ba-text-input="" data-field-title="\'header-beta-login-id\'" data-value="global.username"><input id="loginid" data-ng-model="global.username" aria-invalid="false" required="required" aria-required="true" spellcheck="false" size="12" title="{{ \'header-beta-login-id\' | baResourceBundleDynamic }}" type="text" role="textbox" name="membershipNumber"><div class="field-error" ng-hide="global.loginFieldError !== \'username\'" ng-show="global.navLoginForm.membershipNumber.$error.required && global.navLoginForm.membershipNumber.$dirty"><p data-ba-resource-bundle-static="" data-key="header-beta-field-error" role="alert"></p></div></div><div ba-text-input="" data-field-title="\'header-beta-pin-pass\'" data-value="global.password"><input id="password" data-ng-model="global.password" aria-invalid="false" ng-model-options="{allowInvalid: false}" required="required" spellcheck="false" autocomplete="off" aria-required="true" size="12" title="{{ \'header-beta-pin-pass\' | baResourceBundleDynamic }}" name="password" type="password"><div class="field-error" ng-hide="global.loginFieldError !== \'password\'" ng-show="global.navLoginForm.password.$error.required && global.navLoginForm.password.$dirty"><p data-ba-resource-bundle-static="" data-key="header-beta-field-error" role="alert"></p></div></div><div class="remember-me-container"><input value="false" data-ng-model="global.rememberMe" name="rememberLogin" id="rem-check" class="rem-check" type="checkbox"> <label for="rem-check" data-ba-resource-bundle-static="" data-key="header-beta-remember-me" class="large-checkbox-button"></label></div><button class="button small ivsg2-height-override login-submit" data-ng-click="global.checkLoginForm()" type="submit" data-ba-resource-bundle-static="" data-key="header-beta-login"></button> <a class="no-underline" data-ba-teamsite-url="" data-pageid="forgottendetails" data-ba-resource-bundle-static="" data-key="header-beta-forgotten"></a></form></div><div class="divider"></div><div class="register-form"><h2 data-ba-resource-bundle-static="" data-key="header-beta-sign-in-message"></h2><h3 data-ba-resource-bundle-static="" data-key="header-sign-up-desc"></h3><div class="bottom-buttons"><a class="register-button" title="{{ \'header-beta-register-for-special-offers\' | baResourceBundleDynamic }}" data-ba-teamsite-url="" data-pageid="register-now" data-queryparams="source=PHP-Register-Top" data-ba-resource-bundle-static="" data-key="header-beta-reg-now" data-ng-click="trackEvent(\'register\')"></a> <a class="no-underline" data-ng-if="global.country !== \'US\'" data-ba-resource-bundle-static="" data-ba-teamsite-url="" data-key="header-beta-login-on-business" data-pageid="loginr" data-queryparams="eId=111093&amp;URLMembershipType=onbusiness" data-ng-class="global.country"></a></div></div></div></div><div data-ng-if="global.loginLoading" role="alert" class="login-loading-cont" data-loading-bar="" data-loading-label="loadingMessage"></div><p hidden="hidden" id="dialogDesc">{{global.loginFields.loginDesc}}</p>'),$templateCache.put("ba-site-furniture/templates/ba-mmb-form.html",'<div><form method="post" action="{{global.mmbUrl}}" id="dualForm-{{formId}}" class="sub-nav-form" name="dualForm-{{formId}}"><fieldset><legend class="acc-reader">{{title}}</legend><input name="eId" type="hidden" id="dualFormEID"><div ba-text-input="" data-field-title="\'header-beta-olci-booking-ref\'" data-value="global.bookingRef" data-clear="false"><input tabindex="10" spellcheck="false" autocomplete="off" size="29" maxlength="6" type="text" name="bookingRef" id="dualFormbookingRef" data-ng-model="global.bookingRef" data-nd-bind="global.bookingRef"></div><div ba-text-input="" data-field-title="\'header-beta-olci-lastname\'" data-value="global.lastname" data-clear="false"><input tabindex="10" spellcheck="false" autocomplete="off" size="29" maxlength="59" type="text" name="lastname" id="dualFormlastname" data-ng-model="global.lastname" data-ng-bind="global.lastname"></div><div class="row dual-form-button-row"><button tabindex="10" class="button btn-primary dual-form-button-mmb" type="submit" data-ba-resource-bundle-static="" data-key="header-beta-find-mmb" data-ng-click="updateFormParams(\'mmb\', $event)"></button> <button tabindex="10" class="button btn-primary dual-form-button-olci" type="submit" data-ba-resource-bundle-static="" data-key="header-beta-check-in" data-ng-click="updateFormParams(\'olci\', $event)"></button></div></fieldset></form></div>'),$templateCache.put("ba-site-furniture/templates/ba-nav-link.html",'<a tabindex="10" data-ba-relative-url="" data-relative-url="{{item.href}}" data-ng-class="{\'button btn-primary\': item.buttonStyle === \'true\'}"><img data-ng-if="item.iconURL" data-ng-src="{{item.iconURL}}" alt=""> {{item.text}}</a>'),$templateCache.put("ba-site-furniture/templates/ba-nav-text.html","<p>{{item.text}}</p>"),$templateCache.put("ba-site-furniture/templates/ba-navigation.html",'<nav data-ng-if="navList" data-ng-class="{open: hamburgerMenuActive}" data-click-and-touch-off="" data-click-and-touch-off-callback="clickOutOfNav()" role="navigation"><div class="nav-wrapper"><ul class="mobile-account clearfix"><div data-ng-include="\'ba-site-furniture/templates/ba-account-section.html\'"></div></ul><ul class="global-nav clearfix"><li data-ng-repeat="subNav in navList" data-ng-if="((!global.loggedOn && subNav.visible.auth === \'prepin\') || (global.loggedOn && subNav.visible.auth === \'postpin\') || (subNav.visible.auth === \'both\')) && subNav.visible.market" data-sub-nav="" data-nav-data="subNav" data-nav-num="$index + 1" data-nav-total="navList.length"></li></ul><div class="country-choice-area"><div data-sub-nav-locale="" data-nav-num="navList.length + 1"></div></div></div></nav><div class="focus-container-nav" data-ng-if="showFocusNav || hamburgerMenuActive"></div>'),$templateCache.put("ba-site-furniture/templates/ba-news-feed.html",'<li class="news-item" data-ng-repeat="item in travelNews.item | limitTo:limitValue"><a ng-if="newsLoaded" tabindex="10" data-ba-relative-url="" data-relative-url="{{item.link}}">{{item.title}}</a></li>'),$templateCache.put("ba-site-furniture/templates/ba-progressheader.html",'<div class="progress-header" data-ng-class="{\'margin-number-display\': currentPageNumber === \'\',\'amex-display\': pageTitle === \'selling-progressheader-amex-offer\'}" data-ng-if="pageTitle"><small><span class="page-number" data-ng-if="currentPageNumber">{{currentPageNumber}} of {{totalPages}}</span> <span class="page-number1" data-ng-if="currentPageNumber">{{currentPageNumber}}</span> <span data-ng-transclude=""></span> <span data-ng-class="{\'no-number-display\': currentPageNumber === \'\',\'confirmation\' : pageTitle === \'selling-progressheader-confirmation\'}" class="page-name">{{pageTitle | baResourceBundleDynamic}}</span></small></div>'),$templateCache.put("ba-site-furniture/templates/ba-sub-nav-locale.html",'<div class="nav-tab-language-country" data-ng-class="{\'open\': openNav}" data-ng-mouseenter="subNav.toggleNav($event, \'open\', \'hover\', true)" data-ng-mouseleave="subNav.toggleNav($event, \'close\', \'hover\', true)" data-click-and-touch-off="" data-click-and-touch-off-callback="clickOutOfNav()"><a tabindex="10" data-ng-class="{\'open\': openNav}" data-ba-teamsite-url="" data-pageid="country_choice" data-queryparams="source=MNVLNG" role="button" data-ng-focus="focusNav()"><span class="acc-reader">{{\'header-beta-change-country\' | baResourceBundleDynamic}},</span> <img data-ng-src="/cms/global/assets/images/Wherewefly/routemaps2010/flags/24/{{country}}.png" alt=""> <span class="country-language-text-long">{{countryName}} - {{languageName}}</span></a></div>'),$templateCache.put("ba-site-furniture/templates/ba-sub-nav-search.html",'<div data-ng-class="{\'open\': openNav}" data-ng-mouseenter="subNav.toggleNav($event, \'open\', \'hover\')" data-ng-mouseleave="subNav.toggleNav($event, \'close\', \'hover\')" data-click-and-touch-off="" data-click-and-touch-off-callback="clickOutOfNav()"><a tabindex="10" role="menuitem" aria-haspopup="true" href="" data-ng-keydown="subNav.toggleNav($event, null, \'select\')" data-ng-focus="focusNav()" data-ng-click="subNav.toggleNav($event, null, \'select\')" title="{{\'header-beta-view-search-items\' | baResourceBundleDynamic}}" data-sitename="travel" data-pagename="searchba"><span aria-hidden="true" data-icon="&#xe05b;"></span> <span class="optional-text" data-ba-resource-bundle-static="" data-key="header-beta-search"></span></a><div class="sub-navigation sub-nav-search" data-ng-class="{\'open\': openNav}"><div><form name="searchform" method="get" action="{{searchUrl}}"><label hidden="hidden" class="navLabel" for="navSearch" data-ba-resource-bundle-static="" data-key="header-beta-search"></label> <input tabindex="10" class="input" placeholder="{{\'header-beta-search-for-anything\' | baResourceBundleDynamic}}" spellcheck="false" autocomplete="off" value="" size="20" id="navSearch" required="required" name="p_search_text" type="text"> <button tabindex="10" class="button small btn-primary" type="submit" data-ba-resource-bundle-static="" data-key="header-beta-go"></button></form></div></div></div>'),$templateCache.put("ba-site-furniture/templates/ba-sub-nav.html",'<div class="number-{{navNum}}-nav primary-nav-item" data-ng-class="{\'open\': openNav}" data-ng-mouseenter="subNav.toggleNav($event, \'open\', \'hover\')" data-ng-mouseleave="subNav.toggleNav($event, \'close\', \'hover\')"><a role="button" tabindex="10" aria-haspopup="true" aria-expanded="{{openNav}}" data-ng-class="{\'open\': openNav}" data-ng-click="subNav.toggleNav($event, null, \'select\')" data-ng-keydown="subNav.toggleNav($event, null, \'select\')" data-ng-focus="subNav.closeAll()">{{navData.title}} <span class="icon accordion-control" aria-hidden="true"><img data-ng-src="/cms/global/assets/images/site/icon/header_nav_arrow_up.svg" alt="{{\'header-navArrow\' | baResourceBundleDynamic}}"></span></a><div class="sub-navigation sub-nav-{{navNum}} sub-{{subLength}}-column pos-{{navPos}} mmb-{{mmbInSub}}" data-ng-class="{\'open\': openNav}" data-ng-keydown="subNav.escapeNav($event)"><ul class="sub-nav-inner"><li data-ng-repeat="content in navData.content" data-ng-if="((!isLoggedOn && content.visible.auth === \'prepin\') || (isLoggedOn && content.visible.auth === \'postpin\') || (content.visible.auth === \'both\')) && content.visible.market" data-ng-class="{\'mmb-section\': content.isMMB}" class="nav-col"><p class="nav-title">{{content.title}}</p><ul data-ng-if="content.items" data-ng-repeat="item in content.items"><li data-ng-if="((!isLoggedOn && item.visible.auth === \'prepin\') || (isLoggedOn && item.visible.auth === \'postpin\') || (item.visible.auth === \'both\')) && item.visible.market" class="nav-entry"><ng-include data-ng-if="item.type === \'link\'" src="\'ba-site-furniture/templates/ba-nav-link.html\'"></ng-include><ng-include data-ng-if="item.type === \'text\'" src="\'ba-site-furniture/templates/ba-nav-text.html\'"></ng-include><div data-ng-if="item.type === \'mmbPod\'" data-mmb-form="" data-form-id="navNum" data-title="content.title"></div><ul data-ng-if="item.type === \'newsFeed\'" data-news-feed="" data-limit-value="item.limit" class="travel-news"></ul></li></ul></li></ul></div></div>'),$templateCache.put("ba-site-furniture/templates/ba-text-input.html",'<div class="field"><label data-ng-class="{\'focusedLabel\': labelMove}" for="{{fieldId}}">{{fieldTitle | baResourceBundleDynamic}}</label><div data-ng-transclude="" data-ng-keydown="checkClear(\'focus\', event)"></div><button class="clear-button" data-ng-class="{\'hidden\': !showClear}" aria-label="clear field" type="button"></button></div>'),$templateCache.put("ba-site-furniture/templates/header-additional-menu.html",'<ul class="clearfix header-items"><li class="search-container"><button tabindex="1" data-ng-if="global.language === headerConstants.ENGLISH_CODE && showSearch" data-ng-click="clickSearchEvent()" class="search search-icon" id="header-search-button" aria-label="{{\'header-search\' | baResourceBundleDynamic}}"><img data-ng-src="/cms/global/assets/images/site/icon/header_search.svg" alt="{{\'header-search\' | baResourceBundleDynamic}}"></button></li><div data-ng-include="\'ba-site-furniture/templates/ba-account-section.html\'"></div><li class="mobile-menu-container"><button tabindex="1" aria-live="assertive" data-ng-click="toggleVisibility(\'hamburgerMenuActive\')" class="mobile-menu menu-icon-new" data-ng-class="{open: hamburgerMenuActive}" aria-label="{{hamburgerMenuActive && (\'header-close\' | baResourceBundleDynamic) || (\'header-menu\' | baResourceBundleDynamic)}}"><img data-ng-show="!hamburgerMenuActive" data-ng-src="/cms/global/assets/images/site/icon/header_menu.svg" alt="{{\'header-menu\' | baResourceBundleDynamic}}"> <img data-ng-show="hamburgerMenuActive" data-ng-src="/cms/global/assets/images/site/icon/header_cross.svg" alt="{{\'header-close\' | baResourceBundleDynamic}}"></button></li></ul>')}]);
ba.lang.namespace("ba.account.sidebar"),ba.account.sidebar.Lib=angular.module("ba-account-sidebar",["ba-i18n","ba-account-sidebar-templates","ba-analytics","ba-analytics-adobe","ba-auth","ba-content-retrieval","ba-filters-contrib","ba-logging","ba-customer"]),ba.lang.namespace("ba.account.sidebar"),ba.account.sidebar.Lib.constant("AccountBarConstants",{EC:"EXECUTIVE_CLUB",BARC:"REGISTERED_CUSTOMER",PREM:"PREMIER",BARC_LOWER:"barc",defaultTrackingObj:{dr:"",dt:document.title,scheme:"",logintype:{"default":"public",EXECUTIVE_CLUB:"execclub",PREMIER:"execclub",REGISTERED_CUSTOMER:"barc"},tier:{"default":"",blue:"Blue",bronze:"Bronze",silver:"Silver",gold:"Gold",premier:"Premier"},audience:"travel",CUSTSEG:"",GGLMember:""},PAGE_NAME:"HOME",OPEN_TEXT:"open",CLOSE_TEXT:"close",BAR_OPEN_EVENT:"accountBarOpen",ACCOUNT_LOGOFF_EVENT:"accountBarLogout",SOURCE_AB:"accountBar",SOURCE_AB_BUTTON:"accountBarbutton",SOURCE_AB_PROFILE:"VanillaYourProfile",LINKS:{accountLinkFallbackId:["ECHOME","PERSONALISEDOFFERS","ESHOP","CONTACT-EXECUTIVE-CLUB"]},TRACK_CONCUR_USER:"CORP",DT_LINK_LIST:"documentType:personalised/link-list",MEMBERSHIP_ALL:"Membership-Type_s:zzall",MEMBERSHIP_EXEC:"Membership-Type_s:EXEC"}),ba.lang.namespace("ba.account.sidebar"),ba.account.sidebar.AccountBarController=function(t,e,a,n,o,r,c){var i,l=this;this.log=t,this.premier=!1,this.accountData=e.userData,this.supplants={},this.accountData&&(a.build(this.accountData.personalAttributes.customerType).then(function(t){for(l.viewContent=t,i=0;i<l.viewContent.linkList.length;i+=1)"executive-club/tiers-and-benefits/"===l.viewContent.linkList[i].linkUrl&&l.accountData.loyalty.tier&&l.accountData.loyalty.tier.toLowerCase()!==o.BARC_LOWER&&(l.accountData.loyalty.ggl?(l.viewContent.linkList[i].linkUrl+=l.accountData.loyalty.tier.toLocaleLowerCase()+"-guest-list-benefits.page",l.viewContent.linkList[i].heading=c("titlecase")(l.accountData.loyalty.tier)+" Guest List benefits"):(l.viewContent.linkList[i].linkUrl+=l.accountData.loyalty.tier.toLocaleLowerCase()+"-benefits.page",l.viewContent.linkList[i].heading=c("titlecase")(l.accountData.loyalty.tier)+" benefits"),l.accountData.personalAttributes.customerType===o.PREM?(l.viewContent.linkList.splice(i,1),l.premier=!0):l.premier=!1)}),this.accountData.loyalty&&(l.supplants.membershipNumber={S1:l.accountData.loyalty.loyaltyAccountNumber})),this.logOffKey=function(t){9!==t.keyCode&&l.logOff()},this.logOff=function(){n.logOff().then(function(){r.trackEvent(o.ACCOUNT_LOGOFF_EVENT,e.trackingDataAccount),t.info("BA_HOME_ACCB_003: Successfully logged off")})["catch"](function(){t.info("BA_HOME_ACCB_004: Failed to log off")})}},ba.account.sidebar.Lib.controller("AccountBarController",["BALog","$scope","AccountBarViewModelBuilder","BAAuthenticationService","AccountBarConstants","analytics","$filter",ba.account.sidebar.AccountBarController]),ba.lang.namespace("ba.account.sidebar"),ba.account.sidebar.accountBarPanel=function(t,e,a,n,o,r){return{restrict:"A",controller:"AccountBarController",controllerAs:"accountBarCtrl",scope:{userData:"=",viewSize:"=?",corpTag:"=?",getAdditionalContent:"&?"},link:function(c,i){function l(t){var a=angular.fromJson(angular.toJson(e.defaultTrackingObj));return a.logintype=a.logintype[c.userData.personalAttributes.customerType]||a.logintype["default"],a.tier=a.tier[c.userData.loyalty.tier]||a.tier["default"],a.clickpage=e.PAGE_NAME,a.source=t,a}var s,u=r.isLoggedOn();c.corpTag&&o.trackEvent(e.TRACK_CONCUR_USER,{CORP:c.corpTag}),c.trackingDataAccount=l(e.SOURCE_AB),c.trackingDataAccountBtn=l(e.SOURCE_AB_BUTTON),c.trackingDataProfile=l(e.SOURCE_AB_PROFILE),c.barStatusOposit={S1:e.OPEN_TEXT},c.recentTransactionLimit=3,"large"===c.viewSize&&(c.recentTransactionLimit=5),c.showCollapsedBar=!1,c.showBar=!0,c.showBarLinks=!1,c.recentTransactionError=!1,c.toggleTemplateKey=function(t){9!==t.keyCode&&c.toggleTemplate()},c.toggleTemplate=function(){t.$emit("toggleAcBar")},"authenticated"!==c.userData.state&&!u||c.userData.personalAttributes.customerType!==e.EC&&c.userData.personalAttributes.customerType!==e.PREM||!c.userData.loyalty.tier?"authenticated"!==c.userData.state&&!u||c.userData.personalAttributes.customerType!==e.BARC?(c.contentUrl="",c.noData=!0):(c.userData.loyalty={},c.userData.loyalty.tier=e.BARC_LOWER,c.contentUrl="ba-account-sidebar/templates/account-bar-barc-postpin.html"):c.contentUrl="ba-account-sidebar/templates/account-bar-exec-postpin.html",s=t.$on("toggleAcBar",function(){c.userData.loyalty.recentTransactions||(o.trackEvent(e.BAR_OPEN_EVENT,c.trackingDataAccount),c.getAdditionalContent?c.getAdditionalContent().then(function(t){t||(c.recentTransactionError=!0)})["catch"](function(){c.recentTransactionError=!0}):c.recentTransactionError=!0),c.showCollapsedBar?(c.showCollapsedBar=!c.showCollapsedBar,c.barStatusOposit.S1=e.OPEN_TEXT,n(function(){c.showBarLinks=!c.showBarLinks},300),a.unbind("click")):(c.showCollapsedBar=!0,c.barStatusOposit.S1=e.CLOSE_TEXT,c.showBarLinks=!0,a.bind("click",function(t){var e=angular.element(document.querySelector(".login-icon, .loginIcon"));i[0].contains(t.target)||!e[0]||e[0].contains(t.target)||c.$apply(function(){c.toggleTemplate()})}))}),c.$on("$destroy",s),c.$on("$destroy",a.unbind("click")),c.componentLoaded=!0},templateUrl:"ba-account-sidebar/templates/account-bar-template.html"}},ba.account.sidebar.Lib.directive("accountBarPanel",["$rootScope","AccountBarConstants","$document","$timeout","analytics","BAAuthenticationService",ba.account.sidebar.accountBarPanel]),ba.lang.namespace("ba.account.sidebar"),ba.account.sidebar.dateFilter=function(t,e){var a=e.getCountry();return function(e,n){return"shortSlash"===n&&(n="us"===a?"MM/dd/yyyy":"dd/MM/yyyy"),t("date")(e,n)}},ba.account.sidebar.Lib.filter("dateFilter",["$filter","ClientLocaleService",ba.account.sidebar.dateFilter]),ba.lang.namespace("ba.account.sidebar"),ba.account.sidebar.AccountBarTransformer=function(t){var e=this;this.log=t,this.contentTransform=function(t){var a,n,o={};if(!(t&&t.docs[0]&&t.docs[0].content["link-list"]&&t.docs[0].content["link-list"].links))throw e.log.error("BA_HOME_ACCB_005: failed to transform account bar response"),new Error("Error transforming Account bar response");for(a=t.docs[0].content["link-list"].links,o.linkList=[],n=0;n<a.length;n++)o.linkList.push({heading:a[n].heading,linkUrl:a[n].linkURL});return o}},ba.account.sidebar.Lib.service("AccountBarTransformer",["BALog",ba.account.sidebar.AccountBarTransformer]),ba.lang.namespace("ba.account.sidebar"),ba.account.sidebar.AccountBarViewModelBuilder=function(t,e,a,n,o,r){var c,i=this;this.log=o,this.resourceBundle=e,this.getAccountBarContent=function(e){var o=t.defer(),c={fq:[a.DT_LINK_LIST]};return e===a.BARC?c.fq.push(a.MEMBERSHIP_ALL):c.fq.push(a.MEMBERSHIP_EXEC),n.getContentInstance(c).then(function(t){o.resolve(r.contentTransform(t))})["catch"](function(){o.reject(),i.log.error("BA_HOME_ACCB_002: Failed to retrieve link list")}),o.promise},this.build=function(e){var n=t.defer();return i.getAccountBarContent(e).then(function(t){n.resolve(t)})["catch"](function(){c={linkList:[{heading:"",linkUrl:""},{heading:"",linkUrl:""},{heading:"",linkUrl:""},{heading:"",linkUrl:""},{heading:"",linkUrl:""}]},i.resourceBundle.get("fallbackLinkHeading1").then(function(t){c.linkList[0].heading=t}),c.linkList[0].linkUrl=a.LINKS.accountLinkFallbackId[0],i.resourceBundle.get("fallbackLinkHeading2").then(function(t){c.linkList[1].heading=t}),c.linkList[1].linkUrl=a.LINKS.accountLinkFallbackId[1],i.resourceBundle.get("fallbackLinkHeading3").then(function(t){c.linkList[2].heading=t}),c.linkList[2].linkUrl=a.LINKS.accountLinkFallbackId[2],i.resourceBundle.get("fallbackLinkHeading4").then(function(t){c.linkList[3].heading=t}),c.linkList[3].linkUrl=a.LINKS.accountLinkFallbackId[3],c.linkList.isFallBackData=!0,n.resolve(c)}),n.promise}},ba.account.sidebar.Lib.service("AccountBarViewModelBuilder",["$q","ResourceBundle","AccountBarConstants","ContentRetrievalService","BALog","AccountBarTransformer",ba.account.sidebar.AccountBarViewModelBuilder]),ba.lang.namespace("ba.bAccount.sidebar"),ba.bAccount.sidebar.Lib=angular.module("ba-account-sidebar-b",["ba-i18n","ba-account-sidebar-templates","ba-analytics","ba-analytics-adobe","ba-auth","ba-content-retrieval","ba-filters-contrib","ba-logging"]),ba.lang.namespace("ba.bAccount.sidebar"),ba.bAccount.sidebar.Lib.constant("BAccountBarConstants",{EC:"EXECUTIVE_CLUB",BARC:"REGISTERED_CUSTOMER",PREM:"PREMIER",BARC_LOWER:"barc",defaultTrackingObj:{dr:"",dt:document.title,scheme:"",logintype:{"default":"public",EXECUTIVE_CLUB:"execclub",PREMIER:"execclub",REGISTERED_CUSTOMER:"barc"},tier:{"default":"",blue:"Blue",bronze:"Bronze",silver:"Silver",gold:"Gold",premier:"Premier"},audience:"travel",CUSTSEG:"",GGLMember:""},PAGE_NAME:"HOME",OPEN_TEXT:"open",CLOSE_TEXT:"close",BAR_OPEN_EVENT:"accountBarOpen",ACCOUNT_LOGOFF_EVENT:"accountBarLogout",SOURCE_AB:"accountBar",SOURCE_AB_BUTTON:"accountBarbutton",SOURCE_AB_PROFILE:"VanillaYourProfile",LINKS:{accountLinkFallbackId:["ECHOME","PERSONALISEDOFFERS","ESHOP","CONTACT-EXECUTIVE-CLUB"]},TRACK_CONCUR_USER:"CORP",DT_LINK_LIST:"documentType:personalised/link-list",MEMBERSHIP_ALL:"Membership-Type_s:zzall",MEMBERSHIP_EXEC:"Membership-Type_s:EXEC"}),ba.lang.namespace("ba.bAccount.sidebar"),ba.bAccount.sidebar.BAccountBarController=function(t,e,a,n,o,r,c,i,l,s){var u,b=this;this.log=t,this.premier=!1,this.accountData=e.userData,this.supplants={},this.accountData&&(a.build(this.accountData.personalAttributes.customerType).then(function(t){for(b.viewContent=t,u=0;u<b.viewContent.linkList.length;u+=1)"executive-club/tiers-and-benefits/"===b.viewContent.linkList[u].linkUrl&&b.accountData.loyalty.tier&&b.accountData.loyalty.tier.toLowerCase()!==o.BARC_LOWER&&(b.accountData.loyalty.ggl?(b.viewContent.linkList[u].linkUrl+=b.accountData.loyalty.tier.toLocaleLowerCase()+"-guest-list-benefits.page",b.viewContent.linkList[u].heading=c("titlecase")(b.accountData.loyalty.tier)+" Guest List benefits"):(b.viewContent.linkList[u].linkUrl+=b.accountData.loyalty.tier.toLocaleLowerCase()+"-benefits.page",b.viewContent.linkList[u].heading=c("titlecase")(b.accountData.loyalty.tier)+" benefits"),b.accountData.personalAttributes.customerType===o.PREM?(b.viewContent.linkList.splice(u,1),b.premier=!0):b.premier=!1)}),this.accountData.loyalty&&(b.supplants.membershipNumber={S1:b.accountData.loyalty.loyaltyAccountNumber})),this.logOffKey=function(t){9!==t.keyCode&&b.logOff()},this.logOff=function(){n.logOff().then(function(){r.trackEvent(o.ACCOUNT_LOGOFF_EVENT,e.trackingDataAccount),t.info("BA_HOME_ACCB_003: Successfully logged off")})["catch"](function(){t.info("BA_HOME_ACCB_004: Failed to log off")})},i.getUsername()&&(e.username=i.getUsername(),b.rememberMe=!0),i.getCookieValue("rememberMe")&&(b.rememberMe=!0),b.authenticate=function(t,a){e.usernameAttempt=t,t&&""!==t&&a&&""!==a?(s.$emit("account-panel-logon"),b.rememberMe?i.setCookie("rememberMe","1","/",!1,365,"days"):i.getCookieValue("rememberMe")&&i.removeCookie("rememberMe","/"),l.logOn(t,a,b.rememberMe)):(e.blurUpdateField(t,"messageuser"),e.blurUpdateField(a,"messagepass"))}},ba.bAccount.sidebar.Lib.controller("BAccountBarController",["BALog","$scope","BAccountBarViewModelBuilder","BAAuthenticationService","BAccountBarConstants","analytics","$filter","BACookieService","CustomerLoginService","$rootScope",ba.bAccount.sidebar.BAccountBarController]),ba.lang.namespace("ba.bAccount.sidebar"),ba.bAccount.sidebar.bAccountProgressPanel=function(t,e){return{restrict:"A",scope:{amount:"=",barOpen:"="},link:function(a){a.displayPercent=0,a.loadPercent=function(){var n,o,r=0,c=a.amount,i=angular.element(t[0].getElementById("progressValue")),l=60,s=2*Math.PI*l;o=function(t){var e=t/100,a=s*(1-e);i[0]&&(i[0].style.strokeDasharray=s,i[0].style.strokeDashoffset=a)},n=function(){o(r),a.displayPercent=Math.round(r),c>r&&(r+=.5,e(function(){n()},1))},o(0),e(function(){n()},400)},a.$watch("barOpen",function(t){t&&a.loadPercent()})},templateUrl:"ba-account-sidebar/templates/b-account-progress-template.html"}},ba.bAccount.sidebar.Lib.directive("bAccountProgressPanel",["$document","$timeout",ba.bAccount.sidebar.bAccountProgressPanel]),ba.lang.namespace("ba.bAccount.sidebar"),ba.bAccount.sidebar.bAccountBarPanel=function(t,e,a,n,o,r,c,i,l){return{restrict:"A",controller:"BAccountBarController",controllerAs:"accountBarCtrl",scope:{userData:"=",viewSize:"=?",corpTag:"=?",getAdditionalContent:"&?",barOpen:"=?"},link:function(s){function u(t){var a=angular.fromJson(angular.toJson(e.defaultTrackingObj));return a.logintype=a.logintype[s.userData.personalAttributes.customerType]||a.logintype["default"],a.tier=a.tier[s.userData.loyalty.tier]||a.tier["default"],a.clickpage=e.PAGE_NAME,a.source=t,a}var b,d,g,E=r.isLoggedOn();s.showConcur=l.getCookieValue("CONCUR_USER"),s.trackingDataAccount=u(e.SOURCE_AB),s.trackingDataAccountBtn=u(e.SOURCE_AB_BUTTON),s.trackingDataProfile=u(e.SOURCE_AB_PROFILE),s.errorType="",s.barStatusOposit={S1:e.OPEN_TEXT},s.recentTransactionLimit=3,"large"===s.viewSize&&(s.recentTransactionLimit=5),s.showCollapsedBar=!1,s.showBar=!0,s.showBarLinks=!1,s.recentTransactionError=!1,s.hideBar=!0,s.toggleTemplateKey=function(t){9!==t.keyCode&&s.toggleTemplate()},s.toggleTemplate=function(){t.$emit("toggleAcBar")},s.displayPercent=0,s.loadPercent=function(){var t,e,o=0,r=s.userData.personalAttributes.profilePercentage,c=3.6*r,i=angular.element(a[0].getElementById("activeBorder"));e=function(t){var e=90+t,a="#193b69";t>=180&&(e=t-90,a="#ffffff"),i.css("background-image","linear-gradient("+e+"deg, transparent 50%, "+a+" 50%),linear-gradient(90deg, #193b69 50%, transparent 50%)")},t=function(){e(o),s.displayPercent=Math.round(o/3.6),c>o&&(o+=1.5,n(function(){t()},1))},n(function(){t()},1)},"authenticated"!==s.userData.state&&!E||s.userData.personalAttributes.customerType!==e.EC&&s.userData.personalAttributes.customerType!==e.PREM||!s.userData.loyalty.tier?"authenticated"!==s.userData.state&&!E||s.userData.personalAttributes.customerType!==e.BARC?s.contentUrl="ba-account-sidebar/templates/b-account-bar-prepin.html":(s.userData.loyalty={},s.userData.loyalty.tier=e.BARC_LOWER,s.contentUrl="ba-account-sidebar/templates/b-account-bar-barc-postpin.html"):s.contentUrl="ba-account-sidebar/templates/b-account-bar-exec-postpin.html",s.loadTransactions=function(){s.userData.loyalty.recentTransactions||(o.trackEvent(e.BAR_OPEN_EVENT,s.trackingDataAccount),s.getAdditionalContent?s.getAdditionalContent().then(function(t){t||(s.recentTransactionError=!0)})["catch"](function(){s.recentTransactionError=!0}):s.recentTransactionError=!0)},s.barOpen&&(angular.element(a[0].getElementById("content")).addClass("ac-open"),s.showCollapsedBar=!0,s.hideBar=!1,s.showBarLinks=!0,s.loadTransactions(),n(function(){s.loadPercent()},300)),b=t.$on("toggleAcBar",function(){n(function(){s.loadPercent()},300),s.loadTransactions(),s.showCollapsedBar?(s.showCollapsedBar=!s.showCollapsedBar,angular.element(a[0].getElementById("content")).removeClass("ac-open"),n(function(){s.showBarLinks=!s.showBarLinks,s.hideBar=!0},400),a.unbind("click"),s.barOpen=!1):(s.showCollapsedBar=!0,s.hideBar=!1,angular.element(a[0].getElementById("content")).addClass("ac-open"),s.showBarLinks=!0,s.barOpen=!0,n(function(){i.document.getElementById("account-bar-id").focus()},10))}),s.blurUpdateField=function(t,e){s[e]=!1,t&&""!==t||(s[e]=!0)},d=t.$on(c.LOG_ON_FAILED,function(){s.usernameAttempt?(s.errorType="password",o.trackEvent("Session",{loginfail:"true",interaction:"PHP-Login-Panel"})):o.trackEvent("Session",{loginfail:"true",interaction:"PHP-Login-Top"})}),g=t.$on(c.LOCKED,function(t,e){e.indexOf("LOCK-LEVEL-2")>-1?s.errorType="locked":e.indexOf("LOCK-LEVEL-1")>-1&&(i.location.href=URLFormulationService.formBATeamsiteURL("loginr")),o.trackEvent("Session",{loginfail:"true"})}),s.$on("$destroy",b),s.$on("$destroy",a.unbind("click")),s.$on("$destroy",d),s.$on("$destroy",g),s.componentLoaded=!0},templateUrl:"ba-account-sidebar/templates/b-account-bar-template.html"}},ba.bAccount.sidebar.Lib.directive("bAccountBarPanel",["$rootScope","BAccountBarConstants","$document","$timeout","analytics","BAAuthenticationService","AuthenticationConstants","$window","BACookieService",ba.bAccount.sidebar.bAccountBarPanel]),ba.lang.namespace("ba.bAccount.sidebar"),ba.bAccount.sidebar.bDateFilter=function(t,e){var a=e.getCountry();return function(e,n){return"shortSlash"===n&&(n="us"===a?"MM/dd/yyyy":"dd/MM/yyyy"),t("date")(e,n)}},ba.bAccount.sidebar.Lib.filter("bDateFilter",["$filter","ClientLocaleService",ba.bAccount.sidebar.bDateFilter]),ba.lang.namespace("ba.bAccount.sidebar"),ba.bAccount.sidebar.BAccountBarTransformer=function(t){var e=this;this.log=t,this.contentTransform=function(t){var a,n,o={};if(!(t&&t.docs[0]&&t.docs[0].content["link-list"]&&t.docs[0].content["link-list"].links))throw e.log.error("BA_HOME_ACCB_005: failed to transform account bar response"),new Error("Error transforming Account bar response");for(a=t.docs[0].content["link-list"].links,o.linkList=[],n=0;n<a.length;n++)o.linkList.push({heading:a[n].heading,linkUrl:a[n].linkURL});return o}},ba.bAccount.sidebar.Lib.service("BAccountBarTransformer",["BALog",ba.bAccount.sidebar.BAccountBarTransformer]),ba.lang.namespace("ba.bAccount.sidebar"),ba.bAccount.sidebar.BAccountBarViewModelBuilder=function(t,e,a,n,o,r){var c,i=this;this.log=o,this.resourceBundle=e,this.getAccountBarContent=function(e){var o=t.defer(),c={fq:[a.DT_LINK_LIST]};return e===a.BARC?c.fq.push(a.MEMBERSHIP_ALL):c.fq.push(a.MEMBERSHIP_EXEC),n.getContentInstance(c).then(function(t){o.resolve(r.contentTransform(t))})["catch"](function(){o.reject(),i.log.error("BA_HOME_ACCB_002: Failed to retrieve link list")}),o.promise},this.build=function(e){var n=t.defer();return i.getAccountBarContent(e).then(function(t){n.resolve(t)})["catch"](function(){var t,e;for(c={linkList:[{heading:"test",linkUrl:"hello"}]},t=function(t){c.linkList[t]={},i.resourceBundle.get("fallbackLinkHeading"+(t+1)).then(function(e){c.linkList[t].heading=e}),c.linkList[t].linkUrl=a.LINKS.accountLinkFallbackId[t]},e=0;4>e;e++)t(e);c.linkList.isFallBackData=!0,n.resolve(c)}),n.promise}},ba.bAccount.sidebar.Lib.service("BAccountBarViewModelBuilder",["$q","ResourceBundle","BAccountBarConstants","ContentRetrievalService","BALog","BAccountBarTransformer",ba.bAccount.sidebar.BAccountBarViewModelBuilder]);
angular.module("ba-account-sidebar-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-account-sidebar/templates/account-bar-barc-postpin.html",'<div data-adobe-add-tracking-to-child-href="" data-ng-show="showBar" class="row content-wrapper"><div class="column medium-4 large-4 button-spacing" data-ng-include="\'ba-account-sidebar/templates/barc-profile-completion.html\'"></div><div class="column medium-5 large-5 button-spacing" data-ng-include="\'ba-account-sidebar/templates/barc-section-2.html\'"></div><div class="column medium-3 large-3 account-links button-spacing" data-ng-include="\'ba-account-sidebar/templates/quick-links.html\'"></div><button tabindex="19" data-ng-show="showBarLinks" class="accordion-up" data-ng-click="toggleTemplate()" aria-hidden="true" data-icon="&#xe60c;"></button></div>'),$templateCache.put("ba-account-sidebar/templates/account-bar-exec-postpin.html",'<div data-adobe-add-tracking-to-child-href="" ng-show="showBar" class="row content-wrapper"><div class="column medium-4 large-4 button-spacing" ng-include="\'ba-account-sidebar/templates/account-list.html\'"></div><div class="column medium-5 large-5 account-transactions button-spacing" ng-include="\'ba-account-sidebar/templates/account-table-list.html\'"></div><div class="column medium-3 large-3 account-links button-spacing" ng-include="\'ba-account-sidebar/templates/quick-links.html\'"></div><button data-ng-show="showBarLinks" tabindex="19" ng-class="{\'alternative-bg\': accountBarCtrl.premier}" class="accordion-up" ng-click="toggleTemplate()" aria-hidden="true" data-icon="&#xe60c;"></button></div>'),$templateCache.put("ba-account-sidebar/templates/account-bar-template.html",'<div tabindex="19" role="button" aria-labelledby="ac-bar-label" data-ng-keypress="toggleTemplateKey($event)" data-ng-click="toggleTemplate()" data-ng-if="showBar && !noData" class="show-for-medium-up desktop-account-bar {{userData.loyalty.tier}}" data-ng-class="{open: showCollapsedBar}"><div class="overlay"><div class="row collapse"><h5><span ng-show="showCollapsedBar" data-icon="&#xe60c;"></span> <span ng-hide="showCollapsedBar" data-icon="&#xe601;"></span> <span data-ba-resource-bundle-static="" data-key="myAccDetails"></span></h5></div></div></div><div data-ng-show="false" id="ac-bar-label">{{"acBarLabel" | baResourceBundleDynamic: barStatusOposit}}</div><div data-ng-hide="noData" aria-hidden="{{!showCollapsedBar}}" data-ng-class="{show: showCollapsedBar}" class="account-bar absolute button-spacing {{userData.loyalty.tier}}" data-ng-include="contentUrl"></div>'),$templateCache.put("ba-account-sidebar/templates/account-list.html",'<div class="account-summary"><h2 class="header-text exec">{{accountBarCtrl.accountData.personalAttributes.title}} {{accountBarCtrl.accountData.personalAttributes.lastName}}</h2><p class="exec-sub-1" data-ng-if="accountBarCtrl.accountData.loyalty.ggl">{{accountBarCtrl.accountData.loyalty.tier}} <span data-ba-resource-bundle-static="" data-key="guestListBar"></span></p><p class="exec-sub-1" data-ng-if="!accountBarCtrl.accountData.loyalty.ggl">{{accountBarCtrl.accountData.loyalty.tier}}</p><p class="exec-sub-2">{{"memberNum" | baResourceBundleDynamic: accountBarCtrl.supplants.membershipNumber}}</p><div class="column"><div class="column small-6 large-6 medium-6"><span class="list-label" data-ba-resource-bundle-static="" data-key="aviosBar"></span></div><div class="columns small-6 large-6 medium-6"><span>{{accountBarCtrl.accountData.loyalty.individualAccountBalance}}</span></div></div><div class="column"><div class="column small-6 large-8 medium-8"><span class="list-label" data-ba-resource-bundle-static="" data-key="tierPointsBar"></span></div><div class="columns small-6 large-4 medium-4"><span>{{accountBarCtrl.accountData.loyalty.pointsBalance}}</span></div></div><div class="column"><div class="column small-6 large-8 medium-8"><span class="list-label" data-ba-resource-bundle-static="" data-key="lifetimeTierPointsBar"></span></div><div class="columns small-6 large-4 medium-4"><span>{{accountBarCtrl.accountData.loyalty.lifeTimeTierPoints}}</span></div></div><div class="column" data-ng-if="accountBarCtrl.accountData.loyalty.householdBalance"><div class="column small-6 large-8 medium-8"><span class="list-label" data-ba-resource-bundle-static="" data-key="householdAviosBar"></span></div><div class="columns small-6 large-4 medium-4"><span>{{accountBarCtrl.accountData.loyalty.householdBalance}}</span></div></div><a data-analytics-data="trackingDataAccountBtn" tabindex="19" data-ng-show="showBarLinks" role="button" class="button secondary account-button exec-btn" data-ba-teamsite-url="" data-pageid="ECHOME" data-ba-resource-bundle-static="" data-key="myExecClub"></a></div>'),$templateCache.put("ba-account-sidebar/templates/account-table-list.html",'<h3 data-ba-resource-bundle-static="" data-key="recentTransactions" class="sub-header-text"></h3><table ng-class="{\'alternative-border\': accountBarCtrl.premier}" class="account-list-table" data-ng-if="accountBarCtrl.accountData.loyalty.recentTransactions.length"><thead><tr><th scope="col" data-ba-resource-bundle-static="" data-key="date"></th><th class="desc-col" scope="col" data-ba-resource-bundle-static="" data-key="description"></th><th scope="col" data-ba-resource-bundle-static="" data-key="tierPointsBar"></th><th scope="col" data-ba-resource-bundle-static="" data-key="aviosBar"></th></tr></thead><tbody><tr ng-repeat="transaction in accountBarCtrl.accountData.loyalty.recentTransactions | limitTo: recentTransactionLimit"><td ng-class="{\'first-record\' : $index === 0}"><span data-ba-resource-bundle-static="" data-key="date"></span>{{transaction.date | dateFilter: \'shortSlash\'}}</td><td class="desc-col"><span data-ba-resource-bundle-static="" data-key="description"></span>{{transaction.description}}</td><td><span data-ba-resource-bundle-static="" data-key="tierPointsBar"></span>{{transaction.tierPoints | number}}</td><td><span data-ba-resource-bundle-static="" data-key="aviosBar"></span>{{transaction.avios | number}}</td></tr></tbody></table><div data-spinner-component="" class="spinner-component" data-ng-hide="recentTransactionError" data-ng-if="!accountBarCtrl.accountData.loyalty.recentTransactions"></div><div class="no-transactions" data-ng-if="recentTransactionError || accountBarCtrl.accountData.loyalty.recentTransactions.length === 0"><p data-ba-resource-bundle-static="" data-key="noTransactionsAvailable"></p><p data-ba-resource-bundle-static="" data-key="noTransactionsAvailableTwo"></p></div><a tabindex="19" data-analytics-data="trackingDataAccount" role="button" data-ng-show="showBarLinks" data-ba-teamsite-url="" data-pageid="viewtransaction" data-queryparams="eId=172705" data-ng-if="accountBarCtrl.accountData.loyalty.recentTransactions.length" class="button secondary exec-btn" data-ba-resource-bundle-static="" data-key="allActivity"></a>'),$templateCache.put("ba-account-sidebar/templates/barc-profile-completion.html",'<h2 class="header-text">{{accountBarCtrl.accountData.personalAttributes.title}} {{accountBarCtrl.accountData.personalAttributes.lastName}}</h2><div class="profile-completion"><span>{{accountBarCtrl.accountData.personalAttributes.profilePercentage}}%</span><p>{{"profileCompletion1" | baResourceBundleDynamic}} <a data-analytics-data="trackingDataProfile" data-ba-teamsite-url="" data-pageid="execamendprofile">{{"profileCompletion2" | baResourceBundleDynamic}}</a> {{"profileCompletion3" | baResourceBundleDynamic}}</p></div><a tabindex="19" data-analytics-data="trackingDataAccount" data-ng-show="showBarLinks" role="button" class="button secondary account-btn" data-ba-teamsite-url="" data-pageid="ECHOME" data-ba-resource-bundle-static="" data-key="myAccountBar"></a>'),$templateCache.put("ba-account-sidebar/templates/barc-section-2.html",'<h3 class="header-text barc" data-ba-resource-bundle-static="" data-key="upgradeToExecClub"></h3><ul data-ng-show="showBar" class="show-for-medium-up barc-list"><li data-ba-resource-bundle-static="" data-key="claimAvios"></li><li data-ba-resource-bundle-static="" data-key="earnAvios"></li><li data-ba-resource-bundle-static="" data-key="execOffers"></li><li data-ba-resource-bundle-static="" data-key="linkAvios"></li><li data-ba-resource-bundle-static="" data-key="saveTravel"></li></ul><a tabindex="19" data-analytics-data="trackingDataAccount" data-ng-show="showBarLinks" role="button" class="button secondary" data-ba-teamsite-url="" data-pageid="CONVERSIONBASIC" data-ba-resource-bundle-static="" data-key="upgradeMyAccount"></a>'),$templateCache.put("ba-account-sidebar/templates/quick-links.html",'<h3 class="header-text" data-ba-resource-bundle-static="" data-key="popularLinks"></h3><ul data-ng-show="showBarLinks"><li data-ng-repeat="link in accountBarCtrl.viewContent.linkList"><a tabindex="19" data-analytics-data="trackingDataAccount" data-ng-href="{{link.linkUrl | urlFilter}}"><span>{{link.heading}}</span></a></li></ul><a data-ng-show="showBarLinks" tabindex="19" role="button" class="button secondary exec-btn" data-ng-keypress="accountBarCtrl.logOffKey($event)" data-ng-click="accountBarCtrl.logOff()" data-ba-resource-bundle-static="" data-key="logOut"></a> <button ng-hide="showBar" tabindex="19" role="button" ng-class="{\'alternative-border\': accountBarCtrl.premier}" class="accordion-up" data-ng-click="toggleTemplate()" aria-hidden="true" data-icon="&#xe60c;"></button>'),$templateCache.put("ba-account-sidebar/templates/b-account-bar-barc-postpin.html",'<div ng-include="\'ba-account-sidebar/templates/b-account-header.html\'"></div><div data-adobe-add-tracking-to-child-href="" class="row content-wrapper"><div class="large-12 button-spacing" data-ng-include="\'ba-account-sidebar/templates/b-barc-profile-completion.html\'"></div><div class="large-12 button-spacing" data-ng-include="\'ba-account-sidebar/templates/b-barc-section-2.html\'"></div><div class="large-12 account-links button-spacing" data-ng-include="\'ba-account-sidebar/templates/b-quick-links.html\'"></div></div>'),$templateCache.put("ba-account-sidebar/templates/b-account-bar-exec-postpin.html",'<div ng-include="\'ba-account-sidebar/templates/b-account-header.html\'"></div><div data-adobe-add-tracking-to-child-href="" class="row content-wrapper"><div class="large-12 button-spacing" ng-include="\'ba-account-sidebar/templates/b-account-list.html\'"></div><div class="large-12 button-spacing" ng-include="\'ba-account-sidebar/templates/b-flight-list.html\'" data-ng-if="accountBarCtrl.accountData.futureFlights.length"></div><div class="large-12 account-transactions button-spacing" ng-include="\'ba-account-sidebar/templates/b-account-table-list.html\'"></div><div class="large-12 account-links button-spacing" ng-include="\'ba-account-sidebar/templates/b-quick-links.html\'"></div></div>'),$templateCache.put("ba-account-sidebar/templates/b-account-bar-prepin.html",'<div ng-include="\'ba-account-sidebar/templates/b-account-header.html\'"></div><div class="login-section"><div data-adobe-add-tracking-to-child-href="" class="row content-wrapper prepin"><h3 data-ba-resource-bundle-static="" data-key="acLogIn"></h3><h3><a data-analytics-data="trackingDataAccount" data-ba-teamsite-url="" data-pageid="register-now"><span data-ba-resource-bundle-static="" data-key="acRegister"></span> <span class="ext-icon" aria-hidden="true" data-icon="&#xe91e;"></span></a></h3><form data-ng-submit="accountBarCtrl.authenticate(username, password)"><div class="row collapse loginuser-wrapper"><div class="login-error" data-ng-show="errorType === \'password\'"><span data-ba-resource-bundle-static="" data-key="acLoginErrorDetails"></span> <span data-ba-resource-bundle-static="" data-key="acLoginErrorDetails2"></span></div><div class="login-error" data-ng-show="errorType === \'locked\'"><span data-ba-resource-bundle-static="" data-key="acLoginLocked"></span></div><div class="login-error" data-ng-show="errorType === \'system\'"><span data-ba-resource-bundle-static="" data-key="acSystemNotResponding"></span></div><div class="login-error" data-ng-show="errorType === \'login\'"><span data-ba-resource-bundle-static="" data-key="acLoginError"></span> <span data-ba-resource-bundle-static="" data-key="acLoginError2"></span> <span data-ba-resource-bundle-static="" data-key="acLoginError3"></span></div><div class="small-12 columns"><input id="acUserField" class="loginuser" type="text" autocapitalize="off" autocorrect="off" name="user" aria-required="true" aria-describedby="login-header" data-ng-model="username" aria-label="Login ID / Username" data-ng-blur="blurUpdateField(username, \'messageuser\')" data-ng-keyup="blurUpdateField(username, \'messageuser\')" data-ng-class="{\'invalid-field\': messageuser}"> <label for="acUserField" data-ba-resource-bundle-static="" data-key="acUserPlaceholder"></label><div class="field-error" data-ng-show="messageuser"><span data-ba-resource-bundle-static="" data-key="acReqField"></span></div></div><div class="small-12 columns"><input id="acPassField" type="password" class="input-password" name="pass" data-ng-model="password" autocomplete="off" aria-label="PIN / Password" data-ng-blur="blurUpdateField(password, \'messagepass\')" data-ng-keyup="blurUpdateField(password, \'messagepass\')" data-ng-class="{\'invalid-field\': messagepass}"> <label for="acPassField" data-ba-resource-bundle-static="" data-key="acPassPlaceholder"></label><div class="field-error pwd" data-ng-show="messagepass"><span data-ba-resource-bundle-static="" data-key="acReqField"></span></div></div><div class="small-12 columns"><button type="submit" class="button secondary white" data-ba-resource-bundle-static="" data-key="loginBtnText"></button></div><div class="small-12 columns remember-me-wrapper"><div class="small-12 medium-6 column rem-me"><div><input tabindex="0" data-ng-model="accountBarCtrl.rememberMe" name="rememberLoginAccount" id="rem-check-ac" class="rem-check" type="checkbox"> <label for="rem-check-ac" class="large-checkbox-button" data-ba-resource-bundle-static="" data-key="acRemember"></label></div></div><div class="small-12 medium-6 column more-links"><p><a data-analytics-data="trackingDataAccount" data-ba-resource-bundle-static="" data-key="acForgotten" data-ba-teamsite-url="" data-pageid="forgottendetails"></a></p><p><a data-analytics-data="trackingDataAccount" data-ba-resource-bundle-static="" data-key="acOnBusiness" data-ba-teamsite-url="" data-pageid="loginr" data-queryparams="eId=111093"></a></p></div></div></div></form></div></div>'),$templateCache.put("ba-account-sidebar/templates/b-account-bar-template.html",'<div class="b-account-bar-wrapper" data-ng-class="{show: showCollapsedBar, hidden: hideBar}"><div data-ng-class="{show: showCollapsedBar}" tabindex="0" id="account-bar-id" aria-describeby="ac-intro-1 ac-intro-2 ac-intro-3" class="b-account-bar absolute button-spacing {{userData.loyalty.tier}}" data-ng-include="contentUrl"></div></div><div data-ng-class="{show: showCollapsedBar}" tabindex="0" data-ng-click="toggleTemplate()" data-ng-keydown="toggleTemplate()" class="ac-overlay"></div>'),$templateCache.put("ba-account-sidebar/templates/b-account-progress-template.html",'<div class="progress-bar"><svg class="progress" width="150" height="150" viewbox="0 0 150 150"><circle class="progress-meter" cx="75" cy="75" r="60" stroke-width="22"></circle><circle id="progressValue" class="progress-value" cx="75" cy="75" r="60" stroke-width="15"></circle></svg><div id="circle" class="circle"><span class="prec" id="prec">{{displayPercent}}%</span> <span class="label" data-ba-resource-bundle-static="" data-key="acCompleted"></span></div></div>'),$templateCache.put("ba-account-sidebar/templates/b-account-header.html",'<div class="ac-header row"><div tabindex="0" role="link" class="column small-4 close-mob" data-ng-click="toggleTemplate()" data-ng-keypress="toggleTemplate()"><span aria-hidden="true" data-icon="&#xe611;"></span> <span class="hidden-label" data-ba-resource-bundle-static="" data-key="acClose"></span></div><div class="column small-4 logout"><span ng-if="accountBarCtrl.accountData.state === \'authenticated\'" tabindex="0" role="button" data-ng-keypress="accountBarCtrl.logOffKey($event)" data-ng-click="accountBarCtrl.logOff()" data-ba-resource-bundle-static="" data-key="logOut"></span>&nbsp;</div><div class="column small-4"><span class="logo"></span></div><div tabindex="0" role="link" class="column small-4 close" data-ng-click="toggleTemplate()" data-ng-keypress="toggleTemplate()"><span aria-hidden="true" data-icon="&#xe610;"></span> <span class="hidden-label" data-ba-resource-bundle-static="" data-key="acClose"></span></div><div class="column small-4 logout-mob">&nbsp;<span ng-if="accountBarCtrl.accountData.state === \'authenticated\'" tabindex="0" role="button" data-ng-keypress="accountBarCtrl.logOffKey($event)" data-ng-click="accountBarCtrl.logOff()" data-ba-resource-bundle-static="" data-key="logOut"></span></div></div>'),$templateCache.put("ba-account-sidebar/templates/b-account-list.html",'<div class="account-summary"><h2 id="ac-intro-1"><span data-ba-resource-bundle-static="" data-key="acWelcome"></span>, {{accountBarCtrl.accountData.personalAttributes.title}} {{accountBarCtrl.accountData.personalAttributes.lastName}}</h2><p id="ac-intro-3" class="exec-sub-2">{{"memberNum" | baResourceBundleDynamic: accountBarCtrl.supplants.membershipNumber}} | <span class="exec-sub-1 tier-name" data-ng-if="!accountBarCtrl.accountData.loyalty.ggl">{{accountBarCtrl.accountData.loyalty.tier | titlecase}}</span> <span class="exec-sub-1 tier-name" data-ng-if="accountBarCtrl.accountData.loyalty.ggl">{{accountBarCtrl.accountData.loyalty.tier | titlecase}} <span data-ba-resource-bundle-static="" data-key="guestListBar"></span></span></p><p class="concur" data-ng-if="corpTag === \'TRUE\' || showConcur"><img data-ng-src="images/concur_icon.png"> <span class="concur-text" data-ba-resource-bundle-static="" data-key="acConcur"></span> <span data-ba-resource-bundle-static="" data-key="acMember"></span></p><a tabindex="0" role="button" class="button primary medium account-button exec-btn" data-ba-resource-bundle-static="" data-key="acBookTrip" data-ng-click="toggleTemplate()"></a> <a data-analytics-data="trackingDataAccountBtn" tabindex="0" role="button" class="button secondary medium white account-button exec-btn" data-ba-teamsite-url="" data-pageid="ECHOME" data-ba-resource-bundle-static="" data-key="myExecClub"></a><h3 data-ba-resource-bundle-static="" data-key="acYourAviosTier" class="avios-tier-title"></h3><div class="column"><div class="column small-6 large-6 medium-6"><span class="list-label" data-ba-resource-bundle-static="" data-key="aviosBar"></span></div><div class="columns small-6 large-6 medium-6"><span>{{accountBarCtrl.accountData.loyalty.individualAccountBalance}}</span></div></div><div class="column"><div class="column small-6 large-8 medium-8"><span class="list-label" data-ba-resource-bundle-static="" data-key="tierPointsBar"></span></div><div class="columns small-6 large-4 medium-4"><span>{{accountBarCtrl.accountData.loyalty.pointsBalance}}</span></div></div><div class="column"><div class="column small-6 large-8 medium-8"><span class="list-label" data-ba-resource-bundle-static="" data-key="lifetimeTierPointsBar"></span></div><div class="columns small-6 large-4 medium-4"><span>{{accountBarCtrl.accountData.loyalty.lifeTimeTierPoints}}</span></div></div><div class="column" data-ng-if="accountBarCtrl.accountData.loyalty.householdBalance"><div class="column small-6 large-8 medium-8"><span class="list-label" data-ba-resource-bundle-static="" data-key="householdAviosBar"></span></div><div class="columns small-6 large-4 medium-4"><span>{{accountBarCtrl.accountData.loyalty.householdBalance}}</span></div></div><a tabindex="0" data-analytics-data="trackingDataAccount" role="button" class="button secondary medium white exec-btn" data-ba-teamsite-url="" data-pageid="redeem" data-ba-resource-bundle-static="" data-key="acBookRewardFlights"></a></div>'),$templateCache.put("ba-account-sidebar/templates/b-account-table-list.html",'<h3 data-ba-resource-bundle-static="" data-key="recentTransactions"></h3><div class="account-list-table" data-ng-if="accountBarCtrl.accountData.loyalty.recentTransactions.length"><div class="tr" ng-repeat="transaction in accountBarCtrl.accountData.loyalty.recentTransactions | limitTo: recentTransactionLimit"><div class="td" ng-class="{\'first-record\' : $index === 0}"><span>{{transaction.date | date: \'dd\'}}</span> {{transaction.date | date: \'MMM yy\'}}</div><div class="td desc-col">{{transaction.description}}</div><div class="td"><div class="lable" data-ba-resource-bundle-static="" data-key="tierBar"></div><div class="value">{{transaction.tierPoints | number}}</div></div><div class="td"><div class="lable" data-ba-resource-bundle-static="" data-key="aviosBar"></div><div class="value">{{transaction.avios | number}}</div></div></div></div><div data-spinner-component="" class="spinner-component" data-ng-hide="recentTransactionError" data-ng-if="!accountBarCtrl.accountData.loyalty.recentTransactions"></div><div class="no-transactions" data-ng-if="recentTransactionError || accountBarCtrl.accountData.loyalty.recentTransactions.length === 0"><p data-ba-resource-bundle-static="" data-key="noTransactionsAvailable"></p><p data-ba-resource-bundle-static="" data-key="noTransactionsAvailableTwo"></p></div><a tabindex="0" data-analytics-data="trackingDataAccount" role="button" data-ng-show="showBarLinks" data-ba-teamsite-url="" data-pageid="viewtransaction" data-queryparams="eId=172705" data-ng-if="accountBarCtrl.accountData.loyalty.recentTransactions.length" class="button secondary medium white exec-btn" data-ba-resource-bundle-static="" data-key="acAllActivity"></a>'),$templateCache.put("ba-account-sidebar/templates/b-barc-profile-completion.html",'<h2 id="ac-intro-1"><span data-ba-resource-bundle-static="" data-key="acWelcome"></span>, {{accountBarCtrl.accountData.personalAttributes.title}} {{accountBarCtrl.accountData.personalAttributes.lastName}}</h2><a tabindex="0" role="button" class="button primary medium account-button exec-btn" data-ba-resource-bundle-static="" data-key="acBookTrip" data-ng-click="toggleTemplate()"></a><br><br><h3 data-ba-resource-bundle-static="" data-key="acYourProfile"></h3><div class="profile-completion"><div data-b-account-progress-panel="" data-amount="userData.personalAttributes.profilePercentage" data-bar-open="showCollapsedBar"></div><p>{{"profileCompletionB" | baResourceBundleDynamic}}</p></div><a tabindex="0" data-analytics-data="trackingDataAccountBtn" role="button" class="button secondary medium white account-btn" data-ba-teamsite-url="" data-pageid="ECHOME" data-ba-resource-bundle-static="" data-key="myAccountBar"></a>'),$templateCache.put("ba-account-sidebar/templates/b-barc-section-2.html",'<h3 data-ba-resource-bundle-static="" data-key="upgradeToExecClub"></h3><ul class="barc-list"><li data-ba-resource-bundle-static="" data-key="claimAvios"></li><li data-ba-resource-bundle-static="" data-key="earnAvios"></li><li data-ba-resource-bundle-static="" data-key="execOffers"></li><li data-ba-resource-bundle-static="" data-key="linkAvios"></li><li data-ba-resource-bundle-static="" data-key="saveTravel"></li></ul><a tabindex="0" data-analytics-data="trackingDataAccount" data-ng-show="showBarLinks" role="button" class="button secondary medium white" data-ba-teamsite-url="" data-pageid="CONVERSIONBASIC" data-ba-resource-bundle-static="" data-key="upgradeMyAccount"></a>'),$templateCache.put("ba-account-sidebar/templates/b-flight-list.html",'<div class="flight-list"><h3 data-ba-resource-bundle-static="" data-key="acUpcomingFlights"></h3><div class="flight-item" ng-repeat="flight in accountBarCtrl.accountData.futureFlights"><div class="flight-image" style="background-image: url(\'https://ba.com/images/destinations/ios/{{flight.flightDetails.destinationCityCode | lowercase}}/p8/ios-{{flight.flightDetails.destinationCityCode | lowercase}}-p8-1.jpg\'), url(\'https://ba.com/cms/global/assets/images/ba_home_site/brand/speedmarque-white.svg\');"></div><div class="flight-info"><p id="account-flight-booking-{{$index}}">{{flight.bookingReference}}</p><p id="account-flight-route-{{$index}}" class="route">{{flight.flightDetails.originCity | titlecase}} to {{flight.flightDetails.destinationCity | titlecase}}</p><p id="account-flight-info-{{$index}}">{{flight.flightDetails.scheduledDepartureDateTime | date: \'dd MMM yyyy\'}} | {{flight.flightDetails.cabinName}}</p><a id="account-flight-button-{{$index}}" data-ba-teamsite-url="" data-pageid="managebooking" data-queryparams="eId=104002&amp;bookingRef={{flight.bookingReference}}&amp;lastname={{flight.passengerDetails.lastName}}" aria-labelledby="account-flight-booking-{{$index}} account-flight-route-{{$index}} account-flight-info-{{$index}}" aria-describedby="account-flight-button-{{$index}}" data-ba-resource-bundle-static="" data-key="acFutureFlightsManage"></a></div></div></div><a tabindex="0" data-analytics-data="trackingDataAccount" role="button" data-ba-teamsite-url="" data-pageid="viewaccount" data-queryparams="eId=106010" data-ng-if="accountBarCtrl.accountData.futureFlights.length" class="button secondary medium white exec-btn" data-ba-resource-bundle-static="" data-key="acViewFlights"></a>'),$templateCache.put("ba-account-sidebar/templates/b-quick-links.html",'<h3 data-ba-resource-bundle-static="" data-key="popularLinks"></h3><ul><li data-ng-repeat="link in accountBarCtrl.viewContent.linkList"><a tabindex="0" data-analytics-data="trackingDataAccount" data-ng-href="{{link.linkUrl | urlFilter}}"><span>{{link.heading}}</span></a></li></ul><div class="clear"></div>')}]);
ba.lang.namespace("ba.searchbar"),ba.searchbar.Lib=angular.module("ba-searchbar",["ba-auth","ba-analytics","ba-analytics-adobe","ba-cookie","ba-datepicker","ba-filters","ba-i18n","ba-lang","ba-logging","ba-lookups","ba-modal","ba-passengermix","ba-passengermix-validation","ba-searchbar-templates","ba-solr","ba-trap-focus","ba-typeahead","duScroll","ngAnimate"]),ba.lang.namespace("ba.searchbar"),ba.searchbar.Lib.animation(".cross-fade",["$animateCss",function(e){return{enter:function(a){return e(a,{event:"enter",structural:!0,cleanupStyles:!0,from:{opacity:0,position:"absolute",height:a[0].getBoundingClientRect().height,width:a[0].getBoundingClientRect().width},to:{opacity:1,position:"absolute",height:a[0].getBoundingClientRect().height,width:a[0].getBoundingClientRect().width}})},leave:function(a){return e(a,{event:"leave",structural:!0,cleanupStyles:!0,from:{opacity:1,position:"absolute",height:a[0].getBoundingClientRect().height,width:a[0].getBoundingClientRect().width},to:{opacity:0,position:"absolute",height:a[0].getBoundingClientRect().height,width:a[0].getBoundingClientRect().width}})}}}]),ba.searchbar.Lib.animation(".droplet",["$animateCss",function(e){return{enter:function(a){return e(a,{event:"enter",structural:!0,cleanupStyles:!0,from:{height:0,bottom:0,position:"absolute"},to:{height:"15px",bottom:"-14px",position:"absolute"}})},leave:function(a){return e(a,{event:"leave",structural:!0,cleanupStyles:!0,from:{filter:"invert(11%)",height:"15px",bottom:"-14px",position:"absolute"},to:{height:0,bottom:0,position:"absolute"}})}}}]),ba.searchbar.Lib.animation(".pop-up-animation",["$animateCss",function(e){return{removeClass:function(a){return e(a,{event:"hide",structural:!0,cleanupStyles:!0,from:{opacity:0,transform:"scale(0.5)"},to:{opacity:1,transform:"scale(1.0)"}})}}}]),ba.lang.namespace("ba.searchbar"),ba.searchbar.Lib.constant("SearchBarConstants",{CAR_ONLY_OPTION:"CarOnly",FLIGHT:"Flight",CONCUR:"Concur",FLIGHT_AND_HOTEL:"FlightAndHotel",FLIGHT_AND_CAR:"FlightAndCar",HOTEL:"Hotel",HOTEL_ONLY_OPTION:"HotelOnly",CAR:"Car",FLIGHTHOTEL:"FLIGHTHOTEL",FLIGHTCAR:"FLIGHTCAR",CORPORATE_BOOKING:"CORPORATE_BOOKING",COOKIE_PATH:"/",SECONDS:"seconds",ROOM_TXT:"Room",ROOMS_TXT:"Rooms",DATEPICKER_SELECTABLE_DAYS_FROM_TODAY:354,DATE_SELECTOR:"date-selector",DATE_SELECTOR_DEPART_LABEL:"Outbound date selector,",DATE_SELECTOR_RETURN_LABEL:"Return date selector,",DATE_SELECTOR_PICKUP_LABEL:"Pick-up date selector,",DATE_SELECTOR_DROPOFF_LABEL:"Drop-off date selector,",DATE_SELECTOR_CHECKIN_LABEL:"Check-in date selector,",DATE_SELECTOR_CHECKOUT_LABEL:"Check-out date selector,",HOUR_SELECTOR_PICKUP_LABEL:"Pick-up hour selector",HOUR_SELECTOR_DROPOFF_LABEL:"Drop-off hour selector",MINUTE_SELECTOR_PICKUP_LABEL:"Pick-up minute selector",MINUTE_SELECTOR_DROPOFF_LABEL:"Drop-off minute selector",PAX_SELECTOR_LABEL:"Passenger selector,",TRAVEL_CLASS_SELECTOR_LABEL:"Travel class selector,",REMOVE_RETURN_LABEL:"Remove return journey",SEARCHBAR:"sb",TRAVEL_CLASS_SELECTOR:"travel-class",CUSTOM_TRIP_SELECTOR:"custom-trip",INBOUND:"inbound",OUTBOUND:"outbound",KEY_CODES:{up:38,down:40,enter:13,tab:9,backspace:8,escape:27,left:37,right:39},POP_UPS:{passenger:"pax",travelClass:"class",room:"room"},FLIGHTS_NOT_AVAILABLE_KEY:"Searchbar-FlightNotAvailable",FLIGHT_ONLY:"FO",FH:"FH",FC:"FC",HOTEL_PACKAGE:"PAKFH",HOTEL_ONLY:"HO",CAR_PACKAGE:"PAKFC",CAR_ONLY:"CO",MAX_PASSENGER_FLIGHT:9,MAX_PASSENGER_CAR:7,MAX_ADULTS_FLIGHT:9,MAX_ADULTS_CAR:7,MAX_YOUNG_ADULT_FLIGHT:8,MAX_CHILDREN_FLIGHT:8,MAX_CHILDREN_CAR:6,MAX_INFANTS_FLIGHT:8,MAX_INFANTS_CAR:3,ADULTS_KEY:"adults",YOUNG_ADULT_KEY:"young_adults",SB_ECONOMY:"Economy",CONTACT_LIVESITE_URL:"help-and-contacts/contact-us",CONTACT_LIVESITE_PAGEID_EN:"information",CHILDREN_KEY:"children",INFANTS_KEY:"infants",ADULTS_INDEX:0,CHILDREN_INDEX:1,INFANTS_INDEX:2,COOKIE_DATE_FORMAT:"DD/MM/YY",FLIGHT_ONLY_INDEX:{ADULTS_INDEX:0,YOUNG_ADULT_INDEX:1,CHILDREN_INDEX:2,INFANTS_INDEX:3},ResultCode:{OK:0,CAPACITY:1,SAFETY:2,TYPE_CAPACITY:3},DEFAULT_COUNTRY_CODE:"gb",DEFAULT_LANGUAGE_CODE:"en",DEFAULT_CABIN_CLASS:"M",DEFAULT_TICKET_TYPE:"LOWEST",FLEXIBLE_TICKET_TYPE:"FLEXIBLE",DATE_FORMAT_DDMMYYYY:"dd/MM/yyyy",DATE_FORMAT_YYYYMMDD:"YYYY-MM-DD",CO_DATE_FORMAT_DDMMYYYY:"DD MMM YYYY",URL_DATE_FORMAT_DDMMYY:"DD/MM/YY",ONE_WAY_JOURNEY:"OWFLT",RETURN_JOURNEY:"RTFLT",CAR_LOCATION_ERROR_MESSAGE:"refine-weCantRecognise_CO",DESTINATION_ERROR_MESSAGE:"refine-weCantRecognise",BACK:"Back",CONTINUE:"Continue",PROPOSITION_TRACKING_PAGEID:"PROPOSITION",REFINEMENT_TRACKING_PAGEID:"REFINEMENT",ADD_ROOM:"AddRoom",CABIN_ECONOMY:"Searchbar-economy",CABIN_PREMIUM_ECONOMY:"Searchbar-premiumEconomy",CABIN_BUSINESS:"Searchbar-business",CABIN_FIRST:"Searchbar-first",VALIDATION:{FO:"FlightOnly",PAKFC:"FlightAndCar",PAKFH:"FlightAndHotel",HO:"HotelOnly"},MODEL_LOADING_ERROR:"REF_LOAD_001",TICKET_TYPES:{VANILLA:[{value:"LOWEST",resourceKey:"Searchbar-lowestPrice"},{value:"FLEXIBLE",resourceKey:"Searchbar-flexible"}],EXECUTIVE:[{value:"LOWEST",resourceKey:"Searchbar-lowestReducedTier",subResourceKey:"Searchbar-lowestReducedTierDetails"},{value:"EC_POINTS_EARNING",resourceKey:"Searchbar-lowestFullTier",subResourceKey:"Searchbar-lowestFullTierDetails"},{value:"FLEXIBLE",resourceKey:"Searchbar-flexibleConditions",subResourceKey:"Searchbar-flexibleConditionsDetails"}]},EXECUTIVE_CLUB_MEMBER:"EXECUTIVE_CLUB",BA_REST_URL_PREFIX:"BA_REST_URL_PREFIX",PRODUCT_BAH_LOCATIONS_ENDPOINT:"/csdm-plm/rs/v1/holidaydestinations",BADOTCOMADAPTER_BDCA_SERVICE_URL:"/badotcomadapter-bdca/rs/v1/customers;businessContext=SellingFlow;dataGroups=personalAttributes",HANDOVER_PARAM:{ADULTS_ROOM:"adultsRoom",CHILDREN_ROOM:"childrenRoom",INFANTS_ROOM:"infantsRoom",FO_TOTAL_ADULT:"ad",FO_TOTAL_CHILDREN:"ch",FO_TOTAL_INFANTS:"inf",FO_TOTAL_YOUNG_ADULT:"ya",FC_TOTAL_ADULT:"adcar",FC_TOTAL_CHILDREN:"chcar",FC_TOTAL_INFANTS:"infcar",CHILD_AGE:"childAge",ROOM:"room",FROM:"from",TO:"to",DEP_DATE:"depDate",RET_DATE:"retDate",CABIN:"cabin",RESTRICTION_TYPE:"restrictionType",SOURCE:"source",SALE_OPTION:"saleOption",DEP_COUNTRY_PACKAGE:"depCountryPkg",FROM_PACKAGE:"fromPkg",PACKAGE_TO:"packageTo",OJDD:"ojDd",OJGW:"ojGw",ROOMS_REQUIRED:"roomsRqd",FLIGHT_HOTEL_DATE:"flightHotelDate",E_ID:"eId",TOTAL_PRICE:"totalPrice",CURRENCY_CODE:"currencyCode",REF_EVENT:"refevent",FLIGHT_CAR_DATE:"flightCarDate",BAH_PRE_SPECIAL_OFFER_GROUP:"BAHPRESpecialOfferGroup",CHECK_IN_GO:"checkInGO",CHECK_OUT_GO:"checkOutGO",HOTEL_GO_TO:"hotelGOTo",NUMBER_NIGHTS_GO:"numNightsGO",DEPART_COUNTRY:"depCountry",CAR_GO_TO:"carGOTo",OJ_DROP_OFF_DD:"ojDropOffDd",CAR_ONE_WAY_RENTAL_CONFIRM:"carOneWayRentalConfirm",CAR_DROP_OFF:"carDropOff",OJ_DROP_OFF_GW:"ojDropOffGw",PICK_UP_GO:"pickUpGO",DROP_OFF_GO:"dropOffGO",PICKUP_TIME_HOUR:"pickUpTimeHr",PICKUP_TIME_MIN:"pickUpTimeMin",DROP_OFF_TIME_HOUR:"dropOffTimeHr",DROP_OFF_TIME_MIN:"dropOffTimeMin",CAR_GO_AGE_CONFIRM:"carGOAgeConfirm"},HANDOVER_PARAM_VALUE:{URL:"/travel/fx/public/en_gb?",URL_WITH_HOTEL_ID:"/travel/fx/public/en_gb/pCode1-",REF_EVENT_VALUE:"BAHDFb",REF_EVENT_FH_VALUE:"BAHDFa",E_ID_VALUE:"111077",SOURCE_FO:"LowPriceFinderGraph",SOURCE_FH:"SFDFHPROPOSITION",SOURCE_FC:"SFDFCPROPOSITION",SOURCE_HO:"SFDHPROPOSITION",SOURCE_CO:"SFDCPROPOSITION"},LOG_PLM_ERROR_FROM_SERVICE:"NG_RF_10700",LOG_CUSTOMER_DATA_ERROR_FROM_SERVICE:"NG_RF_10701",LOG_HANDOVER_POST_ERROR_FROM_SERVICE:"NG_RF_10702",PRODUCT_ELIGIBILITY_SERVICE_ERROR:"NG_SV_10050",START_AGAIN:"StartAgain",ERROR:"Error",HAND_OFF_HOME:"HOME",HAND_OFF_TRAVEL:"travel",HAND_OFF_CONSUMER:"CONSUMER",HAND_OFF_PLAN_TRIP:"newPlanTrip",SHOPPING_BASKET_EMPTY:"ShoppingBasketEmpty",SHOPPING_BASKET_FLIGHT_ONLY:"ShoppingBasketFlightOnlyReturn",SHOPPING_SWITCH_SELL:"SwitchSellFlightOnlyReturn",SHOPPING_BASKET_BOOKING:"BookingManagement",COMPLEX_JOURNEY:"ComplexJourneyReturn",HAND_BACK_VERSION:"1.0",BA_HANDOFF:"/badotcomadapter-basa/rs/v1/bahhandoffs",BOOKING_MNG:"?eId=111097",TYPEAHEAD_KEY_WE_CANT_RECOGNIZE:"typeahead-weCantRecognise",TYPEAHEAD_KEY_NO_HOLIDAY_PACKAGE:"typeahead-noHolidayPackage",TYPEAHEAD_ERROR_TEXT:"Sorry, we do not recognise ",TYPEAHEAD_BAH_ERROR_TRACKING_TEXT:"Sorry, we don't offer hotels or car rental from this location - ",LOG_DESTINATION_SERVICE_ERROR:"NG_HP_PT_11002",LOG_DEPARTURE_SERVICE_ERROR:"NG_HP_PT_11001",SERVICE_FLIGHT_ONLY:"FLIGHT_ONLY",SERVICE_HOTEL_ONLY:"HOTEL",SERVICE_CAR_ONLY:"CAR",SERVICE_HOLIDAYS:"HOLIDAY",JOURNEY_TYPE_ONE_WAY:"OWFLT",JOURNEY_TYPE_RETURN:"RTFLT",DATE_FORMAT_DDMMYY:"DD/MM/YY",USER_CHOICE_FLIGHT_PRODUCTS:"FLIGHT_PRODUCTS",USER_CHOICE_HOTEL:"HOTEL_ONLY",USER_CHOICE_CAR:"CAR_ONLY",DAYS:"days",REGEX_SEARCH_OPEN_BRACKET_COMMA_ONLY:/[(),]/g,REGEX_LOC_INPUT:/^[a-zA-Z, ]+$/g,RB_KEY_LOCATION_ERROR_LESS_THAN_CHARACTERS:"plantrip-pleaseEnterThreeCharacters",RB_KEY_LOCATION_SERVICE_UNAVAILABLE_KEY:"typeahead-locationServiceUnavailable",RB_KEY_WE_CANT_RECOGNIZE:"typeahead-weCantRecognise",RB_KEY_CHOOSE_TRAVEL_DATES:"plantrip-pleaseChooseTravelDates",RB_KEY_CHOOSE_RETURN_DATE:"plantrip-pleaseChooseReturnDate",RB_KEY_TRACK_WE_CANT_RECOGNIZE:"typeahead-track-weCantRecognise",TRACK_FROM_TYPEAHEAD:"FromTypeahead",TRACK_TO_TYPEAHEAD:"ToTypeahead",TRACK_DEPARTURE_EMPTY_RESPONSE:"DepartureCantRecogniseInputError",TRACK_DESTINATION_EMPTY_RESPONSE:"DestinationCantRecogniseInputError",TRACK_DEPARTURE_SERVICE_ERROR:"DepartureServiceUnavailable",TRACK_DESTINATION_SERVICE_ERROR:"DestinationServiceUnavailable",TRACK_DEPARTURE_INSUFFICIENT_CHARACTERS_ERROR:"SearchClickedWithInsufficientFromFieldInput",TRACK_DESTINATION_INSUFFICIENT_CHARACTERS_ERROR:"SearchClickedWithInsufficientToFieldInput",TRACK_DATES_NOT_SELECTED:"SearchClickedWithoutSelectingDates",TRACK_RETURN_DATE_NOT_SELECTED:"SearchClickedWithoutSelectingReturnDate",BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_KEY:"BA_FLIGHT_LIST_HANDOVER_LOGGED_IN",BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_INET_KEY:"BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_INET",BA_FLIGHT_LIST_HANDOVER_PUBLIC_BASE_URL:"/travel/booking/public/",BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_BASE_URL:"/travel/booking/execclub/_gf/",BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_INET_BASE_URL:"/travel/booking/inet/",BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_ONBUS_BASE_URL:"/travel/booking/onbusiness/",HOURS_LIST:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],MINUTE_LIST:["00","10","20","30","40","50"],HOURS:"09",MINUTES:"00",BAH_PRODUCTS_ELIGIBILITY_ENDPOINT:"/sse-bahsb/rs/v1/baholidaysshoppingbaskets/producteligibilities",BAH_FLIGHT_AND_HOTEL:"flightAndHotel",BAH_FLIGHT_AND_CAR:"flightAndCar",BAH_HOTEL_ONLY:"hotelOnly",BAH_CAR_ONLY:"carOnly",JOURNEY_TYPE_RT:"RT",JOURNEY_TYPE_OW:"OW",LEAD_DRIVER_SELECTOR:"lead-driver-link",DATE_DDMMYYYY:"DDMMYYYY",US_COUNTRY_CODE:"US",PASSENGER_MIX_COOKIE_NAME:"PASSENGER_MIX",ORIGIN_COOKIE_NAME:"FO_ORIGIN_COOKIE",COOKIE_EXPIRATION_DURATION:20160,COOKIE_EXPIRATION_UNIT:"minutes",DEFAULT_CABIN_TYPE_OBJECT:[{name:"Economy",resourceKey:"Searchbar-economy",value:"M"}],DEFAULT_TICKET_TYPE_OBJECT:[{resourceKey:"Searchbar-lowestPrice",value:"LOWEST"}],HOTLINE_COUNT_ENDPOINT:"/badotcomadapter-bdca/rs/v1/colleague/hotlineinformation",LOG_HOTLINE_COUNT_SERVICE_ERROR:"NG_SB_10010",HOTLINE_HANDOFF_CONSUMER:"HOTLINE",ON_BUSINESS_CUG_ID:"di058",ON_BUSINESS:"On Business"}),ba.lang.namespace("ba.searchbar"),ba.searchbar.Lib.constant("LocationFallbackConstants",{FALLBACK_LOCATIONS:[{locationCode:"TIA",locationValue:"Tirana, Tirana Nene Tereza International (TIA), Albania",countryCode:"AL",cityOjId:"AIR_TIA_AL"},{locationCode:"ALG",locationValue:"Algiers, Algiers (ALG), Algeria",countryCode:"DZ",cityOjId:"CITY_ALG_DZ"},{locationCode:"ANU",locationValue:"Antigua, Antigua (ANU), Antigua",countryCode:"AG",cityOjId:"COUNTRY_AG"},{locationCode:"EZE",locationValue:"Buenos Aires, Buenos Aires - Ministro Pistar (EZE), Argentina",countryCode:"AR",cityOjId:"STA_AR_BuenosA"},{locationCode:"SYD",locationValue:"Sydney, Sydney (SYD), Australia",countryCode:"AU",cityOjId:"CIT_AU_NS_Sydn"},{locationCode:"VIE",locationValue:"Vienna, Vienna (VIE), Austria",countryCode:"AT",cityOjId:"REG_AT_Vienna"},{locationCode:"SZG",locationValue:"Salzburg, Salzburg (SZG), Austria",countryCode:"AT",cityOjId:"STA_AT_Salzburg"},{locationCode:"INN",locationValue:"Innsbruck, Innsbruck (INN), Austria",countryCode:"AT",cityOjId:"CITY_INN_AT"},{locationCode:"NAS",locationValue:"Nassau, Lynden Pindling International (NAS), Bahamas",countryCode:"BS",cityOjId:"AirBsNassauA981"},{locationCode:"BAH",locationValue:"Bahrain, Bahrain (BAH), Bahrain",countryCode:"BH",cityOjId:"REG_BH_Manama"},{locationCode:"BGI",locationValue:"Barbados, Barbados (BGI), Barbados",countryCode:"BB",cityOjId:"COUNTRY_BB"},{locationCode:"BRU",locationValue:"Brussels, Brussels Airport (BRU), Belgium",countryCode:"BE",cityOjId:"CITY_BRU_BE"},{locationCode:"BDA",locationValue:"Bermuda, Bermuda (BDA), Bermuda",countryCode:"BM",cityOjId:"COUNTRY_BM"},{locationCode:"GRU",locationValue:"Sao Paulo, Sao Paulo - Guarulhos (GRU), Brazil",countryCode:"BR",cityOjId:"STA_BR_SaoPaulo"},{locationCode:"GIG",locationValue:"Rio De Janeiro, Galeao-A.C Jobim International (GIG), Brazil",countryCode:"BR",cityOjId:"STA_BR_RiodeJa"},{locationCode:"SAO",locationValue:"Sao Paulo, Sao Paulo - All Airports (SAO), Brazil",countryCode:"BR",cityOjId:"STA_BR_SaoPaulo"},{locationCode:"SOF",locationValue:"Sofia, Sofia Vrazhdebna (SOF), Bulgaria",countryCode:"BG",cityOjId:"CITY_SOF_BG"},{locationCode:"YYZ",locationValue:"Toronto, Toronto Lester B Pearson International (YYZ), Canada",countryCode:"CA",cityOjId:"CITY_YTO_ON_CA"},{locationCode:"YVR",locationValue:"Vancouver, Vancouver (YVR), Canada",countryCode:"CA",cityOjId:"CITY_YVR_BC_CA"},{locationCode:"YYC",locationValue:"Calgary, Calgary (YYC), Canada",countryCode:"CA",cityOjId:"CITY_YYC_AB_CA"},{locationCode:"YUL",locationValue:"Montreal, Montreal - Dorval (YUL), Canada",countryCode:"CA",cityOjId:"CITY_YMQ_PQ_CA"},{locationCode:"SCL",locationValue:"Santiago, Santiago (SCL), Chile",countryCode:"CL",cityOjId:"REG_CL_Santiag"},{locationCode:"BJS",locationValue:"Beijing, Beijing - All Airports (BJS), China",countryCode:"CN",cityOjId:""},{locationCode:"PVG",locationValue:"Shanghai, Shanghai Pu Dong (PVG), China",countryCode:"CN",cityOjId:""},{locationCode:"SJO",locationValue:"San Jose, Sanjose (SJO), Costa Rica",countryCode:"CR",cityOjId:"CITY_SJC_CA_US"},{locationCode:"DBV",locationValue:"Dubrovnik, Dubrovnik (DBV), Croatia",countryCode:"HR",cityOjId:"CITY_DBV_HR"},{locationCode:"LCA",locationValue:"Larnaca, Larnaca (LCA), Cyprus",countryCode:"CY",cityOjId:"STA_CY_Larnaca"},{locationCode:"PFO",locationValue:"Paphos, Paphos (PFO), Cyprus",countryCode:"CY",cityOjId:"CITY_PFO_CY"},{locationCode:"PRG",locationValue:"Prague, Prague Ruzyne International Airport (PRG), Czech Republic",countryCode:"CZ",cityOjId:"CITY_PRG_CZ"},{locationCode:"CPH",locationValue:"Copenhagen, Copenhagen (CPH), Denmark",countryCode:"DK",cityOjId:"CITY_CPH_DK"},{locationCode:"BLL",locationValue:"Billund, Billund (BLL), Denmark",countryCode:"DK",cityOjId:"CITY_BLL_DK"},{locationCode:"PUJ",locationValue:"Punta Cana, Punta Cana International (PUJ), Dominican Republic",countryCode:"DO",cityOjId:"CITY_PUJ_DO"},{locationCode:"CAI",locationValue:"Cairo, Cairo (CAI), Egypt",countryCode:"EG",cityOjId:""},{locationCode:"HEL",locationValue:"Helsinki, Helsinki (HEL), Finland",countryCode:"FI",cityOjId:"CITY_HEL_FI"},{locationCode:"CDG",locationValue:"Paris, Paris Charles De Gaulle (CDG), France",countryCode:"FR",cityOjId:"CITY_PAR_FR"},{locationCode:"NCE",locationValue:"Nice, Nice Cote D'Azur (NCE), France",countryCode:"FR",cityOjId:"CITY_NCE_FR"},{locationCode:"PAR",locationValue:"Paris, Paris - All Airports (PAR), France",countryCode:"FR",cityOjId:"CITY_PAR_FR"},{locationCode:"MRS",locationValue:"Marseille, Marseille (MRS), France",countryCode:"FR",cityOjId:"CITY_MRS_FR"},{locationCode:"LYS",locationValue:"Lyon, Lyon (LYS), France",countryCode:"FR",cityOjId:"CITY_LYS_FR"},{locationCode:"TLS",locationValue:"Toulouse, Toulouse Blagnac (TLS), France",countryCode:"FR",cityOjId:"CITY_TLS_FR"},{locationCode:"BOD",locationValue:"Bordeaux, Bordeaux (BOD), France",countryCode:"FR",cityOjId:"CITY_BOD_FR"},{locationCode:"TXL",locationValue:"Berlin, Berlin Tegel (TXL), Germany",countryCode:"DE",cityOjId:"STA_DE_Berlin"},{locationCode:"MUC",locationValue:"Munich, Munich (MUC), Germany",countryCode:"DE",cityOjId:"REG_DE_Munich"},{locationCode:"HAM",locationValue:"Hamburg, Hamburg (HAM), Germany",countryCode:"DE",cityOjId:"STA_DE_Hamburg"},{locationCode:"DUS",locationValue:"Dusseldorf, Dusseldorf (DUS), Germany",countryCode:"DE",cityOjId:""},{locationCode:"FRA",locationValue:"Frankfurt, Frankfurt (FRA), Germany",countryCode:"DE",cityOjId:"CITY_FRA_DE"},{locationCode:"STR",locationValue:"Stuttgart, Stuttgart (STR), Germany",countryCode:"DE",cityOjId:"CITY_STR_DE"},{locationCode:"HAJ",locationValue:"Hanover, Hanover (HAJ), Germany",countryCode:"DE",cityOjId:"REG_DE_Hanover"},{locationCode:"ACC",locationValue:"Accra, Accra Kotoka Intl (ACC), Ghana",countryCode:"GH",cityOjId:"CITY_ACC_GH"},{locationCode:"GIB",locationValue:"Gibraltar, Gibraltar (GIB), Gibraltar",countryCode:"GI",cityOjId:"CITY_GIB_GI"},{locationCode:"ATH",locationValue:"Athens, Athens (ATH), Greece",countryCode:"GR",cityOjId:"CITY_ATH_GR"},{locationCode:"CFU",locationValue:"Kerkyra, Kerkyra (CFU), Greece",countryCode:"GR",cityOjId:""},{locationCode:"JTR",locationValue:"Thira, Thira (JTR), Greece",countryCode:"GR",cityOjId:""},{locationCode:"JMK",locationValue:"Mykonos, Mykonos (JMK), Greece",countryCode:"GR",cityOjId:"REG_GR_Mykonos"},{locationCode:"HKG",locationValue:"Hong Kong, Hong Kong - Chek Lap Kok (HKG), Hong Kong - SAR of China",countryCode:"HK",cityOjId:"CIT_CN_HongKon"},{locationCode:"BUD",locationValue:"Budapest, Budapest (BUD), Hungary",countryCode:"HU",cityOjId:"STA_HU_Budapest"},{locationCode:"KEF",locationValue:"Reykjavik, Keflavik International (KEF), Iceland",countryCode:"IS",cityOjId:"STA_IS_Reykjav"},{locationCode:"DEL",locationValue:"Delhi, Delhi (DEL), India",countryCode:"IN",cityOjId:"CITY_DEL_IN"},{locationCode:"BOM",locationValue:"Mumbai, Mumbai (BOM), India",countryCode:"IN",cityOjId:"StaInMaMumba342"},{locationCode:"HYD",locationValue:"Hyderabad, Hyderabad (HYD), India",countryCode:"IN",cityOjId:"CITY_HYD_IN"},{locationCode:"BLR",locationValue:"Bengaluru, Kempegowda Intl (BLR), India",countryCode:"IN",cityOjId:"CITY_BLR_IN"},{locationCode:"MAA",locationValue:"Chennai, Chennai (MAA), India",countryCode:"IN",cityOjId:"CITY_MAA_IN"},{locationCode:"DPS",locationValue:"Denpasar-Bali, Denpasar Bali (DPS), Indonesia",countryCode:"ID",cityOjId:"STA_ID_Bali"},{locationCode:"DUB",locationValue:"Dublin, Dublin (DUB), Ireland",countryCode:"IE",cityOjId:"STA_IE_Dublin"},{locationCode:"ORK",locationValue:"Cork, Cork (ORK), Ireland",countryCode:"IE",cityOjId:"CITY_ORK_IE"},{locationCode:"TLV",locationValue:"Tel Aviv Yafo, Tel Aviv (TLV), Israel",countryCode:"IL",cityOjId:"STA_IL_TelAviv"},{locationCode:"FCO",locationValue:"Rome, Rome-Fiumicino (FCO), Italy",countryCode:"IT",cityOjId:"CITY_ROM_IT"},{locationCode:"VCE",locationValue:"Venice, Venice (VCE), Italy",countryCode:"IT",cityOjId:"CITY_VCE_IT"},{locationCode:"MIL",locationValue:"Milan, Milan - All Airports (MIL), Italy",countryCode:"IT",cityOjId:"CITY_MIL_IT"},{locationCode:"LIN",locationValue:"Milan, Milan-Linate (LIN), Italy",countryCode:"IT",cityOjId:"CITY_MIL_IT"},{locationCode:"NAP",locationValue:"Naples, Naples Capodichino (NAP), Italy",countryCode:"IT",cityOjId:"CITY_NAP_IT"},{locationCode:"FLR",locationValue:"Florence, Florence (FLR), Italy",countryCode:"IT",cityOjId:"CITY_FLR_IT"},{locationCode:"PSA",locationValue:"Pisa, Pisa (PSA), Italy",countryCode:"IT",cityOjId:"CIT_IT_Pisa"},{locationCode:"BLQ",locationValue:"Bologna, Bologna (BLQ), Italy",countryCode:"IT",cityOjId:"CITY_BLQ_IT"},{locationCode:"MXP",locationValue:"Milan, Milan - Malpensa (MXP), Italy",countryCode:"IT",cityOjId:"CITY_MIL_IT"},{locationCode:"VRN",locationValue:"Verona, Verona (VRN), Italy",countryCode:"IT",cityOjId:"CITY_VRN_IT"},{locationCode:"TRN",locationValue:"Turin, Turin (TRN), Italy",countryCode:"IT",cityOjId:"CITY_TRN_IT"},{locationCode:"BGY",locationValue:"Milan, Milan Bergamo Orio Al Serio (BGY), Italy",countryCode:"IT",cityOjId:"CITY_MIL_IT"},{locationCode:"KIN",locationValue:"Kingston, Norman Manley International (KIN), Jamaica",countryCode:"JM",cityOjId:"STA_JM_Kingston"},{locationCode:"TYO",locationValue:"Tokyo, Tokyo - All Airports (TYO), Japan",countryCode:"JP",cityOjId:"STA_JP_Tokyo"},{locationCode:"HND",locationValue:"Tokyo, Tokyo Haneda (HND), Japan",countryCode:"JP",cityOjId:"STA_JP_Tokyo"},{locationCode:"NBO",locationValue:"Nairobi, Nairobi (NBO), Kenya",countryCode:"KE",cityOjId:""},{locationCode:"KWI",locationValue:"Kuwait, Kuwait (KWI), Kuwait",countryCode:"KW",cityOjId:"COUNTRY_KW"},{locationCode:"LUX",locationValue:"Luxembourg, Luxembourg International (LUX), Luxembourg",countryCode:"LU",cityOjId:"COUNTRY_LU"},{locationCode:"KUL",locationValue:"Kuala Lumpur, Kuala Lumpur International (KUL), Malaysia",countryCode:"MY",cityOjId:"CITY_KUL_MY"},{locationCode:"MLE",locationValue:"Male, Velana International (MLE), Maldives",countryCode:"MV",cityOjId:""},{locationCode:"MLA",locationValue:"Malta, Malta International (MLA), Malta",countryCode:"MT",cityOjId:"COUNTRY_MT"},{locationCode:"MRU",locationValue:"Mauritius, Mauritius Sir S Ramgoolam Intl (MRU), Mauritius",countryCode:"MU",cityOjId:"COUNTRY_MU"},{locationCode:"CUN",locationValue:"Cancun, Cancun (CUN), Mexico",countryCode:"MX",cityOjId:"CITY_CUN_MX"},{locationCode:"MEX",locationValue:"Mexico City, Mexico City (MEX), Mexico",countryCode:"MX",cityOjId:"CITY_MEX_MX"},{locationCode:"RAK",locationValue:"Marrakech, Marrakech (RAK), Morocco",countryCode:"MA",cityOjId:"STA_MA_Marrake"},{locationCode:"AMS",locationValue:"Amsterdam, Amsterdam (AMS), Netherlands",countryCode:"NL",cityOjId:"CITY_AMS_NL"},{locationCode:"LOS",locationValue:"Lagos, Lagos Murtala Muhammed International (LOS), Nigeria",countryCode:"NG",cityOjId:"CitPtLagos082"},{locationCode:"ABV",locationValue:"Abuja, Abuja Nnamdi Azikiwe International (ABV), Nigeria",countryCode:"NG",cityOjId:""},{locationCode:"OSL",locationValue:"Oslo, Oslo Gardermoen (OSL), Norway",countryCode:"NO",cityOjId:"STA_NO_Oslo"},{locationCode:"ISB",locationValue:"Islamabad, Islamabad (ISB), Pakistan",countryCode:"PK",cityOjId:""},{locationCode:"LIM",locationValue:"Lima, Lima J Chavez Intl (LIM), Peru",countryCode:"PE",cityOjId:"STA_PE_Lima"},{locationCode:"WAW",locationValue:"Warsaw, Frederic Chopin (WAW), Poland",countryCode:"PL",cityOjId:"CITY_WAW_PL"},{locationCode:"KRK",locationValue:"Krakow, Krakow (KRK), Poland",countryCode:"PL",cityOjId:"STA_PL_Krakow"},{locationCode:"FAO",locationValue:"Faro, Faro (FAO), Portugal",countryCode:"PT",cityOjId:"CitPtFaro972"},{locationCode:"LIS",locationValue:"Lisbon, Lisbon (LIS), Portugal",countryCode:"PT",cityOjId:"CITY_LIS_PT"},{locationCode:"FNC",locationValue:"Funchal, Funchal (FNC), Portugal",countryCode:"PT",cityOjId:"CITY_FNC_PT"},{locationCode:"OPO",locationValue:"Oporto, Porto (OPO), Portugal",countryCode:"PT",cityOjId:""},{locationCode:"ICN",locationValue:"Seoul, Seoul (Incheon Intnl) (ICN), Republic of Korea",countryCode:"KP",cityOjId:"CITY_SEL_KR"},{locationCode:"OTP",locationValue:"Bucharest, Bucharest Otopeni (OTP), Romania",countryCode:"RO",cityOjId:"CITY_BUH_RO"},{locationCode:"MOW",locationValue:"Moscow, Moscow - All Airports (MOW), Russia",countryCode:"RU",cityOjId:"CITY_MOW_RU"},{locationCode:"RUH",locationValue:"Riyadh, Riyadh King Khalid International (RUH), Saudi Arabia",countryCode:"SA",cityOjId:""},{locationCode:"JED",locationValue:"Jeddah, Jeddah (JED), Saudi Arabia",countryCode:"SA",cityOjId:""},{locationCode:"SEZ",locationValue:"Mahe Island, Seychelles (SEZ), Seychelles",countryCode:"SC",cityOjId:"CITY_PRI_SC"},{locationCode:"SIN",locationValue:"Singapore, Singapore (SIN), Singapore",countryCode:"SG",cityOjId:"COUNTRY_SG"},{locationCode:"CPT",locationValue:"Cape Town, Cape Town (CPT), South Africa",countryCode:"ZA",cityOjId:"CITY_CPT_ZA"},{locationCode:"JNB",locationValue:"Johannesburg, Johannesburg International (JNB), South Africa",countryCode:"ZA",cityOjId:"CITY_JNB_ZA"},{locationCode:"DUR",locationValue:"Durban, Durban King Shaka Intl (DUR), South Africa",countryCode:"ZA",cityOjId:"StaZaSoDurba833"},{locationCode:"PLZ",locationValue:"Port Elizabeth, Port Elizabeth (PLZ), South Africa",countryCode:"ZA",cityOjId:"CITY_PLZ_ZA"},{locationCode:"BCN",locationValue:"Barcelona, Barcelona (BCN), Spain",countryCode:"ES",cityOjId:"CITY_BCN_ES"},{locationCode:"AGP",locationValue:"Malaga, Malaga Airport (AGP), Spain",countryCode:"ES",cityOjId:"REG_ES_CostaDe"},{locationCode:"MAD",locationValue:"Madrid, Madrid (MAD), Spain",countryCode:"ES",cityOjId:"STA_ES_Madrid"},{locationCode:"PMI",locationValue:"Palma Mallorca, Palma (PMI), Spain",countryCode:"ES",cityOjId:"CITY_PMI_ES"},{locationCode:"ALC",locationValue:"Alicante, Alicante (ALC), Spain",countryCode:"ES",cityOjId:"RegEsAlicant367"},{locationCode:"TFS",locationValue:"Tenerife, Tenerife-Sur Reina Sofia (TFS), Spain",countryCode:"ES",cityOjId:"CITY_TCI_ES"},{locationCode:"IBZ",locationValue:"Ibiza, Ibiza (IBZ), Spain",countryCode:"ES",cityOjId:"CITY_IBZ_ES"},{locationCode:"TCI",locationValue:"Tenerife, Tenerife - All Airports (TCI), Spain",countryCode:"ES",cityOjId:"CITY_TCI_ES"},{locationCode:"ACE",locationValue:"Lanzarote, Arrecife-Lanzarote (ACE), Spain",countryCode:"ES",cityOjId:"CITY_ACE_ES"},{locationCode:"LPA",locationValue:"Gran Canaria, Las Palmas Gran Canaria (LPA), Spain",countryCode:"ES",cityOjId:"CIT_ES_GranCan"},{locationCode:"SVQ",locationValue:"Seville, Seville (SVQ), Spain",countryCode:"ES",cityOjId:""},{locationCode:"VLC",locationValue:"Valencia, Valencia (VLC), Spain",countryCode:"ES",cityOjId:"CITY_VLC_ES"},{locationCode:"BIO",locationValue:"Bilbao, Bilbao (BIO), Spain",countryCode:"ES",cityOjId:"CITY_BIO_ES"},{locationCode:"UVF",locationValue:"St Lucia, St Lucia (UVF), St Lucia",countryCode:"LC",cityOjId:"COUNTRY_LC"},{locationCode:"ARN",locationValue:"Stockholm, Stockholm-Arlanda (ARN), Sweden",countryCode:"SE",cityOjId:"CITY_STO_SE"},{locationCode:"GOT",locationValue:"Gothenburg, Gothenburg (GOT), Sweden",countryCode:"SE",cityOjId:"REG_SE_Gothenb"},{locationCode:"STO",locationValue:"Stockholm, Stockholm - All Airports (STO), Sweden",countryCode:"SE",cityOjId:"CITY_STO_SE"},{locationCode:"GVA",locationValue:"Geneva, Geneva (GVA), Switzerland",countryCode:"CH",cityOjId:"CitChGeneva153"},{locationCode:"ZRH",locationValue:"Zurich, Zurich (ZRH), Switzerland",countryCode:"CH",cityOjId:"CitChZurich184"},{locationCode:"BSL",locationValue:"Basle, Basle Mulhouse Euroairport Swiss Ch (BSL), Switzerland",countryCode:"CH",cityOjId:"REG_CH_Basel"},{locationCode:"BKK",locationValue:"Bangkok, Bangkok (BKK), Thailand",countryCode:"TH",cityOjId:"CITY_BKK_TH"},{locationCode:"POS",locationValue:"Port Of Spain, Piarco International (POS), Trinidad and Tobago",countryCode:"TT",cityOjId:"REG_TT_Trinida"},{locationCode:"IST",locationValue:"Istanbul, Istanbul (IST), Turkey",countryCode:"TR",cityOjId:"STA_TR_Istanbul"},{locationCode:"DXB",locationValue:"Dubai, Dubai (DXB), UAE",countryCode:"AE",cityOjId:"CITY_DXB_AE"},{locationCode:"AUH",locationValue:"Abu Dhabi, Abu Dhabi International (AUH), UAE",countryCode:"AE",cityOjId:"CITY_AUH_AE"},{locationCode:"LON",locationValue:"London, London - All Airports (LON), UK",countryCode:"GB",cityOjId:"CITY_LON_GB"},{locationCode:"LHR",locationValue:"London, London Heathrow (LHR), UK",countryCode:"GB",cityOjId:"CITY_LON_GB"},{locationCode:"LGW",locationValue:"London, London Gatwick (LGW), UK",countryCode:"GB",cityOjId:"CITY_LON_GB"},{locationCode:"MAN",locationValue:"Manchester, Manchester (MAN), UK",countryCode:"GB",cityOjId:"STA_GB_Greater"},{locationCode:"EDI",locationValue:"Edinburgh, Edinburgh (EDI), UK",countryCode:"GB",cityOjId:"STA_GB_Edinbur"},{locationCode:"GLA",locationValue:"Glasgow, Glasgow (GLA), UK",countryCode:"GB",cityOjId:"CITY_GLA_GB"},{locationCode:"LCY",locationValue:"London, London City Airport (LCY), UK",countryCode:"GB",cityOjId:"CITY_LON_GB"},{locationCode:"NCL",locationValue:"Newcastle, Newcastle (NCL), UK",countryCode:"GB",cityOjId:"StaGbEnNewca186"},{locationCode:"ABZ",locationValue:"Aberdeen, Aberdeen (ABZ), UK",countryCode:"GB",cityOjId:"CITY_ABZ_GB"},{locationCode:"JER",locationValue:"Jersey, Jersey (JER), UK",countryCode:"GB",cityOjId:"CITY_JER_GB"},{locationCode:"BHD",locationValue:"Belfast, Belfast City Airport (BHD), UK",countryCode:"GB",cityOjId:"STA_GB_Belfast"},{locationCode:"STN",locationValue:"London, Stansted (STN), UK",countryCode:"GB",cityOjId:"CITY_LON_GB"},{locationCode:"LBA",locationValue:"Leeds, Leeds Bradford (LBA), UK",countryCode:"GB",cityOjId:"StaGbEnLeeds783"},{locationCode:"INV",locationValue:"Inverness, Inverness (INV), UK",countryCode:"GB",cityOjId:"CITY_INV_GB"},{locationCode:"BHX",locationValue:"Birmingham, Birmingham (BHX), UK",countryCode:"GB",cityOjId:"CITY_BHX_GB"},{locationCode:"LTN",locationValue:"London, Luton Airport (LTN), UK",countryCode:"GB",cityOjId:"CITY_LON_GB"},{locationCode:"JFK",locationValue:"New York, New York - John F Kennedy (JFK), USA",countryCode:"US",cityOjId:"CIT_US_NY_NewY"},{locationCode:"NYC",locationValue:"New York, New York - All Airports (NYC), USA",countryCode:"US",cityOjId:"CIT_US_NY_NewY"},{locationCode:"MCO",locationValue:"Orlando, Orlando (MCO), USA",countryCode:"US",cityOjId:"CITY_ORL_FL_US"},{locationCode:"LAX",locationValue:"Los Angeles, Los Angeles (LAX), USA",countryCode:"US",cityOjId:"CITY_LAX_CA_US"},{locationCode:"MIA",locationValue:"Miami, Miami (MIA), USA",countryCode:"US",cityOjId:"CITY_MIA_FL_US"},{locationCode:"LAS",locationValue:"Las Vegas, Las Vegas (LAS), USA",countryCode:"US",cityOjId:"CITY_LAS_NV_US"},{locationCode:"SFO",locationValue:"San Francisco, San Francisco (SFO), USA",countryCode:"US",cityOjId:"CITY_SFO_CA_US"},{locationCode:"BOS",locationValue:"Boston, Boston Edward L Logan International (BOS), USA",countryCode:"US",cityOjId:"CITY_BOS_MA_US"},{locationCode:"ORD",locationValue:"Chicago, Chicago (ORD), USA",countryCode:"US",cityOjId:"CITY_CHI_IL_US"},{locationCode:"TPA",locationValue:"Tampa, Tampa (TPA), USA",countryCode:"US",cityOjId:"CitUsTampa083"},{locationCode:"EWR",locationValue:"New York, Newark Nj (EWR), USA",countryCode:"US",cityOjId:"CIT_US_NY_NewY"},{locationCode:"SEA",locationValue:"Seattle, Seattle (SEA), USA",countryCode:"US",cityOjId:"CitUsSeattle306"},{locationCode:"IAD",locationValue:"Washington, Washington - Dulles (IAD), USA",countryCode:"US",cityOjId:"CitUsDcWashi072"},{locationCode:"DFW",locationValue:"Dallas Fort Worth, Dallas Fort Worth International (DFW), USA",countryCode:"US",cityOjId:"CitUsDallasF248"},{locationCode:"SAN",locationValue:"San Diego, San Diego (SAN), USA",countryCode:"US",cityOjId:"CITY_SAN_CA_US"},{locationCode:"DEN",locationValue:"Denver, Denver (DEN), USA",countryCode:"US",cityOjId:"CITY_DEN_CO_US"},{locationCode:"PHX",locationValue:"Phoenix, Phoenix (PHX), USA",countryCode:"US",cityOjId:"CitUsAzPhoen100"},{locationCode:"PHL",locationValue:"Philadelphia, Philadelphia (PHL), USA",countryCode:"US",cityOjId:"CITY_PHL_PA_US"},{locationCode:"AUS",locationValue:"Austin, Austin-Bergstrom (AUS), USA",countryCode:"US",cityOjId:"CITY_AUS_TX_US"},{locationCode:"IAH",locationValue:"Houston, Houston George Bush Intercontinental (IAH), USA",countryCode:"US",cityOjId:"CITY_HOU_TX_US"},{locationCode:"WAS",locationValue:"Washington, Washington - All Airports (WAS), USA",countryCode:"US",cityOjId:"CitUsDcWashi072"},{locationCode:"ATL",locationValue:"Atlanta, Atlanta (ATL), USA",countryCode:"US",cityOjId:"CITY_ATL_GA_US"},{locationCode:"MSY",locationValue:"New Orleans, New Orleans (MSY), USA",countryCode:"US",cityOjId:"CITY_MSY_LA_US"},{locationCode:"BWI",locationValue:"Baltimore, Baltimore Wash.Intl (BWI), USA",countryCode:"US",cityOjId:"CITY_BWI_MD_US"
},{locationCode:"BNA",locationValue:"Nashville, Nashville (BNA), USA",countryCode:"US",cityOjId:"CITY_BNA_TN_US"},{locationCode:"SJC",locationValue:"San Jose, San Jose International Airport (SJC), USA",countryCode:"US",cityOjId:"CITY_SJC_CA_US"},{locationCode:"PIT",locationValue:"Pittsburgh, Pittsburgh (PIT), USA",countryCode:"US",cityOjId:"CITY_PIT_PA_US"},{locationCode:"PDX",locationValue:"Portland, Portland International (PDX), USA",countryCode:"US",cityOjId:"CITY_PDX_OR_US"},{locationCode:"HRE",locationValue:"Harare, Rg Mugabe Intl (HRE), Zimbabwe",countryCode:"ZW",cityOjId:""}],FALLBACK_ENCRYPTED_STRING:"123-456"}),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchPanelController=function(e,a,o,t,i,r,n,c,l,s,d,u,C,_){"use strict";var T,p,h,O,E,A,I,y,S,g,R,b,L,D=this,P=e.SearchBarViewModelFactory;this.log=e.BALog,this.moment=e.Moment,this.$document=e.$document,this.SearchBarConstants=s,this.searchPanelViewModel=e.SearchPanelViewModel,this.searchbarHelperService=c,this.$scope=a,this.$timeout=o,this.$scope.errorMessage={},this.$scope.cabinType=c.cabinType,this.HotlineHelperService=u,this.moment=e.Moment,this.HotlineHelperService=u,this.$scope.isHotlineInformationRetrieved=!1,this.ErrorHandlingHelperService=_,this.$scope.hotlineCountInformation={S1:0,S2:0,S3:(this.moment("31 03","DD MM").isSameOrAfter(this.moment(),"day")?this.moment("31 03","DD MM"):this.moment("31 03","DD MM").add(1,"year")).format("DD MMM YYYY").toString()},this.$scope.isUpsellPresent={flightOnly:!1,flightHotel:!1,flightCar:!1},this.$scope.isUpsellOffered={flightHotel:!1,flightCar:!1},this.hoursList=s.HOURS_LIST,this.minutesList=s.MINUTE_LIST,this.searchPanelViewModel.carInfo.dropOff.hours=s.HOURS,this.searchPanelViewModel.carInfo.dropOff.minutes=s.MINUTES,this.searchPanelViewModel.carInfo.pickUp.hours=s.HOURS,this.searchPanelViewModel.carInfo.pickUp.minutes=s.MINUTES,this.$scope.userSelection={},this.$scope.oldToAndFrom={},this.$scope.previousSearchData={origin:{},destination:{}},this.$scope.cugName=n.getCugCookie(),this.$scope.cugID=n.getNumericalIDCugCookie(),this.$scope.isHotlineCug="ox231"===this.$scope.cugID,this.$scope.isFormerStaffCug="xs609"===this.$scope.cugID,this.$scope.isStaffCug=D.$scope.isHotlineCug||D.$scope.isFormerStaffCug,this.$scope.isNotStaffCug=!this.$scope.isStaffCug,this.getHotlineBookingInformation(),A=function(){D.$scope.showFlightOnlyUpsell=!1,D.$scope.showFlightHotelUpsell=!1,D.$scope.showFlightCarUpsell=!1},I=function(){D.$scope.isUpsellPresent.flightOnly=!1,D.$scope.isUpsellPresent.flightHotel=!1,D.$scope.isUpsellPresent.flightCar=!1},y=function(e){A(),e&&(I(),c.setUpsellValuesToBlank(D.searchPanelViewModel)),D.getUpsellInfo()},S=function(e){P.buildPassengers(e).then(function(e){D.$scope.passengers=e})},g=function(e){return e===s.FLIGHT&&D.$scope.isUpsellPresent.flightOnly||e===s.FLIGHT_AND_HOTEL&&D.$scope.isUpsellPresent.flightHotel||e===s.FLIGHT_AND_CAR&&D.$scope.isUpsellPresent.flightCar},R=function(e){D.$scope.journeyDates=[],e===s.FLIGHT||e===s.CONCUR?D.$scope.journeyDates.push(D.moment().startOf("day")):(D.$scope.journeyDates.push(D.moment().startOf("day")),D.$scope.journeyDates.push(D.moment().startOf("day").add(7,"days")))},T=function(){D.$scope.previousSearchData.journeyDateCopy=angular.copy(D.$scope.journeyDates),D.$scope.previousSearchData.origin=angular.copy(D.searchPanelViewModel.origin),D.$scope.previousSearchData.destination=angular.copy(D.searchPanelViewModel.destination)},p={M:s.CABIN_ECONOMY,F:s.CABIN_FIRST,C:s.CABIN_BUSINESS,W:s.CABIN_PREMIUM_ECONOMY},h=function(e){e[0].hasOwnProperty("rounded_lowest_price")?(T(),e[0].hasOwnProperty("cabin")?D.searchPanelViewModel.flightOnlyCabin=p[e[0].cabin]:D.searchPanelViewModel.flightOnlyCabin=p[s.DEFAULT_CABIN_CLASS],D.$scope.isUpsellPresent.flightOnly=!0,D.$scope.showFlightOnlyUpsell=!0,D.searchPanelViewModel.flightOnlyUpsell=i("baExtendedCurrency")(e[0].rounded_lowest_price,e[0].currencyDetails.symbol,0,e[0].currencyDetails.placement,!1)):(D.$scope.isUpsellPresent.flightOnly=!1,D.$scope.showFlightOnlyUpsell=!1,D.searchPanelViewModel.flightOnlyUpsell="")},O=function(e){e[1].hasOwnProperty("pricePP")&&parseInt(e[0].rounded_lowest_price,10)<parseInt(e[1].pricePP,10)?(T(),D.$scope.showFlightHotelUpsell=!0,D.$scope.isUpsellPresent.flightHotel=!0,D.$scope.isUpsellOffered.flightHotel=!0,D.searchPanelViewModel.flightHotelUpsell=i("baExtendedCurrency")(e[1].pricePP,e[0].currencyDetails.symbol,0,e[0].currencyDetails.placement,!1),D.searchPanelViewModel.flightHotelCost=e[1].totalPrice,D.searchPanelViewModel.flightHotelId=e[1].hotelID):(D.$scope.showFlightHotelUpsell=!1,D.$scope.isUpsellPresent.flightHotel=!1,D.$scope.isUpsellOffered.flightHotel=!1,D.searchPanelViewModel.flightHotelUpsell="",D.searchPanelViewModel.flightHotelCost="",D.searchPanelViewModel.flightHotelId="")},E=function(e){e[2].hasOwnProperty("pricePP")&&parseInt(e[0].rounded_lowest_price,10)<parseInt(e[2].pricePP,10)?(T(),D.$scope.isUpsellOffered.flightCar=!0,D.$scope.isUpsellPresent.flightCar=!0,D.$scope.showFlightCarUpsell=!0,D.searchPanelViewModel.flightCarUpsell=i("baExtendedCurrency")(e[2].pricePP,e[0].currencyDetails.symbol,0,e[0].currencyDetails.placement,!1)):(D.$scope.showFlightCarUpsell=!1,D.$scope.isUpsellPresent.flightCar=!1,D.$scope.isUpsellOffered.flightCar=!1,D.searchPanelViewModel.flightCarUpsell="")},b=function(){D.searchPanelViewModel.selectedPropositionType=s.FLIGHT_ONLY,D.$scope.userChoice=s.FLIGHT,a.concur&&D.setUserChoice(s.CONCUR,"click"),C.populateJourneyDetailsFromCookie(D.searchPanelViewModel),D.$scope.journeyDates=D.searchPanelViewModel.dates,C.validateCookies(D.searchPanelViewModel),P.buildPassengers(D.searchPanelViewModel).then(function(e){D.$scope.passengers=e,C.updatePassengerMixFromCookie(D.$scope.passengers.mix.group[0])}),c.rebuildCabinViewData(a.userSelection,D.searchPanelViewModel),P.buildTicketType().then(function(e){var a;D.$scope.ticketType=e,a=e.availableTicketTypes.filter(function(e){return e.value===D.searchPanelViewModel.selectedTicketType})[0],D.$scope.userSelection.selectedTicketType=a?a.value:angular.copy(e.selected)}),D.$scope.availabilityError&&(D.$scope.errorMessage.showInvalidWarning=!0,D.ErrorHandlingHelperService.setupAvailabilityErrors(D.$scope.availabilityError,D.$scope.errorMessage))},L=function(){var e,a=[];for(e=(new Date).getFullYear()-100;e<=(new Date).getFullYear()-17;e+=1)a.push(e);D.searchPanelViewModel.leadDriverDateOfBirth.dayList=ba.searchbar.SearchbarValidationService.prototype.getDay(),D.searchPanelViewModel.leadDriverDateOfBirth.monthList=ba.searchbar.SearchbarValidationService.prototype.getMonth(),D.searchPanelViewModel.leadDriverDateOfBirth.yearList=a},this.updateOriginSuggestions=function(e,a){c.updateOriginSuggestions(e,a,D.$scope.userChoice,D.$scope.errorMessage)},this.updateDestination=function(e){c.updateDestination(e,this.searchPanelViewModel,D.$scope.errorMessage,D.$scope.userChoice,D.$scope.journeyDates,D.$scope.oldToAndFrom,D.$scope.userSelection)},this.updateDestinationSuggestions=function(e,a){c.updateDestinationSuggestions(e,a,D.$scope.userChoice,D.$scope.errorMessage)},this.checkDropOff=function(){D.$scope.carOnly.showDropLocation||this.updateDestination(void 0),this.searchPanelViewModel.carInfo.showDropLocation=D.$scope.carOnly.showDropLocation},this.checkLeadDriverAge=function(){this.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection=!0,this.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedDay="",this.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedMonth="",this.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedYear="",D.$scope.errorMessage.invalidDOB=!1},this.submitSearchForm=function(){var a;D.submitted=!0,this.isSearchEnabled()&&this.leadDriverErrorValidation()&&(n.setCookie(s.CORPORATE_BOOKING,D.$scope.userChoice===s.CONCUR,s.COOKIE_PATH,!0,3600,s.SECONDS),this.searchPanelViewModel.dates=D.$scope.journeyDates,a=t.createHandOverData(this.searchPanelViewModel,{passengers:D.$scope.passengers,cabinType:D.$scope.cabinType,ticketType:D.$scope.ticketType,selectedCabin:D.$scope.userSelection.selectedCabin,selectedTicketType:D.$scope.userSelection.selectedTicketType}),r.trackRedirectData(a,this.searchPanelViewModel.selectedPropositionType,D.$scope.userChoice,D.$scope.isUpsellOffered),C.updateJourneyDetailsCookie(this.searchPanelViewModel),e.SearchbarHandOverService.handOver(this.searchPanelViewModel.selectedPropositionType,a))},this.isSearchEnabled=function(){return c.isSearchEnabled(D.$scope.userChoice,this.searchPanelViewModel,D.$scope.carOnly,D.$scope.journeyDates,D.$scope.errorMessage,D.$scope.availabilityError)},this.leadDriverErrorValidation=function(){return d.leadDriverErrorValidation(D.$scope.userChoice,this.searchPanelViewModel,D.$scope.errorMessage)},this.getUpsellInfo=function(){D.$scope.journeyDates.length>1&&this.searchPanelViewModel.origin.locationCode&&this.searchPanelViewModel.destination.locationCode&&D.$scope.userSelection.selectedCabin===s.DEFAULT_CABIN_CLASS&&D.$scope.userChoice===s.FLIGHT&&!this.$scope.cugName&&l.getUpsellData(D.searchPanelViewModel.origin.countryCode,D.searchPanelViewModel.origin.cityCode,D.searchPanelViewModel.origin.airportCode,D.searchPanelViewModel.origin.locationType,D.searchPanelViewModel.destination.cityOjId,D.$scope.journeyDates[0],D.$scope.journeyDates[1],D.searchPanelViewModel.destination.locationCode,D.searchPanelViewModel.destination.cityCode,D.searchPanelViewModel.destination.airportCode,D.searchPanelViewModel.destination.locationType).then(function(e){e.length>0?(h(e),O(e),E(e)):(D.$scope.journeyDateCopy=[],A(),c.setUpsellValuesToBlank(D.searchPanelViewModel),I(),D.$scope.upsellOffered.flightHotel=!1,D.$scope.upsellOffered.flightCar=!1)})},this.setUserChoice=function(e,o){if(o&&("click"===o||13===o.keyCode||32===o.keyCode)&&("click"!==o&&32===o.keyCode&&o.preventDefault(),D.$scope.errorMessage.destination="",D.$scope.errorMessage.flightNotAvailable="",D.$scope.dateModified=!1,D.$scope.errorMessage.invalidDOB=!1,a.errorMessage.isNonUs=!1,a.errorMessage.isUs=!1,c.setBahErrorMessage(D.$scope.userChoice,e,D.$scope.errorMessage),D.$scope.userChoice!==e)){switch(D.$scope.userChoice=e,D.$scope.$emit("userChoiceChange",D.$scope.userChoice),(D.$scope.userChoice===s.FLIGHT_AND_CAR||D.$scope.userChoice===s.CAR_ONLY_OPTION)&&this.checkLeadDriverAge(),c.hideUpsell(e,D),D.$scope.userChoice===s.FLIGHT&&e===s.CONCUR||D.$scope.userChoice===s.CONCUR&&e===s.FLIGHT||g(e)||R(D.$scope.userChoice),D.$scope.userChoice){case s.FLIGHT:case s.CONCUR:this.searchPanelViewModel.selectedPropositionType=s.FLIGHT_ONLY;break;case s.FLIGHT_AND_HOTEL:this.searchPanelViewModel.selectedPropositionType=s.HOTEL_PACKAGE,D.$scope.journeyDates.length<=1&&D.$scope.journeyDates.push(D.moment(D.$scope.journeyDates[0]).add(7,"days"));break;case s.HOTEL_ONLY_OPTION:this.searchPanelViewModel.selectedPropositionType=s.HOTEL_ONLY,D.$scope.journeyDates.length<=1&&D.$scope.journeyDates.push(D.moment(D.$scope.journeyDates[0]).add(7,"days"));break;case s.FLIGHT_AND_CAR:this.searchPanelViewModel.selectedPropositionType=s.CAR_PACKAGE;break;case s.CAR_ONLY_OPTION:this.searchPanelViewModel.selectedPropositionType=s.CAR_ONLY}g(e)?(D.$scope.isUpsellPresent.flightOnly||D.$scope.isUpsellPresent.flightHotel||D.$scope.isUpsellPresent.flightCar&&D.$scope.userChoice!==s.FLIGHT)&&(D.$scope.journeyDates=angular.copy(D.$scope.previousSearchData.journeyDateCopy),this.searchPanelViewModel.origin=angular.copy(D.$scope.previousSearchData.origin),this.searchPanelViewModel.destination=angular.copy(D.$scope.previousSearchData.destination)):c.clearInputFields(this.searchPanelViewModel),S({selectedPropositionType:this.searchPanelViewModel.selectedPropositionType})}},this.$scope.$watch("oldToAndFrom",function(e,a){e&&a&&e!==a&&Object.keys(e).length>1&&(e.originLocationCode!==D.$scope.previousSearchData.origin.locationCode||e.destinationLocationCode!==D.$scope.previousSearchData.destination.locationCode?(y(!0),D.$scope.previousSearchData={origin:{},destination:{}}):y(!1))},!0),this.$scope.$watch("journeyDates",function(e,a){C.updateJourneyDatesCookie(D.$scope.journeyDates),e!==a&&Object.keys(e).length>0&&(D.$scope.dateModified&&D.$scope.previousSearchData.journeyDateCopy&&(e[0]!==D.$scope.previousSearchData.journeyDateCopy[0]||e[1]!==D.$scope.previousSearchData.journeyDateCopy[1])?(y(!0),D.$scope.previousSearchData={origin:{},destination:{}}):y(!1)),e&&e.length<2&&(D.$scope.userChoice===s.FLIGHT_AND_HOTEL||D.$scope.userChoice===s.FLIGHT_AND_CAR||D.$scope.userChoice===s.HOTEL_ONLY_OPTION||D.$scope.userChoice===s.CAR_ONLY_OPTION)&&e.push(D.moment(e[0]).add(7,"days"))},!0),this.$scope.$watch("concur",function(e){e?D.setUserChoice(s.CONCUR,"click"):D.setUserChoice(s.FLIGHT,"click")}),this.$scope.$watch("userSelection.selectedCabin",function(){y(!0)}),b(),L()},ba.searchbar.SearchPanelController.prototype.getHotlineBookingInformation=function(){var e=this;!e.$scope.flightOnly&&e.$scope.isStaffCug&&e.HotlineHelperService.getHotlineBookingInformation().then(function(a){e.$scope.hotlineCountInformation.S1=a.availableCount,e.$scope.hotlineCountInformation.S2=a.maximumCount,e.$scope.isHotlineInformationRetrieved=!0})},ba.searchbar.SearchPanelController.prototype.updateOrigin=function(e){var a=this;this.searchbarHelperService.updateOrigin(e,this.searchPanelViewModel,a.$scope.errorMessage,a.$scope.userChoice,a.$scope.journeyDates,a.$scope.oldToAndFrom,a.$scope.userSelection),angular.element(a.$document[0].querySelectorAll("#from ~ .search-bar-dropdown > .resultsContainer"))[0].addEventListener("focusout",function(e){e.preventDefault(),a.$timeout(function(){angular.element(a.$document[0].querySelectorAll("#to"))[0].focus()},0)},!1),angular.element(a.$document[0].querySelectorAll("#from"))[0].addEventListener("keypress",function(e){13===e.which&&(e.preventDefault(),a.$timeout(function(){angular.element(a.$document[0].querySelectorAll("#to"))[0].focus()},0))},!1)},ba.searchbar.Lib.controller("SearchPanelController",["CommonServicesSearchbar","$scope","$timeout","SearchbarHandOverDataBuilder","$filter","SearchbarTrackingService","BACookieService","SearchbarHelperService","SearchbarUpsellService","SearchBarConstants","SearchbarValidationService","HotlineHelperService","SearchbarCookieHelperService","ErrorHandlingHelperService",ba.searchbar.SearchPanelController]),ba.lang.namespace("ba.searchbar"),ba.searchbar.CabinType=function(){return{scope:{cabinType:"=",selectedValue:"=",availableResults:"=",inputName:"@"},restrict:"A",templateUrl:"ba-searchbar/templates/cabin-type.html",link:function(){}}},ba.searchbar.Lib.directive("cabinType",ba.searchbar.CabinType),ba.lang.namespace("ba.searchbar"),ba.searchbar.DynamicName=function(){return{restrict:"A",priority:-1,require:["ngModel"],link:function(e,a,o,t){t[0].$name=o.name}}},ba.searchbar.Lib.directive("dynamicName",ba.searchbar.DynamicName),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchPanelDirective=function(e,a,o,t,i,r,n){return{restrict:"A",templateUrl:"ba-searchbar/templates/search-panel-base.html",scope:{concur:"=",isConcur:"=",updateOriginSuggestions:"&",popUpAdjustmentValues:"=",flightOnly:"<",disableCollapsedSearch:"<",disablePositionAdjustment:"<",resetTabIndex:"<",cugName:"<",availabilityError:"=",isChangeSearch:"=",hideCloseButton:"=",closeChangeSearch:"&",constants:"&"},controller:"SearchPanelController",controllerAs:"SP",link:function(c){var l,s=e.Moment,d=e.SearchBarConstants;c.isPaxMixPickerOpen,c.isTravelClassPickerOpen,c.showCustomTripModal,c.showLeadDriverModal,c.constants=e.SearchBarConstants,c.ticketType={availableTicketTypes:[{value:"LOWEST",resourceKey:"Searchbar-lowestPrice"},{value:"FLEXIBLE",resourceKey:"Searchbar-flexible"}]},c.dateObject={openDatePicker:!1},c.isSearchCollapsed=!0,c.disableCollapsedSearch===!0&&(c.isSearchCollapsed=!1),c.journeyDates=c.journeyDates||[],0===c.journeyDates.length&&c.journeyDates.push(s().startOf("day")),c.showBahOptions=!0,c.carOnly={showDropLocation:!1},c.dateModified=!1,c.isflightOnlyCug=!!c.cugName,c.flightAndHotel=c.isStaffCug?"HotelOnly":"FlightAndHotel",c.flightAndCar=c.isStaffCug?"CarOnly":"FlightAndCar",l=function(){c.dateObject.afterDate=s().startOf("day"),c.dateObject.beforeDate=s().startOf("day").add(d.DATEPICKER_SELECTABLE_DAYS_FROM_TODAY,"days")},c.openDatepicker=function(e,o){var t=!0,i=o&&(13===o.keyCode||32===o.keyCode);c.dateModified=!0,(!o||i)&&(o&&o.preventDefault(),a(function(){c.dateObject.openDatepicker=!0,c.dateObject.isReturn=e,c.dateObject.datepickerOptions={months:1,sameDaySelection:t,snaking:!0},l()},100))},c.closeCustomTrip=function(e){e?(13===e||32===e)&&(c.showCustomTripModal=!1):c.showCustomTripModal=!1},c.openCustomTrip=function(e){e?(13===e||32===e)&&(c.showCustomTripModal=!0):c.showCustomTripModal=!0},c.openLeadDriverLink=function(e){e?(13===e||32===e)&&(c.showLeadDriverModal=!0):c.showLeadDriverModal=!0},c.closeLeadDriverLink=function(e){e?(13===e||32===e)&&(c.showLeadDriverModal=!1):c.showLeadDriverModal=!1},c.navigateToCustomTrip=function(){var a=e.ClientLocaleService.getLanguage()+"_"+e.ClientLocaleService.getCountry();c.showCustomTripModal=!1,e.SearchbarTrackingService.trackEvent("customTripSelected",{}),i.location.assign("/travel/fx/public/"+a+"?saleOption=PAKFHC&flightOptionsCJ=multiCityOptions&eId=111096")},c.expandSearchBar=function(){c.isSearchCollapsed=!c.isSearchCollapsed,c.isSearchCollapsed?angular.element(t).find("body").removeClass("scrolling-fix-for-iphone"):angular.element(t).find("body").addClass("scrolling-fix-for-iphone")},c.clearReturnDate=function(e){e?(13===e||32===e)&&(c.journeyDates.pop(),c.dateModified=!0):(c.journeyDates.pop(),c.dateModified=!0)},c.closeDatepicker=function(e){e?(13===e||32===e)&&(c.dateObject.openDatepicker=!1):c.dateObject.openDatepicker=!1},c.getSelectorElement=function(e){var a,o=c.userChoice!==d.CONCUR?c.userChoice:d.FLIGHT;return e===d.DATE_SELECTOR?o.toLowerCase()+"-"+(c.dateObject.isReturn?d.INBOUND:d.OUTBOUND)+"-"+d.DATE_SELECTOR:e===d.TRAVEL_CLASS_SELECTOR?d.SEARCHBAR+"-"+o.toLowerCase()+"-"+d.TRAVEL_CLASS_SELECTOR:e===d.CUSTOM_TRIP_SELECTOR?d.SEARCHBAR+"-"+o.toLowerCase()+"-"+d.CUSTOM_TRIP_SELECTOR:e===d.LEAD_DRIVER_SELECTOR?(a=i.innerWidth,d.SEARCHBAR+"-"+o.toLowerCase()+"-"+d.LEAD_DRIVER_SELECTOR+"-"+o.toLowerCase()+"-"+(a>1024?"large":"small")):void 0},c.keyPress=function(e,a){13!==e.keyCode&&32!==e.keyCode||"function"!=typeof a||a()},c.roomSelectionKeyPress=function(e,a){13!==e.keyCode&&32!==e.keyCode||"function"!=typeof a||a()},c.togglePaxMixPicker=function(){c.childAgeError=!1,c.userChoice!==d.FLIGHT&&c.setChildAgeErrors(),c.childAgeError||(c.isPaxMixPickerOpen=!c.isPaxMixPickerOpen),c.isPaxMixPickerOpen||n.updatePassengerCookie(c.passengers.mix.group[0])},c.toggleTravelClassPicker=function(){c.isTravelClassPickerOpen=!c.isTravelClassPickerOpen,c.isTravelClassPickerOpen||(e.SearchPanelViewModel.selectedTicketType=c.userSelection.selectedTicketType,e.SearchPanelViewModel.selectedCabinName=r.getSelectedCabinName(c.cabinType.availableCabinTypes,c.userSelection.selectedCabin),n.updateJourneyDetailsCookie(e.SearchPanelViewModel))},c.setChildAgeErrors=function(){var e;c.childAgeError=!1,angular.forEach(c.passengers.mix.group,function(a){e=a[1].passengerAges,a[1].childAgeErrors=[],angular.forEach(e,function(e,o){e||(a[1].childAgeErrors[o]=e,c.childAgeError=!0)})})},c.toggleTravellerRoomMixPicker=function(){c.setChildAgeErrors(),c.childAgeError||(c.isRoomMixPickerOpen=!c.isRoomMixPickerOpen)},c.getResourcesForPassengerMix=function(e){return c.passengers.resources[e]},c.getPaxMixSelectionText=function(){var e="";return c.passengers.mix.group[0].forEach(function(a,t){t&&a.value&&(e+=", "),1===a.value&&(e+=a.value+" "+o("baResourceBundleDynamic")(a.displayKey)),a.value>1&&(e+=a.value+" "+o("baResourceBundleDynamic")(a.displayKeyPlural))}),e},c.getTravelClassSelectionText=function(){var e,a,t="";return e=c.cabinType&&c.cabinType.availableCabinTypes?c.cabinType.availableCabinTypes.filter(function(e){return e.value===c.userSelection.selectedCabin}):d.DEFAULT_CABIN_TYPE_OBJECT,a=c.ticketType&&c.ticketType.availableTicketTypes?c.ticketType.availableTicketTypes.filter(function(e){return e.value===c.userSelection.selectedTicketType}):d.DEFAULT_TICKET_TYPE_OBJECT,a.length||(a[0]=c.ticketType.availableTicketTypes[0]),e[0]&&(t+=o("baResourceBundleDynamic")(e[0].resourceKey)),a[0].value!==c.ticketType.availableTicketTypes[0].value&&(t+=", "+o("baResourceBundleDynamic")(a[0].resourceKey)),t},c.getRoomMixSelectionText=function(){var e,a="",t=c.passengers.mix.group.length,i=0,r=0,n=0;return e=1===t?t+" "+d.ROOM_TXT:t+" "+d.ROOMS_TXT,c.passengers.mix.group.forEach(function(e){e.forEach(function(e){"pax-adult"===e.displayKey?i+=e.value:"pax-child"===e.displayKey?r+=e.value:n+=e.value})}),1===i?a+=i+" "+o("baResourceBundleDynamic")("pax-adult"):i>1&&(a+=i+" "+o("baResourceBundleDynamic")("pax-adults")),1===r?a+=", "+r+" "+o("baResourceBundleDynamic")("pax-child"):r>1&&(a+=", "+r+" "+o("baResourceBundleDynamic")("pax-children")),1===n?a+=", "+n+" "+o("baResourceBundleDynamic")("pax-infant"):n>1&&(a+=", "+n+" "+o("baResourceBundleDynamic")("pax-infants")),a+", "+e},c.switchCheckBox=function(e,a){e.keyCode===d.KEY_CODES.enter&&document.getElementById(a).click()},c.escapePopUp=function(e,a){e.keyCode===d.KEY_CODES.escape&&(a===d.POP_UPS.passenger?c.togglePaxMixPicker():a===d.POP_UPS.travelClass?c.toggleTravelClassPicker():a===d.POP_UPS.room&&c.toggleTravellerRoomMixPicker())}}}},ba.searchbar.Lib.directive("searchPanel",["CommonServicesSearchbar","$timeout","$filter","$document","$window","SearchbarHelperService","SearchbarCookieHelperService",ba.searchbar.SearchPanelDirective]),ba.lang.namespace("ba.searchbar"),ba.searchbar.TicketType=function(e,a){return{scope:{selectedValue:"=",availableResults:"=",inputName:"@"},restrict:"A",templateUrl:"ba-searchbar/templates/ticket-type.html",link:function(o){var t=a.SearchBarConstants;o.isLoggedOn=e.isLoggedOn(),o.switchCheckBox=function(e,a){e.keyCode===t.KEY_CODES.enter&&document.getElementById(a).click()}}}},ba.searchbar.Lib.directive("ticketTypeDirective",["BAAuthenticationService","CommonServicesSearchbar",ba.searchbar.TicketType]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SBCabinTypeFactory=function(e,a,o,t,i){function r(e){var a="";return"M"===e?a=o.CABIN_ECONOMY:"W"===e?a=o.CABIN_PREMIUM_ECONOMY:"J"===e||"C"===e?a=o.CABIN_BUSINESS:"F"===e&&(a=o.CABIN_FIRST),a}function n(e){var a=e[0].value,o=t.getCabin();return o.length>0&&angular.forEach(e,function(e){e.value===o&&(a=e.value)}),a}function c(e){var a;for(a in e)if(e.hasOwnProperty(a))return!0}function l(e){return"Business/Club"===e?"Business":e}function s(o){var t=e.defer(),s={availableCabinTypes:[{name:"Economy",resourceKey:"Searchbar-economy",value:"M"},{name:"Premium Economy",resourceKey:"Searchbar-premiumEconomy",value:"W"},{name:"Business",resourceKey:"Searchbar-business",value:"J"},{name:"First",resourceKey:"Searchbar-first",value:"F"}],selectedCabin:"M"};return o.selectedPropositionType&&o.origin.locationCode&&o.destination.locationCode&&o.languageCode?a.getCabinList(o.selectedPropositionType,o.origin.locationCode,o.destination.locationCode,o.languageCode).then(function(e){e&&c(e)&&(s.availableCabinTypes=[],angular.forEach(e,function(e,a){this.push({name:l(e),resourceKey:r(a),value:a})},s.availableCabinTypes),s.selectedCabin=n(s.availableCabinTypes)),t.resolve(s)},function(e){i.error("Unable to get the cabin data, set default to Economy:- "+e),t.reject(s)}):t.resolve(s),t.promise}return{build:s}},ba.searchbar.Lib.factory("SBCabinTypeFactory",["$q","CabinClassService","SearchBarConstants","SellingCookieService","BALog",ba.searchbar.SBCabinTypeFactory]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SBPaxValidationResourceFactory=function(e,a,o){var t=function(){return[{errorKey:a.ERROR_KEY_MAX_TOTAL_PASSENGER_EXCLUDE_INFANT,resourceKey:"pax-totalNumberOfPassengersCantExceed",supplants:{S1:"9",S2:'<a target="_blank" href="/information/group-travel">',S3:"</a>"}},{errorKey:a.ERROR_KEY_MAX_TOTAL_PASSENGER,resourceKey:"pax-totalNumberOfPassengersCantExceedFC",supplants:{S1:"7",S2:'<a target="_blank" href="/information/group-travel">',S3:"</a>"}},{errorKey:a.ERROR_KEY_MAX_ADULT,resourceKey:"pax-totalNumberOfAdultsCantExceed"},{errorKey:a.ERROR_KEY_MIN_ADULT,resourceKey:"pax-totalNumberOfAdultCantLess"},{errorKey:a.ERROR_KEY_MAX_CHILD,resourceKey:"pax-totalNumberOfChildsCantExceed"},{errorKey:a.ERROR_KEY_MAX_YOUNG,resourceKey:"pax-totalNumberOfYoungCantExceed"},{errorKey:a.ERROR_KEY_MAX_INFANTS,resourceKey:"pax-totalInfantsNotExceed",supplants:{S1:"8"}},{errorKey:a.ERROR_KEY_INFANT_EQUAL_OR_LESS_THAN_ADULTS_PER_ROOM,resourceKey:"pax-numberOfInfantsTravellingExceedAdults"},{errorKey:a.ERROR_KEY_MAX_ROOMS,resourceKey:"pax-maxRoom"},{errorKey:a.ERROR_KEY_ADULT_MIN_PER_ROOM,resourceKey:"pax-totalNumberOfAdultCantLess-hotels"}]};return this.getResources=function(i){var r={},n=new t;return angular.forEach(n,function(e){r[e.errorKey]={resourceKey:e.resourceKey,supplants:e.supplants}}),i===e.HOTEL_PACKAGE||i===e.HOTEL_ONLY?r[a.ERROR_KEY_MIN_ADULT].resourceKey="pax-totalNumberOfAdultCantLess-hotels":i===e.FLIGHT_ONLY&&(r[a.ERROR_KEY_MIN_ADULT].resourceKey="pax-totalNumberOfAdultCantLessInFlightsOnly",r[a.ERROR_KEY_MIN_ADULT].supplants={},r[a.ERROR_KEY_MIN_ADULT].supplants.S1='<a target="_blank" href="'+o.formLiveSiteURL(e.CONTACT_LIVESITE_PAGEID_EN,void 0,e.CONTACT_LIVESITE_URL)+'">',r[a.ERROR_KEY_MIN_ADULT].supplants.S2="</a>"),r},this},ba.searchbar.Lib.factory("SBPaxValidationResourceFactory",["SearchBarConstants","PaxValidationConstants","URLFormulationService",ba.searchbar.SBPaxValidationResourceFactory]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SBPassengersFactory=function(e,a,o,t,i,r){var n=this;return this.FlightOnlyPassengers=function(){return{group:[[{displayKey:a.ADULT_DISPLAY_KEY,displayKeyPlural:a.ADULTS_DISPLAY_KEY,value:1,title:o.PAXMIX_KEY_ADULT,ageRange:a.FO_AGE_RANGE.ADULT},{displayKey:a.YOUNG_ADULT_DISPLAY_KEY,displayKeyPlural:a.YOUNG_ADULTS_DISPLAY_KEY,value:0,title:o.PAXMIX_KEY_YOUNG_ADULT,ageRange:a.FO_AGE_RANGE.YOUNG_ADULT},{displayKey:a.CHILD_DISPLAY_KEY,displayKeyPlural:a.CHILDREN_DISPLAY_KEY,value:0,title:o.PAXMIX_KEY_CHILD,ageRange:a.FO_AGE_RANGE.CHILD},{displayKey:a.INFANT_DISPLAY_KEY,displayKeyPlural:a.INFANTS_DISPLAY_KEY,value:0,title:o.PAXMIX_KEY_INFANT,ageRange:a.FO_AGE_RANGE.INFANT}]]}},this.DynamicPackagingPassengers=function(){return{group:[[{displayKey:a.ADULT_DISPLAY_KEY,displayKeyPlural:a.ADULTS_DISPLAY_KEY,value:2,title:o.PAXMIX_KEY_ADULT,ageRange:a.DP_AGE_RANGE.ADULT},{displayKey:a.CHILD_DISPLAY_KEY,displayKeyPlural:a.CHILDREN_DISPLAY_KEY,value:0,title:o.PAXMIX_KEY_CHILD,ages:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],passengerAges:[],ageRange:a.DP_AGE_RANGE.CHILD},{displayKey:a.INFANT_DISPLAY_KEY,displayKeyPlural:a.INFANTS_DISPLAY_KEY,value:0,title:o.PAXMIX_KEY_INFANT,ageRange:a.DP_AGE_RANGE.INFANT}]]}},this.build=function(a){var o=r.defer(),c={};return c.resources=i.getResources(a.selectedPropositionType),a.selectedPropositionType===e.FLIGHT_ONLY?c.mix=new n.FlightOnlyPassengers:c.mix=new n.DynamicPackagingPassengers,t.getPropositionRulesObject(e.VALIDATION[a.selectedPropositionType]).then(function(e){c.rules=e,o.resolve(c)}),o.promise},this},ba.searchbar.Lib.factory("SBPassengersFactory",["SearchBarConstants","PaxConstants","PaxValidationConstants","BusinessValidationRuleService","SBPaxValidationResourceFactory","$q",ba.searchbar.SBPassengersFactory]),ba.lang.namespace("ba.searchbar"),ba.searchbar.ViewModelFactory=function(e,a,o){function t(){return a.build()}function i(e){return o.build(e)}function r(a){return e.build(a)}return{buildPassengers:r,buildCabinType:i,buildTicketType:t}},ba.searchbar.Lib.factory("SearchBarViewModelFactory",["SBPassengersFactory","SBTicketTypesFactory","SBCabinTypeFactory",ba.searchbar.ViewModelFactory]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SBTicketTypesFactory=function(e,a,o,t){var i=this;return this.getSelectedTicketType=function(e){var o=e[0].value,t=a.getTicketType();return angular.isDefined(t)&&t.length>0&&angular.forEach(e,function(e){e.value===t&&(o=t)}),o},this.setSelectedTicketType=function(e){a.setTicketType(e)},this.getAvailableTicketTypes=function(a,o){return e.getAvailableTicketTypes(a,o).then(function(e){return{availableTicketTypes:e,selected:i.getSelectedTicketType(e)}})},this.build=function(){return o.isLoggedOn()?t.isExecutiveClubMember().then(function(e){return i.getAvailableTicketTypes(o.isLoggedOn(),e).then(function(e){return e})}):i.getAvailableTicketTypes(!1,!1).then(function(e){return e})},this},ba.searchbar.Lib.factory("SBTicketTypesFactory",["SBTicketTypesProxy","SellingCookieService","BAAuthenticationService","CustomerDataProxy",ba.searchbar.SBTicketTypesFactory]),ba.lang.namespace("ba.searchbar"),ba.searchbar.BahProductEligibilityProxy=function(e,a,o,t){this.$http=e,this.$q=t,this.Environment=o,this.constant=a,this.getBahProductEligibility=function(e){var a;return a=this.Environment.get("BA_REST_URL_PREFIX","/api/sc4")+this.constant.PRODUCT_BAH_LOCATIONS_ENDPOINT+"/"+e,this.$http({method:"GET",url:a,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]})}},ba.searchbar.Lib.service("BahProductEligibilityProxy",["$http","SearchBarConstants","Environment","$q",ba.searchbar.BahProductEligibilityProxy]),ba.lang.namespace("ba.searchbar"),ba.searchbar.CustomerDataProxy=function(e,a,o,t){var i=this;i.$http=a,i.BALog=o,i.isExecutiveMember=!1,this.isExecutiveClubMember=function(){var a;return i.$http({method:"GET",url:t.get(e.BA_REST_URL_PREFIX,"/api/sc4")+e.BADOTCOMADAPTER_BDCA_SERVICE_URL,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]}).then(function(o){return a=o.data.customer.customerType,i.isExecutiveMember=a===e.EXECUTIVE_CLUB_MEMBER,i.isExecutiveMember})["catch"](function(a){return i.BALog.error(e.LOG_CUSTOMER_DATA_ERROR_FROM_SERVICE+" : "+a.status),i.isExecutiveMember})}},ba.searchbar.Lib.service("CustomerDataProxy",["SearchBarConstants","$http","BALog","Environment",ba.searchbar.CustomerDataProxy]),ba.lang.namespace("ba.searchbar"),ba.searchbar.HotlineCountProxy=function(e,a,o){this.$http=a,this.HOTLINE_COUNT_SERVICE_URL=o.get("BA_REST_URL_PREFIX","/api/sc4")+e.HOTLINE_COUNT_ENDPOINT},ba.searchbar.HotlineCountProxy.prototype.getHotlineBookingCount=function(){return this.$http({method:"GET",url:this.HOTLINE_COUNT_SERVICE_URL,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]})},ba.searchbar.Lib.service("HotlineCountProxy",["SearchBarConstants","$http","Environment",ba.searchbar.HotlineCountProxy]),ba.lang.namespace("ba.searchbar"),ba.searchbar.ProductEligibilityProxy=function(e,a,o,t,i){this.$http=e,this.bahEligibilityEndpoint=t.get("BA_REST_URL_PREFIX","/api/sc4")+i.BAH_PRODUCTS_ELIGIBILITY_ENDPOINT,this.bALog=a,this.$q=o,this.constants=i},ba.searchbar.ProductEligibilityProxy.prototype.getProductsEligibilityProxy=function(e,a){var o=this,t=this.bahEligibilityEndpoint+";journeyType="+e+";departureAirportCode="+a;return o.$http({method:"GET",url:t,errorOverride:[{serverErrorCode:"*",displayType:"disabled"}]})},ba.searchbar.Lib.service("ProductEligibilityProxy",["$http","BALog","$q","Environment","SearchBarConstants",ba.searchbar.ProductEligibilityProxy]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SBTicketTypesProxy=function(e,a){this.getAvailableTicketTypes=function(o,t){var i;return i=o&&t?e.TICKET_TYPES.EXECUTIVE:e.TICKET_TYPES.VANILLA,a.when(i)}},ba.searchbar.Lib.service("SBTicketTypesProxy",["SearchBarConstants","$q",ba.searchbar.SBTicketTypesProxy]),ba.lang.namespace("ba.searchbar"),ba.searchbar.CommonServicesSearchbar=function(e,a,o,t,i,r,n,c,l,s,d,u){"use strict";this.ResourceBundle=e,this.analytics=a,this.$document=o,this.BALog=t,this.SearchBarConstants=i,this.Moment=r,this.$rootScope=n,this.ClientLocaleService=s,this.SearchPanelViewModel=c,this.SearchBarViewModelFactory=l,this.SearchbarHandOverService=d,this.SearchbarTrackingService=u},ba.searchbar.Lib.service("CommonServicesSearchbar",["ResourceBundle","analytics","$document","BALog","SearchBarConstants","Moment","$rootScope","SearchPanelViewModel","SearchBarViewModelFactory","ClientLocaleService","SearchbarHandOverService","SearchbarTrackingService",ba.searchbar.CommonServicesSearchbar]),
ba.lang.namespace("ba.searchbar"),ba.searchbar.CurrencyDetailsServiceSearchbar=function(e){this.getCurrency=function(a){return e.getCurrencyDetails(a,[{serverErrorCode:"*",displayType:"disabled"}]).then(function(e){return e})}},ba.searchbar.Lib.service("CurrencyDetailsServiceSearchbar",["CurrencyService",ba.searchbar.CurrencyDetailsServiceSearchbar]),ba.lang.namespace("ba.searchbar"),ba.searchbar.ErrorHandlingHelperService=function(){},ba.searchbar.ErrorHandlingHelperService.prototype.isUnexpectedError=function(e){return-1!==e.indexOf("FRAM")},ba.searchbar.ErrorHandlingHelperService.prototype.setupAvailabilityErrors=function(e,a){"UNEXPECTED_PAA_ERROR"===e||e&&0!==e.length&&e[0].code&&this.isUnexpectedError(e[0].code)?a.unexpectedError=!0:a.availabilityError=!0},ba.searchbar.Lib.service("ErrorHandlingHelperService",[ba.searchbar.ErrorHandlingHelperService]),ba.lang.namespace("ba.searchbar"),ba.searchbar.HotlineHelperService=function(e,a,o){this.HotlineCountProxy=e,this.BALog=a,this.SearchBarConstants=o},ba.searchbar.HotlineHelperService.prototype.getHotlineBookingInformation=function(){var e=this;return this.HotlineCountProxy.getHotlineBookingCount().then(function(e){return{availableCount:e.data.hotlineCount.bookingAllowance-e.data.hotlineCount.usedBookings,maximumCount:e.data.hotlineCount.bookingAllowance}})["catch"](function(a){e.BALog.error(e.SearchBarConstants.LOG_HOTLINE_COUNT_SERVICE_ERROR+" : "+angular.toJson(a))})},ba.searchbar.Lib.service("HotlineHelperService",["HotlineCountProxy","BALog","SearchBarConstants",ba.searchbar.HotlineHelperService]),ba.lang.namespace("ba.searchbar"),ba.searchbar.ProductEligibilityService=function(e,a){function o(){var e={};return e[a.HOTEL_PACKAGE]=!1,e[a.CAR_PACKAGE]=!1,e}var t=this;this.getPackageEligibility=function(o,i,r,n,c){var l=o?a.JOURNEY_TYPE_OW:a.JOURNEY_TYPE_RT;return e.getProductsEligibilityProxy(l,i).then(function(e){return t.modifyEligibilityResponse(e.data.productEligibilities,r,n,c)})["catch"](function(){return t.modifyEligibilityResponse(void 0,r,n,c)})},this.modifyEligibilityResponse=function(e,t,i,r){var n=o();return"undefined"==typeof r||0===r.length?(n[a.HOTEL_PACKAGE]=!1,n[a.CAR_PACKAGE]=!1,n):(t===i?(n[a.HOTEL_PACKAGE]=!1,n[a.CAR_PACKAGE]=!1):e&&(n[a.HOTEL_PACKAGE]=e[a.BAH_FLIGHT_AND_HOTEL],n[a.CAR_PACKAGE]=e[a.BAH_FLIGHT_AND_CAR]),n)}},ba.searchbar.Lib.service("ProductEligibilityService",["ProductEligibilityProxy","SearchBarConstants",ba.searchbar.ProductEligibilityService]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchbarCookieHelperService=function(e,a,o,t){this.SellingCookieService=e,this.constants=a,this.BACookieService=o,this.Moment=t},ba.searchbar.SearchbarCookieHelperService.prototype.validateCookies=function(e){e.origin.locationCode||(e.origin.locationValue="",this.SellingCookieService.setDepartAirportCode("")),e.destination.locationCode||(e.destination.locationValue="",this.SellingCookieService.setDisplayValue("")),e.dates.length>0&&e.dates[0].diff(this.Moment(),this.constants.DAYS)<0&&(e.dates=[],this.SellingCookieService.setFromDate(""),this.SellingCookieService.setToDate(""),this.SellingCookieService.setDepDate(""),this.SellingCookieService.setRetDate(""))},ba.searchbar.SearchbarCookieHelperService.prototype.updatePassengerCookie=function(e){var a=function(e){var a="";return e.forEach(function(e){a+=e.title+"-"+e.value+";"}),a};this.BACookieService.setCookie(this.constants.PASSENGER_MIX_COOKIE_NAME,a(e),this.constants.COOKIE_PATH,!0,this.constants.COOKIE_EXPIRATION_DURATION,this.constants.COOKIE_EXPIRATION_UNIT)},ba.searchbar.SearchbarCookieHelperService.prototype.updatePassengerMixFromCookie=function(e){var a=this.BACookieService.getCookieValue(this.constants.PASSENGER_MIX_COOKIE_NAME);a&&(a=a.split(";"),a.pop(),a=a.map(function(e){return{title:e.split("-")[0],value:e.split("-")[1]}}),e.forEach(function(e,o){e.value=e.title===a[o].title?parseInt(a[o].value,10):0}))},ba.searchbar.SearchbarCookieHelperService.prototype.updateJourneyDatesCookie=function(e){var a=this,o=function(e){return e?e.format(a.constants.COOKIE_DATE_FORMAT):""};this.SellingCookieService.setFromDate(o(e[0])),this.SellingCookieService.setToDate(o(e[1])),this.SellingCookieService.setDepDate(o(e[0])),this.SellingCookieService.setRetDate(o(e[1]))},ba.searchbar.SearchbarCookieHelperService.prototype.updateJourneyDetailsCookie=function(e){var a=this,o=function(e){return e.dates[1]?a.constants.JOURNEY_TYPE_RETURN:a.constants.JOURNEY_TYPE_ONE_WAY},t=function(e,o){return e.dates[o]?e.dates[o].format(a.constants.COOKIE_DATE_FORMAT):""};this.SellingCookieService.setJourneyType(o(e)),this.SellingCookieService.setDisplayValue(e.destination.locationValue),this.SellingCookieService.setDestinationCode(e.destination.locationCode),this.SellingCookieService.setFromDate(t(e,0)),this.SellingCookieService.setToDate(t(e,1)),this.SellingCookieService.setDepDate(t(e,0)),this.SellingCookieService.setRetDate(t(e,1)),this.SellingCookieService.setTicketType(e.selectedTicketType),this.SellingCookieService.setCabin(e.selectedCabinName)},ba.searchbar.SearchbarCookieHelperService.prototype.populateJourneyDetailsFromCookie=function(e){var a=this.BACookieService.getCookieValue("FO_ORIGIN_COOKIE");e.journeyType=this.SellingCookieService.getJourneyType()||"",e.destination.locationValue=this.SellingCookieService.getDisplayValue()||"",e.destination.locationCode=this.SellingCookieService.getDestinationCode()||"",e.selectedCabinName=this.SellingCookieService.getCabin()||"",e.selectedTicketType=this.SellingCookieService.getTicketType()||"",a&&""!==a&&(e.origin.locationValue=a.split("|")[0]||"",e.origin.locationCode=a.split("|")[1]||""),this.SellingCookieService.getDepDate()&&(this.Moment(this.SellingCookieService.getDepDate(),"DD-MM-YYYY")<this.Moment().startOf("day")&&(this.SellingCookieService.setDepDate(this.Moment().format(this.constants.COOKIE_DATE_FORMAT)),this.SellingCookieService.setRetDate("")),e.dates[0]=this.Moment(this.SellingCookieService.getDepDate(),this.constants.COOKIE_DATE_FORMAT)),this.SellingCookieService.getRetDate()&&(e.dates[1]=this.Moment(this.SellingCookieService.getRetDate(),this.constants.COOKIE_DATE_FORMAT))},ba.searchbar.Lib.service("SearchbarCookieHelperService",["SellingCookieService","SearchBarConstants","BACookieService","Moment",ba.searchbar.SearchbarCookieHelperService]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchbarHandOverDataBuilder=function(e,a,o,t,i,r){var n,c,l,s,d,u,C,_,T;this.location=a,this.createHandOverData=function(i,u){var C,_=o.get("RETURN_TO_BA_HOME"),T=t.getLanguage()+"_"+t.getCountry(),p=o.get("RETURN_TO_BOOKING_MANAGEMENT")+T+e.BOOKING_MNG,h=r.getNumericalIDCugCookie()===e.ON_BUSINESS_CUG_ID,O={url:"",parameters:[]},E={planTripParams:{genericParams:{resCountry:t.getCountry().toUpperCase(),deptCountry:"",pos:"",language:i.languageCode,audience:"",urlMembershipType:"",sourceDomain:a.host(),saleOption:"",isComplex:!1,protocol:a.protocol(),handBackURLs:[{scenario:e.START_AGAIN,URL:p,secureURL:p},{scenario:e.ERROR,URL:p,secureURL:p},{scenario:e.BACK,URL:_,secureURL:_},{scenario:e.SHOPPING_BASKET_EMPTY,URL:p,secureURL:p},{scenario:e.SHOPPING_BASKET_FLIGHT_ONLY,URL:p,secureURL:p},{scenario:e.SHOPPING_SWITCH_SELL,URL:p,secureURL:p},{scenario:e.SHOPPING_BASKET_BOOKING,URL:p,secureURL:p},{scenario:e.COMPLEX_JOURNEY,URL:p,secureURL:p}],handBackVersion:e.HAND_BACK_VERSION},destination:"",destinationInfo:"",origin:"",depDate:"",arrDate:"",childAges:[],cabinCode:"",adultCount:"",childCount:"",infantCount:""}};switch(i.selectedPropositionType){case e.FLIGHT_ONLY:n(i,u,O);break;case e.HOTEL_PACKAGE:c(i,u,E);break;case e.CAR_PACKAGE:l(i,u,E);break;case e.HOTEL_ONLY:s(i,u,E);break;case e.CAR_ONLY:d(i,u,E)}return i.selectedPropositionType===e.FLIGHT_ONLY?C=O:(h&&(E.planTripParams.genericParams.membershipType=e.ON_BUSINESS),C=E),C},T=function(){return"ox231"===r.getNumericalIDCugCookie()?e.HOTLINE_HANDOFF_CONSUMER:e.HAND_OFF_CONSUMER},n=function(a,o,t){var i=e.HANDOVER_PARAM;t.parameters[i.FROM]=a.origin.locationCode,t.parameters[i.TO]=a.destination.locationCode,t.parameters[i.DEP_DATE]=a.dates[0],t.parameters[i.RET_DATE]=a.dates[1],t.parameters[i.DEP_DATE]=a.dates[0].format(e.DATE_FORMAT_YYYYMMDD),a.dates[1]&&(t.parameters[i.RET_DATE]=a.dates[1].format(e.DATE_FORMAT_YYYYMMDD)),t.parameters[i.CABIN]=o.selectedCabin,t.parameters[i.RESTRICTION_TYPE]=o.selectedTicketType,t.parameters[i.SOURCE]=e.HANDOVER_PARAM_VALUE.SOURCE_FO,_(a,o,t)},c=function(a,o,t){var i,r,n=0,c=o.passengers.mix.group;if(1===c.length)for(i=0;i<c[0].length;i+=1)n+=c[0][i].value;r=1===c.length&&2===c[0][0].value&&2===n&&o.selectedCabin===e.DEFAULT_CABIN_CLASS&&o.ticketType.selected===e.DEFAULT_TICKET_TYPE,t.planTripParams.destination=a.destination.locationCode,t.planTripParams.destinationInfo=a.destination.cityOjId,t.planTripParams.depDate=u(a.dates[0]),t.planTripParams.arrDate=u(a.dates[1]),t.planTripParams.origin=a.origin.locationCode,t.planTripParams.ticketType=o.selectedTicketType===e.FLEXIBLE_TICKET_TYPE?e.FLEXIBLE_TICKET_TYPE:e.DEFAULT_TICKET_TYPE,t.planTripParams.cabinCode=o.selectedCabin,t.planTripParams.genericParams.saleOption=e.HOTEL_PACKAGE,t.planTripParams.genericParams.isOneWayFlight=!u(a.dates[1]),t.planTripParams.genericParams.audience=e.HAND_OFF_TRAVEL,t.planTripParams.genericParams.deptCountry=a.origin.countryCode,t.planTripParams.genericParams.pos=a.origin.locationCode,t.planTripParams.genericParams.deepLinkInfo={},t.planTripParams.genericParams.deepLinkInfo.customerType=T(),a.flightHotelId&&r&&(t.planTripParams.genericParams.deepLinkInfo.productCode=a.flightHotelId),a.flightHotelCost&&r&&(t.planTripParams.genericParams.deepLinkInfo.productPrice=a.flightHotelCost),t.planTripParams.genericParams.integrationPoint=e.HAND_OFF_PLAN_TRIP,t.planTripParams.hotel={roomsReq:o.passengers.mix.group.length,hotelRoom:C(o)},_(a,o,t)},l=function(a,o,t){var i,r,n,c,l,s,d;for(d=o.passengers.mix.group.length,s=o.passengers.mix.group,t.planTripParams.destination=a.destination.locationCode,t.planTripParams.destinationInfo=a.destination.airportOjId,t.planTripParams.depDate=u(a.dates[0]),t.planTripParams.arrDate=u(a.dates[1]),t.planTripParams.origin=a.origin.locationCode,t.planTripParams.ticketType=o.selectedTicketType===e.FLEXIBLE_TICKET_TYPE?e.FLEXIBLE_TICKET_TYPE:e.DEFAULT_TICKET_TYPE,t.planTripParams.cabinCode=o.selectedCabin,i=0;d>i;i+=1)for(r=s[i].length,n=0;r>n;n+=1)for(l=s[i][n].passengerAges?s[i][n].passengerAges.length:0,c=0;l>c;c+=1)t.planTripParams.childAges.push(s[i][n].passengerAges[c]);t.planTripParams.genericParams.saleOption=e.CAR_PACKAGE,t.planTripParams.genericParams.isOneWayFlight=!u(a.dates[1]),t.planTripParams.genericParams.audience=e.HAND_OFF_TRAVEL,t.planTripParams.genericParams.deptCountry=a.origin.countryCode,t.planTripParams.genericParams.pos=a.origin.locationCode,t.planTripParams.genericParams.deepLinkInfo={customerType:T()},t.planTripParams.genericParams.integrationPoint=e.HAND_OFF_HOME,t.planTripParams.car={driverAgeConfirmed:!0},a.leadDriverDateOfBirth.checkboxSelection||(t.planTripParams.car.driverDateOfBirth=a.leadDriverDateOfBirth.driverAge.dateOfBirth),_(a,o,t)},s=function(a,o,i){i.planTripParams.destination=a.destination.locationCode,i.planTripParams.destinationInfo=a.destination.cityOjId,i.planTripParams.depDate=u(a.dates[0]),i.planTripParams.arrDate=u(a.dates[1]),i.planTripParams.hotel={roomsReq:o.passengers.mix.group.length,hotelRoom:C(o)},i.planTripParams.genericParams.saleOption=e.HOTEL_ONLY,i.planTripParams.genericParams.audience=e.HAND_OFF_TRAVEL,i.planTripParams.genericParams.deptCountry=t.getCountry().toUpperCase(),i.planTripParams.genericParams.pos="LON",i.planTripParams.genericParams.deepLinkInfo={customerType:T()},i.planTripParams.genericParams.integrationPoint=e.HAND_OFF_HOME,_(a,o,i)},d=function(a,o,i){i.planTripParams.destination=a.destination.locationCode,i.planTripParams.destinationInfo=a.destination.cityOjId,i.planTripParams.adultCount="1",i.planTripParams.childCount="0",i.planTripParams.infantCount="0",i.planTripParams.depDate=u(a.dates[0]),i.planTripParams.arrDate=u(a.dates[1]),a.carInfo&&(a.carInfo.showDropLocation?i.planTripParams.car={PickupTime:""+a.carInfo.pickUp.hours+a.carInfo.pickUp.minutes,DropoffTime:""+a.carInfo.dropOff.hours+a.carInfo.dropOff.minutes,pickup:{destinationInfo:a.origin.cityOjId,destination:a.origin.locationCode},dropoff:{destinationInfo:a.destination.cityOjId,destination:a.destination.locationCode}}:(i.planTripParams.car={PickupTime:""+a.carInfo.pickUp.hours+a.carInfo.pickUp.minutes,DropoffTime:""+a.carInfo.dropOff.hours+a.carInfo.dropOff.minutes},i.planTripParams.destination=a.origin.locationCode,i.planTripParams.destinationInfo=a.origin.cityOjId),i.planTripParams.car.driverAgeConfirmed=!0,a.leadDriverDateOfBirth.checkboxSelection||(i.planTripParams.car.driverDateOfBirth=a.leadDriverDateOfBirth.driverAge.dateOfBirth)),i.planTripParams.genericParams.saleOption=e.CAR_ONLY,i.planTripParams.genericParams.audience=e.HAND_OFF_TRAVEL,i.planTripParams.genericParams.deptCountry=t.getCountry().toUpperCase(),i.planTripParams.genericParams.pos="LON",i.planTripParams.genericParams.deepLinkInfo={customerType:T()},i.planTripParams.genericParams.integrationPoint=e.HAND_OFF_HOME},u=function(a){return a?a.format(e.DATE_FORMAT_YYYYMMDD):""},C=function(a){var o,t,i,r,n,c,l=[],s=[],d=a.passengers.mix.group.length,u=a.passengers.mix.group;for(o=0;d>o;o+=1){for(t=u[o].length,c=[],i=0;t>i;i+=1)for(n=u[o][i].passengerAges?u[o][i].passengerAges.length:0,r=0;n>r;r+=1)c.push(u[o][i].passengerAges[r]);l[o]=c,s.push({adultCount:u[o][e.ADULTS_INDEX].value,childCount:u[o][e.CHILDREN_INDEX].value,infantCount:u[o][e.INFANTS_INDEX].value,childAges:l[o]})}return s},_=function(a,o,t){var r,n,c=0,l=0,s=0,d=0,u=o.passengers.mix.group.length,C=o.passengers.mix.group,_=e.HANDOVER_PARAM;for(r=0;u>r;r+=1)for(n in C[r])C[r].hasOwnProperty(n)&&(C[r][n].title===i.PAXMIX_KEY_ADULT?c+=C[r][n].value:C[r][n].title===i.PAXMIX_KEY_YOUNG_ADULT?l+=C[r][n].value:C[r][n].title===i.PAXMIX_KEY_CHILD?s+=C[r][n].value:C[r][n].title===i.PAXMIX_KEY_INFANT&&(d+=C[r][n].value));t.hasOwnProperty("planTripParams")?(t.planTripParams.infantCount=d,t.planTripParams.childCount=s,t.planTripParams.adultCount=c):(t.parameters[a.selectedPropositionType===e.FLIGHT_ONLY?_.FO_TOTAL_ADULT:_.FC_TOTAL_ADULT]=c,a.selectedPropositionType===e.FLIGHT_ONLY&&(t.parameters[_.FO_TOTAL_YOUNG_ADULT]=l),t.parameters[a.selectedPropositionType===e.FLIGHT_ONLY?_.FO_TOTAL_CHILDREN:_.FC_TOTAL_CHILDREN]=s,t.parameters[a.selectedPropositionType===e.FLIGHT_ONLY?_.FO_TOTAL_INFANTS:_.FC_TOTAL_INFANTS]=d)}},ba.searchbar.Lib.service("SearchbarHandOverDataBuilder",["SearchBarConstants","$location","Environment","ClientLocaleService","PaxValidationConstants","BACookieService",ba.searchbar.SearchbarHandOverDataBuilder]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchbarHandOverService=function(e,a,o,t,i,r,n,c,l,s,d,u,C){this.Environment=r,this.$rootScope=c,this.clientLocaleService=l,this.window=s,this.BACookieService=d,this.customerDataProxy=C,this.handOver=function(a,o){a===e.FLIGHT_ONLY?this.redirectForFlightOnly(o.parameters):(a===e.HOTEL_PACKAGE||a===e.CAR_PACKAGE||a===e.HOTEL_ONLY||a===e.CAR_ONLY)&&this.redirectForHotelAndCar(o)},this.handoverToSelling=function(e,a){var o,t,i,r=this;t=l.getLanguage()+"_"+l.getCountry()+"/flightList?",i=a.from+"-"+a.to+"_"+a.depDate,a.retDate&&(i=i+","+a.to+"-"+a.from+"_"+a.retDate),o=e.replace("/booking/","/book/")+t+"onds="+i+"&ad="+a.ad+"&yad="+a.ya+"&ch="+a.ch+"&inf="+a.inf+"&cabin="+a.cabin+"&flex="+a.restrictionType,r.window.location.href=o},this.redirectForFlightOnly=function(a){var o,t=this;u.isLoggedOn()?this.customerDataProxy.isExecutiveClubMember().then(function(i){o=i?r.get("BA_FLIGHT_LIST_HANDOVER_EXEC",e.BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_BASE_URL):-1!==t.window.location.href.indexOf("onbusiness")?e.BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_ONBUS_BASE_URL:r.get("BA_FLIGHT_LIST_HANDOVER_INET",e.BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_INET_BASE_URL),t.handoverToSelling(o,a)},function(){o=-1!==t.window.location.href.indexOf("onbusiness")?e.BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_ONBUS_BASE_URL:r.get("BA_FLIGHT_LIST_HANDOVER_EXEC",e.BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_BASE_URL),t.handoverToSelling(o,a)}):(o=-1!==t.window.location.href.indexOf("onbusiness")?e.BA_FLIGHT_LIST_HANDOVER_LOGGED_IN_ONBUS_BASE_URL:r.get("BA_FLIGHT_LIST_HANDOVER_PUBLIC",e.BA_FLIGHT_LIST_HANDOVER_PUBLIC_BASE_URL),this.handoverToSelling(o,a))},this.redirectForHotelAndCar=function(t){var l=r.get("BAH_HANDOVER_URL"),s=n.trustAsResourceUrl(l);c.$broadcast("initiateBAHLoading"),o({method:"POST",url:r.get(e.BA_REST_URL_PREFIX,"/api/sc4")+e.BA_HANDOFF,data:t}).then(function(e){c.$broadcast("form.submit",{action:s,params:{ENCRYPT_STRING:e.data.encryptedString}})})["catch"](function(o){i.error(e.LOG_HANDOVER_POST_ERROR_FROM_SERVICE+" : "+o.status),c.$broadcast("form.submit",{action:s,params:{ENCRYPT_STRING:a.FALLBACK_ENCRYPTED_STRING}})})}},ba.searchbar.Lib.service("SearchbarHandOverService",["SearchBarConstants","LocationFallbackConstants","$http","$document","BALog","Environment","$sce","$rootScope","ClientLocaleService","$window","BACookieService","BAAuthenticationService","CustomerDataProxy",ba.searchbar.SearchbarHandOverService]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchbarHelperService=function(e,a,o,t,i,r,n,c,l,s,d,u){var C,_,T,p,h=this;h.fallbackOn=!1,C=function(e,a){return a.filter(function(a){return a.value===e}).length>0},_=function(a,o,t){a.origin.locationCode===a.destination.locationCode&&o!==e.CAR_ONLY_OPTION&&o!==e.HOTEL_ONLY_OPTION&&(t.flightNotAvailable=e.FLIGHTS_NOT_AVAILABLE_KEY)},T=function(e){return n.getBahProductEligibility(e)},p=function(a){var o;angular.forEach(a,function(a){a.countryCode===e.US_COUNTRY_CODE&&a.stateName&&(o=a.locationValue.split(","),a.stateName.trim()===o.splice(-2,1)[0].trim()&&(a.locationValue=o.join(",")))})},this.rebuildCabinViewData=function(e,a){o.buildCabinType(a).then(function(o){var t;h.cabinType.availableCabinTypes=o.availableCabinTypes,h.cabinType.selectedCabin=o.selectedCabin,e.selectedCabin&&C(e.selectedCabin,o.availableCabinTypes)||(e.selectedCabin=angular.copy(o.selectedCabin)),t=o.availableCabinTypes.filter(function(e){return e.name===a.selectedCabinName})[0],e.selectedCabin=t?t.value:angular.copy(o.selectedCabin),h.isTravelCabinAvailable=!0})},h.cabinType={},this.isTravelCabinAvailable=!1,this.constants=e,this.BACookieService=l,this.SellingCookieService=i,this.updateOrigin=function(o,t,i,n,s,d,u){i.flightNotAvailable="",i.showInvalidWarning=!1,i.eligibility=!1,i.unexpectedError=!1,i.availabilityError=!1,i.seasonalRouteError=!1,o?(t.origin.bahId=o.bahID,t.origin.refineTripValue=o.refineTripValue,t.origin.locationType=o.locationType,t.origin.locationValue=o.locationValue,t.origin.locationCode=o.locationCode,t.origin.cityName=o.cityName,t.origin.cityCode=o.cityCode,t.origin.airportCode=o.airportCode,l.setCookie(e.ORIGIN_COOKIE_NAME,o.locationValue+"|"+o.locationCode,e.COOKIE_PATH,!0,e.COOKIE_EXPIRATION_DURATION,e.COOKIE_EXPIRATION_UNIT),o.countryCode&&(t.origin.countryCode=o.countryCode.trim()),t.origin.countryName=o.countryName,t.destination&&t.destination.locationCode&&_(t,n,i),d.originLocationCode=t.origin.locationCode,h.isTravelCabinAvailable=!1,h.fallbackOn||(n===e.CAR_ONLY_OPTION?T(o.bahID).then(function(e){t.origin.locationCode=e.data.iataCode,t.origin.airportOjId=e.data.gatewayBahId,t.origin.cityOjId=o.bahID,t.origin.countryCode=e.data.countryCode,h.rebuildCabinViewData(u,t)},function(a){r.error(e.PRODUCT_ELIGIBILITY_SERVICE_ERROR+" : "+a.status)}):h.rebuildCabinViewData(u,t)),n!==e.FLIGHT_AND_CAR&&n!==e.FLIGHT_AND_HOTEL&&n!==e.FLIGHT||h.fallbackOn||c.getPackageEligibility(!1,t.origin.locationCode,t.origin.cityCode,t.destination.cityCode,s).then(function(o){t.origin.propositionAvailability=o,(n===e.FLIGHT_AND_HOTEL&&o.PAKFH===!1&&h.fallbackOn===!1||n===e.FLIGHT_AND_CAR&&o.PAKFC===!1&&h.fallbackOn===!1)&&(i.eligibility=!0,i.origin=e.TYPEAHEAD_KEY_NO_HOLIDAY_PACKAGE,a.trackEvent("originSuggestionError",{originErrorMessage:e.TYPEAHEAD_BAH_ERROR_TRACKING_TEXT+t.origin.locationCode,originError:e.TYPEAHEAD_KEY_NO_HOLIDAY_PACKAGE}))})["catch"](function(a){r.error(e.PRODUCT_ELIGIBILITY_SERVICE_ERROR+" : "+a.status)})):(t.origin.bahId="",t.origin.refineTripValue="",t.origin.locationType="",t.origin.locationValue="",t.origin.locationCode="",t.origin.cityName="",t.origin.cityCode="",t.origin.countryCode="",t.origin.countryName="",d.originLocationCode="")},this.updateOriginSuggestions=function(o,i,n,c){var l,s,d=!1,u=new RegExp(e.REGEX_LOC_INPUT);c.origin="",c.flightNotAvailable="",c.showInvalidWarning=!1,c.unexpectedError=!1,c.availabilityError=!1,c.seasonalRouteError=!1,o.length>=3&&o.length<=15&&u.test(o)?(n===e.CAR_ONLY_OPTION&&(d=!0,l=e.SERVICE_CAR_ONLY),(n===e.FLIGHT||n===e.CONCUR||n===e.CAR_ONLY_OPTION||n===e.FLIGHT_AND_CAR||n===e.FLIGHT_AND_HOTEL)&&(h.fallbackOn?(s=h.populateFallbackSuggestions(o),i(s)):t.getLocationList(o,l,[e.SERVICE_FLIGHT_ONLY],d).then(function(t){0===t.length?(c.origin=e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE,a.trackEvent("originSuggestionError",{originErrorMessage:e.TYPEAHEAD_ERROR_TEXT+o,originError:e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE})):p(t),i(t)})["catch"](function(t){h.fallbackOn=!0,a.trackEvent("originSuggestionError",{originErrorMessage:e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE,originError:e.LOG_DEPARTURE_SERVICE_ERROR+" : "+t}),r.error(e.LOG_DEPARTURE_SERVICE_ERROR+" : "+t),s=h.populateFallbackSuggestions(o),i(s)}))):(o.length>2&&!u.test(o)?(c.origin=e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE,a.trackEvent("originSuggestionError",{originErrorMessage:e.TYPEAHEAD_ERROR_TEXT+o,originError:e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE})):c.origin="",i())},this.updateDestination=function(a,o,t,i,n,c,l){t.flightNotAvailable="",t.showInvalidWarning=!1,t.unexpectedError=!1,t.availabilityError=!1,t.seasonalRouteError=!1,a?(o.destination.bahId=a.bahID,o.destination.refineTripValue=a.refineTripValue,o.destination.locationValue=a.locationValue,o.destination.locationCode=a.locationCode,o.destination.locationType=a.locationType,o.destination.cityCode=a.cityCode,o.destination.cityName=a.cityName,o.destination.airportOjId=a.airportOjId,o.destination.cityOjId=a.cityOjId,o.destination.airportCode=a.airportCode,o.destination.ojGW=a.locationCode,o.destination.propositionAvailability=a.propositionAvailability,o.flightHotelId="",o.flightHotelCost="",o.origin&&o.origin.locationCode&&_(o,i,t),h.isTravelCabinAvailable=!1,h.fallbackOn||(i===e.FLIGHT||i===e.CONCUR?h.rebuildCabinViewData(l,o):T(a.bahID).then(function(t){o.destination.locationCode=t.data.iataCode,o.destination.cityOjId=a.bahID,(i===e.FLIGHT_AND_CAR||i===e.CAR_ONLY_OPTION)&&(o.destination.airportOjId=t.data.gatewayBahId,o.destination.countryCode=t.data.countryCode),i===e.FLIGHT_AND_HOTEL&&t.data.cityHotelId&&(o.destination.cityOjId=t.data.cityHotelId),h.rebuildCabinViewData(l,o)},function(a){r.error(e.PRODUCT_ELIGIBILITY_SERVICE_ERROR+" : "+a.status)})),c.destinationLocationCode=o.destination.locationCode,s.updateJourneyDetailsCookie(o)):(o.destination.bahId="",o.destination.refineTripValue="",o.destination.locationValue="",o.destination.locationCode="",o.destination.locationType="",o.destination.cityCode="",o.destination.cityName="",o.destination.airportOjId="",o.destination.cityOjId="",o.flightHotelId="",o.flightHotelCost="",c.destinationLocationCode="")},this.updateDestinationSuggestions=function(o,i,n,c){var l,s,d=!0,u=new RegExp(e.REGEX_LOC_INPUT);if(c.destination="",c.flightNotAvailable="",c.showInvalidWarning=!1,c.unexpectedError=!1,c.availabilityError=!1,c.seasonalRouteError=!1,o.length>=3&&o.length<=15&&u.test(o)){switch(n){case e.FLIGHT:case e.CONCUR:d=!1;break;case e.FLIGHT_AND_HOTEL:l=e.FLIGHTHOTEL;break;case e.FLIGHT_AND_CAR:l=e.FLIGHTCAR;break;case e.HOTEL_ONLY_OPTION:l=e.HOTEL.toUpperCase();break;case e.CAR_ONLY_OPTION:l=e.CAR.toUpperCase()}h.fallbackOn?(s=h.populateFallbackSuggestions(o),i(s)):t.getLocationList(o,l,!1,d).then(function(t){0===t.length?(c.destination=e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE,a.trackEvent("destinationSuggestionError",{destinationErrorMessage:e.TYPEAHEAD_ERROR_TEXT+o,destinationError:e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE})):p(t),n===e.CONCUR&&(c.bahDestination=e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE),i(t)})["catch"](function(t){h.fallbackOn=!0,a.trackEvent("destinationSuggestionError",{destinationErrorMessage:e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE,destinationError:e.LOG_DESTINATION_SERVICE_ERROR+" : "+t}),r.error(e.LOG_DESTINATION_SERVICE_ERROR+" : "+t),s=h.populateFallbackSuggestions(o),i(s)})}else o.length>2&&!u.test(o)?(c.destination=e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE,a.trackEvent("destinationSuggestionError",{destinationErrorMessage:e.TYPEAHEAD_ERROR_TEXT+o,destinationError:e.TYPEAHEAD_KEY_WE_CANT_RECOGNIZE})):c.destination="",i()},this.setBahErrorMessage=function(e,a,o){(e!==a||"typeahead-noHolidayPackage"!==o.origin)&&(o.eligibility=!1,o.origin="")},this.clearInputFields=function(e){e.origin={locationCode:"",cityCode:"",cityName:"",countryCode:"",countryName:"",locationValue:"",locationType:"",bahId:"",refineTripValue:""},e.destination={locationCode:"",airportName:"",cityName:"",countryCode:"",countryName:"",displayValue:"",searchType:"",stateName:"",locationValue:"",bahId:"",refineTripValue:""}},this.setUpsellValuesToBlank=function(e){e.flightOnlyUpsell="",e.flightHotelUpsell="",e.flightCarUpsell=""},this.populateFallbackSuggestions=function(e){var a=d("filter")(u.FALLBACK_LOCATIONS,{locationValue:e});return 0===a.length&&(a=[{locationCode:e.substring(0,3).toUpperCase(),locationValue:e,countryCode:e.substring(0,2).toUpperCase()}]),a},this.hideUpsell=function(a,o){a!==e.FLIGHT?(o.$scope.showFlightOnlyUpsell=!1,o.$scope.showFlightHotelUpsell=!1,o.$scope.showFlightCarUpsell=!1):(o.$scope.showFlightOnlyUpsell=!!o.searchPanelViewModel.flightOnlyUpsell,o.$scope.showFlightHotelUpsell=!!o.searchPanelViewModel.flightHotelUpsell,o.$scope.showFlightCarUpsell=!!o.searchPanelViewModel.flightCarUpsell)}},ba.searchbar.SearchbarHelperService.prototype.isSearchEnabled=function(e,a,o,t,i,r){var n,c,l,s,d;return d=this.fallbackOn?!0:this.isTravelCabinAvailable,r?!0:((e===this.constants.CAR_ONLY_OPTION||e===this.constants.FLIGHT_AND_CAR)&&(i.isNonUs=!1,i.isUs=!1,l=t[1].diff(t[0],this.constants.DAYS),c=e===this.constants.CAR_ONLY_OPTION?a.origin.countryCode:a.destination.countryCode,c&&l>28&&c!==this.constants.US_COUNTRY_CODE?i.isNonUs=!0:c&&l>59&&c===this.constants.US_COUNTRY_CODE&&(i.isUs=!0)),e===this.constants.HOTEL_ONLY_OPTION?a.destination.locationValue.length>0&&!t[0].isSame(t[1]):e===this.constants.CAR_ONLY_OPTION?(s=i.isNonUs===!1&&i.isUs===!1,o.showDropLocation&&a.leadDriverDateOfBirth.checkboxSelection?a.destination.locationValue.length>0&&a.origin.locationValue.length>0&&s:o.showDropLocation&&!a.leadDriverDateOfBirth.checkboxSelection?a.destination.locationValue.length>0&&a.origin.locationValue.length>0&&a.leadDriverDateOfBirth.driverAge.selectedDay.length>0&&a.leadDriverDateOfBirth.driverAge.selectedMonth.length>0&&a.leadDriverDateOfBirth.driverAge.selectedYear&&s:a.leadDriverDateOfBirth.checkboxSelection?a.origin.locationValue.length>0&&s:a.origin.locationValue.length>0&&a.leadDriverDateOfBirth.driverAge.selectedDay.length>0&&a.leadDriverDateOfBirth.driverAge.selectedMonth.length>0&&a.leadDriverDateOfBirth.driverAge.selectedYear&&s):e===this.constants.FLIGHT?d&&t.length>=1&&a.origin.locationValue&&a.destination.locationValue&&a.origin.locationValue!==a.destination.locationValue:e===this.constants.FLIGHT_AND_HOTEL||e===this.constants.FLIGHT_AND_CAR?(s=i.isNonUs===!1&&i.isUs===!1&&i.eligibility===!1,e!==this.constants.FLIGHT_AND_CAR||a.leadDriverDateOfBirth.checkboxSelection?d&&a.origin.locationValue.length>0&&a.destination.locationValue.length>0&&a.origin.locationValue!==a.destination.locationValue&&s:(n=a.leadDriverDateOfBirth.driverAge.selectedDay.length>0&&a.leadDriverDateOfBirth.driverAge.selectedMonth.length>0&&a.leadDriverDateOfBirth.driverAge.selectedYear,d&&a.origin.locationValue.length>0&&a.destination.locationValue.length>0&&a.origin.locationValue!==a.destination.locationValue&&n&&s)):d&&a.origin.locationValue.length>0&&a.destination.locationValue.length>0&&a.origin.locationValue!==a.destination.locationValue)},ba.searchbar.SearchbarHelperService.prototype.getSelectedCabinName=function(e,a){var o=e.filter(function(e){return e.value===a});return o[0]?o[0].name:""},ba.searchbar.Lib.service("SearchbarHelperService",["SearchBarConstants","SearchbarTrackingService","SearchBarViewModelFactory","ProductLocationService","SellingCookieService","BALog","BahProductEligibilityProxy","ProductEligibilityService","BACookieService","SearchbarCookieHelperService","$filter","LocationFallbackConstants",ba.searchbar.SearchbarHelperService]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchbarTrackingService=function(e,a){this.analytics=e,this.trackEvent=function(a,o){e.trackEvent(a,o)},this.trackRedirectData=function(e,o,t,i){var r,n,c=!0;o===a.FLIGHT_ONLY?(n=e.parameters.retDate?a.JOURNEY_TYPE_RETURN:a.JOURNEY_TYPE_ONE_WAY,r={from:e.parameters.from,to:e.parameters.to,outboundDate:e.parameters.depDate,returnDate:e.parameters.retDate||"",cabin:e.parameters.cabin,adult:e.parameters.ad,child:e.parameters.ch,infant:e.parameters.inf,youngAdult:e.parameters.ya,ticketType:e.parameters.restrictionType,journeyType:n,productFO:o,upsellOffered:i},t===a.CONCUR&&(r.productFO=o+a.CONCUR)):(o===a.HOTEL_PACKAGE&&(r={from:e.planTripParams.origin,to:e.planTripParams.destination,outboundDate:e.planTripParams.depDate,returnDate:e.planTripParams.arrDate,cabin:e.planTripParams.cabinCode,adult:e.planTripParams.adultCount,child:e.planTripParams.childCount,infant:e.planTripParams.infantCount,rooms:e.planTripParams.hotel.roomsReq,ticketType:e.planTripParams.ticketType,productFH:a.FH,upsellOffered:i,upsellChosen:i.flightHotel?a.FLIGHT_AND_HOTEL:!1}),o===a.HOTEL_ONLY&&(r={destination:e.planTripParams.destination,checkInDate:e.planTripParams.depDate,checkOutDate:e.planTripParams.arrDate,adult:e.planTripParams.adultCount,child:e.planTripParams.childCount,infant:e.planTripParams.infantCount,rooms:e.planTripParams.hotel.roomsReq,productFH:a.HOTEL_ONLY}),o===a.CAR_PACKAGE&&(r={from:e.planTripParams.origin,to:e.planTripParams.destination,outboundDate:e.planTripParams.depDate,returnDate:e.planTripParams.arrDate,cabin:e.planTripParams.cabinCode,adult:e.planTripParams.adultCount,child:e.planTripParams.childCount,infant:e.planTripParams.infantCount,ticketType:e.planTripParams.ticketType,productFC:a.FC,upsellOffered:i,upsellChosen:i.flightCar?a.FLIGHT_AND_CAR:!1}),o===a.CAR_ONLY&&(e.planTripParams.car.pickup&&e.planTripParams.car.dropoff&&(c=!1),r={pickUp:c?e.planTripParams.destination:e.planTripParams.car.pickup.destination,dropOff:e.planTripParams.destination,pickupTime:e.planTripParams.car.PickupTime,dropoffTime:e.planTripParams.car.DropoffTime,productFC:a.CAR_ONLY})),this.trackEvent("SearchbarContinueClicked",r)}},ba.searchbar.Lib.service("SearchbarTrackingService",["analytics","SearchBarConstants",ba.searchbar.SearchbarTrackingService]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchbarUpsellService=function(e,a,o,t,i,r,n){this.carPackageProxy=e,this.hotelPackageProxy=a,this.flightOnlyProxy=o,this.$q=n,this.getUpsellData=function(e,a,o,n,c,l,s,d,u,C,_){var T=t.destination.propositionAvailability,p=t.origin.propositionAvailability,h=[{},{},{}],O=this.$q.defer();return h[0]=this.flightOnlyProxy.getLowestPricePropositionDetails(a,o,n,u,C,_,l,s),T&&T[r.HOTEL_PACKAGE]&&p[r.HOTEL_PACKAGE]&&(h[1]=this.hotelPackageProxy.getLowestPricePropositionDetails(e,a,o,n,c,l,s)),T&&T[r.CAR_PACKAGE]&&p[r.HOTEL_PACKAGE]&&(h[2]=this.carPackageProxy.getLowestPricePropositionDetails(e,a,o,n,d,l,s)),this.$q.all(h).then(function(e){e[0]&&void 0!==e[0].currency_code?i.getCurrency(e[0].currency_code).then(function(a){e[0].currencyDetails=a,O.resolve(e)}):O.resolve(e)}),O.promise}},ba.searchbar.Lib.service("SearchbarUpsellService",["CarPackageProxy","HotelPackageProxy","FlightOnlyProxy","SearchPanelViewModel","CurrencyDetailsServiceSearchbar","SearchBarConstants","$q",ba.searchbar.SearchbarUpsellService]),
ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchbarValidationService=function(e,a,o,t){this.isValidDate=function(t,i,r){var n,c,l,s,d,u;return n=t+i+r,c=a.leadDriverDateOfBirth.dayList[0].value+a.leadDriverDateOfBirth.monthList[0].value+a.leadDriverDateOfBirth.yearList[0],l=a.leadDriverDateOfBirth.dayList[a.leadDriverDateOfBirth.dayList.length-1].value+a.leadDriverDateOfBirth.monthList[a.leadDriverDateOfBirth.monthList.length-1].value+a.leadDriverDateOfBirth.yearList[a.leadDriverDateOfBirth.yearList.length-1],s=o(c,e.DATE_DDMMYYYY),d=o(l,e.DATE_DDMMYYYY),u=o(n,e.DATE_DDMMYYYY).isBetween(s,d)},this.formatDriverDOB=function(e,t,i){var r;r=e+t+i,a.leadDriverDateOfBirth.driverAge.dateOfBirth=o(r,"DDMMYYYY").format("DD/MM/YYYY")},ba.searchbar.SearchbarValidationService.prototype.leadDriverErrorValidation=function(a,o,t){var i,r,n,c=!1;return a===e.FLIGHT_AND_CAR||a===e.CAR_ONLY_OPTION?o.leadDriverDateOfBirth.checkboxSelection?(t.invalidDOB=!1,c=!0):(i=o.leadDriverDateOfBirth.driverAge.selectedDay,r=o.leadDriverDateOfBirth.driverAge.selectedMonth,n=o.leadDriverDateOfBirth.driverAge.selectedYear,this.isValidDate(i,r,n)?(t.invalidDOB=!1,c=!0,this.formatDriverDOB(i,r,n)):t.invalidDOB=!0):c=!0,c},ba.searchbar.SearchbarValidationService.prototype.getDay=function(){var e,a=[];for(e=1;31>=e;e+=1)10>e?a.push({value:"0"+e,label:"0"+e}):a.push({value:""+e,label:e});return a},ba.searchbar.SearchbarValidationService.prototype.getMonth=function(){var e,a,o=[],i=t.DATETIME_FORMATS;for(a=i.MONTH,e=0;12>e;e+=1)9>e?o.push({value:"0"+(e+1),label:a[e]}):o.push({value:""+(e+1),label:a[e]});return o}},ba.searchbar.Lib.service("SearchbarValidationService",["SearchBarConstants","SearchPanelViewModel","Moment","$locale",ba.searchbar.SearchbarValidationService]),ba.lang.namespace("ba.searchbar"),ba.searchbar.SearchPanelViewModel=function(e,a){"use strict";var o;return this.moment=e,this.planFrag={countryOfResidence:"gb",languageCode:"en",origin:{locationCode:"",cityCode:"",cityName:"",countryCode:"",countryName:"",locationValue:"",locationType:"",bahId:"",refineTripValue:""},destination:{locationCode:"",airportName:"",cityName:"",countryCode:"",countryName:"",displayValue:"",searchType:"",stateName:"",locationValue:"",bahId:"",refineTripValue:""},proposition:{},dates:[],tripType:"",selectedPropositionType:"",carInfo:{dropOff:{},pickUp:{},showDropLocation:!1},leadDriverDateOfBirth:{checkboxSelection:!0,driverAge:{},dayList:[],monthList:[],yearList:[]}},o=function(e){return""!==e&&null!==e&&"undefined"!=typeof e},o(a.country)&&(this.planFrag.countryOfResidence=a.country),o(a.language)&&(this.planFrag.languageCode=a.language),this.planFrag},ba.searchbar.Lib.factory("SearchPanelViewModel",["Moment","ClientLocaleService",ba.searchbar.SearchPanelViewModel]);
angular.module("ba-searchbar-templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("ba-searchbar/templates/_flight-and-car-section.html",'<div class="small-12 columns search-section-container"><form name="searchForm" novalidate="novalidate"><div role="tabpanel" id="flightAndCarPanel" aria-labelledby="flightAndCarTab" class="search-form"><div class="row"><div class="small-12 columns search-type"><div class="row"><div data-ng-if="cugName" class="small-12 medium-12 large-5 columns float-right"><div class="cug-name"><h3 title="{{cugName}}">{{cugName}}</h3></div></div><div class="small-12 medium-12 large-7 columns padding-zero-for-small" role="tablist"><p data-ng-if="isNotStaffCug" data-ba-resource-bundle-static="" data-key="Searchbar-flightAndCar" data-ng-click="SP.setUserChoice(\'FlightAndCar\', \'click\')" tabindex="14" data-ng-keydown="SP.setUserChoice(\'FlightAndCar\',$event)" data-ng-class="{\'selected\' : (userChoice === \'FlightAndCar\'), \'car-only\' : (userChoice === \'CarOnly\')}" role="tab" aria-selected="{{userChoice === \'FlightAndCar\' ? \'true\' : \'false\'}}"></p><p data-ba-resource-bundle-static="" data-key="Searchbar-carOnly" data-ng-click="SP.setUserChoice(\'CarOnly\', \'click\')" tabindex="15" data-ng-keydown="SP.setUserChoice(\'CarOnly\',$event)" data-ng-class="{\'selected\' : (userChoice === \'CarOnly\'), \'car-only\' : (userChoice === \'CarOnly\')}" role="tab" aria-selected="{{userChoice === \'CarOnly\' ? \'true\' : \'false\'}}"></p><p data-ng-if="isNotStaffCug" class="custom-trip" data-ng-click="openCustomTrip()" data-ng-keydown="openCustomTrip($event.keyCode)" id="sb-{{userChoice.toLowerCase()}}-custom-trip" tabindex="16"><a class="show-for-medium-up" data-ba-resource-bundle-static="" data-key="Searchbar-createCustomTrip" tabindex="-1" href=""></a> <a class="hide-for-medium-up" data-ba-resource-bundle-static="" data-key="Searchbar-createCustomTripShort" tabindex="-1" href=""></a></p></div><div class="large-5 columns show-for-large-up"><div class="avis-heading" data-ng-class="{\'hide-for-large-up\': cugName}"><span class="small-text" data-ba-resource-bundle-static="" data-key="Searchbar-avisPartnership"></span> <img data-ng-src="images/avis_rgb_pos.svg" alt="Avis" height="20" width="60"> <img class="budget-logo" data-ng-src="images/budget-logo.svg" alt="Budget"></div></div></div></div></div><div class="row cross-fade" data-ng-if="userChoice === \'FlightAndCar\'" style="width: 100%;"><div class="small-12 large-12 columns search-section"><span class="lead-driver-checkbox-container-fc" data-ng-keydown="switchCheckBox($event, \'leadDriverFC\')"><input type="checkbox" name="lead-driver-info-FC" tabindex="16" id="leadDriverFC" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection" data-ng-checked="SP.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection"> <label for="leadDriverFC" class="large-checkbox-button lead-driver-checkbox">{{\'Searchbar-leadDriver-label\'|baResourceBundleDynamic}}</label></span><div class="row"><div class="large-4 columns"><div class="row hide-for-large-up" data-ng-hide="SP.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection"><div class="driver-age-link-container"><span class="driver-age-text"><label class="driver-age" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-dateOfbirth"></label></span><p class="driver-age-link" data-ng-click="openLeadDriverLink()" tabindex="16" id="sb-{{userChoice.toLowerCase()}}-lead-driver-link-flightandcar-small" data-ng-keydown="openLeadDriverLink($event.keyCode)"><a tabindex="-1" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-link"></a></p></div><fieldset aria-labeledby="dateOfBirthFCSmallDescription" class="lead-driver-container"><legend id="dateOfBirthFCSmallDescription" class="hidden-field-legend" data-ba-resource-bundle-static="" data-key="Searchbar-lead-driver-select-role"></legend><div class="select-wrap lead-driver-space" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}"><select id="leadDriverBirthDayFCSmall" name="leadDriverBirthDayFCSmall" tabindex="17" class="inverted" data-ng-options="date.value as (date.label) for date in SP.searchPanelViewModel.leadDriverDateOfBirth.dayList" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedDay"></select><label for="leadDriverBirthDayFCSmall" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-dateLabel"></label></div><div class="select-wrap lead-driver-space" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}"><select id="leadDriverBirthMonthFCSmall" name="leadDriverBirthMonthFCSmall" tabindex="17" class="inverted" data-ng-options="month.value as (month.label) for month in SP.searchPanelViewModel.leadDriverDateOfBirth.monthList" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedMonth"></select><label for="leadDriverBirthMonthFCSmall" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-monthLabel"></label></div><div class="select-wrap lead-driver-space"><select id="leadDriverBirthYearFCSmall" name="leadDriverBirthYearFCSmall" tabindex="17" class="inverted" data-ng-options="year for year in SP.searchPanelViewModel.leadDriverDateOfBirth.yearList | orderBy:\'$index\':true" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedYear"></select><label for="leadDriverBirthYearFCSmall" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-yearLabel"></label></div></fieldset><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning" data-ng-if="errorMessage.invalidDOB"><span data-ba-resource-bundle-static="" data-key="Searchbar-invalidDOB"></span></div></div><div class="row"><div class="small-12 columns from-to-field"><div data-typeahead="" data-input-value="{{SP.searchPanelViewModel.origin.locationValue}}" data-label-key="typeahead-from" data-value-field="locationValue" data-class-name="from inverted {{SP.searchPanelViewModel.origin.locationValue.length > 0 ? \'ng-not-empty\' : \'\'}}" data-error-message="errorMessage.origin" data-get-suggestions="SP.updateOriginSuggestions(value, next)" data-suggestion-selected="SP.updateOrigin(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-user-choice="userChoice" data-field-name="from" data-aria-label-key="typeahead-searchBarFromFieldAriaLabel" data-tab-index="18" class="search-field first-search-field"></div></div></div><div class="row"><div class="small-12 columns from-to-field"><div data-typeahead="" data-input-value="{{SP.searchPanelViewModel.destination.locationValue}}" data-label-key="typeahead-to" data-value-field="locationValue" data-class-name="to inverted {{SP.searchPanelViewModel.destination.locationValue.length > 0 ? \'ng-not-empty\' : \'\'}}" data-error-message="errorMessage.destination" data-get-suggestions="SP.updateDestinationSuggestions(value, next)" data-suggestion-selected="SP.updateDestination(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-eligibility-error-state="errorMessage.eligibility" data-user-choice="userChoice" data-field-name="to" data-aria-label-key="typeahead-searchBarToFieldAriaLabel" data-tab-index="19" class="search-field"></div></div></div><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning" data-ng-if="errorMessage.flightNotAvailable"><span data-ba-resource-bundle-static="" data-key="{{errorMessage.flightNotAvailable}}"></span></div></div><div class="small-6 large-2 columns date-container outbound"><div class="outbound date-selection" tabindex="20" id="flightandcar-outbound-date-selector" data-ng-click="openDatepicker(false)" data-ng-keydown="openDatepicker(false, $event)" aria-label="{{constants.DATE_SELECTOR_DEPART_LABEL}} {{journeyDates[0].format(\'DD\')}} {{\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic}}" role="button"><div class="journey-type bold" data-ba-resource-bundle-static="" data-key="Searchbar-outbound" aria-hidden="true"></div><div class="date h1" aria-hidden="true">{{journeyDates[0].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{journeyDates[0].format(\'MMMM\')}}</p></div></div><div class="small-6 large-2 columns date-container"><div class="date-selection" tabindex="21" data-ng-click="openDatepicker(true)" data-ng-keydown="openDatepicker(true, $event)" id="flightandcar-inbound-date-selector" aria-label="{{constants.DATE_SELECTOR_RETURN_LABEL}} {{journeyDates[1].format(\'DD\')}} {{journeyDates.length <= 1 ? \'Add return\' : (\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic)}}" role="button"><div class="journey-type bold" data-ng-if="journeyDates.length <= 1" data-ba-resource-bundle-static="" data-key="Searchbar-addReturn" aria-hidden="true"></div><div class="journey-type bold" data-ng-if="journeyDates.length > 1" data-ba-resource-bundle-static="" data-key="Searchbar-returnFlight" aria-hidden="true"></div><div data-ng-if="journeyDates.length <= 1" class="date add-date h1" aria-hidden="true"><span aria-hidden="true" data-icon="&#xe61b;"></span></div><div data-ng-if="journeyDates.length > 1"><div class="date h1" aria-hidden="true">{{journeyDates[1].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{journeyDates[1].format(\'MMMM\')}}</p></div></div></div><div class="small-12 columns hide-for-large-up"><span class="invalid-warning" data-ng-show="errorMessage.isUs" data-ba-resource-bundle-static="" data-key="SB-US-destinations-errorMessage"></span> <span class="invalid-warning" data-ng-show="errorMessage.isNonUs" data-ba-resource-bundle-static="" data-key="SB-NonUS-destinations-errorMessage"></span></div><div class="large-2 columns drop-down-container"><div class="row"><div class="small-12 medium-6 large-12 columns drop-down-container"><div id="sb-FlightAndCar-pax-mix" class="drop-down-selection" tabindex="22" data-ng-click="togglePaxMixPicker()" data-ng-keypress="keyPress($event, togglePaxMixPicker)" title="{{getPaxMixSelectionText()}}" aria-label="{{constants.PAX_SELECTOR_LABEL}} {{getPaxMixSelectionText()}}"><img data-ng-src="images/avatar_standard.svg" alt="" aria-hidden="true"> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-passengers" aria-hidden="true"></span> <span class="selection input-text-styling" aria-hidden="true">{{getPaxMixSelectionText()}}</span></div></div><div class="small-12 medium-6 large-12 columns drop-down-container"><div id="sb-flightandcar-travel-class" class="drop-down-selection" tabindex="23" data-ng-click="toggleTravelClassPicker()" data-ng-keypress="keyPress($event, toggleTravelClassPicker)" title="{{getTravelClassSelectionText()}}" aria-label="{{constants.TRAVEL_CLASS_SELECTOR_LABEL}} {{getTravelClassSelectionText()}}"><span class="travel-class-icon" aria-hidden="true" data-icon="&#xe604;"></span> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-travelClass" aria-hidden="true"></span> <span class="selection input-text-styling" aria-hidden="true">{{getTravelClassSelectionText()}}</span></div></div></div><div class="avis-heading-container hide-for-large-up"><div class="avis-heading"><span class="small-text" data-ba-resource-bundle-static="" data-key="Searchbar-avisPartnership"></span> <img data-ng-src="images/avis_rgb_pos.svg" alt="Avis" height="20" width="60"> <img class="budget-logo" data-ng-src="images/budget-logo.svg" alt="Budget"></div></div></div><div class="large-2 small-12 columns search-button-container"><button type="button" data-ng-click="SP.submitSearchForm()" aria-disabled="{{!SP.isSearchEnabled()}}" data-ng-class="{\'disabled\' : !SP.isSearchEnabled()}" class="primary search-button" tabindex="24" data-icon="&#xe800;" aria-label="{{\'Searchbar-searchButtonAriaLabel\' | baResourceBundleDynamic}}"></button> <a class="hide-for-medium-up close-button" data-ng-click="expandSearchBar()" data-ba-resource-bundle-static="" data-key="Searchbar-closeSearch"></a></div><div class="large-12 columns show-for-large-up"><span class="invalid-warning" data-ng-show="errorMessage.isUs" data-ba-resource-bundle-static="" data-key="SB-US-destinations-errorMessage"></span> <span class="invalid-warning" data-ng-show="errorMessage.isNonUs" data-ba-resource-bundle-static="" data-key="SB-NonUS-destinations-errorMessage"></span></div></div><div class="row show-for-large-up lead-driver-dob-container" data-ng-hide="SP.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection"><div class="driver-age-link-container"><span class="driver-age-text"><label class="driver-age" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-dateOfbirth"></label></span><p class="driver-age-link" data-ng-click="openLeadDriverLink()" tabindex="17" id="sb-{{userChoice.toLowerCase()}}-lead-driver-link-flightandcar-large" data-ng-keydown="openLeadDriverLink($event.keyCode)"><a tabindex="-1" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-link"></a></p></div><fieldset aria-labeledby="dateOfBirthFCDescription" class="lead-driver-container large-6"><legend id="dateOfBirthFCDescription" class="hidden-field-legend" data-ba-resource-bundle-static="" data-key="Searchbar-lead-driver-select-role"></legend><div class="select-wrap large-2 columns" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}"><select id="leadDriverBirthDayFC" name="leadDriverBirthDayFC" tabindex="17" class="inverted" data-ng-options="date.value as (date.label) for date in SP.searchPanelViewModel.leadDriverDateOfBirth.dayList" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedDay"></select><label for="leadDriverBirthDayFC" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-dateLabel"></label></div><div class="select-wrap large-2 columns" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}"><select id="leadDriverBirthMonthFC" name="leadDriverBirthMonthFC" tabindex="17" class="inverted" data-ng-options="month.value as (month.label) for month in SP.searchPanelViewModel.leadDriverDateOfBirth.monthList" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedMonth"></select><label for="leadDriverBirthMonthFC" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-monthLabel"></label></div><div class="select-wrap large-2 columns end"><select id="leadDriverBirthYearFC" name="leadDriverBirthYearFC" tabindex="17" class="inverted" data-ng-options="year for year in SP.searchPanelViewModel.leadDriverDateOfBirth.yearList | orderBy:\'$index\':true" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedYear"></select><label for="leadDriverBirthYearFC" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-yearLabel"></label></div></fieldset><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning" data-ng-if="errorMessage.invalidDOB"><span data-ba-resource-bundle-static="" data-key="Searchbar-invalidDOB"></span></div></div></div></div><div class="row cross-fade" data-ng-if="userChoice === \'CarOnly\'" style="width: 100%;"><div class="small-12 large-12 columns search-section"><div class="row"><div class="small-12 large-12 columns"><span data-ng-keydown="switchCheckBox($event, \'car-to-diff-location\')"><input type="checkbox" tabindex="17" name="car-to-diff-location" data-ng-model="carOnly.showDropLocation" id="car-to-diff-location" data-ng-change="SP.checkDropOff()"> <label for="car-to-diff-location" class="large-checkbox-button return-car-checkbox">{{\'Searchbar-returnCarLocation\'|baResourceBundleDynamic}}</label></span> <span class="lead-driver-checkbox-container" data-ng-keydown="switchCheckBox($event, \'leadDriverCarOnly\')"><input type="checkbox" name="leadDriverCarOnly" tabindex="17" id="leadDriverCarOnly" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection" data-ng-checked="SP.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection"> <label for="leadDriverCarOnly" class="large-checkbox-button lead-driver-checkbox">{{\'Searchbar-leadDriver-label\'|baResourceBundleDynamic}}</label></span><div class="hide-for-large-up" data-ng-hide="SP.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection"><div class="driver-age-link-container"><span class="driver-age-text"><label class="driver-age" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-dateOfbirth"></label></span><p class="driver-age-link" data-ng-click="openLeadDriverLink()" tabindex="18" id="sb-{{userChoice.toLowerCase()}}-lead-driver-link-caronly-small" data-ng-keydown="openLeadDriverLink($event.keyCode)"><a tabindex="-1" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-link"></a></p></div><fieldset aria-labeledby="dateOfBirthCarOnlyDescriptionSmall" class="lead-driver-container"><legend id="dateOfBirthCarOnlyDescriptionSmall" class="hidden-field-legend" data-ba-resource-bundle-static="" data-key="Searchbar-lead-driver-select-role"></legend><div class="select-wrap lead-driver-space" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}"><select id="leadDriverBirthDaySmall" name="leadDriverBirthDaySmall" tabindex="18" class="inverted" data-ng-options="date.value as (date.label) for date in SP.searchPanelViewModel.leadDriverDateOfBirth.dayList" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedDay"></select><label for="leadDriverBirthDaySmall" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-dateLabel"></label></div><div class="select-wrap lead-driver-space" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}"><select id="leadDriverBirthMonthSmall" name="leadDriverBirthMonthSmall" tabindex="18" class="inverted" data-ng-options="month.value as (month.label) for month in SP.searchPanelViewModel.leadDriverDateOfBirth.monthList" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedMonth"></select><label for="leadDriverBirthMonthSmall" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-monthLabel"></label></div><div class="select-wrap lead-driver-space"><select id="leadDriverBirthYearSmall" name="leadDriverBirthYearSmall" tabindex="18" class="inverted" data-ng-options="year for year in SP.searchPanelViewModel.leadDriverDateOfBirth.yearList | orderBy:\'$index\':true" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedYear"></select><label for="leadDriverBirthYearSmall" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-yearLabel"></label></div></fieldset><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning" data-ng-if="errorMessage.invalidDOB"><span data-ba-resource-bundle-static="" data-key="Searchbar-invalidDOB"></span></div></div></div><div class="large-6 columns"><div class="row"><div class="small-12 columns from-to-field"><div data-typeahead="" data-input-value="{{SP.searchPanelViewModel.origin.locationValue}}" data-label-key="typeahead-pickup-location" data-value-field="locationValue" data-class-name="from inverted {{!carOnly.showDropLocation ? \'car-only\' : \'\'}}" data-error-message="errorMessage.origin" data-get-suggestions="SP.updateOriginSuggestions(value, next)" data-suggestion-selected="SP.updateOrigin(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-user-choice="userChoice" data-field-name="from" data-aria-label-key="typeahead-pickup-location" data-tab-index="19" class="search-field first-search-field"></div></div></div><div class="row"><div class="small-12 columns from-to-field" data-ng-if="carOnly.showDropLocation"><div data-typeahead="" data-input-value="{{SP.searchPanelViewModel.destination.locationValue}}" data-label-key="typeahead-dropoff-location" data-value-field="locationValue" data-class-name="to inverted" data-error-message="errorMessage.destination" data-get-suggestions="SP.updateDestinationSuggestions(value, next)" data-suggestion-selected="SP.updateDestination(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-user-choice="userChoice" data-field-name="to" data-aria-label-key="typeahead-dropoff-location" data-tab-index="20" class="search-field"></div></div><div class="small-12 columns show-for-large-up from-to-field" data-ng-if="!carOnly.showDropLocation"><input type="text" name="searchEntry" tabindex="18" role="textbox" class="to ng-not-empty" id="to" data-select-content-on-focus="" data-select-content-on-focus-callback="trackEventOnFocusCallback()" disabled="" value="{{\'Searchbar-same-pickup-location-text\' | baResourceBundleDynamic}}"> <label for="to">{{\'typeahead-dropoff-location\' | baResourceBundleDynamic}}</label></div><div class="lead-driver-container show-for-large-up" data-ng-hide="SP.searchPanelViewModel.leadDriverDateOfBirth.checkboxSelection"><div class="driver-age-link-container"><span class="driver-age-text"><label class="driver-age" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-dateOfbirth"></label></span><p class="driver-age-link" data-ng-click="openLeadDriverLink()" tabindex="18" id="sb-{{userChoice.toLowerCase()}}-lead-driver-link-caronly-large" data-ng-keydown="openLeadDriverLink($event.keyCode)"><a data-ba-resource-bundle-static="" tabindex="-1" data-key="Searchbar-leadDriver-link"></a></p></div><fieldset aria-labeledby="dateOfBirthCarOnlyDescription" class="lead-driver-container"><legend id="dateOfBirthCarOnlyDescription" class="hidden-field-legend" data-ba-resource-bundle-static="" data-key="Searchbar-lead-driver-select-role"></legend><div class="select-wrap large-4 columns" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}"><select id="leadDriverBirthDay" name="leadDriverBirthDay" tabindex="18" class="inverted" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}" data-ng-options="date.value as (date.label) for date in SP.searchPanelViewModel.leadDriverDateOfBirth.dayList" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedDay"></select><label for="leadDriverBirthDay" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-dateLabel"></label></div><div class="select-wrap large-4 columns" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}"><select id="leadDriverBirthMonth" name="leadDriverBirthMonth" tabindex="18" class="inverted" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}" data-ng-options="month.value as (month.label) for month in SP.searchPanelViewModel.leadDriverDateOfBirth.monthList" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedMonth"></select><label for="leadDriverBirthMonth" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-monthLabel"></label></div><div class="select-wrap large-4 columns"><select id="leadDriverBirthYear" name="leadDriverBirthYear" tabindex="18" class="inverted" data-ng-class="{\'invalid-date\': errorMessage.invalidDOB}" data-ng-options="year for year in SP.searchPanelViewModel.leadDriverDateOfBirth.yearList | orderBy:\'$index\':true" data-ng-model="SP.searchPanelViewModel.leadDriverDateOfBirth.driverAge.selectedYear"></select><label for="leadDriverBirthYear" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-yearLabel"></label></div></fieldset><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning" data-ng-if="errorMessage.invalidDOB"><span data-ba-resource-bundle-static="" data-key="Searchbar-invalidDOB"></span></div></div></div></div><div class="small-6 large-2 columns date-container outbound car-only"><div class="date-selection outbound"><div class="outbound" tabindex="20" id="caronly-outbound-date-selector" data-ng-click="openDatepicker(false)" data-ng-keydown="openDatepicker(false, $event)" aria-label="{{constants.DATE_SELECTOR_PICKUP_LABEL}} {{journeyDates[0].format(\'DD\')}} {{\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic}}" role="button"><div class="journey-type bold" data-ba-resource-bundle-static="" data-key="Searchbar-pickUpHeader" aria-hidden="true"></div><div class="date h1" aria-hidden="true">{{journeyDates[0].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{journeyDates[0].format(\'MMMM\')}}</p></div><div class="row car-time"><div class="small-5 large-5 columns no-space"><div class="select-wrap no-label"><select id="pick-hours" class="inverted" data-ng-model="SP.searchPanelViewModel.carInfo.pickUp.hours" data-ng-options="hr for hr in SP.hoursList" name="large-select" aria-label="{{constants.HOUR_SELECTOR_PICKUP_LABEL}}" required="" aria-required="true" tabindex="20"></select></div></div><p class="small-2 large-1 columns time-divider bold" data-ba-resource-bundle-static="" data-key="Searchbar-colon" aria-hidden="true"></p><div class="small-5 large-5 columns no-space"><div class="select-wrap no-label"><select id="pick-minutes" class="inverted" data-ng-model="SP.searchPanelViewModel.carInfo.pickUp.minutes" data-ng-options="min for min in SP.minutesList" name="large-select" aria-label="{{constants.MINUTE_SELECTOR_PICKUP_LABEL}}" required="" aria-required="true" tabindex="20"></select></div></div></div></div></div><div class="small-6 large-2 columns date-container car-only"><div class="date-selection"><div tabindex="21" data-ng-click="openDatepicker(true)" data-ng-keydown="openDatepicker(true, $event)" id="caronly-inbound-date-selector" aria-label="{{constants.DATE_SELECTOR_DROPOFF_LABEL}} {{journeyDates[1].format(\'DD\')}} {{journeyDates.length <= 1 ? \'Add return\' : (\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic)}}" role="button"><div class="journey-type bold" data-ba-resource-bundle-static="" data-key="Searchbar-dropOffHeader" aria-hidden="true"></div><div data-ng-if="journeyDates.length <= 1" class="date add-date h1" aria-hidden="true"><span data-icon="&#xe61b;"></span></div><div data-ng-if="journeyDates.length > 1" aria-hidden="true"><div class="date h1">{{journeyDates[1].format(\'DD\')}}</div><p class="month">{{journeyDates[1].format(\'MMMM\')}}</p></div></div><div class="row car-time"><div class="small-5 large-5 columns no-space"><div class="select-wrap no-label"><select id="drop-hours" data-ng-model="SP.searchPanelViewModel.carInfo.dropOff.hours" data-ng-options="hr for hr in SP.hoursList" class="inverted" name="large-select" tabindex="21" aria-label="{{constants.HOUR_SELECTOR_DROPOFF_LABEL}}" required="" aria-required="true"></select></div></div><p class="small-2 large-1 columns time-divider bold" data-ba-resource-bundle-static="" data-key="Searchbar-colon" aria-hidden="true"></p><div class="small-5 large-5 columns no-space"><div class="select-wrap no-label"><select id="drop-minutes" data-ng-model="SP.searchPanelViewModel.carInfo.dropOff.minutes" data-ng-options="min for min in SP.minutesList" class="inverted" name="large-select" tabindex="21" aria-label="{{constants.MINUTE_SELECTOR_DROPOFF_LABEL}}" required="" aria-required="true"></select></div></div></div></div></div><div class="small-12 columns hide-for-large-up"><span class="invalid-warning" data-ng-show="errorMessage.isUs" data-ba-resource-bundle-static="" data-key="SB-US-destinations-errorMessage"></span> <span class="invalid-warning" data-ng-show="errorMessage.isNonUs" data-ba-resource-bundle-static="" data-key="SB-NonUS-destinations-errorMessage"></span></div><div class="small-12 columns avis-heading-container hide-for-large-up"><div class="avis-heading"><span class="small-text" data-ba-resource-bundle-static="" data-key="Searchbar-avisPartnership"></span> <img data-ng-src="images/avis_rgb_pos.svg" alt="Avis" height="20" width="60"> <img class="budget-logo" data-ng-src="images/budget-logo.svg" alt="Budget"></div></div><div class="large-2 small-12 columns search-button-container"><button type="button" data-ng-click="SP.submitSearchForm()" aria-disabled="{{!SP.isSearchEnabled()}}" data-ng-class="{\'disabled\' : !SP.isSearchEnabled()}" class="primary search-button" tabindex="22" data-icon="&#xe800;" aria-label="{{\'Searchbar-searchButtonAriaLabel\' | baResourceBundleDynamic}}"></button><span data-ng-if="isHotlineInformationRetrieved" class="hide-for-medium-up close-button">{{\'Searchbar-hotline-count\' | baResourceBundleDynamic: hotlineCountInformation}}</span> <a class="hide-for-medium-up close-button" data-ng-click="expandSearchBar()" data-ba-resource-bundle-static="" data-key="Searchbar-closeSearch"></a></div></div><div class="row show-for-large-up" data-ng-if="errorMessage.isUs || errorMessage.isNonUs"><div class="large-12 columns"><span class="invalid-warning" data-ng-show="errorMessage.isUs" data-ba-resource-bundle-static="" data-key="SB-US-destinations-errorMessage"></span> <span class="invalid-warning" data-ng-show="errorMessage.isNonUs" data-ba-resource-bundle-static="" data-key="SB-NonUS-destinations-errorMessage"></span></div></div><div class="row show-for-medium-up" data-ng-if="isHotlineInformationRetrieved"><div class="small-12 columns hotline-booking-count"><span>{{\'Searchbar-hotline-count\' | baResourceBundleDynamic: hotlineCountInformation}}</span></div></div></div></div></div></form></div>'),$templateCache.put("ba-searchbar/templates/_flight-and-hotel-section.html",'<div class="small-12 columns search-section-container"><form name="searchForm" novalidate="novalidate"><div role="tabpanel" id="flightAndHotelPanel" aria-labelledby="flightAndHotelTab" class="search-form"><div class="row"><div class="small-12 columns search-type"><div class="row"><div class="small-12 columns"><span class="extra-small hotel-only-error-text show-for-medium-up hide-for-large-up" data-ng-if="userChoice === \'HotelOnly\' && journeyDates[0].isSame(journeyDates[1])" data-ba-resource-bundle-static="" data-key="Searchbar-hotel-only-information-text"></span></div></div><div class="row"><div data-ng-if="cugName" class="small-12 medium-12 large-6 columns float-right"><div class="cug-name"><h3 title="{{cugName}}">{{cugName}}</h3></div></div><div class="small-12 medium-12 large-6 columns padding-zero-for-small" role="tablist"><p data-ng-if="isNotStaffCug" data-ba-resource-bundle-static="" data-key="Searchbar-flightAndHotel" data-ng-click="SP.setUserChoice(\'FlightAndHotel\', \'click\')" tabindex="14" data-ng-class="{\'selected\' : (userChoice === \'FlightAndHotel\')}" data-ng-keydown="SP.setUserChoice(\'FlightAndHotel\',$event)" role="tab" aria-selected="{{userChoice === \'FlightAndHotel\' ? \'true\' : \'false\'}}"></p><p data-ba-resource-bundle-static="" data-key="Searchbar-hotelOnly" data-ng-click="SP.setUserChoice(\'HotelOnly\', \'click\')" tabindex="15" data-ng-class="{\'selected\' : (userChoice === \'HotelOnly\')}" data-ng-keydown="SP.setUserChoice(\'HotelOnly\',$event)" role="tab" aria-selected="{{userChoice === \'HotelOnly\' ? \'true\' : \'false\'}}"></p><p data-ng-if="isNotStaffCug" class="custom-trip" data-ng-click="openCustomTrip()" data-ng-keydown="openCustomTrip($event.keyCode)" id="sb-{{userChoice.toLowerCase()}}-custom-trip" tabindex="16"><a class="show-for-medium-up" data-ba-resource-bundle-static="" data-key="Searchbar-createCustomTrip" href="" role="link" tabindex="-1"></a> <a class="hide-for-medium-up" data-ba-resource-bundle-static="" data-key="Searchbar-createCustomTripShort" href="" role="link" tabindex="-1"></a></p></div><div class="small-12 medium-5 large-6 columns padding-zero-for-small"><span class="extra-small disclaimer-text hotel-only-error-text show-for-large-up" data-ng-if="userChoice === \'HotelOnly\' && journeyDates[0].isSame(journeyDates[1])" data-ba-resource-bundle-static="" data-key="Searchbar-hotel-only-information-text"></span></div></div></div></div><div class="row cross-fade" data-ng-if="userChoice === \'FlightAndHotel\'" style="width: 100%;"><div class="small-12 large-12 columns search-section"><div class="row"><div class="large-4 columns"><div class="row"><div class="small-12 columns from-to-field"><div data-typeahead="" data-input-value="{{SP.searchPanelViewModel.origin.locationValue}}" data-label-key="typeahead-from" data-value-field="locationValue" data-class-name="from inverted {{SP.searchPanelViewModel.origin.locationValue.length > 0 ? \'ng-not-empty\' : \'\'}}" data-error-message="errorMessage.origin" data-get-suggestions="SP.updateOriginSuggestions(value, next)" data-suggestion-selected="SP.updateOrigin(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-user-choice="userChoice" data-field-name="from" data-aria-label-key="typeahead-searchBarFromFieldAriaLabel" data-tab-index="17" class="search-field first-search-field"></div></div></div><div class="row"><div class="small-12 columns from-to-field"><div data-typeahead="" data-input-value="{{SP.searchPanelViewModel.destination.locationValue}}" data-label-key="typeahead-to" data-value-field="locationValue" data-class-name="to inverted {{SP.searchPanelViewModel.destination.locationValue.length > 0 ? \'ng-not-empty\' : \'\'}}" data-error-message="errorMessage.destination" data-get-suggestions="SP.updateDestinationSuggestions(value, next)" data-suggestion-selected="SP.updateDestination(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-user-choice="userChoice" data-eligibility-error-state="errorMessage.eligibility" data-field-name="to" data-aria-label-key="typeahead-searchBarToFieldAriaLabel" data-tab-index="18" class="search-field"></div></div></div><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning" data-ng-if="errorMessage.flightNotAvailable"><span data-ba-resource-bundle-static="" data-key="{{errorMessage.flightNotAvailable}}"></span></div></div><div class="small-6 large-2 columns date-container outbound"><div class="outbound date-selection" tabindex="19" id="flightandhotel-outbound-date-selector" data-ng-click="openDatepicker(false)" data-ng-keydown="openDatepicker(false, $event)" aria-label="{{constants.DATE_SELECTOR_DEPART_LABEL}} {{journeyDates[0].format(\'DD\')}} {{\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic}}" role="button"><div class="journey-type bold" data-ba-resource-bundle-static="" data-key="Searchbar-outbound" aria-hidden="true"></div><div class="date h1" aria-hidden="true">{{journeyDates[0].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{journeyDates[0].format(\'MMMM\')}}</p></div></div><div class="small-6 large-2 columns date-container"><div class="date-selection" tabindex="20" data-ng-click="openDatepicker(true)" data-ng-keydown="openDatepicker(true, $event)" id="flightandhotel-inbound-date-selector" aria-label="{{constants.DATE_SELECTOR_RETURN_LABEL}} {{journeyDates[1].format(\'DD\')}} {{journeyDates.length <= 1 ? \'Add return\' : (\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic)}}" role="button"><div class="journey-type bold" data-ng-if="journeyDates.length <= 1" data-ba-resource-bundle-static="" data-key="Searchbar-addReturn" aria-hidden="true"></div><div class="journey-type bold" data-ng-if="journeyDates.length > 1" data-ba-resource-bundle-static="" data-key="Searchbar-returnFlight" aria-hidden="true"></div><div data-ng-if="journeyDates.length <= 1" class="date add-date h1" aria-hidden="true"><span aria-hidden="true" data-icon="&#xe61b;"></span></div><div data-ng-if="journeyDates.length > 1"><div class="date h1" aria-hidden="true">{{journeyDates[1].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{journeyDates[1].format(\'MMMM\')}}</p></div></div></div><div class="large-2 columns drop-down-container"><div class="row"><div class="small-12 medium-6 large-12 columns drop-down-container"><div id="sb-FlightAndHotel-pax-mix" class="drop-down-selection" tabindex="21" data-ng-click="toggleTravellerRoomMixPicker()" data-ng-keypress="roomSelectionKeyPress($event, toggleTravellerRoomMixPicker)" title="{{getRoomMixSelectionText()}}" aria-label="{{constants.PAX_SELECTOR_LABEL}} {{getRoomMixSelectionText()}}" role="button"><img data-ng-src="images/bed.svg" class="bed" alt="" aria-hidden="true"> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-rooms" aria-hidden="true"></span> <span class="selection input-text-styling" aria-hidden="true">{{getRoomMixSelectionText()}}</span></div></div><div class="small-12 medium-6 large-12 columns drop-down-container"><div id="sb-flightandhotel-travel-class" class="drop-down-selection" tabindex="22" data-ng-click="toggleTravelClassPicker()" data-ng-keypress="keyPress($event, toggleTravelClassPicker)" title="{{getTravelClassSelectionText()}}" aria-label="{{constants.TRAVEL_CLASS_SELECTOR_LABEL}} {{getTravelClassSelectionText()}}" role="button"><span class="travel-class-icon" aria-hidden="true" data-icon="&#xe604;"></span> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-travelClass" aria-hidden="true"></span> <span class="selection input-text-styling" aria-hidden="true">{{getTravelClassSelectionText()}}</span></div></div></div></div><div class="large-2 small-12 columns search-button-container"><button type="button" data-ng-click="SP.submitSearchForm()" aria-disabled="{{!SP.isSearchEnabled()}}" data-ng-class="{\'disabled\' : !SP.isSearchEnabled()}" class="primary search-button" tabindex="23" data-icon="&#xe800;" aria-label="{{\'Searchbar-searchButtonAriaLabel\' | baResourceBundleDynamic}}"></button> <a class="hide-for-medium-up close-button" data-ng-click="expandSearchBar()" data-ba-resource-bundle-static="" data-key="Searchbar-closeSearch"></a></div></div></div></div><div class="row cross-fade" data-ng-if="userChoice === \'HotelOnly\'" style="width: 100%;"><div class="small-12 large-12 columns search-section"><div class="row"><div class="large-6 columns"><div class="row"><div class="small-12 columns from-to-field"><div data-typeahead="" data-input-value="{{SP.searchPanelViewModel.destination.locationValue}}" data-label-key="typeahead-destination" data-value-field="locationValue" data-class-name="destination inverted" data-error-message="errorMessage.destination" data-get-suggestions="SP.updateDestinationSuggestions(value, next)" data-suggestion-selected="SP.updateDestination(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-user-choice="userChoice" data-aria-label-key="typeahead-searchBarToFieldAriaLabel" data-tab-index="17" data-field-name="destination" class="search-field"></div></div></div><div class="small-12 columns drop-down-container hotel-only-pax-mix"><div id="sb-HotelOnly-pax-mix" class="drop-down-selection" tabindex="18" data-ng-click="toggleTravellerRoomMixPicker()" data-ng-keypress="roomSelectionKeyPress($event, toggleTravellerRoomMixPicker)" title="{{getRoomMixSelectionText()}}" aria-label="{{constants.PAX_SELECTOR_LABEL}} {{getRoomMixSelectionText()}}" role="button"><img data-ng-src="images/bed.svg" class="bed" alt="" aria-hidden="true"> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-rooms" aria-hidden="true"></span> <span class="selection input-text-styling" aria-hidden="true">{{getRoomMixSelectionText()}}</span></div></div></div><div class="small-6 large-2 columns date-container outbound"><div class="outbound date-selection" tabindex="19" id="hotelonly-outbound-date-selector" data-ng-click="openDatepicker(false)" data-ng-keydown="openDatepicker(false, $event)" aria-label="{{constants.DATE_SELECTOR_CHECKIN_LABEL}} {{journeyDates[0].format(\'DD\')}} {{\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic}}" role="button"><div class="journey-type bold" data-ba-resource-bundle-static="" data-key="Searchbar-checkIn" aria-hidden="true"></div><div class="date h1" aria-hidden="true">{{journeyDates[0].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{journeyDates[0].format(\'MMMM\')}}</p></div></div><div class="small-6 large-2 columns date-container"><div class="date-selection" tabindex="20" data-ng-click="openDatepicker(true)" data-ng-keydown="openDatepicker(true, $event)" id="hotelonly-inbound-date-selector" aria-label="{{constants.DATE_SELECTOR_CHECKOUT_LABEL}} {{journeyDates[1].format(\'DD\')}} {{journeyDates.length <= 1 ? \'Add return\' : (\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic)}}" role="button"><div class="journey-type bold" data-ng-if="journeyDates.length <= 1" data-ba-resource-bundle-static="" data-key="Searchbar-addReturn" aria-hidden="true"></div><div class="journey-type bold" data-ng-if="journeyDates.length > 1" data-ba-resource-bundle-static="" data-key="Searchbar-checkOut" aria-hidden="true"></div><div data-ng-if="journeyDates.length <= 1" class="date add-date h1" aria-hidden="true"><span aria-hidden="true" data-icon="&#xe61b;"></span></div><div data-ng-if="journeyDates.length > 1"><div class="date h1" aria-hidden="true">{{journeyDates[1].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{journeyDates[1].format(\'MMMM\')}}</p></div></div></div><div class="large-2 small-12 columns search-button-container"><button type="button" data-ng-click="SP.submitSearchForm()" aria-disabled="{{!SP.isSearchEnabled()}}" data-ng-class="{\'disabled\' : !SP.isSearchEnabled()}" class="primary search-button" tabindex="21" data-icon="&#xe800;" aria-label="{{\'Searchbar-searchButtonAriaLabel\' | baResourceBundleDynamic}}"></button> <span class="close-button hotel-only-error-text extra-small hide-for-medium-up" data-ng-if="userChoice === \'HotelOnly\' && journeyDates[0].isSame(journeyDates[1])" data-ba-resource-bundle-static="" data-key="Searchbar-hotel-only-information-text"></span><span data-ng-if="isHotlineInformationRetrieved" class="hide-for-medium-up close-button">{{\'Searchbar-hotline-count\' | baResourceBundleDynamic: hotlineCountInformation}}</span> <a class="hide-for-medium-up close-button" data-ng-click="expandSearchBar()" data-ba-resource-bundle-static="" data-key="Searchbar-closeSearch"></a></div></div><div class="row show-for-medium-up" data-ng-if="isHotlineInformationRetrieved"><div class="small-12 columns hotline-booking-count"><span>{{\'Searchbar-hotline-count\' | baResourceBundleDynamic: hotlineCountInformation}}</span></div></div></div></div></div></form></div>'),
$templateCache.put("ba-searchbar/templates/_flight-only-section.html",'<div class="small-12 columns search-section-container" data-ng-class="{\'change-search-mod\': isChangeSearch}"><form name="searchForm" novalidate="novalidate"><div aria-labelledby="flightTab" id="flightPanel" role="tabpanel" class="search-form"><div class="row" data-ng-if="!flightOnly"><div class="small-12 medium-12 columns search-type"><div class="row"><div class="small-12 columns"><span class="extra-small upsell-fade show-for-medium-up hide-for-large-up" data-ng-if="userChoice === \'Flight\' && isNotStaffCug && (showFlightHotelUpsell || showFlightCarUpsell)" data-ba-resource-bundle-static="" data-key="Searchbar-hotel-car-information-text"></span></div></div><div class="row"><div ng-if="cugName" class="small-12 medium-12 large-6 columns float-right"><div class="cug-name"><h3 title="{{cugName}}">{{cugName}}</h3></div></div><div class="small-12 medium-8 large-6 columns padding-zero-for-small float-left"><p class="selected" data-ba-resource-bundle-static="" data-key="Searchbar-flights" aria-hidden="true"></p><p data-adobe-add-tracking-to-child-href=""><a class="multicity-link" data-analytics-data="{source:\'PHP-plantrip-desktop\'}" data-ba-teamsite-url="" data-pageid="fx" data-queryparams="eId=111024" data-ba-resource-bundle-static="" data-key="Searchbar-multiCity" tabindex="{{ resetTabIndex == 0? resetTabIndex : 15}}"></a></p><p data-ba-resource-bundle-static="" data-key="Searchbar-concur" data-ng-show="concur" data-ng-click="SP.setUserChoice(\'Concur\', \'click\')" tabindex="16" data-ng-keydown="SP.setUserChoice(\'Concur\',$event)" data-ng-class="{\'selected\' : (userChoice === \'Concur\')}"></p></div><div class="small-12 medium-4 large-6 columns padding-zero-for-small"><span class="concur-heading" data-ng-show="userChoice === \'Concur\'"><span data-ba-resource-bundle-static="" data-key="Searchbar-sync"></span> <img data-ng-src="images/SAP_Concur_Logo.png" alt="concur Logo"></span> <span class="disclaimer-text extra-small upsell-fade show-for-large-up" data-ng-if="userChoice === \'Flight\' && isNotStaffCug && (showFlightHotelUpsell || showFlightCarUpsell)" data-ba-resource-bundle-static="" data-key="Searchbar-hotel-car-information-text"></span></div></div></div></div><div class="row" data-ng-if="flightOnly"><div class="small-12 medium-12 columns search-type"><div class="row"><div ng-if="cugName" class="small-12 medium-12 large-6 columns float-right"><div class="cug-name"><h3 title="{{cugName}}">{{cugName}}</h3></div></div><div data-ng-if="!hideCloseButton" class="small-1 medium-1 large-1 columns search-close-button-container float-right"><a href="javascript:void(0)" data-ng-show="isChangeSearch" class="search-close-button" data-icon="&#xe610;" data-ng-click="closeChangeSearch()" aria-label="{{\'Searchbar-closeBtn\' | baResourceBundleDynamic }}"></a></div><div class="small-11 medium-7 large-6 columns padding-zero-for-small float-left"><h2 data-ng-show="isChangeSearch" class="change-Search-Heading" data-ba-resource-bundle-static="" data-key="Searchbar-changeSearch"></h2><div><p data-ba-resource-bundle-static="" data-key="Searchbar-flights" class="searchbar-flights-tab" data-ng-click="SP.setUserChoice(\'Flight\', \'click\')" tabindex="{{ resetTabIndex == 0? resetTabIndex : 14}}" data-ng-keydown="SP.setUserChoice(\'Flight\',$event)" data-ng-class="{\'selected\' : (userChoice === \'Flight\')}"></p><p data-adobe-add-tracking-to-child-href=""><a class="multicity-link" data-analytics-data="{source:\'PHP-plantrip-desktop\'}" data-ba-teamsite-url="" data-pageid="fx" data-queryparams="eId=111024" data-ba-resource-bundle-static="" data-key="Searchbar-multiCity" tabindex="{{ resetTabIndex == 0? resetTabIndex : 15}}"></a></p></div></div></div></div></div><div class="row"><div class="small-12 large-12 columns search-section"><div class="row"><div class="large-4 columns"><div class="row"><div class="small-12 columns from-to-field"><div data-ng-if="userChoice === \'Flight\' || userChoice === \'Concur\'" data-typeahead="" data-input-value="{{SP.searchPanelViewModel.origin.locationValue}}" data-label-key="typeahead-from" data-value-field="locationValue" data-class-name="from inverted {{SP.searchPanelViewModel.origin.locationValue.length > 0 ? \'ng-not-empty\' : \'\'}}" data-error-message="errorMessage.origin" data-get-suggestions="SP.updateOriginSuggestions(value, next)" data-suggestion-selected="SP.updateOrigin(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-user-choice="SP.userChoice" data-field-name="from" data-aria-label-key="typeahead-searchBarFromFieldAriaLabel" data-availability-error="errorMessage.showInvalidWarning" data-tab-index="{{ resetTabIndex == 0? resetTabIndex : 17 }}" class="search-field first-search-field"></div></div></div><div class="row"><div class="small-12 columns from-to-field"><div data-ng-if="userChoice === \'Flight\' || userChoice===\'Concur\'" data-typeahead="" data-input-value="{{SP.searchPanelViewModel.destination.locationValue}}" data-label-key="typeahead-to" data-value-field="locationValue" data-class-name="to inverted {{SP.searchPanelViewModel.destination.locationValue.length > 0 ? \'ng-not-empty\' : \'\'}}" data-error-message="errorMessage.destination" data-get-suggestions="SP.updateDestinationSuggestions(value, next)" data-suggestion-selected="SP.updateDestination(selection)" data-flight-not-available-error="errorMessage.flightNotAvailable" data-user-choice="userChoice" data-field-name="to" data-aria-label-key="typeahead-searchBarToFieldAriaLabel" data-availability-error="errorMessage.showInvalidWarning" data-tab-index="{{ resetTabIndex == 0 ? resetTabIndex : 18 }}" class="search-field"></div></div></div><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning" data-ng-if="errorMessage.flightNotAvailable"><span data-ba-resource-bundle-static="" data-key="{{errorMessage.flightNotAvailable}}"></span></div><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning hide-for-large-up" data-ng-if="errorMessage.availabilityError"><span data-ba-resource-bundle-static="" data-key="Searchbar-FlightNotAvailableOriginDestination"></span> <a class="back-to-homepage-link-mobile" href="https://ba.com" data-ba-resource-bundle-static="" data-key="Searchbar-backToHomepage"></a></div><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning hide-for-large-up" data-ng-if="errorMessage.unexpectedError"><span data-ba-resource-bundle-static="" data-key="Searchbar-FlightNotAvailableUnexpectedError"></span> <a class="back-to-homepage-link-mobile" href="https://ba.com" data-ba-resource-bundle-static="" data-key="Searchbar-backToHomepage"></a></div></div><div class="small-6 large-2 columns date-container outbound"><div class="outbound date-selection" tabindex="{{ resetTabIndex == 0 ? resetTabIndex : 19 }}" id="flight-outbound-date-selector" data-ng-click="openDatepicker(false)" data-ng-keydown="openDatepicker(false, $event)" aria-label="{{constants.DATE_SELECTOR_DEPART_LABEL}} {{journeyDates[0].format(\'DD\')}} {{\'Searchbar-month-\'+(journeyDates[0] - 0 | date:\'M\') | baResourceBundleDynamic}}" role="button"><div class="journey-type bold" data-ba-resource-bundle-static="" data-key="Searchbar-outbound" aria-hidden="true"></div><div class="date h1" aria-hidden="true">{{journeyDates[0].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{\'Searchbar-month-\'+(journeyDates[0] - 0 | date:\'M\') | baResourceBundleDynamic}}</p></div></div><div class="small-6 large-2 columns date-container"><button class="clear-return-date" aria-label="{{constants.REMOVE_RETURN_LABEL}}" data-ng-if="journeyDates.length > 1" data-ng-click="clearReturnDate()" data-ng-keydown="clearReturnDate($event.keyCode)" type="button" tabindex="{{ resetTabIndex == 0? resetTabIndex : 21 }}" data-icon="&#xe610;"></button><div class="date-selection" tabindex="{{ resetTabIndex == 0 ? resetTabIndex : 20}}" data-ng-click="openDatepicker(true)" data-ng-keydown="openDatepicker(true, $event)" id="flight-inbound-date-selector" aria-label="{{constants.DATE_SELECTOR_RETURN_LABEL}} {{journeyDates[1].format(\'DD\')}} {{journeyDates.length <= 1 ? \'Add return\' : (\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic)}}" role="button"><div class="journey-type bold" data-ng-if="journeyDates.length <= 1" data-ba-resource-bundle-static="" data-key="Searchbar-addReturn" aria-hidden="true"></div><div class="journey-type bold" data-ng-if="journeyDates.length > 1" data-ba-resource-bundle-static="" data-key="Searchbar-returnFlight" aria-hidden="true"></div><div data-ng-if="journeyDates.length <= 1" class="date add-date h1" aria-hidden="true"><span aria-hidden="true" data-icon="&#xe61b;"></span></div><div data-ng-if="journeyDates.length > 1"><div class="date h1" aria-hidden="true">{{journeyDates[1].format(\'DD\')}}</div><p class="month" aria-hidden="true">{{\'Searchbar-month-\'+(journeyDates[1] - 0 | date:\'M\') | baResourceBundleDynamic}}</p></div></div></div><div class="large-2 columns drop-down-container"><div class="row"><div class="small-12 medium-6 large-12 columns drop-down-container" data-ng-hide="(userChoice === \'Concur\' || isConcur)"><div id="sb-Flight-pax-mix" class="drop-down-selection" tabindex="{{ resetTabIndex == 0 ? resetTabIndex : 22}}" data-ng-click="togglePaxMixPicker()" data-ng-keypress="keyPress($event, togglePaxMixPicker)" title="{{getPaxMixSelectionText()}}" aria-label="{{constants.PAX_SELECTOR_LABEL}} {{getPaxMixSelectionText()}}" role="button"><img data-ng-src="images/avatar_standard.svg" aria-hidden="true" alt=""> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-passengers" aria-hidden="true"></span> <span class="selection input-text-styling" aria-hidden="true">{{getPaxMixSelectionText()}}</span></div></div><div class="small-12 medium-6 large-12 hide-for-small-only columns drop-down-container" data-ng-if="(userChoice === \'Concur\' || isConcur)"><div class="drop-down-selection concur" tabindex="{{ resetTabIndex == 0? resetTabIndex : 22}}" aria-label="{{constants.TRAVEL_CLASS_SELECTOR_LABEL}} {{getPaxMixSelectionText()}}" role="button"><img data-ng-src="images/avatar_standard.svg" aria-hidden="true" alt=""> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-passengers" aria-hidden="true"></span> <span class="selection input-text-styling" data-ba-resource-bundle-static="" data-key="Searchbar-concurPaxCount" aria-hidden="true"></span></div></div><div class="small-12 medium-6 large-12 columns drop-down-container"><div id="sb-flight-travel-class" class="drop-down-selection" tabindex="{{ resetTabIndex == 0? resetTabIndex : 23 }}" data-ng-click="toggleTravelClassPicker()" data-ng-keypress="keyPress($event, toggleTravelClassPicker)" title="{{getTravelClassSelectionText()}}" aria-label="{{constants.TRAVEL_CLASS_SELECTOR_LABEL}} {{getTravelClassSelectionText()}}" role="button"><span class="travel-class-icon" aria-hidden="true" data-icon="&#xe604;"></span> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-travelClass" aria-hidden="true"></span> <span class="selection input-text-styling" aria-hidden="true">{{getTravelClassSelectionText()}}</span></div></div></div><div class="row"><div class="small-12 columns show-for-small-only" data-ng-if="(userChoice === \'Concur\')" tabindex="{{ resetTabIndex == 0? resetTabIndex : 23 }}"><div class="drop-down-selection concur" tabindex="{{ resetTabIndex == 0? resetTabIndex : 23 }}" aria-label="{{constants.TRAVEL_CLASS_SELECTOR_LABEL}} {{getTravelClassSelectionText()}}" role="button"><img data-ng-src="images/avatar_standard.svg" aria-hidden="true" alt=""> <span class="label-font-style" data-ba-resource-bundle-static="" data-key="Searchbar-passengers" aria-hidden="true"></span> <span class="selection input-text-styling" data-ba-resource-bundle-static="" data-key="Searchbar-concurPaxCount" aria-hidden="true"></span></div></div></div></div><div class="columns small-12 upsell-container" data-ng-if="(showFlightHotelUpsell || showFlightCarUpsell) && userSelection.selectedCabin === SP.SearchBarConstants.DEFAULT_CABIN_CLASS"><div class="upsell-heading extra-small-text"><span data-ba-resource-bundle-static="" data-key="Searchbar-combineSave"></span></div><div class="row upsell-section"><div class="columns upsell-column-space" data-ng-class="{\'small-12\' : !showFlightCarUpsell, \'small-6\' : showFlightCarUpsell}" data-ng-if="showFlightHotelUpsell" data-ng-click="SP.setUserChoice(\'FlightAndHotel\', \'click\')"><a href="#" class="upsell-button small-text"><span class="upsell-type-heading" data-ba-resource-bundle-static="" data-key="Searchbar-flightPlusHotel"></span> <span class="upsell-type-price"><span data-ba-resource-bundle-static="" data-key="Searchbar-from"></span> <span class="price h3 bold">{{SP.searchPanelViewModel.flightHotelUpsell}}</span> <span data-ba-resource-bundle-static="" data-key="Searchbar-pp"></span></span></a></div><div class="columns upsell-column-space" data-ng-class="{\'small-12\' : !showFlightHotelUpsell, \'small-6 \' : showFlightHotelUpsell}" data-ng-if="showFlightCarUpsell" data-ng-click="SP.setUserChoice(\'FlightAndCar\', \'click\')"><a href="#" class="upsell-button small-text"><span class="upsell-type-heading" data-ba-resource-bundle-static="" data-key="Searchbar-flightPlusCar"></span> <span class="upsell-type-price"><span data-ba-resource-bundle-static="" data-key="Searchbar-from"></span> <span class="price h3 bold">{{SP.searchPanelViewModel .flightCarUpsell}}</span> <span data-ba-resource-bundle-static="" data-key="Searchbar-pp"></span></span></a></div></div></div><div class="large-2 small-12 columns search-button-container" data-ng-if="showFlightOnlyUpsell && (userSelection.selectedCabin === SP.SearchBarConstants.DEFAULT_CABIN_CLASS)"><button type="button" data-ng-click="SP.submitSearchForm()" aria-disabled="{{!SP.isSearchEnabled()}}" data-ng-class="{\'disabled\' : !SP.isSearchEnabled()}" class="primary search-button show-upsell" tabindex="{{ resetTabIndex == 0? resetTabIndex : 24}}" data-icon="&#xe800;" aria-label="{{\'Searchbar-searchButtonAriaLabel\' | baResourceBundleDynamic}}"><span class="small-text hide-for-medium-up"><span data-ba-resource-bundle-static="" data-key="Searchbar-continueWithFlight"></span> <span class="price h3 bold">{{SP.searchPanelViewModel.flightOnlyUpsell}}</span> <span data-ba-resource-bundle-static="" data-key="Searchbar-pp1"></span></span></button> <span class="close-button extra-small upsell-fade hide-for-medium-up" data-ng-if="userChoice === \'Flight\' && isNotStaffCug && (showFlightHotelUpsell || showFlightCarUpsell)" data-ba-resource-bundle-static="" data-key="Searchbar-hotel-car-information-text"></span> <a class="hide-for-medium-up close-button" data-ng-click="expandSearchBar()" data-ba-resource-bundle-static="" data-key="Searchbar-closeSearch"></a></div><div class="large-2 small-12 columns search-button-container" data-ng-if="!(showFlightOnlyUpsell)"><button type="button" data-ng-click="SP.submitSearchForm()" aria-disabled="{{!SP.isSearchEnabled()}}" class="primary search-button" tabindex="{{ resetTabIndex == 0? resetTabIndex : 25}}" data-ng-class="{\'disabled\' : !SP.isSearchEnabled()}" data-icon="&#xe800;" aria-label="{{\'Searchbar-searchButtonAriaLabel\' | baResourceBundleDynamic}}"></button> <span data-ng-if="isHotlineInformationRetrieved" class="hide-for-medium-up close-button">{{\'Searchbar-hotline-count\' | baResourceBundleDynamic: hotlineCountInformation}}</span> <a class="hide-for-medium-up close-button" data-ng-click="expandSearchBar()" data-ba-resource-bundle-static="" data-key="Searchbar-closeSearch"></a></div></div><div class="row show-for-large-up"><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning error-margin-left" data-ng-if="errorMessage.availabilityError"><span data-ba-resource-bundle-static="" data-key="Searchbar-FlightNotAvailableOriginDestination"></span> <a class="back-to-homepage-link" href="https://ba.com" data-ba-resource-bundle-static="" data-key="Searchbar-backToHomepage" tabindex="0"></a></div><div role="alert" aria-live="assertive" class="dropdown-error invalid-warning error-margin-left" data-ng-if="errorMessage.unexpectedError"><span data-ba-resource-bundle-static="" data-key="Searchbar-FlightNotAvailableUnexpectedError"></span> <a class="back-to-homepage-link" href="https://ba.com" data-ba-resource-bundle-static="" data-key="Searchbar-backToHomepage" tabindex="0"></a></div></div><div class="row show-for-medium-up" data-ng-if="isHotlineInformationRetrieved"><div class="small-12 columns hotline-booking-count"><span>{{\'Searchbar-hotline-count\' | baResourceBundleDynamic: hotlineCountInformation}}</span></div></div></div></div></div></form></div>'),$templateCache.put("ba-searchbar/templates/_product-tabs.html",'<ul role="tablist" data-ng-class="{\'mobile-tabs\': !isSearchCollapsed}"><li class="product-wrapper" id="flightTab" data-ng-click="SP.setUserChoice(\'Flight\', \'click\')" aria-controls="flightPanel" data-ng-keydown="SP.setUserChoice(\'Flight\',$event)" data-ng-class="{\'mobile-tab\': !isSearchCollapsed}"><div class="product-tab" tabindex="11" role="tab" data-ng-focus="FlightFocused=true" data-ng-blur="FlightFocused=false" data-ng-mouseenter="FlightFocused=true" data-ng-mouseleave="FlightFocused=false" aria-selected="{{userChoice === \'Flight\' || userChoice === \'Concur\'}}" data-ng-class="{\'selected\' : userChoice === \'Flight\' || userChoice === \'Concur\' , \'show-upsell-tab flight-upsell\' : showFlightOnlyUpsell, \'focused\': FlightFocused}"><img data-ng-src="images/plane_circle.svg" alt=""> <span class="product-type h5 bold">{{showFlightOnlyUpsell ? \'Searchbar-flightOnly\' : \'Searchbar-flight\'|baResourceBundleDynamic}}</span> <span data-ng-if="showFlightOnlyUpsell" class="combine-trip small-text upsell-fade">{{SP.searchPanelViewModel.flightOnlyCabin |baResourceBundleDynamic}}</span> <span data-ng-if="showFlightOnlyUpsell" class="upsell-price-outer small-text upsell-fade"><span data-ba-resource-bundle-static="" data-key="Searchbar-from"></span> <span class="upsell-tab-price h5 bold">{{SP.searchPanelViewModel.flightOnlyUpsell}}</span> <span data-ba-resource-bundle-static="" data-key="Searchbar-pp"></span></span></div><img class="product-arrow droplet" data-ng-src="images/open-arrow-white.svg" data-ng-if="userChoice === \'Flight\' || userChoice === \'Concur\'" data-ng-class="{ \'hide-for-small-only\' : !isSearchCollapsed}" alt=""></li><li class="product-wrapper" id="flightAndHotelTab" data-ng-keydown="SP.setUserChoice(flightAndHotel,$event)" data-ng-click="SP.setUserChoice(flightAndHotel, \'click\')" aria-controls="flightAndHotelPanel" data-ng-class="{\'mobile-tab\': !isSearchCollapsed}"><div class="product-tab" tabindex="12" role="tab" data-ng-focus="FlightAndHotelFocused=true" data-ng-blur="FlightAndHotelFocused=false" data-ng-mouseenter="FlightAndHotelFocused=true" data-ng-mouseleave="FlightAndHotelFocused=false" aria-selected="{{userChoice === \'FlightAndHotel\' || userChoice === \'HotelOnly\'}}" data-ng-class="{\'selected\' : userChoice === \'FlightAndHotel\' || userChoice === \'HotelOnly\', \'show-upsell-tab hotel-upsell\' : showFlightHotelUpsell, \'focused\': FlightAndHotelFocused}"><div class="hide-for-medium-up"><img alt="Flight And Hotel" data-ng-src="images/bed_circle.svg"></div><div class="show-for-medium-up"><img data-ng-src="{{showFlightHotelUpsell ? \'images/bed_white.svg\' : \'images/bed_circle.svg\'}}" alt=""></div><span class="product-type h5 bold"><span data-ng-if="isNotStaffCug">{{\'Searchbar-flight\'|baResourceBundleDynamic}} <span class="plus">{{\'Searchbar-plusSymbol\'|baResourceBundleDynamic}}</span></span> {{\'Searchbar-hotel\'|baResourceBundleDynamic}}</span> <span data-ng-if="showFlightHotelUpsell" class="combine-trip small-text upsell-fade" data-ba-resource-bundle-static="" data-key="Searchbar-combine-and-save"></span> <span data-ng-if="showFlightHotelUpsell" class="upsell-price-outer small-text upsell-fade"><span data-ba-resource-bundle-static="" data-key="Searchbar-from"></span> <span class="upsell-tab-price h5 bold">{{SP.searchPanelViewModel.flightHotelUpsell}}</span> <span data-ba-resource-bundle-static="" data-key="Searchbar-pp"></span></span></div><img class="product-arrow droplet" data-ng-src="images/open-arrow-white.svg" data-ng-if="userChoice === \'FlightAndHotel\' || userChoice === \'HotelOnly\'" data-ng-class="{ \'hide-for-small-only\' : !isSearchCollapsed}" alt=""></li><li class="product-wrapper" id="flightAndCarTab" data-ng-keydown="SP.setUserChoice(flightAndCar, $event)" data-ng-click="SP.setUserChoice(flightAndCar, \'click\')" aria-controls="flightAndCarPanel" data-ng-class="{\'mobile-tab\': !isSearchCollapsed}"><div class="product-tab" tabindex="13" role="tab" data-ng-focus="FlightAndCarFocused=true" data-ng-blur="FlightAndCarFocused=false" data-ng-mouseenter="FlightAndCarFocused=true" data-ng-mouseleave="FlightAndCarFocused=false" aria-selected="{{userChoice === \'FlightAndCar\' || userChoice === \'CarOnly\'}}" data-ng-class="{\'selected\' : userChoice === \'FlightAndCar\' || userChoice === \'CarOnly\', \'show-upsell-tab car-upsell\': showFlightCarUpsell, \'focused\': FlightAndCarFocused}"><div class="hide-for-medium-up"><img alt="Flight And Car" data-ng-src="images/car_circle.svg"></div><div class="show-for-medium-up"><img data-ng-src="{{showFlightCarUpsell ? \'images/car_white.svg\' : \'images/car_circle.svg\'}}" alt=""></div><span class="product-type h5 bold"><span data-ng-if="isNotStaffCug">{{\'Searchbar-flight\'|baResourceBundleDynamic}} <span class="plus">{{\'Searchbar-plusSymbol\'|baResourceBundleDynamic}}</span></span> {{\'Searchbar-car\'|baResourceBundleDynamic}}</span> <span data-ng-if="showFlightCarUpsell" class="combine-trip small-text upsell-fade" data-ba-resource-bundle-static="" data-key="Searchbar-combine-and-save"></span> <span data-ng-if="showFlightCarUpsell" class="upsell-price-outer small-text upsell-fade"><span data-ba-resource-bundle-static="" data-key="Searchbar-from"></span> <span class="upsell-tab-price h5 bold">{{SP.searchPanelViewModel.flightCarUpsell}}</span> <span data-ba-resource-bundle-static="" data-key="Searchbar-pp"></span></span></div><img class="product-arrow droplet" data-ng-src="images/open-arrow-white.svg" data-ng-if="userChoice === \'FlightAndCar\' || userChoice === \'CarOnly\'" data-ng-class="{ \'hide-for-small-only\' : !isSearchCollapsed}" alt=""></li></ul>'),$templateCache.put("ba-searchbar/templates/cabin-type.html",'<form><legend class="hidden-field-legend">{{inputName}}</legend><div class="row"><div class="columns small-12" data-ng-repeat="item in availableResults track by item.value"><input type="radio" id="{{item.value}}" data-ng-model="$parent.selectedValue" data-ng-value="item.value" name="{{inputName}}" data-dynamic-name="" checked=""> <label for="{{item.value}}" class="radio-button bold">{{item.resourceKey | baResourceBundleDynamic}}</label></div></div></form>'),$templateCache.put("ba-searchbar/templates/custom-trip-modal.html",'<div><div data-pop-up-directive="" class="pop-up-modal-custom custom-trip" data-show="showCustomTripModal" data-position-adjustment-values="popUpAdjustmentValues" data-selector-id="getSelectorElement(\'custom-trip\')" data-pop-up-id="getSelectorElement(\'custom-trip\') + \'-pop-up\'" data-pop-up-height="400" data-pop-up-width="330" data-restrict-exit-functionality="true"><div class="pop-up-dialog-content"><p class="h5" data-ba-resource-bundle-static="" data-key="Searchbar-customTripHeading"></p><ul><li data-ba-resource-bundle-static="" data-key="Searchbar-customTripAttributeOne"></li><li data-ba-resource-bundle-static="" data-key="Searchbar-customTripAttributeTwo"></li><li data-ba-resource-bundle-static="" data-key="Searchbar-customTripAttributeThree"></li><li data-ba-resource-bundle-static="" data-key="Searchbar-customTripAttributeFour"></li></ul></div><button class="pop-up-dialog-button" data-ng-click="navigateToCustomTrip()" data-ba-resource-bundle-static="" data-key="Searchbar-startCustomTrip"></button> <button class="close-pop-up-modal custom-trip" aria-label="Close custom trip modal" data-tab-index="10" data-ng-click="closeCustomTrip()" data-ng-keydown="closeCustomTrip($event.keyCode)" data-icon="&#xe610;"></button></div></div>'),$templateCache.put("ba-searchbar/templates/datepicker.html",'<div><div data-pop-up-directive="" class="pop-up-modal-custom datepicker-pop-up" data-show="dateObject.openDatepicker" data-position-adjustment-values="popUpAdjustmentValues" data-selector-id="getSelectorElement(\'date-selector\')" id="calendar-popup" data-pop-up-id="getSelectorElement(\'date-selector\') + \'-pop-up\'" data-pop-up-height="430" data-pop-up-width="456" data-restrict-exit-functionality="true" data-disable-position-adjustment="disablePositionAdjustment"><div class="pop-up-dialog-content datepicker" id="datepicker-pop-up-modal" data-datepicker="" data-ng-model="journeyDates" data-options="dateObject.datepickerOptions" data-is-return="dateObject.isReturn" data-user-choice="userChoice" data-open-datepicker="dateObject.openDatepicker" data-first-selectable-date="dateObject.afterDate" data-last-selectable-date="dateObject.beforeDate"></div><button class="close-pop-up-modal date-picker" aria-label="Close Calendar" data-tab-index="10" id="close-datepicker-selector" data-ng-click="dateObject.openDatepicker = false" data-ng-keydown="closeDatepicker($event.keyCode)" data-icon="&#xe610;"></button></div></div>'),$templateCache.put("ba-searchbar/templates/lead-driver-modal.html",'<div><div data-pop-up-directive="" class="pop-up-modal-custom popup-lead-driver" data-show="showLeadDriverModal" data-position-adjustment-values="popUpAdjustmentValues" data-selector-id="getSelectorElement(\'lead-driver-link\')" data-pop-up-id="getSelectorElement(\'lead-driver-link\') + \'-pop-up\'" data-pop-up-height="400" data-pop-up-width="320" data-restrict-exit-functionality="true"><div class="pop-up-dialog-content"><p class="h1 lead-driver-modal-popup" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-modal-title"></p><p class="lead-driver-content" data-ba-resource-bundle-static="" data-key="Searchbar-leadDriver-modal-content"></p></div><button class="close-pop-up-modal custom-trip" aria-label="Close lead driver modal" data-tab-index="10" data-ng-click="closeLeadDriverLink()" data-ng-keydown="closeLeadDriverLink($event.keyCode)" data-icon="&#xe610;"></button></div></div>'),$templateCache.put("ba-searchbar/templates/search-panel-base.html",'<div class="search-panel-container" data-ng-class="{\'mobile-search-open\' : !isSearchCollapsed, \'flight-only-cug\': isflightOnlyCug && isNotStaffCug}" data-ng-init="userChoice = \'Flight\'"><div class="row" data-ng-if="!flightOnly" data-ng-hide="isflightOnlyCug && isNotStaffCug"><div class="medium-10 medium-offset-1 large-6 large-offset-3 columns product-tabs"><div class="row" data-ng-include="\'ba-searchbar/templates/_product-tabs.html\'"></div></div></div><div class="row hide-for-medium-up" data-ng-click="expandSearchBar()" data-ng-show="isSearchCollapsed" data-ng-keydown="expandSearchBar()"><div class="small-12 columns"><div class="search-entry" tabindex="13"><span data-ng-if="isStaffCug"><span data-ba-resource-bundle-static="" data-key="Searchbar-searchEntry{{userChoice}}Cugs" data-ng-animate-swap="userChoice" class="cross-fade"></span></span> <span data-ng-if="isNotStaffCug"><span data-ba-resource-bundle-static="" data-key="Searchbar-searchEntry{{userChoice}}" data-ng-animate-swap="userChoice" class="cross-fade"></span></span> <img data-ng-src="images/search.svg" alt="Search"></div></div></div><div class="row search-bar-container" data-ng-class="{ \'show-panel\': isSearchCollapsed, \'search-bar-container-large\': userChoice === \'CarOnly\', \'search-bar-hotel-only-size\': userChoice === \'HotelOnly\', \'search-bar-car-only-size\': userChoice === \'CarOnly\', \'search-bar-car-only-size-with-dropoff\': userChoice === \'CarOnly\' && carOnly.showDropLocation}"><div data-ng-class="{\'cross-fade\': isNotStaffCug}" data-ng-if="userChoice === \'Flight\' || userChoice === \'Concur\'" data-ng-include="\'ba-searchbar/templates/_flight-only-section.html\'"></div><div data-ng-class="{\'cross-fade\': isNotStaffCug}" data-ng-if="userChoice === \'FlightAndHotel\' || userChoice === \'HotelOnly\'" data-ng-include="\'ba-searchbar/templates/_flight-and-hotel-section.html\'"></div><div data-ng-class="{\'cross-fade\': isNotStaffCug}" data-ng-if="userChoice === \'FlightAndCar\' || userChoice === \'CarOnly\'" data-ng-include="\'ba-searchbar/templates/_flight-and-car-section.html\'"></div></div><form><div data-pop-up-directive="" data-show="isPaxMixPickerOpen" data-restrict-exit-functionality="true" data-selector-id="\'sb-\'+userChoice+\'-pax-mix\'" data-pop-up-id="\'sb-\'+userChoice+\'-pax-mix-pop-up\'" data-position-adjustment-values="popUpAdjustmentValues" data-disable-position-adjustment="disablePositionAdjustment" aria-label="passenger mix picker" data-pop-up-height="430" data-pop-up-width="400" data-ng-keydown="escapePopUp($event, \'pax\')"><div class="pop-up-dialog-heading bold" data-ba-resource-bundle-static="" data-key="Searchbar-paxMixPickerHeading"></div><div class="pop-up-dialog-content" data-passenger-supermix="" id="passenger-mix" data-supermix="passengers.mix" data-rule-set="passengers.rules" data-resource-callback="getResourcesForPassengerMix(errorKey)"></div><button class="pop-up-dialog-button" data-ng-click="togglePaxMixPicker()" data-ba-resource-bundle-static="" data-key="Searchbar-paxMixPickerDialogButtonText"></button></div></form><form><div data-pop-up-directive="" data-show="isTravelClassPickerOpen" data-restrict-exit-functionality="true" data-selector-id="getSelectorElement(\'travel-class\')" data-pop-up-id="getSelectorElement(\'travel-class\')-pop-up" data-pop-up-height="430" data-pop-up-width="400" data-position-adjustment-values="popUpAdjustmentValues" data-disable-position-adjustment="disablePositionAdjustment" data-ng-keydown="escapePopUp($event, \'class\')"><div class="pop-up-dialog-heading bold" data-ba-resource-bundle-static="" data-key="Searchbar-travelClassHeading"></div><div class="pop-up-dialog-content"><div data-cabin-type="" data-selected-value="userSelection.selectedCabin" data-available-results="cabinType.availableCabinTypes" data-input-name="Cabin Type"></div><div data-ticket-type-directive="" data-selected-value="userSelection.selectedTicketType" data-available-results="ticketType.availableTicketTypes" data-input-name="Ticket Type"></div></div><button class="pop-up-dialog-button" data-ng-click="toggleTravelClassPicker()" data-ba-resource-bundle-static="" data-key="Searchbar-travelClassDialogButtonText"></button></div></form><div data-ng-if="userChoice === \'FlightAndHotel\' || userChoice === \'HotelOnly\'"><form><div class="room-mix" data-pop-up-directive="" data-show="isRoomMixPickerOpen" data-restrict-exit-functionality="true" data-position-adjustment-values="popUpAdjustmentValues" data-selector-id="\'sb-\'+userChoice+\'-pax-mix\'" data-pop-up-id="\'sb-\'+userChoice+\'-pax-mix-pop-up\'" data-pop-up-height="433" data-pop-up-width="400" aria-label="passenger mix picker" data-ng-keydown="escapePopUp($event, \'room\')"><div class="pop-up-dialog-content" data-passenger-supermix="" id="travellers-refinement" data-supermix="passengers.mix" data-rule-set="passengers.rules" data-resource-callback="getResourcesForPassengerMix(errorKey)"></div><button class="pop-up-dialog-button" data-ng-click="toggleTravellerRoomMixPicker()" data-ba-resource-bundle-static="" data-key="Searchbar-paxMixPickerDialogButtonText"></button></div></form></div><div data-ng-include="\'ba-searchbar/templates/datepicker.html\'"></div><div data-ng-if="userChoice !== \'Flight\' && userChoice !== \'Concur\'" data-ng-include="\'ba-searchbar/templates/custom-trip-modal.html\'"></div><div data-ng-if="userChoice === \'FlightAndCar\' || userChoice === \'CarOnly\'" data-ng-include="\'ba-searchbar/templates/lead-driver-modal.html\'"></div></div>'),
$templateCache.put("ba-searchbar/templates/ticket-type.html",'<form><div class="row ticket-type" data-ng-if="isLoggedOn && availableResults.length>2"><div class="columns small-12 flexible-ticket-header-container"><div class="bold" data-ba-resource-bundle-static="" data-key="Searchbar-flexibleTicket"></div><div class="penalty-fee-text small" data-ba-resource-bundle-static="" data-key="Searchbar-noPenaltyFee"></div></div><div class="columns small-12" data-ng-repeat="item in availableResults track by item.value"><input type="radio" id="{{item.value}}" data-ng-model="$parent.$parent.selectedValue" data-ng-value="item.value" name="{{inputName}}" data-dynamic-name="" checked=""> <label for="{{item.value}}" class="radio-button"><span class="bold ticket-type-resource-key">{{item.resourceKey | baResourceBundleDynamic}}</span> <span>{{item.subResourceKey | baResourceBundleDynamic}}</span></label></div></div><div class="ticket-type-container row" data-ng-if="!isLoggedOn || availableResults.length<=2"><div class="columns small-12"><div class="ticket-type-button-container"><label class="switch"><input id="ticketTypeSelector" type="checkbox" class="ticket-type-checkbox" data-ng-model="$parent.selectedValue" aria-label="{{\'Searchbar-flexibleTicket\' | baResourceBundleDynamic}}" data-ng-true-value="\'FLEXIBLE\'" data-ng-false-value="\'LOWEST\'" data-ng-keydown="switchCheckBox($event, \'ticketTypeSelector\')"> <span class="slider round"></span></label></div><div><div class="bold" data-ba-resource-bundle-static="" data-key="Searchbar-flexibleTicket"></div><div class="penalty-fee-text small" data-ba-resource-bundle-static="" data-key="Searchbar-noPenaltyFee"></div></div></div></div></form>')}]);