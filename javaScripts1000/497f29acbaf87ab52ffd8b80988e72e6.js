!function(){"use strict";function i(){return(new Date).getTime()}function r(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return t()+t(!0)+t(!0)+t()}function e(){var t=document.querySelectorAll('[type="application/ld+json"]')[0];if(!t)return[];var e=t.innerText,n=[];if(t&&e){var i=Object.keys(JSON.parse(e)),r=JSON.parse(e);i.map(function(t){var e=r[t];n.push({metaType:T,key:t,value:function(t){return!!t&&t.constructor===Object}(e)?function(t,e,n){var i=1<arguments.length&&void 0!==e?e:":",r=2<arguments.length&&void 0!==n?n:",",o="";for(var a in t)t.hasOwnProperty(a)&&(o+=""+a+i+t[a]+r);return o}(e):e})})}return n}function n(){if(b=(b=function(){var t=document.querySelectorAll("meta");return Array.from(t).filter(function(t){return null!==t.getAttribute("itemprop")||null!==t.getAttribute("property")}).reduce(function(t,e){return e.getAttribute("itemprop")&&t.push({metaType:E,key:e.getAttribute("itemprop"),value:e.getAttribute("content")}),e.getAttribute("property")&&t.push({metaType:S,key:e.getAttribute("property"),value:e.getAttribute("content")}),t},[])}()).concat(e()),function(){if(void 0!==window.dataLayer&&void 0!==window.dataLayer.push)return!0}()){var t=function(t){return t.map(function(e){return Object.keys(e).map(function(t){return{metaType:w,key:t,value:e[t]}})})[0]}(window.dataLayer);b=b.concat(t)}b=JSON.stringify(b)}function o(t,e){var n=Object.assign({},{orderSessionId:L,type:t,eventData:e,utcTimestamp:i(),eventGroupId:O,eventId:r()});return t===m&&Object.assign(n,{pageInfo:A,metaInfo:b}),n}function a(t,e){var n=1<arguments.length&&void 0!==e?e:{};G.push(o(t,n))}function u(){G=[]}function s(t){t.timeout+=1}function c(t,e){400<=e&&e<500?t.fourXX+=1:500<=e&&(t.fiveXX+=1)}function d(t){j=t}function f(t){localStorage.removeItem(H);try{localStorage.setItem(H,t)}catch(t){"QuotaExceededError"===t.name&&(D+=1)}}function l(t,e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(N.fiveXX=0,N.fourXX=0,N.timeout=0,C.fiveXX=0,C.fourXX=0,C.timeout=0,C.unsent=0,D=0,n()),0===i.status&&null===i.statusText&&(function(t){t.unsent+=1}(C),e())},i.onerror=function(){c(C,i.status),e()},i.ontimeout=function(){s(C),e()},0<X&&(i.timeout=X),i.open("POST",g+"/ingest",!0),i.setRequestHeader("Content-Type","application/json");var r=B();r&&i.setRequestHeader(H,r),i.setRequestHeader("Tracking-State",B()||j!==x?j:M),i.send(JSON.stringify({session_id:L,script_version:"101",events:t,metrics:{onload:{fourXX:N.fourXX,fiveXX:N.fiveXX,timeout:N.timeout},ingest:{fourXX:C.fourXX,fiveXX:N.fiveXX,timeout:N.timeout,unsent:C.unsent},localStorageFull:D}}))}function p(){1<(q+=1)&&window.clearInterval(Y)}var g="https://bt.signifyd.com:11103",m="PAGE_LOAD",v="CLICK",y="PAGE_VISIBILITY",h="ON_BEFORE_UNLOAD",S="OPENGRAPH",E="SCHEMA_ORG",T="JSON_LD",w="GTM_DATA_LAYER",I=parseInt("1000"),X=parseInt("1000"),_=null,R=function(){t().then(function(t){_=t.token}).catch(function(t){console.log(t)})},t=function(){return new Promise(function(e,n){var i=!0,r=setTimeout(function(){i=!1,n(),clearTimeout(r)},3e3);try{window.Shopify.api.getCart(function(t){i&&e(t),r&&clearTimeout(r)})}catch(t){n(t),console.log("error",t),i=!1,clearTimeout(r)}})},A=void 0,b=[],O=void 0,L=function(){if(window.Shopify){var t=function(t){var e=("; "+document.cookie).split("; "+t+"=");if(2==e.length)return e.pop().split(";").shift()}("cart")||_;return!t&&window.Shopify.api&&R(),t||"none"}return function(t,e){var n=document.getElementById(t);return n&&n.getAttribute(e)}("script-tag-api","data-order-session-id")}(),G=[],D=0,N={fourXX:0,fiveXX:0,timeout:0},C={fourXX:0,fiveXX:0,timeout:0,unsent:0},H="Tracking",P="RETRIEVE_ERROR",k="RETRIEVE_TIMED_OUT",x="RECEIVED",M="NOT_STORED",j="NOT_YET_RECEIVED",B=function(){return localStorage.getItem(H)},Y=void 0,q=0,U=!1;window.addEventListener("load",function(t){i(),function(){var t=window.location;A={origin:t.origin,referrer:document.referrer,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol}}(),n(),O=r(),function(){try{var t=Object.defineProperty({},"passive",{get:function(){U=!0}});window.addEventListener("test",null,t)}catch(t){}}(),a(m),K(t)});var V,F,J,W,Z,Q,z,K=function(){document.body.addEventListener("click",$,!!U&&{passive:!0}),document.addEventListener("visibilitychange",tt,!!U&&{passive:!0}),et(),Y=setInterval(function(){if(0<G.length&&q<1)try{l(G,p,u)}catch(t){p()}},3e3),function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===n.HEADERS_RECEIVED&&(f(n.getResponseHeader(H)),d(x)),4===n.readyState&&200===n.status&&e()},n.onerror=function(){d(P+"#"+n.status),c(N,n.status),t()},n.ontimeout=function(){d(k),s(N),t()},0<I&&(n.timeout=I),n.open("GET",g+"/onload",!0),B()&&n.setRequestHeader(H,B()),n.send()}(p,function(){return l(G,p,u)})},$=function(t){var e={target:{tagName:String(t.target.tagName)||null,text:String(t.target.text)||null,pathname:String(t.target.pathname)||null},eventTimestamp:t.timeStamp,type:v,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,innerHeight:window.innerHeight,innerWidth:window.innerWidth,mouseButton:t.button};a(v,e)},tt=function(t){var e={type:y,eventTimestamp:t.timeStamp,pageVisible:!document.hidden};a(y,e)},et=function(){window.onbeforeunload=function(t){var e={type:h,eventTimestamp:t.timeStamp};a(h,e),l(G,p,u)}};function nt(t,e){var n=document.getElementById(t);if(n)return n.getAttribute(e)}window.__SCRIPTTAG__=(W=!(J=["script-tag-api","sig-api"]),Z=function(t,e){var n,i=!0,r=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value;if(n=nt(s,e))return n}}catch(t){r=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}},Q=function(t,e){if(!navigator.userAgent.includes(atob("Q2hyb21lLUxpZ2h0aG91c2U="))&&!navigator.userAgent.includes(atob("R29vZ2xlIFBhZ2UgU3BlZWQgSW5zaWdodHM="))&&t){var n=document.createElement("script"),i=!1,r=document.getElementsByTagName("head")[0];n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,e())},n.setAttribute("type","text/javascript"),n.setAttribute("src",t),n.setAttribute("id","script-tag-tmx"),n.setAttribute("data-id","script-tag-tmx"),r.appendChild(n)}},z=function(){return W=!0},{init:function(){if("YOUR-SESSION-ID-HERE"!==(V=Z(J,"data-order-session-id")))if(V){F="https://imgs.signifyd.com/fp/tags.js?org_id=w2txo5aa&session_id="+V+"&pageid=2";try{Q(F,z)}catch(t){console.log("__SCRIPTTAG__ ERROR MESSAGE: unable to load new script tag.",t)}}else console.log('__SCRIPTTAG__ ERROR MESSAGE: No session ID found.\n Make sure an order session ID is set in the "data-order-session-id" attribute of the script tag.');else console.log('__SCRIPTTAG__ ERROR MESSAGE: Session ID has not been correctly set.\n Make sure an order session ID is set to a unique value in the "data-order-session-id" attribute of the script tag.\nCurrent order sessionId = '+V+"\nPlease see https://developer.signifyd.com/api/#/reference/device-fingerprint")},scriptTagHasLoaded:function(){return W}}),window.SIGNIFYD_GLOBAL=window.__SCRIPTTAG__,window.SIGNIFYD_GLOBAL.init()}();