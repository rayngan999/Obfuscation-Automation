!function(e){var t={};function r(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=6)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}},function(e,t,r){e.exports=r(5)},function(e,t){function r(e,t,r,i,o,n,s){try{var a=e[n](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(i,o)}e.exports=function(e){return function(){var t=this,i=arguments;return new Promise((function(o,n){var s=e.apply(t,i);function a(e){r(s,o,n,a,c,"next",e)}function c(e){r(s,o,n,a,c,"throw",e)}a(void 0)}))}}},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t,r){var i=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",n=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function a(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,n=Object.create(o.prototype),s=new k(i||[]);return n._invoke=function(e,t,r){var i="suspendedStart";return function(o,n){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw n;return L()}for(r.method=o,r.arg=n;;){var s=r.delegate;if(s){var a=b(s,r);if(a){if(a===u)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var d=c(e,t,r);if("normal"===d.type){if(i=r.done?"completed":"suspendedYield",d.arg===u)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(i="completed",r.method="throw",r.arg=d.arg)}}}(e,r,s),n}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=a;var u={};function d(){}function l(){}function p(){}var g={};g[o]=function(){return this};var h=Object.getPrototypeOf,v=h&&h(h(S([])));v&&v!==t&&r.call(v,o)&&(g=v);var f=p.prototype=d.prototype=Object.create(g);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function m(e,t){var i;this._invoke=function(o,n){function s(){return new t((function(i,s){!function i(o,n,s,a){var u=c(e[o],e,n);if("throw"!==u.type){var d=u.arg,l=d.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){i("next",e,s,a)}),(function(e){i("throw",e,s,a)})):t.resolve(l).then((function(e){d.value=e,s(d)}),(function(e){return i("throw",e,s,a)}))}a(u.arg)}(o,n,i,s)}))}return i=i?i.then(s,s):s()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=c(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return l.prototype=f.constructor=p,p.constructor=l,p[s]=l.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},y(m.prototype),m.prototype[n]=function(){return this},e.AsyncIterator=m,e.async=function(t,r,i,o,n){void 0===n&&(n=Promise);var s=new m(a(t,r,i,o),n);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(f),f[s]="Generator",f[o]=function(){return this},f.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},e.values=S,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],s=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var a=r.call(n,"catchLoc"),c=r.call(n,"finallyLoc");if(a&&c){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var o=i.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}},function(e,t,r){"use strict";r.r(t);var i,o=r(2),n=r.n(o),s=r(3),a=r.n(s),c=r(0),u=r.n(c),d=r(1),l=r.n(d),p={loaderUrl:"//cabeceras.vocento.com/comun/vocuser/v3/resources/images/ripple.gif",internalErrorCode:5e5,prospectSuccessCode:200015,gigyaSuccessCode:200001,prospectAlreadyRegisteredCode:200002,gigyaAlreadyRegisteredCode:200004,loaderContent:'<img style="margin: auto;" src="//cabeceras.vocento.com/comun/vocuser/v3/resources/images/ripple.gif" alt="Prospect-loader">',renderLoaderContent:'<img style="margin-left: auto; margin-right: auto;" src="//cabeceras.vocento.com/comun/vocuser/v3/resources/images/ripple.gif" alt="Prospect-loader">',backButtonValue:"Modificar datos",privacyPolicy:"20180525",subscribeLoaderText:"ApuntÃ¡ndote",paramDebug:"prospect_debug",showLogs:document.location.search.indexOf("".concat("prospect_debug","=1"))>-1},g=new(function(){function e(){u()(this,e),this._prefix="Prospect: ",this._showLogs=p.showLogs,this._env="pre"}return l()(e,[{key:"forceLogs",value:function(){"pre"===this._env&&(this._showLogs=!0)}},{key:"setEnv",value:function(e){this._env=e}},{key:"info",value:function(e){this._showLogs&&console.info(this._prefix+e)}},{key:"error",value:function(e){this._showLogs&&console.error(this._prefix+e)}},{key:"object",value:function(e,t){this._showLogs&&console.info(this._prefix+e),this._showLogs&&console.info(t)}}]),e}()),h=window.Voonto,v=function(){function e(t){u()(this,e),this.urlVoccore=t}var t,r,i;return l()(e,[{key:"getWidget",value:(i=a()(n.a.mark((function e(t){var r,i,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.require("axios");case 2:return r=e.sent,i=r.create({headers:{Accept:"application/vnd.voccore.prospect.v2"}}),e.prev=4,e.next=7,i.get("".concat(this.urlVoccore).concat("vocuser/v1/prospect/widget/").concat(t)).then((function(e){return e}));case 7:return o=e.sent,e.abrupt("return",o.data);case 11:return e.prev=11,e.t0=e.catch(4),g.error("[Prospect Library 2.0] Error al obtener el widget: ".concat(t,". ").concat(e.t0)),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(e){return i.apply(this,arguments)})},{key:"getWidgetCss",value:(r=a()(n.a.mark((function e(t){var r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.require("axios");case 2:return r=e.sent,e.prev=3,e.next=6,r.get("".concat(this.urlVoccore).concat("vocuser/v1/prospect/0600/css/widget.css/").concat(t)).then((function(e){return e}));case 6:return i=e.sent,e.abrupt("return",i.data);case 10:return e.prev=10,e.t0=e.catch(3),g.error("[Prospect Library 2.0] Error al obtener el CSS de: ".concat(t,". ").concat(e.t0)),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return r.apply(this,arguments)})},{key:"subscribe",value:(t=a()(n.a.mark((function e(t){var r,i,o,s,a,c=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]&&c[1],i="vocuser/v1/prospect/user/newsletters/subscribe/email",r&&(i="vocuser/v1/prospect/user/newsletters/multi-subscribe"),e.next=5,h.require("axios");case 5:return o=e.sent,s=o.create({headers:{"Content-Type":"application/json"}}),e.prev=7,e.next=10,s.post("".concat(this.urlVoccore).concat(i),{email:t.email,widget_id:t.widgetId,privacyPolicy:t.privacyPolicy,importSource:t.importSource,adsMedia:t.adsMedia,adsGroup:t.adsGroup,adsThirdparty:t.adsThirdparty,adsGroupThirdparty:t.adsGroupThirdparty,personalData:t.personalData,subscribeTo:t.subscribeTo}).then((function(e){return e}));case 10:return a=e.sent,e.abrupt("return",a.data);case 14:return e.prev=14,e.t0=e.catch(7),g.error("[Prospect Library 2.0] Error al suscribir el widget: ".concat(t.widgetId,". ").concat(e.t0)),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this,[[7,14]])}))),function(e){return t.apply(this,arguments)})}]),e}(),f=r(4),y=r.n(f),m=function(){function e(t){var r=t.email,i=t.firstName,o=t.lastName,n=t.zip,s=t.birthDay,a=t.birthMonth,c=t.birthYear,d=t.phoneMobile,l=t.industry,p=t.professionalHeadline,g=t.province,h=t.city,v=t.gender;u()(this,e),this._email=r,this._firstName=i,this._lastName=o,this._zip=n,this._birthDay=s,this._birthMonth=a,this._birthYear=c,this._phoneMobile=d,this._industry=l,this._professionalHeadline=p,this._province=g,this._city=h,this._gender=v}return l()(e,[{key:"email",get:function(){return this._email}},{key:"firstName",get:function(){return this._firstName}},{key:"lastName",get:function(){return this._lastName}},{key:"zip",get:function(){return this._zip}},{key:"birthDay",get:function(){return this._birthDay}},{key:"birthMonth",get:function(){return this._birthMonth}},{key:"birthYear",get:function(){return this._birthYear}},{key:"phoneMobile",get:function(){return this._phoneMobile}},{key:"industry",get:function(){return this._industry}},{key:"professionalHeadline",get:function(){return this._professionalHeadline}},{key:"province",get:function(){return this._province}},{key:"city",get:function(){return this._city}},{key:"gender",get:function(){return this._gender}}]),e}(),b=window.Voonto.getInstance(),w=function(){function e(){u()(this,e)}return l()(e,[{key:"getUserType",value:function(){return b.when("vocuser:ready").then((function(e){return e.getUserType()}))}},{key:"getGigyaUser",value:function(){b.when("vocuser:userdata").then((function(e){var t=e.responseGetAccountInfo.profile;return new m(t)}))}},{key:"autocompleteFormInputWithGigyaData",value:function(){b.when("vocuser:userdata").then((function(e){var t=e.responseGetAccountInfo.profile;if(void 0!==y()(t)&&t){var r=new m(t),i=$(".widget-prospect");i.find(".prospectEmail").val(r.email).prop("readonly",!0),i.find(".prospectFirstname").val(r.firstName).prop("readonly",!0),i.find(".prospectLastname").val(r.lastName).prop("readonly",!0),i.find(".prospectZip").val(r.zip).prop("readonly",!0),i.find(".prospectBirthday").val(r.birthDay).prop("readonly",!0),i.find(".prospectBirthmonth").val(r.birthMonth).prop("readonly",!0),i.find(".prospectBirthyear").val(r.birthYear).prop("readonly",!0),i.find(".phoneMobile").val(r.phoneMobile).prop("readonly",!0),i.find(".industry").val(r.industry).prop("readonly",!0),i.find(".professionalHeadline").val(r.professionalHeadline).prop("readonly",!0),i.find(".province").val(r.province).prop("readonly",!0),i.find(".city").val(r.city).prop("readonly",!0),i.find(".gender").val(r.gender).prop("readonly",!0)}}))}}]),e}(),_=window.Voonto,k=_.getInstance(),S=k.lookup("vocento.config.vocuser.urls"),L=function(){function e(){u()(this,e)}var t;return l()(e,[{key:"getPopUpCss",value:(t=a()(n.a.mark((function e(){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.require("axios");case 2:return t=e.sent,e.prev=3,e.next=6,t.get("".concat(S.voccoreDomain).concat("vocuser/v1/prospect/0600/css/popbox.css")).then((function(e){return e}));case 6:return r=e.sent,e.abrupt("return",r.data);case 10:return e.prev=10,e.t0=e.catch(3),g.error("[Prospect Library 2.0] Error al obtener el CSS de PopUp."+e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(){return t.apply(this,arguments)})}]),e}(),I=function(){function e(t){var r=t.widget_id,i=t.nl_code,o=t.status,n=t.subscription_type,s=t.name,a=t.testMode,c=t.body;u()(this,e),this._widgetId=r,this._status=o,this._subscriptionType=n,this._name=s,this._testMode=a,this._html=c,null!==i&&(this._nlCode=i.split(","))}return l()(e,[{key:"widgetId",get:function(){return this._widgetId}},{key:"nlCode",get:function(){return this._nlCode}},{key:"status",get:function(){return this._status}},{key:"subscriptionType",get:function(){return this._subscriptionType}},{key:"name",get:function(){return this._name}},{key:"testMode",get:function(){return this._testMode}},{key:"html",get:function(){return this._html}},{key:"css",get:function(){return this._css}}]),e}(),E=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u()(this,e),this.initializeVars(),this._env="",this._error=!1,this._eventData={widgetList:"",tagManagerMode:"",ajaxComplete:""},"undefined"!=typeof TagManager&&(this._env=window.vocento.site.env,TagManager.ready.then((function(){switch(r){case"confirmSubscription":1===confirmSubscriptionError&&(t._error=!0),t.prepareConfirmEmailTrack(widget_id,nl_code,user_id,t._error),t.sendTrack("Seteado el track de confirmaciÃ³n");break;case"unsubscribe":1!==unsubscribeSuccess&&(t._error=!0),t.prepareUnsubscribeTrack(nl_code,user_id,unsubscribeReason,tipologiaLogin,t._error,!0),t.sendTrack("Seteado el track de baja");break;case"unsubscribeValidNlId":0===validNlId&&(t.prepareUnsubscribeTrack("","","","anonimo",!0,!1),t.sendTrack("Seteado el track de error de ValidNlId"))}})))}return l()(e,[{key:"sendWidgetListTrack",value:function(e){var t=this;TagManager.ready.then((function(){t.prepareWidgetListTrack(e),t.sendTrack("Seteado el track de lista")}))}},{key:"prepareConfirmEmailTrack",value:function(e,t,r,i){this.initializeVars(),this._tgmIDGigya="prospect-"+r,this._tgmProceso=e+"_"+t,this._tgmSeccion=TagManager.get().seccion,this._tgmTipologiaLogin="prospect",this._tgmFunnel="exito-suscripcion-nl-usuario-prospect-validado",i&&(this._tgmIDGigya="",this._tgmFunnel="",this.setearErrores("Error: ".concat(e,"_").concat(t,"-no-validado-generico")))}},{key:"prepareUnsubscribeTrack",value:function(e,t,r,i,o,n){switch(this.initializeVars(),this._tgmSeccion="confirmacion-baja-prospect",this._tgmTipologiaLogin=i,this._tgmTipologiaLogin){case"prospect":this._tgmIDGigya="prospect-"+t,this._tgmFunnel="prospectbaja-".concat(r,"-").concat(e);break;case"registrado":this._tgmIDGigya=t,this._tgmCustomerService="600",this._tgmFunnel="gigyabaja-".concat(r,"-").concat(e);break;case"anonimo":this._tgmIDGigya=""}if(this._tgmProceso="baja-prospect",o){var s="-ko-baja-nl-newsletter-no-existe";n&&(s="-ko-baja-nl-usuario-no-existe"),this.setearErrores("Error:"+e+s)}}},{key:"prepareWidgetSubscriptionTrack",value:function(e,t,r,i,o,n,s){this.initializeVars(),this._tgmIDGigya=t,this._tgmSeccion=TagManager.get().seccion,this._tgmTipologiaLogin=i,this._tgmProceso=r+"_"+e,this._tgmSlot=o,this._tgmCustomerService="600",this._tgmModulosRotacion=this._eventData.widgetList,this._tgmFunnel=s,""===TagManager.get().IDGigya&&"registrado"!==i&&(this._tgmCustomerService=""),"registrado"===i&&(i="gigya-logado"),n&&this.setearErrores("Error: ".concat(r,"-").concat(e,"-ya-suscrito-nl-").concat(i))}},{key:"prepareWidgetListTrack",value:function(e){this.initializeVars(),this._tgmModulosRotacion=e.join(","),this._tgmSeccion=TagManager.get().seccion,this._tgmIDGigya=TagManager.get().IDGigya,this._tgmProcesoFinalizado="",this._tgmTipologiaLogin="anonimo",""!==this._tgmIDGigya&&(this._tgmTipologiaLogin="registrado",this._tgmCustomerService="600")}},{key:"trackSubscription",value:function(e){var t=e.auth,r=e.uid,i=e.nlCode,o=e.widgetId,n=e.tipologiaLogin,s=e.slot,a=e.error;if(t)this.prepareWidgetSubscriptionTrack(i,r,o,"registrado",s,a,"exito-suscripcion-nl-gigya-logado");else switch(n){case"PR":this.prepareWidgetSubscriptionTrack(i,"prospect-"+r,o,"prospect",s,a,"exito-suscripcion-nl-usuario-prospect");break;case"GG":this.prepareWidgetSubscriptionTrack(i,"",o,"gigya-no-logado",s,a,"exito-suscripcion-nl-gigya-no-logado");break;default:this.prepareWidgetSubscriptionTrack(i,r,o,"prospect",s,a,"exito-suscripcion-nl-usuario-prospect")}this.sendTrack("Seteado el track de suscripciÃ³n. Error:"+a)}},{key:"sendTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={modulosRotacion:this._tgmModulosRotacion,tipologiaLogin:this._tgmTipologiaLogin,IDGigya:this._tgmIDGigya,proceso:this._tgmProceso,slot:this._tgmSlot,customerService:this._tgmCustomerService,funnel:this._tgmFunnel,procesoFinalizado:this._tgmProcesoFinalizado,erroresFormulario:this._tgmErroresFormulario,seccion:this._tgmSeccion,tipoContenido:"widget"};TagManager.set(t),g.object("Track datalayer:",t),g.info(e)}},{key:"setearErrores",value:function(e){""===this._tgmErroresFormulario&&(this._tgmErroresFormulario=e,this._tgmProcesoFinalizado="si",this._tgmFunnel="")}},{key:"initializeVars",value:function(){this._tgmModulosRotacion="",this._tgmTipologiaLogin="",this._tgmIDGigya="",this._tgmProceso="",this._tgmSlot="",this._tgmCustomerService="",this._tgmFunnel="",this._tgmProcesoFinalizado="si",this._tgmErroresFormulario="",this._tgmSeccion=""}}]),e}(),M=window.Voonto,T=M.getInstance(),C=T.lookup("vocento.config.vocuser.urls"),x=T.lookup("vocento.site.media"),P=new v(C.voccoreDomain),N=new w,D=new L,R=!1,W=[],G="",j=function(){function e(t){u()(this,e),this._frontalApiService=t,this._tagManagerMode="","undefined"!=typeof tagManagerMode&&(this._tagManagerMode=tagManagerMode)}var t,r,i;return l()(e,[{key:"handleWidgetsInPage",value:function(){var e=this,t=document.querySelectorAll(".widget-prospect");return this.triggerLocatedSnippetEvents(t),this.eventLoad(),G=new E(this._tagManagerMode),new Promise((function(r,i){e._loadGlobalCss().then((function(){for(var i=[],o=0,n=t.length;o<n;o++)i.push(e._renderWidgetInSnippet(t[o]));t.length>0?Promise.all(i).then((function(){N.autocompleteFormInputWithGigyaData(),r()})):r()}))}))}},{key:"triggerLocatedSnippetEvents",value:function(e){for(var t=0,r=e.length;t<r;t++){var i={widgetId:e[t].dataset.widgetId};this._frontalApiService.triggerSnippetLocated(i)}}},{key:"_renderWidgetInSnippet",value:function(e){var t=this;return new Promise((function(r,i){t.loadWidgetCss(e.dataset.widgetId).then((function(){t.addLoaderDiv(e),t.showLoader(e),P.getWidget(e.dataset.widgetId).then((function(o){if(t.hideLoader(e),o){var n=new I(o.result);t._renderWidget(n,e),W.push(n.widgetId+"-"+n.nlCode);var s={widgetId:n.widgetId,widgetNewsletter:n.nlCode.join(","),widgetName:n.name,testMode:n.testMode,subscriptionType:n.subscriptionType,responseResult:"OK",responseStatusCode:o.statusCode,responseMessage:"Widget renderizado"};t._frontalApiService.triggerWidgetRendered(s),r()}else{var a={widgetId:e.dataset.widgetId,widgetNewsletter:"",widgetName:"",testMode:"",subscriptionType:"",responseResult:"NOK",responseStatusCode:"500",responseMessage:"Widget no renderizado"};t._frontalApiService.triggerWidgetRendered(a)}i()}))})).catch((function(){i()}))}))}},{key:"_renderWidget",value:function(e,t){var r=document.createRange().createContextualFragment(e.html),i=r.querySelector(".modal-widget-prospect");this.updateWidgetIdDataValue(t,e);var o=r.querySelector("form"),n=r.querySelector(".widget-prospect-body");this.addLoaderDiv(n,"bodyLoader"),this.setUpFormElement(o,e,t);var s=r.querySelector(".prospect-submit");this.setUpSubmitButton(s,o,e,i,t,n);var a=r.querySelector(".btn-success-widget-prospect");this.setUpSubmitButtonModal(a,e.widgetId,i,n,t);var c=r.querySelector(".close-widget-prospect");this.setUpCloseButtonModal(c,e.widgetId),this.setUpModal(i,e.widgetId,t,n);var u=document.createElement("input");this.setUpWidgetIdInput(u,e.widgetId,o);var d=document.createElement("input");this.setUpPrivacyPolicyInput(d,o);var l=document.createElement("input");this.setUpWidgetSubmitInput(l,e,o),t.appendChild(r),this.addHeightInlineModal(t,i)}},{key:"addHeightInlineModal",value:function(e,t){"inline"===e.dataset.gdprLayer&&(t.style.maxHeight=e.offsetHeight+"px",t.style.overflowY="auto")}},{key:"subscribe",value:function(e,t,r){if(void 0===e||void 0===t||void 0===r)return g.error("[Prospect Library 2.0] Error al intentar suscribir."),null;event.preventDefault();var i=!1,o=this.prepareSubscriptionData(e);t.nlCode.length>1&&(i=!0),this.addDisplayNone(e),this.showLoader(e.parentNode,p.subscribeLoaderText+"<br/>","bodyLoader");var n=document.getElementById("rtim-prospect-gdpr");null!=n&&(n.style.display="none"),this._frontalApiService.triggerWidgetRequestSent({widgetId:t.widgetId,widgetNewsletter:t.nlCode.join(","),widgetName:t.name,testMode:t.testMode,subscriptionType:t.subscriptionType,subscribeParams:{email:o.email,nlCode:o.nlCode}}),this.doSubscription(o,i,t,!1,e,r)}},{key:"doSubscription",value:function(e,t,r,i,o,n){var s=this;P.subscribe(e,t).then((function(t){var a,c=0,u="error",d="error",l="";if(null===t&&(c=p.internalErrorCode),p.internalErrorCode!==c){var g=s.recoverNewslettersInfo(t,c,d);c=g.finalStatusCode,u=g.tipologiaLogin,d=g.uid,l=g.responseMessageToUser}var h=s.checkFinalStatus(c,i,l);i=h.errorSubscription,l=h.responseMessageToUser,a=h.errorDescription,s.prepareWidgetResult(o,i,l,n),t.result.newsletters;var v=t.result.newsletters[0].nlId;void 0!==e.subscribeTo&&(v=e.subscribeTo);var f={widgetId:r.widgetId,widgetNewsletter:r.nlCode.join(","),widgetName:r.name,testMode:r.testMode,subscriptionType:r.subscriptionType,subscribeParams:{email:e.email,nlCode:v},responseStatusCode:c};switch(a){case"":s._frontalApiService.triggerWidgetResponseReceivedWithoutError(f);break;case"general":s._frontalApiService.triggerWidgetResponseReceivedWithError(f);break;case"subscribed":s._frontalApiService.triggerWidgetResponseReceivedWithSubscribedError(f)}G.trackSubscription({auth:R,uid:d,nlCode:r.nlCode,widgetId:r.widgetId,tipologiaLogin:u,slot:n.dataset.widgetSlot,error:i})}))}},{key:"prepareWidgetResult",value:function(e,t,r,i){this.addResponseDiv(i),this.setUpResponseDiv(e,t,r,i),this.hideLoader(e.parentNode,"bodyLoader"),this.addDisplayNone(e.parentNode),this.showResponseDiv(i)}},{key:"checkFinalStatus",value:function(e,t,r){var i="";return e!==p.prospectSuccessCode&&e!==p.gigyaSuccessCode&&(t=!0,i="general",r="Ha ocurrido un error, intÃ©ntalo mÃ¡s tarde",e!==p.prospectAlreadyRegisteredCode&&e!==p.gigyaAlreadyRegisteredCode||(i="subscribed",r="Ya estÃ¡s registrado a esta Newsletter")),{errorSubscription:t,responseMessageToUser:r,errorDescription:i}}},{key:"hideLoader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loader";e.querySelector("."+t).style.display="none"}},{key:"showLoader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"loader";if(void 0===e||void 0===t||void 0===r)return g.error("[Prospect Library 2.0] Error al mostrar el loader."),null;var i=e.querySelector("."+r);i.innerHTML.includes(p.subscribeLoaderText)||(i.innerHTML=t+i.innerHTML),i.style.display="block"}},{key:"setUpResponseDiv",value:function(e,t,r,i){if(void 0===e||void 0===t||void 0===r||void 0===i)return g.error("[Prospect Library 2.0] Error al preparar el div de respuesta."),null;var o=i.querySelector(".widget-prospect-response");o.innerHTML=r,t&&this.setUpErrorBackButton(o,e)}},{key:"showResponseDiv",value:function(e){e.querySelector(".widget-prospect-response").style.display="block"}},{key:"setUpErrorBackButton",value:function(e,t){var r=this;if(void 0===e||void 0===t)return g.error("[Prospect Library 2.0] Error al preparar el botÃ³n de volver."),null;var i=document.createElement("div"),o=document.createElement("input");o.type="submit",i.className="prospect-field prospect-submit",o.value=p.backButtonValue,o.addEventListener("click",(function(){r.goBackToWidget(e,t)})),i.appendChild(o),e.appendChild(i)}},{key:"recoverNewslettersInfo",value:function(e,t,r){if(void 0===e||void 0===t||void 0===r)return g.error("[Prospect Library 2.0] Error al recuperar informaciÃ³n de newsletter."),null;for(var i=e.result.newsletters,o="",n="",s=0;s<i.length&&(t=i[s].nlSubscriptionCode,o=i[s].message,n=e.result.userInfo.userType,r=e.result.userInfo.UID,t!==p.prospectSuccessCode&&t!==p.gigyaSuccessCode);s++);return{finalStatusCode:t,tipologiaLogin:n,uid:r,responseMessageToUser:o}}},{key:"addLoaderDiv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loader";if(void 0===e||void 0===t)return g.error("[Prospect Library 2.0] Error al aÃ±adir la capa de loader."),null;var r=document.createElement("div");r.style.display="none",r.style.position="relative",r.style.width="100%",r.className=t,r.classList.add("prospect-title"),r.innerHTML+=p.loaderContent,e.appendChild(r)}},{key:"addResponseDiv",value:function(e){if(void 0===e)return g.error("[Prospect Library 2.0] Error al aÃ±adir la capa de respuesta."),null;if(!e.getElementsByClassName("widget-prospect-response")||!e.getElementsByClassName("widget-prospect-response").length){var t=document.createElement("div");t.classList.add("widget-prospect-response"),e.appendChild(t)}}},{key:"setUpWidgetSubmitInput",value:function(e,t,r){if(void 0===e||void 0===t||void 0===r)return g.error("[Prospect Library 2.0] Error al preparar el botÃ³n submit."),null;e.type="submit",e.name="widget_submit",e.value="widgetSubmitInput",e.id="widgetSubmit"+t.widgetId,e.style.display="none",r.appendChild(e)}},{key:"setUpPrivacyPolicyInput",value:function(e,t){if(void 0===e||void 0===t)return g.error("[Prospect Library 2.0] Error al preparar la polÃ­tica de privacidad."),null;e.type="hidden",e.name="privacyPolicy",e.value=p.privacyPolicy,t.appendChild(e)}},{key:"setUpWidgetIdInput",value:function(e,t,r){if(void 0===e||void 0===t||void 0===r)return g.error("[Prospect Library 2.0] Error al preparar widgetIdInput."),null;e.type="hidden",e.name="widgetId",e.value=t,r.appendChild(e)}},{key:"setUpModal",value:function(e,t,r,i){var o=this;if(void 0===e||void 0===t)return g.error("[Prospect Library 2.0] Error al preparar modal."),null;if(e.id="modal-widget-prospect"+t,e.setAttribute("data-popbox-id","modal"+t),"inline"===r.dataset.gdprLayer){e.firstElementChild.firstElementChild.firstElementChild.remove(),e.classList.remove("popbox"),e.firstElementChild.classList.remove("popbox_container");var n=document.getElementById("rtim-prospect-gdpr");null!=n&&n.addEventListener("click",(function(){o.addDisplayBlock(i),o.addDisplayBlock(e.firstElementChild.firstElementChild.firstElementChild),o.addDisplayNone(e);var t=document.getElementById("rtim-prospect-gdpr");null!=t&&o.addDisplayNone(t);var r=document.getElementsByClassName("grip-header")[0];o.addDisplayBlock(r)})),e.setAttribute("data-popbox-id",""),this.addDisplayNone(e)}}},{key:"setUpCloseButtonModal",value:function(e,t){if(void 0===e||void 0===t)return g.error("[Prospect Library 2.0] Error al preparar el botÃ³n cerrar de modal."),null;e.setAttribute("data-popbox-close","modal"+t)}},{key:"setUpSubmitButtonModal",value:function(e,t,r,i,o){var n=this;if(void 0===e||void 0===t)return g.error("[Prospect Library 2.0] Error al preparar el botÃ³n submit del modal."),null;e.dataset.vocVtmId="btnsuscribirse-"+t,e.setAttribute("form",t),e.setAttribute("data-popbox-close","modal"+t);var s="widgetSubmit"+t;e.addEventListener("click",(function(){"inline"===o.dataset.gdprLayer&&(n.addDisplayBlock(i),n.addDisplayNone(r)),document.getElementById(s).click()}))}},{key:"setUpSubmitButton",value:function(e,t,r,i,o,n){var s=this;if(void 0===e||void 0===t||void 0===r.widgetId)return g.error("[Prospect Library 2.0] Error al preparar el botÃ³n submit."),null;e.dataset.vocVtmId="btnsuscribirse-"+r.widgetId,e.setAttribute("data-popbox-target","modal"+r.widgetId),e.children[0].setAttribute("type","button"),e.children[0].setAttribute("value","Continuar"),e.addEventListener("click",(function(){var a=s.checkWidgetMultiNewsletter(t),c=a[0],u=a[1];e.setAttribute("data-popbox-target","modal".concat(r.widgetId)),s.validateForm(t,e),c&&!u&&e.removeAttribute("data-popbox-target"),(c&&u||!c)&&"inline"===o.dataset.gdprLayer&&(s.addDisplayBlock(i),s.addDisplayNone(n)),void 0!==e.dataset.popboxTarget&&s._frontalApiService.triggerGdprModalShown({widgetId:r.widgetId,widgetNewsletter:r.nlCode.join(","),widgetName:r.name,testMode:r.testMode,subscriptionType:r.subscriptionType,subscribeParams:""})}))}},{key:"validateForm",value:function(e,t){e.checkValidity()||($("<input>",{type:"submit"}).hide().appendTo(e).click().remove(),t.removeAttribute("data-popbox-target"))}},{key:"checkWidgetMultiNewsletter",value:function(e){if(void 0===e)return g.error("[Prospect Library 2.0] Error al comprobar widget multinewsletter."),null;for(var t=!1,r=!1,i=0;i<e.elements.length;i++){var o=e.elements[i].type,n=e.elements[i].name;if("submit"!==o&&"newsletterCodeSelected"===n&&(t=!0,r=e.elements[i].checked),r)break}return[t,r]}},{key:"setUpFormElement",value:function(e,t,r){var i=this;if(void 0===e||void 0===t||void 0===r)return g.error("[Prospect Library 2.0] Error al actualizar el atributo data de widget."),null;void 0===r.dataset.widgetSlot&&(r.dataset.widgetSlot="no slot"),e.addEventListener("submit",(function(){i.subscribe(e,t,r)})),e.id=t.widgetId,e.setAttribute("autocomplete","off")}},{key:"updateWidgetIdDataValue",value:function(e,t){return void 0===e||void 0===t?(g.error("[Prospect Library 2.0] Error al actualizar el atributo data de widget."),null):(e.dataset.widgetId="wid-"+t.widgetId,!0===t.testMode&&(e.dataset.widgetId="wid-dev-"+t.widgetId,!0))}},{key:"goBackToWidget",value:function(e,t){if(void 0===e||void 0===t)return g.error("[Prospect Library 2.0] Error al preparar botÃ³n volver a widget."),null;var r=document.getElementById("rtim-prospect-subscribed-error");null!=r&&(r.style.display="none");var i=document.getElementsByClassName("grip-header")[0];void 0!==i&&this.addDisplayBlock(i),this.addDisplayNone(e),this.addDisplayBlock(t),this.addDisplayBlock(t.parentNode),this.hideLoader(e.parentNode)}},{key:"addDisplayNone",value:function(e){if(void 0===e)return g.error("[Prospect Library 2.0] Error al aÃ±adir display none."),null;e.style.display="none"}},{key:"addDisplayBlock",value:function(e){if(void 0===e)return g.error("[Prospect Library 2.0] Error al aÃ±adir display block."),null;e.style.display="block"}},{key:"renderWidgetOnDemand",value:function(e){var t=document.querySelectorAll("[data-widget-id='".concat(e,"']"));0!==t.length&&this._renderWidgetInSnippet(t[0]).then((function(){N.autocompleteFormInputWithGigyaData(),M.require("popbox").then((function(e){new e({blur:!0})}))}))}},{key:"prepareSubscriptionData",value:function(e){if(void 0===e)return g.error("[Prospect Library 2.0] Error al preparar los datos de suscripciÃ³n."),null;for(var t={personalData:{}},r=["widgetId","email","privacyPolicy","adsMedia","adsGroup","adsThirdparty","adsAll","adsGroupThirdparty"],i=0;i<e.elements.length;i++)if("submit"!==e.elements[i].type){var o=e.elements[i].name,n=e.elements[i].value;if(o.includes("ads")&&(n=e.elements[i].checked),r.includes(o)){t[o]=n;continue}if("newsletterCodeSelected"===o){void 0===t.subscribeTo&&(t.subscribeTo=[]),e.elements[i].checked&&t.subscribeTo.push(n);continue}""!==o&&(t.personalData[o]=n)}return t}},{key:"loadWidgetCss",value:(i=a()(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=3;break}return g.error("[Prospect Library 2.0] Error al cargar widget css."),e.abrupt("return",null);case 3:return r=document.createElement("style"),e.next=6,P.getWidgetCss(t).then((function(e){if("abc"!==x){r.innerHTML=e;var t=document.querySelector("script");t.parentNode.insertBefore(r,t)}}));case 6:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"_loadGlobalCss",value:(r=a()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loadWidgetCss("v1"));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addPopUpCss",value:(t=a()(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.createElement("style"),e.next=3,D.getPopUpCss().then((function(e){t.innerHTML=e;var r=document.querySelector("script");r.parentNode.insertBefore(t,r)}));case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"eventLoad",value:function(){jQuery("body").on("vocento.vocuser:accounts:onDataReady",(function(e){R=!0}))}}]),e}(),B=function(){function e(t){u()(this,e),this._widgetId="",this._widgetNewsletter="",this._widgetName="",this._testMode="",this._subscriptionType="",this._subscribeParams="",this._responseResult="",this._responseStatusCode="",this._responseMessage="",this._app=t}return l()(e,[{key:"triggerSnippetLocated",value:function(e){var t={widgetId:e.widgetId,widgetNewsletter:"",widgetName:"",testMode:"",subscriptionType:"",subscribeParams:"",responseResult:"OK",responseStatusCode:"200",responseMessage:"Snippet localizado"};this._app.trigger("vocento.vocuser:prospect.snippets_located",t)}},{key:"triggerWidgetRendered",value:function(e){var t={widgetId:e.widgetId,widgetNewsletter:e.widgetNewsletter,widgetName:e.widgetName,testMode:e.testMode,subscriptionType:e.subscriptionType,subscribeParams:"",responseResult:e.responseResult,responseStatusCode:e.responseStatusCode,responseMessage:e.responseMessage};this._app.trigger("vocento.vocuser:prospect:widget_rendered",t)}},{key:"triggerWidgetRequestSent",value:function(e){var t={widgetId:e.widgetId,widgetNewsletter:e.widgetNewsletter,widgetName:e.widgetName,testMode:e.testMode,subscriptionType:e.subscriptionType,subscribeParams:e.subscribeParams,responseResult:"OK",responseStatusCode:"200",responseMessage:"PeticiÃ³n de suscripciÃ³n enviada"};this._app.trigger("vocento.vocuser:prospect:widget_request_sent",t)}},{key:"triggerGdprModalShown",value:function(e){var t={widgetId:e.widgetId,widgetNewsletter:e.widgetNewsletter,widgetName:e.widgetName,testMode:e.testMode,subscriptionType:e.subscriptionType,subscribeParams:"",responseResult:"OK",responseStatusCode:"200",responseMessage:"Mostrado modal GDPR"};this._app.trigger("vocento.vocuser:prospect:gdpr_modal_shown",t)}},{key:"triggerWidgetResponseReceivedWithError",value:function(e){var t={widgetId:e.widgetId,widgetNewsletter:e.widgetNewsletter,widgetName:e.widgetName,testMode:e.testMode,subscriptionType:e.subscriptionType,subscribeParams:e.subscribeParams,responseResult:"KO",responseStatusCode:e.responseStatusCode,responseMessage:"Respuesta de suscripciÃ³n"};this._app.trigger("vocento.vocuser:prospect:widget_subscription_general_error",t)}},{key:"triggerWidgetResponseReceivedWithSubscribedError",value:function(e){var t={widgetId:e.widgetId,widgetNewsletter:e.widgetNewsletter,widgetName:e.widgetName,testMode:e.testMode,subscriptionType:e.subscriptionType,subscribeParams:e.subscribeParams,responseResult:"KO",responseStatusCode:e.responseStatusCode,responseMessage:"Respuesta de suscripciÃ³n"};this._app.trigger("vocento.vocuser:prospect:widget_subscription_subscribed_error",t)}},{key:"triggerWidgetResponseReceivedWithoutError",value:function(e){var t={widgetId:e.widgetId,widgetNewsletter:e.widgetNewsletter,widgetName:e.widgetName,testMode:e.testMode,subscriptionType:e.subscriptionType,subscribeParams:e.subscribeParams,responseResult:"OK",responseStatusCode:e.responseStatusCode,responseMessage:"Respuesta de suscripciÃ³n"};this._app.trigger("vocento.vocuser:prospect:widget_subscription_ok",t)}},{key:"triggerProspectJsReady",value:function(e){this._app.trigger("vocento.vocuser:prospect:prospect_js_ready",e),this._app.promised("prospect:ready","")}},{key:"widgetId",get:function(){return this._widgetId}},{key:"widgetNewsletter",get:function(){return this._widgetNewsletter}},{key:"widgetName",get:function(){return this._widgetName}},{key:"testMode",get:function(){return this._testMode}},{key:"subscriptionType",get:function(){return this._subscriptionType}},{key:"subscribeParams",get:function(){return this._subscribeParams}},{key:"responseResult",get:function(){return this._responseResult}},{key:"responseStatusCode",get:function(){return this._responseStatusCode}},{key:"responseMessage",get:function(){return this._responseMessage}}]),e}(),U=window.Voonto;U.ready.then((function(e){U.require("jquery").then((function(t){i=t;var r=new B(e),o=new j(r);i(".widget-prospect").keydown((function(e){if(13===e.keyCode)return e.preventDefault(),!1})),o.addPopUpCss(),o.handleWidgetsInPage().then((function(){U.require("popbox").then((function(e){new e({blur:!0})}))})),e.on("vocento.vocuser:prospect:render_widget_on_demand",(function(e){o.renderWidgetOnDemand(e.detail)})),r.triggerProspectJsReady(o)}))}))}]);