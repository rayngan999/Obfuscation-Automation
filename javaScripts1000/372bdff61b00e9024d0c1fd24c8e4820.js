Cube("datav:/npm/xss/0.3.4/lib/util",[],function(a){return a.exports={indexOf:function(a,b){var c,d;if(Array.prototype.indexOf)return a.indexOf(b);for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},forEach:function(a,b,c){var d,e;if(Array.prototype.forEach)return a.forEach(b,c);for(d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a)},trim:function(a){return String.prototype.trim?a.trim():a.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(a){var b=/\s|\n|\t/,c=b.exec(a);return c?c.index:-1}},a.exports});;
Cube("datav:/npm/xss/0.3.4/lib/xss",["datav:/npm/cssfilter/0.0.10"],function(a,b,c){function d(a){return void 0===a||null===a}function e(a){var b=m.spaceIndex(a);if(-1===b)return{html:"",closing:"/"===a[a.length-2]};a=m.trim(a.slice(b+1,-1));var c="/"===a[a.length-1];return c&&(a=m.trim(a.slice(0,-1))),{html:a,closing:c}}function f(a){var b={};for(var c in a)b[c]=a[c];return b}function g(a){a=f(a||{}),a.stripIgnoreTag&&(a.onIgnoreTag&&console.error("Notes: cannot use these two options \"stripIgnoreTag\" and \"onIgnoreTag\" at the same time"),a.onIgnoreTag=i.onIgnoreTagStripAll),a.whiteList=a.whiteList||i.whiteList,a.onTag=a.onTag||i.onTag,a.onTagAttr=a.onTagAttr||i.onTagAttr,a.onIgnoreTag=a.onIgnoreTag||i.onIgnoreTag,a.onIgnoreTagAttr=a.onIgnoreTagAttr||i.onIgnoreTagAttr,a.safeAttrValue=a.safeAttrValue||i.safeAttrValue,a.escapeHtml=a.escapeHtml||i.escapeHtml,this.options=a,!1===a.css?this.cssFilter=!1:(a.css=a.css||{},this.cssFilter=new h(a.css))}var h=c("datav:/npm/cssfilter/0.0.10").FilterCSS,i=c("datav:/npm/xss/0.3.4/lib/default"),j=c("datav:/npm/xss/0.3.4/lib/parser"),k=j.parseTag,l=j.parseAttr,m=c("datav:/npm/xss/0.3.4/lib/util");return g.prototype.process=function(a){if(a=a||"",a=a.toString(),!a)return"";var b=this,c=b.options,f=c.whiteList,g=c.onTag,h=c.onIgnoreTag,j=c.onTagAttr,n=c.onIgnoreTagAttr,o=c.safeAttrValue,p=c.escapeHtml,q=b.cssFilter;c.stripBlankChar&&(a=i.stripBlankChar(a)),c.allowCommentTag||(a=i.stripCommentTag(a));var r=!1;if(c.stripIgnoreTagBody){var r=i.StripTagBody(c.stripIgnoreTagBody,h);h=r.onIgnoreTag}var s=k(a,function(a,b,c,i,k){var r={sourcePosition:a,position:b,isClosing:k,isWhite:c in f},s=g(c,i,r);if(!d(s))return s;if(r.isWhite){if(r.isClosing)return"</"+c+">";var t=e(i),u=f[c],v=l(t.html,function(a,b){var e=-1!==m.indexOf(u,a),f=j(c,a,b,e);if(!d(f))return f;if(e)return b=o(c,a,b,q),b?a+"=\""+b+"\"":a;var f=n(c,a,b,e);return d(f)?void 0:f}),i="<"+c;return v&&(i+=" "+v),t.closing&&(i+=" /"),i+=">",i}var s=h(c,i,r);return d(s)?p(i):s},p);return r&&(s=r.remove(s)),s},a.exports=g,a.exports});;
Cube("datav:/npm/xss/0.3.4/lib/parser",[],function(a,b,c){function d(a){var b=l.spaceIndex(a);if(-1===b)var c=a.slice(1,-1);else var c=a.slice(1,b+1);return c=l.trim(c).toLowerCase(),"/"===c.slice(0,1)&&(c=c.slice(1)),"/"===c.slice(-1)&&(c=c.slice(0,-1)),c}function e(a){return"</"===a.slice(0,2)}function f(a,b){for(;b<a.length;b++){var d=a[b];if(" "!==d)return"="===d?b:-1}}function g(a,b){for(;0<b;b--){var d=a[b];if(" "!==d)return"="===d?b:-1}}function h(a){return"\""===a[0]&&"\""===a[a.length-1]||"'"===a[0]&&"'"===a[a.length-1]}function k(a){return h(a)?a.substr(1,a.length-2):a}var l=c("datav:/npm/xss/0.3.4/lib/util"),i=/[^a-zA-Z0-9_:\.\-]/img;return b.parseTag=function(a,b,f){"user strict";var g="",h=0,i=!1,j=!1,k=0,l=a.length,m="",n="";for(k=0;k<l;k++){var o=a.charAt(k);if(!1===i){if("<"===o){i=k;continue}}else if(!1===j){if("<"===o){g+=f(a.slice(h,k)),i=k,h=k;continue}if(">"===o){g+=f(a.slice(h,i)),m=a.slice(i,k+1),n=d(m),g+=b(i,g.length,n,m,e(m)),h=k+1,i=!1;continue}if(("\""===o||"'"===o)&&"="===a.charAt(k-1)){j=o;continue}}else if(o===j){j=!1;continue}}return h<a.length&&(g+=f(a.substr(h))),g},b.parseAttr=function(a,b){"user strict";function d(a,c){if(a=l.trim(a),a=a.replace(i,"").toLowerCase(),!(1>a.length)){var d=b(a,c||"");d&&h.push(d)}}for(var e=0,h=[],m=!1,n=a.length,o=0;o<n;o++){var p,q,j=a.charAt(o);if(!1===m&&"="===j){m=a.slice(e,o),e=o+1;continue}if(!1!==m&&o===e&&("\""===j||"'"===j)&&"="===a.charAt(o-1))if(q=a.indexOf(j,o+1),-1===q)break;else{p=l.trim(a.slice(e+1,q)),d(m,p),m=!1,o=q,e=o+1;continue}if(/\s|\n|\t/.test(j))if(a=a.replace(/\s|\n|\t/g," "),!1===m){if(q=f(a,o),-1===q){p=l.trim(a.slice(e,o)),d(p),m=!1,e=o+1;continue}else{o=q-1;continue}}else if(q=g(a,o-1),-1===q){p=l.trim(a.slice(e,o)),p=k(p),d(m,p),m=!1,e=o+1;continue}else continue}return e<a.length&&(!1===m?d(a.slice(e)):d(m,k(l.trim(a.slice(e))))),l.trim(h.join(" "))},a.exports});;
Cube("datav:/npm/xss/0.3.4/lib/default",["datav:/npm/cssfilter/0.0.10"],function(a,b,c){function d(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function e(a){return a.replace(q,"&lt;").replace(r,"&gt;")}function f(a){return a.replace(s,"&quot;")}function g(a){return a.replace(t,"\"")}function h(a){return a.replace(u,function(a,b){var c=String.fromCharCode;return"x"===b[0]||"X"===b[0]?c(parseInt(b.substr(1),16)):c(parseInt(b,10))})}function i(a){return a.replace(v,":").replace(w," ")}function j(a){for(var b="",c=0,d=a.length;c<d;c++)b+=32>a.charCodeAt(c)?" ":a.charAt(c);return o.trim(b)}function k(a){return a=g(a),a=h(a),a=i(a),a=j(a),a}function l(a){return a=f(a),a=e(a),a}var m=c("datav:/npm/cssfilter/0.0.10").FilterCSS,n=c("datav:/npm/cssfilter/0.0.10").getDefaultWhiteList,o=c("datav:/npm/xss/0.3.4/lib/util"),p=new m,q=/</g,r=/>/g,s=/"/g,t=/&quot;/g,u=/&#([a-zA-Z0-9]*);?/img,v=/&colon;?/img,w=/&newline;?/img,x=/\/\*|\*\//mg,y=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/ig,z=/^[\s"'`]*(d\s*a\s*t\s*a\s*)\:/ig,A=/^[\s"'`]*(d\s*a\s*t\s*a\s*)\:\s*image\//ig,B=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/ig,C=/u\s*r\s*l\s*\(.*/ig,D=/<!--[\s\S]*?-->/g;return b.whiteList=d(),b.getDefaultWhiteList=d,b.onTag=function(){},b.onIgnoreTag=function(){},b.onTagAttr=function(){},b.onIgnoreTagAttr=function(){},b.safeAttrValue=function(a,b,c,d){if(c=k(c),"href"===b||"src"===b){if(c=o.trim(c),"#"===c)return"#";if("http://"!==c.substr(0,7)&&"https://"!==c.substr(0,8)&&"mailto:"!==c.substr(0,7)&&"#"!==c[0]&&"/"!==c[0])return""}else if("background"===b){if(y.lastIndex=0,y.test(c))return"";}else if("style"===b){if(B.lastIndex=0,B.test(c))return"";if(C.lastIndex=0,C.test(c)&&(y.lastIndex=0,y.test(c)))return"";!1!==d&&(d=d||p,c=d.process(c))}return c=l(c),c},b.escapeHtml=e,b.escapeQuote=f,b.unescapeQuote=g,b.escapeHtmlEntities=h,b.escapeDangerHtml5Entities=i,b.clearNonPrintableCharacter=j,b.friendlyAttrValue=k,b.escapeAttrValue=l,b.onIgnoreTagStripAll=function(){return""},b.StripTagBody=function(a,b){function c(b){return!!d||-1!==o.indexOf(a,b)}"function"!==typeof b&&(b=function(){});var d=!Array.isArray(a),e=[],f=!1;return{onIgnoreTag:function(a,d,g){if(c(a)){if(g.isClosing){var h="[/removed]",i=g.position+h.length;return e.push([!1===f?g.position:f,i]),f=!1,h}return f||(f=g.position),"[removed]"}return b(a,d,g)},remove:function(a){var b="",c=0;return o.forEach(e,function(d){b+=a.slice(c,d[0]),c=d[1]}),b+=a.slice(c),b}}},b.stripCommentTag=function(a){return a.replace(D,"")},b.stripBlankChar=function(a){var b=a.split("");return b=b.filter(function(a){var b=a.charCodeAt(0);return 127!==b&&(!(31>=b)||10===b||13===b)}),b.join("")},b.cssFilter=p,b.getDefaultCSSWhiteList=n,a.exports});;
Cube("datav:/npm/xss/0.3.4",[],function(a,b,c){function d(a,b){var c=new g(b);return c.process(a)}var e=c("datav:/npm/xss/0.3.4/lib/default"),f=c("datav:/npm/xss/0.3.4/lib/parser"),g=c("datav:/npm/xss/0.3.4/lib/xss");for(var h in b=a.exports=d,b.FilterXSS=g,e)b[h]=e[h];for(var h in f)b[h]=f[h];return"undefined"!==typeof window&&(window.filterXSS=a.exports),a.exports});