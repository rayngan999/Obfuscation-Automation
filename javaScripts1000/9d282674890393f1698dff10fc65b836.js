(self.webpackChunk=self.webpackChunk||[]).push([[1124],{42392:(e,t,n)=>{"use strict";var r=n(24433),i=n(41762),o="is-empty",a="is-loaded",s="fixed_bottom",u="adhesion";function c(e,t,n,r){function c(){return t===e.pageId}function l(o,a,l){if(e.forceAllSlotsEmpty)return h("all slots on page",t,"forced empty by configuration"),function(t){var n=t.map((function(t){var n=e.document.getElementById(t.id);return n?Promise.resolve({slotId:t.id,element:n,filled:!1,sizeCode:null}).then((function(e){return d(e),e})):Promise.reject(new Error("missing container element for ad "+t.id))}));return Promise.all(n)}(o);var f=window.GdprStatus,m=[w,e.clientPageModelPromise,e.breakpointPromise,f.isApplicable(),f.countryCodeSafe(),r];return Promise.all(m).then((function(r){if(!c())return h("ignoring prereqs for defunct page",t),void Promise.reject("Page not current");var f=r[0],m=r[1],p=r[2],g=r[3];h("requesting for page",t,"slots with screenSize",p);var w=i.makePageModel(n.global.baseModel,a&&a.keyValues||{},g,m),k=o.filter((function(e){return!e.screenSizes||-1!==e.screenSizes.indexOf(p)}));e.hasAdhesionAndFixedBottomZone&&(k=function(t,n){if(b){var r=t.filter((function(e){var t=e.model.zone;return t!==u&&t!==s||(b[t]=e,n&&(y[t]=n.getMaxBidForAdUnit(e.id)),!1)}));if(s in b&&u in b){var i=function(){S++;var e=v.config.global.config.expectedRefreshCount;return null==e&&(e=6),s in y?0===y.fixed_bottom?s:s in y&&u in y?y.adhesion<=y.fixed_bottom*Math.max(e-(S-1),1)?s:u:s:u}();if(r.push(b[i]),delete b[i],i===u){if(P=!0,window.dispatchEvent(new window.CustomEvent("phoenix:advertising:adhesionWon")),b.fixed_bottom){var o=e.document.getElementById(b.fixed_bottom.id);if(o){var a=o.closest("phoenix-ad");a&&a.parentElement.removeChild(a)}}b=void 0}}return r}return P&&(t=t.filter((function(e){return e.model.zone!==s}))),t}(k,l)),(k=k.map((function(t){var r={};l&&(r=l.getSlotModelPropertiesForAdUnit(t.id));var i,o,a,s=e.document.getElementById(t.id);return s?{id:t.id,adUnitPath:t.adUnitPath,config:t.config,element:s,model:Object.assign({},t.model,(i=n.global.baseModel,o=t.model,a=Math.min(o.index,4),{zoneIndex:o.zone+"_"+a,siteZoneIndex:i.hostname+"_"+o.zone+"_"+a}),r)}:(console.warn("missing container element for ad",t.id),null)})).filter((function(e){return!!e}))).forEach((function(t){var n;if(!t.model.isOutstream){var r=t.element.parentElement;if(r){var i='[data-ad-group="'+r.parentElement.getAttribute("data-ad-group")+'"]',o=e.document.querySelectorAll(i+".not-size-"+p),a={D:!0};for(n=0;n<o.length;n++){var s=o[n];["A","B","C"].forEach((function(e){s.classList.contains("not-size-"+e)||(a[e]=!0)})),s.parentElement.removeChild(s)}var u=e.document.querySelectorAll(i);for(n=0;n<u.length;n++)Object.keys(a).forEach((function(e){var t="not-size-"+e;u[n].classList.remove(t),r.classList.remove(t)}))}}}));var x=new Promise((function(e){if("visible"!==document.visibilityState){var t=function(){"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e(!0))};document.addEventListener("visibilitychange",t,!1)}else e(!0)}));return x.then((function(){return h("adServer.requestAds",k),f.requestAds(n.global.config,w,k,l,x).then((function(e){return e.map((function(e){return e.then((function(e){return e&&d(e),e}))}))})).then((function(e){return Promise.all(e)}))}))}))}function d(e){var t=e.element,n=e.filled,r=e.sizeCode,i=e.sizeDims,s=t.parentElement,u=s.parentElement,c=(s.classList.contains("m-header-ad--slot"),u.closest("phoenix-balloon-header"));if(s.classList.remove("is-placeholder"),n){for(var l,d=0,m=[u,s,c];d<m.length;d++)(l=m[d])&&(l.classList.add(a),l.classList.remove(o));t.setAttribute("data-ad-size",r);var v=u.getAttribute("data-class-rules");if(v)for(var h,p=JSON.parse(v),g=0;g<p.length;g+=1)if((h=p[g]).sizes&&-1!==h.sizes.indexOf(r)||h.sizes&&-1!==h.sizes.indexOf(i)||h.dimensions&&-1!==h.dimensions.indexOf(i))for(var w=0;w<h.classes.length;w+=1)u.classList.add(h.classes[w]);else for(var b=0;b<h.classes.length;b+=1)-1!==u.classList.contains(h.classes[b])&&u.classList.remove(h.classes[b]);f(e)}else{for(var y,P=0,S=[u,s,c];P<S.length;P++)(y=S[P])&&(y.classList.add(o,"not-filled"),y.classList.remove(a));f(e)}}function f(e){e.slotId&&(m(e.slotId),g[e.slotId]&&g[e.slotId].resolve(e))}function m(e){return p[e]||(p[e]=new Promise((function(t,n){g[e]={resolve:t,reject:n}})).then((function(t){return delete g[e],t}),(function(t){throw delete g[e],t}))),p[e]}var v=this;v.pageId=t,v.config=n;var h=e.debugLog,p={},g={};h("adServer.initPage");var w=e.adServerPromise.then((function(e){if(c())return e.initPage().then((function(){return h("adServer.initPage completed"),e}));throw new Error("Page not current")}));v.makeInitialAdCall=function(){var t;return e.adAuctionPromise.then((function(e){return t=e,e.getLatestResult()})).then((function(r){var i=[];return n.sizedSlots.forEach((function(t){e.resetAdSlot(t.id),t.model.deferLoad||i.push(t)})),n.outOfPageSlots&&n.outOfPageSlots.forEach((function(t){e.resetAdSlot(t.id),i.push(t)})),l(i,t,r)}))},v.makeOutOfPageAdCall=function(){var t;return e.adAuctionPromise.then((function(e){return t=e,e.getLatestResult()})).then((function(e){return l(n.outOfPageSlots||[],t,e)}))},v.makeDynamicAdCall=function(t,n){var r;return e.adAuctionPromise.then((function(e){return r=e,n.auctionId?e.getResultById(n.auctionId):e.getLatestResult()})).then((function(e){return l(n.slots,r,e)}))},v.getSlotResult=function(e){return m(e)},v.close=function(){h("close page",t),Object.keys(g).map((function(e){g[e].reject(new Error("cancelled by navigation"))}))};var b={},y={},P=!1,S=0}e.exports=function(e){e=e||{},this.adServerPromise=e.adServerPromise,this.breakpointPromise=e.breakpointPromise,this.clientPageModelPromise=e.clientPageModelPromise,this.document=e.document,this.adAuctionPromise=e.adAuctionPromise,this.timedOutPageLoadPromise=e.timedOutPageLoadPromise,this.forceAllSlotsEmpty=!!e.forceAllSlotsEmpty,this.debugLog=e.debugLog||function(){};var t=this.debugLog;t("new Session with options",e);var n=this;n.pageId=0,n.dynamicCallId=0;var i,o,a=new Promise((function(e){i=e}));n.beginPage=function(e){function a(t){return e.sizedSlots.some((function(e){return e.model.zone===t}))}var s=++n.pageId,u=r("advertising:beginPage:"+s);return o&&o.close(),n.hasAdhesionAndFixedBottomZone=a("adhesion")&&a("fixed_bottom"),t("begin page",s,e),o=new c(n,s,e,n.timedOutPageLoadPromise),1==s&&i(),t("page",s,"initial ad call"),o.makeInitialAdCall().then((function(e){return t("page",s,"initial ad call result:",e),u.end(),e}),(function(e){return t("page",s,"initial ad call failed:",e),u.end(),Promise.reject(e)}))},n.getPage=function(){return a.then((function(){return o}))},n.getAdCallConfig=function(e,t){return Promise.all([n.adServerPromise,a]).then((function(n){var r=n[0],i=o.config.global.config;return r.getAdCallConfig(e,t,i)}))},n.resetAdSlot=function(e){n.adServerPromise.then((function(t){t.resetAdSlot(e)}))},n.dynamicCall=function(e){var i=++n.dynamicCallId;t("dynamic call",i,e);var s=r("advertising:dynamicCall:"+i);return a.then((function(){return o.makeDynamicAdCall(i,e).then((function(e){return t("dynamic call",i,"result:",e),s.end(),e}))})).catch((function(e){return t("dynamic call",i,"failed:",e),s.end(),Promise.reject(e)}))},n.getSlotResult=function(e){if(!o)throw new Error("cannot call getSlotResult before a page is active");return o.getSlotResult(e)},n.reloadAd=function(e,t){return n.getSlotResult(e.id).then((function(){return n.resetAdSlot(e.id),n.dynamicCall({slots:[e],auctionId:t})})).catch((function(t){console.warn(t),n.dynamicCall({slots:[e]})}))}}},96463:(e,t,n)=>{"use strict";var r=n(9736);e.exports=Promise.resolve({referrer:function(){var e;try{window.top.document.referrer&&(e=window.top.document.referrer)}catch(t){e=document.referrer}return e?r.parseHostName(e):void 0}()})},51718:(e,t,n)=>{"use strict";var r=n(87796),i=n(77965),o=n(42392),a=n(24433)("adScripts:gamma");window.phxConfigQueue.push((function(){var e=window.GdprStatus,t=this.user.hasPremium(),a=this.features.isEnabled("use-mavenuid-demonitized"),s=window.document.location.hash&&-1!==window.document.location.hash.indexOf("phxAdvertisingDebug")?function(){var e=Array.prototype.slice.apply(arguments),t=window.performance&&window.performance.now?0|window.performance.now():Date.now();e.unshift("%c[phxAdvertisingDebug] "+t+"%c","font-weight:bold","font-weight:normal"),console.log.apply(console,e)}:void 0;e.isDemonetizedSafe().then((function(e){var u=!!a&&e;s&&(u||t)&&s(t?"ADS402 Premium":"ADS401 Demonetized"),r("phxAdvertisingQueue",new o({adServerPromise:i("phxAdServerQueue"),breakpointPromise:i("phxConfigQueue").then((function(e){return e.breakpoint.get()})),clientPageModelPromise:n(96463),debugLog:s,document:window.document,forceAllSlotsEmpty:t||u,adAuctionPromise:i("phxAdAuctionQueue"),timedOutPageLoadPromise:window.getTimedOutPageLoadPromise(3e4)}))}))})),a.end()},41762:(e,t,n)=>{"use strict";var r=n(9736);function i(e,t){switch(e.type){case"simple":return t[e.key]}}function o(){var e;try{window.top.document.referrer&&(e=window.top.document.referrer)}catch(t){e=document.referrer}return e?r.parseHostName(e):void 0}e.exports={evalTemplate:i,makePageTargeting:function(e,t,n,r){var o=n.beacons&&n.beacons.targetingParams&&n.beacons.targetingParams.exclude||{},a={};return Object.keys(e||{}).forEach((function(n){var s=i(e[n],t);"number"==typeof s&&(s+=""),null==s||""===s||Array.isArray(s)&&0===s.length||(r&&r.setTargeting(n,s),!o[n]&&(a[n]=s))})),a},vastCustomParams:function(e,t,n){var r=["ag","channel","cs","direct","et","feats","gd","in","lang","loggedin","pagetype","path","pod","pt","referrer","terms"];for(var i in t||(t={}),t)if(-1<r.indexOf(i)){var o=t[i];Array.isArray(o)&&(o=o.join(",")),e[i]=o}return n?encodeURIComponent(Object.keys(e).map((function(t){return[t,e[t]].join("=")})).join("&")):e},makePageModel:function(e,t,n,r){var i={};window.phxTrackedFeatures&&(i={trackedFeatures:Object.keys(window.phxTrackedFeatures).map((function(e){return e+":"+(window.phxTrackedFeatures[e]?"1":"0")})).join("|")});var a={};if(n){var s=window.GdprStatus;a={donottrack:!0,gdprIsApplicable:!0,gdprIsConsentGivenPromise:s.waitForConsentValue().then((function(){return s.isConsentGivenForPurposes(s.PURPOSE_IDS.advertising)})),kuid:void 0,optout:!0}}return Object.assign({},e,i,{referrer:o(),loggedIn:window.phxIsLoggedIn()?"1":"0"},a,r||{},t)}}},87796:e=>{"use strict";e.exports=function(e,t){function n(e){t.then?t.then((function(n){t=n,e.call(t)})):e.call(t)}var r=window[e];if(window[e]={push:n},void 0!==r)for(var i=0;i<r.length;i++)n(r[i])}},77965:e=>{"use strict";e.exports=function(e){var t,n=(t=e,window[t]=window[t]||[],window[t]);return new Promise((function(e){n.push((function(){e(this)}))}))}},63950:e=>{"use strict";e.exports={breakpoints:{A:0,B:675,C:1240}}},86483:e=>{"use strict";var t,n=function(){};try{t=window}catch(e){t={}}e.exports=t.performance&&t.performance.mark?t.performance:{getEntriesByName:n,mark:n,measure:n}},24433:(e,t,n)=>{"use strict";var r=n(86483),i=0;function o(){var e="phxMark:"+i++;return r.mark(e),e}e.exports=function(e){var t=o();return{end:function(){var n=o();r.measure(e,t,n);var i=r.getEntriesByName(e);if(i&&i.length)return i[i.length-1].duration}}}},9736:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s=n(63950).breakpoints;function u(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document.head;return new Promise((function(r,i){var o=document.createElement("script");t&&(o.id=t),o.onload=function(){r(o)},o.onerror=function(e){i(e)},o.type="text/javascript",o.src=e,n.appendChild(o)}))}var c={};function l(){var e,t=window.innerWidth;for(var n in s)t>=s[n]&&(e=n);return e}var d,f,m,v=function(){function e(){i(this,e),this.observedBreakpoint=void 0,this.subscribers=[],this._observe()}return a(e,[{key:"_observe",value:function(){var e=this;this.observedBreakpoint=l(),window.addEventListener("resize",(function(){var t=l();t!==e.observedBreakpoint&&(e.observedBreakpoint=t,e.subscribers.forEach((function(e){e.onBreakpointChange(t)})))}))}},{key:"subscribe",value:function(e){if(!e.onBreakpointChange)throw new Error("onBreakpointChange method required");this.unsubscribe(e),this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){var t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}}]),e}();function h(){return"complete"===document.readyState||"interactive"===document.readyState}var p,g,w,b="190px 0px",y={},P=function(){function e(t,n){i(this,e),this.callback=t,this.timerId=null,this.restart(n)}return a(e,[{key:"restart",value:function(e){this.remaining=e,this.resume()}},{key:"resume",value:function(){this.start=new Date,clearTimeout(this.timerId),this.timerId=setTimeout(this.callback,this.remaining)}},{key:"pause",value:function(){clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"cancel",value:function(){clearTimeout(this.timerId),this.cancelled=!0}}]),e}();e.exports={addScriptResource:u,addScriptResourceOnce:function(e,t,n){var r=t||e;return c[r]||(c[r]=u(e,t,n))},debounce:function(e,t,n){function i(){return(new Date).getTime()}function o(){var n=t-(i()-f);if(0>=n||n>t){l&&window.clearTimeout(l);var r=h;l=v=h=void 0,r&&(w=i(),d=e.apply(m,u),!v&&!l&&(u=m=null))}else v=window.setTimeout(o,n)}function a(){v&&window.clearTimeout(v),l=v=h=void 0,(y||b!==t)&&(w=i(),d=e.apply(m,u),!v&&!l&&(u=m=null))}function s(){var n,r,s;return u=arguments,f=i(),m=this,h=y&&(v||!c),!1===b?n=c&&!v:(!l&&!c&&(w=f),(s=0>=(r=b-(f-w))||r>b)?(l&&(l=window.clearTimeout(l)),w=f,d=e.apply(m,u)):!l&&(l=window.setTimeout(a,r))),s&&v?v=window.clearTimeout(v):!v&&t!==b&&(v=window.setTimeout(o,t)),n&&(s=!0,d=e.apply(m,u)),!s||v||l||(u=m=null),d}var u,c,l,d,f,m,v,h,p,g,w=0,b=!1,y=!0;if(s.cancel=function(){v&&window.clearTimeout(v),l&&window.clearTimeout(l),l=v=h=void 0},"function"!=typeof e)throw new TypeError("this is not a function!");return t=0>t?0:+t||0,!0===n?(c=!0,y=!1):(g=r(p=n),!!p&&("object"===g||"function"===g)&&(c=n.leading,b="maxWait"in n&&Math.max(+n.maxWait||0,t),y="trailing"in n?n.trailing:y)),s},getCurrentBreakpoint:l,isExternalLink:function(e,t){if(!e)return!1;t||(t=function(){if(!g){var e=document.querySelector("link[rel='canonical']"),t=document.createElement("a");t.href=e.href,g=t.hostname}return g}());var n=e.match(/^https?:\/\/([^/]+)\/?/);return!!n&&n[1]!==t},isLiftIgniterSlice:function(e,t){return(0|e/100)%100<t},observeBreakpointChanges:function(e){return d||(d=new v),d.subscribe(e),d},observeFirstIntersection:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:b,n=y[t]||(y[t]=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(t.unobserve(e.target),e.target.onFirstIntersection&&e.target.onFirstIntersection())}))}),{rootMargin:t}));return n.observe(e),n},observeVisibilityChanges:function(e){return p||(p=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&.5<=e.intersectionRatio?e.target.onChangeToVisible&&e.target.onChangeToVisible():e.target.onChangeToNotVisible&&e.target.onChangeToNotVisible()}))}),{threshold:.5})),p.observe(e),p},parseHostName:function(e){return e.replace(/^https?:\/\//,"").replace(/[:\/].*/,"").toLowerCase().replace(/^www\./,"").replace(/^m\./,"").replace(/\.blogspot(\.com?)?\.[a-z]{2,3}$/,".blogspot.com").replace(/^.*\.(gamepedia|wikia)(\.com?)?\.[a-z]{2,3}$/,"$1.com").split(".").slice(-3).join(".")},supportPassiveEventListeners:function(){if(void 0===w){w=!1;try{var e=Object.defineProperty({},"passive",{get:function(){w=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}}return w},throttle:function(e,t){var n,r,i,o,a=0,s=function(){a=new Date,i=null,o=e.apply(n,r)};return function(){var u=new Date,c=t-(u-a);return n=this,r=arguments,0>=c?(i&&clearTimeout(i),a=u,o=e.apply(n,r)):!i&&(i=setTimeout(s,c)),o}},Timer:P,userHasPremium:function(){return new Promise((function(e,t){window.phxConfigQueue||t("config object is necessary to check premium"),window.phxConfigQueue.push((function(){e(this.user.hasPremium())}))}))},waitForElement:function(e,t,n){if(!e)throw new Error("rootElement required");var r;return n&&n.untilDomReady&&(r=function(e){h()&&e()}),function(e,t,n,r){var i=e.querySelector(t);return i?Promise.resolve(i):new Promise((function(i,o){var a=new MutationObserver((function(){var n=e.querySelector(t);return n?(a.disconnect(),void i(n)):void(r&&r((function(){return a.disconnect(),void o(new Error("element not found"))})))}));a.observe(e,n)}))}(e,t,{childList:!0,subtree:!0},r)},whenDomContentLoaded:function(){return f||(f=h()?Promise.resolve():new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))),f},whenPageLoaded:function(){return m||(m="complete"===document.readyState?Promise.resolve():new Promise((function(e){window.addEventListener("load",e)}))),m}}}},0,[[51718,3666]]]);
//# sourceMappingURL=advertising.min.js.map