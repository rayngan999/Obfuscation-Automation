!function(){var e,t={99613:function(e,t,n){"use strict";var i;n.d(t,{D:function(){return i}}),function(e){e.CAPPING_USER_IS_CAPPED="CAPPING_USER_IS_CAPPED",e.EME_API_NOT_SUPPORTED="EME_API_NOT_SUPPORTED",e.EME_MEDIA_KEYS_NOT_SUPPORTED="EME_MEDIA_KEYS_NOT_SUPPORTED",e.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED="EME_MEDIA_KEY_SESSION_NOT_SUPPORTED",e.EME_NO_SUPPORTED_KEYSYSTEM="EME_NO_SUPPORTED_KEYSYSTEM",e.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED="EME_PLAYER_MEDIA_KEYS_SETTING_FAILED",e.EME_ERROR_UNKNOWN="EME_ERROR_UNKNOWN",e.EME_LICENSE_REQUEST_EMPTY_RESPONSE="EME_LICENSE_REQUEST_EMPTY_RESPONSE",e.EME_LICENSE_REQUEST_FAILED_WITH_STATUS="EME_LICENSE_REQUEST_FAILED_WITH_STATUS",e.EME_LICENSE_REQUEST_WIDEVINE_ERROR="EME_LICENSE_REQUEST_WIDEVINE_ERROR",e.EME_LICENSE_UPDATE_FAILED="EME_LICENSE_UPDATE_FAILED",e.EME_HEADER_KEY_VALUE_MISMATCH="EME_HEADER_KEY_VALUE_MISMATCH",e.EME_HEADER_MISSING_CHALLENGE="EME_HEADER_MISSING_CHALLENGE",e.EME_INIT_DATA_MALFORMED="EME_INIT_DATA_MALFORMED",e.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM="EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM",e.EME_MEDIA_KEY_SESSION_V0_1B_ERROR="EME_MEDIA_KEY_SESSION_V0_1B_ERROR",e.EME_MEDIA_KEY_SESSION_SAFARI_ERROR="EME_MEDIA_KEY_SESSION_SAFARI_ERROR",e.EME_NO_SUPPORTED_CONFIGURATION="EME_NO_SUPPORTED_CONFIGURATION",e.EME_NOT_SUPPORTED_ERROR="EME_NOT_SUPPORTED_ERROR",e.EME_INVALID_STATE_ERROR="EME_INVALID_STATE_ERROR",e.EME_UNKNOWN_ERROR="EME_UNKNOWN_ERROR",e.DISALLOW_PROTECTED_TRACK_ERROR="DISALLOW_PROTECTED_TRACK_ERROR",e.FILE_FORMAT_NOT_SUPPORTED="FILE_FORMAT_NOT_SUPPORTED",e.FILE_MALFORMED_SEEKTABLE="FILE_MALFORMED_SEEKTABLE",e.FILE_MALFORMED_PSSH="FILE_MALFORMED_PSSH",e.FILE_NOT_RESOLVED="FILE_NOT_RESOLVED",e.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_ZERO="FRAGMENT_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_STATUS="FRAGMENT_REQUEST_FAILED_WITH_STATUS",e.FRAGMENT_REQUEST_EMPTY_RESPONSE="FRAGMENT_REQUEST_EMPTY_RESPONSE",e.FRAGMENT_REQUEST_UNEXPECTED_LENGTH="FRAGMENT_REQUEST_UNEXPECTED_LENGTH",e.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE="PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE",e.PLAYER_BUFFER_QUOTA_EXCEEDED="PLAYER_BUFFER_QUOTA_EXCEEDED",e.PLAYER_CANNOT_FIND_PLAYABLE_URI="PLAYER_CANNOT_FIND_PLAYABLE_URI",e.PLAYER_INVALID_INTERNAL_STATE="PLAYER_INVALID_INTERNAL_STATE",e.PLAYER_MEDIA_ERROR="PLAYER_MEDIA_ERROR",e.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",e.MEDIA_ABORTED="MEDIA_ABORTED",e.MEDIA_DECODING_ERROR="MEDIA_DECODING_ERROR",e.MEDIA_NETWORK_ERROR="MEDIA_NETWORK_ERROR",e.MEDIA_NOT_SUPPORTED="MEDIA_NOT_SUPPORTED",e.LICENSE_RESOLVE_INVALID_RESPONSE="LICENSE_RESOLVE_INVALID_RESPONSE",e.LICENSE_RESOLVER_CANT_RESOLVE_URL="LICENSE_RESOLVER_CANT_RESOLVE_URL",e.LICENSE_RESOLVER_DEPRECATED_VERSION="LICENSE_RESOLVER_DEPRECATED_VERSION",e.LIST_PLAYER_NO_TRACK_PLAYER="LIST_PLAYER_NO_TRACK_PLAYER",e.LIST_PLAYER_NO_LIST="LIST_PLAYER_NO_LIST",e.LIST_PLAYER_INVALID_ARGUMENT="LIST_PLAYER_INVALID_ARGUMENT",e.LIST_PLAYER_FORBIDDEN="LIST_PLAYER_FORBIDDEN",e.STORAGE_ERROR="STORAGE_ERROR",e.STORAGE_FAILED_WITH_STATUS="STORAGE_FAILED_WITH_STATUS",e.STORAGE_RETURNED_NO_TRACKS="STORAGE_RETURNED_NO_TRACKS",e.STORAGE_TRACK_MANIFEST_FAILED="STORAGE_TRACK_MANIFEST_FAILED",e.STORAGE_TRACK_MANIFEST_EMPTY="STORAGE_TRACK_MANIFEST_EMPTY",e.STORAGE_VIDEO_MANIFEST_FAILED="STORAGE_VIDEO_MANIFEST_FAILED",e.TRACK_DATA_ALREADY_FINALIZED="TRACK_DATA_ALREADY_FINALIZED",e.TSV_SENDING_FAILED="TSV_SENDING_FAILED",e.PLAYBACK_STATS_SENDING_FAILED="PLAYBACK_STATS_SENDING_FAILED",e.PLAYBACK_START_SENDING_FAILED="PLAYBACK_START_SENDING_FAILED",e.UNKNOWN="UNKNOWN"}(i||(i={}))},55847:function(e,t,n){"use strict";var i;n.d(t,{K:function(){return i}}),function(e){e.APPLOAD="appload",e.BACK_BUTTON="backbtn",e.CLICK_ROW="clickrow",e.CLICK_SIDE="clickside",e.END_PLAY="endplay",e.FORWARD_BUTTON="fwdbtn",e.LOGOUT="logout",e.PLAY_BUTTON="playbtn",e.POPUP="popup",e.REMOTE="remote",e.TRACK_DONE="trackdone",e.TRACK_ERROR="trackerror",e.UNKNOWN="unknown",e.URI_OPEN="uriopen",e.CAPPED="capped",e.SEEK="seek"}(i||(i={}))},9064:function(e,t,n){"use strict";n.d(t,{D1:function(){return S.D},_8:function(){return ut},OU:function(){return E},J_:function(){return y},rU:function(){return m},cJ:function(){return rt},KG:function(){return at.K},zq:function(){return ot},MD:function(){return dt}});var i,r=n(62279),o=n(69368);n(27061);!function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.DEBUG=2]="DEBUG",e[e.INFO=4]="INFO",e[e.WARN=8]="WARN",e[e.ERROR=16]="ERROR"}(i||(i={}));var s,a=n(27061);const c="true"===(null===(s=null==a?void 0:{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0,CDN_FILE_URLS:'{"fonts/CircularSpUIAraOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.6d6a4c25.otf","fonts/CircularSpUIAraOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.05b31ded.woff","fonts/CircularSpUIAraOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.c32951f4.woff2","fonts/CircularSpUIAraOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.f97cb921.otf","fonts/CircularSpUIAraOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.9ddc7126.woff","fonts/CircularSpUIAraOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.317e96e5.woff2","fonts/CircularSpUIAraOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.f0effcd1.otf","fonts/CircularSpUIAraOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.3ad862e2.woff","fonts/CircularSpUIAraOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.aaab109b.woff2","fonts/CircularSpUIAraOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.f0833f3b.otf","fonts/CircularSpUIAraOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.5c7ed8d8.woff","fonts/CircularSpUIAraOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.dde45e52.woff2","fonts/CircularSpUICyrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.50cd1ca9.otf","fonts/CircularSpUICyrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.7536a73f.woff","fonts/CircularSpUICyrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.f5526fc4.woff2","fonts/CircularSpUICyrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.67641b90.otf","fonts/CircularSpUICyrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.909126fc.woff","fonts/CircularSpUICyrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.30dc9fb2.woff2","fonts/CircularSpUICyrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.15af6ebe.otf","fonts/CircularSpUICyrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.918c53b8.woff","fonts/CircularSpUICyrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.6a858994.woff2","fonts/CircularSpUICyrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.b10eb959.otf","fonts/CircularSpUICyrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.034997d0.woff","fonts/CircularSpUICyrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.55fa9f4a.woff2","fonts/CircularSpUIHbrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.11abebe4.otf","fonts/CircularSpUIHbrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.0a11e734.woff","fonts/CircularSpUIHbrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.217fb21f.woff2","fonts/CircularSpUIHbrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.57b36278.otf","fonts/CircularSpUIHbrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.9f406804.woff","fonts/CircularSpUIHbrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.ef043f44.woff2","fonts/CircularSpUIHbrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.fae4aece.otf","fonts/CircularSpUIHbrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.ad2b13cd.woff","fonts/CircularSpUIHbrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.cb36b6ec.woff2","fonts/CircularSpUIHbrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2e1df62a.otf","fonts/CircularSpUIHbrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2128eeac.woff","fonts/CircularSpUIHbrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.4884da16.woff2","fonts/CircularSpUIv3T-Black.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.ce8ef887.ttf","fonts/CircularSpUIv3T-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.effa986f.woff","fonts/CircularSpUIv3T-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.c21e63c5.woff2","fonts/CircularSpUIv3T-Bold.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.7eb7d0f7.ttf","fonts/CircularSpUIv3T-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.10e93738.woff","fonts/CircularSpUIv3T-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.8d0a45cc.woff2","fonts/CircularSpUIv3T-Book.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.a357677a.ttf","fonts/CircularSpUIv3T-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.ea8d19db.woff","fonts/CircularSpUIv3T-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.3466e0ec.woff2","fonts/CircularSpUIv3T-Light.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.89e4be2e.ttf","fonts/CircularSpUIv3T-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.2a78c017.woff","fonts/CircularSpUIv3T-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.afd9ab26.woff2","fonts/spoticon_regular_2.ttf":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.127670b5.ttf","fonts/spoticon_regular_2.woff":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.ff4c6091.woff","fonts/spoticon_regular_2.woff2":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.d319d911.woff2","generated/manifest-mobile-web-player.json":"https://open.scdn.co/cdn/generated/manifest-mobile-web-player.2aef628f.json","generated/manifest-web-player.json":"https://open.scdn.co/cdn/generated/manifest-web-player.038c3337.json","generated/opensearch.xml":"https://open.scdn.co/cdn/generated/opensearch.abfbfc66.xml","images/checkmark.png":"https://open.scdn.co/cdn/images/checkmark.389faa13.png","images/concert-hub-fb-card.png":"https://open.scdn.co/cdn/images/concert-hub-fb-card.5072379c.png","images/concert-hub-header.png":"https://open.scdn.co/cdn/images/concert-hub-header.56bcad9b.png","images/concert-hub-iphone-de.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-de.b6f99e33.png","images/concert-hub-iphone-el.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-el.5672149c.png","images/concert-hub-iphone-en.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-en.6eda306a.png","images/concert-hub-iphone-es_419.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es_419.cefd672a.png","images/concert-hub-iphone-es.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es.cefd672a.png","images/concert-hub-iphone-fi.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fi.52e8d625.png","images/concert-hub-iphone-fr_CA.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr_CA.93b897cb.png","images/concert-hub-iphone-fr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr.336e7db1.png","images/concert-hub-iphone-hu.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-hu.5eba9191.png","images/concert-hub-iphone-id.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-id.87ecf560.png","images/concert-hub-iphone-it.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-it.18450a29.png","images/concert-hub-iphone-ja.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ja.6eda306a.png","images/concert-hub-iphone-ms.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ms.83140310.png","images/concert-hub-iphone-nl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-nl.cb3a5038.png","images/concert-hub-iphone-pl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pl.45abd89b.png","images/concert-hub-iphone-pt_BR.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pt_BR.e932ef02.png","images/concert-hub-iphone-sv.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-sv.5e512289.png","images/concert-hub-iphone-tr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-tr.a017f03c.png","images/concert-hub-iphone-zh_TW.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-zh_TW.6eda306a.png","images/concert-hub-twitter-card.png":"https://open.scdn.co/cdn/images/concert-hub-twitter-card.71f6a06d.png","images/connect_header@1x.png":"https://open.scdn.co/cdn/images/connect_header@1x.ecc6912d.png","images/connect-to-devices-white.svg":"https://open.scdn.co/cdn/images/connect-to-devices-white.69d4229a.svg","images/desktop-auth-check.svg":"https://open.scdn.co/cdn/images/desktop-auth-check.65be3bbc.svg","images/desktop-auth-error.svg":"https://open.scdn.co/cdn/images/desktop-auth-error.b82f823b.svg","images/devices/android.png":"https://open.scdn.co/cdn/images/devices/android.460a5815.png","images/devices/ios.png":"https://open.scdn.co/cdn/images/devices/ios.535e1468.png","images/devices/mac-web.png":"https://open.scdn.co/cdn/images/devices/mac-web.71c1af1f.png","images/devices/mac.png":"https://open.scdn.co/cdn/images/devices/mac.80dcea83.png","images/devices/windowsphone.png":"https://open.scdn.co/cdn/images/devices/windowsphone.350c5a17.png","images/embed-podcast/upsell-background.png":"https://open.scdn.co/cdn/images/embed-podcast/upsell-background.00c81565.png","images/embed/copy-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/copy-32_circle_grey_outline_bg.0c6130eb.svg","images/embed/embed-code-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/embed-code-32_circle_grey_outline_bg.b40a255f.svg","images/embed/fb_colour.svg":"https://open.scdn.co/cdn/images/embed/fb_colour.13fa515f.svg","images/embed/messenger_colour.svg":"https://open.scdn.co/cdn/images/embed/messenger_colour.8f4836ec.svg","images/embed/twitter_colour.svg":"https://open.scdn.co/cdn/images/embed/twitter_colour.456d46db.svg","images/embed/whatsapp.svg":"https://open.scdn.co/cdn/images/embed/whatsapp.e33bfab4.svg","images/emi.png":"https://open.scdn.co/cdn/images/emi.c7e51c1a.png","images/employee-podcasts-modal-art.png":"https://open.scdn.co/cdn/images/employee-podcasts-modal-art.956e5f5e.png","images/equaliser-animated-green.gif":"https://open.scdn.co/cdn/images/equaliser-animated-green.73b73928.gif","images/equaliser-green.svg":"https://open.scdn.co/cdn/images/equaliser-green.1184ed87.svg","images/favicon.ico":"https://open.scdn.co/cdn/images/favicon.5cb2bd30.ico","images/favicon.png":"https://open.scdn.co/cdn/images/favicon.0c211e2e.png","images/favicon16.png":"https://open.scdn.co/cdn/images/favicon16.19fc3918.png","images/favicon32.png":"https://open.scdn.co/cdn/images/favicon32.a19b4f5b.png","images/focused_stroy_play.png":"https://open.scdn.co/cdn/images/focused_stroy_play.c908b733.png","images/follow/avatar-placeholder.png":"https://open.scdn.co/cdn/images/follow/avatar-placeholder.2f817d4a.png","images/follow/sprite.gif":"https://open.scdn.co/cdn/images/follow/sprite.e282a709.gif","images/follow/sprite@1.png":"https://open.scdn.co/cdn/images/follow/sprite@1.b994540b.png","images/hifi-button-off.svg":"https://open.scdn.co/cdn/images/hifi-button-off.87461500.svg","images/hifi-button-on.svg":"https://open.scdn.co/cdn/images/hifi-button-on.48a2de90.svg","images/hifi.svg":"https://open.scdn.co/cdn/images/hifi.0526a5b1.svg","images/home-icon.svg":"https://open.scdn.co/cdn/images/home-icon.ba66757a.svg","images/icons/Spotify_1024.png":"https://open.scdn.co/cdn/images/icons/Spotify_1024.d6467a14.png","images/icons/Spotify_128.png":"https://open.scdn.co/cdn/images/icons/Spotify_128.c9ce2f2e.png","images/icons/Spotify_16.png":"https://open.scdn.co/cdn/images/icons/Spotify_16.aa3775a0.png","images/icons/Spotify_256.png":"https://open.scdn.co/cdn/images/icons/Spotify_256.c8416b60.png","images/icons/Spotify_32.png":"https://open.scdn.co/cdn/images/icons/Spotify_32.492cdebf.png","images/icons/Spotify_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_512.49a0bf03.png","images/icons/Spotify_64.png":"https://open.scdn.co/cdn/images/icons/Spotify_64.47bcd979.png","images/icons/Spotify_MWP_192.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_192.c70b9055.png","images/icons/Spotify_MWP_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_512.591cfa88.png","images/improved-modal-bg.jpg":"https://open.scdn.co/cdn/images/improved-modal-bg.23e5dcb1.jpg","images/login-background.jpg":"https://open.scdn.co/cdn/images/login-background.078204fe.jpg","images/login-signup-burst.svg":"https://open.scdn.co/cdn/images/login-signup-burst.5f6a6521.svg","images/logo-complete-black.svg":"https://open.scdn.co/cdn/images/logo-complete-black.573d8227.svg","images/logo-white-2x.png":"https://open.scdn.co/cdn/images/logo-white-2x.ef36ed81.png","images/merlin.png":"https://open.scdn.co/cdn/images/merlin.cd7e72d1.png","images/mid-year.png":"https://open.scdn.co/cdn/images/mid-year.9e2ead8f.png","images/moviebuff.png":"https://open.scdn.co/cdn/images/moviebuff.65e80213.png","images/og-image.png":"https://open.scdn.co/cdn/images/og-image.64b84348.png","images/orchard.png":"https://open.scdn.co/cdn/images/orchard.677c5ae0.png","images/rovi.png":"https://open.scdn.co/cdn/images/rovi.7b503678.png","images/s2l-desktopui-ltr.png":"https://open.scdn.co/cdn/images/s2l-desktopui-ltr.3024b050.png","images/s2l-desktopui-rtl.png":"https://open.scdn.co/cdn/images/s2l-desktopui-rtl.a9690daf.png","images/s2l-mobileui.png":"https://open.scdn.co/cdn/images/s2l-mobileui.9fc9d151.png","images/sony.png":"https://open.scdn.co/cdn/images/sony.7e5692e6.png","images/spotifylogo.svg":"https://open.scdn.co/cdn/images/spotifylogo.a884cca3.svg","images/station-header-wave.svg":"https://open.scdn.co/cdn/images/station-header-wave.0f3784ea.svg","images/station-wave.svg":"https://open.scdn.co/cdn/images/station-wave.2b7b882c.svg","images/sw_saber_ahsoka1.png":"https://open.scdn.co/cdn/images/sw_saber_ahsoka1.5495e812.png","images/sw_saber_anakin.png":"https://open.scdn.co/cdn/images/sw_saber_anakin.a7ba22d2.png","images/sw_saber_leia.png":"https://open.scdn.co/cdn/images/sw_saber_leia.1146243b.png","images/sw_saber_luke.png":"https://open.scdn.co/cdn/images/sw_saber_luke.e4e10033.png","images/sw_saber_mace.png":"https://open.scdn.co/cdn/images/sw_saber_mace.1ba83c7d.png","images/sw_saber_rey.png":"https://open.scdn.co/cdn/images/sw_saber_rey.994789b5.png","images/sw_saber_vader.png":"https://open.scdn.co/cdn/images/sw_saber_vader.070f862b.png","images/touch-icon-114.png":"https://open.scdn.co/cdn/images/touch-icon-114.0d424df2.png","images/touch-icon-144.png":"https://open.scdn.co/cdn/images/touch-icon-144.36faaf96.png","images/touch-icon-57.png":"https://open.scdn.co/cdn/images/touch-icon-57.5460f415.png","images/touch-icon-72.png":"https://open.scdn.co/cdn/images/touch-icon-72.cffecbdb.png","images/tracklist-placeholder.png":"https://open.scdn.co/cdn/images/tracklist-placeholder.59aa68d8.png","images/tracklist-row-episode-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-episode-fallback.e8ae3577.svg","images/tracklist-row-song-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-song-fallback.4db3ccfe.svg","images/tracklist-row-video-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-video-fallback.954459da.svg","images/universal.png":"https://open.scdn.co/cdn/images/universal.3ceb95fd.png","images/vinyl-bottom-layer.svg":"https://open.scdn.co/cdn/images/vinyl-bottom-layer.82d9f6ef.svg","images/vinyl-top-layer.svg":"https://open.scdn.co/cdn/images/vinyl-top-layer.b56c3ccf.svg","images/warner.png":"https://open.scdn.co/cdn/images/warner.a5039776.png","images/zara-larsson-singles.png":"https://open.scdn.co/cdn/images/zara-larsson-singles.59dbba9e.png","js/fb.js":"https://open.scdn.co/cdn/js/fb.83cf1e53.js","js/gtag.js":"https://open.scdn.co/cdn/js/gtag.6c80abba.js","js/gtm.js":"https://open.scdn.co/cdn/js/gtm.6d498f08.js","js/retargeting-pixels.js":"https://open.scdn.co/cdn/js/retargeting-pixels.1fa1ceda.js","js/urlRedirect.js":"https://open.scdn.co/cdn/js/urlRedirect.156df566.js","js/urlScheme.js":"https://open.scdn.co/cdn/js/urlScheme.f1e6e8b6.js"}'})||void 0===s?void 0:s.DEBUG)?class{constructor(e,t="",n=(()=>!1)){this._tagParts=[],this._tagText="",this._enabled=!0,this._level=i.NONE,this.tag="",this.description="",this._predicate=function(){return!1},this.tag=e,this.description=t,this._predicate=n,this._tagParts=e.split("."),this._tagText=`[${e}]`}_print(e,t,n){if(!(this._enabled||this._level&t))return;const i={args:n,type:e,tag:this.tag};this._predicate(i)}matchesTag(e){const t=Array.isArray(e)?e:e.split("."),n=this._tagParts;if(t.length>n.length)return!1;for(let i=0,r=t.length;i<r;i++)if(("*"!==t[i]||!n[i])&&t[i]!==n[i])return!1;return!0}setLevel(e){let t=0;switch(e){case"error":t=i.ERROR;break;case"warn":t=i.WARN|i.ERROR;break;case"info":t=i.INFO|i.WARN|i.ERROR;break;case"debug":t=i.DEBUG|i.INFO|i.WARN|i.ERROR;break;case"log":default:t=i.LOG|i.DEBUG|i.INFO|i.WARN|i.ERROR}this._level=t}enable(){this._enabled=!0}disable(){this._enabled=!1}log(...e){this._print("log",i.LOG,e)}debug(...e){this._print("debug",i.DEBUG,e)}info(...e){this._print("info",i.INFO,e)}warn(...e){this._print("warn",i.WARN,e)}error(...e){this._print("error",i.ERROR,e)}}:class{constructor(){this.tag="",this.description=""}matchesTag(){return!1}setLevel(){}enable(){}disable(){}log(){}debug(){}info(){}warn(){}error(){}},l="__dbgLoggerRegistry";let u=n.g.__dbgLoggerRegistry;u||(u={map:{},list:[],loggingPredicate:function(){}},Object.defineProperty?Object.defineProperty(n.g,l,{value:u}):n.g.__dbgLoggerRegistry=u);const d=u.map,p=u.list;function h(e){return!(!u.loggingPredicate||!u.loggingPredicate(e))}let f="log";function _(e,t){let n,i;if("string"==typeof e?(n=e.toLowerCase(),i=t):(n=e.tag,i=e.description),d.hasOwnProperty(n)&&d[n])return d[n];const r=new c(n,i,h);return r.setLevel(f),d[n]=r,p.push(r),r}var m,g;!function(e){e.KEY_SESSION_MESSAGE="message",e.KEY_SESSION_STATUSES_CHANGE="keystatuseschange",e.MEDIA_SOURCE_OPEN="sourceopen",e.MEDIA_SOURCE_CLOSE="sourceclose",e.SOURCE_BUFFER_UPDATE_END="updateend",e.MS_KEY_ADDED="mskeyadded",e.MS_KEY_ERROR="mskeyerror",e.MS_KEY_MESSAGE="mskeymessage",e.MS_NEEDKEY="msneedkey",e.WEBKIT_KEY_ADDED="webkitkeyadded",e.WEBKIT_KEY_ERROR="webkitkeyerror",e.WEBKIT_KEY_MESSAGE="webkitkeymessage",e.WEBKIT_NEEDKEY="webkitneedkey",e.V0_1B_KEY_ADDED="keyadded",e.V0_1B_KEY_ERROR="keyerror",e.V0_1B_KEY_MESSAGE="keymessage",e.V0_1B_NEEDKEY="needkey",e.MEDIA_CANPLAY="canplay",e.MEDIA_CANPLAYTHROUGH="canplaythrough",e.MEDIA_DURATIONCHANGE="durationchange",e.MEDIA_ENCRYPTED="encrypted",e.MEDIA_ENDED="ended",e.MEDIA_ERROR="error",e.MEDIA_LOADEDMETADATA="loadedmetadata",e.MEDIA_PAUSE="pause",e.MEDIA_PLAYING="playing",e.MEDIA_SEEKING="seeking",e.MEDIA_TIMEUPDATE="timeupdate",e.MEDIA_WAITING="waiting",e.INTERNAL_ENCRYPTED="__encrypted",e.INTERNAL_PLAYER_CANPLAY="__canplay",e.INTERNAL_PLAYER_CANPLAYTHROUGH="__canplaythrough",e.INTERNAL_MEDIA_REQUIRES_DURATION="__requiresduration",e.INTERNAL_PLAYER_LOADED_METADATA="__loadedmetadata",e.BUFFER_APPEND_ERROR="append_error",e.BUFFER_QUOTA_EXCEEDED="quota_exceeded",e.BUFFER_STALLED="stalled",e.BUFFER_SOURCE_OPEN="source_open",e.BUFFER_SOURCE_CLOSE="source_close",e.BUFFERING_START="buffering_start",e.BUFFERING_END="buffering_end",e.EME_LICENSE_REQUEST_ERROR="license_request_error",e.EME_LICENSE_REQUEST_CAPPED="license_request_capped",e.LIST_PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.LIST_PLAYER_BEFORE_LIST_CHANGE="before_list_change",e.LIST_PLAYER_BEFORE_NEXT="before_next",e.LIST_PLAYER_BEFORE_PLAYER_LOAD="before_player_load",e.LIST_PLAYER_BEFORE_PREVIOUS="before_previous",e.LIST_PLAYER_BEFORE_TRACK_LOAD="before_track_load",e.LIST_PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.LIST_PLAYER_BUFFER_STALLED="stalled",e.LIST_PLAYER_BUFFERING_START="buffering_start",e.LIST_PLAYER_BUFFERING_END="buffering_end",e.LIST_PLAYER_CAPPED="capped",e.LIST_PLAYER_CLEARED="cleared",e.LIST_PLAYER_DURATION_CHANGED="duration_changed",e.LIST_PLAYER_ERROR="error",e.LIST_PLAYER_ERROR_SYNC="error_sync",e.LIST_PLAYER_LIST_CHANGED="list_change",e.LIST_PLAYER_LIST_ENDED="list_ended",e.LIST_PLAYER_LOAD_VIDEO="load_video",e.LIST_PLAYER_MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.LIST_PLAYER_PAUSED="paused",e.LIST_PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.LIST_PLAYER_PLAYER_LOAD="player_load",e.LIST_PLAYER_PLAYING="playing",e.LIST_PLAYER_POSITION_CHANGED="position_changed",e.LIST_PLAYER_PROGRESS="progress",e.LIST_PLAYER_REPEAT_MODE_CHANGED="repeat_mode_changed",e.LIST_PLAYER_SHUFFLE_CHANGED="shuffle_changed",e.LIST_PLAYER_STOPPED="stopped",e.LIST_PLAYER_STOPPED_VIDEO="stopped_video",e.LIST_PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_TRACK_ENDED="track_ended",e.LIST_PLAYER_TRACK_LOADED="track_loaded",e.LIST_PLAYER_TRACK_TIMEOUT="track_timeout",e.LIST_PLAYER_TRACK_UNPLAYABLE="track_unplayable",e.LIST_PLAYER_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_VOLUME_CHANGED="volume_changed",e.LIST_PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.LIST_PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.LIST_PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.LIST_PLAYER_SEEK_HANDLED="list_player_seek_handled",e.LIST_PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.LOGGER_ERROR="error",e.PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.PLAYER_BEFORE_LOAD="before_load",e.PLAYER_BEFORE_STOP="before_stop",e.PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.PLAYER_BUFFER_STALLED="stalled",e.PLAYER_BUFFERING_START="buffering_start",e.PLAYER_BUFFERING_END="buffering_end",e.PLAYER_CAN_PRELOAD="can_preload",e.PLAYER_CAPPED="capped",e.PLAYER_DURATION_CHANGED="duration_changed",e.PLAYER_ENDED="ended",e.PLAYER_ENDED_VIDEO="ended_video",e.PLAYER_ERROR="error",e.PLAYER_WARNING="warning",e.PLAYER_FIRST_BYTES="first_bytes",e.PLAYER_KEY_RECEIVED="key",e.PLAYER_LOAD="load",e.PLAYER_LOAD_VIDEO="load_video",e.PLAYER_LOADING_FAILED="loading_failed",e.PLAYER_PAUSED="paused",e.PLAYER_PLAYING="playing",e.PLAYER_POSITION_CHANGED="position_changed",e.PLAYER_PRELOADING_ERROR="preloading_error",e.PLAYER_PROGRESS="progress",e.PLAYER_STALLED="stalled",e.PLAYER_STOPPED="stopped",e.PLAYER_STOPPED_VIDEO="stopped_video",e.PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.PLAYER_TIMEOUT="timeout",e.PLAYER_PLAYBACK_START="playback_start",e.PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.PLAYER_MUX_READY="playerready",e.PLAYER_MUX_PAUSE="pause",e.PLAYER_MUX_PLAY="play",e.PLAYER_MUX_PLAYING="playing",e.PLAYER_MUX_SEEKING="seeking",e.PLAYER_MUX_SEEKED="seeked",e.PLAYER_MUX_PROGRESS="timeupdate",e.PLAYER_MUX_ERROR="error",e.PLAYER_MUX_ENDED="ended",e.PLAYER_MUX_AD_START="adbreakstart",e.PLAYER_MUX_AD_END="adbreakend",e.PLAYER_MUX_AD_PLAY="adplay",e.PLAYER_MUX_AD_PLAYING="adplaying",e.PLAYER_MUX_AD_PAUSE="adpause",e.PLAYER_MUX_AD_ENDED="adended",e.PLAYER_MUX_AD_ERROR="aderror",e.PLAYER_MUX_AD_DESTROY="destroy",e.PLAYER_MANAGER_READY="ready",e.TRACKER_PLAYBACK_START="playback_start",e.TRACKER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.TRACKER_TRACKING_DATA_CREATED="tracking_data_created",e.TRACKER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.ABR_MANAGER_BITRATE_CHANGE="bitrate_change"}(m||(m={})),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_HARDWARE="com.microsoft.playready.hardware",e.FAIRPLAY="com.apple.fps.1_0",e.INVALID_SPOTIFY_KEY="com.spotify.invalid"}(g||(g={}));var y,E,v,S=n(99613);!function(e){e.SUCCESS="RESULT_SUCCESS",e.INVALID="RESULT_INVALID",e.FORBIDDEN="RESULT_FORBIDDEN",e.OUT_OF_BOUNDS="RESULT_OUT_OF_BOUNDS",e.NO_LIST="RESULT_NO_LIST",e.NO_TRACK="RESULT_NO_TRACK",e.LIST_END="RESULT_LIST_END",e.INVALID_TRACK="RESULT_INVALID_TRACK",e.CANCELLED="CANCELLED",e.NO_TRACK_PLAYER="NO_TRACK_PLAYER"}(y||(y={})),function(e){e.MP3="MP3",e.MP4="MP4",e.MP4_DUAL="MP4_DUAL",e.MP4_CBCS="MP4_CBCS",e.MP4_FLAC="MP4_FLAC",e.MANIFEST_ID="MANIFEST_ID"}(E||(E={})),function(e){e.VIDEO_PROFILE_CHANGED="video_profile"}(v||(v={}));class b extends Error{constructor(e,t){super(t),this.unrecoverable=!1,this.listPlayerIgnore=!1,this.debug={},this.code=e,this.message=t,this.name="PlaybackError"}static fatal(e,t){const n=new b(e,t);return n.unrecoverable=!0,n}}class T extends Error{constructor(e=S.D.EME_ERROR_UNKNOWN,t){super(t),this.status=-1,this.licenseServer="",this.shouldRefreshEndpoint=!1,this.unrecoverable=!1,this.debug={},this.code=e,this.message=t,this.name="EMEError"}static fatal(e=S.D.EME_ERROR_UNKNOWN,t){const n=new T(e,t);return n.unrecoverable=!0,n}}class R extends Error{constructor(e,t){super(t),this.name="CappingError",this.message=t,this.code=e}}function I(){let e,t;return{promise:new Promise(((n,i)=>{e=n,t=i})),resolve:e,reject:t}}function A(e){const t=document.createEvent("Event");t.initEvent("encrypted",!1,!1),t.initDataType="cenc",t.initData=e.initData,t.fromPolyfill=!0,this.dispatchEvent(t)}class k extends r.B{constructor(e){super(m.KEY_SESSION_MESSAGE,null),this.messageType="license-request",this.message=e}}class L extends r.vp{constructor(e){super(),this._nativeKeySession=null,this._lastUpdateDeferred=I(),this._lastGenerateDeferred=I(),this.addEventListener=this.addListener,this.removeEventListener=this.removeListener,this._nativeMediaKeys=e,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}_attach(){const e=this._nativeKeySession;e&&(e.addEventListener(m.MS_KEY_ADDED,this._onKeyAdded),e.addEventListener(m.MS_KEY_ERROR,this._onKeyError),e.addEventListener(m.MS_KEY_MESSAGE,this._onKeyMessage))}_detach(){const e=this._nativeKeySession;e&&(e.removeEventListener(m.MS_KEY_ADDED,this._onKeyAdded),e.removeEventListener(m.MS_KEY_ERROR,this._onKeyError),e.removeEventListener(m.MS_KEY_MESSAGE,this._onKeyMessage))}_onKeyMessage(e){e.message&&e.message.buffer&&(this.emitEvent(new k(e.message.buffer)),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null))}_onKeyAdded(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null),this.emit(m.KEY_SESSION_STATUSES_CHANGE,null)}_onKeyError(){const e=this._nativeKeySession&&this._nativeKeySession.error;this._lastGenerateDeferred&&(this._lastGenerateDeferred.reject(e),this._lastGenerateDeferred=null),this._lastUpdateDeferred&&(this._lastUpdateDeferred.reject(e),this._lastUpdateDeferred=null),this.emit(m.KEY_SESSION_STATUSES_CHANGE,null)}generateRequest(e,t){return new Promise(((e,n)=>{this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve=e,this._lastGenerateDeferred.reject=n),this._nativeKeySession=this._nativeMediaKeys.createSession("audio/mp4",new Uint8Array(t),null),this._attach()}))}update(e){return new Promise(((t,n)=>{this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve=t,this._lastGenerateDeferred.reject=n),this._nativeKeySession&&this._nativeKeySession.update(new Uint8Array(e))}))}close(){return new Promise((e=>{this._nativeKeySession&&this._nativeKeySession.close(),this._detach(),e(!0)}))}}class O{constructor(e){this._lastBoundSetter=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new MSMediaKeys(e)}attach(e){return new Promise((t=>{if(e.readyState>=1)return e.msSetMediaKeys(this._nativeMediaKeys),void t();const n=()=>{e.removeEventListener(m.MEDIA_LOADEDMETADATA,n),this._lastBoundSetter=null,e.msSetMediaKeys(this._nativeMediaKeys)};this._lastBoundSetter=n,e.addEventListener(m.MEDIA_LOADEDMETADATA,n),e.addEventListener(m.MS_NEEDKEY,A),t()}))}detach(e){this._lastBoundSetter&&(e.removeEventListener(m.MS_NEEDKEY,A),e.removeEventListener(m.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}setServerCertificate(){return Promise.reject(new T(S.D.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}createSession(){return new L(this._nativeMediaKeys)}}function C(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}class P{constructor(e,t){if(this._configuration=null,this.keySystem=e,!this._checkConfig(t))throw new T(S.D.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}_checkConfig(e){const t=this.keySystem;for(let n=0,i=e.length;n<i;n++){const i=e[n],r={initDataTypes:i.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:i.label};let o,s,a,c,l;if(i.audioCapabilities&&i.audioCapabilities.length&&r.audioCapabilities)for(l=!1,o=0,s=i.audioCapabilities.length;o<s;o++)a=i.audioCapabilities[o],a.contentType&&(c=a.contentType.split(";")[0]),MSMediaKeys.isTypeSupported(t,c)&&(r.audioCapabilities.push(a),l=!0);if(i.videoCapabilities&&i.videoCapabilities.length&&r.videoCapabilities)for(l=!1,o=0,s=i.videoCapabilities.length;o<s;o++)a=i.videoCapabilities[o],a.contentType&&(c=a.contentType.split(";")[0]),MSMediaKeys.isTypeSupported(t,c)&&(r.videoCapabilities.push(a),l=!0);if(l)return this._configuration=r,!0}return!1}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new O(this.keySystem))}))}}const w=_("eme_polyfill.v0_1b");class D extends r.vp{constructor(e,t,n){super(),this._mediaElement=null,this._lastUpdateDeferred=null,this._lastGenerateResolver=null,this.sessionId=null,this._keySystem=e,this._mediaElement=t,this._prefix=n,this.addEventListener=this.addListener,this.removeEventListener=this.removeListener}_addPrefix(e){return this._prefix?this._prefix+e.replace(/\b[a-z]/,(function(e){return e.toUpperCase()})):e}generateComplete(e){this.emitEvent(new k(e)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null)}updateComplete(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this.emit(m.KEY_SESSION_STATUSES_CHANGE,null)}handleErrorEvent(e){const t=new T(S.D.EME_MEDIA_KEY_SESSION_V0_1B_ERROR,"MediaKeySession v0.1b Error");t.debug.errorCode=e.errorCode,t.debug.systemCode=e.systemCode,!e.sessionId&&this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):e.sessionId&&this._lastUpdateDeferred?(this._lastUpdateDeferred.reject(t),this._lastUpdateDeferred=null):this.emit(m.KEY_SESSION_STATUSES_CHANGE,null)}generateRequest(e,t){return this._mediaElement?new Promise(((e,n)=>{this._lastGenerateResolver={resolve:e,reject:n};try{this._mediaElement[this._addPrefix("generateKeyRequest")](this._keySystem,new Uint8Array(t))}catch(i){n(i),this._lastGenerateResolver=null}})):Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."))}update(e){if(!this._mediaElement)return Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."));if(this._lastUpdateDeferred){const t=this.update.bind(this,e);return this._lastUpdateDeferred.promise.then(t,t)}const t=I();this._lastUpdateDeferred=t;try{this._mediaElement[this._addPrefix("addKey")](this._keySystem,new Uint8Array(e),null,this.sessionId)}catch(n){t.reject(n),this._lastUpdateDeferred=null}return t.promise}close(){if(this.sessionId&&this._mediaElement)try{this._mediaElement[this._addPrefix("cancelKeyRequest")](this._keySystem,this.sessionId)}catch(e){w.warn("Could not close keysession",e)}return Promise.resolve(!0)}}class N{constructor(e,t=""){this._mediaElement=null,this._waitingForSessionIds=[],this._sessionMap={},this.shouldRefreshPerTrack=!0,this._keySystem=e,this._prefix=t,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}attach(e){this._mediaElement=e;const t=this._prefix;e.addEventListener(t+m.V0_1B_NEEDKEY,A);const n=e.addEventListener.bind(e);n(t+m.V0_1B_KEY_ADDED,this._onKeyAdded),n(t+m.V0_1B_KEY_ERROR,this._onKeyError),n(t+m.V0_1B_KEY_MESSAGE,this._onKeyMessage)}detach(e){this._mediaElement=null;const t=this._prefix;e.removeEventListener(t+m.V0_1B_NEEDKEY,A);const n=e.removeEventListener.bind(e);n(t+m.V0_1B_KEY_ADDED,this._onKeyAdded),n(t+m.V0_1B_KEY_ERROR,this._onKeyError),n(t+m.V0_1B_KEY_MESSAGE,this._onKeyMessage)}_getSession(e){const t=this._sessionMap[e];if(t)return t;const n=this._waitingForSessionIds.shift();return n?(n.sessionId=e,this._sessionMap[e]=n,n):null}_onKeyMessage(e){const t=this._getSession(e.sessionId);t?t.generateComplete(e.message):w.warn("Got keymessage without session.")}_onKeyAdded(e){const t=this._getSession(e.sessionId);t?t.updateComplete():w.warn("Got keyadded without session.")}_onKeyError(e){const t=this._getSession(e.sessionId);t?t.handleErrorEvent(e):w.warn("Got keyerror without session.")}setServerCertificate(){return Promise.reject(new T(S.D.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}createSession(){const e=new D(this._keySystem,this._mediaElement,this._prefix);return this._waitingForSessionIds.push(e),e}}function U(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}class M{constructor(e,t,n){if(this._configuration=null,this.keySystem=e,this._prefix=n,!this._checkConfig(t))throw new T(S.D.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}_checkConfig(e){const t=this.keySystem,n=document.createElement("video");for(let i=0,r=e.length;i<r;i++){const r=e[i],o={initDataTypes:r.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:r.label};let s,a,c,l,u=!1;if(r.audioCapabilities&&r.audioCapabilities.length&&o.audioCapabilities)for(u=!1,s=0,a=r.audioCapabilities.length;s<a;s++)c=r.audioCapabilities[s],c.contentType&&(l=c.contentType.split(";")[0]),l&&n.canPlayType(l,t)&&(o.audioCapabilities.push(c),u=!0);if(r.videoCapabilities&&r.videoCapabilities.length&&o.videoCapabilities)for(u=!1,s=0,a=r.videoCapabilities.length;s<a;s++)c=r.videoCapabilities[s],l=c.contentType,c.contentType&&(l=c.contentType.split(";")[0]),l&&n.canPlayType(l,t)&&(o.videoCapabilities.push(c),u=!0);if(u)return this._configuration=o,!0}return!1}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new N(this.keySystem,this._prefix))}))}}function x(e){navigator.requestMediaKeySystemAccess=function(t,n){return new Promise((i=>{i(new M(t,n,e))}))};const t=HTMLMediaElement.prototype;delete t.mediaKeys,t.setMediaKeys=U}const F=_("eme_polyfill.safari");function B(e){const t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e?e.attach(this):Promise.resolve()}class Z extends r.vp{constructor(e,t){super(),this._attached=!1,this._nativeKeySession=null,this._lastGenerateResolver=I(),this._lastUpdateResolver=I(),this.addEventListener=this.addListener,this.removeEventListener=this.removeListener,this._nativeMediaKeys=e,this._serverCertificate=t,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}_attach(){if(this._attached)return;const e=this._nativeKeySession;e?(e.addEventListener(m.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.addEventListener(m.WEBKIT_KEY_ADDED,this._onKeyAdded),e.addEventListener(m.WEBKIT_KEY_ERROR,this._onKeyError)):F.warn("Tried to attach with no WebKitMediaKeySession")}_detach(){if(!this._attached)return;const e=this._nativeKeySession;e?(e.removeEventListener(m.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.removeEventListener(m.WEBKIT_KEY_ADDED,this._onKeyAdded),e.removeEventListener(m.WEBKIT_KEY_ERROR,this._onKeyError)):F.warn("Tried to detach with no WebKitMediaKeySession")}_onKeyMessage(e){e.message&&e.message.buffer&&(this.emitEvent(new k(e.message.buffer)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null))}_onKeyAdded(){this._lastUpdateResolver&&(this._lastUpdateResolver.resolve(!0),this._lastUpdateResolver=null),this.emit(m.KEY_SESSION_STATUSES_CHANGE,null)}_onKeyError(){const e=this._nativeKeySession&&this._nativeKeySession.error,t=new T(S.D.EME_MEDIA_KEY_SESSION_SAFARI_ERROR,e&&e.message||"MediaKeySession Safari Error");e&&(t.debug.errorCode=e.code,t.debug.systemCode=e.systemCode),this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):this._lastUpdateResolver&&(this._lastUpdateResolver.reject(t),this._lastUpdateResolver=null)}_rebuildInitData(e){const t=new Uint8Array(e);if(new DataView(t.buffer).getUint32(0,!0)+4!==t.byteLength)throw new T(S.D.EME_INIT_DATA_MALFORMED,"Malformed init data");const n=function(e){const t=Math.floor(e.byteLength/2),n=new Uint16Array(t),i=new DataView(e.buffer);for(let r=0;r<t;r++)n[r]=i.getUint16(2*r,!0);return String.fromCharCode.apply(null,n)}(t.slice(4)).match(/^skd:\/\/([0-9a-fA-F]+)/);if(!n)throw new T(S.D.EME_INIT_DATA_MALFORMED,"Invalid content ID");const i=n[1],r=new Uint8Array(function(e){const t=new Uint8Array(2*e.length),n=new DataView(t.buffer),i=e.split("");for(let r=0,o=i.length;r<o;r++){const e=i[r].charCodeAt(0);n.setUint16(2*r,e,!0)}return t.buffer}(i)),o=this._serverCertificate,s=new Uint8Array(t.byteLength+4+r.byteLength+4+o.byteLength);let a=0;s.set(t,a),a+=t.byteLength;const c=new DataView(s.buffer);return c.setUint32(a,r.byteLength,!0),a+=4,s.set(r,a),a+=r.byteLength,c.setUint32(a,o.byteLength,!0),a+=4,s.set(o,a),s}generateRequest(e,t){return new Promise(((e,n)=>{this._lastGenerateResolver={resolve:e,reject:n};try{const e=this._rebuildInitData(t);this._nativeKeySession=this._nativeMediaKeys.createSession("video/mp4",new Uint8Array(e),null),this._attach()}catch(i){this._lastGenerateResolver=null,n(i)}}))}update(e){return new Promise(((t,n)=>{if(this._lastUpdateResolver={resolve:t,reject:n},this._nativeKeySession)try{this._nativeKeySession.update(new Uint8Array(e))}catch(i){n(i)}else F.warn("Tried to update with no WebKitMediaKeySession")}))}close(){return new Promise((e=>{this._detach(),e(!0)}))}}class Y{constructor(e){this._lastBoundSetter=null,this._serverCertificate=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new WebKitMediaKeys(e)}attach(e){return new Promise((t=>{if(e.readyState>=1)return e.webkitSetMediaKeys(this._nativeMediaKeys),void t();const n=()=>{e.removeEventListener(m.MEDIA_LOADEDMETADATA,n),this._lastBoundSetter=null,e.webkitSetMediaKeys(this._nativeMediaKeys)};this._lastBoundSetter=n,e.addEventListener(m.MEDIA_LOADEDMETADATA,n),e.addEventListener(m.WEBKIT_NEEDKEY,A),t()}))}detach(e){e.removeEventListener(m.WEBKIT_NEEDKEY,A),this._lastBoundSetter&&(e.removeEventListener(m.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}setServerCertificate(e){return this._serverCertificate=new Uint8Array(e),Promise.resolve(!0)}createSession(){if(!this._serverCertificate)throw new T(S.D.EME_INVALID_STATE_ERROR,"The server certificate is not available");return new Z(this._nativeMediaKeys,this._serverCertificate)}}class K{constructor(e,t){this.keySystem=e;const n=this._checkConfig(t);if(!n)throw new T(S.D.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations");this._configuration=n}_checkConfig(e){const t=this.keySystem;let n=!1;for(const i of e){const e={initDataTypes:i.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"]};if(i.audioCapabilities)for(const r of i.audioCapabilities){if(!r.contentType)continue;const i=r.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(t,i)&&(e.audioCapabilities.push(r),n=!0)}if(i.videoCapabilities)for(const r of i.videoCapabilities){if(!r.contentType)continue;const i=r.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(t,i)&&(e.videoCapabilities.push(r),n=!0)}if(n)return e}return null}getConfiguration(){return this._configuration}createMediaKeys(){return new Promise((e=>{e(new Y(this.keySystem))}))}}const H=_("eme_polyfills.tester");function j(){return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.requestMediaKeySystemAccess)&&"undefined"==typeof WebKitMediaKeys&&"undefined"!=typeof MediaKeySystemAccess&&(null===MediaKeySystemAccess||void 0===MediaKeySystemAccess?void 0:MediaKeySystemAccess.prototype.getConfiguration)?(H.log("Using native EME implementation."),"native"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.webkitGenerateKeyRequest)?(H.log('Detected "webkit" Prefixed EME v0.1b. Polyfilling.'),x("webkit"),"v0.1b-webkit"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.generateKeyRequest)?(H.log("Detected Unprefixed EME v0.1b. Polyfilling."),x(),"v0.1b"):"undefined"!=typeof MSMediaKeys?(H.log("Detected MS IE EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((n=>{n(new P(e,t))}))};const e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=C}(),"ms-ie"):"function"==typeof WebKitMediaKeys?(H.log("Detected Safari EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((n=>{n(new K(e,t))}))};const e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=B}(),"safari"):(H.warn("Detected no EME APIs."),null)}const V={[g.WIDEVINE]:{commonName:"widevine",licenseServer:"https://@webgate/widevine-license",withCertificate:!0,pssh_field:{audio:"pssh_widevine",video:"encryption_data"}},[g.PLAYREADY]:{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}},[g.PLAYREADY_HARDWARE]:{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}},[g.FAIRPLAY]:{commonName:"fairplay",licenseServer:"https://@webgate/fairplay-license",withCertificate:!0,pssh_field:{audio:"pssh_fairplay",video:"asset_id"}},[g.INVALID_SPOTIFY_KEY]:{commonName:"spotify-invalid",licenseServer:"https://@webgate",withCertificate:!1,pssh_field:{audio:"pssh_invalid",video:"encryption_data"}}},G=[{label:"video-sw-decode",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_DECODE"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:""},{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:""},{contentType:'video/webm; codecs="vp8"',robustness:""},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:""},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:""}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}];function W(e,t){var n,i;for(let r=0,o=e.length;r<o;r++){const o=e[r],s={audioCapabilities:[],videoCapabilities:[]};let a,c,l,u,d=!1;if(null===(n=o.audioCapabilities)||void 0===n?void 0:n.length)for(d=!1,a=0,c=o.audioCapabilities.length;a<c;a++)l=o.audioCapabilities[a],u=l.contentType,u&&t(u)&&(s.audioCapabilities.push(l),d=!0);if(null===(i=o.videoCapabilities)||void 0===i?void 0:i.length)for(d=!1,a=0,c=o.videoCapabilities.length;a<c;a++)l=o.videoCapabilities[a],u=l.contentType,u&&t(u)&&(s.videoCapabilities.push(l),d=!0);if(d)return s}return null}const q=/([^;]+)(?:;\s?codecs="(.*)")?/,z=_("playback.eme_manager"),Q={EMPTY:"-no-robustness",SW_CRYPTO:"-sw-crypto",SW_DECODE:"-sw-decode",HW_CRYPTO:"-hw-crypto",HW_DECODE:"-hw-decode",HW_ALL:"-hw-all"};function X(e,t){var n;const i=[],r=new RegExp(`codecs="(${t.join("|")})"`);for(const o of e)r.test(null!==(n=o.contentType)&&void 0!==n?n:"")||i.push(o);return i.length?i:null}function $(e,{audio:t,video:n}){var i,r,o,s;if(!(null==t?void 0:t.length)&&!(null==n?void 0:n.length))return e;let{audioCapabilities:a,videoCapabilities:c}=e;return(null==t?void 0:t.length)&&(null===(i=e.audioCapabilities)||void 0===i?void 0:i.length)&&(a=null!==(r=X(e.audioCapabilities,t))&&void 0!==r?r:void 0,!a)||(null==n?void 0:n.length)&&(null===(o=e.videoCapabilities)||void 0===o?void 0:o.length)&&(c=null!==(s=X(e.videoCapabilities,n))&&void 0!==s?s:void 0,!c)?null:Object.assign(Object.assign({},e),{audioCapabilities:a,videoCapabilities:c})}class J extends r.vp{constructor(e){var t;super(),this._unauthServerCertificateBase="",this._disallowCodecs={},this._keySystemDeferred=I(),this._configuration=I(),this._keySystemSettings=null,this._keySessions=[],this._configs=[],this._pendingCertificateRequest=null,this._certificate=null,this._transport=e.transport,this._emeImpl=e.emeImpl,this._noServerCertificate=!!e.noServerCertificate,this._precacheServerCertificate=null===(t=e.precacheServerCertificate)||void 0===t||t,this._unauthServerCertificateBase=e.unauthServerCertificateBase||"https://spclient.wg.spotify.com",this._configFilter=function(e){const t=["--ensure-no-match--"];if(e&&e.length){let n=e.length;for(;n--;)Q.hasOwnProperty(e[n])&&t.push(Q[e[n]])}return new RegExp(`(${t.join("|")})$`)}(e.disallowRobustnessValues||[]),this._disallowCodecs=e.disallowCodecs,this._preferredKeySystems=e.preferredKeySystems||[g.WIDEVINE,g.PLAYREADY,g.PLAYREADY_HARDWARE,g.FAIRPLAY]}static create(e){return new Promise((t=>{const n=j();if(!n)throw T.fatal(S.D.EME_API_NOT_SUPPORTED,"Platform does not support navigator.requestMediaKeySystemAccess");t(new J(Object.assign(Object.assign({},e),{emeImpl:n})).init())}))}_prepareConfiguration(e){const t=e.getConfiguration();z.info("KeySystem configured as ",t.label),t.audioCapabilities&&t.audioCapabilities.length||this._appendProbableMediaCapabilities(e.keySystem,t);const n={keySystem:e.keySystem,keySystemImpl:this._emeImpl,audioFormats:this._parseCapabilities(t.audioCapabilities),videoFormats:this._parseCapabilities(t.videoCapabilities)};return this._keySystemSettings=V[e.keySystem],this._configuration.resolve(n),n}_parseCapabilities(e){if(!e)return[];const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i||!i.contentType)continue;const r=i.contentType.match(q);r&&t.push({contentType:i.contentType,mimeType:r[1],codec:r[2]})}return t}_appendProbableMediaCapabilities(e,t){const n=W(this._configs,(t=>(-1===t.indexOf("webm")||e!==g.PLAYREADY&&e!==g.PLAYREADY_HARDWARE)&&!!MediaSource.isTypeSupported(t)));n&&(t.audioCapabilities=n.audioCapabilities,t.videoCapabilities=n.videoCapabilities)}_trySetServerCertificate(e,t){const n=this._certificate;return(n&&n.expiry>Date.now()?Promise.resolve(n):this._requestServerCertificate(e)).then((e=>t.setServerCertificate(e.contents))).then((()=>this)).catch((e=>(z.warn("Error from setting server certificate",e),this)))}_cacheServerCertificate(e){let t="";switch(e){case g.FAIRPLAY:t="fairplay";break;case g.WIDEVINE:t="widevine";break;default:return Promise.resolve(this)}return this._requestServerCertificate(`${this._unauthServerCertificateBase}/${t}-license`,!1).then((()=>this),(e=>(z.warn("Cannot precache server certificate",e),this)))}_requestServerCertificate(e,t=!0){if(this._pendingCertificateRequest)return this._pendingCertificateRequest;return this._transport.request(`${e}/v1/application-certificate`,{authorize:t,responseType:"arraybuffer",parseResponseHeaders:!0,retry:{condition:(e,t)=>e.getStatusFamily()===t.SERVER_ERROR}}).then((e=>{var t;if(!e.body)throw new TypeError("Response body is invalid");this._pendingCertificateRequest=null;let n=3600;const i=null===(t=e.headers)||void 0===t?void 0:t.get("cache-control");if(i){const e=i.match(/(?:^|,|\s)max-age=(\d+)(?:,|$)/);e&&e[1]&&(n=1e3*parseInt(e[1],10))}return this._certificate={expiry:Date.now()+(n-600),contents:e.body},this._certificate}))}_extractPlayReadyChallenge(e,t){let n=null;const i=new Uint16Array(e),r=String.fromCharCode.apply(null,i);if(-1===r.indexOf("PlayReadyKeyMessage"))return z.info("Using unextracted PlayReady message."),e;const o=(new DOMParser).parseFromString(r,"application/xml"),s=o.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;if(s)try{n=atob(s);const e=o.getElementsByTagName("name"),t=o.getElementsByTagName("value");if(e.length!==t.length)throw new T(S.D.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")}catch(a){this.emit(m.EME_LICENSE_REQUEST_ERROR,{playId:t,error:a}),n=null}else this.emit(m.EME_LICENSE_REQUEST_ERROR,{playId:t,error:new T(S.D.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")});return n}_onMessage(e,t){e.timeMap.generate.end=Date.now();let n="message"in t?t.message:null;const i="messageType"in t?t.messageType:void 0;if(z.info("Got EME message event with type",i),n&&e.keySystem===g.PLAYREADY&&(n=this._extractPlayReadyChallenge(n,e.playId)),!n)return void z.info("Ignoring message event: no valid request payload");if(!e.licenseServer)return void z.info("Ignoring message event: no licenseServer url");e.timeMap.request.start=Date.now();let r=e.licenseServer;e.keySystem===g.FAIRPLAY&&(r=`${r}${-1!==r.indexOf("?")?"&":"?"}assetId=hex`),this._transport.request(r,{method:"POST",payload:n,responseType:"arraybuffer",retry:{condition:(e,t)=>400!==e.status&&402!==e.status&&403!==e.status&&(!e.body||e.getStatusFamily()!==t.SUCCESS)}}).then(this._handleLicenseResponse.bind(this,e))}_handleLicenseResponse(e,t){const n=t=>{t.playId=e.playId,e.licenseServer&&(t.licenseServer=e.licenseServer),this.emit(m.EME_LICENSE_REQUEST_ERROR,{playId:e.playId,error:t})};let i,r;if(e.timeMap.request.end=Date.now(),200!==t.status){try{if(t.body){const e=new Uint8Array(t.body),n=String.fromCharCode.apply(String,e);r=JSON.parse(n).errorMsg}}catch(s){}402===t.status?this.emit(m.EME_LICENSE_REQUEST_CAPPED,{playId:e.playId,error:new R(S.D.CAPPING_USER_IS_CAPPED,"User is capped.")}):400===t.status&&"widevine error"===r?(i=T.fatal(S.D.EME_LICENSE_REQUEST_WIDEVINE_ERROR,"Widevine license server failed to parse request."),i.status=t.status,i.shouldRefreshEndpoint=!0,n(i)):(i=new T(S.D.EME_LICENSE_REQUEST_FAILED_WITH_STATUS,`License request failed (${r||"unknown"})`),i.status=t.status,i.shouldRefreshEndpoint=400===t.status||403===t.status,n(i))}else{if(!t.body)return i=new T(S.D.EME_LICENSE_REQUEST_EMPTY_RESPONSE,"Empty license response body"),i.status=t.status,void n(i);try{e.timeMap.update.start=Date.now(),e.keySession.update(t.body).catch((e=>{n(new T(S.D.EME_LICENSE_UPDATE_FAILED,e.message||"License update failed."))})),z.info("KeySession updated.")}catch(o){n(new T(S.D.EME_LICENSE_UPDATE_FAILED,o.message||"License update failed."))}}}_selectKeySystem(e){const t=this._preferredKeySystems;for(let n=0,i=t.length;n<i;n++){const i=t[n];if(i in e)return e[i]}return null}_testMediaKeys(e){return new Promise((t=>{t(e.createMediaKeys())})).then((t=>{if(!t)return Promise.reject(T.fatal(S.D.EME_MEDIA_KEYS_NOT_SUPPORTED,"Cannot create MediaKeys from KeySystemAccess"));e.keySystem===g.FAIRPLAY&&t.setServerCertificate(new ArrayBuffer(0));try{if(!t.createSession())throw new Error("")}catch(n){return Promise.reject(T.fatal(S.D.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED,n.message||"Cannot create MediaKeySession from KeySystemAccess"))}return Promise.resolve(e)}),(e=>(z.error(e.name),Promise.reject(T.fatal(S.D.EME_MEDIA_KEYS_NOT_SUPPORTED,e.message||"Unknown error")))))}_saveSession(e){this._keySessions.push(e)}destroySessions(){const e=[],t=this._keySessions;for(let i=0,r=t.length;i<r;i++)try{const n=t[i],r=n.keySession;if(!r)continue;n.onMessageListener&&r.removeEventListener(m.KEY_SESSION_MESSAGE,n.onMessageListener),n.onKeyStatusChangeListener&&r.removeEventListener(m.KEY_SESSION_STATUSES_CHANGE,n.onKeyStatusChangeListener);const o=Promise.resolve(r.close()).catch((e=>{z.warn("Failed to close KeySession",e)}));e.push(o),n.keySession=null,n.onMessageListener=null,n.onKeyStatusChangeListener=null,z.info("Closed KeySession")}catch(n){z.warn("Failed to close KeySession",n)}return this._keySessions=[],Promise.all(e)}init(){const e=this._keySystemDeferred,t={},n=[],i=[];for(let r=0,o=G.length;r<o;r++){let e=G[r];if(!e.label||!this._configFilter.test(e.label)){if(this._disallowCodecs){const t=$(e,this._disallowCodecs);if(!t)continue;e=t}i.push(e)}}this._configs=i;for(const r in g){if(!Object.prototype.hasOwnProperty.call(g,r))continue;const e=r;n.push(navigator.requestMediaKeySystemAccess(g[e],i).then((e=>{t[e.keySystem]=e})).catch((()=>{})))}return Promise.all(n).then(this._selectKeySystem.bind(this,t)).then((e=>e?this._testMediaKeys(e):Promise.reject(new T(S.D.EME_NO_SUPPORTED_KEYSYSTEM,"No supported keysystem was found.")))).then((t=>(this._prepareConfiguration(t),e.resolve(t),this._precacheServerCertificate?this._cacheServerCertificate(t.keySystem):this))).catch((t=>{const n=t.code||S.D.EME_NO_SUPPORTED_KEYSYSTEM,i=t.message||"No supported keysystem";return e.reject(T.fatal(n,i)),e.promise.then((()=>this))}))}createMediaKeys(e){return this._keySystemDeferred.promise.then((e=>e.createMediaKeys())).then((t=>Promise.all([e.setMediaKeys(t),t]))).then((([t,n])=>{if(!e.mediaKeys)throw new T(S.D.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED,"Failed to set MediaKeys on HTMLMediaElement");return this._configuration.promise.then((()=>{const e=this._keySystemSettings;return e&&!this._noServerCertificate&&e.withCertificate?this._trySetServerCertificate(e.licenseServer,n):this}))}))}removeMediaKeys(e){return Promise.resolve(e.setMediaKeys(null)).then((()=>this))}getKeySystemInfo(){return this._configuration.promise}getKeySystemImpl(){return this._emeImpl}createSessionWithParams(e){return new Promise(((t,n)=>{z.info("Creating KeySession",e.keySystem);const i=e.mediaKeys.createSession(),r={generate:{start:0,end:0},request:{start:0,end:0},update:{start:0,end:0}},o=this._keySystemSettings&&this._keySystemSettings.licenseServer||void 0,s=this._onMessage.bind(this,{keySystem:e.keySystem,keySession:i,licenseServer:e.licenseServer||o,playId:e.playId,timeMap:r});i.addEventListener(m.KEY_SESSION_MESSAGE,s);const a=()=>{z.info("KeyStatus change"),r.update.end=Date.now(),t({elapsed:{generate:Math.max(r.generate.end-r.generate.start,0),request:Math.max(r.request.end-r.request.start,0),update:Math.max(r.update.end-r.update.start,0)}})};return i.addEventListener(m.KEY_SESSION_STATUSES_CHANGE,a),this._saveSession({keySession:i,onMessageListener:s,onKeyStatusChangeListener:a}),z.info("Generating KeySession request",e.keySystem),r.generate.start=Date.now(),Promise.resolve(i.generateRequest(e.initDataType,e.initData.buffer)).catch((e=>{if(!e)return;let t;switch(e.name){case"NotSupportedError":t=S.D.EME_NOT_SUPPORTED_ERROR;break;case"InvalidStateError":t=S.D.EME_INVALID_STATE_ERROR;break;default:t=S.D.EME_UNKNOWN_ERROR}n(new T(t,e.message||"Unknown error message."))}))}))}}var ee=n(41165);class te extends Error{constructor(e=S.D.STORAGE_ERROR,t="File Error"){super(t),this.canPlayNext=!0,this.debug={},this.code=e,this.message=t,this.name="FileError"}}class ne extends Error{constructor(e,t,n,i={}){super(t),this.code=e,this.message=t,this.status=n,this.debug=i,this.name="FragmentError"}}class ie{constructor(e){if(this._fallbackURLs=[],this._fragments=[],this._loaded=!1,this._mediaType="audio",this._resolvedURLs=[],this._segmentLength=0,this._duration=0,!e.fileId&&!e.resolvedURL)throw new TypeError("Missing: provide either fileId or resolvedURL");this._abrManager=e.abrManager,this._mediator=e.mediator,this._disableCache=e.disableCache,this._fileId=e.fileId,this._format=e.format,this._isAd=e.isAd||!1,this._keySystem=e.keySystem,this._keySystemSettings=V[this._keySystem],this._licenseEndpoint=e.licenseEndpoint,this._logData=e.logData||{displayTrack:"",playbackId:""},this._resolver=e.resolver,this._resolvedURL=e.resolvedURL,this._transport=e.transport,this._uri=e.uri}_parsePSSHBox(e){const t=ee.Base64.decode(e),n=new Uint8Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t.charCodeAt(i);return n}_parseAssetID(e){const t=ee.Base64.decode(e),n=new Array(t.length);for(let i=0,r=t.length;i<r;i++){const e=t.charCodeAt(i).toString(16);n[i]=1===e.length?`0${e}`:e}return n.join("")}getCalculatedDuration(){return this._duration}getFileId(){return this._fileId}getFormat(){return this._format||""}getFragmentLength(){return this._segmentLength}getInitFragment(){return this._initFragment}getInitParams(){const e={keySystem:this._keySystem,initDataType:this._protection,initData:this._psshBox,licenseServer:null};return Promise.resolve(e)}getKeySystem(){return this._keySystem}getLicenseEndpoint(){return this._licenseEndpoint}getLogData(){return this._logData||{}}getMediaType(){return this._mediaType}getResolvedURL(){return this._resolvedURL}getResolvedURLs(){return this._resolvedURLs}getHLSURL(){throw new te(S.D.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.")}getURI(){return this._uri}isAd(){return this._isAd}isProtected(){return!!this._protection&&!!this._psshBox}setLogData(e){return this._logData=e,this}toLogJSON(){return{uri:this._uri,fileId:this._fileId,format:this._format||"",resolved_url:this._resolvedURL}}}function re(e){return function(e){return`data:application/vnd.apple.mpegurl;base64,${ee.Base64.encode(e)}`}(function(e){var t;const n=function(e){return e.map((e=>{if(e.byteEnd&&void 0!==e.byteStart){let t=""+(1+e.byteEnd-e.byteStart);return t+=`@${e.byteStart}`,`#EXTINF:${e.duration},\n#EXT-X-BYTERANGE:${t}\n${e.url}`}return`#EXTINF:${e.duration},\n${e.url}`})).join("\n")}(e.segments),i=e.assetID?`#EXT-X-KEY:METHOD=SAMPLE-AES,URI="skd://${e.assetID}",KEYFORMATVERSIONS="1",KEYFORMAT="com.apple.streamingkeydelivery"`:"";let r=e.map?`#EXT-X-MAP:URI="${e.map.url}"`:"";return(null===(t=e.map)||void 0===t?void 0:t.byteEnd)&&void 0!==e.map.byteStart&&(r+=`,BYTERANGE="${1+e.map.byteEnd}@${e.map.byteStart}"`),`#EXTM3U\n#EXT-X-VERSION:6\n#EXT-X-TARGETDURATION:${Math.floor(e.targetDuration)}\n#EXT-X-MEDIA-SEQUENCE:0\n#EXT-X-PLAYLIST-TYPE:VOD\n${r?`${i}\n${r}`:i}\n${n}\n#EXT-X-ENDLIST`}(e))}const oe=/avc1\.(([0-9a-f]{2})[0-9a-f]{2}([0-9a-f]{2}))/;function se(e,t){const n=e.toLowerCase().match(oe),i=t.toLowerCase().match(oe);if(!n||!i)return!1;const[,r,o,s]=n,[,a,c,l]=i;return r===a||"4d"===o&&"4d"===c&&parseInt(s,16)>=parseInt(l,16)}function ae(e,t){return e.sort(((e,n)=>"video_bitrate"in e&&"video_bitrate"in n?t?e.video_resolution===n.video_resolution?e.video_bitrate-n.video_bitrate:e.video_resolution-n.video_resolution:e.video_bitrate-n.video_bitrate:e.max_bitrate-n.max_bitrate))}function ce(e,t){return void 0!==t&&Array.isArray(e.encryption_indices)&&-1===e.encryption_indices.indexOf(t)}function le(e,t){if(!t)return!1;return t(Object.assign({mimeType:e.mime_type},function(e){return"video_codec"in e}(e)?{type:"video",codec:e.video_codec,bitrate:e.video_bitrate,height:e.video_height,width:e.video_width}:{type:"audio",codec:e.audio_codec,bitrate:e.audio_bitrate}))}function ue(e){return"audio_codec"in e?e.audio_codec:e.video_codec}function de({codec:e,formats:t,profiles:n,encryptionIndex:i,disallowProfile:r,preferredKeySystem:o,preferredVideoResolution:s}){for(const a of t){const t=[];let c="spotify/unknown-mimetype",l="unknown-codec";for(const s of n){const n=ue(s);!(e in s)||ce(s,i)||o===g.FAIRPLAY&&"ts"!==s.file_type||le(s,r)||(o!==g.FAIRPLAY||"ts"!==s.file_type?n===l&&s.mime_type===c?t.push(s):s.mime_type===a.mimeType&&(n===a.codec||"unknown-codec"===l&&se(a.codec,n))&&(c=s.mime_type,l=n,t.push(s)):t.push(s))}if(t.length)return ae(t,s)}return[]}const pe=_("playback.video_content");function he(e){if(!e)return"";const t="audio_codec"in e?e.audio_codec:e.video_codec;return`${e.mime_type};codecs="${t}"`}const fe={method:"GET",responseType:"arraybuffer",timing:!0,retry:{condition:(e,t)=>{if(0===e.status)return!0;const n=e.getStatusFamily();return n===t.CONNECTION_ERROR||n===t.SERVER_ERROR}}};class _e extends ie{constructor(e){super(e),this._assetId="",this._endTime=0,this._videoFormats=[],this._audioFormats=[],this._subtitleLanguages=[],this._videoProfile=null,this._videoProfiles=[],this._audioProfile=null,this._audioProfiles=[],this._baseURL="",this._initTemplate="",this._segmentTemplate="",this._subtitleTemplate="",this._initSegments={},this._initTemplate="",this._isAd=e.isAd||!1,this._mediaType="video",this._resolver=e.resolver,this._videoFormats=e.videoFormats,this._audioFormats=e.audioFormats,this._disallowProfile=e.disallowProfile,this._videoResolution=e.videoResolution,this._keySystem===g.FAIRPLAY&&this._audioFormats.unshift({mimeType:"audio/mp2t",codec:"mp4a.40.2"}),this._parseFragmentResponse=this._parseFragmentResponse.bind(this)}static create(e){return new _e(e)}_isQualityMatched(e,t,n){var i,r,o,s;if(this._videoResolution){const t=null!==(i=this._videoResolution.max)&&void 0!==i?i:Number.MAX_SAFE_INTEGER,s=null!==(r=this._videoResolution.min)&&void 0!==r?r:0;if(n){const n=null!==(o=this._videoResolution.start)&&void 0!==o?o:t;return e.video_resolution<=n}return e.video_resolution>=s&&e.video_resolution<=t}const a=null!==(s=null==t?void 0:t.max_bitrate)&&void 0!==s?s:0,c=this._abrManager.getBandwidthEstimate();return e.max_bitrate+a<c-1e5}_updateVariants(e){var t;const n=this._audioProfiles[0];this._audioProfile=null!=n?n:null;const i=this._videoProfiles,r=this._videoProfile;let o=null,s=i.length;if(s){for(;s--;){const t=i[s];if(this._isQualityMatched(t,n,!!e)){o=t;break}}o||(o=i[0]),this._videoProfile=o,(null==r?void 0:r.id)!==o.id&&(null===(t=this._mediator)||void 0===t||t.emit(v.VIDEO_PROFILE_CHANGED,{profile:{type:"video",mimeType:o.mime_type,codec:o.video_codec,bitrate:o.video_bitrate,height:o.video_height,width:o.video_width}}))}}_constructFragmentURL(e,t,n){if(!t&&!n)throw new Error("Both audioProfile and videoProfile is null");return e.init?this._resolver.getInitSegmentURLs(this._baseURL,this._initTemplate,t,n):this._resolver.getSegmentURLs(this._baseURL,this._segmentTemplate,e.timeStart,t,n)}_fetchBufferData(e,t,n,i){return this._transport.request(e,Object.assign(Object.assign({},fe),{metadata:{timeStart:Date.now(),fragment:t,profile:n,loggingURL:i}})).then(this._parseFragmentResponse)}_fetchInitSegmentBuffers(e,t){const n=this._initFragment;if(!n)return Promise.reject(new te(S.D.FILE_NOT_RESOLVED,"Cannot fetch Init Segment buffers: File not resolved."));let i;try{i=this._constructFragmentURL(n,e,t)}catch(a){return Promise.reject(a)}const r=this._initSegments;let o=Promise.resolve(null);if(e){const t=r[e.id];(null==t?void 0:t.buffer.byteLength)?o=Promise.resolve(t):(null==i?void 0:i.audio)&&(o=this._fetchBufferData(i.audio,n,e,i.audioLogging).then((t=>(r[e.id]=t,t))))}let s=Promise.resolve(null);if(t){const e=r[t.id];(null==e?void 0:e.buffer.byteLength)?s=Promise.resolve(e):(null==i?void 0:i.video)&&(s=this._fetchBufferData(i.video,n,t,i.videoLogging).then((e=>(r[t.id]=e,e))))}return Promise.all([o,s]).then((([e,t])=>({audio:e,video:t})))}_fetchBufferForFragment(e,t,n){let i;try{i=this._constructFragmentURL(e,t,n)}catch(r){return Promise.reject(r)}return Promise.all([this._fetchInitSegmentBuffers(t,n),!e.init&&i.audio?this._fetchBufferData(i.audio,e,t,i.audioLogging):null,!e.init&&i.video?this._fetchBufferData(i.video,e,n,i.videoLogging):null]).then((([t,n,i])=>{var r,o;let s;return e.init?s={audio:null!==(r=t.audio)&&void 0!==r?r:void 0,video:null!==(o=t.video)&&void 0!==o?o:void 0}:(s={audio:null!=n?n:void 0,video:null!=i?i:void 0},e.cacheBufferSet&&(e.bufferSet=s),s.audio&&(null==t?void 0:t.audio)&&(s.audio.initBuffer=t.audio.buffer),s.video&&(null==t?void 0:t.video)&&(s.video.initBuffer=t.video.buffer)),s})).catch((e=>Promise.reject(e)))}_parseFragmentResponse(e){const{fragment:t,profile:n,timeStart:i,loggingURL:r}=e.metadata,o=he(n),s=function(e){return e?"audio_bitrate"in e?e.audio_bitrate:e.video_bitrate:0}(n),a="video_resolution"in n?n.video_resolution:void 0,c=`${t.timeStart}-${t.timeEnd}`;switch(e.status){case 0:return Promise.reject(new ne(S.D.FRAGMENT_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:c,mimetype:o,resolution:a,bitrate:s}));case 200:case 206:{const t=e.body;if(!(null==t?void 0:t.byteLength))return Promise.reject(new ne(S.D.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:c,mimetype:o,resolution:a,bitrate:s}));const l=t.byteLength;return this._abrManager.sample(l,Date.now()-i),this._updateVariants(),Promise.resolve({profileId:`${this._fileId}-${n.id}`,bufferURL:r,buffer:t,byteStart:0,byteEnd:l-1,mimetype:o,resolution:a,bitrate:s,bandwidth:8e3*l/e.timing.completed})}}return Promise.reject(new ne(S.D.FRAGMENT_REQUEST_FAILED_WITH_STATUS,`Buffer request failed with status ${e.status}`,e.status,{time_range:c,mimetype:o,resolution:a,bitrate:s}))}_getHLSURLForProfile(e){const t=this._duration,n=this._segmentLength,i=this._segmentTemplate,r=[];for(let o=0;o<t;o+=n){const s=o+n>t?t-o:n,a=i.replace("{{profile_id}}",e.id.toString(10)).replace("{{segment_timestamp}}",o.toString(10)).replace("{{file_type}}",e.file_type);r.push({duration:s,url:`${this._baseURL}${a}`})}return re({assetID:this._assetId,targetDuration:n,segments:r})}_calculateFragments(e){this._duration=e.end_time_millis/1e3;const t=this._segmentLength;this._initFragment={init:!0,cacheBufferSet:!1,timeStart:-1,timeEnd:-1,byteRanges:{}};for(let n=0;n<this._duration;n+=t)this._fragments.push({cacheBufferSet:!n&&!this._disableCache,timeStart:n,timeEnd:n+t,byteRanges:{}})}setVideoResolution(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._updateVariants()}getCurrentBitrate(){var e,t;return null!==(t=null===(e=this._videoProfile)||void 0===e?void 0:e.video_bitrate)&&void 0!==t?t:0}getBufferForFragment(e){var t;if(!e)return Promise.reject(new TypeError("No fragment provided"));const n=this._audioProfile,i=this._videoProfile;return e.bufferSet&&(!i||(null===(t=e.bufferSet.video)||void 0===t?void 0:t.resolution)&&e.bufferSet.video.resolution>=i.video_resolution)?Promise.resolve(e.bufferSet):this._fetchBufferForFragment(e,null!=n?n:void 0,null!=i?i:void 0)}clearCachedBuffers(){this._initFragment&&(this._initSegments={}),this._fragments.forEach((function(e){e.bufferSet=null}))}getDuration(){return this._endTime}getFragmentAfterTime(e){if(null===this._fragments)return null;if(0===e||.01===e)return this._fragments[1];for(const t of this._fragments)if(t.timeStart>e)return t;return null}getFragmentForTime(e){if(null===this._fragments)return null;if(0===e||.01===e)return this._fragments[0];for(const t of this._fragments)if(t.timeStart<=e&&t.timeEnd>=e)return t;return null}getSubtitleLanguages(){return this._subtitleLanguages}getSubtitles(){return this._subtitleLanguages.map((e=>({lang:e,url:this._subtitleTemplate.replace("{{language_code}}",e)})))}load(e={resolveLatency:0,manifestLatency:0}){if(this._loaded)return e.resolveLatency=0,e.manifestLatency=0,Promise.resolve(this);if(!this._fileId)throw new TypeError("Missing: provide either fileId or resolvedURL");const t=Date.now();return this._resolver.getManifest(this._fileId).then((n=>{var i,r;let o;e.resolveLatency=0,e.manifestLatency=Date.now()-t;const s=n.contents[0];if(!s)return o=new te(S.D.FILE_MALFORMED_SEEKTABLE,"Malformed seektable: no contents."),o.track=this.toLogJSON(),Promise.reject(o);let a;if(this._resolvedURLs=n.base_urls.slice(),this._baseURL=n.base_urls.shift()||"",this._resolvedURL=this._baseURL,this._fallbackURLs=n.base_urls,this._initTemplate=n.initialization_template,this._segmentTemplate=n.segment_template,this._segmentLength=s.segment_length,null===(i=s.encryption_infos)||void 0===i?void 0:i.length){const e=s.encryption_infos,t=this._keySystemSettings.commonName;let n;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r&&r.key_system===t){a=i,n=r[this._keySystemSettings.pssh_field.video];break}}if(!n)return o=new te(S.D.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),o.track=this.toLogJSON(),Promise.reject(o);switch(this._keySystemSettings.commonName){case"widevine":case"playready":this._protection="cenc";try{this._psshBox=this._parsePSSHBox(n)}catch(c){return o=new te(S.D.FILE_MALFORMED_PSSH,"Invalid PSSH value."),o.track=this.toLogJSON(),Promise.reject(o)}break;case"fairplay":this._protection="hls",this._psshBox=new Uint8Array([]);try{this._assetId=this._parseAssetID(n)}catch(c){return o=new te(S.D.FILE_MALFORMED_PSSH,"Invalid PSSH value."),o.track=this.toLogJSON(),Promise.reject(o)}break;default:return o=new te(S.D.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),o.track=this.toLogJSON(),Promise.reject(o)}}return this._endTime=n.end_time_millis,this._videoProfiles=de({codec:"video_codec",formats:this._videoFormats,profiles:s.profiles,encryptionIndex:a,disallowProfile:this._disallowProfile,preferredKeySystem:this._keySystem,preferredVideoResolution:this._videoResolution}),this._audioProfiles=de({codec:"audio_codec",formats:this._audioFormats,profiles:s.profiles,encryptionIndex:a,preferredKeySystem:this._keySystem}),this._updateVariants(!0),this._calculateFragments(n),this._subtitleLanguages=n.subtitle_language_codes||[],(null===(r=n.subtitle_base_urls)||void 0===r?void 0:r.length)&&n.subtitle_template?this._subtitleTemplate=`${n.subtitle_base_urls[0]}${n.subtitle_template}`:(pe.info("No subtitles available"),this._subtitleTemplate=""),this}))}adaptToBandwidth(){return this._updateVariants(),Promise.resolve(!0)}getResolveLatency(){}getPlayableCodecs(){var e,t;return[he(null!==(e=this._audioProfile)&&void 0!==e?e:void 0),he(null!==(t=this._videoProfile)&&void 0!==t?t:void 0)].filter((e=>!!e))}getAudioProfile(){return this._audioProfile}getVideoProfile(){return this._videoProfile}getVideoProfiles(){return this._videoProfiles}getHLSURL(){if(!this._resolvedURL)throw new te(S.D.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");const e=[],t=this._audioProfiles[0];t&&e.push(`#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",LANGUAGE="eng",NAME="English",AUTOSELECT=YES,URI="${this._getHLSURLForProfile(t)}"`);for(const i of this._videoProfiles)e.push(`#EXT-X-STREAM-INF:BANDWIDTH=${i.max_bitrate},RESOLUTION=${i.video_width}x${i.video_height},CODECS="${(null==t?void 0:t.audio_codec)?`mp4a.40.2, ${i.video_codec}`:i.video_codec}"${(null==t?void 0:t.audio_codec)?',AUDIO="audio"':""}\n${this._getHLSURLForProfile(i)}`);const n=`#EXTM3U\n${e.join("\n")}`;return`data:application/vnd.apple.mpegurl;base64,${ee.Base64.encode(n)}`}}var me;!function(e){e[e.MP3_256=3]="MP3_256",e[e.MP3_320=4]="MP3_320",e[e.MP3_160=5]="MP3_160",e[e.MP3_96=6]="MP3_96",e[e.MP4_128=10]="MP4_128",e[e.MP4_256=11]="MP4_256",e[e.MP4_128_DUAL=12]="MP4_128_DUAL",e[e.MP4_256_DUAL=13]="MP4_256_DUAL",e[e.MP4_128_CBCS=14]="MP4_128_CBCS",e[e.MP4_256_CBCS=15]="MP4_256_CBCS",e[e.MP4_FLAC=17]="MP4_FLAC"}(me||(me={}));const ge={[me.MP3_256]:"audio/mp3",[me.MP3_320]:"audio/mp3",[me.MP3_160]:"audio/mp3",[me.MP3_96]:"audio/mp3",[me.MP4_128]:'audio/mp4; codecs="mp4a.40.2"',[me.MP4_256]:'audio/mp4; codecs="mp4a.40.2"',[me.MP4_128_DUAL]:'audio/mp4; codecs="mp4a.40.2"',[me.MP4_256_DUAL]:'audio/mp4; codecs="mp4a.40.2"',[me.MP4_128_CBCS]:'audio/mp4; codecs="mp4a.40.2"',[me.MP4_256_CBCS]:'audio/mp4; codecs="mp4a.40.2"',[me.MP4_FLAC]:'audio/mp4; codecs="flac"'};class ye extends ie{constructor(e){if(super(e),this._lastResolveTimestamp=0,this._profileId=`${Date.now()}`,this._initBufferPromise=null,this._lastFetchedBuffer=null,this._bypassResolve=!!this._resolvedURL,this._emitWarning=e.emitWarning||function(){},this._mediaType="audio",this._noManifest=!!e.noManifest,this._preloadedManifest=e.preloadedManifest,this._resolver=e.resolver,this._segmentLength=0,this._fileFormat=e.fileFormat,this._fileFormat)this._audioCodec=ge[this._fileFormat];else switch(this._format){case E.MP3:this._audioCodec=ge[me.MP3_160];break;case E.MP4:case E.MP4_DUAL:case E.MP4_CBCS:this._audioCodec=ge[me.MP4_128];break;default:throw new TypeError(`Unknown audio format ${this._format}`)}this._fileId&&(this._profileId=this._fileId),this._parseFragmentResponse=this._parseFragmentResponse.bind(this)}static create(e){return new ye(e)}_parseFragmentResponse(e){const{requestURL:t,fragment:n,byteRangeHeader:i,expectedLength:r}=e.metadata,o=`${n.timeStart}-${n.timeEnd}`;switch(e.status){case 0:{if(e.offline)return Promise.reject(new ne(S.D.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:o,byte_range:i}));const r=new ne(S.D.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0);let s=!1;return this._resolvedURL!==t?s=!0:this._fallbackURLs.length&&this._resolvedURL===t&&(s=!0,this._resolvedURL=this._fallbackURLs.shift()),r.debug.has_fallback=s,s?(this._emitWarning(r,this.toLogJSON()),this.getBufferForFragment(n)):Promise.reject(r)}case 200:case 206:{const s=e.body;if(!s)return Promise.reject(new ne(S.D.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:o,byte_range:i}));if(s.byteLength!==r)return Promise.reject(new ne(S.D.FRAGMENT_REQUEST_UNEXPECTED_LENGTH,"Received buffer of unexpected length.",e.status,{time_range:o,byte_range:i,received_length:s.byteLength,expected_length:r}));const a={audio:{profileId:this._profileId,bufferURL:t,byteStart:n.byteRanges.audio.start,byteEnd:n.byteRanges.audio.end,buffer:s,mimetype:this._audioCodec,bandwidth:8e3*s.byteLength/e.timing.completed}};if(n.cacheBufferSet&&s&&s.byteLength){n.bufferSet=a;const e=n.sliceInto;if(null==e?void 0:e.length)for(const t of e){const e=t.fragment;(null==e?void 0:e.cacheBufferSet)&&(e.bufferSet={audio:Object.assign(Object.assign({},a.audio),{buffer:s.slice(t.start,t.end),byteStart:e.byteRanges.audio.start,byteEnd:e.byteRanges.audio.end})})}}return this._abrManager.sample(s.byteLength,e.timing.completed),Promise.resolve(a)}case 403:return this.resolve().then((()=>this.getBufferForFragment(n)));default:{let r=!1;return this._resolvedURL!==t?r=!0:this._fallbackURLs.length&&this._resolvedURL===t&&(r=!0,this._resolvedURL=this._fallbackURLs.shift()),r?this.getBufferForFragment(n):Promise.reject(new ne(S.D.FRAGMENT_REQUEST_FAILED_WITH_STATUS,`Buffer request failed with status ${e.status}`,e.status,{time_range:o,byte_range:i}))}}}_getInitBuffer(){var e,t;if(!this._initFragment)throw new te(S.D.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return(null===(t=null===(e=this._initFragment.bufferSet)||void 0===e?void 0:e.audio)||void 0===t?void 0:t.buffer.byteLength)?Promise.resolve(this._initFragment.bufferSet.audio.buffer):(this._initBufferPromise||(this._initBufferPromise=this.getBufferForFragment(this._initFragment).then((e=>{var t;if(!(null===(t=e.audio)||void 0===t?void 0:t.buffer.byteLength))throw new Error("Empty initialization segment buffer");return e.audio.buffer}))),this._initBufferPromise)}_calculateFragments(e){let t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};const n=e.segments,i=e.timescale,r=n.length,o=new Array(r);let s=0,a=0;for(let c=0,l=r;c<l;c++){const e=n[c],r=e[0],l=e[1],u=l/i,d={init:!1,cacheBufferSet:!c&&!this._disableCache,timeStart:s,timeEnd:s+u,byteRanges:{audio:{start:t,end:t+(r-1)}}};o[c]=d,t+=r,a+=l,s+=u,Math.floor(u)>this._segmentLength&&(this._segmentLength=Math.floor(u))}o[o.length-1].isLastFragment=!0,this._fragments=o,this._duration=a/i}_calculateFragmentsV1(e){let t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};const n=e.references,i=e.timescale,r=n.length,o=new Array(r);let s=0,a=0;for(let c=0,l=r;c<l;c++){const e=n[c],r=e.duration/i,l={init:!1,cacheBufferSet:!c&&!this._disableCache,timeStart:a,timeEnd:a+r,byteRanges:{audio:{start:t,end:t+(e.size-1)}}};o[c]=l,t+=e.size,s+=e.duration,a+=r,Math.floor(r)>this._segmentLength&&(this._segmentLength=Math.floor(r))}o[o.length-1].isLastFragment=!0,this._fragments=o,this._duration=s/i}_getManifest(e){if(this._noManifest)return e&&(e.manifestLatency=0),Promise.resolve(null);if(this._preloadedManifest)return e&&(e.manifestLatency=0),Promise.resolve(this._preloadedManifest);if(!this._fileId)throw new TypeError("Missing: fileId");const t=Date.now();return this._resolver.getManifest(this._fileId).then((function(n){return e&&(e.manifestLatency=Date.now()-t),n}))}getHLSURL(){var e,t;const n=this._resolvedURL,i=this._initFragment;if(!n||!i)throw new te(S.D.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");const r={url:n,byteStart:null===(e=i.byteRanges.audio)||void 0===e?void 0:e.start,byteEnd:null===(t=i.byteRanges.audio)||void 0===t?void 0:t.end},o=this._fragments.map((e=>{var t,i;return{url:n,duration:e.timeEnd-e.timeStart,byteStart:null===(t=e.byteRanges.audio)||void 0===t?void 0:t.start,byteEnd:null===(i=e.byteRanges.audio)||void 0===i?void 0:i.end}}));return re({assetID:this._fileId,targetDuration:10,map:r,segments:o})}clearCachedBuffers(){this._headFragment&&delete this._headFragment,this._initFragment&&(this._initFragment.bufferSet=null),this._fragments[0]&&(this._fragments[0].bufferSet=null),this._lastFetchedBuffer=null}getPlayableCodecs(){return[this._audioCodec]}getFirstFragment(){return this._fragments[0]}getHeadFragment(){const e=this._initFragment,t=this._fragments[0];if(!(null==e?void 0:e.byteRanges.audio)||!(null==t?void 0:t.byteRanges.audio))throw new te(S.D.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return this._headFragment||(this._headFragment={init:!0,cacheBufferSet:!0,timeStart:0,timeEnd:0,byteRanges:{audio:{start:e.byteRanges.audio.start,end:t.byteRanges.audio.end}},sliceInto:[{fragment:e,start:0,end:t.byteRanges.audio.start},{fragment:t,start:t.byteRanges.audio.start,end:void 0}]}),this._headFragment}getFragmentAfterTime(e){if(null===this._fragments)return null;if(0===e||.01===e)return this._fragments[1];for(const t of this._fragments)if(t.timeStart>e)return t;return null}getFragmentForTime(e){if(null===this._fragments)return null;if(0===e||.01===e)return this._fragments[0];for(const t of this._fragments)if(t.timeStart<=e&&t.timeEnd>=e)return t;return null}getBufferForFragment(e){var t;if(!e)return Promise.reject(new Error("FIXME: error type?"));if((null===(t=this._lastFetchedBuffer)||void 0===t?void 0:t.fragment)===e)return Promise.resolve(this._lastFetchedBuffer.bufferSet);if(e.bufferSet)return Promise.resolve(e.bufferSet);if(!this._resolvedURL)return Promise.reject(new te(S.D.FILE_NOT_RESOLVED,"Cannot fetch buffer: No resolved URL"));const n=e.byteRanges.audio,i=`${n.start}-${n.end}`,r=n.end+1-n.start,o=this._resolvedURL,s=e.init?Promise.resolve(null):this._getInitBuffer();return Promise.all([s,this._transport.request(o,{method:"GET",responseType:"arraybuffer",headers:{Range:`bytes=${i}`},timing:!0,metadata:{requestURL:o,fragment:e,byteRangeHeader:i,expectedLength:r},retry:{condition:(e,t)=>{if(0===e.status)return e.offline;const n=e.getStatusFamily();return n===t.CONNECTION_ERROR||n===t.SERVER_ERROR||!(n!==t.SUCCESS||!e.body)&&e.body.byteLength!==r}}}).then(this._parseFragmentResponse)]).then((([t,n])=>(t&&n.audio&&(n.audio.initBuffer=t),this._lastFetchedBuffer={fragment:e,bufferSet:n},n)))}resolve(e){const t=this._fileId;if(this._bypassResolve)return e&&(e.resolveLatency=0),Promise.resolve({uri:this._resolvedURL,uris:[],protection:this._preloadedManifest||!this._noManifest?"cenc":void 0});if(!t)throw new TypeError("Missing: fileId is required to resolve content URL");clearTimeout(this._lastResolveToken);const n=()=>(this._lastResolveTimestamp=Date.now(),this._resolver.getCDNURL(t,this._fileFormat).then((t=>(e&&(e.resolveLatency=Date.now()-this._lastResolveTimestamp),t)))),i=Date.now()-this._lastResolveTimestamp;let r;return r=i<1001?new Promise(((e,t)=>{this._lastResolveToken=setTimeout((()=>{n().then(e,t)}),1001-i)})):n(),r.then((e=>{this._resolvedURLs=[];for(let t=0,n=e.uris.length;t<n;t++){const n=e.uris[t].split("?")[0];this._resolvedURLs.push(n)}return this._fallbackURLs=e.uris,this._resolvedURL=this._fallbackURLs.shift(),e})).catch((e=>(e&&(e.track=this.toLogJSON()),Promise.reject(e))))}load(e={resolveLatency:0,manifestLatency:0}){return this._loaded?(e.resolveLatency=0,e.manifestLatency=0,Promise.resolve(this)):Promise.all([this.resolve(e),this._getManifest(e)]).then((([e,t])=>{var n;if(this._loaded=!0,!e.protection||!t)return this;if(this._keySystem===g.INVALID_SPOTIFY_KEY)return this._protection=t.protection||"cenc",this._psshBox=new Uint8Array(0),this;let i;const r=this._keySystemSettings.pssh_field.audio;let o=function(e,t){return t.hasOwnProperty(e)}(r,t)?t[r]:null;if(!o&&"pssh_widevine"===r&&"pssh"in t&&(o=null!==(n=t.pssh)&&void 0!==n?n:null),!o)return i=new te(S.D.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format."),i.track=this.toLogJSON(),Promise.reject(i);if(this._protection=t.protection||"cenc",this._psshBox=this._parsePSSHBox(o),"segments"in t&&t.segments)this._calculateFragments(t);else{if(!("references"in t)||!t.references)return i=new te(S.D.FILE_MALFORMED_SEEKTABLE,"Malformed seektable."),i.track=this.toLogJSON(),Promise.reject(i);this._calculateFragmentsV1(t)}return this}))}adaptToBandwidth(){return Promise.resolve(!1)}}const Ee=_("playback.content_buffer");var ve;function Se(){}!function(e){e[e.AUDIO=10]="AUDIO",e[e.VIDEO=20]="VIDEO"}(ve||(ve={}));class be extends r.vp{constructor(e,t=[],n={}){super(),this._mediaSource=null,this._sourceBuffers={},this._appendingFragments=[],this._currentInitSegments={},this._updateQueue=[],this._codecs=[],this._playId=0,this._lastBufferClearTime=Date.now(),this._codecs=t,this._tracker=e,this._disableBufferAbort=!!n.disableBufferAbort,this._onSourceOpen=this._onSourceOpen.bind(this),this._onSourceClose=this._onSourceClose.bind(this),this.dequeueUpdates=this.dequeueUpdates.bind(this),n.noInit||this._init()}static create(e,t=[],n={}){return new be(e,t,n)}_init(){this._mediaSource=new MediaSource,this._mediaSource.addEventListener(m.MEDIA_SOURCE_OPEN,this._onSourceOpen),this._mediaSource.addEventListener(m.MEDIA_SOURCE_CLOSE,this._onSourceClose),this._sourceBuffers={},this._currentInitSegments={}}_onSourceOpen(){Ee.info("MediaSource opened.");const e=this._mediaSource;if(e&&0===e.sourceBuffers.length&&"open"===e.readyState){Ee.info("Creating source buffers for codecs",this._codecs);for(let e=0,t=this._codecs.length;e<t;e++)this._addSourceBuffer(this._codecs[e])}this.dequeueUpdates(),this.emit(m.BUFFER_SOURCE_OPEN,null)}_onSourceClose(){Ee.info("MediaSource closed."),this._destroySourceBuffers(),this.emit(m.BUFFER_SOURCE_CLOSE,null)}_removeAppendingFragment(e){if(!e)return;const t=this._appendingFragments,n=t.indexOf(e);-1!==n&&t.splice(n,1)}_addSourceBuffer(e){if(this._mediaSource){const t=this._mediaSource.addSourceBuffer(e);t.addEventListener(m.SOURCE_BUFFER_UPDATE_END,this.dequeueUpdates),this._sourceBuffers[e]=t}}_trackBufferingProgress(e){e.audio&&e.audio.buffer&&this._tracker.trackBytesDownloaded(e.audio.buffer.byteLength),e.video&&e.video.buffer&&this._tracker.trackBytesDownloaded(e.video.buffer.byteLength)}_checkStalling(e,t,n){var i,r;const o=t.byteRanges.video?t.byteRanges.video.start:null!==(r=null===(i=t.byteRanges.audio)||void 0===i?void 0:i.start)&&void 0!==r?r:-1;var s;e>9e3&&this.emit(m.BUFFER_STALLED,{byteStart:o,timeStart:(s=t.timeStart,Math.ceil(1e3*s)),stallAmount:e-9e3,didTimeout:n})}_appendBufferData(e,t,n,i=Date.now()){this.emit(m.BUFFERING_END,null);const r=[];if(e.audio){const o=I();this.tryUpdate({playId:n,timestamp:i,fragment:t,type:"append",profileId:e.audio.profileId,buffer:e.audio.buffer,initBuffer:e.audio.initBuffer,codec:e.audio.mimetype,init:!!t.init,resolve:o.resolve}),r.push(o.promise),null!==e.audio.bandwidth&&this._tracker.trackBufferURL(e.audio.bufferURL||"",{bandwidth:e.audio.bandwidth||0})}if(e.video){const o=I();this.tryUpdate({playId:n,timestamp:i,fragment:t,type:"append",profileId:e.video.profileId,buffer:e.video.buffer,initBuffer:e.video.initBuffer,codec:e.video.mimetype,init:!!t.init,resolve:o.resolve}),r.push(o.promise),null!==e.video.bandwidth&&this._tracker.trackBufferURL(e.video.bufferURL||"",{bandwidth:e.video.bandwidth||0})}return Promise.all(r)}_appendUpdate(e){var t,n;const i=this._sourceBuffers[e.codec];if(!i||i.updating)return void this._updateQueue.push(e);let r=e.buffer;if(e.fragment.init&&this._currentInitSegments[e.codec]===e.profileId)return null===(t=e.resolve)||void 0===t||t.call(e,!0),void Promise.resolve().then(this.dequeueUpdates);if(e.initBuffer&&e.buffer&&this._currentInitSegments[e.codec]!==e.profileId){const t=new Uint8Array(e.initBuffer.byteLength+e.buffer.byteLength);t.set(new Uint8Array(e.initBuffer),0),t.set(new Uint8Array(e.buffer),e.initBuffer.byteLength),r=t.buffer}try{i.appendBuffer(r)}catch(s){let t=!1;return"QuotaExceededError"===s.name?(Ee.warn("Failed to append buffer: exceeded quota."),t=!0,this.emitSync(m.BUFFER_QUOTA_EXCEEDED,null)):Ee.warn("Failed to append buffer",s),void new Promise((e=>{t?setTimeout(e,500):e()})).then((()=>{this._removeAppendingFragment(e.fragment),this.dequeueUpdates()})).then((()=>{e.init&&this._updateQueue.push(e)}))}this._removeAppendingFragment(e.fragment);const o=r.byteLength>e.buffer.byteLength;(e.fragment.init||o)&&(this._currentInitSegments[e.codec]=e.profileId),null===(n=e.resolve)||void 0===n||n.call(e,!0),o?Ee.info(`Injected combined init segment and playable segment (${e.codec}, ${e.profileId})`):e.init&&Ee.info(`Injected individual init segment (${e.codec}, ${e.profileId})`)}_abortUpdate(e){"fragment"in e&&this._removeAppendingFragment(e.fragment),e.resolve&&e.resolve(!1),Promise.resolve().then(this.dequeueUpdates)}_processUpdate(e){"end"===e.type?this._endUpdate(e):"duration"===e.type?this._durationUpdate(e):"append"===e.type&&this._appendUpdate(e)}_isUpdating(){if(!this._mediaSource)return!1;const e=this._mediaSource.sourceBuffers;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n&&n.updating)return!0}return!1}_endUpdate(e){this._isUpdating()?this._updateQueue.push(e):this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.endOfStream(),e.resolve&&e.resolve(!0))}_durationUpdate(e){this._isUpdating()?this._updateQueue.push(e):(this._mediaSource&&(this._mediaSource.duration=e.duration),e.resolve&&e.resolve(!0))}_destroySourceBuffers(){const e=this._mediaSource;if(!e)return;const t=e.sourceBuffers;if(t.length)for(let i=0,r=t.length;i<r;i++){const r=t[i];r.removeEventListener("updateend",this.dequeueUpdates);try{e.removeSourceBuffer(r),Ee.info("Removed source buffer")}catch(n){Ee.warn("Failed to remove sourcebuffer",n)}}this._sourceBuffers={},this._currentInitSegments={}}_endOfStream(){this._mediaSource&&"ended"!==this._mediaSource.readyState&&this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"end"})}dequeueUpdates(){const e=this._updateQueue.shift();e&&this.tryUpdate(e)}appendFragment(e,t,n=!1){if(-1!==this._appendingFragments.indexOf(t))return Promise.resolve([]);this._appendingFragments.push(t),this.emit(m.BUFFERING_START,null);const i=Date.now(),r=this._playId,o=e.toLogJSON();return e.getBufferForFragment(t).then((e=>(this._trackBufferingProgress(e),r!==this._playId?(Ee.info("Append fragment dropped: playId has changed."),[]):(n||this._checkStalling(Date.now()-i,t,!1),this._appendBufferData(e,t,r,i))))).catch((e=>(this._removeAppendingFragment(t),n||this._checkStalling(Date.now()-i,t,!0),this.emit(m.BUFFER_APPEND_ERROR,{error:e,canPlayNext:!0,track:o}),Promise.reject(e))))}abort(e=!1){if(this._lastBufferClearTime=Date.now(),this._appendingFragments=[],this._disableBufferAbort)Ee.info("MediaSource abort skipped; action disabled.");else{if(this._mediaSource){const n=this._mediaSource.sourceBuffers;for(let i=0,r=n.length;i<r;i++)if("open"===this._mediaSource.readyState){const r=n[i];try{r.abort();const t=r.buffered;if(e&&t.length){const e=t.start(0),n=t.end(t.length-1);r.remove(e,n),Ee.info("Cleared buffer range",e,n)}}catch(t){Ee.warn("ContentBuffer.clear failed.",t)}}}this._currentInitSegments={}}}getMediaSource(){return this._mediaSource}tryUpdate(e){if(!e)return;if(e.playId!==this._playId)return Ee.info("Try update dropped: playId has changed"),void this._abortUpdate(e);if(e.timestamp<this._lastBufferClearTime)return Ee.info("Try update dropped: update is older than the last clear"),void this._abortUpdate(e);const t=this._mediaSource;t&&"open"!==t.readyState&&"ended"!==t.readyState?this._updateQueue.push(e):this._processUpdate(e)}destroy(){const e=this._mediaSource;e&&(Ee.info("Source destroyed"),e.removeEventListener("sourceopen",this._onSourceOpen),e.removeEventListener("sourceclose",this._onSourceClose),this._destroySourceBuffers(),this._mediaSource=null)}progress(e,t,n){const i=this._mediaSource;if(!i)return;const r="video"===e.getMediaType()?ve.VIDEO:ve.AUDIO;if("open"===i.readyState||"ended"===i.readyState){let o;const s=function(e,t){const n=e.sourceBuffers&&e.sourceBuffers.length>0&&e.sourceBuffers[0].buffered;if(n){let e,i;for(let r=0;r<n.length;r++)if(e=n.start(r),i=n.end(r),e<=t&&t<=i)return{start:e,end:i}}return null}(i,n);if(s){if(n+r>i.duration)return void("open"===i.readyState&&this._endOfStream());const a=e.getFragmentLength();Math.ceil(n/a)>Math.floor(s.end/a)&&(o=e.getFragmentForTime(n),o&&this.appendFragment(e,o,t).catch(Se));const c=Math.floor(s.end-n);if(c>r)return;const l=Math.min(e.getFragmentLength(),r-c);if(l<1)return;const u=Math.floor(s.end+l);o=e.getFragmentForTime(u),o?this.appendFragment(e,o,t).catch(Se):this._endOfStream()}else if(o=e.getFragmentForTime(n),o){if(this.appendFragment(e,o,t).catch(Se),o.timeEnd<n+5){const n=e.getFragmentAfterTime(o.timeStart);n?this.appendFragment(e,n,t).catch(Se):this._endOfStream()}}else this._endOfStream()}}recreate(e){this.abort(),this.destroy(),this._codecs=e,this._init()}setDuration(e){this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"duration",duration:e})}setPlayId(e){this._playId=e}}class Te{constructor(e){if(this._estimate=0,this._totalWeight=0,e<0)throw new TypeError("Halflife must be set to a positive value.");this._weightingDecrease=Math.exp(Math.log(.5)/e)}sample(e,t){const n=Math.pow(this._weightingDecrease,e),i=t*(1-n)+n*this._estimate;isNaN(i)||(this._estimate=i,this._totalWeight+=t)}getEstimate(){return this._estimate/1-Math.pow(this._weightingDecrease,this._totalWeight)}}class Re{constructor(e=4e5){this._totalBytes=0,this._overrideBitrate=0,this._currentBandwidth=e,this._short=new Te(2),this._long=new Te(5),this._init()}_init(){if("undefined"==typeof navigator)return;const e=navigator;e.connection&&e.connection.downlink&&(this._currentBandwidth=1e6*e.connection.downlink,this._onConnectionChange=this._onConnectionChange.bind(this),e.connection.addEventListener("change",this._onConnectionChange))}_onConnectionChange(e){const t=e.target.downlink||0;this._setBandwidth(t)}_setBandwidth(e){this._currentBandwidth=1e6*e}getBandwidthEstimate(){if(this._overrideBitrate)return this._overrideBitrate;if(this._totalBytes<128e3)return this._currentBandwidth;const e=this._short.getEstimate(),t=this._long.getEstimate();return Math.min(e,t)}sample(e,t){if(e<16e3)return;const n=t/1e3,i=8*e/n;this._totalBytes+=e,this._short.sample(n,i),this._long.sample(n,i)}overrideBitrate(e){this._overrideBitrate=e<=0?0:e}}var Ie;function Ae(e){for(;e.firstChild;)e.removeChild(e.lastChild)}function ke(e){const t=e;return{id:t.id,text:t.text}}!function(e){e.SHOWING="showing",e.HIDDEN="hidden"}(Ie||(Ie={}));class Le extends r.vp{constructor(e){super(),this._isVisible=!1,this._player=null,this._crossOrigin=null,this._currentVideoContent=null,this._unsubscribers=[],this._displayedCues=[],this._preferredLanguage=e.language,this._onEnter=this._onEnter.bind(this),this._onExit=this._onExit.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this.setPlayer(e.player)}_subscribeToCueEvents(e){var t;const{track:n}=e;if(!n)throw new Error("No track");if(null===(t=n.cues)||void 0===t?void 0:t.length){n.mode=this._isVisible?Ie.SHOWING:Ie.HIDDEN,this._displayedCues=n.activeCues?Array.from(n.activeCues):[],this._emitDisplayedCues();for(let e=0;e<n.cues.length;e++){const t=n.cues[e];t.addEventListener("enter",this._onEnter),t.addEventListener("exit",this._onExit),this._unsubscribers.push((()=>{t.removeEventListener("enter",this._onEnter),t.removeEventListener("exit",this._onExit)}))}}else{const t=()=>{this._subscribeToCueEvents(e),e.removeEventListener("load",t)};e.addEventListener("load",t)}}_unsubscribeFromCueEvents(){this._unsubscribers.forEach((e=>e())),this._unsubscribers=[]}_onEnter(e){const t=e.target;this._displayedCues.indexOf(t)>-1||(this._displayedCues.push(t),this._emitDisplayedCues())}_onExit(e){const t=e.target,n=this._displayedCues.indexOf(t);n>-1&&(this._displayedCues.splice(n,1),this._emitDisplayedCues())}_emitDisplayedCues(){this.emit(m.PLAYER_DISPLAYED_CUES_CHANGED,{cues:this._displayedCues.map(ke)})}_updateVisibleState(){const e=this.getActiveLanguage();if(!this._player)return;const t=this._player.textTracks;for(let n=0,i=t.length;n<i;n++){const i=t[n];i.mode=this._isVisible&&i.language===e?Ie.SHOWING:Ie.HIDDEN}}_updateTextTracks(){const e=this._player;e&&(e.readyState>=1?this._onLoadedMetadata():this._currentVideoContent&&e.addEventListener(m.MEDIA_LOADEDMETADATA,this._onLoadedMetadata))}_onLoadedMetadata(){const e=this._player;if(!e)return;if(Ae(e),!this._currentVideoContent)return;e.crossOrigin="anonymous";const t=this.getActiveLanguage();for(const{lang:n,url:i}of this._currentVideoContent.getSubtitles()){const r=n.toLowerCase()===(null==t?void 0:t.toLowerCase()),o=document.createElement("track");o.label=`${n} subtitles`,o.kind="subtitles",o.srclang=n,o.src=i,o.default=r,e.appendChild(o),r&&this._subscribeToCueEvents(o)}}getActiveLanguage(){var e,t;if(!this._player||!this._currentVideoContent)return;const n=null===(e=this._preferredLanguage)||void 0===e?void 0:e.toLowerCase(),i=null!==(t=this._currentVideoContent.getSubtitleLanguages())&&void 0!==t?t:[];return i.find((e=>e.toLowerCase()===n))||i.find((e=>e.split("-")[0].toLowerCase()===n.split("-")[0]))||"en-us"}setVideoContent(e){this._unsubscribeFromCueEvents(),this._displayedCues=[],this._currentVideoContent=e,e||this.clear(),this._updateTextTracks()}setPlayer(e){var t;const n="VIDEO"===(null==e?void 0:e.tagName)?e:null;this._player!==n&&this.clear(),this._player=n||null,this._crossOrigin=null!==(t=null==n?void 0:n.crossOrigin)&&void 0!==t?t:null,this._updateTextTracks()}getAvailableLanguages(){var e,t;return null!==(t=null===(e=this._currentVideoContent)||void 0===e?void 0:e.getSubtitleLanguages())&&void 0!==t?t:[]}setLanguage(e){this._preferredLanguage=e,this._updateTextTracks()}hide(){this._isVisible=!1,this._updateVisibleState()}show(){this._isVisible=!0,this._updateVisibleState()}clear(){const e=this._player;e&&(this._unsubscribeFromCueEvents(),this._currentVideoContent=null,this._displayedCues=[],Ae(e),e.removeEventListener(m.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.crossOrigin=this._crossOrigin)}visible(){return this._isVisible}}const Oe=_("playback.player"),Ce=/^blob:/,Pe={[E.MP4]:!0,[E.MP4_DUAL]:!0,[E.MP4_CBCS]:!0,[E.MP4_FLAC]:!0,[E.MP3]:!1,[E.MANIFEST_ID]:!1};function we(e){return Math.ceil(1e3*e)}function De(e){return e/1e3}function Ne(e){return document.createElement(e)}class Ue extends r.vp{constructor(e){super(),this._cubicVolume=!1,this._player=null,this._emeManager=null,this._mediator=new r.vp,this._currentContent=null,this._upcomingContent=null,this._preloadingTracks={},this._playId=0,this._loaded=!1,this._licenseRequested=!1,this._playerActivated=!1,this._pauseToken=0,this._syntheticEndedToken=0,this._activeCodecs=[],this._playerVolume=1,this._fatalOnNextError=!1,this._canPreloadEmitted=!1,this._lastTimeUpdatePostion=0,this._buffering=!1,this._preferredBitrate=0,this._disableLicensePrefetch=!1,this._disableBufferingBeforeLicense=!1,this._audioResolver=e.audioResolver,this._clearBufferOnSeek=!!e.clearBufferOnSeek,this._createPlayer=e.createPlayer||Ne,this._cubicVolume=e.cubicVolume,this._disableCache=!!e.disableCache,this._licenseURLResolver=e.licenseURLResolver,this._newBufferPerTrack=!!e.newBufferPerTrack,this._newElementPerTrack=!!e.newElementPerTrack,this._newMediaKeysPerTrack=!!e.newMediaKeysPerTrack,this._rebufferOnQuotaExceeded=!!e.rebufferOnQuotaExceeded,this._disableLicensePrefetch=!!e.disableLicensePrefetch,this._synthesizeEnded=!!e.synthesizeEnded,this._tracker=e.tracker,this._transport=e.transport,this._videoPlayerContainer=e.videoPlayerContainer,this._audioPlayerContainer=e.audioPlayerContainer,this._videoResolver=e.videoResolver,this._abrManager=new Re,this._emeManager=e.disallowProtectedTracks?null:e.emeManager||null,this._disallowProfile=e.disallowProfile,this._disableBufferingBeforeLicense=!!e.disableBufferingBeforeLicense,this._cache=new o.z6(e.trackCacheSize||2),this._subtitleManager=new Le({language:e.preferredSubtitleLanguage||navigator.language,player:this._player}),this._videoResolution=e.videoResolution,Oe.info("Setting Player track cache to:",e.trackCacheSize||2),this._buffer=be.create(this._tracker,void 0,{disableBufferAbort:!!e.disableBufferAbort,reinjectInitsOnAbort:!!e.reinjectInitsOnAbort,noInit:!0}),this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._onPlaying=this._onPlaying.bind(this),this._onPause=this._onPause.bind(this),this._onSeeking=this._onSeeking.bind(this),this._onEncrypted=this._onEncrypted.bind(this),this._onEnded=this._onEnded.bind(this),this._onError=this._onError.bind(this),this._onRequiresDuration=this._onRequiresDuration.bind(this),this._onQuotaExceeded=this._onQuotaExceeded.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this._onWaiting=this._onWaiting.bind(this),this._onPlayedThresholdReached=this._onPlayedThresholdReached.bind(this),this._onSyntheticEnded=this._onSyntheticEnded.bind(this),this._onLicenseRequestCapped=this._onLicenseRequestCapped.bind(this),this._onLicenseRequestError=this._onLicenseRequestError.bind(this),this._onNavigatorOffline=this._onNavigatorOffline.bind(this),this._onBufferError=this._onBufferError.bind(this),this._emitWarning=this._emitWarning.bind(this),this._handleLoadingComplete=this._handleLoadingComplete.bind(this),this._init()}static create(e){const t=Object.assign({},e);return J.create({transport:e.transport,disallowRobustnessValues:e.disallowRobustnessValues,disallowCodecs:e.disallowCodecs,noServerCertificate:e.noServerCertificate,precacheServerCertificate:e.precacheServerCertificate,unauthServerCertificateBase:e.unauthServerCertificateBase,preferredKeySystems:e.preferredKeySystems}).then((e=>{t.emeManager=e;const n=new Ue(t);return t.preinitMediaElement?n._preinitMediaElement():n})).catch((n=>{if(e.enableWithoutEME)return Ue.createWithOptions(t);throw n}))}static createWithOptions(e){return new Promise((t=>{const n=new Ue(e);t(e.preinitMediaElement?n._preinitMediaElement():n)}))}_init(){this._disableCache&&Oe.info("Cache disabled."),this._transport.on(this._transport.EVENT_CONNECTION_OFFLINE,this._onNavigatorOffline),this.proxyEmitAllSync(this._tracker,{[m.TRACKER_TRACKING_DATA_CREATED]:m.PLAYER_TRACKING_DATA_CREATED,[m.TRACKER_TRACKING_DATA_FINALIZED]:m.PLAYER_TRACKING_DATA_FINALIZED,[m.TRACKER_PLAYBACK_START]:m.PLAYER_PLAYBACK_START}),this._tracker.on(m.TRACKER_PLAYED_THRESHOLD_REACHED,this._onPlayedThresholdReached),this._emeManager&&this._emeManager.addListeners({[m.EME_LICENSE_REQUEST_CAPPED]:this._onLicenseRequestCapped,[m.EME_LICENSE_REQUEST_ERROR]:this._onLicenseRequestError}),this._buffer.addListeners({[m.BUFFER_APPEND_ERROR]:this._onBufferError,[m.BUFFER_QUOTA_EXCEEDED]:this._onQuotaExceeded}),this.proxyEmitAll(this._buffer,{[m.BUFFER_STALLED]:m.PLAYER_BUFFER_STALLED,[m.BUFFERING_START]:m.PLAYER_BUFFERING_START,[m.BUFFERING_END]:m.PLAYER_BUFFERING_END}),this.proxyEmitAll(this._mediator,{[v.VIDEO_PROFILE_CHANGED]:m.PLAYER_VIDEO_PROFILE_CHANGED}),this.proxyEmitSync(this._subtitleManager,m.PLAYER_DISPLAYED_CUES_CHANGED,m.PLAYER_DISPLAYED_CUES_CHANGED)}_onLicenseRequestError(e){if(e.data.playId!==this._playId)return;const t=this._currentContent;if(!t)return;const n=e.data.error;n.shouldRefreshEndpoint&&this._licenseURLResolver.remove(t.getKeySystem(),t.getMediaType()),this._emitError(n,!n.unrecoverable,t.toLogJSON())}_onLicenseRequestCapped(e){if(e.data.playId!==this._playId)return;this._currentContent&&(this.pause(),this.emit(m.PLAYER_CAPPED,null))}_shouldNextErrorBeFatal(){const e=this._currentContent;if(!e)return!1;if(e.isAd()||!e.isProtected())return!1;if(!this._player)return!1;const t=this._player.error;if(!(t&&t instanceof MediaError))return this._fatalOnNextError=!1,!1;switch(t.code){case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:case MediaError.MEDIA_ERR_DECODE:return!0;default:return!1}}_onNavigatorOffline(){this._tracker.trackNavigatorOffline()}_onBufferError(e){this._emitError(e.data.error,e.data.canPlayNext,e.data.track)}_addPlayerEvents(e){e.addEventListener(m.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.addEventListener(m.MEDIA_PLAYING,this._onPlaying),e.addEventListener(m.MEDIA_PAUSE,this._onPause),e.addEventListener(m.MEDIA_SEEKING,this._onSeeking),e.addEventListener(m.MEDIA_ENCRYPTED,this._onEncrypted),e.addEventListener(m.MEDIA_ENDED,this._onEnded),e.addEventListener(m.MEDIA_ERROR,this._onError),e.addEventListener(m.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.addEventListener(m.MEDIA_DURATIONCHANGE,this._onDurationChange),e.addEventListener(m.MEDIA_WAITING,this._onWaiting),e.addEventListener(m.MEDIA_CANPLAY,this._onCanPlay),e.addEventListener(m.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.addEventListener(m.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration)}_removePlayerEvents(e){e.removeEventListener(m.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.removeEventListener(m.MEDIA_PLAYING,this._onPlaying),e.removeEventListener(m.MEDIA_PAUSE,this._onPause),e.removeEventListener(m.MEDIA_SEEKING,this._onSeeking),e.removeEventListener(m.MEDIA_ENCRYPTED,this._onEncrypted),e.removeEventListener(m.MEDIA_ENDED,this._onEnded),e.removeEventListener(m.MEDIA_ERROR,this._onError),e.removeEventListener(m.MEDIA_WAITING,this._onWaiting),e.removeEventListener(m.MEDIA_CANPLAY,this._onCanPlay),e.removeEventListener(m.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.removeEventListener(m.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.removeEventListener(m.MEDIA_DURATIONCHANGE,this._onDurationChange),e.removeEventListener(m.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration)}_recreateMediaElement(e,t,n,i){if(t!==this._playId)return Oe.info("Recreate player dropped: playId has changed."),Promise.resolve(!1);const r=this._player;if(r){if(!this._newElementPerTrack&&("AUDIO"!==r.tagName||"video"!==n)){let t=!0;for(const n of e)if('audio/mp2t;codecs="mp4a.40.2"'!==n&&!r.canPlayType(n)){t=!1;break}if(t)return Oe.info("Reusing media element."),e.join(",")===this._activeCodecs.join(",")&&!this._newBufferPerTrack||i||(Oe.info("Recreating buffer."),this._buffer.recreate(e),this._activeCodecs=e),Promise.resolve(!0)}this._removePlayerEvents(r),r.pause(),this._emeManager&&this._emeManager.removeMediaKeys(r).catch((function(e){Oe.warn("Failed to remove media keys.",e)})),this._player=null;const t=this._getContainerElement(this._videoPlayerContainer);t&&r.parentNode===t&&(t.removeChild(r),this.emit(m.PLAYER_VIDEO_ELEMENT_REMOVED,null));const o=this._getContainerElement(this._audioPlayerContainer);o&&r.parentNode===o&&o.removeChild(r)}Oe.info("Creating new media element.");const o=this._createPlayer(n),s=this._playerVolume;return o.volume=this._cubicVolume?s*s*s:s,o.autoplay=!1,o.loop=!1,"playsInline"in o&&(o.playsInline=!0),this._player=o,this._subtitleManager.setPlayer(o),this._playerActivated=!1,this._addPlayerEvents(o),i||this._buffer.recreate(e),this._activeCodecs=e,Promise.resolve(!0)}_getContainerElement(e){return"string"==typeof e?document.querySelector(e):e||null}_onDurationChange(){const e=this._playId,t=()=>{if(!this._player)return;if(e!==this._playId)return void Oe.info("Duration changed drop: playId has changed.");const t=we(this._player.duration),n=we(this._player.currentTime);this._tracker.setActualDuration(t),this.emit(m.PLAYER_DURATION_CHANGED,{timestamp:Date.now(),position:n,duration:t})};this._loaded?t():this.once(m.PLAYER_LOAD,t)}_onPlaying(){if(!this._player)return;this._playerActivated=!0;const e=this._currentContent,t=we(this._player.currentTime);this._tracker.trackPlaying(t),this.emit(m.PLAYER_PLAYING,{timestamp:Date.now(),position:t,logData:e?e.getLogData():null})}_onPause(){if(!this._player)return;const e=we(this._player.currentTime);this._tracker.trackPaused(e);const t=this._currentContent?this._currentContent.getLogData():null;this._pauseToken=setTimeout((()=>{clearTimeout(this._syntheticEndedToken),this.emit(m.PLAYER_PAUSED,{position:e,logData:t})}),10)}_onSeeking(){this._buffer.abort(this._clearBufferOnSeek),this._lastTimeUpdatePostion=0,this._onTimeUpdate()}_onRequiresDuration(){this._currentContent&&this._currentContent.isProtected()&&this._player&&(this._player.duration=this._currentContent.getCalculatedDuration())}_onQuotaExceeded(){this._player&&this._rebufferOnQuotaExceeded&&(Oe.info("Exceeded quota: rebuffering current track."),this._buffer.abort(!0),this._player.currentTime=this._player.currentTime,this._onTimeUpdate())}_onEncrypted(e){Oe.info("Got Encrypted event");this._currentContent&&this.emitSync(m.INTERNAL_ENCRYPTED,{initData:e.initData,fromPolyfill:!!e.fromPolyfill})}_onEnded(){!this._currentContent||this._synthesizeEnded&&this._currentContent.isProtected()||(Oe.info("Native ended emitted."),this._emitEnded())}_onSyntheticEnded(){this._synthesizeEnded&&this._currentContent&&this._currentContent.isProtected()&&(Oe.info("Synthetic ended emitted."),this._emitEnded())}_onError(){var e;if(!this._player)return;const t=this._player,n=t.error;let i,r=!1;const o=this._currentContent;let s,a,c,l=!1;o&&(r=o.isProtected(),i=o.toLogJSON(),l=o.isAd(),o.clearCachedBuffers());let u=!0;const d=!o||l||!this._fatalOnNextError,p=n&&n.msExtendedCode?`0x${(n.msExtendedCode>>>0).toString(16).toUpperCase()}`:null,h=/^data:/.test(null!==(e=t.src)&&void 0!==e?e:"")?`data:${null==i?void 0:i.fileId}`:t.src;if(n instanceof MediaError){switch(n.code){case MediaError.MEDIA_ERR_ABORTED:s=S.D.MEDIA_ABORTED,a="Media aborted.";break;case MediaError.MEDIA_ERR_NETWORK:s=S.D.MEDIA_NETWORK_ERROR,a="Network error.";break;case MediaError.MEDIA_ERR_DECODE:s=S.D.MEDIA_DECODING_ERROR,a="Media decoding error.",u=d;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:s=S.D.MEDIA_NOT_SUPPORTED,a="Media not supported.",u=d;break;default:s=S.D.PLAYER_MEDIA_ERROR,a="Media error.",c=!0}a+=` (${n.message||p||h||n.toString()})`}else s=S.D.PLAYER_PLAYBACK_ERROR,a="Error message undefined",c=!0;this._buffer.abort(!0);const f=new b(s,a);u||(f.unrecoverable=!0),f.listPlayerIgnore=l,f.debug.src_url=h,f.debug.protected=r,f.debug.extendedCode=p,f.debug.rawExCode=n&&n.msExtendedCode||null,c&&n&&(f.debug.nativeCode=n.code||null,f.debug.errorData=n),this._emitError(f,u,i)}_onLoadedMetadata(){this.emitSync(m.INTERNAL_PLAYER_LOADED_METADATA,null)}_onCanPlay(){this._buffering=!1,this.emitSync(m.INTERNAL_PLAYER_CANPLAY,null),this.emit(m.PLAYER_FIRST_BYTES,null)}_onCanPlayThrough(){this.emitSync(m.INTERNAL_PLAYER_CANPLAYTHROUGH,null)}_onWaiting(){clearTimeout(this._syntheticEndedToken),this._player&&!this._player.seeking&&(this._buffering=!0,this._getBufferingLatency().then((e=>{this._tracker.trackMsStalled(e)})))}_onPlayedThresholdReached(e){this._currentContent&&this._player&&this.emit(m.PLAYER_PLAYED_THRESHOLD_REACHED,{played:e.data.played,threshold:e.data.threshold,position:we(this._player.currentTime)})}_emitEnded(){this._currentContent&&"video"===this._currentContent.getMediaType()&&this.emit(m.PLAYER_ENDED_VIDEO,null),clearTimeout(this._pauseToken),this.emit(m.PLAYER_ENDED,null)}_emitError(e,t,n){Oe.error("Player Error",e,n,t),this._tracker.setHadError(!0),!this._disableCache&&n&&n.fileId&&this._cache.remove(n.fileId),this.emit(m.PLAYER_ERROR,{playId:this._playId,error:e,track:n,canPlayNext:t,position:this._player?we(this._player.currentTime):0})}_emitWarning(e,t){Oe.error("Player Warning",e,t,!0),this._tracker.trackWarning(),this.emit(m.PLAYER_WARNING,{playId:this._playId,error:e,track:t,canPlayNext:!0,position:this._player?we(this._player.currentTime):0})}_prepareMediaElement(e,t){return t===this._playId&&this._upcomingContent?this._recreateMediaElement(this._upcomingContent.getPlayableCodecs(),t,this._upcomingContent.getMediaType(),this._upcomingContent.getKeySystem()===g.FAIRPLAY).then((e=>{if(!e||t!==this._playId)return Oe.info("Loading content dropped after recreate: playId has changed."),Promise.resolve(!1);const n=this._player;return n&&this._upcomingContent&&this._upcomingContent.isProtected()&&this._emeManager&&(!n.mediaKeys||n.mediaKeys.shouldRefreshPerTrack||this._newMediaKeysPerTrack)?(Oe.info("Creating media keys"),this._emeManager.createMediaKeys(n).then((()=>!0)).catch((e=>(e.unrecoverable=!0,this._emitError(e,!1,this._upcomingContent?this._upcomingContent.toLogJSON():void 0),Promise.reject(e))))):Promise.resolve(!0)})):(Oe.info("Loading content dropped: playId has changed."),Promise.resolve(!1))}_handleLoadingComplete(e){const t=this._currentContent&&this._currentContent.getMediaType(),n=this._getContainerElement("video"===t?this._videoPlayerContainer:this._audioPlayerContainer);return n&&this._player&&this._player.parentNode!==n&&(n.appendChild(this._player),"video"===t&&this.emit(m.PLAYER_VIDEO_ELEMENT_APPENDED,null)),this._upcomingContent=null,e}_handleLoadingError(e,t,n,i){if(this._upcomingContent=null,n!==this._playId)return Promise.resolve(!1);if(this._tracker.trackLoadFailed(),this.emit(m.PLAYER_LOADING_FAILED,{uri:e,logData:t.logData}),i){const n=i.track||{uri:e,fileId:t.fileId,format:t.format,deviceId:t.logData.deviceId};this._emitError(i,"StorageError"!==i.name||!!i.canPlayNext,n)}return Promise.reject(i)}_handleLoadedMetadata(e,t,n){if(e!==this._playId)return void Oe.info("LoadedMetadata operations dropped: playId has changed.");this._loaded=!0;const i=this._player;if(!i)return;this._buffer.dequeueUpdates();const r=n.position>i.duration?0:n.position;this._lastTimeUpdatePostion=0,i.currentTime!==r&&(Oe.info("Resetting initial position after metadata."),i.currentTime=r),this._tracker.trackLoadDone(we(i.currentTime)),this.emitSync(m.PLAYER_LOAD,{autoplay:n.autoplay,position:we(r),logData:t}),Promise.resolve().then((()=>{this._onTimeUpdate()}));let o=()=>{i.currentTime!==r&&(Oe.info("Resetting initial position after playable."),i.currentTime=r)};n.autoplay&&!i.error&&(o=()=>{if(i.currentTime!==r&&(Oe.info("Resetting initial position after playable."),i.currentTime=r),this._playId!==e)return void Oe.info("Play trigger dropped; different playId");new Promise((e=>e(this._player&&this._player.play()))).catch((e=>{if(e){if("NotSupportedError"===e.name)return Promise.reject(e);if("NotAllowedError"===e.name)return this.emit(m.PLAYER_AUTOPLAY_FAILED,null),Promise.reject(e)}return this._player?this._player.play():Promise.resolve()})).catch((()=>{this._onPause()}))}),i.readyState>2?(Oe.info("Ready to play, triggering play."),o()):(Oe.info("Waiting to be playable."),this.once(m.INTERNAL_PLAYER_CANPLAY,o))}_handleCanPlayThrough(e){e===this._playId?this._tracker.trackCanPlayThrough():Oe.info("CanPlayThrough operations dropped: playId has changed.")}_loadContent(e,t){if(t!==this._playId||!this._upcomingContent)return Oe.info("Loading content dropped: playId has changed."),Promise.resolve(!1);if(!this._player)throw new b(S.D.PLAYER_INVALID_INTERNAL_STATE,"Cannot load content without an HTMLMediaElement");this._canPreloadEmitted=!1;const n=this._upcomingContent;this._upcomingContent=null,this._currentContent=n,this._subtitleManager.setVideoContent(n instanceof _e?n:null);const i=e.callback;i&&this.once(m.PLAYER_LOAD,(()=>{this._playId&&t===this._playId?i():Oe.info("Load content event dropped: playId has changed.")})),this.once(m.INTERNAL_PLAYER_LOADED_METADATA,this._handleLoadedMetadata.bind(this,t,this._currentContent.getLogData(),e)),this.once(m.INTERNAL_PLAYER_CANPLAYTHROUGH,this._handleCanPlayThrough.bind(this,t));let r=e.position;const o=n.getCalculatedDuration();o&&r>o&&(r=e.position=0);try{this._player.currentTime=r}catch(a){Oe.warn("Cannot set initial position before loading.",a)}const s=n.isProtected();return this._tracker.setProtected(s),n.getKeySystem()===g.FAIRPLAY?n instanceof ye&&!s?Promise.resolve(this._loadUnprotectedTrack()):Promise.resolve(this._loadHLSProtectedTrack(e,t)):n instanceof _e?this._loadVideoTrack(e,t):s?this._loadProtectedTrack(e,t):Promise.resolve(this._loadUnprotectedTrack())}_getBufferingLatency(){return new Promise((e=>{if(!this._player)return void e(0);const t=Date.now();this._player.addEventListener("canplaythrough",(function n(){this.removeEventListener("canplaythrough",n),e(Date.now()-t)}))}))}_loadVideoTrack(e,t){if(!(this._player&&this._currentContent&&this._currentContent instanceof _e))return Promise.resolve(!1);const n=this._currentContent;Oe.info("_loadVideoTrack");const i=()=>{this._currentContent&&this._currentContent.isProtected()&&this._requestLicense(t).then((()=>{this._playId===t&&(this._licenseRequested=!0,this._disableBufferingBeforeLicense&&this._onTimeUpdate())}))};this._disableLicensePrefetch?this.once(m.INTERNAL_ENCRYPTED,i):this._buffer.once(m.BUFFER_SOURCE_OPEN,i),this._player.src=URL.createObjectURL(this._buffer.getMediaSource());const r=n.getVideoProfile(),o=n.getAudioProfile();return o||r?(this._tracker.trackVideoLoadStart({bitrate:null==r?void 0:r.video_bitrate,audioProfile:null!=o?o:void 0,videoProfile:null!=r?r:void 0}),this._tracker.trackBufferLoadStart(),this._buffer.appendFragment(n,n.getInitFragment()).then((()=>this._buffer.setDuration(n.getCalculatedDuration()))).then(this._onAppendedHeadSegment(t))):Promise.resolve(!1)}_loadHLSProtectedTrack(e,t){if(Oe.info("Load HLS Protected Track"),!this._player||!this._currentContent)return!1;const n=this._currentContent.getResolvedURL();if(!n)return!1;const i=e=>{e.data.fromPolyfill&&(this.removeListener(m.INTERNAL_ENCRYPTED,i),this._requestLicense(t,{initData:e.data.initData}))};return this.on(m.INTERNAL_ENCRYPTED,i),this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(n,{bandwidth:0}),this._player.src=this._currentContent.getHLSURL(),this._player.load(),!0}_loadUnprotectedTrack(){if(!this._player||!this._currentContent)return!1;const e=this._currentContent.getResolvedURL();return!!e&&(Oe.info("_loadUnprotectedTrack",this._currentContent.getURI()),this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(e,{bandwidth:0}),this._player.src=e,this._player.load(),!0)}_onAppendedHeadSegment(e){return()=>e===this._playId&&(this._player&&this._player.spload&&this._player.spload(),Oe.info("Head segment appended."),!0)}_loadProtectedTrack(e,t){if(!(this._currentContent&&this._player&&this._currentContent instanceof ye))return Promise.resolve(!1);const n=this._currentContent;Oe.info("_loadProtectedTrack",n.getURI());const i=()=>this._requestLicense(t).then((()=>{this._playId===t&&(this._licenseRequested=!0,this._disableBufferingBeforeLicense&&this._onTimeUpdate())}));this._disableLicensePrefetch?this.once(m.INTERNAL_ENCRYPTED,i):this._buffer.once(m.BUFFER_SOURCE_OPEN,i),this._player.src=URL.createObjectURL(this._buffer.getMediaSource()),this._tracker.trackBufferLoadStart();const r=n.getFragmentForTime(e.position);let o=null;return r===n.getFirstFragment()?(Oe.info("Appending combined init and playable fragment."),o=this._buffer.appendFragment(n,n.getHeadFragment())):(Oe.info("Appending split init and playable fragment."),o=this._buffer.appendFragment(n,r)),o.then(this._onAppendedHeadSegment(t)).then((()=>Promise.resolve(t===this._playId)))}_requestLicense(e,t={}){if(e!==this._playId){const e="Request license dropped: playId has changed.";return Oe.info(e),Promise.resolve(!1)}if(!this._player||!this._currentContent||!this._emeManager)return Promise.resolve(!1);const n=Date.now(),i=this._player.mediaKeys,r=this._currentContent,o=r.getFileId(),s=r.getLogData(),a=r.toLogJSON(),c=r.getKeySystem(),l=r.getLicenseEndpoint();let u;if(l)u=Promise.resolve(l);else{if(!o)return Promise.reject(new TypeError("Missing: fileId or licenseEndpoint"));u=this._licenseURLResolver.get(c,r.getMediaType()).then((e=>e.replace(/\{contentId\}/,o)))}const d=this._emeManager,p=this._tracker;return p.setKeySystem(c),p.setKeySystemImpl(d.getKeySystemImpl()),Promise.all([u,r.getInitParams()]).then((([r,o])=>{p.setLicenseSessionLatency(Date.now()-n);const s=o.initDataType,a=t.initData||o.initData;if(i&&a&&s){const t=Object.assign(Object.assign({},o),{playId:e,initData:a,mediaKeys:i,licenseServer:r,initDataType:s});return d.createSessionWithParams(t)}return Promise.resolve(!1)})).then((t=>{if(e!==this._playId)return Oe.info("License tracking dropped: playId has changed."),Promise.resolve(!1);"boolean"!=typeof t&&"elapsed"in t&&(p.setLicenseGenerationLatency(t.elapsed.generate),p.setLicenseRequestLatency(t.elapsed.request),p.setLicenseUpdateLatency(t.elapsed.update));const i=Date.now()-n;return p.setKeyLatency(i),this.emit(m.PLAYER_KEY_RECEIVED,{requestTime:i,logData:s}),Oe.info("License updated."),Promise.resolve(!0)})).catch((t=>{if(!t||e!==this._playId)return Promise.resolve(!1);const n=!t||!("canPlayNext"in t)||t.canPlayNext;return this._emitError(t,n,a),Promise.reject(t)}))}_onTimeUpdate(){var e;if(!this._loaded||!(null===(e=this._player)||void 0===e?void 0:e.src)||!this._currentContent)return;const t=this._currentContent,n=this._player.seeking,i=this._player.currentTime,r="video"===t.getMediaType();if(t.isProtected()&&this._disableBufferingBeforeLicense&&!this._licenseRequested)return void Oe.log("Dropping time update event: buffering before license disabled.");if(!n&&this._lastTimeUpdatePostion&&this._lastTimeUpdatePostion===i)return void Oe.warn("Dropping duplicate time update.");this._lastTimeUpdatePostion=n?0:i,t.getKeySystem()!==g.FAIRPLAY&&(r||t.isProtected())&&this._buffer.progress(t,n,i);const o=this._player.duration,s=we(i),a=t.getLogData();n?(this._tracker.trackPositionChanged(s,this._player.paused),this.emit(m.PLAYER_POSITION_CHANGED,{position:s,logData:a})):(this._tracker.trackProgress(s,"getCurrentBitrate"in t?t.getCurrentBitrate():0),this.emit(m.PLAYER_PROGRESS,{timestamp:Date.now(),position:s,played:this._tracker.getMSPlayed(),interval:500,logData:a})),!this._canPreloadEmitted&&o-i<=10?(this._canPreloadEmitted=!0,this.emit(m.PLAYER_CAN_PRELOAD,null)):this._canPreloadEmitted=!1,clearTimeout(this._syntheticEndedToken),this._synthesizeEnded&&t.isProtected()&&this._isPlaying()&&(this._syntheticEndedToken=setTimeout(this._onSyntheticEnded,we(o-i)))}_isPlaying(){return!!this._player&&!this._player.paused}_createAudioContent(e,t){const n={manifestLatency:0,resolveLatency:0};return(this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve({keySystem:g.INVALID_SPOTIFY_KEY})).then((i=>ye.create({abrManager:this._abrManager,mediator:this._mediator,keySystem:i.keySystem,licenseEndpoint:t.licenseEndpoint,transport:this._transport,resolver:this._audioResolver,uri:e,fileId:t.fileId,fileFormat:t.fileFormat,format:t.format,isAd:t.isAd,resolvedURL:t.resolvedURL,noManifest:t.noManifest,preloadedManifest:t.preloadedManifest,logData:t.logData,disableCache:this._disableCache,emitWarning:this._emitWarning}).load(n))).then((e=>{const i=this._tracker;return i.setResolveLatency(n.resolveLatency),i.setManifestLatency(n.manifestLatency),e.isProtected()&&t.fileId&&!this._disableCache&&this._cache.set(t.fileId,e),e}))}_createVideoContent(e,t){const n={manifestLatency:0,resolveLatency:0},i=t.fileId;return(this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve({keySystem:g.INVALID_SPOTIFY_KEY,audioFormats:[],videoFormats:[]})).then((r=>_e.create({uri:e,abrManager:this._abrManager,mediator:this._mediator,resolver:this._videoResolver,keySystem:r.keySystem,licenseEndpoint:t.licenseEndpoint,fileId:i,format:E.MANIFEST_ID,isAd:t.isAd,transport:this._transport,videoFormats:r.videoFormats,videoResolution:this._videoResolution,audioFormats:r.audioFormats,disableCache:this._disableCache,disallowProfile:this._disallowProfile}).load(n))).then((e=>{const t=this._tracker;return t.setResolveLatency(n.resolveLatency),t.setManifestLatency(n.manifestLatency),e.isProtected()&&i&&!this._disableCache&&this._cache.set(i,e),e}))}_preinitMediaElement(){return this._player||!this._emeManager?Promise.resolve(this):this._emeManager.getKeySystemInfo().then((e=>{var t,n;const i=[];return(null===(t=e.audioFormats)||void 0===t?void 0:t[0])&&i.push(e.audioFormats[0].contentType),(null===(n=e.videoFormats)||void 0===n?void 0:n[0])&&i.push(e.videoFormats[0].contentType),!!i.length&&this._recreateMediaElement(i,this._playId,i.length>1?"video":"audio",e.keySystem!==g.FAIRPLAY)})).then((()=>this),(e=>(Oe.warn("Cannot precreate media element:",null==e?void 0:e.message),this)))}getCodecInfo(){return{audiocodec:"mp3",bitrate:160}}getMediaSource(){return this._buffer.getMediaSource()}load(e,t,n){const i=function(e,t){return t&&t.hasOwnProperty(e)}(t.uriProperty,e)?t.uriProperty:"uri",r=e[i];if(Oe.info("load",r),!r)return Promise.reject(new b(S.D.PLAYER_CANNOT_FIND_PLAYABLE_URI,"Cannot find a playable URI."));if(!e.logData)return Promise.reject(new Error("Invalid track: logging info not specified"));this.stop(e.logData,e.mediaType),this._loaded=!1,this._licenseRequested=!1,this._buffering=!0,this._currentContent=null,this._subtitleManager.setVideoContent(null);const o=++this._playId,s=this._tracker;let a;s.trackLoadStart(r,e.fileId,o.toString(),e.logData),this.emit(m.PLAYER_BEFORE_LOAD,{track:e,options:t,logData:e.logData,uri:r,timestamp:Date.now()}),this._buffer.setPlayId(o),this._loadingOptions={position:De(t.position||0),autoplay:!("autoplay"in t)||t.autoplay,callback:n},s.setPlayIntended(this._loadingOptions.autoplay),s.setPlayedThreshold(t.playedThreshold);const c=this._cache;if("video"===e.mediaType&&!this._emeManager)return Promise.reject(new b(S.D.DISALLOW_PROTECTED_TRACK_ERROR,"Protected tracks not supported"));const l="video"===e.mediaType?this._createVideoContent.bind(this,r,e):this._createAudioContent.bind(this,r,e,o);if(e.fileId){const t=e.fileId,n=this._preloadingTracks[t],i=this._disableCache?null:c.get(t);n?(Oe.info("Waiting for preloading track.",t),a=n.then((e=>(Oe.info("Preloading succeeded.",t),s.setResolveLatency(e.resolveLatency),s.setManifestLatency(e.manifestLatency),c.get(t))),(()=>(Oe.info("Preloading failed, creating new track",t),l())))):i?(Oe.info("Using cached track.",t,i),s.setMemoryCached(!0),a=Promise.resolve(i)):(Oe.info("Creating new track from fileId",t),a=l())}else Oe.info("Creating new track without fileId",e.resolvedURL),a=l();return a.then((t=>t.isProtected()&&!this._emeManager?Promise.reject(new b(S.D.DISALLOW_PROTECTED_TRACK_ERROR,"Protected tracks not supported")):(t.setLogData(e.logData),s.setCalculatedDuration(we(t.getCalculatedDuration())),this._upcomingContent=t,Promise.resolve()))).then(this._prepareMediaElement.bind(this,this._loadingOptions,o)).then(this._loadContent.bind(this,this._loadingOptions,o)).then(this._handleLoadingComplete,this._handleLoadingError.bind(this,r,e,o))}preload(e){const t=!this._disableCache,n=e.uri,i=e.fileId,r=this._cache;if(!t||!i||!this._emeManager)return Promise.resolve(null);const o="video"===e.mediaType;if(!(Pe[e.format]&&!o)||r.get(i))return Promise.resolve(null);const s=this._preloadingTracks;if(s[i])return s[i];Oe.info("Preloading track",i);const a={manifestLatency:0,resolveLatency:0},c=this._emeManager.getKeySystemInfo().then((t=>ye.create({abrManager:this._abrManager,keySystem:t.keySystem,licenseEndpoint:e.licenseEndpoint,transport:this._transport,resolver:this._audioResolver,uri:n,fileId:i,format:e.format,fileFormat:e.fileFormat,isAd:e.isAd,resolvedURL:e.resolvedURL,noManifest:e.noManifest,preloadedManifest:e.preloadedManifest,logData:e.logData,disableCache:this._disableCache,emitWarning:this._emitWarning}).load(a))).then((t=>Promise.all([t,"MP4_CBCS"!==e.format?t.getBufferForFragment(t.getHeadFragment()):null]))).then((([e])=>(r.set(i,e),delete s[i],Oe.info("Cached",i),a))).catch((e=>(delete s[i],Oe.warn("Preloading error",e),this.emit(m.PLAYER_PRELOADING_ERROR,{error:e,track:e.track||null,canPlayNext:!("canPlayNext"in e)||e.canPlayNext,preloading:!0}),Promise.reject(e))));return s[i]=c,c}togglePlay(){return this._isPlaying()?this.pause():this.resume()}setSubtitleLanguage(e){this._subtitleManager.setLanguage(e)}getSubtitleLanguages(){return this._subtitleManager.getAvailableLanguages()}getActiveSubtitleLanguage(){return this._subtitleManager.getActiveLanguage()}setVolume(e,t){if(!this.emitSync(m.PLAYER_BEFORE_VOLUME_CHANGE,{volume:e,options:t}).defaultPrevented){if(e<0||e>1)throw new b(S.D.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE,"Volume should be in range [0, 1]");this._playerVolume=e,this._player&&(this._player.volume=this._cubicVolume?e*e*e:e)}}getVolume(){return this._playerVolume}getPlayerState(){var e,t,n;const i=this._player,r={autoplay:!!(null===(e=this._loadingOptions)||void 0===e?void 0:e.autoplay)},o=(null===(t=this._currentContent)||void 0===t?void 0:t.getMediaType())||null,s={src:null==i?void 0:i.src};if("video"===o){s.video_height=i.videoHeight,s.video_width=i.videoWidth,r.poster=i.poster;const e=this._currentContent instanceof _e&&this._currentContent.getVideoProfile(),t=e?he(e)||e.video_codec:null;t&&(s.mime_type=t),r.autoplay=!1}return{playing:this._isPlaying(),position:i?we(i.currentTime):0,duration:i?we(i.duration):0,volume:null!==(n=this._playerVolume)&&void 0!==n?n:1,buffering:this._buffering,media_type:o,media_info:s,options:r,player_element:{height:(null==i?void 0:i.clientWidth)||0,width:(null==i?void 0:i.clientHeight)||0}}}seek(e){if(!this._player)return;const t=this._playId,n=()=>{if(!this._player||t!==this._playId)return void Oe.info("Seek dropped: playId has changed.");let n=De(e);n<0?n=0:n>=this._player.duration&&(n=this._player.duration),this._player.currentTime=n};this._loaded?n():this.once(m.PLAYER_LOAD,n),this._getBufferingLatency().then((e=>{this._tracker.trackSeekRebuffering(e)}))}pause(){return new Promise((e=>{this._player&&this._isPlaying()?e(this._player&&this._player.pause()):e()}))}resume(){return new Promise((e=>{this._player&&!this._isPlaying()?e(this._player&&this._player.play()):e()}))}stop(e,t){const n=[],i=e||{};this.emit(m.PLAYER_BEFORE_STOP,{timestamp:Date.now(),logData:i}),this._tracker.trackStopped(e),this._buffer.abort(!0),this._emeManager&&n.push(this._emeManager.destroySessions());const r=this._player;if(r){this._subtitleManager.clear(),this._fatalOnNextError=this._shouldNextErrorBeFatal(),this._fatalOnNextError&&Oe.warn("MediaError detected: next immediate media error will be fatal.");const e=r.src;Ce.test(e)&&URL.revokeObjectURL(e),r.removeAttribute("src"),r.load()}if(this._currentContent&&this._disableCache&&this._currentContent.clearCachedBuffers(),r&&this._currentContent&&"video"===this._currentContent.getMediaType()){const e=this._getContainerElement(this._videoPlayerContainer);e&&r.parentNode===e&&(this._newElementPerTrack||"video"!==t)&&(this._subtitleManager.setPlayer(null),e.removeChild(r),this.emit(m.PLAYER_VIDEO_ELEMENT_REMOVED,null))}else if(r&&this._currentContent&&"audio"===this._currentContent.getMediaType()){const e=this._getContainerElement(this._audioPlayerContainer);e&&r.parentNode===e&&(this._newElementPerTrack||"audio"!==t)&&e.removeChild(r)}return this.emit(m.PLAYER_STOPPED,null),Promise.all(n).then((()=>!0))}hideSubtitles(){this._subtitleManager.hide()}showSubtitles(){this._subtitleManager.show()}areSubtitlesShown(){return this._subtitleManager.visible()}getKeySystemInfo(){return this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve(null)}getVideoVariants(){if(!(this._currentContent&&this._currentContent instanceof _e))return[];const e=[],t=this._currentContent.getVideoProfiles();for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push({width:i.video_width,height:i.video_height,bitrate:i.video_bitrate})}return e}setPreferredBitrate(e){return"number"!=typeof e?Promise.resolve(y.INVALID):(this._preferredBitrate=e,this._currentContent&&"video"===this._currentContent.getMediaType()&&e>0&&this._buffer.abort(!0),this._abrManager.overrideBitrate(e),Promise.resolve(y.SUCCESS))}getCurrentBandwidth(){return this._abrManager.getBandwidthEstimate()}setBackgrounded(e){this._abrManager.overrideBitrate(e?1e-32:this._preferredBitrate)}setVideoResolution(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._currentContent instanceof _e&&this._currentContent.setVideoResolution(this._videoResolution)}activateElement(){return!(this._playerActivated||!this._player||this._player.src)&&(this._player.load(),this._playerActivated=!0,!0)}getMediaConfig(){return void 0===this._mediaConfig?function(e,t){const n=t||document.createElement("video"),i=e=>{n.canPlayType("audio/mp3")&&(e.formats.audio.push("audio/mp3"),e.supports.unprotected_audio=!0)};if(e)return e.getKeySystemInfo().then((e=>{const t={supports:{protected_audio:!!e.audioFormats.length,unprotected_audio:!0,protected_video:!!e.videoFormats.length,unprotected_video:!0},formats:{audio:e.audioFormats.map((e=>e.contentType)),video:e.videoFormats.map((e=>e.contentType))}};return t.keysystem=e.keySystem,t.keysystem_impl=e.keySystemImpl,i(t),t}));const r=W([G[0]],(e=>"probably"===n.canPlayType(e.split(";")[0])));let o=[],s=[];r&&(o=r.audioCapabilities.map((e=>e.contentType)),s=r.videoCapabilities.map((e=>e.contentType)));const a={supports:{protected_audio:!1,unprotected_audio:!!o.length,protected_video:!1,unprotected_video:!!s.length},formats:{audio:o,video:s}};return i(a),Promise.resolve(a)}(this._emeManager,this._player).then((e=>(this._mediaConfig=e,this._mediaConfig))):Promise.resolve(this._mediaConfig)}}var Me=n(20899);class xe extends Error{constructor(e,t){super(t),this.debug={},this.name="LoggingError",this.message=t,this.code=e}}var Fe="7.10.1-a220ab4";const Be=_("playback.logger");class Ze extends r.vp{constructor(e){super(),this._currentTrackingData=null,this._sequenceId=0,this._sequenceSessionStorage={},this._sessionId="0",this._transport=e.transport,this._logSender=e.logSender,this._player=e.player,this._init()}static create(e){return new Ze(e)}_init(){const e=this._player;e.on(m.PLAYER_LOAD,this._onPlayerLoad.bind(this)),e.on(m.PLAYER_ERROR,this._onError.bind(this,!1)),e.on(m.PLAYER_WARNING,this._onError.bind(this,!0)),e.on(m.PLAYER_PRELOADING_ERROR,this._onError.bind(this,!1)),e.on(m.PLAYER_TRACKING_DATA_CREATED,this._onTrackingDataCreated.bind(this)),e.on(m.PLAYER_TRACKING_DATA_FINALIZED,this._onTrackingDataFinalized.bind(this)),e.on(m.PLAYER_PLAYBACK_START,this._onPlaybackStart.bind(this))}_emitError(e,t){this.emit(m.LOGGER_ERROR,{error:e,trackingData:t})}_onError(e,t){var n,i,r;const o=t.data,s=this._currentTrackingData;if(!s||s.noLog)return;const a=o.error,c=null!==(n=null==a?void 0:a.debug)&&void 0!==n?n:{};c.position="position"in o?o.position:0;const l={track:o.track||{},debug:c,preloading:"preloading"in o&&!!o.preloading,session_id:this._sessionId,playback_id:s.playbackId||null,player_play_id:"playId"in o?o.playId:null,http_status_code:null!==(i=null==a?void 0:a.status)&&void 0!==i?i:null,license_server:null!==(r=null==a?void 0:a.licenseServer)&&void 0!==r?r:null};this._logError(a.code||S.D.UNKNOWN,a,l,s,e)}_onPlayerLoad(e){const t=e.data.logData;if(t)if(t.impressionURLs){let e=t.impressionURLs.length;for(;e--;)this._logImpression(t.impressionURLs[e])}else t.impressionURL&&this._logImpression(t.impressionURL)}_onPlaybackStart(e){const t=e.data.trackingData;t.noLog||t.noStats||this._logPlaybackStart(t)}_onTrackingDataCreated(e){const t=e.data.trackingData;t.noLog?this._currentTrackingData=null:(this._currentTrackingData=t,this._setSessionId(),t.noTSV||this._setSequenceId())}_setSessionId(){this._sessionId=this._transport.getInitTime().toString()}_setSequenceId(){this._sessionId&&(this._sequenceId=this._getSequenceId(this._sessionId))}_onTrackingDataFinalized(e){const t=e.data.trackingData;if(t.noLog)return;const n=this._sessionId!==this._transport.getInitTime().toString();if(n&&this._setSessionId(),t.playbackId&&!t.noTSV){if(n&&this._setSequenceId(),!t.playIntended&&!t.played)return void this._rollbackSequenceId(this._sessionId);this._logTrackStreamVerification(t)}t.noStats||this._logPlaybackStats(t)}_logTrackStreamVerification(e){const t={play_track:e.currentTrackUri,playback_id:e.playbackId,ms_played:e.msPlayed,session_id:this._sessionId,sequence_id:this._sequenceId,next_playback_id:e.nextPlaybackId};Be.debug("Logged TrackStreamVerification",t),this._logSender.logTrackStreamVerification(t).catch((n=>{const i=new xe(S.D.TSV_SENDING_FAILED,n.message||"Unknown reason.");this._logError(i.code,n,t,e,!1),this._emitError(i,e)}))}_logPlaybackStats(e){const t={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,internal_play_id:e.internalPlayId,memory_cached:e.memoryCached,persistent_cached:e.persistentCached,audio_format:e.audiocodec||"",video_format:e.videocodec||"",manifest_id:e.fileId,protected:!1,key_system:e.keySystem,key_system_impl:e.keySystemImpl,urls_json:JSON.stringify(e.urls),start_time:e.loadTime,end_time:e.stopTime,external_start_time:e.externalLoadTime,ms_play_latency:e.msPlayLatency,ms_init_latency:e.msInitLatency,ms_head_latency:e.msHeadLatency,ms_manifest_latency:e.msManifestLatency,ms_resolve_latency:e.msResolveLatency,ms_license_session_latency:e.msLicenseSessionLatency,ms_license_generation_latency:e.msLicenseGenerationLatency,ms_license_request_latency:e.msLicenseRequestLatency,ms_license_update_latency:e.msLicenseUpdateLatency,ms_played:e.msPlayed,ms_nominal_played:e.msPlayed,ms_file_duration:e.msFileDuration,ms_actual_duration:e.msActualDuration,ms_start_position:e.startPosition,ms_end_position:e.position,ms_seek_rebuffer:e.msSeekRebuffering,ms_seek_rebuffer_longest:e.maxMsSeekRebuffering,ms_stall_rebuffer:e.msStalled,ms_stall_rebuffer_longest:e.maxMsStalled,n_stalls:e.nStalls,n_seekback:e.nSeeksBackward,n_seekforward:e.nSeeksForward,start_bitrate:e.startBitrate||e.bitrate||0,audio_quality:e.audioQuality,time_weighted_bitrate:e.timeWeightedBitrate,reason_start:e.reasonStart,reason_end:e.reasonEnd,initially_paused:!e.playIntended,had_error:e.hadError,n_warnings:e.nWarnings,n_navigator_offline:e.nOffline,session_id:this._sessionId,sequence_id:this._sequenceId,client_id:e.clientId,correlation_id:e.correlationId};Be.info("Logging PlaybackStats"),this._logSender.logJSSDKPlaybackStats(t).catch((n=>{const i=new xe(S.D.PLAYBACK_STATS_SENDING_FAILED,n.message||"Unknown reason.");this._logError(i.code,n,t,e,!1),this._emitError(i,e)}))}_logPlaybackStart(e){const t={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,session_id:this._sessionId,ms_start_position:e.startPosition,initially_paused:!e.playIntended,client_id:e.clientId,correlation_id:e.correlationId};Be.info("Logging PlaybackStart"),this._logSender.logJSSDKPlaybackStart(t).catch((n=>{const i=new xe(S.D.PLAYBACK_START_SENDING_FAILED,n.message||"Unknown reason.");this._logError(i.code,n,t,e,!1),this._emitError(i,e)}))}_getSequenceId(e){let t=this._sequenceSessionStorage[e];return t||(t=0),t+1>=9007199254740991&&(t=0),this._sequenceSessionStorage[e]=t+1,t}_rollbackSequenceId(e){const t=this._sequenceSessionStorage[e];t&&(this._sequenceSessionStorage[e]=Math.max(t-1,0))}_logImpression(e){this._transport.request(e,{forget:!0}).catch((function(e){Be.warn("Unable to send impression request",e)}))}_logError(e,t,n,i,r){let o="";t&&(o=t.stack||"",o||(o=t.toString()));const s={source:"playback",source_version:Fe||Me.eV.UNKNOWN,type:e||Me.eV.UNKNOWN,message:t&&t.message||Me.eV.EMPTY,stack:JSON.stringify(o),json_data:JSON.stringify(n||{}),json_data_version:"1.0.0",client_id:i.clientId,correlation_id:i.correlationId};r?this._logSender.logJSSDKWarning(s).catch((e=>Be.warn("Failed to log warning",s,e))):this._logSender.logJSSDKError(s).catch((e=>Be.warn("Failed to log error",s,e)))}}class Ye extends Error{constructor(e=S.D.STORAGE_ERROR,t="Storage Error"){super(t),this.status=-1,this.fileId="",this.debug={},this.canPlayNext=!0,this.code=e,this.message=t,this.name="StorageError"}}const Ke=_("playback.storage_resolve");class He{constructor(e){this._transport=e}_parseResponse(e,t){let n;if(200!==t.status)return n=new Ye(S.D.STORAGE_FAILED_WITH_STATUS,`Storage Resolve responded with ${t.status}`),n.status=t.status,n.fileId=e,Promise.reject(n);const i=t.body;if(!i||!i.cdnurl||!i.cdnurl.length)return n=new Ye(S.D.STORAGE_RETURNED_NO_TRACKS,`Storage Resolve returned no tracks for fileId ${e}`),n.fileId=e,Promise.reject(n);const r={uri:i.cdnurl[0],uris:i.cdnurl,protection:"cenc"};return Promise.resolve(r)}getCDNURL(e,t){Ke.info("Requesting CDN URL for ",e);const n="files/audio/interactive",i=`@webgate/storage-resolve/${t?`v2/${n}/${t}/${e}`:`${n}/${e}`}?version=10000000&product=9&platform=39&alt=json`;return this._transport.request(i,{responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then(this._parseResponse.bind(this,e))}getManifest(e){const t=`https://seektables.scdn.co/seektable/${e}.json`;return Ke.info("Requesting JSON manifest for ",e),this._transport.request(t,{responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then((t=>{let n;return 200!==t.status?(n=new Ye(S.D.STORAGE_TRACK_MANIFEST_FAILED,`Track manifest request failed with status code ${t.status}`),n.debug.file_id=e,n.status=t.status,Promise.reject(n)):t.body?t.body:(n=new Ye(S.D.STORAGE_TRACK_MANIFEST_EMPTY,"Received empty manifest."),n.debug.file_id=e,n.status=t.status,Promise.reject(n))}))}}class je extends Error{constructor(e,t){super(t),this.debug={},this.name="TrackingError",this.message=t,this.code=e}}class Ve{constructor(){this._version="1.0.0",this._list=new o.Su,this._map={}}clear(){this._list=new o.Su,this._map={}}track(e,t){let n=this._map[e];n||(n=new o.EG({url:e,segments:0,bandwidths:[]}),this._list.append(n),this._map[e]=n);const{value:i}=n;i&&(i.segments+=1,i.bandwidths.push(t.bandwidth))}toJSON(){const e=[];let t=this._list.first;for(;t;){const{value:n}=t;if(!n)continue;const{bandwidths:i}=n;let r=0,o=i.length;for(;o--;)r+=i[o];e.push({url:n.url,segments:n.segments,avg_bw:parseFloat((r/i.length).toFixed(7))}),t=t.next}return{version:this._version,urls:e}}}class Ge{constructor(){this._bitrates={},this._isFinalized=!1,this._needsEndSegment=!1,this._segments=[],this._cdnURLTracker=new Ve,this.audiocodec=null,this.bandwidth=0,this.bitrate=0,this.audioQuality=void 0,this.bufferingPercentage=0,this.bufferLoadStartTime=0,this.urls={},this.currentTrackUri="",this.displayTrack="",this.externalLoadTime=0,this.fileId="",this.gaiaDevId="none",this.hadError=!1,this.internalPlayId="",this.isProtected=!1,this.keySystem="",this.keySystemImpl="",this.lastPlayStartTime=0,this.loadTime=0,this.localTimeMs=-1,this.maxContinuous=0,this.maxMsSeekRebuffering=0,this.maxMsStalled=0,this.memoryCached=!1,this.msActualDuration=0,this.msFileDuration=0,this.msHeadLatency=0,this.msInitLatency=0,this.msKeyLatency=0,this.msLicenseGenerationLatency=0,this.msLicenseRequestLatency=0,this.msLicenseSessionLatency=0,this.msLicenseUpdateLatency=0,this.msManifestLatency=0,this.msPlayed=0,this.msPlayedUnion=0,this.msPlayLatency=0,this.msResolveLatency=0,this.msSeekRebuffering=0,this.msSeeksBackward=0,this.msSeeksForward=0,this.nextPlaybackId="",this.nOffline=0,this.noLog=!1,this.noTSV=!1,this.noStats=!1,this.nWarnings=0,this.msStalled=0,this.nSeeksBackward=0,this.nSeeksForward=0,this.nStalls=0,this.persistentCached=!1,this.playbackId="",this.playContext="",this.played=!1,this.position=0,this.reasonEnd="unknown",this.reasonStart="unknown",this.referrer="unknown",this.referrerVendor="unknown",this.referrerVersion="unknown",this.sourceEnd="unknown",this.sourceStart="unknown",this.startPosition=0,this.stopTime=0,this.streamingRule="none",this.timeWeightedBitrate=0,this.totalBytes=0,this.playIntended=!1,this.videocodec=null,this.clientId="unknown",this.correlationId="unknown"}static create(){return new Ge}_calculateUnion(){const e=this._segments.slice(0);let t=0,n=0,i=0,r=0,o=0,s=0,a=this.maxContinuous;for(;o<e.length;o++)o%2!=0&&void 0!==e[o-1]&&"start"===e[o-1].type&&(s=e[o].time-e[o-1].time,a=s>a?s:a);for(this.maxContinuous=a,e.sort(((e,t)=>e.time-t.time));r<e.length;r++)"start"===e[r].type&&(0===n&&(i=r),++n),"end"===e[r].type&&(--n,0===n&&(t+=e[r].time-e[i].time));return t}_calculateWeightedBitrate(e){const t=this._bitrates;let n=0;for(const i in t)i&&t.hasOwnProperty(i)&&e>0&&(n+=parseInt(i,10)*t[i]/e);return Math.round(n)}registerVideoVariant(e){const t=e.bitrate;t&&(this._bitrates[t]=this._bitrates[t]||0,this.startBitrate||(this.startBitrate=t)),e.audioProfile&&e.audioProfile.audio_codec&&(this.audiocodec=e.audioProfile.audio_codec),e.videoProfile&&e.videoProfile.video_codec&&(this.videocodec=e.videoProfile.video_codec)}addStartSegment(){this._segments.push({type:"start",time:this.position}),this._needsEndSegment=!0}addEndSegment(){this._needsEndSegment&&(this._segments.push({type:"end",time:this.position}),this._needsEndSegment=!1)}addMSPlayed(e){e&&(this.msPlayed+=e)}trackBitrate(e,t){const n=e||"dummy";this._bitrates[n]=this._bitrates[n]||0,this._bitrates[n]+=t}trackBufferURL(e,t){this._cdnURLTracker.track(e,t)}finalize(){if(this._isFinalized)throw new je(S.D.TRACK_DATA_ALREADY_FINALIZED,"TrackData already finalized.");return this.msPlayedUnion=this._calculateUnion(),this.nSeeksBackward||this.nSeeksForward||(this.msPlayed=this.maxContinuous=this.msPlayedUnion),this.timeWeightedBitrate=this._calculateWeightedBitrate(this.msPlayed),this.bufferingPercentage=this.msStalled/this.msPlayed,this.startBitrate||(this.startBitrate=this.bitrate),this.urls=this._cdnURLTracker.toJSON(),this._isFinalized=!0,!0}getURLsJSON(){var e,t;return null!==(t=null===(e=this._cdnURLTracker.toJSON().urls)||void 0===e?void 0:e.map((({url:e})=>e)))&&void 0!==t?t:[]}getPlaybackStats(){let e;switch(this.keySystem){case g.WIDEVINE:e="widevine";break;case g.PLAYREADY:case g.PLAYREADY_HARDWARE:e="playready";break;default:e="none"}return{ms_total_est:this.msActualDuration,ms_manifest_latency:this.msManifestLatency,ms_latency:this.msPlayLatency,start_offset_ms:this.startPosition,ms_initial_buffering:this.msPlayLatency,ms_seek_rebuffering:this.msSeekRebuffering,ms_stalled:this.msStalled,max_ms_seek_rebuffering:this.maxMsSeekRebuffering,max_ms_stalled:this.maxMsStalled,n_stalls:this.nStalls,audiocodec:this.audiocodec?this.audiocodec.toLowerCase():void 0,videocodec:this.videocodec?this.videocodec.toLowerCase():void 0,start_bitrate:this.startBitrate||this.bitrate||void 0,full_screen:void 0,time_weighted_bitrate:this.timeWeightedBitrate,buffering_percentage:void 0,prefetched_bytes:void 0,prefetched_bytes_loaded:void 0,prefetched_initial_bitrate:void 0,key_system:e,ms_key_latency:this.msKeyLatency,total_bytes:this.totalBytes,local_time_ms:this.localTimeMs,ms_played_background:void 0}}isFinalized(){return this._isFinalized}}const We=_("playback.tracker");class qe extends r.vp{constructor(e={}){super(),this._playedThreshold=31e3,this._playedThresholdReached=!1,this._trackingData=null,this._playedThreshold=e.playerThreshold||31e3}static create(e){return new qe(e)}_checkPlayedThreshold(){const e=this._trackingData;!e||!this._playedThreshold||this._playedThresholdReached||e.msPlayed<this._playedThreshold||(this._playedThresholdReached=!0,this.emit(m.TRACKER_PLAYED_THRESHOLD_REACHED,{played:e&&e.msPlayed||0,threshold:this._playedThreshold}))}getMSPlayed(){return this._trackingData?this._trackingData.msPlayed:0}trackLoadStart(e,t,n,i){const r=Ge.create();this._trackingData=r,this._playedThresholdReached=!1,r.fileId=null!=t?t:"",r.currentTrackUri=e,r.loadTime=Date.now(),r.internalPlayId=n,r.externalLoadTime=i.externalLoadTime||0,r.displayTrack=i.displayTrack||"",r.playbackId=i.playbackId||"",r.playContext=i.playContext||"",r.reasonStart=i.reason||"unknown",r.sourceStart=i.source||"unknown",r.clientId=i.clientId||"",r.correlationId=i.correlationId||"";const o=i.referrer||{};r.referrer=void 0!==o.name?o.name:"unknown",r.referrerVersion=void 0!==o.version?o.version:"unknown",r.referrerVendor=void 0!==o.vendor?o.vendor:"unknown";const s=i.format||{};s.codec&&(r.audiocodec=s.codec.toLowerCase()),s.bitrate&&(r.bitrate=s.bitrate),s.audioQuality&&(r.audioQuality=s.audioQuality),r.gaiaDevId=i.deviceId||"none",r.noLog=i.noLog||!1,r.noTSV=i.noTSV||!1,r.noStats=i.noStats||!1,this.emit(m.TRACKER_TRACKING_DATA_CREATED,{trackingData:r})}trackBufferLoadStart(){const e=this._trackingData;e&&(e.bufferLoadStartTime=Date.now())}trackBytesDownloaded(e){const t=this._trackingData;t&&(t.totalBytes+=e)}trackLoadDone(e){const t=this._trackingData;if(!t)return;const n=Date.now();t.msInitLatency=n-t.bufferLoadStartTime,t.lastPlayStartTime=n,t.localTimeMs=n,t.position=e,t.startPosition=e,t.addStartSegment()}trackCanPlayThrough(){const e=this._trackingData;if(!e||e.msPlayLatency)return;const t=Date.now();e.msPlayLatency=t-e.loadTime,e.msHeadLatency=t-e.bufferLoadStartTime}trackBufferURL(e,t){const n=this._trackingData;n&&n.trackBufferURL(e,t)}trackNavigatorOffline(){const e=this._trackingData;e&&(e.nOffline+=1)}trackSeekRebuffering(e){const t=this._trackingData;t&&(e>t.maxMsSeekRebuffering&&(t.maxMsSeekRebuffering=e),t.msSeekRebuffering+=e)}trackMsStalled(e){const t=this._trackingData;t&&(e>t.maxMsStalled&&(t.maxMsStalled=e),t.msStalled+=e,t.nStalls++)}trackLoadFailed(){const e=this._trackingData;e&&(e.msPlayLatency=Date.now()-e.loadTime,e.position=0,e.addStartSegment())}trackStopped(e){const t=this._trackingData;if(!t||t.isFinalized())return;const n=Date.now();t.stopTime=n,t.lastPlayStartTime&&(t.addMSPlayed(n-t.lastPlayStartTime),this._checkPlayedThreshold()),t.addEndSegment(),t.sourceEnd=e.source||"unknown",t.reasonEnd=e.reason||"unknown",t.nextPlaybackId=e.playbackId||"",t.finalize(),We.info("Tracker data finalized.");const i=t.getPlaybackStats();this.emit(m.TRACKER_TRACKING_DATA_FINALIZED,{trackingData:t,playbackStats:i})}trackPositionChanged(e,t){const n=this._trackingData;if(!n)return;const i=n.position;e!==i&&(n.addEndSegment(),e>i?(n.nSeeksForward++,n.msSeeksForward+=e-i):e<i&&(n.nSeeksBackward++,n.msSeeksBackward+=i-e),t||(n.lastPlayStartTime=Date.now()),n.position=e,n.addStartSegment())}trackPlaying(e){const t=this._trackingData;t&&(t.played||this.emit(m.TRACKER_PLAYBACK_START,{trackingData:t}),t.played=!0,t.lastPlayStartTime=Date.now(),t.position=e)}trackPaused(e){const t=this._trackingData;t&&(t.lastPlayStartTime=0,t.position=e)}trackProgress(e,t){const n=this._trackingData;if(!(null==n?void 0:n.played))return;const i=Date.now();let r=0;n.lastPlayStartTime&&(r=i-n.lastPlayStartTime),n.lastPlayStartTime=i,n.addMSPlayed(r),this._checkPlayedThreshold(),n.position=e,t&&n.trackBitrate(t,r)}trackVideoLoadStart(e){const t=this._trackingData;t&&t.registerVideoVariant(e)}trackWarning(){const e=this._trackingData;e&&e.nWarnings++}trackOffline(){const e=this._trackingData;e&&e.nOffline++}setActualDuration(e){const t=this._trackingData;t&&(t.msActualDuration=e)}setKeySystem(e){const t=this._trackingData;t&&(t.keySystem=e)}setKeySystemImpl(e){const t=this._trackingData;t&&(t.keySystemImpl=e)}setManifestLatency(e){const t=this._trackingData;t&&(t.msManifestLatency=e)}setPlayIntended(e){const t=this._trackingData;t&&(t.playIntended=e)}setKeyLatency(e){const t=this._trackingData;t&&(t.msKeyLatency=e)}setMemoryCached(e){const t=this._trackingData;t&&(t.memoryCached=e)}setPersistentCached(e){const t=this._trackingData;t&&(t.persistentCached=e)}setProtected(e){const t=this._trackingData;t&&(t.isProtected=e)}setHadError(e){const t=this._trackingData;t&&(t.hadError=e)}setLicenseSessionLatency(e){const t=this._trackingData;t&&(t.msLicenseSessionLatency=e)}setLicenseGenerationLatency(e){const t=this._trackingData;t&&(t.msLicenseGenerationLatency=e)}setLicenseRequestLatency(e){const t=this._trackingData;t&&(t.msLicenseRequestLatency=e)}setLicenseUpdateLatency(e){const t=this._trackingData;t&&(t.msLicenseUpdateLatency=e)}setResolveLatency(e){const t=this._trackingData;t&&(t.msResolveLatency=e)}setCalculatedDuration(e){const t=this._trackingData;t&&(t.msFileDuration=e)}setPlayedThreshold(e){this._playedThreshold=e}}class ze{constructor(e){this._transport=e}static create(e){return new ze(e)}_parseManifestResponse(e){if(200!==e.status){const t=new Ye(S.D.STORAGE_VIDEO_MANIFEST_FAILED,`Video manifest request failed with status ${e.status}`);return t.status=e.status,Promise.reject(t)}return Promise.resolve(e.body)}getInitSegmentURLs(e,t,n,i){let r="";n&&(r=e+t.replace("{{profile_id}}",n.id.toString(10)).replace("{{file_type}}",n.file_type));let o="";return i&&(o=e+t.replace("{{profile_id}}",i.id.toString(10)).replace("{{file_type}}",i.file_type)),{audio:r,video:o,audioLogging:r,videoLogging:o}}getSegmentURLs(e,t,n,i,r){let o="";i&&(o=e+t.replace("{{profile_id}}",i.id.toString(10)).replace("{{file_type}}",i.file_type));let s="";return r&&(s=e+t.replace("{{profile_id}}",r.id.toString(10)).replace("{{file_type}}",r.file_type)),{audio:o.replace("{{segment_timestamp}}",n.toString()),video:s.replace("{{segment_timestamp}}",n.toString()),audioLogging:o,videoLogging:s}}getManifest(e){const t=`@webgate/manifests/v7/json/sources/${e}/options/supports_drm`;return this._transport.request(t,{authorize:!0,responseType:"json",retry:{condition:(e,t)=>e.getStatusFamily()!==t.SUCCESS}}).then(this._parseManifestResponse)}}class Qe extends Error{constructor(e,t){super(),this.status=-1,this.debug={},this.canPlayNext=!0,this.unrecoverable=!1,this.name="LicenseError",this.code=e,this.message=t}static fatal(e,t){const n=new Qe(e,t);return n.unrecoverable=!0,n.canPlayNext=!1,n}}class Xe{constructor(e){this._sdk={name:"",version:""},this._securityLevel=null,this._urls={},e.sdk&&(this._sdk=e.sdk),e.securityLevel&&(this._securityLevel=e.securityLevel),this._transport=e.transport,this._useTestLicenseServer=!!e.useTestLicenseServer,this._transport.on(this._transport.EVENT_CONNECTION_ID,(()=>{this._urls={}}))}get(e,t){const n=`${e}:${t}`,i=this._urls[n];if(i&&i.expires>Date.now()+6e4)return Promise.resolve(i.uri);const r=this._useTestLicenseServer?"&use_test_license_server=true":"",o=`@webgate/melody/v1/license_url?keysystem=${e}&mediatype=${t}&sdk_name=${this._sdk.name}&sdk_version=${this._sdk.version}${r}`;return this._transport.request(o,{responseType:"json",retry:{condition:(e,t)=>{const n=e.getStatusFamily();return n===t.SERVER_ERROR||n===t.CONNECTION_ERROR}}}).then((e=>{const t=e.body;if(t&&200===e.status)return t.expires*=1e3,t.uri=`@webgate/${t.uri}`,this._securityLevel&&(t.uri+=[-1!==t.uri.indexOf("?")?"&":"?","sl=",this._securityLevel].join("")),this._urls[n]=t,t.uri;let i;return i=t?400===e.status&&t&&"deprecated-version"===t.code?Qe.fatal(S.D.LICENSE_RESOLVER_DEPRECATED_VERSION,"This version of the SDK is no longer supported. Please upgrade"):new Qe(S.D.LICENSE_RESOLVER_CANT_RESOLVE_URL,`License URL endpoint responded with status ${e.status}`):Qe.fatal(S.D.LICENSE_RESOLVE_INVALID_RESPONSE,"License URL endpoint responded with invalid response"),i.status=e.status,Promise.reject(i)}))}remove(e,t){this._urls[`${e}:${t}`]=null}}class $e extends Me.Hx{constructor(e){var t;e.platform=null!==(t=e.platform)&&void 0!==t?t:Me.eV.UNKNOWN,super(e)}logTrackStreamVerification(e){return this._sendLog("/v1/msg/track_stream_verification",e)}logJSSDKPlaybackStats(e){return this._sendLog("/v1/msg/jssdk_playback_stats",e)}logJSSDKPlaybackStart(e){return this._sendLog("/v1/msg/jssdk_playback_start",e)}logJSSDKError(e){return this._sendLog("/v1/msg/jssdk_error",e)}logJSSDKWarning(e){return this._sendLog("/v1/msg/jssdk_warning",e)}}var Je,et,tt,nt=n(86881);class it{constructor(e){this._player=e.player;const t=`js-sdk_${Date.now()}_${~~(100*Math.random())}`,n=this._createOptions();nt.init(t,n)}static create(e){return new it(e)}_createOptions(){return{data:{env_key:"tf19m449f7hrnc39tpm8co9dt",player_software_name:"Playback",player_software_version:+Fe,player_mux_plugin_name:"Playback-Mux_reporter",player_mux_plugin_version:+Fe},getPlayheadTime:()=>this._player.getPlayerState().position,getStateData:()=>{const e=this._player.getPlayerState();return"audio"===e.media_type?null:{player_is_paused:!e.playing,player_width:+(e.player_element.width||0),player_height:+(e.player_element.height||0),video_source_height:+(e.media_info.video_height||0),video_source_width:+(e.media_info.video_width||0),player_is_fullscreen:!1,player_autoplay_on:e.options.autoplay,player_preload_on:!1,video_source_url:e.media_info.src,video_source_mime_type:e.media_info.mime_type,video_poster_url:e.options.poster,video_source_duration:e.duration,player_language_code:this._player.getActiveSubtitleLanguage()}}}}}!function(e){e.NULL_VALUE="NULL_VALUE",e.LIST_START="LIST_START",e.LIST_END="LIST_END",e.FORBIDDEN="FORBIDDEN",e.IGNORE="IGNORE",e.PAUSE="PAUSE"}(Je||(Je={})),function(e){e.MP4_AUDIO="audio/mp4",e.MP4_VIDEO="video/mp4",e.MTS_VIDEO="video/mp2t",e.WEBM_AUDIO="audio/webm",e.WEBM_VIDEO="video/webm"}(et||(et={})),function(e){e.AAC_LC="mp4a.40.2",e.FLAC="flac",e.OPUS="opus",e.VP9="vp9",e.VP8="vp8",e.H264_31="avc1.4d401f"}(tt||(tt={}));var rt,ot,st,at=n(55847);!function(e){e.UNKNOWN="UNKNOWN",e.DEFAULT="DEFAULT",e.LOW="LOW",e.NORMAL="NORMAL",e.HIGH="HIGH",e.VERY_HIGH="VERY_HIGH",e.HIFI="HIFI"}(rt||(rt={})),function(e){e.NONE="NONE",e.CONTEXT="CONTEXT",e.TRACK="TRACK"}(ot||(ot={})),function(e){e.EMPTY="EMPTY",e.SW_CRYPTO="SW_CRYPTO",e.SW_DECODE="SW_DECODE",e.HW_CRYPTO="HW_CRYPTO",e.HW_DECODE="HW_DECODE",e.HW_ALL="HW_ALL"}(st||(st={}));class ct extends Error{constructor(e,t){super(),this.unrecoverable=!1,this.listPlayerIgnore=!1,this.debug={},this.name="PlaybackError",this.code=e,this.message=t}static fatal(e,t){const n=new ct(e,t);return n.unrecoverable=!0,n}}function lt(e){return"uri"in e}class ut extends r.vp{constructor(e){if(super(),this._trackPlayerPromise=I(),this._maxListErrors=5,this._uid=0,this._loadedList=null,this._loadedOptions=null,this._currentTrack=null,this._currentTrackOptions=null,this._listPlayCount=0,this._listErrorCount=0,this._shuffled=!1,this._repeatMode=ot.NONE,this._currentSeqId=0,!e.trackPlayer)throw new TypeError("Argument `options.trackPlayerManager` not found.");e.maxListErrors&&(this._maxListErrors=e.maxListErrors),this._setListOptions=this._setListOptions.bind(this),this._replaceCurrentList=this._replaceCurrentList.bind(this),this._handleCapped=this._handleCapped.bind(this),this._handlePlaying=this._handlePlaying.bind(this),this._handlePaused=this._handlePaused.bind(this),this._handleEnded=this._handleEnded.bind(this),this._handleCanPreload=this._handleCanPreload.bind(this),this._handleError=this._handleError.bind(this),this._handlePositionChanged=this._handlePositionChanged.bind(this),this._handleDurationChanged=this._handleDurationChanged.bind(this),this._handleTimeout=this._handleTimeout.bind(this),this._handlePlayerInitError=this._handlePlayerInitError.bind(this),this._handleProgress=this._handleProgress.bind(this),this._handlePlayedThresholdReached=this._handlePlayedThresholdReached.bind(this),this._handleBeforeLoad=this._handleBeforeLoad.bind(this),this._init(e.trackPlayer)}static create(e){return new ut(e)}_init(e){this._trackPlayerPromise.promise.catch((()=>{})),Promise.resolve(e).then((e=>{this._attachPlayerEvents(e),this._trackPlayerPromise.resolve(e)})).catch(this._handlePlayerInitError)}_attachPlayerEvents(e){e.addListeners({[m.PLAYER_CAN_PRELOAD]:this._handleCanPreload,[m.PLAYER_CAPPED]:this._handleCapped,[m.PLAYER_ENDED]:this._handleEnded,[m.PLAYER_ERROR]:this._handleError,[m.PLAYER_PAUSED]:this._handlePaused,[m.PLAYER_PLAYING]:this._handlePlaying,[m.PLAYER_TIMEOUT]:this._handleTimeout,[m.PLAYER_POSITION_CHANGED]:this._handlePositionChanged,[m.PLAYER_DURATION_CHANGED]:this._handleDurationChanged,[m.PLAYER_PROGRESS]:this._handleProgress,[m.PLAYER_BEFORE_LOAD]:this._handleBeforeLoad,[m.PLAYER_PLAYED_THRESHOLD_REACHED]:this._handlePlayedThresholdReached}),this.proxyEmitAllSync(e,{[m.PLAYER_BEFORE_VOLUME_CHANGE]:m.LIST_PLAYER_BEFORE_VOLUME_CHANGE,[m.PLAYER_LOAD]:m.LIST_PLAYER_PLAYER_LOAD}),this.proxyEmitAll(e,{[m.PLAYER_AUTOPLAY_FAILED]:m.LIST_PLAYER_AUTOPLAY_FAILED,[m.PLAYER_TRACKING_DATA_CREATED]:m.LIST_PLAYER_TRACKING_DATA_CREATED,[m.PLAYER_TRACKING_DATA_FINALIZED]:m.LIST_PLAYER_TRACKING_DATA_FINALIZED,[m.PLAYER_BUFFER_STALLED]:m.LIST_PLAYER_BUFFER_STALLED,[m.PLAYER_BUFFERING_START]:m.LIST_PLAYER_BUFFERING_START,[m.PLAYER_BUFFERING_END]:m.LIST_PLAYER_BUFFERING_END,[m.PLAYER_VIDEO_ELEMENT_APPENDED]:m.LIST_PLAYER_VIDEO_ELEMENT_APPENDED,[m.PLAYER_VIDEO_ELEMENT_REMOVED]:m.LIST_PLAYER_VIDEO_ELEMENT_REMOVED,[m.PLAYER_DISPLAYED_CUES_CHANGED]:m.LIST_PLAYER_DISPLAYED_CUES_CHANGED,[m.LIST_PLAYER_VIDEO_PROFILE_CHANGED]:m.PLAYER_VIDEO_PROFILE_CHANGED})}_translatePosition(e){var t,n,i;return null!==(i=null===(n=null===(t=this._loadedList)||void 0===t?void 0:t.translatePosition)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:e}_translateDuration(e){var t,n,i;return null!==(i=null===(n=null===(t=this._loadedList)||void 0===t?void 0:t.translateDuration)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:e}_handleProgress(e){const{data:t}=e;this.emit(m.LIST_PLAYER_PROGRESS,Object.assign(Object.assign({},t),{position:this._translatePosition(t.position)}))}_handleBeforeLoad(e){const{data:t}=e;this.emit(m.LIST_PLAYER_BEFORE_PLAYER_LOAD,Object.assign(Object.assign({},t),{options:Object.assign(Object.assign({},t.options),{position:this._translatePosition(t.options.position)})}))}_handlePlayerInitError(e){this._trackPlayerPromise.reject(new ct(S.D.LIST_PLAYER_NO_TRACK_PLAYER,e.message||"Track player promise was rejected."))}_handleCapped(){const e=this._currentTrack;e&&this.emit(m.LIST_PLAYER_CAPPED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList})}_handlePlaying(e){const t=this._currentTrack;t&&this.emit(m.LIST_PLAYER_PLAYING,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handlePaused(e){const t=this._currentTrack;t&&this.emit(m.LIST_PLAYER_PAUSED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handleCanPreload(){this._preloadUpcomingTrack().catch((()=>{}))}_handleEnded(){const e=this._currentTrack;e&&(this.emit(m.LIST_PLAYER_TRACK_ENDED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(at.K.TRACK_DONE))}_handleTimeout(){const e=this._currentTrack;e&&(this.emit(m.LIST_PLAYER_TRACK_TIMEOUT,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(at.K.TRACK_ERROR))}_handlePositionChanged(e){const t=this._currentTrack;t&&this.emit(m.LIST_PLAYER_POSITION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}_handleDurationChanged(e){const t=this._currentTrack;t&&this.emit(m.LIST_PLAYER_DURATION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position),duration:this._translateDuration(e.data.duration)})}_handlePlayedThresholdReached(e){const t=this._currentTrack;t&&this.emit(m.LIST_PLAYER_PLAYED_THRESHOLD_REACHED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,threshold:e.data.threshold,position:this._translatePosition(e.data.position)})}_handleError(e){const t=this._currentTrack,n=e.data;if(!t)return;n.position=this._translatePosition(e.data.position),this.emit(m.LIST_PLAYER_ERROR,n),this.emitSync(m.LIST_PLAYER_ERROR_SYNC,n);const i=!!n.error&&n.error.listPlayerIgnore;i||this._listErrorCount++,n.canPlayNext&&(i||this._listErrorCount<=this._maxListErrors?this.next(at.K.TRACK_ERROR):this.emit(m.LIST_PLAYER_MAX_LIST_ERRORS_REACHED,{count:this._listErrorCount,threshold:this._maxListErrors}))}_handleTrackLoaded(e){this.emitSync(m.LIST_PLAYER_TRACK_LOADED,e)}_incrementSeqId(){return this._currentSeqId>=9007199254740991?this._currentSeqId=0:this._currentSeqId+=1,this._currentSeqId}_getTrackPlayer(){return this._trackPlayerPromise.promise}_setListIndex(e,t){const n=t.index&&-1!==t.index?t.index:0;return Promise.all([e,t,e.startAt(n)])}_setListOptions([e,t,n]){return Promise.all([e.setShuffle(!!this._shuffled),e.setRepeatMode(this._repeatMode)]).then((()=>[e,t]))}_replaceCurrentList([e,t]){return this.emitSync(m.LIST_PLAYER_BEFORE_LIST_CHANGE,{newList:e,newOptions:t,oldList:this._loadedList,oldOptions:this._loadedOptions}),this._loadedList=e,this._loadedOptions=t,this._listPlayCount=0,this._listErrorCount=0,this.emit(m.LIST_PLAYER_LIST_CHANGED,{list:e,options:t}),y.SUCCESS}_preloadTrack(e){return this._getTrackPlayer().then((t=>(t.preload(e).catch((()=>{})),y.SUCCESS)))}_changeTrack(e,t,n){if(this._currentSeqId!==n)return Promise.resolve(y.CANCELLED);this.emitSync(m.LIST_PLAYER_BEFORE_TRACK_LOAD,{list:this._loadedList,newTrack:e,oldTrack:this._currentTrack}),this._uid++;const i=++this._listPlayCount,r=this._loadedOptions;let o=!0,s=0,a=3e4;r&&(1===i?(o=!r.paused,s=r.initialPosition||r.position||0):s=r.position||0);const c=t===at.K.TRACK_DONE;if("options"in e){const t=e.options;"paused"in t&&(o=!t.paused),void 0!==t.position&&(s=t.position),void 0!==t.playedThreshold&&(a=t.playedThreshold)}this._currentTrack=e,this._currentTrackOptions={reason:t,paused:!o,position:s,playedThreshold:a};const l=this._handleTrackLoaded.bind(this,{uid:this._uid,track:this._currentTrack,options:this._currentTrackOptions,list:this._loadedList});return this._getTrackPlayer().then((t=>this._currentSeqId!==n?y.CANCELLED:(Promise.resolve(t.load(e,{uriProperty:"playableURI",autoplay:o,position:s,playedThreshold:a,continuePrevious:c},l)).catch((()=>{})),y.SUCCESS)))}_preloadUpcomingTrack(){const e=this._loadedList;if(!e)return Promise.reject(new ct(S.D.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));const t={reason:at.K.TRACK_DONE,listConstants:Je};return e.peekNext(t).then((e=>e===Je.FORBIDDEN?y.FORBIDDEN:e===Je.NULL_VALUE?this._preloadUpcomingTrack():e===Je.LIST_END?y.LIST_END:lt(e)&&e.playable?this._preloadTrack(e):y.INVALID))}activateElement(){return this._getTrackPlayer().then((e=>(e.activateElement(),y.SUCCESS)))}load(e,t){const n=function(e={}){const t={index:-1,position:0,initialPosition:0,duration:-1,paused:!1,reason:at.K.UNKNOWN};return void 0!==e.index&&(t.index=e.index),void 0!==e.position&&(t.position=e.position),void 0!==e.initialPosition&&(t.initialPosition=e.initialPosition),void 0!==e.duration&&(t.duration=e.duration),void 0!==e.paused&&(t.paused=e.paused),void 0!==e.reason&&(t.reason=e.reason),t}(t||this._loadedOptions||{});return this._setListIndex(e,n).then(this._setListOptions).then(this._replaceCurrentList)}play(e,t){return this.load(e,t).then((()=>{if(this._loadedList!==e)return y.CANCELLED;const t=this._loadedOptions?this._loadedOptions.reason:at.K.UNKNOWN;return this.next(t)}))}canChangeTrack(){return this._loadedList?this._loadedList.peekNext({reason:at.K.FORWARD_BUTTON,listConstants:Je}).then((e=>e!==Je.FORBIDDEN)):Promise.resolve(!0)}next(e){if(!e)return Promise.reject(new ct(S.D.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));const t=this._loadedList;if(!t)return Promise.reject(new ct(S.D.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(m.LIST_PLAYER_BEFORE_NEXT,{list:t,reason:e});const n=this._incrementSeqId(),i={reason:e,listConstants:Je};return t.next(i).then((i=>this._currentSeqId!==n?y.CANCELLED:i===Je.FORBIDDEN?y.FORBIDDEN:i===Je.NULL_VALUE?this.next(e):i===Je.LIST_END?(this.emit(m.LIST_PLAYER_LIST_ENDED,{list:t,reason:at.K.END_PLAY}),this.clear(e),y.LIST_END):lt(i)?i.playable?this._changeTrack(i,e,n):(this.emit(m.LIST_PLAYER_TRACK_UNPLAYABLE,{track:i,list:t}),this.next(e)):y.INVALID))}previous(e){if(!e)return Promise.reject(new ct(S.D.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));const t=this._loadedList;if(!t)return Promise.reject(new ct(S.D.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(m.LIST_PLAYER_BEFORE_PREVIOUS,{list:t,reason:e});const n=this._incrementSeqId(),i={reason:e,listConstants:Je};return t.previous(i).then((i=>this._currentSeqId!==n?y.CANCELLED:i===Je.FORBIDDEN?y.FORBIDDEN:i===Je.NULL_VALUE?this.previous(e):i===Je.LIST_START?(this.emit(m.LIST_PLAYER_LIST_ENDED,{list:t,reason:at.K.END_PLAY}),this.clear(e),y.LIST_END):lt(i)?i.playable?this._changeTrack(i,e,n):(this.emit(m.LIST_PLAYER_TRACK_UNPLAYABLE,{track:i,list:t}),this.previous(e)):y.INVALID))}pause(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.pause().then((()=>y.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?y.CANCELLED:y.FORBIDDEN)))):Promise.resolve(y.SUCCESS):Promise.reject(new ct(S.D.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}resume(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.resume().then((()=>y.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?y.CANCELLED:y.FORBIDDEN)))):Promise.resolve(y.SUCCESS):Promise.reject(new ct(S.D.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}togglePlay(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((e=>e.togglePlay().then((()=>y.SUCCESS)).catch((e=>"AbortError"===(null==e?void 0:e.name)?y.CANCELLED:y.FORBIDDEN)))):Promise.resolve(y.SUCCESS):Promise.reject(new ct(S.D.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}stop(e){const t={reason:e||at.K.UNKNOWN},n=this._currentTrack;return n&&n.logData&&(t.source=n.logData.source),this._incrementSeqId(),this._getTrackPlayer().then((e=>(e.stop(t),this.emit(m.LIST_PLAYER_STOPPED,{uid:this._uid,options:this._currentTrackOptions,list:this._loadedList}),y.SUCCESS)))}clear(e){return this.stop(e).then((()=>(this._loadedList=null,this._loadedOptions=null,this._currentTrack=null,this._currentTrackOptions=null,this.emit(m.LIST_PLAYER_CLEARED,null),y.SUCCESS)))}setShuffle(e){const t=!!e;if(this._shuffled!==t){this._shuffled=t,this.emit(m.LIST_PLAYER_SHUFFLE_CHANGED,{player:this,shuffled:t});const e=this._loadedList;e&&e.setShuffle(this._shuffled)}return Promise.resolve(y.SUCCESS)}setRepeatMode(e){if(!(e in ot))return Promise.reject(new ct(S.D.LIST_PLAYER_INVALID_ARGUMENT,"The value of repeat mode is not a correct RepeatMode enum value"));if(this._repeatMode!==e){this._repeatMode=e,this.emit(m.LIST_PLAYER_REPEAT_MODE_CHANGED,{player:this,repeatMode:e});const t=this._loadedList;t&&t.setRepeatMode(this._repeatMode)}return Promise.resolve(y.SUCCESS)}getVolume(){return this._getTrackPlayer().then((e=>e.getVolume()))}setVolume(e,t=null){return this._getTrackPlayer().then((n=>(n.setVolume(e,{commandId:null!=t?t:void 0}),this.emit(m.LIST_PLAYER_VOLUME_CHANGED,{volume:e,commandId:t}),y.SUCCESS)))}seek(e,t=at.K.SEEK){var n,i;const r=this._loadedList;if(!r)return Promise.reject(new ct(S.D.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));if("function"==typeof r.allowSeeking&&!r.allowSeeking())return Promise.reject(new ct(S.D.LIST_PLAYER_FORBIDDEN,"The operation is not allowed."));const o=null!==(i=null===(n=r.handleSeek)||void 0===n?void 0:n.call(r,e,{reason:t,listConstants:Je}))&&void 0!==i?i:e;return o===Je.PAUSE?this.pause().then((t=>(this.emit(m.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:o}),t))):o===Je.IGNORE?(this.emit(m.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:o}),Promise.resolve(y.SUCCESS)):this._currentTrack?this._getTrackPlayer().then((e=>(e.seek(o),y.SUCCESS))):Promise.resolve(y.SUCCESS)}getListConstants(){return Je}getLoadedList(){return this._loadedList}getLoadedOptions(){return this._loadedOptions}getPlayerState(){return this._getTrackPlayer().then((e=>{const t=e.getPlayerState();return Object.assign(Object.assign({},t),{position:this._translatePosition(t.position),duration:this._translateDuration(t.duration)})}))}getState(){return this.getPlayerState().then((e=>({playbackState:e,track:this._currentTrack,list:this._loadedList,options:this._loadedOptions})))}getMediaConfig(){return this._getTrackPlayer().then((e=>e.getMediaConfig()))}hideSubtitles(){return this._getTrackPlayer().then((e=>e.hideSubtitles())).then((()=>y.SUCCESS))}showSubtitles(){return this._getTrackPlayer().then((e=>e.showSubtitles())).then((()=>y.SUCCESS))}areSubtitlesShown(){return this._getTrackPlayer().then((e=>e.areSubtitlesShown()))}getSubtitleLanguages(){return this._getTrackPlayer().then((e=>e.getSubtitleLanguages()))}getActiveSubtitleLanguage(){return this._getTrackPlayer().then((e=>{var t;return null!==(t=e.getActiveSubtitleLanguage())&&void 0!==t?t:null}))}getCurrentBandwidth(){return this._getTrackPlayer().then((e=>e.getCurrentBandwidth()))}setSubtitleLanguage(e){return this._getTrackPlayer().then((t=>t.setSubtitleLanguage(e))).then((()=>y.SUCCESS))}}function dt(e){return new Promise(((t,n)=>{var i,r,o,s;if(!e.transport)return void n(new TypeError("Argument transport is required."));if("undefined"!=typeof window){("boolean"==typeof window.isSecureContext?window.isSecureContext:function(){if("undefined"==typeof window||!window.location)return!1;const e=window.location;if("https"===e.protocol||"file"===e.protocol)return!0;const t=e.hostname;return!!/^127(\.[0-255]){3}$|^locahost\.?$|\.localhost\.?$/.test(t)}())||null===(i=window.console)||void 0===i||i.warn("%cDRM might not be available from unsecure contexts","background: #222; color: #bada55; font-size: 40px")}const{transport:a}=e,[c="",l=""]=(e.sdkId||"").split(":"),u=Object.assign(Object.assign({},e),{tracker:qe.create(),audioResolver:new He(a),videoResolver:new ze(a),licenseURLResolver:new Xe({transport:a,sdk:{name:c,version:l},securityLevel:e.securityLevel,useTestLicenseServer:e.useTestLicenseServer}),newBufferPerTrack:null===(r=e.newBufferPerTrack)||void 0===r||r,preinitMediaElement:null===(o=e.preinitMediaElement)||void 0===o||o});e.unauthenticatedLogs&&!(null===(s=e.loggerOptions)||void 0===s?void 0:s.endpoint)&&(e.loggerOptions=Object.assign(Object.assign({},e.loggerOptions),{endpoint:"https://spclient.wg.spotify.com/melody/unauth"})),Ue.create(u).then((t=>{const n=function(e){return new $e(e)}(Object.assign(Object.assign({},e.loggerOptions),{transport:a,sdkId:e.sdkId})),i=Ze.create({transport:a,player:t,logSender:n});return it.create({player:t}),{player:t,logger:i}})).then(t,n)}))}},15004:function(e){!function(){var t="0123456789abcdef",n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=[];i.length=256;for(var r=0;r<256;r++)i[r]=t[r>>4]+t[15&r];var o=[];o.length=128;for(r=0;r<n.length;++r)o[n.charCodeAt(r)]=r;var s=[];for(r=0;r<16;r++)s[t.charCodeAt(r)]=r;for(r=0;r<6;r++)s["ABCDEF".charCodeAt(r)]=10+r;var a={toHex:function(e){if(22!==e.length)return null;var t,n,r,s,a,c=2.3283064365386963e-10,l=4294967296,u=238328;return t=56800235584*o[e.charCodeAt(0)]+916132832*o[e.charCodeAt(1)]+14776336*o[e.charCodeAt(2)]+238328*o[e.charCodeAt(3)]+3844*o[e.charCodeAt(4)]+62*o[e.charCodeAt(5)]+o[e.charCodeAt(6)],t=(t-=(n=t*c|0)*l)*u+(a=3844*o[e.charCodeAt(7)]+62*o[e.charCodeAt(8)]+o[e.charCodeAt(9)]),t-=(a=t*c|0)*l,n=n*u+a,t=t*u+(a=3844*o[e.charCodeAt(10)]+62*o[e.charCodeAt(11)]+o[e.charCodeAt(12)]),t-=(a=t*c|0)*l,n=n*u+a,n-=(a=n*c|0)*l,r=a,t=t*u+(a=3844*o[e.charCodeAt(13)]+62*o[e.charCodeAt(14)]+o[e.charCodeAt(15)]),t-=(a=t*c|0)*l,n=n*u+a,n-=(a=n*c|0)*l,r=r*u+a,t=t*u+(a=3844*o[e.charCodeAt(16)]+62*o[e.charCodeAt(17)]+o[e.charCodeAt(18)]),t-=(a=t*c|0)*l,n=n*u+a,n-=(a=n*c|0)*l,r=r*u+a,r-=(a=r*c|0)*l,s=a,t=t*u+(a=3844*o[e.charCodeAt(19)]+62*o[e.charCodeAt(20)]+o[e.charCodeAt(21)]),t-=(a=t*c|0)*l,n=n*u+a,n-=(a=n*c|0)*l,r=r*u+a,r-=(a=r*c|0)*l,s=s*u+a,s-=(a=s*c|0)*l,a?null:i[s>>>24]+i[s>>>16&255]+i[s>>>8&255]+i[255&s]+i[r>>>24]+i[r>>>16&255]+i[r>>>8&255]+i[255&r]+i[n>>>24]+i[n>>>16&255]+i[n>>>8&255]+i[255&n]+i[t>>>24]+i[t>>>16&255]+i[t>>>8&255]+i[255&t]},fromHex:function(e){var t,i=0,r=0,o=0;for(t=0;t<10;t++)o=16*o+s[e.charCodeAt(t)];for(t=0;t<11;t++)r=16*r+s[e.charCodeAt(t+10)];for(t=0;t<11;t++)i=16*i+s[e.charCodeAt(t+21)];if(isNaN(i+r+o))return null;var a,c=17592186044416,l=1/62,u="";for(t=0;t<7;++t)a=((a=((a=o)-62*(o=Math.floor(a*l)))*c+r)-62*(r=Math.floor(a*l)))*c+i,i=Math.floor(a*l),u=n[a-62*i]+u;for(r+=o*c;t<15;++t)a=((a=r)-62*(r=Math.floor(a*l)))*c+i,i=Math.floor(a*l),u=n[a-62*i]+u;for(i+=r*c;t<21;++t)a=i,i=Math.floor(a*l),u=n[a-62*i]+u;return n[i]+u},HEX256:i,ID16:s,ID62:o};void 0!==e.exports?e.exports=a:window.Base62=a}()},51573:function(e,t,n){"use strict";var i=n(15004),r="spotify:",o="http://play.spotify.com/",s="https://play.spotify.com/",a="http://open.spotify.com/",c="https://open.spotify.com/",l=new TypeError("Invalid Spotify URI!"),u=(new TypeError("Not implemented!"),0),d=1,p=function(e,t){return e=encodeURIComponent(e),t===u&&(e=e.replace(/%20/g,"+")),e=(e=e.replace(/[!'()]/g,escape)).replace(/\*/g,"%2A")},h=function(e,t){var n=t==u?e.replace(/\+/g,"%20"):e;return decodeURIComponent(n)},f=function(e,t){var n,i,r,o;switch(e.id&&(n=e._base62Id),e.type){case y.Type.ALBUM:return i=[y.Type.ALBUM,n],e.disc&&i.push(e.disc),i;case y.Type.AD:return[y.Type.AD,e._base62Id];case y.Type.ARTIST:return[y.Type.ARTIST,n];case y.Type.ARTIST_TOPLIST:return[y.Type.ARTIST,n,y.Type.TOP,e.toplist];case y.Type.DAILY_MIX:return[y.Type.DAILY_MIX,n];case y.Type.SEARCH:return[y.Type.SEARCH,p(e.query,t)];case y.Type.TRACK:return(e.context||e.play)&&(n+=_({context:e.context,play:e.play})),e.anchor&&(n+="#"+e.anchor),[y.Type.TRACK,n];case y.Type.TRACKSET:var s=[];for(r=0,o=e.tracks.length;r<o;r++)s.push(e.tracks[r]._base62Id);return s=[s.join(",")],null!==e.index&&s.push("#",e.index),[y.Type.TRACKSET,p(e.name)].concat(s);case y.Type.FACEBOOK:return[y.Type.USER,y.Type.FACEBOOK,e.uid];case y.Type.AUDIO_FILE:return[y.Type.AUDIO_FILE,e.extension,e._base62Id];case y.Type.FOLDER:return[y.Type.USER,p(e.username,t),y.Type.FOLDER,e._base62Id];case y.Type.FOLLOWERS:return[y.Type.USER,p(e.username,t),y.Type.FOLLOWERS];case y.Type.FOLLOWING:return[y.Type.USER,p(e.username,t),y.Type.FOLLOWING];case y.Type.PLAYLIST:return[y.Type.USER,p(e.username,t),y.Type.PLAYLIST,n];case y.Type.PLAYLIST_V2:return[y.Type.PLAYLIST,n];case y.Type.STARRED:return[y.Type.USER,p(e.username,t),y.Type.STARRED];case y.Type.TEMP_PLAYLIST:return[y.Type.TEMP_PLAYLIST,e.origin,e.data];case y.Type.CONTEXT_GROUP:return[y.Type.CONTEXT_GROUP,e.origin,e.name];case y.Type.USER_TOPLIST:return[y.Type.USER,p(e.username,t),y.Type.TOP,e.toplist];case y.Type.USER_TOP_TRACKS:return[y.Type.USER,p(e.username,t),y.Type.TOPLIST];case y.Type.TOPLIST:return[y.Type.TOP,e.toplist].concat(e.global?[y.Type.GLOBAL]:["country",e.country]);case y.Type.INBOX:return[y.Type.USER,p(e.username,t),y.Type.INBOX];case y.Type.ROOTLIST:return[y.Type.USER,p(e.username,t),y.Type.ROOTLIST];case y.Type.PUBLISHED_ROOTLIST:return[y.Type.USER,p(e.username,t),y.Type.PUBLISHED_ROOTLIST];case y.Type.COLLECTION_TRACK_LIST:return[y.Type.USER,p(e.username,t),y.Type.COLLECTION_TRACK_LIST,n];case y.Type.PROFILE:return e.args&&e.args.length>0?[y.Type.USER,p(e.username,t)].concat(e.args):[y.Type.USER,p(e.username,t)];case y.Type.LOCAL_ARTIST:return[y.Type.LOCAL,p(e.artist,t)];case y.Type.LOCAL_ALBUM:return[y.Type.LOCAL,p(e.artist,t),p(e.album,t)];case y.Type.LOCAL:return[y.Type.LOCAL,p(e.artist,t),p(e.album,t),p(e.track,t),e.duration];case y.Type.LIBRARY:return[y.Type.USER,p(e.username,t),y.Type.LIBRARY].concat(e.category?[e.category]:[]);case y.Type.IMAGE:return[y.Type.IMAGE,e._base62Id];case y.Type.MOSAIC:return(i=e.ids.slice(0)).unshift(y.Type.MOSAIC),i;case y.Type.RADIO:return[y.Type.RADIO,e.args];case y.Type.SPECIAL:for(i=[y.Type.SPECIAL],r=0,o=(a=e.args||[]).length;r<o;++r)i.push(p(a[r],t));return i;case y.Type.STATION:for(i=[y.Type.STATION],r=0,o=(a=e.args||[]).length;r<o;r++)i.push(p(a[r],t));return i;case y.Type.APPLICATION:var a;for(i=[y.Type.APP,e._base62Id],r=0,o=(a=e.args||[]).length;r<o;++r)i.push(p(a[r],t));return i;case y.Type.COLLECTION_ALBUM:return[y.Type.USER,p(e.username,t),y.Type.COLLECTION,y.Type.ALBUM,n];case y.Type.COLLECTION_MISSING_ALBUM:return[y.Type.USER,p(e.username,t),y.Type.COLLECTION,y.Type.ALBUM,n,"missing"];case y.Type.COLLECTION_ARTIST:return[y.Type.USER,p(e.username,t),y.Type.COLLECTION,y.Type.ARTIST,n];case y.Type.COLLECTION:return[y.Type.USER,p(e.username,t),y.Type.COLLECTION].concat(e.category?[e.category]:[]);case y.Type.EPISODE:return(e.context||e.play)&&(n+=_({context:e.context,play:e.play})),[y.Type.EPISODE,n];case y.Type.SHOW:return[y.Type.SHOW,n];case y.Type.LIVE:return[y.Type.LIVE,n];case y.Type.CONCERT:return[y.Type.CONCERT,n];case y.Type.SOCIAL_SESSION:return[y.Type.SOCIAL_SESSION,n];case y.Type.INTERRUPTION:return[y.Type.INTERRUPTION,e.id];default:throw l}},_=function(e){var t="?";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t.length>1&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]));return t},m=function(e){return e.split("&").reduce((function(e,t){return e[(t=t.split("="))[0]]=decodeURIComponent(t[1]),e}),{})},g=function(e,t,n){var i=0;n=n||{};var r,o,s,a=function(){return e[i++]},c=function(){var e=a();if(!e||e.length>22)throw l;return e},d=function(){var e=a();if(!e||22!==e.length)throw l;return e},f=function(){return e.slice(i)},_=function(){var n=t==u?":":"/";return e.slice(i).join(n)},m=a();switch(m){case y.Type.ALBUM:return y.albumURI(d(),parseInt(a(),10));case y.Type.AD:return y.adURI(a());case y.Type.ARTIST:return r=d(),a()==y.Type.TOP?y.artistToplistURI(r,a()):y.artistURI(r);case y.Type.AUDIO_FILE:return y.audioFileURI(a(),a());case y.Type.DAILY_MIX:return y.dailyMixURI(c());case y.Type.TEMP_PLAYLIST:return y.temporaryPlaylistURI(a(),_());case y.Type.PLAYLIST:return y.playlistV2URI(d());case y.Type.SEARCH:return y.searchURI(h(_(),t));case y.Type.TRACK:return y.trackURI(d(),a(),n.context,n.play);case y.Type.TRACKSET:var g=h(a()),E=a(),v=a(),S=parseInt(a(),10);("%23"!==v||isNaN(S))&&(S=null);var b=[];if(E)for(o=0,s=(E=h(E).split(",")).length;o<s;o++){var T=E[o];b.push(y.trackURI(T))}return y.tracksetURI(b,g,S);case y.Type.CONTEXT_GROUP:return y.contextGroupURI(a(),a());case y.Type.TOP:var R=a();return a()==y.Type.GLOBAL?y.toplistURI(R,null,!0):y.toplistURI(R,a(),!1);case y.Type.USER:var I=h(a(),t),A=a();if(I===y.Type.FACEBOOK&&A)return y.facebookURI(parseInt(A,10));if(A)switch(A){case y.Type.PLAYLIST:return y.playlistURI(I,d());case y.Type.FOLDER:return y.folderURI(I,c());case y.Type.COLLECTION_TRACK_LIST:return y.collectionTrackList(I,c());case y.Type.COLLECTION:var k=a();switch(k){case y.Type.ALBUM:return r=c(),"missing"===a()?y.collectionMissingAlbumURI(I,r):y.collectionAlbumURI(I,r);case y.Type.ARTIST:return y.collectionArtistURI(I,c());default:return y.collectionURI(I,k)}case y.Type.STARRED:return y.starredURI(I);case y.Type.FOLLOWERS:return y.followersURI(I);case y.Type.FOLLOWING:return y.followingURI(I);case y.Type.TOP:return y.userToplistURI(I,a());case y.Type.INBOX:return y.inboxURI(I);case y.Type.ROOTLIST:return y.rootlistURI(I);case y.Type.PUBLISHED_ROOTLIST:return y.publishedRootlistURI(I);case y.Type.TOPLIST:return y.userTopTracksURI(I);case y.Type.LIBRARY:return y.libraryURI(I,a())}var L=f();if(A&&L.length>0)return y.profileURI(I,[A].concat(L));if(A)return y.profileURI(I,[A]);if(I)return y.profileURI(I);throw l;case y.Type.LOCAL:var O=a(),C=O&&h(O,t),P=a(),w=P&&h(P,t),D=a(),N=D&&h(D,t),U=a(),M=parseInt(U,10);return void 0!==D?y.localURI(C,w,N,M):void 0!==P?y.localAlbumURI(C,w):y.localArtistURI(C);case y.Type.IMAGE:return y.imageURI(c());case y.Type.MOSAIC:return y.mosaicURI(e.slice(i));case y.Type.RADIO:return y.radioURI(_());case y.Type.SPECIAL:for(o=0,s=(x=f()).length;o<s;++o)x[o]=h(x[o],t);return y.specialURI(x);case y.Type.STATION:return y.stationURI(f());case y.Type.EPISODE:return y.episodeURI(d(),n.context,n.play);case y.Type.SHOW:return y.showURI(d());case y.Type.LIVE:return y.liveURI(c());case y.Type.CONCERT:return y.concertURI(c());case"":break;case y.Type.SOCIAL_SESSION:return y.socialSessionURI(a());case y.Type.INTERRUPTION:return y.interruptionURI(a());default:r=m===y.Type.APP?a():m;var x,F=h(r,t);if(p(F,t)!==r)break;for(o=0,s=(x=f()).length;o<s;++o)x[o]=h(x[o],t);return y.applicationURI(F,x)}throw l};function y(e,t){for(var n in this.type=e,t)"function"!=typeof t[n]&&(this[n]=t[n])}Object.defineProperty(y.prototype,"id",{get:function(){return this._hexId||(this._hexId=this._base62Id?y.idToHex(this._base62Id):void 0),this._hexId},set:function(e){this._base62Id=e?y.hexToId(e):void 0,this._hexId=void 0},enumerable:!0,configurable:!0}),y.prototype.toAppType=function(){if(this.type==y.Type.APPLICATION)return y.applicationURI(this.id,this.args);var e=f(this,d),t=e.shift(),n=e.length;if(n)for(;n--;)e[n]=h(e[n],d);return this.type==y.Type.RADIO&&(e=e.shift().split(":")),y.applicationURI(t,e)},y.prototype.toRealType=function(){return this.type==y.Type.APPLICATION?g([this.id].concat(this.args),u):new y(null,this)},y.prototype.toURI=function(){return r+f(this,u).join(":")},y.prototype.toString=function(){return this.toURI()},y.prototype.toURLPath=function(e){var t=f(this,d);t[0]===y.Type.APP&&t.shift();var n=t[0]===y.Type.TRACKSET,i=t[0]===y.Type.LOCAL;if(!n&&!i){for(var r=[],o=0,s=t.length;o<s;o++){var a=t[o];a&&r.push(a)}t=r}var c=t.join("/");return e?"/"+c:c},y.prototype.toPlayURL=function(){return s+this.toURLPath()},y.prototype.toURL=function(){return this.toPlayURL()},y.prototype.toOpenURL=function(){return c+this.toURLPath()},y.prototype.toSecurePlayURL=function(){return this.toPlayURL()},y.prototype.toSecureURL=function(){return this.toPlayURL()},y.prototype.toSecureOpenURL=function(){return this.toOpenURL()},y.prototype.idToByteString=function(){var e=i.toHex(this._base62Id);if(!e){for(var t="",n=0;n<16;n++)t+=String.fromCharCode(0);return t}var r="";for(n=0;n<32;n+=2){var o=(i.ID16[e.charCodeAt(n)]<<4)+i.ID16[e.charCodeAt(n+1)];r+=String.fromCharCode(o)}return r},y.prototype.getPath=function(){return this.toString().replace(/[#?].*/,"")},y.prototype.getBase62Id=function(){return this._base62Id},y.prototype.isSameIdentity=function(e){var t=y.from(e);if(!t)return!1;if(this.toString()===e.toString())return!0;if(this.type!==y.Type.PLAYLIST&&this.type!==y.Type.PLAYLIST_V2||t.type!==y.Type.PLAYLIST&&t.type!==y.Type.PLAYLIST_V2){if(this.type===y.Type.STATION&&t.type===y.Type.STATION){var n=g(this.args,u);return!!n&&n.isSameIdentity(g(t.args,u))}return!1}return this.id===t.id},y.Type={EMPTY:"empty",ALBUM:"album",AD:"ad",APP:"app",APPLICATION:"application",ARTIST:"artist",ARTIST_TOPLIST:"artist-toplist",AUDIO_FILE:"audiofile",COLLECTION:"collection",COLLECTION_ALBUM:"collection-album",COLLECTION_MISSING_ALBUM:"collection-missing-album",COLLECTION_ARTIST:"collection-artist",CONTEXT_GROUP:"context-group",DAILY_MIX:"dailymix",EPISODE:"episode",FACEBOOK:"facebook",FOLDER:"folder",FOLLOWERS:"followers",FOLLOWING:"following",GLOBAL:"global",IMAGE:"image",INBOX:"inbox",INTERRUPTION:"interruption",LOCAL_ARTIST:"local-artist",LOCAL_ALBUM:"local-album",LOCAL:"local",LIBRARY:"library",LIVE:"live",MOSAIC:"mosaic",PLAYLIST:"playlist",PLAYLIST_V2:"playlist-v2",PROFILE:"profile",PUBLISHED_ROOTLIST:"published-rootlist",RADIO:"radio",ROOTLIST:"rootlist",COLLECTION_TRACK_LIST:"collectiontracklist",SEARCH:"search",SHOW:"show",SOCIAL_SESSION:"socialsession",CONCERT:"concert",SPECIAL:"special",STARRED:"starred",STATION:"station",TEMP_PLAYLIST:"temp-playlist",TOP:"top",TOPLIST:"toplist",TRACK:"track",TRACKSET:"trackset",USER:"user",USER_TOPLIST:"user-toplist",USER_TOP_TRACKS:"user-top-tracks",USET_TOP_TRACKS:"user-top-tracks"},y.fromString=function(e){var t=function(e){var t,n,i,p,h=e.split("?");if(h.length>1){e=h.shift();var f=(i=h.pop()).split("#");f.length>1&&(i=f.shift(),p=f.pop()),i=m(i)}var _=e.split("#");if(_.length>1&&(e=_.shift(),p=_.pop()),0===e.indexOf(r))t=e.slice(r.length).split(":"),n=u;else{if(0===(e=e.split("?")[0]).indexOf(o))t=e.slice(o.length).split("/");else if(0===e.indexOf(s))t=e.slice(s.length).split("/");else if(0===e.indexOf(a))t=e.slice(a.length).split("/");else if(0===e.indexOf(c))t=e.slice(c.length).split("/");else{if(0!==e.indexOf("/"))throw l;t=e.slice("/".length).split("/")}n=d}return p&&t.push(p),{format:n,components:t,query:i}}(e);return g(t.components,t.format,t.query)},y.from=function(e){try{return e instanceof y?e:"object"==typeof e&&e.type?new y(null,e):y.fromString(e.toString())}catch(t){return null}},y.fromByteString=function(e,t,n){for(;16!=t.length;)t=String.fromCharCode(0)+t;for(var r="",o=0;o<t.length;o++){var s=t.charCodeAt(o);r+=i.HEX256[s]}var a=i.fromHex(r),c=n||{};return c.id=a,new y(e,c)},y.clone=function(e){return e instanceof y?new y(null,e):null},y.getCanonical=function(e){return this.getCanonical(e)},y.getCanonicalUsername=function(e){return p(e,u)},y.getDisplayUsername=function(e){return h(e,u)},y.idToHex=function(e){return 22==e.length?i.toHex(e):e},y.hexToId=function(e){return 32==e.length?i.fromHex(e):e},y.emptyURI=function(){return new y(y.Type.EMPTY,{})},y.albumURI=function(e,t){return new y(y.Type.ALBUM,{id:e,disc:t})},y.adURI=function(e){return new y(y.Type.AD,{id:e})},y.audioFileURI=function(e,t){return new y(y.Type.AUDIO_FILE,{id:t,extension:e})},y.artistURI=function(e){return new y(y.Type.ARTIST,{id:e})},y.artistToplistURI=function(e,t){return new y(y.Type.ARTIST_TOPLIST,{id:e,toplist:t})},y.dailyMixURI=function(e){return new y(y.Type.DAILY_MIX,{id:e})},y.searchURI=function(e){return new y(y.Type.SEARCH,{query:e})},y.trackURI=function(e,t,n,i){return new y(y.Type.TRACK,{id:e,anchor:t,context:n?y.fromString(n):n,play:i})},y.tracksetURI=function(e,t,n){return new y(y.Type.TRACKSET,{tracks:e,name:t||"",index:isNaN(n)?null:n})},y.facebookURI=function(e){return new y(y.Type.FACEBOOK,{uid:e})},y.followersURI=function(e){return new y(y.Type.FOLLOWERS,{username:e})},y.followingURI=function(e){return new y(y.Type.FOLLOWING,{username:e})},y.playlistURI=function(e,t){return new y(y.Type.PLAYLIST,{username:e,id:t})},y.playlistV2URI=function(e){return new y(y.Type.PLAYLIST_V2,{id:e})},y.folderURI=function(e,t){return new y(y.Type.FOLDER,{username:e,id:t})},y.collectionTrackList=function(e,t){return new y(y.Type.COLLECTION_TRACK_LIST,{username:e,id:t})},y.starredURI=function(e){return new y(y.Type.STARRED,{username:e})},y.userToplistURI=function(e,t){return new y(y.Type.USER_TOPLIST,{username:e,toplist:t})},y.userTopTracksURI=function(e){return new y(y.Type.USER_TOP_TRACKS,{username:e})},y.toplistURI=function(e,t,n){return new y(y.Type.TOPLIST,{toplist:e,country:t,global:!!n})},y.inboxURI=function(e){return new y(y.Type.INBOX,{username:e})},y.rootlistURI=function(e){return new y(y.Type.ROOTLIST,{username:e})},y.publishedRootlistURI=function(e){return new y(y.Type.PUBLISHED_ROOTLIST,{username:e})},y.localArtistURI=function(e){return new y(y.Type.LOCAL_ARTIST,{artist:e})},y.localAlbumURI=function(e,t){return new y(y.Type.LOCAL_ALBUM,{artist:e,album:t})},y.localURI=function(e,t,n,i){return new y(y.Type.LOCAL,{artist:e,album:t,track:n,duration:i})},y.libraryURI=function(e,t){return new y(y.Type.LIBRARY,{username:e,category:t})},y.collectionURI=function(e,t){return new y(y.Type.COLLECTION,{username:e,category:t})},y.temporaryPlaylistURI=function(e,t){return new y(y.Type.TEMP_PLAYLIST,{origin:e,data:t})},y.contextGroupURI=function(e,t){return new y(y.Type.CONTEXT_GROUP,{origin:e,name:t})},y.profileURI=function(e,t){return new y(y.Type.PROFILE,{username:e,args:t})},y.imageURI=function(e){return new y(y.Type.IMAGE,{id:e})},y.mosaicURI=function(e){return new y(y.Type.MOSAIC,{ids:e})},y.radioURI=function(e){return e=void 0===e?"":e,new y(y.Type.RADIO,{args:e})},y.specialURI=function(e){return e=void 0===e?[]:e,new y(y.Type.SPECIAL,{args:e})},y.stationURI=function(e){return e=void 0===e?[]:e,new y(y.Type.STATION,{args:e})},y.applicationURI=function(e,t){return t=void 0===t?[]:t,new y(y.Type.APPLICATION,{id:e,args:t})},y.collectionAlbumURI=function(e,t){return new y(y.Type.COLLECTION_ALBUM,{username:e,id:t})},y.collectionMissingAlbumURI=function(e,t){return new y(y.Type.COLLECTION_MISSING_ALBUM,{username:e,id:t})},y.collectionArtistURI=function(e,t){return new y(y.Type.COLLECTION_ARTIST,{username:e,id:t})},y.episodeURI=function(e,t,n){return new y(y.Type.EPISODE,{id:e,context:t?y.fromString(t):t,play:n})},y.showURI=function(e){return new y(y.Type.SHOW,{id:e})},y.liveURI=function(e){return new y(y.Type.LIVE,{id:e})},y.concertURI=function(e){return new y(y.Type.CONCERT,{id:e})},y.socialSessionURI=function(e){return new y(y.Type.SOCIAL_SESSION,{id:e})},y.interruptionURI=function(e){return new y(y.Type.INTERRUPTION,{id:e})},y.isAlbum=function(e){return(y.from(e)||{}).type===y.Type.ALBUM},y.isAd=function(e){return(y.from(e)||{}).type===y.Type.AD},y.isApplication=function(e){return(y.from(e)||{}).type===y.Type.APPLICATION},y.isArtist=function(e){return(y.from(e)||{}).type===y.Type.ARTIST},y.isCollection=function(e){return(y.from(e)||{}).type===y.Type.COLLECTION},y.isCollectionAlbum=function(e){return(y.from(e)||{}).type===y.Type.COLLECTION_ALBUM},y.isCollectionArtist=function(e){return(y.from(e)||{}).type===y.Type.COLLECTION_ARTIST},y.isDailyMix=function(e){return(y.from(e)||{}).type===y.Type.DAILY_MIX},y.isEpisode=function(e){return(y.from(e)||{}).type===y.Type.EPISODE},y.isFacebook=function(e){return(y.from(e)||{}).type===y.Type.FACEBOOK},y.isFolder=function(e){return(y.from(e)||{}).type===y.Type.FOLDER},y.isLocalArtist=function(e){return(y.from(e)||{}).type===y.Type.LOCAL_ARTIST},y.isLocalAlbum=function(e){return(y.from(e)||{}).type===y.Type.LOCAL_ALBUM},y.isLocalTrack=function(e){return(y.from(e)||{}).type===y.Type.LOCAL},y.isMosaic=function(e){return(y.from(e)||{}).type===y.Type.MOSAIC},y.isPlaylistV1=function(e){return(y.from(e)||{}).type===y.Type.PLAYLIST},y.isPlaylistV2=function(e){return(y.from(e)||{}).type===y.Type.PLAYLIST_V2},y.isRadio=function(e){return(y.from(e)||{}).type===y.Type.RADIO},y.isRootlist=function(e){return(y.from(e)||{}).type===y.Type.ROOTLIST},y.isSearch=function(e){return(y.from(e)||{}).type===y.Type.SEARCH},y.isShow=function(e){return(y.from(e)||{}).type===y.Type.SHOW},y.isLive=function(e){return(y.from(e)||{}).type===y.Type.LIVE},y.isConcert=function(e){return(y.from(e)||{}).type===y.Type.CONCERT},y.isStation=function(e){return(y.from(e)||{}).type===y.Type.STATION},y.isTrack=function(e){return(y.from(e)||{}).type===y.Type.TRACK},y.isProfile=function(e){return(y.from(e)||{}).type===y.Type.PROFILE},y.isPlaylistV1OrV2=function(e){var t=y.from(e);return!!t&&(t.type===y.Type.PLAYLIST||t.type===y.Type.PLAYLIST_V2)},y.isSocialSession=function(e){return(y.from(e)||{}).type===y.Type.SOCIAL_SESSION},y.isInterruption=function(e){return(y.from(e)||{}).type===y.Type.INTERRUPTION},e.exports=y},40131:function(e,t,n){"use strict";var i,r,o,s=n(31542),a=n(15313),c=n(25180),l=n(58640),u=n(73450),d=(n(63238),n(40895),n(52077),n(911),n(32081),n(95623),n(92571),n(21315));function p(e){return"string"!=typeof e}!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bz",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="bn",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pa-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(i||(i={})),function(e){e.AR="Ø ",e.FA="Ø ",e.EN=", "}(r||(r={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(o||(o={}));var h={},f=function(e,t){try{return(h[e]||(h[e]=new Intl.PluralRules(e))).select(t)}catch(n){return o.OTHER}};function _(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}var m=function(e){switch(e){case"ar":return"ar-u-nu-latn";default:return e}};function g(e){return{seconds:Math.round(e/1e3),minutes:Math.round(e/1e3/60),hours:Math.round(e/1e3/60/60),days:Math.round(e/1e3/60/60/24)}}var y,E=new(function(){function e(){(0,c.Z)(this,e),(0,u.Z)(this,"_locale",void 0),(0,u.Z)(this,"_dictionary",void 0),(0,u.Z)(this,"_isPseudoLocalizationOn",void 0),this._dictionary={},this._locale=i.en,this._isPseudoLocalizationOn=!1}return(0,l.Z)(e,[{key:"setDictionary",value:function(e){this._dictionary=e}},{key:"setLocale",value:function(e){this._locale=e}},{key:"getLocale",value:function(){return this._locale}},{key:"enablePseudoLocalization",value:function(){this._isPseudoLocalizationOn=!0}},{key:"disablePseudoLocalization",value:function(){this._isPseudoLocalizationOn=!1}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}},{key:"get",value:function(e){for(var t=(e in this._dictionary?this._dictionary[e]:e),n="",i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(p(t)){var s=r[0],c=f(this._locale,parseInt(s,10)),l=t[c];void 0!==l?n=l:t.other&&(n=t.other)}else n=t;if(/%\d%/.test(n)){var u=["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"];if(!u.includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==r?void 0:r.length)>0)for(var h=0;h<r.length;h++){var m=r[h];if(null!=m)if("string"==typeof m)n=n.replace("{".concat(h,"}"),_(m)).replace("%".concat(h,"%"),_(m));else if("number"==typeof m){var g=this.formatNumber(m);n=n.replace("{".concat(h,"}"),g).replace("%".concat(h,"%"),g)}else if("object"===(0,a.Z)(m))for(var y=0,E=Object.keys(m);y<E.length;y++){var v=E[y],S=m[v];n=n.replace("%".concat(v,"%"),_(S))}}return this._isPseudoLocalizationOn&&(n=d.ZP.localize(n)),n}},{key:"getSeparator",value:function(){switch(this._locale){case i.ar:return r.AR;case i.fa:return r.FA;default:return r.EN}}},{key:"formatNumber",value:function(e){return e.toLocaleString(m(this._locale))}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={year:"numeric",month:"long",day:"numeric"},i=t||n;return new Intl.DateTimeFormat(m(this._locale),i).format(e)}},{key:"formatRelativeDate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=new Date(Date.now()),r=(e=new Date(e)).getTime()-i.getTime(),o=Math.abs(r)<2592e6;if(o&&null!==(t=Intl)&&void 0!==t&&t.RelativeTimeFormat){var s=g(r),a=s.days,c=s.hours,l=s.minutes,u=s.seconds,d=new Intl.RelativeTimeFormat;return a||c||l?a||c?a?d.format(a,"days"):d.format(c,"hours"):d.format(l,"minutes"):d.format(u,"seconds")}return this.formatDate(e,n)}},{key:"__resetForTests",value:function(){this._dictionary={},this._locale=i.en,h={}}}]),e}()),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.documentElement.classList.add("no-focus-outline"),e.addEventListener("keydown",(function(t){"Tab"===t.key&&e.documentElement.classList.remove("no-focus-outline")}),!0),e.addEventListener("mousedown",(function(){e.documentElement.classList.add("no-focus-outline")}),!0)},S=(n(3214),n(55117)),b=n(49306),T=n(38638),R=n(55936),I=n(64420),A=(n(23938),n(5769),n(56446),n(17460),n(14078),n(83352),n(27471),n(62046)),k=n(41476),L=n(57135),O=n.n(L);n(90938),n(72482);function C(e){return P.apply(this,arguments)}function P(){return(P=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}throw new Error("Invalid call to sendMetric before initSemanticMetrics.");case 2:return e.abrupt("return",y(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(25901),n(98010),n(20252),n(14009);var w,D=n(63697);n(95374),n(55849),n(61418);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(){function e(){(0,c.Z)(this,e),(0,u.Z)(this,"_accessToken",void 0),(0,u.Z)(this,"_market",void 0),(0,u.Z)(this,"_headers",void 0),(0,u.Z)(this,"_globalRequestHeaders",void 0),(0,u.Z)(this,"_shouldSendMarket",void 0),(0,u.Z)(this,"_shouldSendGlobalHeaders",void 0),(0,u.Z)(this,"_locale",void 0),(0,u.Z)(this,"_shouldSendLocale",void 0),(0,u.Z)(this,"_shouldSendAuthorization",void 0),(0,u.Z)(this,"_host",void 0),(0,u.Z)(this,"path",void 0),(0,u.Z)(this,"responseType",void 0),(0,u.Z)(this,"queryParameters",void 0),(0,u.Z)(this,"_method",void 0),(0,u.Z)(this,"jsonContentType",void 0),(0,u.Z)(this,"body",void 0),(0,u.Z)(this,"_endpointIdentifier",void 0),(0,u.Z)(this,"_startTimestamp",void 0),(0,u.Z)(this,"_includeCredentials",void 0),this._accessToken=null,this._market="",this._headers=[],this._globalRequestHeaders=[],this._shouldSendMarket=!0,this._shouldSendGlobalHeaders=!0,this._locale=null,this._shouldSendLocale=!1,this._shouldSendAuthorization=!0,this._host="",this.path="",this.responseType="json",this.queryParameters=void 0,this._method="GET",this.jsonContentType=!1,this.body=null,this._endpointIdentifier=null,this._startTimestamp=null,this._includeCredentials=!1}var t;return(0,l.Z)(e,[{key:"getRequestImplementation",value:function(){return w}},{key:"accessToken",set:function(e){this._accessToken=e}},{key:"market",get:function(){return this._market},set:function(e){this._market=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"globalRequestHeaders",get:function(){return this._globalRequestHeaders},set:function(e){this._globalRequestHeaders=e}},{key:"startTimestamp",get:function(){return this._startTimestamp}},{key:"host",get:function(){return this._host}},{key:"method",get:function(){return this._method}},{key:"endpointIdentifier",get:function(){return this._endpointIdentifier}},{key:"withHost",value:function(e){return this._host=e,this}},{key:"withPath",value:function(e){return this.path=e,this}},{key:"withResponseType",value:function(e){return this.responseType=e,this}},{key:"withEndpointIdentifier",value:function(e){return this._endpointIdentifier=e,this}},{key:"withQueryParameters",value:function(e){return this.queryParameters=e,this}},{key:"withBody",value:function(e){return this.body=e,this}},{key:"withMethod",value:function(e){return this._method=e,this}},{key:"withoutMarket",value:function(){return this._shouldSendMarket=!1,this}},{key:"withoutGlobalHeaders",value:function(){return this._shouldSendGlobalHeaders=!1,this}},{key:"withoutAuthorization",value:function(){return this._shouldSendAuthorization=!1,this}},{key:"withLocale",value:function(e){return this._shouldSendLocale=!0,e&&(this._locale=e),this}},{key:"withJsonContentType",value:function(){return this.jsonContentType=!0,this}},{key:"withHeaders",value:function(e){return this._headers=e,this}},{key:"withCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"onBeforeSend",value:function(e){}},{key:"onAfterSend",value:function(e){}},{key:"send",value:(t=(0,k.Z)(O().mark((function e(){var t,n,i,r=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new w(this.method,"".concat(this._host).concat(this.path),this._shouldSendAuthorization),this._shouldSendMarket&&this.market&&(this.queryParameters=U(U({},this.queryParameters),{},{market:this.market})),this._shouldSendLocale&&this.locale&&(this.queryParameters=U(U({},this.queryParameters),{},{locale:this.locale})),this.locale&&t.addHeader("Accept-Language",this.locale),t.withQueryParameters(this.queryParameters),t.withResponseType(this.responseType),this._shouldSendAuthorization&&this._accessToken&&t.addHeader("Authorization","Bearer ".concat(this._accessToken)),t.addHeader("Accept","application/json"),this._includeCredentials&&t.includeCredentials(),this._shouldSendGlobalHeaders&&this._globalRequestHeaders.length>0&&this._globalRequestHeaders.forEach((function(e){var n=(0,D.Z)(e,2),i=n[0],r=n[1];t.addHeader(i,r)})),n=0;n<this._headers.length;n++)i=this._headers[n],t.addHeader(i.key,i.value);this.jsonContentType&&t.addHeader("Content-Type","application/json;charset=UTF-8"),this.body&&t.withPostData(this.body),e.prev=13,this.onBeforeSend(t),e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(13),e.abrupt("return",Promise.reject(e.t0));case 20:return this._startTimestamp=Date.now(),e.abrupt("return",t.send().then((function(e){return r.onAfterSend(),e})).catch((function(e){throw r.onAfterSend(e),e})));case 22:case"end":return e.stop()}}),e,this,[[13,17]])}))),function(){return t.apply(this,arguments)})}],[{key:"setRequestImplementation",value:function(e){w=e}}]),e}(),x=(n(70684),null);function F(){if(null===x)throw new Error("Missing `instance`. Have you called `setTransportInstance` yet?");return x}var B=function(){function e(t,n,i){return(0,c.Z)(this,e),(0,u.Z)(this,"method",void 0),(0,u.Z)(this,"url",void 0),(0,u.Z)(this,"postData",void 0),(0,u.Z)(this,"queryParameters",void 0),(0,u.Z)(this,"responseType",void 0),(0,u.Z)(this,"_headers",void 0),(0,u.Z)(this,"_authorize",void 0),(0,u.Z)(this,"_includeCredentials",void 0),this.method=t,this.url=n,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._authorize=i,this._includeCredentials=!1,this}var t;return(0,l.Z)(e,[{key:"withQueryParameters",value:function(e){this.queryParameters=e}},{key:"withPostData",value:function(e){this.postData=e}},{key:"withResponseType",value:function(e){this.responseType=e}},{key:"addHeader",value:function(e,t){return this._headers[e]=t,this}},{key:"includeCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"send",value:(t=(0,k.Z)(O().mark((function e(){var t,n,i,r,o;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F(),n=new URLSearchParams(this.queryParameters).toString(),i="".concat(this.url).concat(n?"?".concat(n):""),r={method:this.method,responseType:this.responseType,headers:this._headers,authorize:this._authorize,rejectNotOk:!0},this._includeCredentials&&(r.credentials="include"),this.postData&&(null!==(o=this._headers["Content-Type"])&&void 0!==o&&o.startsWith("application/json;charset=UTF-8")?r.payload=JSON.stringify(this.postData):r.payload=this.postData),e.abrupt("return",t.request(i,r).then((function(e){return e})).catch((function(e){throw e})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}function Y(e){return"".concat(e.method,"::").concat(e.host).concat(e.path,"::").concat(JSON.stringify(e.queryParameters))}function K(e,t,n){try{C({metric_type:A.MetricTypes.COUNTER,what:"request-rate",value:1,tags:{endpoint:e,statusCode:t,isFatal:n}}).catch((function(){return{}}))}catch(i){}}var H=function(e){(0,T.Z)(n,e);var t=Z(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,S.Z)(i),"pendingRequests",void 0),i.pendingRequests=new Set,i}return(0,l.Z)(n,[{key:"resetPendingRequests",value:function(){this.pendingRequests=new Set}},{key:"build",value:function(){var e,t=this,i=(0,b.Z)((0,I.Z)(n.prototype),"build",this).call(this);return i.onBeforeSend=function(){if(e=Y(i),t.pendingRequests.has(e)){var n=new Error("DUPLICATE_REQUEST_ERROR: Already sent this request (".concat(e,")"));throw n.name="DUPLICATE_REQUEST_ERROR",n}"GET"===i.method.toUpperCase()&&t.pendingRequests.add(e)},i.onAfterSend=function(n){e=Y(i);var r="unknown",o=!1;if(null!==i.endpointIdentifier&&(o=!0,r="".concat(i.method," ").concat(i.host||window.location.origin,"::").concat(i.endpointIdentifier)),n)throw o&&K(r,JSON.stringify(n.status||0),JSON.stringify(0===(i.endpointIdentifier||"").indexOf("/me"))),t.pendingRequests.delete(e),new Error("Request responsed with ".concat(n.status));if(o){K(r,"200","false");var s=Date.now()-(i.startTimestamp||0);!function(e,t,n){try{C({metric_type:A.MetricTypes.TIMER,what:"request-duration",value:n,tags:{endpoint:e,statusCode:t}}).catch((function(){return{}}))}catch(i){}}(r,"200",A.Time.fromMillis(s).asNanos())}t.pendingRequests.delete(e)},i}}]),n}(function(){function e(t){(0,c.Z)(this,e),(0,u.Z)(this,"_accessToken",void 0),(0,u.Z)(this,"_market",void 0),(0,u.Z)(this,"_locale",void 0),(0,u.Z)(this,"_globalRequestHeaders",void 0),(0,u.Z)(this,"_RequestImplementation",void 0),this._accessToken=null,this._market="",this._locale="",this._globalRequestHeaders=[],this._RequestImplementation=t||B}return(0,l.Z)(e,[{key:"accessToken",get:function(){return this._accessToken},set:function(e){this._accessToken=e}},{key:"globalRequestHeaders",get:function(){return this._globalRequestHeaders},set:function(e){this._globalRequestHeaders=e}},{key:"market",get:function(){return this._market},set:function(e){this._market=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"resetPendingRequests",value:function(){}},{key:"build",value:function(){M.setRequestImplementation(this._RequestImplementation);var e=new M;return e.accessToken=this._accessToken,e.market=this.market,e.locale=this.locale,e.globalRequestHeaders=this.globalRequestHeaders,e}}]),e}()),j=(n(26252),n(92403)),V=n(87885),G=n.n(V),W=n(30473),q=n.n(W),z=n(58459);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var X=function(e){(0,T.Z)(n,e);var t=Q(n);function n(e){var i;(0,c.Z)(this,n);var r=e.message,o=e.url,s=e.method,a=e.status;return i=t.call(this,r),(0,u.Z)((0,S.Z)(i),"name",void 0),(0,u.Z)((0,S.Z)(i),"requestUrl",void 0),(0,u.Z)((0,S.Z)(i),"requestMethod",void 0),(0,u.Z)((0,S.Z)(i),"status",void 0),i.name="HttpError",i.requestUrl=o,i.requestMethod=s,i.status=a,i}return(0,l.Z)(n,null,[{key:"fromResponse",value:function(e,t){return new n({message:e.statusText,url:e.url,method:t,status:e.status})}}]),n}((0,z.Z)(Error)),$=function(e){(0,T.Z)(n,e);var t=Q(n);function n(e){var i;(0,c.Z)(this,n);var r=e.timeout,o=e.url,s=e.method;return i=t.call(this,{message:"".concat(s.toUpperCase()," ").concat(o," timed out (").concat(r,"ms)"),url:o,method:s,status:503}),(0,u.Z)((0,S.Z)(i),"name",void 0),(0,u.Z)((0,S.Z)(i),"timeout",void 0),i.name="RequestTimeoutError",i.timeout=r,i}return n}(X);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=G()(j.fetch);function ne(e){return e&&void 0!==e.retries&&e.retries>0?te:j.fetch}function ie(e,t){return re.apply(this,arguments)}function re(){return(re=(0,k.Z)(O().mark((function e(t,n){var i,r,o,s,a,c=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]?c[2]:1e4,r=new(q()),o=r.signal,s=setTimeout((function(){return r.abort()}),i),a=ne(n),e.abrupt("return",a(t,ee(ee({},n),{},{signal:o})).then((function(e){return clearTimeout(s),e})).catch((function(e){var r;if("AbortError"===e.name)throw new $({timeout:i,url:t,method:null!==(r=null==n?void 0:n.method)&&void 0!==r?r:"get"});throw clearTimeout(s),e})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae=function(){function e(t,n){return(0,c.Z)(this,e),(0,u.Z)(this,"method",void 0),(0,u.Z)(this,"url",void 0),(0,u.Z)(this,"postData",void 0),(0,u.Z)(this,"queryParameters",void 0),(0,u.Z)(this,"responseType",void 0),(0,u.Z)(this,"_headers",void 0),(0,u.Z)(this,"_includeCredentials",void 0),this.method=t,this.url=n,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._includeCredentials=!1,this}var t;return(0,l.Z)(e,[{key:"withQueryParameters",value:function(e){this.queryParameters=e}},{key:"withResponseType",value:function(e){this.responseType=e}},{key:"withPostData",value:function(e){this.postData=e}},{key:"addHeader",value:function(e,t){return this._headers[e]=t,this}},{key:"includeCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"send",value:(t=(0,k.Z)(O().mark((function e(){var t,n,i,r=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.postData&&(t=null!==(n=this._headers["Content-Type"])&&void 0!==n&&n.startsWith("application/json;charset=UTF-8")?JSON.stringify(this.postData):this.postData),i=new URLSearchParams(this.queryParameters).toString(),e.abrupt("return",ie("".concat(this.url).concat(i?"?".concat(i):""),{method:this.method,body:t,credentials:this._includeCredentials?"include":void 0,headers:se({"User-Agent":{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0,CDN_FILE_URLS:'{"fonts/CircularSpUIAraOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.6d6a4c25.otf","fonts/CircularSpUIAraOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.05b31ded.woff","fonts/CircularSpUIAraOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.c32951f4.woff2","fonts/CircularSpUIAraOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.f97cb921.otf","fonts/CircularSpUIAraOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.9ddc7126.woff","fonts/CircularSpUIAraOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.317e96e5.woff2","fonts/CircularSpUIAraOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.f0effcd1.otf","fonts/CircularSpUIAraOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.3ad862e2.woff","fonts/CircularSpUIAraOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.aaab109b.woff2","fonts/CircularSpUIAraOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.f0833f3b.otf","fonts/CircularSpUIAraOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.5c7ed8d8.woff","fonts/CircularSpUIAraOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.dde45e52.woff2","fonts/CircularSpUICyrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.50cd1ca9.otf","fonts/CircularSpUICyrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.7536a73f.woff","fonts/CircularSpUICyrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.f5526fc4.woff2","fonts/CircularSpUICyrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.67641b90.otf","fonts/CircularSpUICyrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.909126fc.woff","fonts/CircularSpUICyrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.30dc9fb2.woff2","fonts/CircularSpUICyrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.15af6ebe.otf","fonts/CircularSpUICyrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.918c53b8.woff","fonts/CircularSpUICyrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.6a858994.woff2","fonts/CircularSpUICyrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.b10eb959.otf","fonts/CircularSpUICyrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.034997d0.woff","fonts/CircularSpUICyrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.55fa9f4a.woff2","fonts/CircularSpUIHbrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.11abebe4.otf","fonts/CircularSpUIHbrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.0a11e734.woff","fonts/CircularSpUIHbrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.217fb21f.woff2","fonts/CircularSpUIHbrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.57b36278.otf","fonts/CircularSpUIHbrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.9f406804.woff","fonts/CircularSpUIHbrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.ef043f44.woff2","fonts/CircularSpUIHbrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.fae4aece.otf","fonts/CircularSpUIHbrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.ad2b13cd.woff","fonts/CircularSpUIHbrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.cb36b6ec.woff2","fonts/CircularSpUIHbrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2e1df62a.otf","fonts/CircularSpUIHbrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2128eeac.woff","fonts/CircularSpUIHbrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.4884da16.woff2","fonts/CircularSpUIv3T-Black.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.ce8ef887.ttf","fonts/CircularSpUIv3T-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.effa986f.woff","fonts/CircularSpUIv3T-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.c21e63c5.woff2","fonts/CircularSpUIv3T-Bold.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.7eb7d0f7.ttf","fonts/CircularSpUIv3T-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.10e93738.woff","fonts/CircularSpUIv3T-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.8d0a45cc.woff2","fonts/CircularSpUIv3T-Book.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.a357677a.ttf","fonts/CircularSpUIv3T-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.ea8d19db.woff","fonts/CircularSpUIv3T-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.3466e0ec.woff2","fonts/CircularSpUIv3T-Light.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.89e4be2e.ttf","fonts/CircularSpUIv3T-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.2a78c017.woff","fonts/CircularSpUIv3T-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.afd9ab26.woff2","fonts/spoticon_regular_2.ttf":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.127670b5.ttf","fonts/spoticon_regular_2.woff":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.ff4c6091.woff","fonts/spoticon_regular_2.woff2":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.d319d911.woff2","generated/manifest-mobile-web-player.json":"https://open.scdn.co/cdn/generated/manifest-mobile-web-player.2aef628f.json","generated/manifest-web-player.json":"https://open.scdn.co/cdn/generated/manifest-web-player.038c3337.json","generated/opensearch.xml":"https://open.scdn.co/cdn/generated/opensearch.abfbfc66.xml","images/checkmark.png":"https://open.scdn.co/cdn/images/checkmark.389faa13.png","images/concert-hub-fb-card.png":"https://open.scdn.co/cdn/images/concert-hub-fb-card.5072379c.png","images/concert-hub-header.png":"https://open.scdn.co/cdn/images/concert-hub-header.56bcad9b.png","images/concert-hub-iphone-de.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-de.b6f99e33.png","images/concert-hub-iphone-el.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-el.5672149c.png","images/concert-hub-iphone-en.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-en.6eda306a.png","images/concert-hub-iphone-es_419.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es_419.cefd672a.png","images/concert-hub-iphone-es.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es.cefd672a.png","images/concert-hub-iphone-fi.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fi.52e8d625.png","images/concert-hub-iphone-fr_CA.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr_CA.93b897cb.png","images/concert-hub-iphone-fr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr.336e7db1.png","images/concert-hub-iphone-hu.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-hu.5eba9191.png","images/concert-hub-iphone-id.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-id.87ecf560.png","images/concert-hub-iphone-it.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-it.18450a29.png","images/concert-hub-iphone-ja.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ja.6eda306a.png","images/concert-hub-iphone-ms.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ms.83140310.png","images/concert-hub-iphone-nl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-nl.cb3a5038.png","images/concert-hub-iphone-pl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pl.45abd89b.png","images/concert-hub-iphone-pt_BR.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pt_BR.e932ef02.png","images/concert-hub-iphone-sv.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-sv.5e512289.png","images/concert-hub-iphone-tr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-tr.a017f03c.png","images/concert-hub-iphone-zh_TW.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-zh_TW.6eda306a.png","images/concert-hub-twitter-card.png":"https://open.scdn.co/cdn/images/concert-hub-twitter-card.71f6a06d.png","images/connect_header@1x.png":"https://open.scdn.co/cdn/images/connect_header@1x.ecc6912d.png","images/connect-to-devices-white.svg":"https://open.scdn.co/cdn/images/connect-to-devices-white.69d4229a.svg","images/desktop-auth-check.svg":"https://open.scdn.co/cdn/images/desktop-auth-check.65be3bbc.svg","images/desktop-auth-error.svg":"https://open.scdn.co/cdn/images/desktop-auth-error.b82f823b.svg","images/devices/android.png":"https://open.scdn.co/cdn/images/devices/android.460a5815.png","images/devices/ios.png":"https://open.scdn.co/cdn/images/devices/ios.535e1468.png","images/devices/mac-web.png":"https://open.scdn.co/cdn/images/devices/mac-web.71c1af1f.png","images/devices/mac.png":"https://open.scdn.co/cdn/images/devices/mac.80dcea83.png","images/devices/windowsphone.png":"https://open.scdn.co/cdn/images/devices/windowsphone.350c5a17.png","images/embed-podcast/upsell-background.png":"https://open.scdn.co/cdn/images/embed-podcast/upsell-background.00c81565.png","images/embed/copy-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/copy-32_circle_grey_outline_bg.0c6130eb.svg","images/embed/embed-code-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/embed-code-32_circle_grey_outline_bg.b40a255f.svg","images/embed/fb_colour.svg":"https://open.scdn.co/cdn/images/embed/fb_colour.13fa515f.svg","images/embed/messenger_colour.svg":"https://open.scdn.co/cdn/images/embed/messenger_colour.8f4836ec.svg","images/embed/twitter_colour.svg":"https://open.scdn.co/cdn/images/embed/twitter_colour.456d46db.svg","images/embed/whatsapp.svg":"https://open.scdn.co/cdn/images/embed/whatsapp.e33bfab4.svg","images/emi.png":"https://open.scdn.co/cdn/images/emi.c7e51c1a.png","images/employee-podcasts-modal-art.png":"https://open.scdn.co/cdn/images/employee-podcasts-modal-art.956e5f5e.png","images/equaliser-animated-green.gif":"https://open.scdn.co/cdn/images/equaliser-animated-green.73b73928.gif","images/equaliser-green.svg":"https://open.scdn.co/cdn/images/equaliser-green.1184ed87.svg","images/favicon.ico":"https://open.scdn.co/cdn/images/favicon.5cb2bd30.ico","images/favicon.png":"https://open.scdn.co/cdn/images/favicon.0c211e2e.png","images/favicon16.png":"https://open.scdn.co/cdn/images/favicon16.19fc3918.png","images/favicon32.png":"https://open.scdn.co/cdn/images/favicon32.a19b4f5b.png","images/focused_stroy_play.png":"https://open.scdn.co/cdn/images/focused_stroy_play.c908b733.png","images/follow/avatar-placeholder.png":"https://open.scdn.co/cdn/images/follow/avatar-placeholder.2f817d4a.png","images/follow/sprite.gif":"https://open.scdn.co/cdn/images/follow/sprite.e282a709.gif","images/follow/sprite@1.png":"https://open.scdn.co/cdn/images/follow/sprite@1.b994540b.png","images/hifi-button-off.svg":"https://open.scdn.co/cdn/images/hifi-button-off.87461500.svg","images/hifi-button-on.svg":"https://open.scdn.co/cdn/images/hifi-button-on.48a2de90.svg","images/hifi.svg":"https://open.scdn.co/cdn/images/hifi.0526a5b1.svg","images/home-icon.svg":"https://open.scdn.co/cdn/images/home-icon.ba66757a.svg","images/icons/Spotify_1024.png":"https://open.scdn.co/cdn/images/icons/Spotify_1024.d6467a14.png","images/icons/Spotify_128.png":"https://open.scdn.co/cdn/images/icons/Spotify_128.c9ce2f2e.png","images/icons/Spotify_16.png":"https://open.scdn.co/cdn/images/icons/Spotify_16.aa3775a0.png","images/icons/Spotify_256.png":"https://open.scdn.co/cdn/images/icons/Spotify_256.c8416b60.png","images/icons/Spotify_32.png":"https://open.scdn.co/cdn/images/icons/Spotify_32.492cdebf.png","images/icons/Spotify_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_512.49a0bf03.png","images/icons/Spotify_64.png":"https://open.scdn.co/cdn/images/icons/Spotify_64.47bcd979.png","images/icons/Spotify_MWP_192.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_192.c70b9055.png","images/icons/Spotify_MWP_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_512.591cfa88.png","images/improved-modal-bg.jpg":"https://open.scdn.co/cdn/images/improved-modal-bg.23e5dcb1.jpg","images/login-background.jpg":"https://open.scdn.co/cdn/images/login-background.078204fe.jpg","images/login-signup-burst.svg":"https://open.scdn.co/cdn/images/login-signup-burst.5f6a6521.svg","images/logo-complete-black.svg":"https://open.scdn.co/cdn/images/logo-complete-black.573d8227.svg","images/logo-white-2x.png":"https://open.scdn.co/cdn/images/logo-white-2x.ef36ed81.png","images/merlin.png":"https://open.scdn.co/cdn/images/merlin.cd7e72d1.png","images/mid-year.png":"https://open.scdn.co/cdn/images/mid-year.9e2ead8f.png","images/moviebuff.png":"https://open.scdn.co/cdn/images/moviebuff.65e80213.png","images/og-image.png":"https://open.scdn.co/cdn/images/og-image.64b84348.png","images/orchard.png":"https://open.scdn.co/cdn/images/orchard.677c5ae0.png","images/rovi.png":"https://open.scdn.co/cdn/images/rovi.7b503678.png","images/s2l-desktopui-ltr.png":"https://open.scdn.co/cdn/images/s2l-desktopui-ltr.3024b050.png","images/s2l-desktopui-rtl.png":"https://open.scdn.co/cdn/images/s2l-desktopui-rtl.a9690daf.png","images/s2l-mobileui.png":"https://open.scdn.co/cdn/images/s2l-mobileui.9fc9d151.png","images/sony.png":"https://open.scdn.co/cdn/images/sony.7e5692e6.png","images/spotifylogo.svg":"https://open.scdn.co/cdn/images/spotifylogo.a884cca3.svg","images/station-header-wave.svg":"https://open.scdn.co/cdn/images/station-header-wave.0f3784ea.svg","images/station-wave.svg":"https://open.scdn.co/cdn/images/station-wave.2b7b882c.svg","images/sw_saber_ahsoka1.png":"https://open.scdn.co/cdn/images/sw_saber_ahsoka1.5495e812.png","images/sw_saber_anakin.png":"https://open.scdn.co/cdn/images/sw_saber_anakin.a7ba22d2.png","images/sw_saber_leia.png":"https://open.scdn.co/cdn/images/sw_saber_leia.1146243b.png","images/sw_saber_luke.png":"https://open.scdn.co/cdn/images/sw_saber_luke.e4e10033.png","images/sw_saber_mace.png":"https://open.scdn.co/cdn/images/sw_saber_mace.1ba83c7d.png","images/sw_saber_rey.png":"https://open.scdn.co/cdn/images/sw_saber_rey.994789b5.png","images/sw_saber_vader.png":"https://open.scdn.co/cdn/images/sw_saber_vader.070f862b.png","images/touch-icon-114.png":"https://open.scdn.co/cdn/images/touch-icon-114.0d424df2.png","images/touch-icon-144.png":"https://open.scdn.co/cdn/images/touch-icon-144.36faaf96.png","images/touch-icon-57.png":"https://open.scdn.co/cdn/images/touch-icon-57.5460f415.png","images/touch-icon-72.png":"https://open.scdn.co/cdn/images/touch-icon-72.cffecbdb.png","images/tracklist-placeholder.png":"https://open.scdn.co/cdn/images/tracklist-placeholder.59aa68d8.png","images/tracklist-row-episode-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-episode-fallback.e8ae3577.svg","images/tracklist-row-song-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-song-fallback.4db3ccfe.svg","images/tracklist-row-video-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-video-fallback.954459da.svg","images/universal.png":"https://open.scdn.co/cdn/images/universal.3ceb95fd.png","images/vinyl-bottom-layer.svg":"https://open.scdn.co/cdn/images/vinyl-bottom-layer.82d9f6ef.svg","images/vinyl-top-layer.svg":"https://open.scdn.co/cdn/images/vinyl-top-layer.b56c3ccf.svg","images/warner.png":"https://open.scdn.co/cdn/images/warner.a5039776.png","images/zara-larsson-singles.png":"https://open.scdn.co/cdn/images/zara-larsson-singles.59dbba9e.png","js/fb.js":"https://open.scdn.co/cdn/js/fb.83cf1e53.js","js/gtag.js":"https://open.scdn.co/cdn/js/gtag.6c80abba.js","js/gtm.js":"https://open.scdn.co/cdn/js/gtm.6d498f08.js","js/retargeting-pixels.js":"https://open.scdn.co/cdn/js/retargeting-pixels.1fa1ceda.js","js/urlRedirect.js":"https://open.scdn.co/cdn/js/urlRedirect.156df566.js","js/urlScheme.js":"https://open.scdn.co/cdn/js/urlScheme.f1e6e8b6.js"}'}.SERVER_UA,"Content-Type":ce(this.responseType)},this._headers)}).then(function(){var e=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw X.fromResponse(t,r.method||"GET");case 2:if("text"!==r.responseType){e.next=8;break}return e.next=5,t.text();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,t.json();case 10:e.t0=e.sent;case 11:return e.t1=e.t0,e.t2=t.status,e.abrupt("return",{body:e.t1,status:e.t2});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw e})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function ce(e){return"text"===e?"text/plain":"application/json"}var le=null,ue=function(){function e(){(0,c.Z)(this,e)}return(0,l.Z)(e,null,[{key:"setSession",value:function(e){if(e){var t=e.accessToken,n=this.getInstance();n.accessToken=t,t||n.resetPendingRequests()}}},{key:"setLocale",value:function(e){this.getInstance().locale=e}},{key:"setGlobalRequestHeaders",value:function(e){this.getInstance().globalRequestHeaders=e}},{key:"setMarket",value:function(e){this.getInstance().market=e}},{key:"resetInstance",value:function(){le=null}},{key:"getInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return le||(le=this.createNew(e)),le}},{key:"createNew",value:function(e){var t=e.Constructor,n=void 0===t?H:t,i=e.fromServer;return new n(void 0!==i&&i?ae:B)}}]),e}(),de=(n(47071),n(50065)),pe=n(10043),he=n(84432),fe=n(78544),_e=(n(73902),n(3723));function me(e){var t,n='{"fonts/CircularSpUIAraOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.6d6a4c25.otf","fonts/CircularSpUIAraOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.05b31ded.woff","fonts/CircularSpUIAraOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Black.c32951f4.woff2","fonts/CircularSpUIAraOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.f97cb921.otf","fonts/CircularSpUIAraOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.9ddc7126.woff","fonts/CircularSpUIAraOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Bold.317e96e5.woff2","fonts/CircularSpUIAraOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.f0effcd1.otf","fonts/CircularSpUIAraOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.3ad862e2.woff","fonts/CircularSpUIAraOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Book.aaab109b.woff2","fonts/CircularSpUIAraOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.f0833f3b.otf","fonts/CircularSpUIAraOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.5c7ed8d8.woff","fonts/CircularSpUIAraOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIAraOnly-Light.dde45e52.woff2","fonts/CircularSpUICyrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.50cd1ca9.otf","fonts/CircularSpUICyrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.7536a73f.woff","fonts/CircularSpUICyrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Black.f5526fc4.woff2","fonts/CircularSpUICyrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.67641b90.otf","fonts/CircularSpUICyrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.909126fc.woff","fonts/CircularSpUICyrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Bold.30dc9fb2.woff2","fonts/CircularSpUICyrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.15af6ebe.otf","fonts/CircularSpUICyrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.918c53b8.woff","fonts/CircularSpUICyrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Book.6a858994.woff2","fonts/CircularSpUICyrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.b10eb959.otf","fonts/CircularSpUICyrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.034997d0.woff","fonts/CircularSpUICyrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUICyrOnly-Light.55fa9f4a.woff2","fonts/CircularSpUIHbrOnly-Black.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.11abebe4.otf","fonts/CircularSpUIHbrOnly-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.0a11e734.woff","fonts/CircularSpUIHbrOnly-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Black.217fb21f.woff2","fonts/CircularSpUIHbrOnly-Bold.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.57b36278.otf","fonts/CircularSpUIHbrOnly-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.9f406804.woff","fonts/CircularSpUIHbrOnly-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Bold.ef043f44.woff2","fonts/CircularSpUIHbrOnly-Book.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.fae4aece.otf","fonts/CircularSpUIHbrOnly-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.ad2b13cd.woff","fonts/CircularSpUIHbrOnly-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Book.cb36b6ec.woff2","fonts/CircularSpUIHbrOnly-Light.otf":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2e1df62a.otf","fonts/CircularSpUIHbrOnly-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.2128eeac.woff","fonts/CircularSpUIHbrOnly-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIHbrOnly-Light.4884da16.woff2","fonts/CircularSpUIv3T-Black.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.ce8ef887.ttf","fonts/CircularSpUIv3T-Black.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.effa986f.woff","fonts/CircularSpUIv3T-Black.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Black.c21e63c5.woff2","fonts/CircularSpUIv3T-Bold.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.7eb7d0f7.ttf","fonts/CircularSpUIv3T-Bold.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.10e93738.woff","fonts/CircularSpUIv3T-Bold.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Bold.8d0a45cc.woff2","fonts/CircularSpUIv3T-Book.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.a357677a.ttf","fonts/CircularSpUIv3T-Book.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.ea8d19db.woff","fonts/CircularSpUIv3T-Book.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Book.3466e0ec.woff2","fonts/CircularSpUIv3T-Light.ttf":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.89e4be2e.ttf","fonts/CircularSpUIv3T-Light.woff":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.2a78c017.woff","fonts/CircularSpUIv3T-Light.woff2":"https://open.scdn.co/cdn/fonts/CircularSpUIv3T-Light.afd9ab26.woff2","fonts/spoticon_regular_2.ttf":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.127670b5.ttf","fonts/spoticon_regular_2.woff":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.ff4c6091.woff","fonts/spoticon_regular_2.woff2":"https://open.scdn.co/cdn/fonts/spoticon_regular_2.d319d911.woff2","generated/manifest-mobile-web-player.json":"https://open.scdn.co/cdn/generated/manifest-mobile-web-player.2aef628f.json","generated/manifest-web-player.json":"https://open.scdn.co/cdn/generated/manifest-web-player.038c3337.json","generated/opensearch.xml":"https://open.scdn.co/cdn/generated/opensearch.abfbfc66.xml","images/checkmark.png":"https://open.scdn.co/cdn/images/checkmark.389faa13.png","images/concert-hub-fb-card.png":"https://open.scdn.co/cdn/images/concert-hub-fb-card.5072379c.png","images/concert-hub-header.png":"https://open.scdn.co/cdn/images/concert-hub-header.56bcad9b.png","images/concert-hub-iphone-de.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-de.b6f99e33.png","images/concert-hub-iphone-el.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-el.5672149c.png","images/concert-hub-iphone-en.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-en.6eda306a.png","images/concert-hub-iphone-es_419.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es_419.cefd672a.png","images/concert-hub-iphone-es.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-es.cefd672a.png","images/concert-hub-iphone-fi.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fi.52e8d625.png","images/concert-hub-iphone-fr_CA.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr_CA.93b897cb.png","images/concert-hub-iphone-fr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-fr.336e7db1.png","images/concert-hub-iphone-hu.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-hu.5eba9191.png","images/concert-hub-iphone-id.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-id.87ecf560.png","images/concert-hub-iphone-it.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-it.18450a29.png","images/concert-hub-iphone-ja.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ja.6eda306a.png","images/concert-hub-iphone-ms.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-ms.83140310.png","images/concert-hub-iphone-nl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-nl.cb3a5038.png","images/concert-hub-iphone-pl.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pl.45abd89b.png","images/concert-hub-iphone-pt_BR.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-pt_BR.e932ef02.png","images/concert-hub-iphone-sv.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-sv.5e512289.png","images/concert-hub-iphone-tr.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-tr.a017f03c.png","images/concert-hub-iphone-zh_TW.png":"https://open.scdn.co/cdn/images/concert-hub-iphone-zh_TW.6eda306a.png","images/concert-hub-twitter-card.png":"https://open.scdn.co/cdn/images/concert-hub-twitter-card.71f6a06d.png","images/connect_header@1x.png":"https://open.scdn.co/cdn/images/connect_header@1x.ecc6912d.png","images/connect-to-devices-white.svg":"https://open.scdn.co/cdn/images/connect-to-devices-white.69d4229a.svg","images/desktop-auth-check.svg":"https://open.scdn.co/cdn/images/desktop-auth-check.65be3bbc.svg","images/desktop-auth-error.svg":"https://open.scdn.co/cdn/images/desktop-auth-error.b82f823b.svg","images/devices/android.png":"https://open.scdn.co/cdn/images/devices/android.460a5815.png","images/devices/ios.png":"https://open.scdn.co/cdn/images/devices/ios.535e1468.png","images/devices/mac-web.png":"https://open.scdn.co/cdn/images/devices/mac-web.71c1af1f.png","images/devices/mac.png":"https://open.scdn.co/cdn/images/devices/mac.80dcea83.png","images/devices/windowsphone.png":"https://open.scdn.co/cdn/images/devices/windowsphone.350c5a17.png","images/embed-podcast/upsell-background.png":"https://open.scdn.co/cdn/images/embed-podcast/upsell-background.00c81565.png","images/embed/copy-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/copy-32_circle_grey_outline_bg.0c6130eb.svg","images/embed/embed-code-32_circle_grey_outline_bg.svg":"https://open.scdn.co/cdn/images/embed/embed-code-32_circle_grey_outline_bg.b40a255f.svg","images/embed/fb_colour.svg":"https://open.scdn.co/cdn/images/embed/fb_colour.13fa515f.svg","images/embed/messenger_colour.svg":"https://open.scdn.co/cdn/images/embed/messenger_colour.8f4836ec.svg","images/embed/twitter_colour.svg":"https://open.scdn.co/cdn/images/embed/twitter_colour.456d46db.svg","images/embed/whatsapp.svg":"https://open.scdn.co/cdn/images/embed/whatsapp.e33bfab4.svg","images/emi.png":"https://open.scdn.co/cdn/images/emi.c7e51c1a.png","images/employee-podcasts-modal-art.png":"https://open.scdn.co/cdn/images/employee-podcasts-modal-art.956e5f5e.png","images/equaliser-animated-green.gif":"https://open.scdn.co/cdn/images/equaliser-animated-green.73b73928.gif","images/equaliser-green.svg":"https://open.scdn.co/cdn/images/equaliser-green.1184ed87.svg","images/favicon.ico":"https://open.scdn.co/cdn/images/favicon.5cb2bd30.ico","images/favicon.png":"https://open.scdn.co/cdn/images/favicon.0c211e2e.png","images/favicon16.png":"https://open.scdn.co/cdn/images/favicon16.19fc3918.png","images/favicon32.png":"https://open.scdn.co/cdn/images/favicon32.a19b4f5b.png","images/focused_stroy_play.png":"https://open.scdn.co/cdn/images/focused_stroy_play.c908b733.png","images/follow/avatar-placeholder.png":"https://open.scdn.co/cdn/images/follow/avatar-placeholder.2f817d4a.png","images/follow/sprite.gif":"https://open.scdn.co/cdn/images/follow/sprite.e282a709.gif","images/follow/sprite@1.png":"https://open.scdn.co/cdn/images/follow/sprite@1.b994540b.png","images/hifi-button-off.svg":"https://open.scdn.co/cdn/images/hifi-button-off.87461500.svg","images/hifi-button-on.svg":"https://open.scdn.co/cdn/images/hifi-button-on.48a2de90.svg","images/hifi.svg":"https://open.scdn.co/cdn/images/hifi.0526a5b1.svg","images/home-icon.svg":"https://open.scdn.co/cdn/images/home-icon.ba66757a.svg","images/icons/Spotify_1024.png":"https://open.scdn.co/cdn/images/icons/Spotify_1024.d6467a14.png","images/icons/Spotify_128.png":"https://open.scdn.co/cdn/images/icons/Spotify_128.c9ce2f2e.png","images/icons/Spotify_16.png":"https://open.scdn.co/cdn/images/icons/Spotify_16.aa3775a0.png","images/icons/Spotify_256.png":"https://open.scdn.co/cdn/images/icons/Spotify_256.c8416b60.png","images/icons/Spotify_32.png":"https://open.scdn.co/cdn/images/icons/Spotify_32.492cdebf.png","images/icons/Spotify_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_512.49a0bf03.png","images/icons/Spotify_64.png":"https://open.scdn.co/cdn/images/icons/Spotify_64.47bcd979.png","images/icons/Spotify_MWP_192.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_192.c70b9055.png","images/icons/Spotify_MWP_512.png":"https://open.scdn.co/cdn/images/icons/Spotify_MWP_512.591cfa88.png","images/improved-modal-bg.jpg":"https://open.scdn.co/cdn/images/improved-modal-bg.23e5dcb1.jpg","images/login-background.jpg":"https://open.scdn.co/cdn/images/login-background.078204fe.jpg","images/login-signup-burst.svg":"https://open.scdn.co/cdn/images/login-signup-burst.5f6a6521.svg","images/logo-complete-black.svg":"https://open.scdn.co/cdn/images/logo-complete-black.573d8227.svg","images/logo-white-2x.png":"https://open.scdn.co/cdn/images/logo-white-2x.ef36ed81.png","images/merlin.png":"https://open.scdn.co/cdn/images/merlin.cd7e72d1.png","images/mid-year.png":"https://open.scdn.co/cdn/images/mid-year.9e2ead8f.png","images/moviebuff.png":"https://open.scdn.co/cdn/images/moviebuff.65e80213.png","images/og-image.png":"https://open.scdn.co/cdn/images/og-image.64b84348.png","images/orchard.png":"https://open.scdn.co/cdn/images/orchard.677c5ae0.png","images/rovi.png":"https://open.scdn.co/cdn/images/rovi.7b503678.png","images/s2l-desktopui-ltr.png":"https://open.scdn.co/cdn/images/s2l-desktopui-ltr.3024b050.png","images/s2l-desktopui-rtl.png":"https://open.scdn.co/cdn/images/s2l-desktopui-rtl.a9690daf.png","images/s2l-mobileui.png":"https://open.scdn.co/cdn/images/s2l-mobileui.9fc9d151.png","images/sony.png":"https://open.scdn.co/cdn/images/sony.7e5692e6.png","images/spotifylogo.svg":"https://open.scdn.co/cdn/images/spotifylogo.a884cca3.svg","images/station-header-wave.svg":"https://open.scdn.co/cdn/images/station-header-wave.0f3784ea.svg","images/station-wave.svg":"https://open.scdn.co/cdn/images/station-wave.2b7b882c.svg","images/sw_saber_ahsoka1.png":"https://open.scdn.co/cdn/images/sw_saber_ahsoka1.5495e812.png","images/sw_saber_anakin.png":"https://open.scdn.co/cdn/images/sw_saber_anakin.a7ba22d2.png","images/sw_saber_leia.png":"https://open.scdn.co/cdn/images/sw_saber_leia.1146243b.png","images/sw_saber_luke.png":"https://open.scdn.co/cdn/images/sw_saber_luke.e4e10033.png","images/sw_saber_mace.png":"https://open.scdn.co/cdn/images/sw_saber_mace.1ba83c7d.png","images/sw_saber_rey.png":"https://open.scdn.co/cdn/images/sw_saber_rey.994789b5.png","images/sw_saber_vader.png":"https://open.scdn.co/cdn/images/sw_saber_vader.070f862b.png","images/touch-icon-114.png":"https://open.scdn.co/cdn/images/touch-icon-114.0d424df2.png","images/touch-icon-144.png":"https://open.scdn.co/cdn/images/touch-icon-144.36faaf96.png","images/touch-icon-57.png":"https://open.scdn.co/cdn/images/touch-icon-57.5460f415.png","images/touch-icon-72.png":"https://open.scdn.co/cdn/images/touch-icon-72.cffecbdb.png","images/tracklist-placeholder.png":"https://open.scdn.co/cdn/images/tracklist-placeholder.59aa68d8.png","images/tracklist-row-episode-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-episode-fallback.e8ae3577.svg","images/tracklist-row-song-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-song-fallback.4db3ccfe.svg","images/tracklist-row-video-fallback.svg":"https://open.scdn.co/cdn/images/tracklist-row-video-fallback.954459da.svg","images/universal.png":"https://open.scdn.co/cdn/images/universal.3ceb95fd.png","images/vinyl-bottom-layer.svg":"https://open.scdn.co/cdn/images/vinyl-bottom-layer.82d9f6ef.svg","images/vinyl-top-layer.svg":"https://open.scdn.co/cdn/images/vinyl-top-layer.b56c3ccf.svg","images/warner.png":"https://open.scdn.co/cdn/images/warner.a5039776.png","images/zara-larsson-singles.png":"https://open.scdn.co/cdn/images/zara-larsson-singles.59dbba9e.png","js/fb.js":"https://open.scdn.co/cdn/js/fb.83cf1e53.js","js/gtag.js":"https://open.scdn.co/cdn/js/gtag.6c80abba.js","js/gtm.js":"https://open.scdn.co/cdn/js/gtm.6d498f08.js","js/retargeting-pixels.js":"https://open.scdn.co/cdn/js/retargeting-pixels.1fa1ceda.js","js/urlRedirect.js":"https://open.scdn.co/cdn/js/urlRedirect.156df566.js","js/urlScheme.js":"https://open.scdn.co/cdn/js/urlScheme.f1e6e8b6.js"}';try{t=JSON.parse(n)}catch(i){throw new Error("Invalid CDN_FILE_URLS environment variable.")}if(!t[e])throw new Error("`".concat(e,"` is not available in CDN_FILE_URLS."));return t[e]}var ge=(0,pe.iv)("color:","rgb(255, 255, 255)",";",""),ye=(0,pe.iv)(ge,";font-weight:300;",""),Ee={name:"1ms60m4",styles:"font-family:'spotify-circular','Helvetica Neue',Helvetica,Arial,sans-serif"},ve={name:"1ld3wv3",styles:"-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none"},Se=(0,pe.iv)("@font-face{font-family:'spotify-circular';src:url('",me("fonts/CircularSpUIv3T-Book.woff2"),"') format('woff2'),url('",me("fonts/CircularSpUIv3T-Book.woff"),"') format('woff'),url('",me("fonts/CircularSpUIv3T-Book.ttf"),"') format('truetype');font-weight:normal;font-style:normal;font-display:swap;}@font-face{font-family:'spotify-circular';src:url('",me("fonts/CircularSpUIv3T-Bold.woff2"),"') format('woff2'),url('",me("fonts/CircularSpUIv3T-Bold.woff"),"') format('woff'),url('",me("fonts/CircularSpUIv3T-Bold.ttf"),"') format('truetype');font-weight:bold;font-style:normal;font-display:swap;}",""),be=(0,pe.iv)("h1,h2{margin:0;font-size:initial;font-weight:normal;}.no-focus-outline{*:focus{outline:0;}}button{margin:0;border:0;padding:0;color:inherit;background-color:transparent;cursor:pointer;",Ee,";font-size:2rem;}a{",ge,";text-decoration:none;}button{user-select:none;}",""),Te=(0,pe.iv)(Se," html{font-size:8px;}body{",Ee,";font-size:2rem;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:auto;font-smooth:always;",ge,";}",be,";",""),Re=(0,pe.iv)(Se," body{",Ee,";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:auto;font-smooth:always;",ge,";}",be,";",""),Ie=function(e){var t=e.width,n=e.height;return function(){return(0,_e.iv)(["@media screen and (max-width:","px),screen and (max-height:","px){","}"],t,n,_e.iv.apply(void 0,arguments))}},Ae={height:375,width:667},ke={small:Ie({height:211,width:375}),medium:Ie(Ae)},Le=231,Oe=152,Ce=467,Pe={medium:520,small:300},we={small:Le},De=Object.keys(Pe).reduce((function(e,t){return e[t]="@media (max-width: ".concat(Pe[t],"px)"),e}),{}),Ne=Object.keys(we).reduce((function(e,t){return e[t]="@media (max-height: ".concat(we[t],"px)"),e}),{}),Ue=16,Me=40,xe=30,Fe=168,Be={largeH:200,mediumH:121,smallH:80},Ze={largeH:160,mediumH:104,smallH:80},Ye={largeH:152,mediumH:96,smallH:80},Ke=400,He="19px",je="14px",Ve=n(77599),Ge=n(81183),We=n(25912),qe=(n(756),n(27378)),ze=n.n(qe),Qe=(n(50219),n(95163),n(69217),n(61013),"PLAYER"),Xe="UPSELL",$e=function(e){return e.machineState.loop===Xe},Je=function(e){return"is following"===e.data.followState},et="SHOW_PLAYER";var tt="PAUSE",nt="PLAY",it="TOGGLE_PLAY",rt="PLAY_INDEX",ot="PLAYBACK_STATE_CHANGED",st="PLAYBACK_ERROR",at="SEEK",ct="SEEK_BACK",lt="SEEK_FORWARD",ut="audio",dt="video";function pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;return{type:it,mediaType:e}}function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut;return{type:nt,mediaType:e}}function ft(){return{type:tt}}function _t(e){return{type:at,time:e}}var mt="SPOTIFY_ICON_CLICK",gt="FOLLOW_CLICK",yt="START_LISTENING_CLICK",Et="EPISODE_TITLE_CLICK",vt="SHOW_TITLE_CLICK",St="FOLLOW_SHOW_SUCCESS",bt="REMOVE_SHOW_SUCCESS";function Tt(){return{type:mt}}function Rt(){return{type:Et}}var It=n(83721),At=n(29603),kt=(n(23615),(0,qe.createContext)("")),Lt=kt.Provider,Ot=kt.Consumer,Ct=function(e){var t=e.value,n=e.index,i=e.children;return ze().createElement(Ot,null,(function(e){var r=""===e?t:"".concat(e,"/").concat(t);return"number"==typeof n&&(r="".concat(r,"/").concat(n)),ze().createElement(Lt,{value:r},i)}))},Pt="LOG_INTERACTION";function wt(e){return{type:Pt,logData:e}}var Dt=["itemId"];function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mt,xt=function(e,t,n){var i=n.itemId,r=(0,It.Z)(n,Dt),o=r.location&&r.location.pathname||"",s=t.dispatch;return Ut(Ut({},r),{},{onLogInteraction:function(e){var t=function(e,t){return function(n){var i=n.intent,r=n.type,o=n.targetUri,s=n.itemIdSuffix,a=n.pathNameOverride,c=s?"".concat(t,"/").concat(s):t,l=a||e;return{page:l.split(/\//).filter((function(e){return""!==e})).shift(),view_uri:l,action_intent:i,action_type:r,target_uri:o,item_id:c}}}(o,i);s(wt(t(e)))}})},Ft=function(e){var t=e.displayName||e.name||"Component",n=function(e){var t=function(t){return ze().createElement(Ot,null,(function(n){return ze().createElement(e,(0,At.Z)({itemId:n},t))}))},n=e.displayName||e.name||"Component";return t.displayName="usingItemId(".concat(n,")"),t}((0,de.$j)(null,null,xt)(e));return n.displayName="withInteractionLogger(".concat(t,")"),n},Bt=n(63690),Zt=n(61424),Yt=n(5026),Kt=n.n(Yt);function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}function jt(e){var t=parseInt(e.replace("#",""),16),n=t>>8&255,i=255&t;return"".concat(t>>16&255,",").concat(n,",").concat(i)}var Vt={name:"1jzi3uc",styles:"&:after{opacity:1;}"},Gt={name:"k39uwt",styles:"&:before{opacity:1;}"},Wt=(0,We.Z)("div",{target:"eguvk3k1"})("width:100%;overflow:hidden;opacity:0.8;",(function(e){return(0,pe.iv)("&:before,&:after{display:block;width:",8,"px;top:0;bottom:0;content:'';position:absolute;z-index:2;}&:before{opacity:0;transition:opacity 100ms linear;background:linear-gradient(\n        to right,\n        rgb(",jt(e.backgroundColor),"),\n        rgba(",jt(e.backgroundColor),", 0)\n      );left:0;}&:after{opacity:0;background:linear-gradient(\n        to left,\n        rgb(",jt(e.backgroundColor),"),\n        rgba(",jt(e.backgroundColor),", 0)\n      );right:0;}","")})," ",(function(e){return e.isAnimating&&!e.animationWillSoonEnd&&Gt})," ",(function(e){return e.shouldMarquee&&Vt})," ",De.medium,"{width:auto;left:",Ue,"px;bottom:",38,"px;right:",64,"px;}",De.small,"{display:block;bottom:",32,"px;}"),qt=(0,pe.F4)(Mt||(Mt=(0,Zt.Z)(["\n  0% { transform: translate3d(0, 0, 0); }\n  100% { transform: translate3d(-50%, 0, 0); }\n"]))),zt=(0,We.Z)("span",{target:"eguvk3k0"})("white-space:nowrap;display:inline-block;line-height:2rem;",(function(e){return e.shouldMarquee&&(0,pe.iv)("will-change:transform;animation:",qt,";animation-timing-function:linear;animation-delay:",e.animationDelay,"ms;animation-duration:",e.animationTime,"s;animation-iteration-count:1;","")}),";"),Qt=function(e){(0,T.Z)(n,e);var t=Ht(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,S.Z)(i),"onAnimationStart",(function(){i.animationWillSoonEndTimeout&&clearTimeout(i.animationWillSoonEndTimeout),i.setState({isAnimating:!0,animationWillSoonEnd:!1});i.animationWillSoonEndTimeout=setTimeout((function(){i.setState({animationWillSoonEnd:!0})}),1e3*i.state.animationTime-300)})),(0,u.Z)((0,S.Z)(i),"onAnimationEnd",(function(){i.setState({isAnimating:!1,animationWillSoonEnd:!1})})),i.setTitleRef=function(e){e&&(i.titleRef=e,i.setShouldMarquee(),i.installAnimationHandler())},i.setTitleSpanRef=function(e){e&&(i.titleSpanRef=e)},i.setWrapperRef=function(e){e&&(i.wrapperRef=e,i.setShouldMarquee())},i.state={animationTime:0,shouldMarquee:!1,isAnimating:!1,animationWillSoonEnd:!1},i.setShouldMarquee=i.setShouldMarquee.bind((0,S.Z)(i)),i.installAnimationHandler=i.installAnimationHandler.bind((0,S.Z)(i)),i.removeAnimationHandler=i.removeAnimationHandler.bind((0,S.Z)(i)),i.handleRestartMarquee=i.handleRestartMarquee.bind((0,S.Z)(i)),i.restartMarquee=i.restartMarquee.bind((0,S.Z)(i)),i}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){var e,t,n,i;e="resize",t="optimizedResize",n=window,i=!1,n.addEventListener(e,(function(){i||(i=!0,Kt()((function(){n.dispatchEvent(new CustomEvent(t)),i=!1})))})),window.addEventListener("optimizedResize",this.setShouldMarquee)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("optimizedResize",this.setShouldMarquee),this.removeAnimationHandler()}},{key:"handleRestartMarquee",value:function(){this.state.isAnimating||this.restartMarquee()}},{key:"restartMarquee",value:function(){var e=this;this.state.shouldMarquee&&(this.setState({shouldMarquee:!1,isAnimating:!1}),setTimeout((function(){e.setState({shouldMarquee:!0})}),0))}},{key:"removeAnimationHandler",value:function(){this.titleRef&&(this.titleRef.removeEventListener("animationstart",this.onAnimationStart),this.titleRef.removeEventListener("animationend",this.onAnimationEnd))}},{key:"installAnimationHandler",value:function(){this.titleRef&&(this.titleRef.addEventListener("animationstart",this.onAnimationStart),this.titleRef.addEventListener("animationend",this.onAnimationEnd))}},{key:"setShouldMarquee",value:function(){if(this.titleRef&&this.wrapperRef){var e=parseInt(getComputedStyle(this.titleRef).width,10),t=this.titleSpanRef.getBoundingClientRect().width;if(!isNaN(e)&&t){var n=t>=parseInt(getComputedStyle(this.wrapperRef).width,10)-16,i=this.props.speed,r=e/(void 0===i?100:i);this.setState({shouldMarquee:n,animationTime:r})}}}},{key:"render",value:function(){var e=this.state,t=e.shouldMarquee,n=e.animationTime,i=this.props,r=i.animationDelay,o=void 0===r?500:r,s=i.backgroundColor,a=i.children;return ze().createElement(Wt,{backgroundColor:s,ref:this.setWrapperRef,shouldMarquee:t,onMouseEnter:this.handleRestartMarquee,onTouchStart:this.handleRestartMarquee,isAnimating:this.state.isAnimating,animationWillSoonEnd:this.state.animationWillSoonEnd},ze().createElement(zt,{ref:this.setTitleRef,shouldMarquee:t,animationTime:n,animationDelay:o},ze().createElement("span",{ref:this.setTitleSpanRef},a),ze().createElement("span",{"aria-hidden":"true",style:{marginLeft:30,marginRight:30,visibility:this.state.isAnimating?"visible":"hidden"}},a)))}}]),n}(ze().Component),Xt=(0,We.Z)("button",{target:"e122c3p20"})("box-sizing:border-box;border-radius:0.5rem;padding:0 2rem;font-size:1.625rem;font-weight:bold;line-height:3rem;",(function(e){return e.isFollowing?"border: 1px solid rgb(255, 255, 255, 1);":"border: 1px solid rgb(255, 255, 255, 0.3);"}),";");function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var Jt={name:"14vdmgq",styles:"transform:translate(0, 6rem) scale(0.16);opacity:0;visibility:hidden"},en={name:"6107mz",styles:"transform:scale(0.16, 0.16) translate3d(0, 0, 0);box-shadow:0 1px 1px 0 rgba(0, 0, 0, 0.1),0 0 3px 0 rgba(0, 0, 0, 0.1);border-radius:16px;cursor:pointer;&:hover{opacity:0.8;}"},tn=(0,We.Z)("div",{target:"e1yscku7"})("position:absolute;width:",Be.largeH,"px;left:",Ue,"px;top:",Ue,"px;bottom:",Ue,"px;background-image:url(",(function(e){return e.imageSrc}),");background-size:cover;background-repeat:no-repeat;background-position:center center;border-radius:1rem;transform-origin:bottom left;transition:transform ",Ke,"ms,opacity ",Ke,"ms,visibility ",Ke,"ms,border-radius ",Ke,"ms;box-shadow:0 9px 9px 0 rgba(0, 0, 0, 0.1),0 0 29px 0 rgba(0, 0, 0, 0.1);opacity:1;will-change:transform,box-shadow,border-radius,opacity;transform:scale(1) translate3d(0, 0, 0);cursor:pointer;&:hover{opacity:0.8;}",(function(e){return e.isUpsell&&en})," ",Ne.small,"{width:",Be.mediumH,"px;height:",Be.mediumH,"px;}",De.medium,"{width:",Ze.largeH,"px;bottom:",Ue+Me,"px;",(function(e){return e.isUpsell&&Jt})," ",Ne.small,"{left:",8,"px;top:",8,"px;width:",Ze.mediumH,"px;height:",Ze.mediumH,"px;border-radius:0.5rem;}}",De.small,"{left:0;right:0;margin:0 auto;width:",Ye.largeH,"px;height:",Ye.largeH,"px;transform-origin:center bottom;transition-delay:",(function(e){return e.isUpsell?0:100}),"ms;",(function(e){return e.isUpsell&&(0,pe.iv)("transition-duration:",Ke/3,"ms;transform:translate(0, 4rem);opacity:0;visibility:hidden;","")})," ",Ne.small,"{width:",Ye.mediumH,"px;height:",Ye.mediumH,"px;border-radius:0.5rem;}}"),nn={name:"ib4mkg",styles:"transform:translateY(10px);opacity:0;visibility:hidden;transition-delay:70ms"},rn=(0,We.Z)("div",{target:"e1yscku6"})("position:absolute;left:",32+Be.largeH,"px;right:",Ue,"px;top:",36,"px;bottom:",Ue+Me,"px;display:flex;align-items:center;overflow:hidden;opacity:1;visibility:visible;transform:initial;transition:transform 50ms,opacity 50ms,visibility 50ms;transition-delay:140ms;top:",36,"px;",(function(e){return e.isUpsell&&nn})," ",Ne.small,"{left:",32+Be.mediumH,"px;}",De.medium,"{left:",32+Ze.largeH,"px;",Ne.small,"{left:",Ue+Ze.mediumH,"px;top:",40,"px;}}",De.small,"{display:none;}"),on=(0,We.Z)("div",{target:"e1yscku5"})("width:100%;display:block;",ve,";"),sn={name:"3ix1vd",styles:"opacity:1"},an=(0,We.Z)("div",{target:"e1yscku4"})("opacity:0;left:",64,"px;bottom:",21,"px;width:152px;position:absolute;font-size:1.625rem;transition:opacity ",Ke,"ms;",(function(e){return e.isUpsell&&sn})," ",De.medium,"{width:auto;left:",Ue,"px;bottom:",38,"px;right:",70,"px;}",De.small,"{display:block;opacity:1;left:",Ue,"px;bottom:",32,"px;",Ne.small,"{bottom:",24,"px;}}"),cn=(0,We.Z)("h1",{target:"e1yscku3"})("font-weight:bold;font-size:3rem;line-height:4rem;cursor:pointer;",De.medium,"{font-size:2rem;line-height:2.5rem;}",Ne.small,"{font-size:1.625rem;line-height:2rem;}"),ln=(0,We.Z)("h2",{target:"e1yscku2"})("margin-top:1rem;font-size:2rem;line-height:2.5rem;cursor:pointer;",ye,";",Ne.small,"{margin-top:0.5rem;font-size:1.625rem;line-height:2rem;}",De.medium,"{font-size:1.625rem;line-height:2rem;}"),un=(0,We.Z)("div",{target:"e1yscku1"})("margin-top:1.5rem;",Ne.small,"{display:none;}"),dn=(0,We.Z)("span",{target:"e1yscku0"})({name:"2ycp6t",styles:"padding:0 1rem"}),pn=function(e){(0,T.Z)(n,e);var t=$t(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,S.Z)(i),"handleCoverArtClick",(function(){var e,t=i.props.isUpsell?"now-playing-bar/cover-art":"cover-art";null!==(e=i.props.playback)&&void 0!==e&&e.isPlaying?i.props.isUpsell?(i.props.showPlayer(),i.props.onLogInteraction({type:"view",itemIdSuffix:"upsell",intent:"close upsell"})):(i.props.pause(),i.props.onLogInteraction({type:"click",itemIdSuffix:t,intent:"pause"})):(i.props.play(),i.props.onLogInteraction({type:"click",itemIdSuffix:t,intent:"play"}))})),(0,u.Z)((0,S.Z)(i),"handleFollowButtonClick",(function(){i.props.followClick(),i.props.onLogInteraction({type:"click",itemIdSuffix:"follow-button",intent:i.props.isFollowing?"unfollow":"follow"})})),(0,u.Z)((0,S.Z)(i),"handleClick",(function(e,t){return function(){t(),i.props.onLogInteraction({intent:"open-spotify",type:"click",itemIdSuffix:e})}})),(0,u.Z)((0,S.Z)(i),"handleKeyDown",(function(e,t){return function(n){var r=32===n.keyCode,o=13===n.keyCode;(r||o)&&(n.preventDefault(),i.handleClick(e,t)())}})),i.bottomMarqueeRef=ze().createRef(),i.subtitleMarqueeRef=ze().createRef(),i}return(0,l.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this.bottomMarqueeRef.current,n=this.subtitleMarqueeRef.current;e.isUpsell!==this.props.isUpsell&&(t&&t.setShouldMarquee(),n&&n.setShouldMarquee()),!1===e.isUpsell&&!0===this.props.isUpsell&&window.innerWidth>=Pe.medium&&(t&&t.setShouldMarquee(),n&&n.setShouldMarquee())}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,i=e.backgroundColor,r=e.isUpsell,o=e.imageSrc,s=e.isFollowing,a=e.rtl,c=void 0!==a&&a,l=e.episodeTitleClick,u=e.showTitleClick,d=s?E.get("following"):E.get("follow");return ze().createElement(ze().Fragment,null,ze().createElement(an,{isUpsell:r,"aria-hidden":!r,dir:"auto"},c?ze().createElement(Bt.Z,{lines:1,dir:"auto"},t,ze().createElement(dn,null,"â¢"),n):ze().createElement(Qt,{backgroundColor:i},t,ze().createElement(dn,null,"â¢"),n)),ze().createElement(tn,{isUpsell:r,imageSrc:o,"aria-label":E.get("spe.podcast_cover_art"),onClick:this.handleCoverArtClick}),ze().createElement(rn,{isUpsell:r,"aria-hidden":r},ze().createElement(on,null,ze().createElement(cn,{onClick:this.handleClick("title",l),onKeyDown:this.handleKeyDown("title",l),dir:"auto",tabIndex:0},ze().createElement(Bt.Z,{lines:2},t)),ze().createElement(ln,{onClick:this.handleClick("subtitle",u),onKeyDown:this.handleKeyDown("subtitle",u),dir:"auto",tabIndex:0},c?ze().createElement(Bt.Z,{lines:1},n):ze().createElement(Qt,{ref:this.subtitleMarqueeRef,backgroundColor:i},n)),ze().createElement(un,null,ze().createElement(Xt,{onClick:this.handleFollowButtonClick,isFollowing:s,tabIndex:0,"aria-label":d},d)))))}}]),n}(ze().PureComponent),hn=function(e){var t=e.uri,n={};switch(e.type){case"episode":n.title=e.name,n.subtitle=e.show.name,n.duration=e.duration_ms.toString(),n.externalResolvedUrl=e.external_playback_url,n.audioPreviewUrl=e.audio_preview_url;break;default:throw new Error("Unsupported entity type: ".concat(e.type))}return{uri:t,metadata:n,pages:[{items:[]}]}},fn={play:ht,pause:ft,showPlayer:function(){return{type:et}},episodeTitleClick:Rt,showTitleClick:function(){return{type:vt}},followClick:function(){return{type:gt}}},_n=(0,de.$j)((function(e){var t,n,i=hn(e.data.entity).metadata,r=null===(t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.desiredSize,i=void 0===n?Number.MAX_SAFE_INTEGER:n,r=t.desiredHeight,o=void 0===r?i:r,s=t.desiredWidth,a=void 0===s?i:s,c=t.desiredLabel,l=void 0===c?"":c;if(e&&!(e.length<=0)){var u=e.filter((function(e){return e.label===l})),d=(0,D.Z)(u,1)[0];if(d)return d;var p=e.map((function(e){var t=[(e.width||0)*(e.height||0),o*a];return{ratio:Math.max.apply(Math,t)/Math.min.apply(Math,t),image:e}})).sort((function(e,t){return e.ratio-t.ratio}));return(0,D.Z)(p,1)[0].image}}((null===(n=e.data.entity)||void 0===n?void 0:n.images)||[],{desiredSize:Be.largeH}))||void 0===t?void 0:t.url;return{title:(null==i?void 0:i.title)||"",subtitle:(null==i?void 0:i.subtitle)||"",imageSrc:r||"",backgroundColor:e.data.backgroundColor,isUpsell:$e(e),isFollowing:Je(e),rtl:e.settings.rtl,playback:e.playback}}),fn)(Ft(pn)),mn=23*Math.PI/180,gn=64,yn=gn/6;function En(e,t){return Math.round(e/t)*t}var vn=function(e,t){var n=e.x,i=e.y;return{x:n+74*Math.cos(mn+2*Math.PI*t),y:i+74*Math.sin(mn+2*Math.PI*t)}},Sn=function(e,t){var n=e.x,i=e.y,r=function(e,t){return{x:e+gn*Math.SQRT2*Math.cos(mn+Math.PI/4),y:t+gn*Math.SQRT2*Math.sin(mn+Math.PI/4)}}(n,i),o=function(e,t){return{x:e+gn*Math.cos(mn+Math.PI/2),y:t+gn*Math.sin(mn+Math.PI/2)}}(n,i);return o.x<=-64||o.x>=t-yn||r.y<=-yn||i>=168-yn},bn=function(e){return Boolean(e)?"rotate(".concat(23,"deg) translate3d(").concat(32,"px, 0, 0)"):"rotate(".concat(23,"deg)")},Tn=function(e,t){var n=100-Math.floor(100*Math.abs(31.2-e.y)/168);return(e.x>t-gn?0:100)+n},Rn=function e(t,n){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!t)return r;var a="".concat(En(o.x,gn),"/").concat(En(o.y,gn));if(a in i)return r;if(Sn(o,t))return r;i[a]=!0,r.push({src:"",key:r.length,score:Tn(o,t),style:{left:o.x,top:o.y,transform:bn(s)}});for(var c=0,l=[0,.25,.5,.75];c<l.length;c++){var u=l[c],d=vn(o,u),p=+(.25===u||.75===u),h=s^p;e(t,n)(i,r,d,h)}return r.sort((function(e,t){return+t.score-e.score})).forEach((function(e,t){return e.src=n[t%n.length]})),r.sort((function(e,t){return+t.style.left-+e.style.left})).forEach((function(e,t){return e.style.transitionDelay="".concat(16*t,"ms")})),r}};function In(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var An=(0,We.Z)("div",{target:"eoxhwid2"})("position:absolute;left:0;top:0;right:0;bottom:0;height:",168,"px;user-select:none;"),kn=(0,We.Z)("img",{target:"eoxhwid1"})("position:absolute;text-align:center;border-radius:1rem;transform-origin:top left;box-shadow:0 9px 9px 0 rgba(0, 0, 0, 0.3),0 0 29px 0 rgba(0, 0, 0, 0.3);width:",gn,"px;height:",gn,"px;"),Ln=(0,We.Z)("div",{target:"eoxhwid0"})("position:absolute;top:0;right:0;bottom:0;height:",168,"px;background-image:url('",me("images/embed-podcast/upsell-background.png"),"');background-size:",580,"px auto;background-position:center left;background-repeat:no-repeat;width:100%;max-width:",580,"px;"),On=(0,pe.iv)(".mosaic-box{opacity:0;transition:opacity 0ms;}.active .mosaic-box{transition:opacity ",800,"ms;opacity:1;}",""),Cn=function(e){(0,T.Z)(n,e);var t=In(n);function n(e){var i;(0,c.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,S.Z)(i),"RECALC_UI_PROPS_THROTTLING_MS",500),(0,u.Z)((0,S.Z)(i),"BOX_PALETTE",["#B49BC8","#C3F0C8","#A0C3D2","#FFCDD2","#FFC864"]),(0,u.Z)((0,S.Z)(i),"handleBoxImgError",(function(e){e.target.dataset.backgroundColor=e.target.dataset.backgroundColor||i.BOX_PALETTE[Math.random()*i.BOX_PALETTE.length|0],e.target.style.backgroundColor=e.target.dataset.backgroundColor})),(0,u.Z)((0,S.Z)(i),"recalcUiPropsThrottled",(function(){i.recalcUiPropsTicker&&clearTimeout(i.recalcUiPropsTicker),i.recalcUiPropsTicker=setTimeout(i.recalcUiProps,i.RECALC_UI_PROPS_THROTTLING_MS)})),(0,u.Z)((0,S.Z)(i),"recalcUiProps",(function(){if(i.state.useMosaic&&i.wrapperRef){var e,t,n=(e=parseInt(getComputedStyle(i.wrapperRef).width,10),t=100,Math.ceil(e/t)*t);i.setState({wrapperWidth:n})}})),i.wrapperRef=null,i.setWrapperRef=function(e){e&&(i.wrapperRef=e,i.recalcUiProps())},i.recalcUiPropsTicker=null;var r=e.images.length>0;return i.state={useMosaic:r,images:e.images},i}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.recalcUiPropsThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.recalcUiPropsThrottled)}},{key:"render",value:function(){var e=this,t=this.props.active;if(!this.props.initialized)return(0,pe.tZ)("div",null);if(!this.state.useMosaic)return(0,pe.tZ)(Ln,null);var n=Rn(this.state.wrapperWidth,this.state.images)();return(0,pe.tZ)(ze().Fragment,null,(0,pe.tZ)(pe.xB,{styles:On}),(0,pe.tZ)(An,{className:t?"active":"",ref:this.setWrapperRef},n.map((function(t){return(0,pe.tZ)(kn,{src:t.src,className:"mosaic-box",onError:e.handleBoxImgError,key:t.key,alt:" ",style:t.style})}))))}}]),n}(ze().Component);function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var wn=(0,We.Z)("div",{target:"e1x1s95v4"})("background-color:",(function(e){return e.backgroundColor}),";font-size:2rem;position:absolute;top:0;left:0;right:0;height:",Fe,"px;overflow:hidden;&:before{content:'';background:rgba(0, 0, 0, 0.6);left:0;right:0;top:0;bottom:0;position:absolute;z-index:0;}"),Dn=(0,We.Z)("div",{target:"e1x1s95v3"})("display:flex;flex-flow:column;justify-content:center;align-items:start;width:268px;padding:0 2rem;position:absolute;left:0;top:0;height:",Fe,"px;opacity:1;transform:translateY(-10px);box-sizing:border-box;transition:transform ",Ke,"ms ease-out,opacity ",Ke,"ms ease-out;",(function(e){return e.isUpsell&&(0,pe.iv)("transition-delay:",Ke/3,"ms;transform:initial;opacity:1;","")})," ",De.medium,"{width:224px;}"),Nn=(0,We.Z)("button",{target:"e1x1s95v2"})("display:inline-block;box-sizing:border-box;border:0;cursor:pointer;outline:none;text-align:center;background-color:",(function(e){return e.backgroundColor}),";padding:1rem 3.5rem;border-radius:2.5rem;color:#fff;font-size:1.5rem;font-weight:bold;text-transform:uppercase;letter-spacing:1.5px;margin-top:2rem;white-space:nowrap;"),Un=(0,We.Z)("div",{target:"e1x1s95v1"})("color:#ffffff;font-size:3rem;font-weight:bold;line-height:3.5rem;letter-spacing:-1.02px;",ve,";",De.medium,"{font-size:2.5rem;line-height:3rem;letter-spacing:-0.85px;}"),Mn={name:"jqlbh0",styles:"opacity:1;transform:scale(1)"},xn=(0,We.Z)("div",{target:"e1x1s95v0"})("position:absolute;top:0;right:0;bottom:0;height:",Fe,"px;left:298px;opacity:0;transform:scale(0.9);transform-origin:top right;transition:transform 800ms,opacity 800ms;",(function(e){return e.isUpsell&&Mn})," ",De.medium,"{left:248px;}",De.small,"{display:none;}"),Fn=function(e){(0,T.Z)(n,e);var t=Pn(n);function n(){var e;(0,c.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,u.Z)((0,S.Z)(e),"handleCTAClick",(function(){e.props.onClick(),e.props.onLogInteraction({type:"click",intent:"get-spotify"})})),e}return(0,l.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.initialized,n=e.backgroundColor,i=e.isUpsell,r=e.images,o=e.rtl,s=void 0!==o&&o;return(0,pe.tZ)(wn,{backgroundColor:n},(0,pe.tZ)(Dn,{isUpsell:i,"aria-hidden":!i},(0,pe.tZ)(Un,null,E.get("spe.listen_to_more_free_podcasts")),(0,pe.tZ)(Nn,{id:"cta-button",backgroundColor:n,onClick:this.handleCTAClick,"aria-label":E.get("spe.start_listening")},E.get("spe.start_listening"))),!s&&(0,pe.tZ)(xn,{isUpsell:i,"aria-hidden":"true"},(0,pe.tZ)(Cn,{initialized:t,images:r,active:i})))}}]),n}(qe.Component),Bn={onClick:function(){return{type:yt}}},Zn=(0,de.$j)((function(e){return{initialized:e.machineState.initialized,backgroundColor:e.data.backgroundColor,images:e.data.entity.topImages,rtl:e.settings.rtl}}),Bn)(Ft(Fn)),Yn=function(e){var t=e.className,n=e.ariaLabel,i=e.onClick;return(0,pe.tZ)("button",{"aria-label":n,className:t,onClick:i,dir:"ltr"},(0,pe.tZ)("svg",{width:"66px",height:"20px",viewBox:"0 0 66 20"},(0,pe.tZ)("path",{d:"M10.16 0C4.552 0 0 4.464 0 9.964c0 5.512 4.552 9.965 10.16 9.965 5.62 0 10.16-4.465 10.16-9.965C20.334 4.464 15.78 0 10.16 0zm4.662 14.381a.638.638 0 0 1-.874.202c-2.392-1.428-5.39-1.75-8.935-.964-.34.071-.68-.13-.752-.464a.616.616 0 0 1 .473-.738c3.872-.87 7.199-.5 9.87 1.107.315.178.412.56.218.857zm1.25-2.714a.812.812 0 0 1-1.093.262c-2.73-1.655-6.894-2.131-10.123-1.167-.425.119-.862-.107-.984-.512a.768.768 0 0 1 .534-.964c3.69-1.096 8.28-.572 11.423 1.321.352.214.474.69.243 1.06zm.11-2.834C12.903 6.93 7.501 6.75 4.37 7.68a.96.96 0 0 1-1.19-.62c-.157-.488.134-1.011.632-1.166 3.593-1.072 9.565-.857 13.328 1.333a.92.92 0 0 1 .328 1.274.934.934 0 0 1-1.287.333zM27.652 9.202c-1.76-.404-2.063-.702-2.063-1.31 0-.57.546-.952 1.36-.952.788 0 1.577.298 2.403.893.024.024.06.024.085.024.036 0 .06-.024.073-.047l.862-1.191a.111.111 0 0 0-.025-.155c-.983-.774-2.088-1.143-3.374-1.143-1.894 0-3.217 1.12-3.217 2.715 0 1.714 1.14 2.321 3.12 2.785 1.675.381 1.966.703 1.966 1.262 0 .631-.57 1.024-1.493 1.024-1.02 0-1.857-.333-2.792-1.13-.024-.025-.06-.025-.085-.025-.036 0-.06.012-.073.036l-.959 1.12c-.036.047-.036.118.012.154a5.806 5.806 0 0 0 3.873 1.452c2.039 0 3.362-1.095 3.362-2.785-.024-1.429-.886-2.215-3.035-2.727zM35.288 7.5c-.886 0-1.615.345-2.21 1.048v-.786a.108.108 0 0 0-.109-.107h-1.566c-.06 0-.109.047-.109.107v8.762c0 .06.049.107.11.107h1.565c.06 0 .11-.048.11-.107v-2.762c.594.655 1.323.976 2.209.976 1.639 0 3.314-1.238 3.314-3.619 0-2.369-1.675-3.619-3.314-3.619zm1.48 3.619c0 1.214-.764 2.048-1.844 2.048s-1.882-.881-1.882-2.048.813-2.048 1.882-2.048c1.068 0 1.845.858 1.845 2.048zM42.862 7.5c-2.112 0-3.775 1.607-3.775 3.643 0 2.024 1.651 3.607 3.751 3.607 2.124 0 3.787-1.595 3.787-3.631 0-2.024-1.65-3.619-3.763-3.619zm0 5.69c-1.128 0-1.978-.892-1.978-2.059 0-1.179.825-2.036 1.954-2.036 1.13 0 1.99.893 1.99 2.072 0 1.166-.825 2.023-1.966 2.023zM51.153 7.643H49.43V5.917a.108.108 0 0 0-.11-.107h-1.566c-.06 0-.109.047-.109.107v1.738h-.752c-.061 0-.11.047-.11.107v1.321c0 .06.049.107.11.107h.752v3.429c0 1.381.704 2.083 2.088 2.083.558 0 1.032-.119 1.469-.357.036-.024.06-.06.06-.095v-1.262c0-.036-.024-.071-.048-.095a.092.092 0 0 0-.11 0 1.943 1.943 0 0 1-.922.214c-.51 0-.728-.226-.728-.726V9.202h1.724c.06 0 .109-.047.109-.107V7.762c-.024-.06-.073-.12-.134-.12zM57.174 7.655V7.44c0-.63.243-.904.79-.904.327 0 .594.06.885.154.037.012.073 0 .11-.011.024-.024.048-.06.048-.096V5.286a.115.115 0 0 0-.085-.107A4.285 4.285 0 0 0 57.612 5c-1.457 0-2.222.798-2.222 2.321v.322h-.753c-.06 0-.121.047-.121.107v1.333c0 .06.048.107.121.107h.753v5.286c0 .06.048.107.109.107h1.566c.06 0 .11-.047.11-.107V9.202h1.468l2.246 5.286c-.255.56-.51.667-.85.667-.28 0-.57-.084-.862-.238-.024-.012-.06-.012-.097-.012-.024.012-.06.035-.073.06l-.534 1.142c-.024.06 0 .12.049.143a3.33 3.33 0 0 0 1.675.417c1.165 0 1.796-.536 2.367-1.953l2.731-6.904a.114.114 0 0 0-.012-.108.111.111 0 0 0-.097-.047h-1.639c-.048 0-.097.035-.11.071l-1.674 4.69-1.797-4.69c-.012-.047-.06-.071-.11-.071h-2.682zM53.69 7.643h-1.566c-.06 0-.109.047-.109.107v6.726c0 .06.049.107.11.107h1.565c.061 0 .11-.047.11-.107V7.762c0-.06-.049-.12-.11-.12zM52.901 4.583c-.619 0-1.129.5-1.129 1.107 0 .608.51 1.108 1.13 1.108.618 0 1.128-.5 1.128-1.108 0-.607-.497-1.107-1.129-1.107z",fill:"currentColor",fillRule:"evenodd"})))},Kn=function(){return(0,pe.tZ)("svg",{id:"3e27f204-f440-4acb-9e8a-17de2e179ae4","data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,pe.tZ)("title",null,"Icon Link"),(0,pe.tZ)("path",{d:"M13.31,10.87a3.8,3.8,0,0,1,0,5.36L9.75,19.8a3.94,3.94,0,0,1-5.55,0h0a3.94,3.94,0,0,1,0-5.55L7,11.41",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,pe.tZ)("path",{d:"M10.69,13.13a3.8,3.8,0,0,1,0-5.36L14.25,4.2a3.94,3.94,0,0,1,5.55,0h0a3.94,3.94,0,0,1,0,5.55L17,12.58",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}))},Hn=function(){return(0,pe.tZ)("svg",{id:"aca6f55b-5455-4fa2-96d5-18fbbdcb22d0","data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,pe.tZ)("title",null,"Icon Add Follow"),(0,pe.tZ)("line",{x1:"21",y1:"18.5",x2:"14",y2:"18.5",fill:"none",stroke:"currentColor",strokeMiterlimit:"10"}),(0,pe.tZ)("line",{x1:"17.5",y1:"22",x2:"17.5",y2:"15",fill:"none",stroke:"currentColor",strokeMiterlimit:"10"}),(0,pe.tZ)("path",{d:"M15.52,15.29l-.69-.39a1,1,0,0,1-.32-1.63l.53-.56.13-.13A5.72,5.72,0,0,0,17,8.51,5.27,5.27,0,0,0,12,3,5.27,5.27,0,0,0,7,8.51a5.72,5.72,0,0,0,1.83,4.06l.13.13.53.56a1,1,0,0,1-.32,1.63L6,16.7a5,5,0,0,0-1.87,1.84,5.53,5.53,0,0,0-.65,2.94V22",fill:"none",stroke:"currentColor",strokeMiterlimit:"10"}))},jn=function(){return(0,pe.tZ)("svg",{id:"6c5870dd-b3c9-481d-8176-d409bd2d68e4","data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,pe.tZ)("title",null,"Close X"),(0,pe.tZ)("path",{d:"M4.93,4.93,19.07,19.07m-14.14,0L19.07,4.93",fill:"none",stroke:"currentColor",strokeMiterlimit:"10"}))},Vn=function(){return(0,pe.tZ)("svg",{id:"edb699df-f28f-42ef-b3f4-7e31d591824f","data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,pe.tZ)("title",null,"Spotify Logo"),(0,pe.tZ)("path",{fill:"currentColor",fillRule:"evenodd",d:"M18.51,10.85a.87.87,0,0,1-.39-.09A17,17,0,0,0,6.24,9.56a.87.87,0,0,1-.45-1.68A18.69,18.69,0,0,1,18.9,9.2a.87.87,0,0,1-.39,1.65Zm-.43,2.53a.87.87,0,0,1-1.17.37,13.71,13.71,0,0,0-10.09-1,.87.87,0,0,1-.48-1.67,15.45,15.45,0,0,1,11.37,1.14A.87.87,0,0,1,18.08,13.38Zm-1.2,3a.87.87,0,0,1-1.18.33,10.47,10.47,0,0,0-8.28-.84.87.87,0,0,1-.53-1.66,12.22,12.22,0,0,1,9.66,1A.87.87,0,0,1,16.88,16.42ZM12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Z"}))};function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var Wn=200,qn=200,zn=(0,We.Z)("div",{target:"e18ys0h910"})("position:absolute;height:100%;width:100%;left:0;top:0;background-color:","rgb(12, 12, 12)",";opacity:0;visibility:hidden;transform:translateY(100%);transition:opacity ",Wn,"ms ",qn,"ms ease-out,visibility ",Wn,"ms ",qn,"ms,transform 0s ",400,"ms;",(function(e){return e.visible&&(0,pe.iv)("transition:opacity ",Wn,"ms 0s ease-out,visibility 0s 0s,transform 0s 0s;opacity:1;visibility:visible;transform:translateY(0%);","")}),";"),Qn=(0,We.Z)("div",{target:"e18ys0h99"})({name:"97pf1g",styles:"height:3rem;width:3rem;color:white;right:2rem;top:2rem;position:absolute;cursor:pointer"}),Xn=(0,We.Z)("div",{target:"e18ys0h98"})("position:relative;height:100%;box-sizing:border-box;padding:2rem;opacity:0;transition:opacity ",qn,"ms ease-out;",(function(e){return e.visible&&(0,pe.iv)("transition-delay:",Wn,"ms;opacity:1;","")}),";",De.small,"{font-size:1.625rem;}"),$n=(0,We.Z)("ul",{target:"e18ys0h97"})("transform:translateY(10px);transition:transform ",qn,"ms ease-out;margin:0 0 0 0;margin-right:4rem;padding:0;text-indent:0;list-style-type:none;",(function(e){return e.visible&&(0,pe.iv)("transform:translateY(0px);transition-delay:",Wn,"ms;","")}),";"),Jn=(0,We.Z)("li",{target:"e18ys0h96"})("display:flex;margin-bottom:2rem;flex-direction:row;line-height:3rem;",De.small,"{margin-bottom:1.5rem;}",Ne.small,"{margin-bottom:1rem;}"),ei={name:"mbdvns",styles:"position:absolute;bottom:2rem;right:2rem;opacity:0.6"},ti=(0,We.Z)("a",{target:"e18ys0h95"})({name:"rriwma",styles:"cursor:pointer;&:hover{text-decoration:underline;}"}),ni=(0,_e.ZP)(ti).withConfig({displayName:"OverflowMenu___StyledLink",componentId:"sc-4gpfcm-0"})(["",""],ei),ii=(0,We.Z)("div",{target:"e18ys0h94"})({name:"v9qo1w",styles:"overflow-x:hidden;white-space:nowrap;text-overflow:ellipsis;flex:1"}),ri=(0,We.Z)("div",{target:"e18ys0h93"})({name:"10o29jg",styles:"position:relative;overflow-x:hidden;flex:1"}),oi=(0,We.Z)("button",{target:"e18ys0h92"})({name:"lftype",styles:"padding-right:1rem;>svg{height:3rem;width:3rem;vertical-align:top;}"}),si=(0,We.Z)("div",{target:"e18ys0h91"})("opacity:1;visibility:visible;transition:transform ",qn,"ms ease-out,opacity ",qn,"ms ease-out,visibility ",qn,"ms ease-out;transition-delay:",qn,"ms;",(function(e){return!e.show&&"\n    opacity: 0;\n    visibility: hidden;\n    transform: translateY(-10px);\n    transition-delay: 0ms;\n  "}),";"),ai=(0,We.Z)("div",{target:"e18ys0h90"})("position:absolute;top:0;opacity:0;max-width:100%;visibility:hidden;transition:opacity ",qn,"ms ease-out,visibility ",Wn,"ms;transition-delay:0ms;",(function(e){return e.show&&"\n    opacity: 1;\n    visibility: visible;\n    transition-delay: ".concat(qn,"ms;\n  ")}),";"),ci=function(e){(0,T.Z)(n,e);var t=Gn(n);function n(){var e;(0,c.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,u.Z)((0,S.Z)(e),"state",{clickedCopyLink:!1}),(0,u.Z)((0,S.Z)(e),"handleClose",(function(){e.props.onClose(),e.props.onLogInteraction({type:"click",intent:"close-overflow-menu"})})),(0,u.Z)((0,S.Z)(e),"handlePlayOnSpotifyClick",(function(){e.props.onPlayOnSpotify(),e.props.onLogInteraction({type:"click",intent:"open-spotify"})})),(0,u.Z)((0,S.Z)(e),"handleFollowSpotifyClick",(function(){e.props.onFollowOnSpotify(),e.props.onLogInteraction({type:"click",intent:"follow"})})),(0,u.Z)((0,S.Z)(e),"handleCopyLinkClick",(function(){if(!e.state.clickedCopyLink){var t=e.props.entityUrl;e.props.onCopyLink(t),e.props.onLogInteraction({type:"click",intent:"clipboard-copy"}),e.setState({clickedCopyLink:!0}),setTimeout((function(){return e.setState({clickedCopyLink:!1})}),2e3)}})),(0,u.Z)((0,S.Z)(e),"handleCookieNoticeClick",(function(){e.props.onCookieNoticeClick(),e.props.onLogInteraction({type:"click",intent:"cookiepolicy-show"})})),e}return(0,l.Z)(n,[{key:"render",value:function(){var e=this.props.visible,t=this.state.clickedCopyLink;return(0,pe.tZ)(zn,{visible:e},(0,pe.tZ)(Xn,{visible:e},(0,pe.tZ)($n,{visible:e},(0,pe.tZ)(Jn,null,(0,pe.tZ)(oi,{onClick:this.handlePlayOnSpotifyClick,"aria-hidden":"true"},(0,pe.tZ)(Vn,null)),(0,pe.tZ)(ii,null,(0,pe.tZ)(ti,{onClick:this.handlePlayOnSpotifyClick,dir:"auto"},E.get("play_on_spotify")))),(0,pe.tZ)(Jn,null,(0,pe.tZ)(oi,{onClick:this.handleFollowSpotifyClick,"aria-hidden":"true"},(0,pe.tZ)(Hn,null)),(0,pe.tZ)(ii,null,(0,pe.tZ)(ti,{onClick:this.handleFollowSpotifyClick,dir:"auto"},E.get("follow_on_spotify")))),(0,pe.tZ)(Jn,null,(0,pe.tZ)(oi,{onClick:this.handleCopyLinkClick,"aria-hidden":"true"},(0,pe.tZ)(Kn,null)),(0,pe.tZ)(ri,null,(0,pe.tZ)(si,{show:!t},(0,pe.tZ)(ii,null,(0,pe.tZ)(ti,{onClick:this.handleCopyLinkClick,dir:"auto"},E.get("spe.copy_link")))),(0,pe.tZ)(ai,{show:t},(0,pe.tZ)(ii,null,E.get("embed_success_share_link")))))),(0,pe.tZ)(Qn,{onClick:this.handleClose},(0,pe.tZ)(jn,null)),(0,pe.tZ)(ni,{onClick:this.handleCookieNoticeClick,dir:"auto"},E.get("spe.cookie_policy"))))}}]),n}(ze().PureComponent),li="CLOSE_OVERFLOW_MENU",ui="SHOW_OVERFLOW_MENU",di="PLAY_ON_SPOTIFY_CLICK",pi="FOLLOW_ON_SPOTIFY_CLICK",hi="COPY_LINK_CLICK",fi="COOKIE_NOTICE_CLICK";var _i,mi=function(e){var t;return null===(t=e.data.entity.external_urls)||void 0===t?void 0:t.spotify},gi=function(e){return e.data.entity.uri},yi=function(e){return"episode"===e.data.entity.type?e.data.entity.show.uri:void 0},Ei=function(e){var t;return"episode"===e.data.entity.type?null===(t=e.data.entity.show.external_urls)||void 0===t?void 0:t.spotify:void 0},vi=function(e){return"episode"===e.settings.entityContext?mi(e):Ei(e)},Si={onPlayOnSpotify:function(){return{type:di}},onFollowOnSpotify:function(){return{type:pi}},onCopyLink:function(e){return{type:hi,url:e}},onCookieNoticeClick:function(){return{type:fi}}},bi=(0,de.$j)((function(e){return{entityUrl:vi(e),initialized:e.machineState.initialized,backgroundColor:e.data.backgroundColor,rtl:e.settings.rtl}}),Si)(Ft(ci)),Ti=(n(8269),(0,pe.F4)(_i||(_i=(0,Zt.Z)(["\n    0% {\n        -webkit-transform: rotate(-45deg);\n        -ms-transform: rotate(-45deg);\n        transform: rotate(-45deg);\n    }\n    100% {\n        -webkit-transform: rotate(315deg);\n        -ms-transform: rotate(315deg);\n        transform: rotate(315deg);\n    }\n"])))),Ri=(0,We.Z)("div",{target:"e1xa93xf0"})("border-radius:100%;width:100%;height:100%;background:rgba(255, 255, 255, 0.3);&:before{content:'';position:absolute;top:4px;left:4px;right:4px;bottom:4px;border-radius:100%;background:rgba(255, 255, 255, 1);}&:after{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border:4px solid transparent;border-top-color:#fff;border-radius:100%;animation:",Ti," 650ms ease infinite;}");function Ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var Ai=(0,We.Z)("button",{target:"e1hqclm40"})("width:100%;height:100%;box-shadow:0 2px 4px 0 rgba(0, 0, 0, 0.25);border-radius:50%;transition:transform 400ms;opacity:",(function(e){return e.disabled?.3:1}),";cursor:",(function(e){return e.disabled?"not-allowed":"pointer"}),";&:hover{transform:scale(1.1);}"),ki=function(e){var t=e.title;return(0,pe.tZ)("svg",{viewBox:"0 0 40 40",version:"1.1"},(0,pe.tZ)("title",{id:"title"},t),(0,pe.tZ)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},(0,pe.tZ)("g",{id:"Artboard",fill:"#FFFFFF"},(0,pe.tZ)("path",{d:"M20,40 C8.954305,40 0,31.045695 0,20 C0,8.954305 8.954305,0 20,0 C31.045695,0 40,8.954305 40,20 C40,31.045695 31.045695,40 20,40 Z M16.7581405,25.9338517 L25.7471601,20.9226438 C26.08428,20.7347479 26.08428,20.2652521 25.7471601,20.0773562 L16.7581405,15.0661483 C16.4210207,14.8782524 16,15.1130003 16,15.4887921 L16,25.5112079 C16,25.8869997 16.4210207,26.1217476 16.7581405,25.9338517 Z",id:"Play.svg"}))))},Li=function(e){var t=e.title;return(0,pe.tZ)("svg",{viewBox:"0 0 40 40",version:"1.1"},(0,pe.tZ)("title",{id:"title"},t),(0,pe.tZ)("g",{id:"Artboard",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},(0,pe.tZ)("path",{d:"M20,40 C9.04267032,40 0.159999552,31.045695 0.159999552,20 C0.159999552,8.954305 9.04267032,0 20,0 C30.9573297,0 39.8400004,8.954305 39.8400004,20 C39.8400004,31.045695 30.9573297,40 20,40 Z M15,14 L15,26 L18,26 L18,14 L15,14 Z M22,14 L22,26 L25,26 L25,14 L22,14 Z",id:"Pause",fill:"#FFFFFF"})))},Oi=function(e){(0,T.Z)(n,e);var t=Ii(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).state={showLoading:!1},i}return(0,l.Z)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;!0===this.props.isLoading&&!1===e.isLoading?this.tickToShowLoading=setTimeout((function(){n.tickToShowLoading=null,!0===n.props.isLoading&&n.setState({showLoading:!0})}),this.props.maxTimeToNotShowLoading||200):!1===this.props.isLoading&&!0===e.isLoading&&(clearTimeout(this.tickToShowLoading),!0===this.state.showLoading&&(this.tickToHideLoading||setTimeout((function(){n.setState({showLoading:!1})}),0))),!0===this.state.showLoading&&!1===t.showLoading&&(this.tickToHideLoading=setTimeout((function(){n.tickToHideLoading=null,!1===n.props.isLoading&&n.setState({showLoading:!1})}),300))}},{key:"render",value:function(){var e=null,t=this.props,n=t.isPlaying,i=t.isDisabled,r=this.state.showLoading,o=E.get("spe.play");return i?o=E.get("spe.error_heading"):n&&(o=E.get("spe.pause")),e=r?(0,pe.tZ)(Ri,null):n?(0,pe.tZ)(Li,{title:o}):(0,pe.tZ)(ki,{title:o}),(0,pe.tZ)(Ai,{id:n?"pause-button":"play-button","aria-label":o,disabled:i,"tab-index":0},e)}}]),n}(qe.Component);var Ci={name:"w1atjl",styles:"width:100%;height:100%"},Pi=function(){return(0,pe.tZ)(wi,{"aria-label":E.get("spe.playback-control.skip-forward-15")},(0,pe.tZ)("svg",{width:"21",height:"18"},(0,pe.tZ)("title",null,E.get("spe.playback-control.skip-forward-15")),(0,pe.tZ)("g",{fill:"none",fillRule:"evenodd"},(0,pe.tZ)("path",{d:"M7.897 3.264h6.91v2.26l4.7-2.761L14.808 0v2.26h-6.91C3.543 2.26 0 5.752 0 10.043s3.543 7.783 7.897 7.783v-1.004c-3.81 0-6.91-3.041-6.91-6.779s3.1-6.779 6.91-6.779zm2.757 6.438c-.376.29-.855.445-1.437.462v.901h2.015v6.763h1.232V8.572H11.36c-.094.462-.33.838-.706 1.13zm10.125 3.903a2.788 2.788 0 0 0-.61-.966 2.65 2.65 0 0 0-.95-.614 3.412 3.412 0 0 0-1.237-.214c-.171 0-.347.015-.527.045a2.837 2.837 0 0 0-1.013.384 1.693 1.693 0 0 0-.398.34l.59-2.833h3.94V8.572h-4.8l-.988 4.739 1.142.43a2.19 2.19 0 0 1 .764-.632c.312-.162.66-.242 1.046-.242.29 0 .558.046.801.138a1.812 1.812 0 0 1 1.06 1.031c.102.248.153.533.153.856 0 .287-.049.552-.147.796a1.902 1.902 0 0 1-.41.633 1.782 1.782 0 0 1-.635.412 2.27 2.27 0 0 1-.821.143c-.3 0-.57-.05-.809-.15-.24-.1-.449-.234-.628-.404a1.928 1.928 0 0 1-.43-.607 2.337 2.337 0 0 1-.2-.744l-1.141.287a2.92 2.92 0 0 0 .969 1.927c.278.248.607.445.988.593.381.148.798.222 1.252.222a3.56 3.56 0 0 0 1.36-.248c.402-.166.744-.39 1.026-.673.283-.282.499-.613.649-.992A3.27 3.27 0 0 0 21 14.879a3.601 3.601 0 0 0-.221-1.274z",fill:"currentColor",fillRule:"evenodd"}),(0,pe.tZ)("path",{d:"M0 0h21v18H0z"}))))},wi=(0,_e.ZP)("button").withConfig({displayName:"FastForward15___StyledButton",componentId:"sc-1ry69x-0"})(["",""],Ci);var Di={name:"w1atjl",styles:"width:100%;height:100%"},Ni=function(){return(0,pe.tZ)(Ui,{"aria-label":E.get("spe.playback-control.skip-backward-15")},(0,pe.tZ)("svg",{width:"23",height:"18"},(0,pe.tZ)("title",null,E.get("spe.playback-control.skip-backward-15")),(0,pe.tZ)("g",{fill:"none",fillRule:"evenodd"},(0,pe.tZ)("path",{d:"M1.463 9.542c-.383.295-.871.45-1.463.468v.91h2.051v6.829h1.255V8.402H2.182a1.867 1.867 0 0 1-.719 1.14zm9.69 2.967a2.71 2.71 0 0 0-.967-.62 3.5 3.5 0 0 0-1.796-.171 2.81 2.81 0 0 0-1.033.39c-.156.095-.291.21-.405.342l.601-2.86h4.012V8.402H6.677l-1.006 4.785 1.163.435a2.296 2.296 0 0 1 1.841-.883c.297 0 .569.046.816.138.249.092.464.227.648.401.183.177.326.39.43.64.105.25.158.539.158.864 0 .29-.05.558-.15.804-.1.247-.24.46-.418.64-.18.18-.394.318-.647.415a2.333 2.333 0 0 1-.836.144c-.304 0-.579-.05-.823-.151a2.089 2.089 0 0 1-.64-.409 1.94 1.94 0 0 1-.438-.612 2.327 2.327 0 0 1-.203-.752l-1.162.29a2.93 2.93 0 0 0 .987 1.944c.283.25.619.45 1.006.6.388.15.812.225 1.274.225.514 0 .976-.084 1.385-.25.41-.167.758-.394 1.046-.679.287-.286.507-.62.66-1.002.152-.382.229-.789.229-1.22 0-.474-.074-.903-.222-1.286a2.824 2.824 0 0 0-.622-.975zm3.806-10.227H7.923V0L3.136 2.789l4.787 2.79V3.295h7.036c3.88 0 7.036 3.07 7.036 6.845 0 3.774-3.156 6.845-7.036 6.845V18C19.393 18 23 14.474 23 10.14c0-4.332-3.607-7.858-8.04-7.858z",fill:"currentColor",fillRule:"evenodd"}),(0,pe.tZ)("path",{d:"M0 0h23v18H0z"}))))},Ui=(0,_e.ZP)("button").withConfig({displayName:"Rewind15___StyledButton",componentId:"sc-uqv1rz-0"})(["",""],Di),Mi=n(84493),xi=(n(25613),6e4),Fi=36e5,Bi=function(e){return e<10?"0".concat(e):"".concat(e)},Zi=function(e){var t=e<0,n=Math.abs(e),i=Math.floor(n/Fi),r=Math.floor(n%Fi/xi),o=Math.floor(n%xi/1e3),s=t?"-":"",a=[i?"".concat(i):"",Bi(r),Bi(o)].filter((function(e){return e})).join(":");return"".concat(s).concat(a)};function Yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var Ki=(0,We.Z)("div",{target:"emd42s55"})("position:relative;height:100%;display:flex;justify-content:center;align-items:center;",ve,";"),Hi=(0,We.Z)("div",{target:"emd42s54"})("position:relative;height:4px;",ve,";"),ji=(0,We.Z)("div",{target:"emd42s53"})("position:absolute;left:0;background-color:",Mi.mNW,";border-radius:0.25rem;height:",4,"px;width:100%;overflow:hidden;"),Vi=(0,We.Z)("div",{target:"emd42s52"})("position:absolute;left:0;background-color:",Mi.ixZ,";border-radius:0.25rem;height:",4,"px;width:100%;transform:translateX(-100%);will-change:transform;"),Gi=(0,We.Z)("div",{target:"emd42s51"})("position:absolute;left:0;background-color:",Mi.mNW,";border-radius:0.25rem;height:",4,"px;width:100%;transform:translateX(-100%);will-change:transform;"),Wi=(0,We.Z)("div",{target:"emd42s50"})("position:absolute;background-color:white;border-radius:50%;width:8px;height:8px;z-index:100;left:0;margin:0 -4px;box-shadow:0 2px 2px rgba(0, 0, 0, 0.4);transition:opacity 200ms,transform 200ms;transform:",(function(e){return e.visible?"initial":"scale(0)"}),";will-change:left;"),qi=function(e){(0,T.Z)(n,e);var t=Yi(n);function n(e){var i,r;return(0,c.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,S.Z)(i),"handleMove",(function(e){if(i.props.enabled&&(/^mouse(down|move)$/i.test(e.type)&&0===e.button||"touchmove"===e.type)){e.stopPropagation(),i.dragStartX=e.pageX,i.dragStartY=e.pageY;var t=i._extractRelativePos(e.pageX);i.props.onDragging({percentage:t,id:i.state.id,ended:!1})}})),(0,u.Z)((0,S.Z)(i),"handleMouseMove",(function(e){i.props.enabled&&(e.stopPropagation(),i.throttledMouseMove({pageX:e.pageX}))})),(0,u.Z)((0,S.Z)(i),"handleStart",(function(){i.props.enabled&&i.setState({isHovering:!0,id:Date.now()})})),(0,u.Z)((0,S.Z)(i),"handleLeave",(function(){i.props.enabled&&i.setState({isHovering:!1,id:i.state.id})})),(0,u.Z)((0,S.Z)(i),"handleEnd",(function(e){if(i.props.enabled){e.stopPropagation();var t=i._extractRelativePos(e.pageX);i.props.onDragging({percentage:t,id:i.state.id,ended:!0})}})),i.container=ze().createRef(),i.state={isHovering:!1},i.throttledMouseMove=(r=function(e){var t=e.pageX,n=i._extractRelativePos(t);i.setState({hoverPercentage:n})},function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!1;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];t=s,i||(n||r.apply(r,s),i=!0,window.setTimeout((function(){i=!1,n&&r.apply(r,t)}),e))}})(50),i}return(0,l.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.isDragging&&!e.isDragging?(["mousemove","touchmove"].forEach((function(e){return document.addEventListener(e,t.handleMove)})),["mouseup","touchend"].forEach((function(e){return document.addEventListener(e,t.handleEnd)}))):!this.props.isDragging&&e.isDragging&&(["mousemove","touchmove"].forEach((function(e){return document.removeEventListener(e,t.handleMove)})),["mouseup","touchend"].forEach((function(e){return document.removeEventListener(e,t.handleEnd)})))}},{key:"componentWillUnmount",value:function(){var e=this;["mousemove","touchmove"].forEach((function(t){return document.removeEventListener(t,e.handleMove)})),["mouseup","touchend"].forEach((function(t){return document.removeEventListener(t,e.handleEnd)}))}},{key:"_extractRelativePos",value:function(e){var t=this.container.current.getBoundingClientRect(),n=t.right-t.left;return Math.max(0,Math.min((e-t.left)/n,1))}},{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.max,i=e.current,r=e.isDragging,o=e.noSpacing,s=e.tooltip,a=this.state,c=a.isHovering,l=a.hoverPercentage,u=Math.max(0,Math.min(1,i/(n||1))),d={transform:"translateX(-".concat(100-100*(c?l:0),"%)")},p={left:"".concat(100*(c?l:0),"%")},h=c?n*l:0,f={transform:"translateX(-".concat(100-100*u,"%)")},_=t&&(c||r),m={left:"".concat(100*u,"%")},g=o?Hi:Ki;return ze().createElement(g,{ref:this.container,onMouseDown:this.handleMove,onMouseEnter:this.handleStart,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleLeave,onTouchStart:this.handleStart,onTouchMove:this.handleMove,onTouchEnd:this.handleLeave},c&&s&&ze().createElement(s,{style:p},Zi(h)),ze().createElement(ji,null,ze().createElement(Gi,{style:d}),ze().createElement(Vi,{id:"progress-bar-line",style:f})),ze().createElement(Wi,{id:"progress-bar-slider",visible:_,style:m}))}}]),n}(ze().Component),zi=function(e){var t=e.style;return(0,pe.tZ)("svg",{id:"d9d36573-8003-4c15-a7dc-89c12dde53c7",style:t,"data-name":"Icons",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,pe.tZ)("title",null,"Icon More"),(0,pe.tZ)("path",{d:"M12,11.25a.75.75,0,1,0,.75.76A.74.74,0,0,0,12,11.25Z",fill:"currentColor",stroke:"currentColor",strokeMiterlimit:"10"}),(0,pe.tZ)("path",{d:"M5.25,11.25A.75.75,0,1,0,6,12,.74.74,0,0,0,5.25,11.25Z",fill:"currentColor",stroke:"currentColor",strokeMiterlimit:"10"}),(0,pe.tZ)("path",{d:"M18.75,11.25a.75.75,0,1,0,.75.76A.74.74,0,0,0,18.75,11.25Z",fill:"currentColor",stroke:"currentColor",strokeMiterlimit:"10"}))};function Qi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var Xi=.78,$i=(0,We.Z)("div",{target:"enwhali9"})({name:"1blnrmq",styles:"display:flex;flex-direction:row;align-items:baseline"}),Ji=(0,We.Z)("div",{target:"enwhali8"})({name:"d0dim7",styles:"display:flex;flex-direction:row;flex:1;align-items:baseline"}),er=(0,We.Z)("div",{target:"enwhali7"})("flex:1;margin:4px 1rem;height:24px;align-self:flex-end;",De.small,"{margin:0;position:relative;top:10px;}"),tr={name:"19fdlqb",styles:"transform:translateY(0) scale(1)!important"},nr={name:"19fdlqb",styles:"transform:translateY(0) scale(1)!important"},ir=(0,We.Z)("div",{target:"enwhali6"})("width:",Me,"px;height:",Me,"px;transition:transform ",Ke,"ms;",(function(e){return(0,pe.iv)("transform:translateY(",e.isUpsell?10:6,"px) scale(",e.isUpsell?Xi:1,");","")})," ",De.medium,"{",(function(e){return e.isUpsell?nr:tr})," ",Ne.small,"{width:",xe,"px;height:",xe,"px;}}",De.small,"{",(function(e){return e.isUpsell,(0,pe.iv)("transform:translateY(4px) scale(",Xi,")!important;","")}),";}"),rr=(0,We.Z)("div",{target:"enwhali5"})({name:"ywt7tp",styles:"position:relative;margin:0 1rem 0 2rem;font-size:13px;cursor:pointer"}),or=(0,We.Z)("div",{target:"enwhali4"})({name:"6dhm9o",styles:"visibility:hidden"}),sr=(0,We.Z)("div",{target:"enwhali3"})({name:"1aqt5k9",styles:"position:absolute;top:0;right:0;left:0"}),ar=(0,We.Z)("div",{target:"enwhali2"})(De.small,"{display:none;}opacity:",(function(e){return e.disabled?.5:1}),";"),cr=(0,We.Z)("button",{target:"enwhali1"})({name:"o7nnmj",styles:"margin-right:16px"}),lr=(0,We.Z)("div",{target:"enwhali0"})({name:"1yatvrj",styles:"position:absolute;top:-30px;left:0;transform:translate(-50%, 0%);will-change:left;border-radius:8px;box-shadow:0 4px 12px 0 rgba(0 0 0 / 20%);background-color:#242424;padding:8px 12px;font-size:11px"}),ur=function(e){(0,T.Z)(n,e);var t=Qi(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),(0,u.Z)((0,S.Z)(i),"handleTogglePlay",(function(){var e,t;null!==(e=i.props.playback)&&void 0!==e&&e.isDisabled||(i.props.togglePlay(),i.props.onLogInteraction({type:"click",itemIdSufix:"playpause-button",intent:null!==(t=i.props.playback)&&void 0!==t&&t.isPlaying?"pause":"play"}))})),(0,u.Z)((0,S.Z)(i),"handleOverflowMenu",(function(){i.props.showOverflowMenu(),i.props.onLogInteraction({type:"click",intent:"open-overflow-menu"})})),(0,u.Z)((0,S.Z)(i),"handleDragging",function(){var e=(0,k.Z)(O().mark((function e(t){var n,r,o;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.percentage,r=t.ended,o=t.id,i.setState({isDragging:!0,fakePosition:n}),r&&(i.props.seekByPercentage(n),i.setState({isDragging:!1,fakePosition:n}),i.fakePositionTimeout&&clearTimeout(i.fakePositionTimeout),i.fakePositionTimeout=setTimeout((function(){i.setState({fakePosition:null})}),1e3)),r?i.props.onLogInteraction({type:"click",intent:"seek"}):i.draggingInteractionEvents[o]||(i.draggingInteractionEvents[o]=!0,i.props.onLogInteraction({type:"drag",intent:"seek"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,S.Z)(i),"handleProgressTimerClick",(function(){i.setState({showRemainingTime:!i.state.showRemainingTime}),i.props.onLogInteraction({type:"click",intent:"change-time-format"})})),(0,u.Z)((0,S.Z)(i),"handleSeekBackClick",(function(){var e,t;null!==(e=i.props.playback)&&void 0!==e&&null!==(t=e.restrictions)&&void 0!==t&&t.canSeek&&(i.props.seekBack(),i.props.onLogInteraction({type:"click",intent:"skip-back-15"}))})),(0,u.Z)((0,S.Z)(i),"handleSeekForwardClick",(function(){var e,t;null!==(e=i.props.playback)&&void 0!==e&&null!==(t=e.restrictions)&&void 0!==t&&t.canSeek&&(i.props.seekForward(),i.props.onLogInteraction({type:"click",intent:"skip-forward-15"}))})),i.state={isDragging:!1,fakePosition:null,showRemainingTime:!0,currentTrackURI:null},i.draggingInteractionEvents={},i.fakePositionTimeout=null,i}return(0,l.Z)(n,[{key:"render",value:function(){var e,t,n,i,r,o,s,a=this.state,c=a.showRemainingTime,l=a.isDragging,u=a.fakePosition,d=this.props,p=d.isUpsell,h=d.isPreview,f=d.duration,_=h?3e4:f,m=null!==(e=this.props.playback)&&void 0!==e?e:{},g=Number.isFinite(u)?u*_:m.positionAsOfTimestamp;m.isPlaying||m.isPaused?c?(s=E.get("spe.episode.time_remaining",{minutes_remaining:Math.ceil((_-g)/6e4)}),o=Zi(g-_)):(s=E.get("spe.episode.played"),o=Zi(g)):(o=Zi(_),s=E.get("spe.episode.time_remaining",{minutes_remaining:Math.ceil(_/6e4)}));var y=o.replace(/\d/g,"0").replace(/^\d/,"-0");return ze().createElement($i,null,ze().createElement(Ji,null,ze().createElement(Ji,{dir:"ltr"},ze().createElement(ar,{disabled:!(null!==(t=this.props.playback)&&void 0!==t&&null!==(n=t.restrictions)&&void 0!==n&&n.canSeek),onClick:this.handleSeekBackClick,tabIndex:0},ze().createElement(Ni,null)),ze().createElement(er,null,ze().createElement(qi,{tooltip:lr,max:_,current:g,onDragging:this.handleDragging,isDragging:l,enabled:!!m})),ze().createElement(ar,{disabled:!(null!==(i=this.props.playback)&&void 0!==i&&null!==(r=i.restrictions)&&void 0!==r&&r.canSeek),onClick:this.handleSeekForwardClick,tabIndex:0},ze().createElement(Pi,null))),ze().createElement(rr,{onClick:this.handleProgressTimerClick,"aria-label":s,dir:"ltr"},ze().createElement(or,null,y),ze().createElement(sr,null,o))),ze().createElement(cr,{onClick:this.handleOverflowMenu},ze().createElement(zi,{style:{verticalAlign:"middle"}})),ze().createElement(ir,{isUpsell:p,onClick:this.handleTogglePlay},ze().createElement(Oi,{isPlaying:m.isPlaying||!1,isLoading:m.isBuffering||!1,isDisabled:m.isDisabled||!1})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,i,r,o;return(null===(n=e.playback)||void 0===n||null===(i=n.track)||void 0===i?void 0:i.uri)!==t.currentTrackURI?{fakePosition:null,currentTrackURI:null===(r=e.playback)||void 0===r||null===(o=r.track)||void 0===o?void 0:o.uri,showRemainingTime:!0,isDragging:!1}:null}}]),n}(ze().Component),dr=function(e){return function(e){var t=e.settings.session;return!t.accessToken||t.isAnonymous}(e)&&"episode"!==e.data.entity.type},pr={togglePlay:pt,showOverflowMenu:function(){return{type:ui}},seekForward:function(){return{type:lt}},seekBack:function(){return{type:ct}},seek:_t,seekByPercentage:function(e){return{type:at,percentage:e}}},hr=(0,de.$j)((function(e){var t,n=hn(e.data.entity).metadata;return{isPreview:dr(e),playback:e.playback,duration:(null===(t=e.playback)||void 0===t?void 0:t.duration)||Number(null==n?void 0:n.duration),isUpsell:e.machineState.loop===Xe}}),pr)(Ft(ur)),fr=(0,n(78896).zo)((function(e){var t,n=e.volume,i=void 0===n?1:n;return t=0===i?ze().createElement("path",{d:"M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z M15.623,5.853l-0.707-0.707l-2.147,2.147 l-2.146-2.147L9.916,5.853L12.062,8l-2.146,2.146l0.707,0.707l2.146-2.147l2.147,2.147l0.707-0.707L13.477,8L15.623,5.853z"}):i<1/3?ze().createElement("path",{d:"M10.699,5.18l-0.657,0.77C10.548,6.486,10.863,7.205,10.863,8s-0.316,1.514-0.822,2.051l0.657,0.769 c0.72-0.723,1.165-1.72,1.165-2.82S11.418,5.903,10.699,5.18z M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072 L7,3.732z"}):i<2/3?ze().createElement("path",{d:"M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z M11.863,8c0,1.403-0.585,2.668-1.519,3.577 l0.653,0.764C12.145,11.248,12.863,9.71,12.863,8c0-1.709-0.718-3.248-1.866-4.341l-0.653,0.764 C11.279,5.332,11.863,6.597,11.863,8z"}):ze().createElement("path",{d:"M12.945,1.379l-0.652,0.763c1.577,1.462,2.57,3.544,2.57,5.858s-0.994,4.396-2.57,5.858l0.651,0.763 c1.79-1.645,2.919-3.998,2.919-6.621S14.735,3.024,12.945,1.379z M10.673,4.039l-0.651,0.763C10.849,5.617,11.363,6.749,11.363,8 s-0.515,2.382-1.342,3.199l0.651,0.763c1.04-1,1.691-2.404,1.691-3.961S11.713,5.039,10.673,4.039z M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z"}),ze().createElement("svg",{viewBox:"0 0 16 16"},ze().createElement("title",null,"Volume"),t)}),{width:"100%",height:"100%"});var _r=(0,We.Z)("tr",{target:"e5msmpu6"})((function(e){var t=e.isCurrentTrack,n=e.isPlayable;return(0,u.Z)({color:t?Mi.By7:Mi.ixZ,lineHeight:He,cursor:"pointer",verticalAlign:"top",userSelect:"none",opacity:n?1:.6},":hover",{backgroundColor:n?Mi.vGl:"none"})}),""),mr=(0,We.Z)("td",{target:"e5msmpu5"})((function(e){var t=e.isCurrentTrack;return{color:Mi.ixZ,padding:"".concat(Mi.dly," ").concat(Mi.dly," ").concat(Mi.dly," ").concat(Mi.o78),fontFeatureSettings:'"tnum"',width:"1%",minWidth:je,opacity:t?1:.6}}),""),gr=(0,We.Z)("td",{target:"e5msmpu4"})((function(e){var t=e.isCurrentTrack;return{color:t?Mi.By7:Mi.ixZ,textAlign:"right",padding:"".concat(Mi.hM$," ").concat(Mi.o78," ").concat(Mi.hM$," ").concat(Mi.dly),fontFeatureSettings:'"tnum"',fontWeight:t?600:"unset",opacity:t?1:.6,width:"1%"}}),""),yr=(0,We.Z)("td",{target:"e5msmpu3"})({name:"10htt6c",styles:"position:relative;padding:6px 0"}),Er=(0,We.Z)("div",{target:"e5msmpu2"})((function(){return{position:"relative",height:He,width:"100%"}}),""),vr=(0,We.Z)("div",{target:"e5msmpu1"})((function(e){var t=e.isCurrentTrack;return{position:"absolute",top:0,height:He,width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:t?600:"unset"}}),""),Sr=(0,We.Z)("div",{target:"e5msmpu0"})((function(){return{position:"absolute",width:je,height:je,paddingTop:"2px",fill:Mi.By7}}),""),br=function(e){var t,n,i,r=e.index,o=e.number,s=e.title,a=e.duration,c=e.onTrackClick,l=e.isCurrentTrack,u=void 0!==l&&l,d=e.isPlayable;return ze().createElement(_r,{isCurrentTrack:u,isPlayable:d,onClick:function(){return c(r)}},ze().createElement(mr,{isCurrentTrack:u},u?ze().createElement(Sr,null,ze().createElement(fr,null)):o),ze().createElement(yr,null,ze().createElement(Er,null,ze().createElement(vr,{isCurrentTrack:u},ze().createElement("span",{dir:"auto"},s)))),ze().createElement(gr,{isCurrentTrack:u},(t=a,n=Math.floor(t/6e4),i=Math.floor(t%6e4/1e3),"".concat(n,":").concat(i<10?"0":"").concat(i))))};var Tr=(0,We.Z)("div",{target:"e5s3kxo1"})("position:absolute;top:",Le,"px;overflow-y:scroll;bottom:0px;left:0px;right:0px;"),Rr=(0,We.Z)("table",{target:"e5s3kxo0"})({name:"1d6d78c",styles:"position:relative;border-collapse:collapse;width:100%"}),Ir=function(e){return e.isPlayable},Ar={onTrackClick:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut;return{type:rt,index:e,mediaType:t}}},kr=(0,de.$j)((function(e){return{playback:e.playback,backgroundColor:e.data.backgroundColor}}),Ar)((0,Ge.w)(Ft((function(e){var t=e.trackList,n=void 0===t?[]:t,i=e.playback,r=e.onTrackClick;return ze().createElement(Tr,null,ze().createElement(Rr,null,ze().createElement("tbody",null,n.map((function(e,t){var n;return ze().createElement(br,{index:t,number:t+1,title:e.title,duration:e.duration_ms||0,onTrackClick:r,isCurrentTrack:e.uri===(null==i||null===(n=i.item)||void 0===n?void 0:n.uri)||!1,isPlayable:Ir(e),key:"".concat(t,"-").concat(e.uri)})})))))}))));function Lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var Or=(0,We.Z)("div",{target:"e70pa3m3"})("position:absolute;left:0;right:0;top:0;bottom:0;background-color:",(function(e){return e.backgroundColor}),";z-index:0;transition:transform ",Ke,"ms;",(function(e){return e.isUpsell&&"\n      transform: translateY(".concat(Le-64,"px);\n\n      ").concat(De.medium," {\n        transform: translateY(").concat(Le-70,"px);\n      }\n\n      ").concat(De.small," {\n        transform: translateY(").concat(Le-64,"px);\n      }\n    ")}),";"),Cr=(0,We.Z)(Yn,{target:"e70pa3m2"})("position:absolute;top:",Ue,"px;right:",Ue,"px;width:66px;overflow:hidden;transition:opacity ",100,"ms,visibility ",Ke,"ms;transition-delay:",(function(e){return e.isUpsell?0:200}),"ms;",(function(e){return e.isUpsell&&"\n      opacity: 0;\n      visibility: hidden;\n    "}),";",De.medium,"{",Ne.small,"{top:",8,"px;right:",8,"px;}}",De.small,"{width:21px;",Ne.small,"{top:",8,"px;}}"),Pr=(0,We.Z)("div",{target:"e70pa3m1"})("position:relative;height:",(function(e){return e.hasTracklist?Ce:Le}),"px;background-color:black;overflow:hidden;border-radius:1.5rem;min-width:",224,"px;-webkit-mask-image:-webkit-radial-gradient(white, black);",Ne.small,"{height:",Oe,"px;}"),wr=(0,We.Z)("div",{target:"e70pa3m0"})("position:absolute;height:",Me,"px;left:",32+Be.largeH,"px;right:",Ue,"px;bottom:",24,"px;",Ne.small,"{left:",32+Be.mediumH,"px;}",De.medium,"{left:",Ue,"px;bottom:",Ue,"px;",Ne.small,"{left:",8,"px;right:",8,"px;bottom:0;}}",De.small,"{right:",12,"px;}"),Dr=function(e){(0,T.Z)(n,e);var t=Lr(n);function n(){var e;(0,c.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,u.Z)((0,S.Z)(e),"handleSpotifyLogoClick",(function(){var t=e.props,n=t.openDeepLink,i=t.onLogInteraction;n(),i({type:"click",intent:"open-spotify",itemIdSuffix:"spotify-logo"})})),(0,u.Z)((0,S.Z)(e),"onUserInteraction",(function(){document.removeEventListener(e.userInteractionEventName,e.onUserInteraction),e.props.onLogInteraction({type:"interacted",intent:e.userInteractionEventName}),e.props.initialize()})),e}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){this.props.onMount(),this.userInteractionEventName="ontouchstart"in document.documentElement?"touchstart":"mouseover",document.addEventListener(this.userInteractionEventName,this.onUserInteraction)}},{key:"componentDidUpdate",value:function(e){this.props.isUpsell!==e.isUpsell&&this.props.onLogInteraction({type:"view",intent:this.props.isUpsell?"open-upsell":"close-upsell",itemIdSuffix:"upsell"})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.isUpsell,i=e.initialized,r=e.showOverflowMenu,o=e.onCloseOverflowMenu,s=e.trackList,a=t.entity,c=t.backgroundColor,l=a.topImages,u=void 0===l?null:l;return ze().createElement(Pr,{hasTracklist:!!s,"data-testid":"initialized-".concat(i)},ze().createElement(Or,{isUpsell:n,backgroundColor:c}),ze().createElement(Pr,null,ze().createElement(Ct,{value:"upsell"},null!==u&&ze().createElement(Zn,{isUpsell:n,images:u})),ze().createElement(Or,{isUpsell:n,backgroundColor:c}),ze().createElement(_n,null),ze().createElement(wr,null,ze().createElement(Ct,{value:"now-playing-bar"},ze().createElement(hr,null))),ze().createElement(Cr,{ariaLabel:E.get("play_on_spotify"),onClick:this.handleSpotifyLogoClick,isUpsell:n})),a.tracks&&ze().createElement(kr,null),ze().createElement(bi,{onClose:o,visible:r}))}}]),n}(ze().Component),Nr="INITIALIZE",Ur="MOUNTED";var Mr,xr,Fr,Br,Zr,Yr,Kr,Hr,jr={initialize:function(){return{type:Nr}},onMount:function(){return{type:Ur}},onSpotifyLogoClick:Tt,onCloseOverflowMenu:function(){return{type:li}},openDeepLink:Tt},Vr=(0,de.$j)((function(e){return{isUpsell:$e(e),initialized:e.machineState.initialized,showOverflowMenu:e.machineState.showOverflowMenu,data:e.data}}),jr)((0,Ge.w)(Ft(Dr))),Gr=n(73295),Wr=n(43467),qr=n(58613),zr=n(65761),Qr="#1b1b1b",Xr=_e.ZP.div.withConfig({displayName:"SpotifyLogoMenu__SpotifyLogoMenuContainer",componentId:"sc-9pmq81-0"})(["position:absolute;align-self:center;top:0;right:0;display:flex;flex-direction:column;align-items:center;padding:"," 0 "," 0;border-radius:56px;transition:background-color 0.3s;transition-timing-function:cubic-bezier(0.3,0,0.7,1);",""],Mi.dly,Mi.hM$,(function(e){return"background-color: ".concat(e.backgroundColor).concat(e.isExpanded?"FF":"00",";")})),$r=(0,_e.ZP)(Wr.F).withConfig({displayName:"SpotifyLogoMenu__MenuSpotifyIcon",componentId:"sc-9pmq81-1"})(["cursor:pointer;padding:0 "," "," ",";pointer-events:all;"],Mi.dly,Mi.dly,Mi.dly),Jr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"\n  cursor: pointer;\n  transition: opacity 0.15s , padding 0.15s, height 0.3s;\n  transition-timing-function: cubic-bezier(0.3, 0, 0.7, 1);\n  opacity: ".concat(e?1:0,";\n  height: ").concat(e?"100%":"0",";\n  padding: ").concat(e?"".concat(Mi.nuo," ").concat(Mi.nuo," ").concat(Mi.dly," ").concat(Mi.nuo):"0",";\n  pointer-events: ").concat(e?"auto":"none",";\n\n")},eo=(0,_e.ZP)(qr.Z).withConfig({displayName:"SpotifyLogoMenu__AddToLibrary",componentId:"sc-9pmq81-2"})([""," ",""],ke.small(Mr||(Mr=(0,Zt.Z)(["\n    display: none;\n  "]))),(function(e){return Jr(e.isExpanded)})),to=(0,_e.ZP)(zr.f).withConfig({displayName:"SpotifyLogoMenu__MoreMenu",componentId:"sc-9pmq81-3"})(["",""],(function(e){return Jr(e.isExpanded)})),no=function(e){var t=e.keepExpanded,n=void 0!==t&&t,i=e.backgroundColor,r=e.onClickMore,o=(0,qe.useState)(!0),s=(0,D.Z)(o,2),a=s[0],c=s[1];return(0,qe.useEffect)((function(){var e;return n||(e=setTimeout((function(){return c(!1)}),500)),function(){clearTimeout(e)}}),[n]),ze().createElement(Xr,{isExpanded:a,backgroundColor:i||Qr},ze().createElement($r,{iconSize:32,color:Mi.ixZ,onClick:function(){return c(!a)}}),ze().createElement(eo,{isExpanded:a,iconSize:24}),ze().createElement(to,{isExpanded:a,onClick:r,iconSize:24}))},io=n(65360),ro=_e.ZP.button.withConfig({displayName:"Header__TitleWithCoverArt",componentId:"sc-1whpomo-0"})(["display:flex;overflow:hidden;padding:"," "," "," ",";"],Mi.dly,Mi.JBZ,Mi.dly,Mi.dly),oo=_e.ZP.div.withConfig({displayName:"Header__Title",componentId:"sc-1whpomo-1"})(["display:flex;flex-direction:column;margin:0 ",";text-align:left;overflow:hidden;h1,h2{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}"],Mi.nuo),so=_e.ZP.div.withConfig({displayName:"Header__TitleMediumSmall",componentId:"sc-1whpomo-2"})(["display:none;",""],ke.medium(xr||(xr=(0,Zt.Z)(["\n    display: block;\n  "])))),ao=_e.ZP.div.withConfig({displayName:"Header__TitleLarge",componentId:"sc-1whpomo-3"})(["",""],ke.medium(Fr||(Fr=(0,Zt.Z)(["\n    display: none;\n  "])))),co=_e.ZP.img.withConfig({displayName:"Header__CoverArt",componentId:"sc-1whpomo-4"})(["width:40px;height:40px;border-radius:",";",""],Mi.hM$,ke.medium(Br||(Br=(0,Zt.Z)(["\n    width: 32px;\n    height: 32px;\n  "])))),lo=_e.ZP.div.withConfig({displayName:"Header__Wrapper",componentId:"sc-1whpomo-5"})(["align-self:stretch;display:flex;flex:1;position:relative;align-items:flex-start;justify-content:space-between;overflow:visible;"]),uo=function(e){var t,n,i=e.className,r=e.cornerIcon,o=(0,de.v9)((function(e){var t,n;return{episodeName:e.data.entity.name,showName:null===(t=e.data.entity.show)||void 0===t?void 0:t.name,showImages:null===(n=e.data.entity.show)||void 0===n?void 0:n.images}})),s=o.episodeName,a=o.showName,c=o.showImages,l=(0,de.I0)();return ze().createElement(lo,{className:i},ze().createElement(ro,{onClick:function(){return l(Rt())}},(null==c||null===(t=c[0])||void 0===t?void 0:t.url)&&ze().createElement(co,{src:null===(n=c[0])||void 0===n?void 0:n.url,alt:"".concat(a," cover")}),ze().createElement(oo,null,ze().createElement(ao,null,ze().createElement(io.LF,{as:"h1",variant:io.LF.balladBold,"data-testid":"preview-episode-name"},s)),ze().createElement(so,null,ze().createElement(io.LF,{as:"h1",variant:io.LF.mestoBold},s)),ze().createElement(io.LF,{as:"h2",variant:io.LF.mesto,"data-testid":"preview-episode-name-medium-small"},a))),r)},po=_e.ZP.div.withConfig({displayName:"InitialView__BackgroundWrapper",componentId:"sc-o47eiv-0"})(["position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden;padding:"," "," "," ",";background-image:url(",");background:linear-gradient(",",","),url(",");background-repeat:no-repeat;background-size:cover;background-position:center;",""],Mi.o78,Mi.g4V,Mi.g4V,Mi.g4V,(function(e){return e.backgroundImageUrl}),Mi.luK,Mi.luK,(function(e){return e.backgroundImageUrl}),ke.medium(Zr||(Zr=(0,Zt.Z)(["\n    padding: ",";\n  "])),Mi.dly)),ho=_e.ZP.div.withConfig({displayName:"InitialView__Overlay",componentId:"sc-o47eiv-1"})(["position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden;display:flex;justify-content:center;align-items:center;cursor:pointer;"]),fo=_e.ZP.div.withConfig({displayName:"InitialView__PlayButtonContainer",componentId:"sc-o47eiv-2"})(["display:flex;align-items:center;justify-content:center;width:22vh;height:22vh;max-width:70px;max-height:70px;",""],ke.small(Yr||(Yr=(0,Zt.Z)(["\n    padding-top: ","\n  "])),Mi.JBZ)),_o=(0,_e.ZP)(uo).withConfig({displayName:"InitialView__NonClickableHeader",componentId:"sc-o47eiv-3"})(["pointer-events:none;"]),mo=function(e){var t=e.episode,n=e.onClick,i=e.episode.backgroundColor,r=(0,qe.useState)(!1),o=(0,D.Z)(r,2),s=o[0],a=o[1],c=(0,qe.useCallback)((function(e){a(!0),n(e)}),[n]);return ze().createElement(po,{backgroundImageUrl:t.coverArtImageUrl},ze().createElement(ho,{onClick:c},ze().createElement(fo,null,s?ze().createElement(Gr.T,null):ze().createElement(Oi,null))),ze().createElement(_o,{cornerIcon:ze().createElement(no,{keepExpanded:!0,onClickMore:function(){},backgroundColor:i})}))},go=(n(83526),n(29609)),yo=function(e){return function(t){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];i?i=!1:(clearTimeout(n),n=setTimeout((function(){e.apply(e,o)}),t))}}},Eo=n(60413),vo=n(13923),So=n(87160),bo=n(73333),To=n(19124),Ro=n(66917),Io=n.n(Ro);var Ao="more-menu-icons",ko=_e.ZP.div.withConfig({displayName:"OverflowMenu__MenuWrapper",componentId:"sc-1vir16w-0"})(["",";display:flex;flex-direction:column;z-index:4;position:absolute;top:0;bottom:0;left:0;right:0;margin:0;padding:",";"],(function(e){return"background: ".concat(e.backgroundColor)}),Mi.g4V),Lo=_e.ZP.div.withConfig({displayName:"OverflowMenu__OptionsWrapper",componentId:"sc-1vir16w-1"})(["display:flex;flex-wrap:wrap;justify-content:space-between;flex-direction:row;align-content:flex-start;overflow:hidden;> div{flex:1 0 50%;}"," "," & .icon-check{opacity:0;position:absolute;transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;transform:rotateY(180deg) scale(1.2);z-index:2;}& .icon-share{transition:transform 0.4s ease-in-out,opacity 1s ease-in-out;transform:scale(1);z-index:1;}&.","-enter-done{& .icon-check{opacity:1;transform:rotateY(0deg) scale(1);}& .icon-share{opacity:0;transform:scale(0);}}&.","-exit-done{& .icon-check{opacity:0;}& .icon-share{opacity:1;}}"],ke.medium(Kr||(Kr=(0,Zt.Z)(["\n    max-height: 64px;\n  "]))),ke.small(Hr||(Hr=(0,Zt.Z)(["\n    > div {\n      flex: 1 0 100%;\n    }\n  "]))),Ao,Ao),Oo=_e.ZP.a.withConfig({displayName:"OverflowMenu__MenuItem",componentId:"sc-1vir16w-2"})(["border-radius:",";color:",";display:flex;align-items:center;cursor:pointer;position:relative;background-color:",";margin:",";padding:",";white-space:nowrap;&:hover{background:",";}& > svg{margin-right:",";}"],Mi.hM$,Mi.ixZ,Mi.Saw,Mi.hM$,Mi.o78,Mi.e1B,Mi.nuo),Co=(0,_e.ZP)(Eo.E).withConfig({displayName:"OverflowMenu__CloseButton",componentId:"sc-1vir16w-3"})(["margin:",";"],Mi.dly),Po=_e.ZP.div.withConfig({displayName:"OverflowMenu__CookiePolicy",componentId:"sc-1vir16w-4"})(["flex:1;display:flex;align-items:flex-end;"]),wo=function(e){var t,n=e.backgroundColor,i=e.onClose,r=(0,de.I0)(),o=(0,de.v9)((function(e){var t,n;return{uri:null===(t=e.playback)||void 0===t||null===(n=t.context)||void 0===n?void 0:n.uri}})).uri,s=null===(t=Io().from(o))||void 0===t?void 0:t.toSecureOpenURL(),a=(0,qe.useCallback)((function(){var e,t;e=s,(t=document.createElement("textarea")).value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}),[s]);return ze().createElement(ko,{"data-testid":"more-menu-wrapper",backgroundColor:n||Qr},ze().createElement(uo,{cornerIcon:ze().createElement(Co,{semanticColor:"textBase",onClick:i},ze().createElement(vo.k,{"data-testid":"more-menu-close-icon",iconSize:24,style:{alignSelf:"center",cursor:"pointer"},"arial-label":E.get("close")}))}),ze().createElement(Lo,null,ze().createElement("div",null,ze().createElement(Oo,{onClick:function(){return r(Rt())},target:"_blank"},ze().createElement(Wr.F,{iconSize:24})," Play on Spotify")),ze().createElement("div",null,ze().createElement(Oo,{onClick:a},ze().createElement(So.k,{color:Mi.By7,iconSize:24,className:"icon-check"}),ze().createElement(bo.F,{iconSize:24,className:"icon-share"})," Copy share link")),ze().createElement("div",null,ze().createElement(Oo,null,ze().createElement(qr.Z,{iconSize:24})," Save to Your Episodes")),ze().createElement("div",null,ze().createElement(Oo,null,ze().createElement(To.I,{iconSize:24})," Follow on Spotify"))),ze().createElement(Po,null,ze().createElement(io.LF,{as:"a",variant:io.LF.mesto,href:"https://www.spotify.com/legal/end-user-agreement/",target:"_blank"},E.get("spe.cookie_policy"))))},Do=n(50997),No=n(22448),Uo=n(39197),Mo=n(60374),xo=n(64902),Fo={slideUp:(0,_e.F4)(["from{opacity:0;transform:translateY(100%);}20%{opacity:0;}to{opacity:1;transform:translateY(0);}"]),slideDown:(0,_e.F4)(["from{opacity:1;transform:translateY(0);}30%{opacity:0;}to{opacity:0;transform:translateY(100%);}"])},Bo=_e.ZP.div.withConfig({displayName:"RemainingProgressUpsell__StyledContainer",componentId:"sc-16xoc2s-0"})(["display:flex;justify-content:center;position:relative;top:-18px;animation:",";animation-duration:","ms;animation-timing-function:",";animation-fill-mode:forwards;position:absolute;top:-38px;padding-bottom:",";width:100%;"],(function(e){return Fo[e.animation]}),400,"cubic-bezier(0.3, 0, 0, 1)",Mi.dly),Zo=(0,qe.forwardRef)((function(e,t){return ze().createElement(Bo,(0,At.Z)({},e,{ref:t}))})),Yo=_e.ZP.div.withConfig({displayName:"RemainingProgressUpsell__Tooltip",componentId:"sc-16xoc2s-1"})(["color:",";padding:4px 8px;background-color:",";border-radius:4px;box-shadow:0px 4px 8px rgba(0,0,0,0.3);pointer-events:none;height:",";"],Mi.TLo,Mi.CTm,Mi.g4V),Ko=function(e){return ze().createElement(Zo,{ref:e.setRef,animation:e.animation,onMouseLeave:e.onUpsellLeave,onTouchEnd:e.onUpsellLeave,onAnimationEnd:e.onUpsellAnimationEnd},ze().createElement(Yo,null,ze().createElement(io.LF,{variant:"mesto",style:{fontSize:"2rem"}},"Play full episode on Spotify")))},Ho=n(86250);function jo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{leading:!1,trailing:!0},i=(0,qe.useRef)(),r=(0,qe.useRef)(0),o=(0,qe.useRef)(),s=(0,qe.useRef)(e),a=(0,qe.useRef)(),c=(0,qe.useRef)(),l=(0,qe.useRef)(!0);s.current=e;var u=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");var d=Number(t)||0,p=!!n.leading,h=!("trailing"in n)||!!n.trailing,f="maxWait"in n,_=Math.max(Number(n.maxWait)||0,d),m=(0,qe.useCallback)((function(e){var t=a.current;return a.current=void 0,r.current=e,c.current=s.current.apply(s,(0,Ho.Z)(t)),c.current}),[]),g=(0,qe.useCallback)((function(e,t){return u?(window.cancelAnimationFrame(o.current),window.requestAnimationFrame(e)):window.setTimeout(e,t)}),[u]),y=(0,qe.useCallback)((function(e){u?window.cancelAnimationFrame(e):window.clearTimeout(e)}),[u]),E=(0,qe.useCallback)((function(e){var t=e-Number(i.current),n=e-r.current,o=d-t;return f?Math.min(o,_-n):o}),[_,f,d]),v=(0,qe.useCallback)((function(e){if(!l.current)return!1;var t=e-Number(i.current),n=e-r.current;return void 0===i.current||t>=d||t<0||f&&n>=_}),[_,f,d]),S=(0,qe.useCallback)((function(e){return o.current=void 0,h&&a.current?m(e):(a.current=void 0,c.current)}),[m,h]),b=(0,qe.useCallback)((function(){var e=Date.now();if(v(e))return S(e);o.current=g(b,E(e))}),[E,v,g,S]),T=(0,qe.useCallback)((function(e){return r.current=e,o.current=g(b,d),p?m(e):c.current}),[m,g,p,b,d]),R=(0,qe.useCallback)((function(){void 0!==o.current&&y(o.current),r.current=0,a.current=i.current=o.current=void 0}),[y]),I=(0,qe.useCallback)((function(){return void 0===o.current?c.current:S(Date.now())}),[S]),A=(0,qe.useCallback)((function(){return void 0!==o.current}),[]);(0,qe.useEffect)((function(){return l.current=!0,function(){l.current=!1}}),[]);var k=(0,qe.useCallback)((function(){for(var e=Date.now(),t=v(e),n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(a.current=r,i.current=e,t){if(void 0===o.current&&l.current)return T(i.current);if(f)return o.current=g(b,d),m(i.current)}return void 0===o.current&&(o.current=g(b,d)),c.current}),[m,T,f,v,g,b,d]);return k.cancel=R,k.flush=I,k.pending=A,k}var Vo,Go=n(35755),Wo=_e.ZP.div.withConfig({displayName:"ProgressBar__Container",componentId:"sc-15k8x1m-0"})(["display:flex;position:relative;margin:0 ",";-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;"],Mi.dly),qo=_e.ZP.div.withConfig({displayName:"ProgressBar__StyledSection",componentId:"sc-15k8x1m-1"})(["position:relative;height:16px;width:",";padding-top:",";&:first-of-type{margin-right:",";}"],(function(e){return"".concat(e.percentage,"%")}),Go.hM$,Mi.dly),zo=(0,qe.forwardRef)((function(e,t){return ze().createElement(qo,(0,At.Z)({},e,{ref:t}))})),Qo=_e.ZP.div.withConfig({displayName:"ProgressBar__TooltipContainer",componentId:"sc-15k8x1m-2"})(["position:absolute;top:-36px;left:0;transform:translate(-50%,0%);will-change:left;"]),Xo=function(e){var t=e.children,n=e.style;return ze().createElement(Qo,{style:n},ze().createElement(xo.u,null,ze().createElement(io.LF,{as:"span",variant:io.LF.finale},t)))},$o=function(e){e.current&&clearTimeout(e.current)},Jo=function(e){var t=e.widthPercentage,n=(0,qe.useRef)(void 0),i=(0,qe.useRef)(void 0),r=(0,qe.useState)(!1),o=(0,D.Z)(r,2),s=o[0],a=o[1],c=(0,qe.useState)("slideUp"),l=(0,D.Z)(c,2),u=l[0],d=l[1],p=(0,qe.useRef)(null),h=(0,qe.useCallback)((function(e){e&&(p.current=e)}),[]),f=yo((function(){$o(i),$o(n),n.current=setTimeout((function(){return d("slideDown")}),800)}))(200);return ze().createElement(zo,{percentage:t,onMouseLeave:f},s&&ze().createElement(Ko,{setRef:h,animation:u,onUpsellLeave:f,onUpsellAnimationEnd:function(e){Fo.slideDown.name===e.animationName&&a(!1)}}),ze().createElement(qi,{enabled:!1}))},es=function(e){var t=e.totalDuration,n=e.previewDuration,i=e.currentDuration,r=e.onSeek,o=null!=i?i:1,s=100*n/t,a=100-s,c=100-Math.max(1,100*o/n),l={transform:"translateX(-".concat(c<=0?100+s-100*o/t:100,"%)")},u=(0,qe.useState)(!1),d=(0,D.Z)(u,2),p=d[0],h=d[1],f=(0,qe.useState)(null),_=(0,D.Z)(f,2),m=_[0],g=_[1],y=Number.isFinite(m)&&null!==m?(m||0)*n:i,E=jo((function(){g(null)}),1e3),v=(0,qe.useCallback)((function(e){var t=e.percentage,i=e.ended;h(!0),g(t),i&&(r((t||0)*n),h(!1),g(t),E())}),[h,g,r,E,n]);return ze().createElement(Wo,null,ze().createElement(zo,{percentage:s},ze().createElement(qi,{max:n,current:y,onDragging:v,isDragging:p,tooltip:Xo,enabled:!0})),ze().createElement(Jo,{widthPercentage:a,lineStyle:l}))},ts=_e.ZP.div.withConfig({displayName:"PlayControls__PlayControlsWrapper",componentId:"sc-1053x3t-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:1024px;min-width:230px;margin:auto;border-radius:",";background-color:",";"],Mi.dly,(function(e){var t;return null!==(t=e.backgroundColor)&&void 0!==t?t:Qr})),ns=_e.ZP.div.withConfig({displayName:"PlayControls__ControlsSection",componentId:"sc-1053x3t-1"})(["width:100%;display:flex;align-items:center;justify-content:space-between;position:relative;"]),is=_e.ZP.div.withConfig({displayName:"PlayControls__ProgressSection",componentId:"sc-1053x3t-2"})(["position:relative;display:block;width:100%;"]),rs=_e.ZP.div.withConfig({displayName:"PlayControls__ControlArea",componentId:"sc-1053x3t-3"})(["display:flex;flex:1;align-items:center;",""],(function(e){return"justify-content: ".concat(e.justifyContent,";")})),os=_e.ZP.div.withConfig({displayName:"PlayControls__PlayButtonWrapper",componentId:"sc-1053x3t-4"})(["position:relative;width:32px;height:32px;padding:6px;"]),ss=(0,_e.ZP)(Eo.E).withConfig({displayName:"PlayControls__ButtonIconStyled",componentId:"sc-1053x3t-5"})(["padding:",";"],Mi.nuo),as=_e.ZP.div.withConfig({displayName:"PlayControls__Timestamp",componentId:"sc-1053x3t-6"})(["margin:0 ",";",""],Mi.dly,ke.small(Vo||(Vo=(0,Zt.Z)(["\n    display: none;\n  "])))),cs=function(e){return e<10?"0".concat(e):"".concat(e)},ls=function(e){var t=e.duration,n=e.backgroundColor,i=e.previewDuration,r=e.position,o=e.togglePlay,s=e.isPlaying,a=(0,de.v9)((function(e){var t;return{isDisabled:null===(t=e.playback)||void 0===t?void 0:t.isDisabled}})).isDisabled,c=(0,qe.useState)(!1),l=(0,D.Z)(c,2),u=l[0],d=l[1];(0,qe.useEffect)((function(){d(!1)}),[s]);var p,h,f,_,m=(0,qe.useCallback)((function(){d(!0),o()}),[d,o]),g=(0,de.I0)();return ze().createElement(ts,{backgroundColor:n,"data-testid":"play-controls"},ze().createElement(is,null,ze().createElement(es,{onSeek:function(e){return g(_t(e))},totalDuration:t,previewDuration:i,currentDuration:r})),ze().createElement(ns,null,ze().createElement(rs,{justifyContent:"flex-start"},ze().createElement(ss,{semanticColor:"textBase"},ze().createElement(Do.H,{iconSize:24,"arial-label":E.get("playback-control.mute")})),ze().createElement(as,null,ze().createElement(io.LF,{as:"span",variant:io.LF.mesto},(p=t-(r||0),h=Math.floor(p/1e3%60),f=Math.floor(p/6e4%60),_=Math.floor(p/36e5%60),"".concat(_>0?"".concat(cs(_),":"):"").concat(cs(f),":").concat(cs(h)))))),ze().createElement(rs,{justifyContent:"center"},ze().createElement(ss,{semanticColor:"textBase"},ze().createElement(No.P,{iconSize:24,"arial-label":E.get("spe.playback-control.skip-backward-15")})),ze().createElement(os,{onClick:m},ze().createElement(Oi,{maxTimeToNotShowLoading:10,isLoading:u||!1,isPlaying:s||!1,isDisabled:a||!1})),ze().createElement(ss,{semanticColor:"textBase"},ze().createElement(Uo.h,{iconSize:24,"arial-label":E.get("spe.playback-control.skip-forward-15")}))),ze().createElement(rs,{justifyContent:"flex-end"},ze().createElement(ss,{semanticColor:"textBase"},ze().createElement(Mo.G,{iconSize:24,"arial-label":E.get("npv.full-screen")})))))},us=n(48168),ds=_e.ZP.button.withConfig({displayName:"common__IconButton",componentId:"sc-cbhosz-0"})(["display:flex;align-items:center;margin:0 ",";transition:0.2s transform ease-in-out;",";&:active{transform:scale(0.9);}"],Mi.dly,(function(e){var t=e.color?"\n    color: ".concat(e.color,";\n    "):"",n=e.hasBackground?"\n    background: #fff;\n    padding: 10px;\n    border-radius: 50%;\n    ":"";return"\n    ".concat(t,"\n    ").concat(n,"\n    ")})),ps=_e.ZP.div.withConfig({displayName:"common__FadeContainer",componentId:"sc-cbhosz-1"})(["width:100%;height:100%;transition:opacity ease-out 0.4s;&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;}&.fade-exit{opacity:1;}&.fade-exit-active{opacity:0;}"]),hs=(0,_e.ZP)(ps).withConfig({displayName:"ReplayControls__ReplayControlsContainer",componentId:"sc-1wqizvg-0"})(["display:flex;flex-direction:row;height:52px;"]),fs=(0,_e.ZP)(ds).withConfig({displayName:"ReplayControls__BottomButton",componentId:"sc-1wqizvg-1"})(["align-self:flex-end;"]),_s=function(e){return ze().createElement(hs,{"data-testid":"replay-controls"},ze().createElement(fs,{onClick:function(){return e.play()},"data-testid":"replay-btn"},ze().createElement(us.N,null),ze().createElement(io.LF,{variant:"mesto",style:{marginLeft:Mi.o78,fontSize:"2rem"}},"Replay")))},ms=n(46006);function gs(e){if(null===e||null===e.positionAsOfTimestamp||null===e.duration)return null;var t=e.timestamp,n=e.positionAsOfTimestamp,i=e.duration,r=e.speed,o=e.isPlaying,s=e.isPaused,a=e.isBuffering;if(!o||s||a)return n;var c=(Date.now()-t)*(null!=r?r:0);return Math.min(n+c,i)}var ys=(0,We.Z)("div",{target:"e110sapp0"})({name:"1739oy8",styles:"z-index:1"}),Es=function(e){var t,n,i,r=e.isPlaying,o=e.duration,s=e.backgroundColor,a=e.togglePlay,c=e.pause,l=e.play,u=(t=o,n=15e5,(i=Math.ceil(.25*t))>n?n:i),d=(0,qe.useState)(!1),p=(0,D.Z)(d,2),h=p[0],f=p[1],_=(0,de.v9)((function(e){var t;return{position:null!==(t=gs(e.playback))&&void 0!==t?t:null}})).position;return(0,qe.useEffect)((function(){_&&_>=u&&(c(),f(!0))}),[c,u,_]),ze().createElement(ys,{"data-testid":"controls-container"},ze().createElement(ms.Z,{mode:"out-in"},ze().createElement(go.Z,{key:"preview-".concat(h),classNames:"fade",timeout:400},h?ze().createElement(_s,{play:function(){f(!1),l()}}):ze().createElement(ls,{isPlaying:r,duration:o,previewDuration:u,position:_,backgroundColor:s,togglePlay:a}))))};var vs,Ss,bs,Ts,Rs,Is,As,ks,Ls=(0,We.Z)("div",{target:"e1a7e8470"})({name:"1hc16ie",styles:"position:absolute;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;height:100%"}),Os=function(e){var t,n,i=e.playbackError;return i?ze().createElement(Ls,{"data-testid":"error-container"},ze().createElement(io.LF,{variant:"ballad",style:{fontSize:"2rem"}},(t=i).message||(null===(n=t.cause)||void 0===n?void 0:n.message)||t.cause.code)):null},Cs=n(98965),Ps=_e.ZP.div.withConfig({displayName:"Upsell__UpsellContainer",componentId:"sc-13eazxx-0"})(["width:100%;display:flex;flex:1;flex-direction:column;justify-content:flex-end;min-height:0;overflow:hidden;max-width:1024px;margin:auto;"]),ws=_e.ZP.div.withConfig({displayName:"Upsell__UpsellCard",componentId:"sc-13eazxx-1"})(["background-color:",";border-radius:8px;margin-bottom:",";padding:"," "," "," ",";opacity:",";transition:all 0.1s ease-in;transition-property:opacity,margin-bottom;"," ",""],Mi.Snx,(function(e){return e.isVisible?Mi.o78:"0"}),Mi.g4V,Mi.o78,Mi.g4V,Mi.nuo,(function(e){return e.isVisible?"1":"0"}),ke.medium(vs||(vs=(0,Zt.Z)(["\n    margin-bottom: ",";\n  "])),(function(e){return e.isVisible?Mi.dly:"0"})),ke.small(Ss||(Ss=(0,Zt.Z)(["\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: 0;\n    display: block;\n    background-color: ",";\n    padding: "," ",";\n  "])),Mi.Snx,Mi.dly,Mi.o78)),Ds=(0,_e.ZP)(io.LF).withConfig({displayName:"Upsell__UpsellMessage",componentId:"sc-13eazxx-2"})(["flex:1;margin:0 "," 0 0;display:flex;align-items:center;",""],Mi.g4V,ke.small(bs||(bs=(0,Zt.Z)(["\n    display: block;\n    margin: 0;\n    margin-bottom: ",";\n  "])),Mi.dly)),Ns=_e.ZP.div.withConfig({displayName:"Upsell__UpsellTypeSmallMedium",componentId:"sc-13eazxx-3"})(["display:none;"," ",""],ke.medium(Ts||(Ts=(0,Zt.Z)(["\n    display: flex;\n  "]))),ke.small(Rs||(Rs=(0,Zt.Z)(["\n    display: block;\n  "])))),Us=_e.ZP.div.withConfig({displayName:"Upsell__UpsellTypeLarge",componentId:"sc-13eazxx-4"})(["display:flex;",""],ke.medium(Is||(Is=(0,Zt.Z)(["\n    display: none;\n  "])))),Ms=function(e){var t=e.isVisible,n=void 0!==t&&t,i=e.onCTAClick;return ze().createElement(Ps,null,ze().createElement(ws,{isVisible:n,"data-testid":"upsell-card"},ze().createElement(Us,null,ze().createElement(Ds,{forwardedAs:"div",variant:"canon"},"Signup for a free Spotify account to watch the full episode."),ze().createElement(Cs.D,{onClick:i,buttonSize:Cs.D.lg,"data-testid":"cta-button"},E.get("get_spotify"))),ze().createElement(Ns,null,ze().createElement(Ds,{forwardedAs:"div",variant:io.LF.violaBold},"Signup for a free Spotify account to watch the full episode."),ze().createElement(Cs.D,{onClick:i,buttonSize:Cs.D.sm,"data-testid":"cta-button-small-medium"},E.get("get_spotify")))))},xs="video-player-controls",Fs=_e.ZP.div.withConfig({displayName:"VideoPlayer__Container",componentId:"sc-x3t2jm-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;z-index:3;display:flex;align-items:center;flex-direction:column;pointer-events:",";",""],(function(e){return e.disabled?"none":"inherit"}),(function(e){return e.visible?"":"display: none"})),Bs=_e.ZP.div.withConfig({displayName:"VideoPlayer__TransitionContainer",componentId:"sc-x3t2jm-1"})(["width:100%;height:100%;position:absolute;top:0;display:flex;flex-direction:column;justify-content:space-between;alight-self:stretch;align-items:stretch;background:linear-gradient(180deg,"," 0px,"," 112px);opacity:1;"," &.","-enter{transition:opacity ease-in 0.3s;opacity:1;}&.","-enter-done{opacity:1;}&.","-exit{transition:opacity ease-out 0.6s;opacity:0;}&.","-exit-done{opacity:0;}"],Mi.luK,Mi.P_L,ke.medium(As||(As=(0,Zt.Z)(["\n    background: linear-gradient(180deg, "," 0px, "," 96px);\n  "])),Mi.luK,Mi.P_L),xs,xs,xs,xs),Zs=_e.ZP.div.withConfig({displayName:"VideoPlayer__ControlsWrapper",componentId:"sc-x3t2jm-2"})(["flex:1;display:flex;flex-direction:column;padding:"," "," "," ",";overflow:hidden;",""],Mi.o78,Mi.g4V,Mi.g4V,Mi.g4V,ke.medium(ks||(ks=(0,Zt.Z)(["\n    padding: ",";\n  "])),Mi.dly)),Ys=_e.ZP.div.withConfig({displayName:"VideoPlayer__PlaybackContainer",componentId:"sc-x3t2jm-3"})(["width:100%;height:100%;& video{position:relative;width:100%;height:100%;}"]),Ks=function(e){var t=e.isPlaying,n=e.isVisible,i=e.toggleOverflowMenu,r=e.backgroundColor,o=e.duration,s=e.togglePlay,a=e.play,c=e.pause,l=(0,de.I0)();return function(e){return void 0!==e}(t)?ze().createElement(go.Z,{timeout:300,classNames:xs,in:n},ze().createElement(Bs,null,ze().createElement(Zs,null,ze().createElement(uo,{cornerIcon:ze().createElement(no,{keepExpanded:!1,onClickMore:function(){return i(!0)},backgroundColor:r})}),ze().createElement(Ms,{isVisible:!1===t,onCTAClick:function(){return l(Rt())}}),ze().createElement(Es,{duration:o,isPlaying:Boolean(t),backgroundColor:r,togglePlay:s,play:a,pause:c})))):null},Hs=function(e){var t=e.visible,n=void 0===t||t,i=e.backgroundColor,r=e.duration,o=e.isPlaying,s=e.togglePlay,a=e.play,c=e.pause,l=(0,qe.useState)(!1),u=(0,D.Z)(l,2),d=u[0],p=u[1],h=(0,qe.useState)(!1),f=(0,D.Z)(h,2),_=f[0],m=f[1],g=(0,qe.useState)(!0),y=(0,D.Z)(g,2),E=y[0],v=y[1],S=(0,de.v9)((function(e){var t;return{playbackError:null===(t=e.playback)||void 0===t?void 0:t.error}})).playbackError;(0,qe.useEffect)((function(){m(/alwaysVisible=1/.test(document.location.search))}),[]);var b=jo((function(){v(!1)}),5e3),T=function(){v(!0),_||b()},R=yo(T)(200);return ze().createElement(Fs,{visible:n,disabled:void 0===o,onMouseEnter:T,onMouseMove:R},ze().createElement(Ys,{className:"VideoPlayer__container"}),ze().createElement(Os,{playbackError:S}),ze().createElement(Ks,{isPlaying:o,isVisible:E,backgroundColor:i,duration:r,togglePlay:s,toggleOverflowMenu:p,play:a,pause:c}),d&&ze().createElement(wo,{onClose:function(){return p(!1)},backgroundColor:i}))},js=_e.ZP.div.withConfig({displayName:"VideoPlayerContainer__AspectRatioContainer",componentId:"sc-1nqzn4u-0"})(["width:100%;padding-top:56.25%;position:relative;background-color:",";"],(function(e){var t;return null!==(t=e.backgroundColor)&&void 0!==t?t:"transparent"}));(0,de.$j)()((function(){var e,t=(0,de.I0)(),n=(0,de.v9)((function(e){var t;return{entity:e.data.entity,backgroundColor:e.data.backgroundColor,isPlaying:null===(t=e.playback)||void 0===t?void 0:t.isPlaying}})),i=n.entity,r=i.duration_ms,o=i.name,s=i.images,a=n.backgroundColor,c=n.isPlaying,l=(0,qe.useState)(!0),u=(0,D.Z)(l,2),d=u[0],p=u[1];return c&&!0===d&&p(!1),ze().createElement(js,{backgroundColor:Mi.Snx,className:"encore-dark-theme"},ze().createElement(Hs,{visible:!d,backgroundColor:a,duration:r,isPlaying:c,togglePlay:function(){return t(pt(dt))},play:function(){return t(ht(dt))},pause:function(){return t(ft())}}),d&&ze().createElement(mo,{onClick:function(){return t(ht(dt))},episode:{name:o,backgroundColor:a,coverArtImageUrl:null==s||null===(e=s[0])||void 0===e?void 0:e.url}}))}));(0,_e.vJ)(["",""],Re.styles);var Vs=n(34074),Gs=n(35870),Ws=n(90310),qs=n(21995),zs=n(84430),Qs=n(57496),Xs=null;function $s(){if(null===Xs)throw new Error("Missing `instance`. Have you called `setEventSenderInstance` yet?");return Xs}function Js(e,t){try{var n=document.getElementById(e);return n?JSON.parse(n.innerHTML):t}catch(i){return t}}function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var na=!1;function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oa={initialized:!1,showOverflowMenu:!1,loop:Qe};var sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:return ra(ra({},e),{},{initialized:!0});case et:return ra(ra({},e),{},{loop:Qe});case ui:return ra(ra({},e),{},{showOverflowMenu:!0});case li:return ra(ra({},e),{},{showOverflowMenu:!1});case ot:var n;return window.innerHeight>Le?ra(ra({},e),{},{loop:null!==(n=t.state)&&void 0!==n&&n.isPlaying?Xe:Qe}):e;default:return e}},aa=function(e){var t=new URL(e.href).searchParams.get("t");if(t){var n=parseInt(t,10);if(n>0)return n}return null},ca="MOUNTED";function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:return t.state;case ca:var n=aa(window.location);return n?ua(ua({},e),{},{position:1e3*n}):e;case st:return ua(ua({},e),{},{isDisabled:!0,error:ua(ua({},t.error),{},{message:t.error.message})});default:return e}};function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fa,_a,ma,ga=function(e){return(0,Vs.UY)({data:(t=e.data,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entity:t.entity,backgroundColor:"",followState:"use deeplink"},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case St:return ha(ha({},e),{},{followState:"is following"});case bt:return ha(ha({},e),{},{followState:"can follow"});default:return e}}),settings:function(){return e.settings},machineState:sa,playback:da});var t},ya=n(4534),Ea=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ya.vp;(0,c.Z)(this,e),this._emitter=t,this._emitter=t||new ya.vp}return(0,l.Z)(e,[{key:"addListener",value:function(e,t,n){return this._emitter.addListener(e,t,n),this}},{key:"removeListener",value:function(e,t,n){return this._emitter.removeListener(e,t,n),this}},{key:"onAddListener",value:function(e,t){return this._emitter.onAddListener(e,t),this}},{key:"onRemoveListener",value:function(e,t){return this._emitter.onRemoveListener(e,t),this}},{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"emitSync",value:function(e,t){return this._emitter.emitSync(e,t)}}]),e}();function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}!function(e){e.UPDATE="update",e.ERROR="error",e.VOLUME="volume",e.ACTION="action",e.QUEUE_ACTION="queue_action",e.QUEUE_ACTION_COMPLETE="queue_action_complete"}(fa||(fa={})),function(e){e.PLAY="play",e.PAUSE="pause",e.RESUME="resume",e.SKIP_TO_NEXT="skipToNext",e.SKIP_TO_PREVIOUS="skipToPrevious"}(_a||(_a={})),function(e){e.ADD="add",e.REMOVE="remove",e.CLEAR="clear",e.INSERT="insert",e.REORDER="reorder"}(ma||(ma={}));var Sa=function(e){(0,T.Z)(n,e);var t=va(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"emitPlaySync",value:function(e,t){return this.emitSync(fa.ACTION,{action:_a.PLAY,context:e,options:t}).defaultPrevented}},{key:"emitPauseSync",value:function(){return this.emitSync(fa.ACTION,{action:_a.PAUSE}).defaultPrevented}},{key:"emitResumeSync",value:function(){return this.emitSync(fa.ACTION,{action:_a.RESUME}).defaultPrevented}},{key:"emitSkipToNextSync",value:function(){return this.emitSync(fa.ACTION,{action:_a.SKIP_TO_NEXT}).defaultPrevented}},{key:"emitSkipToPreviousSync",value:function(){return this.emitSync(fa.ACTION,{action:_a.SKIP_TO_PREVIOUS}).defaultPrevented}},{key:"emitQueueActionSync",value:function(e){return this.emitSync(fa.QUEUE_ACTION,{action:e}).defaultPrevented}},{key:"emitQueueActionComplete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.emit(fa.QUEUE_ACTION_COMPLETE,{action:e,error:t})}}]),n}(Ea);function ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra={featureIdentifier:"embed",featureVersion:"3",referrerIdentifier:"other"},Ia=function(){var e=(0,k.Z)(O().mark((function e(t,n){var i,r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.canPlayEncryptedContent();case 2:if(e.sent||null!==(i=t.metadata)&&void 0!==i&&i.externalResolvedUrl){e.next=5;break}return e.abrupt("return",Ta(Ta({},t),{},{metadata:Ta(Ta({},t.metadata),{},{externalResolvedUrl:null===(r=t.metadata)||void 0===r?void 0:r.audioPreviewUrl,previewApplied:"yes"})}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Aa=function(e){return wt({page:window.location.pathname,view_uri:e.uri,action_intent:"play-preview-fallback",action_type:"warn",item_id:""})},ka=function(e,t){return t.mediaType!==dt?e:Ta(Ta({},e),{},{metadata:Ta(Ta({},e.metadata),{},{mediaType:"video"})})},La=function(e){return function(t){var n=t.getState(),i=hn(n.data.entity);return e.getEvents().addListener(fa.UPDATE,(function(e){t.dispatch(function(e){return{type:ot,state:e}}(e.data))})),e.getEvents().addListener(fa.ERROR,(function(e){var n;t.dispatch((n=e.data,{type:st,error:n}))})),function(n){return function(){var r=(0,k.Z)(O().mark((function r(o){var s,a,c,l,u,d,p,h,f,_,m,g,y,E,v;return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=t.getState(),a=s.playback,c=n(o),r.t0=o.type,r.next=r.t0===it?5:r.t0===nt?20:r.t0===rt?26:"RESUME"===r.t0?32:r.t0===tt?34:r.t0===at?36:r.t0===lt?38:r.t0===ct?40:42;break;case 5:if(null==a||!a.isPlaying){r.next=9;break}e.pause(),r.next=19;break;case 9:if(null==a||!a.isPaused){r.next=13;break}e.resume(),r.next=19;break;case 13:return d=aa(window.location),r.next=16,Ia(ka(i,o),e);case 16:p=r.sent,e.play(p,Ra,{seekTo:d?1e3*d:void 0}),(null===(l=p.metadata)||void 0===l?void 0:l.externalResolvedUrl)===(null===(u=i.metadata)||void 0===u?void 0:u.audioPreviewUrl)&&t.dispatch(Aa(p));case 19:return r.abrupt("break",43);case 20:return r.next=22,Ia(ka(i,o),e);case 22:return _=r.sent,e.play(_,Ra),(null===(h=_.metadata)||void 0===h?void 0:h.externalResolvedUrl)===(null===(f=i.metadata)||void 0===f?void 0:f.audioPreviewUrl)&&t.dispatch(Aa(_)),r.abrupt("break",43);case 26:return r.next=28,Ia(ka(i,o),e);case 28:return y=r.sent,e.play(y,Ra,{skipTo:{index:o.index}}),(null===(m=y.metadata)||void 0===m?void 0:m.externalResolvedUrl)===(null===(g=i.metadata)||void 0===g?void 0:g.audioPreviewUrl)&&t.dispatch(Aa(y)),r.abrupt("break",43);case 32:return e.resume(),r.abrupt("break",43);case 34:return e.pause(),r.abrupt("break",43);case 36:return o.time?e.seekTo(o.time):Number.isFinite(o.percentage)&&(v=(null==a?void 0:a.duration)||Number(null===(E=i.metadata)||void 0===E?void 0:E.duration),e.seekTo(o.percentage*v)),r.abrupt("break",43);case 38:return e.seekForward(15e3),r.abrupt("break",43);case 40:return e.seekBackward(15e3),r.abrupt("break",43);case 42:return r.abrupt("break",43);case 43:return r.abrupt("return",c);case 44:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}},Oa=function(e){return function(t){var n=t.getState().settings,i=n.clientId,r=n.session.isAnonymous;return e({clientId:i,isAnonymous:void 0!==r&&r}),function(e){return function(n){var i,r="episode",o=t.getState().data.entity.uri;switch(n.type){case Ur:i={page:r,type:"enter",view_uri:o,referrer:document.referrer},$s().send(na?(0,zs.t)(i):(0,Ws.v)(ta({sp_cid:Js("config",{}).correlationId},i)));break;case Pt:!function(e){$s().send(na?(0,Qs.w)(e):(0,qs.p)(ta({sp_cid:Js("config",{}).correlationId},e)))}({page:r,action_type:n.logData.action_type,view_uri:o,target_uri:n.logData.target_uri,item_id:n.logData.item_id,action_intent:n.logData.action_intent})}return e(n)}}}},Ca=JSON.parse('{"Ls":"https://api.spotify.com","XA":"https://spclient.wg.spotify.com","xM":"https://accounts.spotify.com","l3":"https://api-partner.spotify.com"}'),Pa=Ca.Ls,wa=Ca.XA,Da=Ca.l3,Na=(Ca.xM,"".concat(Pa,"/v1")),Ua=("".concat(wa,"/melody/v1"),"".concat(wa,"/radio-apollo/v3"),"".concat(wa,"/playlistextender"),"".concat(wa,"/recently-played/v3")),Ma=("".concat(wa,"/collection-view/v1"),"".concat(wa,"/sponsoredplaylist/v1"),"".concat(wa,"/social-connect/v2"),"".concat(wa,"/playlist/v2"),"".concat(wa,"/inspiredby-mix/v2"),"".concat(wa,"/ads"),"".concat(Da,"/pathfinder/v1"),"".concat(wa,"/autoplay-enabled"),"".concat(wa,"/age-verification/v1"),"".concat(wa,"/concerts"),"".concat(wa,"/presence-view"),"".concat(wa,"/presence2"),"".concat(wa,"/find-friends"),"".concat(wa,"/track-credits-view"),"".concat(wa,"/color-lyrics/v1"),"".concat(wa,"/color-lyrics/v2"),"".concat(wa,"/metadata/4"),"".concat(wa,"/user-profile-view/v3"),"".concat(wa,"/consumer-wrapped/v1"),"".concat(wa,"/consumer-only-you/v1"),"".concat(wa,"/stories-view/v1"),"".concat(wa,"/soundfinder/v1"));"".concat(wa,"/"),"".concat(wa,"/socialgraph/v2"),"".concat(wa,"/vanilla/v1/views/hub2"),"".concat(wa,"/ondemand-selector/v2"),"".concat(wa,"/allboarding");function xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Fa={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},Ba=function(e){var t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};for(var n,i,r=t[1],o=/([^:]+):([^:]+)/g,s=[],a=[];n=o.exec(r);){var c=n[1],l=n[2];c===Fa.USER&&(i=void 0,i=l.replace(/\+/g,"%20"),l=decodeURIComponent(i)),s.push(c),a.push(l)}if(0===s.length)return{type:null,id:null};var d=s.reduce((function(e,t,n){return e[s[n]]=a[n],e}),{});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:s[s.length-1],id:a[a.length-1]},d)};n(72264),n(91572),n(29876),n(73712),n(82979),n(6160),n(61849),n(25540),n(30896),n(20936),n(10040),n(5923),n(85246),n(97635),n(68774),n(8373),n(29706),n(86964),n(34630),n(75389),n(81244),n(89981),n(33807),n(62627),n(34950),n(61964),n(15610),n(62228),n(52327);var Za=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){if(e&&e(n),t)return Promise.reject(n)}};var Ya=function(e,t){(function(e,t){var n=Ba(t);return e.build().withMethod("PUT").withHost(Na).withPath("/me/shows").withQueryParameters({ids:n.id}).withEndpointIdentifier("/me/shows/?ids={showId}").withoutMarket().send()})(ue.getInstance(),t).then((function(){e.dispatch({type:St})}),Za((function(){return e.dispatch({type:"FOLLOW_SHOW_FAILURE"})})))},Ka=function(e,t){(function(e,t){var n=Ba(t);return e.build().withMethod("DELETE").withHost(Na).withPath("/me/shows").withQueryParameters({ids:n.id}).withEndpointIdentifier("/me/shows/?ids={showId}").withoutMarket().send()})(ue.getInstance(),t).then((function(){e.dispatch({type:bt})}),Za((function(){return e.dispatch({type:"REMOVE_SHOW_FAILURE"})})))},Ha=function(e){return function(t){return function(n){var i=e.getState(),r=i.data;switch(n.type){case gt:if("use deeplink"!==r.followState){var o=r.entity.show.uri;Je(i)?Ka(e,o):Ya(e,o)}}return t(n)}}},ja=function(){return"undefined"==typeof window||void 0===window.gtag||void 0===window.google_tag_manager},Va=function(){return function(e){return function(t){switch(t.type){case Pt:!function(e,t,n){ja()||window.gtag("event",t,{event_category:e,event_label:n})}(t.logData.action_type,t.logData.action_intent,t.logData.item_id)}return e(t)}}};n(41940);function Ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qa=function(){function e(t){var n=t.entityUrl,i=t.entityUri,r=t.playbackResumeTime,o=void 0===r?0:r;(0,c.Z)(this,e),(0,u.Z)(this,"entityUrl",void 0),(0,u.Z)(this,"entityUri",void 0),(0,u.Z)(this,"playbackResumeTime",void 0),this.entityUrl=n,this.entityUri=i,this.playbackResumeTime=o}return(0,l.Z)(e,[{key:"getQueryParams",value:function(){var e=new URLSearchParams(window.location.search);return Wa(Wa({},Object.fromEntries(e)),{},{t:this.playbackResumeTime})}},{key:"buildOpenLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(Wa(Wa({go:"1",utm_source:"embed_v3"},this.getQueryParams()),e)).toString();return"".concat(this.entityUrl,"?").concat(t)}},{key:"buildUniversalLinkWithFallbackToOpen",value:function(){return this.buildOpenLink()}},{key:"buildUniversalLinkWithFallbackToAppstore",value:function(){return this.buildOpenLink({fallback:"getapp",signupPrompt:1})}}]),e}(),za=function(e){return function(t){return function(n){var i,r,o,s,a,c,l=t(n),d=e.getState(),p=d.data.followState,h=d.playback,f=d.settings,_=f.entityContext,m=f.isMobile;if(n.type===gt&&"use deeplink"!==p)return l;var g=new qa({entityUrl:null!==(i=mi(d))&&void 0!==i?i:"",entityUri:gi(d),playbackResumeTime:null!==(r=gs(h))&&void 0!==r?r:0}),y=new qa({entityUrl:null!==(o=Ei(d))&&void 0!==o?o:"",entityUri:null!==(s=yi(d))&&void 0!==s?s:"",playbackResumeTime:null!==(a=gs(h))&&void 0!==a?a:0}),E="show"===_?y:g,v=(c={},(0,u.Z)(c,mt,E.buildUniversalLinkWithFallbackToOpen()),(0,u.Z)(c,vt,y.buildUniversalLinkWithFallbackToOpen()),(0,u.Z)(c,gt,y.buildUniversalLinkWithFallbackToOpen()),(0,u.Z)(c,Et,g.buildUniversalLinkWithFallbackToOpen()),(0,u.Z)(c,yt,E.buildUniversalLinkWithFallbackToAppstore()),(0,u.Z)(c,di,E.buildUniversalLinkWithFallbackToOpen()),(0,u.Z)(c,pi,y.buildUniversalLinkWithFallbackToOpen()),c)[n.type];return v&&function(e){var t=e.url,n=e.newWindow,i=void 0===n||n;window.open(t,i?"_blank":"_top")}({url:v,newWindow:!m}),l}}},Qa=function(){return function(e){return function(t){var n,i,r=e(t);switch(t.type){case hi:n=t.url,(i=document.createElement("input")).value=n,i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i),i.select(),i.setSelectionRange(0,i.value.length),document.execCommand("copy"),document.body.removeChild(i);break;case fi:window.open("https://www.spotify.com/legal/cookies-policy/","_blank")}return r}}},Xa=n(25983),$a=n(5458);n(82759),n(72410),n(58112),n(38217);"undefined"==typeof window||!window.document||window.document.createElement;n(86e3);function Ja(e,t,n){return e.build().withHost("").withPath("/get_access_token").withQueryParameters({reason:t,productType:n}).withoutMarket().withoutAuthorization().withEndpointIdentifier("/get_access_token").send()}var ec,tc=n(70912),nc=n(13617),ic=n(67519);function rc(e){var t="".concat("https://apresolve.spotify.com/","?type=").concat(ec.DEALER,"&type=").concat(ec.WEBGATE);return(0,k.Z)(O().mark((function n(){var i,r,o,s,a,c,l,u;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new AbortController,r=setTimeout((function(){return i.abort()}),e),n.prev=2,n.next=5,fetch(t,{signal:i.signal});case 5:return s=n.sent,clearTimeout(r),n.next=9,s.json();case 9:o=n.sent,n.next=17;break;case 12:if(n.prev=12,n.t0=n.catch(2),!i.signal.aborted){n.next=16;break}throw new Error("x-resolve request timed out after ".concat(e," ms"));case 16:throw n.t0;case 17:if(Array.isArray(o[ec.DEALER])&&Array.isArray(o[ec.WEBGATE])&&0!==o[ec.DEALER].length&&0!==o[ec.WEBGATE].length){n.next=19;break}throw new Error("x-resolve responded with incomplete results");case 19:return a=o[ec.DEALER][0],c=o[ec.WEBGATE][0],l="wss://".concat(a.replace(/:443$/,"")),u="https://".concat(c.replace(/:443$/,"")),n.abrupt("return",{dealer:l,webgate:u,webapi:"https://api.spotify.com/"});case 24:case"end":return n.stop()}}),n,null,[[2,12]])})))}!function(e){e.DEALER="dealer",e.WEBGATE="spclient"}(ec||(ec={}));function oc(e){return(0,k.Z)(O().mark((function t(){var n,i,r,o;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:if(null!==(n=t.sent)){t.next=5;break}return t.abrupt("return",["token_unavailable",0]);case 5:return i=n.accessToken,r=n.accessTokenExpirationTimestampMs,o=Math.floor(((r||0)-Date.now())/1e3),t.abrupt("return",[i,o]);case 8:case"end":return t.stop()}}),t)})))}function sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cc={disconnectBeforeUnload:!0,reconnectionRetries:3,requestMode:"fetch"};function lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dc=function(){function e(){(0,c.Z)(this,e),(0,u.Z)(this,"name","allow-offline-requests"),this.onBeforeProcessRequest=this.onBeforeProcessRequest.bind(this)}return(0,l.Z)(e,[{key:"onBeforeProcessRequest",value:function(e){var t,n,i=e.data;null!==(t=i.options)&&void 0!==t&&null!==(n=t.metadata)&&void 0!==n&&n.noRequestTransform||navigator.onLine||(i.options=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===e?t:uc(uc({},e),t)}(i.options,{allowOffline:!0,authorize:!1}))}},{key:"attach",value:function(e,t){t.on(tc.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this.onBeforeProcessRequest)}},{key:"detach",value:function(e,t){t.removeListener(tc.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this.onBeforeProcessRequest)}}]),e}();function pc(){return new dc}var hc=n(51516),fc=n.n(hc),_c=n(61796),mc=function(){function e(t){var n=this;(0,c.Z)(this,e),(0,u.Z)(this,"transport",void 0),(0,u.Z)(this,"enabled",void 0),(0,u.Z)(this,"name","content-access"),(0,u.Z)(this,"cat",null),(0,u.Z)(this,"catPromise",null),(0,u.Z)(this,"api",void 0),this.transport=t,this.enabled="1"===fc().getCookie("sp_has_cart"),this.api={enable:function(){return n.enable()},isEnabled:function(){return n.isEnabled()}},this.enable=this.enable.bind(this),this._handleOnAuthenticated=this._handleOnAuthenticated.bind(this),this._ensureCat=this._ensureCat.bind(this),this._processRequest=this._processRequest.bind(this),this._getCat=this._getCat.bind(this)}return(0,l.Z)(e,[{key:"enable",value:function(){this.enabled||(this.enabled=!0,this._ensureCat())}},{key:"isEnabled",value:function(){return this.enabled}},{key:"_handleOnAuthenticated",value:function(){this.enabled&&this._ensureCat()}},{key:"_ensureCat",value:function(){this.cat||this._getCat()}},{key:"_processRequest",value:function(t){var n=t.data,i=n.uri;this.enabled&&((!this.cat||this.cat&&this.cat.expiresAtMs-6e4<Date.now())&&this._getCat(),this.cat&&e._include(i)&&(n.options||(n.options={}),n.options.headers||(n.options.headers={}),n.options.headers["content-access-token"]=this.cat.contentAccessToken))}},{key:"_getCat",value:function(){var e=this;!this.catPromise&&this.transport.isAuthenticated()&&(this.catPromise=ue.getInstance().build().withHost("https://shelter.spotify.com").withPath("/v1/token").withoutMarket().withoutAuthorization().withEndpointIdentifier("shelter.spotify.com/v1/token").withCredentials().send().then((function(t){200===t.status&&(e.cat=t.body,e.catPromise=null)})).catch((function(){})))}},{key:"attach",value:function(e,t){t.on(tc.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this._processRequest),e.on(_c.j.AUTHENTICATED,this._handleOnAuthenticated)}},{key:"detach",value:function(e,t){t.removeListener(tc.PluginEvent.TRANSPORT_BEFORE_PROCESS_REQUEST,this._processRequest),e.removeListener(_c.j.AUTHENTICATED,this._handleOnAuthenticated)}}],[{key:"_include",value:function(e){return e.indexOf("@webgate")>-1&&!e.startsWith("@webgate/gabo")||e.indexOf("@webapi")>-1||e.startsWith("https://api.spotify.com/")||e.startsWith("https://api-partner.spotify.com/")||e.indexOf("spclient.wg.spotify.com")>-1}}]),e}();function gc(e){return new mc(e)}n(39129);var yc,Ec;n(23630);!function(e){e.Web="Web",e.PWA="PWA",e.Desktop="Desktop"}(yc||(yc={})),function(e){e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other"}(Ec||(Ec={}));n(48410);var vc,Sc=n(99613),bc=n(36171);!function(e){e.USER_INFO_REQUEST_EMPTY_RESPONSE="USER_INFO_REQUEST_EMPTY_RESPONSE",e.USER_INFO_REQUEST_FAILED_WITH_STATUS="USER_INFO_REQUEST_FAILED_WITH_STATUS",e.HARMONY_NO_TRACKS_LOADED="HARMONY_NO_TRACKS_LOADED",e.HARMONY_OPERATION_FORBIDDEN="HARMONY_OPERATION_FORBIDDEN",e.HARMONY_LOCAL_PLAYER_DISABLED="HARMONY_LOCAL_PLAYER_DISABLED",e.HARMONY_INVALID_DESCRIPTOR_ID="HARMONY_INVALID_DESCRIPTOR_ID",e.CONNECTAPI_CLIENT_INVALID_ARGUMENTS="CONNECTAPI_CLIENT_INVALID_ARGUMENTS",e.CONNECTAPI_CLIENT_MISSING_DEVICE_ID="CONNECTAPI_CLIENT_MISSING_DEVICE_ID",e.CONNECTAPI_CLIENT_NO_CONNECTION_ID="CONNECT_API_CLIENT_NO_CONNECTION_ID",e.CONNECTAPI_CLIENT_NO_DEVICE="CONNECTAPI_CLIENT_NO_DEVICE",e.CONNECTAPI_CLIENT_NO_SESSION_ID="CONNECTAPI_CLIENT_NO_SESSION_ID",e.CONNECTAPI_CLIENT_NO_STATE="CONNECTAPI_CLIENT_NO_STATE",e.CONNECTAPI_CLIENT_INVALID_POSITION="CONNECT_API_CLIENT_INVALID_POSITION",e.CONNECTAPI_CLIENT_INVALID_VOLUME="CONNECT_API_CLIENT_INVALID_VOLUME",e.CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED="CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED",e.CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS="CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS",e.CP_NO_DEVICE_DESCRIPTOR="CP_NO_DEVICE_DESCRIPTOR",e.CP_NO_CONNECTION_ID="CP_NO_CONNECTION_ID",e.CP_REGISTRATION_FAILED_WITH_STATUS="CP_REGISTRATION_FAILED_WITH_STATUS",e.CP_REQUEST_FAILED_WITH_STATUS="CP_REQUEST_FAILED_WITH_STATUS",e.CP_NO_DEVICE_ID="CP_NO_DEVICE_ID",e.CP_NO_COMMAND_ID="CP_NO_COMMAND_ID",e.CP_NO_RESPONSE_BODY="CP_NO_RESPONSE_BODY",e.CP_NO_TRACKING_DATA="CP_NO_TRACKING_DATA",e.CP_INVALID_STATE="CP_INVALID_STATE",e.QUEUE_MANAGER_NO_STATE="QUEUE_MANAGER_NO_STATE",e.QUEUE_OPERATION_STALE_REVISION="QUEUE_OPERATION_STALE_REVISION",e.TP_NO_RESPONSE_BODY="TP_NO_RESPONSE_BODY",e.TP_REGISTRATION_FAILED_NON_PREMIUM="TP_REGISTRATION_FAILED_NON_PREMIUM",e.TP_REGISTRATION_FAILED_WITH_STATUS="TP_REGISTRATION_FAILED_WITH_STATUS",e.TP_MAX_SUBSCRIPTIONS_REACHED="TP_MAX_SUBSCRIPTIONS_REACHED",e.TP_UPDATE_REQUEST_EMPTY_RESPONSE="TP_UPDATE_REQUEST_EMPTY_RESPONSE",e.TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS="TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS",e.TP_UNKNOWN_COMMAND="TP_UNKNOWN_COMMAND",e.TP_CANNOT_CREATE_STATE_REF="TP_CANNOT_CREATE_STATE_REF",e.TP_MISSING_INITIAL_STATE="TP_MISSING_INITIAL_STATE",e.TP_INVALID_STATE_REFERENCE="TP_INVALID_STATE_REFERENCE",e.TP_CONFLICT_REQUEST_FAILED_WITH_STATUS="TP_CONFLICT_REQUEST_FAILED_WITH_STATUS"}(vc||(vc={}));n(29273);var Tc,Rc,Ic;n(62279),n(55847);function Ac(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}!function(e){e.AUTHENTICATED="authenticated",e.AUTHENTICATION_ERROR="authentication_error",e.AUTOPLAY_FAILED="autoplay_failed",e.BEFORE_DISCONNECT="before_disconnect",e.BEFORE_VOLUME_CHANGE="before_volume_change",e.BUFFER_STALLED="stalled",e.BUFFERING_END="buffering_end",e.BUFFERING_START="buffering_start",e.CONNECTED="connected",e.CONNECTION_ERROR="connection_error",e.DEVICES_CHANGED="devices_changed",e.DEVICE_DEACTIVATED="device_deactivated",e.DEVICE_DESCRIPTOR_CHANGED="descriptor_changed",e.DISCONNECTED="disconnected",e.DURATION_CHANGED="duration_changed",e.ERROR="error",e.LAST_ACTIVE_DEVICE_INFO_CHANGED="last_active_device_info_changed",e.LOCAL_CONTEXT_ENDED="local_context_ended",e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.LOCAL_PLAYER_ENABLED="local_player_enabled",e.LOCAL_PLAYER_LOGGED_OUT="local_player_logged_out",e.LOGGED_OUT="logged_out",e.MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.MAX_SUBSCRIPTIONS_REACHED="max_subscriptions_reached",e.PLAYBACK_CAPPED="playback_capped",e.PLAYER_INITIALIZATION_DONE="player_initialization_done",e.PLAYER_INITIALIZATION_FAILED="player_initialization_failed",e.PRODUCT_STATE_CHANGED="product_state_changed",e.PROGRESS="progress",e.PLAYER_QUEUE_CHANGED="player_queue_changed",e.RECONNECTED="reconnected",e.RECONNECTING="reconnecting",e.REMOTE_OBSERVER_DISABLED="remote_observer_disabled",e.REMOTE_OBSERVER_ENABLED="remote_observer_enabled",e.SERVICE_REGISTRATION_ERROR="service_registration_error",e.STATE_CHANGED="state_changed",e.STOPPED_ON_BACKGROUND="stopped_on_background",e.TRACK_ENDED="track_ended",e.UNRECOVERABLE_FAILURE="unrecoverable_failure",e.VIDEO_ELEMENT_APPENDED="video_element_appended",e.VIDEO_ELEMENT_REMOVED="video_element_removed",e.VOLUME_CHANGED="volume_changed",e.DISPLAYED_CUES_CHANGED="displayed_cues_changed"}(Tc||(Tc={})),function(e){e.CONNECT_API="connect-api",e.HARMONY="harmony",e.PLAYBACK="playback",e.TRACK_PLAYBACK="track-playback",e.TRANSPORT="transport"}(Rc||(Rc={})),function(e){e[e.OFF=0]="OFF",e[e.CONTEXT=1]="CONTEXT",e[e.TRACK=2]="TRACK"}(Ic||(Ic={}));Error;n(92189),n(91047);function kc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}Error;n(71438),n(84170);var Lc,Oc=n(9849);n(58592);!function(e){e.LOGGING_REQUEST_FAILED="LOGGING_REQUEST_FAILED"}(Lc||(Lc={}));Error;var Cc,Pc;!function(e){e.FILE_URLS_MP3="file_urls_mp3",e.FILE_URLS_EXTERNAL="file_urls_external",e.FILE_IDS_MP4="file_ids_mp4",e.FILE_IDS_MP4_DUAL="file_ids_mp4_dual",e.FILE_IDS_CBCS="file_ids_mp4_cbcs",e.FILE_IDS_MP4FLAC="file_ids_mp4flac",e.MANIFEST_IDS_VIDEO="manifest_ids_video"}(Cc||(Cc={})),function(e){e.UNKNOWN="unknown",e.COMPUTER="computer",e.TABLET="tablet",e.SMARTPHONE="smartphone",e.SPEAKER="speaker",e.TV="tv",e.AVR="avr",e.STB="stb",e.AUDIO_DONGLE="audio_dongle",e.GAME_CONSOLE="game_console",e.CAST_VIDEO="cast_video",e.CAST_AUDIO="cast_audio",e.AUTOMOBILE="automobile",e.SMARTWATCH="smartwatch",e.CHROMEBOOK="chromebook"}(Pc||(Pc={}));var wc=n(41165);function Dc(){var e=new Uint8Array(16);return crypto.getRandomValues(e),wc.Base62.toHex(e.join(""),40).slice(0,40)}function Nc(){for(var e=new Array(27),t=e.length;t--;)e[t]=Math.floor(8*Math.random());return wc.Base62.toHex(e.join(""),40)}"undefined"!=typeof crypto&&crypto.getRandomValues;Oc.P.forTag("harmonyclient");var Uc,Mc=n(9064);n(39961);function xc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}!function(e){e.TRACK_DATA_FINALIZED="track_data_finalized",e.DEREGISTER="deregister",e.REGISTER="register",e.BEFORE_TRACK_LOAD="before_track_load",e.CAPPED="capped",e.ERROR="error",e.PAUSE="pause",e.RESUME="resume",e.PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.POSITION_CHANGED="position_changed",e.STARTED_PLAYING="started_playing",e.PROGRESS="progress",e.PING="ping",e.MODIFY_CURRENT_STATE="modify_current_state",e.STATE_CLEAR="state_clear"}(Uc||(Uc={}));Error;Oc.P.forTag("tpapiclient"),Oc.P.forTag("tpapiclient.endsong"),Oc.P.forTag("tpapiclient.endsongs");var Fc;n(51573);!function(e){e.ON="ON",e.OFF="OFF",e.NONE="NONE"}(Fc||(Fc={}));var Bc;Oc.P.forTag("tp.stream.PlaybackStateObserver");Bc={},(0,u.Z)(Bc,Cc.FILE_URLS_MP3,Mc.OU.MP3),(0,u.Z)(Bc,Cc.FILE_URLS_EXTERNAL,Mc.OU.MP3),(0,u.Z)(Bc,Cc.FILE_IDS_MP4,Mc.OU.MP4),(0,u.Z)(Bc,Cc.FILE_IDS_MP4_DUAL,Mc.OU.MP4),(0,u.Z)(Bc,Cc.FILE_IDS_CBCS,Mc.OU.MP4_CBCS),(0,u.Z)(Bc,Cc.FILE_IDS_MP4FLAC,Mc.OU.MP4_FLAC),(0,u.Z)(Bc,Cc.MANIFEST_IDS_VIDEO,Mc.OU.MANIFEST_ID);var Zc;n(49294),n(60190);function Yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}!function(e){e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.STOPPED="stopped",e.REMOTE_ACTIVATED="remote_activated",e.UNKNOWN="unknown"}(Zc||(Zc={}));Error,n(69368);Oc.P.forTag("harmony.controller"),Mc.cJ.UNKNOWN,Mc.cJ.DEFAULT,Mc.cJ.LOW,Mc.cJ.NORMAL,Mc.cJ.NORMAL,Mc.cJ.HIGH,Mc.cJ.VERY_HIGH,Mc.cJ.HIFI,Fc.ON,Fc.OFF,Fc.NONE;n(89202);var Kc,Hc,jc,Vc;Object.assign(Object.assign(Object.assign({},vc),bc.J),Sc.D);!function(e){e.CONTEXT_DESCRIPTION="context_description",e.FILTERING_PREDICATE="filtering.predicate",e.SORTING_CRITERIA="sorting.criteria",e.LIST_UTIL_FILTER="list_util_filter",e.LIST_UTIL_SORT="list_util_sort"}(Kc||(Kc={})),function(e){e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.EPISODE="episode",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LOCAL="local"}(Hc||(Hc={})),function(e){e[e.NOT_PLAYING=0]="NOT_PLAYING",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED"}(jc||(jc={})),function(e){e[e.REPEAT_NONE=0]="REPEAT_NONE",e[e.REPEAT_CONTEXT=1]="REPEAT_CONTEXT",e[e.REPEAT_TRACK=2]="REPEAT_TRACK"}(Vc||(Vc={}));var Gc,Wc,qc,zc=["not_playing_locally","not_playing_context","not_playing_track","no_prev_track","no_next_track","no_specific_track","already_paused","not_paused","context_player_disallow","mft_disallow","ad_disallow","protocol_limitations","unknown","already_playing","throttled","endless_context"];!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.VERY_HIGH=4]="VERY_HIGH",e[e.HIFI=5]="HIFI"}(Gc||(Gc={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.BEST_MATCHING=1]="BEST_MATCHING",e[e.BACKEND_ADVISED=2]="BACKEND_ADVISED",e[e.OFFLINED_FILE=3]="OFFLINED_FILE",e[e.CACHED_FILE=4]="CACHED_FILE",e[e.LOCAL_FILE=5]="LOCAL_FILE"}(Wc||(Wc={})),function(e){e[e.NONE=0]="NONE",e[e.OFF=1]="OFF",e[e.ON=2]="ON"}(qc||(qc={}));var Qc;n(87816),n(85221),n(61514);function Xc(e,t){var n=t.shuffle;return(void 0!==n||!Io().isShow(e.uri))&&n}function $c(e,t){var n=t.repeat;if(void 0===n&&Io().isShow(e.uri))return Ic.OFF;switch(n){case Vc.REPEAT_NONE:return Ic.OFF;case Vc.REPEAT_CONTEXT:return Ic.CONTEXT;case Vc.REPEAT_TRACK:return Ic.TRACK;default:return}}function Jc(e){return{featureIdentifier:e.featureIdentifier,featureVersion:e.featureVersion,referrerIdentifier:e.referrerIdentifier,viewURI:e.viewURI,externalReferrer:e.externalReferrer}}function el(e,t,n){var i,r,o,s,a;return{contextURI:e.uri,trackUID:null===(i=n.skipTo)||void 0===i?void 0:i.uid,trackURI:null===(r=n.skipTo)||void 0===r?void 0:r.uri,index:null===(o=n.skipTo)||void 0===o?void 0:o.index,initialOffset:n.seekTo,shuffle:Xc(e,n),repeatMode:$c(e,n),filter:null===(s=e.metadata)||void 0===s?void 0:s[Kc.FILTERING_PREDICATE],sort:null===(a=e.metadata)||void 0===a?void 0:a[Kc.SORTING_CRITERIA],playOrigin:Jc(t)}}var tl=new RegExp(String.raw(Qc||(Qc=(0,Zt.Z)(["^q[0-9]+$"]))));function nl(e){var t,n=!!e.uid&&tl.test(e.uid)?"queue":null;return Io().isTrack(e.uri)||Io().isLocalTrack(e.uri)?function(e,t){var n,i,r,o,s,a,c,l,u,d,p,h,f;return{type:Hc.TRACK,uri:null!==(n=t.linked_from)&&void 0!==n&&n.uri?t.linked_from.uri:t.uri,uid:null!==(i=t.uid)&&void 0!==i?i:null,name:null!==(r=t.name)&&void 0!==r?r:"",mediaType:null!==(o=t.track_type)&&void 0!==o?o:"audio",duration:{milliseconds:null!==(s=t.duration_ms)&&void 0!==s?s:0},album:{type:Hc.ALBUM,uri:null!==(a=null===(c=t.album)||void 0===c?void 0:c.uri)&&void 0!==a?a:"",name:null!==(l=null===(u=t.album)||void 0===u?void 0:u.name)&&void 0!==l?l:"",images:null!==(d=null===(p=t.album)||void 0===p?void 0:p.images)&&void 0!==d?d:[]},artists:null!==(h=null===(f=t.artists)||void 0===f?void 0:f.map((function(e){var t=e.uri,n=e.name;return{type:Hc.ARTIST,uri:t,name:n||""}})))&&void 0!==h?h:[],isLocal:Io().isLocalTrack(t.uri),provider:e,get images(){return this.album.images}}}(n,e):Io().isEpisode(e.uri)?function(e,t){var n,i,r,o,s,a,c,l,u,d;return{type:Hc.EPISODE,uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:null,name:null!==(i=t.name)&&void 0!==i?i:"",mediaType:null!==(r=t.track_type)&&void 0!==r?r:"audio",duration:{milliseconds:null!==(o=t.duration_ms)&&void 0!==o?o:0},show:{type:Hc.SHOW,uri:null!==(s=null===(a=t.album)||void 0===a?void 0:a.uri)&&void 0!==s?s:"",name:null!==(c=null===(l=t.album)||void 0===l?void 0:l.name)&&void 0!==c?c:"",images:null!==(u=null===(d=t.album)||void 0===d?void 0:d.images)&&void 0!==u?u:[]},provider:e,get images(){return this.show.images}}}(n,e):Io().isAd(e.uri)?function(e,t){var n,i,r,o,s,a,c,l,u,d;return{type:Hc.AD,uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:null,title:null!==(i=t.name)&&void 0!==i?i:null,advertiser:null!==(r=null===(o=t.artists)||void 0===o?void 0:o[0].name)&&void 0!==r?r:null,url:null!==(s=null===(a=t.artists)||void 0===a?void 0:a[0].uri)&&void 0!==s?s:null,mediaType:null!==(c=t.track_type)&&void 0!==c?c:"audio",duration:{milliseconds:null!==(l=t.duration_ms)&&void 0!==l?l:0},images:null!==(u=null===(d=t.album)||void 0===d?void 0:d.images)&&void 0!==u?u:[],isPodcastAd:!1,isSkippableAd:!1,isTestAd:!1,provider:e}}(n,e):{type:Hc.UNKNOWN,uri:e.uri,uid:null!==(t=e.uid)&&void 0!==t?t:null,provider:n,images:null}}function il(e){return null===e?null:nl(e)}function rl(e){switch(e){default:case Ic.OFF:return Vc.REPEAT_NONE;case Ic.CONTEXT:return Vc.REPEAT_CONTEXT;case Ic.TRACK:return Vc.REPEAT_TRACK}}function ol(e){switch(e){case Mc.cJ.DEFAULT:case Mc.cJ.UNKNOWN:case void 0:return{bitrateLevel:Gc.UNKNOWN};case Mc.cJ.LOW:return{bitrateLevel:Gc.LOW};case Mc.cJ.NORMAL:return{bitrateLevel:Gc.NORMAL};case Mc.cJ.HIGH:return{bitrateLevel:Gc.HIGH};case Mc.cJ.VERY_HIGH:return{bitrateLevel:Gc.VERY_HIGH};case Mc.cJ.HIFI:return{bitrateLevel:Gc.HIFI};default:return function(e,t){throw new Error(null!=t?t:"Unexpectedly hit unreachable code! Unhandled discriminated union member: ".concat(JSON.stringify(e)))}(e)}}function sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return zc.includes(e)?e:"unknown"}))}function al(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var cl=function(e){(0,T.Z)(n,e);var t=al(n);function n(e){var i;(0,c.Z)(this,n),(i=t.call(this))._harmony=e;var r=null;return i._harmony.addListener(Tc.STATE_CHANGED,(function(e){var t=e.data.state;i.emit(fa.UPDATE,function(e){var t;if(null===e)return null;var n,i,r,o,s,a,c,l,u,d,p,h,f,_,m,g,y,E=null!==e.context.uri,v=null!==e.track_window.current_track;return{timestamp:e.timestamp,context:{uri:null!==(t=e.context.uri)&&void 0!==t?t:"",metadata:e.context.metadata},index:{pageURI:null,pageIndex:null,itemIndex:null},item:il(e.track_window.current_track),shuffle:e.shuffle,repeat:rl(e.repeat_mode),speed:e.paused?0:1,playbackQuality:ol(e.playback_quality),positionAsOfTimestamp:e.position,duration:e.duration,restrictions:(n=e.restrictions,i=n.disallow_pausing_reasons,r=void 0===i?[]:i,o=n.disallow_resuming_reasons,s=void 0===o?[]:o,a=n.disallow_seeking_reasons,c=void 0===a?[]:a,l=n.disallow_skipping_prev_reasons,u=void 0===l?[]:l,d=n.disallow_skipping_next_reasons,p=void 0===d?[]:d,h=n.disallow_toggling_repeat_context_reasons,f=void 0===h?[]:h,_=n.disallow_toggling_repeat_track_reasons,m=void 0===_?[]:_,g=n.disallow_toggling_shuffle_reasons,y=void 0===g?[]:g,{canPause:0===r.length,canResume:0===s.length,canSeek:0===c.length,canSkipPrevious:0===u.length,canSkipNext:0===p.length,canToggleRepeatContext:0===f.length,canToggleRepeatTrack:0===m.length,canToggleShuffle:0===y.length,disallowPausingReasons:sl(r),disallowResumingReasons:sl(s),disallowSeekingReasons:sl(c),disallowSkippingPreviousReasons:sl(u),disallowSkippingNextReasons:sl(p),disallowTogglingRepeatContextReasons:sl(f),disallowTogglingRepeatTrackReasons:sl(m),disallowTogglingShuffleReasons:sl(y)}),isPlaying:E&&v,isPaused:e.paused,isBuffering:!1,previousItems:e.track_window.previous_tracks.map(nl),nextItems:e.track_window.next_tracks.map(nl)}}(t))})),i._harmony.addListener(Tc.VOLUME_CHANGED,(function(e){var t=e.data.volume;i.emit(fa.VOLUME,t)})),i._harmony.addListener(Tc.LAST_ACTIVE_DEVICE_INFO_CHANGED,(function(e){var t=e.data.deviceInfo;if(null!==t){var n=r!==t.volume;n&&!t.local&&(r=t.volume,i.emit(fa.VOLUME,r)),null!==r&&n&&t.local&&(r=null,i.emit(fa.VOLUME,t.volume))}})),i}return n}(Sa);function ll(e,t,n){return Math.min(Math.max(e,t),n)}function ul(e,t,n,i,r,o){var s=t.find((function(e){return i(n.after||n.before,e)}));if(!s)return t;var a=[];e.forEach((function(e){var n=t.find((function(t){return i(e,t)}));n&&a.push(n)}));var c=t.filter((function(e){return!a.includes(e)})),l=a.map((function(e){return r(s)?o(e):e})),u=s?c.indexOf(s):0;return n.after?c.splice.apply(c,[u+1,0].concat((0,Ho.Z)(l))):c.splice.apply(c,[u,0].concat((0,Ho.Z)(l))),c}function dl(e,t,n,i,r,o){var s=t.find((function(e){return i(n.after||n.before,e)}));if(!s)return t;var a=e.map((function(e){return o(e,r(s))})),c=t.indexOf(s);return n.after?t.splice.apply(t,[c+1,0].concat((0,Ho.Z)(a))):t.splice.apply(t,[c,0].concat((0,Ho.Z)(a))),t}function pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fl,_l=function(){function e(t){var n=this;(0,c.Z)(this,e),this._queueManager=t,(0,u.Z)(this,"_state",null),this._queueManager.addListener(Tc.PLAYER_QUEUE_CHANGED,(function(e){n._state=e.data.internalPlayerQueue}))}var t,n,i,r,o;return(0,l.Z)(e,[{key:"isSameItem",value:function(e,t){return e.uid&&t.uid?e.uid===t.uid:e.uri===t.uri}},{key:"isQueued",value:function(e){return"queue"===e.provider}},{key:"markAsQueued",value:function(e){return hl(hl({},e),{},{provider:"queue",metadata:hl(hl({},e.metadata),{},{is_queued:"true"})})}},{key:"createQueueItem",value:function(e,t){return{uri:e.uri,type:"track",provider:t?"queue":"context",metadata:{is_queued:t.toString()}}}},{key:"addToQueue",value:(o=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._queueManager.addToQueue(t.map((function(e){return e.uri})));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"removeFromQueue",value:(r=(0,k.Z)(O().mark((function e(t){var n,i=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._state){e.next=2;break}return e.abrupt("return");case 2:this._queueManager.setInternalPlayerQueue({revision:this._state.revision,next_items:null===(n=this._state.next_items)||void 0===n?void 0:n.filter((function(e){return!t.some((function(t){return i.isSameItem(t,e)}))})),previous_items:this._state.previous_items});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"clearQueue",value:(i=(0,k.Z)(O().mark((function e(){var t=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._state){e.next=2;break}return e.abrupt("return");case 2:this._queueManager.setInternalPlayerQueue({revision:this._state.revision,next_items:this._state.next_items.filter((function(e){return!t.isQueued(e)})),previous_items:this._state.previous_items});case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"reorderQueue",value:(n=(0,k.Z)(O().mark((function e(t,n){var i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._state){e.next=2;break}return e.abrupt("return");case 2:i=(0,Ho.Z)(this._state.next_items),this._queueManager.setInternalPlayerQueue({revision:this._state.revision,next_items:ul(t,i,n,this.isSameItem,this.isQueued,this.markAsQueued),previous_items:this._state.previous_items});case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"insertIntoQueue",value:(t=(0,k.Z)(O().mark((function e(t,n){var i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._state){e.next=2;break}return e.abrupt("return");case 2:i=(0,Ho.Z)(this._state.next_items),this._queueManager.setInternalPlayerQueue({revision:this._state.revision,next_items:dl(t,i,n,this.isSameItem,this.isQueued,this.createQueueItem),previous_items:this._state.previous_items});case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),ml=.0625,gl=function(){function e(t,n){var i=this;(0,c.Z)(this,e),this._harmony=t,this._defaultFeatureVersion=n,(0,u.Z)(this,"_events",void 0),(0,u.Z)(this,"referrer",void 0),(0,u.Z)(this,"_state",null),(0,u.Z)(this,"_volume",null),(0,u.Z)(this,"_queue",void 0),this._events=new cl(this._harmony),this._events.addListener(fa.UPDATE,(function(e){var t=e.data;i._state=t})),this._events.addListener(fa.VOLUME,(function(e){var t=e.data;i._volume=t})),this._queue=new _l(this._harmony.getQueueManager()),this.referrer="other"}var t,n,i,r,o,s,a,d,p,h,f,_,m,g,y,E,v,S,b,T,R;return(0,l.Z)(e,[{key:"setDefaultFeatureVersion",value:function(e){void 0===e.featureVersion&&(e.featureVersion=this._defaultFeatureVersion)}},{key:"getCapabilities",value:function(){return{canChangeSpeed:!1,canChangeVolume:!0,canPlayMultipleContextPages:!1}}},{key:"getEvents",value:function(){return this._events}},{key:"getState",value:function(){return this._state}},{key:"getReferrer",value:function(){return this.referrer}},{key:"setReferrer",value:function(e){this.referrer=e}},{key:"play",value:(R=(0,k.Z)(O().mark((function e(t,n){var i,r,o,s=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=s.length>2&&void 0!==s[2]?s[2]:{},!this._events.emitPlaySync(t,i)){e.next=3;break}return e.abrupt("return");case 3:if(this.setDefaultFeatureVersion(n),!t.pages){e.next=10;break}if(1===t.pages.length){e.next=7;break}throw new Error("Harmony only supports exactly one context page!");case 7:this._harmony.playTracks(null!==(r=null===(o=t.pages[0].items)||void 0===o?void 0:o.map((function(e){var t=e.uri,n=e.uid;return{uri:t,uid:null!=n?n:void 0}})))&&void 0!==r?r:[],null,el(t,n,i)),e.next=11;break;case 10:this._harmony.playURI(t.uri,null,el(t,n,i));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return R.apply(this,arguments)})},{key:"pause",value:(T=(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitPauseSync()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._harmony.pause();case 4:case"end":return e.stop()}}),e,this)}))),function(){return T.apply(this,arguments)})},{key:"resume",value:(b=(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitResumeSync()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._harmony.resume();case 4:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"skipToNext",value:(S=(0,k.Z)(O().mark((function e(t){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitSkipToNextSync()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._harmony.nextTrack(null,{track:t?{type:"track",uri:t.uri,uid:null!==(n=t.uid)&&void 0!==n?n:void 0}:void 0});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"skipToPrevious",value:(v=(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitSkipToPreviousSync()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._harmony.smartPreviousTrack();case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"seekTo",value:(E=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.seek(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"seekForward",value:(y=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.seekForward(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"seekBackward",value:(g=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.seekBackward(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"setShuffle",value:(m=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.setShuffle(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"setRepeat",value:(_=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===Vc.REPEAT_NONE?3:e.t0===Vc.REPEAT_CONTEXT?6:e.t0===Vc.REPEAT_TRACK?9:12;break;case 3:return e.next=5,this._harmony.setRepeatMode(Ic.OFF);case 5:return e.abrupt("break",13);case 6:return e.next=8,this._harmony.setRepeatMode(Ic.CONTEXT);case 8:return e.abrupt("break",13);case 9:return e.next=11,this._harmony.setRepeatMode(Ic.TRACK);case 11:case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"setSpeed",value:(f=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Changing playback speed not possible with Harmony.");case 1:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})},{key:"getVolume",value:(h=(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.getVolume();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"setVolume",value:(p=(0,k.Z)(O().mark((function e(t){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ll(t,0,1),e.next=3,this._harmony.setVolume(n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"increaseVolume",value:(d=(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this._volume){e.next=3;break}return e.next=3,this.setVolume(this._volume+ml);case 3:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"decreaseVolume",value:(a=(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this._volume){e.next=3;break}return e.next=3,this.setVolume(this._volume-ml);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"canPlayEncryptedContent",value:(s=(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._harmony.getMediaConfig();case 2:return e.t0=e.sent.keysystem,e.t1=void 0,e.abrupt("return",e.t0!==e.t1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"addToQueue",value:(o=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ma.ADD)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.addToQueue(t);case 5:this._events.emitQueueActionComplete(ma.ADD),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ma.ADD,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return o.apply(this,arguments)})},{key:"reorderQueue",value:(r=(0,k.Z)(O().mark((function e(t,n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ma.REORDER)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.reorderQueue(t,n);case 5:this._events.emitQueueActionComplete(ma.REORDER),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ma.REORDER,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e,t){return r.apply(this,arguments)})},{key:"insertIntoQueue",value:(i=(0,k.Z)(O().mark((function e(t,n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ma.INSERT)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.insertIntoQueue(t,n);case 5:this._events.emitQueueActionComplete(ma.INSERT),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ma.INSERT,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e,t){return i.apply(this,arguments)})},{key:"removeFromQueue",value:(n=(0,k.Z)(O().mark((function e(t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ma.REMOVE)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.removeFromQueue(t);case 5:this._events.emitQueueActionComplete(ma.REMOVE),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ma.REMOVE,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return n.apply(this,arguments)})},{key:"clearQueue",value:(t=(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._events.emitQueueActionSync(ma.CLEAR)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this._queue.clearQueue();case 5:this._events.emitQueueActionComplete(ma.CLEAR),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),this._events.emitQueueActionComplete(ma.CLEAR,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return t.apply(this,arguments)})}]),e}();n(61484),n(53984);!function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.MIXED=0]="MIXED",e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO"}(fl||(fl={}));n(71444);var yl,El,vl;!function(e){e.ALBUMS="albums",e.ARTISTS="artists",e.SHOWS="shows",e.TRACKS="tracks",e.EPISODES="episodes"}(yl||(yl={})),function(e){e.ADD="add",e.REMOVE="remove"}(El||(El={})),function(e){e.UPDATE="update",e.UPDATE_ITEM="update_item",e.OPERATION="operation",e.OPERATION_COMPLETE="operation_complete"}(vl||(vl={}));function Sl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}Map;var bl,Tl,Rl,Il;n(61370),n(95699);!function(e){e.NAME="NAME",e.ADDED_AT="ADDED_AT",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.RELEVANCE="RELEVANCE",e.AVAILABLE_OFFLINE="AVAILABLE_OFFLINE"}(bl||(bl={})),function(e){e.ASC="ASC",e.DESC="DESC"}(Tl||(Tl={})),function(e){e.TEXT="TEXT"}(Rl||(Rl={})),function(e){e.CONTAINS="CONTAINS"}(Il||(Il={}));n(634),n(24216);n(15359),n(24303);var Al;!function(e){e.UPDATE="update",e.UPDATE_ITEM="update_item"}(Al||(Al={}));var kl,Ll;new RegExp(String.raw(kl||(kl=(0,Zt.Z)(["hm://playlist/v2/user/.+/rootlist"])))),new RegExp(String.raw(Ll||(Ll=(0,Zt.Z)(["hm://playlist/v2/playlist/.+"]))));n(99773);function Ol(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}var Cl=864e5,Pl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,c.Z)(this,e),this._ttl=t,(0,u.Z)(this,"_cache",new Map),null!==t&&(t<1||t>Cl))throw new Error("TTL should be between ".concat(1," (1 ms) and ").concat(Cl," (1 day)."))}return(0,l.Z)(e,[{key:"isExpired",value:function(e){return null!==e.expiry&&e.expiry<Date.now()}},{key:"getExpiry",value:function(){return null!==this._ttl?Date.now()+this._ttl:null}},{key:"entries",value:function(){return this._cache.entries()}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e){var t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}},{key:"set",value:function(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}},{key:"create",value:function(e,t){var n=this.get(e);if(void 0===n){var i=t();return this.set(e,i),i}return n}},{key:"delete",value:function(e){this._cache.delete(e)}},{key:"clear",value:function(){this._cache.clear()}},{key:"cleanup",value:function(){var e=this;this._cache.forEach((function(t,n){e.isExpired(t)&&e._cache.delete(n)}))}}]),e}(),wl=function(e){(0,T.Z)(i,e);var t,n=Ol(i);function i(){return(0,c.Z)(this,i),n.call(this,null)}return(0,l.Z)(i,[{key:"deleteOnResolve",value:(t=(0,k.Z)(O().mark((function e(t,n){var i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return i=e.sent,this.delete(t),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"create",value:function(e,t){var n=(0,b.Z)((0,I.Z)(i.prototype),"create",this).call(this,e,t);return this.deleteOnResolve(e,n)}},{key:"set",value:function(e,t){(0,b.Z)((0,I.Z)(i.prototype),"set",this).call(this,e,this.deleteOnResolve(e,t))}}]),i}(Pl);var Dl,Nl;new Uint8Array;!function(e){e.ADD="add",e.MOVE="move",e.REMOVE="remove",e.UPDATE="update",e.SET_COLLABORATIVE="set_collaborative"}(Dl||(Dl={})),function(e){e.UPDATE="update",e.OPERATION="operation",e.OPERATION_COMPLETE="operation_complete"}(Nl||(Nl={}));n(1203);var Ul;new RegExp(String.raw(Ul||(Ul=(0,Zt.Z)(["hm://playlist/v2/playlist/(?<base62Id>.+)"]))));n(20266);var Ml,xl,Fl,Bl,Zl;!function(e){e.ONLINE="online",e.OFFLINE="offline",e.FORCED_OFFLINE="forced_offline",e.RECONNECTING="reconnecting"}(Ml||(Ml={})),function(e){e.NO="no",e.YES="yes",e.DOWNLOADING="downloading",e.WAITING="waiting"}(xl||(xl={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.DISKFULL=8]="DISKFULL",e[e.DOWNLOAD_EXPIRED=14]="DOWNLOAD_EXPIRED",e[e.TOO_MANY_TRACK=19]="TOO_MANY_TRACK",e[e.LICENSE_SERVER_ERROR=21]="LICENSE_SERVER_ERROR",e[e.LICENSE_LOST=22]="LICENSE_LOST",e[e.NOT_ALLOWED=23]="NOT_ALLOWED",e[e.SYNC_CONNECTION_DISABLED=36]="SYNC_CONNECTION_DISABLED",e[e.LISTS_NOT_SAVED=37]="LISTS_NOT_SAVED",e[e.LISTS_NOT_LOADED=38]="LISTS_NOT_LOADED",e[e.FILE_NOT_FOUND=7001]="FILE_NOT_FOUND",e[e.DOWNLOAD_FILE_FAILED=7002]="DOWNLOAD_FILE_FAILED",e[e.DOWNLOAD_IMAGE_FAILED=7003]="DOWNLOAD_IMAGE_FAILED",e[e.REQUEST_KEY_FAILED=7004]="REQUEST_KEY_FAILED",e[e.SAVE_KEY_STORE_FAILED=7005]="SAVE_KEY_STORE_FAILED",e[e.LOAD_KEY_STORE_FAILED=7006]="LOAD_KEY_STORE_FAILED",e[e.KEY_STORE_NOT_FOUND=7007]="KEY_STORE_NOT_FOUND",e[e.KEY_STORE_BAD_SIZE=7008]="KEY_STORE_BAD_SIZE",e[e.KEY_STORE_BAD_SALT=7010]="KEY_STORE_BAD_SALT",e[e.KEY_STORE_BAD_HMAC=7011]="KEY_STORE_BAD_HMAC",e[e.KEY_STORE_BAD_VERSION=7012]="KEY_STORE_BAD_VERSION",e[e.KEY_STORE_OUT_OF_SYNC=7013]="KEY_STORE_OUT_OF_SYNC",e[e.TOO_MANY_EPISODES=7014]="TOO_MANY_EPISODES",e[e.EPISODE_EXPIRED=7015]="EPISODE_EXPIRED",e[e.SAVE_EPISODE_KEY_STORE_FAILED=7016]="SAVE_EPISODE_KEY_STORE_FAILED",e[e.READ_KEY_STORE_FAILED=7017]="READ_KEY_STORE_FAILED",e[e.DOWNLOAD_HEAD_FILE_FAILED=7018]="DOWNLOAD_HEAD_FILE_FAILED",e[e.DEVICE_LIMIT_REACHED=7028]="DEVICE_LIMIT_REACHED"}(Fl||(Fl={})),function(e){e[e.DOWNLOAD_CAPABILITY=1]="DOWNLOAD_CAPABILITY",e[e.NO_DOWNLOAD_CAPABILITY=2]="NO_DOWNLOAD_CAPABILITY"}(Bl||(Bl={})),function(e){e[e.DOWNLOADING_ALLOWED=1]="DOWNLOADING_ALLOWED",e[e.DOWNLOADING_NOT_ALLOWED=2]="DOWNLOADING_NOT_ALLOWED"}(Zl||(Zl={}));var Yl;!function(e){e.CONNECTION_STATE_CHANGE="connection_state_change"}(Yl||(Yl={}));n(38459);"\n  id\n  uri\n  name\n  type\n  following\n  description\n  htmlDescription\n  coverArt {\n    ".concat("\n    sources {\n      url\n      width\n      height\n    }","\n  }\n  contentRating {\n    label\n  }\n  publisher {\n    name\n  }\n  playability {\n    playable\n    reason\n  }\n  mediaType\n  trailer {\n    uri\n    name\n    duration {\n      totalMilliseconds\n    }\n    coverArt {\n      ").concat("\n    sources {\n      url\n      width\n      height\n    }","\n    }\n    audioPreview {\n      url\n    }\n    audio {\n      items {\n        url\n        fileId\n        format\n        externallyHosted\n      }\n    }\n    contentRating {\n      label\n    }\n    releaseDate {\n      isoString\n    }\n    playability {\n      playable\n      reason\n    }\n  }\n  sharingInfo {\n    shareUrl\n    shareId\n  }\n");"\n  id\n  uri\n  name\n  htmlDescription\n  description\n  language {\n    code\n  }\n  audio {\n    items {\n      url\n      format\n      fileId\n      externallyHosted\n    }\n  }\n  duration {\n    totalMilliseconds\n  }\n  contentRating {\n    label\n  }\n  playability {\n    playable\n    reason\n  }\n  playedState {\n    playPosition\n    state\n  }\n  releaseDate {\n    isoString\n    precision\n  }\n  coverArt {\n    sources {\n      url\n      width\n      height\n    }\n  }\n  audioPreview {\n    url\n    format\n  }\n  mediaType\n  type\n  podcast {\n    id\n    uri\n    name\n    following\n    description\n    coverArt {\n      ".concat("\n    sources {\n      url\n      width\n      height\n    }","\n    }\n    contentRating {\n      label\n    }\n    publisher {\n      name\n    }\n    playability {\n      playable\n      reason\n    }\n    mediaType\n    trailer {\n      uri\n      name\n      duration {\n        totalMilliseconds\n      }\n      audioPreview {\n        url\n      }\n      audio {\n        items {\n          url\n          externallyHosted\n        }\n      }\n      contentRating {\n        label\n      }\n      releaseDate {\n        isoString\n      }\n      playability {\n        playable\n        reason\n      }\n    }\n  }\n  sharingInfo {\n    shareUrl\n    shareId\n  }\n");n(11755),n(31918),n(45287);n(11798);var Kl,Hl,jl,Vl,Gl,Wl,ql,zl,Ql,Xl,$l,Jl,eu,tu,nu,iu,ru,ou,su,au,cu,lu,uu;!function(e){e.Album="ALBUM",e.Audiobook="AUDIOBOOK",e.Compilation="COMPILATION",e.Ep="EP",e.Podcast="PODCAST",e.Single="SINGLE",e.Unknown="UNKNOWN"}(Kl||(Kl={})),function(e){e.DateAsc="DATE_ASC",e.DateDesc="DATE_DESC",e.NameAsc="NAME_ASC",e.NameDesc="NAME_DESC"}(Hl||(Hl={})),function(e){e.Album="ALBUM",e.Artist="ARTIST",e.Concert="CONCERT",e.Other="OTHER",e.Playlist="PLAYLIST",e.Track="TRACK"}(jl||(jl={})),function(e){e.DarkVibrant="DARK_VIBRANT",e.Desaturated="DESATURATED",e.LightVibrant="LIGHT_VIBRANT",e.Prominent="PROMINENT",e.Unrecognized="UNRECOGNIZED",e.Vibrant="VIBRANT",e.VibrantNonAlarming="VIBRANT_NON_ALARMING"}(Vl||(Vl={})),function(e){e.Explicit="EXPLICIT",e.NineteenPlus="NINETEEN_PLUS",e.None="NONE",e.Unknown="UNKNOWN"}(Gl||(Gl={})),function(e){e.C="C",e.P="P"}(Wl||(Wl={})),function(e){e.Day="DAY",e.Hour="HOUR",e.Minute="MINUTE",e.Month="MONTH",e.Year="YEAR"}(ql||(ql={})),function(e){e.Unknown="UNKNOWN"}(zl||(zl={})),function(e){e.Audio="AUDIO",e.Unknown="UNKNOWN",e.Video="VIDEO"}(Ql||(Ql={})),function(e){e.Completed="COMPLETED",e.InProgress="IN_PROGRESS",e.NotStarted="NOT_STARTED"}(Xl||(Xl={})),function(e){e.Episode="EPISODE",e.PodcastEpisode="PODCAST_EPISODE",e.Unknown="UNKNOWN"}($l||($l={})),function(e){e.Facebook="FACEBOOK",e.Instagram="INSTAGRAM",e.Other="OTHER",e.Soundbetter="SOUNDBETTER",e.Twitter="TWITTER",e.Wikipedia="WIKIPEDIA"}(Jl||(Jl={})),function(e){e.Line="LINE",e.Text="TEXT"}(eu||(eu={})),function(e){e.LineSynced="LINE_SYNCED",e.Unknown="UNKNOWN",e.Unsynced="UNSYNCED"}(tu||(tu={})),function(e){e.AgeRestricted="AGE_RESTRICTED",e.CatalogueRestricted="CATALOGUE_RESTRICTED",e.CountryRestricted="COUNTRY_RESTRICTED",e.Explicit="EXPLICIT",e.PaymentRequired="PAYMENT_REQUIRED",e.Playable="PLAYABLE",e.Unavailable="UNAVAILABLE",e.Unknown="UNKNOWN"}(nu||(nu={})),function(e){e.Episodic="EPISODIC",e.Recent="RECENT",e.Sequential="SEQUENTIAL",e.Unknown="UNKNOWN"}(iu||(iu={})),function(e){e.External="EXTERNAL",e.Internal="INTERNAL",e.InternalAndExternal="INTERNAL_AND_EXTERNAL",e.Unknown="UNKNOWN"}(ru||(ru={})),function(e){e.Audio="AUDIO",e.Mixed="MIXED",e.Unknown="UNKNOWN",e.Video="VIDEO"}(ou||(ou={})),function(e){e.Podcast="PODCAST",e.Show="SHOW",e.Unknown="UNKNOWN"}(su||(su={})),function(e){e.OneDimension="ONE_DIMENSION",e.TwoDimensions="TWO_DIMENSIONS",e.ZeroDimensions="ZERO_DIMENSIONS"}(au||(au={})),function(e){e.Free="FREE",e.Premium="PREMIUM"}(cu||(cu={})),function(e){e.Actor="ACTOR",e.Composer="COMPOSER",e.Conductor="CONDUCTOR",e.Featured="FEATURED",e.Main="MAIN",e.Orchestra="ORCHESTRA",e.Remixer="REMIXER",e.Unknown="UNKNOWN"}(lu||(lu={})),function(e){e.Unknown="UNKNOWN"}(uu||(uu={}));var du,pu=n(77209);function hu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}!function(e){e[e.TRANSIENT=0]="TRANSIENT",e[e.PERSISTENT=1]="PERSISTENT"}(du||(du={}));var fu=function(e){(0,T.Z)(n,e);var t=hu(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,c.Z)(this,n),(r=t.call(this,e)).type=i,r.cause=o,r}return n}((0,z.Z)(Error)),_u=function(e){(0,T.Z)(n,e);var t=hu(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.Z)(this,n),(i=t.call(this,e,du.TRANSIENT,r)).cause=r,i}return n}(fu),mu=function(e){(0,T.Z)(n,e);var t=hu(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,c.Z)(this,n),(i=t.call(this,e,du.PERSISTENT,r)).cause=r,i}return n}(fu);function gu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function yu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gu(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eu(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){var t=e.url,n=e.height,i=e.width;return Boolean(t)&&Boolean(n)&&Boolean(i)})).map((function(e){var t=e.url,n=e.width,i=e.height;return{url:t,height:parseInt(null!=i?i:"0",10),width:parseInt(null!=n?n:"0",10)}}))}({url:e.image_url,height:e.image_height,width:e.image_width},{url:e.image_url_small,height:e.image_height_small,width:e.image_width_small},{url:e.image_url_large,height:e.image_height_large,width:e.image_width_large},{url:e.image_url_xlarge,height:e.image_height_xlarge,width:e.image_width_xlarge})}function vu(e,t){return null===e?null:Io().isTrack(e.uri)||Io().isLocalTrack(e.uri)?function(e,t){var n,i,r,o,s,a=e.metadata;return{type:Hc.TRACK,uri:e.uri,uid:null,name:null!==(n=a.title)&&void 0!==n?n:"",mediaType:e.mediaType,duration:{milliseconds:t},album:{type:Hc.ALBUM,uri:null!==(i=a.album_uri)&&void 0!==i?i:"",name:null!==(r=a.album_title)&&void 0!==r?r:"",images:Eu(a)},artists:[{type:Hc.ARTIST,uri:null!==(o=a.artist_uri)&&void 0!==o?o:"",name:null!==(s=a.artist_name)&&void 0!==s?s:""}],isLocal:Io().isLocalTrack(e.uri),isExplicit:!1,is19PlusOnly:!1,provider:null,get images(){return this.album.images}}}(e,t):Io().isEpisode(e.uri)?function(e,t){var n,i,r,o=e.metadata;return{type:Hc.EPISODE,uri:e.uri,uid:null,name:null!==(n=o.title)&&void 0!==n?n:"",mediaType:e.mediaType,duration:{milliseconds:t},show:{type:Hc.SHOW,uri:null!==(i=o.album_uri)&&void 0!==i?i:"",name:null!==(r=o.album_title)&&void 0!==r?r:"",images:Eu(o)},provider:null,get images(){return this.show.images}}}(e,t):Io().isAd(e.uri)?function(e,t){var n,i,r,o=e.metadata;return{type:Hc.AD,uri:e.uri,uid:null,title:null!==(n=o.title)&&void 0!==n?n:null,advertiser:null!==(i=o.artist_name)&&void 0!==i?i:null,url:null!==(r=o.artist_uri)&&void 0!==r?r:null,mediaType:e.mediaType,duration:{milliseconds:t},images:[],isPodcastAd:!1,isSkippableAd:!1,isTestAd:!1,provider:null}}(e,t):{type:Hc.UNKNOWN,uri:e.uri,uid:null,metadata:e.metadata||null,provider:null,images:null}}function Su(e){switch(e){case pu.zq.CONTEXT:return Vc.REPEAT_CONTEXT;case pu.zq.TRACK:return Vc.REPEAT_TRACK;case pu.zq.NONE:default:return Vc.REPEAT_NONE}}function bu(e){var t=e.playbackState;return{canPause:!!t.playing,canResume:!t.playing,canSeek:!0,canSkipPrevious:!1,canSkipNext:!1,canToggleRepeatContext:!1,canToggleRepeatTrack:!1,canToggleShuffle:!1,disallowPausingReasons:t.playing?[]:["already_paused"],disallowResumingReasons:t.playing?["already_playing"]:[],disallowSeekingReasons:[],disallowSkippingPreviousReasons:["unknown"],disallowSkippingNextReasons:["unknown"],disallowTogglingRepeatContextReasons:["unknown"],disallowTogglingRepeatTrackReasons:["unknown"],disallowTogglingShuffleReasons:["unknown"]}}function Tu(e){var t=e.isPlaying||e.isPaused||e.isBuffering;return{canSeek:null!=t&&t,disallowSeekingReasons:t?[]:["not_playing_track"]}}function Ru(e){if(null===e)return null;var t=e.playbackState,n=e.track,i=null==n?void 0:n.metadata,r=function(e){var t=e.track,n=null==t?void 0:t.metadata;return(null==n?void 0:n.contextURI)||(null==t?void 0:t.uri)||null}(e);return r?{timestamp:Date.now(),context:{uri:null!=r?r:"",metadata:i},index:{pageURI:null,pageIndex:null,itemIndex:null},item:n?vu(n,t.duration):null,shuffle:!1,repeat:Su(pu.zq.NONE),speed:1,playbackQuality:{bitrateLevel:Gc.UNKNOWN},positionAsOfTimestamp:t.position,duration:t.duration,restrictions:yu(yu({},bu(e)),Tu({isPlaying:t.playing,isPaused:!t.playing,isBuffering:!1})),isPlaying:t.playing,isPaused:!t.playing,previousItems:[],nextItems:[]}:null}function Iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ku(e){var t,n,i=new Sa,r={timestamp:0,context:{uri:""},index:{pageURI:null,pageIndex:null,itemIndex:null},item:null,shuffle:!1,repeat:Vc.REPEAT_NONE,speed:1,playbackQuality:{bitrateLevel:Gc.UNKNOWN},positionAsOfTimestamp:0,duration:0,restrictions:{canPause:!1,canResume:!1,canSeek:!1,canSkipNext:!1,canSkipPrevious:!1,canToggleRepeatContext:!1,canToggleRepeatTrack:!1,canToggleShuffle:!1,disallowPausingReasons:["not_playing_track"],disallowResumingReasons:["not_playing_track"],disallowSeekingReasons:["not_playing_track"],disallowSkippingPreviousReasons:["not_playing_context"],disallowSkippingNextReasons:["not_playing_context"],disallowTogglingRepeatContextReasons:["not_playing_context"],disallowTogglingRepeatTrackReasons:["not_playing_context"],disallowTogglingShuffleReasons:["not_playing_context"]},isPlaying:!1,isPaused:!1,isBuffering:!1,previousItems:[],nextItems:[]};function o(e){var t;t=e,r=Au(Au(Au({},r),t),{},{context:Au(Au({},r.context),null==t?void 0:t.context)}),i.emit(fa.UPDATE,r)}function s(){return a.apply(this,arguments)}function a(){return(a=(0,k.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCurrentState();case 2:o(Ru(t.sent));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=(0,k.Z)(O().mark((function e(i){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}if(!t){e.next=3;break}return e.abrupt("return");case 3:t=setTimeout((function(){t=null,o({isBuffering:i})}),200),e.next=7;break;case 6:t?(clearTimeout(t),t=null,o({isBuffering:i})):n||(n=setTimeout((function(){n=null,o({isBuffering:i})}),400));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,k.Z)(O().mark((function t(){var n,i,r,s;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCurrentState();case 2:n=t.sent,i=Ru(n),r=i?Au(Au({},i),{},{isBuffering:!1,isPlaying:!1,isPaused:!1}):{position:0,isBuffering:!1,isPlaying:!1,isPaused:!1,restrictions:bu(n)},s=Tu(r),o(Au(Au({},r),{},{restrictions:Au(Au({},r.restrictions),s)}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.on(pu.oQ.ERROR,(function(e){var t=e.data.error,n="MEDIA_DECODING_ERROR"===t.code?"Media decoding error":t.message;t.unrecoverable?i.emit(fa.ERROR,new mu(n,t)):i.emit(fa.ERROR,new _u(n,t))})),e.on(pu.oQ.VOLUME_CHANGED,(function(e){i.emit(fa.VOLUME,e.data.volume)})),e.on(pu.oQ.PAUSED,s),e.on(pu.oQ.PROGRESS,(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Date.now()-r.timestamp>=1e3&&s(),(r.isBuffering||t)&&c(!1);case 2:case"end":return e.stop()}}),e)})))),e.on(pu.oQ.TRACK_LOADED,s),e.on(pu.oQ.TRACK_ENDED,(function(){return u.apply(this,arguments)})),e.on(pu.oQ.BUFFERING_START,(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!0);case 2:case"end":return e.stop()}}),e)})))),e.on(pu.oQ.BUFFERING_END,(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!1);case 2:case"end":return e.stop()}}),e)})))),e.on(pu.oQ.BEFORE_TRACK_LOAD,(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!0);case 2:case"end":return e.stop()}}),e)})))),e.on(pu.oQ.POSITION_CHANGED,(0,k.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCurrentState();case 2:if(!t.sent.playbackState.playing){t.next=6;break}return t.next=6,c(!0);case 6:case"end":return t.stop()}}),t)})))),i}var Lu=function(){var e=(0,k.Z)(O().mark((function e(t,n,i){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.build().withMethod("GET").withHost(Ma).withPath("/unauth/episode/".concat(n,"/").concat(i)).withEndpointIdentifier("/unauth/episode/{episodeId}/{keysystem}").send();case 2:return e.abrupt("return",e.sent.body);case 3:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}();function Ou(e,t,n){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,k.Z)(O().mark((function e(t,n,i){var r,o,s,a,c,l,u,d,p,h,f,_;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="video"===i,s=t.uri.replace("spotify:episode:",""),e.next=4,Lu(ue.getInstance(),s,n);case 4:return a=e.sent,c="NONE"!==a.passthrough,l=a.format.replace(/_(128|256)/,""),u=o?"MANIFEST_ID":l,d=c?a.passthroughUrl:a.url[0],p=c?"":a.fileId,h=null===(r=a.video)||void 0===r?void 0:r[0].manifestId,f=o?void 0:d,_=o?h:p,e.abrupt("return",{format:u,mediaType:null!=i?i:"audio",noManifest:c,resolvedURL:f,fileId:_});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Du=.0625,Nu={"com.apple.fps.1_0":"fairplay","com.widevine.alpha":"widevine","com.microsoft.playready":"playready"},Uu=function(e){var t,n;return null!==(t=e.pages)&&void 0!==t&&t.length&&null!==(n=e.pages[0].items)&&void 0!==n&&n.length?e.pages[0].items[0]:e},Mu=function(e){return"".concat("https://spclient.wg.spotify.com","/").concat(Nu[e],"-license/v1/unauth/audio/license")};function xu(e,t){var n,i;if(!t)throw n=Boolean(null===(i=document.featurePolicy)||void 0===i?void 0:i.allowsFeature("encrypted-media"))?new Error("No valid encryption keysystem found in your browser. We either don't support your browser keysystem or the browser you're using is too old and doesn't have this feature; consider upgrading it or manually enable the DRM system."):new Error("The allow='encrypted-media' attribute on the Spotify widget is missing, the owner of the website should fix this. See https://developer.spotify.com/documentation/widgets/generate/embed"),e.emitSync(fa.ERROR,new mu(n.message,n)),n}var Fu,Bu=function(){var e=(0,k.Z)(O().mark((function e(t,n,i,r,o){var s,a,c,l,u,d,p,h;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=wu(wu({},n.metadata),{},{contextURI:n!==t?t.uri:null}),null===(s=n.metadata)||void 0===s||!s.externalResolvedUrl){e.next=3;break}return e.abrupt("return",(0,pu.SK)({uri:n.uri,resolvedURL:null===(l=n.metadata)||void 0===l?void 0:l.externalResolvedUrl,fileId:"",metadata:c,logData:o}));case 3:if("episode"!==(null===(a=Io().from(n.uri))||void 0===a?void 0:a.type)){e.next=11;break}return xu(i,r),u=c.mediaType,d=Mu(r),e.next=9,Ou(n,r,u);case 9:return p=e.sent,e.abrupt("return",(0,pu.SK)(wu({uri:n.uri,licenseEndpoint:d,metadata:c,logData:o,fileId:""},p)));case 11:throw h=new Error("No valid solution has been found to play this item (".concat(null==n?void 0:n.uri,")")),i.emitSync(fa.ERROR,new mu(h.message,h)),h;case 14:case"end":return e.stop()}}),e)})));return function(t,n,i,r,o){return e.apply(this,arguments)}}();function Zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yu(e,t){return(0,pu.cr)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({transport:e},t))}!function(e){e.ALWAYS="always",e.OVERLAY="overlay"}(Fu||(Fu={}));var Ku,Hu,ju,Vu,Gu,Wu=n(58555),qu=n(28907);(0,Wu.Z)((function(e){return{items:{},setItem:function(t,n){var i=JSON.stringify(n);window.localStorage.setItem(t,i),e((function(e){return(0,qu.Uy)(e,(function(e){e.items[t]=n}))}))},clearItem:function(t){window.localStorage.removeItem(t),e((function(e){return(0,qu.Uy)(e,(function(e){delete e.items[t]}))}))}}}));!function(e){e.SIGNUP="signup"}(Ku||(Ku={})),function(e){e.DONE="DONE",e.ARTIST="ARTIST"}(Hu||(Hu={})),function(e){e.URI="URI",e.SUBMIT="SUBMIT",e.DISMISS="DISMISS"}(ju||(ju={})),function(e){e.LOADING="LOADING",e.PICKER="PICKER"}(Vu||(Vu={})),function(e){e.COMPLETE="COMPLETE",e.NOT_COMPLETE="NOT_COMPLETE",e.NOT_APPLICABLE="NOT_APPLICABLE",e.UNKNOWN="UNKNOWN"}(Gu||(Gu={}));var zu;zu={},(0,u.Z)(zu,Hu.ARTIST,"artist"),(0,u.Z)(zu,Hu.DONE,""),Hu.DONE,Vu.LOADING;var Qu,Xu;n(95289);function $u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}!function(e){e.ARTIST="artist",e.ALBUM="album",e.SHOW="show",e.PLAYLIST="playlist",e.RADIO="radio",e.LIKED_SONGS="liked_songs",e.YOUR_EPISODES="your_episodes",e.TRACK="track"}(Qu||(Qu={})),function(e){e.UPDATE="update"}(Xu||(Xu={}));var Ju=function(e){(0,T.Z)(n,e);var t=$u(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return n}(Ea),ed=n(52631);function td(e,t,n){return nd.apply(this,arguments)}function nd(){return(nd=(0,k.Z)(O().mark((function e(t,n,i){var r,o,s,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(ed.fetchArtistForRecentlyPlayed,{uri:n});case 2:if(s=e.sent,"Artist"===(null==(a=null==s?void 0:s.data.artistUnion)?void 0:a.__typename)){e.next=6;break}throw new Error("Error fetching artist entity for URI ".concat(n));case 6:return e.abrupt("return",{type:Qu.ARTIST,uri:n,name:a.profile.name,images:null!==(r=null===(o=a.visuals.avatarImage)||void 0===o?void 0:o.sources.map((function(e){return{url:e.url,width:e.width,height:e.height}})))&&void 0!==r?r:[],timestampMs:i});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function id(e,t,n){return rd.apply(this,arguments)}function rd(){return(rd=(0,k.Z)(O().mark((function e(t,n,i){var r,o,s,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(ed.fetchAlbumForRecentlyPlayed,{uri:n});case 2:if(s=e.sent,"Album"===(null==(a=null==s?void 0:s.data.albumUnion)?void 0:a.__typename)){e.next=6;break}throw new Error("Error fetching album entity for URI ".concat(n));case 6:return e.abrupt("return",{type:Qu.ALBUM,uri:n,name:a.name,images:null!==(r=null===(o=a.coverArt)||void 0===o?void 0:o.sources.map((function(e){return{url:e.url,width:e.width,height:e.height}})))&&void 0!==r?r:[],artists:a.artists.items.map((function(e){return{uri:e.uri,name:e.profile.name}})),timestampMs:i});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function od(e,t,n){return sd.apply(this,arguments)}function sd(){return(sd=(0,k.Z)(O().mark((function e(t,n,i){var r,o,s,a,c,l;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(ed.fetchShowForRecentlyPlayed,{uri:n});case 2:if(c=e.sent,"Podcast"===(null==(l=null==c?void 0:c.data.podcastUnion)?void 0:l.__typename)){e.next=6;break}throw new Error("Error fetching show entity for URI ".concat(n));case 6:return e.abrupt("return",{type:Qu.SHOW,uri:n,name:l.name,images:null!==(r=null===(o=l.coverArt)||void 0===o?void 0:o.sources.map((function(e){return{url:e.url,width:e.width,height:e.height}})))&&void 0!==r?r:[],publisher:null!==(s=null===(a=l.publisher)||void 0===a?void 0:a.name)&&void 0!==s?s:"",timestampMs:i});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ad(e,t,n){return cd.apply(this,arguments)}function cd(){return(cd=(0,k.Z)(O().mark((function e(t,n,i){var r,o,s,a,c,l,u,d,p,h;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(ed.fetchPlaylistForRecentlyPlayed,{uri:n});case 2:if(p=e.sent,"Playlist"===(null==(h=null==p?void 0:p.data.playlistUnion)?void 0:h.__typename)){e.next=6;break}throw new Error("Error fetching playlist entity for URI ".concat(n));case 6:return e.abrupt("return",{type:Qu.PLAYLIST,uri:n,name:h.name,images:null!==(r=h.images.items[0].sources.map((function(e){return{url:e.url,width:e.width,height:e.height}})))&&void 0!==r?r:[],description:null!==(o=h.description)&&void 0!==o?o:"",owner:{uri:null!==(s=null===(a=h.owner)||void 0===a?void 0:a.uri)&&void 0!==s?s:"",displayName:null!==(c=null!==(l=null===(u=h.owner)||void 0===u?void 0:u.name)&&void 0!==l?l:null===(d=h.owner)||void 0===d?void 0:d.username)&&void 0!==c?c:""},timestampMs:i});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ld(e,t,n){return ud.apply(this,arguments)}function ud(){return(ud=(0,k.Z)(O().mark((function e(t,n,i){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Io().isCollection(n)){e.next=2;break}return e.abrupt("return",{type:n.endsWith("your-episodes")?Qu.YOUR_EPISODES:Qu.LIKED_SONGS,uri:n,timestampMs:i});case 2:r=Io().from(n),e.t0=null==r?void 0:r.type,e.next=e.t0===Io().Type.ARTIST?6:e.t0===Io().Type.ALBUM?7:e.t0===Io().Type.SHOW?8:e.t0===Io().Type.PLAYLIST||e.t0===Io().Type.PLAYLIST_V2?9:10;break;case 6:return e.abrupt("return",td(t,n,i));case 7:return e.abrupt("return",id(t,n,i));case 8:return e.abrupt("return",od(t,n,i));case 9:return e.abrupt("return",ad(t,n,i));case 10:throw new Error("Unsupported entity for URI ".concat(n));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dd(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,I.Z)(e);if(t){var r=(0,I.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,R.Z)(this,n)}}function fd(e,t){return _d.apply(this,arguments)}function _d(){return(_d=(0,k.Z)(O().mark((function e(t,n){var i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.build().withMethod("GET").withHost(Ua).withPath("/user/".concat(encodeURIComponent(n),"/recently-played")).withQueryParameters({format:"json",offset:0,limit:50,filter:"default,collection-new-episodes"}).withEndpointIdentifier("/user/{userId}/recently-played").send();case 2:return i=e.sent,e.abrupt("return",i.body);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function md(e){return gd.apply(this,arguments)}function gd(){return(gd=(0,k.Z)(O().mark((function e(t){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.build().withMethod("GET").withHost(Na).withPath("/views/recently-played").withQueryParameters({offset:0,limit:50,types:"artist,album,show,playlist,station,collection,track"}).withEndpointIdentifier("/views/recently-played").send();case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yd(e,t,n){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,k.Z)(O().mark((function e(t,n,i){var r,o,s,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([fd(t,i),md(t)]);case 2:return r=e.sent,o=(0,D.Z)(r,2),s=o[0],a=o[1],e.next=8,Promise.all(s.playContexts.map(function(){var e=(0,k.Z)(O().mark((function e(t){var i,r,o,s;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.uri,r=t.lastPlayedTime,o=Io().from(i),void 0!==(s=a.content.items.find((function(e){var t;return null!==(t=null==o?void 0:o.isSameIdentity(e.uri))&&void 0!==t&&t})))){e.next=13;break}return e.prev=4,e.next=7,ld(n,i,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",null);case 13:e.t1=s.type,e.next="artist"===e.t1?16:"album"===e.t1?17:"show"===e.t1?18:"playlist"===e.t1?19:"station"===e.t1?20:"link"===e.t1?21:24;break;case 16:return e.abrupt("return",{type:Qu.ARTIST,uri:s.uri,name:s.name,images:s.images,timestampMs:r});case 17:return e.abrupt("return",{type:Qu.ALBUM,uri:s.uri,name:s.name,images:s.images,timestampMs:r,artists:s.artists});case 18:return e.abrupt("return",{type:Qu.SHOW,uri:s.uri,name:s.name,images:s.images,timestampMs:r,publisher:s.publisher});case 19:return e.abrupt("return",{type:Qu.PLAYLIST,uri:s.uri,name:s.name,images:s.images,timestampMs:r,description:s.description,owner:{uri:s.owner.uri,displayName:s.owner.display_name?s.owner.display_name:s.owner.id}});case 20:return e.abrupt("return",{type:Qu.RADIO,uri:s.uri,name:s.name,images:s.images,timestampMs:r});case 21:if(!Io().isCollection(i)){e.next=23;break}return e.abrupt("return",{type:i.endsWith("your-episodes")?Qu.YOUR_EPISODES:Qu.LIKED_SONGS,uri:s.uri,timestampMs:r});case 23:case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",e.sent.filter((function(e){return null!==e})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vd(e,t){return Array.from(e.concat(null!=t?t:[]).reduce((function(e,t){var n=e.get(t.uri);return(void 0===n||n.timestampMs<t.timestampMs)&&e.set(t.uri,t),e}),new Map).values()).sort((function(e,t){return t.timestampMs-e.timestampMs}))}var Sd,bd=function(e){(0,T.Z)(r,e);var t,n,i=hd(r);function r(e,t,n,o){var s;return(0,c.Z)(this,r),(s=i.call(this))._request=t,s._builder=n,s._username=o,(0,u.Z)((0,S.Z)(s),"_localContexts",[]),(0,u.Z)((0,S.Z)(s),"_remoteContexts",null),(0,u.Z)((0,S.Z)(s),"_inFlightCache",new wl),(0,u.Z)((0,S.Z)(s),"_listeners",0),(0,u.Z)((0,S.Z)(s),"_shouldRefresh",!1),(0,u.Z)((0,S.Z)(s),"_lastContextURI",null),s.onAddListener(Xu.UPDATE,(function(){s._listeners++})),s.onRemoveListener(Xu.UPDATE,(function(){s._listeners--})),window.addEventListener("visibilitychange",(function(){document.hidden||(0!==s._listeners?s.refresh():s._shouldRefresh=!0)})),window.addEventListener("online",(function(){navigator.onLine&&(0!==s._listeners?s.refresh():s._shouldRefresh=!0)})),e.getEvents().addListener(fa.UPDATE,(function(e){var t=e.data;s.onPlayerStateUpdate(t)})),s}return(0,l.Z)(r,[{key:"onPlayerStateUpdate",value:(n=(0,k.Z)(O().mark((function e(t){var n,i,r,o,s,a,c,l,u,d,p,h=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=null!==(n=null==t?void 0:t.context.uri)&&void 0!==n?n:null)&&r!==this._lastContextURI){e.next=3;break}return e.abrupt("return");case 3:if(this._lastContextURI=r,-1===(o=this._localContexts.findIndex((function(e){return e.uri===r})))){e.next=10;break}s=this._localContexts.splice(o,1),a=(0,D.Z)(s,1),c=a[0],this._localContexts.unshift(pd(pd({},c),{},{timestampMs:Date.now()})),e.next=23;break;case 10:return e.prev=10,e.next=13,this._inFlightCache.create(r,(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ld(h._request,r,Date.now());case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e)}))));case 13:l=e.sent,u=(0,D.Z)(l,1),d=u[0],this._localContexts.unshift(d),e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(10),e.abrupt("return");case 23:p=vd(this._localContexts,null!==(i=this._remoteContexts)&&void 0!==i?i:[]),this.emit(Xu.UPDATE,p);case 25:case"end":return e.stop()}}),e,this,[[10,19]])}))),function(e){return n.apply(this,arguments)})},{key:"refresh",value:(t=(0,k.Z)(O().mark((function e(){var t,n,i=this;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._username){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=this._username,e.next=6,this._inFlightCache.create(r.REMOTE_CONTEXTS_CACHE_KEY,(function(){return yd(i._builder,i._request,t)}));case 6:this._remoteContexts=e.sent,n=vd(this._localContexts,this._remoteContexts),this.emit(Xu.UPDATE,n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(){return t.apply(this,arguments)})},{key:"getContexts",value:function(){var e;return(null===this._remoteContexts||this._shouldRefresh)&&(this._shouldRefresh=!1,this.refresh()),0===this._localContexts.length&&null===this._remoteContexts?null:vd(this._localContexts,null!==(e=this._remoteContexts)&&void 0!==e?e:[])}}]),r}(Ju);(0,u.Z)(bd,"REMOTE_CONTEXTS_CACHE_KEY","remote-contexts"),function(e){e.UPDATE="update"}(Sd||(Sd={}));var Td,Rd,Id;!function(e){e.NOT_CONNECTED="not_connected",e.CONNECTING="connecting",e.CONNECTED="connected"}(Td||(Td={})),function(e){e.ON="on",e.OFF="off"}(Rd||(Rd={})),function(e){e.UNKNOWN="unknown",e.COMPUTER="computer",e.TABLET="tablet",e.SMARTPHONE="smartphone",e.SPEAKER="speaker",e.TV="tv",e.AVR="avr",e.STB="stb",e.AUDIO_DONGLE="audio_dongle",e.GAME_CONSOLE="game_console",e.CAST_VIDEO="cast_video",e.CAST_AUDIO="cast_audio",e.AUTOMOBILE="automobile",e.SMARTWATCH="smartwatch",e.CHROMEBOOK="chromebook",e.CarThing="carthing",e.HomeThing="homething"}(Id||(Id={}));function Ad(e,t,n){var i;return null===e?function(e,t){var n,i=ku(e),r=null,o="other",s=null,a=null,c=0,l=function(){var t=(0,k.Z)(O().mark((function t(){var i;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n){t.next=5;break}return t.next=3,e.getMediaConfig();case 3:i=t.sent,n=i.keysystem;case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.addListener(fa.UPDATE,(function(e){var t=e.data;r=t})),i.addListener(fa.VOLUME,(function(e){var t=e.data;s=t})),"undefined"!=typeof window&&l(),{getCapabilities:function(){return{canChangeSpeed:!1,canChangeVolume:!0,canPlayMultipleContextPages:!1}},canPlayEncryptedContent:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.t0=e.sent,e.t1=void 0,e.abrupt("return",e.t0!==e.t1);case 5:case"end":return e.stop()}}),e)})))()},getEvents:function(){return i},getState:function(){return r},getReferrer:function(){return o},setReferrer:function(e){o=e},play:function(){var n=arguments;return(0,k.Z)(O().mark((function r(){var o,s,u,d,p,h,f,_,m,g,y,E,v,S;return O().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(d=n.length,p=new Array(d),h=0;h<d;h++)p[h]=n[h];if(f=p[0],_=p[2],m=void 0===_?{}:_,!i.emitPlaySync(f,m)){r.next=4;break}return r.abrupt("return");case 4:return r.next=6,l();case 6:return g=r.sent,y=Uu(f),r.next=10,Bu(f,y,i,g,t);case 10:return E=r.sent,v=(0,pu.Sy)({tracks:[E]}),S={index:null!==(o=null==m||null===(s=m.skipTo)||void 0===s?void 0:s.index)&&void 0!==o?o:void 0,initialPosition:null!==(u=null==m?void 0:m.seekTo)&&void 0!==u?u:c},r.next=15,e.playList(v,S);case 15:a=p;case 16:case"end":return r.stop()}}),r)})))()},pause:function(){return(0,k.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.emitPauseSync()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.pause();case 4:case"end":return t.stop()}}),t)})))()},resume:function(){var t=this;return(0,k.Z)(O().mark((function n(){return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getCurrentState();case 2:if(n.sent.track){n.next=9;break}if(!a){n.next=7;break}return n.next=7,t.play.apply(t,(0,Ho.Z)(a));case 7:n.next=13;break;case 9:if(!i.emitResumeSync()){n.next=11;break}return n.abrupt("return");case 11:return n.next=13,e.resume();case 13:case"end":return n.stop()}}),n)})))()},skipToNext:function(){return(0,k.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.emitSkipToNextSync()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.nextTrack();case 4:case"end":return t.stop()}}),t)})))()},skipToPrevious:function(){return(0,k.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.emitSkipToPreviousSync()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.previousTrack();case 4:case"end":return t.stop()}}),t)})))()},seekTo:function(t){return(0,k.Z)(O().mark((function n(){return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getCurrentState();case 2:if(n.sent.track){n.next=6;break}return c=t,n.abrupt("return");case 6:return n.next=8,e.seek(t);case 8:case"end":return n.stop()}}),n)})))()},seekForward:function(t){return(0,k.Z)(O().mark((function n(){var i,r;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getCurrentState();case 2:return i=n.sent,r=i.playbackState.position,n.next=6,e.seek(r+t);case 6:case"end":return n.stop()}}),n)})))()},seekBackward:function(t){return(0,k.Z)(O().mark((function n(){var i,r;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getCurrentState();case 2:return i=n.sent,r=i.playbackState.position,n.next=6,e.seek(r-t);case 6:case"end":return n.stop()}}),n)})))()},setShuffle:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setShuffle is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},setRepeat:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setRepeat is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},setSpeed:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setSpeed is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},getVolume:function(){return(0,k.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getVolume());case 1:case"end":return t.stop()}}),t)})))()},setVolume:function(t){return(0,k.Z)(O().mark((function n(){var i;return O().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=ll(t,0,1),n.next=3,e.setVolume(i);case 3:case"end":return n.stop()}}),n)})))()},increaseVolume:function(){var e=this;return(0,k.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===s){t.next=3;break}return t.next=3,e.setVolume(s+Du);case 3:case"end":return t.stop()}}),t)})))()},decreaseVolume:function(){var e=this;return(0,k.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===s){t.next=3;break}return t.next=3,e.setVolume(s-Du);case 3:case"end":return t.stop()}}),t)})))()},addToQueue:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("addToQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},clearQueue:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("clearQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},removeFromQueue:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("removeFromQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},reorderQueue:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("reorderQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()},insertIntoQueue:function(){return(0,k.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("insertIntoQueue is not supported in Overture");case 1:case"end":return e.stop()}}),e)})))()}}}(Yu(t,{platform_identifier:(i="embed","Partner spotify ".concat(i)),config:{enableWithoutEME:!0,unauthenticatedLogs:!0,videoPlayerContainer:".VideoPlayer__container"},autoActivateElement:!0}),{clientId:n,correlationId:Js("config",{}).correlationId}):new gl(e,"embed-podcast_2021-08-02_1627932948740_895aca0")}var kd=function(e){var t=e.clientId;return Ad(null,F(),t)};function Ld(e){var t=e.clientId,n=e.isAnonymous;!function(e){Xs=e}(function(e,t){return(0,Xa.createEventSender)({transport:e,suppressPersist:!1,context:[(0,$a.jx)(t),(0,$a.UR)({version:"embed-podcast_2021-08-02_1627932948740_895aca0"}),(0,$a.Mb)(),(0,$a.sr)(Js("config",{}).correlationId)]})}(F(),t)),na=n}var Od="object"===("undefined"==typeof window?"undefined":(0,a.Z)(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:Vs.qC;var Cd=n(82303),Pd=n(10647),wd=n(99433);function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dd(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ud=[/open\.scdn\.co/,/xpui\.app\.spotify\.com/];e=n.hmd(e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;(0,Cd.S1)(Nd(Nd({dsn:e,whitelistUrls:Ud,sampleRate:.1},t),{},{integrations:[new wd.x],ignoreErrors:[/\/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}\/main\.js/,/^NotFoundError: Failed to execute '(removeChild|insertBefore)' on 'Node': The node.*child.*this node.$/,/ResizeObserver loop limit exceeded/,"PresentationRequest",/DA97E0680A7030159BC0C0EE3A1D098E947A08E3/]})),(0,Pd.e)((function(e){var t=Js("config",{}).correlationId;t&&e.setUser({id:t}),Object.keys(n).forEach((function(t){e.setExtra(t,n[t])})),""!==document.referrer&&e.setExtra("referrer",document.referrer),i&&e.setTag("container",i)}))}("https://80341f4271be4aec89050e48a0e4553e@o22381.ingest.sentry.io/1409086",{release:"embed-podcast_2021-08-02_1627932948740_895aca0"});var Md,xd=document.getElementById("preloaded-state");xd&&(Md=JSON.parse(decodeURIComponent(xd.innerHTML)),document.body.removeChild(xd));var Fd,Bd,Zd,Yd,Kd,Hd=Md.settings.session.isAnonymous,jd=void 0!==Hd&&Hd;!function(e){x=e}(function(e,t){var n=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e(ac(ac({providers:{endpoints:t,token:oc(n)}},cc),i))}(tc.createBaseTransport,function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).timeout,t=rc(void 0===e?3e3:e),n=(0,ic.Q)({});return function(){var e=(0,k.Z)(O().mark((function e(i){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(i);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=11,n(i);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}(),e,t.transportOptions);return t.useDealer&&n.addPlugin(nc.dv,{WebSocket}),n.addPlugin(gc),n.addPlugin(pc),n.on(tc.TransportEvent.CONNECTED,(function(){n.isAuthenticated()||n.authenticate()})),n.on(tc.TransportEvent.DISCONNECTED,(function(){n.connect()})),n.connect(),n}((Fd="embed_podcast",Kd=function(){try{var e=document.getElementById("config"),t=e?JSON.parse(e.innerHTML):{};return n=t,["accessToken","accessTokenExpirationTimestampMs","isAnonymous"].every((function(e){return e in n}))?t:null}catch(i){return null}var n}(),Bd=(0,k.Z)(O().mark((function e(){var t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Kd||(n=Kd,Date.now()>=n.accessTokenExpirationTimestampMs)){e.next=2;break}return e.abrupt("return",Kd);case 2:return e.next=4,Ja(ue.getInstance(),"transport",Fd);case 4:return t=e.sent,e.abrupt("return",t.body);case 6:case"end":return e.stop()}var n}),e)}))),Zd=null,Yd=null,(0,k.Z)(O().mark((function e(){var t,n,i=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},void 0===(n=t.preferCached)||!n||!Zd){e.next=3;break}return e.abrupt("return",Zd);case 3:if(!Yd){e.next=5;break}return e.abrupt("return",Yd);case 5:return Yd=Bd(),e.prev=6,e.next=9,Yd;case 9:Zd=e.sent;case 10:return e.prev=10,Yd=null,e.finish(10);case 13:return e.abrupt("return",Zd);case 14:case"end":return e.stop()}}),e,null,[[6,,10,13]])})))),{useDealer:!jd})),E.setDictionary(Md.settings.strings),E.setLocale(Md.settings.locale),ue.setSession(Md.settings.session);var Vd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enhancer;return(n=null===n?null:Od((0,Vs.md)(La(kd(e.settings)),Oa(Ld),Ha,Va,za,Qa,Gs.Z)))?(0,Vs.MT)(ga(e),e,n):(0,Vs.MT)(ga(e),e)}(Md),Gd=document.getElementById("root");(0,s.hydrate)(function(e){var t=e.getState().settings.rtl,n=(0,fe.Z)(function(e){var t=e?[Ve.Z]:[];return{key:"embed-podcast-".concat(e?"rtl":"ltr"),stylisPlugins:t}}(t));return(0,pe.tZ)(de.zt,{store:e},(0,pe.tZ)(he.C,{value:n},(0,pe.tZ)(pe.xB,{styles:Te}),(0,pe.tZ)(Vr,null)))}(Vd),Gd),"hot"in e&&e.hot.accept(),v()},51516:function(e,t,n){n(52077),n(911),n(82759),n(40895),n(23938),n(25613),n(72410),n(72482),n(32081),e.exports={getCookie:function(e){return e&&this.hasCookie(e)?decodeURIComponent(document.cookie.replace(new RegExp("(?:^|.*;\\s*)".concat(decodeURIComponent(e).replace(/[-.+*]/g,"\\$&"),"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*")),"$1")):null},hasCookie:function(e){return new RegExp("(?:^|;\\s*)".concat(decodeURIComponent(e).replace(/[-.+*]/g,"\\$&"),"\\s*\\=")).test(document.cookie)},setCookie:function(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"none";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(o?";expires=".concat(o):";expires=Fri, 01 Jan 2038 17:14:16 GMT").concat(n?";path=".concat(n):"").concat(i?";domain=".concat(i):"").concat(r?";secure":"",";samesite=").concat(s)},deleteCookie:function(e,t,n){document.cookie="".concat(e,"=;expires=Fri, 01 Jan 1970 17:14:16 GMT").concat(t?";path=".concat(t):"").concat(n?";domain=".concat(n):"")},getTopDomain:function(){var e=".".concat(document.domain.split(".").slice(-2).join("."));return e=".localhost"===e?"localhost":e},getExpireTime:function(e){var t=new Date,n=t.getTime();return n+=parseInt(e,10),t.setTime(n),t.toUTCString()}}},99773:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"decoratePlaylists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistsUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:369}};t.loc.source={body:"query decoratePlaylists($uris: [ID!]!) {\n  playlistsUnion(uris: $uris) {\n    __typename\n    ... on Playlist {\n      uri\n      images {\n        items {\n          sources {\n            url\n            width\n            height\n          }\n        }\n      }\n      owner {\n        uri\n        name\n        username\n      }\n    }\n    ... on Error {\n      message\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.decoratePlaylists=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=i[t]||new Set,s=new Set,a=new Set;for(o.forEach((function(e){a.add(e)}));a.size>0;){var c=a;a=new Set,c.forEach((function(e){s.has(e)||(s.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return s.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(t,"decoratePlaylists")},52631:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchArtistForRecentlyPlayed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchAlbumForRecentlyPlayed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albumUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"coverArt"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchShowForRecentlyPlayed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcastUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"coverArt"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchPlaylistForRecentlyPlayed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:1313}};t.loc.source={body:"query fetchArtistForRecentlyPlayed($uri: ID!) {\n  artistUnion(uri: $uri) {\n    __typename\n    ... on Artist {\n      uri\n      profile {\n        name\n      }\n      visuals {\n        avatarImage {\n          sources {\n            url\n            width\n            height\n          }\n        }\n      }\n    }\n  }\n}\n\nquery fetchAlbumForRecentlyPlayed($uri: ID!) {\n  albumUnion(uri: $uri) {\n    __typename\n    ... on Album {\n      uri\n      name\n      coverArt {\n        sources {\n          url\n          width\n          height\n        }\n      }\n      artists {\n        items {\n          uri\n          profile {\n            name\n          }\n        }\n      }\n    }\n  }\n}\n\nquery fetchShowForRecentlyPlayed($uri: ID!) {\n  podcastUnion(uri: $uri) {\n    __typename\n    ... on Podcast {\n      uri\n      name\n      coverArt {\n        sources {\n          url\n          width\n          height\n        }\n      }\n      publisher {\n        name\n      }\n    }\n  }\n}\n\nquery fetchPlaylistForRecentlyPlayed($uri: ID!) {\n  playlistUnion(uri: $uri) {\n    __typename\n    ... on Playlist {\n      uri\n      name\n      images {\n        items {\n          sources {\n            url\n            width\n            height\n          }\n        }\n      }\n      description\n      owner {\n        uri\n        username\n        name\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function o(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=i[t]||new Set,s=new Set,a=new Set;for(o.forEach((function(e){a.add(e)}));a.size>0;){var c=a;a=new Set,c.forEach((function(e){s.has(e)||(s.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return s.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.fetchArtistForRecentlyPlayed=o(t,"fetchArtistForRecentlyPlayed"),e.exports.fetchAlbumForRecentlyPlayed=o(t,"fetchAlbumForRecentlyPlayed"),e.exports.fetchShowForRecentlyPlayed=o(t,"fetchShowForRecentlyPlayed"),e.exports.fetchPlaylistForRecentlyPlayed=o(t,"fetchPlaylistForRecentlyPlayed")},11798:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryShowEpisodes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcast"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"following"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"coverArt"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"playability"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"episodes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"episodePage"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shareId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"trailer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"episodePage"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodePage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextOffset"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"contextEpisode"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"contextEpisode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ContextEpisode"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"episode"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"episode"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"coverArt"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fileId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externallyHosted"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"playedState"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"restrictions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paywallContent"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"playability"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shareId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:1323}};t.loc.source={body:"query queryShowEpisodes($uri: ID!, $offset: Int, $limit: Int) {\n  podcast(uri: $uri) {\n    id\n    uri\n    name\n    following\n    description\n    coverArt {\n      sources {\n        url\n        width\n        height\n      }\n    }\n    contentRating {\n      label\n    }\n    publisher {\n      name\n    }\n    playability {\n      playable\n      reason\n    }\n    mediaType\n    episodes(offset: $offset, limit: $limit) {\n      ...episodePage\n    }\n    sharingInfo {\n      shareUrl\n      shareId\n    }\n    trailer {\n      id\n      uri\n      name\n    }\n  }\n}\n\nfragment episodePage on EpisodePage {\n  totalCount\n  pagingInfo {\n    nextOffset\n  }\n  items {\n    ...contextEpisode\n  }\n}\n\nfragment contextEpisode on ContextEpisode {\n  uid\n  episode {\n    ...episode\n  }\n}\n\nfragment episode on Episode {\n  id\n  uri\n  name\n  description\n  coverArt {\n    sources {\n      url\n      width\n      height\n    }\n  }\n  audio {\n    items {\n      url\n      format\n      fileId\n      externallyHosted\n    }\n  }\n  audioPreview {\n    url\n    format\n  }\n  duration {\n    totalMilliseconds\n  }\n  contentRating {\n    label\n  }\n  releaseDate {\n    isoString\n  }\n  playedState {\n    playPosition\n    state\n  }\n  mediaType\n  restrictions {\n    paywallContent\n  }\n  playability {\n    playable\n    reason\n  }\n  sharingInfo {\n    shareUrl\n    shareId\n  }\n  type\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function o(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=i[t]||new Set,s=new Set,a=new Set;for(o.forEach((function(e){a.add(e)}));a.size>0;){var c=a;a=new Set,c.forEach((function(e){s.has(e)||(s.add(e),(i[e]||new Set).forEach((function(e){a.add(e)})))}))}return s.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.queryShowEpisodes=o(t,"queryShowEpisodes"),e.exports.episodePage=o(t,"episodePage"),e.exports.contextEpisode=o(t,"contextEpisode"),e.exports.episode=o(t,"episode")},45545:function(){},46047:function(){},78028:function(){},50695:function(){},50303:function(){},50471:function(){},71632:function(){}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,e=[],i.O=function(t,n,r,o){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var a=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[c])}))?n.splice(c--,1):(a=!1,o<s&&(s=o));if(a){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.e=function(){return Promise.resolve()},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},i.j=525,function(){var e={525:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,s=n[0],a=n[1],c=n[2],l=0;for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(c)var u=c(i);for(t&&t(n);l<s.length;l++)o=s[l],i.o(e,o)&&e[o]&&e[o][0](),e[s[l]]=0;return i.O(u)},n=("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=i.O(void 0,[250],(function(){return i(40131)}));r=i.O(r)}();
//# sourceMappingURL=embed-podcast.1ee894b7.js.map