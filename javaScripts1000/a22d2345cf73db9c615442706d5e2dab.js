(function(w){if(w.parent!==w&&document.getElementById("boomr-if-as")&&document.getElementById("boomr-if-as").nodeName.toLowerCase()==="script"){w=w.parent}if(w.CAVNV!=undefined){return}if(!w.location.origin){w.location.origin=w.location.protocol+"//"+w.location.host}if(w.performance){if(typeof w.performance.setResourceTimingBufferSize==="function"){w.performance.setResourceTimingBufferSize(300)}else{if(typeof w.performance.webkitSetResourceTimingBufferSize==="function"){w.performance.webkitSetResourceTimingBufferSize(300)}}}Array.prototype.forEach=Array.prototype.forEach||function(fn,thisArg){for(var z=0;z<this.length;z++){fn.call(thisArg||this,this[z])}};Array.prototype.some=Array.prototype.some||function(fn,thisArg){for(var z=0;z<this.length;z++){if(!!fn.call(thisArg||this,this[z])){return true}}return false};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};if(this.prototype){fNOP.prototype=this.prototype}fBound.prototype=new fNOP();return fBound};Object.keys=Object.keys||function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!({toString:null}).propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if(typeof obj!=="object"&&(typeof obj!=="function"||obj==null)){throw new TypeError("Object.keys called on non-object")}var result=[],prop,i;for(prop in obj){if(hasOwnProperty.call(obj,prop)){result.push(prop)}}if(hasDontEnumBug){for(i=0;i<dontEnumsLength;i++){if(hasOwnProperty.call(obj,dontEnums[i])){result.push(dontEnums[i])}}}return result}};window.NVDOMObserver=(function(){var NodeMap=function(){function that(){this.nodes=[];this.values=[]}return that.prototype.isIndex=function(str){return +str===str>>>0},that.prototype.nodeId=function(object){var next=object[that.ID_PROP];return next||(next=object[that.ID_PROP]=that.nextId_++),next},that.prototype.set=function(elems,dataAndEvents){var i=this.nodeId(elems);this.nodes[i]=elems;this.values[i]=dataAndEvents},that.prototype.get=function(elems){var dom=this.nodeId(elems);return this.values[dom]},that.prototype.getNode=function(id){return this.nodes[id]},that.prototype.has=function(elems){return this.nodeId(elems) in this.nodes},that.prototype.deletera=function(elems){var i=this.nodeId(elems);delete this.nodes[i];this.values[i]=void 0},that.prototype.keys=function(){var nodes=[];var nodeId;for(nodeId in this.nodes){if(this.isIndex(nodeId)){nodes.push(this.nodes[nodeId])}}return nodes},that.ID_PROP="__ana__",that.nextId_=1,that}();window.NodeMap=NodeMap;var NVNode=function(){function Node(node,childlist,attributes,characterdata,oldParentNode,addedNode,attributeOldValue,characterDataOldValue){if("undefined"==typeof childlist){childlist=false}if("undefined"==typeof attributes){attributes=false}if("undefined"==typeof characterdata){characterdata=false}if("undefined"==typeof oldParentNode){oldParentNode=null}if("undefined"==typeof addedNode){addedNode=false}if("undefined"==typeof attributeOldValue){attributeOldValue=null}if("undefined"==typeof characterDataOldValue){characterDataOldValue=null}this.node=node;this.childList=childlist;this.attributes=attributes;this.characterData=characterdata;this.oldParentNode=oldParentNode;this.added=addedNode;this.attributeOldValues=attributeOldValue;this.characterDataOldValue=characterDataOldValue;if(this.node.nodeType===Node.ELEMENT_NODE&&(this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument)){this.isCaseInsensitive=true}else{this.isCaseInsensitive=false}}return Node.prototype.getAttributeOldValue=function(attrName){if(this.attributeOldValues){if(this.isCaseInsensitive){attrName=attrName.toLowerCase()}return this.attributeOldValues[attrName]}return void 0},Node.prototype.getAttributeNamesMutated=function(){var attrs=[];if(!this.attributeOldValues){return attrs}var attr;for(attr in this.attributeOldValues){attrs.push(attr)}return attrs},Node.prototype.attributeMutated=function(attrName,attrValue){this.attributes=true;this.attributeOldValues=this.attributeOldValues||{};if(!(attrName in this.attributeOldValues)){this.attributeOldValues[attrName]=attrValue}},Node.prototype.characterDataMutated=function(value){if(!this.characterData){this.characterData=true;this.characterDataOldValue=value}},Node.prototype.removedFromParent=function(parentNode){this.childList=true;if(this.added||this.oldParentNode){this.added=false}else{this.oldParentNode=parentNode}},Node.prototype.insertedIntoParent=function(){this.childList=true;this.added=true},Node.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode){return this.oldParentNode}if(this.added){return null}}return this.node.parentNode},Node}();var __extends=this.__extends||function(d,b){function cons(){this.constructor=d}var p;for(p in b){if(b.hasOwnProperty(p)){d[p]=b[p]}}cons.prototype=b.prototype;d.prototype=new cons};var MutationChanges=function(nodeMap){function mchanges(rootNode,mutationRecord){nodeMap.call(this);this.rootNode=rootNode;this.reachableCache=void 0;this.wasReachableCache=void 0;this.anyParentsChanged=false;this.anyAttributesChanged=false;this.anyCharacterDataChanged=false;var i=0;for(;i<mutationRecord.length;i++){var mutation=mutationRecord[i];switch(mutation.type){case"childList":this.anyParentsChanged=true;var j=0;for(;j<mutation.removedNodes.length;j++){var node=mutation.removedNodes[j];this.getChange(node).removedFromParent(mutation.target)}j=0;for(;j<mutation.addedNodes.length;j++){node=mutation.addedNodes[j];this.getChange(node).insertedIntoParent()}break;case"attributes":this.anyAttributesChanged=true;var change=this.getChange(mutation.target);change.attributeMutated(mutation.attributeName,mutation.oldValue);break;case"characterData":this.anyCharacterDataChanged=true;change=this.getChange(mutation.target);change.characterDataMutated(mutation.oldValue)}}}__extends(mchanges,nodeMap);mchanges.prototype.getChange=function(elem){var dataAndEvents=this.get(elem);if(!dataAndEvents){dataAndEvents=new NVNode(elem);this.set(elem,dataAndEvents)}return dataAndEvents};mchanges.prototype.getOldParent=function(node){var change=this.get(node);if(change){return change.getOldParent()}return node.parentNode};mchanges.prototype.getIsReachable=function(elem){if(elem===this.rootNode||(elem&&elem.nodeType==elem.DOCUMENT_NODE)){return true}if(!elem){return false}this.reachableCache=this.reachableCache||new NodeMap;var reachable=this.reachableCache.get(elem);if(reachable==void 0){reachable=this.getIsReachable(elem.parentNode);this.reachableCache.set(elem,reachable)}return reachable};mchanges.prototype.getWasReachable=function(elem){if(elem===this.rootNode||(elem&&elem.nodeType==elem.DOCUMENT_NODE)){return true}if(!elem){return false}this.wasReachableCache=this.wasReachableCache||new NodeMap;var wasReachable=this.wasReachableCache.get(elem);if(void 0===wasReachable){wasReachable=this.getWasReachable(this.getOldParent(elem));this.wasReachableCache.set(elem,wasReachable)}return wasReachable};mchanges.prototype.reachabilityChange=function(owner){if(this.getIsReachable(owner)){if(this.getWasReachable(owner)){return 2}else{return 1}}else{if(this.getWasReachable(owner)){return 5}else{return 0}}};return mchanges}(NodeMap);var ChildListChange=function(){function childListChange(){this.added=new NodeMap;this.removed=new NodeMap;this.maybeMoved=new NodeMap;this.oldPrevious=new NodeMap;this.moved=void 0}return childListChange}();var MutationProjection=function(){function mProjection(rootNode,mutations,selectors,calcReordered,calcOldPreviousSibling){this.rootNode=rootNode;this.mutations=mutations;this.selectors=selectors;this.calcReordered=calcReordered;this.calcOldPreviousSibling=calcOldPreviousSibling;this.MutationChanges=new MutationChanges(rootNode,mutations);this.entered=[];this.exited=[];this.stayedIn=new NodeMap;this.visited=new NodeMap;this.childListChangeMap=void 0;this.characterDataOnly=void 0;this.matchCache=void 0;this.processMutations()}mProjection.prototype.processMutations=function(){if(this.MutationChanges.anyParentsChanged||this.MutationChanges.anyAttributesChanged){var nodes=this.MutationChanges.keys();var i=0;for(;i<nodes.length;i++){this.visitNode(nodes[i],void 0)}}};mProjection.prototype.visitNode=function(node,flag){if(!this.visited.has(node)){this.visited.set(node,true);var change=this.MutationChanges.get(node);var root=flag;if(change&&change.childList||void 0==root){root=this.MutationChanges.reachabilityChange(node)}if(0!==root){if(1===root){this.entered.push(node)}else{if(5===root){this.exited.push(node);this.ensureHasOldPreviousSiblingIfNeeded(node)}else{if(2===root){var dataAndEvents=2;if(change){if(change.childList){if(change.oldParentNode!==node.parentNode){dataAndEvents=3;this.ensureHasOldPreviousSiblingIfNeeded(node)}else{if(this.calcReordered){if(this.wasReordered(node)){dataAndEvents=4}}}}}this.stayedIn.set(node,dataAndEvents)}}}if(2!==root){var curNode=node.firstChild;for(;curNode;curNode=curNode.nextSibling){this.visitNode(curNode,root)}}}}};mProjection.prototype.ensureHasOldPreviousSiblingIfNeeded=function(elem){if(this.calcOldPreviousSibling){this.processChildlistChanges();var ret=elem.parentNode;var element=this.MutationChanges.get(elem);if(element){if(element.oldParentNode){ret=element.oldParentNode}}var dataAndEvents=this.childListChangeMap.get(ret);if(!dataAndEvents){dataAndEvents=new ChildListChange;this.childListChangeMap.set(ret,dataAndEvents)}if(!dataAndEvents.oldPrevious.has(elem)){dataAndEvents.oldPrevious.set(elem,elem.previousSibling)}}},mProjection.prototype.getChanged=function(summary,selectors,dataAndEvents){this.selectors=selectors;this.characterDataOnly=dataAndEvents;var i=0;for(;i<this.entered.length;i++){var elem=this.entered[i];summary.added.push(elem)}var codeSegments=this.stayedIn.keys();i=0;for(;i<codeSegments.length;i++){elem=codeSegments[i];if(summary.reparented||summary.reordered){var hasBody=this.stayedIn.get(elem);if(summary.reparented&&3===hasBody){summary.reparented.push(elem)}else{if(summary.reordered){if(4===hasBody){summary.reordered.push(elem)}}}}}i=0;for(;i<this.exited.length;i++){elem=this.exited[i];summary.removed.push(elem)}},mProjection.prototype.getOldParentNode=function(elem){var change=this.MutationChanges.get(elem);if(change&&change.childList){return change.oldParentNode?change.oldParentNode:null}var mode=this.MutationChanges.reachabilityChange(elem);if(0===mode||1===mode){throw Error("Invalid Reachability Change")}return elem.parentNode},mProjection.prototype.getOldPreviousSibling=function(elem){var tmp=elem.parentNode;var change=this.MutationChanges.get(elem);if(change){if(change.oldParentNode){tmp=change.oldParentNode}}var clmap=this.childListChangeMap.get(tmp);if(!clmap){throw Error("childList change map")}return tasks.oldPrevious.get(elem)},mProjection.prototype.getOldAttribute=function(node,err){var def=this.MutationChanges.get(node);if(!def||!def.attributes){throw Error("Invalid attribute")}var shouldFail=def.getAttributeOldValue(err);if(void 0===shouldFail){throw Error("Invalid Attribute")}return shouldFail},mProjection.prototype.attributeChangedNodes=function(data){if(!this.MutationChanges.anyAttributesChanged){return{}}var extended;var methods;if(data){extended={};methods={};var i=0;for(;i<data.length;i++){var method=data[i];extended[method]=true;methods[method.toLowerCase()]=method}}var collection={};var codeSegments=this.MutationChanges.keys();i=0;for(;i<codeSegments.length;i++){var node=codeSegments[i];var elem=this.MutationChanges.get(node);if(elem.attributes&&2===this.MutationChanges.reachabilityChange(node)){var el=node;var events=elem.getAttributeNamesMutated();var e=0;for(;e<events.length;e++){method=events[e];if(!extended||(extended[method]||elem.isCaseInsensitive&&methods[method])){var expectation=elem.getAttributeOldValue(method);if(expectation!==el.getAttribute(method)){if(methods){if(elem.isCaseInsensitive){method=methods[method]}}collection[method]=collection[method]||[];collection[method].push(el)}}}}}return collection},mProjection.prototype.getOldCharacterData=function(elem){var change=this.MutationChanges.get(elem);if(!change||!change.characterData){throw Error("CharacterData change not occured")}return options.characterDataOldValue},mProjection.prototype.getCharacterDataChanged=function(){if(!this.MutationChanges.anyCharacterDataChanged){return[]}var codeSegments=this.MutationChanges.keys();var acc=[];var i=0;for(;i<codeSegments.length;i++){var node=codeSegments[i];if(2===this.MutationChanges.reachabilityChange(node)){var options=this.MutationChanges.get(node);if(options.characterData){if(node.textContent!=options.characterDataOldValue){acc.push(node)}}}}return acc},mProjection.prototype.getChildlistChange=function(elem){var clchange=this.childListChangeMap.get(elem);if(!clchange){clchange=new ChildListChange;this.childListChangeMap.set(elem,clchange)}return clchange},mProjection.prototype.processChildlistChanges=function(){function recordOldPrevious(elem,node){if(!!elem){if(!change.oldPrevious.has(elem)){if(!change.added.has(elem)){if(!change.maybeMoved.has(elem)){if(!(node&&(change.added.has(node)||change.maybeMoved.has(node)))){change.oldPrevious.set(elem,node)}}}}}}if(!this.childListChangeMap){this.childListChangeMap=new NodeMap;var i=0;for(;i<this.mutations.length;i++){var mutation=this.mutations[i];if("childList"==mutation.type&&(2===this.MutationChanges.reachabilityChange(mutation.target)||this.calcOldPreviousSibling)){var change=this.getChildlistChange(mutation.target);var oldPrevious=mutation.previousSibling;var j=0;for(;j<mutation.removedNodes.length;j++){var elem=mutation.removedNodes[j];recordOldPrevious(elem,oldPrevious);if(change.added.has(elem)){change.added.deletera(elem)}else{change.removed.set(elem,true);change.maybeMoved.deletera(elem)}oldPrevious=elem}recordOldPrevious(mutation.nextSibling,oldPrevious);j=0;for(;j<mutation.addedNodes.length;j++){elem=mutation.addedNodes[j];if(change.removed.has(elem)){change.removed.deletera(elem);change.maybeMoved.set(elem,true)}else{change.added.set(elem,true)}}}}}},mProjection.prototype.wasReordered=function(elem){function isMoved(node){if(!node){return false}if(!change.maybeMoved.has(node)){return false}var dataAndEvents=change.moved.get(node);if(void 0!==dataAndEvents){return dataAndEvents}if(visited.has(node)){dataAndEvents=true}else{visited.set(node,true);dataAndEvents=getPrevious(node)!==getOldPrevious(node)}if(visited.has(node)){visited.deletera(node);change.moved.set(node,dataAndEvents)}else{dataAndEvents=change.moved.get(node)}return dataAndEvents}function getOldPrevious(elem){var node=data_user.get(elem);if(void 0!==node){return node}node=change.oldPrevious.get(elem);for(;node&&(change.removed.has(node)||isMoved(node));){node=getOldPrevious(node)}if(node===void 0){node=elem.previousSibling}data_user.set(elem,node);return node}function getPrevious(elem){if(api.has(elem)){return api.get(elem)}var node=elem.previousSibling;for(;node&&(change.added.has(node)||isMoved(node));){node=node.previousSibling}api.set(elem,node);return node}if(!this.MutationChanges.anyParentsChanged){return false}this.processChildlistChanges();var tmp=elem.parentNode;var hasBody=this.MutationChanges.get(elem);if(hasBody){if(hasBody.oldParentNode){tmp=hasBody.oldParentNode}}var change=this.childListChangeMap.get(tmp);if(!change){return false}if(change.moved){return change.moved.get(elem)}change.moved=new NodeMap;var visited=new NodeMap;var data_user=new NodeMap;var api=new NodeMap;return change.maybeMoved.keys().forEach(isMoved),change.moved.get(elem)};return mProjection}();var MutationResult=function(){function mutationResult(projection,query){var summary=this;this.projection=projection;this.added=[];this.removed=[];this.reparented=query.all||query.element?[]:void 0;this.reordered=query.all?[]:void 0;projection.getChanged(this,query.elementFilter,query.characterData);if(query.all||(query.attribute||query.attributeList)){var pdataCur=query.attribute?[query.attribute]:query.attributeList;var attributeChanged=projection.attributeChangedNodes(pdataCur);if(query.attribute){this.valueChanged=attributeChanged[query.attribute]||[]}else{this.attributeChanged=attributeChanged;if(query.attributeList){query.attributeList.forEach(function(attrName){if(!summary.attributeChanged.hasOwnProperty(attrName)){summary.attributeChanged[attrName]=[]}})}}}if(query.all||query.characterData){var valueChanged=projection.getCharacterDataChanged();if(query.characterData){this.valueChanged=valueChanged}else{this.characterDataChanged=valueChanged}}if(this.reordered){this.getOldPreviousSibling=projection.getOldPreviousSibling.bind(projection)}}return mutationResult.prototype.getOldParentNode=function(owner){return this.projection.getOldParentNode(owner)},mutationResult.prototype.getOldAttribute=function(node,deepDataAndEvents){return this.projection.getOldAttribute(node,deepDataAndEvents)},mutationResult.prototype.getOldCharacterData=function(owner){return this.projection.getOldCharacterData(owner)},mutationResult.prototype.getOldPreviousSibling=function(owner){return this.projection.getOldPreviousSibling(owner)},mutationResult}();var MutationSummary=function(){function MutationSummary(options){var suite=this;this.connected=false;this.iframes=new MutationSummary.NodeMap;var pendingIframes=options.iframes;delete options.iframes;this.options=MutationSummary.validateOptions(options);this.observerOptions=MutationSummary.createObserverOptions(this.options.queries);this.root=this.options.rootNode;this.callback=this.options.callback;this.handler=options.handler||null;this.flag=0;this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(query){return query.elementFilter?query.elementFilter:[]}));if(!this.elementFilter.length){this.elementFilter=void 0}this.calcReordered=this.options.queries.some(function($q){return $q.all});this.queryValidators=[];if(MutationSummary.createQueryValidator){this.queryValidators=this.options.queries.map(function(query){return MutationSummary.createQueryValidator(suite.root,query)})}this.observer=new MutationObserver(function(deepDataAndEvents){suite.observerCallback(deepDataAndEvents)});var keys=pendingIframes.keys();for(var z=0;z<keys.length;z++){this.addIframe(keys[z],false)}this.reconnect()}MutationSummary.PAUSE_MUTATION=1;MutationSummary.PAUSE_TIMEOUT=300;MutationSummary.MAX_ADDED_NODES=10000;MutationSummary.MAX_ADDED_NODES_PAUSE=100;MutationSummary.prototype.addIframe=function(iframe,observe){var iframeDoc={};if(iframe.contentWindow){iframeDoc=iframe.contentDocument||iframe.contentWindow.document}else{iframeDoc=iframe}if(observe==undefined){observe=true}this.iframes.set(iframeDoc,true);if(observe){this.observer.observe(iframeDoc,this.observerOptions)}CAVUA.updateDOM(iframeDoc);if(iframe.contentWindow){CAVNV.plugins.AjaxMonitor.addIframe(iframe.contentWindow);CAVNV.plugins.ErrorTracing.addIframe(iframe.contentWindow)}};MutationSummary.prototype.removeIframe=function(iframe){this.iframes.deletera(iframe)};return MutationSummary.createObserverOptions=function(queries){function observeAttributes(attributes){if(!observerOptions.attributes||variables){if(observerOptions.attributes=true,observerOptions.attributeOldValue=true,!attributes){return variables=void 0,void 0}variables=variables||{};attributes.forEach(function(key){variables[key]=true;variables[key.toLowerCase()]=true})}}var variables;var observerOptions={childList:true,subtree:true};queries.forEach(function(request){if(request.characterData){return observerOptions.characterData=true,observerOptions.characterDataOldValue=true,void 0}if(request.all){return observeAttributes(),observerOptions.characterData=true,observerOptions.characterDataOldValue=true,void 0}if(request.attribute){return observeAttributes([request.attribute.trim()]),void 0}var attributes=elementFilterAttributes(request.elementFilter).concat(request.attributeList||[]);if(attributes.length){observeAttributes(attributes)}});if(variables){observerOptions.attributeFilter=Object.keys(variables)}return observerOptions},MutationSummary.validateOptions=function(options){var option;for(option in options){if(!(option in MutationSummary.optionKeys)){throw Error("Invalid Mutation Observer Option - "+option)}}if("function"!=typeof options.callback){throw Error("Callback missing for mutation observer")}if(!options.queries||!options.queries.length){throw Error("Mutation query is empty")}var obj={callback:options.callback,rootNode:options.rootNode||document,observeOwnChanges:!!options.observeOwnChanges,oldPreviousSibling:!!options.oldPreviousSibling,queries:[]};var i=0;for(;i<options.queries.length;i++){var request=options.queries[i];if(request.all){obj.queries.push({all:true})}else{if("attribute" in request){var query={attribute:validateAttribute(request.attribute)};obj.queries.push(query)}else{obj.queries.push({characterData:true})}}}return obj},MutationSummary.prototype.createSummaries=function(data){if(!data||!data.length){return[]}var mproj=new MutationProjection(this.root,data,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling);var geometries=[];var i=0;for(;i<this.options.queries.length;i++){geometries.push(new MutationResult(mproj,this.options.queries[i]))}return geometries},MutationSummary.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(data){if(dataAndEvents){dataAndEvents.recordPreviousState()}})},MutationSummary.prototype.runQueryValidators=function(collection){this.queryValidators.forEach(function(validator,index){if(validator){validator.validate(collection[index])}})},MutationSummary.prototype.changesToReport=function(obj){return obj.some(function(summary){var summaryProps=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(summaryProps.some(function(prop){return summary[prop]&&summary[prop].length})){return true}if(summary.attributeChanged){var array=Object.keys(summary.attributeChanged);var i=array.some(function(attrName){return !!summary.attributeChanged[attrName].length});if(i){return true}}return false})},MutationSummary.getChangeNodesCount=function(mutationRecord){var nMap=new this.NodeMap;function count(e){var c=0;for(var z=0;z<e.childNodes.length;z++){var isCounted=nMap.get(e.childNodes[z]);if(!isCounted){nMap.set(e.childNodes[z],true);c++;if(e.childNodes[z].childNodes.length){c+=count(e.childNodes[z])}}}return c}var total=0;for(var z=0;z<mutationRecord.length;z++){if(mutationRecord[z].type=="childList"){for(var y=0;y<mutationRecord[z].addedNodes.length;y++){total+=1;if(mutationRecord[z].addedNodes[y].childNodes.length){total+=count(mutationRecord[z].addedNodes[y])}}}}return total},MutationSummary.prototype.pauseObserver=function(){this.flag|=MutationSummary.PAUSE_MUTATION;var me=this;if(this.timer!=undefined){clearTimeout(this.timer);this.timer=undefined}this.timer=setTimeout(function(){me.resumeObserver()},MutationSummary.PAUSE_TIMEOUT)},MutationSummary.prototype.resumeObserver=function(){CAVNV.snapshotInstance++;if(!CAVNV.sid){CAVNV.pendingSnapshot[CAVNV.snapshotInstance]=CAVNV.plugins.DOMWATCHER2.getDOM(true,true)}else{CAVNV.send_dom(true,CAVNV.snapshotInstance)}if(!!CAVNV.window.NBridge){CAVNV.window.NBridge.getAppParam(JSON.stringify({snapshotInstance:CAVNV.snapshotInstance.toString()}))}if(!!CAVNV.window.webkit&&!!CAVNV.window.webkit.messageHandlers.appNativeSync){CAVNV.window.webkit.messageHandlers.appNativeSync.postMessage(JSON.stringify({snapshotInstance:CAVNV.snapshotInstance.toString()}))}var mstate={type:NVDOMObserver.USERACTION_MUTATION,state:NVDOMObserver.EXPECTED_MUTATION};this.handler.queue.push({m:mstate,t:new Date().getTime(),s:CAVNV.snapshotInstance,d:[[],[],[],[]]});this.handler.send();this.flag&=~MutationSummary.PAUSE_MUTATION},MutationSummary.prototype.observerCallback=function(mutationRecord){this.observer.disconnect();var addedNodes=MutationSummary.getChangeNodesCount(mutationRecord);if(((this.flag&MutationSummary.PAUSE_MUTATION)!=0&&addedNodes>MutationSummary.MAX_ADDED_NODES_PAUSE)||(addedNodes>MutationSummary.MAX_ADDED_NODES)){this.pauseObserver()}if((this.flag&MutationSummary.PAUSE_MUTATION)==0){var result=this.createSummaries(mutationRecord);if(this.changesToReport(result)){this.callback(result)}}if(this.connected){this.observer.observe(this.root,this.observerOptions);var iframes=this.iframes?this.iframes.keys():[];for(var z=0;z<iframes.length;z++){this.observer.observe(iframes[z],this.observerOptions)}}},MutationSummary.prototype.reconnect=function(){if(this.connected){throw Error("Already Connected")}this.observer.observe(this.root,this.observerOptions);var iframes=this.iframes?this.iframes.keys():[];for(var z=0;z<iframes.length;z++){this.observer.observe(iframes[z],this.observerOptions)}this.connected=true},MutationSummary.prototype.takeSummaries=function(){if(!this.connected){throw Error("Mutation Observer not connected")}var suiteView=this.createSummaries(this.observer.takeRecords());return this.changesToReport(suiteView)?suiteView:void 0},MutationSummary.prototype.disconnect=function(){var takeSummaries=this.takeSummaries();return this.observer.disconnect(),this.connected=false,takeSummaries},MutationSummary.NodeMap=NodeMap,MutationSummary.optionKeys={callback:true,queries:true,rootNode:true,oldPreviousSibling:true,observeOwnChanges:true,handler:true},MutationSummary}();var NVDOMObserver=function(){function getMatchesSelector(){var proto=document.createElement("div");return"function"==typeof proto.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof proto.mozMatchesSelector?"mozMatchesSelector":"function"==typeof proto.msMatchesSelector?"msMatchesSelector":null}function f(rootNode,filter,queries,sendDom,threshold){var nvdo=this;this.ENCRYPTED=CAVNV.ENCRYPTED=1;this.ENCODED=CAVNV.ENCODED=2;this.NONE=CAVNV.NONE=0;this.FILTER=1;this.FILTER_ATTR=2;this.target=rootNode;this.iframes=new MutationSummary.NodeMap;this.nextId=1;this.knownNodes=new MutationSummary.NodeMap;this.filter=filter;this.matchesSelectorFn=getMatchesSelector();this.failedCSS=0;this.domTree=this.getDOM(false,false);this.queue=[];this.threshold=threshold||30;var MOQuery=[{all:true}];if(queries){MOQuery=MOQuery.concat(queries)}this.mutationSummary=new MutationSummary({rootNode:rootNode,callback:function(value){nvdo.formatMutationData(value)},queries:MOQuery,iframes:this.iframes,handler:this});this.iframes=null}f.prototype.addIframe=function(iframe){var me=this;var cb=function(iframe){if(!me.mutationSummary){var iframeDoc=iframe.contentDocument||iframe.contentWindow.document;me.iframes.set(iframeDoc,true)}else{me.mutationSummary.addIframe(iframe)}};var doc=iframe.contentDocument||iframe.contentWindow.document;var complete=false;if(doc.readyState=="complete"){complete=true;doc.__ana__=iframe.__ana__;cb(iframe)}function cb2(e){var doc=null;if(e.target.src&&(e.target.src.indexOf("javascript:")==0)){return}try{doc=e.target.contentDocument||e.target.contentWindow.document}catch(e){return}if(!doc){return}doc.__ana__=e.target.__ana__;var child=doc.firstChild,childNode;var elements=[];for(;child;child=child.nextSibling){childNode=me.getNVNode(child,true,false);if(childNode){childNode.parentNode={id:doc.__ana__};elements.push(childNode)}}me.queue.push({m:{type:0,state:1},t:new Date().getTime(),d:[[],elements,[],[]]});me.send();cb(e.target)}iframe.addEventListener("load",cb2);if(CAVUA.utils.isLegacyIE()){var IWin=CAVUA.utils.getCurrentIFrameWindow(pr_module);if(IWin){if(IWin.document){CAVUA.utils.addEventListener(IWin.document,"readystatechange",cb2)}}}return complete};f.prototype.removeIframe=function(iframe){if(!this.mutationSummary){this.iframes.deletera(iframe)}else{this.mutationSummary.removeIframe(iframe)}};f.prototype.send=function(force){if(CAVNV.__uaEnabled==false){CAVNV.plugins.DOMWATCHER2.stop();return}if(this.queue.length==0){return}force=force||false;if(CAVNV.sid&&(force||this.queue.length>=this.threshold)){for(var z=0;z<this.queue.length;z++){this.queue[z].t=parseInt(CAVNV.utils.nv_time(this.queue[z].t))}var data="";if(!CAVNV.messageVersion){for(var i=0;i<this.queue.length;i++){data+=JSON.stringify(this.queue[i])+"\n"}}else{data=JSON.stringify(this.queue)+"\n"}this.queue=[];var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=domwatcher&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+CAVNV.pageIndex+"|0|";if(CAVNV.plugins.DOMWATCHER2.getConfig().compressDomchanges==true&&data.length>=1024&&CAVNV.config.enableWorker==true&&typeof Worker!="undefined"){var url2=url+"2&lts="+CAVNV.lts;var options={ocxFilter:CAVNV.ocxFilter};if(CAVNV.messageVersion==1){options.contentType="applicable/json"}if(CAVNV.send_dom_using_worker(data,url2,"domwatcher",options)==true){return true}}url+="1&lts="+CAVNV.lts;if(CAVNV.config.ocxFilter.enabled==true&&CAVNV.ocxFilter==0){IDB.post(CAVNV.sid,CAVNV.pageInstance,{url:url,data:data,module:"domwatcher"})}else{CAVNV.utils.sendData(url,data,"domwatcher")}}};f.prototype.clearQ=function(){this.queue=[]};f.mTable={id:"i",nodeType:"t",tagName:"n",attributes:"a",childNodes:"c",textContent:"T",parentNode:"p",previousSibling:"s"};f.minify=function(input){var mapping=f.mTable;if(input==undefined||input==null){return input}if(typeof input=="object"){if(typeof input.length!="undefined"){var out=new Array(input.length);for(var i=0;i<input.length;i++){out[i]=f.minify(input[i])}return out}else{var out={};for(var key in input){if(mapping[key]){if(key!="attributes"){out[mapping[key]]=f.minify(input[key])}else{out[mapping[key]]=input[key]}}else{out[key]=f.minify(input[key])}}return out}}else{return input}};f.prototype.formatMutationData=function(data){if(CAVNV.plugins.DOMWATCHER2.getConfig().filterUnexpected==true&&CAVNV.plugins.DOMWATCHER2.getMutationState().state==f.UNEXPECTED_MUTATION){return}var st=new Date().getTime();var nvdo=this;var summary=data[0];var tnode;var removedNodes=summary.removed.map(function(node){if(CAVNV.inputNodes&&node.tagName&&(node.tagName=="INPUT"||node.tagName=="SELECT")){CAVNV.inputNodes.deletera(node)}if(node.tagName&&node.tagName=="IFRAME"){nvdo.removeIframe(node)}tnode=nvdo.getNVNode2(node,true);if(!tnode){return null}nvdo.forgetNode(node);if(tnode&&tnode.parentNode&&!nvdo.knownNodes.getNode(tnode.parentNode)){return null}return tnode});removedNodes=removedNodes.filter(function(e){return e});if(CAVNV.inputNodes){summary.added.forEach(function(node){if(node.tagName&&((node.tagName=="INPUT"&&!(node.type=="hidden"||node.type=="reset"||node.type=="submit"))||node.tagName=="SELECT")){var d={time:new Date().getTime(),value:node.value};if(node.tagName=="SELECT"){d.value="";if(node.selectedIndex<node.options.length&&node.selectedIndex>=0){d.value=node.options[node.selectedIndex].text}}CAVNV.inputNodes.set(node,d)}})}var addedNodes=this.combineAddedNodes(summary.added,summary.reparented,summary.reordered);var attributeChangedNodes=this.combineAttributes(summary.attributeChanged);if(addedNodes.length>0||attributeChangedNodes.length>0){CAVUA.logMM()}var cdChangedNodes=summary.characterDataChanged.map(function(node){var elem=nvdo.getNVNode2(node,false);if(!elem){return null}var eeflag=nvdo.getEEFlag(node);var valObj=nvdo.getEEValue(node.textContent,eeflag);elem.textContent=valObj.v;if(valObj.ev){elem.encTextContent=valObj.ev}return elem});nvdo.applyCheckpoint(addedNodes,attributeChangedNodes,cdChangedNodes);if(removedNodes.length||addedNodes.length||attributeChangedNodes.length||cdChangedNodes.length){var mstate=CAVNV.plugins.DOMWATCHER2.getMutationState();this.queue.push({m:{type:mstate.type,state:mstate.state},t:new Date().getTime(),d:[f.minify(removedNodes),f.minify(addedNodes),f.minify(attributeChangedNodes),f.minify(cdChangedNodes)]});this.send()}CAVNV.log("CAVNV Timing: formatMutationData - "+(new Date().getTime()-st)+" added "+addedNodes.length+",removed - "+removedNodes.length+",attribute - "+attributeChangedNodes.length+",textdata - "+cdChangedNodes.length)};f.prototype.applyCheckpoint=function(addedNodes,attributeChangedNodes,cdChangedNodes){var changeNodes=[];var elem,parentElement;var me=this;var checkpoints=CAVNV.plugins.CHECKPOINT.getCheckpoint();function combine(node){if(!node){return}var elem=me.knownNodes.getNode(node.id);if(elem.nodeType==elem.TEXT_NODE){if(elem.parentElement){var pNode=me.getNVNode(elem.parentElement);if(pNode){changeNodes.push(me.getNVNode(elem.parentElement).id)}}}else{changeNodes.push(node.id)}}addedNodes.forEach(combine);attributeChangedNodes.forEach(combine);cdChangedNodes.forEach(combine);changeNodes=changeNodes.sort();var checkCache;var cpelementCache;var pflag;var cpStateHash={};function getCheckpointElement(node,selector){if(node==null||node==me.target){return null}var cnode;cnode=checkCache.get(node);if(cnode==undefined){cnode=getCheckpointElement(node.parentNode,selector)||((me.matchesSelector(node,selector)==true)?node:null)}checkCache.set(node,cnode);return cnode}var prevId=-1;var cpelem;var cpState;for(var a=0;a<checkpoints.length;a++){if(checkpoints[a].scope!=1&&checkpoints[a].scope!=99){continue}checkCache=new MutationSummary.NodeMap;cpelementCache=new MutationSummary.NodeMap;prevId=-1;cpStateHash[checkpoints[a].idx]=false;for(var z=0;z<changeNodes.length;z++){if(prevId!=changeNodes[z]){prevId=changeNodes[z];elem=me.knownNodes.getNode(prevId);cpelem=getCheckpointElement(elem,checkpoints[a].selector);if(cpelem){pflag=cpelementCache.get(cpelem);if(pflag!=true){cpState=CAVNV.plugins.CHECKPOINT.applyCheckpoint2(cpelem,1,checkpoints[a]);cpelementCache.set(cpelem,true);cpStateHash[checkpoints[a].idx]=cpState;if(cpState==true){break}}}}}checkCache=null;cpelementCache=null}CAVNV.plugins.CHECKPOINT.resetPrevState(cpStateHash,checkpoints)};f.prototype.matchesSelector=function(node,selector){if(!this.matchesSelectorFn||node.nodeType!=node.ELEMENT_NODE){return false}return node[this.matchesSelectorFn](selector)};f.prototype.addEncryptedElement=function(d){var enc=CAVNV.encryptedElement;for(var z=0;z<enc.length;z++){this.encryptElement(d,enc[z])}};f.prototype.encryptElement=function(doc,rule){var e=[];try{e=doc.querySelectorAll(rule.id)}catch(e){return}for(var y=0;y<e.length;y++){e[y].__nvenc=rule.mode;e[y].setAttribute(rule.mode==1?"nvencrypted":"nvsensitive","")}if(!CAVNV.monitorIframe){return}if(rule.Iframe){var iframe=doc.getElementsByTagName("iframe");for(var z=0;z<iframe.length;z++){try{this.encryptElement(iframe[z].contentDocument,rule)}catch(e){continue}}}};f.prototype.markFilterElement=function(d){var e;for(var z=0;z<this.filter.length;z++){this.filterElement(d,this.filter[z])}};f.prototype.filterElement=function(doc,filter){var e=[];try{e=doc.querySelectorAll(filter.element)}catch(e){return}for(var y=0;y<e.length;y++){if(filter.aChange){e[y].__nvf=this.FILTER_ATTR}else{e[y].__nvf=this.FILTER}}if(!CAVNV.monitorIframe){return}if(filter.Iframe){var iframe=doc.getElementsByTagName("iframe");for(var z=0;z<iframe.length;z++){try{this.filterElement(iframe[z].contentDocument,filter)}catch(e){continue}}}};f.prototype.getDOM=function(update,diff){var elements=[];update=update||false;var tt=new Date().getTime();if(!this.domTree||update){this.addEncryptedElement(CAVNV.window.document);this.markFilterElement(CAVNV.window.document);var child=this.target.firstChild,childNode;for(;child;child=child.nextSibling){childNode=this.getNVNode(child,true,false,false,diff);if(childNode){elements.push(childNode)}}elements=f.minify(elements);CAVNV.log("CAVNV Timing: getDOM - "+(new Date().getTime()-tt))}else{elements=this.domTree}return elements};f.prototype.disconnect=function(){if(this.mutationSummary){this.mutationSummary.disconnect();this.mutationSummary=void 0}},f.prototype.rememberNode=function(elem){var data={id:this.knownNodes.nodeId(elem)};if(elem.parentNode){var p=this.knownNodes.get(elem.parentNode);if(p){data.parentNode=p.id}}return this.knownNodes.set(elem,data),data},f.prototype.forgetNode=function(node){this.knownNodes.deletera(node)},f.prototype.getID=function(node){return this.knownNodes.nodeId(node)},f.prototype.getNode=function(id){return this.knownNodes.getNode(id)},f.prototype.getEEValue=function(value,eeflag){if(eeflag==this.ENCODED){return{v:value.replace(/[^\s]/g,"*")}}else{if(eeflag==this.ENCRYPTED){if(CAVNV.rsaEncryption){return{v:value.replace(/[^\s]/g,"*"),ev:CAVNV.plugins.EQueue.add(value)}}else{return{v:value.replace(/[^\s]/g,"*"),ev:CAVNV.utils.encodeText(value,CAVNV.utils.encode)}}}}return{v:value}};f.prototype.getEEFlag=function(node){return node.__nvenc||(node.parentElement?node.parentElement.__nvenc:0)};f.prototype.getFilterFlag=function(node){return node.__nvf||(node.parentElement?node.parentElement.__nvf:0)};f.prototype.getNVNode2=function(node,pflag){var data=this.knownNodes.get(node);if(!data){return null}if(pflag){return data}return{id:data.id}};f.prototype.getNVNode=function(node,followChild,eeflag,pflag,forceFollowChild){if(null===node){return null}var oldNode=false;var elem;var data=this.knownNodes.get(node);if(data===null){return null}if(void 0!==data){if(!forceFollowChild){if(pflag){return data}return{id:data.id}}elem={nodeType:node.nodeType,id:data.id}}if(oldNode==false){var flag=this.getFilterFlag(node);node.__nvf=flag;if(flag==this.FILTER){this.knownNodes.set(node,null);if(node.nodeType==Node.ELEMENT_NODE&&(!node.parentElement||this.getFilterFlag(node.parentElement)!=this.FILTER)){var e={id:this.knownNodes.nodeId(node),nodeType:node.nodeType,tagName:"http://www.w3.org/2000/svg"==node.namespaceURI?"svg:"+node.tagName:node.tagName};if(node.id){e.attributes={id:node.id}}return e}return null}eeflag=eeflag||this.getEEFlag(node);node.__nvenc=eeflag;var valObj;if(!elem){elem={nodeType:node.nodeType,id:this.rememberNode(node).id}}switch(elem.nodeType){case Node.DOCUMENT_TYPE_NODE:var data=node;elem.name=data.name;elem.publicId=data.publicId;elem.systemId=data.systemId;break;case Node.COMMENT_NODE:this.knownNodes.set(node,null);return null;case Node.TEXT_NODE:valObj=this.getEEValue(node.textContent,eeflag);elem.textContent=valObj.v;if(valObj.ev){elem.encTextContent=valObj.ev}break;case Node.ELEMENT_NODE:var element=node;elem.tagName="http://www.w3.org/2000/svg"==element.namespaceURI?"svg:"+element.tagName:element.tagName;elem.attributes={};var i=0;for(;i<element.attributes.length;i++){var attr=element.attributes[i];if(CAVNV.monitorIframe&&elem.tagName.toLowerCase()=="iframe"&&attr.name.toLowerCase()=="src"){try{if((attr.value.indexOf("javascript:")==-1)&&(element.contentDocument||(element.contentWindow&&element.contentWindow.document))){continue}else{elem.attributes[attr.name]=attr.value}}catch(e){elem.attributes[attr.name]=attr.value}}else{elem.attributes[attr.name]=attr.value}}if(elem.tagName=="SELECT"){elem.attributes.index=element.selectedIndex}if("SCRIPT"==elem.tagName||"NOSCRIPT"==elem.tagName){this.knownNodes.set(node,null);return null}if("INPUT"==elem.tagName||"TEXTAREA"==elem.tagName){if("INPUT"==elem.tagName){if(element.type&&element.type=="hidden"){this.knownNodes.set(node,null);return null}var text=element.getAttribute("value")}else{if("TEXTAREA"==elem.tagName){if(element.childNodes.length>0){text=element.childNodes[0].nodeValue}else{text=""}}}if(null!=element.value){if(""!=element.value){if(element.value!=text){elem.attributes.nvvalue=element.value}}}}if("INPUT"==elem.tagName){if(eeflag){if(elem.attributes.value){valObj=this.getEEValue(elem.attributes.value,eeflag);elem.attributes.value=valObj.v;if(valObj.ev){elem.attributes.encValue=valObj.ev}}if(elem.attributes.placeholder){valObj=this.getEEValue(elem.attributes.placeholder,eeflag);elem.attributes.placeholder=valObj.v;if(valObj.ev){elem.attributes.encPlaceholder=valObj.ev}}if(elem.attributes.nvvalue){valObj=this.getEEValue(elem.attributes.nvvalue,eeflag);elem.attributes.nvvalue=valObj.v;if(valObj.ev){elem.attributes.encNvalue=valObj.ev}}if(elem.attributes.defaultValue){valObj=this.getEEValue(elem.attributes.defaultValue,eeflag);elem.attributes.defaultValue=valObj.v;if(valObj.ev){elem.attributes.encDefaultValue=valObj.ev}}}}if(element.tagName=="IMG"&&elem.attributes.src!=""){if(element.complete&&element.naturalWidth==0){elem.attributes.failed=true}}}}if(CAVNV.monitorIframe&&element&&element.nodeType==Node.ELEMENT_NODE&&element.tagName.toLowerCase()=="iframe"){if(typeof element.src=="string"&&element.src.indexOf("javascript:")>-1){return elem}try{if(element.contentDocument){var iframe=element;element=element.contentDocument||element.contentWindow.document;if(oldNode==false){if(this.addIframe(iframe)==false){return elem}}}}catch(e){CAVNV.log("Error while getting content document");return elem}}var maxLI=50;if(followChild&&element&&element.childNodes.length){elem.childNodes=[];var isUL=(element.tagName=="UL"),isLI=false;var numLI=0;var child=element.firstChild;var childNode;for(;child;child=child.nextSibling){isLI=(child.tagName=="LI");if(isUL&&isLI&&numLI>maxLI){continue}childNode=this.getNVNode(child,true,eeflag,pflag,forceFollowChild);if(childNode){elem.childNodes.push(childNode);if(isLI){numLI++}}}}return elem},f.prototype.combineAddedNodes=function(added,reparented,reordered){var nvmo=this;var records=added.concat(reparented).concat(reordered);if(records.length==0){return[]}this.addEncryptedElement(CAVNV.window.document);this.markFilterElement(CAVNV.window.document);var nodemap=new MutationSummary.NodeMap;records.forEach(function(node){var elem=node.parentNode;var data=nodemap.get(elem);if(!data){data=new MutationSummary.NodeMap;nodemap.set(elem,data)}data.set(node,true)});var allnodes=[];nodemap.keys().forEach(function(elem){var pnode=nvmo.getNVNode2(elem,false);if(!pnode){return}var datamap=nodemap.get(elem);var nodes=datamap.keys();for(;nodes.length;){var node=nodes[0];for(;node.previousSibling&&datamap.has(node.previousSibling);){node=node.previousSibling}for(;node&&datamap.has(node);){var child=nvmo.getNVNode(node,true);if(child){var p=null;for(var ps=node.previousSibling;!p&&ps;ps=ps.previousSibling){p=nvmo.getNVNode(ps)}child.previousSibling=p;child.parentNode=nvmo.getNVNode(node.parentNode);allnodes.push(child)}datamap.deletera(node);node=node.nextSibling}nodes=datamap.keys()}});return allnodes},f.prototype.combineAttributes=function(attrList){var nvmo=this;var nodemap=new MutationSummary.NodeMap;Object.keys(attrList).forEach(function(attr){attrList[attr].forEach(function(elem){if(elem.tagName){if(elem.tagName=="IFRAME"&&attr=="src"&&CAVNV.monitorIframe){try{if((elem.getAttribute(attr).indexOf("javascript:")==-1)&&((elem.contentWindow&&elem.contentWindow.document)||elem.contentDocument)){return}}catch(e){}}else{if((attr=="value"||attr=="placeholder")&&((elem.tagName=="INPUT"&&elem.type=="password")||nvmo.getEEFlag(elem))){return}}}var dataAndEvents=nodemap.get(elem);if(!dataAndEvents){dataAndEvents=nvmo.getNVNode2(elem,false);if(dataAndEvents===null||nvmo.getFilterFlag(elem)==nvmo.FILTER_ATTR){return}dataAndEvents.attributes={};nodemap.set(elem,dataAndEvents)}dataAndEvents.attributes[attr]=elem.getAttribute(attr)})});return nodemap.keys().map(function(elem){return nodemap.get(elem)})};f.UNEXPECTED_MUTATION=0,f.EXPECTED_MUTATION=1,f.XHR_MUTATION=0,f.USERACTION_MUTATION=2;f.NA=-1;return f}();return NVDOMObserver})();(function(window){if(!window.performance||!window.performance.mark){return}var markIdx=0,measureIdx=0;var clearMarks=window.performance.clearMarks;window.performance.clearMarks=function(){markIdx=0;clearMarks.call(window.performance)};var clearMeasures=window.performance.clearMeasures;window.performance.clearMeasures=function(){measureIdx=0;clearMeasures.call(window.performance)};window.performance.getEntriesByTypeNV=function(type){var inn=window.performance.getEntriesByType(type);var out;if(type=="mark"){out=inn.slice(markIdx);markIdx=inn.length;return out}if(type=="measure"){out=inn.slice(measureIdx);measureIdx=inn.length;return out}return inn}})(w);window.XMLProfiler=(function(){function applyFilter(url,f){function compPath(url,f){if(f.path===undefined&&f.path_regex===undefined){return true}else{if(f.path&&url.pathname.indexOf(f.path)==0){return true}else{if(f.path_regex){try{if(f.path_regex.test(url.pathname)==true){return true}}catch(e){}}}}return false}if(f.domain){if(f.domain==url.host){if(compPath(url,f)==true){return true}}}else{if(f.domain_regex){try{if(!f.domain_regex.test(url.host)){return false}}catch(e){return false}if(compPath(url,f)==true){return true}}else{if(compPath(url,f)==true){return true}}}return false}function isFiltered(URL,filters){if(typeof URL=="string"){URL=getURL(URL)}var whitelistEntry=[],blacklistEntry=[];if(typeof filters.mode=="string"){if(filters.mode=="blacklist"){blacklistEntry=filters.entry||[]}else{whitelistEntry=filters.entry||[]}}else{whitelistEntry=filters.whitelist||[];blacklistEntry=filters.blacklist||[]}var matched=false;var f,ff;for(var z=0;z<whitelistEntry.length;z++){f=whitelistEntry[z];if(applyFilter(URL,f)){matched=true;break}}if(whitelistEntry.length!=0&&matched==false){return true}for(var zz=0;zz<blacklistEntry.length;zz++){ff=blacklistEntry[zz];if(applyFilter(URL,ff)){return true}}return false}function isFailedStatus(status){var l=parseInt(status/100);if(l==0||l==1||l==2||l==3){return false}return true}function getURL(url){var a=document.createElement("a");a.href=url;var aa={hash:a.hash,host:a.host,hostname:a.hostname,href:a.href,origin:a.origin,pathname:a.pathname,port:a.port,protocol:a.protocol,search:a.search};if(aa.pathname[0]!="/"){aa.pathname="/"+aa.pathname}var d=aa.host.split(":");if(aa.protocol=="http:"&&d[1]&&d[1]==80){aa.host=d[0]}else{if(aa.protocol=="https:"&&d[1]&&d[1]==443){aa.host=d[0]}else{if(aa.protocol==""){aa.protocol=document.location.protocol}}}aa.origin=aa.protocol+"//"+aa.host;return aa}var xhrReadyStats={0:"unset",1:"opened",2:"header_received",3:"loading",4:"done"};var REQUEST_STARTED=0;var REQUEST_COMPLETED=1;var REQUEST_FAILED=2;function XMLHttpRequestWrapper(w,_nativeXHR){var nativeXHR=_nativeXHR||w.XMLHttpRequest;if(!w.location.origin){w.location.origin=w.location.protocol+"//"+w.location.host}var wrapper=function(){var xhrtimeout=-101;var xhrerror=-102;var xhrabort=-103;var xhrinternalerror=-104;var xhr=new nativeXHR();var nativeOpen=xhr.open;var nativeSend=xhr.send;var nativeSetRHeader=xhr.setRequestHeader;var clients;xhr.open=function(method,url,async){var lurl=url;if(lurl[0]=="/"&&lurl[1]!="/"){lurl=w.location.origin+lurl}else{if(!/^(http|https|\/\/)/.test(lurl)){var p=w.location.pathname;p=p.substr(0,p.lastIndexOf("/")+1);lurl=w.location.origin+p+lurl}}var URL=getURL(lurl);try{clients=xmlp.getClient(URL)}catch(e){clients=[]}if(clients.length==0){return nativeOpen.apply(xhr,arguments)}xhr.__nv={timing:{}};xhr.__nv.url=URL.protocol+"//"+URL.host+URL.pathname;xhr.__nv.nco=(w.location.origin==URL.origin);xhr.__nv.query=URL.search;xhr.__nv.method=method;xhr.__nv.initiator="xhr";if(async===false){xhr.__nv.synchronous=true}function markDone(){if(xhr.__nv.timing.loadEventEnd){return}xhr.__nv.timing.loadEventEnd=CAVNV.now();xmlp.updateRequestStats(REQUEST_COMPLETED,clients,xhr)}function setEvent(event,status){xhr.addEventListener(event,function(){if(event==="readystatechange"){xhr.__nv.timing[xhrReadyStats[xhr.readyState]]=CAVNV.now();if(xhr.readyState===4){xhr.__nv.status=xhr.status;markDone()}}else{xhr.__nv.status=(status===undefined?xhr.status:status);markDone()}})}if(xmlp.options.captureRSCtiming==true&&async!==false){setEvent("readystatechange")}setEvent("load");setEvent("timeout",xhrtimeout);setEvent("error",xhrerror);setEvent("abort",xhrabort);try{return nativeOpen.apply(xhr,arguments)}catch(z){xhr.__nv.status=xhrinternalerror;markDone()}};xhr.send=function(){if(xhr.__nv==undefined){return nativeSend.apply(xhr,arguments)}xhr.__nv.timing.requestStart=new Date().getTime();if(xmlp.options.capturePostData){if(arguments&&typeof arguments[0]=="string"&&arguments[0].length<1024){xhr.__nv.postData=arguments[0]}}xmlp.updateRequestStats(REQUEST_STARTED,clients,xhr);if(xhr.__nv.status===undefined||xhr.__nv.status!=xhrinternalerror){return nativeSend.apply(xhr,arguments)}};xhr.setRequestHeader=function(){if(xhr.__nv&&arguments[0]=="Content-Type"){xhr.__nv.rct=arguments[1]}nativeSetRHeader.apply(xhr,arguments)};return xhr};return wrapper}function fetchRequestWrapper(w){if(typeof w.fetch!=="function"||typeof w.Request!=="function"||typeof w.Response!=="function"||typeof w.Promise!=="function"||typeof window.fetch!=="function"||w.fetch.polyfill){return}if(typeof fetch_wrapper==="undefined"){fetch_wrapper=undefined}if(fetch_wrapper&&fetch_wrapper===w.fetch){return}if(fetch_wrapper&&orig_fetch&&orig_fetch===w.fetch){w.fetch=fetch_wrapper}orig_fetch=w.orig_fetch=w.fetch;fetch_wrapper=function(input,init){const FETCH_TIMEOUT=-101;const FETCH_ABORT=-103;const FETCH_ERROR=-102;const FETCH_EXCEPTION=-104;var clients;var url,method,payload,resource={__nv:{timing:{},initiator:"fetch"}};if(typeof input==="object"||input instanceof w.Request){url=input.url;method=(init&&init.method)||input.method||"GET";if(xmlp.options.capturePostData){payload=(init&&init.body)||input.body||undefined}}else{url=input;method=(init&&init.method)||"GET";if(xmlp.options.capturePostData){payload=(init&&init.body)||undefined}}var URL=getURL(url);try{clients=xmlp.getClient(URL)}catch(e){clients=[]}if(clients.length===0){return orig_fetch.apply(this,arguments)}try{resource.__nv.timing.requestStart=CAVNV.now();resource.__nv.url=URL.protocol+"//"+URL.host+URL.pathname;resource.__nv.nco=(w.location.origin==URL.origin);resource.__nv.query=URL.query;resource.__nv.method=method;if(payload){resource.__nv.postData=payload}xmlp.updateRequestStats(REQUEST_STARTED,clients,resource);var promise=orig_fetch.apply(this,arguments);return promise.then(function(response){try{resource.__nv.status=response.status;resource.statsText=response.statusText;if(resource.__nv.timing.loadEventEnd){return}resource.__nv.timing.loadEventEnd=CAVNV.now();var headers={};response.headers.forEach(function(value,name){headers[name]=value});resource.headers=headers;xmlp.updateRequestStats(REQUEST_COMPLETED,clients,resource)}catch(e){}return response},function(reason){try{if(reason&&(reason.name==="AbortError"||reason.code===20)){resource.__nv.status=FETCH_ABORT}else{resource.__nv.status=FETCH_ERROR}xmlp.updateRequestStats(REQUEST_COMPLETED,clients,resource)}catch(e){}throw reason})}catch(e){resource.__nv.status=FETCH_EXCEPTION;xmlp.updateRequestStats(REQUEST_COMPLETED,clients,resource);throw e}};w.fetch=fetch_wrapper;return fetch_wrapper}var nativeXHR=null;var xmlp=null;function XMLServer(w,d){w=w||window;d=d||document;if(!w.XMLHttpRequest||!(new w.XMLHttpRequest).addEventListener){return null}if(xmlp==null){xmlp=this;xmlp.window=w;xmlp.document=d;xmlp.beaconURL=null;if(CAVNV.beacon_url){xmlp.beaconURL=getURL(CAVNV.beacon_url)}nativeXHR=xmlp.window.XMLHttpRequest;xmlp.client={};xmlp.totalClient=0;xmlp.stats={requestStarted:0,requestCompleted:0,requestFailed:0};xmlp.domain=this.window.location.host;xmlp.options={captureRSCtiming:false,captureCrossDomain:false,capturePostData:false}}}XMLServer.prototype.updateRequestStats=function(mode,clients,xhr){var c,s;for(var z=0;z<clients.length;z++){c=xmlp.client[clients[z]];s=c.stats;switch(mode){case REQUEST_STARTED:if(z==0){xmlp.stats.requestStarted++}if(s.requestStarted==s.requestCompleted){c.trigger("ajaxStart")}c.trigger("ajaxSend",[xhr]);break;case REQUEST_COMPLETED:if(z==0){xmlp.stats.requestCompleted++;if(isFailedStatus(xhr.__nv.status)){xmlp.stats.requestFailed++}}s.requestCompleted++;c.trigger("ajaxComplete",[xhr]);if(!isFailedStatus(xhr.__nv.status)){c.trigger("ajaxSuccess",[xhr])}else{c.trigger("ajaxError",[xhr])}if(s.requestStarted==s.requestCompleted){c.trigger("ajaxStop",[xhr])}}}};XMLServer.prototype.getClient=function(URL){var clients=[];if(this.beaconURL){if(URL.host==this.beaconURL.host&&URL.pathname==this.beaconURL.pathname){return[]}}if(xmlp.options.captureCrossDomain==false){if(URL.host!=xmlp.domain){return[]}}var c,C;for(C in xmlp.client){c=xmlp.client[C];if(c.options.captureCrossDomain==false){if(URL.host!=xmlp.domain){continue}}if(!isFiltered(URL,c.options.filters)){clients.push(C)}}return clients};XMLServer.prototype.addClient=function(client){client.clientid=this.totalClient;this.client[this.totalClient++]=client;this.enable()};XMLServer.prototype.removeClient=function(client){if(client.clientid){delete this.client[client.clientid];if(Object.keys(this.client).length==0){this.disable()}}};XMLServer.prototype.enable=function(w,itrIframe){if(itrIframe==undefined){itrIframe=true}var xmlWindow=w||this.window;if(xmlWindow.__nativeXHR==undefined||xmlWindow.XMLHttpRequest==xmlWindow.__nativeXHR){if(!(xmlWindow.BOOMR&&xmlWindow.BOOMR.proxy_XMLHttpRequest)){xmlWindow.__nativeXHR=xmlWindow.XMLHttpRequest;xmlWindow.XMLHttpRequest=XMLHttpRequestWrapper(xmlWindow)}else{var XHRbom=xmlWindow.BOOMR.proxy_XMLHttpRequest;var XHRnative=xmlWindow.BOOMR.orig_XMLHttpRequest;var XHRnv=XMLHttpRequestWrapper(xmlWindow,XHRnative);var XHRnvbom=XMLHttpRequestWrapper(xmlWindow,XHRbom);xmlWindow.BOOMR.proxy_XMLHttpRequest=XHRnvbom;xmlWindow.BOOMR.orig_XMLHttpRequest=XHRnv;if(xmlWindow.XMLHttpRequest===XHRbom){xmlWindow.XMLHttpRequest=XHRnvbom}else{xmlWindow.XMLHttpRequest=XHRnv}}}if(this.window===xmlWindow){fetchRequestWrapper(xmlWindow)}if(itrIframe&&CAVNV.monitorIframe==true){var f=xmlWindow.document.getElementsByTagName("iframe");for(var z=0;z<f.length;z++){try{var iframeWindow=f[z].contentWindow;this.enable(iframeWindow,itrIframe)}catch(e){continue}}}};XMLServer.prototype.disable=function(w){var xmlWindow=w||this.window;if(xmlWindow.__nativeXHR==undefined){return}if(xmlWindow.XMLHttpRequest!=xmlWindow.__nativeXHR){xmlWindow.XMLHttpRequest=xmlWindow.__nativeXHR}if(xmlWindow===this.window&&orig_fetch&&xmlWindow.fetch!==orig_fetch){xmlWindow.fetch=orig_fetch}if(CAVNV.monitorIframe==true){var f=xmlWindow.document.getElementsByTagName("iframe");for(var z=0;z<f.length;z++){try{var iframeWindow=f[z].contentWindow;this.disable(iframeWindow)}catch(e){continue}}}};function xmlClient(options,w,d){if(!xmlp){new XMLServer(w,d);if(!xmlp){return}}this.xmlp=xmlp;this.callback={ajaxComplete:[],ajaxError:[],ajaxSend:[],ajaxStart:[],ajaxStop:[],ajaxSuccess:[]};this.setOptions(options);this.stats={requestStarted:0,requestCompleted:0,requestFailed:0};xmlp.addClient(this)}xmlClient.prototype.setOptions=function(options){this.options={captureRSCtiming:false,captureCrossDomain:false,capturePostData:false,filters:{mode:"whitelist",entry:[]}};for(k in this.options){if(options[k]!=undefined){if(k=="captureCrossDomain"&&CAVNV.config.AjaxMonitor.captureCrossDomain){options[k]=true}this.options[k]=options[k]}}for(k in this.xmlp.options){if(this.xmlp.options[k]==false){this.xmlp.options[k]=this.options[k]}}};xmlClient.prototype.addEventListener=function(event,cb,cb_scope){if(!this.callback[event]){return}var cbs=this.callback[event];for(var z=0;z<cbs.length;z++){if(cbs[z][0]==cb&&cbs[z][1]==cb_scope){return}}this.callback[event].push([cb,cb_scope||this.xmlp.window])};xmlClient.prototype.trigger=function(event,args){if(!this.callback[event]){return}var cbs=this.callback[event];args=args||[];for(var z=0;z<cbs.length;z++){try{cbs[z][0].apply(cbs[z][1],args)}catch(e){}}};xmlClient.prototype.distroy=function(){this.xmlp.removeClient(this)};xmlClient.prototype.getRequestCount=function(){return this.stats};xmlClient.isFiltered=isFiltered;xmlClient.isFailedStatus=isFailedStatus;xmlClient.getURL=getURL;return xmlClient})();w.XMLProfiler=XMLProfiler;JSON=w.JSON||(function(){JSON={};function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}w.JSON=JSON;return JSON}());if(!Array.prototype.map){Array.prototype.map=function(callback,thisArg){var T,A,k;if(this==null){throw new TypeError(" this is null or not defined")}var O=Object(this);var len=O.length>>>0;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function")}if(arguments.length>1){T=thisArg}A=new Array(len);k=0;while(k<len){var kValue,mappedValue;if(k in O){kValue=O[k];mappedValue=callback.call(T,kValue,k,O);A[k]=mappedValue}k++}return A}}var ZlibStr='Zlib=(function(){var A=void 0,x=!0,O=this;function B(C,F){var H=C.split("."),v=O;!(H[0] in v)&&v.execScript&&v.execScript("var "+H[0]);for(var p;H.length&&(p=H.shift());){!H.length&&F!==A?v[p]=F:v=v[p]?v[p]:v[p]={}}}var z="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&"undefined"!==typeof DataView;function y(p,v){this.index="number"===typeof v?v:0;this.f=0;this.buffer=p instanceof (z?Uint8Array:Array)?p:new (z?Uint8Array:Array)(32768);if(2*this.buffer.length<=this.index){throw Error("invalid index")}this.buffer.length<=this.index&&P(this)}function P(C){var F=C.buffer,H,v=F.length,p=new (z?Uint8Array:Array)(v<<1);if(z){p.set(F)}else{for(H=0;H<v;++H){p[H]=F[H]}}return C.buffer=p}y.prototype.b=function(M,N,Q){var F=this.buffer,v=this.index,H=this.f,C=F[v],p;Q&&1<N&&(M=8<N?(t[M&255]<<24|t[M>>>8&255]<<16|t[M>>>16&255]<<8|t[M>>>24&255])>>32-N:t[M]>>8-N);if(8>N+H){C=C<<N|M,H+=N}else{for(p=0;p<N;++p){C=C<<1|M>>N-p-1&1,8===++H&&(H=0,F[v++]=t[C],C=0,v===F.length&&(F=P(this)))}}F[v]=C;this.buffer=F;this.f=H;this.index=v};y.prototype.finish=function(){var p=this.buffer,v=this.index,C;0<this.f&&(p[v]<<=8-this.f,p[v]=t[p[v]],v++);z?C=p.subarray(0,v):(p.length=v,C=p);return C};var D=new (z?Uint8Array:Array)(256),n;for(n=0;256>n;++n){for(var m=n,l=m,a=7,m=m>>>1;m;m>>>=1){l<<=1,l|=m&1,--a}D[n]=(l<<a&255)>>>0}var t=D;function o(F,H,M){var v,p="number"===typeof H?H:H=0,C="number"===typeof M?M:F.length;v=-1;for(p=C&7;p--;++H){v=v>>>8^j[(v^F[H])&255]}for(p=C>>3;p--;H+=8){v=v>>>8^j[(v^F[H])&255],v=v>>>8^j[(v^F[H+1])&255],v=v>>>8^j[(v^F[H+2])&255],v=v>>>8^j[(v^F[H+3])&255],v=v>>>8^j[(v^F[H+4])&255],v=v>>>8^j[(v^F[H+5])&255],v=v>>>8^j[(v^F[H+6])&255],v=v>>>8^j[(v^F[H+7])&255]}return(v^4294967295)>>>0}var E=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],j=z?new Uint32Array(E):E;function i(p){this.buffer=new (z?Uint16Array:Array)(2*p);this.length=0}i.prototype.getParent=function(p){return 2*((p-2)/4|0)};i.prototype.push=function(F,H){var M,v,p=this.buffer,C;M=this.length;p[this.length++]=H;for(p[this.length++]=F;0<M;){if(v=this.getParent(M),p[M]>p[v]){C=p[M],p[M]=p[v],p[v]=C,C=p[M+1],p[M+1]=p[v+1],p[v+1]=C,M=v}else{break}}return this.length};i.prototype.pop=function(){var F,H,M=this.buffer,v,p,C;H=M[0];F=M[1];this.length-=2;M[0]=M[this.length];M[1]=M[this.length+1];for(C=0;;){p=2*C+2;if(p>=this.length){break}p+2<this.length&&M[p+2]>M[p]&&(p+=2);if(M[p]>M[C]){v=M[C],M[C]=M[p],M[p]=v,v=M[C+1],M[C+1]=M[p+1],M[p+1]=v}else{break}C=p}return{index:F,value:H,length:this.length}};function b(p,v){this.h=q;this.j=0;this.input=z&&p instanceof Array?new Uint8Array(p):p;this.c=0;v&&(v.lazy&&(this.j=v.lazy),"number"===typeof v.compressionType&&(this.h=v.compressionType),v.outputBuffer&&(this.a=z&&v.outputBuffer instanceof Array?new Uint8Array(v.outputBuffer):v.outputBuffer),"number"===typeof v.outputIndex&&(this.c=v.outputIndex));this.a||(this.a=new (z?Uint8Array:Array)(32768))}var q=2,h=[],k;for(k=0;288>k;k++){switch(x){case 143>=k:h.push([k+48,8]);break;case 255>=k:h.push([k-144+400,9]);break;case 279>=k:h.push([k-256+0,7]);break;case 287>=k:h.push([k-280+192,8]);break;default:throw"invalid literal: "+k}}b.prototype.g=function(){var aQ,aR,aT,aV,aU=this.input;switch(this.h){case 0:aT=0;for(aV=aU.length;aT<aV;){aR=z?aU.subarray(aT,aT+65535):aU.slice(aT,aT+65535);aT+=aR.length;var aP=aR,aM=aT===aV,aL=A,aS=A,aO=A,aF=A,ay=A,aK=this.a,aN=this.c;if(z){for(aK=new Uint8Array(this.a.buffer);aK.length<=aN+aP.length+5;){aK=new Uint8Array(aK.length<<1)}aK.set(this.a)}aL=aM?1:0;aK[aN++]=aL|0;aS=aP.length;aO=~aS+65536&65535;aK[aN++]=aS&255;aK[aN++]=aS>>>8&255;aK[aN++]=aO&255;aK[aN++]=aO>>>8&255;if(z){aK.set(aP,aN),aN+=aP.length,aK=aK.subarray(0,aN)}else{aF=0;for(ay=aP.length;aF<ay;++aF){aK[aN++]=aP[aF]}aK.length=aN}this.c=aN;this.a=aK}break;case 1:var aI=new y(z?new Uint8Array(this.a.buffer):this.a,this.c);aI.b(1,1,x);aI.b(1,2,x);var aB=G(this,aU),az,an,aw;az=0;for(an=aB.length;az<an;az++){if(aw=aB[az],y.prototype.b.apply(aI,h[aw]),256<aw){aI.b(aB[++az],aB[++az],x),aI.b(aB[++az],5),aI.b(aB[++az],aB[++az],x)}else{if(256===aw){break}}}this.a=aI.finish();this.c=this.a.length;break;case q:var al=new y(z?new Uint8Array(this.a.buffer):this.a,this.c),aD,ae,ad,ab,V,at=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M,ap,H,S,aW,p=Array(19),aH,T,av,ax,ar;aD=q;al.b(1,1,x);al.b(aD,2,x);ae=G(this,aU);M=c(this.n,15);ap=r(M);H=c(this.m,7);S=r(H);for(ad=286;257<ad&&0===M[ad-1];ad--){}for(ab=30;1<ab&&0===H[ab-1];ab--){}var U=ad,aJ=ab,ai=new (z?Uint32Array:Array)(U+aJ),aG,ah,aC,F,aj=new (z?Uint32Array:Array)(316),ak,am,ag=new (z?Uint8Array:Array)(19);for(aG=ah=0;aG<U;aG++){ai[ah++]=M[aG]}for(aG=0;aG<aJ;aG++){ai[ah++]=H[aG]}if(!z){aG=0;for(F=ag.length;aG<F;++aG){ag[aG]=0}}aG=ak=0;for(F=ai.length;aG<F;aG+=ah){for(ah=1;aG+ah<F&&ai[aG+ah]===ai[aG];++ah){}aC=ah;if(0===ai[aG]){if(3>aC){for(;0<aC--;){aj[ak++]=0,ag[0]++}}else{for(;0<aC;){am=138>aC?aC:138,am>aC-3&&am<aC&&(am=aC-3),10>=am?(aj[ak++]=17,aj[ak++]=am-3,ag[17]++):(aj[ak++]=18,aj[ak++]=am-11,ag[18]++),aC-=am}}}else{if(aj[ak++]=ai[aG],ag[ai[aG]]++,aC--,3>aC){for(;0<aC--;){aj[ak++]=ai[aG],ag[ai[aG]]++}}else{for(;0<aC;){am=6>aC?aC:6,am>aC-3&&am<aC&&(am=aC-3),aj[ak++]=16,aj[ak++]=am-3,ag[16]++,aC-=am}}}}aQ=z?aj.subarray(0,ak):aj.slice(0,ak);aW=c(ag,7);for(ax=0;19>ax;ax++){p[ax]=aW[at[ax]]}for(V=19;4<V&&0===p[V-1];V--){}aH=r(aW);al.b(ad-257,5,x);al.b(ab-1,5,x);al.b(V-4,4,x);for(ax=0;ax<V;ax++){al.b(p[ax],3,x)}ax=0;for(ar=aQ.length;ax<ar;ax++){if(T=aQ[ax],al.b(aH[T],aW[T],x),16<=T){ax++;switch(T){case 16:av=2;break;case 17:av=3;break;case 18:av=7;break;default:throw"invalid code: "+T}al.b(aQ[ax],av,x)}}var au=[ap,M],ac=[S,H],af,aA,C,v,ao,N,aE,aq;ao=au[0];N=au[1];aE=ac[0];aq=ac[1];af=0;for(aA=ae.length;af<aA;++af){if(C=ae[af],al.b(ao[C],N[C],x),256<C){al.b(ae[++af],ae[++af],x),v=ae[++af],al.b(aE[v],aq[v],x),al.b(ae[++af],ae[++af],x)}else{if(256===C){break}}}this.a=al.finish();this.c=this.a.length;break;default:throw"invalid compression type"}return this.a};function I(p,v){this.length=p;this.k=v}var d=function(){function v(H){switch(x){case 3===H:return[257,H-3,0];case 4===H:return[258,H-4,0];case 5===H:return[259,H-5,0];case 6===H:return[260,H-6,0];case 7===H:return[261,H-7,0];case 8===H:return[262,H-8,0];case 9===H:return[263,H-9,0];case 10===H:return[264,H-10,0];case 12>=H:return[265,H-11,1];case 14>=H:return[266,H-13,1];case 16>=H:return[267,H-15,1];case 18>=H:return[268,H-17,1];case 22>=H:return[269,H-19,2];case 26>=H:return[270,H-23,2];case 30>=H:return[271,H-27,2];case 34>=H:return[272,H-31,2];case 42>=H:return[273,H-35,3];case 50>=H:return[274,H-43,3];case 58>=H:return[275,H-51,3];case 66>=H:return[276,H-59,3];case 82>=H:return[277,H-67,4];case 98>=H:return[278,H-83,4];case 114>=H:return[279,H-99,4];case 130>=H:return[280,H-115,4];case 162>=H:return[281,H-131,5];case 194>=H:return[282,H-163,5];case 226>=H:return[283,H-195,5];case 257>=H:return[284,H-227,5];case 258===H:return[285,H-258,0];default:throw"invalid length: "+H}}var C=[],F,p;for(F=3;258>=F;F++){p=v(F),C[F]=p[2]<<24|p[1]<<16|p[0]}return C}(),J=z?new Uint32Array(d):d;function G(V,W){function Y(aj,ag){var ak=aj.k,ai=[],ae=0,af;af=J[aj.length];ai[ae++]=af&65535;ai[ae++]=af>>16&255;ai[ae++]=af>>24;var ah;switch(x){case 1===ak:ah=[0,ak-1,0];break;case 2===ak:ah=[1,ak-2,0];break;case 3===ak:ah=[2,ak-3,0];break;case 4===ak:ah=[3,ak-4,0];break;case 6>=ak:ah=[4,ak-5,1];break;case 8>=ak:ah=[5,ak-7,1];break;case 12>=ak:ah=[6,ak-9,2];break;case 16>=ak:ah=[7,ak-13,2];break;case 24>=ak:ah=[8,ak-17,3];break;case 32>=ak:ah=[9,ak-25,3];break;case 48>=ak:ah=[10,ak-33,4];break;case 64>=ak:ah=[11,ak-49,4];break;case 96>=ak:ah=[12,ak-65,5];break;case 128>=ak:ah=[13,ak-97,5];break;case 192>=ak:ah=[14,ak-129,6];break;case 256>=ak:ah=[15,ak-193,6];break;case 384>=ak:ah=[16,ak-257,7];break;case 512>=ak:ah=[17,ak-385,7];break;case 768>=ak:ah=[18,ak-513,8];break;case 1024>=ak:ah=[19,ak-769,8];break;case 1536>=ak:ah=[20,ak-1025,9];break;case 2048>=ak:ah=[21,ak-1537,9];break;case 3072>=ak:ah=[22,ak-2049,10];break;case 4096>=ak:ah=[23,ak-3073,10];break;case 6144>=ak:ah=[24,ak-4097,11];break;case 8192>=ak:ah=[25,ak-6145,11];break;case 12288>=ak:ah=[26,ak-8193,12];break;case 16384>=ak:ah=[27,ak-12289,12];break;case 24576>=ak:ah=[28,ak-16385,13];break;case 32768>=ak:ah=[29,ak-24577,13];break;default:throw"invalid distance"}af=ah;ai[ae++]=af[0];ai[ae++]=af[1];ai[ae++]=af[2];var ad,aa;ad=0;for(aa=ai.length;ad<aa;++ad){N[S++]=ai[ad]}F[ai[0]]++;C[ai[3]]++;M=aj.length+ag-1;v=null}var ab,Z,U,R,Q,X={},T,H,v,N=z?new Uint16Array(2*W.length):[],S=0,M=0,F=new (z?Uint32Array:Array)(286),C=new (z?Uint32Array:Array)(30),ac=V.j,p;if(!z){for(U=0;285>=U;){F[U++]=0}for(U=0;29>=U;){C[U++]=0}}F[256]=1;ab=0;for(Z=W.length;ab<Z;++ab){U=Q=0;for(R=3;U<R&&ab+U!==Z;++U){Q=Q<<8|W[ab+U]}X[Q]===A&&(X[Q]=[]);T=X[Q];if(!(0<M--)){for(;0<T.length&&32768<ab-T[0];){T.shift()}if(ab+3>=Z){v&&Y(v,-1);U=0;for(R=Z-ab;U<R;++U){p=W[ab+U],N[S++]=p,++F[p]}break}0<T.length?(H=e(W,ab,T),v?v.length<H.length?(p=W[ab-1],N[S++]=p,++F[p],Y(H,0)):Y(v,-1):H.length<ac?v=H:Y(H,0)):v?Y(v,-1):(p=W[ab],N[S++]=p,++F[p])}T.push(ab)}N[S++]=256;F[256]++;V.n=F;V.m=C;return z?N.subarray(0,S):N}function e(H,M,Q){var S,R,F=0,v,p,N,C,T=H.length;p=0;C=Q.length;S:for(;p<C;p++){S=Q[C-p-1];v=3;if(3<F){for(N=F;3<N;N--){if(H[S+N-1]!==H[M+N-1]){continue S}}v=F}for(;258>v&&M+v<T&&H[S+v]===H[M+v];){++v}v>F&&(R=S,F=v);if(258===v){break}}return new I(F,M-R)}function c(H,M){var Q=H.length,S=new i(572),R=new (z?Uint8Array:Array)(Q),F,v,p,N,C;if(!z){for(N=0;N<Q;N++){R[N]=0}}for(N=0;N<Q;++N){0<H[N]&&S.push(N,H[N])}F=Array(S.length/2);v=new (z?Uint32Array:Array)(S.length/2);if(1===F.length){return R[S.pop().index]=1,R}N=0;for(C=S.length/2;N<C;++N){F[N]=S.pop(),v[N]=F[N].value}p=s(v,v.length,M);N=0;for(C=F.length;N<C;++N){R[F[N].index]=p[N]}return R}function s(Q,R,T){function W(aa){var ab=S[aa][M[aa]];ab===R?(W(aa+1),W(aa+1)):--F[ab];++M[aa]}var U=new (z?Uint16Array:Array)(T),N=new (z?Uint8Array:Array)(T),F=new (z?Uint8Array:Array)(R),C=Array(T),S=Array(T),M=Array(T),Z=(1<<T)-R,V=1<<T-1,v,H,p,Y,X;U[T-1]=R;for(H=0;H<T;++H){Z<V?N[H]=0:(N[H]=1,Z-=V),Z<<=1,U[T-2-H]=(U[T-1-H]/2|0)+R}U[0]=N[0];C[0]=Array(U[0]);S[0]=Array(U[0]);for(H=1;H<T;++H){U[H]>2*U[H-1]+N[H]&&(U[H]=2*U[H-1]+N[H]),C[H]=Array(U[H]),S[H]=Array(U[H])}for(v=0;v<R;++v){F[v]=T}for(p=0;p<U[T-1];++p){C[T-1][p]=Q[p],S[T-1][p]=p}for(v=0;v<T;++v){M[v]=0}1===N[T-1]&&(--F[0],++M[T-1]);for(H=T-2;0<=H;--H){Y=v=0;X=M[H+1];for(p=0;p<U[H];p++){Y=C[H+1][X]+C[H+1][X+1],Y>Q[v]?(C[H][p]=Y,S[H][p]=R,X+=2):(C[H][p]=Q[v],S[H][p]=v,++v)}M[H]=0;1===N[H]&&W(H)}return F}function r(F){var H=new (z?Uint16Array:Array)(F.length),N=[],R=[],Q=0,C,v,p,M;C=0;for(v=F.length;C<v;C++){N[F[C]]=(N[F[C]]|0)+1}C=1;for(v=16;C<=v;C++){R[C]=Q,Q+=N[C]|0,Q<<=1}C=0;for(v=F.length;C<v;C++){Q=R[F[C]];R[F[C]]+=1;p=H[C]=0;for(M=F[C];p<M;p++){H[C]=H[C]<<1|Q&1,Q>>>=1}}return H}function K(p,v){this.input=p;this.c=this.i=0;this.d={};v&&(v.flags&&(this.d=v.flags),"string"===typeof v.filename&&(this.filename=v.filename),"string"===typeof v.comment&&(this.l=v.comment),v.deflateOptions&&(this.e=v.deflateOptions));this.e||(this.e={})}K.prototype.g=function(){var N,Q,S,V,T,M,C,v,R=new (z?Uint8Array:Array)(32768),H=0,W=this.input,U=this.i,p=this.filename,F=this.l;R[H++]=31;R[H++]=139;R[H++]=8;N=0;this.d.fname&&(N|=f);this.d.fcomment&&(N|=u);this.d.fhcrc&&(N|=L);R[H++]=N;Q=(Date.now?Date.now():+new Date)/1000|0;R[H++]=Q&255;R[H++]=Q>>>8&255;R[H++]=Q>>>16&255;R[H++]=Q>>>24&255;R[H++]=0;R[H++]=g;if(this.d.fname!==A){C=0;for(v=p.length;C<v;++C){M=p.charCodeAt(C),255<M&&(R[H++]=M>>>8&255),R[H++]=M&255}R[H++]=0}if(this.d.comment){C=0;for(v=F.length;C<v;++C){M=F.charCodeAt(C),255<M&&(R[H++]=M>>>8&255),R[H++]=M&255}R[H++]=0}this.d.fhcrc&&(S=o(R,0,H)&65535,R[H++]=S&255,R[H++]=S>>>8&255);this.e.outputBuffer=R;this.e.outputIndex=H;T=new b(W,this.e);R=T.g();H=T.c;z&&(H+8>R.buffer.byteLength?(this.a=new Uint8Array(H+8),this.a.set(new Uint8Array(R.buffer)),R=this.a):R=new Uint8Array(R.buffer));V=o(W,A,A);R[H++]=V&255;R[H++]=V>>>8&255;R[H++]=V>>>16&255;R[H++]=V>>>24&255;v=W.length;R[H++]=v&255;R[H++]=v>>>8&255;R[H++]=v>>>16&255;R[H++]=v>>>24&255;this.i=U;z&&H<R.length&&(this.a=R=R.subarray(0,H));return R};var g=255,L=2,f=8,u=16;B("Zlib.Gzip",K);B("Zlib.Gzip.prototype.compress",K.prototype.g);if(typeof w!="undefined"){w.Zlib=Zlib}return Zlib}).call(this);';try{eval(ZlibStr)}catch(e){console.error("Zlib parsing error - "+e)}var CAVUA={};(function(window,document){var RegisterEventLList={};var lastMouseMove=null;var lastMouseMoveLogged=null;var mouseMoveData="";var mouseHoverData=[];var lstmx=0;var lstmy=0;var MyEvent=null;var changeTarget;var userAgent1=false,p=!1,q=!1;if(!!navigator.platform){userAgent1=/iPad|iPhone|iPod/.test(navigator.platform)}else{userAgent1=window.navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPod")>-1||navigator.userAgent.indexOf("iPad")>-1}var defaultConfig={events:[{name:"load",target:window},{name:"change",target:changeTarget,recurseFrames:true},{name:"click",recurseFrames:true},{name:"unload",target:window},{name:"nvload",target:window},{name:"nvunload",target:window},{name:"focus",target:changeTarget,recurseFrames:true},{name:"blur",target:changeTarget,recurseFrames:true},{name:"hashchange",target:window},{name:"scroll",target:window},{name:"orientationchange",target:window},{name:"touchstart"},{name:"touchend"}],browserConfig:{useCapture:true,jQueryObject:window.jQuery}};var CurrentConfig=null;CAVUA.utils={_handleTouchStart:function(touchStartEvent){var counter;var counter1;if(userAgent1){return false}if(null===MyEvent){return MyEvent=touchStartEvent,true}counter=0;for(;counter<MyEvent.nativeEvent.touches.length;counter+=1){counter1=0;for(;counter1<touchStartEvent.nativeEvent.touches.length;counter1+=1){if(MyEvent.nativeEvent.touches[counter]===touchStartEvent.nativeEvent.touches[counter1]){return true}}}return CAVUA.utils._prepNonIosTouchEnd(),MyEvent=touchStartEvent,true},_getElementAttr:function(ele){var attr={};if(ele.id){attr.id=ele.id}if(ele.className&&ele.className!==""){attr["class"]=ele.className}if(ele.title&&ele.title!==""){attr.title=ele.title}if(ele.nodeName=="IMG"){if(ele.alt&&ele.alt!==""){attr.alt=ele.alt}if(ele.src&&ele.src!=""){attr.src=ele.src}}if(ele.nodeName=="A"){if(ele.href&&ele.href!==""){attr.href=ele.href}var text=ele.textContent;if(!text.match(/^\s*$/)){attr.linkText=text.replace(/\xA0/g," ").replace(/^\s*(.*?)\s*$/,"$1")}}if(ele.form){if(ele.form.name&&ele.form.name!==""){attr.fname=ele.form.name}if(ele.form.id&&ele.form.id!==""){attr.fid=ele.form.id}}return attr},_handleTouchMove:function(touchMoveEvent){if(!userAgent1){MyEvent=touchMoveEvent}},_handleTouchScroll:function(touchScrollEvent){return userAgent1?false:(null!==MyEvent&&("scroll"===touchScrollEvent.type&&(MyEvent.target.position.x=touchScrollEvent.target.position.x,MyEvent.target.position.y=touchScrollEvent.target.position.y,p=true)),true)},_prepNonIosTouchEnd:function(){var booleanVar=false;if(MyEvent!==null){var mEvent=MyEvent;mEvent.type=mEvent.nativeEvent.type="touchend";CAVUA.utils._publishEvent(mEvent);if(p){mEvent.type=mEvent.nativeEvent.type="scroll";q=!0;CAVUA.utils._publishEvent(mEvent);booleanVar=true}MyEvent=null;p=!1,q=!1}return booleanVar},_publishEvent:function(currentEvent){CAVNV.log("currentEvent - "+currentEvent.type);var counter$$0;var lengthArray;var currentTargetElement;var pr_ModuleArray1=null;var objectModule=null;var currentEventName=currentEvent.delegateTarget&&currentEvent.data?currentEvent.data:CAVUA.utils._buildToken4currentTarget(currentEvent);var pr_ModuleArray=null;var loadUnloadEvent=null;var booleanVar=false;var chkTrueFalse=false;var objectService=CAVUA.Browser;var targetElement;var delegateTargetElement=currentEvent.delegateTarget||null;if(("load"!==currentEvent.type&&"pageshow"!==currentEvent.type||currentEvent.nativeEvent.customLoad)&&(!userAgent1||"touchstart"!==currentEvent.type&&"touchmove"!==currentEvent.type)){if(null!==MyEvent&&("touchstart"!==currentEvent.type&&("touchmove"!==currentEvent.type&&("scroll"!==currentEvent.type&&"touchend"!==currentEvent.type)))){CAVUA.utils._prepNonIosTouchEnd()}else{if("touchstart"===currentEvent.type){return void CAVUA.utils._handleTouchStart(currentEvent)}if("touchmove"===currentEvent.type){return void CAVUA.utils._handleTouchMove(currentEvent)}if(null!==MyEvent&&("scroll"===currentEvent.type&&!q)){return void CAVUA.utils._handleTouchScroll(currentEvent)}if(currentEvent.type=="touchend"){MyEvent=null}p&&(currentEventName="scroll|null-2|window")}if((!CAVUA.utils.isIE()||("click"===currentEvent.type&&(targetElement=currentEvent.target.element),"beforeunload"!==currentEvent.type||(booleanVar=false,!booleanVar)))&&(CAVUA.utils.function_j.isUnload(currentEvent)&&(booleanVar="unloading"),"change"!==currentEvent.type||(!CAVUA.utils.isLegacyIE()||("w3c"!==CAVUA.utils.getFlavor()||"checkbox"!==currentEvent.target.element.type&&"radio"!==currentEvent.target.element.type)))){if("propertychange"===currentEvent.type){if("checked"!==currentEvent.nativeEvent.propertyName||!("checkbox"===currentEvent.target.element.type||"radio"===currentEvent.target.element.type&&currentEvent.target.element.checked)){return}currentEvent.type=currentEvent.target.type="change"}if(RegisterEventLList.hasOwnProperty(currentEventName)||(currentEvent.hasOwnProperty("nativeEvent")&&(currentTargetElement=currentEvent.nativeEvent.currentTarget||currentEvent.nativeEvent.target),currentEventName=CAVUA.utils._buildToken4bubbleTarget(currentEvent.type,currentTargetElement,true,delegateTargetElement)),RegisterEventLList.hasOwnProperty(currentEventName)){pr_ModuleArray=RegisterEventLList[currentEventName];counter$$0=0;lengthArray=pr_ModuleArray.length;for(;lengthArray>counter$$0;counter$$0+=1){pr_ModuleArray1=pr_ModuleArray[counter$$0];objectModule=CAVUA.Replay;loadUnloadEvent=CAVUA.utils.mixin({},currentEvent);if(objectModule){if(CAVUA.utils.isStarted(pr_ModuleArray1)){if("function"==typeof objectModule.onevent){chkTrueFalse=CAVUA.utils.function_j.canPublish(pr_ModuleArray1,loadUnloadEvent);if(chkTrueFalse){objectModule.onevent(loadUnloadEvent);CAVNV.plugins.FA.onevent(loadUnloadEvent);if(CAVNV.plugins.ABTesting){CAVNV.plugins.ABTesting.onevent(loadUnloadEvent)}CAVNV.plugins.NavigationTiming.onevent(loadUnloadEvent);if(CAVNV.plugins.BD){CAVNV.plugins.BD.onevent(loadUnloadEvent)}}}}}}}if(loadUnloadEvent){if("unload"===loadUnloadEvent.type){if(chkTrueFalse){CAVUA.utils.destroy()}}}}}},_getLocalTop:function(){return window.window},fail:function(messageFail,codeFail,booleanVar){CAVNV.error("Error: "+messageFail)},getFlavor:function(){return"jQuery"},isIE:function(){return(navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))},clog:function(){return function(){}}(),destroy:function(){},isStarted:function(module){return true},_buildToken4currentTarget:function(currentEvent){var b_buildcurrent=currentEvent.nativeEvent?currentEvent.nativeEvent.currentTarget:null;var event=b_buildcurrent?CAVUA.BrowserBase.ElementData.prototype.examineID(b_buildcurrent):{id:currentEvent.target.id,type:currentEvent.target.idType};return currentEvent.type+"|"+event.id+event.type},_buildToken4delegateTarget:function(eventName,currentDocOrWin,delegetTargetElement2){return eventName+"|"+currentDocOrWin+"|"+delegetTargetElement2},_buildToken4bubbleTarget:function(eventType$$0,currentTargetElement1,chkTrueFalse$$0,delegetTargetElement1){var currentWindow;var currentElement;var currentDocument=CAVUA.utils._getLocalTop();var arrayConfQueBrowser=CAVUA.Browser;var functionBuildToken=function(eventType){var booleanVar=null;return CAVUA.utils._hasSameOrigin(currentWindow.parent)&&CAVUA.utils.forEach(arrayConfQueBrowser.queryAll("iframe, frame",currentWindow.parent.document),function(chkTrueFalse){var objectWindow=null;if(!false){objectWindow=CAVUA.utils.getCurrentIFrameWindow(chkTrueFalse);if(objectWindow&&CAVUA.utils._hasSameOrigin(objectWindow)){if(objectWindow.document===eventType){booleanVar=chkTrueFalse}}}}),booleanVar};var documentUtil=CAVUA.utils.getDocument(currentTargetElement1);var l=CAVUA.BrowserBase;var m=null;var n=eventType$$0;return documentUtil&&(currentWindow=documentUtil.defaultView||documentUtil.parentWindow),currentTargetElement1===window||currentTargetElement1===window.window?n+="|null-2|window":chkTrueFalse$$0&&(currentWindow&&(CAVUA.utils._hasSameOrigin(currentWindow.parent)&&("undefined"!=typeof documentUtil&&currentDocument.document!==documentUtil)))?(m=functionBuildToken(documentUtil),m&&(currentElement=l.ElementData.prototype.examineID(m,n,true),n+="|"+currentElement.xPath+(currentElement.iframeID!=""?("_"+currentElement.iframeID):"")+"-2")):n+=delegetTargetElement1&&(delegetTargetElement1!==document&&"jQuery"===CAVUA.utils.getFlavor())?"|null-2|"+CAVUA.utils.getTagName(currentTargetElement1)+"|"+CAVUA.utils.getTagName(delegetTargetElement1):"|null-2|document",n},getTagName:function(a_getTag){return a_getTag===document?"document":a_getTag===window||a_getTag===window.window?"window":"string"==typeof a_getTag?a_getTag.toLowerCase():"object"!=typeof a_getTag||(CAVUA.utils.isUndefOrNull(a_getTag)||"string"!=typeof a_getTag.tagName)?"":a_getTag.tagName.toLowerCase()},isIFrameDescendant:function(a_isIFrame){return CAVUA.utils.getWindow(a_isIFrame)!=CAVUA.utils._getLocalTop()},getOrientationMode:function(a_getOrientation){var b_getOrientation="INVALID";if("number"!=typeof a_getOrientation){return b_getOrientation}switch(a_getOrientation){case 0:case 180:case 360:b_getOrientation="PORTRAIT";break;case 90:case -90:case 270:b_getOrientation="LANDSCAPE";break;default:b_getOrientation="UNKNOWN"}return b_getOrientation},isUndefOrNull:function(getDocument){return"undefined"==typeof getDocument||null===getDocument},getDocument:function(getDocumentElement){return 9!==getDocumentElement.nodeType?CAVUA.utils.isUndefOrNull(getDocumentElement.ownerDocument)?getDocumentElement.document:getDocumentElement.ownerDocument:getDocumentElement},getWindow:function(getCurrentWindow){if(getCurrentWindow.self!==getCurrentWindow){var getParentOrDefaultWindow=CAVUA.utils.getDocument(getCurrentWindow);return CAVUA.utils.isUndefOrNull(getParentOrDefaultWindow.defaultView)?getParentOrDefaultWindow.parentWindow:getParentOrDefaultWindow.defaultView}return getCurrentWindow},mixin:function(modulesInfoArray){var modulesInfo;var modulesInfoArray1;var counter;var lengthArguments;counter=1;lengthArguments=arguments.length;for(;lengthArguments>counter;counter+=1){modulesInfoArray1=arguments[counter];for(modulesInfo in modulesInfoArray1){if(Object.prototype.hasOwnProperty.call(modulesInfoArray1,modulesInfo)){modulesInfoArray[modulesInfo]=modulesInfoArray1[modulesInfo]}}}return modulesInfoArray},isLegacyIE:function(){var chkTrueFalse=!!window.performance;return CAVUA.utils.isIE()&&(!chkTrueFalse||document.documentMode<9)},function_j:function(){var array={};return{normalizeModuleEvents:function(param_b_Func_j,param_c_Func_j,param_d_Func_j,param_e_Func_j){var booleanVar=false;var booleanVar1=false;return param_d_Func_j=param_d_Func_j||CAVUA.utils._getLocalTop(),param_e_Func_j=param_e_Func_j||param_d_Func_j.document,array[param_b_Func_j]={loadFired:false,pageHideFired:false},CAVUA.utils.forEach(param_c_Func_j,function(paramFunc_j){switch(paramFunc_j.name){case"load":booleanVar=true;param_c_Func_j.push(CAVUA.utils.mixin(CAVUA.utils.mixin({},paramFunc_j),{name:"pageshow"}));break;case"unload":booleanVar1=true;param_c_Func_j.push(CAVUA.utils.mixin(CAVUA.utils.mixin({},paramFunc_j),{name:"pagehide"}));param_c_Func_j.push(CAVUA.utils.mixin(CAVUA.utils.mixin({},paramFunc_j),{name:"beforeunload"}));break;case"change":if(CAVUA.utils.isLegacyIE()){if("w3c"===CAVUA.utils.getFlavor()){param_c_Func_j.push(CAVUA.utils.mixin(CAVUA.utils.mixin({},paramFunc_j),{name:"propertychange"}))}}}}),booleanVar||booleanVar1?(array[param_b_Func_j].silentLoad=!booleanVar,array[param_b_Func_j].silentUnload=!booleanVar1,booleanVar||param_c_Func_j.push({name:"load",target:param_d_Func_j}),void (booleanVar1||param_c_Func_j.push({name:"unload",target:param_d_Func_j}))):void delete array[param_b_Func_j]},canPublish:function(param_b_CanPublish,param_c_CanPublish){var localVar_CanPublish;if(array.hasOwnProperty(param_b_CanPublish)===false){return true}localVar_CanPublish=array[param_b_CanPublish];switch(param_c_CanPublish.type){case"load":localVar_CanPublish.pageHideFired=false;localVar_CanPublish.loadFired=true;return !localVar_CanPublish.silentLoad;case"pageshow":localVar_CanPublish.pageHideFired=false;param_c_CanPublish.type="load";return !localVar_CanPublish.loadFired&&!localVar_CanPublish.silentLoad;case"pagehide":param_c_CanPublish.type="unload";localVar_CanPublish.loadFired=false;localVar_CanPublish.pageHideFired=true;return !localVar_CanPublish.silentUnload;case"unload":case"beforeunload":param_c_CanPublish.type="unload";localVar_CanPublish.loadFired=false;return !localVar_CanPublish.pageHideFired&&!localVar_CanPublish.silentUnload}return true},isUnload:function(param_IsUnLoad){return"object"==typeof param_IsUnLoad?"unload"===param_IsUnLoad.type||("beforeunload"===param_IsUnLoad.type||"pagehide"===param_IsUnLoad.type):false}}}(),forEach:function(htmlElementArray,funcEvent,tmp){var counter;var lengthArray;if(htmlElementArray&&(htmlElementArray.length&&(funcEvent&&funcEvent.call))){counter=0;lengthArray=htmlElementArray.length;for(;lengthArray>counter;counter+=1){funcEvent.call(tmp,htmlElementArray[counter],counter,htmlElementArray)}}},getCurrentIFrameWindow:function(getCurrentIFrame){var getParentIFrame=null;if(!getCurrentIFrame){return getParentIFrame}try{getParentIFrame=getCurrentIFrame.contentWindow||(getCurrentIFrame.contentDocument?getCurrentIFrame.contentDocument.parentWindow:null)}catch(c){}return getParentIFrame},_hasSameOrigin:function(getWindow){try{return getWindow.document.location.host===document.location.host&&getWindow.document.location.protocol===document.location.protocol}catch(time){}return false},WeakMap:function(){function Func_a(eventWeakMapArray,funcPublishEvent){var weakMapCounter;var lengthArray;eventWeakMapArray=eventWeakMapArray||[];weakMapCounter=0;lengthArray=eventWeakMapArray.length;for(;lengthArray>weakMapCounter;weakMapCounter+=1){if(eventWeakMapArray[weakMapCounter][0]===funcPublishEvent){return weakMapCounter}}return -1}return function(){var publishEventArray=[];this.set=function(param_c1,param_d1){var lengthArray=Func_a(publishEventArray,param_c1);publishEventArray[lengthArray>-1?lengthArray:publishEventArray.length]=[param_c1,param_d1]};this.get=function(param_c2){var d_local=publishEventArray[Func_a(publishEventArray,param_c2)];return d_local?d_local[1]:void 0};this.clear=function(){publishEventArray=[]};this.has=function(param_c3){return Func_a(publishEventArray,param_c3)>=0};this.remove=function(param_c4){var d_local1=Func_a(publishEventArray,param_c4);if(d_local1>=0){publishEventArray.splice(d_local1,1)}};this["delete"]=this.remove}}(),addEventListener:function(){return window.addEventListener?function(elementName,eventName,funcEventModule){elementName.addEventListener(eventName,funcEventModule,false)}:function(elementName,eventName,funcEventModule){elementName.attachEvent("on"+eventName,funcEventModule)}}(),parse:function(s){return JSON.parse(s)},serialize:function(s){return JSON.stringify(s)},some:function(elementNameArray,getElementTagFunction){var counter;var lengthArray;var tmp=false;counter=0;lengthArray=elementNameArray.length;for(;lengthArray>counter;counter+=1){if(tmp=getElementTagFunction(elementNameArray[counter],counter,elementNameArray)){return tmp}}return tmp},access:function(windowJquery,tmp){var jqueryArray;var counter;var lengthJqueryArray;var objectWindow=tmp||window;if("string"==typeof windowJquery&&("object"==typeof objectWindow||null==objectWindow)){jqueryArray=windowJquery.split(".");counter=0;lengthJqueryArray=jqueryArray.length;for(;lengthJqueryArray>counter;counter+=1){if(0!==counter||"window"!==jqueryArray[counter]){if(!Object.prototype.hasOwnProperty.call(objectWindow,jqueryArray[counter])){return}if(objectWindow=objectWindow[jqueryArray[counter]],lengthJqueryArray-1>counter&&!(objectWindow instanceof Object)){return}}}return objectWindow}return windowJquery},indexOf:function(ArrayModuleName,moduleName){var counter;var lengthArray;if(ArrayModuleName&&ArrayModuleName instanceof Array){counter=0;lengthArray=ArrayModuleName.length;for(;lengthArray>counter;counter+=1){if(ArrayModuleName[counter]===moduleName){return counter}}}return -1},clone:function(cloneObjectArray){var cloneArray;var cloneString;if(null===cloneObjectArray||"object"!=typeof cloneObjectArray){return cloneObjectArray}if(cloneObjectArray instanceof Object){cloneArray="[object Array]"===Object.prototype.toString.call(cloneObjectArray)?[]:{};for(cloneString in cloneObjectArray){if(Object.prototype.hasOwnProperty.call(cloneObjectArray,cloneString)){cloneArray[cloneString]=CAVUA.utils.clone(cloneObjectArray[cloneString])}}return cloneArray}},checkTime:function(currentTime){var navTime=CAVNV.nav_start_time;if(navTime>currentTime){return CAVNV.cav_epoch_nav_start_time*1000}else{return(currentTime-navTime)+CAVNV.cav_epoch_nav_start_time*1000}}};CAVUA.BrowserBase=function(a){function f(event){return event&&("undefined"!=typeof event.originalEvent&&("undefined"!=typeof event.isDefaultPrevented&&!event.isSimulated))}function g(event){return event?(event.type&&(0===event.type.indexOf("touch")&&(f(event)&&(event=event.originalEvent),"touchstart"===event.type?event=event.touches[event.touches.length-1]:"touchend"===event.type&&(event=event.changedTouches[0]))),event):null}function h(eventParam){var eventLocal=eventParam||window.event;var htmlElement=document.documentElement;var bodyElement=document.body;return f(eventLocal)&&(eventLocal=eventLocal.originalEvent),("undefined"==typeof eventParam||"undefined"==typeof eventLocal.target)&&(eventLocal.target=eventLocal.srcElement||window.window,eventLocal.timeStamp=Number(new Date),(null===eventLocal.pageX||"undefined"==typeof eventLocal.pageX)&&(eventLocal.pageX=eventLocal.clientX+(htmlElement&&htmlElement.scrollLeft||(bodyElement&&bodyElement.scrollLeft||0))-(htmlElement&&htmlElement.clientLeft||(bodyElement&&bodyElement.clientLeft||0)),eventLocal.pageY=eventLocal.clientY+(htmlElement&&htmlElement.scrollTop||(bodyElement&&bodyElement.scrollTop||0))-(htmlElement&&htmlElement.clientTop||(bodyElement&&bodyElement.clientTop||0))),eventLocal.preventDefault=function(){this.returnValue=false},eventLocal.stopPropagation=function(){this.cancelBubble=true}),eventLocal}function i$$0(eventParam){var targetedElement=null;if(!eventParam){return null}if(eventParam.srcElement){targetedElement=eventParam.srcElement}else{targetedElement=eventParam.target;if(!targetedElement){targetedElement=eventParam.explicitOriginalTarget}if(!targetedElement){targetedElement=eventParam.originalTarget}}if(!targetedElement){if(!(0!==eventParam.type.indexOf("touch"))){targetedElement=g(eventParam).target}}for(;targetedElement&&w[targetedElement.tagName];){targetedElement=targetedElement.parentNode}return targetedElement||(null!==eventParam.srcElement||(targetedElement=window.window)),targetedElement}function j(eventParam){var clientXLocation=0;var clientYLocation=0;var htmlElement=document.documentElement;var bodyElement=document.body;return eventParam=g(eventParam),null!==eventParam&&(eventParam.pageX&&(eventParam.pageY&&(eventParam.pageX>0&&eventParam.pageY>0))?(clientXLocation=eventParam.pageX,clientYLocation=eventParam.pageY):eventParam.clientX&&(eventParam.clientY&&(clientXLocation=eventParam.clientX+(htmlElement&&htmlElement.scrollLeft||(bodyElement&&bodyElement.scrollLeft||0))-(htmlElement&&htmlElement.clientLeft||(bodyElement&&bodyElement.clientLeft||0)),clientYLocation=eventParam.clientY+(htmlElement&&htmlElement.scrollTop||(bodyElement&&bodyElement.scrollTop||0))-(htmlElement&&htmlElement.clientTop||(bodyElement&&bodyElement.clientTop||0))))),{x:clientXLocation,y:clientYLocation}}function k(xCoordinate,yCoordinate){this.x=xCoordinate||0;this.y=yCoordinate||0}function l$$0(width,height){this.width=width||0;this.height=height||0}function m(mouseEvent,targetedElement){var nameOfElement;var event;var elementWindow;targetedElement=i$$0(mouseEvent);nameOfElement=this.examineID(targetedElement,mouseEvent.type);event=this.examineType(targetedElement,mouseEvent);elementWindow=this.examinePosition(mouseEvent,targetedElement);this.element=targetedElement;this.id=nameOfElement.id;this.idType=nameOfElement.type;this.type=event.type;this.subType=event.subType;this.state=this.examineState(targetedElement);this.position=new k(elementWindow.x,elementWindow.y);this.size=new l$$0(elementWindow.width,elementWindow.height);this.xPath=nameOfElement.xPath;this.name=nameOfElement.name;this.iframeID=nameOfElement.iframeID}function n(){var documentBodyRect;var diff;var bodyOffsetWidth;var e_local4=1;if(document.body.getBoundingClientRect){try{documentBodyRect=document.body.getBoundingClientRect()}catch(f){return CAVUA.utils.clog("getBoundingClientRect failed.",f),e_local4}diff=documentBodyRect.right-documentBodyRect.left;bodyOffsetWidth=document.body.offsetWidth;e_local4=Math.round(diff/bodyOffsetWidth*100)/100}return e_local4}function o(currHtmlElement){var clientBoundingRect;var positionSizeArray;var e_local5;if("undefined"==typeof currHtmlElement||(null===currHtmlElement||!currHtmlElement.getBoundingClientRect)){return{x:0,y:0,width:0,height:0}}try{clientBoundingRect=currHtmlElement.getBoundingClientRect()}catch(f){return CAVUA.utils.clog("getBoundingClientRect failed.",f),{x:0,y:0,width:0,height:0}}return positionSizeArray={x:clientBoundingRect.left,y:clientBoundingRect.top,width:clientBoundingRect.right-clientBoundingRect.left,height:clientBoundingRect.bottom-clientBoundingRect.top},CAVUA.utils.isIE()&&(positionSizeArray.x-=document.documentElement.clientLeft,positionSizeArray.y-=document.documentElement.clientTop,e_local5=n(),1!==e_local5&&(positionSizeArray.x=Math.round(positionSizeArray.x/e_local5),positionSizeArray.y=Math.round(positionSizeArray.y/e_local5),positionSizeArray.width=Math.round(positionSizeArray.width/e_local5),positionSizeArray.height=Math.round(positionSizeArray.height/e_local5))),positionSizeArray}function p(event){var location;switch(this.data=event.data||null,this.delegateTarget=event.delegateTarget||null,event=h(event),location=j(event),this.custom=false,this.nativeEvent=this.custom===true?null:event,this.position=new k(location.x,location.y),this.target=new m(event,event.target),this.timestamp=(new Date).getTime(),this.type=event.type,this.type){case"focusin":this.type="focus";break;case"focusout":this.type="blur"}}function q(event){a._publishEvent(new p(event))}var r=null;var s={useCapture:true,jQueryObject:window.jQuery};var t=[];var u=[];var v;var w={OPTGROUP:true,OPTION:true,NOBR:true};var x={};var y=null;var z$$0=false;m.HTML_ID=-1;m.XPATH_ID=-2;m.CSS_SELECTOR=-3;m.prototype.examineID=function(targetElement,mouseEvent,getXpath){function getIframeId(element){var D=CAVNV.plugins.DOMWATCHER2;var xpath="";if(!element||!element.ownerDocument||element.ownerDocument==document||!D){return""}var iframe;iframe=D.getNode(D.getID(element.ownerDocument));while(iframe){var iframeid=CAVNV.utils.getDomID(iframe);if(xpath==""){xpath=(iframeid.t*-1)+"-"+iframeid.i}else{xpath+=";"+(iframeid.t*-1)+"-"+iframeid.i}iframe=D.getNode(D.getID(iframe.ownerDocument))}return xpath}var elementName=targetElement.name;var elementId=null;var elementXpath=null;var type;if(mouseEvent&&mouseEvent=="click"){getXpath=true}var domID=CAVNV.utils.getDomID(targetElement,getXpath);var iframeID=getIframeId(targetElement);if(domID.t==m.HTML_ID){elementId=domID.i}else{if(domID.t==m.CSS_SELECTOR){elementId=domID.i}else{if(domID.t==m.XPATH_ID){elementXpath=domID.i}}}return{id:elementId||elementXpath,type:domID.t,xPath:domID.x,name:elementName,iframeID:iframeID}};m.prototype.examineType=function(targetedElement,mouseEvent){var c_local12="";return c_local12="change"===mouseEvent.type?"TEXTAREA"===targetedElement.tagName||"INPUT"===targetedElement.tagName&&"text"===targetedElement.type?"textChange":"valueChange":mouseEvent.type,{type:mouseEvent.type,subType:c_local12}};m.prototype.examineState=function(a){var b_local13={a:["innerText","href"],input:{range:["maxValue:max","value"],checkbox:["value","checked"],radio:["value","checked"],image:["src"]},select:["value"],button:["value","innerText"],textarea:["value"]};var c_local13="undefined"!=typeof a.tagName?a.tagName.toLowerCase():"";var d_local13=b_local13[c_local13]||null;var e_local13=null;var f_local13={};var g_local13=null;var h_local13="";if(null!==d_local13){if("[object Object]"===Object.prototype.toString.call(d_local13)){d_local13=d_local13[a.type]||["value"]}f_local13={};for(h_local13 in d_local13){if(d_local13.hasOwnProperty(h_local13)){if(-1!==d_local13[h_local13].indexOf(":")){g_local13=d_local13[h_local13].split(":");f_local13[g_local13[0]]=a[g_local13[1]]}else{f_local13[d_local13[h_local13]]="innerText"===d_local13[h_local13]?a.innerText||a.textContent:a[d_local13[h_local13]]}}}}return"select"===c_local13&&(a.options&&(!isNaN(a.selectedIndex)&&(f_local13.index=a.selectedIndex,f_local13.index>=0&&(f_local13.index<a.options.length&&(e_local13=a.options[a.selectedIndex],f_local13.value=e_local13.text||(e_local13.innerText||(e_local13.getAttribute("value")||e_local13.getAttribute("label"))),f_local13.text=e_local13.text||e_local13.innerText))))),f_local13};m.prototype.examinePosition=function(mouseEvent,targetedElement){var c_local14=j(mouseEvent);var d_local14=o(targetedElement);return d_local14.x=0!==c_local14.x&&0!==c_local14.y?Math.round(Math.abs(c_local14.x-d_local14.x)):d_local14.width/2,d_local14.y=0!==c_local14.x&&0!==c_local14.y?Math.round(Math.abs(c_local14.y-d_local14.y)):d_local14.height/2,d_local14};return{WebEvent:p,ElementData:m,processDOMEvent:q}}(CAVUA.utils);CAVUA.Browser=function(a){function b(a_param){return function(b_param){var c_local=new k.WebEvent(b_param);a_param(c_local)}}function e(b_param3){b_param3=b_param3||l;var c_local3=b_param3.useCapture===true;f=b_param3.hasOwnProperty("jQueryObject")?CAVUA.utils.access(b_param3.jQueryObject):window.jQuery;if(c_local3&&"function"==typeof document.addEventListener){m=function(a_param4,b_param4,d){var e_local3=function(a_param4){d(f.event.fix(a_param4))};a_param4.addEventListener(b_param4,e_local3,c_local3)};n=function(a_param5,b_param5,d){var e_local4=function(a_param5){d(f.event.fix(a_param5))};a_param5.removeEventListener(b_param5,e_local4,c_local3)}}else{m=function(a_param6,b_param6,c_param6){f(a_param6).on(b_param6,c_param6)};n=function(a_Param7,b_param7,c_param7){f(a_Param7).off(b_param7,c_param7)}}o=true}var f;var g$$0={};var h;var i={JQUERY_NOT_SUPPORTED:"JQUERYNOTSUPPORTED",JQUERY_NOT_FOUND:"JQUERYNOTFOUND"};var j=null;var k=CAVUA.BrowserBase;var l={useCapture:true,jQueryObject:window.jQuery};var m=null;var n=null;var o=true;return g$$0={list2Array:function(listOfElements){var counter;var lengthArray=listOfElements.length;var array=[];if(!listOfElements){return array}if("undefined"==typeof listOfElements.length){return[listOfElements]}counter=0;for(;lengthArray>counter;counter+=1){array[counter]=listOfElements[counter]}return array},find:function(tagName,objDocument,undef){return undef=undef||"css",this.list2Array(this[undef](tagName,objDocument))},css:function(tagName,objHtmlDocument){return objHtmlDocument=objHtmlDocument||document,f(objHtmlDocument).find(tagName).get()}},h=function(){var weakMap=new a.WeakMap;return{add:function(valuePublishEventFunc){var weakMapArray=weakMap.get(valuePublishEventFunc)||[b(valuePublishEventFunc),0];return weakMapArray[1]+=1,weakMap.set(valuePublishEventFunc,weakMapArray),weakMapArray[0]},find:function(valuePublishEventFunc){var weakMapArray1=weakMap.get(valuePublishEventFunc);return weakMapArray1?weakMapArray1[0]:null},remove:function(valuePublishEventFunc){var weakMapArray2=weakMap.get(valuePublishEventFunc);if(weakMapArray2){weakMapArray2[1]-=1;if(weakMapArray2[1]<=0){weakMap.remove(valuePublishEventFunc)}}}}}(),{init:function(config){e(config)},getServiceName:function(){return"jQuery"},query:function(tagName,objDocument,unDef){return g$$0.find(tagName,objDocument,unDef)[0]||null},queryAll:function(tagName,objDocument,unDef){return g$$0.find(tagName,objDocument,unDef)},loadScript:function(a_loadScript){f.getScript(a_loadScript)},subscribe:function(eventName,objElementWinDoc,publishEventFunc,undef,undef1){var webEventService=h.add(publishEventFunc);if(undef){f(undef).on(eventName,objElementWinDoc,undef1,webEventService)}else{m(objElementWinDoc,eventName,webEventService)}},unsubscribe:function(eventName,objElementWinDoc,publishEventFunc,undef){var findUnsubscribe=h.find(publishEventFunc);if(findUnsubscribe){try{if(undef){f(undef).off(eventName,objElementWinDoc,findUnsubscribe)}else{n(objElementWinDoc,eventName,findUnsubscribe)}}catch(g){}h.remove(publishEventFunc)}},getJQuery:function(){return f}}}(CAVUA.utils);CAVUA.Replay=function(a$$0){function b$$0(a,winTargetArray){var counter;var array;if(!a||"object"!=typeof a){return null}array=winTargetArray.split(".");counter=0;for(;counter<array.length;counter+=1){if("undefined"==typeof a||null===a[array[counter]]){return null}a=a[array[counter]]}return a}function c$$0(a){var b_local=[];a=a.parentNode;for(;a;){b_local.push(a);a=a.parentNode}return b_local}function d$$0(b_param2){return CAVUA.utils.some(b_param2,function(a){return"A"===a.tagName||"BUTTON"===a.tagName?a:null})}function e$$0(a){var event=a.type;return event="string"==typeof event?event.toLowerCase():"unknown","blur"===event&&(event="focusout"),event}function f$$0(a){var window1;var tagNamee=b$$0(a,"webEvent.target.element.tagName");var elementSubType="input"===tagNamee.toLowerCase()?b$$0(a,"webEvent.target.element.type"):"";var tagName1=D[tagNamee.toLowerCase()+":"+elementSubType]||tagNamee;var targetElement=c$$0(b$$0(a,"webEvent.target.element"));var k_local=null;var targetPosition=b$$0(a,"webEvent.target.position.relXY");var targetSubType=b$$0(a,"webEvent.target.subtype");window1={type:4,timestamp:(new Date).getTime(),target:{id:a.id||"",idType:b$$0(a,"webEvent.target.idType"),name:b$$0(a,"webEvent.target.name"),iframeID:b$$0(a,"webEvent.target.iframeID"),tlType:tagName1,type:tagNamee,subType:elementSubType,xpath:b$$0(a,"webEvent.target.xPath"),position:{width:b$$0(a,"webEvent.target.element.offsetWidth"),height:b$$0(a,"webEvent.target.element.offsetHeight")},currState:a.currState||null},event:{tlEvent:e$$0(b$$0(a,"webEvent")),type:b$$0(a,"webEvent.target.type")}};if(targetPosition){window1.target.position.relXY=targetPosition}if("number"==typeof a.dwell){if(a.dwell>0){window1.target.dwell=a.dwell}}if("number"==typeof a.visitedCount){window1.target.visitedCount=a.visitedCount}if("undefined"!=typeof a.prevState){window1.prevState=a.prevState}if("undefined"!=typeof targetSubType){window1.event.subType=targetSubType}window1.target.name=b$$0(a,"webEvent.target.name");k_local=d$$0(targetElement);window1.target.isParentLink=!!k_local;if(k_local){if(k_local.href){window1.target.currState=window1.target.currState||{};window1.target.currState.href=window1.target.currState.href||k_local.href}if(k_local.value){window1.target.currState=window1.target.currState||{};window1.target.currState.value=window1.target.currState.value||k_local.value}if(k_local.innerText||k_local.textContent){window1.target.currState=window1.target.currState||{};window1.target.currState.innerText=window1.target.currState.innerText||(k_local.innerText||k_local.textContent)}}var te=b$$0(a,"webEvent.target.element");window1.eeflag=CAVNV.utils.getEEFlag(te);return window1}function g$$0(b){CAVUA.Queue.post(b)}function h$$0(b){var c;var d;var e;var f;var g=0;var h=b.length;var i={mouseout:true,mouseover:true};var j=[];g=0;for(;h>g;g+=1){if(d=b[g]){if(i[d.event.type]){CAVNV.log("d.target.id = "+d.target.id);j.push(d)}else{CAVNV.log("d.target.id = "+d.target.id);c=g+1;for(;h>c&&(b[c]&&i[b[c].event.type]);c+=1){}if(h>c){e=b[c];if(e){if(d.target.id===e.target.id){if(d.event.type!==e.event.type){if("click"===d.event.type){f=d;d=e;e=f}if("click"===e.event.type){d.target.position=e.target.position;g+=1}else{if("blur"===e.event.type){d.target.dwell=e.target.dwell;d.target.visitedCount=e.target.visitedCount;d.focusInOffset=e.focusInOffset;d.target.position=e.target.position;g+=1}}b[c]=null;b[g]=d}}}}j.push(b[g])}}}d=j.shift();for(;d;d=j.shift()){CAVUA.Queue.post(d)}b.splice(0,b.length)}function i$$0(elementXpath,event){CAVNV.log("elementXpath = "+elementXpath);U=event;U.inFocus=true;if("undefined"==typeof G[elementXpath]){G[elementXpath]={}}G[elementXpath].focus=U.dwellStart=Number(new Date);G[elementXpath].focusInOffset=Q?U.dwellStart-Number(Q):-1;G[elementXpath].prevState=b$$0(event,"target.state");G[elementXpath].visitedCount=G[elementXpath].visitedCount+1||1}function j$$0(event,elementXpath){J.push(f$$0({webEvent:event,id:elementXpath,currState:b$$0(event,"target.state")}))}function k$$0(element){var booleanVar=false;var listOfElement="|button|image|submit|reset|checkbox|radio|";var addPipeString=null;if("object"!=typeof element||!element.type){return booleanVar}switch(element.type){case"INPUT":addPipeString="|"+(element.subType||"")+"|";booleanVar=-1===listOfElement.indexOf(addPipeString.toLowerCase())?false:true;break;case"TEXTAREA":booleanVar=false;break;default:booleanVar=true}return booleanVar}function l$$0(elementXpath,event1){var mouseEvent;if("undefined"!=typeof elementXpath){if(null!==elementXpath){if("undefined"!=typeof event1){if(null!==event1){U.inFocus=false;if("undefined"!=typeof G[elementXpath]&&G[elementXpath].hasOwnProperty("focus")){G[elementXpath].dwell=Number(new Date)-G[elementXpath].focus}else{G[elementXpath]={};G[elementXpath].dwell=0}if(0===J.length){event1.type=event1.target.type="blur";j$$0(event1,elementXpath)}mouseEvent=J[J.length-1];if(mouseEvent){mouseEvent.target.dwell=G[elementXpath].dwell;mouseEvent.focusInOffset=G[elementXpath].focusInOffset;mouseEvent.target.visitedCount=G[elementXpath].visitedCount;if(!("click"!==mouseEvent.event.type)){if(!k$$0(mouseEvent.target)){mouseEvent.event.type="blur";mouseEvent.event.tlEvent="focusout"}}}h$$0(J)}}}}}function m(elementXpath,event){var booleanVar=false;return J.length>0&&(J[J.length-1]&&(J[J.length-1].target.id!==elementXpath&&("scroll"!==event.type&&("resize"!==event.type&&("mouseout"!==event.type&&("mouseover"!==event.type&&("textBox"!==J[J.length-1].target.tlType&&("selectList"!==J[J.length-1].target.tlType&&(l$$0(J[J.length-1].target.id,J[J.length-1]),booleanVar=true))))))))),booleanVar}function n(elementXpath,event){if(!("undefined"==typeof G[elementXpath])){if(!G[elementXpath].hasOwnProperty("focus")){i$$0(elementXpath,event)}}j$$0(event,elementXpath);if("undefined"!=typeof G[elementXpath]){if("undefined"!=typeof G[elementXpath].prevState){if("textBox"===J[J.length-1].target.tlType||"selectList"===J[J.length-1].target.tlType){J[J.length-1].target.prevState=G[elementXpath].prevState}}}}function o(event){var positionX=event.target.position.x;var positionY=event.target.position.y;var element=event.target.element;var objectClientRect=element.getBoundingClientRect?element.getBoundingClientRect():{bottom:0,height:0,left:0,right:0,top:0,width:0};var element_x=objectClientRect.left;var element_y=objectClientRect.top;var total_x=element_x+positionX;var total_y=element_y+positionY;var pageWidth=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth);var pageHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);CAVNV.log("Clicked at "+total_x+"x"+total_y+" and page dimension "+pageWidth+"x"+pageHeight);var fixedX=Math.abs(total_x/pageWidth).toFixed(3);var fixedY=Math.abs(total_y/pageHeight).toFixed(3);return fixedX=fixedX>1||0>fixedX?0.5:fixedX,fixedY=fixedY>1||0>fixedY?0.5:fixedY,fixedX+","+fixedY}function p(targetElementXpath,eventName){var d_local;var booleanVar=true;var lengthArray=0;return"SELECT"===eventName.target.element.tagName&&(V&&V.target.id===targetElementXpath)?void (V=null):(U.inFocus||i$$0(targetElementXpath,eventName),lengthArray=J.length,lengthArray&&("change"!==b$$0(J[lengthArray-1],"event.type")&&n(targetElementXpath,eventName)),d_local=o(eventName),lengthArray=J.length,0===eventName.position.x&&(0===eventName.position.y&&(lengthArray&&"radioButton"===b$$0(J[lengthArray-1],"target.tlType")))?booleanVar=false:eventName.target.position.relXY=d_local,lengthArray&&b$$0(J[lengthArray-1],"target.id")===targetElementXpath?booleanVar&&(J[lengthArray-1].target.position.relXY=d_local):j$$0(eventName,targetElementXpath),void (V=eventName))}function q(){var orientation1=window.orientation||0;return orientation1}function r(){var b_local=q();var array={type:4,timestamp:(new Date).getTime(),event:{type:"orientationchange"},target:{prevState:{orientation:E,orientationMode:CAVUA.utils.getOrientationMode(E)},currState:{orientation:b_local,orientationMode:CAVUA.utils.getOrientationMode(b_local)}}};g$$0(array);E=b_local}function s(a_param){var scaleValue=false;return a_param?scaleValue=F.scale===a_param.scale&&Math.abs((new Date).getTime()-F.timestamp)<500:scaleValue}function t(a_param){F.scale=a$$0.scale;F.rotation=a_param.rotation;F.timestamp=(new Date).getTime()}function u(a_param){var checkNum;var tmp="INVALID";return"undefined"==typeof a_param||null===a_param?tmp:(checkNum=Number(a_param),tmp=isNaN(checkNum)?"INVALID":1>checkNum?"CLOSE":checkNum>1?"OPEN":"NONE")}function v(a_param){var c_local={};var d_local=b$$0(a_param,"nativeEvent.rotation")||0;var e=b$$0(a_param,"nativeEvent.scale")||1;var f_local=null;var array={type:4,timestamp:(new Date).getTime(),event:{type:"touchend"},target:{id:b$$0(a_param,"target.id"),idType:b$$0(a_param,"target.idType")}};if(!(W&&(!e||1===e))){if(!(!W&&a_param.nativeEvent.touches.length<=1)){f_local={rotation:d_local?d_local.toFixed(2):0,scale:e?e.toFixed(2):1};f_local.pinch=u(f_local.scale);if(!s(f_local)){if(F){if(F.timestamp){c_local.rotation=F.rotation;c_local.scale=F.scale;c_local.pinch=u(c_local.scale)}}if(b$$0(c_local,"scale")){array.target.prevState=c_local}array.target.currState=f_local;g$$0(array);t(f_local)}}}}function w(c_param){var viewPortHeight=0;if(window.innerHeight&&(document.documentElement||document.body)&&(document.documentElement||document.body).clientHeight){viewPortHeight=Math.min(window.innerHeight,(document.documentElement||document.body).clientHeight)}else{if(window.innerHeight){viewPortHeight=window.innerHeight}else{if((document.documentElement||document.body)&&(document.documentElement||document.body).clientHeight){viewPortHeight=(document.documentElement||document.body).clientHeight}}}var viewPortWidth=0;if(window.innerWidth&&(document.documentElement||document.body)&&(document.documentElement||document.body).clientWidth){viewPortWidth=Math.min(window.innerWidth,(document.documentElement||document.body).clientWidth)}else{if((document.documentElement||document.body)&&(document.documentElement||document.body).clientWidth){viewPortWidth=(document.documentElement||document.body).clientWidth}else{if(window.innerWidth){viewPortWidth=window.innerWidth}}}var array={type:1,timestamp:(new Date).getTime(),clientState:{pageWidth:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),pageHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),viewPortWidth:viewPortWidth,viewPortHeight:viewPortHeight,viewPortX:window.pageXOffset||(document.documentElement||document.body.parentNode||document.body).scrollLeft,viewPortY:window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,deviceOrientation:window.orientation||0,event:b$$0(c_param,"type")}};var angle=1;var viewPortWidth1=1;return angle=90===Math.abs(array.clientState.deviceOrientation)?W?Z-$:320>=Y?Z-$:Z/X-$:W?Y+$:320>=Y?Y-$:Y/X-$,viewPortWidth1=0===array.clientState.viewPortWidth?1:angle/array.clientState.viewPortWidth,array.clientState.deviceScale=viewPortWidth1-0.02,array.clientState.deviceScale=array.clientState.deviceScale.toFixed(3),array.clientState.viewTime=null===P?0:(new Date).getTime()-P.getTime(),"scroll"===c_param.type&&(0>=K&&(R=M.clientState.viewPortX,S=M.clientState.viewPortY)),"scroll"===c_param.type&&(array.clientState.viewPortXStart=R,array.clientState.viewPortYStart=S),L=CAVUA.utils.clone(array),array}function x(){return null!==L&&"load"!==L.clientState.event?("scroll"===L.clientState.event&&(delete L.clientState.viewPortXStart,delete L.clientState.viewPortYStart),L.clientState.event="attention",L.clientState.viewTime=null===Q?0:(new Date).getTime()-Q.getTime(),g$$0(L),Q=new Date,true):false}function y(a){return"scroll"===a.clientState.event&&(a.clientState.viewPortXStart===a.clientState.viewPortX&&a.clientState.viewPortYStart===a.clientState.viewPortY)?false:true}function z(b){var c=null===T?0:(new Date).getTime()-T.getTime();return null!==L&&(b.type!==L.clientState.event||c>=1000)?(y(L)&&(g$$0(L),"touchend"!==L.clientState.event&&(M=CAVUA.utils.clone(L))),L=null,P=null,K=0,true):(null!==L&&(1===K&&(c>=1000&&(("resize"===L.clientState.event||("scroll"===L.clientState.event||("orientationchange"===L.clientState.event||"screenview_load"===b.type)))&&x()))),false)}function A(a,c){var d;var e;var f=["type","target.id"];var g=null;var h=true;var i=30;var j=0;var k=0;var l=0;if(!(a&&(c&&("object"==typeof a&&"object"==typeof c)))){h=false}d=0;e=f.length;for(;h&&e>d;d+=1){if(g=f[d],b$$0(a,g)!==b$$0(c,g)){h=false;break}}return h&&(k=b$$0(a,"timestamp"),l=b$$0(c,"timestamp"),isNaN(k)&&isNaN(l)||(j=Math.abs(b$$0(a,"timestamp")-b$$0(c,"timestamp")),(isNaN(j)||j>i)&&(h=false))),h}function B(){var a=window.location.hash}function C(event1){var c={type:4,timestamp:(new Date).getTime(),event:{type:event1.type},target:{id:b$$0(event1,"target.id"),idType:b$$0(event1,"target.idType")}};g$$0(c)}var timer;var D={"input:radio":"radioButton","input:checkbox":"checkBox","input:text":"textBox","input:password":"textBox","input:file":"fileInput","input:button":"button","input:submit":"submitButton","input:reset":"resetButton","input:image":"image","input:color":"color","input:date":"date","input:datetime":"datetime","input:datetime-local":"datetime-local","input:number":"number","input:email":"email","input:tel":"tel","input:search":"search","input:url":"url","input:time":"time","input:week":"week","input:month":"month","textarea:":"textBox","select:":"selectList","button:":"button","a:":"link"};var E=window.orientation||0;var F={scale:0,timestamp:0};var G={};var H=window.location.hash;var I=null;var J=[];var K=0;var L=null;var M=null;var N=0;var O=((new Date).getTime(),null);var P=null;var Q=null;var R=0;var S=0;var T=null;var U={inFocus:false};var V=null;var W=navigator.userAgent.indexOf("iPhone")>-1||(navigator.userAgent.indexOf("iPod")>-1||navigator.userAgent.indexOf("iPad")>-1);var X=window.devicePixelRatio||1;var Y=null===window.screen?0:window.screen.width;var Z=null===window.screen?0:window.screen.height;var $=null===window.screen?0:window.screen.height-window.screen.availHeight;return{init:function(){CAVNV.log("replay module installed")},destroy:function(){l$$0(I)},onevent:function(event){CAVNV.log("event "+event.type+" found");if(!/(load)/.test(event)){CAVNV.plugins.DOMWATCHER2.updateMutationState(NVDOMObserver.USERACTION_MUTATION)}var elementXpath=null;var d=null;if("object"==typeof event&&event.type){if(event.type=="nvload"){event.type="load"}if(event.type=="touchend"){event.type="click"}if(A(event,O)){return void (O=event)}if(CAVNV.ajax_pg_start_time!=-1&&(event.type=="focus"||event.type=="click"||event.type=="change")){CAVNV.cav_nv_ajax_pg_init()}if(event.target&&event.target.element&&typeof event.target.element.className=="string"&&event.target.element.className.indexOf("KeyboardRowKey")!=-1){return}function logMouseMove(){if(mouseMoveData==""){return}lstmx=lstmy=0;var mMData=(new Date().getTime()-300)+"|-1|6||||||||||"+mouseMoveData+"||-1|-1|||";CAVUA.logEvent(mMData,false,4);mouseMoveData=""}switch(O=event,elementXpath=b$$0(event,"target.id"),"[object Object]"!==Object.prototype.toString.call(G[elementXpath])&&(G[elementXpath]={}),z(event),m(elementXpath,event),T=new Date,event.type){case"hashchange":B();break;case"focus":i$$0(elementXpath,event);d=true;break;case"blur":l$$0(elementXpath,event);d=true;break;case"click":if(!!CAVNV.config.USERACTION.MMCapture&&CAVNV.config.USERACTION.MMCapture.enabled){logMouseMove()}if(!!CAVNV.config.USERACTION.MHCapture&&CAVNV.config.USERACTION.MHCapture.enabled){var hoverValue="";if(mouseHoverData.length==0){return}mouseHoverData.forEach(function(data){hoverValue+=data+"~"});if(hoverValue.length>0){}hoverValue=hoverValue.substring(0,hoverValue.length-1);var hoverData=(new Date().getTime())+"|-1|5||||||||||"+hoverValue+"||-1|-1|||";CAVUA.logEvent(hoverData,false,4);mouseHoverData=[]}d=p(elementXpath,event);break;case"change":if(CAVNV.inputNodes){var e=event.target.element;var ana=CAVNV.inputNodes.get(e);if(ana){var v=e.value;if(e.tagName&&e.tagName=="SELECT"){v="";if(e.selectedIndex<e.options.length&&e.selectedIndex>=0){v=e.options[e.selectedIndex].text}}if(ana.value==v){return null}ana.time=new Date().getTime();ana.value=v}}n(elementXpath,event);d=true;break;case"orientationchange":r();d=true;break;case"touchend":event.type="click";try{d=p(elementXpath,event)}catch(e){}event.type="touchend";break;case"load":d=w(event);Q=new Date;break;case"screenview_load":Q=new Date;break;case"screenview_unload":break;case"resize":case"scroll":if(!!CAVNV.config.USERACTION.MMCapture&&CAVNV.config.USERACTION.MMCapture.enabled){clearTimeout(timer);timer=setTimeout(function(){logMouseMove()},300)}if(null===P){if(0>=K){P=new Date}}d=w(event);if(y(d)){d=null}else{K+=1}break;case"nvunload":event.type="unload";if(null!==J){h$$0(J)}d=w(event);x();g$$0(d);event.type="nvunload";break;case"unload":if(null!==J){h$$0(J)}d=w(event);x();g$$0(d);CAVUA.flushAll(true);break;default:C(event)}if(event.type=="click"||event.type=="change"||event.type=="focus"){CAVNV.processUserSegments(event.target.element)}return I=elementXpath,d}},onmessage:function(){}}}(CAVUA.utils);CAVUA.Queue=function(){function cavwrapper(paramb_cavwrapper){var cmsg={timeStamp:paramb_cavwrapper.timestamp,duration:-1,eventType:-1,id:"",idType:-2,elementName:"",elementType:"",elementSubType:"",xpos:-1,ypos:-1,width:-1,height:-1,value:"",encValue:"",value1:-1,value2:-1,iframeID:"",attr:"{}",xpath:""};var events={focus:0,blur:1,click:2,change:3,hashchange:4,mouseover:5,mousemove:6,load:1000,unload:1001,resize:1002,scroll:1003,orientationchange:1004,touchend:2,touchstart:2};var e_cavwrapper="unknown";if(paramb_cavwrapper.type==1){e_cavwrapper=paramb_cavwrapper.clientState.event.toLowerCase()}if(paramb_cavwrapper.type==4){e_cavwrapper=paramb_cavwrapper.event.type.toLowerCase()}if(events.hasOwnProperty(e_cavwrapper)){cmsg.eventType=events[e_cavwrapper]}if(cmsg.eventType===-1){return null}if(paramb_cavwrapper.type==1){if(typeof paramb_cavwrapper.clientState.viewTime!="undefined"){cmsg.duration=paramb_cavwrapper.clientState.viewTime}if(cmsg.duration==undefined||cmsg.duration==null){cmsg.duration=-1}cmsg.xpos=parseInt(paramb_cavwrapper.clientState.viewPortX/paramb_cavwrapper.clientState.pageWidth*1000);if(isNaN(cmsg.xpos)){cmsg.xpos=-1}cmsg.ypos=parseInt(paramb_cavwrapper.clientState.viewPortY/paramb_cavwrapper.clientState.pageHeight*1000);if(isNaN(cmsg.ypos)){cmsg.ypos=-1}cmsg.width=paramb_cavwrapper.clientState.viewPortWidth;cmsg.height=paramb_cavwrapper.clientState.viewPortHeight;cmsg.value1=parseInt((paramb_cavwrapper.clientState.viewPortX+cmsg.width)/paramb_cavwrapper.clientState.pageWidth*1000);if(isNaN(cmsg.value1)){cmsg.value1=-1}cmsg.value2=parseInt((paramb_cavwrapper.clientState.viewPortY+cmsg.height)/paramb_cavwrapper.clientState.pageHeight*1000);if(isNaN(cmsg.value2)){cmsg.value2=-1}}else{if(paramb_cavwrapper.type==4){if(typeof paramb_cavwrapper.target.name!=="undefined"){cmsg.duration=paramb_cavwrapper.target.dwell}if(cmsg.duration==undefined||cmsg.duration==null){cmsg.duration=-1}cmsg.id=paramb_cavwrapper.target.id.replace(/([^\\])\\\./g,"$1\\\\.");cmsg.idType=paramb_cavwrapper.target.idType;cmsg.iframeID=paramb_cavwrapper.target.iframeID;cmsg.xpath=(paramb_cavwrapper.target.xpath&&cmsg.eventType==2&&cmsg.idType!=-2)?paramb_cavwrapper.target.xpath:"";if(cmsg.id.indexOf("IFRAME")!=-1&&cmsg.idType==-2){cmsg.id=cmsg.id.replace(/^.*IFRAME/,"//*")}if(typeof paramb_cavwrapper.target.name!=="undefined"&&paramb_cavwrapper.target.name!=null){cmsg.elementName=paramb_cavwrapper.target.name}cmsg.elementType=paramb_cavwrapper.target.type;if(typeof paramb_cavwrapper.target.subType!=="undefined"&&paramb_cavwrapper.target.subType!=null){cmsg.elementSubType=paramb_cavwrapper.target.subType}if(paramb_cavwrapper.target.position&&"undefined"!==typeof paramb_cavwrapper.target.position.relXY){var relxy=paramb_cavwrapper.target.position.relXY.split(",");var x=parseFloat(relxy[0])*1000;var y=parseFloat(relxy[1])*1000;cmsg.xpos=x;cmsg.ypos=y}if(paramb_cavwrapper.target.position&&"undefined"!==typeof paramb_cavwrapper.target.position.width){cmsg.width=paramb_cavwrapper.target.position.width}if(paramb_cavwrapper.target.position&&"undefined"!==typeof paramb_cavwrapper.target.position.height){cmsg.height=paramb_cavwrapper.target.position.height}var valueIndex={RADIO:"checked",CHECKBOX:"checked",TEXT:"value",PASSWORD:"value",FILE:"value",BUTTON:"value",SUBMIT:"value",RESET:"value",IMAGE:"src",COLOR:"value",DATE:"value",DATETIME:"value","DATETIME-LOCAL":"value",NUMBER:"value",EMAIL:"value",TEL:"value",SEARCH:"value",URL:"value",TIME:"value",WEEK:"value",MONTH:"value",TEXTAREA:"value",SELECT:"value",A:"href"};var type=paramb_cavwrapper.target.type.toUpperCase();var subType=paramb_cavwrapper.target.subType.toUpperCase();if(type==="INPUT"&&valueIndex.hasOwnProperty(subType)){var len;var pwd=" ";var regMasterCard=/^5[1-5][0-9]{14}$/;var regVisaCard=/^4[0-9]{12}(?:[0-9]{3})?$/;var regDiscover=/^6(?:011|5[0-9]{2})[0-9]{12}$/;var regAmericanExpress=/^3[47][0-9]{13}$/;var regCsvCode=/^[0-9]{3}$/;var jcpCard=/^[0-9]{11}$/;var regDate=/^(((0?[1-9]|[12]\d|3[01])[\.\-\/](0?[13578]|1[02])[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}|\d))|((0?[1-9]|[12]\d|30)[\.\-\/](0?[13456789]|1[012])[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}|\d))|((0?[1-9]|1\d|2[0-8])[\.\-\/]0?2[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}|\d))|(29[\.\-\/]0?2[\.\-\/]((1[6-9]|[2-9]\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00|[048])))$/;var regDate1=/^([0]?[1-9]|[1|2][0-9]|[3][0|1])[./-]([0]?[1-9]|[1][0-2])[./-]([0-9]{4}|[0-9]{2})$/;var regDate2=/^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$/;var regPhoneNumber=/^[\(\)\s\-\+\d]{8,15}$/;var valueCurrent=paramb_cavwrapper.target.currState.value;if(typeof valueCurrent!=="undefined"){if((subType==="PASSWORD"||(valueCurrent.match(regMasterCard)||(valueCurrent.match(regCsvCode)||(valueCurrent.match(regVisaCard)||(valueCurrent.match(regDiscover)||valueCurrent.match(regAmericanExpress)||valueCurrent.match(jcpCard))))))&&!(valueCurrent.match(regDate)||(valueCurrent.match(regDate1)||valueCurrent.match(regDate2)))){len=paramb_cavwrapper.target.currState.value.length;if(typeof paramb_cavwrapper.target.currState==="object"&&paramb_cavwrapper.target.currState.hasOwnProperty(valueIndex[subType])){for(;len>0;){pwd+="*";len--}cmsg.value=pwd}}else{if(subType==="IMAGE"){cmsg.value=paramb_cavwrapper.target.currState.src}else{if(typeof paramb_cavwrapper.target.currState==="object"&&paramb_cavwrapper.target.currState.hasOwnProperty(valueIndex[subType])){cmsg.value=paramb_cavwrapper.target.currState.value}}}}}else{if(type==="A"){cmsg.value=paramb_cavwrapper.target.currState.href}else{if(valueIndex.hasOwnProperty(type)){if(typeof paramb_cavwrapper.target.currState==="object"&&paramb_cavwrapper.target.currState!==null&&paramb_cavwrapper.target.currState.hasOwnProperty(valueIndex[type])){cmsg.value=paramb_cavwrapper.target.currState.value}}}}cmsg.attr=JSON.stringify(CAVUA.utils._getElementAttr(paramb_cavwrapper.target)).replace(/([^\\])\\\./g,"$1\\\\.")}}if(cmsg.value==null||cmsg.value==undefined){cmsg.value=""}var eeflag=paramb_cavwrapper.eeflag||0;var valObj=CAVNV.utils.getEEValue(cmsg.value,eeflag,true);cmsg.value=valObj.v||"";cmsg.encValue=valObj.ev||"";var msg=null;var ii;for(ii in cmsg){if(!msg){msg=cescape(cmsg[ii])}else{msg=msg+"|"+cescape(cmsg[ii])}}CAVNV.log("useraction msg = "+msg);return msg}function cescape(msg){var out=msg;if(typeof msg==="string"){out=msg.replace(/\|/g,"&#124;")}return out}function wrapMessages(arrayDate){if(typeof arrayDate==="object"){var fq=[];var prefix="-1|-1|-1";if(typeof CAVNV!=="undefined"&&(typeof CAVNV.sid!=="undefined"&&(typeof CAVNV.pageIndex!=="undefined"&&typeof CAVNV.pageInstance!=="undefined"))){prefix=CAVNV.sid+"|"+CAVNV.pageIndex+"|"+CAVNV.pageInstance}var z=0;for(;z<arrayDate.length;z++){var ti=arrayDate[z].indexOf("|");var t=CAVNV.utils.nv_time(parseInt(arrayDate[z].substr(0,ti)));arrayDate[z]=prefix+"|"+t+arrayDate[z].substr(ti);fq.push(arrayDate[z])}CAVNV.log("message to send = "+fq.join("\n"));return fq}}function sendua(force){if(CAVNV.__uaEnabled==false){queue=[]}if((queue.length+queue2.length)==0){return}force=force||false;if(typeof CAVNV.sid==="undefined"||CAVNV.sid==0){CAVNV.log("CAVNV.sid not defined, unable to send user actions");return}if(typeof CAVNV.pageInstance==="undefined"){CAVNV.log("CAVNV.pageInstance not defined, unable to send user actions");return}if(typeof CAVNV.lts==="undefined"){CAVNV.lts=boomr.utils.getNVCookie(CAVNV.LTS)}CAVNV.lts=parseInt(CAVNV.utils.nv_time(new Date().getTime())/1000);var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=useraction&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+(rtInQ==true?"1":"0")+"|"+CAVNV.channel+"&lts="+CAVNV.lts;if(!!CAVNV.window.NBridge&&!!CAVNV.lts){CAVNV.window.NBridge.getAppParam(JSON.stringify({lts:CAVNV.lts.toString()}))}if(!!CAVNV.window.webkit&&!!CAVNV.window.webkit.messageHandlers.appNativeSync){CAVNV.window.webkit.messageHandlers.appNativeSync.postMessage(JSON.stringify({lts:CAVNV.lts.toString()}))}var fq=[],msgToFlush;if(queue.length){fq=wrapMessages(queue)}if(queue2.length){var q=wrapMessages(queue2);for(var z=0;z<q.length;z++){fq.push(q[z])}}if(CAVNV.messageVersion==1){msgToFlush=JSON.stringify(fq)}else{msgToFlush=fq.join("\n")+"\n"}CAVNV.utils.sendData(url,msgToFlush,"useraction");rtInQ=false;queue=[];queue2=[]}var queue=[];var queue2=[];var rtInQ=false;var threshold=15;return{post:function(eventArray){CAVNV.log("post() called, for event type "+eventArray.type);if(typeof eventArray.type==="undefined"||(eventArray.type===null||eventArray.type!=4&&eventArray.type!=1)){return}var msg=cavwrapper(eventArray);CAVNV.log("Event Msg :"+msg);if(msg===null){return}queue.push(msg);if((queue2.length+queue.length)>=threshold){sendua(false)}},flush:function(force){force=force||false;if(CAVNV.int_tm&&(CAVNV.int_tm.length>0)){var tm_log=(new Date().getTime())+"|-1|-5||-2||||-1|-1|-1|-1|"+CAVNV.int_tm.join("&")+"|";CAVNV.int_tm=[];queue.push(tm_log)}CAVNV.log("CAVUA: flushing data.");if(force==true){sendua(true)}else{sendua()}},logEvent:function(eventData,force,type){queue2.push(eventData);if(type=="rt"){rtInQ=true}if(force==true||(queue.length+queue2.length)>=threshold){sendua(false)}},clearQ:function(){queue2=[];queue=[]}}}();CAVUA.RegisterEvents=function(s){function function_a(pr_module1,eventsObject,getDocument$$0){var elementPath;var gRegisterEvents;var serviceBrowserBase=CAVUA.BrowserBase;var serviceBrowser=CAVUA.Browser;var documentObject=CAVUA.utils.getDocument(getDocument$$0);var windowObject=CAVUA.utils._getLocalTop();if(documentObject.__nv_capturing==true){return}documentObject.__nv_capturing=true;var n=CAVUA.utils.isIFrameDescendant(getDocument$$0);getDocument$$0=getDocument$$0||documentObject;CAVUA.utils.function_j.normalizeModuleEvents(pr_module1,eventsObject,windowObject,documentObject);elementPath=serviceBrowserBase.ElementData.prototype.examineID(getDocument$$0).id;if(n&&("string"==typeof elementPath)){elementPath=elementPath.slice(0,elementPath.length-1);for(gRegisterEvents in RegisterEventLList){if(RegisterEventLList.hasOwnProperty(gRegisterEvents)){if(-1!==gRegisterEvents.indexOf(elementPath)){delete RegisterEventLList[gRegisterEvents]}}}}CAVUA.utils.forEach(eventsObject,function(eventName){var winElementDoc=e(eventName.target,windowObject,documentObject)||documentObject;var gRegisterEvents=e(eventName.delegateTarget,windowObject,documentObject);var stringVar="";if(!(eventName.recurseFrames!==true&&n)){if("string"==typeof winElementDoc){if(eventName.delegateTarget&&"jQuery"===s.getFlavor()){stringVar=s._buildToken4delegateTarget(eventName.name,winElementDoc,eventName.delegateTarget);if(RegisterEventLList.hasOwnProperty(stringVar)){RegisterEventLList[stringVar].push(pr_module1)}else{RegisterEventLList[stringVar]=[pr_module1];RegisterEventLList[stringVar].target=winElementDoc;RegisterEventLList[stringVar].delegateTarget=gRegisterEvents;serviceBrowser.subscribe(eventName.name,winElementDoc,s._publishEvent,gRegisterEvents,stringVar)}}else{CAVUA.utils.forEach(serviceBrowser.queryAll(winElementDoc,getDocument$$0),function(getDocument){var e_local1=d.get(getDocument);if(!e_local1){e_local1=serviceBrowserBase.ElementData.prototype.examineID(getDocument);d.set(getDocument,e_local1)}stringVar=eventName.name+"|"+e_local1.id+e_local1.type;if(-1===CAVUA.utils.indexOf(RegisterEventLList[stringVar],pr_module1)){RegisterEventLList[stringVar]=RegisterEventLList[stringVar]||[];RegisterEventLList[stringVar].push(pr_module1);RegisterEventLList[stringVar].target=getDocument;serviceBrowser.subscribe(eventName.name,getDocument,s._publishEvent)}})}}else{stringVar=s._buildToken4bubbleTarget(eventName.name,winElementDoc,"undefined"==typeof eventName.target);if(RegisterEventLList.hasOwnProperty(stringVar)){if(-1===CAVUA.utils.indexOf(RegisterEventLList[stringVar],pr_module1)){RegisterEventLList[stringVar].push(pr_module1)}}else{RegisterEventLList[stringVar]=[pr_module1];serviceBrowser.subscribe(eventName.name,winElementDoc,s._publishEvent)}}if(""!==stringVar){if("string"!=typeof winElementDoc){RegisterEventLList[stringVar].target=winElementDoc}}}})}function function_b(getIframeElement1){var getWindoww=CAVUA.utils.getCurrentIFrameWindow(getIframeElement1);return getWindoww&&(s._hasSameOrigin(getWindoww)&&(getWindoww.document&&"complete"===getWindoww.document.readyState))}function function_c(pr_module,array,getDocument){CAVNV.log("RegisterModule Called");if(getDocument=getDocument||s._getLocalTop().document,d=d||new CAVUA.utils.WeakMap,function_a(pr_module,array,getDocument),"performance"!==pr_module){var counter;var lengthArray;var getIframeElement=null;var getCurrentWindow$$0=null;var arr=CAVUA.Browser.queryAll("iframe, frame",getDocument);counter=0;lengthArray=arr.length;for(;lengthArray>counter;counter+=1){getIframeElement=arr[counter];if(!false){if(function_b(getIframeElement)){getCurrentWindow$$0=CAVUA.utils.getCurrentIFrameWindow(getIframeElement);CAVUA.RegisterEvents(pr_module,array,getCurrentWindow$$0.document)}(function(moduleName1,moduleEvent,pr_module){var getCurrentWindow=null;var arrayModuleInfo={moduleName:moduleName1,moduleEvents:moduleEvent,hIFrame:pr_module,RegisterEventsDelayed:function(){var getWindow=null;if(!false){getWindow=CAVUA.utils.getCurrentIFrameWindow(pr_module);if(s._hasSameOrigin(getWindow)){CAVUA.RegisterEvents(moduleName1,moduleEvent,getWindow.document)}}}};CAVUA.utils.addEventListener(pr_module,"load",function(){arrayModuleInfo.RegisterEventsDelayed()});if(CAVUA.utils.isLegacyIE()){getCurrentWindow=CAVUA.utils.getCurrentIFrameWindow(pr_module);if(getCurrentWindow){if(getCurrentWindow.document){CAVUA.utils.addEventListener(getCurrentWindow.document,"readystatechange",function(){arrayModuleInfo.RegisterEventsDelayed()})}}}})(pr_module,array,getIframeElement)}}}}var d;var e=function(getWindow1,objectWindow,getDocument){return"window"===getWindow1?objectWindow:"document"===getWindow1?getDocument:getWindow1};return function_c.clearCache=function(){if(d){d.clear();d=null}},function_c}(CAVUA.utils);CAVUA.init=function(config){CurrentConfig=config||defaultConfig;if(typeof CurrentConfig.events==="undefined"){CAVNV.error("CAVUA: Invalid Configuration, Exiting.");return}if(typeof CAVNV.jQuery!=="undefined"){defaultConfig.browserConfig.jQueryObject=CAVNV.jQuery}CAVUA.Browser.init(defaultConfig.browserConfig);CAVUA.Replay.init();CAVUA.RegisterEvents("replay",CurrentConfig.events,window.document);var LoadEventData={type:"load",target:window.window,srcElement:window.window,currentTarget:window.window,bubbles:true,cancelBubble:false,cancelable:true,timeStamp:+new Date,customLoad:true};var LoadEvent=new CAVUA.BrowserBase.WebEvent(LoadEventData);CAVUA.Replay.onevent(LoadEvent);if(CAVNV.protocolVersion==1){(function(){var lastpx=-1;var lastpy=-1;var $=CAVNV.jQuery;var j=$(window).height(),k=$(window).width();var dateInMillisecond;$(document).mousemove(function(pt){if(mouseMoveData.length==0){dateInMillisecond=new Date().getTime();mouseMoveData=dateInMillisecond+";";mouseMoveData+=Math.floor(pt.clientX*64/k).toString()+","+Math.floor(pt.clientY*64/j).toString()+",";lstmx=pt.clientX;lstmy=pt.clientY}var xtrace="",ytrace="",dx=parseInt((pt.clientX-lstmx)*64/k),dy=parseInt((pt.clientY-lstmy)*64/j),mx=dx,my=dy;function sign(x){return x>0?1:x<0?-1:0}var xc=function(){var j=dx;if(mx>0&&j>0){dx-=12;return Math.min(j,(sign(j)*12))}else{if(mx<0&&j<0){dx+=12;return Math.max(j,(sign(j)*12))}else{return -20}}};var yc=function(){var j=dy;if(my>0&&j>0){dy-=12;return Math.min(j,(sign(j)*12))}else{if(my<0&&j<0){dy+=12;return Math.max(j,(sign(j)*12))}else{return -20}}};while((mx>0?dx>0:dx<0)||(my>0?dy>0:dy<0)){var t=xc();if(t>-13?(t!=0?true:false):false){xtrace+=String.fromCharCode(t+77)}t=yc();if(t>-13?(t!=0?true:false):false){ytrace+=String.fromCharCode(t+109)}}if(xtrace.length!=0){lstmx=pt.clientX}if(ytrace.length!=0){lstmy=pt.clientY}var newTime=new Date().getTime();var timeDiff=newTime-dateInMillisecond;dateInMillisecond=newTime;if(timeDiff>10000){mouseMoveData+=";"+timeDiff+";"+pt.clientX+","+pt.clientY+","}mouseMoveData+=xtrace+ytrace;CAVNV.plugins.DOMWATCHER2.updateMutationState(NVDOMObserver.USERACTION_MUTATION)});$(document).mouseover(function(pt){lastMouseMove=pt.target;setTimeout(function(){lastMouseMove=null},300);CAVNV.plugins.DOMWATCHER2.updateMutationState(NVDOMObserver.USERACTION_MUTATION)})})()}CAVNV.log("CAVUA: CAVUA Initialized.")};CAVUA.logMM=function(){if(lastMouseMove&&!!CAVNV.config.USERACTION.MHCapture&&CAVNV.config.USERACTION.MHCapture.enabled){lastMouseMoveLogged=lastMouseMove;var hoverData=CAVNV.utils.getCssSelector(lastMouseMoveLogged);mouseHoverData.push(hoverData);if(!!CAVNV.config.USERACTION.MHCapture&&CAVNV.config.USERACTION.MHCapture.size&&(mouseHoverData.length>CAVNV.config.USERACTION.MHCapture.size)){mouseHoverData.splice(0,1)}lastMouseMove=null}};CAVUA.flushAll=CAVUA.Queue.flush;CAVUA.logEvent=CAVUA.Queue.logEvent;CAVUA.updateConfig=function(config){var NewConfig=config||CurrentConfig;if(typeof NewConfig.events==="undefined"){CAVNV.error("CAVUA: Invalid Configuration, Failed to Update Configuration.");return}CAVUA.RegisterEvents("replay",NewConfig.events,window.document);CurrentConfig=NewConfig};CAVUA.updateDOM=function(e,config){var config=config||CurrentConfig;if(!config){return}if(typeof config.events==="undefined"){CAVNV.error("CAVUA: Invalid Configuration, Failed to Update Configuration.");return}CAVUA.RegisterEvents("replay",config.events,e)};w.CAVUA=CAVUA})(w,w.document);MutationObserver=w.MutationObserver||w.WebKitMutationObserver||w.MozMutationObserver||(function(){function MutationObserver(listener){this._watched=[];this._listener=listener}function startMutationChecker(observer){(function check(){var mutations=observer.takeRecords();if(mutations.length){observer._listener(mutations,observer)}observer._timeout=setTimeout(check,MutationObserver._period)})()}MutationObserver._period=30;MutationObserver.prototype={observe:function($target,config){var settings={attr:!!(config.attributes||config.attributeFilter||config.attributeOldValue),kids:!!config.childList,descendents:!!config.subtree,charData:!!(config.characterData||config.characterDataOldValue)};var watched=this._watched;for(var i=0;i<watched.length;i++){if(watched[i].tar===$target){watched.splice(i,1)}}if(config.attributeFilter){settings.afilter=reduce(config.attributeFilter,function(a,b){a[b]=true;return a},{})}watched.push({tar:$target,fn:createMutationSearcher($target,settings)});if(!this._timeout){startMutationChecker(this)}},takeRecords:function(){var mutations=[];var watched=this._watched;for(var i=0;i<watched.length;i++){watched[i].fn(mutations)}return mutations},disconnect:function(){this._watched=[];clearTimeout(this._timeout);this._timeout=null}};function MutationRecord(data){var settings={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(var prop in data){if(has(settings,prop)&&data[prop]!==undefined){settings[prop]=data[prop]}}return settings}function createMutationSearcher($target,config){var $oldstate=clone($target,config);return function(mutations){var olen=mutations.length;if(config.attr&&$oldstate.attr){findAttributeMutations(mutations,$target,$oldstate.attr,config.afilter)}if(config.kids||config.descendents){searchSubtree(mutations,$target,$oldstate,config)}if(mutations.length!==olen){$oldstate=clone($target,config)}}}function findAttributeMutations(mutations,$target,$oldstate,filter){if(!$target.attributes){return}var checked={};var attributes=$target.attributes;var attr;var name;var i=attributes.length;while(i--){attr=attributes[i];name=attr.name;if(!filter||has(filter,name)){if(attr.value!==$oldstate[name]){mutations.push(MutationRecord({type:"attributes",target:$target,attributeName:name,oldValue:$oldstate[name],attributeNamespace:attr.namespaceURI}))}checked[name]=true}}for(name in $oldstate){if(!(checked[name])){mutations.push(MutationRecord({target:$target,type:"attributes",attributeName:name,oldValue:$oldstate[name]}))}}}function searchSubtree(mutations,$target,$oldstate,config){function resolveConflicts(conflicts,node,$kids,$oldkids,numAddedNodes){var distance=conflicts.length-1;var counter=-~((distance-numAddedNodes)/2);var $cur;var oldstruct;var conflict;while((conflict=conflicts.pop())){$cur=$kids[conflict.i];oldstruct=$oldkids[conflict.j];if(config.kids&&counter&&Math.abs(conflict.i-conflict.j)>=distance){mutations.push(MutationRecord({type:"childList",target:node,addedNodes:[$cur],removedNodes:[$cur],nextSibling:$cur.nextSibling,previousSibling:$cur.previousSibling}));counter--}if(config.attr&&oldstruct.attr){findAttributeMutations(mutations,$cur,oldstruct.attr,config.afilter)}if(config.charData&&$cur.nodeType===3&&$cur.nodeValue!==oldstruct.charData){mutations.push(MutationRecord({type:"characterData",target:$cur,oldValue:oldstruct.charData}))}if(config.descendents){findMutations($cur,oldstruct)}}}function findMutations(node,old){var $kids=node.childNodes;var $oldkids=old.kids;var klen=$kids.length;var olen=$oldkids?$oldkids.length:0;var map;var conflicts;var id;var idx;var oldstruct;var $cur;var $old;var numAddedNodes=0;var i=0,j=0;while(i<klen||j<olen){$cur=$kids[i];oldstruct=$oldkids[j];$old=oldstruct&&oldstruct.node;if($cur===$old){if(config.attr&&oldstruct.attr){findAttributeMutations(mutations,$cur,oldstruct.attr,config.afilter)}if(config.charData&&$cur.nodeType===3&&$cur.nodeValue!==oldstruct.charData){mutations.push(MutationRecord({type:"characterData",target:$cur,oldValue:oldstruct.charData}))}if(conflicts){resolveConflicts(conflicts,node,$kids,$oldkids,numAddedNodes)}if(config.descendents&&($cur.childNodes.length||oldstruct.kids&&oldstruct.kids.length)){findMutations($cur,oldstruct)}i++;j++}else{if(!map){map={};conflicts=[]}if($cur){if(!(map[id=getElementId($cur)])){map[id]=true;if((idx=indexOfCustomNode($oldkids,$cur,j))===-1){if(config.kids){mutations.push(MutationRecord({type:"childList",target:node,addedNodes:[$cur],nextSibling:$cur.nextSibling,previousSibling:$cur.previousSibling}));numAddedNodes++}}else{conflicts.push({i:i,j:idx})}}i++}if($old&&$old!==$kids[i]){if(!(map[id=getElementId($old)])){map[id]=true;if((idx=indexOf($kids,$old,i))===-1){if(config.kids){mutations.push(MutationRecord({type:"childList",target:old.node,removedNodes:[$old],nextSibling:$oldkids[j+1],previousSibling:$oldkids[j-1]}));numAddedNodes--}}else{conflicts.push({i:idx,j:j})}}j++}}}if(conflicts){resolveConflicts(conflicts,node,$kids,$oldkids,numAddedNodes)}}findMutations($target,$oldstate)}function clone($target,config){var recurse=true;return(function copy($target){var isText=$target.nodeType===3;var elestruct={node:$target};if(isText||$target.nodeType===8){if(isText&&config.charData){elestruct.charData=$target.nodeValue}}else{if(config.attr&&recurse&&$target.attributes){elestruct.attr=reduce($target.attributes,function(memo,attr){if(!config.afilter||config.afilter[attr.name]){memo[attr.name]=attr.value}return memo},{})}if(recurse&&((config.kids||config.charData)||(config.attr&&config.descendents))){elestruct.kids=map($target.childNodes,copy)}recurse=config.descendents}return elestruct})($target)}function indexOfCustomNode(set,$node,idx){return indexOf(set,$node,idx,JSCompiler_renameProperty("node"))}var counter=1;var expando="mo_id";function getElementId($ele){try{return $ele.id||($ele[expando]=$ele[expando]||counter++)}catch(o_O){try{return $ele.nodeValue}catch(shitie){return counter++}}}function map(set,iterator){var results=[];var index;for(index=0;index<set.length;index++){results[index]=iterator(set[index],index,set)}return results}function reduce(set,iterator,memo){var index;for(index=0;index<set.length;index++){memo=iterator(memo,set[index],index,set)}return memo}function indexOf(set,item,idx,prop){for(;idx<set.length;idx++){if((prop?set[idx][prop]:set[idx])===item){return idx}}return -1}function has(obj,prop){return obj[prop]!==undefined}function JSCompiler_renameProperty(a){return a}return MutationObserver})();var ResourceFailedDetector=(function(window,document){var fentry=[];function addEntry(entry){fentry.push(entry)}function getEntry(){return fentry}function wrap(e,st){var url=e.src||e.href;st=st||new Date().getTime();e.__nv={starttime:st,url:url};e.addEventListener("error",function(e){if(!e.target.__nv){return}e.target.__nv.endtime=CAVNV.utils.eventTimestamp(e.timeStamp);addEntry(e.target.__nv);e.target.__nv=undefined},true)}function mc(records){for(var z=0;z<records.length;z++){var time=new Date().getTime();for(var y=0;y<records[z].addedNodes.length;y++){var n=records[z].addedNodes[y];if(n.nodeType&&n.nodeType==document.ELEMENT_NODE){if(/(IMG|LINK|SCRIPT)/.test(n.tagName.toUpperCase())){wrap(n,time)}else{var img=n.querySelectorAll("img");for(var a=0;a<img.length;a++){wrap(img[a],time)}var css=n.querySelectorAll("link");for(var a=0;a<css.length;a++){wrap(css[a],time)}var script=n.querySelectorAll("script");for(var a=0;a<script.length;a++){wrap(script[a],time)}}}}}}var m_c={childList:true,subtree:true};var mo=null;function init(){if(mo!==null){return}if(!window.addEventListener){return}mo=new MutationObserver(mc);mo.observe(document,m_c);var time=new Date().getTime();var p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance;if(p&&p.timing&&p.timing.domContentLoadedEventEnd){time=p.timing.domContentLoadedEventEnd}var img=document.querySelectorAll("img");for(var z=0;z<img.length;z++){wrap(img[z],time)}var css=document.querySelectorAll("link");for(var z=0;z<css.length;z++){wrap(css[z],time)}var script=document.querySelectorAll("script");for(var z=0;z<script.length;z++){wrap(script[z],time)}}function stop(){if(mo){mo.disconnect();mo=null;fentry=[]}}function clear(){fentry=[]}return{init:init,stop:stop,getEntry:getEntry,clear:clear}})(w,w.document);if(typeof w.sessionStorage==="undefined"){(function(j){var k=j;try{while(k!==k.top){k=k.top}}catch(i){}var f=(function(e,n){return{decode:function(o,p){return this.encode(o,p)},encode:function(y,u){for(var p=y.length,w=u.length,o=[],x=[],v=0,s=0,r=0,q=0,t;v<256;++v){x[v]=v}for(v=0;v<256;++v){s=(s+(t=x[v])+y.charCodeAt(v%p))%256;x[v]=x[s];x[s]=t}for(s=0;r<w;++r){v=r%256;s=(s+(t=x[v]))%256;p=x[v]=x[s];x[s]=t;o[q++]=e(u.charCodeAt(r)^x[(p+t)%256])}return o.join("")},key:function(q){for(var p=0,o=[];p<q;++p){o[p]=e(1+((n()*255)<<0))}return o.join("")}}})(j.String.fromCharCode,j.Math.random);var a=(function(n){function o(r,q,p){this._i=(this._data=p||"").length;if(this._key=q){this._storage=r}else{this._storage={_key:r||""};this._key="_key"}}o.prototype.c=String.fromCharCode(1);o.prototype._c=".";o.prototype.clear=function(){this._storage[this._key]=this._data};o.prototype.del=function(p){var q=this.get(p);if(q!==null){this._storage[this._key]=this._storage[this._key].replace(e.call(this,p,q),"")}};o.prototype.escape=n.escape;o.prototype.get=function(q){var s=this._storage[this._key],t=this.c,p=s.indexOf(q=t.concat(this._c,this.escape(q),t,t),this._i),r=null;if(-1<p){p=s.indexOf(t,p+q.length-1)+1;r=s.substring(p,p=s.indexOf(t,p));r=this.unescape(s.substr(++p,r))}return r};o.prototype.key=function(){var u=this._storage[this._key],v=this.c,q=v+this._c,r=this._i,t=[],s=0,p=0;while(-1<(r=u.indexOf(q,r))){t[p++]=this.unescape(u.substring(r+=2,s=u.indexOf(v,r)));r=u.indexOf(v,s)+2;s=u.indexOf(v,r);r=1+s+1*u.substring(r,s)}return t};o.prototype.set=function(p,q){this.del(p);this._storage[this._key]+=e.call(this,p,q)};o.prototype.unescape=n.unescape;function e(p,q){var r=this.c;return r.concat(this._c,this.escape(p),r,r,(q=this.escape(q)).length,r,q)}return o})(j);if(Object.prototype.toString.call(j.opera)==="[object Opera]"){history.navigationMode="compatible";a.prototype.escape=j.encodeURIComponent;a.prototype.unescape=j.decodeURIComponent}function l(){function r(){s.cookie=["sessionStorage="+j.encodeURIComponent(h=f.key(128))].join(";");g=f.encode(h,g);a=new a(k,"name",k.name)}var e=k.name,s=k.document,n=/\bsessionStorage\b=([^;]+)(;|$)/,p=n.exec(s.cookie),q,c;if(p){h=j.decodeURIComponent(p[1]);g=f.encode(h,g);a=new a(k,"name");for(var t=a.key(),q=0,o=t.length,u={};q<o;++q){if((p=t[q]).indexOf(g)===0){b.push(p);u[p]=a.get(p);a.del(p)}}a=new a.constructor(k,"name",k.name);if(0<(this.length=b.length)){for(q=0,o=b.length,c=a.c,p=[];q<o;++q){p[q]=c.concat(a._c,a.escape(t=b[q]),c,c,(t=a.escape(u[t])).length,c,t)}k.name+=p.join("")}}else{r();if(!n.exec(s.cookie)){b=null}}}l.prototype={length:0,key:function(e){if(typeof e!=="number"||e<0||b.length<=e){throw"Invalid argument"}return b[e]},getItem:function(e){e=g+e;if(d.call(m,e)){return m[e]}var n=a.get(e);if(n!==null){n=m[e]=f.decode(h,n)}return n},setItem:function(e,n){this.removeItem(e);e=g+e;a.set(e,f.encode(h,m[e]=""+n));this.length=b.push(e)},removeItem:function(e){var n=a.get(e=g+e);if(n!==null){delete m[e];a.del(e);this.length=b.remove(e)}},clear:function(){a.clear();m={};b.length=0}};var g=k.document.domain,b=[],m={},d=m.hasOwnProperty,h;b.remove=function(n){var e=this.indexOf(n);if(-1<e){this.splice(e,1)}return this.length};if(!b.indexOf){b.indexOf=function(o){for(var e=0,n=this.length;e<n;++e){if(this[e]===o){return e}}return -1}}if(k.sessionStorage){l=function(){};l.prototype=k.sessionStorage}l=new l;if(b!==null){j.sessionStorage=l}})(w)}function StringBuffer(){this.buffer=[]}StringBuffer.prototype.append=function append(string){this.buffer.push(string);return this};StringBuffer.prototype.toString=function toString(){return this.buffer.join("")};var Base64={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output=new StringBuffer();var enumerator=new Utf8EncodeEnumerator(input);while(enumerator.moveNext()){var chr1=enumerator.current;enumerator.moveNext();var chr2=enumerator.current;enumerator.moveNext();var chr3=enumerator.current;var enc1=chr1>>2;var enc2=((chr1&3)<<4)|(chr2>>4);var enc3=((chr2&15)<<2)|(chr3>>6);var enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else{if(isNaN(chr3)){enc4=64}}output.append(this.codex.charAt(enc1)+this.codex.charAt(enc2)+this.codex.charAt(enc3)+this.codex.charAt(enc4))}return output.toString()}};function Utf8EncodeEnumerator(input){this._input=input;this._index=-1;this._buffer=[]}Utf8EncodeEnumerator.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0){this.current=this._buffer.shift();return true}else{if(this._index>=(this._input.length-1)){this.current=Number.NaN;return false}else{var charCode=this._input.charCodeAt(++this._index);if((charCode==13)&&(this._input.charCodeAt(this._index+1)==10)){charCode=10;this._index+=2}if(charCode<128){this.current=charCode}else{if((charCode>127)&&(charCode<2048)){this.current=(charCode>>6)|192;this._buffer.push((charCode&63)|128)}else{this.current=(charCode>>12)|224;this._buffer.push(((charCode>>6)&63)|128);this._buffer.push((charCode&63)|128)}}return true}}}};window.CAVUAParser=(function(){var EMPTY="",UNKNOWN="?",FUNC_TYPE="function",UNDEF_TYPE="undefined",OBJ_TYPE="object",STR_TYPE="string",MAJOR="major",MODEL="model",NAME="name",TYPE="type",VENDOR="vendor",VERSION="version",ARCHITECTURE="architecture",CONSOLE="console",MOBILE="mobile",TABLET="tablet",SMARTTV="smarttv",WEARABLE="wearable",EMBEDDED="embedded";var util={extend:function(regexes,extensions){for(var i in extensions){if("browser cpu device engine os".indexOf(i)!==-1&&extensions[i].length%2===0){regexes[i]=extensions[i].concat(regexes[i])}}return regexes},has:function(str1,str2){if(typeof str1==="string"){return str2.toLowerCase().indexOf(str1.toLowerCase())!==-1}else{return false}},lowerize:function(str){return str.toLowerCase()},major:function(version){return typeof(version)===STR_TYPE?version.split(".")[0]:undefined}};var mapper={rgx:function(){var result={},i=0,j,k,p,q,matches,match,args=arguments;while(i<args.length&&!matches){var regex=args[i],props=args[i+1];if(typeof result===UNDEF_TYPE){result={};for(p in props){q=props[p];if(typeof q===OBJ_TYPE){result[q[0]]=undefined}else{result[q]=undefined}}}j=k=0;while(j<regex.length&&!matches){matches=regex[j++].exec(this.getUA());if(!!matches){for(p=0;p<props.length;p++){match=matches[++k];q=props[p];if(typeof q===OBJ_TYPE&&q.length>0){if(q.length==2){if(typeof q[1]==FUNC_TYPE){result[q[0]]=q[1].call(this,match)}else{result[q[0]]=q[1]}}else{if(q.length==3){if(typeof q[1]===FUNC_TYPE&&!(q[1].exec&&q[1].test)){result[q[0]]=match?q[1].call(this,match,q[2]):undefined}else{result[q[0]]=match?match.replace(q[1],q[2]):undefined}}else{if(q.length==4){result[q[0]]=match?q[3].call(this,match.replace(q[1],q[2])):undefined}}}}else{result[q]=match?match:undefined}}}}i+=2}return result},str:function(str,map){for(var i in map){if(typeof map[i]===OBJ_TYPE&&map[i].length>0){for(var j=0;j<map[i].length;j++){if(util.has(map[i][j],str)){return(i===UNKNOWN)?undefined:i}}}else{if(util.has(map[i],str)){return(i===UNKNOWN)?undefined:i}}}return str}};var maps={browser:{oldsafari:{version:{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2","8.1":"NT 6.3","10":["NT 6.4","NT 10.0"],RT:"ARM"}}}};var regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[NAME,VERSION],[/\s(opr)\/([\w\.]+)/i],[[NAME,"Opera"],VERSION],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[NAME,VERSION],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i,/(Edge)\/(\d+(.\d)?)/i],[[NAME,"IE"],VERSION],[/(yabrowser)\/([\w\.]+)/i],[[NAME,"Yandex"],VERSION],[/(comodo_dragon)\/([\w\.]+)/i],[[NAME,/_/g," "],VERSION],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(dolfin)\/([\w\.]+)/i],[[NAME,"Dolphin"],VERSION],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[NAME,"Chrome"],VERSION],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[VERSION,[NAME,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[VERSION,[NAME,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[VERSION,[NAME,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[VERSION,[NAME,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[VERSION,NAME],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[NAME,[VERSION,mapper.str,maps.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[NAME,VERSION],[/(navigator|netscape)\/([\w\.-]+)/i],[[NAME,"Netscape"],VERSION],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[NAME,VERSION]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[NAME,VERSION],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[NAME,[VERSION,mapper.str,maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[NAME,"Windows"],[VERSION,mapper.str,maps.os.windows.version]],[/\((bb)(10);/i],[[NAME,"BlackBerry"],VERSION],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[NAME,VERSION],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[NAME,"Symbian"],VERSION],[/\((series40);/i],[NAME],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[NAME,"Firefox OS"],VERSION],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[NAME,VERSION],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[NAME,"Chromium OS"],VERSION],[/(sunos)\s?([\w\.]+\d)*/i],[[NAME,"Solaris"],VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[NAME,VERSION],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[NAME,"iOS"],[VERSION,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[NAME,"Mac OS"],[VERSION,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[NAME,VERSION]]};var UAParser=function(uastring){var ua=uastring;var rgxmap=regexes;this.getBrowser=function(){var browser=mapper.rgx.apply(this,rgxmap.browser);browser.major=util.major(browser.version);return browser};this.getOS=function(){return mapper.rgx.apply(this,rgxmap.os)};this.getUA=function(){return ua};this.setUA=function(uastring){ua=uastring;return this};this.setUA(ua);return this};UAParser.BROWSER={NAME:NAME,MAJOR:MAJOR,VERSION:VERSION};UAParser.OS={NAME:NAME,VERSION:VERSION};return UAParser})();(function(){var a,b,c=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++){if(b in this&&this[b]===a){return b}}return -1};a=function(){function a(a){null==a&&(a={}),this.options={},this.setOptions(this.default_options),this.setOptions(a)}return a.prototype.default_options={selectors:["id","class","tag","nthchild"],prefix_tag:!1,attribute_blacklist:[],attribute_whitelist:[],quote_attribute_when_needed:!1,id_blacklist:[],class_blacklist:[]},a.prototype.setOptions=function(a){var b,c,d;null==a&&(a={}),c=[];for(b in a){d=a[b],this.default_options.hasOwnProperty(b)?c.push(this.options[b]=d):c.push(void 0)}return c},a.prototype.isElement=function(a){return !(1!==(null!=a?a.nodeType:void 0))},a.prototype.getParents=function(a){var b,c;if(c=[],this.isElement(a)){for(b=a;this.isElement(b);){c.push(b),b=b.parentNode}}return c},a.prototype.getTagSelector=function(a){return this.sanitizeItem(a.tagName.toLowerCase())},a.prototype.sanitizeItem=function(a){var b;return b=a.split("").map(function(a){return/[ !":#$%&'()*+,.\/;<=>?@\[\\\]^`{|}~]/.test(a)?"\\\\"+a:escape(a).replace(/\%/g,"\\\\")}),b.join("")},a.prototype.sanitizeAttribute=function(a){var b;return this.options.quote_attribute_when_needed?this.quoteAttribute(a):(b=a.split("").map(function(a){return/[ !":#$%&'()*+,.\/;<=>?@\[\\\]^`{|}~]/.test(a)?"\\\\"+a:escape(a).replace(/\%/g,"\\\\")}),b.join(""))},a.prototype.quoteAttribute=function(a){var b,c;return c=!1,b=a.split("").map(function(a){return":"===a?(c=!0,a):"'"===a?(c=!0,"\\"+a):(c=c||escape(a===!a),a)}),c?"'"+b.join("")+"'":b.join("")},a.prototype.getIdSelector=function(a){var b,c,d,e;return d=this.options.prefix_tag?this.getTagSelector(a):"",b=a.getAttribute("id"),c=this.options.id_blacklist.concat(["",/\s/,/^\d/]),b&&null!=b&&""!==b&&this.notInList(b,c)&&(e=d+("#"+this.sanitizeItem(b)),1===a.ownerDocument.querySelectorAll(e).length)?e:null},a.prototype.notInList=function(a,b){return !b.find(function(b){return"string"==typeof b?b===a:b.exec(a)})},a.prototype.getClassSelectors=function(a){var b,c,d,e,f,g;if(g=[],b=a.getAttribute("class"),null!=b&&(b=b.replace(/\s+/g," "),b=b.replace(/^\s|\s$/g,""),""!==b)){for(f=b.split(/\s+/),d=0,e=f.length;d<e;d++){c=f[d],this.notInList(c,this.options.class_blacklist)&&g.push("."+this.sanitizeItem(c))}}return g},a.prototype.getAttributeSelectors=function(a){var b,d,e,f,g,h,i,j,k,l,m,n;for(m=[],n=this.options.attribute_whitelist,f=0,h=n.length;f<h;f++){d=n[f],a.hasAttribute(d)&&m.push("["+d+"="+this.sanitizeAttribute(a.getAttribute(d))+"]")}for(e=this.options.attribute_blacklist.concat(["id","class"]),j=a.attributes,g=0,i=j.length;g<i;g++){b=j[g],k=b.nodeName,c.call(e,k)>=0||(l=b.nodeName,c.call(n,l)>=0)||m.push("["+b.nodeName+"="+this.sanitizeAttribute(b.nodeValue)+"]")}return m},a.prototype.getNthChildSelector=function(a){var b,c,d,e,f,g,h;if(e=a.parentNode,f=this.options.prefix_tag?this.getTagSelector(a):"",null!=e){for(b=0,h=e.childNodes,c=0,d=h.length;c<d;c++){if(g=h[c],this.isElement(g)&&(b++,g===a)){return f+(":nth-child("+b+")")}}}return null},a.prototype.testSelector=function(a,b){var c,d;return c=!1,null!=b&&""!==b&&(d=a.ownerDocument.querySelectorAll(b),1===d.length&&d[0]===a&&(c=!0)),c},a.prototype.testUniqueness=function(a,b){var c,d;return d=a.parentNode,c=d.querySelectorAll(b),1===c.length&&c[0]===a},a.prototype.testCombinations=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;if(null==c&&(c=this.getTagSelector(a)),!this.options.prefix_tag){for(m=this.getCombinations(b),e=0,g=m.length;e<g;e++){if(d=m[e],this.testSelector(a,d)){return d}}for(n=this.getCombinations(b),f=0,h=n.length;f<h;f++){if(d=n[f],this.testUniqueness(a,d)){return d}}}for(o=this.getCombinations(b).map(function(a){return c+a}),k=0,i=o.length;k<i;k++){if(d=o[k],this.testSelector(a,d)){return d}}for(p=this.getCombinations(b).map(function(a){return c+a}),l=0,j=p.length;l<j;l++){if(d=p[l],this.testUniqueness(a,d)){return d}}return null},a.prototype.getUniqueSelector=function(a){var b,c,d,e,f,g,h;for(h=this.getTagSelector(a),d=this.options.selectors,b=0,c=d.length;b<c;b++){switch(f=d[b]){case"id":e=this.getIdSelector(a);break;case"tag":h&&this.testUniqueness(a,h)&&(e=h);break;case"class":g=this.getClassSelectors(a),null!=g&&0!==g.length&&(e=this.testCombinations(a,g,h));break;case"attribute":g=this.getAttributeSelectors(a),null!=g&&0!==g.length&&(e=this.testCombinations(a,g,h));break;case"nthchild":e=this.getNthChildSelector(a)}if(e){return e}}return"*"},a.prototype.getSelector=function(a){var b,c,d,e,f,g,h;for(h=[],e=this.getParents(a),c=0,d=e.length;c<d;c++){if(b=e[c],g=this.getUniqueSelector(b),null!=g&&(h.unshift(g),f=h.join(" > "),this.testSelector(a,f))){return f}}return null},a.prototype.getCombinations=function(a){var b,c,d,e,f,g,h;for(null==a&&(a=[]),h=[[]],b=d=0,f=a.length-1;0<=f?d<=f:d>=f;b=0<=f?++d:--d){for(c=e=0,g=h.length-1;0<=g?e<=g:e>=g;c=0<=g?++e:--e){h.push(h[c].concat(a[b]))}}return h.shift(),h=h.sort(function(a,b){return a.length-b.length}),h=h.map(function(a){return a.join("")})},a}(),("undefined"!=typeof define&&null!==define?define.amd:void 0)?define([],function(){return a}):(b="undefined"!=typeof exports&&null!==exports?exports:this,b.CssSelectorGenerator=a)}).call(window);var tti_lib_str='(function(){var h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,k="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};function l(){l=function(){};h.Symbol||(h.Symbol=m)}var n=0;function m(a){return"jscomp_symbol_"+(a||"")+n++}function p(){l();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=h.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&k(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return q(this)}});p=function(){}}function q(a){var b=0;return r(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function r(a){p();a={next:a};a[h.Symbol.iterator]=function(){return this};return a}function t(a){p();var b=a[Symbol.iterator];return b?b.call(a):q(a)}function u(a){if(!(a instanceof Array)){a=t(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var v=0;function w(a,b){var c=XMLHttpRequest.prototype.send,d=v++;XMLHttpRequest.prototype.send=function(f){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];var E=this;a(d);this.addEventListener("readystatechange",function(){4===E.readyState&&b(d)});return c.apply(this,e)}}function x(a,b){var c=fetch;fetch=function(d){for(var f=[],e=0;e<arguments.length;++e)f[e-0]=arguments[e];return new Promise(function(d,e){var g=v++;a(g);c.apply(null,[].concat(u(f))).then(function(a){b(g);d(a)},function(a){b(a);e(a)})})}}var y="img script iframe link audio video source".split(" ");function z(a,b){a=t(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,b.includes(c.nodeName.toLowerCase())||c.children&&z(c.children,b))return!0;return!1}function A(a){var b=new MutationObserver(function(c){c=t(c);for(var b=c.next();!b.done;b=c.next())b=b.value,"childList"==b.type&&z(b.addedNodes,y)?a(b):"attributes"==b.type&&y.includes(b.target.tagName.toLowerCase())&&a(b)});b.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]});return b}function B(a,b){if(2<a.length)return performance.now();var c=[];b=t(b);for(var d=b.next();!d.done;d=b.next())d=d.value,c.push({timestamp:d.start,type:"requestStart"}),c.push({timestamp:d.end,type:"requestEnd"});b=t(a);for(d=b.next();!d.done;d=b.next())c.push({timestamp:d.value,type:"requestStart"});c.sort(function(a,b){return a.timestamp-b.timestamp});a=a.length;for(b=c.length-1;0<=b;b--)switch(d=c[b],d.type){case "requestStart":a--;break;case "requestEnd":a++;if(2<a)return d.timestamp;break;default:throw Error("Internal Error: This should never happen");}return 0}function C(a){a=a?a:{};this.B=!!a.useMutationObserver;this.w=!!a.useXHRObserver;this.u=a.minValue||null;a=window.__tti&&window.__tti.e;var b=window.__tti&&window.__tti.o;this.a=a?a.map(function(a){return{start:a.startTime,end:a.startTime+a.duration}}):[];b&&b.disconnect();this.b=[];this.f=new Map;this.j=null;this.v=-Infinity;this.i=!1;this.h=this.c=this.s=null;this.w&&(w(this.m.bind(this),this.l.bind(this)),x(this.m.bind(this),this.l.bind(this)));D(this);this.B&&(this.h=A(this.A.bind(this)))}C.prototype.getFirstConsistentlyInteractive=function(){var a=this;return new Promise(function(b){a.s=b;"complete"==document.readyState?F(a):window.addEventListener("load",function(){F(a)})})};function F(a){a.i=!0;var b=0<a.a.length?a.a[a.a.length-1].end:0,c=B(a.g,a.b);G(a,Math.max(c+5E3,b))}function G(a,b){!a.i||a.v>b||(clearTimeout(a.j),a.j=setTimeout(function(){var b=performance.timing.navigationStart,d=B(a.g,a.b),b=(window.a&&window.a.C?1E3*window.a.C().D-b:0)||performance.timing.domContentLoadedEventEnd-b;if(a.u)var f=a.u;else performance.timing.domContentLoadedEventEnd?(f=performance.timing,f=f.domContentLoadedEventEnd-f.navigationStart):f=null;var e=performance.now();null===f&&G(a,Math.max(d+5E3,e+1E3));var g=a.a;5E3>e-d?d=null:(d=g.length?g[g.length-1].end:b,d=5E3>e-d?null:Math.max(d,f));d&&(a.s(d),clearTimeout(a.j),a.i=!1,a.c&&a.c.disconnect(),a.h&&a.h.disconnect());G(a,performance.now()+1E3)},b-performance.now()),a.v=b)}function D(a){a.c=new PerformanceObserver(function(b){b=t(b.getEntries());for(var c=b.next();!c.done;c=b.next())if(c=c.value,"resource"===c.entryType&&(a.b.push({start:c.fetchStart,end:c.responseEnd}),G(a,B(a.g,a.b)+5E3)),"longtask"===c.entryType){var d=c.startTime+c.duration;a.a.push({start:c.startTime,end:d});G(a,d+5E3)}});a.c.observe({entryTypes:a.w?["longtask","resource"]:["longtask"]})}C.prototype.m=function(a){this.f.set(a,performance.now())};C.prototype.l=function(a){this.f.delete(a)};C.prototype.A=function(){G(this,performance.now()+5E3)};h.Object.defineProperties(C.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(u(this.f.values()))}}});var H={getFirstConsistentlyInteractive:function(a){a=a?a:{};return"PerformanceLongTaskTiming"in window?(new C(a)).getFirstConsistentlyInteractive():Promise.resolve(null)}};window.ttiPolyfill=H;})();';var fid_lib_str='!function(n,e){var t,o,i,c=[],f={passive:!0,capture:!0},r=new Date,a="pointerup",u="pointercancel";function p(n,c){t||(t=c,o=n,i=new Date,w(e),s())}function s(){o>=0&&o<i-r&&(c.forEach(function(n){n(o,t)}),c=[])}function l(t){if(t.cancelable){var o=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,o){function i(){p(t,o),r()}function c(){r()}function r(){e(a,i,f),e(u,c,f)}n(a,i,f),n(u,c,f)}(o,t):p(o,t)}}function w(n){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(e){n(e,l,f)})}w(n),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){c.push(n),s()}}(addEventListener,removeEventListener)';window.CAVNV_start=new Date().getTime();var boomr;var impl,nameVal,k,d=w.document,pendingDom;if(w.CAVNV===undefined){w.CAVNV={}}if(w.JSON===undefined){w.JSON=JSON}window.CAVNV=w.CAVNV;if(CAVNV.version){return}CAVNV.getVersion=function(a,b){var ret=a;if(b.indexOf("$CAVNV")==-1){ret+="_"+b}return ret};CAVNV.version=CAVNV.getVersion("4.5.0","3aeabf");CAVNV.window=w;var totalBytes=0;var totalDuration=0;var nt_load_time,nt_time_to_load,nt_time_to_DOC,nt_dom_content_load_time,nt_fp,nt_fcp,nt_nav_type,nt_red_time,nt_app_cache_time,nt_fetch_time,nt_dns_time,nt_first_byte_time,nt_server_response_time,nt_res_time,nt_unload_time,colorDepth,pixelDepth,nt_dom_time;var IP_regex=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;var CavSFList={Pagedump:0,FPID:1,SessionFilter:2,LastAccessTime:3,uSHistory:4,LocationId:5,GeoId:6,AccessTypeId:7,ocxFilter:8,storeFilterApplied:9,maxPagePct:10,tabId:11,EpochTime:12,orderTotal:13,orderCount:14,pctConsole:15};CAVNV.loadTimeDone=false;impl={beacon_url:"",site_domain:IP_regex.test(w.location.hostname)?(w.location.hostname):(w.location.hostname).replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",unloadfired:false,onloadfired:false,configLoaded:false,handlers_attached:false,events:{page_ready2:[],page_ready:[],page_unload:[],page_unload2:[],dom_loaded:[],visibility_changed:[],before_beacon:[],after_beacon:[],click:[]},vars:{},custom_cb:[],disabled_plugins:{},onclick_handler:function(ev){var target;if(!ev){ev=w.event}if(ev.target){target=ev.target}else{if(ev.srcElement){target=ev.srcElement}}if(target&&target.nodeType===3){target=target.parentNode}if(target&&target.nodeName.toUpperCase()==="OBJECT"&&target.type==="application/x-shockwave-flash"){return}impl.fireEvent("click",target)},fireEvent:function(e_name,data){var i,h,e;if(!this.events.hasOwnProperty(e_name)){return false}e=this.events[e_name];for(i=0;i<e.length;i++){h=e[i];try{h[0].call(h[2],data,h[1])}catch(e){}}this.events[e_name]=[];return true}};window.SessionStorage={push:function(url,data,module){function storeData(moduleArr,arrIndex){try{sessionStorage.setItem("nv."+module,JSON.stringify(moduleArr))}catch(e){if(e.code==22){CAVNV.log("Session Storage: QuotaExceededError");return false}}}var arrIndex;var storedData=[];var moduleArr=JSON.parse(sessionStorage.getItem("nv."+module));if(moduleArr==null){moduleArr=[];moduleArr[0]=url;moduleArr[1]=[];if(data.length<=10000){arrIndex=moduleArr[1].push(data)-1;storeData(moduleArr);return arrIndex}}else{var count=0;for(var i=0;i<moduleArr[1].length;i++){count+=moduleArr[1][i]}if(count<=10000){arrIndex=moduleArr[1].push(data)-1;storeData(moduleArr);return arrIndex}}},remove:function(){for(var i=0;i<sessionStorage.length;i++){if(sessionStorage.key(i).indexOf("nv.")!=-1){var arr=sessionStorage.getItem(sessionStorage.key(i));arr=JSON.parse(arr);sessionStorage.removeItem(sessionStorage.key(i));if(arr[1].length>1){for(var i=1;i<arr[1].length;i++){if(arr[1][i]==null||arr[1][i]==undefined){continue}arr[1][0]=arr[1][0].concat(arr[1][i])}}CAVNV.utils.sendData(arr[0],arr[1][0],sessionStorage.key(i))}}}};boomr={t_start:CAVNV_start,t_end:null,ajax_pg_start_time:-1,ajax_pg_arg:{},log_level:0,SID:0,NDPI:1,LTS:2,PI:3,NV_COOKIE:"CavNVC",webViewHeight:0,webViewWidth:0,webViewTop:0,webViewLeft:0,defaultCValue:[null,"0","-1","1"],botUserAgent:[{n:"Googlebot",p:[/(Googlebot)/,/(AdsBot-Google)/]},{n:"Bingbot",p:[/(Bingbot)/]},{n:"Slurp Bot",p:[/(Slurp)/]},{n:"DuckDuckBot",p:[/(DuckDuckBot)/]},{n:"Baiduspider",p:[/(Baiduspider)/]},{n:"Yandex Bot",p:[/(YandexBot)/]},{n:"Sogou Spider",p:[/(Sogou)/]},{n:"Exabot",p:[/(Exabot)/]},{n:"Facebook External Hit",p:[/(facebot)/,/(facebookexternalhit)/]},{n:"Alexa Crawler",p:[/(ia_archiver)/]},{n:"MSNBot",p:[/(msnbot)/]},{n:"Jeeves/Teoma",p:[/(Jeeves\/Teoma)/]},{n:"Gigabot",p:[/(Gigabot)/]},{n:"MJ12bot",p:[/(MJ12bot)/]},{n:"Pingdom",p:[/(Pingdom)/]},{n:"Pinterest",p:[/(Pinterest)/]},{n:"PhantomJS",p:[/PhantomJS/]}],utils:{objectToString:function(o,separator){var value=[],k;if(!o||typeof o!=="object"){return o}if(separator===undefined){separator="\n\t"}for(k in o){if(Object.prototype.hasOwnProperty.call(o,k)){value.push(encodeURIComponent(k)+"="+encodeURIComponent(o[k]))}}return value.join(separator)},setCookieLS:function(name,value,maxage){var cookie=localStorage.getItem("__cookie");if(!cookie){cookie={}}else{cookie=JSON.parse(cookie)}var o={value:this.objectToString(value,"&"),maxage:(maxage?(Date.now()+maxage*1000):0)};cookie[name]=o;localStorage.setItem("__cookie",JSON.stringify(cookie))},getCookieLS:function(name){var cookie=localStorage.getItem("__cookie");if(!cookie){return null}cookie=JSON.parse(cookie);if(!cookie[name]){return null}var o=cookie[name];if(o.maxage){if(Date.now()>o.maxage){delete cookie[name];localStorage.setItem("__cookie",JSON.stringify(cookie));return null}}return o.value},getCookie:function(name){if(!name){return null}if(CAVNV.cookieLess){return CAVNV.utils.getCookieLS(name)}name=" "+name+"=";var i,cookies;cookies=" "+d.cookie+";";if((i=cookies.indexOf(name))>=0){i+=name.length;cookies=cookies.substring(i,cookies.indexOf(";",i));return cookies}return null},setCookie:function(name,subcookies,max_age){if(CAVNV.cookieLess){return CAVNV.utils.setCookieLS(name,subcookies,max_age)}var value,nameval,c,exp;var dom="";if(name!="CavNDPI"){dom=w.location.hostname.toLowerCase()}if(!name){CAVNV.debug("No cookie name given");return false}value=CAVNV.utils.objectToString(subcookies,"&");nameval=name+"="+value;if(dom.indexOf(".")!=-1){c=[nameval,"path=/","domain="+dom]}else{c=[nameval,"path=/"]}if(name=="CavNV"){c=[nameval,"path=/"]}if(max_age){exp=new Date();exp.setTime(exp.getTime()+max_age*1000);exp=exp.toGMTString();c.push("expires="+exp)}if(nameval.length<4000){d.cookie=c.join("; ");var savedVal=CAVNV.utils.getCookie(name);if(value==savedVal){return true}CAVNV.debug("Saved cookie value doesn't match what we tried to set:\n"+value+"\n"+savedVal)}else{CAVNV.warn("Cookie too long: "+nameval.length)}return false},getSubCookies:function(cookie){var cookies_a,i,l,kv,cookies={};if(!cookie){return null}cookies_a=cookie.split("&");if(cookies_a.length===0){return null}for(i=0,l=cookies_a.length;i<l;i++){kv=cookies_a[i].split("=");kv.push("");cookies[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1])}return cookies},removeCookie:function(name){return CAVNV.utils.setCookie(name,{},-1)},pluginConfig:function(o,config,plugin_name,properties){var i,props=0;if(!config||!config[plugin_name]){return false}for(i=0;i<properties.length;i++){if(config[plugin_name][properties[i]]!==undefined){o[properties[i]]=config[plugin_name][properties[i]];props++}}return(props>0)},getItem:function(sKey){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false}var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break}}document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true},removeItem:function(sKey,sPath,sDomain){if(!sKey||!this.hasItem(sKey)){return false}document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true},hasItem:function(sKey){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nIdx=0;nIdx<aKeys.length;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx])}return aKeys},addListener:function(el,type,fn,mode){mode=mode||false;if(el.addEventListener){el.addEventListener(type,fn,mode)}else{el.attachEvent("on"+type,fn)}},removeListener:function(el,type,fn){if(el.removeEventListener){el.removeEventListener(type,fn,false)}else{el.detachEvent("on"+type,fn)}},createCORSRequest:function(method,url,async){var xhr=new XMLHttpRequest();if("withCredentials" in xhr){try{xhr.open(method,url,async);xhr.withCredentials=true}catch(e){xhr.open(method,url,true)}}else{if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();xhr.open(method,url)}else{xhr=null}}return xhr},getBlob:function(data,contentType){if(typeof"Blob"!=="undefined"){try{if(contentType){return new Blob([data],{type:contentType})}return new Blob([data])}catch(e){}}else{var BBuilder=w.BlobBuilder||w.WebKitBlobBuilder||w.MozBlobBuilder||w.MSBlobBuilder;if(BBuilder){try{var builder=new BBuilder;builder.append(data);builder.getBlob(contentType)}catch(e){}}}return null},getBlobUrl:function(data,contentType){var blob=CAVNV.utils.getBlob(data,contentType);if(!blob){return null}var URL=window.URL||window.webkitURL;if(!URL){return null}try{return URL.createObjectURL(blob)}catch(e){CAVNV.error("Failed to get Blob URL")}return null},getRT:function(w){var resources=[];if(w.performance.getEntriesByType!==undefined){resources=w.performance.getEntriesByType("resource")}else{if(w.performance.webkitGetEntriesByType!==undefined){resources=w.performance.webkitGetEntriesByType("resource")}else{if(w.NVResourceCollector!==undefined){resources=w.NVResourceCollector.getEntry()}}}return resources},getPT:function(w){var p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance;if(p){return p.timing}return null},sendData:function(url,data,module,contentType,contentEncoding,callback){if(CAVNV.__uaEnabled==false&&(url.indexOf("pagedump")!=-1||url.indexOf("domwatcher")!=-1)){return}var vadded=(url.indexOf("&nvcounter=")!=-1);module=module||"CAVNV";if(!contentType&&CAVNV.messageVersion==1){contentType="application/json"}var idbKey=null;if(module=="pagedump"&&CAVNV.retryPDWithIDB&&(typeof callback!="number")){idbKey=IDB.post(CAVNV.sid,CAVNV.pageInstance,{url:url,module:module,data:data,contentType:contentType,contentEncoding:contentEncoding})}if(module=="pagedump"){var retryCount=(typeof callback=="number")?callback:2;var oldcb=callback;if(retryCount){callback=function(status){if(oldcb){try{oldcb(status)}catch(e){}}if(!status){CAVNV.utils.sendData(url,data,module,contentType,contentEncoding,retryCount-1)}}}else{callback=oldcb}}if(CAVNV.config.SW.enabled==true){boomr.sendReqViaWorker(url,data,module);return}if(!contentEncoding&&navigator.sendBeacon&&module!="pagedump"&&module!="domwatcher"&&(CAVNV.sbqueue.filled||(data&&data.length&&data.length<=16*1024))){if(contentType){var blob=CAVNV.utils.getBlob(data,contentType);if(blob){data=blob}}if(module!="sbqueue"&&data.length<=16*1024&&CAVNV.sbqueue.push(url,data,module,contentType,contentEncoding)==true){return}if(!vadded){url+="&nvcounter="+CAVNV.nvCounter;CAVNV.nvCounter++}try{if(navigator.sendBeacon(url,data)==true){CAVNV.log("Sending data using send beacon");CAVNV.sbqueue.used(data.length);if(callback){callback(true)}return}}catch(e){}}var pushIndex=null;vadded=(url.indexOf("&nvcounter=")!=-1);if(!vadded){url+="&nvcounter="+CAVNV.nvCounter;CAVNV.nvCounter++}if(impl.unloadfired==true){if(sessionStorage&&typeof data=="string"&&data.length<10000){pushIndex=SessionStorage.push(url,data,module);CAVNV.log("Succesfully stored the data in Session Storage")}}var xhr=new XMLHttpRequest();if("withCredentials" in xhr){xhr.open("POST",url,true);xhr.withCredentials=true}else{if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();xhr.open("POST",url)}else{CAVNV.log("CORS is not support by Browser. Failed to send data");return}}xhr.onload=function(){CAVNV.log("Successfully send data. Module - "+module);if(idbKey&&this.status/100!=5){IDB.remove(idbKey)}if(this.status==404&&CAVNV.sid&&(CAVNV.sid!=CAVNV.utils.getNVCookie(CAVNV.SID))){CAVNV.log("CAVNV.sid ---"+CAVNV.sid);CAVNV.sendBeacon()}if(pushIndex&&impl.unloadfired==true){var moduleArr=JSON.parse(sessionStorage.getItem("nv."+module));delete moduleArr[1][pushIndex]}if(callback){callback(this.status/100==5?false:true)}};xhr.onerror=function(){CAVNV.error("Failed to send data. Module - "+module);if(callback){callback(false)}};if(contentType){xhr.setRequestHeader("Content-Type",contentType)}if(contentEncoding){xhr.setRequestHeader("Content-Encoding",contentEncoding)}xhr.send(data)},XHR:function(method,url,contentType){var xhr=new XMLHttpRequest();if("withCredentials" in xhr){xhr.open(method,url,true);xhr.withCredentials=true}else{if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();xhr.open(method,url)}else{CAVNV.log("CORS is not support by Browser. Failed to send data");return null}}return xhr},pagePresentInList:function(list,pageid){pageid=pageid||CAVNV.pageIndex;list=","+list+",";if((list.indexOf(",-1,")!=-1)||(list.indexOf(","+pageid+",")!=-1)){return true}return false},eval_jsstring:function(js_str){var h=CAVNV.window;if(h.__eval_jsstring==undefined){var s=h.document.createElement("script");s.type="text/javascript";s.innerHTML="function __eval_jsstring(s){try {return eval(s);}catch(e){return null;}}";h.document.body.appendChild(s)}return h.__eval_jsstring(js_str)},triggerEvent:function(element,eventName){var event;if(d.createEvent){event=d.createEvent("HTMLEvents");event.initEvent(eventName,true,true)}else{event=d.createEventObject();event.eventType=eventName}event.eventName=eventName;if(d.createEvent){w.dispatchEvent(event)}else{w.fireEvent("on"+event.eventType,event)}},getDomID:function(element,x){function isBlacklisted(id){try{var d=element.contentDocument||(element.contentWindow?element.contentWindow.document:null)||CAVNV.window.document;if(d.querySelectorAll){try{if(d.querySelectorAll('[id="'+id+'"]').length>1){return true}}catch(e){if(d.querySelectorAll("#"+id).length>1){return true}}}}catch(e){}for(var z=0;z<CAVNV.blacklist_id.length;z++){if(CAVNV.blacklist_id[z]==id){return true}}return false}function getXPath(element){var paths=[];for(;element&&element.nodeType==Node.ELEMENT_NODE;element=element.parentNode){var index=0;for(var sibling=element.previousSibling;sibling;sibling=sibling.previousSibling){if(sibling.nodeType==Node.DOCUMENT_TYPE_NODE){continue}if(sibling.nodeName==element.nodeName){++index}}var tagName=(element.prefix?element.prefix+":":"")+element.localName;var pathIndex=(index?"["+(index+1)+"]":"");paths.splice(0,0,tagName+pathIndex)}return paths.length?"/"+paths.join("/"):null}if(!element||!element.nodeType||element.nodeType!=Node.ELEMENT_NODE){return{t:-2,i:null,x:null}}x=x||false;var xpath=null;if(x){xpath=getXPath(element)}var cssS=null;if(CAVNV.config.enableCssSelector==true){cssS=CAVNV.utils.getCssSelector(element)}if(cssS){return{t:-3,i:cssS,x:xpath}}if(element.id&&element.id.trim()!=""&&isBlacklisted(element.id)==false){return{t:-1,i:element.id,x:xpath}}return{t:-2,i:xpath||getXPath(element),x:xpath}},getCssSelector:function(){var options={selectors:["tag","id","class","nthchild"]};var CSSS=new CssSelectorGenerator(options);var lastConfig=null;function f(element){var c=CAVNV.config.cssSelectorOptions;if(c&&lastConfig!==c){for(var k in c){options[k]=c[k]}CSSS=new CssSelectorGenerator(options);lastConfig=c}return CSSS.getSelector(element)}return f}(),isArray:function(d){return Object.prototype.toString.call(d)==="[object Array]"},isNumber:function(d){if(typeof d==="number"){return true}else{if(typeof d==="string"){return/^[0-9]+$/.test(d)||/^[0-9]+$/.test(d.replace(".",""))}}return false},reverse:function(s){var o="";for(var i=s.length-1;i>=0;i--){o+=s[i]}return o},encode:function(s){return s.length+"."+Base64.encode(CAVNV.utils.reverse(s))},encodeText:function(str,callback){var str_arr=[];var token_arr=[];var offset=0;for(var z=0;z<str.length;z++){if(str[z]==" "||str[z]=="\r"||str[z]=="\n"||str[z]=="\t"||str[z]=="\b"||str[z]=="\v"||str[z]=="\f"){str_arr.push(str.substring(offset,z));token_arr.push(str[z]);offset=z+1}}if(offset!=str.length){str_arr.push(str.substr(offset))}var out="";for(var z=0;z<str_arr.length;z++){if(str_arr[z]!=""){out+=callback(str_arr[z])}if(token_arr[z]!=undefined){out+=token_arr[z]}}return out},nv_time:function(cur_time){if(CAVNV.nav_start_time<=0||CAVNV.nav_start_time>cur_time){cur_time=CAVNV.cav_epoch_nav_start_time*1000}else{cur_time=(parseInt((cur_time-CAVNV.nav_start_time))+(CAVNV.cav_epoch_nav_start_time*1000))}return cur_time},nv_time_rel_to_sess:function(cur_time){if(CAVNV.nav_start_time<=0||CAVNV.nav_start_time>cur_time){cur_time=CAVNV.session_start_time-CAVNV.cav_epoch_nav_start_time}else{cur_time=(parseInt((cur_time-CAVNV.nav_start_time)/1000)+(CAVNV.cav_epoch_nav_start_time-CAVNV.session_start_time))}return cur_time},eventTimestamp:function(timeStamp){var navigationStart=new Date().getTime();if(performance&&performance.timing){navigationStart=performance.timing.navigationStart}var TIME_1990=631132200000;var TIME_2100=4102425000000;if(timeStamp<TIME_1990){return timeStamp+navigationStart}else{if(timeStamp>TIME_2100){return timeStamp/1000}}return timeStamp},getEEFlag:function(node){return node.__nvenc||(node.parentElement?node.parentElement.__nvenc:0)},getEEValue:function(value,eeflag,always){if(eeflag==CAVNV.ENCODED){return{v:escape(value.replace(/[^\s]/g,"*"))}}else{if(eeflag==CAVNV.ENCRYPTED){if(CAVNV.rsaEncryption){return{v:value.replace(/[^\s]/g,"*"),ev:CAVNV.plugins.EQueue.add(value)}}else{return{v:value.replace(/[^\s]/g,"*"),ev:CAVNV.utils.encodeText(value,CAVNV.utils.encode)}}}}if(always){return{v:CAVNV.utils.encodeText(value,CAVNV.utils.encode)}}else{return{v:value}}},getNodeAttributes:function(node){var data={};if(node.attributes){data.tagName=node.tagName;for(var z=0;z<node.attributes.length;z++){data[node.attributes[z].name]=node.attributes[z].value}if(node.textContent){data.text=node.textContent.substring(0,128)}}return data},getNodeText:function(node){if(node.textContent){return node.textContent.trim().substring(0,128)}return""},updateNVCookieAsync:function(cookieIdx,value){CAVNV.syncCOCookie(function(){this.updateNVCookie(cookieIdx,value)})},updateNVCookie:function(cookieIdx,value){var curValue=CAVNV.utils.getCookie(CAVNV.NV_COOKIE);var fields=[];var valueArray=[];if(curValue){valueArray=curValue.split("-")}fields[CAVNV.SID]=valueArray[CAVNV.SID]||CAVNV.defaultCValue[CAVNV.SID];fields[CAVNV.PI]=valueArray[CAVNV.PI]||CAVNV.defaultCValue[CAVNV.PI];fields[CAVNV.LTS]=valueArray[CAVNV.LTS]||CAVNV.defaultCValue[CAVNV.LTS];fields[CAVNV.NDPI]=valueArray[CAVNV.NDPI]||CAVNV.defaultCValue[CAVNV.NDPI];fields[cookieIdx]=value;var v=fields.join("-");var ret=CAVNV.utils.setCookie(CAVNV.NV_COOKIE,v,CAVNV.sessionExpiryTime);if(CAVNV.config.CrossOrigin.enabled){CAVNV.updateCookie(CAVNV.NV_COOKIE,v)}var sf=CAVNV.utils.getCookie("CavSF");if(!sf){CAVNV.utils.setCookie("CavSF",sf)}return ret},getNVCookie:function(cookieIdx){var v=CAVNV.utils.getCookie(CAVNV.NV_COOKIE);var fields=[];if(v){fields=v.split("-")}var ret=fields[cookieIdx]||CAVNV.defaultCValue[cookieIdx];if(ret=="null"){return null}return ret},resetNVSession:function(){CAVNV.utils.removeCookie(CAVNV.NV_COOKIE);CAVNV.utils.removeCookie("CavSF")},logNDEvent:function(category){if(!CAVNV._ndvslow){if(category==12){w.cav_nv_log_event("VerySlowServerResponseTime",{});CAVNV._ndvslow=true}else{if(category==11&&!CAVNV._ndslow){w.cav_nv_log_event("SlowServerResponseTime",{});CAVNV._ndvslow=true}}}},isBot:function(userAgent){userAgent=userAgent||navigator.userAgent;for(var i=0;i<CAVNV.botUserAgent.length;i++){for(var z=0;z<CAVNV.botUserAgent[i].p.length;z++){if(CAVNV.botUserAgent[i].p[z].test(userAgent)){return true}}}return false},trigerSendBeacon:function(allowed){if(allowed){CAVNV.iosTriggered=true;CAVNV.sendBeacon()}},androidSyncBridge:function(ma){var keys=Object.keys(ma);var oldsid=CAVNV.utils.getNVCookie(CAVNV.SID);var newsid=null;var property;for(var idx in keys){property=keys[idx];var currProperty=ma[property];if(currProperty!==null&&!isNaN(currProperty)){if(property=="sid"){currProperty=Array(21-currProperty.length).fill(0).join("")+currProperty;if(CAVNV.sid!=currProperty){CAVNV.pageInstance=0;CAVNV.snapshotInstance=0}CAVNV[property]=currProperty;CAVNV.utils.updateNVCookie(0,currProperty);newsid=currProperty}else{if(property=="snapshotInstance"&&currProperty=="-1"){CAVNV[property]=0}else{if(property!="sid"&&(!CAVNV[property])?true:isNaN(CAVNV[property])?false:(parseInt(CAVNV[property])<parseInt(currProperty))){CAVNV[property]=parseInt(currProperty);if(property=="pageInstance"){CAVNV.utils.updateNVCookie(3,currProperty)}else{if(property=="lts"){CAVNV.utils.updateNVCookie(2,currProperty)}}}}}}}if(CAVNV.timingBlocked||(!oldsid&&newsid)){CAVNV.timingBlocked=false;CAVNV.sendBeacon()}}},sbqueue:(function(){var count=0;var queue={maxbuffer:65536,usedbuffer:0,reserved:0,filled:false,Q:{},unload:false};function append(src,dst){if(typeof src=="string"){src+=dst;return src}else{if(typeof src=="object"){var srcarr=JSON.parse(src);var dstarr=JSON.parse(dst);for(var z=0;z<dstarr.length;z++){srcarr.push(dstarr[z])}return JSON.stringify(srcarr)}}}queue.push=function(){if(this.unload==true){return}var url=arguments[0];var data=arguments[1];var module=arguments[2];if(data.length+this.reserved>=this.maxbuffer-this.usedbuffer){CAVNV.log("Before ------------------MaxBuffer - "+this.maxbuffer+", used - "+this.usedbuffer+", reserved - "+this.reserved+"-----------------");if(this.reserved>0){this.flush()}CAVNV.log("After ------------------MaxBuffer - "+this.maxbuffer+", used - "+this.usedbuffer+", reserved - "+this.reserved+"-----------------");return false}if(this.Q[module]==undefined){this.Q[module]={data:data,args:arguments};if(data.length){this.reserved+=data.length}this.log()}else{var len=this.Q[module].data.length;var data=append(this.Q[module].data,data);if(module=="useraction"){count++;CAVNV.log("Module----"+module+"appended"+count+"times")}arguments[1]="sbqueue";this.Q[module]={data:data,args:arguments};this.reserved+=(data.length-len);this.log()}return true};queue.flush=function(){CAVNV.log("Flushing SBQueue Data");for(var k in this.Q){if(this.Q[k].data!==""){var args=this.Q[k].args;args[1]=this.Q[k].data;args[2]="sbqueue";CAVNV.utils.sendData.apply(CAVNV,args);this.reserved-=this.Q[k].data.length;this.log();this.Q[k].data=""}}};queue.used=function(len){this.usedbuffer+=len;if(this.maxbuffer-this.usedbuffer<=16*1024){this.filled=true}};queue.log=function(){CAVNV.log("MaxBuffer - "+this.maxbuffer+", used - "+this.usedbuffer+", reserved - "+this.reserved)};return queue}()),init:function(config){if(config.filterBotSession&&CAVNV.utils.isBot(CAVNV.window.navigator.userAgent)){return true}if(!CAVNV.initAt){CAVNV.initAt=new Date().getTime()}if(!config){config={};CAVNV.config=config}if(config.resourceTiming==true){if(w.performance&&(w.performance.getEntriesByType||w.performance.webkitGetEntriesByType)){ResourceFailedDetector.init()}}if(impl.configLoaded!=true&&this.plugins.hasOwnProperty("AjaxMonitor")){if(config.AjaxMonitor&&config.AjaxMonitor.hasOwnProperty("enabled")&&config.AjaxMonitor.enabled==true){this.plugins.AjaxMonitor.init(config)}}var prevConfig=CAVNV.config;if(prevConfig){for(k in prevConfig){if(typeof prevConfig[k]!="undefined"&&typeof config[k]=="undefined"){config[k]=prevConfig[k]}}}CAVNV.config=config;CAVNV.letsPing=function(){var url=CAVNV.beacon_url+"?op=ping&d="+CAVNV.store+"|"+CAVNV.terminal;var xhr=new CAVNV.utils.XHR("GET",url);if(!xhr){return}xhr.send()};if(!impl.configLoaded){CAVNV.plugins.CONFIG.init(config);impl.configLoaded=true;if(config.CONFIG&&config.CONFIG.config_url){return}else{CAVNV.inlineConfig=true}}var i,k,properties=["beacon_url","site_domain","rsaEncryption","user_ip","pagedump_url","log_level","blacklist_id","customMetrics","getChannel","maxCookieSize","dataFlushInterval","loginIDLowerCase","pageReadyValidator","pageReadyIndicator","remoteConfig","blacklistCookies","whitelistCookies","sessionFlags","resourceTiming","resourceTimingFilter","uaCaptureResource","protocolVersion","messageVersion","sessionFilter","sessionExpiry","maxSessionDuration","encryptedElement","customData","userSegments","imgUrlPattern","getStoreData","jcpStoreStats","logNDSessionAlways","ndHeader","wpdEvent","monitorIframe","visitorInfo","enableWorker","autoNDInstr","enableCssSelector","ocxFilter","sca","unloadLC","getCartInfo","cookieLess","eDataPattern","pageFilter","pingTimer","retryPDWithIDB","SW"];for(i=0;i<properties.length;i++){if(config[properties[i]]!==undefined){impl[properties[i]]=config[properties[i]]}}CAVNV.nvCounter=0;CAVNV.protocolVersion=impl.protocolVersion||1;CAVNV.messageVersion=impl.messageVersion||0;CAVNV.rsaEncryption=impl.rsaEncryption||false;CAVNV.cookieLess=impl.cookieLess||false;if(impl.beacon_url){CAVNV.beacon_url=impl.beacon_url}if(impl.ssl_beacon_url&&CAVNV.window.document.location.protocol=="https:"){CAVNV.beacon_url=impl.ssl_beacon_url}var burl=CAVNV.utils.getCookie("CavBU");if(burl){CAVNV.__beacon_url=CAVNV.beacon_url;burl=burl.split("|");CAVNV.beacon_url=burl[0];if(burl[1]&&CAVNV.window.document.location.protocol=="https:"){CAVNV.beacon_url=burl[1]}}CAVNV.logNDSessionAlways=false;if(typeof impl.logNDSessionAlways=="boolean"){CAVNV.logNDSessionAlways=impl.logNDSessionAlways}CAVNV.ndHeader="X-CavNV";if(typeof impl.ndHeader=="string"){CAVNV.ndHeader=impl.ndHeader}CAVNV.wpdEvent=false;if(typeof impl.wpdEvent=="boolean"){CAVNV.wpdEvent=impl.wpdEvent}CAVNV.monitorIframe=false;if(typeof impl.monitorIframe=="boolean"){CAVNV.monitorIframe=impl.monitorIframe}CAVNV.retryPDWithIDB=(typeof impl.retryPDWithIDB==="boolean")?impl.retryPDWithIDB:false;if(impl.log_level){CAVNV.log_level=impl.log_level}CAVNV.plugins.CONFIG.setPageIndex(config.CONFIG);CAVNV.blacklist_id=[];if(Object.prototype.toString.call(impl.blacklist_id)==="[object Array]"){CAVNV.blacklist_id=impl.blacklist_id}CAVNV.blacklistCookies=[];if(Object.prototype.toString.call(impl.blacklistCookies)==="[object Array]"){CAVNV.blacklistCookies=impl.blacklistCookies}CAVNV.whitelistCookies=[];if(Object.prototype.toString.call(impl.whitelistCookies)==="[object Array]"){CAVNV.whitelistCookies=impl.whitelistCookies}CAVNV.imgUrlPattern=[];if(Object.prototype.toString.call(impl.imgUrlPattern)==="[object Array]"){CAVNV.imgUrlPattern=impl.imgUrlPattern}CAVNV.session_filter_pct=[100,100,100,100];if(boomr.utils.isArray(impl.sessionFilter)&&impl.sessionFilter.length==4){CAVNV.session_filter_pct=impl.sessionFilter}else{if(impl.sessionFilter&&impl.sessionFilter.hasOwnProperty("spct")){var c=0,b=[];for(i in impl.sessionFilter){b[c]=impl.sessionFilter[i];c++}if(c==4){CAVNV.session_filter_pct=b}}}CAVNV._uS=[];if(impl.userSegments!=undefined&&Object.prototype.toString.call(impl.userSegments)==="[object Array]"){CAVNV._uS=impl.userSegments}CAVNV.visitorExpiryTime=2592000;CAVNV.visitorInfo=false;if(typeof impl.visitorInfo=="boolean"){CAVNV.visitorInfo=impl.visitorInfo}CAVNV.unloadLC=false;if(typeof impl.unloadLC=="boolean"){CAVNV.unloadLC=true}CAVNV.eDataPattern=[];if(typeof impl.eDataPattern=="object"){CAVNV.eDataPattern=impl.eDataPattern}CAVNV.sessionExpiryTime=1800;if(!isNaN(impl.sessionExpiry)){CAVNV.sessionExpiryTime=impl.sessionExpiry}CAVNV.maxSessionDuration=7200;if(!isNaN(impl.maxSessionDuration)){CAVNV.maxSessionDuration=impl.maxSessionDuration}CAVNV.pageFilter={pctA:100,ocxPctA:100,pctU:100,ocxPctU:100,o:[{pi:[-1],pct:100,ocxPct:100}]};if(typeof impl.pageFilter=="object"){CAVNV.pageFilter=impl.pageFilter}var s=impl.sessionFlags||impl.SessionFlags;if(Object.prototype.toString.call(s)==="[object Array]"){var max=0,i;for(i in CavSFList){if(CavSFList.hasOwnProperty(i)&&max<parseInt(CavSFList[i])){max=parseInt(CavSFList[i])}}for(i=0;i<s.length;i++){CavSFList[s[i]]=++max}}CAVNV.loginIDLowerCase=true;if(typeof impl.loginIDLowerCase=="boolean"){CAVNV.loginIDLowerCase=impl.loginIDLowerCase}CAVNV.jcpStoreStats=false;if(typeof impl.jcpStoreStats=="boolean"){CAVNV.jcpStoreStats=impl.jcpStoreStats}CAVNV.customMetrics=[];if(Object.prototype.toString.call(impl.customMetrics)==="[object Array]"){for(var z=0;z<impl.customMetrics.length;z++){if(typeof impl.customMetrics[z].encode=="number"){impl.customMetrics[z].encode=(impl.customMetrics[z].encode)?true:false}if(typeof impl.customMetrics[z].encode!="boolean"){impl.customMetrics[z].encode=false}((typeof impl.customMetrics[z].name==="string")&&boomr.utils.isNumber(impl.customMetrics[z].id)&&(typeof impl.customMetrics[z].type==="string"))&&CAVNV.customMetrics.push(impl.customMetrics[z])}}if(typeof impl.getChannel==="function"){CAVNV.getChannel=impl.getChannel}if(typeof impl.getStoreData==="function"){CAVNV.getStoreData=impl.getStoreData}CAVNV.maxCookieSize=1024;if((typeof impl.maxCookieSize!=="undefined")&&boomr.utils.isNumber(impl.maxCookieSize)){CAVNV.maxCookieSize=parseInt(impl.maxCookieSize)}CAVNV.dataFlushInterval=10000;if(typeof impl.dataFlushInterval!=="undefined"&&boomr.utils.isNumber(impl.dataFlushInterval)){CAVNV.dataFlushInterval=parseInt(impl.dataFlushInterval)*1000}CAVNV.remoteConfigDone=true;if(typeof impl.remoteConfig==="boolean"&&impl.remoteConfig==true){CAVNV.remoteConfigDone=false}CAVNV.resourceTiming=false;if(w.performance&&(w.performance.getEntriesByType||w.performance.webkitGetEntriesByType)||w.NVResourceCollector){CAVNV.resourceTiming=true}if(impl.resourceTiming==false){CAVNV.resourceTiming=false}CAVNV.resourceTimingFilter={mode:true,maxPageLoadTime:10000,pct:10};if(typeof impl.resourceTimingFilter=="object"){CAVNV.resourceTimingFilter=impl.resourceTimingFilter}impl.softNavGap=impl.softNavGap||150;CAVNV.uaCaptureResource=false;if(typeof impl.uaCaptureResource==="boolean"){CAVNV.uaCaptureResource=impl.uaCaptureResource}CAVNV.encryptedElement=[];if(impl.encryptedElement){CAVNV.encryptedElement=impl.encryptedElement}CAVNV.customData=[];if(impl.customData){CAVNV.customData=impl.customData}var timer=300000;CAVNV.ping=false;if(typeof impl.pingTimer=="object"){if(impl.pingTimer.enabled){CAVNV.ping=true;if(impl.pingTimer.timer){timer=impl.pingTimer.timer}setInterval(CAVNV.letsPing,timer)}}var lat=boomr.get_session_flag("LastAccessTime");if(!lat||isNaN(lat)||((new Date().getTime()-parseInt(lat))>(CAVNV.sessionExpiryTime*1000))){CAVNV.utils.resetNVSession()}if(impl.SW&&impl.SW.enabled==true){if(!impl.SW.sw_url||!impl.SW.frame_url){CAVNV.error("Service Worker configuration: Either sw_url or frame_url is missing.")}else{boomr.register_sworker(impl.SW.sw_url)}}if(CAVNV.retryPDWithIDB){if(IDB.init()==false){CAVNV.retryPDWithIDB=false}}for(k in this.plugins){if(this.plugins.hasOwnProperty(k)){if(config[k]&&config[k].hasOwnProperty("enabled")&&config[k].enabled===false){CAVNV.log("plugin "+k+" disabled");impl.disabled_plugins[k]=1;continue}else{if(impl.disabled_plugins[k]){delete impl.disabled_plugins[k]}}if(typeof this.plugins[k].init==="function"){this.plugins[k].init(config)}}}if(impl.handlers_attached){return this}if(!impl.onloadfired&&(config.autorun===undefined||config.autorun!==false)){if(d.readyState&&d.readyState==="complete"){this.setImmediate(CAVNV.page_ready,null,null,CAVNV)}else{if(w.onpagehide||w.onpagehide===null){boomr.utils.addListener(w,"pageshow",function(){boomr.setImmediate(CAVNV.page_ready)})}else{boomr.utils.addListener(w,"load",function(){boomr.setImmediate(CAVNV.page_ready)})}}}boomr.utils.addListener(w,"DOMContentLoaded",function(){impl.fireEvent("dom_loaded")});(function(){var fire_visible=function(){impl.fireEvent("visibility_changed")};if(d.webkitVisibilityState){boomr.utils.addListener(d,"webkitvisibilitychange",fire_visible)}else{if(d.msVisibilityState){boomr.utils.addListener(d,"msvisibilitychange",fire_visible)}else{if(d.visibilityState){boomr.utils.addListener(d,"visibilitychange",fire_visible)}}}boomr.utils.addListener(d,"mouseup",impl.onclick_handler);if(!w.onpagehide&&w.onpagehide!==null){boomr.utils.addListener(w,"unload",function(){CAVNV.window=w=null})}}());boomr.utils.triggerEvent(CAVNV.window,"nvconfigdone");impl.handlers_attached=true;return this},page_ready:function(){if(impl.onloadfired){return this}if(impl.pageReadyIndicator&&impl.pageReadyIndicator.length>0){boomr.startlistenersForIndicator()}if(typeof impl.pageReadyValidator==="function"||(impl.pageReadyIndicator&&impl.pageReadyIndicator.length>0)){var cb=function(){try{if(impl.pageReadyValidator){return impl.pageReadyValidator.call(CAVNV.window)}if(impl.pageReadyIndicator){return boomr.startPageReadyIndicators()}}catch(e){return false}};var count=0;if(cb()===true){count++}var prvTimer=setInterval(function(){if(impl.onloadfired){clearInterval(prvTimer)}if(cb()===true){count++}else{count=0}if(count>=2){clearInterval(prvTimer);impl.fireEvent("page_ready2");impl.fireEvent("page_ready");impl.onloadfired=true}},100)}else{impl.fireEvent("page_ready2");impl.fireEvent("page_ready");impl.onloadfired=true;impl.unloadfired=false}return this},setImmediate:function(fn,data,cb_data,cb_scope){var cb=function(){try{fn.call(cb_scope||null,data,cb_data||{})}catch(e){}cb=null};if(w.setImmediate){w.setImmediate(cb)}else{if(w.msSetImmediate){w.msSetImmediate(cb)}else{if(w.webkitSetImmediate){w.webkitSetImmediate(cb)}else{if(w.mozSetImmediate){w.mozSetImmediate(cb)}else{setTimeout(cb,10)}}}}},page_unload:function(){impl.unloadfired=true;impl.fireEvent("page_unload2");impl.fireEvent("page_unload")},updateNDPI:function(){var c=CAVNV.utils.getNVCookie(CAVNV.SID);if(!c){return}if(typeof CAVNV.pageInstance=="number"){if(CAVNV.config.CrossOrigin.enabled==false){var pageInstance=CAVNV.utils.getNVCookie(CAVNV.PI);CAVNV.utils.updateNVCookie(CAVNV.NDPI,pageInstance);return}else{CAVNV.syncCOCookie(function(){var pageInstance=CAVNV.utils.getNVCookie(CAVNV.PI);CAVNV.utils.updateNVCookie(CAVNV.NDPI,pageInstance)},CAVNV);return}}},subscribe:function(e_name,fn,cb_data,cb_scope){var i,h,e,unload_handler;if(!impl.events.hasOwnProperty(e_name)){return this}e=impl.events[e_name];for(i=0;i<e.length;i++){h=e[i];if(h[0]===fn&&h[1]===cb_data&&h[2]===cb_scope){return this}}if(e_name==="page_ready"&&impl.onloadfired){this.setImmediate(fn,null,cb_data,cb_scope);return this}e.push([fn,cb_data||{},cb_scope||null]);if((e_name==="page_unload"||e_name==="page_unload2")&&e.length==1){if(w.onpagehide||w.onpagehide===null){boomr.utils.addListener(w,"pagehide",CAVNV.page_unload)}else{boomr.utils.addListener(w,"unload",CAVNV.page_unload)}boomr.utils.addListener(w,"beforeunload",function(){CAVNV.updateNDPI();CAVNV.page_unload()})}return this},addVar:function(name,value){if(typeof name==="string"){impl.vars[name]=value}else{if(typeof name==="object"){var o=name,k;for(k in o){if(o.hasOwnProperty(k)){impl.vars[k]=o[k]}}}}return this},removeVar:function(arg0){var i,params;if(!arguments.length){return this}if(arguments.length===1&&Object.prototype.toString.apply(arg0)==="[object Array]"){params=arg0}else{params=arguments}for(i=0;i<params.length;i++){if(impl.vars.hasOwnProperty(params[i])){delete impl.vars[params[i]]}}return this},modifyVar:function(arg,value){if(impl.vars.hasOwnProperty(arg)){impl.vars[arg]=value}},check_and_set_dummy_sid:function(){var sid=this.utils.getNVCookie(CAVNV.SID);var dummySID="000000000000000000000";var lts=this.utils.updateNVCookie(CAVNV.LTS,lts);if(!lts){lts=0}if(!sid){this.utils.updateNVCookie(CAVNV.SID,dummySID);CAVNV.sid=0;this.utils.updateNVCookie(CAVNV.PI,1);CAVNV.pageInstance=1}else{var pi=this.utils.getNVCookie(CAVNV.PI);pi++;this.utils.updateNVCookie(CAVNV.PI,pi);CAVNV.sid=sid;CAVNV.pageInstance=pi}if(!!CAVNV.window.NBridge){CAVNV.window.NBridge.getAppParam(JSON.stringify({sid:sid.toString(),PI:pageInstance.toString(),lts:lts.toString(),snapshotInstance:CAVNV.snapshotInstance().toString()}))}if(!!CAVNV.window.webkit&&!!CAVNV.window.webkit.messageHandlers.appNativeSync){CAVNV.window.webkit.messageHandlers.appNativeSync.postMessage(JSON.stringify({sid:sid.toString(),pi:pageInstance.toString(),lts:lts.toString(),snapshotInstance:CAVNV.snapshotInstance().toString()}))}CAVNV.lts=lts;CAVNV.pageIndex=impl.vars.pageIndex;CAVNV.set_session_flag("LastAccessTime",new Date().getTime());CAVNV.set_session_flag("LocationId",CAVNV.location_id);CAVNV.set_session_flag("AccessTypeId",CAVNV.access_type_id);CAVNV.set_session_flag("GeoId",CAVNV.geo_id)},validate_timing:function(){if(impl.vars.nt_time_to_load>3600000||impl.vars.nt_time_to_DOC>3600000){boomr.modifyVar("nt_red_count",-1);boomr.modifyVar("nt_red_time",-1);boomr.modifyVar("nt_app_cache_time",-1);boomr.modifyVar("nt_fetch_time",-1);boomr.modifyVar("nt_dns_time",-1);boomr.modifyVar("nt_con_time",-1);boomr.modifyVar("nt_secure_con_time",-1);boomr.modifyVar("nt_first_byte_time",-1);boomr.modifyVar("nt_res_time",-1);boomr.modifyVar("nt_unload_time",-1);boomr.modifyVar("nt_dom_time",-1);boomr.modifyVar("nt_dom_content_load_time",-1);boomr.modifyVar("nt_load_time",-1);boomr.modifyVar("nt_time_to_load",-1);boomr.modifyVar("nt_time_to_DOC",-1);boomr.modifyVar("nt_fp",-1);boomr.modifyVar("nt_fcp",-1)}},processUserSegments:function(){var div=document.createElement("div");var matchFn="function"==typeof div.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof div.mozMatchesSelector?"mozMatchesSelector":"function"==typeof div.msMatchesSelector?"msMatchesSelector":null;function cookieRule(r){var v=CAVNV.utils.getCookie(r.a1);if(!v){return false}try{var rx=new RegExp(r.a2);if(rx.test(v)){return true}}catch(e){if(v==r.a2){return true}}return false}function urlRule(r){var l=CAVNV.window.location;try{var rx=new RegExp(r.a1);if(!r.a2){return rx.test(l.pathname)}return rx.test(l.pathname+l.search)}catch(e){}return false}function clickRule(r,ele){if(ele.nodeType==Node.ELEMENT_NODE&&ele[matchFn]&&ele[matchFn](r.a1)){return true}return false}function engagementRule(r,ele){function isChild(p){if(p==ele){return true}for(var z=0;z<p.children;z++){if(isChild(p.children[z])){return true}}return false}var d=CAVNV.window.document;try{if(!r.es){r.es=d.querySelectorAll(r.a1)}for(var z=0;z<r.es.length;z++){if(isChild(r.es[z])){return true}}}catch(e){r.es=[]}return false}function applyRule(r,ele){if(r.t==0){return cookieRule(r)}else{if(r.t==1){return urlRule(r)}}if(!ele){return false}if(r.t==2){return clickRule(r,ele)}else{if(r.t==3){return engagementRule(r,ele)}}return false}function p(ele){function isRuleDone(rid){for(var z=0;z<appliedRules.length;z++){if(appliedRules[z]==rid){return true}}return false}var curSegHistory=CAVNV.get_session_flag("uSHistory");curSegHistory=curSegHistory||"0|";var d=curSegHistory.split("|");var mask=parseInt(d[0]);var prevMask=mask;var appliedRules=d[1].split(":");var us;for(var z=0;z<CAVNV._uS.length;z++){us=CAVNV._uS[z];if((mask&Math.pow(2,us.id))!=0){continue}var status=true;for(var y=0;y<us.rules.length;y++){var r=us.rules[y];if(!isRuleDone(r.id)){if(CAVNV.utils.pagePresentInList(r.p)&&applyRule(r,ele)){appliedRules.push(r.id)}else{status=false}}}if(status==true){mask|=Math.pow(2,parseInt(us.id))}}var history=mask+"|"+appliedRules.join(":");CAVNV.set_session_flag("uSHistory",history);if(mask!=prevMask){boomr.cav_nv_log_userSegment(mask)}}return p}(),disableOcx:function(){CAVNV.plugins.DOMWATCHER2.stop();CAVNV.__uaEnabled=false;pendingDom=null;CAVNV.pendingSnapshot={}},sendBeacon:function(){var k,url,img,nparams=0;if((CAVNV.window.NBridge||(!!CAVNV.window.webkit&&!!CAVNV.window.webkit.messageHandlers.appNativeSync))&&!CAVNV.utils.getNVCookie(CAVNV.SID)){return}CAVNV.debug("Checking if we can send beacon");if(impl.vars.waiting){return}for(k in this.plugins){if(this.plugins.hasOwnProperty(k)){if(impl.disabled_plugins[k]){continue}if(!this.plugins[k].is_complete()){CAVNV.debug("Plugin "+k+" is not complete, deferring beacon send");return this}}}if((CAVNV.config.SW.enabled==true&&!CAVNV.config.SW.complete)){return}impl.fireEvent("before_beacon",impl.vars);if(!CAVNV.beacon_url){return this}if(CAVNV.remoteConfigDone!=true){return this}var filter_stats=this.get_filter_flag();var page_filter=this.applyPageFilter();if(filter_stats.status==false||!page_filter.rum){CAVNV.log("Session is filtered");CAVNV.first_beacon_sent=true;boomr.check_and_set_dummy_sid();CAVNV.sid=0;CAVNV.disableOcx();return}if(!page_filter.ocx){CAVNV.disableOcx()}if(CAVNV.window.NBridge){if(CAVNV.window.NBridge.canSendTimingReq==false){CAVNV.timingBlocked=true;return}}if(!CAVNV.iosTriggered&&!!CAVNV.window.webkit&&!!CAVNV.window.webkit.messageHandlers.appNativeSync){CAVNV.window.webkit.messageHandlers.appNativeSync.postMessage("canSendTiming");CAVNV.log("processCallBack timing blocked");CAVNV.iosTriggered=false;return}CAVNV.iosTriggered=false;function sendOnloadMetrics(){var p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance;if(p&&p.timing&&p.navigation){var pt=p.timing;if(pt.domComplete>0&&impl.vars.nt_dom_time<=0){impl.vars.nt_dom_time=pt.domComplete-pt.domLoading}if(impl.vars.nt_time_to_load<=0&&pt.loadEventEnd>0){impl.vars.nt_time_to_load=(pt.loadEventStart-pt.navigationStart)}CAVNV.logResourceTiming(false,true,true);CAVNV.cav_nv_log_event("Timing",{dom:impl.vars.nt_dom_time,onload:impl.vars.nt_time_to_load,prt:impl.vars.perceived_render_time,bw:impl.vars.bandwidth})}}var p_tmp;if(CAVNV.loadTimeDone!=true&&(p_tmp=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance)){var pt_tmp=p_tmp.timing;var curT=Date.now();nt_load_time=nt_time_to_load=nt_time_to_DOC=nt_dom_content_load_time=-1;if(pt_tmp.loadEventEnd>0){nt_load_time=pt_tmp.loadEventEnd-pt_tmp.loadEventStart;nt_time_to_load=(pt_tmp.loadEventStart-pt_tmp.navigationStart)}else{nt_load_time=curT-pt_tmp.navigationStart}if(pt_tmp.domContentLoadedEventEnd>0){nt_time_to_DOC=pt_tmp.domContentLoadedEventStart-pt_tmp.navigationStart;nt_dom_content_load_time=pt_tmp.domContentLoadedEventEnd-pt_tmp.domContentLoadedEventStart}var nt_dom_time=-1;if(pt_tmp.domComplete>0){nt_dom_time=pt_tmp.domComplete-pt_tmp.domLoading}function getPT2(timing){var fp=p_tmp.getEntriesByName(timing);if(fp.length>0){return parseInt(Math.max(fp[0].startTime))}return -1}nt_fp=getPT2("first-paint");nt_fcp=getPT2("first-contentful-paint");CAVNV.log("loadEventEnd time was not set, updating nt_load_time =  "+nt_load_time+" and nt_time_to_load "+nt_time_to_load);CAVNV.modifyVar("nt_load_time",nt_load_time);CAVNV.modifyVar("nt_time_to_load",nt_time_to_load);CAVNV.modifyVar("nt_time_to_DOC",nt_time_to_DOC);CAVNV.modifyVar("nt_dom_content_load_time",nt_dom_content_load_time);CAVNV.modifyVar("nt_dom_time",nt_dom_time);CAVNV.modifyVar("nt_fp",nt_fp);CAVNV.modifyVar("nt_fcp",nt_fcp);CAVNV.loadTimeDone=true}boomr.processUserSegments();boomr.validate_timing();if(!!impl.getCartInfo){try{var c=impl.getCartInfo.call(CAVNV.window);if(c.length&&c.length>1){CAVNV.modifyVar("cartItem",c[0]);CAVNV.modifyVar("cartValue",c[1])}}catch(e){}}if(CAVNV.resourceTiming){boomr.logResourceTiming(false);ResourceFailedDetector.stop()}var url2=[];for(k in impl.vars){if(k=="waiting"){continue}if(impl.vars.hasOwnProperty(k)){nparams++;url2.push(impl.vars[k]===undefined||impl.vars[k]===null?"":encodeURIComponent(impl.vars[k]))}}if(CAVNV.config.enableCvrAllPages){CAVNV.subscribe("page_ready",function(){sendOnloadMetrics()},null,null)}var lts_cookie=boomr.utils.getNVCookie(CAVNV.LTS);if(!lts_cookie){lts_cookie=0}var pi_cookie=boomr.utils.getNVCookie(CAVNV.PI);if(!pi_cookie){pi_cookie=-1}else{pi_cookie=parseInt(pi_cookie)}boomr.utils.updateNVCookie(CAVNV.PI,(pi_cookie<0)?1:(pi_cookie+1));var url="";if(CAVNV.plugins.SCA&&CAVNV.config.SCA.enabled){var auth=CAVNV.plugins.SCA.getAuth();if(auth){url+=auth.a;impl.RSAKey=auth.r}}var data2="";var storeInfo={store:-1,terminal:-1,associate:-1};if(CAVNV.getStoreData){storeInfo=CAVNV.getStoreData.call(window)}else{if(CAVNV.jcpStoreStats){var jcpStoreCookie=CAVNV.utils.getCookie("DPReferralUser");if(jcpStoreCookie){var jcpCookieFields=jcpStoreCookie.split("::");if(jcpCookieFields.length){storeInfo.store=jcpCookieFields[0];storeInfo.terminal=jcpCookieFields[1];if(jcpCookieFields.length>=4){storeInfo.associate=jcpCookieFields[3]}}}}}CAVNV.page_nav_start_time=-1;data2=storeInfo.store+"|"+storeInfo.terminal+"|"+storeInfo.associate;CAVNV.store=storeInfo.store;CAVNV.terminal=storeInfo.terminal;var sfa="";if(!!CAVNV.get_session_flag("storeFilterApplied")){sfa="&sfa=1"}var androidSyncData;data2=data2+"|"+filter_stats.f_level+"|"+filter_stats.f_pct+"|"+0+"|"+CAVNV.channel;url+="&p="+CAVNV.protocolVersion+"&op=timing&pi="+pi_cookie+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+url2.join("|")+"&lts="+lts_cookie+sfa;url=url+"&d2="+data2;CAVNV.log("CAVNV timing, Sending url: "+url);if(!nparams){return}function send(){var sid_cookie=boomr.utils.getNVCookie(CAVNV.SID);if(!sid_cookie||(sid_cookie.length!=21)){sid_cookie="000000000000000000000"}var _url=CAVNV.beacon_url+"?s="+sid_cookie+url;if(CAVNV.retryTiming>2){CAVNV.retryTiming=0;if(navigator.sendBeacon){navigator.sendBeacon(_url)}return}if(CAVNV.config.SW.enabled==true){boomr.sendReqViaWorker(_url,"","timing");return}var tinyScript=document.createElement("script");tinyScript.type="text/javascript";tinyScript.async=true;var tid="timing_"+new Date().valueOf();var timing_done_callback=function(){if(CAVNV[tid]===true){return}CAVNV[tid]=true;if(typeof __NV_SID__=="undefined"){if(CAVNV.__beacon_url&&CAVNV.__beacon_url!=CAVNV.beacon_url){CAVNV.beacon_url=CAVNV.__beacon_url;CAVNV.utils.removeCookie("CavBU");CAVNV.utils.resetNVSession();send();return}else{send();CAVNV.retryTiming++}}else{CAVNV.retryTiming=0}CAVNV.log("Netvision, timing request with id = "+tid+" loadedand snapshot Instance is : "+CAVNV.snapshotInstance);CAVNV.log("typeof:"+(typeof impl.pageReadyValidator));CAVNV.subscribe("page_ready",function(){boomr.check_and_send_doc_html();boomr.send_custom_metrices()},null,null)};tinyScript.onload=timing_done_callback;tinyScript.onerror=timing_done_callback;tinyScript.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){timing_done_callback()}};tinyScript.src=_url;document.body.appendChild(tinyScript)}send();CAVNV.first_beacon_sent=true;if(CAVNV.ping){CAVNV.letsPing()}return this},get_session_flag:function(s){if(!CavSFList.hasOwnProperty(s)){return null}var si=parseInt(CavSFList[s]);var c=boomr.utils.getCookie("CavSF");if(!c){return null}var ca=c.split(",");if(si>=ca.length){return null}if(ca[si].indexOf("cavnvComplete")!=-1){ca[si]=ca[si].substr(13)}return ca[si]},set_session_flag:function(s,v){if(!CavSFList.hasOwnProperty(s)||typeof v==undefined||v==null){return null}var si=parseInt(CavSFList[s]);var c=boomr.utils.getCookie("CavSF");var ca=c?c.split(","):[];ca[0]=ca[0]||"cavnvComplete";ca[si]=v.toString();var i=0;for(var k in CavSFList){if(CavSFList.hasOwnProperty(k)){i=parseInt(CavSFList[k]);ca[i]=ca[i]||""}}boomr.utils.setCookie("CavSF",ca.toString(),CAVNV.sessionExpiryTime);if(CAVNV.config.CrossOrigin.enabled){CAVNV.updateCookie("CavSF",ca.toString())}return v},is_new_session:function(){var sid=boomr.utils.getNVCookie(CAVNV.SID);if(!sid){return true}return false},applyPageFilter:function(){var r=parseInt(Math.random()*100),F=CAVNV.pageFilter,pct=100,pi=CAVNV.pageIndex,ocxPct=100;if(!F){return false}if(!isNaN(F.pctA)){pct=F.pctA}if(!isNaN(F.ocxPctA)){ocxPct=F.ocxPctA}if(pi==-1){if(!isNaN(F.pctU)){pct=F.pctU}if(!isNaN(F.ocxPctU)){ocxPct=F.ocxPctU}}if(pi!=-1&&F.o){for(var i=0;i<F.o.length;i++){if(F.o[i].pi.indexOf(pi)!=-1&&!isNaN(F.o[i].pct)){pct=F.o[i].pct;if(!isNaN(F.o[i].ocxPct)){ocxPct=F.o[i].ocxPct}break}}}var o={rum:false,ocx:false};if(r<pct){o.rum=true;r=parseInt(Math.random()*100);if(r<ocxPct){o.ocx=true}}return o},get_filter_flag:function(){var s,sa,f_pct,r;if(boomr.is_new_session()){var prev_state=CAVNV.BROWSER_STATE;s=this.get_session_flag("SessionFilter");if(s){sa=s.split(":")}if(s&&sa.length==3&&(parseInt(sa[0])>=this.BROWSER_STATE&&parseInt(sa[0])<=this.BUYER_STATE)){prev_state=parseInt(sa[0])}f_pct=CAVNV.session_filter_pct[0];r=parseInt(Math.random()*100);if(r<f_pct){this.set_session_flag("SessionFilter",prev_state+":0:0");return{status:true,f_level:1,f_pct:CAVNV.session_filter_pct[0]}}else{this.set_session_flag("SessionFilter","1:1:0");return{status:false}}}s=this.get_session_flag("SessionFilter");if(!s){s="1:0:0";this.set_session_flag("SessionFilter",s)}sa=s.split(":");if(!s||sa.length!=3||(parseInt(sa[0])<this.BROWSER_STATE||parseInt(sa[0]>this.BUYER_STATE))){this.set_session_flag("SessionFilter","1:1:0");sa=[1,1,0]}var state=sa[0];var filterApplied=!!parseInt(sa[1]);var filtered=!!parseInt(sa[2]);if(filterApplied){if(filtered){return{status:true,f_level:2,f_pct:parseInt(sa[2])}}else{return{status:false}}}f_pct=CAVNV.session_filter_pct[state];r=parseInt(Math.random()*100);if(r<f_pct){this.set_session_flag("SessionFilter",state+":"+2+":"+f_pct);return{status:true,f_level:2,f_pct:f_pct}}this.set_session_flag("SessionFilter",state+":"+2+":"+0);return{status:false}},set_session_state:function(state){state=parseInt(state);if(isNaN(state)||state<CAVNV.BROWSER_STATE||state>CAVNV.BUYER_STATE){CAVNV.error("set_session_state: Invalid state "+state);return}var c_sf=boomr.get_session_flag("SessionFilter");var sa;if(c_sf){sa=c_sf.split(":")}if(!c_sf||sa.length!=3||(parseInt(sa[0])<CAVNV.BROWSER_STATE||parseInt(sa[0]>CAVNV.BUYER_STATE))){CAVNV.set_session_flag("SessionFilter",state+":"+0+":"+0);return}var c_state=parseInt(sa[0]);if(c_state>=state){CAVNV.error("set_session_state: Invalid state "+state+" and current state "+c_state);return}var filterApplied=parseInt(sa[1]);var filtered=!!parseInt(sa[2]);if(filterApplied==1&&filtered==false){CAVNV.set_session_flag("SessionFilter",state+":1:0")}else{if(filtered){CAVNV.set_session_flag("SessionFilter",state+":2:"+parseInt([sa[2]]))}else{CAVNV.set_session_flag("SessionFilter",state+":0:0")}}if(CAVNV.config.ocxFilter.enabled==true&&CAVNV.config.ocxFilter.dumpState){var dumpState=CAVNV.config.ocxFilter.dumpState;for(var i=0;i<dumpState.length;i++){if(dumpState[i]==state){CAVNV.set_session_flag("ocxFilter",1);CAVNV.ocxFilter=1;IDB.flush()}}}},send_cookies_to_iframe:function(){if(w.top!==w||CAVNV.iframePorts.length==0){return}var sflag="";if(CAVNV.sflag!==undefined&&CAVNV.sflag!==null){sflag=CAVNV.sflag}var s={sid:CAVNV.sid,sf:sflag,lts:CAVNV.cav_epoch_nav_start_time};var e;for(var z=0;z<CAVNV.iframePorts.length;z++){e=CAVNV.iframePorts[z];s.pi=CAVNV.pageInstance+CAVNV.pageInstanceCounter++;e.source.postMessage("cookiesResponse="+JSON.stringify(s),e.origin)}CAVNV.utils.updateNVCookie(CAVNV.PI,CAVNV.pageInstance+CAVNV.pageInstanceCounter)},sendReqViaWorker:function(url,data,module){var workerFrame=w.document.querySelector("#swIframe");workerFrame.contentWindow.postMessage({opcode:"NV_FORWARD_REQUEST",url:url,data:data,module:module},"*")},register_sworker:function(sw_url){CAVNV.config.SW.complete=false;function onTimeout(){CAVNV.config.SW.complete=true;CAVNV.sendBeacon()}w.addEventListener("message",function(message){var sid=CAVNV.utils.getNVCookie(CAVNV.SID);var pi=CAVNV.utils.getNVCookie(CAVNV.PI);var lts=CAVNV.utils.getNVCookie(CAVNV.LTS);console.log(new Date()+"SW: Message Received at window from iframe = "+JSON.stringify(message.data));if(message.data&&message.data.opcode=="WORKER_INFO"){var resp=message.data.curData.split("\n");var params=[];for(var i=0;i<resp.length;i++){if(!resp[i]||!resp[i].length){continue}params[i]=resp[i].split(" = ")[1].replace(/\"|;/g,"")}var swsid=params[0];var swpi=params[1];var swlts=params[3];if(!sid||(sid&&((sid==swsid&&pi<swpi)||(sid!=swsid&&lts<swlts)))){CAVNV.utils.updateNVCookie(CAVNV.PI,message.data.curData.pi);CAVNV.utils.updateNVCookie(CAVNV.SID,message.data.curData.sid);CAVNV.utils.updateNVCookie(CAVNV.LTS,message.data.curData.lts)}}if(message.data.opcode&&message.data.opcode==="response"&&message.data.body&&message.data.body.indexOf("__NV_SID__")!=-1){console.log(new Date()+" SWorker = "+message.data.status+" body "+message.data.body);boomr.check_and_send_doc_html(message.data.body);boomr.send_custom_metrices()}});function fallback_to_normal(){CAVNV.config.SW.enabled=false;onTimeout()}var dom=w.document.domain;var iframe=w.document.querySelector("#swIframe");if(CAVNV.config.CrossOrigin.enabled==true){dom=CAVNV.config.CrossOrigin.group}var msg={opcode:"GET_DOC_ORIGIN",origin:dom,sw_url:sw_url};if(!iframe){function load_iframe(){var iframe=w.document.createElement("Iframe");iframe.id="swIframe";iframe.src=CAVNV.config.SW.frame_url;iframe.style="height:0;width:0";iframe.onload=function(e){var that=w.document.querySelector("#swIframe");try{if(CAVNV.config.SW.complete==true){return}onTimeout();that.contentWindow.postMessage(msg,"*")}catch(err){fallback_to_normal()}};iframe.onerror=function(){fallback_to_normal()};var where;if(w.document.body){where=w.document.body.getElementsByTagName("script")[0];w.document.body.appendChild(iframe,where)}else{where=w.document.getElementsByTagName("script")[0];where.parentNode.insertBefore(iframe,where)}}var xhr=new CAVNV.utils.XHR("GET",CAVNV.config.SW.frame_url);if(xhr){xhr.onload=function(){if(this.status!=200){fallback_to_normal()}else{load_iframe()}};xhr.onerror=function(){fallback_to_normal()};xhr.send()}else{fallback_to_normal()}}else{iframe.contentWindow.postMessage(msg,"*")}},init_worker:function(){var workerHandler='var stringToUtf8ByteArray=function(i){var g=[],j=0;for(var c=0;c<i.length;c++){var h=i.charCodeAt(c);if(h<128){g[j++]=h}else{if(h<2048){g[j++]=(h>>6)|192;g[j++]=(h&63)|128}else{if(((h&64512)==55296)&&(c+1)<i.length&&((i.charCodeAt(c+1)&64512)==56320)){h=65536+((h&1023)<<10)+(i.charCodeAt(++c)&1023);g[j++]=(h>>18)|240;g[j++]=((h>>12)&63)|128;g[j++]=((h>>6)&63)|128;g[j++]=(h&63)|128}else{g[j++]=(h>>12)|224;g[j++]=((h>>6)&63)|128;g[j++]=(h&63)|128}}}}return g};function compress(l){var p=stringToUtf8ByteArray(l);var m=new Zlib.Gzip(p);var i=m.compress();var n=i.length;var k=new Uint8Array(n);for(var o=0,j=n;o<j;o++){k[o]=i[o]}return k}function sendData(i,n,e,j,l){e=e||"CAVNV";var k=new XMLHttpRequest();if("withCredentials" in k){try{k.open("POST",i,true)}catch(m){console.error("CAVNV worker: Failed to open XMLHttpRequest for uri - "+i)}{k.withCredentials=true}}else{if(typeof XDomainRequest!="undefined"){k=new XDomainRequest();k.open("POST",i)}else{console.log("CAVNV worker: CORS is not support by Browser. Failed to send data");return}}k.onload=function(){};k.onerror=function(){console.error("CAVNV worker: Failed to send data. Module - "+e);postMessage({opcode:"send",params:{url:i,data:n,module:e,options:{contentType:j,contentEncoding:l}}})};if(j){k.setRequestHeader("Content-Type",j)}if(l){k.setRequestHeader("Content-Encoding",l)}k.send(n)}function handle_dom_request(g){if(!g.data||!g.url||!g.module){return false} var h=g.options||{};var f=compress(g.data);if(!f){return false}else{if(h.ocxFilter==0){postMessage({opcode:"send",params:{url:g.url,data:f,module:g.module,options:h}})}else{try{sendData(g.url,f,g.module,h.contentType,h.contentEncoding)}catch(a){console.info("CAVNV worker: Exception occurred in sending data from worker, sending compressed data through worker");postMessage({opcode:"send",params:{url:g.url,data:f,module:g.module,options:h}})}}}return true}onmessage=function(d){var f=d.data;if(f.opcode==undefined){return}switch(f.opcode){case"echo":console.log("Worker received msg - "+f.msg);postMessage({opcode:"ack",msg:"Worker received the message"});break;case"dom-data":var e=handle_dom_request(f.params);postMessage({opcode:"compressed",result:e});break;default:console.log("Invalid")}};';workerHandler=ZlibStr+"\n"+workerHandler;var workerUrl=CAVNV.utils.getBlobUrl(workerHandler);if(!workerUrl){return}var worker=null;try{worker=new Worker(workerUrl)}catch(e){CAVNV.error("Failed to init worker, error - "+e);return}worker.onmessage=function(event){var msg=event.data;if(msg.opcode=="undefined"){return}switch(msg.opcode){case"compressed":CAVNV.log("Snapshot successfully Compressed and sent.");break;case"send":CAVNV.log("CAVNV - message received from worker with opcode - "+msg.opcode);if(CAVNV.__uaEnabled==false){return}var p=msg.params;var options=p.options||{};if(CAVNV.retryPDWithIDB&&!CAVNV.sid){pendingDom=p.options;pendingDom.data=p.data;return}if(p.url.indexOf("s=undefined")!=-1){pendingDom=p.options;pendingDom.data=p.data;return CAVNV.sendPendingDom()}if(CAVNV.ocxFilter==0){IDB.post(CAVNV.sid,CAVNV.pageInstance,{url:p.url,module:p.module,data:p.data,contentType:options.contentType,contentEncoding:options.contentEncoding})}else{CAVNV.utils.sendData(p.url,p.data,p.module,options.contentType,options.contentEncoding)}break;default:CAVNV.log("Worker - Invalid Msg")}};worker.onerror=function(e){CAVNV.error("Error at worker - "+e);CAVNV.worker.terminate();CAVNV.worker=null};CAVNV.worker=worker},send_dom_using_worker:function(src,url,module,options){if(CAVUA.utils.isIE()){return false}if(CAVNV.worker==null){boomr.init_worker()}if(!CAVNV.worker){return false}if(url.indexOf("http")!=0){url=CAVNV.window.document.location.protocol+url}CAVNV.worker.postMessage({opcode:"dom-data",params:{url:url,data:src,module:module,options:options||{}}});return true},sendPendingDom:function(){var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&op=pagedump&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+CAVNV.pageIndex+"|"+pendingDom.capture_flag+"|"+CAVNV.snapshotInstance+"&lts="+CAVNV.lts;if(CAVNV.ocxFilter==0){IDB.post(CAVNV.sid,CAVNV.pageInstance,{url:url,module:"pagedump",data:pendingDom.data,contentType:pendingDom.contentType,contentEncoding:pendingDom.contentEncoding})}else{CAVNV.utils.sendData(url,pendingDom.data,"pagedump",pendingDom.contentType,pendingDom.contentEncoding)}pendingDom=undefined},send_dom:function(runtime,snapshotInstance,src,save){if(!snapshotInstance){snapshotInstance=CAVNV.snapshotInstance}save=save||false;var update=false,diff=false;if(runtime){update=true;diff=true}var capture_flag=CAVNV.get_session_flag("Pagedump");if(isNaN(parseInt(capture_flag))){capture_flag=2}if(capture_flag==2){if(typeof Uint8Array=="undefined"){capture_flag=1}}if(!src){src=CAVNV.plugins.DOMWATCHER2.getDOM(update,diff)}if(src==null){if(CAVNV.config.enableCvrAllPages){CAVNV.subscribe("page_ready",function(){CAVNV.send_dom()},null,null)}return false}if(src.length>2621440){CAVNV.warn("Pagedump size is more than 2.5 MB. Discarding");CAVNV.plugins.DOMWATCHER2.stop();CAVNV.__uaEnabled=false;return false}var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&op=pagedump&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+CAVNV.pageIndex+"|"+capture_flag+"|"+snapshotInstance+"&lts="+CAVNV.lts;CAVNV.log("url = "+url);if(capture_flag==1){if(save&&!CAVNV.sid){pendingDom={data:src,capture_flag:capture_flag};return}if(CAVNV.ocxFilter==0){IDB.post(CAVNV.sid,CAVNV.pageInstance,{url:url,data:src,module:"pagedump"})}else{CAVNV.utils.sendData(url,src,"pagedump")}}else{if(capture_flag==2){var stringToUtf8ByteArray=function(str){var out=[],p=0;for(var i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c<128){out[p++]=c}else{if(c<2048){out[p++]=(c>>6)|192;out[p++]=(c&63)|128}else{if(((c&64512)==55296)&&(i+1)<str.length&&((str.charCodeAt(i+1)&64512)==56320)){c=65536+((c&1023)<<10)+(str.charCodeAt(++i)&1023);out[p++]=(c>>18)|240;out[p++]=((c>>12)&63)|128;out[p++]=((c>>6)&63)|128;out[p++]=(c&63)|128}else{out[p++]=(c>>12)|224;out[p++]=((c>>6)&63)|128;out[p++]=(c&63)|128}}}}return out};if(CAVNV.config.enableWorker==true&&typeof Worker!="undefined"){var options={ocxFilter:CAVNV.ocxFilter,capture_flag:capture_flag};if(CAVNV.messageVersion==1){options={contentType:"applicable/json",contentEncoding:"gzip/deflate",ocxFilter:CAVNV.ocxFilter,capture_flag:capture_flag}}if(CAVNV.retryPDWithIDB||save){options.ocxFilter=0}if(boomr.send_dom_using_worker(src,url,"pagedump",options)==true){return true}}var tt=new Date().getTime();var origLength=src.length;var uint=stringToUtf8ByteArray(src);var deflater=new Zlib.Gzip(uint);var out=deflater.compress();var bytesToSendCount=out.length;var bytesArray=new Uint8Array(bytesToSendCount);for(var i=0,l=bytesToSendCount;i<l;i++){bytesArray[i]=out[i]}CAVNV.log("CAVNV Timing: pagedump compress - "+(new Date().getTime()-tt)+", uncompressed size - "+origLength+", compressed size - "+bytesToSendCount+", ratio - "+(bytesToSendCount*100)/origLength);var options={url:url,data:bytesArray,module:"pagedump",contentType:CAVNV.messageVersion,capture_flag:capture_flag};if(CAVNV.messageVersion){options.contentType="application/json";options.contentEncoding="gzip/deflate"}if(save&&!CAVNV.sid){pendingDom=options;return}if(CAVNV.ocxFilter==0){IDB.post(CAVNV.sid,CAVNV.pageInstance,options)}else{CAVNV.utils.sendData(url,bytesArray,"pagedump",options.contentType,options.contentEncoding)}CAVNV.log("Sending data with bytesArray.buffer")}}},pageIndicatorDone:function(){clearTimeout(boomr.timer);boomr.timer=-1;boomr.utils.removeListener(CAVNV.window,"click",boomr.pageIndicatorDone);if(!CAVNV.first_beacon_sent){impl.fireEvent("page_ready2");impl.fireEvent("page_ready");impl.onloadfired=true;impl.unloadfired=false}},startlistenersForIndicator:function(){boomr.timer=setTimeout(function(){if(!impl.onloadfired){CAVNV.info("PageReadyIndicator: Reached Timeout. Sending Beacon");boomr.pageIndicatorDone()}},60000);boomr.utils.addListener(CAVNV.window,"click",boomr.pageIndicatorDone)},startPageReadyIndicators:function(){if(impl.onloadfired){return true}var conf=CAVNV.config.pageReadyIndicator;try{var pNotPresent=0;for(var j=0;j<conf.length;j++){var key=conf[j];var count=0;var matching=key.match;if(!CAVNV.utils.pagePresentInList(key.pi)){pNotPresent++;continue}var rules=key.rules;for(var k=0;k<rules.length;k++){var r=rules[k];if(r.d){if(r.v||r.v=="true"){if(isVisible(r.d)){count++}}else{if(!r.v||r.v=="false"){if(checkDomSelector(r.d)){count++}}}}if(r.i){var img,data=CAVNV.window.document.getElementsByTagName("img");for(img=0;img<data.length;img++){if(data[img].src.indexOf(r.i)!==-1){count++;break}}}if(r.m){if(CAVNV.window.performance.getEntriesByName(r.m).length>0&&CAVNV.window.performance.getEntriesByName(r.m)[0].entryType=="mark"){count++}}if(r.mm){if(CAVNV.window.performance.getEntriesByName(r.mm).length>0&&CAVNV.window.performance.getEntriesByName(r.mm)[0].entryType=="measure"){count++}}}var reqSend=false;if(matching=="ANY"&&count<=rules.length&&count>0){reqSend=true}else{if(matching=="ALL"&&count==rules.length){reqSend=true}}if(reqSend){clearTimeout(boomr.timer);boomr.timer=-1;boomr.utils.removeListener(CAVNV.window,"click",boomr.pageIndicatorDone);if(!CAVNV.first_beacon_sent){return true}}}if(pNotPresent==conf.length){clearTimeout(boomr.timer);boomr.timer=-1;boomr.utils.removeListener(CAVNV.window,"click",boomr.pageIndicatorDone);if(!CAVNV.first_beacon_sent){return true}}}catch(e){CAVNV.error("PageReadyIndicator "+e)}},check_and_send_doc_html:function(obj){if(obj&&CAVNV.sid){return}if(typeof __NV_SID__!=="undefined"&&parseInt(__NV_SID__,10)==0){boomr.check_and_set_dummy_sid();CAVNV.pendingSnapshot={};return}if(!obj&&(typeof __NV_SID__==="undefined"||typeof __NV_COUNTER__=="undefined"||typeof __NV_CPF__=="undefined"||typeof __NV_NAV_START_TIME__=="undefined")){CAVNV.log("tinyScript not loaded completed.");CAVNV.pendingSnapshot={};return}var sid,counter,capture_flag,nav_start,location_id,access_type_id;var geo_id,sess_start_time,cv,cfv,browser_id;var __authKey,__authsKey;if(obj){var resp=obj.split("\n");var params=[];for(var i=0;i<resp.length;i++){if(!resp[i]||!resp[i].length){continue}params[i]=resp[i].split(" = ")[1].replace(/\"|;/g,"")}sid=params[0];counter=params[1];capture_flag=params[2];nav_start=params[3];browser_id=params[4];geo_id=params[5];location_id=params[6];access_type_id=params[7];__authKey=params[8];__authsKey=params[9];sess_start_time=params[10];cv=params[11];cfv=params[12]}else{sid=__NV_SID__;window.__NV_SID__=undefined;counter=__NV_COUNTER__;capture_flag=__NV_CPF__;nav_start=__NV_NAV_START_TIME__;location_id=(typeof __NV_LOCATION_ID__!="undefined")?__NV_LOCATION_ID__:-1;access_type_id=(typeof __NV_ACCESS_TYPE_ID__!="undefined")?__NV_ACCESS_TYPE_ID__:-1;geo_id=(typeof __NV_GEO_ID__!="undefined")?__NV_GEO_ID__:-1;sess_start_time=(typeof __NV_SESS_START_TIME__!="undefined")?__NV_SESS_START_TIME__:-1;cv=(typeof __NV_CV__!="undefined")?__NV_CV__:null;cfv=(typeof __NV_CVF__!="undefined")?__NV_CVF__:null;browser_id=(typeof __NV_BROWSER_ID__!="undefined")?__NV_BROWSER_ID__:null}if(w.localStorage&&(cv||cfv)){w.localStorage.setItem("_nvLibVer",JSON.stringify({cv:cv,cfv:cfv}))}CAVNV.sid=sid;CAVNV.pageInstance=counter;CAVNV.cav_epoch_nav_start_time=nav_start;CAVNV.lts=nav_start;CAVNV.location_id=location_id;CAVNV.access_type_id=access_type_id;CAVNV.geo_id=geo_id;CAVNV.browser_id=browser_id;CAVNV.session_start_time=sess_start_time;var cf=boomr.get_session_flag("Pagedump");if(CAVNV.pageInstance==1||isNaN(parseInt(cf))){cf=null}if(cf==null){if(capture_flag>=0){boomr.set_session_flag("Pagedump",capture_flag)}else{CAVNV.error("CAVNV: failed to get Pagedump session flag. Pagedump will not be sent");capture_flag=2}}else{capture_flag=parseInt(cf)}CAVNV.set_session_flag("LastAccessTime",new Date().getTime());if(!!CAVNV.window.NBridge){CAVNV.window.NBridge.getAppParam(JSON.stringify({sid:sid.toString(),PI:CAVNV.pageInstance.toString(),lts:CAVNV.lts.toString(),snapshotInstance:CAVNV.snapshotInstance.toString()}))}if(!!CAVNV.window.webkit&&!!CAVNV.window.webkit.messageHandlers.appNativeSync){CAVNV.window.webkit.messageHandlers.appNativeSync.postMessage(JSON.stringify({sid:sid.toString(),pi:CAVNV.pageInstance.toString(),lts:CAVNV.lts.toString(),snapshotInstance:CAVNV.snapshotInstance.toString()}))}var prevSid=CAVNV.utils.getNVCookie(CAVNV.SID);if(prevSid!=sid){if(w.sessionStorage){w.sessionStorage.removeItem("nvct")}if(w.localStorage){w.localStorage.removeItem("nvabv")}CAVNV.set_session_flag("ocxFilter","");CAVNV.set_session_flag("maxPagePct","");CAVNV.set_session_flag("pctConsole","")}CAVNV.plugins.ABTesting.start();CAVNV.utils.updateNVCookie(CAVNV.SID,sid);if(CAVNV.visitorInfo){var visitorId=CAVNV.utils.getCookie("CavVI");if(!visitorId){visitorId=sid;CAVNV.visitorId=visitorId}CAVNV.utils.setCookie("CavVI",visitorId,CAVNV.visitorExpiryTime)}CAVNV.sflag=boomr.utils.getCookie("CavSF");if(!CAVNV.sflag||CAVNV.sflag==undefined){CAVNV.log("Failed to get sflag cookie")}var burl;if(typeof __NV_BEACON_URL!="undefined"){burl=__NV_BEACON_URL;CAVNV.beacon_url=__NV_BEACON_URL;if(typeof __NV_SSL_BEACON_URL!="undefined"){burl=burl+"|"+__NV_SSL_BEACON_URL;if(CAVNV.window.document.location.protocol=="https:"){CAVNV.beacon_url=__NV_SSL_BEACON_URL}}CAVNV.utils.setCookie("CavBU",burl,null)}if(typeof __storeFilterApplied!="undefined"){CAVNV.set_session_flag("storeFilterApplied",__storeFilterApplied)}if(boomr.utils.updateNVCookie(CAVNV.LTS,nav_start)){CAVNV.log("Updated CavLTS Cookie = "+boomr.utils.getNVCookie(CAVNV.LTS))}else{CAVNV.log("Failed to set cavLTS cookie")}if(boomr.utils.updateNVCookie(CAVNV.PI,counter)){CAVNV.log("Updated CavPI cookie = "+boomr.utils.getNVCookie(CAVNV.PI))}else{CAVNV.log("Failed to set CavPI cookie")}boomr.send_cookies_to_iframe();impl.fireEvent("after_beacon",impl.vars);SessionStorage.remove();CAVNV.sbqueue.unload=false;CAVNV.subscribe("page_unload",function(){CAVUA.flushAll(true);CAVNV.sbqueue.flush();CAVNV.sbqueue.unload=true});var idbFlushCalled=false;if(CAVNV.config.ocxFilter.enabled==true||CAVNV.retryPDWithIDB){if(IDB.init()==false){CAVNV.config.ocxFilter.enabled=false;CAVNV.retryPDWithIDB=false}}if(CAVNV.config.ocxFilter.enabled==true){var ocxFilter=CAVNV.get_session_flag("ocxFilter");if(ocxFilter==null||ocxFilter==""){var pct=CAVNV.config.ocxFilter.pct||100;var r=parseInt(Math.random()*100);if(r<=pct){CAVNV.set_session_flag("ocxFilter",0);CAVNV.ocxFilter=0}else{CAVNV.set_session_flag("ocxFilter",1);CAVNV.ocxFilter=1;idbFlushCalled=true;IDB.flush()}}else{CAVNV.ocxFilter=parseInt(ocxFilter)}if(CAVNV.ocxFilter==0&&CAVNV.pageInstance>CAVNV.config.ocxFilter.maxPage){var maxPagePctFilter=CAVNV.get_session_flag("maxPagePct");if(!maxPagePctFilter){var pct=CAVNV.config.ocxFilter.maxPagePct||100;var r=parseInt(Math.random()*100);if(r<=pct){CAVNV.set_session_flag("ocxFilter",1);CAVNV.ocxFilter=1;idbFlushCalled=true;IDB.flush()}else{CAVNV.set_session_flag("maxPagePct",1)}}}}else{CAVNV.set_session_flag("ocxFilter",1);CAVNV.ocxFilter=1;if(CAVNV.retryPDWithIDB){IDB.flush(true)}}CAVNV.flush_all();if(capture_flag==0){CAVNV.plugins.DOMWATCHER2.stop();CAVNV.__uaEnabled=false}else{if(CAVNV.retryPDWithIDB&&CAVNV.snapshotInstance==0){if(pendingDom){CAVNV.sendPendingDom()}return}var domvalue=boomr.send_dom();if(domvalue==true){for(var s in CAVNV.pendingSnapshot){boomr.send_dom(false,s,CAVNV.pendingSnapshot[s])}}}CAVNV.pendingSnapshot={};if(typeof(ExtDetector)!="undefined"){ExtDetector.start()}if(CAVNV.config.ocxFilter.enabled==true&&CAVNV.ocxFilter==1&&idbFlushCalled==false){IDB.flush()}},set_ocx_filter:function(){if(CAVNV.ocxFilter=0){CAVNV.set_session_flag("ocxFilter",1);CAVNV.ocxFilter=1;IDB.flush()}},send_custom_metrices:function(){var cmEntry=CAVNV.customData;if(!CAVNV.customMetrics||CAVNV.customMetrics.length==0){return}var cm,text,e,d=CAVNV.window.document,pagelist,v,pattern,f,vlist,value,m,z;var pageid=","+CAVNV.pageIndex+",";for(z=0;z<cmEntry.length;z++){cm=cmEntry[z];pagelist=","+cm.pageid+",";if((pagelist.indexOf(",-1,")==-1)&&(pagelist.indexOf(pageid)==-1)){continue}if(cm.mode==2){e=d.querySelector(cm.id);if(!e){continue}text=e.textContent}else{if(cm.mode==1){e=CAVNV.utils.getCookie(cm.id);if(!e){continue}text=e.toString()}}try{pattern=new RegExp(cm.pattern,"ig");v=text.match(pattern);if(!v||v.length==0){continue}for(vlist="",m=1;m<=v.length;m++){if(m!=1){vlist+=","}vlist+="$"+m}f=Function(vlist,"return "+cm.exp);value=f.apply(CAVNV.window,v);boomr.cav_nv_log_customMetrics(cm.cmname,value)}catch(e){}}},set_nd_instrFlag:function(){var value=boomr.utils.getCookie("CavNV");if(value){var fields=value.split("-");if(fields.length<5){CAVNV.warn("Invalid ND Cookie. CavNV: "+value);return 0}fields[3]=1;value=fields.join("-");var t=CAVNV.utils.setCookie("CavNV",value);if(t==true){CAVNV.log("CavNV: ND Instrumentation enabled, modified CAVNV cookie - "+value);CAVNV.ndInfo.instrFlag=true;return 1}else{CAVNV.warn("CavNV: Failed to update ND Cookie")}}else{CAVNV.warn("CavNV: ND Cookie not present, failed to enable ND Instrumentation")}return 0},cav_nv_enable_nd:function(force){var ndConfig=CAVNV.config.autoNDInstr;if(CAVNV.ndInfo.instrFlag||!ndConfig||!ndConfig.enable){return}if(!force&&ndConfig.filter>=0){var r=parseInt(Math.random()*100);if(r>ndConfig.filter){CAVNV.log("ND instrumentation disabled for current page");return}}boomr.set_nd_instrFlag()},get_nd_data:function(){var ndData={FPID:-1,NSTR:-1,SC:0,ERRCNT:0};var value=boomr.utils.getCookie("CavNV");if(value){var fields=value.split("-");var ndsession,tr,instr,category,errcnt;if(fields.length<5){CAVNV.warn("Invalid ND Cookie. CavNV: "+value);return ndData}ndsession=fields[0];tr=fields[1];instr=fields[3];category=fields[4];var ndInfo=CAVNV.ndInfo;ndInfo.tierId=fields[7]||ndInfo.tierId;ndInfo.serverId=fields[8]||ndInfo.serverId;ndInfo.instanceId=fields[9]||ndInfo.instanceId;if(!isNaN(instr)){ndInfo.instrFlag=(instr==1)}if(!isNaN(tr)){ndData.NSTR=tr}if(CAVNV.logNDSessionAlways||(!!(parseInt(instr))==true)||(category!=9&&category!=10)){if(!isNaN(ndsession)&&!isNaN(tr)){ndData.FPID=ndsession;if(!isNaN(fields[5])){ndData.ERRCNT=fields[5]}CAVNV.utils.logNDEvent(category)}}}return ndData},get_document_cookies:function(){var s=d.cookie,l,max=CAVNV.maxCookieSize||1024;var ca=s.split("; ");var co=[];if(CAVNV.blacklistCookies.length>0){var s="";var bc=CAVNV.blacklistCookies;for(var z=0,y=0;z<ca.length;z++){for(y=0;y<bc.length;y++){if(ca[z].trim().indexOf(bc[y]+"=")==0){break}}if(y==bc.length){co.push(ca[z])}}}else{co=ca}var wc=CAVNV.whitelistCookies;var wo=[];if(wc.length){for(z=0;z<wc.length;z++){for(y=0;y<co.length;y++){if(co[y]!=undefined){if(co[y].trim().indexOf(wc[z]+"=")==0){wo.push(co[y]);co[y]=undefined;break}}}}for(z=0;z<co.length;z++){if(co[z]){wo.push(co[z])}}}else{wo=co}s=wo.join("; ");s=s.replace(/%7C/g,"|").replace(/\|/g,"%PIPE%");if(s.length>max){s=s.substr(0,max);l=s.lastIndexOf(";");if(l!=-1){s=s.substr(0,l+1)}}CAVNV.log("Cookies - "+s);return s},cav_nv_ajax_pg_start:function(url,pg_name,options){if(CAVNV.ajax_pg_start_time!=-1){CAVNV.log("cav_nv_ajax_pg_start: Previous Ajax Page not completed started at "+new Date(CAVNV.ajax_pg_start_time)+"moving to next page.");CAVNV.ajax_pg_arg={}}CAVNV.ajax_pg_start_time=new Date().getTime();CAVNV.ajax_pg_arg.url=url;CAVNV.ajax_pg_arg.pg_name=pg_name;CAVNV.updateNDPI();impl.fireEvent("page_unload2");impl.fireEvent("page_unload");boomr.utils.triggerEvent(CAVNV.window,"nvunload");boomr.flush_all();boomr.stop_all();boomr.ajax_page_init_done=false;CAVNV.snav=null;CAVNV.pageIndex=CAVNV.plugins.CONFIG.get_pageIndex(CAVNV.ajax_pg_arg.url,CAVNV.ajax_pg_arg.pg_name);if(CAVNV.resourceTiming){ResourceFailedDetector.init()}CAVNV.log("cav_nv_ajax_pg_start: New ajax page url: "+url+" page "+pg_name+" started at "+new Date(CAVNV.ajax_pg_start_time))},cav_nv_ajax_pg_init:function(){if(boomr.ajax_page_init_done){return}CAVNV.log("cav_nv_ajax_pg_init() called");boomr.ajax_pg_init_time=new Date().getTime();boomr.restart_all();boomr.reset_custom_cb();impl.fireEvent("page_ready2");boomr.utils.triggerEvent(CAVNV.window,"nvload");boomr.ajax_page_init_done=true},cav_nv_ajax_pg_end:function(url,pg_name,options){var cur_time=new Date().getTime();options=options||{};CAVNV.__uaEnabled=true;if((CAVNV.ajax_pg_start_time==-1)&&!url){CAVNV.log("cav_nv_ajax_pg_end: Ajax page not started(error: cav_nv_ajax_pg_start api missing.)");return}if(!CAVNV.first_beacon_sent){CAVNV.log("cav_nv_ajax_pg_end: First Page not loaded completely, discarding Ajax page.");CAVNV.ajax_pg_start_time=-1;CAVNV.ajax_pg_arg={};boomr.ajax_page_init_done=false;return}var ajax_pg_start_time=CAVNV.ajax_pg_start_time;if(CAVNV.ajax_pg_start_time==-1){boomr.cav_nv_ajax_pg_start(url,pg_name,options)}boomr.cav_nv_ajax_pg_init();CAVNV.log("cav_nv_ajax_pg_end: Ajax page completed. page load time = "+(cur_time-CAVNV.ajax_pg_start_time)+"(ms)");var spa_data=options.__nv;var oldNavStart=CAVNV.nav_start_time;CAVNV.nav_start_time=((CAVNV.ajax_pg_start_time>0)?CAVNV.ajax_pg_start_time:cur_time);CAVNV.nav_offset+=(CAVNV.nav_start_time-oldNavStart);impl.vars.nt_red_count=0;impl.vars.nt_red_time=-1;impl.vars.nt_app_cache_time=-1;impl.vars.nt_fetch_time=-1;impl.vars.nt_dns_time=-1;impl.vars.nt_con_time=-1;impl.vars.nt_secure_con_time=-1;impl.vars.nt_first_byte_time=-1;impl.vars.nt_server_response_time=-1;impl.vars.nt_res_time=-1;impl.vars.nt_unload_time=-1;impl.vars.nt_dom_time=-1;impl.vars.nt_dom_content_load_time=-1;impl.vars.nt_load_time=-1;impl.vars.nt_fp=-1;impl.vars.nt_fcp=-1;impl.vars.oT=parseInt(CAVNV.get_session_flag("orderTotal"))||0;impl.vars.oC=parseInt(CAVNV.get_session_flag("orderCount"))||0;impl.vars.perceived_render_time=-1;impl.vars.nt_dom_interactive=-1;if(spa_data&&spa_data.resource.timing.requestStart&&spa_data.resource.timing.loadEventEnd){impl.vars.nt_time_to_load=(spa_data.resource.timing.loadEventEnd-spa_data.resource.timing.requestStart)}else{impl.vars.nt_time_to_load=((ajax_pg_start_time>0)?(cur_time-ajax_pg_start_time):-1)}CAVNV.loadTimeDone=true;if(spa_data&&spa_data.resource.timing.domComplete&&spa_data.resource.timing.requestStart){impl.vars.nt_time_to_DOC=(spa_data.resource.timing.domComplete-spa_data.resource.timing.requestStart)}else{impl.vars.nt_time_to_DOC=-1}if(impl.vars.nt_time_to_DOC>impl.vars.nt_time_to_load){impl.vars.nt_time_to_DOC=impl.vars.nt_time_to_load}if(impl.vars.nt_time_to_DOC==-1){impl.vars.nt_time_to_DOC=impl.vars.nt_time_to_load}impl.vars.br_refer="";impl.vars.url=/^https?:\/\//.test(CAVNV.ajax_pg_arg.url)?CAVNV.ajax_pg_arg.url:(w.document.location.origin+CAVNV.ajax_pg_arg.url);impl.vars.url=impl.vars.url.substr(0,512);if(boomr.utils.getCookie("CavNV")!=null){var ndData=boomr.get_nd_data();impl.vars.fpidGroup="{"+ndData.FPID+"}";impl.vars.SC=ndData.SC;impl.vars.NSTR=ndData.NSTR}impl.vars.cookie=boomr.get_document_cookies();impl.vars.br_refer=d.referrer.substr(0,256);impl.vars.pageIndex=CAVNV.pageIndex;CAVNV.log("cav_nv_ajax_pg_end: Ajax page url "+CAVNV.ajax_pg_arg.url+" page "+CAVNV.ajax_pg_arg.pg_name+" and pageIndex = "+impl.vars.pageIndex);impl.vars.navType=254;CAVNV.sendBeacon();CAVNV.snav={start:CAVNV.ajax_pg_start_time,init:CAVNV.ajax_pg_init_time,end:(impl.vars.nt_time_to_load>0?(CAVNV.ajax_pg_start_time+impl.vars.nt_time_to_load):-1)};CAVNV.ajax_pg_start_time=-1;CAVNV.ajax_pg_arg={};boomr.ajax_page_init_done=false;CAVNV.dataFlushTimer=setInterval(CAVNV.flush_all,CAVNV.dataFlushInterval);if(CAVNV.resourceTiming){boomr.logResourceTiming(true);ResourceFailedDetector.stop()}CAVNV.log("cav_nv_ajax_pg_end:  Done.")},reset_custom_cb:function(){CAVNV.log("Resetting custom callback.");for(var k=0;k<impl.custom_cb.length;k++){var c=impl.custom_cb[k];if(c.page.indexOf("-1")!=-1){CAVNV.log("Netvision: setting custom callback for event - "+c.state);CAVNV.subscribe(c.state,c.callback,c.cb_data,CAVNV.window)}else{var page_filter=c.page.split(",");var l;for(l=0;l<page_filter.length;l++){if(parseInt(page_filter[l])==CAVNV.pageIndex){break}}if(l!=page_filter.length){CAVNV.log("Netvision: setting custom callback for event - "+c.state);CAVNV.subscribe(c.state,c.callback,c.cb_data,CAVNV.window)}}}},cav_nv_add_custom_cb:function(cb,state,pg,cb_data){if(typeof pg!="string"){cb_data=pg||cb_data}if(typeof pg!="undefined"){impl.custom_cb.push({page:pg,callback:cb,state:state,cb_data:cb_data});if(pg.indexOf("-1")==-1){if(CAVNV.pageIndex==undefined||CAVNV.pageIndex==null){return}var page_filter=pg.split(",");var j;for(j=0;j<page_filter.length;j++){if(parseInt(page_filter[j])==CAVNV.pageIndex){break}}if(j==page_filter.length){return}}}CAVNV.log("Netvision: setting custom callback for event - "+state);CAVNV.subscribe(state,cb,cb_data,CAVNV.window)},cav_nv_pg_ready_cb:function(cb,pg,cb_data){boomr.cav_nv_add_custom_cb(cb,"page_ready2",pg,cb_data)},cav_nv_pg_unload_cb:function(cb,pg,cb_data){boomr.cav_nv_add_custom_cb(cb,"page_unload2",pg,cb_data)},cav_nv_before_beacon_cb:function(cb,pg,cb_data){boomr.cav_nv_add_custom_cb(cb,"before_beacon",pg,cb_data)},cav_nv_after_beacon_cb:function(cb,pg,cb_data){boomr.cav_nv_add_custom_cb(cb,"after_beacon",pg,cb_data)},cav_nv_add_cb:function(name,cb,cb_data,scope){if(typeof cb!=="function"||typeof name!=="string"){CAVNV.error("CAVNV: cav_nv_add_cb(), Invalid args.");return}CAVNV.cb=CAVNV.cb||{};if(CAVNV.cb.hasOwnProperty(name)){CAVNV.error("CAVNV: callback "+name+" already exit.");return}CAVNV.cb[name]=[cb,cb_data||{},scope||CAVNV.window];CAVNV.log("CAVNV: callback "+name+" added successfully")},flush_all:function(){for(var k in CAVNV.plugins){if(CAVNV.plugins.hasOwnProperty(k)){if(impl.disabled_plugins[k]){continue}if(typeof CAVNV.plugins[k].flush==="function"){CAVNV.plugins[k].flush(true)}}}},restart_all:function(){CAVNV.sid=undefined;CAVNV.pageInstance=undefined;CAVNV.cav_epoch_nav_start_time=-1;CAVNV.pageInstanceCounter=0;CAVNV.iframePorts=[];CAVNV.parentComDone=false;CAVNV.lts=undefined;CAVNV._wpdEventRaised=undefined;CAVNV.snapshotInstance=0;CAVNV.pendingSnapshot={};for(var k in CAVNV.plugins){if(CAVNV.plugins.hasOwnProperty(k)){if(impl.disabled_plugins[k]){continue}if(typeof CAVNV.plugins[k].restart==="function"){CAVNV.plugins[k].restart()}}}},stop_all:function(){for(var k in CAVNV.plugins){if(CAVNV.plugins.hasOwnProperty(k)){if(impl.disabled_plugins[k]){continue}if(typeof CAVNV.plugins[k].stop==="function"){CAVNV.plugins[k].stop()}}}},get_session_id:function(){var sid=CAVNV.sid||CAVNV.utils.getNVCookie(CAVNV.SID);if(sid==undefined||sid==null){return null}return"CAVNV-"+sid},cav_nv_get_session_data:function(key){var sid=boomr.get_session_id();if(sid==null){CAVNV.info("cav_nv_get_session_data: session_id not set.");return{}}var val=w.sessionStorage.getItem(sid);if(val!=null){try{var e=JSON.parse(val);if(key){return e[key]}return e}catch(e1){return{}}}return{}},cav_nv_set_session_data:function(key,data){if(data==undefined){data=key;key=undefined}if(typeof data!="object"){CAVNV.info("cav_nv_set_session_data: Invalid data type");return}var sid=boomr.get_session_id();if(sid==null){CAVNV.info("cav_nv_set_session_data: session_id not set.");return}if(key){var alldata=w.sessionStorage.getItem(sid);if(alldata){try{alldata=JSON.parse(alldata);alldata[key]=data}catch(e){alldata=undefined}}if(!alldata){alldata={};alldata[key]=data}data=alldata}w.sessionStorage.removeItem(sid);var value=JSON.stringify(data);w.sessionStorage.setItem(sid,value)},cav_nv_log_tm:function(s,t){if(typeof s!=="string"){return}CAVNV.int_tm=CAVNV.int_tm||[];t=t||new Date().getTime();CAVNV.log("CAVNV: timing - "+s+"="+t.toString());CAVNV.int_tm.push(s+"="+t.toString())},clearResourceTimings:function(){function clear(w){if(w.performance){if(w.performance.clearResourceTimings){w.performance.clearResourceTimings(w)}else{if(w.performance.webkitClearResourceTimings){w.performance.webkitClearResourceTimings(w)}}return true}return false}function search(w){var f=clear(w);if(!f){return}try{f=w.document.getElementsByTagName("iframe");for(var z=0;z<f.length;z++){search(f[z].contentWindow)}}catch(e){}}search(w)},getPerceivedRenderTime:function(resources,contentLoadTime,loadTime,offset){function isImage(URL){var path=URL.hostname+URL.pathname;var exts=["jpeg","jpg","png","svg","tif","bmp","gif","ico","psd"];var isImageFlag=false;if(CAVNV.imgUrlPattern){CAVNV.imgUrlPattern.forEach(function(pattern){try{if(pattern.test(path)){isImageFlag=true}}catch(e){}})}if(!isImageFlag){var i=path.lastIndexOf(".");if(i!=-1){var ext=path.substr(i+1);for(var z=0;z<exts.length;z++){if(ext==exts[z]){isImageFlag=true}}}}return isImageFlag}var viewportHeight=(w.innerHeight||w.document.documentElement.clientHeight);var viewportWidth=(w.innerWidth||w.document.documentElement.clientWidth);var viewportX=w.pageXOffset||(null===w.document.body?0:w.document.body.scrollLeft);var viewportY=w.pageYOffset||(null===w.document.body?0:w.document.body.scrollTop);function isElementInViewport(el){var rect=el.getBoundingClientRect();return((rect.top+viewportY)<viewportHeight&&(rect.left+viewportX)<viewportWidth)}function getImg(a){var d=w.document,h=d.location.hostname,path;var img=null;var sameOrigin=(a.hostname==h);if(sameOrigin){path=a.pathname+a.search;img=d.querySelector('[src="'+path+'"]')}if(!img){path=a.href;img=d.querySelector('[src="'+path+'"]');if(!img){path=a.href.replace(/^https?:/,"");img=d.querySelector('[src="'+path+'"]')}}return img}var maxEndTime=0;offset=offset||0;var totalImageInRT=0,totalImageInDoc=0,totalImageInViewPort=0;for(var z=0;z<resources.length;z++){var res=resources[z];if(res.startTime-offset>loadTime){break}var img;var URL=document.createElement("a");URL.href=res.name;if(isImage(URL)){totalImageInRT++;img=getImg(URL);if(img){totalImageInDoc++;if(isElementInViewport(img)){totalImageInViewPort++;maxEndTime=res.responseEnd}}}}var renderTime=0;if(maxEndTime>offset){renderTime=maxEndTime-offset}if(renderTime<contentLoadTime){renderTime=contentLoadTime}CAVNV.info("Perceived Render Time info: render time - "+renderTime+", total images in RT - "+totalImageInRT+", total images in document - "+totalImageInDoc+", total images in view port - "+totalImageInViewPort);return parseInt(renderTime)},logResourceTiming:function(softNav,isMainUrl,logTimingOnly){var resources=[];isMainUrl=isMainUrl||false;logTimingOnly=logTimingOnly||false;var tSize=0;var p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance;var pt;if(p){pt=p.timing}if(!pt){return}var navoffset=(CAVNV.nav_start_time-pt.navigationStart);if(navoffset<0){navoffset=0}impl.vars.perceived_render_time=-1;var resources=CAVNV.utils.getRT(w);if(!softNav){impl.vars.perceived_render_time=boomr.getPerceivedRenderTime(resources,impl.vars.nt_time_to_DOC,impl.vars.nt_time_to_load,navoffset);if(impl.vars.perceived_render_time>3600000){impl.vars.perceived_render_time=-1}CAVNV.log("perceived render time - "+impl.vars.perceived_render_time)}function isFilteredDom(d,n){for(var i=0;i<d.length;i++){if(n.indexOf(d[i])!=-1){CAVNV.log(n+" is filtered");return true}}return false}var bkbps=bandwidth(resources);function bandwidth(resources){var bw=0,rTotalBytes=0,rTotalDuration=0,r;for(var z=0;z<resources.length;z++){r=resources[z];if(r.transferSize&&r.responseStart){rTotalBytes+=r.transferSize;rTotalDuration+=(r.responseEnd-r.responseStart)}}var xhrget=CAVNV.cav_nv_get_session_data("xhrbw");if((xhrget!==undefined)&&(xhrget.nv_tBytesxhr&&xhrget.nv_tDurationxhr)){rTotalBytes=((rTotalBytes)+(xhrget.nv_tBytesxhr));rTotalDuration=((rTotalDuration)+(xhrget.nv_tDurationxhr));var xhrObj={nv_tBytesxhr:0,nv_tDurationxhr:0};CAVNV.cav_nv_set_session_data("xhrbw",xhrObj)}var bkbps=0;if(rTotalBytes>=2*1024){bkbps=(((rTotalBytes*8)/1000)/(rTotalDuration/1000))}return parseInt(bkbps)}impl.vars.bandwidth=bkbps;if(CAVNV.config.enableCvrAllPages){if(logTimingOnly){return}if(!CAVNV.first_beacon_sent){impl.vars.bandwidth=-1;impl.vars.perceived_render_time=-1}}CAVNV.log("Bandwidth: "+bkbps+" kbps");function getResourceTimingData(filter){var allResources=[];tSize=0;function logMainURLRT(w){var rt="others;"+0+";"+(pt.responseEnd-pt.navigationStart)+";"+(pt.redirectStart?(pt.redirectStart-pt.navigationStart):0)+";"+(pt.redirectEnd?(pt.redirectEnd-pt.navigationStart):0)+";"+(pt.domainLookupStart?(pt.domainLookupStart-pt.navigationStart):0)+";"+(pt.domainLookupEnd?(pt.domainLookupEnd-pt.navigationStart):0)+";"+(pt.fetchStart?(pt.fetchStart-pt.navigationStart):0)+";"+(pt.connectStart?(pt.connectStart-pt.navigationStart):0)+";"+(pt.secureConnectionStart?(pt.secureConnectionStart-pt.navigationStart):0)+";"+(pt.connectEnd?(pt.connectEnd-pt.navigationStart):0)+";"+(pt.requestStart?(pt.requestStart-pt.navigationStart):0)+";"+(pt.responseStart?(pt.responseStart-pt.navigationStart):0)+";"+(pt.responseEnd?(pt.responseEnd-pt.navigationStart):0)+";"+encodeURIComponent(w.document.location.href);if(w.performance.getEntriesByType!==undefined){var res=(w.performance.getEntriesByType("navigation"));if(typeof res[0]!="undefined"&&typeof res[0].transferSize!="undefined"){tSize+=res[0].transferSize;rt=rt+";"+res[0].transferSize+";"+res[0].encodedBodySize+";"+res[0].decodedBodySize}if(typeof res[0]!="undefined"&&typeof res[0].nextHopProtocol!="undefined"){rt=rt+";"+res[0].nextHopProtocol}}allResources.push(rt)}function logFrameRT(w){CAVNV.log("Collecting resource timing for Frame - "+w.location.href);logRT(w);if(!CAVNV.monitorIframe){return}var f=w.document.getElementsByTagName("iframe");for(var z=0;z<f.length;z++){try{logFrameRT(f[z].contentWindow)}catch(e){continue}}}function logRT(w){var resource=CAVNV.utils.getRT(w);var framept=CAVNV.utils.getPT(w);var cur_offset=CAVNV.nav_start_time-framept.navigationStart-(softNav?impl.softNavGap:0);if(!framept){return}function t(time){if(time===0){return time}return(time+framept.navigationStart-(pt.navigationStart+navoffset))}var data="";var filterDomains=(CAVNV.config.resourceTimingFilter?CAVNV.config.resourceTimingFilter.domain:[])||[];if(!boomr.utils.isArray(filterDomains)){filterDomains=[]}for(var z=0;z<resource.length;z++){if(resource[z].startTime<cur_offset){continue}if(isFilteredDom(filterDomains,resource[z].name)){continue}if(resource[z].transferSize){tSize=tSize+resource[z].transferSize}if(filter==true){continue}if(data!=""){data+=","}data=resource[z].initiatorType+";"+t(resource[z].startTime)+";"+parseFloat(resource[z].duration).toFixed(3)+";"+t(resource[z].redirectStart)+";"+t(resource[z].redirectEnd)+";"+t(resource[z].domainLookupStart)+";"+t(resource[z].domainLookupEnd)+";"+t(resource[z].fetchStart)+";"+t(resource[z].connectStart)+";"+t(resource[z].secureConnectionStart)+";"+t(resource[z].connectEnd)+";"+t(resource[z].requestStart)+";"+t(resource[z].responseStart)+";"+t(resource[z].responseEnd)+";"+encodeURIComponent(resource[z].name);if(typeof resource[z].transferSize!="undefined"){data=data+";"+resource[z].transferSize+";"+resource[z].encodedBodySize+";"+resource[z].decodedBodySize}if(typeof resource[z].nextHopProtocol!="undefined"){data=data+";"+resource[z].nextHopProtocol}allResources.push(data)}}if(!softNav&&!isMainUrl){logMainURLRT(w)}logFrameRT(w);return allResources.join(",")}function getFailedResourceTiming(){var data=ResourceFailedDetector.getEntry();var sdata="";var starttime,duration;for(var z=0;z<data.length;z++){if(w.performance.getEntriesByName&&w.performance.getEntriesByName(data[z].url).length!=0){continue}else{if(w.performance.webkitGetEntriesByName&&w.performance.webkitGetEntriesByName(data[z].url).length!=0){continue}}starttime=parseInt(data[z].starttime)-pt.navigationStart;duration=parseInt(data[z].endtime)-parseInt(data[z].starttime);sdata=sdata+",failed;"+starttime+";"+0+";"+0+";"+0+";"+0+";"+0+";"+0+";"+0+";"+0+";"+0+";"+0+";"+0+";"+0+";"+encodeURIComponent(data[z].url)}return sdata}var filter=false;if(CAVNV.resourceTimingFilter.mode==true){filter=true;var pageLoadTime=impl.vars.nt_time_to_load,domCompleteTime=impl.vars.nt_time_to_DOC;var max_value=60000;if(!isNaN(CAVNV.resourceTimingFilter.maxPageLoadTime)){max_value=CAVNV.resourceTimingFilter.maxPageLoadTime}if(pageLoadTime>max_value||domCompleteTime>max_value){filter=false}else{var r=parseInt(Math.random()*100);if(r<=CAVNV.resourceTimingFilter.pct){filter=false}}}var data=getResourceTimingData(filter);if(filter==false&&data!=""){var data=getResourceTimingData(filter);data=data+getFailedResourceTiming();CAVNV.log("ResourceTiming Found, msg length - "+data.length);var eventMsg=(new Date().getTime())+"|-1|-6||-2||||-1|-1|-1|-1|"+data+"||-1|-1|||";if(!CAVNV.sid){function cb(){CAVUA.logEvent(eventMsg,true,"rt")}CAVNV.subscribe("after_beacon",cb,null,null)}else{CAVUA.logEvent(eventMsg,true,"rt")}}impl.vars.transferBytes=tSize;boomr.clearResourceTimings()},now:function(){if(window.performance.now&&window.performance){return window.performance.now()+window.performance.timing.navigationStart}return new Date().getTime()},BROWSER_STATE:1,SESSION_STATE:2,BUYER_STATE:3};delete CAVNV_start;boomr.send_alert=function(){var pendingAlertRequest=[];function cb(){for(var z=0;z<pendingAlertRequest.length;z++){alertFn(pendingAlertRequest[z])}}boomr.subscribe("after_beacon",cb,null,null);function alertEx(message,value,threshold,policy,sevarity){if(!message){return -1}var req=[];req[0]=message;req[1]=value||-1;req[2]=threshold||-1;req[3]=policy||"NA";req[4]=sevarity||1;if(!CAVNV.sid){pendingAlertRequest.push(req);return 0}alertFn(req)}function alertFn(req){var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=alert&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+((req[0]+". Netvision Session Id - "+CAVNV.sid)+"|"+req[1]+"|"+req[2]+"|"+req[3]+"|"+req[4])+"&lts="+CAVNV.lts;var i=new Image();i.onload=function(){CAVNV.log("Alert request send successfully")};i.src=url}return alertEx}();try{boomr.utils.eval_jsstring(tti_lib_str);boomr.utils.eval_jsstring(fid_lib_str)}catch(e){console.log("Exception -> "+e)}w.cav_nv_ajax_pg_start=boomr.cav_nv_ajax_pg_start;w.cav_nv_ajax_pg_end=boomr.cav_nv_ajax_pg_end;w.cav_nv_pg_ready_cb=boomr.cav_nv_pg_ready_cb;w.cav_nv_pg_unload_cb=boomr.cav_nv_pg_unload_cb;w.cav_nv_before_beacon_cb=boomr.cav_nv_before_beacon_cb;w.cav_nv_after_beacon_cb=boomr.cav_nv_after_beacon_cb;w.cav_nv_get_session_data=boomr.cav_nv_get_session_data;w.cav_nv_set_session_data=boomr.cav_nv_set_session_data;w.cav_nv_add_cb=boomr.cav_nv_add_cb;w.cav_nv_set_loginid=boomr.cav_nv_set_loginid=function(s){if(typeof s!="string"){return}if(CAVNV.loginIDLowerCase){s=s.toLowerCase()}s=s.replace(/@.*$/g,"*******");s=CAVNV.utils.encode(s);w.cav_nv_log_event("LoginID",{LoginID:s})};w.cav_nv_set_sessionid=boomr.cav_nv_set_sessionid=function(s){if(typeof s!="string"){return}s=CAVNV.utils.encode(s);w.cav_nv_log_event("SessionID",{SessionID:s})};w.cav_nv_set_orderTotal=boomr.cav_nv_set_orderTotal=function(s){if(isNaN(s)||CAVNV.__sms){return}var sc=1,st=s;var ot=parseInt(CAVNV.get_session_flag("orderTotal"))||0;var oc=parseInt(CAVNV.get_session_flag("orderCount"))||0;if(ot){st+=ot;sc=oc+1}CAVNV.set_session_flag("orderTotal",st);CAVNV.set_session_flag("orderCount",sc);if(CAVNV.sid){w.cav_nv_log_event("OrderTotal",{OrderTotal:s})}CAVNV.plugins.EL.flush(true)};w.cav_nv_set_transactionId=boomr.cav_nv_set_transactionId=function(s){w.cav_nv_log_event("transactionID",{transactionID:s})};w.cav_nv_log_customMetrics=boomr.cav_nv_log_customMetrics=function(name,value,value2,value3,value4){var default_val={1:0,2:0,3:"",4:{}};var allflag=false;if(typeof name==="undefined"||name==null||typeof value==="undefined"||value==null){return}if(typeof name==="string"&&typeof value==="string"||typeof value==="number"||typeof value=="object"){name=[name];value=[value];if(value2!=undefined){allflag=true}}if(boomr.utils.isArray(name)){if(!boomr.utils.isArray(value)){value=[value];for(var z=1;z<name.length;z++){value.push(value[0])}}}var cm=null;for(var z=0;z<name.length;z++){if(typeof name[z]==="undefined"||name[z]==null||typeof value[z]==="undefined"||value[z]==null){continue}cm=null;for(var y=0;y<CAVNV.customMetrics.length;y++){if(name[z]===CAVNV.customMetrics[y].name){cm=CAVNV.customMetrics[y];break}}if(cm==null){CAVNV.error("CAVNV, Invalid CustomMetrics name "+name[z]);continue}if(!allflag){if(cm.type=="number"){boomr.utils.isNumber(value[z])&&w.cav_nv_log_event("customMetrics",cm.id+"|"+value[z]+"|0.0||")}else{if((cm.type=="double")){boomr.utils.isNumber(value[z])&&w.cav_nv_log_event("customMetrics",cm.id+"|0|"+value[z].toString()+"||")}else{if((cm.type=="text"||cm.type=="string")){if(cm.encode==true){w.cav_nv_log_event("customMetrics",cm.id+"|0|0.0|"+CAVNV.utils.encode(value[z].toString()).replace(/\"/g,"%22")+"|")}else{w.cav_nv_log_event("customMetrics",cm.id+"|0|0.0|"+value[z].toString().replace(/\"/g,"%22")+"|")}}else{try{if(cm.encode==true){w.cav_nv_log_event("customMetrics",cm.id+"|0|0.0||"+CAVNV.utils.encode(encodeURIComponent(JSON.stringify(value[z]))))}else{w.cav_nv_log_event("customMetrics",cm.id+"|0|0.0||"+encodeURIComponent(JSON.stringify(value[z])))}}catch(e){}}}}}else{if(isNaN(value[z])){value[z]=default_val[1]}value2=value2||default_val[2];if(isNaN(value2)){value2=default_val[2]}value3=value3||default_val[3];value4=value4||default_val[4];if(cm.encode==true){w.cav_nv_log_event("customMetrics",cm.id+"|"+value[z]+"|"+value2+"|"+CAVNV.utils.encode(value3.toString()).replace(/\"/g,"%22")+"|"+CAVNV.utils.encode(encodeURIComponent(JSON.stringify(value4))))}else{w.cav_nv_log_event("customMetrics",cm.id+"|"+value[z]+"|"+value2+"|"+value3.toString().replace(/\"/g,"%22")+"|"+encodeURIComponent(JSON.stringify(value4)))}}}};boomr.cav_nv_log_userSegment=function(mask){if(!mask){var m=CAVNV.get_session_flag("uSHistory");if(!m){return}mask=m[0]}w.cav_nv_log_event("userSegmentMask",mask)};w.cav_nv_set_userSegment=boomr.cav_nv_set_userSegment=function(id){var hd=CAVNV.get_session_flag("uSHistory");hd=hd||"0|";var h=hd.split("|");var mask=parseInt(h[0])|Math.pow(2,id);h[0]=mask;CAVNV.set_session_flag("uSHistory",h.join("|"));CAVNV.cav_nv_log_event("userSegmentMask",mask);CAVNV.plugins.EL.flush(true)};w.cav_nv_enable_nd=boomr.cav_nv_enable_nd;var console=null;try{console=w.top.console}catch(e){console=w.console}boomr.log=(function(){if(console&&console.log){var d=function(s){if(CAVNV.log_level){console.log("NVLogs:"+s)}};return d}else{return function(){}}})();boomr.debug=boomr.info=boomr.log;boomr.error=(function(){if(console&&console.error){return function(s){console.error("NVErrors:"+s)}}else{if(console&&console.log){return function(s){console.log("NVErrors:"+s)}}else{return function(){}}}})();boomr.warn=boomr.error;for(k in boomr){if(boomr.hasOwnProperty(k)){CAVNV[k]=boomr[k]}}CAVNV.plugins=CAVNV.plugins||{};(function(h){var again=0,plugin_loaded=false,d=h.document,jquery_fn_needed=["on","off"],load_conf,finish,get_pageIndex,load_js,jqPresent,update_pageIndex,jquery_e,load_jquery,jquery_loaded=false;var config={};load_js=function(){load_conf();if(jqPresent()==true){CAVNV.jQuery=h.jQuery;jquery_loaded=true;if(CAVNV.inlineConfig){finish()}return}if(h!==window){CAVNV.subscribe("page_ready",load_jquery,null,null)}else{load_jquery()}};jqPresent=function(){if(!h.jQuery||!h.jQuery.fn){return false}for(var z=0;z<jquery_fn_needed.length;z++){if(typeof h.jQuery.fn[jquery_fn_needed[z]]!="function"){return false}}return true};load_jquery=function(){if(h.module&&h.module.exports){CAVNV.exports=h.module.exports}if(jqPresent()==true){jquery_loaded=true;CAVNV.jQuery=h.jQuery;if(again>=2||CAVNV.inlineConfig){CAVNV.log("Netvision, CONFIG: configuration and jquery both loaded, sending beacon.");finish()}return}if(!config.jquery_url){return}var n=d.getElementsByTagName("script")[0];jquery_e=d.createElement("script");jquery_e.src=config.jquery_url;var jquery_found=h.jQuery?1:0;var jquery_load_callback=function(){if(jquery_loaded==true){return}jquery_loaded=true;CAVNV.log("Netvision, CONFIG: jquery loaded.");if(jquery_found){CAVNV.jQuery=h.jQuery.noConflict(true)}else{CAVNV.jQuery=h.jQuery;if(!CAVNV.jQuery&&h.module&&typeof h.module.exports=="function"){CAVNV.jQuery=h.module.exports}}if(again>=2||CAVNV.inlineConfig){CAVNV.log("Netvision, CONFIG: configuration and jquery both loaded, sending beacon.");finish()}};jquery_e.onload=jquery_load_callback;jquery_e.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){jquery_load_callback()}};n.parentNode.insertBefore(jquery_e,n)};load_conf=function(){if(!config.config_url){return}var n=d.getElementsByTagName("script")[0];var m=d.createElement("script");var msrc=config.config_url;var version=w.__nv_agent_version;if(w.localStorage){var ver=JSON.parse(w.localStorage.getItem("_nvLibVer"));if(ver&&ver.cfv!="0"){version=ver.cfv}}if(!version){version=(function(){var s=null;if(document.querySelector){s=document.querySelector('[src*="cav_nv"]')}if(!s){s=document.getElementsByTagName("script");for(var z=0;z<s.length;z++){if(s[z].src&&s[z].src.indexOf("cav_nv")>=0){s=s[z];break}}}if(s&&s.src&&s.src.indexOf("?")>0){var v=s.src.substr(s.src.indexOf("?")+1);return v}return null})();w.__nv_agent_version=version}if(version){if(msrc.indexOf("?")>0){msrc=msrc+"&v="+version}else{msrc=msrc+"?v="+version}}m.src=msrc;n.parentNode.insertBefore(m,n)};get_pageIndex=function(page_url,pageName){var pageIndex=-1;var get_path=function(url){var path=url;if(/^https?:\/\//.test(url)){path=url.substr(url.indexOf("/",8))}var s=path.indexOf("?");if(s==-1){s=path.indexOf("#")}if(s!=-1){path=path.substr(0,s)}return path};if(typeof config.pageGroupName!=="undefined"&&config.pageGroupName!=null&&pageName){pageName=pageName.toLowerCase();for(var id=0;id<config.pageGroupName.length;id++){if(config.pageGroupName[id].c.toLowerCase()==pageName){pageIndex=config.pageGroupName[id].s;break}}}else{if(typeof config.pageUrlValues!=="undefined"&&page_url){page_url=page_url.toLowerCase();var url_without_query_string=get_path(page_url).toLowerCase();for(var id=0;id<config.pageUrlValues.length;id++){var cs=config.pageUrlValues[id];if(typeof cs.c=="string"){var l=cs.c.length;var s=(cs.c[0]=="/")?cs.c.substring(1,l-1):cs.c;cs.c=new RegExp(s)}if((cs.cu!==undefined&&cs.cu==true&&cs.c.test(page_url))||(cs.c.test(url_without_query_string))){pageIndex=cs.s;break}}}}return pageIndex};update_pageIndex=function(lconfig){if(lconfig===undefined||lconfig==null){lconfig=config}var pageIndex=-1;if(lconfig.pageGroupVar==="undefined"||lconfig.pageGroupVar===null){lconfig.pageGroupVar="CAV_PG_VAR"}if(typeof lconfig.pageGroupName!=="undefined"&&lconfig.pageGroupName!=null&&typeof h[lconfig.pageGroupVar]!=="undefined"){var pageName=h[lconfig.pageGroupVar].toLowerCase();for(var id=0;id<lconfig.pageGroupName.length;id++){if(lconfig.pageGroupName[id].c.toLowerCase()==pageName){pageIndex=lconfig.pageGroupName[id].s;break}}}else{if(typeof lconfig.pageUrlValues!=="undefined"){var page_url=(h.document.location.pathname).toLowerCase();var page_url_with_query=(h.document.location.href).toLowerCase();var id,cs;for(id=0;id<lconfig.pageUrlValues.length;id++){cs=lconfig.pageUrlValues[id];if(typeof cs.c=="string"){var l=cs.c.length;var s=(cs.c[0]=="/")?cs.c.substring(1,l-1):cs.c;cs.c=new RegExp(s)}if((cs.cu!==undefined&&cs.cu==true&&cs.c.test(page_url_with_query))||(cs.c.test(page_url))){pageIndex=cs.s;break}}}}CAVNV.log("value of pageIndex is "+pageIndex);CAVNV.pageIndex=pageIndex;if(CAVNV.plugins.NavigationTiming.is_complete()){CAVNV.modifyVar("pageIndex",pageIndex)}};finish=function(){if(plugin_loaded){return}plugin_loaded=true;if(CAVNV.config.USERACTION.enabled!=false){CAVNV.plugins.USERACTION.init(CAVNV.config)}CAVNV.channel=0;if(typeof CAVNV.getChannel==="function"){var channel=0;try{channel=CAVNV.getChannel()}catch(e){}if(typeof channel=="number"){CAVNV.channel=channel;if(CAVNV.plugins.NavigationTiming.is_complete()){CAVNV.modifyVar("channel",channel)}}}CAVNV.dataFlushTimer=setInterval(CAVNV.flush_all,CAVNV.dataFlushInterval);CAVNV.dataFlushTimer=setInterval(function(){CAVNV.sbqueue.flush()},60000);CAVNV.sendBeacon()};CAVNV.plugins.CONFIG={init:function(c){if(plugin_loaded){return this}var kw=["config_url","pageGroupName","pageUrlValues","pageGroupVar","jquery_url"];CAVNV.utils.pluginConfig(config,c,"CONFIG",kw);var e=document.getElementById("boomr-if-as");if(e){var cp=e.getAttribute("configurl");if(typeof cp==="string"){config.config_url=cp}CAVNV.log("configuration file path - "+cp)}if(jquery_loaded){finish();return this}if(again==0){load_js()}again++;return this},is_complete:function(){return plugin_loaded},get_pageIndex:get_pageIndex,setPageIndex:update_pageIndex}}(CAVNV.window));(function(){window.CAVNV=window.CAVNV||{};CAVNV.retryTiming=0;CAVNV.plugins=CAVNV.plugins||{};CAVNV.iframePorts=[];CAVNV.__sms=0;CAVNV.__uaEnabled=true;CAVNV.pageInstanceCounter=0;CAVNV.parentComDone=false;CAVNV.nav_start_time=Date.now();CAVNV.nav_offset=0;CAVNV.snapshotInstance=0;CAVNV.pendingSnapshot={};var lastClick=-1;CAVNV.ndInfo={tierId:-1,serverId:-1,instanceId:-1,instrFlag:false};var impl2={complete:false,done:function(){var w=CAVNV.window,p,pn,pt,data;var d=w.document;var redirectCount,redirectTime;var Version=1;if(this.complete){return}var nt_dns_time,nt_dom_time,nt_unload_time,nt_res_Time,nt_server_reponse_time,nt_req_time,nt_secure_con_time,nt_dom_interactive;var nt_red_count;if((p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance)&&p.timing&&p.navigation){CAVNV.info("This user agent supports NavigationTiming.","nt");pn=p.navigation;pt=p.timing;redirectCount=pn.redirectCount;CAVNV.nav_start_time=pt.navigationStart;CAVNV.log("Navigation start time = "+CAVNV.nav_start_time);nt_nav_type=pn.type;if(pt.redirectEnd==0||pt.redirectStart==0||pn.redirectCount==0){nt_red_time=-1}else{nt_red_time=pt.redirectEnd-pt.redirectStart}var cache_flag=0;if(pt.domainLookupEnd!=pt.fetchStart){nt_app_cache_time=pt.domainLookupStart-pt.fetchStart;cache_flag=1}else{if(pt.connectEnd!=pt.fetchStart){nt_app_cache_time=pt.connectStart-pt.fetchStart;cache_flag=1}else{nt_app_cache_time=pt.requestStart-pt.fetchStart;cache_flag=2}}if(nt_app_cache_time>3600000){nt_app_cache_time=-1}if(pt.responseEnd>0&&pt.fetchStart>0&&(pt.responseEnd-pt.fetchStart)<3600000){nt_fetch_time=pt.responseEnd-pt.fetchStart}else{nt_fetch_time=-1}if(pt.domainLookupEnd==0){nt_dns_time=-2}else{if(cache_flag==2||pt.domainLookupEnd==pt.fetchStart+nt_app_cache_time){nt_dns_time=-1}else{nt_dns_time=pt.domainLookupEnd-pt.domainLookupStart}}var nt_con_time;if(pt.connectEnd==0){nt_con_time=-2;nt_secure_con_time=-2}else{if(pt.connectEnd==pt.domainLookupEnd){nt_con_time=-1;nt_secure_con_time=-1}else{if(pt.secureConnectionStart!=0&&pt.secureConnectionStart!=undefined){nt_con_time=pt.secureConnectionStart-pt.connectStart;nt_secure_con_time=pt.connectEnd-pt.secureConnectionStart}else{nt_con_time=pt.connectEnd-pt.connectStart;nt_secure_con_time=-1}}}nt_req_time=pt.responseStart-pt.requestStart;var nt_first_byte_time;if(pt.responseStart==0||pt.requestStart==0||(pt.responseStart>pt.responseEnd)){nt_first_byte_time=-2}else{nt_first_byte_time=(pt.responseStart-pt.navigationStart)}var nt_server_response_time=-1;if(pt.responseStart==0||pt.requestStart==0){nt_server_response_time=-2}else{nt_server_response_time=(pt.responseStart-pt.requestStart)}var nt_res_time;if(pt.responseStart==0||pt.responseEnd==0||(pt.responseEnd-pt.responseStart)>3600000||(pt.responseStart>pt.responseEnd)){nt_res_time=-2}else{nt_res_time=pt.responseEnd-pt.responseStart}if(pt.unloadEventEnd==0){nt_unload_time=-2}else{var uStart=pt.unloadEventStart;if(CAVNV.unloadLC){var s=w.sessionStorage;var lc;if(!!s){lc=s.getItem("nvlc")}if(lc&&lc.split("#")[1]==d.referrer.substr(0,1024)){var l=parseInt(lc.split(":")[0]);if(l>0){uStart=l}}}nt_unload_time=(pt.unloadEventEnd-uStart)}nt_dom_time=pt.domComplete-pt.domLoading;if(pt.domContentLoadedEventEnd){nt_dom_content_load_time=pt.domContentLoadedEventEnd-pt.domContentLoadedEventStart}else{nt_dom_content_load_time=0}if(nt_load_time>3600000){nt_load_time=-1}if(pt.domInteractive&&pt.domInteractive-pt.navigationStart<3600000){nt_dom_interactive=pt.domInteractive-pt.navigationStart}else{nt_dom_interactive=-1}var nt_load_time=-1;var nt_time_to_load=-1;if(pt.loadEventEnd>0){nt_load_time=pt.loadEventEnd-pt.loadEventStart;if(nt_load_time>3600000){nt_load_time=-1}nt_time_to_load=(pt.loadEventStart-pt.navigationStart);CAVNV.loadTimeDone=true}if(pt.domContentLoadedEventStart){nt_time_to_DOC=(pt.domContentLoadedEventStart-pt.navigationStart)}else{nt_time_to_DOC=0}function getPT2(timing){var fp=p.getEntriesByName(timing);if(fp.length>0){return parseInt(Math.max(fp[0].startTime))}return -1}nt_fp=getPT2("first-paint");nt_fcp=getPT2("first-contentful-paint")}else{redirectCount=0;nt_nav_type=-1;nt_red_count=-1;nt_red_time=-1;nt_app_cache_time=-1;nt_fetch_time=-1;nt_dns_time=-1;nt_con_time=-1;nt_secure_con_time=-1;nt_first_byte_time=-1;nt_res_time=-1;nt_unload_time=-1;nt_dom_time=-1;nt_dom_content_load_time=-1;nt_load_time=-1;nt_time_to_load=-1;nt_time_to_DOC=-1;nt_server_response_time=-1;nt_dom_interactive=-1;nt_fp=-1;nt_fcp=-1;CAVNV.loadTimeDone=true}var accessType=new Array("28K","56K","CABLE","DSL","T1","FASTETHERNET","HIGHSPEED","384K_DSL","1M_DSL","2.5M_DSL","VDSL2","VDSL","E3","ADSL2+","ADSL2","ADSL","E2","T2","SDSL","E1","HDSL","G.LITE","UMB","HSDPA/HSUPA(3.5G)","EDGEEVOLUTION(TYPE2MS)","EDGE(TYPE2MS)","EDGE(2.75G)","3G","CDMA2000","HSPA+","UMTS3G","LTE","4G","LTEADVANCED","WIDEN","GPRS(2.5G)","HSCSD","GSM_CSD(2G)","ISDN","WLAN/WIFI");var CavAccessType=(typeof(CavServiceConf)!="undefined"&&CavServiceConf.access!=null)?CavServiceConf.access.toUpperCase():"";var accessIndex=-1;for(var i=0;i<accessType.length;i++){if(accessType[i]==CavAccessType){accessIndex=i;break}}CAVNV.log("Access Type = "+CavAccessType+"AccessIndex = "+accessIndex);var screen_resolution=new Array("42x11","16x16","40x30","32x32","42x32","48x32","60x40","150x40","84x48","64x64","72x64","75x64","96x64","1360x768","102x64","240x64","96x65","96x96","160x102","160x120","128x128","432x128","160x144","224x144","160x152","160x160","240x160","144x168","208x176","220x176","140x192","256x192","280x192","320x192","560x192","160x200","320x200","640x200","208x208","320x208","320x224","480x234","240x240","320x240","400x240","432x240","376x240","640x240","800x240","480x250","160x256","256x256","320x256","512x256","640x256","400x270","480x272","400x300","320x320","480x320","640x320","512x342","720x348","640x350","720x350","416x352","800x352","640x360","720x364","512x384","640x400","600x480","640x480","768x480","800x480","848x480","854x480","480x500","640x512","960x540","960x544","1024x576","800x600","1024x600","832x624","960x640","1024x640","1136x640","960x720","1152x720","1024x768","1152x768","1024x800","1280x720","1120x832","1280x768","1280x600","1152x864","1280x800","1152x900","1024x1024","1366x768","1280x854","1600x768","1280x960","1440x900","1280x1024","1440 x 960","1600x900","1400x1050","1440x1024","1440x1080","1600x1024","1680x1050","1600x1200","1920x1080","1920x1200","2048x1152","1792x1344","1856x1392","2880x900","1800x1440","2048x1280","1920x1400","2538x1080","2560x1080","1920x1440","2048x1536","2304x1440","2560x1440","2304x1728","2560x1600","2560x1700","2560x1920","2880x1800","2560x2048","2800x2100","3200x1800","3200x2048","3200x2400","3840x2160","3840x2400","4096x2304","4096x3072","5120x3200","5120x4096","6400x4096","6400x4800","7680x4320","7680x4800","8192x4608","1053x380");var width=(typeof(CavServiceConf)!="undefined")?CavServiceConf.width:screen.width,height=(typeof(CavServiceConf)!="undefined")?CavServiceConf.height:screen.height,screenSize=width+"x"+height,screenIndex=-1;for(var i=0;i<screen_resolution.length;i++){if(screen_resolution[i]==screenSize){screenIndex=i;break}}if(screenIndex==-1){width=width<<16;width=width|height;screenIndex=width}var t=true;var ua=(typeof(CavServiceConf)!="undefined")?CavServiceConf.userAgent.toUpperCase():navigator.userAgent.toUpperCase();var ua_orig=(typeof(CavServiceConf)!="undefined")?CavServiceConf.userAgent:navigator.userAgent;if((ua.indexOf("CAVNVSM")!=-1)||(ua.indexOf("SOASTA")!=-1)){CAVNV.__sms=1}CAVNV.log("UserAgent = "+ua);function detectBrowserDetails(ua){function getFirstMatch(regex){var match=ua.match(regex);return(match&&match.length>1&&match[1])||""}var iosdevice=getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),likeAndroid=/like android/i.test(ua),android=!likeAndroid&&/android/i.test(ua),versionIdentifier=getFirstMatch(/version\/(\d+(\.\d+)?)/i),tablet=/tablet/i.test(ua),mobile=!tablet&&/[^-]mobi/i.test(ua),result;if(/opera|opr/i.test(ua)){result={name:"Opera",index:4,opera:t,version:versionIdentifier||getFirstMatch(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}}else{if(/netscape|navigator/i.test(ua)){result={name:"Netscape",index:16,opera:t,version:getFirstMatch(/(?:netscape|netsc)[\s\/](\d+(\.\d+)?)/i)||getFirstMatch(/(?:navigator|navig)[\s\/](\d+(\.\d+)?)/i)}}else{if(/nokia|OVIBROWSER/i.test(ua)){result={name:"OVI Browser",index:17,nokia:t}}else{if(/windows phone/i.test(ua)){result={name:"Windows Phone",index:2,windowsphone:t,msie:t,version:getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i)}}else{if(/msie|trident/i.test(ua)){result={name:"Internet Explorer",index:2,msie:t,version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)}}else{if(/Edg/i.test(ua)){result={name:"Internet Edge",index:5,msie:t,version:getFirstMatch(/(?:Edg)\/(\d+(.\d)?)/i)}}else{if(/chrome|crios|crmo/i.test(ua)){result={name:"Chrome",index:0,chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else{if(iosdevice){result={name:iosdevice=="iphone"?"iPhone":iosdevice=="ipad"?"iPad":"iPod",index:3};if(versionIdentifier){result.version=versionIdentifier}}else{if(/sailfish/i.test(ua)){result={name:"Sailfish",index:19,sailfish:t,version:getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}}else{if(/seamonkey\//i.test(ua)){result={name:"SeaMonkey",index:6,seamonkey:t,version:getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)}}else{if(/firefox|iceweasel/i.test(ua)){result={name:"Firefox",index:1,firefox:t,version:getFirstMatch(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua)){result.firefoxos=t}}else{if(/silk/i.test(ua)){result={name:"Amazon Silk",index:7,silk:t,version:getFirstMatch(/silk\/(\d+(\.\d+)?)/i)}}else{if(android){result={name:"Android",index:10,version:versionIdentifier}}else{if(/phantom/i.test(ua)){result={name:"PhantomJS",index:8,phantom:t,version:getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)}}else{if(/blackberry|\bbb\d+/i.test(ua)||/rim\stablet/i.test(ua)){result={name:"BlackBerry",index:12,blackberry:t,version:versionIdentifier||getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}}else{if(/(web|hpw)os/i.test(ua)){result={name:"WebOS",index:13,webos:t,version:versionIdentifier||getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(ua)&&(result.touchpad=t)}else{if(/bada/i.test(ua)){result={name:"Bada",index:14,bada:t,version:getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)}}else{if(/tizen/i.test(ua)){result={name:"Tizen",index:15,tizen:t,version:getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||versionIdentifier}}else{if(/safari/i.test(ua)){result={name:"Safari",index:3,safari:t,version:versionIdentifier}}else{result={name:"Unknown",index:-1,safari:t,version:0}}}}}}}}}}}}}}}}}}}}if(/(apple)?webkit/i.test(ua)){result.name=result.name||"Webkit";result.webkit=t;if(!result.version&&versionIdentifier){result.version=versionIdentifier}}else{if(!result.opera&&/gecko\//i.test(ua)){result.name=result.name||"Gecko";result.gecko=t;result.version=result.version||getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)}}if(android||result.silk){result.android=t}else{if(iosdevice){result[iosdevice]=t;result.ios=t}}var osVersion="";if(iosdevice){osVersion=getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i);osVersion=osVersion.replace(/[_\s]/g,".")}else{if(android){osVersion=getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i)}else{if(result.windowsphone){osVersion=getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}else{if(result.webos){osVersion=getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i)}else{if(result.blackberry){osVersion=getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i)}else{if(result.bada){osVersion=getFirstMatch(/bada\/(\d+(\.\d+)*)/i)}else{if(result.tizen){osVersion=getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i)}}}}}}}if(osVersion){result.osversion=osVersion}var osMajorVersion=osVersion.split(".")[0];if(tablet||iosdevice=="ipad"||(android&&(osMajorVersion==3||(osMajorVersion==4&&!mobile)))||result.silk){result.tablet=t}else{if(mobile||iosdevice=="iphone"||iosdevice=="ipod"||android||result.blackberry||result.webos||result.bada||result.nokia){result.mobile=t}}if((result.msie&&result.version>=9)||(result.chrome&&result.version>=20)||(result.firefox&&result.version>=10)||(result.safari&&result.version>=5)||(result.opera&&result.version>=10)||(result.ios&&result.osversion&&result.osversion.split(".")[0]>=6)){result.a=t}else{if((result.msie&&result.version<9)||(result.chrome&&result.version<20)||(result.firefox&&result.version<10)||(result.safari&&result.version<5)||(result.opera&&result.version<10)||(result.ios&&result.osversion&&result.osversion.split(".")[0]<6)){result.c=t}else{result.x=t}}return result}var uaData=navigator.userAgentData;var browser={};if(uaData&&uaData.brands.length){var b_arr=["google chrome","mozilla firefox","internet explorer","safari","opera","microsoft edge","seamonkey","amazonsilk","phantomjs","iphone","android","windowsphone","blackberry","webos","bada","tizen","netscape","ovibrowser","androidbrowser","sailfish","windowsapp","iphoneapp"];const brands=uaData.brands;for(var i=0;i<brands.length;i++){var index=b_arr.indexOf(brands[i].brand.toLowerCase());if(index!==-1){browser.index=index;browser.name=brands[i].brand;browser.version=brands[i].version;break}}browser.mobile=uaData.mobile}else{browser=detectBrowserDetails(ua)}if(browser.mobile&&uaData){browser=detectBrowserDetails(ua)}var browserIndex=browser.index;if(CAVNV.window.NBridge||!!CAVNV.window.webkit&&!!CAVNV.window.webkit.messageHandlers.appNativeSync){browserIndex=18}CAVNV.browser_id=browserIndex;var dev_type="";if(browser.mobile){dev_type="Mobile"}else{if(browser.tablet){dev_type="Tablet"}else{dev_type="PC"}}var osDetail={};if(uaData&&uaData.brands.length){impl.vars.waiting=true;window.navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","model","uaFullVersion"]).then(function(h){if(h.platform.toUpperCase()){impl.vars.platform=h.platform.toUpperCase();impl.vars.BrowserosVersion=h.platformVersion;impl.vars.BrowserAgent=impl.vars.platform+"/"+impl.vars.BrowserosVersion+"; "+h.architecture+"; "+h.model+"; "+browser.name+"/"+browser.version+"; "+h.uaFullVersion;CAVNV.log("Browser Details"+impl.vars.BrowserAgent);impl.vars.waiting=false;if(CAVNV.plugins.NavigationTiming.is_complete()){CAVNV.sendBeacon()}}})}else{var uaParser=new CAVUAParser(ua);osDetail=uaParser.getOS()}var colorDepth=window.screen.colorDepth||-1;var pixelDepth=window.screen.pixelDepth||colorDepth;var dnt=navigator.doNotTrak;if(dnt==null){dnt=0}var pageIndex=CAVNV.pageIndex||-1;var channel=CAVNV.channel||0;var visitorId=-2;if(CAVNV.visitorInfo){visitorId=CAVNV.utils.getCookie("CavVI");if(!visitorId){visitorId=-1}}var ndData=boomr.get_nd_data();CAVNV.log("nt_app_cache_time = "+nt_app_cache_time+"nt_load_time = "+nt_load_time);CAVNV.log("Value of screen size = "+screenSize);CAVNV.log("pageIndex = "+pageIndex+" browserIndex = "+browserIndex+" ScreenIndex = "+screenIndex+" AccessIndex = "+accessIndex);var tab_id=sessionStorage.getItem("tabId");if(tab_id==null){tab_id=CAVNV.get_session_flag("tabId");if(tab_id!==null&&!isNaN(tab_id)){try{sessionStorage.setItem("tabId",tab_id)}catch(e){}CAVNV.set_session_flag("tabId",parseInt(tab_id)+1)}else{CAVNV.set_session_flag("tabId","1");tab_id=0;try{sessionStorage.setItem("tabId",tab_id)}catch(e){}}}if(!!CAVNV.window.NBridge){var cd=CAVNV.window.NBridge.getNativeAppParam();cd=JSON.parse(cd);CAVNV.log("Data from native app - "+JSON.stringify(cd));CAVNV.utils.androidSyncBridge(cd)}if(!!CAVNV.window.webkit&&!!CAVNV.window.webkit.messageHandlers.appNativeSync){CAVNV.window.webkit.messageHandlers.appNativeSync.postMessage("initialize")}var st=parseInt(CAVNV.get_session_flag("orderTotal"))||0;var sc=parseInt(CAVNV.get_session_flag("orderCount"))||0;data={nt_version:Version,nt_red_count:redirectCount,nt_red_time:nt_red_time,nt_app_cache_time:nt_app_cache_time,nt_fetch_time:nt_fetch_time,nt_dns_time:nt_dns_time,nt_con_time:nt_con_time,nt_secure_con_time:nt_secure_con_time,nt_first_byte_time:nt_first_byte_time,nt_res_time:nt_res_time,nt_unload_time:nt_unload_time,nt_dom_time:nt_dom_time,nt_dom_content_load_time:nt_dom_content_load_time,nt_load_time:nt_load_time,nt_time_to_load:nt_time_to_load,nt_time_to_DOC:nt_time_to_DOC,pageIndex:pageIndex,perceived_render_time:-1,SC:ndData.SC,nt_server_response_time:nt_server_response_time,br_refer:d.referrer.substr(0,256),url:d.URL.substr(0,512),hostname:w.location.host,cookie:boomr.get_document_cookies(),BrowserName:browserIndex,screen_resolution:screenIndex,access_type:accessIndex,Monitor_color_depth:colorDepth,Monitor_pixel_depth:pixelDepth,platform:(osDetail.name||"UNKNOWN"),BrowserAgent:ua_orig.substr(0,512),BrowserLanguage:navigator.language,BrowserPlugins:navigator.plugins,br_cname:navigator.appCodeName,DNT:dnt,conn_type:dev_type,BrowserVersion:browser.version,BrowserosVersion:(osDetail.version||"-"),NSTR:ndData.NSTR,channel:channel,Errorcount:ndData.ERRCNT,navType:nt_nav_type,fpidGroup:"{"+ndData.FPID+"}",nt_dom_interactive:nt_dom_interactive,visitorId:visitorId,bandwidth:-1,transferBytes:-1,cartItem:0,cartValue:0,tabId:tab_id,nt_fp:nt_fp,nt_fcp:nt_fcp,oT:st,oC:sc,cvCurHexTime:CAVNV.version||"",cvfCurHexTime:CAVNV.config.version||""};CAVNV.addVar(data);if(w.chrome&&w.chrome.loadTimes){pt=w.chrome.loadTimes();if(pt){}}var opts={useMutationObserver:false,useXHRObserver:false};try{w.ttiPolyfill.getFirstConsistentlyInteractive(opts).then(function(tti){if(!isNaN(tti)&&tti>0){CAVNV.cav_nv_log_event("Timing",{tti:parseInt(Math.max(tti))});if(CAVNV.resourceTiming){CAVNV.logResourceTiming(false,true);ResourceFailedDetector.stop()}}})}catch(e){console.error("Error in PT2:"+e)}try{w.perfMetrics.onFirstInputDelay(function(delay,evt){if(!isNaN(delay)&&delay>0){CAVNV.cav_nv_log_event("Timing",{fid:parseInt(Math.max(delay))})}})}catch(e){console.error("Error in PT2:"+e)}if(w.PerformanceObserver&&w.PerformanceLongTaskTiming&&CAVNV.config.longTask){var o=new w.PerformanceObserver(function(l){var list=l.getEntries();for(var z=0;z<list.length;z++){var t=parseInt(list[z].startTime+CAVNV.nav_start_time);var d={name:list[z].name,attribution:list[z].attribution};var eventMsg=t+"|"+parseInt(list[z].duration)+"|-10||-2||||-1|-1|-1|-1|"+JSON.stringify(d).replace(/\|/g,";")+"||-1|-1|||";CAVUA.logEvent(eventMsg,false,"")}});o.observe({entryTypes:["longtask"]})}this.complete=true;CAVNV.sendBeacon()}};var cb=function(){var s=w.sessionStorage;if(!!s){if(lastClick>0){s.setItem("nvlc",lastClick+"#"+d.location.href.substr(0,1024))}else{s.removeItem("nvlc")}}};CAVNV.plugins.NavigationTiming={init:function(){w.onmessage=impl2.onmessageCallback;if(!CAVNV.config.enableCvrAllPages){CAVNV.subscribe("page_ready",impl2.done,null,impl2)}else{setTimeout(function(){impl2.done()},10)}CAVNV.subscribe("page_unload",cb,null,this);return this},is_complete:function(){return impl2.complete},onevent:function(e){if(e.type=="click"){lastClick=new Date().getTime()}},restart:function(){lastClick=-1;CAVNV.subscribe("page_unload",cb,null,this)}}}());(function(w,d){var complete=false;var frame_origin=null;var frame_window=null;var crossOriginTimer=-1;var crossOrigin_message_timeout=1000;var config={group:null,frame_url:null};var syncCallback=[];var pendingSyncReq=false;function coCookieSynced(){for(var z=0;z<syncCallback.length;z++){try{syncCallback[z][0].apply(syncCallback[z][1]||CAVNV)}catch(e){CAVNV.error("Exception in executing syncCallback at idx - "+z+"exception - "+e)}}pendingSyncReq=false;syncCallback=[]}function handleMessage(event){if(CAVNV.config.CrossOrigin.enabled&&event.origin==frame_origin){var d=event.data;if(d.opcode&&(d.opcode=="nv_get_co_cookie"||d.opcode=="nv_sync_co_cookie")){var cookies=d.s_cookie;if(cookies!=null){for(var z=0;z<cookies.length;z++){CAVNV.utils.setCookie(cookies[z][0],cookies[z][1])}}if(d.opcode=="nv_get_co_cookie"){clearTimeout(crossOriginTimer);frame_window=event.source;complete=true;CAVNV.sendBeacon()}else{if(d.opcode=="nv_sync_co_cookie"){coCookieSynced()}}}}}function start(){var URL=XMLProfiler.getURL(config.frame_url);frame_origin=URL.origin;var iframe=document.createElement("iframe");iframe.style.cssText="width:0;height:0;border:0;display:none;";iframe.src=config.frame_url+"?origin="+w.location.origin+"&group="+config.group+"&expiry="+CAVNV.sessionExpiryTime;iframe.onload=function(){if(complete==true){return}crossOriginTimer=setTimeout(onTimeout,crossOrigin_message_timeout)};iframe.onerror=function(){if(complete==false){onTimeout()}};document.body.appendChild(iframe);window.addEventListener("message",handleMessage,false)}function onTimeout(){complete=true;CAVNV.log("Disbaling CrossOrigin Plugin");CAVNV.config.CrossOrigin.enabled=false;CAVNV.sendBeacon()}function updateCookie(cname,cvalue){var data={opcode:"nv_set_co_cookie",s_cookie:[cname,cvalue]};if(frame_window){frame_window.postMessage(data,frame_origin)}}function syncCOCookie(callback,context){syncCallback.push([callback,context]);if(pendingSyncReq==false){frame_window.postMessage({opcode:"nv_sync_co_cookie"},frame_origin);pendingSyncReq=true}}CAVNV.plugins.CrossOrigin={init:function(c){if(CAVUA.utils.isIE()==true){complete=true;CAVNV.log("Disbaling CrossOrigin Plugin");CAVNV.config.CrossOrigin.enabled=false;return false}CAVNV.utils.pluginConfig(config,c,"CrossOrigin",Object.keys(config));if(!config.group||!config.frame_url){CAVNV.error("CrossOrigin Plugin - Invalid Configuration");complete=true;CAVNV.config.CrossOrigin.enabled=false;return false}start()},is_complete:function(){return complete}},CAVNV.updateCookie=updateCookie;CAVNV.syncCOCookie=syncCOCookie}(CAVNV.window,CAVNV.document));(function(w){var queue=[],loading=false,__counter=0;var config={libraryPath:null,publicKey:null};function add(entry){var id="%NVENCRYPTED_"+__counter+++"%";queue.push({id:id,d:entry});if(!loading){loadLibrary()}return id}function loadLibrary(){if(!config.libraryPath){return null}var s=document.createElement("script");s.type="text/javascript";s.src=config.libraryPath;s.async=true;var n=document.getElementsByTagName("script")[0];n.parentElement.appendChild(s);loading=true}CAVNV.plugins.EQueue={init:function(c){CAVNV.utils.pluginConfig(config,c,"EQueue",Object.keys(config))},is_complete:function(){return true},restart:function(){queue=[]},getPrevState:function(){return{queue:queue,counter:__counter,config:config}},add:add}}(CAVNV.window));(function(p){var again=false,load_js,d=p.document;var config={};var plugin_loaded=false;var config={};load_js=function(){CAVNV.log("loading feedback plugin");var n=d.getElementsByTagName("script")[0];var e=document.createElement("script");e.id="nvFeedbackPlugin";e.src=config.pluginfbjs_url;CAVNV.log("feedback plugin js  e.src + "+e.src);n.parentNode.insertBefore(e,n);plugin_loaded=true};CAVNV.plugins.FEEDBACK={init:function(c){if(p.FeedbackPage!=undefined&&p.FeedbackPage==true){CAVNV.log("Feedback can not be enabled for feedback module");plugin_loaded=true;return this}var kw=["pluginfbjs_url","fb_url","feedbackPosition","nvmail_url","nvreplaysession_url"];if(plugin_loaded){return this}CAVNV.utils.pluginConfig(config,c,"FEEDBACK",kw);if(typeof config.pluginfbjs_url==="undefined"||config.pluginfbjs_url===null){CAVNV.log("Netvision, no plugin js given for feedback collection.");return false}if(typeof config.feedbackPosition==="undefined"||config.feedbackPosition===null){config.feedbackPosition="bottom"}CAVNV.feedbackPosition=config.feedbackPosition;CAVNV.nvmail_url=config.nvmail_url;CAVNV.nvreplaysession_url=config.nvreplaysession_url;if(p!==window){CAVNV.subscribe("page_ready",load_js,null,null)}else{load_js()}return this},is_complete:function(){return true},restart:function(){CAVNV.log("Netvision, Feedback: restart() called");if(!plugin_loaded){this.init()}}}}(CAVNV.window));(function(h){var plugin_loaded=false,doc=h.document,config={autoFillObserver:{enable:true,frequency:500}},autoFillTimer=null,inputNodes=null,fillInputNodes=function(){inputNodes=new NodeMap();var is=doc.getElementsByTagName("INPUT");var d={};for(var z=0;z<is.length;z++){if(is[z].type=="hidden"||is[z].type=="submit"||is[z].type=="reset"||is[z].type=="image"){continue}d={time:new Date().getTime(),value:is[z].value};inputNodes.set(is[z],d)}is=doc.getElementsByTagName("SELECT");for(var z=0;z<is.length;z++){if(is[z].selectedIndex!=-1){d={time:new Date().getTime(),value:is[z].options[is[z].selectedIndex].text}}else{d={time:new Date().getTime(),value:""}}inputNodes.set(is[z],d)}CAVNV.inputNodes=inputNodes};var capture_keypress=function(){CAVNV.window.document.addEventListener("keydown",function(event){var ev=window.event?window.event:event;var keyname=ev.key;if(keyname.indexOf("Control")!=-1||keyname.indexOf("Shift")!=-1||keyname.indexOf("Alt")!=-1||((/^[a-zA-Z0-9]$/.test(ev.key))&&!ev.ctrlKey)){return}if(ev.ctrlKey){keyname+=" + Ctrl"}if(ev.shiftKey){keyname+=" + Shift"}if(ev.altKey){keyname+=" + Alt"}var eventMsg=(new Date().getTime())+"|"+-1+"|-12||||||-1|-1|-1|-1|"+keyname+"||-1|-1|||";CAVUA.logEvent(eventMsg,false,"")})};var enableAutoFillObserver=function(){var TIMER_CALLER=1;var EVENT_HANDLER_CALLER=2;function checkAndLogEvent(keys,caller){caller=caller||TIMER_CALLER;var d,node,pv,v,en,prev,val,ev,eeflag,valueObj,nv;var t=new Date().getTime();for(var z=0;z<keys.length;z++){node=keys[z];if(node.offsetParent===null){continue}if(caller==TIMER_CALLER&&doc.activeElement==node){continue}d=inputNodes.get(node);if(!d){continue}nv=node.value;if(node.tagName&&node.tagName=="SELECT"){nv="";if(node.selectedIndex<node.options.length&&node.selectedIndex>=0){nv=node.options[node.selectedIndex].text}}if(nv!=d.value){pv=d.value;d.value=nv;d.time=new Date().getTime();v=nv;ev="";if(true){var id,idType,o;o=CAVNV.utils.getDomID(node);id=o.i;idType=o.t;eeflag=(node.type=="password"?2:0)||CAVNV.utils.getEEFlag(node);valueObj=CAVNV.utils.getEEValue(v,eeflag,true);v=valueObj.v||"";ev=valueObj.ev||"";var viewPortX=window.pageXOffset||(null===document.body?0:document.body.scrollLeft),viewPortY=window.pageYOffset||(null===document.body?0:document.body.scrollTop),pageWidth=document.width||(null===document.documentElement?0:document.documentElement.offsetWidth),pageHeight=Math.max("undefined"==typeof document.height?0:document.height,"undefined"==typeof document.documentElement?0:document.documentElement.offsetHeight,"undefined"==typeof document.documentElement?0:document.documentElement.scrollHeight);var xpos=parseInt(viewPortX/pageWidth*1000);if(isNaN(xpos)){xpos=-1}var ypos=parseInt(viewPortY/pageHeight*1000);var attr=JSON.stringify(CAVUA.utils._getElementAttr(node));if(isNaN(ypos)){ypos=-1}var event=t+"|-1|30|"+id+"|"+idType+"|"+(node.name||"")+"|"+node.tagName+"|"+node.type+"|"+xpos+"|"+ypos+"|-1|-1|"+v+"|"+ev+"|-1|-1||"+attr+"|";CAVUA.logEvent(event,false,"")}}}}fillInputNodes();var keys;autoFillTimer=setInterval(function(){keys=inputNodes.keys();checkAndLogEvent(keys,TIMER_CALLER)},config.autoFillObserver.frequency);doc.addEventListener("keydown",function(e){var keycode=(e.keyCode?e.keyCode:e.which);if(keycode=="13"&&e.target.tagName=="INPUT"){checkAndLogEvent([e.target],EVENT_HANDLER_CALLER)}},true)};CAVNV.plugins.USERACTION={init:function(c){if(plugin_loaded){return this}var kw=["autoFillObserver"];CAVNV.utils.pluginConfig(config,c,"USERACTION",kw);if(typeof CAVNV.jQuery==="undefined"||CAVNV.jQuery==null){return}function initUA(){CAVUA.init();if(config.autoFillObserver.enable){enableAutoFillObserver()}}if(CAVNV.config.USERACTION.enableKeyPress){capture_keypress()}plugin_loaded=true;CAVNV.plugins.DOMWATCHER2.init(c);CAVNV.subscribe("page_ready",function(){initUA()},null,null);return this},is_complete:function(){return true},is_active:function(){return plugin_loaded},flush:function(){CAVNV.log("Netvision, USERACTION: flush() called");if(plugin_loaded){try{CAVUA.flushAll(true)}catch(e){}}},restart:function(){CAVNV.log("Netvision, USERACTION: restart() called");if(!plugin_loaded){this.init()}else{try{CAVUA.Queue.clearQ();CAVUA.updateConfig();fillInputNodes()}catch(e){}}}}}(CAVNV.window));window.IDB={cleanedPrevData:false,deleteErrorCount:0,maxDeleteError:5,pageInstance:-1,sendingRequest:0,idbCount:0,pendingArray:[],cb:[],flushcb:[],initing:false,oninit:function(fn,context){this.cb.push([fn,context])},init:function(){if(IDB.initing){return}var newItem=[{key:"",sid:"",pginst:"",url:"",module:"",data:"",idbCount:""}];window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction;window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;if(!window.indexedDB){return false}IDB.initing=true;var DBOpenRequest=window.indexedDB.open("nvOCX",3);DBOpenRequest.onerror=function(event){CAVNV.log("-----Error loading database.-----")};DBOpenRequest.onsuccess=function(event){CAVNV.log("-----Database initialised.-----");db=DBOpenRequest.result;IDB.flush(null,true);for(var z=0;z<IDB.cb.length;z++){IDB.cb[z][0].call(IDB.cb[z][1]||IDB)}IDB.cb=[]};DBOpenRequest.onupgradeneeded=function(event){var db=event.target.result;db.onerror=function(event){CAVNV.log("-----Error loading database.-----"+this.error)};try{db.deleteObjectStore("nvOCX")}catch(err){}var objectStore=db.createObjectStore("nvOCX",{keyPath:"key"});var keyPath="key";objectStore.createIndex("data",keyPath,{unique:true});CAVNV.log("-----Object store created-----")}},post:function(a,b,c){if(typeof(db)=="undefined"){IDB.idbCount=IDB.idbCount+1;var pkey=CAVNV.sid+"|"+CAVNV.pageInstance+"|"+IDB.idbCount;var newItem={key:pkey,sid:CAVNV.sid,pginst:CAVNV.pageInstance,url:c.url,module:c.module,data:c.data,idbCount:IDB.idbCount,time:Date.now()};IDB.pendingArray.push(newItem);this.oninit(function(){IDB.post()});return}else{if(c){c.url+="&nvcounter="+CAVNV.nvCounter;CAVNV.nvCounter++;IDB.idbCount=IDB.idbCount+1;var pkey=CAVNV.sid+"|"+CAVNV.pageInstance+"|"+IDB.idbCount;var newItem=[{key:pkey,sid:CAVNV.sid,pginst:CAVNV.pageInstance,url:c.url,module:c.module,data:c.data,idbCount:IDB.idbCount,time:Date.now()}]}if(IDB.pendingArray){for(var i=0;i<IDB.pendingArray.length;i++){var transaction1=db.transaction(["nvOCX"],"readwrite");transaction1.oncomplete=function(){CAVNV.log("Pending Array: IDB Modification Finished")};transaction1.onerror=function(){CAVNV.log("Pending Array: IDB Modification could not be finished"+transaction.error)};var objectStore1=transaction1.objectStore("nvOCX");var objectStoreRequest1=objectStore1.add(IDB.pendingArray[i]);objectStoreRequest1.onsuccess=function(event){CAVNV.log("Pending Array: Request successful.")};objectStoreRequest1.onerror=function(event){CAVNV.error("Error",event.target.error);if(event.target.error.name=="QuotaExceededError"){CAVNV.ocxFilter=1;IDB.flush()}}}IDB.pendingArray=[]}if(typeof(newItem)!="undefined"&&newItem[0]){var transaction2=db.transaction(["nvOCX"],"readwrite");transaction2.oncomplete=function(){CAVNV.log("Transaction Completed: POST Request")};transaction2.onerror=function(){CAVNV.log("Transaction not opened due to error: "+transaction2.error)};var objectStore=transaction2.objectStore("nvOCX");var objectStoreRequest=objectStore.add(newItem[0]);objectStoreRequest.onsuccess=function(event){CAVNV.log("Request successful.")};objectStoreRequest.onerror=function(event){CAVNV.error("Error",event.target.error);if(event.target.error.name=="QuotaExceededError"){CAVNV.ocxFilter=1;IDB.flush()}}}}return pkey},flush:function(flushAll,removePrevData,pendingFlushTime){if(typeof(db)=="undefined"){var f=(function(a,b){return function(){IDB.flush(a,b)}})(flushAll,removePrevData);this.oninit(f,this);return}if(!CAVNV.sid){!this.flushcb.length&&CAVNV.subscribe("after_beacon",function(){for(var z=0;z<IDB.cb.length;z++){IDB.flushcb[z][0].call(IDB.flushcb[z][1]||IDB)}IDB.flushcb=[]},this,null);this.flushcb.push([function(){IDB.flush(flushAll,removePrevData)},this]);return}flushAll=flushAll||false;if(typeof pendingFlushTime!="number"){pendingFlushTime=Date.now()}removePrevData=removePrevData||false;var sid=CAVNV.sid;var transaction=db.transaction(["nvOCX"],"readwrite");var objectStore=transaction.objectStore("nvOCX");function completeFn(){IDB.cleanedPrevData=true;IDB.sendingRequest=0;for(var z=0;z<flusharr.length;z++){var myRecord=flusharr[z];CAVNV.utils.sendData(myRecord.url,myRecord.data,myRecord.module,myRecord.contentType,myRecord.contentEncoding,flushAll?undefined:cb);IDB.sendingRequest++;delete flusharr[z]}CAVNV.log("Batch Completed");return}function errorFn(event){CAVNV.log("Flush: Transaction not opened due to error: "+event.target.error)}transaction.oncomplete=completeFn;transaction.onerror=errorFn;var flusharr=[];function cb(status){IDB.sendingRequest--;if(IDB.sendingRequest<=0){IDB.flush(false,false,pendingFlushTime)}}var myIndex=objectStore.index("data");var req=myIndex.openCursor(null,"prev");req.onsuccess=function(event){var cursor=event.target.result;if(cursor){if(pendingFlushTime>0){if(!cursor.value.time){var request1=cursor["delete"]();request1.onsuccess=function(){cursor["continue"]()};return}else{if(cursor.value.time>=pendingFlushTime){cursor["continue"]();return}}}if(cursor.value.sid==sid){if(removePrevData){return}if(!flushAll){if(!CAVNV.config.ocxFilter.batchSize){if(IDB.pageInstance!=cursor.value.pginst){if(flusharr.length>0){return}IDB.pageInstance=cursor.value.pginst}}else{if(CAVNV.config.ocxFilter.batchSize==flusharr.length){return}}}flusharr.push(cursor.value);try{var request=cursor["delete"]();request.onsuccess=function(){CAVNV.log("Deleted   SID------------->"+cursor.value.sid);IDB.deleteErrorCount=0;cursor["continue"]()};request.onerror=function(){CAVNV.log("Delete on current record is not commited moving to another");if(flusharr.length==1&&IDB.deleteErrorCount<IDB.maxDeleteError){IDB.deleteErrorCount++;IDB.flush()}}}catch(e){CAVNV.error("Error in deleting data: "+e)}}else{var request1=cursor["delete"]();request1.onsuccess=function(){CAVNV.log("Previous Record Discarded SID ------->"+cursor.value.sid);cursor["continue"]()}}}}},remove:function(key){if(typeof(db)=="undefined"){this.oninit(function(){IDB.flush(flushAll,removePrevData)});return}var transaction=db.transaction(["nvOCX"],"readwrite");var objectStore=transaction.objectStore("nvOCX");var request=objectStore["delete"](key);request.onsuccess=function(){CAVNV.log("IDB.remove successful for - "+key)};request.onerror=function(){console.error("IDB.remove failed for - "+key)}}};(function(h){var plugin_loaded=false,queue_threshold=10,config={},queue=[],unloading=false,struggling_event_counts={},check_and_enable_nd_instr=function(event){if(CAVNV.ndInfo.instrFlag){return}var ndConfig=CAVNV.config.autoNDInstr;if(!ndConfig||!ndConfig.enable||!ndConfig.events||!ndConfig.events.length){return}var strugglingEvent=0;for(var i=0;i<ndConfig.events.length;i++){var es=ndConfig.events[i];if(es.e==event){struggling_event_counts=boomr.cav_nv_get_session_data("event_counts");struggling_event_counts=struggling_event_counts||{};if(struggling_event_counts.hasOwnProperty(event)){struggling_event_counts[event]++}else{struggling_event_counts[event]=1}boomr.cav_nv_set_session_data("event_counts",struggling_event_counts);if(es.g===undefined||struggling_event_counts[event]>=es.g){strugglingEvent=1;break}}}if(strugglingEvent==1){boomr.cav_nv_enable_nd(0)}},applyPattern=function(event,data){var patConf=CAVNV.eDataPattern;var m=[];if(patConf.length){for(var i=0;i<patConf.length;i++){if(patConf[i].e!=event){continue}if(!patConf[i].cp){try{var regex=new RegExp(patConf[i].p);patConf[i].cp=regex}catch(e){CAVNV.log(e);patConf[i].cp=patConf[i].p}}m=JSON.stringify(data.match(patConf[i].cp));data=data.replace(patConf[i].cp,"##**##");break}}return{match:m,data:data}},cav_nv_log_event=function(nvEvent,data){if(typeof nvEvent!=="string"){return}var time=new Date().getTime();if(nvEvent==="customMetrics"){CAVNV.log("customMetrics added -"+data);queue.push({time:time,event:nvEvent,data:data,field:""});post();return}var data_str="{}";var data_fields={};if(typeof data!=="undefined"||typeof data!==null){if(typeof data==="object"){try{data_str=JSON.stringify(data);data_fields=applyPattern(nvEvent,data_str);data_str=data_fields.data}catch(e){queue.push({time:time,event:nvEvent,data:"{}",field:""});post()}}else{data_str=data.toString();data_fields=applyPattern(nvEvent,data_str);data_str=data_fields.data}}var e=CAVNV.config.ocxFilter.events||[];if(nvEvent!="userSegmentMask"&&nvEvent!="LoginID"&&nvEvent!="SessionID"&&nvEvent!="OrderTotal"&&nvEvent!="transactionID"&&nvEvent!="variationData"&&nvEvent!="Timing"&&(e.indexOf(nvEvent)!=-1||e.length==0)){check_and_enable_nd_instr(nvEvent);if(CAVNV.ocxFilter==0){CAVNV.set_session_flag("ocxFilter",1);CAVNV.ocxFilter=1;IDB.flush()}}CAVNV.log("Netvision, EventLogger: evnet "+nvEvent+" Fired. user data = "+data_str);queue.push({time:time,event:nvEvent,data:data_str,field:data_fields.match});post()},post=function(force){if(queue.length==0){return}force=force||false;if(queue.length>=queue_threshold||force||unloading){if(!CAVNV.sid||CAVNV.pageInstance==undefined||CAVNV.pageIndex==undefined){CAVNV.log("NetVision, EventLogger: failed to send events, sid, pageIndex or pageInstance not set.");return}var prefix=CAVNV.sid+"|"+CAVNV.pageIndex+"|"+CAVNV.pageInstance;var msg="",queueToSend=[];for(var i=0;i<queue.length;i++){var cur_time=parseInt(CAVNV.utils.nv_time(queue[i].time)/1000);var data=prefix+"|"+cur_time+"|"+queue[i].event+"|"+queue[i].data;if(queue[i].event!="variationData"&&queue[i].event!="customMetrics"&&queue[i].event!="LoginID"&&queue[i].event!="SessionID"&&queue[i].event!="transactionID"&&queue[i].event!="OrderTotal"&&queue[i].event!="userSegmentMask"){data+="|"+queue[i].field}queueToSend.push(data)}CAVNV.log("NetVision, EventLogger: msg = "+msg);var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=el&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+CAVNV.pageIndex+"&lts="+CAVNV.lts;if(CAVNV.messageVersion){CAVNV.utils.sendData(url,JSON.stringify(queueToSend),"el")}else{CAVNV.utils.sendData(url,queueToSend.join("\n")+"\n","el")}queue=[]}};CAVNV.plugins.EL={init:function(){if(plugin_loaded){return true}var cb=function(){CAVNV.log("Netvision, EventLogger: page is unloading sending Events data");unloading=true;post()};CAVNV.subscribe("page_unload",cb,null,this);plugin_loaded=true},is_complete:function(){return plugin_loaded},flush:function(){CAVNV.log("Netvision, EventLogger: flush() called");if(plugin_loaded){post(true)}},restart:function(){CAVNV.log("Netvision, EventLogger: restart() called");if(!plugin_loaded){this.init()}else{queue=[];unloading=false}}};h.cav_nv_log_event=cav_nv_log_event;CAVNV.cav_nv_log_event=cav_nv_log_event}(CAVNV.window));(function(h){var d=h.document;var idle_time=1000;function MutationDetector(){this.running_mutation=0;this.pending_mutation_events=[];this.timer=null}MutationDetector.prototype.mutation_callback=function(records){if(md.running_mutation<=0){return true}md.clearTimeout();var l=md.pending_mutation_events.length-1;var wait_flag=false;if(l<0||!md.pending_mutation_events[l]){return true}if(records&&records.length){md.pending_mutation_events[l].resource.timing.domComplete=new Date().getTime();var x,y,z;for(var z=0;z<records.length;z++){if(records[z].type=="attributes"){wait_flag|=md.wait_for_node(records[z].target,l)}else{if(records[z].type=="childList"){y=records[z].addedNodes.length;for(x=0;x<y;x++){wait_flag|=md.wait_for_node(records[z].addedNodes[x],l)}}}}}if(!wait_flag){md.setTimeout(idle_time,l)}return true};MutationDetector.prototype.wait_for_node=function(node,eventIdx){var wait_flag=false,A,n,j,a,l,i;var regex=new RegExp("^(SCRIPT"+(CAVNV.config.SPA.ignoreFrame?"":"|IFRAME")+(CAVNV.config.SPA.ignoreImg?"":"|IMG")+")$");if(node.nodeName.match(regex)||(node.nodeName==="LINK"&&node.rel&&node.rel.match(/\<stylesheet\>/i))){if(node._nv&&node._nv.end){A=true}node._nv={start:new Date().getTime(),res:eventIdx};j=node.src||node.href;if(j&&j!=""){var lastIdx=j.lastIndexOf("#");if(lastIdx!=-1){j=j.substring(0,lastIdx)}}if(node.nodeName==="IMG"){if((node.naturalWidth||node.complete)&&!A){if(!node.naturalWidth&&node.complete){CAVNV.log("CAVNV.SPA.Trace IMG Failed : "+node.src)}return false}if(node.getAttribute("src")===""){return false}}if(!j||j.match(/^(about:|javascript:)/i)){return false}var m_event=md.pending_mutation_events[eventIdx];if(!m_event){return false}m_event.urls=m_event.urls||{};if(m_event.urls[j]){return false}if(node.nodeName==="SCRIPT"){return false}if(!m_event.resource.url&&node.nodeName==="SCRIPT"){m_event.resource.url=j}node.addEventListener("load",function(e){md.load_callback(e)});node.addEventListener("error",function(e){md.load_callback(e)});m_event.nodes_to_wait++;m_event.resources.push(node);m_event.urls[j]=1;wait_flag=true;CAVNV.log("CAVNV.SPA.Trace "+node.tagName+"("+eventIdx+") :"+(node.src||node.href))}else{if(node.nodeType===Node.ELEMENT_NODE){var img=node.getElementsByTagName("IMG");if(img&&img.length){a=img.length;for(n=0;n<a;n++){wait_flag|=md.wait_for_node(img[n],eventIdx)}}}}return wait_flag};MutationDetector.prototype.load_callback=function(event){var node,eventIdx;node=event.target||event.srcElement;if(!node||!node._nv){return}if(node._nv.end){return}node._nv.end=new Date().getTime();eventIdx=node._nv.res;CAVNV.log("CAVNV.SPA.Trace Complete"+node.tagName+":"+(node.src||node.href));this.load_finished(eventIdx)};MutationDetector.prototype.load_finished=function(eventIdx){var m_event=this.pending_mutation_events[eventIdx];if(!m_event){return}m_event.nodes_to_wait--;CAVNV.log("CAVNV.SPA.Trace - complete("+eventIdx+") "+m_event.nodes_to_wait);if(m_event.nodes_to_wait<=0){m_event.resource.timing.loadEventEnd=new Date().getTime();if(m_event.type==="spa"){this.setTimeout(idle_time,eventIdx)}else{this.eventComplete(eventIdx)}}};MutationDetector.prototype.eventComplete=function(eventIdx){var m_event=this.pending_mutation_events[eventIdx];if(!m_event||m_event.complete){return}m_event.complete=true;this.running_mutation--;if(this.running_mutation<0){this.running_mutation=0}if(!this.running_mutation){xhrCaptureFlag=false}this.clearTimeout();if(m_event.type==="spa"){h.cav_nv_ajax_pg_end(m_event.resource.url,null,{__nv:m_event})}else{if(m_event.type==="xhr"){}}};MutationDetector.start=function(){if(!MutationObserver){return}var moconfig={childList:true,attributes:true,subtree:true,attributeFilter:["src","href"]};MutationDetector.observer=new MutationObserver(md.mutation_callback);MutationDetector.observer.observe(d,moconfig);if(config.XHRModule.enable){MutationDetector.enableXHRDetector()}};MutationDetector.stop=function(){if(MutationDetector.observer){MutationDetector.observer.disconnect();MutationDetector.observer=null}};MutationDetector.prototype.clearTimeout=function(){if(this.timer){clearTimeout(this.timer);this.timer=null}};MutationDetector.prototype.setTimeout=function(duration,eventIdx){var md=this;if(duration<=0){return}this.clearTimeout();this.timer=setTimeout(function(){md.timeout(eventIdx)},duration)};MutationDetector.prototype.timeout=function(eventIdx){this.clearTimeout();var m_event=this.pending_mutation_events[eventIdx];if(m_event&&(m_event.type==="spa"||m_event.type==="xhr")){if(m_event.type==="spa"&&m_event.nodes_to_wait<=0){this.eventComplete(eventIdx)}else{if(m_event.type==="xhr"){this.eventComplete(eventIdx)}}}else{this.pending_mutation_events[eventIdx]=undefined;if(this.running_mutation>0){this.running_mutation--}}};MutationDetector.enableXHRDetector=function(){var xmclient;if(!MutationDetector.xpclient){var xpclient=new XMLProfiler(config.XHRModule.options,h,h.document);if(!xpclient.xmlp){return}xpclient.addEventListener("ajaxSend",function(xhr){if(!xhr||!xhr.__nv||!xhrCaptureFlag){return}var record={timing:{},initator:"spa"};var idx=-1;if(md.running_mutation){idx=md.addEventResource(record)}CAVNV.log("CAVNV.SPA.Trace XHR("+idx+") :"+xhr.__nv.url);xhr.__nv.sparecord=record},md);xpclient.addEventListener("ajaxComplete",function(xhr){if(!xhr||!xhr.__nv||!xhr.__nv.sparecord){return}var record=xhr.__nv.sparecord;CAVNV.log("CAVNV.SPA.Trace Complete XHR:"+xhr.__nv.url);if(record.index>-1){md.load_finished(record.index)}else{md.addEvent(record)}},md)}};MutationDetector.disableXHRDetector=function(){if(MutationDetector.xpclient){MutationDetector.xpclient.destroy();MutationDetector.xpclient=null}};MutationDetector.prototype.addEvent=function(entry){var event={type:entry.initiator,resource:entry,resources:[],nodes_to_wait:0,complete:false};var count=this.pending_mutation_events.length;var prevEvent=null;for(var z=count-1;z>=0;z--){if(this.pending_mutation_events[z]&&!this.pending_mutation_events[z].complete){prevEvent=this.pending_mutation_events[z];break}}if(prevEvent){if(prevEvent.type==="spa"){if(event.type==="xhr"){return null}else{if(event.type==="spa"){if(entry.timing.requestStart-prevEvent.resource.timing.requestStart<1000){prevEvent.url=entry.url;return}}}}}if(prevEvent){this.pending_mutation_events[z]=event;count=z}else{this.pending_mutation_events.push(event);this.running_mutation++}if(!MutationDetector.observer){if(entry.url&&entry.timing.loadEventEnd){eventComplete(count)}return null}else{if(event.type==="spa"){this.setTimeout(idle_time,count)}else{this.setTimeout(100,count)}return count}};MutationDetector.prototype.addEventResource=function(entry){if(!entry){return -1}var eventIdx=this.pending_mutation_events.length-1;if(eventIdx<0){return -1}if(!this.pending_mutation_events[eventIdx]){return -1}this.pending_mutation_events[eventIdx].nodes_to_wait++;entry.index=eventIdx;return eventIdx};var md=new MutationDetector();var currentLocation=null;var xhrCaptureFlag=false;var supportedSpaFramworks=["angular","history"];var angularStartSPA=function(ng,rootScope){if(!ng){ng=h.angular;if(!ng){return false}}if(!rootScope){var e=d.getElementsByTagName("body")[0];var scope=ng.element(e).scope();if(scope){rootScope=scope.$root}else{if(ng.element(e).injector()){rootScope=ng.element(e).injector().get("$rootScope")}}if(!rootScope){return false}}rootScope.$on("$routeChangeStart",function(event,nextRoute,currentRoute){CAVNV.log("routeChangeStart: url - "+nextRoute.templateUrl);CAVNV.plugins.SPA.setLocation(nextRoute.templateUrl);CAVNV.plugins.SPA.routeChange()});rootScope.$on("$locationChangeStart",function(event,newUrl,oldUrl){CAVNV.log("locationChangeStart: - "+newUrl);CAVNV.plugins.SPA.setLocation(newUrl);CAVNV.plugins.SPA.routeChange()});return true};var hookHash=function(){if(!(h.addEventListener&&h.HashChangeEvent)){CAVNV.info("CAVNV - HashChangeEvent not found");return false}h.addEventListener("hashchange",function(e){CAVNV.info("CAVNV - HashChangeEvent, oldurl - "+e.oldURL+", newurl - "+e.newURL);CAVNV.plugins.SPA.setLocation(e.newURL);CAVNV.plugins.SPA.routeChange()});return true};var hookHistory=function(){if(!h.history){return false}var history=h.history;var orig_history={pushState:history.pushState};history.pushState=function(state,title,url){CAVNV.info("CAVNV - history.pushState,  URL - "+url+" and title - "+title+" and location - "+d.location.href);orig_history.pushState.apply(this,arguments);if(url){CAVNV.plugins.SPA.setLocation(d.location.href)}CAVNV.plugins.SPA.routeChange()};return true};var config={framework:"angular",XHRModule:{enable:true,options:{captureCrossDomain:false,filters:{mode:"blacklist",entry:[]}}},ignoreFrame:true,ignoreImg:false};CAVNV.plugins.SPA={init:function(c){if(!h.MutationObserver||!h.XMLHttpRequest){CAVNV.log("Supported library not present for MutationDetector");return}var kw=["elementList","XHRModule","framework"];CAVNV.utils.pluginConfig(config,c,"SPA",kw);var frameworkAttached=false;if(config.framework){if(typeof config.framework=="string"){config.framework=[config.framework]}for(var z=0;z<config.framework.length;z++){if(config.framework[z]=="angular"){if(angularStartSPA(h.angular)){frameworkAttached=true;break}}else{if(config.framework[z]=="history"){if(hookHistory()){frameworkAttached=true;CAVNV.log("CAVNV.plugins.SPA init() : history plugin enabled");break}}else{if(config.framework[z]=="hashchange"){if(hookHash()){frameworkAttached=true;CAVNV.log("CAVNV.plugins.SPA init() : hashchange plugin enabled");break}}}}}}if(!frameworkAttached){return}MutationDetector.start()},is_complete:function(){return true},getMutationDetector:function(){return md},setLocation:function(url){currentLocation=url},routeChange:function(){var url=currentLocation?currentLocation:h.document.location.href;var event={timing:{requestStart:new Date().getTime()},initiator:"spa",url:url};event.index=this.getMutationDetector().addEvent(event);if(event.index!=undefined&&event.index!=null){h.cav_nv_ajax_pg_start(url,null,{})}xhrCaptureFlag=true}}}(CAVNV.window));(function(h){var config={captureCrossDomain:false,captureRSCtiming:true,correlationHeader:null,filters:{mode:"blacklist",entry:[]},captureHeader:false,wlHeaders:[],blHeaders:[],logHeaderOnFailure:true,logPDOnFailure:true,capturePostData:false,captureResponse:false,ajaxFailureEvent:true,logFailedAjax:true,maskPattern:[]},active=false,xmlp,ajaxFailed=false,queue=[],threshold=15;var defaultContentType=[["application/json",/json/],["application/x-www-form-urlencoded",/urlencoded/],["application/xml",/xml/]];function post(event){queue.push(event);send()}function send(force){force=force||false;if(!queue.length||!CAVNV.sid){return}if(queue.length>=threshold||force){var queueToSend=[];var data="";queue.forEach(function(entry){var timingData=entry.data.timings;for(var e in timingData){timingData[e]=CAVNV.utils.nv_time(timingData[e])}var resp=(isNaN(parseInt(entry.responseTime))==true)?0:parseInt(entry.responseTime);if(entry.url.length>1024){return}var msg=entry.status+"|"+entry.method.toUpperCase()+"|"+entry.bytesTransfred+"|"+resp+"|"+encodeURIComponent(JSON.stringify(entry.data))+"||"+entry.exceptionCount+"|"+entry.fpInstance+"|{-1}";CAVNV.log("ANA : Sending XHR at "+entry.t+" ");data=encodeURIComponent(entry.url)+"|"+parseInt(parseInt(CAVNV.utils.nv_time(entry.startTime))/1000)+"|"+msg+"|"+(entry.correlationId||"");queueToSend.push(data)});var geo_id=CAVNV.geo_id||CAVNV.get_session_flag("GeoId");var location_id=CAVNV.location_id||CAVNV.get_session_flag("LocationId");var access_type_id=CAVNV.access_type_id||CAVNV.get_session_flag("AccessTypeId");var xdata2=CAVNV.pageIndex+"|"+CAVNV.channel+"|"+CAVNV.browser_id+"|"+geo_id+"|"+location_id+"|"+access_type_id+"|"+CAVNV.store+"|"+CAVNV.terminal;var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=xhrdata&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&d="+xdata2+"&lts="+CAVNV.lts;if(CAVNV.messageVersion==1){CAVNV.utils.sendData(url,JSON.stringify(queueToSend),"xhrdata")}else{CAVNV.utils.sendData(url,queueToSend.join("\n")+"\n","xhrdata")}queue=[]}}function start(){var filters=config.filters;config.filters={mode:"blacklist",entry:[]};xmlp=new XMLProfiler(config,h,h.document);config.filters=filters;if(!xmlp.xmlp){return}xmlp.addEventListener("ajaxComplete",function(xhr){setTimeout(function(){handleXHRRequestComplete(xhr)},0)},this);xmlp.addEventListener("ajaxError",function(xhr){if(!ajaxFailed){CAVNV.cav_nv_log_event("AjaxError",{url:xhr.__nv.url,status:xhr.__nv.status,method:xhr.__nv.method});ajaxFailed=true}},this);active=true}function xhrbandwidth(){if(totalDuration){var xhrObj={nv_tBytesxhr:totalBytes,nv_tDurationxhr:totalDuration};CAVNV.cav_nv_set_session_data("xhrbw",xhrObj)}}function handleXHRRequestComplete(xhr){if(!xhr||!xhr.__nv){return}if(config.logFailedAjax==false||!XMLProfiler.isFailedStatus(xhr.__nv.status)){if(XMLProfiler.isFiltered(xhr.__nv.url,config.filters)){CAVNV.log("handleXHRRequestComplete: XHR Entry ("+xhr.__nv.url+") Filtered");return}}else{CAVNV.log("handleXHRRequestComplete: failed XHR request ("+xhr.__nv.url+"), logging")}if(xhr.headers){xhr.getResponseHeader=function(name){return xhr.headers[name.toLowerCase()]}}var xhrdata={};xhrdata.method=xhr.__nv.method;xhrdata.url=xhr.__nv.url;xhrdata.status=xhr.__nv.status;var failed=false;if(xhrdata.status/100==5||xhrdata.status==403){failed=true}xhrdata.startTime=xhr.__nv.timing.requestStart;if(xhr.__nv.timing.requestStart&&xhr.__nv.timing.loadEventEnd&&xhr.__nv.timing.loadEventEnd>xhr.__nv.timing.requestStart){xhrdata.responseTime=(xhr.__nv.timing.loadEventEnd-xhr.__nv.timing.requestStart)}else{xhrdata.responseTime=0}var clength=-1;if(xhr.__nv.nco){try{clength=xhr.getResponseHeader("Content-Length")}catch(e){clength=-1}}if(clength&&clength>0){xhrdata.bytesTransfred=parseInt(clength)}else{xhrdata.bytesTransfred=-1}if(xhr.__nv.timing.header_received&&xhr.__nv.timing.loadEventEnd&&xhr.__nv.timing.loadEventEnd>xhr.__nv.timing.header_received&&clength>0){xhrdata.downloadTime=(xhr.__nv.timing.loadEventEnd-xhr.__nv.timing.header_received);totalDuration+=xhrdata.downloadTime;xhrdata.bytesTransfred=parseInt(clength);totalBytes+=xhrdata.bytesTransfred}var ndHeaderValue=null;if(xhr.__nv.nco){ndHeaderValue=xhr.getResponseHeader(CAVNV.ndHeader)}xhrdata.fpInstance=-1;xhrdata.exceptionCount=0;if(ndHeaderValue){var fields=ndHeaderValue.split(", ");if(fields.length>1){ndHeaderValue=fields[fields.length-1]}fields=ndHeaderValue.split("_");var fpId=fields[0],category=fields[2],ndInfo=CAVNV.ndInfo,instrFlag=(!!(parseInt(fields[3])))||ndInfo.instrFlag;if(!isNaN(fpId)&&(instrFlag||(category!=9&&category!=10))){xhrdata.fpInstance=fields[0];if(!isNaN(category)){CAVNV.utils.logNDEvent(category)}}}xhrdata.data={};xhrdata.data.statusText=xhr.statusText;xhrdata.data.query=xhr.__nv.query;xhrdata.data.url=xhr.__nv.url;xhrdata.data.initiator=xhr.__nv.initiator;if(failed){xhrdata.data.responseText=xhr.responseText}else{if(config.captureResponse&&xhr.responseText){var ctype;if(xhr.__nv.nco){ctype=xhr.getResponseHeader("Content-Type")}if(ctype){for(var z=0;z<defaultContentType.length;z++){if(defaultContentType[z][1].test(ctype)){break}}if(z!=defaultContentType.length&&xhr.responseText){xhrdata.data.responseText=xhr.responseText;xhrdata.data.contentType=ctype}}}}if(xhrdata.data.responseText){xhrdata.data.responseText=maskXHRDATA(ctype,1,xhrdata.data.responseText)}if(config.capturePostData||(failed&&config.logPDOnFailure)){if(xhr.__nv.postData){xhrdata.data.postData=xhr.__nv.postData}}if(xhrdata.data.postData){xhrdata.data.postData=maskXHRDATA(xhr.__nv.rct,2,xhrdata.data.postData)}if(config.correlationHeader&&xhr.__nv.nco){try{xhrdata.correlationId=xhr.getResponseHeader(config.correlationHeader)}catch(e){}}xhrdata.data.timings=xhr.__nv.timing;if(config.captureHeader==true||(failed&&config.logHeaderOnFailure)){if(!xhr.headers){var headers=xhr.getAllResponseHeaders();if(headers){xhrdata.data.headers=headers.split("\r\n")}}else{var headers=[];for(var k in xhr.headers){headers.push(k+": "+xhr.headers[k])}xhrdata.data.headers=headers}if(!failed&&config.wlHeaders.length>0){var h=[];for(var i=0;i<xhrdata.data.headers.length;i++){for(var j=0;j<config.wlHeaders.length;j++){if(xhrdata.data.headers[i].indexOf(config.wlHeaders[j].toLowerCase()+":")==0){h.push(xhrdata.data.headers[i]);break}}}xhrdata.data.headers=h}if(config.blHeaders.length>0){for(var i=0;i<xhrdata.data.headers.length;i++){for(var j=0;j<config.blHeaders.length;j++){if(xhrdata.data.headers[i].indexOf(config.blHeaders[j].toLowerCase()+":")==0){delete xhrdata.data.headers[i];break}}}for(var i=0;i<xhrdata.data.headers.length;i++){if(xhrdata.data.headers[i]==undefined||xhrdata.data.headers[i]==""){xhrdata.data.headers.splice(i,1);i--}}}}post(xhrdata);CAVNV.plugins.CHECKPOINT.xhrCheckpoint(xhr)}function maskXHRDATA(cType,type,data){var first=false;var jsonData;cType=cType||"plain/text";var rules=config.maskPattern.slice();rules.forEach(function(rule){if(rule.t&type){if(rule.P){if(cType&&cType.indexOf("json")!=-1){if(!first){try{jsonData=JSON.parse(data);first=true}catch(e){var j=0;for(var i=0;i<rules.length;i++){if(rules[i].P){j++}else{break}}rules.splice(0,j-1);return}}idArray=rule.P.split(",");maskJson(jsonData,0)}else{if(cType&&cType.indexOf("application/x-www-form-urlencoded")!=-1){var indexOfParam=data.indexOf(rule.P+"=");while(indexOfParam!=-1){if(indexOfParam==0||data.charAt(indexOfParam-1)=="&"||data.charAt(indexOfParam-1)=="?"){data=data.substring(0,indexOfParam+rule.P.length)+"******"+data.indexOf("&",indexOfParam)!=-1?data.substring(data.indexOf("&",indexOfParam),data.length):"";break}else{indexOfParam=data.indexOf(rule.P+"=",indexOfParam+1)}}}}}else{if(rule.r){if(first){data=JSON.stringify(jsonData);first=false}try{data=data.replace(rule.r,"******")}catch(e){CAVNV.log("SyntaxError occured in masking 'xhrData.url' on regEx basis. Moving to mask captureResponse");CAVNV.error(e)}}}}});if(first){data=JSON.stringigy(jsonData)}return data}var idArray=[];function maskJson(obj,idx){if(Array.isArray(obj)){for(var i=0;i<obj.length;i++){maskJson(obj[i],idx)}return}if(obj[idArray[idx]]){if(idx==idArray.length-1){obj[idArray[idx]]="******"}else{maskJson(obj[idArray[idx]],++idx)}}}CAVNV.plugins.AjaxMonitor={init:function(c){if(active==true){return}var kw=Object.keys(config);CAVNV.utils.pluginConfig(config,c,"AjaxMonitor",kw);var pBasedRule=[],rBasedRule=[];config.maskPattern.forEach(function(rule){if(!CAVNV.utils.pagePresentInList(rule.p)){return}if(rule.P){pBasedRule.push(rule)}else{rBasedRule.push(rule)}});if(pBasedRule.length||rBasedRule.length){config.maskPattern=pBasedRule.concat(rBasedRule)}start();var cb=function(){send(true);xhrbandwidth()};CAVNV.subscribe("page_unload",cb,null,this)},is_complete:function(){return true},flush:function(){if(active){send(true)}},restart:function(){ajaxFailed=false;queue=[];var cb=function(){send(true);xhrbandwidth()}},addIframe:function(w){if(xmlp!=null){var itrIframe=false;xmlp.xmlp.enable(w,itrIframe)}}}})(CAVNV.window);(function(h){var plugin_loaded=false;var plugin_initialized=false;var nvObserver=null;var xmlp=null;var config={compressDomchanges:true,filterUnexpected:true,filterElement:[],XHRModule:{enable:true,options:{captureCrossDomain:false,filters:{mode:"blacklist",entry:[]}}},idleTime:2000};var idleTimer=-1;var ana=NVDOMObserver;var mutationState={type:ana.USERACTION_MUTATION,state:ana.EXPECTED_MUTATION,time:new Date().getTime()},dw2=CAVNV.plugins.DOMWATCHER2;CAVNV.plugins.DOMWATCHER2={init:function(c){if(CAVNV.plugins.USERACTION.is_active()==false){plugin_loaded=true;return}if(plugin_initialized){return this}var kw=["filterUnexpected","compressDomchanges","XHRModule","filterElement"];CAVNV.utils.pluginConfig(config,c,"DOMWATCHER2",kw);if(config.XHRModule&&config.XHRModule.enable==true){xmlp=new XMLProfiler(config.XHRModule.options,h,h.document);if(xmlp.xmlp){xmlp.addEventListener("ajaxComplete",function(xhr){CAVNV.plugins.DOMWATCHER2.updateMutationState(ana.XHR_MUTATION)})}}var list=[],pageid;for(var x=0;x<config.filterElement.length;x++){pageid=config.filterElement[x].pageid||-1;if(CAVNV.utils.pagePresentInList(pageid)){list.push(config.filterElement[x])}}if(CAVNV.config.encryptedElement){CAVNV.encryptedElement=CAVNV.config.encryptedElement.filter(function(elem){pageid=elem.pageid||-1;if(CAVNV.utils.pagePresentInList(pageid)){return elem}})}CAVNV.encryptedElement.push({id:".nvEncrypted",mode:1,pageid:"-1"});CAVNV.encryptedElement.push({id:".nvSensitive",mode:2,pageid:"-1"});var me=this;function initObserver(){if(nvObserver){return}nvObserver=new NVDOMObserver(h.document,list);me.updateMutationState();if(CAVNV.retryPDWithIDB){CAVNV.send_dom(false,0,me.getDOM(false),true)}}plugin_loaded=true;plugin_initialized=true;CAVNV.subscribe("page_ready",function(){initObserver()},null,null);CAVNV.subscribe("page_unload",function(){if(nvObserver){nvObserver.send(true)}},null,null);return this},is_complete:function(){return plugin_loaded},flush:function(){CAVNV.log("Netvision, DOMWATCHER2: flush() called");if(nvObserver){nvObserver.send(true)}},stop:function(){if(nvObserver){nvObserver.disconnect();nvObserver=null}},restart:function(){CAVNV.log("Netvision, DOMWATCHER2: restart() called");if(!plugin_initialized){this.init()}else{if(nvObserver){nvObserver.disconnect();nvObserver.clearQ();nvObserver=null}var list=[],pageid;for(var x=0;x<config.filterElement.length;x++){pageid=config.filterElement[x].pageid||-1;if(CAVNV.utils.pagePresentInList(pageid)){list.push(config.filterElement[x])}}if(CAVNV.config.encryptedElement){CAVNV.encryptedElement=CAVNV.config.encryptedElement.filter(function(elem){pageid=elem.pageid||-1;if(CAVNV.utils.pagePresentInList(pageid)){return elem}})}nvObserver=new NVDOMObserver(h.document,list);if(CAVNV.retryPDWithIDB){CAVNV.send_dom(false,0,this.getDOM(false),true)}try{CAVUA.updateConfig()}catch(e){}}},getDOM:function(update,diff){if(nvObserver){var domData=nvObserver.getDOM(update,diff);if(!!CAVNV.window.NBridge){domData[0].type="webview";domData[0].position={top:CAVNV.webViewTop,left:CAVNV.webViewLeft,height:CAVNV.webViewHeight,width:CAVNV.webViewWidth}}return JSON.stringify(domData)}return null},updateMutationState:function(mutationInitiator){mutationState.type=mutationInitiator;mutationState.state=ana.EXPECTED_MUTATION;mutationState.time=new Date().getTime();if(idleTimer!=-1){clearTimeout(idleTimer);idleTimer=-1}idleTimer=setTimeout(function(){mutationState.state=ana.UNEXPECTED_MUTATION;mutationState.type=ana.NA},config.idleTime)},getMutationState:function(){return mutationState},getConfig:function(){return config},getID:function(node){if(nvObserver){return nvObserver.getID(node)}return -1},getNode:function(id){if(nvObserver){return nvObserver.getNode(id)}return null}}}(CAVNV.window));function isVisible(selector){try{var x=CAVNV.window.document.querySelector(selector);if(!x){return false}if(window.getComputedStyle(x).visibility==="visible"){return true}}catch(e){CAVNV.error("error in Selector"+e);return false}}function checkDomSelector(selector){try{var x=CAVNV.window.document.querySelector(selector);if(x){return true}}catch(e){CAVNV.error("error in checkDomSelector"+e);return false}return false}(function(window,document){var cbMap={};var msFn=(function(){var proto=document.createElement("div");return"function"==typeof proto.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof proto.mozMatchesSelector?"mozMatchesSelector":"function"==typeof proto.msMatchesSelector?"msMatchesSelector":null})();function clickRfn(){document.addEventListener("click",handlersState.CLICK[4],true);return true}function clickURFn(){document.removeEventListener("click",handlersState.CLICK[4],true)}function clickH(event){var target=event.target;var es=handlersState.CLICK[1];for(var i=0;i<es.length;i++){if(target[msFn](es[i][1].domSelector)){es[i][0].triggered(es[i][1],target)}}}function changeRFn(){document.addEventListener("change",handlersState.INPUT_CHANGE[4]);return true}function changeURFn(){document.removeEventListener("change",handlersState.INPUT_CHANGE[4])}function changeH(event){var target=event.target;var es=handlersState.INPUT_CHANGE[1];for(var i=0;i<es.length;i++){if(target[msFn](es[i][1].domSelector)){es[i][0].triggered(es[i][1],target)}}}function hashRFn(){window.addEventListener("hashchange",handlersState.HASHCHANGE[4]);return true}function hashURFn(){window.removeEventListener("hashchange",handlersState.HASHCHANGE[4])}function hashH(event){var target={oldURL:event.oldURL,newURL:event.newURL};var es=handlersState.HASHCHANGE[1];for(var i=0;i<es.length;i++){es[i][0].triggered(es[i][1],target)}}function timeoutRFn(){var arr=handlersState.TimeOut[1];var entry=arr[arr.length-1];function handler(){var arr2=handlersState.TimeOut[1];var found=false;for(var j=0;j<arr2.length;j++){if(arr2[j][0]==entry[0]&&arr2[j][1]==entry[1]){arr2[j][0].triggered(arr2[j][1]);found=true;break}}if(found){for(var j=0;j<arr2.length;j++){if(arr2[j][0]==entry[0]&&arr2[j][1]==entry[1]){if(!arr2[j][2]){arr2[j][2]=setTimeout(handler,parseInt(arr2[j][1].timeOut))}break}}}}entry[2]=setTimeout(handler,parseInt(entry[1].timeOut));return false}function timeoutURFn(){}function timeoutH(){}function isVisible(selector){var e=CAVNV.window.document.querySelector(selector);if(!e){return false}return !!e.offsetParent}function visChangeRFn(){var arr=handlersState.VISIBILITY_CHANGE[1];var entry=arr[arr.length-1];var lastVisStatus=isVisible(entry[1].domSelector);function handler(){var visStatus=isVisible(entry[1].domSelector);if(visStatus!=lastVisStatus){lastVisStatus=visStatus;clearInterval(entry[2]);entry[0].triggered(entry[1],lastVisStatus)}else{return}for(var i=0;i<arr.length;i++){if(arr[i][0]==entry[0]&&arr[i][1]==entry[1]){entry=arr[i];entry[2]=setInterval(handler,100);break}}}entry[2]=setInterval(handler,100);return false}function visChangeURFn(){}function visChangeH(){}function getText(selector){var e=document.querySelector(selector);if(e){return e.textContent}return null}function conChangeRFn(){var arr=handlersState.CONTENT_CHANGE[1];var entry=arr[arr.length-1];var lastText=getText(entry[1].domSelector);function handler(){var text=getText(entry[1].domSelector);if(text!=lastText){lastText=text;clearInterval(entry[2]);entry[0].triggered(entry[1],document.querySelector(entry[1].domSelector))}else{return}for(var i=0;i<arr.length;i++){if(arr[i][0]==entry[0]&&arr[i][1]==entry[1]){entry=arr[i];entry[2]=setInterval(handler,100);break}}}entry[2]=setInterval(handler,100);return false}function conChangeURFn(){}function conChangeH(){}var xhrClient=null;var conf={captureCrossDomain:false};function initXHR(){if(xhrClient!==null){return}try{xhrClient=new XMLProfiler(conf,window,document);if(!xhrClient&&!xhrClient.xmlp){xhrClient=null}}catch(e){}xhrClient.addEventListener("ajaxComplete",handlersState.XHR_COMPLETE[4]);xhrClient.addEventListener("ajaxError",handlersState.XHR_FAILED[4])}function distroryXHR(){if(!handlersState.XHR_COMPLETE[1]&&!handlersState.XHR_FAILED){xhrClient.xmlp.removeClient(xhrClient);xhrClient=null}}function comparePath(url,pattern){if(typeof pattern==="string"){if(pattern.charAt(0)=="/"){pattern=pattern.replace(/^\//,"").replace(/\/$/,"")}try{pattern=new RegExp(pattern)}catch(e){return false}}return pattern.test(url.pathname)}function xhrHandler(xhr,type){var url=XMLProfiler.getURL(xhr.__nv.url);var list=handlersState[type][1];for(var i=0;i<list.length;i++){if(comparePath(url,list[i][1].urlPattern)){try{xhr.__nv.req_url=url;list[i][0].triggered(list[i][1],xhr.__nv)}catch(e){}}}}function xhrCompRFn(){initXHR();return true}function xhrCompURFn(){distroryXHR()}function xhrCompH(xhr){xhrHandler(xhr,"XHR_COMPLETE")}function xhrFailRFn(){initXHR();return true}function xhrFailURFn(){distroryXHR()}function xhrFailH(xhr){xhrHandler(xhr,"XHR_FAILED")}var handlersState={CLICK:[false,[],clickRfn,clickURFn,clickH],INPUT_CHANGE:[false,[],changeRFn,changeURFn,changeH],HASHCHANGE:[false,[],hashRFn,hashURFn,hashH],TimeOut:[false,[],timeoutRFn,timeoutURFn,timeoutH],VISIBILITY_CHANGE:[false,[],visChangeRFn,visChangeURFn,visChangeH],CONTENT_CHANGE:[false,[],conChangeRFn,conChangeURFn,conChangeH],XHR_COMPLETE:[false,[],xhrCompRFn,xhrCompURFn,xhrCompH],XHR_FAILED:[false,[],xhrFailRFn,xhrFailURFn,xhrFailH]};function registerTrigger(type,callback,trigger){handlersState[type][1].push([callback,trigger]);if(!handlersState[type][0]){handlersState[type][0]=handlersState[type][2]()}}function unregisterTrigger(type,callback,trigger){var entries=handlersState[type][1];for(var i=0;i<entries.length;i++){if(entries[i][0]===callback&&entries[i][1]===trigger){entries.splice(i,1);break}}if(!handlersState[type][1].length){handlersState[type][3]();handlersState[type][0]=false}}function getValueFromObj(obj,path){if(!obj){return null}var h=path.split(".");for(var i=0;i<h.length;i++){if(!obj){return null}obj=obj[h[i]]}return obj}function getDPValueFromElement(obj){var ele=document.querySelector(obj.cssSelector);if(ele){switch(obj.property){case"value":return ele.value;case"self":return ele;case"text":return ele.textContent;case"class":return ele.className;case"attribute":return ele.getAttribute(obj.attributeName);case"style":return getValueFromObj(ele,obj.elementStyle)}}}function getRegexValue(str,reg,index){if(typeof str!=="string"){return str}if(typeof reg==="string"){if(reg.charAt(0)=="/"){reg=reg.replace(/^\//,"").replace(/\/$/,"")}try{reg=new RegExp(reg)}catch(e){if(CAVNV.log_level){CAVNV.error("getRegexValue failed. Error - "+e)}return null}}var m=str.match(reg);if(m.length){if(!isNaN(index)){return m[index]}if(index==="First"){return m[0]}if(index==="Last"){return m[m.length-1]}}return null}function Callback(callback){this.runAt=callback.runAt;this.name=callback.callbackId;this.data=callback.data;this.path="s:start";this.curState="start";this.dataPoints={};this.localVars={};this.stMap={};this.triggerData=null;var ts=this.data.triggers;for(var i=0;i<ts.length;i++){this.stMap[ts[i].stateId]=this.stMap[ts[i].stateId]||[];this.stMap[ts[i].stateId].push(ts[i])}this.taMap={};var as=this.data.actions;for(var i=0;i<as.length;i++){this.taMap[as[i].triggerId]=this.taMap[as[i].triggerId]||[];this.taMap[as[i].triggerId].push(as[i])}}Callback.prototype.init=function(){cbMap[this.name||this.callbackId]=this;var ts=this.stMap.start;for(var i=0;i<ts.length;i++){registerTrigger(ts[i].type,this,ts[i])}};Callback.prototype.triggered=function(trigger,data){this.path+="|t:"+trigger.id+"("+trigger.type+")";this.triggerData=data;this.refreshDataPoints();var lastState=this.curState;this.executeAction(this.taMap[trigger.id][0]);var cb=CAVNV.config.callbacks||[];for(var i=0;i<cb.length;i++){if(cb[i].callbackId==this.name&&cb[i].terminated){cb[i].terminated=false;return}}if(this.curState!=lastState){var ts=this.stMap[lastState];for(var i=0;i<ts.length;i++){unregisterTrigger(ts[i].type,this,ts[i])}if(this.curState!="end"){var ts=this.stMap[this.curState];for(var i=0;i<ts.length;i++){registerTrigger(ts[i].type,this,ts[i])}}}this.path+="|s:"+this.curState};Callback.prototype.refreshDataPoints=function(){function isPrimitive(data){return !(Array.isArray(data)||(data===Object(data)))}var dp=this.data.dataPoints;var value;var dpVal="";for(var i=0;i<dp.length;i++){value=null;switch(dp[i].source){case"ele":value=getDPValueFromElement(dp[i]);break;case"url":value=document.location[dp[i].urlProperty];break;case"cookie":value=CAVNV.utils.getCookie(dp[i].cookieName);break;case"code":try{value=CAVNV.utils.eval_jsstring(dp[i].code)}catch(e){if(CAVNV.log_level){CAVNV.info("Failed to get data point value, exception - "+e)}}}if(dp[i].pattern){value=getRegexValue(value,dp[i].pattern,(!isNaN(dp[i].index)&&dp[i].index!="")?dp[i].index:dp[i].patternIndex)}this.dataPoints[dp[i].name]=value;if(value==null){value="null"}if(value==undefined){value="undefined"}if(value==true){value="true"}if(value==false){value="false"}if(value&&isPrimitive(value)&&value.length<65){dpVal+=dp[i].name+"="+value}}var r=parseInt(Math.random()*100);var filter=false;var pct=CAVNV.config.CB?CAVNV.config.CB.pct:100;if(!isNaN(pct)&&((pct&&r>pct)||pct==0)){filter=true}this.path+="|dp:"+(((!filter||CAVNV.log_level)&&dpVal.length<2048)?dpVal:"")};function getNextAction(action,src,edgeValue){var edges=action.data.edges;var dst;for(var i=0;i<edges.length;i++){if(edges[i].source===src&&(!edgeValue||edges[i].data.label==edgeValue)){dst=edges[i].target;if(dst==="end"){return null}var list=dst.indexOf("api")===0?action.data.aNOdes:action.data.cNodes;for(var j=0;j<list.length;j++){if(list[j].id===dst){return list[j]}}break}}return null}Callback.prototype.getElemInfo=function(varName){if(varName.indexOf("[")!=-1){var k=varName.substring(varName.indexOf(".")+1,varName.indexOf("["));var s="\\$\\$Element."+k+"|\\['|'\\]";var r=new RegExp(s);var r1=new RegExp(r.source,r.flags+"g");var i=varName.replace(r1,"");return this.triggerData[k][i]}if(varName.indexOf("self")!=-1){return this.triggerData}return this.triggerData[varName.replace("$$Element.","")]};Callback.prototype.getValue=function(varName){if(!varName.indexOf("@DP.")){return this.dataPoints[varName.replace("@DP.","")]}else{if(!varName.indexOf("@Local.")){return this.localVars[varName]}else{if(!varName.indexOf("$$XHR")){if(!varName.indexOf("$$XHR.url")){var r=this.triggerData.url?this.triggerData.req_url[varName.replace("$$XHR.url.","")]:"";return r}else{return this.triggerData[varName.replace("$$XHR.","")]}}else{if(!varName.indexOf("$$Element")){return this.getElemInfo(varName)}else{return varName}}}}};Callback.prototype.executeApi=function(apiObj){var api=apiObj.data.api.api;var argument=apiObj.data.argument;switch(api){case"CAVNV.sb.gotoState":this.curState=argument.stateName;break;case"CAVNV.sb.assign":this.localVars[argument.varName]=this.getValue(argument.value);break;case"CAVNV.sb.increment":var by=this.getValue(argument.by);if(!isNaN(by)&&!isNaN(this.localVars[argument.varName])){this.localVars[argument.varName]=parseInt(this.localVars[argument.varName])+parseInt(by)}break;case"CAVNV.sb.decrement":var by=this.getValue(argument.by);if(!isNaN(by)&&!isNaN(this.localVars[argument.varName])){this.localVars[argument.varName]=parseInt(this.localVars[argument.varName])-parseInt(by)}break;case"CAVNV.sb.trim":this.localVars[argument.varName]=this.getValue(argument.varName).toString().trim();break;case"CAVNV.sb.replace":if(argument.newVal.indexOf('""')!=-1){argument.newVal=""}this.localVars[argument.varName]=this.getValue(argument.varName).toString().replace(argument.searchVal,argument.newVal);break;case"code":try{var value=CAVNV.utils.eval_jsstring(argument.code)}catch(e){if(CAVNV.log_level){CAVNV.info("Failed to get data point value, exception - "+e)}}break;default:try{var fn=getValueFromObj(window,api);if(!fn){throw new Error("Invalid api - "+api)}var args=[];var argsMd=apiObj.data.api.arguments;for(var z=0;z<argsMd.length;z++){args.push(this.getValue(argument[argsMd[z].name]))}fn.apply(window,args)}catch(e){if(CAVNV.log_level){CAVNV.error("Failed to execute api - "+api+", error - "+e)}}}};Callback.prototype.executeCondition=function(cond){var lhs=this.getValue(cond.data.lhs);var rhs=this.getValue(cond.data.rhs);if(rhs=="null"){rhs=null}if(rhs=="undefined"){rhs=undefined}if(rhs=="true"){rhs=true}if(rhs=="false"){rhs=false}var lhsN=isNaN(lhs)?lhs:parseFloat(lhs);var rhsN=isNaN(rhs)?rhs:parseFloat(rhs);var op=cond.data.operator.value;switch(op){case"IS_EQUAL":return lhsN==rhsN;case"IS_NOT_EQUAL":return lhsN!=rhsN;case"LESS_THAN":return lhsN<rhsN;case"LESS_THAN_EQUAL":return lhsN<=rhsN;case"GREATER_THAN":return lhsN>rhsN;case"GREATER_THAN_EQUAL":return lhsN>=rhsN;case"CONTAIN_STRING":return rhs&&lhs.toUpperCase().indexOf(rhs.toUpperCase())!=-1;case"CONTAIN_STRING_CASE":return lhs.indexOf(rhs)!=-1;default:throw new Error("Invalid Operator")}};Callback.prototype.executeAction=function(action){this.path+="|a:"+action.id;var nextAction=getNextAction(action,"start");while(nextAction){if(nextAction.data.api){this.path+="|api:"+nextAction.data.api.api;this.executeApi(nextAction);nextAction=getNextAction(action,nextAction.id)}else{this.path+="|c:("+nextAction.data.lhs+nextAction.data.operator.value+nextAction.data.rhs+")";var result=this.executeCondition(nextAction);this.path+=":"+result;nextAction=getNextAction(action,nextAction.id,result?"yes":"no")}}};var started=false;function reset(){for(i in handlersState){if(handlersState[i].length){handlersState[i][0]=false;handlersState[i][1]=[];handlersState[i][3]()}}var cbs=CAVNV.config.callbacks||[];for(var i=0;i<cbs.length;i++){cbs[i].terminated=true}cbMap={}}function genHandler(callback){return function(){var cb=new Callback(callback);cb.init()}}function load(){var cbs=CAVNV.config.callbacks||[];for(var i=0;i<cbs.length;i++){switch(cbs[i].runAt){case"page_ready":window.cav_nv_pg_ready_cb(genHandler(cbs[i]),cbs[i].pi);break;case"page_unload":window.cav_nv_pg_unload_cb(genHandler(cbs[i]),cbs[i].pi);break;case"after_beacon":window.cav_nv_after_beacon_cb(genHandler(cbs[i]),cbs[i].pi)}}}CAVNV.plugins.CB={init:function(){if(started){return}load();started=true;var flushPath=function(){var cbs=cbMap;var k=Object.keys(cbs);for(var i=0;i<k.length;i++){var cbData=(new Date().getTime())+"|-1|-11|"+cbs[k[i]].name+"|||||||||"+cbs[k[i]].path.replace(/\|/g,";")+"||||||";CAVUA.logEvent(cbData,false,4)}cbMap={}};CAVNV.subscribe("page_unload",function(){flushPath()},null,null)},is_complete:function(){return true},restart:function(){reset()},getCBMap:function(){return cbMap}}})(CAVNV.window,CAVNV.window.document);(function(h){var CP_IGNORE=-1,CP_FOUND=0,CP_NOTFOUND=1,CP_CONTENT_VALIDATION=4080,CP_CONTENT_LENGTH_VALIDATION=240,CP_CONTENT_VALUE_VALIDATION=3840,CP_CONTENT_LENGTH_LESS_THAN_EQUAL=16,CP_CONTENT_LENGTH_EQUAL=32,CP_CONTENT_LENGTH_GREATER_THAN_EQUAL=64,CP_CONTENT_EQUAL=256,CP_CONTENT_NOT_EQUAL=512,CP_CONTENT_SUBSTR=1024,NOT_CONTAINING_STRING=4096,CP_CONTENT_MATCH_REGEX=8192,CP_CONTENT_NOT_MATCHING_REGEX=16384,CP_CONTENT_LENGTH_GREATER_THAN=65536,CP_CONTENT_LENGTH_NOT_EQUAL=131072,CP_CONTENT_LENGTH_LESS_THAN=262144,CP_HAS_MEMBER_MORE_THAN=1048576,CP_HAS_MEMBER_MORE_THAN_EQUAL=2097152,CP_HAS_MEMBER_LESS_THAN=4194304,CP_HAS_MEMBER_LESS_THAN_EQUAL=16777216,CP_SEARCH_SPECIFIC_TEXT=1,CP_SEARCH_LB_RB=2,CP_SEARCH_JSON_PATH=3,CP_SCOPE_PAGE=0,CP_SCOPE_MUTATION=1,CP_SCOPE_ALL=99,CP_SCOPE_XHR_RESPONSE=2,CP_SCOPE_XHR_HEADER=3,CP_SCOPE_XHR_ALL=4;function parseCP(cpentry){function parseArg(arg){if(!arg.text&&!arg.path){return null}arg.ic=arg.ic||false;var narg={};narg.ic=arg.ic;if(arg.path){narg.path=arg.path}else{if(arg.regex){try{narg.regex=new RegExp(arg.text,((arg.ic==true)?"i":""))}catch(e){CAVNV.error("Invalid Regex given checkpoint - "+cpentry.name);narg.text=arg.text;if(narg.ic){narg.text=narg.text.toUpperCase()}}}else{narg.text=arg.text;if(narg.ic){narg.text=narg.text.toUpperCase()}}}return narg}if(!cpentry.name||!cpentry.pages||!cpentry.event){return null}if(!cpentry.pages.split(",").some(function(p){return(p.trim()==-1||p.trim()==CAVNV.pageIndex)})){return null}var cp={};cp.name=cpentry.name;cp.event=cpentry.event;cp.scope=cpentry.scope||CP_SCOPE_PAGE;cp.rules=cpentry.rules;cp.prevState=false;if(cpentry.hasOwnProperty("match")){cp.match=cpentry.match}if(cpentry.scope==CP_SCOPE_XHR_ALL||cpentry.scope==CP_SCOPE_XHR_RESPONSE||cpentry.scope==CP_SCOPE_XHR_HEADER){cp.url=cpentry.url;cp.urlregex=cpentry.urlregex;if(!cp.url&&!cp.urlregex&&cpentry.selector){try{cp.urlregex=new RegExp(cpentry.selector)}catch(e){cp.url=cpentry.selector}}if(!cp.url&&!cp.urlregex){CAVNV.error("required arguments missing,  checkpoint - "+cpentry.name);return null}}else{if(!cpentry.selector){cp.scope=CP_SCOPE_PAGE}else{cp.selector=cpentry.selector}}cp.fail=cpentry.fail||CP_FOUND;cp.mode=cpentry.mode;if(cpentry.arg1){cp.arg1=parseArg(cpentry.arg1)}if(cpentry.arg2){cp.arg2=parseArg(cpentry.arg2)}if(cpentry.rules&&cpentry.rules.length){for(var k=0;k<cpentry.rules.length;k++){var r=cpentry.rules[k];if(r.arg1){cp.rules[k].arg1=parseArg(r.arg1)}if(r.arg2){cp.rules[k].arg2=parseArg(r.arg2)}}}cp.value=cpentry.matching_length?cpentry.matching_length:cpentry.matching_text;if(cpentry.hasOwnProperty("value")){cp.value=cpentry.value}if(cp.fail&CP_CONTENT_LENGTH_VALIDATION&&!cp.value){CAVNV.error("matching length missing in case of CONTENT_LENGTH_VALIDATION checkpoint - "+cp.name);return null}if(cp.fail&CP_CONTENT_VALUE_VALIDATION&&!cp.value){CAVNV.error("matching value missing in case of CONTENT_VALUE_VALIDATION Checkpoint - "+cp.name);return null}return cp}function getMatchesSelector(){var proto=document.createElement("div");return"function"==typeof proto.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof proto.mozMatchesSelector?"mozMatchesSelector":"function"==typeof proto.msMatchesSelector?"msMatchesSelector":null}function load_checkpoint(){config.entries.forEach(function(centry){var cp=parseCP(centry);if(cp==null){return}cp.idx=checkpoints.length;cp.prevState=false;if(cp){checkpoints.push(cp)}})}function getMatch(str,text,regex){var i;if(text){i=str.indexOf(text);if(i!=-1){return{st:i,ed:i+text.length}}}else{if(regex){i=regex.exec(str);if(i!=null){return{st:i.index,ed:i.index+i[0].length}}}}return null}function searchLBRB(text,lbarg,rbarg,gvf,values){if(!text){return 0}var LBStart=0,RBStart=0,RBEnd=0;var count=0,match,str,UAtext;if((lbarg&&lbarg.ic)||(rbarg&&rbarg.ic)){UAtext=text.toUpperCase()}if(!rbarg){RBStart=RBEnd=text.length}while(true){if((LBStart<=RBStart)&&lbarg){if(lbarg.ic){str=UAtext.substr(LBStart)}else{str=text.substr(LBStart)}match=getMatch(str,lbarg.text,lbarg.regex);if(match){LBStart+=match.ed}else{break}}if((!lbarg||RBStart<=LBStart)&&rbarg){if(rbarg.ic){str=UAtext.substr(RBStart)}else{str=text.substr(RBStart)}match=getMatch(str,rbarg.text,rbarg.regex);if(match){RBEnd+=match.ed;RBStart+=match.st}else{break}}count++;if(gvf){if(lbarg&&rbarg){values.push(text.substr(LBStart,(RBStart-LBStart)))}else{if(lbarg){values.push(text.substr(LBStart))}else{if(rbarg){values.push(text.substr(0,RBStart))}}}}RBStart=RBEnd}return count}function jsonPath(obj,expr,arg){var P={resultType:arg&&arg.resultType||"VALUE",result:[],normalize:function(expr){var subx=[];return expr.replace(/[\['](\??\(.*?\))[\]']|\['(.*?)'\]/g,function($0,$1,$2){return"[#"+(subx.push($1||$2)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,function($0,$1){return subx[$1]})},asPath:function(path){var x=path.split(";"),p="$";for(var i=1,n=x.length;i<n;i++){p+=/^[0-9*]+$/.test(x[i])?("["+x[i]+"]"):("['"+x[i]+"']")}return p},store:function(p,v){if(p){P.result[P.result.length]=P.resultType=="PATH"?P.asPath(p):v}return !!p},trace:function(expr,val,path){if(expr!==""){var x=expr.split(";"),loc=x.shift();x=x.join(";");if(val&&val.hasOwnProperty(loc)){P.trace(x,val[loc],path+";"+loc)}else{if(loc==="*"){P.walk(loc,x,val,path,function(m,l,x,v,p){P.trace(m+";"+x,v,p)})}else{if(loc===".."){P.trace(x,val,path);P.walk(loc,x,val,path,function(m,l,x,v,p){typeof v[m]==="object"&&P.trace("..;"+x,v[m],p+";"+m)})}else{if(/^\(.*?\)$/.test(loc)){P.trace(P.eval(loc,val,path.substr(path.lastIndexOf(";")+1))+";"+x,val,path)}else{if(/^\?\(.*?\)$/.test(loc)){P.walk(loc,x,val,path,function(m,l,x,v,p){if(P.eval(l.replace(/^\?\((.*?)\)$/,"$1"),v instanceof Array?v[m]:v,m)){P.trace(m+";"+x,v,p)}})}else{if(/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(loc)){P.slice(loc,x,val,path)}else{if(/,/.test(loc)){for(var s=loc.split(/'?,'?/),i=0,n=s.length;i<n;i++){P.trace(s[i]+";"+x,val,path)}}}}}}}}}else{P.store(path,val)}},walk:function(loc,expr,val,path,f){if(val instanceof Array){for(var i=0,n=val.length;i<n;i++){if(i in val){f(i,loc,expr,val,path)}}}else{if(typeof val==="object"){for(var m in val){if(val.hasOwnProperty(m)){f(m,loc,expr,val,path)}}}}},slice:function(loc,expr,val,path){if(val instanceof Array){var len=val.length,start=0,end=len,step=1;loc.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function($0,$1,$2,$3){start=parseInt($1||start);end=parseInt($2||end);step=parseInt($3||step)});start=(start<0)?Math.max(0,start+len):Math.min(len,start);end=(end<0)?Math.max(0,end+len):Math.min(len,end);for(var i=start;i<end;i+=step){P.trace(i+";"+expr,val,path)}}},eval:function(x,_v,_vname){try{return $&&_v&&eval(x.replace(/(^|[^\\])@/g,"$1_v").replace(/\\@/g,"@"))}catch(e){throw new SyntaxError("jsonPath: "+e.message+": "+x.replace(/(^|[^\\])@/g,"$1_v").replace(/\\@/g,"@"))}}};var $=obj;if(expr&&obj&&(P.resultType=="VALUE"||P.resultType=="PATH")){P.trace(P.normalize(expr).replace(/^\$;?/,""),obj,"$");return P.result.length?P.result:false}}function execCheckpoint(text,cp,json_text){if(cp.mode==CP_SEARCH_SPECIFIC_TEXT){if(cp.arg1.regex){if(cp.fail==CP_FOUND){return(cp.arg1.regex.test(text))}else{if(cp.fail==CP_NOTFOUND){return !(cp.arg1.regex.test(text))}}}else{if(cp.arg1.text){if(cp.fail==CP_FOUND){if(cp.arg1.ic){return(text.toUpperCase().indexOf(cp.arg1.text.toUpperCase())!=-1)}else{return(text.indexOf(cp.arg1.text)!=-1)}}else{if(cp.fail==CP_NOTFOUND){if(cp.arg1.ic){return !(text.toUpperCase().indexOf(cp.arg1.text.toUpperCase())!=-1)}else{return !(text.indexOf(cp.arg1.text)!=-1)}}}}}}else{if(cp.mode==CP_SEARCH_LB_RB||(cp.mode&CP_CONTENT_VALIDATION)){var matches=[];var count=searchLBRB(text,cp.arg1,cp.arg2,!!(cp.fail&CP_CONTENT_VALIDATION),matches);if(cp.mode==CP_SEARCH_LB_RB){if(cp.fail==CP_FOUND){return !!count}else{if(cp.fail==CP_NOTFOUND){return !count}}}for(var z=0;z<matches.length;z++){var value=cp.matching_length?cp.matching_length:cp.matching_text;if(cp.value){value=cp.value}switch(cp.fail){case CP_CONTENT_LENGTH_LESS_THAN_EQUAL:if(matches[z].trim().length<=value){return true}break;case CP_CONTENT_LENGTH_EQUAL:if(matches[z].trim().length==value){return true}break;case CP_CONTENT_LENGTH_GREATER_THAN_EQUAL:if(matches[z].trim().length>=value){return true}break;case CP_CONTENT_EQUAL:if(matches[z].trim()==value){return true}break;case CP_CONTENT_NOT_EQUAL:if(matches[z].trim()!=value){return true}break;case CP_CONTENT_SUBSTR:if(matches[z].indexOf(value)!=-1){return true}}}}else{if(cp.mode==CP_SEARCH_JSON_PATH){if(!json_text){return false}var res=jsonPath(json_text,cp.arg1.path);if(res==false||res.length==0){if(cp.fail!=CP_NOTFOUND){return false}else{return true}}if(cp.hasOwnProperty("value")){value=cp.value}if(cp.fail&24576){try{if(!cp.reg){if(cp.arg1.ic){cp.reg=new RegExp(value,"i")}else{cp.reg=new RegExp(value)}}value=cp.reg}catch(e){return false}}var lhs=res[0].toString();if(cp.fail&7936&&cp.arg1.ic){value=value.toUpperCase();lhs=res[0].toString().toUpperCase()}switch(cp.fail){case CP_FOUND:if(res.length){return true}break;case CP_NOTFOUND:if(!(res.length)){return true}break;case CP_CONTENT_LENGTH_LESS_THAN_EQUAL:if(res[0].toString().length<=value){return true}break;case CP_CONTENT_LENGTH_EQUAL:if(res[0].toString().length==value){return true}break;case CP_CONTENT_LENGTH_GREATER_THAN_EQUAL:if(res[0].toString().length>=value){return true}break;case CP_CONTENT_LENGTH_GREATER_THAN:if(res[0].toString().length>value){return true}break;case CP_CONTENT_LENGTH_NOT_EQUAL:if(res[0].toString().length!=value){return true}break;case CP_CONTENT_LENGTH_LESS_THAN:if(res[0].toString().length<value){return true}break;case CP_CONTENT_EQUAL:if(lhs==value){return true}break;case CP_CONTENT_NOT_EQUAL:if(lhs!=value){return true}break;case CP_CONTENT_SUBSTR:if(lhs.indexOf(value)!=-1){return true}break;case NOT_CONTAINING_STRING:if(lhs.indexOf(value)==-1){return true}break;case CP_CONTENT_MATCH_REGEX:if(value.test(res[0].toString())){return true}break;case CP_CONTENT_NOT_MATCHING_REGEX:if(!value.test(res[0].toString())){return true}break;case CP_HAS_MEMBER_MORE_THAN:if(res.length>value){return true}break;case CP_HAS_MEMBER_MORE_THAN_EQUAL:if(res.length>=value){return true}break;case CP_HAS_MEMBER_LESS_THAN:if(res.length<value){return true}break;case CP_HAS_MEMBER_LESS_THAN_EQUAL:if(res.length<=value){return true}break}}}}return false}function fill_new_str(cq){if(!cq.rules){cq.rules=[];cq.rules[0]={};if(cq.hasOwnProperty("fail")){cq.rules[0].fail=cq.fail}if(cq.hasOwnProperty("mode")){cq.rules[0].mode=cq.mode}if(cq.hasOwnProperty("arg1")){cq.rules[0].arg1=cq.arg1}if(cq.hasOwnProperty("arg2")){cq.rules[0].arg2=cq.arg2}cq.rules[0].value=cq.matching_length?cq.matching_length:cq.matching_text;if(cq.hasOwnProperty("value")){cq.rules[0].value=cq.value}}if(!cq.hasOwnProperty("match")){cq.match="ALL"}}function applyCheckpoint(target,scope){var cp;if(scope==CP_SCOPE_MUTATION&&!(target.nodeType&&target.nodeType==target.ELEMENT_NODE)){return}for(var z=0;z<checkpoints.length;z++){var cq=checkpoints[z];var isSatisfy=false,eData={};fill_new_str(cq);for(var a=0;a<cq.rules.length;a++){cp=cq.rules[a];if(scope==CP_SCOPE_PAGE){if(cq.scope!=CP_SCOPE_PAGE&&cq.scope!=CP_SCOPE_ALL){continue}if(cp.arg1||cp.arg2){if(execCheckpoint(target.textContent,cp)){if(cq.prevState==false){isSatisfy++;eData.cp=cq.name}}}else{if(cq.selector){if(target.querySelectorAll){try{var e=target.querySelectorAll(cq.selector);var foundElement=null;for(var k=0;k<e.length;k++){if(e[k].offsetParent!=null){foundElement=e[k].offsetParent;break}}if(foundElement&&cp.fail==CP_FOUND){isSatisfy++;eData.cp=cq.name;eData.attributes=CAVNV.utils.getNodeText(e[0])}else{if(cp.fail==CP_NOTFOUND&&!foundElement){isSatisfy++}}}catch(e){CAVNV.log("Invalid Selector")}}}}}else{if(scope==CP_SCOPE_MUTATION){if(cq.scope!=CP_SCOPE_MUTATION&&cq.scope!=CP_SCOPE_ALL){continue}if(target[matchesSelectorFn](cp.selector)){if(!cp.arg1&&!cp.arg2){if(cq.prevState==false){isSatisfy++;eData.cp=cq.name;eData.attributes=CAVNV.utils.getNodeText(target)}}else{if(execCheckpoint(target.textContent,cp)){if(cq.prevState==false){isSatisfy++;eData.cp=cq.name;eData.data=CAVNV.utils.getNodeText(target)}}}}}}}if((cq.match.toUpperCase()=="ANY"&&isSatisfy&&isSatisfy<=cq.rules.length)||(cq.match.toUpperCase()=="ALL"&&isSatisfy==cq.rules.length)){CAVNV.cav_nv_log_event(cq.event,eData);cq.prevState=true}}}var config={entries:[]},checkpoints=[],matchesSelectorFn=null;CAVNV.plugins.CHECKPOINT={init:function(c){matchesSelectorFn=getMatchesSelector();CAVNV.utils.pluginConfig(config,c,"CHECKPOINT",Object.keys(config));load_checkpoint();applyCheckpoint(h.document.body,CP_SCOPE_PAGE)},is_complete:function(){return true},restart:function(){checkpoints=[];load_checkpoint();applyCheckpoint(h.document.body,CP_SCOPE_PAGE)},applyCheckpoint:function(target,scope){applyCheckpoint(target,scope)},xhrCheckpoint:function(target,scope){var cp;var body=null,headers=null,json_body=null;for(var z=0;z<checkpoints.length;z++){var cq=checkpoints[z];var isSatisfy=0;fill_new_str(cq);for(var a=0;a<cq.rules.length;a++){cp=cq.rules[a];if(cq.scope!=CP_SCOPE_XHR_HEADER&&cq.scope!=CP_SCOPE_XHR_RESPONSE&&cq.scope!=CP_SCOPE_XHR_ALL){continue}var match=false;if(cq.urlregex){if(cq.urlregex.test(target.__nv.url)){match=true}}else{match=target.__nv.url.indexOf(cq.url)!=-1}if(!match){continue}if(!cp.arg1&&!cp.arg2){continue}if(cq.scope==CP_SCOPE_XHR_ALL||cq.scope==CP_SCOPE_XHR_RESPONSE){if(body==null){body=target.responseText}if(json_body==null){try{json_body=JSON.parse(target.responseText)}catch(e){}}if(execCheckpoint(body,cp,json_body)){if(cq.prevState==false){isSatisfy++}}}if(cq.scope==CP_SCOPE_XHR_ALL||cq.scope==CP_SCOPE_XHR_HEADER){if(headers==null){headers=target.getAllResponseHeaders()}if(execCheckpoint(headers,cp)){if(cq.prevState==false){isSatisfy++}}}}if((cq.match.toUpperCase()=="ANY"&&isSatisfy&&isSatisfy<=cq.rules.length)||(cq.match.toUpperCase()=="ALL"&&isSatisfy==cq.rules.length)){CAVNV.cav_nv_log_event(cq.event,{cp:cq.name,url:target.__nv.url});cq.prevState=true}}},applyCheckpoint2:function(target,scope,cp){if(target.tagName!="BODY"&&target.offsetParent==null){return}var isSatisfy=0,eData={};for(var z=0;z<cp.rules.length;z++){var cq=cp.rules[z];if(!cq.arg1&&!cq.arg2){if(cp.prevState==false){isSatisfy++;eData.cp=cp.name;eData.attributes=CAVNV.utils.getNodeText(target)}}else{if(execCheckpoint(target.textContent,cq)){if(cp.prevState==false){isSatisfy++;eData.cp=cp.name;eData.data=CAVNV.utils.getNodeText(target)}}}}if((cp.match.toUpperCase()=="ANY"&&isSatisfy&&isSatisfy<=cp.rules.length)||(cp.match.toUpperCase()=="ALL"&&isSatisfy==cp.rules.length)){CAVNV.cav_nv_log_event(cp.event,eData);cp.prevState=true;return true}return false},resetPrevState:function(prevStateHash,cp){for(var idx in prevStateHash){cp[idx].prevState=prevStateHash[idx]}},getCheckpoint:function(){return checkpoints}}}(CAVNV.window));(function(w){var matchFn=(function(w){var proto=w.document.createElement("div");return"function"==typeof proto.matches?"matches":"function"==typeof proto.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof proto.mozMatchesSelector?"mozMatchesSelector":"function"==typeof proto.msMatchesSelector?"msMatchesSelector":null}(w));var config={enabled:true,pageList:"-1",completeDocument:false,fireOnce:false,elements:[]};var defaultCallback=function(e){e.cav_nv_log_event(e.__event,e.__tag);return true};var lastEvent=[];var curEvent=[];var log_event=function(event,tag){for(var y=0;y<lastEvent.length;y++){if(lastEvent[y].e==event&&lastEvent[y].t==tag){break}}if(y==lastEvent.length){CAVNV.cav_nv_log_event(event,tag)}curEvent.push({e:event,t:tag})};var elements=[];function CElements(centry){this.selector=centry.s;this.event=centry.e||"ClickEvent";this.tag=centry.t||"Document";var c=null;try{if(centry.c){var fnString="(function(){ return "+centry.c+";}());";c=CAVNV.utils.eval_jsstring(fnString)}}catch(e){}this.callback=c||defaultCallback}function loadData(){var entry;for(var z=0;z<config.elements.length;z++){entry=config.elements[z];if(!entry.s||!entry.p){continue}if(CAVNV.utils.pagePresentInList(entry.p)){elements.push(new CElements(entry))}}}var clickCallback=(function(w){var match=true;function callback(e){var parent,entry,eventCount;parent=e.target;eventCount=0;var status=true;while(parent!=null){for(var z=0;z<elements.length;z++){entry=elements[z];try{if(parent[matchFn](entry.selector)){e.__event=entry.event;e.__tag=entry.tag;e.cav_nv_log_event=log_event;try{status=entry.callback.call(w,e)}catch(e){status=false}if(status==false){break}if(config.fireOnce){lastEvent=curEvent;curEvent=[];return true}}}catch(e){}}parent=parent.parentElement}if(status==true){if(config.completeDocument){if(curEvent.length==0){log_event("ClickEvent","Document")}}}lastEvent=curEvent;curEvent=[];return true}return callback}(w));function start(){loadData();CAVNV.utils.addListener(w.document,"click",clickCallback,true)}function stop(){CAVNV.utils.removeListener(w.document,"click",clickCallback);lastEvent=curEvent=[]}CAVNV.plugins.ClickMonitor={init:function(c){if(!matchFn){return}CAVNV.utils.pluginConfig(config,c,"ClickMonitor",Object.keys(config));config.pageList=config.pageList||"-1";if(!CAVNV.utils.pagePresentInList(config.pageList)){return}start()},is_complete:function(){return true},restart:function(){if(!matchFn){return}stop();if(CAVNV.utils.pagePresentInList(config.pageList)){start()}}}}(CAVNV.window));(function(w){var queue=[];var config={};var threshold=10;var MARK=0;var MEASURE=1;var USERTIMING=2;var TRANSACTION=3;var activeActions=[];var activeActionHashMap={};var actionBuffer=[];function now(){return new Date().getTime()}function NVActionLap(name,data,cur_time){this.name=name;var curT=now();if(cur_time&&!isNaN(cur_time)&&cur_time>(CAVNV.nav_start_time-3600000)&&cur_time<=now){this.startTime=cur_time}else{this.startTime=curT}this.data=data}function NVActionTiming(name,type,cur_time){var curT=now();if(cur_time&&!isNaN(cur_time)&&cur_time>(CAVNV.nav_start_time-3600000)&&cur_time<=curT){this.startTime=cur_time}else{this.startTime=curT}this.name=name;this.type=type;var freeIdx=activeActions.length;for(var z=0;z<activeActions.length;z++){if(!activeActions[z]){freeIdx=z}}this.id=freeIdx;this.laps=[]}function _startAction(actionName,type,data,now){var action=new NVActionTiming(actionName,type,now);activeActionHashMap[actionName]=action;action.laps.push(new NVActionLap("start",data,action.startTime));activeActions[action.id]=action;return action.id}function _reportAction(actionId,data){var action;if(typeof actionId=="string"){action=activeActionHashMap[actionId]}else{action=activeActions[actionId]}if(!action){return}var lapid="intermediate_"+action.laps.length;action.laps.push(new NVActionLap(lapid,data))}function _cancelAction(actionId){var action;if(typeof actionId=="string"){action=activeActionHashMap[actionId]}else{action=activeActions[actionId]}if(action){delete activeActions[action.id];delete activeActionHashMap[action.name]}}function _endAction(actionId,status,data){var action;if(typeof actionId=="string"){action=activeActionHashMap[actionId]}else{action=activeActions[actionId]}if(!action){return}var endTime=now();action.duration=endTime-action.startTime;action.laps.push(new NVActionLap("end",data));action.status=status;logActionTiming(action);delete activeActions[action.id];delete activeActionHashMap[action.name]}function logActionTiming(action){actionBuffer.push(action);flush();if(CAVNV.uaCaptureResource){CAVNV.logResourceTiming(true)}}function createActionTimingRecord(action){var record;action.startTime=CAVNV.utils.nv_time(action.startTime);for(var l in action.laps){action.laps[l].startTime=CAVNV.utils.nv_time(action.laps[l].startTime)}var record=CAVNV.sid+"|"+CAVNV.pageIndex+"|"+CAVNV.pageInstance+"|"+CAVNV.channel+"|"+action.startTime+"|"+action.name+"|"+action.type+"|"+action.duration+"|"+escape(JSON.stringify(action.laps))+"|"+action.status+"|";return record}function convertIntoActionTimingRecord(m,type){var startTime=CAVNV.utils.nv_time((parseInt(m.startTime)-CAVNV.nav_offset)+CAVNV.nav_start_time);var record=CAVNV.sid+"|"+CAVNV.pageIndex+"|"+CAVNV.pageInstance+"|"+CAVNV.channel+"|"+startTime+"|"+m.name+"|"+type+"|"+m.duration+"|||";return record}function logMarksAndMeasures(){if(typeof CAVNV.window.performance=="undefined"||typeof CAVNV.window.performance.getEntriesByTypeNV=="undefined"){return}var performance=CAVNV.window.performance;var marks=performance.getEntriesByTypeNV("mark");var record;for(var m in marks){record=convertIntoActionTimingRecord(marks[m],MARK);queue.push(record)}var measures=performance.getEntriesByTypeNV("measure");for(var m in measures){record=convertIntoActionTimingRecord(measures[m],MEASURE);queue.push(record)}}function flush(force){force=force||false;if(!CAVNV.sid){return}for(var i=0;i<actionBuffer.length;i++){var rec=createActionTimingRecord(actionBuffer[i]);queue.push(rec)}actionBuffer=[];logMarksAndMeasures();if(queue.length==0){return}if(force==true||queue.length>=threshold){var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=usertiming&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&d="+CAVNV.store+"|"+CAVNV.terminal+"&pid="+CAVNV.pageIndex+"&lts="+CAVNV.lts+"&d2="+(CAVNV.cav_epoch_nav_start_time*1000);if(CAVNV.messageVersion){CAVNV.utils.sendData(url,JSON.stringify(queue),"usertiming")}else{CAVNV.utils.sendData(url,queue.join("\n")+"\n","usertiming")}queue=[]}}CAVNV.startAction=function(actionName,data,now){return _startAction(actionName,USERTIMING,data,now)},CAVNV.reportAction=_reportAction,CAVNV.endAction=function(actionId,data){_endAction(actionId,0,data)},CAVNV.failedAction=function(actionId,data){_endAction(actionId,1,data)},CAVNV.cancelAction=function(actionId){_cancelAction(actionId)},CAVNV.startTransaction=function(actionName,data,now){return _startAction(actionName,TRANSACTION,data,now)},CAVNV.endTransaction=function(actionId,data){_endAction(actionId,0,data)},CAVNV.cancelTransaction=function(actionId){_cancelAction(actionId)},CAVNV.failedTransaction=function(actionId,data){_endAction(actionId,1,data)},CAVNV.logMarksAndMeasures=logMarksAndMeasures,CAVNV.plugins.UserTiming={init:function(c){var kw=["queue"];CAVNV.utils.pluginConfig(config,c,"UserTiming",kw);if(config.queue&&config.queue.threshold&&!isNaN(config.queue.threshold)){threshold=config.queue.threshold}var cb=function(){CAVNV.log("Netvision, UserTiming: page is unloading sending user timing data");flush(true)};CAVNV.subscribe("page_unload",cb,null,this)},is_complete:function(){return true},restart:function(){flush(true);queue=[]},flush:flush}}(CAVNV.window));(function(h){var plugin_loaded=false,queue_threshold=5,config={maxErrorPerPage:5,triggerEvent:true,logStackTrace:true,maxStackFrame:10,filterCrossOriginError:true,filter:{pct:10},queue:{threshold:5}},queue=[],eventRaised=false,totalErrorCount=0,unloading=false;function getStackTrace(e){if(!config.logStackTrace||!e||!e.error||!e.error.stack){return""}return escape(e.error.stack)}function errorTime(e){if(e.timeStamp){if(e.timeStamp>1262284200000){return e.timeStamp}else{var pt=CAVNV.utils.getPT(e.target);if(pt){return(pt.navigationStart+e.timeStamp)}else{return(CAVNV.nav_start_time+e.timeStamp)}}}return new Date().getTime()}function logError(e){if(totalErrorCount>=config.maxErrorPerPage){return}if(config.filterCrossOriginError==true){if(!e.filename||e.filename==""||!e.lineno||e.lineno==-1){return}}var errorObj={time:parseInt(errorTime(e)),errmsg:e.message||"",url:e.filename||"",lineno:e.lineno||-1,col:e.colno||-1,stacktrace:getStackTrace(e)};CAVNV.log("ErrorTracing, Error Captured - "+JSON.stringify(errorObj));if(config.triggerEvent&&!eventRaised){CAVNV.cav_nv_log_event("JsError",{error:errorObj.errmsg});eventRaised=true}queue.push(errorObj);totalErrorCount++;post()}function post(force){if(queue.length==0){return}force=force||false;var cqueue=[];if(queue.length>=queue_threshold||force||unloading){if(!CAVNV.sid){CAVNV.log("NetVision, ERROR: failed to send error trace, sid not set.");return}var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=jserror&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&d="+CAVNV.channel+"|"+CAVNV.pageIndex+"&pid="+CAVNV.pageIndex+"&lts="+CAVNV.lts;for(var i=0;i<queue.length;i++){var msg="";var cur_time=parseInt((CAVNV.utils.nv_time(queue[i].time))/1000);msg="-1|"+cur_time+"|"+queue[i].url+"|"+queue[i].lineno+"|"+queue[i].col+"|"+queue[i].errmsg+"|"+queue[i].stacktrace;cqueue.push(msg)}CAVNV.log("NetVision, ErrorTracing: url = "+url);if(CAVNV.messageVersion){CAVNV.utils.sendData(url,JSON.stringify(cqueue),"jserror")}else{CAVNV.utils.sendData(url,cqueue.join("\n")+"\n","jserror")}queue=[]}}function start(h,itrIframe){if(itrIframe==undefined){itrIframe=true}if(h.__nvjse==true){return}if(!h.addEventListener){return}h.addEventListener("error",function(e){logError(e)});h.__nvjse=true;if(CAVNV.monitorIframe==true&&itrIframe==true){var f=h.document.getElementsByTagName("iframe");for(var z=0;z<f.length;z++){try{var iframeWindow=f[z].contentWindow;start(iframeWindow)}catch(e){continue}}}var cb=function(){CAVNV.log("Netvision, ErrorTracing Unloading");unloading=true;post(true)};CAVNV.subscribe("page_unload",cb,null,this)}CAVNV.plugins.ErrorTracing={init:function(c){CAVNV.utils.pluginConfig(config,c,"ErrorTracing",Object.keys(config));if(config.queue&&config.queue.threshold&&!isNaN(config.queue.threshold)){queue_threshold=config.queue.threshold}if(config.filter&&config.filter.pct){if(isNaN(config.filter.pct)){return}var r=parseInt(Math.random()*100);if(r>config.filter.pct){CAVNV.log("ErrorTracing module disabled for current page view.");return}}start(h);plugin_loaded=true},is_complete:function(){return true},flush:function(force){CAVNV.log("Netvision, ErrorTracing: flush() called");if(plugin_loaded){post(force)}},restart:function(){CAVNV.log("Netvision, ErrorTracing: restart() called");queue=[];unloading=false;eventRaised=false;totalErrorCount=0},addIframe:function(w){var itrIframe=false;start(w,itrIframe)}}}(CAVNV.window));(function(h){var plugin_loaded=false;var queue=[];var FORM_ID="nv-form-id";var FORM_FIELD_ID="nv-form-field-id";var config={blackList:[]};var formCache=new NodeMap,d=h.document;var virtualFormCache={};var activeForm=null;var enable=false;var threshold=10;function flush(force){force=force||false;if(!CAVNV.sid){return}if(queue.length<threshold&&!force){return}if(queue.length==0){return}var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=fa&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+CAVNV.channel+"&lts="+CAVNV.lts;var records=[];for(var z=0;z<queue.length;z++){records.push(queue[z].r+"|"+parseInt(CAVNV.utils.nv_time(queue[z].t)/1000)+"|"+queue[z].d)}if(CAVNV.messageVersion){CAVNV.utils.sendData(url,JSON.stringify(records),"fa")}else{CAVNV.utils.sendData(url,records.join("\n")+"\n","fa")}queue=[]}function post(record){queue.push(record)}function now(){return new Date().getTime()}function filterForm(form,isForm){var faBlackList=config.blackList;var c="";for(var i=0;i<faBlackList.length;i++){var f=faBlackList[i];if(f.pageid==undefined){f.pageid=-1}if(isForm){c=f.form}else{c=f.field}if(c==undefined){continue}if(c instanceof RegExp){f.regex=true}else{f.regex=false}try{if(((f.regex==true&&c.test(form)==true)||(f.regex==false&&form.search(c)!=-1))&&(f.pageid==-1||CAVNV.pageIndex==f.pageid)){return true}}catch(e){CAVNV.log(e)}}return false}function formData(form){if(typeof form=="string"){this.name=form}else{this.name=form.name||form.id||form.getAttribute(FORM_ID)}if(!this.name){return null}if(typeof this.name=="object"||this.name.length>256){this.name=null;return null}if(filterForm(this.name,1)){CAVNV.log("Form -->"+this.name+"Filtered");this.name=null;return null}this.virtual=(typeof form=="string");if(!this.virtual){this.element=form}this.lastStatus=-1;this.status=-1;this.fields=getFormFields(form,this);this.interactionAt=-1;this.lastInteractionAt=-1;this.submitAt=-1;this.lastSubmitAt=-1;this.prevStatus=-1;return this}function getFormFields(form,fData){var fields=[];if(typeof form=="string"){fields=fields.concat(Array.prototype.slice.call(d.querySelectorAll("input["+FORM_ID+'="'+form+'"]')));fields=fields.concat(Array.prototype.slice.call(d.querySelectorAll("textarea["+FORM_ID+'="'+form+'"]')));fields=fields.concat(Array.prototype.slice.call(d.querySelectorAll("select["+FORM_ID+'="'+form+'"]')))}else{fields=fields.concat(Array.prototype.slice.call(form.getElementsByTagName("input")));fields=fields.concat(Array.prototype.slice.call(form.getElementsByTagName("textarea")));fields=fields.concat(Array.prototype.slice.call(form.getElementsByTagName("select")))}var ffData=null;var ffDataArray=[];var fieldName;for(var z=0;z<fields.length;z++){fieldName=fields[z].name||fields[z].id||fields[z].getAttribute(FORM_FIELD_ID);if(!fieldName){continue}if(fieldName.length>256){continue}if(filterForm(fieldName,0)){CAVNV.log("Field -->"+fieldName+"Filtered");continue}if(!(fields[z].name||fields[z].id||fields[z].getAttribute(FORM_FIELD_ID))){continue}if(fields[z].type=="reset"||fields[z].type=="hidden"||fields[z].type=="submit"||fields[z].type=="image"||fields[z].type=="button"){continue}ffData=formCache.get(fields[z]);if(!ffData){ffData=new formFieldData(fields[z],fData);formCache.set(fields[z],ffData);ffDataArray.push(ffData)}}return ffDataArray}function formFieldData(field,fData){this.name=field.name||field.id||field.getAttribute(FORM_FIELD_ID);this.type=field.tagName;this.element=field;if(this.type=="INPUT"){this.type+="."+field.type}this.focusAt=-1;this.firstKeyPressAt=-1;this.lastInteractionAt=-1;this.form=fData;return this}function record0(formData){var fields=formData.fields;if(!fields){return null}var fieldStr="";for(var z=0;z<fields.length;z++){if(z!=0){fieldStr+=";"}fieldStr+=fields[z].name+"-"+fields[z].type}return{t:now(),r:0,d:CAVNV.pageIndex+"|"+formData.name+"|"+fieldStr}}function record5(ffData){return{t:now(),r:5,d:CAVNV.pageIndex+"|"+ffData.form.name+"|"+(ffData.name+"-"+ffData.type)}}function addForm(form){var fData=new formData(form);if(fData.hasOwnProperty("name")&&fData.name==null){return null}if(fData.virtual){virtualFormCache[form]=fData}else{formCache.set(form,fData)}queue.push(record0(fData));return fData}function addFormField(field){var id=field.name||field.id||field.getAttribute(FORM_FIELD_ID);if(!id){return null}if(id.length>256){return null}if(filterForm(id,0)){CAVNV.log("Field -->"+id+"Filtered");return null}if(field.tagName=="INPUT"&&(field.type=="submit"||field.type=="cancel"||field.type=="hidden"||field.type=="button")){return null}var fData=null;var virtual_form_id=field.getAttribute(FORM_ID);var formElement=null;if(virtual_form_id){fData=virtualFormCache[virtual_form_id]}else{formElement=getFormElementFromField(field);if(!formElement){return null}fData=formCache.get(formElement)}if(!fData){var fData=addForm(virtual_form_id||formElement);if(!fData){return null}return formCache.get(field)}else{var ffData=new formFieldData(field,fData);formCache.set(field,ffData);queue.push(record5(ffData));return ffData}}function getFormElementFromField(field){var parent=field.parentElement;while(parent){if(parent.tagName=="FORM"){return parent}parent=parent.parentElement}return null}function getFormData(form){if(typeof form=="string"){return virtualFormCache[form]}else{return formCache.get(form)}}function getFieldData(field){if(!field){return null}var ffData=formCache.get(field);if(ffData==null){return addFormField(field)}return ffData}function updateInteractionState(field,ffData){var fData;if(!ffData){ffData=getFieldData(field)}if(!ffData){return}var fData=ffData.form;var curms=now();if(fData.interactionAt==-1){fData.interactionAt=curms}activeForm=fData;ffData.focusAt=curms}function record2(ffData,curms){var data=CAVNV.pageIndex+"|"+ffData.form.name+"|"+ffData.name+"|"+(ffData.lastInteractionAt==-1?0:1)+"|"+(curms-ffData.focusAt)+"|"+(ffData.firstKeyPressAt!=-1?ffData.firstKeyPressAt-ffData.focusAt:-1);return{t:curms,r:2,d:data}}function handleBlur(field,ffData){if(!ffData){ffData=getFieldData(field)}if(!ffData){return}if(ffData.focusAt==-1){return}var curms=now();queue.push(record2(ffData,curms));ffData.lastInteractionAt=ffData.focusAt;ffData.firstKeyPressAt=-1;ffData.focusAt=-1}function handleKeyPress(event){var ffData=getFieldData(field);if(!ffData){return}if(ffData.firstKeyPressAt==-1){ffData.firstKeyPressAt=now()}}function record1(form,fData,curms){var blankFieldList="";var totalRefilledFields=0;var element;var ffData,fieldInteractedAt;for(var z=0;z<fData.fields.length;z++){ffData=fData.fields[z];element=fData.fields[z].element;if((element.value!=undefined||element.value!=null)&&element.value==""){if(blankFieldList!=""){blankFieldList+=";"}blankFieldList+=fData.fields[z].name}if(fData.lastInteractionAt>0){fieldInteractedAt=(ffData.focusAt!=-1)?ffData.focusAt:ffData.lastInteractionAt;if(fieldInteractedAt>0&&fData.interactionAt<=fieldInteractedAt){totalRefilledFields++}}}var data=CAVNV.pageIndex+"|"+fData.name+"|"+(fData.lastInteractionAt!=-1?1:0)+"|"+fData.status+"|"+fData.prevStatus+"|"+(curms-fData.interactionAt)+"|"+totalRefilledFields+"|"+blankFieldList;return{t:curms,r:1,d:data}}function resetFormData(fData){fData.prevStatus=fData.status;fData.status=-1;fData.lastInteractionAt=fData.interactionAt;fData.interactionAt=-1;fData.lastSubmitAt=fData.submitAt;fData.submitAt=-1;activeForm=null}function submitForm(form,status){var curms=now();var fData=getFormData(form);if(!fData){return}if(fData.interactionAt<0){return}fData.status=status||0;queue.push(record1(form,fData,curms));resetFormData(fData);flush(true)}function onevent(e){if(enable==false){return}var target=e.target.element;switch(e.type){case"focus":updateInteractionState(target);break;case"blur":handleBlur(target);break}}function handleSubmit(e){submitForm(e.target,0)}function handleKeyDownEvent(e){var target=e.target;if(e.target.tagName=="INPUT"||e.target.tagName=="TEXTAREA"){var charCode=false;if(typeof e.which=="undefined"){charCode=true}else{if(typeof e.which=="number"&&e.which>0){charCode=!e.ctrlKey&&!e.metaKey&&!e.altKey&&e.which!=8}}var ffData=getFieldData(target);if(!ffData){return}if(ffData.focusAt!=-1&&ffData.firstKeyPressAt==-1){ffData.firstKeyPressAt=now()}}}function record3(ffData){return{t:now(),r:3,d:CAVNV.pageIndex+"|"+ffData.form.name+"|"+ffData.name}}function logDropElement(){if(!activeForm){return}var latestField=null;var latestInteractionAt=0;var field,lastInteraction;for(var z=0;z<activeForm.fields.length;z++){field=activeForm.fields[z];lastInteraction=(field.focusAt!=-1?field.focusAt:field.lastInteractionAt);if(lastInteraction>=activeForm.interactionAt&&lastInteraction>latestInteractionAt){latestField=field;latestInteractionAt=lastInteraction}}if(latestField){queue.push(record3(latestField))}}function start(){if(d.addEventListener){d.addEventListener("submit",handleSubmit)}else{d.attachEvent("onsubmit",handleSubmit)}if(d.addEventListener){d.addEventListener("keydown",handleKeyDownEvent)}else{d.attachEvent("onkeydown",handleKeyDownEvent)}function cb(){logDropElement();flush(true)}CAVNV.subscribe("page_unload",cb,null,this);return true}CAVNV.plugins.FA={init:function(c){CAVNV.utils.pluginConfig(config,c,"FA",Object.keys(config));if(start()==true){enable=true}},is_complete:function(){return true},onevent:onevent,flush:function(force){CAVNV.log("Netvision, FA: flush() called");if(enable){flush(force)}},restart:function(){CAVNV.log("Netvision, FA: restart() called");queue=[];virtualFormCache={};formCache=new NodeMap();activeForm=null;function cb(){logDropElement();flush(true)}CAVNV.subscribe("page_unload",cb,null,this)},submitForm:submitForm};CAVNV.submitForm=submitForm}(CAVNV.window));(function(w){var queue=[];var config={};var log=[];var totalLogs=0,totalErrors=0;var conf="",lastLog={},count=1;function new_wrappers(fn,type){var oldLog=console[fn];console[fn]=function(message){if(message.indexOf("NVLogs")!=-1){return}var m=message;if(!isNaN(conf.maxLogLength)&&message.length>conf.maxLogLength){m=message.substring(0,conf.maxLogLength)}if(lastLog.m==m&&lastLog.t==type&&log.length>0){log[(log.length-1)].c++}else{if(type==1&&totalLogs<conf.maxLog){log.push({time:new Date().getTime(),type:type,msg:m,c:count});totalLogs++}if(type==4&&totalErrors<conf.maxError){log.push({time:new Date().getTime(),type:type,msg:m,c:count});totalErrors++}if(type==2||type==3){log.push({time:new Date().getTime(),type:type,msg:m,c:count})}}m=(m.length>256)?m.substring(0,256):m;lastLog={m:m,t:type};oldLog.apply(console,arguments)}}function consoleWrapper(){var l=conf.level;if(l.length==0){return}var i=0;for(i=0;i<l.length;i++){if(l[i].toLowerCase()=="verbose"){new_wrappers("log",1);continue}if(l[i].toLowerCase()=="warn"){new_wrappers("warn",2);continue}if(l[i].toLowerCase()=="info"){new_wrappers("info",3);continue}if(l[i].toLowerCase()=="error"){new_wrappers("error",4);continue}}}function isBlacklist(m){var b=conf.filter.blacklistPattern||[];if(!b.length){return false}var i=0,cp=[];for(i=0;i<b.length;b++){var l=b[i].length;var s=(b[i][0]=="/")?b[i].substring(1,l-1):b[i];if(!cp[i]){try{var regex=new RegExp(s);cp[i]=regex}catch(e){CAVNV.log(e);cp[i]=b[i]}}if(cp[i].test(m)){return true}}return false}function flush(force){force=force||false;if(!CAVNV.sid){return}var i=0,pct=100;var r=CAVNV.get_session_flag("pctConsole");if(r){return}if(conf.filter&&!isNaN(conf.filter.pct)){pct=conf.filter.pct}r=parseInt(Math.random()*100);if(r>pct){CAVNV.set_session_flag("pctConsole",true)}for(i=0;i<log.length;i++){if(log[i].msg.indexOf("NVLog")!=-1||isBlacklist(log[i].msg)){continue}var str=CAVNV.utils.nv_time_rel_to_sess(log[i].time)+"|"+log[i].type+"|"+log[i].c+"|"+log[i].msg;queue.push(str)}if(queue.length==0){return}if(force==true||queue.length>=threshold){var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=clogs&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&d="+CAVNV.store+"|"+CAVNV.terminal+"&pid="+CAVNV.pageIndex+"&lts="+CAVNV.lts;var data="";data=CAVNV.messageVersion?(JSON.stringify(queue)):(queue.join("\n")+"\n");CAVNV.utils.sendData(url,data,"clogs");queue=[];log=[];lastLog={}}}CAVNV.plugins.MonitorConsole={init:function(c){CAVNV.utils.pluginConfig(config,c,"MonitorConsole",Object.keys(config));conf=CAVNV.config.MonitorConsole;if(conf.enabled){consoleWrapper()}return this},is_complete:function(){return true},restart:function(){flush(true);queue=[];log=[];totalLogs=0;totalErrors=0;lastLog={}},flush:flush}}(CAVNV.window));(function(h){var active=false;var config={};var cm=Array(4);var enabled=false;var clickGaps=[];cm[0]=cm[1]=cm[2]=cm[3]=0;var bact=0,tact=0,lastFocus=null,lastAction,lastActionAt=0,gapBetnAction=0,nextActionCount=0,nonTrusted=0,bUserAgent=0,autoFramework=0,bExt=0;function inrange(cor1,cor2){if(cor1[0]==undefined&&cor1[1]==undefined){return true}return(Math.abs(cor1[0]-cor2[0])<50&&Math.abs(cor1[1]-cor2[1])<50)}function insidebox(rect,cor,olp){olp=olp||25;if(cor[0]==undefined&&cor[1]==undefined){return true}return((cor[0]>=rect.left-olp&&cor[0]<=rect.right+olp)&&(cor[1]>=rect.top-olp&&cor[1]<=rect.bottom+olp))}function onevent(event){if(enabled==false){return}var e=event.nativeEvent;if(active==false){return}if(e.type=="click"||e.type=="change"){var t=new Date().getTime();if(lastActionAt){gapBetnAction+=(t-lastActionAt);clickGaps.push(t-lastActionAt);nextActionCount++}lastActionAt=t;if(e.isTrusted===false){nonTrusted++}}if(e.type=="click"){var cor=[e.clientX,e.clientY];if(cor[0]==0&&cor[1]==0){if(cm[3]!=1){bact++}}else{if(!inrange(cm,cor)){bact++}}tact++;cm[3]=0}else{if(e.type=="change"){if((e.target!=lastFocus)){bact++}tact++}else{if(e.type=="focus"){if(!cm[2]){var rect=e.target.getBoundingClientRect();var viewportX=w.pageXOffset||(null===w.document.body?0:w.document.body.scrollLeft);var viewportY=w.pageYOffset||(null===w.document.body?0:w.document.body.scrollTop);rect.left+=viewportX;rect.right+=viewportX;rect.top+=viewportY;rect.bottom+=viewportY;if(insidebox(rect,cm,25)){lastFocus=e.target}else{lastFocus=null}}else{lastFocus=e.target}cm[2]=0}}}}function handlekey(e){var keycode=(e.keyCode?e.keyCode:e.which);if(keycode==9){cm[2]=1}else{if(keycode==13){cm[3]=1}}}function handlemouse(e){cm[0]=e.clientX;cm[1]=e.clientY}function nsort(a,b){return a-b}function sendsummary(){if(!CAVNV.sid){return}var pspendtime=-1;var t=new Date().getTime();if(CAVNV.nav_offset<=0){var pt=CAVNV.utils.getPT(h);if(pt){pspendtime=parseInt((h.performance.now()+pt.navigationStart)-pt.domInteractive)}else{pspendtime=t-CAVNV.initAt}}else{if(CAVNV.snav){var s=CAVNV.snav;if(s.end-s.init>100){pspendtime=t-s.init}else{pspendtime=t-s.end}}}var s=h.sessionStorage;var navGaps=[pspendtime],nav50p=-1,nav75p=-1,click50p=-1,click75p=-1;if(!!s){var d=s.getItem("nvct");if(d){d=JSON.parse(d);navGaps=d[0].concat(navGaps);clickGaps=d[1].concat(clickGaps)}if(navGaps.length>1){navGaps.sort(nsort);nav50p=navGaps[Math.round(0.5*navGaps.length)-1];nav75p=navGaps[Math.round(0.75*navGaps.length)-1]}if(clickGaps.length>1){clickGaps.sort(nsort);click50p=clickGaps[Math.round(0.5*clickGaps.length)-1];click75p=clickGaps[Math.round(0.75*clickGaps.length)-1]}s.setItem("nvct",JSON.stringify([navGaps,clickGaps]));clickGaps=[]}var data=pspendtime+"|"+gapBetnAction+"|"+bact+"|"+nextActionCount+"|"+nonTrusted+"|"+tact+"|"+bExt+"|"+bUserAgent+"|"+autoFramework+"|"+nav50p+"|"+nav75p+"|"+click50p+"|"+click75p;var url=CAVNV.beacon_url+"?s="+CAVNV.sid+"&p="+CAVNV.protocolVersion+"&m="+CAVNV.messageVersion+"&op=summary&pi="+CAVNV.pageInstance+"&CavStore="+CAVNV.store+"&pid="+CAVNV.pageIndex+"&d="+data+"&lts="+CAVNV.lts;if(!navigator.sendBeacon||!navigator.sendBeacon(url)){var i=new Image();i.onload=function(){};i.src=url}}function start(){var d=h.document;d.addEventListener("keydown",handlekey);d.addEventListener("mousemove",handlemouse);if(CAVNV.utils.isBot(h.navigator.userAgent)){bUserAgent=1}CAVNV.subscribe("page_unload",sendsummary,null,this);if(h.document.activeElement){var select=h.document.activeElement;if(select.tagName!="BODY"){lastFocus=select}}enabled=true}CAVNV.plugins.BD={init:function(c){if(active==true){return}CAVNV.utils.pluginConfig(config,c,"BD",Object.keys(config));start();active=true},is_complete:function(){return true},onevent:onevent,flush:function(force){},restart:function(){bact=tact=lastAction=lastActionAt=gapBetnAction=nextActionCount=nonTrusted=0;CAVNV.subscribe("page_unload",sendsummary,null,this)},ab:function(){bExt=1},bc:function(){autoFramework=1}}}(CAVNV.window));(function(w){var queue=[];var config={};var threshold=10;var addedVars=[];var filteredVars=[];var completedVars=[];var newlyAdded="";var isApplicable=0;var l={};function addTag(attr){var node=document.createElement("style");var textnode=document.createTextNode(attr);node.appendChild(textnode);CAVNV.window.document.querySelectorAll("head")[0].appendChild(node)}function applyVariations(){var c=CAVNV.config;var vObj=(c.ABTesting.v);var prevAddedVars=[];var prevFiltered=[];l=JSON.parse(localStorage.getItem("nvabv"));if(l!=undefined&&l!=null){prevAddedVars=l.added;prevFiltered=l.filtered}var i;addedVars=[];if(!l){l={}}for(i=0;i<vObj.length;i++){var v=vObj[i];if(v.url&&v.url!=document.URL){continue}if(v.pi.split(",").indexOf(CAVNV.pageIndex.toString())==-1||v.r==undefined||(prevFiltered.indexOf(v.i)!=-1)){continue}var r=parseInt(Math.random()*100);if(!v.pct){continue}if(r>=v.pct){filteredVars.push(v.i);continue}isApplicable=1;var rule=Object.keys(v.r)[0];if(rule=="cssrule"){addTag(v.r.cssrule)}if(rule=="jsrule"){var e=CAVNV.utils.eval_jsstring(v.r.jsrule);if(e==undefined&&e==null){continue}}if(prevAddedVars.indexOf(v.i)!=-1){continue}addedVars.push(v.i)}newlyAdded=addedVars.join(",");l.filtered=prevFiltered.concat(filteredVars);l.added=prevAddedVars.concat(addedVars);localStorage.setItem("nvabv",JSON.stringify(l))}function getVar(id){var vObj=(CAVNV.config.ABTesting.v);for(var i=0;i<vObj.length;i++){if(vObj[i].i==id){return vObj[i]}}return null}function applyPageGoal(mode,val){if(mode.indexOf("REGEX")!=-1){if(typeof val=="string"){var l=val.length;var s=(val[0]=="/")?val.substring(1,l-1):val;val=new RegExp(s)}}var url=document.URL;if(mode=="EQUAL"){return(val==url)}if(mode=="URL_CONTAIN"){return((url.indexOf(val)!=-1)?1:0)}if(mode=="URL_CONTAIN_REGEX"){return((val.test(document.URL))?1:0)}if(mode=="URL_NOT_CONTAIN"){return((url.indexOf(val)==-1)?1:0)}if(mode=="URL_NOT_CONTAIN_REGEX"){return((val.test(document.URL))?0:1)}if(mode=="PAGE_MATCH"){return((val.split(",").indexOf(CAVNV.pageIndex.toString())!=-1)?1:0)}return 0}function applyClickGoal(val){var c=CAVNV.config;var vObj=(c.ABTesting.v);var prevAddedVars=[],prevCompletedVars=[];l=JSON.parse(localStorage.getItem("nvabv"));if(!l){return}prevAddedVars=l.added;prevCompletedVars=l.completed;var i;addedVars=[];if(!prevCompletedVars){prevCompletedVars=[]}var isClickGoalOn=0;for(i=0;i<prevAddedVars.length;i++){if(!prevCompletedVars&&prevCompletedVars.indexOf(prevAddedVars[i].toString())!=-1){continue}var v=getVar(prevAddedVars[i]);if(v==null){continue}if(v.g.type!="CLICK_GOAL"){continue}if(v.g.v2!=val){continue}isClickGoalOn=1;addedVars.push(v.i)}if(!isApplicable||!isClickGoalOn){return 0}l.completed=prevCompletedVars.concat(addedVars);localStorage.setItem("nvabv",JSON.stringify(l));queue.push(newlyAdded+":"+prevAddedVars.join(",")+":"+addedVars.join(","))}function applyContentGoal(mode,val){if(mode=="EXIST"){return((val.test(document.URL)!=-1)?0:1)}if(mode=="NOT_EXIST"){return((val.test(document.URL)!=-1)?0:1)}return 0}function applyCustomGoal(val){try{var ret=boomr.utils.eval_jsstring(val);return 1}catch(e){CAVNV.log(e)}return 0}function applyGoals(){var vObj=(CAVNV.config.ABTesting.v);var prevAddedVars=[],prevCompletedVars=[];l=JSON.parse(localStorage.getItem("nvabv"));if(!l){return}prevAddedVars=l.added;prevCompletedVars=l.completed;var i;addedVars=[];if(!prevCompletedVars){prevCompletedVars=[]}for(i=0;i<prevAddedVars.length;i++){if(prevCompletedVars&&prevCompletedVars.indexOf(prevAddedVars[i])!=-1){continue}var v=getVar(prevAddedVars[i]);if(v==null){continue}if(v.g.type=="CLICK_GOAL"){continue}if(v.g.type=="PAGE_GOAL"){if(!applyPageGoal(v.g.mode,v.g.v2)){continue}}if(v.g.type=="CONTENT_GOAL"){if(!applyContentGoal(v.g.mode,v.g.v2)){continue}}if(v.g.type=="CUSTOM_GOAL"){if(!applyCustomGoal(v.g.v2)){continue}}addedVars.push(v.i)}if((!addedVars.length&&!prevAddedVars.length&&!prevCompletedVars.length)||!isApplicable){return 0}l.completed=prevCompletedVars.concat(addedVars);localStorage.setItem("nvabv",JSON.stringify(l));queue.push(newlyAdded+":"+prevAddedVars.join(",")+":"+addedVars.join(","))}function flush(force){force=force||false;if(!CAVNV.sid){return}if(queue.length==0){return}var i;for(i=0;i<queue.length;i++){w.cav_nv_log_event("variationData",queue[i])}queue=[]}function onevent(e){if(!CAVNV.config.ABTesting.enabled){return}if(e.type=="click"){var target=e.target.element;var name=target.name;applyClickGoal(name)}}CAVNV.plugins.ABTesting={start:function(c){var kw=["enabled"];CAVNV.utils.pluginConfig(config,c,"ABTesting",Object.keys(config));if(typeof CAVNV.jQuery==="undefined"||CAVNV.jQuery==null||!CAVNV.config.ABTesting.enabled){return}applyVariations();applyGoals();var cb=function(){CAVNV.log("Netvision, ABTesting: page is unloading sending data");flush(true)};CAVNV.subscribe("page_unload",cb,null,this)},is_complete:function(){return true},restart:function(){flush(true);queue=[]},onevent:onevent,flush:flush}}(CAVNV.window));function domReady(win,fn){var done=false,top=true,doc=win.document,root=doc.documentElement,modern=doc.addEventListener,add=modern?"addEventListener":"attachEvent",rem=modern?"removeEventListener":"detachEvent",pre=modern?"":"on",init=function(e){if(e.type=="readystatechange"&&(/loaded|interactive|complete/.test(doc.readyState)!=true)){return}(e.type=="load"?win:doc)[rem](pre+e.type,init,false);if(!done&&(done=true)){fn.call(win,e.type||e)}},poll=function(){try{root.doScroll("left")}catch(e){setTimeout(poll,50);return}init("poll")};if(/loaded|interactive|complete/.test(doc.readyState)==true){fn.call(win,"lazy")}else{if(!modern&&root.doScroll){try{top=!win.frameElement}catch(e){}if(top){poll()}}doc[add](pre+"DOMContentLoaded",init,false);doc[add](pre+"readystatechange",init,false);win[add](pre+"load",init,false)}}function getConfigPath(){var hostname=window.location.hostname;if(hostname=="www-stress1.kohlsecommerce.com"){return"//mon1.kohls.com/nv/kohls/stress/config.js"}else{return"//mon1.kohls.com/nv/kohls/dotcom/config.js"}}var cavInit=function(){CAVNV.init({wait:true,site_domain:null,enableWorker:true,CONFIG:{config_url:getConfigPath(),jquery_url:"//mon1.kohls.com/nv/kohls/jquery.min.js"},USERACTION:{enabled:true,enableKeyPress:false,MMCapture:{enabled:false},MHCapture:{enabled:false,size:3}},FEEDBACK:{enabled:false},ErrorTracing:{enabled:true},EQueue:{enabled:false},UserTiming:{enabled:false},SPA:{enabled:false},AjaxMonitor:{enabled:false},ClickMonitor:{enabled:false},CrossOrigin:{enabled:false},FA:{enabled:false},ABTesting:{enabled:false},filterBotSession:false,protocolVersion:1,enableCssSelector:true,ocxFilter:{enabled:false,pct:100,maxPage:5,maxPagePct:100,dumpState:[],batchSize:0,events:[]},MonitorConsole:{enabled:false,level:["error","warn"],maxLog:100,maxError:100,maxLogLength:256,filter:{pct:100,blacklistPattern:[]}},sca:{enabled:false,encryption:false},BD:{enabled:false},SW:{enabled:false,frame_url:"//<nv-server>/nv/<client-id>/cavnv_sw_iframe.html",sw_url:"https://<nv-server>/nv/<client-id>/sw.js"}})};domReady(w,cavInit)}(window));