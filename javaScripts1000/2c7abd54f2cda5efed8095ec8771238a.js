Cube(107,[],function(a,b,c){var d=c(137),e=c(138),f=c(134);return a.exports=function(a,b){var c={};return b=f(b,3),e(a,function(a,e,f){d(c,e,b(a,e,f))}),c},a.exports});
Cube(92,[],function(a,b,c){var d=c(136);return a.exports=function(a,b){return null==a||d(a,b)},a.exports});
Cube(133,[],function(a,b,c){var d=c(135);return a.exports=function(a,b){var c=[];return d(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c},a.exports});
Cube(83,[],function(a,b,c){var d=c(132),e=c(133),f=c(134),g=c(101);return a.exports=function(a,b){var c=g(a)?d:e;return c(a,f(b,3))},a.exports});
Cube(111,[],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return b.default=function a(b){if("object"!==("undefined"===typeof b?"undefined":d(b))||null===b)return b;var f=void 0,g=b.constructor;if(b[Symbol.iterator]instanceof Function){var h=b.length;switch(f=new g(h),g){case Array:for(var j=0;j<h;j++)f[j]=a(b[j]);break;case Set:var i=!0,k=!1,l=void 0;try{for(var m,n,e=b[Symbol.iterator]();!(i=(m=e.next()).done);i=!0)n=m.value,f.add(a(n))}catch(a){k=!0,l=a}finally{try{!i&&e.return&&e.return()}finally{if(k)throw l}}break;case Map:var p=!0,q=!1,r=void 0;try{for(var s,t=b[Symbol.iterator]();!(p=(s=t.next()).done);p=!0){var u=s.value,v=c(u,2),w=v[0],x=v[1];f.set(w,a(x))}}catch(a){q=!0,r=a}finally{try{!p&&t.return&&t.return()}finally{if(q)throw r}}break;default:for(var y=0;y<h;y++)f[y]=b[y];}return f}if(g!==Object)return b;for(var z in f={},b)b.hasOwnProperty(z)&&(f[z]=a(b[z]));return f},a.exports});
Cube(86,[],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(77),k=d(j),l=c(13),m=d(l),n=c(75),o=d(n),p=c(116),q=d(p),r=c(101),s=d(r),t=c(130),u=d(t),v=c(114),w=d(v),x=c(131),y=d(x),z=function(a){function b(a,c){f(this,b);var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d._attr=a?(0,k.default)(c||{},a):{},d}return h(b,a),i(b,[{key:"length",value:function(){return this._attr.length}},{key:"insert",value:function(a,b){var c=a.split(".");if(1===c.length){var d;(0,s.default)(b)?(d=this._attr).splice.apply(d,[a,0].concat(e(b))):this._attr.splice(a,0,b)}else{var f=""+(0,u.default)(c).join(".");(0,s.default)(b)?w.default.apply(void 0,[this._attr,f+".splice",(0,q.default)(c),0].concat(e(b))):(0,w.default)(this._attr,f+".splice",(0,q.default)(c),0,b)}}},{key:"delete",value:function(a){var b=a.split(".");if(1===b.length)this._attr.splice(a,1);else{var c=""+(0,u.default)(b).join(".");(0,w.default)(this._attr,c+".splice",(0,q.default)(b),1)}}},{key:"overwrite",value:function(a){return this._attr=a,this.get()}},{key:"set",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.pop();return(0,o.default)(this._attr,b,d),this.get(b)}},{key:"get",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.length&&""!==b[0]?(0,m.default)(this._attr,1===b.length&&b[0]||b):this._attr}}]),b}(y.default);return b.default=z,a.exports});
Cube(125,[],function(a,b,c){var d=c(13);return a.exports=function(a,b){for(var c=-1,e=b.length,f=Array(e);++c<e;)f[c]=null==a?void 0:d(a,b[c]);return f},a.exports});
Cube(119,[],function(a,b,c){var d=c(124),e=c(125),f=c(126),g=c(127),h=c(128),i=c(129),j=h(function(a,b){var c=null==a?0:a.length,h=e(a,b);return f(a,d(b,function(a){return i(a,c)?+a:a}).sort(g)),h});return a.exports=j,a.exports});
Cube(118,[],function(a,b,c){var d=c(123),e=c(122);return a.exports=function(a,b,c){var f=null==a?0:a.length;return f?(b=c||void 0===b?1:e(b),d(a,0>b?0:b,f)):[]},a.exports});
Cube(105,[],function(a,b,c){var d=c(122);return a.exports=function(a){return"number"==typeof a&&a==d(a)},a.exports});
Cube(91,[],function(a,b,c){return a.exports=c(121),a.exports});
Cube(82,[],function(a){var b=Array.prototype,c=b.reverse;return a.exports=function(a){return null==a?a:c.call(a)},a.exports});
Cube(89,[],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(114),k=d(j),l=c(115),m=d(l),n=c(78),o=d(n),p=c(116),q=d(p),r=c(85),s=d(r),t=c(117),u=d(t),v=c(118),w=d(v),x=c(100),y=d(x),z=c(84),A=d(z),B=c(101),C=d(B),D=c(119),E=d(D),F=c(98),G=d(F),H=c(120),I=d(H),J=c(86),K=d(J),L=c(55),M=2,N=function(a){function b(a,c){f(this,b);var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,[]));return d.layerMap=c,d}var c=Math.max;return h(b,a),i(b,[{key:"fix",value:function(a){var b=this,c={},d=this.layerMap,e=!1;(0,o.default)(a.get(),function(e,f){if(!a.isChildCom(f)){var g=d.getZListIndex(f);if(!(g&&"com"===e.type)){if(g){var h=b.get(g).list&&b.get(g).list.length;if((0,L.isLayer)(e.type)&&h&&e.children.length===h)return}c[f]={id:f,children:e.children,parent:e.parent,type:e.type||"com"}}}});for(var f=function(){var f=(0,u.default)(c),g=f[0],h=c[g],j=d.getZListIndex(g),k=!!j;if(!h.parent){var i=k?b.get(j):{id:g,type:h.type};k||(b.insert("0",i),d.updateZIndex(b));var l=a.get(g).children;delete c[g];var m=[];h.children&&(i.list=i.list||[],(0,o.default)(h.children,function(a,c){var e=d.getZListIndex(a);return!!(k&&j===b.getParentIndex(e))||void(e?m.push(e):l.splice(c,1))})),(0,o.default)((0,w.default)(f),function(a){c[a].parent===g&&(i.list=i.list||[],i.list.push({id:c[a].id,type:c[a].type}),!(0,G.default)(l,a)&&l.push(a),delete c[a])}),b.move(m,k?j+".list.0":"0.list.0"),d.updateZIndex(b),e=!0}else{var n=d.getZListIndex(h.parent);if((0,L.isLayer)(h.type))a.componentCount--;else if(!n)b._attr.push({id:g,type:h.type}),d.setZListIndex(g,""+(b._attr.length-1));else{var p=b.get(n);p.list=p.list||[],p.list.push({id:g,type:h.type}),d.setZListIndex(g,n+".list."+(p.list.length-1))}delete c[g]}};!(0,s.default)(c);)f();e&&d.updateZIndex(this);var g=[];return this.deepLoop(this.get(),"",function(c,e){var f=d.getZListIndex(c.id);if("subCom"===c.type||!a.get(c.id))f?g.push(f):g.push(e);else if(e!==f){for(var h=b.getDepth(e),i=a.get(c.id),j=0;i&&i.parent;)j++,i=a.get(i.parent);j===h?g.push(f):g.push(e)}}),g.length&&(e=!0,this.cleanDirty(g,!1)),e}},{key:"deepLoop",value:function(a,b,c){var d=this;(0,o.default)(a,function(a,e){return!(c&&!1===c(a,""+b+e))&&void(a.list&&d.deepLoop(a.list,""+b+e+".list.",c))})}},{key:"move",value:function(a,b){var c=this;(0,C.default)(a)||(a=[a]);var d=[],e=[],f=(0,y.default)(a,function(a){return c.isMaxIndex(a,b)}),g=f.true,h=f.false;h&&(1<h.length&&h.sort(function(a,b){return c.isMaxIndex(a,b)?-1:1}),h.forEach(function(a){d.push((0,m.default)(c.get(a))),e.push(a)}),this.cleanDirty(e,!0,b),this.insert(b,d)),g&&(d=[],e=[],1<g.length&&g.sort(function(a,b){return c.isMaxIndex(a,b)?-1:1}),g.forEach(function(a){d.push((0,m.default)(c.get(a))),e.push(a)}),this.insert(b,d),this.cleanDirty(e))}},{key:"drawBackIndex",value:function(a,b){var c=this.layerMap.getZListIndex(a),d=this.maxIndex(c,b);if(d===c)return c;var e=c.split("."),f=b.split(".");return e[f.length-1]=parseInt(e[f.length-1],10)+1,e.join(".")}},{key:"createNewZIndex",value:function(a,b,c,d){var e=this,f={id:a,type:c,list:[]},g=[];return(0,o.default)(b,function(a){var c=e.layerMap.getZListIndex(a),h=e.get(c);f.list.push(h),g.push(c),d&&d(a,c,b)}),this.cleanDirty(g,!1),f}},{key:"delete",value:function(a,b){var c=a.split(".");if(1===c.length)this._attr.splice(a,1);else{var d=this.getParentIndex(a),e=this.get(d);e.list=e.list||[],(0,E.default)(e.list,(0,q.default)(c));var f=1===(0,L.isPaternity2)(d,b);!(0,L.isLayer)(e.type)||f||e.list.length||this.delete(d)}}},{key:"ungroup",value:function(a){var b=this,c=this.layerMap;(0,o.default)(a,function(a){var d=c.getZListIndex(a),f=b.get(d);if((0,L.isLayer)(f.type)){var g=f.list,h=b.getParentIndex(d);if(h)k.default.apply(void 0,[b._attr,h+".list.splice",(0,q.default)(d.split(".")),1].concat(e(g)));else{var i;(i=b._attr).splice.apply(i,[d,1].concat(e(g)))}}})}},{key:"getChildrenId",value:function(a){var b=this.layerMap,c=b.getZListIndex(a);if(!c)return[];var d=this.get(c);return d?(0,o.default)(d.list||[],"id"):[]}},{key:"getParentIndex",value:function(a){if(!a)return null;var b=a.split(".");return 2>=b.length?null:b.slice(0,-2).join(".")}},{key:"getPathIds",value:function(a){for(var b=[];null!==a;){var c=this.getParentIndex(a),d=this.get(c);c&&b.push(d.id),a=c}return b}},{key:"getPathFromTo",value:function(a,b){if(!a){var c=this.getPathIds(b).reverse();return c.push(this.get(b).id),c}for(var d,e=[this.get(a).id],f=this.getParentIndex(a);f&&1!==(0,L.isPaternity2)(f,b);)d=this.get(f),f&&e.push(d.id),a=f,f=this.getParentIndex(a);if(!f){Array.prototype.push.apply(e,this.getPathIds(b).reverse());var g=b&&this.get(b).id;return g&&!e.includes(g)&&e.push(g),(0,I.default)(e)}e.push(this.get(f).id),a=f;for(var h=b.split("."),j=(h.length-a.split(".").length)/2;j<h.length;j+=2){a=a+"."+h[j]+"."+h[j+1];var i=this.get(a);i&&e.push(i.id)}return e}},{key:"createFromConfig",value:function(a,b){var c=this,d={id:a.id,type:a.type};return(0,L.isLayer)(a.type)&&(d.list=(0,o.default)(a.children,function(a){var d=b.get(a);return c.createFromConfig(d,b)})),d}},{key:"createFromNewLayers",value:function(a,b,c){var d=this,e=(0,y.default)(a,function(a){return!!b[a.id]});return(0,o.default)(e.true,function(a){return d.createFromConfig(a,c)})}},{key:"loopComIndex",value:function(a,b,c){return a[c]===b[c]?(0,A.default)(a[c])&&(0,A.default)(b[c])?this.loopComIndex(a,b,c+1):!!(0,A.default)(a[c]):(0,A.default)(a[c])&&(0,A.default)(b[c])?!!(0<a[c]-b[c]):!!(0,A.default)(a[c])}},{key:"isMaxIndex",value:function(a,b){var c=(0,o.default)(a.match(/[0-9]+/g),function(a){return parseInt(a,10)}),d=(0,o.default)(b.match(/[0-9]+/g),function(a){return parseInt(a,10)}),e=this.loopComIndex(c,d,0);return!e}},{key:"maxIndex",value:function(a,b){return this.isMaxIndex(a,b)&&a||b}},{key:"maxIndexArr",value:function(a){var b=this,c="9999",d=this.layerMap;return(0,o.default)(a,function(a){c=b.maxIndex(c,d.getZListIndex(a))}),c}},{key:"loopCompareIndex",value:function(c,d,e,f,g){var h=Math.abs,i=c[f]||0,a=d[f]||0,b=e[f]||0,j=void 0;return 0===g?(j=h(i-b)-h(a-b),0===j?(g=i===a===b?0:0>(i-b)*(a-b)?3:0<i-b?1:2,this.loopCompareIndex(c,d,e,f+1,g)):j):1===g?a-i:2===g?i-a:i-a}},{key:"isCloser",value:function(a,b,c){var d=(0,o.default)(a.match(/[0-9]+/g),function(a){return parseInt(a,10)}),e=(0,o.default)(b.match(/[0-9]+/g),function(a){return parseInt(a,10)}),f=(0,o.default)(c.match(/[0-9]+/g),function(a){return parseInt(a,10)});return this.loopCompareIndex(d,e,f,0,0)}},{key:"getDepth",value:function(a){var b=a&&a.match(/list/g)||[];return b.length}},{key:"getReverseDepth",value:function(a){var b=this;if(!a)return 0;if(!a.list||!a.list.length)return 1;var d=0;return a.list.forEach(function(a){d=c(d,b.getReverseDepth(a))}),1+d}},{key:"exceedDepth",value:function(a,b){var c=this.get(a);return c?this.getDepth(b)+this.getReverseDepth(c)-1>M:void 0}},{key:"enableGroup",value:function(a){var b=this.get(a);return!!(a&&b)&&this.getDepth(a)+this.getReverseDepth(b)<=M}},{key:"sort",value:function(a){var c=this,d=this.layerMap;return a.sort(function(e,a){return c.isMaxIndex(d.getZListIndex(e),d.getZListIndex(a))?-1:1})}},{key:"loopFromTo",value:function(a,b,d){var e=this.getParentIndex(a),f=this.getParentIndex(b);if(e===f)for(var g,h=parseInt(a.split(".").pop(),10),j=parseInt(b.split(".").pop(),10),k=Math.min(h,j),l=c(h,j),m=k;m<=l;m++)g=e?e+".list."+m:""+m,d&&d(g,this.get(g))}},{key:"cleanDirty",value:function(a){var c=this,b=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],d=arguments[2];a=a&&a.length&&a.filter(function(a){return!!a}).sort(function(d,a){return c.isMaxIndex(d,a)?1:-1})||[],(0,o.default)(a,function(a){var e=c.getParentIndex(a);if(e){var f=c.get(e),g=1===(0,L.isPaternity2)(e,d),h=(0,q.default)(a.split("."));f?(0,E.default)(f.list,h):(0,E.default)(c._attr,h),b&&!g&&(0,L.isLayer)(f.type)&&!f.list.length&&c.delete(e,d)}else(0,E.default)(c._attr,a)})}}]),b}(K.default);return b.default=N,a.exports});
Cube(88,[],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(95),k=d(j),l=c(78),m=d(l),n=c(53),o=d(n),p=c(54),q=d(p),r=c(96),s=d(r),t=c(97),u=d(t),v=c(98),w=d(v),x=c(85),y=d(x),z=c(41),A=d(z),B=c(99),C=d(B),D=c(100),E=d(D),F=c(101),G=d(F),H=c(102),I=d(H),J=c(103),K=d(J),L=c(77),M=d(L),N=c(104),O=d(N),P=c(105),Q=d(P),R=c(106),S=d(R),T=c(84),U=d(T),V=c(107),W=d(V),X=c(94),Y=d(X),Z=c(83),$=d(Z),_=c(108),aa=d(_),ba=c(109),ca=d(ba),da=c(110),ea=d(da),fa=c(111),ga=d(fa),ha=c(55),ia=c(55),ja=c(86),ka=d(ja),la=c(112),ma=d(la),na=c(90),oa=d(na),pa=c(113),qa=window.location.pathname.split("/").reverse()[0],ra={x:0,y:0,w:160,h:90,deg:0,opacity:1,sizeLock:!1,flipH:!1,flipV:!1},sa="//img.alicdn.com/tfs/TB1nLiDkMTqK1RjSZPhXXXfOFXa-200-200.png",ta=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return g._server=d,g.layerMap=c,g.componentCount=0,g}var c=Math.min,d=Math.max;return g(b,a),i(b,[{key:"fix",value:function(){var a=this,b={},c=!1;if(this.componentCount=0,(0,m.default)(this.get(),function(d,e){if(!d.id)return c=!0,delete a._attr[e],!0;if(!d.type)if(d.children&&d.children.length){var f=a.get(d.children[0]);f?("subCom"===f.type&&(d.type="com"),c=!0):(c=!0,delete a._attr[e])}else c=!0,delete a._attr[e];if(d.parent){var g=a.get(d.parent);if(!g)d.parent=null,c=!0;else{g.children=g.children||[],(0,w.default)(g.children,e)||(g.children.push(e),c=!0);var i=g.children.length;(0,ca.default)(g.children,function(b){return!a.get(b)}),i!==g.children.length&&(c=!0),"com"===g.type&&"subCom"!==d.type&&(d.type="subCom",c=!0)}}d.attr&&a.fixedAttr(d)&&(c=!0),!/^(com|subCom)$/.test(d.type)||d.icon&&d.comType||(b[e]=d);var j=function(b,e){if("layer"===d.type&&d.config&&d.config[b]&&d.children&&(0,G.default)(d.children)){var f=d.config[b];if(!Array.isArray(f)&&(0,S.default)(f)){c=!0;var g=Object.keys(f);f=(0,Y.default)((0,W.default)(f,function(a,b){return h({},a,{_id:g[b],_icon:a.icon})})),d.config[b]=f}var i=(0,$.default)(f.map(function(e){var f=a.get(e._id);return f?e._id:((0,ca.default)(d.config[b],{_id:e._id}),c=!0,null)}),function(a){return!(0,y.default)(a)}),j=(0,ea.default)(d.children,i);j.length&&(c=!0,j.forEach(function(c){var f=i.indexOf(c);0>f?d.config[b].push(e(a.get(c))):d.config[b].splice(f,1)}))}};j("animation",pa.getDefaultAnimation),j("transform3d",pa.getDefaultTransform3D),"layer"===d.type&&(!d.comName&&(d.comName="datav-layer",c=!0),!d.icon&&(d.icon=sa,c=!0)),"subCom"!==d.type&&d.type&&a.componentCount++}),"preview"===this._server.status)return void this.emit("layers-init-fixed");if(!(0,y.default)(b)){var d=(0,E.default)(b,"requirePath");(0,ma.default)({baseURL:this._server.componentcenter,params:{screenId:qa},method:"POST",url:"/cube/com/basicInfo?i18n="+this._server.locale,data:{coms:(0,m.default)(b,function(a){return{name:a.comName,version:a.version}})},timeout:10000}).then(function(a){var b=[];return a.data.length&&(0,m.default)(a.data,function(a){var c="/coms/"+a.name+"/"+a.version;d[c]&&d[c].forEach(function(c){c.icon=a.icon,c.comType=a.type,b.push({id:c.id,key:"icon",value:c.icon}),b.push({id:c.id,key:"comType",value:c.comType})})}),b}).then(function(b){a.emit("layers-init-fixed"),(0,oa.default)({url:"/v3/coms/"+a._server.id,method:"POST",params:{screenId:qa},data:{config:b}}).then(function(){console.log("icon fixed end.")})}).catch(function(a){console.error(a)})}return c}},{key:"fixedAttr",value:function(a){var b=!1,c=a.attr,d=a.type;if("subCom"!==d)return Object.keys(ra).forEach(function(a){(0,aa.default)(c,a)||(c[a]=ra[a],b=!0)}),(0,ia.isLayer)(d)&&(c.deg&&0!==c.deg&&(c.deg=0)&&(b=!0),(0,C.default)(c.apply3d)&&(c.apply3d=!1)&&(b=!0),(0,C.default)(c.perspective)&&(c.perspective=500)&&(b=!0),(0,C.default)(c.perspectiveOrigin)&&(c.perspectiveOrigin={x:50,y:50})&&(b=!0)),(0,m.default)(c,function(a,d){(0,u.default)(a)&&!Number.isNaN(parseInt(a,10))&&(b=!0,c[d]="opacity"===d?parseInt(100*parseFloat(a),10)/100:parseInt(a,10)),"opacity"!==d&&!(0,Q.default)(c[d])&&(0,U.default)(c[d])&&(b=!0,c[d]=parseInt(c[d],10))}),b}},{key:"newId",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5,c=a.replace(/(\/|\.|[|])/g,"_")+"_"+(0,ia.randomWord)(!1,b);return this.get(c)?this.newId(a,b):c}},{key:"isChildCom",value:function(a){var b=this.get(a);return!!b.parent&&"subCom"===b.type}},{key:"isParentCom",value:function(a){var b=this.get(a);return!!Array.isArray(b.children)&&"com"===b.type}},{key:"add",value:function(a){var b=this;(0,G.default)(a)?(0,m.default)(a,function(a){b.add(a)}):this._attr[a.id]=a}},{key:"getName",value:function(a){return this.get(a,"alias")}},{key:"setName",value:function(a,b){this.set(a,"alias",b)}},{key:"addCom",value:function(a,b){if(a){var c=a.name,d=a.version,e=a.config,f=a.apis,g=a.type,i=a.icon,j=h({id:this.newId(c),type:"com",comName:c,requirePath:"/coms/"+c+"/"+d,config:e,data:f,version:d,comType:g[0],icon:i},b);return this.add(j),j}}},{key:"addChildren",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.addHandler,e=this.get(a),f=this.get(b);e.children=e.children||[],e.children.push(b),f.parent=a,d&&d(a,e)}},{key:"removeChildren",value:function(a,b,c){var d=this.get(a);d&&(0,s.default)(d.children,b),"layer"===d.type&&d.config&&(d.config.animation||d.config.transform3d)&&(d.config.animation&&(0,ca.default)(d.config.animation,{_id:b}),d.config.transform3d&&(0,ca.default)(d.config.transform3d,{_id:b}),c&&c(a,d))}},{key:"_loop",value:function(a,b){var c=this,d=this.get(a);b&&b(a,d),d&&d.children&&(0,m.default)(d.children,function(a){c._loop(a,b)})}},{key:"delete",value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=this.get(a),e=d.parent,f=d.type,g=c.delHandler,h=c.configHandler;e&&this.removeChildren(e,a,h),"subCom"!==f&&this.transformParent(e,c),this._loop(a,function(a){a&&b._attr[a]&&(g&&g(a),delete b._attr[a])})}},{key:"deleteEmptyLayer",value:function(a,b,c){var d=this.get(a),e=this.get(d.parent);if((0,ia.isLayer)(d.type)){var f=1===(0,ia.isPaternity2)(this.layerMap.getZListIndex(a),c);f||(e&&(this.removeChildren(d.parent,a),!e.children.length&&this.deleteEmptyLayer(d.parent,b,c)),b&&b(a,e),delete this._attr[a])}}},{key:"getParentId",value:function(a){if(!a)return null;var b=this.get(a);return b?b.parent:null}},{key:"getParent",value:function(a){var b=this.getParentId(a);return b?this.get(b):null}},{key:"setAttr",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=this.get(a);if(a&&e){var f=e.attr,g=c.changeAttrHandler;Object.keys(b).forEach(function(a){"opacity"===a?f.opacity=d(b.opacity,0)||0:f[a]=b[a]}),g&&g(a,e)}}},{key:"transform",value:function(a,b,c,d){var e=this,f=this.get(a);if((b.w||b.h)&&(0,ia.isLayer)(f.type)&&f.children&&f.children.length){var g=b.w?(b.w+f.attr.w)/f.attr.w:1,h=b.h?(b.h+f.attr.h)/f.attr.h:1;f.children.forEach(function(a){var b=e.get(a);b.attr=e.transformChild(b,{scaleX:g,scaleY:h}),c&&c(a,b),(0,ia.isLayer)(b.type)&&(b.children||[]).forEach(function(a){var b=e.get(a);b.attr=e.transformChild(b,{scaleX:g,scaleY:h}),c&&c(a,b)})})}this.translate(a,b,c,null,d)}},{key:"translate",value:function(a,b,c,d){var e=this,f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,g=this.get(a),h=g.parent;if((0,ia.isLayer)(g.type)&&(0,aa.default)(b,"deg")&&g.children?((0,m.default)(g.children,function(a){e.translate(a,b,c)}),g.attr.deg=0):g.attr=b&&this.newPos(g,b,f),c&&c(a,g),"subCom"!==g.type&&h&&!(0,aa.default)(b,"deg")){var i=this.get(h);i||console.error(h+" \u5DF2\u7ECF\u4E0D\u5B58\u5728...");var j=i.attr,k=(0,m.default)(i.children,function(a){return e.get(a)});if(!k.length&&(0,ia.isLayer)(i.type))this.deleteEmptyLayer(h,d);else{var l=this.calView(i,k);(l.x||l.y||j.w!==l.w||j.h!==l.h)&&(l.w-=j.w,l.h-=j.h,delete l.deg,delete l.opacity,this.translate(h,l,c),i.children&&(l.x||l.y)&&(0,m.default)(k,function(a){a.attr=e.newPos(a,{x:-l.x,y:-l.y},1),c&&c(a.id,a)}))}}}},{key:"justTranslate",value:function(a,b,c){var d=this.get(a);a&&d&&b&&(d.attr=this.newPos(d,b,1),c&&c(a,d))}},{key:"transformParent",value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=arguments[2],e=c.changeAttrHandler,f=c.delHandler,g=this.get(a);if(a&&g){var h=g.children,i=void 0===h?[]:h,j=g.parent,k=1===(0,ia.isPaternity2)(this.layerMap.getZListIndex(a),d);if(!k){if(!i.length)return this.deleteEmptyLayer(a,f,d),void(j&&this.transformParent(j,c,d));var l=i.map(function(a){return b.get(a)}),m=this.calView(g,l);this.justTranslate(a,m,e);var n=m.x,o=m.y;(n||o)&&i.map(function(a){return b.justTranslate(a,{x:-n,y:-o},e)}),!(0,A.default)(m,{x:0,y:0,w:0,h:0})&&j&&this.transformParent(j,c)}}}},{key:"transformChild",value:function(a,b){var c=b.scaleX,e=b.scaleY,f=a.attr,g=h({},f);return g.x=d((0,ha.radixFixed)(g.x*c),0),g.y=d((0,ha.radixFixed)(g.y*e),0),g.w=d((0,ha.radixFixed)(g.w*c),0),g.h=d((0,ha.radixFixed)(g.h*e),0),g}},{key:"newPos",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=a.attr,f=(0,M.default)({},ra,e),g=(0,M.default)({},{x:0,y:0,w:0,h:0,deg:0,opacity:0},b);return Object.keys(e).forEach(function(a){switch(a){case"deg":f.deg=(0,ha.radixFixed)(f.deg+g.deg),f.deg%=360,f.deg=0>f.deg?f.deg+360:f.deg;break;case"opacity":f.opacity=(0,ha.radixFixed)(f.opacity+g.opacity,2);break;case"x":case"y":f[a]=(0,ha.gridFixed)(f[a]+(g[a]||0),g[a]?c:1);break;case"w":case"h":f[a]=d((0,ha.gridFixed)(f[a]+(g[a]||0),g[a]?c:1),0);break;default:}}),f}},{key:"transform2",value:function(a,b){var c=this,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},f=this.get(a),g=f.type,h=f.parent,i=f.children,j=f.attr,k=e.changeAttrHandler;if("subCom"!==g&&b){var l=(0,aa.default)(b,"deg"),n=(0,aa.default)(b,"x")||(0,aa.default)(b,"y")||(0,aa.default)(b,"w")||(0,aa.default)(b,"h");if(l&&(0,ia.isLayer)(g)&&i)return void(0,m.default)(i,function(a){c.transform2(a,b,1,e)});if(f.attr=this.newPos(f,b,d),k&&k(a,f),n){var o=(0,K.default)(j);i&&i.length&&(0,ia.isLayer)(g)&&this.transformChildren(a,{scaleX:b.w?(b.w+o.w)/o.w:1,scaleY:b.h?(b.h+o.h)/o.h:1,boundary:o},e),h&&this.get(h)&&this.transformParent(h,e)}}}},{key:"transformChildren",value:function(a,b){var c=this,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=this.get(a);if(a&&e){var f=e.children,g=e.attr,h=e.parent,i=d.changeAttrHandler,j=d.delHandler;if(f){if(!f.length)return this.deleteEmptyLayer(a,j),void(h&&this.transformParent(h,d));var k=b.scaleX,l=b.scaleY;1===k&&1===l||(b.newBoundary=g,(0,m.default)(f,function(a){var e=c.get(a);if(!a||!e)return!0;var f=e.attr,g=e.type,h=(0,K.default)(f);c.justScaleChild(a,b,i),(0,ia.isLayer)(g)&&c.transformChildren(a,{scaleX:f.w/h.w,scaleY:f.h/h.h,boundary:h},d)}))}}}},{key:"justScaleChild",value:function(a,b,c){var e=this.get(a);if(a&&e){var f=e.attr,g=e.type,i=b.scaleX,j=b.scaleY,k=b.boundary,l=b.newBoundary;if("com"===g||(0,ia.isLayer)(g)){if(this.isFullOverlapping(f,k))e.attr.w=l.w,e.attr.h=l.h;else{var m=e.attr,n=m.x,o=m.y,p=m.w,q=m.h;this.isHorizenOverlapping(f,k)?(n=0,p=l.w):this.isRightOverlapping(f,k)?(p=(0,ha.radixFixed)(p*i),n=l.w-p):(n=(0,ha.radixFixed)(n*i),p=(0,ha.radixFixed)(p*i)),this.isVerticalOverlapping(f,k)?(o=0,q=l.h):this.isBottomOverlapping(f,k)?(q=(0,ha.radixFixed)(q*j),o=l.h-q):(o=(0,ha.radixFixed)(o*j),q=(0,ha.radixFixed)(q*j));var r={x:n,y:o,w:p,h:q};Object.keys(r).forEach(function(a){r[a]=d(r[a],0)}),e.attr=(0,M.default)(e.attr,r)}c&&c(a,e)}}}},{key:"getAbsolutePos",value:function(a,b){for(var c=this.get(a),d=this.get(c.parent);c.parent&&d;)b.x+=d.attr.x,b.y+=d.attr.y,c=d,d=this.get(c.parent);return b}},{key:"ungroup",value:function(a,b){var c=this;(0,m.default)(a,function(a){var d=c.get(a);if((0,ia.isLayer)(d.type)){var e=c.get(d.parent),f=d.children;e&&(c.removeChildren(e.id,a),e.children=(e.children||[]).concat(f||[])),f.length&&(0,m.default)(f,function(b){var d=c.get(b);c.ungroupAttr(b,[a]),d.parent=e&&e.id||null}),b&&b(f,a),delete c._attr[a]}})}},{key:"group",value:function(a,b,c){var d=this,e=this.newId("group"),f={id:e,type:"layer",children:[],icon:sa,alias:b,comName:"datav-layer"};this._server.enableCarousel&&(f=h({},f,{config:(0,pa.getDefaultConfig)((0,m.default)(a,function(a){return d.get(a)})),version:"0.0.0"}));var g=[];return(0,m.default)(a,function(a){var b=d.get(a);b.parent&&d.removeChildren(b.parent,a),b.parent=e,g.push(b),f.children.push(a)}),f.attr=(0,M.default)({deg:0,opacity:1,apply3d:!1,perspective:500,perspectiveOrigin:{x:50,y:50}},this.calView({},g)),(0,m.default)(a,function(a){var b=d.get(a);b.attr.x-=f.attr.x,b.attr.y-=f.attr.y,c&&c(a,e,b)}),f}},{key:"formGroup",value:function(a,b,c){var d=this,e=this.newId("form-group"),f={id:e,type:"form-layer",children:[],icon:sa,alias:b,config:{},version:"0.0.0",comName:"datav-form-layer",nodeExport:!0},g=[];return(0,m.default)(a,function(a){var b=d.get(a);b.parent&&d.removeChildren(b.parent,a),b.parent=e,g.push(b),f.children.push(a)}),f.attr=(0,M.default)({deg:0,opacity:1},this.calView({},g)),(0,m.default)(a,function(a){var b=d.get(a);b.attr.x-=f.attr.x,b.attr.y-=f.attr.y,c&&c(a,e,b)}),f}},{key:"align",value:function(a,b,c){var d=this,e=(0,m.default)(a,function(a){return d.get(a)}),f=b(e);(0,m.default)(e,function(a,b){c(a,f,b)})}},{key:"alignLeft",value:function(a){this.align(a,function(a){return(0,o.default)(a,function(a){return a.attr.x})},function(a,b){a.attr.x=b.attr.x})}},{key:"alignRight",value:function(a){this.align(a,function(a){return(0,q.default)(a,function(a){return a.attr.x+a.attr.w})},function(a,b){a.attr.x=b.attr.x+b.attr.w-a.attr.w})}},{key:"alignTop",value:function(a){this.align(a,function(a){return(0,o.default)(a,function(a){return a.attr.y})},function(a,b){a.attr.y=b.attr.y})}},{key:"alignBottom",value:function(a){this.align(a,function(a){return(0,q.default)(a,function(a){return a.attr.y+a.attr.h})},function(a,b){a.attr.y=b.attr.y+b.attr.h-a.attr.h})}},{key:"alignCenter",value:function(a){this.align(a,function(a){for(var b,e=a[0].attr.x,f=e+a[0].attr.w,g=a.length,h=1;h<g;h++)b=a[h],e=c(e,b.attr.x),f=d(f,b.attr.x+b.attr.w);return e+(f-e)/2},function(a,b){a.attr.x=b-a.attr.w/2})}},{key:"alignMiddle",value:function(a){this.align(a,function(a){for(var b,e=a[0].attr.y,f=e+a[0].attr.h,g=a.length,h=1;h<g;h++)b=a[h],e=c(e,b.attr.y),f=d(f,b.attr.y+b.attr.h);return e+(f-e)/2},function(a,b){a.attr.y=b-a.attr.h/2})}},{key:"alignHorizontal",value:function(a){for(var b=this,e=(0,I.default)((0,m.default)(a,function(a){return b.get(a)}),function(a){return a.attr.x+a.attr.w/2}),f=e[0].attr.x+e[0].attr.w/2,g=f,h=e.length,j=1;j<h;j++){var i=e[j],k=i.attr.x+i.attr.w/2;f=c(f,k),g=d(g,k)}var l=(g-f)/(h-1);(0,m.default)(e,function(a,b){a.attr.x=f+l*b-a.attr.w/2})}},{key:"alignVertical",value:function(a){for(var b=this,e=(0,I.default)((0,m.default)(a,function(a){return b.get(a)}),function(a){return a.attr.y+a.attr.h/2}),f=e[0].attr.y+e[0].attr.h/2,g=f,h=e.length,j=1;j<h;j++){var i=e[j],k=i.attr.y+i.attr.h/2;f=c(f,k),g=d(g,k)}var l=(g-f)/(h-1);(0,m.default)(e,function(a,b){a.attr.y=f+l*b-a.attr.h/2})}},{key:"removeFromPath",value:function(a,b,c,d){var e=b[0],f=this.ungroupAttr(a,b);return e&&this.removeChildren(e,a),this.transformParent(e,d,c),f.parent=null,f}},{key:"addToPath",value:function(a,b,c){if(b&&b[0]){var d=b[0];d?(a=this.groupAttr(a,b),this.addChildren(d,a.id,c),this.transformParent(d,c)):a.parent=null}}},{key:"calView",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];if(!b.length)return null;var c=a.attr,d=void 0===c?{}:c,e=(0,m.default)(b,"attr"),f=(0,k.default)((0,o.default)(e,"x").x),g=(0,k.default)((0,o.default)(e,"y").y),h=(0,q.default)(e,function(a){return a.x+a.w});h=(0,k.default)(h.x)+(0,k.default)(h.w);var i=(0,q.default)(e,function(a){return a.y+a.h});return i=(0,k.default)(i.y)+(0,k.default)(i.h),{x:f,y:g,w:h-f-(d.w||0),h:i-g-(d.h||0)}}},{key:"ungroupAttr",value:function(a,b){var c=this,d=this.get(a);return(0,m.default)(b,function(a){var b=c.get(a);d.attr.x+=b.attr.x,d.attr.y+=b.attr.y}),d}},{key:"groupAttr",value:function(a,b){var c=this;return(0,m.default)(b,function(b){var d=c.get(b);a.attr.x-=d.attr.x,a.attr.y-=d.attr.y}),a}},{key:"isHorizenOverlapping",value:function(a,b){return 0===a.x&&a.w===b.w}},{key:"isRightOverlapping",value:function(a,b){return a.x+a.w===b.w}},{key:"isVerticalOverlapping",value:function(a,b){return 0===a.y&&a.h===b.h}},{key:"isBottomOverlapping",value:function(a,b){return a.y+a.h===b.h}},{key:"isFullOverlapping",value:function(a,b){return a.w===b.w&&a.h===b.h&&0===a.x&&0===a.y}},{key:"orderLayerAnimation",value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],d=arguments[2];if(a&&a.config&&a.config.animation&&(0,ia.isLayer)(a.type)){var e=a.config.animation,f=[],g=a.config.transform3d,h=[];c.forEach(function(a){var c=b.get(a),d=void 0,i=void 0,j=e.find(function(b){return b._id===a});d=j?j:(0,pa.getDefaultAnimation)(c);var k=g.find(function(b){return b._id===a});i=k?k:(0,pa.getDefaultTransform3D)(c),d&&f.push(d),i&&h.push(i)}),a.config.animation=f,a.config.transform3d=h,d&&d()}}},{key:"loopCopyChildrenLayerAnimation",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=this,d=arguments[2],e=arguments[3],f=!1;a&&a.config&&a.config.animation&&(0,ia.isLayer)(a.type)&&(f=!0);var g,j,k,l;f&&(g=a.config.animation||[],j=[],k=a.config.transform3d||[],l=[]),b.forEach(function(a,b){var i=c.get(a);if(f&&i){var m=g[b]?h({},(0,ga.default)(g[b]),{_id:a}):(0,pa.getDefaultAnimation)(i),n=k[b]?h({},(0,ga.default)(k[b]),{_id:a}):(0,pa.getDefaultTransform3D)(i);j.push(m),l.push(n)}(0,ia.isLayer)(i.type)&&c.loopCopyChildrenLayerAnimation(i,d.getChildrenId(a),d,e)}),f&&(a.config.animation=j,a.config.transform3d=l,e&&e(a))}},{key:"copyLayerAnimationFromIdMap",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=this,d=arguments[2],e=arguments[3];if(a&&a.config&&a.config.animation&&(0,ia.isLayer)(a.type)){var f=a.config.animation||[],g=a.config.transform3d||[],i=function(a,e){var f=[];return b.forEach(function(b){if(d[b]){var g=(0,O.default)(a,{_id:d[b]});g&&f.push(h({},(0,ga.default)(g),{_id:b}))}else{var i=(0,O.default)(a,{_id:b});if(i)f.push(i);else{var j=c.get(b);j&&f.push(e(j))}}}),f};a.config.animation=i(f,pa.getDefaultAnimation),a.config.transform3d=i(g,pa.getDefaultTransform3D),e&&e(a)}}},{key:"loopCopyLayerAnimation",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=arguments[2],d=arguments[3],e=arguments[4];a.parent&&this.copyLayerAnimationFromIdMap(this.get(a.parent),c.getChildrenId(a.parent),d,e),this.loopCopyChildrenLayerAnimation(a,b,c,e)}}]),b}(ka.default);return b.default=ta,a.exports});
Cube(87,[],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(91),j=d(i),k=c(92),l=d(k),m=c(93),n=d(m),o=c(94),p=d(o),q=c(86),r=d(q),s=c(55),t=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"updateZIndex",value:function(a){var b=this,c=Object.assign({},this._attr),d=this.rightLoopZList(a.get(),"",[],c),e=(0,n.default)(c,function(a){return!0===a});return Object.keys(e).forEach(function(a){b._attr[a]&&delete b._attr[a]}),Array.prototype.push.apply(d,(0,p.default)(e)),d}},{key:"setZListIndex",value:function(a,b){this.set("_"+a+"_z_list_index",b)}},{key:"getZListIndex",value:function(a){return this.get("_"+a+"_z_list_index")}},{key:"delZListIndex",value:function(a){(0,l.default)(this._attr,"_"+a+"_z_list_index")}},{key:"markDirty",value:function(a,b){a["_"+b+"_z_list_index"]=!0}},{key:"rightLoopZList",value:function(a,b,c,d){var e=this;return(0,j.default)(a,function(a,f){var g=a.id,h=e.getZListIndex(g),i=b?b+"."+f:""+f;switch(h&&h!==i&&c.push(i),e.markDirty(d,g),a.type){case"layer":case"form-layer":a.list&&e.rightLoopZList(a.list,i+".list",c,d),e.setZListIndex(g,i);break;case"com":e.setZListIndex(g,i);break;case s.SCREEN_BLOCK:e.setZListIndex(g,i);break;default:}}),c}}]),b}(r.default);return b.default=t,a.exports});
Cube(81,[],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"===typeof b||"function"===typeof b)?b:a}function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(13),j=d(i),k=c(75),l=d(k),m=c(78),n=d(m),o=c(82),p=d(o),q=c(83),r=d(q),s=c(84),t=d(s),u=c(85),v=d(u),w=c(86),x=d(w),y=c(87),z=d(y),A=c(88),B=d(A),C=c(89),D=d(C),E=c(90),F=d(E),G={version:1,config:{width:1920,height:1080,grid:8,display:1,backgroundColor:"rgba(13,42,67,0)",backgroundImage:null,screenShot:null}},H=function(a,b,c){c.config||(c.config=G.config),a?(c.config.zIndexList=(0,n.default)((0,p.default)(a),function(a){return{id:a,type:"com"}}),delete c.config.comList):c.config.zIndexList=(0,n.default)((0,r.default)(b[0].coms,function(a){return!a.parent}),function(a){return{id:a.com_id,type:"com"}})},I=function(a){H((0,j.default)(a,"config.comList"),(0,j.default)(a,"scenes[0].layers"),a);var b=(0,j.default)(a,"scenes[0].layers[0].coms"),c={};return(0,n.default)(b,function(a){a.id=a.com_id||a.id,a.com_id&&delete a.com_id,a.type=a.parent&&"subCom"||"com",a.comName=a.com.replace(/^\/coms\//,"").replace(new RegExp("/"+a.version.replace(".","\\.")+"$"),""),a.requirePath="/coms/"+a.comName+"/"+a.version,delete a.com,a.pos_id&&delete a.pos_id,a.attr&&(a.attr.zIndex&&delete a.attr.zIndex,a.attr.comId&&delete a.attr.comId),c[a.id]=a}),(0,l.default)(a,"scenes[0].layers",c),a.snapshotId=a.snapshot_id,delete a.snapshot_id,a.authTime=a.auth_time,delete a.auth_time,a.version=2,a},J=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,G));return g._config=d,g.id=a,g._init(),g}return g(b,a),h(b,[{key:"_init",value:function(){var a=this.get("version"),b=!a||1===a;b&&(this._attr=I(this._attr));var c=this.get("config");(0,t.default)(c.width)||(c.width=parseInt(c.width,10)||1920),(0,t.default)(c.height)||(c.height=parseInt(c.height,10)||1920);var d=this.get("scenes[0].layers"),e=new z.default,f=new B.default(d,e,this._config),g=new D.default(this.get("config.zIndexList"),e);e.updateZIndex(g);var h={};f.fix()&&(this.set("scenes","0","layers",f.get()),!b&&(h["scenes[0].layers"]=f.get())),g.fix(f)&&(e.updateZIndex(g),this.set("config.zIndexList",g.get()),!b&&(h["config.zIndexList"]=g.get())),b&&(h={config:this.get("config"),scenes:this.get("scenes"),version:this.get("version")}),this.convert(h),this.set("layers",f),this.set("layerMap",e),this.set("zIndexList",g)}},{key:"convert",value:function(a){(0,v.default)(a)||"preview"===this._config.status||(0,F.default)({url:"/v3/screen/"+this.id,method:"POST",params:{screenId:this.id},data:{config:(0,n.default)(a,function(a,b){return{key:b,value:a}})}}).then(function(){console.log("convert success")}).catch(function(a){console.error("convert fail:"),console.error(a)})}},{key:"updateVariables",value:function(a){var b=this;if(a){var c=a.componentsView,d=a.publishersView,e=a.subscribersView;(0,n.default)(c,function(a,c){b.set("variables","componentsView",c,a)}),(0,n.default)(d,function(a,c){b.set("variables","publishersView",c,a)}),(0,n.default)(e,function(a,c){b.set("variables","subscribersView",c,a)})}}}]),b}(x.default);return a.exports=J,a.exports});
Cube(79,[],function(a){function b(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function c(a){this._config=a,this._setNamespace(a.namespace),this._setLocale(a.locale),this._setDefaultLocale(a.defaultLocale),this._setDefaultValue(a.defaultValue),this._setLangPacks(a.parsePage?this._parsePage():{}),this._setLangPacks(a.langPacks),this._setData(a.data)}var d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return c.prototype._inspectValue=function(a){return a&&"string"===typeof a?a:""},c.prototype._parsePage=function(){var a={},b=document.querySelectorAll("script[type=\"json/i18n\"]");return Array.prototype.forEach.call(b,function(b){var c=this._inspectValue(b.getAttribute("locale"));try{var d=JSON.parse(b.textContent);a[c]?Object.assign(a[c],d):a[c]=d}catch(a){console&&console.warn&&console.warn("\u6587\u6848\u89E3\u6790\u5931\u8D25\uFF0C\u8282\u70B9\u5185\u5BB9\uFF1A\n%s",b.outerHTML)}}),a},c.prototype._setNamespace=function(a){this._namespace=this._inspectValue(a)},c.prototype._setLocale=function(a){this._locale=this._inspectValue(a)},c.prototype._setDefaultLocale=function(a){this._defaultLocale=this._inspectValue(a)},c.prototype._setDefaultValue=function(a){this._defaultValue=this._inspectValue(a)},c.prototype._setLangPacks=function(a){this._langPacks||(this._langPacks={}),"object"!==("undefined"===typeof a?"undefined":d(a))&&(a={});var b=this;Object.keys(a).forEach(function(c){var d=a[c];c=c||b._getLocal(),b._langPacks[c]?Object.assign(b._langPacks[c],d):b._langPacks[c]=d})},c.prototype._setData=function(a){this._data||(this._data={}),Object.assign(this._data,a)},c.prototype._getCookieLocal=function(){return(CookieInfo.getLocale()||"").replace(/_/,"-").toLowerCase()},c.prototype._getBrowserLanguage=function(){return(navigator.language||navigator.browserLanguage||"").replace(/_/,"-").toLowerCase()},c.prototype._getLocal=function(){var a=this._locale||this._defaultLocale||this._getCookieLocal()||this._getBrowserLanguage()||"en-us";return a},c.prototype._getLangPack=function(a){return a=a&&"undefined"!==typeof a?a:this._getLocal(),this._langPacks[a]},c.prototype._getName=function(a){var b=this._namespace;return""===b?a:b+"."+a},c.prototype._getValue=function(a,b){if("string"!==typeof a)return console&&console.warn&&console.warn("\u6587\u6848\u7D22\u5F15 [%s] \u4E0D\u5408\u7B26\u8981\u6C42\u3002",a),!1;var c=this._getLangPack(b),d=this._getName(a);return c?c[d]:void 0},c.prototype._getCopy=function(a,b){if("string"===typeof a){var c="__i18n-react-split__",e={},f=this,g=a.replace(/\{\s*(?:([^}\s]+)\s+)?([^}\s]+)(?:\s+([^}]+))*\s*\}/g,function(a,g,h,i){var j;if(b&&(j=b[h]),"undefined"===typeof j&&(j=f._data[h]||"--"),g){var k=Helpers[g];if(k)try{j=k.bind(f)(h,j,i)}catch(a){console&&console.warn&&console.warn("\u8F85\u52A9\u65B9\u6CD5 [%s] \u6267\u884C\u5F02\u5E38\uFF0C\u8BF7\u68C0\u67E5\u65B9\u6CD5\u4F53\u4EE3\u7801\u3002",g)}else console&&console.warn&&console.warn("\u8F85\u52A9\u65B9\u6CD5 [%s] \u4E0D\u5B58\u5728\uFF0C\u8BF7\u786E\u8BA4\u6587\u6848\u5B9A\u4E49\u662F\u5426\u6B63\u786E\u3002",g)}else j&&"symbol"===d(j.$$typeof)&&(e[h]=j,j=c+h+c);return""+j||a});return-1<g.indexOf(c)?g.split(c).map(function(a,b){return e[a]?cloneElement(e[a],{key:b}):a}).filter(function(a){return!!a}):g}return a},c.prototype.parsePage=function(){var a=this._parsePage();this._setLangPacks(a)},c.prototype.has=function(a,b){var c=this._getValue(a,b);return"undefined"!==typeof c},c.prototype.get=function(a,b,c){try{b&&"object"===("undefined"===typeof b?"undefined":d(b))&&(c=b,b=this._getLocal());var e=this.getOriginal(a,b);return e&&c?this._getCopy(e,c):e}catch(c){console.warn("i18n not found",a,b,this._locale)}},c.prototype.getKeys=function(a){var b=[],c=""+a,d=this._config.region.toUpperCase(),e=(this._config.source||"").toUpperCase();return b.push(c),c=c+"_"+d,b.push(c),this._config.is4service&&(c+="_SV",b.push(c),e&&(c=c+"_"+e,b.push(c))),b},c.prototype.getOriginal=function(a,c){c=c||this._getLocal();for(var d=void 0,e=void 0,f=this.getKeys(a),g=f[f.length-1];f.length&&(e=f.pop(),d=this._getValue(e,c),!d););return e&&e!==g&&this._setLangPacks(b({},c,b({},this._namespace+"."+g,d))),!d&&console&&console.warn&&console.warn("["+this._namespace+"].["+a+"] not found in ["+c+"]"),d},c.prototype.getLocale=function(){return this._getLocal()},c.prototype.setConfig=function(a){"object"!==("undefined"===typeof a?"undefined":d(a))&&(a={}),Object.keys(a).forEach(function(b){var c="_set"+b.replace(/^(.)/,function(a){return a.toUpperCase()});this[c]&&this[c](a[b])})},a.exports=c,a.exports});
Cube("/common/share.js",["/20.js"],function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a){this._attr={},this._init(a)}var f=c(13),g=d(f),h=c(75),i=d(h),j=c(76),k=d(j),l=c(77),m=d(l),n=c(78),o=d(n),p=c(79),q=d(p),r=c(80),s=d(r),t=c(81),u={nodes:[],edges:[],pageConfig:{zoom:1,moveOffset:[0,0],origin:["50%","50%"]}};e.prototype._init=function(a){var b=this;(0,k.default)(a,function(a,c){if("datasourceList"===c||"rdsInnerRegions"===c||"rdsInnerRegions2"===c)try{a=JSON.parse(a)}catch(b){console.error("\u6570\u636E\u6E90\u5217\u8868\u89E3\u6790\u9519\u8BEF"),a=null}b.set(c,a)});var c=!!a.ACLs&&a.ACLs.fresh||"standard"!==this.get("level"),d="preview"===this.get("status");if(a.config){var e=this.set("screenConfig",new t(a.id,a.config,{status:a.status,componentcenter:a.componentcenter,datacenter:a.datacenter,id:a.id,locale:a.locale,enableCarousel:c,getI18n:this.getI18n.bind(this)}));this.set("screen",e.get("screen")),this.set("pageConfig",e.get("config")),this.set("layers",e.get("layers")),this.set("layerMap",e.get("layerMap")),this.set("zIndexList",e.get("zIndexList"));var f="iot"===a.fromApp;this.set("IS_IOT",f),this.set("disableFavorite",f),this.set("interaction",e.get("interaction")||u)}this.prepareI18n(),this.set("isStandard","standard"===this.get("level")),this.set("isAdvanced","advanced"===this.get("level")),this.set("isDeveloper","developer"===this.get("level")),this.set("isProfessional","professional"===this.get("level")),this.set("isPrime","prime"===this.get("level")),this.set("is4service","true"===this.get("is4service")),this.set("enableCarousel",c),this.set("isDebug",d&&/datavDebug=true/.test(window.location.search||""));var g=this.get("layers");this.getComponentData=function(a){var c=b.get("isMobile");return c||a?c?s.default.getComponentData(a):g.get(a):g.get()};try{delete window.localStorage.readyToCopy}catch(a){console.warn("Failed to access localStorage")}},e.prototype.prepareI18n=function(){var a={},b=document.querySelectorAll("script[type=\"json/i18n\"]");Array.prototype.forEach.call(b,function(b){try{a=(0,m.default)(a,JSON.parse(b.textContent))}catch(a){console&&console.warn&&console.warn("\u6587\u6848\u89E3\u6790\u5931\u8D25\uFF0C\u8282\u70B9\u5185\u5BB9\uFF1A\n%s",b.outerHTML)}}),this.set("i18n",a)};var v="__datav-theme__";e.prototype.setCurrentTheme=function(a){this.set(v,a)},e.prototype.getCurrentTheme=function(){return this.get(v)},e.prototype.getI18n=function(a,b){var c=a+(b?"_plain":"");if(this.i18nMap||(this.i18nMap={}),!this.i18nMap[c]&&this.get("i18n"))if(b){var d={},e=this.get("i18n");Object.keys(e).forEach(function(b){0==b.indexOf(a+".")&&(d[b.replace(a+".","")]=e[b])}),this.i18nMap[c]=d}else{var f={namespace:a,parsePage:!1,locale:this.get("locale"),langPacks:{},region:this.get("region"),is4service:this.get("is4service"),source:this.get("source")||null};f.langPacks[this.get("locale")]=this.get("i18n"),this.i18nMap[c]=new q.default(f)}return this.i18nMap[c]||null},e.prototype.getComponentClass=function(a,b){var c=this.getComponentData(a);this.getComponentClassWithConfig(c,b)},e.prototype.getComponentClassWithConfig=function(a,b){var c=this;if(!a||!a.requirePath)return b&&b();var d=a.requirePath,e=a.children,f=this.getComClass(d);if(!f){var g="datav:"+d.replace(/^\/coms\//,"/com/");Cube.use(g,function(f){var g=c.get("componentFetchMiddleWare");"function"===typeof g&&(f=g(f,a.comName)),f&&c.setComClass(d,f),c.getChildComponentClass(e,b&&b.bind(b,f))})}else this.getChildComponentClass(e,b&&b.bind(b,f))},e.prototype.getChildComponentClass=function(a,b){var c=this;if(!a||!a.length)return b&&b();var d=0,e=a.length;(0,o.default)(a,function(a){c.getComponentClass(a,function(){d++,d>=e&&b&&b()})})},e.prototype.getComClass=function(a){return this.get("comClasses."+a.replace(/\./g,"_"))},e.prototype.setComClass=function(a,b){return this.set("comClasses."+a.replace(/\./g,"_"),b)},e.prototype.set=function(a,b){return(0,i.default)(this._attr,a,b),(0,g.default)(this._attr,a)},e.prototype.get=function(a){return(0,g.default)(this._attr,a)};var w="__DATAV_HotKeyLock__";e.prototype.setHotKeyLock=function(a){return this.set(w,a)},e.prototype.getHotKeyLock=function(){return this.get(w)},e.prototype.isInner=function(){var a=(this.get("region")||"").toUpperCase();return /^INNER/.test(a)};var x=null;return a.exports=function(a){return x||(x=new e(a)),x},a.exports});