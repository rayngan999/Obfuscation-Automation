var TrfAdManager=function(t){var e=window.webpackHotUpdateTrfAdManager;window.webpackHotUpdateTrfAdManager=function(t,n){!function(t,e){if(w[t]&&g[t]){for(var n in g[t]=!1,e)Object.prototype.hasOwnProperty.call(e,n)&&(y[n]=e[n]);0==--v&&0===m&&k()}}(t,n),e&&e(t,n)};var n,r=!0,o="ac2ec15bddda6cbfe2d1",i=1e4,a={},l=[],u=[];function c(t){var e=S[t];if(!e)return C;var r=function(r){return e.hot.active?(S[r]?-1===S[r].parents.indexOf(t)&&S[r].parents.push(t):(l=[t],n=r),-1===e.children.indexOf(r)&&e.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+t),l=[]),C(r)},o=function(t){return{configurable:!0,enumerable:!0,get:function(){return C[t]},set:function(e){C[t]=e}}};for(var i in C)Object.prototype.hasOwnProperty.call(C,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,o(i));return r.e=function(t){return"ready"===f&&p("prepare"),m++,C.e(t).then(e,function(t){throw e(),t});function e(){m--,"prepare"===f&&(b[t]||x(t),0===m&&0===v&&k())}},r.t=function(t,e){return 1&e&&(t=r(t)),C.t(t,-2&e)},r}var s=[],f="idle";function p(t){f=t;for(var e=0;e<s.length;e++)s[e].call(null,t)}var h,y,d,v=0,m=0,b={},g={},w={};function _(t){return+t+""===t?+t:t}function E(t){if("idle"!==f)throw new Error("check() is only allowed in idle status");return r=t,p("check"),function(t){return t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=C.p+""+o+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(t){return n(t)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(t){return void n(t)}e(t)}}})}(i).then(function(t){if(!t)return p("idle"),null;g={},b={},w=t.c,d=t.h,p("prepare");var e=new Promise(function(t,e){h={resolve:t,reject:e}});return y={},x(0),"prepare"===f&&0===m&&0===v&&k(),e})}function x(t){w[t]?(g[t]=!0,v++,function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=C.p+""+t+"."+o+".hot-update.js",e.appendChild(n)}(t)):b[t]=!0}function k(){p("ready");var t=h;if(h=null,t)if(r)Promise.resolve().then(function(){return O(r)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&e.push(_(n));t.resolve(e)}}function O(e){if("ready"!==f)throw new Error("apply() is only allowed in ready status");var n,r,i,u,c;function s(t){for(var e=[t],n={},r=e.slice().map(function(t){return{chain:[t],id:t}});r.length>0;){var o=r.pop(),i=o.id,a=o.chain;if((u=S[i])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:i};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:i};for(var l=0;l<u.parents.length;l++){var c=u.parents[l],s=S[c];if(s){if(s.hot._declinedDependencies[i])return{type:"declined",chain:a.concat([c]),moduleId:i,parentId:c};-1===e.indexOf(c)&&(s.hot._acceptedDependencies[i]?(n[c]||(n[c]=[]),h(n[c],[i])):(delete n[c],e.push(c),r.push({chain:a.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];-1===t.indexOf(r)&&t.push(r)}}e=e||{};var v={},m=[],b={},g=function(){console.warn("[HMR] unexpected require("+x.moduleId+") to disposed module")};for(var E in y)if(Object.prototype.hasOwnProperty.call(y,E)){var x;c=_(E);var k=!1,O=!1,j=!1,T="";switch((x=y[E]?s(c):{type:"disposed",moduleId:E}).chain&&(T="\nUpdate propagation: "+x.chain.join(" -> ")),x.type){case"self-declined":e.onDeclined&&e.onDeclined(x),e.ignoreDeclined||(k=new Error("Aborted because of self decline: "+x.moduleId+T));break;case"declined":e.onDeclined&&e.onDeclined(x),e.ignoreDeclined||(k=new Error("Aborted because of declined dependency: "+x.moduleId+" in "+x.parentId+T));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(x),e.ignoreUnaccepted||(k=new Error("Aborted because "+c+" is not accepted"+T));break;case"accepted":e.onAccepted&&e.onAccepted(x),O=!0;break;case"disposed":e.onDisposed&&e.onDisposed(x),j=!0;break;default:throw new Error("Unexception type "+x.type)}if(k)return p("abort"),Promise.reject(k);if(O)for(c in b[c]=y[c],h(m,x.outdatedModules),x.outdatedDependencies)Object.prototype.hasOwnProperty.call(x.outdatedDependencies,c)&&(v[c]||(v[c]=[]),h(v[c],x.outdatedDependencies[c]));j&&(h(m,[x.moduleId]),b[c]=g)}var P,I=[];for(r=0;r<m.length;r++)c=m[r],S[c]&&S[c].hot._selfAccepted&&I.push({module:c,errorHandler:S[c].hot._selfAccepted});p("dispose"),Object.keys(w).forEach(function(t){!1===w[t]&&function(t){delete installedChunks[t]}(t)});for(var A,M,H=m.slice();H.length>0;)if(c=H.pop(),u=S[c]){var R={},D=u.hot._disposeHandlers;for(i=0;i<D.length;i++)(n=D[i])(R);for(a[c]=R,u.hot.active=!1,delete S[c],delete v[c],i=0;i<u.children.length;i++){var N=S[u.children[i]];N&&(P=N.parents.indexOf(c))>=0&&N.parents.splice(P,1)}}for(c in v)if(Object.prototype.hasOwnProperty.call(v,c)&&(u=S[c]))for(M=v[c],i=0;i<M.length;i++)A=M[i],(P=u.children.indexOf(A))>=0&&u.children.splice(P,1);for(c in p("apply"),o=d,b)Object.prototype.hasOwnProperty.call(b,c)&&(t[c]=b[c]);var L=null;for(c in v)if(Object.prototype.hasOwnProperty.call(v,c)&&(u=S[c])){M=v[c];var F=[];for(r=0;r<M.length;r++)if(A=M[r],n=u.hot._acceptedDependencies[A]){if(-1!==F.indexOf(n))continue;F.push(n)}for(r=0;r<F.length;r++){n=F[r];try{n(M)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:c,dependencyId:M[r],error:t}),e.ignoreErrored||L||(L=t)}}}for(r=0;r<I.length;r++){var W=I[r];c=W.module,l=[c];try{C(c)}catch(t){if("function"==typeof W.errorHandler)try{W.errorHandler(t)}catch(n){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:n,originalError:t}),e.ignoreErrored||L||(L=n),L||(L=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:c,error:t}),e.ignoreErrored||L||(L=t)}}return L?(p("fail"),Promise.reject(L)):(p("idle"),new Promise(function(t){t(m)}))}var S={};function C(e){if(S[e])return S[e].exports;var r=S[e]={i:e,l:!1,exports:{},hot:function(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(t,n){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var r=0;r<t.length;r++)e._acceptedDependencies[t[r]]=n||function(){};else e._acceptedDependencies[t]=n||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._declinedDependencies[t[n]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var n=e._disposeHandlers.indexOf(t);n>=0&&e._disposeHandlers.splice(n,1)},check:E,apply:O,status:function(t){if(!t)return f;s.push(t)},addStatusHandler:function(t){s.push(t)},removeStatusHandler:function(t){var e=s.indexOf(t);e>=0&&s.splice(e,1)},data:a[t]};return n=void 0,e}(e),parents:(u=l,l=[],u),children:[]};return t[e].call(r.exports,r,r.exports,c(e)),r.l=!0,r.exports}return C.m=t,C.c=S,C.d=function(t,e,n){C.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},C.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},C.t=function(t,e){if(1&e&&(t=C(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(C.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)C.d(n,r,function(e){return t[e]}.bind(null,r));return n},C.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return C.d(e,"a",e),e},C.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},C.p="",C.h=function(){return o},c(91)(C.s=91)}([function(t,e,n){"use strict";var r=n(4),o=n(15),i=n(8),a=n(6),l=n(13),u=n(59).KEY,c=n(12),s=n(41),f=n(33),p=n(30),h=n(5),y=n(60),d=n(82),v=n(105),m=n(106),b=n(7),g=n(9),w=n(26),_=n(23),E=n(38),x=n(27),k=n(42),O=n(107),S=n(36),C=n(61),j=n(10),T=n(31),P=S.f,I=j.f,A=O.f,M=r.Symbol,H=r.JSON,R=H&&H.stringify,D=h("_hidden"),N=h("toPrimitive"),L={}.propertyIsEnumerable,F=s("symbol-registry"),W=s("symbols"),U=s("op-symbols"),V=Object.prototype,B="function"==typeof M&&!!C.f,G=r.QObject,q=!G||!G.prototype||!G.prototype.findChild,z=i&&c(function(){return 7!=k(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=P(V,e);r&&delete V[e],I(t,e,n),r&&t!==V&&I(V,e,r)}:I,Y=function(t){var e=W[t]=k(M.prototype);return e._k=t,e},Z=B&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},J=function(t,e,n){return t===V&&J(U,e,n),b(t),e=E(e,!0),b(n),o(W,e)?(n.enumerable?(o(t,D)&&t[D][e]&&(t[D][e]=!1),n=k(n,{enumerable:x(0,!1)})):(o(t,D)||I(t,D,x(1,{})),t[D][e]=!0),z(t,e,n)):I(t,e,n)},K=function(t,e){b(t);for(var n,r=v(e=_(e)),o=0,i=r.length;i>o;)J(t,n=r[o++],e[n]);return t},$=function(t){var e=L.call(this,t=E(t,!0));return!(this===V&&o(W,t)&&!o(U,t))&&(!(e||!o(this,t)||!o(W,t)||o(this,D)&&this[D][t])||e)},X=function(t,e){if(t=_(t),e=E(e,!0),t!==V||!o(W,e)||o(U,e)){var n=P(t,e);return!n||!o(W,e)||o(t,D)&&t[D][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=A(_(t)),r=[],i=0;n.length>i;)o(W,e=n[i++])||e==D||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===V,r=A(n?U:_(t)),i=[],a=0;r.length>a;)!o(W,e=r[a++])||n&&!o(V,e)||i.push(W[e]);return i};B||(l((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(U,n),o(this,D)&&o(this[D],t)&&(this[D][t]=!1),z(this,t,x(1,n))};return i&&q&&z(V,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",function(){return this._k}),S.f=X,j.f=J,n(39).f=O.f=Q,n(37).f=$,C.f=tt,i&&!n(29)&&l(V,"propertyIsEnumerable",$,!0),y.f=function(t){return Y(h(t))}),a(a.G+a.W+a.F*!B,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)h(et[nt++]);for(var rt=T(h.store),ot=0;rt.length>ot;)d(rt[ot++]);a(a.S+a.F*!B,"Symbol",{for:function(t){return o(F,t+="")?F[t]:F[t]=M(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!B,"Object",{create:function(t,e){return void 0===e?k(t):K(k(t),e)},defineProperty:J,defineProperties:K,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:tt});var it=c(function(){C.f(1)});a(a.S+a.F*it,"Object",{getOwnPropertySymbols:function(t){return C.f(w(t))}}),H&&a(a.S+a.F*(!B||c(function(){var t=M();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!Z(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Z(e))return e}),r[1]=e,R.apply(H,r)}}),M.prototype[N]||n(20)(M.prototype,N,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){n(82)("asyncIterator")},function(t,e,n){var r=n(6);r(r.S,"Object",{setPrototypeOf:n(65).set})},function(t,e,n){for(var r=n(14),o=n(31),i=n(13),a=n(4),l=n(20),u=n(32),c=n(5),s=c("iterator"),f=c("toStringTag"),p=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},y=o(h),d=0;d<y.length;d++){var v,m=y[d],b=h[m],g=a[m],w=g&&g.prototype;if(w&&(w[s]||l(w,s,p),w[f]||l(w,f,m),u[m]=p,b))for(v in r)w[v]||i(w,v,r[v],!0)}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(41)("wks"),o=n(30),i=n(4).Symbol,a="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:o)("Symbol."+t))}).store=r},function(t,e,n){var r=n(4),o=n(16),i=n(20),a=n(13),l=n(22),u=function(t,e,n){var c,s,f,p,h=t&u.F,y=t&u.G,d=t&u.S,v=t&u.P,m=t&u.B,b=y?r:d?r[e]||(r[e]={}):(r[e]||{}).prototype,g=y?o:o[e]||(o[e]={}),w=g.prototype||(g.prototype={});for(c in y&&(n=e),n)f=((s=!h&&b&&void 0!==b[c])?b:n)[c],p=m&&s?l(f,r):v&&"function"==typeof f?l(Function.call,f):f,b&&a(b,c,f,t&u.U),g[c]!=f&&i(g,c,p),v&&w[c]!=f&&(w[c]=f)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(9);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(12)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(7),o=n(67),i=n(38),a=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var r=n(71)(!0);n(50)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(4),o=n(20),i=n(15),a=n(30)("src"),l=n(94),u=(""+l).split("toString");n(16).inspectSource=function(t){return l.call(t)},(t.exports=function(t,e,n,l){var c="function"==typeof n;c&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(c&&(i(n,a)||o(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:l?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||l.call(this)})},function(t,e,n){"use strict";var r=n(79),o=n(80),i=n(32),a=n(23);t.exports=n(50)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";var r,o,i,a,l=n(29),u=n(4),c=n(22),s=n(44),f=n(6),p=n(9),h=n(35),y=n(53),d=n(54),v=n(55),m=n(76).set,b=n(101)(),g=n(56),w=n(77),_=n(102),E=n(78),x=u.TypeError,k=u.process,O=k&&k.versions,S=O&&O.v8||"",C=u.Promise,j="process"==s(k),T=function(){},P=o=g.f,I=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[n(5)("species")]=function(t){t(T,T)};return(j||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof e&&0!==S.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(t){}}(),A=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;b(function(){for(var r=t._v,o=1==t._s,i=0,a=function(e){var n,i,a,l=o?e.ok:e.fail,u=e.resolve,c=e.reject,s=e.domain;try{l?(o||(2==t._h&&D(t),t._h=1),!0===l?n=r:(s&&s.enter(),n=l(r),s&&(s.exit(),a=!0)),n===e.promise?c(x("Promise-chain cycle")):(i=A(n))?i.call(n,u,c):u(n)):c(r)}catch(t){s&&!a&&s.exit(),c(t)}};n.length>i;)a(n[i++]);t._c=[],t._n=!1,e&&!t._h&&H(t)})}},H=function(t){m.call(u,function(){var e,n,r,o=t._v,i=R(t);if(i&&(e=w(function(){j?k.emit("unhandledRejection",o,t):(n=u.onunhandledrejection)?n({promise:t,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=j||R(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){m.call(u,function(){var e;j?k.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},L=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw x("Promise can't be resolved itself");(e=A(t))?b(function(){var r={_w:n,_d:!1};try{e.call(t,c(L,r,1),c(N,r,1))}catch(t){N.call(r,t)}}):(n._v=t,n._s=1,M(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};I||(C=function(t){y(this,C,"Promise","_h"),h(t),r.call(this);try{t(c(L,this,1),c(N,this,1))}catch(t){N.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(57)(C.prototype,{then:function(t,e){var n=P(v(this,C));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=j?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=c(L,t,1),this.reject=c(N,t,1)},g.f=P=function(t){return t===C||t===a?new i(t):o(t)}),f(f.G+f.W+f.F*!I,{Promise:C}),n(33)(C,"Promise"),n(58)("Promise"),a=n(16).Promise,f(f.S+f.F*!I,"Promise",{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(l||!I),"Promise",{resolve:function(t){return E(l&&this===a?C:this,t)}}),f(f.S+f.F*!(I&&n(52)(function(t){C.all(t).catch(T)})),"Promise",{all:function(t){var e=this,n=P(e),r=n.resolve,o=n.reject,i=w(function(){var n=[],i=0,a=1;d(t,!1,function(t){var l=i++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[l]=t,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=P(e),r=n.reject,o=w(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(t,e,n){"use strict";var r=n(103),o=n(81);t.exports=n(104)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(o(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(o(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(7),o=n(26),i=n(24),a=n(40),l=n(85),u=n(86),c=Math.max,s=Math.min,f=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,y=function(t){return void 0===t?t:String(t)};n(87)("replace",2,function(t,e,n,d){return[function(r,o){var i=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,i,o):n.call(String(i),r,o)},function(t,e){var o=d(n,t,this,e);if(o.done)return o.value;var f=r(t),p=String(this),h="function"==typeof e;h||(e=String(e));var m=f.global;if(m){var b=f.unicode;f.lastIndex=0}for(var g=[];;){var w=u(f,p);if(null===w)break;if(g.push(w),!m)break;""===String(w[0])&&(f.lastIndex=l(p,i(f.lastIndex),b))}for(var _="",E=0,x=0;x<g.length;x++){w=g[x];for(var k=String(w[0]),O=c(s(a(w.index),p.length),0),S=[],C=1;C<w.length;C++)S.push(y(w[C]));var j=w.groups;if(h){var T=[k].concat(S,O,p);void 0!==j&&T.push(j);var P=String(e.apply(void 0,T))}else P=v(k,p,O,S,j,e);O>=E&&(_+=p.slice(E,O)+P,E=O+k.length)}return _+p.slice(E)}];function v(t,e,r,i,a,l){var u=r+t.length,c=i.length,s=h;return void 0!==a&&(a=o(a),s=p),n.call(l,s,function(n,o){var l;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":l=a[o.slice(1,-1)];break;default:var s=+o;if(0===s)return n;if(s>c){var p=f(s/10);return 0===p?n:p<=c?void 0===i[p-1]?o.charAt(1):i[p-1]+o.charAt(1):n}l=i[s-1]}return void 0===l?"":l})}})},function(t,e,n){var r=n(10),o=n(27);t.exports=n(8)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(35);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(66),o=n(28);t.exports=function(t){return r(o(t))}},function(t,e,n){var r=n(40),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){"use strict";n(97);var r=n(7),o=n(43),i=n(8),a=/./.toString,l=function(t){n(13)(RegExp.prototype,"toString",t,!0)};n(12)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?l(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)}):"toString"!=a.name&&l(function(){return a.call(this)})},function(t,e,n){var r=n(28);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!1},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(68),o=n(49);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){t.exports={}},function(t,e,n){var r=n(10).f,o=n(15),i=n(5)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(6);r(r.S+r.F,"Object",{assign:n(112)})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(37),o=n(27),i=n(23),a=n(38),l=n(15),u=n(67),c=Object.getOwnPropertyDescriptor;e.f=n(8)?c:function(t,e){if(t=i(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(l(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(68),o=n(49).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(16),o=n(4),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(29)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(7),o=n(96),i=n(49),a=n(48)("IE_PROTO"),l=function(){},u=function(){var t,e=n(47)("iframe"),r=i.length;for(e.style.display="none",n(70).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=r(t),n=new l,l.prototype=null,n[a]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){"use strict";var r=n(7);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(21),o=n(5)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){"use strict";var r=n(4),o=n(15),i=n(21),a=n(46),l=n(38),u=n(12),c=n(39).f,s=n(36).f,f=n(10).f,p=n(93).trim,h=r.Number,y=h,d=h.prototype,v="Number"==i(n(42)(d)),m="trim"in String.prototype,b=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,i=(e=m?e.trim():p(e,3)).charCodeAt(0);if(43===i||45===i){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var a,u=e.slice(2),c=0,s=u.length;c<s;c++)if((a=u.charCodeAt(c))<48||a>o)return NaN;return parseInt(u,r)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(v?u(function(){d.valueOf.call(n)}):"Number"!=i(n))?a(new y(b(e)),n,h):b(e)};for(var g,w=n(8)?c(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)o(y,g=w[_])&&!o(h,g)&&f(h,g,s(y,g));h.prototype=d,d.constructor=h,n(13)(r,"Number",h)}},function(t,e,n){var r=n(9),o=n(65).set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},function(t,e,n){var r=n(9),o=n(4).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(41)("keys"),o=n(30);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var r=n(29),o=n(6),i=n(13),a=n(20),l=n(32),u=n(98),c=n(33),s=n(72),f=n(5)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,y,d,v,m){u(n,e,y);var b,g,w,_=function(t){if(!p&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",x="values"==d,k=!1,O=t.prototype,S=O[f]||O["@@iterator"]||d&&O[d],C=S||_(d),j=d?x?_("entries"):C:void 0,T="Array"==e&&O.entries||S;if(T&&(w=s(T.call(new t)))!==Object.prototype&&w.next&&(c(w,E,!0),r||"function"==typeof w[f]||a(w,f,h)),x&&S&&"values"!==S.name&&(k=!0,C=function(){return S.call(this)}),r&&!m||!p&&!k&&O[f]||a(O,f,C),l[e]=C,l[E]=h,d)if(b={values:x?C:_("values"),keys:v?C:_("keys"),entries:j},m)for(g in b)g in O||i(O,g,b[g]);else o(o.P+o.F*(p||k),e,b);return b}},function(t,e,n){"use strict";var r=n(22),o=n(6),i=n(26),a=n(73),l=n(74),u=n(24),c=n(99),s=n(75);o(o.S+o.F*!n(52)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,f,p=i(t),h="function"==typeof this?this:Array,y=arguments.length,d=y>1?arguments[1]:void 0,v=void 0!==d,m=0,b=s(p);if(v&&(d=r(d,y>2?arguments[2]:void 0,2)),void 0==b||h==Array&&l(b))for(n=new h(e=u(p.length));e>m;m++)c(n,m,v?d(p[m],m):p[m]);else for(f=b.call(p),n=new h;!(o=f.next()).done;m++)c(n,m,v?a(f,d,[o.value,m],!0):o.value);return n.length=m,n}})},function(t,e,n){var r=n(5)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(t){}return n}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(22),o=n(73),i=n(74),a=n(7),l=n(24),u=n(75),c={},s={};(e=t.exports=function(t,e,n,f,p){var h,y,d,v,m=p?function(){return t}:u(t),b=r(n,f,e?2:1),g=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(i(m)){for(h=l(t.length);h>g;g++)if((v=e?b(a(y=t[g])[0],y[1]):b(t[g]))===c||v===s)return v}else for(d=m.call(t);!(y=d.next()).done;)if((v=o(d,b,y.value,e))===c||v===s)return v}).BREAK=c,e.RETURN=s},function(t,e,n){var r=n(7),o=n(35),i=n(5)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[i])?e:o(n)}},function(t,e,n){"use strict";var r=n(35);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){var r=n(13);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){"use strict";var r=n(4),o=n(10),i=n(8),a=n(5)("species");t.exports=function(t){var e=r[t];i&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(30)("meta"),o=n(9),i=n(15),a=n(10).f,l=0,u=Object.isExtensible||function(){return!0},c=!n(12)(function(){return u(Object.preventExtensions({}))}),s=function(t){a(t,r,{value:{i:"O"+ ++l,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!u(t))return"F";if(!e)return"E";s(t)}return t[r].i},getWeak:function(t,e){if(!i(t,r)){if(!u(t))return!0;if(!e)return!1;s(t)}return t[r].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!i(t,r)&&s(t),t}}},function(t,e,n){e.f=n(5)},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var r=n(43),o=RegExp.prototype.exec,i=String.prototype.replace,a=o,l=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=void 0!==/()??/.exec("")[1];(l||u)&&(a=function(t){var e,n,a,c,s=this;return u&&(n=new RegExp("^"+s.source+"$(?!\\s)",r.call(s))),l&&(e=s.lastIndex),a=o.call(s,t),l&&a&&(s.lastIndex=s.global?a.index+a[0].length:e),u&&a&&a.length>1&&i.call(a[0],n,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)}),a}),t.exports=a},function(t,e,n){var r=n(10).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(8)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},function(t,e,n){var r,o;/*!
* JavaScript Cookie v2.2.1
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/!function(i){void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o),t.exports=i()}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=t({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var l="";for(var u in i)i[u]&&(l+="; "+u,!0!==i[u]&&(l+="="+i[u].split(";")[0]));return document.cookie=e+"="+n+l}}function a(t,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var l=i[a].split("="),u=l.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=e(l[0]);if(u=(r.read||r)(u,c)||e(u),n)try{u=JSON.parse(u)}catch(t){}if(o[c]=u,t===c)break}catch(t){}}return t?o[t]:o}}return o.set=i,o.get=function(t){return a(t,!1)},o.getJSON=function(t){return a(t,!0)},o.remove=function(e,n){i(e,"",t(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})})},function(t,e,n){var r=n(9),o=n(7),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(22)(Function.call,n(36).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){var r=n(21);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){t.exports=!n(8)&&!n(12)(function(){return 7!=Object.defineProperty(n(47)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(15),o=n(23),i=n(92)(!1),a=n(48)("IE_PROTO");t.exports=function(t,e){var n,l=o(t),u=0,c=[];for(n in l)n!=a&&r(l,n)&&c.push(n);for(;e.length>u;)r(l,n=e[u++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){var r=n(40),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(4).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(40),o=n(28);t.exports=function(t){return function(e,n){var i,a,l=String(o(e)),u=r(n),c=l.length;return u<0||u>=c?t?"":void 0:(i=l.charCodeAt(u))<55296||i>56319||u+1===c||(a=l.charCodeAt(u+1))<56320||a>57343?t?l.charAt(u):i:t?l.slice(u,u+2):a-56320+(i-55296<<10)+65536}}},function(t,e,n){var r=n(15),o=n(26),i=n(48)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(7);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(32),o=n(5)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(44),o=n(5)("iterator"),i=n(32);t.exports=n(16).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r,o,i,a=n(22),l=n(100),u=n(70),c=n(47),s=n(4),f=s.process,p=s.setImmediate,h=s.clearImmediate,y=s.MessageChannel,d=s.Dispatch,v=0,m={},b=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},g=function(t){b.call(t.data)};p&&h||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){l("function"==typeof t?t:Function(t),e)},r(v),v},h=function(t){delete m[t]},"process"==n(21)(f)?r=function(t){f.nextTick(a(b,t,1))}:d&&d.now?r=function(t){d.now(a(b,t,1))}:y?(i=(o=new y).port2,o.port1.onmessage=g,r=a(i.postMessage,i,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(r=function(t){s.postMessage(t+"","*")},s.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(a(b,t,1),0)}),t.exports={set:p,clear:h}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(7),o=n(9),i=n(56);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(5)("unscopables"),o=Array.prototype;void 0==o[r]&&n(20)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var r=n(4),o=n(16),i=n(29),a=n(60),l=n(10).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||l(e,t,{value:a.f(t)})}},function(t,e,n){"use strict";var r=n(84),o=n(7),i=n(55),a=n(85),l=n(24),u=n(86),c=n(62),s=n(12),f=Math.min,p=[].push,h=!s(function(){RegExp(4294967295,"y")});n(87)("split",2,function(t,e,n,s){var y;return y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(o,t,e);for(var i,a,l,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,h=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,s+"g");(i=c.call(y,o))&&!((a=y.lastIndex)>f&&(u.push(o.slice(f,i.index)),i.length>1&&i.index<o.length&&p.apply(u,i.slice(1)),l=i[0].length,f=a,u.length>=h));)y.lastIndex===i.index&&y.lastIndex++;return f===o.length?!l&&y.test("")||u.push(""):u.push(o.slice(f)),u.length>h?u.slice(0,h):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var o=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,o,r):y.call(String(o),n,r)},function(t,e){var r=s(y,t,this,e,y!==n);if(r.done)return r.value;var c=o(t),p=String(this),d=i(c,RegExp),v=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),b=new d(h?c:"^(?:"+c.source+")",m),g=void 0===e?4294967295:e>>>0;if(0===g)return[];if(0===p.length)return null===u(b,p)?[p]:[];for(var w=0,_=0,E=[];_<p.length;){b.lastIndex=h?_:0;var x,k=u(b,h?p:p.slice(_));if(null===k||(x=f(l(b.lastIndex+(h?0:_)),p.length))===w)_=a(p,_,v);else{if(E.push(p.slice(w,_)),E.length===g)return E;for(var O=1;O<=k.length-1;O++)if(E.push(k[O]),E.length===g)return E;_=w=x}}return E.push(p.slice(w)),E}]})},function(t,e,n){var r=n(9),o=n(21),i=n(5)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){"use strict";var r=n(71)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){"use strict";var r=n(44),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},function(t,e,n){"use strict";n(108);var r=n(13),o=n(20),i=n(12),a=n(28),l=n(5),u=n(62),c=l("species"),s=!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=l(t),h=!i(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),y=h?!i(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!e}):void 0;if(!h||!y||"replace"===t&&!s||"split"===t&&!f){var d=/./[p],v=n(a,p,""[t],function(t,e,n,r,o){return e.exec===u?h&&!o?{done:!0,value:d.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),m=v[0],b=v[1];r(String.prototype,t,m),o(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},function(t,e,n){var r=n(4),o=n(46),i=n(10).f,a=n(39).f,l=n(84),u=n(43),c=r.RegExp,s=c,f=c.prototype,p=/a/g,h=/a/g,y=new c(p)!==p;if(n(8)&&(!y||n(12)(function(){return h[n(5)("match")]=!1,c(p)!=p||c(h)==h||"/a/i"!=c(p,"i")}))){c=function(t,e){var n=this instanceof c,r=l(t),i=void 0===e;return!n&&r&&t.constructor===c&&i?t:o(y?new s(r&&!i?t.source:t,e):s((r=t instanceof c)?t.source:t,r&&i?u.call(t):e),n?this:f,c)};for(var d=function(t){t in c||i(c,t,{configurable:!0,get:function(){return s[t]},set:function(e){s[t]=e}})},v=a(s),m=0;v.length>m;)d(v[m++]);f.constructor=c,c.prototype=f,n(13)(r,"RegExp",c)}n(58)("RegExp")},function(t,e,n){"use strict";var r=n(44),o={};o[n(5)("toStringTag")]="z",o+""!="[object z]"&&n(13)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},,function(t,e,n){t.exports=n(120)},function(t,e,n){var r=n(23),o=n(24),i=n(69);t.exports=function(t){return function(e,n,a){var l,u=r(e),c=o(u.length),s=i(a,c);if(t&&n!=n){for(;c>s;)if((l=u[s++])!=l)return!0}else for(;c>s;s++)if((t||s in u)&&u[s]===n)return t||s||0;return!t&&-1}}},function(t,e,n){var r=n(6),o=n(28),i=n(12),a=n(95),l="["+a+"]",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),s=function(t,e,n){var o={},l=i(function(){return!!a[t]()||"âÂ"!="âÂ"[t]()}),u=o[t]=l?e(f):a[t];n&&(o[n]=u),r(r.P+r.F*l,"String",o)},f=s.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=s},function(t,e,n){t.exports=n(41)("native-function-to-string",Function.toString)},function(t,e){t.exports="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff"},function(t,e,n){var r=n(10),o=n(7),i=n(31);t.exports=n(8)?Object.defineProperties:function(t,e){o(t);for(var n,a=i(e),l=a.length,u=0;l>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){n(8)&&"g"!=/./g.flags&&n(10).f(RegExp.prototype,"flags",{configurable:!0,get:n(43)})},function(t,e,n){"use strict";var r=n(42),o=n(27),i=n(33),a={};n(20)(a,n(5)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(10),o=n(27);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(4),o=n(76).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,l=r.Promise,u="process"==n(21)(a);t.exports=function(){var t,e,n,c=function(){var r,o;for(u&&(r=a.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!i||r.navigator&&r.navigator.standalone)if(l&&l.resolve){var s=l.resolve(void 0);n=function(){s.then(c)}}else n=function(){o.call(r,c)};else{var f=!0,p=document.createTextNode("");new i(c).observe(p,{characterData:!0}),n=function(){p.data=f=!f}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){var r=n(4).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(10).f,o=n(42),i=n(57),a=n(22),l=n(53),u=n(54),c=n(50),s=n(80),f=n(58),p=n(8),h=n(59).fastKey,y=n(81),d=p?"_s":"size",v=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var s=t(function(t,r){l(t,s,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=r&&u(r,n,t[c],t)});return i(s.prototype,{clear:function(){for(var t=y(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=y(this,e),r=v(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){y(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(y(this,e),t)}}),p&&r(s.prototype,"size",{get:function(){return y(this,e)[d]}}),s},def:function(t,e,n){var r,o,i=v(t,e);return i?i.v=n:(t._l=i={i:o=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[d]++,"F"!==o&&(t._i[o]=i)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=y(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?s(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,s(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(4),o=n(6),i=n(13),a=n(57),l=n(59),u=n(54),c=n(53),s=n(9),f=n(12),p=n(52),h=n(33),y=n(46);t.exports=function(t,e,n,d,v,m){var b=r[t],g=b,w=v?"set":"add",_=g&&g.prototype,E={},x=function(t){var e=_[t];i(_,t,"delete"==t?function(t){return!(m&&!s(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!s(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!s(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof g&&(m||_.forEach&&!f(function(){(new g).entries().next()}))){var k=new g,O=k[w](m?{}:-0,1)!=k,S=f(function(){k.has(1)}),C=p(function(t){new g(t)}),j=!m&&f(function(){for(var t=new g,e=5;e--;)t[w](e,e);return!t.has(-0)});C||((g=e(function(e,n){c(e,g,t);var r=y(new b,e,g);return void 0!=n&&u(n,v,r[w],r),r})).prototype=_,_.constructor=g),(S||j)&&(x("delete"),x("has"),v&&x("get")),(j||O)&&x(w),m&&_.clear&&delete _.clear}else g=d.getConstructor(e,t,v,w),a(g.prototype,n),l.NEED=!0;return h(g,t),E[t]=g,o(o.G+o.W+o.F*(g!=b),E),m||d.setStrong(g,t,v),g}},function(t,e,n){var r=n(31),o=n(61),i=n(37);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var a,l=n(t),u=i.f,c=0;l.length>c;)u.call(t,a=l[c++])&&e.push(a);return e}},function(t,e,n){var r=n(21);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(23),o=n(39).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(r(t))}},function(t,e,n){"use strict";var r=n(62);n(6)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){var r=n(6);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(6);r(r.P,"Array",{fill:n(111)}),n(79)("fill")},function(t,e,n){"use strict";var r=n(26),o=n(69),i=n(24);t.exports=function(t){for(var e=r(this),n=i(e.length),a=arguments.length,l=o(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:o(u,n);c>l;)e[l++]=t;return e}},function(t,e,n){"use strict";var r=n(8),o=n(31),i=n(61),a=n(37),l=n(26),u=n(66),c=Object.assign;t.exports=!c||n(12)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r})?function(t,e){for(var n=l(t),c=arguments.length,s=1,f=i.f,p=a.f;c>s;)for(var h,y=u(arguments[s++]),d=f?o(y).concat(f(y)):o(y),v=d.length,m=0;v>m;)h=d[m++],r&&!p.call(y,h)||(n[h]=y[h]);return n}:c},function(t,e,n){var r=n(6);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(36),o=n(72),i=n(15),a=n(6),l=n(9),u=n(7);a(a.S,"Reflect",{get:function t(e,n){var a,c,s=arguments.length<3?e:arguments[2];return u(e)===s?e[n]:(a=r.f(e,n))?i(a,"value")?a.value:void 0!==a.get?a.get.call(s):void 0:l(c=o(e))?t(c,n,s):void 0}})},function(t,e,n){n(0),n(89),t.exports=n(16).Symbol},function(t,e,n){n(11),n(3),t.exports=n(60).f("iterator")},function(t,e,n){n(89),n(11),n(3),n(17),n(118),n(119),t.exports=n(16).Promise},function(t,e,n){"use strict";var r=n(6),o=n(16),i=n(4),a=n(55),l=n(78);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,o.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return l(e,t()).then(function(){return n})}:t,n?function(n){return l(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(6),o=n(56),i=n(77);r(r.S,"Promise",{try:function(t){var e=o.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n(45),n(25),n(11),n(51),Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=Math.pow(2,53)-1,r=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),n)};return function(t){var n=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!e(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var a,l=r(n.length),u=e(this)?Object(new this(l)):new Array(l),c=0;c<l;)a=n[c],u[c]=i?void 0===o?i(a,c):i.call(o,a,c):a,c+=1;return u.length=l,u}}()),n(17),n(3),n(14),n(18);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=new Map}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"setWidget",value:function(t,e){this.map.set(t,e)}},{key:"get",value:function(t){var e=this.map.get(t);return null==e?null:e}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();o.instance=null;var i=o;function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=new Map}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"set",value:function(t,e){this.map.set(t,new e)}},{key:"get",value:function(t){var e=this.map.get(t);return null==e?null:e}},{key:"decide",value:function(t){for(var e=Array.from(this.map.values()),n=0;n<e.length;n++){var r=e[n];if(r.isOptionsValid(t))return r}return null}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var u=l;function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.widgetFactory=i.getInstance(),this.contentProviderFactory=u.getInstance(),this.map=new Map,this.instanceMap=new Map}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(t,[{key:"setTemplate",value:function(t,e){this.map.set(t,e)}},{key:"get",value:function(t){return this._getInstance(t)}},{key:"_getInstance",value:function(t){var e=this.instanceMap.get(t);if(null==e){var n=this.map.get(t);if(null==n)return null;e=new n(this.widgetFactory,this.contentProviderFactory),this.instanceMap.set(t,e)}return e}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();s.instance=null;var f=s;function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e}return function(t,e,n){e&&p(t.prototype,e),n&&p(t,n)}(t,[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;if(window.traffective.logger)for(var o=0;o<e.length;o++){var i;(i=window.traffective).logger.apply(i,[this.type+": "+new String(e[o])].concat(e))}else(r=console).log.apply(r,[this.type,":"].concat(e))}}],[{key:"get",value:function(e){return void 0===e&&(e="default"),void 0===t.instances.get(e)&&t.instances.set(e,new t(e)),t.instances.get(e)}}]),t}();h.instances=new Map;var y=h;function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(1),n(0),n(2);var v=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerNode=e,this.params=n}return function(t,e,n){e&&d(t.prototype,e)}(t,[{key:"init",value:function(){throw new Error("Not implemented")}}]),t}();function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(83);var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&b(t,n)}(t,0,[{key:"getPreviousSiblingElement",value:function(t){return t.previousElementSibling}},{key:"setStyleByElements",value:function(e,n,r){for(var o=0;o<e.length;o++)t.setStyle(e[o],n,r)}},{key:"setStyle",value:function(t,e,n){var r=n;!0===(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).important&&(r+="!important"),t.style.cssText=t.style.cssText+";"+e+":"+r}},{key:"setClass",value:function(t,e){var n=t.className.split(" "),r=!0,o=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)if(a.value===e)return}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}n.push(e),t.className=n.join(" ")}},{key:"unsetClass",value:function(t,e){var n=t.className.split(" "),r=[],o=!0,i=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c!==e&&r.push(c)}}catch(t){i=!0,a=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}t.className=r.join(" ")}},{key:"appendStyle",value:function(t,e){var n=e.createElement("style");n.type="text/css",n.appendChild(e.createTextNode(t)),e.head.appendChild(n)}},{key:"isNode",value:function(t){return"object"===("undefined"==typeof Node?"undefined":m(Node))?t instanceof Node:t&&"object"===m(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}},{key:"isElement",value:function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":m(HTMLElement))?t instanceof HTMLElement:t&&"object"===m(t)&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}},{key:"getScrollY",value:function(t){if(void 0!==t.scrollY)return t.scrollY;if(void 0!==t.pageYOffset)return t.pageYOffset;throw new Error("Browser doesnt support scrollY and pageYOffset")}}]),t}();function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(63);var _=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.document=e.ownerDocument,this.params=n,this.userContent=null,this.elementHeight=null,this.userContentHeight=null,this.contentPosition=null,this.elementPosition=null,this.debug=!1,this.viewportHeight=0,this.touchmoveEvents=0,this._resizeWindow()}return function(t,e,n){e&&w(t.prototype,e)}(t,[{key:"init",value:function(){this._injectCss(),this._build()}},{key:"_injectCss",value:function(){var e=this.document.createElement("style");e.setAttribute("type","text/css"),e.appendChild(this.document.createTextNode(t.css)),this.document.head.appendChild(e)}},{key:"_build",value:function(){if(1!==this.element.children.length)throw new Error("Parallax missing content or has more than one element.");null===this.params.clipWidth?this.element.style.display="block":(this.element.style.display="inline-block",this.element.style.width=this.params.clipWidth+"px"),this.element.style.height=this.params.clipHeight+"px";var t=Math.round((this.params.clipWidth-this.params.width)/2),e=this.element.children[0];e.style.marginLeft=t+"px",g.setClass(e,"trf-parallax-content");var n=this.document.createElement("div");n.className="trf-parallax-container";var r=this.document.createElement("div"),o=n.appendChild(r);r.className="trf-parallax-divAbs";var i=this.document.createElement("div");r.appendChild(i),i.className="trf-parallax-divFix";var a=this.document.createElement("div");i.appendChild(a),a.className="trf-parallax-divCreativeHolder",this.userContent=a.appendChild(e),this.element.appendChild(n).style.height=this.params.clipHeight+"px",this.userContent.style.height=this.params.adHeight+"px",this.userContent.style.top="0px",this.userContent.style.willChange="transform",this.elementHeight=this.element.offsetHeight,this.userContentHeight=this.userContent.offsetHeight,null===this.params.clipWidth&&this.document.defaultView.setInterval(this._updateContainerWidth.bind(this),500),this.document.defaultView.addEventListener("resize",this._resizeWindow.bind(this)),this._prepareDebugging(o);var l=function(t,e,n){var r;return function(){var e=this,n=arguments;clearTimeout(r),r=setTimeout(function(){r=null,t.apply(e,n)},10)}}(this._positionUserContent.bind(this));this._loop(l)}},{key:"_loop",value:function(t){t(),this.document.defaultView.requestAnimationFrame(this._loop.bind(this,t))}},{key:"_resizeWindow",value:function(){this.viewportHeight=this.document.defaultView.innerHeight}},{key:"_updateContainerWidth",value:function(){var t=this.element.getBoundingClientRect(),e=t.right-t.left,n=Math.round((e-this.params.width)/2);this.userContent.style.marginLeft=n+"px"}},{key:"_positionUserContent",value:function(t){this.touchmoveEvents++;var e=this._getElementPosition(this.element);if(this.elementPosition!==e){this.elementPosition=e;var n=e/(this.viewportHeight-this.elementHeight),r=this.userContentHeight;n>1?n=1:n<0&&(n=0);var o=-1*n*(r-this.viewportHeight);this.userContent.style.WebkitTransform="translateY("+o+"px)",this.userContent.style.transform="translateY("+o+"px)",this.contentPosition!==o&&(this.contentPosition=o)}}},{key:"_prepareDebugging",value:function(t){if(!1!==this.debug){var e=this.document.createElement("div");e.className="trf-parallax-debug",t.appendChild(e)}}},{key:"_debug",value:function(t){if(!1!==this.debug){var e=this.element.querySelector(".trf-parallax-debug"),n=[];for(var r in t)n.push(r+": "+JSON.stringify(t[r]));e.innerHTML=n.join("<br/>")}}},{key:"_getElementPosition",value:function(t){return t.getBoundingClientRect().top}}]),t}();_.css="\n            .trf-parallax-container * {\n                -moz-transition: none;\n                -webkit-transition: none;\n                -o-transition: color 0 ease-in;\n                transition: none;\n            }\n\n            .trf-parallax-container {\n                width: 100%;\n                position: relative;\n                overflow: initial;\n                margin: 0 auto;\n            }\n\n            .trf-parallax-debug {\n                position:absolute;\n                top:10px;\n                left:10px;\n                z-index:999;\n                background-color:white;\n                color:black;\n                padding:10px;\n                border:1px solid black;\n                width:300px;\n            }\n\n            .trf-parallax-divAbs {\n                width: 100%;\n                height: 100%;\n                overflow: auto;\n                position: absolute;\n                top: 0;\n                left: 0;\n                clip: rect(auto,auto,auto,auto);\n            }\n\n            .trf-parallax-divFix {\n                height: 100%;\n                height: 100vh;\n                width:100%; /* Maximalbreite definieren */\n                position: fixed;\n                top: 0px;\n                -moz-transform: translateZ(0);\n                -webkit-transform: translateZ(0);\n                -ms-transform: translateZ(0);\n                -o-transform: translateZ(0);\n                transform: translateZ(0);\n                margin: 0 auto;\n            }\n\n            .trf-parallax-divCreativeHolder {\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                -moz-transform: translateZ(0);\n                -webkit-transform: translateZ(0);\n                -ms-transform: translateZ(0);\n                -o-transform: translateZ(0);\n                transform: translateZ(0);\n            }\n\n            .trf-parallax-content {\n                left:0;\n                /*right:0;*/\n                /*margin:auto;*/\n                border: none;\n                position: absolute;\n                bottom: 0;\n                -moz-transform: translateZ(0);\n                -webkit-transform: translateZ(0);\n                -ms-transform: translateZ(0);\n                -o-transform: translateZ(0);\n                transform: translateZ(0);\n            }\n\n";var E=_;function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=O(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(e,v),function(t,e,n){e&&k(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new E(this.containerNode,this.params),this.widget.init()}}]),e}();function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var T=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.document=e.ownerDocument,this.params=n,this.userContent=null,this.elementHeight=null,this.userContentHeight=null,this.contentPosition=null,this.elementPosition=null,this.debug=!1,this.viewportHeight=0,this._resizeWindow()}return function(t,e,n){e&&j(t.prototype,e)}(t,[{key:"init",value:function(){this._injectCss(),this._build()}},{key:"_injectCss",value:function(){var e=this.document.createElement("style");e.setAttribute("type","text/css"),e.appendChild(this.document.createTextNode(t.css)),this.document.head.appendChild(e)}},{key:"_build",value:function(){if(1!==this.element.children.length)throw new Error("Parallax missing content or has more than one element.");null===this.params.clipWidth?this.element.style.display="block":(this.element.style.display="inline-block",this.element.style.width=this.params.clipWidth+"px"),this.element.style.height=this.params.clipHeight+"px",this.element.style.overflow="hidden",this.userContent=this.document.createElement("div");var t=!0,e=!1,n=void 0;try{for(var r,o=this.element.children[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;this.userContent.appendChild(i)}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}this.element.appendChild(this.userContent),this.userContent.style.willChange="transform",this.userContent.style.height=this.params.adHeight+"px",this.userContent.style.overflow="hidden",this.elementHeight=this.element.offsetHeight,this.userContentHeight=this.userContent.offsetHeight,null===this.params.clipWidth&&this.document.defaultView.setInterval(this._updateContainerWidth.bind(this),500),this.document.defaultView.addEventListener("resize",this._resizeWindow.bind(this)),this._loop()}},{key:"_updateUserContentDimensions",value:function(){!0===this.params.adjustToContentHeight&&(this.userContentHeight=this.userContent.offsetHeight,this.elementHeight=this.element.offsetHeight)}},{key:"_loop",value:function(){this._updateUserContentDimensions(),this._positionUserContent(),this.document.defaultView.requestAnimationFrame(this._loop.bind(this))}},{key:"_resizeWindow",value:function(){this.viewportHeight=this.document.defaultView.innerHeight}},{key:"_updateContainerWidth",value:function(){var t=this.element.getBoundingClientRect(),e=t.right-t.left,n=Math.round((e-this.params.width)/2);this.userContent.style.marginLeft=n+"px"}},{key:"_positionUserContent",value:function(){var t=this._getElementPosition(this.element);this.elementPosition=t;var e=t/(this.viewportHeight-this.elementHeight),n=this.userContentHeight;e>1?e=1:e<0&&(e=0);var r=-1*e*(n-this.elementHeight);this.userContent.style.transform="translateY("+r+"px)"}},{key:"_getElementPosition",value:function(t){return t.getBoundingClientRect().top}}]),t}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}T.css="\n";var H=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,A(e).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(e,T),function(t,e,n){e&&I(t.prototype,e)}(e,[{key:"_positionUserContent",value:function(){var t=(this.viewportHeight-this.userContentHeight)/2-this._getElementPosition(this.element);this.userContent.style.transform="translateY("+Math.floor(t)+"px)"}}]),e}();function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.userContent=null,this.document=e.ownerDocument,this.params=n,this.cache={contentHeight:null}}return function(t,e,n){e&&R(t.prototype,e)}(t,[{key:"init",value:function(){if(1!==this.element.children.length)throw new Error("Parallax missing content or has more than one element.");var t=null!==this.params.clipWidth?this.params.clipWidth+"px":"100%";this.element.style.position="relative",this.element.style.display="block",this.element.style.width=t,this.element.style.height=this.params.clipHeight+"px";var e=this.document.createElement("div");this.element.appendChild(e),e.style.position="absolute",e.style.height="100%",e.style.width="100%",e.style.clip="rect(0px, auto, auto, 0px)",null!==this.params.width&&this.params.width,this.userContent=this.document.createElement("div");var n=!0,r=!1,o=void 0;try{for(var i,a=this.element.children[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;this.userContent.appendChild(l)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}e.appendChild(this.userContent),this.userContent.style.position="fixed",this.params.adHeight&&(this.userContent.style.height=this.params.adHeight+"px"),this.userContent.style.display="block",this.userContent.style.overflow="hidden",this.userContent.style.top="50%",this.userContent.style.transform="translateY(-50%)",this._updateContentPosition(this.params.width),setInterval(this._updateContentPosition.bind(this,this.params.width),200)}},{key:"_updateContentPosition",value:function(t){var e=this.userContent.parentElement.getBoundingClientRect(),n=e.right-e.left;null===t?this.userContent.style.width=n:(this.userContent.style.width=t+"px",this.userContent.style.marginLeft=Math.round((n-t)/2)+"px")}}]),t}();function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var L=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.userContent=null,this.document=e.ownerDocument,this.params=n,this.cache={contentHeight:null}}return function(t,e,n){e&&N(t.prototype,e)}(t,[{key:"init",value:function(){if(1!==this.element.children.length)throw new Error("Parallax missing content or has more than one element.");var t=null!==this.params.clipWidth?this.params.clipWidth+"px":"100%";this.element.style.position="relative",this.element.style.display="block",this.element.style.width=t,this.element.style.height=this.params.clipHeight+"px";var e=this.document.createElement("div");this.element.appendChild(e),e.style.position="absolute",e.style.height="100%",e.style.width="100%",e.style.clip="rect(0px, auto, auto, 0px)",null!==this.params.width&&this.params.width,this.userContent=this.document.createElement("div");var n=!0,r=!1,o=void 0;try{for(var i,a=this.element.children[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;this.userContent.appendChild(l)}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}e.appendChild(this.userContent),this.userContent.style.position="fixed",this.userContent.style.display="block",this.userContent.style.overflow="hidden",this.userContent.style.top="50%",this.userContent.style.left="50%",this.userContent.style.transform="translate3d(-50%, -50%, 0px)",this._updateContentPosition(this.params.width),setInterval(this._updateContentPosition.bind(this,this.params.width),200)}},{key:"_updateContentPosition",value:function(t){var e=this.userContent.parentElement.getBoundingClientRect(),n=e.right-e.left;null===t?this.userContent.style.width=n:(this.userContent.style.width=t+"px",this.userContent.style.marginLeft=Math.round((n-t)/2)+"px")}}]),t}();function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.strategies=new Map,this.strategies.set("default",T),this.strategies.set("static",H),this.strategies.set("staticCss",D),this.strategies.set("programmatic",L)}return function(t,e,n){e&&F(t.prototype,e),n&&F(t,n)}(t,[{key:"get",value:function(t,e,n){return new(this.strategies.get(t))(e,n)}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}W.instance=null;var V=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=void 0===n.underscrollerType?"default":n.underscrollerType;this.behaviour=W.getInstance().get(r,e,n)}return function(t,e,n){e&&U(t.prototype,e)}(t,[{key:"init",value:function(){this.behaviour.init()}}]),t}();function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=q(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,v),function(t,e,n){e&&G(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new V(this.containerNode,this.params),this.widget.init()}}]),e}();function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(109),n(110);var J=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&Z(t,n)}(t,0,[{key:"isInternetExplorer",value:function(t){var e=!1,n=t.navigator.userAgent,r=n.indexOf("MSIE "),o=n.indexOf("Trident/"),i=n.indexOf("Edge");return(r>-1||o>-1||-1!==i)&&(e=!0),e}}]),t}();function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&K(t,n)}(t,0,[{key:"parse",value:function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",o=e.toString(),i={},a=t.getNormalizedParameters(o,r,n.length),l=0;l<n.length;l++){var u=a[l],c=n[l],s=t.parseParameter(u,c);i[c.name]=s}return i}},{key:"getNormalizedParameters",value:function(t,e,n){var r=new Array(n);if(r.fill(void 0),void 0===t)return r;var o=t.split(e),i=0,a=!0,l=!1,u=void 0;try{for(var c,s=o[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value;if(i===n)break;var p=f.trim();0!==p.length&&(r[i]=p,i++)}}catch(t){l=!0,u=t}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}return r}},{key:"parseParameter",value:function(t,e){try{switch(e.type){case"int":var n=parseInt(t);return Number.isNaN(n)?e.default:n}}catch(t){return e.default}}}]),t}();function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}var et=function(){function t(){X(this,t)}return tt(t,null,[{key:"getAvailableWidth",value:function(t,e){t.ownerDocument.defaultView;var n=e.getBoundingClientRect().right;return t.ownerDocument.getElementsByTagName("html")[0].clientWidth-n}},{key:"getAvailableHeight",value:function(t,e){return e.ownerDocument.defaultView.innerHeight}}]),t}(),nt=function(){function t(e,n){X(this,t),this.document=e.ownerDocument,this.params=n,this.skyElement=e,this.contextElement=n.contextElement,this.topMargin=this._parseTopMargin(n.topMargin),this.intervalId=null,this.scrollEventListener=this._reposition.bind(this)}return tt(t,[{key:"init",value:function(){void 0!==this.skyElement.sitebarWidget&&this.skyElement.sitebarWidget.destroy(),this.skyElement.sitebarWidget=this,this._build()}},{key:"destroy",value:function(){this.document.removeEventListener("scroll",this.scrollEventListener),this.document.defaultView.clearInterval(this.intervalId),delete this.skyElement.sitebarWidget}},{key:"_build",value:function(){var t=this;this._prepareSky(),this.intervalId=this.document.defaultView.setInterval(function(){t._reposition()},500),this.document.addEventListener("scroll",this.scrollEventListener)}},{key:"_reposition",value:function(){var t=this.contextElement.getBoundingClientRect();this.skyElement.style.left=t.right+"px";var e=et.getAvailableWidth(this.skyElement,this.contextElement)-this.params.leftMargin;this.skyElement.style.width=e+"px";var n=t.top,r=g.getScrollY(this.document.defaultView)>=this.topMargin.scrollThreshold?this.topMargin.afterScroll:this.topMargin.beforeScroll;n<r&&(n=r),this.skyElement.style.top=n+"px";var o=et.getAvailableHeight(this.skyElement,this.contextElement)-n;this.skyElement.style.height=o+"px"}},{key:"_prepareSky",value:function(){g.setStyle(this.skyElement,"position","fixed",{important:!0}),this.skyElement.style.float="none",this.skyElement.style.bottom="",this.skyElement.style.right="",this.skyElement.style.marginLeft=this.params.leftMargin+"px",this.skyElement.style.marginRight="",this.skyElement.style.marginTop="",this.skyElement.style.marginBottom="",this.skyElement.style.zIndex="2",this.skyElement.style.top=this.topMargin.beforeScroll+"px",this._reposition()}},{key:"_parseTopMargin",value:function(t){var e=$.parse(t,[{name:"beforeScroll",type:"int",default:0},{name:"afterScroll",type:"int",default:null},{name:"scrollThreshold",type:"int",default:1}]);return null===e.afterScroll&&(e.afterScroll=e.beforeScroll),e}}]),t}();function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lt=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=it(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,v),function(t,e,n){e&&ot(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new nt(this.containerNode,this.params),this.widget.init()}}]),e}();function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(34),n(19);var ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.idToElementMap=new Map}return function(t,e,n){e&&ut(t.prototype,e),n&&ut(t,n)}(t,[{key:"register",value:function(t,e){this.idToElementMap.set(t,e)}},{key:"unregister",value:function(t){var e=this.idToElementMap.get(t);return this.idToElementMap.delete(t),e}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ct.instance=null;for(var st=ct,ft="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),pt=new Uint8Array(16),ht=[],yt=0;yt<256;++yt)ht.push((yt+256).toString(16).substr(1));var dt=function(t,e,n){var r=(t=t||{}).random||(t.rng||function(){if(!ft)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ft(pt)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=r[o];return e}return function(t,e){var n=e||0;return(ht[t[n+0]]+ht[t[n+1]]+ht[t[n+2]]+ht[t[n+3]]+"-"+ht[t[n+4]]+ht[t[n+5]]+"-"+ht[t[n+6]]+ht[t[n+7]]+"-"+ht[t[n+8]]+ht[t[n+9]]+"-"+ht[t[n+10]]+ht[t[n+11]]+ht[t[n+12]]+ht[t[n+13]]+ht[t[n+14]]+ht[t[n+15]]).toLowerCase()}(r)};function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.widgetFactory=e,this.contentProviderFactory=n,this.logger=y.get("Adlib"),this.templateStore=st.getInstance()}return function(t,e,n){e&&vt(t.prototype,e)}(t,[{key:"_destroyWidget",value:function(t,e){var n=this.templateStore.unregister(t);void 0!==n&&(n.trfWidgetInstance.destroy(e===n),delete n.trfWidgetInstance)}},{key:"build",value:function(){throw new Error("Not implemented")}},{key:"_buildWidget",value:function(t,e,n){var r=n.id;void 0===r&&(r=dt());var o=this.widgetFactory.get(t);if(null===o)throw new Error("Ad with id "+t+" not implemented.");var i=new o(e,n);return e.trfWidgetInstance=i,i.init(),this.templateStore.register(r,e),new function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e}(r)}},{key:"_broadcastEvent",value:function(t,e){var n=new CustomEvent(t,{bubbles:!1});e.dispatchEvent(n);var r=!0,o=!1,i=void 0;try{for(var a,l=e.children[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;this._broadcastEvent(t,u)}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}},{key:"_notifyTemplateDeployed",value:function(t,e){"function"==typeof t.eventTemplateDeployed&&t.eventTemplateDeployed(e)}}]),t}();function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&bt(t,n)}(t,0,[{key:"buildIframeUrl",value:function(t,e){var n=(-1===t.indexOf("?")?"?":"&")+"clickTag=";return t.indexOf("?rd=")>-1&&(n=""),t+n+encodeURIComponent(e)}},{key:"buildClickUrl",value:function(t,e){return e+t}}]),t}();function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(){return(_t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ot=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,xt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(e,mt),function(t,e,n){e&&Et(t.prototype,e),n&&Et(t,n)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var n=this,r=t.containerHeight,o=t.imageUpload,i=t.imageUrl,a=t.htmlUrl,l=t.clickthrough,u=e.getNullIfEmptyOrZero(t.adWidth),c=t.adHeight,s=t.clickmacro,f=t.htmlFileupload,p=t.elementSelector,h=t.thirdPartyCount,y=t.context,d=t.underscrollerType,v=e.getNullIfEmptyOrZero(t.containerWidth),m=!1!==t.showDeclaration;"string"==typeof f&&f.length>0&&(a=f);var b="";null!=o&&o.length>0&&(b=o),null!=i&&i.length>0&&(b=i),function(){var o=y.createElement("div");o.setAttribute("class","underscroller");var i=y.querySelector(p);if(null===i)throw new Error("Container element not found: "+p);var f="",g="",w=y.createElement("DIV");m&&w.classList.add("trf-declaration-container"),w.classList.add("trf-parallaxContainer"),new Promise(function(r){var i=n.contentProviderFactory.get("scriptTag"),p=n.contentProviderFactory.get("iframe"),h=n.contentProviderFactory.get("htmlUpload"),d=_t({contextDocument:y},t,{htmlUrl:a});if(i.isOptionsValid(d))i.generate(d).then(function(t){o.appendChild(t),w.appendChild(o),r()});else if(p.isOptionsValid(d))p.generate(d).then(function(t){o.appendChild(t),w.appendChild(o),r()});else if(h.isOptionsValid(d))h.generate(d).then(function(t){o.appendChild(t),w.appendChild(o),r()});else{if(void 0!==b&&b.length>0){var v=e.generateImageDimensions(u,c);g='\x3c!-- <a href="{link}" target="_blank" style="width:IMAGEWIDTH"> <img src="IMAGESOURCE" width="IMAGEWIDTH" height="IMAGEHEIGHT" ></img> </a> --\x3e'.replace("\x3c!--","").replace("{link}",gt.buildClickUrl(l,s)).replace("IMAGESOURCE",b).replace(/IMAGEWIDTH/g,v.width).replace("IMAGEHEIGHT",v.height).replace("--\x3e","")}f+='\x3c!-- <div class="underscroller">ADFORMAT</div> --\x3e'.replace("\x3c!--","").replace("ADFORMAT",g).replace("--\x3e",""),w.innerHTML=f,r()}}).then(function(){w.appendChild(n._getThirdPartyCount(h,y)),n._prepareTemplateContainer(i,t);var e=i.parentNode.insertBefore(w,i);i.style.display="none";var o=e.querySelector(".underscroller"),a={adHeight:c,clipHeight:r,clipWidth:v,width:u,adjustToContentWidth:t.adjustToContentWidth,adjustToContentHeight:t.adjustToContentHeight,underscrollerType:d};n._buildWidget("ampParallax",o,a),n._broadcastEvent("trfDeployed",o),J.isInternetExplorer(y.defaultView)&&o.addEventListener("click",function(){y.defaultView.open(gt.buildClickUrl(l,s))})})}()}},{key:"_prepareTemplateContainer",value:function(t,e){var n=t.parentNode;!0===e.correctParentHeight&&(n.style.height="")}},{key:"_getThirdPartyCount",value:function(t,e){if(""!==t){var n=e.createElement("div");n.setAttribute("style","display:none");var r=e.createElement("img");return r.src=t,r.setAttribute("width","1"),r.setAttribute("height","1"),n.appendChild(r),n}return e.createTextNode("")}}],[{key:"isEmptyOrZero",value:function(t){if(null==t)return!0;var e=t.toString();return 0===e.length||"0"===e}},{key:"getNullIfEmptyOrZero",value:function(t){return e.isEmptyOrZero(t)?null:parseInt(t)}},{key:"generateImageDimensions",value:function(t,e){return null===t?{width:"100%",height:"auto"}:{width:t+"px",height:"auto"}}}]),e}();function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,jt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(e,mt),function(t,e,n){e&&Ct(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=t.contextDocument.querySelector(t.contextElementSelector),n=t.contextDocument.querySelector(t.skyElementSelector);null==e&&y.get().error("Context element not found: "+t.contextElementSelector),null==n&&y.get().error("Sky element not found."+t.skyElementSelector);var r={contextElement:e,topMargin:void 0!==t.topMargin?t.topMargin:void 0,leftMargin:t.leftMargin?t.leftMargin:0,skipMoveToBody:!0===t.skipMoveToBody};this._buildWidget("stickySky",n,r)}}]),e}();function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var At=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logger=y.get("StickySky"),this.document=e.ownerDocument,this.params=n,this._setParams(),this.skyElement=e,this.intervalId=null,this.scrollEventListener=this._placeSky.bind(this)}return function(t,e,n){e&&It(t.prototype,e)}(t,[{key:"_setParams",value:function(){this.contextElement=this.params.contextElement,this.topMargin=this._parseTopMargin(this.params.topMargin)}},{key:"init",value:function(){var t={};void 0!==this.skyElement.stickySkyWidget&&(t=this.skyElement.stickySkyWidget.params,this.skyElement.stickySkyWidget.destroy(),this.params=Object.assign(t,this.params),this._setParams()),this.skyElement.stickySkyWidget=this,this._build()}},{key:"destroy",value:function(){this.document.removeEventListener("scroll",this.scrollEventListener),this.document.defaultView.clearInterval(this.intervalId),delete this.skyElement.stickySkyWidget}},{key:"_build",value:function(){var t=this;this._prepareSky(),this.intervalId=this.document.defaultView.setInterval(function(){t._placeSky(),t._reposition()},500),this.document.addEventListener("scroll",this.scrollEventListener)}},{key:"_reposition",value:function(){var t=this.contextElement.getBoundingClientRect();switch(this.params.position){case"left":var e=this.skyElement.getBoundingClientRect(),n=e.right-e.left;this.skyElement.style.left=t.left-n+"px";break;case"right":default:this.skyElement.style.left=t.right+"px"}}},{key:"_prepareSky",value:function(){switch(!0!==this.params.skipMoveToBody&&(this.skyElement=this.document.body.appendChild(this.skyElement)),g.setStyle(this.skyElement,"position","fixed",{important:!0}),this.skyElement.style.float="none",this.skyElement.style.bottom="",this.skyElement.style.right="",this.params.position){case"left":this.skyElement.style.marginRight=this.params.leftMargin+"px",this.skyElement.style.marginLeft="";break;case"right":default:this.skyElement.style.marginLeft=this.params.leftMargin+"px",this.skyElement.style.marginRight=""}this.skyElement.style.marginTop="",this.skyElement.style.marginBottom="",this.skyElement.style.zIndex="2",this._reposition(),this._placeSky()}},{key:"_placeSky",value:function(){g.setStyle(this.skyElement,"position","fixed",{important:!0});var t=this.contextElement.getBoundingClientRect().top,e=g.getScrollY(this.document.defaultView)>=this.topMargin.scrollThreshold?this.topMargin.afterScroll:this.topMargin.beforeScroll;t<e&&(t=e),this.skyElement.style.top=t+"px"}},{key:"_parseTopMargin",value:function(t){var e=$.parse(t,[{name:"beforeScroll",type:"int",default:0},{name:"afterScroll",type:"int",default:null},{name:"scrollThreshold",type:"int",default:1}]);return null===e.afterScroll&&(e.afterScroll=e.beforeScroll),e}}]),t}();function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nt=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=Rt(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(e,v),function(t,e,n){e&&Ht(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new At(this.containerNode,this.params),this.widget.init()}}]),e}();function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t,e){return(Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Wt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(e,mt),function(t,e,n){e&&Ft(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=this,n=t.imageUpload,r=t.imageUrl,o=t.htmlUrl,i=t.clickthrough,a=t.clickmacro,l=t.thirdPartyCount,u=t.contextDocument,c="";null!=n&&n.length>0&&(c=n),null!=r&&r.length>0&&(c=r),function(){var n="CLICKMACROCLICKTHROUGH".replace("CLICKTHROUGH",i).replace("CLICKMACRO",a),r=u.body,s="",f="";if(null!=o&&""!==o){var p="?clickTag=";o.indexOf("?rd=")>-1&&(p=""),o=o+p+a,f='\x3c!-- <iframe frameborder="0" width="IFRAMEWIDTH" height="IFRAMEHEIGHT" src="IFRAMESOURCE" scrolling="no"></iframe> --\x3e'.replace("\x3c!--","").replace("IFRAMEWIDTH","100%").replace("IFRAMEHEIGHT","100%").replace("IFRAMESOURCE",o).replace("--\x3e","")}else""!==c&&(f='\x3c!-- <a href="{link}" target="_blank"> <img src="IMAGESOURCE" width="IMAGEWIDTH" height="IMAGEHEIGHT" ></img> </a> --\x3e'.replace("\x3c!--","").replace("{link}",n).replace("IMAGESOURCE",c).replace("IMAGEHEIGHT","100%").replace("--\x3e",""));s+='\x3c!-- <div class="push-down" style="line-height:0px">ADFORMAT</div> THIRDPARTYCOUNT --\x3e'.replace("\x3c!--","").replace("ADFORMAT",f).replace("THIRDPARTYCOUNT",e._getThirdPartyCount(l)).replace("--\x3e",""),r.insertAdjacentHTML("afterbegin",s);var h=r.querySelector(".push-down"),y={initialHeight:t.initialHeight,expandedHeight:t.expandedHeight};e._buildWidget("pushDown",h,y),h.addEventListener("click",function(){u.defaultView.open(n)})}()}},{key:"_getThirdPartyCount",value:function(t){return""!==t?'<div style="display:none;"><img src="'+t+'" width="1" height="1"/></div>':""}}]),e}();function Bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qt(t,e,n){return e&&Gt(t.prototype,e),n&&Gt(t,n),t}var zt=function(){function t(e){Bt(this,t);var n=e.ownerDocument.createElement("div");this.element=e.ownerDocument.body.appendChild(n),this.element.style.position="fixed",this.element.style.bottom="0",this.element.style.left="0",this.element.style.height="20vh",this.element.style.overflow="auto",this.element.style.padding="0.5em",this.element.style.width="100%",this.element.style.border="1px solid #000",this.element.style.backgroundColor="white",this.document=e.ownerDocument}return qt(t,[{key:"log",value:function(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++){var i=n[o];t.push(JSON.stringify(i))}var a=this.document.createElement("p");a.style.padding="0",a.style.margin="0",a.appendChild(this.document.createTextNode(t.join(""))),this.element.insertBefore(a,this.element.firstChild)}}]),t}(),Yt=function(){function t(e){Bt(this,t),this.channels=new Map,this.contextElement=e}return qt(t,[{key:"log",value:function(t){for(var e=this._getOrCreateChannel(t),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.log.apply(e,r)}},{key:"_getOrCreateChannel",value:function(t){if(!1===this.channels.has(t)){var e=new zt(this.contextElement);this.channels.set(t,e)}return this.channels.get(t)}}]),t}();function Zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.document=e.ownerDocument,this.element=e,this.container=null,this.expansionElement=null,this.params=n,this.transition={speed:.5},this.initialHeight=n.initialHeight,this.expandedHeight=n.expandedHeight,this.debug=!1,this.debugSession=new Yt(this.document.body),this.scrollEventCallback=this._onScroll.bind(this)}return function(t,e,n){e&&Zt(t.prototype,e)}(t,[{key:"init",value:function(){this._build()}},{key:"_build",value:function(){this._prepare(),this.document.defaultView.setTimeout(this._expand.bind(this),100),this.scrollEventListener=this.document.defaultView.addEventListener("scroll",this.scrollEventCallback)}},{key:"_prepare",value:function(){var t=this.document.createElement("div");t.appendChild(this.element),this.container=this.document.body.insertBefore(t,this.document.body.firstChild),g.setClass(this.element,"trf-pushdown-content");var e=this.document.createElement("div");e.style.height=this.initialHeight+"px",e.style.transition="height {speed}s".replace("{speed}",this.transition.speed),g.setClass(e,"trf-pushdown-expander"),this.expansionElement=this.document.body.insertBefore(e,this.document.body.firstChild),this.element.style.height="100%",this.element.style.width="100%",this.container.style.zIndex="99999",this.container.style.position="fixed",this.container.style.float="none",this.container.style.width="100%",this.container.style.bottom="",this.container.style.right="",this.container.style.top="0",this.container.style.left="0",this.container.style.height=this.initialHeight+"px",this.container.style.transition="height {speed}s".replace("{speed}",this.transition.speed);var n=this.document.createElement("div");n.style.display="inline-block",n.style.opacity="0.5",n.style.cursor="pointer",n.style.position="absolute",n.style.left="0",n.style.bottom="0",n.style.lineHeight="1.5em",n.style.borderRadius="0.75em",n.style.backgroundColor="#999999",n.style.paddingLeft="1em",n.style.paddingRight="1em",n.style.marginBottom="1em",n.style.marginLeft="1em",n.appendChild(this.document.createTextNode("Close")),n.addEventListener("click",this._onClose.bind(this)),this.container.appendChild(n)}},{key:"_onClose",value:function(){var t=this;this.document.defaultView.removeEventListener("scroll",this.scrollEventCallback),this._close(),this.document.defaultView.setTimeout(function(){t.container.parentNode.removeChild(t.container),t.expansionElement.parentNode.removeChild(t.expansionElement)},1e3*this.transition.speed)}},{key:"_onScroll",value:function(){var t=this.expansionElement.getBoundingClientRect().top;this.debug&&this.debugSession.log("default","scrollPosition:",t),t<0?this._rewind():this._expand()}},{key:"_setHeight",value:function(t,e){t.style.height=e+"px"}},{key:"_expand",value:function(){this._setHeight(this.container,this.expandedHeight),this._setHeight(this.expansionElement,this.expandedHeight)}},{key:"_rewind",value:function(){this._setHeight(this.container,this.initialHeight),this._setHeight(this.expansionElement,this.initialHeight)}},{key:"_close",value:function(){this._setHeight(this.container,0),this._setHeight(this.expansionElement,0)}}]),t}();function Kt(t){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var te=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==Kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=Xt(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(e,v),function(t,e,n){e&&$t(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new Jt(this.containerNode,this.params),this.widget.init()}}]),e}();function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(113);var ne=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&ee(t.prototype,e)}(t,[{key:"replace",value:function(t,e,n){throw new Error("Has to be implemented by child class.")}},{key:"getValue",value:function(){throw new Error("Has to be implemented by child class.")}}]),t}();function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var le=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ie(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(e,ne),function(t,e,n){e&&oe(t.prototype,e)}(e,[{key:"replace",value:function(t,e,n){var r=this._convertInputToOutput(e,n);t.textContent=r}},{key:"_convertInputToOutput",value:function(t,e){null==t&&(t="");var n=Number.MAX_SAFE_INTEGER;e.maxLength&&(n=e.maxLength);var r=!1;e.addDots&&t.length>n&&(n-=3,r=!0);var o=t.substr(0,n);return r&&(o+="..."),o}},{key:"getValue",value:function(t){return t.textContent}}]),e}();function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ce=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){n&&ue(t,n)}(t,0,[{key:"handleRelAttribute",value:function(t,e){var n="nofollow";"string"==typeof e.rel?n=e.rel:!1===e.rel&&(n=null),null===n?t.removeAttribute("rel"):"A"===t.tagName.toUpperCase()&&t.setAttribute("rel",n)}}]),t}();function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ye=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,pe(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(e,ne),function(t,e,n){e&&fe(t.prototype,e)}(e,[{key:"replace",value:function(t,e,n){t.setAttribute("href",e),"A"===t.tagName.toUpperCase()&&ce.handleRelAttribute(t,n.globalContext)}},{key:"getValue",value:function(t){return t.getAttribute("href")}}]),e}();function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function me(t){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function be(t,e){return(be=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ge=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,me(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&be(t,e)}(e,ne),function(t,e,n){e&&ve(t.prototype,e)}(e,[{key:"replace",value:function(t,e){t.setAttribute("src",e)}},{key:"getValue",value:function(t){return t.getAttribute("src")}}]),e}();function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _e=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=new Map,this.map.set("text",new le),this.map.set("src",new ge),this.map.set("href",new ye)}return function(t,e,n){e&&we(t.prototype,e)}(t,[{key:"get",value:function(t){var e=this.map.get(t);return null==e?null:e}}]),t}();function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(){return(xe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ce=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==Ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Oe(e).call(this))).pluginFactory=new _e,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(e,mt),function(t,e,n){e&&ke(t.prototype,e)}(e,[{key:"reset",value:function(t,n){var r=this._getPlaceholders(t),o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,s=c.node._nativeOriginalValues;null==s&&(s={});var f=e.placeholders[c.name];if(!1!==Array.isArray(f)){var p=!0,h=!1,y=void 0;try{for(var d,v=f[Symbol.iterator]();!(p=(d=v.next()).done);p=!0){var m=d.value,b=m.plugin,g=this.pluginFactory.get(b);if(null!==g){var w=s[b];null!=w&&"undefined"!==w||(w=""),g.replace(c.node,w,xe({},m,{globalContext:n}))}}}catch(t){h=!0,y=t}finally{try{p||null==v.return||v.return()}finally{if(h)throw y}}}}}catch(t){i=!0,a=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"_getPlaceholders",value:function(t){var e=t.querySelectorAll("[data-placeholder-id]"),n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value,c=u.getAttribute("data-placeholder-id");null!=c&&0!==c.length&&n.push({node:u,name:c})}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}},{key:"build",value:function(t){var e=t.element;if(!1!==g.isElement(e)&&null!=t.placeholders){var n=this._getPlaceholders(e),r=!0,o=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value,c=t.placeholders[u.name];null!=c&&"undefined"!==c||(c=""),this._replace(u.name,c,u.node,t)}}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}}},{key:"_replace",value:function(t,n,r,o){var i=e.placeholders[t];if(!1!==Array.isArray(i)){var a={},l=!0,u=!1,c=void 0;try{for(var s,f=i[Symbol.iterator]();!(l=(s=f.next()).done);l=!0){var p=s.value,h=p.plugin,y=this.pluginFactory.get(h);if(null!==y){var d=y.getValue(r);y.replace(r,n,xe({},p,{globalContext:o})),a[h]=d}}}catch(t){u=!0,c=t}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}r._nativeOriginalValues=a}}}]),e}();Ce.placeholders={title:[{plugin:"text",maxLength:60,addDots:!0}],kicker:[{plugin:"text",maxLength:60,addDots:!1}],body:[{plugin:"text",maxLength:170,addDots:!0}],sponsor:[{plugin:"text",maxLength:25,addDots:!0}],imgSrc:[{plugin:"src"}],icon:[{plugin:"src"}],clickUrl:[{plugin:"href"}],cta:[{plugin:"href"}]};var je=Ce;function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Pe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clickTrackerListener=null}return function(t,e,n){e&&Te(t.prototype,e)}(t,[{key:"_destroyClickTrackers",value:function(t){var e=this;null!==this.clickTrackerListener&&(t.querySelectorAll("a").forEach(function(t){t.removeEventListener("click",e.clickTrackerListener)}),this.clickTrackerListener=null)}},{key:"_buildClickTrackers",value:function(t,e,n){var r=this,o=t.querySelectorAll("a");this.clickTrackerListener=this._onClickTrackerClick.bind(this,e,n),o.forEach(function(t){t.addEventListener("click",r.clickTrackerListener)})}},{key:"_onClickTrackerClick",value:function(t,e){t.forEach(function(t){try{e(t)}catch(t){}})}}]),t}();function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Me(t){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function He(t,e){return(He=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Re=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Me(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&He(t,e)}(e,Pe),function(t,e,n){e&&Ae(t.prototype,e)}(e,[{key:"destroy",value:function(t){var e=this._getNative(t);if(null===e)throw new Error("Native element not in DOM.");this._setVisibility(!1,e),this._destroyClickTrackers(e),(new je).reset(e,t),this._postProcess(t,e)}},{key:"_postProcess",value:function(t,e){this._setTarget(t.anchorTarget,e)}},{key:"_setTarget",value:function(t,e){Array.from(e.querySelectorAll("a")).forEach(function(e){var n=e.getAttribute("target");null!=n&&""!==n||(n=void 0),void 0!==t&&(n=t),void 0===n&&(n="_blank"),e.setAttribute("target",n)})}},{key:"_setVisibility",value:function(t,n){var r=t?"visible":"hidden";g.setStyle(n,"visibility",r);for(var o=0;o<e.visibilitySelectors.length;o++)g.setStyleByElements(n.querySelectorAll(e.visibilitySelectors[o]),"visibility",r)}},{key:"build",value:function(t){t.contextDocument.querySelector(t.elementSelector);var e=this._getNative(t);if(null===e)throw new Error("Native element not in DOM.");var n=t.placeholders,r=new je,o={element:e,placeholders:n,rel:t.rel};r.build(o),e.style.display="",this._setVisibility(!0,e),this._postProcess(t,e),Array.isArray(t.clickTrackers)&&"function"==typeof t.fireRequest&&this._buildClickTrackers(e,t.clickTrackers,t.fireRequest)}},{key:"_getNative",value:function(t){var e=t.templateSelector;return void 0===e?null:t.contextDocument.querySelector(e)}},{key:"accept",value:function(t){if(null===t.contextDocument.querySelector(t.elementSelector))throw new Error("Target element not found for selector "+t.elementSelector);var e=this._getNative(t);return null!==e&&null!=e.querySelector("[data-placeholder-id]")}}]),e}();Re.visibilitySelectors=[".id-Teaser-el--proBEEP",".id-Teaser-el--nativeBEEPtemplate"];var De=Re;function Ne(t,e){this.definedTemplate=t,this.isDefault=!0===e}n(88),Ne.prototype.getHtml=function(t){return this._replacePlaceholders(t)},Ne.prototype.getCss=function(){return this.definedTemplate.css},Ne.prototype._replacePlaceholders=function(t){var e=this.definedTemplate.html;for(var n in t){var r=t[n];null!=r&&"undefined"!==r||(r="");var o=new RegExp("\\{"+n+"\\}","g");e=e.replace(o,r)}return Ne._removePlaceholders(e)},Ne._removePlaceholders=function(t){return t.replace(/\{[a-z_\-0-9]+\}/gi,"")};var Le=Ne;function Fe(t){this.target=t.target,this.method=t.method}Fe.prototype.send=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new XMLHttpRequest;e.withCredentials&&(n.withCredentials=!0),n.onreadystatechange=function(){4==this.readyState&&(200==this.status?t(this.responseText):t(null,new Error("Response status "+new String(this.status))))};try{n.open(this.method,this.target,!0),n.send()}catch(e){t(null,new Error("Error sending request",e))}};var We=Fe;function Ue(){this.defaultTemplate={html:'<div class="an-native-ad stacked" style="display:block;max-width:300px;text-align: left"><a href="{clickUrl}" target="_blank"><img class="an-native-img" src="{imgSrc}" style="max-width:300px;" /></a><header class="an-native-headline" style="font-weight:bold;font-size:1.3em;"><a href="{clickUrl}" target="_blank">{title}</a></header><div class="an-native-body" style="margin:5px 0;"><a href="{clickUrl}" target="_blank">{body}</a></div><div class="an-native-sponsor-wrapper" style="color:#999999;font-size:0.8em;"></div></div>',css:".an-native-ad.stacked a { color: #000; text-decoration: none;}"},this.demoMapping={templates:{keyvaluetemplate:{html:"<div>keyvaluetemplate{sponsor}</div>",css:"div {color:red}"},adunitdefaulttemplate:{html:"<div>adunitdefaulttemplate</div>",css:"div {color:red}"}},adunits:{adunit1:{defaultTemplate:"adunitdefaulttemplate",mappings:[{key:"key1",value:"value1",template:"keyvaluetemplate"}]}}}}Ue.prototype._getMapping=function(t,e){var n="https://cdntrf.com/native-templates/{domain}/mapping.json".replace("{domain}",t);new We({target:n,method:"get"}).send(function(t){var n=null;null!==t&&(n=JSON.parse(t)),e(n)})},Ue.prototype._isEmpty=function(t){return null==t||""===t},Ue.prototype.getTemplate=function(t,e){this._getMapping(t.domain,function(n){var r=this._decideTemplate(t,n),o=this.defaultTemplate,i=!0;if(null!==r){var a=n.templates[r];null!=a&&(o=a,i=!1)}e(new Le(o,i))}.bind(this))},Ue.prototype._decideTemplate=function(t,e){if(!this._isEmpty(t.domain)){var n=null;if(null==e)return n;if(this._isEmpty(t.adunit))return n;var r=e.adunits[t.adunit];if(null==r)return n;if(!1===this._isEmpty(r.defaultTemplate)&&(n=r.defaultTemplate),!1===Array.isArray(r.mappings)||!1===Array.isArray(t.targeting))return n;var o=!1,i=!0,a=!1,l=void 0;try{for(var u,c=t.targeting[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value,f=!0,p=!1,h=void 0;try{for(var y,d=r.mappings[Symbol.iterator]();!(f=(y=d.next()).done);f=!0){var v=y.value;if(v.key===s.key&&v.value===s.value&&!1===this._isEmpty(v.template)){n=v.template,o=!0;break}}}catch(t){p=!0,h=t}finally{try{f||null==d.return||d.return()}finally{if(p)throw h}}if(o)break}}catch(t){a=!0,l=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}return n}reject(new Error("Domain not specified"))};var Ve=Ue;function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ge=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&Be(t.prototype,e),n&&Be(t,n)}(t,[{key:"get",value:function(t){var e=new Ve;return new Promise(function(n,r){e.getTemplate(t,function(t){n(t)})})}}],[{key:"getInstance",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Ge.instance=null;var qe=Ge;function ze(t){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ze(t){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Je(t,e){return(Je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ke=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==ze(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ze(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Je(t,e)}(e,Pe),function(t,e,n){e&&Ye(t.prototype,e)}(e,[{key:"destroy",value:function(t){var e=t.contextDocument.querySelector(t.elementSelector);if(null!==e)for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"build",value:function(t){var e=this,n=t.contextDocument.querySelector(t.elementSelector);if(null!==n)return qe.getInstance().get(t.filter).then(function(r){var o=r.getHtml(t.placeholders),i=r.getCss(),a=t.contextDocument.createElement("div");a.innerHTML=o,n.appendChild(a);for(var l=n.querySelectorAll("a"),u=0;u<l.length;u++)ce.handleRelAttribute(l[u],t);try{document.querySelectorAll(t.elementSelector+' >[id^="google_ads_"]')[0].style.height="1px"}catch(t){}var c=t.contextDocument.createElement("style");null!=c&&(c.type="text/css",c.appendChild(t.contextDocument.createTextNode(i)),t.contextDocument.head.appendChild(c)),Array.isArray(t.clickTrackers)&&"function"==typeof t.fireRequest&&e._buildClickTrackers(a,t.clickTrackers,t.fireRequest)});this.logger.debug("Target Element with selector "+t.elementSelector+" not found.")}},{key:"accept",value:function(t){return!0}},{key:"prepare",value:function(t){}}]),e}();function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handlers=new Map,this.handlers.set("cms",new De),this.handlers.set("template",new Ke)}return function(t,e,n){e&&$e(t.prototype,e)}(t,[{key:"getBySelector",value:function(t){var e=this._getHandlerTypeBySelector(t);return this.handlers.get(e)}},{key:"_getHandlerTypeBySelector",value:function(t){var e=[];this.handlers.forEach(function(t,n){return e.push(n)});for(var n=0;n<e.length;n++){var r=e[n];if(this.handlers.get(r).accept(t))return r}throw new Error("No handler accepted Native element")}}]),t}();function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==Qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,en(e).call(this,t))).handlerFactory=new Xe,n.logger=y.get("Native"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(e,mt),function(t,e,n){e&&tn(t.prototype,e)}(e,[{key:"_destroy",value:function(t){return this.handlerFactory.getBySelector(t).destroy(t)}},{key:"_build",value:function(t){return this.handlerFactory.getBySelector(t).build(t)}},{key:"build",value:function(t){try{switch(t.command){case"build":this._build(t);break;case"destroy":this._destroy(t)}}catch(t){throw t}}}]),e}();function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function un(t,e){return(un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ln(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&un(t,e)}(e,mt),function(t,e,n){e&&an(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=this,n=t.containerHeight,r=t.imageUpload,o=t.imageUrl,i=t.htmlUrl,a=t.clickthrough,l=t.adWidth,u=t.adHeight,c=t.clickmacro,s=t.elementSelector,f=t.thirdPartyCount,p=t.context,h=t.containerWidth;null!=h&&0!==h.toString().length||(h=null);var y="";null!=r&&r.length>0&&(y=r),null!=o&&o.length>0&&(y=o),function(){var r=p.querySelector(s),o="",d="";""!==i?d='\x3c!-- <iframe frameborder="0" width="IFRAMEWIDTH" height="IFRAMEHEIGHT" src="IFRAMESOURCE" scrolling="no"></iframe> --\x3e'.replace("\x3c!--","").replace("IFRAMEWIDTH",l).replace("IFRAMEHEIGHT",u).replace("IFRAMESOURCE",gt.buildIframeUrl(i,c,a)).replace("--\x3e",""):""!==y&&(d='\x3c!-- <a href="{link}" target="_blank"> <img src="IMAGESOURCE" width="IMAGEWIDTH" height="IMAGEHEIGHT" ></img> </a> --\x3e'.replace("\x3c!--","").replace("{link}",gt.buildClickUrl(a,c)).replace("IMAGESOURCE",y).replace("IMAGEWIDTH",l+"px").replace("IMAGEHEIGHT",u+"px").replace("--\x3e","")),o+='\x3c!-- <div class="underscroller">ADFORMAT</div> THIRDPARTYCOUNT --\x3e'.replace("\x3c!--","").replace("ADFORMAT",d).replace("THIRDPARTYCOUNT",e._getThirdPartyCount(f)).replace("--\x3e","");var v=p.createElement("DIV");v.classList.add("trf-declaration-container"),v.classList.add("trf-parallaxContainer"),v.innerHTML=o,e._prepareTemplateContainer(r,t);var m=r.parentNode.insertBefore(v,r);r.style.display="none";var b=m.querySelector(".underscroller"),g={adHeight:u,clipHeight:n,clipWidth:h,width:l};e._buildWidget("ampParallax",b,g),e._broadcastEvent("trfDeployed",b),J.isInternetExplorer(p.defaultView)&&b.addEventListener("click",function(){p.defaultView.open(gt.buildClickUrl(a,c))})}()}},{key:"_prepareTemplateContainer",value:function(t,e){var n=t.parentNode;!0===e.correctParentHeight&&(n.style.height="")}},{key:"_getThirdPartyCount",value:function(t){return""!==t?'<div style="display:none;"><img src="'+t+'" width="1" height="1"/></div>':""}}]),e}();function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pn(t){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hn(t,e){return(hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==sn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,pn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hn(t,e)}(e,mt),function(t,e,n){e&&fn(t.prototype,e)}(e,[{key:"build",value:function(t){this._getContent(t)}},{key:"_getContent",value:function(t){var e=this,n=t.contextDocument.querySelector(t.contextElementSelector),r=t.contextDocument.querySelector(t.skyElementSelector);if(null==n)throw new Error("Context element not found: "+t.contextElementSelector);if(null==r)throw new Error("Sky element not found."+t.skyElementSelector);t.adWidth="100%",t.adHeight="100%";var o=this.contentProviderFactory.decide(t);if(null===o)throw new Error("No content provider accepts the params.");o.generate(t).then(function(o){o.addEventListener("trfContentDeployed",function(n){e._notifyTemplateDeployed(t,{content:n.detail})}),r.appendChild(o);var i={contextElement:n,topMargin:t.topMargin,leftMargin:t.leftMargin?t.leftMargin:0};e._buildWidget("sitebar",r,i),e._broadcastEvent("trfDeployed",r),e._hideGoogleIframe(r)})}},{key:"_hideGoogleIframe",value:function(t){var e=t.querySelector("[id^='google']");null!==e&&(e.style.display="none")}}]),e}();yn.html5AdTemplate='<iframe frameborder="0" width="100%" height="100%" src="IFRAMESOURCE" scrolling="no"></iframe>';var dn=yn;function vn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logger=y.get("AdManager")}return function(t,e,n){e&&vn(t.prototype,e)}(t,[{key:"generate",value:function(t){throw new Error("Has to be implemented by the child class")}},{key:"isOptionsValid",value:function(t){throw new Error("Has to be implemented by the child class")}},{key:"_notifyContentDeployed",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new CustomEvent("trfContentDeployed",{bubbles:!1,detail:e});t.dispatchEvent(n)}}]),t}();function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wn(t){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _n(t,e){return(_n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var En=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,wn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_n(t,e)}(e,mn),function(t,e,n){e&&gn(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return void 0!==t.scriptTag&&""!==t.scriptTag&&void 0!==t.contextDocument}},{key:"_fetchContent",value:function(t){var e=new RegExp(/<script[^>]+src="([^"]+)"/,"gmi").exec(t);if(2!==e.length)throw new Error("Can't fetch ad content given by "+t);var n=e[1],r=new We({target:n,method:"get"});return new Promise(function(t,e){r.send(function(e){t(e)},{withCredentials:!0})})}},{key:"_adjustDimensions",value:function(t,e){return!0===e.adjustToContentWidth&&null!=t.contentWindow.document.body&&(t.style.width=t.contentWindow.document.body.scrollWidth+"px"),!0===e.adjustToContentHeight&&null!=t.contentWindow.document.body&&(t.style.height=t.contentWindow.document.body.scrollHeight+"px"),t}},{key:"generate",value:function(t){var e=this;return this._fetchContent(t.scriptTag).then(function(n){e._checkContentEmpty(n)&&e.logger.debug("Yieldlab ad is empty.");var r=t.contextDocument,o=r.createElement("iframe");o.setAttribute("id",dt()),o.setAttribute("style","width:100%;height:100%;border:0;"),e._overrideStyles(o,t.contextDocument,t);var i=r.createTextNode(n);return o.addEventListener("trfDeployed",function(){e._setupDimensionUpdate(o,t);var n=r.createElement("script");n.appendChild(i),o.contentWindow.document.getElementsByTagName("head")[0].appendChild(n)}),o})}},{key:"_checkContentEmpty",value:function(t){return/default Yieldlab fallback with no content/.test(t)}},{key:"_setupDimensionUpdate",value:function(t,e){t.ownerDocument.defaultView.setInterval(this._adjustDimensions.bind(this,t,e),500)}},{key:"_overrideStyles",value:function(t,e,n){var r=t.getAttribute("id"),o=[];!0!==n.adjustToContentWidth&&o.push("width:100% !important"),!0!==n.adjustToContentHeight&&o.push("height:100% !important"),0!==o.length&&g.appendStyle("#{id} {{styles}}".replace("{id}",r).replace("{styles}",o.join(";")),e)}}]),e}();function xn(t){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function On(t){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}En.noop=function(){},n(114);var Cn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==xn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,On(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e)}(e,g),function(t,e,n){n&&kn(t,n)}(e,0,[{key:"removeElement",value:function(t){t.parentElement.removeChild(t)}},{key:"runScripts",value:function(t){function e(t,e){return t.nodeName&&t.nodeName.toUpperCase()===e.toUpperCase()}function n(t){var e=t.ownerDocument,n=t.text||t.textContent||t.innerHTML||"",r=e.getElementsByTagName("head")[0]||e.documentElement,o=e.createElement("script");o.type="text/javascript";try{o.appendChild(e.createTextNode(n))}catch(t){o.text=n}r.insertBefore(o,r.firstChild),r.removeChild(o)}var r,o,i,a=[],l=t.childNodes;for(i=0;l[i];i++)!e(o=l[i],"script")||o.type&&"text/javascript"!==o.type.toLowerCase()||a.push(o);for(i=0;a[i];i++)(r=a[i]).parentNode&&r.parentNode.removeChild(r),n(a[i])}}]),e}();function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var An=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Pn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(e,mn),function(t,e,n){e&&Tn(t.prototype,e),n&&Tn(t,n)}(e,[{key:"isOptionsValid",value:function(t){return"string"==typeof t.htmlUrl&&t.htmlUrl.length>0&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var n=t.contextDocument,r={width:e.getDimension(t.adWidth),height:e.getDimension(t.adHeight)},o=t.clickmacro,i=t.clickthrough,a='\x3c!-- <iframe frameborder="0" width="IFRAMEWIDTH" height="IFRAMEHEIGHT" src="IFRAMESOURCE" scrolling="no"></iframe> --\x3e'.replace("\x3c!--","").replace("IFRAMEWIDTH","100%").replace("IFRAMEHEIGHT","100%").replace("IFRAMESOURCE",gt.buildIframeUrl(t.htmlUrl,o,i)).replace("--\x3e",""),l=n.createElement("div");return l.setAttribute("class","sitebar-container"),l.style.width=r.width,l.style.height=r.height,l.style.marginLeft="50%",l.style.transform="translateX(-50%)",l.insertAdjacentHTML("afterbegin",a),Promise.resolve(l)}}],[{key:"getDimension",value:function(t){if(null==t)return"100%";if(""===t)return"100%";if(!0===/^\d+$/.test(t.toString())){var e=parseInt(t);return 0===e?"100%":e+"px"}return t}},{key:"getNullIfEmptyOrZero",value:function(t){return e.isEmptyOrZero(t)?null:parseInt(t)}},{key:"isEmptyOrZero",value:function(t){if(null==t)return!0;var e=t.toString();return 0===e.length||"0"===e||"100%"===e}}]),e}();function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(){return(Hn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dn(t,e,n){return(Dn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Nn(t){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Nn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(e,An),function(t,e,n){e&&Rn(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return"string"==typeof t.htmlFileupload&&t.htmlFileupload.length>0&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var n=t.htmlFileupload;return Dn(Nn(e.prototype),"generate",this).call(this,Hn({},t,{htmlUrl:n}))}}]),e}();function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vn(t){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bn(t,e){return(Bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Vn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bn(t,e)}(e,mn),function(t,e,n){e&&Un(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return void 0!==t.element&&void 0!==t.contextDocument}},{key:"generate",value:function(t){return Promise.resolve(t.element)}}]),e}();function qn(t){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yn(t){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zn(t,e){return(Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Yn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zn(t,e)}(e,mn),function(t,e,n){e&&zn(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return void 0!==t.elementSelector&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var e=t.contextDocument.querySelector(t.elementSelector);return null==e?Promise.reject("Element not found: "+t.elementSelector):Promise.resolve(e)}}]),e}();function Kn(t){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t,e){return(Qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==Kn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Xn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qn(t,e)}(e,mn),function(t,e,n){e&&$n(t.prototype,e)}(e,[{key:"isOptionsValid",value:function(t){return void 0!==t.htmlContent&&""!==t.htmlContent&&void 0!==t.contextDocument}},{key:"generate",value:function(t){var e=this,n=t.htmlContent,r=t.contextDocument.createElement("iframe");return r.setAttribute("style","width:100%;height:100%;border:0;"),r.addEventListener("trfDeployed",function(){var t=r.contentWindow.document;t.open(),t.write(n),t.close(),e._notifyContentDeployed(r,{iframe:r})}),Promise.resolve(r)}}]),e}();tr.runner='\nwindow.trfScriptRunner(document.getElementsByTagName("body")[0]);\n',tr.iframeStyle="\nbody {\n    margin:0;\n    padding:0;\n}\n";var er=n(64),nr=n.n(er);function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ar(t,e){return(ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,ir(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ar(t,e)}(e,mt),function(t,e,n){e&&or(t.prototype,e)}(e,[{key:"build",value:function(t){return this._getContent(t)}},{key:"_getContent",value:function(t){var e=this;if(null==t.contextDocument)throw new Error("Context document not set");var n=this.contentProviderFactory.decide(t);if(null===n)throw new Error("No content provider accepts the params.");n.generate(t).then(function(n){e._destroyWidget(t.id,n);var r={options:t.options,id:t.id},o=e._buildWidget("bottomSticky",n,r);return e._broadcastEvent("trfDeployed",n),o})}}]),e}();function ur(){return(ur=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var sr=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logger=y.get("BottomSticky"),this.document=e.ownerDocument,this.params=n,this.contentElement=e,this.containerElement=null,this.innerContainer=null,this.closer=null,this.options=ur({},t.defaults)}return function(t,e,n){e&&cr(t.prototype,e)}(t,[{key:"init",value:function(){this.contentElement.trfAdWidget=this,this._build()}},{key:"destroy",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.document.body.appendChild(this.contentElement),Cn.removeElement(this.containerElement)}},{key:"_build",value:function(){this._prepare(),this._position(),this._updateStyle(this.params.options)}},{key:"updateOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateStyle(t)}},{key:"_prepare",value:function(){var t=this,e=this.document.createElement("div");e.setAttribute("class","trf-ad-bottom-sticky-container"),e.style.boxShadow="0 -0.1rem 0.1rem 0 rgba(0,0,0,.2)",this.innerContainer=this.document.createElement("div"),this.innerContainer.style.position="absolute",this.innerContainer.appendChild(this.contentElement),e.appendChild(this.innerContainer),this.containerElement=this.document.body.appendChild(e),this.label=this.document.createElement("div"),this.label.setAttribute("class","trf-ad-bottom-sticky-label"),this.containerElement.appendChild(this.label),this.adText=this.document.createElement("div"),this.adText.setAttribute("class","trf-ad-bottom-sticky-label-text"),this.label.appendChild(this.adText),this.closer=this.document.createElement("div"),this.closer.setAttribute("class","trf-ad-bottom-sticky-closer"),this.closer.addEventListener("click",function(){t._close()}),this.label.appendChild(this.closer)}},{key:"_updateStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.options=ur({},this.options,t),this.containerElement.style.height=this.options.height+"px",this.containerElement.style.backgroundColor=this.options.backgroundColor,!0===this.options.hide?this.containerElement.style.display="none":this.containerElement.style.removeProperty("display"),this.innerContainer.style.width="calc(100% - "+2*this.options.padding+"px)",this.innerContainer.style.left=this.options.padding+"px",this.innerContainer.style.top=this.options.padding+"px",this.innerContainer.style.height="calc(100% - "+1*this.options.padding+"px)",Cn.appendStyle(this.options.style,this.document),this.label.style.backgroundColor=this.options.backgroundColor,this.adText.innerHTML="",null!=this.options.label&&this.adText.appendChild(this.document.createTextNode(this.options.label)),this.options.fontSize&&(this.adText.style.fontSize=this.options.fontSize),this.options.bottom)this.containerElement.style.bottom=this.options.bottom+"px";else if(this.options.bottomElementSelector){var e=this.document.querySelector(this.options.bottomElementSelector);if(null==e)throw new Error("Bottom Element not found: "+this.options.bottomElementSelector);var n=e.getBoundingClientRect(),r=this.document.defaultView.innerHeight;this.containerElement.style.bottom=r-n.top+"px"}else this.containerElement.style.bottom="0px";void 0!==this.options.zIndex?this.containerElement.style.zIndex=this.options.zIndex.toString():this.containerElement.style.zIndex="2147483646",void 0!=this.options.marginBottom&&(this.containerElement.style.marginBottom=this.options.marginBottom.toString()+"px")}},{key:"_position",value:function(){Cn.setStyle(this.containerElement,"position","fixed",{important:!0}),this.containerElement.style.left="0px",this.containerElement.style.right="0px"}},{key:"_close",value:function(){this.containerElement.parentElement.removeChild(this.containerElement)}}]),t}();sr.defaults={height:50,padding:10,backgroundColor:"#f3f3f3",hide:!1,fontSize:"9pt",marginBottom:0,style:"\n    \n    .trf-ad-bottom-sticky-container {\n        box-sizing:border-box;\n    }\n    \n    .trf-ad-bottom-sticky-label {\n        border: none;\n        border-top-left-radius: 12px;\n        box-shadow: 0 -1px 1px 0 rgba(0,0,0,.2);\n        height: 28px;\n        position: absolute;\n        right: 0;\n        top: -27px;\n        min-width: 28px;\n        white-space: nowrap;\n    }\n    \n    .trf-ad-bottom-sticky-label-text {\n        display:inline-block;\n        float:left;\n        line-height:28px;\n        padding-left:10px;\n    }\n    \n    .trf-ad-bottom-sticky-closer {\n        display:inline-block;\n        background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='13' height='13' viewBox='341 8 13 13' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%234F4F4F' d='M354 9.31L352.69 8l-5.19 5.19L342.31 8 341 9.31l5.19 5.19-5.19 5.19 1.31 1.31 5.19-5.19 5.19 5.19 1.31-1.31-5.19-5.19z' fill-rule='evenodd'/%3E%3C/svg%3E\");\n        background-position: center;\n        background-repeat: no-repeat;\n        background-size: 12px 12px;\n        height: 28px;\n        width: 28px;\n    }\n    "};var fr=sr;function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yr(t){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dr(t,e){return(dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vr=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=function(t,e){return!e||"object"!==pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,(t=yr(e)).call.apply(t,[this].concat(o)))).widget=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dr(t,e)}(e,v),function(t,e,n){e&&hr(t.prototype,e)}(e,[{key:"init",value:function(){this.widget=new fr(this.containerNode,this.params),this.widget.init()}},{key:"destroy",value:function(){var t;(t=this.widget).destroy.apply(t,arguments)}}]),e}();function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var br=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logger=y.get("AdManager"),this.enabled=this._isEnabled(),this.widgetFactory=i.getInstance(),i.getInstance().setWidget("underscroller",C),i.getInstance().setWidget("stickySky",Nt),i.getInstance().setWidget("pushDown",te),i.getInstance().setWidget("ampParallax",Y),i.getInstance().setWidget("sitebar",lt),i.getInstance().setWidget("bottomSticky",vr),this.templateFactory=f.getInstance(),f.getInstance().setTemplate("underscroller",Ot),f.getInstance().setTemplate("stickySky",Pt),f.getInstance().setTemplate("pushDown",Vt),f.getInstance().setTemplate("native",rn),f.getInstance().setTemplate("cmsNative",je),f.getInstance().setTemplate("ampParallax",cn),f.getInstance().setTemplate("sitebar",dn),f.getInstance().setTemplate("bottomSticky",lr),u.getInstance().set("scriptTag",En),u.getInstance().set("iframe",An),u.getInstance().set("htmlUpload",Fn),u.getInstance().set("htmlContent",tr),u.getInstance().set("element",Gn),u.getInstance().set("elementSelector",Jn)}return function(t,e,n){e&&mr(t.prototype,e)}(t,[{key:"_isEnabled",value:function(){return 0!==nr.a.get("trf-adman-enabled")}},{key:"enable",value:function(t){this.enabled=1==t,nr.a.set("trf-adman-enabled",this.enabled?"1":"0",{expires:3650,path:"/",SameSite:"None",secure:!0}),this.enabled?this.logger.debug("enabled"):this.logger.debug("disabled")}},{key:"buildTemplate",value:function(t,e){if(this.logger.debug("buildTemplate("+t+")",e),!1===this.enabled)return this.logger.debug("\tdisabled, exitting"),Promise.resolve();var n=this.templateFactory.get(t);if(null===n)throw new Error("Template with id "+t+" not implemented.");try{return n.build(e)}catch(t){throw this.logger.debug(t.message),t}}},{key:"build",value:function(t,e,n){var r=this.widgetFactory.get(e);if(null===r)throw new Error("Ad with id "+e+" not implemented.");new r(t,n).init()}}]),t}();if(n(115),n(116),n(117),void 0===window.traffective)throw new Error("Traffective Namespace not declared.");window.traffective.trfAdManager=new br,e.default=br}]).default;