/*!
----------------------------------------------------------------------------------------------------
* Important! - To edit this JS, you must use the JS source file.

* General Script - IvÃ¡n Luna [RE]
* ivanluna.re@outlook.com
----------------------------------------------------------------------------------------------------
*/
function addProductToCart(e){if(e.preventDefault(),$(this).attr("href").indexOf("sku=")>0){var t=$(this).attr("productindex");newQty=$(".buy-in-page-quantity[productindex='"+t+"']").val(),newHref=updateQueryStringParameter($(this).attr("href"),"qty",newQty),skuId=newHref.replace("/checkout/cart/add?sku=",""),skuId=skuId.substring(0,skuId.indexOf("&"));var r={url:newHref,type:"get",success:function(){vtexjs.checkout.getOrderForm().done(function(e){crearCarritoLightBox(e,skuId)})}};jQuery.ajax(r)}else alert("Por favor, selecciona el tamaÃ±o deseado.");return!1}function addProductToCartProduct(e){if(e.preventDefault(),$(".product-detail__info .button-wrapper .avisame-wrapper").remove(),$(".product-detail__info .error").remove(),that=$(this),that.attr("href").indexOf("sku=")>0){var t=that.attr("href");skuId=t.replace("/checkout/cart/add?sku=",""),skuId=skuId.substring(0,skuId.indexOf("&"));var r=$(".product-detail__quantity input").val();console.log(r);var a={url:"/checkout/cart/add?sku="+skuId+"&qty="+r+"&seller=1&redirect=false&sc=1",type:"get",success:function(){vtexjs.checkout.getOrderForm().done(function(e){$.each(e.items,function(e,t){if(skuId==t.id){var a=t.productCategoryIds.split("/"),o=a.length-2;a=a[o];var d=t.productCategories[a],i=t.refId.split("-");i=i[i.length-1];var n=[{name:t.name,id:""+t.id,price:""+t.sellingPrice/100,brand:t.additionalInfo.brandName,category:d,variant:i,quantity:r}];return console.log(n),"undefined"!=typeof dt_addToCart&&dt_addToCart(n),!1}});var t=$("label.dimension-Talla.sku-picked").html(),a=$(".value-field.Color").html();$(".product-detail__info").addClass("sku-added"),0==$(".product-detail__info--bottom .buy-in-page-button .svg-icon").length&&$(".buy-in-page-button").html("Agregado"),crearCarritoLightBox(e,skuId,t,a)})}};jQuery.ajax(a)}else $(".product-detail__info .product-detail-sizes .item_unavailable.checked").length?load_error_avisame():$(".product-detail__info").addClass("select-size");return!1}function goToCheckoutProduct(e){if(e.preventDefault(),$(".product-detail__info .error").remove(),$(".product-detail__info .button-wrapper .avisame-wrapper").remove(),console.log("Go to checkout PDP"),that=$(this),that.attr("href").indexOf("sku=")>0){newHref=that.attr("href"),skuId=newHref.replace("/checkout/cart/add?sku=",""),skuId=skuId.substring(0,skuId.indexOf("&"));var t=$(".product-detail__quantity > input").val();window.location.href="/checkout/cart/add?sku="+skuId+"&qty="+t+"&seller=1&redirect=true&sc=1"}else $(".product-detail__info .product-detail-sizes .item_unavailable.checked").length?load_error_avisame():($(".product-detail__cta").prepend('<div class="error not-selected">Por favor, selecciona la talla.</div>'),$(".product-detail__cta .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100));return!1}function addProductToCartList(e){return e.preventDefault(),skuId=$(this).attr("data-skuid"),qty=1,vtexjs.checkout.getOrderForm().done(function(e){console.log(e),update_sku=0;var t=-1;if($.each(e.items,function(r){return e.items[r].id==skuId?(update_sku=1,t=r,oldqty=e.items[r].quantity,!1):void 0}),0==update_sku){var r={id:skuId,quantity:qty,seller:1},a=new Array;a.push(r),vtexjs.checkout.addToCart(a).done(function(e){"function"==typeof fbq&&fbq("track","AddToCart"),$.each(e.items,function(e,t){if(skuId==t.id){var r=t.productCategoryIds.split("/"),a=r.length-2;r=r[a];var o=t.productCategories[r],d=t.refId.split("-");d=d[d.length-1];var i=[{name:t.name,id:""+t.id,price:""+t.sellingPrice/100,brand:t.additionalInfo.brandName,category:o,variant:d,quantity:qty}];return console.log(i),"undefined"!=typeof dt_addToCart&&dt_addToCart(i),!1}}),crearCarritoLightBox(e,skuId)}),console.log("New item: "+skuId+", Quantity: "+qty)}else{var r={};r.index=t,r.quantity=oldqty+qty,r.seller=1,vtexjs.checkout.updateItems([r],null,!1).done(function(e){crearCarritoLightBox(e,skuId)}),console.log("Old item: "+skuId+", Old quantity: "+oldqty+", New quantity: "+qty)}}),!1}function addProductToCartModal(e){if(e.preventDefault(),$("#productSingleModal .button-wrapper .error").remove(),$("#productSingleModal .product-size.availabletrue.selected").length||$("#productSingleModal .product-size.no-variations").length||$("#productSingleModal h3.qv-name").has("data-sku")){if(qty=$(".product-modal__quantity-input").val(),$("#productSingleModal .product-size.no-variations").length){if(!$("#productSingleModal .product-size.availabletrue"))return $("#productSingleModal .button-wrapper").prepend('<div class="error not-available">Producto no disponible</div>'),$("#productSingleModal .button-wrapper .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100),!1;skuId=$("#productSingleModal .product-size.availabletrue").attr("data-id")}else skuId=$("#productSingleModal .product-size.selected:not(.disabled)").attr("data-sku");vtexjs.checkout.getOrderForm().done(function(e){update_sku=0;var t=-1;if($.each(e.items,function(r){return e.items[r].id==skuId?(update_sku=1,t=r,oldqty=e.items[r].quantity,!1):void 0}),0==update_sku){var r={id:skuId,quantity:qty,seller:1},a=new Array;a.push(r),vtexjs.checkout.addToCart(a,null,1).done(function(e){"function"==typeof fbq&&(fbq("track","AddToCart"),console.log("AddToCart")),$.each(e.items,function(e,t){if(skuId==t.id){var r=t.productCategoryIds.split("/"),a=r.length-2;r=r[a];var o=t.productCategories[r],d=t.refId.split("-");d=d[d.length-1];var i=[{name:t.name,id:""+t.id,price:""+t.sellingPrice/100,brand:t.additionalInfo.brandName,category:o,variant:d,quantity:qty}];return console.log(i),"undefined"!=typeof dt_addToCart&&dt_addToCart(i),!1}}),crearCarritoLightBox(e,skuId),jq2("#productSingleModal").modal("hide")})}else{var r={};r.index=t,r.quantity=oldqty+qty,r.seller=1,vtexjs.checkout.updateItems([r],null,!1).done(function(e){crearCarritoLightBox(e,skuId),jq2("#productSingleModal").modal("hide")})}})}else $("#productSingleModal .product-size.availablefalse.active").length?($("#productSingleModal .button-wrapper").prepend('<div class="error not-available">Producto no disponible</div>'),$("#productSingleModal .button-wrapper .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100)):($("#productSingleModal .button-wrapper").prepend('<div class="error not-selected">Por favor, selecciona color y talla.</div>'),$("#productSingleModal .button-wrapper .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100));return!1}function goToCheckoutModal(e){if(e.preventDefault(),$("#productSingleModal .button-wrapper .error").remove(),$("#productSingleModal .product-size.availabletrue.active").length||$("#productSingleModal .product-size.no-variations").length||$("#productSingleModal h3.qv-name").has("data-sku")){if(!$(".size-wrapper.active .size.selected").length)return $("#productSingleModal .button-wrapper").prepend('<div class="error not-selected">Por favor, selecciona la talla deseada.</div>'),$("#productSingleModal .button-wrapper .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100),!1;if(!$(".size-wrapper.active .size.selected").not(".disabled").length)return $("#productSingleModal .button-wrapper").prepend('<div class="error not-available">Producto no disponible</div>'),$("#productSingleModal .button-wrapper .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100),!1;var t=$(".size-wrapper.active .size.selected").attr("data-sku"),r="/checkout/cart/add?sku="+t+"&qty=1&seller=1&redirect=true&sc=1";window.location.href=r}else $("#productSingleModal .product-size.availablefalse.active").length?($("#productSingleModal .button-wrapper").prepend('<div class="error not-available">Producto no disponible</div>'),$("#productSingleModal .button-wrapper .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100)):($("#productSingleModal .button-wrapper").prepend('<div class="error not-selected">Por favor, selecciona color y talla.</div>'),$("#productSingleModal .button-wrapper .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100));return!1}function updateQueryStringParameter(e,t,r){var a=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(a)?e.replace(a,"$1"+t+"="+r+"$2"):e+o+t+"="+r}function crearCarritoLightBox(e,t,r,a){"function"==typeof put_arrow&&put_arrow(),"undefined"==typeof r&&(r=""),"undefined"==typeof a&&(a="");var o=$("#cart-template").html();$("body").append(o);var d=e,n=d.items.length,l=null;for(i=0;i<n&&null===l;i++)d.items[i].id==t&&(l=d.items[i]);null===l&&(l=l);var u=l.imageUrl;u=u.replace(img_size,"-180-196/");var c=l.sellingPrice/100;c=c.formatMoney(2,decimal,separator);var s=0,p=0,f=0;totalDiscount=0,$.each(d.totalizers,function(e,t){console.log(t),"Items"==t.id&&(s=t.value/100),"Shipping"==t.id&&(p=t.value/100),"Discounts"==t.id&&(f=-1*(t.value/100)),totalDiscount=s-f,console.log("Hola!"),console.log(totalDiscount)});var v=d.value/100;if(show_free_shipping_thermometer)if(faltante=envio_gratis,valorTotalCarrito<envio_gratis){faltante=envio_gratis-valorTotalCarrito,percent=+(Math.round(100*valorTotalCarrito/envio_gratis+"e+2")+"e-2");var h='<div class="title-envio">Faltan <strong>'+currency_symbol+faltante+'.<sup>00</sup></strong> para que tu envÃ­o sea gratuito.</div><div class="envio-gratis"><div class="percent" style="width:'+percent+'%;">'+percent+"%</div></div>"}else var h='<div class="title-envio">Â¡Felicidades ya tienes envÃ­o gratis!</div><div class="envio-gratis full"><div class="percent" style="width:100%;">100%</div></div>';$("#lb-product-image").attr("src",u),$("#lb-product-name").html(l.name),$("#lb-product-price").html(currency_symbol+c),$("#lb-product-qty").html(l.quantity),$("#lb-cart-products").html(n),$("#atc-ti").html(currency_symbol+s.formatMoney(2,decimal,separator)),$(".atc__cart-summary_item.discount").hide(),0!=totalDiscount&&($(".atc__cart-summary_item.discount").show(),$("#atc-td").html(currency_symbol+f.formatMoney(2,decimal,separator)),$("#atc-ti").html(currency_symbol+totalDiscount.formatMoney(2,decimal,separator))),""!=a?($("#lb-product-color").html(a),$(".atc__added_info.color").show()):$(".atc__added_info.color").hide(),""!=r?($("#lb-product-size").html(r),$(".atc__added_info.size").show()):$(".atc__added_info.size").hide(),0!=p?($("#atc-ts").html(currency_symbol+p.formatMoney(2,decimal,separator)),$(".atc__cart-summary_item.shipping").show()):$(".atc__cart-summary_item.shipping").hide(),$("#lb-total").html(" "+currency_symbol+v.formatMoney(2,decimal,separator)),show_free_shipping_thermometer&&$("#envio_gratis_wrapper").html(h),$(".atc__wrapper").fadeIn(500),$(".close-modal--atc,.atc__wrapper").click(function(){close_add_to_cart()}),$(".atc__container").click(function(e){e.stopPropagation()}),$(".seguirComprando").click(function(){close_add_to_cart()}),$(".irAlCheckout").click(function(){window.location.replace("/checkout/#cart"),$("body").css({overflow:"auto"})}),update_minicart()}function close_add_to_cart(){$(".atc__wrapper").fadeOut(500,function(){$(".atc__wrapper").remove(),$(".product-detail__info").removeClass("sku-added"),$(".product-detail__info--bottom .buy-in-page-button .svg-icon").remove()})}function load_error_avisame(){$.get("/no-cache/profileSystem/getProfile",function(e,t,r){if(200==r.status){if(e.IsUserDefined){e.Email}else;$(".product-detail__info .button-wrapper").prepend('<div class="avisame-wrapper"><div class="error not-available">Producto no disponible</div></div>'),$(".product-detail__info .button-wrapper .error").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100)}else load_error_avisame()})}var envio_gratis=799,currency_symbol="$",img_size="-55-55/",decimal=".",separator=",",show_free_shipping_thermometer=!1;Number.prototype.formatMoney=function(e,t,r){var a=this,e=isNaN(e=Math.abs(e))?2:e,t=void 0==t?".":t,r=void 0==r?",":r,o=0>a?"-":"",d=String(parseInt(a=Math.abs(Number(a)||0).toFixed(e))),i=(i=d.length)>3?i%3:0;return o+(i?d.substr(0,i)+r:"")+d.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+r)+(e?t+Math.abs(a-d).toFixed(e).slice(2):"")},String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substring(e,this.length):t+this},$(function(){$("#BuyButton-wrapper a.buy-button").each(function(){$(this).off("click").on("click",goToCheckoutProduct)}),$("#productSingleModal .button-wrapper a").each(function(){$(this).hasClass("buy-product")?$(this).off("click").on("click",goToCheckoutModal):$(this).off("click").on("click",addProductToCartModal)})});
//# sourceMappingURL=css-js_add-to-cart.min.js.map