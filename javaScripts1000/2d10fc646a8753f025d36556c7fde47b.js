var continuallyAssetsVersion='bbb66373c0d8ca10ed29c5e9c65ccfaf';!function(e,t){if(void 0===e.continuallyLoaded&&(e.continuallyLoaded=1,e.continuallySettings.appID)){var n=[],a=[];window.continually_date_format="dd/mm/yyyy";var i=function(n){var a=[];if("string"==typeof n){var o=t.querySelectorAll(n);[].forEach.call(o,function(e){a.push(e)})}return"object"==typeof n&&a.push(n),i.extend=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},i.ajax=function(e){if("object"==typeof e){e.data=e.data||{};var t=(e.method||"GET").toUpperCase(),n=i.extend({"Content-type":"application/json"},e.headers||{}),a=e.url||"",o=JSON.stringify(e.data),s=e.success||function(){},r=e.error||function(){},l=new XMLHttpRequest;for(var c in l.open(t,a,!0),l.onreadystatechange=function(){if(4==l.readyState)if(l.status<400){if(void 0!==l.responseText){var e;try{e=JSON.parse(l.responseText)}catch(t){e=l.responseText}s(e,l.status,l)}}else r(l.responseText,l.status,l)},n)n.hasOwnProperty(c)&&l.setRequestHeader(c,n[c]);l.send(o)}},{attachSelectorsArray:function(e){var t=this;return e.forEach(function(e){t.attach(e)}),t},attach:function(e){"object"==typeof e&&(e=e.toArray());return a.forEach(function(t){e.forEach(function(e){t.appendChild(e)})}),this},firstSel:function(){return i(a[0])},first:function(){return a[0]},hide:function(){return a.forEach(function(e){e.style.display="none"}),this},click:function(){return a.forEach(function(e){try{e.click()}catch(e){}}),this},show:function(){return a.forEach(function(e){e.style.display="block"}),this},cxShow:function(){return a.forEach(function(e){e.setAttribute("data-cxvisible","true")}),this},cxHide:function(){return a.forEach(function(e){e.setAttribute("data-cxvisible","false")}),this},appendTo:function(e){return a.forEach(function(t){e.appendChild(t)}),this},create:function(e){return a=[t.createElement(e)],this},remove:function(){a.forEach(function(e){e.parentNode.removeChild(e)})},each:function(e){a.forEach(function(t){e(t)})},hasClass:function(e){return!(!a.length||!e)&&-1!==a[0].className.indexOf(e)},addClass:function(e){return e&&a.forEach(function(t){t.className=(t.className.replace(e,"")+" "+e).replace(/\s+/g," ").replace(/^\s+/,"").replace(/\s+$/,"")}),this},removeClass:function(e){return e&&a.forEach(function(t){t.className=t.className.replace(e," ").replace(/\s+/g," ").replace(/^\s+/,"").replace(/\s+$/,"")}),this},css:function(t){if("string"==typeof t)return this.length()?e.getComputedStyle(a[0])[t]:void 0;for(var n in t)t.hasOwnProperty(n)&&this.each(function(e){e.style[n]=t[n]});return this},on:function(e,t){return this.each(function(n){n.addEventListener?n.addEventListener(e,t,!1):n.attachEvent("on"+e,function(){return t.call(n,window.event)})}),this},removeAttr:function(e){return this.each(function(t){t.removeAttribute(e,null)}),this},html:function(e){return this.each(function(t){t.innerHTML=e}),this},appendHtml:function(e){return this.each(function(t){t.innerHTML+=e}),this},attr:function(e,t){if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&this.each(function(t){"id"===n?t.id=e[n]:t.setAttribute(n,e[n])});else{if(void 0===t)return this.length()?a[0].getAttribute(e):void 0;this.each(function(n){"id"===e?n.id=t:n.setAttribute(e,t)})}return this},toArray:function(){return a},length:function(){return a.length}}};i();var o={main:null,settings:null,timers:[],intervals:[],tz:"",log:function(e){window.console&&window.console.log&&window.console.log(e)},error:function(e){window.console&&window.console.error&&window.console.error(e)},show:function(e){i(e).attr("data-cxvisible","true")},hide:function(e){i(e).attr("data-cxvisible","false")},showSpinner:function(){this.show("#continually-loading-conversation-history")},hideSpinner:function(){this.hide("#continually-loading-conversation-history")},clearTimersIntervals:function(){this.timers.length&&(this.timers.forEach(function(e){window.clearTimeout(e)}),this.timers=[]),this.intervals.length&&(this.intervals.forEach(function(e){window.clearInterval(e)}),this.intervals=[])},setTimeout:function(t,n){var a=e.setTimeout(t,n);return this.timers.push(a),a},setInterval:function(t,n){var a=e.setInterval(t,n);return this.intervals.push(a),a},getTestMode:function(){return!s.stored.disableTestMode&&"true"===this.getQueryVariable("continually_test")},guessTz:function(){e.Intl&&e.Intl.DateTimeFormat&&"function"==typeof e.Intl.DateTimeFormat&&e.Intl.DateTimeFormat().resolvedOptions&&"function"==typeof e.Intl.DateTimeFormat().resolvedOptions&&e.Intl.DateTimeFormat().resolvedOptions().timeZone&&(this.tz=e.Intl.DateTimeFormat().resolvedOptions().timeZone)},getYmd:function(e){var t=window.continually_date_time_localisation,n=t[0]||"dd/mm/yyyy",a=e.getFullYear(),i=e.getMonth()+1,o=i<10?"0"+i:i,s=e.getDate(),r=s<10?"0"+s:s,l=e.getDay();switch(n){case"short_en":var c=t[parseInt(o)];return t[13+parseInt(l)]+" "+r+" "+c;case"dd/mm/yyyy":return r+"/"+o+"/"+a;case"dd.mm.yyyy":return r+"."+o+"."+a;case"mm.dd.yyyy":return o+"."+r+"."+a;case"mm/dd/yyyy":return o+"/"+r+"/"+a;case"dd-mm-yyyy":return r+"-"+o+"-"+a;case"mm-dd-yyyy":return o+"-"+r+"-"+a}},getHi:function(e){var t=e.getHours(),n=t<10?"0"+t:t,a=e.getMinutes();return n+":"+(a<10?"0"+a:a)},forceSetUserIdCookie:function(e){this.readCookie(s.getCookieName())||this.createCookie(s.getCookieName(),e,365),this.readCookie(s.getCookieName())!==e&&(this.eraseCookie(s.getCookieName()),this.createCookie(s.getCookieName(),e,365))},getQueryVariable:function(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");if(a[0]==e)return a[1]}return!1},createCookie:function(e,n,a){var i;if(a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),i="; expires="+o.toGMTString()}else i="";t.cookie=e+"="+n+i+"; path=/; SameSite=Lax"},readCookie:function(e){for(var n=e+"=",a=t.cookie.split(";"),i=0;i<a.length;i++){for(var o=a[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null},eraseCookie:function(e){this.createCookie(e,"",-1)},toggleHeaderVisibility:function(e){"object"==typeof e.data&&"cxHideHeader"===e.data.action?i("body").addClass("body--continually-landing-page-no-header"):"object"==typeof e.data&&"cxShowHeader"===e.data.action&&i("body").removeClass("body--continually-landing-page-no-header")},init:function(){this.timers=[],this.intervals=[],this.guessTz(),e.addEventListener("message",this.toggleHeaderVisibility.bind(this),!1)}};o.init();var s={original:{},stored:{},loadOn:"pageInteractive",url:"https://app.continual.ly/",apiUrl:"https://app.continual.ly/",delay:3500,vars:{},identity:{},defaultConversationId:null,mode:"oneConversation",getCookieName:function(){return this.stored.cookieName||"continually_user_id"},getLoadOn:function(){this.loadOn=this.original.loadOn||"pageInteractive"},getDelay:function(){this.delay=this.original.delay||3500,this.delay<300&&(this.delay=300)},parseQueryVariables:function(){for(var e=window.location.search.substring(1).split("&"),t=0;t<e.length;t++){var n=e[t].split("=");if(2===n.length)try{this.vars[n[0]]=decodeURIComponent(n[1]),0===n[0].indexOf("cx__")&&(this.identity[n[0].replace("cx__","")]=this.vars[n[0]])}catch(e){}}var a=JSON.stringify(this.identity);"string"==typeof a&&a.length>2&&(this.stored.identity||(this.stored.identity={}),this.original.identity||(this.original.identity={}),this.stored.identity=i.extend(this.stored.identity||{},this.identity),this.original.identity=i.extend(this.original.identity||{},this.identity))},detectMode:function(){var e=this;i(".continually").each(function(t){t.getAttribute("data-continually-conversation-id")&&(e.defaultConversationId=t.getAttribute("data-continually-conversation-id"),e.mode="multipleConversations",window.console&&window.console.log&&window.console.log("continually: data attribute found for bot ID `"+e.defaultConversationId+"`. Weâll skip any targeting rules and load this bot. No widget will be shown until the user clicks the custom link."))})},initFullstory:function(e){var n,a,i,o,s,r,l,c;void 0===window._fs_org&&(window._fs_is_outer_script=!0,window._fs_debug=!1,window._fs_host="fullstory.com",window._fs_org=e,window._fs_namespace="FS",n=window,a=t,i=window._fs_namespace,o="script",s="user",i in n&&n.console&&n.console.log?n.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].'):((l=n[i]=function(e,t){l.q?l.q.push([e,t]):l._api(e,t)}).q=[],(r=a.createElement(o)).async=1,r.src="https://"+_fs_host+"/s/fs.js",(c=a.getElementsByTagName(o)[0]).parentNode.insertBefore(r,c),l.identify=function(e,t){l(s,{uid:e}),t&&l(s,t)},l.setUserVars=function(e){l(s,e)},l.identifyAccount=function(e,t){r="account",(t=t||{}).acctId=e,l(r,t)},l.clearUserCookie=function(e,n,i){if(!e||t.cookie.match("fs_uid=[`;`]*`[`;`]*`[`;`]*`"))for(n=a.domain;a.cookie="fs_uid=;domain="+n+";path=/;expires="+new Date(0).toUTCString(),!((i=n.indexOf("."))<0);)n=n.slice(i+1)}))},init:function(){var n=t.scripts;this.original=i.extend({delay:3500,loadOn:"pageInteractive"},e.continuallySettings||{}),this.stored=i.extend({delay:3500,loadOn:"pageInteractive"},e.continuallySettings||{},{legacyAppID:e.continuallySettings.appID}),i("#continually-container").length()&&(i("#continually-container").hasClass("no-inline")||(this.stored.alreadyHasContainer=!0,this.original.alreadyHasContainer=!0,this.stored.hideWidget=!0,this.original.hideWidget=!0,this.stored.delay=1,this.original.delay=1,this.original.fullScreen=!0,this.stored.fullScreen=!0,window.setTimeout(function(){window.continually.on("ready",function(){window.continually.startConversation()})},50))),this.getDelay(),this.getLoadOn();for(var a=0;a<n.length;a++)if(n[a].src){var o=n[a].src.match(/^(http([s]?):\/\/[a-z0-9.-]+\.continual\.ly\/)/);o&&void 0!==o[0]&&(this.url=o[0],this.apiUrl=this.url.replace("//cdn-","//"))}this.parseQueryVariables()}};s.init();var r={updateIdentityTimerId:null,conversationData:{},cx_main:null,defaultConversationData:{conversationId:null,templateId:null,lead:{id:null,name:null,email:null,phone:null,company:null},teamMember:{id:null,name:null},companyId:null,message:null,response:null,widget:{sidebarOpen:!1,isOnline:!1,widgetVisible:!1},appointment:{timeUTC:null,leadTimezone:null,companyTimezone:null,duration:null}},updateIdentity:function(e){var t=this;t.updateIdentityTimerId||(t.updateIdentityTimerId=o.setInterval(function(){t.conversationData&&t.conversationData.lead&&t.conversationData.lead.id&&(window.clearTimeout(t.updateIdentityTimerId),i.ajax({url:s.apiUrl+"api/v1/lead/update-identity/"+s.stored.appID+"/"+t.conversationData.lead.id,method:"POST",data:{identity:e},success:function(){t.updateIdentityTimerId=null},error:function(){t.updateIdentityTimerId=null}}))},1500))},set:function(e){for(var t in e)e.hasOwnProperty(t)&&-1===["url","isOnline","restartUrl"].indexOf(t)&&(this.conversationData[t]=e[t])},init:function(){this.conversationData=i.extend({},this.defaultConversationData)}};r.init(),{cxZoomImage:function(n){function a(){i("#continuallyLightbox").remove(),i("#continuallyLightboxOverlay").remove()}a(),i().create("div").attr({id:"continuallyLightboxOverlay",tabindex:"-1"}).addClass("continuallyLightboxOverlay").on("click",function(){a()}).css({width:"100vw",height:"100vh"}).appendTo(t.body),i().create("div").attr({id:"continuallyLightboxOverlay",tabindex:"-1"}).addClass("continuallyLightbox").css({top:e.pageYOffset+50+"px"}).html('<div id="continually-lb-outerContainer" class="continually-lb-outerContainer"><div class="continually-lb-data"><a id="continually-lb-close" class="continually-lb-close" style="display:none;"></a></div><div class="continually-lb-container"><img id="continually-lb-image" class="continually-lb-image" src="" alt="" style="display:none;"><div id="continually-lb-loader" class="continually-lb-loader"><a class="continually-lb-cancel"></a></div></div></div>').on("click",function(){a()}).appendTo(t.body),i(t.body).on("keydown",function(e){27===e.keyCode&&a()}),i("#continually-lb-image").on("load",function(){i("#continually-lb-loader").hide(),i("#continually-lb-close").show(),i("#continually-lb-outerContainer").css({width:this.width+"px",height:this.height+"px"}),i("#continually-lb-image").css({width:this.width+"px",height:this.height+"px"}).show()}).attr("src",n)},cxZoomHandler:function(e){"object"==typeof e.data&&"cxZoomImage"===e.data.action&&this.cxZoomImage(e.data.path)},init:function(){e.addEventListener("message",this.cxZoomHandler.bind(this),!1)}}.init();var l=null,c=[],d=!1;if("pageReady"===s.loadOn)i(window).on("load",function(e){o.setTimeout(function(){for(var e=window.location.search.substring(1).split("&"),t=0;t<e.length;t++){"continually_debug"==e[t].split("=")[0]&&o.log("continually: (pageReady) initialisation at "+new Date)}f()},s.delay)});else var u=o.setInterval(function(){if(-1!==["interactive","complete"].indexOf(t.readyState)){window.clearInterval(u);for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){"continually_debug"==e[n].split("=")[0]&&o.log("continually: (pageInteractive) initialisation at "+new Date)}f()}},s.delay);var g,h=o.setInterval(function(){-1!==["interactive","complete"].indexOf(t.readyState)&&(window.clearInterval(h),function(){for(var e=t.getElementsByClassName("continually"),a=0;a<e.length;a++)e[a].onclick=function(){i(this).attr("disabled","disabled"),n.push(this)}}())},300);e.continually=(g=null,e.continuallySettings&&e.continuallySettings.ready&&"function"==typeof e.continuallySettings.ready&&(c.forEach(function(e,t){"ready"===e.type&&(g=t)}),null===g?c.push({type:"ready",callback:e.continuallySettings.ready}):c[g].callback=e.continuallySettings.ready),g=null,{on:function(e,t){var n=null;-1!==["ready","startConversation","completeConversation","sidebarOpen","sidebarClose","welcomeMessage:close","welcomeMessage:open","message","message:sent","emailCapture","nameCapture","phoneCapture","companyCapture","scheduling:requestMeeting","scheduling:meetingBooked","liveChatMessageReceived"].indexOf(e)&&void 0!==t&&(c.forEach(function(t,a){t.type===e&&(n=a)}),null===n?c.push({type:e,callback:t}):c[n].callback=t)},startConversation:function(e,t){var n=function(){if(void 0!==t&&(s.stored.appID=t),void 0!==e)o.main.switchConversation(e);else{var n=o.settings;if(s.stored.legacyConversationId&&s.stored.legacyConversationId&&n.conversation.config&&n.conversation.config.fr)if("autostart"!==n.conversation.config.fr)s.stored.appID=s.stored.legacyAppID,o.main.switchConversation(s.stored.legacyConversationId);else{var a=i("#continually-autostart-container");a.length()&&"false"===a.attr("data-cxvisible")&&(a.cxShow(),i("#continually-button-icon").cxHide(),i("#continually-button").cxHide(),i("#continually-button-text").cxHide(),i("#continually-powered-by").cxShow(),r.conversationData&&r.conversationData.widget&&(r.conversationData.widget.widgetVisible=!0))}}};null!==a?a.push(n):n()},identity:function(e){var t=function(){r.updateIdentity(e)};null!==a?a.push(t):t()},destroy:function(){var e=function(){t.body.setAttribute("data-cx-sidebar","hidden"),o.clearTimersIntervals();var e=t.getElementById("continually-container");e&&e.parentNode.removeChild(e),d=!1,n=[],a=[]};null!==a?a.push(e):e()},init:function(){f()},restart:function(){var e=this;d=!1,n=[],a=null,console.log("Continually api calls list is empty"),e.destroy(),e.init()},back:function(){l.togglePage(!1)}})}function f(){if(!d){d=!0;var u={iframeUrl:"",restartUrl:"",notificationSound:!1,inlineRequired:0,sidebar:null,wakeUpTimerId:0,widgetInteractionCalledOnce:!1,toggleConversationsPageTimerId:null,rememberClickOnNewMessage:!1,iframeLoaded:!1,numberUnreadLiveMessages:0,isSideBarClosed:!0,onFocusLost:!1,s:{closeBtn:null,conversationsLink:null,backLink:null,newMessages:null,newMessagesCnt:null,newMessagesLabel:null,sidebar:null,iframe:null,inner:null,container:null,conversations:null,widgetContainer:null,newMsgContainer:null,unreadMessagesCount:null},initSidebar:function(){var e=this,n=i().create("div").attr({id:"continually-close-button",title:"Close","data-cxvisible":"false"}).html('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" class="cx-continually-inline-image" style="display:none;"><path d="M11.957 1.457L10.543.043 6 4.586 1.457.043.043 1.457 4.586 6 .043 10.543l1.414 1.414L6 7.414l4.543 4.543 1.414-1.414L7.414 6" fill="#FFF"/></svg>'),a=i().create("div").attr({id:"continually-conversations-link","data-cxvisible":"false"}).html('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="17" viewBox="0 0 448 512" style="vertical-align: middle; display:none;" class="cx-continually-inline-image"><path d="M229.9 473.899l19.799-19.799c4.686-4.686 4.686-12.284 0-16.971L94.569 282H436c6.627 0 12-5.373 12-12v-28c0-6.627-5.373-12-12-12H94.569l155.13-155.13c4.686-4.686 4.686-12.284 0-16.971L229.9 38.101c-4.686-4.686-12.284-4.686-16.971 0L3.515 247.515c-4.686 4.686-4.686 12.284 0 16.971L212.929 473.9c4.686 4.686 12.284 4.686 16.971-.001z" fill="#FFF" /></svg> <span id="continually-widget_conversations_link"></span><span id="continually-unread-messages-count" style="display:none"></span>'),r=i().create("div").attr({id:"continually-unread-messages-delta","data-cxvisible":"false"}).html('<span class="cx-pill"><span class="cx-label"><span id="continually-unread-messages-delta-count"></span> <span id="continually-widget_new_messages"></span></span></span>'),l=i().create("div").attr({id:"continually-sidebar"}).attachSelectorsArray([a,n,r]),c=i().create("div").attr({id:"continually-inner"}).attach(l).appendHtml('<div id="continually-button-container" data-cxvisible="false"></div><div id="continually-new-message-container" data-cxvisible="false"></div>');if(o.getTestMode()&&i("body").appendHtml('<div id="continually-report-container"></div>'),i("#continually-container").length()){(d=i("#continually-container")).attach(c),e.inlineRequired=1,i("#continually-container").hasClass("no-inline")||d.addClass("continually-container--inline")}else{var d=i().create("div").attr({id:"continually-container"}).attach(c);i(t.body).attach(d)}var u=i("#continually-sidebar").toArray()[0];i().create("iframe").attr({id:"continually-conversation-frame",title:"Chat with us",frameborder:"0",allowfullscreen:"allowfullscreen","data-cxvisible":"true"}).appendTo(u);i().create("div").attr({id:"continually-conversations-page","data-cxvisible":"false"}).appendTo(u);e.s.closeBtn=i("#continually-close-button"),e.s.conversationsLink=i("#continually-conversations-link"),e.s.newMessages=i("#continually-unread-messages-delta"),e.s.newMessagesCnt=i("#continually-unread-messages-delta-count"),e.s.newMessagesLabel=i("#continually-widget_new_messages"),e.s.sidebar=i("#continually-sidebar"),e.s.iframe=i("#continually-conversation-frame"),e.s.inner=i("#continually-inner"),e.s.container=i("#continually-container"),e.s.conversations=i("#continually-conversations-page"),e.s.widgetContainer=i("#continually-button-container"),e.s.newMsgContainer=i("#continually-new-message-container"),e.s.unreadMessagesCount=i("#continually-unread-messages-count"),e.sidebar=u,i("#continually-unread-messages-delta, #continually-conversations-link").on("click",function(){e.togglePage(!0)}),e.s.closeBtn.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.s.closeBtn.cxHide(),e.closeSidebar()}),s.stored.fullScreen&&e.s.closeBtn.hide()},chgIframeSrc:function(e){var t=this.s.sidebar.first(),n=this.s.iframe.first();t.removeChild(n),s.stored.fullScreen&&(e+=(-1===e.indexOf("?")?"?":"&")+"fullScreen=1"),n.setAttribute("src",e),t.appendChild(n)},loadStyles:function(){var e=t.createElement("link"),n=t.createElement("link");e.rel="stylesheet",e.href=s.url+"css/embed/continually-embed.latest.min.css",t.head.appendChild(e),n.rel="stylesheet",n.href=s.apiUrl+"css/"+s.stored.appID+"/custom.css?1",t.head.appendChild(n)},startWithDisabledHistory:function(){this.s.conversations.html(""),i("#continually-conversations-link, #continually-conversations-page").cxHide(),i("#continually-conversation-frame").attr({"data-cxvisible":"true",allowfullscreen:"allowfullscreen","data-cx-has-history":"false"})},beep:function(){if(g.team.sound){var e=s.url+"sounds/"+g.team.sound+".wav",n=!!navigator.userAgent.match(/Trident\/7.0/),a=!!navigator.userAgent.match(/.NET4.0E/),i=n&&a,o=!!navigator.userAgent.match(/MSIE/i);if(i||o){if(!t.getElementById("continually_sound_notification")){var r=t.createElement("bgsound");r.id="continually_sound_notification",t.body.appendChild(r)}t.all.continually_sound_notification.src=e}else this.notificationSound||(this.notificationSound=new Audio(e)),this.notificationSound.play()}},isSidebarActive:function(){return"true"===this.s.sidebar.attr("data-cx-open")&&"true"===this.s.iframe.attr("data-cxvisible")},watchIfSidebarIsActive:function(){var e=this;u.messageIframe(function(){return"cxLeadActive"+(e.isSidebarActive()?"_Active":"_Inactive")},1e4)},onLooseFocus:function(e){"visible"===e&&!1===u.isSideBarClosed&&(this.numberUnreadLiveMessages=0,this.onFocusLost=!1),"hidden"===e&&(this.onFocusLost=!0),!0===e&&!1===u.isSideBarClosed&&(this.numberUnreadLiveMessages=0,this.onFocusLost=!1),!1===e&&(this.onFocusLost=!0),this.setLiveChatUnread()},watchForFocusChanged:function(){var e=this;function n(t){var n="visible",i="hidden",o={focus:n,focusin:n,pageshow:n,blur:i,focusout:i,pagehide:i};(t=t||window.event).type in o?e.onLooseFocus(o[t.type]):e.onLooseFocus(this[a]?"hidden":"visible")}var a="hidden";a in t?t.addEventListener("visibilitychange",n):(a="mozHidden")in t?t.addEventListener("mozvisibilitychange",n):(a="webkitHidden")in t?t.addEventListener("webkitvisibilitychange",n):(a="msHidden")in t?t.addEventListener("msvisibilitychange",n):"onfocusin"in t?t.onfocusin=t.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n,void 0!==t[a]&&n({type:t[a]?"blur":"focus"})},messageIframe:function(e,t){var n=this.s.iframe.first(),a=null;if(n.contentWindow,void 0!==n.contentWindow.postMessage&&"function"==typeof n.contentWindow.postMessage){var i="function"==typeof e?e():e;n.contentWindow.postMessage(i,"*"),t&&(a=o.setInterval(function(){var t="function"==typeof e?e():e;n&&(n.contentWindow,1)&&void 0!==n.contentWindow.postMessage&&"function"==typeof n.contentWindow.postMessage&&n.contentWindow.postMessage(t,"*")},t))}return a},sendWakeUpBot:function(){this.wakeUpTimerId=this.messageIframe("cxResumeSnooze",500)},botWokenUp:function(e){void 0!==e.data&&"cxResumeSnoozeStop"===e.data&&window.clearInterval(this.wakeUpTimerId)},setChatContext:function(e){this.iframeUrl=e.url,this.restartUrl=e.restartUrl,this.chgIframeSrc(this.iframeUrl),o.forceSetUserIdCookie(r.conversationData.lead.id),r.set(e),r.conversationData.widget.isOnline=e.isOnline},interactedWithWidget:function(){this.widgetInteractionCalledOnce||(this.widgetInteractionCalledOnce=!0,o.readCookie(s.getCookieName())&&g.conversation&&g.conversation.id&&i.ajax({url:s.apiUrl+"widget-interaction",method:"POST",data:{user_id:o.readCookie(s.getCookieName()),bot_id:g.conversation.id}}))},setLiveChatUnread:function(){var e,n=new RegExp("\\([0-9]+\\) ","gi");t&&void 0!==t.title&&(e=t.title.replace(n,""),(this.onFocusLost||this.isSideBarClosed)&&this.numberUnreadLiveMessages?t.title="("+u.numberUnreadLiveMessages+") "+e:t.title=e)},showContainer:function(){r.conversationData.widget.widgetVisible=!0,this.s.widgetContainer.cxShow()},closeSidebar:function(){i("html").hasClass("continually-mobile-sidebar-active")&&i("html").removeClass("continually-mobile-sidebar-active"),i("body").attr("data-cx-sidebar","hidden"),this.sidebar.setAttribute("data-cx-open","false"),r.conversationData.widget.sidebarOpen=!1,this.isSideBarClosed=!0,this.onFocusLost=!0,this.numberUnreadLiveMessages=0,this.setLiveChatUnread(),this.messageIframe("cxSidebarClosed"),v.fireEvent("sidebarClose")},showSidebar:function(){var e=this;if(i("html").hasClass("continually-mobile-sidebar-active")||i("#continually-container").hasClass("continually-container--inline")||i("html").addClass("continually-mobile-sidebar-active"),e.numberUnreadLiveMessages=0,e.isSideBarClosed=!1,e.onFocusLost=!1,e.setLiveChatUnread(),i("body").attr("data-cx-sidebar","visible"),e.s.closeBtn.cxShow(),e.s.sidebar.attr("data-cx-open","true"),r.conversationData.widget.sidebarOpen=!0,v.fireEvent("sidebarOpen"),!e.iframeLoaded){if(e.interactedWithWidget(),f.close(),o.setTimeout(function(){null!==r.conversationData.conversationId&&v.fireEvent("startConversation")},200),e.iframeLoaded=!0,g.team.conversations_history&&g.team.conversations_html){var t=!1;g.team.conversations_history.forEach(function(e){e.templateId===g.conversation.id&&(t=!0)}),t&&(1===g.team.conversations_history.length?(o.setTimeout(function(){e.setChatContext(g.team.conversations_history[0])},2500),e.togglePage(!1)):e.togglePage(!0))}e.sendWakeUpBot()}},replaceWidgetWithNewMessage:function(){var e=this,t=e.s.widgetContainer.attr("data-cxvisible");g.team&&g.team.last_message&&g.team.last_message.html?(e.s.newMsgContainer.addClass(g.getWidgetPosClass()),e.s.newMsgContainer.first().onclick=function(n){n.stopPropagation(),n.preventDefault();var a=g.team.last_message.id;a?g.team.conversations_history.forEach(function(n){n.conversationId===a&&(e.iframeUrl&&-1!==n.url.indexOf(e.iframeUrl)||(e.rememberClickOnNewMessage=!0,e.chgIframeSrc(s.apiUrl+"chat/empty-state"),e.setChatContext(n)),e.showSidebar(),e.togglePage(!1)),e.s.newMsgContainer.html("").cxHide().first().onclick=function(e){return!1},e.s.widgetContainer.attr("data-cxvisible",t)}):(e.showSidebar(),e.s.newMsgContainer.html("").cxHide().first().onclick=function(e){return!1},e.s.widgetContainer.attr("data-cxvisible",t))},e.s.newMsgContainer.html(g.team.last_message.html).attr("data-conversation_id",g.team.last_message.id).cxShow(),e.s.widgetContainer.cxHide(),u.beep()):(e.s.newMsgContainer.html("").cxHide().first().onclick=function(e){return!1},e.s.widgetContainer.attr("data-cxvisible",t))},togglePage:function(e){var t=e?"true":"false",n=e?"false":"true";i("#continually-conversations-page").attr("data-cxvisible",t),i("#continually-conversations-link, #continually-conversation-frame").attr("data-cxvisible",n),i("#continually-conversation-frame").attr("allowfullscreen","allowfullscreen"),this.toggleConversationsPageTimerId&&window.clearTimeout(this.toggleConversationsPageTimerId);var a=500;!1===e?(a=5e3,this.messageIframe("cxOpenChat")):(this.messageIframe("cxOpenConversations"),o.showSpinner()),this.toggleConversationsPageTimerId=o.setTimeout(function(){g.getTeamSettings()},a)},reloadOrCloseRequired:function(e){void 0!==e.data&&"cxReloadConversation"===e.data&&this.restartUrl&&(this.chgIframeSrc(this.restartUrl),this.sendWakeUpBot()),void 0!==e.data&&"cxCloseConversation"===e.data&&this.s.closeBtn.click()},guestRegister:function(){var e=this,t={referrer:window.location.href},n=s.apiUrl+"api/v1/leads/guest/"+s.stored.appID+"/"+g.conversation.id;f.autoStartAnswer&&(t.autoStartAnswerValue=f.autoStartAnswer,f.autoStartAnswer=null),t.identity=s.stored.identity,o.readCookie(s.getCookieName())&&(n+="?user_id="+o.readCookie(s.getCookieName())),g.conversation.id&&i.ajax({url:n,method:"POST",data:t,success:function(t){try{if(t&&void 0!==t.url)return void(e.rememberClickOnNewMessage?e.rememberClickOnNewMessage=!1:e.setChatContext(t))}catch(e){}e.chgIframeSrc(s.apiUrl+"chat/failed-state/"+s.stored.appID)},error:function(){e.chgIframeSrc(s.apiUrl+"chat/failed-state/"+s.stored.appID)}})},switchConversation:function(e){var t=this;(g.conversation.id!==e||s.stored.hideWidget)&&(g.conversation.id=e,t.iframeUrl=null,t.chgIframeSrc(s.apiUrl+"chat/empty-state"),t.iframeLoaded=!1,t.guestRegister()),o.setTimeout(function(){t.showSidebar()},500)},init:function(){var e=this;e.initSidebar(),window.addEventListener("message",function(t){e.reloadOrCloseRequired(t)},!1),window.addEventListener("message",function(t){e.botWokenUp(t)},!1),o.main=e}},g={team:null,conversation:null,overrideConversation:null,teamTimerId:null,setLocalisationOnce:!1,teamSettingsRequestOnceSent:!1,settingsReadySubscribers:[],teamSettingsOnceProcessed:!1,spType:function(){return this.conversation.sp.type},typeIs:function(e){return"string"==typeof e?e===this.conversation.sp.type:-1!==e.indexOf(this.conversation.sp.type)},checkIfSpIsInteractive:function(){return this.conversation.sp.isInteractiveType=-1!==["email","name","company","phone","gdpr","multiple_choice","multiple_checkbox","radio","likert","textarea"].indexOf(this.conversation.sp.type),this.conversation.sp.isInteractiveType},widgetAppearsOn:function(){return this.conversation.config.sc},format:function(){return this.conversation.config.fr},formatIs:function(e){return"string"==typeof e?e===this.conversation.config.fr:-1!==e.indexOf(this.conversation.config.fr)},getWidgetPosClass:function(){return this.conversation&&this.conversation.widget_pos_class?this.conversation.widget_pos_class:""},parseConversationSettings:function(n){var a=this,l="string"==typeof n?JSON.parse(n):n;if(l&&void 0!==l.user_id&&o.forceSetUserIdCookie(l.user_id),l.data){a.conversation=l.data,o.getTestMode()&&a.conversation.test_report&&i("#continually-report-container").html(a.conversation.test_report),s.stored.legacyConversationId=a.conversation.id;var c=t.createElement("style");c.innerHTML=l.data.css,t.head.appendChild(c),a.conversation.widgetHTML?u.s.widgetContainer.appendHtml(a.conversation.widgetHTML):a.conversation.config.fr="btn",o.setTimeout(function(){a.conversation.conversationData&&r.set(a.conversation.conversationData),s.stored.hideWidget||(f.prepareContainer(),u.replaceWidgetWithNewMessage()),v.fireEvent("ready",e.continually),o.setTimeout(function(){v.fireEvent("welcomeMessage:open")},100)},100)}},getConversation:function(){var e=this;if("undefined"!=typeof overrideContinuallyConversationSettings)e.parseConversationSettings(overrideContinuallyConversationSettings);else{var n={url:encodeURIComponent(window.location.href),referrer:t.referrer?encodeURIComponent(t.referrer):null,identity:s.stored.identity,tz:o.tz,inlineRequired:u.inlineRequired};o.readCookie(s.getCookieName())&&(n.user_id=o.readCookie(s.getCookieName())),o.getTestMode()&&(n.continually_test=!0),i.ajax({url:s.apiUrl+"conversation/"+s.stored.appID,method:"POST",data:n,success:function(t){e.parseConversationSettings(t)}})}},parseTeamSettings:function(e){var t=this,n="string"==typeof e?JSON.parse(e):e,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" width="14" height="14"><path d="M207.6 256l107.72-107.72a15.98 15.98 0 000-22.58l-25.03-25.03a15.98 15.98 0 00-22.58 0L160 208.4 52.28 100.68a15.98 15.98 0 00-22.58 0L4.68 125.7a15.98 15.98 0 000 22.58L112.4 256 4.68 363.72a15.98 15.98 0 000 22.58l25.03 25.03a15.98 15.98 0 0022.58 0L160 303.6l107.72 107.72a15.98 15.98 0 0022.58 0l25.03-25.03a15.98 15.98 0 000-22.58L207.6 256z"/></svg>';if(n.assets_wrong_version&&o.error(n.assets_wrong_version),n.page_views_limit_exceeded&&o.log("You've exceeded free plan page views limit"),n.page_views_daily_limit_exceeded&&o.log("Subscription limit: your account has exceeded a daily limit on page views"),n.data){void 0!==n.data.user_id&&o.forceSetUserIdCookie(n.data.user_id);var l=0;if(t.team&&void 0!==t.team.unread_messages_count&&(l=n.data.unread_messages_count-t.team.unread_messages_count),!t.setLocalisationOnce)for(var c in t.setLocalisationOnce=!0,n.data.widget_localisation)n.data.widget_localisation.hasOwnProperty(c)&&i("#continually-"+c).html(n.data.widget_localisation[c]);if(t.team=n.data,t.teamSettingsOnceProcessed||(window.continually_date_time_localisation=t.team.date_time_localisation,t.team.fullstory.is_enabled&&s.initFullstory(t.team.fullstory.org_id),2===t.team.ga_enabled&&t.team.ga_tracker_id&&(s.stored.googleAnalyticsTrackerId=t.team.ga_tracker_id),2===t.team.fp_enabled&&t.team.fp_id&&(s.stored.facebookPixelId=t.team.fp_id),0===t.team.ga_enabled&&(s.stored.disableGoogleAnalyticsTracking=!0),0===t.team.fp_enabled&&(s.stored.disableFacebookPixelTracking=!0),t.getConversation(),void 0!==t.team.conversations_history&&o.setTimeout(function(){h.createChannel()},150),t.team.sidebar_pos_class&&u.s.sidebar.addClass(t.team.sidebar_pos_class)),t.team.conversations_history&&t.team.conversations_html){if(i("#continually-conversations-link").length()){var d=t.team.conversations_html;if(t.team.utc_today){var g=Date.parse(t.team.utc_today);isNaN(g)&&(g=Date.parse(t.team.utc_today.replace(" ","T")));var f=o.getYmd(new Date(g)),v=d.match(/data-continually-ccit="date"\>([^\<]+)\</g);v&&v.forEach(function(e){var t=e.replace('data-continually-ccit="date">',"").replace("<",""),n=Date.parse(t);isNaN(n)&&(n=Date.parse(t.replace(" ","T")));var i=new Date(n),s=o.getYmd(i);d=f===s?d.split(e).join('data-continually-ccit="date"><span class="close-conversation">'+a+'</span><span class="date">'+o.getHi(i)+"</span><"):d.split(e).join('data-continually-ccit="date"><span class="close-conversation">'+a+'</span><span class="date">'+s+"</span><")})}u.s.conversations.html(d),i("span.close-conversation").toArray().forEach(function(e){i(e).attr("click_attached")||(i(e).attr("conversation-id",i(e.parentNode.parentNode).attr("data-continually-conversation-id")),i(e).attr("click_attached","true"))}),i("span.close-conversation").on("click",function(){var e=i(this),n=e.attr("conversation-id");e.hide(),i.ajax({url:s.apiUrl+"api/v1/close-conversation/"+n+"/"+r.conversationData.lead.id,method:"POST",data:{},success:function(){u.toggleConversationsPageTimerId=o.setTimeout(function(){t.getTeamSettings()},10)},error:function(){e.show()}})}),t.team.conversations_history.length&&"true"!==u.s.conversations.attr("data-cxvisible")&&(u.s.conversationsLink.cxShow(),u.s.iframe.attr({"data-cx-has-history":"true",allowfullscreen:"allowfullscreen"})),t.team.unread_messages_count?u.s.unreadMessagesCount.html("").css({display:null}):u.s.unreadMessagesCount.html("").css({display:"none"}),i("#continually-create-new-conversation").on("click",function(){var e=i(this).attr("data-bot-id");e&&(u.switchConversation(e),u.togglePage(!1))}),i("[data-role='continually-conversation-item']").on("click",function(e){e.stopPropagation(),e.preventDefault();var n=i(e.target.parentNode).attr("data-continually-conversation-id");n&&t.team.conversations_history.forEach(function(e){e.conversationId===n&&(-1===e.url.indexOf(u.iframeUrl)&&(u.chgIframeSrc(s.apiUrl+"chat/empty-state"),u.setChatContext(e)),u.togglePage(!1))})}),l>0&&(u.s.newMessagesCnt.cxShow(),o.setTimeout(function(){u.s.newMessagesCnt.cxHide()},7e3),u.replaceWidgetWithNewMessage()),"true"===i("#continually-conversations-link").attr("data-cxvisible")&&u.messageIframe("cxHeaderPaddingLeft",10)}}else u.startWithDisabledHistory();void 0!==n.data.team_availability?0===parseInt(n.data.team_availability)?i(".continually-conversation-item__avatars-status").addClass("continually-conversation-item__avatars-status--offline"):i(".continually-conversation-item__avatars-status").removeClass("continually-conversation-item__avatars-status--offline"):i(".continually-conversation-item__avatars-status").hide(),t.teamSettingsOnceProcessed=!0}o.hideSpinner(),i(".cx-continually-inline-image").css({display:""})},getTeamSettings:function(){var e=this;o.showSpinner(),e.teamTimerId&&window.clearTimeout(e.teamTimerId),e.teamTimerId=o.setTimeout(function(){var t={assetsVersion:window.continuallyAssetsVersion||""};o.readCookie(s.getCookieName())&&(t.user_id=o.readCookie(s.getCookieName())),s.stored.fullScreen&&(t.fullScreen=!0),e.teamSettingsRequestOnceSent||(e.teamSettingsRequestOnceSent=!0,t.tUrl=window.location.href,t.ga_tracker_id=v.getPossibleTracker(),t.fp_id=v.getFacebookPixelPossibleID()),i.ajax({url:s.apiUrl+"team-settings/"+s.stored.appID,method:"POST",data:t,success:function(t,n,a){e.parseTeamSettings(t)},error:function(e,t,n){503===t&&window.console&&window.console.log&&window.console.log("Continually is under maintenance, the ETA is "+n.getResponseHeader("x-eta"))}})},100)},subscribeSettingsReady:function(e){this.settingsReadySubscribers.push(e)},processSettingsReadySubscribers:function(){this.settingsReadySubscribers.forEach(function(e){e()})},init:function(){this.teamSettingsRequestOnceSent=!1,"multipleConversations"===s.mode&&void 0===e.overrideContinuallyConversationSettings&&(this.overrideConversation={data:{id:s.defaultConversationId,css:"",config:{fr:"hidden"},sp:{}}}),o.settings=this}},h={createChannel:function(){if(g.team&&g.team.channel_history_prefix){var e=o.readCookie(s.getCookieName()),t=s.stored.appID;if(e&&t){var n=Date.now()+Math.random(),a=g.team.wssUrl,i=new XMLHttpRequest;try{i.onload=function(){if(i.responseText){var s=i.responseText.match(/"sid":"([^"]+)"/);if(s&&s.length&&2===s.length){var r=s[1],l=new XMLHttpRequest,c="conversation_history."+g.team.channel_history_prefix+"."+e+"."+t;l.onload=function(){if(l.responseText&&"ok"===l.responseText){var e=new WebSocket("wss://"+a.replace(/https?:\/\//,"")+"websocket&sid="+r);e.onopen=function(){e.send("2probe")},e.onmessage=function(t){if(t&&t.data&&("3probe"===t.data&&(e.send("5"),o.setInterval(function(){e.send("2")},25e3)),"string"==typeof t.data&&-1!==t.data.indexOf(c)&&-1!==t.data.indexOf("conversation_history_update_required"))){var n=t.data.match(/"requiredBy":"([^"]+)"/);n&&n.length&&2===n.length&&u.isSidebarActive()?g.team.conversations_history&&g.team.conversations_history.length&&g.team.conversations_history.forEach(function(e){e.conversationId===n[1]&&-1===e.url.indexOf(u.iframeUrl)&&g.getTeamSettings()}):g.getTeamSettings()}}}},l.open("POST",a+"polling&t="+n+"_1&sid="+r,!0),l.setRequestHeader("Accept","*/*"),l.send('82:42["subscribe",{"channel":"'+c+'"}]')}}},i.open("GET",a+"polling&t="+n,!0),i.setRequestHeader("Accept","*/*"),i.send()}catch(e){}}}},init:function(){}},f={autoStartAnswer:"",close:function(){i("#close-continually-message-button").click()},setContinuallyClickHandlers:function(){for(var e=t.getElementsByClassName("continually"),n=0;n<e.length;n++){var a=e[n];"oneConversation"===s.mode?a.onclick=m:a.getAttribute("data-continually-conversation-id")?a.onclick=b:a.onclick=m}},prepareContainer:function(){var e=this,n=!0;if(e.setContinuallyClickHandlers(),u.s.widgetContainer.addClass(g.getWidgetPosClass()),i("#close-continually-message-button").on("click",function(e){e.preventDefault(),e.stopPropagation(),u.interactedWithWidget();var t="msg"===g.format()?"#continually-message-container":"#continually-autostart-container";i(t).cxHide(),i("#continually-powered-by").cxHide(),i("#continually-button-text").cxHide(),i("#continually-button-icon").cxShow(),i("#continually-button").cxShow().attr("data-cxlayout","i"),r.conversationData.widget.widgetVisible=!1,v.fireEvent("welcomeMessage:close")}),g.formatIs(["msg","autostart","btn"])){var a=g.widgetAppearsOn();if("i"===a)u.showContainer();else if("h"===a){var s;i(window).on("scroll",function(){var e=t.documentElement;(window.pageYOffset||e.scrollTop)-(e.clientTop||0)>t.body.getBoundingClientRect().height/2&&!s&&(s=!0,u.showContainer())})}else{var l=parseInt((g.conversation.config.t+"").replace(/[^\d]/,""),10);isNaN(l)&&(l=0),o.setTimeout(function(){u.showContainer()},1e3*l)}}if((g.conversation&&g.conversation.sp&&g.conversation.sp.type&&"team_notification"===g.conversation.sp.type&&(n=!1),g.formatIs("autostart"))&&(g.conversation.sp&&g.conversation.sp.type&&g.checkIfSpIsInteractive())){n=!1,g.typeIs(["email","name","company","phone","textarea"])&&i("[data-role='continually-answer-input']").firstSel().on("keyup",function(t){e.autoStartAnswer=this.value,13!==t.keyCode||t.shiftKey||i(".continually").firstSel().click()});var c=i("#continually-send-multiple-checkbox").css({"pointer-events":"auto"}).on("click",function(e){e.preventDefault(),e.stopPropagation(),c.hasClass("disabled")||i(".continually").firstSel().click()});i("[data-role='continually_multiple_checkbox']").on("click",function(t){t.preventDefault(),t.stopPropagation();var n=t.target.getAttribute("data-hash"),a="#"+n+"#",o=i("#continually-answer-"+n);(o.hasClass("checked")?(o.removeClass("checked"),e.autoStartAnswer=e.autoStartAnswer.replace(a,"")):(o.addClass("checked"),e.autoStartAnswer+=a),c.addClass("disabled"),"1"===g.conversation.sp.restrict_number_of_answers)?i(".checked[data-role='continually_multiple_checkbox']").length()<=parseInt(g.conversation.sp.number_of_answers_allowed)&&c.removeClass("disabled"):e.autoStartAnswer&&c.removeClass("disabled")}),i("[data-role='continually_radio']").on("click",function(t){var n=t.target.getAttribute("data-hash");t.preventDefault(),t.stopPropagation(),e.autoStartAnswer="#"+n+"#",i(".continually").firstSel().click()})}n&&g.processSettingsReadySubscribers()},init:function(){}},v={isFSIdentifyCalled:!1,isContinuallyGetGAObjectCalled:!1,continuallyGAObject:null,continuallyGAObjectOnceDiscovered:!1,gaTrackerUsed:null,getPossibleTracker:function(){if(e.GoogleAnalyticsObject){var t=e.gaData,n=null;if(t){for(var a in t)t.hasOwnProperty(a)&&t[a].hasOwnProperty("hitcount")&&(n=a);if(n&&0===n.indexOf("UA-"))return n}}},getFacebookPixelPossibleID:function(){var e=t.getElementsByTagName("script"),n=new RegExp(/^\d+$/);for(var a in e)if("string"==typeof e[a].src&&e[a].src.startsWith("https://connect.facebook.net/signals/config/")){var i=e[a].src.replace("https://connect.facebook.net/signals/config/","").split("?")[0];if(n.test(i))return i}},continuallyGetGAObject:function(){if(this.isContinuallyGetGAObjectCalled=!0,this.continuallyGAObject)return this.continuallyGAObject;if(this.continuallyGAObjectOnceDiscovered)return this.continuallyGAObject;if(this.continuallyGAObjectOnceDiscovered=!0,e.GoogleAnalyticsObject){var t=e.gaData,n=null;if(t){for(var a in t)t.hasOwnProperty(a)&&t[a].hasOwnProperty("hitcount")&&(n=a);var i=e[e.GoogleAnalyticsObject];s.stored.googleAnalyticsTrackerId?(this.continuallyGAObject=i,this.continuallyGAObject("create",s.stored.googleAnalyticsTrackerId,"auto","continuallyGATracker"),this.gaTrackerUsed=s.stored.googleAnalyticsTrackerId):n&&0===n.indexOf("UA-")&&(this.continuallyGAObject=i,this.continuallyGAObject("create",n,"auto","continuallyGATracker"),this.gaTrackerUsed=n)}}return this.continuallyGAObject},fireEvent:function(e,t){var o={};if(void 0===t)for(var l in r.conversationData)r.conversationData.hasOwnProperty(l)&&(o[l]=r.conversationData[l]);else o=t;var d=this.continuallyGetGAObject(),u=this.getFacebookPixelPossibleID();if((!s.stored.disableGoogleAnalyticsTracking&&d||!s.stored.disableFacebookPixelTracking&&u)&&-1!==["welcomeMessage:open","welcomeMessage:close","sidebarOpen","sidebarClose","startConversation","completeConversation","nameCapture","emailCapture","phoneCapture","companyCapture","scheduling:requestMeeting","scheduling:meetingBooked","liveChatMessageReceived","liveChatMessageSent"].indexOf(e))switch(e){case"welcomeMessage:open":d&&!s.stored.disableGoogleAnalyticsTracking&&d("continuallyGATracker.send","event",{eventCategory:"Continually Conversations",eventAction:"Widget shown",nonInteraction:!0,eventLabel:null}),u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_WelcomeMessageOpen");break;case"welcomeMessage:close":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_WelcomeMessageClosed");break;case"sidebarOpen":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_SidebarOpen");break;case"sidebarClose":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_SidebarClose");break;case"startConversation":d&&!s.stored.disableGoogleAnalyticsTracking&&d("continuallyGATracker.send","event",{eventCategory:"Continually Conversations",eventAction:"Started Conversation",eventLabel:o.conversationId}),u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_ConversationStart");break;case"completeConversation":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_ConversationEnd");break;case"nameCapture":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_NameCapture");break;case"emailCapture":d&&!s.stored.disableGoogleAnalyticsTracking&&d("continuallyGATracker.send","event",{eventCategory:"Continually Conversations",eventAction:"Email captured",eventLabel:o.conversationId}),u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_EmailCapture");break;case"phoneCapture":d&&!s.stored.disableGoogleAnalyticsTracking&&d("continuallyGATracker.send","event",{eventCategory:"Continually Conversations",eventAction:"Phone captured",eventLabel:o.conversationId}),u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_PhoneCapture");break;case"companyCapture":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_CompanyCapture");break;case"scheduling:requestMeeting":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_AppointmentRequested");break;case"scheduling:meetingBooked":d&&!s.stored.disableGoogleAnalyticsTracking&&d("continuallyGATracker.send","event",{eventCategory:"Continually Conversations",eventAction:"Appointment booked",eventLabel:o.conversationId}),u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_AppointmentBooked");break;case"liveChatMessageReceived":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_MessageReceived");break;case"liveChatMessageSent":u&&!s.stored.disableFacebookPixelTracking&&fbq("trackCustom","Continually_MessageSent")}if("ready"===e){if(n&&n.length&&(n.forEach(function(e){i(e).removeAttr("disabled")}),n[0].click()),n=[],a&&a.length)for(var g=0;g<a.length;g++)a[g]();a=null}c.forEach(function(t){t.type===e&&t.callback(o)})},handleIframeMessage:function(e){var t={};for(var n in e.data)e.data.hasOwnProperty(n)&&(t[n]=e.data[n]);void 0!==t.type&&void 0!==t.lead&&(g.team.fullstory.is_enabled&&void 0!==window._fs_org&&FS&&(this.isFSIdentifyCalled?FS.setUserVars({uid:t.lead.id,displayName:t.lead.name,email:t.lead.email,company_str:t.lead.company}):(this.isFSIdentifyCalled=!0,FS.identify(t.lead.id,{displayName:t.lead.name,email:t.lead.email,company_str:t.lead.company}))),-1!==["message","message:sent","emailCapture","nameCapture","phoneCapture","companyCapture","completeConversation","scheduling:requestMeeting","scheduling:meetingBooked","liveChatMessageSent","liveChatMessageReceived"].indexOf(t.type)&&(r.conversationData.lead=t.lead,r.conversationData.message=t.message,r.conversationData.response=t.response,o.forceSetUserIdCookie(t.lead.id),"scheduling:meetingBooked"===t.type&&void 0!==t.meeting&&(r.conversationData.appointment.timeUTC=t.meeting.timeUTC,r.conversationData.appointment.companyTimezone=t.meeting.companyTimezone,r.conversationData.appointment.leadTimezone=t.meeting.leadTimezone,r.conversationData.appointment.duration=t.meeting.duration,r.conversationData.appointment.calendarOwner=t.meeting.calendarOwner),"liveChatMessageReceived"===t.type&&(u.onFocusLost?(u.beep(),u.numberUnreadLiveMessages++):u.numberUnreadLiveMessages=0,u.setLiveChatUnread()),this.fireEvent(t.type)))},init:function(){var e=this;e.isFSIdentifyCalled=!1,e.isContinuallyGetGAObjectCalled=!1,e.continuallyGAObject=null,e.continuallyGAObjectOnceDiscovered=!1,e.gaTrackerUsed=null,window.addEventListener("message",function(t){e.handleIframeMessage(t)},!1)}};u.loadStyles(),r.init(),s.init(),o.init(),u.init(),s.detectMode(),g.init(),h.init(),f.init(),v.init(),g.getTeamSettings(),u.chgIframeSrc(s.apiUrl+"chat/empty-state"),l=u;var p=!1,y=!1,m=function(e){if(e.preventDefault(),e.stopPropagation(),"INPUT"===e.target.nodeName)return!1;if(g.conversation.id===s.stored.legacyConversationId){if(g.conversation.sp&&g.conversation.sp.isInteractiveType){var n=t.getElementById("continually-email-validation-form");if(n&&!n.checkValidity())return!1;var a=t.getElementById("continually-autostart-actions");a&&(a.parentNode.removeChild(a),f.close()),p||(p=!0,u.guestRegister())}g.conversation.sp&&g.conversation.sp.type&&"team_notification"===g.conversation.sp.type&&(y||(y=!0,u.guestRegister())),u.showSidebar()}else s.stored.appID=s.stored.legacyAppID,u.switchConversation(s.stored.legacyConversationId)},b=function(e){e.preventDefault(),e.stopPropagation();for(var t=e.target;!t.getAttribute("data-continually-conversation-id");)t=t.parentNode;t.getAttribute("data-continually-app-id")?s.stored.appID=t.getAttribute("data-continually-app-id"):s.stored.appID=s.stored.legacyAppID,u.switchConversation(t.getAttribute("data-continually-conversation-id"))},w=o.getQueryVariable("continually_open");if("string"==typeof w&&w.length&&(w.match(/^[0-9a-z]{12}$/)||w.match(/^[0-9a-z]{12},[0-9a-z]{12}$/))){var C=w.split(","),k=C[0],_=2===C.length?C[1]:null;_&&(s.stored.appID=_),g.subscribeSettingsReady(function(){u.switchConversation(k)})}else g.subscribeSettingsReady(function(){u.guestRegister()}),"true"!=w&&"1"!=w&&"yes"!=w||g.subscribeSettingsReady(function(){u.showSidebar()});u.watchIfSidebarIsActive(),u.watchForFocusChanged()}}}(this,document);