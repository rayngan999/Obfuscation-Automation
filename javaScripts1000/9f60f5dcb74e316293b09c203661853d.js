(this["webpackJsonp@zmedia/zmp3-desktop"]=this["webpackJsonp@zmedia/zmp3-desktop"]||[]).push([[23],{1439:function(e,t,n){"use strict";var a,c=n(15),i="/video/getDetail",r="/video/getSectionRelate",o="/video/getList";!function(e){e.BY_GENRE="genre"}(a||(a={}));var l={getDetail:function(e){return Object(c.c)(i,{id:e})},getSectionRelate:function(e){return Object(c.c)(r,{id:e})},getList:function(e,t,n,a){return Object(c.c)(o,{id:e,type:t,page:n,count:15,sort:a.sort})}};t.a=l},1456:function(e,t,n){"use strict";var a=n(0),c=n.n(a),i=n(1),r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function l(e,t,n,a,c){var i=e.naturalWidth,l=e.naturalHeight;t.style.width=a+"px",t.style.height=c+"px",t.width=a,t.height=c;var u=t.getContext("2d");u.clearRect(0,0,a,c);var s=1,d=i/(s=i/a>l/c?l/c:i/a),m=l/s;try{u.drawImage(e,Math.floor((d-a)/-2),Math.floor((m-c)/-2),Math.ceil(d),Math.ceil(m))}catch(E){console.error("There was a problem drawing the image. "+E)}isNaN(n)||n<1||function(e,t,n,a,c,i){if(isNaN(i)||i<1)return;i|=0;var l,u=e.getContext("2d");try{l=u.getImageData(t,n,a,c)}catch(E){throw new Error("unable to access image data: "+E)}var s,d,m,f,b,g,v,O,p,h,j,y,P,_,L,R,N,C,I,k,A,w,M,T=l.data,Y=i+i+1,S=a-1,U=c-1,x=i+1,K=x*(x+1)/2,V={r:0,g:0,b:0,a:0,next:null},D=V;for(m=1;m<Y;m++)D=D.next={r:0,g:0,b:0,a:0,next:null},m==x&&(A=D);D.next=V,v=g=0;var z=r[i],B=o[i];for(d=0;d<c;d++){for(_=L=R=O=p=h=0,j=x*(N=T[g]),y=x*(C=T[g+1]),P=x*(I=T[g+2]),O+=K*N,p+=K*C,h+=K*I,D=V,m=0;m<x;m++)D.r=N,D.g=C,D.b=I,D=D.next;for(m=1;m<x;m++)f=g+((S<m?S:m)<<2),O+=(D.r=N=T[f])*(k=x-m),p+=(D.g=C=T[f+1])*k,h+=(D.b=I=T[f+2])*k,_+=N,L+=C,R+=I,D=D.next;for(w=V,M=A,s=0;s<a;s++)T[g]=O*z>>B,T[g+1]=p*z>>B,T[g+2]=h*z>>B,O-=j,p-=y,h-=P,j-=w.r,y-=w.g,P-=w.b,f=v+((f=s+i+1)<S?f:S)<<2,_+=w.r=T[f],L+=w.g=T[f+1],R+=w.b=T[f+2],O+=_,p+=L,h+=R,w=w.next,j+=N=M.r,y+=C=M.g,P+=I=M.b,_-=N,L-=C,R-=I,M=M.next,g+=4;v+=a}for(s=0;s<a;s++){for(L=R=_=p=h=O=0,j=x*(N=T[g=s<<2]),y=x*(C=T[g+1]),P=x*(I=T[g+2]),O+=K*N,p+=K*C,h+=K*I,D=V,m=0;m<x;m++)D.r=N,D.g=C,D.b=I,D=D.next;for(b=a,m=1;m<=i;m++)g=b+s<<2,O+=(D.r=N=T[g])*(k=x-m),p+=(D.g=C=T[g+1])*k,h+=(D.b=I=T[g+2])*k,_+=N,L+=C,R+=I,D=D.next,m<U&&(b+=a);for(g=s,w=V,M=A,d=0;d<c;d++)T[f=g<<2]=O*z>>B,T[f+1]=p*z>>B,T[f+2]=h*z>>B,O-=j,p-=y,h-=P,j-=w.r,y-=w.g,P-=w.b,f=s+((f=d+x)<U?f:U)*a<<2,O+=_+=w.r=T[f],p+=L+=w.g=T[f+1],h+=R+=w.b=T[f+2],w=w.next,j+=N=M.r,y+=C=M.g,P+=I=M.b,_-=N,L-=C,R-=I,M=M.next,g+=a}u.putImageData(l,t,n)}(t,0,0,a,c,n)}n.d(t,"a",(function(){return u}));var u=function(e){var t,n=e.blurRadius,r=void 0===n?0:n,o=e.children,u=e.image,s=Object(a.useRef)();Object(a.useEffect)((function(){d()}),[]),Object(a.useEffect)((function(){t?m(u)?t.src=u:l(t,s.current,r,window.innerWidth,window.innerHeight):d()}),[u]);var d=function(){m(u)?s.current&&l(t,s.current,r,window.innerWidth,window.innerHeight):((t=new Image).crossOrigin="Anonymous",t.onload=function(e){s.current&&l(t,s.current,r,window.innerWidth,window.innerHeight)},t.src=u)},m=function(e){if(t){var n=new Image;return n.src=e,n.src===u.src}return!1};return c.a.createElement(i.l,{className:"video-blur-image"},c.a.createElement("canvas",{className:"react-blur-canvas",ref:s}),o)};Object(a.memo)(u)},1471:function(e,t,n){},1472:function(e,t,n){},1513:function(e,t,n){"use strict";n.r(t);var a=n(8),c=n(21),i=n(9),r=n(0),o=n.n(r),l=n(1431),u=n(5),s=n.n(u),d=n(1657),m=n(6),E=n(243),f=n(119),b=n(2),g=n(1),v=n(1439),O=n(198),p=n(10),h=n(23);var j=o.a.memo((function(e){var t=e.video,n=e.className;return o.a.createElement(g.k,{className:s()(n,"pad-t-10","pad-b-10")},o.a.createElement(g.B,null,o.a.createElement(g.B.List,null,o.a.createElement(g.B.List.Item,null,o.a.createElement(h.d,{object:t})),o.a.createElement(g.B.List.Item,null,o.a.createElement(h.c,{objectId:t.encodeId,type:b.D.VIDEO})),o.a.createElement(g.B.List.Item,null,o.a.createElement(h.m,{object:t,type:b.D.VIDEO})))))})),y=n(32),P=n(16),_=n.n(P),L=o.a.memo((function(e){var t,n=e.video,a=e.toggleIsOpen,c=e.loading,l=(e.isFullscreen,(n||{}).song),u=Object(p.r)(),s=Object(i.a)(u,1)[0],d=Object(E.a)().toggleMinimize,m=Object(r.useCallback)((function(){a(),s.playSong(l)}),[l]),f=Object(r.useCallback)((function(){a(!1)}),[]),v=Object(r.useCallback)((function(){d(!0)}),[]),P=Object(p.d)("video-scroll"),L=P.ref,R=P.ContextMenu,N=P.handleContextMenu;return c||!n?o.a.createElement(g.l,{className:"video-header is-loading"},o.a.createElement(g.y,null,o.a.createElement(g.y.Side,{align:"left"},o.a.createElement(g.y.Item,null,o.a.createElement(g.A,null,o.a.createElement(g.A.Left,null,o.a.createElement(_.a,{width:40,height:40,duration:2,circle:!0})),o.a.createElement(g.A.Content,null,o.a.createElement(_.a,{width:"400px",duration:2}),o.a.createElement(_.a,{width:"300px",duration:2}))))),o.a.createElement(g.y.Side,{align:"right"},o.a.createElement(g.O,{icon:"close",title:"\u0110\xf3ng",onClick:f})))):o.a.createElement(g.l,{className:"video-header"},o.a.createElement(g.y,null,o.a.createElement(g.y.Side,{align:"left"},o.a.createElement(g.y.Item,null,o.a.createElement(g.A,null,n.artist&&o.a.createElement(g.A.Left,null,o.a.createElement(g.t,{size:40,rounded:!0,src:null===(t=n.artist)||void 0===t?void 0:t.thumbnail})),o.a.createElement(g.A.Content,null,o.a.createElement(O.a,{video:n,titleLink:!1})),o.a.createElement(g.A.Right,null,o.a.createElement(h.g,{objectId:n.encodeId,objectType:b.D.VIDEO,object:n}),(null===l||void 0===l?void 0:l.encodeId)&&o.a.createElement(g.O,{icon:"song",title:"Nghe Audio",onClick:m}),o.a.createElement(g.l,{domRef:L,className:"header-more-menu"},o.a.createElement(g.O,{icon:"more",title:"Kh\xe1c",onClick:N}),o.a.createElement(R,null,o.a.createElement(j,{video:n,className:"video-context-menu"}))))))),o.a.createElement(g.y.Side,{align:"right"},o.a.createElement(h.i,{component:function(e){return o.a.createElement(g.O,Object.assign({className:"mar-r-10",icon:"minimize",title:"Thu nh\u1ecf"},e))},onClickFn:v,category:y.a.MV_DETAIL,action:"Mv",label:"Mini"}),o.a.createElement(g.O,{icon:"close",title:"\u0110\xf3ng",onClick:f}))))})),R=n(7),N=n(377),C=n(244);var I=o.a.memo((function(e){var t,n=e.currentId,a=e.onClick,c=e.loadingVideo,l=Object(p.b)(v.a.getSectionRelate),u=Object(i.a)(l,2),s=u[0],d=u[1];Object(r.useEffect)((function(){n&&d(n)}),[n]),R.j.debug("SectionRelate | id ",n);var m=(null===(t=s.value)||void 0===t?void 0:t.data)||[];return s.loading||c?o.a.createElement(g.l,{className:"video-recommend"},o.a.createElement(g.l,{className:"video-footer"},o.a.createElement(C.a,{className:"mar-t-30"}))):o.a.createElement(g.l,{className:"video-recommend"},o.a.createElement(g.l,{className:"video-footer"},m.map((function(e,t){return o.a.createElement(N.b,Object.assign({},e,{key:"video.relate.".concat(t),fullhd:3,widescreen:3,desktop:4,touch:4,tablet:6,onClick:a,viewType:b.cb.GRID}))}))))})),k=n(1456),A=o.a.memo((function(e){var t=e.video,n=e.loading;return o.a.createElement(g.l,{className:"video-blur-bg ".concat(n?"is-hide":"")},o.a.createElement(k.a,{image:t?t.thumbnailM:"",blurRadius:99}))})),w=n(174),M=n(24),T=n(397),Y=n(75),S=n(74),U=n(1429);n(1471);function x(e){var t,n=e.videos,c=e.currentId,i=e.videoIdsInQueue,l=e.loading,u=e.theaterMode,d=e.isFullscreen,v=Object(m.c)(f.f),O=Object(E.a)().toggleRepeat,p=Object(U.a)().width,h=Object(E.a)().playVideo,j=M.Array.findIndex(i,c),y=!u&&!d&&p>1200,P=function(e){e&&h(e,!1)};Object(r.useEffect)((function(){var e=document.getElementById(b.R);e&&y&&Object(S.scrollTo)(e,74*j,1e3)}),[j,y]);var _,L=Object(r.useMemo)((function(){return o.a.createElement(o.a.Fragment,null,y?o.a.createElement(g.l,{className:"list-playing-body"},o.a.createElement(g.J,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,id:b.R,disableScrollParent:!0},o.a.createElement(T.a,{fullhd:"1.2",widescreen:2,desktop:20,touch:3,tablet:3,items:n,showImageArtist:!1,currentIndex:j,disableSlide:!0,onClick:P}))):o.a.createElement(T.a,{fullhd:"1.2",widescreen:2,desktop:20,touch:3,tablet:3,items:n,showImageArtist:!1,currentIndex:j,disableSlide:!1,onClick:P}))}),[n,j,y]);return l&&j<0||M.Array.isEmpty(n)?o.a.createElement(g.l,{className:s()("video-queue",(_={},Object(a.a)(_,"is-vertical",y),Object(a.a)(_,"is-horizontal",!y),Object(a.a)(_,"is-loading",!0),_))},o.a.createElement("div",{className:"list-playing"},o.a.createElement(g.i,{className:"mar-b-30"},o.a.createElement(C.a,{fullhd:"1.2",widescreen:2,desktop:20,touch:3,tablet:3,countItem:10,countSection:1,showImageArtist:!1,viewType:y?b.cb.LIST:b.cb.SLIDER})))):o.a.createElement(g.l,{className:s()("video-queue",(t={},Object(a.a)(t,"is-vertical",y),Object(a.a)(t,"is-horizontal",!y),t))},o.a.createElement("div",{className:"list-playing"},o.a.createElement(g.i,{className:"mar-b-30"},o.a.createElement(g.l,{className:"list-playing-header"},o.a.createElement(g.M,{renderAs:"h3",className:"pull-left"},"Danh s\xe1ch ph\xe1t"),o.a.createElement(g.d,{className:"zm-auto-play-switch pull-left",onClick:O},o.a.createElement("div",null,"T\u1ef0 \u0110\u1ed8NG PH\xc1T"),o.a.createElement(g.q,{icon:v?o.a.createElement(Y.f,null):o.a.createElement(Y.g,null),className:s()("ic-svg-switch",{"zm-switch-off":v})}))),L)))}o.a.memo(x);var K,V=n(1501),D=n.n(V),z=n(1502),B=n.n(z),F=n(1503),H=n.n(F),W=n(1504),Q=n.n(W),G=n(1440),q=n(214),J={id:"zmp3Player",playerId:"zmp3Player",product:"zmp3_video_v6",storageKey:b.v.MV_PLAYER,height:0,width:"100%",autoPlay:!0,volume:50,dblClickToFullScreen:!1,plugins:[D.a,B.a,H.a,Q.a],controls:{time:{delimiter:"|"},seekBar:{bufferedColor:"#b8b8b8",backgroundColor:"#626262"},fullscreen:{dblClickToFullScreen:!0,functionFullscreen:function(){return Object(q.toggleFullScreen)()}}}},X={ControlsPlugin:{disabled:!1,volumeBarShowOnHover:!0,layout:{left:["playpause","next","volume","time"],right:["settings","theatermode","fullscreen"],default:["seekbar"]},theme:G.Constant.MediaControlConst.THEME.PURPLE},KaraokePlugin:{disabled:!1,lines:2,styles:{lineHeight:2,textColor:"#fff",highlightColor:"#d269ff",fontSize:"1.8em",backgroundStyles:{backgroundColor:"",borderRadius:".3em"},controlButton:{activeColor:"#d269ff",inactiveColor:"#fff"}}},LoadingSpinnerPlugin:{showLabel:!0},PrevButtonPlugin:{classIcon:"icon ic-pre"},RepeatPlugin:{disabled:!1,classIcon:"icon ic-repeat",classIconActive:"icon-active"},AutoPlayPlugin:{showBoxUnmute:!1,timeout:3e3}},Z={disabled:!1,lines:2,styles:{lineHeight:2,textColor:"#fff",highlightColor:"#d269ff",fontSize:"1.8em",backgroundStyles:{backgroundColor:"",borderRadius:".3em"},controlButton:{classIcon:"icon ic-karaoke",classIconActive:"icon-active"}}},$=n(13);!function(e){e[e.PLAY_PAUSE_KEY=1]="PLAY_PAUSE_KEY",e[e.VOLUME_UP_KEY=2]="VOLUME_UP_KEY",e[e.VOLUME_DOWN_KEY=3]="VOLUME_DOWN_KEY",e[e.FULL_SCREEN_KEY=4]="FULL_SCREEN_KEY",e[e.REWIND_KEY=5]="REWIND_KEY",e[e.FORWARD_KEY=6]="FORWARD_KEY",e[e.VOLUME_MUTE_KEY=8]="VOLUME_MUTE_KEY",e[e.NUMBER_KEY=9]="NUMBER_KEY"}(K||(K={}));var ee=n(380),te=n(17),ne=n(398);var ae=Object(r.memo)((function(e){var t=e.currentId,n=e.videoIdsInQueue,a=e.video,c=e.videos,l=e.loading,u=e.isPlaying,s=e.clearState,d=e.setIsPlaying,v=e.setReloadVideo,O=Object(E.a)(),h=O.playNextVideo,j=O.playPrevVideo,y=O.toggleIsOpen,P=O.toggleRepeat,L=O.offRepeat,N=O.toggleMinimize,C=O.toggleFullscreen,I=O.toggleTheaterMode,k=Object(m.b)(),A=Object(r.useState)(),w=Object(i.a)(A,2),T=w[0],Y=w[1],S=Object(m.c)(f.g),U=Object(m.c)(f.f),x=Object(m.c)($.c),V=Object(m.c)($.e),D=Object(m.c)(f.e),z=document.getElementsByClassName("zm-layout")[0],B=Object(r.useCallback)((function(e){return!!u}),[u]);Object(p.c)(B,[u]);var F=function(e){I(e)},H=function(){P()},W=function(){h(t,n,c)},Q=function(){var e=M.Array.findIndex(n,t);0===e?(T.pause(),T.seek(0),setTimeout((function(){return T.play()}),0)):j(e,n,c)},ae=function(){h(t,n,c)},ce=function(e){C(e)},ie=function(){d(!1)},re=function(){d(!0)},oe=Object(r.useCallback)((function(){y(!1)}),[]),le=Object(r.useCallback)((function(){N(!1)}),[]),ue=function(){T&&(T.stop(),T.destroy()),Y(null)},se=function(){var e,t,n,c,r=Object.assign({},Z,{lyricUrl:a.lyric}),o=V||a.disabledAds?{}:{source:Object(ne.a)(a.encodeId,b.bb),poster:!0},l=Object.assign({},X,{KaraokePlugin:r,ads:o});(null===a||void 0===a||null===(e=a.streaming)||void 0===e?void 0:e.hls)?(n=function(e,t){var n=Object.values(e),a={};if(t)return a.source=n[n.length-1],a;switch(n.length){case 4:a.source=n[1],a.sourceLevelQuality=[{label:"1080p",disabled:!0,index:99},{label:"720p",disabled:!0,index:99}];break;case 3:a.source=n[1],a.sourceLevelQuality=[{label:"720p",disabled:!0,index:99}];break;case 2:a.source=n[1],a.sourceLevelQuality=[];default:a.source=n[0],a.sourceLevelQuality=[]}return a}(a.streaming.hls,x),c=Object.assign({},J,{loop:U,source:n.source,poster:a.thumbnailM,mimeType:"application/x-mpegURL",sources:n.sourceLevelQuality,pluginsOptions:l})):(null===a||void 0===a||null===(t=a.streaming)||void 0===t?void 0:t.mp4)?(n=function(e,t){for(var n={},a=[],c=0,r=0,o=Object.entries(e);r<o.length;r++){var l=Object(i.a)(o[r],2),u=l[0],s=l[1],d={};d.label=u.toLowerCase(),d.source=s||"",d.index=c,s&&"ERROR"!==s&&a.push(d),c++}return a.length>0?(n.sourceLevelQuality=a.reverse(),n.source=a[a.length-1].source):n.source="ERROR",n}(a.streaming.mp4),c=Object.assign({},J,{loop:U,source:n.source,poster:a.thumbnailM,mimeType:"video/mp4",sources:n.sourceLevelQuality,pluginsOptions:l})):c=Object.assign({},J,{source:"ERROR",poster:a.thumbnailM,mimeType:"video/mp4",pluginsOptions:l});var u=new G.Player(c),s=document.getElementById("videoPlayer");u.attachTo(s),u.disableMediaControl(),Y(u)};Object(r.useEffect)((function(){a&&!l&&D&&(ue(),se())}),[a,l,D]);var de=function(){v(!0)};Object(r.useEffect)((function(){return function(){s(),ue(),L()}}),[]),Object(r.useEffect)((function(){if(T){var e=T.getPlugin("RepeatPlugin");e&&e.setState(U)}}),[U]),Object(r.useEffect)((function(){D&&z.classList.remove("has-player")}),[D]),Object(r.useEffect)((function(){var e=function(){T.pause(),y(!1)};return D&&window.ZMP3_PLAYER.once(G.Events.PLAYER_PLAY,e),function(){D&&window.ZMP3_PLAYER.off(G.Events.PLAYER_PLAY,e)}}),[D,T]),Object(r.useEffect)((function(){if(T){I(T.isTheaterMode()),T.on(G.Events.PLAYER_THEATER_MODE_CHANGE,F),T.on(G.Events.PLAYER_ENDED,ae),T.on(G.Events.PLAYER_FULLSCREEN,ce),T.on(G.Events.PLAYER_PAUSE,ie),T.on(G.Events.PLAYER_PLAY,re),T.on(G.Events.PLAYER_QUALITY_LEVELS_SELECTED,(function(e){var t={title:"Xem MV ch\u1ea5t l\u01b0\u1ee3ng cao",text:"B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y",buttonText:"\u0110\u0103ng nh\u1eadp",functionComplete:de};e.disabled&&k(Object(te.o)({type:b.z.VIP,option:t}))}));var e=T.getPlugin("NextButtonPlugin");e&&e.on(e._nameEvents.PLUGIN_NEXT_BUTTON_CLICK,W);var t=T.getPlugin("PrevButtonPlugin");t&&t.on(t._nameEvents.PLUGIN_PREV_BUTTON_CLICK,Q);var n=T.getPlugin("RepeatPlugin");n&&n.on(n._nameEvents.PLUGIN_REPEAT_TOGGLE,H)}return function(){if(T){T.off(G.Events.PLAYER_THEATER_MODE_CHANGE,F),T.off(G.Events.PLAYER_ENDED,ae),T.off(G.Events.PLAYER_FULLSCREEN,ce),T.off(G.Events.PLAYER_PAUSE,ie),T.off(G.Events.PLAYER_PLAY,re);var e=T.getPlugin("NextButtonPlugin");e&&e.off(e._nameEvents.PLUGIN_NEXT_BUTTON_CLICK,W);var t=T.getPlugin("PrevButtonPlugin");t&&t.off(t._nameEvents.PLUGIN_PREV_BUTTON_CLICK,Q);var n=T.getPlugin("RepeatPlugin");n&&n.off(n._nameEvents.PLUGIN_REPEAT_TOGGLE,H)}}}),[T,n]),Object(r.useEffect)((function(){var e=function(e){var t,n=!((t=e).metaKey||t.ctrlKey||t.altKey)&&(function(e){return 32===e.keyCode||179===e.keyCode}(t)?K.PLAY_PAUSE_KEY:function(e){return 38===e.keyCode}(t)?K.VOLUME_UP_KEY:function(e){return 40===e.keyCode}(t)?K.VOLUME_DOWN_KEY:function(e){return 77===e.keyCode}(t)?K.VOLUME_MUTE_KEY:function(e){return 70===e.keyCode}(t)?K.FULL_SCREEN_KEY:function(e){return 37===e.keyCode||177===e.keyCode}(t)?K.REWIND_KEY:function(e){return 39===e.keyCode||176===e.keyCode}(t)?K.FORWARD_KEY:!!function(e){return e.keyCode>47&&e.keyCode<59||e.keyCode>95&&e.keyCode<106}(t)&&K.NUMBER_KEY);if(!n)return!0;if(e.metaKey||e.ctrlKey||e.altKey)return!1;var a=e.target;if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName)return!1;switch(e.preventDefault(),e.stopPropagation(),n){case K.PLAY_PAUSE_KEY:T.togglePlay();break;case K.VOLUME_UP_KEY:T.setVolume(100*T.getVolume()+5,!0);break;case K.VOLUME_DOWN_KEY:T.setVolume(100*T.getVolume()-5,!0);break;case K.VOLUME_MUTE_KEY:T.isMuted()?T.unmute(!0):T.mute(!0);break;case K.FULL_SCREEN_KEY:Object(q.toggleFullScreen)(),C();break;case K.REWIND_KEY:T.seek(T.getCurrentTime()-5);break;case K.FORWARD_KEY:T.seek(T.getCurrentTime()+5);break;case K.NUMBER_KEY:var c=function(e){var t=48;return e.keyCode>95&&(t=96),e.keyCode-t}(e);T.seek(T.getDuration()*c*.1)}return!0};return T&&document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[T]),Object(r.useEffect)((function(){if(navigator.mediaSession&&a){var e=navigator.mediaSession;return e.metadata=new MediaMetadata({title:a.title,artist:a.artistsNames,artwork:[{src:a.thumbnailM,sizes:"96x96",type:"image/png"},{src:a.thumbnailM,sizes:"128x128",type:"image/png"},{src:a.thumbnailM,sizes:"192x192",type:"image/png"},{src:a.thumbnailM,sizes:"256x256",type:"image/png"},{src:a.thumbnailM,sizes:"384x384",type:"image/png"},{src:a.thumbnailM,sizes:"512x512",type:"image/png"}]}),T&&(e.setActionHandler("play",(function(){return T.togglePlay()})),e.setActionHandler("pause",(function(){return T.togglePlay()})),e.setActionHandler("previoustrack",(function(){return Q()})),e.setActionHandler("nexttrack",(function(){return W()}))),function(){if(T){var t=function(){};e.setActionHandler("play",t),e.setActionHandler("pause",t),e.setActionHandler("previoustrack",t),e.setActionHandler("nexttrack",t)}}}}),[T,a]),R.j.debug("Video Player render ",t," | ",a);var me=a||{},Ee=me.title,fe=me.artists;return l?o.a.createElement(o.a.Fragment,null,S?o.a.createElement(_.a,{width:"100%",height:"100%",duration:2}):o.a.createElement(_.a,{width:"100%",height:0,duration:2,style:{paddingBottom:"56.25%"}})):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"videoPlayer"},o.a.createElement(g.l,{className:"player-button-minimize"},o.a.createElement(g.O,{className:"mar-r-5",icon:"floating",title:"M\u1edf r\u1ed9ng",onClick:le}),o.a.createElement(g.O,{title:"\u0110\xf3ng",icon:"close",onClick:oe})),o.a.createElement(g.l,{className:"player-info-fullscreen"},"Cu\u1ed9n trang \u0111\u1ec3 xem nhi\u1ec1u h\u01a1n",o.a.createElement(g.q,{icon:"go-down"}))),o.a.createElement(g.l,{className:"video-info-minimize"},o.a.createElement(g.l,{renderAs:"span"},Ee),o.a.createElement(g.M,{renderAs:"span",subtitle:!0},"\xa0-\xa0",fe&&o.a.createElement(ee.a,{items:fe}))))})),ce=o.a.memo((function(e){var t=e.video,n=e.currentId,a=e.videoIdsInQueue,c=e.videos,i=e.loading,r=e.isPlaying,l=e.isFullscreen,u=e.clearState,d=e.setIsPlaying,E=e.setReloadVideo,b=Object(m.c)(f.g);return o.a.createElement(g.l,{className:s()("video-body",{"theater-mode":b})},o.a.createElement(g.i,null,o.a.createElement(g.h,{multiline:!0},o.a.createElement(g.h.Column,{className:"video-player",marginClass:"mar-b-0"},o.a.createElement(ae,{video:t,currentId:n,videos:c,videoIdsInQueue:a,loading:i,isPlaying:r,clearState:u,setIsPlaying:d,setReloadVideo:E})),o.a.createElement(g.h.Column,{className:"queue-player",marginClass:"mar-b-0"},o.a.createElement(x,{theaterMode:b,isFullscreen:l,videoIdsInQueue:a,videos:c,currentId:n,loading:i})))))})),ie=n(34),re=n(153),oe=n(76),le=(n(1472),o.a.memo((function(){var e,t=Object(r.useRef)(null),n=o.a.useRef(0),u=Object(m.c)(f.a),d=Object(p.p)().addNotify,O=Object(E.a)(),h=O.toggleIsOpen,j=O.clear,y=O.toggleMinimize,P=Object(l.a)(),_=Object(m.c)(f.e),N=Object(m.c)(f.d),C=Object(m.c)(f.c),k=Object(r.useState)(!1),T=Object(i.a)(k,2),Y=T[0],S=T[1],U=Object(r.useState)(!1),x=Object(i.a)(U,2),K=x[0],V=x[1],D=Object(r.useState)(!1),z=Object(i.a)(D,2),B=z[0],F=z[1],H=Object(r.useState)([]),W=Object(i.a)(H,2),Q=W[0],G=W[1],J=Object(r.useState)([]),X=Object(i.a)(J,2),Z=X[0],ee=X[1],te=Object(r.useState)(),ne=Object(i.a)(te,2),ae=ne[0],le=ne[1],ue=Object(r.useState)(!1),se=Object(i.a)(ue,2),de=se[0],me=se[1],Ee=Object(m.c)(f.b),fe=Object(r.useState)(!0),be=Object(i.a)(fe,2),ge=be[0],ve=be[1],Oe=Object(m.c)($.d),pe=Object(r.useState)(!1),he=Object(i.a)(pe,2),je=he[0],ye=he[1],Pe=Object(r.useRef)(!1),_e=Object(m.c)(oe.a);Object(r.useEffect)((function(){we()}),[Ee]);var Le=Object(p.b)(v.a.getDetail),Re=Object(i.a)(Le,2),Ne=Re[0],Ce=Re[1];Object(r.useEffect)((function(){_&&!N||window.history.replaceState({},"",ie.a.get(b.v.MV_PREV_OPEN_URL)||"/")}),[_,N]),Object(r.useEffect)((function(){_&&-1===window.location.href.indexOf("/video-clip/")&&ie.a.set(b.v.MV_PREV_OPEN_URL,window.location.href)}),[_,P]),Object(r.useEffect)((function(){if(Ne.value&&_&&!N){var e,t=null===(e=Ne.value)||void 0===e?void 0:e.data;ge?(window.history.pushState({},t.title,t.link),ve(!1)):window.history.replaceState({},t.title,t.link)}}),[_,N,Ne.value]),Object(r.useEffect)((function(){Ne.error&&d({status:b.U.ERROR,text:Ne.error.msg})}),[Ne]),Object(r.useEffect)((function(){N&&ve(!0)}),[N]);var Ie=(Ne.loading||de)&&!N&&!C,ke=[ae,Z,Ie,Y,C,K];Object(r.useEffect)((function(){var e=document.getElementsByClassName("video-fullscreen-wrapper")[0];return e&&e.addEventListener("mousemove",Ye),e&&e.addEventListener("mouseleave",Se),C?Ye():(V(!1),S(!1)),function(){e&&e.removeEventListener("mousemove",Ye),e&&e.removeEventListener("mouseleave",Se)}}),[C,K]),Object(r.useEffect)((function(){var e;u&&(le(void 0),Ce(u),null===(e=t.current)||void 0===e||e.scrollTo(0,0))}),[u]),Object(r.useEffect)((function(){var e;je&&(le(void 0),Ce(u),null===(e=t.current)||void 0===e||e.scrollTo(0,0))}),[je]),Object(r.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.scrollTo(0,0)}),[C]),Object(r.useEffect)((function(){if(Ne.value){var e,t=null===(e=Ne.value)||void 0===e?void 0:e.data;Ae(t),Object(w.m)(t.title,t.artistsNames)}}),[Ne.value]),Object(r.useEffect)((function(){return _&&(me(!0),document.body.style.overflow="hidden",document.body.style.backgroundColor="#000",setTimeout((function(){return me(!1)}),700)),function(){document.body.removeAttribute("style")}}),[u,_]),Object(r.useEffect)((function(){return!t.current&&_&&(t.current=document.getElementById(b.Q)),function(){_&&(setTimeout((function(){return j()}),700),ve(!0),t.current=null)}}),[_]),Object(r.useEffect)((function(){_&&!N||Object(w.o)();var e=function(){h(!1)};return _&&window.ZMP3_PLAYER.once(b.F.PLAYER_PLAY,e),function(){_&&window.ZMP3_PLAYER.off(b.F.PLAYER_PLAY,e)}}),[_,N]),Object(r.useEffect)((function(){C&&(B?Te():Me())}),[B,C]),Object(r.useEffect)((function(){var e;P.trigger===b.t.LOAD||-1!==(null===(e=P.pathname)||void 0===e?void 0:e.indexOf("/video-clip/"))||!_||N||Ne.loading||(y(!0),Object(q.closeFullscreen)())}),[P]),Object(r.useEffect)((function(){P.trigger===b.t.POP_STATE&&y(!0)}),[P]),Object(r.useEffect)((function(){!Pe.current&&Q.length&&_e&&(Pe.current=!0,re.a.getSuggestMV(u).then((function(e){if(e){var t=M.Array.insert(Object(c.a)(Q),e,2);G(t),ee(t.map((function(e){return e.encodeId})))}})))}),[Q,_e]);var Ae=function(e){if(le(e),!Q.length&&e.recommends&&e.recommends.length){e.recommends=e.recommends.filter((function(e){return e.isWorldWide||Oe})),G([e].concat(Object(c.a)(e.recommends)));var t=[];t.push(e.encodeId),e.recommends.forEach((function(e){t.push(e.encodeId)})),ee(t)}},we=function(){ee([]),G([]),le(void 0)},Me=function(){clearTimeout(n.current),S(!0),V(!0)},Te=function(){V(!1),setTimeout((function(){return Ye()}),0)},Ye=Object(r.useCallback)((function(){K||(clearTimeout(n.current),S(!0),n.current=setTimeout((function(){return Se()}),3e3))}),[K]),Se=Object(r.useCallback)((function(){K||(clearTimeout(n.current),S(!1))}),[K]),Ue=Object(r.useCallback)((function(){var e;return R.j.debug("Video renderContent ",u," | ",ae,Ie),o.a.createElement(g.l,{className:Ie?"video-loading":"video-wrapper"},o.a.createElement(A,{video:ae,loading:Ie}),o.a.createElement(g.l,{className:"video-container"},o.a.createElement(g.l,{className:s()((e={},Object(a.a)(e,"video-fullscreen-wrapper",C),Object(a.a)(e,"is-show-info",Y),e))},o.a.createElement(L,{video:ae,toggleIsOpen:h,loading:Ie,isFullscreen:C}),o.a.createElement(ce,{video:ae,currentId:u,videoIdsInQueue:Z,loading:Ie,clearState:we,setIsPlaying:F,setReloadVideo:ye,isPlaying:B,videos:Q,isFullscreen:C})),o.a.createElement(I,{currentId:u,loadingVideo:Ie})))}),[ke]);return o.a.createElement(g.l,{className:s()("zm-video-modal",(e={},Object(a.a)(e,"video-minimize",N),Object(a.a)(e,"video-fullscreen",C),e))},o.a.createElement(g.J,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,id:b.Q},Ue()))})));var ue=Object(r.memo)((function(){var e=Object(m.c)(f.e),t=Object(m.c)(f.d),n=Object(E.a)().toggleMinimize,a=Object(r.useCallback)((function(){t&&n(!1)}),[t]);return o.a.createElement(d.a,{in:e,mountOnEnter:!0,unmountOnExit:!0,timeout:600,classNames:"zm-video-animation",onExited:a},o.a.createElement(le,null))}));n.d(t,"VideoService",(function(){return v.a})),n.d(t,"default",(function(){return ue}))}}]);