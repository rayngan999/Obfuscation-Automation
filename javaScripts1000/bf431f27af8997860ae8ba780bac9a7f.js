var externalContentLoader=(function(g,f,v,u){var l={DEBUG:1,INFO:2,WARNING:3,ERROR:4};var j=f;var x={};var n=this;var s;var p="";var c;var b={RTK:2,DFP:1,AdCMS:0};var i=false;if(!window.logCustomParamsByContType){window.logCustomParamsByContType=[]}var w=[];j.abTesting="zoomd";if(v&&v.injectionSettings&&v.injectionSettings.Platform&&v.injectionSettings.Platform==="codefuel"){j.abTesting="perion"}var h=function(y,e){if(y==e){return 0}return y<e?-1:1},k=function(z,e){var y=h;if(z){y=function(B,A){return h(z(B),z(A))}}if(e){return function(B,A){return -1*y(B,A)}}return y};u.sort_by=function(){var e=[],y=arguments.length,C,z,B;for(var A=0;A<y;A++){C=arguments[A];if(typeof C==="string"){z=C;B=h}else{z=C.name;B=k(C.primer,C.reverse)}e.push({name:z,cmp:B})}return function(F,E){var M,L,D,K,N=0;for(var I=0,G=y;I<G;I++){N=0;C=e[I];D=C.name;K=C.cmp;if(D.indexOf(".")>0){var J=D.split(".");M=F;L=E;for(var H=0;H<J.length;H++){M=M[J[H]];L=L[J[H]]}}else{M=F[D];L=E[D]}N=K(M,L);if(N!==0){break}}return N}};if(!window.hidePlacement){window.hidePlacement=function(e){if(window.zoomdExports&&window.zoomdExports.getWidgetMessageListener){window.zoomdExports.getWidgetMessageListener().hidePlacement.next(e)}else{window.postMessage("hidePlacementAd:"+e,location.href)}}}try{x=JSON.parse(j.AdPlacements);x.sort(u.sort_by("name",{name:"settings.position",primer:parseInt},{name:"settings.width",primer:parseInt,reverse:true}))}catch(t){x=null}if(!j.hasOwnProperty("widgetMinorVersion")){j.widgetMinorVersion=v.internalConfig.widgetVersion+(v.injectionSettings.isMobile?".mobile":"")}function m(y){var e=x.filter(function(z){return z.settings?z.settings.placement===y:false});if(e[0]&&e[0].settings.hidePlacement){return e[0]}}function o(){var y=window.JITA&&JITA.getInfo&&JITA.getInfo().config().adUnitCodes;var e=window.JITA&&JITA.getInfo&&JITA.getInfo().config().divOverrides;var z={};if(e){for(key in e){z[e[key]]=key}}x.map(function(A){A.settings.placement=A.settings.placement||A.name+A.settings.position;A.settings.unitId=A.settings.unitId||"zd-rtk-"+A.settings.placement;if(j.ExternalContentFramework&&!A.settings.fromCMS){if(c){if(z&&z.hasOwnProperty(A.settings.unitId)){A.settings.shortCode=z[A.settings.unitId]}else{A.settings.shortCode=A.settings.unitId}}}return A.settings.unitId});x=x.filter(function(A){return !!A.settings.fromCMS||y.indexOf(A.settings.shortCode)>-1})}if(x&&x.length>0&&j.ExternalContentFramework){var r=-1;if(typeof window.exports=="object"){r=window.exports;window.exports=null}var a=null;if(window.jQuery!==g){a=window.jQuery;window.jQuery=g}if(j.HeaderBiddingSettings&&j.HeaderBiddingSettings.length>0){try{j.HeaderBiddingSettings=JSON.parse(j.HeaderBiddingSettings)}catch(t){j.HeaderBiddingSettings=null;u.logActionWithParams("HeaderBiddingSettings_invalidJson")}if(j.HeaderBiddingSettings){n.headerBiddingSettings=j.HeaderBiddingSettings[v.injectionSettings.isMobile?"Mobile":"Desktop"]}}c=j.ExternalContentFramework==b.RTK&&n.headerBiddingSettings&&n.headerBiddingSettings.AuctionId&&n.headerBiddingSettings.AuctionId.length>0;x.map(function(e,y){if(e.settings){if(e.name=="Custom"||e.name=="M-Custom"){e.settings.customId=y}e.settings.placement=e.settings.placement||e.name+(isNaN(e.settings.position)?"":e.settings.position)+(isNaN(e.settings.customId)?"":e.settings.customId);e.settings.unitId=e.settings.unitId||(c?"zd-rtk-"+e.settings.placement:"zd-dfp-"+e.settings.placement)}});if(c){window.JITA=window.JITA||{};window.JITA.cmd=window.JITA.cmd||[];window.JITA.cmd.push(function(){JITA.disableInitialLoad()});u.loadScript("//816.hostedprebid.com/"+n.headerBiddingSettings.AuctionId+"/jita.js"+(n.headerBiddingSettings.WithDfp?"?dfp=1":""),"rtk",function(){u.logActionWithParams("RTKLoaded");window.JITA.cmd.push(function(){o();n.isHeaderBiddingReady=true});window.addEventListener("JITA_NoAdServed",function(C){var A=C.detail.divId;var z=g("#"+A);var B=g(z).data("zoomdplacement");u.logActionWithParams("AdNoFill",{containerType:B});var y=m(B);if(y&&y.settings.hidePlacement){y.settings.hidePlacement(y.settings)}if(window.hidePlacement){hidePlacement(B)}},false);window.addEventListener("jitaSlotRenderEnded",function(y){},false);window.addEventListener("JITA_ImpressionViewable",function(B){var z=B.detail.divId;var y=g("#"+z);var A=g(y).data("zoomdplacement");u.waitFor(function(){return g("#"+z+" > *").length>0},function(){u.logActionWithParams("AdDisplayed",{containerType:A})},10)},false)})}else{u.loadScript(Zoomd.Widget.SU_BaseUrlContentHttp+"/common-scripts/jquery.dfp.min.js?v="+v.internalConfig.thirdPartyVersion,"dfp",function(){u.logActionWithParams("DFPLoaded");if(r!==-1){window.exports=r}if(a){window.jQuery=a}})}}this.getNoIframe=function(J,F,K){var E="";var G={};var L,z;var A;var I=F.url.split("?")[1];var H=I.split("&");for(var C=0;C<H.length;C++){var B=H[C].split("=");if(B[0]&&B[0]!=="abTesting"&&B[1]&&B[1].length>0){G[B[0]]=decodeURIComponent(B[1])}}function y(O,P){var N=g(O.target);while(!N.hasClass("zd-nfr")){N=N.parent()}var M=N.data("conttype");if(M&&typeof(M)=="string"&&M.length>0){P.containerType=M}return P}function D(){var M=g.Deferred();var N={url:F.url,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"html",beforeSend:function(){var O=1;A=setInterval(function(){G.timeSecondsDelay=O;u.logActionWithParams("AdsCMSDelay",G);O++},1000)},timeout:30000,success:function(O){if(!O||O.Error){M.reject(O)}else{M.resolve(O)}},error:function(O){M.reject(O)}};g.ajax(N);return M.promise()}function e(P,N){var Q=g(P);var O=0;var M=setInterval(function(){O++;Q=g(P);if(Q.get(0)){N(Q);clearInterval(M)}if(O==6){clearInterval(M)}},500)}(new D()).done(function(U){var N="";if(F.height){N="height:"+F.height+";"}var V="#zd-nfr-"+J+"-ps-"+F.position+F.contAdName;L=g(V);L.addClass("zd-nfr").attr("data-conttype",J+F.position);var P=true;clearInterval(A);if((/%AdsCMS.NotAvailable%/g).test(U)){if(J==="404Disc"||J==="M-404Disc"||J==="ts"){L.parent().remove()}if(L){L.remove()}var M=L.data("conttype");if(M&&typeof(M)=="string"&&M.length>0){G.containerType=M}u.logActionWithParams("AdsCMS_NotAvailable",G)}else{if(!window.PushLogParam||!SUPJQ.isFunction(window.PushLogParam)){window.PushLogParam=function(W,X,Y){if(Y){logCustomParamsByContType[Y]=logCustomParamsByContType[Y]||{};logCustomParamsByContType[Y][W]=X}w[W]=X}}if(!(/%AdsCMS.DisableAdDisplayed%/g).test(U)){L.on("zoomdSearch:adDisplayed",function(W){u.logActionWithParams("AdDisplayed",y(W,G));if(SUPJQ.isFunction(K)){K()}})}if(!(/%AdsCMS.DisableAdProvided%/g).test(U)){L.on("zoomdSearch:adProvided",function(W){u.logActionWithParams("AdProvided",y(W,G))})}if(!(/%AdsCMS.DisableAdClick%/g).test(U)){L.on("click",function(){var W=L.data("conttype");if(W&&typeof(W)=="string"&&W.length>0){G.containerType=W}u.logActionWithParams("AdClick",G)})}U=U.trim('"').trim("'");if(F.NoiFrame===2){var S=function(W){if(W&&W.length>0){W[0].write('<!doctype html><html style="height:100%;width:100%;margin:0;"><head><base href="'+Zoomd.Widget.SU_BaseUrlServiceHttp+'"></base><script>inDapIF = true;inFIF=true;iFrameSrc="'+F.url+'"<\/script></head><body style="height:100%;width:100%;margin:0;">'+U+"</body></html>")}};var R=function(W){var X=g('<iframe src="" frameborder="0" scrolling="no" style="height:100%;width:100%;margin:0;" />').appendTo(g(W));if(X){var Y=X.contents();if(Y&&Y.length>0){S(Y)}else{u.waitFor(function(){var Z=X.contents();if(Z&&Z.length>0){return Z}return null},S)}}};if(g(V).get(0)){R(V)}else{e(V,function(W){if(g(W).length){R(W)}})}}else{if(L.get(0)){L.html(U)}else{e("#zd-nfr-"+J+"-ps-"+F.position+F.contAdName,function(W){if(W){W.html(U)}})}}var O=function(){if(z){z.before(L)}P=false;if(SUPJQ.isFunction(K)){K()}};if(z&&z.length>0){O()}else{if(z){var T=0;var Q=setInterval(function(){T++;if(z.length>0){O();clearTimeout(Q)}if(T==6){u.logActionWithParams("ad_not_shown_missing_element",G);clearTimeout(Q)}},500)}else{if(L&&L.length>0){O()}}}}if(P&&SUPJQ.isFunction(K)){K()}}).fail(function(M,O,N){clearInterval(A);if(O==="timeout"){u.logActionWithParams("AdsCMS_timeout",G)}else{u.logActionWithParams("AdsCMS_error"+O,G)}if(L){L.remove()}if(SUPJQ.isFunction(K)){K()}})};this.isReady=function(){return true};this.load=function(Q,N,I,L){var G=[];if(typeof(x)!="object"||g.isEmptyObject(x)){return G}var E=screen.availWidth;var K=2;if(E>540&&E<880){K=3}else{if(E>881){K=4}else{if(E<300){K=1}}}function R(S){return S?(K<S?K:S):null}function M(S){if(S){if(!isNaN(S)){S=S+"px"}if(!(/[0-9]+px$/).test(S)){S=null}return S}return null}function P(T,S){if(!isNaN(T)){var U=jQuery.grep(S,function(V){return V.settings&&V.settings.width&&V.settings.width<=T});return jQuery.grep(U,function(W,V){return V===0||W.settings&&W.settings.position&&W.settings.position!==U[V-1].settings.position})}return S}window.Zoomd.placementsLoaded=window.Zoomd.placementsLoaded||{};var O=function(S){var T=document.createElement("div");T.innerHTML=S;return(T.innerHTML===S)};function z(S){var T=S.replace(/<script.*>.*?<\/script>/im,"");if(O(T)){return T}else{return false}}function J(V,T){var S=V.settings.placement||V.name+V.settings.position;var W=V.settings.unitId||"zd-rtk-"+S;var U='<div class="zd-dfp-unit" data-adtest="on" id="'+W+'"  data-adunit="'+(V.settings.adunit||S)+'" ';U+="data-zoomdplacement='"+S+"' ";U+="></div>";var X=true;u.waitFor(function(){return g("#"+W).length&&g.contains(document.documentElement,g("#"+W).get(0))&&n.isHeaderBiddingReady},function(){if(!JITA.destroySlot(this.item.settings.shortCode)){JITA.destroySlot(this.item.settings.unitId)}T&&T(this.item.settings,X)}.bind({item:V}),10);return U}function e(ab,V){var X=ab.settings.placement||ab.name+ab.settings.position;var W=ab.settings.unitId||"zd-dfp-"+X;var Z='<div class="zd-dfp-unit" data-adtest="on" id="'+W+'"  data-adunit="'+(ab.settings.adunit||X)+'" ';var aa=ab.settings.height||(N&&N.height);if(aa){if(isNaN(aa)){aa=aa.replace("px","").trim();if(isNaN(aa)){aa=null}}}var T=ab.settings.width||(N&&N.width);if(T){if(isNaN(T)){T=T.replace("px","").trim();if(isNaN(T)){T=null}}}var S=ab.settings.dimensions;if(aa&&T){S=T+"x"+aa}if(S){Z+='data-dimensions="'+S+'" '}var U=ab.settings.targeting;if(typeof(ab.settings.targeting)=="string"){try{U=JSON.parse(ab.settings.targeting)}catch(Y){}}if(typeof(U)=="object"){g.extend(U,{clientId:v.injectionSettings.clientId})}else{U={clientId:v.injectionSettings.clientId}}if(U.hasOwnProperty("query")&&N){U.query=N.query}Z+="data-targeting='"+JSON.stringify(U)+"' ";Z+="data-zoomdplacement='"+X+"' ";Z+="></div>";u.waitFor(function(){return g("#"+W).length&&!!g.dfp&&g.contains(document.documentElement,g("#"+W).get(0))},function(){if(window.Zoomd.placementsLoaded.hasOwnProperty(X)){if(window.Zoomd.placementsLoaded[X]){window.googletag.destroySlots([window.Zoomd.placementsLoaded[X]])}delete window.Zoomd.placementsLoaded[X]}if(!S){if(g("#"+W).height()<=0){g("#"+W).height(aa||90)}g("#"+W).height(Math.floor(g("#"+W).height()));g("#"+W).width(Math.floor(g("#"+W).width()))}V&&V(this)}.bind(W),10);return Z}function B(U){try{var S=g("#"+U).data("zoomdplacement");g("#"+U).dfp({dfpID:v.internalConfig.dfpId,afterEachAdLoaded:function(W,Y){var X=g(W).data("zoomdplacement");if(X&&(!window.Zoomd.placementsLoaded.hasOwnProperty(X)||typeof(window.Zoomd.placementsLoaded[X])=="string")){window.Zoomd.placementsLoaded[X]=g(W).data("googleAdUnit")||Y.slot;if(g(W).hasClass("display-none")){u.logActionWithParams("AdNoFill",{containerType:X});var V=m(X);if(V&&V.settings.hidePlacement){V.settings.hidePlacement(V.settings)}if(window.hidePlacement){hidePlacement(X)}}else{u.logActionWithParams("AdDisplayed",{containerType:X})}}},impressionViewable:function(V,Y){var W=Y.slot.getSlotId();V=g("#"+W.getDomId());var X=g(V).data("zoomdplacement");if(X&&!window.Zoomd.placementsLoaded.hasOwnProperty(X)){window.Zoomd.placementsLoaded[X]="fetchCalled"}}});u.waitFor(function(){return g("#"+U).data("googleAdUnit")},function(){setTimeout(function(){if(!window.Zoomd.placementsLoaded.hasOwnProperty(S)){try{window.googletag.pubads().refresh([g("#"+U).data("googleAdUnit")],{changeCorrelator:false})}catch(W){var V=g("#"+U).data("zoomdplacement");if(window.hidePlacement){hidePlacement(V)}u.logActionWithParams("AdRefreshError",{containerType:V,zdMessage:W.message})}}},500)},10,500,function(){return window.Zoomd.placementsLoaded.hasOwnProperty(S)})}catch(T){u.sendLog(T.message,"ERROR")}}var y="";var H="";var D="";var F=0;var A="";if(N){if(N.name){H="_"+N.name}if(N.width){D+="width:"+N.width+";"}if(N.height){D+="height:"+N.height+";"}if(N.query){A=N.query}}var C=x.filter(function(S){if(S.name===Q&&N&&N.hidePlacement){S.settings.hidePlacement=N.hidePlacement}return S.name===Q});if(N&&N.posibleWidth){C=P(N.posibleWidth,C)}if(N&&N.loadRenderedContent&&N.loadRenderedContent.length>0){u.waitFor(function(){return g("#"+N.loadRenderedContent).length&&(j.ExternalContentFramework==b.DFP?(!!g.dfp):true)&&g("#"+N.loadRenderedContent).is(":visible")},function(){if(c){jitaJS.rtk.refreshAdUnits([N.loadRenderedContent],true)}else{B(N.loadRenderedContent)}},10);return}C.map(function(T,U){if(T.hasOwnProperty("name")&&T.name===Q){if(!T.settings){T.settings={}}if(isNaN(T.settings.position)&&T.settings.position!=="last"){T.settings.position=""}if(T.settings.hasOwnProperty("tag")&&T.settings.tag){T.unitId=T.settings.unitId;var S=z(T.settings.tag);if(S){u.waitFor(function(){return g("#"+T.unitId+" > *").length>0},function(){u.logActionWithParams("AdDisplayed",{containerType:T.settings.placement})},10);y='<div id="'+T.unitId+'" data-zoomdplacement="'+T.settings.placement+'" >'+S+"</div>"}else{u.logActionWithParams("AdNoFill",{containerType:T.settings.placement})}}else{if(j.ExternalContentFramework&&!T.settings.fromCMS){if(c){y=J(T,function(W,V){jitaJS.rtk.refreshAdUnits([W.shortCode||W.unitId],V)})}else{y=e(T,B)}T.unitId=T.settings.unitId;u.logActionWithParams("AdRequest",{containerType:T.settings.placement})}else{if(T.settings.hasOwnProperty("NoiFrame")&&T.settings.NoiFrame){T.settings.url=q(T.settings.placement||(Q+T.settings.position));T.settings.columnSpan=R(T.settings.cardSpan);T.settings.height=M(T.settings.height);T.settings.contAdName=H;T.settings.id="zd-nfr-"+Q+"-ps-"+T.settings.position+(isNaN(T.settings.customId)?"":T.settings.customId)+H;n.getNoIframe(Q,T.settings,I,L);if(T.settings.NoiFrame===2&&T.settings.height){D+="height:"+T.settings.height+";"}y='<div style="'+D+'" id="'+T.settings.id+'"></div>'}else{T.settings.id="zd-fr-"+Q+"-ps-"+T.settings.position+(isNaN(T.settings.customId)?"":T.settings.customId)+H;y='<iframe id="'+T.settings.id+'" src="'+q(T.settings.placement||(Q+T.settings.position),A)+'" frameborder="0" scrolling="no" style="'+D+'"></iframe>'}}}if(y&&y.length>0){resultData={};resultData.columnSpan=R(T.settings.cardSpan);resultData.height=M(T.settings.height);resultData.width=M(T.settings.width);resultData.position=T.settings.position;resultData.settings=T.settings;resultData.html=y;resultData.unitId=T.settings.shortCode||T.unitId;if(H!=""){resultData.contAdName=H}G.push(resultData)}}});return G};function d(z){var e=Zoomd.Widget.SU_BaseUrlServiceHttp+"ActionSearch2?";var y=g.map(z,function(B,A){return A+"="+encodeURIComponent(B)});return e+y.join("&")}function q(e){var z=v.zdlogger.getSessionParameters({containerType:e,itemType:"AMPCard"});var y=d(z);return y}return this});