Cube("datav:/com/maliang-utils/0.0.22",["datav:/npm/lodash/4.13.1"],function(a,b,c){function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function d(a,b,c){for(var d=[],e=0,g=a.length;e<g;e+=2)d.push([a[e],a[e+1]]);for(var h=f(d,0.4,b,c),i=d.length,j=[],k=0,l=0,m=0,n=0;n<i-1;n++)k=h[2*n],l=h[2*n+1],m=d[n+1],j.push(["C",k[0],k[1],l[0],l[1],m[0],m[1]]);return b&&(k=h[i],l=h[i+1],m=d[0],j.push(["C",k[0],k[1],l[0],l[1],m[0],m[1]])),j}function f(a,b,c,d){var e=[],f=void 0,g=void 0,j=!!d,k=void 0,m=void 0;if(j){k=[Infinity,Infinity],m=[-Infinity,-Infinity];for(var n,o=0,i=a.length;o<i;o++)n=a[o],k=h.min([],k,n),m=h.max([],m,n);k=h.min([],k,d[0]),m=h.max([],m,d[1])}for(var l,p=0,q=a.length;p<q;p++){if(l=a[p],c)f=a[p?p-1:q-1],g=a[(p+1)%q];else if(0===p||p===q-1){e.push(l);continue}else f=a[p-1],g=a[p+1];var r=[];r=h.sub(r,g,f),r=h.scale(r,r,b);var s=h.distance(l,f),t=h.distance(l,g),u=s+t;0!==u&&(s/=u,t/=u);var v=h.scale([],r,-s),w=h.scale([],r,t),x=h.add([],l,v),y=h.add([],l,w);j&&(x=h.max([],x,k),x=h.min([],x,m),y=h.max([],y,k),y=h.min([],y,m)),e.push(x),e.push(y)}return e}var g=c("datav:/npm/lodash/4.13.1");a.exports={threeD2Two:function(a,b,c,f,d,h){if(void 0===b||void 0===c||void 0===f||void 0===d)return a;d=g.map(d,function(a){return a+="",a});var i=[],j=[],k={},l=g.groupBy(a,function(a){var c=a[b];return k[c]||(k[c]=!0),a[b]});j=g.uniq(g.map(a,b)),h&&j.sort(h);var m={y:"z",z:"y"};return j.length&&j.forEach(function(a){var h=l[a],j=g.cloneDeep(l[a][0]);j[b]=a,g.map([].concat(c),function(c){j[c]=d.map(function(g){var d;return{value:0,__isNull:!0,data:(d={},e(d,b,a),e(d,c,0),e(d,f,g),d)}})}),h.sort(function(c,a){return g.indexOf(d,c[f]+"")-g.indexOf(d,a[f]+"")}),g.map(h,function(a){var b=g.indexOf(d,a[f]+"");return!(0<=b)||void(g.isArray(c)?g.map(c,function(c){j[c][b]={value:a[c],__isNull:!1,data:g.omit(a,m[c])}}):j[c][b]={value:a[c],__isNull:!1,data:g.omit(a,m[c])})}),i.push(j)}),i},twoD2Three:function(a,b,c,d,e){if(void 0===b||void 0===c||void 0===d||void 0===e)return a;var f=[];return g.map(a,function(a){g.map(a.y,function(g,h){if(e[h]){var i={};i[b]=a[b],i[c]=g,i[d]=e[h],f.push(i)}})}),f},getSeriesValue:function(a,b){return g.uniq(g.map(a,b))},fixSeries4cycle:function(a,b,c,d,e){var f=g.uniq(g.map(b,c)),h=this.fixArray4cycle(a,f.length);return h.length&&h.forEach(function(b,c){var g=a[c]?a[c][d]||f[c]:f[c];e&&e(b,g)}),h},fixArray4cycle:function(a,b){if(b<=a.length)return a;var c=parseInt(b/a.length),d=b%a.length,e=g.concat.apply(this,this.fillArr(a,c));return e=g.concat(e,g.slice(a,0,d)),e},fillArr:function(a,b){for(var c=[],d=0;d<b;d++)c[d]=g.cloneDeep(a);return c},conflictConfigWithData:function(a,b,c){if(!a||!b||!c||!g.isArray(c)||0===c.length)return a;var d=g.cloneDeep(a),e=this;return c&&c.forEach(function(a){var c=a.dataField,f=a.configField,h=a.priority,j=a.newConfigField;if(a&&c&&f){var i,k;if(e.getDataField(c,b,function(a,c){i=a||"",k=c||b}),g.isObject(f)){var l=f.field;if("array"===f.type&&f.parent){var m=f.parent,n=g.get(d,m)||d,o=g.uniq(g.map(k,i)),p=e.fixArray4cycle(n,o.length);p.length&&p.forEach(function(a,b){e.getValueViaPriority(a,l,o[b],h,j)}),g.set(d,m,p)}else d=e.getValueViaPriority(d,l,k[k.length-1][i],h,j)}else d=e.getValueViaPriority(d,f,k[k.length-1][i],h,j)}}),d},getValueViaPriority:function(a,b,c,d,e){var f;return b&&(f=d&&"config"===d?a?a[b]||e&&a[e]||c:c:a?c||a[b]:c,a[e||b]=f),a},getDataField:function(a,b,c){var d,e;a&&(g.isObject(a)?(d=a.field,a.type&&"array"===a.type&&a.parent&&b&&b.forEach(function(b){g.get(b,a.parent)&&(e=g.get(b,a.parent))})):d=a,c(d,e))},getCustomSmoothSpline:function(a){if(!a)return console.warn("Smooth Spline Generation Warning: Input parameter cannot be null/undefined, please entering parameter in Array format"),"";if(!Array.isArray(a)||!a.length)return console.warn("Smooth Spline Generation Warning: Input parameter should be in Array format"),"";if(!a.length)return console.warn("Smooth Spline Generation Warning: Input parameter cannot be empty Array, Spline line cannot generate from empty point list"),"";a=a.map(function(a){return{x:a[0],y:a[1]}});var b=[],c=a[0],e=null;if(2>=a.length){var f=a[1];return c.x+","+c.y+(f?"L"+f.x+","+f.y:"")}a.forEach(function(a){e&&e.x===a.x&&e.y===a.y||(b.push(a.x),b.push(a.y),e=a)});var g=d(b,!1,[[0,0],[1,1]]);g.unshift(["",c.x,c.y]);var h=g.map(function(a){return""+a[0]+a.slice(1).join(",")});return h.join(" ")}};var h={min:function(c,d,a){return c[0]=Math.min(d[0],a[0]),c[1]=Math.min(d[1],a[1]),c},max:function(c,d,a){return c[0]=Math.max(d[0],a[0]),c[1]=Math.max(d[1],a[1]),c},scale:function(c,d,a){return c[0]=d[0]*a,c[1]=d[1]*a,c},add:function(c,d,a){return c[0]=d[0]+a[0],c[1]=d[1]+a[1],c},sub:function(c,d,a){return c[0]=d[0]-a[0],c[1]=d[1]-a[1],c},distance:function(c,a){var b=a[0]-c[0],d=a[1]-c[1];return Math.sqrt(b*b+d*d)}};return a.exports});