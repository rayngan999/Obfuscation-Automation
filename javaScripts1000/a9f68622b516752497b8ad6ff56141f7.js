var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(this,(function(){"use strict";var e=!("onscroll"in window)||/glebot/.test(navigator.userAgent),t=function(e,t){e&&e(t)},n=function(e){return e.getBoundingClientRect().top+window.pageYOffset-e.ownerDocument.documentElement.clientTop},o=function(e){return e.getBoundingClientRect().left+window.pageXOffset-e.ownerDocument.documentElement.clientLeft},i=function(e,t,i){return!(function(e,t,o){return(t===window?window.innerHeight+window.pageYOffset:n(t)+t.offsetHeight)<=n(e)-o}(e,t,i)||function(e,t,o){return(t===window?window.pageYOffset:n(t))>=n(e)+o+e.offsetHeight}(e,t,i)||function(e,t,n){var i=window.innerWidth;return(t===window?i+window.pageXOffset:o(t)+i)<=o(e)-n}(e,t,i)||function(e,t,n){return(t===window?window.pageXOffset:o(t))>=o(e)+n+e.offsetWidth}(e,t,i))},s=function(e,t){var n,o=new e(t);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:o}})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:o})}window.dispatchEvent(n)},r=function(e,t){return e.getAttribute("data-"+t)},l=function(e,t,n){return e.setAttribute("data-"+t,n)},a=function(e,t,n){var o=e.tagName,i=r(e,n);if("IMG"===o){!function(e,t){var n=e.parentNode;if("PICTURE"===n.tagName)for(var o=0;o<n.children.length;o++){var i=n.children[o];if("SOURCE"===i.tagName){var s=r(i,t);s&&i.setAttribute("srcset",s)}}}(e,t);var s=r(e,t);return s&&e.setAttribute("srcset",s),void(i&&e.setAttribute("src",i))}"IFRAME"!==o?i&&(e.style.backgroundImage='url("'+i+'")'):i&&e.setAttribute("src",i)},c="undefined"!=typeof window,u=c&&"classList"in document.createElement("p"),d=function(e,t){u?e.classList.add(t):e.className+=(e.className?" ":"")+t},h=function(e,t){u?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},f=function(e){this._settings=_extends({},{elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"src",data_srcset:"srcset",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null,callback_enter:null},e),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._boundHandleScroll=this.handleScroll.bind(this),this._isFirstLoop=!0,window.addEventListener("resize",this._boundHandleScroll),this.update()};f.prototype={_reveal:function(e){var n=this._settings,o=function o(){n&&(e.removeEventListener("load",i),e.removeEventListener("error",o),h(e,n.class_loading),d(e,n.class_error),t(n.callback_error,e))},i=function i(){n&&(h(e,n.class_loading),d(e,n.class_loaded),e.removeEventListener("load",i),e.removeEventListener("error",o),t(n.callback_load,e))};t(n.callback_enter,e),"IMG"!==e.tagName&&"IFRAME"!==e.tagName||(e.addEventListener("load",i),e.addEventListener("error",o),d(e,n.class_loading)),a(e,n.data_srcset,n.data_src),t(n.callback_set,e)},_loopThroughElements:function(){var n=this._settings,o=this._elements,s=o?o.length:0,r=void 0,a=[],c=this._isFirstLoop;for(r=0;r<s;r++){var u=o[r];n.skip_invisible&&null===u.offsetParent||(e||i(u,n.container,n.threshold))&&(c&&d(u,n.class_initial),this._reveal(u),a.push(r),l(u,"was-processed",!0))}for(;a.length;)o.splice(a.pop(),1),t(n.callback_processed,o.length);0===s&&this._stopScrollHandler(),c&&(this._isFirstLoop=!1)},_purgeElements:function(){var e=this._elements,t=e.length,n=void 0,o=[];for(n=0;n<t;n++){var i=e[n];r(i,"was-processed")&&o.push(n)}for(;o.length>0;)e.splice(o.pop(),1)},_startScrollHandler:function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._boundHandleScroll))},_stopScrollHandler:function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._boundHandleScroll))},handleScroll:function(){var e=this._settings.throttle;if(0!==e){var t=Date.now(),n=e-(t-this._previousLoopTime);n<=0||n>e?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=t,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(function(){this._previousLoopTime=Date.now(),this._loopTimeout=null,this._loopThroughElements()}.bind(this),n))}else this._loopThroughElements()},update:function(){this._elements=Array.prototype.slice.call(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},destroy:function(){window.removeEventListener("resize",this._boundHandleScroll),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null}};var _=window.lazyLoadOptions;return c&&_&&function(e,t){var n=t.length;if(n)for(var o=0;o<n;o++)s(e,t[o]);else s(e,t)}(f,_),f}));