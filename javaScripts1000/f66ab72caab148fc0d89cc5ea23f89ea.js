ï»¿!function(t){function e(e){for(var o,n,l=e[0],r=e[1],h=e[2],c=0,u=[];c<l.length;c++)n=l[c],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&u.push(s[n][0]),s[n]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);for(a&&a(e);u.length;)u.shift()();return _.push.apply(_,h||[]),i()}function i(){for(var t,e=0;e<_.length;e++){for(var i=_[e],o=!0,l=1;l<i.length;l++){var r=i[l];0!==s[r]&&(o=!1)}o&&(_.splice(e--,1),t=n(n.s=i[0]))}return t}var o={},s={"web/ui_common":0},_=[];function n(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.e=function(){return Promise.resolve()},n.m=t,n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/";var l=window.webpackJsonp=window.webpackJsonp||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var h=0;h<l.length;h++)e(l[h]);var a=r;_.push([371,"evbus","common","6af6f313b1addd2cf7d6173ebb879839","8c7cb80fc750b3d5a6ad025449fb24a3"]),i()}({371:function(t,e,i){t.exports=i("MpaO")},MpaO:function(t,e,i){"use strict";i.r(e);var o=i("hmKL"),s=i("qrY5"),_=i("59zB"),n=i("qUi/"),l=i("zxIV"),r=i("lXE5"),h={showSaved:function(t){var e=ge(t),i=e&&Object(l.Y)("page_block",e),o=i&&geByClass1("page_block_saved",i);if(e&&i&&o){var s=animate.pbind(o,{opacity:1},200,animate.pbind(o,{opacity:0},2e3));h.scrollToStart(i,s)}},scrollToStart:function(t,e){var i=Object(l.V)(t)[1];Object(r.e)()>i-60?(Object(r.g)(i-60,200),e&&setTimeout(e,200)):e&&e()}},a=h,c=i("btP0"),u=i("zmTt"),d=i("gdug"),b=i("t7n3"),p=i("Egk5"),m={over:function(t,e,i){if(!d.a.mobile&&!vk.widget){hasClass(t,"ui_zoom_wrap")||addClass(t,"ui_zoom_wrap"),cur.bigphCache=cur.bigphCache||{},i=i||{};var o=Object(l.x)(t),s=cur.bigphCache[e];if("A"!=o.tagName||!hasClass(o,"ui_zoom_outer")){var _=s&&s._id?"/photo"+s._id+"?all=1":"/albums"+e;(o=t.insertBefore(Object(l.rb)(`<a class="ui_zoom_outer" href="${_}" aria-label="${Object(b.c)(getLang("global_photo_full_size"))}"><div class="ui_zoom_inner"><div class="ui_zoom"><div class="ui_zoom_icon"></div></div></div></a>`),Object(l.x)(t)))._uid=e,o.offsetHeight,addClass(o,"ui_zoom_added")}o.onclick=m.click.pbind(t,e,i),i.fastLoad&&m.load(t,e,i)}},click:function(t,e,i,o){if(!o||!1===Object(p.d)(o)){i.fastLoad||m.load(t,e,i);var s=cur.bigphCache[e];if(s)return"load"==s||"show"==s?(cur.bigphCache[e]="show",Object(p.c)(o)):(i.onBeforeShow&&i.onBeforeShow(),extend(s,extend({jumpTo:{z:"albums"+e}},i.showOpts||{})),showPhoto(s._id,"album"+e+"_0/rev",s,o))}},load:function(t,e,i){var o=Object(l.x)(t);void 0===cur.bigphCache[e]&&(cur.bigphCache[e]="load",ajax.post("al_photos.php",{act:"fast_get_photo",oid:e},{onDone:function(s){if(!s)return t.onmouseover=function(){},void Object(l.kb)(o);var _="show"==cur.bigphCache[e];cur.bigphCache[e]=s,o.href="/photo"+s._id+"?all=1",_&&m.click(t,e,i)},onFail:function(){return t.onmouseover=function(){},Object(l.kb)(Object(l.x)(t)),!0}}))}},E=m,O=(i("a1Th"),i("Btvt"),i("7jxN"));function v(t){if(!this.inited)return!1;if(t||(t=window.event),this.isHorizontal){var e=Math.floor((this.contWidth()-this.scrollWidth)*Math.min(1,(t.screenX-this.moveX)/(this.scrollbarSize-this.innerWidth-6)));Object(b.v)(this.options.onScroll)&&this.options.onScroll(this.obj.scrollLeft-e,this),this.obj.scrollLeft=e}else{var i=Math.floor((this.contHeight()-this.scrollHeight)*Math.min(1,(t.screenY-this.moveY)/(this.scrollbarSize-this.innerHeight-6)));Object(b.v)(this.options.onScroll)&&this.options.onScroll(this.obj.scrollTop-i,this),this.obj.scrollTop=i}return this.update(!0),!1}function w(){return!!this.inited&&(this.moveY=this.moveX=this.isDown=!1,this.isOut&&this.contOut(),removeEvent(document,"mousemove",this.mouseMove),removeEvent(document,"mouseup",this.mouseUp),setStyle(document.body,"cursor","default"),setStyle(this.obj,{pointerEvents:""}),removeClass(this.inner,"scrollbar_hovered"),Object(b.v)(this.options.stopDrag)&&this.options.stopDrag(),Object(b.v)(this.options.onHold)&&this.options.onHold(!1),!1)}function g(t){return!!this.inited&&(this.moveY||Object(p.d)(t)?void 0:(t||(t=window.event),addEvent(document,"mousemove",this.mouseMove),addEvent(document,"mouseup",this.mouseUp),setStyle(document.body,"cursor","pointer"),setStyle(this.obj,{pointerEvents:"none"}),this.isHorizontal?this.moveX=t.screenX-(this.inner.offsetLeft||0):this.moveY=t.screenY-(this.inner.offsetTop||0),addClass(this.inner,"scrollbar_hovered"),Object(b.v)(this.options.startDrag)&&this.options.startDrag(),Object(b.v)(this.options.onHold)&&this.options.onHold(!0),this.isDown=!0,Object(p.c)(t)))}function f(t){switch(t||(t=window.event),t.keyCode){case 40:this.obj[this.scrollProp]+=40;break;case 38:this.obj[this.scrollProp]-=40;break;case 34:this.obj[this.scrollProp]+=this[this.scrollDimensionProp];break;case 33:this.obj[this.scrollProp]-=this[this.scrollDimensionProp];break;default:return!0}return this.update(!0),Object(p.c)(t)}function M(t,e){var i=this.wheel.bind(this);this.obj=t=ge(t),this.options=extend({nomargin:!1,horizontal:!1,top:0,bottom:0,padding:3,prefix:"",hidden:0},e||{}),this.isHorizontal=this.options.horizontal,this.scrollProp=this.isHorizontal?"scrollLeft":"scrollTop",this.scrollDimensionProp=this.isHorizontal?"scrollWidth":"scrollHeight",this.topShadow=!1,this.bottomShadow=!1,this[this.scrollProp+"Last"]=this.obj[this.scrollProp],this.destroyList=[],this.mouseDown=g.bind(this),this.mouseMove=v.bind(this),this.mouseUp=w.bind(this),this.initObjMouseWheel=function(){addEvent(t,d.b.wheelEvent,i)},this.destroyObjMouseWheel=function(){removeEvent(t,d.b.wheelEvent,i)},this.initScrollBarMouseWheel=function(){addEvent(this.scrollbar,d.b.wheelEvent,i)}.bind(this),this.destroyScrollBarMouseWheel=function(){removeEvent(this.scrollbar,d.b.wheelEvent,i)}.bind(this),setTimeout(function(){setStyle(t,{overflow:"hidden"}),this.scrollbar=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_cont ":"")+"scrollbar_cont"+(this.isHorizontal?" scrollbar_cont_horiz":"")+(this.options.hidden?" scrollbar_hidden":"")}),this.inner=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_inner ":"")+"scrollbar_inner"}),this.scrollbar.appendChild(this.inner);var e=this.widthUpdated();this.options.shadows&&(t.parentNode.insertBefore(this.topShadowDiv=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_top ":"")+"scrollbar_top"},{width:e[0]}),t),t.parentNode.insertBefore(this.bottomShadowDiv=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_bottom ":"")+"scrollbar_bottom"},{width:e[0]}),t.nextSibling)),t.parentNode.insertBefore(this.scrollbar,t);var o=f.bind(this),s=function(){this.initObjMouseWheel(),removeEvent(t,"mousemove",s)}.bind(this);if(addEvent(t,"mouseleave",this.destroyObjMouseWheel),addEvent(t,"mouseenter",this.initObjMouseWheel),addEvent(t,"mousemove",s),addEvent(this.scrollbar,"mouseenter",this.initScrollBarMouseWheel),addEvent(this.scrollbar,"mouseleave",this.destroyScrollBarMouseWheel),this.options.scrollElements&&each(this.options.scrollElements,(function(t,e){addEvent(e,d.b.wheelEvent,i)})),addEvent(this.scrollbar,"mouseover",this.contOver.bind(this)),addEvent(this.scrollbar,"mouseout",this.contOut.bind(this)),addEvent(this.scrollbar,"mousedown",this.contDown.bind(this)),d.a.safari_mobile){var _=function(t){this.isHorizontal?cur.touchX=t.touches[0].pageX:cur.touchY=t.touches[0].pageY}.bind(this),n=function(e){return this.isHorizontal?(cur.touchDiff=cur.touchX-(cur.touchX=e.touches[0].pageX),t.scrollLeft+=cur.touchDiff,t.scrollLeft>0&&!1!==this.shown&&this.update(!0)):(cur.touchDiff=cur.touchY-(cur.touchY=e.touches[0].pageY),t.scrollTop+=cur.touchDiff,t.scrollTop>0&&!1!==this.shown&&this.update(!0)),Object(p.c)(e)}.bind(this),r=function(){cur.animateInt=setInterval(function(){cur.touchDiff=.9*cur.touchDiff,cur.touchDiff<1&&cur.touchDiff>-1?clearInterval(cur.animateInt):(t[self.scrollProp]+=cur.touchDiff,this.update(!0))}.bind(this),0)}.bind(this);addEvent(t,"touchstart",_),addEvent(t,"touchmove",n),addEvent(t,"touchend",r),this.destroyList.push((function(){removeEvent(t,"touchstart",_),removeEvent(t,"touchmove",n),removeEvent(t,"touchend",r)}))}addEvent(this.inner,"mousedown",this.mouseDown),this.options.nokeys?this.onkeydown=o:addEvent(window,"keydown",o),this.destroyList.push(function(){removeEvent(t,d.b.wheelEvent,i),this.options.scrollElements&&each(this.options.scrollElements,(function(t,e){removeEvent(e,d.b.wheelEvent,i)})),removeEvent(this.inner,"mousedown",this.mouseDown),removeEvent(window,"keydown",o),removeEvent(t,"mousemove",s),Object(l.kb)(this.scrollbar)}.bind(this)),this.isHorizontal||(this.contHeight()<=this.scrollHeight?hide(this.bottomShadowDiv):this.bottomShadow=!0),this.options.onInit&&this.options.onInit(),this.inited=!0,this.update(!0),this.options.global||cur.destroy.push(this.destroy.bind(this))}.bind(this),0)}M.prototype={wheel:function(t){if(!this.disabled){t||(t=window.event);var e=0,i=this.obj[this.scrollProp],o=void 0!==t.deltaMode?t.deltaMode:"MozMousePixelScroll"==t.type?0:1;if("wheel"==t.type?e=-(this.isHorizontal?t.deltaX:t.deltaY):void 0!==t.wheelDeltaX&&void 0!==t.wheelDeltaY?(e=1/40*(this.isHorizontal?t.wheelDeltaX:t.wheelDeltaY),d.a.mac&&d.a.opera&&(e*=.1)):void 0!==t.wheelDelta?e=1/40*t.wheelDelta:t.detail&&t.axis===(this.isHorizontal?1:2)&&(e=-t.detail),e=1*e*(1==o?15:2==o?450:1))return this.obj[this.scrollProp]-=e,Object(b.v)(this.options.onScroll)&&this.options.onScroll(e,this),i!=this.obj[this.scrollProp]&&!1!==this.shown&&(this.update(!0),addClass(this.inner,"scrollbar_hovered"),clearTimeout(this.moveTimeout),this.moveTimeout=setTimeout(function(){removeClass(this.inner,"scrollbar_hovered")}.bind(this),300)),!!(!this.shown&&!this.options.forceCancelEvent||this.isHorizontal&&i==this.obj[this.scrollProp])&&void 0}},setOptions:function(t){extend(this.options,t)},widthUpdated:function(){var t,e=Object(l.S)(this.obj);return t=this.isHorizontal?{marginLeft:this.options.top+"px",marginTop:e[1]+3+"px",width:e[0]-this.options.top-this.options.bottom+"px"}:{marginTop:this.options.top+"px",marginLeft:this.options.nomargin?0:e[0]-(this.options.mlDiff||7)+"px",height:e[1]-this.options.top-this.options.bottom+"px"},this.options.nomargin&&(void 0!==this.options.right&&"auto"!==this.options.right?(t.right=this.options.right,t.left="auto"):void 0!==this.options.left&&(t.right="auto",t.left=this.options.left)),this.scrollWidth=e[0],this.scrollHeight=e[1],this.scrollbarSize=e[this.isHorizontal?0:1]-this.options.top-this.options.bottom,setStyle(this.scrollbar,t),setTimeout(function(){removeClass(this.scrollbar,"no_transition")}.bind(this)),e},contOver:function(){this.isOut=!1,this.shown&&addClass(this.scrollbar,"scrollbar_c_overed")},contOut:function(){this.isOut=!0,this.isDown||removeClass(this.scrollbar,"scrollbar_c_overed")},contDown:function(t){if(t||(t=window.event),this.isHorizontal){var e=t.offsetX-this.innerWidth/2+5,i=this.scrollbarSize-this.innerWidth;this.obj.scrollLeft=Math.floor((this.contWidth()-this.scrollWidth)*Math.min(1,e/i))}else{var o=t.offsetY-this.innerHeight/2+5,s=this.scrollbarSize-this.innerHeight;this.obj.scrollTop=Math.floor((this.contHeight()-this.scrollHeight)*Math.min(1,o/s))}this.update(!0),this.mouseDown(t)},hide:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){hide(this.topShadowDiv,this.bottomShadowDiv,this.scrollbar),this.hidden=!0})),show:function(){Object(l.xb)(this.topShadowDiv,this.bottomShadowDiv,this.scrollbar),this.hidden=!1},disable:function(){this.hide(),this[this.scrollProp](0),this.disabled=!0},enable:function(){this.show(),this.update(),this.disabled=!1},getScrollHeight:function(){return this.scrollHeight},scrollTop:function(t){if(void 0===t)return this.obj.scrollTop;this.obj.scrollTop=parseInt(t),this.update(!1,!0)},scrollBottom:function(t){if(void 0===t)return this.contHeight()-this.scrollHeight-this.obj.scrollTop;this.obj.scrollTop=this.contHeight(!0)-this.scrollHeight-t,this.update(!0,!0)},smoothScroll:function(t,e,i){var o=this.obj.scrollTop+t;void 0===i&&(i=300);var s=this;new O.a.Base({scrollTop:this.obj.scrollTop},{transition:O.a.Transitions.easeOutCubic,onStep:function(t){s.obj.scrollTop=t.scrollTop,s.update(!0)},duration:i,onComplete:function(){e&&e(scroll)}}).start({scrollTop:this.obj.scrollTop},{scrollTop:o})},scrollLeft:function(t){this.obj.scrollLeft=parseInt(t),this.update(!1,!0)},destroy:function(){each(this.destroyList||[],(function(t,e){e()}))},contHeight:function(){return Math.round(this.options.contHeight||this.obj.scrollHeight)},contWidth:function(){return Math.round(this.options.contWidth||this.obj.scrollWidth)},val:function(t){return t&&(this.obj[this.scrollProp]=t,this.update(!0,!0)),this.obj[this.scrollProp]},update:function(t,e){if(this.inited&&!this.hidden){if(!t&&(this.isHorizontal?this.moveX:this.moveY))return!0;var i,o;if(e&&(i=Object(l.S)(this.obj),this.isHorizontal?(this.scrollWidth=i[0],i=Math.round(this.scrollWidth-this.options.top-this.options.bottom),this.scrollbarSize!==i&&(this.scrollbar.style.width=i+"px")):(this.scrollHeight=i[1],i=Math.round(this.scrollHeight-this.options.top-this.options.bottom),this.scrollbarSize!==i&&(this.scrollbar.style.height=i+"px")),this.scrollbarSize=i),this.isHorizontal?(i=this.contWidth())<=Math.round(this.scrollWidth):(i=this.contHeight())<=Math.round(this.scrollHeight))return hide(this.inner,this.bottomShadowDiv,this.topShadowDiv),this.scrollbar.style.pointerEvents="none",this.topShadow=this.bottomShadow=this.shown=!1,Object(b.v)(this.options.more)&&i-this.obj[this.scrollProp]<2*this[this.scrollDimensionProp]&&this.options.more(this),void(this[this.scrollProp+"Last"]=this.obj[this.scrollProp]);this.shown||(Object(l.xb)(this.inner),this.scrollbar.style.pointerEvents="",this.shown=!0);var s=this.val();Object(b.v)(this.options.scrollChange)&&this.options.scrollChange(s),this.lastProgress=Math.min(1,s/(i-(this.isHorizontal?this.scrollWidth:this.scrollHeight))),this.lastProgress>0!=this.topShadow&&((this.topShadow=!this.topShadow)?l.xb:hide)(this.topShadowDiv),this.lastProgress<1!=this.bottomShadow&&((this.bottomShadow=!this.bottomShadow)?l.xb:hide)(this.bottomShadowDiv),this.isHorizontal?((o=Math.max(40,Math.floor(this.scrollbarSize*this.scrollWidth/i)))!==this.innerWidth&&(this.inner.style.width=(this.innerWidth=o)+"px"),this.inner.style.marginLeft=(this.scrollbarSize-o-2*this.options.padding)*this.lastProgress+this.options.padding+"px"):((o=Math.max(40,Math.floor(this.scrollbarSize*this.scrollHeight/i)))!==this.innerHeight&&(this.inner.style.height=(this.innerHeight=o)+"px"),this.inner.style.marginTop=(this.scrollbarSize-o-2*this.options.padding)*this.lastProgress+this.options.padding+"px"),Object(b.v)(this.options.more)&&i-this.obj[this.scrollProp]<2*this[this.scrollDimensionProp]&&this.options.more(this),this[this.scrollProp+"Last"]=this.obj[this.scrollProp]}},restore:function(){this.obj[this.scrollProp]=this[this.scrollProp+"Last"]}};var P=M,D=(i("KKXr"),i("Oyvg"),i("OG14"),i("pIFo"),i("SRfc"),i("4+be"));var C=class{constructor(t,e,i,s){0===i.length&&(i={}),s=s||{},this.indexer=new vkIndexer(e,s.getName?s.getName:function(t){var e=t[1];if(s.nameClass){var i=Object(l.rb)(e);i&&(e=val(geByClass1(s.nameClass,i))||e)}return e}),this.owners=e,this.tpl=s.tpl,this.rsTpl=s.rsTpl,this.idIndex=s.idIndex||0,this.selected=i,this.getUnsorted=s.getUnsorted,this.unsortedIndex=s.unsortedIndex||0,this.box=t,this.filter=s.filter,s.onTabUpdate&&(this.onTabUpdate=s.onTabUpdate),s.onListClick&&(this.onListClick=s.onListClick),t.setButtons(getLang("global_save"),(function(i){var o={},n=[],l=[];Object(b.f)(e,(function(){!_.invertedSelection&&_.selected[this[_.idIndex]]||_.invertedSelection&&!_.selected[this[_.idIndex]]?(o[this[_.idIndex]]=this,n.push(this[_.idIndex])):l.push(this[_.idIndex])})),!1!==cur.onOListSave(n,l,o,s.ret||{},i)&&t.hide(200)}),getLang("global_cancel")),s.box_options&&t.setOptions(s.box_options);var _=this;this.scrollNode=geByClass1("privacy_olist",t.bodyNode),this.moreEl=geByClass1("olist_more",t.bodyNode,"a"),this.olistEl=geByClass1("olist",t.bodyNode,"div"),this.olistFilter=ge("olist_filter_actions"),this.sel=s.sel||0,this.tabs=geByClass1("ui_tabs",t.bodyNode),this.noSelMsg=s.noSelMsg||getLang("friends_no_user_selected"),this.invertedSelection=!1;var n=geByClass1("olist_tab_sel",this.tabs);this.selCnt=Object(b.r)(val(geByClass1("ui_tab_count",n)));var r=this.filter?this.filter:this.filter=ge("olist_filter");setTimeout(elfocus.pbind(r),100),this.moreEl&&(Object(l.fb)(this.moreEl)?this.moreEl.onclick=function(t){return _.renderList("",60),Object(p.c)(t)}:(Object(l.kb)(this.moreEl),Object(l.xb)(this.moreEl))),addEvent(this.olistEl,"click",this.onMouseEvent.bind(this)),addEvent(this.scrollNode,"scroll",this.onScroll.bind(this));var h=_.sel?_.sel>0?"sel":"unsel":"all",a=geByClass1("olist_tab_"+h,_.tabs);a=a&&geByClass1("ui_tab",a),(cur.onOListTabChange=function(t,e){t&&o.a.switchTab(t),void 0===e&&(e=void 0===_.selPrev?0:_.selPrev),_.selPrev=_.sel,_.sel=e,_.renderList(val(r),0,e),setTimeout(elfocus.pbind(r),100)})(a,_.sel),cur.onOlistChange=_.renderList.bind(this),cur.onOlistSelect=_.onOlistSelect.bind(this),cur.onOlistFilters=_.onOlistFilters.bind(this)}onScroll(){var t=Object(l.C)(this.box.bodyNode),e=this.moreEl,i=this.scrollNode,o=i.scrollHeight,s=i.scrollTop,_=i.offsetHeight||i.clientHeight;Object(l.zb)(t,"olist_topsh",s>0),Object(l.zb)(t,"olist_botsh",s+_<o),e&&e.offsetTop&&e.onclick&&s+_+200>=o&&e.onclick()}onMouseEvent(t){var e=t.originalTarget||t.target;if(hasClass(e,"olist_item_wrap")||(e=Object(l.Y)("olist_item_wrap",e)),e&&e!=bodyNode){if(hasClass(e,"olist_item_loading"))return Object(p.c)(t);if(Object(p.d)(t))return!0;this.box.changed=!0;var i=e.id.match(/-?\d+/)[0],o=!this.invertedSelection&&this.selected[i]||this.invertedSelection&&!this.selected[i];if(Object(l.zb)(e,"olist_item_wrap_on",!o),this.selected[i]=!o||this.invertedSelection,this.selCnt+=!o||this.invertedSelection?1:-1,this.selTabUpdate(),this.onListClick&&this.onListClick(e,o),this.scrollNode.scrollTop<50){var s=this.filter;setTimeout(elfocus.pbind(s),100)}return Object(p.c)(t)}}onOlistSelect(t,e){s.a.toggle(this.olistFilter,!1);var i=this.selCnt,o=this.selected;switch(e.ctrlKey||e.metaKey||e.shiftKey||(o={},i=0),t){case"all":o={},i=0,Object(b.f)(this.owners,(function(){o[this[0]]=1,i++}));break;case"none":o={},i=0;break;case"people":Object(b.f)(this.owners,(function(){this[0]>0&&!o[this[0]]&&(o[this[0]]=1,i++)}));break;case"groups":Object(b.f)(this.owners,(function(){this[0]<0&&!o[this[0]]&&(o[this[0]]=1,i++)}));break;default:var _=1<<Object(b.r)(t.replace("list",""));Object(b.f)(this.owners,(function(){this[4]&_&&!o[this[0]]&&(o[this[0]]=1,i++)}))}return this.selCnt=i,this.selected=o,this.selTabUpdate(),this.renderList(),!1}onOlistFilters(t,e){s.a.show(t,e);var i=e=>{s.a.toggle(t,!1),removeEvent(document,"mousedown",i)};return addEvent(document,"mousedown",i),e&&Object(p.c)(e)}selTabUpdate(){if(this.isAlbumEdit)this.onTabUpdate&&this.onTabUpdate();else if(this.tabs){var t=this.selCnt,e=this.owners.length-t,i=geByClass1("olist_tab_sel",this.tabs),o=geByClass1("olist_tab_unsel",this.tabs);val(geByClass1("ui_tab_count",i),t||""),val(geByClass1("ui_tab_count",o),e||""),this.onTabUpdate&&this.onTabUpdate()}}renderList(t,e,i){e=e||0,i=i||this.sel;var o=e?60:120,s=this;t&&(t=t.replace(/\u2013|\u2014/g,"-"));var _=t?this.indexer.search(t):this.owners;s.unsortedIndex==i&&s.getUnsorted&&(_=s.getUnsorted(_));var n=this.selected,r=s.invertedSelection?!(this.sel<0):this.sel<0,h=s.tpl;if(i&&s.unsortedIndex!=i){var a=[];Object(b.f)(_,(function(){var t=this[s.idIndex];if((!r&&n[t]||r&&!n[t])&&(a.push(this),a.length>e+o))return!1})),_=a}var c=_.length;_=_.slice(e,e+o);var u,d=[];if(t){t=Object(b.c)(t);var m=Object(b.h)(t),E=Object(D.q)(t);null!=E&&(m=m+"|"+Object(b.h)(E)),u=new RegExp("(?![^&;]+;)(?!<[^<>]*)((\\(*)("+m+"))(?![^<>]*>)(?![^&;]+;)","gi")}var O=s.rsTpl?s.rsTpl:function(t,e,i,o,s){var _=!i&&o[t[0]]||i&&!o[t[0]],n=t[1];if(e){n=-1==e.indexOf(" ")?n.split(" "):[n];var l="";for(var r in n)n.hasOwnProperty(r)&&(l+=(r>0?" ":"")+n[r].replace(s,"$2<em>$3</em>"));n=l}return{id:t[0],name:n,photo:t[2],classname:_?" olist_item_wrap_on":"",link:t[3]||(t[0]>0?"id"+t[0]:"club"+-t[0])}};Object(b.f)(_,(function(){d.push(Object(l.qb)(h,O(this,t,s.invertedSelection,n,u)))})),e||d.length||d.push('<div class="no_rows">'+(t?getLang("global_search_not_found").replace("{search}",t):s.noSelMsg)+"</div>"),Object(l.kb)(this.moreEl),d=d.join(" "),e?this.olistEl.appendChild(Object(l.h)(d)):val(this.olistEl,d),c>e+o&&(this.olistEl.appendChild(this.moreEl),this.moreEl.onclick=function(i){return s.renderList(t,e+o),Object(p.c)(i)}),s.box&&s.box.scroll&&s.box.scroll.update(!1,!0),s.onScroll()}},T=i("gUSy");window.uiTabs=o.a,window.uiActionsMenu=s.a,window.uiRightMenu=n.a,window.uiPageBlock=a,window.uiSearch=c.a,window.uiScrollBox=u.a,window.uiPhotoZoom=E,window.Scrollbar=window.Scrollbar||P,window.OList=C,window.UiScroll=_.a,window.uiScroll=_.a,window.Slider=T.a;try{stManager.done("ui_common.js")}catch(t){}},gUSy:function(t,e,i){"use strict";var o=i("zxIV"),s=i("Egk5"),_=i("BJj/");function n(t,e){if(this.constructor!=n)throw new Error("Slider was called without 'new' operator");if(!t)throw new Error("No element was provided for Slider");t=ge(t),this.options=e||{size:1},this.options.backValue=this.options.backValue||0;var i=100*this.options.backValue,s=`<div class="slider_slide"><div class="slider_loading_bar" style="opacity: 0; display: none;"></div> ${this.options.withBackLine?'<div class="slider_back" style="width:'+i+'%"></div>':""} <div class="slider_amount"></div> <div class="slider_handler"></div> </div>`;this._el=ce("div",{innerHTML:s,className:"slider",id:t.getAttribute("id")||""});for(var l=t.classList||[],r=this,h=0,a=l.length;h<a;h++)addClass(this._el,l[h]);each(this._el.attributes,(function(t,e){"id"==e.name&&"class"==e.name||r._el.setAttribute(e.name,e.value)})),t.parentNode.replaceChild(this._el,t),Object(o.l)(this._el,"slider",this),this._amountEl=geByClass1("slider_amount",this._el),this._handlerEl=geByClass1("slider_handler",this._el),this._slideEl=geByClass1("slider_slide",this._el),this._backEl=geByClass1("slider_back",this._el),this._progressEl=geByClass1("slider_loading_bar",this._el),this.options.color&&(setStyle(this._amountEl,{backgroundColor:this.options.color}),setStyle(this._handlerEl,{backgroundColor:this.options.color})),this.options.handlerColor&&setStyle(this._handlerEl,{backgroundColor:this.options.handlerColor}),this.options.backColor&&setStyle(this._slideEl,{backgroundColor:this.options.backColor}),addClass(this._el,"slider_size_"+this.options.size),this.options.debounce&&(this._onValueChangeDebounced=Object(_.a)(this._onValueChange,this.options.debounce)),e.formatHint&&(addEvent(this._el,"mousemove",this._ev_onMouseOver=this._onMouseOver.bind(this)),addEvent(this._el,"mouseleave",this._ev_onMouseLeave=this._onMouseLeave.bind(this))),addEvent(this._el,"mousedown",this._ev_onMouseDown=this._onMouseDown.bind(this)),this.setValue(this.options.value||0,!this.options.fireChangeEventOnInit,!1),this.setBackValue(this.options.backValue)}n.prototype.toggleAdState=function(t){this._adState=!!t,Object(o.zb)(this._el,"slider_ad_mode",!!t)},n.prototype.toggleAdMarker=function(t){t=!!t;var e=geByClass1("slider_ad_marker",this._el);if(t){if(!e){var i="onmouseover=\"showTooltip(this, {text: '"+getLang("global_audio_ad")+"', black: 1, shift: [16, 9, 10]})\"";e=Object(o.rb)('<div class="slider_ad_marker_wrap" '+i+'><div class="slider_ad_marker"></div></div>'),Object(o.C)(this._slideEl).insertBefore(e,this._slideEl),delete this._width,addClass(this._el,"slider_ad_marker_shown")}}else Object(o.kb)(e),delete this._width,removeClass(this._el,"slider_ad_marker_shown")},n.prototype.showAdMarker=function(t){var e=Object(o.rb)('<div class="slider_ad_marker"></div>');Object(o.C)(this._slideEl).insertBefore(e,this._slideEl),delete this._width,addClass(this._el,"slider_ad_marker_shown")},n.prototype.isAdMode=function(){return hasClass(this._el,"slider_ad_mode")},n.prototype.setBlocked=function(t){this.blocked=t,addClass(this._el,"slider_blocked")},n.prototype.getBlocked=function(){return this.blocked},n.prototype.isBlocked=function(){return this.isAdMode()||this.getBlocked()},n.prototype.toggleLoading=function(t){t=!!t,Object(o.yb)(this._progressEl,t),setStyle(this._progressEl,"opacity",t?1:0)},n.prototype.destroy=function(t){this.options.formatHint&&(removeEvent(this._el,"mousemove",this._ev_onMouseOver),removeEvent(this._el,"mouseleave",this._ev_onMouseLeave),removeEvent(this._el,"mousedown",this._ev_onMouseDown)),Object(o.kb)(this._el),Object(o.kb)(this._currHintEl)},n.prototype._updateHint=function(t,e){this._currHintEl||(this._currHintEl=Object(o.rb)('<div class="slider_hint" id="slider_hint"></div>'),this.options.hintClass&&addClass(this._currHintEl,this.options.hintClass),this._el.appendChild(this._currHintEl)),this._width=this._width||getSize(this._slideEl)[0];var i=this._getPos(),s=Math.round(t.pageX-i[0]),_=this._width;if((s=e?Math.min(Math.max(0,s),_):s)>=0&&s<=_){var n=s/_;this._currHintEl.innerHTML=this.options.formatHint?this.options.formatHint.call(this,n):n;var l=getSize(this._currHintEl);setStyle(this._currHintEl,{left:this._slideEl.offsetLeft+s-l[0]/2,top:this._slideEl.offsetTop-l[1]-10}),!e&&this._toggleHint(!0)}else!e&&this._toggleHint(!1);this.options.formatHint||this._toggleHint(!1)},n.prototype._toggleHint=function(t){this.isAdMode()&&(t=!1),Object(o.zb)(this._currHintEl,"visible",t)},n.prototype._onMouseOver=function(t){n._currenSliderDrag||hasClass(this._el,"active")||this._updateHint(t)},n.prototype._onMouseLeave=function(t){hasClass(this._el,"active")||this._toggleHint(!1)},n.prototype._onMouseDown=function(t){0==t.button&&(delete cur._sliderMouseUpNowEl,this._adState||this.getBlocked()||(addEvent(window,"mousemove",this._ev_onMouseMove=this._onMouseMove.bind(this)),addEvent(window,"mouseup",this._ev_onMouseUp=this._onMouseUp.bind(this)),this._width=getSize(this._slideEl)[0],this._onMouseMove(t),n._currenSliderDrag=this,addClass(this._el,"active"),Object(s.c)(t)))},n.prototype._onMouseUp=function(t){cur._sliderMouseUpNowEl=this._el,removeEvent(window,"mousemove",this._ev_onMouseMove),removeEvent(window,"mouseup",this._ev_onMouseUp),clearTimeout(this._debounceto),this._onValueChange(),removeClass(this._el,"active"),n._currenSliderDrag=!1,this._toggleHint(!1),this.options.onEndDragging&&this.options.onEndDragging(this._currValue)},n.prototype._onMouseMove=function(t){var e=this._getPos(),i=Math.max(t.pageX,e[0]);i=Math.min(i,e[0]+this._width),i-=e[0],this.setValue(i/this._width,!0,!0),this._onValueChangeDebounced?this._onValueChangeDebounced():this._onValueChange(),this._toggleHint(!0),this._updateHint(t,!0),Object(s.c)(t)},n.prototype._getPos=function(){return this._slidePos=getXY(this._slideEl)},n.LOGFBASE=35,n.prototype._logf=function(t){if(!this.options.log)return t;var e=n.LOGFBASE;return(Math.pow(e,t)-1)/(e-1)},n.prototype._unlogf=function(t){if(!this.options.log)return t;var e,i,o=n.LOGFBASE;return e=o,i=1+t*(o-1),Math.log(i)/Math.log(e)},n.prototype.setValue=function(t,e,i){if(!hasClass(this._el,"active")||i){var o=i?this._logf(t):t;if(this._currValue!=o){this._currValue=o;var s=i?t:this._unlogf(t);s=100*s+"%",setStyle(this._amountEl,{width:s}),setStyle(this._handlerEl,{left:s}),!e&&this._onValueChange()}}},n.prototype.setBackValue=function(t){Object(o.zb)(this._backEl,"slider_back_transition",t>this._backValue),this._backValue=t;var e=100*t+"%";setStyle(this._backEl,{width:e})},n.prototype._onValueChange=function(){this._lastValue=this._lastValue||0,this._lastValue!=this._currValue&&(this._lastValue=this._currValue,this.options.onChange&&this.options.onChange(this._currValue))},e.a=n},"qUi/":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var _web_lib_browser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("gdug"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("t7n3"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("zxIV"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Egk5"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("v+DW"),_web_lib_fx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7jxN"),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("El3O"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("98sY"),uiRightMenu={initMenu:function(t,e){if(!(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.a.msie&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.r)(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.a.version)<10||_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.a.opera&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.r)(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.a.version)<15||hasClass(t,"ui_rmenu_sliding"))){var i=geByClass1("ui_rmenu_item",t),o=geByClass1("ui_rmenu_item_sel",t),s=o||i,_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)(s)[1],n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.V)(s)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.V)(t)[1],l=geByClass1("_ui_rmenu_slider",t);if(!e)setStyle(l,{height:_,top:o?n:0}),addClass(t,"ui_rmenu_sliding")}},go:function(t,e,i,o){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.d)(e))return!0;var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Y)("ui_rmenu",t);return!(!(o||{}).ignoreSelected&&geByClass1("ui_rmenu_item_sel",s)==t)&&(uiRightMenu.switchMenu(t),uiRightMenu.showProgress(t),!1!==i&&nav.go(i||t,e,extend({fromMenu:!0},o||{})))},switchMenu:function(t,e){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Y)("ui_rmenu",t),o=geByClass1("ui_rmenu_item_sel",i);if(t==o&&!e)return!1;uiRightMenu.initMenu(i);var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)(t)[1],_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.V)(t)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.V)(i)[1],n=[],l=[];if(hasClass(i,"_ui_rmenu_auto_expand")){var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.K)("_ui_rmenu_sublist",i),h=hasClass(t,"_ui_rmenu_subitem")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Y)("_ui_rmenu_sublist",t):!!hasClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.B)(t),"_ui_rmenu_sublist")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.B)(t);each(r,(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.fb)(this)&&this!==h&&(n.push(this),hide(this))})),h&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.fb)(h)&&(l.push(h),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.xb)(h)),_=t.offsetTop,each(n,(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.xb)(this)})),each(l,(function(){hide(this)}))}var a=geByClass1("_ui_rmenu_slider",i),c=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.r)(a.style.top),u={height:s};return _web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.a.msie_edge?u.marginTop=_-c+"px":u[cssTransformProp]="translateY("+(_-c)+"px)",setStyle(a,u),removeClass(o,"ui_rmenu_item_sel"),addClass(t,"ui_rmenu_item_sel"),hasClass(i,"_ui_rmenu_auto_expand")?each(n.concat(l),(function(){uiRightMenu.toggleSubmenu(this)})):hasClass(t,"_ui_rmenu_subitem")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.fb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.C)(t))&&uiRightMenu.toggleSubmenu(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.C)(t)),!1},fixScroller:function(t){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Y)("ui_rmenu",t);if(e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.fb)(t)){var i=hasClass(e,"ui_rmenu_sliding"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)(t)[1];i&&uiRightMenu.hideSliding(e);var s=t.offsetTop,_=geByClass1("_ui_rmenu_slider",e),n=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.r)(_.style.top),l={height:o};_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.a.msie_edge?l.marginTop=s-n+"px":l[cssTransformProp]="translateY("+(s-n)+"px)",setStyle(_,l),t.offsetLeft,i&&uiRightMenu.showSliding(e)}},unselectAll:function(t){removeClass(t,"ui_rmenu_sliding"),removeClass(geByClass1("ui_rmenu_item_sel",t),"ui_rmenu_item_sel")},hideSliding:function(t){removeClass(t,"ui_rmenu_sliding")},showSliding:function(t){addClass(t,"ui_rmenu_sliding")},showProgress:function(t){hasClass(t,"ui_rmenu")||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Y)("ui_rmenu",t));var e=geByClass1("ui_rmenu_loading_item",t);e&&removeClass(e,"ui_rmenu_loading_item");var i=geByClass1("ui_rmenu_item_sel",t);Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.i)(t),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.u)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.x)(i).parentNode,"","",!1),addClass(t,"ui_rmenu_loading"),addClass(i,"ui_rmenu_loading_item")},hideProgress:function(t){hasClass(t,"ui_rmenu")||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Y)("ui_rmenu",t)),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.i)(t);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Y)("ui_rmenu",t);removeClass(t,"ui_rmenu_loading"),uiRightMenu.hideSliding(e);var i=geByClass1("ui_rmenu_loading_item",e);i&&removeClass(i,"ui_rmenu_loading_item")},toggleSubmenu:function toggleSubmenu(name,ref){var menu=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Y)("ui_rmenu",ref),el,submenu;if("string"==typeof name?submenu=geByClass1("_ui_rmenu_"+name+"_list",menu):(submenu=name,name=submenu.getAttribute("data-sublist-id")),el=geByClass1("_ui_rmenu_"+name+"_toggle",menu),!submenu)return!1;void 0!==ref&&uiRightMenu.hideSliding(menu),el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.zb)(el,"ui_rmenu_item_expanded",!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.fb)(submenu)),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_5__.m)(submenu,submenu&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)(submenu)[1]?100:0),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__.n,100);var onToggle=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.v)(el,"on-toggle");return onToggle&&setTimeout((function(){try{eval(onToggle)}catch(t){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.d)(t,onToggle)}}),150),!1}};__webpack_exports__.a=uiRightMenu},qrY5:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("pIFo"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Egk5"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("zxIV"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("t7n3"),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lXE5"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("98sY"),_web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("59zB"),uiActionsMenu={keyToggle:function(t,e){if(!Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__.e)(e))return!1;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q)("_ui_menu_wrap",t);i&&uiActionsMenu.toggle(i,!hasClass(i,"shown"))},toggle:function toggle(el,s,options){var dummyMenu=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(el,"dummyMenu");dummyMenu&&(el=dummyMenu),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.zb)(el,"shown",s);var onhide=attr(el,"onHide");if(onhide&&!hasClass(el,"shown"))try{eval(onhide)}catch(t){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_5__.d)(t,onhide)}if(options&&options.onToggle){var script=options.onToggle.replace("{isShow}",""+s);try{eval(script)}catch(t){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_5__.d)(t,script)}}},show:function(t,e,i){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidetimer");o&&(clearTimeout(o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidetimer",0));var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"origMenu");if(s&&(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(s,"hidetimer"))&&(clearTimeout(o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidetimer",0)),i&&i.delay){cur.uiActionsMenuShowTimeout&&clearTimeout(cur.uiActionsMenuShowTimeout);var _=i.delay;return delete i.delay,void(cur.uiActionsMenuShowTimeout=setTimeout(uiActionsMenu.show.pbind(t,e,i),_))}if(cur.uiActionsMenuShowTimeout&&(clearTimeout(cur.uiActionsMenuShowTimeout),delete cur.uiActionsMenuShowTimeout),i&&i.appendParentCls){var n,l,r=geByClass1("_ui_menu",t);if(r){l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q)(i.appendParentCls,r),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q)("_ui_menu_wrap",t);var h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.rb)(`<div class="${n.className} ui_actions_menu_dummy_wrap" onmouseover="uiActionsMenu.show(this);" onmouseout="uiActionsMenu.hide(this);"></div>`);if(h.appendChild(r),l.appendChild(h),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"dummyMenu",h),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(h,"origMenu",t),t=h,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(r,"top",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.T)(r,"top"))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(r,"left",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.T)(r,"left"))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(r,"right",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.T)(r,"right"))),i.processHoverCls){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q)(i.processHoverCls,n);addEvent(t,"mouseover",addClass.pbind(a,"hover")),addEvent(t,"mouseout",removeClass.pbind(a,"hover"))}}else t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"dummyMenu");var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"origMenu");r=geByClass1("_ui_menu",t),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q)("_ui_menu_wrap",c),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q)(i.appendParentCls,r),setStyle(r,{display:"block"});var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.V)(l),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.V)(n),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(r,"top"),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(r,"left"),m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(r,"right"),E={top:d[1]-u[1]+b};m?E.right=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)(l)[0]+u[0]-d[0]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)(n)[0]+m:E.left=d[0]-u[0]+p,setStyle(r,E)}var O=geByClass1("_ui_menu",t);if(i&&i.autopos&&O&&!hasClass(t,"shown")){removeClass(t,"ui_actions_menu_left");var v=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.V)(t)[1],w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)(t)[1],g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)(O)[1],f=i.dy||10,M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.V)(O)[0];removeClass(t,"ui_actions_menu_top"),addClass(t,"no_transition"),v+w+f+g>Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_4__.e)()+(window.lastWindowHeight||0)&&addClass(t,"ui_actions_menu_top"),v-f-g<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_4__.e)()+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.S)("page_header_wrap")[1]&&removeClass(t,"ui_actions_menu_top"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.zb)(t,"ui_actions_menu_left",M<0),removeClass(t,"no_transition")}i&&i.hasOwnProperty("alwaysTop")&&O&&!hasClass(t,"shown")&&(removeClass(t,"ui_actions_menu_top"),i.alwaysTop&&addClass(t,"ui_actions_menu_top")),i&&i.scroll&&i.maxHeight&&(O.style.maxHeight=(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.r)(i.maxHeight)||200)+"px",O.__uiScroll__||new _web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_6__.a(O)),uiActionsMenu.toggle(t,!0,i)},hide:function(t,e,i){cur.uiActionsMenuShowTimeout&&(clearTimeout(cur.uiActionsMenuShowTimeout),delete cur.uiActionsMenuShowTimeout);var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidedelay");o?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidedelay",!1):o=200,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidetimer")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidetimer",setTimeout((function(){uiActionsMenu.toggle(t,!1,i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidetimer",0)}),o))},hideDelay:function(t,e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.l)(t,"hidedelay",e)}};__webpack_exports__.a=uiActionsMenu},zmTt:function(t,e,i){"use strict";i("a1Th"),i("Btvt");var o=i("zxIV"),s=i("Egk5"),_=i("lXE5"),n={init:function(t,e){cur.lSTL&&Object(o.kb)(cur.lSTL);var i=(e=e||{}).parent=e.parent||boxLayerWrap;extend(cur,{lSTLWrap:i,lSTL:i.appendChild(ce("div",{id:"layer_stl",innerHTML:`<div id="layer_stl_bg" class="fixed"></div><div id="layer_stl_cl"></div><nobr id="layer_stl_text" class="fixed">${getLang("global_to_top")}</nobr>`,el:t.bodyNode,onclick:s.c,onmousedown:n.lSTLDown,sc:n.onScroll})),lSTLText:ge("layer_stl_text",i),lSTLShown:0,lSTLWas:0,lSTLWasSet:0,lSTLOpts:e}),t&&t.setOptions({onShow:n.show,onHide:n.hide}),t&&t.scrollInited||(addEvent(i,"scroll",n.onScroll),t&&(t.scrollInited=!0)),onBodyResize(),n.onScroll()},hide:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=cur.lSTLOpts;t&&t.parent&&(removeEvent(t.parent,"scroll",n.onScroll),hide(cur.lSTL),cur.lSTLShown=0,t.onHide&&t.onHide())})),show:function(){var t=cur.lSTLOpts;t&&t.parent&&(addEvent(t.parent,"scroll",n.onScroll),setTimeout(n.onScroll,0),t.onShow&&t.onShow())},lSTLDown:function(t){if(t=t||window.event,!Object(s.d)(t)){var e=cur.lSTLWrap;if(!__afterFocus){var i=0,o=e.scrollTop;cur.lSTLWasSet&&cur.lSTLWas?(i=cur.lSTLWas,cur.lSTLWas=0):cur.lSTLWas=o,e.scrollTop=i}return Object(s.c)(t)}},onScroll:function(){if(cur.lSTL){var t=cur.lSTLWrap.scrollTop,e=cur.lSTLWas||t>200,i=0;if(cur.lSTL.style.marginTop=Math.min(t,boxLayer.scrollHeight-cur.lSTL.scrollHeight-1)+"px",vk.staticheader){var s=Object(o.S)("page_header_wrap")[1];cur.lSTLText.style.marginTop=Math.max(-Math.min(Object(_.e)(),bodyNode.clientHeight-(window.lastWindowHeight||0)),-s)+"px"}e?(1!==cur.lSTLShown&&(Object(o.xb)(cur.lSTL),cur.lSTLShown=1),cur.lSTLWas&&t>500&&(cur.lSTLWas=0),t>200?(i=(t-200)/200,cur.lSTLWasSet&&(cur.lSTLWasSet=0,val(Object(o.A)(cur.lSTL),getLang("global_to_top")),removeClass(Object(o.A)(cur.lSTL),"down"))):(i=(200-t)/200,cur.lSTLWas&&(cur.lSTLWasSet||(cur.lSTLWasSet=1,val(Object(o.A)(cur.lSTL),""),addClass(Object(o.A)(cur.lSTL),"down"))))):0!==cur.lSTLShown&&(hide(cur.lSTL),cur.lSTLShown=0),setStyle(cur.lSTL,{opacity:Math.min(Math.max(i,0),1)})}}};e.a=n}});