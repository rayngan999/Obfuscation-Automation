!function(r,i,o){var t,e,n,a,c,u,l;function s(){}r._mbz_=r._mbz_||{},r.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){var e,n=(this.document||this.ownerDocument).querySelectorAll(t),r=this;do{for(e=n.length;0<=--e&&n.item(e)!==r;);}while(e<0&&(r=r.parentElement));return r}),r.addEventListener||(t=Window.prototype,e=HTMLDocument.prototype,n=Element.prototype,c="removeEventListener",u="dispatchEvent",l=[],t[a="addEventListener"]=e[a]=n[a]=function(t,e){var n=this;l.unshift([n,t,e,function(t){t.currentTarget=n,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,e.call(n,t)}]),this.attachEvent("on"+t,l[0][3])},t[c]=e[c]=n[c]=function(t,e){for(var n,r=0;n=l[r];++r)if(n[0]===this&&n[1]===t&&n[2]===e)return this.detachEvent("on"+t,l.splice(r,1)[0][3])},t[u]=e[u]=n[u]=function(t){return this.fireEvent("on"+t.type,t)});var f,p,m=(f=0,p={},{set:function(t,e){var n;t.myCustomDataTag===o&&(n=f++,t.myCustomDataTag=n),p[n]=e},get:function(t){return p[t.myCustomDataTag]}});function d(t){this.list=[],"object"==typeof t&&(this.list=t),this.length=this.list.length}function h(t){var e=typeof t;return"object"===e&&(t?t instanceof Array&&(e="array"):e="null"),e}function v(t){var e;if("string"===h(t))try{e=i.querySelectorAll(t)}catch(t){}else"array"===h(t)?e=t:"object"===h(t)&&(e=[t]);return new d(e)}function g(t,e,n){var r=e.error||s,o=e.success||s,i=e.complete||s,a=function(){for(var t=!1,e=0;e<b.length;e++){try{t=b[e]()}catch(t){continue}break}return t}();if(a){var c=n?"POST":"GET";if(a.open(c,t,!0),n&&(a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),"object"==typeof n))try{n=Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}catch(t){}a.onreadystatechange=function(){4==a.readyState&&(i(),200==a.status||201==a.status||304==a.status?o(y(a)):r(y(a)))},4!=a.readyState&&a.send(n)}}function y(e){try{return JSON.parse(e.responseText)}catch(t){return e.responseText}}d.prototype._applyEach=function(t){t=t||s;for(var e=this.list.length,n=0;n<e;++n){var r=this.list[n];try{t.call(r,r,n)}catch(t){console.error(t)}}return this},d.prototype.each=function(t){return this._applyEach(t)},d.prototype.closest=function(t){var e=this.first();return e?new d(e.closest(t)):new d},d.prototype.data=function(t,e){var n=this.first(),r=m.get(n)||{};return t||e?e===o?r[t]:(r[t]=e,m.set(n,r)):r},d.prototype.on=function(t,n){return this._applyEach(function(e){e&&v(t.split(" ")).each(function(t){e.addEventListener(t,n,!1)})})},d.prototype.off=function(n,r){return this._applyEach(function(e){v(n.split(" ")).each(function(t){e.removeEventListener(n,r,!1)})})},d.prototype.find=function(t){var e=this.first();if(e){var n=e.querySelectorAll(t);if(n.length)return new d([].slice.call(n))}return new d},d.prototype.hide=function(){return this._applyEach(function(t){t.style.display="hide"})},d.prototype.show=function(){return this._applyEach(function(t){t.style.display="block"})},d.prototype.hasClass=function(t){var e=this.first();return e.className&&new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)},d.prototype.addClass=function(e){return this._applyEach(function(t){new RegExp("(^|\\s)"+e+"(\\s|$)","g").test(t.className)||(t.className=(t.className+" "+e).replace(/\s+/g," ").replace(/(^ | $)/g,""))})},d.prototype.removeClass=function(n){return this._applyEach(function(t){var e=new RegExp("(^|\\s)"+n+"(\\s|$)","g");t.className=t.className.replace(e,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")})},d.prototype.val=function(t){var e=this.first(),n=null;return e&&(t?e.value=t:n=e.value),n},d.prototype.first=function(){return 0<this.list.length?this.list[0]:null},d.prototype.attr=function(){var t=this.first();return 1===arguments.length?t.getAttribute(arguments[0]):2===arguments.length?(t.setAttribute(arguments[0],arguments[1]),this):void 0},d.prototype.append=function(t){var e=this.first();return"string"==typeof t?e.innerHTML+=t:e.appendChild(t),this},d.prototype.html=function(t){var e=this.first(),n=e.innerHTML;if(!t)return n;e.innerHTML=t},d.prototype.outerHtml=function(){return this.first().outerHTML},d.prototype.remove=function(){var t=this.first();t.parentNode&&t.parentNode.removeChild(t)};var b=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];v.ajax=function(t){var e=t.url,n="string"===h(t.type)&&"post"===t.type.toLowerCase()?t.data:null;return g(e,t,n)},v.ready=function(t){if("loading"===i.readyState)return i.addEventListener("DOMContentLoaded",t);t()},v.extend=function t(e,n){for(var r in n){var o=n[r];o&&"[object Object]"===Object.prototype.toString.call(o)?(e[r]=e[r]||{},t(e[r],o)):e[r]=o}return e},v.typeOf=h,v.loadScript=function(t,e){var n=i,r=n.createElement("script"),o=n.getElementsByTagName("script")[0];r.src=t,r.async=e||!0,o.parentNode.insertBefore(r,o)},v.getQueryParameter=function(t,e){e||(e=r.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},_mbz_.$=v}(window,document),function(t,e,n){var r=!0===t.__mbzdev__,o="localhost",i=r?"http://"+o+":5001/api/integration/public/":"https://integration-hub.mailclick.me/server/api/integration/public/",a=r?"http://"+o+":3000/static/scripts/popup.js":"https://integration-hub.mailclick.me/static/scripts/popup.min.js",c="MailbizIntegration",u="mbz-hub-queue",l="mbz-popup",s="form",f='[type="email"], [name$="mail"]',p='[placeholder*="ome"], [placeholder*="ame"], [name^="name"], [name^="Name"], [name^="nome"], [name^="Name"]',m='[type="checkbox"], [type="radio"]',y=t._mbz_&&t._mbz_.$?t._mbz_.$:null,d=!1,h=!1,b={},S={},v={timout:1500,throttle:150};function E(){if(S&&S.debug)try{console.log.apply(console,arguments)}catch(t){}}function _(t,e){var n=!1;return function(){n||(t.apply(null,arguments),n=!0,setTimeout(function(){n=!1},e))}}function j(e){if(!d&&e.email&&-1!==e.email.indexOf("@")){d=!0;var r={FormValue_ListID:e.listId,FormValue_Command:"Subscriber.Add","FormValue_Fields[UpdateifExists]":!0,"FormValue_Fields[EmailAddress]":e.email};S.nameCustomId&&e.name&&(r["FormValue_Fields[CustomField"+S.nameCustomId+"]"]=e.name),S.radioCustomId&&e.radio&&(r["FormValue_Fields[CustomField"+S.radioCustomId+"]"]=e.radio);var t=Object.keys(e.fields)||[];t&&t.length&&y(t).each(function(){var n="FormValue_Fields[CustomField"+this+"]",t=e.fields[this];"undefined"!==y.typeOf(t)&&("array"!==y.typeOf(t)?r[n]=t:y(t).each(function(t,e){r[n+"["+e+"]"]=t}))}),b.setFormDataQueue(e),b.logEvent("sentData",r),y.ajax({type:"POST",url:b.getSendUrl(),data:r,complete:function(){d=!1},success:function(t){b.setFormDataQueue(null),E("mlbz enviado",t),b.logEvent("respData",t)}})}}function g(){var g=_(j,v.throttle);function t(t){var c=y(t),e="mbzBind"+S.id;if(c.data(e))E(c,"bind jÃ¡ aplicado");else{c.data(e,!0);var u={listId:S.listId,email:null,name:null,radio:null,fields:{}},l="change input",n=b.getEmailSelector(),r=b.getNameSelector(),o=b.getRadioSelector(),i=b.getSubmitSelector(),a=b.getNativeSelector(),s=b.getActiveFields()||[],f=[],p=function(n){return y(f).each(function(){var t=this;if(t&&"object"==typeof t&&t.el){var e=t.el.val();if(t.isExtra)return t.multiple&&(e=[],t.el.each(function(t){"object"==typeof t&&t.checked&&e.push(t.value)})),void(n.fields[t.name]||null===e||(n.fields[t.name]=e));n[t.name]||(n[t.name]=e)}}),n};if(n){var m=c.find(n);f.push({name:"email",el:m}),m.on(l,function(){u.email=this.value,E(u)})}if(S.nameCustomId&&r){var d=c.find(r);f.push({name:"name",el:d}),d.on(l,function(){var t=this.value;"true"!=t&&"false"!=t&&(u.name=t,E(u))})}if(S.radioCustomId&&o){var h=c.find(o);f.push({name:"radio",el:h}),h.on(l,function(){u.radio=this.value,E(u)})}i&&c.find(i).on("click mouseup",function(){p(u),E("click",u),g(u)}),y(s).each(function(){!function(t){if(t){var n=c.find(t.selector);f.push({name:t.customId,el:n,multiple:t.multiple,isExtra:!0}),n.on(l,function(){var e=this.value;t.multiple&&(e=[],n.each(function(t){"object"==typeof t&&t.checked&&e.push(t.value)})),u.fields[t.customId]=e,E(u)})}}(this)});var v=c.find(a);v.length&&v.each(function(){var t=y(this),n=t.attr("data-mbz-custom-id"),e=t.attr("data-mbz-input"),r=!!t.attr("multiple")||"checkbox"===e,o="email"===e,i="date"===e||"tel"===e&&"**/**/****"===t.attr("data-mbz-mask"),a='[data-mbz-input][data-mbz-custom-id="'+n+'"]';n&&(f.push({name:n,el:r?c.find(a):t,multiple:r,isExtra:!0}),t.on(l,function(){var e=this.value;o?u.email=e:(i&&e&&(e=(e||"").split("/").reverse().join("-")),r&&(e=[],c.find(a).each(function(t){t&&"object"==typeof t&&t.checked&&e.push(t.value)})),u.fields[n]=e,E(u))}))}),c.on("submit",function(){p(u),E("submit",u),g(u)})}}y(b.getFormSelector()).each(function(){t(this)})}function T(r){return y.ajax({url:b.getSettingsUrl(),success:function(t){var e,n;t&&(E("data",t),e=t,n={log:{sentData:[],respData:[]},api:new w,popupHomolog:h},y.extend(S,n),y.extend(S,e),S.ready=!0,r&&r())}})}function w(){var n=this,e={tablet:function(){return navigator.userAgent.match(/Tablet|iPad|iPod/i)&&t.innerWidth<=1280},all:function(){return navigator.userAgent.match(/Android|BlackBerry|Tablet|Mobile|iPhone|iPad|iPod|Opera Mini|IEMobile/i)}};n.setDebugMode=function(t){S.debug=!!t},n.helper=b,n.log=E,n.bindElements=g,n.checkIntegration=function(){var a=["#dc679e","#00ffb5","#ff006d","#ff9600","#7700ff"];function c(t,e){t&&e&&t.each(function(t){t.style.background=e})}var t=y(b.getFormSelector());return t.each(function(){var e,t,n,r,o,i;e=y(this),t=b.getEmailSelector(),n=b.getNameSelector(),r=b.getRadioSelector(),o=b.getSubmitSelector(),i=b.getActiveFields()||[],t&&c(e.find(t),a[0]),S.nameCustomId&&n&&c(e.find(n),a[1]),S.radioCustomId&&r&&c(e.find(r),a[2]),o&&c(e.find(o),a[3]),y(i).each(function(){var t=this||{};c(e.find(t.selector),a[2])}),c(e,a[4])}),{elements:t,hasIntegration:!!t.length}},n._mobileCheck=e,n.getDevice=function(){var t="desktop";try{e.all()&&(t=e.tablet()?"tablet":"mobile")}catch(t){}return t},n.tryParseJSON=function(t){try{return JSON.parse(t||"{}")}catch(t){}return t},n.getStorage=function(t){try{var e=localStorage.getItem(t);return e?n.tryParseJSON(e):e}catch(t){return E(t),e}},n.setStorage=function(t,e){try{return e="object"==typeof e?JSON.stringify(e):e,localStorage.setItem(t,e),!0}catch(t){E(t)}return!1}}b.throttle=_,b.logEvent=function(t,e){S.log&&S.log[t]&&S.log[t].push(e)},b.getSettingsUrl=function(){var t="";return h&&(t="?popup-homolog=true"),i+S.id+t},b.getFormSelector=function(){return(S.formSelector||S.platform.formSelector||s)+", [data-mbz-form]"},b.getEmailSelector=function(){return(S.emailSelector||S.platform.emailSelector||f)+', [data-mbz-input="email"]'},b.getNameSelector=function(){return S.nameCustomSelector||S.platform.nameSelector||p},b.getRadioSelector=function(){return S.radioCustomSelector||S.platform.radioSelector||m},b.getSubmitSelector=function(){return S.submitSelector||S.platform.submitSelector},b.getNativeSelector=function(){return"[data-mbz-input]"},b.getSendUrl=function(){return S.useFormAction&&S.formAction&&"object"==typeof S.formAction&&S.formAction.url?S.formAction.url:S.sendUrl||"https://news.mailclick.me/subscribe.php"},b.getTimeout=function(){return S.timeout||v.timeout},b.getFormDataQueue=function(){try{var t=S.api.getStorage(u);return t&&"object"==typeof t&&t.email?t:null}catch(t){E(t)}return!1},b.setFormDataQueue=function(t){t=t||{};try{return S.api.setStorage(u,t),!0}catch(t){E(t)}return!1},b.getActiveFields=function(){var e=[];return y(S.extraFields||[]).each(function(){var t=this||{};t&&t.active&&e.push(t)}),e};try{y?"object"!=typeof t[c]?console.warn("Objeto "+c+" nÃ£o definido"):(S=t[c]).ready?E("Mailbiz - hub jÃ¡ foi inicializado"):S.id?("true"===y.getQueryParameter(l)&&(h=!0),T(function(){var t;S.active&&S.ready&&((t=b.getFormDataQueue())&&j(t),g(),S.popups&&"object"==typeof S.popups&&(S.popups||{}).active&&y.loadScript(a),S.onReady&&"function"==typeof S.onReady&&S.onReady(S),y.ready(function(){g();var t=b.getTimeout();t&&setTimeout(function(){g()},t)}))})):E("Mailbiz - ID invÃ¡lido"):E("Mailbiz - erro ao carregar _mbz_")}catch(t){}}(window,document);