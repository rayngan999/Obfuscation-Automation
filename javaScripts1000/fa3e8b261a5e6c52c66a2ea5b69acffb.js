(self.sitewideWebpack=self.sitewideWebpack||[]).push([[2794,7632,3695,1426,5080,9263,301,3083,6181,1424,578,8136,3754],{28232:function(t,e,n){"use strict";n.d(e,{D:function(){return i}}),n(63804);var r=n(92519),a=n(70917);function i(t){var e=t.className,n=t.text;if(!n)return null;var i="string"==typeof n?{html:n}:n.data;return(0,a.jsx)("div",{className:e},(0,a.jsx)(r.default,{data:i}))}},87056:function(t,e,n){"use strict";n.r(e),n.d(e,{EmailRegistrationForm:function(){return T},default:function(){return M}});var r=n(87757),a=n.n(r),i=n(96156),s=n(22122),o=n(92137),c=n(28481),l=n(82492),u=n.n(l),f=n(63804),m=n.n(f),p=n(38999),d=n(83518),g=n(65663),v=n(12745),x=n(74222),b=n(5278),N=n(56648),j=n(98549),h=n(94184),_=n.n(h),S=n(18707),w=n(32972),y=n(25997),O=n(3128),A=n(28232),k=n(70917);function C(t){var e=t.title,n=t.message,r=t.button,a=t.closeButtonProps,i=t.onClick,o=t.viewport;return(0,k.jsx)("div",{className:"email-registration__confirmation"},(0,k.jsx)(A.D,{className:"email-registration__confirmation-title",text:e}),(0,k.jsx)(A.D,{className:"email-registration__confirmation-message",text:n}),r&&(0,k.jsx)(v.Gt,(0,s.Z)({},a,{className:_()(a.className,o),onClick:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){null!=r&&r.link?window.location.assign(r.link):(null==r?void 0:r.closeModal)&&i()}))}),r.text))}var Z=n(30462),P=n(32723),E=n(49743);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={className:"email-registration__form-email",crossBrand:!1,inverse:!1,maxLength:100},L={crossBrand:!1,fullWidth:!1,size:v.$u.medium,variant:v.$e.solid,text:"Submit"},B=["localhost","127.0.0.1"].some((function(t){return window.location.host.includes(t)}))?"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI":"6LfwVTIUAAAAAMEm3AhNlvdUNEJSCPDdnadbQjEY";function T(t){var e=t.customText,n=t.detailsLink,r=t.errorNotificationAriaLabel,i=t.hiddenFields,l=t.onSubmit,d=t.style,g=t.submitButtonOptions,h=t.targetURL,S=t.textInputOptions,R=t.thankYouMessage,T=(0,y.m)(),M=T.brandName,G=T.locale,I=T.market,F=T.targetEnv,q=(0,Z.h)(Z.P.EmailRegistrion),J=(0,f.useContext)(N.BreakpointContext).greaterOrEqualTo,W=(0,f.useContext)(O.t).onClose,X=(0,f.useState)(!1),$=(0,c.Z)(X,2),z=$[0],Q=$[1],V=(0,f.useState)(""),Y=(0,c.Z)(V,2),H=Y[0],K=Y[1],tt=(0,f.useState)(!0),et=(0,c.Z)(tt,2),nt=et[0],rt=et[1],at=(0,f.useState)(!1),it=(0,c.Z)(at,2),st=it[0],ot=it[1],ct=(0,f.useState)(""),lt=(0,c.Z)(ct,2),ut=lt[0],ft=lt[1],mt=(0,f.useState)(!1),pt=(0,c.Z)(mt,2),dt=pt[0],gt=pt[1],vt=(0,f.useState)(j.N.None),xt=(0,c.Z)(vt,2),bt=xt[0],Nt=xt[1],jt=(0,f.useRef)(null),ht=(0,f.useRef)(null),_t=(0,f.useRef)(null),St=(0,P.X)(M,I),wt=(0,E.U)(G),yt=J(N.LARGE),Ot=yt?"desktop":"mobile";function At(){return(At=(0,o.Z)(a().mark((function t(){var e,n,r,s,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Nt(j.N.Loading),r=null===(e=_t.current)||void 0===e?void 0:e.getResponse(),s=u()({brand_country_code:[St],lang_pref:[wt],"g-recaptcha-response":[r],email:[null===(n=ht.current)||void 0===n?void 0:n.value]},i),t.next=6,fetch("".concat(q,"/customer-preferences"),U({method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)},"stage"===F&&{referrer:"https://www.gap.com/origin-when-cross-origin"}));case 6:(o=t.sent).ok?(null==l||l(),R?gt(!0):h&&window.location.assign(h)):(ft("".concat(o.statusText," (").concat(o.status,")")),ot(!0)),Nt(j.N.None);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var kt=S.errorMessage,Ct=S.label,Zt=u()(D,{errorMessage:kt,label:Ct},null==S?void 0:S[Ot]),Pt=g.text,Et=u()(L,{text:Pt},null==g?void 0:g[Ot]),Rt=(0,k.jsx)(m().Fragment,null,(0,k.jsx)(A.D,{className:"email-registration__title",text:null==e?void 0:e.title}),(0,k.jsx)(A.D,{className:"email-registration__subtitle",text:null==e?void 0:e.subtitle}),(0,k.jsx)("div",{className:"email-registration__input-wrapper"},(0,k.jsx)("div",{className:"email-registration__inputs"},(0,k.jsx)("form",{ref:jt,className:"email-registration__form",name:"email-registration-form"},z&&(0,k.jsx)(p.default,{ref:_t,onResolved:function(){!function(){At.apply(this,arguments)}()},sitekey:B,size:"invisible"}),(0,k.jsx)(x.ZP,(0,s.Z)({ref:ht},Zt,{hasError:!nt,name:"email",onChange:function(t){K(t.target.value),rt(!0)},onClick:function(){return Q(!0)},required:!0,type:"email",value:H})),(0,k.jsx)("div",{className:"email-registration__form-submit-button-container"},(0,k.jsx)(v.Gt,(0,s.Z)({},Et,{animationStatus:bt,className:_()(Et.className,Ot),disabled:bt===j.N.Loading,onClick:function(t){var e,n;t.preventDefault(),Nt(j.N.Loading),ft(""),ot(!1),z&&(null===(e=_t.current)||void 0===e||e.reset()),/^\S+@\S+\.\S+$/.test(H)?(rt(!0),null===(n=_t.current)||void 0===n||n.execute()):(rt(!1),Nt(j.N.None))}}),Et.text),st&&(0,k.jsx)(b.Z,{ariaLabel:r,kind:"error"},ut))),(0,k.jsx)(A.D,{className:"email-registration__disclaimer",text:null==e?void 0:e.disclaimerText}),n&&(0,k.jsx)(w.default,(0,s.Z)({isLarge:yt},n)))));return(0,k.jsx)("div",{className:"email-registration__wrapper",style:null==d?void 0:d[Ot]},R&&dt?(0,k.jsx)(C,(0,s.Z)({},R,{closeButtonProps:Et,onClick:W,viewport:Ot})):Rt)}var M=(0,d.compose)(g.wi,S.mapDataToProps)(T)},3128:function(t,e,n){"use strict";n.d(e,{t:function(){return a}});var r=n(63804),a=n.n(r)().createContext({onClose:function(){}})},32723:function(t,e,n){"use strict";function r(t,e){return"gapfs"===t?"GPUSO":"brfs"===t?"BRUSO":"".concat(("gap"===t?"gp":t).toUpperCase()).concat(e.toUpperCase())}n.d(e,{X:function(){return r}})},49743:function(t,e,n){"use strict";n.d(e,{U:function(){return i}});var r="US_EN",a={en_US:r,en_CA:"CA_EN",fr_CA:"CA_FR","en-US":r,"en-CA":r,"fr-US":r,"fr-CA":r},i=function(t){var e;return null!==(e=a[t])&&void 0!==e?e:r}},30462:function(t,e,n){"use strict";n.d(e,{P:function(){return r},h:function(){return s}});var r,a=n(25997),i={markets:{ca:"https://api.gapcanada.ca"},brandNames:{gapfs:"https://api.gapfactory.com",brfs:"https://api.gapfactory.com"}};function s(t){var e=(0,a.m)(),n=e.apis,r=e.brandName,s=e.market,o=null==n?void 0:n[t],c="https://api.gap.com",l=i.markets[s]||i.brandNames[r];return null!=o&&o.includes(c)&&l?o.replace(c,l):o}!function(t){t.EmailRegistrion="emailRegistrationApi",t.ShoppingBag="shoppingBagApi"}(r||(r={}))},69124:function(){},54080:function(){}}]);