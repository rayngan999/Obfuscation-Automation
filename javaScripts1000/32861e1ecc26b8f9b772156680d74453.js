(function(window,undefined){function determineOrigin(){var file="/assets/widgets/product.js";var regex=new RegExp("^https?://([^/?#]+)"+file,"i");var scripts=document.getElementsByTagName("script");var matches,origin;for(var i=scripts.length-1;i>=0;--i){matches=scripts[i].src.match(regex);if(matches&&matches[1]){origin=matches[1];break}}return origin}function disambiguationTerm(){return"202f328"}function loadWidgets(origin){var pid,upc,type,as_upc;var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){pid=scripts[i].getAttribute("data-viewpoints-product-id");upc=scripts[i].getAttribute("data-viewpoints-product-upc");type=scripts[i].getAttribute("data-viewpoints-type");if(pid){as_upc=scripts[i].getAttribute("data-viewpoints-as-upc");loadWidget(origin,pid,as_upc,type)}else{if(upc){loadWidget(origin,upc,true,type)}}}}function loadWidget(origin,productId,upc,type){var script=document.createElement("script");var src=baseUrl(origin)+"widgets/products/"+productId+".js?"+disambiguationTerm();if(upc){src+="&upc"}if(type){src+="&type="+type}script.src=src;script.async=true;document.body.appendChild(script)}window.viewpointsJsonpCallback=function(json){waitForCssReady(function(){insertContents(json)})};window.viewpointsPopupWindow=function(url){var newwindow=window.open(url,"name","height=800,width=650,scrolling=yes,scrollbars=yes");if(window.focus){newwindow.focus()}return false};function insertContents(json){var productId=json.id;var widgetType=json.src_type;var id,type,widgetElement,html_class;var scripts=document.getElementsByTagName("script");for(var j=0;j<scripts.length;j++){if(scripts[j].getAttribute("data-viewpoints-completed")=="true"){continue}id=scripts[j].getAttribute("data-viewpoints-product-id");if(id==undefined){id=scripts[j].getAttribute("data-viewpoints-product-upc")}if(id!=productId){continue}if(scripts[j].getAttribute("data-viewpoints-type")==widgetType){scripts[j].setAttribute("data-viewpoints-completed","true");widgetElement=document.createElement("div");widgetElement.id="viewpoints-product-content-"+json.id;html_class="vp-widg-prod-"+json.type;if(json.cleanslate!=false){html_class+=" cleanslate"}widgetElement.setAttribute("class",html_class);widgetElement.innerHTML=json.html;scripts[j].parentNode.insertBefore(widgetElement,scripts[j])}}}function baseUrl(origin){var prot=/^http:/.test(document.location)?"http":"https";var base=prot+"://"+origin+"/";return base}function loadStylesheet(origin){var link=document.createElement("link");link.rel="stylesheet";link.type="text/css";link.href=baseUrl(origin)+"assets/widgets_product.css?"+disambiguationTerm();var entry=document.getElementsByTagName("script")[0];entry.parentNode.insertBefore(link,entry);var testElem=document.createElement("span");testElem.id="vp-widg-prod-css-ready";testElem.style.color="#fff";entry.parentNode.insertBefore(testElem,entry)}function waitForCssReady(callback){var node=document.getElementById("vp-widg-prod-css-ready");var value;(function poll(){if(window.getComputedStyle){value=document.defaultView.getComputedStyle(node,null).getPropertyValue("color")}else{if(node.currentStyle){value=node.currentStyle.color}}if(value&&(value==="rgb(186, 218, 85)"||value.toLowerCase()==="#bada55")){callback()}else{setTimeout(poll,500)}})()}var origin=determineOrigin();loadWidgets(origin);loadStylesheet(origin)})(window);