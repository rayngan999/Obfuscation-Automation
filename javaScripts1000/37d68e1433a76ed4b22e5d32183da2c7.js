Cube("datav:/npm/color/2.0.1",["datav:/npm/color-string/1.5.2","datav:/npm/color-convert/1.9.1"],function(a,b,c){function d(a,b){if(!(this instanceof d))return new d(a,b);if(b&&b in p&&(b=null),b&&!(b in n))throw new Error("Unknown model: "+b);var c,e;if(!a)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(a instanceof d)this.model=a.model,this.color=a.color.slice(),this.valpha=a.valpha;else if("string"===typeof a){var f=m.get(a);if(null===f)throw new Error("Unable to parse color from string: "+a);this.model=f.model,e=n[this.model].channels,this.color=f.value.slice(0,e),this.valpha="number"===typeof f.value[e]?f.value[e]:1}else if(a.length){this.model=b||"rgb",e=n[this.model].channels;var g=o.call(a,0,e);this.color=j(g,e),this.valpha="number"===typeof a[e]?a[e]:1}else if("number"===typeof a)a&=16777215,this.model="rgb",this.color=[255&a>>16,255&a>>8,255&a],this.valpha=1;else{this.valpha=1;var h=Object.keys(a);"alpha"in a&&(h.splice(h.indexOf("alpha"),1),this.valpha="number"===typeof a.alpha?a.alpha:0);var i=h.sort().join("");if(!(i in q))throw new Error("Unable to parse color from object: "+JSON.stringify(a));this.model=q[i];var s=n[this.model].labels,t=[];for(c=0;c<s.length;c++)t.push(a[s[c]]);this.color=j(t)}if(r[this.model])for(e=n[this.model].channels,c=0;c<e;c++){var u=r[this.model][c];u&&(this.color[c]=u(this.color[c]))}this.valpha=k(0,l(1,this.valpha)),Object.freeze&&Object.freeze(this)}function e(a,b){return+a.toFixed(b)}function f(a){return function(b){return e(b,a)}}function g(a,b,c){return a=Array.isArray(a)?a:[a],a.forEach(function(a){(r[a]||(r[a]=[]))[b]=c}),a=a[0],function(d){var e;return arguments.length?(c&&(d=c(d)),e=this[a](),e.color[b]=d,e):(e=this[a]().color[b],c&&(e=c(e)),e)}}function h(a){return function(b){return k(0,l(a,b))}}function i(a){return Array.isArray(a)?a:[a]}function j(a,b){for(var c=0;c<b;c++)"number"!==typeof a[c]&&(a[c]=0);return a}var k=Math.max,l=Math.min,m=c("datav:/npm/color-string/1.5.2"),n=c("datav:/npm/color-convert/1.9.1"),o=[].slice,p=["keyword","gray","hex"],q={};Object.keys(n).forEach(function(a){q[o.call(n[a].labels).sort().join("")]=a});var r={};return d.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(a){var b=this.model in m.to?this:this.rgb();b=b.round("number"===typeof a?a:1);var c=1===b.valpha?b.color:b.color.concat(this.valpha);return m.to[b.model](c)},percentString:function(a){var b=this.rgb().round("number"===typeof a?a:1),c=1===b.valpha?b.color:b.color.concat(this.valpha);return m.to.rgb.percent(c)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var a={},b=n[this.model].channels,c=n[this.model].labels,d=0;d<b;d++)a[c[d]]=this.color[d];return 1!==this.valpha&&(a.alpha=this.valpha),a},unitArray:function(){var a=this.rgb().color;return a[0]/=255,a[1]/=255,a[2]/=255,1!==this.valpha&&a.push(this.valpha),a},unitObject:function(){var a=this.rgb().object();return a.r/=255,a.g/=255,a.b/=255,1!==this.valpha&&(a.alpha=this.valpha),a},round:function(a){return a=k(a||0,0),new d(this.color.map(f(a)).concat(this.valpha),this.model)},alpha:function(a){return arguments.length?new d(this.color.concat(k(0,l(1,a))),this.model):this.valpha},red:g("rgb",0,h(255)),green:g("rgb",1,h(255)),blue:g("rgb",2,h(255)),hue:g(["hsl","hsv","hsl","hwb","hcg"],0,function(a){return(a%360+360)%360}),saturationl:g("hsl",1,h(100)),lightness:g("hsl",2,h(100)),saturationv:g("hsv",1,h(100)),value:g("hsv",2,h(100)),chroma:g("hcg",1,h(100)),gray:g("hcg",2,h(100)),white:g("hwb",1,h(100)),wblack:g("hwb",2,h(100)),cyan:g("cmyk",0,h(100)),magenta:g("cmyk",1,h(100)),yellow:g("cmyk",2,h(100)),black:g("cmyk",3,h(100)),x:g("xyz",0,h(100)),y:g("xyz",1,h(100)),z:g("xyz",2,h(100)),l:g("lab",0,h(100)),a:g("lab",1),b:g("lab",2),keyword:function(a){return arguments.length?new d(a):n[this.model].keyword(this.color)},hex:function(a){return arguments.length?new d(a):m.to.hex(this.rgb().round().color)},rgbNumber:function(){var a=this.rgb().color;return(255&a[0])<<16|(255&a[1])<<8|255&a[2]},luminosity:function(){for(var a,b=this.rgb().color,c=[],d=0;d<b.length;d++)a=b[d]/255,c[d]=0.03928>=a?a/12.92:Math.pow((a+0.055)/1.055,2.4);return 0.2126*c[0]+0.7152*c[1]+0.0722*c[2]},contrast:function(a){var b=this.luminosity(),c=a.luminosity();return b>c?(b+0.05)/(c+0.05):(c+0.05)/(b+0.05)},level:function(a){var b=this.contrast(a);return 7.1<=b?"AAA":4.5<=b?"AA":""},dark:function(){var a=this.rgb().color,b=(299*a[0]+587*a[1]+114*a[2])/1e3;return 128>b},light:function(){return!this.dark()},negate:function(){for(var a=this.rgb(),b=0;3>b;b++)a.color[b]=255-a.color[b];return a},lighten:function(a){var b=this.hsl();return b.color[2]+=b.color[2]*a,b},darken:function(a){var b=this.hsl();return b.color[2]-=b.color[2]*a,b},saturate:function(a){var b=this.hsl();return b.color[1]+=b.color[1]*a,b},desaturate:function(a){var b=this.hsl();return b.color[1]-=b.color[1]*a,b},whiten:function(a){var b=this.hwb();return b.color[1]+=b.color[1]*a,b},blacken:function(a){var b=this.hwb();return b.color[2]+=b.color[2]*a,b},grayscale:function(){var a=this.rgb().color,b=0.3*a[0]+0.59*a[1]+0.11*a[2];return d.rgb(b,b,b)},fade:function(a){return this.alpha(this.valpha-this.valpha*a)},opaquer:function(a){return this.alpha(this.valpha+this.valpha*a)},rotate:function(a){var b=this.hsl(),c=b.color[0];return c=(c+a)%360,c=0>c?360+c:c,b.color[0]=c,b},mix:function(b,c){var e=b.rgb(),f=this.rgb(),g=void 0===c?0.5:c,h=2*g-1,i=e.alpha()-f.alpha(),a=((-1===h*i?h:(h+i)/(1+h*i))+1)/2,j=1-a;return d.rgb(a*e.red()+j*f.red(),a*e.green()+j*f.green(),a*e.blue()+j*f.blue(),e.alpha()*g+f.alpha()*(1-g))}},Object.keys(n).forEach(function(a){if(-1===p.indexOf(a)){var b=n[a].channels;d.prototype[a]=function(){if(this.model===a)return new d(this);if(arguments.length)return new d(arguments,a);var c="number"===typeof arguments[b]?b:this.valpha;return new d(i(n[this.model][a].raw(this.color)).concat(c),a)},d[a]=function(c){return"number"===typeof c&&(c=j(o.call(arguments),b)),new d(c,a)}}}),a.exports=d,a.exports});