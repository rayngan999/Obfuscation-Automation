//v173 Copyright (c) 2008-2021 33Across Inc. All Rights Reserved

Tynt=window.Tynt||[];
(function(){function n(){}function B(a,b,c,l){var d=function(a,b,c,l,d){a.size=b||"";a.size?(b=b.split("x"),a.width=b[0],a.height=b[1]):(a.width="0",a.height="0");a.targetId=c||"";a.product=l||"inpage";d?a.distro=d:"inview"==a.product&&(a.distro="RCIV");a.iframeId=null;a.sicWindow=null};22==a.length?(this.publisherId=a,this.options=c||{},d(this,this.options.size||"1x1",this.options.targetId||"",b)):d(this,a,b,c,l)}function w(a,b,c){this.type=a;this.fn=b;this.once=!!c}var e=window,k=document,f={distro:"SIAB",
id:"SIAB-"+(new Date).getTime()};Tynt.SIABL=!0;Date.now||(Date.now=function(){return(new Date).getTime()});var d={_maxRef:600,_idMacro:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",init:function(){this._icUrl=f.protocol+(Tynt.e||"")+"ic.tynt.com";this._debUrl=f.protocol+(Tynt.e||"")+"de.tynt.com/deb/v2";this._sicUrl=f.protocol+(Tynt.e||"")+"cdn-sic.33across.com/1/javascripts/sic.js";this._apUrl=f.protocol+(Tynt.e||"")+"cdn-ap.33across.com/javascripts/ap.js"},newEle:function(a,b,c,d){d=d||window;
a=d.document.createElement(a);b&&this.extend(a,b);c&&this.extend(a.style,c);return a},injectScript:function(a,b,c){b=b||window;a=this.newEle("script",{async:"async",referrerPolicy:"unsafe-url",type:"text/javascript",src:a},null,b);this.insertEle(a,c||b.document.getElementsByTagName("script")[0])},injectSicScript:function(a){this.injectScript(this._sicUrl,window,a)},injectApolloScript:function(){this.injectScript(this._apUrl)},injectSicIframe:function(a,b,c){var d={width:a.width+"px",height:a.height+
"px",border:"0 none",margin:"0"};c&&this.extend(d,c);c=this.newEle("iframe",{referrerPolicy:"unsafe-url",src:"about:blank",frameBorder:"0",frameSpacing:"0",scrolling:"no"},d);this.insertEle(c,b);a.iframeId=this.eleId(c);a.sicWindow=c.contentWindow;a=c.contentWindow.document;a.open();a.write('<!DOCTYPE html><html><head><style type="text/css">*{margin:0;padding:0;}</style></head><body><script type="text/javascript">window.Tynt = window.parent.Tynt;\x3c/script><script type="text/javascript" src="'+this._sicUrl+
'">\x3c/script></body></html>');a.close()},insertEle:function(a,b){b?"script"==b.tagName.toLowerCase()?b.parentNode.insertBefore(a,b):b.appendChild(a):document.body.appendChild(a)},eleId:function(a){var b=a.id;b||(b="x33x"+Date.now(),a.id=b);return b},_imgs:[],injectPixel:function(a,b,c){var d;try{d=k.createElement("img")}catch(e){d=document.createElement("img")}d&&(this._imgs.push(d),b&&(d.onload=b),c&&(d.onerror=c),d.referrerPolicy="unsafe-url",d.src=a)},docUrl:function(){var a=this.getLink("canonical");
a||(a=this.getMeta("property","og:url","name","original-source"));if(a){if(0!=a.indexOf("http")){var b=f.protocol+e.location.host+e.location.pathname,c=k.getElementsByTagName("base")[0];c&&(c=c.getAttribute("href"))&&(b=c);"/"==a.charAt(0)?(c=b.indexOf("/",9),-1<c&&(b=b.slice(0,c))):(c=b.lastIndexOf("/"),b=9<c?b.slice(0,c+1):b+"/");a=b+a}return a}return""},getMeta:function(a,b,c,d){var e,g=null,f=null,h=k.getElementsByTagName("meta");for(e=0;e<h.length;++e)g||h[e].getAttribute(a)!==b?c&&!f&&h[e].getAttribute(c)===
d&&(f=h[e].getAttribute("content")||null):g=h[e].getAttribute("content")||null;return g||f},getLink:function(a,b){var c,d,e=k.getElementsByTagName("link");for(c=0;c<e.length;++c)if(d=e[c].getAttribute("rel"),e[c].getAttribute("href")&&d&&(!b&&0<=d.indexOf(a)||b&&d==a))return e[c].href;return null},extend:function(a,b){var c,d;for(c=1;c<arguments.length;++c)for(d in arguments[c])arguments[c].hasOwnProperty(d)&&(a[d]=arguments[c][d]);return a},isArray:function(a){return"undefined"!=typeof a&&"[object Array]"===
Object.prototype.toString.call(a)},inArray:function(a,b){return 0<=this.indexOf(a,b)},toArray:function(a,b){return Array.prototype.slice.call(a,b||0)},indexOf:function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1},unique:function(a){var b,c={},d=[];for(b=0;b<a.length;++b)c[a[b]]||(c[a[b]]=!0,d.push(a[b]));return d},iframeType:function(){var a=this.iframeEle(),b=x;if(a)b=a.id&&0<=a.id.search(/google_ads?_i?frame/)?6:y;else try{window!=window.top&&(b=
"undefined"!=typeof window.$sf?z:u)}catch(c){b=u,d.clog("iframeType: "+c.message)}return b},iframeEle:function(a){var b=null;a=a||window;try{b=a.frameElement}catch(c){}return b},iframeTop:function(){var a=window,b=null;try{for(;a!=window.top;)b=a,a=a.parent}catch(c){return null}return b?this.iframeEle(b):null},getTopWin:function(){var a=window;try{for(;a.parent!==a&&a.parent.document;)a=a.parent}catch(b){}return a},isolated:function(){var a=!0;try{"function"==typeof window.top.open&&(a=!1)}catch(b){}return a},
tyntIds:function(){return this.unique(Tynt).join("~")},getPubId:function(){for(var a=null,b=0;b<Tynt.length;++b)if("string"==typeof Tynt[b]&&22==Tynt[b].length&&0>Tynt[b].indexOf("!")){a=Tynt[b];break}return a},countIds:function(a){var b,c=0;for(b=0;b<Tynt.length;++b)Tynt[b]===a&&++c;return c},_log:function(a){"undefined"==typeof Tynt.debug&&0<e.location.search.indexOf("__tcdebugmode=1")&&e.console&&e.console.log&&(Tynt.debug=!0);if(!0===Tynt.debug||1===Tynt.debug)a.unshift("[TC]"),e.console.log.apply(e.console,
a)},log:function(){f.inXOIframe()?this.clog.apply(this,arguments):this._log(this.toArray(arguments))},clog:function(){var a=this.toArray(arguments);a.unshift(f.id);this._log(a)},callIcU:function(){e._33Across.state.icDone=A;d.clog("Calling IC/U");this.injectPixel(this._icUrl+"/u",function(){e._33Across.state.icDone=t})},callIc:function(){var a,b,c,l,r,g,p,h;if(!e._33Across.state.icDone){e._33Across.state.icDone=A;b=this.getCookie(k.cookie,"tracertraffic");a=e.location.hash;a=/tynt=/.test(a)?a.match(/tynt=?([^?&$#]*)/)[1]:
!1;l=c=this._icUrl+"/b/p?id="+this.tyntIds()+(b?"&et="+b:"")+(a?"&a="+a:"")+("string"==typeof Tynt.b?"&b="+Tynt.b:"")+"&lm="+f.type+"&ts="+Date.now()+"&dn="+f.distro+"&iso="+(this.isolated()?"1":"0")+(null==m.uspString?"":"&us_privacy="+m.uspString);(a=this.getMeta("property","og:image:url","property","og:image"))&&(l+="&img="+encodeURIComponent(this.trunc(a,250)));r=l;(a=this.getMeta("property","og:title"))&&a!=k.title&&(r+="&ct="+encodeURIComponent(this.trunc(a,200)));g=r;k.referrer&&(a=this.trunc(k.referrer,
this._maxRef),g+="&r="+encodeURIComponent(a));p=g;if(a=k.title||e.location.hostname)a=this.trim(this.trunc(a,200)),p+="&t="+encodeURIComponent(a);h=p;if(a=this.docUrl())a=this.trunc(a,400),h+="&cu="+encodeURIComponent(a);b=h;if(a=this.getLink("amphtml",!0))a=this.trunc(a,250),b+="&ah="+encodeURIComponent(a);d.callIc.rsp=function(){e._33Across.state.icDone=t};d.clog("Calling IC");this.injectPixel(b,d.callIc.rsp,function(){d.injectPixel(h,d.callIc.rsp,function(){d.injectPixel(p,d.callIc.rsp,function(){d.injectPixel(g,
d.callIc.rsp,function(){d.injectPixel(r,d.callIc.rsp,function(){d.injectPixel(l,d.callIc.rsp,function(){d.injectPixel(c,d.callIc.rsp)})})})})})})}},callDeb:function(a,b,c){function l(a,b){d.clog("Calling DEB "+b+(a?"":" on IC timeout"));var c=encodeURIComponent(d.trunc(k.referrer,d._maxRef)),l=m.uspString&&4==m.uspString.length?"&us_privacy="+m.uspString:"";d.injectScript(d._debUrl+"?id="+d.tyntIds()+"&dn="+f.distro+"&cc="+b+"&r="+c+l,e)}"undefined"==typeof a&&(a=1);e._33Across.state.deDone>=a||(++e._33Across.state.deDone,
1!==e._33Across.state.deDone&&!0!==c||this.when(function(){return e._33Across.state.icDone==t},l,{timeout:300,timeoutCallback:l,callbackData:e._33Across.state.deDone},this),b&&0<b.length&&setTimeout(function(){d.callDeb(a,b,!0)},b.shift()))},callDebX:function(a,b){function c(a,c){d[b?"log":"clog"]("Calling DEBx "+c+(a?"":" on IC timeout"));var g=encodeURIComponent(d.trunc(k.referrer,d._maxRef)),p=m.uspString&&4==m.uspString.length?"&us_privacy="+m.uspString:"";d.injectScript(d._debUrl+"?m=xch&id="+
d.tyntIds()+"&dn="+f.distro+"&cc="+c+"&r="+g+p,e)}a||(a=10);e._33Across.state.dxDone>=a||(++e._33Across.state.dxDone,this.when(function(){return e._33Across.state.icDone==t},c,{timeout:300,timeoutCallback:c,callbackData:e._33Across.state.dxDone},this))},jsonDecode:function(a){if("function"!=typeof Array.prototype.toJSON)return JSON.stringify(a);var b=Array.prototype.toJSON;delete Array.prototype.toJSON;a=JSON.stringify(a);Array.prototype.toJSON=b;return a},getCookie:function(a,b){for(var c=b+"=",
d=a.split(";"),e=0;e<d.length;e++){for(var g=d[e];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(c))return g.substring(c.length,g.length)}return null},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},trunc:function(a,b){var c,d;if(!a||a.length<=b)return a;c=a.substring(0,b);for(d=1;3>=d;++d)if("%"==c.charAt(c.length-d))return c.substring(0,c.length-d);return c},when:function(a,b,c,d){var f,g,k,h=null,v=null,q=a();c=c||{};f=c.interval||50;g=c.timeout;k=c.timeoutCallback||function(){};
if(q)return b.call(d,q,c.callbackData),!0;h=e.setInterval(function(){if(q=a())e.clearInterval(h),e.clearTimeout(v),b.call(d,q,c.callbackData)},f);g&&(v=e.setTimeout(function(){e.clearInterval(h);k.call(d,q,c.callbackData)},g));return!1},prob:function(a){a=parseFloat(a)||0;return Math.random()<a},on:function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},off:function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+
b,c)}},m={uspString:null,init:function(){var a=this,b=function(){for(var a=window,b;!b;){try{a.frames.__uspapiLocator&&(b=a)}catch(c){}if(a===window.top)break;a=a.parent}var f={};e.__uspapi=function(a,c,d){if(b){var e="usp-"+Math.random();a={__uspapiCall:{command:a,callId:e,version:c}};f[e]=d;b.postMessage(a,"*")}else d({msg:"__uspapi not found"},!1)};d.on(window,"message",function(a){var b=a.data;if("string"===typeof a.data)try{b=JSON.parse(a.data)}catch(c){}b.__uspapiReturn&&(a=b.__uspapiReturn,
f[a.callId](a.returnValue,a.success),delete f[a.callId])},!1)},c=function(){e.__uspapi("getUSPData",1,function(b,c){c&&(a.uspString=b.uspString)})};e.__uspapi||b();try{c()}catch(f){b(),c()}Tynt.getUspString=function(){return a.uspString};Tynt.getConsentString=function(){return null}}},A=1,t=2,x=0,u=3,z=4,y=5;f.type=0;f.inIframe=function(){return this.type>x};f.inSOIframe=function(){return this.type>=y&&6>=this.type};f.inXOIframe=function(){return this.type>=u&&this.type<=z};f.init=function(){this.type=
d.iframeType();this.inSOIframe()&&(e=d.getTopWin(),k=e.document);e._33Across||(e._33Across={});e._33Across.state||(e._33Across.state={icDone:0,deDone:0,dxDone:0,ivDone:!1});this.protocol="https://";d.init();m.init();this.isolated=d.isolated();d.clog("xoi="+this.inXOIframe()+", soi="+this.inSOIframe()+", iso="+this.isolated);e._33Across.pvTs||(e._33Across.pvTs=Date.now())};Tynt.settings||(Tynt.settings={_error:0,_pending:!1,_pubId:null,_scUrl:"https://"+(Tynt.e||"")+"sc.tynt.com/script/sc/",_settings:{},
_copy:null,isReady:function(){return 0===this._error&&null!=this._copy},get:function(){return this._settings},pubId:function(){null==this._pubId&&(this._pubId=d.getPubId());return this._pubId},download:function(){var a,b;n.adapt(Tynt.cmd);this._pending||this.isReady()||(a=this,Tynt.getConfig=function(){return a.isReady()?a._copy:null},Tynt.sc=function(c){clearTimeout(b);a._error=c.fl||0;0===a._error?(a._init(c),d.log("Settings downloaded",a._copy),Tynt.cmdFlush()):d.log("ERROR: Settings download failed: ",
a._error);a._pending=!1},this.pubId()&&(d.log("Downloading settings"),this._pending=!0,d.injectScript(this._scUrl+this.pubId()+".js"),b=setTimeout(function(){Tynt.sc({fl:1})},1E4)))},_init:function(a){a=a||{};!1!==a.d?(Tynt.o&&d.extend(a,Tynt.o),this._ovr(a)):a=Tynt.i||e.tyntVariables||{};this._def();d.extend(this._settings,a);this._val();this._copy="undefined"!==typeof JSON&&"function"==typeof JSON.parse&&"function"==typeof JSON.stringify?JSON.parse(d.jsonDecode(this._settings)):this._settings},
_ovr:function(a){if(d.isArray(Tynt.overrides))for(var b=0;b<Tynt.overrides.length;b++)"object"==typeof Tynt.overrides[b]&&d.extend(a,Tynt.overrides[b])},_def:function(){this._settings.d=!0;this._settings.a=!0;this._settings.ad=!0;this._settings.aw=8;this._settings.cc=0;this._settings.b=!1;this._settings.ap="Read more:";this._settings.as="";this._settings.st=!1;this._settings.su=!0;this._settings.w=!1;this._settings.f=!1;this._settings.ss=""},_val:function(){this._settings.a||(this._settings.a=!1);
6<this._settings.cc&&(this._settings.cc=0);8>this._settings.aw&&(this._settings.aw=8);this._settings.su||(this._settings.su=!1);this._settings.w&&!this._twUser(this._settings.w)&&(this._settings.w=!1);this._settings.f&&!this._fbUser(this._settings.f)&&(this._settings.f=!1);0<this._error&&(this._settings.a=!1,this._settings.b=!1)},_twUser:function(a){return/^\w{1,15}$/.test(a||"")},_fbUser:function(a){return/^[\w.]{2,}$/.test(a||"")}});"undefined"==typeof Tynt.cmd&&(Tynt.cmd=[]);n.prototype.push=function(){n.adapt(arguments);
n.exec(arguments)};n.exec=function(a){d.log("Executing commands",a);try{for(var b=0;b<a.length;++b)if("function"==typeof a[b])a[b]();else"object"==typeof a[b]&&"function"==typeof a[b].fn&&a[b].fn()}catch(c){d.log("ERROR: Tynt.cmd failed: ",c)}};n.adapt=function(a){var b,c;if(d.isArray(a))for(b=0;b<a.length;++b)"object"==typeof a[b]&&(c=a[b].publisherId,"string"!=typeof c||22!=c.length||d.inArray(Tynt,c)||(Tynt.push(c),d.log("Adapted",c)))};"undefined"==typeof Tynt.cmdFlush&&(Tynt.cmdFlush=function(){var a=
Tynt.cmd;if(!a||d.isArray(a))Tynt.cmd=new n,a&&0<a.length&&n.exec(a)});Tynt.ads||(Tynt.ads={_slots:[],display:function(a,b,c,e){"string"==typeof a?this.addSlot(new B(a,b,c,e)):d.log("ERROR: Invalid product")},getSlot:function(a){return(a=this.getSlots(a))&&0<a.length?a[0]:null},getSlots:function(a){for(var b=[],c=0;c<this._slots.length;++c)this._slots[c].sicWindow===a&&b.push(this._slots[c]);return 0<b.length?b:null},addSlot:function(a){var b=null,c=Tynt.settings.get(),e="Injecting sic/"+a.product;
if(c&&c.sic)if(a.sicWindow=window,"inview"==a.product&&this.ivReady(c,a))this.ivDone(!0),this._slots.push(a),d.log(e,a),d.injectSicScript(),d.callDebX(null,!0);else{if("inpage"==a.product&&this.ipReady(c)||"infeed"==a.product&&this.ifReady(c))a.targetId&&(b=document.getElementById(a.targetId)),f.inIframe()?(this._setIframeId(a),this._slots.push(a),d.log(e,a),d.injectSicScript(b)):(this._slots.push(a),d.log(e+" into iframe",a),d.injectSicIframe(a,b,"infeed"==a.product?{position:"absolute"}:null))}else d.log("ERROR: settings or .sic undefined",
c)},_setIframeId:function(a){var b=d.iframeTop();b&&(a.iframeId=d.eleId(b))},ivDone:function(a){!0===a&&(e._33Across.state.ivDone=!0);return e._33Across.state.ivDone},ivReady:function(a,b){var c=!1,e;!this.ivDone()&&d.isArray(a.p)&&d.inArray(a.p,"sic_v1")&&a.sic.products&&a.sic.products.inview&&(e=a.sic.products.inview.install_method||a.sic.install_method,"TI"==b.distro?"On Page"==e&&(c=!0):"On Page"!=e&&(c=!0));return c},ipReady:function(a){return a.sic.products&&a.sic.products.siab},ifReady:function(a){return a.sic.products&&
a.sic.products.infeed},_events:[],on:function(a,b){this._events.push(new w(a,b,!1))},once:function(a,b){this._events.push(new w(a,b,!0))},off:function(a,b){for(var c=0;c<this._events.length;++c)this._events[c]&&this._events[c].type===a&&this._events[c].fn===b&&(this._events[c]=null)},emit:function(a){var b,c;for(b=0;b<this._events.length;++b)this._events[b]&&this._events[b].type===a&&(c=this._events[b],c.once&&(this._events[b]=null),c.fn.apply(c,Array.prototype.slice.call(arguments,1)))},_targeting:{},
setTargeting:function(a,b){this._targeting[a]=b},getTargeting:function(a){return this._targeting[a]},getTargetingKeys:function(){return Object.keys(this._targeting)}});f.init();f.isolated||d.callIc();Tynt.settings.download();f.isolated||(d.callDeb(),d.callDebX())})();
