function Banner(n){function J(){var a="tmAdVideo"+Math.floor(99999999*Math.random()),b=k.currentScript;m.log("me",n.me);b||(b=k.getElementsByTagName("script"),b=b[b.length-1]);var d=k.createElement("div");d.id=a;b.parentNode.insertBefore(d,b);return d}function K(){if(!k.getElementById("pe-tmadvideo-style")){var f="\t.pe-overflow-hidden { overflow: hidden; }\t.pe-banner { margin:auto; }\t.pe-banner, #pe-overlay { font-family: sans-serif; color: #fff; overflow: hidden; }\t.pe-banner *, #pe-overlay * { box-sizing: border-box; margin:0; padding:0; border: none; background: transparent; outline: 0; }\t.pe-overlay-box { border: 1px solid #999; }\t#pe-overlay a, #pe-overlay a:visited, #pe-overlay:hover, img { color: #fff; text-decoration: none; border: none; }\t.pe-banner .pe-btn, #pe-overlay .pe-btn { width: 28px; height: 28px; line-height: 28px; cursor: pointer; margin-left: 5px; float:left; }\t/*#pe-overlay .pe-close { background: url("+
a.base_url+"img/close.png) no-repeat top right; padding-right: 28px; float:right; width: auto; height:28px; margin-left: 15px; line-height: 29px; margin-right: 4px; }*/\tspan.pe-spin-box {pointer-events: none;}\tspan.pe-spin-sec { pointer-events: none; color: #fff !important; font-weight: bold !important; /*text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;*/\t    font-size: 26px !important; text-align: center !important; line-height: 64px !important; position: absolute; width: 64px; height:64px; left: 0 !important; top:0 !important; }\t.pe-banner .pe-btn-pause, #pe-overlay .pe-btn-pause { background: url("+
a.base_url+"img/pause.png) -28px 0px no-repeat; }\timg.pe-spin-anim {\t    -webkit-animation:pe-spin 1s linear infinite;\t    -moz-animation:pe-spin 1s linear infinite;\t    animation:pe-spin 1s linear infinite;\t}\t@-moz-keyframes pe-spin { 100% { -moz-transform: rotate(360deg); } }\t@-webkit-keyframes pe-spin { 100% { -webkit-transform: rotate(360deg); } }\t@keyframes pe-spin { 100% { -webkit-transform: rotate(360deg); transform:rotate(360deg); } }\t",b=k.createElement("style");b.type="text/css";
b.media="screen";b.id="pe-tmadvideo-style";b.styleSheet?b.styleSheet.cssText=f:b.appendChild(k.createTextNode(f));(k.head||k.getElementsByTagName("head")[0]).appendChild(b)}}function u(){if(!a.setup.overlay)return"";var f=a.setup.banner.video||a.setup.banner,b=a.setup.banner.spin||{},f='<div class="pe-spin-box" style="display:none;position: absolute; width: 64px; height: 64px; left: '+(b.left||f.width/2-32)+"px; top: "+(b.top||f.height/2-32)+'px;">  <img src="'+a.base_url+'img/big-loading-bg.png" style="position: absolute; width: 64px; height: 64px; left:0; top:0;">  <img src="'+
a.base_url+'img/big-loading.png" class="pe-spin-img" style="position: absolute; width: 64px; height: 64px; left:0; top:0;">  <span class="pe-spin-sec">'+a.setup.banner.timeout+"</span> </div>";a.spinExist=1;return f}function D(a,b){var d=a+"?clickthru="+encodeURIComponent(b)+"&clickTAG="+encodeURIComponent(b)+"&clickTag="+encodeURIComponent(b)+"&clickTarget=_blank";return'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+d+'"><param name="allowScriptAccess" value="always"><param name="wmode" value="opaque"><param name="allowscriptaccess" value="always"><embed src="'+
d+'" quality="high" type="application/x-shockwave-flash" width="100%" height="100%" allowscriptaccess="always" wmode="opaque"></object>'}function L(){var f=a.elem,b=a.setup;f.style.position="relative";f.style.width=b.banner.width+"px";f.style.height=b.banner.height+"px";f.className+=" pe-banner";f.style.backgroundColor=b.banner.bgcolor||"#000";var d=M();m.log("html5 video support: "+d);var g=b.banner.video,c='<div class="hover-box" style="width:100%;height:100%;">',p=0;b.banner.flash&&E()&&(c+=D(b.banner.flash.swf,
b.banner.link),p=1,g||(c+=u()));if(g){"undefined"==typeof g.controls&&(g.controls=1);var n=b.banner.video.poster||"",c=c+('<div style="position: absolute; left: '+g.left+"px; top: "+g.top+"px; width: "+g.width+"px; height: "+g.height+"px; overflow: hidden; background: url("+n+') no-repeat center center; background-size: cover;">');if(-1<d){var c=c+(' <video preload="auto" class="pe-banner-video" autoplay '+(g.loop?"loop":"")+' webkit-playsinline="" muted="muted" poster="'+n+'" style="width: 100%; height: 100%; background-color: black;">'),
e;for(e in g.sources)c+='<source src="'+g.sources[e]+'" type="video/'+e+'">';c=c+" </video>"+u();b.banner.flash&&(c+='<a class="pe-link" href="'+b.banner.link+'" target="_blank" style="position:absolute; top:0; left:0; bottom:0; right:0; overflow:hidden;"></a>')}c+="</div>"}p||((p=b.banner.image)&&p.source&&(c+='  <img src="'+p.source+'" style="pointer-events: none; '+(g&&g.onTop?"":"position:absolute;left:0;top:0;")+'" alt="" />'),c+='<a class="pe-link" href="'+b.banner.link+'" target="_blank" style="position:absolute; top:0; left:0; bottom:0; right:0; overflow:hidden;">',
p=/MSIE (5|6)/.test(navigator.userAgent)?0:1,!p&&(g&&g.poster)&&(c+='<img src="'+g.poster+'" style="position: absolute; left: '+g.left+"px; top: "+g.top+"px; width: "+g.width+"px; height: "+g.height+'px;" />'),!a.spinExist&&a.setup.overlay&&(c+=u()),c+="</a>");c+="</div>";-1<d&&(g&&g.controls)&&(c+='<div class="pe-btn pe-btn-pause" style="position: absolute; left: '+g.left+"px; top: "+(g.top+g.height-28)+'px;"></div>');f.innerHTML=c;if(-1!==d){a.videoBanner=h(f,".pe-banner-video");a.spinImg=h(f,".pe-spin-img");
a.spinSec=h(f,".pe-spin-sec");d=h(f,".hover-box");d.onmouseenter=function(a){N()};d.onmouseleave=function(a){r()};if(d=h(f,".pe-link"))d.onclick=function(){s("pause");setTimeout(function(){r()},500)};a.videoBanner&&(a.videoBanner.volume=0,a.btnPauseBanner=h(f,".pe-btn-pause"),a.btnPauseBanner&&(a.btnPauseBanner.onclick=function(){s()}),a.videoBanner.addEventListener("ended",function(){m.log("banner video end");s("pause");b.banner.video.poster&&(a.videoBanner.style.display="none")}),a.videoBanner.addEventListener("timeupdate",
function(){}));k.addEventListener("mouseout",function(a){null===a.toElement&&null===a.relatedTarget&&(m.log("left window"),setTimeout(r,1))});a.setup.overlay&&a.setup.overlay.autolaunch&&setTimeout(t,500)}}function F(a){function b(d){var g=d/30,c=a.volume+g;1<c&&(c=1);try{a.volume=c}catch(h){}m.log("volume-up",d,a.className,a.volume,g,"paused=",a.paused);0.99>a.volume?(clearTimeout(a.timer),a.timer=setTimeout(function(){b(d+1)},150)):a.volume=1}clearTimeout(a.timer);a.paused&&a.duration?m.log("is paused",
a.buffered):(a.volume=0,a.muted=0,b(0))}function G(a){function b(d){try{a.volume-=0.1}catch(g){}m.log("volume-down",d,a.className,a.volume,"paused=",a.paused);0.1<a.volume?(clearTimeout(a.timer),a.timer=setTimeout(function(){b(d+1)},100)):(a.volume=0,m.log("vol=0"))}clearTimeout(a.timer);b(0)}function N(){m.log("hover on");a.bannerHoverTimer=setInterval(function(){if(a.spinImg){var f=Number(a.spinSec.innerHTML)-1;1>f?(t(),clearInterval(a.bannerHoverTimer)):a.spinSec.innerHTML=f}},1E3);a.setup.banner.sound&&
a.videoBanner&&F(a.videoBanner);a.spinImg&&(h(a.elem,".pe-spin-box").style.display="block",v(a.spinImg,"pe-spin-anim"))}function r(){m.log("hover off");clearInterval(a.bannerHoverTimer);a.spinImg&&(a.spinSec.innerHTML=a.setup.banner.timeout,h(a.elem,".pe-spin-box").style.display="none");a.videoBanner&&G(a.videoBanner);a.spinImg&&w(a.spinImg,"pe-spin-anim")}function M(){var a=k.createElement("video");if(!a.canPlayType)return-1;var b=a.canPlayType('video/ogg; codecs="theora, vorbis"');return b?"probably"===
b?1:0:(a=a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))?"probably"===a?1:0:-1}function E(){try{return"undefined"===typeof navigator.plugins||0===navigator.plugins.length?!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"]}catch(a){return!1}}function x(a,b,d){d&&b&&(d.style.display="block",(!0===d.paused||!0===d.ended)&&!a?a="play":!1===d.paused&&!a?a="pause":"0px 0px"===b.style.backgroundPosition&&(a="play"),"play"===a?(d.play(),b.style.backgroundPosition=
"-28px 0px"):(d.pause(),b.style.backgroundPosition="0px 0px"))}function s(f){x(f,a.btnPauseBanner,a.videoBanner)}function A(f){x(f,a.btnPauseOverlay,a.videoOverlay)}function h(a,b){var d=null;a.querySelectorAll?d=a.querySelectorAll(b)[0]:"."===b[0]&&a.getElementsByClassName&&(d=a.getElementsByClassName(b.substring(1,999)));return d}function t(){function f(){clearInterval(a.closeTimer);w(r,"pe-spin-anim");A();t.style.display="none"}function b(){if(void 0===c.top){var b=(window.innerHeight-c.height)/
2;0>b&&(b=0);h(a.overlay,".pe-overlay-box").style.top=b+"px"}}for(var d=k.getElementsByTagName("video"),g=0;g<d.length;g++)d[g].pause();var c=a.setup.overlay,g=k.createElement("div"),p=a.setup.overlay.video&&a.setup.overlay.video.poster||a.setup.banner.video&&a.setup.banner.video.poster||"",d=c.width/2,n=0;c.left&&(d+=c.left);var e;e='<div id="pe-overlay"><div class="pe-background" style="position: fixed; cursor: pointer; -webkit-user-select: none; overflow: visible; z-index: 16777270; width: 100%; height: 100%; top: 0px; left: 0px; opacity: 1; background-color: rgba(0, 0, 0, 0.8);"></div>'+
('<div class="pe-overlay-box" style="position: fixed; top:'+(c.top||0)+"px; width:"+c.width+"px; right:50%; margin-right:-"+d+'px; overflow:hidden; z-index: 16777271;">');e+=' <div class="pe-overlay-container" style="background: '+(c.bgcolor||"#000")+"; position: relative; margin:auto; width: "+c.width+"px; height: "+c.height+'px; -webkit-user-select: none; opacity: 1;">';c.flash&&E()&&(n=1,e+=D(c.flash.swf,c.link));c.image&&(c.image.source&&!n)&&(e+='<img src="'+c.image.source+'" style="position:absolute;top:0;left:0;width:100%;height:100%;" alt="" />');
if(d=a.setup.overlay.video){e+='   <div style="position: absolute; left: '+d.left+"px; top: "+d.top+"px; width: "+d.width+"px; height: "+d.height+"px; cursor: pointer; overflow: hidden; background:url("+p+') no-repeat; background-size: cover;">';e+='    <video preload="auto" class="pe-overlay-video" autoplay webkit-playsinline="" poster="'+p+'" style="width: 100%; height: 100%; background-color: black;">';var p=d.sources||a.setup.banner.video&&a.setup.banner.video.sources||{},l;for(l in p)e+='<source src="'+
p[l]+'" type="video/'+l+'">';e+="    </video>"}e+="   </div>";n||(e+='   <a class="pe-link" href="'+(c.link||a.banner.link)+'" target="_blank" style="position:absolute; top:0; left:0; right:0; bottom:0;">',c.image&&(c.image.source&&d&&!d.onTop)&&(e+='<img src="'+c.image.source+'" style="position:absolute;top:0;left:0;width:100%;height:100%;" alt="" />'),e+="   </a>");e+='   <img class="pe-close" src="'+a.base_url+'img/close2.png?1" style="z-index:999; cursor: pointer; position: absolute; width: 32px; height: 32px; right: 7px; top: 7px;" title="Zav\u0159\u00edt">';
d&&(e+='<div class="hover-video-box" style="position: absolute; left: '+d.left+"px; top: "+d.top+"px; width:"+d.width+"px; height:"+d.height+'px; background:rgba(0,0,0,0);"> <a class="pe-link-hover" href="'+(c.link||a.banner.link)+'" target="_blank" style="position:absolute; top:0; left:0; right:0; bottom:0;"></a> <div class="video-bar" style="position:absolute;left:0; bottom:0;">  <div class="pe-btn pe-btn-pause" title="Pauza"></div>  <div class="pe-btn pe-btn-mute" title="Ztlumit" style="background: url('+
a.base_url+'img/mute.png) 0px 0px no-repeat;"></div>  <div style="float:left; line-height: 29px;"><span class="pe-video-current-time" style="line-height: 29px;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black; margin-left:10px;"></span></div> </div></div>');c.social&&(l=c.social,e+='<div style="position:absolute; top:'+(c.social.top||2)+"px; left:"+(c.social.left||2)+'px;">',l.facebook&&l.facebook.like&&(e+='<iframe src="https://www.facebook.com/plugins/like.php?href='+encodeURIComponent(l.facebook.like)+
'&amp;width=450&amp;height=21&amp;colorscheme=dark&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;send=false" allowtransparency="true" scrolling="no" frameborder="0" border="0" style="position: static; border: none; overflow: hidden; width: 150px; height: 20px; background-color: transparent;"></iframe>'),l.twitter&&l.twitter.follow&&(e+='<iframe src="https://platform.twitter.com/widgets/follow_button.html?screen_name='+encodeURIComponent(l.twitter.follow)+'&amp;show_count=false" allowtransparency="true" scrolling="no" frameborder="0" border="0" style="position: static; border: none; overflow: hidden; width: 150px; height: 20px; background-color: transparent;"></iframe>'),
l.google&&l.google.plus&&(e+='<iframe src="https://plusone.google.com/_/+1/fastbutton?bsv&amp;size=medium&amp;hl=en-US&amp;url='+encodeURIComponent(l.google.plus)+'" allowtransparency="true" frameborder="0" scrolling="no" title="+1" style="height: 20px;"></iframe>'),e+="</div>");d&&(e+='   <div class="pe-spin-box" style="display:none;position: absolute; width: 64px; height: 64px; left: '+(d.left+d.width/2-32)+"px; top: "+(d.top+d.height/2-32)+'px;">',e+='     <img src="'+a.base_url+'img/big-loading-bg.png" style="position: absolute; width: 64px; height: 64px; left:0; top:0;">',
e+='     <img src="'+a.base_url+'img/big-loading.png" class="pe-spin" style="position: absolute; width: 64px; height: 64px; left:0; top:0;">',e+='     <span class="pe-spin-sec">10</span>',e+='     <img class="pe-replay" src="'+a.base_url+'img/big-replay.png" style="cursor: pointer; position: absolute; width: 64px; height: 64px; left: -100px; top: 0px;" title="P\u0159ehr\u00e1t znovu">',e+='     <img class="pe-big-close" src="'+a.base_url+'img/big-close.png" style="cursor: pointer; position: absolute; width: 64px; height: 64px; right: -100px; top: 0px;" title="Zav\u0159\u00edt">',
e+="   </div>");e+="  </div></div></div>";c.impression&&(e+='<div style="width: 1px; height:1px; position: absolute; top:-1000px; left: -1000px;">'+c.impression+"</div>");g.innerHTML=e;try{v(k.body,"pe-overflow-hidden"),v(k.documentElement,"pe-overflow-hidden")}catch(u){}(l=k.getElementById("pe-overlay"))&&l&&l.parentNode&&l.parentNode.removeChild(l);k.body.appendChild(g);a.overlay=k.getElementById("pe-overlay");a.videoOverlay=h(a.overlay,".pe-overlay-video");if(g=h(a.overlay,".pe-link"))g.onclick=
function(){s("pause");A("pause")};if(g=h(a.overlay,".pe-link-hover"))g.onclick=function(){s("pause");A("pause")};c.autolaunch&&(a.videoOverlay.volume=0,y(1),g=h(a.overlay,".hover-video-box"),g.onmouseenter=function(b){m.log("video mouseenter");y(0);setTimeout(function(){F(a.videoOverlay)},500)},g.onmouseleave=function(b){m.log("video mouseleave");y(1);a.videoOverlay.muted=!1;G(a.videoOverlay)});var r=h(a.overlay,".pe-spin"),t=h(a.overlay,".pe-spin-box"),B=h(a.overlay,".pe-spin-sec");clearInterval(a.closeTimer);
h(a.overlay,".pe-background").onclick=function(){z()};h(a.overlay,".pe-close").onclick=function(){z()};d&&(h(a.overlay,".pe-big-close").onclick=function(){z()},h(a.overlay,".pe-replay").onclick=f,h(a.overlay,".pe-btn-mute").onclick=function(){y()},a.btnPauseOverlay=h(a.overlay,".pe-btn-pause"),a.btnPauseOverlay.onclick=f);window.removeEventListener("resize",b);window.addEventListener("resize",b);b();if(d){var x=h(a.overlay,".pe-video-current-time");a.videoOverlay.addEventListener("timeupdate",function(){var a=
Math.floor(100*this.currentTime/this.duration);a>q&&(q=a);var b=this.duration-this.currentTime,b=Math.floor(b||0),a=Math.floor(b/60),b=b%60;10>a&&(a="0"+a);10>b&&(b="0"+b);x.innerHTML="- "+(a+":"+b)});a.videoOverlay.addEventListener("ended",function(){m.log("overlay video end");C();v(r,"pe-spin-anim");t.style.display="block";a.videoOverlay.style.display="none";B.innerHTML=10;a.closeTimer=setInterval(function(){var b=Number(B.innerHTML)-1;1>b?(z(),clearInterval(a.closeTimer)):B.innerHTML=b},1E3)})}}
function z(){C();clearInterval(a.closeTimer);var f=a.overlay;f&&f.parentNode&&f.parentNode.removeChild(f);for(var f=k.getElementsByTagName("video"),b=0;b<f.length;b++)-1<f[b].className.indexOf("pe-banner-video")&&f[b].play();try{w(k.body,"pe-overflow-hidden"),w(k.documentElement,"pe-overflow-hidden")}catch(d){}}function y(f){var b=h(a.overlay,".pe-btn-mute");void 0===f&&"0px 0px"===b.style.backgroundPosition&&(f=1);f?(a.videoOverlay.muted=!0,b.style.backgroundPosition="-28px 0px"):(a.videoOverlay.muted=
!1,b.style.backgroundPosition="0px 0px")}function C(){q<=H||(!a.setup.id||!q)||(m.log("send stat",a.setup.id,q),k.createElement("img").src=O+"?id="+a.setup.id+"&cookieId="+P+"&percent="+q,H=q)}function v(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function w(a,b){a.classList?a.classList.remove(b):a.className=" "+a.className.replace(" "+b,"")}var k=document,I=window,m=-1<k.cookie.indexOf("ts.debug=1")&&I.console||{log:function(){},error:function(){},warn:function(){},info:function(){},debug:function(){}},
q=0,H=0,a=this;a.setup=n;a.spinExist=0;a.closeTimer=null;var P=function(){var a=document.cookie.match(/_tmVidUid=([^;=]+)/);if(a)return m.log("user cook exist:",a[1]),a[1];I.location.hostname.split(".").slice(-2).join(".");a=Math.floor(99999999*Math.random())+1;document.cookie="_tmVidUid="+a+";path=/;expire="+(new Date("2030")).toUTCString()+";";m.log("user cook new:",a);return a}();a.elem=n.name?k.getElementById(n.name):J();if(a.elem&&n){a.base_url=window.videoBaseUrl||window.location.protocol+"//www.performax.cz/js/tmadvideo/";
var O=window.videoBaseStatUrl||window.location.protocol+"//www.performax.cz/video/ad/stat/set";m.log("base",a.base_url);K();L();window.addEventListener("beforeunload",C)}}function forAsync(){var n=window.tsVideoAd&&window.tsVideoAd.shift()||window.tmAdVideo&&window.tmAdVideo.shift();n&&new Banner(n)}forAsync();
//# sourceMappingURL=tmadvideo.js.map
