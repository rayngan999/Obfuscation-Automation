(this["webpackJsonp@zmedia/zmp3-desktop"]=this["webpackJsonp@zmedia/zmp3-desktop"]||[]).push([[17],{1461:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var a=function(e){return e.nonLogged.recentSongs},c=function(e){return e.nonLogged.recentPlaylists}},1468:function(e,t,n){"use strict";var a=n(0);t.a=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}},1574:function(e,t,n){},1575:function(e,t,n){},1576:function(e,t,n){},1577:function(e,t,n){},1656:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n(8),r=n(0),l=n.n(r),i=n(173),o=n(82),u=n(2),m=n(15),s="/home",f={get:function(e){return Object(m.b)((function(){return Object(m.c)(s,{page:e})}))}},b=n(1),d=n(47);function E(e){var t=e.chart;return l.a.createElement(b.e,null,l.a.createElement(b.e.Image,{className:"banner-image"},l.a.createElement(d.a,{to:t.link},l.a.createElement(b.x,{src:t.cover}))))}var O=l.a.memo((function(e){var t=e.items,n=void 0===t?[]:t;return l.a.createElement(b.i,{className:"mar-t-20"},l.a.createElement(b.h,{multiline:!0},n.map((function(e){return t=e,l.a.createElement(b.h.Column,{key:"weekChart.item.".concat(t.link),fullhd:4,widescreen:4,desktop:4,touch:4,tablet:4},l.a.createElement(E,{chart:t}));var t}))))})),h=n(39),j=n(54),g=n(10),v=n(16),p=n.n(v),k=n(22);n(1574);var y=Object(r.memo)((function(e){var t=new Array(10).fill(0);return l.a.createElement(b.l,{className:"mix-item mix-loader"},l.a.createElement(k.o,null,l.a.createElement(k.o.Side,{align:"left"},l.a.createElement(k.o.Item,null,l.a.createElement(p.a,{width:170,height:170,duration:2})),l.a.createElement(k.o.Item,{className:"zm-mix-info"},l.a.createElement(p.a,{width:180,height:10,duration:2}),l.a.createElement(p.a,{width:150,height:10,duration:2}),l.a.createElement(p.a,{className:"zm-modified-counter",width:50,height:10,duration:2}))),l.a.createElement(k.o.Side,{align:"right"},l.a.createElement(k.o.Item,null,l.a.createElement(k.p,null,t.map((function(e,t){return l.a.createElement(k.p.Item,{key:t},l.a.createElement(p.a,{duration:2,height:10}))})))))))}));function N(e){var t=e.countItem,n=new Array(void 0===t?3:t).fill(0);return l.a.createElement(l.a.Fragment,null,n.map((function(e,t){return l.a.createElement(y,{key:t})})))}Object(r.memo)(N);var I=n(6),A=n(51),C=n(24),M=(n(1575),function(e){var t=e.source;return l.a.createElement(b.l,{className:"zm-partner-item"},l.a.createElement(b.l,{className:"content"},l.a.createElement(b.x,{src:t})))}),x=Object(r.memo)((function(){var e=Object(I.c)(A.f),t=Object(r.useMemo)((function(){var t=e||{},n=t.title,a=t.items,c=void 0===a?[]:a,r=t.isShuffle;return{title:n,items:void 0===r||r?C.Array.shuffle(c):c}}),[e]),n=Object(g.o)(),a=n.Modal,c=n.show,i=n.hide;return t?l.a.createElement(b.i,{className:"zm-partner-section"},l.a.createElement(b.M,null,l.a.createElement(b.l,{renderAs:"span",onClick:c},t.title)),l.a.createElement(b.h,{multiline:!0},null===t||void 0===t?void 0:t.items.slice(0,8).map((function(e,t){return function(e,t){return l.a.createElement(b.h.Column,{key:t,widescreen:3,fullhd:3,desktop:3,touch:3,tablet:3},l.a.createElement(M,{source:e}))}(e,t)}))),l.a.createElement(a,null,l.a.createElement(b.l,{className:"zm-partner-modal"},l.a.createElement(b.M,null,t.title),null===t||void 0===t?void 0:t.items.map((function(e,t){return l.a.createElement(b.h.Column,{key:t,widescreen:20,fullhd:20,desktop:20,touch:3,tablet:3},l.a.createElement(M,{source:e}))})),l.a.createElement(b.O,{title:"\u0110\xf3ng",icon:"close",className:"close-btn",onClick:i})))):l.a.createElement(l.a.Fragment,null)}));var w=Object(r.memo)((function(){var e=Object(r.useCallback)((function(e){return j.c.getMix(e)}),[]),t=Object(g.l)(e),n=Object(a.a)(t,1)[0];return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.b,{items:n.items,sectionId:n.sectionId}),n.isFetching&&l.a.createElement(N,null),!n.hasMore&&!n.isFetching&&l.a.createElement(x,null))})),F=n(11),R=n.n(F),z=n(18),P=n(21),S=n(118),L=n(366),_=n(1468),B=n(42),D=n(76),T=n(77),Z=n(17),J=n(129),G=n(7),Q=n(243);n(1576);var V,Y=function(e){var t=e.slide,n=e.sectionId,c=Object(r.useRef)(null),i=Object(I.b)(),o=Object(g.t)(),m=Object(a.a)(o,1)[0],s=Object(g.r)(),f=Object(a.a)(s,1)[0],d=Object(Q.a)().playVideo;Object(g.a)(t.tracking,c);var E=Object(r.useMemo)((function(){return Object(T.b)(t.link)}),[t.link]),O=Object(r.useCallback)((function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.e.Image,null,l.a.createElement(b.x,{src:t.banner})),l.a.createElement(b.e.Content,null,l.a.createElement(b.M,{renderAs:"div"},t.title),l.a.createElement(b.M,{subtitle:!0},t.description)))}),[t]),h=Object(r.useCallback)(function(){var e=Object(z.a)(R.a.mark((function e(a){var c,r,l,o;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.link.includes("/bai-hat/")){e.next=16;break}return a.preventDefault(),e.prev=2,e.next=5,J.a.getInfo(t.encodeId);case 5:c=e.sent,(r=c.data).sectionId=n,l={song:r,playSongFn:function(){f.playSong(r,{forcePlay:!0})},addToQueueFn:function(e){return m.add(r,void 0,e)}},i(Object(Z.o)({type:u.z.FROM_BANNER,option:l})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),e.t0&&G.j.error(e.t0.err,"Banner | Play song | encodeId | link | title | Error",t.encodeId,t.link,t.title,e.t0);case 16:t.link.includes("/video-clip/")&&(a.preventDefault(),(o={encodeId:t.encodeId}).sectionId=n,d(o));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return l.a.createElement(b.e,{domRef:c},E?l.a.createElement(b.l,{renderAs:"a",href:t.link,target:"_blank"},O()):l.a.createElement(B.b,{title:t.title,onClick:h,to:{pathname:t.link,state:{sectionId:n}}},O()))},q=Object(r.memo)((function(e){var t=e.items,n=e.pause,c=void 0===n?"hover":n,i=e.interval,o=void 0===i?5e3:i,u=e.sectionId,m=Object(r.useRef)(null),s=[],f=[],d=Object(r.useState)(!1),E=Object(a.a)(d,2),O=E[0],h=E[1],j=Object(r.useState)(C.Array.shuffle(t)),g=Object(a.a)(j,1)[0],v=Object(I.c)(D.c),p=Object(r.useState)(["gallery-item-selected","gallery-item-next","gallery-item-last","gallery-item-first","gallery-item-previous"]),k=Object(a.a)(p,2),y=k[0],N=k[1],A=Object(r.useMemo)((function(){var e=Object(P.a)(g);return v[S.b.BANNER_ZID]&&(e=C.Array.insert(e,v[S.b.BANNER_ZID],C.Number.random(0,e.length-1))),v[S.b.BANNER_MP3_ZID]&&(e=C.Array.insert(e,v[S.b.BANNER_MP3_ZID],3)),e}),[g,v]);Object(r.useEffect)((function(){var e=A.length-y.length;if(e>0){var t=Object(P.a)(Array(e)).map((function(){return"gallery-item-add"}));t=C.Array.insert(Object(P.a)(y),t,3),N(t)}}),[A]);var M=Object(_.a)(y);Object(r.useEffect)((function(){x(),w()}),[y]);var x=function(){for(var e=0;e<y.length;e++){var t=y[e],n=s[e];n&&(M&&n.classList.remove(M[e]),n.classList.add(t))}},w=function(){f.forEach((function(e){e.classList.remove("nav-item-selected")})),y.forEach((function(e,t){"gallery-item-selected"===e&&f[t]&&f[t].classList.add("nav-item-selected")}))},F=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],c=Object(P.a)(n.length>0?n:y);return t?(e=c.pop())&&(a=[e].concat(Object(P.a)(c))):(e=c.shift())&&(a=[].concat(Object(P.a)(c),[e])),a&&N(a),a},R=Object(r.useCallback)((function(e){"hover"===c&&h(!0)}),[c]),z=Object(r.useCallback)((function(e){h(!1)}),[c]),B=null!=o&&!O,T=Object(r.useRef)(1);return Object(r.useEffect)((function(){if(B)return T&&T.current&&(T.current=setInterval((function(){F(!0)}),o)),function(){clearInterval(T.current)}}),[B,F,o]),l.a.createElement(b.i,null,l.a.createElement(b.l,{className:"gallery"},l.a.createElement(b.l,{className:"gallery-container",domRef:m,onMouseEnter:R,onMouseLeave:z},l.a.createElement(b.l,{className:"zm-gallery-prev",onClick:function(){return F(!1)}},l.a.createElement(L.a,{type:"prev",classNameIcon:"ic-go-left",enable:!0})),A.map((function(e,t){return l.a.createElement(b.l,{className:"gallery-item",key:"".concat(t,"-").concat(e.encodeId),domRef:function(e){return s[t]=e}},l.a.createElement(Y,{slide:e,sectionId:u}))})),l.a.createElement(b.l,{className:"zm-gallery-next",onClick:function(){return F(!0)}},l.a.createElement(L.a,{type:"next",classNameIcon:"ic-go-right",enable:!0})))))})),H=n(45),K=n(13),U=n(175),W=n(174),X=n(368),$=n(376),ee=n(1461),te=function(e){var t=Object(I.c)(ee.a);return l.a.createElement($.a,Object.assign({},e,{items:t}))},ne=(n(1577),V={weekChart:O},Object(c.a)(V,u.P.BANNER,q),Object(c.a)(V,u.P.SONG,H.g),Object(c.a)(V,u.P.RECENT_PLAYLIST,te),V);var ae=Object(r.memo)((function(){var e=Object(I.b)(),t=Object(I.c)(K.f),n=Object(I.c)(U.c),c=Object(I.c)(D.a);Object(W.g)();var u=Object(r.useCallback)((function(e){return f.get(e)}),[]),m=Object(g.m)(u,{rootMargin:"300px"}),s=Object(a.a)(m,3),b=s[0],d=s[1],E=s[2];return Object(r.useEffect)((function(){t>0&&E.refresh()}),[t]),Object(r.useEffect)((function(){d.isFetching||"/"!==n.path||E.refresh()}),[n]),Object(r.useEffect)((function(){return c&&e(Object(X.d)()),function(){c&&e(Object(X.c)())}}),[c]),l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{error:d.err,loading:d.isFetching,currentPage:d.currentPage},Object(h.f)(d.items,ne),d.isFetching?l.a.createElement(o.a,null):null,d.hasMore&&!d.isFetching&&l.a.createElement("div",{ref:b,style:{marginTop:"-300px",height:"1px"}}),!d.hasMore&&l.a.createElement(l.a.Fragment,null,l.a.createElement(w,null))))}));t.default=ae}}]);