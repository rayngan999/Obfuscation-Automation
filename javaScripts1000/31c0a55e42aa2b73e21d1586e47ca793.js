(window.wpJsonpCambly=window.wpJsonpCambly||[]).push([[54],{305:function(t,e,n){"use strict";n.r(e),n.d(e,"UserPromoCode",(function(){return y})),n.d(e,"UserPromoCodes",(function(){return d}));var r=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){a(n,t);var e=s(n);function n(){return u(this,n),e.apply(this,arguments)}return c(n,null,[{key:"collection",value:function(){return"user_promo_codes"}}]),n}(r.b),d=function(t){a(n,t);var e=s(n);function n(){return u(this,n),e.apply(this,arguments)}return c(n,null,[{key:"forUser",value:function(t,e,n){return n?this.fetch({user:t,activeOnly:e,sort:-1,limit:1}):this.fetch({user:t,activeOnly:e})}},{key:"forCode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetchQuery({code:t,activeOnly:e},{scrub:!1})}},{key:"sorted",value:function(t){return r.a.sortByCreation(t)}}]),n}(r.a);d.register(y)},310:function(t,e,n){"use strict";n.r(e),n.d(e,"UrlVisit",(function(){return p})),n.d(e,"UrlVisits",(function(){return y}));var r=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){c(a,t);var e,n,r,o=f(a);function a(){return u(this,a),o.apply(this,arguments)}return e=a,r=[{key:"collection",value:function(){return"url_visits"}},{key:"record",value:function(){return a.$create({url:window.location.href,pageId:cambly.PAGE_ID},{scrub:!0})}}],(n=null)&&i(e.prototype,n),r&&i(e,r),a}(r.b),y=function(t){c(n,t);var e=f(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r.a);y.register(p)},311:function(t,e,n){"use strict";n.r(e),n.d(e,"WeeklyUsage",(function(){return l})),n.d(e,"WeeklyUsages",(function(){return p}));var r=n(280);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._WeeklyUsage),p=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._WeeklyUsages);p.register(l)},312:function(t,e,n){"use strict";n.r(e),n.d(e,"YearlyStudentStat",(function(){return m})),n.d(e,"YearlyStudentStats",(function(){return g}));var r=n(27),o=n(281);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b,h,v,m=function(t){s(n,t);var e=p(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(o._YearlyStudentStat),g=function(t){s(u,t);var e,n,r,o=p(u);function u(){return f(this,u),o.apply(this,arguments)}return e=u,r=[{key:"byStudentId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_DOCUMENTS":case"UPDATE_DOCUMENTS":var n=new Map(i(t));return e.documents.forEach((function(t){n.set(t.studentId,t)})),n;default:return t}}}],(n=null)&&a(e.prototype,n),r&&a(e,r),u}(o._YearlyStudentStats);b=g,h="reducers",v=Object(r.combineReducers)({all:g.all,metadata:g.metadata,byStudentId:g.byStudentId}),h in b?Object.defineProperty(b,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[h]=v,g.register(m)},313:function(t,e,n){"use strict";n.r(e),n.d(e,"YearlyTutorStat",(function(){return m})),n.d(e,"YearlyTutorStats",(function(){return g}));var r=n(27),o=n(282);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b,h,v,m=function(t){s(n,t);var e=p(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(o._YearlyTutorStat),g=function(t){s(u,t);var e,n,r,o=p(u);function u(){return f(this,u),o.apply(this,arguments)}return e=u,r=[{key:"byTutor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_DOCUMENTS":case"UPDATE_DOCUMENTS":var n=new Map(i(t));return e.documents.forEach((function(t){n.set(t.tutorId,t)})),n;default:return t}}}],(n=null)&&a(e.prototype,n),r&&a(e,r),u}(o._YearlyTutorStats);b=g,h="reducers",v=Object(r.combineReducers)({all:g.all,metadata:g.metadata,byTutor:g.byTutor}),h in b?Object.defineProperty(b,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[h]=v,g.register(m)},315:function(t,e,n){"use strict";n.r(e),n.d(e,"UserPaymentInfo",(function(){return _})),n.d(e,"UserPaymentInfos",(function(){return O}));var r=n(27),o=n(3),u=n(443);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v,m,g,_=function(t){p(n,t);var e=d(n);function n(){return f(this,n),e.apply(this,arguments)}return l(n,null,[{key:"collection",value:function(){return"user_payment_infos"}}]),n}(u._UserPaymentInfo),O=function(t){p(n,t);var e=d(n);function n(){return f(this,n),e.apply(this,arguments)}return l(n,null,[{key:"forUser",value:function(t){return this.fetch({user:t})}},{key:"byUser",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_DOCUMENTS":case"UPDATE_DOCUMENTS":var n=new Map(c(t));return e.documents.forEach((function(t){var e=c(n.get(t.userId)||[]),r=e.findIndex((function(e){return e.id===t.id}));r>=0?e[r]=t:e.push(t),n.set(t.userId,e)})),n;default:return t}}}]),n}(u._UserPaymentInfos);v=O,m="reducers",g=Object(r.combineReducers)({all:o.a.all,metadata:o.a.metadata,byUser:O.byUser}),m in v?Object.defineProperty(v,m,{value:g,enumerable:!0,configurable:!0,writable:!0}):v[m]=g,O.register(_)},317:function(t,e,n){"use strict";n.r(e),n.d(e,"DIALECT_LIST",(function(){return g})),n.d(e,"TutorProfile",(function(){return _})),n.d(e,"TutorProfiles",(function(){return O}));var r=n(27),o=n(3),u=n(365);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v(t);if(e){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={en:{uscanada:"North America",uscanada_canada:"Canada",uscanada_usa:"USA",uscanada_southern:"USA - Southern USA",uscanada_other:"North America - Other",uk:"United Kingdom / Republic of Ireland",uk_rp:"British - Received Pronunciation",uk_ireland:"Ireland",uk_scotland:"Scotland",uk_other:"British Isles - Other",uk_southafrica:"South Africa",australianewzealand:"Australia / New Zealand",australianewzealand_aus:"Australia",australianewzealand_nz:"New Zealand",other:"Other"}},_=function(t){p(n,t);var e=d(n);function n(){var t;f(this,n);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return m(h(t=e.call.apply(e,[this].concat(o))),"copyOverFromForKids",(function(e){return t.update({location:e.from,introBlurb:e.introBlurb,teachingStyle:e.teachingStyle,aboutMe:e.aboutMe,spokenLanguages:e.spokenLanguages,workExperience:e.workExperience,education:e.education})})),m(h(t),"getProfileVideoUrl",(function(){return t.publicVideoArchiveId?"".concat(t.endpoint(),"/profile_video"):null})),m(h(t),"isComplete",(function(){return!!(t.introBlurb&&t.publicVideoArchiveId&&t.teachingStyle&&t.aboutMe&&t.from&&(t.spokenLanguages||[]).length>0)})),m(h(t),"hasBeenEdited",(function(){return!!(t.introBlurb||t.publicVideoArchiveId||t.teachingStyle||t.aboutMe||t.from||(t.spokenLanguages||[]).length>0||(t.education||[]).length>0||(t.workExperience||[]).length>0)})),t}return l(n,[{key:"isNewTalent",value:function(){return this.reviewCount()<n.newTalentMaxReviews}},{key:"isSuperTutorDeprecated",value:function(){return this.reviewCount()>=n.superTutorMinReviews&&this.ratingNumber()>=n.superTutorMinRating}},{key:"ratingNumber",value:function(){return((this.rating||{}).en||{}).rating}},{key:"reviewCount",value:function(){return((this.rating||{}).en||{}).numReviews||0}},{key:"roundRating",value:function(t){var e=t||2,n=Math.round(100*this.ratingNumber())/100;return(n=Math.round(n*Math.pow(10,e))/Math.pow(10,e)).toFixed(e)}}]),n}(u._TutorProfile);m(_,"newTalentMaxReviews",50),m(_,"superTutorMinReviews",700),m(_,"superTutorMinRating",4.895);var O=function(t){p(n,t);var e=d(n);function n(){return f(this,n),e.apply(this,arguments)}return l(n,null,[{key:"byTutor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_DOCUMENTS":case"RECEIVE_DOCUMENTS":var n=new Map(c(t));return e.documents.forEach((function(t){var e=t.tutorId,r=t.platform,o=new Map(c(n.get(e)||new Map));o.set(r,t),n.set(e,o)})),n;default:return t}}}]),n}(u._TutorProfiles);m(O,"reducers",Object(r.combineReducers)({all:o.a.all,metadata:o.a.metadata,byTutor:O.byTutor})),O.register(_)},360:function(t,e,n){"use strict";n.r(e),n.d(e,"UserAgreement",(function(){return l})),n.d(e,"UserAgreements",(function(){return p}));var r=n(441);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._UserAgreement),p=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._UserAgreements);p.register(l)},361:function(t,e,n){"use strict";n.r(e),n.d(e,"UserProdCsv",(function(){return l})),n.d(e,"UserProdCsvs",(function(){return p}));var r=n(444);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._UserProdCsv),p=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._UserProdCsvs);p.register(l)},362:function(t,e,n){"use strict";n.r(e),n.d(e,"UserRole",(function(){return m})),n.d(e,"UserRoles",(function(){return g}));var r=n(27),o=n(445);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b,h,v,m=function(t){s(n,t);var e=p(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(o._UserRole),g=function(t){s(u,t);var e,n,r,o=p(u);function u(){return f(this,u),o.apply(this,arguments)}return e=u,r=[{key:"byUser",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_DOCUMENTS":case"UPDATE_DOCUMENTS":var n=new Map(i(t));return e.documents.forEach((function(t){n.set(t.userId,t)})),n;default:return t}}}],(n=null)&&a(e.prototype,n),r&&a(e,r),u}(o._UserRoles);b=g,h="reducers",v=Object(r.combineReducers)({all:g.all,metadata:g.metadata,byUser:g.byUser}),h in b?Object.defineProperty(b,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[h]=v,g.register(m)},368:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorReview",(function(){return p})),n.d(e,"TutorReviews",(function(){return y}));var r=n(366);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){c(a,t);var e,n,r,o=f(a);function a(){return u(this,a),o.apply(this,arguments)}return e=a,r=[{key:"collection",value:function(){return"tutor_reviews"}}],(n=null)&&i(e.prototype,n),r&&i(e,r),a}(r._TutorReview),y=function(t){c(n,t);var e=f(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorReviews);y.register(p)},378:function(t,e,n){"use strict";n.r(e),n.d(e,"UserGroup",(function(){return b})),n.d(e,"UserGroups",(function(){return h}));var r=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){s(n,t);var e=p(n);function n(){return c(this,n),e.apply(this,arguments)}return f(n,[{key:"addStudent",value:function(t){var e=this.$mutable();return Array.isArray(t)?t.forEach((function(t){e.$push("userIds",t)})):e.$push("userIds",t),e.$save()}},{key:"removeStudent",value:function(t){var e=this.$mutable();return Array.isArray(t)?t.forEach((function(t){e.$pull("userIds",t)})):e.$pull("userIds",t),e.$save()}},{key:"toggleMembership",value:function(t){this.hasMember(t)?this.removeStudent(t):this.addStudent(t)}},{key:"hasMember",value:function(t){return this.userIds.includes(t)}}],[{key:"collection",value:function(){return"user_groups"}},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regulars",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.$create({creatorId:t,name:e,userIds:n},{scrub:!0})}},{key:"forName",value:function(t,e,n){return u(t.values()).find((function(t){return t&&t.creatorId===e&&t.name===n}))}}]),n}(r.b),h=function(t){s(n,t);var e=p(n);function n(){return c(this,n),e.apply(this,arguments)}return f(n,null,[{key:"forCreator",value:function(t){return this.fetch({creatorId:t}).done((function(e){u(e.documents.values()).find((function(t){return"regulars"===t.name}))||b.create(t,"regulars")}))}},{key:"getRegularStudents",value:function(t,e){return(b.forName(e,t,"regulars")||{}).userIds||[]}}]),n}(r.a);h.register(b)},43:function(t,e,n){"use strict";(function(t){n.d(e,"j",(function(){return l})),n.d(e,"L",(function(){return p})),n.d(e,"h",(function(){return y})),n.d(e,"k",(function(){return d})),n.d(e,"o",(function(){return b})),n.d(e,"e",(function(){return h})),n.d(e,"r",(function(){return v})),n.d(e,"a",(function(){return m})),n.d(e,"s",(function(){return g})),n.d(e,"b",(function(){return _})),n.d(e,"J",(function(){return O})),n.d(e,"A",(function(){return S})),n.d(e,"g",(function(){return w})),n.d(e,"y",(function(){return E})),n.d(e,"p",(function(){return R})),n.d(e,"u",(function(){return T})),n.d(e,"H",(function(){return I})),n.d(e,"v",(function(){return P})),n.d(e,"x",(function(){return j})),n.d(e,"d",(function(){return k})),n.d(e,"w",(function(){return A})),n.d(e,"F",(function(){return D})),n.d(e,"n",(function(){return C})),n.d(e,"E",(function(){return U})),n.d(e,"m",(function(){return M})),n.d(e,"I",(function(){return N})),n.d(e,"l",(function(){return x})),n.d(e,"c",(function(){return L})),n.d(e,"t",(function(){return V})),n.d(e,"K",(function(){return $})),n.d(e,"G",(function(){return F})),n.d(e,"q",(function(){return B})),n.d(e,"f",(function(){return H})),n.d(e,"i",(function(){return G})),n.d(e,"D",(function(){return W})),n.d(e,"C",(function(){return z})),n.d(e,"B",(function(){return K})),n.d(e,"z",(function(){return q}));var r=n(10),o=n.n(r),u=n(268),i=n(24),c=n(36),a=n(146),f=n(3),s=n(48);function l(){t.get("/now",{now:o()().valueOf()}).done((function(t){i.a.dispatch({type:"RECEIVE_NOW",now:t.now})}))}function p(e,n,r){return t.patch("/model/users/"+e,{ops:r}).done((function(t){var e=new f.c({viewAs:n,loadedBy:"model-users-patch"});new s.User(t.result.user,{metadata:e})._send_to_redux()}))}function y(e,n,r){var o=c.a.getItem("deviceId")||null;return t.get("/model/experiment/"+e+"/params",{userId:n,assign:r,deviceId:o}).done((function(t){i.a.dispatch(function(t,e,n){return{type:"RECEIVE_EXPERIMENT_PARAMS",userId:t,expName:e,expParams:n}}(n,e,t.result))}))}function d(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en",u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];!r||n.has(r)&&!u||t.get("/model/studentProfiles",{userId:r,language:o}).done((function(t){e({type:"RECEIVE_STUDENT_PROFILE",profile:t.result,userId:r})}))}function b(t){return{type:"OPEN_CONVERSATION",document:t}}function h(t){return{type:"CLOSE_CONVERSATION",document:t}}function v(t){return{type:"REMOVE_FLASH",flashName:t}}function m(t,e,n){return{type:"ADD_FLASH",flash:{attribute:e,message:n},flashName:t}}function g(t){return{type:"REMOVE_TOAST",toastName:t}}function _(t,e,n){return{type:"ADD_TOAST",toast:{attribute:e,message:n},toastName:t}}function O(t,e){return p(cambly.USER_ID,t,e)}function S(t,e){return{operation:"set",property:t,value:e}}function w(t){return{operation:"delete",property:t}}function E(t){return{type:"SET_CURRENT_CHAT",chat:t}}function R(t,e){return{type:"RECEIVE_CHATS",role:t,chats:e}}function T(t){return U("adminProfile",{userId:t})}function I(){return M("adminProfile")}function P(t,e){return{type:"RECEIVE_CHECKOUT_DATA",key:t,value:e}}function j(t,e){return{type:"RECEIVE_CHECKOUT_VALIDATION",key:t,value:e}}function k(t){return{type:"CLEAR_CHECKOUT_VALIDATION"}}function A(t,e){return{type:"RECEIVE_CHECKOUT_OPTIONS",key:t,value:e}}function D(t,e){return{type:"SHOW_PARENT_SWITCH_MODAL",instructionalText:t,next:e}}function C(){return{type:"HIDE_PARENT_SWITCH_MODAL"}}function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case"tutorProfile":return{type:"SET_TUTOR_PROFILE_MODAL",tutorId:e.tutorId};case"reservation":return{type:"SET_RESERVE_TUTOR_MODAL",tutorId:e.tutorId};case"reserveSession":return{type:"SET_RESERVE_SESSION_MODAL",modal:e.modal};case"adminProfile":return{type:"SET_ADMIN_PROFILE_MODAL",userId:e.userId};case"sessionCorrections":return{type:"SET_CORRECTIONS_MODAL",chatId:e.chatId};case"sessionVideo":return{type:"SET_SESSION_VIDEO_MODAL",chatId:e.chatId};case"sessionTextchats":return{type:"SET_SESSION_TEXTCHAT_MODAL",chatId:e.chatId};case"lessonInfo":return{type:"SET_LESSON_INFO_MODAL",chatId:e.chatId}}}function M(t){switch(t){case"tutorProfile":return{type:"HIDE_TUTOR_PROFILE_MODAL"};case"reservation":return{type:"HIDE_RESERVE_TUTOR_MODAL"};case"reserveSession":return{type:"HIDE_RESERVE_SESSION_MODAL"};case"adminProfile":return{type:"HIDE_ADMIN_PROFILE_MODAL"};case"sessionCorrections":return{type:"HIDE_CORRECTIONS_MODAL"};case"sessionVideo":return{type:"HIDE_SESSION_VIDEO_MODAL"};case"sessionTextchats":return{type:"HIDE_SESSION_TEXTCHAT_MODAL"};case"lessonInfo":return{type:"HIDE_LESSON_INFO_MODAL"}}}function N(e,n){t.patch("/model/chats/"+e,{ops:n}).done((function(t){i.a.dispatch(R("student",[t.result]))}))}function x(e){return t.get("/model/tutorVideo",{userId:e}).done((function(t){i.a.dispatch({type:"RECEIVE_VIDEOS",videos:t.result})}))}function L(t){return{type:"NEW_VIDEO",video:[t]}}function V(e){return t.delete("/model/tutorVideos",{videoId:e}).done((function(t){i.a.dispatch({type:"REMOVE_VIDEO",video:e})}))}function $(t,e,n){i.a.dispatch({type:"UPDATE_STUDENT_PROFILE",userId:t,field:e,value:n})}function F(e,n){t.post("/model/studentProfiles",{userId:e,data:n}).done((function(t){i.a.dispatch({type:"RECEIVE_STUDENT_PROFILE",userId:e,profile:t.result})}))}function B(t){return{type:"RECEIVE_CORRECTIONS",corrections:t}}function H(t){return{type:"DELETE_CORRECTION",correction:t}}function G(){document.hidden||FB.getLoginStatus((function(t){i.a.dispatch({type:"RECEIVE_FB_STATUS",loginResponse:t})}))}function W(t){return{type:"SET_STRIPE_SUBMIT",shouldSubmit:t}}function z(t){return{type:"SET_STRIPE_COMPLETE",isComplete:t}}function K(t){return{type:"SET_RAZORPAY_SUBMIT",submit:t}}function q(t,e){cambly.USER_ID=(t||{}).userId,i.a.dispatch(Object(u.a)([{type:"SET_CURRENT_USER",user:t,collection:s.Users},{type:"SET_CURRENT_SESSION",session:e,collection:a.Sessions}]))}}).call(this,n(45).default)},48:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"User",(function(){return A})),n.d(e,"Users",(function(){return D}));var r=n(10),o=n.n(r),u=n(27),i=n(37),c=n(3),a=n(15),f=n(146),s=n(108),l=n(43),p=(n(376),n(359)),y=n(36),d=n(442);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e,n,r,o,u,i){try{var c=t[u](i),a=c.value}catch(f){return void n(f)}c.done?e(a):Promise.resolve(a).then(r,o)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j(t);if(e){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?P(t):e}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=function(e){E(r,e);var n=T(r);function r(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.metadata,i=void 0===u?null:u;return O(this,r),k(P(e=n.call(this,t,{metadata:i})),"getPlanDescription",(function(t){var n="daily"===e.subscriptionInfo.type?7:e.subscriptionInfo.daysPerWeek,r=e.subscriptionInfo.minutesPerDay;switch(n){case 1:return t.t("{{numMinutes}} minute lesson, once per week",{numMinutes:r});case 2:return t.t("{{numMinutes}} minute lessons, twice per week",{numMinutes:r});default:return t.t("{{numMinutes}} minute lessons, {{numDays_threeOrMore}} times per week",{numMinutes:r,numDays_threeOrMore:n})}})),k(P(e),"getRenewalPeriodDescription",(function(t){var n=e.planMonths;switch(n){case 1:return t.t("Renews every month");case 2:return t.t("Renews every 2 months");case 12:return t.t("Renews yearly");default:return t.t("Renews every {{numMonths_threeOrMore}} months",{numMonths_threeOrMore:n})}})),k(P(e),"dismissCurriculumBanner",(function(){e.$mutable().$set("dismissedCurriculumBanner",!0).$save()})),k(P(e),"clickedTutorGuide",(function(){e.$mutable().$set("viewedNewTutorGuide",!0).$save()})),e.isTutor=e.isRole(a.default.TUTOR),e.isKidsTutor=e.isTutor&&!0===e.account.tutor.kids,e.isStudent=e.isRole(a.default.STUDENT),e.isParent=e.isRole(a.default.PARENT),e.isKid=e.isRole(a.default.KID),e.isCamblyAdmin=e.isRole(a.default.CAMBLY_ADMIN),e.isAmbassador=e.isRole(a.default.AMBASSADOR),e.isAmbassadorSignup=e.isRole(a.default.AMBASSADOR_SIGNUP),e.isTutorSignup=e.isRole(a.default.TUTOR_SIGNUP),e.isCurriculumDeveloper=e.isRole(a.default.CURRICULUM_DEVELOPER),e.isSupport=e.isRole(a.default.SUPPORT),e.isApprovedTutor=e.isTutor&&e.approved,e.isStudentSignup=e.isRole(a.default.STUDENT_SIGNUP),e.isStudentOnboarding=e.isRole(a.default.STUDENT_ONBOARDING),e}return w(r,null,[{key:"collection",value:function(){return"users"}}]),w(r,[{key:"isRole",value:function(t){return!!this.account&&(t===a.default.NONE||this.account[t]&&this.account[t].active)}},{key:"getFirstRole",value:function(t){var e=this;return t.find((function(t){return e.isRole(t)}))}},{key:"getAvatarUrl",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,n=[40,80,200,330,400];return"full"===e?this.avatarUrlDict[e]:(t=null!=n.find((function(t){return t===e}))?n.find((function(t){return t===e})):null!=n.find((function(t){return t%e==0}))?n.find((function(t){return t%e==0})):n.find((function(t){return t>=e})),this.avatarUrlDict[t])}},{key:"hasFreeTrial",value:function(){return"neverSubscribed"===this.getSubscriberStatus()&&this.allMinutes>0}},{key:"isMe",value:function(){return this.id===cambly.USER_ID}},{key:"isMyChild",value:function(){return this.parentId===cambly.USER_ID}},{key:"isMyParent",value:function(){return(this.kidIds||[]).includes(cambly.USER_ID)}},{key:"isBlockedFromReservationSlots",value:function(t){return this.reservationBlock&&this.reservationBlock[t]&&this.reservationBlock[t].until.$date>(new Date).valueOf()}},{key:"getSubscriberStatus",value:function(){return this.isMe()||this.isMyChild()?this.planUntil&&o.a.utc(this.planUntil).isAfter(o.a.utc())?"subscribed":this.paid?"subscriptionEnded":"neverSubscribed":this.paid?"subscribed":"neverSubscribed"}},{key:"hasActivePlan",value:function(){var t=this.getSubscriberStatus();return["subscribed","subscribedGroup"].includes(t)}},{key:"canReserveLessons",value:function(){return this.hasActivePlan()?"subscribedGroup"!==this.getSubscriberStatus():this.isKid?this.anytimeMinutes>=30:this.anytimeMinutes>=15}},{key:"getPlanDaysPerWeek",value:function(){return this.hasActivePlan()?this.planPerWeek||7:0}},{key:"profileUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.profileUrlPrefixFor(t,e,n);return"".concat(r).concat(this.userlink?this.userlink:this.id)}},{key:"profileUrlPrefixFor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return"/tutors/";var r=e?"".concat(window.location.protocol,"//").concat(window.location.host):"",o="en",u="".concat(r,"/").concat(o),i=r;return t.isKid?"".concat(i,"/kids/student/tutors/"):this.userlink?t.isTutor&&!e?"".concat(u,"/tutor/tutors/"):"".concat(u,"/student/tutors/"):"".concat(u,"/tutor/student/")}},{key:"adminUrl",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?"":"".concat(window.location.protocol,"//").concat(window.location.host),r="en",o=t?"admin/tutor":"admin/student";return"".concat(n,"/").concat(r,"/").concat(o,"/").concat(this.id)}},{key:"getDisplayName",value:function(){return this.displayName}},{key:"deleteKid",value:function(t){return this.$post("delete_kid",{kidId:t})}},{key:"openTutorProfileFor",value:function(t){window.open(t.profileUrl(this,!0),"_blank").focus()}}],[{key:"validateEmail",value:function(t){return null!==t&&null!==t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)}},{key:"wechatLogin",value:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.accountTypes,i=void 0===u?[]:u,c=o.showNav,a=void 0===c?null:c,f=$.Deferred();return t.post("/wechat/auth",{code:e,appId:n}).done((function(e){var n=e.result,o={wechatId:n.openId,wechatToken:n.token},u=_({},o);null!==a&&(u.showNav=a),t.post("/model/wechat_users",o).done((function(){r.login(u,{accountTypes:i}).done(f.resolve).fail(f.reject)})).fail(f.reject)})).fail(f.reject),f}},{key:"appleLogin",value:function(e,n){var o=n.accountTypes,u=void 0===o?[]:o;return p.AppleAuth.authenticate("com.cambly.CamblyWeb",e).then(function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.doc.idToken,e.next=3,t.post("/model/apple_users",{idToken:r,accountTypes:u});case 3:return e.abrupt("return",{idToken:r});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var u=e.apply(t,n);function i(t){m(u,r,o,i,c,"next",t)}function c(t){m(u,r,o,i,c,"throw",t)}i(void 0)}))});return function(t){return n.apply(this,arguments)}}()).then((function(t){var e=t.idToken;return r.login({appleIdToken:e},{accountTypes:u})}))}},{key:"createAndLogin",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.accountTypes,u=void 0===o?[]:o,i=(n.viewAs,$.Deferred());return t.post("/model/users",_(_({},e),{},{accountTypes:u})).done((function(){return r.login(e,{accountTypes:u}).done(i.resolve).fail(i.reject)})).fail(i.reject),i}},{key:"logout",value:function(t){console.info("User.logout : ".concat(t)),localStorage.removeItem("kidId"),window.location="/user/logout"}},{key:"login",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.accountTypes,u=void 0===o?[]:o,c=n.viewAs,p=void 0===c?null:c,d=$.Deferred();return f.Session.create(e,{scrub:!0}).done((function(e){var n=e.doc;r.fetchById(n.userId,{scrub:!0}).done((function(e){var o=e.doc;Object(l.z)(o,n,p);try{i.e({id:cambly.USER_ID,email:o.email})}catch(v){console.log(v)}var c=$.when(),f=u;o.accountTypes.includes("".concat(a.default.TUTOR,"-en"))&&(f=f.filter((function(t){return t!=="".concat(a.default.TUTOR_SIGNUP,"-en")}))),0===f.filter((function(t){return!o.accountTypes.includes(t)})).length||o.accountTypes.includes(r.STUDENT_ROLE)&&f.includes(a.default.STUDENT_SIGNUP)||(c=t.post("/model/users/".concat(cambly.USER_ID),{accountTypes:f})),o.accountTypes.includes(r.STUDENT_ROLE)&&o.incrementLogins();var b=$.Deferred(),h=s.Device.register("adults").then((function(e){var n=y.a.getItem("promoCode");return n?t.post("/redeemReferralCode",{referralCode:n,userId:o.id}).always((function(){y.a.removeItem("promoCode","/",window.location.hostname),b.resolve()})):b.resolve(),e}));$.when(h,c,b).done((function(t){var e=t.doc;d.resolve(o,n,e)})).fail(d.reject)})).fail(d.reject)})).fail(d.reject),d}},{key:"fetchCurrentUserAndSession",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewAs,n=void 0===e?null:e,o=t.scrub,u=void 0===o?null:o,i=localStorage.getItem("kidId");return $.when(i?$.when(r.fetchCurrent({viewAs:n,scrub:u}).then((function(t){return t.doc})),r.fetchById(i,{viewAs:n,scrub:u}).fail((function(t){404===t.status&&r.logout("kid<".concat(i,"> not found"))})).then((function(t){return t.doc}))).then((function(t,e){var n;return t?(null==t||null===(n=t.kidIds)||void 0===n?void 0:n.includes(i))?(cambly.USER_ID=e.id,e):(r.logout("kid<".concat(i,"> is not a kid of user<").concat(t.id,">")),t):null})):r.fetchCurrent({viewAs:n,scrub:u}).then((function(t){var e=t.doc;return e&&(cambly.USER_ID=e.id),e})),f.Session.fetchById("current",{viewAs:n,scrub:u}).then((function(t){return t.doc}))).done(l.z)}}]),r}(d._User);k(A,"PARENT_ROLE","parent"),k(A,"STUDENT_ROLE","student-en");var D=function(t){E(n,t);var e=T(n);function n(){return O(this,n),e.apply(this,arguments)}return w(n,null,[{key:"all",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_USERS":var n=new Map(h(t)),r=new c.c({scrub:e.scrub,loadedBy:"model-user"});return e.users.forEach((function(t,e){n.set(e,t?new A(t,{metadata:r}):null)})),n;case"UPDATE_DOCUMENTS":case"RECEIVE_DOCUMENTS":return new Map([].concat(h(t),h(e.documents)));default:return t}}},{key:"me",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=localStorage.getItem("kidId")||(null==t?void 0:t.userId);switch(e.type){case"SET_CURRENT_USER":return e.user;case"RECEIVE_USERS":if(n&&e.users.has(n)){var r=new c.c({scrub:e.scrub,loadedBy:"model-user"});return new A(e.users.get(n),{metadata:r})}return t;case"RECEIVE_DOCUMENTS":case"UPDATE_DOCUMENTS":return n&&e.documents.has(n)?e.documents.get(n):e.current?e.documents.values().next().value:t;default:return t}}},{key:"byUserlink",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0,n=new Map(h(t));switch(e.type){case"RECEIVE_DOCUMENTS":case"UPDATE_DOCUMENTS":return e.documents.forEach((function(t){t.userlink&&n.set(t.userlink,t)})),n;default:return n}}},{key:"queued",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"QUEUE_FETCH_USER":return new Set([].concat(h(t),[e.userId]));case"INFLIGHT_FETCH_USER":var n=new Set(h(e.userIds));return new Set(h(t).filter((function(t){return!n.has(t)})));case"RECEIVE_USERS":var r=new Set(h(t));return h(e.users.keys()).forEach((function(t){r.delete(t)})),r;default:return t}}},{key:"inflight",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INFLIGHT_FETCH_USER":return new Set([].concat(h(t),h(e.userIds)));case"RECEIVE_USERS":var n=new Set(h(t));return h(e.users.keys()).forEach((function(t){n.delete(t)})),n;default:return t}}},{key:"byUsername",value:function(t){return this.fetchQuery({username:t},{scrub:!0})}}]),n}(d._Users);k(D,"reducers",Object(u.combineReducers)({all:D.all,metadata:D.metadata,me:D.me,queued:D.queued,inflight:D.inflight})),D.register(A)}.call(this,n(45).default)},520:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorSignupAction",(function(){return p})),n.d(e,"TutorSignupActions",(function(){return y}));var r=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){c(a,t);var e,n,r,o=f(a);function a(){return u(this,a),o.apply(this,arguments)}return e=a,r=[{key:"collection",value:function(){return"tutor_signup_actions"}}],(n=null)&&i(e.prototype,n),r&&i(e,r),a}(r.b),y=function(t){c(n,t);var e=f(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r.a);y.register(p)},522:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECIEVE_NEW_TZ":return e.timezone;case"CLEAR_TZ":return null;default:return t}}n.r(e),n.d(e,"adminInterfaceTimeZone",(function(){return r}))},537:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorSignup",(function(){return m})),n.d(e,"TutorSignups",(function(){return g}));var r=n(27),o=n(3),u=n(520);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b,h,v,m=function(t){s(n,t);var e=p(n);function n(){return c(this,n),e.apply(this,arguments)}return f(n,[{key:"doAction",value:function(t,e,n,r){return this.$post("do_action",{adminId:t,action:e,reason:n,type:r})}},{key:"lastAction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewAs,n=void 0===e?null:e;return this.lastActionId?u.TutorSignupAction.fetchById(this.lastActionId,{viewAs:n}):null}},{key:"updateEngagedTime",value:function(){return this.$post("update_engaged_time")}},{key:"submitApplication",value:function(){return this.$post("submit_application",{})}},{key:"setActiveApplicant",value:function(t){return this.$post("set_active_applicant",{activeApplicant:t})}},{key:"hasSubmitted",value:function(){return"submitted"===this.state}}],[{key:"collection",value:function(){return"tutor_signups"}},{key:"create",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.viewAs,u=void 0===o?null:o;return n.$create({userId:t,platform:e},{viewAs:u})}}]),n}(o.b),g=function(t){s(n,t);var e=p(n);function n(){return c(this,n),e.apply(this,arguments)}return f(n,null,[{key:"forUser",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.viewAs,u=void 0===o?null:o,i={userId:t};return e&&(i.state=e),n&&(i.platform=n),this.fetchQuery(i,{viewAs:u})}},{key:"byPlatform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0,n=t;switch(e.type){case"RECEIVE_DOCUMENTS":case"UPDATE_DOCUMENTS":return e.documents.forEach((function(t){t.activeApplicant?n.set(t.platform,t):n.set(t.platform,null)})),n;default:return n}}}]),n}(o.a);b=g,h="reducers",v=Object(r.combineReducers)({all:g.all,metadata:g.metadata,byPlatform:g.byPlatform}),h in b?Object.defineProperty(b,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[h]=v,g.register(m)},581:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorStatus",(function(){return _})),n.d(e,"TutorStatuses",(function(){return O}));var r=n(27),o=n(3),u=n(15);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v,m,g,_=function(t){p(n,t);var e=d(n);function n(){return f(this,n),e.apply(this,arguments)}return l(n,null,[{key:"collection",value:function(){return"tutor_statuses"}},{key:"forTutor",value:function(t){return O.forTutors([t],{viewAs:u.default.STUDENT})}}]),n}(o.b),O=function(t){p(n,t);var e=d(n);function n(){return f(this,n),e.apply(this,arguments)}return l(n,null,[{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.curriculumIds,n=void 0===e?null:e,r={};return null!=n&&(r.curriculumId=n),this.fetchQuery(r,{viewAs:u.default.STUDENT})}},{key:"forTutors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.viewAs,o=void 0===r?null:r;return n.fetchQuery({tutorId:t},{viewAs:o,post:!0})}},{key:"byTutor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"RECEIVE_DOCUMENTS":case"UPDATE_DOCUMENTS":var n=new Map(c(t));return e.documents.forEach((function(t){n.set(t.tutorId,t)})),n;default:return t}}}]),n}(o.a);v=O,m="reducers",g=Object(r.combineReducers)({all:o.a.all,metadata:o.a.metadata,byTutor:O.byTutor}),m in v?Object.defineProperty(v,m,{value:g,enumerable:!0,configurable:!0,writable:!0}):v[m]=g,O.register(_)},600:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorFeedbackOption",(function(){return l})),n.d(e,"TutorFeedbackOptions",(function(){return p}));var r=n(363);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorFeedbackOption),p=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorFeedbackOptions);p.register(l)},601:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorInviteCode",(function(){return p})),n.d(e,"TutorInviteCodes",(function(){return y}));var r=n(241);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){c(a,t);var e,n,r,o=f(a);function a(){return u(this,a),o.apply(this,arguments)}return e=a,r=[{key:"collection",value:function(){return"tutor_invite_codes"}},{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.code,r=void 0===n?{}:n,o=e.data,u=void 0===o?{}:o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=i.viewAs,a=void 0===c?null:c;return this.$create({userId:t,code:r,data:u},{viewAs:a})}}],(n=null)&&i(e.prototype,n),r&&i(e,r),a}(r.InviteCode),y=function(t){c(n,t);var e=f(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r.InviteCodes);y.register(p)},602:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorLeaderboard",(function(){return l})),n.d(e,"TutorLeaderboards",(function(){return p}));var r=n(364);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorLeaderboard),p=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorLeaderboards);p.register(l)},603:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorViolation",(function(){return l})),n.d(e,"TutorViolations",(function(){return p}));var r=n(367);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorViolation),p=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorViolations);p.register(l)},604:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorViolationType",(function(){return l})),n.d(e,"TutorViolationTypes",(function(){return p}));var r=n(440);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorViolationType),p=function(t){i(n,t);var e=a(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r._TutorViolationTypes);p.register(l)},726:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorProfileVideo",(function(){return b})),n.d(e,"TutorProfileVideos",(function(){return h}));var r=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){a(n,t);var e=s(n);function n(){var t;u(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d(p(t=e.call.apply(e,[this].concat(o))),"saveTutorProfileVideo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,o){t.$get("sign_s3_uploaded_profile_video",{fileType:e.type}).done((function(t){var u=t.result,i=new XMLHttpRequest;i.open("POST",u.url);var c=new FormData;Object.keys(u.fields).forEach((function(t){c.append(t,u.fields[t])})),c.append("file",e),i.onreadystatechange=function(){4===i.readyState&&(200===i.status||204===i.status?r():(alert("Error while uploading image for module ".concat(e.name,".")),o()))},n&&i.upload.addEventListener("progress",(function(t){if(t.lengthComputable){var e=Math.round(100*t.loaded/t.total);n(e)}}),!1),i.send(c)})).catch(o)}))})),t}return c(n,null,[{key:"collection",value:function(){return"tutor_profile_videos"}},{key:"create",value:function(t,e){return this.$create({userId:t,opentokId:e},{scrub:!0})}}]),n}(r.b),h=function(t){a(n,t);var e=s(n);function n(){return u(this,n),e.apply(this,arguments)}return c(n,null,[{key:"forUser",value:function(t){return this.fetchQuery({userId:t.id},{scrub:!0})}}]),n}(r.a);h.register(b)},743:function(t,e,n){"use strict";n.r(e),n.d(e,"WhiteboardTimeline",(function(){return b})),n.d(e,"WhiteboardTimelines",(function(){return h}));var r=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){a(n,t);var e=s(n);function n(){var t;u(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d(p(t=e.call.apply(e,[this].concat(o))),"addStrokes",(function(e){return t.$post("add_strokes",{strokes:e})})),t}return c(n,null,[{key:"collection",value:function(){return"whiteboard_timelines"}}]),n}(r.b),h=function(t){a(n,t);var e=s(n);function n(){return u(this,n),e.apply(this,arguments)}return c(n,null,[{key:"forLessonPlanPartId",value:function(t){return console.log("Hello")}}]),n}(r.a);h.register(b)},772:function(t,e,n){"use strict";n.r(e),n.d(e,"TutorMessageReport",(function(){return p})),n.d(e,"TutorMessageReports",(function(){return y}));var r=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){c(a,t);var e,n,r,o=f(a);function a(){return u(this,a),o.apply(this,arguments)}return e=a,r=[{key:"collection",value:function(){return"tutor_message_reports"}}],(n=null)&&i(e.prototype,n),r&&i(e,r),a}(r.b),y=function(t){c(n,t);var e=f(n);function n(){return u(this,n),e.apply(this,arguments)}return n}(r.a);y.register(p)},883:function(t,e,n){"use strict";n.r(e),n.d(e,"VideoLesson",(function(){return v})),n.d(e,"VideoLessons",(function(){return m}));var r=n(10),o=n.n(r),u=n(3),i=n(48);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){p(n,t);var e=d(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.metadata,c=void 0===u?null:u;return f(this,n),r=e.call(this,t,{metadata:c}),i.Users.load(r.owner()),r}return l(n,null,[{key:"collection",value:function(){return"video_lessons"}},{key:"endpoint",value:function(){return"/api/tutor_videos"}}]),l(n,[{key:"publish",value:function(){return this.$post("publish")}},{key:"isPublished",value:function(){return this.published&&this.publishedDate}},{key:"publishedDateTz",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.isPublished()?o.a.tz(this.publishedDate.$date,cambly.USER_TZ):null;return e&&t?e.format(t):e}},{key:"unpublish",value:function(){return this.$post("unpublish")}},{key:"setCoverImage",value:function(t){return this.$post("setCoverImage",{fileType:t.type})}},{key:"delete",value:function(){return this.$delete()}},{key:"getIncompleteQuestions",value:function(){return this.questions.filter((function(t){return!t.options.find((function(t){return t.isCorrect}))}))}},{key:"save",value:function(){if(!this._mutable)throw Error("Mutation on immutable object - use .$mutable()");return this.$set("questions",this.questions.filter((function(t){return t.questionText&&t.questionText.length>0}))),this.$save()}},{key:"recordView",value:function(){return this.$post("view",{userId:cambly.USER_ID})}},{key:"categoryLabelStringId",value:function(){return"lesson.category."+(m.categories.includes(this.category)?this.category:"other")}},{key:"categoryColor",value:function(){return m.categoryColors[this.category]||m.categoryColors.other}},{key:"difficultyLabelStringId",value:function(){return"lesson.difficulty."+(m.difficulties.includes(this.difficulty)?this.difficulty:0)}},{key:"difficultyColor",value:function(){return m.difficultyColors[this.difficulty]||m.difficultyColors.other}},{key:"owner",value:function(){return this.userId}},{key:"editable",value:function(){return cambly.USER_ID===this.owner()||window.location.pathname.includes("admin")}},{key:"getVideoUrl",value:function(){return this.url||this.originalUrl}},{key:"hasQuiz",value:function(){return this.questions&&this.questions.length>0}}],[{key:"create",value:function(t){return this.$create({userId:cambly.USER_ID,fileName:t.name,fileType:t.type},{scrub:!0})}}]),n}(u.b),m=function(t){p(n,t);var e=d(n);function n(){return f(this,n),e.apply(this,arguments)}return l(n,null,[{key:"forCreator",value:function(t){return this.fetch({userId:t,published:!0})}},{key:"myDrafts",value:function(){return this.fetch({userId:cambly.USER_ID,published:!1})}},{key:"published",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e?{limit:t,platform:e,sort:-1}:{limit:t,sort:-1};return this.fetch(n)}}]),n}(u.a);a(m,"categories",["slangidioms","vocab","testprep","grammar","culture","pronunciation","listening","children"]),a(m,"categoryColors",{slangidioms:"#70859c",vocab:"#12355B",testprep:"#420039",grammar:"#a07f9c",other:"#4D9DE0",culture:"#F08700",pronunciation:"#228891",listening:"#6C0000",children:"#c0a006"}),a(m,"difficulties",[0,1,2,3,4,5]),a(m,"difficultyColors",{0:"#777777",1:"#97be50",2:"#97be78",3:"#7bbeaf",4:"#76a7be",5:"#6875be"}),m.register(v)},890:function(t,e,n){"use strict";n.r(e),n.d(e,"UserGoogleCalendar",(function(){return y})),n.d(e,"UserGoogleCalendars",(function(){return d}));var r=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){a(n,t);var e=s(n);function n(){return u(this,n),e.apply(this,arguments)}return c(n,[{key:"updateCredentials",value:function(t){return this.$post("update_credentials",{authCode:t})}},{key:"addEvent",value:function(t){return this.$post("add_event",{event:t})}}],[{key:"collection",value:function(){return"user_google_calendars"}},{key:"create",value:function(t,e){var r={userId:t,authCode:e};return n.$create(r,{scrub:!0})}}]),n}(r.b),d=function(t){a(n,t);var e=s(n);function n(){return u(this,n),e.apply(this,arguments)}return c(n,null,[{key:"forUser",value:function(t){var e={userId:t};return this.fetchQuery(e,{scrub:!0})}}]),n}(r.a);d.register(y)},899:function(t,e,n){"use strict";n.r(e),n.d(e,"WeeklyTemplate",(function(){return O})),n.d(e,"WeeklyTemplates",(function(){return S}));var r=n(3),o=n(26),u=n.n(o),i=(n(10),n(421)),c=n(378),a=n(259);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_(t);if(e){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(t){b(n,t);var e=v(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.metadata,i=void 0===u?null:u;return p(this,n),(r=e.call(this,t,{metadata:i})).events=r.getCalendarEvents(),m(r,g(r))}return d(n,null,[{key:"collection",value:function(){return"weekly_templates"}},{key:"endpoint",value:function(){return"/api/tutor_schedules"}}]),d(n,[{key:"add",value:function(t,e){return this.$post("add",{start:t.unix(),end:e.unix()})}},{key:"remove",value:function(t){return this.$post("remove",{start:t.startMoment.unix(),end:t.endMoment.unix()})}},{key:"clear",value:function(){return this.$delete()}},{key:"getCalendarEvents",value:function(){var t=this,e=[];return this.days.forEach((function(r,o){e=e.concat(r.times.map((function(e,r){var u=n.getUTCMomentFromString(o+1,e.start),i=n.getUTCMomentFromString(o+1,e.end);return{startMoment:u,endMoment:i,startDateObj:n.getUTCDateObj(u),endDateObj:n.getUTCDateObj(i),type:t.type}})))})),e}},{key:"applyToWeek",value:function(t,e){var r=this;this.events.forEach((function(o){var u=n.applyIdealizedDate(t,o.startMoment,e),c=n.applyIdealizedDate(t,o.endMoment,e);i.ReservationAvailability.create(r.userId,u,c,r.type,r.group_id)}))}}],[{key:"applyIdealizedDate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"UTC";return u.a.tz(t,n).day(e.day()).hour(e.hour()).minute(e.minute()).seconds(0).milliseconds(0)}},{key:"getUTCMomentFromString",value:function(t,e){var n=e.split(":"),r=n[0],o=n[1];return u()().utc().days(t%7).hours(r).minutes(o).seconds(0).milliseconds(0)}},{key:"getUTCDateObj",value:function(t){return new Date(t.year(),t.month(),t.date(),t.hour(),t.minute(),0)}}]),n}(r.b),S=function(t){b(n,t);var e=v(n);function n(){return p(this,n),e.apply(this,arguments)}return d(n,null,[{key:"fetchForTutor",value:function(t){return this.fetch({tutorId:t.userId}).done((function(e){var n=e.result;n.some((function(t){return"normal"===t.type}))||O.$create({tutorId:t.userId},{scrub:!0}),n.some((function(t){return"user_group"===t.type}))||c.UserGroups.forCreator(t.userId).done((function(e){var n=e.result.find((function(t){return"regulars"===t.name}));n&&O.$create({tutorId:t.userId,type:"user_group",groupId:n.id},{scrub:!0})})),t.IELTSEnabled&&!n.some((function(t){return"ielts"===t.type}))&&O.$create({tutorId:t.userId,type:"ielts"},{scrub:!0}),new a.Tutor(t).isKidsApproved()&&!n.some((function(t){return"kids"===t.type}))&&O.$create({tutorId:t.userId,type:"kids"},{scrub:!0})}))}},{key:"getForTutor",value:function(t,e){return s(e.values()).filter((function(e){return e.userId===t.userId}))}},{key:"getEventsForTutor",value:function(t,e){var r=[];return n.getForTutor(t,e).forEach((function(t){r=r.concat(t.events)})),r}}]),n}(r.a);S.register(O)}}]);