/*! For license information please see client-tracking-sync.dcab1567b46a048f7cd5.js.LICENSE.txt */
(function(){var __webpack_modules__={8601:function(e,t,n){var r={"./":4283,"./development":6640,"./development.js":6640,"./index":4283,"./index.js":4283,"./index.test":7854,"./index.test.js":7854,"./production":8649,"./production.js":8649};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=8601},2924:function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},4264:function(e,t,n){e.exports=n(7588)},6640:function(e,t,n){"use strict";n.r(t),n.d(t,{config:function(){return r}});var r={baseUrl:"http://localhost:5002",eventPublishingEnabled:!1,retryInterval:15e3}},4283:function(e,t,n){"use strict";n.r(t),n.d(t,{getEnvFromUrl:function(){return o}});var r=n(5479),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.at.getWindow(),t="".concat(e.location.protocol,"//").concat(e.location.hostname),n=-1!==t.indexOf("local");return n?"development":"production"};t.default=function(e){if("development"===e||"production"===e)return n(8601)("./".concat(e)).config;throw new Error("Environment is required.")}},7854:function(e,t,n){"use strict";n.r(t);var r=n(4283),o=n(6640),i=n(8649);describe("getConfig",(function(){it("should throw error when no env specified",(function(){expect((function(){return(0,r.default)({})})).toThrow()})),it("should return production config when specified",(function(){var e=(0,r.default)("production");expect(e).toEqual(i.config)})),it("should return development config when specified",(function(){var e=(0,r.default)("development");expect(e).toEqual(o.config)}))})),describe("getEnvFromUrl",(function(){it("returns development when running on local domain",(function(){expect((0,r.getEnvFromUrl)({location:{protocol:"http",hostname:"localhost"}})).toEqual("development")})),it("returns production when not running on local domain",(function(){expect((0,r.getEnvFromUrl)({location:{protocol:"https",hostname:"www.skyscanner.net"}})).toEqual("production")}))}))},8649:function(e,t,n){"use strict";n.r(t),n.d(t,{config:function(){return r}});var r={baseUrl:"/g/traveller-auth-service",eventPublishingEnabled:!0,retryInterval:15e3}},2302:function(e,t,n){var r,o,i=n(2924);!function(a){var c;if(void 0===(o="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=o),c=!0,"object"===i(t)&&(e.exports=a(),c=!0),!c){var u=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=u,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n+c}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),u=c.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=t(c[0]);if(u=(r.read||r)(u,s)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(o[s]=u,e===s)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},7822:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var _typeof=__webpack_require__(2924);function decycle(e){var t=[],n=[];return function e(r,o){var i,a,c,u=r&&r.toJSON instanceof Function?r.toJSON():r;if("object"===_typeof(u)&&null!==u){for(i=0;i<t.length;i+=1)if(t[i]===u)return{$ref:n[i]};if(t.push(u),n.push(o),"[object Array]"===Object.prototype.toString.apply(u))for(c=[],i=0;i<u.length;i+=1)c[i]=e(u[i],o+"["+i+"]");else for(a in c={},u)Object.prototype.hasOwnProperty.call(u,a)&&(c[a]=e(u[a],o+"["+JSON.stringify(a)+"]"));return c}return u}(e,"$")}function retrocycle($){var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"===_typeof(value))if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"===_typeof(item)&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"===_typeof(value[name])&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$}module.exports={stringify:function(e,t,n){return JSON.stringify(decycle(e),t,n)},parse:function(e,t){return retrocycle(JSON.parse(e,t))},decycle:decycle,retrocycle:retrocycle}},2773:function(e,t,n){var r=n(4362).Symbol;e.exports=r},8835:function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},8083:function(e,t,n){var r=n(5094),o=n(9246),i=n(3670),a=n(2343),c=n(4782),u=n(1589),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&o(e),f=!n&&!l&&a(e),p=!n&&!l&&!f&&u(e),d=n||l||f||p,h=d?r(e.length,String):[],v=h.length;for(var g in e)!t&&!s.call(e,g)||d&&("length"==g||f&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||c(g,v))||h.push(g);return h}},879:function(e,t,n){var r=n(5515),o=n(7950),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},5515:function(e,t,n){var r=n(6255);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1185:function(e,t,n){var r=n(2773),o=n(3888),i=n(2299),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},1075:function(e,t,n){var r=n(1185),o=n(4939);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},4106:function(e,t,n){var r=n(3626),o=n(9249),i=n(71),a=n(1214),c=/^\[object .+?Constructor\]$/,u=Function.prototype,s=Object.prototype,l=u.toString,f=s.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?p:c).test(a(e))}},3638:function(e,t,n){var r=n(1185),o=n(7100),i=n(4939),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},7521:function(e,t,n){var r=n(2803),o=n(3865),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9541:function(e,t,n){var r=n(1559),o=n(3549),i=n(5121);e.exports=function(e,t){return i(o(e,t,r),e+"")}},4233:function(e,t,n){var r=n(7622),o=n(6255),i=n(1559),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},5094:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},9081:function(e){e.exports=function(e){return function(t){return e(t)}}},7841:function(e,t,n){var r=n(879),o=n(5515);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var c=-1,u=t.length;++c<u;){var s=t[c],l=i?i(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),a?o(n,s,l):r(n,s,l)}return n}},1741:function(e,t,n){var r=n(4362)["__core-js_shared__"];e.exports=r},661:function(e,t,n){var r=n(9541),o=n(2985);e.exports=function(e){return r((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,c=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,c&&o(n[0],n[1],c)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var u=n[r];u&&e(t,u,r,a)}return t}))}},6255:function(e,t,n){var r=n(3203),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},8556:function(e,t,n){var r=n(2924),o="object"==(void 0===n.g?"undefined":r(n.g))&&n.g&&n.g.Object===Object&&n.g;e.exports=o},3203:function(e,t,n){var r=n(4106),o=n(7338);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},3888:function(e,t,n){var r=n(2773),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[c]=n:delete e[c]),o}},7338:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},4782:function(e,t,n){var r=n(2924),o=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=r(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&o.test(e))&&e>-1&&e%1==0&&e<t}},2985:function(e,t,n){var r=n(2924),o=n(7950),i=n(6175),a=n(4782),c=n(71);e.exports=function(e,t,n){if(!c(n))return!1;var u=r(t);return!!("number"==u?i(n)&&a(t,n.length):"string"==u&&t in n)&&o(n[t],e)}},9249:function(e,t,n){var r,o=n(1741),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},2803:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},3865:function(e,t,n){var r=n(5290)(Object.keys,Object);e.exports=r},1985:function(e,t,n){e=n.nmd(e);var r=n(2924),o=n(8556),i="object"==r(t)&&t&&!t.nodeType&&t,a=i&&"object"==r(e)&&e&&!e.nodeType&&e,c=a&&a.exports===i&&o.process,u=function(){try{return a&&a.require&&a.require("util").types||c&&c.binding&&c.binding("util")}catch(e){}}();e.exports=u},2299:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5290:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},3549:function(e,t,n){var r=n(8835),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,c=o(i.length-t,0),u=Array(c);++a<c;)u[a]=i[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=i[a];return s[t]=n(u),r(e,this,s)}}},4362:function(e,t,n){var r=n(2924),o=n(8556),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();e.exports=a},5121:function(e,t,n){var r=n(4233),o=n(2369)(r);e.exports=o},2369:function(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),i=16-(o-r);if(r=o,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},1214:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7379:function(e,t,n){var r=n(879),o=n(7841),i=n(661),a=n(6175),c=n(2803),u=n(3225),s=Object.prototype.hasOwnProperty,l=i((function(e,t){if(c(t)||a(t))o(t,u(t),e);else for(var n in t)s.call(t,n)&&r(e,n,t[n])}));e.exports=l},7622:function(e){e.exports=function(e){return function(){return e}}},7950:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},1559:function(e){e.exports=function(e){return e}},9246:function(e,t,n){var r=n(1075),o=n(4939),i=Object.prototype,a=i.hasOwnProperty,c=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!c.call(e,"callee")};e.exports=u},3670:function(e){var t=Array.isArray;e.exports=t},6175:function(e,t,n){var r=n(3626),o=n(7100);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},2343:function(e,t,n){e=n.nmd(e);var r=n(2924),o=n(4362),i=n(3444),a="object"==r(t)&&t&&!t.nodeType&&t,c=a&&"object"==r(e)&&e&&!e.nodeType&&e,u=c&&c.exports===a?o.Buffer:void 0,s=(u?u.isBuffer:void 0)||i;e.exports=s},3626:function(e,t,n){var r=n(1185),o=n(71);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},7100:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},71:function(e,t,n){var r=n(2924);e.exports=function(e){var t=r(e);return null!=e&&("object"==t||"function"==t)}},4939:function(e,t,n){var r=n(2924);e.exports=function(e){return null!=e&&"object"==r(e)}},1589:function(e,t,n){var r=n(3638),o=n(9081),i=n(1985),a=i&&i.isTypedArray,c=a?o(a):r;e.exports=c},3225:function(e,t,n){var r=n(8083),o=n(7521),i=n(6175);e.exports=function(e){return i(e)?r(e):o(e)}},3444:function(e){e.exports=function(){return!1}},7347:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var a,c,u=o(e),s=1;s<arguments.length;s++){for(var l in a=Object(arguments[s]))n.call(a,l)&&(u[l]=a[l]);if(t){c=t(a);for(var f=0;f<c.length;f++)r.call(a,c[f])&&(u[c[f]]=a[c[f]])}}return u}},2851:function(e,t,n){"use strict";var r=n(2924),o=n(8221),i=n(7347);function a(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===r(e)?c(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=i({arrayFormat:"none"},t)),o=Object.create(null);return"string"!=typeof e?o:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(r),i,o)})),Object.keys(o).sort().reduce((function(e,t){var n=o[t];return Boolean(n)&&"object"===r(n)&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))):o},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[a(t,e),"[",r,"]"].join(""):[a(t,e),"[",a(r,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}(t=i({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var o=e[r];if(void 0===o)return"";if(null===o)return a(r,t);if(Array.isArray(o)){var i=[];return o.slice().forEach((function(e){void 0!==e&&i.push(n(r,e,i.length))})),i.join("&")}return a(r,t)+"="+a(o,t)})).filter((function(e){return e.length>0})).join("&"):""}},7588:function(e,t,n){e=n.nmd(e);var r=n(2924),o=function(e){"use strict";var t,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),a=new N(r||[]);return i._invoke=function(e,t,n){var r=p;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=x(a,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=f(e,t,n);if("normal"===u.type){if(r=n.done?v:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",v="completed",g={};function y(){}function m(){}function _(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==n&&o.call(O,a)&&(b=O);var k=_.prototype=y.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,c,u){var s=f(e[i],e,a);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"===r(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,c,u)}),(function(e){n("throw",e,c,u)})):t.resolve(p).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=f(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:j}}function j(){return{value:t,done:!0}}return m.prototype=k.constructor=_,_.constructor=m,m.displayName=s(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[c]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),s(k,u,"Generator"),k[a]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}("object"===r(e)?e.exports:{});try{regeneratorRuntime=o}catch(e){Function("r","regeneratorRuntime = r")(o)}},5479:function(e,t,n){"use strict";n.d(t,{at:function(){return i},zd:function(){return v},xu:function(){return p},ij:function(){return c},S3:function(){return u},Lu:function(){return a},PQ:function(){return g}});var r,o,i={getWindow:function(){return"undefined"!=typeof window?window:{}},getDocument:function(){return"undefined"!=typeof document?document:{}},getNavigator:function(){return"undefined"!=typeof navigator?navigator:{}}},a=function(e,t,n,r){var o=i.getDocument(),a=o.createElement("script");a.type=n||"text/javascript",a.async=!0,["anonymous","use-credentials"].indexOf(r)>-1&&(a.crossOrigin=r),t&&"function"==typeof t&&(a.onload=t),0===e.indexOf("//")||0===e.indexOf("http")?a.src=e:a.src=("https:"===o.location.protocol?"https://":"http://")+o.location.host+e;var c=o.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)},c=function(){return i.getNavigator().userAgent},u=function(){var e=i.getWindow(),t=i.getDocument(),n=t.documentElement,r=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||r.clientWidth,height:e.innerHeight||n.clientHeight||r.clientHeight}},s=!1;r=function(){s=!0},o=i.getWindow(),s?o.setTimeout((function(){return r()}),0):o.addEventListener?o.addEventListener("load",r,!1):o.attachEvent&&o.attachEvent("onload",r);var l,f=n(9846),p=function(){var e=i.getWindow().reqTag;return e||(e=i.getWindow().reqTag=(0,f.v4)()),e},d=function(e,t){if(!("multi-destination"===t&&e.length>1))return!1;var n=e[0],r=e[e.length-1],o=n.originId,i=n.destinationId,a=r.originId,c=r.destinationId;return!!(o&&i&&a&&c)&&(o!==c||i!==a)},h=function(e,t,n){return{originId:e,destinationId:t,date:n}},v=function(e,t){var n,r,o,i,a=e.legs||[],c=e.tripType,u=(e.childrenV2||[]).filter((function(e){return e>=2})),s={"Leg Count":a&&a.length||{return:2,"one-way":1}[c],"Trip Type":c,"Prefer Directs":e.preferDirects,"Cabin Class":e.cabinclass,"Open Jaw":d(a,c),Adults:e.adultsV2,Children:u.length,Infants:(e.childrenV2||[]).length-u.length};return 0===a.length&&(a.push(h(e.originId,e.destinationId||"everywhere",e.outboundDate)),"return"===c&&a.push(h(e.destinationId||"everywhere",e.originId,e.inboundDate))),a.forEach((function(e,t){!function(e,t,n){var r=e;r["Origin Code Leg ".concat(n)]=t.originId,r["Destination Code Leg ".concat(n)]=t.destinationId,r["Date Leg ".concat(n)]=t.date}(s,e,t+1)})),s["Date Offset Leg 1"]=(n=t,r=a[0].date,o=new Date(n),i=new Date(r),o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),Math.abs((i.getTime()-o.getTime())/864e5+1)),s},g=(n(2131),i.getWindow(),function(){if(void 0===l)try{var e=i.getDocument().getElementById("trackolding-sync"),t=JSON.parse(e.getAttribute("data-data"));l=void 0===t.useAkamaiSlipstream||!0===t.useAkamaiSlipstream}catch(e){console.warn("Could not get Trackolding data, will use Akamai Slipstream endpoint"),l=!0}return l})},2131:function(e,t){"use strict";var n={},r={},o=function(){if("undefined"!=typeof window)if(window.Sb||(window.Sb={}),window.Sb.ObserverMemory){var e=window.Sb.ObserverMemory;n=e.queued,r=e.topicSubscriptions}else n={},r={},window.Sb.ObserverMemory={queued:n,topicSubscriptions:r}},i=function(e){var t=r[e];if(t&&t.length){var o=n[e];if(o&&o.length)for(var i=0,a=o.length;i<a;i++)for(var c=o[i],u=0,s=t.length;u<s;u++)!function(t,n){setTimeout((function(){try{if(n.received.indexOf(t.publishId)<0){var r=n.fn.apply(n.context,[t.data]);n.received.push(t.publishId),t.handler&&t.handler.apply(r)}}catch(t){throw new Error("An error occured while handling event topic '".concat(e,"'. Error: ").concat(t.stack||t))}}),0)}(c,t[u])}},a={subscribe:function(e,t,n){return r[e]||(r[e]=[]),r[e].push({fn:t,context:n||void 0,received:[]}),i(e),[e,t]}},c=0;a.publish=function(e,t,r){var o=1e4*Math.floor(1e6*Math.random())+c++;return n[e]||(n[e]=[]),n[e].push({topic:e,data:t,publishId:o,handler:r}),i(e),a},a.unsubscribe=function(e){if(e){if(!Array.isArray(e))throw new Error("Invalid handle: ".concat(e));var t=e[0],n=e[1],o=r[t];if(!o)return a;for(var i=o.length;i--;)o[i].fn===n&&o.splice(i,1);return a}},a.wrap=function(e,t){Object.keys(t).forEach((function(n){a.subscribe("".concat(e).concat(n),t[n])}))},a.init=o,o(),t.Z=a},369:function(e,t,n){var r=n(2924),o=function e(t,n){for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if("object"===r(t)&&null!==t){var c,u=i.indexOf(t);return-1!==u?"<<cyclical reference to the object at depth: ".concat(u,">>"):(n>i.length?(c=t instanceof Array?[]:{},Object.keys(t).forEach((function(r){c[r]=e.apply(void 0,[t[r],n].concat(i,[t]))}))):c="<<pruned>>",c)}return t};e.exports=function(e,t){return o(e,t)}},162:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(n(8249));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){if(!e||"string"!=typeof e)return null;var t=e.split(o.PAIR_SEPARATOR),n={};return t.forEach((function(e){if(-1!==e.indexOf(o.KEY_VALUE_SEPARATOR)){var t=(c=e.split(o.KEY_VALUE_SEPARATOR),u=2,function(e){if(Array.isArray(e))return e}(c)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(c,u)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(c,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1];n[r]=decodeURIComponent(i)}else n[e]=null;var c,u})),n}},8249:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COOKIES=t.KEY_VALUE_SEPARATOR=t.PAIR_SEPARATOR=t.COOKIE_SEPARATOR=void 0,t.COOKIE_SEPARATOR=";",t.PAIR_SEPARATOR="&",t.KEY_VALUE_SEPARATOR=":::";var n=Object.freeze({SCANNER:"scanner",CULTURE:"ssculture",AB:"ssab",AB_OVERRIDES:"ssaboverrides",AB_GROUP:"abgroup",TRAVELLER_CONTEXT:"traveller_context",ANONYMOUS_TOKEN:"__Secure-anon_token",ANONYMOUS_CSRF_TOKEN:"__Secure-anon_csrf_token",SID_TOKEN:"sid_token",SID_UTID:"sid_utid",SID_SESSION_TOKEN:"sid_session_token",GDPR:"gdpr",HAS_APP:"has_app",DEVICE_GUID:"device_guid",SECURE_SKA:"__Secure-ska",EXPERIMENT_ALLOCATION_ID:"experiment_allocation_id"});t.COOKIES=n},494:function(e,t,n){"use strict";Object.defineProperty(t,"Ou",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Hc",{enumerable:!0,get:function(){return i.default}});var r=a(n(3104)),o=a(n(9386)),i=(a(n(162)),a(n(3732)),a(n(856)));n(8249);function a(e){return e&&e.__esModule?e:{default:e}}r.default},856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(162)),o=i(n(3732));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modified=!1,this._cookieObject=(0,r.default)(t)||{}}var t,n;return t=e,(n=[{key:"getValue",value:function(e){return this._cookieObject[e]}},{key:"setValue",value:function(e,t){return this._cookieObject[e]=t,this._modified=!0,this}},{key:"deleteValue",value:function(e){return delete this._cookieObject[e],this._modified=!0,this}},{key:"clear",value:function(){return this._cookieObject={},this._modified=!0,this}},{key:"isModified",value:function(){return this._modified}},{key:"keys",value:function(){return Object.keys(this._cookieObject)}},{key:"serializeToString",value:function(){return(0,o.default)(this._cookieObject)}}])&&a(t.prototype,n),e}();t.default=c},3104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(2089))&&r.__esModule?r:{default:r};t.default=function(e,t){var n=(0,o.default)(e,t);return n&&"string"==typeof n?n:null}},9386:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(e,t);return n?new r.default(n):null};var r=i(n(856)),o=i(n(2089));function i(e){return e&&e.__esModule?e:{default:e}}},3732:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return"";if("string"==typeof e)return e;var t=Object.keys(e);return 0===t.length?"":t.map((function(t){return function(e,t){return t?"".concat(e).concat(o.KEY_VALUE_SEPARATOR).concat(t):e}(t,e[t])})).reduce(a)};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(n(8249));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var a=function(e,t){return e?"".concat(e).concat(o.PAIR_SEPARATOR).concat(t):t}},2089:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(n(8249));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e,t){return e&&t?function(e,t){var n=t.map((function(e){var t,n,r=(t=e.split("="),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{key:r[0],value:r[1]}})).filter((function(t){return t.key===e&&null!==t.value}));return n.length>0?n[0].value:null}(e,t.split(o.COOKIE_SEPARATOR).map((function(e){return e.trim()}))):null}},8221:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},9846:function(e,t,n){var r=n(652),o=n(1246),i=o;i.v1=r,i.v4=o,e.exports=i},5459:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},7019:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},652:function(e,t,n){var r,o,i=n(7019),a=n(5459),c=0,u=0;e.exports=function(e,t,n){var s=t&&n||0,l=t||[],f=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==p){var d=i();null==f&&(f=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=o=16383&(d[6]<<8|d[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,g=h-c+(v-u)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||h>c)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,u=v,o=p;var y=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;l[s++]=y>>>24&255,l[s++]=y>>>16&255,l[s++]=y>>>8&255,l[s++]=255&y;var m=h/4294967296*1e4&268435455;l[s++]=m>>>8&255,l[s++]=255&m,l[s++]=m>>>24&15|16,l[s++]=m>>>16&255,l[s++]=p>>>8|128,l[s++]=255&p;for(var _=0;_<6;++_)l[s+_]=f[_];return t||a(l)}},1246:function(e,t,n){var r=n(7019),o=n(5459);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var c=0;c<16;++c)t[i+c]=a[c];return t||o(a)}},9369:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,{buildViewData:function(){return Tt},createError:function(){return It},getAdditionalServiceInfo:function(){return _t},getAssociateId:function(){return Ue},getCarHireView:function(){return St},getClientDetails:function(){return We},getCommonsDateTime:function(){return Me},getCommonsLocation:function(){return gt},getCommonsMoney:function(){return yt},getDaysDiff:function(){return mt},getEventHeader:function(){return $e},getFirstTrueBool:function(){return dt},getFlightLeg:function(){return kt},getFlightsView:function(){return xt},getHotelsView:function(){return Et},getIPAddress:function(){return Ve},getLocationAtt:function(){return ht},getLocationGeoCoords:function(){return vt},getPagePreviewInfo:function(){return bt},getPassengerGroup:function(){return Ot},getServiceFingerprint:function(){return Be},getTravellerCultureSettings:function(){return Fe},getTravellerIdentity:function(){return qe},getURLTrackingParams:function(){return wt},getUniqueGuid:function(){return Ge}});var o=n(2131);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n(5479),u=function(e,t){return new Promise((function(n,r){c.at.getWindow().fetch(e,t).then(n,r)}))},s={ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug"};o.Z.init();var l="https://slipstream.skyscanner.net",f="grp/v1/applog/public",p=function(e){return-1===e.hostname.indexOf("sandbox")&&-1===e.hostname.indexOf("pre-prod")&&-1===e.hostname.indexOf(".local")&&-1===e.hostname.indexOf("127.0.0.1")&&-1===e.hostname.indexOf("localhost")&&("80"===e.port||"443"===e.port||!e.port)},d=function(e){var t=e.location,n=e.topicName,r=void 0===n?"web-browser":n;return p(t)?(0,c.PQ)()?"".concat("/slipstream","/").concat(f,"/").concat(r):"".concat(l,"/").concat(f,"/").concat(r):"".concat(l,"/").concat("grp/v1/applog/public-sandbox","/").concat(r)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1?arguments[1]:void 0,n=c.at.getWindow(),r=n.Skyscanner,o=n.location;t&&(n.topicName=t.topicName);var i=d(n),a={message:e,fields:{pageName:r&&r.analyticsPageName||"unknown",location:o.href,level:s.ERROR,userAgent:(0,c.ij)(),deployColour:n.__trackolding&&n.__trackolding.deploy&&n.__trackolding.deploy.colour||"unknown",deployRegion:n.__trackolding&&n.__trackolding.deploy&&n.__trackolding.deploy.region||"unknown"}};Object.assign(a.fields,t),delete a.fields.message;var l=JSON.stringify(a);return p(o)||(a.fields.level===s.ERROR?console.error("saddlebag-logger:",a):a.fields.level===s.WARN?console.warn("saddlebag-logger:",a):console.log("saddlebag-logger:",a)),u(i,{method:"POST",headers:{"Content-Type":"application/json"},body:l}).catch((function(e){console.error("".concat(e,". Request to ").concat(i," failed. Request payload: ").concat(l,"."))}))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.component)throw new Error("Component required");var t=e.message,n=e.component,r=h(t,e);return o.Z.publish("app-log",{message:t,component:n}),r},g=v,y=s;function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}var w=n(2302),O=n.n(w),k=n(494),E=function(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function S(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.path,i=void 0===o?"/":o,a=r.secure,c=void 0===a||a;if(null==n)O().set(e,t,{path:i,secure:c});else{if(!E(n))throw new Error("Expires parameter needs to be an integer.");O().set(e,t,{expires:n,path:i,secure:c})}}var x=function(){function e(t){m(this,e),this.name=t;var n=c.at.getDocument().cookie;this.cookie=(0,k.Ou)(t,n),this.cookie||(this.cookie=new k.Hc({}))}return b(e,[{key:"getValue",value:function(e){return this.cookie.getValue(e)}},{key:"setValue",value:function(e,t){return this.cookie.setValue(e,t),this}},{key:"deleteValue",value:function(e){return this.cookie.deleteValue(e),this}},{key:"keys",value:function(){return this.cookie.keys()}},{key:"clear",value:function(){return this.cookie.clear(),this}},{key:"getRawValue",value:function(){return this.cookie.serializeToString()}},{key:"store",value:function(e,t){return S(this.name,this.cookie.serializeToString(),e,t),this}},{key:"remove",value:function(){O().remove(this.name)}}]),e}(),T=function(){function e(t){m(this,e),this.name=t,this.cookieValue=O().get(t)}return b(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"setValue",value:function(e){return this.cookieValue=e,this}},{key:"store",value:function(e,t){return S(this.name,this.cookieValue,e,t),this}},{key:"storeByDate",value:function(e,t){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.path,a=void 0===o?"/":o,c=r.secure,u=void 0===c||c;if(!n||"object"!==i(n)||!n.toUTCString)throw new Error("Expiration date must be a Date.");O().set(e,t,{expires:n,path:a,secure:u})}(this.name,this.cookieValue,e,t),this}},{key:"remove",value:function(){O().remove(this.name)}}]),e}(),I=function(e){var t="".concat(e,"=");return(c.at.getDocument().cookie||"").split(";").some((function(e){return e.indexOf(t)>=0}))};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P,R,D=function(e,t){var n=t.allowedQueryParams;if(e.indexOf("?")>-1&&n)try{var r=j(e.split(/\?(.*)/,2),2),o=r[0],i=function(e,t){return e.split("&").reduce((function(e,n){var r=n.split("=")[0];return t.indexOf(r)>-1?[].concat(C(e),[n]):[].concat(C(e),["".concat(r,"=REDACTED")])}),[]).join("&")}(r[1],n);return"".concat(o,"?").concat(i)}catch(t){return e}return e},L=[],M=!1,U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c.at.getDocument(),r=n.location,o=r.pathname,i=D(r.search,{allowedQueryParams:t}),a=i.indexOf("?")>-1?"&":"?",u="".concat(o).concat(i).concat(a,"gaPage=[").concat(e,"]");return u},V=function(e){e&&Object.keys(e).forEach((function(t){var n,r,o;n="dimension".concat(t),r=e[t],(o=c.at.getWindow().ga)&&n&&o("set",n,r)}))},B=function(e,t,n,r,o,i,a){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s=c.at.getWindow(),l=s.ga,f=c.at.getDocument();try{var p=U(a||"unknown",u),d=""===r?null:r;V(i),l("send","event",e,t,n,{page:p,eventValue:d,nonInteraction:1})}catch(e){v({message:e.get_Message&&e.get_Message()||e.message||e,component:"Tracking.trackEvent",level:"error"})}o&&setTimeout((function(){f.location=o}),100)},G=function(e,t,n,r,o,i,a){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=e+t+n+r;L.indexOf(u)<0&&(L.push(u),B(e,t,n,r,o,i,a,c))},q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!==e){var r=function(){return e.trackOnce?G.apply(void 0,arguments):B.apply(void 0,arguments)};r(e.category,e.action,e.label,e.value,null,e.dimensions,t,n)}},F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;M||(M=!0,o.Z.subscribe("ga-handle-analytics-event",(function(t){q(t,e,n)})),o.Z.subscribe("ga-track-event-with-page-name",(function(r){r&&B(t||"unknown",r.action,r.label,r.value,null,null,e,n)})))},H=function(e,t,n){var r=c.at.getWindow().ga,o="".concat(n,"set"),i="dimension".concat(e);return r(o,i,t),(o+i+t).length},W=function(e,t,n,r,o,i,a){var u=c.at.getDocument().location,s=c.at.getWindow().ga,l=(0,c.S3)(),f="".concat(l.width,"x").concat(l.height);s&&(s("".concat(t,"require"),"linker"),s("".concat(t,"require"),"displayfeatures"),s("".concat(t,"linker:autoLink"),n.GaSkyscannerDomains));var p=0;if(p+=H(1,n.WebNode,t),p+=H(2,"POD_UNKNOWN",t),p+=H(3,n.SvnBuildRevision,t),p+=H(5,n.CurrentUserLanguage,t),p+=H(10,f,t),p+=H(62,r.cabinClass,t),p+=H(143,r.market,t),n.userId&&(p+=H(145,n.userId,t)),p+=H(146,n.preferencesId,t),p+=H(130,n.visibilityState,t),p+=H(148,r.deviceModel,t),p+=H(149,u.pathname,t),p+=H(153,n["Gdpr Information"],t),p+=H(154,n["Gdpr Adverts"],t),p+=H(155,n["Gdpr Version"],t),p+=H(156,n["Gdpr Active"],t),p+=H(157,n["Gdpr Initialised"],t),p+=H(158,n.pageType,t),p+=H(159,n.userLocale,t),p+=H(160,n.userCurrency,t),p+=H(161,n.userGeoMarket,t),p+=function(e,t,n){var r=0;if(t){var o={0:[45,46,47,50],1:[93,94,95,96],2:[97,98,99,100],3:[101,102,103,104],4:[105,106,107,108],5:[109,110,111,112]},i=t.itineraryLegs;if(i)for(var a=0,c=i.length;a<c;a++){var u=i[a],s=o[a];r+=H(s[1],u.Inbound,n),r+=H(s[0],u.Outbound,n),r+=H(s[2],u.Date,n),r+=H(s[3],u.Carrier,n)}r+=H(44,t.redirectId,n),r+=H(48,e.inboundDate,n),r+=H(49,t.websiteId,n),r+=H(51,"transport",n)}return r}(r,n.config.skippy,t),!0===n.ShouldLogGaFeatureSetInDimension&&"flightskippy"!==a&&(p+=H(19,n.featureTestString||function(e){var t,n=/^.*_V\d+$/i,r=e.featureTests;return e&&e.featureTests&&(t=Object.keys(r).reduce((function(e,t){return null==t||t.match(n)&&e.push("".concat(t,"-").concat(r[t])),e}),[]).join("&&")),t}(n.config),t)),"UNKNOWN"!==n.VarnishABGroup&&(p+=H(18,n.VarnishABGroup,t)),o&&Object.keys(o).forEach((function(e){p+=H(e,o[e],t)})),r.priceAlertId&&(p+=H(129,r.priceAlertId,t)),"airli"===i){var d=function(e,t,n){var r={"Trip Type":"56","Origin Code Leg 1":"52","Destination Code Leg 1":"53","Date Leg 1":"54","Origin Code Leg 2":"73","Destination Code Leg 2":"74","Date Leg 2":"75","Cabin Class Leg 2":"76","Origin Code Leg 3":"77","Destination Code Leg 3":"78","Date Leg 3":"79","Cabin Class Leg 3":"80","Origin Code Leg 4":"81","Destination Code Leg 4":"82","Date Leg 4":"83","Cabin Class Leg 4":"84","Origin Code Leg 5":"85","Destination Code Leg 5":"86","Date Leg 5":"87","Cabin Class Leg 5":"88","Origin Code Leg 6":"89","Destination Code Leg 6":"90","Date Leg 6":"91","Cabin Class Leg 6":"92"},o=(0,c.zd)(e,t),i={};Object.keys(r).forEach((function(e){var t=r[e];o[e]&&(i[t]=o[e])})),i[57]=[o.Adults,o.Children,o.Infants].reduce((function(e,t){return e+t})),i[58]=n;for(var a=2;a<=6;++a)i[r["Date Leg ".concat(a)]]&&(i[r["Cabin Class Leg ".concat(a)]]=e.cabinclass);return i}(r,new Date,a);Object.keys(d).forEach((function(e){p+=H(e,d[e],t)}))}return function(e,t,n){var r=c.at.getWindow().ga,o=c.at.getDocument().location,i=o&&o.pathname||"",a=o&&D(o.search,{allowedQueryParams:n})||"",u=a.indexOf("?")>-1?"&":"?",s="".concat(i).concat(a).concat(u,"gaPage=[").concat(e,"]"),l=new T("sstrack").getValue();r&&(null!==l&&r("".concat(t,"set"),"userId",l),r("".concat(t,"send"),"pageview",s))}(e,t,n.allowedQueryParams),p},$=function(e){return new x(e)};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","UK","NO","LI","IS"],z=!0,Z=!1,Q="gdpr",X="isGdprActiveInMarket",ee=Object.freeze({OPTIN:"optin",INFORMATION:"information",ADVERTS:"adverts",VERSION:"version"}),te=Object.freeze((a(P={},ee.INFORMATION,z),a(P,ee.ADVERTS,z),a(P,ee.VERSION,2),P)),ne=Object.freeze((a(R={},ee.INFORMATION,Z),a(R,ee.ADVERTS,Z),a(R,ee.VERSION,2),R)),re=function(e){return!e||J.indexOf((e||"").toUpperCase())>=0},oe=function(e,t){return K(K({},t),{},a({},X,re(e)))},ie=function(e){return parseInt(e.getValue(ee.VERSION),10)||0},ae=function(e,t,n){var r=e.getValue(n);return null!=r?"true"===(r||""):function(e){return re(e)?Z:z}(t)},ce="init",ue=function(e,t){t?(e.setValue(ce,!0),e.store(null,{secure:!1})):(e.deleteValue(ce),e.store(730,{secure:!1}),function(){var e=c.at.getWindow();e.Sb&&e.Sb.trackingPreferences&&e.Sb.trackingPreferences.initialLoad&&delete e.Sb.trackingPreferences.initialLoad}())},se=function(){return I(Q)&&(e=$(Q),2===ie(e));var e},le=function(){return(new T(Q).getValue()||"").indexOf("".concat(ce,":::true"))>=0},fe=function(e,t){if(!I(Q))return oe(e,t);var n=$(Q);return ie(n)<2?oe(e,t):(function(e){"true"===(e.getValue(ce)||"")&&ue(e,!1)}(n),function(e,t){var n,r=ae(e,t,ee.INFORMATION),o=ae(e,t,ee.ADVERTS);return a(n={},ee.INFORMATION,r),a(n,ee.ADVERTS,o),a(n,ee.VERSION,ie(e)),a(n,X,re(t)),n}(n,e))},pe=function(e){if(!e)throw new Error("Market should be provided to get tracking preferences");return re(e)?function(e){var t;return function(){var e=c.at.getWindow(),t=e.Sb&&e.Sb.trackingPreferences&&e.Sb.trackingPreferences.initialLoad,n=le();return t||n}()||le()?(a(t={},ee.INFORMATION,Z),a(t,ee.ADVERTS,Z),a(t,ee.VERSION,2),a(t,X,re(e)),t):fe(e,ne)}(e):function(e){return fe(e,te)}(e)},de=function(e){return pe(e)[ee.INFORMATION]},he=function(){return function(){var e=c.at.getWindow();e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e.ga.q=e.ga.q||[]).push(n)},e.ga.l=1*new Date}()};function ve(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ve(i,r,o,a,c,"next",e)}function c(e){ve(i,r,o,a,c,"throw",e)}a(void 0)}))}}var ye=n(4264),me=n.n(ye),_e=n(2851),be=n(7379),we=n.n(be),Oe=function(){return new Date},ke=function(e){return e.getTimezoneOffset()},Ee=n(7822),Se=n.n(Ee),xe={EU_WEST_1:0,EU_CENTRAL_1:1,AP_SOUTHEAST_1:2,AP_NORTHEAST_1:3,UK1:64,UK2:65,NL1:66,SG1:67,HK1:68},Te={MILLI:0,SECOND:1,DAY:2,WEEK:4,MONTH:5,YEAR:6,ANYTIME:7,MINUTE:8},Ie=c.at.getWindow(),Ne=function(e){return"".concat(e||"").trim()},Ae=function(e){if(!isFinite(e))return 0;for(var t=0,n=1,r=Math.pow(10,20);Math.round(e*n)/n!==e&&n<=r;){if(n>=r)return null;n*=10,t++}return t},je=function(e){var t=null,n=isNaN(+e)?null:parseFloat(e);if(n&&"number"==typeof n&&!isNaN(n)){if((t={precision:Ae(n),amount:parseInt("".concat(n).replace(".",""),10)}).amount.toString().length>=10){var r=t.amount.toString().length-10;t.precision-=r,t.amount=parseInt(t.amount.toString().substring(0,10),10)}2147483647-t.amount<0&&(t.precision-=1,t.amount=parseInt(t.amount.toString().substring(0,9),10))}return t},Ce=function e(t){if(!t)return t;var n=JSON.parse(Se().stringify(t));return Object.keys(n).forEach((function(t){var r=n[t];(r&&(r.constructor===Object||r.constructor===Array)||"function"==typeof r)&&(n[t]=e(r)),function(e){return null==e||""===e||"object"===i(e)&&0===Object.keys(e).length||"number"==typeof e&&e!==+e}(r)&&delete n[t]})),Array.isArray(n)&&(n=n.filter(Boolean)),n},Pe=function(e){return isNaN(+e)?null:parseInt(e,10)},Re=function(e){return e&&"unknown"===e.toString().toLowerCase()?null:e},De=function(e,t){if(!e)return null;if(e instanceof Date)return e;if("number"==typeof e)return new Date(e);if("string"==typeof e&&"YYYYMMDDHHmmss"===t)try{return new Date(e.slice(0,4),e.slice(4,6)-1,e.slice(6,8),e.slice(8,10),e.slice(10,12),e.slice(12,14))}catch(e){return null}if("string"==typeof e){var n,r=e.split(/[ZT:\\.\\//-]/);try{n=new Date(Date.UTC(r[0],r[1]-1||0,r[2]||1,r[3]||null,r[4]||null,r[5]||null))}catch(e){return null}return n instanceof Date&&!isNaN(n.valueOf())?n:null}return null},Le=function(e){if("boolean"==typeof e)return e;if("number"==typeof e)return!!e;if("string"==typeof e)switch(Ne(e.toLowerCase())){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1;default:return null}return null},Me=function(e,t,n,r){var o=n||null,i=e;"string"==typeof e&&e&&4===e.length&&e.substring(2,4)<=12&&(i="20".concat(e));var a=De(i,r);a&&"string"==typeof i&&!o&&(o=function(){switch(i.length){case 4:return"YEAR";case 6:case 7:return"MONTH";case 8:case 10:return"DAY";default:return"MILLI"}}()),a&&a instanceof Date&&!o&&(o="MILLI");var c,u,s,l,f,p,d,h,v={};if(a&&(v={unix_time_millis:a.getTime(),date_time_kind:Te[o]}),a&&a instanceof Date&&t){var g=(s=null,l=0,f=function(e,t,n){var r=t,o=n,i=e||new Date,a=ke(i),c=r&&ke(r),u=o&&ke(o);return{thisTZOffset:a,jan:r=c||ke(new Date(i.getFullYear(),0,1)),jul:o=u||ke(new Date(i.getFullYear(),6,1))}}(a,c,u),p=f.thisTZOffset,d=f.jan,h=f.jul,d>h?(s=h,l=d-h):d<h&&(s=d,l=h-d),h!==d&&null!=s&&s===p?{DSTOffset:l,TZOffset:-1*p-l}:{DSTOffset:0,TZOffset:-1*p||0});v.timezone_offset_mins=g.TZOffset||0,v.daylight_savings_offset_mins=g.DSTOffset||0}return v.unix_time_millis||v.date_time_kind?Ce(v):null},Ue=function(e){return Re(e)?(n=/([a-z]{3}[_][a-z]{3}[_][0-9]{5}[_][0-9]{5})/i,(t=e)&&n.test(t)?t.match(n)[0].toUpperCase():"DIR_ECT_00000_00000"):null;var t,n},Ve=function(e){return Re(e)?(n=/(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/gi,(t=e)&&n.test(t)?t.match(n)[0]:null):null;var t,n},Be=function(e){var t=e.version,n=e.nodeName,r=e.identifier,o=e.version_identifier,i=n&&n.length>=8?n.substring(5,8):null,a=e.dc;return Ce({data_center:void 0===a?xe[i]:a,name:n,version_tag:t,version_identifier:o,identifier:r})},Ge=function(){for(var e=[],t=0;t<36;)e[t]=Math.floor(16*Math.random()),t+=1;e[14]=4,e[19]=3&e[19]|8;for(var n=0;n<36;)e[n]="0123456789abcdef"[e[n]],n+=1;return e[8]=e[13]=e[18]=e[23]="-",e.join("")},qe=function(e,t,n,r,o){var i=!1;-1===[2,1,0].indexOf(Number(t))&&(i=!0);var a=/.+\..+\.(.+.\..+)$/.exec(o),c={utid:e,user_status:i?"0":t.toString(),authentication_status:Pe(t),preference_string:Ne(n),sstrack:r,ga_cid:a&&a.length>1?a[1]:null};return Ce(c)},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce({country:e.market,currency:e.currency,locale:e.locale})},He=function(){var e=(0,c.S3)(),t=e.width*e.width+e.height*e.height,n=Math.round(Math.sqrt(t)/72*10)/10,r=Ie.screen||{};return{usable_width:e.width,usable_height:e.height,display_width:r.width,display_height:r.height,display_ppi:r.pixelDepth,diag_in_inches:n,device_pixel_ratio:Ie.device_pixel_ratio||null}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.navigator,r={user_agent:n.userAgent,vendor_name:n.vendor,browser_name:Re(e.browserName)||n.appName,browser_version:Re(e.browserVersion)||n.appVersion,is_browser:Re(e.desktop),display_height:Pe(t.display_height),display_width:Pe(t.display_width),display_ppi:Pe(t.display_ppi),usable_display_width:Pe(t.usable_width),usable_display_height:Pe(t.usable_height),diagonal_screen_size_int:je(t.diag_in_inches),device_pixel_ratio_int:je(t.device_pixel_ratio)||null,ip_address:Ve(e.ipAddress),is_mobilephone:Re(e.mobile),is_tablet:Re(e.tablet),os_version:Re(e.osVersion)};return document.referrer&&(r.referrer_url=document.referrer),Ce(r)},$e=function(e,t){var n=e||{},r=n.utid,o=n.authState,i=n.preferences,a=n.ssTrack,c=n.gaCookie,u=n.screen,s=n.nav,l=n.nodeName,f=n.scaffoldVersion,p=n.componentContext,d=n.config,h=n.guid,v={};try{v.produced_by=2,v.producer_version=f,v.service_instance_fingerprint=Be({version:f,nodeName:l}),v.traveller_identity=qe(r,o,i,a,c),v.client_details=We(p,u,s),v.traveller_culture_settings=Fe(p),v.ab_tests=Ce(d&&d.featureTests||null),v.created_on=Me(new Date(Date.now()),!0),v.associate_id=Ue(p&&p.associateId||null),v.guid=h||Ge()}catch(e){if(!t)throw e}return v};function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je="https://slipstream.skyscanner.net",ze="/slipstream",Ze=function(e,t,n){var r;if(n){var o=Ke(Ke({},t),{},{event_header:$e()});r=JSON.stringify(o)}else r=JSON.stringify(t);return u(e,{method:"POST",body:r,headers:{"Content-Type":"application/json"}}).catch((function(t){console.error("".concat(t,". Request to ").concat(e," failed. Request payload: ").concat(r,"."))}))},Qe=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.enhance,i=void 0===o||o;if(m(this,e),"public"!==t&&"public-sandbox"!==t)throw new Error('GrapplerLogger environment must be "public" or "public-sandbox"');this.env=t,this.serviceName=n,this.enhance=i,this.endpoint=(0,c.PQ)()?ze:Je}return b(e,[{key:"sendApplogMessage",value:function(e){var t="".concat(this.endpoint,"/grp/v1/applog/").concat(this.env,"/").concat(this.serviceName);return Ze(t,e,this.enhance)}},{key:"sendCustomEvent",value:function(e,t,n){var r="".concat(this.endpoint,"/grp/v1/custom/").concat(this.env,"/").concat(this.serviceName,"/").concat(e,"/").concat(t);return Ze(r,n,this.enhance)}},{key:"sendCustomEvents",value:function(e,t,n){return function(e,t,n){var r=t.reduce((function(e,t){return e+(n?JSON.stringify(Ke(Ke({},t),{},{event_header:$e()})):JSON.stringify(t))}),"");return u(e,{method:"POST",body:r,headers:{"Content-Type":"application/json"}}).catch((function(t){console.error("".concat(t,". Request to ").concat(e," failed. Request payload: ").concat(r,"."))}))}("".concat(this.endpoint,"/grp/v1/custom/").concat(this.env,"/").concat(this.serviceName,"/").concat(e,"/").concat(t),n,this.enhance)}},{key:"sendCustomEventWithEncodedUrl",value:function(e,t,n){var r="".concat(btoa("".concat(this.serviceName,"/").concat(e,"/").concat(t))),o="".concat(this.endpoint,"/grp/v1/encoded/").concat(this.env,"/").concat(r);return Ze(o,n,this.enhance)}}]),e}(),Xe=c.at.getWindow(),et="//slipstream.skyscanner.net",tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe.location.href;if(!e)return{};var t=_e.extract(e),n=t.split("&"),r={};return n.forEach((function(e){var t=e.split("=");r[t[0]]?r["".concat(t[0],"__duplicates__")]?r["".concat(t[0],"__duplicates__")].push(t[1]):r["".concat(t[0],"__duplicates__")]=[t[1]]:r[t[0]]=t[1]})),r},nt=function(e){return new T(e).getValue()},rt=function(e,t){var n=t||{},r=n.Utils||{},o=r.Comms||{},i=((n.Hotel||{}).Details||{}).tracking||{};return{searchConfig:n.searchConfig||{},nodeIp:r.nodeIp,experiments:o.getExperiments&&o.getExperiments()||null,details:i}},ot=function(e,t){return{host:t.hostName||{},version:t.version||{},searchControls:t.searchControls||{}}},it=function(e,t){return{environment:t.WebNode,varnishABGroup:t.VarnishABGroup,gaCookie:nt("_ga"),guid:t.guid}},at=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i={};try{var a=t.Api||{tracking:{},traveller:{}},u=t.SearchControlsParameters||{},s=t.redactUrl&&t.redactUrl(Xe.location.href)||Xe.location.href;i={ancillary:t.ancillary,view_action:t.view_action,view_type:t.view,page_type:t.pageType,referrer:c.at.getDocument().referrer,currentUrl:s,nodeName:t.scaffoldNode,scaffoldVersion:t.scaffoldversion,requestId:a.tracking&&a.tracking.getRequestId&&a.tracking.getRequestId()||t.requestId,componentContext:a.componentContext&&a.componentContext()||t.componentContext,analyticsPageName:t.analyticsPageName,analyticsPageUrl:t.gaPageView,carscanner:ot(0,r),hotels:rt(0,n),culture:t.culture,config:t.config,searchControlParams:u,nav:Xe.navigator||{},screen:He(),existingParams:tt(s)||a.queryParameters(),ssTrack:nt("sstrack"),timeToFirstByte:Xe.performance.timing.responseStart-Xe.performance.timing.fetchStart,timeToDomContentLoaded:Xe.performance.timing.domContentLoadedEventStart-Xe.performance.timing.fetchStart,isNewUser:t.isNewUser},i=we()({},i,it(0,o))}catch(t){if(!e)throw t}if(e){i.searchControlParams=null,i.carscanner=null,i.hotels=null,i.config=null,i.culture=null;var l={tracking:{grapplerSlipstreamEndpoint:et}};i=we()({},i,{config:l})}return i},ct=function(e,t){var n=function(e,t){var n=e,r=t;"/"!==e.substring(0,1)&&(n="/".concat(e)),":"!==(r="https:").substring(r.length-1)&&(r="".concat(r,":"));var o="/view"===n||(0,c.PQ)()?"/slipstream":"".concat(r).concat(et);return"".concat(o).concat(n)}(t),r=JSON.stringify(e);return u(n,{method:"POST",body:r}).catch((function(e){console.error("".concat(e,". Request to ").concat(n," failed. Request payload: ").concat(r,"."))}))},ut=function(e,t,n,r,o,i){var a=n?we()({},n):{};if(a.utid=t,a.preferences=r,!a.componentContext)try{a.componentContext=i||{}}catch(e){}var c=o.createError(a,e);return ct(c,"applog")},st=n(369),lt=n.n(st),ft={DCS:{EU_WEST_1:0,EU_CENTRAL_1:1,AP_SOUTHEAST_1:2,AP_NORTHEAST_1:3,UK1:64,UK2:65,NL1:66,SG1:67,HK1:68},LOCATION_ATT:{DDB_ID:0,IATA:1,SS_GEO2_ID:2,ICAO:3,SS_GEO1_ID:4,THIRD_PARTY:5,PLACE_NAME:6},GEOKIND:{COORDINATES:0,SHAPE:1},PRECISION:{MILLI:0,SECOND:1,DAY:2,WEEK:4,MONTH:5,YEAR:6,ANYTIME:7},CABINCLASS:{ECONOMY:0,PREMIUMECONOMY:1,BUSINESS:2,FIRST:3},PASSENGERGROUPVERSION:{ADULT_12_PLUS:0,ADULT_18_PLUS:1},ITINERARYKIND:{RETURN:0,ONE_WAY:1,MULTI_DESTINATION:2},MONEYUNIT:{CENTI:0,MILLI:1,MICRO:2,WHOLE:3},BUSINESSDOMAIN:{FLIGHT:0,HOTEL:1,CAR_HIRE:2,B2B:3,NONE:4},FLIGHTSEARCHKIND:{FULLY_QUALIFIED:0,BROWSE:1,MONTH:2,MAP:3,UNKNOWN:4},SEVERITY:{EMERG:0,ALERT:1,CRIT:2,ERR:3,WARN:4,NOTICE:5,INFO:6,DEBUG:7}},pt=function(e,t){return ft[e][t]},dt=function(e){for(var t=0;t<e.length;t++){var n=Le(e[t]);if("boolean"==typeof n)return n}return null},ht=function(e){var t={location_attribute_encoding:e.type,location_id:e.id,location_name:e.name,location_descriptor_level:e.descriptor_level,location_descriptors:e.descriptors_map,locale:e.locale};return Ce(t)},vt=function(e){var t={kind:pt("GEOKIND ","COORDINATES"),latitude:e.latitude||null,longitude:e.longitude||null,elevation:e.elevation||null};return t.latitude&&(t.latitude_int=je(t.latitude)),t.longitude_int&&(t.longitude_int=je(t.longitude)),t.elevation_int&&(t.elevation_int=je(t.elevation)),Ce(t)},gt=function(e,t){var n={};return e&&(n.location_attribute=ht(e)),t&&(n.geo=vt(t)),n},yt=function(e,t){var n,r=null,o=(n=e,isNaN(+n)?null:parseFloat(n));if(o){var i,a=je(o),c={0:{type:"WHOLE",pr:0},1:{type:"CENTI",pr:2},2:{type:"CENTI",pr:2},3:{type:"MILLI",pr:3},4:{type:"MICRO",pr:6},5:{type:"MICRO",pr:6},6:{type:"MICRO",pr:6}}[a.precision];if(!c)return null;a={precision:c.pr,amount:a.amount*Math.pow(10,c.pr-a.precision)},i=c.type,r={currency:t||null,amount:a.amount,unit:pt("MONEYUNIT",i)}}return Ce(r)},mt=function(e,t){var n=null,r=De(e),o=De(t);if(!r&&o&&(r=new Date(Date.now())),r&&o){var i=o.getTime()-r.getTime();n=Math.round(i/864e5)}return n},_t=function(e){return Ce({web_node:e.environment,varnish_ab_group:e.varnishABGroup})},bt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.preview,r=t.previewid,o=t.previewpageid,i=t.previewrefresh;return e=n||r||o||i?{is_preview:Le(n),preview_id:r,preview_page_id:o,preview_refresh:i}:{is_preview:!1},Ce(e)},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.utm_source,r=e.utm_medium,o=e.utm_campaign,i=e.utm_content,a=e.utm_term,c=e.utm_id,u=e.utm_name,s=e.utm_keyword,l=e.ksh_id,f=e.gclid,p=e.yclid,d=e._ga,h=e.acquisition_id;return Ce({utm_source:n,utm_medium:r,utm_campaign:o,utm_content:i,utm_term:a,utm_id:c,utm_name:u,utm_keyword:s,ksh_id:l,gclid:f,yclid:p,_ga:d,acquisition_id:h||t.trackedAcquisitionId,associate_id:Ue(t.associateId),associate_id_parameters:t.associateIDParameters,associate_id_timestamp:Me(t.associateIdLastSet,!1,"SECOND","YYYYMMDDHHmmss")})},Ot=function(e,t){return null!=e.children&&"object"===i(e.children)?{adult_count:Pe(e.adults),non_adult_ages:e.children,group_model:ft.PASSENGERGROUPVERSION.ADULT_18_PLUS}:Ce({adult_count:Pe(e.adults||t.adults),child_count:Pe(e.children||t.children),student_count:Pe(e.infants||t.infants),infant_count:Pe(e.students||t.students)})},kt=function(e,t,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=e,u=(Re(c.originType)||"").toLowerCase();switch(u){case"city":o={COUNTRY:Re(c.originCountry)};break;case"airport":o={CITY:Re(c.originCityId),COUNTRY:Re(c.originCountry)};break;default:o=null}var s,l={type:Re(c.originId)?pt("LOCATION_ATT","SS_GEO1_ID"):pt("LOCATION_ATT","IATA"),id:Re(c.originId)||Re(c.originIataCode),name:Re(c.originName),descriptor_level:Re(u),descriptors_map:Re(o),locale:Re(r)};if(!a){var f,p=(Re(c.destinationType)||"").toLowerCase();switch(p){case"city":f={COUNTRY:Re(c.destinationCountry)};break;case"airport":f={CITY:Re(c.destinationCityId),COUNTRY:Re(c.destinationCountry)};break;default:f=null}s={type:Re(c.destinationId)?pt("LOCATION_ATT","SS_GEO1_ID"):pt("LOCATION_ATT","IATA"),id:Re(c.destinationId)||Re(c.destinationIataCode),name:Re(c.destinationName),descriptor_level:Re(p),descriptors_map:Re(f),locale:Re(r)}}var d=dt([c.inboundAlts&&c.inboundAlts.value?c.inboundAlts.value:c.inboundAlts,c.inboundNearbyAltsEnabled]),h=dt([c.outboundAlts&&c.outboundAlts.value?c.outboundAlts.value:c.outboundAlts,c.outboundNearbyAltsEnabled]);return c=i?{leg_number:t,origin:gt(s),destination:gt(l),travel_on:Me(c.inboundDate),cabin_class:pt("CABINCLASS",(n||"").toUpperCase()),include_nearby_origins:null,include_nearby_destinations:null,nearby_origins:null,nearby_destinations:null}:{leg_number:t,origin:gt(l),destination:gt(s),travel_on:Me(c.date||c.outboundDate),cabin_class:pt("CABINCLASS",(n||"").toUpperCase()),include_nearby_origins:h,include_nearby_destinations:d,nearby_origins:null,nearby_destinations:null},Ce(c)},Et=function(e,t,n,r,o){var i=t.searchConfig,a=void 0===i?{}:i,c=t.details||{},u=n.sd,s=n.ed,l=n.na,f=n.nr,p=n.q,d=n.fileName,h=n.locale,v=n.bpt_eid,g=n.fhids,y=n.id,m=n.eid,_=a.startDate,b=a.endDate,w=a.numGuests,O=a.numRooms,k=a.queryId,E=a.queryString,S=a.fixedHotelIds,x=n["s-f_iplace"]||null,T=null,I=null,N=null;if(/seo_landing_page$/.test(e)){var A={place:/\/\/[^\/]+\/[^\/]+\/([^\/]+)/gi.exec(o),localName:/([^\/]+)(?=-[^-]*$)/gi.exec(o)};T=A.place&&A.place.length>1?A.place[1]:null,I=A.localName&&A.localName.length>0?A.localName[1].replace(/-/gi," "):null}var j,C=x||T;C&&(N={type:pt("LOCATION_ATT","SS_GEO1_ID"),id:C,name:d||I||null,descriptor_level:function(){switch(C.length){case 3:return"AIRPORT";case 4:return"CITY";default:return null}}(),locale:h||r||null}),/hotels_details/.test(e)&&c&&c["Hotel City Id"]&&(j={type:pt("LOCATION_ATT","DDB_ID"),id:c["Hotel City Id"]||null,name:c["Hotel City"]||null,descriptor_level:"CITY",locale:h||r||null});var P=S||g||null;P=P&&/,/.test(P)?(P=P.split(",")).map((function(e){return e&&Pe(e)||null})).filter(Boolean):[Pe(P)];var R={search_location:C?gt(N||{}):null,check_in_date:Me(_||u||c["Checkin Date"],!1,"DAY")||null,check_out_date:Me(b||s||c["Checkout Date"],!1,"DAY")||null,number_guests:Pe(w||l)||null,number_rooms:Pe(O||f)||null,query_text:E||p||d||null,number_nights:Pe(mt(_||u,b||s)),number_days_in_future:Pe(mt(null,_||u)),internal_query_id:k||v||m||null,fixed_list_ids:P},D=null;return/details$/.test(e)&&(D={ddb_id:Pe(c["Hotel Id"]||y),name:c["Hotel Name"]||null,primary_chain:null,associated_chains:null,location:gt(j||{}),accomodation_type:null,has_description:Le(c["Hotel Has Description"]),has_reviews:Le(c["Hotel Has Reviews"]),image_count:Pe(c["Hotel Number of Images"])}),Ce({search_params:R,experiments:t.experiments,hotels_service_fingerprint:Be({ip:t.nodeIp}),hotel_info:D})},St=function(e,t,n,r){var o,i,a=t.searchControls,c=t.host,u=t.version,s=pt("LOCATION_ATT","DDB_ID"),l={type:s,id:a.pick_up,name:a.pick_up_name_en||a.pick_up_name,descriptor_level:(a.pick_up_type||"").toUpperCase(),locale:a.pick_up_name_en?"en-GB":n,descriptors_map:{localized_name:a.pick_up_name,country_id:a.pick_up_country_id,country:a.pick_up_country_name,city:a.pick_up_city_code,iata:a.pick_up_iata,admin:a.pick_up_admin}};l.descriptors_map.iata||delete l.descriptors_map.iata,l.descriptors_map.city||delete l.descriptors_map.city,a.drop_off?((o={type:s,id:a.drop_off,name:a.drop_off_name_en||a.drop_off_name,descriptor_level:(a.drop_off_type||"").toUpperCase(),locale:a.drop_off_name_en?"en-GB":n,descriptors_map:{localized_name:a.drop_off_name,country_id:a.drop_off_country_id,country:a.drop_off_country_name,city:a.drop_off_city_code,iata:a.drop_off_iata,admin:a.drop_off_admin}}).descriptors_map.iata||delete o.descriptors_map.iata,o.descriptors_map.city||delete o.descriptors_map.city):(o=l).drop_off_date=a.drop_off_date,r?r&&(i={passenger_number:Pe(a.num_of_passengers),pickup_location:gt(l),pickup_timestamp:Me(a.pick_up_date),dropoff_location:gt(o),return_timestamp:a.drop_off_date?Me(a.drop_off_date):null,is_return:!!a.drop_off_date}):i={driver_age:Pe(a.driver_age),pickup_location:gt(l),pickup_timestamp:Me(a.pick_up_date),dropoff_location:gt(o),dropoff_timestamp:Me(a.drop_off_date)};var f={search_params:i};return r||(f.carhire_service_fingerprint=Be({version:u,nodeName:c})),Ce(f)},xt=function(e,t,n,r,o,i){var a,c,u,s,l=t||{},f=n.alertId,p=n.alertPrice,d=n.alertPriceChecked,h=n.currency,v=n.qp_prevCurrency,g=n.qp_prevPrice,y=n.qp_prevProvider,m=n.age,_=[];if(!i){var b=e.legs||l.legs||[];a=l.cabinclass||e.cabinclass||"",c=(l.tripType||e.tripType||"").replace("-","_"),b.forEach((function(t,n){return _.push(kt(t,n,a,e.locale))}))}0===_.length&&(_.push(kt(e,0,a,e.locale,!1,i)),"return"!==(c||"").toLowerCase()||i||_.push(kt(e,1,a,e.locale,!0))),i||(u=_.length>0&&_[0].travel_on?_[0].travel_on.unix_time_millis:null,s=_.length>1&&_[_.length-1].travel_on?_[_.length-1].travel_on:u);var w={kind:i?null:pt("ITINERARYKIND",c.toUpperCase()),cabin_class:i?null:pt("CABINCLASS",a.toUpperCase()),booking_horizon:mt(null,u),trip_duration:mt(u,s)},O=Ce(w);O.leg=_,O.passenger_group=Ot(e,l);var k=2===_.length&&(_[0].destination!==_[1].origin||_[0].origin!==_[1].destination)||_.length>2;O.is_open_jaw=k;var E={price:yt(g,v),provider:y,age:Pe(m)},S={search_params:O,price_alert:{id:f||e.priceAlertId,alert_price:yt(p,h||e.currency),date_checked:Me(d)},previous_pricing:E};return S.search_kind=pt("FLIGHTSEARCHKIND","browse-view"===r?"BROWSE":"month-view"===r?"MONTH":"day-view"===r?"FULLY_QUALIFIED":"inspiration_map"===r||"inspiration-map"===r?"MAP":"UNKNOWN"),Ce(S)},Tt=function(e,t,n,r,o){var i,a=e||{componentContext:{}},u=c.at.getWindow();u.performance&&u.performance.mark&&u.performance.getEntriesByName&&(u.performance.mark("view_event_fired"),i=Math.round(u.performance.getEntriesByName("view_event_fired")[0].startTime)),a.utid=n,a.preferences=o||e.preferences,a.authState=r;var s,l=a.page_type,f=a.searchControlParams,p=a.carscanner,d=a.hotels,h=a.ancillary,v=a.view_action,g=a.view_type,y=a.requestId,m=a.currentUrl,_=a.componentContext,b=a.analyticsPageName,w=a.analyticsPageUrl,O=a.existingParams,k=a.timeToFirstByte,E=a.isNewUser,S=t("airli"===h&&v?v:h),x={event_header:$e(a),url:Ne(m),analytics_page_url:Ne(w),analytics_page_name:Ne(b),request_id:Ne(y),ancillary:Ne(h),view_action:Ne(v),view_type:Ne(g),page_type:Ne(l),tld:Ne(_.tld),is_internal_user:_.internalUser,tracking_category:Ne(S),page_preview:bt(O),additional_service_info:_t(a),url_tracking_params:wt(O,_),business_domain:null,is_user_search:!1,time_to_first_byte:k,time_to_view_event:i,is_new_user:E};return/^news/gi.test(b)?(x.page_number=(s=O,Ce({page_number:Pe(s["page-number"])})).page_number,x.business_domain=pt("BUSINESSDOMAIN","NONE")):"AirportTransfers"===g?(x.airport_transfers_view=St(b,p,_.locale,!0),x.business_domain=pt("BUSINESSDOMAIN","CAR_HIRE"),"Results"===v&&(x.is_user_search=!0)):/^carhire/gi.test(b)?(x.car_hire_view=St(b,p,_.locale,!1),x.business_domain=pt("BUSINESSDOMAIN","CAR_HIRE"),/results$/gi.test(b)&&(x.is_user_search=!0)):/^hotel/gi.test(b)?(x.hotels_view=Et(b,d,O,_.locale,m),x.business_domain=pt("BUSINESSDOMAIN","HOTEL"),(/^hotels_results/gi.test(b)||"HotelsResults"===v)&&(x.is_user_search=!0)):/^flights_seo_landing_page|month-view|browse-view|day-view|home|inspiration_map$/gi.test(b)&&(x.flights_view=xt(_,f,O,b,v,!!/^inspiration_map$/gi.test(b)),x.business_domain=pt("BUSINESSDOMAIN","FLIGHT"),/^month-view|browse-view|day-view|inspiration_map$/gi.test(b)&&(x.is_user_search=!0)),null==x.business_domain&&(x.business_domain=pt("BUSINESSDOMAIN","NONE")),x},It=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e||{};delete n.nav;try{var r={event_header:$e(n,!0),severity:pt("SEVERITY","ERR"),exception:{type:t.name,message:t.message},fields:n,scaffolding:{path:"GrapplerTracking.js"}};return t.stack&&(r.exception.traceback=t.stack),Ce(r)}catch(e){try{g({component:"view-tracking",message:"".concat(e.message,". Pruned object: ").concat(JSON.stringify(lt()(n,30)))})}catch(e){g({component:"view-tracking",message:"".concat(e.message,". Object keys: ").concat(Object.keys(n))})}return{}}},Nt=function(e,t,n,o,i){return function(e,t,n,r,o,i){var a=r.buildViewData(t,o,e,i,n);return ct(a,"view")}(e,t,n,r,o,i)},At=function(){function e(){m(this,e),this.hasRun=!1,this.utidComplete=!1,this.requestComplete=!1}return b(e,[{key:"onRequestAshxComplete",value:function(e,t,n,r,o){this.requestComplete=!0,this.hasRun||!e&&!this.utidComplete||(this.hasRun=!0,Nt(e,t,n,r,o))}},{key:"onUtidCallComplete",value:function(e,t,n,r,o){this.utidComplete=!0,this.hasRun||!n&&!this.requestComplete||(this.hasRun=!0,Nt(e,t,n,r,o))}},{key:"sendView",value:function(e,t,n,i,a,c){var u=this,s=null,l=null,f=null;try{s=t(),l=n(),f=at(!1,e.opts,e.hotelsOpts,e.carscannerOpts,e.trackingOpts),s&&l?Nt(s,f,l,i,a):(o.Z.subscribe("requestashx-complete",(function(){u.onRequestAshxComplete(t(),f,n(),i,a)})),o.Z.subscribe("utid-call-complete",(function(){u.onUtidCallComplete(t(),f,n(),i,a)})),setTimeout((function(){u.hasRun||(u.hasRun=!0,Nt(s,f,l,i,a))}),3e3))}catch(t){f=at(!0,e.opts,e.hotelsOpts,e.carscannerOpts,e.trackingOpts),ut(t,s,f,l,r,c)}!function(e,t,n,i){o.Z.subscribe("app-log",(function(o){var a=t(),c=n(),u=at(!1,e.opts,e.hotelsOpts,e.carscannerOpts,e.trackingOpts),s=Object.assign(u,o);delete s.message,ut(o,a,s,c,r,i)}))}(e,t,n,c)}}]),e}();function jt(e){this.message=e}function Ct(e){this.message=e}jt.prototype=new Error,jt.prototype.name="InvalidCharacterError","undefined"!=typeof window&&window.atob&&window.atob.bind(window),Ct.prototype=new Error,Ct.prototype.name="InvalidTokenError";var Pt="grp/v1/custom/public/saddlebag-event-logger/FrontendEventMessage/generic.FrontendEventMessage",Rt=new(function(){function e(){m(this,e),this.$window=c.at.getWindow(),this.$window.__internal&&this.$window.__internal.EventTracker||(this.$window.__internal=this.$window.__internal||{},this.$window.__internal.EventTracker={maxEvents:10,sentEvents:0});var t=this.$window.__internal.EventTracker.maxEvents;this.maxEvents=t,(0,c.PQ)()?this.endpoint="".concat("/slipstream","/").concat(Pt):this.endpoint="".concat("https://slipstream.skyscanner.net","/").concat(Pt)}return b(e,[{key:"track",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!(this.$window.__internal.EventTracker.sentEvents>=this.maxEvents)){if(!e||!t)throw Error("EventTracker: name and component must be set, got '".concat(e,"' and '").concat(t,"' instead."));if("number"!=typeof o)throw Error("EventTracker: value must be a number, got '".concat(i(o),"' instead."));var c=JSON.stringify({name:e,component:t,version:n,value:o,page_name:a||"not_set"}),s={method:"POST",headers:{"Content-Type":"application/json"},body:c};return this.$window.__internal.EventTracker.sentEvents+=1,u(this.endpoint,s).catch((function(e){console.error("".concat(e,". Request to ").concat(r.endpoint," failed. Request payload: ").concat(c,"."))}))}console.warn("EventTracker: Event ignored, maximum number of events (".concat(this.maxEvents,") already logged."))}}]),e}()),Dt=function(){function e(t){m(this,e),this.eventPublishingEnabled=t}return b(e,[{key:"publishMetric",value:function(e){this.eventPublishingEnabled&&function(e,t,n,r,o){Rt.track(e,t,n,r,o)}(e,"login","1.0.26",1)}}]),e}(),Lt=function(){function e(t){m(this,e),this.DEFAULT_COOKIE_NAME="storageFallback",this.COOKIE_EXPIRY_VALUE=7776e6,this.sessionOnly=t,this.$document=c.at.getDocument()}return b(e,[{key:"getRawCookie",value:function(e){var t=this.$document.cookie.split(";").filter((function(t){return 0===t.trim().indexOf(e)}));if(!t.length)return{};var n=t[0].split("=");return 2!==n.length?null:JSON.parse(n[1])}},{key:"setRawCookie",value:function(e,t,n,r){var o="".concat(e,"=").concat(t);if(!n){var i=r;i||(i=new Date).setTime(i.getTime()+this.COOKIE_EXPIRY_VALUE),o+="; expires=".concat(i.toUTCString())}return this.$document.cookie=o,this.$document.cookie}},{key:"getItem",value:function(e){var t=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return t?JSON.stringify(t[e]):null}},{key:"setItem",value:function(e,t){var n=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return n?(n[e]=JSON.parse(t),this.setRawCookie(this.DEFAULT_COOKIE_NAME,JSON.stringify(n),this.sessionOnly)):null}},{key:"createOrUpdateCookie",value:function(e,t,n){return this.setRawCookie(e,t,!1,n)}}]),e}(),Mt="__initTest__",Ut="__initValue",Vt=function(){function e(t){m(this,e),this.namespace=t,this.browserStorage=null}return b(e,[{key:"getBrowserStorage",value:function(e,t){var n=function(){try{var e=c.at.getWindow(),t=e.localStorage,n=e.sessionStorage;t.setItem(Mt,Ut),n.setItem(Mt,Ut)}catch(e){return!1}return!0}(),r=c.at.getWindow();return this.browserStorage=n?t?r.sessionStorage:r.localStorage:e?new Lt(t):null,this.browserStorage}},{key:"tryGetValue",value:function(e,t,n){var r=this.getBrowserStorage(t,n);if(!r)return null;var o=r.getItem(this.namespace);if(!o)return null;if(o=JSON.parse(o),null==e)return o;for(var i=e.split("."),a=o,c=0;c<i.length;c+=1){if(void 0===(a=a[i[c]]))return null;if(c+1===i.length)return a}return null}},{key:"trySetValue",value:function(e,t,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.getBrowserStorage(n,r);if(!a)return null;try{o=(o=a.getItem(this.namespace))?JSON.parse(o):{}}catch(e){return!1}for(var c=e.split("."),u=o,s=0;s<c.length;s+=1){var l=c[s];if(!(l in u)){if(i)return!1;u[l]={}}if(s+1===c.length){i?delete u[l]:u[l]=t;try{return a.setItem(this.namespace,JSON.stringify(o)),!0}catch(e){return!1}}u=u[l]}return!1}},{key:"tryDeleteValue",value:function(e,t,n){return this.trySetValue(e,null,t,n,!0)}}]),e}(),Bt="csrfToken",Gt=function(){return new Vt("SID")},qt=function(){function e(t,n){m(this,e),this.baseUrl=t,this.metricPublisher=n}var t,n,r,o;return b(e,[{key:"validate",value:(o=ge(me().mark((function e(t,n){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.validateSession({body:{idleSeconds:t,clientTimeUtc:n},path:"tokens/validate"}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"logout",value:(r=ge(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post({reason:t},"tokens/logout");case 2:if((n=e.sent).ok){e.next=6;break}throw this.metricPublisher.publishMetric("sid_logout_error"),new Error(n.statusText);case 6:return Gt().tryDeleteValue(Bt),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"validateSession",value:(n=ge(me().mark((function e(t){var n,r,o,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,r=t.path,this.metricPublisher.publishMetric("sid_validate_session_attempt"),e.next=4,this.post(n,r);case 4:if((o=e.sent).ok){e.next=8;break}throw this.metricPublisher.publishMetric("sid_validate_session_error"),new Error(o.statusText);case 8:return e.next=10,o.json();case 10:return(i=e.sent).csrfToken&&(a=i.csrfToken,Gt().trySetValue(Bt,a,!1,!1)),this.metricPublisher.publishMetric("sid_validate_session_success"),e.abrupt("return",i);case 14:case"end":return e.stop()}var a}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"post",value:(t=ge(me().mark((function e(t,n){var r,o,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"content-type":"application/json",accept:"application/json",pragma:"no-cache","cache-control":"no-cache"},cache:"no-store",credentials:"include",body:JSON.stringify(t)},o="".concat(this.baseUrl,"/").concat(n),e.next=4,fetch(o,r);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),Ft="sid_validation_status",Ht="sid_validation_reason",Wt=new Vt("SID"),$t=function(){return Oe().getTime()},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return Math.floor(Math.random()*(t-e+1)+e)},Kt=function(e){return 1e3*e},Jt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e);var n=t.events,r=void 0===n?["click","keydown","scroll","mousewheel","touchstart"]:n,o=t.namespace,i=void 0===o?"hyperdrive":o;if(this.localStorage=new Vt(i),this.events=r,this.started=!1,this.updateLocalStore=this.updateLocalStore.bind(this),this.clearLocalStore=this.clearLocalStore.bind(this),"undefined"==typeof window)throw new Error("window not available")}return b(e,[{key:"start",value:function(){this.started||(this.started=!0,this.updateLocalStore(),this.subscribe())}},{key:"stop",value:function(){this.started=!1,this.unsubscribe(),this.clearLocalStore()}},{key:"subscribe",value:function(){var e=this;this.events.forEach((function(t){return window.addEventListener(t,e.updateLocalStore,{passive:!0})}))}},{key:"unsubscribe",value:function(){var e=this;this.events.forEach((function(t){return window.removeEventListener(t,e.updateLocalStore,{passive:!0})}))}},{key:"updateLocalStore",value:function(){this.localStorage.trySetValue("sid-last-active",$t(),!0,!1)}},{key:"clearLocalStore",value:function(){this.localStorage.tryDeleteValue("sid-last-active",!0,!1)}},{key:"getLastActivityTime",value:function(){return this.localStorage.tryGetValue("sid-last-active",!0,!1)||$t()}},{key:"getIdleTimeMillis",value:function(){return $t()-this.getLastActivityTime()}}]),e}(),zt=n(4283),Zt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e);var n=t.retryInterval,r=void 0===n?1e4:n;this.retryInterval=r,this.timeouts={}}return b(e,[{key:"schedulePersistent",value:function(e,t){var n=t.accessTokenExpiry-$t()+Yt();this.schedule(e,n)}},{key:"scheduleTemporary",value:function(e,t){var n=t.sessionExpiry,r=t.maxIdleSeconds,o=n-$t(),i=Math.min(o,Kt(r))+Yt();this.schedule(e,i)}},{key:"scheduleRetry",value:function(e){this.schedule(e)}},{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.retryInterval;this.timeouts.validate&&clearTimeout(this.timeouts.validate),this.timeouts.validate=setTimeout(e,t)}},{key:"cancel",value:function(){var e=this;Object.keys(this.timeouts).forEach((function(t){clearTimeout(e.timeouts[t])}))}}]),e}();function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en=function(e){return function(e){return null==e||void 0===e}(e)?"undefined":e.toString()},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return Xt(Xt({},t),{},a({},n,en(e[n])))}),{})};function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var on=function(){function e(t){var n=t.authConsumer;m(this,e),this.grapplerLogger=new Qe("public","login"),this.authConsumer=n}return b(e,[{key:"publishEvent",value:function(e,t){try{var n=this.authConsumer,r=tn(t);this.grapplerLogger.sendApplogMessage({message:e,severity:"INFO",fields:rn({authConsumer:n,market:"unknown"},r)})}catch(e){}}},{key:"publishError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r=this.authConsumer,o=t.name,i=t.message,a=t.stack,c=t.errorCode,u=tn(n);this.grapplerLogger.sendApplogMessage({message:e,severity:"ERR",fields:rn({authConsumer:r,market:"unknown"},u),exception:{type:o,traceback:a,message:i||c}})}catch(e){}}}]),e}(),an=n(9846),cn=function(){var e=new T("device_guid"),t=e.getValue();if(!t){var n=(0,an.v4)();return e.setValue(n),e.store(730),n}return t};function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln={search_guid:["searchresultpage_guid","searchresultoption_guid","bookingpaneloption_guid","miniredirect_guid"],searchresultpage_guid:["searchresultoption_guid","bookingpaneloption_guid","miniredirect_guid"],searchresultoption_guid:["bookingpaneloption_guid","miniredirect_guid"],bookingpaneloption_guid:["miniredirect_guid"],miniredirect_guid:[]},fn=function(e){var t=e.messageGuid;return void 0===t||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(t)},pn=function(e){return"".concat(e.split(".").pop().toLowerCase(),"_guid")},dn=function(e){return"".concat(e.split(".").pop().toLowerCase,"_checksum")},hn=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(m(this,e),!r)throw new Error("A schema must be provided");if(!t)throw new Error("A namespaced store must be provided");this.$window=c.at.getWindow(),this.store=t,this.fallbackStore=n,this.schema=r,this.message=null,this.opts=o}var t,n;return b(e,[{key:"getSeqNumber",value:function(){var e=(this.store.tryGetValue("sequence_num")||0)+1;return this.store.trySetValue("sequence_num",e),e}},{key:"buildHeader",value:(n=ge(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr();case 2:return n=e.sent,null==(r=this.store.tryGetValue(pn("clients.UserPreferences"),!1,!0))&&(r=this.fallbackStore.tryGetValue(pn("clients.UserPreferences"),!1,!0)),e.abrupt("return",{header:{guid:t,client_timestamp:Me(new Date(Date.now()),!0),traveller_identity:{utid:or(),authentication_status:n?"AUTHENTICATED":"UNAUTHENTICATED"},sequence_number:this.getSeqNumber(),device_guid:cn(),experiment_allocation_id:new T("experiment_allocation_id").getValue(),user_agent:this.$window.navigator?this.$window.navigator.userAgent:"UNKNOWN",user_preferences_guid:r}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"createAndStoreGuid",value:function(){var e=this.opts.messageGuid||(0,an.v4)(),t=pn(this.schema);return!1!==this.opts.store_guid&&function(e,t,n){e.trySetValue(t,n,!1,!0),(ln[t]||[]).forEach((function(t){e.tryDeleteValue(t)}))}(this.store,t,e),e}},{key:"buildMessage",value:(t=ge(me().mark((function e(t){var n,r,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createAndStoreGuid(),e.next=3,this.buildHeader(n);case 3:return r=e.sent,o=sn(sn({},r),t),this.message=o,e.abrupt("return",this.message);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"get",value:function(){return this.message}}]),e}();function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vn(e,t)}function yn(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.ERROR;g({component:"saddlebag-user-tracking-events",message:e,level:n,event:t})},On=function(){function e(t,n){m(this,e),this.grapplerLogger=new Qe(t,n,{enhance:!1}),this.store=new Vt("eventstracking"),this.fallbackStore=new Vt("funnelevents")}var t,n;return b(e,[{key:"trackEvent",value:(n=ge(me().mark((function e(t,n,r){var o,a,c=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.length>3&&void 0!==c[3]?c[3]:{},"object"===i(r)){e.next=3;break}throw new Error("message should be an Object");case 3:if(fn(o)){e.next=5;break}throw new Error("The specified guid is invalid. It must conform to ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");case 5:return e.prev=5,a=new hn(this.store,this.fallbackStore,n,o),e.next=9,a.buildMessage(r);case 9:return this.grapplerLogger.sendCustomEvent(t,n,a.get()).catch((function(e){return wn(String(e),n,y.WARN)})),e.abrupt("return",{guid:a.get().header.guid});case 13:e.prev=13,e.t0=e.catch(5),wn(e.t0.message,n);case 16:return e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e,t,r){return n.apply(this,arguments)})},{key:"trackBatchEvent",value:(t=ge(me().mark((function e(t,n,r){var o,a,c,u=this,s=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.length>3&&void 0!==s[3]?s[3]:{},fn(o)){e.next=3;break}throw new Error("The specified guid is invalid. It must conform to ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");case 3:return e.prev=3,a=r.map((function(e,t){if("object"!==i(e))throw new Error("message should be an Object");return new hn(u.store,u.fallbackStore,n,bn(bn({},o),{},{store_guid:o.store_guid===t})).buildMessage(e)})),e.next=7,Promise.all(a);case 7:return c=e.sent,this.grapplerLogger.sendCustomEvents(t,n,c).catch((function(e){return wn(String(e),n,y.WARN)})),e.abrupt("return",c.map((function(e){return{guid:e.header.guid}})));case 12:e.prev=12,e.t0=e.catch(3),wn(e.t0.message,n);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(e,n,r){return t.apply(this,arguments)})},{key:"eventHasBeenLogged",value:function(e,t){var n=this.store.tryGetValue(dn(e));if(!n)return!1;var r=JSON.parse(n);return!(r.logged_at<=Oe().getTime()-18e5)&&(delete r.logged_at,JSON.stringify(t)===JSON.stringify(r))}},{key:"markEventAsLogged",value:function(e,t){var n=bn({logged_at:Oe().getTime()},t);this.store.trySetValue(dn(e),JSON.stringify(n))}}]),e}();var kn=function(e){gn(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mn(r);if(o){var n=mn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yn(this,e)});function a(){return m(this,a),i.apply(this,arguments)}return b(a,[{key:"track",value:(n=ge(me().mark((function e(t,n,r){var o,i=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.length>3&&void 0!==i[3]?i[3]:{},e.abrupt("return",this.trackEvent(t,n,r,o));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"trackBatch",value:(t=ge(me().mark((function e(t,n,r){var o,i=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.length>3&&void 0!==i[3]?i[3]:{},e.abrupt("return",this.trackBatchEvent(t,n,r,o));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})}]),a}(On);var En=function(e){gn(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mn(r);if(o){var n=mn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return yn(this,e)});function a(e,t){var n;return m(this,a),(n=i.call(this,e,t)).eventName="funnel_events",n}return b(a,[{key:"track",value:(n=ge(me().mark((function e(t,n){var r,o=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},e.abrupt("return",this.trackEvent(this.eventName,t,n,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"trackBatch",value:(t=ge(me().mark((function e(t,n){var r,o=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},e.abrupt("return",this.trackBatchEvent(this.eventName,t,n,r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),a}(On),Sn=function(){function e(t){var n=t.applogPublisher;m(this,e),this.applogPublisher=n}var t;return b(e,[{key:"publishLogoutSuccess",value:(t=ge(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.utid,e.prev=1,r=new En("public","logout"),e.next=5,r.track("clients.AuthenticationStatusChange",{previous_traveller_identity:{utid:n,authentication_status:"AUTHENTICATED"}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.applogPublisher.publishError("Failed to send AuthenticationStatusChange funnel event",e.t0);case 10:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e){return t.apply(this,arguments)})}]),e}(),xn="Logout",Tn="Session Validation Error",In=function(){function e(t){var n=t.authConsumer;m(this,e),this.applogPublisher=new on({authConsumer:n}),this.trustedFunnelPublisher=new Sn({applogPublisher:this.applogPublisher}),this.authConsumer=n}var t,n;return b(e,[{key:"publishLogoutSuccess",value:(n=ge(me().mark((function e(){var t,n,r,i,a,c,u,s=this,l=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:{},n=t.cause,r=t.utid,i=t.sessionType,a=t.platformId,c=t.reason,u="".concat(xn," Succeeded"),this.swallowErrors(u,(function(){s.applogPublisher.publishEvent(u,{cause:n,utid:r,sessionType:i,platformId:a,reason:c}),o.Z.publish("sid-logout-success",{cause:n}),s.trustedFunnelPublisher.publishLogoutSuccess({utid:r})}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"publishSessionValidationError",value:(t=ge(me().mark((function e(){var t,n,r,i,a=this,c=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.utid,r=t.authError,i=Tn,this.swallowErrors(i,(function(){a.applogPublisher.publishError(i,r,{utid:n}),o.Z.publish("sid-session-validation-error",r.errorMessage)}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"swallowErrors",value:function(e,t){try{t()}catch(t){this.applogPublisher.publishError("".concat(e," Event Publishing Error"),t)}}}]),e}(),Nn="sid_lock",An="COMPLETED_BY_OTHER_TAB",jn=function(){return parseInt(Wt.tryGetValue(Nn),10)},Cn=function(){},Pn=function(){window.removeEventListener("storage",Cn)},Rn=function(e){return new Promise((function(t){var n=setTimeout((function(){return t("TIMED_OUT")}),e);Pn(),Cn=function(e){e.key===Nn&&null===e.newValue&&(clearTimeout(n),t(An))},window.addEventListener("storage",Cn)}))},Dn=function(){var e=ge(me().mark((function e(){var t,n,r,o,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[jn(),Oe().getTime()],n=t[0],r=t[1];case 1:if(!(r<n&&o!==An)){e.next=11;break}return i=n-r,e.next=5,Rn(i);case 5:o=e.sent,a=[jn(),Oe().getTime()],n=a[0],r=a[1],e.next=1;break;case 11:return Pn(),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ln=function(){var e=ge(me().mark((function e(t){var n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn();case 2:if(e.sent===An){e.next=10;break}return void 0,r=Oe().getTime(),Wt.trySetValue(Nn,r+5e3),e.next=7,t();case 7:return n=e.sent,Wt.tryDeleteValue(Nn),e.abrupt("return",n);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),Mn="PERSISTENT",Un="TEMPORARY",Vn="MOBILE",Bn="INVALID",Gn=function(e){return"https://skyscanner.net/".concat(e)},qn=function(){try{var e=new T("sid_session_token").getValue();if(!e)return{};var t=e.split(".")[1];return JSON.parse(window.atob(t))}catch(e){return{}}},Fn=function(){try{var e=qn(),t=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn())[Gn("sessionType")]}(e),n=new T("sid_utid").getValue();switch(t){case Mn:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Mn,accessTokenExpiry:e[Gn("accessTokenExpiry")],accessTokenExpiryDate:new Date(e[Gn("accessTokenExpiry")])})}(e);case Un:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Un,maxIdleSeconds:e[Gn("maxIdleSeconds")],sessionExpiry:e[Gn("sessionExpiry")],sessionExpiryDate:new Date(e[Gn("sessionExpiry")])})}(e);case Vn:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Vn})}(e);default:return n?Object.freeze({sessionType:Bn}):void 0}}catch(e){return}};function Hn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Wn(e,t,n){return(Wn=Hn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&vn(o,n.prototype),o}).apply(null,arguments)}function $n(e){var t="function"==typeof Map?new Map:void 0;return($n=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Wn(e,arguments,mn(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),vn(r,e)})(e)}var Yn,Kn,Jn,zn,Zn=function(e){gn(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=mn(t);if(n){var o=mn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return yn(this,e)});function o(e){var t,n=e.errorCode,i=e.errorMessage,a=e.traceback;return m(this,o),(t=r.call(this)).errorCode=n,t.errorMessage=i,t.traceback=a,t}return o}($n(Error)),Qn="session-inactive",Xn="session-expired",er=function(){function e(){m(this,e);var t=(0,zt.getEnvFromUrl)(),n=(0,zt.default)(t),r=n.baseUrl,o=n.eventPublishingEnabled,i=n.retryInterval;this.metricPublisher=new Dt(o),this.validateSessionClient=new qt(r,this.metricPublisher),this.activityTracker=new Jt,this.eventPublisher=new In({authConsumer:"session-validation"}),this.scheduler=new Zt({retryInterval:i}),this.validationErrorCounter={},this.checkPersistentSession=this.checkPersistentSession.bind(this),this.stop=this.stop.bind(this),this.restart=this.restart.bind(this),this.checkTempSession=this.checkTempSession.bind(this),this.publishSessionValidationError=this.publishSessionValidationError.bind(this)}var t,n,r,o;return b(e,[{key:"getValidatedSession",value:function(){return this.promise||(this.promise=this.validateSession()),this.promise}},{key:"stop",value:function(){this.scheduler.cancel(),this.activityTracker.stop(),this.promise=void 0,this.session=void 0}},{key:"restart",value:function(){this.stop(),this.promise=this.validateSession()}},{key:"validateSession",value:(o=ge(me().mark((function e(){var t;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Fn())||t.sessionType!==Bn){e.next=5;break}return e.next=4,this.validateSessionClient.logout("session-invalid");case 4:return e.abrupt("return",void 0);case 5:if(this.session=t,!this.session||this.session.sessionType===Vn){e.next=19;break}this.activityTracker.start(),e.t0=this.session.sessionType,e.next=e.t0===Mn?12:e.t0===Un?15:18;break;case 12:return e.next=14,this.checkPersistentSession();case 14:return e.abrupt("break",19);case 15:return e.next=17,this.checkTempSession();case 17:case 18:return e.abrupt("break",19);case 19:return e.abrupt("return",this.session);case 20:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_handleSessionValidation",value:function(e,t,n){var r,o=e.status,i=e.reason;switch(o){case"PERSISTENT_SESSION_REFRESHED":case"PERSISTENT_SESSION_EXTENDED":case"PERSISTENT_SESSION_NO_REFRESH":this.scheduler.schedulePersistent(this.checkPersistentSession,this.session);break;case"PERSISTENT_SESSION_LOGGED_OUT":r="inactive"===i?Qn:"session-logged-out",this._invalidateSession(r,t,n,i);break;default:this.stop()}}},{key:"_performRetry",value:function(e){var t=new Zn({errorMessage:e.message,traceback:e.stack});this.publishSessionValidationError(e,t),this.scheduler.scheduleRetry(this.checkPersistentSession)}},{key:"_invalidateSession",value:function(e,t,n,r){this.eventPublisher.publishLogoutSuccess({cause:e,utid:t,sessionType:n,reason:r}),this.stop()}},{key:"publishSessionValidationError",value:function(e,t){var n=this.session.utid;this.validationErrorCounter[e.message]=this.validationErrorCounter[e.message]||0,this.validationErrorCounter[e.message]<5&&(this.validationErrorCounter[e.message]+=1,this.eventPublisher.publishSessionValidationError({utid:n,authError:t}))}},{key:"isSessionActive",value:function(){var e=Kt(this.session.maxIdleSeconds);return this.activityTracker.getIdleTimeMillis()<=e}},{key:"validatePersistentSession",value:(r=ge(me().mark((function e(){var t,n,r,o,i=this;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.activityTracker.getIdleTimeMillis(),t=a/1e3,n=$t(),e.next=4,Ln(ge(me().mark((function e(){var r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validateSessionClient.validate(t,n);case 2:return void 0,void 0,a=(o=r=e.sent).status,c=o.reason,Wt.trySetValue(Ft,a),Wt.trySetValue(Ht,c),e.abrupt("return",r);case 5:case"end":return e.stop()}var o,a,c}),e)}))));case 4:return r=e.sent,o=null===r,e.abrupt("return",o?{status:Wt.tryGetValue(Ft),reason:Wt.tryGetValue(Ht)}:r);case 7:case"end":return e.stop()}var a}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"checkPersistentSession",value:(n=ge(me().mark((function e(){var t,n,r,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.session,n=t.utid,r=t.accessTokenExpiry,!($t()>r)){e.next=11;break}return e.next=6,this.validatePersistentSession();case 6:o=e.sent,this.session=Fn(),this._handleSessionValidation(o,n),e.next=12;break;case 11:this.scheduler.schedulePersistent(this.checkPersistentSession,this.session);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this._performRetry(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(){return n.apply(this,arguments)})},{key:"checkTempSession",value:(t=ge(me().mark((function e(){var t,n,r,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.session,n=t.utid,r=t.sessionExpiry,o=t.sessionType,!($t()>r)){e.next=8;break}return e.next=5,this.validateSessionClient.logout(Xn);case 5:this._invalidateSession(Xn,n,o),e.next=15;break;case 8:if(this.isSessionActive()){e.next=14;break}return e.next=11,this.validateSessionClient.logout(Qn);case 11:this._invalidateSession(Qn,n,o),e.next=15;break;case 14:this.scheduler.scheduleTemporary(this.checkTempSession,this.session);case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),tr=function(){var e=ge(me().mark((function e(){var t,n;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.SessionValidator||(window.SessionValidator=new er),t=window.SessionValidator,e.next=3,t.getValidatedSession();case 3:return n=e.sent,e.abrupt("return",void 0!==n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nr=Object.freeze({UNSET:0,UNAUTHENTICATED:1,AUTHENTICATED:2}),rr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,t=new Promise((function(t){setTimeout((function(){return t(!1)}),e)}));return Promise.race([tr(),t])},or=function(){var e=Fn();return e&&e.utid||new T("traveller_context").getValue()},ir=function(){var e=ge(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr();case 2:if(!e.sent){e.next=6;break}e.t0=nr.AUTHENTICATED,e.next=7;break;case 6:e.t0=nr.UNAUTHENTICATED;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ar=function(){var e=ge(me().mark((function e(t){var n,r,o,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={tld:t.culture.tld,browserName:t.device.browserName,browserVersion:t.device.browserVersion,desktop:t.device.isBrowser,mobile:t.device.isMobilePhone,tablet:t.device.isTablet,osVersion:t.device.osVersion,internalUser:t.userInfo.isInternalUser},Object.assign(n,t.culture),Object.assign(n,t.flightSearch),r=t.userInfo.isNewUser,o=Object.assign(t.config,{featureTests:t.featureTests}),e.next=7,ir();case 7:return i=e.sent,a=t.pageContext.allowedQueryParams,e.abrupt("return",(new At).sendView({opts:Object.assign({Api:{componentContext:function(){return n}},Common:{getTrackId:function(){return t.userInfo.trackId}},config:o,redactUrl:function(e){return D(e,{allowedQueryParams:a})}},t.pageContext,t.culture,{isNewUser:r},{requestId:t.requestId||(0,c.xu)()}),hotelsOpts:t.hotels||{},carscannerOpts:t.carhire||{},trackingOpts:{WebNode:t.microsite.name,guid:t.viewGuid},config:o},(function(){return t.userInfo.utid}),(function(){return new T("preferences").getValue()}),(function(e){return(((t=e)||"").match(/dayview/gi)||[]).length?"Day View":((t||"").match(/monthview/gi)||[]).length?"Month View (Chart)":((t||"").match(/browse/gi)||[]).length?"Browse View (Day)":((t||"").match(/index/gi)||[]).length?"Homepage":((t||"").match(/skippy/gi)||[]).length?"Skippy":t;var t}),t.userInfo.authState||i,n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cr=function(e){if(Yn)return Yn;var t=e.config&&e.config.env||"public";return Yn=new En(t,e.microsite.name)},ur=function(){var e=ge(me().mark((function e(t,n,r){var o,i,a=arguments;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>3&&void 0!==a[3]?a[3]:{},i=cr(t),e.prev=2,e.next=5,i.track(n,r,o);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),v({message:e.t0.get_Message&&e.t0.get_Message()||e.t0.message||e.t0,component:"funnelEvents",pageName:"".concat(t.microsite.name),eventType:"".concat(n),level:"error"});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),sr=function(){var e=ge(me().mark((function e(t){var n,r,o,i,a,u,s;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.at.getWindow(),r=t.pageContext||{},o=r.allowedQueryParams,i=n.location&&D(n.location.href.replace(/#.*/,""),{allowedQueryParams:o})||"UNKNOWN",a=c.at.getDocument().referrer||"UNKNOWN",u=t.viewGuid?{messageGuid:t.viewGuid}:{},s={name:i,referrer_url:a},e.next=8,ur(t,"clients.View",s,u);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lr=function(){try{var e=new URL(c.at.getDocument().referrer);return!!e&&(-1!==e.hostname.toLowerCase().indexOf("skyscanner")||-1!==e.hostname.toLowerCase().indexOf("tianxun"))}catch(e){return!1}},fr=function(e){switch(!0){case e.isBrowser:return"DESKTOP";case e.isMobilePhone:return"MOBILE";case e.isTablet:return"TABLET";default:return"UNSET_DEVICE_CATEGORY"}},pr=function(){var e=ge(me().mark((function e(t){var n,r;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!lr()){e.next=2;break}return e.abrupt("return");case 2:return n=t.device||{},r={platform_type:"WEB",acquisition_type:"WEB_SESSION",referral_url:c.at.getDocument().referrer,user_agent_string:(0,c.ij)(),device_category:fr(n),os_name:n.osName||"",os_version:n.osVersion||"",is_browser:!0===n.isBrowser,browser_name:n.browserName||"",browser_version:n.browserVersion||"",model_name:n.model||"",vendor_name:n.vendor||"",marketing_name:n.marketingName||"",is_robot:!0===n.isRobot,primary_hardware_type:n.primaryHardwareType||"",is_new_utid:!0===t.isNewUser},e.next=6,ur(t,"clients.Acquisition",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1===e.indexOf("&&")?[]:e.split("&&").map((function(e){var t=j(e.split("-"),2),n=t[0],r=t[1],o=j(n.split(/_V(\d+)$/),2),i=o[0],a=o[1];return{name:i,version:parseInt(a,10),variant:r}}))},hr=function(){var e=ge(me().mark((function e(t){var n,r,o,i;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config||!t.config.emitExperimentAllocationEventInTrackolding){e.next=10;break}if(n="clients.ExperimentAllocation",r=cr(t),o=new T("experiment_allocation_id").getValue(),!r.eventHasBeenLogged(n,{experimentAllocationId:o})){e.next=6;break}return e.abrupt("return");case 6:return i=dr(t.featureTestsString),e.next=9,ur(t,"clients.ExperimentAllocation",{experiments:i});case 9:r.markEventAsLogged(n,{experimentAllocationId:o});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vr=function(){var e=ge(me().mark((function e(t){var n,r,o,i,a;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="clients.UserPreferences",r=pe(t.culture.market),o=se()||le(),i={country:t.culture.market,currency:t.culture.currency,locale:t.culture.locale,is_optedin_for_personalised:r[ee.ADVERTS],is_optedin_for_optimization:r[ee.INFORMATION],is_gdpr_active:r.isGdprActiveInMarket,gdpr_cookie_version:r[ee.VERSION],is_gdpr_initialised:o},!(a=cr(t)).eventHasBeenLogged(n,i)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,ur(t,n,i);case 9:a.markEventAsLogged(n,i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gr="requestashx-complete",yr=function(){try{var e=new T("preferences");e.getValue()||e.setValue(new T("traveller_context").getValue().replace(/-/g,"")),e.store(730),o.Z.publish(gr,{success:!0})}catch(e){o.Z.publish(gr,{success:!1,err:e})}},mr=function(e,t){return new Promise((function(n){Kn=setTimeout((function(){g({message:"Call to $window.__trackolding.userInfoCallback() timed out after ".concat(e),level:"error",pageName:t.microsite.name,component:"trackolding"}),n(t.userInfo)}),e)}))},_r={ga:function(e){return o.Z.publish("ga-handle-analytics-event",e)},mixpanel:function(){}},br=function(){o.Z.subscribe("tracking-event",(function(e){return t=e,void Object.keys(t).forEach((function(e){return function(e,t){t.forEach((function(t){return _r[e](t)}))}(e,t[e])}));var t}))},wr=!1,Or=function(e,t){return zn||(zn=new kn(e||"public",t))},kr=function(e,t){return Jn||(Jn=new Qe(e||"public",t,{enhance:!1}))},Er=function(){var e=ge(me().mark((function e(t,n,r){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!0!==r.isMiniEvent){e.next=3;break}return e.abrupt("return",Or(t,n).track(r.eventName,r.fullSchemaName,r.message,r.messageOpts));case 3:return e.abrupt("return",kr(t,n).sendCustomEvent(r.eventName,r.fullSchemaName,r.message));case 6:return e.prev=6,e.t0=e.catch(0),v({message:e.t0.get_Message&&e.t0.get_Message()||e.t0.message||e.t0,component:"grapplerEvent",pageName:"".concat(n),eventType:"".concat(r.eventName),level:"error"}),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Sr=function(){var e=ge(me().mark((function e(t,n,r,o){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!o.eventName){e.next=5;break}if(!1===o.consentRequired){e.next=4;break}if(de(r)){e.next=4;break}return e.abrupt("return",{});case 4:return e.abrupt("return",Er(t,n,o));case 5:return v({message:"Failed to track event as eventName not provided, market: ".concat(JSON.stringify(r),", data: ").concat(JSON.stringify(o)),component:n||"trackolding"}),e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),xr=function(e,t,n){return e?t&&n?e.indexOf("?")>=0?e.replace(/(\?[^#]+)/,"$1&".concat(t,"=").concat(n)):e.replace(/((\/)*[^#]*|(.*)$)/,"$1?".concat(t,"=").concat(n)):e:null},Tr=["tck","acq","settings","preferences","auth_traveller_context","traveller_context"],Ir=function(e,t){return e.search.indexOf(t)>-1},Nr=c.at.getDocument().getElementById("trackolding-sync"),Ar=JSON.parse(Nr.getAttribute("data-data")),jr=function(e){var t=null===new T("_ga").getValue();return yr(),function(e){if(e){var t=c.at.getWindow();t.BOOMR_mq=t.BOOMR_mq||[],t.BOOMR_mq.push(["addVar","featureTestsString",e.featureTestsString])}}(e),t};try{var Cr=c.at.getWindow();Cr.__trackolding||(Cr.__trackolding={}),Cr.__trackolding.getTrackIdentifier||(Cr.__trackolding.getTrackIdentifier=function(){return Promise.all([Promise.resolve(new T("sstrack").getValue()),Promise.resolve(new T("traveller_context").getValue()),(yr(),Promise.resolve(new T("preferences").getValue()))]).then((function(e){var t=j(e,3);return{ga:t[0],utid:t[1],preferences:t[2]}}))}),Cr.__trackolding.deploy={colour:Ar.deployColour||"unknown",region:Ar.deployRegion||"unknown"};var Pr,Rr=void 0!==window.navigator&&void 0!==window.navigator.userAgent&&!!window.navigator.userAgent.match(/MSIE|Trident/);Rr&&(Pr=jr(Ar),he(),br()),function(e,t){var n,r=!((e||{}).userInfo||{}).utid,o="function"==typeof t.__trackolding.userInfoCallback;return o?(n=[mr(500,e),t.__trackolding.userInfoCallback()],new Promise((function(e,t){return n.forEach((function(n){return Promise.resolve(n).then(e,t)}))}))).then((function(e){return clearTimeout(Kn),e})).catch((function(t){return clearTimeout(Kn),g({message:"Call to $window.__trackolding.userInfoCallback() errored ".concat(t),level:"error",pageName:e.microsite.name,component:"trackolding"}),e.userInfo})):(!o&&r&&g({message:"data.userInfo or data.userInfo.utid not available and $window.__trackolding.userInfoCallback has not been set",level:"error",pageName:e.microsite.name,component:"trackolding"}),Promise.resolve(e.userInfo))}(Ar,Cr).then((function(e){var t;Ar.userInfo=Object.assign({},Ar.userInfo,e),Rr||(Pr=jr(Ar)),ar(Object.assign(Ar,{isNewUser:Pr})),sr(Ar),pr(Ar),hr(Ar),vr(Ar),o.Z.subscribe("tracking-preferences-changed",(function(){return vr(Ar)})),o.Z.subscribe("user-cookie-preferences-saved",(function(){return vr(Ar)})),Rr||(he(),br()),o.Z.publish("trackolding-loaded"),function(e){return t=function(){var t=c.at.getDocument(),n={CurrentUserLanguage:e.culture.locale.split("-")[0],userLocale:e.culture.locale,userCurrency:e.culture.currency,userGeoMarket:e.geoMarketCode||"",preferencesId:new T("preferences").getValue(),visibilityState:t.visibilityState||"N/A",ShouldLogGaFeatureSetInDimension:!0,GaSkyscannerDomains:e.gaLinkedDomains,userId:e.userInfo.utid,featureTestString:e.featureTestsString,config:e.config,WebNode:e.microsite.name,pageType:e.pageType||"",allowedQueryParams:e.pageContext.allowedQueryParams},r=pe(e.culture.market),o={"Gdpr Information":r[ee.INFORMATION],"Gdpr Adverts":r[ee.ADVERTS],"Gdpr Version":r[ee.VERSION],"Gdpr Active":r.isGdprActiveInMarket,"Gdpr Initialised":se()};Object.assign(n,o),function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"/",a=c.at.getWindow().ga;a&&a("create","UA-246109-1","auto",{allowLinker:!0,siteSpeedSampleRate:0}),i&&W(i,"",e,t,n,r,o),F(i,o,e.allowedQueryParams)}(n,{market:e.culture.market,cabinClass:e.flightSearch.cabinClass,inboundDate:e.flightSearch.inboundDate},e.pageContext.pageSpecificGaDimensions,e.pageContext.ancillary,e.pageContext.analyticsPageName,e.pageContext.uaPageView)},void(0,c.Lu)("//www.google-analytics.com/analytics.js",t,"text/javascript");var t}(Ar),function(e){var t=e.culture&&e.culture.market?e.culture.market:null,n=e.microsite&&e.microsite.name?e.microsite.name:null;!function(e,t,n){wr||(wr=!0,o.Z.subscribe("grappler-track",(function(r){return t&&r&&n&&null!=r.isMiniEvent?Sr(e,t,n,r):(v({message:"Failed to track grappler events. Invalid input parameters.",component:t||"trackolding"}),{})})))}(e.config&&e.config.env?e.config.env:null,n,t)}(Ar),t=Ar.gaLinkedDomains,c.at.getDocument().addEventListener("mousedown",(function(e){var n,r,o=e.target;if((i=o)&&i.tagName&&"a"===i.tagName.toLowerCase()){var i,a=o.href;if(-1!==a.indexOf("//")&&(n=a,!((r=c.at.getWindow().location).hostname&&n.indexOf(r.hostname)>-1)))for(var u=0;u<t.length;u+=1){var s=t[u];if(a.indexOf(s)>-1){Tr.map((function(e){return{cookie:e,value:new T(e).getValue()}})).forEach((function(e){var t=e.cookie,n=e.value;n&&!Ir(o,t)&&(o.href=xr(o.href,t,n))}));break}}}}))})).catch((function(e){g({message:"Error calling getUserInfo() sync ".concat(e),level:"error",pageName:Ar.microsite.name,component:"trackolding"})}))}catch(e){g({message:"Failed to initialise trackolding sync ".concat(e),level:"error",pageName:Ar.microsite.name,component:"trackolding"})}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var __webpack_exports__=__webpack_require__(9369)})();
//# sourceMappingURL=client-tracking-sync.dcab1567b46a048f7cd5.js.map