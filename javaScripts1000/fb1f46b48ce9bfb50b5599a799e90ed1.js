!function(e){function t(t){for(var n,o,a=t[0],s=t[1],r=0,l=[];r<a.length;r++)o=a[r],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);l.length;)l.shift()()}var n={},i={24:0};function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,o){n=i[e]=[t,o]}));t.push(n[2]=a);var s,r=document.createElement("script");r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.src=function(e){return o.p+""+({0:"animate",1:"auto-complete",3:"banner-css",5:"compact-css",6:"font-awesome-css",7:"ie-css",10:"janus-webrtc",14:"microsoft.cognitiveservices.speech.sdk.bundle",17:"slick-css",18:"slick-theme-css",19:"strophe",20:"vendors~bwipjs",21:"vendors~janus-webrtc",22:"vendors~slick",23:"webAudioRecorder",25:"widget-css"}[e]||e)+".min.js"}(e);var c=new Error;s=function(t){r.onerror=r.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",c.name="ChunkLoadError",c.type=o,c.request=a,n[1](c)}i[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:r})}),12e4);r.onerror=r.onload=s,document.head.appendChild(r)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://cdn.yellowmessenger.com/plugin/latest/dist/",o.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var r=0;r<a.length;r++)t(a[r]);var c=s;o(o.s=28)}([function(e,t,n){var i;
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,o){"use strict";var a=[],s=Object.getPrototypeOf,r=a.slice,c=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},l=a.push,d=a.indexOf,u={},p=u.toString,g=u.hasOwnProperty,f=g.toString,m=f.call(Object),h={},w=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},y=n.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function k(e,t,n){var i,o,a=(n=n||y).createElement("script");if(a.text=e,t)for(i in b)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,o);n.head.appendChild(a).parentNode.removeChild(a)}function C(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[p.call(e)]||"object":typeof e}var x=function(e,t){return new x.fn.init(e,t)};function T(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!w(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}x.fn=x.prototype={jquery:"3.6.0",constructor:x,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(x.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},x.extend=x.fn.extend=function(){var e,t,n,i,o,a,s=arguments[0]||{},r=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[r]||{},r++),"object"==typeof s||w(s)||(s={}),r===c&&(s=this,r--);r<c;r++)if(null!=(e=arguments[r]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(l&&i&&(x.isPlainObject(i)||(o=Array.isArray(i)))?(n=s[t],a=o&&!Array.isArray(n)?[]:o||x.isPlainObject(n)?n:{},o=!1,s[t]=x.extend(l,a,i)):void 0!==i&&(s[t]=i));return s},x.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==p.call(e))&&(!(t=s(e))||"function"==typeof(n=g.call(t,"constructor")&&t.constructor)&&f.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){k(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(T(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?x.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,a=e.length,s=!n;o<a;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,a=0,s=[];if(T(e))for(i=e.length;a<i;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return c(s)},guid:1,support:h}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=a[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var S=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(e){var t,n,i,o,a,s,r,c,l,d,u,p,g,f,m,h,w,v,y,b="sizzle"+1*new Date,k=e.document,C=0,x=0,T=ce(),S=ce(),_=ce(),M=ce(),I=function(e,t){return e===t&&(u=!0),0},A={}.hasOwnProperty,O=[],B=O.pop,D=O.push,N=O.push,R=O.slice,j=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",E="[\\x20\\t\\r\\n\\f]",z="(?:\\\\[\\da-fA-F]{1,6}"+E+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\["+E+"*("+z+")(?:"+E+"*([*^$|!~]?=)"+E+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+E+"*\\]",L=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",F=new RegExp(E+"+","g"),H=new RegExp("^"+E+"+|((?:^|[^\\\\])(?:\\\\.)*)"+E+"+$","g"),U=new RegExp("^"+E+"*,"+E+"*"),W=new RegExp("^"+E+"*([>+~]|"+E+")"+E+"*"),J=new RegExp(E+"|>"),V=new RegExp(L),$=new RegExp("^"+z+"$"),G={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+L),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+E+"*(even|odd|(([+-]|)(\\d*)n|)"+E+"*(?:([+-]|)"+E+"*(\\d+)|))"+E+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+E+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+E+"*((?:-\\d)?\\d*)"+E+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+E+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){p()},se=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{N.apply(O=R.call(k.childNodes),k.childNodes),O[k.childNodes.length].nodeType}catch(e){N={apply:O.length?function(e,t){D.apply(e,R.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function re(e,t,i,o){var a,r,l,d,u,f,w,v=t&&t.ownerDocument,k=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==k&&9!==k&&11!==k)return i;if(!o&&(p(t),t=t||g,m)){if(11!==k&&(u=K.exec(e)))if(a=u[1]){if(9===k){if(!(l=t.getElementById(a)))return i;if(l.id===a)return i.push(l),i}else if(v&&(l=v.getElementById(a))&&y(t,l)&&l.id===a)return i.push(l),i}else{if(u[2])return N.apply(i,t.getElementsByTagName(e)),i;if((a=u[3])&&n.getElementsByClassName&&t.getElementsByClassName)return N.apply(i,t.getElementsByClassName(a)),i}if(n.qsa&&!M[e+" "]&&(!h||!h.test(e))&&(1!==k||"object"!==t.nodeName.toLowerCase())){if(w=e,v=t,1===k&&(J.test(e)||W.test(e))){for((v=ee.test(e)&&we(t.parentNode)||t)===t&&n.scope||((d=t.getAttribute("id"))?d=d.replace(ie,oe):t.setAttribute("id",d=b)),r=(f=s(e)).length;r--;)f[r]=(d?"#"+d:":scope")+" "+ye(f[r]);w=f.join(",")}try{return N.apply(i,v.querySelectorAll(w)),i}catch(t){M(e,!0)}finally{d===b&&t.removeAttribute("id")}}}return c(e.replace(H,"$1"),t,i,o)}function ce(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function le(e){return e[b]=!0,e}function de(e){var t=g.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function pe(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ge(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return le((function(t){return t=+t,le((function(n,i){for(var o,a=e([],n.length,t),s=a.length;s--;)n[o=a[s]]&&(n[o]=!(i[o]=n[o]))}))}))}function we(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=re.support={},a=re.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Q.test(t||n&&n.nodeName||"HTML")},p=re.setDocument=function(e){var t,o,s=e?e.ownerDocument||e:k;return s!=g&&9===s.nodeType&&s.documentElement?(f=(g=s).documentElement,m=!a(g),k!=g&&(o=g.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ae,!1):o.attachEvent&&o.attachEvent("onunload",ae)),n.scope=de((function(e){return f.appendChild(e).appendChild(g.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=de((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=de((function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(g.getElementsByClassName),n.getById=de((function(e){return f.appendChild(e).id=b,!g.getElementsByName||!g.getElementsByName(b).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,o,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(o=t.getElementsByName(e),i=0;a=o[i++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},w=[],h=[],(n.qsa=Z.test(g.querySelectorAll))&&(de((function(e){var t;f.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&h.push("[*^$]="+E+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||h.push("\\["+E+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||h.push("~="),(t=g.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||h.push("\\["+E+"*name"+E+"*="+E+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||h.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||h.push(".#.+[+~]"),e.querySelectorAll("\\\f"),h.push("[\\r\\n\\f]")})),de((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=g.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&h.push("name"+E+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&h.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")}))),(n.matchesSelector=Z.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&de((function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),w.push("!=",L)})),h=h.length&&new RegExp(h.join("|")),w=w.length&&new RegExp(w.join("|")),t=Z.test(f.compareDocumentPosition),y=t||Z.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},I=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==g||e.ownerDocument==k&&y(k,e)?-1:t==g||t.ownerDocument==k&&y(k,t)?1:d?j(d,e)-j(d,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,s=[e],r=[t];if(!o||!a)return e==g?-1:t==g?1:o?-1:a?1:d?j(d,e)-j(d,t):0;if(o===a)return pe(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)r.unshift(n);for(;s[i]===r[i];)i++;return i?pe(s[i],r[i]):s[i]==k?-1:r[i]==k?1:0},g):g},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if(p(e),n.matchesSelector&&m&&!M[t+" "]&&(!w||!w.test(t))&&(!h||!h.test(t)))try{var i=v.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){M(t,!0)}return re(t,g,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!=g&&p(e),y(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!=g&&p(e);var o=i.attrHandle[t.toLowerCase()],a=o&&A.call(i.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==a?a:n.attributes||!m?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},re.escape=function(e){return(e+"").replace(ie,oe)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,i=[],o=0,a=0;if(u=!n.detectDuplicates,d=!n.sortStable&&e.slice(0),e.sort(I),u){for(;t=e[a++];)t===e[a]&&(o=i.push(a));for(;o--;)e.splice(i[o],1)}return d=null,e},o=re.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=re.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+E+")"+e+"("+E+"|$)"))&&T(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=re.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),r="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var l,d,u,p,g,f,m=a!==s?"nextSibling":"previousSibling",h=t.parentNode,w=r&&t.nodeName.toLowerCase(),v=!c&&!r,y=!1;if(h){if(a){for(;m;){for(p=t;p=p[m];)if(r?p.nodeName.toLowerCase()===w:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?h.firstChild:h.lastChild],s&&v){for(y=(g=(l=(d=(u=(p=h)[b]||(p[b]={}))[p.uniqueID]||(u[p.uniqueID]={}))[e]||[])[0]===C&&l[1])&&l[2],p=g&&h.childNodes[g];p=++g&&p&&p[m]||(y=g=0)||f.pop();)if(1===p.nodeType&&++y&&p===t){d[e]=[C,g,y];break}}else if(v&&(y=g=(l=(d=(u=(p=t)[b]||(p[b]={}))[p.uniqueID]||(u[p.uniqueID]={}))[e]||[])[0]===C&&l[1]),!1===y)for(;(p=++g&&p&&p[m]||(y=g=0)||f.pop())&&((r?p.nodeName.toLowerCase()!==w:1!==p.nodeType)||!++y||(v&&((d=(u=p[b]||(p[b]={}))[p.uniqueID]||(u[p.uniqueID]={}))[e]=[C,y]),p!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return o[b]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,n){for(var i,a=o(e,t),s=a.length;s--;)e[i=j(e,a[s])]=!(n[i]=a[s])})):function(e){return o(e,0,n)}):o}},pseudos:{not:le((function(e){var t=[],n=[],i=r(e.replace(H,"$1"));return i[b]?le((function(e,t,n,o){for(var a,s=i(e,null,o,[]),r=e.length;r--;)(a=s[r])&&(e[r]=!(t[r]=a))})):function(e,o,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}})),has:le((function(e){return function(t){return re(e,t).length>0}})),contains:le((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:le((function(e){return $.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===g.activeElement&&(!g.hasFocus||g.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he((function(){return[0]})),last:he((function(e,t){return[t-1]})),eq:he((function(e,t,n){return[n<0?n+t:n]})),even:he((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:he((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:he((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:he((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ge(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=fe(t);function ve(){}function ye(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function be(e,t,n){var i=t.dir,o=t.next,a=o||i,s=n&&"parentNode"===a,r=x++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o);return!1}:function(t,n,c){var l,d,u,p=[C,r];if(c){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,c))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(d=(u=t[b]||(t[b]={}))[t.uniqueID]||(u[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((l=d[a])&&l[0]===C&&l[1]===r)return p[2]=l[2];if(d[a]=p,p[2]=e(t,n,c))return!0}return!1}}function ke(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function Ce(e,t,n,i,o){for(var a,s=[],r=0,c=e.length,l=null!=t;r<c;r++)(a=e[r])&&(n&&!n(a,i,o)||(s.push(a),l&&t.push(r)));return s}function xe(e,t,n,i,o,a){return i&&!i[b]&&(i=xe(i)),o&&!o[b]&&(o=xe(o,a)),le((function(a,s,r,c){var l,d,u,p=[],g=[],f=s.length,m=a||function(e,t,n){for(var i=0,o=t.length;i<o;i++)re(e,t[i],n);return n}(t||"*",r.nodeType?[r]:r,[]),h=!e||!a&&t?m:Ce(m,p,e,r,c),w=n?o||(a?e:f||i)?[]:s:h;if(n&&n(h,w,r,c),i)for(l=Ce(w,g),i(l,[],r,c),d=l.length;d--;)(u=l[d])&&(w[g[d]]=!(h[g[d]]=u));if(a){if(o||e){if(o){for(l=[],d=w.length;d--;)(u=w[d])&&l.push(h[d]=u);o(null,w=[],l,c)}for(d=w.length;d--;)(u=w[d])&&(l=o?j(a,u):p[d])>-1&&(a[l]=!(s[l]=u))}}else w=Ce(w===s?w.splice(f,w.length):w),o?o(null,s,w,c):N.apply(s,w)}))}function Te(e){for(var t,n,o,a=e.length,s=i.relative[e[0].type],r=s||i.relative[" "],c=s?1:0,d=be((function(e){return e===t}),r,!0),u=be((function(e){return j(t,e)>-1}),r,!0),p=[function(e,n,i){var o=!s&&(i||n!==l)||((t=n).nodeType?d(e,n,i):u(e,n,i));return t=null,o}];c<a;c++)if(n=i.relative[e[c].type])p=[be(ke(p),n)];else{if((n=i.filter[e[c].type].apply(null,e[c].matches))[b]){for(o=++c;o<a&&!i.relative[e[o].type];o++);return xe(c>1&&ke(p),c>1&&ye(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(H,"$1"),n,c<o&&Te(e.slice(c,o)),o<a&&Te(e=e.slice(o)),o<a&&ye(e))}p.push(n)}return ke(p)}return ve.prototype=i.filters=i.pseudos,i.setFilters=new ve,s=re.tokenize=function(e,t){var n,o,a,s,r,c,l,d=S[e+" "];if(d)return t?0:d.slice(0);for(r=e,c=[],l=i.preFilter;r;){for(s in n&&!(o=U.exec(r))||(o&&(r=r.slice(o[0].length)||r),c.push(a=[])),n=!1,(o=W.exec(r))&&(n=o.shift(),a.push({value:n,type:o[0].replace(H," ")}),r=r.slice(n.length)),i.filter)!(o=G[s].exec(r))||l[s]&&!(o=l[s](o))||(n=o.shift(),a.push({value:n,type:s,matches:o}),r=r.slice(n.length));if(!n)break}return t?r.length:r?re.error(e):S(e,c).slice(0)},r=re.compile=function(e,t){var n,o=[],a=[],r=_[e+" "];if(!r){for(t||(t=s(e)),n=t.length;n--;)(r=Te(t[n]))[b]?o.push(r):a.push(r);(r=_(e,function(e,t){var n=t.length>0,o=e.length>0,a=function(a,s,r,c,d){var u,f,h,w=0,v="0",y=a&&[],b=[],k=l,x=a||o&&i.find.TAG("*",d),T=C+=null==k?1:Math.random()||.1,S=x.length;for(d&&(l=s==g||s||d);v!==S&&null!=(u=x[v]);v++){if(o&&u){for(f=0,s||u.ownerDocument==g||(p(u),r=!m);h=e[f++];)if(h(u,s||g,r)){c.push(u);break}d&&(C=T)}n&&((u=!h&&u)&&w--,a&&y.push(u))}if(w+=v,n&&v!==w){for(f=0;h=t[f++];)h(y,b,s,r);if(a){if(w>0)for(;v--;)y[v]||b[v]||(b[v]=B.call(c));b=Ce(b)}N.apply(c,b),d&&!a&&b.length>0&&w+t.length>1&&re.uniqueSort(c)}return d&&(C=T,l=k),y};return n?le(a):a}(a,o))).selector=e}return r},c=re.select=function(e,t,n,o){var a,c,l,d,u,p="function"==typeof e&&e,g=!o&&s(e=p.selector||e);if(n=n||[],1===g.length){if((c=g[0]=g[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===t.nodeType&&m&&i.relative[c[1].type]){if(!(t=(i.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(a=G.needsContext.test(e)?0:c.length;a--&&(l=c[a],!i.relative[d=l.type]);)if((u=i.find[d])&&(o=u(l.matches[0].replace(te,ne),ee.test(c[0].type)&&we(t.parentNode)||t))){if(c.splice(a,1),!(e=o.length&&ye(c)))return N.apply(n,o),n;break}}return(p||r(e,g))(o,t,!m,n,!t||ee.test(e)&&we(t.parentNode)||t),n},n.sortStable=b.split("").sort(I).join("")===b,n.detectDuplicates=!!u,p(),n.sortDetached=de((function(e){return 1&e.compareDocumentPosition(g.createElement("fieldset"))})),de((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&de((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),de((function(e){return null==e.getAttribute("disabled")}))||ue(P,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),re}(n);x.find=S,x.expr=S.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=S.uniqueSort,x.text=S.getText,x.isXMLDoc=S.isXML,x.contains=S.contains,x.escapeSelector=S.escape;var _=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&x(e).is(n))break;i.push(e)}return i},M=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},I=x.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(e,t,n){return w(t)?x.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?x.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?x.grep(e,(function(e){return d.call(t,e)>-1!==n})):x.filter(t,e,n)}x.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?x.find.matchesSelector(i,e)?[i]:[]:x.find.matches(e,x.grep(t,(function(e){return 1===e.nodeType})))},x.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(x(e).filter((function(){for(t=0;t<i;t++)if(x.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)x.find(e,o[t],n);return i>1?x.uniqueSort(n):n},filter:function(e){return this.pushStack(B(this,e||[],!1))},not:function(e){return this.pushStack(B(this,e||[],!0))},is:function(e){return!!B(this,"string"==typeof e&&I.test(e)?x(e):e||[],!1).length}});var D,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:N.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:y,!0)),O.test(i[1])&&x.isPlainObject(t))for(i in t)w(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=y.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):w(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,D=x(y);var R=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,o=this.length,a=[],s="string"!=typeof e&&x(e);if(!I.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?x.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?d.call(x(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _(e,"parentNode")},parentsUntil:function(e,t,n){return _(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return _(e,"nextSibling")},prevAll:function(e){return _(e,"previousSibling")},nextUntil:function(e,t,n){return _(e,"nextSibling",n)},prevUntil:function(e,t,n){return _(e,"previousSibling",n)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},(function(e,t){x.fn[e]=function(n,i){var o=x.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=x.filter(i,o)),this.length>1&&(j[e]||x.uniqueSort(o),R.test(e)&&o.reverse()),this.pushStack(o)}}));var E=/[^\x20\t\r\n\f]+/g;function z(e){return e}function q(e){throw e}function L(e,t,n,i){var o;try{e&&w(o=e.promise)?o.call(e).done(t).fail(n):e&&w(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return x.each(e.match(E)||[],(function(e,n){t[n]=!0})),t}(e):x.extend({},e);var t,n,i,o,a=[],s=[],r=-1,c=function(){for(o=o||e.once,i=t=!0;s.length;r=-1)for(n=s.shift();++r<a.length;)!1===a[r].apply(n[0],n[1])&&e.stopOnFalse&&(r=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},l={add:function(){return a&&(n&&!t&&(r=a.length-1,s.push(n)),function t(n){x.each(n,(function(n,i){w(i)?e.unique&&l.has(i)||a.push(i):i&&i.length&&"string"!==C(i)&&t(i)}))}(arguments),n&&!t&&c()),this},remove:function(){return x.each(arguments,(function(e,t){for(var n;(n=x.inArray(t,a,n))>-1;)a.splice(n,1),n<=r&&r--})),this},has:function(e){return e?x.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=s=[],n||t||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},x.extend({Deferred:function(e){var t=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return x.Deferred((function(n){x.each(t,(function(t,i){var o=w(e[i[4]])&&e[i[4]];a[i[1]]((function(){var e=o&&o.apply(this,arguments);e&&w(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,i,o){var a=0;function s(e,t,i,o){return function(){var r=this,c=arguments,l=function(){var n,l;if(!(e<a)){if((n=i.apply(r,c))===t.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"==typeof n||"function"==typeof n)&&n.then,w(l)?o?l.call(n,s(a,t,z,o),s(a,t,q,o)):(a++,l.call(n,s(a,t,z,o),s(a,t,q,o),s(a,t,z,t.notifyWith))):(i!==z&&(r=void 0,c=[n]),(o||t.resolveWith)(r,c))}},d=o?l:function(){try{l()}catch(n){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(n,d.stackTrace),e+1>=a&&(i!==q&&(r=void 0,c=[n]),t.rejectWith(r,c))}};e?d():(x.Deferred.getStackHook&&(d.stackTrace=x.Deferred.getStackHook()),n.setTimeout(d))}}return x.Deferred((function(n){t[0][3].add(s(0,n,w(o)?o:z,n.notifyWith)),t[1][3].add(s(0,n,w(e)?e:z)),t[2][3].add(s(0,n,w(i)?i:q))})).promise()},promise:function(e){return null!=e?x.extend(e,o):o}},a={};return x.each(t,(function(e,n){var s=n[2],r=n[5];o[n[1]]=s.add,r&&s.add((function(){i=r}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=s.fireWith})),o.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,i=Array(n),o=r.call(arguments),a=x.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?r.call(arguments):n,--t||a.resolveWith(i,o)}};if(t<=1&&(L(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||w(o[n]&&o[n].then)))return a.then();for(;n--;)L(o[n],s(n),a.reject);return a.promise()}});var F=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&F.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},x.readyException=function(e){n.setTimeout((function(){throw e}))};var H=x.Deferred();function U(){y.removeEventListener("DOMContentLoaded",U),n.removeEventListener("load",U),x.ready()}x.fn.ready=function(e){return H.then(e).catch((function(e){x.readyException(e)})),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||H.resolveWith(y,[x]))}}),x.ready.then=H.then,"complete"===y.readyState||"loading"!==y.readyState&&!y.documentElement.doScroll?n.setTimeout(x.ready):(y.addEventListener("DOMContentLoaded",U),n.addEventListener("load",U));var W=function(e,t,n,i,o,a,s){var r=0,c=e.length,l=null==n;if("object"===C(n))for(r in o=!0,n)W(e,t,r,n[r],!0,a,s);else if(void 0!==i&&(o=!0,w(i)||(s=!0),l&&(s?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(x(e),n)})),t))for(;r<c;r++)t(e[r],n,s?i:i.call(e[r],r,t(e[r],n)));return o?e:l?t.call(e):c?t(e[0],n):a},J=/^-ms-/,V=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function G(e){return e.replace(J,"ms-").replace(V,$)}var Q=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=x.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Q(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[G(t)]=n;else for(i in t)o[G(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in i?[t]:t.match(E)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||x.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var X=new Y,Z=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:K.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}x.extend({hasData:function(e){return Z.hasData(e)||X.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,i,o,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(o=Z.get(a),1===a.nodeType&&!X.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=G(i.slice(5)),te(a,i,o[i]));X.set(a,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){Z.set(this,e)})):W(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=Z.get(a,e))||void 0!==(n=te(a,e))?n:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),x.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=X.get(e,t),n&&(!i||Array.isArray(n)?i=X.access(e,t,x.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),i=n.length,o=n.shift(),a=x._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,(function(){x.dequeue(e,t)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:x.Callbacks("once memory").add((function(){X.remove(e,[t+"queue",n])}))})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each((function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){x.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=x.Deferred(),a=this,s=this.length,r=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=X.get(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(r));return r(),o.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=y.documentElement,se=function(e){return x.contains(e.ownerDocument,e)},re={composed:!0};ae.getRootNode&&(se=function(e){return x.contains(e.ownerDocument,e)||e.getRootNode(re)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===x.css(e,"display")};function le(e,t,n,i){var o,a,s=20,r=i?function(){return i.cur()}:function(){return x.css(e,t,"")},c=r(),l=n&&n[3]||(x.cssNumber[t]?"":"px"),d=e.nodeType&&(x.cssNumber[t]||"px"!==l&&+c)&&ie.exec(x.css(e,t));if(d&&d[3]!==l){for(c/=2,l=l||d[3],d=+c||1;s--;)x.style(e,t,d+l),(1-a)*(1-(a=r()/c||.5))<=0&&(s=0),d/=a;d*=2,x.style(e,t,d+l),n=n||[]}return n&&(d=+d||+c||0,o=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=d,i.end=o)),o}var de={};function ue(e){var t,n=e.ownerDocument,i=e.nodeName,o=de[i];return o||(t=n.body.appendChild(n.createElement(i)),o=x.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),de[i]=o,o)}function pe(e,t){for(var n,i,o=[],a=0,s=e.length;a<s;a++)(i=e[a]).style&&(n=i.style.display,t?("none"===n&&(o[a]=X.get(i,"display")||null,o[a]||(i.style.display="")),""===i.style.display&&ce(i)&&(o[a]=ue(i))):"none"!==n&&(o[a]="none",X.set(i,"display",n)));for(a=0;a<s;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}x.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ce(this)?x(this).show():x(this).hide()}))}});var ge,fe,me=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,we=/^$|^module$|\/(?:java|ecma)script/i;ge=y.createDocumentFragment().appendChild(y.createElement("div")),(fe=y.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ge.appendChild(fe),h.checkClone=ge.cloneNode(!0).cloneNode(!0).lastChild.checked,ge.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!ge.cloneNode(!0).lastChild.defaultValue,ge.innerHTML="<option></option>",h.option=!!ge.lastChild;var ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?x.merge([e],n):n}function be(e,t){for(var n=0,i=e.length;n<i;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,h.option||(ve.optgroup=ve.option=[1,"<select multiple='multiple'>","</select>"]);var ke=/<|&#?\w+;/;function Ce(e,t,n,i,o){for(var a,s,r,c,l,d,u=t.createDocumentFragment(),p=[],g=0,f=e.length;g<f;g++)if((a=e[g])||0===a)if("object"===C(a))x.merge(p,a.nodeType?[a]:a);else if(ke.test(a)){for(s=s||u.appendChild(t.createElement("div")),r=(he.exec(a)||["",""])[1].toLowerCase(),c=ve[r]||ve._default,s.innerHTML=c[1]+x.htmlPrefilter(a)+c[2],d=c[0];d--;)s=s.lastChild;x.merge(p,s.childNodes),(s=u.firstChild).textContent=""}else p.push(t.createTextNode(a));for(u.textContent="",g=0;a=p[g++];)if(i&&x.inArray(a,i)>-1)o&&o.push(a);else if(l=se(a),s=ye(u.appendChild(a),"script"),l&&be(s),n)for(d=0;a=s[d++];)we.test(a.type||"")&&n.push(a);return u}var xe=/^([^.]*)(?:\.(.+)|)/;function Te(){return!0}function Se(){return!1}function _e(e,t){return e===function(){try{return y.activeElement}catch(e){}}()==("focus"===t)}function Me(e,t,n,i,o,a){var s,r;if("object"==typeof t){for(r in"string"!=typeof n&&(i=i||n,n=void 0),t)Me(e,r,n,i,t[r],a);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Se;else if(!o)return e;return 1===a&&(s=o,(o=function(e){return x().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=x.guid++)),e.each((function(){x.event.add(this,t,o,i,n)}))}function Ie(e,t,n){n?(X.set(e,t,!1),x.event.add(e,t,{namespace:!1,handler:function(e){var i,o,a=X.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(x.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=r.call(arguments),X.set(this,t,a),i=n(this,t),this[t](),a!==(o=X.get(this,t))||i?X.set(this,t,!1):o={},a!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else a.length&&(X.set(this,t,{value:x.event.trigger(x.extend(a[0],x.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&x.event.add(e,t,Te)}x.event={global:{},add:function(e,t,n,i,o){var a,s,r,c,l,d,u,p,g,f,m,h=X.get(e);if(Q(e))for(n.handler&&(n=(a=n).handler,o=a.selector),o&&x.find.matchesSelector(ae,o),n.guid||(n.guid=x.guid++),(c=h.events)||(c=h.events=Object.create(null)),(s=h.handle)||(s=h.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(E)||[""]).length;l--;)g=m=(r=xe.exec(t[l])||[])[1],f=(r[2]||"").split(".").sort(),g&&(u=x.event.special[g]||{},g=(o?u.delegateType:u.bindType)||g,u=x.event.special[g]||{},d=x.extend({type:g,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:f.join(".")},a),(p=c[g])||((p=c[g]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(g,s)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),x.event.global[g]=!0)},remove:function(e,t,n,i,o){var a,s,r,c,l,d,u,p,g,f,m,h=X.hasData(e)&&X.get(e);if(h&&(c=h.events)){for(l=(t=(t||"").match(E)||[""]).length;l--;)if(g=m=(r=xe.exec(t[l])||[])[1],f=(r[2]||"").split(".").sort(),g){for(u=x.event.special[g]||{},p=c[g=(i?u.delegateType:u.bindType)||g]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=p.length;a--;)d=p[a],!o&&m!==d.origType||n&&n.guid!==d.guid||r&&!r.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(p.splice(a,1),d.selector&&p.delegateCount--,u.remove&&u.remove.call(e,d));s&&!p.length&&(u.teardown&&!1!==u.teardown.call(e,f,h.handle)||x.removeEvent(e,g,h.handle),delete c[g])}else for(g in c)x.event.remove(e,g+t[l],n,i,!0);x.isEmptyObject(c)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,a,s,r=new Array(arguments.length),c=x.event.fix(e),l=(X.get(this,"events")||Object.create(null))[c.type]||[],d=x.event.special[c.type]||{};for(r[0]=c,t=1;t<arguments.length;t++)r[t]=arguments[t];if(c.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,c)){for(s=x.event.handlers.call(this,c,l),t=0;(o=s[t++])&&!c.isPropagationStopped();)for(c.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==a.namespace&&!c.rnamespace.test(a.namespace)||(c.handleObj=a,c.data=a.data,void 0!==(i=((x.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,r))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,i,o,a,s,r=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(a=[],s={},n=0;n<c;n++)void 0===s[o=(i=t[n]).selector+" "]&&(s[o]=i.needsContext?x(o,this).index(l)>-1:x.find(o,this,null,[l]).length),s[o]&&a.push(i);a.length&&r.push({elem:l,handlers:a})}return l=this,c<t.length&&r.push({elem:l,handlers:t.slice(c)}),r},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:w(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return me.test(t.type)&&t.click&&A(t,"input")&&Ie(t,"click",Te),!1},trigger:function(e){var t=this||e;return me.test(t.type)&&t.click&&A(t,"input")&&Ie(t,"click"),!0},_default:function(e){var t=e.target;return me.test(t.type)&&t.click&&A(t,"input")&&X.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Te:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},(function(e,t){x.event.special[e]={setup:function(){return Ie(this,e,_e),!1},trigger:function(){return Ie(this,e),!0},_default:function(){return!0},delegateType:t}})),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,a=e.handleObj;return o&&(o===i||x.contains(i,o))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),x.fn.extend({on:function(e,t,n,i){return Me(this,e,t,n,i)},one:function(e,t,n,i){return Me(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each((function(){x.event.remove(this,e,n,t)}))}});var Ae=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function De(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Ne(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var n,i,o,a,s,r;if(1===t.nodeType){if(X.hasData(e)&&(r=X.get(e).events))for(o in X.remove(t,"handle events"),r)for(n=0,i=r[o].length;n<i;n++)x.event.add(t,o,r[o][n]);Z.hasData(e)&&(a=Z.access(e),s=x.extend({},a),Z.set(t,s))}}function Pe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&me.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ee(e,t,n,i){t=c(t);var o,a,s,r,l,d,u=0,p=e.length,g=p-1,f=t[0],m=w(f);if(m||p>1&&"string"==typeof f&&!h.checkClone&&Oe.test(f))return e.each((function(o){var a=e.eq(o);m&&(t[0]=f.call(this,o,a.html())),Ee(a,t,n,i)}));if(p&&(a=(o=Ce(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=a),a||i)){for(r=(s=x.map(ye(o,"script"),Ne)).length;u<p;u++)l=o,u!==g&&(l=x.clone(l,!0,!0),r&&x.merge(s,ye(l,"script"))),n.call(e[u],l,u);if(r)for(d=s[s.length-1].ownerDocument,x.map(s,Re),u=0;u<r;u++)l=s[u],we.test(l.type||"")&&!X.access(l,"globalEval")&&x.contains(d,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?x._evalUrl&&!l.noModule&&x._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},d):k(l.textContent.replace(Be,""),l,d))}return e}function ze(e,t,n){for(var i,o=t?x.filter(t,e):e,a=0;null!=(i=o[a]);a++)n||1!==i.nodeType||x.cleanData(ye(i)),i.parentNode&&(n&&se(i)&&be(ye(i,"script")),i.parentNode.removeChild(i));return e}x.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,o,a,s,r=e.cloneNode(!0),c=se(e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(s=ye(r),i=0,o=(a=ye(e)).length;i<o;i++)Pe(a[i],s[i]);if(t)if(n)for(a=a||ye(e),s=s||ye(r),i=0,o=a.length;i<o;i++)je(a[i],s[i]);else je(e,r);return(s=ye(r,"script")).length>0&&be(s,!c&&ye(e,"script")),r},cleanData:function(e){for(var t,n,i,o=x.event.special,a=0;void 0!==(n=e[a]);a++)if(Q(n)){if(t=n[X.expando]){if(t.events)for(i in t.events)o[i]?x.event.remove(n,i):x.removeEvent(n,i,t.handle);n[X.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),x.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return W(this,(function(e){return void 0===e?x.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ee(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,e).appendChild(e)}))},prepend:function(){return Ee(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=De(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ee(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ee(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return x.clone(this,e,t)}))},html:function(e){return W(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ve[(he.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ee(this,arguments,(function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(ye(this)),n&&n.replaceChild(t,this))}),e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){x.fn[e]=function(e){for(var n,i=[],o=x(e),a=o.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),x(o[s])[t](n),l.apply(i,n.get());return this.pushStack(i)}}));var qe=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Le=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Fe=function(e,t,n){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.call(e),t)e.style[o]=a[o];return i},He=new RegExp(oe.join("|"),"i");function Ue(e,t,n){var i,o,a,s,r=e.style;return(n=n||Le(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||se(e)||(s=x.style(e,t)),!h.pixelBoxStyles()&&qe.test(s)&&He.test(t)&&(i=r.width,o=r.minWidth,a=r.maxWidth,r.minWidth=r.maxWidth=r.width=s,s=n.width,r.width=i,r.minWidth=o,r.maxWidth=a)),void 0!==s?s+"":s}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(d){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(l).appendChild(d);var e=n.getComputedStyle(d);i="1%"!==e.top,c=12===t(e.marginLeft),d.style.right="60%",s=36===t(e.right),o=36===t(e.width),d.style.position="absolute",a=12===t(d.offsetWidth/3),ae.removeChild(l),d=null}}function t(e){return Math.round(parseFloat(e))}var i,o,a,s,r,c,l=y.createElement("div"),d=y.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===d.style.backgroundClip,x.extend(h,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,i,o;return null==r&&(e=y.createElement("table"),t=y.createElement("tr"),i=y.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",i.style.height="9px",i.style.display="block",ae.appendChild(e).appendChild(t).appendChild(i),o=n.getComputedStyle(t),r=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,ae.removeChild(e)),r}}))}();var Je=["Webkit","Moz","ms"],Ve=y.createElement("div").style,$e={};function Ge(e){var t=x.cssProps[e]||$e[e];return t||(e in Ve?e:$e[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Je.length;n--;)if((e=Je[n]+t)in Ve)return e}(e)||e)}var Qe=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Xe={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function Ke(e,t,n){var i=ie.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function et(e,t,n,i,o,a){var s="width"===t?1:0,r=0,c=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=x.css(e,n+oe[s],!0,o)),i?("content"===n&&(c-=x.css(e,"padding"+oe[s],!0,o)),"margin"!==n&&(c-=x.css(e,"border"+oe[s]+"Width",!0,o))):(c+=x.css(e,"padding"+oe[s],!0,o),"padding"!==n?c+=x.css(e,"border"+oe[s]+"Width",!0,o):r+=x.css(e,"border"+oe[s]+"Width",!0,o));return!i&&a>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-c-r-.5))||0),c}function tt(e,t,n){var i=Le(e),o=(!h.boxSizingReliable()||n)&&"border-box"===x.css(e,"boxSizing",!1,i),a=o,s=Ue(e,t,i),r="offset"+t[0].toUpperCase()+t.slice(1);if(qe.test(s)){if(!n)return s;s="auto"}return(!h.boxSizingReliable()&&o||!h.reliableTrDimensions()&&A(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===x.css(e,"display",!1,i))&&e.getClientRects().length&&(o="border-box"===x.css(e,"boxSizing",!1,i),(a=r in e)&&(s=e[r])),(s=parseFloat(s)||0)+et(e,t,n||(o?"border":"content"),a,i,s)+"px"}function nt(e,t,n,i,o){return new nt.prototype.init(e,t,n,i,o)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,r=G(t),c=Ye.test(t),l=e.style;if(c||(t=Ge(r)),s=x.cssHooks[t]||x.cssHooks[r],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t];"string"===(a=typeof n)&&(o=ie.exec(n))&&o[1]&&(n=le(e,t,o),a="number"),null!=n&&n==n&&("number"!==a||c||(n+=o&&o[3]||(x.cssNumber[r]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(c?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,i){var o,a,s,r=G(t);return Ye.test(t)||(t=Ge(r)),(s=x.cssHooks[t]||x.cssHooks[r])&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=Ue(e,t,i)),"normal"===o&&t in Ze&&(o=Ze[t]),""===n||n?(a=parseFloat(o),!0===n||isFinite(a)?a||0:o):o}}),x.each(["height","width"],(function(e,t){x.cssHooks[t]={get:function(e,n,i){if(n)return!Qe.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,i):Fe(e,Xe,(function(){return tt(e,t,i)}))},set:function(e,n,i){var o,a=Le(e),s=!h.scrollboxSize()&&"absolute"===a.position,r=(s||i)&&"border-box"===x.css(e,"boxSizing",!1,a),c=i?et(e,t,i,r,a):0;return r&&s&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-et(e,t,"border",!1,a)-.5)),c&&(o=ie.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),Ke(0,n,c)}}})),x.cssHooks.marginLeft=We(h.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),x.each({margin:"",padding:"",border:"Width"},(function(e,t){x.cssHooks[e+t]={expand:function(n){for(var i=0,o={},a="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+oe[i]+t]=a[i]||a[i-2]||a[0];return o}},"margin"!==e&&(x.cssHooks[e+t].set=Ke)})),x.fn.extend({css:function(e,t){return W(this,(function(e,t,n){var i,o,a={},s=0;if(Array.isArray(t)){for(i=Le(e),o=t.length;s<o;s++)a[t[s]]=x.css(e,t[s],!1,i);return a}return void 0!==n?x.style(e,t,n):x.css(e,t)}),e,t,arguments.length>1)}}),x.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,i,o,a){this.elem=e,this.prop=n,this.easing=o||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(x.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||!x.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=nt.prototype.init,x.fx.step={};var it,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function rt(){ot&&(!1===y.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(rt):n.setTimeout(rt,x.fx.interval),x.fx.tick())}function ct(){return n.setTimeout((function(){it=void 0})),it=Date.now()}function lt(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=oe[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function dt(e,t,n){for(var i,o=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),a=0,s=o.length;a<s;a++)if(i=o[a].call(n,t,e))return i}function ut(e,t,n){var i,o,a=0,s=ut.prefilters.length,r=x.Deferred().always((function(){delete c.elem})),c=function(){if(o)return!1;for(var t=it||ct(),n=Math.max(0,l.startTime+l.duration-t),i=1-(n/l.duration||0),a=0,s=l.tweens.length;a<s;a++)l.tweens[a].run(i);return r.notifyWith(e,[l,i,n]),i<1&&s?n:(s||r.notifyWith(e,[l,1,0]),r.resolveWith(e,[l]),!1)},l=r.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var i=x.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)l.tweens[n].run(1);return t?(r.notifyWith(e,[l,1,0]),r.resolveWith(e,[l,t])):r.rejectWith(e,[l,t]),this}}),d=l.props;for(!function(e,t){var n,i,o,a,s;for(n in e)if(o=t[i=G(n)],a=e[n],Array.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=x.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=o);else t[i]=o}(d,l.opts.specialEasing);a<s;a++)if(i=ut.prefilters[a].call(l,e,d,l.opts))return w(i.stop)&&(x._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return x.map(d,dt,l),w(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),x.fx.timer(x.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}x.Animation=x.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){w(e)?(t=e,e=["*"]):e=e.match(E);for(var n,i=0,o=e.length;i<o;i++)n=e[i],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,o,a,s,r,c,l,d,u="width"in t||"height"in t,p=this,g={},f=e.style,m=e.nodeType&&ce(e),h=X.get(e,"fxshow");for(i in n.queue||(null==(s=x._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,r=s.empty.fire,s.empty.fire=function(){s.unqueued||r()}),s.unqueued++,p.always((function(){p.always((function(){s.unqueued--,x.queue(e,"fx").length||s.empty.fire()}))}))),t)if(o=t[i],at.test(o)){if(delete t[i],a=a||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!h||void 0===h[i])continue;m=!0}g[i]=h&&h[i]||x.style(e,i)}if((c=!x.isEmptyObject(t))||!x.isEmptyObject(g))for(i in u&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=h&&h.display)&&(l=X.get(e,"display")),"none"===(d=x.css(e,"display"))&&(l?d=l:(pe([e],!0),l=e.style.display||l,d=x.css(e,"display"),pe([e]))),("inline"===d||"inline-block"===d&&null!=l)&&"none"===x.css(e,"float")&&(c||(p.done((function(){f.display=l})),null==l&&(d=f.display,l="none"===d?"":d)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),c=!1,g)c||(h?"hidden"in h&&(m=h.hidden):h=X.access(e,"fxshow",{display:l}),a&&(h.hidden=!m),m&&pe([e],!0),p.done((function(){for(i in m||pe([e]),X.remove(e,"fxshow"),g)x.style(e,i,g[i])}))),c=dt(m?h[i]:0,i,p),i in h||(h[i]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),x.speed=function(e,t,n){var i=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||w(e)&&e,duration:e,easing:n&&t||t&&!w(t)&&t};return x.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in x.fx.speeds?i.duration=x.fx.speeds[i.duration]:i.duration=x.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){w(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=x.isEmptyObject(e),a=x.speed(t,n,i),s=function(){var t=ut(this,x.extend({},e),a);(o||X.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",a=x.timers,s=X.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&st.test(o)&&i(s[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||x.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=X.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],a=x.timers,s=i?i.length:0;for(n.finish=!0,x.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),x.each(["toggle","show","hide"],(function(e,t){var n=x.fn[t];x.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,i,o)}})),x.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){x.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),it=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ot||(ot=!0,rt())},x.fx.stop=function(){ot=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,t){return e=x.fx&&x.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var o=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(o)}}))},function(){var e=y.createElement("input"),t=y.createElement("select").appendChild(y.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=y.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var pt,gt=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return W(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){x.removeAttr(this,e)}))}}),x.extend({attr:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?x.prop(e,t,n):(1===a&&x.isXMLDoc(e)||(o=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=x.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(E);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=gt[t]||x.find.attr;gt[t]=function(e,t,i){var o,a,s=t.toLowerCase();return i||(a=gt[s],gt[s]=o,o=null!=n(e,t,i)?s:null,gt[s]=a),o}}));var ft=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;function ht(e){return(e.match(E)||[]).join(" ")}function wt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(E)||[]}x.fn.extend({prop:function(e,t){return W(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[x.propFix[e]||e]}))}}),x.extend({prop:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&x.isXMLDoc(e)||(t=x.propFix[t]||t,o=x.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){x.propFix[this.toLowerCase()]=this})),x.fn.extend({addClass:function(e){var t,n,i,o,a,s,r,c=0;if(w(e))return this.each((function(t){x(this).addClass(e.call(this,t,wt(this)))}));if((t=vt(e)).length)for(;n=this[c++];)if(o=wt(n),i=1===n.nodeType&&" "+ht(o)+" "){for(s=0;a=t[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");o!==(r=ht(i))&&n.setAttribute("class",r)}return this},removeClass:function(e){var t,n,i,o,a,s,r,c=0;if(w(e))return this.each((function(t){x(this).removeClass(e.call(this,t,wt(this)))}));if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;n=this[c++];)if(o=wt(n),i=1===n.nodeType&&" "+ht(o)+" "){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");o!==(r=ht(i))&&n.setAttribute("class",r)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):w(e)?this.each((function(n){x(this).toggleClass(e.call(this,n,wt(this),t),t)})):this.each((function(){var t,o,a,s;if(i)for(o=0,a=x(this),s=vt(e);t=s[o++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=wt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+ht(wt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;x.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=w(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,x(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=x.map(o,(function(e){return null==e?"":e+""}))),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(yt,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:ht(x.text(e))}},select:{get:function(e){var t,n,i,o=e.options,a=e.selectedIndex,s="select-one"===e.type,r=s?null:[],c=s?a+1:o.length;for(i=a<0?c:s?a:0;i<c;i++)if(((n=o[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=x(n).val(),s)return t;r.push(t)}return r},set:function(e,t){for(var n,i,o=e.options,a=x.makeArray(t),s=o.length;s--;)((i=o[s]).selected=x.inArray(x.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),x.each(["radio","checkbox"],(function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},h.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),h.focusin="onfocusin"in n;var bt=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(e,t,i,o){var a,s,r,c,l,d,u,p,f=[i||y],m=g.call(e,"type")?e.type:e,h=g.call(e,"namespace")?e.namespace.split("."):[];if(s=p=r=i=i||y,3!==i.nodeType&&8!==i.nodeType&&!bt.test(m+x.event.triggered)&&(m.indexOf(".")>-1&&(h=m.split("."),m=h.shift(),h.sort()),l=m.indexOf(":")<0&&"on"+m,(e=e[x.expando]?e:new x.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:x.makeArray(t,[e]),u=x.event.special[m]||{},o||!u.trigger||!1!==u.trigger.apply(i,t))){if(!o&&!u.noBubble&&!v(i)){for(c=u.delegateType||m,bt.test(c+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),r=s;r===(i.ownerDocument||y)&&f.push(r.defaultView||r.parentWindow||n)}for(a=0;(s=f[a++])&&!e.isPropagationStopped();)p=s,e.type=a>1?c:u.bindType||m,(d=(X.get(s,"events")||Object.create(null))[e.type]&&X.get(s,"handle"))&&d.apply(s,t),(d=l&&s[l])&&d.apply&&Q(s)&&(e.result=d.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,o||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),t)||!Q(i)||l&&w(i[m])&&!v(i)&&((r=i[l])&&(i[l]=null),x.event.triggered=m,e.isPropagationStopped()&&p.addEventListener(m,kt),i[m](),e.isPropagationStopped()&&p.removeEventListener(m,kt),x.event.triggered=void 0,r&&(i[l]=r)),e.result}},simulate:function(e,t,n){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(i,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each((function(){x.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}}),h.focusin||x.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,o=X.access(i,t);o||i.addEventListener(e,n,!0),X.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,o=X.access(i,t)-1;o?X.access(i,t,o):(i.removeEventListener(e,n,!0),X.remove(i,t))}}}));var Ct=n.location,xt={guid:Date.now()},Tt=/\?/;x.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){}return i=t&&t.getElementsByTagName("parsererror")[0],t&&!i||x.error("Invalid XML: "+(i?x.map(i.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var St=/\[\]$/,_t=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,i){var o;if(Array.isArray(t))x.each(t,(function(t,o){n||St.test(e)?i(e,o):At(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)}));else if(n||"object"!==C(t))i(e,t);else for(o in t)At(e+"["+o+"]",t[o],n,i)}x.param=function(e,t){var n,i=[],o=function(e,t){var n=w(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,(function(){o(this.name,this.value)}));else for(n in e)At(n,e[n],t,o);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&It.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!me.test(e))})).map((function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,(function(e){return{name:t.name,value:e.replace(_t,"\r\n")}})):{name:t.name,value:n.replace(_t,"\r\n")}})).get()}});var Ot=/%20/g,Bt=/#.*$/,Dt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,jt=/^\/\//,Pt={},Et={},zt="*/".concat("*"),qt=y.createElement("a");function Lt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,a=t.toLowerCase().match(E)||[];if(w(n))for(;i=a[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Ft(e,t,n,i){var o={},a=e===Et;function s(r){var c;return o[r]=!0,x.each(e[r]||[],(function(e,r){var l=r(t,n,i);return"string"!=typeof l||a||o[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),s(l),!1)})),c}return s(t.dataTypes[0])||!o["*"]&&s("*")}function Ht(e,t){var n,i,o=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&x.extend(!0,e,i),e}qt.href=Ct.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ht(Ht(e,x.ajaxSettings),t):Ht(x.ajaxSettings,e)},ajaxPrefilter:Lt(Pt),ajaxTransport:Lt(Et),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,a,s,r,c,l,d,u,p,g=x.ajaxSetup({},t),f=g.context||g,m=g.context&&(f.nodeType||f.jquery)?x(f):x.event,h=x.Deferred(),w=x.Callbacks("once memory"),v=g.statusCode||{},b={},k={},C="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=Nt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=k[e.toLowerCase()]=k[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)T.always(e[T.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),S(0,t),this}};if(h.promise(T),g.url=((e||g.url||Ct.href)+"").replace(jt,Ct.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(E)||[""],null==g.crossDomain){c=y.createElement("a");try{c.href=g.url,c.href=c.href,g.crossDomain=qt.protocol+"//"+qt.host!=c.protocol+"//"+c.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=x.param(g.data,g.traditional)),Ft(Pt,g,t,T),l)return T;for(u in(d=x.event&&g.global)&&0==x.active++&&x.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Rt.test(g.type),o=g.url.replace(Bt,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Ot,"+")):(p=g.url.slice(o.length),g.data&&(g.processData||"string"==typeof g.data)&&(o+=(Tt.test(o)?"&":"?")+g.data,delete g.data),!1===g.cache&&(o=o.replace(Dt,"$1"),p=(Tt.test(o)?"&":"?")+"_="+xt.guid+++p),g.url=o+p),g.ifModified&&(x.lastModified[o]&&T.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&T.setRequestHeader("If-None-Match",x.etag[o])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&T.setRequestHeader("Content-Type",g.contentType),T.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+zt+"; q=0.01":""):g.accepts["*"]),g.headers)T.setRequestHeader(u,g.headers[u]);if(g.beforeSend&&(!1===g.beforeSend.call(f,T,g)||l))return T.abort();if(C="abort",w.add(g.complete),T.done(g.success),T.fail(g.error),i=Ft(Et,g,t,T)){if(T.readyState=1,d&&m.trigger("ajaxSend",[T,g]),l)return T;g.async&&g.timeout>0&&(r=n.setTimeout((function(){T.abort("timeout")}),g.timeout));try{l=!1,i.send(b,S)}catch(e){if(l)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,s,c){var u,p,y,b,k,C=t;l||(l=!0,r&&n.clearTimeout(r),i=void 0,a=c||"",T.readyState=e>0?4:0,u=e>=200&&e<300||304===e,s&&(b=function(e,t,n){for(var i,o,a,s,r=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in r)if(r[o]&&r[o].test(i)){c.unshift(o);break}if(c[0]in n)a=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){a=o;break}s||(s=o)}a=a||s}if(a)return a!==c[0]&&c.unshift(a),n[a]}(g,T,s)),!u&&x.inArray("script",g.dataTypes)>-1&&x.inArray("json",g.dataTypes)<0&&(g.converters["text script"]=function(){}),b=function(e,t,n,i){var o,a,s,r,c,l={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(a=d.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=a,a=d.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(!(s=l[c+" "+a]||l["* "+a]))for(o in l)if((r=o.split(" "))[1]===a&&(s=l[c+" "+r[0]]||l["* "+r[0]])){!0===s?s=l[o]:!0!==l[o]&&(a=r[0],d.unshift(r[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+a}}}return{state:"success",data:t}}(g,b,T,u),u?(g.ifModified&&((k=T.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=k),(k=T.getResponseHeader("etag"))&&(x.etag[o]=k)),204===e||"HEAD"===g.type?C="nocontent":304===e?C="notmodified":(C=b.state,p=b.data,u=!(y=b.error))):(y=C,!e&&C||(C="error",e<0&&(e=0))),T.status=e,T.statusText=(t||C)+"",u?h.resolveWith(f,[p,C,T]):h.rejectWith(f,[T,C,y]),T.statusCode(v),v=void 0,d&&m.trigger(u?"ajaxSuccess":"ajaxError",[T,g,u?p:y]),w.fireWith(f,[T,C]),d&&(m.trigger("ajaxComplete",[T,g]),--x.active||x.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],(function(e,t){x[t]=function(e,n,i,o){return w(n)&&(o=o||i,i=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:o,data:n,success:i},x.isPlainObject(e)&&e))}})),x.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),x._evalUrl=function(e,t,n){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){x.globalEval(e,t,n)}})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(w(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return w(e)?this.each((function(t){x(this).wrapInner(e.call(this,t))})):this.each((function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=w(e);return this.each((function(n){x(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){x(this).replaceWith(this.childNodes)})),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Wt=x.ajaxSettings.xhr();h.cors=!!Wt&&"withCredentials"in Wt,h.ajax=Wt=!!Wt,x.ajaxTransport((function(e){var t,i;if(h.cors||Wt&&!e.crossDomain)return{send:function(o,a){var s,r=e.xhr();if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)r[s]=e.xhrFields[s];for(s in e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)r.setRequestHeader(s,o[s]);t=function(e){return function(){t&&(t=i=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?a(0,"error"):a(r.status,r.statusText):a(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=t(),i=r.onerror=r.ontimeout=t("error"),void 0!==r.onabort?r.onabort=i:r.onreadystatechange=function(){4===r.readyState&&n.setTimeout((function(){t&&i()}))},t=t("abort");try{r.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),x.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),x.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,o){t=x("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),y.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Jt,Vt=[],$t=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||x.expando+"_"+xt.guid++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",(function(e,t,i){var o,a,s,r=!1!==e.jsonp&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(r||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=w(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace($t,"$1"+o):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||x.error(o+" was not called"),s[0]},e.dataTypes[0]="json",a=n[o],n[o]=function(){s=arguments},i.always((function(){void 0===a?x(n).removeProp(o):n[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,Vt.push(o)),s&&w(a)&&a(s[0]),s=a=void 0})),"script"})),h.createHTMLDocument=((Jt=y.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(h.createHTMLDocument?((i=(t=y.implementation.createHTMLDocument("")).createElement("base")).href=y.location.href,t.head.appendChild(i)):t=y),a=!n&&[],(o=O.exec(e))?[t.createElement(o[1])]:(o=Ce([e],t,a),a&&a.length&&x(a).remove(),x.merge([],o.childNodes)));var i,o,a},x.fn.load=function(e,t,n){var i,o,a,s=this,r=e.indexOf(" ");return r>-1&&(i=ht(e.slice(r)),e=e.slice(0,r)),w(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&x.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){a=arguments,s.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},x.expr.pseudos.animated=function(e){return x.grep(x.timers,(function(t){return e===t.elem})).length},x.offset={setOffset:function(e,t,n){var i,o,a,s,r,c,l=x.css(e,"position"),d=x(e),u={};"static"===l&&(e.style.position="relative"),r=d.offset(),a=x.css(e,"top"),c=x.css(e,"left"),("absolute"===l||"fixed"===l)&&(a+c).indexOf("auto")>-1?(s=(i=d.position()).top,o=i.left):(s=parseFloat(a)||0,o=parseFloat(c)||0),w(t)&&(t=t.call(e,n,x.extend({},r))),null!=t.top&&(u.top=t.top-r.top+s),null!=t.left&&(u.left=t.left-r.left+o),"using"in t?t.using.call(e,u):d.css(u)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){x.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],o={top:0,left:0};if("fixed"===x.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((o=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),o.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-x.css(i,"marginTop",!0),left:t.left-o.left-x.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||ae}))}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;x.fn[e]=function(i){return W(this,(function(e,i,o){var a;if(v(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o)return a?a[t]:e[i];a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[i]=o}),e,i,arguments.length)}})),x.each(["top","left"],(function(e,t){x.cssHooks[t]=We(h.pixelPosition,(function(e,n){if(n)return n=Ue(e,t),qe.test(n)?x(e).position()[t]+"px":n}))})),x.each({Height:"height",Width:"width"},(function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){x.fn[i]=function(o,a){var s=arguments.length&&(n||"boolean"!=typeof o),r=n||(!0===o||!0===a?"margin":"border");return W(this,(function(t,n,o){var a;return v(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?x.css(t,n,r):x.style(t,n,o,r)}),t,s?o:void 0,s)}}))})),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){x.fn[t]=function(e){return this.on(t,e)}})),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),w(e))return i=r.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||x.guid++,o},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=A,x.isFunction=w,x.isWindow=v,x.camelCase=G,x.type=C,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},x.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},void 0===(i=function(){return x}.apply(t,[]))||(e.exports=i);var Qt=n.jQuery,Yt=n.$;return x.noConflict=function(e){return n.$===x&&(n.$=Yt),e&&n.jQuery===x&&(n.jQuery=Qt),x},void 0===o&&(n.jQuery=n.$=x),x}))},,,,,,function(e,t,n){"use strict";e.exports=function(e){var t=e.event,n=e.payload;if("[object Object]"===Object.prototype.toString.call(n)&&"string"==typeof t){var i={},o="";try{o=window.chat?window.chat.jid:window.frames.ymIframe.chat.jid}catch(e){console.log("error in getting jid")}try{if(i.botId=window.ymConfig.bot,i.uid=o.split("@")[0],i.source=i.source||"yellowmessenger",i.event=t,console.log(i),!i.botId||!i.uid)return;i.payload=n,i=JSON.stringify(i);var a=new XMLHttpRequest;a.addEventListener("readystatechange",(function(){4===this.readyState&&console.log(i,"data")})),a.open("POST","".concat(window.ymConfig.host,"/integrations/analytics/send-event")),a.setRequestHeader("Content-Type","application/json"),a.send(i)}catch(e){console.log("error while sending event",e)}}}},function(e,t,n){"use strict";e.exports=new function(){this.map={};var e=this;this.getItem=function(t){try{return localStorage.getItem(t)}catch(n){return e.map[t]}},this.setItem=function(t,n){try{localStorage.setItem(t,n)}catch(i){e.map[t]=n}},this.deleteItem=function(t,n){try{localStorage.removeItem(t)}catch(i){e.map[t]=n}}}},,,,,,,,function(e,t){var n,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function r(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,l=[],d=!1,u=-1;function p(){d&&c&&(d=!1,c.length?l=c.concat(l):u=-1,l.length&&g())}function g(){if(!d){var e=r(p);d=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||d||r(g)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},,,,,,,,,,,,,function(e,t,n){"use strict";(function(e,t){c(n(29));var i=c(n(7)),o=c(n(30)),a=c(n(31)),s=c(n(32));n(34);var r=c(n(36));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){p(e,t,n[t])}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g="https://cdn.yellowmessenger.com",f="".concat(g,"/files/images/file.png"),m=n(6),h={},w=null,v=0,y={},b=!1,k=function(e,t,n){e&&-1!==e.indexOf("agent")?e="user_".concat(t.ticketId,"_").concat(t.botId,"_").concat(t.uid):n&&(e=n.substring(1)+Date.now());var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return"string"==typeof e||"number"==typeof e?e+"_"+i:i+""};window.ymConfig.lite||o.default.createUI(window.ymConfig),o.default.enableMap(window.ymConfig),e("#chatContainer").ready((function(c){var p,C=null,x=new Date,T=!1,S=!1,_=!1,M=!1,I=!1,A=0,O=null,B=!1,D={EN:"en-IN",HI:"hi-IN",TE:"te-IN",KA:"kn-IN",FR:"fr-FR",VN:"vi-VN",TH:"th-TH",ID:"id-ID",MS:"ms-MY",BN:"bn-IN",TA:"ta-IN",KN:"kn-IN",AR:"ar-SA",UR:"ur-IN"};window.ymConfig.channel,(N=window.ymConfig).sdk||N.pwa||N.lite;var N,R=[{code:"en-US",language:"English"},{code:"gu-IN",language:"Gujarati"},{code:"hi-IN",language:"Hindi"},{code:"mr-IN",language:"Marathi"},{code:"ta-IN",language:"Tamil"},{code:"te-IN",language:"Telugu"},{code:"ar-SA",language:"Arabic"}],j=document.body.style;j.setProperty("--thumbsUpUrl","url("+g+"/files/images/thumbs-up.png)"),j.setProperty("--thumbsUpFullUrl","url("+g+"/files/images/thumbs-up-full.png)"),j.setProperty("--thumbsDownUrl","url("+g+"/files/images/thumbs-down.png)"),j.setProperty("--thumbsDownFullUrl","url("+g+"/files/images/thumbs-down-full.png)"),j.setProperty("--homeImage","url("+g+"/files/images/home.png)"),j.setProperty("--slickLoader","url("+g+"/files/images/ajax-loader.gif)"),j.setProperty("--avatarImage","url("+g+"/files/images/avatar.png)");var P=!1,E=[];function z(){e("video").trigger("pause")}function q(){return window.navigator&&window.navigator.userAgent&&(-1!==window.navigator.userAgent.toLowerCase().indexOf("iphone")||-1!==window.navigator.userAgent.toLowerCase().indexOf("ipad"))}function L(e){var t=e||new Date,n=t.getHours(),i=!1;12===n?n=12:0===n?(i=!0,n=12):n<12?i=!0:n-=12,n<10&&(n="0"+n);var o=t.getMinutes();return o<10&&(o="0"+o),"".concat(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]," ").concat(n,":").concat(o," ").concat(i?"AM":"PM")}window.clickedSpeakFirstMicIcon=!1,window.botOpenClicked=!1,window.promotionQueue="",window.botInOpenState=window.ymConfig&&(window.ymConfig.pwa||window.ymConfig.lite)||!1,window.fbAsyncInit=function(){try{FB.init({appId:"1729287550616352",xfbml:!0,version:"v2.8"})}catch(e){}},window.mobileAndTabletCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},function(e){e.fn.hasScrollBar=function(e){return 0!==this.height()&&this.get(0).scrollHeight>this.height()+e}}(t),function(e){e.fn.vAlign=function(){return this.each((function(t){var n=e(this).height(),i=(e(this).parent().height()-n)/2;e(this).css("margin-top",i)}))}}(t),window.videoClick=function(e){e.paused?e.play():e.pause()},window.videoDbClick=function(e){e.webkitDisplayingFullscreen?e.webkitExitFullScreen():e.webkitEnterFullScreen()},window.mobileCheck=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},e((function(t){var c=new Date,N=new Date;function j(){var t=new Date;t.getTime()-c.getTime()>3e3&&e("#alert").trigger("play"),c=t}function F(){var t=new Date;t.getTime()-N.getTime()>1e3&&e("#voiceAlert").trigger("play"),N=t}var H,U,W,J,V=!1,$=!1,G=!1,Q=!1,Y=window.ymConfig.bot,X=window.ymConfig.bot,Z=window.ymConfig.channel||"yellowmessenger",K=function(e){return e.sdk?"sdk":e.pwa||e.lite?"pwa":null}(window.ymConfig),ee=function(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("safari")&&!(e.indexOf("chrome")>-1)},te=function e(){if(e.prototype._cachedResult)return e.prototype._cachedResult;var t=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,n="undefined"!=typeof InstallTrigger,i=ee(),o=!!window.chrome&&!t,a=!!document.documentMode,s=!a&&!!window.StyleMedia;return e.prototype._cachedResult=t?"Opera":n?"Firefox":i?"Safari":o?"Chrome":a?"IE":s?"Edge":"Don't know"};window.finalTranscript="",window.waitingTIme=6e3;var ne,ie="",oe=!1,ae=!1,se=!0;function re(){e.ajax({url:"".concat("https://app.yellowmessenger.com","/api/voice/microsoft-token"),method:"GET",success:function(e){se=!1,window.msTokenCreated=Date.now(),ne=e,U=void 0,window.recognizing=void 0,ce()},error:function(e){console.log(e,"restartMicrosoftSpeechRecognition generation failed")}})}function ce(){if(window.silenceCheckTime=new Date,p=new Date,window.startRecording&&(U&&(U=void 0),e(".mic-button").addClass("enabled"),window.startRecording=!1),!U){var t=SpeechSDK.AudioConfig.fromDefaultMicrophoneInput();if(se||Date.now()-window.msTokenCreated>54e4)return re();var n=SpeechSDK.SpeechConfig.fromAuthorizationToken(ne,"centralindia"),i=window.chat.language||"EN";R.some((function(e){return e.code===i}))||(i=D[i]||"en-IN"),n.speechRecognitionLanguage=i,(U=new SpeechSDK.SpeechRecognizer(n,t)).recognizing=function(t,n){p=new Date,(ie=n.result.text)&&(e("#ymMsgInput").val(ie),e(".listeningAudioText").text(ie))},U.recognized=function(t,n){if(window.isClosedListening)window.isClosedListening=!1;else if(n.result.reason!==SpeechSDK.ResultReason.NoMatch)window.finalTranscript+=n.result.text,window.finalTranscript&&(e("#ymMsgInput").val(window.finalTranscript),e(".listeningAudioText").text(window.finalTranscript)),setTimeout((function(){window.finalTranscript&&window.chat.send({message:window.finalTranscript,medium:"voice"}),e("#ymMsgInput").val(""),window.finalTranscript="",ie="",p=new Date,e(".listeningAudio").hasClass("hide")||le()}),1e3);else{SpeechSDK.NoMatchDetails.fromResult(n.result);p=new Date}},U.canceled=function(e,t){t&&4===t.errorCode&&re()},U.sessionStarted=function(t,n){p=new Date,setInterval((function(){new Date-p>window.waitingTIme&&window.recognizing&&(le(),window.parent&&window.parent.postMessage(JSON.stringify({event_code:"mic-auto-stop"}),"*"))}),1e3),e(".listeningAudioText").text("I am listening....."),(0,s.default)(!1)},U.sessionStopped=function(e,t){},U.speechStartDetected=function(e,t){(0,s.default)(!1)},U.speechEndDetected=function(e,t){(0,s.default)(!0)}}if(oe){if(window.recognizing)return window.recognizing=!1,U.stopContinuousRecognitionAsync((function(){U.close(),U=void 0}),(function(e){U.close(),U=void 0})),void e(".mic-button").removeClass("enabled");window.recognizing=!0,ae&&F(),U.startContinuousRecognitionAsync()}else{if(window.recognizing)return window.recognizing=!1,U.stop(),void e(".mic-button").removeClass("enabled");window.recognizing=!0,ae&&F(),U.start()}}function le(){if(U)try{if(U){window.recognizing=!1;var t=function(){U.close(),U=void 0,Me()};U.stopContinuousRecognitionAsync(t,t),e(".mic-button").removeClass("enabled")}}catch(e){console.log(e,"error in stopMicrosoftSpeechRecording")}}function de(){if(oe)return ce();if("IE"===te())return a.default.record(10);if(window.silenceCheckTime=new Date,!H&&"Safari"!==te()&&"IE"!==te()&&!window.ymConfig.banner){if("Chrome"===te()&&"webkitSpeechRecognition"in window)return p=new Date,window.startRecording&&(U&&(U=void 0),e(".mic-button").addClass("enabled"),window.startRecording=!1),U||((U=new webkitSpeechRecognition).continuous=!0,U.interimResults=!0,U.onstart=function(){p=new Date,setInterval((function(){new Date-p>window.waitingTIme&&window.recognizing&&(ue(),Me(),e(".mic-button").removeClass("enabled"),window.parent&&window.parent.postMessage(JSON.stringify({event_code:"mic-auto-stop"}),"*"))}),1e3),e(".listeningAudioText").text("I am listening....."),(0,s.default)(!0)},U.onerror=function(e){},U.onend=function(){},U.onspeechstart=function(){(0,s.default)(!1)},U.onspeechend=function(){(0,s.default)(!0)},U.onresult=function(t){var n="";if(void 0!==t.results)if(window.mobileCheck())for(var i=t.resultIndex;i<t.results.length;++i)if(t.results[i].isFinal&&t.results[i][0].confidence>.5&&t.results[i][0].transcript!==window.finalTranscript){if(window.isClosedListening)return void(window.isClosedListening=!1);window.finalTranscript=t.results[i][0].transcript,e("#ymMsgInput").val(window.finalTranscript),e("#ymMsgInput").val(window.finalTranscript),e(".listeningAudioText").text(window.finalTranscript),setTimeout((function(){window.chat.send({message:window.finalTranscript,medium:"voice"}),e("#ymMsgInput").val(""),p=new Date,e(".listeningAudio").hasClass("hide")||ue(),Me()}),1e3)}else t.results[i]&&t.results[i][0].transcript&&(p=new Date);else for(i=t.resultIndex;i<t.results.length;++i)if(t.results[i].isFinal){if(p=new Date,window.isClosedListening)return void(window.isClosedListening=!1);window.finalTranscript+=t.results[i][0].transcript,e("#ymMsgInput").val(window.finalTranscript),e(".listeningAudioText").text(window.finalTranscript),window.chat.send({message:window.finalTranscript,medium:"voice"}),window.finalTranscript="",e("#ymMsgInput").val(""),self.chat.skin&&!self.chat.skin.speak?(window.startRecording=!1,ue()):e(".listeningAudio").hasClass("hide")||ue(),Me()}else n+=t.results[i][0].transcript,e("#ymMsgInput").val(n),e(".listeningAudioText").text(n),t.results[i]&&t.results[i][0].transcript&&(p=new Date)}),window.recognizing?(window.recognizing=!1,U.stop(),void e(".mic-button").removeClass("enabled")):(U.lang=D[window.chat.language]?D[window.chat.language]:"en-IN",window.recognizing=!0,void U.start());window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,W=new window.AudioContext,navigator.getUserMedia({audio:!0},(function(t){J=t;var i=W.createMediaStreamSource(J);if(document.origin===window.ymConfig.host)H=new WebAudioRecorder(i,{workerDir:window.ymConfig.host+"/api/plugin/static/WebAudioRecorderWav.min.js",numChannels:2,encoding:"wav",options:{encodeAfterRecord:!0}});else if(window.generatedURL)H=new WebAudioRecorder(i,{workerDir:window.generatedURL,numChannels:2,encoding:"wav",options:{encodeAfterRecord:!0}});else{var o=n(37).minifiedCode,a=new Blob([o],{type:"application/javascript"});window.generatedURL=window.URL.createObjectURL(a),H=new WebAudioRecorder(i,{workerDir:window.generatedURL,numChannels:2,encoding:"wav",options:{encodeAfterRecord:!0}})}var s=W.createGain();s.connect(W.destination);var r=W.createScriptProcessor(2048,1,1);r.connect(s);var c=W.createAnalyser();c.smoothingTimeConstant=0,c.fftSize=2048,i.connect(c),c.connect(r);var l=c.frequencyBinCount,d=new Uint8Array(l),u=new Uint8Array(l);r.onaudioprocess=function(){c.getByteFrequencyData(d),c.getByteTimeDomainData(u),i.playbackState===i.PLAYING_STATE&&function(t,n,i){for(var o=t.length,a=0,s=0;a<n&&a<o;a+=1)s<t[a]&&(s=t[a]);s>100&&C&&(window.silenceCheckTime=new Date);new Date-window.silenceCheckTime.getTime()>3e3&&(e(".mic-button").removeClass("enabled"),ue())}(d,5)},H.onError=function(e,t){console.log(t)},H.onComplete=function(t,n){!function(){try{H.cancelRecording()}catch(e){}try{J.getAudioTracks()[0].stop()}catch(e){}try{W.close()}catch(e){}H=null,J=null}();var i,o,a=(o="tmp_name.wav",(i=n).lastModifiedDate=new Date,i.name=o,i),s=new FormData,r={EN:"en",FR:"fr",VN:"vi",CN:"zh",MS:"ms",TH:"th",ID:"id",HI:"hi",TA:"ti",TE:"te",BN:"bn",KN:"kn"};window.chat.dontConvertToText?(window.chat.showTyping(),s.append("file",a,"tmp_name.wav"),window.chat.dontConvertToText=!1,e.ajax({type:"POST",enctype:"multipart/form-data",url:window.ymConfig.host+"/api/chat/upload-file?json=true",data:s,processData:!1,contentType:!1,cache:!1,timeout:1e4,success:function(t){t.identifier=window.chat.identifier,be(),delete window.chat.identifier,window.chat.authenticate?(window.chat.authenticate=!1,e.ajax({type:"POST",url:window.ymConfig.host+"/api/ml/authenticate?bot="+Y,contentType:"application/json",data:JSON.stringify(t),processData:!1,dataType:"json",timeout:1e6,success:function(e){window.chat.hideTyping(),e.code="voice-authentication",window.chat.send({event:e},!0)},error:function(e){console.log("ERROR : ",e)}})):e.ajax({type:"POST",url:window.ymConfig.host+"/api/ml/createprofile?bot="+Y,contentType:"application/json",data:JSON.stringify(t),processData:!1,dataType:"json",timeout:1e6,success:function(e){window.chat.hideTyping(),console.log("profile created",e),e.code="voice-enrollment-created",window.chat.send({event:e},!0)},error:function(e){console.log("ERROR : ",e)}})},error:function(e){console.log("ERROR : ",e)}})):(s.append("audio_file",a,"tmp_name.wav"),s.append("encoding","LINEAR16"),r[window.chat.language]?(s.append("language",r[window.chat.language]),window.chat.skin&&window.chat.skin.useGoogle?s.append("useGoogle",window.chat.skin.useGoogle):window.chat.skin.useBingExperimental&&s.append("useBingExp",window.chat.skin.useBingExperimental),e.ajax({url:window.ymConfig.host+"/api/voice/sre",data:s,cache:!1,contentType:!1,processData:!1,crossDomain:!0,type:"POST",success:function(t){e(".mic-button").removeClass("enabled");try{t=JSON.parse(t)}catch(e){}t.success&&window.chat.send({message:t.data,medium:"voice"})}})):(s.append("audio_file",a,"tmp_name.wav"),s.append("language",window.chat.language),e.ajax({url:"https://dev.liv.ai/liv_transcription_api/recordings/",data:s,cache:!1,contentType:!1,processData:!1,type:"POST",headers:{Accept:"*/*",Authorization:"Token ee07ff43f70904afb4ee70aed3ae7b62e15a208d"},success:function(e){e&&e.transcriptions&&e.transcriptions.length>0&&window.chat.send({message:e.transcriptions[0].utf_text,medium:"voice"})}})))},H.startRecording()}),(function(e){console.log(e)}))}}function ue(){if(oe)return le();if("IE"===te())return a.default.stop();if(H||U)try{U?(console.log("stopping"),window.recognizing=!1,U.stop(),e(".mic-button").removeClass("enabled"),clearInterval(p)):H.finishRecording()}catch(e){console.log(e)}}function pe(t){try{e.parseXML(t);return!0}catch(e){return!1}}window.msTokenCreated=Date.now();try{if("Safari"!==te()&&"IE"!==te()&&!window.ymConfig.banner){window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;window.AudioContext}}catch(e){}function ge(e){if(isNaN(e))try{return JSON.parse(e)}catch(e){return!1}return!1}var fe=self.skin&&self.skin.speakFirst?295:195;window.ymConfig.lite&&(fe=window.mobileAndTabletCheck()?fe:fe+200);window.ymConfig.banner&&e("#chatDetails").length>0&&e("#chatDetails").hasClass("hide");var me=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=0,i=0;document.querySelector("#queue-position-display")&&(i=document.querySelector("#queue-position-display").clientHeight,e("#chatBoxMainContainer").attr("style","height:calc(".concat(window.innerHeight,"px - ").concat(fe,"px - ").concat(i,"px);"))),document.querySelector(".remoteaudiocontainer")&&(n=document.querySelector(".remoteaudiocontainer").clientHeight),e("#chatBoxMainContainer").attr("style","height:calc(".concat(t*window.innerHeight,"px - ").concat(fe,"px - ").concat(n,"px - ").concat(i,"px);"))};q(),screen.width<=768&&e("#chatDetails").length>0&&!e("#chatDetails").hasClass("hide")&&20;var he=function(){e(".chat").each((function(t,n){e(n).height()}));var t=e("#chatBoxMainContainer");t.animate({scrollTop:t[0].scrollHeight},500)};e(window).resize((function(){0==e("#chatBoxMainContainer").height()&&window.chat.shouldLoadLocalMessage()?(me(),ye()):me()}));var we=function(){e("#chatBoxMainContainer").animate({scrollTop:e("#chatBoxMainContainer")[0].scrollHeight-e("#chatBoxMainContainer")[0].clientHeight},1e3)},ve=function(){e("#chatBoxMainContainer").animate({scrollTop:0},0)},ye=function(){var t=e(".message-came:last");0!=t.length&&e("#chatBoxMainContainer").scrollTo(t,0,{axis:"y"})},be=function(){var t=e(".chat-message.from-me:last").next().next();0!==t.length?e("#chatBoxMainContainer").scrollTo(t,0,{axis:"y"}):he()};function ke(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(window.ymConfig.logging&&console.log("closeCallPromotionDisplay",t),n){var i={request:"hangup"};self.videocall&&(self.videocall.send({message:i}),self.videocall.hangup())}fe=195,e(".promotion-audio-call").slideUp("fast",(function(){e(".promotion-audio-call").remove(),me()}))}function Ce(t){if(!_||t){var n=e("#chatOptions");n.addClass("hide"),n.html("")}}function xe(){e(".send-input-form").hasClass("hide")&&(fe+=window.botOpenClicked?e(".send-input-form").height():55,me(),e(".send-input").removeClass("hidden-input-border"),e(".send-input-form").removeClass("hide"))}function Te(){e("#typing").attr("style","display:inline-block;"),self.ymConfig&&self.ymConfig.skin&&self.ymConfig.skin.disableBotPersona&&e("#typing").css({"margin-left":"0px"})}function Se(){e("#typing").attr("style","display:none;")}function _e(){e("#ymChatForm").hide(),e(".mic-button").hide(),e(".listeningAudio").removeClass("hide"),e(".listeningAudioText").removeClass("hide"),(0,s.default)(!0),e(".listeningAudioText").text("Intialising....."),e(".send-button").hasClass("hide")||e(".send-button").addClass("hide"),p=new Date}function Me(){e("#ymChatForm").show(),e(".mic-button").show(),e(".listeningAudio").addClass("hide"),e(".listeningAudioText").addClass("hide"),e(".listeningAudioText").text(""),e("#ymMsgInput").val()&&e(".send-button").removeClass("hide"),e(".mic-button").removeClass("enabled")}window.chat=new function(){var t=this;if(this.showTyping=Te,this.hideTyping=Se,this.selectedOptions=[],this.language="EN",this.connection=!1,this.pingInterval=null,this.reconnectTimeout=0,this.rid=null,this.sid=null,this.jid=!1,this.WEBSOCKET_SERVICE=window.ymConfig.host.replace("http","ws")+"/websocket/",this.BOSH_SERVICE=window.ymConfig.host+"/websocket/",this.connection_type="ws",this.connection_wait=0,this.connecting=!1,this.connected=!1,this.ticketRunning=!1,this.shouldAuthenticate=!1,this.verifiedUser=!1,this.oldConversationOffset=0,this.hasMoreOlderMessage=!1,this.speakMuted=!1,this.messageQueueUntilConnection=[],this.lazyLoad=!1,this.isSensitiveInfo=!1,this.isWelcomeMessageQueuedForVoice=!1,this.executeModifiedCode=!1,this.oldMessageLoaded=!1,this.lastParsedMessage={},this.zendesk={},this.mapping={},this.storagekey="_DARTH_VADERS__"+Y+(K?"_"+K:"")+(window.ymConfig.trigger?window.ymConfig.trigger:"")+(window.ymConfig.userId?"_"+window.ymConfig.userId:"")+(window.uat?"_uat":""),this.storagekeyConnectionType="CONNECTION_TYPE_KEY_"+Y+(K?"_"+K:"")+(window.ymConfig.trigger?window.ymConfig.trigger:"")+(window.ymConfig.userId?"_"+window.ymConfig.userId:"")+(window.uat?"_uat":""),window.ymConfig.uid&&i.default.setItem("anon_jid_"+t.storagekey,window.ymConfig.uid+"@"+window.ymConfig.xmpp_domain),window.ymConfig.surveyId&&(window.ymConfig.surveyId=window.ymConfig.surveyId.toLowerCase(),window.ymConfig.triggerJourney=window.ymConfig.surveyId.split("_")[1],this.storagekey+="surveyId"+window.ymConfig.surveyId,window.ymConfig.payload&&(this.storagekey+="_"+window.ymConfig.payload.toLowerCase()),this.storagekeyConnectionType+="surveyId"+window.ymConfig.surveyId),this.http_bind_bots=["bot_1517666878497","bot_1497677841942","bot_1501559554227","bot_1515144864953","bot_1528364428736"],-1!==this.http_bind_bots.indexOf(Y)&&(window.WebSocket=null),window.ymConfig.zendeskId)try{t.zendesk=JSON.parse(i.default.getItem("".concat(window.ymConfig.bot,"_zendesk_details")))||{}}catch(e){}this.loadZChat=function(){if(window.parent.zChat){window.zChat=window.parent.zChat,window.zChat.init({account_key:window.ymConfig.zendeskId});var n=Date.now();window.zChat.on("agent_update",(function(n){if(console.log("agent_update",n),t.timer&&window.clearInterval(t.timer),window.chat.zendeskConnectedInThisPage&&!window.chat.zendesk.agentJoinedAck)window.chat.send({event:{code:"zendesk_agent_joined",data:n}},!0),window.chat.zendesk.agentJoinedAck=!1,window.chat.zendesk.agentConnected=!0,window.chat.zendesk.userRated=!1,window.chat.zendesk.userCommented=!1,window.chat.zendesk.userCommentClick=!1,window.chat.zendesk.queue_position=0,i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk)),window.chat.zendeskCheckAgentConnected();else{window.chat.zendeskConnectedInThisPage=!0,window.chat.skin&&window.chat.skin.refreshContext&&window.chat.loadMessages(!1),window.chat.zendesk.userCommented=Boolean(window.zChat.getChatInfo().comment),window.chat.zendesk.userRated=Boolean(window.zChat.getChatInfo().rating);try{window.chat.send({event:{code:"zendesk_user_refreshed_while_agent_connected",data:window.chat.zendesk}},!0)}catch(e){console.log("Error in sending zendesk_user_refreshed_while_agent_connected",e)}}setTimeout((function(){window.chat.changeBotToAgent({name:n.display_name,profile_picture:n.avatar_path})}),2e3),e(".fa-sign-out").show(),e(".fa-home").addClass("disabled-icon")})),window.zChat.on("account_status",(function(e){console.log("account_status",e)})),window.zChat.on("visitor_update",(function(e){console.log("visitor_update",e)})),window.zChat.on("connection_update",(function(e){"connected"===e&&(window.chat.zendesk.accountConnected=!0,console.log("zendesk connected"),window.chat.zendesk.agentConnected&&!window.chat.zendeskConnectedInThisPage&&(window.zChat.isChatting()?window.chat.zendeskCheckAgentConnected():(window.chat.zendesk={},i.default.deleteItem("".concat(window.ymConfig.bot,"_zendesk_details")),window.chat.send({event:{code:"zendesk_agent_left_due_to_unknown_reason"}},!0)))),console.log("ZChat Connection",e)})),window.zChat.on("chat",(function(t){if(window.chat.zendeskConnectedInThisPage){if("chat.file"===t.type){var o=t.attachment.url;0===t.attachment.mime_type.indexOf("image")?(window.chat.storeMessage(JSON.stringify({image:o}),!1,!1),window.chat.receiveMessage(JSON.stringify({image:o}))):(window.chat.storeMessage(JSON.stringify({file:o,name:t.attachment.name}),!1,!1),window.chat.receiveMessage(JSON.stringify({file:o,name:t.attachment.name})))}"chat.msg"===t.type&&"visitor"!==t.nick&&-1===t.msg.indexOf("zendesk_user_transcript")&&t.timestamp>n&&(window.chat.storeMessage(JSON.stringify({message:t.msg}),!1,!1),window.chat.receiveMessage(JSON.stringify({message:t.msg}))),"chat.memberleave"===t.type&&"visitor"===t.nick&&(window.chat.send({event:{code:"zendesk_ticket_closed",data:t}},!0),window.chat.zendesk={},i.default.deleteItem("".concat(window.ymConfig.bot,"_zendesk_details")),window.chat.changeAgentToBot(),window.chat.closePromotion(),e(".fa-home").removeClass("disabled-icon"),e(".fa-sign-out").hide()),"chat.queue_position"===t.type&&(window.chat.zendesk.queue_position=t.queue_position),"chat.request.rating"===t.type&&(window.chat.zendesk.agentRequestedRating=!0,window.chat.send({event:{code:"zendesk_agent_request_rating"}},!0)),i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk))}else console.log("chat",t)}))}else window.setTimeout(loadZChat,100)},this.audioPlayList=[],this.lastPlayedAudioIndex=-1,this.audioPlaying=!1,this.playAudio=function(){var n=this;if(!this.audioPlaying&&this.lastPlayedAudioIndex+1<this.audioPlayList.length&&window.botInOpenState){ue(),this.audioPlaying=!0,this.lastPlayedAudioIndex++;var i=this.audioPlayList[this.lastPlayedAudioIndex],o=e("#audio"),a=function(){o.html(""),n.audioPlaying=!1,n.playAudio()};a.bind(this),o.html(""),e("<audio></audio>").attr({src:i,autoplay:!0}).on("ended",a).on("canplay",(function(e){e.target.muted=window.chat.speakMuted})).appendTo(o)}else!this.audioPlaying&&t.skin&&!e("#ymMsgInput").val()&&window.botInOpenState&&t.isWelcomeMessageQueuedForVoice&&(t.skin.speakFirst||t.skin.hideMic?t.skin.speakFirst&&window.clickedSpeakFirstMicIcon&&(window.startRecording=!0,"microsoftVoice"===window.voiceType?ce():de(),_e(),p=new Date):(e(".speak-logo").show(),window.startRecording=!0,"microsoftVoice"===window.voiceType?ce():de()))},this.enqueueAndPlayAudio=function(e){if(t.skin&&t.skin.speak&&window.chat.speak&&e){var n=t.skin.speakGender||"female",i=t.targetLanguage?t.targetLanguage.toLowerCase():window.ymConfig.targetLanguage?window.ymConfig.targetLanguage:"en",o=t.skin.isGoogleTTS||"",a=t.skin.googleVoiceName||"",s=t.skin.microsoftVoiceName||"",r=o?"google":"microsoft",c=t.skin.speakingRate||"1.0",l=t.skin.microsoftVoiceStyle||"",d=t.skin.microsoftVoicePitch||"",u=encodeURIComponent(e.replace(/<[^>]*>?/gm,"")),p="".concat(window.ymConfig.host,"/api/voice/speak?mp3=true&text=").concat(u,"&language=").concat(i,"&gender=").concat(n,"&service_type=").concat(r,"&googleVoiceName=").concat(a,"&microsoftVoiceName=").concat(s,"&speakingRate=").concat(c,"&voiceStyle=").concat(l,"&pitch=").concat(d);this.audioPlayList.push(p),this.playAudio()}},this.clearAudio=function(){e("#audio").html(""),this.audioPlayList=[],this.lastPlayedAudioIndex=-1,this.audioPlaying=!1},this.init=function(){console.log("Init function invoked"),window.clearChat&&t.clearChat(),t.log("Init "+((new Date).getTime()-x.getTime())),i.default.getItem("connection_type_"+t.storagekeyConnectionType)&&"undefined"!==i.default.getItem("connection_type_"+t.storagekeyConnectionType)&&(t.connection_type=i.default.getItem("connection_type_"+t.storagekeyConnectionType)),i.default.setItem("connection_type_"+t.storagekeyConnectionType,t.connection_type),t.Strophe.SASLAnonymous.priority=50,t.connection=new t.Strophe.Connection("ws"===t.connection_type?t.WEBSOCKET_SERVICE:t.BOSH_SERVICE),t.connection.xmlInput=t.log,t.connection.xmlOutput=t.logInput,t.out("Checking connection "+((new Date).getTime()-x.getTime())),setTimeout(t.checkConnection,0)},this.checkConnection=function(){t.connection_wait+=500,t.out("Connecting : "+t.connecting),!t.connection||t.connection.connected||t.connecting||t.connection_wait<1e4&&(2e3===t.connection_wait?(t.connection_type="ws",i.default.setItem("connection_type_"+t.storagekeyConnectionType,t.connection_type),t.init()):(t.startService(),setTimeout(t.checkConnection,500)))};var a=function(e,n,o){try{var a=i.default.getItem("anon_jid_"+t.storagekey)&&i.default.getItem("anon_jid_"+t.storagekey).split("@")[0];a&&window.parent&&window.parent.gtag&&t.skin&&t.skin.enableGAscript&&window.parent.gtag("event",e,{event_category:X+":"+a,event_label:n,event_value:o,non_interaction:!0})}catch(e){console.log("Error in analytics event")}};this.startService=function(){t.connecting=!0,t.out("Service started "+((new Date).getTime()-x.getTime()));try{var e=i.default.getItem("anon_jid_"+t.storagekey);if(t.skin&&t.skin.tabSession&&(e=null),t.userLoggedInAsBid)window.chat.login(t.userLoggedInAsBid,null);else if(e){o.default.setJid(e),window.chat.jid=e,window.chat.returningUser=!0;var n=i.default.getItem("sid_"+t.storagekey),a=i.default.getItem("rid_"+t.storagekey),s=i.default.getItem("time_"+t.storagekey),r=new Date,c=null!==s?(r-new Date(s))/1e3:11;"ws"!==t.connection_type&&null!==n&&null!==a&&null!==e&&c<10?(a=parseInt(a),window.chat.login(e,"")):window.chat.login(e,"")}else{var l=null;"electron"===Z&&(l="electron-"+(new Date).getTime().toString()+"@"+window.ymConfig.xmpp_domain),window.chat.login(l,null)}t.out("Login called "+((new Date).getTime()-x.getTime()))}catch(e){t.out(e),t.connecting=!1}},this.logging=window.ymConfig.logging,this.out=function(n){if(t.logging)try{pe(n)&&e(n).find("body").text()?console.log(e(n).find("body").text()):pe(n)||console.log(n)}catch(e){}},this.showQueuePosition=function(n){if(t.queuePosition){var i=n||"You are ".concat(t.queuePosition," ticket(s) away from the end of the queue."),o=e("#queue-position-display");o.length&&o.remove(),e('<div id="queue-position-display">'+i+"</div>").insertAfter("#chatBoxMainContainer");var a=document.querySelector("#queue-position-display").clientHeight,s=a>0?a:20;t.queueDisplayHeight=s,me()}},this.logInput=function(n){if(t.logging)try{pe(n)&&e(n).find("body").text()?console.log(e(n).find("body").text()):pe(n)||console.log(n)}catch(e){}e(n).attr("rid")&&e(n).attr("sid")&&(t.rid=e(n).attr("rid"),t.sid=e(n).attr("sid"),i.default.setItem("rid_"+t.storagekey,t.rid),i.default.setItem("sid_"+t.storagekey,t.sid),i.default.setItem("time_"+t.storagekey,new Date))},this.log=function(n){try{var o=e(n).find("jid");o.length>0&&!t.userLoggedInAsBid&&(t.jid=o.text().split("/")[0],i.default.setItem("anon_jid_"+t.storagekey,t.jid,{expires:365}),-1!==t.jid.indexOf("_")&&i.default.setItem("anon_jid_"+t.storagekey.substring(0,t.storagekey.indexOf("survey")),t.jid.substring(0,t.jid.indexOf("_"))+"@"+window.ymConfig.xmpp_domain,{expires:365}))}catch(e){}},this.login=function(n,a){var s=(new Date).getTime().toString();if(n||window.ymConfig.surveyId){var r=window.ymConfig.surveyId&&window.ymConfig.payload&&window.ymConfig.payload.toLowerCase();n=(n=n||r||i.default.getItem("anon_jid_"+t.storagekey.substring(0,t.storagekey.indexOf("survey")))||s).split("@")[0]+(window.ymConfig.surveyId&&-1===n.indexOf("_")?"_"+window.ymConfig.surveyId:"")+"@"+window.ymConfig.xmpp_domain,o.default.setJid(n),t.jid=n,t.username=n,t.password=a,t.connection.connect(t.username+"/webWidget_"+window.ymConfig.bot+"_"+s,null,t.events.onConnect),t.userLoggedInAsBid||i.default.setItem("anon_jid_"+t.storagekey,t.jid)}else t.username=null,t.password=null,t.connection.connect(window.ymConfig.xmpp_domain+"/webWidget_"+window.ymConfig.bot+"_"+s,null,t.events.onConnect);e(".loader").removeClass("hide")},this.logout=function(){t.connection.reset()},this.attach=function(e,n,o){t.jid&&"ws"===t.connection_type?t.login(t.jid,""):"ws"!==t.connection_type?(n||(n=i.default.getItem("sid_"+t.storagekey)),o||(o=i.default.getItem("rid_"+t.storagekey)),t.connection.attach(t.jid,n,o,t.events.onAttach)):t.login("","")},this.reconnect=function(e){!t.jid||window.chat.connection&&window.chat.connection.connected||window.chat.connecting?e():(t.login(t.jid,""),t.callback=e)},this.removeOfflineConnectionDiv=function(){fe-=e(".connection").outerHeight(),me(),e(".connection").remove()},this.setConnectionStatus=function(n){var i;if("online"===n&&t.connected){if(i="Back online!",0===e(".connection").length)return;t.removeOfflineConnectionDiv(),setTimeout((function(){t.removeOfflineConnectionDiv()}),3e3),e("#chatDetails .status-dot").removeClass("offline-dot"),e("#chatDetails .status-dot").addClass("online-dot")}"offline"===n&&(i="".concat(t.mapping.botTitle||t.mapping.botName," is trying to connect to internet."),e("#chatDetails .status-dot").removeClass("online-dot"),e("#chatDetails .status-dot").addClass("offline-dot"));var o=e("<div class='connection ".concat(n,"'>").concat(i,"</div>"));0===e(".connection").length&&(o.insertAfter("#chatDetails"),fe+=e(".connection").outerHeight(),me())},this.loadOtherResources=function(){window.ymConfig.isBannerBot&&n.e(3).then(n.t.bind(null,40,7)),t.skin&&t.skin.animationType&&"none"!==t.skin.animationType&&n.e(0).then(n.t.bind(null,11,7)),n.e(6).then(n.t.bind(null,41,7)),t.skin&&t.skin.enableAutoComplete&&n.e(1).then(n.t.bind(null,42,7)).then((function(){t.setSkin(!0),n.e(26).then(n.t.bind(null,43,7)).then((function(n){e(".auto-complete").autoComplete({minChars:window.atTheRateAutoComplete?1:2,source:function(o,a){if(i.default.getItem("anon_jid_"+t.storagekey)&&window.stepAutoComplete)n.default((function(){e.getJSON("".concat(window.ymConfig.host,"/api/plugin/auto-complete/?bot=").concat(X,"&botType=").concat(t.mapping.botType,"&uid=").concat(i.default.getItem("anon_jid_"+t.storagekey).split("@")[0],"&term=").concat(o,"&functionName=").concat(window.stepAutoComplete),(function(e){a(e.data.autoComplete)}))}),500,{leading:!1,trailing:!0})();else if(i.default.getItem("anon_jid_"+t.storagekey)&&window.defaultAutoComplete)n.default((function(){e.getJSON("".concat(window.ymConfig.host,"/api/plugin/auto-complete/?bot=").concat(X,"&botType=").concat(t.mapping.botType,"&uid=").concat(i.default.getItem("anon_jid_"+t.storagekey).split("@")[0],"&term=").concat(o,"&functionName=").concat(window.defaultAutoComplete),(function(e){a(e.data.autoComplete)}))}),500,{leading:!1,trailing:!0})();else if(i.default.getItem("anon_jid_"+t.storagekey)&&window.atTheRateAutoComplete){var s=e("#ymMsgInput").val();window.callatTheRateAutoComplete?n.default((function(){var n=o.split("@");if((!window.maxLengthSplitByAtTheRate||n.length>window.maxLengthSplitByAtTheRate)&&(window.maxLengthSplitByAtTheRate=n.length),n.length>=window.maxLengthSplitByAtTheRate&&n.length>1||0===o.indexOf("@")&&1===n.length&&n.length>=window.maxLengthSplitByAtTheRate){var s=n[n.length-1];e.getJSON("".concat(window.ymConfig.host,"/api/plugin/auto-complete/?bot=").concat(X,"&botType=").concat(t.mapping.botType,"&uid=").concat(i.default.getItem("anon_jid_"+t.storagekey).split("@")[0],"&term=").concat(s,"&functionName=").concat(window.atTheRateAutoComplete),(function(e){a(e.data.autoComplete)}))}else window.callatTheRateAutoComplete=!1,window.maxLengthSplitByAtTheRate=0,e(".autocomplete-suggestions").attr("style","display:none;")}),500,{leading:!1,trailing:!0})():("@"===s||s.endsWith(" @")&&!t.deleting)&&(t.currentInput=s,window.callatTheRateAutoComplete=!0)}},cache:!1,renderItem:function(e,n){return t.skin&&t.skin.autoCompleteCard?'<div class="autocomplete-suggestion autocomplete-suggestion-card"  data-title="'+e[0].title+'" data-text-val="'+e[0].text+'"><div class = "autocomplete-suggestion-card-column1"><span style="font-weight: 500;">'+e[0].title+'</span><br><span style="font-size: 0.8rem; color: #969696;">'+(e[0].moreInfo||"")+'</span></div><div class="autocomplete-suggestion-card-column2">'+e[0].text+"</div></div>":'<div class="autocomplete-suggestion" data-title="'+e[0]+'" data-text-val="'+e[1]+'">'+(e[2]||e[0])+"</div>"},onSelect:function(n,i,o){if(13!==n.keyCode||!e("#ymMsgInput").val()||window.callatTheRateAutoComplete){if(window.callatTheRateAutoComplete){"mousedown"===n.type&&(window.callatTheRateAutoComplete=!1);var a=t.currentInput+String(o.data("text-val"))+" ";t.currentInput=a,e("#ymMsgInput").val(a)}else window.chat.send(String(o.data("text-val")),!1,o.data("title")),e(".auto-complete").val(""),e(".send-button").addClass("hide");e(".autocomplete-suggestion").remove()}}})}))})),oe||-1!==["Chrome","Edge","Trident"].indexOf(te())||!t.skin||t.skin.hideMic||n.e(23).then(n.t.bind(null,44,7));var a=document.createElement("style");a.appendChild(document.createTextNode("                    @font-face {                        font-family:  botplatform-font;                        src: url('"+g+"/files/fonts/proximanova-regular.a7942249.woff') format('woff');                    }                    @font-face {                        font-family:  botplatform-font;                        src: url('"+g+"/files/fonts/proximanova-semibold.46e3f047.woff') format('woff');                        font-weight: 700;                    }                    @font-face {                        font-family:  botplatform-font;                        src: url('"+g+"/files/fonts/proximanova-regular-italic.053a1112.woff') format('woff');                        font-style: italic;                    }                    @font-face {                        font-family:  botplatform-font;                        src: url('"+g+"/files/fonts/proximanova-semibold-italic.660bf63e.woff') format('woff');                        font-weight: 700;                        font-style: italic;                    }                    @font-face {                        font-family: 'FontAwesome';                        src: url('"+g+"/files/fonts/fontawesome-webfont.eot?v=4.7.0');                        src: url('"+g+"/files/fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), url('"+g+"/files/fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), url('"+g+"/files/fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), url('"+g+"/files/fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), url('"+g+"/files/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');                        font-weight: normal;                        font-style: normal;                    }               ")),document.body.appendChild(a),o.default.loadAssets()},this.events={onAttach:function(n,i){n===t.Strophe.Status.CONNECTING?(t.connecting=!0,t.out("Connecting (attaching) to yellow messenger ..."),t.connected=!1):n===t.Strophe.Status.CONNFAIL?t.connecting=!1:n===t.Strophe.Status.DISCONNECTING?(t.out("Disconnecting ..."),t.connecting=!1):n===t.Strophe.Status.AUTHFAIL?setTimeout((function(){t.attach()}),2e3):n===t.Strophe.Status.DISCONNECTED?(t.connecting=!1,t.connected=!1,t.out("Disconnected on attach"),e("#available-status").addClass("logged_out").removeClass("logged_in"),clearInterval(t.pingInterval),t.reconnectTimeout=0===t.reconnectTimeout?50:2*t.reconnectTimeout,setTimeout((function(){t.attach()}),t.reconnectTimeout)):n===t.Strophe.Status.CONNECTED?(t.connecting=!1,t.reconnectTimeout=0,t.callback&&(t.callback(),delete t.callback),t.out("Connected."),t.connected=!0,t.executeModifiedCode?t.fastFetchMapping():t.fetchMapping(),t.fetchMapping(),e("#available-status").removeClass("logged_out").addClass("logged_in"),t.connection.addHandler((function(e){return t.events.onMessage(e)}),null,"message","chat"),t.connection.addHandler(t.events.onSubscriptionRequest,null,"presence","subscribe"),t.connection.addHandler((function(e){return t.events.on_ping(e)}),"urn:xmpp:ping","iq"),t.connection.send(t.$pres().tree()),clearInterval(t.pingInterval),t.pingInterval=setInterval((function(){t.connection.send(t.$pres().tree())}),6e4)):n===t.Strophe.Status.ATTACHED&&(t.reconnectTimeout=0,t.connecting=!1,t.callback&&(t.callback(),delete t.callback),t.out("Connected."),t.connected=!0,t.executeModifiedCode?t.fastFetchMapping():t.fetchMapping(),e("#available-status").removeClass("logged_out").addClass("logged_in"),t.connection.addHandler((function(e){return t.events.onMessage(e)}),null,"message","chat"),t.connection.addHandler((function(e){return t.events.on_ping(e)}),"urn:xmpp:ping","iq"),t.connection.send(t.$pres().tree()),t.connection.addHandler(t.events.onSubscriptionRequest,null,"presence","subscribe"),clearInterval(t.pingInterval),t.pingInterval=setInterval((function(){t.connection.send(t.$pres().tree())}),6e4))},onSubscriptionRequest:function(n){if("subscribe"===n.getAttribute("type")){var i=e(n).attr("from");t.connection.send(t.$pres({to:i,type:"subscribed"}))}return!0},onConnect:function(n,i){if(n===t.Strophe.Status.CONNECTING)t.connecting=!0,t.out("Connecting to yellow messenger ..."),t.connected=!1;else if(n===t.Strophe.Status.CONNFAIL)t.connecting=!1;else if(n===t.Strophe.Status.DISCONNECTING)t.connecting=!1,t.out("Disconnecting ...");else if(n===t.Strophe.Status.AUTHFAIL)setTimeout((function(){t.attach()}),2e3);else if(n===t.Strophe.Status.DISCONNECTED)t.connecting=!1,t.out("Disconnected on connect"),e("#available-status").addClass("logged_out").removeClass("logged_in"),clearInterval(t.pingInterval),t.connected=!1,t.reconnectTimeout=0===t.reconnectTimeout?100:2*t.reconnectTimeout>=6e4?t.reconnectTimeout:2*t.reconnectTimeout,setTimeout((function(){!t.connected&&t.reconnectTimeout>1e3&&t.setConnectionStatus("offline"),t.attach()}),t.reconnectTimeout);else if(n===t.Strophe.Status.CONNECTED)try{t.connecting=!1,t.reconnectTimeout=0,t.callback&&(t.callback(),delete t.callback),t.out("Connected."),t.connected=!0,t.connectedOnce=!0,e(".connection.offline").length&&t.setConnectionStatus("online"),window.ymConfig.ymAuthenticationToken&&t.shouldAuthenticate&&(t.verifiedUser=!0,t.shouldAuthenticate=!1),t.executeModifiedCode?t.fastFetchMapping():t.fetchMapping(),S||(S=!0,window.chat.mapping.skin&&!window.chat.mapping.skin.refreshContext&&window.chat.send({event:{code:"bot-loaded-on-page-reload"}},!0),window.chat.mapping.skin&&window.chat.mapping.skin.sendPayloadToBot&&window.ymConfig.payload&&window.chat.send({event:{code:"payload-from-bot",data:window.ymConfig.payload}},!0)),e("#available-status").removeClass("logged_out").addClass("logged_in"),t.connection.addHandler((function(e){return t.events.onMessage(e)}),null,"message","chat"),t.connection.addHandler((function(e){return t.events.on_ping(e)}),"urn:xmpp:ping","iq"),t.connection.send(t.$pres().tree()),t.connection.addHandler(t.events.onSubscriptionRequest,null,"presence","subscribe"),t.messageQueueUntilConnection.forEach((function(e){window.chat.send(e.message,e.isEvent,e.title,e.doNotSend,e.sync,!0)})),t.messageQueueUntilConnection=[],clearInterval(t.pingInterval),t.pingInterval=setInterval((function(){t.connection.send(t.$pres().tree())}),6e4)}catch(e){t.init(),console.log("Error in send XMPP connection")}},onMessage:function(i){t.messageCount+=1,t.iphoneFix(),0!==e(i).attr("from").indexOf(X)&&(X=e(i).attr("from").split("@")[0]);var o=e(i).find("body").text(),a=ge(o);if(a&&!0===a.typing)return Te(),!0;if(window.chat.zendesk.agentConnected&&a.webView&&window.ymConfig.triggerJourney)return!0;if(t.storeMessage(o,!1),t.logging&&console.log(o),a&&a.ack){var s=e("#".concat(a.messageId));return 0===s.length&&a.message&&t.createUserMessageDiv(a),s.removeClass("fa-clock-o"),s.removeClass("fa-spin"),s.addClass("fa-check"),!0}if(a&&a.targetLanguage&&(t.targetLanguage=a.targetLanguage),a&&!1===a.typing)return Se(),!0;if(a&&!0===a.messageAgentProfile)return t.autoStartCall=a.autoStartCall,t.logging&&(console.log("MESSAGE AGENT ",t.queuePosition),console.log(e("#queue-position-display"),"queue_position_display")),t.queuePosition=null,e("#queue-position-display").length&&(e("#queue-position-display")[0].remove(),me()),t.changeBotToAgent(a.agentProfile),a.dyteParams&&(t.autoStartCall=!!a.dyteParams.autoStartCall,t.dyteParams=a.dyteParams,t.autoStartCall?D():e(".call-button").show()),a.janusParams&&(t.janusParams=a.janusParams,t.agentProfile=a.agentProfile,t.janusParams&&Promise.all([n.e(21),n.e(10)]).then(n.t.bind(null,10,7)).then((function(e){h=e.default,t.initializeJanus((function(){t.attachJanusPlugins()}))}))),!0;if(a&&a.queuePositionData)return delete a.ticketClosedEvent,t.logging&&console.log("THIS IS THE QUEUE POSITION DATA",a.queuePositionData),t.queuePosition=a.queuePositionData,t.showQueuePosition(a.queuePositionDisplayMessage),!0;if(a&&!0===a.ticketClosedEvent){t.changeAgentToBot(),t.janus&&delete t.janus,t.janusParams&&delete t.janusParams;var r=document.getElementById("ymDyteIfram");return r&&e(r).remove(),e(".call-button").hide(),e(".chat-button").hide(),!0}return!I&&t.mapping&&t.mapping.welcomeMessages&&a&&!a.event&&t.mapping.welcomeMessages.push(a),a.message&&!t.oldMessageLoaded&&t.shouldLoadLocalMessage()||(!window.ymConfig.init_message||window.ymConfig.init_message&&t.messageCount>2?(new Date).getTime()-t.lastshowntime.getTime()>t.messageDelay&&0===t.timetoshow?(Se(),t.receiveMessage(o)):(t.timetoshow+=t.messageDelay,Te(),setTimeout((function(){t.timetoshow-=t.messageDelay,0===t.timetoshow&&Se(),t.receiveMessage(o),setTimeout((function(){ee(),e(".cards").not(".slick-initialized").slick({infinite:!1,variableWidth:!0})}),100)}),t.timetoshow)):(Se(),t.receiveMessage(o)),setTimeout((function(){ee(),e(".cards").not(".slick-initialized").slick({infinite:!1,variableWidth:!0})}),100)),!0},on_ping:function(n){var i=t.$iq({to:e(n).attr("from"),type:"result",id:e(n).attr("id")});return t.connection.send(i),!0}},t.timetoshow=0,t.lastshowntime=new Date,t.messageDelay=500,t.card_button_height=40,t.card_desc_padding=10,t.messageCount=0,t.savedMessageCount=0,this.updateChildDropDownDetails=function(t,n,i,o){t.children("div").click((function(a){o.changeText&&(e(this).parentsUntil(".card").find(".card_description")[0].innerHTML=e(this).attr("class")),o.sendEvent&&window.chat.send({event:{code:o.sendEvent,data:e(this).text()}},!0),a.stopPropagation(),t.hide(),n.text(e(this).text()),e(this).addClass("selected").siblings("div").removeClass("selected"),i.removeClass("fa-angle-up"),i.addClass("fa-angle-down")}))},this.updateDropDown=function(n){var i,o,a;e(".".concat(n.id)).last().find(".text-value")[0].innerText=n.defaultValue,e(".".concat(n.id)).parentsUntil(".card").find(".card_description")[0].innerText=n.defaultPrice,i=e(".".concat(n.id)).last().next(),o=e(".".concat(n.id)).last().find(".text-value"),a=e(".".concat(n.id)).last().find("i"),i.empty(),n.options.forEach((function(t){t.changedCardText?i.append(e("<div class='".concat(t.changedCardText,"'>").concat(t.key,"</div>"))):i.append(e("<div>".concat(t.key,"</div>")))})),t.updateChildDropDownDetails(i,o,a,n)},this.storeMessage=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t.userLoggedInAsBid)try{try{var a=JSON.parse(e);if(a.typing||a.event)return}catch(e){}var s=i.default.getItem("conversation_history_"+t.storagekey);if((s=s?JSON.parse(s):[])[s.length-1]&&s[s.length-1].message===e)return;s.push({message:e,you:n,timestamp:new Date,start:o&&!P&&0===t.savedMessageCount}),t.savedMessageCount++,s=s.splice(-200),i.default.setItem("conversation_history_"+t.storagekey,JSON.stringify(s))}catch(e){t.out(e)}},this.uiEventHandler=function(n){switch(n.code){case"ui-event-change-background":e(".chat-background").css(n.data);break;case"ui-event-change-language":t.language=n.data.toUpperCase();break;case"voice-event-enroll":this.identifier=n.identifier,setTimeout(t.voiceEnroll,2e3),this.showTyping();case"ui-event-reload":t.reloadBot();break;case"voice-event-authenticate":this.identifier=n.identifier,this.authenticate=!0,this.showTyping(),setTimeout(t.voiceEnroll,2e3);break;case"ui-event-scroll-down":we();break;case"ui-event-update-promotion":window.botInOpenState||window.ymConfig&&(window.ymConfig.pwa||window.ymConfig.lite)?t.showPromotion(n.data):window.promotionQueue=n.data;break;case"ui-event-close-promotion":t.closePromotion();break;case"ui-event-update-offers-section":(window.botInOpenState||window.ymConfig&&(window.ymConfig.pwa||window.ymConfig.lite))&&t.showOffersSection(n.data);break;case"ui-event-close-offers-section":t.closeOffersSection();break;case"ui-event-update-drop-down-data":t.updateDropDown(n.data);break;case"survey-completed":var o=JSON.parse(i.default.getItem("survey_completed_"+Y))||{};o[i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]]=!0,i.default.setItem("survey_completed_"+Y,JSON.stringify(o)),t.disableUserInput(!0);break;case"ui-event-login-user":t.logout(),t.userLoggedInAsBid=n.data,t.init();break;case"ui-event-logout-user":t.userLoggedInAsBid=void 0,t.logout(),t.init();break;case"verifiedUser":if(!window.ymConfig.ymAuthenticationToken)return;t.logout(),t.shouldAuthenticate=!0,t.jid=n.data+"@"+window.ymConfig.xmpp_domain,i.default.setItem("anon_jid_"+t.storagekey,t.jid),t.init();break;case"message-previous-conversation":var a=JSON.parse(n.data);e(".load-more-older-message").addClass("hide"),a.length>0?(G=!0,P=!0,E=a,t.hasMoreOlderMessage=a.length>=50,t.loadMessages(!0)):t.loadWelcomeMessages(void 0,!0,!0);break;case"ui-event-bot-additional-info":t.loadMarkdownScript((function(){t.showAdditionalInfo(n.data)}));break;case"ui-event-mute-voice":t.skin&&t.skin.speak&&window.chat.speak&&(window.chat.speakMuted=!0);break;case"ui-event-unmute-voice":t.skin&&t.skin.speak&&window.chat.speak&&(window.chat.speakMuted=!1);break;case"zendesk_event_send_offline_messages":if(!window.chat.zendesk.accountConnected)return;var s=n.data.messageDetails.name||"USER",r="zendesk_user_transcript:\n"+t.zendeskGetOldMessages(n.data.botName,n.data.messageDetails.name);n.data.message&&(r+=s+": "+n.data.message+"\n"),n.data.tags&&window.zChat.removeTags(n.data.allTags||[],(function(e){e?console.log("Error while removing tags"):window.zChat.addTags(n.data.tags,(function(e){console.log("error",e)}))})),window.zChat.sendOfflineMsg({name:n.data.messageDetails.name,email:n.data.messageDetails.email,phone:n.data.messageDetails.phone,message:r,department:n.data.messageDetails.department},(function(e){e&&(window.chat.send({event:{code:"zendesk_error_while_sending_offline_message"}},!0),console.log("Error while sending zendesk offline message:",e)),window.chat.send({event:{code:"zendesk_offline_message_sent"}},!0)}));break;case"zendesk_event_connect_to_agent":window.chat.zendesk.agentConnected=!0,window.chat.zendeskConnectedInThisPage=!0,e(".fa-home").addClass("disabled-icon");var c="zendesk_user_transcript:\n"+t.zendeskGetOldMessages(n.data.botName,n.data.display_name);window.zChat.setVisitorInfo({display_name:n.data.display_name,email:n.data.email,phone:n.data.phone},(function(e){window.zChat.setVisitorDefaultDepartment(n.data.department_id,(function(e){console.log("error in setting department",e)})),n.data.tags?window.zChat.removeTags(n.data.allTags||[],(function(e){e?console.log("Error while removing tags"):(window.zChat.addTags(n.data.tags,(function(e){console.log("error",e)})),window.zChat.sendChatMsg(c,(function(e){console.log("error",e)})))})):window.zChat.sendChatMsg(c,(function(e){console.log("error",e)})),window.chat.zendesk.connectionTime=0,t.zendeskCheckAgentConnected(),i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk))}));break;case"zendesk_event_connected_to_agent_ack":if(!(n.data&&n.data.promotionRating&&n.data.message&&n.data.promotionComment))return;window.chat.zendesk=JSON.parse(i.default.getItem("".concat(window.ymConfig.bot,"_zendesk_details"))),window.chat.zendesk.promotionRating=n.data.promotionRating,window.chat.zendesk.promotionComment=n.data.promotionComment,t.showPromotion(window.chat.zendesk.promotionRating),n.data.message&&!window.chat.zendesk.agentJoinedAck&&(window.chat.zendesk.agentJoinedAck=!0,window.zChat.sendChatMsg(n.data.message,(function(e){e&&console.log("zendesk send error",e)})),window.chat.receiveMessage(JSON.stringify({message:"".concat(n.data.message)})),window.chat.storeMessage(JSON.stringify({message:"".concat(n.data.message)}),!1,!1)),i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk)),we();break;case"zendesk_event_user_waiting":if(!n.data||!n.data.message)return;window.chat.storeMessage(JSON.stringify({message:"".concat(n.data.message)}),!1,!1),window.chat.receiveMessage(JSON.stringify({message:"".concat(n.data.message)})),we();break;case"zendesk_event_close_ticket":window.chat.zendesk.userConnectedWithBot=!1,window.chat.zendesk.agentConnected=!1,e(".fa-home").removeClass("disabled-icon"),i.default.deleteItem("".concat(window.ymConfig.bot,"_zendesk_details")),window.zChat.endChat({clear_dept_id_on_chat_ended:!0},(function(e){console.log("chat end error",e)})),i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk));break;case"zendesk_event_message_user":window.chat.zendesk.userConnectedWithBot=!0,window.chat.storeMessage(JSON.stringify(n.data.message),!1,!1),t.receiveMessage(JSON.stringify(n.data.message)),i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk)),we();break;case"zendesk_event_continue_agent_flow":window.chat.zendesk.userConnectedWithBot=!1,i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk));break;case"zendesk_event_send_user_rating":window.zChat.sendChatRating(n.data.message,(function(e){}));break;case"zendesk_event_send_user_comment":window.zChat.sendChatComment(n.data.message,(function(e){}));break;case"zendesk_event_get_agent_working_hours":if(!window.chat.zendesk.accountConnected)return;var l=window.zChat.getOperatingHours();window.chat.send({event:{code:"zendesk_agent_working_details",data:l}},!0);break;case"zendesk_event_get_department_status":var d=window.zChat.getDepartment(n.data.departmentId);window.chat.send({event:{code:"zendesk_department_status",data:d}},!0)}},this.zendeskGetOldMessages=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BOT",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USER",n=JSON.parse(i.default.getItem("conversation_history_"+window.chat.storagekey)),o=n.length,a="",s=0;s<o;s++){var r=n[s],c=JSON.parse(r.message);if(r.you)a+=t+": "+c.message+"\n";else{var l=c.message||c.quickReplies&&c.quickReplies.title;l&&(a+=e+": "+l+"\n")}}return a},this.zendeskCheckAgentConnected=function(){t.timer&&window.clearInterval(t.timer),t.timer=window.setInterval((function(){if(window.chat.zendesk.connectionTime||(window.chat.zendesk.connectionTime=0),window.chat.zendesk.connectionTime+=10,i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk)),window.chat.zendesk.connectionTime>600||0===window.chat.zendesk.queue_position)return window.clearInterval(t.timer),void(window.chat.zendesk.connectionTime>600&&(window.chat.zendesk={},window.chat.send({event:{code:"zendesk_agent_not_joined_continue_bot_flow"}},!0),i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk))));console.log("timer running for zendesk :",window.chat.zendesk.connectionTime),window.chat.send({event:{code:"zendesk_agent_waiting_details",data:{connectionTime:window.chat.zendesk.connectionTime,queue_position:window.chat.zendesk.queue_position}}},!0)}),1e4)},this.disableUserInput=function(n){var o=JSON.parse(i.default.getItem("survey_completed_"+Y)||"{}"),a=i.default.getItem("anon_jid_"+t.storagekey);(n||a&&o[a.split("@")[0]])&&(t.skin.disableTextInput=!0,e(".ym-action-items").addClass("hide"),n&&(e(".send-input-form").addClass("hide"),fe-=window.botOpenClicked?e(".send-input-form").height():55,me()))},this.voiceEnroll=function(){t.hideTyping();be();var n={message:"Please say 'my voice is my passport verify me'"};t.addMessageElement(n,void 0),e(".mic-button").addClass("enabled"),t.dontConvertToText=!0,de()};var s=function(e,t){return"custom"===e?t||"":e||""},c=function(n){e.ajax({url:window.ymConfig.host+"/api/plugin/feedback?bot="+X+"&uid="+i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]+"&feedback="+n+"&source=".concat(Z,"&subSource=").concat(K),method:"GET",cache:!1,success:function(){}})};function D(){var n=document.getElementById("ymDyteIfram");if(n)e(n).show();else if(t.dyteParams){var i=t.dyteParams.userAuthToken,o=t.dyteParams.meetingData,a=document.createElement("IFRAME");a.setAttribute("id","ymDyteIfram"),a.setAttribute("src",window.ymConfig.host+"/components/webview/call/"+o.organizationId+"/"+o.roomName+"?authToken="+i),a.style.height="calc(".concat(window.innerHeight,"px - ").concat(fe,"px + 40px)"),a.style.width="100%",a.setAttribute("allow","camera *, microphone *"),a.style.border="none",e(a).insertAfter("#chatDetails")}e(".call-button").hide(),e(".chat-button").show()}function N(n){t.videocall.createOffer({media:{audio:!0,video:!0},iceRestart:!0,success:function(e){var i={request:"call",username:n};t.videocall.send({message:i,jsep:e,error:function(e){h.error("WebRTC error:",e),ke({error:e,msg:"error in create offer"})}})},error:function(e){h.error("WebRTC error...",e),ke({error:e,msg:"error in docall function"})}}),t.showPromotionCall(),-1===e("#ringing").text().indexOf("Ringing")&&e("#ringing").prepend("Ringing...")}this.getMessageFeedback=function(n,i,o){if(!o||B){e(".chat-message.new.last").removeClass("last"),e(".chat-message.new:last").addClass("last");var a='<span class="thumbs-down">'+s(t.skin.negative_feedback,t.skin.custom_negative_icon)+'</span><span class="thumbs-up">'+s(t.skin.positive_feedback,t.skin.custom_positive_icon)+"</span>";if(n&&(!n.quickReplies||n.quickReplies.title)){if(n.cards){var r=e("#chatBoxMainContainer").width()-60,l=t.skin.cardWidth?parseInt(t.skin.cardWidth)+6:206,d=r-n.cards.length*l;if(d>60){var u=13,p=d-73;a='<div class="feedback-card-one" style="right: '.concat(u=p>u?p:u,'px">').concat(a,"</div>")}else a='<div class="feedback-card">'.concat(a,"</div>")}else n.image?a='<div class="feedback-card" style="right: -12px;">'.concat(a,"</div>"):(n.message||n.quickReplies)&&(a='<span class="feedback-card-one">'.concat(a,"</span>"));e(i).append(a),e(".thumbs-up:last").on("click",(function(){e(".thumbs-up:last").addClass("move-up"),e(".thumbs-up.move-up").on("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",(function(){e(".thumbs-up:last").removeClass("move-up"),e(".chat-message.new.last").removeClass("last"),c("positive")}))})),e(".thumbs-down:last").on("click",(function(){e(".thumbs-down:last").addClass("move-up"),e(".thumbs-down.move-up").on("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",(function(){e(".thumbs-up:last").removeClass("move-up"),e(".chat-message.new.last").removeClass("last"),c("negative")}))}))}}},this.loadFilePreview=function(n){var o=n.url,a=n.fileName,s=void 0===a?"":a,r=n.feedbackParams,c=void 0!==r&&r,l=e("<div class='fileviewer-div'>"),d=e("<div class='fileviewer-header'>"),u=e("#ymFrameHolder",window.parent.document).innerWidth()>500;d.append('<div class="fileviewer-docname">'.concat(s.length>40?s.substr(0,40)+"...":s,'</div><div class="fileviewer-close" onclick="parentNode.parentNode.parentNode.remove()"><span class="closefileviewer" style="background-image: url(\'https://cdn.yellowmessenger.com/FJ2WVonxmvAo1624351976339.png\');"></span></div>')),l.append(d);var p=e("<div class='fileviewer-content'>");if(p.append('<iframe height="100%" width="100%" src="'.concat(o,'" frameborder="0" allowfullscreen >  </iframe>')),l.append(p),c){var g=e("<div class='fileviewer-footer' ".concat(u?'style="border-radius: 0 0 10px 10px;"':"",">"));g.append('<div class="fileviewer-note" style="font-size: 12px; line-height: 24px;"><b>Give Feedback</b><br>We will improve our result based on this.</div>'),g.append('<div class="fileviewer-feedback">'.concat('<span class="thumbs thumbs-up-doc" style="background-image: url(\'https://cdn.yellowmessenger.com/h47SqnhB3GCa1622709212764.png\');"></span><span class="thumbs thumbs-down-doc" style="background-image: url(\'https://cdn.yellowmessenger.com/Hl6eIHKOn3Wg1622709181787.png\');"></span>',"</div>")),l.append(g)}if(u){var f=e("<div class='fileviewer-o fileviewer-div-overlay'>");l.removeClass("fileviewer-div").addClass("fileviewer-div-pwa"),f.append(l),window.parent.document.querySelector("#ymPluginDivContainerInitial").appendChild(f[0])}else{var m=e("<div class='fileviewer-o'>");m.append(l),window.parent.document.querySelector("#ymPluginDivContainerInitial").appendChild(m[0])}function h(n,o,a){var s,r;n.target.style.transform="scale(1.3)",s=o,r={params:a},e.ajax({url:window.ymConfig.host+"/api/plugin/feedback-doc?bot="+X+"&uid="+i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]+"&feedback="+s+"&source=".concat(Z,"&subSource=").concat(K),method:"POST",cache:!1,contentType:"application/json",dataType:"json",data:JSON.stringify(r),success:function(){}}),setTimeout((function(){e(".fileviewer-feedback",window.parent.document).remove()}),200)}e(".thumbs-up-doc",window.parent.document).on("click",(function(e){h(e,"positive",c)})),e(".thumbs-down-doc",window.parent.document).on("click",(function(e){h(e,"negative",c)}))},this.receiveMessage=function(n,i,o,a,s,r){t.lastshowntime=new Date;var c=ge(n);if(c&&c.botIcon&&t.changeBotIcon(c.botIcon),t.skin&&t.skin.hideHomeButton?e(".fa-home").hide():e(".fa-home").show(),c&&c.event){if(c.event.code&&(0===c.event.code.indexOf("ui-event-")||0===c.event.code.indexOf("voice-event-")||0===c.event.code.indexOf("survey-")||0===c.event.code.indexOf("verifiedUser")||0===c.event.code.indexOf("message-")||0===c.event.code.indexOf("zendesk_event")))return t.uiEventHandler(c.event),!0;try{window.parent&&window.parent.postMessage(JSON.stringify({event_code:"custom-event",data:c.event}),"*")}catch(e){}return!0}r||(_=!1,M=!1),M&&(c.hideInput=!0);var l,d=e("div.chat-message"),p=e("div.timestamp-bot");if(d.length>0&&e(d[d.length-1]).hasClass("from-them")&&!r&&((!c.quickReplies||c.quickReplies&&c.quickReplies.title)&&e(d[d.length-1]).removeClass("new"),p.length>0&&!e("#chatBoxMainContainer").hasClass("staticWebView")&&e(p[p.length-1]).addClass("hidden")),t.lastParsedMessage=c,Ce(),t.isSensitiveInfo=!1,e(".send-input-form").hasClass("hide")&&(fe+=window.botOpenClicked?e(".send-input-form").height():55,me()),e("#chatBoxMainContainer").hasClass("staticWebView")&&(e("#chatBoxMainContainer").removeClass("staticWebView"),e(".send-input-form").removeClass("hide"),e(".send-input").removeClass("autoHeight"),T=!0),e("#ymMsgInput").prop("disabled",!1),e("#ymMsgInput").prop("placeholder","Type your message ..."),e(".mic-button img").addClass("speak-logo-cursor"),e(".send-input-form").removeClass("hide"),e(".input-actions").removeClass("hidden-input-brand"),e(".send-input").removeClass("hidden-input-border"),e(".send-input input.input").attr("type","text"),e(".dropdown-text .text-value").removeClass("active"),e(".card-each-input .number-selected.new").removeClass("active"),e(".premium_grid_item .item-value").removeClass("added-in-cart"),screen.width>768&&(!t.skin||void 0===t.skin.dontFocus||!1===t.skin.dontFocus)&&e(".send-input input.input").focus(),c){if(t.skin&&t.skin.oneMessage&&screen.width>768&&!(d.length>0&&e(d[d.length-1]).hasClass("from-them"))){for(var g=d.length-1;g>=0&&!e(d[g]).hasClass("from-me");g--);for(var f=0;f<=g;f++)e(d[f]).remove();e(".welcome-message").addClass("hide")}t.addMessageElement(c,i,a,r),t.skin&&t.skin.disableBotPersona&&(e("#chatBoxMainContainer").css({padding:"10px 20px 30px 20px"}),e(".timestamp-bot:".concat(r?"first":"last")).css({padding:"0 8px 10px 0"}),e(".bot-message:".concat(r?"first":"last")).addClass("noPaddingLeft"),e("#chatOptions").css("cssText","padding-left: 0px !important;"),e("#typing:".concat(r?"first":"last")).css({"margin-left":"0px"}),e(".from-icon").remove(),c.cards&&c.cards.length>1&&e(".bot-message:".concat(r?"first":"last")).addClass("cardsNoBotPersona")),(r&&M&&c.hideInput||!r&&c.hideInput||t.skin&&t.skin.disableTextInput)&&(t.skin&&t.skin.removeBottomNavBar?(e("#ymMsgInput").prop("disabled",!0),e("#ymMsgInput").prop("placeholder","   Please select from the above options"),e(".mic-button img").removeClass("speak-logo-cursor")):(e(".send-input-form").hasClass("hide")||(fe-=window.botOpenClicked?e(".send-input-form").height():55,me()),e(".send-input-form").addClass("hide"),e(".input-actions").addClass("hidden-input-brand"),e(".send-input").addClass("hidden-input-border"))),c.keyboardType&&("boolean"!=typeof c.keyboardType&&"password"!==c.keyboardType||(c.keyboardType="password",t.isSensitiveInfo=!0),e(".send-input input.input").attr("type",c.keyboardType)),(c.hideHomeButton||c.options&&c.options.hideHomeButton)&&e(".fa-home").hide();try{!i&&t.skin.soundOnMessage&&j()}catch(e){}}else{if(t.skin&&t.skin.oneMessage&&screen.width>768&&!(d.length>0&&e(d[d.length-1]).hasClass("from-them"))){for(var m=d.length-1;m>=0&&!e(d[m]).hasClass("from-me");m--);for(var h=0;h<=m;h++)e(d[h]).remove();e(".welcome-message").addClass("hide")}var w=L(a?new Date(a):void 0),v=e('<div class = "chat-message from-them '+(t.skin&&t.skin.bubbleType?t.skin.bubbleType:"")+" new "+(d.length>0&&e(d[d.length-1]).hasClass("from-them")&&!e(d[d.length-1]).hasClass("carousel")?"":"first")+'"> <span class="thumbs-down"></span><span class="thumbs-up"></span> </div>');v.append('<span class="from-icon"></span>'),v.append(e("<div>"+t.processTextMessage(n)+"</div> ")),t.lastTimeDiv=t.addBotMessageDiv(v,w,r);try{i||j()}catch(e){}}i||(s?0!=(l=e(".message-came:last").prev()).length&&(l.hasClass("hidden")&&(l=l.prev().prev()),e("#chatBoxMainContainer").scrollTo(l,0,{axis:"y"})):T?(he(),T=!1):e("#chatBoxMainContainer").hasClass("staticWebView")?ye():t.skin&&t.skin.scrollToBottomAlways?he():be());try{var y="";if(c){if(void 0!==c.typing)return;if(c.stepAutoComplete?window.stepAutoComplete=c.stepAutoComplete:window.stepAutoComplete=!1,c.bot?c.bot:void 0,c.defaultAutoComplete?window.defaultAutoComplete=c.defaultAutoComplete:window.defaultAutoComplete=!1,c&&c.targetLanguage&&(t.targetLanguage=c.targetLanguage),c.question&&c.question.question&&(y=c.question.question),c.cards&&c.cards[0]&&setTimeout((function(){ee();var n=!1,i=370;screen.width<370?i=screen.width<320?320:screen.width:window.ymConfig&&window.ymConfig.botWidth&&(i=parseInt(window.ymConfig.botWidth));var o=(e("#chatBoxMainContainer").width()||i)-60,a=t.skin&&t.skin.cardWidth?parseInt(t.skin.cardWidth)+6:206,s=Math.floor(o/a)||1,r={variableWidth:!0,infinite:!1,slidesToShow:s,slidesToScroll:s};o>=c.cards.length*a?r=u({},r,{arrows:!1}):c.options&&c.options.infiniteScroll&&(n=!0,r=u({},r,{dots:!0,infinite:!0})),e(".cards").not(".slick-initialized").slick(r),n&&(e(".slick-list").css("top","30px"),e(".slick-prev").css("top","calc(45% + 30px)"),e(".slick-next").css("top","calc(45% + 30px)"))}),100),c.message&&c.message&&(y=c.message),window.ymConfig.admin&&c.journeyId&&c.stepId){var b=e('<div class="suggestion">Journey/Step: '+c.journeyName+" -> "+c.stepName+"</div>");b.click((function(){try{window.parent&&window.parent.postMessage(JSON.stringify({event_code:"load-step",data:c}),"*")}catch(e){}})),t.addBotMessageDiv(b,void 0,r)}}if(t.skin&&t.skin.speak&&window.chat.speak&&y){ue();var k=c.speak?c.speak:y;this.enqueueAndPlayAudio(k)}c&&c.quickReplies&&(y=c.quickReplies.title),t.skin&&t.skin.speak&&window.chat.speak&&y&&s&&(t.isWelcomeMessageQueuedForVoice=!0),!window.parent||i||o||window.ymConfig.noNotification||(!t.skin||t.skin.noNotification)&&t.skin||(t.mapping.botIntro&&(t.showBotIcon||t.skin.showOnlyBotIntroInNotification)&&(y=t.mapping.botIntro),window.parent.postMessage(JSON.stringify({event_code:"message-received",data:t.processTextMessage(y||"You received a message!")}),"*"))}catch(e){console.log(e)}t.skin&&t.skin.enableMessageFeedback&&e(".chat-message.from-me").length>0&&this.getMessageFeedback(c,".chat-message.bot-message.new.last")},this.createUi=function(){try{window.parent&&window.parent.postMessage(JSON.stringify({event_code:"connected",data:"connected"}),"*")}catch(e){}window.ymPluginLoaded=!0,e(".send-input .send-button").click((function(t){e("#sendIcon").hasClass("failure-button")||(e("#ymChatForm").submit(),e(".send-button").addClass("hide"),e(".mic-button").hasClass("speakFirstMicPosition")||e(".speak-logo").show(),a("Send Button Click","Send Button Click",1))}));var n,o=e("#chatBoxMainContainer"),s=e("#chatDetails");if(e(".send-input input").on("focus",(function(){t.iphoneFix()})),e(".send-input input").on("keypress",(function(){t.iphoneFix()})),q()&&(o.addClass("iphone-fix"),t.card_button_height=45,t.card_desc_padding=20),t.skin&&t.skin.hideBranding&&e(".powered-by").addClass("hide"),t.skin&&t.skin.speak&&(e(".speak-icon").removeClass("hide"),e(".speak-icon").removeClass("fa-volume-off"),e(".speak-icon").addClass("fa-volume-up"),window.chat.speak=!0,e(".speak-icon").click((function(){e(".speak-icon").hasClass("fa-volume-off")?(e(".speak-icon").removeClass("fa-volume-off"),e(".speak-icon").addClass("fa-volume-up"),window.chat.speakMuted=!1,e("audio").prop("muted",!1)):(e(".speak-icon").removeClass("fa-volume-up"),e(".speak-icon").addClass("fa-volume-off"),window.chat.speakMuted=!0,e("audio").prop("muted",!0))}))),window.ymConfig.lite&&me(),t.skin&&t.skin.speakFirst){e(".mic-button").addClass("speakFirstMicPosition"),e(".tap-to-speak").show(),e(".speak-logo").addClass("big-logo");me(),e(".language-button").remove(),e(".language-action-tab").removeClass("hide"),e(".language-action-tab").addClass("language-button"),e(".language-menu").attr("style","bottom:35px;"),e(".tap-to-speak").removeClass("hide"),window.waitingTIme=3e3}if(t.skin&&t.skin.soundOnBotLoad&&e("#alert").length>0)try{var r=e("#alert")[0].play();"IE"!==te()&&r.then((function(){})).catch((function(e){console.log("Error while playing in promise browser")}))}catch(e){console.log("Error while playing in non promised browser")}n=t.skin&&t.skin.customHomeButtonMessage?function(){window.callatTheRateAutoComplete=!1,window.chat.send(t.skin.customHomeButtonMessage,!0,t.skin.customHomeButtonMessage,!1,!1)}:function(){e(".autocomplete-suggestion").remove(),window.callatTheRateAutoComplete=!1,window.clickedSpeakFirstMicIcon=!1,window.ymConfig.cacheDefault?t.loadWelcomeMessages(void 0):t.executeModifiedCode?t.updateUserAndFetchMessage({},null,!0):t.refreshContext((function(n){e.ajax({url:window.ymConfig.host+"/api/plugin/mapping",cache:!1,data:u({bot:window.ymConfig.trigger||Y,trigger:window.ymConfig.trigger,uid:i.default.getItem("anon_jid_"+t.storagekey)?i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]:"",uat:window.uat,referrer:Y,payload:window.ymConfig.payload?window.ymConfig.payload:void 0,pageUrl:window.ymConfig.parentOrigin||window.parent.location.href.split("?")[0],homeButtonClicked:!0},window.ymConfig.defaultLanguage&&{defaultLanguage:window.ymConfig.defaultLanguage},{source:Z,subSource:K,loadEverywhere:window.ymConfig.loadEverywhere||!1}),dataType:"json",timeout:1e4,success:function(e){e&&e.data&&(t.mapping=e.data,t.mapping.skin&&(t.skin=t.mapping.skin),t.loadWelcomeMessages(void 0,!0))}})}));try{window.parent&&window.chat.send({event:{code:"ym_home",data:""}},!0)}catch(e){}};t.skin&&t.skin.enableEmailTranscript&&e("#chatContainer #emailIcon").show();t.skin&&t.skin.emailDomain&&(e("#chatContainer #emailInput").css({width:"50%"}),e("#chatContainer #emailInput").attr({placeholder:"username"}),e("#chatContainer #emailSuffix").text("@"+t.skin.emailDomain)),e(".fa-home").click((function(e){-1===e.currentTarget.className.indexOf("disabled-icon")&&(n(),A++,I=!1,m({event:"home-button-click",payload:{journey:t.lastParsedMessage.journeySlug,step:t.lastParsedMessage.stepSlug}}),a("Home Button","Home Button Click",1))})),e(".fa-sign-out").click((function(){window.chat.send({event:{code:"zendesk_user_request_ticket_close",data:{commented:window.chat.zendesk.userCommented,rated:window.chat.zendesk.userRated}}},!0)})),e("#emailIcon").click((function(){e("#emailModal").show(),e("#chatContainer #emailInputContainer").show(),e("#chatContainer #emailSuccess").hide(),e("#chatContainer #emailFail").hide()})),e("#chatContainer #emailCancelBtn").click((function(){e("#emailModal").hide(),e("#chatContainer #email-error").html("&nbsp;"),e("#chatContainer #emailInputContainer").hide(),e("#chatContainer #emailSuccess").hide(),e("#chatContainer #emailFail").hide(),e("#chatContainer #emailInput").val("")})),e("#chatContainer #emailInput").keyup((function(){var n=e("#chatContainer #emailInput").val().trim();if(0!==n.length){t.skin&&t.skin.emailDomain&&(n=n+"@"+t.skin.emailDomain);e("#chatContainer #emailSendBtn").prop("disabled",!1),/\b[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)/gi.test(n)?(e("#chatContainer #email-error").html("&nbsp;"),e("#chatContainer #emailSendBtn").prop("disabled",!1)):(e("#chatContainer #email-error").text("Please enter a valid email"),e("#chatContainer #emailSendBtn").prop("disabled",!0))}else e("#chatContainer #email-error").html("&nbsp;")})),e("#chatContainer #emailSendBtn").click((function(){e.ajax({type:"POST",url:window.ymConfig.host+"/api/plugin/email_chat_to_user",data:JSON.stringify({botId:Y,uid:i.default.getItem("anon_jid_"+t.storagekey).split("@")[0],email:e("#chatContainer #emailInput").val(),timezoneOffset:-1*(new Date).getTimezoneOffset()}),json:!0,headers:{"Content-Type":"application/json"},success:function(t){e("#emailModal").show(),e("#chatContainer #emailInputContainer").hide(),e("#chatContainer #emailInput").val(""),t&&t.success?(e("#chatContainer #emailSuccess").show(),e("#chatContainer #emailFail").hide()):(e("#chatContainer #emailSuccess").hide(),e("#chatContainer #emailFail").show())},error:function(){e("#emailModal").show(),e("#chatContainer #emailInputContainer").hide(),e("#chatContainer #emailSuccess").hide(),e("#chatContainer #emailFail").show()}})})),e("#chatContainer .email-close-icon").click((function(t){e("#emailModal").hide(),e("#chatContainer #emailInputContainer").hide(),e("#chatContainer #emailSuccess").hide(),e("#chatContainer #emailFail").hide()})),e(".close-chat").click((function(e){e.stopPropagation(),window.chat.closeChat(),a("Bot Close","Bot Close Button Click",1)}));var c=function(n){try{var i=o.height(),a=o.get(0).scrollHeight,s=!0;n.originalEvent.deltaY<0&&(s=!1),0!==this.scrollTop||s||(t.hasMoreOlderMessage&&(e(".load-more-older-message").removeClass("hide"),t.hasMoreOlderMessage=!1,t.oldConversationOffset+=50,window.chat.send({event:{code:"fetchOldConversation",offset:t.oldConversationOffset}},!0)),n.preventDefault()),(this.scrollTop===a-i-40&&s||window.ymConfig.banner&&this.scrollTop===a-i&&s)&&n.preventDefault()}catch(n){}};o.on("wheel",c),s.on("wheel",c),e("#ymChatForm").submit((function(n){n.preventDefault();var i=e("#ymMsgInput").val().trim();i.length>500?t.handleInputError("Please enter a shorter message"):(window.callatTheRateAutoComplete?window.callatTheRateAutoComplete=!1:t.skin&&(t.skin.noSpecialCharacters||t.skin.preventSpecialChars)&&i.match(/[#$%^&*()=<>]/g)?(t.handleInputError("Special characters are not allowed"),e(".send-button").click()):(t.send(i),t.iphoneFix(),e("#ymMsgInput").val("")),e(".autocomplete-suggestion").remove(),i?(e(".send-button").removeClass("hide"),e(".mic-button").hasClass("speakFirstMicPosition")||e(".speak-logo").hide()):(e(".send-button").addClass("hide"),e(".mic-button").hasClass("speakFirstMicPosition")||e(".speak-logo").show()))})),screen.width<=768&&(e("#ymMsgInput").on("focus",(function(){e(".send-input .send").removeClass("hide"),he(),me()})),e("#ymMsgInput").on("blur",(function(t){setTimeout((function(){e(".send-input .send").addClass("hide"),e(".send-input .attach").removeClass("hide")}),100),t.preventDefault()}))),e(".attach").on("change","#chatFile",(function(e){t.handleUpload(e)}));var l=!1;try{var d=JSON.parse(window.ymConfig.payload);l="ionic"===d.platform}catch(e){}window.navigator&&window.navigator.userAgent&&-1!==window.navigator.userAgent.toLowerCase().indexOf("iphone")&&-1===window.navigator.userAgent.toLowerCase().indexOf("chrome")&&!l&&e(".mic-button").hide(),e(".close-listening").click((function(){Me(),window.chat.clearAudio(),ue(),window.isClosedListening=!0,p=new Date})),e(".mic-button").click((function(){if(!e("#ymMsgInput").prop("disabled"))if(l&&window.ymConfig.handlers&&!e(".mic-button").hasClass("enabled"))try{window.ymConfig.handlers.sendIOSEvent({code:"micPressed",data:"micPressed"})}catch(e){}else t.skin&&t.skin.speakFirst&&(window.clickedSpeakFirstMicIcon=!0,_e()),window.chat.clearAudio(),window.chat.isWelcomeMessageQueuedForVoice=!0,e(".mic-button").hasClass("enabled")?(C=!1,e(".mic-button").removeClass("enabled"),ue(),a("Mic Button Stop Click","Mic Language: "+window.chat.language,1)):(e(".mic-button").addClass("enabled"),C=!0,de(),a("Mic Button Start Click","Mic Language: "+window.chat.language,1))})),e(".language-button").click((function(t){e(".language-menu").toggleClass("hide"),t.preventDefault()})),e(".language-menu ").on("click","li",(function(t){var n=e(t.target).text();window.chat.language=e(t.target).attr("class"),e(".language-menu").addClass("hide"),window.chat.send({event:{code:"change-language",language:window.chat.language}},!0),a("Language Change","Selected Language: "+n,1)})),e(".call-button").click((function(){if(t.dyteParams&&D(),t.janusParams)try{N(t.agentProfile&&t.agentProfile.webrtc_username?t.agentProfile.webrtc_username:t.janusParams&&t.janusParams.agentJanusUsername?t.janusParams.agentJanusUsername:"")}catch(e){console.log(e,"error in doCall"),ke({e:e,msg:"erro in docall"})}})),e(".chat-button").on("click",(function(){var t=document.getElementById("ymDyteIfram");t&&(e(t).hide(),e(".chat-button").hide(),e(".call-button").show())}))},this.fileHandlerUtil=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new FileReader;i.addEventListener("load",(function(i){n&&t.send({file:i.target.result},!0),t.showImageUploaded(i.target.result,e.name)})),i.addEventListener("error",(function(){n?t.errorOnUpload("".concat(e.name,". Please try to upload from local storage.")):t.showImageUploaded("",e.name)})),i.readAsDataURL(e)},this.handleUpload=function(n,i){i||(i="fileForm");var o=n.currentTarget.files,s=(o[0].size/1024/1024).toFixed(4);if(window.parent&&a("File Upload","File Upload Size: "+s+" MB",1),s>20)return alert("Please upload a file within 20 MB");window.chat.zendesk.agentConnected?window.zChat.sendFile(o[0],(function(e,n){e&&(console.log("zendesk: error while uploading file =>",e),t.errorOnUpload(o[0].name)),e||(t.storeMessage(JSON.stringify({message:"".concat(n.name," has been uploaded."),timestamp:new Date}),!0),t.fileHandlerUtil(o[0],!1))})):window.chat.mapping&&window.chat.mapping.skin&&window.chat.mapping.skin.uploadToCustomDomain||window.chat.zendesk.agentConnected?t.fileHandlerUtil(o[0]):(console.log("Inside if block of calling api:",o[0]),window.fileSize=s,e("#".concat(i)).submit(t.uploadHandler(i,o[0])),e("#ymMsgInput").addClass("hide")),t.showImageUploading()},this.uploadHandler=function(n,i){var o=new FormData(document.getElementById(n)),a=window.chat.mapping&&window.chat.mapping.skin&&window.chat.mapping.skin.secureUpload||!1;e.ajax({url:(window.ymConfig.host||"https://app.yellowmessenger.com")+"/api/chat/upload?bot="+Y+"&uid="+window.chat.jid.split("@")[0]+"&secure="+a,data:o,processData:!1,contentType:!1,type:"POST",success:function(e){t.fileHandlerUtil(i,!1)},error:function(e){console.log("Error while uploading",e),t.lastImageData=null,window.chat.mapping&&window.chat.mapping.skin&&window.chat.mapping.skin.sendEventOnUploadError&&window.chat.send({event:{code:"upload-error",fileName:i.name}},!0),t.errorOnUpload(i.name)}})},this.sendFile=function(n){var i=new t.Strophe.Builder("message",{to:Y+"@"+window.ymConfig.xmpp_domain,type:"chat"}).c("body").t(encodeURIComponent(JSON.stringify({file:n,fileSize:window.fileSize})));t.connection.send(i.tree()),e("#ymMsgInput").removeClass("hide"),e(".image-uploading").removeClass("loading"),e(".image-uploading:last").addClass("file-icon"),e(".image-uploading:last").attr("src",f),e(".image-uploading:last").click((function(){window.open(n,"_blank")})),e('<a href="'+n+'" target="_blank">Attachment</a>').insertAfter(".image-uploading:last"),e(".image-uploading:last").parent().removeClass("uploading-div"),e(".image-uploading:last").removeClass("image-uploading");var o=e("#chatFile");o.wrap("<form>").closest("form").get(0).reset(),o.unwrap()},this.sendImage=function(n){var i=new t.Strophe.Builder("message",{to:Y+"@"+window.ymConfig.xmpp_domain,type:"chat"}).c("body").t(encodeURIComponent(JSON.stringify({image:n})));t.connection.send(i.tree()),e("#ymMsgInput").removeClass("hide"),e(".image-uploading").removeClass("loading"),e(".image-uploading:last").attr("src",""),e(".image-uploading:last").attr("src",n),e(".image-uploading:last").parent().addClass("image-div"),e(".image-uploading:last").parent().removeClass("uploading-div"),e(".image-uploading:last").removeClass("image-uploading");var o=e("#chatFile");o.wrap("<form>").closest("form").get(0).reset(),o.unwrap()},this.showImageUploading=function(){var n=e("div.chat-message");n.length>0&&e(n[n.length-1]).hasClass("from-me")&&e(n[n.length-1]).removeClass("new"),Ce();var i=e('<div class = "chat-message from-me-image new '+(n.length>0&&(e(n[n.length-1]).hasClass("from-me")||e(n[n.length-1]).hasClass("from-me-image"))?"":"first")+'"> </div>');i.append(e('<div class="uploading-div"><div class="uploading-img-div contents" ><img class="image-uploading loading" src="'+g+'/files/images/upload.png" alt="Uploading ..."/></div><span class="uploading-text">Uploading...</span></div> ')),t.addBotMessageDiv(i,void 0,!1),he()},this.errorOnUpload=function(t){e(".uploading-text:last").text("Error while uploading ".concat(t)),e(".uploading-text:last").parent().prepend('<i class="fa fa-exclamation-triangle upload-error" aria-hidden="true"></i>'),e(".uploading-img-div:last").addClass("hide"),e(".uploading-img-div:last").removeClass("contents"),e("#ymMsgInput").removeClass("hide");var n=e("#chatFile");n.wrap("<form>").closest("form").get(0).reset(),n.unwrap(),Se()},this.showImageUploaded=function(n,i){t.lastImageData=null;var o=n.split(";")[0];e(".uploading-img-div:last").removeClass("contents"),-1!==o.indexOf("image")?(e(".image-uploading:last").attr("src",n),e(".image-uploading:last").addClass("image-uploaded"),e(".image-uploading:last").removeClass("image-uploading"),e(".uploading-text:last").text(i),e(".uploading-img-div:last").click((function(){try{window.ymConfig.handlers.sendIOSEvent({code:"image-opened",internal:!0})}catch(e){}window.chat.openImage(n)}))):(e(".uploading-text:last").text("Uploaded ".concat(i)),e(".uploading-text:last").parent().prepend('<i class="fa fa-paperclip" aria-hidden="true"></i>'),e(".uploading-img-div:last").addClass("hide"),e(".image-uploading:last").attr("src",g+"/files/images/file-attachment.jpg")),e("#ymMsgInput").removeClass("hide");var a=e("#chatFile");a.wrap("<form>").closest("form").get(0).reset(),a.unwrap(),Se()},this.rgb2hex=function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},this.setSkin=function(i){if(t.skin)try{t.skin.inputActionColor||(t.skin.inputActionColor=t.skin.primaryColor),t.skin.primaryBorderColor||(t.skin.primaryBorderColor=t.skin.primaryColor),t.skin.secondaryBorderColor||(t.skin.secondaryBorderColor=t.skin.secondaryColor);try{t.skin.linkColor=t.invertColor(t.skin.secondaryColor?0===t.skin.secondaryColor.indexOf("#")?t.skin.secondaryColor:t.rgb2hex(t.skin.secondaryColor):"#1F8CEB"),t.skin.linkColorInverted=t.invertColor(t.skin.primaryColor?0===t.skin.primaryColor.indexOf("#")?t.skin.primaryColor:t.rgb2hex(t.skin.primaryColor):"#eaf2f7"),t.skin.insuranceCardTitleBackground=t.skin.insuranceCardTitleBackground||t.skin.primaryColor}catch(e){}t.skin.insuranceCardTitleBackground||(t.skin.insuranceCardTitleBackground=t.skin.primaryColor),t.skin.insuranceCardTitleTextColor||(t.skin.insuranceCardTitleTextColor="#fff"),t.skin.insuranceCardPremiumBackground||(t.skin.insuranceCardPremiumBackground=t.skin.secondaryColor),t.skin.insuranceCardPremiumTextColor||(t.skin.insuranceCardPremiumTextColor="#fff"),t.skin.sliderCircleColor||(t.skin.sliderCircleColor=t.skin.sliderCircleColor||t.skin.primaryColor||"#4384f5"),t.skin.promotionBackground||(t.skin.promotionBackground="#349FD5"),t.skin.cardsDropdownListBackground||(t.skin.cardsDropdownListBackground="#eaeaea"),t.skin.cardsDropdownListColor||(t.skin.cardsDropdownListColor="#4e4e50"),"IE"===te()&&(t.skin.slickCardRightArrowPosition="25px",e(".cards .slick-next").css({right:"25px"})),t.skin.alignQROptionsRight&&(t.skin.displayQROptions="block",e("#chatOptions").css("direction","rtl"));var o={".rating > label:color":"ratingColor",".chat-background:opacity":"chatBackgroundOpacity",".cards .slick-next:background-color":"slideArrowBackgroundColor",".cards .slick-prev:background-color":"slideArrowBackgroundColor",".timestamp-user:color":"timeStampColor",".timestamp-user:font-size":"timeStampTextSize",".timestamp-bot:color":"timeStampColor",".timestamp-bot:font-size":"timeStampTextSize",".from-them div:text-align":"justifyAlignUserMessages","#chatBoxMainContainer:overflow":"noScroll","#chatDetails:background-color":"titleBackgroundColor","#chatDetails:color":"titleTextColor","#chatDetails:font-size":"titleTextSize","#chatDetails .sub-title:color":"titleSubColor","#chatDetails .sub-title:font-size":"titleSubSize",".input-actions i:color":"inputActionColor",".home-button i:color":"inputActionColor",".send-button i:color":"inputActionColor",".mic-button i:color":"inputActionColor",".email-btn.send:background":"inputActionColor",".email-btn.send:color":"titleTextColor",".from-me div:background-color":"primaryColor",".from-me div:border-color":"primaryBorderColor",".from-me div:border-radius":"primaryBorderRadius",".from-me div:line-height":"lineHeight",".from-me.first div:border-top-right-radius":"primaryBorderRadius",".from-me div:color":"primaryTextColor",".from-me div:padding":"primaryPadding",".from-me div:font-size":"primaryFontSize",".from-me div:box-shadow":"shadow",".from-them div:background-color":"secondaryColor",".from-them div:border-color":"secondaryBorderColor",".from-them div:border-radius":"secondaryBorderRadius",".from-them div:line-height":"lineHeight",".from-them.first div:border-top-left-radius":"secondaryBorderRadius",".from-them div:color":"secondaryTextColor",".from-them div:padding":"secondaryPadding",".from-them div:font-size":"secondaryFontSize",".from-them div:box-shadow":"shadow",".from-them a, .from-them a:hover":"linkColor",".from-me a, .from-me a:hover":"linkColorInverted",".welcome-message div:background-color":"secondaryColor",".welcome-message div:color":"secondaryTextColor",".welcome-message div:padding":"secondaryPadding",".welcome-message div:font-size":"secondaryFontSize",".start.message-icons .welcome-message div:font-size":"secondaryFontSize","#chatBoxMainContainer button.option:color":"buttonTextColor","#chatBoxMainContainer button.option:border-color":"buttonBorderColor","#chatBoxMainContainer button.option:background-color":"buttonBackgroundColor","#chatBoxMainContainer button.option:hover:background-color":"buttonHoverBackgroundColor","#chatBoxMainContainer button.option:hover:border-color":"buttonHoverBorderColor","#chatBoxMainContainer button.option:hover:color":"buttonHoverTextColor","#chatBoxMainContainer button.option:font-size":"buttonTextSize","#chatBoxMainContainer button.option:padding":"buttonPadding","#chatBoxMainContainer button.option:width":"buttonWidth","#chatBoxMainContainer button.option:display":"displayQROptions","#chatBoxMainContainer button.option.send:background-color":"submitMultiSelectBackgroundColor","#chatBoxMainContainer button.option.send:border-color":"submitMultiSelectBorderColor","#chatBoxMainContainer button.option.send:color":"submitMultiSelectColor","#chatBoxMainContainer button.option.send:hover:background-color":"submitMultiSelectBackgroundHoverColor","#chatBoxMainContainer button.option.send:hover:color":"submitMultiSelectHoverColor","#chatBoxMainContainer button.option.send:hover:border-color":"submitMultiSelectBorderHoverColor","#chatBoxMainContainer button.option.selected:background-color":"selectedMultiSelectBackgroundColor","#chatBoxMainContainer button.option.selected:border-color":"selectedMultiSelectBorderColor","#chatBoxMainContainer button.option.selected:color":"selectedMultiSelectColor","#chatBoxMainContainer button.option.selected:hover:background-color":"selectedMultiSelectBackgroundHoverColor","#chatBoxMainContainer button.option.selected:hover:color":"selectedMultiSelectHoverColor","#chatBoxMainContainer button.option.selected:hover:border-color":"selectedMultiSelectBorderHoverColor","#chatBoxMainContainer button.option .checkmark:background-color":"checkMarkUnSelectedBackgroundColor","#chatBoxMainContainer button.option .checkmark:border-color":"checkMarkUnSelectedBorderColor","#chatBoxMainContainer button.option.selected .checkmark:background-color":"checkMarkSelectedBackgroundColor","#chatBoxMainContainer button.option.selected .checkmark:border-color":"checkMarkSelectedBorderColor","#chatBoxMainContainer button.option.selected .checkmark::after:border-color":"checkMarkTickColor","#chatBoxMainContainer button.option.primary:background-color":"buttonPrimaryBackgroundColor","#chatBoxMainContainer button.option.primary:color":"buttonPrimaryTextColor","#chatBoxMainContainer button.option.primary:border-color":"buttonPrimaryBorderColor","#chatBoxMainContainer button.option:border-radius":"buttonBorderRadius","#chatBoxMainContainer button.option.primary:hover:background-color":"buttonPrimaryHoverBackgroundColor","#chatBoxMainContainer button.option.primary:hover:color":"buttonPrimaryHoverTextColor","#chatBoxMainContainer button.option.primary:hover:border-color":"buttonPrimaryHoverBorderColor","#chatBoxMainContainer.message-icons.live-chat:padding":"chatBoxMainContainerPadding",".card:background-color":"cardBackgroundColor",".cards .slick-slide:background-color":"cardBackgroundColor",".card:width":"cardWidth",".cards.slick-initialized .slick-slide:width":"cardWidth",".card .card_title:padding":"cardTitlePadding",".card .card_title:font-size":"cardTitleSize",".card .card_title:color":"cardTitleColor",".card .card_title:background-color":"cardTitleBackGroundColor",".card .card_description:padding":"cardDescPadding",".card .card_description:font-size":"cardDescSize",".card .card_description:color":"cardDescColor",".chat-background:background-image":"chatBackground",".container:border-color":"borderColor",".send-input:border-color":"borderColor",".autocomplete-suggestions:bottom":"suggestionBottomHeight",".message-icons .from-them.new .from-icon, .message-icons .welcome-message:background-image":"botIcon",".message-icons .from-them.new .from-icon, .message-icons .welcome-message:background-size":"botIconSize",".message-icons.live-chat .from-them.new .from-icon:background-image":"botIcon",".message-icons.live-chat .from-them.new .from-icon:background-size":"botIconSize",".message-icons.live-chat .card-ele.carousel.new .from-icon:background-image":"botIcon",".message-icons.live-chat .card-ele.carousel.new .from-icon:background-size":"botIconSize",".message-icons .card-ele.carousel.new .from-icon:background-image":"botIcon",".message-icons .card-ele.carousel.new .from-icon:background-size":"botIconSize",".quick-reply.from-them:background-color":"quickBackgroundColor",".quick-reply.from-them:padding":"quickPadding",".quick-reply.from-them:font-size":"quickTextSize",".quick-reply.from-them:color":"quickTextColor",".resizable-container:max-width":"maxBannerWidth",".card .premium_grid:background-color":"insuranceCardPremiumBackground",".card .premium_grid:color":"insuranceCardPremiumTextColor",".card .insurance_title:background-color":"insuranceCardTitleBackground",".card .insurance_title:color":"insuranceCardTitleTextColor",".card .slider::-webkit-slider-thumb:background":"sliderCircleColor",".card .slider::-moz-range-thumb:background":"sliderCircleColor",".promotion:background-color":"promotionBackground",".promotion:color":"promotionTextColor",".promotion.buttons button:background":"promotionButtonBackgroundColor",".promotion.buttons button:color":"promotionButtonTextColor",".promotion.buttons button:border-color":"promotionButtonBorderColor",".promo-carousel:background-color":"promotionBackground",".offers-section:background-color":"offersSectionBackground",".offers-section:color":"offersSectionTextColor",".offers-section-buttons.buttons:background":"offersSectionButtonBackgroundColor",".offers-section-buttons.buttons:color":"offersSectionButtonTextColor",".offers-section-buttons.buttons:border-color":"offersSectionButtonBorderColor",".offers-section-carousel:background-color":"offersSectionBackground",".offers-section-carousel .prev-arrow:color":"offersSectionArrowColor",".offers-section-carousel .next-arrow:color":"offersSectionArrowColor",".cards .dropdown .custom-dropdown-options:background-color":"cardsDropdownListBackground",".cards .dropdown .custom-dropdown-options:color":"cardsDropdownListColor",".typingDiv .dot:background-color":"typingDotColor","#agentsThumbsUpDown":"titleTextColor",".cards .slick-next:right":"slickCardRightArrowPosition"},a={".rating > label":["color"],".cards .slick-next":["background-color","right"],".cards .slick-prev":["background-color"],".timestamp-user":["color","font-size"],".timestamp-bot":["color","font-size"],".input-actions i":["color"],".home-button i":["color"],"#chatBoxMainContainer":["overflow"],".from-them a, .from-them a:hover":["color"],".from-me a, .from-me a:hover":["color"],"#chatDetails":["background-color","color","font-size"],".typingDiv .dot":["background-color"],"#chatDetails .sub-title":["color","font-size"],".from-me div":["background-color","color","padding","font-size","box-shadow","border-color","border-radius","line-height"],".from-them div":["background-color","color","padding","font-size","border-color","border-radius","line-height","text-align"],".from-me.first div":["border-top-right-radius"],".from-them.first div":["border-top-left-radius"],".start.message-icons .welcome-message div":["font-size"],".welcome-message div":["background-color","color","padding","font-size"],".chat-background":["background-image","opacity"],"#chatBoxMainContainer button.option":["color","border-color","background-color","font-size","padding","width","border-radius","display"],"#chatBoxMainContainer button.option:hover":["background-color","color","border-color"],"#chatBoxMainContainer button.option.primary":["background-color","color","border-color"],"#chatBoxMainContainer button.option.primary:hover":["background-color","color","border-color"],"#chatBoxMainContainer.message-icons.live-chat":["padding"],".message-icons .from-them.new .from-icon":["background-image","background-size"],".message-icons.live-chat .from-them.new .from-icon":["background-image","background-size"],".message-icons.live-chat .card-ele.carousel.new .from-icon":["background-image","background-size"],".message-icons .card-ele.carousel.new .from-icon":["background-image","background-size"],".quick-reply.from-them":["background-color","quickTextSize","quickPadding","quickTextSize","quickTextColor"],".card .card_title":["padding","font-size","color","background-color"],".card .card_description":["padding","font-size","color"],".card":["background-color","width"],".cards .slick-slide":["background-color"],".resizable-container":["max-width"],".cards.slick-initialized .slick-slide":["width"],".send-button i":["color"],".mic-button i":["color"],".card .premium_grid":["background-color","color"],".card .insurance_title":["background-color","color"],".card .slider::-webkit-slider-thumb":["background"],".card .slider::-moz-range-thumb":["background"],".email-btn.send":["background","color"],".promotion":["background-color","color"],".promotion.buttons button":["background","color","border-color"],".promo-carousel":["background-color"],".offers-section":["background-color","color"],".offers-section-buttons.buttons":["background","color","border-color"],".offers-section-carousel":["background-color"],".offers-section-carousel .next-arrow":["color"],".offers-section-carousel .prev-arrow":["color"],".cards .dropdown .custom-dropdown-options":["background-color","color"],"#chatBoxMainContainer button.option.send":["background-color","color","border-color"],"#chatBoxMainContainer button.option.send:hover":["background-color","color","border-color"],"#chatBoxMainContainer button.option.selected":["background-color","color","border-color"],"#chatBoxMainContainer button.option.selected:hover":["background-color","color","border-color"],"#chatBoxMainContainer button.option .checkmark":["background-color","border-color"],"#chatBoxMainContainer button.option.selected .checkmark":["background-color","border-color"],"#chatBoxMainContainer button.option.selected .checkmark::after":["background-color","border-color"]};if(t.skin&&t.skin.primaryFontSize&&parseInt(t.skin.primaryFontSize)<14&&(t.skin.primaryFontSize="14px"),t.skin&&t.skin.secondaryFontSize&&parseInt(t.skin.secondaryFontSize)<14&&(t.skin.secondaryFontSize="14px"),window.ymConfig.banner){if(a[".container"]=["border-color"],a[".send-input"]=["border-color"],t.skin.borderColor&&(e(".container").css({"border-color":t.skin.borderColor,"border-width":"1px"}),e(".send-input").css({"border-color":t.skin.borderColor,"border-width":"1px"})),t.skin&&t.skin.noScroll&&screen.width>768&&e("#chatBoxMainContainer").css("overflowY","hidden"),t.skin&&t.skin.oneMessage&&screen.width>768&&e("#chatBoxMainContainer").addClass("single-message"),t.skin&&t.skin.bubbleType&&e(".welcome-message").addClass(t.skin.bubbleType),t.skin&&t.skin.chatVideoBackground)try{var s=document.createElement("script");s.src="https://www.youtube.com/iframe_api";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(s,r)}catch(e){}t.skin&&t.skin.topBarMobile&&screen.width<=768&&(e("#chatBoxMainContainer").addClass("title"),e("#chatDetails").removeClass("hide"))}if(t.skin&&t.skin.additionalBots&&t.skin.additionalBots.bots&&t.skin.additionalBots.bots.length>0&&0===e(".choose-bot-container .bots a").length){try{window.parent.postMessage(JSON.stringify({event_code:"name-received",data:t.skin.additionalBots.title}),"*"),e("#chatDetails .title").html(t.escapeHtml(t.skin.additionalBots.title)),window.parent.postMessage(JSON.stringify({event_code:"message-received",data:t.processTextMessage(t.skin.additionalBots.description)}),"*")}catch(e){}t.skin.titleBackgroundColor,e(".choose-bot").html(t.escapeHtml(t.skin.additionalBots.message)),e(".choose-bot-container").removeClass("hide"),e(".choose-bot-container .bots").append('<a href="javascript:window.chat.closeChangeBot()">'+t.escapeHtml(t.mapping.botTitle||t.mapping.botName)+"</a>"),e(t.skin.additionalBots.bots).each((function(t,n){e(".choose-bot-container .bots").append("<a href=\"javascript:window.chat.changeBot('"+n.botId+"')\">"+n.description+"</a>")}))}if(t.skin&&t.skin.customScriptVersion&&!i&&window.parent.postMessage(JSON.stringify({event_code:"load-custom-js",data:{js:t.skin.customScriptVersion}}),"*"),t.skin&&t.skin.removeBottomNavBar&&!i&&(fe-=35,me(),a[".autocomplete-suggestions"]=["bottom"],t.skin.suggestionBottomHeight=e("#ymChatForm").height()+2,e(".input-actions").hide(),e(".send-input").css("height","auto"),t.skin.hideHomeButton||(e(".home-button").show(),e("#ymMsgInput").css("padding-left","35px"))),t.disableUserInput(),t.skin&&t.skin.onlyTitle&&(e("#chatDetails .sub-title").hide(),t.skin.secondaryIcon?e(".title").addClass("onlyTitleWithSecondaryIcon"):e(".title").addClass("onlyTitle")),t.skin&&t.skin.showDotStatus&&e("#chatDetails .status-dot").removeClass("hide"),t.skin&&t.skin.hideMic&&e(".fa-microphone").hide(),(t.skin&&t.skin.hideTitlebar||window.ymConfig.hideTitleBar)&&!i&&(fe-=e("#chatDetails").innerHeight(),me(),e("#chatDetails").addClass("hide"),e("#chatContainer .additional-info-overlay").css("height","100%")),t.skin&&t.skin.alertSound&&e("#alert").attr("src",t.skin.alertSound),t.skin&&t.skin.hideHomeButton&&e(".fa-home").hide(),t.skin&&t.skin.secondaryIcon&&e("<img src='"+t.skin.secondaryIcon+"' class='secondary'/>").insertAfter("#chatDetails .sub-title"),!window.ymConfig.init_message||i||window.init_message_sent||(window.init_message_sent=!0,t.send(window.ymConfig.init_message,!0)),e("#chatBoxMainContainer").addClass("message-icons live-chat"),t.skin&&t.skin.hideMic&&(e(".mic-button").hide(),e(".language-button").hide()),t.skin&&t.skin.disableBotPersona&&(e("#chatDetails img.icon").remove(),t.skin.chatBoxMainContainerPadding="10px 20px 30px 20px"),t.skin&&!t.skin.showLanguageButton&&e(".language-button").hide(),t.skin&&t.skin.alertForSpeechRecognition&&!i&&(ae=!0),t.skin&&t.skin.voiceType&&!i&&(window.voiceType=t.skin.voiceType,"microsoftVoice"===window.voiceType?n.e(14).then(n.t.bind(null,45,7)).then((function(){var e;oe=!0,e=function(e){SpeechSDK=e},window.SpeechSDK&&e(window.SpeechSDK)})).catch((function(e){console.log(e,"failed to load bundle"),oe=!1})):oe=!1),"none"!==e(".mic-button").css("display")||i||e(".language-button").addClass("moveRight"),t.skin.showLanguageButton&&!i&&e(".send-input input.input").css({paddingRight:"70px"}),t.skin&&t.skin.hideUpload&&(e(".attach").hide(),e(".fa-paperclip").css({right:"5px"})),t.skin&&t.skin.sendButton&&e(".fa-send").show(),t.skin&&t.skin.secondaryIcon&&window.ymConfig&&"compact"===window.ymConfig.view&&(e("#chatDetails").addClass("view-compact-padding"),e("#chatDetails img.secondary").addClass("top-30"),e("#chatDetails img.close-chat").addClass("small-icon"),i||(fe+=30,me()),window.mobileAndTabletCheck()&&e("#chatDetails.full img.secondary").attr("style","right:30px !important;")),t.skin&&t.skin.squareIcon){e("#chatDetails").addClass("square");try{window.parent.postMessage(JSON.stringify({event_code:"square-icon"}),"*")}catch(e){}}t.skin.noBackground&&e(".chat-background").css("background-image","none"),t.skin.chatBackgroundColor&&(t.skin.chatBackground||e(".chat-background").css("background-image","none"),e(".chat-background").css("background-color",t.skin.chatBackgroundColor)),t.skin.botBorderRadius&&(e("#ymFrameHolder",window.parent.document).css("border-radius",t.skin.botBorderRadius),e("#chatContainer").css("border-radius",t.skin.botBorderRadius)),t.skin.titleBackgroundColor&&t.skin.titleBackgroundColorGradient&&e("#chatDetails").css("background-image","linear-gradient(to top right,"+t.skin.titleBackgroundColor+" 10%, "+t.skin.titleBackgroundColorGradient+" 125%)"),t.skin.chatBackgroundGradient1&&t.skin.chatBackgroundGradient2&&t.skin.chatBackgroundGradient3&&(e(".chat-background").css("background-color",t.skin.chatBackgroundGradient1),e(".chat-background").css("background-image","linear-gradient(to top right,"+t.skin.chatBackgroundGradient1+" 10%, "+t.skin.chatBackgroundGradient2+" 65%,"+t.skin.chatBackgroundGradient3+" 125%)")),t.skin&&t.skin.titleBackgroundImage&&e("#chatDetails").css({"background-image":"url("+t.skin.titleBackgroundImage+")","background-repeat":"no-repeat","background-size":"cover"}),t.skin.positive_feedback&&(document.body.style.setProperty("--thumbsUpUrl",""),document.body.style.setProperty("--thumbsUpFullUrl","")),t.skin.negative_feedback&&(document.body.style.setProperty("--thumbsDownUrl",""),document.body.style.setProperty("--thumbsDownFullUrl","")),t.skin&&t.skin.speakFirst&&(fe=280,me());e(document.styleSheets).each((function(n,i){e(i.cssRules).each((function(n,i){i.selectorText&&a[i.selectorText.trim()]?e(a[i.selectorText.trim()]).each((function(e,n){if(o[i.selectorText.trim()+":"+n]&&t.skin[o[i.selectorText.trim()+":"+n]]){var a=t.skin[o[i.selectorText.trim()+":"+n]];switch("buttonWidth"===o[i.selectorText.trim()+":"+n]&&t.skin&&t.skin.autoQuickReplyButtonWidth&&(a=""),"justifyAlignUserMessages"===o[i.selectorText.trim()+":"+n]&&(a="justify"),n){case"box-shadow":a="0 0 3px #ccc !important";case"background-image":a="url("+a+")";case"background-color":"none"===a&&(a="rgba(0,0,0,0)");break;case"overflow":a=!0===a?"hidden !important":"auto !important"}i.style[n]=a}})):i.cssText&&0===i.cssText.trim().indexOf("@font-face")?i.style.fontStyle&&i.style.fontWeight?t.skin&&t.skin.fontBoldItalicUrl&&(i.style.src="url("+t.skin.fontBoldItalicUrl+")"):i.style.fontStyle?t.skin&&t.skin.fontItalicUrl&&(i.style.src="url("+t.skin.fontItalicUrl+")"):i.style.fontWeight?t.skin&&t.skin.fontBoldUrl&&(i.style.src="url("+t.skin.fontBoldUrl+")"):t.skin&&t.skin.fontUrl&&(i.style.src="url("+t.skin.fontUrl+")"):i.cssText&&0===i.cssText.trim().indexOf("#typing")&&t.skin&&t.skin.secondaryBorderRadius?(i.style["border-top-left-radius"]=t.skin.secondaryBorderRadius,i.style["border-top-right-radius"]=t.skin.secondaryBorderRadius,i.style["border-bottom-right-radius"]=t.skin.secondaryBorderRadius,i.style["border-bottom-left-radius"]=t.skin.secondaryBorderRadius):".cards .slick-prev::before, .cards .slick-next::before"===i.selectorText&&t.skin&&t.skin.slideArrowColor?i.style.color=t.skin.slideArrowColor:(".rating > input:checked ~ .starActive, .rating:not(:checked) > .starActive:hover, .rating:not(:checked) > .starActive:hover ~ label"===i.selectorText&&t.skin&&t.skin.ratingSelectColor||".rating > input:checked ~ label"===i.selectorText&&t.skin&&t.skin.ratingSelectColor)&&(i.style.color=t.skin.ratingSelectColor)}))})),t.setCustomFont()}catch(e){}else window.ymConfig.hideTitleBar&&!i&&(fe-=e("#chatDetails").innerHeight(),me(),e("#chatDetails").addClass("hide"),e("#chatContainer .additional-info-overlay").css("height","100%"))},this.setCustomFont=function(){var e=t.skin&&t.skin.fontUrl;/(woff|eot|woff2|ttf|svg)$/gi.exec(e)&&e&&new FontFace("Bot Custom Font","url(".concat(e,")"),{}).load().then((function(e){document.fonts.add(e),document.body.style.fontFamily="Bot Custom Font";var t=window.parent.document;t.fonts.add(e);var n=t.querySelector("#ym-notification");n&&(n.style.fontFamily="Bot Custom Font")})).catch((function(e){}))},this.iphoneFix=function(){window.navigator&&window.navigator.userAgent&&-1!==window.navigator.userAgent.toLowerCase().indexOf("iphone")&&t.setSkin(!0)},this.loadWelcomeMessages=function(n,i,o){t.showBotIcon=!0,O=new Date(Date.now()+1e3),t.skin&&t.skin.welcomeMessages&&t.skin.welcomeMessages.length>0&&(t.mapping.welcomeMessages=t.skin.welcomeMessages);var a=e("div.chat-message");if((!n||!(a.length>0||window.ymConfig.init_message)||window.ymConfig.triggerJourneyOnEnableHistory)&&(!window.ymConfig.zendeskId||!window.chat.zendesk.agentConnected)){if(t.mapping.welcomeMessage&&!t.mapping.welcomeMessages&&(t.mapping.welcomeMessages=[],t.mapping.welcomeOptions?t.mapping.welcomeMessages.push({quickReplies:{title:t.mapping.welcomeMessage,options:e(t.mapping.welcomeOptions.options).map((function(e,t){return{title:t.label,text:t.value}})).toArray()},hideInput:t.mapping.welcomeOptions.hideInput}):t.mapping.welcomeMessages.push({message:t.mapping.welcomeMessage})),t.mapping.welcomeMessages)for(var s=function(e){var n=void 0;n=t.mapping.skin?JSON.stringify(u({},t.mapping.welcomeMessages[e],{defaultAutoComplete:t.mapping.skin.defaultAutoComplete,atTheRateAutoComplete:t.mapping.skin.atTheRateAutoComplete})):JSON.stringify(t.mapping.welcomeMessages[e]);try{if(JSON.parse(n).init){Te();var a=setInterval((function(){t.connection.connected?(Se(),t.send({message:JSON.parse(n).init,init:!0},!0),clearInterval(a)):Te()}),100);return{v:void 0}}}catch(e){}window.ymConfig.surveyId&&window.ymConfig.payload?t.receiveMessage(n,!0):(new Date).getTime()-t.lastshowntime.getTime()>t.messageDelay?(Se(),t.storeMessage(n,!1,i),t.receiveMessage(n,void 0,t.skin&&t.skin.additionalBots&&t.skin.additionalBots.bots&&t.skin.additionalBots.bots.length>0,void 0,i,o)):(t.timetoshow+=t.messageDelay,Te(),setTimeout(function(e){t.timetoshow-=t.messageDelay,0===t.timetoshow&&Se(),t.storeMessage(e,!1,i),t.receiveMessage(e,void 0,t.skin&&t.skin.additionalBots&&t.skin.additionalBots.bots&&t.skin.additionalBots.bots.length>0,void 0,i,o)}.bind(null,n),t.timetoshow))},r=0;r<t.mapping.welcomeMessages.length;r++){var c=s(r);if("object"===d(c))return c.v}i||setTimeout((function(){he()}),500),setTimeout((function(){t.showBotIcon=!1}),4e3)}},this.invertColor=function(e,t){if(0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length)throw new Error("Invalid HEX color.");var n=parseInt(e.slice(0,2),16),i=parseInt(e.slice(2,4),16),o=parseInt(e.slice(4,6),16);return t?.299*n+.587*i+.114*o>186?"#1F8CEB":"#FFFFFF":(n=(255-n).toString(16),i=(255-i).toString(16),o=(255-o).toString(16),"#"+padZero(n)+padZero(i)+padZero(o))},this.isVerifiedUser=function(){return!window.ymConfig.ymAuthenticationToken||t.verifiedUser},this.refreshContext=function(n){e.ajax({url:window.ymConfig.host+"/api/plugin/refresh-context",dataType:"json",cache:!1,data:{bot:Y,trigger:window.ymConfig.trigger,uid:i.default.getItem("anon_jid_"+t.storagekey)?i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]:"",triggerJourney:window.ymConfig.triggerJourney,botType:t.mapping&&t.mapping.botType,subscriptionId:t.mapping&&t.mapping.subscriptionId},success:function(e){n&&n(e)},error:function(e){t.log(e,"error in refresh context")}})},this.handleWelcomeMessageLoading=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Se(),window.ymConfig&&window.ymConfig.pwa&&t.loadPromotions(),e&&e(),t.setLanguagesOption(),window.ymConfig.surveyId&&(G=!0,t.mapping.shouldRefreshContext?t.refreshContext((function(){var e=JSON.parse(i.default.getItem("survey_completed_"+Y))||{};e[i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]]=!1,i.default.setItem("survey_completed_"+Y,JSON.stringify(e)),t.skin.disableTextInput=!1,xe(),t.loadSurveyResponses(n)})):t.loadSurveyResponses(n)),t.mapping.skin&&!t.mapping.skin.refreshContext&&window.ymConfig.ymAuthenticationToken&&window.chat.send({event:{code:"fetchOldConversation",offset:t.oldConversationOffset}},!0),!G&&window.ymConfig.ymAuthenticationToken&&t.mapping.skin&&t.mapping.skin.refreshContext&&t.loadWelcomeMessages(!0,!0),G||window.ymConfig.ymAuthenticationToken||(t.loadMessages(),G=!0,window.ymConfig.uid?setTimeout((function(){t.loadWelcomeMessages(!0,!0)}),1e3):t.loadWelcomeMessages(!0,!0)),a("Bot Load","Bot Load",1)},this.fastFetchMapping=function(e){if(t.out("Time took to connect "+((new Date).getTime()-x.getTime())),Q)return 0;if(window.chat&&window.chat.jid&&window.ymConfig.ymAuthenticationToken&&!t.verifiedUser&&window.chat.send({event:{code:"authenticate",payload:window.ymConfig.ymAuthenticationToken}},!0),t.ticketRunning&&!window.ymConfig.surveyId)return t.handleWelcomeMessageLoading(),void t.hideTyping();if(t.isVerifiedUser()){var n={bot:Y,uid:(window.chat&&window.chat.jid||i.default.getItem("anon_jid_"+t.storagekey)).split("@")[0],device:screen.width>768?"desktop":"mobile",ua:navigator.userAgent,trigger:window.ymConfig.trigger,source:Z,loadEverywhere:!1};window.ymConfig.userToken&&(n.userToken=window.ymConfig.userToken),window.ymConfig.name&&(n.name=window.ymConfig.name),window.ymConfig.userId&&(n.userId=window.ymConfig.userId),window.ymConfig.payload&&("string"!=typeof window.ymConfig.payload&&(window.ymConfig.payload=JSON.stringify(window.ymConfig.payload)),n.payload=window.ymConfig.payload),window.ymConfig.cookies&&(n.payload||(n.payload={}),"string"!=typeof n.payload&&(n.payload.cookies=window.ymConfig.cookies)),window.ymConfig.utm_source&&(n.utm_source=window.ymConfig.utm_source),window.ymConfig.utm_campaign&&(n.utm_campaign=window.ymConfig.utm_campaign),window.ymConfig.utm_medium&&(n.utm_medium=window.ymConfig.utm_medium),window.ymConfig.utm_term&&(n.utm_term=window.ymConfig.utm_term),window.ymConfig.utm_content&&(n.utm_content=window.ymConfig.utm_content),window.ymConfig.url&&(n.url=window.ymConfig.url),window.ymConfig.ymAuthenticationToken&&(n.ymAuthenticationToken=window.ymConfig.ymAuthenticationToken),window.ymConfig.deviceToken&&(n.deviceToken=window.ymConfig.deviceToken),window.ymConfig.loadEverywhere&&(n.loadEverywhere=window.ymConfig.loadEverywhere),t.updateUserAndFetchMessage(n,e)}},this.updateUserAndFetchMessage=function(n,o,a){var s=window.ymConfig.defaultLanguage;e.ajax({type:"POST",url:"".concat(window.ymConfig.host,"/api/plugin/update-user-info").concat(s?"?defaultLanguage=".concat(s):""),cache:!1,data:JSON.stringify(u({},n,{bot:window.ymConfig.trigger||Y,trigger:window.ymConfig.trigger,uid:i.default.getItem("anon_jid_"+t.storagekey)?i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]:"",uat:window.uat,triggerJourney:window.ymConfig.triggerJourney,referrer:Y,surveyForMapping:window.ymConfig.surveyId,payload:window.ymConfig.payload?window.ymConfig.payload:void 0,utm_campaign:window.ymConfig.utm_campaign,utm_medium:window.ymConfig.utm_medium,pageUrl:window.ymConfig.parentOrigin||window.parent.location.href.split("?")[0],shouldRefreshContext:a||t.mapping.skin&&t.mapping.skin.refreshContext&&!1===t.ticketRunning&&!window.ymConfig.surveyId&&!t.lazyLoad,botType:t.mapping&&t.mapping.botType,subscriptionId:t.mapping&&t.mapping.subscriptionId,source:Z,subSource:K,loadEverywhere:window.ymConfig.loadEverywhere||!1})),json:!0,headers:{"Content-Type":"application/json"},success:function(e){e&&e.data&&(t.mapping=e.data,!1!==e.success&&(Q=!0,t.mapping.skin&&(t.skin=t.mapping.skin),a?t.loadWelcomeMessages(void 0,!0):t.handleWelcomeMessageLoading(o,e.data.surveyCompletion)))}})},this.fetchMapping=function(n){if(setTimeout((function(){t.sendOfflineMessages()}),500),t.out("Time took to connect "+((new Date).getTime()-x.getTime())),V&&Q)return 0;if(t.returningUser&&!t.preferencesLoaded&&(t.preferencesLoaded=!0,e.ajax({type:"GET",cache:!1,url:window.ymConfig.host+"/api/plugin/public-preferences?bot="+(window.ymConfig.trigger||Y)+"&uid="+i.default.getItem("anon_jid_"+t.storagekey).split("@")[0],success:function(n){n.data&&n.data.target_language&&(t.language=n.data.target_language.toUpperCase(),t.skin&&t.skin.refreshContext&&!1===t.ticketRunning&&e("div.chat-message").remove(),window.ymConfig.ymAuthenticationToken||t.loadWelcomeMessages(!0,!0))}})),window.chat&&window.chat.jid&&window.ymConfig.ymAuthenticationToken&&!t.verifiedUser&&window.chat.send({event:{code:"authenticate",payload:window.ymConfig.ymAuthenticationToken}},!0),window.chat&&window.chat.jid||t.connection||!t.lazyLoad||(t.jid=i.default.getItem("anon_jid_"+t.storagekey)||k(void 0,{},Y),i.default.setItem("anon_jid_"+t.storagekey,t.jid)),(window.chat&&window.chat.jid||i.default.getItem("anon_jid_"+t.storagekey))&&V&&t.isVerifiedUser()){var o=function(){G&&t.lazyLoad?Q=!0:e.ajax({url:window.ymConfig.host+"/api/plugin/mapping",cache:!1,data:u({bot:window.ymConfig.trigger||Y,trigger:window.ymConfig.trigger,uid:i.default.getItem("anon_jid_"+t.storagekey)?i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]:"",uat:window.uat,triggerJourney:window.ymConfig.triggerJourney,referrer:Y,surveyId:window.ymConfig.surveyId,surveyForMapping:window.ymConfig.surveyId,payload:window.ymConfig.payload?window.ymConfig.payload:void 0,utm_campaign:window.ymConfig.utm_campaign,utm_medium:window.ymConfig.utm_medium,pageUrl:window.ymConfig.parentOrigin||window.parent.location.href.split("?")[0]},window.ymConfig.defaultLanguage&&{defaultLanguage:window.ymConfig.defaultLanguage},{source:Z,subSource:K,loadEverywhere:window.ymConfig.loadEverywhere||!1}),dataType:"json",timeout:1e4,success:function(e){e&&e.data&&(t.mapping=e.data,!1!==e.success?(Q=!0,t.handleWelcomeMessageLoading(n,e.data.surveyCompletion)):t.disableUserInput(!0))}})},a={bot:Y,uid:(window.chat&&window.chat.jid||i.default.getItem("anon_jid_"+t.storagekey)).split("@")[0],device:screen.width>768?"desktop":"mobile",ua:navigator.userAgent,trigger:window.ymConfig.trigger,source:Z};window.ymConfig.userToken&&(a.userToken=window.ymConfig.userToken),window.ymConfig.name&&(a.name=window.ymConfig.name),window.ymConfig.userId&&(a.userId=window.ymConfig.userId),window.ymConfig.payload&&("string"!=typeof window.ymConfig.payload&&(window.ymConfig.payload=JSON.stringify(window.ymConfig.payload)),a.payload=window.ymConfig.payload),window.ymConfig.cookies&&(a.payload||(a.payload={}),"string"!=typeof a.payload&&(a.payload.cookies=window.ymConfig.cookies)),window.ymConfig.utm_source&&(a.utm_source=window.ymConfig.utm_source),window.ymConfig.utm_campaign&&(a.utm_campaign=window.ymConfig.utm_campaign),window.ymConfig.utm_medium&&(a.utm_medium=window.ymConfig.utm_medium),window.ymConfig.utm_term&&(a.utm_term=window.ymConfig.utm_term),window.ymConfig.utm_content&&(a.utm_content=window.ymConfig.utm_content),window.ymConfig.url&&(a.url=window.ymConfig.url),window.ymConfig.ymAuthenticationToken&&(a.ymAuthenticationToken=window.ymConfig.ymAuthenticationToken),window.ymConfig.deviceToken&&(a.deviceToken=window.ymConfig.deviceToken),e.ajax({type:"POST",url:window.ymConfig.host+"/api/plugin/details",cache:!1,data:JSON.stringify(a),json:!0,headers:{"Content-Type":"application/json"},success:function(){i.default.getItem("anon_jid_"+t.storagekey)&&(t.mapping.skin&&t.mapping.skin.refreshContext&&!1===t.ticketRunning&&!window.ymConfig.surveyId&&!t.lazyLoad?t.refreshContext(o):o()),t.loadOtherResources()}})}else if(!V){if(window.ymConfig.mapping)return V=!0,t.mapping=window.ymConfig.mapping,t.setMapping(n);var s=window.ymConfig.linkType||"web",r="".concat(window.ymConfig.host,"/api/plugin/mapping");e.ajax({url:r,dataType:"json",cache:!1,data:u({bot:window.ymConfig.trigger||Y,onlyMapping:!0},window.ymConfig.surveyId&&{surveyForMapping:window.ymConfig.surveyId},{linkType:s,uid:i.default.getItem("anon_jid_"+t.storagekey)?i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]:"",payload:window.ymConfig.payload?window.ymConfig.payload:void 0,utm_campaign:window.ymConfig.utm_campaign,utm_medium:window.ymConfig.utm_medium,uat:window.uat,pageUrl:window.ymConfig.parentOrigin||window.parent.location.href.split("?")[0]},window.ymConfig.defaultLanguage&&{defaultLanguage:window.ymConfig.defaultLanguage},{loadEverywhere:window.ymConfig.loadEverywhere||!1}),timeout:1e4,success:function(i){if(i.success)V=!0,i&&i.data&&(t.mapping=i.data,t.setMapping(n));else if(window.ymConfig.pwa){var o=e('<img style="width:240px" src='.concat("https://cdn.yellowmessenger.com/files/images/bot-error.png"," />")),a=e("<h1>Incorrect Bot Id</h1>"),s=e('<div style="text-align: center"></div>');s.append(o),s.append(a),e("body",window.parent.document).append(s)}else console.log("Bot id is not valid")}})}},this.setMapping=function(n){if(t.skin=t.mapping.skin,Te(),t.mapping.turnOff||$||($=!0,t.createUi(),t.messageRateLimit()),!0,(t.mapping.botTitle||t.mapping.botName)&&(e("#chatDetails .title").html(t.escapeHtml(t.mapping.botTitle||t.mapping.botName)),window.parent))try{window.parent.postMessage(JSON.stringify({event_code:"name-received",data:t.escapeHtml(t.mapping.botTitle||t.mapping.botName)}),"*")}catch(e){}if(t.mapping.botType&&"production"!=t.mapping.botType&&-1===["x1537450966079","x1545300697503"].indexOf(t.mapping.userName)&&2689==t.mapping.subscriptionId&&e("#bot-type").html("["+t.mapping.botType+"]"),t.mapping.botDesc&&e("#chatDetails .sub-title").html(t.escapeHtml(t.mapping.botDesc)),t.mapping.skin&&t.mapping.skin.requestForNotificationsOnBotLoad&&t.sendAskNotificationMessage(),t.mapping.botIcon&&e("#chatDetails img.icon").attr("src",t.mapping.botIcon),t.mapping.skins&&window.ymConfig.skin&&t.mapping.skins[window.ymConfig.skin]&&(t.mapping.skin=t.mapping.skins[window.ymConfig.skin]),t.mapping&&t.mapping.skin&&(window.defaultAutoComplete=t.mapping.skin.defaultAutoComplete,window.atTheRateAutoComplete=t.mapping.skin.atTheRateAutoComplete),t.mapping.skin?(t.skin=t.mapping.skin,t.mapping.skin.sendNotifications,t.mapping.botIcon&&(t.skin.botIcon=t.mapping.botIcon)):t.mapping.botIcon&&(t.skin={botIcon:t.mapping.botIcon}),window.parent)try{window.parent.postMessage(JSON.stringify({event_code:"create-ui",data:{skin:t.skin}}),"*")}catch(e){}try{window.parent.document.querySelector(".ym-loading-spinner").style.display="none"}catch(e){console.log("lazyLoading error while setting style")}e("#chatContainer").show(),t.setSkin(),t.iphoneFix(),t.mapping.welcomeMessages&&t.mapping.welcomeMessages.length>0&&!window.ymConfig.triggerJourney&&!window.ymConfig.ymAuthenticationToken&&(t.lazyLoad?t.handleWelcomeMessageLoading():(G=!0,t.loadMessages(),t.loadWelcomeMessages(!0,!0))),n&&n()},this.fetchTicketStatus=function(n){window.chat&&window.chat.jid||i.default.getItem("anon_jid_"+t.storagekey)?e.ajax({url:window.ymConfig.host+"/api/plugin/get_agent_profile_for_unresolved_ticket?bot="+(window.ymConfig.trigger||Y)+"&uid="+i.default.getItem("anon_jid_"+t.storagekey).split("@")[0],cache:!1,dataType:"json",success:function(e){e.success?n(null,e.data):n(null,null)},error:function(){n(null,null)}}):n(null,null)},this.loadBotDetails=function(n){var o=i.default.getItem("anon_jid_"+t.storagekey)?i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]:"",a=window.ymConfig.linkType||"web",s="".concat(window.ymConfig.host,"/api/plugin/bot-load-details");e.ajax({type:"POST",url:s,cache:!1,data:JSON.stringify(u({bot:window.ymConfig.trigger||Y},window.ymConfig.surveyId&&{surveyForMapping:window.ymConfig.surveyId},{linkType:a,uid:o,source:Z,subSource:K,payload:window.ymConfig.payload?window.ymConfig.payload:void 0,utm_campaign:window.ymConfig.utm_campaign,utm_medium:window.ymConfig.utm_medium,uat:window.uat,pageUrl:window.ymConfig.parentOrigin||window.parent.location.href.split("?")[0],botType:t.mapping&&t.mapping.botType,subscriptionId:t.mapping&&t.mapping.subscriptionId,loadEverywhere:window.ymConfig.loadEverywhere||!1})),json:!0,headers:{"Content-Type":"application/json"},success:function(t){if(t.success)n(null,t.data);else if(window.ymConfig.pwa){var i=e('<img style="width:240px" src='.concat("https://cdn.yellowmessenger.com/files/images/bot-error.png"," />")),o=e("<h1>Incorrect Bot Id</h1>"),a=e('<div style="text-align: center"></div>');a.append(i),a.append(o),e("body",window.parent.document).append(a)}else console.log("Bot id is not valid")},error:function(){n(null,null)}})},this.closePromotion=function(){e(".promo-carousel").length>0?(fe-=e(".promo-carousel")[0].scrollHeight,e(".promo-carousel").slideUp("slow",(function(){e(".promo-carousel").remove(),me()}))):e("#promo-message").length>0&&(fe-=e("#promo-message")[0].scrollHeight,e("#promo-message").slideUp("slow",(function(){e("#promo-message").remove(),me()})))},this.promoOffersOnClickHandler=function(n,i,o){if(i.title=n.target.innerText||i.title,i.text=n.target.value||i.text,e(n.target).hasClass("selected"))return e(n.target).removeClass("selected"),t.selectedOptions.splice(t.selectedOptions.indexOf(i),1),t.getSelectedOptionsTitle().trim()||e("#send-multi-select").remove(),e(".floating-input .input").val(t.getSelectedOptionsTitle()),void e("#ymMsgInput").val(t.getSelectedOptionsTitle());if(i.url)window.open(i.url,"_blank"),t.xmppSend({messageType:"#analytics",analyticsData:i.analytics,interactionType:"cards",buttonClick:!0});else if(i.location)navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){return t.sendLocation(e,i.title||i.text)}),(function(){window.chat.send({event:{code:"blocked-location",value:!0}},!0),alert("Your location service is disabled/unavailable")})):(window.chat.send({event:{code:"blocked-location",value:!0}},!0),alert("Your location service is disabled/unavailable"));else if(i.notification)t.sendAskNotificationMessage();else if(i.locationPicker)e(".location-selector").show(),ve();else if(i.post_form){var a=e('<form method="post" action="'+i.post_form.url+'" target="_blank"></form>');for(var s in i.post_form.data)i.post_form.data.hasOwnProperty(s)&&a.append("<input type='hidden' name='"+s+"' value='"+i.post_form.data[s]+"'/>");a.appendTo("body").submit()}else if(o.multiSelect)e(n.target).addClass("selected"),t.selectedOptions.push(i),0===e("#send-multi-select").length&&(chatOptions.append('<button id="send-multi-select" class="option send">Send</button>'),e("#send-multi-select").click((function(){t.send(t.getSelectedOptionsText(),null,t.getSelectedOptionsTitle()),t.selectedOptions=[],e(".floating-input .input").val(""),e("#ymMsgInput").val("")}))),e(".floating-input .input").val(t.getSelectedOptionsTitle()),e("#ymMsgInput").val(t.getSelectedOptionsTitle());else{if(!i.title&&!i.text)return;t.send({message:i.text||i.title,analyticsData:i.analytics,interactionType:"quick-replies",buttonClick:!0},null,i.title)}i.postback&&t.send(i.postback,null,i.title)},this.loadMarkdownScript=function(e){var t=document.getElementById("markdown");if(!t){var n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/marked/marked.min.js",n.id="markdown",document.body.appendChild(n),n.onload=function(){e&&e()}}t&&e&&e()},this.showAdditionalInfo=function(t){e("#chatContainer .additional-info-overlay").remove();var n=e('<div class="additional-info-overlay"></div>'),i=e('<div class="fit-content"></div>'),o=e('<div class="additional-info"></div>'),a=e("<i id='close-info' class='fa fa-times-circle' '></i>");i.html(marked(t.message)),o.prepend(a),o.append(i),n.append(o),e("#chatContainer").append(n),e("#chatContainer .additional-info").css("height","80%"),a.click((function(){e("#chatContainer .additional-info").css("height","0"),e("#chatContainer .additional-info-overlay").css("background","none"),setTimeout((function(){e("#chatContainer .additional-info-overlay").css("height","0")}),500),window.chat.send({event:{code:"bot-additional-info-closed"}},!0)})),e(".additional-info img").click((function(e){window.chat.openImage(e.currentTarget.src)}))},this.showPromotion=function(n){var o=this;try{y=n,e(".promo-carousel").length>0&&(fe-=e(".promo-carousel")[0].scrollHeight,e(".promo-carousel").remove()),e("#promo-message").length>0&&(fe-=e("#promo-message")[0].scrollHeight,e("#promo-message").remove());var s=e("#show-promotion");s&&s.length>0&&s.remove();var r="Message";n.quickReplies&&(r="QuickReplies");var c=n.customFACloseIconClass||"fa fa-times-circle",u=n.customFASlideUpIconClass||"fa fa-angle-double-up",p=n.customFASlideDownIconClass||"fa fa-angle-double-down",g=n.customFALeftArrowClass||"fa fa-chevron-circle-left",f=n.customFARightArrowClass||"fa fa-chevron-circle-right",m=n.cartIconClass||"fa fa-shopping-cart fa-2x";e('<div class="clearfix"></div>');switch(n.hide&&(c="".concat(u," extra-icon-size")),r){case"Message":e("<div id='promo-message'><i id='close-promotion' class='".concat(c,"' style='position: relative; top:5px; right:5px;cursor: pointer;color: #fff; float: right;'></i><div class='promotion'>")+n.message+"</div></div>").insertBefore(".chat-background"),30,30,30;break;case"QuickReplies":70,70,70;var h=Array.isArray(n.quickReplies)?n.quickReplies:[n.quickReplies],w=e('<div class="promo-carousel"></div>');if(n.onlyImages)for(var v=function(t){var n=h[t],i=e('<div class="promo-carousel-ele"></div>'),a=n.image,s=e("<img class='promo-image' src='".concat(a,"'/>"));s.click((function(e){return o.promoOffersOnClickHandler(e,n,n)})),i.append(s),w.append(i)},b=0;b<h.length;b++)v(b);else{var k=function(n){for(var a=h[n],s=e("<div></div>"),r=e('<div class="promo-carousel-ele"></div>'),c=function(n){var r=a.options[n],c=r.text||r.title,l=e("<button value='"+c+"'>"+a.options[n].title+"</button>");l.click((function(e){if(window.chat.zendesk.agentConnected){if("good"===r.text||"bad"===r.text)return void window.zChat.sendChatRating(r.text,(function(e){window.chat.zendesk.userRated=r.text,t.showPromotion(window.chat.zendesk.promotionComment),i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk))}));if("comment"===r.title.toLowerCase()||r.isZendeskComment)return window.chat.storeMessage(JSON.stringify({message:r.text||r.title}),!1,!1),t.receiveMessage(JSON.stringify({message:r.text||r.title})),t.closePromotion(),void(0===window.zChat.getServingAgentsInfo().length?window.chat.zendesk.userCommentClick=!1:window.chat.zendesk.userCommentClick=!Boolean(window.zChat.getChatInfo().comment))}o.promoOffersOnClickHandler(e,r,a)})),s.append(l)},l=0;l<a.options.length;l++)c(l);var d=e("<div class='promotion buttons'><div>"+a.title+"</div></div>");d.append(s),r.append(d),w.append(r)};for(b=0;b<h.length;b++)k(b)}var C=e('<div class="slide-arrow prev-arrow"><i class=\''.concat(g,"'></i></div>")),x=e('<div class="slide-arrow next-arrow"><i class=\''.concat(f,"'></div>")),T=e("<i id='close-promotion' class='promo-carousel-close-button ".concat(c,"' style='float: right; position: ").concat(n.onlyImages?"absolute":"relative","; top:5px'></i>")),S=e("<div class='notification'></div>");if(n.quickReplies.class){var _=e("<i class='".concat(m," cartIconClass'></i>")),M=e("<div class='child ym_animated ym_infinite ym_wobble ym_slow'></div>");M.append(_),M.append(e('<div class="badge"> '.concat(n.quickReplies.quantity," </div>"))),S.append(M)}h.length>1?(w.append(C),w.append(x),w.prepend(T),w.insertBefore(".chat-background"),e(".promo-carousel").slick({slide:".promo-carousel-ele",speed:1e3,rows:0,autoplay:n.autoPlay||!1,autoplaySpeed:Number(n.autoPlaySpeed)||2e3,infinite:!0,prevArrow:C,nextArrow:x})):(n.quickReplies.class?(n.quickReplies.enableCloseButton&&S.prepend(T),w.prepend(S)):w.prepend(T),w.insertBefore(".chat-background"))}if(n.quickReplies)if(n.onlyImages)var I=0,A=setInterval((function(){var n=document.getElementsByClassName("promo-image"),i=[];if(n&&(i=l(n)),i.every((function(e){return void 0!==d(e.naturalWidth)?e.complete&&e.naturalWidth:e.complete}))){clearInterval(A);var o=e(".promo-carousel")[0].scrollHeight;fe+=o,me()}200===++I&&(clearInterval(A),console.error("Failed to load images in promotion"),t.closePromotion())}),100);else fe+=e(".promo-carousel")[0].scrollHeight,me();else fe+=e("#promo-message")[0].scrollHeight,me();e("#close-promotion").click((function(){a("Promotion Close","Promotion Close Click",1);var i=!1,o="";n.quickReplies?o=e(".promo-carousel"):(o=e("#promo-message"),i=!0),fe-=o[0].scrollHeight,o.slideUp("fast").promise().then((function(){var a=o.css("background-color")||"#349FD5";if(i&&(a=e(".promotion").css("background-color")||"#349FD5"),o.remove(),n.hide)if(e("#show-promotion").length>0&&e("#show-promotion").remove(),e("#show-promotion-bar").length>0&&e("#show-promotion-bar").remove(),n.displayShowPromotionBar){e("<div id='promo-message'><i id='show-promotion-bar' class='".concat(p,"'></i><div class='promotion'>").concat(n.showPromotionMessage||"Click here to show promotion...","</div></div>")).insertBefore(".chat-background"),30,30,30,fe+=e("#promo-message")[0].scrollHeight;var s=e("#promo-message");s.css("cursor","pointer"),s.click((function(){t.showPromotion(y)}))}else{var r=e("<div id='show-promotion' style='position:absolute; font-size:30px; cursor:pointer; color:".concat(a,"; float: right;'><i class='fa ").concat(p,"'></i></div>"));r.insertBefore(".chat-background");var c=e("#chatBoxMainContainer").offset().top;c=Number(c)+5,r.css("top","".concat(c,"px")),r.css("right","12px"),e("#show-promotion").click((function(){t.showPromotion(y)}))}me()})),window.chat.send({event:{code:"ym_closed_promotion",data:""}},!0)}))}catch(e){console.log(e.message,"Error while showing promotion")}},this.loadPromotions=function(){t.mapping.promotions&&t.mapping.promotions.length>0?t.showPromotion(t.mapping.promotions[0]):window.promotionQueue&&(t.showPromotion(window.promotionQueue),window.promotionQueue="")},this.closeOffersSection=function(){"block"===e(".offers-section").css("display")&&(fe-=e(".offers-section")[0].scrollHeight,me(),e(".offers-section").remove())},this.showOffersSection=function(n){var i=this;if(t.skin&&t.skin.speakFirst)return console.error("Please disable speak first for showing offers section");"block"===e(".offers-section").css("display")&&(fe-=e(".offers-section")[0].scrollHeight,e(".offers-section").remove()),e("<div class='offers-section'></div>").insertBefore(".send-input-form"),fe+=e(".offers-section")[0].scrollHeight,me();var o=n.customFALeftArrowClass||"fa fa-chevron-circle-left",a=n.customFARightArrowClass||"fa fa-chevron-circle-right",s=e('<div class="offers-section-carousel"></div>'),r=n.quickReplies;if(!r||!Array.isArray(r.options))return console.error("Invalid data for offers section");for(var c=function(t){var n=e('<div class="offers-section-carousel-ele"></div>'),o=r.options[t],a=o.text||o.title,c=e("<button class='offers-section-buttons buttons' value='"+a+"'>"+(o.image?"<img src='"+o.image+"'/>":"")+r.options[t].title+"</button>");c.click((function(e){return i.promoOffersOnClickHandler(e,o,r)})),n.append(c),s.append(n)},l=0;l<r.options.length;l++)c(l);var d=e('<div class="slide-arrow prev-arrow"><i class=\''.concat(o,"'></i></div>")),u=e('<div class="slide-arrow next-arrow"><i class=\''.concat(a,"'></div>"));n.offerImage&&(d=e('<div class="slide-arrow offer-image"><img src=\''.concat(n.offerImage,"'/></div>")),u=e("<div></div>")),s.append(d),s.append(u),e(".offers-section").append(s),e(".offers-section-carousel").slick({slide:".offers-section-carousel-ele",speed:Number(n.speed)||500,rows:0,slidesToShow:1,centerMode:!0,variableWidth:!0,autoplay:n.autoPlay||!1,autoplaySpeed:Number(n.autoPlaySpeed)||3e3,infinite:n.infinite||!1,prevArrow:d,nextArrow:u})},this.getSelectedOptionsText=function(){for(var e="",n=0;n<t.selectedOptions.length;n++)e+=(t.selectedOptions[n].text||t.selectedOptions[n].value||t.selectedOptions[n].title||t.selectedOptions[n].label)+",";return e},this.getSelectedOptionsTitle=function(){for(var e="",n=0;n<t.selectedOptions.length;n++)e+=(t.selectedOptions[n].title||t.selectedOptions[n].label)+", ";return e.substring(0,e.length-2)},this.setLanguagesOption=function(){if("microsoftVoice"===window.voiceType){e(".language-menu").empty();var n=e(".language-menu");window.chat.language="en-IN";var i=t.skin.microsoftSpeechLanguages||[];return R.map((function(e){return-1!==i.indexOf(e.code)&&n.append("<li class=".concat(e.code,">").concat(e.language,"</li>"))}))}var o=e(".language-menu"),a=t.mapping.languages;a&&a.forEach((function(t){var n=e("<li>"+t.name+"</li>");n.addClass(t.code.toUpperCase()),o.append(n)}))},this.shouldLoadLocalMessage=function(){if(window.ymConfig.uid)return!1;if(window.ymConfig.zendeskId&&window.chat.zendesk.agentConnected)return!0;if(t.ticketRunning)return!0;if(!t.skin)return!0;if(window.ymConfig.surveyId)return!t.mapping.shouldRefreshContext;if(window.ymConfig.enableHistory)return!0;if(t.skin&&t.skin.refreshContext)return!1;if(window.ymConfig.ymAuthenticationToken&&P)return!0;if(window.ymConfig.ymAuthenticationToken)return!1;if(t.skin&&!t.skin.refreshContext){if(t.skin.refreshTimeout&&t.skin.refreshTimeout>0){var e=i.default.getItem("conversation_history_"+t.storagekey)||"{}";if(!((e=JSON.parse(e))&&e.length>1))return!1;var n=e[e.length-1].timestamp;if(Math.abs(((new Date).getTime()-new Date(n).getTime())/6e4)>t.skin.refreshTimeout)return!1;e=e.reverse(),E=[];for(var o=0;o<e.length&&(P=!0,E.push(e[o]),!e[o].start);o++);return E=E.reverse(),P}return!0}return!(!t.skin||!1!==t.skin.refreshContext)||void 0},this.loadMessages=function(n){var o=i.default.getItem("conversation_history_"+t.storagekey);t.oldMessageLoaded=!0;var a,s=e("#chatBoxMain").children()[0];if((o||E.length)&&this.shouldLoadLocalMessage()){for(var r=(o=P?E:JSON.parse(o)).length,c=function(e){var i=o[e],a=!1;if(i.you){Ce(),xe();try{if(isNaN(i.message)){var s=JSON.parse(i.message);i.message=s.message,s.image&&(i.image=s.image,a=!0),s.file&&(i.file=s.file,a=!0),s.title&&(i.message=s.title)}}catch(e){}I=!0,t.setUserResponse(i,n,a)}else{i.message;try{var r=JSON.parse(i.message);if(r.event)return"continue";if(r,0===e&&n&&0===t.oldConversationOffset&&r.quickReplies?_=r.quickReplies:!_&&r.quickReplies&&(_=!0),0===e&&n&&0===t.oldConversationOffset?(r.hideInput&&(M=!0),B=!0):B=!1,0===e&&n&&0===t.oldConversationOffset&&r.hideInput&&(M=!0),n&&Array.isArray(r))return r.forEach((function(e){_=!0,t.receiveMessage(JSON.stringify(e),!0,void 0,i.timestamp,void 0,n)})),"continue"}catch(e){}t.receiveMessage(i.message,!0,void 0,i.timestamp,void 0,n)}},l=0;l<r;l++)c(l);e("#chatBoxMainContainer").removeClass("start"),window.ymConfig.ymAuthenticationToken&&0!==t.oldConversationOffset||ye(),n&&window.ymConfig.ymAuthenticationToken&&t.oldConversationOffset>0&&(a=s,e("#chatBoxMainContainer").scrollTo(a,0,{axis:"y"})),setTimeout((function(){ee(),e(".cards").not(".slick-initialized").slick({infinite:!1,variableWidth:!0})}),300)}else window.ymConfig.uid&&window.ymConfig.signature&&e.ajax({url:window.ymConfig.host+"/api/plugin/messages?signature="+window.ymConfig.signature+"&offset="+(t.messageOffset||0)+"&source=yellowmessenger",method:"GET",cache:!1,success:function(e){t.messageOffset||(t.messageOffset=0),t.messageOffset+=50;for(var n=[],o=0;o<e.data.length;o++)n.push({message:e.data[o].reqPayload,you:e.data[o].from!==X,timestamp:e.data[o].time});i.default.setItem("conversation_history_"+t.storagekey,JSON.stringify(n.reverse())),t.loadMessages()}})},this.loadSurveyResponses=function(e){if((!e.surveyComplete&&!e.completedSteps||e.completedSteps&&!e.completedSteps[0].question)&&t.loadWelcomeMessages(!0,!0),e.completedSteps&&(I=!0,e.completedSteps.forEach((function(e,n){e.question&&t.receiveMessage(JSON.stringify({message:e.question}),!0),e.value&&t.setUserResponse({message:e.value})}))),e.currentStep)if(e.currentStep instanceof Array){var n=!0,i=!1,o=void 0;try{for(var a,s=e.currentStep[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var r=a.value;t.receiveMessage(JSON.stringify(r),!0,void 0,(new Date).getTime())}}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}else t.receiveMessage(JSON.stringify(e.currentStep),!0,void 0,(new Date).getTime());if(e.surveyComplete)if(I=!0,t.disableUserInput(!0),e.surveyCompleteMsgs){!e.surveyCompleteMsgs instanceof Array&&(e.surveyCompleteMsgs=[e.surveyCompleteMsgs]);for(var c=0;c<e.surveyCompleteMsgs.length;c++)t.receiveMessage(JSON.stringify({message:e.surveyCompleteMsgs[c]}),!0,void 0,void 0)}else t.receiveMessage(JSON.stringify({message:"You have successfully completed the survey."}),!0,void 0,void 0);t.oldMessageLoaded=!0},this.setUserResponse=function(n,i,o){var a=e("div.chat-message");a.length>0&&e(a[a.length-1]).hasClass("from-me")&&e(a[a.length-1]).removeClass("new");var s=e('<div class = "chat-message message-came from-me new '+(a.length>0&&(e(a[a.length-1]).hasClass("from-me")||e(a[a.length-1]).hasClass("from-me-image"))?"":"first")+'"> </div>');if(o&&(s=e('<div class="chat-message from-me-image"><div clas="uploading-div"><div class="uploading-img-div '.concat(n.file?" hide":"",'"><img class="image-uploaded" src=\'').concat(n.image,'\' alt="Image uploaded"></div>').concat(n.file?"<a href=".concat(n.file,' target="_blank"><i class="fa fa-file-text-o attach"></i></a>'):"","&nbsp;<span>").concat(n.image?"Image":"File"," Uploaded</span></div></div>"))),!o){var r=e("<div></div>");r.text(t.processTextMessage(n.message,!0)),s.append(r)}i?n.timestamp?e("#chatBoxMain").prepend(e('<div class="clearfix"></div>')).prepend(e('<div class="timestamp-user">'+L(new Date(n.timestamp))+"</div>")).prepend(e('<div class="clearfix"></div>')).prepend(s):e("#chatBoxMain").prepend(e('<div class="clearfix"></div>')).prepend(s):n.timestamp?e("#chatBoxMain").append(s).append(e('<div class="clearfix"></div>')).append(e('<div class="timestamp-user">'+L(new Date(n.timestamp))+"</div>")).append(e('<div class="clearfix"></div>')):e("#chatBoxMain").append(s).append(e('<div class="clearfix"></div>'))},this.xmppSend=function(e){if(e=JSON.stringify(e),t.connected){var n=new t.Strophe.Builder("message",{to:Y+"@"+window.ymConfig.xmpp_domain,type:"chat"}).c("body").t(encodeURIComponent(e));t.connection.send(n.tree())}},this.messageRateLimit=function(e){var n=i.default.getItem("anon_jid_"+t.storagekey)?i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]:"";if(n){var o,a="message_count"+n;try{if(!(o=JSON.parse(i.default.getItem(a))))throw new Error("currentRateLimitStats is null")}catch(e){o={messageCount:0,firstMessageTimestampInCurrentWindow:Date.now()}}var s=parseInt(o.messageCount),r=parseInt(o.firstMessageTimestampInCurrentWindow);if(t.out("Rate limit:"+JSON.stringify(o)),Date.now()-r<1e4)if(s<25)s+=1;else{if(b)return;b=!0,t.handleInputError("Please try after sometime."),m({event:"widget-message-rate-limit-reached"}),setTimeout((function(){b=!1,t.handleInputNormal(),i.default.deleteItem(a)}),3e4)}else s=1,r=Date.now();i.default.setItem(a,JSON.stringify({messageCount:s,firstMessageTimestampInCurrentWindow:r}))}},this.handleInputError=function(t){e(".speak-logo").hide(),e(".send-button").removeClass("hide"),e("#ymMsgInput").addClass("input-filter-error"),e("#sendIcon").addClass("failure-button"),e("#sendIcon").addClass("tooltip").attr("title",""),e("<div class='tooltiptext'>".concat(t,"</div>")).appendTo("#sendIcon")},this.handleInputNormal=function(){e("#ymMsgInput").removeClass("input-filter-error"),e("#sendIcon").removeClass("failure-button").attr("title","Send");var t=e(".tooltiptext");t&&t.remove()},this.send=function(n,o,s,r){var c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=arguments.length>5?arguments[5]:void 0,p=arguments.length>6?arguments[6]:void 0;if(n){if(window.ymConfig.zendeskId&&o&&document.hidden&&window.ymConfig.pwa)return console.log("Event Blocked since zendeskId is present, page = hidden; UA = mobile",n);if(o&&null==n.typing||r||l||p||(t.messageRateLimit(n),!b)){window.chat.zendesk.userRatedClicked&&(n=window.chat.zendesk.userRated);var g=!1;if(window.zChat&&window.chat.zendesk.agentConnected&&"string"==typeof n){if(window.chat.zendesk.agentRequestedRating)window.zChat.sendChatRating(n,(function(e){e&&console.log("Error while sending rating")})),xe(),window.chat.zendesk.agentRequestedRating=!1,window.chat.zendesk.userRatedClicked=!1,window.chat.zendesk.userConnectedWithBot=!1;else if(window.chat.zendesk.userConnectedWithBot){window.chat.zendesk.userRatedClicked?g=window.chat.zendesk.userRated:(window.chat.zendesk.userCommented=!0,g=n),window.chat.zendesk.userRatedClicked=!1;var f={event:{code:"zendesk_user_message",data:{rated:window.chat.zendesk.userRated,commented:window.chat.zendesk.userCommented,message:n}}};t.storeMessage(JSON.stringify({message:n,timestamp:new Date}),!0),o=!0,n=f}else window.chat.zendesk.userCommentClick?(window.chat.zendesk.userCommentClick=!1,window.zChat.sendChatComment(n,(function(e){e?console.log("zendesk error",e):window.chat.zendesk.userCommented=n}))):window.zChat.sendChatMsg(n,(function(e){e&&console.log("zendesk error",e)}));i.default.setItem("".concat(window.ymConfig.bot,"_zendesk_details"),JSON.stringify(window.chat.zendesk))}_=!1,(window.stepAutoComplete||window.defaultAutoComplete||window.atTheRateAutoComplete)&&!o&&(e(".autocomplete-suggestions").attr("style","display:none;"),a("Auto Complete Click","Message: "+n,1)),t.selectedOptions=[],t.skin&&t.skin.oneMessage&&screen.width>768&&(e("#chatBoxMain").html(""),e(".welcome-message").addClass("hide")),e("#chatBoxMainContainer").removeClass("start"),t.skin&&t.skin.blurBackground&&e(".chat-background").addClass("blur"),t.skin&&t.skin.speak&&!o&&this.clearAudio(),"object"===d(n)?(n.source=Z,n.subSource=K):("string"!=typeof n&&(n=n.toString()),n={message:n,source:Z,subSource:K}),(n.message||n.location)&&(n.messageId=n.messageId||(new Date).getTime(),n.pageUrl=window.ymConfig.parentOrigin||window.parent.location.href.split("?")[0]),I||o||(n.welcomeMessage={message:t.mapping.welcomeMessages||[],count:A,latestCreated:O},I=!0,A=0),n.sync=window.ymConfig.ymAuthenticationToken&&c&&!o,s&&(n.richMessage={text:n.message,title:s}),n.isSensitiveInfo=t.isSensitiveInfo;var m=JSON.stringify(n);if(t.connected&&!r&&(!window.chat.zendesk.agentConnected||n.event&&0===n.event.code.indexOf("zendesk"))){var h=new t.Strophe.Builder("message",{to:Y+"@"+window.ymConfig.xmpp_domain,type:"chat"}).c("body").t(encodeURIComponent(m));if(t.connection.send(h.tree()),l)return}if(t.connection&&t.connected||p||t.connectedOnce||(0===t.messageQueueUntilConnection.length&&t.init(),t.connectedOnce&&!o||t.messageQueueUntilConnection.push({message:JSON.parse(m),isEvent:o,title:s,doNotSend:r,sync:c})),!o||g){if(Ce(),g&&(n.message=g),s&&(n.message=s),t.isSensitiveInfo&&(n.message="Sensitive Information"),t.storeMessage(JSON.stringify(u({},n,{timestamp:new Date})),!0),t.createUserMessageDiv(n),r||window.chat.zendesk.agentConnected){var w=e(".".concat(n.messageId,".fa-clock-o"));return w.removeClass("fa-clock-o"),w.removeClass("fa-spin"),void w.addClass("fa-check")}setTimeout((function(n){var i=e(".".concat(n,".fa-clock-o"));i.length&&(i.removeClass("fa-clock-o"),i.removeClass("fa-spin"),i.addClass("fa-repeat"),i.css({cursor:"pointer"}),i.on("click",(function(n){var i=n.target.id,o=e("#msg".concat(i)).text();e("#msg".concat(i)).parent().remove(),e("#".concat(i)).parent().remove(),t.send(o,null,null,null,null,null,!0)})))}),5e3,n.messageId)}}}},this.createUserMessageDiv=function(n){try{if(JSON.parse(n.message).event)return}catch(e){}var i=L(),o=e("div.chat-message"),a=e("div.timestamp-user"),s=JSON.stringify(n);o.length>0&&e(o[o.length-1]).hasClass("from-me")&&(e(o[o.length-1]).removeClass("new"),a.length>0&&e(a[a.length-1]).find("i").hasClass("fa-check")&&e(a[a.length-1]).addClass("hidden"));var r=e('<div class = "chat-message from-me message-came new '+(o.length>0&&(e(o[o.length-1]).hasClass("from-me")||e(o[o.length-1]).hasClass("from-me-image"))?"":"first")+'"> </div>');r.addClass(n.messageId);var c=e('<div id="msg'+n.messageId+'">');c.text(t.processTextMessage(n.message?n.message:s,!0)),r.append(c);var l=e('<div class="clearfix"></div>'),d=n.ack?"fa-check ":"fa-clock-o fa-spin ";e("#chatBoxMain").append(r).append(l).append(e('<div class="timestamp-user ">'+i+'<i id="'+n.messageId+'" class="fa fa-fw '+d+n.messageId+'" style="font-size: 12px"></i></div>')),he()},this.sendOfflineMessages=function(){var e=i.default.getItem("offline_"+t.storagekey);if(e&&t.connected){e=JSON.parse(e);for(var n=0;n<e.length;n++){var o=new t.Strophe.Builder("message",{to:Y+"@"+window.ymConfig.xmpp_domain,type:"chat"}).c("body").t(e[n]);t.connection.send(o.tree())}i.default.setItem("offline_"+t.storagekey,JSON.stringify([]))}},this.storeOfflineMessage=function(e){var n=i.default.getItem("offline_"+t.storagekey);(n=n?JSON.parse(n):[]).push(e),n=n.splice(-200),i.default.setItem("offline_"+t.storagekey,JSON.stringify(n))},this.escapeHtml=function(t){var n=e("<div>").text(t).html().replace(/&lt;strong&gt;/g,"<strong>").replace(/&lt;\/strong&gt;/g,"</strong>").replace(/&lt;br \/&gt;/g,"<br/>").replace(/&lt;br\/&gt;/g,"<br/>").replace(/&lt;i&gt;/g,"<i>").replace(/&lt;\/i&gt;/g,"</i>").replace(/&lt;u&gt;/g,"<u>").replace(/&lt;\/u&gt;/g,"</u>").replace(/&lt;mark&gt;/g,"<mark>").replace(/&lt;\/mark&gt;/g,"</mark>"),i=n.match(/&lt;a.*?&lt;\/a&gt;/gm);return i&&i.forEach((function(e){var t=e.replace(/&lt;/g,"<").replace(/&gt;/g,">");n=n.replace(e,t)})),n},this.sendLocation=function(e,n){t.send({location:{lat:e.coords.latitude,lng:e.coords.longitude}},null,n)},this.sendAskNotificationMessage=function(){window.parent&&window.parent.postMessage(JSON.stringify({event_code:"ask-notification",data:""}),"*")},this.processTextMessage=function(e,n){if(!e)return"";try{var i=JSON.parse(e);i.message&&(e=i.message)}catch(e){}"string"!=typeof e&&(e=e.toString());var o=e.split("::"),a=(e=o[parseInt(1e3*Math.random())%o.length]).match(/\{\{(.*?)\}\}/g);if(a&&a.length>0)for(var s={"profile.name":window.ymConfig.name},c=0;c<a.length;c++){var l=s[a[c].replace("{{","").replace("}}","").trim()];l||(l=""),e=e.replace(a[c],l)}var d=t.escapeHtml(e).replace(/\\n/g,"<br/>").replace(/\n/g,"<br/>").replace(/&lt;em&gt;/g,"<em>").replace(/&lt;\/em&gt;/g,"</em>").replace(/&nbsp;/g," ");return n&&(e=e.replace(/<strong>|<\/strong>|<em>|<\/em>|<br>|<\/br>/gi,"")),n?e:r.default.link(d)},this.addBotMessageDiv=function(n,i,o){if(t.targetLanguage&&("ar"===t.targetLanguage.toLowerCase()||"ur"===t.targetLanguage.toLowerCase()))if(n&&n.hasClass("card-ele")){var a=n.find(".card_details");a&&a.addClass("right-align-messages");var s=n.find(".card_title");s&&s.addClass("right-align-messages");var r=n.find(".card_description");r&&r.addClass("right-align-messages")}else n&&n.children()&&n.children().each((function(){"DIV"===this.tagName&&e(this).addClass("right-align-messages")}));if(!o){var c=e("#chatBoxMain").append(n).append(e('<div class="clearfix"></div>'));return i&&c.append('<div class="timestamp-bot">'+i+"</div>"),c}e("#chatBoxMain").prepend('<div class="timestamp-bot">'+i||!1).prepend(e('<div class="clearfix"></div>')).prepend(n)},this.addMessageElement=function(o,s,r,c){var l=e("div.chat-message"),d=void 0;o.locale&&t.language&&o.locale[t.language.toLowerCase()]&&(o=o.locale[t.language.toLowerCase()]),o.message&&(d="Message"),o.quickReplies&&(d="QuickReplies"),o.flightDetails&&(d="FlightDetails"),o.boardingPasses&&(d="BoardingPasses"),o.cards&&(d="Cards"),o.webView&&(d="WebView"),o.webViews&&(d="WebViews"),o.image&&(d="Image"),o.file&&(d="File"),o.type&&(d=o.type),o.googleTracker&&(d="GoogleTracker"),o.notification&&"electron"===Z&&(d="Notification"),o.rating&&(d="Rating");var u=L(r?new Date(r):void 0);if(d){switch(d){case"Message":var p=e('<div class = "chat-message message-came from-them bot-message '+(t.skin&&t.skin.bubbleType?t.skin.bubbleType:"")+" new "+(l.length>0&&e(l[l.length-1]).hasClass("from-them")&&!e(l[l.length-1]).hasClass("carousel")?"":"first")+'"> </div>');p.append('<span class="from-icon"></span');var m=400;m=!window.ymConfig.pwa&&!window.ymConfig.lite||window.mobileAndTabletCheck()?m:4*m;var h=6;if(h=!window.ymConfig.pwa&&!window.ymConfig.lite||window.mobileAndTabletCheck()?h:2*h,o.isMarkdown){var w=e('<div class="markdown"></div>');t.loadMarkdownScript((function(){w.html(marked(o.message))})),p.append(w)}else t.skin&&t.skin.enableReadMore&&o.message.length>m?function(){for(var n="",i="",a="",s=!1,r=0,c=["<a","<strong","<mark"],l=["/a>","/strong>","/mark>"],d=0,u=o.message.length,g=0;g<u;g++)if(" "===o.message[g]){if(c.forEach((function(e){-1!==a.indexOf(e)&&r++})),l.forEach((function(e){-1!==a.indexOf(e)&&r--})),-1!==a.indexOf("\n")&&++d>h&&0===r){var f=a.indexOf("\n");n+=a.substring(0,f),i=a.substring(f)+" ",i+=o.message.substring(g),s=!0;break}if(n+=a+" ",a="",g>m&&0===r){s=!0,i=o.message.substring(g);break}}else a+=o.message[g];s||(n+=a);var w=e("<div>"+t.processTextMessage(n)+"</div>"),v=e('<span class="readMore"> ...Read more</span>'),y=e('<span class="hide">'+t.processTextMessage(i)+"</span>");s&&(w.append(v),w.append(y)),p.append(w),v.click((function(){v.addClass("hide"),y.removeClass("hide")}))}():p.append(e("<div>"+t.processTextMessage(o.message)+"</div> "));return t.addBotMessageDiv(p,u,c),void(o.enableFeedBack&&this.getMessageFeedback(o,".chat-message.new.last",c));case"WebView":var v=e('<div class = "chat-message from-them message-came bot-message'+(t.skin&&t.skin.bubbleType?t.skin.bubbleType:"")+" new "+(l.length>0&&e(l[l.length-1]).hasClass("from-them")&&!e(l[l.length-1]).hasClass("carousel")?"":"first")+'"> </div>');v.append('<span class="from-icon"></span>'),-1!==o.webView.url.indexOf("?")?o.webView.url=o.webView.url+"&frameId="+o.webView.id:o.webView.url=o.webView.url+"?frameId="+o.webView.id,v.append('<span class="from-icon"></span>');var y=e("<div>"+(o.webView.title?'<span class="title">'+o.webView.title+"</span>":"")+"</div>"),b=e('<iframe scrolling="'+(o.scrollable?"yes":"no")+'" allowtransparency="true" allow="camera *; microphone *"; frameborder="0" allowfullscreen id="'+o.webView.id+'" src="'+o.webView.url+'"></iframe>');o.webView.height&&b.css({height:o.webView.height}),o.fullWidthWidget?(v.css({padding:0,width:"100%"}),y.css({margin:0,left:-5}),window.ymConfig.containerId?b.css({width:document.getElementById("chatBoxMain").offsetWidth-30}):b.css({width:window.innerWidth-30})):b.css({width:"100%"}),o.fixedPosition&&(fe-=window.botOpenClicked?e(".send-input-form").height():55,me(),b.css({height:"calc(".concat(window.innerHeight,"px - ").concat(fe,"px + 21px)")}),e("#chatBoxMainContainer").addClass("staticWebView"),e(".send-input-form").addClass("hide"),e(".send-input").addClass("autoHeight")),y.append(b),v.append(y);var k=e('<div class="timestamp-bot">'+u+"</div>");return o.fullWidthWidget&&k.css({padding:"5 0 8 5"}),void t.addBotMessageDiv(v,u,c);case"Rating":return void("star"===o.rating.type&&function(){t.starIndex=t.starIndex?t.starIndex+1:1;for(var n=e('<div class="chat-message message-came new from-them rating stars starIndex'+t.starIndex+'">'),i=o.rating.max&&o.rating.max>0&&o.rating.max<=10?o.rating.max:10,a=function(o){var a=e('<input type="radio" id="star'+t.starIndex+o+'" name="rating'+t.starIndex+'" value="'+o+'"></input>'),s=e('<label class = "starActive" style="font-size: 2em" for="star'+t.starIndex+o+'"></label>');i>5&&s.css("font-size","1.5em"),n.append(a),n.append(s),a.click((function(){var n=i-o+1;t.send(n.toString()),e(".starIndex"+t.starIndex+" input").prop("disabled",!0),e(".starIndex"+t.starIndex+" label").removeClass("starActive")}))},s=1;s<=i;s+=1)a(s);t.addBotMessageDiv(n,u,c)}());case"Image":var C;return l.length>0&&(e(l[l.length-1]).hasClass("from-them")||e(l[l.length-1]).hasClass("carousel"))&&e(l[l.length-1]).addClass("except"),C=window.mobileAndTabletCheck()&&!window.ymConfig.sdk?e('<div class="chat-message message-came card-ele carousel new single-card bot-message"><span class="from-icon"></span><div class="card"><div class="card_image"><a href="'+o.image+'" target="_blank"><img src="'+o.image+'" /></a></div></div></div>'):e('<div class="chat-message message-came card-ele carousel new single-card bot-message"><span class="from-icon"></span><div class="card"><div class="card_image"><div onclick="javascript:window.chat.openImage(\''+o.image+'\')"><img src="'+o.image+'"></img></div></div></div></div>'),void t.addBotMessageDiv(C,u,c);case"File":var x=e('<div class = "chat-message message-came from-them new bot-message '+(l.length>0&&(e(l[l.length-1]).hasClass("from-then")||e(l[l.length-1]).hasClass("carousel"))?"":"first")+'"> <div><img class="image-uploading file-icon" src="'+f+'"></img><a href="'+o.file+'" target="_blank">'+o.name||!1);return t.addBotMessageDiv(x,u,c),e(".image-uploading:last").click((function(){window.open(o.file,"_blank")})),void e(".image-uploading:last").removeClass("image-uploading");case"GoogleTracker":return void e('<img src="'+o.googleTracker.img+'" border="0" height="1" width="1" alt="Advertisement"></img>').appendTo("body");case"WebViews":l.length>0&&(e(l[l.length-1]).hasClass("from-them")||e(l[l.length-1]).hasClass("carousel"))&&e(l[l.length-1]).addClass("except");var T=e('<div class="chat-message message-came card-ele carousel new bot-message"><span class="from-icon"></span></div>'),S=e('<div class="cards"></div>');return e(o.webViews).each((function(t,n){var i=e("<div class='card'>");-1!==n.url.indexOf("?")?n.url=n.url+"&frameId="+n.id:n.url=n.url+"?frameId="+n.id,i.append(e("<div>"+(n.title?'<span class="title">'+n.title+"</span>":"")+'<iframe scrolling="no" style="height: '+n.height+'px; width: 100%;" allowtransparency="true" frameborder="0" allowfullscreen id="'+n.id+'" src="'+n.url+'"></iframe></div>')),S.append(i)})),T.append(S),void t.addBotMessageDiv(T,u,c);case"FlightDetails":l.length>0&&(e(l[l.length-1]).hasClass("from-them")||e(l[l.length-1]).hasClass("carousel"))&&e(l[l.length-1]).addClass("except");var M=e('<div class="chat-message message-came card-ele carousel new bot-message"><span class="from-icon"></span></div>'),I=e('<div class="cards '+(o.flightDetails.options&&o.flightDetails.options.list?"list":"")+'" ></div>');return e(o.flightDetails.trips).each((function(n,i){var a=i.actions?i.actions.length*t.card_button_height:0,s=e("<div class='card flight-details-container' style='padding-bottom: ".concat(a,"px'>"));if(o.flightDetails.pnr){var r="<div class='flight-details-row trip-title'><div><li>PNR: <span>".concat(o.flightDetails.pnr.label,"</span></li>");o.flightDetails.tkpnr&&(r+="<li>TK PNR: <span>".concat(o.flightDetails.tkpnr.label,"</span></li>")),r+="</div><div class='flight-status'>".concat(i.journeyType,"</div></div>"),s.append(r)}if(i.flights.length>1&&o.flightDetails.from&&o.flightDetails.to&&s.append("<div class='flight-details-row' style=\"font-weight: bold;padding: 0 15px\"><div>".concat(o.flightDetails.from.code,"</div><div>").concat(o.flightDetails.to.code,"</div></div>")),e(i.flights).each((function(t,n){var i=e("<div class='flight-details'>");i.append("<div class='flight-details-row trip-details'><div style=\"font-size: 14px;\">Flight: <img src=".concat(n.flightNumber.icon,"> ").concat(n.flightNumber.value,'</div> <div class="flight-status status-').concat(n.status.code,'">').concat(n.status.label,"</div></div>")),i.append("<div class='flight-details-row flight-code'><div>".concat(n.from.code,'</div><div><img style="padding-top: 8px;" src="').concat(g,'/dS81YTBC5Fz71580391185630.png"></div><div>').concat(n.to.code,"</div></div>")),i.append("<div class='flight-details-row trip-details'><div>".concat(n.from.city," ").concat(n.from.terminal?"("+n.from.terminal+")":"",'</div> <div style="direction: rtl">').concat(n.to.city," ").concat(n.to.terminal?"("+n.to.terminal+")":"","</div></div>")),i.append("<div class='flight-details-row trip-details'><div>".concat(n.from.departureDate,'</div><div class="to-details">').concat(n.to.arrivalDate,"</div></div>")),n.from.estimatedDeparture&&(i.append('<div class=\'flight-details-row trip-details\'><div class="label">Estimated <br/>Departure</div><div class="to-details label">Estimated <br/>Arrival</div></div>'),i.append("<div class='flight-details-row flight-time-bold'><div>".concat(n.from.estimatedDeparture,'</div><div class="to-details">').concat(n.to.estimatedArrival,"</div></div>"))),i.append('<div class=\'flight-details-row trip-details\'><div class="label">Schd. Departure</div><div class="to-details label">Schd. Arrival</div></div>'),i.append("<div class='flight-details-row flight-time'><div>".concat(n.from.departureTime,'</div><div class="to-details">').concat(n.to.arrivalTime,"</div></div>")),n.layover&&i.append('<div class="layover">'.concat(n.layover,"</div>")),n.operated&&i.append('<div class="flight-details-row flight-operated">Operated by :\n                                    <div><img src='.concat(n.operated.indigologo,'></div>\n                                    <div class="l" style=').concat(n.operated.tklogo?"display:block":"display:none",'><img style="height: 15px;" src=').concat(n.operated.tklogo,"></div>\n                                    </div>")),s.append(i)})),i.actions&&i.actions.length>0){var c=e('<div class="card_buttons"> </div>');e(i.actions).each((function(n,i){var o=e("<button title='"+e("<div>"+i.title+"</div>").text()+"'>"+i.title+"</button>");o.click((function(){i.text?t.send({message:i.text,analyticsData:i.analytics,interactionType:"cards",buttonClick:!0},null,i.title):(t.xmppSend({messageType:"#analytics",analyticsData:i.analytics,interactionType:"cards",buttonClick:!0}),window.open(i.url,"_blank"))})),c.append(o)})),s.append(c)}I.append(s)})),M.append(I),void t.addBotMessageDiv(M,u,c);case"BoardingPasses":return void n.e(20).then(n.t.bind(null,46,7)).then((function(n){l.length>0&&(e(l[l.length-1]).hasClass("from-them")||e(l[l.length-1]).hasClass("carousel"))&&e(l[l.length-1]).addClass("except");var i=e('<div class="chat-message message-came card-ele carousel new bot-message"><span class="from-icon"></span></div>'),a=e('<div class="cards"></div>');e(o.boardingPasses).each((function(i,o){var s=o.actions?o.actions.length*t.card_button_height:0,r=e("<div class='card boarding-pass-container' style='padding-bottom: ".concat(s,"px'>"));o.pnr&&r.append("<div class='flight-details-row trip-title'><div>PNR: <span>".concat(o.pnr,"</span></div><div>Flight: <span>").concat(o.flightNumber,"</span></div></div>")),r.append("<div class='flight-details-row' style=\"font-weight: bold;padding: 0 15px\"><div>".concat(o.from.code,"</div><div>â</div><div>").concat(o.to.code,"</div></div>")),r.append("<div class='flight-details-row' style=\"padding: 0 15px\"><div>".concat(o.from.city,"</div><div>").concat(o.to.city,"</div></div>"));var c=document.createElement("canvas");(new Date).getTime();n.default(c,{bcid:"pdf417",text:o.barcode.barcodeData},(function(e,t){console.log(e),console.log(t),e||r.append('<div style="padding: 0 10px; margin: 10px 0; text-align: center;"><img style="display: inline-block;width: 100%;" src="'.concat(c.toDataURL(),'"></div>'))}));var l=e("<div class='flight-details'>");if(l.append("<div class='flight-details-row trip-details'><div style=\"font-weight: bold;margin-bottom: 10px;margin-left: auto;margin-right: auto;font-size: 14px;\">".concat(o.fullName,"</div></div>")),l.append('<div class=\'flight-details-row trip-details\'><div class="label">Gate <div class="value"># '.concat(o.gate,'</div></div><div class="to-details label">Boarding Time <div class="value">').concat(o.boardingTime,"</div></div></div>")),l.append('<div class=\'flight-details-row trip-details\'><div class="label">Departure Date  <div class="value">'.concat(o.from.departureDate,'</div></div><div class="to-details label">Departure Time <div class="value">').concat(o.from.departureTime,"</div></div></div>")),l.append('<div class=\'flight-details-row trip-details\'><div class="label">Seat  <div class="value">'.concat(o.seat,'</div></div><div class="to-details label">Sequence <div class="value">').concat(o.seqNo,"</div></div></div>")),l.append('<div class=\'flight-details-row trip-details\'><div class="label">Class <div class="value">'.concat(o.class,'</div></div><div class="to-details label">Flight Duration <div class="value">').concat(o.duration,"</div></div></div>")),l.append('<div class=\'flight-details-row trip-details\'><div class="label">Arrival Date  <div class="value">'.concat(o.to.arrivalDate,'</div></div><div class="to-details label">Arrival Time <div class="value">').concat(o.to.arrivalTime,"</div></div></div>")),r.append(l),o.actions&&o.actions.length>0){var d=e('<div class="card_buttons"> </div>');e(o.actions).each((function(n,i){var o=e("<button title='"+e("<div>"+i.title+"</div>").text()+"'>"+i.title+"</button>");o.click((function(){i.text?t.send({message:i.text,analyticsData:i.analytics,interactionType:"cards",buttonClick:!0},null,i.title):(t.xmppSend({messageType:"#analytics",analyticsData:i.analytics,interactionType:"cards",buttonClick:!0}),window.open(i.url,"_blank"))})),d.append(o)})),r.append(d)}a.append(r)})),i.append(a),t.addBotMessageDiv(i,u,c)}));case"QuickReplies":var A=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,O=e('<div class="chat-message message-came quick-reply from-them bot-message '+(t.skin&&t.skin.bubbleType?t.skin.bubbleType:"")+" new "+(l.length>0&&e(l[l.length-1]).hasClass("from-them")&&!e(l[l.length-1]).hasClass("carousel")?"":"first")+'"></div>');if(O.append('<span class="from-icon"></span>'),o.quickReplies.title&&""!==o.quickReplies.title.trim()&&!o.quickReplies.hideText&&(O.append(e("<div>"+t.processTextMessage(o.quickReplies.title)+"</div> ")),t.addBotMessageDiv(O,u,c)),c&&_&&JSON.stringify(o.quickReplies)!==JSON.stringify(_))return;var B=o.quickReplies.speak?o.quickReplies.speak:o.quickReplies.title;if(t.enqueueAndPlayAudio(B),Ce(!0),o.quickReplies.grid&&o.quickReplies.options&&o.quickReplies.options.length>0){var D=e('<div class="card-ele"> </div>');return e(o.quickReplies.options).each((function(n,i){var o=e("<button class= 'gridbutton' <span class='gridcolumn'><div>"+(i.image?"<img class= 'gridImage' src='"+i.image+"'/>":"")+"<div class='gridfigcaption'>"+i.title+"</div></div></span><br></button>");D.append(o),o.click((function(e){a("Quick Reply",i.text||i.title,1),window.chat.zendesk.agentConnected&&(window.chat.zendesk.userRated=i.text||i.title,window.chat.zendesk.userRatedClicked=!0),i.url?(window.parent.open(i.url,i.selfReload?"_self":"_blank"),t.xmppSend({messageType:"#analytics",analyticsData:i.analytics,interactionType:"quick-replies",buttonClick:!0}),i.postback&&t.send(i.postback,null,i.title)):t.send({message:i.text||i.title,analyticsData:i.analytics,interactionType:"quick-replies",triggerJourney:i.triggerJourney,buttonClick:!0},null,i.title)})),t.enqueueAndPlayAudio(i.title)})),void t.addBotMessageDiv(D,u,c)}if(o.quickReplies.options&&o.quickReplies.options.length>0){var N=e('<div class="card-ele"> </div>'),R=e("#chatOptions");if(o.quickReplies.multiSelect&&"v2"===o.quickReplies.version&&o.quickReplies.options.length>1){var P=e("<button class='option'><span class='checkmark'></span> Select all</button>");R.append(P),P.click((function(n){var i=!1;e(n.target).closest("button").hasClass("selected")&&(e("#send-multi-select").remove(),t.selectedOptions=[],e("#ymMsgInput").val(""),i=!0),e(n.target).closest("#chatOptions").find("button").each((function(t,n){"send-multi-select"!==n.id&&(i?e(n).removeClass("selected"):e(n).addClass("selected"))})),i||(t.selectedOptions=JSON.parse(JSON.stringify(o.quickReplies.options)),e("#ymMsgInput").val(t.getSelectedOptionsTitle()),0===e("#send-multi-select").length&&(R.append('<button id="send-multi-select" class="option send" style="margin-top: 10px;">\n                                                    '.concat(o.quickReplies.submitButtonText||"Send","\n                                                 </button>")),we(),e("#send-multi-select").click((function(){t.send(t.getSelectedOptionsText(),null,t.getSelectedOptionsTitle()),t.selectedOptions=[],e("#ymMsgInput").val("")}))))}))}if(e(o.quickReplies.options).each((function(n,s){if(s){var r=e("<button style='"+(o.quickReplies.rating?10===o.quickReplies.options.length?"width: 9%":"width: 50px; height: 30px;":"")+"' class='"+(o.quickReplies.rating?"rating "+(s.ratingType?s.ratingType:""):"option")+" "+(s.primary?"primary":"")+"' "+(s.location&&!navigator.geolocation?"title='Location is not supported on your browser' disabled=disabled":"")+">"+(s.image?"<img src='"+s.image+"'/>":"")+(s.location?'<i class="fa fa-crosshairs" aria-hidden="true"></i> &nbsp;&nbsp;':"")+(s.notification?'<i class="fa fa-bell" aria-hidden="true"></i> &nbsp;&nbsp;':"")+(o.quickReplies.multiSelect&&"v2"===o.quickReplies.version?'<span class="checkmark"></span>':"")+s.title+"</button>");if(s.backgroundColor&&A.test(s.backgroundColor)&&r.css("background-color",s.backgroundColor),s.textColor&&A.test(s.textColor)&&(r.css("color",s.textColor),r.css("border-color",s.textColor)),s.upload&&(r.html(""),r.append('<div>    <i class="fa fa-paperclip attach"/> '+s.title+'   <form id="uploadForm" action="'+window.ymConfig.host+"/api/chat/upload?bot="+Y+"&uid="+i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]+'" method="post" enctype="multipart/form-data" target="upload_target" >\n        <input type="file" title="Upload file" name="images"  id="uploadFile"/>\n        <input type="hidden" name="botID" value="'+window.ymConfig.bot+'">\n   </form></div>'),r.on("change","#uploadFile",(function(e){t.handleUpload(e,"uploadForm")}))),s.sendSelectedEvent&&(e(".timestamp-bot:last").addClass("hidden"),we()),r.click((function(n){if(s.doNotSend)return xe(),void t.send(s.title,null,null,!0);if(window.chat.zendesk.agentConnected&&(window.chat.zendesk.userRated=s.text||s.title,window.chat.zendesk.userRatedClicked=!0),!s.upload){if(s.sendSelectedEvent){var i=[];e(".premium_grid_item .item-value.active.added-in-cart").each((function(){i.push(this.innerText)})),e(".premium_grid_item .item-value").removeClass("active"),e(".premium_grid_item .click-button").addClass("hide"),window.chat.send({event:{code:s.sendSelectedEvent,payload:i,textData:s.text||s.title}},!0)}if(e(n.target).closest("button").hasClass("selected"))return e(n.target).closest("button").removeClass("selected"),t.selectedOptions.splice(t.selectedOptions.indexOf(s),1),t.getSelectedOptionsTitle().trim()||e("#send-multi-select").remove(),e("#ymMsgInput").val(t.getSelectedOptionsTitle()),void(o.quickReplies.multiSelect&&"v2"===o.quickReplies.version&&e(n.target).closest("#chatOptions").find("button").first().removeClass("selected"));if(s.url)window.parent.open(s.url,s.selfReload?"_self":"_blank"),t.xmppSend({messageType:"#analytics",analyticsData:s.analytics,interactionType:"quick-replies",buttonClick:!0});else if(s.location)navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){return t.sendLocation(e,s.title||s.text)}),(function(){window.chat.send({event:{code:"blocked-location",value:!0}},!0),alert("Your location service is disabled/unavailable")})):(window.chat.send({event:{code:"blocked-location",value:!0}},!0),alert("Your location service is disabled/unavailable"));else if(s.notification)t.sendAskNotificationMessage();else if(s.locationPicker)e(".location-selector").show(),ve();else if(s.post_form){var r=e('<form method="post" action="'+s.post_form.url+'" target="_blank"></form>');for(var c in s.post_form.data)s.post_form.data.hasOwnProperty(c)&&r.append("<input type='hidden' name='"+c+"' value='"+s.post_form.data[c]+"'/>");r.appendTo("body").submit()}else o.quickReplies.multiSelect?(e(n.target).closest("button").addClass("selected"),t.selectedOptions.push(s),0===e("#send-multi-select").length&&(R.append('<button id="send-multi-select" class="option send" style="\n                                                     '.concat("v2"===o.quickReplies.version?"margin-top:10px;":"",'"\n                                                        >').concat(o.quickReplies.submitButtonText||"Send","</button>")),we(),e("#send-multi-select").click((function(){t.send(t.getSelectedOptionsText(),null,t.getSelectedOptionsTitle()),t.selectedOptions=[],e("#ymMsgInput").val("")}))),e("#ymMsgInput").val(t.getSelectedOptionsTitle()),"v2"===o.quickReplies.version&&t.selectedOptions.length===o.quickReplies.options.length&&e(n.target).closest("#chatOptions").find("button").first().addClass("selected")):(a("Quick Reply",s.text||s.title,1),t.send({message:s.text||s.title,analyticsData:s.analytics,interactionType:"quick-replies",triggerJourney:s.triggerJourney,buttonClick:!0},null,s.title));s.url&&s.postback&&t.send(s.postback,null,s.title)}})),o.quickReplies.persistentOptions?N.append(r):R.append(r),s.buttonCss){s.buttonCss.standard=s.buttonCss.standard||{},s.buttonCss.hover=s.buttonCss.hover||{};var c={},l={};e.each(s.buttonCss.standard,(function(e,t){c[e]=t.value?t.value:t})),e.each(s.buttonCss.hover,(function(e,t){l[e]=t.value?t.value:t})),r.css(c),r.hover((function(){r.css(l)}),(function(){r.css(c)}))}t.enqueueAndPlayAudio(s.title)}})),o.quickReplies.multiSelect&&!o.quickReplies.version&&o.quickReplies.cancelButton&&o.quickReplies.cancelButton.title){var E=e("<button class='option cancel'>"+o.quickReplies.cancelButton.title+"</button>");R.append(E),E.click((function(){t.send(o.quickReplies.cancelButton.text||o.quickReplies.cancelButton.title,null,o.quickReplies.cancelButton.text||o.quickReplies.cancelButton.title),t.selectedOptions=[],e("#ymMsgInput").val("")}))}o.quickReplies.rating&&!o.quickReplies.noRatingLabels&&R.append('<div style="\n    padding-bottom: 15px;\n    color: #666;\n    font-size: 10px;\n    font-weight: bold;\n    padding-top: 5px;\n    display: -webkit-box;\n"><span style="\n    width: 58%;\n    display: flex;\n    text-align: center;\n">|<hr style="width: 45%"> Poor <hr  style="width: 45%">|</span><span style="\n    width: 20%;\n    display: flex;\n    text-align: center;\n">|<hr style="width: 40%">Average<hr style="width: 40%">|</span><span style="\n    width: 18%;\n    display: flex;\n    text-align: center;\n">|<hr style="width: 40%"> Good <hr  style="width: 40%">|</span></div>'),o.quickReplies.persistentOptions||R.removeClass("hide"),o.quickReplies.leftAlign&&e("#chatBoxMainContainer button.option").css({"text-align":"left"}),o.quickReplies.persistentOptions&&t.addBotMessageDiv(N,void 0,c),o.quickReplies.enableFeedBack&&this.getMessageFeedback(o,".chat-message.new.last",c)}if(o.quickReplies.autobuttonWidth){var q=o.quickReplies.autobuttonWidth;!0===q&&(q="auto"),e("#chatBoxMainContainer button.option").css({width:q})}return void("v2"===o.quickReplies.version&&e("#chatBoxMainContainer button.option").css({paddingLeft:40}));case"Cards":if(l.length>0&&(e(l[l.length-1]).hasClass("from-them")||e(l[l.length-1]).hasClass("carousel"))&&e(l[l.length-1]).addClass("except"),o&&o.options&&o.options.grid){var F=e("<div class='chat-message message-came card-ele carousel new bot-message'><span class= 'from-icon'></span></div>");return e(o.cards).each((function(n,i){var s=i.backgroundColor?i.backgroundColor:"#f2f2f2",r=e("<div style='background-color:"+s+"' class='card-main-one'></div>");if("block"===o.options.display&&r.css("display","block"),i.image){var c="",l="<img src=".concat(i.image," width='60px'>");t.skin&&t.skin.cardImageNotClickable||(window.mobileAndTabletCheck()&&!window.ymConfig.sdk?(c+="<div class='card-inner-one'>",c+="<a href=".concat(i.image," target='_blank'>")):c+="<div class='card-inner-one' onclick=\"javascript:window.chat.openImage('".concat(i.image,"')\">")),window.mobileAndTabletCheck()&&!window.ymConfig.sdk?c+="".concat(l,"</a></div>"):c+="".concat(l,"</div>"),r.append(c)}var d=i.icon?"<div> <img src='".concat(i.icon,"' width='20px'></div>"):"",u=i.subText?"<h4 style='font-weight: bold; margin: 0px;'> ".concat(i.subText," </h4>"):"",p=i.action&&i.action.buttonbackgroundColor?i.action.buttonbackgroundColor:"#ffffff",g=i.action&&i.action.textColor?i.action.textColor:"#000000",f=i.action&&i.action.borderColor?i.action.borderColor:"#000000",m=e("<div class='card-title'><div><div style='margin: 0px;'><b>"+i.title+"</b></div><div style='margin: 0px;'>"+i.text+"</div></div>"+d+"</div>"),h=e("<div class='card-inner-two'></div>"),w=e("<div class='card-subtext'>"+u+"</div>"),v=e("<div class='buttonClick"+n+"' style='padding:3px;cursor:pointer; border-radius: 6px; background-color:"+p+"; color:"+g+"; border: 1px solid "+f+"'>"+i.action.title+"</div>"),y=e("<div></div>");w.append(v),y.append(w),h.append(m),h.append(y),r.append(h),F.append(r),F.append(e('<div style="height: 9px;"></div>')),v.click((function(e){i.action.text?t.send({message:i.action.text,analyticsData:i.action.analytics,interactionType:"cards",triggerJourney:i.action.triggerJourney,buttonClick:!0},null,i.action.title):(i.action.postback&&t.send(i.action.postback,null,i.action.title),t.xmppSend({messageType:"#analytics",analyticsData:i.action.analytics,interactionType:"cards",buttonClick:!0}),window.mobileAndTabletCheck()&&"x1611038137529"==window.ymConfig.bot&&(i.action.url=i.action.url.replace("#page=","#page")),window.open(i.action.url,"_blank"),a("Card Button Click",i.action.title,1))}))})),void t.addBotMessageDiv(F,u,c)}var H=1===o.cards.length||t.skin&&t.skin.oneCardRow,U=e('<div class="chat-message message-came card-ele carousel new bot-message '+(H?"single-card":"")+'"><span class="from-icon"> </span></div>'),W=e('<div class="cards '+(o.options&&o.options.list?"list":"")+'"></div>');return e(o.cards).each((function(n,i){var s=e("#chatBoxMainContainer").hasClass("single-message")&&H?i.actions&&i.actions.length>0?t.card_button_height+15:t.card_desc_padding:i.actions?i.actions.length*t.card_button_height+15:t.card_desc_padding,r=e("<div class='card "+(i.vertical?"vertical":"")+"'></div>");if(i.image)if(i.imageAsAction){var c=e('<div class="card_image"><img src="'+i.image+'"></img></div>');c.click((function(){i.imageAsAction.url?(i.imageAsAction.postback&&t.send(i.imageAsAction.postback),t.xmppSend({messageType:"#analytics",analyticsData:i.imageAsAction.analytics,interactionType:"cards",buttonClick:!0}),window.open(i.imageAsAction.url,"_blank")):i.actions&&i.actions.length>0&&(i.actions[0].text?t.send({message:i.actions[0].text,analyticsData:i.actions[0].analytics,interactionType:"cards",buttonClick:!0},null,i.actions[0].title):(t.xmppSend({messageType:"#analytics",analyticsData:i.actions[0].analytics,interactionType:"cards",buttonClick:!0}),window.open(i.actions[0].url,"_blank")))})),i.text||i.title||c.css({"padding-bottom":s+"px"}),r.append(c)}else{var l=i.imageHeight&&i.imageWidth?'style= "height:'.concat(i.imageHeight,"; width: ").concat(i.imageWidth,';"'):"",d="<img ".concat(l,' src="').concat(i.image,'"></img>'),u='<div style="display: flex; justify-content: center;" class="card_image">';t.skin&&t.skin.cardImageNotClickable||(window.mobileAndTabletCheck()&&!window.ymConfig.sdk?u+='<a href="'.concat(i.image,'" target="_blank">'):u+="<div onclick=\"javascript:window.chat.openImage('".concat(i.image,"')\">")),window.mobileAndTabletCheck()&&!window.ymConfig.sdk?u+="".concat(d,"</a></div>"):u+="".concat(d,"</div></div>");var p=e(u);i.text||i.title||p.css({"padding-bottom":s+"px"}),r.append(p)}else if(i.video){var f=i.videoOptions&&i.videoOptions.thumbnailImage||"",m=e('<video width="100%" height="100%" controls disablePictureInPicture controlsList="nodownload" onclick="window.videoClick(this)" ondblclick="window.videoDbClick(this)"><source src="'+i.video+'" type="video/mp4"></video>'),h=e('<div class="card_image"></div>');f&&m.prop("poster",f),h.append(m);var w=i.video.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);w&&11==w[2].length&&(h=e('<div class="card_image"><iframe width="200" height="100" src="https://www.youtube.com/embed/'+w[2]+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>')),i.text||i.title||h.css({"padding-bottom":s+"px"}),r.append(h)}var v=e("<div class='card_details'></div>");if(i.title&&""!==i.title.trim()){var y=e("<div class='card_title'>"+i.title+"</div>");v.append(y)}if(i.text){var b=t.processTextMessage(i.text);if(-1!==i.text.indexOf("**.")){for(var k=b.split("**."),C="<ul>",x=0;x<k.length;x++)C+="<li>"+k[x]+"</li>";b=C+="</ul>"}var T=e("<div class='card_description'>"+b+"</div>");o.options&&o.options.isMarkdown&&t.loadMarkdownScript((function(){T.html(marked(i.text))})),v.append(T)}if(i.insuranceCard){var S=e("<div class='insurance_title'>"+i.insuranceCard.title+"</div>"),_="<div class='insurance_subtitle'>"+i.insuranceCard.subtitle+"</div>";if(S.append(_),v.append(S),i.insuranceCard.premium){var M=e("<div class='premium_grid'></div>"),I=e("<div class='premium_grid_item'>".concat(i.insuranceCard.premium.text,"</div><div class='premium_grid_item'>").concat(i.insuranceCard.premium.amount,"</div>"));M.append(I),v.append(M)}var A=e("<div class='benefits_grid'></div>");i.table&&A.css({marginBottom:0,paddingBottom:0});var O=i.insuranceCard.types,B="";O.forEach((function(t){B=e("<div class='premium_grid_item'></div>");var n=e("<div class='image-div'>");if(t.image){var o=e("<img src=".concat(t.image,">"));t.width&&o.css({width:t.width}),t.height&&o.css({height:t.width}),n.append(o)}B.append(n);var a=e('<div class="item-value active">'.concat(t.text,"</div>"));if(B.append(a),A.append(B),i.insuranceCard.multiSelect){var s=e('<i class="fa fa-lg fa-check-circle selected-item-checked hide" aria-hidden="true"></i>');n.prepend(s);var r=e('<div class="click-button add-button">Add</div>');B.append(r),r.click((function(e){s.hasClass("hide")?(s.removeClass("hide"),r.text("Remove"),r.removeClass("add-button").addClass("remove-button"),a.addClass("added-in-cart")):(s.addClass("hide"),r.text("Add"),r.removeClass("remove-button").addClass("add-button"),a.removeClass("added-in-cart"))}))}})),v.append(A)}if(i.profile){var D=e('<div class="profile_info" style="text-align: center;"></div>');D.append('<div class="profile-image-background"><img src='.concat(i.profile.image,' class="profie-image" alt="profile pic"></div>')),D.append('<div class="profile-header">'.concat(i.profile.header,"</div>")),D.append("<div>".concat(i.profile.subHeader,"</div>")),v.append(D)}if(i.slider){var N=e('<input type="range" style="float:none;" step='.concat(i.slider.step||1," min=").concat(i.slider.min||1," max=").concat(i.slider.max||100," value=").concat(i.slider.val||50,' class="slider">')),R=e("<div class='slidecontainer'></div>"),j=e("<span></span>"),P=e("<span>".concat(i.slider.text||"Value"," : </span>")),E=e("<button>Submit</button>");P.append(j),j[0].innerHTML=i.slider.val,N[0].oninput=function(e){j[0].innerHTML=this.value},E.click((function(e){e.currentTarget.disabled=!0,t.send(j[0].innerHTML,null,j[0].innerHTML)}));var z=e('<div class="sliderLabel"></div>');z.append(e("<span>".concat(i.slider.min||1,"</span>")),P,e("<span>".concat(i.slider.max||100,"</span>"))),R.append(z,N,E),v.append(R)}if(i.table){var q;q=i.baggageInformation?"<table style='width:100%;display:contents;padding:5px' class='card_description'>":"<table style='width:100%;' class='card_description'>";for(var L=i&&i.tableTitleWidth?i.tableTitleWidth:"auto",F=i&&i.tableValueWidth?i.tableValueWidth:"auto",U=0;U<i.table.length;U++)q+="<tr class = 'cardTabletrclass'><td class ='cardTabletdclass' style='width:"+L+"'>"+i.table[U].title+"</td><td style='width:"+F+"' class='"+(i.floatTableLeft?" text-align-left ":" text-align-right")+" '>"+i.table[U].value+"</td></tr>";var J=e("<div class='card_table'>"+(q+="</table>")+"</div>");i.baggageInformation&&J.css({padding:"5px"}),v.append(J)}i.flightSeatServices&&(i.flightSeatServices.tripInformation.forEach((function(t){var n=e("<div class='flight-details'>");n.append("<div class='flight-details-row flight-code'><div>".concat(t.origin,'</div><div><img style="padding-top: 8px;" src="').concat(g,'/dS81YTBC5Fz71580391185630.png"></div><div>').concat(t.destination,"</div></div>")),t.details.forEach((function(t){var i=e("<div class='passenger_name'>"+t.Passengername+"</div>");n.append(i),n.append("<table style='width:100%' class='passenger_seat'><tr><td>".concat(t.Seat?t.seatTitle||"Seat Number":"","</td><td class='text-align-right'>6E Add-ons</td></tr><tr><td><strong>").concat(t.Seat?t.Seat:"","</strong></td><td class='text-align-right'><strong>").concat(t.SSRs,"</strong></td></tr></table>"))})),v.append(n)})),i.flightSeatServices.Indigo_6EInfo&&v.append('<div class="additional_info">'.concat(i.flightSeatServices.Indigo_6EInfo,"</div>")));if(i.baggage){var V=e("<div class='baggage-info'>");i.baggage.forEach((function(t,n){var o=e("<div class='baggage-details'>");o.append('<div class="baggage-route">'.concat(t.route,"</div>")),t.passengers&&t.passengers.forEach((function(e){e.name&&o.append('<div class="passenger_name">'.concat(e.name,"</div>")),e.weight&&o.append('<div class="font-12">'.concat(e.weight,"</div>"))})),n==i.baggage.length-1&&(o.removeClass("baggage-details"),o.css({padding:"10px 0"})),V.append(o)})),v.append(V)}if(i.dropDown){var $=e("<div class='card-drop-down'>");i.dropDown.forEach((function(n){var i=e("<div class='card-each-drop-down'>"),o=e('<div class="name">'.concat(n.name," :</div>")),a=e("<div class='custom-dropdown-options hide'>"),s=e("<div class='dropdown'>"),r=e('<div class="text-value active">'.concat(n.defaultValue,"<div>")),c=e("<i class='fa fa-angle-down' aria-hidden='true' style='float: right'></i>"),l=e("<div class='dropdown-text ".concat(n.id,"'}></div>"));l.append(c),l.append(r),s.append(l),n.options.length>3&&(a.css("height","75px"),a.css("overflow-y","scroll")),s.append(a),n.options.forEach((function(t){t.changedCardText?a.append(e("<div class='".concat(t.changedCardText,"'>").concat(t.key,"</div>"))):a.append(e('<div class="cardsDropdown">'.concat(t.key,"</div>")))})),i.append(o),i.append(s),$.append(i),l.click((function(e){if(c.hasClass("fa-angle-up"))return e.stopPropagation(),a.hide(),c.removeClass("fa-angle-up"),void c.addClass("fa-angle-down");e.stopPropagation(),a.show(),c.removeClass("fa-angle-down"),c.addClass("fa-angle-up")})),t.updateChildDropDownDetails(a,r,c,n),v.click((function(t){e(".cards .custom-dropdown-options").hide(),e(".fa-angle-up").addClass("fa-angle-down").removeClass("fa-angle-up")}))})),v.append($)}if(i.input){var G=e("<div class='card-counter'>");i.input.forEach((function(t){var n=e("<div class='card-each-input'><div class=\"input-text\">".concat(t.text," :</div></div>")),i=e('<div class="minus"><i class="fa fa-minus" aria-hidden="true"></i></div>'),o=e('<div class="number-selected active">'.concat(t.itemCount||0,"</div>")),a=e('<div class="plus"><i class="fa fa-plus" aria-hidden="true"></i></div>'),s=e('<div class="counter"></div>'),r=t.max||99,c=t.min||0;s.append(i),s.append(o),s.append(a),n.append(s),G.append(n),i.click((function(e){try{var t=parseInt(o.text());t<=0&&(t=1),t>c&&o.text(t-1)}catch(e){return}})),a.click((function(e){try{var t=parseInt(o.text());t<0&&(t=0),t<r&&o.text(t+1)}catch(e){return}}))})),v.append(G)}i.form&&i.form.length>0&&i.form.forEach((function(t){var n=e("<div class='form-details'>");n.append("<div class='form-header'><div>".concat(t.header,"</div></div>")),t.content.forEach((function(t){var i=e("<div class='form-subheader'>"+t.subheader+"</div>");i.append(e("<div class='form-description'>"+t.description+"</div>")),n.append(i)})),v.append(n)}));if(v.children().last().css({"padding-bottom":s+"px"}),i.actions&&i.actions.length>0){var Q=e('<div class="card_buttons"> </div>');e(i.actions).each((function(n,o){var s=o.align||"left",r=e("<button style='text-align:"+s+"' title='"+e("<div>"+o.title+"</div>").text()+"'><div class='buttonText'>"+o.title+"</div><div class='cartQty hide'>Qty: <div class='totalQty inline'>0</div></div></button>");r.click((function(n){if(o.sendEvent){var s={};e(n.target.offsetParent).parent().find(".card-each-drop-down").each((function(t,n){s[e(n).find(".name")[0].innerText]=e(n).find(".dropdown-text")[0].innerText})),e(n.target.offsetParent).parent().find(".card-each-input").each((function(t,i){var a=e(i).find(".number-selected")[0].innerText;s[e(i).find(".input-text")[0].innerText]=a,e(n.target).each((function(t,n){var i="button"===e(n)[0].localName?e(n):e(n).parent();0!==parseInt(a)?(i.find(".buttonText").addClass("ym-buttonTextFlex"),o.hideQuantity||(i.find(".totalQty")[0].innerText=parseInt(a),i.find(".cartQty").removeClass("hide"))):i.find(".cartQty").addClass("hide")})),e(i).find(".number-selected")[0].innerText=0})),window.chat.send({event:{code:o.sendEvent,payload:s,textData:o.text}},!0)}else if(o.preview)if(window.parent&&window.parent.document&&window.parent.document.querySelector("#ymPluginDivContainerInitial")){e(".fileviewer-o",window.parent.document).remove();var r=!1;if(o.feedback)try{r=JSON.parse(o.feedback)}catch(e){console.log(e)}t.loadFilePreview({url:o.preview,fileName:i.title?i.title:"",feedbackParams:r})}else window.open(o.preview,"_blank");else!o.text&&!o.title||o.url?(o.postback&&t.send(o.postback,null,o.title),t.xmppSend({messageType:"#analytics",analyticsData:o.analytics,interactionType:"cards",buttonClick:!0}),window.open(o.url,"_blank"),a("Card Button Click",o.title,1)):t.send({message:o.text||o.title,analyticsData:o.analytics,interactionType:"cards",triggerJourney:o.triggerJourney,buttonClick:!0},null,o.title)})),Q.append(r)})),v.append(Q)}r.append(v),W.append(r)})),U.append(W),t.addBotMessageDiv(U,u,c),void(o.enableFeedBack&&this.getMessageFeedback(o,".chat-message.new.last",c));case"Notification":var J=o.notification,V={body:"You have ".concat(null==J.length?1:J.length," pending Notifications"),requireInteraction:!0,sticky:!0};new window.Notification("Pending Notifications",V);try{window.parent&&window.chat.send({event:{code:"electron-notification-data",data:J}},!0)}catch(e){}return}j()}else if(o.question){var $=e('<div class="chat-message quick-reply from-them message-came bot-message '+(t.skin&&t.skin.bubbleType?t.skin.bubbleType:"")+" new "+(l.length>0&&e(l[l.length-1]).hasClass("from-them")&&!e(l[l.length-1]).hasClass("carousel")?"":"first")+'"> <span class="thumbs-down"></span><span class="thumbs-up"></span></div>');if($.append('<span class="from-icon"></span>'),o.question.question&&""!==o.question.question.trim()&&($.append(e("<div>"+t.processTextMessage(o.question.question)+"</div> ")),t.addBotMessageDiv($,u,c)),o.question.options&&o.question.options.length>0){var G=e('<div class="card-ele"> </div>'),Q=e("#chatOptions");e(o.question.options).each((function(n,a){var s=e("<button class='option "+(a.primary?"primary":"")+"' "+(a.location&&!navigator.geolocation?"title='Location is not supported on your browser' disabled=disabled":"")+">"+(a.image?"<img src='"+a.image+"'/>":"")+(a.location?"<img src='https://bpvault.blob.core.windows.net/icons/location.png'/>Send my location":a.label)+"</button>");a.upload&&s.append('<div>    <i class="fa fa-paperclip attach"/> Upload   <form id="uploadForm" action="'+window.ymConfig.host+"/api/chat/upload?bot="+Y+"&uid="+i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]+'" method="post" enctype="multipart/form-data" target="upload_target" >\n        <input type="file" title="Upload file" name="images"  id="uploadFile"/>\n        <input type="hidden" name="botID" value="">\n   </form></div>'),s.click((function(n){if(e(n.target).hasClass("selected"))return e(n.target).removeClass("selected"),t.selectedOptions.splice(t.selectedOptions.indexOf(a),1),t.getSelectedOptionsTitle().trim()||e("#send-multi-select").remove(),e(".floating-input .input").val(t.getSelectedOptionsTitle()),void e("#ymMsgInput").val(t.getSelectedOptionsTitle());if(a.url)window.open(a.url,"_blank");else if(a.location)navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){return t.sendLocation(e,a.title||a.text)}),(function(){alert("Your location service is disabled/unavailable")})):alert("Your location service is disabled/unavailable");else if(a.notification)t.sendAskNotificationMessage();else if(a.locationPicker)e(".location-selector").show(),ve();else if(a.post_form){var i=e('<form method="post" action="'+a.post_form.url+'" target="_blank"></form>');for(var s in a.post_form.data)a.post_form.data.hasOwnProperty(s)&&i.append("<input type='hidden' name='"+s+"' value='"+a.post_form.data[s]+"'/>");i.appendTo("body").submit()}else o.question.multiSelect?(e(n.target).addClass("selected"),t.selectedOptions.push(a),0===e("#send-multi-select").length&&(Q.append('<button id="send-multi-select" class="option send">Send</button>'),e("#send-multi-select").click((function(){t.send(t.getSelectedOptionsText(),null,t.getSelectedOptionsTitle()),t.selectedOptions=[],e(".floating-input .input").val(""),e("#ymMsgInput").val("")}))),e(".floating-input .input").val(t.getSelectedOptionsTitle()),e("#ymMsgInput").val(t.getSelectedOptionsTitle())):t.send(a.value||a.label,null,a.label);a.postback&&t.send(a.postback,null,a.label)})),o.question.persistentOptions?G.append(s):Q.append(s)})),o.question.persistentOptions||Q.removeClass("hide"),o.question.persistentOptions&&t.addBotMessageDiv(G,u,c)}try{s||j()}catch(e){}}else if(o.video){z();var X=o.video.noDownload?"nodownload":"download",K=o.video.loop?" loop":"",ee=o.video.muted?" muted":"",te=o.video.autoplay?" autoplay":"",ne=o.video.controls?" controls":"",ie=o.video.url,oe=o.video.thumbnailImage||"",ae=e('<div class="chat-message card-ele message-came bot-message "> </div>'),se=e("<div class='card video' style='padding-bottom:0;'>"),re=e("<video controls disablePictureInPicture controlsList="+X+' width="100%" height="100%" '+K+ee+ne+te+'><source src="'+ie+'" type="video/mp4"></video>');oe&&re.prop("poster",oe),se.append(e('<div class="card_image"></div>').append(re)),o.video.title&&o.video.title.trim()&&se.append(e("<div class='card_title'>"+o.video.title+"</div>")),o.video.description&&se.append(e("<div class='card_description'>"+t.processTextMessage(o.video.description)+"</div>")),ae.append(se),t.addBotMessageDiv(ae,void 0,c)}o.typing&&!s&&Te()},this.closeImage=function(){e("#ymImageHolder").remove()},this.openImage=function(t){try{window.parent?window.parent.postMessage(JSON.stringify({event_code:"load-image",data:t}),"*"):(e(' <div class="ym-img-holder" id="ymImageHolder">                         <div class="img-popup" id="ymImageHolderPopup" >                             <div class="ym-close" onclick="window.chat.closeImage()"></div>                             <img src="'+t+'" />                         </div>                     </div>').appendTo("body"),setTimeout((function(){e("#ymImageHolderPopup").addClass("show")}),100))}catch(e){}},this.closeChat=function(){try{window.parent&&window.parent.postMessage(JSON.stringify({event_code:"close-chat",data:""}),"*")}catch(e){}},this.changeBot=function(e){try{window.parent&&window.parent.postMessage(JSON.stringify({event_code:"change-bot",data:e}),"*")}catch(e){}},this.reloadBot=function(){try{window.parent&&window.parent.postMessage(JSON.stringify({event_code:"reload-bot",data:Y}),"*")}catch(e){}},this.closeChangeBot=function(){e(".choose-bot-container").addClass("hide");try{window.parent.postMessage(JSON.stringify({event_code:"name-received",data:t.escapeHtml(t.mapping.botTitle||t.mapping.botName)}),"*"),e("#chatDetails .title").html(t.escapeHtml(t.mapping.botTitle||t.mapping.botName))}catch(e){}},this.clearChat=function(){i.default.setItem("conversation_history_"+t.storagekey,"[]")},this.changeBotIcon=function(t){e("#chatDetails img.icon").attr("src",t)},this.changeBotToAgent=function(n){if(t.out(n),e("#chatDetails img.icon").attr("src",n.profile_picture),e("#chatDetails .title").html(t.escapeHtml(n.name)),e("#chatDetails .sub-title").html(t.escapeHtml(n.description)),t.showTicketThumbsButton(t.ticket),window.parent)try{window.parent.postMessage(JSON.stringify({event_code:"name-received",data:t.escapeHtml(n.name)}),"*")}catch(e){}},this.changeAgentToBot=function(){if((t.mapping.botTitle||t.mapping.botName)&&(e("#chatDetails .title").html(t.escapeHtml(t.mapping.botTitle||t.mapping.botName)),window.parent))try{window.parent.postMessage(JSON.stringify({event_code:"name-received",data:t.escapeHtml(t.mapping.botTitle||t.mapping.botName)}),"*")}catch(e){}if(t.mapping.botDesc&&e("#chatDetails .sub-title").html(t.escapeHtml(t.mapping.botDesc)),t.mapping.botIcon)e("#chatDetails img.icon").attr("src",t.mapping.botIcon);else{e("#chatDetails img.icon").attr("src","https://cdn.yellowmessenger.com/files/images/avatar.png")}e("#agentsThumbsUpDown").hide()},this.initializeJanus=function(e){h.init({debug:this.logging?"all":"",callback:function(){h.isWebrtcSupported()?t.connectJanus(e):console.log("No WebRTC support... ")}})},this.connectJanus=function(n){if(t.janusParams){var i=t.janusParams.janusServer;t.janus=new h({server:i,iceServers:t.janusParams.turnCredentials,token:t.janusParams.janusSecretToken,success:function(){n&&n()},error:function(n){h.log(n),t.videocall&&t.videocall.detach({error:function(e){h.error("WebRTC error:",e),ke({error:e,msg:"error in creating new janus"},!1)}}),e(".call-button").hide(),setTimeout((function(){t.connectJanus((function(){t.attachJanusPlugins()}))}),5e3)}})}},this.showPromotionCall=function(){me(),e(".promotion-audio-call")[0]||(e("<div class='promotion-audio-call remoteaudiocontainer' style=\"text-align: center; color:#349FD5; max-height:340px;\">   <span id=\"ringing\"></span>   <i id='expand-video' class='fa fa-arrows-alt' style='position: absolute; top: 70px; right:7px;cursor:pointer;color:#349FD5;'></i>   <br>"+'   <span class="call-controls fa-3x" style="display: inline-block; padding-top: 3px">                  <i id="hangup" class="fa fa-phone" style="cursor:pointer;transform: rotate(135deg); color:#349FD5; margin-right: 40px"></i>   <span id="video-ban" class="fa-stack">       <i id="toggle-video" class="fa fa-ban fa-stack-2x" style="color:#349FD5; display: none"></i>        <i id="video-cam" class="fa fa-video-camera fa-stack-1x" style="cursor:pointer;color:#349FD5;"></i>   </span>   <i id="toggle-volume" class="fa fa-microphone" style="cursor:pointer;color:#349FD5;margin-left: 40px"></i>   </span>   <div id="call-duration" style="font-size: 20px"> 00:00:00 </div>   <video width="350px" height="190px" id="remotevideo" autoplay playsinline style="display: none"/></div>').insertBefore(".chat-background"),me()),e("#hangup").click((function(){t.videocall&&(t.videocall.send({message:{request:"hangup"},error:function(e){h.error("WebRTC error:",e),ke({error:e,msg:"error in hangup"})}}),t.videocall.hangup(),ke("normal hangup",!1),e(".remotevideocontainer").slideUp("fast",(function(){e(".remotevideocontainer").remove()})),w=null,e("#call-duration").text("00:00"))})),e("#video-ban").click((function(){var n="none"!==e("#toggle-video").css("display");if(n){if(e(this).find("#toggle-video").hide(),e(".promotion-audio-call").height((function(e,t){return t+200})),e("#remotevideo").attr("poster","https://cdn.yellowmessenger.com/g3WiOGTUFxBz1582527177367.png"),t.videoStream){console.log("attaching janus media stream",t.videoStream,e("#remotevideo").get(0));try{e("#remotevideo").show(),h.attachMediaStream(e("#remotevideo").get(0),t.videoStream),me()}catch(e){console.log("error in attaching media stream",e)}}}else e(this).find("#toggle-video").show();t.videocall.send({message:{request:"set",video:n},error:function(e){h.error("WebRTC error:",e)}})})),e("#toggle-volume").click((function(){e(this).toggleClass("fa-microphone fa-microphone-slash"),t.localstream&&(t.localstream.getAudioTracks()[0].enabled=-1!==e(this).attr("class").split(" ").indexOf("fa-microphone"))})),e("#screen-share").click((function(){})),e("#expand-video").click((function(){if(document.fullscreenElement)document.exitFullscreen&&document.exitFullscreen();else{var e=document.getElementById("remotevideo");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}})),e("#close-promotion").click((function(){e("#close-promotion").remove(),fe=195,e(".promotion-call").slideUp("fast",(function(){e(".promotion-call").remove(),e(".send-input-form").hasClass("hide")&&(e("#chatBoxMainContainer").removeClass("hidden-input-container-promotion"),e("#chatBoxMainContainer").addClass("hidden-input-container")),me()}))}))};var F=function(n){t.videocall=n,t.videocall.send({message:{request:"set",bitrate:512e3},error:function(e){h.error("WebRTC error:",e)}});var i=k(t.janusParams.uidForJanus,t.ticket);t.janusLocalUniqueUsername=i;try{t.registerUsernameJanus(i)}catch(e){console.log("error after plugin attach success",e)}!0===t.autoStartCall&&N(t.agentProfile&&t.agentProfile.webrtc_username?t.agentProfile.webrtc_username:t.janusParams&&t.janusParams.agentJanusUsername?t.janusParams.agentJanusUsername:"");e(".call-button").show()};this.attachJanusPlugins=function(){t.janus&&t.janusParams?t.janus.attach({plugin:"janus.plugin.videocall",media:{audio:!0,video:!0},success:F,error:function(t){h.error("  -- Error attaching plugin...",t),e(".call-button").hide(),ke(t)},onmessage:function(n,i){if(n.error)if(478===n.error_code){var o=t.janusParams.agentJanusUsername;try{t.fetchTicketStatus((function(e,n){var i=(n=n||{}).ticket||{};t.agentProfile=n.agentProfile,t.ticket=i,i.voiceCall&&n.janusParams&&(t.janusParams=n.janusParams),o===t.agentProfile.webrtc_username&&o===t.janusParams.agentJanusUsername&&(console.log("ERROR: No new Janus username from DB"),ke("ERROR: No new Janus username from DB")),N(o===t.agentProfile.webrtc_username?t.janusParams.agentJanusUsername:t.agentProfile.webrtc_username)}))}catch(e){console.log(e,"error"),ke({e:e,msg:"478"})}}else{ke({error:n.error,msg:n,mg:"some other error"}),t.videocall.hangup()}var a=n.result||null;if(a)if(a.list)a.list;else if(a.event){var s=a.event;if("registered"===s)a.username;else if("calling"===s);else if("accepted"===s){w||(w=new Date,v=setInterval((function(){if(w&&e("#call-duration")){var t=Math.floor((new Date-w)/1e3),n=new Date(1e3*t).toISOString().substr(11,8);e("#call-duration").text(n)}}),1e3));var r=a.username;if(null==r);else;i&&t.videocall.handleRemoteJsep({jsep:i,success:function(e){h.log("this is where recording would happen"),h.log("this is where recording would happen")},error:function(e){ke(e),console.log(e,"error in janus handleremotejsep")}})}else"update"===s?i&&("answer"===i.type?t.videocall.handleRemoteJsep({jsep:i}):t.videocall.createAnswer({jsep:i,media:{video:!0,audio:!0},success:function(e){t.videocall.send({message:{request:"set"},jsep:e,error:function(e){h.error("WebRTC error:",e),ke({error:e,msg:"error in create answer"})}})},error:function(e){h.error("WebRTC error:",e),ke({error:e,msg:"error in create answer"})}})):"hangup"===s&&(t.videocall.hangup(),ke({msg:n,mg:"hangup"},!1),e("#call-duration").text("00:00:00"),w&&(w=null,clearInterval(v)))}},ondetach:function(){h.log("video call plugin detached"),this.videocall=null},onlocalstream:function(e){t.localstream=e},onremotestream:function(n){e("#call-loading").remove(),e("#ringing").remove(),w=Date.now(),h.attachMediaStream(e("#remotevideo").get(0),n);var i=n.getVideoTracks();null==i||0===i.length?(e("#remotevideo").hide(),0===e("#remotevideo .no-video-container").length&&e("#remotevideo").append('<div class="no-video-container"><i class="fa fa-video-camera"></i><span class="no-video-text">No remote video available</span></div>')):(t.videoStream=n,e(".promotion-audio-call").height((function(e,t){return t+200})),e("#remotevideo").show()),me()}}):console.log("error in attachPlugins")},this.registerUsernameJanus=function(e){var n={request:"register",username:e};t.videocall.send({message:n,error:function(e){h.error("WebRTC error:",e),ke({error:e,msg:"error in register"})}})},this.handleTicketThumbsClick=function(n){var o=e(n.target).hasClass("up"),a=e("#agentsThumbsUpDown > i.up"),s=e("#agentsThumbsUpDown > i.down");o?(a.removeClass("fa-thumbs-o-up"),a.addClass("fa-thumbs-up"),s.removeClass("fa-thumbs-down"),s.addClass("fa-thumbs-o-down")):(s.removeClass("fa-thumbs-o-down"),s.addClass("fa-thumbs-down"),a.removeClass("fa-thumbs-up"),a.addClass("fa-thumbs-o-up"));var r=o?"UP":"DOWN";e.ajax({url:window.ymConfig.host+"/api/plugin/update_ticket_thumbs_value?bot="+(window.ymConfig.trigger||Y)+"&uid="+i.default.getItem("anon_jid_"+t.storagekey).split("@")[0]+"&thumbDirection="+r,cache:!1,dataType:"json",success:function(e){},error:function(){}})},this.attachTicketThumbsHandler=function(){e("#agentsThumbsUpDown > i").click(t.handleTicketThumbsClick)},this.showTicketThumbsButton=function(n){if(t.mapping&&t.mapping.showThumbsUpDownCSAT){if(e("#agentsThumbsUpDown").show(),console.log(n),n&&n.thumbsUpDirection)if("UP"===n.thumbsUpDirection)e("#agentsThumbsUpDown > i.up").toggleClass("fa-thumbs-o-up fa-thumbs-up");else e("#agentsThumbsUpDown > i.down").toggleClass("fa-thumbs-o-down fa-thumbs-down");t.attachTicketThumbsHandler()}};var H=function(){window.ymConfig.mapping&&(V=!0,t.mapping=window.ymConfig.mapping,t.setMapping()),t.loadBotDetails((function(o,a){var s=(a=a||{}).ticketRunningDetails||{},r=s.ticket||{},c=s.agentProfile;t.ticketRunning=!!c,t.agentProfile=c,t.ticket=r,t.ticket&&(I=!0,t.out(t.ticket),t.showTicketThumbsButton(t.ticket)),r.voiceCall&&s.janusParams&&(t.janusParams=s.janusParams,Promise.all([n.e(21),n.e(10)]).then(n.t.bind(null,10,7)).then((function(e){h=e.default,t.initializeJanus((function(){t.attachJanusPlugins()}))}))),s.queuePosition?(t.queuePosition=s.queuePosition,t.showQueuePosition(s.queuePositionDisplayMessage)):e("#queue-position-display").length&&(e("#queue-position-display")[0].remove(),me()),t.ticketRunning||-1==["x1586762422592","x1566303360194","x1604463993401","x1604463967887"].indexOf(window.ymConfig.bot)||window.ymConfig.ymAuthenticationToken||window.ymConfig.pwa||window.ymConfig.surveyId?t.lazyLoad=!1:t.lazyLoad=!0,window.chat&&window.chat.jid||t.connection||!t.lazyLoad||(t.jid=i.default.getItem("anon_jid_"+t.storagekey)||k(void 0,{},Y),i.default.setItem("anon_jid_"+t.storagekey,t.jid)),Promise.all([n.e(19).then(n.t.bind(null,16,7)),n.e(17).then(n.t.bind(null,17,7)),n.e(18).then(n.t.bind(null,18,7)),n.e(22).then(n.t.bind(null,19,7))]).then((function(e){t.$pres=e[0].$pres,t.$iq=e[0].$iq,t.Strophe=e[0].Strophe,V=!0,t.mapping=a,t.setMapping(),window.ymConfig.zendeskId&&t.loadZChat(),t.lazyLoad?t.fastFetchMapping():t.init(),t.loadOtherResources(),c&&t.changeBotToAgent(c)}))})),"ie"===te.name&&e(document.body).ready((function(e){return n.e(7).then(n.t.bind(null,20,7)).then((function(e){e.use()}))})),"compact"===window.ymConfig.view&&e(document.body).ready((function(e){return n.e(5).then(n.t.bind(null,21,7)).then((function(e){e.use()}))}))};t.executeModifiedCode=!0;var U=function(){t.fetchTicketStatus((function(i,o){var a=(o=o||{}).ticket||{},s=o.agentProfile;t.ticketRunning=!!s,t.agentProfile=s,t.ticket=a,o.ticket&&(t.out(o.ticket),t.showTicketThumbsButton(o.ticket)),a.voiceCall&&o.janusParams&&(t.janusParams=o.janusParams,Promise.all([n.e(21),n.e(10)]).then(n.t.bind(null,10,7)).then((function(e){h=e.default,t.initializeJanus((function(){t.attachJanusPlugins()}))}))),a.voiceCall&&a.dyteParams&&(t.dyteParams=a.dyteParams,t.autoStartCall=a.dyteParams&&a.dyteParams.autoStartCall,t.autoStartCall?D():e(".call-button").show()),o.queuePosition?(t.queuePosition=o.queuePosition,t.showQueuePosition(o.queuePositionDisplayMessage)):e("#queue-position-display").length&&(e("#queue-position-display")[0].remove(),me()),t.ticketRunning||-1==["x1586762422592","x1566303360194","x1604463993401","x1604463967887"].indexOf(window.ymConfig.bot)||window.ymConfig.ymAuthenticationToken||window.ymConfig.pwa||window.ymConfig.surveyId?t.lazyLoad=!1:t.lazyLoad=!0,t.fetchMapping((function(){Promise.all([n.e(19).then(n.t.bind(null,16,7)),n.e(17).then(n.t.bind(null,17,7)),n.e(18).then(n.t.bind(null,18,7)),n.e(22).then(n.t.bind(null,19,7))]).then((function(e){t.$pres=e[0].$pres,t.$iq=e[0].$iq,t.Strophe=e[0].Strophe,t.lazyLoad?t.fetchMapping():t.init(),s&&t.changeBotToAgent(s)}))}))})),"ie"===te.name&&e(document.body).ready((function(e){return n.e(7).then(n.t.bind(null,20,7)).then((function(e){e.use()}))})),"compact"===window.ymConfig.view&&e(document.body).ready((function(e){return n.e(5).then(n.t.bind(null,21,7)).then((function(e){e.use()}))}))};window.ymConfig.lite?e(document.body).ready((function(){t.executeModifiedCode?H():U()})):e(document.body).ready((function(e){return n.e(25).then(n.t.bind(null,47,7)).then((function(){t.executeModifiedCode?H():U()}))}))};var Ie=document.getElementById("ymMsgInput"),Ae=null;Ie.onkeyup=function(t){if(window.chat.skin&&window.chat.skin.enableAutoComplete&&e(".autocomplete-suggestion.selected").length&&8!==t.keyCode&&(38===t.keyCode||40===t.keyCode)){var n=e(".autocomplete-suggestion.selected").text();window.callatTheRateAutoComplete&&(n=window.chat.currentInput+n),e("#ymMsgInput").val(n)}};var Oe,Be,De,Ne,Re,je=function(){window.chat.clearAudio(),ue(),window.isClosedListening=!0};Ie.oninput=function(t){e("#ymMsgInput").hasClass("input-filter-error")&&!b&&(window.chat.handleInputNormal(),e(".send-button").click(!1)),window.firstTimeTyping?(clearTimeout(Ae),Ae=setTimeout((function(){window.chat.send({typing:!1},!0),window.firstTimeTyping=void 0}),1e3)):(window.chat.send({typing:!0},!0),window.firstTimeTyping=!0,clearTimeout(Ae),Ae=setTimeout((function(){window.chat.send({typing:!1},!0),window.firstTimeTyping=void 0}),500)),13===t.keyCode&&window.parent&&window.parent.postMessage(JSON.stringify({event_code:"message-enter"}),"*"),Ie.value?(e(".send-button").removeClass("hide"),e(".mic-button").hasClass("speakFirstMicPosition")||e(".speak-logo").hide()):(e(".send-button").addClass("hide"),e(".mic-button").hasClass("speakFirstMicPosition")||e(".speak-logo").show()),window.chat.skin&&window.chat.skin.enableAutoComplete&&""===e(t.target).val()&&e(".autocomplete-suggestion").remove(),"none"===e(".mic-button").css("display")&&e(".send-button").hasClass("hide")?e(".language-button").addClass("moveRight"):e(".language-button").removeClass("moveRight"),window.chat&&window.chat.mapping&&window.chat.mapping.skin&&window.chat.mapping.skin.speak&&je()},window.fbPageId&&(Oe=document,Be="script",De="facebook-jssdk",Re=Oe.getElementsByTagName(Be)[0],Oe.getElementById(De)||((Ne=Oe.createElement(Be)).id=De,Ne.src="//connect.facebook.net/en_US/sdk.js",Re.parentNode.insertBefore(Ne,Re))),window.sentEventTimestamps=[],window.addEventListener("message",(function(t){try{if(-1!==window.sentEventTimestamps.indexOf(parseInt(t.timeStamp)))return;window.sentEventTimestamps.push(parseInt(t.timeStamp))}catch(t){}try{var n=t.data;if(("string"==typeof n||n instanceof String)&&(n=JSON.parse(t.data)),window.ymConfig.logging&&console.log("postMessage event",n),"ym-client-event"===n.event_code)window.chat.send(n.data,!0);else if("open-event"===n.event_code)window.botInOpenState=!0,window.chat&&window.chat.speak&&window.chat.playAudio(),window.chat.iphoneFix(),mobileAndTabletCheck()||document.getElementById("ymMsgInput").focus(),window.chat&&window.chat.mapping&&window.chat.mapping.skin&&window.chat.mapping.skin.sendEventOnOpen&&window.chat.send({event:{code:"bot-opened"}},!0),window.chat&&window.chat.mapping&&window.chat.mapping.skin&&window.chat.shouldLoadLocalMessage()&&!window.botOpenClicked&&ye(),window.botOpenClicked&&!window.promotionQueue||(window.botOpenClicked=!0,window.chat.loadPromotions());else if("close-event"===n.event_code)z(),self.botInOpenState=!1,je(),window.chat&&window.chat.mapping&&window.chat.mapping.skin&&window.chat.mapping.skin.sendEventOnClose&&window.chat.send({event:{code:"bot-closed"}},!0);else if("image-closed"===n.event_code)try{window.ymConfig.handlers.sendIOSEvent({code:"image-closed",internal:!0})}catch(t){}else"app-event-update-skin"===n.event_code?(window.chat.skin=n.data,window.chat.setSkin()):"pwa-notification-status-event"===n.event_code&&window.chat&&window.chat.mapping&&window.chat.mapping.skin&&window.chat.mapping.skin.sendEventOnPwaNotificationConsent&&window.chat.send({event:{code:"pwa-notification-status",data:n.data}},!0);if("webview-resize"===n.code&&e("#"+n.data.id).height(n.data.height),n.event_code,n.event_code,"send-voice-text"===n.event_code&&window.chat.send(n.data),"dyteMeetingEnd"===n.event_code){var i=document.getElementById("ymDyteIfram");i&&i.remove(),e(".chat-button").hide(),e(".call-button").show()}"send-custom-payload"===n.event_code&&window.chat.mapping.skin&&window.chat.mapping.skin.sendPayloadToBot&&window.chat.send({event:{code:"payload-from-bot",data:n.data}},!0)}catch(t){console.log(t)}}),!1),"IE"!==te()||window.ymConfig.banner||a.default.init({swf_path:window.ymConfig.host+"/justrec_5.swf",host:window.ymConfig.host+"/api/admin/proxy/voice/raw",recordingStopped:function(){window.chat.showTyping(),a.default.send()},sendingFinished:function(e){window.chat.hideTyping(),window.chat.send(JSON.parse(e).data)}},"myflashrec")}))}))}).call(this,n(0),n(0))},function(e,t,n){(function(t){function n(e){var t=a([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]]).filter((function(t){return t.rule&&t.rule.test(e)}))[0];return t?t.name:null}function i(){return void 0!==t&&t.version&&{name:"node",version:t.version.slice(1),os:t.platform}}function o(e){var t=a([["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/]]);if(!e)return null;var i=t.map((function(t){var n=t.rule.exec(e),i=n&&n[1].split(/[._]/).slice(0,3);return i&&i.length<3&&(i=i.concat(1==i.length?[0,0]:[0])),n&&{name:t.name,version:i.join(".")}})).filter(Boolean)[0]||null;return i&&(i.os=n(e)),/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(e)&&((i=i||{}).bot=!0),i}function a(e){return e.map((function(e){return{name:e[0],rule:e[1]}}))}e.exports={detect:function(){return"undefined"!=typeof navigator?o(navigator.userAgent):i()},detectOS:n,getNodeVersion:i,parseUserAgent:o}}).call(this,n(15))},function(e,t,n){"use strict";(function(t){var n="https://cdn.yellowmessenger.com",i="".concat(n,"/files/images/minus.png"),o="".concat(n,"/files/images/close.png"),a="".concat(n,"/files/images/notify.mp3"),s="".concat(n,"/speech_beep.wav"),r="".concat(n,"/files/images/voice-logo.png"),c=null;document.body.style.setProperty("--botBackgroundImage","url("+n+"/files/images/bg.png)"),e.exports={setJid:function(e){c||(e=e.split("@")[0],document.getElementById("fileForm").action=document.getElementById("fileForm").action+e,c=e)},createUI:function(e){var n=e.banner,c=e.pwa;e.gtm&&t(document.body).append('<noscript><iframe src="https://www.googletagmanager.com/ns.html?id='+e.gtm+'" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>'),t(document.body).append('<div id="chatContainer" class="container '+(n?"banner":"")+'" style="display: none">\n            <div id="emailModal" class="email-backdrop" style="display: none">\n                <div id="emailInputContainer" class="email-holder">\n                    Chat transcript will be sent to the following email address\n                    <div>\n                       <input id="emailInput" name="email" class="email-input" type="email" placeholder="john@example.com" />\n                       <span id="emailSuffix" class="input-suffix"></span>\n                    </div>\n                    <div id="email-error">&nbsp;</div>\n                    <div>\n                        <button id="emailCancelBtn" class="email-btn cancel">cancel</button>\n                        <button id="emailSendBtn" class="email-btn send" disabled>send</button>\n                    </div>\n               </div>\n                <div id="emailSuccess" class="email-holder" style="display: none;">\n                    <i class="email-close-icon fa fa-close"></i>                    Successfully sent chat transcript.\n                    <br>\n               </div>\n                <div id="emailFail" class="email-holder" style="display: none;">\n                    <i class="email-close-icon fa fa-close"></i>                    Failed to send chat transcript.\n                    <br>\n               </div>\n           </div>    <div>\n'+(n?"":'        <div id="chatDetails" class="full">\n'+(c||"compact"===e.view?"\n":'            <span class="back"><img class="close-chat" src="'+o+'" /></span>\n')+'             <img class="icon" src="https://cdn.yellowmessenger.com/files/images/avatar.png"/>\n             <i class="status-dot online-dot fa fa-circle hide" aria-hidden="true"></i>\n            <div class="title">Chat with us</div>\n            <div class="sub-title"></div>\n            <div class="actions">\n            </div>\n            <div id="agentsThumbsUpDown">\n             <i class="fa up fa-thumbs-o-up" aria-hidden="true"></i>             <i class="fa down fa-thumbs-o-down" aria-hidden="true"></i>            </div>\n'+("compact"===e.view?'<span class="close-button"><img class="close-chat" src="'+i+'" /></span>\n':"")+"        </div>\n")+'        <div class="chat-background '+(n?"banner":"")+'" id="player"></div>\n        <div class="choose-bot-container hide">\n            <div class="choose-bot">\n                Get started by selecting a bot\n            </div>\n            <div class="bots">\n            </div>\n        </div>\n        <div id="chatBoxMainContainer" class="message-icons '+(n?"banner":"live-chat")+'">\n            <div class="load-more-older-message hide"><i class="fa fa-spinner fa-pulse fa-2x fa-fw" aria-hidden="true"></i></div>\n            <div class="location-selector"><div id="map" style="height: calc(100% - 50px); width: 100%; position: absolute;top: 0; left: 0;z-index: 999;"></div>           <div style="position: absolute;\n    bottom: 0;\n    padding: 14px 0;\n    font-size: 16px;\n    border-top: 1px solid #eee;\n    width: 100%;\n    text-align: center; background: #fff;"><a href="javascript:window.chat.selectLocation();">Select location</a></div></div>\n           <div class="welcome-message hide"><div></div></div>\n           <div id="chatBoxMain" class="row">           </div>\n            <div id="chatOptions"></div>\n            <div class="typingDiv" id="typing" style="display:none"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>\n    </div>\n    <div class="send-input '+(n?"banner":"")+'">      <div class="send-input-form">\n        <form id="ymChatForm">\n            <input class="form-control input-lg input auto-complete" id ="ymMsgInput" type="text" placeholder="Type your message ..." autocomplete="off" />\n        </form>\n        <ul class="language-menu hide">\n            <li class="EN">English</li>\n        </ul>\n        <div class="listeningAudioText hide">I am listening...</div>\n        <div class="listeningAudio hide"><i class="fa fa-times close-listening" aria-hidden="true"></i><svg class="listeningSVG"><path class="listeningPath" d="M10,10 L50,100 L90,50"></path></svg></div>\n        <div class="send-button hide"><i id="sendIcon" title="Send" class="fa fa-send send"></i></div>\n        <div class="language-button"><i class="fa fa-language" aria-hidden="true"></i></div>\n        <div class="home-button hide"><i class="fa fa-home" aria-hidden="true"></i></div>\n        <div class="mic-button"><div class="tap-to-speak hide">Tap to speak</div><img class="speak-logo" src="'+r+'" /></div>\n      </div>\n        <div class="input-actions">\n        <div class="powered-by">â¡ï¸Powered by yellow.ai</div>        <span id="bot-type"></span>\n        <div class="ym-action-items">           <i title="Leave Chat" class="fa fa-sign-out" style="display: none"></i>            <i class="chat-button fa fa-comments" style="display: none"></i>            <i class="call-button fa fa-phone" style="display: none"></i>            <i id="emailIcon" class="fa fa-envelope hide"></i>\n            <i onclick="document.getElementById(\'chatFile\').click();" class="fa fa-paperclip attach"><form id="fileForm" >\n                    <input type="file" title="Upload file" name="images" style="display: none" id="chatFile"/>\n                    <input type="hidden" name="botID" value=""/>\n                </form></i>\n            <i class="speak-icon fa fa-volume-off hide"></i>\n           <div class="language-action-tab hide"><i class="fa fa-language" aria-hidden="true"></i></div>\n            <i title="Main menu" class="fa fa-home"></i>\n        </div></div>\n<div id="audio"></div>\n<audio id="alert" class="hide" src="'+a+'"></audio>\n<audio id="voiceAlert" class="hide" src="'+s+'"></audio>\n<iframe id="upload_target" name="upload_target" style="width:0;height:0;border:0px solid #fff;"></iframe>\n    </div>\n</div>')},enableMap:function(e){if(e.enableMapSelection){window.initMap=function(){window.map=new google.maps.Map(document.getElementById("map"),{center:{lat:12.9787567,lng:77.715125},zoom:17,mapTypeControl:!1})},navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};console.log(t),console.log(e),window.map.setCenter(t),window.marker=new google.maps.Marker({position:t,map:window.map,title:"Your location",draggable:!0})}),(function(e){console.log(e)})),t(document.body).append('<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDOnd3s6gMOHyUwesZMaHdq92LkgexGslI&callback=initMap"><\/script>')}},loadAssets:function(){t("#closeicon").attr("src",o),t("#minusicon").attr("src",i),t("#alert").attr("src",a),t("#speaklogo").attr("src",r)}}}).call(this,n(0))},function(e,t,n){"use strict";e.exports={settings:{},init:function(e,t){for(var n in t&&(t.jquery?t=t[0]:"string"==typeof t&&(/^#.*/.test(t)&&(t=t.slice(1)),t=document.getElementById(t))),t&&1===t.nodeType||(t=document.getElementsByTagName("body")[0]),this.settings={rec_width:480,rec_height:320,recorderlayout_id:"justrec_area",recorder_id:"justrec",recorder_name:"justrec",swf_path:"justrec_5.swf",host:"micupload.php?f=justrec.mp3",recordingStarted:function(){},recordingStopped:function(){},recordingError:function(){},recordingActivity:function(e,t){},sendingFinished:function(e){},sendingProgress:function(e){}},e)this.settings[n]=e[n];var i=function(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)},o=document.createElement("object");o.setAttribute("id",this.settings.recorder_id),o.setAttribute("name",this.settings.recorder_name),o.setAttribute("data",this.settings.swf_path+"?host="+this.settings.host),o.setAttribute("type","application/x-shockwave-flash"),o.setAttribute("width",this.settings.rec_width),o.setAttribute("height",this.settings.rec_height),i(o,"allowscriptaccess","always"),i(o,"bgcolor","#FFF"),i(o,"wmode","transparent");var a=document.createElement("div");a.setAttribute("id",this.settings.recorderlayout_id),a.setAttribute("style","position:absolute; top:0; left:0; z-index:-1"),a.appendChild(o);var s=t.style.position.toUpperCase(),r=""===s||"STATIC"===s;"BODY"!==t.nodeName.toUpperCase()&&r&&(t.style.position="relative"),t.appendChild(a)},getFlashMovie:function(e){return window.document[e]},record:function(e){document.getElementById(this.settings.recorderlayout_id).style.zIndex=1e5,this.getFlashMovie(this.settings.recorder_name).jStartRecording(e)},stop:function(){this.getFlashMovie(this.settings.recorder_name).jStopRecording()},send:function(){this.getFlashMovie(this.settings.recorder_name).jSendFileToServer()},recordingStarted:function(){this.settings.recordingStarted()},recordingStopped:function(){this.settings.recordingStopped()},recordingError:function(){this.settings.recordingError()},sendingProgress:function(e){this.settings.sendingProgress(e)},sendingFinished:function(e){this.settings.sendingFinished(e)},recordingActivity:function(e,t){document.getElementById(this.settings.recorderlayout_id).style.zIndex=-1,this.settings.recordingActivity(e,t)}}},function(e,t,n){"use strict";(function(e){e.exports=function(t){for(var n=[],i=1;i<=1e3;i++)n.push(i);var o,a=0,s=999,r=0,c=!0,l=20,d=10,u=5,p=35,g=p,f=5,m=p;e.animate=function(){var i="M"+n.map((function(e){t?(p=2,f=1,u=1,r=1):(u=5,p=35,f=5);var n=g+r*Math.sin((e+a)/10);return++s>=1e3&&(s=0,c?r+=u:r-=u,r>=m?(++l>=23?(m=f,l=0,d=2):l>=20&&(m=p,d=1),t&&(d=10),c=!1):r<=f&&(c=!0)),[e,n]})).map((function(e){return e[0]+","+e[1]})).join(" L");document.querySelector("path").setAttribute("d",i),a+=d,o&&cancelAnimationFrame(o),o=requestAnimationFrame(e.animate)},e.animate()}}).call(this,n(33)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var i,o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(35),i=[n(0)],void 0===(o=function(e){var t=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};function n(t){return!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function i(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}return t.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(o,s,r){"object"===a(s)&&(r=s,s=0),"function"==typeof r&&(r={onAfter:r}),"max"===o&&(o=9e9),r=e.extend({},t.defaults,r),s=s||r.duration;var c=r.queue&&r.axis.length>1;return c&&(s/=2),r.offset=i(r.offset),r.over=i(r.over),this.each((function(){if(null!==o){var l,d=n(this),u=d?this.contentWindow||window:this,p=e(u),g=o,f={};switch(a(g)){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(g)){g=i(g);break}if(!(g=d?e(g):e(g,u)).length)return;case"object":(g.is||g.style)&&(l=(g=e(g)).offset())}var m=e.isFunction(r.offset)&&r.offset(u,g)||r.offset;e.each(r.axis.split(""),(function(e,n){var i="x"===n?"Left":"Top",o=i.toLowerCase(),a="scroll"+i,s=p[a](),w=t.max(u,n);if(l)f[a]=l[o]+(d?0:s-p.offset()[o]),r.margin&&(f[a]-=parseInt(g.css("margin"+i),10)||0,f[a]-=parseInt(g.css("border"+i+"Width"),10)||0),f[a]+=m[o]||0,r.over[o]&&(f[a]+=g["x"===n?"width":"height"]()*r.over[o]);else{var v=g[o];f[a]=v.slice&&"%"===v.slice(-1)?parseFloat(v)/100*w:v}r.limit&&/^\d+$/.test(f[a])&&(f[a]=f[a]<=0?0:Math.min(f[a],w)),!e&&r.axis.length>1&&(s===f[a]?f={}:c&&(h(r.onAfterFirst),f={}))})),h(r.onAfter)}function h(t){var n=e.extend({},r,{queue:!0,duration:s,complete:t&&function(){t.call(u,g,r)}});p.animate(f,n)}}))},t.max=function(t,i){var o="x"===i?"Width":"Height",a="scroll"+o;if(!n(t))return t[a]-e(t)[o.toLowerCase()]();var s="client"+o,r=t.ownerDocument||t.document,c=r.documentElement,l=r.body;return Math.max(c[a],l[a])-Math.min(c[s],l[s])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var i=Math.round(t.now);n!==i&&(e(t.elem)[t.prop](i),t._last=this.get(t))}},t}.apply(t,i))||(e.exports=o)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";var i,o,a;o=[],void 0===(a="function"==typeof(i=function(){var e,t,n,i,o=function e(t){t=t||{},this.version=e.version,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"!=typeof t.email||t.email,this.phone="boolean"!=typeof t.phone||t.phone,this.hashtag=t.hashtag||!1,this.mention=t.mention||!1,this.newWindow="boolean"!=typeof t.newWindow||t.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"!=typeof t.stripTrailingSlash||t.stripTrailingSlash;var n=this.mention;if(!1!==n&&"twitter"!==n&&"instagram"!==n)throw new Error("invalid `mention` cfg - see docs");var i=this.hashtag;if(!1!==i&&"twitter"!==i&&"facebook"!==i&&"instagram"!==i)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||"",this.replaceFn=t.replaceFn||null,this.context=t.context||this,this.htmlParser=null,this.matchers=null,this.tagBuilder=null};return o.link=function(e,t){return new o(t).link(e)},o.parse=function(e,t){return new o(t).parse(e)},o.version="1.4.3",o.prototype={constructor:o,normalizeUrlsCfg:function(e){return null==e&&(e=!0),"boolean"==typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!=typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!=typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!=typeof e.tldMatches||e.tldMatches}},normalizeStripPrefixCfg:function(e){return null==e&&(e=!0),"boolean"==typeof e?{scheme:e,www:e}:{scheme:"boolean"!=typeof e.scheme||e.scheme,www:"boolean"!=typeof e.www||e.www}},normalizeTruncateCfg:function(e){return"number"==typeof e?{length:e,location:"end"}:o.Util.defaults(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},parse:function(e){for(var t=this.getHtmlParser().parse(e),n=0,i=[],o=0,a=t.length;o<a;o++){var s=t[o],r=s.getType();if("element"===r&&"a"===s.getTagName())s.isClosing()?n=Math.max(n-1,0):n++;else if("text"===r&&0===n){var c=this.parseText(s.getText(),s.getOffset());i.push.apply(i,c)}}return i=this.compactMatches(i),this.removeUnwantedMatches(i)},compactMatches:function(e){e.sort((function(e,t){return e.getOffset()-t.getOffset()}));for(var t=0;t<e.length-1;t++){var n=e[t],i=n.getOffset(),o=n.getMatchedText().length,a=i+o;if(t+1<e.length){if(e[t+1].getOffset()===i){var s=e[t+1].getMatchedText().length>o?t:t+1;e.splice(s,1);continue}e[t+1].getOffset()<=a&&e.splice(t+1,1)}}return e},removeUnwantedMatches:function(e){var t=o.Util.remove;return this.hashtag||t(e,(function(e){return"hashtag"===e.getType()})),this.email||t(e,(function(e){return"email"===e.getType()})),this.phone||t(e,(function(e){return"phone"===e.getType()})),this.mention||t(e,(function(e){return"mention"===e.getType()})),this.urls.schemeMatches||t(e,(function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()})),this.urls.wwwMatches||t(e,(function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()})),this.urls.tldMatches||t(e,(function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()})),e},parseText:function(e,t){t=t||0;for(var n=this.getMatchers(),i=[],o=0,a=n.length;o<a;o++){for(var s=n[o].parseMatches(e),r=0,c=s.length;r<c;r++)s[r].setOffset(t+s[r].getOffset());i.push.apply(i,s)}return i},link:function(e){if(!e)return"";for(var t=this.parse(e),n=[],i=0,o=0,a=t.length;o<a;o++){var s=t[o];n.push(e.substring(i,s.getOffset())),n.push(this.createMatchReturnVal(s)),i=s.getOffset()+s.getMatchedText().length}return n.push(e.substring(i)),n.join("")},createMatchReturnVal:function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof o.HtmlTag?t.toAnchorString():e.buildTag().toAnchorString()},getHtmlParser:function(){var e=this.htmlParser;return e||(e=this.htmlParser=new o.htmlParser.HtmlParser),e},getMatchers:function(){if(this.matchers)return this.matchers;var e=o.matcher,t=this.getTagBuilder(),n=[new e.Hashtag({tagBuilder:t,serviceName:this.hashtag}),new e.Email({tagBuilder:t}),new e.Phone({tagBuilder:t}),new e.Mention({tagBuilder:t,serviceName:this.mention}),new e.Url({tagBuilder:t,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash})];return this.matchers=n},getTagBuilder:function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new o.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e}},o.match={},o.matcher={},o.htmlParser={},o.truncate={},o.Util={abstractMethod:function(){throw"abstract"},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},defaults:function(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n]);return e},extend:function(e,t){var n,i=e.prototype,a=function(){};a.prototype=i;var s=(n=t.hasOwnProperty("constructor")?t.constructor:function(){i.constructor.apply(this,arguments)}).prototype=new a;return s.constructor=n,s.superclass=i,delete t.constructor,o.Util.assign(s,t),n},ellipsis:function(e,t,n){var i;return e.length>t&&(null==n?(n="&hellip;",i=3):i=n.length,e=e.substring(0,t-i)+n),e},indexOf:function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},remove:function(e,t){for(var n=e.length-1;n>=0;n--)!0===t(e[n])&&e.splice(n,1)},splitAndCapture:function(e,t){for(var n,i=[],o=0;n=t.exec(e);)i.push(e.substring(o,n.index)),i.push(n[0]),o=n.index+n[0].length;return i.push(e.substring(o)),i},trim:function(e){return e.replace(this.trimRegex,"")}},o.HtmlTag=o.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(e){o.Util.assign(this,e),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(e){return this.tagName=e,this},getTagName:function(){return this.tagName||""},setAttr:function(e,t){return this.getAttrs()[e]=t,this},getAttr:function(e){return this.getAttrs()[e]},setAttrs:function(e){var t=this.getAttrs();return o.Util.assign(t,e),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(e){return this.setAttr("class",e)},addClass:function(e){for(var t,n=this.getClass(),i=this.whitespaceRegex,a=o.Util.indexOf,s=n?n.split(i):[],r=e.split(i);t=r.shift();)-1===a(s,t)&&s.push(t);return this.getAttrs().class=s.join(" "),this},removeClass:function(e){for(var t,n=this.getClass(),i=this.whitespaceRegex,a=o.Util.indexOf,s=n?n.split(i):[],r=e.split(i);s.length&&(t=r.shift());){var c=a(s,t);-1!==c&&s.splice(c,1)}return this.getAttrs().class=s.join(" "),this},getClass:function(){return this.getAttrs().class||""},hasClass:function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},setInnerHtml:function(e){return this.innerHtml=e,this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")}}),o.RegexLib=function(){var e="A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-ËË-ËË -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½Í¿ÎÎ-ÎÎÎ-Î¡Î£-ÏµÏ·-ÒÒ-Ô¯Ô±-ÕÕÕ¡-Ö×-×ª×°-×²Ø -ÙÙ®Ù¯Ù±-ÛÛÛ¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ-Ü¯Ý-Þ¥Þ±ß-ßªß´ßµßºà -à à à ¤à ¨à¡-à¡à¢ -à¢´à¤-à¤¹à¤½à¥à¥-à¥¡à¥±-à¦à¦-à¦à¦à¦à¦-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§à§à§à§-à§¡à§°à§±à¨-à¨à¨à¨à¨-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©-à©à©à©²-à©´àª-àªàª-àªàª-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à«¹à¬-à¬à¬à¬à¬-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­à­à­-à­¡à­±à®à®-à®à®-à®à®-à®à®à®à®à®à®à®£à®¤à®¨-à®ªà®®-à®¹à¯à°-à°à°-à°à°-à°¨à°ª-à°¹à°½à±-à±à± à±¡à²-à²à²-à²à²-à²¨à²ª-à²³à²µ-à²¹à²½à³à³ à³¡à³±à³²à´-à´à´-à´à´-à´ºà´½àµàµ-àµ¡àµº-àµ¿à¶-à¶à¶-à¶±à¶³-à¶»à¶½à·-à·à¸-à¸°à¸²à¸³à¹-à¹àºàºàºàºàºàºàºàº-àºàº-àºàº¡-àº£àº¥àº§àºªàº«àº­-àº°àº²àº³àº½à»-à»à»à»-à»à¼à½-à½à½-à½¬à¾-à¾á-áªá¿á-áá-áá¡á¥á¦á®-á°áµ-ááá -áááá-áºá¼-áá-áá-ááá-áá -áá-áá-á°á²-áµá¸-á¾áá-áá-áá-áá-áá-áá-áá -áµá¸-á½á-á¬á¯-á¿á-áá -áªá±-á¸á-áá-áá -á±á-áá -á¬á®-á°á-á³ááá  -á¡·á¢-á¢¨á¢ªá¢°-á£µá¤-á¤á¥-á¥­á¥°-á¥´á¦-á¦«á¦°-á§á¨-á¨á¨ -á©áª§á¬-á¬³á­-á­á®-á® á®®á®¯á®º-á¯¥á°-á°£á±-á±á±-á±½á³©-á³¬á³®-á³±á³µá³¶á´-á¶¿á¸-á¼á¼-á¼á¼ -á½á½-á½á½-á½á½á½á½á½-á½½á¾-á¾´á¾¶-á¾¼á¾¾á¿-á¿á¿-á¿á¿-á¿á¿-á¿á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â-ââââ-âââ-ââ¤â¦â¨âª-â­â¯-â¹â¼-â¿â-âââââ°-â°®â°°-â±â± -â³¤â³«-â³®â³²â³³â´-â´¥â´§â´­â´°-âµ§âµ¯â¶-â¶â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·-â·â·-â·â·-â·â·-â·â¸¯ããã±-ãµã»ã¼ã-ãã-ãã¡-ãºã¼-ã¿ã-ã­ã±-ãã -ãºã°-ã¿ã-ä¶µä¸-é¿ê-êê-ê½ê-êê-êêªê«ê-ê®ê¿-êê -ê¥ê-êê¢-êê-ê­ê°-ê·ê·-ê ê -ê ê -ê ê -ê ¢ê¡-ê¡³ê¢-ê¢³ê£²-ê£·ê£»ê£½ê¤-ê¤¥ê¤°-ê¥ê¥ -ê¥¼ê¦-ê¦²ê§ê§ -ê§¤ê§¦-ê§¯ê§º-ê§¾ê¨-ê¨¨ê©-ê©ê©-ê©ê© -ê©¶ê©ºê©¾-êª¯êª±êªµêª¶êª¹-êª½ê«ê«ê«-ê«ê« -ê«ªê«²-ê«´ê¬-ê¬ê¬-ê¬ê¬-ê¬ê¬ -ê¬¦ê¬¨-ê¬®ê¬°-ê­ê­-ê­¥ê­°-ê¯¢ê°-í£í°-íí-í»ï¤-ï©­ï©°-ï«ï¬-ï¬ï¬-ï¬ï¬ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­ï­ï­ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½ï½¦-ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿",t=e+"0-9Ù -Ù©Û°-Û¹ß-ßà¥¦-à¥¯à§¦-à§¯à©¦-à©¯à«¦-à«¯à­¦-à­¯à¯¦-à¯¯à±¦-à±¯à³¦-à³¯àµ¦-àµ¯à·¦-à·¯à¹-à¹à»-à»à¼ -à¼©á-áá-áá -á©á -á á¥-á¥á§-á§áª-áªáª-áªá­-á­á®°-á®¹á±-á±á±-á±ê -ê©ê£-ê£ê¤-ê¤ê§-ê§ê§°-ê§¹ê©-ê©ê¯°-ê¯¹ï¼-ï¼";return{alphaNumericCharsStr:t,alphaCharsStr:e,domainNameRegex:new RegExp("["+t+".\\-]*["+t+"\\-]")}}(),o.AnchorTagBuilder=o.Util.extend(Object,{constructor:function(e){e=e||{},this.newWindow=e.newWindow,this.truncate=e.truncate,this.className=e.className},build:function(e){return new o.HtmlTag({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},createAttrs:function(e){var t={href:e.getAnchorHref()},n=this.createCssClass(e);return n&&(t.class=n),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},createCssClass:function(e){var t=this.className;if(t){for(var n=[t],i=e.getCssClassSuffixes(),o=0,a=i.length;o<a;o++)n.push(t+"-"+i[o]);return n.join(" ")}return""},processAnchorText:function(e){return this.doTruncate(e)},doTruncate:function(e){var t=this.truncate;if(!t||!t.length)return e;var n=t.length,i=t.location;return"smart"===i?o.truncate.TruncateSmart(e,n):"middle"===i?o.truncate.TruncateMiddle(e,n):o.truncate.TruncateEnd(e,n)}}),o.htmlParser.HtmlParser=o.Util.extend(Object,{htmlRegex:function(){var e=/[0-9a-zA-Z][0-9a-zA-Z:]*/,t=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,n=/[^\s"'>\/=\x00-\x1F\x7F]+/.source+"(?:\\s*=\\s*"+t.source+")?";return new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",n,"|",t.source+")",")*",">",")","|","(?:","<(/)?","(?:",/!--([\s\S]+?)--/.source,"|","(?:","("+e.source+")","\\s*/?",")","|","(?:","("+e.source+")","\\s+","(?:","(?:\\s+|\\b)",n,")*","\\s*/?",")",")",">",")"].join(""),"gi")}(),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(e){for(var t,n,i=this.htmlRegex,o=0,a=[];null!==(t=i.exec(e));){var s=t[0],r=t[3],c=t[1]||t[4]||t[5],l=!!t[2],d=t.index,u=e.substring(o,d);u&&(n=this.parseTextAndEntityNodes(o,u),a.push.apply(a,n)),r?a.push(this.createCommentNode(d,s,r)):a.push(this.createElementNode(d,s,c,l)),o=d+s.length}if(o<e.length){var p=e.substring(o);p&&(n=this.parseTextAndEntityNodes(o,p)).forEach((function(e){a.push(e)}))}return a},parseTextAndEntityNodes:function(e,t){for(var n=[],i=o.Util.splitAndCapture(t,this.htmlCharacterEntitiesRegex),a=0,s=i.length;a<s;a+=2){var r=i[a],c=i[a+1];r&&(n.push(this.createTextNode(e,r)),e+=r.length),c&&(n.push(this.createEntityNode(e,c)),e+=c.length)}return n},createCommentNode:function(e,t,n){return new o.htmlParser.CommentNode({offset:e,text:t,comment:o.Util.trim(n)})},createElementNode:function(e,t,n,i){return new o.htmlParser.ElementNode({offset:e,text:t,tagName:n.toLowerCase(),closing:i})},createEntityNode:function(e,t){return new o.htmlParser.EntityNode({offset:e,text:t})},createTextNode:function(e,t){return new o.htmlParser.TextNode({offset:e,text:t})}}),o.htmlParser.HtmlNode=o.Util.extend(Object,{offset:void 0,text:void 0,constructor:function(e){o.Util.assign(this,e)},getType:o.Util.abstractMethod,getOffset:function(){return this.offset},getText:function(){return this.text}}),o.htmlParser.CommentNode=o.Util.extend(o.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}}),o.htmlParser.ElementNode=o.Util.extend(o.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}}),o.htmlParser.EntityNode=o.Util.extend(o.htmlParser.HtmlNode,{getType:function(){return"entity"}}),o.htmlParser.TextNode=o.Util.extend(o.htmlParser.HtmlNode,{getType:function(){return"text"}}),o.match.Match=o.Util.extend(Object,{constructor:function(e){this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset},getType:o.Util.abstractMethod,getMatchedText:function(){return this.matchedText},setOffset:function(e){this.offset=e},getOffset:function(){return this.offset},getAnchorHref:o.Util.abstractMethod,getAnchorText:o.Util.abstractMethod,getCssClassSuffixes:function(){return[this.getType()]},buildTag:function(){return this.tagBuilder.build(this)}}),o.match.Email=o.Util.extend(o.match.Match,{constructor:function(e){o.match.Match.prototype.constructor.call(this,e),this.email=e.email},getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),o.match.Hashtag=o.Util.extend(o.match.Match,{constructor:function(e){o.match.Match.prototype.constructor.call(this,e),this.serviceName=e.serviceName,this.hashtag=e.hashtag},getType:function(){return"hashtag"},getServiceName:function(){return this.serviceName},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;default:throw new Error("Unknown service name to point hashtag to: ",e)}},getAnchorText:function(){return"#"+this.hashtag}}),o.match.Phone=o.Util.extend(o.match.Match,{constructor:function(e){o.match.Match.prototype.constructor.call(this,e),this.number=e.number,this.plusSign=e.plusSign},getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+(this.plusSign?"+":"")+this.number},getAnchorText:function(){return this.matchedText}}),o.match.Mention=o.Util.extend(o.match.Match,{constructor:function(e){o.match.Match.prototype.constructor.call(this,e),this.mention=e.mention,this.serviceName=e.serviceName},getType:function(){return"mention"},getMention:function(){return this.mention},getServiceName:function(){return this.serviceName},getAnchorHref:function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: ",this.serviceName)}},getAnchorText:function(){return"@"+this.mention},getCssClassSuffixes:function(){var e=o.match.Match.prototype.getCssClassSuffixes.call(this),t=this.getServiceName();return t&&e.push(t),e}}),o.match.Url=o.Util.extend(o.match.Match,{constructor:function(e){o.match.Match.prototype.constructor.call(this,e),this.urlMatchType=e.urlMatchType,this.url=e.url,this.protocolUrlMatch=e.protocolUrlMatch,this.protocolRelativeMatch=e.protocolRelativeMatch,this.stripPrefix=e.stripPrefix,this.stripTrailingSlash=e.stripTrailingSlash},schemePrefixRegex:/^(https?:\/\/)?/i,wwwPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrlMatchType:function(){return this.urlMatchType},getUrl:function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},getAnchorHref:function(){return this.getUrl().replace(/&amp;/g,"&")},getAnchorText:function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),e},stripSchemePrefix:function(e){return e.replace(this.schemePrefixRegex,"")},stripWwwPrefix:function(e){return e.replace(this.wwwPrefixRegex,"$1")},stripProtocolRelativePrefix:function(e){return e.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e}}),o.tldRegex=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermÃ¶gensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermÃ¶gensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|international|lifeinsurance|orientexpress|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|pamperedchef|scholarships|versicherung|xn--3e0b707e|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--3bst00m|xn--3ds443g|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|à®à®¿à®à¯à®à®ªà¯à®ªà¯à®°à¯|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|goodhands|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|mcdonalds|melbourne|microsoft|montblanc|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|telecity|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|Ø§ÙØ³Ø¹ÙØ¯ÙØ©|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|panerai|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|spiegel|staples|starhub|statoil|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|ÐºÐ°ÑÐ¾Ð»Ð¸Ðº|Ø§ÙØ¬Ø²Ø§Ø¦Ø±|Ø§ÙØ¹ÙÙØ§Ù|Ù¾Ø§Ú©Ø³ØªØ§Ù|ÙØ§Ø«ÙÙÙÙ|ÙÙØ¨Ø§ÙÙÙ|à®à®¨à¯à®¤à®¿à®¯à®¾|abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|xperia|yachts|yandex|zappos|Ð¼Ð¾ÑÐºÐ²Ð°|Ð¾Ð½Ð»Ð°Ð¹Ð½|Ø§Ø¨ÙØ¸Ø¨Ù|Ø§Ø±Ø§ÙÙÙ|Ø§ÙØ§Ø±Ø¯Ù|Ø§ÙÙØºØ±Ø¨|Ø§ÙØ§Ø±Ø§Øª|ÙÙØ³Ø·ÙÙ|ÙÙÙØ³ÙØ§|à®à®²à®à¯à®à¯|ãã¡ãã·ã§ã³|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|boots|bosch|build|canon|cards|chase|cheap|chloe|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vista|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|Ø§ÛØ±Ø§Ù|Ø¨Ø§Ø²Ø§Ø±|Ø¨Ú¾Ø§Ø±Øª|Ø³ÙØ¯Ø§Ù|Ø³ÙØ±ÙØ©|ÙÙØ±Ø§Ù|à¤¸à¤à¤à¤ à¤¨|à¦¬à¦¾à¦à¦²à¦¾|à°­à°¾à°°à°¤à±|åéå¤§éåº|aarp|able|adac|aero|aigo|akdn|ally|amex|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|mtpc|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sapo|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|Ð´ÐµÑÐ¸|ÑÐ°Ð¹Ñ|Ø¨ÙØªÙ|ØªÙÙØ³|Ø´Ø¨ÙØ©|Ø¹Ø±Ø§Ù|Ø¹ÙØ§Ù|ÙÙÙØ¹|à¤­à¤¾à¤°à¤¤|à¦­à¦¾à¦°à¦¤|à¨­à¨¾à¨°à¨¤|àª­àª¾àª°àª¤|à¶½à¶à¶à·|ã°ã¼ã°ã«|ã¯ã©ã¦ã|ãã¤ã³ã|å¤§ä¼æ±½è½¦|ç»ç»æºæ|é»è¨çç§|é¦æ ¼éæ|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|htc|ibm|ice|icu|ifm|ing|ink|int|ist|itv|iwc|jcb|jcp|jio|jlc|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|lol|lpl|ltd|man|mba|mcd|med|men|meo|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|Ð±ÐµÐ»|ÐºÐ¾Ð¼|ÒÐ°Ð·|Ð¼ÐºÐ´|Ð¼Ð¾Ð½|Ð¾ÑÐ³|ÑÑÑ|ÑÑÐ±|ÑÐºÑ|Õ°Õ¡Õµ|×§××|ÙØ·Ø±|ÙÙÙ|ÙØµØ±|à¤à¥à¤®|à¤¨à¥à¤|à¸à¸­à¸¡|à¹à¸à¸¢|ã¹ãã¢|ã»ã¼ã«|ã¿ããª|ä¸­æç½|å¤©ä¸»æ|æç±ä½ |æ°å å¡|æ·¡é©¬é¡|è¯ºåºäº|é£å©æµ¦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ÎµÎ»|Ð±Ð³|ÐµÑ|ÑÑ|áá|ë·ë·|ë·ì»´|ì¼ì±|íêµ­|ã³ã |ä¸ç|ä¸­ä¿¡|ä¸­å½|ä¸­å|ä¼ä¸|ä½å±±|ä¿¡æ¯|å¥åº·|å«å¦|å¬å¸|å¬ç|å°æ¹¾|å°ç£|åå|ååº|åæ |åé|å¨çº¿|å¤§æ¿|å¨±ä¹|å®¶é»|å·¥è¡|å¹¿ä¸|å¾®å|æå|ææº|æè¡¨|æ¿å¡|æ¿åº|æ°é»|æ¶å°|æ¸ç±|æºæ|æ¸¸æ|æ¾³é|ç¹ç|ç å®|ç§»å¨|ç½å|ç½åº|ç½ç«|ç½ç»|èé|è°·æ­|è´­ç©|éè²©|éå¢|é£å|é¤å|é¦æ¸¯)/,o.matcher.Matcher=o.Util.extend(Object,{constructor:function(e){this.tagBuilder=e.tagBuilder},parseMatches:o.Util.abstractMethod}),o.matcher.Email=o.Util.extend(o.matcher.Matcher,{matcherRegex:function(){var e=o.RegexLib.alphaNumericCharsStr,t=new RegExp("["+e+"\\-_';:&=+$.,]+@"),n=o.RegexLib.domainNameRegex,i=o.tldRegex;return new RegExp([t.source,n.source,"\\.",i.source].join(""),"gi")}(),parseMatches:function(e){for(var t,n=this.matcherRegex,i=this.tagBuilder,a=[];null!==(t=n.exec(e));){var s=t[0];a.push(new o.match.Email({tagBuilder:i,matchedText:s,offset:t.index,email:s}))}return a}}),o.matcher.Hashtag=o.Util.extend(o.matcher.Matcher,{matcherRegex:new RegExp("#[_"+o.RegexLib.alphaNumericCharsStr+"]{1,139}","g"),nonWordCharRegex:new RegExp("[^"+o.RegexLib.alphaNumericCharsStr+"]"),constructor:function(e){o.matcher.Matcher.prototype.constructor.call(this,e),this.serviceName=e.serviceName},parseMatches:function(e){for(var t,n=this.matcherRegex,i=this.nonWordCharRegex,a=this.serviceName,s=this.tagBuilder,r=[];null!==(t=n.exec(e));){var c=t.index,l=e.charAt(c-1);if(0===c||i.test(l)){var d=t[0],u=t[0].slice(1);r.push(new o.match.Hashtag({tagBuilder:s,matchedText:d,offset:c,serviceName:a,hashtag:u}))}}return r}}),o.matcher.Phone=o.Util.extend(o.matcher.Matcher,{matcherRegex:/(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4}([,;]*[0-9]+#?)*/g,parseMatches:function(e){for(var t,n=this.matcherRegex,i=this.tagBuilder,a=[];null!==(t=n.exec(e));){var s=t[0],r=s.replace(/[^0-9,;#]/g,""),c=!!t[1];/\D/.test(t[2])&&/\D/.test(s)&&a.push(new o.match.Phone({tagBuilder:i,matchedText:s,offset:t.index,number:r,plusSign:c}))}return a}}),o.matcher.Mention=o.Util.extend(o.matcher.Matcher,{matcherRegexes:{twitter:new RegExp("@[_"+o.RegexLib.alphaNumericCharsStr+"]{1,20}","g"),instagram:new RegExp("@[_."+o.RegexLib.alphaNumericCharsStr+"]{1,50}","g")},nonWordCharRegex:new RegExp("[^"+o.RegexLib.alphaNumericCharsStr+"]"),constructor:function(e){o.matcher.Matcher.prototype.constructor.call(this,e),this.serviceName=e.serviceName},parseMatches:function(e){var t,n=this.matcherRegexes[this.serviceName],i=this.nonWordCharRegex,a=this.serviceName,s=this.tagBuilder,r=[];if(!n)return r;for(;null!==(t=n.exec(e));){var c=t.index,l=e.charAt(c-1);if(0===c||i.test(l)){var d=t[0].replace(/\.+$/g,""),u=d.slice(1);r.push(new o.match.Mention({tagBuilder:s,matchedText:d,offset:c,serviceName:a,mention:u}))}}return r}}),o.matcher.Url=o.Util.extend(o.matcher.Matcher,{matcherRegex:(e=o.RegexLib.domainNameRegex,t=o.tldRegex,n=o.RegexLib.alphaNumericCharsStr,i=new RegExp("[/?#](?:["+n+"\\-+&@#/%=~_()|'$*\\[\\]?!:,.;â]*["+n+"\\-+&@#/%=~_()|'$*\\[\\]â])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]*:(?![A-Za-z][-.+A-Za-z0-9]*:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,e.source,")","|","(","(//)?",/(?:www\.)/.source,e.source,")","|","(","(//)?",e.source+"\\.",t.source,"(?![-"+n+"])",")",")","(?::[0-9]+)?","(?:"+i.source+")?"].join(""),"gi")),wordCharRegExp:new RegExp("["+o.RegexLib.alphaNumericCharsStr+"]"),openParensRe:/\(/g,closeParensRe:/\)/g,constructor:function(e){o.matcher.Matcher.prototype.constructor.call(this,e),this.stripPrefix=e.stripPrefix,this.stripTrailingSlash=e.stripTrailingSlash},parseMatches:function(e){for(var t,n=this.matcherRegex,i=this.stripPrefix,a=this.stripTrailingSlash,s=this.tagBuilder,r=[];null!==(t=n.exec(e));){var c=t[0],l=t[1],d=t[2],u=t[3],p=t[5],g=t.index,f=u||p,m=e.charAt(g-1);if(o.matcher.UrlMatchValidator.isValid(c,l)&&!(g>0&&"@"===m||g>0&&f&&this.wordCharRegExp.test(m))){if(/\?$/.test(c)&&(c=c.substr(0,c.length-1)),this.matchHasUnbalancedClosingParen(c))c=c.substr(0,c.length-1);else{var h=this.matchHasInvalidCharAfterTld(c,l);h>-1&&(c=c.substr(0,h))}var w=l?"scheme":d?"www":"tld",v=!!l;r.push(new o.match.Url({tagBuilder:s,matchedText:c,offset:g,urlMatchType:w,url:c,protocolUrlMatch:v,protocolRelativeMatch:!!f,stripPrefix:i,stripTrailingSlash:a}))}}return r},matchHasUnbalancedClosingParen:function(e){if(")"===e.charAt(e.length-1)){var t=e.match(this.openParensRe),n=e.match(this.closeParensRe);if((t&&t.length||0)<(n&&n.length||0))return!0}return!1},matchHasInvalidCharAfterTld:function(e,t){if(!e)return-1;var n=0;t&&(n=e.indexOf(":"),e=e.slice(n));var i=o.RegexLib.alphaNumericCharsStr,a=new RegExp("^((.?//)?[-."+i+"]*[-"+i+"]\\.[-"+i+"]+)").exec(e);return null===a?-1:(n+=a[1].length,e=e.slice(a[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?n:-1)}}),o.matcher.UrlMatchValidator={hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]*:/,hasWordCharAfterProtocolRegex:new RegExp(":[^\\s]*?["+o.RegexLib.alphaCharsStr+"]"),ipRegex:/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,isValid:function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},isValidIpAddress:function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==e.match(t)},containsMultipleDots:function(e){return e.indexOf("..")>-1},isValidUriScheme:function(e){var t=e.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==t&&"vbscript:"!==t},urlMatchDoesNotHaveProtocolOrDot:function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(e,t){return!(!e||!t||this.hasWordCharAfterProtocolRegex.test(e))}},o.truncate.TruncateEnd=function(e,t,n){return o.Util.ellipsis(e,t,n)},o.truncate.TruncateMiddle=function(e,t,n){if(e.length<=t)return e;var i,o;null==n?(n="&hellip;",i=8,o=3):(i=n.length,o=n.length);var a=t-o,s="";return a>0&&(s=e.substr(-1*Math.floor(a/2))),(e.substr(0,Math.ceil(a/2))+n+s).substr(0,a+i)},o.truncate.TruncateSmart=function(e,t,n){var i,o;null==n?(n="&hellip;",o=3,i=8):(o=n.length,i=n.length);var a=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},s=function(e,t){var i=t/2,o=Math.ceil(i),a=-1*Math.floor(i),s="";return a<0&&(s=e.substr(a)),e.substr(0,o)+n+s};if(e.length<=t)return e;var r=t-o,c=function(e){var t={},n=e,i=n.match(/^([a-z]+):\/\//i);return i&&(t.scheme=i[1],n=n.substr(i[0].length)),(i=n.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=i[1],n=n.substr(i[0].length)),(i=n.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=i[1],n=n.substr(i[0].length)),(i=n.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=i[1],n=n.substr(i[0].length)),(i=n.match(/^#(.*?)$/i))&&(t.fragment=i[1]),t}(e);if(c.query){var l=c.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);l&&(c.query=c.query.substr(0,l[1].length),e=a(c))}if(e.length<=t)return e;if(c.host&&(c.host=c.host.replace(/^www\./,""),e=a(c)),e.length<=t)return e;var d="";if(c.host&&(d+=c.host),d.length>=r)return c.host.length==t?(c.host.substr(0,t-o)+n).substr(0,r+i):s(d,r).substr(0,r+i);var u="";if(c.path&&(u+="/"+c.path),c.query&&(u+="?"+c.query),u){if((d+u).length>=r)return(d+u).length==t?(d+u).substr(0,t):(d+s(u,r-d.length)).substr(0,r+i);d+=u}if(c.fragment){var p="#"+c.fragment;if((d+p).length>=r)return(d+p).length==t?(d+p).substr(0,t):(d+s(p,r-d.length)).substr(0,r+i);d+=p}if(c.scheme&&c.host){var g=c.scheme+"://";if((d+g).length<r)return(g+d).substr(0,t)}if(d.length<=t)return d;var f="";return r>0&&(f=d.substr(-1*Math.floor(r/2))),(d.substr(0,Math.ceil(r/2))+n+f).substr(0,r+i)},o})?i.apply(t,o):i)||(e.exports=a)},function(e,t,n){"use strict";e.exports={minifiedCode:"(function (t) { var s = Math.min, r = Math.max; var n = function (t, s, n) { var r = n.length; for (var e = 0; e < r; ++e)t.setUint8(s + e, n.charCodeAt(e)); }; var e = function (e, n) { this.sampleRate = e; this.numChannels = n; this.numSamples = 0; this.dataViews = []; }; e.prototype.encode = function (o) { var e = o[0].length, i = this.numChannels, f = new DataView(new ArrayBuffer(e * i * 2)), u = 0; for (var n = 0; n < e; ++n) for (var t = 0; t < i; ++t) { var a = o[t][n] * 32767; f.setInt16(u, a < 0 ? r(a, -32768) : s(a, 32767), true); u += 2; } this.dataViews.push(f); this.numSamples += e; }; e.prototype.finish = function (r) { var t = this.numChannels * this.numSamples * 2, e = new DataView(new ArrayBuffer(44)); n(e, 0, 'RIFF'); e.setUint32(4, 36 + t, true); n(e, 8, 'WAVE'); n(e, 12, 'fmt '); e.setUint32(16, 16, true); e.setUint16(20, 1, true); e.setUint16(22, this.numChannels, true); e.setUint32(24, this.sampleRate, true); e.setUint32(28, this.sampleRate * 4, true); e.setUint16(32, this.numChannels * 2, true); e.setUint16(34, 16, true); n(e, 36, 'data'); e.setUint32(40, t, true); this.dataViews.unshift(e); var s = new Blob(this.dataViews, {type: 'audio/wav'}); this.cleanup(); return s; }; e.prototype.cancel = e.prototype.cleanup = function () { delete this.dataViews; }; t.WavAudioEncoder = e; })(self); var sampleRate = 44100, numChannels = 2, options = undefined, maxBuffers = undefined, encoder = undefined, recBuffers = undefined, bufferCount = 0; function error (e) { self.postMessage({command: 'error', message: 'wav: ' + e}); } function init (e) { sampleRate = e.config.sampleRate; numChannels = e.config.numChannels; options = e.options; } function setOptions (e) { if (encoder || recBuffers)error('cannot set options during recording'); else options = e; } function start (e) { maxBuffers = Math.ceil(options.timeLimit * sampleRate / e); if (options.encodeAfterRecord)recBuffers = []; else encoder = new WavAudioEncoder(sampleRate, numChannels); } function record (e) { if (bufferCount++ < maxBuffers) if (encoder)encoder.encode(e); else { if (recBuffers)recBuffers.push(e); } else self.postMessage({command: 'timeout'}); } function postProgress (e) { self.postMessage({command: 'progress', progress: e}); } function finish () { if (recBuffers) { postProgress(0); encoder = new WavAudioEncoder(sampleRate, numChannels); var e = Date.now() + options.progressInterval; while (recBuffers.length > 0) { encoder.encode(recBuffers.shift()); var n = Date.now(); if (n > e) { postProgress((bufferCount - recBuffers.length) / bufferCount); e = n + options.progressInterval; } }postProgress(1); }self.postMessage({command: 'complete', blob: encoder.finish(options.wav.mimeType)}); cleanup(); } function cleanup () { encoder = recBuffers = undefined; bufferCount = 0; }self.onmessage = function (n) { var e = n.data; switch (e.command) { case 'init':init(e); break; case 'options':setOptions(e.options); break; case 'start':start(e.bufferSize); break; case 'record':record(e.buffer); break; case 'finish':finish(); break; case 'cancel':cleanup(); } }; self.postMessage({command: 'loaded'});\n"}}]);