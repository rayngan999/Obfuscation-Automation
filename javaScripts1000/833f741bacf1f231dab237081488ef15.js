!function(S){S.fn.menuAim=function(e){return this.each(function(){(function(e){var v=S(this),x=null,p=[],y=null,n=null,d=S.extend({rowSelector:"> li",submenuSelector:"*",submenuDivSelector:"> ul",tolerance:75,enter:S.noop,exit:S.noop,activate:S.noop,deactivate:S.noop,exitMenu:S.noop},e),o=function(e){e!=x&&(x&&d.deactivate(x),d.activate(e),x=e)},i=function(e){var t=u();t?n=setTimeout(function(){i(e)},t):o(e)},u=function(){if(!x||!S(x).is(d.submenuSelector))return 0;var e=v.offset(),t=S(x).find(d.submenuDivSelector),n=t.offset(),o={x:n.left-d.tolerance,y:n.top},i={x:n.left+t.outerWidth()+d.tolerance,y:n.top},u=p[p.length-1],r=p[0];if(!u)return 0;if(r||(r=u),r.x<e.left||r.x>e.left+v.outerWidth()||r.y<e.top||r.y>e.top+v.outerHeight())return 0;if(y&&u.x==y.x&&u.y==y.y)return 0;function c(e,t){return(t.y-e.y)/(t.x-e.x)}var l=i,f=o,a=c(u,l),s=c(u,f),h=c(r,l),m=c(r,f);return a<h&&m<s?(y=u,250):(y=null,0)};v.mouseleave(function(){n&&clearTimeout(n);d.exitMenu(this)&&(x&&d.deactivate(x),x=null)}).find(d.rowSelector).mouseenter(function(){n&&clearTimeout(n);d.enter(this),i(this)}).mouseleave(function(){d.exit(this)}).click(function(){o(this)}),S(document).mousemove(function(e){p.push({x:e.pageX,y:e.pageY}),3<p.length&&p.shift()})}).call(this,e)}),this}}(jQuery);