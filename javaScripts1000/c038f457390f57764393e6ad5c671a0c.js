function rememberReferer(e){isSelfReferer()||setAdCookie("referer",document.referrer),e()}function isSelfReferer(){return document.referrer.match(/politpuzzle.ru/i)}function setAdCookie(e,t){var o=e+"="+escape(t),n=new Date;return n.setDate(n.getDate()+1),o+="; expires="+n.toUTCString(),document.cookie=o,!1}function getCookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?unescape(t[2]):null}function isObjzor(){return getCookie("referer")&&getCookie("referer").match(/(warfiles|politobzor|vsluh|finobzor)/i)}function isIframe(){return""==getCookie("referer")||window.self!==window.top}function isDA(){return getCookie("referer")&&getCookie("referer").match(/(nnn|directadvert)/i)}function isClearRef(){return""==getCookie("referer")}function isSmi2(){return getCookie("referer")&&getCookie("referer").match(/smi2.ru/i)}function is24smi(){return getCookie("referer")&&getCookie("referer").match(/24smi/i)}function isLentainform(){return getCookie("referer")&&getCookie("referer").match(/lentainform/i)}function isSocial(){return getCookie("referer")&&getCookie("referer").match(/(vk.com|ok.com|facebook)/i)}function isMM(){return getCookie("referer")&&getCookie("referer").match(/mediametrics/i)}function daScript(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("charset","windows-1251"),t.setAttribute("src","//a.politpuzzle.ru/data/"+e+".js"),document.getElementsByTagName("head")[0].appendChild(t)}function goLanding(){rememberReferer(function(){document.location.pathname.match(/^\/\d*-\S*/i)&&!getCookie("visitLanding_"+document.location.pathname)&&(isDA()||is24smi()||isLentainform()||isMM())&&(setAdCookie("visitLanding_"+document.location.pathname),document.location.href=document.location.protocol+"//"+document.location.hostname+"/landing"+document.location.pathname)})}$(document).ready(function(){window.onload=function(){return!1},$(".news_content a").attr("target","_blank"),$(".share_button").on("click",function(){$(".search_button").removeClass("current"),$(".search_panel").hide(),$(this).hasClass("current")?($(".social_panel").slideUp(200),$(".cover").fadeOut(200)):($(".social_panel").slideDown(200),$(".cover").fadeIn(200)),$(this).toggleClass("current")}),$(".search_button").on("click",function(){$(".share_button").removeClass("current"),$(".social_panel").hide(),$(".menu_right_panel").removeClass("open"),$(this).hasClass("current")?($(".search_panel").slideUp(200),$(".search_panel input").blur(),$(".cover").fadeOut(200)):($(".search_panel").slideDown(200),$(".search_panel input").focus(),$(".cover").fadeIn(200)),$(this).toggleClass("current")}),$(".cover").on("click",function(){$(".social_panel, .search_panel").slideUp(200),$(".share_button, .search_button").removeClass("current"),$(".cover").fadeOut(200),$(".item_link").removeClass("show_popup"),$(".cats_list li").removeClass("show_popup trans"),$(".news_block").removeClass("show_popup"),$(".chapter_cat_name").text(""),$(".timeline, .gray_date").removeClass("hidden_text"),$(".menu_right_panel").removeClass("open")}),$(".cats_list li").on("click",function(){$(".item_link").removeClass("show_popup"),$(".cats_list li").removeClass("show_popup"),$(this).parent("ul").parent(".news_block_info").find(".chapter_cat_name").text($(this).data("name")),$(this).parent("ul").parent(".news_block_info").find(".timeline, .gray_date").addClass("hidden_text"),$(".cover").fadeIn(200);var e=$(this).attr("data-cat");$(this).parent("ul").children("li").addClass("show_popup trans"),$(this).toggleClass("trans"),$(this).parents(".news_block_info").next(".news_block").find(".item_link[data-cats ~= "+e+"]").addClass("show_popup"),$(this).parents(".news_block_info").next(".news_block").hasClass("type_1")&&$(this).parents(".news_block_info").next(".news_block").addClass("show_popup")}),$(window).scroll(function(){0!=$(this).scrollTop()?$("#toTop").fadeIn():$("#toTop").fadeOut()}),$("#toTop").click(function(){$("body,html").animate({scrollTop:0},800)}),$(".menu_button").on("click",function(){$(".search_button").hasClass("current")?($(".search_panel").slideUp(200),$(".search_panel input").blur(),$(".search_button").removeClass("current")):$(".cover").fadeToggle(200),$(".menu_right_panel").toggleClass("open")})});