/*!!
 * Matomo - free/libre analytics platform
 *
 * Matomo Tag Manager
 *
 * @link https://matomo.org
 * @source https://github.com/matomo-org/tag-manager/blob/master/js/piwik.js
 * @license https://matomo.org/free-software/bsd/ BSD-3 Clause (also in js/LICENSE.txt)
 */
(function(){var b=document;var a=window;
/*!!! previewModeHook */
;if(typeof window.MatomoTagManager!=="object"){if(typeof window._mtm!=="object"){window._mtm=[]}window.MatomoTagManager=(function(){var j=new Date().getTime();function h(){if(window.mtmPreviewWindow&&"object"===typeof window.mtmPreviewWindow.mtmLogs){var G=new Date();var I=[];for(var H=0;H<arguments.length;H++){I.push(JSON.stringify(arguments[H]))}window.mtmPreviewWindow.mtmLogs.push({time:G.toLocaleTimeString()+"."+G.getMilliseconds(),messages:I})}}function d(G){if(window.mtmPreviewWindow&&"object"===typeof window.mtmPreviewWindow.mtmEvents&&G){var i=new Date();G.time=i.toLocaleTimeString()+"."+i.getMilliseconds();window.mtmPreviewWindow.mtmEvents.push(G)}}var y={enabled:!!window.mtmPreviewWindow,log:function(){h.apply(a,arguments);
if(this.enabled&&"undefined"!==typeof console&&console&&console.debug){console.debug.apply(console,arguments)}},error:function(){h.apply(a,arguments);if("undefined"!==typeof console&&console&&console.error){console.error.apply(console,arguments)}}};function C(i){y.error(i);if(typeof k!=="object"||k.THROW_ERRORS){throw new Error(i)}}function u(H,J){if(B.isString(H)&&H.indexOf(".")!==-1){var I=H.split(".");var G;for(G=0;G<I.length;G++){if(I[G] in J){J=J[I[G]]}else{return}}return J}}function F(K){var J="mtm:";var G={};function I(N){return K in a&&B.isObject(a[K])}function M(N){return I()&&B.isFunction(a[K][N])}function L(P,N){if(M("setItem")){try{a[K].setItem(J+P,JSON.stringify(N))}catch(O){}}else{G[P]=N}}function H(P){if(M("getItem")){try{var N=a[K].getItem(J+P);if(N){N=JSON.parse(N);if(B.isObject(N)){return N}}}catch(O){}return{}}else{if(P in G){return G[P]}}}function i(O){if(M("removeItem")){try{a[K].removeItem(J+O)}catch(N){}}else{if(O in G){delete G[O]}}}this.set=function(R,O,S,N){var P=null;
if(N){P=(new Date().getTime())+(parseInt(N,10)*1000)}var Q=H(R);Q[O]={value:S,expire:P};L(R,Q)};this.get=function(P,N){var O=H(P);if(O&&N in O&&"value" in O[N]){if(O[N].expire&&O[N].expire<(new Date().getTime())){delete O[N];L(P);return}return O[N].value}};this.clearAll=function(){G={};if(I()&&B.isFunction(Object.keys)){var N=Object.keys(a[K]);if(N){for(var O=0;O<N.length;O++){if(String(N[O]).substr(0,J.length)===J){i(String(N[O]).substr(J.length))}}}}}}var x=new F("localStorage");var e=new F("sessionStorage");var B={_compare:function(J,G,I){var H=["equals","starts_with","contains","ends_with"];if(this.indexOfArray(H,I)!==-1){J=String(J).toLowerCase();G=String(G).toLowerCase()}switch(I){case"equals":return String(J)===String(G);case"equals_exactly":return String(J)===String(G);case"regexp":return null!==(String(J).match(new RegExp(G)));case"regexp_ignore_case":return null!==(String(J).match(new RegExp(G,"i")));case"lower_than":return J<G;case"lower_than_or_equals":return J<=G;case"greater_than":return J>G;
case"greater_than_or_equals":return J>=G;case"contains":return String(J).indexOf(G)!==-1;case"match_css_selector":if(!G||!J){return false}var i=A.bySelector(G);return B.indexOfArray(i,J)!==-1;case"starts_with":return String(J).indexOf(G)===0;case"ends_with":return String(J).substring(J.length-G.length,J.length)===G}return false},compare:function(J,G,H){var I=String(H).indexOf("not_")===0;if(I){H=String(H).substr("not_".length)}var i=this._compare(J,G,H);if(I){return !i}return i},trim:function(i){if(i&&String(i)===i){return i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return i},isDefined:function(G){var i=typeof G;return i!=="undefined"},isFunction:function(i){return typeof i==="function"},isObject:function(i){return typeof i==="object"&&i!==null},isString:function(i){return typeof i==="string"},isNumber:function(i){return typeof i==="number"},isArray:function(G){if(!B.isObject(G)){return false}if("function"===typeof Array.isArray&&Array.isArray){return Array.isArray(G)}var H=Object.prototype.toString;
var i=H.call([]);return H.call(G)===i},hasProperty:function(i,G){return Object.prototype.hasOwnProperty.call(i,G)},indexOfArray:function(I,H){if(!I){return -1}if("function"===typeof I.indexOf&&I.indexOf){return I.indexOf(H)}if(!this.isArray(I)){return -1}for(var G=0;G<I.length;G++){if(I[G]===H){return G}}return -1},setMethodWrapIfNeeded:function(G,H,J){if(!(H in G)){G[H]=J;return}var I=G[H];if(!k.utils.isFunction(I)){G[H]=J;return}try{G[H]=function(){try{var K=I.apply(G,[].slice.call(arguments,0))}catch(L){J.apply(G,[].slice.call(arguments,0));throw L}J.apply(G,[].slice.call(arguments,0));return K}}catch(i){}}};var t=function(){this.values={};this.events=[];this.callbacks=[];this.reset=function(){this.values={};this.events=[];this.callbacks=[]};this.push=function(H){if(!B.isObject(H)){y.log("pushed dataLayer value is not an object",H);return}this.events.push(H);var G;for(G in H){if(B.hasProperty(H,G)){this.set(G,H[G])}}for(G=0;G<this.callbacks.length;G++){if(this.callbacks[G]){this.callbacks[G](H)
}}};this.on=function(i){this.callbacks.push(i);return this.callbacks.length-1};this.off=function(i){if(i in this.callbacks){this.callbacks[i]=null}};this.set=function(i,G){this.values[i]=G};this.getAllEvents=function(i){return this.events};this.get=function(i){if(i in this.values){if(B.isFunction(this.values[i])){return this.values[i]()}else{if(B.isObject(this.values[i])&&B.isFunction(this.values[i].get)){return this.values[i].get()}}return this.values[i]}var G=u(i,this.values);if(B.isDefined(G)){return G}}};var p=new t();var E={matchesDateRange:function(H,G,I){var J=H.getTime()+(H.getTimezoneOffset()*60000);if(G){G=String(G).replace(/-/g,"/")}if(I){I=String(I).replace(/-/g,"/")}var L,i;try{L=new Date(G)}catch(K){if(G){C("Invalid startDateTime given")}}try{i=new Date(I)}catch(K){if(I){C("Invalid startDateTime given")}}if(G&&isNaN&&isNaN(L.getTime())){C("Invalid startDateTime given")}if(I&&isNaN&&isNaN(i.getTime())){C("Invalid endDateTime given")}if(G&&J<(L.getTime()+(L.getTimezoneOffset()*60000))){return false
}if(I&&J>(i.getTime()+(i.getTimezoneOffset()*60000))){return false}return true}};var r={parseUrl:function(i,J){try{var K=document.createElement("a");K.href=i;var G=K.href;K=document.createElement("a");K.href=G;if(J&&J in K){if("hash"===J){return String(K[J]).replace("#","")}else{if("protocol"===J){return String(K[J]).replace(":","")}else{if("search"===J){return String(K[J]).replace("?","")}else{if("port"===J&&!K[J]){if(K.protocol==="https:"){return"443"}else{if(K.protocol==="http:"){return"80"}}}}}}if("pathname"===J&&K[J]&&String(K[J]).substr(0,1)!=="/"){return"/"+K[J]}if("port"===J&&K[J]){return String(K[J])}return K[J]}if("origin"===J&&"protocol" in K&&K.protocol){return K.protocol+"//"+K.hostname+(K.port?":"+K.port:"")}return}catch(I){if("function"===typeof URL){var H=new URL(i);if(J&&J in H){if("hash"===J){return String(H[J]).replace("#","")}else{if("protocol"===J){return String(H[J]).replace(":","")}else{if("search"===J){return String(H[J]).replace("?","")}else{if("port"===J&&!H[J]){if(H.protocol==="https:"){return 443
}else{if(H.protocol==="http:"){return 80}}}}}}return H[J]}return}}},decodeSafe:function(G){try{return a.decodeURIComponent(G)}catch(i){return a.unescape(G)}},getQueryParameter:function(K,G){if(!B.isDefined(G)){G=a.location.search}if(!G||!B.isDefined(K)||K===null||K===false||K===""){return null}var i=G.substr(0,1);if(G!=="?"&&G!=="&"){G="?"+G}K=K.replace("[","\\[");K=K.replace("]","\\]");var J=new RegExp("[?&]"+K+"(=([^&#]*)|&|#|$)");var I=J.exec(G);if(!I){return null}if(!I[2]){return""}var H=I[2].replace(/\+/g," ");return this.decodeSafe(H)}};var c;var D={hasSetupScroll:false,scrollCallbacks:[],scrollListenEvents:["scroll","resize"],offScroll:function(G){if(G in this.scrollCallbacks){this.scrollCallbacks[G]=null}var I=0,H=0;for(I in this.scrollCallbacks){if(this.scrollCallbacks[I]){H++}}if(!H){for(I=0;I<this.scrollListenEvents.length;I++){if(b.removeEventListener){a.removeEventListener(this.scrollListenEvents[I],this.didScroll,true)}else{a.detachEvent("on"+this.scrollListenEvents[I],this.didScroll)
}}this.hasSetupScroll=false}},didScroll:function(i){if(c){return}if(i&&i.type&&i.type==="scroll"&&i.target&&i.target!==b&&i.target!==a){return}c=setTimeout(function(){c=null;var G;for(G=0;G<D.scrollCallbacks.length;G++){if(D.scrollCallbacks[G]){D.scrollCallbacks[G](i)}}},120)},onScroll:function(G){this.scrollCallbacks.push(G);if(!this.hasSetupScroll){this.hasSetupScroll=true;var i=0;for(i=0;i<this.scrollListenEvents.length;i++){if(b.addEventListener){a.addEventListener(this.scrollListenEvents[i],this.didScroll,true)}else{a.attachEvent("on"+this.scrollListenEvents[i],this.didScroll)}}}return this.scrollCallbacks.length-1},getScreenHeight:function(){return a.screen.height},getScreenWidth:function(){return a.screen.width},getViewportWidth:function(){var i=a.innerWidth||b.documentElement.clientWidth||b.body.clientWidth;if(!i){return 0}return i},getViewportHeight:function(){var i=a.innerHeight||b.documentElement.clientHeight||b.body.clientHeight;if(!i){return 0}return i},getPerformanceTiming:function(i){if("performance" in a&&B.isObject(a.performance)&&B.isObject(a.performance.timing)&&i in a.performance.timing){return a.performance.timing[i]
}return 0}};var A={loadScriptUrl:function(H,G){if(!G){G={}}if(!B.isDefined(G.defer)){G.defer=true}if(!B.isDefined(G.async)){G.async=true}if(!B.isDefined(G.type)){G.type="text/javascript"}var i=document.createElement("script");i.src=H;i.type=G.type;i.defer=!!G.defer;i.async=!!G.async;if(B.isFunction(G.onload)){i.onload=G.onload}if(B.isFunction(G.onerror)){i.onerror=G.onerror}if(B.isDefined(G.charset)){i.charset=G.charset}if(B.isDefined(G.id)){i.id=G.id}b.head.appendChild(i)},getScrollLeft:function(){return a.document.body.scrollLeft||a.document.documentElement.scrollLeft},getScrollTop:function(){return a.document.body.scrollTop||a.document.documentElement.scrollTop},getDocumentHeight:function(){return Math.max(b.body.offsetHeight,b.body.scrollHeight,b.documentElement.offsetHeight,b.documentElement.clientHeight,b.documentElement.scrollHeight,1)},getDocumentWidth:function(){return Math.max(b.body.offsetWidth,b.body.scrollWidth,b.documentElement.offsetWidth,b.documentElement.clientWidth,b.documentElement.scrollWidth,1)
},addEventListener:function(I,H,G,i){if(!I){y.log("element not found, cannot add event listener",I,this);return}if(I.addEventListener){i=i||false;I.addEventListener(H,G,i);return true}if(I.attachEvent){return I.attachEvent("on"+H,G)}I["on"+H]=G},getElementText:function(G){if(!G){return}var i=G.innerText||G.textContent||"";i=i.replace(/([\s\uFEFF\xA0])+/g," ");i=i.replace(/(\s)+/g," ");return B.trim(i)},getElementClassNames:function(i){if(i&&i.className){return B.trim(String(i.className).replace(/\s{2,}/g," "))}return""},getElementAttribute:function(H,i){if(H&&H.getAttribute){return H.getAttribute(i)}if(!H||!H.attributes){return}var G=(typeof H.attributes[i]);if("undefined"===G){return null}if(H.attributes[i].value){return H.attributes[i].value}if(H.attributes[i].nodeValue){return H.attributes[i].nodeValue}return null},_htmlCollectionToArray:function(H){var i=[];if(!H||!H.length){return i}var G;for(G=0;G<H.length;G++){i.push(H[G])}return i},byId:function(i){if(B.isString(i)&&i.substr(0,1)==="#"){i=i.substr(1)
}return b.getElementById(i)},byClassName:function(i){if(i&&"getElementsByClassName" in b){return this._htmlCollectionToArray(b.getElementsByClassName(i))}return[]},byTagName:function(i){if(i&&"getElementsByTagName" in b){return this._htmlCollectionToArray(b.getElementsByTagName(i))}return[]},bySelector:function(i){if(i&&"querySelectorAll" in b){return this._htmlCollectionToArray(b.querySelectorAll(i))}return[]},isElementContext:function(I,i){if(!I||!i){return false}I=String(I).toLowerCase();i=String(i).toLowerCase();var H=I.lastIndexOf("<"+i);if(H===-1){return false}var G=I.substring(H);return !G.match(new RegExp("<\\s*/\\s*"+i+">"))},isAttributeContext:function(M,K){if(!M||!K){return false}M=String(M).replace(/([\s\uFEFF\xA0]*=[\s\uFEFF\xA0]*)/g,"=");var H=M.lastIndexOf("<");if(H===-1){return false}var O=M.substring(H);var G=O.indexOf(">");if(G!==-1){return false}var N=O.lastIndexOf("=");if(N===-1){return false}var J=O.lastIndexOf(" ",N);var L=O.substring(J,N);L=B.trim(L);if(L.toLowerCase()!==K.toLowerCase()){return false
}var I=O.substring(N).replace("=","");var i=I.substring(0,1);if('"'===i){return -1===I.substring(1).indexOf('"')}else{if("'"===i){return -1===I.substring(1).indexOf("'")}}return -1===I.indexOf(" ")},onLoad:function(i){if(b.readyState==="complete"){i()}else{if(a.addEventListener){a.addEventListener("load",i)}else{if(a.attachEvent){a.attachEvent("onload",i)}}}},onReady:function(H){var i=false;if(b.attachEvent){i=b.readyState==="complete"}else{i=b.readyState!=="loading"}if(i){H();return}if(b.addEventListener){this.addEventListener(b,"DOMContentLoaded",function G(){b.removeEventListener("DOMContentLoaded",G,false);if(!i){i=true;H()}})}else{if(b.attachEvent){b.attachEvent("onreadystatechange",function G(){if(b.readyState==="complete"){b.detachEvent("onreadystatechange",G);if(!i){i=true;H()}}})}}this.onLoad(function(){if(!i){i=true;H()}})}};function w(H){this.window=a;this.document=b;this.set=function(i,I){this[i]=I};this.get=function(I,i){if(I===null||I===false||!B.isDefined(I)){return i}if(I in this){if(B.isObject(this[I])&&"get" in this[I]&&B.isFunction(this[I].get)){return this[I].get()
}return this[I]}var J=u(I,this);if(B.isDefined(J)){return J}return i};this.buildVariable=function(i){return o(i,this.get("container"))};if(B.isObject(H)){for(var G in H){if(B.hasProperty(H,G)){this.set(G,H[G])}}}}function z(G,i){this.isValid=function(){var I=o(G.actual,i).get();var H=o(G.expected,i).get();return B.compare(I,H,G.comparison)}}function o(G,i){if(B.isObject(G)&&G.joinedVariable&&B.isArray(G.joinedVariable)){return new q(G.joinedVariable,i)}else{if(B.isObject(G)&&G.type){return new s(G,i)}}return new l(G,i)}function q(G,i){this.name="";this.type="JoinedVariable";this.getDefinition=function(){return G};this.get=function(){var I="",J;for(var H=0;H<G.length;H++){J=o(G[H],i).toString();if(J!==false&&J!==null&&B.isDefined(J)){I+=J}}return I};this.toString=function(){return this.get()};this.addDebugValues=function(H){H.push({name:null,type:"_joined",value:this.get()})}}function l(I,G){this.name="";this.type="ConstantVariable";this.getDefinition=function(){return I};function H(K){return K&&B.isObject(K)&&!B.isArray(K)&&(B.hasProperty(K,"type")||B.hasProperty(K,"joinedVariable"))
}function J(M){if(M==null||typeof M!=="object"){return M}var K=new M.constructor();var L;for(L in M){if(B.hasProperty(M,L)){K[L]=J(M[L])}}return K}function i(L){var K;if(H(L)){L=o(L,G).get()}else{if(L&&B.isArray(L)){for(K=0;K<L.length;K++){L[K]=i(L[K])}}else{if(L&&B.isObject(L)){for(K in L){if(B.hasProperty(L,K)){L[K]=i(L[K])}}}}}return L}this.get=function(){var K=I;if(B.isObject(K)){K=J(K);K=i(K)}return K};this.toString=function(){return I};this.addDebugValues=function(K){K.push({name:null,type:"_constant",value:this.get()})}}function s(H,G){this.type=H.type;this.name=H.name;this.lookUpTable=H.lookUpTable||[];this.defaultValue=undefined;this.parameters=H.parameters||{};this.getDefinition=function(){return H};this.get=function(){var L;try{L=this.theVariable.get()}catch(M){y.error("Failed to get value of variable",M,this);L=undefined}if((!B.isDefined(L)||L===null||L===false)&&B.isDefined(this.defaultValue)){L=this.defaultValue}var K;for(K=0;K<this.lookUpTable.length;K++){var N=this.lookUpTable[K];
if(B.compare(L,N.matchValue,N.comparison)){return N.outValue}}return L};this.toString=function(){if(this.theVariable&&B.hasProperty(this.theVariable,"toString")&&B.isFunction(this.theVariable.toString)){try{return this.theVariable.toString()}catch(i){y.error("Failed to get toString of variable",i,this);return}}return this.get()};this.addDebugValues=function(i){i.push({name:this.name,type:this.type,value:this.get()})};if("undefined"!==typeof H.defaultValue){this.defaultValue=H.defaultValue}if(!B.isDefined(H.Variable)||!H.Variable){y.log("no template defined for variable ",H);return}var I,J=new w({variable:this,container:G});if(B.isObject(H.parameters)){for(I in H.parameters){if(B.hasProperty(H.parameters,I)){J.set(I,o(H.parameters[I],G))}}}if(B.isFunction(H.Variable)){this.theVariable=new H.Variable(J,k)}else{if(B.isObject(H.Variable)){this.theVariable=H.Variable}else{if(H.Variable in G.templates){this.theVariable=new G.templates[H.Variable](J,k)}else{C("No matching variable template found")
}}}}function f(I,G){this.referencedTags=[];this.id=I.id;this.type=I.type;this.name=I.name;this.conditions=[];this.parameters=I.parameters||{};var H=this;this.getId=function(){return this.id};this.setUp=function(){if(this.theTrigger&&this.theTrigger.setUp&&B.isFunction(this.theTrigger.setUp)){this.theTrigger.setUp(function(P){p.push(P);if(!("event" in P)){return}var L={tags:[],variables:[],metTrigger:null,name:P.event,eventData:P,container:{}};var O,N;if(H.meetsConditions()){y.log("The condition is met for trigger "+H.name,H);L.metTrigger={name:H.name,type:H.type};var M=H.getReferencedTags();for(N=0;N<M.length;N++){if(M[N].hasBlockTrigger(H)){M[N].block();M[N].addDebugValues(L.tags,"Block")}else{if(M[N].hasFireTrigger(H)){M[N].fire();M[N].addDebugValues(L.tags,"Fire")}}}}if(window.mtmPreviewWindow||y.enabled){G.addDebugValues(L.container);d(L);if(y.enabled){y.log("event: ",L)}}})}};this.addReferencedTag=function(i){this.referencedTags.push(i)};this.getReferencedTags=function(){return this.referencedTags
};this.meetsConditions=function(){var L,M;for(L=0;L<this.conditions.length;L++){M=new z(this.conditions[L],G);if(!M.isValid()){return false}}return true};if(I.conditions&&B.isArray(I.conditions)){this.conditions=I.conditions}var J,K=new w({trigger:this,container:G});if(B.isObject(I.parameters)){for(J in I.parameters){if(B.hasProperty(I.parameters,J)){K.set(J,o(I.parameters[J],G))}}}if(!B.isDefined(I.Trigger)||!I.Trigger){y.error("no template defined for trigger ",I);return}if(B.isFunction(I.Trigger)){this.theTrigger=new I.Trigger(K,k)}else{if(B.isObject(I.Trigger)){this.theTrigger=I.Trigger}else{if(I.Trigger in G.templates){this.theTrigger=new G.templates[I.Trigger](K,k)}else{C("No matching trigger template found")}}}K=null}function g(G,H){this.type=G.type;this.name=G.name;this.fireTriggerIds=G.fireTriggerIds?G.fireTriggerIds:[];this.blockTriggerIds=G.blockTriggerIds?G.blockTriggerIds:[];this.fireLimit=G.fireLimit?G.fireLimit:g.FIRE_LIMIT_UNLIMITED;this.fireDelay=G.fireDelay?parseInt(G.fireDelay,10):0;
this.startDate=G.startDate?G.startDate:null;this.endDate=G.endDate?G.endDate:null;this.numExecuted=0;this.blocked=false;this.parameters=G.parameters||{};var I=this;this.addDebugValues=function(i,L){i.push({action:L,type:this.type,name:this.name,numExecuted:this.numExecuted})};this._doFire=function(){if(this.blocked){y.log("not firing as this tag is blocked",this);return"tag is blocked"}if(this.fireLimit!==g.FIRE_LIMIT_UNLIMITED&&this.numExecuted){y.log("not firing as this tag has limit reached",this);return"fire limit is restricted"}var L="tag";if(H.id){L+="_"+H.id}if(this.fireLimit===g.FIRE_LIMIT_ONCE_24HOURS&&!window.mtmPreviewWindow){if(x.get(L,this.name)){y.log("not firing as this tag has 24hours limit reached",this);return"fire limit 24hours is restricted"}}if(this.fireLimit===g.FIRE_LIMIT_ONCE_LIFETIME&&!window.mtmPreviewWindow){if(x.get(L,this.name)){y.log("not firing as this tag has limit reached",this);return"fire limit lifetime is restricted"}}if(!E.matchesDateRange(new Date(),this.startDate,this.endDate)){y.log("not firing as this tag does not match date",this);
return"date range does not match"}if(!this.theTag||!this.theTag.fire){y.log("not firing as tag does not exist anymore",this);return"tag not found"}y.log("firing this tag",this);this.numExecuted++;if(this.fireLimit===g.FIRE_LIMIT_ONCE_24HOURS){var i=24*60*60;x.set(L,this.name,"1",i)}if(this.fireLimit===g.FIRE_LIMIT_ONCE_LIFETIME){x.set(L,this.name,"1")}this.theTag.fire();y.log("fired this tag",this)};this.fire=function(){if(this.fireDelay){setTimeout(function(){I._doFire()},this.fireDelay)}else{return this._doFire()}};this.block=function(){this.blocked=true};this.hasFireTrigger=function(i){if(!this.fireTriggerIds||!this.fireTriggerIds.length){return false}if(!i){return false}var L=i.getId();return B.indexOfArray(this.fireTriggerIds,L)!==-1};this.hasBlockTrigger=function(i){if(!this.blockTriggerIds||!this.blockTriggerIds.length){return false}if(!i){return false}var L=i.getId();return B.indexOfArray(this.blockTriggerIds,L)!==-1};if(!B.isDefined(G.Tag)||!G.Tag){y.error("no template defined for tag ",G);
return}var J,K=new w({tag:this,container:H});if(B.isObject(G.parameters)){for(J in G.parameters){if(B.hasProperty(G.parameters,J)){K.set(J,o(G.parameters[J],H))}}}if(B.isFunction(G.Tag)){this.theTag=new G.Tag(K,k)}else{if(B.isObject(G.Tag)){this.theTag=G.Tag}else{if(G.Tag in H.templates){this.theTag=new H.templates[G.Tag](K,k)}else{C("No matching tag template found")}}}}g.FIRE_LIMIT_ONCE_PAGE="once_page";g.FIRE_LIMIT_ONCE_24HOURS="once_24hours";g.FIRE_LIMIT_ONCE_LIFETIME="once_lifetime";g.FIRE_LIMIT_UNLIMITED="unlimited";function n(H,M){var I=this;this.id=H.id;this.idsite=H.idsite||null;this.versionName=H.versionName||null;this.revision=H.revision||null;this.environment=H.environment||null;this.templates=M||{};this.dataLayer=new t();this.variables=[];this.triggers=[];this.tags=[];this.onNewGlobalDataLayerValue=function(i){this.dataLayer.push(i)};p.on(function(i){I.onNewGlobalDataLayerValue(i)});this.addDebugValues=function(O){O.variables=[];var P;for(P=0;P<this.variables.length;P++){this.variables[P].addDebugValues(O.variables)
}O.tags=[];for(P=0;P<this.tags.length;P++){this.tags[P].addDebugValues(O.tags,"Not Fired Yet")}O.id=this.id;O.versionName=this.versionName;O.dataLayer=JSON.parse(JSON.stringify(this.dataLayer.values))};this.getTriggerById=function(O){if(!O){return}var P;for(P=0;P<this.triggers.length;P++){if(this.triggers[P].getId()===O){return this.triggers[P]}}};this.addTrigger=function(i){if(!i){return}var O=this.getTriggerById(i.id);if(!O){O=new f(i,this);this.triggers.push(O)}return O};var L,K,G,N,J;if(H.variables&&B.isArray(H.variables)){for(L=0;L<H.variables.length;L++){this.variables.push(o(H.variables[L],this))}}if(H.triggers&&B.isArray(H.triggers)){for(L=0;L<H.triggers.length;L++){this.addTrigger(H.triggers[L])}}if(H.tags&&B.isArray(H.tags)){for(L=0;L<H.tags.length;L++){N=H.tags[L];G=new g(N,this);this.tags.push(G);if(N.blockTriggerIds&&B.isArray(N.blockTriggerIds)){for(K=0;K<N.blockTriggerIds.length;K++){J=this.getTriggerById(N.blockTriggerIds[K]);if(J){J.addReferencedTag(G)}}}if(N.fireTriggerIds&&B.isArray(N.fireTriggerIds)){for(K=0;
K<N.fireTriggerIds.length;K++){J=this.getTriggerById(N.fireTriggerIds[K]);if(J){J.addReferencedTag(G)}}}}}this.run=function(){var P=p.getAllEvents();var O;for(O=0;O<P.length;O++){this.onNewGlobalDataLayerValue(P[O])}for(O=0;O<this.triggers.length;O++){this.triggers[O].setUp()}}}var k={THROW_ERRORS:true,dataLayer:p,containers:[],url:r,date:E,utils:B,debug:y,dom:A,window:D,Variable:s,storage:{local:x,session:e},_buildVariable:o,Condition:z,TemplateParameters:w,Trigger:f,Tag:g,throwError:C,Container:n,addContainer:function(I,G){if(!window.mtmPreviewWindow){var H=b.getElementById("mtmDebugFrame");if(H&&H.contentWindow){window.mtmPreviewWindow=H.contentWindow}}y.log("creating container");var i=new n(I,G);this.containers.push(i);i.dataLayer.push({"mtm.containerId":i.id});y.log("running container");i.run();return i},enableDebugMode:function(){y.enabled=true}};if("matomoTagManagerAsyncInit" in a&&B.isFunction(a.matomoTagManagerAsyncInit)){a.matomoTagManagerAsyncInit()}var m=a._mtm;a._mtm={push:function(){var K,I,H,M,N;
for(K=0;K<arguments.length;K+=1){N=null;if(arguments[K]&&arguments[K].slice){N=arguments[K].slice()}M=arguments[K];if(B.isObject(M)&&!B.isArray(M)){p.push(M);continue}H=M.shift();var L=B.isString(H)&&H.indexOf("::")>0;if(L){var G,J;G=H.split("::");J=G[0];H=G[1];if("object"===typeof k[J]&&B.isFunction(k[J][H])){k[J][H].apply(k[J],M)}}else{if(H&&H in k&&B.isFunction(k[H])){k[H].apply(k,M)}else{y.error("method "+H+" is not valid")}}}}};var v;for(v=0;v<m.length;v++){a._mtm.push(m[v])}p.push({"mtm.mtmScriptLoadedTime":j});if("undefined"!==typeof a.dataLayer&&B.isArray(a.dataLayer)){for(v=0;v<a.dataLayer.length;v++){if(B.isObject(a.dataLayer[v])){p.push(a.dataLayer[v])}}}return k})()}
(function(){
var Templates = {};
Templates['CustomHtmlTag'] = (function(){/*!
    * secure-filters from https://github.com/salesforce/secure-filters/blob/master/lib/secure-filters.js
    * license: BSD-3-Clause https://github.com/salesforce/secure-filters/blob/master/LICENSE.txt
    * */
function convertControlCharacters(str){return String(str).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,' ');};var secureFilters={};secureFilters.css=function(val){var str=String(val);str=convertControlCharacters(str);return str.replace(/[^a-zA-Z0-9\uD800-\uDFFF]/g,function(match){var code=match.charCodeAt(0);if(code===0){return'\\fffd ';}else{var hex=code.toString(16).toLowerCase();return'\\'+hex+' ';}});};secureFilters.html=function(val){var str=String(val);str=convertControlCharacters(str);return str.replace(/[^\t\n\v\f\r ,\.0-9A-Z_a-z\-\u00A0-\uFFFF]/g,function(match){var code=match.charCodeAt(0);switch(code){case 0x22:return'&quot;';case 0x26:return'&amp;';case 0x3C:return'&lt;';case 0x3E:return'&gt;';default:if(code<100){var dec=code.toString(10);return'&#'+dec+';';}else{var hex=code.toString(16).toUpperCase();return'&#x'+hex+';';}}});};secureFilters.style=function(val){return secureFilters.html(secureFilters.css(val));};secureFilters.uri=function(val){var QUOT=/\x22/g;var APOS=/\x27/g;var AST=/\*/g;var TILDE=/~/g;var BANG=/!/g;var LPAREN=/\(/g;var RPAREN=/\)/g;var encode=encodeURI(String(val));return encode.replace(BANG,'%21').replace(QUOT,'%27').replace(APOS,'%27').replace(LPAREN,'%28').replace(RPAREN,'%29').replace(AST,'%2A').replace(TILDE,'%7E');};/*! end secure filters */
return function(parameters,TagManager){function moveChildrenToArray(element){var children=[];var j=0;while(j in element.childNodes&&element.childNodes.length){children.push(element.removeChild(element.childNodes[j]));}
return children;}
function cloneScript(element){var newScript=parameters.document.createElement('script');var src=TagManager.dom.getElementAttribute(element,'src');if(src){newScript.src=src;}else{newScript.text=element.text||element.textContent||element.innerHTML||'';}
if(element.id){newScript.id=element.id;}
if(element.charset){newScript.charset=element.charset;}
if(element.defer){newScript.defer=element.defer;}
if(element.async){newScript.async=element.async;}
newScript.type="text/javascript";return newScript;}
function isJavaScriptElement(element){if(element&&element.nodeName&&element.nodeName.toLowerCase()==='script'){var type=TagManager.dom.getElementAttribute(element,'type');if(!type||String(type).toLowerCase()==='text/javascript'){return true;}}
return false;}
function doChildrenContainJavaScript(element){return element&&element.innerHTML&&element.innerHTML.toLowerCase().indexOf("<script")!==-1;}
function insertNode(parent,child,append){if(append||!parent.firstChild){parent.appendChild(child);}else{parent.insertBefore(child,parent.firstChild);}}
function moveNodes(parent,children,append){var limit=5000;var counter=0;var child;while(counter in children&&children[counter]&&counter<limit){child=children[counter];counter++;if(isJavaScriptElement(child)){insertNode(parent,cloneScript(child),append);}else if(doChildrenContainJavaScript(child)){var subChildren=moveChildrenToArray(child);insertNode(parent,child,append);moveNodes(child,subChildren);}else{insertNode(parent,child,append);}}}
this.fire=function(){var html=parameters.customHtml;if(html&&html.type==='JoinedVariable'){var variables=html.getDefinition();var value='',varReturn,theVarValue,isVariable,hasValueSet;for(var i=0;i<variables.length;i++){varReturn=parameters.buildVariable(variables[i]);isVariable=TagManager.utils.isObject(variables[i]);theVarValue=varReturn.get();hasValueSet=theVarValue!==false&&theVarValue!==null&&TagManager.utils.isDefined(theVarValue);if(isVariable){if(TagManager.dom.isElementContext(value,'script')){if(!TagManager.utils.isDefined(TagManager.customHtmlDataStore)){TagManager.customHtmlDataStore=[];}
TagManager.customHtmlDataStore.push(theVarValue);value+='window.MatomoTagManager.customHtmlDataStore['+(TagManager.customHtmlDataStore.length-1)+']';}else if(TagManager.dom.isElementContext(value,'style')||TagManager.dom.isAttributeContext(value,'style')){if(hasValueSet){value+=secureFilters.css(theVarValue);}else{value+='mTmKpwoqM';}}else if(TagManager.dom.isAttributeContext(value,'href')||TagManager.dom.isAttributeContext(value,'src')){if(hasValueSet){value+=secureFilters.uri(theVarValue);}}else if(hasValueSet){value+=secureFilters.html(theVarValue);}}else if(hasValueSet){value+=theVarValue;}}
html=value;}else{html=html.get();}
if(html){var div=parameters.document.createElement('div');div.innerHTML=html;if(div.childNodes){var children=moveChildrenToArray(div);var htmlPosition=parameters.get('htmlPosition','bodyEnd');var append=true;if(htmlPosition==='headStart'||htmlPosition==='bodyStart'){append=false;}
if(htmlPosition==='headStart'||htmlPosition==='headEnd'){moveNodes(parameters.document.head,children,append);}else if(parameters.document.body){moveNodes(parameters.document.body,children,append);}else{TagManager.dom.onReady(function(){moveNodes(parameters.document.body,children,append);});}}}};};})(); 
Templates['WindowLoadedTrigger'] = (function(){return function(parameters,TagManager){this.setUp=function(triggerEvent){TagManager.dom.onLoad(function(){triggerEvent({event:'WindowLoad'});});};};})(); 
Templates['PageUrlVariable'] = (function () { return function (parameters, TagManager) { this.get = function () { return parameters.window.location.href;   }; } })(); 
Templates['DomReadyTrigger'] = (function(){return function(parameters,TagManager){this.setUp=function(triggerEvent){TagManager.dom.onReady(function(){triggerEvent({event:'DOMReady'});});};};})(); 
window.MatomoTagManager.addContainer({"id":"V4HJZoCD","idsite":1,"versionName":"2.96","revision":332,"environment":"live","tags":[{"id":19632,"type":"CustomHtml","name":"29a0f0d9431714c0b29babf7aba22b90","parameters":{"customHtml":"<script>\nwindow.VwTagConsole('%c Live > Which Model Tab Fix > 2020\/09\/04 > 2020\/09\/04', 'color:white;background-color:green');\n\n  setTimeout(function() {\n  var list = document.getElementsByClassName('tab-content');\n  var count = 0;\n  var overviewEl;\n\n  for (var i = 0; i < list.length; i++) {\n    var el = list[i]\n    if ((el.style.display === 'none')) {\n      count ++;\n    }\n    if (el.id === 'overview') {\n      overviewEl = el;\n    }\n  }\n\n  if (list.length === count) {\n    overviewEl.style.display = 'block';\n    console.log('Qubit fixing Whichmodel table', overviewEl)\n  }\n  console.log('Qubit looking at Whichmodel table', overviewEl, list.length, count)\n}, 1800);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25795],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19633,"type":"CustomHtml","name":"4e4a75579ce2166f6e2e3713671fdba5","parameters":{"customHtml":"<script>\nwindow.VwTagConsole('%c Live > Which Model No LiveChat > 2020\/09\/04', 'color:white;background-color:green');\n\n\n  var liveChat = document.getElementById('uwf-floating-chat-container');\n  if (liveChat) {\n    liveChat.remove();\n    console.log('Qubit Which Model Landing: removed LiveChat')\n  }\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25796],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19634,"type":"CustomHtml","name":"5e94e460018fcee4a71899269e296d1e","parameters":{"customHtml":"<script>\n\t(function(jQuery) {\n\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Retailer ACTIONS > 2019\/07\/12');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar vwdata = window.vwdata = window.vwdata || [];\n\t\t\tvar pageCategory = 'retailers';\n\t\t\tvar pageInfoWhenFormOpened, questionnaire, informationZIP;\n\t\t\tvar formAbbreviations = {\n\t\t\t\t'I would like to know more about new car offers and finance': 'Offers and finance',\n\t\t\t\t'I have a question on technology': 'Technology',\n\t\t\t\t'I would like more detail on the Motability scheme': 'Motability scheme',\n\t\t\t\t'I would like to know which Volkswagen cars are available via the Motability scheme': 'Motability models',\n\t\t\t\t'I would like more detail on Motability offers': 'Motability offers',\n\t\t\t\t'I would like more detail on offers and finance': 'Offers and finance',\n\t\t\t\t'I would like more detail on Driverline': 'Driverline',\n\t\t\t\t'Other': 'Other'\n\t\t\t}\n\n\t\t\tfunction isFormOpen() {\n\t\t\t\treturn jQuery('#overlay-container').css('opacity') === '1' && !jQuery('#overlay-container .overlay__modal > iframe').length; \/\/ Exclude video overlay\n\t\t\t}\n\n\t\t\t\/\/ Provide default info for pages where default centered tab selected - e.g. 'Sales'\n\t\t\tfunction getPageInfo() {\n\n\t\t\t\tvar url = window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\t\t\t\tvar tabText = jQuery('.centered-tabs__filter-item--active').text().trim();\n\n\t\t\t\t\/\/ Add hash if none and centered tabs exist\n\t\t\t\tif (!location.hash && tabText) {\n\t\t\t\t\turl += '#' + tabText;\n\t\t\t\t}\n\n\t\t\t\t\/\/ Split url by '\/' or '#' e.g. 'retailers : 00607 : beadles-bromley-bromley : offers : used-cars'\n\t\t\t\tvar name = url.split(\/\\\/|#\/).slice(1).join(' : ');\n\n\t\t\t\treturn {\n\t\t\t\t\tid: url,\n\t\t\t\t\tname: name\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction getQuestionnaire() {\n\n\t\t\t\tvar $overlayForm = jQuery('retailer-contact-form-polymer', '#overlay-container');\n\t\t\t\tvar dropdownText = $overlayForm.find('#questionsDD').find('input.dropdown-selector:visible').val() || 'No selection';\n\t\t\t\tvar abbreviatedQuery = formAbbreviations[dropdownText] || dropdownText;\n\n\t\t\t\treturn {\n\t\t\t\t\tid: 'ContactUs Questionnaire',\n\t\t\t\t\tversion: '1',\n\t\t\t\t\tcontent: [{\n\t\t\t\t\t\tquestion: 'Query type',\n\t\t\t\t\t\tanswer: [{\n\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\tvalue: abbreviatedQuery\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\t\/\/ Set data\n\n\t\t\tfunction setEventInfo(trackingObject) {\n\n\t\t\t\t\/\/ User can currently navigate within contact form.\n\t\t\t\t\/\/ If form is open use data from page user was on when opened.\n\t\t\t\tvar pageInfo = isFormOpen() ? pageInfoWhenFormOpened : getPageInfo();\n\n\t\t\t\ttrackingObject.eventInfo = {};\n\t\t\t\ttrackingObject.eventInfo.pageId = pageInfo.id;\n\t\t\t\ttrackingObject.eventInfo.pageName = pageInfo.name;\n\n\t\t\t}\n\n\t\t\tfunction setUserBrowserData(trackingObject) {\n\n\t\t\t\ttrackingObject.user = {};\n\t\t\t\ttrackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n\t\t\t\ttrackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n\t\t\t};\n\n\t\t\tfunction setEnvironmentData(trackingObject) {\n\n\t\t\t\ttrackingObject.environment = {};\n\t\t\t\ttrackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalRetailersD6' : 'VWRetailersD6';\n\t\t\t\ttrackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n\n\t\t\t};\n\n\t\t\tfunction setPersonalizationData(trackingObject) {\n\n\t\t\t\ttrackingObject.personalization = {};\n\t\t\t\ttrackingObject.personalization.status = false;\n\t\t\t\ttrackingObject.personalization.placeholderId = undefined;\n\t\t\t\ttrackingObject.personalization.contentId = undefined;\n\t\t\t\ttrackingObject.personalization.activityId = undefined;\n\t\t\t\ttrackingObject.personalization.activityName = undefined;\n\t\t\t\ttrackingObject.personalization.experienceId = undefined;\n\t\t\t\ttrackingObject.personalization.experienceName = undefined;\n\t\t\t\ttrackingObject.personalization.offerName = undefined;\n\t\t\t\ttrackingObject.personalization.offerId = undefined;\n\n\t\t\t};\n\n\t\t\tfunction setConfigurationData(trackingObject) {\n\n\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\ttrackingObject.configuration.CarlineId = undefined;\n\t\t\t\ttrackingObject.configuration.CarlineName = undefined;\n\t\t\t\ttrackingObject.configuration.SalesgroupId = undefined;\n\t\t\t\ttrackingObject.configuration.SalesgroupName = undefined;\n\t\t\t\ttrackingObject.configuration.EquipmentlineName = undefined;\n\n\t\t\t};\n\n\t\t\tfunction setPartnerData(trackingObject) {\n\n\t\t\t\t\/\/ If address element exists (ie we're on Contact Us page), store postcode\n\t\t\t\tif (jQuery('.retailer-direction__contact:visible > p').length) {\n\t\t\t\t\tinformationZIP = jQuery('.retailer-direction__contact:visible > p').text().split(', ').slice(-1)[0];\n\t\t\t\t}\n\n\t\t\t\tvar formDepartmentDropdownText = jQuery('retailer-contact-form-polymer', '#overlay-container').find('#departmentsDD').find('input.dropdown-selector:visible').val() || 'No selection';\n\t\t\t\tvar currentDepartment = location.hash.replace('#', '') || jQuery('.centered-tabs__filter-item--active').text().trim() || undefined;\n\n\t\t\t\t\/\/ Track the selected department if the form is open or use the department navigated to\n\t\t\t\tvar informationDepartment = isFormOpen() ? formDepartmentDropdownText : currentDepartment;\n\n\t\t\t\ttrackingObject.partner = {};\n\t\t\t\ttrackingObject.partner.informationBnr = jQuery('.retailer-intro').data('retailer-id');\n\t\t\t\ttrackingObject.partner.informationName = jQuery('.retailer-intro__retailer-name').text().trim();\n\t\t\t\ttrackingObject.partner.informationDepartment = informationDepartment;\n\t\t\t\ttrackingObject.partner.informationZIP = informationZIP;\n\n\t\t\t};\n\n\t\t\tfunction setFormData(trackingObject, obj) {\n\n\t\t\t\t\/\/ For all events\n\t\t\t\ttrackingObject.form = {};\n\t\t\t\ttrackingObject.form.FormType = 'contact';\n\t\t\t\ttrackingObject.form.FormName = 'contactRetailer';\n\t\t\t\ttrackingObject.form.FormVersion = '1';\n\n\t\t\t\t\/\/ For specific events\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase 'openModal':\n\n\t\t\t\t\t\ttrackingObject.form.FormStart = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_DealerFormCTA_Click':\n\n\t\t\t\t\t\tquestionnaire = getQuestionnaire(); \/\/ Store questionnaire data\n\n\t\t\t\t\t\ttrackingObject.form.PrefContactChannels = undefined;\n\t\t\t\t\t\ttrackingObject.form.MarketingConsent = undefined;\n\t\t\t\t\t\ttrackingObject.form.Questionnaire = questionnaire;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'submissionSuccess':\n\n\t\t\t\t\t\ttrackingObject.form.PrefContactChannels = undefined;\n\t\t\t\t\t\ttrackingObject.form.MarketingConsent = undefined;\n\t\t\t\t\t\ttrackingObject.form.LeadID = ((Date.now() + Math.random()) * 100000).toString();\n\t\t\t\t\t\ttrackingObject.form.Questionnaire = questionnaire; \/\/ Use stored data\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction setLinkData(trackingObject, obj) {\n\n\t\t\t\ttrackingObject.link = {};\n\t\t\t\ttrackingObject.link.url = obj.attributes.url;\n\t\t\t\ttrackingObject.link.name = obj.attributes.name;\n\n\t\t\t};\n\n\t\t\tfunction setVideoData(trackingObject, obj) {\n\n\t\t\t\ttrackingObject.video = {}\n\t\t\t\ttrackingObject.video.playerName = obj.attributes.src.replace('http:\/\/', '').replace('https:\/\/', '').replace('www.', '').split('\/')[0];\n\t\t\t\ttrackingObject.video.title = obj.attributes.name;\n\t\t\t\ttrackingObject.video.id = obj.attributes.id;\n\t\t\t\ttrackingObject.video.platform = undefined;\n\t\t\t\ttrackingObject.video.url = obj.attributes.src;\n\t\t\t\ttrackingObject.video.length = undefined;\n\n\t\t\t};\n\n\n\t\t\t\/\/ Handlers\n\n\t\t\tfunction triggerEvent(trackingObject, event) {\n\n\t\t\t\tvwdata.push(trackingObject);\n\t\t\t\tconsole.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n\n\t\t\t};\n\n\t\t\tfunction pageLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_Dealer_Pageload';\n\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\t\t\t\ttrackingObject.eventInfo.pageCategory = pageCategory;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject);\n\t\t\t\tsetPartnerData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction subNavigationClick(obj) {\n\n\t\t\t\t\/\/ Form dropdown currently redirects click events to centre tabs to navigate underlying page\n\t\t\t\t\/\/ Only trigger bootstrapper event if form is not open\n\t\t\t\tif (isFormOpen()) return;\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_DealerSubNavigation_Click';\n\t\t\t\ttrackingObject.eventInfo.contentId = obj.attributes.name;\n\t\t\t\ttrackingObject.eventInfo.pageCategory = pageCategory;\n\t\t\t\ttrackingObject.eventInfo.sectionName = obj.attributes.name;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetLinkData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction buttonClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_DealerButton_Click';\n\t\t\t\ttrackingObject.eventInfo.contentId = obj.attributes.name;\n\t\t\t\ttrackingObject.eventInfo.pageCategory = pageCategory;\n\t\t\t\ttrackingObject.eventInfo.sectionName = obj.attributes.name;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetLinkData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction formLayerLoad(obj) {\n\n\t\t\t\tpageInfoWhenFormOpened = getPageInfo();\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_DealerFormLayer_Load';\n\t\t\t\ttrackingObject.eventInfo.pageCategory = pageCategory;\n\t\t\t\ttrackingObject.eventInfo.sectionName = obj.attributes.name;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetFormData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction formCTAClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_DealerFormCTA_Click';\n\t\t\t\ttrackingObject.eventInfo.contentId = obj.attributes.name;\n\t\t\t\ttrackingObject.eventInfo.pageCategory = pageCategory;\n\t\t\t\ttrackingObject.eventInfo.sectionName = obj.attributes.name;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetFormData(trackingObject, obj);\n\t\t\t\tsetLinkData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction formSubmissionSuccessMessageLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_DealerFormSubmissionSuccessMessage_Load';\n\t\t\t\ttrackingObject.eventInfo.contentId = obj.attributes.name;\n\t\t\t\ttrackingObject.eventInfo.pageCategory = pageCategory;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetFormData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction videoPlayerClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tvar contentId = 'Video - ' + obj.attributes.name.split(' ').slice(0, 4).join(' '); \/\/ First 4 words of title\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VideoPlayer_DealerVideoPlay_Click';\n\t\t\t\ttrackingObject.eventInfo.contentId = 'Video - ' + obj.attributes.name;\n\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\t\t\t\ttrackingObject.eventInfo.pageCategory = pageCategory;\n\t\t\t\ttrackingObject.eventInfo.sectionName = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetVideoData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction formCloseClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_Close_Click';\n\t\t\t\ttrackingObject.eventInfo.pageCategory = pageCategory;\n\t\t\t\ttrackingObject.eventInfo.sectionName = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t}\n\n\n\t\t\t\/\/ Main listener\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase 'VWBasic_Dealer_Pageload':\n\t\t\t\t\t\tpageLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_DealerSubNavigation_Click':\n\t\t\t\t\t\t\/\/case 'click':\n\t\t\t\t\t\tsubNavigationClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_DealerButton_Click':\n\t\t\t\t\t\tbuttonClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'openModal':\n\t\t\t\t\t\tformLayerLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_DealerFormCTA_Click':\n\t\t\t\t\t\tformCTAClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'submissionSuccess':\n\t\t\t\t\t\tformSubmissionSuccessMessageLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\/\/case 'playVideo':\n\t\t\t\t\tcase 'VideoPlayer_DealerVideoPlay_Click':\n\t\t\t\t\t\tvideoPlayerClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_Close_Click':\n\t\t\t\t\t\tformCloseClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25792],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19635,"type":"CustomHtml","name":"8a63d121f05f009f88f3c0c87b4371c0","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Retailer EVENTS > 2019\/07\/12');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar pageId = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\t\t\tvar selectedSubSection = getSelectedSubSection();\n\n\t\t\tfunction getSelectedSubSection() {\n\n\t\t\t\treturn jQuery('.centered-tabs__filter-item--active').text().trim() || location.hash;\n\n\t\t\t}\n\n\n\t\t\t\/\/ VWBasic_Dealer_Pageload\n\n\t\t\tsetTimeout(function() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_Dealer_Pageload',\n\t\t\t\t\teventAction: 'VWBasic_Dealer_Pageload',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tpageName: 'RetailerPage',\n\t\t\t\t\tcontentID: 'RetailerPage',\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: pageId\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c029-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}, 100);\n\n\n\t\t\t\/\/ VWBasic_DealerSubNavigation_Click\n\n\t\t\tjQuery('ul.centered-tabs__filter-list >').on('click', onSubNavigationClick);\n\n\t\t\tfunction onSubNavigationClick() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_DealerSubNavigation_Click',\n\t\t\t\t\teventAction: 'VWBasic_DealerSubNavigation_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tpageName: 'RetailerPage',\n\t\t\t\t\tcontentID: 'RetailerPage',\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: pageId + '#' + this.innerText,\n\t\t\t\t\tname: this.innerText,\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c029-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t};\n\n\n\t\t\t\/\/ VWBasic_DealerButton_Click\n\n\t\t\tjQuery('.retailer-direction button').on('click', function(e) {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_DealerButton_Click',\n\t\t\t\t\teventAction: 'VWBasic_DealerButton_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tpageName: 'RetailerPage',\n\t\t\t\t\tcontentID: 'RetailerPage',\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: pageId + '#' + this.innerText,\n\t\t\t\t\tname: this.innerText,\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c029-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t});\n\n\n\t\t\t\/\/ VWBasic_DealerFormCTA_Click\n\n\t\t\t\/\/ Use openModal event to ensure CTA button exists before binding listener\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase 'openModal':\n\n\t\t\t\t\t\tselectedSubSection = getSelectedSubSection();\n\n\t\t\t\t\t\tsetTimeout(function() {\n\n\t\t\t\t\t\t\tjQuery('retailer-contact-form-polymer', '#overlay-container').find('cta-button').on('click', function(e) {\n\n\t\t\t\t\t\t\t\tonOverlayFormCTAButtonClick(e);\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}, 100);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tfunction onOverlayFormCTAButtonClick(e) {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_DealerFormCTA_Click',\n\t\t\t\t\teventAction: 'VWBasic_DealerFormCTA_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tpageName: 'RetailerPage',\n\t\t\t\t\tcontentID: 'RetailerPage',\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\t\/\/ Cant use 'this' as wrong scope (window)\n\t\t\t\tvar label = jQuery(e.target).text().trim();\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: 'submitRequest', \/\/pageI + '#' + label.toLowerCase(),\n\t\t\t\t\tname: label,\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c029-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t};\n\n\t\t\t\/\/ VWBasic_Close_Click\n\t\t\tjQuery('#overlay-close-button').on('click', function(e) {\n\n\t\t\t\tonCloseClick();\n\n\t\t\t\t\/\/ User is currently able to navigate within form.\n\t\t\t\t\/\/ If user has changed section (via dropdown) fire sub nav event on form close.\n\t\t\t\tif (selectedSubSection !== getSelectedSubSection()) {\n\n\t\t\t\t\tonSubNavigationClick();\n\t\t\t\t\tselectedSubSection = getSelectedSubSection();\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tfunction onCloseClick() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_Close_Click',\n\t\t\t\t\teventAction: 'VWBasic_Close_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tpageName: 'RetailerPage',\n\t\t\t\t\tcontentID: 'RetailerPage',\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\tname: 'closeForm',\n\t\t\t\t\turl: 'function(closeForm)'\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c029-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}\n\n\t\t\t\/\/ VideoPlayer_DealerVideoPlay_Click\n\n\t\t\tjQuery('.media-asset a').on('click', function(e) {\n\n\t\t\t\tvar $anchorTag = jQuery(e.currentTarget);\n\t\t\t\tvar $closestTitle = $anchorTag.closest('.row').find('h2,h3').eq(0);\n\t\t\t\tvar videoUrl = $anchorTag.attr('data-src');\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VideoPlayer_DealerVideoPlay_Click',\n\t\t\t\t\teventAction: 'VideoPlayer_DealerVideoPlay_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tpageName: 'RetailerPage',\n\t\t\t\t\tcontentID: 'RetailerPage',\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\tsrc: videoUrl,\n\t\t\t\t\tname: $closestTitle.text().trim(),\n\t\t\t\t\tid: videoUrl.split('\/')[videoUrl.split('\/').length - 1]\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c029-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t})\n\n\n\n\t\t});\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25792],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19636,"type":"CustomHtml","name":"7c3752cec167870d67b72efc14b242d9","parameters":{"customHtml":"<script>\n  \/\/ Page: \/\/perfect\/app\/\n\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole('Live > SD My Perfect EVENTS > 2019\/11\/16');\n\n      if (!window.perfectEventAdded) {\n        window.perfectEventAdded = true;\n\n        var setUpEvent = function () {\n          console.log('push setUpEvent!');\n          var state = [];\n          var previousSection = '';\n          var currentSection = '';\n          window.dataLayer = {\n            event: [],\n          };\n          var apiCount = 0;\n          var apiData;\n          var apiCarData;\n          var list = [];\n          var pagesBeforeShortlist = \/(modelselect|basics|musthaves|choices|detail\\?)\/gi;\n          var settings = {\n            basePageName: '\/perfect\/app\/',\n            pageNames: {\n              modelselect: 'modelselect',\n              basics: 'basics',\n              musthaves: 'musthaves',\n              choices: 'choices',\n              shortlist: 'shortlist',\n              detail: 'detail',\n              range: 'range',\n              morematches: 'morematches',\n            },\n            basics: {\n              body: 'body',\n              color: 'color',\n              price: 'price',\n              monthly: 'monthly',\n              performance: 'performance',\n              models: 'models',\n            },\n            events: {\n              basicsComplete: 'basics-complete',\n              mustHavesComplete: 'must-haves-complete',\n              yourDrive: 'your-drive',\n              carFeaturesComplete: 'car-features-complete',\n              driverFeatures: 'driver-features',\n              fullDetailsLoaded: 'full-details-loaded',\n              loadSavedSession: 'load-saved-session',\n              saveSession: 'save-session',\n              matchedCarCtaClicked: 'matched-car-cta-clicked',\n              viewMoreMatches: 'view-more-matches',\n              navClicked: 'nav-clicked',\n              changeMatchedCarsFilter: 'change-matched-cars-filter',\n              sectionLoaded: 'section-loaded',\n            },\n          };\n\n          \/\/ DOM object used for broadcasting events\n          var pageElement = jQuery('#page');\n          var url = window.location.hash.split('?')[0];\n          for (var item in settings.pageNames) {\n            \/\/ see if we can find the current section in the hash url\n            if (url.indexOf(item) >= 0) {\n              currentSection = item;\n              break;\n            }\n          }\n\n          var getUrl = function (includeHash) {\n            var url = window.location.href\n              .split('?')[0]\n              .split('#')[0]\n              .replace('http:\/\/', '')\n              .replace('https:\/\/', '');\n\n            if (includeHash) {\n              url = window.location.href\n                .replace('http:\/\/', '')\n                .replace('https:\/\/', '');\n            }\n            return url;\n          };\n\n          var fireEvent = function (eventName, attributes) {\n            window.dataLayer.event.push({\n              eventInfo: {\n                eventName: eventName,\n                eventAction: eventName,\n                pageId: getUrl(false),\n                pageName: 'MyPerfect',\n                contentID: 'MyPerfect',\n              },\n              category: {},\n              attributes: attributes,\n            });\n            pageElement.trigger('data-layer-event-fired');\n          };\n\n          var getKeys = function (paramKey) {\n            for (var item in settings.basics) {\n              if (item === paramKey) {\n                return {\n                  key: 'basics',\n                  id: paramKey,\n                };\n              }\n            }\n\n            return {\n              key: paramKey,\n              id: null,\n            };\n          };\n\n          var findBasicsText = function (answers, values) {\n            var list = [];\n\n            if (answers && answers.length > 0) {\n              for (var i = 0; i < answers.length; i++) {\n                var answer = answers[i];\n                if (values && values.length > 0) {\n                  for (var j = 0; j < values.length; j++) {\n                    if (answer.id === values[j]) {\n                      list.push(answer.positiveFeatureCopy);\n                    }\n                  }\n                }\n              }\n            }\n\n            return list;\n          };\n\n          var getYourDriveObject = function (longName, value) {\n            if (longName.indexOf('drive') >= 0) {\n              return {\n                question: 'driver',\n                id: '1',\n                answer: [\n                  {\n                    type: 'string',\n                    value: value,\n                  },\n                ],\n              };\n            } else if (longName.indexOf('people') >= 0) {\n              return {\n                question: 'peopleAmount',\n                id: '2',\n                answer: [\n                  {\n                    type: 'string',\n                    value: value,\n                  },\n                ],\n              };\n            } else if (longName.indexOf('boot') >= 0) {\n              return {\n                question: 'bootSpace',\n                id: '3',\n                answer: [\n                  {\n                    type: 'string',\n                    value: value,\n                  },\n                ],\n              };\n            } else if (longName.indexOf('door') >= 0) {\n              return {\n                question: 'doors',\n                id: '4',\n                answer: [\n                  {\n                    type: 'string',\n                    value: value,\n                  },\n                ],\n              };\n            }\n            return longName.substring(0, 20);\n          };\n\n          var getCamelCase = function (str) {\n            return str\n              .replace(\/(?:^\\w|[A-Z]|\\b\\w)\/g, function (word, index) {\n                return index == 0 ? word.toLowerCase() : word.toUpperCase();\n              })\n              .replace(\/\\s+\/g, '');\n          };\n\n          var getShorterText = function (str) {\n            return str\n              .replace(' or ', '\/')\n              .replace('Room for a ', '')\n              .replace('Room for the ', '')\n              .replace('This car is just for me', 'just me')\n              .replace('I need room for 2-4 children', 'room for 2-4 children');\n          };\n\n          var clearDuplicateFromArrOfObj = function (array) {\n            return array.filter((item, index) => {\n              return (\n                index ===\n                array.findIndex(obj => {\n                  return JSON.stringify(obj) === JSON.stringify(item);\n                })\n              );\n            });\n          };\n          var lst = [];\n          var findFeaturesText = function (answers, values) {\n            if (pagesBeforeShortlist.test(window.location.href)) {\n              list = [];\n            }\n\n            if (values && values.length > 0 && answers && answers.length > 0) {\n              for (var i = 0; i < answers.length; i++) {\n                var answerList = answers[i].answers;\n                var category = answers[i].category;\n\n                for (var j = 0; j < values.length; j++) {\n                  var item = values[j].split(':');\n\n                  if (item && item.length > 1) {\n                    var id = item[1];\n\n                    for (var k = 0; k < answerList.length; k++) {\n                      var answer = answerList[k];\n\n                      if (answer.id === id) {\n                        if (category === 'your-drive') {\n                          \/\/list.push({ [getYourDriveObject(answers[i].text)]: getShorterText(answer.text) });\n                          list.push(\n                            getYourDriveObject(\n                              answers[i].text,\n                              getShorterText(answer.text)\n                            )\n                          );\n                        } else {\n                          \/\/ 'style-features' || 'in-car-features' || 'popular-features' || 'driver-features'\n                          if (answer.text !== 'Not for me') {\n                            list.push(answer.positiveFeatureCopy);\n                          } else {\n                            \/\/ negatively answered questions\n                            \/\/ list.push({[getCamelCase(answerList[0].positiveFeatureCopy)]: 'No'});\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n\n            var listItems = clearDuplicateFromArrOfObj(list);\n            var selectedFilterText = '';\n\n            list = listItems;\n\n            if (jQuery('.selected a')[0]) {\n              selectedFilterText = jQuery('.selected a')[0].textContent;\n              var listWithoutDrivers = listItems.filter(item => !item.driver);\n              var label = '';\n\n              if (selectedFilterText === 'Performance') {\n                label = 'High Performance';\n              } else if (selectedFilterText === 'Efficiency') {\n                label = 'High Efficiency';\n              } else if (selectedFilterText === 'A bit of both') {\n                label = 'A bit of both';\n              }\n\n              listWithoutDrivers.push({\n                driver: label,\n              });\n              list = listWithoutDrivers;\n            }\n\n            return list;\n          };\n\n          var getParsedJson = function (data, startStr) {\n            var jsonText = data\n              .replace(startStr, '')\n              .replace(\/\\)([^\\)]*)$\/g, ''); \/\/ replace last )\n\n            return JSON.parse(jsonText);\n          };\n\n          var getRangeDatafromCarApi = function (paramValues) {\n            for (var i = 0; i < apiCarData.length; i++) {\n              var item = apiCarData[i];\n              if (item.rangeId === paramValues[0]) {\n                console.log(\n                  'push getRangeDatafromCarApi found match:',\n                  paramValues,\n                  item,\n                  '!'\n                );\n                return {\n                  subsidyAmount: item.subsidyAmount,\n                  price: item.price,\n                  p11dPrice: item.p11dPrice,\n                  offerPrice: item.offerPrice,\n                  carlineId: item.trimId,\n                  carlineName: item.modelTitle,\n                  trimName: item.modelTitle + ' ' + item.title,\n                  trimId: paramValues[0],\n                };\n              }\n            }\n\n            console.log(\n              'push getRangeDatafromCarApi OOPS!! coudnt match:',\n              paramValues,\n              '!!'\n            );\n            return paramValues;\n          };\n\n          var translateCode = function (paramKey, paramValues) {\n            var apiKeys = getKeys(paramKey);\n            var key = apiKeys.key;\n            var id = apiKeys.id;\n            var text = paramValues;\n\n            if (\n              paramValues[0] === 'any' ||\n              paramKey === 'price' ||\n              paramKey === 'models' ||\n              paramKey === 'monthly'\n            ) {\n              return paramValues;\n            } else if (paramKey === 'rangeId') {\n              return getRangeDatafromCarApi(paramValues);\n            }\n\n            if (apiData[key]) {\n              if (id) {\n                for (var i = 0; i < apiData[key].length; i++) {\n                  var item = apiData[key][i];\n                  if (item.id === id) {\n                    \/\/ all basics items have ids\n                    text = findBasicsText(item.answers, paramValues);\n                  }\n                }\n              } else {\n                \/\/ these are all other items\n                text = findFeaturesText(apiData[key], paramValues);\n              }\n            }\n\n            return text;\n          };\n\n          var generalButtonsReady = function () {\n            if (\n              currentSection === settings.pageNames.basics &&\n              jQuery('.general-cta').hasClass('disabled')\n            ) {\n              return false;\n            }\n            return true;\n          };\n\n          var addBtnListeners = function () {\n            jQuery('.general-cta').on('click', function (e) {\n              setTimeout(function () {\n                fireEvent('VWBasic_SCStepButton_Click', {\n                  currentSection: currentSection,\n                  state: state,\n                  url: getUrl(false),\n                  name: e.currentTarget.innerText,\n                });\n              }, 1000);\n            });\n\n            jQuery('.underline-button').on('click', function (e) {\n              setTimeout(function () {\n                fireEvent('VWBasic_SCStepLink_Click', {\n                  currentSection: '',\n                  state: state,\n                  url: getUrl(false),\n                  name: e.currentTarget.innerText,\n                });\n              }, 1000);\n            });\n          };\n\n          var addAccordionListeners = function () {\n            var accordions = jQuery(\n              '.shortlist-page-content .fine-tune-matches'\n            );\n\n            if (accordions.length > 0) {\n              for (var i = 0; i < accordions.length; i++) {\n                jQuery('.cta', accordions[i]).on('click', function (e) {\n                  var eventName =\n                      jQuery(this).parent()[0].className.indexOf('open') > 0\n                        ? 'VWBasic_AccordionOpen_Click'\n                        : 'VWBasic_AccordionClose_Click',\n                    btnName = this.innerText;\n\n                  fireEvent(eventName, {\n                    currentSection: currentSection,\n                    state: state,\n                    url: getUrl(false),\n                    name: btnName,\n                  });\n                });\n\n                var btns = jQuery('.fine-tune a', accordions[i]);\n\n                for (var j = 0; j < btns.length; j++) {\n                  jQuery(btns[j]).on('click', function (e) {\n                    \/\/ Only fire event when user is selecting filter,\n                    \/\/ not when deselecting\n                    console.log(jQuery(e.target));\n                    if (jQuery(e.target).parent('.selected').length > 0) {\n                      return;\n                    }\n\n                    var eventName = 'VWBasic_FilterSelect_Click',\n                      btnName = this.innerText;\n\n                    fireEvent(eventName, {\n                      currentSection: currentSection,\n                      state: state,\n                      url: getUrl(false),\n                      name: btnName,\n                    });\n                  });\n                }\n              }\n            }\n          };\n\n          var addImageListeners = function () {\n            \/\/ shortlist\/range car image\n            jQuery('.shortlist-item-info-image a').on('click', function (e) {\n              var id = [this.dataset.rangeId];\n              state.rangeId = getRangeDatafromCarApi(id);\n              fireEvent('VWBasic_SCStepRecommendedVehicleLink_Click', {\n                currentSection: currentSection,\n                state: state,\n                url: getUrl(false),\n                name: 'Full Details Image',\n                isImage: true,\n              });\n            });\n          };\n\n          var gatherData = function () {\n            var hash = window.location.hash.split('?');\n            var urlParams = hash.length > 1 ? hash[1].split('&') : [];\n\n            for (var i = 0; i < urlParams.length; i++) {\n              var valuePair = urlParams[i].split('=');\n\n              if (valuePair.length > 1) {\n                state[valuePair[0]] = translateCode(\n                  valuePair[0],\n                  valuePair[1].split('|')\n                );\n              }\n            }\n\n            setTimeout(function () {\n              if (generalButtonsReady()) {\n                \/\/ add btn listeners\n                addBtnListeners();\n              } else {\n                \/\/ on the beasic step we cant add listeners to disabled btns, gotta wait\n                jQuery(\n                  '.basics-form-items-bottom-control .lozenge-label-button'\n                ).on('click', function (e) {\n                  setTimeout(function () {\n                    if (generalButtonsReady()) {\n                      addBtnListeners();\n                    }\n                  }, 1000);\n                });\n              }\n\n              if (currentSection === settings.pageNames.detail) {\n                jQuery('.details-finance-example-container').on(\n                  'click',\n                  function (e) {\n                    fireEvent('VWBasic_SCStepRecommendedVehicleLink_Click', {\n                      currentSection: currentSection,\n                      state: state,\n                      url: getUrl(false),\n                      name: 'View finance example',\n                    });\n                  }\n                );\n              } else if (currentSection === settings.pageNames.shortlist) {\n                addImageListeners();\n                addAccordionListeners();\n              } else if (currentSection === settings.pageNames.range) {\n                addImageListeners();\n                jQuery('.shortlist-item-ctas .more-details').on(\n                  'click',\n                  function (e) {\n                    var id = [\n                      jQuery(this).parent().parent().parent().parent()[0]\n                        .dataset.rangeId,\n                    ];\n                    state.rangeId = getRangeDatafromCarApi(id);\n                    fireEvent('VWBasic_SCStepRecommendedVehicleLink_Click', {\n                      currentSection: currentSection,\n                      state: state,\n                      url: getUrl(false),\n                      name: 'full-details',\n                      model: jQuery(this)\n                        .parent()\n                        .parent()\n                        .parent()\n                        .parent()\n                        .find('.shortlist-item-short-name')\n                        .text()\n                        .trim(),\n                      trim: jQuery(this)\n                        .parent()\n                        .parent()\n                        .parent()\n                        .parent()\n                        .find('.shortlist-item-info-long-name')\n                        .text()\n                        .trim(),\n                    });\n                  }\n                );\n                jQuery('.shortlist-item-view-all').on('click', function (e) {\n                  var id = [\n                    jQuery(this).parent().parent().parent().parent().parent()[0]\n                      .dataset.rangeId,\n                  ];\n                  state.rangeId = getRangeDatafromCarApi(id);\n                  fireEvent('VWBasic_SCStepRecommendedVehicleLink_Click', {\n                    currentSection: currentSection,\n                    state: state,\n                    url: getUrl(false),\n                    name: 'show-choices-in-detail',\n                    model: jQuery(this)\n                      .parent()\n                      .parent()\n                      .parent()\n                      .find('.shortlist-item-short-name')\n                      .text()\n                      .trim(),\n                    trim: jQuery(this)\n                      .parent()\n                      .parent()\n                      .parent()\n                      .find('.shortlist-item-info-long-name')\n                      .text()\n                      .trim(),\n                  });\n                });\n                jQuery('.view-finance-example').on('click', function (e) {\n                  var id = [\n                    jQuery(this).parent().parent().parent().parent()[0].dataset\n                      .rangeId,\n                  ];\n                  state.rangeId = getRangeDatafromCarApi(id);\n                  fireEvent('VWBasic_SCStepRecommendedVehicleLink_Click', {\n                    currentSection: currentSection,\n                    state: state,\n                    url: getUrl(false),\n                    name: 'view-finance-example',\n                    model: jQuery(this)\n                      .parent()\n                      .find('.shortlist-item-short-name')\n                      .text()\n                      .trim(),\n                    trim: jQuery(this)\n                      .parent()\n                      .find('.shortlist-item-info-long-name')\n                      .text()\n                      .trim(),\n                  });\n                });\n              }\n            }, 1200);\n          };\n\n          var setUpListeners = function () {\n            pageElement = jQuery('#page');\n            console.log(\n              '%c step 3.1 setUpListeners push:',\n              'background: #ccc; color: #333',\n              pageElement\n            );\n            pageElement.on('section-loaded', function (e, data) {\n              console.log(\n                '%c (' + e.type + ')! push:',\n                'background: #ccc; color: #333',\n                data\n              );\n              var eventName,\n                detail = data.detail['section-name'];\n\n              currentSection = detail.split('\/')[0];\n              console.log(\n                '%c (' + e.type + ')! push:',\n                'background: #ccc; color: #333',\n                currentSection,\n                e,\n                data\n              );\n              switch (currentSection) {\n                case settings.pageNames.range:\n                case settings.pageNames.shortlist:\n                  eventName = 'VWBasic_SCStepResultlist_Load';\n                  break;\n                case settings.pageNames.detail:\n                  eventName = 'VWBasic_SCStepRecommendedVehicle_Load';\n                  break;\n                default:\n                  eventName = 'VWBasic_SCStep_Load';\n              }\n\n              gatherData();\n\n              if (\n                previousSection !== currentSection &&\n                detail.split('\/').length <= 3\n              ) {\n                console.log('push: wait!!!', currentSection);\n                setTimeout(function () {\n                  console.log('push: done waiting!', detail, currentSection);\n                  fireEvent(eventName, {\n                    currentSection: currentSection,\n                    sectionName: detail,\n                    state: state,\n                  });\n                }, 1600);\n              }\n\n              previousSection = currentSection;\n            });\n            pageElement.on('view-more-matches', function (e, data) {\n              console.log(\n                '%c (' + e.type + ')! push:',\n                'background: #ccc; color: #333',\n                e,\n                data\n              );\n              fireEvent('VWBasic_SCStepLink_Click', {\n                currentSection: currentSection,\n                state: state,\n                url: getUrl(false),\n                name: 'View more matches',\n              });\n            });\n            pageElement.on('nav-clicked', function (e, data) {\n              console.log(\n                '%c (' + e.type + ')! push:',\n                'background: #ccc; color: #333',\n                e,\n                data\n              );\n              fireEvent('VWBasic_StepNavigation_Click', {\n                currentSection: currentSection,\n                state: state,\n                url: getUrl(false),\n                name: data.detail.item,\n              });\n            });\n            pageElement.on('change-matched-cars-filter', function (e, data) {\n              console.log(\n                '%c (' + e.type + ')! push:',\n                'background: #ccc; color: #333',\n                e,\n                data\n              );\n              setTimeout(function () {\n                fireEvent('VWBasic_SCStepResultlist_Load', {\n                  currentSection: currentSection,\n                  state: state,\n                });\n              }, 500);\n            });\n            pageElement.on('save-session', function (e, data) {\n              console.log(\n                '%c (' + e.type + ')! push:',\n                'background: #ccc; color: #333',\n                e,\n                data\n              );\n              fireEvent('VWBasic_SCStepRecommendedVehicleButton_Click', {\n                currentSection: currentSection,\n                state: state,\n                url: getUrl(false),\n                name: 'Save session',\n              });\n            });\n          };\n\n          \/\/ Step 1. fetch the json data so that we can init the app\n          jQuery\n            .get(\n              window.location.origin + '\/api\/perfect\/cars.js?callback=cars',\n              function (data) {\n                try {\n                  apiCarData = getParsedJson(data, 'cars(').cars;\n                  console.log('push apiCarData:', apiCarData);\n\n                  doneAPILoading();\n                } catch (e) {\n                  console.log('push error with car json!', e);\n                }\n              }\n            )\n            .fail(function (e) {\n              if (e && e.responseText) {\n                try {\n                  apiCarData = getParsedJson(e.responseText, 'cars(').cars;\n                  console.log('push apiCarData:', apiCarData);\n\n                  doneAPILoading();\n                } catch (e) {\n                  console.log('push 2nd error with car json!', e);\n                }\n              } else {\n                console.log(\n                  'push failed to load my perfect car api',\n                  e,\n                  window.location.origin + '\/api\/perfect\/cars.js?callback=cars'\n                );\n              }\n            });\n\n          jQuery\n            .get(\n              window.location.origin +\n                '\/api\/perfect\/questions.js?callback=questions',\n              function (data) {\n                try {\n                  apiData = getParsedJson(data, 'questions(');\n                  console.log('push recieved json', apiData);\n\n                  doneAPILoading();\n                } catch (e) {\n                  console.log('push error with questions json!', e);\n                }\n              }\n            )\n            .fail(function (e) {\n              if (e && e.responseText) {\n                try {\n                  apiData = getParsedJson(e.responseText, 'questions(');\n                  console.log('push apiData:', apiData);\n\n                  doneAPILoading();\n                } catch (e) {\n                  console.log('push 2nd error with questions json!', e);\n                }\n              } else {\n                console.log(\n                  'push failed to load my perfect questions api data',\n                  e,\n                  window.location.origin +\n                    '\/api\/perfect\/questions.js?callback=questions'\n                );\n              }\n            });\n\n          \/\/ Step 2. wait until a api has loaded\n          var doneAPILoading = function () {\n            apiCount++;\n            if (apiCount === 2) {\n              setTimeout(function () {\n                initTracking();\n              }, 1200);\n            }\n          };\n\n          \/\/ Step 3. init the app\n          var initTracking = function () {\n            \/\/ fire inital event\n            setUpListeners();\n            gatherData();\n            console.log(\n              '%c step 3.2. fire inital event push:',\n              'background: #ccc; color: #333'\n            );\n            fireEvent('VWBasic_Step_Pageload', {\n              currentSection: currentSection,\n              state: state,\n            });\n\n            \/\/ console.log('%cstep 3.3. DYNAMIC push:', 'background: #00ff00; color: #000');\n            \/\/ for (var item in settings.events) {\n            \/\/  jQuery('#page').on(settings.events[item], function (e, data) {\n            \/\/   console.log('%cDYNAMIC heard! push:', 'background: #00ff00; color: #000', e, data);\n            \/\/  });\n            \/\/ }\n\n            \/\/ window.perfectData.addListener(apiData, apiCarData)\n          };\n        }; \/\/ end\n\n        setTimeout(function () {\n          setUpEvent();\n        }, 4000);\n      }\n    });\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25794],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19637,"type":"CustomHtml","name":"df5af218ea9d72612949db36d8292406","parameters":{"customHtml":"<script>\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole(\n        '%Live > SD PDB EVENTS > 2019\/09\/09',\n        'background: orange; color: white'\n      );\n\n      \/\/ Prevent double firing\n      if (window.setUpPDBMatomoEvents) {\n        return;\n      }\n      window.setUpPDBMatomoEvents = true;\n\n      \/\/console.log('%cPDB - EVENTS', 'background: #222; color: orange');\n\n      var $dataLayer = jQuery('#vw-data-layer');\n      var pageId = window.location.href\n        .split('?')[0]\n        .split('#')[0]\n        .replace('http:\/\/', '')\n        .replace('https:\/\/', '');\n      var pageName = dataLayer.page[0].pageInfo.pageName;\n      var multipleVehiclePageHasLoaded = false;\n      var shouldCheckForFinanceCalulationInViewPort = false;\n      var onScrollDebounce = debounce(onScroll.bind(this), 500, false);\n\n      \/*\n       * Helpers\n       *\/\n\n      \/\/ Use nav to determine page type\n      function getNavTotal() {\n        return jQuery('nav[class*=\"Menustyle__Menu\"] > div').children().length;\n      }\n\n      function isErrorPage() {\n        return getNavTotal() === 0;\n      }\n\n      function isSingleVehiclePage() {\n        return getNavTotal() === 1;\n      }\n\n      function isMultipleVehiclePage() {\n        return (\n          getNavTotal() > 1 &&\n          jQuery('div[class*=CompareNavigationstyle__StyledContainer]')\n            .length === 0\n        );\n      }\n\n      function isComparePage() {\n        return (\n          getNavTotal() > 1 &&\n          !!jQuery('div[class*=CompareNavigationstyle__StyledContainer]').length\n        );\n      }\n\n      function getButtonAttr(target) {\n        var label = jQuery(target).text().replace(' >', '');\n        var functionLabel = 'function(' + label + ')';\n        var href = jQuery(target).attr('href');\n\n        if (href) {\n          href.replace('\/\/javascript:;', '');\n          href = href.split('mailto')[0]; \/\/ will empty if contains mailto\n        }\n\n        \/\/ If after replace etc above href is empty, use function label\n        if (!href) {\n          href = functionLabel;\n        }\n\n        return {\n          label: label,\n          href: href,\n        };\n      }\n\n      \/*\n       * Utils\n       *\/\n\n      function fireEvent(eventName, attributes) {\n        var eventInfo = {\n          eventName: eventName,\n          eventAction: eventName,\n          pageId: pageId,\n          pageName: pageName,\n        };\n\n        attributes = attributes || {};\n\n        vwUk.Instances.dataLayerController.fireEvent(\n          'c044-01',\n          eventInfo,\n          {},\n          attributes\n        );\n      }\n\n      \/\/ Wait for element to be rendered on page\n      function waitForElement(selector, callback) {\n        var $element = jQuery(selector);\n\n        var observer = new MutationObserver(function (mutations) {\n          var $element = jQuery(selector);\n\n          if ($element.length) {\n            \/\/console.log('Element found', $element);\n\n            callback(selector);\n            this.disconnect();\n          }\n        });\n\n        observer.observe(document.documentElement, {\n          childList: true,\n          subtree: true,\n        });\n      }\n\n      \/\/ Limits the rate at which a function can fire. Used with scroll handler\n      \/\/ Fires passed in function when it stops getting called for an amount of\n      \/\/ time specified by delay\n      function debounce(func, delay, immediate) {\n        var timeout;\n\n        return function () {\n          var args = arguments;\n          var callNow = immediate && !timeout;\n\n          function later() {\n            timeout = null;\n            if (!immediate) {\n              func.apply(window, args);\n            }\n          }\n\n          clearTimeout(timeout);\n\n          timeout = setTimeout(later, delay);\n\n          if (callNow) {\n            func.apply(window, args);\n          }\n        };\n      }\n\n      \/\/ Returns value from 0 - 1 of amount element is in viewport (vertical scroll)\n      function getElementInViewportAmount($el) {\n        \/\/ Check element exists\n        if (!$el.length) {\n          return 0;\n        }\n\n        var rect = $el.get(0).getBoundingClientRect();\n\n        var overlapTop = Math.max(rect.top, 0);\n        var overlapBottom = Math.min(rect.bottom, jQuery(window).height());\n        var overlapHeight = overlapBottom - overlapTop;\n\n        return Math.max(Math.min(overlapHeight \/ rect.height, 1), 0);\n      }\n\n      \/*\n       * Event Listeners\n       *\/\n\n      $dataLayer.on('data-layer-pdb-event-fired', function (e) {\n        \/*console.log(\n          'Matomo PDB EVENT - heard data-layer-pdb-event-fired:',\n          e.detail\n        );*\/\n        switch (e.detail.eventName) {\n          case 'PDB Video View Initiation':\n            const isSingle =\n              e.detail.data &&\n              e.detail.data.section &&\n              e.detail.data.section.indexOf('Single') >= 0;\n            const attributes = {\n              label: e.detail.data.title,\n              id: e.detail.data.url.replace('https:\/\/youtu.be\/', ''),\n              url: e.detail.data.assetFileName,\n              href: e.detail.data.url,\n              action: e.detail.data.action,\n              section: e.detail.data.section,\n            };\n\n            \/*console.log(\n              'Matomo PDB EVENT - heard data-layer-pdb-event-fired:',\n              isSingle,\n              attributes\n            );*\/\n\n            if (isSingle) {\n              fireEvent('VideoPlayer_VehicleVideoPlay_Click', attributes);\n            } else {\n              fireEvent(\n                'VideoPlayer_MultipleVehiclesVideoPlay_Click',\n                attributes\n              );\n            }\n\n            break;\n\n          case 'PDB Header Anchor Click':\n            var eventName = isComparePage()\n              ? 'VWBasic_MultipleVehiclesAnchor_Click'\n              : 'VWBasic_VehicleAnchor_Click';\n            \/\/console.log('Matomo PDB EVENT - fire now:', eventName);\n            fireEvent(eventName, {\n              label: e.detail.data,\n              href: undefined,\n            });\n\n            break;\n\n          case 'PDB Menu Item Click':\n            var eventName = 'VWBasic_Button_Click';\n            \/\/console.log('Matomo PDB EVENT - fire now:', eventName);\n            fireEvent(eventName, {\n              label: e.detail.data,\n              href: undefined,\n            });\n\n            break;\n\n          case 'PDB Desktop Loading':\n            break;\n\n          case 'PDB No Longer Available': \/\/ Error page\n            fireEvent('VWBasic_Error_Pageload', {\n              message: event.detail.eventName,\n            });\n\n            setErrorPageListeners(e);\n\n            break;\n\n          case 'PDB Desktop Header Cars Added': \/\/ Vehicle pages\n            setVehiclePageListeners();\n\n            break;\n\n          case 'PDB Compare Highlight Differences Toggle Selected':\n            fireEvent('VWBasic_Button_Click', {\n              label: 'Highlight differences On',\n              href: 'function(Highlight differences)',\n            });\n\n            resetComparePageListeners();\n\n            break;\n\n          case 'PDB Compare Highlight Differences Toggle Unselected':\n            fireEvent('VWBasic_Button_Click', {\n              label: 'Highlight differences Off',\n              href: 'function(Highlight differences)',\n            });\n\n            resetComparePageListeners();\n\n            break;\n\n          default:\n        }\n      });\n\n      function onScroll(e) {\n        var isFinanceCalcElementExists = !!jQuery('#finance-container').length;\n\n        if (isFinanceCalcElementExists) {\n          if (getElementInViewportAmount(jQuery('#finance-container')) > 0.3) {\n            var isFinanceCalculationUnavailable =\n              jQuery(\n                '[class*=FinanceOptionsstyle__StyledNoCalculationsSection]'\n              ).length > 0;\n\n            if (isFinanceCalculationUnavailable) {\n              fireEvent('VWBasic_VehicleErrorMessage_Load', {\n                message: 'Finance calculations not available',\n              });\n            } else {\n              fireEvent('VWBasic_ContentSection_EnterViewport');\n            }\n\n            jQuery(window).off('scroll resize', onScrollDebounce);\n          }\n        }\n      }\n\n      \/\/ Delegate Lease & Care banner cta listener. Element might not be on page\n      jQuery('body').on(\n        'click',\n        'button[class*=LeaseCareBanner], .lease-care-btn',\n        function (e) {\n          var eventName = isComparePage()\n            ? 'VWBasic_MultipleVehiclesButton_Click'\n            : 'VWBasic_VehicleButton_Click';\n          var attributes = getButtonAttr(e.target);\n\n          fireEvent(eventName, attributes);\n        }\n      );\n\n      \/*\n       * Vehicle Page\n       *\/\n\n      \/\/ Called after page renders. Called multiple times - therefore its\n      \/\/ necessary to ensure handler not re-bound each time\n      function setVehiclePageListeners() {\n        \/\/ VWBasic_VehicleErrorMessage_Load\n        \/\/ VWBasic_ContentSection_EnterViewport\n        jQuery(window).off('scroll resize', onScrollDebounce);\n        jQuery(window).on('scroll resize', onScrollDebounce);\n\n        \/\/ Wait for element and assume all other elements loaded\/rendered too\n        waitForElement('nav[class*=Navigationstyle__StyledNav] > a', function (\n          selector\n        ) {\n          \/\/ Listen for clicks on container as elements unreliable at this stage\n          var $anchorNav = jQuery('nav[class*=Navigationstyle__StyledNav]');\n\n          $anchorNav.off('click', handleAnchorNavClick);\n          $anchorNav.on('click', handleAnchorNavClick);\n\n          function handleAnchorNavClick(e) {\n            var eventName = isComparePage()\n              ? 'VWBasic_MultipleVehiclesAnchor_Click'\n              : 'VWBasic_VehicleAnchor_Click';\n            var buttonAttr = getButtonAttr(e.target);\n\n            fireEvent(eventName, buttonAttr);\n          }\n\n          \/\/ VWBasic_Vehicle_Load\n          \/\/ VWBasic_MultipleVehicles_Pageload\n          if (isSingleVehiclePage() || isMultipleVehiclePage()) {\n            if (multipleVehiclePageHasLoaded) {\n              fireEvent('VWBasic_Vehicle_Load');\n            } else {\n              fireEvent('VWBasic_MultipleVehicles_Pageload');\n              multipleVehiclePageHasLoaded = true;\n            }\n          } else if (isComparePage()) {\n            fireEvent('VWBasic_MultipleVehicles_Pageload');\n          }\n\n          \/\/ \/\/ VWBasic_Button_Click - Multiple vehicle menu\n          var $modelNav = jQuery('nav[class*=\"Menustyle__Menu\"]');\n\n          $modelNav.off('click', handleMultipleVehicleMenuButtonClick);\n          $modelNav.on('click', handleMultipleVehicleMenuButtonClick);\n\n          function handleMultipleVehicleMenuButtonClick(e) {\n            if (jQuery(e.target).is('a[class*=Menustyle__MenuItem]')) {\n              var attributes = getButtonAttr(e.target);\n\n              if (attributes.label.indexOf('Compare all models') !== -1) {\n                fireEvent('VWBasic_Button_Click', attributes);\n                waitForElement(\n                  'div[class*=CompareNavigationstyle__StyledCarCardsRow].desktop > div',\n                  function (selector) {\n                    setVehiclePageListeners();\n                  }\n                );\n              }\n            }\n          }\n\n          \/\/ VWBasic_VehicleButton_Click\n          \/\/ VWBasic_MultipleVehiclesButton_Click\n          var $buttons = jQuery(\n            'a[class^=Retailer], footer:not([class]) >, a.a-cta, button[class*=LeaseCareBanner], .lease-care-btn'\n          );\n\n          $buttons.off('click', handleButtonClick);\n          $buttons.on('click', handleButtonClick);\n\n          function handleButtonClick(e) {\n            var eventName = isComparePage()\n              ? 'VWBasic_MultipleVehiclesButton_Click'\n              : 'VWBasic_VehicleButton_Click';\n            var attributes = getButtonAttr(e.target);\n\n            \/\/ Special attributes for '+' button\n            if (jQuery(e.target).is('button')) {\n              var label =\n                jQuery(e.target).siblings('p').text() ||\n                jQuery(e.target).text();\n\n              attributes = {\n                label: label,\n                href: 'function(' + label + ')',\n              };\n            }\n\n            fireEvent(eventName, attributes);\n          }\n\n          \/\/ VWBasic_Download_Click\n          \/\/ VWBasic_VehicleDownload_Click\n          var $downloadButtons = jQuery('a[href*=\"pdf\"]', '#pdb-root');\n\n          $downloadButtons.off('click', handleDownloadClick);\n          $downloadButtons.on('click', handleDownloadClick);\n\n          function handleDownloadClick(e) {\n            var eventName = isComparePage()\n              ? 'VWBasic_Download_Click'\n              : 'VWBasic_VehicleDownload_Click';\n            var attributes = getButtonAttr(e.currentTarget);\n\n            fireEvent(eventName, attributes);\n          }\n\n          \/\/ VWBasic_VehicleAccordionOpen_Click\n          \/\/ VWBasic_VehicleAccordionClose_Click\n          var $accordionButtons = jQuery(\n            'div[class*=SummaryNavigationstyle__StyledContainer] button'\n          );\n\n          $accordionButtons.off('click', handleAccordionClick);\n          $accordionButtons.on('click', handleAccordionClick);\n\n          function handleAccordionClick(e) {\n            var isOpen =\n              jQuery(e.currentTarget).children('i').css('transform') ===\n              'matrix(1, 0, 0, 1, 0, 0)'; \/\/ check icon rotation tranform\n            var eventName =\n              'VWBasic_VehicleAccordion' +\n              (isOpen ? 'Open' : 'Close') +\n              '_Click';\n            var attributes = getButtonAttr(e.currentTarget);\n            attributes.label += isOpen ? ' - Open' : ' - Closed';\n\n            fireEvent(eventName, attributes);\n          }\n\n          \/\/ VWBasic_VehicleSocialShare_Click\n          var $socialMediaButtons = jQuery(\n            'a[href*=facebook], a[href*=twitter]'\n          ).not('.icon-stack');\n\n          $socialMediaButtons.off('click', handleSocialClick);\n          $socialMediaButtons.on('click', handleSocialClick);\n\n          function handleSocialClick(e) {\n            var attributes = getButtonAttr(e.currentTarget);\n            attributes.label =\n              attributes.label ||\n              attributes.href.split('\/\/')[1].split('.com')[0] + ' share';\n            attributes.platform = attributes.href.split('\/').slice(-1)[0];\n\n            fireEvent('VWBasic_VehicleSocialShare_Click', attributes);\n          }\n        });\n      }\n\n      \/*\n       * Error Page\n       *\/\n\n      function setErrorPageListeners(event) {\n        waitForElement('[class*=RetailerInfostyle__StyledAnchor]', function (\n          selector\n        ) {\n          \/\/ VWBasic_Button_Click\n          var $errorPageButtons = jQuery('a[href]', '#pdb-root')\n            .not('a[href*=google]') \/\/ exclude Google Maps\n            .not('a[href*=\"format=pdf\"]'); \/\/ exclude downloads\n\n          $errorPageButtons.off('click', handleErrorPageButtonClick);\n          $errorPageButtons.on('click', handleErrorPageButtonClick);\n\n          function handleErrorPageButtonClick(e) {\n            var attributes = getButtonAttr(e.target);\n            fireEvent('VWBasic_Button_Click', attributes);\n          }\n\n          \/\/ VWBasic_Download_Click\n          var $errorPageDownloadButtons = jQuery('a[href*=\"pdf\"]', '#pdb-root');\n\n          $errorPageDownloadButtons.off('click', handleErrorPageDownloadClick);\n          $errorPageDownloadButtons.on('click', handleErrorPageDownloadClick);\n\n          function handleErrorPageDownloadClick(e) {\n            var attributes = getButtonAttr(e.currentTarget);\n            fireEvent('VWBasic_Download_Click', attributes);\n          }\n        });\n      }\n\n      \/*\n       *\n       *\/\n\n      \/\/ 'Compare' cars section is re-rendered when Highlight Differences\n      \/\/ toggle is selected so this allows rebinding of listeners\n      function resetComparePageListeners() {\n        function handleComparePageClick(e) {\n          var attributes = getButtonAttr(e.currentTarget);\n          fireEvent('VWBasic_MultipleVehiclesButton_Click', attributes);\n        }\n\n        \/\/ Delay for re-render\n        setTimeout(function () {\n          var $comparePageButtons = jQuery(\n            '[class*=CompareNavigationstyle__StyledCarCardsRow] a[href]'\n          );\n\n          $comparePageButtons.off('click', handleComparePageClick);\n          $comparePageButtons.on('click', handleComparePageClick);\n        }, 500);\n      }\n    });\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25787],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19638,"type":"CustomHtml","name":"1d986fa56e43e25c1ce5e8867097e38c","parameters":{"customHtml":"<script>\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole('Live > SD PDB ACTIONS > 2019\/09\/09');\n\n      \/\/ Prevent double firing\n      if (window.setUpPDBQubitActions) {\n        return;\n      }\n      window.setUpPDBQubitActions = true;\n\n      \/\/console.log('%cPDB - ACTIONS', 'background: #222; color: purple');\n\n      var $dataLayer = jQuery('#vw-data-layer');\n      var vwdata = (window.vwdata = window.vwdata || []);\n      var pageId = window.location.href\n        .split('?')[0]\n        .split('#')[0]\n        .replace('http:\/\/', '')\n        .replace('https:\/\/', '');\n      var pageName = dataLayer.page[0].pageInfo.pageName;\n      var contentId = dataLayer.page[0].pageInfo.pageID;\n      var pdbId = window.location.href.split('\/').slice(-1)[0];\n\n      \/\/ Use nav to determine page type\n      function getNavTotal() {\n        return jQuery('nav[class*=\"Menustyle__Menu\"] > div').children().length;\n      }\n\n      function isComparePage() {\n        return (\n          getNavTotal() > 1 &&\n          !!jQuery('div[class*=CompareNavigationstyle__StyledContainer]').length\n        );\n      }\n\n      function getModelData() {\n        var modelData = {};\n\n        var $container = jQuery(\n          '[class*=SummaryNavigationstyle__StyledContainer]'\n        );\n\n        if ($container.length) {\n          var modelName = $container.find('h2').eq(0).text();\n          var modelSpec = $container.find('p').eq(0).text();\n          var heroImageSrc =\n            jQuery('[class*=Herostyle__StyledSection] img').attr('src') || '';\n\n          modelData = {\n            modelName: modelName, \/\/ e.g. 'Golf GTE'\n            modelSpec: modelSpec, \/\/ e.g. 'GTE 1.4 TSI 204PS 6-speed DSG 5 Door'\n            id: heroImageSrc.split('\/')[9], \/\/ e.g. '30316-gte'\n            simpleId: heroImageSrc.split('\/')[8], \/\/ e.g. '30316'\n            name: modelName.replace('New ', '').split(' ')[0], \/\/ e.g. 'Golf'\n            bodyType: jQuery('div[name=TechnicalSpecifications]') \/\/ e.g. 'Hatchbacks'\n              .find('th:contains(Style)')\n              .siblings()\n              .eq(0)\n              .text(),\n          };\n\n          modelData.equipmentlineName =\n            modelData.name + ' ' + modelData.modelSpec;\n        }\n\n        return modelData;\n      }\n\n      function getVehicleList() {\n        return isComparePage()\n          ? getMultipleVehicleList()\n          : getSingleVehicleList();\n      }\n\n      function getMultipleVehicleList() {\n        var engineSpecs = jQuery('h6:contains(Engine capacity)')\n          .first()\n          .parents('.grid-row')\n          .children()\n          .not(':first-child')\n          .map(function () {\n            return jQuery(this).text();\n          })\n          .get();\n\n        var bodyTypes = jQuery('h6:contains(Style)')\n          .first()\n          .parents('.grid-row')\n          .children()\n          .not(':first-child')\n          .map(function () {\n            return jQuery(this).text().replace('-', '');\n          })\n          .get();\n\n        var menuLabels = jQuery('nav[class*=Menustyle__Menu] > div')\n          .children()\n          .not(':first-child')\n          .map(function () {\n            return jQuery(this).text();\n          })\n          .get();\n\n        var vehicleList = jQuery(\n          '[class*=CompareNavigationstyle__StyledCarCardsRow].desktop'\n        )\n          .children()\n          .not(':first-child')\n          .map(function (index) {\n            var label = menuLabels[index];\n            var isNoLongerAvailable =\n              label.indexOf('no longer available') !== -1;\n            var modelAndDerivative =\n              jQuery(this).find('h2').first().text() || '';\n            var modelSpec = jQuery(this).find('p').text();\n            var carlineName = label.split(' ')[0];\n            var imageSrc = jQuery(this).find('img').attr('src') || '';\n            var modelId = imageSrc.split('\/')[8];\n            var modelAndDerivativeId = imageSrc.split('\/')[9];\n            var indexMsg = index.toString();\n            var equipmentlineName =\n              modelAndDerivative + ' ' + engineSpecs[index];\n            var modelName = carlineName + ' ' + modelSpec;\n\n            if (isNoLongerAvailable) {\n              indexMsg = index.toString() + ' - no longer available';\n              modelAndDerivative = carlineName;\n              equipmentlineName = carlineName;\n              modelName = carlineName;\n            }\n\n            return {\n              index: indexMsg,\n              BodyType: bodyTypes[index] || undefined,\n              CarlineId: modelId,\n              CarlineName: carlineName,\n              SalesgroupId: modelAndDerivativeId,\n              SalesgroupName: modelAndDerivative,\n              EquipmentlineName: equipmentlineName,\n              ModelId: undefined,\n              ModelName: modelName,\n            };\n          })\n          .get();\n\n        return vehicleList;\n      }\n\n      function getSingleVehicleList() {\n        \/\/ Look for items in the Compare All Models submenu\n        var vehicleList = jQuery('nav[class*=\"Menustyle__Menu\"] > div')\n          .children()\n          .find('a')\n          .not('[class*=\"CompareAllModels\"]') \/\/ Exclude menu titling item\n          .map(function (index) {\n            var isFocused = jQuery(this).is('[class*=ActiveModel]');\n            var text = jQuery(this).text() || '';\n            var isNoLongerAvailable =\n              text.indexOf('no longer available') !== -1;\n            var indexMsg =\n              index.toString() +\n              ' - ' +\n              (isFocused ? 'in focus' : 'out of focus');\n            var modelData = {};\n\n            if (isNoLongerAvailable) {\n              indexMsg = index.toString() + ' - no longer available';\n              text = text.replace(' is no longer available', '');\n            }\n\n            if (isFocused) {\n              modelData = getModelData();\n            } else {\n              modelData = {\n                modelName: text,\n                name: text.replace('New ', '').split(' ')[0],\n              };\n            }\n\n            return {\n              index: indexMsg,\n              BodyType: modelData.bodyType,\n              CarlineId: modelData.simpleId,\n              CarlineName: modelData.name,\n              SalesgroupId: modelData.id,\n              SalesgroupName: modelData.modelName,\n              EquipmentlineName: modelData.equipmentlineName,\n              ModelId: undefined,\n              ModelName: modelData.modelSpec,\n            };\n          })\n          .get();\n\n        return vehicleList;\n      }\n\n      function getErrorCode(msg) {\n        var errors = ['PDB No Longer Available'];\n\n        return errors.indexOf(msg) + 1;\n      }\n\n      function getRetailerInfo() {\n        var $retailerInfo = jQuery('dl[class*=RetailerInfostyle__StyledList]');\n\n        return {\n          name: $retailerInfo.find('dt:not(.hidden)').text(),\n          zip: $retailerInfo\n            .find('dd:not(.openingHours) > p')\n            .text()\n            .split(', ')\n            .slice(-1)[0]\n            .trim(),\n        };\n      }\n\n      \/*\n       * Set data\n       *\/\n\n      function setEventInfo(trackingObject) {\n        trackingObject.eventInfo = {};\n        trackingObject.eventInfo.pageId = pageId;\n        trackingObject.eventInfo.pageName = pageName;\n        trackingObject.eventInfo.pageCategory = 'New Cars';\n        trackingObject.eventInfo.templateType = undefined;\n      }\n\n      function setEnvironmentData(trackingObject) {\n        trackingObject.environment = {};\n        trackingObject.environment.applicationId =\n          window.location.href.indexOf('vwcloud.co.uk') > -1\n            ? 'VWLocalPDBD6'\n            : 'VWPDBD6';\n        trackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n      }\n\n      function setUserBrowserData(trackingObject) {\n        trackingObject.user = {};\n        trackingObject.user.browserResolutionHeight = Math.max(\n          document.documentElement.clientWidth,\n          window.innerWidth || 0\n        ).toString();\n        trackingObject.user.browserResolutionWidth = Math.max(\n          document.documentElement.clientHeight,\n          window.innerHeight || 0\n        ).toString();\n        trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll(\n          'main'\n        )[0]\n          ? document.querySelectorAll('main')[0].offsetWidth.toString()\n          : undefined;\n        trackingObject.user.browserResolutionOrientation =\n          window.innerHeight < window.innerWidth ? 'h' : 'v';\n      }\n\n      function setPersonalizationData(trackingObject) {\n        trackingObject.personalization = {};\n        trackingObject.personalization.status = false;\n        trackingObject.personalization.placeholderId = undefined;\n        trackingObject.personalization.contentId = undefined;\n        trackingObject.personalization.activityId = undefined;\n        trackingObject.personalization.activityName = undefined;\n        trackingObject.personalization.experienceId = undefined;\n        trackingObject.personalization.experienceName = undefined;\n        trackingObject.personalization.offerName = undefined;\n        trackingObject.personalization.offerId = undefined;\n      }\n\n      function setConfigurationData(trackingObject) {\n        var modelData = getModelData();\n\n        trackingObject.configuration = trackingObject.configuration || {};\n        trackingObject.configuration.CarlineId = modelData.simpleId;\n        trackingObject.configuration.CarlineName = modelData.name;\n        trackingObject.configuration.SalesgroupId = modelData.id;\n        trackingObject.configuration.SalesgroupName = modelData.modelName;\n        trackingObject.configuration.EquipmentlineName = undefined;\n      }\n\n      function setConfigurationModelData(trackingObject) {\n        var modelData = getModelData();\n\n        trackingObject.configuration = trackingObject.configuration || {};\n        trackingObject.configuration.BodyTypeName = modelData.bodyType;\n        trackingObject.configuration.ModelId = undefined;\n        trackingObject.configuration.ModelName = modelData.modelSpec;\n      }\n\n      function setConfigurationPriceData(trackingObject) {\n        var basePrice, otrPrice;\n\n        \/\/ Only collect price info when model selected\n        if (!jQuery.isEmptyObject(getModelData())) {\n          basePrice = jQuery('.totalPriceHeader')\n            .eq(0)\n            .find('h3')\n            .text()\n            .replace('\u00a3', '')\n            .replace(',', '');\n\n          otrPrice = jQuery(\n            '[class*=SummaryNavigationstyle__StyledContainer] h3'\n          )\n            .eq(0)\n            .get(0)\n            .childNodes[0].nodeValue.replace('\u00a3', '')\n            .replace(',', '');\n        }\n\n        trackingObject.configuration = trackingObject.configuration || {};\n        trackingObject.configuration.PriceType = undefined;\n        trackingObject.configuration.PriceTypeParameter = undefined;\n        trackingObject.configuration.PriceRateCurrency = undefined;\n        trackingObject.configuration.PriceRateType = undefined;\n        trackingObject.configuration.PriceRateBasic = undefined;\n        trackingObject.configuration.PriceRateAdditional = undefined;\n        trackingObject.configuration.PriceRateTotal = undefined;\n        trackingObject.configuration.PriceTotalCurrency = 'GBP';\n        trackingObject.configuration.PriceTotalBasic = basePrice;\n        trackingObject.configuration.PriceTotalAdditional = undefined;\n        trackingObject.configuration.PriceTotalTotal = otrPrice;\n      }\n\n      function setPartnerData(trackingObject) {\n        var retailerInfo = getRetailerInfo();\n\n        trackingObject.partner = {};\n        trackingObject.partner.informationBnr = undefined;\n        trackingObject.partner.informationName = retailerInfo.name;\n        trackingObject.partner.informationDepartment = undefined;\n        trackingObject.partner.informationZIP = retailerInfo.zip;\n      }\n\n      function setFileData(trackingObject, obj) {\n        var fileUrl = obj.attributes.href;\n        var fileName = fileUrl.split('\/')[fileUrl.split('\/').length - 1];\n        var fileType = fileName.split('format=')[1];\n        var fileCategory;\n\n        \/\/ Parse brochure name so its more readable - only if its a brochure\n        if (fileName.indexOf('?format=pdf') !== -1) {\n          fileName = 'Original brochure ' + fileName.split('?')[0];\n          fileCategory = 'Car Brochure';\n        }\n\n        trackingObject.file = {};\n        trackingObject.file.name = fileName;\n        trackingObject.file.category = fileCategory;\n        trackingObject.file.type = fileType;\n        trackingObject.file.productName = undefined;\n        trackingObject.file.url = fileUrl;\n        trackingObject.file.language = 'en';\n      }\n\n      function setLinkData(trackingObject, obj) {\n        trackingObject.link = {};\n        trackingObject.link.url = obj.attributes.href;\n        trackingObject.link.name = obj.attributes.label;\n      }\n\n      function setErrorData(trackingObject, obj) {\n        var errorMsg = obj.attributes.message;\n\n        trackingObject.error = {};\n        trackingObject.error.code = getErrorCode(errorMsg).toString();\n        trackingObject.error.message = errorMsg;\n        trackingObject.error.referringUrl = pageId;\n      }\n\n      function setSocialData(trackingObject, obj) {\n        trackingObject.social = {};\n        trackingObject.social.Platform = obj.attributes.platform;\n        trackingObject.social.ShareConsent = undefined;\n      }\n\n      function setVideoData(trackingObject, obj) {\n        trackingObject.video = {};\n        trackingObject.video.playerName = 'YouTube';\n        trackingObject.video.title = obj.attributes.label;\n        trackingObject.video.id = obj.attributes.id;\n        trackingObject.video.url = obj.attributes.url;\n        trackingObject.video.platform = undefined;\n        trackingObject.video.length = undefined;\n      }\n\n      function setOwnershipData(trackingObject) {\n        trackingObject.ownership = {};\n        trackingObject.ownership.vehicle = undefined;\n      }\n\n      function setPhoneData(trackingObject, obj) {\n        trackingObject.phone = {};\n        trackingObject.phone.Number = obj.attributes.href.replace('tel:', '');\n        trackingObject.phone.Name = obj.attributes.retailerName;\n      }\n\n      \/*\n       * Handlers\n       *\/\n\n      function triggerEvent(trackingObject, event) {\n        vwdata.push(trackingObject);\n        console.log(\n          '%c SD Bootstrapper (' +\n            Bootstrapper.ensightenOptions.publishPath +\n            ') push event:',\n          'background: #222; color: #bada55',\n          event,\n          ' trackingObject:',\n          trackingObject\n        );\n      }\n\n      function onErrorPageLoad(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_Error_Pageload';\n        trackingObject.eventInfo.contentId = pageId.split('\/').pop();\n        trackingObject.eventInfo.contentLabels = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n\n        setPersonalizationData(trackingObject);\n        trackingObject.personalization.aemRessourcePath = undefined;\n\n        setConfigurationData(trackingObject);\n        setErrorData(trackingObject, obj);\n        setOwnershipData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onButtonClick(obj) {\n        var trackingObject = {};\n        var retailerInfo = getRetailerInfo();\n        var contentId =\n          obj.attributes.label === 'Contact retailer'\n            ? retailerInfo.name + ' ' + retailerInfo.zip\n            : obj.attributes.label;\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_Button_Click';\n        trackingObject.eventInfo.contentId = contentId;\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setLinkData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onDownloadClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_Download_Click';\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setFileData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onContentSectionEnterViewport(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VWBasic_ContentSection_EnterViewport';\n        trackingObject.eventInfo.contentId = getModelData().modelName;\n        trackingObject.eventInfo.contentLabels = undefined;\n        trackingObject.eventInfo.sectionName = 'Finance Calculataion';\n\n        setEnvironmentData(trackingObject);\n        trackingObject.environment.featureAppId = undefined;\n\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setConfigurationData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehicleLoad(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_Vehicle_Load';\n        trackingObject.eventInfo.contentId = getModelData().modelName;\n        trackingObject.eventInfo.contentLabels = undefined;\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        trackingObject.environment.featureAppId = undefined;\n\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        trackingObject.personalization.aemRessourcePath = undefined;\n\n        setConfigurationData(trackingObject);\n        setConfigurationPriceData(trackingObject);\n        setConfigurationModelData(trackingObject);\n\n        setPartnerData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehicleAccordionClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = obj.eventInfo.eventAction; \/\/ Open\/Close\n        trackingObject.eventInfo.contentId = obj.attributes.label;\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n\n        setConfigurationData(trackingObject);\n        setConfigurationPriceData(trackingObject);\n        setConfigurationModelData(trackingObject);\n\n        setPartnerData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehicleButtonClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_VehicleButton_Click';\n        trackingObject.eventInfo.contentId = obj.attributes.label;\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        trackingObject.environment.featureAppId = undefined;\n\n        setUserBrowserData(trackingObject);\n\n        setPersonalizationData(trackingObject);\n        trackingObject.personalization.aemRessourcePath = undefined;\n\n        setConfigurationData(trackingObject);\n        setConfigurationPriceData(trackingObject);\n        setConfigurationModelData(trackingObject);\n\n        setPartnerData(trackingObject);\n        setLinkData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehicleAnchorClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_VehicleAnchor_Click';\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setLinkData(trackingObject, obj);\n\n        setConfigurationData(trackingObject);\n        setConfigurationPriceData(trackingObject);\n        setConfigurationModelData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehicleDownloadClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_VehicleDownload_Click';\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n\n        setConfigurationData(trackingObject);\n        setConfigurationPriceData(trackingObject);\n        setConfigurationModelData(trackingObject);\n\n        setLinkData(trackingObject, obj);\n        setFileData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehicleSocialShareClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VWBasic_VehicleSocialShare_Click';\n        trackingObject.eventInfo.contentId = obj.attributes.label;\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setLinkData(trackingObject, obj);\n\n        setConfigurationData(trackingObject);\n        setConfigurationPriceData(trackingObject);\n        setConfigurationModelData(trackingObject);\n\n        setSocialData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehicleErrorMessageLoad(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VWBasic_VehicleErrorMessage_Load';\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n\n        setConfigurationData(trackingObject);\n        setConfigurationPriceData(trackingObject);\n        setConfigurationModelData(trackingObject);\n\n        setPartnerData(trackingObject);\n        setErrorData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehicleVideoPlayClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VideoPlayer_VehicleVideoPlay_Click';\n        trackingObject.eventInfo.contentId =\n          obj.attributes.action + ' - ' + obj.attributes.label;\n        trackingObject.eventInfo.contentLabels = obj.attributes.action;\n        trackingObject.eventInfo.sectionName = obj.attributes.section;\n\n        setEnvironmentData(trackingObject);\n        trackingObject.environment.featureAppId = undefined;\n\n        setPersonalizationData(trackingObject);\n        trackingObject.personalization.aemRessourcePath = undefined;\n\n        setConfigurationData(trackingObject);\n        setConfigurationPriceData(trackingObject);\n        setConfigurationModelData(trackingObject);\n\n        setLinkData(trackingObject, obj);\n        setVideoData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onMultipleVehiclesPageload(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VWBasic_MultipleVehicles_Pageload';\n        trackingObject.eventInfo.contentId = pdbId;\n        trackingObject.eventInfo.contentLabels = undefined;\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n\n        setPersonalizationData(trackingObject);\n        trackingObject.personalization.aemRessourcePath = undefined;\n\n        trackingObject.configuration = {};\n        trackingObject.configuration.vehicleList = getVehicleList();\n\n        setPartnerData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onMultipleVehiclesAnchorClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VWBasic_MultipleVehiclesAnchor_Click';\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setPartnerData(trackingObject);\n        setLinkData(trackingObject, obj);\n\n        trackingObject.configuration = {};\n        trackingObject.configuration.vehicleList = getVehicleList();\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onMultipleVehiclesButtonClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VWBasic_MultipleVehiclesButton_Click';\n        trackingObject.eventInfo.contentId = obj.attributes.label;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setPartnerData(trackingObject);\n        setLinkData(trackingObject, obj);\n\n        trackingObject.configuration = {};\n        trackingObject.configuration.vehicleList = getVehicleList();\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onMultipleVehiclesVideoPlayClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VideoPlayer_MultipleVehiclesVideoPlay_Click';\n        trackingObject.eventInfo.contentId =\n          obj.attributes.action + ' - ' + obj.attributes.label;\n        trackingObject.eventInfo.contentLabels = obj.attributes.action;\n        trackingObject.eventInfo.sectionName = obj.attributes.section;\n        setEnvironmentData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setVideoData(trackingObject, obj);\n        setLinkData(trackingObject, obj);\n\n        trackingObject.configuration = {};\n        trackingObject.configuration.vehicleList = getVehicleList();\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onPhonenumberClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_Phonenumber_Click';\n\n        setEnvironmentData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setPartnerData(trackingObject);\n        setPhoneData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      \/*\n       * Main listener\n       *\/\n\n      $dataLayer.on('data-layer-event-fired', function (e) {\n        var obj = dataLayer.event[dataLayer.event.length - 1];\n\n        if (!Bootstrapper) {\n          return;\n        }\n\n        switch (obj.eventInfo.eventAction) {\n          case 'VWBasic_Error_Pageload':\n            onErrorPageLoad(obj);\n            break;\n\n          case 'VWBasic_Button_Click':\n            onButtonClick(obj);\n            break;\n\n          case 'VWBasic_Download_Click':\n            onDownloadClick(obj);\n            break;\n\n          case 'VWBasic_Vehicle_Load':\n            onVehicleLoad(obj);\n            break;\n\n          case 'VWBasic_VehicleAccordionOpen_Click':\n          case 'VWBasic_VehicleAccordionClose_Click':\n            onVehicleAccordionClick(obj);\n            break;\n\n          case 'VWBasic_VehicleButton_Click':\n            onVehicleButtonClick(obj);\n            break;\n\n          case 'VWBasic_VehicleAnchor_Click':\n            onVehicleAnchorClick(obj);\n            break;\n\n          case 'VWBasic_VehicleDownload_Click':\n            onVehicleDownloadClick(obj);\n            break;\n\n          case 'VWBasic_ContentSection_EnterViewport':\n            onContentSectionEnterViewport(obj);\n            break;\n\n          case 'VWBasic_VehicleSocialShare_Click':\n            onVehicleSocialShareClick(obj);\n            break;\n\n          case 'VWBasic_VehicleErrorMessage_Load':\n            onVehicleErrorMessageLoad(obj);\n            break;\n\n          case 'VideoPlayer_VehicleVideoPlay_Click':\n            onVehicleVideoPlayClick(obj);\n            break;\n\n          case 'VWBasic_MultipleVehicles_Pageload':\n            onMultipleVehiclesPageload(obj);\n            break;\n\n          case 'VWBasic_MultipleVehiclesAnchor_Click':\n            onMultipleVehiclesAnchorClick(obj);\n            break;\n\n          case 'VWBasic_MultipleVehiclesButton_Click':\n            onMultipleVehiclesButtonClick(obj);\n            break;\n\n          case 'VideoPlayer_MultipleVehiclesVideoPlay_Click':\n            onMultipleVehiclesVideoPlayClick(obj);\n            break;\n\n          case 'VWBasic_Phonenumber_Click':\n            onPhonenumberClick(obj);\n            break;\n\n          default:\n        }\n      });\n    });\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25787],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19639,"type":"CustomHtml","name":"d48038b84286519e60c77e5a1a7c405c","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\n    (function(jQuery) {\n        jQuery(document).ready( function() {\n\nwindow.VwTagConsole('%cLive > SD OSB EVENTS > 2019\/05\/07', 'color:white;background-color:green');\n\n            var $dataLayer = jQuery('#vw-data-layer');\n            var addedStep2Listener = false;\n            var addedStep3Listener = false;\n            var addedStep6Listener = false;\n            var addedMutationListener = false;\n\n            var onBasicPhoneBtnClick = function (event) {\n\n                var dataEventInfo = {\n                    eventName   : 'VWBasic_Phonenumber_Click',\n                    eventAction : 'VWBasic_Phonenumber_Click',\n                    pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                    pageName    : 'Service Booking',\n                    contentID   : 'Service Booking'\n                };\n\n                var dataAttributes = {\n                    pageName    : '\/owners\/service-booking',\n                    step        : 2,\n                    searchTerm  : event.data.searchTerm,\n                    phoneNumber : event.target.href,\n                    retailer    : event.data.retailer\n                };\n\n                vwUk.Instances.dataLayerController.fireEvent('c800-01', dataEventInfo, {}, dataAttributes);\n\n            };\n\n            var addPhoneButtonListeners = function (obj) {\n\n                var retailers = jQuery('.osb-retailer-page .osb-retailer-details__form-container');\n\n                for (var i = 0; i < retailers.length; i++) {\n                    var retailer = retailers[i];\n                    var title = jQuery('.osb-retailer-details__content-title--retailer-name', retailer)[0];\n                    jQuery('a[href^=\"tel\"]', retailer).on('click', { searchTerm: obj.attributes.searchTerm, retailer: title.innerText }, onBasicPhoneBtnClick);\n                }\n\n                obj.eventInfo.eventName = 'VWBasic_FindDealerSearch_Click';\n                obj.eventInfo.eventAction = 'VWBasic_FindDealerSearch_Click';\n\n                vwUk.Instances.dataLayerController.fireEvent('c800-01', obj.eventInfo, {}, obj.attributes);\n\n            };\n\n            var addAccordionButtonListeners = function (obj) {\n\n                var accordions = jQuery('.osb-services-page .disclaimer-accordion__heading');\n                var onAccordionBtnClick = function (event) {\n\n                    var isOpen = event.currentTarget.className.indexOf('disclaimer-accordion__heading--show') > -1;\n                    var dataEventInfo = {\n                        eventName   : isOpen ? 'VWBasic_AccordionOpen_Click' : 'VWBasic_AccordionClose_Click',\n                        eventAction : isOpen ? 'VWBasic_AccordionOpen_Click' : 'VWBasic_AccordionClose_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'Service Booking',\n                        contentID   : 'Service Booking',\n                        type        : isOpen ? 'expanded' : 'closed'\n                    };\n\n                    var dataAttributes = {\n                        pageName    : '\/owners\/service-booking',\n                        step        : 3,\n                        isOpen      : isOpen,\n                        label       : event.data.label\n                    };\n\n                    vwUk.Instances.dataLayerController.fireEvent('c800-01', dataEventInfo, {}, dataAttributes);\n\n                };\n\n                for (var i = 0; i < accordions.length; i++) {\n                    var header = accordions[i];\n                    console.log(i, 'header', header);\n                    jQuery(header).on('click', { label: header.innerText }, onAccordionBtnClick);\n                }\n\n            };\n\n            var addSBAccordionButtonListeners = function (obj) {\n\n                var accordions = jQuery('.osb-review-page .expandable-container__collapse-button');\n                var onSBAccordionBtnClick = function (event) {\n\n                    var isOpen = !event.currentTarget.parentElement.attributes.collapsed;\n                    var dataEventInfo = {\n                        eventName   : isOpen ? 'VWBasic_ServiceBookingAccordionOpen_Click' : 'VWBasic_ServiceBookingAccordionClose_Click',\n                        eventAction : isOpen ? 'VWBasic_ServiceBookingAccordionOpen_Click' : 'VWBasic_ServiceBookingAccordionClose_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'Service Booking',\n                        contentID   : 'Service Booking',\n                        type        : isOpen ? 'expanded' : 'closed'\n                    };\n\n                    var dataAttributes = {\n                        pageName    : '\/owners\/service-booking',\n                        step        : 6,\n                        isOpen      : isOpen,\n                        label       : event.currentTarget.innerText\n                    };\n\n                    vwUk.Instances.dataLayerController.fireEvent('c800-01', dataEventInfo, {}, dataAttributes);\n\n                };\n\n                for (var i = 0; i < accordions.length; i++) {\n                    var header = accordions[i];\n                    console.log(i, 'header', header);\n                    jQuery(header).on('click', { label: header.innerText }, onSBAccordionBtnClick);\n                }\n\n                \/\/ telephone number btn\n                var telBtn = jQuery('.osb-review-page .osb-retailer-details__section-content .osb-retailer-details__content-title a');\n                telBtn.on('click', function(event) {\n                    var dataEventInfo = {\n                        eventName   : 'VWBasic_ServiceBookingPhonenumber_Click',\n                        eventAction : 'VWBasic_ServiceBookingPhonenumber_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'Service Booking',\n                        contentID   : 'Service Booking'\n                    };\n\n                    var dataAttributes = {\n                        pageName    : '\/owners\/service-booking',\n                        step        : 6,\n                        phoneNumber : event.currentTarget.href,\n                        retailer    : jQuery('.osb-review-page .osb-retailer-details__content-title--retailer-name')[0].innerText\n                    };\n\n                    vwUk.Instances.dataLayerController.fireEvent('c800-01', dataEventInfo, {}, dataAttributes);\n\n                });\n\n            };\n\n            var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;\n            var unavailableIsVisible = false;\n            var unavailableServiceOverlay = document.querySelector('unavailable-service-overlay'); \/\/ Too early to define here, so redefined in listener\n\n            var observer = new MutationObserver(function(mutations) {\n              mutations.forEach(function(mutation) {\n                if (mutation.type == \"attributes\") {\n                    var tab = jQuery(\".osb-progress-bar__tab--current\");\n                    var lookForStep = parseInt(jQuery(\".osb-progress-bar__tab-icon--incoming\", tab).text(), 10);\n                    var stepNumber = lookForStep ? lookForStep : 0;\n\n                    if (jQuery('unavailable-service-overlay[overlay-visible]').length == 1) {\n                        if (!unavailableIsVisible) {\n\n                            setTimeout(function() {\n\n                                var title = jQuery('.unavailable-services-overlay__retailer').text().replace(\/[\\r\\n]\/g, '').replace(\/\\s+\/g, ' ');\n                                var message = jQuery('.unavailable-services-overlay__message').text();\n                                var telBtn = jQuery('.unavailable-services-overlay__telephone a');\n                                console.log('push unavailable. telBtn:', telBtn, title, message);\n                                telBtn.on('click', { searchTerm: '', retailer: 'errorLayer_' + title }, onBasicPhoneBtnClick);\n\n                                var dataEventInfo = {\n                                    eventName   : 'VWBasic_ErrorLayer_Load',\n                                    eventAction : 'VWBasic_ErrorLayer_Load',\n                                    pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                                    pageName    : 'Service Booking',\n                                    contentID   : 'Service Booking'\n                                };\n\n                                var dataAttributes = {\n                                    pageName    : '\/owners\/service-booking',\n                                    step        : stepNumber,\n                                    retailer    : title,\n                                    message     : message\n                                };\n\n                                vwUk.Instances.dataLayerController.fireEvent('c800-01', dataEventInfo, {}, dataAttributes);\n\n                            }, 200);\n\n                        }\n                        unavailableIsVisible = true;\n\n                    } else {\n                        unavailableIsVisible = false;\n                        var dataEventInfo = {\n                            eventName   : 'VWBasic_ErrorLayerClose_Click',\n                            eventAction : 'VWBasic_ErrorLayerClose_Click',\n                            pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                            pageName    : 'Service Booking',\n                            contentID   : 'Service Booking'\n                        };\n\n                        var dataAttributes = {\n                            pageName    : '\/owners\/service-booking',\n                            step        : stepNumber\n                        };\n\n                        vwUk.Instances.dataLayerController.fireEvent('c800-01', dataEventInfo, {}, dataAttributes);\n\n                    }\n                }\n              });\n            });\n\n            var step3Interval;\n            var checkIfStep3IsLoaded = function(obj) {\n                if (jQuery('#servicesProgressBar')[0].style.display === 'none') {\n                    clearInterval(step3Interval);\n                    setTimeout(function() {\n                        addAccordionButtonListeners(obj);\n                        addedStep3Listener = true;\n                    }, 800);\n                }\n            };\n\n            var step6Interval;\n            var checkIfStep6IsLoaded = function(obj) {\n                if (jQuery('#confirmationProgressBar')[0].style.display === 'none') {\n                    clearInterval(step6Interval);\n                    setTimeout(function() {\n                        addSBAccordionButtonListeners(obj);\n                        addedStep6Listener = true;\n                    }, 800);\n                }\n            };\n\n            $dataLayer.on('data-layer-event-fired', function(e) {\n\n                var obj = dataLayer.event[dataLayer.event.length - 1];\n\n                switch (obj.eventInfo.eventAction) {\n\n                    case 'retailerSearch':\n\n                        if (obj.attributes.success === 1) {\n                            if (!addedStep2Listener) {\n                                setTimeout(function() {\n                                    addPhoneButtonListeners(obj);\n                                    addedStep2Listener = true;\n                                }, 500);\n                            }\n                        }\n\n                        break;\n\n                    case 'SPAnavigationLoad':\n\n                        if (obj.attributes.step === 3) {\n                            if (!addedStep3Listener) {\n                                step3Interval = setInterval(checkIfStep3IsLoaded, 100, obj);\n                            }\n                        }\n\n                        \/\/ start listening to attribute changes\n                        if (!addedMutationListener) {\n                            addedMutationListener = true;\n                            unavailableServiceOverlay = document.querySelector('unavailable-service-overlay');\n                            observer.observe(unavailableServiceOverlay, {\n                              attributes: true \n                            });\n                            \n                            \/\/document.querySelector('unavailable-service-overlay').setAttribute('overlay-visible', 'true');\n                        }\n\n                        break;\n\n                    case 'SPA page load':\n\n                        if (obj.attributes.step === 6) {\n                            if (!addedStep6Listener) {\n                                step6Interval = setInterval(checkIfStep6IsLoaded, 100, obj);\n                            }\n\n                        }\n\n                        break;\n\n                    default:\n\n                }\n\n            });\n\n            setTimeout(function() {\n\n                var dataEventInfo = {\n                    eventName   : 'VWBasic_Step_Pageload',\n                    eventAction : 'VWBasic_Step_Pageload',\n                    pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                    pageName    : 'Service Booking',\n                    contentID   : 'Service Booking'\n                };\n\n                var dataAttributes = {\n                    pageName   : '\/owners\/service-booking',\n                    step       : 0\n                };\n\n                vwUk.Instances.dataLayerController.fireEvent('c900-01', dataEventInfo, {}, dataAttributes);\n\n            }, 100);\n\n        });\n    })(jQuery);\n\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25791,25785],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19640,"type":"CustomHtml","name":"43d7156774366dddb10bea3dda5c4ae2","parameters":{"customHtml":"<script>\n    (function(jQuery) {\n\nwindow.VwTagConsole('%cLive > SD OSB ACTIONS > 2019\/05\/07', 'color:white;background-color:green');\n\n        jQuery(document).ready(function () {\n\n            var $dataLayer = jQuery('#vw-data-layer');\n            var vwdata = window.vwdata = window.vwdata || [];\n\n            \/\/ Common code\n\n            var currentStep = 0,\n                errorMessage = '',\n                appointmentDate = undefined,\n                formHasStarted = false,\n                retailerInterval,\n                userCurrentLocation = {\n                    latitude: undefined,\n                    longitude: undefined\n                },\n                triggerEvent = function (trackingObject, event) {\n\n                    vwdata.push(trackingObject);\n                    console.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n                },\n\n                checkIfRetailerResultsAreReady = function(obj) {\n\n                    var resultsTitle = jQuery('.osb-retailer-page__results-title > span');\n\n                    if (resultsTitle.length > 0) {\n                        clearInterval(retailerInterval);\n                        findDealerSearchClick(obj, resultsTitle.text());\n                    }\n\n                }\n\n                setEventInfo = function (trackingObject, eventAction) {\n\n                    trackingObject.eventInfo = {};\n                    trackingObject.eventInfo.eventAction = eventAction;\n                    trackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '').split('?')[0].split('#')[0];\n                    trackingObject.eventInfo.pageName = 'owners : online booking service';\n                    trackingObject.eventInfo.pageCategory = 'owners';\n\n                },\n\n                setFormData = function (trackingObject, step = null, eventName = undefined) {\n\n                    var event = trackingObject.eventInfo.eventAction;\n\n                    trackingObject.form = {};\n\n                    if (eventName) {\n                        return\n                    } else {\n\n                        trackingObject.form.FormType = 'servicerequest';\n                        trackingObject.form.FormName = parseInt(step) > 5 ? 'Review Form' : 'Your Volkswagen Form';\n                        trackingObject.form.FormVersion = '1';\n                    }\n\n                },\n\n                setFormAppointments = function (trackingObject) {\n\n                   \/*\n                   if (appointmentDate === undefined) {\n\n                       trackingObject.form.Appointments = appointmentDate;\n\n                   } else {\n\n                       var timeISO = appointmentDate.toISOString()\n                       trackingObject.form.Appointments = [timeISO && timeISO.slice(0, -5) + '+01:00'];\n\n                   }\n                   *\/\n                   \n                   trackingObject.form.Appointments = undefined;\n\n                },\n\n                setEnvironmentData = function (trackingObject, obj) {\n\n                    trackingObject.environment = {};\n                    trackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalOnlineServiceBookingD6' : 'VWOnlineServiceBookingD6';\n                    trackingObject.environment.language = 'en';\n                    trackingObject.environment.country = 'GB';\n                },\n\n                setUserBrowserData = function (trackingObject) {\n\n                    trackingObject.user = trackingObject.user || {};\n                    trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n                    trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n                    trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n                    trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n                },\n\n                saveUserLocation = function () {\n                    var map = jQuery('.find-retailer-map-container google-maps')[0];\n                    userCurrentLocation = {\n                        latitude: map && map.attributes ? map.attributes.latitude.nodeValue : undefined,\n                        longitude: map && map.attributes ? map.attributes.longitude.nodeValue : undefined\n                    }\n                }\n\n                setUserLocationData = function (trackingObject) {\n\n                    trackingObject.user = trackingObject.user || {};\n                    trackingObject.user.locationLatitude = userCurrentLocation.latitude;\n                    trackingObject.user.locationLongitude = userCurrentLocation.longitude;\n                    trackingObject.user.locationZIP = undefined;\n\n                },\n\n                setPersonalizationData = function (trackingObject, obj) {\n\n                    trackingObject.personalization = {};\n                    trackingObject.personalization.status = false;\n                    trackingObject.personalization.placeholderId = undefined;\n                    trackingObject.personalization.contentId = undefined;\n                },\n\n                getCurrentStep = function () {\n                    var tab = jQuery(\".osb-progress-bar__tab--current\");\n\n                    return {\n                        number: parseInt(jQuery(\".osb-progress-bar__tab-icon--incoming\", tab).text(), 10),\n                        name: jQuery(\".osb-progress-bar__tab-text--long\", tab).text()\n                    }\n                },\n\n                setProcessDataFromCurrentStep = function (trackingObject) {\n\n                    trackingObject.process = {};\n                    trackingObject.process.StepName = currentStep.name;\n                    trackingObject.process.StepNumber = currentStep.number.toString();\n\n                },\n\n                setProcessDataAndStep = function (trackingObject, step) {\n\n                    if (step === 0) {\n\n                        currentStep = {\n                            number: 0,\n                            name: 'Book a service'\n                        };\n\n                    } else if (step === 6) {\n\n                        currentStep = {\n                            number: 6,\n                            name: 'Review and confirm your booking'\n                        };\n\n                    } else if (step === 7) {\n\n                        currentStep = {\n                            number: 7,\n                            name: 'Your booking has been requested'\n                        };\n\n                    } else {\n\n                        currentStep = getCurrentStep();\n\n                    }\n\n                    setProcessDataFromCurrentStep(trackingObject);\n\n                },\n\n                setLinkData = function (trackingObject, obj) {\n\n                    trackingObject.link = {};\n                    trackingObject.link.url = obj.attributes.url;\n                    trackingObject.link.name = obj.attributes.label;\n\n                },\n\n                setPartnerData = function (trackingObject, obj) {\n                    var retailerSummary = jQuery('.expandable-container--osb-summary.osb-services-page')[1],\n                        retailer = jQuery('.form-container__description', retailerSummary),\n                        description,\n                        retailerName,\n                        retailerPostcode;\n\n                    trackingObject.partner = {\n                        'informationName': undefined,\n                        'informationDepartment': undefined,\n                        'informationZIP': undefined,\n                        'informationBnr': undefined\n                    };\n\n                    if (retailer.length > 0) {\n                        description = jQuery('.form-container__description', retailerSummary);\n                        if (description.length > 0) {\n                            retailerName = description[0].innerText.trim();\n                            retailerPostcode = jQuery('.data-list__list-description', retailerSummary)[0].innerHTML.split('<br class=\"style-scope osb-services-page\">');\n                            trackingObject.partner.informationName = retailerName;\n                            trackingObject.partner.informationZIP = retailerPostcode[2];\n                        }\n                    }\n\n                },\n\n                setErrorData = function (trackingObject, obj) {\n\n                    trackingObject.error = {};\n                    trackingObject.error.code = currentStep.number.toString();\n                    trackingObject.error.message = errorMessage;\n                    trackingObject.error.referringUrl = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n\n                },\n\n                setPhoneData = function (trackingObject, obj) {\n\n                    trackingObject.phone = {};\n                    trackingObject.phone.Name = obj.attributes.retailer;\n                    trackingObject.phone.Number = parseInt(obj.attributes.phoneNumber.replace('tel:', ''), 10);\n\n                },\n\n                getCamelCase = function (str) {\n                    return str.replace(\/(?:^\\w|[A-Z]|\\b\\w)\/g, function (word, index) {\n                        return index == 0 ? word.toLowerCase() : word.toUpperCase();\n                    }).replace(\/\\s+\/g, '');\n                },\n\n                lowerFirstLetter = function (str) {\n                    return str.charAt(0).toLowerCase() + str.slice(1);\n                },\n\n                setProductData = function (trackingObject, obj) {\n\n                    var productList = [],\n                        containers = jQuery('.osb-services-page .expandable-container__container'),\n                        container,\n                        checkboxContainers,\n                        label,\n                        productExists = false,\n                        defaultProduct = {\n                            'Name': undefined,\n                            'ID': undefined,\n                            'Manufacturer': undefined,\n                            'StockLevel': undefined,\n                            'Category': undefined,\n                            'Price': {\n                                'currency': 'GBP',\n                                'value': undefined\n                            },\n                            'Quantity' : 1\n                        };\n\n                    for (var i = 0; i < containers.length; i++) {\n                        container = containers[i];\n                        label = jQuery('h3', container)[0].innerText;\n                        checkboxContainers = jQuery('.expandable-container__content .expandable-container__collapsable', container);\n\n                        for (var j = 0; j < checkboxContainers.length; j++) {\n                            var cbox = checkboxContainers[j];\n                            var isChecked = cbox.attributes.checked !== undefined;\n                            var selectorLabel = jQuery('.input-selector__label', cbox)\n                            var categoryLabel = selectorLabel.length > 0 ? selectorLabel[0].innerText : undefined;\n\n\n                            var categoryPrice = jQuery('.input-selector__right-column-main', cbox).text().replace('\u00a3', '');\n\n                            if (isChecked && categoryLabel.toLowerCase().indexOf('not required') < 0) {\n\n                                productExists = true;\n                                var options = jQuery('.input-selector__content', cbox);\n\n                                \/\/ does it have mutiple options, then pick the checked one\n                                if (options.length > 0) {\n                                    categoryLabel = jQuery('.input-selector[checked] .input-selector__label', options).text();\n                                }\n\n                                try {\n                                    label = label.trim();\n                                } catch (e) {\n                                    \/\/ cant trim off the whitespace\n                                }\n\n                                productList.push(\n                                    {\n                                        Name: categoryLabel,\n                                        ID: categoryLabel,\n                                        Manufacturer: 'Volkswagen',\n                                        Category: [\n                                            'services', lowerFirstLetter(getCamelCase(label))\n                                        ],\n                                        StockLevel: undefined,\n                                        Price: {\n                                            Currency: 'GBP',\n                                            value: categoryPrice ? parseInt(categoryPrice, 10) : undefined\n                                        },\n                                        Quantity : 1\n                                    }\n                                )\n                            }\n\n                        }\n                    }\n\n                    if (!productExists) {\n                        productList.push(defaultProduct)\n                    }\n\n                    trackingObject.product = {};\n                    trackingObject.product.List = productList;\n\n                },\n\n                getBlankOwnershipVehicle = function () {\n                    return {\n                        'manufacturer': undefined,\n                        'carlineName': undefined,\n                        'model': undefined,\n                        'derivative': undefined,\n                        'registrationDate': undefined,\n                        'bodyType': undefined,\n                        'fuelType': undefined,\n                        'transmission': undefined,\n                        'engineSize': undefined,\n                        'engineSizeUnit': undefined,\n                        'mileage': undefined,\n                        'mileageUnit': undefined,\n                        'currency': 'GBP',\n                        'estimatedValueExcellent': undefined,\n                        'estimatedValueGood': undefined,\n                        'estimatedValueAverage': undefined,\n\n                    };\n                },\n\n                setOwnershipData = function (trackingObject) {\n\n                    var items = jQuery('.osb-retailer-page .data-list__list .data-list__list-item');\n                    var carTextExists = jQuery('.osb-retailer-page .form-container__description').text().replace(\/\\s\/g, '') !== '';\n                    var car = jQuery('.osb-retailer-page .form-container__description').text();\n                    \/\/ First word, title case\n                    var carlineName = car.split(' ')[0].replace(\/\\w\\S*\/g, function (txt) {\n                        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n                    })\n                    \/\/ Check if the form has been loaded for the first time or in other words, its not filled out\n                    var initialFormLoadingStep = currentStep.number.toString() === '1';\n\n                    \/\/ Additionally check the previous step 0 was NOT a success == 1\n                    \/\/ as success = 1  need to be treated as non initialFormLoadingStep\n                    if (initialFormLoadingStep) {\n                        var previousEventInfo = dataLayer.event[1]\n\n                        if (previousEventInfo.attributes.success === 1 && previousEventInfo.eventInfo.eventAction === 'registrationSearch')\n                            initialFormLoadingStep = false;\n                    }\n\n                    var servicePlan = {\n                        'name': 'servicePlan',\n                        'value': false,\n                    };\n                    var extendedWarranty = {\n                        'name': 'extendedWarranty',\n                        'value': false,\n                    };\n                    var leasedVolkswagen = {\n                        'name': 'leasedVolkswagen',\n                        'value': false,\n                    };\n                    var match1 = car.match(\/^[^\\d]+(?=\\s)\/g);\n                    var match2 = [car.split(' ')[car.split(' ').length -1]];\n                    var autoCarName = jQuery('.data-list__title');\n\n                    \/\/ Get the empty vehicle object with all properties set to undefined except 'currency', which is equal to 'GBP\n                    var vehicle = getBlankOwnershipVehicle();\n\n                    vehicle.manufacturer = initialFormLoadingStep ? undefined : 'Volkswagen';\n                    vehicle.carlineName = carTextExists ? carlineName : undefined;\n                    vehicle.model = carTextExists ? (match1 ? match1.join() : autoCarName.text()) : undefined;\n                    vehicle.engineSize = carTextExists ? (parseFloat(match2.join() || parseFloat(autoCarName.text())) || undefined) : undefined;\n                    vehicle.engineSizeUnit = vehicle.engineSize === undefined ? undefined : 'Liter';\n                    vehicle.mileageUnit = initialFormLoadingStep ? undefined : 'miles';\n\n                    for (var i = 0; i < items.length; i++) {\n                        var item = items[i];\n                        var title = jQuery('.data-list__list-title', item).text().toLowerCase();\n                        var description = jQuery('.data-list__list-description', item).text();\n                        var descriptionLowercase = description.toLowerCase();\n\n                        if (descriptionLowercase.indexOf('no') !== 0 && descriptionLowercase.indexOf('service') > -1) {\n                            servicePlan.value = true;\n                        } else if (descriptionLowercase.indexOf('no') !== 0 && descriptionLowercase.indexOf('warranty') > -1) {\n                            extendedWarranty.value = true;\n                        } else if (descriptionLowercase.indexOf('no') !== 0 && descriptionLowercase.indexOf('lease') > -1) {\n                            vehicle.leaseCompany = description;\n                            leasedVolkswagen.value = true;\n                        }\n\n                        if (title.indexOf('registration') > -1) {\n                            vehicle.registrationDate = description;\n                        } else if (title.indexOf('transmission') > -1) {\n                            vehicle.transmission = initialFormLoadingStep ? undefined : description;\n                        } else if (title.indexOf('mileage') > -1) {\n                            vehicle.mileage = initialFormLoadingStep ? undefined : description;\n                        } else if (title.indexOf('fuel') > -1) {\n                            vehicle.fuelType = initialFormLoadingStep ? undefined : description;\n                        }\n                    }\n\n                    trackingObject.ownership = {};\n                    trackingObject.ownership.vehicle = [vehicle];\n                    trackingObject.ownership.vehicle[0].additionalAttributes = [servicePlan, extendedWarranty, leasedVolkswagen];\n\n                },\n\n                setCommerceData = function (trackingObject) {\n\n                    var appointments = jQuery(\".generic-summary\");\n                    var deliveryMethod = jQuery(\".generic-summary__description\", appointments)[2].innerText;\n\n                    trackingObject.commerce = {};\n                    trackingObject.commerce.DeliveryMethod = deliveryMethod ? deliveryMethod : undefined;\n\n                };\n\n            \/\/ Handlers\n\n            var errorLayerLoad = function (obj) {\n\n                var trackingObject = {};\n                var test = obj.attributes.message;\n\n                try {\n                    test = test.trim();\n                } catch (e) {\n                    \/\/ cant trim off the whitespace\n                }\n\n                setEventInfo(trackingObject, 'VWBasic_ErrorLayer_Load');\n                trackingObject.eventInfo.sectionName = undefined;\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject, obj);\n                errorMessage = 'Step ' + obj.attributes.step + ': ' + obj.attributes.retailer + ' : ' + test;\n                setErrorData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_ErrorLayer_Load');\n\n            },\n\n                phonenumberClick = function (obj) {\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_Phonenumber_Click');\n                    setEnvironmentData(trackingObject, obj);\n                    setPersonalizationData(trackingObject, obj);\n                    setPhoneData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_Phonenumber_Click');\n\n                },\n\n                errorLayerCloseClick = function (obj) {\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ErrorLayerClose_Click');\n                    trackingObject.eventInfo.sectionName = undefined;\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setErrorData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_ErrorLayerClose_Click');\n\n                },\n\n                accordionHeaderClick = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, obj.eventInfo.eventName);\n                    trackingObject.eventInfo.contentId = obj.attributes.label;\n                    trackingObject.eventInfo.sectionName = obj.attributes.label;\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, obj.eventInfo.eventName);\n\n                },\n\n                errorMessageLoad = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ErrorMessage_Load');\n                    trackingObject.eventInfo.sectionName = undefined;\n\n                    var url = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n\n                    var errorCode, errorMessage\n\n                    if (url.slice(-1) === '0') {\n                        errorCode = '1';\n                        errorMessage = 'Sorry, we couldnt find that registration'\n                    } else if (url.slice(-1) === '2') {\n                        errorCode = '2';\n                        errorMessage = 'unable to find a retailer'\n                    }\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    trackingObject.error = {};\n                    trackingObject.error.code = errorCode;\n                    trackingObject.error.message = errorMessage;\n\n                    trackingObject.error.referringUrl = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n\n                    triggerEvent(trackingObject, 'VWBasic_ErrorMessage_Load');\n\n                },\n\n                findDealerSearchClick = function (obj, resultsTitle) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_FindDealerSearch_Click');\n                    trackingObject.eventInfo.contentId = \"Find dealer search\";\n\n                    setEnvironmentData(trackingObject, obj);\n\n                    \/\/ store the current location\n                    if (obj.attributes.searchTerm === \"Current location\") {\n                        saveUserLocation();\n                    }\n\n                    setUserLocationData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n\n                    trackingObject.filter = {};\n                    trackingObject.filter.type = 'single_value';\n                    trackingObject.filter.name = 'Retailer Search';\n                    trackingObject.filter.values = resultsTitle ? [resultsTitle] : undefined;\n                    obj.attributes.label = \"Find dealer search\";\n                    obj.attributes.url = window.location.href;\n                    setLinkData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_FindDealerSearch_Click');\n\n                },\n\n                stepPageload = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_Step_Pageload');\n                    trackingObject.eventInfo.contentLabels = undefined;\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n                    setProcessDataAndStep(trackingObject, obj.attributes.step);\n\n                    triggerEvent(trackingObject, 'VWBasic_Step_Pageload');\n\n                },\n\n                step0ButtonClick = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_StepButton_Click');\n                    trackingObject.eventInfo.contentId = 'Enter vehicle details';\n                    obj.attributes.url = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n                    obj.attributes.label = 'Enter vehicle details';\n\n                    setLinkData(trackingObject, obj);\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n                    setProcessDataAndStep(trackingObject, obj.attributes.step);\n\n                    triggerEvent(trackingObject, 'VWBasic_StepButton_Click');\n\n                },\n\n                sbStepLoad = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ServiceBookingStep_Load');\n                    trackingObject.eventInfo.contentLabels = undefined;\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n\n                    setFormData(trackingObject);\n                    setFormAppointments(trackingObject);\n                    delete trackingObject.form.FormName;\n                    delete trackingObject.form.FormType;\n                    delete trackingObject.form.FormVersion;\n\n                    setProcessDataAndStep(trackingObject, -1);\n                    setOwnershipData(trackingObject);\n                    setCommerceData(trackingObject);\n                    setProductData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_ServiceBookingStep_Load');\n\n                },\n\n                sbStepButtonClick = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ServiceBookingStepButton_Click');\n                    trackingObject.eventInfo.contentId = (obj.attributes.step !== 1) ? obj.attributes.pageName.replace('\/', '').replace(\/-\/g, ' ') : 'Enter vehicle details';\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n                    setProcessDataFromCurrentStep(trackingObject);\n\n                    setFormData(trackingObject, trackingObject.process.StepNumber, trackingObject.eventInfo.eventAction);\n                    setFormAppointments(trackingObject);\n\n                    setOwnershipData(trackingObject);\n\n                    var step = parseInt(trackingObject.process.StepNumber);\n\n                    setCommerceData(trackingObject);\n\n                    obj.attributes.url = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n                    obj.attributes.label = 'Enter vehicle details';\n\n                    if (step === 2) {\n                        obj.attributes.label = 'Select services';\n                    } else if (step === 3) {\n                        obj.attributes.label = 'Select appointment';\n                    } else if (step === 4) {\n                        obj.attributes.label = 'personal details';\n                    }\n\n                    setLinkData(trackingObject, obj);\n                    setProductData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_ServiceBookingStepButton_Click');\n\n                },\n\n                sbFormStepLoad = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ServiceBookingFormStep_Load');\n                    trackingObject.eventInfo.contentLabels = undefined;\n\n                    setEnvironmentData(trackingObject, obj);\n                    setProcessDataAndStep(trackingObject, obj.attributes.step);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n                    setOwnershipData(trackingObject)\n\n                    if (trackingObject.process.StepNumber === '0') {\n                        trackingObject.eventInfo.contentId = 'Enter vehicle details';\n                    }\n\n                    setFormData(trackingObject, trackingObject.process.StepNumber);\n                    if (trackingObject.process.StepNumber == 5) {\n                        trackingObject.form.FormName = 'Personal details'\n                    }\n\n                    \/\/ Calling setFormAppointments here as its required on on every step\n                    setFormAppointments(trackingObject);\n\n                    if (obj.attributes.step === 1) {\n\n                        \/\/ your volkswagen form step 1\n                        trackingObject.form.FormStart = formHasStarted ? false : true;\n                        formHasStarted = true;\n                        trackingObject.ownership = {};\n                        setOwnershipData(trackingObject);\n                        \/\/ trackingObject.ownership.vehicle = [getBlankOwnershipVehicle()];\n                    } else {\n\n                        \/\/ your personal details form step 5\n                        trackingObject.form.FormStart = formHasStarted ? false : true;\n                        formHasStarted = true;\n                        setOwnershipData(trackingObject);\n                    }\n\n                    setProcessDataAndStep(trackingObject, -1);\n                    setCommerceData(trackingObject);\n                    setProductData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_ServiceBookingFormStep_Load');\n\n                },\n\n                sbFormStepButtonClick = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ServiceBookingFormStepButton_Click');\n                    trackingObject.eventInfo.contentId = currentStep.number === 1 ? 'Select retailer' : 'Review and book';\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n\n                    setProcessDataFromCurrentStep(trackingObject);\n\n                    setFormData(trackingObject);\n                    if (trackingObject.process.StepNumber == '5') {\n                        trackingObject.form.FormName = 'Personal details';\n                    }\n\n                    setFormAppointments(trackingObject);\n\n                    setOwnershipData(trackingObject);\n                    trackingObject.ownership.vehicle[0].manufacturer = 'Volkswagen';\n                    trackingObject.ownership.vehicle[0].transmission = jQuery('.osb-vehicle-details-page .styled-radio-button__input:checked')[0].value || undefined;\n                    trackingObject.ownership.vehicle[0].fuelType = jQuery('.osb-vehicle-details-page .styled-radio-button__input:checked')[1].value || undefined;\n\n                    setCommerceData(trackingObject);\n                    setProductData(trackingObject, obj);\n\n                    obj.attributes.url = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n                    obj.attributes.label = trackingObject.eventInfo.contentId;\n                    setLinkData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_ServiceBookingFormStepButton_Click')\n\n                },\n\n                sbStepCTAClick = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ServiceBookingFormStepCTA_Click');\n                    trackingObject.eventInfo.contentId = 'Request now'\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n                    setProcessDataAndStep(trackingObject, 6);\n                    setFormData(trackingObject, trackingObject.process.StepNumber);\n                    setFormAppointments(trackingObject);\n                    setProcessDataFromCurrentStep(trackingObject);\n                    setOwnershipData(trackingObject);\n\n                    setCommerceData(trackingObject);\n                    setProductData(trackingObject, obj);\n\n                    obj.attributes.label = \"Request now\";\n                    obj.attributes.url = window.location.href;\n                    setLinkData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_ServiceBookingFormStepCTA_Click');\n\n                },\n\n                sbSubmissionSuccessPageload = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ServiceBookingFormStepSubmissionSuccessMessage_Load');\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n                    setProcessDataAndStep(trackingObject, 7);\n\n                    setUserLocationData(trackingObject);\n                    setFormData(trackingObject, trackingObject.process.StepNumber);\n                    trackingObject.form.leadID = undefined;\n                    trackingObject.form.NewsletterType = undefined;\n                    setFormAppointments(trackingObject);\n\n                    setOwnershipData(trackingObject);\n                    setCommerceData(trackingObject);\n                    setProductData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_ServiceBookingFormStepSubmissionSuccessMessage_Load');\n\n                },\n\n                sbPhonenumberClick = function (obj) {\n\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, 'VWBasic_ServiceBookingPhonenumber_Click');\n                    setEnvironmentData(trackingObject, obj);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n\n                    setFormData(trackingObject, currentStep.number, trackingObject.eventInfo.eventAction);\n                    setFormAppointments(trackingObject);\n\n                    setPhoneData(trackingObject, obj);\n                    setOwnershipData(trackingObject);\n\n                    setCommerceData(trackingObject);\n                    setProductData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, 'VWBasic_ServiceBookingPhonenumber_Click');\n\n                },\n\n                sbAccordionOpenCloseClick = function (obj) {\n\n                    var eventType = obj.eventInfo.type === 'expanded' ? 'VWBasic_ServiceBookingAccordionOpen_Click' : 'VWBasic_ServiceBookingAccordionClose_Click';\n                    var trackingObject = {};\n\n                    setEventInfo(trackingObject, eventType);\n                    trackingObject.eventInfo.sectionName = obj.attributes.label;\n                    trackingObject.eventInfo.contentId = obj.attributes.label;\n\n                    setEnvironmentData(trackingObject, obj);\n                    setUserBrowserData(trackingObject);\n                    setPersonalizationData(trackingObject, obj);\n                    setPartnerData(trackingObject, obj);\n                    setFormData(trackingObject, currentStep.number, trackingObject.eventInfo.eventAction);\n                    setFormAppointments(trackingObject);\n                    setOwnershipData(trackingObject);\n                    setCommerceData(trackingObject);\n                    setProductData(trackingObject, obj);\n\n                    triggerEvent(trackingObject, eventType);\n\n                };\n\n            \/\/ Main listener\n\n            $dataLayer.on('data-layer-event-fired', function (e) {\n\n                var obj = dataLayer.event[dataLayer.event.length - 1];\n\n                if (!Bootstrapper) {\n                    return;\n                }\n\n                switch (obj.eventInfo.eventAction) {\n\n                    case 'VWBasic_Step_Pageload':\n                        stepPageload(obj);\n                        break;\n\n                    case 'SPAnavigationLoad':\n                        var step = obj.attributes.step ? parseInt(obj.attributes.step, 10) : 0;\n                        var stepObj = getCurrentStep();\n\n                        \/\/ save the appointment data()\n                        if (obj.attributes && obj.attributes.appointmentDate) {\n                            appointmentDate = obj.attributes.appointmentDate\n                        }\n\n                        \/\/ check if we need to addtionally trigger 'VWBasic_StepButton_Click'\n                        var prevObj = dataLayer.event[dataLayer.event.length - 2];\n\n                        if (prevObj.eventInfo.eventAction === 'registrationSearch') {\n                            \/\/ we came from step 0\n                            if (prevObj.attributes.success === 0) {\n                                \/\/ no reg number found on step 0 loads in a form\n                                prevObj.attributes.step = 0;\n                                step0ButtonClick(prevObj);\n                                sbFormStepLoad(obj);\n                            } else {\n                                \/\/ reg number found on step 0 auto loads in step 1 without a form\n                                prevObj.attributes.step = 0;\n                                sbStepLoad(obj);\n                            }\n\n                        } else {\n                            \/\/ Check we are going forwards\n                            if (step > 0 && stepObj.number > currentStep.number) {\n\n                                if (currentStep.number === 1 && jQuery('.osb-vehicle-details-page .iron-selected .expandable-container__edit').length < 1) {\n                                    sbFormStepButtonClick(obj);\n                                } else if (currentStep.number === 5) {\n                                    sbFormStepButtonClick(obj);\n                                } else {\n                                    sbStepButtonClick(obj);\n                                }\n                            }\n\n                            if (stepObj.number === 1 && currentStep.number === 1) {\n                                \/\/ auto loaded step 1 without a form can trigger an edit, which does load the form\n                                sbFormStepLoad(obj);\n                            } else if (currentStep.number === 4) {\n                                sbFormStepLoad(obj);\n                            } else {\n                                sbStepLoad(obj);\n                            }\n\n                        }\n\n                        break;\n\n                    case 'registrationSearch':\n                        if (obj.attributes.success === 0) {\n                            errorMessageLoad(obj);\n                        }\n                        break;\n\n                    case 'retailerSearch':\n                        retailerInterval = setInterval(checkIfRetailerResultsAreReady, 100, obj);\n\n                        if (obj.attributes.success !== 1) {\n                            errorMessageLoad(obj);\n                        }\n\n                        break;\n\n                    case 'VWBasic_Phonenumber_Click':\n                        phonenumberClick(obj);\n                        break;\n\n                    case 'VWBasic_AccordionOpen_Click':\n                    case 'VWBasic_AccordionClose_Click':\n                        accordionHeaderClick(obj);\n                        break;\n\n                    case 'SPA page load':\n                        if (obj.attributes.step === 7) {\n                            sbStepCTAClick(obj);\n                            sbSubmissionSuccessPageload(obj);\n                        } else {\n                            \/\/ step 6\n                            sbFormStepButtonClick(obj);\n                            sbFormStepLoad(obj);\n                        }\n                        break;\n\n                    case 'VWBasic_ServiceBookingAccordionClose_Click':\n                    case 'VWBasic_ServiceBookingAccordionOpen_Click':\n                        sbAccordionOpenCloseClick(obj);\n                        break;\n\n                    case 'VWBasic_ServiceBookingPhonenumber_Click':\n                        sbPhonenumberClick(obj);\n                        break;\n\n                    case 'VWBasic_ErrorLayer_Load':\n                        errorLayerLoad(obj);\n                        break;\n\n                    case 'VWBasic_ErrorLayerClose_Click':\n                        errorLayerCloseClick(obj);\n                        break;\n\n                    default:\n\n                }\n\n            });\n\n        });\n\n    })(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25791,25785],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19641,"type":"CustomHtml","name":"7ac5a76eec0421b3e48bfb2c143602b1","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\n\/\/ Page: \/\/owners-and-drivers\/my-car\/manuals\n\n(function(jQuery) {\n    jQuery(document).ready( function() {\n\nwindow.VwTagConsole('Live > SD Owners Manuals EVENTS > 2019\/07\/16');\n\n        var processBarInterval;\n        var addedResultBtnListener = false;\n        \n        var getUrl = function() {\n            return window.location.href.replace('http:\/\/', '').replace('https:\/\/', '').split('?')[0];\n        }\n\n        var hasBeenProcessed = function () {\n            if (jQuery('.owners-manual-form-container__progress-bar')[0].style.display === 'none') {\n\n                clearInterval(processBarInterval);\n\n                var resultText = jQuery('.owner-manual-search-result .owner-manual-search-result__model-text').text();\n                var errorText = jQuery('.owners-manual-form-container__error').text();\n\n                var searchTermSuggestion = errorText;\n                var validResult = errorText.length === 0;\n\n                if (validResult) {\n                    searchTermSuggestion = resultText.replace('Your car is ', '');\n\n                    if (!addedResultBtnListener) {\n                        addedResultBtnListener = true;\n\n                        jQuery('.button.owner-manual-search-result__link').on('click', function(){\n\n                            var dataEventInfo = {\n                                eventName: 'VWBasic_VehicleButton_Click',\n                                eventAction: 'VWBasic_VehicleButton_Click',\n                                pageId: getUrl(),\n                                pageName: 'OwnersManualPage',\n                                contentID: 'OwnersManualPage'\n                            };\n                            var dataAttributes = {\n                                url: this.href,\n                                name: this.innerText\n                            };\n                            vwUk.Instances.dataLayerController.fireEvent('c059', dataEventInfo, {}, dataAttributes);\n\n                        });\n                    }\n                }\n\n                var dataEventInfo = {\n                    eventName: validResult ? 'VWBasic_SearchResultlist_Load' : 'VWBasic_ErrorMessage_Load',\n                    eventAction: validResult ? 'VWBasic_SearchResultlist_Load' : 'VWBasic_ErrorMessage_Load',\n                    pageId: getUrl(),\n                    pageName: 'OwnersManualPage',\n                    contentID: 'OwnersManualPage'\n                };\n\n                var dataAttributes = {\n                    referringUrl: getUrl(),\n                    code: errorText.length === 0 ? '' : errorText.indexOf('VIN') > -1 ? '1' : '2',\n                    searchTerm: undefined,\n                    numberResults: validResult ? 1 : 0,\n                    searchTermSuggestion: searchTermSuggestion,\n                };\n\n                vwUk.Instances.dataLayerController.fireEvent('c056', dataEventInfo, {}, dataAttributes);\n            }\n        };\n\n        jQuery('.owners-manual-search-bar input').on('change', function(){\n            clearInterval(processBarInterval);\n            processBarInterval = setInterval(hasBeenProcessed.bind(this), 100);\n        });\n\n        jQuery('.owners-manual-search-bar .input-field__button').on('click', function(){\n            clearInterval(processBarInterval);\n            processBarInterval = setInterval(hasBeenProcessed.bind(this), 100);\n        });\n\n        setTimeout(function() {\n            vwUk.Instances.dataLayerController.fireEvent('c056',\n                {\n                    eventName   : 'Owners Manuals Page Load',\n                    eventAction : 'VWBasic_Pageload',\n                    pageId      : getUrl(),\n                    pageName    : 'OwnersManualPage',\n                    contentID   : 'OwnersManualPage'\n                }\n            );\n        }, 100);\n\n    });\n})(jQuery);\n\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25790],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19642,"type":"CustomHtml","name":"3a4f131cef9f3c19d8ddcb67c5e68c58","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\n\/\/ Page e.g. : \/\/owners-and-drivers\/accessories-and-merchandise\/accessories\/5M0998981A\/touring-decals\n\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('%cLive > SD Accessories Pr EVENTS > 2019\/07\/26', 'color:white;background-color:green');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar url = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\n\n\t\t\t\/\/ VWBasic_Product_Pageload\n\n\t\t\tsetTimeout(function() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_Product_Pageload',\n\t\t\t\t\teventAction: 'VWBasic_Product_Pageload',\n\t\t\t\t\tpageId: url,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c913-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}, 100);\n\n\t\t});\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25831],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19643,"type":"CustomHtml","name":"a7611f1b7db643a51c5b7a37690e0407","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('%cLive > SD Accessories EVENTS > 2019\/07\/24', 'color:white;background-color:green');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar url = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\n\t\t\t\/\/ We need to listen for a custom polymer event that lets us know when all the search results have loaded.\n\t\t\t\/\/ This is the only way to get an accurate value for the number of results from the search.\n\t\t\t\/\/ First we wait for a specific polymer tag to be added, then we bind a listener to that tag - event doesnt propagate any further.\n\t\t\t\/\/ On pageload we need to wait a bit more for the element that displays the number of results loaded.\n\n\t\t\tvar templateTagSelector = 'template.accessories-results';\n\n\t\t\twaitForElement(templateTagSelector, function(selector) {\n\n\t\t\t\t\/\/ On pageload wait for the element that displays the number of results loaded\n\t\t\t\twaitForElement('.accessories-results__number-found', function() {\n\n\t\t\t\t\t\/\/ Then poll for number greater than 0 in there (initial value) - about half a second\n\t\t\t\t\tpollForResultsNumber(function() {\n\t\t\t\t\t\tsendPageLoad();\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t\/\/ Listen for polymer event\n\t\t\t\tjQuery(selector).on('_parent_search-results-changed', function(e) {\n\t\t\t\t\tsendResultsLoad();\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t\t\/\/ Listen for filter-removed.\n\t\t\t\/\/ Other filter events already handled by datalayer.\n\t\t\tjQuery('body').on('filter-removed', function(e) {\n\t\t\t\tsendFilterRemoved(e);\n\t\t\t});\n\n\n\t\t\t\/\/ Utils\n\n\t\t\tfunction pollForResultsNumber(callback) {\n\n\t\t\t\tvar haveResults = parseInt(jQuery('.accessories-results__number-found').text().trim()) > 0;\n\n\t\t\t\tif (haveResults) {\n\n\t\t\t\t\tcallback();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetTimeout(pollForResultsNumber, 100, callback);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction waitForElement(selector, callback) {\n\n\t\t\t\tvar observer = new MutationObserver(function(mutations) {\n\n\t\t\t\t\t$element = jQuery(selector);\n\n\t\t\t\t\tif ($element.length) {\n\n\t\t\t\t\t\tconsole.log('Element found');\n\n\t\t\t\t\t\tcallback(selector);\n\t\t\t\t\t\tthis.disconnect();\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\tobserver.observe(document.documentElement, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true\n\t\t\t\t});\n\n\t\t\t};\n\n\n\t\t\t\/\/ Send Events\n\n\t\t\tfunction sendPageLoad() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_FilterSearchResult_Pageload',\n\t\t\t\t\teventAction: 'VWBasic_FilterSearchResult_Pageload',\n\t\t\t\t\tpageId: url,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c003-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t};\n\n\t\t\tfunction sendFilterRemoved(e) {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'filterRemoved',\n\t\t\t\t\teventAction: 'filterRemoved',\n\t\t\t\t\tpageId: url,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: url,\n\t\t\t\t\tfilterRemoved: e.originalEvent.detail.replace('RESET_', '').toLowerCase()\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c003-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t};\n\n\t\t\tfunction sendResultsLoad() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'resultsLoaded',\n\t\t\t\t\teventAction: 'resultsLoaded',\n\t\t\t\t\tpageId: url,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c003-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t};\n\n\t\t});\n\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25829],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19644,"type":"CustomHtml","name":"fbf028ae027ff7b34465001d819e8d41","parameters":{"customHtml":"<script>\n\n\/\/ Page: \/\/owners-and-drivers\/my-car\/manuals\n\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Owners Manual ACTIONS > 2019\/07\/16');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar vwdata = window.vwdata = window.vwdata || [];\n\n\t\t\tvar triggerEvent = function(trackingObject, event) {\n\n\t\t\t\tvwdata.push(trackingObject);\n\t\t\t\tconsole.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n\n\t\t\t},\n\n\t\t\tsetEventInfo = function(trackingObject, eventAction) {\n\n\t\t\t\ttrackingObject.eventInfo = {};\n\t\t\t\ttrackingObject.eventInfo.eventAction = eventAction;\n\t\t\t\ttrackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '');\n\t\t\t\ttrackingObject.eventInfo.pageName = 'owners : manuals';\n\t\t\t\ttrackingObject.eventInfo.pageCategory = 'owners';\n\t\t\t\ttrackingObject.eventInfo.templateType = undefined;\n\n\t\t\t},\n\n\t\t\tsetEnvironmentData = function(trackingObject) {\n\n\t\t\t\ttrackingObject.environment = {};\n\t\t\t\ttrackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalOwnersManualD6' : 'VWOwnersManualD6';\n\t\t\t\ttrackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n\n\t\t\t},\n\n\t\t\tsetUserData = function(trackingObject) {\n\n\t\t\t\ttrackingObject.user = {};\n\t\t\t\ttrackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n\t\t\t\ttrackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n\t\t\t},\n\n            setPersonalizationData = function (trackingObject) {\n                trackingObject.personalization = {\n                    'status': false,\n                    'placeholderId': undefined,\n                    'contentId': undefined,\n                    'activityId': undefined,\n                    'activityName': undefined,\n                    'experienceId': undefined,\n                    'experienceName': undefined,\n                    'offerName': undefined,\n                    'offerId': undefined\n                };\n            },\n\n            setLinkData = function (trackingObject, obj) {\n                trackingObject.link = {\n                    'url'   : obj.attributes.url,\n                    'name'  : obj.attributes.name\n                };\n            },\n\n            setResultData = function (trackingObject, obj) {\n                trackingObject.search = {\n                    'SearchTerm'            : undefined, \/\/ obj.attributes.searchTerm,\n                    'NumberOfResults'       : obj.attributes.numberResults,\n                    'SearchTermSuggestion'  : undefined \/\/ obj.attributes.searchTermSuggestion\n                };\n            },\n\n\n            setErrorData = function (trackingObject, obj) {\n                trackingObject.error = {\n                    'code'            : obj.attributes.code,\n                    'referringUrl'    : obj.attributes.referringUrl,\n                    'message'         : obj.attributes.searchTermSuggestion\n                };\n            },\n\n            setConfigurationData = function (trackingObject) {\n                trackingObject.configuration = {\n                    'CarlineId'         : undefined,\n                    'CarlineName'       : undefined,\n                    'SalesgroupId'      : undefined,\n                    'SalesgroupName'    : undefined,\n                    'EquipmentlineName' : undefined\n                };\n            },\n\n            setConfigurationPrice = function (trackingObject) {\n                var title = jQuery('.owner-manual-search-result .owner-manual-search-result__model-text').text().replace('Your car is ', '');\n\n                trackingObject.configuration.CarlineName = title.split(' ')[0];\n                trackingObject.configuration.SalesgroupName = title;\n\n                trackingObject.configuration.ModelName = undefined;\n                trackingObject.configuration.ModelId = undefined;\n                trackingObject.configuration.BodyTypeName = undefined;\n                trackingObject.configuration.PriceTypeParameter = undefined;\n                trackingObject.configuration.PriceType = undefined;\n                trackingObject.configuration.PriceRateCurrency = undefined;\n                trackingObject.configuration.PriceRateType = undefined;\n                trackingObject.configuration.PriceRateBasic = undefined;\n                trackingObject.configuration.PriceRateAdditional = undefined;\n                trackingObject.configuration.PriceRateTotal = undefined;\n                trackingObject.configuration.PriceTotalCurrency = undefined;\n                trackingObject.configuration.PriceTotalBasic = undefined;\n                trackingObject.configuration.PriceTotalAdditional = undefined;\n                trackingObject.configuration.PriceTotalTotal = undefined;\n            },\n\n            pageLoad = function(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_Pageload');\n                trackingObject.eventInfo.contentLabels = undefined;\n\n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject);\n                setConfigurationData(trackingObject);\n                setPersonalizationData(trackingObject);\n                trackingObject.personalization.aemRessource = undefined;\n\n                triggerEvent(trackingObject, 'VWBasic_Pageload');\n\n            },\n\n            resultLoad = function(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_SearchResultlist_Load');\n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject);\n                setResultData(trackingObject, obj);\n                setPersonalizationData(trackingObject);\n\n                triggerEvent(trackingObject, 'VWBasic_SearchResultlist_Load');\n\n            },\n\n            buttonClick = function(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_VehicleButton_Click');\n                trackingObject.eventInfo.contentId = obj.attributes.name;\n                trackingObject.eventInfo.sectionName = obj.attributes.name;\n                \n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject);\n                setLinkData(trackingObject, obj);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setPersonalizationData(trackingObject);\n\n                triggerEvent(trackingObject, 'VWBasic_VehicleButton_Click');\n\n            },\n\n            errorLoad = function(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_ErrorMessage_Load');\n                trackingObject.eventInfo.sectionName = 'owners-manual-form-container';\n                \n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setErrorData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_ErrorMessage_Load');\n\n            };\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n                    case \"VWBasic_Pageload\":\n                        pageLoad(obj);\n                        break;\n\n                    case \"VWBasic_SearchResultlist_Load\":\n                        resultLoad(obj);\n                        break;\n\n                    case \"VWBasic_ErrorMessage_Load\":\n                        errorLoad(obj);\n                        break;\n\n                    case \"VWBasic_VehicleButton_Click\":\n                        buttonClick(obj);\n                        break;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25790],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19645,"type":"CustomHtml","name":"6e35926178d5e26562723d1848a8cc37","parameters":{"customHtml":"<script>\n    (function(jQuery) {\n\nwindow.VwTagConsole('%cLive > SD Accessories ACTIONS > 2019\/07\/24', 'color:white;background-color:green');\n\n        jQuery(document).ready(function () {\n\n            var $dataLayer = jQuery('#vw-data-layer');\n            var vwdata = window.vwdata = window.vwdata || [];\n\n            \/\/ Default filter values. Used on pageload. Keep track of current values by updating on filter event.\n            var filtersDefault = {\n                sortOrderText: 'Price: asc',\n                model: 'All',\n                year: 'All',\n                category: 'ALL', \/\/sic\n                keywords: ''\n            };\n\n            var filters = jQuery.extend({}, filtersDefault); \/\/ shallow copy\n\n            var sortOrderAbbreviations = {\n                'Low to high': 'asc',\n                'High to low': 'desc',\n                'A-Z': 'asc',\n                'Z-A': 'desc'\n            }\n\n\n            \/\/ Set data\n\n            function setEventInfo(trackingObject) {\n\n                var pageId = window.location.href.split('?')[0].replace('https:\/\/', '').replace('http:\/\/', ''); \/\/ Dynamic for product pages\n\n                trackingObject.eventInfo = {};\n                trackingObject.eventInfo.pageId = pageId;\n                trackingObject.eventInfo.pageName = pageId.split(\/\\\/|#\/).slice(1).join(' : '); \/\/ Split url by '\/' OR '#'\n                trackingObject.eventInfo.pageCategory = 'owners';\n                trackingObject.eventInfo.templateType = undefined;\n\n            }\n\n            function setEnvironmentData(trackingObject) {\n\n                trackingObject.environment = {};\n                trackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalAccessoriesD6' : 'VWAccessoriesD6';\n                trackingObject.environment.language = 'en';\n                trackingObject.environment.country = 'GB';\n\n            }\n\n            function setUserBrowserData(trackingObject) {\n\n                trackingObject.user = {};\n                trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n                trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n                trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n                trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n            }\n\n            function setPersonalizationData(trackingObject) {\n\n                trackingObject.personalization = {};\n                trackingObject.personalization.status = false;\n                trackingObject.personalization.placeholderId = undefined;\n                trackingObject.personalization.contentId = undefined;\n                trackingObject.personalization.activityId = undefined;\n                trackingObject.personalization.activityName = undefined;\n                trackingObject.personalization.experienceId = undefined;\n                trackingObject.personalization.experienceName = undefined;\n                trackingObject.personalization.offerName = undefined;\n                trackingObject.personalization.offerId = undefined;\n                trackingObject.personalization.aemRessourcePath = undefined;\n\n            }\n\n            function setConfigurationData(trackingObject) {\n\n                trackingObject.configuration = {};\n                trackingObject.configuration.CarlineId = undefined;\n                trackingObject.configuration.CarlineName = undefined;\n                trackingObject.configuration.SalesgroupId = undefined;\n                trackingObject.configuration.SalesgroupName = undefined;\n                trackingObject.configuration.EquipmentlineName = undefined;\n\n            }\n\n            function setLinkData(trackingObject, obj) {\n\n                var $moreButton = jQuery('cta-button');\n\n                trackingObject.link = {};\n                trackingObject.link.url = 'function(show more)';\n                trackingObject.link.name = 'Show more';\n            }\n\n            \/\/ Called when filters changed\n            function setFilters(obj) {\n\n                \/*console.log(obj, 'O B J E C T inside setFilter function');\n                console.log(jQuery('.input-field__input')[0].value, 'jQuery(.input-field__input)[0].value');*\/\n\n\n                \/\/ Set to value from event or keep stored value\n                filters.sortOrderText = obj.attributes.sortcategory ? obj.attributes.sortcategory.text : filters.sortOrderText;\n                filters.model = obj.attributes.model ? obj.attributes.model.value : filters.model;\n                filters.year = obj.attributes.year ? obj.attributes.year.text : filters.year;\n                filters.category = obj.attributes.category ? obj.attributes.category.name : filters.category;\n                \/*if (obj.attributes.keywords === '') {\n                    console.log(obj.attributes.keywordsNotFoundMessage, obj.attributes.keywords, 'obj.attributes.keywordsNotFoundMessage ==============');\n                }*\/\n                filters.keywords = obj.attributes.automatedSearch || filters.keywords; \/\/ use attribute from 'search' datalayer event\n\n                \/\/ Handle removal of filter\n                var filterRemoved = obj.attributes.filterRemoved;\n\n                if (filterRemoved) {\n                    filters[filterRemoved] = filtersDefault[filterRemoved]; \/\/ Set removed filter back to default setting\n                }\n\n                console.log('Filters', filters);\n\n            }\n\n            function setFilterData(trackingObject) {\n\n                \/\/console.log(jQuery('.input-field__input')[0].value, 'jQuery(.input-field__input)[0].value');\n\n                trackingObject.filter = {};\n                trackingObject.filter.numberOfResults = parseInt(jQuery('.accessories-results__number-found').text().trim()) || 0;\n\n                var sortOrderStr = filters.sortOrderText.split(': ')[1];\n                var sortOrder = sortOrderAbbreviations[sortOrderStr] || sortOrderStr; \/\/ Use abbreviation e.g. 'asc'\n\n                trackingObject.filter.sortOrder = [{\n                    sortby: filters.sortOrderText.split(': ')[0],\n                    order: sortOrder\n                }];\n\n                trackingObject.filter.filterlist = [{\n                    type: 'single_value',\n                    name: 'CG', \/\/ Carline name\n                    values: [filters.model]\n                },\n                {\n                    type: 'single_value',\n                    name: 'MY', \/\/ Model year\n                    values: [filters.year]\n                },\n                {\n                    type: 'single_value',\n                    name: 'CA', \/\/ Category\n                    values: [filters.category]\n                },\n                {\n                    type: 'single_value',\n                    name: 'ST', \/\/ Search term\n                    values: [filters.keywords]\n                },\n                ];\n\n            }\n\n            function setProductData(trackingObject, obj) {\n\n                var $accessoyContent = jQuery('.accessory-content');\n                var price = jQuery('span[property=\"price\"]', $accessoyContent).text().trim(); \/\/Taking the price of the selected item from the page\n            \n                trackingObject.product = {};\n                trackingObject.product.Manufacturer = undefined;\n                trackingObject.product.ID = undefined;\n                trackingObject.product.Name = $accessoyContent.find('h1').text().trim();\n                trackingObject.product.Type = undefined;\n                trackingObject.product.Category = undefined;\n                trackingObject.product.Attributes = undefined;\n                trackingObject.product.Price = {\n                    Currency: 'GBP',\n                    value: price ? parseFloat(price.replace('\u00a3', '')) : undefined\n                };\n\n            }\n\n            \/\/ Handlers\n\n            function triggerEvent(trackingObject, event) {\n\n                vwdata.push(trackingObject);\n                console.log('%c SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', 'background: #222; color: #bada55', event, ' trackingObject:', trackingObject);\n            }\n\n            function onPageLoad(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject);\n                trackingObject.eventInfo.eventAction = 'VWBasic_FilterSearchResult_Pageload';\n                trackingObject.eventInfo.contentId = undefined;\n\n                setEnvironmentData(trackingObject);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setFilterData(trackingObject, obj);\n\n                triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n            }\n\n            function onFilter(obj) {\n\n                setFilters(obj);\n\n            }\n\n            function onResultLoad(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject);\n                trackingObject.eventInfo.eventAction = 'VWBasic_FilterSearchResult_Load';\n                trackingObject.eventInfo.contentId = undefined;\n\n                setEnvironmentData(trackingObject);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setFilterData(trackingObject);\n\n                triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n            }\n\n            function onButtonClick(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject);\n                trackingObject.eventInfo.eventAction = 'VWBasic_Button_Click';\n                trackingObject.eventInfo.contentId = 'Show more';\n                trackingObject.eventInfo.sectionName = undefined;\n\n                setEnvironmentData(trackingObject);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setLinkData(trackingObject);\n\n                triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n            }\n\n            function onProductPageLoad(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject);\n                trackingObject.eventInfo.eventAction = 'VWBasic_Product_Pageload';\n                trackingObject.eventInfo.contentLabels = undefined;\n\n                setEnvironmentData(trackingObject);\n                setUserBrowserData(trackingObject);\n\n                setPersonalizationData(trackingObject);\n                trackingObject.personalization.aemRessourcePath = undefined;\n\n                setConfigurationData(trackingObject);\n                setProductData(trackingObject);\n\n                triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n            }\n\n\n            \/\/ Main listener\n\n            $dataLayer.on('data-layer-event-fired', function (e) {\n\n                var obj = dataLayer.event[dataLayer.event.length - 1];\n\n                if (!Bootstrapper) {\n                    return;\n                }\n\n                switch (obj.eventInfo.eventAction) {\n\n                    case 'VWBasic_FilterSearchResult_Pageload':\n                        onPageLoad(obj);\n                        break;\n\n                    case 'filter':\n                    case 'search':\n                    case 'sort':\n                    case 'filterRemoved':\n                        onFilter(obj);\n                        break;\n\n                    case 'resultsLoaded':\n                        onResultLoad(obj);\n                        break;\n\n                    case 'moreResults':\n                        onButtonClick(obj);\n                        break;\n\n                    case 'VWBasic_Product_Pageload':\n                        onProductPageLoad(obj);\n                        break;\n\n                    default:\n\n                }\n\n            });\n\n        });\n\n    })(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25828],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19646,"type":"CustomHtml","name":"e1e9477681d99107916f08ae8dce6330","parameters":{"customHtml":"<script>\n\n\/* \nPages: \n\/\/order-a-brochure\n\/\/order-a-brochure\/<model>\n*\/\n\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Dld Brochure EVENTS > 2019\/08\/06');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar pageId = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\t\t\tvar isSubPage = window.location.href.split('order-a-brochure')[1].split('?')[0].replace('\/','') !== '';\n\t\t\tvar pageLoadEventName = isSubPage ? 'VWBasic_Vehicle_Pageload' : 'VWBasic_Pageload';\n\n\n\t\t\t\/\/ Set listeners\n\n\t\t\tsetTimeout(onPageLoad, 100);\n\t\t\tjQuery('.brochure-download-links__item').on('click', onDownloadClick);\n\n\t\t\tif (isSubPage && jQuery('brochure-download-polymer').length) {\n\n\t\t\t\t\/\/ Observe form visibility and set listeners\n\t\t\t\tvar formOpenObserver = new MutationObserver(function(mutations) {\n\n\t\t\t\t\tmutations.forEach(function(mutation) {\n\n\t\t\t\t\t\tif (mutation.type === 'attributes') {\n\n\t\t\t\t\t\t\tvar isFormOpen = !mutation.oldValue; \/\/ oldValue is null when form opened\n\n\t\t\t\t\t\t\tif (isFormOpen) {\n\n\t\t\t\t\t\t\t\tjQuery('brochure-download-polymer').find('cta-button').on('click', onFormCTAClick);\n\t\t\t\t\t\t\t\tonFormLoad();\n\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tonFormClose();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\tformOpenObserver.observe(jQuery('brochure-download-polymer').get(0), {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tattributeFilter: ['style', 'class'],\n\t\t\t\t\tattributeOldValue: true\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\t\/\/ Handlers \/\/\/\/\n\n\t\t\t\/\/ VWBasic_Pageload OR VWBasic_Vehicle_Pageload\n\n\t\t\tfunction onPageLoad() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: pageLoadEventName,\n\t\t\t\t\teventAction: pageLoadEventName,\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: pageId\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c044-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}\n\n\n\t\t\t\/\/ VWBasic_VehicleDownload_Click\n\n\t\t\tfunction onDownloadClick() {\n\n\t\t\t\tvar fileUrl = jQuery(this).find('a').attr('href');\n\t\t\t\tvar CTATitle = jQuery(this).find('span').text();\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_VehicleDownload_Click',\n\t\t\t\t\teventAction: 'VWBasic_VehicleDownload_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: fileUrl,\n\t\t\t\t\ttitle: CTATitle\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c044-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}\n\n\n\t\t\t\/\/ VWBasic_VehicleForm_Load\n\n\t\t\tfunction onFormLoad() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_VehicleForm_Load',\n\t\t\t\t\teventAction: 'VWBasic_VehicleForm_Load',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: pageId\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c044-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}\n\n\n\t\t\t\/\/ VWBasic_Close_Click\n\n\t\t\tfunction onFormClose() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_Close_Click',\n\t\t\t\t\teventAction: 'VWBasic_Close_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: pageId\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c044-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}\n\n\n\t\t\t\/\/ VWBasic_VehicleFormCTA_Click\n\n\t\t\tfunction onFormCTAClick(e) {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_VehicleFormCTA_Click',\n\t\t\t\t\teventAction: 'VWBasic_VehicleFormCTA_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar label = jQuery(e.target).text().trim();\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\tname: 'submitRequest',\n\t\t\t\t\tlabel: label\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c044-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}\n\n\n\t\t});\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25830],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19647,"type":"CustomHtml","name":"dcb5bd1846ece288d7f58530f207f238","parameters":{"customHtml":"<script>\n  \/*\nPages:\n\/\/order-a-brochure\n\/\/order-a-brochure\/<model>\n*\/\n\n  (function (jQuery) {\n    window.VwTagConsole(\n      'Live > SD Download a Brochure ACTIONS > 2019\/08\/06',\n      'color:white;background-color:green'\n    );\n\n    jQuery(document).ready(function () {\n      var $dataLayer = jQuery('#vw-data-layer');\n      var vwdata = window.vwdata || [];\n      var marketingConsent;\n\n      \/\/ Set data\n\n      function setEventInfo(trackingObject) {\n        var pageId = window.location.href\n          .split('?')[0]\n          .replace('https:\/\/', '')\n          .replace('http:\/\/', ''); \/\/ Dynamic for product pages\n\n        trackingObject.eventInfo = {};\n        trackingObject.eventInfo.pageId = pageId;\n        trackingObject.eventInfo.pageName = pageId\n          .split(\/\\\/|#\/)\n          .slice(1)\n          .join(' : '); \/\/ Split url by '\/' OR '#'\n        trackingObject.eventInfo.pageCategory = 'New cars';\n        trackingObject.eventInfo.templateType = undefined;\n      }\n\n      function setEnvironmentData(trackingObject) {\n        trackingObject.environment = {};\n        trackingObject.environment.applicationId =\n          window.location.href.indexOf('vwcloud.co.uk') > -1\n            ? 'VWLocalDownloadBrochureD6'\n            : 'VWDownloadBrochureD6';\n        trackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n      }\n\n      function setUserLocationData(trackingObject) {\n        trackingObject.user = trackingObject.user || {};\n        trackingObject.user.locationLat = undefined;\n        trackingObject.user.locationLong = undefined;\n        trackingObject.user.locationZip = undefined;\n        trackingObject.user.locationName = undefined;\n      }\n\n      function setUserBrowserData(trackingObject) {\n        trackingObject.user = trackingObject.user || {};\n        trackingObject.user.browserResolutionHeight = Math.max(\n          document.documentElement.clientWidth,\n          window.innerWidth || 0\n        ).toString();\n        trackingObject.user.browserResolutionWidth = Math.max(\n          document.documentElement.clientHeight,\n          window.innerHeight || 0\n        ).toString();\n        trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll(\n          'main'\n        )[0]\n          ? document.querySelectorAll('main')[0].offsetWidth.toString()\n          : undefined;\n        trackingObject.user.browserResolutionOrientation =\n          window.innerHeight < window.innerWidth ? 'h' : 'v';\n      }\n\n      function setPersonalizationData(trackingObject) {\n        trackingObject.personalization = {};\n        trackingObject.personalization.status = false;\n        trackingObject.personalization.placeholderId = undefined;\n        trackingObject.personalization.contentId = undefined;\n        trackingObject.personalization.activityId = undefined;\n        trackingObject.personalization.activityName = undefined;\n        trackingObject.personalization.experienceId = undefined;\n        trackingObject.personalization.experienceName = undefined;\n        trackingObject.personalization.offerName = undefined;\n        trackingObject.personalization.offerId = undefined;\n      }\n\n      function setConfigurationData(trackingObject) {\n        trackingObject.configuration = {};\n        trackingObject.configuration.BodyType = undefined;\n        trackingObject.configuration.CarlineId = undefined;\n        trackingObject.configuration.CarlineName = jQuery(\n          '.page-intro-lockup__text-container strong'\n        ).text();\n        trackingObject.configuration.SalesgroupId = undefined;\n        trackingObject.configuration.SalesgroupName = undefined;\n        trackingObject.configuration.EquipmentlineName = undefined;\n        trackingObject.configuration.ModelId = undefined;\n        trackingObject.configuration.ModelName = undefined;\n        trackingObject.configuration.PriceType = undefined;\n        trackingObject.configuration.PriceTypeParameter = undefined;\n        trackingObject.configuration.PriceRateCurrency = undefined;\n        trackingObject.configuration.PriceRateType = undefined;\n        trackingObject.configuration.PriceRateBasic = undefined;\n        trackingObject.configuration.PriceRateAdditional = undefined;\n        trackingObject.configuration.PriceRateTotal = undefined;\n        trackingObject.configuration.PriceTotalCurrency = undefined;\n        trackingObject.configuration.PriceTotalBasic = undefined;\n        trackingObject.configuration.PriceTotalAdditional = undefined;\n        trackingObject.configuration.PriceTotalTotal = undefined;\n      }\n\n      function setPartnerData(trackingObject) {\n        trackingObject.partner = {};\n        trackingObject.partner.informationBnr = undefined;\n        trackingObject.partner.informationName = undefined;\n        trackingObject.partner.informationDepartment = undefined;\n        trackingObject.partner.informationZIP = undefined;\n      }\n\n      function setFormData(trackingObject, obj) {\n        marketingConsent =\n          jQuery('input-selector').find(':checked').val() || marketingConsent; \/\/ true\/false\/undefined\n\n        trackingObject.form = {};\n        trackingObject.form.FormType = 'contact';\n        trackingObject.form.FormName = 'brochureVoucher';\n        trackingObject.form.PrefContactChannels = 'email'; \/\/ only option\n        trackingObject.form.FormVersion = '1';\n        trackingObject.form.MarketingConsent = [\n          { emailcontact: marketingConsent },\n        ];\n        trackingObject.form.NewsletterType = undefined;\n        trackingObject.form.Questionnaire = undefined; \/\/ GDPR\n      }\n\n      function setFileData(trackingObject, obj) {\n        var CTAName = obj.attributes.title;\n        var fileUrl = obj.attributes.url;\n        var fileName = fileUrl.split('\/')[fileUrl.split('\/').length - 1];\n        var fileType = fileName.split('.')[fileName.split('.').length - 1];\n        var carlineName = jQuery(\n          '.page-intro-lockup__text-container strong'\n        ).text();\n\n        trackingObject.file = {};\n        trackingObject.file.name = fileName;\n        trackingObject.file.category = undefined;\n        trackingObject.file.type = fileType;\n        trackingObject.file.productName = carlineName;\n        trackingObject.file.url = fileUrl;\n        trackingObject.file.language = 'en';\n        trackingObject.file.cta = CTAName;\n      }\n\n      function setLinkData(trackingObject, obj) {\n        trackingObject.link = {};\n        trackingObject.link.url = 'function(formSubmit)';\n        trackingObject.link.name = 'formSubmit';\n      }\n\n      function setOwnershipData(trackingObject) {\n        trackingObject.ownership = {};\n        trackingObject.ownership.vehicle = undefined;\n      }\n\n      \/\/ Handlers\n\n      function triggerEvent(trackingObject, event) {\n        vwdata.push(trackingObject);\n        console.log(\n          'SD Bootstrapper (' +\n            Bootstrapper.ensightenOptions.publishPath +\n            ') push event:',\n          event,\n          ' trackingObject:',\n          trackingObject\n        );\n      }\n\n      function onPageLoad(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_Pageload';\n        trackingObject.eventInfo.contentLabels = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        trackingObject.personalization.aemRessourcePath = undefined;\n\n        trackingObject.configuration = {};\n        trackingObject.configuration.CarlineId = undefined;\n        trackingObject.configuration.CarlineName = undefined;\n        trackingObject.configuration.SalesgroupId = undefined;\n        trackingObject.configuration.SalesgroupName = undefined;\n        trackingObject.configuration.EquipmentlineName = undefined;\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onVehiclePageLoad(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_Vehicle_Pageload';\n        trackingObject.eventInfo.contentId =\n          jQuery('.page-intro-lockup__text-container strong').text() +\n          ' Brochure Page';\n        trackingObject.eventInfo.sectionName = undefined;\n        trackingObject.eventInfo.contentLabels = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPartnerData(trackingObject);\n\n        setPersonalizationData(trackingObject);\n        trackingObject.personalization.aemRessourcePath = undefined;\n\n        setConfigurationData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onDownloadClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_VehicleDownload_Click';\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setConfigurationData(trackingObject);\n        setFileData(trackingObject, obj);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onFormLoad(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_VehicleForm_Load';\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setConfigurationData(trackingObject);\n        setPartnerData(trackingObject);\n\n        trackingObject.form = {};\n        trackingObject.form.FormType = 'contact';\n        trackingObject.form.FormName = 'brochureVoucher';\n        trackingObject.form.FormVersion = '1';\n        trackingObject.form.FormStart = true;\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onFormCTAClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_VehicleFormCTA_Click';\n        trackingObject.eventInfo.contentId = 'formSubmit';\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setConfigurationData(trackingObject);\n        setFormData(trackingObject, obj);\n        setPartnerData(trackingObject);\n        setLinkData(trackingObject, obj);\n        setOwnershipData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onCloseClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction = 'VWBasic_Close_Click';\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      function onFormSubmissionSuccess(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject);\n        trackingObject.eventInfo.eventAction =\n          'VWBasic_VehicleFormSubmissionSuccessMessage_Load';\n        trackingObject.eventInfo.contentId = 'formSubmissionSuccess';\n\n        setEnvironmentData(trackingObject);\n        setUserLocationData(trackingObject);\n        setUserBrowserData(trackingObject);\n        setPersonalizationData(trackingObject);\n        setConfigurationData(trackingObject);\n        setFormData(trackingObject, obj);\n        setPartnerData(trackingObject);\n        trackingObject.form.LeadID = (\n          (Date.now() + Math.random()) *\n          100000\n        ).toString();\n\n        triggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n      }\n\n      \/\/ Main listener\n\n      $dataLayer.on('data-layer-event-fired', function (e) {\n        var obj = dataLayer.event[dataLayer.event.length - 1];\n\n        if (!Bootstrapper) {\n          return;\n        }\n\n        switch (obj.eventInfo.eventAction) {\n          case 'VWBasic_Pageload':\n            onPageLoad(obj);\n            break;\n\n          case 'VWBasic_Vehicle_Pageload':\n            onVehiclePageLoad(obj);\n            break;\n\n          case 'VWBasic_VehicleDownload_Click':\n            onDownloadClick(obj);\n            break;\n\n          case 'VWBasic_VehicleForm_Load':\n            onFormLoad(obj);\n            break;\n\n          case 'VWBasic_VehicleFormCTA_Click':\n            onFormCTAClick(obj);\n            break;\n\n          case 'VWBasic_Close_Click':\n            onCloseClick(obj);\n            break;\n\n          case 'submissionSuccess':\n            onFormSubmissionSuccess(obj);\n            break;\n\n          default:\n        }\n      });\n    });\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25830],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19648,"type":"CustomHtml","name":"e79e0a1ad092cc3688f10f81101383f5","parameters":{"customHtml":"<script>\n    (function(jQuery) {\n\n        jQuery(document).ready(function() {\n\nwindow.VwTagConsole('%cStaging > SD Live Chat ACTIONS > 2019\/11\/12', 'color:white;background-color:green');\n\n            var $dataLayer = jQuery('#vw-data-layer');\n            var vwdata = window.vwdata = window.vwdata || []; \/\/ Bootstrapper new datalayer object (no longer Bootstrapper.ngw object).\n\n\n            \/\/ Common code\n\n            var triggerEvent = function(trackingObject, event) {\n\n                    vwdata.push(trackingObject);\n                    console.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n\n                },\n\n                setEventInfo = function(trackingObject, eventAction) {\n\n                    var urlsections = window.location.pathname.split('\/');\n                    var category = urlsections[urlsections.length -2];\n                    var page = urlsections[urlsections.length -1];\n\n                    trackingObject.eventInfo = {};\n                    trackingObject.eventInfo.eventAction = eventAction;\n                    trackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '').split('?')[0].split('#')[0];\n                    trackingObject.eventInfo.pageName = urlsections.length > 2 ? `${category} : ${page}` : page;\n                    trackingObject.eventInfo.contentId = 'chatLayer';\n                    trackingObject.eventInfo.sectionName = 'chatLayer';\n                    trackingObject.eventInfo.pageCategory = urlsections.length > 2 ? category : page;\n                    trackingObject.eventInfo.templateType = undefined;\n\n                },\n\n                setEnvironmentData = function(trackingObject, obj) {\n\n                    trackingObject.environment = {};\n                    trackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalUKLiveChatD6' : 'VWUKLiveChatD6';\n                    trackingObject.environment.language = 'en';\n                    trackingObject.environment.country = 'GB';\n\n                },\n\n                setUserData = function(trackingObject) {\n\n                    trackingObject.user = {};\n                    trackingObject.user.loginStatus = undefined;\n                    trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n                    trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n                    trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n                    trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n                },\n\n                setFormData = function(trackingObject) {\n\n                    trackingObject.form = {};\n                    trackingObject.form.FormName = 'chat';\n                    trackingObject.form.FormType = 'other';\n                    trackingObject.form.FormStart = true;\n                    trackingObject.form.FormVersion = '1';\n                    trackingObject.form.NewsletterType = undefined;\n\n                },\n\n                setPersonalizationData = function(trackingObject, obj) {\n\n                    trackingObject.personalization = {};\n                    trackingObject.personalization.status = false;\n                    trackingObject.personalization.placeholderId = undefined;\n                    trackingObject.personalization.contentId = undefined;\n                    trackingObject.personalization.activityId = undefined;\n                    trackingObject.personalization.activityName = undefined;\n                    trackingObject.personalization.experienceId = undefined;\n                    trackingObject.personalization.experienceName = undefined;\n                    trackingObject.personalization.offerId = undefined;\n                    trackingObject.personalization.offerName = undefined;\n\n                },\n\n                setConfigurationData = function(trackingObject) {\n\n                    trackingObject.configuration = {};\n                    trackingObject.configuration.CarlineId = undefined;\n                    trackingObject.configuration.CarlineName = undefined;\n                    trackingObject.configuration.SalesgroupId = undefined;\n                    trackingObject.configuration.SalesgroupName = undefined;\n                    trackingObject.configuration.EquipmentlineName = undefined;\n                    trackingObject.configuration.PriceRateCurrency = undefined;\n                    trackingObject.configuration.PriceRateType = undefined;\n                    trackingObject.configuration.PriceRateBasic = undefined;\n                    trackingObject.configuration.PriceRateAdditional = undefined;\n                    trackingObject.configuration.PriceRateTotal = undefined;\n                    trackingObject.configuration.PriceTotalCurrency = undefined;\n                    trackingObject.configuration.PriceTotalBasic = undefined;\n                    trackingObject.configuration.PriceTotalAdditional = undefined;\n                    trackingObject.configuration.PriceTotalTotal = undefined;\n\n                },\n\n                setLinkData = function(trackingObject, obj) {\n\n                    trackingObject.link = {};\n                    trackingObject.link.url = obj.attributes.url;\n                    trackingObject.link.name = obj.attributes.label;\n\n                },\n\n                setPartnerData = function(trackingObject, obj) {\n\n                    trackingObject.partner = {};\n                    trackingObject.partner.informationBnr = undefined;\n                    trackingObject.partner.informationName = undefined;\n                    trackingObject.partner.informationDepartment = undefined;\n                    trackingObject.partner.informationZIP = undefined;\n\n                },\n\n                setOwnershipData = function(trackingObject) {\n\n                    trackingObject.ownership = {};\n                    trackingObject.ownership.vehicle = undefined;\n\n                },\n\n                setErrorData = function(trackingObject, obj) {\n\n                    trackingObject.error = {};\n                    trackingObject.error.code = '1';\n                    trackingObject.error.message = errorH2Text;\n                    trackingObject.error.referringUrl = window.location.hostname + window.location.pathname;\n\n                }\n\n            \/\/ Listeners\n\n            var buttonClick = function(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, obj.eventInfo.eventAction);\n                setEnvironmentData(trackingObject, obj);\n                setUserData(trackingObject);\n                setPersonalizationData(trackingObject, obj);\n                setPartnerData(trackingObject, obj);\n                setLinkData(trackingObject, obj);\n                setConfigurationData(trackingObject);\n                setOwnershipData(trackingObject);\n\n                triggerEvent(trackingObject, obj.eventInfo.eventAction);\n\n            },\n\n            LayerCloseClick = function(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, obj.eventInfo.eventAction);\n                trackingObject.eventInfo.contentLabels = obj.attributes.label;\n\n                setEnvironmentData(trackingObject, obj);\n                setUserData(trackingObject);\n                setPersonalizationData(trackingObject, obj);\n                setLinkData(trackingObject, obj);\n\n                triggerEvent(trackingObject, obj.eventInfo.eventAction);\n\n            },\n\n            FormButtonClick = function(obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, obj.eventInfo.eventAction);\n\n                setEnvironmentData(trackingObject, obj);\n                setUserData(trackingObject);\n                setPersonalizationData(trackingObject, obj);\n                setLinkData(trackingObject, obj);\n                setConfigurationData(trackingObject);\n                setPartnerData(trackingObject, obj);\n                setOwnershipData(trackingObject);\n                setFormData(trackingObject);\n                trackingObject.form.FormStart = false;\n                trackingObject.form.Questionnaire = undefined;\n\n                triggerEvent(trackingObject, obj.eventInfo.eventAction);\n\n            },\n\n            FormLayerLoad = function(obj) {\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, obj.eventInfo.eventAction);\n                trackingObject.eventInfo.contentLabels = undefined;\n\n                setEnvironmentData(trackingObject, obj);\n                setUserData(trackingObject);\n                setPersonalizationData(trackingObject, obj);\n                setPartnerData(trackingObject, obj);\n                setConfigurationData(trackingObject);\n                setFormData(trackingObject);\n\n                triggerEvent(trackingObject, obj.eventInfo.eventAction);\n            }\n\n            \/\/ Main listener\n\n            $dataLayer.on('data-layer-event-fired', function(e) {\n\n                var obj = dataLayer.event[dataLayer.event.length - 1];\n\n                if (!Bootstrapper) {\n                    return;\n                }\n                \n                 if (obj.eventInfo == \"undefined\") {\n                    console.log('push undefined obj.eventInfo');\n                    return;\n                }\n                \n                if (!obj.eventInfo) {\n                    console.log('push no obj.eventInfo');\n                    return;\n                }\n\n                console.log('push listened to: ', obj.eventInfo.eventAction, obj);\n\n                switch (obj.eventInfo.eventAction) {\n\n                    case 'VWBasic_Button_Click':\n                        buttonClick(obj);\n                        break;\n\n                      case 'VWBasic_LayerClose_Click':\n                        LayerCloseClick(obj);\n                        break;\n\n                      case 'VWBasic_FormLayer_Load':\n                        FormLayerLoad(obj);\n                        break;\n\n                      case 'VWBasic_FormButton_Click':\n                          FormButtonClick(obj);\n                        break;\n\n                      case 'VWBasic_Rating_Click':\n                        break;\n\n                      case 'VWBasic_ErrorLayer_Load':\n                        break;\n\n                    default:\n                }\n\n            });\n\n        });\n\n    })(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25836],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19649,"type":"CustomHtml","name":"ad3efd85b0ad38f5e8cfd4520af45fc5","parameters":{"customHtml":"<script type=\"text\/javascript\">\n    (function(jQuery) {\n        jQuery(document).ready( function() {\n\nwindow.VwTagConsole('%cStaging > SD Live Chat - EVENTS > 2019\/11\/12', 'color:white;background-color:green');\n\n            var triggerEvent = function (eventAction, dataAttributes) {\n                var dataEventInfo = {\n                    eventName   : eventAction,\n                    eventAction : eventAction,\n                    pageId      : window.location,\n                    pageName    : 'Live Chat',\n                    contentID   : 'Live Chat'\n                };\n                vwUk.Instances.dataLayerController.fireEvent('c921-01', dataEventInfo, {}, dataAttributes);\n            };\n\n            var activateLiveChat = function () {\n                \/\/ fix Qubit dbl Calling\n                if (window.LiveChatEvent) {\n                    return false\n                }\n                if (window.LiveChatIsActive) {\n                    window.LiveChatEvent = true\n                    return true\n                }\n                return false\n            };\n\n            console.log('window.LiveChatEvent', window.LiveChatEvent, window.LiveChatIsActive)\n            if (activateLiveChat()) {\n\n                \/**\n                Set up a message listener - written in JS, but could use a framework.\n                **\/\n                var k2c_allowedMessages = new Array('http:\/\/chat.volkswagen.co.uk','https:\/\/chat.volkswagen.co.uk');\n                var k2c_eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n                var k2c_eventer = window[k2c_eventMethod];\n                var k2c_messageEvent = k2c_eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n                var chatStatus = 'idle';\n                var addedDrawerListener = false;\n\n\n                k2c_eventer(k2c_messageEvent, function (e) {\n                   if (typeof(e.data) != 'object') {\n                      var message = e.data.split('|');\n\n                      if (message[0] == 'k2cslideopen'){\n                          console.log(\"push Live Chat Open\");\n                          triggerEvent('VWBasic_Button_Click', {\n                              url   : 'function(liveChat)',\n                              label : 'startLiveChat'\n                          });\n\n                          if (!addedDrawerListener) {\n                              addedDrawerListener = true;\n                              jQuery('#k2claunchDir').on('click', function() {\n                                  console.log(\"push closing drawer clicked\", chatStatus);\n                                  if (chatStatus === 'idle' || chatStatus === 'open') {\n                                      triggerEvent('VWBasic_LayerClose_Click', {\n                                          url   : 'function(closeAccordion)',\n                                          label : 'closeAccordion'\n                                      });\n                                  }\n                              });\n                          }\n                      }\n\n                      var k2c_origin = e.origin;\n                      if (k2c_allowedMessages.indexOf(k2c_origin)!=-1) {\n\n                        if (typeof(e.data) != 'object') {\n                          var k2c_InMessage = e.data.split('|');\n                          console.log('push heard:', k2c_InMessage)\n\n                          \/** Here are the message types we send in the format  message | value **\/\n                          if (k2c_InMessage[0] === 'k2cchatstart') {\n                              chatStatus = 'open';\n                              console.log(\"push Live Chat Started Messaging\");\n                              triggerEvent('VWBasic_FormLayer_Load', {\n                                  status : 'open'\n                              });\n                          }\n\n                          if (k2c_InMessage[0] === 'k2cinlive' && k2c_InMessage[2] !== 'WAITADVISOR' && chatStatus === 'open') {\n                              chatStatus = 'connected';\n                              console.log(\"push Live Chat connected to\", k2c_InMessage[1]);\n                              triggerEvent('VWBasic_FormLayer_Load', {\n                                  status    : 'connected',\n                                  advisor   : k2c_InMessage[1]\n                              });\n                          }\n\n                          if (k2c_InMessage[0] === 'k2cclosechat' || k2c_InMessage[0] === 'k2cticketisclosed') {\n                              console.log(\"push Live Chat close btn\");\n                              triggerEvent('VWBasic_LayerClose_Click', {\n                                  url   : 'function(closeChat)',\n                                  label : 'closeCross'\n                              });\n                          }\n\n                          if (k2c_InMessage[0] === 'k2cstartchat') {\n                            if (k2c_InMessage[1] === 1) {\n                                console.log(\"push open up\");\n                                triggerEvent('VWBasic_FormButton_Click', {\n                                    url   : 'function(startChat)',\n                                    label : 'startChat'\n                                });\n                            }\n                          }\n                          if (k2c_InMessage[0] === 'k2cchatend') {\n                              console.log(\"push Chat Ended\");\n                              chatStatus = 'idle';\n                              triggerEvent('VWBasic_FormButton_Click', {\n                                  url   : 'function(endChat)',\n                                  label : 'endChat'\n                              });\n                          }\n\n                        }\n                      }\n                  }\n                }, false);\n\n            }\n        });\n    })(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25836],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19650,"type":"CustomHtml","name":"4e70ecbd12f81ef057c67f1917dca80c","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\n(function(jQuery) {\n    jQuery(document).ready( function() {\n\n\/\/ window.VwTagConsole('Live > SD Offers EVENTS > 2019\/06\/28');\nconsole.log('Live > SD Offers EVENTS > 2019\/06\/28')\n\n        var isVehiclePage = window.location.pathname.split('\/').length > 3;\n        var action = isVehiclePage ? 'VWBasic_Vehicle_Pageload' : 'VWBasic_Pageload';\n        var errorCodes = [\n            {\n                name: 'private',\n                index: 1\n            },\n            {\n                name: 'business',\n                index: 2\n            },\n            {\n                name: 'motability',\n                index: 3\n            },\n            {\n                name: 'servicing',\n                index: 4\n            },\n        ];\n\n        var getCamelCase = function (str) {\n            return str.replace(\/(?:^\\w|[A-Z]|\\b\\w)\/g, function (word, index) {\n                return index == 0 ? word.toLowerCase() : word.toUpperCase();\n            }).replace(\/\\s+\/g, '');\n        };\n\n        var getErrorCode = function (tab) {\n            for (var i = 0; i < errorCodes.length; i++) {\n                if (tab === errorCodes[i].name) {\n                    return errorCodes[i].index;\n                }\n            }\n            \/\/ not found, add me to the list\n            var newTab = {\n                name: tab,\n                index: errorCodes[errorCodes.length-1].index + 1\n            }\n            errorCodes.push(newTab);\n            return newTab.index\n        };\n\n        if (isVehiclePage) {\n\n            \/\/ main 4 tab items at the top\n            jQuery('.model-offer-details__filter-item').on('click', function(e) {\n                var joiner = window.location.hash.length > 0 ? '&' : '#';\n                vwUk.Instances.dataLayerController.fireEvent('c066',\n                    {\n                        eventName   : 'VWBasic_VehicleSubNavigation_Click',\n                        eventAction : 'VWBasic_VehicleSubNavigation_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'OffersPage',\n                        contentID   : 'OffersPage'\n                    },\n                    {},\n                    {\n                        url : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', '') + joiner + getCamelCase(e.target.innerText.trim()),\n                        name : e.target.innerText,\n                    }\n                );\n\n                \/\/ check if this element contains empty offers, which use feature-text-block instead of model-offer-details__sub-content\n                if (jQuery('.model-offer-details__main-content--active .feature-text-block').length > 0) {\n                    var errorName = e.target.innerText.split(' ')[0].toLowerCase();\n                    vwUk.Instances.dataLayerController.fireEvent('c066',\n                        {\n                            eventName   : 'VWBasic_VehicleErrorMessage_Load',\n                            eventAction : 'VWBasic_VehicleErrorMessage_Load',\n                            pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                            pageName    : 'OffersPage',\n                            contentID   : jQuery('.model-offer-details__main-content--active .feature-text-block h3').text()\n                        },\n                        {},\n                        {\n                            code    : getErrorCode(errorName),\n                            name    : errorName\n                        }\n                    );\n                }\n            });\n\n            \/\/ lefthand side tab item\n            jQuery('.model-offer-details__subtab-item').on('click', function(e) {\n                var joiner = window.location.hash.length > 0 ? '&' : '#';\n                var linkName = jQuery(e.currentTarget).find('h3').text().trim();\n\n                vwUk.Instances.dataLayerController.fireEvent('c066',\n                    {\n                        eventName   : 'VWBasic_VehicleTab_Click',\n                        eventAction : 'VWBasic_VehicleTab_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'OffersPage',\n                        contentID   : 'OffersPage'\n                    },\n                    {},\n                    {\n                        url : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', '') + joiner + getCamelCase(linkName), \/\/.target.innerText.trim()),\n                        name : linkName \/\/e.target.innerText,\n                    }\n                );\n            });\n\n            \/\/ button on Sorry, no offers tab\n            jQuery('.feature-text-block__cta').on('click', function(e) {\n                vwUk.Instances.dataLayerController.fireEvent('c066',\n                    {\n                        eventName   : 'VWBasic_VehicleButton_Click',\n                        eventAction : 'VWBasic_VehicleButton_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'OffersPage',\n                        contentID   : 'OffersPage'\n                    },\n                    {},\n                    {\n                        url : e.target.href,\n                        name : e.target.innerText,\n                    }\n                );\n            });\n\n            \/\/ FC button on offers tab\n            jQuery('.model-offer-details__fc-button .secondary-link.icon').on('click', function(e) {\n                vwUk.Instances.dataLayerController.fireEvent('c066',\n                    {\n                        eventName   : 'VWBasic_VehicleButton_Click',\n                        eventAction : 'VWBasic_VehicleButton_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'OffersPage',\n                        contentID   : 'OffersPage'\n                    },\n                    {},\n                    {\n                        url : e.target.href,\n                        name : e.target.innerText,\n                    }\n                );\n            });\n\n            \/\/ small link buttons on offers tab\n            jQuery('.model-offer-details__ctas .secondary-link.icon').on('click', function(e) {\n                vwUk.Instances.dataLayerController.fireEvent('c066',\n                    {\n                        eventName   : 'VWBasic_VehicleLink_Click',\n                        eventAction : 'VWBasic_VehicleLink_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'OffersPage',\n                        contentID   : 'OffersPage'\n                    },\n                    {},\n                    {\n                        url : e.target.href,\n                        name : e.target.innerText,\n                    }\n                );\n            });\n\n            \/\/ Testdrive button on offers tab\n            jQuery('.model-offer-details__ctas .button').on('click', function(e) {\n                vwUk.Instances.dataLayerController.fireEvent('c066',\n                    {\n                        eventName   : 'VWBasic_VehicleButton_Click',\n                        eventAction : 'VWBasic_VehicleButton_Click',\n                        pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                        pageName    : 'OffersPage',\n                        contentID   : 'OffersPage'\n                    },\n                    {},\n                    {\n                        url : e.target.href,\n                        name : e.target.innerText,\n                    }\n                );\n            });\n        }\n\n        setTimeout(function() {\n            \/\/ trigger the inital page load event\n            vwUk.Instances.dataLayerController.fireEvent('c066',\n                {\n                    eventName   : action,\n                    eventAction : action,\n                    pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                    pageName    : 'OffersPage',\n                    contentID   : 'OffersPage'\n                }\n            );\n        }, 100);\n\n    });\n})(jQuery);\n\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25840,25841,25842],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19651,"type":"CustomHtml","name":"28fce8a0d69408cb389a4df7eef3aebf","parameters":{"customHtml":"<script>\n(function (jQuery) {\n    jQuery(document).ready(function () {\n\n\n\/\/ window.VwTagConsole('Live > SD Offers ACTIONS > 2019\/06\/28');\nconsole.log('Live > SD Offers ACTIONS > 2019\/06\/28')\n\n        \/\/ Select the data layer\n        var $dataLayer = jQuery('#vw-data-layer'),\n            vwdata = window.vwdata || [],\n\n            getPageName = function () {\n                var name = '',\n                    prefix = ' : ',\n                    doPrefix = false,\n                    paths = window.location.pathname.split('\/');\n\n                for (var i = 0; i < paths.length; i++) {\n                    var section = paths[i];\n                    if (section !== '') {\n                        if (doPrefix) {\n                            name += prefix + section.split('-').join(' ').toLowerCase();\n                        } else {\n                            \n                            name += section.split('-').join(' ').toLowerCase();\n                        }\n                        doPrefix = true;\n                    }\n                }\n                return name;\n            },\n\n            lowerFirstLetterNoHypens = function (str) {\n                var words = str.split('-');\n\n                for (var i = 0; i < words.length; i++) {\n                    var s = words[i];\n                    words[i] = s.charAt(0).toUpperCase() + s.slice(1);\n                }\n                return words.join(' ');\n            },\n\n            \/\/ Actions\n            triggerEvent = function (trackingObject, event) {\n                vwdata.push(trackingObject);\n                console.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n            },\n\n\n            setEventInfo = function (trackingObject, eventAction) {\n                trackingObject.eventInfo = {};\n                trackingObject.eventInfo.eventAction = eventAction;\n                trackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '').split('#')[0];\n                trackingObject.eventInfo.pageName = getPageName();\n                trackingObject.eventInfo.pageCategory = 'car-finance';\n            },\n\n            setSectionName = function (trackingObject) {\n                var tabTitle = jQuery('.model-offer-details__filter-item--active').text();\n\n                try {\n                    tabTitle = tabTitle.trim();\n                } catch (e) {\n                    \/\/ cant trim off the whitespace\n                }\n                \n                trackingObject.eventInfo.sectionName = tabTitle;\n            },\n\n            setUserBrowserData = function (trackingObject) {\n\n                trackingObject.user = trackingObject.user || {};\n                trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n                trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n                trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n                trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n            },\n\n            setEnvironmentData = function (trackingObject) {\n                trackingObject.environment = {};\n                trackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalOffersD6' : 'VWOffersD6';\n                trackingObject.environment.language = 'en';\n                trackingObject.environment.country = 'GB';\n            },\n\n            setPersonalizationData = function (trackingObject) {\n                trackingObject.personalization = {\n                    'status': false,\n                    'placeholderId': undefined,\n                    'contentId': undefined,\n                    'activityId': undefined,\n                    'activityName': undefined,\n                    'experienceId': undefined,\n                    'experienceName': undefined,\n                    'offerName': undefined,\n                    'offerId': undefined\n                };\n            },\n\n            setLinkData = function (trackingObject, obj) {\n                var message = obj.attributes.name;\n\n                try {\n                    message = message.trim();\n                } catch (e) {\n                    \/\/ cant trim off the whitespace\n                }\n\n                trackingObject.link = {\n                    'url'   : obj.attributes.url,\n                    'name'  : message\n                };\n            },\n\n            setPartnerData = function (trackingObject) {\n                trackingObject.partner = {};\n                trackingObject.partner.informationBnr = undefined;\n                trackingObject.partner.informationName = undefined;\n                trackingObject.partner.informationDepartment = undefined;\n                trackingObject.partner.informationZIP = undefined;\n            },\n\n            setConfigurationData = function (trackingObject) {\n                trackingObject.configuration = {\n                    'CarlineId'         : undefined,\n                    'CarlineName'       : undefined,\n                    'SalesgroupId'      : undefined,\n                    'SalesgroupName'    : undefined,\n                    'EquipmentlineName' : undefined\n                };\n            },\n\n            setConfigurationPrice = function (trackingObject) {\n                var a = window.location.pathname.split('\/');\n\n                trackingObject.configuration.CarlineName = lowerFirstLetterNoHypens(a[a.length - 1]);\n\n                trackingObject.configuration.ModelName = undefined;\n                trackingObject.configuration.ModelId = undefined;\n                trackingObject.configuration.BodyTypeName = undefined;\n                trackingObject.configuration.PriceTypeParameter = undefined;\n                trackingObject.configuration.PriceType = undefined;\n                trackingObject.configuration.PriceRateCurrency = undefined;\n                trackingObject.configuration.PriceRateType = undefined;\n                trackingObject.configuration.PriceRateBasic = undefined;\n                trackingObject.configuration.PriceRateAdditional = undefined;\n                trackingObject.configuration.PriceRateTotal = undefined;\n                trackingObject.configuration.PriceTotalCurrency = undefined;\n                trackingObject.configuration.PriceTotalBasic = undefined;\n                trackingObject.configuration.PriceTotalAdditional = undefined;\n                trackingObject.configuration.PriceTotalTotal = undefined;\n            },\n\n            basicPageLoad = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_Pageload');\n                trackingObject.eventInfo.contentLabels = undefined;\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n\n                trackingObject.page = {\n                    'PublicationDate'       : undefined,\n                    'Author'                : undefined,\n                    'LastModificationDate'  : undefined,\n                    'Type'                  : undefined,\n                    'WordCount'             : undefined\n                };\n\n                triggerEvent(trackingObject, 'VWBasic_Pageload');\n\n            },\n\n            vehiclePageLoad = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_Vehicle_Pageload');\n                setSectionName(trackingObject);\n                trackingObject.eventInfo.contentId = undefined;\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setPartnerData(trackingObject);\n\n                triggerEvent(trackingObject, 'VWBasic_Vehicle_Pageload');\n\n            },\n\n            vehicleSubNavigation = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_VehicleSubNavigation_Click');\n                setSectionName(trackingObject);\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setPartnerData(trackingObject);\n                setLinkData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_VehicleSubNavigation_Click');\n\n            },\n\n            vehicleTabClick = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_VehicleTab_Click');\n                setSectionName(trackingObject);\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setPartnerData(trackingObject);\n                setLinkData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_VehicleTab_Click');\n\n            },\n\n            vehicleErrorMessage = function (obj) {\n\n                var message,\n                    trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_VehicleErrorMessage_Load');\n                setSectionName(trackingObject);\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setPartnerData(trackingObject);\n\n                try {\n                    message = obj.eventInfo.contentID.trim();\n                } catch (e) {\n                    \/\/ cant trim off the whitespace\n                    message = obj.eventInfo.contentID;\n                }\n\n                trackingObject.error = {\n                    'code'          : obj.attributes.code,\n                    'message'       : message,\n                    'referringUrl'  : window.location.hostname + window.location.pathname\n                };\n\n                triggerEvent(trackingObject, 'VWBasic_VehicleErrorMessage_Load');\n\n            },\n\n            vehicleLinkClick = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_VehicleLink_Click');\n                setSectionName(trackingObject);\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setPartnerData(trackingObject);\n                setLinkData(trackingObject, obj);\n                trackingObject.eventInfo.contentId = trackingObject.link.name;\n\n                triggerEvent(trackingObject, 'VWBasic_VehicleLink_Click');\n\n            },\n\n            vehicleButtonClick = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_VehicleButton_Click');\n                setSectionName(trackingObject);\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setPartnerData(trackingObject);\n                setLinkData(trackingObject, obj);\n                trackingObject.eventInfo.contentId = trackingObject.link.name;\n\n                triggerEvent(trackingObject, 'VWBasic_VehicleButton_Click');\n\n            },\n\n            accordionClick = function (obj) {\n\n                var trackingObject = {};\n                var action = obj.eventInfo.type === 'expanded' ? 'VWBasic_VehicleAccordionOpen_Click' : 'VWBasic_VehicleAccordionClose_Click';\n\n                setEventInfo(trackingObject, action);\n                setSectionName(trackingObject);\n                trackingObject.eventInfo.contentId = obj.attributes.header;\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setPartnerData(trackingObject);\n\n                triggerEvent(trackingObject, action);\n\n            };\n\n\n        \/\/ Main Listener\n        $dataLayer.on('data-layer-event-fired', function (e) {\n\n            var obj = dataLayer.event[dataLayer.event.length - 1];\n\n            switch (obj.eventInfo.eventAction) {\n                case 'VWBasic_Pageload':\n                    \/\/ landing page and new-car-deals pages\n                    basicPageLoad(obj);\n                    break;\n\n                case 'VWBasic_Vehicle_Pageload':\n                    \/\/ specifc car new-car-deals pages\n                    vehiclePageLoad(obj);\n                    break;\n\n                case 'VWBasic_VehicleSubNavigation_Click':\n                    vehicleSubNavigation(obj);\n                    break;\n\n\n                case 'VWBasic_VehicleTab_Click':\n                    vehicleTabClick(obj);\n                    break;\n\n\n                case 'VWBasic_VehicleErrorMessage_Load':\n                    vehicleErrorMessage(obj);\n                    break;\n\n\n                case 'VWBasic_VehicleButton_Click':\n                    vehicleButtonClick(obj);\n                    break;\n\n\n                case 'VWBasic_VehicleLink_Click':\n                    vehicleLinkClick(obj);\n                    break;\n\n\n                case 'accordionHeader':\n                    accordionClick(obj);\n                    break;\n\n                default:\n                    break;\n            }\n        })\n\n    })\n})(jQuery)\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25840,25841,25842],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19652,"type":"CustomHtml","name":"f3bd844faba43da7384f832905e53fc7","parameters":{"customHtml":"<script>\n\n\/\/ Page: \/\/new\/<model>\/which-model-compare\n\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Which Model EVENTS > 2019\/08\/28');\n\n\t\t\tVW.whichModel.ComparisonData.tracking = [];\n\n\t\t\t\/\/console.log('%cWhich Model EVENTS', 'background: #222; color: orange');\n\n\t\t\tvar trackingEventName = 'tracking-event-fired';\n\t\t\tvar pageId = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\t\t\tvar selectionPageloadHasFired = false;\n\t\t\tvar userHasClicked = false;\n\t\t\t\/*var isTestingEnv = window.location.href.indexOf('vwcloud.co.uk') !== -1;\n\n\t\t\t\/\/ Display prompt which allows user to remain on page after clicking link, so console can be read. For testing only.\n\t\t\tif (isTestingEnv) {\n\t\t\t\twindow.onbeforeunload = function(e) {\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\t\t\t}*\/\n\n\t\t\tfunction isMainPage() {\n\t\t\t\treturn !isDetailsPage() && !isComparePage();\n\t\t\t};\n\n\t\t\tfunction isDetailsPage() {\n\t\t\t\treturn window.location.href.split('which-model-compare')[1].indexOf('\/details') !== -1;\n\t\t\t};\n\n\t\t\tfunction isComparePage() {\n\t\t\t\treturn window.location.href.split('which-model-compare')[1].indexOf('\/compare') !== -1;\n\t\t\t};\n\n\t\t\tfunction fireEvent(eventName, attributes) {\n\n\t\t\t\tvar eventData = {\n\t\t\t\t\teventInfo: {\n\t\t\t\t\t\teventName: eventName,\n\t\t\t\t\t\teventAction: eventName,\n\t\t\t\t\t\tpageId: pageId,\n\t\t\t\t\t\tpageName: 'WhichModel',\n\t\t\t\t\t\tcontentID: 'WhichModel'\n\t\t\t\t\t},\n\t\t\t\t\tcategory: {},\n\t\t\t\t\tattributes: attributes || {}\n\t\t\t\t}\n\n\t\t\t\tVW.whichModel.ComparisonData.tracking.push(eventData);\n\t\t\t\tVW.whichModel.ComparisonData.trigger(trackingEventName, eventData);\n\n\t\t\t};\n\n\t\t\t\/\/ Pageload events\n\n\t\t\tif (isComparePage()) {\n\n\t\t\t\tsetTimeout(function() {\n\n\t\t\t\t\tif (!selectionPageloadHasFired) {\n\n\t\t\t\t\t\tfireEvent('VWBasic_MultipleVehicles_Pageload');\n\t\t\t\t\t\tselectionPageloadHasFired = true;\n\n\t\t\t\t\t\tsetListeners();\n\t\t\t\t\t}\n\n\t\t\t\t}, 1500);\n\n\t\t\t} else { \/\/ Main page or Details page\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tfireEvent('VWBasic_Vehicle_Pageload');\n\t\t\t\t\tsetListeners();\n\t\t\t\t}, 100);\n\n\t\t\t}\n\n\t\t\t\/\/ VWBasic_MultipleVehicles_Pageload (was VWBasic_VehicleSelection_Pageload)\n\t\t\t\/\/ VWBasic_MultipleVehicles_Load (was VWBasic_VehicleSelection_Load)\n\t\t\t\/\/ 'Compare' page\n\t\t\tVW.whichModel.ComparisonData.on('data-available', function(event) {\n\n\t\t\t\tif (selectionPageloadHasFired) {\n\n\t\t\t\t\t\/\/ If user hasn't clicked yet; ignore\n\t\t\t\t\tif (userHasClicked) {\n\n\t\t\t\t\t\tfireEvent('VWBasic_MultipleVehicles_Load');\n\n\t\t\t\t\t\t\/\/ Reapply listeners following re-render\n\t\t\t\t\t\tsetListeners();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfireEvent('VWBasic_MultipleVehicles_Pageload');\n\t\t\t\t\tselectionPageloadHasFired = true;\n\n\t\t\t\t\tsetListeners();\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tfunction setListeners() {\n\n\t\t\t\t\/\/ VWBasic_VehicleButton_Click\n\n\t\t\t\t\/\/ Main page - Full details button\n\t\t\t\tjQuery('.car-banner__cta').on('click', function(e) {\n\n\t\t\t\t\tvar $carTitle = jQuery(e.target).closest('.car-banner__content').find('h2.car-banner__title')\n\n\t\t\t\t\tfireEvent('VWBasic_VehicleButton_Click', {\n\t\t\t\t\t\tmodelName: $carTitle.text().trim(),\n\t\t\t\t\t\tlabel: $carTitle.text().trim() + ' - ' + jQuery(e.target).text().trim(), \/\/ Model name and button text - e.g. 'Polo S - Full Details'\n\t\t\t\t\t\tlink: e.target.href,\n\t\t\t\t\t\tprice: jQuery(e.target).closest('.car-banner__content').find('.car-banner__price').text().trim().split('From \u00a3')[1].split(' ')[0].trim().replace(',', '')\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t\/\/ Compare page - Change model button\n\t\t\t\tjQuery('.compare-panel__action--derivative-selector').on('click', function(e) {\n\n\t\t\t\t\tuserHasClicked = true;\n\n\t\t\t\t\tfireEvent('VWBasic_VehicleButton_Click', {\n\t\t\t\t\t\tlabel: jQuery(e.target).text().trim(),\n\t\t\t\t\t\tlink: 'function(Change model)'\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t\/\/ Compare page - Remove model button\n\t\t\t\tjQuery('.compare-panel__action--remove').on('click', function(e) {\n\n\t\t\t\t\tuserHasClicked = true;\n\n\t\t\t\t\tfireEvent('VWBasic_VehicleButton_Click', {\n\t\t\t\t\t\tlabel: jQuery(e.target).text().trim(),\n\t\t\t\t\t\tlink: 'function(Remove model)'\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t\/\/ Compare page - Add model button\n\t\t\t\tjQuery('.compare-panel__action--add-model').on('click', function(e) {\n\n\t\t\t\t\tuserHasClicked = true;\n\n\t\t\t\t\tfireEvent('VWBasic_VehicleButton_Click', {\n\t\t\t\t\t\tlabel: 'Add model',\n\t\t\t\t\t\tlink: 'function(Add model)'\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t\/\/ Compare page - Highlight differences toggle\n\t\t\t\tjQuery('.js-highlight-differences').on('change', function(e) {\n\n\t\t\t\t\tuserHasClicked = true;\n\n\t\t\t\t\tvar value = jQuery(e.target).parent('span').is('.jcf-checked') ? 'off' : 'on'; \/\/ Seems to render after event so checking previous value\n\n\t\t\t\t\tfireEvent('VWBasic_VehicleButton_Click', {\n\t\t\t\t\t\tlabel: jQuery(e.target).closest('label').text().trim() + ' ' + value,\n\t\t\t\t\t\tlink: 'function(Highlight differences ' + value + ')'\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t\/\/ VWBasic_MultipleVehiclesButton_Click (was VWBasic_VehicleSelectionButton_Click)\n\t\t\t\t\/\/ 'Compare' button in comaprison tray on main page\n\t\t\t\tjQuery('div.comparison-tray').on('click', function(e) {\n\n\t\t\t\t\tif (jQuery(e.target).is('a.js-compare-cta')) {\n\n\t\t\t\t\t\tfireEvent('VWBasic_MultipleVehiclesButton_Click', {\n\t\t\t\t\t\t\tlabel: jQuery(e.target).text().trim(), \/\/ 'Compare',\n\t\t\t\t\t\t\tlink: e.target.href\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\t\/\/ VWBasic_VehicleSubNavigation_Click\n\t\t\t\t\/\/ Tabs on Details page and Compare page\n\t\t\t\tjQuery('.js-compare-tabs, .js-tabs').on('click', function(e) {\n\t\t\t\t\tfireEvent('VWBasic_VehicleSubNavigation_Click', {\n\t\t\t\t\t\tlabel: jQuery(e.target).text().trim(),\n\t\t\t\t\t\tlink: 'function(Tab select)'\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t\/\/ VWBasic_ModelSelect_Click\n\t\t\t\t\/\/ Dropdown in 'Finance and Cost' tab on Details page\n\t\t\t\tjQuery('select.js-select', 'section#finance-cost').on('change', function(e) {\n\t\t\t\t\tfireEvent('VWBasic_ModelSelect_Click', {\n\t\t\t\t\t\tvalue: jQuery(this).val(),\n\t\t\t\t\t\tlink: 'function(Model select)'\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t});\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25801],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19653,"type":"CustomHtml","name":"37f9299979c645befdc03cbbd8558031","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\n\/\/ Page: \/\/need-help\/need-help-faqs\n\n    (function(jQuery) {\n        jQuery(document).ready(function () {\n\n            window.VwTagConsole('Live > SD Chatbot ACTIONS > 2021\/01\/08');\n\n            var $dataLayer = jQuery('#vw-data-layer');\n            var vwdata = window.vwdata = window.vwdata || [];\n\n            var triggerEvent = function (trackingObject, event) {\n                vwdata.push(trackingObject);\n                console.log('%c SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event - CHATBOT :', 'background: #222; color: #bada55', event, ' trackingObject:', trackingObject);\n            };\n\n            \/\/ Helper functions\n            var formatUrl = function (url) {\n                return url.replace(\/http(s|):\\\/\\\/|\\?.*\/gi, '')\n            };\n\n            var concatArrayItems = function (arr) {\n                if (arr && arr.length > 0) {\n                    var str = '';\n\n                    arr.forEach(function (arrItem) {\n                        str += arrItem + ' : ';\n                    })\n                }\n                return str.slice(0, -2).trim();\n            };\n\n            \/\/ Get pageId\n            var getPageId = function (eventAction, url) {\n                if (eventAction === 'VWBasic_Pageload' || eventAction === 'VWBasic_Button_Click' || eventAction === 'VWBasic_Rating_Click' || eventAction === 'VWBasic_SearchResultlist_Load') {\n                    return formatUrl(url);\n                } else {\n                    return url;\n                }\n            }\n\n            \/\/ Get pageName\n            var getPageNameAndCategory = function () {\n                var url = window.location.href.replace(\/http(s|):\\\/\\\/\/, '').split('?')[0].split('#')[0]\n\n                return url.split('\/')[1].replace('-', ' ');\n            }\n\n            \/\/ Set Event Info\n            var setEventInfo = function (trackingObject, eventAction, eventName) {\n                trackingObject.eventInfo = {};\n                trackingObject.eventInfo.eventAction = eventAction;\n                trackingObject.eventInfo.pageId = window.location.href.replace(\/http(s|):\\\/\\\/\/, '').split('?')[0].split('#')[0];\n                trackingObject.eventInfo.pageName = getPageNameAndCategory();\n                trackingObject.eventInfo.pageCategory = getPageNameAndCategory();\n                \/\/ trackingObject.eventInfo.sectionName = undefined;\n                trackingObject.eventInfo.templateType = undefined;\n\n                if (eventAction === 'VWBasic_Button_Click') {\n                    trackingObject.eventInfo.contentId = 'Start Live Chat';\n                    trackingObject.eventInfo.sectionName = 'Start Live Chat';\n                }\n\n                if (eventAction !== 'VWBasic_Close_Click') {\n                    \/\/trackingObject.eventInfo.contentId = undefined;\n                }\n\n                if (eventAction === 'VWBasic_FormLayer_Load') {\n                    trackingObject.eventInfo.contentLabels = undefined;\n                    trackingObject.eventInfo.contentId = eventName === 'chatbot_open' ? 'chatLayer' : 'confirmationLayer'\n                    trackingObject.eventInfo.sectionName = eventName === 'chatbot_open' ? 'chatLayer' : 'confirmationLayer'\n                }\n\n                if (eventAction === 'VWBasic_FormButton_Click') {\n                    trackingObject.eventInfo.contentId = 'confirmationLayer';\n                    trackingObject.eventInfo.sectionName = 'confirmationLayer';\n                }\n\n            };\n\n            \/\/ Set Environment Data\n            var setEnvironmentData = function (trackingObject) {\n                trackingObject.environment = {};\n                trackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalChatbotD6' : 'VWChatbotD6';\n                trackingObject.environment.language = 'en';\n                trackingObject.environment.country = 'GB';\n            };\n\n            \/\/ Set user data\n            var setUserData = function (trackingObject) {\n                trackingObject.user = {};\n                trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n                trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n                trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n                trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n            };\n\n            \/\/ Set Personalization Data\n            var setPersonalizationData = function (trackingObject) {\n                trackingObject.personalization = {};\n                trackingObject.personalization.status = false;\n                trackingObject.personalization.placeholderId = undefined;\n                trackingObject.personalization.contentId = undefined;\n                trackingObject.personalization.activityId = undefined;\n                trackingObject.personalization.activityName = undefined;\n                trackingObject.personalization.experienceId = undefined;\n                trackingObject.personalization.experienceName = undefined;\n                trackingObject.personalization.offerId = undefined;\n                trackingObject.personalization.offerName = undefined;\n            };\n\n            \/\/ Set Configuration Data\n            var setConfigurationData = function (trackingObject, eventAction) {\n                trackingObject.configuration = {};\n\n                if (eventAction === 'VWBasic_FormLayer_Load' || eventAction === 'VWBasic_FormField_Click' || eventAction === 'VWBasic_FormButton_Click' || eventAction === 'FVWBasic_FormButton_Click') {\n                    trackingObject.configuration.CarlineId = undefined;\n                    trackingObject.configuration.CarlineName = undefined;\n                    trackingObject.configuration.SalesgroupId = undefined;\n                    trackingObject.configuration.SalesgroupName = undefined;\n                    trackingObject.configuration.EquipmentlineName = undefined;\n                }\n\n                if (eventAction === 'VWBasic_FormLayer_Load' || eventAction === 'VWBasic_FormButton_Click' || eventAction === 'FVWBasic_FormButton_Click') {\n                    trackingObject.configuration.PriceRateCurrency = undefined;\n                    trackingObject.configuration.PriceRateType = undefined;\n                    trackingObject.configuration.PriceRateBasic = undefined;\n                    trackingObject.configuration.PriceRateAdditional = undefined;\n                    trackingObject.configuration.PriceRateTotal = undefined;\n                    trackingObject.configuration.PriceTotalCurrency = undefined;\n                    trackingObject.configuration.PriceTotalBasic = undefined;\n                    trackingObject.configuration.PriceTotalAdditional = undefined;\n                    trackingObject.configuration.PriceTotalTotal = undefined;\n                }\n\n                if (eventAction === 'VWBasic_FormButton_Click' || eventAction === 'FVWBasic_FormButton_Click') {\n                    trackingObject.configuration.PriceType = undefined;\n                    trackingObject.configuration.PriceTypeParameter = [];\n                }\n            }\n\n            \/\/ Set Partner Data\n            var setPartnerData = function (trackingObject, eventAction) {\n\n                if (eventAction === 'VWBasic_FormLayer_Load' || eventAction === 'VWBasic_FormField_Click' || eventAction === 'VWBasic_FormButton_Click') {\n                    trackingObject.partner = {}\n                    trackingObject.partner.informationBnr = undefined;\n                    trackingObject.partner.informationName = undefined;\n                    trackingObject.partner.informationDepartment = undefined;\n                    trackingObject.partner.informationZIP = undefined;\n                }\n            }\n\n            \/\/ Set Form Data\n            var setFormData = function (trackingObject, eventAction, eventName) {\n                trackingObject.form = {};\n                if (eventAction === 'VWBasic_FormLayer_Load' || eventAction === 'VWBasic_FormField_Click' || eventAction === 'VWBasic_FormButton_Click' || eventAction === 'FVWBasic_FormButton_Click') {\n                    trackingObject.form.FormType = 'otherform';\n                    trackingObject.form.FormName = 'chat';\n                    trackingObject.form.FormVersion = '1';\n                }\n\n                if (eventAction === 'VWBasic_FormField_Click') {\n                    trackingObject.form.FormFieldName = 'chat field';\n                }\n\n                if (eventAction === 'VWBasic_FormButton_Click' || eventAction === 'FVWBasic_FormButton_Click') {\n                    trackingObject.form.PrefContactChannels = undefined;\n                    trackingObject.form.MarketingConsent = undefined;\n                    trackingObject.form.Questionnaire = undefined;\n                }\n\n                if (eventAction === 'VWBasic_FormLayer_Load' || eventAction === 'VWBasic_FormButton_Click' || eventAction === 'FVWBasic_FormButton_Click') {\n                    trackingObject.form.NewsLetterType = undefined;\n                }\n\n                if (eventAction === 'VWBasic_FormLayer_Load') {\n                    trackingObject.form.FormStart = eventName === 'chatbot_open'\n                }\n            };\n\n            \/\/ Set Link Data\n            var setLinkData = function (trackingObject, label) {\n                trackingObject.link = {\n                    url : 'function(chatbot)',\n                    name : label\n                };\n            }\n\n            \/\/ Set Ownership Data\n            var setOwnershipData = function (trackingObject, eventAction) {\n                trackingObject.ownership = {}\n\n                if (eventAction === 'VWBasic_FormButton_Click' || eventAction === 'FVWBasic_FormButton_Click') {\n                    trackingObject.ownership.vehicle = undefined;\n                }\n            }\n\n            \/\/ On Start Live Chat button click\n            var onNeedHelpButtonClick = function (obj, eventAction, eventName) {\n                trackingObject = {}\n\n                setEventInfo(trackingObject, eventAction, eventName);\n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setLinkData(trackingObject, 'Start Live Chat');\n\n                triggerEvent(trackingObject, eventAction);\n            }\n\n            var onChatbotLoad = function (trackingObject, eventAction, eventName) {\n                trackingObject = {}\n\n                setEventInfo(trackingObject, eventAction, eventName);\n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject)\n                setPersonalizationData(trackingObject)\n                setConfigurationData(trackingObject, eventAction)\n                setPartnerData(trackingObject, eventAction)\n                setFormData(trackingObject, eventAction, eventName)\n\n                triggerEvent(trackingObject, eventAction)\n            }\n\n            var onFormFieldClick = function (trackingObject, eventAction, eventName) {\n                trackingObject = {}\n\n                setEventInfo(trackingObject, eventAction, eventName);\n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject)\n                setPersonalizationData(trackingObject, eventAction)\n                setConfigurationData(trackingObject, eventAction)\n                setPartnerData(trackingObject, eventAction)\n                setFormData(trackingObject, eventAction, eventName)\n\n                triggerEvent(trackingObject, eventAction)\n            }\n\n            var onFormButtonClick = function (obj, eventAction, eventName) {\n                trackingObject = {};\n                var label = obj.attributes.question ? obj.attributes.question : 'Start Live Chat'\n\n                setEventInfo(trackingObject, eventAction, eventName);\n                trackingObject.eventInfo.contentId = label;\n                trackingObject.eventInfo.sectionName = label;\n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject)\n                setPersonalizationData(trackingObject, eventAction)\n                setConfigurationData(trackingObject, eventAction)\n                setPartnerData(trackingObject, eventAction)\n                setFormData(trackingObject, eventAction, eventName)\n                setLinkData(trackingObject, label)\n                setOwnershipData(trackingObject, eventAction)\n\n                triggerEvent(trackingObject, eventAction)\n            }\n\n            var onChatbotCloseButtonClick = function (trackingObject, eventAction, eventName) {\n                trackingObject = {};\n\n                setEventInfo(trackingObject, eventAction, eventName);\n                setEnvironmentData(trackingObject);\n                setUserData(trackingObject)\n                setPersonalizationData(trackingObject, eventAction)\n\n                triggerEvent(trackingObject, eventAction)\n            }\n\n            $dataLayer.on('data-layer-event-fired', function (e) {\n                var obj = window.vwDataLayer.event[window.vwDataLayer.event.length - 1];\n\n                if (!Bootstrapper) {\n                    return;\n                }\n\n                var eventAction = obj.eventInfo.eventAction;\n                var eventName = obj.eventInfo.eventName;\n\n                switch (eventAction) {\n                    case 'VWBasic_Button_Click':\n                        onNeedHelpButtonClick(obj, eventAction, eventName);\n                        break;\n                    case \"VWBasic_FormLayer_Load\":\n                        onChatbotLoad(obj, eventAction, eventName);\n                        break;\n                    case \"VWBasic_FormField_Click\":\n                        onFormFieldClick(obj, eventAction, eventName);\n                        break;\n                    case 'VWBasic_FormButton_Click':\n                        onFormButtonClick(obj, eventAction, eventName);\n                        break;\n                    case 'VWBasic_Close_Click':\n                        onChatbotCloseButtonClick(obj, eventAction, eventName);\n                        faqEventListenerAdded = false;\n                        break;\n                    default:\n                }\n            });\n\n            console.log('Qubit chatbot actions', window.vwDataLayer)\n        });\n\n    })(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25809],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19654,"type":"CustomHtml","name":"fce36c5294cbfe23efe3c5421d07a1d6","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\n\/\/ Page: \/\/fleet\/request-a-test-drive\n\n    (function(jQuery) {\n        jQuery(document).ready(function () {\n\nwindow.VwTagConsole('Live > SD RaTD EVENTS > 2020\/08\/19');\n\n            if (window.setUpMyVWQubitEvent) {\n                return;\n            }\n            window.setUpMyVWQubitEvent = true;\n\n            var $dataLayer = jQuery('#vw-data-layer');\n\n            var addButtonListener = function(selector, eventAction, location) {\n\n                \/\/ Trigger the clicks\n              jQuery(selector).on('click', function (e) {\n                  window.dataLayer.event.push({\n                        eventInfo: {\n                                buttonName: this.innerText,\n                                buttonUrl: this.href,\n                                eventAction: eventAction,\n                                eventName: eventAction,\n                                location: location,\n                                name: this.innerText,\n                                url: this.href\n                        }\n                  });\n\n                  $dataLayer.trigger('data-layer-event-fired');\n                });\n\n            };\n\n            addButtonListener('.editorial-section__container a', 'VWBasic_Link_Click', 'request-a-test-drive');\n\n        })\n    })(jQuery)\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25803],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19655,"type":"CustomHtml","name":"5b7b4be03affe3547a98ff987f058150","parameters":{"customHtml":"<script>\n\n\/\/ Page: \/\/fleet\/request-a-test-drive\n\n(function (jQuery) {\n    jQuery(document).ready(function () {\n\nwindow.VwTagConsole('Live > SD RaTD ACTIONS > 2020\/08\/19');\n\n        \/\/ Select the data layer\n        var $dataLayer = jQuery('#vw-data-layer'),\n            vwdata = window.vwdata || [],\n            initialised = false,\n            contactByEmail = false,\n\n            \/\/ Actions\n            triggerEvent = function (trackingObject, event) {\n                vwdata.push(trackingObject);\n                console.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n            },\n\n            setEventInfo = function (trackingObject, eventAction) {\n                trackingObject.eventInfo = {};\n                trackingObject.eventInfo.eventAction = eventAction;\n                trackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '');\n                trackingObject.eventInfo.pageName = 'fleet : request a test drive';\n                trackingObject.eventInfo.pageCategory = 'fleet';\n                trackingObject.eventInfo.brand = 'passenger'\n            },\n\n            setUserBrowserData = function (trackingObject) {\n\n                trackingObject.user = trackingObject.user || {};\n                trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n                trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n                trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n                trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n            },\n\n            setEnvironmentData = function (trackingObject) {\n                trackingObject.environment = {};\n                trackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalUKFleetTestdriveD6' : 'VWUKFleetTestdriveD6';\n                trackingObject.environment.language = 'en';\n                trackingObject.environment.country = 'GB';\n            },\n\n            setFormData = function (trackingObject) {\n                trackingObject.form = {};\n                trackingObject.form.FormType = 'testdrive';\n                trackingObject.form.FormName = 'requestATestDrive';\n                trackingObject.form.FormVersion = '1';\n            },\n\n            setFormQuestionnaire = function(trackingObject, obj) {\n                trackingObject.form.questionnaire = undefined;\n            },\n\n\n            setFormAdditionalData = function (trackingObject) {\n                trackingObject.form.MarketingConsent = [{\n                    'email': contactByEmail\n                }];\n                trackingObject.form.NewsletterType = undefined;\n                trackingObject.form.PrefContactChannels = contactByEmail ? 'email' : undefined;\n            },\n\n            setPersonalizationData = function (trackingObject) {\n                trackingObject.personalization = {\n                    'status': false,\n                    'placeholderId': undefined,\n                    'contentId': undefined,\n                    'activityId': undefined,\n                    'activityName': undefined,\n                    'experienceId': undefined,\n                    'experienceName': undefined,\n                    'offerName': undefined,\n                    'offerId': undefined\n                };\n            },\n\n            setLinkData = function (trackingObject) {\n                trackingObject.link = {};\n                trackingObject.link.url = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n                trackingObject.link.name = 'Submit';\n            },\n\n            setBasicLinkData = function (trackingObject, event) {\n                trackingObject.link = {};\n                trackingObject.link.url = event.eventInfo.url;\n                trackingObject.link.name = event.eventInfo.name;\n            },\n\n            setPartnerData = function (trackingObject, obj) {\n                trackingObject.partner = {};\n                trackingObject.partner.informationBnr = obj.eventInfo.dealerNumber ? obj.eventInfo.dealerNumber : undefined;\n                trackingObject.partner.informationName = obj.eventInfo.dealerName ? obj.eventInfo.dealerName : undefined;\n                trackingObject.partner.informationDepartment = undefined;\n                trackingObject.partner.informationZIP = undefined;\n            },\n\n            setConfigurationData = function (trackingObject) {\n                trackingObject.configuration = {\n                    'CarlineId': undefined,\n                    'CarlineName': undefined,\n                    'SalesgroupId': undefined,\n                    'SalesgroupName': undefined,\n                    'EquipmentlineName': undefined\n                };\n            },\n\n            setConfigurationPrice = function (trackingObject) {\n                trackingObject.configuration.PriceTypeParameter = undefined;\n                trackingObject.configuration.PriceType = undefined;\n                trackingObject.configuration.PriceRateCurrency = undefined;\n                trackingObject.configuration.PriceRateType = undefined;\n                trackingObject.configuration.PriceRateBasic = undefined;\n                trackingObject.configuration.PriceRateAdditional = undefined;\n                trackingObject.configuration.PriceRateTotal = undefined;\n                trackingObject.configuration.PriceTotalCurrency = undefined;\n                trackingObject.configuration.PriceTotalBasic = undefined;\n                trackingObject.configuration.PriceTotalAdditional = undefined;\n                trackingObject.configuration.PriceTotalTotal = undefined;\n            },\n\n            setEmailPreference = function () {\n                var checked = jQuery('.input-selector[checked]');\n                if (checked.length > 0) {\n                    var label = checked.text().toLowerCase();\n                    try {\n                        contactByEmail = label.trim() === 'yes';\n                    } catch (e) {\n                        \/\/ cant trim off the whitespace\n                    }\n                }\n            },\n\n            triggerPageLoad = function (obj) {\n                if (!initialised) {\n                    initialised = true;\n                    formPageload(obj);\n                }\n            },\n\n            formPageload = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_Form_Pageload');\n                trackingObject.eventInfo.contentLabels = undefined;\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setFormData(trackingObject);\n                trackingObject.form.FormStart = true;\n\n                triggerEvent(trackingObject, 'VWBasic_Form_Pageload');\n\n            },\n\n            formCtaClick = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_FormCTA_Click');\n                trackingObject.eventInfo.contentId = 'Submit';\n                trackingObject.eventInfo.sectionName = 'fleet';\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                trackingObject.configuration.CarlineName = obj.attributes.carlinename\n                setConfigurationPrice(trackingObject);\n                setLinkData(trackingObject);\n\n                setEmailPreference();\n                setFormData(trackingObject);\n                setFormQuestionnaire(trackingObject, obj)\n                setFormAdditionalData(trackingObject);\n                setPartnerData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_FormCTA_Click');\n\n            },\n\n            basicLinkClick = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_Link_Click', obj);\n                trackingObject.eventInfo.pageCategory = 'fleet';\n                trackingObject.eventInfo.sectionName = 'fleet';\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setBasicLinkData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_Link_Click');\n\n            },\n\n            formSuccess = function (obj) {\n                console.log(\"SUCCESS\", obj)\n                var trackingObject = {};\n                var timestamp = (Date.now() + Math.random()) * 100000;\n\n                setEventInfo(trackingObject, 'VWBasic_FormSubmissionSuccessMessage_Load');\n                trackingObject.eventInfo.contentId = undefined;\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                trackingObject.configuration.CarlineName = obj.attributes.carlinename\n                setConfigurationPrice(trackingObject);\n                setFormData(trackingObject);\n                setFormQuestionnaire(trackingObject, obj)\n                setFormAdditionalData(trackingObject);\n                trackingObject.form.LeadID = timestamp.toString();\n                setPartnerData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_FormSubmissionSuccessMessage_Load');\n\n            };\n\n            \n\n        \/\/ Main Listener\n        $dataLayer.on('data-layer-event-fired', function (e) {\n\n            var obj = dataLayer.event[dataLayer.event.length - 1];\n\n            if (!Bootstrapper) {\n                return;\n            }\n\n            switch (obj.eventInfo.eventAction) {\n                case 'VWBasic_Form_Pageload':\n                    triggerPageLoad(obj);\n                    break;\n\n                case 'VWBasic_FormCTA_Click':\n                    formCtaClick(obj);\n                    break;\n\n                case 'VWBasic_FormSubmissionSuccessMessage_Load':\n                    formSuccess(obj);\n                    break;\n\n                case 'VWBasic_Link_Click':\n                    basicLinkClick(obj);\n                    break;\n\n                default:\n                    break;\n            }\n        });\n\n        \/\/ sometimes Qubit loads in late and we miss the inital event, in that case\n        \/\/ fire it now\n        if (dataLayer.event.length !== 0) {\n            var obj = dataLayer.event[dataLayer.event.length - 1];\n            triggerPageLoad(obj);\n        };\n\n    })\n})(jQuery)\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25803],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19656,"type":"CustomHtml","name":"ad0d53245ccc045b2320f8e1624d0139","parameters":{"customHtml":"<script type=\"text\/javascript\">\n    (function(jQuery) {\n        jQuery(document).ready(function () {\n\nwindow.VwTagConsole('Live > SD Flt Contact Us EVENTS > 2020\/08\/19');\n\n            if (window.setUpMyVWQubitEvent) {\n                return;\n            }\n            window.setUpMyVWQubitEvent = true;\n\n            var $dataLayer = jQuery('#vw-data-layer');\n\n            var addButtonListener = function(selector, eventAction, location) {\n\n                \/\/ Trigger the clicks\n              jQuery(selector).on('click', function (e) {\n                  window.dataLayer.event.push({\n                        eventInfo: {\n                                buttonName: this.innerText,\n                                buttonUrl: this.href,\n                                eventAction: eventAction,\n                                eventName: eventAction,\n                                location: location,\n                                name: this.innerText,\n                                url: this.href\n                        }\n                  });\n\n                  $dataLayer.trigger('data-layer-event-fired');\n                });\n\n            };\n\n            addButtonListener('.editorial-section__container a', 'VWBasic_Link_Click', 'request-a-test-drive');\n\n        })\n    })(jQuery)\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25804],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19657,"type":"CustomHtml","name":"ed0649f14a5b365e1d0d101e3a29492c","parameters":{"customHtml":"<script>\n\n\/\/ Page: \/\/fleet\/contact-us\n\n(function (jQuery) {\n    jQuery(document).ready(function () {\n\nwindow.VwTagConsole('Live > SD Flt Contact Us ACTION > 2020\/08\/19');\n\n        \/\/ Select the data layer\n        var $dataLayer = jQuery('#vw-data-layer'),\n            vwdata = window.vwdata || [],\n            initialised = false,\n            contactByEmail = false,\n\n            \/\/ Actions\n            triggerEvent = function (trackingObject, event) {\n                vwdata.push(trackingObject);\n                console.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n            },\n\n            setEventInfo = function (trackingObject, eventAction) {\n                trackingObject.eventInfo = {};\n                trackingObject.eventInfo.eventAction = eventAction;\n                trackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '');\n                trackingObject.eventInfo.pageName = 'fleet : contact us';\n                trackingObject.eventInfo.pageCategory = 'fleet';\n                trackingObject.eventInfo.brand = 'passenger'\n            },\n\n            setUserBrowserData = function (trackingObject) {\n\n                trackingObject.user = trackingObject.user || {};\n                trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n                trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n                trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n                trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n            },\n\n            setEnvironmentData = function (trackingObject) {\n                trackingObject.environment = {};\n                trackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalUKFleetContactUsD6' : 'VWUKFleetContactUsD6';\n                trackingObject.environment.language = 'en';\n                trackingObject.environment.country = 'GB';\n            },\n\n            setFormData = function (trackingObject) {\n                trackingObject.form = {};\n                trackingObject.form.FormType = 'contact';\n                trackingObject.form.FormName = 'fleetContactUs';\n                trackingObject.form.FormVersion = '1';\n            },\n\n            setFormQuestionnaire = function(trackingObject, obj) {\n                trackingObject.form.questionnaire = {\n                    id: \"fleetContactUs\",\n                    version: \"1\",\n                    content: [\n                        {\n                            \"id\": \"1\",\n                            \"question\": \"nature of enquiry\",\n                             \"answer\": [{\n                                \"type\": \"string\",\n                                \"value\": obj.attributes.enquiry\n                             }]\n                        }\n                    ]\n                }\n            },\n\n            setFormAdditionalData = function (trackingObject) {\n                trackingObject.form.MarketingConsent = [{\n                    'email': contactByEmail\n                }];\n                trackingObject.form.NewsletterType = undefined;\n                trackingObject.form.PrefContactChannels = contactByEmail ? 'email' : undefined;\n            },\n\n            setPersonalizationData = function (trackingObject) {\n                trackingObject.personalization = {\n                    'status': false,\n                    'placeholderId': undefined,\n                    'contentId': undefined,\n                    'activityId': undefined,\n                    'activityName': undefined,\n                    'experienceId': undefined,\n                    'experienceName': undefined,\n                    'offerName': undefined,\n                    'offerId': undefined\n                };\n            },\n\n            setLinkData = function (trackingObject) {\n                trackingObject.link = {};\n                trackingObject.link.url = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n                trackingObject.link.name = 'Submit';\n            },\n\n            setBasicLinkData = function (trackingObject, event) {\n                trackingObject.link = {};\n                trackingObject.link.url = event.eventInfo.url;\n                trackingObject.link.name = event.eventInfo.name;\n            },\n\n            setPartnerData = function (trackingObject, obj) {\n                trackingObject.partner = {};\n                trackingObject.partner.informationBnr = obj.eventInfo.dealerNumber ? obj.eventInfo.dealerNumber : undefined;\n                trackingObject.partner.informationName = obj.eventInfo.dealerName ? obj.eventInfo.dealerName : undefined;\n                trackingObject.partner.informationDepartment = undefined;\n                trackingObject.partner.informationZIP = undefined;\n            },\n\n            setConfigurationData = function (trackingObject) {\n                trackingObject.configuration = {\n                    'CarlineId': undefined,\n                    'CarlineName': undefined,\n                    'SalesgroupId': undefined,\n                    'SalesgroupName': undefined,\n                    'EquipmentlineName': undefined\n                };\n            },\n\n            setConfigurationPrice = function (trackingObject) {\n                trackingObject.configuration.PriceTypeParameter = undefined;\n                trackingObject.configuration.PriceType = undefined;\n                trackingObject.configuration.PriceRateCurrency = undefined;\n                trackingObject.configuration.PriceRateType = undefined;\n                trackingObject.configuration.PriceRateBasic = undefined;\n                trackingObject.configuration.PriceRateAdditional = undefined;\n                trackingObject.configuration.PriceRateTotal = undefined;\n                trackingObject.configuration.PriceTotalCurrency = undefined;\n                trackingObject.configuration.PriceTotalBasic = undefined;\n                trackingObject.configuration.PriceTotalAdditional = undefined;\n                trackingObject.configuration.PriceTotalTotal = undefined;\n            },\n\n            setEmailPreference = function () {\n                var checked = jQuery('.input-selector[checked]');\n                if (checked.length > 0) {\n                    var label = checked.text().toLowerCase();\n                    try {\n                        contactByEmail = label.trim() === 'yes';\n                    } catch (e) {\n                        \/\/ cant trim off the whitespace\n                    }\n                }\n            },\n\n            triggerPageLoad = function (obj) {\n                if (!initialised) {\n                    initialised = true;\n                    formPageload(obj);\n                }\n            },\n\n            formPageload = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_Form_Pageload');\n                trackingObject.eventInfo.contentLabels = undefined;\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setFormData(trackingObject);\n                trackingObject.form.FormStart = true;\n\n                triggerEvent(trackingObject, 'VWBasic_Form_Pageload');\n\n            },\n\n            formCtaClick = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_FormCTA_Click');\n                trackingObject.eventInfo.contentId = 'Submit';\n                trackingObject.eventInfo.sectionName = 'fleet';\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setLinkData(trackingObject);\n\n                setEmailPreference();\n                setFormData(trackingObject);\n                setFormQuestionnaire(trackingObject, obj)\n                setFormAdditionalData(trackingObject);\n                setPartnerData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_FormCTA_Click');\n\n            },\n\n            basicLinkClick = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_Link_Click', obj);\n                trackingObject.eventInfo.pageCategory = 'fleet';\n                trackingObject.eventInfo.sectionName = 'fleet';\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setBasicLinkData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_Link_Click');\n\n            },\n\n            formSuccess = function (obj) {\n\n                var trackingObject = {};\n                var timestamp = (Date.now() + Math.random()) * 100000;\n\n                setEventInfo(trackingObject, 'VWBasic_FormSubmissionSuccessMessage_Load');\n                trackingObject.eventInfo.contentId = undefined;\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setFormData(trackingObject);\n                setFormQuestionnaire(trackingObject, obj)\n                setFormAdditionalData(trackingObject);\n                trackingObject.form.LeadID = timestamp.toString();\n                setPartnerData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_FormSubmissionSuccessMessage_Load');\n\n            };\n\n            \n\n        \/\/ Main Listener\n        $dataLayer.on('data-layer-event-fired', function (e) {\n\n            var obj = dataLayer.event[dataLayer.event.length - 1];\n\n            if (!Bootstrapper) {\n                return;\n            }\n\n            switch (obj.eventInfo.eventAction) {\n                case 'VWBasic_Form_Pageload':\n                    triggerPageLoad(obj);\n                    break;\n\n                case 'VWBasic_FormCTA_Click':\n                    formCtaClick(obj);\n                    break;\n\n                case 'VWBasic_FormSubmissionSuccessMessage_Load':\n                    formSuccess(obj);\n                    break;\n\n                case 'VWBasic_Link_Click':\n                    basicLinkClick(obj);\n                    break;\n\n                default:\n                    break;\n            }\n        });\n\n        \/\/ sometimes Qubit loads in late and we miss the inital event, in that case\n        \/\/ fire it now\n        if (dataLayer.event.length !== 0) {\n            var obj = dataLayer.event[dataLayer.event.length - 1];\n            triggerPageLoad(obj);\n        };\n\n    })\n})(jQuery)\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25804],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19658,"type":"CustomHtml","name":"a1ed91c838dd08da16a4752cb7ef9deb","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD WLC EVENTS > 2019\/07\/23');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar url = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\n\n\t\t\t\/\/ VWBasic_Pageload\n\n\t\t\tsetTimeout(function() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_Pageload',\n\t\t\t\t\teventAction: 'VWBasic_Pageload',\n\t\t\t\t\tpageId: url,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c067-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}, 100);\n\n\t\t});\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25806,25805],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19659,"type":"CustomHtml","name":"74910c5dab1782bb500a5ecf12ac4c03","parameters":{"customHtml":"<script>\n\n\/\/ Page: \/\/fleet\/calculators\/whole-life-costs\n\n\t(function(jQuery) {\n\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD WLC ACTIONS > 2019\/07\/23');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar vwdata = window.vwdata = window.vwdata || [];\n\n\n\t\t\t\/\/ Set data\n\n\t\t\tfunction setEventInfo(trackingObject) {\n\n\t\t\t\ttrackingObject.eventInfo = {};\n\t\t\t\ttrackingObject.eventInfo.pageId = window.location.href.split('?')[0].replace('https:\/\/', '').replace('http:\/\/', '');;\n\t\t\t\ttrackingObject.eventInfo.pageName = 'fleet : calculators : whole-life-costs';\n\t\t\t\ttrackingObject.eventInfo.pageCategory = 'fleet'\n\n\t\t\t}\n\n\t\t\tfunction setEnvironmentData(trackingObject) {\n\n\t\t\t\ttrackingObject.environment = {};\n\t\t\t\ttrackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalWholeLifeCostsD6' : 'VWWholeLifeCostsD6';\n\t\t\t\ttrackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n\n\t\t\t};\n\n\t\t\tfunction setUserBrowserData(trackingObject) {\n\n\t\t\t\ttrackingObject.user = {};\n\t\t\t\ttrackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n\t\t\t\ttrackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n\t\t\t};\n\n\t\t\tfunction setPersonalizationData(trackingObject) {\n\n\t\t\t\ttrackingObject.personalization = {};\n\t\t\t\ttrackingObject.personalization.status = false;\n\t\t\t\ttrackingObject.personalization.placeholderId = undefined;\n\t\t\t\ttrackingObject.personalization.contentId = undefined;\n\t\t\t\ttrackingObject.personalization.activityId = undefined;\n\t\t\t\ttrackingObject.personalization.activityName = undefined;\n\t\t\t\ttrackingObject.personalization.experienceId = undefined;\n\t\t\t\ttrackingObject.personalization.experienceName = undefined;\n\t\t\t\ttrackingObject.personalization.offerName = undefined;\n\t\t\t\ttrackingObject.personalization.offerId = undefined;\n\n\t\t\t};\n\n\t\t\tfunction setConfigurationData(trackingObject, obj) {\n\n\t\t\t\tvar modelId, modelName;\n\n\t\t\t\tif (obj.eventInfo.attributes && obj.eventInfo.attributes.model) {\n\n\t\t\t\t\t\/\/ Use the model id from the event obj to find a button with the same id and get its title text for the name\n\t\t\t\t\tmodelId = obj.eventInfo.attributes.model;\n\t\t\t\t\tmodelName = jQuery('.fleet-tools-car-selector__button[data-id=\"' + modelId + '\"]').first().find('.fleet-tools-car-selector__car-title').text();\n\n\t\t\t\t}\n\n\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\ttrackingObject.configuration.CarlineId = modelId;\n\t\t\t\ttrackingObject.configuration.CarlineName = modelName;\n\n\t\t\t};\n\n\n\t\t\t\/\/ Handlers\n\n\t\t\tfunction triggerEvent(trackingObject, event) {\n\n\t\t\t\tvwdata.push(trackingObject);\n\t\t\t\tconsole.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n\n\t\t\t};\n\n\t\t\tfunction onPageLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_Pageload';\n\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\t\t\t\ttrackingObject.eventInfo.templateType = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\ttrackingObject.personalization.aemRessourcePath = undefined;\n\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\t\t\t\ttrackingObject.configuration.SalesgroupId = undefined;\n\t\t\t\ttrackingObject.configuration.SalesgroupName = undefined;\n\t\t\t\ttrackingObject.configuration.EquipmentlineName = undefined;\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onCarlineSelectClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_CarlineSelect_Click';\n\t\t\t\ttrackingObject.eventInfo.contentId = obj.eventInfo.attributes.model;\n\t\t\t\ttrackingObject.eventInfo.sectionName = 'fleet-tools-car-selector';\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\n\t\t\t\/\/ Main listener\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase 'VWBasic_Pageload':\n\t\t\t\t\t\tonPageLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif (obj.eventInfo.info.eventAction === 'modelSelection') { \/\/ Uses different structure\n\t\t\t\t\t\t\tonCarlineSelectClick(obj);\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25806,25805],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19660,"type":"CustomHtml","name":"090263ac0c5451e9d1fd5ab5103672fa","parameters":{"customHtml":"<script>\n(function(jQuery) {\n\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD FC R Form ACTIONS > 2019\/07\/01');\n\n        var init = function() {\n          var $dataLayer = jQuery('#vw-data-layer')\n          var vwdata = (window.vwdata = window.vwdata || [])\n\n          \/\/ Trigger Event\n          var triggerEvent = function(trackingObject, eventAction) {\n            vwdata.push(trackingObject)\n            console.log('%c SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', 'background: #222; color: #bada55', eventAction, ' trackingObject:', trackingObject)\n          }\n\n          var setEventInfo = function(trackingObject, eventAction) {\n              trackingObject.eventInfo = {}\n              trackingObject.eventInfo.eventAction = eventAction\n              trackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '').split('#')[0].split('?')[0]\n              trackingObject.eventInfo.pageName = 'offers-and-finance : finance-calculator : retailers'\n              trackingObject.eventInfo.pageCategory = 'car-finance'\n              trackingObject.eventInfo.templateType = undefined\n              trackingObject.eventInfo.sectionName = undefined\n              trackingObject.eventInfo.brand = 'passenger-cars'\n            },\n\n            setUserBrowserData = function(trackingObject) {\n              trackingObject.user = trackingObject.user || {}\n              trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n              trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n              trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n              trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n              trackingObject.user.loginStatus = undefined\n            },\n\n            setEnvironmentData = function(trackingObject) {\n              trackingObject.environment = {}\n              trackingObject.environment.applicationId = window.location.href.indexOf('staging.vw-cv-vans.co.uk') > -1\n                  ? 'VWLocalFinanceCalcD6'\n                  : 'VWFinanceCalcD6'\n              trackingObject.environment.language = 'en'\n              trackingObject.environment.country = 'GB'\n            },\n\n            setFormData = function(trackingObject) {\n              trackingObject.form = {}\n              trackingObject.form.FormType = 'contact'\n              trackingObject.form.FormName = 'contact retailer'\n              trackingObject.form.FormVersion = '1'\n            },\n\n            setErrormData = function(trackingObject, code, message) {\n              trackingObject.error = {}\n              trackingObject.error.code = code\n              trackingObject.error.message = message\n              trackingObject.error.referringUrl = trackingObject.eventInfo.pageId\n            },\n\n            setFormAdditionalData = function(trackingObject, obj) {\n              const inputEmail = jQuery('input[name=\"optinEmail\"][value=\"true\"]')\n              const email = inputEmail.length > 0 ? inputEmail[0].checked : false\n              const inputPhone = jQuery('input[name=\"optinPhone\"][value=\"true\"]')\n              const phone = inputPhone.length > 0 ? inputPhone[0].checked : false\n\n              trackingObject.form.MarketingConsent = []\n              trackingObject.form.NewsletterType = undefined\n              trackingObject.form.PrefContactChannels = undefined\n              if (email) {\n                  trackingObject.form.MarketingConsent.push({ email: true })\n                  trackingObject.form.PrefContactChannels = 'email'\n              }\n              if (phone) {\n                  trackingObject.form.MarketingConsent.push({ phone: true })\n                  trackingObject.form.PrefContactChannels = 'phone'\n              }\n              if (email && phone) {\n                  trackingObject.form.PrefContactChannels = 'email, phone'\n              }\n            },\n\n            setPersonalizationData = function(trackingObject) {\n              trackingObject.personalization = {\n                status: false,\n                moduleId: undefined,\n                personalizable: undefined,\n                placeholderId: undefined,\n                contentId: undefined,\n                activityId: undefined,\n                activityName: undefined,\n                experienceId: undefined,\n                experienceName: undefined,\n                offerName: undefined,\n                offerId: undefined\n              }\n            },\n\n            setLinkData = function(trackingObject, obj) {\n              trackingObject.link = {}\n              trackingObject.link.url = obj.attributes.url ? obj.attributes.url : window.location.href.replace('http:\/\/', '').replace('https:\/\/', '')\n              trackingObject.link.name = obj.attributes.label\n            },\n\n            setPartnerData = function(trackingObject) {\n              trackingObject.partner = {}\n              trackingObject.partner.informationBnr = undefined\n              trackingObject.partner.informationName = undefined\n              trackingObject.partner.informationDepartment = undefined\n              trackingObject.partner.informationZIP = undefined\n            },\n\n            setOwnershipData = function(trackingObject) {\n              trackingObject.ownership = {}\n              trackingObject.ownership.vehicle = [\n                {\n                  manufacturer: undefined,\n                  carlineName: undefined,\n                  model: undefined,\n                  modelYear: undefined,\n                  derivative: undefined,\n                  registrationDate: undefined,\n                  bodyType: undefined,\n                  fuelType: undefined,\n                  transmission: undefined,\n                  engineSize: undefined,\n                  engineSizeUnit: undefined,\n                  mileage: undefined,\n                  mileageUnit: undefined,\n                  currency: 'GBP',\n                  estimatedValueExcellent: undefined,\n                  estimatedValueGood: undefined,\n                  estimatedValueAverage: undefined,\n                  additionalAttributes: [],\n                  leaseCompany: 'TribalWorldwide',\n                  vehicleVerification: undefined,\n                  vehicleId: undefined\n                }\n              ]\n            },\n\n            setConfigurationData = function(trackingObject, obj) {\n              trackingObject.configuration = {\n                BodyTypeName: undefined,\n                CarlineId: undefined,\n                CarlineName: undefined,\n                SalesgroupId: undefined,\n                SalesgroupName: undefined,\n                EquipmentlineName: undefined,\n                ModelId: undefined,\n                ModelTrimFeatures: undefined,\n                ModelName: undefined\n              }\n            },\n\n            setConfigurationPrice = function(trackingObject) {\n              trackingObject.configuration.PriceTypeParameter = undefined\n              trackingObject.configuration.PriceType = undefined\n              trackingObject.configuration.PriceRateCurrency = undefined\n              trackingObject.configuration.PriceRateType = undefined\n              trackingObject.configuration.PriceRateBasic = undefined\n              trackingObject.configuration.PriceRateAdditional = undefined\n              trackingObject.configuration.PriceRateTotal = undefined\n              trackingObject.configuration.PriceTotalCurrency = undefined\n              trackingObject.configuration.PriceTotalBasic = undefined\n              trackingObject.configuration.PriceTotalAdditional = undefined\n              trackingObject.configuration.PriceTotalTotal = undefined\n            },\n\n            setProcessData = function(trackingObject, step, number) {\n              trackingObject.process = {}\n              trackingObject.process.StepName = step\n              trackingObject.process.StepNumber = number\n            },\n\n            setFilter = function (trackingObject) {\n                trackingObject.filter = {};\n                trackingObject.filter.filterlist = [\n                    {\n                        'type': 'single_value',\n                        'name': undefined,\n                        'values': undefined\n                    }\n                ];\n                trackingObject.filter.numberOfResults = undefined\n\n            },\n\n            ctaClick = function(obj) {\n              var trackingObject = {}\n\n              setEventInfo(trackingObject, 'VWBasic_VehicleFilterSearchResultButton_Click')\n              trackingObject.eventInfo.contentId = obj.attributes.label\n              setEnvironmentData(trackingObject, obj)\n              setUserBrowserData(trackingObject)\n              setPersonalizationData(trackingObject)\n              setConfigurationData(trackingObject, obj)\n              setConfigurationPrice(trackingObject)\n              trackingObject.configuration.vehicleidentification = 0\n              setLinkData(trackingObject, obj)\n              setPartnerData(trackingObject)\n              trackingObject.partner.informationDistance = undefined\n              setFilter(trackingObject)\n              setFormData(trackingObject)\n              setFormAdditionalData(trackingObject, obj)\n\n              triggerEvent(trackingObject, 'VWBasic_VehicleFilterSearchResultButton_Click')\n            },\n\n            formPageload = function(obj) {\n              var trackingObject = {}\n\n              setEventInfo(trackingObject, 'VWBasic_VehicleForm_Load')\n              trackingObject.eventInfo.contentId = undefined\n              trackingObject.eventInfo.contentLabels = undefined\n              setEnvironmentData(trackingObject, obj)\n              setUserBrowserData(trackingObject)\n              setPersonalizationData(trackingObject)\n              setConfigurationData(trackingObject, obj)\n              setConfigurationPrice(trackingObject)\n              setPartnerData(trackingObject)\n              setFormData(trackingObject)\n              trackingObject.form.FormStart = true\n              triggerEvent(trackingObject, 'VWBasic_VehicleForm_Load')\n            },\n\n            submitError = function(obj, code, message, step, number) {\n              var trackingObject = {}\n              var timestamp = (Date.now() + Math.random()) * 100000\n              console.log('Qubit FC do submitError', obj, code, message, step, number)\n\n              setEventInfo(trackingObject, 'VWBasic_ErrorMessage_Load')\n              setEnvironmentData(trackingObject, obj)\n              trackingObject.environment.featureAppId = undefined\n              trackingObject.environment.featureAppIdAppVersion = undefined\n              setUserBrowserData(trackingObject)\n              setPersonalizationData(trackingObject)\n              setFormData(trackingObject)\n              setProcessData(trackingObject, step, number)\n              setErrormData(trackingObject, code, message)\n\n              triggerEvent(trackingObject, 'VWBasic_ErrorMessage_Load')\n            },\n\n            formSuccess = function(obj) {\n              var trackingObject = {}\n              var timestamp = (Date.now() + Math.random()) * 100000\n\n              setEventInfo(trackingObject, 'VWBasic_VehicleFormSubmissionSuccessMessage_Load')\n              delete trackingObject.eventInfo.sectionName\n              trackingObject.eventInfo.contentId = undefined\n              setEnvironmentData(trackingObject, obj)\n              setUserBrowserData(trackingObject)\n              setPersonalizationData(trackingObject)\n              setConfigurationData(trackingObject, obj)\n              setConfigurationPrice(trackingObject)\n              trackingObject.configuration.vehicleidentification = 0\n              setPartnerData(trackingObject)\n              trackingObject.partner.informationDistance = undefined\n              setFormData(trackingObject)\n              setFormAdditionalData(trackingObject, obj)\n\n              triggerEvent(trackingObject, 'VWBasic_VehicleFormSubmissionSuccessMessage_Load')\n            };\n\n          \/\/ Main Listener\n          $dataLayer.on('data-layer-event-fired', function(e) {\n\n            var obj = window.dataLayer.event[window.dataLayer.event.length - 1]\n\n            switch (obj.eventInfo.eventAction) {\n\n              case 'FCRetailerFormLoad':\n                  formPageload(obj)\n                break\n\n              case 'FCRetailerFormSubmitClick':\n                  ctaClick(obj)\n                break\n\n              case 'FCRetailerFormSuccess':\n                formSuccess(obj)\n                break\n\n              case 'FCRetailerFormError':\n                submitError(obj, '1', obj.attributes.errors, 'FC retailer form', '0')\n                break\n\n              case 'FCRetailerFormFailed':\n                submitError(obj, '2', 'Form submittion failed', 'FC retailer form', '1')\n              default:\n\n                break\n            }\n\n          });\n        }\n\n        if (!window.qubitFCRetailerForm) {\n          init();\n        }\n        window.qubitFCRetailerForm = true;\n\n    });\n})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25799,25817],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19661,"type":"CustomHtml","name":"559a66d0d19ca83582d7ce9cbed9a613","parameters":{"customHtml":"<script>\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole('Live > SD New Backbone MyPerfect > 2020\/11\/16');\n\n      if (window.setUpMyPerfectQubitAction) {\n        return;\n      }\n      window.setUpMyPerfectQubitAction = true;\n\n      \/\/ Set up data\n      var pageNumbers = [\n        '',\n        'modelselect',\n        'basics',\n        'musthaves\/intro\/',\n        'choices',\n        'shortlist',\n        'range',\n        'detail',\n      ];\n      var stepNames = [\n        'Home',\n        'Models',\n        'The Basics',\n        'Must haves',\n        'Car features',\n        'Shortlist',\n        'The Range',\n        'Full Details',\n      ];\n      var currentProcess = {};\n      var filterListStore = [];\n      var $dataLayer = document.getElementById('vw-data-layer');\n\n      if (!window.vwDataLayer) {\n        window.vwDataLayer = {\n          event: [],\n        };\n      } else if (!window.vwDataLayer.event) {\n        window.vwDataLayer.event = [];\n      }\n\n      var vwdata = window.vwdata || [],\n        initialised = false,\n        contactByEmail = false,\n        \/\/ Actions\n        triggerEvent = function (trackingObject, event) {\n          vwdata.push(trackingObject);\n          console.log(\n            '%c SD Bootstrapper (' +\n              Bootstrapper.ensightenOptions.publishPath +\n              ') push event:',\n            'background: #222; color: #bada55',\n            trackingObject.eventInfo.eventAction,\n            ' trackingObject:',\n            trackingObject\n          );\n        },\n        \/\/ utils\n        getPageName = function (page) {\n          for (var i = 0; i < pageNumbers.length; i++) {\n            if (pageNumbers[i] === page) {\n              return stepNames[i];\n            }\n          }\n          return stepNames[0];\n        },\n        getStepNumber = function (page) {\n          for (var i = 0; i < pageNumbers.length; i++) {\n            if (pageNumbers[i] === page) {\n              return i;\n            }\n          }\n          return 0;\n        },\n        \/\/ Returns a canonical car model name\n        getCarlineName = function (str) {\n          var carlineName = str;\n\n          \/\/ Shorter similar names must come first, e.g. 'T-Roc' before 'T-Roc Cabriolet'\n          var models = [\n            'Arteon',\n            'Arteon Shooting Brake',\n            'Golf',\n            'Golf Estate',\n            'ID.3',\n            'ID.4',\n            'Passat Estate',\n            'Passat Saloon',\n            'Polo',\n            'Sharan',\n            'T-Cross',\n            'T-Roc',\n            'T-Roc Cabriolet',\n            'Tiguan',\n            'Tiguan Allspace',\n            'Touareg',\n            'Touran',\n            'up!',\n            'e-up!',\n          ];\n\n          for (var i = 0; i < models.length; i++) {\n            if (str.toLowerCase().indexOf(models[i].toLowerCase()) !== -1) {\n              carlineName = models[i];\n            }\n          }\n\n          if (!carlineName) {\n            carlineName = undefined; \/\/ vs null\n          }\n\n          return carlineName;\n        },\n        setEventInfo = function (trackingObject, action) {\n          trackingObject.eventInfo = {};\n          trackingObject.eventInfo.eventAction = action;\n          trackingObject.eventInfo.pageId =\n            window.location.hostname + window.location.pathname;\n          trackingObject.eventInfo.pageName = 'perfect';\n          trackingObject.eventInfo.pageCategory = 'New cars';\n          trackingObject.eventInfo.templateType = undefined;\n        },\n        setUserData = function (trackingObject) {\n          trackingObject.user = {};\n          trackingObject.user.browserResolutionHeight = Math.max(\n            document.documentElement.clientWidth,\n            window.innerWidth || 0\n          ).toString();\n          trackingObject.user.browserResolutionWidth = Math.max(\n            document.documentElement.clientHeight,\n            window.innerHeight || 0\n          ).toString();\n          trackingObject.user.browserResolutionBreakpoint = document.getElementById(\n            'page'\n          )\n            ? document.getElementById('page').offsetWidth.toString()\n            : undefined;\n          trackingObject.user.browserResolutionOrientation =\n            window.innerHeight < window.innerWidth ? 'h' : 'v';\n        },\n        setEnvironmentData = function (trackingObject) {\n          trackingObject.environment = {};\n          trackingObject.environment.applicationId =\n            window.location.href.indexOf('vwcloud.co.uk') > -1\n              ? 'VWLocalMyPerfectD6'\n              : 'VWMyPerfectD6';\n          trackingObject.environment.language = 'en';\n          trackingObject.environment.country = 'GB';\n        },\n        setPersonalizationData = function (trackingObject) {\n          trackingObject.personalization = {};\n          trackingObject.personalization.status = false;\n          trackingObject.personalization.placeholderId = undefined;\n          trackingObject.personalization.contentId = undefined;\n          trackingObject.personalization.activityId = undefined;\n          trackingObject.personalization.activityName = undefined;\n          trackingObject.personalization.experienceId = undefined;\n          trackingObject.personalization.experienceName = undefined;\n          trackingObject.personalization.offerId = undefined;\n          trackingObject.personalization.offerName = undefined;\n        },\n        setPartnerData = function (trackingObject) {\n          trackingObject.partner = {};\n          trackingObject.partner.informationBnr = undefined;\n          trackingObject.partner.informationName = undefined;\n          trackingObject.partner.informationDepartment = undefined;\n          trackingObject.partner.informationZIP = undefined;\n        },\n        setProcessData = function (trackingObject, page) {\n          trackingObject.process = {};\n          trackingObject.process.StepName = getPageName(page);\n          trackingObject.process.StepNumber = getStepNumber(page);\n        },\n        setConfigurationData = function (trackingObject, obj) {\n          trackingObject.configuration = {};\n\n          trackingObject.configuration.CarlineId = obj.detail.rangeId\n            ? obj.detail.rangeId.split('-')[0]\n            : undefined;\n          trackingObject.configuration.CarlineName = getCarlineName(\n            obj.detail.model\n          );\n          \/*? obj.detail.model\n            : undefined;*\/\n          trackingObject.configuration.ModelId = obj.detail.trimId\n            ? obj.detail.trimId\n            : undefined;\n          trackingObject.configuration.ModelName = obj.detail.trim\n            ? obj.detail.trim\n            : undefined;\n\n          trackingObject.configuration.PriceTotalCurrency = 'GBP';\n          trackingObject.configuration.PriceTotalBasic = undefined;\n          trackingObject.configuration.PriceTotalAdditional = undefined;\n          trackingObject.configuration.PriceTotalTotal = undefined;\n          trackingObject.configuration.PriceRateTotal = undefined;\n          trackingObject.configuration.BodyTypeName = undefined;\n          trackingObject.configuration.SalesgroupId = undefined;\n          trackingObject.configuration.SalesgroupName = undefined;\n          trackingObject.configuration.EquipmentlineName = undefined;\n          trackingObject.configuration.PriceTypeParameter = undefined;\n          trackingObject.configuration.PriceType = undefined;\n          trackingObject.configuration.PriceRateCurrency = undefined;\n          trackingObject.configuration.PriceRateType = undefined;\n          trackingObject.configuration.PriceRateBasic = undefined;\n          trackingObject.configuration.PriceRateAdditional = undefined;\n        },\n        \/\/ combine common calls\n        essentialData = function (eventName, trackingObject, obj) {\n          setEventInfo(trackingObject, eventName);\n          setEnvironmentData(trackingObject);\n          setUserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setPartnerData(trackingObject);\n          setProcessData(trackingObject, obj.pageName);\n        },\n        setLinkData = function (trackingObject, label, url) {\n          trackingObject.link = {};\n          trackingObject.link.url = url\n            ? url\n            : window.location.hostname + window.location.pathname;\n          trackingObject.link.name = label;\n        },\n        getNumberOfResults = function () {\n          var regular = $('.shortlist-items .shortlist-item').length;\n          var more = $('.shortlist-items-more');\n          var additional =\n            more.length > 0 && more[0].style.display === 'block'\n              ? $('.shortlist-items-more .shortlist-item').length\n              : 0;\n          return regular + additional;\n        },\n        setFilterData = function (trackingObject, obj) {\n          trackingObject.filter = {};\n          trackingObject.filter.numberOfResults = getNumberOfResults();\n          trackingObject.filter.filterlist = workoutFilterItems(obj.detail);\n        },\n        getCamelCase = function (str) {\n          return str\n            .replace(\/(?:^\\w|[A-Z]|\\b\\w)\/g, function (word, index) {\n              return index == 0 ? word.toLowerCase() : word.toUpperCase();\n            })\n            .replace(\/\\s+\/g, '');\n        },\n        getShorterText = function (str) {\n          return str\n            .replace(' or ', '\/')\n            .replace('Room for a ', '')\n            .replace('Room for the ', '')\n            .replace('This car is just for me', 'just me')\n            .replace('I need room for 2-4 children', 'room for 2-4 children');\n        },\n        getYourDriveObject = function (longName, value) {\n          if (longName.indexOf('efficiency') >= 0) {\n            return {\n              question: 'driver',\n              id: '1',\n              answer: [\n                {\n                  type: 'string',\n                  value: value,\n                },\n              ],\n            };\n          } else if (longName.indexOf('people') >= 0) {\n            return {\n              question: 'peopleAmount',\n              id: '2',\n              answer: [\n                {\n                  type: 'string',\n                  value: value,\n                },\n              ],\n            };\n          } else if (longName.indexOf('boot') >= 0) {\n            return {\n              question: 'bootSpace',\n              id: '3',\n              answer: [\n                {\n                  type: 'string',\n                  value: value,\n                },\n              ],\n            };\n          } else if (longName.indexOf('door') >= 0) {\n            return {\n              question: 'doors',\n              id: '4',\n              answer: [\n                {\n                  type: 'string',\n                  value: value,\n                },\n              ],\n            };\n          }\n          return longName.substring(0, 20);\n        },\n        workoutFilterItems = function (data) {\n          var regularItems = [\n            { data: 'body', key: 'BT' },\n            { data: 'color', key: 'EC' },\n            { data: 'models', key: 'CG' },\n            { data: 'transmission', key: 'GT' },\n            { data: 'performance', key: 'FT' },\n            { data: 'trimId', key: 'TR' },\n            { data: 'monthly', key: 'ME', array: 'MB' },\n            { data: 'price', key: 'ME', array: 'PR' },\n          ];\n\n          var a = [];\n\n          \/\/ Generates an array of objects based on regularItems with values\n          \/\/ taken from the data prop\n          if (data) {\n            for (var i = 0; i < regularItems.length; i++) {\n              var el = regularItems[i];\n              var value = data[el.data];\n              var obj = {\n                type: 'multi_value',\n                name: el.key,\n                values: el.array ? [el.array, value] : value,\n              };\n              if (value && value !== 'any') {\n                a.push(obj);\n              }\n            }\n          }\n\n          var specialItems = [\n            'driver-features',\n            'in-car-features',\n            'style-features',\n            'popular-features',\n          ];\n\n          var b = [];\n\n          \/\/ Conditionally generates an array of objects using the keys from\n          \/\/ specialItems with values taken from the data prop\n          if (data) {\n            for (var i = 0; i < specialItems.length; i++) {\n              var key = specialItems[i];\n              var values = data[key];\n              for (var k in values) {\n                if (values[k] !== 'Not for me') {\n                  var upper = k.replace(\/([a-z](?=[A-Z]))\/g, '$1 ');\n                  var out = upper.charAt(0).toUpperCase() + upper.slice(1);\n                  b.push(out);\n                }\n              }\n            }\n          }\n\n          \/\/ Add any items generated above to the array of objects\n          if (b.length > 0) {\n            obj = {\n              type: 'multi_value',\n              name: 'AF',\n              values: b,\n            };\n            a.push(obj);\n          }\n\n          \/\/ Store value or if empty use stored value\n          \/\/ For VWBasic_SCStepButton_Click event\n          if (a.length > 0) {\n            filterListStore = a;\n          } else {\n            a = filterListStore;\n          }\n\n          return a;\n        },\n        workoutQuestionaireItems = function (data) {\n          var list = [];\n\n          for (var key in data['your-drive']) {\n            var el = data['your-drive'][key];\n\n            console.log('[workoutQuestionaireItems] found:', key, el);\n\n            list.push(\n              getYourDriveObject(key.toLowerCase(), getShorterText(el))\n            );\n          }\n          return list;\n        },\n        setQuestionaireData = function (trackingObject, obj) {\n          trackingObject.questionnaire = {};\n          trackingObject.questionnaire.QuestionAnswerSet = {\n            id: 'Questionnaire Must Haves',\n            version: '1',\n            content: workoutQuestionaireItems(obj.detail),\n          };\n        },\n        extendedEssentialData = function (eventName, trackingObject, obj) {\n          essentialData(eventName, trackingObject, obj);\n\n          setFilterData(trackingObject, obj);\n          setQuestionaireData(trackingObject, obj);\n        },\n        triggerPageLoad = function (trackingObject, obj) {\n          if (!initialised) {\n            essentialData('VWBasic_Step_Pageload', trackingObject, obj);\n            trackingObject.eventInfo.contentLabels = getPageName(obj.pageName);\n            triggerEvent(trackingObject, obj);\n            initialised = true;\n          }\n        },\n        triggerStepLoad = function (trackingObject, obj) {\n          var step = getStepNumber(obj.pageName);\n          if (step === 7) {\n            return;\n          }\n          var eventName =\n            step > 4 ? 'VWBasic_SCStepResultlist_Load' : 'VWBasic_SCStep_Load';\n          \/\/ wait for the results to populate\n          var delay = step > 4 ? 1000 : 10;\n          setTimeout(function () {\n            extendedEssentialData(eventName, trackingObject, obj);\n            trackingObject.eventInfo.contentLabels = getPageName(obj.pageName);\n            triggerEvent(trackingObject, obj);\n          }, delay);\n        },\n        triggerDetailsLoad = function (trackingObject, obj) {\n          var step = getStepNumber(obj.pageName);\n          var eventName = 'VWBasic_SCStepRecommendedVehicle_Load';\n          extendedEssentialData(eventName, trackingObject, obj);\n          setConfigurationData(trackingObject, obj);\n          trackingObject.eventInfo.contentLabels = getPageName(obj.pageName);\n          triggerEvent(trackingObject, obj);\n        },\n        triggerButtonClick = function (trackingObject, eventname, obj) {\n          essentialData(eventname, trackingObject, obj);\n          trackingObject.eventInfo.contentId = obj.label;\n          trackingObject.eventInfo.sectionName = obj.label;\n          setLinkData(trackingObject, obj.label, null);\n          triggerEvent(trackingObject, obj);\n          setFilterData(trackingObject, obj);\n        },\n        triggerAccordionClick = function (trackingObject, eventname, obj) {\n          essentialData(eventname, trackingObject, obj);\n          delete trackingObject.process;\n          trackingObject.eventInfo.contentId =\n            'Explore Engine, Fuel and Transmission choices';\n          trackingObject.eventInfo.sectionName =\n            'Explore Engine, Fuel and Transmission choices';\n          triggerEvent(trackingObject, obj);\n        },\n        \/\/ Trigger if selecting not deselecting\n        triggerFilterClickIfSelecting = function (event, trackingObject, obj) {\n          \/\/ If selecting, parent will already had 'selected' class applied\n          var userIsSelecting =\n            jQuery(event.explicitOriginalTarget).parent('.selected').length > 0;\n\n          if (userIsSelecting) {\n            triggerFilterClick(trackingObject, obj);\n          }\n        },\n        triggerFilterClick = function (trackingObject, obj) {\n          essentialData('VWBasic_FilterSelect_Click', trackingObject, obj);\n          delete trackingObject.process;\n          trackingObject.eventInfo.contentId = obj.detail.element;\n          trackingObject.eventInfo.sectionName = obj.detail.element;\n          trackingObject.filter = {};\n          trackingObject.filter.type = 'single_value';\n          trackingObject.filter.name = obj.detail.section;\n          trackingObject.filter.values = [obj.detail.element];\n          trackingObject.filter.lowerbound = undefined;\n          trackingObject.filter.upperbound = undefined;\n          triggerEvent(trackingObject, obj);\n        },\n        triggerVehicleLink = function (trackingObject, eventname, obj) {\n          essentialData(eventname, trackingObject, obj);\n          trackingObject.eventInfo.contentId = obj.pageName;\n          trackingObject.eventInfo.sectionName = obj.pageName;\n          setLinkData(trackingObject, obj.label, null);\n          setConfigurationData(trackingObject, obj);\n          triggerEvent(trackingObject, obj);\n        },\n        triggerNavClick = function (trackingObject, obj) {\n          essentialData('VWBasic_StepNavigation_Click', trackingObject, obj);\n          trackingObject.eventInfo.contentId = obj.pageName;\n          trackingObject.eventInfo.sectionName = obj.pageName;\n          setLinkData(trackingObject, obj.detail, null);\n          triggerEvent(trackingObject, obj);\n        };\n\n      \/\/ Main Listener\n      if (!$dataLayer) {\n        var s = document.createElement('script');\n        s.setAttribute('id', 'vw-data-layer');\n        document.body.appendChild(s);\n        $dataLayer = document.getElementById('vw-data-layer');\n      }\n\n      $dataLayer.addEventListener('data-layer-event-fired', function (e) {\n        var trackingObject = {};\n        var obj = window.vwDataLayer.event[window.vwDataLayer.event.length - 1];\n\n        switch (obj.action) {\n          case 'page-loaded':\n            triggerPageLoad(trackingObject, obj);\n            break;\n          case 'section-loaded':\n            triggerStepLoad(trackingObject, obj);\n            break;\n          case 'full-details-loaded':\n            triggerDetailsLoad(trackingObject, obj);\n            break;\n          case 'nav-clicked':\n            triggerNavClick(trackingObject, obj);\n            break;\n          case 'save-session':\n            obj.label = 'save';\n            var step = getStepNumber(obj.pageName);\n            if (step === 7) {\n              setConfigurationData(trackingObject, obj);\n              triggerButtonClick(\n                trackingObject,\n                'VWBasic_SCStepRecommendedVehicleButton_Click',\n                obj\n              );\n            } else {\n              triggerButtonClick(\n                trackingObject,\n                'VWBasic_SCStepButton_Click',\n                obj\n              );\n            }\n            break;\n          case 'button-clicked':\n            triggerButtonClick(\n              trackingObject,\n              'VWBasic_SCStepButton_Click',\n              obj\n            );\n            break;\n          case 'accordion-clicked':\n            var eventName = obj.detail.isOpen\n              ? 'VWBasic_AccordionOpen_Click'\n              : 'VWBasic_AccordionClose_Click';\n            triggerAccordionClick(trackingObject, eventName, obj);\n            break;\n          case 'change-matched-cars-filter':\n            triggerFilterClickIfSelecting(e, trackingObject, obj);\n            \/\/triggerFilterClick(trackingObject, obj);\n            break;\n          case 'view-more-matches':\n            triggerButtonClick(trackingObject, 'VWBasic_Link_Click', obj);\n            break;\n          case 'link-clicked':\n            triggerButtonClick(trackingObject, 'VWBasic_SCStepLink_Click', obj);\n            break;\n          case 'matched-car-cta-clicked':\n            triggerVehicleLink(\n              trackingObject,\n              'VWBasic_SCStepRecommendedVehicleLink_Click',\n              obj\n            );\n            break;\n          default:\n            console.log('Matomo push heard:', obj);\n        }\n      });\n\n      \/\/ sometimes Qubit loads in late and we miss the inital event, in that case\n      \/\/ fire it now\n      if (\n        window.vwDataLayer &&\n        window.vwDataLayer.event &&\n        window.vwDataLayer.event.length !== 0\n      ) {\n        var trackingObject = {};\n        var obj = window.vwDataLayer.event[window.vwDataLayer.event.length - 1];\n        triggerPageLoad(trackingObject, obj);\n      }\n    });\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25794],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19662,"type":"CustomHtml","name":"9849f4bb1d21e9c09e232f4a0fa05779","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Residual Val EVENTS > 2019\/07\/22');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar url = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\n\n\t\t\t\/\/ VWBasic_Pageload\n\n\t\t\tsetTimeout(function() {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_Pageload',\n\t\t\t\t\teventAction: 'VWBasic_Pageload',\n\t\t\t\t\tpageId: url,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c067-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t}, 100);\n\n\t\t});\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25808],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19663,"type":"CustomHtml","name":"f299dbd9e2c7f29e3d85da2e102692f6","parameters":{"customHtml":"<script>\nwindow.VwTagConsole('%cLive > [Adobe] AppMeasurement > 2019\/08\/14', 'color:white;background-color:green');\n  \n  var s={};\n  \n  \/* Initialize AppMeasurement *\/\n  \/*Created a New Test Account for Setup*\/\n  var account = \"tribalvwprod\";\n  if (document.location.hostname === \"www.volkswagen.co.uk\" || document.location.hostname === \"usedcars.volkswagen.co.uk\" || document.location.hostname === \"perfect.volkswagen.co.uk\" ) {\n  }\n\n  var s_new = new AppMeasurement(account);\n  s_new.account = account;\n  \n  \/******** VISITOR ID SERVICE CONFIG - REQUIRES VisitorAPI.js ********\/\n  s_new.visitor = Visitor.getInstance(\"1D59171B520E91320A490D44@AdobeOrg\");\n\n  \/************************** CONFIG SECTION **************************\/\n  \/* You may add or alter any code config here. *\/\n  \/* Conversion Config *\/\n  s_new.charSet = \"UTF-8\";\n  \n  s_new.currencyCode = \"GBP\";\n  \/* Put the number of periods in your Domain as the input to this variable*\/\n  s_new.cookieDomainPeriods = \"3\";\n  \/* Put the number of periods in your Domain as the input to this variable*\/\n  s_new.fpCookieDomainPeriods = \"3\";\n  \/* Link Tracking Config *\/\n  s_new.trackDownloadLinks = true;\n  s_new.trackExternalLinks = true;\n  s_new.trackInlineStats = true;\n  s_new.linkDownloadFileTypes = \"exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx,pptm,xml\";\n  s_new.linkInternalFilters = \"javascript:,local,internal,volkswagen.co.uk,vw.co.uk,tribalddb.co.uk,vwcloud.co.uk\";\n  s_new.linkExternalFilters = \"\";\n  s_new.linkLeaveQueryString = false;\n  s_new.linkTrackVars = \"events\";\n  s_new.linkTrackEvents = \"None\";\n  \/\/s_new.useForcedLinkTracking=false;\n  s_new.forcedLinkTrackingTimeout = 500;\n\n  \/*Set Server*\/ \n  s_new.server = window.location.hostname;\n  \n \/*Set Page name*\/ \n  s_new.pageName = window.location.pathname;\n  if (document.location.pathname == \"\/\")\n    s_new.pageName = \"\/homepage\";\n\n  \/*Set Page URL*\/ \n  s_new.pageURL = window.location.href;\n\n  \/*Set Site Section (Channel in Adobe)*\/ \n  s_new.channel = window.location.href.split(\"\/\")[3];\n  s_new.channel = s_new.channel.split('?')[0];\n  \n\t\/*Save Marin Software Tracking code*\/\n\tvar marinTracking = s_new.Util.getQueryParam('mkwid');\n\tif(marinTracking){\n\t  s_new.linkTrackVars = s_new.linkTrackVars + \",eVar86\";\n\t\ts_new.eVar86 = marinTracking;\n\t}\n\t\n  \/* Logged In Status *\/\n\t\n  \/\/ (function($) {\n  \/\/   $(document).ready( function() { \n\n  \/\/     var dataLayer = document.getElementById('vw-data-layer')\n      \n  \/\/     myVWLoginStatus = function (eventInfo) {\n  \/\/       s_new.clearVars();\n  \/\/       s_new.doPlugins = function() { return true }; \/\/ Overload doPlugins or else bad things happen\n        \n  \/\/       switch (eventInfo.eventName) {\n  \/\/         case 'loginStatus': \n  \/\/           s_new.eVar108 = eventInfo.statusName;\n  \/\/           break;\n  \/\/         case 'logoutEvent':\n  \/\/           s_new.events = 'event501';\n  \/\/           break;\n  \/\/       }\n            \n  \/\/       s_new.t();\n  \/\/     };\n      \n  \/\/     dataLayer.addEventListener(\"data-layer-event-fired\", function(e) { \n  \/\/       if(e.detail) {\n  \/\/         switch (e.detail.eventAction) {\n  \/\/           case \"loginStatus\":\n  \/\/           case \"sessionTimeout\":\n  \/\/             myVWLoginStatus(e.detail);\n  \/\/             break;\n  \/\/           default:\n  \/\/               ;\n  \/\/           }\n  \/\/       }\n  \/\/     });\n      \n  \/\/     if (document.cookie.indexOf(\"VW_DISPLAY_NAME\") >= 0) {\n  \/\/       myVWLoginStatus({\n  \/\/         eventAction: 'loginStatus',\n  \/\/         eventName: 'loginStatus',\n  \/\/         statusName: 'Logged-In'\n  \/\/       });\n  \/\/     } else {\n  \/\/       myVWLoginStatus({\n  \/\/         eventAction: 'loginStatus',\n  \/\/         eventName: 'loginStatus',\n  \/\/         statusName: 'Not Logged-In'\n  \/\/       });\n  \/\/     };\n      \n  \/\/     $(\".header__topbar-link-logout\").click(function (event) {\n  \/\/       event.preventDefault();\n  \/\/       myVWLoginStatus({\n  \/\/         eventAction: 'logoutEvent',\n  \/\/         eventName: 'logoutEvent'\n  \/\/       });\n  \/\/       window.location.replace($(this).attr('href'));\n\n  \/\/     });\n  \/\/   })\n  \/\/ })(jQuery);\n\n  \/*Europe Time Parting*\/\n  s_new._tpDST = {\n  2012:'3\/25,10\/28',\n  2013:'3\/31,10\/27',\n  2014:'3\/30,10\/26',\n  2015:'3\/29,10\/25',\n  2016:'3\/27,10\/30',\n  2017:'3\/26,10\/29',\n  2018:'3\/25,10\/28',\n  2019:'3\/31,10\/27'}\n  \n  \/\/ s_new.eVar99 = s_new.visitor.getMarketingCloudVisitorID();\n  \/\/ var date = new Date().toISOString();\n  \/\/ s_new.prop33 = date;\n  s_new.prop33 = s_new.c_r('topNavLink');\n  \n  \/\/MLP tracking\n  if (location.pathname.match(\/\\\/new\\\/[a-z-]*$\/)) {\n    s_new.events='event331';\n    s_new.eVar36 = location.pathname.replace(\"\/new\/\",\"\").replace(\/-.*\/,\"\");\n    s_new.eVar39 = location.pathname.replace(\"\/new\/\",\"\");\n  }\n  \n  \/* Uncomment below to use doPlugins *\/\n  s_new.usePlugins=true\n  function s_doPlugins(s) {\n\n    \/\/ use implementation plug-ins that are defined below\n    \/\/ in this section. For example, if you copied the append\n    \/\/ list plug-in code below, you could call:\n    \/\/ s.events=s.apl(s.events,\"event1\",\",\",1);\n\n    \/*Save campaign tracking code into campaign*\/\n    s_new.campaign = s_new.Util.getQueryParam('CMPID') || s_new.Util.getQueryParam('dbgid');\n\n    \/\/ Bringing marketing tracking code into an adobe eVar\n    if (s_new.Util.getQueryParam('CMPID') || s_new.Util.getQueryParam('dbgid')) {\n      var queryStringLength = window.location.search.indexOf('CMPID') > -1 ? window.location.search.indexOf('CMPID') : window.location.search.indexOf('dbgid') > -1 ? window.location.search.indexOf('dbgid') : '';\n      s_new.eVar103 = window.location.search.substring(queryStringLength, window.location.search.length);\n    }\n\n    \/*Save Previous Page into prop1 eVar19*\/\n\t  s_new.eVar19 = s_new.prop1=s_new.getPreviousValue(s_new.pageName,'gpv_pn','');\n\t\n\t  \/\/Clear TopNavCookie\n    s_new.c_w('topNavLink','');\n  \n    \/*Save the page load time into Prop2*\/\n    s_new.prop2 = window.performance.timing.domComplete - window.performance.timing.domInteractive;\n    \/*Save the day since the last visit into Prop5*\/\n    s_new.prop5=s_new.getDaysSinceLastVisit('s_lv');\n\n    \/*Save the visit number into eVar15*\/\n    s_new.eVar15=s_new.getVisitNum('90', 's_vmonthnum','s_monthinvisit');\n\n   \/*Save the visitor type into eVar21*\/\n    s_new.eVar21=s_new.getNewRepeat(90,'s_getNewRepeat');\n\n    \/*1 on first page of visit, otherwise 0*\/\n    s_new.eVar23 = s_new.getVisitStart('s_visit');\n\n    \/*Set Subsections *\/\n    var explodeUrl = window.location.pathname.split(\"\/\")\n    if (explodeUrl[1] === \"\" && typeof(explodeUrl[2]) === \"undefined\") {\n        s_new.channel = \"homepage\";\n    }\n\n    \/*Percent Page Viewed Get maximum percent viewed only, using s_new.pageName as an implicit identifier *\/\n    s_new.prop8 = s_new.getPreviousValue(s_new.pageName,'s_ppn'); \/\/prop21: prev page name\n    s_new.prop12 = s_new.getPercentPageViewed(); \/\/prop22: max % viewed of prev page\n    if(!s_new.prop8||s_new.prop8=='no value')s_new.prop12=''; \/\/clear max % viewed if no prev page view\n    \n    \/*Time and Date *\/\n    var tp = s_new.getTimeParting('n','0');\n    s_new.prop13 = tp;\n    \n    \/*Pagename copy*\/\n    s_new.eVar20 = \"D=pageName\";\n  }\n  s_new.doPlugins=s_doPlugins \n\n\/* WARNING: Changing any of the below variables will cause drastic\n changes to how your visitor data is collected.  Changes should only be\n made when instructed to do so by your account manager.*\/\ns_new.visitorNamespace=\"tribalddb\"\ns_new.trackingServer=\"tribalddb.sc.omtrdc.net\";\n\n\/************************** PLUGINS SECTION *************************\/\n\/*\n * Plugin Utility: apl v1.1\n Plug-in lets you append a value to any delimited list\n *\/\ns_new.apl=new Function(\"l\",\"v\",\"d\",\"u\",\"\"\n    +\"var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.\"\n    +\"length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas\"\n    +\"e()));}}if(!m)l=l?l+d+v:v;return l\");\n\n\/*\n * Plugin: getPreviousValue_v1.0 - return previous value of designated\n *   variable (requires split utility)\n *\/\ns_new.getPreviousValue=new Function(\"v\",\"c\",\"el\",\"\"\n    +\"var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el\"\n    +\"){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i\"\n    +\"){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)\"\n    +\":s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?\"\n    +\"s.c_w(c,v,t):s.c_w(c,'no value',t);return r}\");\n\/*\n * Utility Function: split v1.5 - split a string (JS 1.0 compatible)\n *\/\ns_new.split=new Function(\"l\",\"d\",\"\"\n    +\"var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x\"\n    +\"++]=l.substring(0,i);l=l.substring(i+d.length);}return a\");\n\n\/*\n * Plugin: getNewRepeat 1.2 - Returns whether user is new or repeat\n *\/\ns_new.getNewRepeat=new Function(\"d\",\"cn\",\"\"\n    +\"var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:\"\n    +\"'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length=\"\n    +\"=0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct\"\n    +\"-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'N\"\n    +\"ew';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}\");\n\/*\n * Utility Function: split v1.5 (JS 1.0 compatible)\n *\/\ns_new.split=new Function(\"l\",\"d\",\"\"\n    +\"var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x\"\n    +\"++]=l.substring(0,i);l=l.substring(i+d.length);}return a\");\n\n\/*\n * Plugin: Days since last Visit 1.1 - capture time from last visit\n *\/\ns_new.getDaysSinceLastVisit=new Function(\"c\",\"\"\n    +\"var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getT\"\n    +\"ime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.s\"\n    +\"etTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f\"\n    +\"2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f\"\n    +\"5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);\"\n    +\"s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*da\"\n    +\"y){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day\"\n    +\"){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.\"\n    +\"c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c\"\n    +\"_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c\"\n    +\"+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) retur\"\n    +\"n f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s\"\n    +\"!=f5) return '';else return cval_s;\");\n\n\/*\n * Plugin: getVisitNum - version 3.0\n *\/\ns_new.getVisitNum=new Function(\"tp\",\"c\",\"c2\",\"\"\n    +\"var s=this,e=new Date,cval,cvisit,ct=e.getTime(),d;if(!tp){tp='m';}\"\n    +\"if(tp=='m'||tp=='w'||tp=='d'){eo=s.endof(tp),y=eo.getTime();e.setTi\"\n    +\"me(y);}else {d=tp*86400000;e.setTime(ct+d);}if(!c){c='s_vnum';}if(!\"\n    +\"c2){c2='s_invisit';}cval=s.c_r(c);if(cval){var i=cval.indexOf('&vn=\"\n    +\"'),str=cval.substring(i+4,cval.length),k;}cvisit=s.c_r(c2);if(cvisi\"\n    +\"t){if(str){e.setTime(ct+1800000);s.c_w(c2,'true',e);return str;}els\"\n    +\"e {return 'unknown visit number';}}else {if(str){str++;k=cval.substri\"\n    +\"ng(0,i);e.setTime(k);s.c_w(c,k+'&vn='+str,e);e.setTime(ct+1800000);\"\n    +\"s.c_w(c2,'true',e);return str;}else {s.c_w(c,e.getTime()+'&vn=1',e)\"\n    +\";e.setTime(ct+1800000);s.c_w(c2,'true',e);return 1;}}\");\ns_new.dimo=new Function(\"m\",\"y\",\"\"\n    +\"var d=new Date(y,m+1,0);return d.getDate();\");\ns_new.endof=new Function(\"x\",\"\"\n    +\"var t=new Date;t.setHours(0);t.setMinutes(0);t.setSeconds(0);if(x==\"\n    +\"'m'){d=s.dimo(t.getMonth(),t.getFullYear())-t.getDate()+1;}else if(\"\n    +\"x=='w'){d=7-t.getDay();}else {d=1;}t.setDate(t.getDate()+d);return \"\n    +\"t;\");\n\n\/*\n * Get Visit Start\n *\/\ns_new.getVisitStart=new Function(\"c\",\"\"\n    +\"var s=this,v=1,t=new Date;t.setTime(t.getTime()+1800000);if(s.c_r(c\"\n    +\")){v=0}if(!s.c_w(c,1,t)){s.c_w(c,1,0)}if(!s.c_r(c)){v=0}return v;\");\n\n\/* Page Visibility Plugin 0.1 (BETA) *\/\ns_new.getPageVisibility=new Function(\"\",\"\"\n    +\"var s=this;if(s.getVisitStart()){s.Util.cookieWrite('s_pvs','');s.U\"\n    +\"til.cookieWrite('s_tps','');}if(s.Util.cookieRead('s_pvs')&&s.pvt<1\"\n    +\"){if(parseInt(s.Util.cookieRead('s_pvs'))<=parseInt(s.Util.cookieRe\"\n    +\"ad('s_tps'))){s.pve=s.pvel.split(',');s.events=s.apl(s.events,s.pve\"\n    +\"[0]+'='+(parseInt(s.Util.cookieRead('s_pvs'))),',',2);s.Util.cookie\"\n    +\"Write('s_pvs','');s.events=s.apl(s.events,s.pve[1]+'='+(parseInt(s.\"\n    +\"Util.cookieRead('s_tps'))),',',2);s.Util.cookieWrite('s_tps','');s.\"\n    +\"events=s.apl(s.events,s.pve[2],',',2);}}s.pvi=setInterval(s.pvx,100\"\n    +\"0);s.wpvi=setInterval(s.wpvc,5000);\");\ns_new.gbp=new Function(\"\",\"\"\n    +\"if('hidden'in document){return null;}var bp=['moz','ms','o','webkit\"\n    +\"'];for(var i=0;i<bp.length;i++){var p=bp[i]+'Hidden';if(p in docume\"\n    +\"nt){return bp[i];}}return null;\");\ns_new.hp=new Function(\"p\",\"\"\n    +\"if(p){return p+'Hidden';}else{return'hidden';}\");\ns_new.vs=new Function(\"p\",\"\"\n    +\"if(p){return p+'VisibilityState';}else{return'visibilityState';}\");\ns_new.ve=new Function(\"p\",\"\"\n    +\"if(p){return p+'visibilitychange';}else{return'visibilitychange';}\");\ns_new.pvx=new Function(\"\",\"\"\n    +\"s_new.pvt+=1;\");\ns_new.wpvc = function(){var tempDate = Date.now();s_new.Util.cookieWrite('s_tps',\n    Math.ceil((tempDate - s_new.totalTime)\/1000));s_new.Util.cookieWrite('s_pvs', s_new.pvt)}\ndocument.addEventListener('visibilitychange',function(event){if(document.hidden){s_new.visibility = false;clearTimeout(s_new.pvi);}else{s_new.visibility=true;s_new.pvi=setInterval(s_new.pvx,1000);}});s_new.totalTime=new Date();s_new.pvt=0;s_new.prefix=s_new.gbp;s_new.hidden=s_new.hp(s_new.prefix);s_new.visibility=true;s_new.visibilityState=s_new.vs(s_new.prefix);s_new.visibilityEvent=s_new.ve(s_new.prefix);\n\n\/*\n * Plugin: getPercentPageViewed v1.71\n *\/\ns_new.getPercentPageViewed=new Function(\"n\",\"\"\n    +\"var s=this,W=window,EL=W.addEventListener,AE=W.attachEvent,E=['load\"\n    +\"','unload','scroll','resize','zoom','keyup','mouseup','touchend','o\"\n    +\"rientationchange','pan'];W.s_Obj=s;s_PPVid=(n=='-'?s.pageName:n)||s\"\n    +\".pageName||location.href;if(!W.s_PPVevent){s.s_PPVg=function(n,r){v\"\n    +\"ar k='s_ppv',p=k+'l',c=s.c_r(n||r?k:p),a=c.indexOf(',')>-1?c.split(\"\n    +\"',',10):[''],l=a.length,i;a[0]=unescape(a[0]);r=r||(n&&n!=a[0])||0;\"\n    +\"a.length=10;if(typeof a[0]!='string')a[0]='';for(i=1;i<10;i++)a[i]=\"\n    +\"!r&&i<l?parseInt(a[i])||0:0;if(l<10||typeof a[9]!='string')a[9]='';\"\n    +\"if(r){s.c_w(p,c);s.c_w(k,'?')}return a};W.s_PPVevent=function(e){va\"\n    +\"r W=window,D=document,B=D.body,E=D.documentElement,S=window.screen|\"\n    +\"|0,Ho='offsetHeight',Hs='scrollHeight',Ts='scrollTop',Wc='clientWid\"\n    +\"th',Hc='clientHeight',C=100,M=Math,J='object',N='number',s=W.s_Obj|\"\n    +\"|W.s||0;e=e&&typeof e==J?e.type||'':'';if(!e.indexOf('on'))e=e.subs\"\n    +\"tring(2);s_PPVi=W.s_PPVi||0;if(W.s_PPVt&&!e){clearTimeout(s_PPVt);s\"\n    +\"_PPVt=0;if(s_PPVi<2)s_PPVi++}if(typeof s==J){var h=M.max(B[Hs]||E[H\"\n    +\"s],B[Ho]||E[Ho],B[Hc]||E[Hc]),X=W.innerWidth||E[Wc]||B[Wc]||0,Y=W.i\"\n    +\"nnerHeight||E[Hc]||B[Hc]||0,x=S?S.width:0,y=S?S.height:0,r=M.round(\"\n    +\"C*(W.devicePixelRatio||1))\/C,b=(D.pageYOffset||E[Ts]||B[Ts]||0)+Y,p\"\n    +\"=h>0&&b>0?M.round(C*b\/h):0,O=W.orientation,o=!isNaN(O)?M.abs(o)%180\"\n    +\":Y>X?0:90,L=e=='load'||s_PPVi<1,a=s.s_PPVg(s_PPVid,L),V=function(i,\"\n    +\"v,f,n){i=parseInt(typeof a==J&&a.length>i?a[i]:'0')||0;v=typeof v!=\"\n    +\"N?i:v;v=f||v>i?v:i;return n?v:v>C?C:v<0?0:v};if(new RegExp('(iPod|i\"\n    +\"Pad|iPhone)').exec(navigator.userAgent||'')&&o){o=x;x=y;y=o}o=o?'P'\"\n    +\":'L';a[9]=L?'':a[9].substring(0,1);s.c_w('s_ppv',escape(W.s_PPVid)+\"\n    +\"','+V(1,p,L)+','+(L||!V(2)?p:V(2))+','+V(3,b,L,1)+','+X+','+Y+','+x\"\n    +\"+','+y+','+r+','+a[9]+(a[9]==o?'':o))}if(!W.s_PPVt&&e!='unload')W.s\"\n    +\"_PPVt=setTimeout(W.s_PPVevent,333)};for(var f=W.s_PPVevent,i=0;i<E.\"\n    +\"length;i++)if(EL)EL(E[i],f,false);else if(AE)AE('on'+E[i],f);f()};v\"\n    +\"ar a=s.s_PPVg();return!n||n=='-'?a[1]:a\");\n\n\/*\n * Plugin: getTimeParting 3.4\n *\/\ns_new.getTimeParting=new Function(\"h\",\"z\",\"\"\n    +\"var s=this,od;od=new Date('1\/1\/2000');if(od.getDay()!=6||od.getMont\"\n    +\"h()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['\"\n    +\"Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturda\"\n    +\"y'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tp\"\n    +\"DST[d.getFullYear()].split(\/,\/);ds=new Date(dso[0]+'\/'+d.getFullYea\"\n    +\"r());de=new Date(dso[1]+'\/'+d.getFullYear());if(h=='n'&&d>ds&&d<de)\"\n    +\"{z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getT\"\n    +\"imezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d\"\n    +\".getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U=' AM';if(H>=12){U=' P\"\n    +\"M';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}\");\n\n\/* Remove from Events 0.1 - Performance Specific, \nremoves all performance events from s.events once being tracked. *\/\ns_new.rfe=new Function(\"\",\"\"\n+\"var s=this;var ea=s.split(s.events,',');var pta=s.split(s.pte,',');\"\n+\"try{for(x in pta){s.events=s.rfl(s.events,pta[x]);s.contextData['ev\"\n+\"ents']=s.events;}}catch(e){return;}\");\n\/* Plugin Utility - RFL (remove from list) 1.0*\/\ns_new.rfl=new Function(\"l\",\"v\",\"d1\",\"d2\",\"ku\",\"\"\n+\"var s=this,R=new Array(),C='',d1=!d1?',':d1,d2=!d2?',':d2,ku=!ku?0:\"\n+\"1;if(!l)return'';L=l.split(d1);for(i=0;i<L.length;i++){if(L[i].inde\"\n+\"xOf(':')>-1){C=L[i].split(':');C[1]=C[0]+':'+C[1];L[i]=C[0];}if(L[i\"\n+\"].indexOf('=')>-1){C=L[i].split('=');C[1]=C[0]+'='+C[1];L[i]=C[0];}\"\n+\"if(L[i]!=v&&C)R.push(C[1]);else if(L[i]!=v)R.push(L[i]);else if(L[i\"\n+\"]==v&&ku){ku=0;if(C)R.push(C[1]);else R.push(L[i]);}C='';}return s.\"\n+\"join(R,{delim:d2})\");\n\n\/************************** ADSERV VARIABLES **************************\/\n\/* @TODO: Fill in these variables with the settings mapped in the\n * ADSERV wizard and that match your desired preferences. \n * @TODO: Comments should be removed in a production deployment. *\/\nvar adservConfig = {\n    tEvar:              'eVar84', \/\/ Transfer variable, typically the \"View Through\" eVar.\n    aID:                '157709', \/\/ Advertiser ID\n    cID:                '985817', \/\/ Conversion Tag ID\n    gID:                'EB_ACM:', \/\/ Genesis ID\n    requestURL:         \"http:\/\/bs.serving-sys.com\/BurstingPipe\/ActivityServer.bs?cn=as&vn=omn&activityID=[cID]&advID=[aID]&var=[VAR]&rnd=[RAND]\", \/\/ the Sizmek request URL\n    maxDelay:           \"750\", \/\/ The maximum time to wait for ADSERV servers to respond, in milliseconds.\n    visitCookie:        \"s_adserv\", \/\/ The name of the visitor cookie to use to restrict ADSERV calls to once per visit.\n    clickThroughParam:  \"CID\", \/\/ A query string paramter that will force the ADSERV call to occur.\n    searchCenterParam:  undefined, \/\/ SearchCenter identifier.\n};\n\/************************ END ADSERV Variables ************************\/\n\n\/*\n * Partner Plugin: ADSERV Check 1.0 - Restrict ADSERV calls to once a visit, per report suite, per click\n * through. Used in conjunction with genesis_event_config table. Deduplicates SCM hits.\n *\/\ns_new.partnerADSERVCheck=new Function(\"cfg\",\"\"\n+\"var s=this,c=cfg.visitCookie,src=cfg.clickThroughParam,scp=cfg.searchCenterParam,tv=cfg.tEvar,dl=',',cr,nc,q,g,gs,i,j,k,fnd,v=1,\"\n+\"t=new Date,cn=0,ca=new Array,aa=new Array,cs=new Array;t.setTime(t.getTime()+1800000);cr=s_new.c_r(c);if(cr){v=0;}ca=s_new.split(cr,dl);\"\n+\"if(s_new.un)aa=s_new.split(s_new.un,dl);else aa=s_new.split(s_new.account,dl);for(i=0;i<aa.length;i++){fnd = 0;for(j=0;j<ca.length;j++){if(aa[i] == ca[j]){fnd=1;}}if(!fnd){cs[cn]=aa[i];c\"\n+\"n++;}}if(cs.length){for(k=0;k<cs.length;k++){nc=(nc?nc+dl:'')+cs[k];}cr=(cr?cr+dl:'')+nc;v=1;}if(s_new.wd)q=s_new.wd.location.search.toLowerCase(\"\n+\");else q=s_new.w.location.search.toLowerCase();q=s_new.repl(q,'?','&');g=q.indexOf('&'+src.toLowerCase()+'=');gs=(scp)?q.indexOf('&'+scp.toLowerCase()+'='):-1;if(g>-1){v=1;}else i\"\n+\"f(gs>-1){v=0;s_new.vpr(tv,'SearchCenter Visitors');}if(!s_new.c_w(c,cr,t)){s_new.c_w(c,cr,0);}if(!s_new.c_r(c)){v=0;}return v>=1;\");\n\n\/********************************************************************\n *\n * Supporting functions that may be shared between plug-ins\n *\n *******************************************************************\/\n\n\/*\n * Utility Function: vpr - set the variable vs with value v\n *\/\ns_new.vpr=new Function(\"vs\",\"v\",\n\"if(typeof(v)!='undefined'){var s_new=this; eval('s_new.'+vs+'=\\\"'+v+'\\\"')}\");\n\n\/*\n * Utility Function: split v1.5 - split a string (JS 1.0 compatible)\n *\/\ns_new.split=new Function(\"l\",\"d\",\"\"\n+\"var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a\");\n\n\/*\n * Plugin Utility: Replace v1.0\n *\/\ns_new.repl=new Function(\"x\",\"o\",\"n\",\"\"\n+\"var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x.substring(i+o.length);i=x.indexOf(o,i+l)}return x\");\n\n\ns_new.maxDelay = adservConfig.maxDelay;\ns_new.loadModule(\"Integrate\")\ns_new.Integrate.onLoad=function(s,m) {\n    var adservCheck = s_new.partnerADSERVCheck(adservConfig);\n    if (adservCheck) {\n        s_new.Integrate.add(\"Sizmek_ACM\");\n        s_new.Integrate.Sizmek_ACM.tEvar=adservConfig.tEvar;\n        s_new.Integrate.Sizmek_ACM.aID=adservConfig.aID;\n        s_new.Integrate.Sizmek_ACM.cID=adservConfig.cID;\n        s_new.Integrate.Sizmek_ACM.gID=adservConfig.gID;\n        s_new.Integrate.Sizmek_ACM.tVar=adservConfig.tEvar;\n        s_new.Integrate.Sizmek_ACM.get(adservConfig.requestURL);\n\n        s_new.Integrate.Sizmek_ACM.setVars=function(s,p){\n            var\n                at=p.lastImpTime,\n                a1=p.lastImpSId,\n                a2=p.lastImpPId,\n                a3=p.lastImpId,\n                bt=p.lastClkTime,\n                b1=p.lastClkSId,\n                b2=p.lastClkPId,\n                b3=p.lastClkId;\n\n            if(((at&&a1&&a2&&a3)||(bt&&b1&&b2&&b3))&&!p.errorCode)s[p.tVar]=adservConfig.gID+(at?at:0)+\":\"+(a1?a1:0)+\":\"+(a2?a2:0)+\":\"+(a3?a3:0)+\":\"+(bt?bt:0)+\":\"+(b1?b1:0)+\":\"+(b2?b2:0)+\":\"+(b3?b3:0)\n        }\n    }\n}\n\n\n\n\/****************************** MODULES *****************************\/\nfunction AppMeasurement_Module_ActivityMap(f){function g(a,d){var b,c,n;if(a&&d&&(b=e.c[d]||(e.c[d]=d.split(\",\"))))for(n=0;n<b.length&&(c=b[n++]);)if(-1<a.indexOf(c))return null;p=1;return a}function q(a,d,b,c,e){var g,h;if(a.dataset&&(h=a.dataset[d]))g=h;else if(a.getAttribute)if(h=a.getAttribute(\"data-\"+b))g=h;else if(h=a.getAttribute(b))g=h;if(!g&&f.useForcedLinkTracking&&e&&(g=\"\",d=a.onclick?\"\"+a.onclick:\"\")){b=d.indexOf(c);var l,k;if(0<=b){for(b+=10;b<d.length&&0<=\"= \\t\\r\\n\".indexOf(d.charAt(b));)b++;\nif(b<d.length){h=b;for(l=k=0;h<d.length&&(\";\"!=d.charAt(h)||l);)l?d.charAt(h)!=l||k?k=\"\\\\\"==d.charAt(h)?!k:0:l=0:(l=d.charAt(h),'\"'!=l&&\"'\"!=l&&(l=0)),h++;if(d=d.substring(b,h))a.e=new Function(\"s\",\"var e;try{s.w.\"+c+\"=\"+d+\"}catch(e){}\"),a.e(f)}}}return g||e&&f.w[c]}function r(a,d,b){var c;return(c=e[d](a,b))&&(p?(p=0,c):g(k(c),e[d+\"Exclusions\"]))}function s(a,d,b){var c;if(a&&!(1===(c=a.nodeType)&&(c=a.nodeName)&&(c=c.toUpperCase())&&t[c])&&(1===a.nodeType&&(c=a.nodeValue)&&(d[d.length]=c),b.a||\nb.t||b.s||!a.getAttribute||((c=a.getAttribute(\"alt\"))?b.a=c:(c=a.getAttribute(\"title\"))?b.t=c:\"IMG\"==(\"\"+a.nodeName).toUpperCase()&&(c=a.getAttribute(\"src\")||a.src)&&(b.s=c)),(c=a.childNodes)&&c.length))for(a=0;a<c.length;a++)s(c[a],d,b)}function k(a){if(null==a||void 0==a)return a;try{return a.replace(RegExp(\"^[\\\\s\\\\n\\\\f\\\\r\\\\t\\t-\\r \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u205f\\u3000\\ufeff]+\",\"mg\"),\"\").replace(RegExp(\"[\\\\s\\\\n\\\\f\\\\r\\\\t\\t-\\r \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u205f\\u3000\\ufeff]+$\",\n\"mg\"),\"\").replace(RegExp(\"[\\\\s\\\\n\\\\f\\\\r\\\\t\\t-\\r \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u205f\\u3000\\ufeff]{1,}\",\"mg\"),\" \").substring(0,254)}catch(d){}}var e=this;e.s=f;var m=window;m.s_c_in||(m.s_c_il=[],m.s_c_in=0);e._il=m.s_c_il;e._in=m.s_c_in;e._il[e._in]=e;m.s_c_in++;e._c=\"s_m\";e.c={};var p=0,t={SCRIPT:1,STYLE:1,LINK:1,CANVAS:1};e._g=function(){var a,d,b,c=f.contextData,e=f.linkObject;(a=f.pageName||f.pageURL)&&(d=r(e,\"link\",f.linkName))&&(b=r(e,\"region\"))&&(c[\"a.activitymap.page\"]=a.substring(0,\n255),c[\"a.activitymap.link\"]=128<d.length?d.substring(0,128):d,c[\"a.activitymap.region\"]=127<b.length?b.substring(0,127):b,c[\"a.activitymap.pageIDType\"]=f.pageName?1:0)};e.link=function(a,d){var b;if(d)b=g(k(d),e.linkExclusions);else if((b=a)&&!(b=q(a,\"sObjectId\",\"s-object-id\",\"s_objectID\",1))){var c,f;(f=g(k(a.innerText||a.textContent),e.linkExclusions))||(s(a,c=[],b={a:void 0,t:void 0,s:void 0}),(f=g(k(c.join(\"\"))))||(f=g(k(b.a?b.a:b.t?b.t:b.s?b.s:void 0)))||!(c=(c=a.tagName)&&c.toUpperCase?c.toUpperCase():\n\"\")||(\"INPUT\"==c||\"SUBMIT\"==c&&a.value?f=g(k(a.value)):\"IMAGE\"==c&&a.src&&(f=g(k(a.src)))));b=f}return b};e.region=function(a){for(var d,b=e.regionIDAttribute||\"id\";a&&(a=a.parentNode);){if(d=q(a,b,b,b))return d;if(\"BODY\"==a.nodeName)return\"BODY\"}}}\n\/* End ActivityMap Module *\/\nfunction AppMeasurement_Module_Integrate(l){var c=this;c.s=l;var e=window;e.s_c_in||(e.s_c_il=[],e.s_c_in=0);c._il=e.s_c_il;c._in=e.s_c_in;c._il[c._in]=c;e.s_c_in++;c._c=\"s_m\";c.list=[];c.add=function(d,b){var a;b||(b=\"s_Integrate_\"+d);e[b]||(e[b]={});a=c[d]=e[b];a.a=d;a.e=c;a._c=0;a._d=0;void 0==a.disable&&(a.disable=0);a.get=function(b,d){var f=document,h=f.getElementsByTagName(\"HEAD\"),k;if(!a.disable&&(d||(v=\"s_\"+c._in+\"_Integrate_\"+a.a+\"_get_\"+a._c),a._c++,a.VAR=v,a.CALLBACK=\"s_c_il[\"+c._in+\"].\"+\na.a+\".callback\",a.delay(),h=h&&0<h.length?h[0]:f.body))try{k=f.createElement(\"SCRIPT\"),k.type=\"text\/javascript\",k.setAttribute(\"async\",\"async\"),k.src=c.c(a,b),0>b.indexOf(\"[CALLBACK]\")&&(k.onload=k.onreadystatechange=function(){a.callback(e[v])}),h.firstChild?h.insertBefore(k,h.firstChild):h.appendChild(k)}catch(l){}};a.callback=function(b){var c;if(b)for(c in b)Object.prototype[c]||(a[c]=b[c]);a.ready()};a.beacon=function(b){var d=\"s_i_\"+c._in+\"_Integrate_\"+a.a+\"_\"+a._c;a.disable||(a._c++,d=e[d]=\nnew Image,d.src=c.c(a,b))};a.script=function(b){a.get(b,1)};a.delay=function(){a._d++};a.ready=function(){a._d--;a.disable||l.delayReady()};c.list.push(d)};c._g=function(d){var b,a=(d?\"use\":\"set\")+\"Vars\";for(d=0;d<c.list.length;d++)if((b=c[c.list[d]])&&!b.disable&&b[a])try{b[a](l,b)}catch(e){}};c._t=function(){c._g(1)};c._d=function(){var d,b;for(d=0;d<c.list.length;d++)if((b=c[c.list[d]])&&!b.disable&&0<b._d)return 1;return 0};c.c=function(c,b){var a,e,g,f;\"http\"!=b.toLowerCase().substring(0,4)&&\n(b=\"http:\/\/\"+b);l.ssl&&(b=l.replace(b,\"http:\",\"https:\"));c.RAND=Math.floor(1E13*Math.random());for(a=0;0<=a;)a=b.indexOf(\"[\",a),0<=a&&(e=b.indexOf(\"]\",a),e>a&&(g=b.substring(a+1,e),2<g.length&&\"s.\"==g.substring(0,2)?(f=l[g.substring(2)])||(f=\"\"):(f=\"\"+c[g],f!=c[g]&&parseFloat(f)!=c[g]&&(g=0)),g&&(b=b.substring(0,a)+encodeURIComponent(f)+b.substring(e+1)),a=e));return b}}\n\n\/*\nAppMeasurement for JavaScript version: 2.5.0\n*\/\nfunction AppMeasurement(r){var a=this;a.version=\"2.5.0\";var k=window;k.s_c_in||(k.s_c_il=[],k.s_c_in=0);a._il=k.s_c_il;a._in=k.s_c_in;a._il[a._in]=a;k.s_c_in++;a._c=\"s_c\";var p=k.AppMeasurement.Pb;p||(p=null);var n=k,m,s;try{for(m=n.parent,s=n.location;m&&m.location&&s&&\"\"+m.location!=\"\"+s&&n.location&&\"\"+m.location!=\"\"+n.location&&m.location.host==s.host;)n=m,m=n.parent}catch(u){}a.F=function(a){try{console.log(a)}catch(b){}};a.Ma=function(a){return\"\"+parseInt(a)==\"\"+a};a.replace=function(a,b,d){return!a||\n0>a.indexOf(b)?a:a.split(b).join(d)};a.escape=function(c){var b,d;if(!c)return c;c=encodeURIComponent(c);for(b=0;7>b;b++)d=\"+~!*()'\".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,\"%\"+d.charCodeAt(0).toString(16).toUpperCase()));return c};a.unescape=function(c){if(!c)return c;c=0<=c.indexOf(\"+\")?a.replace(c,\"+\",\" \"):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)};a.wb=function(){var c=k.location.hostname,b=a.fpCookieDomainPeriods,d;b||(b=a.cookieDomainPeriods);if(c&&!a.Ea&&!\/^[0-9.]+$\/.test(c)&&\n(b=b?parseInt(b):2,b=2<b?b:2,d=c.lastIndexOf(\".\"),0<=d)){for(;0<=d&&1<b;)d=c.lastIndexOf(\".\",d-1),b--;a.Ea=0<d?c.substring(d):c}return a.Ea};a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=\" \"+a.d.cookie,d=b.indexOf(\" \"+c+\"=\"),f=0>d?d:b.indexOf(\";\",d);c=0>d?\"\":a.unescape(b.substring(d+2+c.length,0>f?b.length:f));return\"[[B]]\"!=c?c:\"\"};a.c_w=a.cookieWrite=function(c,b,d){var f=a.wb(),e=a.cookieLifetime,g;b=\"\"+b;e=e?(\"\"+e).toUpperCase():\"\";d&&\"SESSION\"!=e&&\"NONE\"!=e&&((g=\"\"!=b?parseInt(e?e:0):-60)?\n(d=new Date,d.setTime(d.getTime()+1E3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0))));return c&&\"NONE\"!=e?(a.d.cookie=a.escape(c)+\"=\"+a.escape(\"\"!=b?b:\"[[B]]\")+\"; path=\/;\"+(d&&\"SESSION\"!=e?\" expires=\"+d.toUTCString()+\";\":\"\")+(f?\" domain=\"+f+\";\":\"\"),a.cookieRead(c)==b):0};a.L=[];a.ia=function(c,b,d){if(a.Fa)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,h=[\"webkitvisibilitychange\",\"visibilitychange\"];g||(g=a.d.webkitVisibilityState);\nif(g&&\"prerender\"==g){if(!a.ja)for(a.ja=1,d=0;d<h.length;d++)a.d.addEventListener(h[d],function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState);\"visible\"==c&&(a.ja=0,a.delayReady())});f=1;e=0}else d||a.p(\"_d\")&&(f=1);f&&(a.L.push({m:c,a:b,t:e}),a.ja||setTimeout(a.delayReady,a.maxDelay));return f};a.delayReady=function(){var c=(new Date).getTime(),b=0,d;for(a.p(\"_d\")?b=1:a.xa();0<a.L.length;){d=a.L.shift();if(b&&!d.t&&d.t>c){a.L.unshift(d);setTimeout(a.delayReady,parseInt(a.maxDelay\/2));\nbreak}a.Fa=1;a[d.m].apply(a,d.a);a.Fa=0}};a.setAccount=a.sa=function(c){var b,d;if(!a.ia(\"setAccount\",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(\",\")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||a.allAccounts.push(b[d]);else a.allAccounts=c.split(\",\")};a.foreachVar=function(c,b){var d,f,e,g,h=\"\";e=f=\"\";if(a.lightProfileID)d=a.P,(h=a.lightTrackVars)&&(h=\",\"+h+\",\"+a.na.join(\",\")+\",\");else{d=a.g;if(a.pe||a.linkType)h=a.linkTrackVars,f=a.linkTrackEvents,\na.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(h=a[e].Nb,f=a[e].Mb));h&&(h=\",\"+h+\",\"+a.H.join(\",\")+\",\");f&&h&&(h+=\",events,\")}b&&(b=\",\"+b+\",\");for(f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!h||0<=h.indexOf(\",\"+e+\",\"))&&(!b||0<=b.indexOf(\",\"+e+\",\"))&&c(e,g)};a.r=function(c,b,d,f,e){var g=\"\",h,l,k,q,m=0;\"contextData\"==c&&(c=\"c\");if(b){for(h in b)if(!(Object.prototype[h]||e&&h.substring(0,e.length)!=e)&&b[h]&&(!d||0<=d.indexOf(\",\"+(f?f+\".\":\"\")+h+\",\"))){k=!1;if(m)for(l=0;l<m.length;l++)h.substring(0,\nm[l].length)==m[l]&&(k=!0);if(!k&&(\"\"==g&&(g+=\"&\"+c+\".\"),l=b[h],e&&(h=h.substring(e.length)),0<h.length))if(k=h.indexOf(\".\"),0<k)l=h.substring(0,k),k=(e?e:\"\")+l+\".\",m||(m=[]),m.push(k),g+=a.r(l,b,d,f,k);else if(\"boolean\"==typeof l&&(l=l?\"true\":\"false\"),l){if(\"retrieveLightData\"==f&&0>e.indexOf(\".contextData.\"))switch(k=h.substring(0,4),q=h.substring(4),h){case \"transactionID\":h=\"xact\";break;case \"channel\":h=\"ch\";break;case \"campaign\":h=\"v0\";break;default:a.Ma(q)&&(\"prop\"==k?h=\"c\"+q:\"eVar\"==k?h=\"v\"+\nq:\"list\"==k?h=\"l\"+q:\"hier\"==k&&(h=\"h\"+q,l=l.substring(0,255)))}g+=\"&\"+a.escape(h)+\"=\"+a.escape(l)}}\"\"!=g&&(g+=\"&.\"+c)}return g};a.usePostbacks=0;a.zb=function(){var c=\"\",b,d,f,e,g,h,l,k,q=\"\",m=\"\",n=e=\"\";if(a.lightProfileID)b=a.P,(q=a.lightTrackVars)&&(q=\",\"+q+\",\"+a.na.join(\",\")+\",\");else{b=a.g;if(a.pe||a.linkType)q=a.linkTrackVars,m=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(q=a[e].Nb,m=a[e].Mb));q&&(q=\",\"+q+\",\"+a.H.join(\",\")+\",\");m&&(m=\",\"+m+\",\",q&&(q+=\n\",events,\"));a.events2&&(n+=(\"\"!=n?\",\":\"\")+a.events2)}if(a.visitor&&a.visitor.getCustomerIDs){e=p;if(g=a.visitor.getCustomerIDs())for(d in g)Object.prototype[d]||(f=g[d],\"object\"==typeof f&&(e||(e={}),f.id&&(e[d+\".id\"]=f.id),f.authState&&(e[d+\".as\"]=f.authState)));e&&(c+=a.r(\"cid\",e))}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.r(\"d\",a.AudienceManagement.getEventCallConfigParams()));for(d=0;d<b.length;d++){e=b[d];g=a[e];f=e.substring(0,4);h=e.substring(4);g||(\"events\"==e&&n?(g=n,n=\n\"\"):\"marketingCloudOrgID\"==e&&a.visitor&&(g=a.visitor.marketingCloudOrgID));if(g&&(!q||0<=q.indexOf(\",\"+e+\",\"))){switch(e){case \"customerPerspective\":e=\"cp\";break;case \"marketingCloudOrgID\":e=\"mcorgid\";break;case \"supplementalDataID\":e=\"sdid\";break;case \"timestamp\":e=\"ts\";break;case \"dynamicVariablePrefix\":e=\"D\";break;case \"visitorID\":e=\"vid\";break;case \"marketingCloudVisitorID\":e=\"mid\";break;case \"analyticsVisitorID\":e=\"aid\";break;case \"audienceManagerLocationHint\":e=\"aamlh\";break;case \"audienceManagerBlob\":e=\n\"aamb\";break;case \"authState\":e=\"as\";break;case \"pageURL\":e=\"g\";255<g.length&&(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case \"pageURLRest\":e=\"-g\";break;case \"referrer\":e=\"r\";break;case \"vmk\":case \"visitorMigrationKey\":e=\"vmt\";break;case \"visitorMigrationServer\":e=\"vmf\";a.ssl&&a.visitorMigrationServerSecure&&(g=\"\");break;case \"visitorMigrationServerSecure\":e=\"vmf\";!a.ssl&&a.visitorMigrationServer&&(g=\"\");break;case \"charSet\":e=\"ce\";break;case \"visitorNamespace\":e=\"ns\";break;case \"cookieDomainPeriods\":e=\n\"cdp\";break;case \"cookieLifetime\":e=\"cl\";break;case \"variableProvider\":e=\"vvp\";break;case \"currencyCode\":e=\"cc\";break;case \"channel\":e=\"ch\";break;case \"transactionID\":e=\"xact\";break;case \"campaign\":e=\"v0\";break;case \"latitude\":e=\"lat\";break;case \"longitude\":e=\"lon\";break;case \"resolution\":e=\"s\";break;case \"colorDepth\":e=\"c\";break;case \"javascriptVersion\":e=\"j\";break;case \"javaEnabled\":e=\"v\";break;case \"cookiesEnabled\":e=\"k\";break;case \"browserWidth\":e=\"bw\";break;case \"browserHeight\":e=\"bh\";break;\ncase \"connectionType\":e=\"ct\";break;case \"homepage\":e=\"hp\";break;case \"events\":n&&(g+=(\"\"!=g?\",\":\"\")+n);if(m)for(h=g.split(\",\"),g=\"\",f=0;f<h.length;f++)l=h[f],k=l.indexOf(\"=\"),0<=k&&(l=l.substring(0,k)),k=l.indexOf(\":\"),0<=k&&(l=l.substring(0,k)),0<=m.indexOf(\",\"+l+\",\")&&(g+=(g?\",\":\"\")+h[f]);break;case \"events2\":g=\"\";break;case \"contextData\":c+=a.r(\"c\",a[e],q,e);g=\"\";break;case \"lightProfileID\":e=\"mtp\";break;case \"lightStoreForSeconds\":e=\"mtss\";a.lightProfileID||(g=\"\");break;case \"lightIncrementBy\":e=\n\"mti\";a.lightProfileID||(g=\"\");break;case \"retrieveLightProfiles\":e=\"mtsr\";break;case \"deleteLightProfiles\":e=\"mtsd\";break;case \"retrieveLightData\":a.retrieveLightProfiles&&(c+=a.r(\"mts\",a[e],q,e));g=\"\";break;default:a.Ma(h)&&(\"prop\"==f?e=\"c\"+h:\"eVar\"==f?e=\"v\"+h:\"list\"==f?e=\"l\"+h:\"hier\"==f&&(e=\"h\"+h,g=g.substring(0,255)))}g&&(c+=\"&\"+e+\"=\"+(\"pev\"!=e.substring(0,3)?a.escape(g):g))}\"pev3\"==e&&a.e&&(c+=a.e)}return c};a.D=function(a){var b=a.tagName;if(\"undefined\"!=\"\"+a.Sb||\"undefined\"!=\"\"+a.Ib&&\"HTML\"!=\n(\"\"+a.Ib).toUpperCase())return\"\";b=b&&b.toUpperCase?b.toUpperCase():\"\";\"SHAPE\"==b&&(b=\"\");b&&((\"INPUT\"==b||\"BUTTON\"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b=\"A\"));return b};a.Ia=function(a){var b=k.location,d=a.href?a.href:\"\",f,e,g;f=d.indexOf(\":\");e=d.indexOf(\"?\");g=d.indexOf(\"\/\");d&&(0>f||0<=e&&f>e||0<=g&&f>g)&&(e=a.protocol&&1<a.protocol.length?a.protocol:b.protocol?b.protocol:\"\",f=b.pathname.lastIndexOf(\"\/\"),d=(e?e+\"\/\/\":\"\")+(a.host?a.host:b.host?b.host:\"\")+(\"\/\"!=d.substring(0,\n1)?b.pathname.substring(0,0>f?0:f)+\"\/\":\"\")+d);return d};a.M=function(c){var b=a.D(c),d,f,e=\"\",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||\"A\"!=b&&\"AREA\"!=b||f&&d&&!(0>d.toLowerCase().indexOf(\"javascript\"))?f?(e=a.replace(a.replace(a.replace(a.replace(\"\"+f,\"\\r\",\"\"),\"\\n\",\"\"),\"\\t\",\"\"),\" \",\"\"),g=2):\"INPUT\"==b||\"SUBMIT\"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):\"IMAGE\"==b&&c.src&&(e=c.src):e=a.Ia(c),e)?{id:e.substring(0,100),type:g}:0};a.Qb=function(c){for(var b=\na.D(c),d=a.M(c);c&&!d&&\"BODY\"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=a.D(c),d=a.M(c);d&&\"BODY\"!=b||(c=0);c&&(b=c.onclick?\"\"+c.onclick:\"\",0<=b.indexOf(\".tl(\")||0<=b.indexOf(\".trackLink(\"))&&(c=0);return c};a.Hb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,h;a.oa=1;d||(a.oa=0,d=a.clickObject);if(d){c=a.D(d);for(b=a.M(d);d&&!b&&\"BODY\"!=c;)if(d=d.parentElement?d.parentElement:d.parentNode)c=a.D(d),b=a.M(d);b&&\"BODY\"!=c||(d=0);if(d&&!a.linkObject){var l=d.onclick?\"\"+d.onclick:\n\"\";if(0<=l.indexOf(\".tl(\")||0<=l.indexOf(\".trackLink(\"))d=0}}else a.oa=1;!e&&d&&(e=a.Ia(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf(\"?\"),0<=g&&(e=e.substring(0,g)));if(!f&&e){var m=0,q=0,n;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(l=e.toLowerCase(),g=l.indexOf(\"?\"),h=l.indexOf(\"#\"),0<=g?0<=h&&h<g&&(g=h):g=h,0<=g&&(l=l.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(\",\"),h=0;h<g.length;h++)(n=g[h])&&l.substring(l.length-(n.length+1))==\".\"+n&&(f=\"d\");if(a.trackExternalLinks&&\n!f&&(l=e.toLowerCase(),a.La(l)&&(a.linkInternalFilters||(a.linkInternalFilters=k.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(\",\"),m=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(\",\")),g))){for(h=0;h<g.length;h++)n=g[h],0<=l.indexOf(n)&&(q=1);q?m&&(f=\"e\"):m||(f=\"e\")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e=\"\",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),k.s_objectID&&(b.id=\nk.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e=\"&pid=\"+a.escape(f.substring(0,255))+(e?\"&pidt=\"+e:\"\")+\"&oid=\"+a.escape(b.id.substring(0,100))+(b.type?\"&oidt=\"+b.type:\"\")+\"&ot=\"+c+(d?\"&oi=\"+d:\"\")))};a.Ab=function(){var c=a.oa,b=a.linkType,d=a.linkURL,f=a.linkName;b&&(d||f)&&(b=b.toLowerCase(),\"d\"!=b&&\"e\"!=b&&(b=\"o\"),a.pe=\"lnk_\"+b,a.pev1=d?a.escape(d):\"\",a.pev2=f?a.escape(f):\"\",c=1);a.abort&&(c=0);if(a.trackClickMap||a.trackInlineStats||a.ActivityMap){var b={},d=0,e=a.cookieRead(\"s_sq\"),g=e?e.split(\"&\"):\n0,h,l,k,e=0;if(g)for(h=0;h<g.length;h++)l=g[h].split(\"=\"),f=a.unescape(l[0]).split(\",\"),l=a.unescape(l[1]),b[l]=f;f=a.account.split(\",\");h={};for(k in a.contextData)k&&!Object.prototype[k]&&\"a.activitymap.\"==k.substring(0,14)&&(h[k]=a.contextData[k],a.contextData[k]=\"\");a.e=a.r(\"c\",h)+(a.e?a.e:\"\");if(c||a.e){c&&!a.e&&(e=1);for(l in b)if(!Object.prototype[l])for(k=0;k<f.length;k++)for(e&&(g=b[l].join(\",\"),g==a.account&&(a.e+=(\"&\"!=l.charAt(0)?\"&\":\"\")+l,b[l]=[],d=1)),h=0;h<b[l].length;h++)g=b[l][h],\ng==f[k]&&(e&&(a.e+=\"&u=\"+a.escape(g)+(\"&\"!=l.charAt(0)?\"&\":\"\")+l+\"&u=0\"),b[l].splice(h,1),d=1);c||(d=1);if(d){e=\"\";h=2;!c&&a.e&&(e=a.escape(f.join(\",\"))+\"=\"+a.escape(a.e),h=1);for(l in b)!Object.prototype[l]&&0<h&&0<b[l].length&&(e+=(e?\"&\":\"\")+a.escape(b[l].join(\",\"))+\"=\"+a.escape(l),h--);a.cookieWrite(\"s_sq\",e)}}}return c};a.Bb=function(){if(!a.Lb){var c=new Date,b=n.location,d,f,e=f=d=\"\",g=\"\",h=\"\",l=\"1.2\",k=a.cookieWrite(\"s_cc\",\"true\",0)?\"Y\":\"N\",m=\"\",p=\"\";if(c.setUTCDate&&(l=\"1.3\",(0).toPrecision&&\n(l=\"1.5\",c=[],c.forEach))){l=\"1.6\";f=0;d={};try{f=new Iterator(d),f.next&&(l=\"1.7\",c.reduce&&(l=\"1.8\",l.trim&&(l=\"1.8.1\",Date.parse&&(l=\"1.8.2\",Object.create&&(l=\"1.8.5\")))))}catch(r){}}d=screen.width+\"x\"+screen.height;e=navigator.javaEnabled()?\"Y\":\"N\";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;h=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior(\"#default#homePage\"),m=a.b.Rb(b)?\"Y\":\"N\"}catch(s){}try{a.b.addBehavior(\"#default#clientCaps\"),\np=a.b.connectionType}catch(t){}a.resolution=d;a.colorDepth=f;a.javascriptVersion=l;a.javaEnabled=e;a.cookiesEnabled=k;a.browserWidth=g;a.browserHeight=h;a.connectionType=p;a.homepage=m;a.Lb=1}};a.Q={};a.loadModule=function(c,b){var d=a.Q[c];if(!d){d=k[\"AppMeasurement_Module_\"+c]?new k[\"AppMeasurement_Module_\"+c](a):{};a.Q[c]=a[c]=d;d.eb=function(){return d.ib};d.jb=function(b){if(d.ib=b)a[c+\"_onLoad\"]=b,a.ia(c+\"_onLoad\",[a,d],1)||b(a,d)};try{Object.defineProperty?Object.defineProperty(d,\"onLoad\",\n{get:d.eb,set:d.jb}):d._olc=1}catch(f){d._olc=1}}b&&(a[c+\"_onLoad\"]=b,a.ia(c+\"_onLoad\",[a,d],1)||b(a,d))};a.p=function(c){var b,d;for(b in a.Q)if(!Object.prototype[b]&&(d=a.Q[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0};a.Db=function(){var c=Math.floor(1E13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d=\"s_vsn_\"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?\"_\"+d:\"\"),f=a.cookieRead(d);if(b){b*=100;f&&(f=parseInt(f));if(!f){if(!a.cookieWrite(d,\nc))return 0;f=c}if(f%1E4>b)return 0}return 1};a.R=function(c,b){var d,f,e,g,h,l;for(d=0;2>d;d++)for(f=0<d?a.Aa:a.g,e=0;e<f.length;e++)if(g=f[e],(h=c[g])||c[\"!\"+g]){if(!b&&(\"contextData\"==g||\"retrieveLightData\"==g)&&a[g])for(l in a[g])h[l]||(h[l]=a[g][l]);a[g]=h}};a.Va=function(c,b){var d,f,e,g;for(d=0;2>d;d++)for(f=0<d?a.Aa:a.g,e=0;e<f.length;e++)g=f[e],c[g]=a[g],b||c[g]||(c[\"!\"+g]=1)};a.vb=function(a){var b,d,f,e,g,h=0,l,k=\"\",m=\"\";if(a&&255<a.length&&(b=\"\"+a,d=b.indexOf(\"?\"),0<d&&(l=b.substring(d+\n1),b=b.substring(0,d),e=b.toLowerCase(),f=0,\"http:\/\/\"==e.substring(0,7)?f+=7:\"https:\/\/\"==e.substring(0,8)&&(f+=8),d=e.indexOf(\"\/\",f),0<d&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,d),0<=e.indexOf(\"google\")?h=\",q,ie,start,search_key,word,kw,cd,\":0<=e.indexOf(\"yahoo.co\")&&(h=\",p,ei,\"),h&&l)))){if((a=l.split(\"&\"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf(\"=\"),0<d&&0<=h.indexOf(\",\"+e.substring(0,d)+\",\")?k+=(k?\"&\":\"\")+e:m+=(m?\"&\":\"\")+e;k&&m?l=k+\"&\"+m:m=\"\"}d=253-(l.length-m.length)-\nb.length;a=b+(0<d?g.substring(0,d):\"\")+\"?\"+l}return a};a.ab=function(c){var b=a.d.visibilityState,d=[\"webkitvisibilitychange\",\"visibilitychange\"];b||(b=a.d.webkitVisibilityState);if(b&&\"prerender\"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);\"visible\"==b&&c()});return!1}return!0};a.ea=!1;a.J=!1;a.lb=function(){a.J=!0;a.j()};a.ca=!1;a.V=!1;a.hb=function(c){a.marketingCloudVisitorID=c;a.V=!0;a.j()};a.fa=!1;a.W=!1;a.mb=\nfunction(c){a.visitorOptedOut=c;a.W=!0;a.j()};a.Z=!1;a.S=!1;a.Xa=function(c){a.analyticsVisitorID=c;a.S=!0;a.j()};a.ba=!1;a.U=!1;a.Za=function(c){a.audienceManagerLocationHint=c;a.U=!0;a.j()};a.aa=!1;a.T=!1;a.Ya=function(c){a.audienceManagerBlob=c;a.T=!0;a.j()};a.$a=function(c){a.maxDelay||(a.maxDelay=250);return a.p(\"_d\")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0};a.da=!1;a.I=!1;a.xa=function(){a.I=!0;a.j()};a.isReadyToTrack=function(){var c=!0,b=a.visitor,d,f,e;a.ea||a.J||(a.ab(a.lb)?a.J=\n!0:a.ea=!0);if(a.ea&&!a.J)return!1;b&&b.isAllowed()&&(a.ca||a.marketingCloudVisitorID||!b.getMarketingCloudVisitorID||(a.ca=!0,a.marketingCloudVisitorID=b.getMarketingCloudVisitorID([a,a.hb]),a.marketingCloudVisitorID&&(a.V=!0)),a.fa||a.visitorOptedOut||!b.isOptedOut||(a.fa=!0,a.visitorOptedOut=b.isOptedOut([a,a.mb]),a.visitorOptedOut!=p&&(a.W=!0)),a.Z||a.analyticsVisitorID||!b.getAnalyticsVisitorID||(a.Z=!0,a.analyticsVisitorID=b.getAnalyticsVisitorID([a,a.Xa]),a.analyticsVisitorID&&(a.S=!0)),a.ba||\na.audienceManagerLocationHint||!b.getAudienceManagerLocationHint||(a.ba=!0,a.audienceManagerLocationHint=b.getAudienceManagerLocationHint([a,a.Za]),a.audienceManagerLocationHint&&(a.U=!0)),a.aa||a.audienceManagerBlob||!b.getAudienceManagerBlob||(a.aa=!0,a.audienceManagerBlob=b.getAudienceManagerBlob([a,a.Ya]),a.audienceManagerBlob&&(a.T=!0)),c=a.ca&&!a.V&&!a.marketingCloudVisitorID,b=a.Z&&!a.S&&!a.analyticsVisitorID,d=a.ba&&!a.U&&!a.audienceManagerLocationHint,f=a.aa&&!a.T&&!a.audienceManagerBlob,\ne=a.fa&&!a.W,c=c||b||d||f||e?!1:!0);a.da||a.I||(a.$a(a.xa)?a.I=!0:a.da=!0);a.da&&!a.I&&(c=!1);return c};a.o=p;a.u=0;a.callbackWhenReadyToTrack=function(c,b,d){var f;f={};f.qb=c;f.pb=b;f.nb=d;a.o==p&&(a.o=[]);a.o.push(f);0==a.u&&(a.u=setInterval(a.j,100))};a.j=function(){var c;if(a.isReadyToTrack()&&(a.kb(),a.o!=p))for(;0<a.o.length;)c=a.o.shift(),c.pb.apply(c.qb,c.nb)};a.kb=function(){a.u&&(clearInterval(a.u),a.u=0)};a.fb=function(c){var b,d,f=p,e=p;if(!a.isReadyToTrack()){b=[];if(c!=p)for(d in f=\n{},c)f[d]=c[d];e={};a.Va(e,!0);b.push(f);b.push(e);a.callbackWhenReadyToTrack(a,a.track,b);return!0}return!1};a.xb=function(){var c=a.cookieRead(\"s_fid\"),b=\"\",d=\"\",f;f=8;var e=4;if(!c||0>c.indexOf(\"-\")){for(c=0;16>c;c++)f=Math.floor(Math.random()*f),b+=\"0123456789ABCDEF\".substring(f,f+1),f=Math.floor(Math.random()*e),d+=\"0123456789ABCDEF\".substring(f,f+1),f=e=16;c=b+\"-\"+d}a.cookieWrite(\"s_fid\",c,1)||(c=0);return c};a.t=a.track=function(c,b){var d,f=new Date,e=\"s\"+Math.floor(f.getTime()\/108E5)%10+\nMath.floor(1E13*Math.random()),g=f.getYear(),g=\"t=\"+a.escape(f.getDate()+\"\/\"+f.getMonth()+\"\/\"+(1900>g?g+1900:g)+\" \"+f.getHours()+\":\"+f.getMinutes()+\":\"+f.getSeconds()+\" \"+f.getDay()+\" \"+f.getTimezoneOffset());a.visitor&&a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState());a.p(\"_s\");a.fb(c)||(b&&a.R(b),c&&(d={},a.Va(d,0),a.R(c)),a.Db()&&!a.visitorOptedOut&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=a.xb()),a.Hb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||\n(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()\/1E3)),f=k.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Wa||(f=a.Util.getQueryParam(\"adobe_mc_ref\",null,null,!0),a.referrer=f||void 0===f?void 0===f?\"\":f:n.document.referrer),a.Wa=1,a.referrer=a.vb(a.referrer),a.p(\"_g\")),a.Ab()&&!a.abort&&(a.visitor&&!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID(\"AppMeasurement:\"+a._in,a.expectSupplementalData?!1:!0)),\na.Bb(),g+=a.zb(),a.Gb(e,g),a.p(\"_t\"),a.referrer=\"\"))),c&&a.R(d,1));a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=k.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0};a.za=[];a.registerPreTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);\"function\"==typeof c?a.za.push([c,b]):a.debugTracking&&a.F(\"DEBUG: Non function type passed to registerPreTrackCallback\")};a.cb=function(c){a.wa(a.za,\nc)};a.ya=[];a.registerPostTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);\"function\"==typeof c?a.ya.push([c,b]):a.debugTracking&&a.F(\"DEBUG: Non function type passed to registerPostTrackCallback\")};a.bb=function(c){a.wa(a.ya,c)};a.wa=function(c,b){if(\"object\"==typeof c)for(var d=0;d<c.length;d++){var f=c[d][0],e=c[d][1];e.unshift(b);if(\"function\"==typeof f)try{f.apply(null,e)}catch(g){a.debugTracking&&a.F(g.message)}}};a.tl=a.trackLink=function(c,b,d,f,e){a.linkObject=\nc;a.linkType=b;a.linkName=d;e&&(a.l=c,a.A=e);return a.track(f)};a.trackLight=function(c,b,d,f){a.lightProfileID=c;a.lightStoreForSeconds=b;a.lightIncrementBy=d;return a.track(f)};a.clearVars=function(){var c,b;for(c=0;c<a.g.length;c++)if(b=a.g[c],\"prop\"==b.substring(0,4)||\"eVar\"==b.substring(0,4)||\"hier\"==b.substring(0,4)||\"list\"==b.substring(0,4)||\"channel\"==b||\"events\"==b||\"eventList\"==b||\"products\"==b||\"productList\"==b||\"purchaseID\"==b||\"transactionID\"==b||\"state\"==b||\"zip\"==b||\"campaign\"==b)a[b]=\nvoid 0};a.tagContainerMarker=\"\";a.Gb=function(c,b){var d,f=a.trackingServer;d=\"\";var e=a.dc,g=\"sc.\",h=a.visitorNamespace;f?a.trackingServerSecure&&a.ssl&&(f=a.trackingServerSecure):(h||(h=a.account,f=h.indexOf(\",\"),0<=f&&(h=h.substring(0,f)),h=h.replace(\/[^A-Za-z0-9]\/g,\"\")),d||(d=\"2o7.net\"),e=e?(\"\"+e).toLowerCase():\"d1\",\"2o7.net\"==d&&(\"d1\"==e?e=\"112\":\"d2\"==e&&(e=\"122\"),g=\"\"),f=h+\".\"+e+\".\"+g+d);d=a.ssl?\"https:\/\/\":\"http:\/\/\";e=a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks;d+=\nf+\"\/b\/ss\/\"+a.account+\"\/\"+(a.mobile?\"5.\":\"\")+(e?\"10\":\"1\")+\"\/JS-\"+a.version+(a.Kb?\"T\":\"\")+(a.tagContainerMarker?\"-\"+a.tagContainerMarker:\"\")+\"\/\"+c+\"?AQB=1&ndh=1&pf=1&\"+(e?\"callback=s_c_il[\"+a._in+\"].doPostbacks&et=1&\":\"\")+b+\"&AQE=1\";a.cb(d);a.tb(d);a.ka()};a.Ua=\/{(%?)(.*?)(%?)}\/;a.Ob=RegExp(a.Ua.source,\"g\");a.ub=function(c){if(\"object\"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=c.dests[b];if(\"string\"==typeof d.c&&\"aa.\"==d.id.substr(0,3))for(var f=d.c.match(a.Ob),e=0;e<f.length;++e){var g=\nf[e],h=g.match(a.Ua),k=\"\";\"%\"==h[1]&&\"timezone_offset\"==h[2]?k=(new Date).getTimezoneOffset():\"%\"==h[1]&&\"timestampz\"==h[2]&&(k=a.yb());d.c=d.c.replace(g,a.escape(k))}}};a.yb=function(){var c=new Date,b=new Date(6E4*Math.abs(c.getTimezoneOffset()));return a.k(4,c.getFullYear())+\"-\"+a.k(2,c.getMonth()+1)+\"-\"+a.k(2,c.getDate())+\"T\"+a.k(2,c.getHours())+\":\"+a.k(2,c.getMinutes())+\":\"+a.k(2,c.getSeconds())+(0<c.getTimezoneOffset()?\"-\":\"+\")+a.k(2,b.getUTCHours())+\":\"+a.k(2,b.getUTCMinutes())};a.k=function(a,\nb){return(Array(a+1).join(0)+b).slice(-a)};a.ta={};a.doPostbacks=function(c){if(\"object\"==typeof c)if(a.ub(c),\"object\"==typeof a.AudienceManagement&&\"function\"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&\"function\"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(c);else if(\"object\"==typeof c&&\"object\"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=c.dests[b];\"object\"==typeof d&&\"string\"==typeof d.c&&\"string\"==typeof d.id&&\"aa.\"==d.id.substr(0,\n3)&&(a.ta[d.id]=new Image,a.ta[d.id].alt=\"\",a.ta[d.id].src=d.c)}};a.tb=function(c){a.i||a.Cb();a.i.push(c);a.ma=a.C();a.Sa()};a.Cb=function(){a.i=a.Eb();a.i||(a.i=[])};a.Eb=function(){var c,b;if(a.ra()){try{(b=k.localStorage.getItem(a.pa()))&&(c=k.JSON.parse(b))}catch(d){}return c}};a.ra=function(){var c=!0;a.trackOffline&&a.offlineFilename&&k.localStorage&&k.JSON||(c=!1);return c};a.Ja=function(){var c=0;a.i&&(c=a.i.length);a.q&&c++;return c};a.ka=function(){if(a.q&&(a.B&&a.B.complete&&a.B.G&&a.B.va(),\na.q))return;a.Ka=p;if(a.qa)a.ma>a.O&&a.Qa(a.i),a.ua(500);else{var c=a.ob();if(0<c)a.ua(c);else if(c=a.Ga())a.q=1,a.Fb(c),a.Jb(c)}};a.ua=function(c){a.Ka||(c||(c=0),a.Ka=setTimeout(a.ka,c))};a.ob=function(){var c;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;c=a.C()-a.Pa;return a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c};a.Ga=function(){if(0<a.i.length)return a.i.shift()};a.Fb=function(c){if(a.debugTracking){var b=\"AppMeasurement Debug: \"+c;c=c.split(\"&\");var d;for(d=0;d<c.length;d++)b+=\n\"\\n\\t\"+a.unescape(c[d]);a.F(b)}};a.gb=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.Y=!1;var t;try{t=JSON.parse('{\"x\":\"y\"}')}catch(w){t=null}t&&\"y\"==t.x?(a.Y=!0,a.X=function(a){return JSON.parse(a)}):k.$&&k.$.parseJSON?(a.X=function(a){return k.$.parseJSON(a)},a.Y=!0):a.X=function(){return null};a.Jb=function(c){var b,d,f;a.gb()&&2047<c.length&&(\"undefined\"!=typeof XMLHttpRequest&&(b=new XMLHttpRequest,\"withCredentials\"in b?d=1:b=0),b||\"undefined\"==typeof XDomainRequest||(b=\nnew XDomainRequest,d=2),b&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.Y?b.Ba=!0:b=0));!b&&a.Ta&&(c=c.substring(0,2047));!b&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(b=a.d.createElement(\"SCRIPT\"))&&\"async\"in b&&((f=(f=a.d.getElementsByTagName(\"HEAD\"))&&f[0]?f[0]:a.d.body)?(b.type=\"text\/javascript\",b.setAttribute(\"async\",\"async\"),d=3):b=0);b||(b=new Image,b.alt=\"\",b.abort||\"undefined\"===typeof k.InstallTrigger||\n(b.abort=function(){b.src=p}));b.Da=function(){try{b.G&&(clearTimeout(b.G),b.G=0)}catch(a){}};b.onload=b.va=function(){a.bb(c);b.Da();a.sb();a.ga();a.q=0;a.ka();if(b.Ba){b.Ba=!1;try{a.doPostbacks(a.X(b.responseText))}catch(d){}}};b.onabort=b.onerror=b.Ha=function(){b.Da();(a.trackOffline||a.qa)&&a.q&&a.i.unshift(a.rb);a.q=0;a.ma>a.O&&a.Qa(a.i);a.ga();a.ua(500)};b.onreadystatechange=function(){4==b.readyState&&(200==b.status?b.va():b.Ha())};a.Pa=a.C();if(1==d||2==d){var e=c.indexOf(\"?\");f=c.substring(0,\ne);e=c.substring(e+1);e=e.replace(\/&callback=[a-zA-Z0-9_.\\[\\]]+\/,\"\");1==d?(b.open(\"POST\",f,!0),b.send(e)):2==d&&(b.open(\"POST\",f),b.send(e))}else if(b.src=c,3==d){if(a.Na)try{f.removeChild(a.Na)}catch(g){}f.firstChild?f.insertBefore(b,f.firstChild):f.appendChild(b);a.Na=a.B}b.G=setTimeout(function(){b.G&&(b.complete?b.va():(a.trackOffline&&b.abort&&b.abort(),b.Ha()))},5E3);a.rb=c;a.B=k[\"s_i_\"+a.replace(a.account,\",\",\"_\")]=b;if(a.useForcedLinkTracking&&a.K||a.A)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=\n250),a.ha=setTimeout(a.ga,a.forcedLinkTrackingTimeout)};a.sb=function(){if(a.ra()&&!(a.Oa>a.O))try{k.localStorage.removeItem(a.pa()),a.Oa=a.C()}catch(c){}};a.Qa=function(c){if(a.ra()){a.Sa();try{k.localStorage.setItem(a.pa(),k.JSON.stringify(c)),a.O=a.C()}catch(b){}}};a.Sa=function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.i.length>a.offlineLimit;)a.Ga()}};a.forceOffline=function(){a.qa=!0};a.forceOnline=function(){a.qa=!1};a.pa=function(){return a.offlineFilename+\n\"-\"+a.visitorNamespace+a.account};a.C=function(){return(new Date).getTime()};a.La=function(a){a=a.toLowerCase();return 0!=a.indexOf(\"#\")&&0!=a.indexOf(\"about:\")&&0!=a.indexOf(\"opera:\")&&0!=a.indexOf(\"javascript:\")?!0:!1};a.setTagContainer=function(c){var b,d,f;a.Kb=c;for(b=0;b<a._il.length;b++)if((d=a._il[b])&&\"s_l\"==d._c&&d.tagContainerName==c){a.R(d);if(d.lmq)for(b=0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f],f)!Object.prototype[b]&&(\"function\"!=\ntypeof f[b]||0>(\"\"+f[b]).indexOf(\"s_c_il\"))&&(c[b]=f[b]);if(d.mmq)for(b=0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&\"function\"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(c,b,d,f){var e,g=\"\";b||(b=a.pageURL?a.pageURL:k.location);d=d?d:\"&\";if(!c||!b)return g;b=\"\"+b;e=b.indexOf(\"?\");if(0>\ne)return g;b=d+b.substring(e+1)+d;if(!f||!(0<=b.indexOf(d+c+d)||0<=b.indexOf(d+c+\"=\"+d))){e=b.indexOf(\"#\");0<=e&&(b=b.substr(0,e)+d);e=b.indexOf(d+c+\"=\");if(0>e)return g;b=b.substring(e+d.length+c.length+1);e=b.indexOf(d);0<=e&&(b=b.substring(0,e));0<b.length&&(g=a.unescape(b));return g}}};a.H=\"supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData\".split(\" \");\na.g=a.H.concat(\"purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt\".split(\" \"));a.na=\"timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy\".split(\" \");a.P=a.na.slice(0);a.Aa=\"account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks registerPreTrackCallback registerPostTrackCallback AudienceManagement\".split(\" \");\nfor(m=0;250>=m;m++)76>m&&(a.g.push(\"prop\"+m),a.P.push(\"prop\"+m)),a.g.push(\"eVar\"+m),a.P.push(\"eVar\"+m),6>m&&a.g.push(\"hier\"+m),4>m&&a.g.push(\"list\"+m);m=\"pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID\".split(\" \");a.g=a.g.concat(m);a.H=a.H.concat(m);a.ssl=0<=k.location.protocol.toLowerCase().indexOf(\"https\");a.charSet=\"UTF-8\";a.contextData={};a.offlineThrottleDelay=\n0;a.offlineFilename=\"AppMeasurement.offline\";a.Pa=0;a.ma=0;a.O=0;a.Oa=0;a.linkDownloadFileTypes=\"exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx\";a.w=k;a.d=k.document;try{if(a.Ta=!1,navigator){var v=navigator.userAgent;if(\"Microsoft Internet Explorer\"==navigator.appName||0<=v.indexOf(\"MSIE \")||0<=v.indexOf(\"Trident\/\")&&0<=v.indexOf(\"Windows NT 6\"))a.Ta=!0}}catch(x){}a.ga=function(){a.ha&&(k.clearTimeout(a.ha),a.ha=p);a.l&&a.K&&a.l.dispatchEvent(a.K);a.A&&(\"function\"==typeof a.A?a.A():\na.l&&a.l.href&&(a.d.location=a.l.href));a.l=a.K=a.A=0};a.Ra=function(){a.b=a.d.body;a.b?(a.v=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById(\"cppXYctnr\")||c&&c[\"s_fe_\"+a._in])){if(a.Ca)if(a.useForcedLinkTracking)a.b.removeEventListener(\"click\",a.v,!1);else{a.b.removeEventListener(\"click\",a.v,!0);a.Ca=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.N&&a.N==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||\na.clickObject.parentNode))a.clickObject=0;else{var h=a.N=a.clickObject;a.la&&(clearTimeout(a.la),a.la=0);a.la=setTimeout(function(){a.N==h&&(a.N=0)},1E4);f=a.Ja();a.track();if(f<a.Ja()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&e!=a.b&&\"A\"!=e.tagName.toUpperCase()&&\"AREA\"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.La(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||\"_self\"==d||\"_top\"==d||\"_parent\"==d||k.name&&d==k.name))){try{b=a.d.createEvent(\"MouseEvents\")}catch(l){b=\nnew k.MouseEvent}if(b){try{b.initMouseEvent(\"click\",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(m){b=0}b&&(b[\"s_fe_\"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.l=c.target,a.K=b)}}}}}catch(n){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent(\"onclick\",a.v):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf(\"WebKit\")&&\na.d.createEvent||0<=navigator.userAgent.indexOf(\"Firefox\/2\")&&k.MouseEvent)&&(a.Ca=1,a.useForcedLinkTracking=1,a.b.addEventListener(\"click\",a.v,!0)),a.b.addEventListener(\"click\",a.v,!1))):setTimeout(a.Ra,30)};a.Ra();r?a.setAccount(r):a.F(\"Error, missing Report Suite ID in AppMeasurement initialization\");a.loadModule(\"ActivityMap\")}\nfunction s_gi(r){var a,k=window.s_c_il,p,n,m=r.split(\",\"),s,u,t=0;if(k)for(p=0;!t&&p<k.length;){a=k[p];if(\"s_c\"==a._c&&(a.account||a.oun))if(a.account&&a.account==r)t=1;else for(n=a.account?a.account:a.oun,n=a.allAccounts?a.allAccounts:n.split(\",\"),s=0;s<m.length;s++)for(u=0;u<n.length;u++)m[s]==n[u]&&(t=1);p++}t||(a=new AppMeasurement(r));return a}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);\nfunction s_pgicq(){var r=window,a=r.s_giq,k,p,n;if(a)for(k=0;k<a.length;k++)p=a[k],n=s_gi(p.oun),n.setAccount(p.un),n.setTagContainer(p.tagContainerName);r.s_giq=0}s_pgicq();\n\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25833],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19664,"type":"CustomHtml","name":"c327c8e49f35716e6a78c25ba23b9508","parameters":{"customHtml":"<script>\n\t(function(jQuery) {\n\n\t\tjQuery(document).ready(function() {\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar vwdata = window.vwdata = window.vwdata || [];\n\n\n\t\t\t\/\/ Set data\n\n\t\t\tfunction setEventInfo(trackingObject) {\n\n\t\t\t\ttrackingObject.eventInfo = {};\n\t\t\t\ttrackingObject.eventInfo.pageId = window.location.href.split('?')[0].replace('https:\/\/', '').replace('http:\/\/', '');;\n\t\t\t\ttrackingObject.eventInfo.pageName = 'fleet : calculators : compare-residual-values';\n\t\t\t\ttrackingObject.eventInfo.pageCategory = 'fleet'\n\n\t\t\t}\n\n\t\t\tfunction setEnvironmentData(trackingObject) {\n\n\t\t\t\ttrackingObject.environment = {};\n\t\t\t\ttrackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalResidualValueCalcD6' : 'VWResidualValueCalcD6';\n\t\t\t\ttrackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n\n\t\t\t};\n\n\t\t\tfunction setUserBrowserData(trackingObject) {\n\n\t\t\t\ttrackingObject.user = {};\n\t\t\t\ttrackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n\t\t\t\ttrackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n\t\t\t};\n\n\t\t\tfunction setPersonalizationData(trackingObject) {\n\n\t\t\t\ttrackingObject.personalization = {};\n\t\t\t\ttrackingObject.personalization.status = false;\n\t\t\t\ttrackingObject.personalization.placeholderId = undefined;\n\t\t\t\ttrackingObject.personalization.contentId = undefined;\n\t\t\t\ttrackingObject.personalization.activityId = undefined;\n\t\t\t\ttrackingObject.personalization.activityName = undefined;\n\t\t\t\ttrackingObject.personalization.experienceId = undefined;\n\t\t\t\ttrackingObject.personalization.experienceName = undefined;\n\t\t\t\ttrackingObject.personalization.offerName = undefined;\n\t\t\t\ttrackingObject.personalization.offerId = undefined;\n\n\t\t\t};\n\n\t\t\tfunction setConfigurationData(trackingObject, obj) {\n\n\t\t\t\tvar modelId, modelName;\n\n\t\t\t\tif (obj.eventInfo.attributes && obj.eventInfo.attributes.model) {\n\n\t\t\t\t\t\/\/ Use the model id from the event obj to find a button with the same id and get its title text for the name\n\t\t\t\t\tmodelId = obj.eventInfo.attributes.model;\n\t\t\t\t\tmodelName = jQuery('.fleet-tools-car-selector__button[data-id=\"' + modelId + '\"]').first().find('.fleet-tools-car-selector__car-title').text();\n\n\t\t\t\t}\n\n\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\ttrackingObject.configuration.CarlineId = modelId;\n\t\t\t\ttrackingObject.configuration.CarlineName = modelName;\n\n\t\t\t};\n\n\n\t\t\t\/\/ Handlers\n\n\t\t\tfunction triggerEvent(trackingObject, event) {\n\n\t\t\t\tvwdata.push(trackingObject);\n\t\t\t\tconsole.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n\n\t\t\t};\n\n\t\t\tfunction onPageLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_Pageload';\n\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\t\t\t\ttrackingObject.eventInfo.templateType = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\ttrackingObject.personalization.aemRessourcePath = undefined;\n\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\t\t\t\ttrackingObject.configuration.SalesgroupId = undefined;\n\t\t\t\ttrackingObject.configuration.SalesgroupName = undefined;\n\t\t\t\ttrackingObject.configuration.EquipmentlineName = undefined;\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onCarlineSelectClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_CarlineSelect_Click';\n\t\t\t\ttrackingObject.eventInfo.contentId = obj.eventInfo.attributes.model;\n\t\t\t\ttrackingObject.eventInfo.sectionName = 'fleet-tools-car-selector';\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\ttrackingObject.personalization.aemRessource = undefined;\n\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\n\t\t\t\/\/ Main listener\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase 'VWBasic_Pageload':\n\t\t\t\t\t\tonPageLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif (obj.eventInfo.info.eventAction === 'modelSelection') { \/\/ Uses different structure\n\t\t\t\t\t\t\tonCarlineSelectClick(obj);\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25808],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19665,"type":"CustomHtml","name":"bf7be7a20aba9985f9f61dfcde3299c9","parameters":{"customHtml":"<style>\n@font-face {\n  font-family: icomoon;\n  src: url(\/chatbot\/static\/assets\/icomoon.eot);\n  src: url(\/chatbot\/static\/assets\/icomoon.eot#iefix) format(\"embedded-opentype\"), url(\/chatbot\/static\/assets\/icomoon.ttf) format(\"truetype\"),url(\/chatbot\/static\/assets\/icomoon.woff) format(\"woff\"),url(\/chatbot\/static\/assets\/icomoon.svg#icomoon) format(\"svg\");\n  font-weight: 400;\n  font-style: normal\n}\n\n@keyframes launch-button-animation {\n  0% {\n      -webkit-transform: translateY(50px);\n      transform: translateY(50px);\n      opacity: 0\n  }\n\n  to {\n      -webkit-transform: translateY(0);\n      transform: translateY(0);\n      opacity: 1\n  }\n}\n\n.cb-root-framed {\n  bottom: 0;\n  right: 0;\n  position: fixed;\n  z-index: 9999;\n  width: 100vw;\n  height: 100%;\n  max-width: 768px;\n  max-height: 100vh;\n  overflow: hidden;\n  display: none;\n}\n\n.cb-root-framed--active {\n  display: block;\n  background: white;\n}\n\n.cb__iframe {\n  border: 0;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.cb__launch-button {\n  font-family: 'vw-text', 'VWTextRegular', sans-serif;\n  font-size: 100%;\n  line-height: 1.15;\n  margin: 0px;\n  overflow: visible;\n  text-transform: none;\n  -webkit-appearance: button;\n  background: #00a8ec;\n  border: none;\n  border-radius: 24px;\n  bottom: 20px;\n  color: white !important;\n  cursor: pointer;\n  height: 48px;\n  padding: 5px 20px 5px 5px;\n  position: fixed;\n  right: 20px;\n  z-index: 9000;\n  transition: all 300ms ease-in;\n  animation: launch-button-animation 300ms linear;\n}\n.cb__launch-button .icon-Messaging-NeedHelp {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 36px;\n  vertical-align: middle;\n  font-family: 'icomoon' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: 400;\n  font-feature-settings: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  -webkit-font-smoothing: antialiased;\n}\n\n.non-faq-pages {\n margin-bottom: -70px;\n}\n\n.icon-Messaging-NeedHelp:before {\n    content: \"\\E906\";\n    color: #fff;\n}\n\n.cb__launch-button span {\n    font-family: inherit;\n    position: relative;\n    top: 1px;\n    vertical-align: middle;\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n}\n\n@media screen and (max-width:767px) {\n\n  body.chatbot--active {\n    overflow: hidden;\n    height: 100vh;\n  }\n\n  body.chatbot--active .cb-root-framed--active {\n    overflow: scroll;\n  }\n\n}\n\n@media screen and (min-width:768px) {\n    .cb-root-framed--active.cb-root-framed {\n        width: 90vw;\n        max-height: 580px;\n        background: transparent;\n    }\n\n    .icon-Navigation-Menu {\n      display: none;\n    }\n\n    .cb__chat {\n      max-width: 50%;\n    }\n\n}\n\n<\/style>\n\n<script>\n\nwindow.VwTagConsole('Live > Chatbot > 2021\/01\/13');\n\nvar page;\nvar currentUrl = window.location.href;\n\nif (currentUrl.includes('\/need-help-faqs')) {\n  page = 'faq-pages'\n} else {\n  page = 'non-faq-pages'\n}\n\nvar createDiv = function() {\n  var body = document.getElementsByTagName('body');\n  var div = document.createElement('div');\n\n  div.classList.add('cb-root-framed');\n  body[0].appendChild(div);\n\n}\n\nvar createIframe = function() {\n  \/\/ make sure the live chat iframe is not also present\n  var livechat = document.getElementById('uwf-floating-chat-container')\n  if (livechat) {\n    livechat.remove()\n  }\n\n  var root = document.getElementsByClassName('cb-root-framed')\n  var iframe = document.createElement('iframe');\n  iframe.classList.add('cb__iframe')\n  iframe.src = \"\/chatbot\/\";\n\n  root[0].hidden = true;\n  root[0].appendChild(iframe);\n  console.log('Qubit created iframe', iframe)\n}\n\nvar createButtons = function() {\n  var body = document.getElementsByTagName('body')\n  var button = document.createElement('button')\n  button.innerHTML = `<i class=\"icon-Messaging-NeedHelp\"><\/i><span>Need Help<\/span>`\n  button.classList.add('cb__launch-button', page)\n  button.addEventListener('click', window.toggleIframe)\n\n  body[0].appendChild(button)\n  window.VwTagConsole('Live > Chatbot > 2021\/01\/13: created button', button);\n\n  var heading = document.getElementsByClassName('contact-intro__cta');\n  var div = document.createElement('div');\n  div.innerHTML = `<a class=\"button\" style=\"margin-left: 15px;\">Need Help<\/a>`;\n  div.classList.add('contact-intro__cta');\n  div.addEventListener('click', window.toggleIframe);\n  if (heading.length > 0) {\n    heading[0].insertAdjacentElement('beforebegin', div)\n  }\n\n  var panel = document.getElementsByClassName('feature-cta-panel__content');\n  div = document.createElement('div');\n  div.innerHTML = `<a class=\"secondary-link secondary-link--white\">Need Help<\/a>`;\n  div.classList.add('contact-intro__cta');\n  div.addEventListener('click', window.toggleIframe);\n\n  if (panel.length > 0) {\n    panel[0].appendChild(div)\n  }\n\n}\n\nwindow.toggleIframe = function() {\n\n  var root = document.getElementsByClassName('cb-root-framed')\n  var launchButton = document.getElementsByClassName('cb__launch-button')\n  var iframe = document.getElementsByClassName('cb__iframe')[0]\n\n  if (root[0].hidden) {\n    iframe.contentWindow.openChatBot()\n    root[0].hidden = false;\n\n  } else {\n    root[0].hidden = true;\n  }\n\n  document.body.classList.toggle('chatbot--active');\n  launchButton[0].classList.toggle('cb__launch-button-fadeout');\n  root[0].classList.toggle('cb-root-framed--active');\n}\n\nwindow.minimizeChatBot = function() {\n    console.log('window.minimizeChatBot in TOP window called');\n    window.toggleIframe();\n}\nwindow.closeChatBot = function() {\n  \/\/ do nothing as minimise will take care of closing\n}\n\n\/* This functions is called from the chatbot react code, which runs inside an iframe\nIn order for the iFrame to find this method, it needs to be declared on the window object itself\n*\/\nwindow.triggerTrackingFromIframe = function (dataEvent) {\n  var $dataLayer = document.getElementById('vw-data-layer');\n  var customEvent = new CustomEvent('data-layer-event-fired', {\n    detail: dataEvent\n  });\n  console.log('Qubit triggerTrackingFromIframe',  window.vwDataLayer)\n  window.vwDataLayer.event.push(dataEvent);\n  $dataLayer.dispatchEvent(customEvent);\n}\n\nif (!window.setUpChatBot) {\n  createDiv();\n  createIframe();\n  setTimeout(function(){\n      createButtons();\n  }, 3000);\n  window.setUpChatBot = true;\n} else {\n  console.log('Qubit running Chatbot twice!!');\n}\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25809],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19666,"type":"CustomHtml","name":"ab12c3ca6d0373639ae39371aba81829","parameters":{"customHtml":"<script>\n\n\/\/ page: \/\/electric\/research\/cost-savings\/cost-of-running-your-car\n\nwindow.VwTagConsole('Live > SD TCO ACTIONS > 2020\/04\/08');\n\n  console.log('%TCO - ACTIONS', 'background: #222; color: purple')\n\n  var $dataLayer = window.document.getElementById('vw-data-layer')\n  var vwdata = (window.vwdata = window.vwdata || [])\n  var pageId = window.location.href\n    .split('?')[0]\n    .split('#')[0]\n    .replace('http:\/\/', '')\n    .replace('https:\/\/', '')\n  var pageName = dataLayer.page[0].pageInfo.pageName\n  var contentId = dataLayer.page[0].pageInfo.pageID\n\n  \/\/ Set data ___________________________________________________________________________________________\n\n  function setEventInfo(trackingObject) {\n    trackingObject.eventInfo = {}\n    trackingObject.eventInfo.pageId = pageId\n    trackingObject.eventInfo.pageName = pageName\n    trackingObject.eventInfo.pageCategory = 'New cars'\n    trackingObject.eventInfo.templateType = undefined\n  }\n\n  function setEnvironmentData(trackingObject) {\n    trackingObject.environment = {}\n    trackingObject.environment.applicationId = 'VWLocalUKOwnershipCostD6';\n    trackingObject.environment.language = 'en'\n    trackingObject.environment.country = 'GB'\n  }\n\n  function setUserBrowserData(trackingObject) {\n    trackingObject.user = {}\n    trackingObject.user.browserResolutionHeight = Math.max(\n      document.documentElement.clientWidth,\n      window.innerWidth || 0\n    ).toString()\n    trackingObject.user.browserResolutionWidth = Math.max(\n      document.documentElement.clientHeight,\n      window.innerHeight || 0\n    ).toString()\n    trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll(\n      'main'\n    )[0]\n      ? document.querySelectorAll('main')[0].offsetWidth.toString()\n      : undefined\n    trackingObject.user.browserResolutionOrientation =\n      window.innerHeight < window.innerWidth ? 'h' : 'v'\n  }\n\n  function setPersonalizationData(trackingObject) {\n    trackingObject.personalization = {}\n    trackingObject.personalization.status = false\n    trackingObject.personalization.placeholderId = undefined\n    trackingObject.personalization.contentId = undefined\n    trackingObject.personalization.activityId = undefined\n    trackingObject.personalization.activityName = undefined\n    trackingObject.personalization.experienceId = undefined\n    trackingObject.personalization.experienceName = undefined\n    trackingObject.personalization.offerName = undefined\n    trackingObject.personalization.offerId = undefined\n  }\n\n  function setConfigurationData(trackingObject) {\n    var modelData = getModelData()\n\n    trackingObject.configuration = trackingObject.configuration || {}\n    trackingObject.configuration.CarlineId = modelData.simpleId\n    trackingObject.configuration.CarlineName = modelData.name\n    trackingObject.configuration.SalesgroupId = modelData.id\n    trackingObject.configuration.SalesgroupName = modelData.modelName\n    trackingObject.configuration.EquipmentlineName = undefined\n  }\n\n  function setConfigurationModelData(trackingObject) {\n    var modelData = getModelData()\n\n    trackingObject.configuration = trackingObject.configuration || {}\n    trackingObject.configuration.BodyTypeName = modelData.bodyType\n    trackingObject.configuration.ModelId = undefined\n    trackingObject.configuration.ModelName = modelData.modelSpec\n  }\n\n  function setPartnerData(trackingObject) {\n    trackingObject.partner = {}\n    trackingObject.partner.informationBnr = undefined\n    trackingObject.partner.informationName = undefined \/\/$retailerInfo.find('dt:not(.hidden)').text();\n    trackingObject.partner.informationDepartment = undefined\n    trackingObject.partner.informationZIP = undefined \/\/$retailerInfo.find('dd:not(.openingHours) > p').text().split(', ').slice(-1)[0].trim();\n  }\n\n  function setFileData(trackingObject, obj) {\n    var fileUrl = obj.attributes.href\n    var fileName = fileUrl.split('\/')[fileUrl.split('\/').length - 1]\n    var fileType = fileName.split('format=')[1]\n    var fileCategory\n\n    \/\/ Parse brochure name so its more readable - only if its a brochure\n    if (fileName.indexOf('?format=pdf') !== -1) {\n      fileName = 'Original brochure ' + fileName.split('?')[0]\n      fileCategory = 'Car Brochure'\n    }\n\n    trackingObject.file = {}\n    trackingObject.file.name = fileName\n    trackingObject.file.category = fileCategory\n    trackingObject.file.type = fileType\n    trackingObject.file.productName = undefined\n    trackingObject.file.url = fileUrl\n    trackingObject.file.language = 'en'\n  }\n\n  function setLinkData(trackingObject, obj) {\n    trackingObject.link = {}\n    trackingObject.link.url = obj.attributes.href\n    trackingObject.link.name = obj.attributes.label\n  }\n\n  function setErrorData(trackingObject, obj) {\n    var errorMsg = obj.attributes.message\n\n    trackingObject.error = {}\n    trackingObject.error.code = getErrorCode(errorMsg)\n    trackingObject.error.message = errorMsg\n    trackingObject.error.referringUrl = pageId\n  }\n\n  function setSocialData(trackingObject, obj) {\n    trackingObject.social = {}\n    trackingObject.social.Platform = obj.attributes.platform\n    trackingObject.social.ShareConsent = undefined\n  }\n\n  function setVideoData(trackingObject, obj) {\n    trackingObject.video = {}\n    trackingObject.video.playerName = 'YouTube'\n    trackingObject.video.title = obj.attributes.label\n    trackingObject.video.id = undefined\n    trackingObject.video.platform = undefined\n    trackingObject.video.url = undefined\n    trackingObject.video.length = undefined\n  }\n\n  function setOwnershipData(trackingObject) {\n    trackingObject.ownership = {}\n    trackingObject.ownership.vehicle = undefined\n  }\n\n  function setPhoneData(trackingObject, obj) {\n    trackingObject.phone = {}\n    trackingObject.phone.Number = obj.attributes.href.replace('tel:', '')\n    trackingObject.phone.Name = obj.attributes.retailerName\n  }\n\n  \/\/ Handlers ___________________________________________________________________________________________\n\n  function triggerEvent(trackingObject, event) {\n    vwdata.push(trackingObject)\n    console.log(\n      '%c SD Bootstrapper (' +\n      Bootstrapper.ensightenOptions.publishPath +\n      ') push event:',\n      'background: #222; color: #bada55',\n      event,\n      ' trackingObject:',\n      trackingObject\n    )\n  }\n\n  function onMultipleVehiclesPageload(data) {\n    var trackingObject = {}\n\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_MultipleVehiclesFormStep_Pageload'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'TCO'\n    trackingObject.eventInfo.contentLabels = undefined\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n\n    trackingObject.configuration = {}\n    trackingObject.configuration.vehicleList = data.eventInfo.data\n\n    trackingObject.form = {}\n    trackingObject.form.FormType = 'otherform'\n    trackingObject.form.FormStart = true\n    trackingObject.form.FormName = 'Car Comparison'\n\n    trackingObject.process = {}\n    trackingObject.process.StepName = 'carComparison'\n    trackingObject.process.StepNumber = '1'\n\n    setPartnerData(trackingObject)\n\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onErrorLayerload(data) {\n    var trackingObject = {}\n\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_ErrorLayer_Load'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'TCO'\n    trackingObject.eventInfo.contentLabels = undefined\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n\n    trackingObject.error = data.eventInfo.data\n    setPartnerData(trackingObject)\n\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onErrorCloseClick(data) {\n    var trackingObject = {}\n\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_LayerClose_Click'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'TCO'\n    trackingObject.eventInfo.contentLabels = undefined\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n\n    trackingObject.link = data.eventInfo.data\n    setPartnerData(trackingObject)\n\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onFormStepCtaClick(data) {\n    var trackingObject = {}\n    const eventData = data.eventInfo.data\n\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_MultipleVehiclesFormStepCTA_Click'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'Show total cost of ownership'\n    trackingObject.eventInfo.contentLabels = undefined\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n\n    trackingObject.configuration = {}\n    trackingObject.configuration.vehicleList = eventData.vehicleList\n\n    trackingObject.form = {}\n    trackingObject.form.FormType = 'otherform'\n    trackingObject.form.FormName = 'Car Comparison'\n    trackingObject.form.PrefContactChannels = undefined\n    trackingObject.form.FormVersion = '1'\n    trackingObject.form.Marketing = undefined\n    trackingObject.form.Newsletter = undefined\n    trackingObject.form.Questionnaire = {\n      id: 'Questionnaire Car Comparison Form',\n      version: '1',\n      content: [\n        {\n          id: '1',\n          question: 'Annual Mileage',\n          answer: [\n            {\n              type: 'string',\n              value: eventData.annualMileage\n            }\n          ]\n        },\n        {\n          id: '2',\n          question: 'Months of Ownership',\n          answer: [\n            {\n              type: 'string',\n              value: eventData.monthsOfOwnership\n            }\n          ]\n        }\n      ]\n    }\n\n    trackingObject.process = {}\n    trackingObject.process.StepName = 'carComparison'\n    trackingObject.process.StepNumber = '1'\n\n    trackingObject.link = eventData.link\n\n    setPartnerData(trackingObject)\n    setOwnershipData(trackingObject)\n\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onVehicleStepLinkClick(data) {\n    var trackingObject = {}\n\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_VehicleStepLink_Click'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'Edit car'\n    trackingObject.eventInfo.pageCategory = 'New cars'\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n\n    trackingObject.configuration = data.eventInfo.data.configuration\n    trackingObject.link = data.eventInfo.data.link\n\n    trackingObject.configuration.PriceType = undefined\n    trackingObject.configuration.PriceTypeParameter = undefined\n    trackingObject.configuration.PriceRateCurrency = undefined\n    trackingObject.configuration.PriceRateType = undefined\n    trackingObject.configuration.PriceRateBasic = undefined\n    trackingObject.configuration.PriceRateAdditional = undefined\n    trackingObject.configuration.PriceRateTotal = undefined\n    trackingObject.configuration.PriceTotalCurrency = undefined\n    trackingObject.configuration.PriceTotalBasic = undefined\n    trackingObject.configuration.PriceTotalAdditional = undefined\n    trackingObject.configuration.PriceTotalTotal = undefined\n\n    trackingObject.process = {}\n    trackingObject.process.StepName = 'carComparison'\n    trackingObject.process.StepNumber = '1'\n\n    setPartnerData(trackingObject)\n\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onVehicleStepButtonClick(data) {\n    var trackingObject = {}\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_StepButton_Click'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = data.eventInfo.data.contentId\n    trackingObject.eventInfo.pageCategory = 'New cars'\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n    setOwnershipData(trackingObject)\n    trackingObject.link = data.eventInfo.data.link\n    setPartnerData(trackingObject)\n\n    trackingObject.process = {}\n    trackingObject.process.StepName = data.eventInfo.data.process.StepName\n    trackingObject.process.StepNumber = data.eventInfo.data.process.StepNumber\n\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onFilterSearchResultPageLoad(data) {\n    var trackingObject = {}\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_MultipleVehiclesFilterSearchResultStep_Load'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'TCO'\n    trackingObject.eventInfo.pageCategory = 'New cars'\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n    trackingObject.configuration = {\n      vehicleList: data.eventInfo.data.vehicles\n    }\n    trackingObject.filter = {\n      numberOfResults: undefined,\n      filterlist: [\n        {\n          type: 'single_value',\n          name: 'AKR',\n          values: [data.eventInfo.data.filterlist.annualMileage + '']\n        },\n        {\n          type: 'single_value',\n          name: 'OSDR',\n          values: [data.eventInfo.data.filterlist.ownershipDuration + '']\n        }\n      ],\n      sortOrder: undefined\n    }\n\n    trackingObject.process = {}\n    trackingObject.process.StepName = 'ownershipCost'\n    trackingObject.process.StepNumber = '3'\n\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onFilterSelectClick(data) {\n    var trackingObject = {}\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_FilterSelect_Click'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'TCO'\n    trackingObject.eventInfo.pageCategory = 'New cars'\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n\n    trackingObject.filter = data.eventInfo.data\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onVehicleSelectClick(data) {\n    var trackingObject = {}\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_VehicleSelect_Click'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'confirm selection'\n    trackingObject.eventInfo.pageCategory = 'New cars'\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n    trackingObject.configuration = data.eventInfo.data.configuration\n    trackingObject.link = data.eventInfo.data.link\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onModelSelectionStepLoad(data) {\n    var trackingObject = {}\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_Step_Load'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'TCO'\n    trackingObject.eventInfo.pageCategory = 'New cars'\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    trackingObject.process = {}\n    trackingObject.process.StepName = 'carSelection'\n    trackingObject.process.StepNumber = '2'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n    setPersonalizationData(trackingObject)\n    setPartnerData(trackingObject)\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onAccordionCloseClick(data) {\n    var trackingObject = {}\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_AccordionClose_Click'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = data.eventInfo.data.contentId\n    trackingObject.eventInfo.pageCategory = 'New cars'\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n    setPersonalizationData(trackingObject)\n    setPartnerData(trackingObject)\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  function onMultipleVehiclesFormLoad(data) {\n    var trackingObject = {}\n\n    setEventInfo(trackingObject)\n    trackingObject.eventInfo.eventAction = 'VWBasic_MultipleVehiclesFormStep_Load'\n    trackingObject.eventInfo.pageName = 'electric : cost-of-running-your-car'\n    trackingObject.eventInfo.contentId = 'TCO'\n    trackingObject.eventInfo.contentLabels = undefined\n    trackingObject.eventInfo.sectionName = undefined\n    trackingObject.eventInfo.templateType = undefined\n    trackingObject.eventInfo.brand = 'passenger'\n\n    setEnvironmentData(trackingObject)\n    setUserBrowserData(trackingObject)\n\n    setPersonalizationData(trackingObject)\n    trackingObject.personalization.aemRessourcePath = undefined\n\n    trackingObject.configuration = {}\n    trackingObject.configuration.vehicleList = data.eventInfo.data\n\n    trackingObject.form = {}\n    trackingObject.form.FormType = 'otherform'\n    trackingObject.form.FormStart = false\n    trackingObject.form.FormName = 'Car Comparison'\n\n    trackingObject.process = {}\n    trackingObject.process.StepName = 'carComparison'\n    trackingObject.process.StepNumber = '1'\n\n    setPartnerData(trackingObject)\n\n    triggerEvent(trackingObject, trackingObject.eventInfo.eventAction)\n  }\n\n  \/\/ Main listener ___________________________________________________________________________________________\n\n  $dataLayer.addEventListener('data-layer-tco-event-fired', function (e) {\n    var obj = dataLayer.event[dataLayer.event.length - 1]\n\n    if (!Bootstrapper) {\n      return\n    }\n    console.log(\n      '******************tracking object ***************************',\n      e\n    )\n    switch (obj.eventInfo.eventAction) {\n      case 'VWBasic_MultipleVehiclesFormStep_Pageload':\n        onMultipleVehiclesPageload(obj)\n        break\n      case 'VWBasic_ErrorLayer_Load':\n        onErrorLayerload(obj)\n        break\n      case 'VWBasic_LayerClose_Click':\n        onErrorCloseClick(obj)\n        break\n      case 'VWBasic_MultipleVehiclesFormStepCTA_Click':\n        onFormStepCtaClick(obj)\n        break\n      case 'VWBasic_VehicleStepLink_Click':\n        onVehicleStepLinkClick(obj)\n        break\n      case 'VWBasic_StepButton_Click':\n        onVehicleStepButtonClick(obj)\n        break\n      case 'VWBasic_MultipleVehiclesFilterSearchResultStep_Load':\n        onFilterSearchResultPageLoad(obj)\n        break\n      case 'VWBasic_FilterSelect_Click':\n        onFilterSelectClick(obj)\n        break\n      case 'VWBasic_VehicleSelect_Click':\n        onVehicleSelectClick(obj)\n        break\n      case 'VWBasic_Step_Load':\n        onModelSelectionStepLoad(obj)\n        break\n      case 'VWBasic_AccordionClose_Click':\n        onAccordionCloseClick(obj)\n        break\n      case 'VWBasic_MultipleVehiclesFormStep_Load':\n        onMultipleVehiclesFormLoad(obj)\n        break\n      default:\n    }\n  })\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25811],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19667,"type":"CustomHtml","name":"df6bf33bc389b94ede3f51ab2869e8b1","parameters":{"customHtml":"<script>\n\n\/\/ page: \/\/fleet\/book-a-test-drive\n\n\t(function($) {\n\n\t\t$(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Book a T D ACTIONS > 2019\/11\/20');\n\n\t\t\t\/\/console.log('%cBook a Test Drive - ACTIONS', 'background: #222; color: aqua');\n\n\t\t\tvar $dataLayer = $('#vw-data-layer');\n\t\t\tvar vwdata = window.vwdata = window.vwdata || [];\n\n\t\t\t\/\/ Set data __________________________________________________________________________________________________\n\n\t\t\tfunction setEventInfo(trackingObject, obj) {\n\n\t\t\t\tvar pageId = window.location.href.split('?')[0].replace('https:\/\/', '').replace('http:\/\/', '');\n\n\t\t\t\ttrackingObject.eventInfo = {};\n\t\t\t\ttrackingObject.eventInfo.pageId = pageId;\n\t\t\t\ttrackingObject.eventInfo.pageName = obj.attributes.pageName;\n\t\t\t\ttrackingObject.eventInfo.pageCategory = 'New Cars';\n\t\t\t\ttrackingObject.eventInfo.templateType = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setEnvironmentData(trackingObject) {\n\n\t\t\t\t\/\/var lang = window.contextJsParameters.lang.split(\/[-_]\/);\n\n\t\t\t\ttrackingObject.environment = {};\n\t\t\t\ttrackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalBATDD6' : 'VWBATDD6';\n\t\t\t\ttrackingObject.environment.language = 'en';\n\t\t\t\ttrackingObject.environment.country = 'GB';\n\n\t\t\t}\n\n\t\t\tfunction setUserData(trackingObject) {\n\n\t\t\t\ttrackingObject.user = trackingObject.user || {};\n\t\t\t\ttrackingObject.user.loginStatus = undefined;\n\t\t\t\ttrackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n\t\t\t\ttrackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n\t\t\t}\n\n\t\t\tfunction setUserLocationData(trackingObject) {\n\n\t\t\t\ttrackingObject.user = trackingObject.user || {};\n\n\t\t\t\tvar geolocation = {}\n\n\t\t\t\tnavigator.geolocation.getCurrentPosition(function(position) {\n\t\t\t\t\tgeolocation = position.coords\n\t\t\t\t});\n\n\t\t\t\ttrackingObject.user.locationLatitude = geolocation.latitude;\n\t\t\t\ttrackingObject.user.locationLongitude = geolocation.longitude;\n\t\t\t\ttrackingObject.user.locationZIP = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setPersonalizationData(trackingObject) {\n\n\t\t\t\ttrackingObject.personalization = {};\n\t\t\t\ttrackingObject.personalization.status = false;\n\t\t\t\ttrackingObject.personalization.placeholderId = undefined;\n\t\t\t\ttrackingObject.personalization.contentId = undefined;\n\t\t\t\ttrackingObject.personalization.activityId = undefined;\n\t\t\t\ttrackingObject.personalization.activityName = undefined;\n\t\t\t\ttrackingObject.personalization.experienceId = undefined;\n\t\t\t\ttrackingObject.personalization.experienceName = undefined;\n\t\t\t\ttrackingObject.personalization.offerName = undefined;\n\t\t\t\ttrackingObject.personalization.offerId = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setPartnerData(trackingObject, obj) {\n\n\t\t\t\tvar collectedFormData = obj.attributes.collectedFormData;\n\n\t\t\t\ttrackingObject.partner = {};\n\t\t\t\ttrackingObject.partner.informationBnr = collectedFormData.retailerId;\n\t\t\t\ttrackingObject.partner.informationName = collectedFormData.retailerName;\n\t\t\t\ttrackingObject.partner.informationDepartment = collectedFormData.retailerDept;\n\t\t\t\ttrackingObject.partner.informationZIP = collectedFormData.retailerZIP;\n\n\t\t\t};\n\n\t\t\tfunction setConfigurationData(trackingObject, obj) {\n\n\t\t\t\tvar collectedFormData = obj.attributes.collectedFormData;\n\n\t\t\t\ttrackingObject.configuration = trackingObject.configuration || {};\n\t\t\t\ttrackingObject.configuration.CarlineId = collectedFormData.modelId;\n\t\t\t\ttrackingObject.configuration.CarlineName = collectedFormData.modelName;\n\t\t\t\ttrackingObject.configuration.SalesgroupId = undefined;\n\t\t\t\ttrackingObject.configuration.SalesgroupName = undefined;\n\t\t\t\ttrackingObject.configuration.EquipmentlineName = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setConfigurationPriceData(trackingObject) {\n\n\t\t\t\ttrackingObject.configuration = trackingObject.configuration || {};\n\t\t\t\ttrackingObject.configuration.PriceType = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTypeParameter = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateCurrency = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateType = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateBasic = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateAdditional = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateTotal = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalCurrency = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalBasic = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalAdditional = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalTotal = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setFormData(trackingObject, obj) {\n\n\t\t\t\tvar contactPrefs = obj.attributes.collectedFormData.contactPrefs;\n\n\t\t\t\ttrackingObject.form = {};\n\t\t\t\ttrackingObject.form.FormType = \"testdrive\";\n\t\t\t\ttrackingObject.form.FormName = \"Book a Test Drive\";\n\t\t\t\ttrackingObject.form.PrefContactChannels = undefined;\n\t\t\t\ttrackingObject.form.FormVersion = '1';\n\t\t\t\ttrackingObject.form.MarketingConsent = undefined;\n\t\t\t\ttrackingObject.form.NewsletterType = undefined;\n\n\t\t\t\ttrackingObject.form.Questionnaire = {\n\t\t\t\t\tid: 'BATD Questionnaire',\n\t\t\t\t\tversion: '1',\n\t\t\t\t\tcontent: [{\n\t\t\t\t\t\t\tid: '1',\n\t\t\t\t\t\t\tquestion: 'email',\n\t\t\t\t\t\t\tanswer: [{\n\t\t\t\t\t\t\t\ttype: 'single_value',\n\t\t\t\t\t\t\t\tvalue: contactPrefs.email.toString()\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '2',\n\t\t\t\t\t\t\tquestion: 'phone',\n\t\t\t\t\t\t\tanswer: [{\n\t\t\t\t\t\t\t\ttype: 'single_value',\n\t\t\t\t\t\t\t\tvalue: contactPrefs.phone.toString()\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '3',\n\t\t\t\t\t\t\tquestion: 'text',\n\t\t\t\t\t\t\tanswer: [{\n\t\t\t\t\t\t\t\ttype: 'single_value',\n\t\t\t\t\t\t\t\tvalue: contactPrefs.text.toString()\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction setOwnershipData(trackingObject) {\n\n\t\t\t\ttrackingObject.ownership = {};\n\t\t\t\ttrackingObject.ownership.vehicle = undefined;\n\n\t\t\t};\n\n\n\t\t\t\/\/ Handlers _________________________________________________________________________________\n\n\t\t\tfunction triggerEvent(trackingObject, event) {\n\n\t\t\t\tvwdata.push(trackingObject);\n\t\t\t\tconsole.log('%cSD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', 'background: #222; color: #bada55', event, ' trackingObject:', trackingObject);\n\n\t\t\t};\n\n\t\t\tfunction onPageLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_Pageload';\n\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\ttrackingObject.environment.featureAppId = undefined;\n\t\t\t\ttrackingObject.environment.featureAppIdAppVersion = undefined;\n\n\t\t\t\tsetUserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\ttrackingObject.personalization.aemRessourcePath = undefined;\n\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\t\t\t\tsetOwnershipData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onFormSubmissionSuccess(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_FormSubmissionSuccessMessage_Load';\n\t\t\t\ttrackingObject.eventInfo.contentId = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserData(trackingObject);\n\t\t\t\tsetUserLocationData(trackingObject);\n\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\t\t\t\tsetConfigurationPriceData(trackingObject);\n\t\t\t\tsetPartnerData(trackingObject, obj);\n\t\t\t\tsetFormData(trackingObject, obj);\n\t\t\t\tsetOwnershipData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t}\n\n\n\t\t\t\/\/ Main listener ____________________________________________________________________________________\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase 'VWBasic_Pageload':\n\t\t\t\t\t\tonPageLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_FormSubmissionSuccessMessage_Load':\n\t\t\t\t\t\tonFormSubmissionSuccess(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25827],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19668,"type":"CustomHtml","name":"8ff245ad1c7a4dd101c6964c642140df","parameters":{"customHtml":"<script>\n\n\/\/ page: \/\/fleet\/book-a-test-drive\n\n\t(function($) {\n\t\t$(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Book a T D EVENTS > 2019\/11\/20');\n\n\t\t\t\/\/console.log('%cBook a Test Drive - EVENTS', 'background: #222; color: orange');\n\n\t\t\tvar $dataLayer = $('#vw-data-layer');\n\t\t\tvar pageId = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\t\t\tvar pageName = dataLayer.page[0].pageInfo.pageName;\n\n\t\t\t\/\/ Collect data from pages as user progesses through form\n\t\t\tvar collectedFormData = {};\n\n\t\t\tfunction fireEvent(eventName, attributes) {\n\n\t\t\t\t\/\/console.log('%cFIRE EVENT:', 'background: #222; color: green', eventName);\n\n\t\t\t\tvar eventInfo = {\n\t\t\t\t\teventName: eventName,\n\t\t\t\t\teventAction: eventName,\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tpageName: pageName\n\t\t\t\t};\n\n\t\t\t\tattributes = attributes || {};\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c044-01', eventInfo, {}, attributes);\n\n\t\t\t};\n\n\t\t\t\/\/ Use bubbling event and check target\n\t\t\t$('body').on('click', function(e) {\n\n\t\t\t\t\/\/ Target\n\t\t\t\tvar isCarThumbnail = !!$(e.target).parents('polymer-car-model-thumbnail').length;\n\t\t\t\tvar isCtaBtn = !!$(e.target).parents('cta-button').length;\n\t\t\t\tvar isPersonalDetailsPage = window.location.href.indexOf('personal_details') != -1;\n\n\t\t\t\tif (isCarThumbnail) {\n\n\t\t\t\t\tvar modelName = $(e.target)\n\t\t\t\t\t\t.parents('polymer-car-model-thumbnail')\n\t\t\t\t\t\t.find('.car-model__heading')\n\t\t\t\t\t\t.text()\n\t\t\t\t\t\t.trim();\n\t\t\t\t\tvar modelId = $(e.target)\n\t\t\t\t\t\t.parents('polymer-car-model-thumbnail')\n\t\t\t\t\t\t.find('img.car-model__image')\n\t\t\t\t\t\t.attr('src')\n\t\t\t\t\t\t.split('\/')[11];\n\n\t\t\t\t\tcollectedFormData.modelName = modelName;\n\t\t\t\t\tcollectedFormData.modelId = modelId;\n\n\t\t\t\t}\n\n\t\t\t\tif (isCtaBtn) {\n\n\t\t\t\t\tvar $selectedRetailer = $('i.osb-retailer-details.icon--vw-tick:visible').parents('div.osb-retailer-details');\n\n\t\t\t\t\tif ($selectedRetailer.length) {\n\n\t\t\t\t\t\tvar selectedRetailerName = $selectedRetailer\n\t\t\t\t\t\t\t.find('section.osb-retailer-details__title-section')\n\t\t\t\t\t\t\t.find('.osb-retailer-details__content-title--retailer-name')\n\t\t\t\t\t\t\t.text()\n\t\t\t\t\t\t\t.trim();\n\n\t\t\t\t\t\tvar selectedRetailerAddress = $selectedRetailer\n\t\t\t\t\t\t\t.find('.osb-retailer-details__content-text--address')\n\t\t\t\t\t\t\t.text()\n\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t\t.map(function(line) {\n\t\t\t\t\t\t\t\treturn line.trim();\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\tcollectedFormData.retailerName = selectedRetailerName;\n\t\t\t\t\t\tcollectedFormData.retailerDept = selectedRetailerAddress[selectedRetailerAddress.length - 2];\n\t\t\t\t\t\tcollectedFormData.retailerZIP = selectedRetailerAddress[selectedRetailerAddress.length - 1];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (isPersonalDetailsPage) {\n\n\t\t\t\t\tvar contactPrefs = {};\n\n\t\t\t\t\t\/\/ Parse Contact Preference radio buttons values\n\t\t\t\t\t$('input-selector-container').each(function() {\n\t\t\t\t\t  var keyName = $(this).data('name');\n\t\t\t\t\t\tvar key = keyName ? keyName.replace('optIn', '').toLowerCase() : '';\n\t\t\t\t\t\tcontactPrefs[key] = $(this).find('input:checked').val() === 'true';\n\t\t\t\t\t});\n\n\t\t\t\t\tcollectedFormData.contactPrefs = contactPrefs;\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t\/\/ Listener ______________________________________________________________________\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\t\t\t\tvar pageName = obj.attributes.pageName ? obj.attributes.pageName.replace(\/\\\/\/g, '').replace(\/-\/g, ' ') : '';\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (obj.eventInfo.eventAction === 'SPAnavigationLoad') {\n\n\t\t\t\t\tswitch (obj.attributes.step) {\n\n\t\t\t\t\t\tcase 0:\n\n\t\t\t\t\t\t\tfireEvent('VWBasic_Pageload', {\n\t\t\t\t\t\t\t\tpageName: pageName,\n\t\t\t\t\t\t\t\tcollectedFormData: collectedFormData\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\t\tcollectedFormData.retailerId = obj.attributes.retailer.toString();\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 5:\n\n\t\t\t\t\t\t\tfireEvent('VWBasic_FormSubmissionSuccessMessage_Load', {\n\t\t\t\t\t\t\t\tpageName: pageName,\n\t\t\t\t\t\t\t\tcollectedFormData: collectedFormData\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25827],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19669,"type":"CustomHtml","name":"0402ec07f0f855ec129d4c847d8f0de1","parameters":{"customHtml":"<script type=\"text\/javascript\">\n\n\/\/ page: \/\/fleet\/calculators\/company-car-tax-calculator\n\n(function(jQuery) {\n    jQuery(document).ready( function() {\n\nwindow.VwTagConsole('Live > SD Fleet CCTax EVENTS > 2019\/04\/15');\n\n        setTimeout(function() {\n            vwUk.Instances.dataLayerController.fireEvent('c910',\n                {\n                    eventName   : 'Customer Car Tax Calculator Page Load',\n                    eventAction : 'BasicPageLoad',\n                    pageId      : window.location.href.split('?')[0].replace('http:\/\/', '').replace('https:\/\/', ''),\n                    pageName    : 'CCarTaxPage',\n                    contentID   : 'CCarTaxPage'\n                }\n            );\n            console.log('fire BasicPageLoad')\n        }, 100);\n    });\n})(jQuery);\n\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25813],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19670,"type":"CustomHtml","name":"ec30aeeddccf4a6c06b7000cf0d76a8e","parameters":{"customHtml":"<script>\n\n\/\/ page: \/\/fleet\/calculators\/company-car-tax-calculator\n\n\t(function(jQuery) {\n\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Fleet CCTax ACTIONS > 2019\/04\/15');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar vwdata = window.vwdata = window.vwdata || []; \/\/ Bootstrapper new datalayer object (no longer Bootstrapper.ngw object).\n\t\t\tvar pageLoad, triggerEvent, dataInterval, hasDataLoaded, taxCalculatorResultLoad, accordionHeaderClick, setEventInfo, setEnvironmentData, setUserData, makeSureDropdownsAreInitiated, waitForEngineUpdate;\n\t\t\tvar initialised = false;\n\n\t\t\ttriggerEvent = function(trackingObject, event) {\n\n\t\t\t\tvwdata.push(trackingObject);\n\t\t\t\tconsole.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n\n\t\t\t}\n\n\t\t\tsetEventInfo = function(trackingObject, eventAction) {\n\n\t\t\t\ttrackingObject.eventInfo = {};\n\t\t\t\ttrackingObject.eventInfo.eventAction = eventAction;\n\t\t\t\ttrackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '');\n\t\t\t\ttrackingObject.eventInfo.pageName = 'fleet : calculators : company car tax calculator';\n\t\t\t\ttrackingObject.eventInfo.pageCategory = 'calculators';\n\n\t\t\t};\n\n\t\t\tsetEnvironmentData = function(trackingObject) {\n\n\t\t\t\ttrackingObject.environment = {};\n\t\t\t\ttrackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalCompanyCarTaxD6' : 'VWCompanyCarTaxD6';\n\t\t\t\ttrackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n\n\t\t\t};\n\n\t\t\tsetUserData = function(trackingObject) {\n\n\t\t\t\ttrackingObject.user = {};\n\t\t\t\ttrackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n\t\t\t\ttrackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n\t\t\t};\n\n\t\t\thasDataLoaded = function(obj) {\n\n\t\t\t\tif (jQuery('.ft-car-tax-polymer__loader').hasClass('ft-car-tax-polymer__loader--loaded')) {\n\t\t\t\t\tclearInterval(dataInterval);\n\t\t\t\t\tmakeSureDropdownsAreInitiated(obj, 5);\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\twaitForEngineUpdate = function(obj) {\n\n\t\t\t\tvar derivative = jQuery('dropdown-selector[name=\"derivativeSelect\"] .dropdown-selector__list'),\n\t\t\t\t\tderivativeSelect = jQuery('dropdown-selector[name=\"derivativeSelect\"] .input-field__input');\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tderivative.addClass('vw-invisible');\n\t\t\t\t\tderivativeSelect.trigger('click');\n\t\t\t\t}, 800);\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tjQuery('body').trigger('click');\n\t\t\t\t\tderivative.removeClass('vw-invisible');\n\t\t\t\t\ttaxCalculatorResultLoad(obj);\n\t\t\t\t}, 950);\n\n\t\t\t};\n\n\t\t\tmakeSureDropdownsAreInitiated = function(obj, delay) {\n\n\t\t\t\t\/* note:\n\t\t\t\tthe polymer dropdowns wont be populated unless user has clicked on them - there is no way to read the selected text as it doesnt exsisit in the DOM!!?.\n\t\t\t\thack solution is to trigger a open\/close with a slight delay\n\t\t\t\t*\/\n\t\t\t\tvar derivative = jQuery('dropdown-selector[name=\"derivativeSelect\"] .dropdown-selector__list'),\n\t\t\t\t\tderivativeSelect = jQuery('dropdown-selector[name=\"derivativeSelect\"] .input-field__input');\n\t\t\t\t\n\t\t\t\tvar trim = jQuery('dropdown-selector[name=\"trimSelect\"] .dropdown-selector__list'),\n\t\t\t\t\ttrimSelect = jQuery('dropdown-selector[name=\"trimSelect\"] .input-field__input');\n\t\t\t\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tderivative.addClass('vw-invisible');\n\t\t\t\t\ttrim.addClass('vw-invisible');\n\t\t\t\t\ttrimSelect.trigger('click');\n\t\t\t\t}, 20 * delay);\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tderivativeSelect.trigger('click');\n\t\t\t\t\ttrim.removeClass('vw-invisible');\n\t\t\t\t}, 150 * delay);\n\t\t\t\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tjQuery('body').trigger('click');\n\t\t\t\t\tderivative.removeClass('vw-invisible');\n\t\t\t\t\ttaxCalculatorResultLoad(obj);\n\t\t\t\t}, 350 * delay);\n\n\t\t\t};\n\n\t\t\tpageLoad = function(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tmakeSureDropdownsAreInitiated(obj, 1);\n\t\t\t\tsetEventInfo(trackingObject, 'VWBasic_Pageload');\n\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, 'VWBasic_Pageload');\n\n\n\t\t\t};\n\t\t\t\n\t\t\ttaxCalculatorResultLoad =  function(obj) {\n\t\t\t\t\n\t\t\t\tif (initialised) {\n\t\t\t\t\n\t\t\t\t\tvar trackingObject = {};\n\n\t\t\t\t\tsetEventInfo(trackingObject, 'VWBasic_TaxCalculatorResult_Load');\n\t\t\t\t\ttrackingObject.eventInfo.contentId = 'Tax Calculator';\n\t\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\n\t\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\t\tsetUserData(trackingObject);\n\n\n\t\t\t\t\tvar activeEl =\tjQuery('.is-active')[0],\n\t\t\t\t\t\tmodel = jQuery('.fleet-tools-car-selector__button', activeEl)[0],\n\t\t\t\t\t\tcarlineName = jQuery('.ft-car-tax-polymer__model-title').text(),\n\t\t\t\t\t\tcarlineId = model.dataset.id,\n\t\t\t\t\t\tmodelName = jQuery('.fleet-tools-car-selector__car-title', model).text(),\n\t\t\t\t\t\tmodelId = carlineId,\n\t\t\t\t\t\tderivative = jQuery('dropdown-selector[name=\"derivativeSelect\"] .dropdown-selector__item[tabIndex=\"0\"]').text(),\n\t\t\t\t\t\ttrim = derivative.match(\/^[^\\d]+(?=\\s)\/g) ? derivative.match(\/^[^\\d]+(?=\\s)\/g)[0] : jQuery('dropdown-selector[name=\"trimSelect\"] .dropdown-selector__item[tabIndex=\"0\"]').text(), \/\/ Match up to first digit\n\t\t\t\t\t\tpercentage = jQuery('.ft-car-tax-polymer__buttons .button--selected').text().replace('%', '');\n\n\t\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\t\ttrackingObject.configuration.CarlineId = carlineId;\n\t\t\t\t\ttrackingObject.configuration.CarlineName = carlineName;\n\t\t\t\t\ttrackingObject.configuration.EquipmentlineName = modelName + ' ' + trim;\n\t\t\t\t\ttrackingObject.configuration.ModelId = modelId;\n\t\t\t\t\ttrackingObject.configuration.ModelName = derivative;\n\t\t\t\t\ttrackingObject.configuration.YearlypercentageTax = percentage;\n\n\t\t\t\t\ttriggerEvent(trackingObject, 'VWBasic_TaxCalculatorResult_Load');\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tinitialised = true;\n\n\t\t\t};\n\t\t\t\n\t\t\taccordionHeaderClick = function(obj) {\n\t\t\t\t\n\t\t\t\tvar eventType = obj.eventInfo.type === \"expanded\" ? 'VWBasic_AccordionOpen_Click' : 'VWBasic_AccordionClose_Click';\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, eventType);\n\t\t\t\ttrackingObject.eventInfo.sectionName = obj.attributes.header;\n\t\t\t\ttrackingObject.eventInfo.contentId = obj.attributes.header;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, eventType);\n\n\t\t\t};\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tclearInterval(dataInterval);\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase \"BasicPageLoad\": \/\/ Basic Page Load\n\t\t\t\t\t\tpageLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"modelSelection\":\n\t\t\t\t\t\tdataInterval = setInterval(hasDataLoaded, 100, obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"trimSelection\":\n\t\t\t\t\t\twaitForEngineUpdate(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"engSelection\":\n\t\t\t\t\t\ttaxCalculatorResultLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"taxSelection\":\n\t\t\t\t\t\ttaxCalculatorResultLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"accordionHeader\":\n\t\t\t\t\t\taccordionHeaderClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t})(jQuery);\n\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25813],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19671,"type":"CustomHtml","name":"ca520e5f4d7bc620aa35b0becdbdc20e","parameters":{"customHtml":"<script>\n\t(function(jQuery) {\n\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD SEO Dimsn ACTIONS > 2019\/03\/29');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar vwdata = window.vwdata = window.vwdata || [];\n\n\t\t\tfunction getContentId() {\n\t\t\t\treturn jQuery('.centered-tabs__filter-item--active').text().trim().toLowerCase();\n\t\t\t}\n\n\n\t\t\t\/\/ Set data\n\n\t\t\tfunction setEventInfo(trackingObject) {\n\n\t\t\t\tvar pageId = window.location.href.split('?')[0].split('#')[0].replace('https:\/\/', '').replace('http:\/\/', '');\n\t\t\t\tvar pageName = pageId.split(\/\\\/|#\/).slice(1).join(' : '); \/\/ Split url by '\/' OR '#'\n\n\t\t\t\ttrackingObject.eventInfo = {};\n\t\t\t\ttrackingObject.eventInfo.pageId = pageId;\n\t\t\t\ttrackingObject.eventInfo.pageName = pageName;\n\t\t\t\ttrackingObject.eventInfo.pageCategory = 'New cars';\n\t\t\t\ttrackingObject.eventInfo.templateType = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setEnvironmentData(trackingObject) {\n\n\t\t\t\ttrackingObject.environment = {};\n\t\t\t\ttrackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalSEODimensionD6' : 'VWSEODimensionD6';\n\t\t\t\ttrackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n\n\t\t\t}\n\n\t\t\tfunction setUserBrowserData(trackingObject) {\n\n\t\t\t\ttrackingObject.user = {};\n\t\t\t\ttrackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n\t\t\t\ttrackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n\t\t\t}\n\n\t\t\tfunction setPersonalizationData(trackingObject) {\n\n\t\t\t\ttrackingObject.personalization = {};\n\t\t\t\ttrackingObject.personalization.status = false;\n\t\t\t\ttrackingObject.personalization.placeholderId = undefined;\n\t\t\t\ttrackingObject.personalization.contentId = undefined;\n\t\t\t\ttrackingObject.personalization.activityId = undefined;\n\t\t\t\ttrackingObject.personalization.activityName = undefined;\n\t\t\t\ttrackingObject.personalization.experienceId = undefined;\n\t\t\t\ttrackingObject.personalization.experienceName = undefined;\n\t\t\t\ttrackingObject.personalization.offerName = undefined;\n\t\t\t\ttrackingObject.personalization.offerId = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setConfigurationData(trackingObject) {\n\n\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\ttrackingObject.configuration.BodyType = undefined;\n\t\t\t\ttrackingObject.configuration.CarlineId = undefined;\n\t\t\t\ttrackingObject.configuration.CarlineName = dataLayer.page[0].pageInfo.pageName.replace(' dimensions', '');\n\t\t\t\ttrackingObject.configuration.SalesgroupId = undefined;\n\t\t\t\ttrackingObject.configuration.SalesgroupName = undefined;\n\t\t\t\ttrackingObject.configuration.EquipmentlineName = undefined;\n\t\t\t\ttrackingObject.configuration.ModelId = undefined;\n\t\t\t\ttrackingObject.configuration.ModelName = undefined;\n\t\t\t\ttrackingObject.configuration.PriceType = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTypeParameter = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateCurrency = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateType = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateBasic = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateAdditional = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateTotal = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalCurrency = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalBasic = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalAdditional = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalTotal = undefined;\n\n\t\t\t};\n\n\t\t\tfunction setFilterData(trackingObject, obj) {\n\n\t\t\t\ttrackingObject.filter = {};\n\t\t\t\ttrackingObject.filter.numberOfResults = 1;\n\t\t\t\ttrackingObject.filter.sortOrder = undefined;\n\t\t\t\ttrackingObject.filter.filterlist = [{\n\t\t\t\t\t\ttype: 'single_value',\n\t\t\t\t\t\tname: 'TR', \/\/for trim line\n\t\t\t\t\t\tvalues: [getContentId()]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'single_value',\n\t\t\t\t\t\tname: 'DN', \/\/for number of doors\n\t\t\t\t\t\tvalues: [obj.attributes.doors.replace('-door', '')]\n\t\t\t\t\t}\n\t\t\t\t];\n\n\t\t\t}\n\n\n\t\t\t\/\/ Handlers\n\n\t\t\tfunction triggerEvent(trackingObject, event) {\n\n\t\t\t\tvwdata.push(trackingObject);\n\t\t\t\tconsole.log('%c SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', 'background: #222; color: #bada55', event, ' trackingObject:', trackingObject);\n\n\t\t\t};\n\n\t\t\tfunction onPageLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_VehicleFilterSearchResult_Pageload';\n\t\t\t\ttrackingObject.eventInfo.contentId = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\ttrackingObject.personalization.aemRessourcePath = undefined;\n\n\t\t\t\tsetConfigurationData(trackingObject);\n\t\t\t\tsetFilterData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_VehicleFilterSearchResult_Load';\n\t\t\t\ttrackingObject.eventInfo.contentId = getContentId();\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject);\n\t\t\t\tsetFilterData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t}\n\n\t\t\tfunction onSelectClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\t\t\t\tvar contentId = obj.attributes.type === 'trim' ? getContentId() : obj.attributes.label; \/\/ Tab click (trim) or button click (door)\n\n\t\t\t\tsetEventInfo(trackingObject);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_FilterSelect_Click';\n\t\t\t\ttrackingObject.eventInfo.contentId = contentId;\n\t\t\t\ttrackingObject.eventInfo.sectionName = contentId;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\n\t\t\t\ttrackingObject.filter = {};\n\t\t\t\ttrackingObject.filter.type = 'single_value';\n\t\t\t\ttrackingObject.filter.name = obj.attributes.name;\n\t\t\t\ttrackingObject.filter.values = [contentId];\n\t\t\t\ttrackingObject.filter.lowerbound = undefined;\n\t\t\t\ttrackingObject.filter.upperbound = undefined;\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t}\n\n\n\t\t\t\/\/ Main listener\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase 'VWBasic_VehicleFilterSearchResult_Pageload':\n\t\t\t\t\t\tonPageLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_VehicleFilterSearchResult_Load':\n\t\t\t\t\t\tonLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_FilterSelect_Click':\n\t\t\t\t\t\tonSelectClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25814,25815],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19672,"type":"CustomHtml","name":"23714f937922042cd8e5baa6c7ecec05","parameters":{"customHtml":"<script>\n\t(function(jQuery) {\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD SEO Dimsn EVENTS > 2019\/03\/29');\n\n\t\t\tvar $dataLayer = jQuery('#vw-data-layer');\n\t\t\tvar pageId = window.location.href.replace('?opentag_debug_tool', '').split('#')[0].replace('http:\/\/', '').replace('https:\/\/', '');\n\t\t\tvar currentTrim; \/\/ keep track of trim so we can distinguish between click events\n\n\n\t\t\t$dataLayer.on('data-layer-event-fired', function(e) {\n\n\t\t\t\tvar obj = dataLayer.event[dataLayer.event.length - 1];\n\n\t\t\t\tif (!Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.type) {\n\n\t\t\t\t\tcase 'initalView':\n\t\t\t\t\tcase 'click':\n\t\t\t\t\t\tonClick(obj);\n\t\t\t\t\t\tonLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t\/\/ If an event is already registered fire a pageload\n\t\t\tif (dataLayer.event.length) onLoad(dataLayer.event[0], true);\n\n\t\t\tfunction onLoad(obj, isPageLoad) {\n\n\t\t\t\tvar eventName = isPageLoad ? 'VWBasic_VehicleFilterSearchResult_Pageload' : 'VWBasic_VehicleFilterSearchResult_Load';\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: eventName,\n\t\t\t\t\teventAction: eventName,\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: pageId,\n\t\t\t\t\ttrim: obj.attributes.trim,\n\t\t\t\t\tdoors: obj.attributes.doors\n\t\t\t\t}\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c044-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t\tcurrentTrim = obj.attributes.trim;\n\n\t\t\t}\n\n\t\t\tfunction onClick(obj) {\n\n\t\t\t\tvar dataEventInfo = {\n\t\t\t\t\teventName: 'VWBasic_FilterSelect_Click',\n\t\t\t\t\teventAction: 'VWBasic_FilterSelect_Click',\n\t\t\t\t\tpageId: pageId,\n\t\t\t\t\tinfo: ''\n\t\t\t\t};\n\n\t\t\t\tvar dataAttributes = {\n\t\t\t\t\turl: pageId\n\t\t\t\t};\n\n\t\t\t\t\/\/ If different trim, must be tab click\n\t\t\t\tif (obj.attributes.trim !== currentTrim && currentTrim) {\n\n\t\t\t\t\tdataAttributes.name = 'trim select';\n\t\t\t\t\tdataAttributes.label = obj.attributes.trim;\n\t\t\t\t\tdataAttributes.type = 'trim';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdataAttributes.name = 'door number select';\n\t\t\t\t\tdataAttributes.label = obj.attributes.doors;\n\t\t\t\t\tdataAttributes.type = 'doors';\n\n\t\t\t\t}\n\n\t\t\t\tvwUk.Instances.dataLayerController.fireEvent('c044-01', dataEventInfo, {}, dataAttributes);\n\n\t\t\t\tcurrentTrim = obj.attributes.trim;\n\n\t\t\t}\n\n\t\t});\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25814,25815],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19673,"type":"CustomHtml","name":"40281d16fcb3afb431320408670e6811","parameters":{"customHtml":"<script>\n\n\/*\npages include: \n\/\/electric\/research\/keep-me-informed\n\/\/new\/new-touareg\/sign-up-form\n\/\/volkswagen-sign-up\n\/\/electric\/electric-cars\/newsletter\n\/\/electric\/electric-cars\/id3\/waiting-list\n*\/\n\n(function (jQuery) {\n    jQuery(document).ready(function () {\n\nwindow.VwTagConsole('Live > SD KMI ACTIONS > 2019\/06\/27');\n\n        \/\/ Select the data layer\n        var $dataLayer = jQuery('#vw-data-layer'),\n            vwdata = window.vwdata || [],\n            initialised = false,\n            contactByEmail = false,\n\n            \/\/ Actions\n            triggerEvent = function (trackingObject, event) {\n                vwdata.push(trackingObject);\n                console.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n            },\n\n            setEventInfo = function (trackingObject, eventAction) {\n                trackingObject.eventInfo = {};\n                trackingObject.eventInfo.eventAction = eventAction;\n                trackingObject.eventInfo.pageId = window.location.href.replace('https:\/\/', '').replace('http:\/\/', '');\n                trackingObject.eventInfo.pageName = 'electric cars : id newsletter';\n                trackingObject.eventInfo.pageCategory = 'electric-cars';\n            },\n\n            setUserBrowserData = function (trackingObject) {\n\n                trackingObject.user = trackingObject.user || {};\n                trackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n                trackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n                trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('main')[0] ? document.querySelectorAll('main')[0].offsetWidth.toString() : undefined;\n                trackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n            },\n\n            setEnvironmentData = function (trackingObject) {\n                trackingObject.environment = {};\n                trackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalKMID6' : 'VWKMID6';\n                trackingObject.environment.language = 'en';\n                trackingObject.environment.country = 'GB';\n            },\n\n            setFormData = function (trackingObject) {\n                trackingObject.form = {};\n                trackingObject.form.FormType = 'newsletter';\n                trackingObject.form.FormName = 'newsletterElectricCars';\n                trackingObject.form.FormVersion = '1';\n            },\n\n            setFormAdditionalData = function (trackingObject) {\n                trackingObject.form.MarketingConsent = [{\n                    'email': contactByEmail\n                }];\n                trackingObject.form.NewsletterType = undefined;\n                trackingObject.form.PrefContactChannels = contactByEmail ? 'email' : undefined;\n            },\n\n            setPersonalizationData = function (trackingObject) {\n                trackingObject.personalization = {\n                    'status': false,\n                    'placeholderId': undefined,\n                    'contentId': undefined,\n                    'activityId': undefined,\n                    'activityName': undefined,\n                    'experienceId': undefined,\n                    'experienceName': undefined,\n                    'offerName': undefined,\n                    'offerId': undefined\n                };\n            },\n\n            setLinkData = function (trackingObject) {\n                trackingObject.link = {};\n                trackingObject.link.url = window.location.href.replace('http:\/\/', '').replace('https:\/\/', '');\n                trackingObject.link.name = 'Submit';\n            },\n\n            setPartnerData = function (trackingObject, obj) {\n                trackingObject.partner = {};\n                trackingObject.partner.informationBnr = obj.eventInfo.dealerNumber ? obj.eventInfo.dealerNumber : undefined;\n                trackingObject.partner.informationName = obj.eventInfo.dealerName ? obj.eventInfo.dealerName : undefined;\n                trackingObject.partner.informationDepartment = undefined;\n                trackingObject.partner.informationZIP = undefined;\n            },\n\n            setConfigurationData = function (trackingObject) {\n                trackingObject.configuration = {\n                    'CarlineId': undefined,\n                    'CarlineName': undefined,\n                    'SalesgroupId': undefined,\n                    'SalesgroupName': undefined,\n                    'EquipmentlineName': undefined\n                };\n            },\n\n            setConfigurationPrice = function (trackingObject) {\n                trackingObject.configuration.PriceTypeParameter = undefined;\n                trackingObject.configuration.PriceType = undefined;\n                trackingObject.configuration.PriceRateCurrency = undefined;\n                trackingObject.configuration.PriceRateType = undefined;\n                trackingObject.configuration.PriceRateBasic = undefined;\n                trackingObject.configuration.PriceRateAdditional = undefined;\n                trackingObject.configuration.PriceRateTotal = undefined;\n                trackingObject.configuration.PriceTotalCurrency = undefined;\n                trackingObject.configuration.PriceTotalBasic = undefined;\n                trackingObject.configuration.PriceTotalAdditional = undefined;\n                trackingObject.configuration.PriceTotalTotal = undefined;\n            },\n\n            setEmailPreference = function () {\n                var checked = jQuery('.input-selector[checked]');\n                if (checked.length > 0) {\n                    var label = checked.text().toLowerCase();\n                    try {\n                        contactByEmail = label.trim() === 'yes';\n                    } catch (e) {\n                        \/\/ cant trim off the whitespace\n                    }\n                }\n            },\n\n            triggerPageLoad = function (obj) {\n                if (!initialised) {\n                    initialised = true;\n                    formPageload(obj);\n                }\n            },\n\n            formPageload = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_Form_Pageload');\n                trackingObject.eventInfo.contentLabels = undefined;\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setFormData(trackingObject);\n                trackingObject.form.FormStart = true;\n\n                triggerEvent(trackingObject, 'VWBasic_Form_Pageload');\n\n            },\n\n            formCtaClick = function (obj) {\n\n                var trackingObject = {};\n\n                setEventInfo(trackingObject, 'VWBasic_FormCTA_Click');\n                trackingObject.eventInfo.contentId = 'Submit';\n                trackingObject.eventInfo.sectionName = 'electric-cars';\n\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setLinkData(trackingObject);\n\n                setEmailPreference();\n                setFormData(trackingObject);\n                setFormAdditionalData(trackingObject);\n                setPartnerData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_FormCTA_Click');\n\n            },\n\n            formSuccess = function (obj) {\n\n                var trackingObject = {};\n                var timestamp = (Date.now() + Math.random()) * 100000;\n\n                setEventInfo(trackingObject, 'VWBasic_FormSubmissionSuccessMessage_Load');\n                trackingObject.eventInfo.contentId = undefined;\n                setEnvironmentData(trackingObject, obj);\n                setUserBrowserData(trackingObject);\n                setPersonalizationData(trackingObject);\n                setConfigurationData(trackingObject);\n                setConfigurationPrice(trackingObject);\n                setFormData(trackingObject);\n                setFormAdditionalData(trackingObject);\n                trackingObject.form.LeadID = timestamp.toString();\n                setPartnerData(trackingObject, obj);\n\n                triggerEvent(trackingObject, 'VWBasic_FormSubmissionSuccessMessage_Load');\n\n            };\n\n        \/\/ Main Listener\n        $dataLayer.on('data-layer-event-fired', function (e) {\n\n            var obj = dataLayer.event[dataLayer.event.length - 1];\n\n            if (!Bootstrapper) {\n\t\t\t\treturn;\n\t\t    }\n\n            switch (obj.eventInfo.eventAction) {\n                case 'KMIFormLoad':\n                    triggerPageLoad(obj);\n                    break;\n\n                case 'KMIFormSend':\n                    formCtaClick(obj);\n                    break;\n\n                case 'KMIFormSuccess':\n                    formSuccess(obj);\n                    break;\n\n                default:\n                    break;\n            }\n        });\n\n        \/\/ sometimes Qubit loads in late and we miss the inital event, in that case\n        \/\/ fire it now\n        if (dataLayer.event.length !== 0) {\n            var obj = dataLayer.event[dataLayer.event.length - 1];\n            triggerPageLoad(obj);\n        };\n\n    })\n})(jQuery)\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25822,25819,25820,25821,25823,25818,25843],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19674,"type":"CustomHtml","name":"5c033eed1bea59f23d59da9f2ba7c430","parameters":{"customHtml":"<script>\n\n\/\/ Page: \/\/new\/<model>\/which-model-compare\n\n\t(function(jQuery) {\n\n\t\tjQuery(document).ready(function() {\n\nwindow.VwTagConsole('Live > SD Which Model ACTIONS > 2019\/08\/28');\n\n\t\t\tvar vwdata = window.vwdata = window.vwdata || [];\n\n\t\t\tfunction isMainPage() {\n\t\t\t\treturn !isDetailsPage() && !isComparePage();\n\t\t\t};\n\n\t\t\tfunction isDetailsPage() {\n\t\t\t\treturn window.location.href.split('which-model-compare')[1].indexOf('\/details') !== -1;\n\t\t\t};\n\n\t\t\tfunction isComparePage() {\n\t\t\t\treturn window.location.href.split('which-model-compare')[1].indexOf('\/compare') !== -1;\n\t\t\t};\n\n\t\t\tfunction getPageType() {\n\t\t\t\treturn isMainPage() ? 'main' : isDetailsPage() ? 'details' : isComparePage() ? 'compare' : undefined;\n\t\t\t}\n\n\t\t\tfunction getVehicleList() {\n\n\t\t\t\tvar vehicleList = [];\n\n\t\t\t\tif (isComparePage()) {\n\n\t\t\t\t\tvehicleList = jQuery('.compare-panel__details').map(function() {\n\n\t\t\t\t\t\tvar carlineName = VW.whichModel.pageData.modelMarketingName; \/\/ e.g. Polo\n\t\t\t\t\t\tvar salesgroupName = $(this).find('h3.compare-panel__title').text().trim(); \/\/ e.g. Polo S\n\t\t\t\t\t\tvar modelId = $(this).find('a').attr('href').split('\/')[3]; \/\/ from anchor href(!) e.g. 30200-4624\n\t\t\t\t\t\tvar modelName = $(this).find('h4.compare-panel__subtitle').text().trim();\n\n\t\t\t\t\t\treturn {\n\n\t\t\t\t\t\t\tBodyType: undefined,\n\t\t\t\t\t\t\tCarlineId: modelId,\n\t\t\t\t\t\t\tCarlineName: carlineName,\n\t\t\t\t\t\t\tSalesgroupId: undefined,\n\t\t\t\t\t\t\tSalesgroupName: salesgroupName,\n\t\t\t\t\t\t\tEquipmentlineName: undefined,\n\t\t\t\t\t\t\tModelId: modelId,\n\t\t\t\t\t\t\tModelName: modelName\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}).get();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvehicleList = jQuery('.comparison-overview__derivative-info').map(function() {\n\n\t\t\t\t\t\tvar carlineName = VW.whichModel.pageData.modelMarketingName; \/\/ e.g. Polo\n\t\t\t\t\t\tvar salesgroupName = $(this).find('h3.comparison-overview__model-trim-name').text().trim(); \/\/ e.g. Polo S\n\t\t\t\t\t\tvar modelId = $(this).siblings('img').eq(0).attr('src').split('\/')[10]; \/\/ from image url(!) e.g. 30200-4624\n\t\t\t\t\t\tvar modelName = $(this).find('h4.comparison-overview__derivative-name').text().trim();\n\n\t\t\t\t\t\treturn {\n\n\t\t\t\t\t\t\tBodyType: undefined,\n\t\t\t\t\t\t\tCarlineId: modelId,\n\t\t\t\t\t\t\tCarlineName: carlineName,\n\t\t\t\t\t\t\tSalesgroupId: undefined,\n\t\t\t\t\t\t\tSalesgroupName: salesgroupName,\n\t\t\t\t\t\t\tEquipmentlineName: undefined,\n\t\t\t\t\t\t\tModelId: modelId,\n\t\t\t\t\t\t\tModelName: modelName\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}).get();\n\n\t\t\t\t}\n\n\t\t\t\treturn vehicleList;\n\n\t\t\t}\n\n\n\t\t\t\/\/ Set data\n\n\t\t\tfunction setEventInfo(trackingObject, obj) {\n\n\t\t\t\tvar pageId = window.location.href.split('?')[0].split('#')[0].replace('http:\/\/', '').replace('https:\/\/', ''); \/\/ Dynamic for product pages\n\n\t\t\t\ttrackingObject.eventInfo = {};\n\t\t\t\ttrackingObject.eventInfo.pageId = pageId;\n\t\t\t\ttrackingObject.eventInfo.pageName = pageId.split(\/\\\/|#\/).slice(1).join(' : '); \/\/ Split url by '\/' OR '#'\n\t\t\t\ttrackingObject.eventInfo.contentId = obj.attributes.label; \/\/ Button clicks only\n\t\t\t\ttrackingObject.eventInfo.pageCategory = 'New cars';\n\t\t\t\ttrackingObject.eventInfo.sectionName = undefined;\n\t\t\t\ttrackingObject.eventInfo.templateType = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setEnvironmentData(trackingObject) {\n\n\t\t\t\ttrackingObject.environment = {};\n\t\t\t\ttrackingObject.environment.applicationId = (window.location.href.indexOf('vwcloud.co.uk') > -1) ? 'VWLocalWhichModelD6' : 'VWWhichModelD6';\n\t\t\t\ttrackingObject.environment.language = 'en';\n\t\t\t\ttrackingObject.environment.country = 'GB';\n\n\t\t\t}\n\n\t\t\tfunction setUserBrowserData(trackingObject) {\n\n\t\t\t\ttrackingObject.user = {};\n\t\t\t\ttrackingObject.user.browserResolutionHeight = Math.max(document.documentElement.clientWidth, window.innerWidth || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionWidth = Math.max(document.documentElement.clientHeight, window.innerHeight || 0).toString();\n\t\t\t\ttrackingObject.user.browserResolutionBreakpoint = document.querySelectorAll('#page')[0] ? document.querySelectorAll('#page')[0].offsetWidth.toString() : undefined;\n\t\t\t\ttrackingObject.user.browserResolutionOrientation = (window.innerHeight < window.innerWidth) ? 'h' : 'v';\n\n\t\t\t}\n\n\t\t\tfunction setPersonalizationData(trackingObject) {\n\n\t\t\t\ttrackingObject.personalization = {};\n\t\t\t\ttrackingObject.personalization.status = false;\n\t\t\t\ttrackingObject.personalization.placeholderId = undefined;\n\t\t\t\ttrackingObject.personalization.contentId = undefined;\n\t\t\t\ttrackingObject.personalization.activityId = undefined;\n\t\t\t\ttrackingObject.personalization.activityName = undefined;\n\t\t\t\ttrackingObject.personalization.experienceId = undefined;\n\t\t\t\ttrackingObject.personalization.experienceName = undefined;\n\t\t\t\ttrackingObject.personalization.offerName = undefined;\n\t\t\t\ttrackingObject.personalization.offerId = undefined;\n\n\t\t\t}\n\n\t\t\tfunction setConfigurationData(trackingObject, obj) {\n\n\t\t\t\tvar carlineName = VW.whichModel.pageData.modelMarketingName; \/\/ e.g. Polo\n\t\t\t\tvar carlineId = VW.whichModel.finance ? VW.whichModel.finance.finance.id.toString() : VW.whichModel.pageData.modelId.toString(); \/\/ from Details page or generic\n\t\t\t\tvar salesgroupName = obj.attributes.modelName || carlineName; \/\/ from button click event on Main page or generic\n\t\t\t\tvar modelId, modelName;\n\t\t\t\tvar fromPrice = obj.attributes.price; \/\/ from button click event on Main page\n\n\t\t\t\tif (isDetailsPage()) {\n\n\t\t\t\t\tmodelId = carlineId;\n\t\t\t\t\tmodelName = jQuery('select.js-select', 'section#finance-cost').val();\n\t\t\t\t\tfromPrice = jQuery('.car-banner__price').text().trim().split('From \u00a3')[1].split(' ')[0].trim().replace(',', '');\n\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction + '|' + getPageType()) {\n\n\t\t\t\t\tcase 'VWBasic_Vehicle_Pageload|main':\n\t\t\t\t\tcase 'VWBasic_VehicleSubNavigation_Click|compare':\n\t\t\t\t\t\tsalesgroupName = undefined;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_Vehicle_Pageload|details':\n\t\t\t\t\tcase 'VWBasic_VehicleSubNavigation_Click|details':\n\t\t\t\t\t\tsalesgroupName = jQuery('.car-banner__content').find('h1').text().trim();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\ttrackingObject.configuration.BodyTypeName = undefined;\n\t\t\t\ttrackingObject.configuration.CarlineId = carlineId;\n\t\t\t\ttrackingObject.configuration.CarlineName = carlineName;\n\t\t\t\ttrackingObject.configuration.SalesgroupId = undefined;\n\t\t\t\ttrackingObject.configuration.SalesgroupName = salesgroupName;\n\t\t\t\ttrackingObject.configuration.EquipmentlineName = undefined;\n\t\t\t\ttrackingObject.configuration.ModelId = modelId;\n\t\t\t\ttrackingObject.configuration.ModelName = modelName;\n\t\t\t\ttrackingObject.configuration.PriceType = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTypeParameter = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateCurrency = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateType = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateBasic = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateAdditional = undefined;\n\t\t\t\ttrackingObject.configuration.PriceRateTotal = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalCurrency = 'GBP';\n\t\t\t\ttrackingObject.configuration.PriceTotalBasic = fromPrice;\n\t\t\t\ttrackingObject.configuration.PriceTotalAdditional = undefined;\n\t\t\t\ttrackingObject.configuration.PriceTotalTotal = fromPrice;\n\n\t\t\t}\n\n\t\t\tfunction setPartnerData(trackingObject) {\n\n\t\t\t\ttrackingObject.partner = {};\n\t\t\t\ttrackingObject.partner.informationName = undefined;\n\t\t\t\ttrackingObject.partner.informationBnr = undefined;\n\t\t\t\ttrackingObject.partner.informationDepartment = undefined;\n\t\t\t\ttrackingObject.partner.informationZIP = undefined;\n\n\t\t\t};\n\n\t\t\tfunction setLinkData(trackingObject, obj) {\n\n\t\t\t\ttrackingObject.link = {};\n\t\t\t\ttrackingObject.link.url = obj.attributes.link;\n\t\t\t\ttrackingObject.link.name = obj.attributes.label || obj.attributes.value;\n\n\t\t\t}\n\n\n\t\t\t\/\/ Handlers\n\n\t\t\tfunction triggerEvent(trackingObject, event) {\n\n\t\t\t\tvwdata.push(trackingObject);\n\t\t\t\tconsole.log('%c SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', 'background: #222; color: #bada55', event, ' trackingObject:', trackingObject);\n\n\t\t\t};\n\n\t\t\tfunction onPageLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_Vehicle_Pageload';\n\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\ttrackingObject.environment.featureAppId = undefined;\n\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\ttrackingObject.personalization.aemRessourcePath = undefined;\n\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\t\t\t\tsetPartnerData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onButtonClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_VehicleButton_Click';\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\ttrackingObject.environment.featureAppId = undefined;\n\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetLinkData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onMultipleVehiclesButtonClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_MultipleVehiclesButton_Click'; \/\/  was 'VWBasic_VehicleSelectionButton_Click';\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\n\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\ttrackingObject.configuration.vehicleList = getVehicleList();\n\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetLinkData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onMultipleVehiclesPageload(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_MultipleVehicles_Pageload'; \/\/ was 'VWBasic_VehicleSelection_Pageload';\n\t\t\t\ttrackingObject.eventInfo.contentLabels = undefined;\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\ttrackingObject.personalization.aemRessourcePath = undefined;\n\n\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\ttrackingObject.configuration.vehicleList = getVehicleList();\n\n\t\t\t\tsetPartnerData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onMultipleVehiclesLoad(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_MultipleVehicles_Load'; \/\/ was 'VWBasic_VehicleSelection_Load';\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\n\t\t\t\ttrackingObject.configuration = {};\n\t\t\t\ttrackingObject.configuration.vehicleList = getVehicleList();\n\n\t\t\t\tsetPartnerData(trackingObject);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onSubNavigationClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_VehicleSubNavigation_Click';\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetLinkData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\tfunction onModelSelectClick(obj) {\n\n\t\t\t\tvar trackingObject = {};\n\n\t\t\t\tsetEventInfo(trackingObject, obj);\n\t\t\t\ttrackingObject.eventInfo.eventAction = 'VWBasic_ModelSelect_Click';\n\n\t\t\t\tsetEnvironmentData(trackingObject);\n\t\t\t\tsetUserBrowserData(trackingObject);\n\t\t\t\tsetPersonalizationData(trackingObject);\n\t\t\t\tsetConfigurationData(trackingObject, obj);\n\t\t\t\tsetPartnerData(trackingObject);\n\t\t\t\tsetLinkData(trackingObject, obj);\n\n\t\t\t\ttriggerEvent(trackingObject, trackingObject.eventInfo.eventAction);\n\n\t\t\t};\n\n\t\t\t\/\/ Main listener\n\n\t\t\tVW.whichModel.ComparisonData.on('tracking-event-fired', function(e) {\n\n\t\t\t\tvar obj = VW.whichModel.ComparisonData.tracking[VW.whichModel.ComparisonData.tracking.length - 1];\n\n\t\t\t\tif (!window.Bootstrapper) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (obj.eventInfo.eventAction) {\n\n\t\t\t\t\tcase 'VWBasic_Vehicle_Pageload':\n\t\t\t\t\t\tonPageLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_VehicleButton_Click':\n\t\t\t\t\t\tonButtonClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_MultipleVehiclesButton_Click':\n\t\t\t\t\t\tonMultipleVehiclesButtonClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_MultipleVehicles_Pageload':\n\t\t\t\t\t\tonMultipleVehiclesPageload(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_MultipleVehicles_Load':\n\t\t\t\t\t\tonMultipleVehiclesLoad(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_VehicleSubNavigation_Click':\n\t\t\t\t\t\tonSubNavigationClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'VWBasic_ModelSelect_Click':\n\t\t\t\t\t\tonModelSelectClick(obj);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t})(jQuery);\n<\/script>","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25801],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19675,"type":"CustomHtml","name":"a5418b6ea0d1641f8efebe96e7c63ba8","parameters":{"customHtml":"<script type=\"text\/javascript\">\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole(\n        '%cLive > SD FC EVENTS > 2021\/03\/09',\n        'color:white;background-color:green'\n      );\n\n      var $dataLayer = jQuery('#vw-data-layer');\n      var isModelsPage = window.location.hash.indexOf('screen-1') > 0;\n      var addedResetListener = false;\n      var formInterval;\n\n      var getUrl = function (includeHash) {\n        var url = window.location.href\n          .split('?')[0]\n          .split('#')[0]\n          .replace('http:\/\/', '')\n          .replace('https:\/\/', '');\n\n        if (includeHash) {\n          url = window.location.href\n            .replace('http:\/\/', '')\n            .replace('https:\/\/', '');\n        }\n        return url;\n      };\n\n      var hasFormLoaded = function () {\n        if (jQuery('.finance-calc-loader-form').length) {\n          clearInterval(formInterval);\n\n          var dataEventInfo = {\n            eventName: 'VWBasic_Pageload',\n            eventAction: 'VWBasic_Pageload',\n            pageId: getUrl(false),\n            pageName: 'FinanceCalculatorPage',\n            contentID: 'FinanceCalculatorPage',\n          };\n\n          var dataAttributes = {\n            pageName: '\/finance-calculator\/choose-model',\n          };\n\n          vwUk.Instances.dataLayerController.fireEvent(\n            'c066-01',\n            dataEventInfo,\n            {},\n            dataAttributes\n          );\n        }\n      };\n\n      var addResetListeners = function (obj) {\n        \/\/ Reset button on Error Screen 2\n        var resetBtn = jQuery(\n          '.finance-calc-customise-offer-page .finance-calculator-offer-table__error-reset'\n        );\n\n        addedResetListener = true;\n        resetBtn.on('click', function (e) {\n          vwUk.Instances.dataLayerController.fireEvent(\n            'c066',\n            {\n              eventName: 'VWBasic_Link_Click',\n              eventAction: 'VWBasic_Link_Click',\n              pageId: getUrl(false),\n              pageName: 'FinanceCalculatorPage',\n              contentID: 'FinanceCalculatorPage',\n            },\n            {},\n            {\n              pageName: '\/finance-calculator\/',\n              url: getUrl(true),\n              name: 'Reset finance calculator',\n            }\n          );\n        });\n      };\n\n      setTimeout(function () {\n        jQuery('.finance-product-selector__buttons > div > button').on(\n          'click',\n          function (e) {\n            vwUk.Instances.dataLayerController.fireEvent(\n              'c059',\n              {\n                eventName: 'VWBasic_FilterSelect_Click',\n                eventAction: 'VWBasic_FilterSelect_Click',\n                pageId: getUrl(false),\n                pageName: 'FinanceCalculatorPage',\n                contentID: 'FinanceCalculatorPage',\n              },\n              {},\n              {\n                pageName: '\/finance-calculator\/',\n                name: this.innerText,\n              }\n            );\n          }\n        );\n\n        \/\/ Book a test drive button at the bottom on Screen 2\n        jQuery('.screen-pagination').delegate(\n          '.secondary-link.finance-calc-customise-offer-page',\n          'click',\n          function (e) {\n            if (this.innerText === 'Book a test drive') {\n              vwUk.Instances.dataLayerController.fireEvent(\n                'c066',\n                {\n                  eventName: 'VWBasic_VehicleFilterSearchResultLink_Click',\n                  eventAction: 'VWBasic_VehicleFilterSearchResultLink_Click',\n                  pageId: getUrl(false),\n                  pageName: 'FinanceCalculatorPage',\n                  contentID: 'FinanceCalculatorPage',\n                },\n                {},\n                {\n                  pageName: '\/finance-calculator\/',\n                  url: this.href,\n                  name: this.innerText,\n                }\n              );\n            }\n          }\n        );\n\n        \/\/ find a retailer btn at the bottom on Screen 2 and Screen 3 (email)\n        jQuery('body').on(\n          'click',\n          '.finance-calculator__ctas .button, .finance-calculator-lease-row__button .button, .finance-calculator__ctas a',\n          function (e) {\n            var dataEventInfo = {\n              eventName: 'VWBasic_VehicleFilterSearchResultButton_Click',\n              eventAction: 'VWBasic_VehicleFilterSearchResultButton_Click',\n              pageId: getUrl(false),\n              pageName: 'FinanceCalculatorPage',\n              contentID: 'FinanceCalculatorPage',\n            };\n            var dataAttributes = {\n              pageName: '\/finance-calculator\/',\n              url: this.href,\n              name: this.innerText,\n            };\n\n            vwUk.Instances.dataLayerController.fireEvent(\n              'c066',\n              dataEventInfo,\n              {},\n              dataAttributes\n            );\n          }\n        );\n\n        \/\/ email btn on Screen 3 (email)\n        jQuery('.finance-calc-email-quote-page .button--nav').on(\n          'click',\n          function (e) {\n            var dataEventInfo = {\n              eventName: 'VWBasic_VehicleFormCTA_Click',\n              eventAction: 'VWBasic_VehicleFormCTA_Click',\n              pageId: getUrl(false),\n              pageName: 'FinanceCalculatorPage',\n              contentID: 'FinanceCalculatorPage',\n            };\n            var dataAttributes = {\n              pageName: '\/finance-calculator\/email',\n              url: getUrl(false) + '\/api\/finance\/3.1\/quote',\n              name: 'Email quote',\n            };\n\n            vwUk.Instances.dataLayerController.fireEvent(\n              'c066',\n              dataEventInfo,\n              {},\n              dataAttributes\n            );\n          }\n        );\n      }, 1400);\n\n      \/\/ Main Listener\n      $dataLayer.on('data-layer-event-fired', function (e) {\n        var obj = dataLayer.event[dataLayer.event.length - 1];\n\n        if (\n          obj.eventInfo.eventAction === 'SPAnavigationLoad' &&\n          obj.attributes.pageName.indexOf('not-available') > 0 &&\n          !addedResetListener\n        ) {\n          setTimeout(function () {\n            addResetListeners(obj);\n          }, 500);\n        }\n      });\n\n      if (isModelsPage) {\n        formInterval = setInterval(hasFormLoaded.bind(this), 100);\n      }\n    });\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25846,25817],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19676,"type":"CustomHtml","name":"776d70f90824bac862c16c2bcc187dc9","parameters":{"customHtml":"<script>\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole(\n        '%cLive > SD FC ACTIONS > 2021\/02\/25',\n        'color:white;background-color:green'\n      );\n\n      \/\/ Select the data layer\n      var $dataLayer = jQuery('#vw-data-layer'),\n        vwdata = window.vwdata || [],\n        budgetInit = false,\n        arrivedAtScreen2 = false,\n        triggeredTableResultsEvent = true,\n        notAvailTime = 0,\n        pageCategory = 'car-finance',\n        getPageName = function () {\n          var name = '',\n            prefix = ' : ',\n            doPrefix = false,\n            paths = window.location.pathname.split('\/');\n\n          for (var i = 0; i < paths.length; i++) {\n            var section = paths[i];\n            if (section !== '') {\n              if (doPrefix) {\n                name += prefix + section.split('-').join(' ').toLowerCase();\n              } else {\n                name += section.split('-').join(' ').toLowerCase();\n              }\n              doPrefix = true;\n            }\n          }\n          return name;\n        },\n        lowerFirstLetterNoHypens = function (str) {\n          var words = str.split('-');\n\n          for (var i = 0; i < words.length; i++) {\n            var s = words[i];\n            words[i] = s.charAt(0).toUpperCase() + s.slice(1);\n          }\n          return words.join(' ');\n        },\n        getTrimAndEngine = function () {\n          return {\n            trim: jQuery(\n              '.dropdown-selector--finance-calculator[name=\"trimSelect\"] .dropdown-selector__item[tabIndex=\"0\"]'\n            ).text(),\n            engine: jQuery(\n              '.dropdown-selector--finance-calculator[name=\"derivativeSelect\"] .dropdown-selector__item[tabIndex=\"0\"]'\n            ).text(),\n          };\n        },\n        initDropdownsBeforeVehiclePageLoad = function (\n          obj,\n          removeRadioFilters\n        ) {\n          \/* note:\n                    the polymer dropdowns wont be populated unless user has clicked on them - there is no way to read the selected text as it doesnt exsisit in the DOM!!?.\n                    hack solution is to trigger a open\/close with a slight delay\n                    *\/\n          var derivative = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"derivativeSelect\"] .dropdown-selector__list'\n            ),\n            derivativeSelect = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"derivativeSelect\"] .input-field__input'\n            );\n\n          var trim = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"trimSelect\"] .dropdown-selector__list'\n            ),\n            trimSelect = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"trimSelect\"] .input-field__input'\n            );\n\n          setTimeout(function () {\n            derivative.addClass('vw-invisible');\n            trim.addClass('vw-invisible');\n            trimSelect.trigger('click');\n          }, 50);\n\n          setTimeout(function () {\n            derivativeSelect.trigger('click');\n            trim.removeClass('vw-invisible');\n          }, 250);\n\n          setTimeout(function () {\n            jQuery('body').trigger('click');\n            derivative.removeClass('vw-invisible');\n            vehiclePageLoad(obj, removeRadioFilters);\n          }, 450);\n        },\n        initDropdownsBeforeFilterSearchResult = function (\n          obj,\n          removeRadioFilters\n        ) {\n          \/* note:\n                    the polymer dropdowns wont be populated unless user has clicked on them - there is no way to read the selected text as it doesnt exsisit in the DOM!!?.\n                    hack solution is to trigger a open\/close with a slight delay\n                    *\/\n          var derivative = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"derivativeSelect\"] .dropdown-selector__list'\n            ),\n            derivativeSelect = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"derivativeSelect\"] .input-field__input'\n            );\n\n          var trim = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"trimSelect\"] .dropdown-selector__list'\n            ),\n            trimSelect = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"trimSelect\"] .input-field__input'\n            );\n\n          setTimeout(function () {\n            derivative.addClass('vw-invisible');\n            trim.addClass('vw-invisible');\n            trimSelect.trigger('click');\n          }, 50);\n\n          setTimeout(function () {\n            derivativeSelect.trigger('click');\n            trim.removeClass('vw-invisible');\n          }, 250);\n\n          setTimeout(function () {\n            jQuery('body').trigger('click');\n            derivative.removeClass('vw-invisible');\n            vehicleFilterSearchResult(obj, removeRadioFilters);\n          }, 450);\n        },\n        updateEngineDropdownsBeforeFilterSearchResult = function (obj) {\n          \/* note:\n                    the polymer dropdowns wont be populated unless user has clicked on them - there is no way to read the selected text as it doesnt exsisit in the DOM!!?.\n                    hack solution is to trigger a open\/close with a slight delay\n                    *\/\n          var derivative = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"derivativeSelect\"] .dropdown-selector__list'\n            ),\n            derivativeSelect = jQuery(\n              '.dropdown-selector--finance-calculator[name=\"derivativeSelect\"] .input-field__input'\n            );\n\n          setTimeout(function () {\n            derivative.addClass('vw-invisible');\n            derivativeSelect.trigger('click');\n          }, 20);\n\n          setTimeout(function () {\n            jQuery('body').trigger('click');\n            derivative.removeClass('vw-invisible');\n            vehicleFilterSearchResult(obj, false);\n          }, 150);\n        },\n        \/\/ Actions\n        triggerEvent = function (trackingObject, event) {\n          vwdata.push(trackingObject);\n          console.log(\n            '%c SD Bootstrapper (' +\n              Bootstrapper.ensightenOptions.publishPath +\n              ') push event:',\n            'background: #222; color: #bada55;',\n            event,\n            ' trackingObject:',\n            trackingObject\n          );\n        },\n        setEventInfo = function (trackingObject, eventAction, obj) {\n          var id = obj.eventInfo.pageId\n            ? obj.eventInfo.pageId\n            : window.location.href\n                .replace('http:\/\/', '')\n                .replace('https:\/\/', '');\n\n          trackingObject.eventInfo = {};\n          trackingObject.eventInfo.eventAction = eventAction;\n          trackingObject.eventInfo.pageId = id.split('?')[0].split('#')[0];\n          trackingObject.eventInfo.pageName = getPageName();\n        },\n        checkPaymentBreakDown = function (params) {\n          for (var i = 0; i < params.length; i++) {\n            var keys = params[i].split('=');\n            if (keys[0].indexOf('paymentBreakdown') > -1) {\n              return keys[1] === 'deposit';\n            }\n          }\n          return false;\n        },\n        setFilter = function (trackingObject, obj) {\n          var params,\n            isModelsPage = window.location.hash.indexOf('screen-1') > 0;\n\n          trackingObject.filter = {};\n          trackingObject.filter.filterlist = [];\n\n          if (isModelsPage) {\n            params = window.location.hash.split('#!view\/screen-1\/range\/');\n            trackingObject.filter.filterlist = [\n              {\n                type: 'single_value',\n                name: 'MB',\n                values: [params[params.length - 1].split('?')[0]],\n                lowerbound: undefined,\n                upperbound: undefined,\n              },\n              {\n                type: 'single_value',\n                name: 'FP',\n                values: [\n                  jQuery(\n                    '.finance-product-selector__buttons .button:not(\".button--inactive\")'\n                  )\n                    .text()\n                    .trim(),\n                ],\n                lowerbound: undefined,\n                upperbound: undefined,\n              },\n            ];\n            trackingObject.filter.numberOfResults = jQuery(\n              '.finance-calc-range-filter__content--open:visible'\n            ).length;\n          } else {\n            var sendInDeposit,\n              trimAndEngine = getTrimAndEngine(),\n              errors = jQuery('.finance-calculator-offer-table__error');\n\n            params = window.location.hash\n              .replace('#!\/view\/screen-2?', '')\n              .split('&');\n            sendInDeposit = checkPaymentBreakDown(params);\n            trackingObject.filter.numberOfResults = 1;\n\n            if (\n              obj.attributes.pageName &&\n              obj.attributes.pageName.indexOf('not-available') > 0\n            ) {\n              trackingObject.filter.numberOfResults = 0;\n            } else if (errors.length > 0) {\n              trackingObject.filter.numberOfResults =\n                errors[0].style.display === 'none' ? 1 : 0;\n            }\n\n            for (var i = 0; i < params.length; i++) {\n              var keys = params[i].split('=');\n              if (keys[0].indexOf('annualMileage') > -1) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'KR',\n                  values: [keys[1]],\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (\n                keys[0].indexOf('monthlyPayment') > -1 &&\n                !sendInDeposit\n              ) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'MR',\n                  values: [keys[1]],\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (keys[0].indexOf('productType') > -1) {\n                var values = [];\n                if (keys[1] === 'CONTRACT_HIRE') {\n                  values = ['Contract Hire'];\n                } else if (keys[1] === 'LEASE') {\n                  values = ['Lease and Care'];\n                } else {\n                  values = ['Solutions PCP'];\n                }\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'FP',\n                  values: values,\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (keys[0].indexOf('modelId') > -1) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'CG',\n                  values: [\n                    jQuery('h2.finance-calc-customise-offer-page').text(),\n                  ], \/\/ [keys[1]]\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (keys[0].indexOf('trimId') > -1) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'TR',\n                  values: [trimAndEngine.trim],\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (keys[0].indexOf('derivativeId') > -1) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'EN',\n                  values: [trimAndEngine.engine],\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (keys[0].indexOf('servicePlan') > -1) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'SC',\n                  values: [keys[1]],\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (keys[0].indexOf('rentalsInAdvance') > -1) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'RIA',\n                  values: [keys[1]],\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (keys[0].indexOf('deposit') > -1 && sendInDeposit) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'IP',\n                  values: [keys[1]],\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              } else if (keys[0].indexOf('periodOfMonths') > -1) {\n                trackingObject.filter.filterlist.push({\n                  type: 'single_value',\n                  name: 'FD',\n                  values: [keys[1]],\n                  lowerbound: undefined,\n                  upperbound: undefined,\n                });\n              }\n            }\n          }\n        },\n        checkFilters = function (trackingObject, removeRadioFilters) {\n          if (removeRadioFilters) {\n            \/\/ when no radios buttons are displayed - delete them all from the filterlist\n            errors = jQuery('.finance-calculator-offer-table__error');\n            for (var i = 0; i < errors.length; i++) {\n              var error = errors[i];\n              if (error.style.display !== 'none') {\n                var text = jQuery(\n                  '.finance-calculator-offer-table__error-title',\n                  error\n                );\n                if (\n                  text &&\n                  text\n                    .text()\n                    .indexOf(\n                      'Sorry, unfortunately there is no offer available'\n                    ) >= 0\n                ) {\n                  filterlist = [];\n                  for (\n                    var j = 0;\n                    j < trackingObject.filter.filterlist.length;\n                    j++\n                  ) {\n                    var item = trackingObject.filter.filterlist[j];\n                    if (\n                      item.name === 'FP' ||\n                      item.name === 'EN' ||\n                      item.name === 'TR' ||\n                      item.name === 'CG'\n                    ) {\n                      filterlist.push(item);\n                    }\n                  }\n                  trackingObject.filter.filterlist = filterlist;\n                  console.log('push altered filterlist', filterlist);\n                  break;\n                }\n              }\n            }\n          }\n        },\n        setUserBrowserData = function (trackingObject) {\n          trackingObject.user = trackingObject.user || {};\n          trackingObject.user.browserResolutionHeight = Math.max(\n            document.documentElement.clientWidth,\n            window.innerWidth || 0\n          ).toString();\n          trackingObject.user.browserResolutionWidth = Math.max(\n            document.documentElement.clientHeight,\n            window.innerHeight || 0\n          ).toString();\n          trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll(\n            'main'\n          )[0]\n            ? document.querySelectorAll('main')[0].offsetWidth.toString()\n            : undefined;\n          trackingObject.user.browserResolutionOrientation =\n            window.innerHeight < window.innerWidth ? 'h' : 'v';\n        },\n        setEnvironmentData = function (trackingObject) {\n          trackingObject.environment = {};\n          trackingObject.environment.applicationId =\n            window.location.href.indexOf('vwcloud.co.uk') > -1\n              ? 'VWLocalFinanceCalcD6'\n              : 'VWFinanceCalcD6';\n          trackingObject.environment.language = 'en';\n          trackingObject.environment.country = 'GB';\n        },\n        setPersonalizationData = function (trackingObject) {\n          trackingObject.personalization = {\n            status: false,\n            placeholderId: undefined,\n            contentId: undefined,\n            activityId: undefined,\n            activityName: undefined,\n            experienceId: undefined,\n            experienceName: undefined,\n            offerName: undefined,\n            offerId: undefined,\n          };\n        },\n        setPartnerData = function (trackingObject) {\n          trackingObject.partner = {};\n          trackingObject.partner.informationBnr = undefined;\n          trackingObject.partner.informationName = undefined;\n          trackingObject.partner.informationDepartment = undefined;\n          trackingObject.partner.informationZIP = undefined;\n        },\n        setPersonalizationData = function (trackingObject) {\n          trackingObject.personalization = {\n            status: false,\n            placeholderId: undefined,\n            contentId: undefined,\n            activityId: undefined,\n            activityName: undefined,\n            experienceId: undefined,\n            experienceName: undefined,\n            offerName: undefined,\n            offerId: undefined,\n          };\n        },\n        setLinkData = function (trackingObject, obj) {\n          var message = obj.attributes.name;\n\n          try {\n            message = message.trim();\n          } catch (e) {\n            \/\/ cant trim off the whitespace\n          }\n\n          trackingObject.link = {\n            url: obj.attributes.url,\n            name: message,\n          };\n        },\n        setConfigurationData = function (trackingObject) {\n          var params = window.location.hash.split('&');\n          var modelIdParam = params.filter(function (param) {\n            return param && param.split('=')[0] === 'modelId';\n          });\n          var modelId = modelIdParam[0] && modelIdParam[0].split('=')[1];\n\n          trackingObject.configuration = {\n            CarlineId: modelId,\n            CarlineName: undefined,\n            SalesgroupId: undefined,\n            SalesgroupName: undefined,\n            EquipmentlineName: undefined,\n          };\n        },\n        setConfigurationPrice = function (trackingObject) {\n          trackingObject.configuration.CarlineName = jQuery(\n            'h2.finance-calc-customise-offer-page'\n          ).text();\n          trackingObject.configuration.ModelName = undefined;\n          trackingObject.configuration.ModelId = undefined;\n          trackingObject.configuration.BodyType = undefined;\n          trackingObject.configuration.PriceTypeParameter = undefined;\n          trackingObject.configuration.PriceType = undefined;\n          trackingObject.configuration.PriceRateCurrency = undefined;\n          trackingObject.configuration.PriceRateType = undefined;\n          trackingObject.configuration.PriceRateBasic = undefined;\n          trackingObject.configuration.PriceRateAdditional = undefined;\n          trackingObject.configuration.PriceRateTotal = undefined;\n          trackingObject.configuration.PriceTotalCurrency = undefined;\n          trackingObject.configuration.PriceTotalBasic = undefined;\n          trackingObject.configuration.PriceTotalAdditional = undefined;\n          trackingObject.configuration.PriceTotalTotal = undefined;\n        },\n        setFormData = function (trackingObject) {\n          trackingObject.form = {};\n          trackingObject.form.FormType = 'quote';\n          trackingObject.form.FormName = 'email quote financial calculator';\n          trackingObject.form.FormVersion = '1';\n        },\n        setFormAdditionalData = function (trackingObject) {\n          trackingObject.form.MarketingConsent = [\n            {\n              email: true,\n            },\n          ];\n          trackingObject.form.NewsletterType = undefined;\n          trackingObject.form.PrefContactChannels = undefined;\n          trackingObject.form.Questionnaire = undefined;\n        },\n        basicPageLoad = function (obj) {\n          var trackingObject = {};\n\n          setEventInfo(trackingObject, 'VWBasic_Pageload', obj);\n          trackingObject.eventInfo.pageCategory = pageCategory;\n          trackingObject.eventInfo.contentLabels = undefined;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setConfigurationData(trackingObject);\n\n          triggerEvent(trackingObject, 'VWBasic_Pageload');\n          arrivedAtScreen2 = false;\n        },\n        vehiclePageLoad = function (obj, removeRadioFilters) {\n          var trackingObject = {};\n\n          setEventInfo(\n            trackingObject,\n            'VWBasic_VehicleFilterSearchResult_Pageload',\n            obj\n          );\n          trackingObject.eventInfo.contentId = undefined;\n          trackingObject.eventInfo.pageCategory = pageCategory;\n\n          setPersonalizationData(trackingObject);\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setConfigurationData(trackingObject);\n\n          setConfigurationPrice(trackingObject);\n          setFilter(trackingObject, obj);\n          checkFilters(trackingObject, removeRadioFilters);\n\n          triggerEvent(\n            trackingObject,\n            'VWBasic_VehicleFilterSearchResult_Pageload'\n          );\n          arrivedAtScreen2 = true;\n        },\n        basicLinkClick = function (obj) {\n          var trackingObject = {};\n\n          setEventInfo(trackingObject, 'VWBasic_Link_Click', obj);\n          trackingObject.eventInfo.pageCategory = pageCategory;\n          trackingObject.eventInfo.sectionName = obj.attributes.name;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setLinkData(trackingObject, obj);\n\n          triggerEvent(trackingObject, 'VWBasic_Link_Click');\n        },\n        vehicleResultClick = function (obj, action) {\n          var trackingObject = {};\n          setEventInfo(trackingObject, action, obj);\n          trackingObject.eventInfo.contentId = obj.attributes.name;\n          trackingObject.eventInfo.pageCategory = pageCategory;\n          trackingObject.eventInfo.sectionName = obj.attributes.name;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setLinkData(trackingObject, obj);\n\n          if (action !== 'VWBasic_FilterSelect_Click') {\n            setConfigurationData(trackingObject);\n            setConfigurationPrice(trackingObject);\n            setFilter(trackingObject, obj);\n          } else {\n            trackingObject.filter = {};\n            trackingObject.filter.filterlist = null;\n            trackingObject.filter.type = 'single_value';\n            trackingObject.filter.name = 'financial product';\n            trackingObject.filter.values = [\n              jQuery(\n                '.finance-product-selector__buttons .button:not(\".button--inactive\")'\n              )\n                .text()\n                .trim(),\n            ];\n            trackingObject.filter.lowerbound = undefined;\n            trackingObject.filter.upperbound = undefined;\n          }\n\n          triggerEvent(trackingObject, action);\n        },\n        productSelectClick = function (obj, action) {\n          var trackingObject = {};\n\n          setEventInfo(trackingObject, action, obj);\n          trackingObject.eventInfo.contentId = obj.attributes.name;\n          trackingObject.eventInfo.pageCategory = pageCategory;\n          trackingObject.eventInfo.sectionName = obj.attributes.name;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setConfigurationData(trackingObject);\n          setConfigurationPrice(trackingObject);\n          setLinkData(trackingObject, obj);\n          setFilter(trackingObject, obj);\n\n          triggerEvent(trackingObject, action);\n        },\n        vehicleFilterSearchResult = function (obj, removeRadioFilters) {\n          var errors,\n            filterlist,\n            trackingObject = {};\n\n          setEventInfo(\n            trackingObject,\n            'VWBasic_VehicleFilterSearchResult_Load',\n            obj\n          );\n          trackingObject.eventInfo.contentId = undefined;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setConfigurationData(trackingObject);\n          setConfigurationPrice(trackingObject);\n          setFilter(trackingObject, obj);\n          checkFilters(trackingObject, removeRadioFilters);\n\n          triggerEvent(\n            trackingObject,\n            'VWBasic_VehicleFilterSearchResult_Load'\n          );\n        },\n        vehicleForm = function (obj) {\n          var trackingObject = {};\n\n          setEventInfo(trackingObject, 'VWBasic_VehicleForm_Load', obj);\n          trackingObject.eventInfo.contentLabels = undefined;\n          trackingObject.eventInfo.pageCategory = pageCategory;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setConfigurationData(trackingObject);\n          setConfigurationPrice(trackingObject);\n          setFormData(trackingObject);\n          trackingObject.form.FormStart = true;\n\n          triggerEvent(trackingObject, 'VWBasic_VehicleForm_Load');\n        },\n        vehicleFormCTAClick = function (obj) {\n          var trackingObject = {};\n\n          setEventInfo(trackingObject, 'VWBasic_VehicleFormCTA_Click', obj);\n          trackingObject.eventInfo.contentId = 'Email quote';\n          trackingObject.eventInfo.pageCategory = pageCategory;\n          trackingObject.eventInfo.sectionName = obj.attributes.name;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setConfigurationData(trackingObject);\n          setConfigurationPrice(trackingObject);\n          setFormData(trackingObject);\n          setFormAdditionalData(trackingObject);\n          setLinkData(trackingObject, obj);\n\n          triggerEvent(trackingObject, 'VWBasic_VehicleFormCTA_Click');\n        },\n        formSumissionSuccess = function (obj, success) {\n          var trackingObject = {};\n          var timestamp = (Date.now() + Math.random()) * 100000;\n\n          setEventInfo(\n            trackingObject,\n            'VWBasic_VehicleFormSubmissionSuccessMessage_Load',\n            obj\n          );\n          trackingObject.eventInfo.contentId = success\n            ? 'email submission success'\n            : 'email submission failed';\n          trackingObject.eventInfo.pageCategory = pageCategory;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          trackingObject.user.locationLatitude = undefined;\n          trackingObject.user.locationLongitude = undefined;\n          trackingObject.user.locationZIP = undefined;\n\n          setPersonalizationData(trackingObject);\n          setConfigurationData(trackingObject);\n          setConfigurationPrice(trackingObject);\n          setPartnerData(trackingObject);\n          setFormData(trackingObject);\n          setFormAdditionalData(trackingObject);\n          trackingObject.form.LeadID = timestamp.toString();\n\n          triggerEvent(\n            trackingObject,\n            'VWBasic_VehicleFormSubmissionSuccessMessage_Load'\n          );\n        },\n        filterSearchResult = function (obj) {\n          var trackingObject = {};\n          var contentId =\n            obj.eventInfo.type === 'budgetChange'\n              ? 'Monthly budget change: 0-999'\n              : 'Financial Product change: personal\/business';\n\n          setEventInfo(trackingObject, 'VWBasic_FilterSearchResult_Load', obj);\n          trackingObject.eventInfo.contentId = contentId;\n          trackingObject.eventInfo.pageCategory = pageCategory;\n\n          setEnvironmentData(trackingObject, obj);\n          setUserBrowserData(trackingObject);\n          setPersonalizationData(trackingObject);\n          setFilter(trackingObject, obj);\n\n          triggerEvent(trackingObject, 'VWBasic_FilterSearchResult_Load');\n        },\n        handleScreenTwo = function (obj, removeRadioFilters) {\n          if (calledRecently('handleScreenTwo')) {\n            return;\n          }\n\n          if (arrivedAtScreen2) {\n            var prev = dataLayer.event[dataLayer.event.length - 2];\n            if (prev.attributes.trim) {\n              updateEngineDropdownsBeforeFilterSearchResult(obj);\n            } else {\n              var dd = getTrimAndEngine();\n              if (dd.engine === '' || dd.trim === '') {\n                initDropdownsBeforeFilterSearchResult(obj, removeRadioFilters);\n              } else {\n                vehicleFilterSearchResult(obj, removeRadioFilters);\n              }\n            }\n          } else {\n            initDropdownsBeforeVehiclePageLoad(obj, removeRadioFilters);\n          }\n        };\n\n      \/\/ Main Listener\n      $dataLayer.on('data-layer-event-fired', function (e) {\n        var obj = dataLayer.event[dataLayer.event.length - 1];\n        var pageName = obj.attributes.pageName;\n\n        switch (obj.eventInfo.eventAction) {\n          case 'VWBasic_Pageload':\n            basicPageLoad(obj);\n            break;\n\n          case 'SPAnavigationLoad':\n            if (pageName.indexOf('not-available') > 0) {\n              var timenow = new Date().getTime();\n\n              \/\/ only fire if we are not receiveing dbl calls from the app\n              if (timenow - notAvailTime > 4000) {\n                setTimeout(function () {\n                  handleScreenTwo(obj, true);\n                }, 1000);\n              }\n\n              notAvailTime = timenow;\n            } else if (pageName.indexOf('choose-model') > 0) {\n              if (arrivedAtScreen2) {\n                if (triggeredTableResultsEvent) {\n                  obj.attributes.url =\n                    window.location.href\n                      .split('?')[0]\n                      .split('#')[0]\n                      .replace('http:\/\/', '')\n                      .replace('https:\/\/', '') + '#!view\/screen-1\/range\/0-999';\n                  obj.attributes.name = 'Change model';\n                  basicLinkClick(obj);\n                }\n                basicPageLoad(obj);\n              } else {\n                return;\n              }\n            } else if (pageName.indexOf('email-quote-failed') > 0) {\n              \/\/ Event should only be fired on success\n              \/\/formSumissionSuccess(obj, false);\n            } else if (pageName.indexOf('email-quote-confirmation') > 0) {\n              formSumissionSuccess(obj, true);\n            } else if (pageName.indexOf('email-quote') > 0) {\n              obj.attributes.url = window.location.href\n                .replace('http:\/\/', '')\n                .replace('https:\/\/', '')\n                .replace('view\/step-2', 'view\/screen-2-email');\n              obj.attributes.name = 'Email quote';\n              vehicleResultClick(\n                obj,\n                'VWBasic_VehicleFilterSearchResultLink_Click'\n              );\n              vehicleForm(obj);\n            }\n\n            break;\n\n          case 'FinanceCalcUpdated':\n            if (\n              window.location.hash.indexOf('screen-1') === -1 &&\n              obj.attributes.quoteValues.modelId\n            ) {\n              handleScreenTwo(obj, false);\n            }\n\n            break;\n\n          case 'budgetChange':\n            setTimeout(function () {\n              filterSearchResult(obj);\n            }, 1000);\n            break;\n\n          case 'click':\n            if (!obj.attributes.formElement) {\n              setTimeout(function () {\n                filterSearchResult(obj);\n              }, 1000);\n            }\n            break;\n\n          case 'VWBasic_Link_Click':\n            basicLinkClick(obj);\n            break;\n\n          case 'VWBasic_VehicleFormCTA_Click':\n            vehicleFormCTAClick(obj);\n            break;\n\n          case 'VWBasic_VehicleFilterSearchResultLink_Click':\n          case 'VWBasic_VehicleFilterSearchResultButton_Click':\n            vehicleResultClick(obj, obj.eventInfo.eventAction);\n            break;\n\n          case 'VWBasic_FilterSelect_Click':\n            vehicleResultClick(obj, obj.eventInfo.eventAction);\n            break;\n\n          default:\n            break;\n        }\n      });\n    });\n\n    function calledRecently(fnName) {\n      window.financeCalcStore = window.financeCalcStore || {};\n      window.financeCalcStore.calledRecently =\n        window.financeCalcStore.calledRecently || {};\n\n      var called = !!window.financeCalcStore.calledRecently[fnName];\n\n      window.financeCalcStore.calledRecently[fnName] = true;\n\n      setTimeout(() => {\n        window.financeCalcStore.calledRecently[fnName] = false;\n      }, 1000);\n\n      return called;\n    }\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25846,25817],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19677,"type":"CustomHtml","name":"87c6112defea2f5d4a6879e55b4a8fc1","parameters":{"customHtml":"<script>\n(function(jQuery) {\n  jQuery(document).ready(function() {\n\nwindow.VwTagConsole('Staging > SD My VW ACTIONS > 2020\/12\/15!');\n\n    if (window.setUpMyVWQubitAction) {\n      return\n    }\n    window.setUpMyVWQubitAction = true\n\n    var $dataLayer = jQuery('#vw-data-layer')\n    var vwdata = (window.vwdata = window.vwdata || [])\n    var MarketingConsent = undefined\n    var vehicle = null\n    var retailer = null\n    var userCurrentLocation = {\n      latitude: undefined,\n      longitude: undefined\n    }\n\n    \/\/ Trigger Event\n    var triggerEvent = function(trackingObject, event) {\n      vwdata.push(trackingObject)\n      console.log(\n        '%c SD Bootstrapper (' +\n          Bootstrapper.ensightenOptions.publishPath +\n          ') push event:',\n        'background: #222; color: #bada55',\n        event,\n        'trackingObject:',\n        trackingObject\n      )\n    }\n\n    var getPage = function(obj) {\n      return {\n        url: window.location.href\n          .replace('http:\/\/', '')\n          .replace('https:\/\/', '')\n          .replace('?vwdebug=true', ''),\n        location: obj.location,\n        section: `owners : my : ${obj.name}`,\n        label: obj.label\n      }\n    }\n\n    var isUserLoggedIn = function(obj) {\n      var page = getPage(obj)\n      return page.location !== 'homepage' || page.section === 'register'\n    }\n\n    var setEventInfo = function(trackingObject, obj) {\n      var page = getPage(obj)\n\n      trackingObject.eventInfo = {}\n      trackingObject.eventInfo.eventAction = obj.eventAction\n      trackingObject.eventInfo.pageId = page.url\n      trackingObject.eventInfo.pageName = page.section\n      trackingObject.eventInfo.pageCategory = 'owners'\n      trackingObject.eventInfo.templateType = undefined\n    }\n\n    var setEnvironmentData = function(trackingObject) {\n      trackingObject.environment = {}\n      trackingObject.environment.applicationId =\n        window.location.href.indexOf('vwcloud.co.uk') > -1\n          ? 'VWLocalMyVWD6'\n          : 'VWMyVWD6'\n      trackingObject.environment.language = 'en'\n      trackingObject.environment.country = 'GB'\n    }\n\n    var setUserData = function(trackingObject, obj) {\n      trackingObject.user = {}\n      trackingObject.user.loginStatus = isUserLoggedIn(obj)\n      trackingObject.user.browserResolutionHeight = Math.max(\n        document.documentElement.clientWidth,\n        window.innerWidth || 0\n      ).toString()\n      trackingObject.user.browserResolutionWidth = Math.max(\n        document.documentElement.clientHeight,\n        window.innerHeight || 0\n      ).toString()\n      trackingObject.user.browserResolutionBreakpoint = document.getElementById(\n        'page'\n      )\n        ? document.getElementById('page').offsetWidth.toString()\n        : undefined\n      trackingObject.user.browserResolutionOrientation =\n        window.innerHeight < window.innerWidth ? 'h' : 'v'\n    }\n\n    var setLocationUserData = function(trackingObject) {\n      trackingObject.user.locationLatitude = userCurrentLocation.latitude\n      trackingObject.user.locationLongitude = userCurrentLocation.longitude\n      trackingObject.user.locationZIP = undefined\n    }\n\n    var setPersonalizationData = function(trackingObject) {\n      trackingObject.personalization = {}\n      trackingObject.personalization.status = false\n      trackingObject.personalization.placeholderId = undefined\n      trackingObject.personalization.contentId = undefined\n      trackingObject.personalization.activityId = undefined\n      trackingObject.personalization.activityName = undefined\n      trackingObject.personalization.experienceId = undefined\n      trackingObject.personalization.experienceName = undefined\n      trackingObject.personalization.offerId = undefined\n      trackingObject.personalization.offerName = undefined\n    }\n\n    var setConfigurationData = function(trackingObject, obj) {\n      trackingObject.configuration = {}\n\n      trackingObject.configuration.CarlineId = undefined\n      trackingObject.configuration.CarlineName = undefined\n      trackingObject.configuration.ModelId = undefined\n      trackingObject.configuration.ModelName = undefined\n      trackingObject.configuration.PriceTotalCurrency = 'GBP'\n      trackingObject.configuration.PriceTotalBasic = undefined\n      trackingObject.configuration.PriceTotalAdditional = undefined\n      trackingObject.configuration.PriceTotalTotal = undefined\n      trackingObject.configuration.BodyTypeName = undefined\n      trackingObject.configuration.SalesgroupId = undefined\n      trackingObject.configuration.SalesgroupName = undefined\n      trackingObject.configuration.EquipmentlineName = undefined\n      trackingObject.configuration.PriceTypeParameter = undefined\n      trackingObject.configuration.PriceType = undefined\n      trackingObject.configuration.PriceRateCurrency = undefined\n      trackingObject.configuration.PriceRateType = undefined\n      trackingObject.configuration.PriceRateBasic = undefined\n      trackingObject.configuration.PriceRateAdditional = undefined\n    }\n\n    var setPartnerData = function(trackingObject) {\n      trackingObject.partner = {}\n      trackingObject.partner.informationBnr = retailer ? retailer : undefined\n      trackingObject.partner.informationName = undefined\n      trackingObject.partner.informationDepartment = undefined\n      trackingObject.partner.informationZIP = undefined\n    }\n\n    var setProcessData = function(trackingObject, details) {\n      trackingObject.process = {}\n      trackingObject.process.Name = details.action\n      trackingObject.process.StepName = details.type\n      trackingObject.process.StepNumber = details.step\n    }\n\n    var setLinkData = function(trackingObject, details) {\n      trackingObject.link = {}\n      trackingObject.link.url = details.url\n      trackingObject.link.name = details.label\n    }\n\n    var setVideoData = function(trackingObject, obj) {\n      trackingObject.video = {}\n      trackingObject.video.playerName = 'YouTube'\n      trackingObject.video.title = 'My Volkswagen App'\n      trackingObject.video.id = obj.buttonUrl\n      trackingObject.video.platform = 'youtube.com'\n      trackingObject.video.url =\n        'https:\/\/www.youtube.com\/embed\/' + obj.buttonUrl\n      trackingObject.video.length = undefined\n    }\n\n    var setFilterData = function(trackingObject, obj) {\n      trackingObject.filter = {}\n      trackingObject.filter.numberOfResults = undefined\n      trackingObject.filter.filterlist = []\n    }\n\n    var setFormData = function(trackingObject, start, formName = 'addMyVW') {\n      trackingObject.form = {}\n      trackingObject.form.FormType = 'otherform'\n      trackingObject.form.FormName = formName\n      trackingObject.form.FormVersion = '1'\n      trackingObject.form.FormStart = start\n    }\n\n    var getMartkeingConsent = function() {\n      var MarketingConsent = undefined\n      var a = {},\n        created = false,\n        list = jQuery('input[type=\"radio\"]'),\n        key,\n        el\n\n      if (MarketingConsent === undefined && list.length > 0) {\n        for (var i = 0; i < list.length; i++) {\n          el = list[i]\n          if (el.checked) {\n            created = true\n            key = el.name.replace('optIn', '').toLowerCase()\n            if (key === 'text') {\n              key = 'SMS'\n            }\n            a[key] = list[i].value === 'true'\n          }\n        }\n      }\n\n      if (created) {\n        MarketingConsent = a\n      }\n\n      return MarketingConsent\n    }\n\n    var setRegisterFormData = function(trackingObject, start) {\n      trackingObject.form = {}\n      trackingObject.form.FormType = 'registration'\n      trackingObject.form.FormName = 'registrationMyVW'\n      trackingObject.form.FormVersion = '1'\n      trackingObject.form.FormStart = start\n      trackingObject.form.Questionnaire = undefined\n      trackingObject.form.NewsletterType = undefined\n      trackingObject.form.PrefContactChannels = undefined\n      trackingObject.form.MarketingConsent = getMartkeingConsent()\n    }\n\n    var setCarFormData = function(added, trackingObject, start) {\n      trackingObject.form = {}\n      trackingObject.form.FormType = added ? 'add' : 'delete'\n      trackingObject.form.FormName = added ? 'addACar' : 'deleteACar'\n      trackingObject.form.FormVersion = '1'\n      trackingObject.form.FormStart = start\n    }\n\n    var setModalFormData = function(formName, formType, trackingObject) {\n      trackingObject.form = {}\n      trackingObject.form.FormType = formType\n      trackingObject.form.FormName = formName\n      trackingObject.form.FormVersion = '1'\n      trackingObject.form.FormStart = false\n    }\n\n    var setQuestionaireData = function(trackingObject, obj) {\n      trackingObject.questionnaire = {}\n      trackingObject.questionnaire.QuestionAnswerSet = []\n    }\n\n    var setOwnershipData = function(trackingObject, obj) {\n      trackingObject.ownership = {}\n      if (obj.carDetails) {\n        trackingObject.ownership.vehicle = [getExistingVehicle(obj.carDetails)]\n      } else {\n        trackingObject.ownership.vehicle = undefined\n      }\n    }\n\n    var addStandardToVehicle = function(vehicle, car) {\n      var servicePlan = {\n          name: 'servicePlan',\n          value: false\n        },\n        extendedWarranty = {\n          name: 'extendedWarranty',\n          value: false\n        },\n        leasedVolkswagen = {\n          name: 'leasedVolkswagen',\n          value: false\n        }\n      vehicle.engineSizeUnit = 'Liter'\n      vehicle.mileageUnit = 'miles'\n      vehicle.manufacturer = 'Volkswagen'\n      vehicle.registrationDate =\n        car && car.registrationDate ? car.registrationDate : undefined\n      vehicle.fuelType = car && car.fuelType ? car.fuelType : undefined\n      vehicle.transmission =\n        car && car.transmission ? car.transmission : undefined\n      vehicle.vehicleCondition = car\n        ? car.carStatus === 'ORDERED'\n          ? 'NEW_CAR'\n          : car.purchaseType\n        : undefined\n      vehicle.additionalAttributes = [\n        servicePlan,\n        extendedWarranty,\n        leasedVolkswagen\n      ]\n    }\n\n    var setAddedVehicle = function(trackingObject) {\n      var vehicle = {},\n        isValid = false,\n        detailsDiv,\n        car,\n        model,\n        size\n\n      if (window.location.hash.indexOf('add') > 0) {\n        try {\n          detailsDiv = jQuery(\n            'div div',\n            jQuery('.ngw-offset-2 div:nth-child(2)')[3]\n          )\n          if (detailsDiv[2].innerText.indexOf('Details') !== -1) {\n            isValid = true\n          }\n          car = detailsDiv[2].innerText.replace('Details: ', '')\n          model = detailsDiv[1].innerText.replace('Model: ', '')\n          size = car.match(\/[+-]?\\d+(\\.\\d+)?\/g)\n        } catch (e) {\n          detailsDiv = null\n        }\n      }\n\n      if (isValid) {\n        vehicle.carlineName = model ? model : undefined\n        vehicle.model = car ? car : undefined\n        vehicle.engineSize = size && size.length > 0 ? size[0] : undefined\n        addStandardToVehicle(vehicle)\n        trackingObject.ownership.vehicle = [vehicle]\n      } else {\n        trackingObject.ownership.vehicle = undefined\n      }\n    }\n\n    var getExistingVehicle = function(car) {\n      var vehicle = {}\n\n      vehicle.model = car ? car.derivative : undefined\n      vehicle.carlineName = car ? car.model : undefined\n      vehicle.engineSize =\n        car && car.engineCapacity ? car.engineCapacity + '' : undefined\n      addStandardToVehicle(vehicle, car)\n\n      return vehicle\n    }\n\n    var essentialData = function(event, trackingObject, obj) {\n      obj.eventAction = event\n      setEventInfo(trackingObject, obj)\n      setEnvironmentData(trackingObject)\n      setUserData(trackingObject, obj)\n      setPersonalizationData(trackingObject)\n    }\n\n    var extendedEssentialData = function(event, trackingObject, obj) {\n      essentialData(event, trackingObject, obj)\n\n      setConfigurationData(trackingObject, {})\n      setPartnerData(trackingObject)\n    }\n\n    var doVehicleSettingPageLoad = function(obj) {\n      var trackingObject = {}\n      var page = getPage(obj)\n      essentialData('VWBasic_Vehicle_Pageload', trackingObject, obj)\n      trackingObject.eventInfo.contentLabels = page.label\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doOwnedVehiclePageLoad = function(obj) {\n      var trackingObject = {}\n      var page = getPage(obj)\n      essentialData('VWBasic_OwnedVehicle_Pageload', trackingObject, obj)\n      trackingObject.eventInfo.contentLabels = page.label\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doRegisterPageLoad = function(obj) {\n      var trackingObject = {}\n      essentialData('VWBasic_Form_Pageload', trackingObject, obj)\n      trackingObject.eventInfo.contentLabels = getPage(obj).label\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      trackingObject.ownership.vehicle = undefined\n      setRegisterFormData(trackingObject, false)\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doPageLoad = function(obj, includeOwnership) {\n      var page = getPage(obj)\n      var trackingObject = {}\n      essentialData('VWBasic_Pageload', trackingObject, obj)\n      trackingObject.eventInfo.contentLabels = page.label\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      if (!includeOwnership) {\n        trackingObject.ownership.vehicle = undefined\n      }\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doBtnClick = function(obj, section) {\n      var trackingObject = {}\n\n      essentialData('VWBasic_Button_Click', trackingObject, obj)\n      if (!obj.url) {\n        obj.url = trackingObject.eventInfo.pageId\n      }\n      setLinkData(trackingObject, obj)\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doCarBtnClick = function(obj, section) {\n      var trackingObject = {}\n\n      essentialData('VWBasic_OwnedVehicleButton_Click', trackingObject, obj)\n      if (!obj.url) {\n        obj.url = trackingObject.eventInfo.pageId\n      }\n      trackingObject.eventInfo.contentId = obj.label\n      setLinkData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doFormBtnClick = function(obj, section) {\n      var trackingObject = {}\n\n      essentialData('VWBasic_FormButton_Click', trackingObject, obj)\n      trackingObject.eventInfo.contentLabels = undefined\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      setCarFormData(true, trackingObject, false)\n      setProcessData(trackingObject, section)\n      setLinkData(trackingObject, obj)\n\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doRegisterCTAClick = function(obj) {\n      var trackingObject = {}\n\n      extendedEssentialData('VWBasic_FormCTA_Click', trackingObject, obj)\n      trackingObject.eventInfo.contentId = undefined\n      trackingObject.eventInfo.sectionName = 'register'\n      obj.url = trackingObject.eventInfo.pageId\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      setLinkData(trackingObject, obj)\n      setRegisterFormData(trackingObject, false)\n\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doFormStepBtnClick = function(obj) {\n      var trackingObject = {}\n      var page = getPage(obj)\n\n      essentialData('VWBasic_FormStepButton_Click', trackingObject, obj)\n      trackingObject.eventInfo.contentLabels = page.label\n      trackingObject.eventInfo.sectionName = page.label\n      trackingObject.eventInfo.contentId = obj.details.label\n\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      setCarFormData(true, trackingObject, false)\n      delete trackingObject.form.FormStart\n\n      setProcessData(trackingObject, obj.details)\n      setLinkData(trackingObject, {\n        url: trackingObject.eventInfo.pageId,\n        label: obj.details.label\n      })\n      setPartnerData(trackingObject)\n\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doVehicleClick = function(obj) {\n      var trackingObject = {}\n      var page = getPage(obj)\n\n      essentialData('VWBasic_VehicleButton_Click', trackingObject, obj)\n      trackingObject.eventInfo.sectionName = page.label\n      trackingObject.eventInfo.contentId = obj.label\n\n      setConfigurationData(trackingObject, obj)\n      setLinkData(trackingObject, {\n        url: trackingObject.eventInfo.pageId,\n        label: obj.label\n      })\n      setPartnerData(trackingObject)\n\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doFormStepLoad = function(obj) {\n      var trackingObject = {}\n      var page = getPage(obj)\n      extendedEssentialData('VWBasic_FormStep_Load', trackingObject, obj)\n      trackingObject.eventInfo.contentLabels = page.label\n\n      setLocationUserData(trackingObject)\n      setOwnershipData(trackingObject, obj)\n      setCarFormData(true, trackingObject, false)\n      setProcessData(trackingObject, obj.details)\n\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doCarRemove = function(obj) {\n      var trackingObject = {}\n\n      extendedEssentialData('VWBasic_FormCTA_Click', trackingObject, obj)\n      trackingObject.eventInfo.contentId = obj.name\n      trackingObject.eventInfo.contentLabels = obj.buttonLabel\n      obj.url = trackingObject.eventInfo.pageId\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      setLinkData(trackingObject, obj)\n      setCarFormData(false, trackingObject, false)\n\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doModalLoad = function(obj) {\n      var trackingObject = {}\n      extendedEssentialData(\n        'VWBasic_OwnedVehicleFormLayer_Load',\n        trackingObject,\n        obj\n      )\n      trackingObject.eventInfo.contentLabels = obj.details.type\n      trackingObject.eventInfo.contentId = obj.name\n      trackingObject.eventInfo.sectionName = obj.formName\n      setLocationUserData(trackingObject)\n      setOwnershipData(trackingObject, obj)\n      setProcessData(trackingObject, obj.details)\n      setModalFormData(obj.formName, obj.formType, trackingObject)\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doModalClose = function(obj) {\n      var trackingObject = {}\n      essentialData('VWBasic_Close_Click', trackingObject, obj)\n      setLinkData(trackingObject, {\n        url: trackingObject.eventInfo.pageId,\n        label: obj.buttonLabel\n      })\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doModalButtonClick = function(obj) {\n      var trackingObject = {}\n      essentialData('VWBasic_FormButton_Click', trackingObject, obj)\n      trackingObject.eventInfo.contentId = obj.name\n      trackingObject.eventInfo.contentLabels = obj.buttonLabel\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      setModalFormData(obj.formName, obj.formType, trackingObject)\n      setProcessData(trackingObject, obj.details)\n      setLinkData(trackingObject, {\n        url: trackingObject.eventInfo.pageId,\n        label: obj.buttonLabel\n      })\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    var doModalRemove = function(obj) {\n      var trackingObject = {}\n\n      extendedEssentialData('VWBasic_FormCTA_Click', trackingObject, obj)\n      trackingObject.eventInfo.contentId = obj.name\n      trackingObject.eventInfo.contentLabels = obj.buttonLabel\n      obj.url = trackingObject.eventInfo.pageId\n      setConfigurationData(trackingObject, obj)\n      setOwnershipData(trackingObject, obj)\n      setLinkData(trackingObject, obj)\n      setModalFormData(obj.formName, obj.formType, trackingObject)\n\n      triggerEvent(trackingObject, obj.eventAction)\n    }\n\n    \/\/ https:\/\/www-vw10.vwcloud.co.uk\/authenticationendpoint\/retry.do\n\n    \/\/ Main Listener\n    $dataLayer.on('data-layer-event-fired', function(e) {\n      var section = {}\n      var obj = dataLayer.event[dataLayer.event.length - 1]\n\n      \/\/\/ --- page load events --- \/\/\/\n      switch (obj.location) {\n        case 'homepage':\n        case 'signed':\n        case 'my-account':\n        case 'add-car':\n          doPageLoad(obj, false)\n          break\n        case 'register':\n          doRegisterPageLoad(obj)\n          break\n        case 'cars':\n          doOwnedVehiclePageLoad(obj)\n          break\n        case 'car-settings':\n          doVehicleSettingPageLoad(obj)\n          break\n\n        default:\n          break\n      }\n\n      \/\/\/ --- user interaction events --- \/\/\/\n      switch (obj.interAction) {\n        case 'ctaClick':\n          if (obj.action === 'loginRegisterCTA') {\n            var trackingObject = {}\n            obj.url =\n              'https:\/\/identity-sandbox.vwgroup.io\/signin-service\/v1\/signin\/'\n            essentialData('VWBasic_Button_Click', trackingObject, obj)\n            trackingObject.eventInfo.contentId = 'login click'\n            trackingObject.eventInfo.sectionName = 'owners : my'\n            trackingObject.user.loginStatus = false\n            setLinkData(trackingObject, obj)\n            triggerEvent(trackingObject, obj)\n          } else if (\n            obj.action === 'heroAddCarCtaClick' ||\n            obj.action === 'removeCarClick' ||\n            obj.action === 'retailerCtaClick' ||\n            obj.action === 'deleteAccountCtaClick'\n          ) {\n            doBtnClick(obj)\n          } else if (obj.action === 'addCarCtaClick') {\n            doFormStepBtnClick(obj)\n            obj.details.step = '1.1'\n            doFormStepLoad(obj)\n          } else if (\n            obj.action === 'addACarSaveOwnedCar' ||\n            obj.action === 'addOrderedCarClick' ||\n            obj.action === 'addOrderedCarFinish' ||\n            obj.action === 'addACarRetailer' ||\n            obj.action === 'addACarIOwnFinal'\n          ) {\n            obj.carDetails = vehicle\n            doFormStepBtnClick(obj)\n          } else if (\n            obj.action === 'addACarChooseRetailerOwnedCar' ||\n            obj.action === 'addACarChooseRetailerOrderedCar'\n          ) {\n            obj.carDetails = vehicle\n            doFormStepLoad(obj)\n          } else if (\n            obj.action === 'addACarRegistrationNumber' ||\n            obj.action === 'addACarSearchOrderNumber'\n          ) {\n            doFormStepBtnClick(obj)\n          } else if (obj.action === 'nextServiceCtaClick') {\n            doVehicleClick(obj)\n          } else if (obj.action === 'registerUserCtaClick') {\n            doRegisterCTAClick(obj)\n          } else if (obj.action === 'removeACarCompleted') {\n            doCarRemove(obj)\n          } else if (\n            obj.action === 'saveCarClick' ||\n            obj.action === 'saveRetailerClick' ||\n            obj.action === 'setupSMSClick'\n          ) {\n            doCarBtnClick(obj)\n          }\n          break\n\n        case 'modalLoad':\n          doModalLoad(obj)\n          break\n\n        case 'modalRemove':\n          doModalRemove(obj)\n          break\n\n        case 'modalCancel':\n          doModalButtonClick(obj)\n          break\n\n        case 'modalClose':\n          doModalClose(obj)\n          break\n\n        default:\n          break\n      }\n\n      \/\/\/ --- api responses events --- \/\/\/\n      switch (obj.apiResponse) {\n        case 'searchOrderNumber':\n        case 'searchRegistration':\n        case 'registerUser':\n          var trackingObject = {}\n          var page = getPage(obj)\n\n          if (obj.success) {\n            extendedEssentialData(\n              'VWBasic_OwnedVehicleFormStep_Load',\n              trackingObject,\n              obj\n            )\n            trackingObject.eventInfo.contentLabels = page.label\n            if (obj.apiResponse === 'searchOrderNumber' && obj.car) {\n              \/\/ API does not consistently return ordered car data\n              if (!obj.car.model) {\n                obj.car.model = obj.car.details\n              } else {\n                obj.car.derivative = obj.car.details\n              }\n            }\n            if (obj.car) {\n              vehicle = obj.carDetails = obj.car\n            }\n            setLocationUserData(trackingObject)\n            setOwnershipData(trackingObject, obj)\n            setFormData(trackingObject, false, 'addMyVW')\n            const process = {\n              type: 'carDetails',\n              action:\n                obj.apiResponse === 'searchOrderNumber'\n                  ? 'addOrderedCar'\n                  : 'addOwnedCar',\n              step: obj.apiResponse === 'searchOrderNumber' ? '1.3' : '2'\n            }\n            setProcessData(trackingObject, process)\n            triggerEvent(trackingObject, obj.eventAction)\n          } else {\n            extendedEssentialData(\n              'VWBasic_FormErrorMessage_Load',\n              trackingObject,\n              obj\n            )\n            trackingObject.eventInfo.sectionName = page.label\n            setLocationUserData(trackingObject)\n            setOwnershipData(trackingObject, obj)\n            setFormData(trackingObject, false, 'addMyVW')\n            delete trackingObject.form.FormStart\n            delete trackingObject.process\n\n            trackingObject.error = {\n              code: obj.code,\n              message: obj.message,\n              referringUrl: window.location.hostname + window.location.pathname\n            }\n            triggerEvent(trackingObject, obj.eventAction)\n          }\n\n          break\n\n        case 'saveCarName':\n          var trackingObject = {}\n          var page = getPage(obj)\n\n          if (obj.success) {\n            obj.carDetails = vehicle\n            extendedEssentialData(\n              'VWBasic_OwnedVehicleFormStep_Load',\n              trackingObject,\n              obj\n            )\n            trackingObject.eventInfo.contentLabels = page.label\n            setLocationUserData(trackingObject)\n            setOwnershipData(trackingObject, obj)\n            setFormData(trackingObject, false, 'addMyVW')\n            const process = {\n              type: 'carDetails',\n              action: 'addOrderedCar',\n              step: '3'\n            }\n            setProcessData(trackingObject, process)\n            triggerEvent(trackingObject, obj.eventAction)\n          } else {\n            extendedEssentialData(\n              'VWBasic_FormErrorMessage_Load',\n              trackingObject,\n              obj\n            )\n            trackingObject.eventInfo.sectionName = page.label\n            setLocationUserData(trackingObject)\n            obj.carDetails = obj.car = vehicle\n            setOwnershipData(trackingObject, obj)\n            setFormData(trackingObject, false, 'addMyVW')\n            delete trackingObject.form.FormStart\n            delete trackingObject.process\n\n            trackingObject.error = {\n              code: obj.code,\n              message: obj.message,\n              referringUrl: window.location.hostname + window.location.pathname\n            }\n            triggerEvent(trackingObject, obj.eventAction)\n          }\n\n          break\n\n        case 'retailerFoundOwnedCar':\n        case 'addACarChooseRetailerOwnedCar':\n          var trackingObject = {}\n          var page = getPage(obj)\n\n          if (obj.success) {\n            obj.carDetails = vehicle\n            if (obj.retailer) {\n              retailer = obj.retailer\n            }\n            extendedEssentialData(\n              'VWBasic_OwnedVehicleFormStep_Load',\n              trackingObject,\n              obj\n            )\n            trackingObject.eventInfo.contentLabels = page.label\n            setLocationUserData(trackingObject)\n            setOwnershipData(trackingObject, obj)\n            setFormData(trackingObject, false, 'addMyVW')\n            const process = {\n              type: 'chooseRetailer',\n              action: 'addOrderedCar',\n              step: '3.1'\n            }\n            setProcessData(trackingObject, process)\n            if (obj.apiResponse === 'retailerFoundOwnedCar') {\n              triggerEvent(trackingObject, obj.eventAction)\n            }\n          } else {\n            extendedEssentialData(\n              'VWBasic_FormErrorMessage_Load',\n              trackingObject,\n              obj\n            )\n            trackingObject.eventInfo.sectionName = page.label\n            setLocationUserData(trackingObject)\n            obj.carDetails = obj.car = vehicle\n            setOwnershipData(trackingObject, obj)\n            setFormData(trackingObject, false, 'addMyVW')\n            delete trackingObject.form.FormStart\n            delete trackingObject.process\n\n            trackingObject.error = {\n              code: obj.code,\n              message: obj.message,\n              referringUrl: window.location.hostname + window.location.pathname\n            }\n            triggerEvent(trackingObject, obj.eventAction)\n          }\n\n          break\n\n        case 'addACarIOrdered':\n          var trackingObject = {}\n          var page = getPage(obj)\n\n          if (obj.success) {\n            obj.carDetails = vehicle\n            if (obj.retailer) {\n              retailer = obj.retailer\n            }\n            extendedEssentialData(\n              'VWBasic_OwnedVehicleFormStep_Load',\n              trackingObject,\n              obj\n            )\n            trackingObject.eventInfo.contentLabels = page.label\n            setLocationUserData(trackingObject)\n            setOwnershipData(trackingObject, obj)\n            setFormData(trackingObject, false, 'addMyVW')\n            const process = {\n              type: 'marketingCosent',\n              action: 'addOrderedCar',\n              step: '3'\n            }\n            setProcessData(trackingObject, process)\n            triggerEvent(trackingObject, obj.eventAction)\n          } else {\n            extendedEssentialData(\n              'VWBasic_FormErrorMessage_Load',\n              trackingObject,\n              obj\n            )\n            trackingObject.eventInfo.sectionName = page.label\n            setLocationUserData(trackingObject)\n            obj.carDetails = obj.car = vehicle\n            setOwnershipData(trackingObject, obj)\n            setFormData(trackingObject, false, 'addMyVW')\n            delete trackingObject.form.FormStart\n            delete trackingObject.process\n\n            trackingObject.error = {\n              code: obj.code,\n              message: obj.message,\n              referringUrl: window.location.hostname + window.location.pathname\n            }\n            triggerEvent(trackingObject, obj.eventAction)\n          }\n\n          break\n\n        default:\n          break\n      }\n    })\n\n    \/\/ sometimes Qubit loads in late and we miss the inital event, in that case\n    \/\/ fire it now\n    if (dataLayer.event.length !== 0) {\n      var obj = dataLayer.event[dataLayer.event.length - 1]\n      if (obj.location === 'homepage') {\n        doPageLoad(obj, false)\n      } else if (obj.location === 'register') {\n        doRegisterPageLoad(obj)\n      }\n    } \n  })\n})(jQuery)\n<\/script>\n","htmlPosition":"bodyStart"},"blockTriggerIds":[],"fireTriggerIds":[25849,25850],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19678,"type":"CustomHtml","name":"49c98571d72154727dae75e4f41c1830","parameters":{"customHtml":"<script>\n  (function (window, document, undefined) {\n    \/*\n     * Check the page has a canonical tag and set the href to the main part of the current location\n     *\/\n\n    function checkCanonicalTag() {\n      console.log('%cCanonical Tag Check', 'background: green; color: white');\n\n      var canonicalTag = document.querySelector('link[rel=\"canonical\"]');\n      var canonicalHref =\n        window.location\n          .href; \/*.replace(\n        window.location.href.split('details')[1],\n        ''\n      ); \/\/ up to and including 'details'*\/\n\n      if (!canonicalTag) {\n        canonicalTag = document.createElement('link');\n        canonicalTag.rel = 'canonical';\n        document.getElementsByTagName('head')[0].appendChild(canonicalTag);\n      }\n\n      canonicalTag.href = canonicalHref;\n    }\n\n    checkCanonicalTag();\n  })(window, document);\n<\/script>\n","htmlPosition":"headEnd"},"blockTriggerIds":[],"fireTriggerIds":[25851],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19679,"type":"CustomHtml","name":"d83ec9b00ca61ee1dedbc4975c4d9a5d","parameters":{"customHtml":"<script>\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole('Live > Request V Appointment > 2021-02-11');\n      \/\/console.log('%cRequest a Virtual Appointment', 'background: orange; color: white');\n\n      function setUpTracking() {\n        var $dataLayer = jQuery('#vw-data-layer');\n        var vwdata = (window.vwdata = window.vwdata || []);\n        var pageId = window.location.href\n          .split('?')[0]\n          .split('#')[0]\n          .replace('http:\/\/', '')\n          .replace('https:\/\/', '');\n        var pageName = vwDataLayer.page[0].pageInfo.pageName;\n\n        var retailer = null;\n\n        \/\/ Trigger Event\n        var triggerEvent = function (trackingObject, eventAction) {\n          vwdata.push(trackingObject);\n          console.log(\n            '%c SD Bootstrapper (' +\n              Bootstrapper.ensightenOptions.publishPath +\n              ') push event:',\n            'background: #222; color: #bada55',\n            eventAction,\n            ' trackingObject:',\n            trackingObject\n          );\n        };\n\n        var setEventInfo = function (trackingObject, eventAction) {\n            trackingObject.eventInfo = {};\n            trackingObject.eventInfo.eventAction = eventAction;\n            trackingObject.eventInfo.pageId = pageId;\n            trackingObject.eventInfo.pageName = pageName;\n            trackingObject.eventInfo.pageCategory = 'new-vehicles';\n            trackingObject.eventInfo.templateType = undefined;\n            trackingObject.eventInfo.brand = 'passenger cars';\n          },\n          setUserBrowserData = function (trackingObject) {\n            trackingObject.user = trackingObject.user || {};\n            trackingObject.user.browserResolutionHeight = Math.max(\n              document.documentElement.clientWidth,\n              window.innerWidth || 0\n            ).toString();\n            trackingObject.user.browserResolutionWidth = Math.max(\n              document.documentElement.clientHeight,\n              window.innerHeight || 0\n            ).toString();\n            trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll(\n              'main'\n            )[0]\n              ? document.querySelectorAll('main')[0].offsetWidth.toString()\n              : undefined;\n            trackingObject.user.browserResolutionOrientation =\n              window.innerHeight < window.innerWidth ? 'h' : 'v';\n            trackingObject.user.loginStatus = undefined;\n          },\n          setUserLocationData = function (trackingObject) {\n            trackingObject.user.locationLatitude = undefined;\n            trackingObject.user.locationLongitude = undefined;\n            trackingObject.user.locationZIP = retailer\n              ? retailer.searchTerm\n              : undefined;\n          },\n          setEnvironmentData = function (trackingObject) {\n            trackingObject.environment = {};\n            trackingObject.environment.applicationId =\n              window.location.href.indexOf('vwcloud.co.uk') > -1\n                ? 'VWLocalUKVirtualAppointmentD6'\n                : 'VWUKVirtualAppointmentD6';\n            trackingObject.environment.language = 'en';\n            trackingObject.environment.country = 'GB';\n            trackingObject.environment.featureAppId = undefined;\n            trackingObject.environment.featureAppIdAppVersion = undefined;\n          },\n          setFormData = function (trackingObject) {\n            trackingObject.form = {};\n            trackingObject.form.FormType = 'contact';\n            trackingObject.form.FormName = 'retailerContact';\n            trackingObject.form.FormVersion = '1';\n          },\n          setProcessData = function (trackingObject) {\n            trackingObject.process = {};\n            trackingObject.process.StepName = 'contact';\n          },\n          setFormAdditionalData = function (trackingObject, obj) {\n            trackingObject.form.MarketingConsent = [\n              {\n                email: true,\n              },\n            ];\n            trackingObject.form.NewsletterType = undefined;\n            trackingObject.form.PrefContactChannels = 'email';\n          },\n          setPersonalizationData = function (trackingObject) {\n            trackingObject.personalization = {\n              status: false,\n              moduleId: undefined,\n              personalizable: undefined,\n              placeholderId: undefined,\n              contentId: undefined,\n              activityId: undefined,\n              activityName: undefined,\n              experienceId: undefined,\n              experienceName: undefined,\n              offerName: undefined,\n              offerId: undefined,\n            };\n          },\n          setLinkData = function (trackingObject, label) {\n            trackingObject.link = {};\n            trackingObject.link.url = window.location.href\n              .replace('http:\/\/', '')\n              .replace('https:\/\/', '');\n            trackingObject.link.name = label;\n          },\n          setPartnerData = function (trackingObject) {\n            trackingObject.partner = {};\n            trackingObject.partner.informationBnr = retailer\n              ? retailer.dealerNumber\n              : undefined;\n            trackingObject.partner.informationName = retailer\n              ? retailer.dealerName\n              : undefined;\n            trackingObject.partner.informationDepartment = retailer\n              ? 'New'\n              : undefined;\n            trackingObject.partner.informationZIP = retailer\n              ? retailer.postcode\n              : undefined;\n          },\n          setOwnershipData = function (trackingObject) {\n            trackingObject.ownership = {};\n            trackingObject.ownership.vehicle = undefined;\n          },\n          setConfigurationData = function (trackingObject) {\n            trackingObject.configuration = {\n              CarlineId: undefined,\n              CarlineName: undefined,\n              SalesgroupId: undefined,\n              SalesgroupName: undefined,\n              EquipmentlineName: undefined,\n            };\n          },\n          setConfigurationAddtional = function (trackingObject) {\n            trackingObject.configuration.BodyTypeName = undefined;\n            trackingObject.configuration.CarlineIsRecommendation = undefined;\n            trackingObject.configuration.SalesgroupIsRecommendation = undefined;\n            trackingObject.configuration.EquipmentlineIsRecommendation = undefined;\n            trackingObject.configuration.ModelId = undefined;\n            trackingObject.configuration.ModelTrimFeatures = undefined;\n            trackingObject.configuration.ModelName = undefined;\n            trackingObject.configuration.ModelYear = undefined;\n            trackingObject.configuration.ModelModelVersion = undefined;\n            trackingObject.configuration.ModelIsRecommendation = undefined;\n            trackingObject.configuration.ModelDriveType = undefined;\n            trackingObject.configuration.ModelGearType = undefined;\n            trackingObject.configuration.EnginePowerHPKW = undefined;\n            trackingObject.configuration.EngineFuelTypePrimary = undefined;\n            trackingObject.configuration.EngineFuelTypeNonPrimary = undefined;\n            trackingObject.configuration.EmissionCo2PrimaryCombined = undefined;\n            trackingObject.configuration.EmissionCo2Urban = undefined;\n            trackingObject.configuration.EmissionCo2Extraurban = undefined;\n            trackingObject.configuration.ConsumptionCombinedPrimary = undefined;\n            trackingObject.configuration.ConsumptionCombinedNonPrimary = undefined;\n            trackingObject.configuration.EmissionConsumptionEfficiencyClass = undefined;\n            trackingObject.configuration.EmissionConsumptionTestingMethod = undefined;\n            trackingObject.configuration.ExteriorColorCode = undefined;\n            trackingObject.configuration.ExteriorColorName = undefined;\n            trackingObject.configuration.ExteriorColorIsRecommendation = undefined;\n            trackingObject.configuration.InteriorColorCode = undefined;\n            trackingObject.configuration.InteriorColorName = undefined;\n            trackingObject.configuration.InteriorColorIsRecommendation = undefined;\n            trackingObject.configuration.WheelsBasicId = undefined;\n            trackingObject.configuration.WheelsBasicName = undefined;\n            trackingObject.configuration.WheelsBasicIsRecommendation = undefined;\n\n            trackingObject.configuration.PriceCurrency = undefined;\n            trackingObject.configuration.PriceBasis = undefined;\n            trackingObject.configuration.PriceExterior = undefined;\n            trackingObject.configuration.PriceOptions = undefined;\n            trackingObject.configuration.PriceTotalConfiguration = undefined;\n            trackingObject.configuration.PriceType = undefined;\n            trackingObject.configuration.PriceCustomerTyp = undefined;\n            trackingObject.configuration.PriceCampaignI = undefined;\n            trackingObject.configuration.PriceCampaignDescriptio = undefined;\n            trackingObject.configuration.PriceCampaignValu = undefined;\n            trackingObject.configuration.PriceCustomerTyp = undefined;\n            trackingObject.configuration.PriceCurrency = undefined;\n          },\n          setFromQuestionaireData = function (trackingObject) {\n            trackingObject.form.Questionnaire = {\n              id: 'Need Help Contact',\n              version: '1',\n              content: [\n                {\n                  question: 'message',\n                  answer: [\n                    {\n                      type: 'single_value',\n                      value: undefined,\n                    },\n                  ],\n                },\n              ],\n            };\n          },\n          setConfigurationPrice = function (trackingObject) {\n            trackingObject.configuration.PriceTypeParameter = undefined;\n            trackingObject.configuration.PriceType = undefined;\n            trackingObject.configuration.PriceRateCurrency = undefined;\n            trackingObject.configuration.PriceRateType = undefined;\n            trackingObject.configuration.PriceRateBasic = undefined;\n            trackingObject.configuration.PriceRateAdditional = undefined;\n            trackingObject.configuration.PriceRateTotal = undefined;\n            trackingObject.configuration.PriceTotalCurrency = undefined;\n            trackingObject.configuration.PriceTotalBasic = undefined;\n            trackingObject.configuration.PriceTotalAdditional = undefined;\n            trackingObject.configuration.PriceTotalTotal = undefined;\n            trackingObject.configuration.OptionsNumber = undefined;\n            trackingObject.configuration.OptionsList = undefined;\n          },\n          formPageload = function (obj) {\n            var trackingObject = {};\n\n            setEventInfo(trackingObject, 'VWBasic_Form_Pageload');\n            trackingObject.eventInfo.contentLabels = undefined;\n            setEnvironmentData(trackingObject);\n            delete trackingObject.environment.featureAppId;\n            delete trackingObject.environment.featureAppIdAppVersion;\n            setUserBrowserData(trackingObject);\n            setPersonalizationData(trackingObject);\n            trackingObject.personalization.aemResourcePath = undefined;\n            trackingObject.personalization.TeaserList = undefined;\n            setConfigurationData(trackingObject);\n            setConfigurationPrice(trackingObject);\n            setFormData(trackingObject);\n            trackingObject.form.FormStart = true;\n            setOwnershipData(trackingObject);\n\n            triggerEvent(trackingObject, 'VWBasic_Form_Pageload');\n          },\n          formDealerClick = function (obj) {\n            var trackingObject = {};\n            retailer = {\n              dealerName: obj.eventInfo.dealerName,\n              dealerNumber: obj.eventInfo.dealerNumber,\n              postcode: obj.eventInfo.postcode,\n              searchResults: obj.eventInfo.searchResults,\n              searchTerm: obj.eventInfo.searchTerm,\n            };\n\n            setEventInfo(trackingObject, 'VWBasic_DealerSelect_Click');\n            trackingObject.eventInfo.contentId = undefined;\n            trackingObject.eventInfo.sectionName = undefined;\n            setEnvironmentData(trackingObject);\n            delete trackingObject.environment.featureAppId;\n            delete trackingObject.environment.featureAppIdAppVersion;\n            setUserBrowserData(trackingObject);\n            setPersonalizationData(trackingObject);\n            setConfigurationData(trackingObject);\n            trackingObject.configuration.ModelId = undefined;\n            trackingObject.configuration.ModelName = undefined;\n            setPartnerData(trackingObject);\n            trackingObject.partner.onlinePaymentOption = undefined;\n            trackingObject.partner.appointmentSystemName = undefined;\n            trackingObject.partner.appointmentSystemUtilization = undefined;\n            setLinkData(trackingObject, 'Retailer selected');\n\n            triggerEvent(trackingObject, 'VWBasic_DealerSelect_Click');\n          },\n          formSuccess = function (obj) {\n            var trackingObject = {};\n\n            setEventInfo(\n              trackingObject,\n              'VWBasic_FormSubmissionSuccessMessage_Load'\n            );\n            trackingObject.eventInfo.contentId = undefined;\n            trackingObject.eventInfo.sectionName = undefined;\n            setEnvironmentData(trackingObject);\n            setUserBrowserData(trackingObject);\n            setUserLocationData(trackingObject);\n            setConfigurationData(trackingObject);\n            setConfigurationPrice(trackingObject);\n            setConfigurationAddtional(trackingObject);\n            setPersonalizationData(trackingObject);\n            setPartnerData(trackingObject);\n            trackingObject.partner.SearchSearchTerm = retailer.searchTerm;\n            trackingObject.partner.SearchType = 'UserSearchTerm';\n            trackingObject.partner.SearchNumberOfResults =\n              retailer.searchResults;\n            setProcessData(trackingObject);\n            trackingObject.process.StepName = undefined;\n            setFormData(trackingObject);\n            setFormAdditionalData(trackingObject, obj);\n            setFromQuestionaireData(trackingObject);\n            trackingObject.form.NumberOfAppointments = undefined;\n            trackingObject.form.Appointments = undefined;\n            trackingObject.form.FormFields = undefined;\n            trackingObject.form.ErrorFormFields = undefined;\n            trackingObject.form.SourceID = undefined;\n            trackingObject.form.OpportunityUID = undefined;\n            var dealerNumber =\n              retailer && retailer.dealerNumber\n                ? retailer.dealerNumber\n                : undefined;\n            \/\/trackingObject.form.LeadID = `\/api\/lead\/1.4\/retailer\/${dealerNumber}\/contact-form`;\n            trackingObject.form.LeadID = Date.now();\n            trackingObject.form.CycleID = undefined;\n\n            triggerEvent(\n              trackingObject,\n              'VWBasic_FormSubmissionSuccessMessage_Load'\n            );\n          },\n          formError = function (obj) {\n            var trackingObject = {};\n\n            setEventInfo(trackingObject, 'VWBasic_ErrorMessage_Load');\n            trackingObject.eventInfo.sectionName = undefined;\n            setEnvironmentData(trackingObject);\n            setUserBrowserData(trackingObject);\n            setProcessData(trackingObject);\n            trackingObject.process.StepNumber = '1';\n            trackingObject.process.Name = 'contact';\n            trackingObject.process.Components = undefined;\n            trackingObject.error = {\n              code: obj.eventInfo.code ? obj.eventInfo.code : '2',\n              message: obj.eventInfo.error,\n              referringUrl: trackingObject.eventInfo.pageId,\n            };\n            setPersonalizationData(trackingObject);\n            setConfigurationData(trackingObject);\n            setPartnerData(trackingObject);\n            setFormData(trackingObject);\n            setOwnershipData(trackingObject);\n\n            triggerEvent(trackingObject, 'VWBasic_ErrorMessage_Load');\n          },\n          formCTAClick = function (obj) {\n            var trackingObject = {};\n\n            setEventInfo(trackingObject, 'VWBasic_FormCTA_Click');\n            trackingObject.eventInfo.contentId = undefined;\n            trackingObject.eventInfo.sectionName = undefined;\n            setEnvironmentData(trackingObject);\n            setUserBrowserData(trackingObject);\n            setPersonalizationData(trackingObject);\n            setConfigurationData(trackingObject);\n            setConfigurationPrice(trackingObject);\n            setPartnerData(trackingObject);\n            setFormData(trackingObject);\n            setFormAdditionalData(trackingObject, obj);\n            setFromQuestionaireData(trackingObject);\n            setLinkData(trackingObject, 'Submit');\n            setOwnershipData(trackingObject);\n\n            triggerEvent(trackingObject, 'VWBasic_FormCTA_Click');\n          };\n\n        \/\/ Main Listener\n        $dataLayer.on('data-layer-event-fired', function (e) {\n          var obj = vwDataLayer.event[vwDataLayer.event.length - 1];\n          switch (obj.eventInfo.eventAction) {\n            case 'RetailerCallbackFormLoad':\n              formPageload(obj);\n              break;\n\n            case 'RetailerCallbackAutoSelectRetailer':\n            case 'RetailerCallbackUserSelectRetailer':\n              formDealerClick(obj);\n              break;\n\n            case 'RetailerCallbackFromSend':\n              if (!retailer) {\n                retailer = {};\n              }\n              formCTAClick(obj);\n              setTimeout(function () {\n                var errros = jQuery(\n                  'p[class*=\"__error\"]:not([style*=\"display\"][style*=\"none\"]):not(.retailer-callback-polymer__error-description)'\n                );\n                if (errros.length > 0) {\n                  obj.eventInfo.error = 'form is incomplete';\n                  obj.eventInfo.code = '1';\n                  formError(obj);\n                }\n              }, 1500);\n              break;\n\n            case 'RetailerCallbackFromError':\n              formError(obj);\n              break;\n\n            case 'RetailerCallbackFromSuccess':\n              formSuccess(obj);\n              break;\n\n            default:\n              break;\n          }\n        });\n\n        window.setUpVWRetailerCallback = true;\n        \/\/ sometimes Qubit\/Matomo misses the first event fired\n        if (vwDataLayer.event.length !== 0) {\n          var obj = vwDataLayer.event[vwDataLayer.event.length - 1];\n          formPageload(obj);\n        }\n      }\n\n      \/\/ initialise Retailer Callback data collection\n      if (!window.setUpVWRetailerCallback) {\n        setUpTracking();\n      }\n    }); \/\/ end jQuery ready\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25852],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19680,"type":"CustomHtml","name":"2a8004e6238875f25d9968a9c3e98a22","parameters":{"customHtml":"<script type=\"text\/javascript\">\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole('Staging > Part Exchange EVENTS > 2021\/02\/24');\n      \/\/console.log('%cPE - EVENTS', 'background: #222; color: orange');\n\n      var $dataLayer = jQuery('#vw-data-layer');\n\n      jQuery('.accordion-v2').on('click', function () {\n        var dataEventInfo = {\n          eventName: 'Part Exchange Basic Link Click',\n          eventAction:\n            this.dataset.visible === 'true'\n              ? 'VWBasic_AccordionOpen_Click'\n              : 'VWBasic_AccordionClose_Click',\n          pageId: window.location.href\n            .split('?')[0]\n            .replace('http:\/\/', '')\n            .replace('https:\/\/', ''),\n          pageName: 'Part Exchange',\n          contentID: 'Part Exchange',\n        };\n        var dataAttributes = {\n          url:\n            window.location.hostname +\n            '\/used-cars\/part-exchange#\/valuation\/accordion',\n          label: this.innerText,\n          type: 'part-exchange-new-valuation__link',\n        };\n        vwUk.Instances.dataLayerController.fireEvent(\n          'c921-01',\n          dataEventInfo,\n          {},\n          dataAttributes\n        );\n      });\n\n      jQuery('.part-exchange-valuation-page a.cta-link').on(\n        'click',\n        function () {\n          var dataEventInfo = {\n            eventName: 'Part Exchange Basic Link Click',\n            eventAction: 'VWBasic_Link_Click',\n            pageId: window.location.href\n              .split('?')[0]\n              .replace('http:\/\/', '')\n              .replace('https:\/\/', ''),\n            pageName: 'Part Exchange',\n            contentID: 'Part Exchange',\n          };\n          var dataAttributes = {\n            url: window.location.hostname + '\/used-cars\/part-exchange',\n            label: this.innerText,\n            type: 'part-exchange-new-valuation__link',\n          };\n          vwUk.Instances.dataLayerController.fireEvent(\n            'c921-01',\n            dataEventInfo,\n            {},\n            dataAttributes\n          );\n        }\n      );\n\n      jQuery('.form-container__generic-text--link').on('click', function () {\n        var dataEventInfo = {\n          eventName: 'Part Exchange Basic Link Click',\n          eventAction: 'VWBasic_Link_Click',\n          pageId: window.location.href\n            .split('?')[0]\n            .replace('http:\/\/', '')\n            .replace('https:\/\/', ''),\n          pageName: 'Part Exchange',\n          contentID: 'Part Exchange',\n        };\n        var dataAttributes = {\n          url: this.href,\n          label: this.innerText,\n          type: this.className\n            .replace('form-container__generic-text ', '')\n            .replace('form-container__generic-text--link ', '')\n            .replace('style-scope ', ''),\n        };\n        vwUk.Instances.dataLayerController.fireEvent(\n          'c921-01',\n          dataEventInfo,\n          {},\n          dataAttributes\n        );\n      });\n\n      jQuery('.summary-panel__cta').on('click', function () {\n        var dataEventInfo = {\n          eventName: 'Part Exchange Form Step Button Click',\n          pageId: window.location.href\n            .split('?')[0]\n            .replace('http:\/\/', '')\n            .replace('https:\/\/', ''),\n          pageName: 'Part Exchange',\n          contentID: 'Part Exchange',\n        };\n\n        if (this.innerText.indexOf('Step 2') >= 0) {\n          dataEventInfo.eventAction = 'step1ButtonClick';\n          var dataAttributes = {\n            url:\n              window.location.hostname +\n              '\/used-cars\/part-exchange#\/vehicle_details',\n            label: this.innerText,\n            type: 'step 1 button clicked',\n          };\n          vwUk.Instances.dataLayerController.fireEvent(\n            'c921-01',\n            dataEventInfo,\n            {},\n            dataAttributes\n          );\n        } else {\n          dataEventInfo.eventAction = 'step2ButtonClick';\n          var dataAttributes = {\n            url:\n              window.location.hostname + '\/used-cars\/part-exchange#\/valuation',\n            label: this.innerText,\n            type: 'step 2 button clicked',\n          };\n          vwUk.Instances.dataLayerController.fireEvent(\n            'c921-01',\n            dataEventInfo,\n            {},\n            dataAttributes\n          );\n        }\n      });\n\n      jQuery('body').on('click', '#overlay-close-button', function () {\n        \/\/jQuery('#overlay-close-button').on('click', function () {\n        var dataEventInfo = {\n          eventName: 'VWBasic_FormErrorLayerClose_Click',\n          eventAction: 'VWBasic_FormErrorLayerClose_Click',\n          pageId: window.location.href\n            .split('?')[0]\n            .replace('http:\/\/', '')\n            .replace('https:\/\/', ''),\n          pageName: 'Part Exchange',\n          contentID: 'Part Exchange',\n        };\n\n        var dataAttributes = {\n          url: window.location.hostname + '\/used-cars\/part-exchange#\/landing',\n          label: this.innerText,\n          type: 'Error close button click',\n        };\n\n        vwUk.Instances.dataLayerController.fireEvent(\n          'c921-01',\n          dataEventInfo,\n          {},\n          dataAttributes\n        );\n      });\n\n      jQuery('.part-exchange-landing-page__error-cta').on('click', function () {\n        var dataEventInfo = {\n          eventName: 'VWBasic_FormErrorLayerButton_Click',\n          eventAction: 'VWBasic_FormErrorLayerButton_Click',\n          pageId: window.location.href\n            .split('?')[0]\n            .replace('http:\/\/', '')\n            .replace('https:\/\/', ''),\n          pageName: 'Part Exchange',\n          contentID: 'Part Exchange',\n        };\n\n        var dataAttributes = {\n          url: 'http:\/\/www.volkswagen.co.uk\/find-a-retailer',\n          label: this.innerText,\n          type: 'Error retailer button click',\n        };\n\n        vwUk.Instances.dataLayerController.fireEvent(\n          'c921-01',\n          dataEventInfo,\n          {},\n          dataAttributes\n        );\n      });\n\n      jQuery('.form-container__bottom.part-exchange-valuation-page .button').on(\n        'click',\n        function () {\n          var dataEventInfo = {\n            eventName: 'VWBasic_TradeInFormStepCTA_Click',\n            eventAction: 'emailSubmitClick',\n            pageId: window.location.href\n              .split('?')[0]\n              .replace('http:\/\/', '')\n              .replace('https:\/\/', ''),\n            pageName: 'Part Exchange',\n            contentID: 'Send valuation',\n          };\n\n          var dataAttributes = {\n            url:\n              window.location.hostname +\n              '\/used-cars\/part-exchange#\/valuation\/emailSubmit',\n            label: this.innerText,\n            type: 'submitEmail',\n          };\n\n          if (this.className.indexOf('button--disabled') === -1) {\n            vwUk.Instances.dataLayerController.fireEvent(\n              'c921-01',\n              dataEventInfo,\n              {},\n              dataAttributes\n            );\n          }\n        }\n      );\n\n      jQuery('body').on('click', '.editorial-section a', function (event) {\n        var dataEventInfo = {\n          eventName: 'VWBasic_Button_Click',\n          eventAction: 'VWBasic_Button_Click',\n          pageId: window.location.href\n            .split('?')[0]\n            .replace('http:\/\/', '')\n            .replace('https:\/\/', ''),\n          pageName: 'Part Exchange',\n          contentID: 'Part Exchange',\n        };\n\n        var dataAttributes = {\n          url: window.location.hostname + '\/used-cars\/part-exchange#\/landing',\n          label: this.innerText,\n          type: 'Basic button click',\n        };\n\n        vwUk.Instances.dataLayerController.fireEvent(\n          'c921-01',\n          dataEventInfo,\n          {},\n          dataAttributes\n        );\n      });\n\n      var eventDataUpdate = function (obj) {\n        if (!obj) {\n          return {};\n        }\n\n        var attributes = obj.attributes;\n        var category = obj.category;\n        var eventInfo = obj.eventInfo;\n\n        var info = {\n          eventName: eventInfo.eventName,\n          eventAction: eventInfo.eventName,\n          pageId: window.location.href\n            .split('?')[0]\n            .replace('http:\/\/', '')\n            .replace('https:\/\/', ''),\n          pageName: 'Part Exchange',\n          contentID: 'Send Retailer Form',\n        };\n\n        var attr = {\n          url:\n            window.location.hostname +\n            '\/used-cars\/part-exchange#\/valuation\/emailSubmit',\n          label: obj.eventInfo.eventAction,\n          type: 'submitEmail',\n        };\n\n        var extra = {};\n\n        return {\n          info,\n          extra,\n          attr,\n        };\n      };\n\n      $dataLayer.on('data-layer-event-fired', function (e) {\n        var obj = dataLayer.event[dataLayer.event.length - 1];\n\n        switch (obj.eventInfo.eventAction) {\n          case 'form-submit-button-click':\n          case 'form-validation-error':\n          case 'form-submit-success':\n          case 'form-submit-error':\n            var newEventInfo = eventDataUpdate(obj).info;\n            var newDataAttr = eventDataUpdate(obj).attr;\n\n            setTimeout(() => {\n              vwUk.Instances.dataLayerController.fireEvent(\n                'c921-01',\n                newEventInfo,\n                {},\n                newDataAttr\n              );\n            }, 50);\n\n            break;\n\n          case 'SPAnavigationLoad':\n            if (obj.attributes.step === 2) {\n              setTimeout(function () {\n                console.log(\n                  'push add part-exchange-reset__link listener',\n                  jQuery('.part-exchange-reset__link')\n                );\n\n                jQuery('.part-exchange-reset__link').on('click', function () {\n                  var dataEventInfo = {\n                    eventName: 'Part Exchange Basic Link Click',\n                    eventAction: 'VWBasic_Link_Click',\n                    pageId: window.location.href\n                      .split('?')[0]\n                      .replace('http:\/\/', '')\n                      .replace('https:\/\/', ''),\n                    pageName: 'Part Exchange',\n                    contentID: 'Part Exchange',\n                  };\n\n                  var dataAttributes = {\n                    url: window.location.hostname + '\/used-cars\/part-exchange',\n                    label: this.innerText,\n                    type: 'part-exchange-reset__link',\n                  };\n                  vwUk.Instances.dataLayerController.fireEvent(\n                    'c921-01',\n                    dataEventInfo,\n                    {},\n                    dataAttributes\n                  );\n                });\n              }, 500);\n            } else if (obj.attributes.step === 3) {\n              setTimeout(function () {\n                console.log(\n                  'Qubit push added print cta listeners',\n                  jQuery('.form-container__print-cta .button'),\n                  jQuery('.form-container__email-cta .button')\n                );\n\n                jQuery('.form-container__print-cta .button').on(\n                  'click',\n                  function () {\n                    var dataEventInfo = {\n                      eventName: 'VWBasic_TradeInStepButton_Click',\n                      eventAction: 'printClick',\n                      pageId: window.location.href\n                        .split('?')[0]\n                        .replace('http:\/\/', '')\n                        .replace('https:\/\/', ''),\n                      pageName: 'Part Exchange',\n                      contentID: 'Get your estimate',\n                    };\n\n                    var dataAttributes = {\n                      url:\n                        window.location.hostname +\n                        '\/used-cars\/part-exchange#\/valuation\/print',\n                      label: this.innerText,\n                      type: 'print',\n                    };\n\n                    vwUk.Instances.dataLayerController.fireEvent(\n                      'c921-01',\n                      dataEventInfo,\n                      {},\n                      dataAttributes\n                    );\n                  }\n                );\n\n                \/\/ Email form open button (step 3)\n                jQuery('.form-container__email-cta .button').once(\n                  'click',\n                  function () {\n                    var dataEventInfo = {\n                      eventName: 'VWBasic_TradeInFormStepButton_Click',\n                      eventAction: 'emailClick',\n                      pageId: window.location.href\n                        .split('?')[0]\n                        .replace('http:\/\/', '')\n                        .replace('https:\/\/', ''),\n                      pageName: 'Part Exchange',\n                      contentID: 'Part Exchange',\n                    };\n\n                    var dataAttributes = {\n                      url:\n                        window.location.hostname +\n                        '\/used-cars\/part-exchange#\/valuation\/email',\n                      label: this.innerText,\n                      type: 'email',\n                    };\n\n                    vwUk.Instances.dataLayerController.fireEvent(\n                      'c921-01',\n                      dataEventInfo,\n                      {},\n                      dataAttributes\n                    );\n\n                    var dataEventInfo2 = {\n                      eventName: 'VWBasic_TradeInFormStep_Load',\n                      eventAction: 'tradeInFormStepLoad',\n                      pageId: window.location.href\n                        .split('?')[0]\n                        .replace('http:\/\/', '')\n                        .replace('https:\/\/', ''),\n                      pageName: 'Part Exchange',\n                      contentID: 'Part Exchange',\n                    };\n\n                    vwUk.Instances.dataLayerController.fireEvent(\n                      'c921-01',\n                      dataEventInfo2,\n                      {},\n                      dataAttributes\n                    );\n                  }\n                );\n\n                \/\/ Retailer form button (step 3)\n                jQuery('.form-container__send-to-retailer-cta .button').once(\n                  'click',\n                  function () {\n                    var dataEventInfo = {\n                      eventName: 'VWBasic_TradeInFormStepButton_Click',\n                      eventAction: 'sendToRetailerClick',\n                      pageId: window.location.href\n                        .split('?')[0]\n                        .replace('http:\/\/', '')\n                        .replace('https:\/\/', ''),\n                      pageName: 'Send to retailer',\n                      contentID: 'Send to retailer',\n                    };\n\n                    var dataAttributes = {\n                      url:\n                        window.location.hostname +\n                        '\/used-cars\/part-exchange#\/valuation\/email',\n                      label: this.innerText,\n                      type: 'email',\n                    };\n\n                    vwUk.Instances.dataLayerController.fireEvent(\n                      'c921-01',\n                      dataEventInfo,\n                      {},\n                      dataAttributes\n                    );\n\n                    var dataEventInfo2 = {\n                      eventName: 'VWBasic_TradeInFormStep_Load',\n                      eventAction: 'tradeInFormStepLoad',\n                      pageId: window.location.href\n                        .split('?')[0]\n                        .replace('http:\/\/', '')\n                        .replace('https:\/\/', ''),\n                      pageName: 'Send to retailer',\n                      contentID: 'Send to retailer',\n                    };\n\n                    vwUk.Instances.dataLayerController.fireEvent(\n                      'c921-01',\n                      dataEventInfo2,\n                      {},\n                      dataAttributes\n                    );\n                  }\n                );\n              }, 500);\n            }\n\n            break;\n\n          default:\n        }\n      });\n\n      function waitForElement(selector, callback) {\n        console.log('Waiting for ', selector);\n\n        var observer = new MutationObserver(function (mutations) {\n          var $element = jQuery(selector);\n\n          if ($element && $element.length) {\n            console.log('Element found');\n\n            callback(selector);\n            this.disconnect();\n          }\n        });\n\n        observer.observe(document.documentElement, {\n          attributes: true,\n          characterData: true,\n          childList: true,\n          subtree: true,\n        });\n      }\n\n      waitForElement(\n        '.progress-bar__tab--current > .progress-bar__tab-text--long',\n        function () {\n          var dataEventInfo = {\n            eventName: 'Part Exchange Basic TradeInFormStep Pageload',\n            eventAction: 'VWBasic_TradeInFormStep_Pageload',\n            pageId: window.location.href\n              .split('?')[0]\n              .replace('http:\/\/', '')\n              .replace('https:\/\/', ''),\n            pageName: 'Part Exchange',\n            contentID: 'Part Exchange',\n          };\n\n          var dataAttributes = {\n            pageName: '\/part-exchange\/landing',\n            step: 1,\n          };\n\n          vwUk.Instances.dataLayerController.fireEvent(\n            'c921-01',\n            dataEventInfo,\n            {},\n            dataAttributes\n          );\n        }\n      );\n    });\n\n    \/\/ Will only bind handler once\n    jQuery.fn.once = function (eventType, handler) {\n      if (this.data('bound') === eventType) {\n        return this;\n      }\n\n      this.on(eventType, handler);\n\n      this.data('bound', eventType);\n\n      return this;\n    };\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25793],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19681,"type":"CustomHtml","name":"2c57c06ab151c717901da7d1ef5a349e","parameters":{"customHtml":"<script>\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole('Staging > Part Exchange ACTIONS > 2021\/02\/24');\n      \/\/console.log('%cPE - ACTIONS', 'background: #222; color: purple');\n\n      var $dataLayer = jQuery('#vw-data-layer');\n      var vwdata = (window.vwdata = window.vwdata || []);\n      var errorH2Text = '';\n      var lastStep = {};\n\n      \/\/ Set Data\n\n      function triggerEvent(trackingObject, event) {\n        vwdata.push(trackingObject);\n\n        console.log(\n          '%cSD Bootstrapper (' +\n            Bootstrapper.ensightenOptions.publishPath +\n            ') push event:',\n          'background: #222; color: #bada55',\n          event,\n          ' trackingObject:',\n          trackingObject\n        );\n        \/\/console.log('SD Bootstrapper (' + Bootstrapper.ensightenOptions.publishPath + ') push event:', event, ' trackingObject:', trackingObject);\n      }\n\n      function getStep() {\n        var stepName = jQuery(\n          '.progress-bar__tab--current > .progress-bar__tab-text--long'\n        ).text();\n        var stepNumber = jQuery('.progress-bar__tab--current')\n          .find('.progress-bar__tab-icon--incoming')\n          .text();\n\n        var step = {\n          name: stepName,\n          number: stepNumber,\n        };\n\n        \/\/ Store step for use in Send to retailer step (no progress bar)\n        \/\/ or if empty (in Send to retailer) use stored values\n        if (stepName && stepNumber !== null) {\n          lastStep = step;\n        } else {\n          step = lastStep;\n        }\n\n        return step;\n      }\n\n      function getEmptyVehicle() {\n        return {\n          manufacturer: undefined,\n          model: undefined,\n          derivative: undefined,\n          registrationDate: undefined,\n          bodyType: undefined,\n          fuelType: undefined,\n          transmission: undefined,\n          engineSize: undefined,\n          engineSizeUnit: undefined,\n          mileage: undefined,\n          mileageUnit: undefined,\n          currency: undefined,\n          estimatedValueExcellent: undefined,\n          estimatedValueGood: undefined,\n          estimatedValueAverage: undefined,\n        };\n      }\n\n      \/\/ Get partner data from Send to retailer page\n      function getPartner() {\n        var $selectedPartner = jQuery(\n          '.retailer-details-compact__input[checked]'\n        );\n        var $selectedPartnerDetails = $selectedPartner.siblings(\n          '.retailer-details-compact__content'\n        );\n\n        var dealerNumber = jQuery(\n          '[name=dealerNumber]',\n          $selectedPartner\n        ).val();\n        var dealerName = $selectedPartnerDetails\n          .find('.retailer-details-compact__content-title--retailer-name')\n          .text()\n          .trim();\n        var dealerAddress = $selectedPartnerDetails\n          .find('.retailer-details-compact__content-text--address')\n          .text()\n          .trim();\n        var dealerPostcode = dealerAddress.split(', ').slice(-1)[0];\n        var dealerDistance = $selectedPartnerDetails\n          .find('.retailer-details-compact__title-content-text')\n          .text()\n          .trim();\n\n        return {\n          informationBnr: dealerNumber,\n          informationName: dealerName,\n          informationDepartment: 'sales',\n          informationZIP: dealerPostcode,\n        };\n      }\n\n      function setEventInfo(trackingObject, eventAction) {\n        trackingObject.eventInfo = {};\n        trackingObject.eventInfo.eventAction = eventAction;\n        trackingObject.eventInfo.pageId = window.location.href\n          .replace('https:\/\/', '')\n          .replace('http:\/\/', '')\n          .split('?')[0]\n          .split('#')[0];\n        trackingObject.eventInfo.pageName = 'used cars : part exchange';\n        trackingObject.eventInfo.pageCategory = 'part-exchange';\n        trackingObject.eventInfo.templateType = undefined;\n        trackingObject.eventInfo.brand = 'passenger';\n      }\n\n      function setEnvironmentData(trackingObject, obj) {\n        trackingObject.environment = {};\n        trackingObject.environment.applicationId =\n          window.location.href.indexOf('vwcloud.co.uk') > -1\n            ? 'VWLocalPartExchangeD6'\n            : 'VWPartExchangeD6';\n        trackingObject.environment.language = 'en';\n        trackingObject.environment.country = 'GB';\n      }\n\n      function setUserData(trackingObject) {\n        trackingObject.user = {};\n        trackingObject.user.browserResolutionHeight = Math.max(\n          document.documentElement.clientWidth,\n          window.innerWidth || 0\n        ).toString();\n        trackingObject.user.browserResolutionWidth = Math.max(\n          document.documentElement.clientHeight,\n          window.innerHeight || 0\n        ).toString();\n        trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll(\n          'main'\n        )[0]\n          ? document.querySelectorAll('main')[0].offsetWidth.toString()\n          : undefined;\n        trackingObject.user.browserResolutionOrientation =\n          window.innerHeight < window.innerWidth ? 'h' : 'v';\n      }\n\n      function setFormData(trackingObject, retailerForm) {\n        trackingObject.form = {};\n        trackingObject.form.FormType = 'tradein';\n        trackingObject.form.FormName = retailerForm\n          ? 'partExchangeQuoteRetailer'\n          : 'partExchangeQuote';\n        trackingObject.form.FormVersion = '1';\n      }\n\n      function setPersonalizationData(trackingObject, obj) {\n        trackingObject.personalization = {};\n        trackingObject.personalization.status = false;\n        trackingObject.personalization.placeholderId = undefined;\n        trackingObject.personalization.contentId = undefined;\n        trackingObject.personalization.activityId = undefined;\n        trackingObject.personalization.activityName = undefined;\n        trackingObject.personalization.experienceId = undefined;\n        trackingObject.personalization.experienceName = undefined;\n        trackingObject.personalization.offerName = undefined;\n        trackingObject.personalization.offerId = undefined;\n      }\n\n      function setProcessData(trackingObject) {\n        var step = getStep();\n\n        trackingObject.process = {};\n        trackingObject.process.StepName = step.name;\n        trackingObject.process.StepNumber = step.number;\n      }\n\n      function setLinkData(trackingObject, obj) {\n        trackingObject.link = {};\n        trackingObject.link.url = obj.attributes.url;\n        trackingObject.link.name = obj.attributes.label;\n      }\n\n      function setPartnerData(trackingObject, obj) {\n        \/\/ If we're on Send to retailer form\n        if (jQuery('#titleLarge').text().trim() === 'Send to retailer') {\n          trackingObject.partner = getPartner();\n        } else {\n          trackingObject.partner = {};\n          trackingObject.partner.informationBnr = undefined;\n          trackingObject.partner.informationName = undefined;\n          trackingObject.partner.informationDepartment = undefined;\n          trackingObject.partner.informationZIP = undefined;\n        }\n      }\n\n      function setErrorData(trackingObject, obj) {\n        trackingObject.error = {};\n        trackingObject.error.code = '1';\n        trackingObject.error.message = errorH2Text;\n        trackingObject.error.referringUrl =\n          window.location.hostname + window.location.pathname;\n      }\n\n      var savedVehicle = {};\n\n      function workOutVehicleData(clearEstimation) {\n        if (getStep().number === '2') {\n          \/\/ When button clicked\n\n          savedVehicle = getEmptyVehicle();\n\n          \/\/ Form container data\n          var dataList = jQuery(\n            '.form-container__vehicle-details .data-list__list'\n          );\n          var innerText = dataList.length > 0 ? dataList[0].innerText : null;\n\n          if (innerText) {\n            var a = innerText.split('\\n');\n            for (var i = 0; i < a.length; i++) {\n              var key = a[i].replace(':', '').split(' ');\n              var value = a[i + 1];\n              var first = key[0].toLowerCase();\n              var second = '';\n              if (key.length > 1) {\n                second = key[1];\n                second = second.charAt(0).toUpperCase() + second.slice(1);\n              }\n              if (first === 'first' && second === 'Registered') {\n                first = 'registration';\n                second = 'Date';\n              }\n              savedVehicle[first + second] = value;\n              i++;\n            }\n          }\n\n          \/\/ Convert scraped value to int\n          var engineSizeText = savedVehicle['engineSize'];\n          savedVehicle['engineSize'] = parseInt(engineSizeText);\n\n          \/\/ In Summary Panel\n          var mileageText = jQuery(\n            '.data-list__list-item',\n            jQuery('part-exchange-summary-panel')\n          )\n            .find('dt:contains(\"Mileage:\")')\n            .siblings('dd')\n            .eq(0)\n            .text()\n            .replace(',', '');\n          savedVehicle.mileage = parseInt(mileageText);\n          savedVehicle.mileageUnit = 'miles';\n          savedVehicle.engineSizeUnit = 'cm\u00b3';\n          savedVehicle.currency = 'GBP';\n        } else {\n          \/\/ Step 3\n\n          \/\/ In Valuation Panel\n          jQuery(\n            'part-exchange-valuation-page > form-container > data-list > dl'\n          )\n            .children()\n            .each(function () {\n              var labelText = jQuery(this).find('dt').text().toLowerCase();\n              var valueText = jQuery(this)\n                .find('dd')\n                .text()\n                .replace('\u00a3', '')\n                .replace(',', '');\n              var value = parseInt(valueText);\n\n              if (labelText.indexOf('excellent') != -1) {\n                savedVehicle.estimatedValueExcellent = value;\n              } else if (labelText.indexOf('good') != -1) {\n                savedVehicle.estimatedValueGood = value;\n              } else if (labelText.indexOf('average') != -1) {\n                savedVehicle.estimatedValueAverage = value;\n              }\n            });\n        }\n\n        if (clearEstimation) {\n          return {\n            manufacturer: savedVehicle.manufacturer,\n            model: savedVehicle.model,\n            derivative: savedVehicle.derivative,\n            registrationDate: savedVehicle.registrationDate,\n            bodyType: savedVehicle.bodyType,\n            fuelType: savedVehicle.fuelType,\n            transmission: savedVehicle.transmission,\n            engineSize: savedVehicle.engineSize,\n            engineSizeUnit: savedVehicle.engineSizeUnit,\n            mileage: savedVehicle.mileage,\n            mileageUnit: savedVehicle.mileageUnit,\n            currency: savedVehicle.currency,\n            estimatedValueExcellent: undefined,\n            estimatedValueGood: undefined,\n            estimatedValueAverage: undefined,\n          };\n        } else {\n          return savedVehicle;\n        }\n      }\n\n      function setOwnershipData(trackingObject, clearEstimation) {\n        trackingObject.ownership = {};\n        trackingObject.ownership.vehicle =\n          window.location.hash.indexOf('landing') > -1\n            ? [getEmptyVehicle()]\n            : [workOutVehicleData(clearEstimation)];\n      }\n\n      \/\/ Listeners\n\n      function accordionHeaderClick(obj) {\n        \/\/ 'VWBasic_AccordionOpen_Click' or 'VWBasic_AccordionClose_Click';\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, obj.eventInfo.eventAction);\n        trackingObject.eventInfo.contentId = obj.attributes.label.replace(\n          '* ',\n          ''\n        );\n        trackingObject.eventInfo.sectionName = obj.attributes.label.replace(\n          '* ',\n          ''\n        );\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n\n        triggerEvent(trackingObject, obj.eventInfo.eventAction);\n      }\n\n      function linkClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_Link_Click');\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setLinkData(trackingObject, obj);\n\n        triggerEvent(trackingObject, 'VWBasic_Link_Click');\n      }\n\n      function buttonClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_Button_Click');\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setLinkData(trackingObject, obj);\n\n        triggerEvent(trackingObject, 'VWBasic_Button_Click');\n      }\n\n      function formError(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_FormErrorLayer_Load');\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n\n        setFormData(trackingObject);\n        trackingObject.form.ErrorFormFields = {\n          FieldNameandID: [\n            {\n              'form field id': obj.eventInfo.eventAction,\n              'form field name': obj.eventInfo.eventName,\n            },\n          ],\n        };\n        trackingObject.form.ErrorAddressValidationFields = undefined;\n\n        trackingObject.form.FormStart = false;\n        errorH2Text = jQuery(\n          '.part-exchange-landing-page__error-wrapper h2'\n        ).text();\n        setErrorData(trackingObject, obj);\n\n        triggerEvent(trackingObject, 'VWBasic_FormErrorLayer_Load');\n      }\n\n      function formErrorCloseButton(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_FormErrorLayerClose_Click');\n        trackingObject.eventInfo.sectionName = undefined;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n\n        setFormData(trackingObject);\n        trackingObject.form.ErrorFormFields = undefined;\n        trackingObject.form.ErrorAddressValidationFields = undefined;\n        trackingObject.form.FormStart = false;\n\n        setErrorData(trackingObject, obj);\n\n        triggerEvent(trackingObject, 'VWBasic_FormErrorLayerClose_Click');\n      }\n\n      function formErrorCTAButton(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_FormErrorLayerButton_Click');\n        trackingObject.eventInfo.contentId = 'Find a retailer';\n        trackingObject.eventInfo.sectionName = 'Find a retailer';\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n\n        setFormData(trackingObject);\n        trackingObject.form.ErrorFormFields = undefined;\n        trackingObject.form.FormStart = false;\n\n        setLinkData(trackingObject, obj);\n        setErrorData(trackingObject, obj);\n\n        triggerEvent(trackingObject, 'VWBasic_FormErrorLayerButton_Click');\n      }\n\n      function formStepLoad(obj) {\n        var eventType =\n          obj.eventInfo.eventAction === 'VWBasic_TradeInFormStep_Pageload'\n            ? 'VWBasic_TradeInFormStep_Pageload'\n            : 'VWBasic_TradeInStep_Load';\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, eventType);\n        trackingObject.eventInfo.contentLabels = obj.eventInfo.contentLabels;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n        if (eventType === 'VWBasic_TradeInFormStep_Pageload') {\n          setFormData(trackingObject);\n          trackingObject.form.FormStart = true;\n        }\n        setProcessData(trackingObject);\n        setOwnershipData(trackingObject, false);\n\n        triggerEvent(trackingObject, eventType);\n      }\n\n      function tradeInFormStepLoad(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_TradeInFormStep_Load');\n        trackingObject.eventInfo.contentLabels = obj.eventInfo.contentLabels;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n        setFormData(\n          trackingObject,\n          obj.eventInfo.pageName === 'Send to retailer'\n        );\n        trackingObject.form.FormStart = false;\n\n        setProcessData(trackingObject);\n        setOwnershipData(trackingObject, false);\n\n        triggerEvent(trackingObject, 'VWBasic_TradeInFormStep_Load');\n      }\n\n      function formStep1Submit(obj) {\n        formStepSubmits(obj, 'Step 2: Confirm vehicle details', true);\n      }\n\n      function formStep2Submit(obj) {\n        formStepSubmits(obj, 'Step 3: Get your estimate', true);\n      }\n\n      function formPrint(obj) {\n        formStepSubmits(obj, 'Print valuation', false);\n      }\n\n      function formEmail(obj) {\n        formStepSubmits(obj, 'Email valuation', false);\n      }\n\n      function formSendToRetailer(obj) {\n        formStepSubmits(obj, 'Send to retailer', false);\n      }\n\n      function formStepSubmits(obj, contentId, clearEstimation) {\n        var trackingObject = {};\n        var eventAction =\n          obj.eventInfo.eventAction === 'step1ButtonClick'\n            ? 'VWBasic_TradeInFormStepButton_Click'\n            : 'VWBasic_TradeInStepButton_Click';\n\n        setEventInfo(trackingObject, eventAction);\n        trackingObject.eventInfo.contentId =\n          contentId || obj.eventInfo.contentID;\n\n        if (obj.eventInfo.eventAction === 'step1ButtonClick') {\n          setFormData(trackingObject);\n        }\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n        setProcessData(trackingObject);\n        setLinkData(trackingObject, obj);\n        setOwnershipData(trackingObject, clearEstimation);\n\n        triggerEvent(trackingObject, eventAction);\n      }\n\n      function emailMeStart(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_TradeInFormStepCTA_Click');\n        trackingObject.eventInfo.contentId = obj.eventInfo.contentID;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n        setFormData(trackingObject);\n        trackingObject.form.PrefContactChannels = 'email';\n\n        setLinkData(trackingObject, {\n          attributes: {\n            label: 'Send Email Valuation',\n            url: window.location.href\n              .split('?')[0]\n              .replace('http:\/\/', '')\n              .replace('https:\/\/', ''),\n          },\n        });\n        setProcessData(trackingObject);\n        setOwnershipData(trackingObject, false);\n\n        triggerEvent(trackingObject, 'VWBasic_TradeInFormStepCTA_Click');\n      }\n\n      function retailerFormSubmitButtonClick(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_TradeInFormStepCTA_Click');\n        trackingObject.eventInfo.contentId = obj.eventInfo.contentID;\n        trackingObject.eventInfo.templateType = undefined;\n        trackingObject.eventInfo.brand = 'passenger';\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        trackingObject.user.loginStatus = undefined;\n\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n        setProcessData(trackingObject);\n        setFormData(trackingObject, true);\n        trackingObject.form.PrefContactChannels = 'email';\n        trackingObject.form.MarketingConsent = [];\n        trackingObject.form.NewsletterType = undefined;\n\n        setLinkData(trackingObject, {\n          attributes: {\n            label: 'Send Email Valuation',\n            url: window.location.href\n              .split('?')[0]\n              .replace('http:\/\/', '')\n              .replace('https:\/\/', ''),\n          },\n        });\n\n        setOwnershipData(trackingObject, false);\n\n        triggerEvent(trackingObject, 'VWBasic_TradeInFormStepCTA_Click');\n      }\n\n      function retailerFormValidationError(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_FormErrorMessage_Load');\n        trackingObject.eventInfo.contentId = obj.eventInfo.contentID;\n        trackingObject.eventInfo.sectionName = obj.attributes.type;\n\n        setEnvironmentData(trackingObject, obj);\n        trackingObject.environment.commerce = undefined;\n\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n        trackingObject.partner.informationDistance = undefined;\n\n        setFormData(trackingObject, true);\n        trackingObject.form.ErrorFormFields = {\n          FieldNameandID: [\n            {\n              'form field id': obj.eventInfo.eventAction,\n              'form field name': obj.eventInfo.eventName,\n            },\n          ],\n        };\n        trackingObject.form.ErrorAddressValidationFields = undefined;\n\n        setErrorData(trackingObject, obj);\n\n        triggerEvent(trackingObject, 'VWBasic_FormErrorMessage_Load');\n      }\n\n      function retailerFormSubmitSuccess(obj) {\n        formSubmitSuccess(obj, true);\n      }\n\n      function formSubmitSuccess(obj, retailerForm) {\n        var trackingObject = {};\n\n        setEventInfo(\n          trackingObject,\n          'VWBasic_TradeInFormStepSubmissionSuccessMessage_Load'\n        );\n        trackingObject.eventInfo.contentId = obj.eventInfo.contentID;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n        setFormData(trackingObject, retailerForm);\n        trackingObject.form.PrefContactChannels = 'email';\n        trackingObject.form.MarketingConsent = [];\n        trackingObject.form.NewsletterType = undefined;\n\n        setProcessData(trackingObject);\n        setOwnershipData(trackingObject, false);\n\n        triggerEvent(\n          trackingObject,\n          'VWBasic_TradeInFormStepSubmissionSuccessMessage_Load'\n        );\n      }\n\n      function retailerFormSubmitErrorLayerLoad(obj) {\n        var trackingObject = {};\n\n        setEventInfo(trackingObject, 'VWBasic_FormErrorLayer_Load');\n        trackingObject.eventInfo.contentId = obj.eventInfo.contentID;\n        trackingObject.eventInfo.sectionName = obj.attributes.type;\n\n        setEnvironmentData(trackingObject, obj);\n        setUserData(trackingObject);\n        setPersonalizationData(trackingObject, obj);\n        setPartnerData(trackingObject, obj);\n        setFormData(trackingObject, true);\n        trackingObject.form.FormStart = false;\n        trackingObject.form.ErrorAddressValidationFields = undefined;\n\n        setErrorData(trackingObject, obj);\n\n        triggerEvent(trackingObject, 'VWBasic_FormErrorLayer_Load');\n      }\n\n      \/\/ Main listener\n\n      $dataLayer.on('data-layer-event-fired', function (e) {\n        var obj = dataLayer.event[dataLayer.event.length - 1];\n\n        console.log('data-layer-event-fired', obj);\n\n        if (!Bootstrapper) {\n          return;\n        }\n\n        switch (obj.eventInfo.eventAction) {\n          case 'VWBasic_TradeInFormStep_Pageload':\n          case 'SPAnavigationLoad':\n            setTimeout(function () {\n              formStepLoad(obj);\n            }, 200);\n\n            break;\n\n          case 'step1ButtonClick':\n            formStep1Submit(obj);\n            break;\n\n          case 'step2ButtonClick':\n            formStep2Submit(obj);\n            break;\n\n          case 'maxLimit':\n          case 'formError':\n            formError(obj);\n            break;\n\n          case 'VWBasic_FormErrorLayerClose_Click':\n            formErrorCloseButton(obj);\n            break;\n\n          case 'VWBasic_FormErrorLayerButton_Click':\n            formErrorCTAButton(obj);\n            break;\n\n          case 'VWBasic_AccordionOpen_Click':\n          case 'VWBasic_AccordionClose_Click':\n            accordionHeaderClick(obj);\n            break;\n\n          case 'VWBasic_Link_Click':\n            linkClick(obj);\n            break;\n\n          case 'printClick':\n            formPrint(obj);\n            break;\n\n          case 'tradeInFormStepLoad':\n            tradeInFormStepLoad(obj);\n            break;\n\n          case 'emailClick':\n            formEmail(obj);\n            break;\n          case 'sendToRetailerClick':\n            formSendToRetailer(obj);\n            break;\n\n          case 'emailSubmitClick':\n            emailMeStart(obj);\n            break;\n\n          case 'emailValuationConfirm':\n            formSubmitSuccess(obj);\n            break;\n\n          case 'part-exchange-retailer-form-submit-button-click':\n            retailerFormSubmitButtonClick(obj);\n            break;\n\n          case 'part-exchange-retailer-form-validation-error':\n            retailerFormValidationError(obj);\n            break;\n\n          case 'part-exchange-retailer-form-submit-success':\n            retailerFormSubmitSuccess(obj);\n            break;\n\n          case 'part-exchange-retailer-form-submit-error':\n            retailerFormSubmitErrorLayerLoad(obj);\n            break;\n\n          case 'VWBasic_Button_Click':\n            buttonClick(obj);\n            break;\n\n          default:\n        }\n      });\n    });\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25793],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"},{"id":19682,"type":"CustomHtml","name":"97122ce23cb7d4373c1a5d530b3969d9","parameters":{"customHtml":"<script>\n  (function (jQuery) {\n    jQuery(document).ready(function () {\n      window.VwTagConsole('Contact Me Form Tracking > 2021\/07\/05, live version');\n\n      function setUpTracking() {\n        var $dataLayer = jQuery('#vw-data-layer');\n        var vwdata = (window.vwdata = window.vwdata || []);\n        var retailer = null;\n\n        \/\/ Trigger Event\n        var triggerEvent = function (trackingObject, eventAction) {\n          vwdata.push(trackingObject);\n          console.log(\n            '%c SD Bootstrapper (' +\n              Bootstrapper.ensightenOptions.publishPath +\n              ') push event:',\n            'background: #222; color: #bada55',\n            eventAction,\n            ' trackingObject:',\n            trackingObject\n          );\n        };\n\n        var setEventInfo = function (trackingObject, eventAction) {\n            trackingObject.eventInfo = {};\n            trackingObject.eventInfo.eventAction = eventAction;\n            trackingObject.eventInfo.pageId = window.location.href\n              .replace('https:\/\/', '')\n              .replace('http:\/\/', '');\n            trackingObject.eventInfo.pageName = 'need-help : contact-me';\n            trackingObject.eventInfo.pageCategory = 'new-vehicles';\n            trackingObject.eventInfo.templateType = undefined;\n            trackingObject.eventInfo.brand = 'passenger cars';\n          },\n          setUserBrowserData = function (trackingObject) {\n            trackingObject.user = trackingObject.user || {};\n            trackingObject.user.browserResolutionHeight = Math.max(\n              document.documentElement.clientWidth,\n              window.innerWidth || 0\n            ).toString();\n            trackingObject.user.browserResolutionWidth = Math.max(\n              document.documentElement.clientHeight,\n              window.innerHeight || 0\n            ).toString();\n            trackingObject.user.browserResolutionBreakpoint = document.querySelectorAll(\n              'main'\n            )[0]\n              ? document.querySelectorAll('main')[0].offsetWidth.toString()\n              : undefined;\n            trackingObject.user.browserResolutionOrientation =\n              window.innerHeight < window.innerWidth ? 'h' : 'v';\n            trackingObject.user.loginStatus = undefined;\n          },\n          setUserLocationData = function (trackingObject) {\n            trackingObject.user.locationLatitude = undefined;\n            trackingObject.user.locationLongitude = undefined;\n            trackingObject.user.locationZIP = retailer\n              ? retailer.searchTerm\n              : undefined;\n          },\n          setEnvironmentData = function (trackingObject) {\n            trackingObject.environment = {};\n            trackingObject.environment.applicationId =\n              window.location.href.indexOf('vwcloud.co.uk') > -1\n                ? 'VWLocalUKRetailerContactD6'\n                : 'VWUKRetailerContactD6';\n            trackingObject.environment.language = 'en';\n            trackingObject.environment.country = 'GB';\n            trackingObject.environment.featureAppId = undefined;\n            trackingObject.environment.featureAppIdAppVersion = undefined;\n          },\n          setFormData = function (trackingObject) {\n            trackingObject.form = {};\n            trackingObject.form.FormType = 'contact';\n            trackingObject.form.FormName = 'retailerContact';\n            trackingObject.form.FormVersion = '1';\n          },\n          setProcessData = function (trackingObject) {\n            trackingObject.process = {};\n            trackingObject.process.StepName = 'contact';\n          },\n          setFormAdditionalData = function (trackingObject, obj) {\n            trackingObject.form.MarketingConsent = [\n              {\n                email: true,\n              },\n            ];\n            trackingObject.form.NewsletterType = undefined;\n            trackingObject.form.PrefContactChannels = 'email';\n          },\n          setPersonalizationData = function (trackingObject) {\n            trackingObject.personalization = {\n              status: false,\n              moduleId: undefined,\n              personalizable: undefined,\n              placeholderId: undefined,\n              contentId: undefined,\n              activityId: undefined,\n              activityName: undefined,\n              experienceId: undefined,\n              experienceName: undefined,\n              offerName: undefined,\n              offerId: undefined,\n            };\n          },\n          setLinkData = function (trackingObject, label) {\n            trackingObject.link = {};\n            trackingObject.link.url = window.location.href\n              .replace('http:\/\/', '')\n              .replace('https:\/\/', '');\n            trackingObject.link.name = label;\n          },\n          setPartnerData = function (trackingObject) {\n            trackingObject.partner = {};\n            trackingObject.partner.informationBnr = retailer\n              ? retailer.dealerNumber\n              : undefined;\n            trackingObject.partner.informationName = retailer\n              ? retailer.dealerName\n              : undefined;\n            trackingObject.partner.informationDepartment = retailer\n              ? 'New'\n              : undefined;\n            trackingObject.partner.informationZIP = retailer\n              ? retailer.postcode\n              : undefined;\n          },\n          setOwnershipData = function (trackingObject) {\n            trackingObject.ownership = {};\n            trackingObject.ownership.vehicle = undefined;\n          },\n          setConfigurationData = function (trackingObject) {\n            trackingObject.configuration = {\n              CarlineId: undefined,\n              CarlineName: undefined,\n              SalesgroupId: undefined,\n              SalesgroupName: undefined,\n              EquipmentlineName: undefined,\n            };\n          },\n          setConfigurationAddtional = function (trackingObject) {\n            trackingObject.configuration.BodyTypeName = undefined;\n            trackingObject.configuration.CarlineIsRecommendation = undefined;\n            trackingObject.configuration.SalesgroupIsRecommendation = undefined;\n            trackingObject.configuration.EquipmentlineIsRecommendation = undefined;\n            trackingObject.configuration.ModelId = undefined;\n            trackingObject.configuration.ModelTrimFeatures = undefined;\n            trackingObject.configuration.ModelName = undefined;\n            trackingObject.configuration.ModelYear = undefined;\n            trackingObject.configuration.ModelModelVersion = undefined;\n            trackingObject.configuration.ModelIsRecommendation = undefined;\n            trackingObject.configuration.ModelDriveType = undefined;\n            trackingObject.configuration.ModelGearType = undefined;\n            trackingObject.configuration.EnginePowerHPKW = undefined;\n            trackingObject.configuration.EngineFuelTypePrimary = undefined;\n            trackingObject.configuration.EngineFuelTypeNonPrimary = undefined;\n            trackingObject.configuration.EmissionCo2PrimaryCombined = undefined;\n            trackingObject.configuration.EmissionCo2Urban = undefined;\n            trackingObject.configuration.EmissionCo2Extraurban = undefined;\n            trackingObject.configuration.ConsumptionCombinedPrimary = undefined;\n            trackingObject.configuration.ConsumptionCombinedNonPrimary = undefined;\n            trackingObject.configuration.EmissionConsumptionEfficiencyClass = undefined;\n            trackingObject.configuration.EmissionConsumptionTestingMethod = undefined;\n            trackingObject.configuration.ExteriorColorCode = undefined;\n            trackingObject.configuration.ExteriorColorName = undefined;\n            trackingObject.configuration.ExteriorColorIsRecommendation = undefined;\n            trackingObject.configuration.InteriorColorCode = undefined;\n            trackingObject.configuration.InteriorColorName = undefined;\n            trackingObject.configuration.InteriorColorIsRecommendation = undefined;\n            trackingObject.configuration.WheelsBasicId = undefined;\n            trackingObject.configuration.WheelsBasicName = undefined;\n            trackingObject.configuration.WheelsBasicIsRecommendation = undefined;\n\n            trackingObject.configuration.PriceCurrency = undefined;\n            trackingObject.configuration.PriceBasis = undefined;\n            trackingObject.configuration.PriceExterior = undefined;\n            trackingObject.configuration.PriceOptions = undefined;\n            trackingObject.configuration.PriceTotalConfiguration = undefined;\n            trackingObject.configuration.PriceType = undefined;\n            trackingObject.configuration.PriceCustomerTyp = undefined;\n            trackingObject.configuration.PriceCampaignI = undefined;\n            trackingObject.configuration.PriceCampaignDescriptio = undefined;\n            trackingObject.configuration.PriceCampaignValu = undefined;\n            trackingObject.configuration.PriceCustomerTyp = undefined;\n            trackingObject.configuration.PriceCurrency = undefined;\n          },\n          setFromQuestionaireData = function (trackingObject) {\n            trackingObject.form.Questionnaire = {\n              id: 'Need Help Contact',\n              version: '1',\n              content: [\n                {\n                  question: 'message',\n                  answer: [\n                    {\n                      type: 'single_value',\n                      value: undefined,\n                    },\n                  ],\n                },\n              ],\n            };\n          },\n          setConfigurationPrice = function (trackingObject) {\n            trackingObject.configuration.PriceTypeParameter = undefined;\n            trackingObject.configuration.PriceType = undefined;\n            trackingObject.configuration.PriceRateCurrency = undefined;\n            trackingObject.configuration.PriceRateType = undefined;\n            trackingObject.configuration.PriceRateBasic = undefined;\n            trackingObject.configuration.PriceRateAdditional = undefined;\n            trackingObject.configuration.PriceRateTotal = undefined;\n            trackingObject.configuration.PriceTotalCurrency = undefined;\n            trackingObject.configuration.PriceTotalBasic = undefined;\n            trackingObject.configuration.PriceTotalAdditional = undefined;\n            trackingObject.configuration.PriceTotalTotal = undefined;\n            trackingObject.configuration.OptionsNumber = undefined;\n            trackingObject.configuration.OptionsList = undefined;\n          },\n          formPageload = function (obj) {\n            var trackingObject = {};\n\n            setEventInfo(trackingObject, 'VWBasic_Form_Pageload');\n            trackingObject.eventInfo.contentLabels = undefined;\n            setEnvironmentData(trackingObject);\n            delete trackingObject.environment.featureAppId;\n            delete trackingObject.environment.featureAppIdAppVersion;\n            setUserBrowserData(trackingObject);\n            setPersonalizationData(trackingObject);\n            trackingObject.personalization.aemResourcePath = undefined;\n            trackingObject.personalization.TeaserList = undefined;\n            setConfigurationData(trackingObject);\n            setConfigurationPrice(trackingObject);\n            setFormData(trackingObject);\n            trackingObject.form.FormStart = true;\n            setOwnershipData(trackingObject);\n\n            triggerEvent(trackingObject, 'VWBasic_Form_Pageload');\n          },\n          formDealerClick = function (obj) {\n            var trackingObject = {};\n            retailer = {\n              dealerName: obj.eventInfo.dealerName,\n              dealerNumber: obj.eventInfo.dealerNumber,\n              postcode: obj.eventInfo.postcode,\n              searchResults: obj.eventInfo.searchResults,\n              searchTerm: obj.eventInfo.searchTerm,\n            };\n\n            setEventInfo(trackingObject, 'VWBasic_DealerSelect_Click');\n            trackingObject.eventInfo.contentId = undefined;\n            trackingObject.eventInfo.sectionName = undefined;\n            setEnvironmentData(trackingObject);\n            delete trackingObject.environment.featureAppId;\n            delete trackingObject.environment.featureAppIdAppVersion;\n            setUserBrowserData(trackingObject);\n            setPersonalizationData(trackingObject);\n            setConfigurationData(trackingObject);\n            trackingObject.configuration.ModelId = undefined;\n            trackingObject.configuration.ModelName = undefined;\n            setPartnerData(trackingObject);\n            trackingObject.partner.onlinePaymentOption = undefined;\n            trackingObject.partner.appointmentSystemName = undefined;\n            trackingObject.partner.appointmentSystemUtilization = undefined;\n            setLinkData(trackingObject, 'Retailer selected');\n\n            triggerEvent(trackingObject, 'VWBasic_DealerSelect_Click');\n          },\n          formSuccess = function (obj) {\n            var trackingObject = {};\n\n            setEventInfo(\n              trackingObject,\n              'VWBasic_FormSubmissionSuccessMessage_Load'\n            );\n            trackingObject.eventInfo.contentId = undefined;\n            trackingObject.eventInfo.sectionName = undefined;\n            setEnvironmentData(trackingObject);\n            setUserBrowserData(trackingObject);\n            setUserLocationData(trackingObject);\n            setConfigurationData(trackingObject);\n            setConfigurationPrice(trackingObject);\n            setConfigurationAddtional(trackingObject);\n            setPersonalizationData(trackingObject);\n            setPartnerData(trackingObject);\n            trackingObject.partner.SearchSearchTerm = retailer.searchTerm;\n            trackingObject.partner.SearchType = 'UserSearchTerm';\n            trackingObject.partner.SearchNumberOfResults =\n              retailer.searchResults;\n            setProcessData(trackingObject);\n            trackingObject.process.StepName = undefined;\n            setFormData(trackingObject);\n            setFormAdditionalData(trackingObject, obj);\n            setFromQuestionaireData(trackingObject);\n            trackingObject.form.NumberOfAppointments = undefined;\n            trackingObject.form.Appointments = undefined;\n            trackingObject.form.FormFields = undefined;\n            trackingObject.form.ErrorFormFields = undefined;\n            trackingObject.form.SourceID = undefined;\n            trackingObject.form.OpportunityUID = undefined;\n            var dealerNumber =\n              retailer && retailer.dealerNumber\n                ? retailer.dealerNumber\n                : undefined;\n            \/\/trackingObject.form.LeadID = `\/api\/lead\/1.4\/retailer\/${dealerNumber}\/contact-form`;\n            trackingObject.form.LeadID = Date.now();\n            trackingObject.form.CycleID = undefined;\n\n            triggerEvent(\n              trackingObject,\n              'VWBasic_FormSubmissionSuccessMessage_Load'\n            );\n          },\n          formError = function (obj) {\n            var trackingObject = {};\n\n            setEventInfo(trackingObject, 'VWBasic_ErrorMessage_Load');\n            trackingObject.eventInfo.sectionName = undefined;\n            setEnvironmentData(trackingObject);\n            setUserBrowserData(trackingObject);\n            setProcessData(trackingObject);\n            trackingObject.process.StepNumber = '1';\n            trackingObject.process.Name = 'contact';\n            trackingObject.process.Components = undefined;\n            trackingObject.error = {\n              code: obj.eventInfo.code ? obj.eventInfo.code : '2',\n              message: obj.eventInfo.error,\n              referringUrl: trackingObject.eventInfo.pageId,\n            };\n            setPersonalizationData(trackingObject);\n            setConfigurationData(trackingObject);\n            setPartnerData(trackingObject);\n            setFormData(trackingObject);\n            setOwnershipData(trackingObject);\n\n            triggerEvent(trackingObject, 'VWBasic_ErrorMessage_Load');\n          },\n          formCTAClick = function (obj) {\n            var trackingObject = {};\n\n            setEventInfo(trackingObject, 'VWBasic_FormCTA_Click');\n            trackingObject.eventInfo.contentId = undefined;\n            trackingObject.eventInfo.sectionName = undefined;\n            setEnvironmentData(trackingObject);\n            setUserBrowserData(trackingObject);\n            setPersonalizationData(trackingObject);\n            setConfigurationData(trackingObject);\n            setConfigurationPrice(trackingObject);\n            setPartnerData(trackingObject);\n            setFormData(trackingObject);\n            setFormAdditionalData(trackingObject, obj);\n            setFromQuestionaireData(trackingObject);\n            setLinkData(trackingObject, 'Submit');\n            setOwnershipData(trackingObject);\n\n            triggerEvent(trackingObject, 'VWBasic_FormCTA_Click');\n          };\n\n        \/\/ Main Listener\n        $dataLayer.on('data-layer-event-fired', function (e) {\n          var obj = window.vwDataLayer.event[window.vwDataLayer.event.length - 1];\n          switch (obj.eventInfo.eventAction) {\n            case 'RetailerCallbackFormLoad':\n              formPageload(obj);\n              break;\n\n            case 'RetailerCallbackAutoSelectRetailer':\n            case 'RetailerCallbackUserSelectRetailer':\n              formDealerClick(obj);\n              break;\n\n            case 'RetailerCallbackFromSend':\n              if (!retailer) {\n                retailer = {};\n              }\n              formCTAClick(obj);\n              setTimeout(function () {\n                var errros = jQuery(\n                  'p[class*=\"__error\"]:not([style*=\"display\"][style*=\"none\"]):not(.retailer-callback-polymer__error-description)'\n                );\n                if (errros.length > 0) {\n                  obj.eventInfo.error = 'form is incomplete';\n                  obj.eventInfo.code = '1';\n                  formError(obj);\n                }\n              }, 1500);\n              break;\n\n            case 'RetailerCallbackFromError':\n              formError(obj);\n              break;\n\n            case 'RetailerCallbackFromSuccess':\n              formSuccess(obj);\n              break;\n\n            default:\n              break;\n          }\n        });\n\n        window.setUpVWRetailerCallback = true;\n\n        \/\/ sometimes Qubit\/Matomo misses the first event fired\n        if (window.vwDataLayer.event.length !== 0) {\n          var obj = window.vwDataLayer.event[window.vwDataLayer.event.length - 1];\n          formPageload(obj);\n        }\n      }\n\n      \/\/ initialise Retailer Callback data collection\n      if (!window.setUpVWRetailerCallback) {\n        setUpTracking();\n      }\n    }); \/\/ end jQuery ready\n  })(jQuery);\n<\/script>\n","htmlPosition":"bodyEnd"},"blockTriggerIds":[],"fireTriggerIds":[25839],"fireLimit":"unlimited","fireDelay":0,"startDate":null,"endDate":null,"Tag":"CustomHtmlTag"}],"triggers":[{"id":25785,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"3000\/pages-d6\/t12__online-service-booking.htm"}],"Trigger":"WindowLoadedTrigger"},{"id":25786,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"regexp","expected":".+"}],"Trigger":"WindowLoadedTrigger"},{"id":25787,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/pdb"}],"Trigger":"WindowLoadedTrigger"},{"id":25788,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/owners\/accessories"}],"Trigger":"WindowLoadedTrigger"},{"id":25789,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"regexp","expected":"owners\/accessories\/\\d.+"}],"Trigger":"WindowLoadedTrigger"},{"id":25790,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"owners-and-drivers\/my-car\/manuals"}],"Trigger":"WindowLoadedTrigger"},{"id":25791,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/owners-and-drivers\/service-booking"}],"Trigger":"WindowLoadedTrigger"},{"id":25792,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"regexp","expected":"retailers\\\/\\d*"}],"Trigger":"WindowLoadedTrigger"},{"id":25793,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/used-cars\/part-exchange"}],"Trigger":"WindowLoadedTrigger"},{"id":25794,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/perfect\/app"}],"Trigger":"WindowLoadedTrigger"},{"id":25795,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"disabled-tag-do-not-change"}],"Trigger":"WindowLoadedTrigger"},{"id":25796,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/which-model-compare"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"equals_exactly","expected":"disabled-xxxxxxx"}],"Trigger":"WindowLoadedTrigger"},{"id":25797,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/order-a-brochure"}],"Trigger":"WindowLoadedTrigger"},{"id":25798,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"regexp_ignore_case","expected":"vwcloud.co.uk\\\/.+"}],"Trigger":"WindowLoadedTrigger"},{"id":25799,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/finance-calculator"}],"Trigger":"WindowLoadedTrigger"},{"id":25800,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/offers-and-finance"}],"Trigger":"WindowLoadedTrigger"},{"id":25801,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"regexp","expected":"\/new\/.+\/which-model-compare"}],"Trigger":"WindowLoadedTrigger"},{"id":25802,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/need-help\/need-help-faqs"}],"Trigger":"WindowLoadedTrigger"},{"id":25803,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/fleet\/request-a-test-drive"}],"Trigger":"WindowLoadedTrigger"},{"id":25804,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"fleet\/get-in-touch\/contact-us"}],"Trigger":"WindowLoadedTrigger"},{"id":25805,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"t12__fleet-tools--whole-life-costs"}],"Trigger":"WindowLoadedTrigger"},{"id":25806,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/fleet\/whole-life-costs"}],"Trigger":"WindowLoadedTrigger"},{"id":25807,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"vwcloud.co.uk"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/perfect\/app"}],"Trigger":"WindowLoadedTrigger"},{"id":25808,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/fleet\/compare-residual-values"}],"Trigger":"WindowLoadedTrigger"},{"id":25809,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"equals_exactly","expected":"disabled"}],"Trigger":"WindowLoadedTrigger"},{"id":25810,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"regexp","expected":"testing-images"}],"Trigger":"WindowLoadedTrigger"},{"id":25811,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/cost-of-running-your-car"}],"Trigger":"WindowLoadedTrigger"},{"id":25812,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/book-a-test-drive"}],"Trigger":"WindowLoadedTrigger"},{"id":25813,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/fleet\/company-car-tax-calculator"}],"Trigger":"WindowLoadedTrigger"},{"id":25814,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/dimensions"}],"Trigger":"WindowLoadedTrigger"},{"id":25815,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"t29__dimensions.html"}],"Trigger":"WindowLoadedTrigger"},{"id":25816,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"localhost:1937"}],"Trigger":"WindowLoadedTrigger"},{"id":25817,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"t16__financial-calculator"}],"Trigger":"WindowLoadedTrigger"},{"id":25818,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/sign-up"}],"Trigger":"WindowLoadedTrigger"},{"id":25819,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"waiting-list"}],"Trigger":"WindowLoadedTrigger"},{"id":25820,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":":3000\/pages-d6\/t27__kmi"}],"Trigger":"WindowLoadedTrigger"},{"id":25821,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/newsletter"}],"Trigger":"WindowLoadedTrigger"},{"id":25822,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/keep-me-informed"}],"Trigger":"WindowLoadedTrigger"},{"id":25823,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/volkswagen-sign-up"}],"Trigger":"WindowLoadedTrigger"},{"id":25824,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"vwcloud.co.uk\/owners\/my"}],"Trigger":"WindowLoadedTrigger"},{"id":25825,"type":"DomReady","name":"DomReady","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"regexp","expected":".+"}],"Trigger":"DomReadyTrigger"},{"id":25826,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/offers-and-finance"}],"Trigger":"WindowLoadedTrigger"},{"id":25827,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/book-a-test-drive"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"disabled"}],"Trigger":"WindowLoadedTrigger"},{"id":25828,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/owners-and-drivers\/accessories-and-merchandise\/accessories"}],"Trigger":"WindowLoadedTrigger"},{"id":25829,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"owners-and-drivers\/accessories-and-merchandise\/accessories"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"not_regexp","expected":"owners-and-drivers\/accessories-and-merchandise\/accessories\/.+"}],"Trigger":"WindowLoadedTrigger"},{"id":25830,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/order-a-brochure"}],"Trigger":"WindowLoadedTrigger"},{"id":25831,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"regexp","expected":"owners-and-drivers\\\/accessories-and-merchandise\\\/accessories\\\/.+"}],"Trigger":"WindowLoadedTrigger"},{"id":25832,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/finance-calculator"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"not_contains","expected":"www-vw10.vwcloud.co.uk"}],"Trigger":"WindowLoadedTrigger"},{"id":25833,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"equals_exactly","expected":"disabled-xxxxxxxx"}],"Trigger":"WindowLoadedTrigger"},{"id":25834,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[],"Trigger":"WindowLoadedTrigger"},{"id":25835,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"disabled-tag-do-not-change"}],"Trigger":"WindowLoadedTrigger"},{"id":25836,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"disabled-tag-do-not-change"}],"Trigger":"WindowLoadedTrigger"},{"id":25837,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/which-model-compare\/details\/"}],"Trigger":"WindowLoadedTrigger"},{"id":25838,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"t28__rs-callback-form"}],"Trigger":"WindowLoadedTrigger"},{"id":25839,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/need-help\/contact-me"}],"Trigger":"WindowLoadedTrigger"},{"id":25840,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"ends_with","expected":"\/finance-offers-and-fleet"}],"Trigger":"WindowLoadedTrigger"},{"id":25841,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/finance-offers-and-fleet\/new-car-deals"}],"Trigger":"WindowLoadedTrigger"},{"id":25842,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/finance-offers-and-fleet?opentag_debug_tool"}],"Trigger":"WindowLoadedTrigger"},{"id":25843,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/new-golf-r-sign-up"}],"Trigger":"WindowLoadedTrigger"},{"id":25844,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"www-vw10.vwcloud.co.uk"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"finance-calculator"}],"Trigger":"WindowLoadedTrigger"},{"id":25845,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/finance-calculator"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"www-vw10.vwcloud.co.uk"}],"Trigger":"WindowLoadedTrigger"},{"id":25846,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/finance-calculator"}],"Trigger":"WindowLoadedTrigger"},{"id":25847,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"www-vw10.vwcloud.co.uk"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/pdb"}],"Trigger":"WindowLoadedTrigger"},{"id":25848,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/pdb"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"not_contains","expected":"www-vw10.vwcloud.co.uk"}],"Trigger":"WindowLoadedTrigger"},{"id":25849,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"vwcloud.co.uk"},{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/owners-and-drivers\/my"}],"Trigger":"WindowLoadedTrigger"},{"id":25850,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"http:\/\/localhost:1937\/"}],"Trigger":"WindowLoadedTrigger"},{"id":25851,"type":"DomReady","name":"DomReady","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"polo\/which-model-compare\/details"}],"Trigger":"DomReadyTrigger"},{"id":25852,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"\/request-a-virtual-appointment"}],"Trigger":"WindowLoadedTrigger"},{"id":25853,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"vwcloud.co.uk\/used-cars\/part-exchange"}],"Trigger":"WindowLoadedTrigger"},{"id":25854,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"localhost"}],"Trigger":"WindowLoadedTrigger"},{"id":25855,"type":"WindowLoaded","name":"WindowLoaded","parameters":[],"conditions":[{"actual":{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"},"comparison":"contains","expected":"vw10.vwcloud.co.uk\/need-help\/contact-me"}],"Trigger":"WindowLoadedTrigger"}],"variables":[{"name":"PageUrl","type":"PageUrl","lookUpTable":[],"defaultValue":null,"parameters":[],"Variable":"PageUrlVariable"}]}, Templates);})()
})();
