/*! For license information please see widget-loader.min.js.LICENSE */
!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=".",n(n.s=541)}({10:function(e,t,n){"use strict";var a=n(13),i=arguments;function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var c,u=function(e){return window.setTimeout(e,1e3/60)},l=0;function d(e,t){do{l===e?l=0:l+=1}while(Object.prototype.hasOwnProperty.call(t,l));return l}var f=function(){var e;if(window.Worker&&window.Blob&&!a.a.ieVersion)try{var t={},n=new Blob(['e={};onmessage=function(a){var t,r=a.data,s=r.name,n=r.fakeId;switch(r.hasOwnProperty("time")&&(t=r.time),s){case"setInterval":e[n]=setInterval(function(){postMessage({fakeId:n})},t);break;case"clearInterval":e.hasOwnProperty(n)&&(clearInterval(e[n]),delete e[n]);break;case"setTimeout":e[n]=setTimeout(function(){postMessage({fakeId:n}),e.hasOwnProperty(n)&&delete e[n]},t);break;case"clearTimeout":e.hasOwnProperty(n)&&(clearTimeout(e[n]),delete e[n])}}']),r=window.URL.createObjectURL(n);(c=new Worker(r)).onmessage=function(e){var n,a,i,r=e.data.fakeId;Object.prototype.hasOwnProperty.call(t,r)&&(i=(n=t[r]).callback,a=n.parameters,Object.prototype.hasOwnProperty.call(n,"isTimeout")&&n.isTimeout&&delete t[r]),"function"==typeof i&&i.apply(window,a)},c.onerror=function(e){},e={setInterval:function(e,n){var a=d(2147483647,t);return t[a]={callback:e,parameters:Array.prototype.slice.call(i,2)},c.postMessage({name:"setInterval",fakeId:a,time:n}),a},clearInterval:function(e){Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],c.postMessage({name:"clearInterval",fakeId:e}))},setTimeout:function(e,n){var a=d(2147483647,t);return t[a]={callback:e,parameters:Array.prototype.slice.call(i,2),isTimeout:!0},c.postMessage({name:"setTimeout",fakeId:a,time:n}),a},clearTimeout:function(e){Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],c.postMessage({name:"clearTimeout",fakeId:e}))}}}catch(e){}return e},p=f(),h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||u,v=function(){function e(){r(this,e)}return s(e,[{key:"requestInterval",value:function(e,t){if(p)return p.setInterval(e,t);if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(e,t);var n=(new Date).getTime();return h((function a(){(new Date).getTime()-n>=t&&(e.call(),n=(new Date).getTime()),h(a)}))}},{key:"clearRequestInterval",value:function(e){p?p.clearInterval(e):window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e):window.clearInterval(e)}},{key:"requestTimeout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(p)return p.setTimeout(e,t);if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,t);var n=(new Date).getTime(),a=function a(){(new Date).getTime()-n>=t?e.call():h(a)};return h(a)}},{key:"clearRequestTimeout",value:function(e){p?p.clearTimeout(e):window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e):window.clearTimeout(e)}}]),e}();t.a=new v},11:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isObject=function(e){return"object"===a(e)&&null!==e&&!t.isArray(e)},this.isString=function(e){return"string"==typeof e},this.isNumber=function(e){return"number"==typeof e},this.isArray=Array.isArray,this.isBoolean=function(e){return"boolean"==typeof e},this.isFunction=function(e){return"function"==typeof e}}},12:function(e,t,n){"use strict";t.a={ACTIONS:{SEND:"send",SAVE:"save",CLOSE:"close"},CARD_STATE:{INVITED:"invited",OPENING:"opening",OPEN:"open",SUBMIT:"submit",CANCEL:"cancel",CLOSING:"closing",CLOSE:"close",ERROR:"error",SUBMIT_ERROR:"submit_error",SUBMIT_SUCCESS:"submit_success",EXPIRED:"expired"},CARD_TYPES:{SLIDING:"sliding",OVERLAY:"overlay",INLINE:"inline",SLIDINGPLUS:"slidingplus",CUSTOM:"custom"},CARD_ACTIONS:{ACCEPT:"accept",DECLINE:"decline",PREVIOUS:"previous",NEXT:"next",INIT:"init"},SERVICE_CHANNEL:{CHAT:"chat",MESSAGING:"messaging"},MESSENGER_TYPE:{STANDARD:"standard"},SECURE_CARD_STORAGE_MODES:{INTERNAL:"internal",THIRD_PARTY:"third-party"},DEFAULT_PAGE_INDEX:0}},13:function(e,t,n){"use strict";(function(e,n){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){var t="function"==typeof Map?new Map:void 0;return(r=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return o(e,arguments,u(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),c(a,e)})(e)}function o(e,t,n){return(o=s()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&c(i,n.prototype),i}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(){},f=window;var p=function(e){if(!f&&"object"===l(n)&&n.exports)return{ieVersion:-1,safariVersion:-1,chromeVersion:-1,isMobileSafari:!1,isAndroidTablet:!1,isAndroid:!1,isIpad:!1,isTablet:!1,iosVersion:-1,isPhone:!1,getDevice:"unknown"};var t,a,i=/.*Trident.*rv:(\d+)/,r=/Edge\/(\d+)\./,o=function(){var t,n,a=function(){var e,t=3,n=document.createElement("div");do{t+=1,n.innerHTML="\x3c!--[if gt IE ".concat(t,"]><i></i><![endif]--\x3e"),e=n.getElementsByTagName("i")}while(e[0]);return t>4?t:void 0}();return a||(f.ActiveXObject?10:((n=i.exec(e))&&(t=parseInt(n[1],10)),(n=r.exec(e))&&(t=parseInt(n[1],10)),t))}();/Safari\/([0-9.]+)/.test(e)&&/Version\/([0-9.]+)/.test(e)&&(t=RegExp.$1),/Chrome\/([0-9.]+)/.test(e)&&(a=RegExp.$1,t=void 0),o&&(document.documentElement.className+=" ie".concat(o));var s=-1!==e.indexOf("AppleWebKit")&&e.match(/(iPod|iPhone|iPad)/),c=-1!==e.indexOf("Android"),u=c&&-1===e.indexOf("Mobile"),d=e.match(/(Macintosh)/),p=s&&"iPad"===s[0]||d&&navigator.maxTouchPoints>0,h=u||p,v=(c||s)&&!h,g=e.match(/OS (\d+)_(\d+)_?(\d+)?/),E=s&&g&&g.length>1?parseInt(g[1],10):0,m=e.indexOf("Android")>=0?parseInt(e.slice(e.indexOf("Android")+8),10):0,y=function(e){return!!e};return{ieVersion:o,safariVersion:t,chromeVersion:a,isMobileSafari:y(s),isAndroidTablet:u,isAndroid:c,isIpad:y(p),isTablet:y(h),iosVersion:E,androidVersion:m,isPhone:y(v),isMac:y(d),getDevice:function(){var e="desktop";return v&&(e="phone"),h&&(e="tablet"),e}}},h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,r=(t=o,n=s(),function(){var e,a=u(t);if(n){var r=u(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return i(this,e)});function o(e){var t;return a(this,o),(t=r.call(this)).message=e,t.name="InvalidCharacterError",t}return o}(r(Error));t.a=new function t(){return a(this,t),f&&function(){if(!f.location.origin){var t=f.location.port,n="";t&&"80"!==t&&"443"!==t&&(n=":".concat(t)),f.location.origin="".concat(f.location.protocol,"//").concat(f.location.hostname).concat(n)}f.console||(f.console={log:d,debug:d,warn:d,error:d}),f.onbeforeunload||(f.onbeforeunload=d),document.head||(document.head=document.getElementsByTagName("head")[0]),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var a=e.Element?"Element":"HTMLElement";if(!("dataset"in document.createElement("span"))&&a in e&&e[a].prototype&&Object.defineProperty&&Object.defineProperty(e[a].prototype,"dataset",{get:function(){for(var e=Object.create(null),t=0;t<this.attributes.length;++t){var n=this.attributes[t];n.specified&&"data-"===n.name.substring(0,5)&&function(t,n){var a=n.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));e[a]=t.getAttribute("data-".concat(n)),Object.defineProperty(e,a,{get:function(){return t.getAttribute("data-".concat(n))},set:function(e){t.setAttribute("data-".concat(n),e)}})}(this,n.name.substring(5))}return e}}),f.NodeList&&!f.NodeList.prototype.forEach&&(f.NodeList.prototype.forEach=f.Array.prototype.forEach),"function"!=typeof f.CustomEvent){var i=function(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),a};i.prototype=f.Event.prototype,f.CustomEvent=i}if(!f.atob&&!f.btoa){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.btoa=function(e){for(var t,n,a=String(e),i=0,o=r,s="";a.charAt(0|i)||(o="=",i%1);s+=o.charAt(63&t>>8-i%1*8)){if((n=a.charCodeAt(i+=3/4))>255)throw new h("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return s},f.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new h("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,a,i=0,o=0,s="";a=t.charAt(o++);~a&&(n=i%4?64*n+a:a,i++%4)?s+=String.fromCharCode(255&n>>(-2*i&6)):0)a=r.indexOf(a);return s}}}(),p(f.navigator.userAgent)}}).call(this,n(61),n(90)(e))},132:function(e,t,n){"use strict";var a=n(3),i=n(5),r=n(11),o=n(4),s=n(8),c=n(13),u=n(38),l=n(10),d=n(147);function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=["localStorage","sessionStorage"],h=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1===p.indexOf(t))throw new Error("WebStorage: ".concat(t," is not supported"));if(this._storeName=t,this._store=window[t],this._storageKey=n,!this.isStorageAvailable())throw new Error(i.a.ERROR_CODES.LOCALSTORAGE_UNAVAILABLE);this._storeExists()||this._initialize()}var t,n,h;return t=e,(n=[{key:"_storeExists",value:function(){return!!this._store.getItem(this._storageKey)}},{key:"_initialize",value:function(){var e={};e[i.a.LAST_UPDATED_TIME]=(new Date).getTime(),this._store.setItem(this._storageKey,u.a.encode(JSON.stringify(e)))}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.a.notEmpty(e,"WebStorage: set key");var o=this.getAll()||{};if(this._pollOldValue=o,r.a.isObject(t))o[e]||(o[e]={}),o[e]=Object(s.a)({},o[e],t);else if(r.a.isString(t)||r.a.isArray(t))o[e]=t;else{if(!r.a.isBoolean(t)&&!r.a.isNumber(t))throw new Error('WebStorage::set type-mismatch for "'.concat(t,'", expecting object, string, boolean, array or number'));o[e]=t.toString()}o[i.a.LAST_UPDATED_TIME]=(new Date).getTime(),n.tabId&&(o[i.a.SOURCE]=n.tabId),this._store.setItem(this._storageKey,u.a.encode(JSON.stringify(o)))}},{key:"getAll",value:function(){var e,t=this._store.getItem(this._storageKey);if(t)try{e=JSON.parse(u.a.decode(t))}catch(e){}return e}},{key:"get",value:function(e){return a.a.notEmpty(e,"WebStorage: key"),this.getAll()[e]}},{key:"remove",value:function(e,t){var n=this.getAll()||{};t&&t.length>0?n[e]=o.a.removeSpecificKeys(n[e],t):n[e]={},this._store.setItem(this._storageKey,u.a.encode(JSON.stringify(n)))}},{key:"addStorageListener",value:function(e){var t=this;c.a.ieVersion&&9!==c.a.isVersion?this._pollForStorage(e):window.addEventListener("storage",(function(n){if(n.key===t._storageKey)try{var a=JSON.parse(u.a.decode(n.oldValue))||{},i=JSON.parse(u.a.decode(n.newValue))||{};e({key:t._storageKey,oldValue:a,newValue:i})}catch(e){}}))}},{key:"_pollForStorage",value:function(e){var t=this;l.a.requestTimeout((function(){try{t._store.setItem("tfs-ie11","1"),t._store.removeItem("tfs-ie11"),JSON.stringify(t._pollOldValue)!==JSON.stringify(t.getAll())&&(e({newValue:t.getAll()||{},oldValue:t._pollOldValue||{},key:t._storageKey}),t._pollOldValue=t.getAll())}catch(e){}t._pollForStorage(e)}),500)}},{key:"isStorageAvailable",value:function(){return d.a[this._storeName]}}])&&f(t.prototype,n),h&&f(t,h),e}();t.a=h},137:function(e,t,n){"use strict";t.a={BUCKETS:["a","b"],KEY_MAP:[{key:"chat.visitorSessionId",length:45,type:"string",short:"a",bucket:"a"},{key:"chat.stackName",length:1,type:"string",short:"b",bucket:"a"},{key:"chat.stackNodesStart",length:2,type:"number",short:"c",bucket:"a"},{key:"chat.stackNodesEnd",length:2,type:"number",short:"d",bucket:"a"},{key:"va.turnsId",length:36,type:"string",short:"e",bucket:"a"},{key:"va.noInput",short:"f",length:1,type:"boolean",bucket:"a"},{key:"va.poller",short:"g",length:1,type:"boolean",bucket:"a"},{key:"va.vaSurveyCompleted",length:1,type:"boolean",short:"h",bucket:"a"},{key:"messaging.brandUserId",length:36,type:"string",short:"i",bucket:"a"},{key:"cards.currentCardId",length:45,type:"string",short:"k",bucket:"a"},{key:"widgetLoaded",length:1,type:"boolean",short:"l",bucket:"a"},{key:"initialWorkflow",length:9,type:"string",short:"m",bucket:"a"},{key:"reload",length:1,type:"boolean",short:"n",bucket:"a"},{key:"displayMode",length:10,type:"string",short:"o",bucket:"a"},{key:"asid",length:3,type:"string",short:"p",bucket:"a"},{key:"appId",length:40,type:"string",short:"q",bucket:"a"},{key:"notificationOptIn",length:1,type:"boolean",short:"r",bucket:"a"},{key:"chat.interactionId",length:45,type:"string",short:"s",bucket:"a"},{key:"chat.authToken",length:45,type:"string",short:"t",bucket:"a"},{key:"app.context.sourceCat",length:80,type:"string",short:"u",bucket:"a"},{key:"messaging.interactionStatus",length:6,type:"string",short:"v",bucket:"a"},{key:"chat.surveyCompleted",length:1,type:"boolean",short:"w",bucket:"a"},{key:"vi",length:36,type:"string",short:"a",bucket:"b"},{key:"app.context.queue",length:80,type:"string",short:"b",bucket:"b"},{key:"app.context.accountId",length:40,type:"string",short:"c",bucket:"b"},{key:"app.context.appInteractionId",length:36,type:"string",short:"d",bucket:"b"},{key:"app.context.rc",length:40,type:"string",short:"e",bucket:"b"},{key:"app.context.sc",length:40,type:"string",short:"f",bucket:"b"},{key:"app.context.dockId",length:40,type:"string",short:"g",bucket:"b"},{key:"cards.submittedCards.0",length:45,type:"string",short:"h",bucket:"b"},{key:"cards.submittedCards.1",length:45,type:"string",short:"i",bucket:"b"}],STIMULI_KEYS:["currentCardId","submittedCards","surveyCompleted","turnsId","vaSurveyCompleted","visitorSessionId","interactionStatus","brandUserId"]}},138:function(e,t,n){e.exports=function(){"use strict";var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,a=Object.getPrototypeOf,i=Object.getOwnPropertyDescriptor,r=Object.freeze,o=Object.seal,s=Object.create,c="undefined"!=typeof Reflect&&Reflect,u=c.apply,l=c.construct;u||(u=function(e,t,n){return e.apply(t,n)}),r||(r=function(e){return e}),o||(o=function(e){return e}),l||(l=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var d,f=T(Array.prototype.forEach),p=T(Array.prototype.pop),h=T(Array.prototype.push),v=T(String.prototype.toLowerCase),g=T(String.prototype.match),E=T(String.prototype.replace),m=T(String.prototype.indexOf),y=T(String.prototype.trim),_=T(RegExp.prototype.test),I=(d=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l(d,t)});function T(e){return function(t){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return u(e,t,a)}}function b(e,a){t&&t(e,null);for(var i=a.length;i--;){var r=a[i];if("string"==typeof r){var o=v(r);o!==r&&(n(a)||(a[i]=o),r=o)}e[r]=!0}return e}function S(t){var n=s(null),a=void 0;for(a in t)u(e,t,[a])&&(n[a]=t[a]);return n}function O(e,t){for(;null!==e;){var n=i(e,t);if(n){if(n.get)return T(n.get);if("function"==typeof n.value)return T(n.value)}e=a(e)}return null}var A=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),w=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),k=r(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),N=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),D=r(["#text"]),L=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),M=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),x=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=o(/\{\{[\s\S]*|[\s\S]*\}\}/gm),U=o(/<%[\s\S]*|[\s\S]*%>/gm),j=o(/^data-[\-\w.\u00B7-\uFFFF]/),H=o(/^aria-[\-\w]+$/),B=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=o(/^(?:\w+script|data):/i),Y=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function W(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var K=function(){return"undefined"==typeof window?null:window},q=function(e,t){if("object"!==(void 0===e?"undefined":V(e))||"function"!=typeof e.createPolicy)return null;var n=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML:function(e){return e}})}catch(e){return null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(),n=function(t){return e(t)};if(n.version="2.2.6",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var a=t.document,i=t.document,o=t.DocumentFragment,s=t.HTMLTemplateElement,c=t.Node,u=t.Element,l=t.NodeFilter,d=t.NamedNodeMap,T=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,z=t.Text,X=t.Comment,Z=t.DOMParser,J=t.trustedTypes,Q=u.prototype,$=O(Q,"cloneNode"),ee=O(Q,"nextSibling"),te=O(Q,"childNodes"),ne=O(Q,"parentNode");if("function"==typeof s){var ae=i.createElement("template");ae.content&&ae.content.ownerDocument&&(i=ae.content.ownerDocument)}var ie=q(J,a),re=ie&&Fe?ie.createHTML(""):"",oe=i,se=oe.implementation,ce=oe.createNodeIterator,ue=oe.getElementsByTagName,le=oe.createDocumentFragment,de=a.importNode,fe={};try{fe=S(i).documentMode?i.documentMode:{}}catch(e){}var pe={};n.isSupported=se&&void 0!==se.createHTMLDocument&&9!==fe;var he=F,ve=U,ge=j,Ee=H,me=G,ye=Y,_e=B,Ie=null,Te=b({},[].concat(W(A),W(w),W(C),W(R),W(D))),be=null,Se=b({},[].concat(W(L),W(M),W(P),W(x))),Oe=null,Ae=null,we=!0,Ce=!0,ke=!1,Re=!1,Ne=!1,De=!1,Le=!1,Me=!1,Pe=!1,xe=!0,Fe=!1,Ue=!0,je=!0,He=!1,Be={},Ge=b({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ye=null,Ve=b({},["audio","video","img","source","image","track"]),We=null,Ke=b({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),qe=null,ze=i.createElement("form"),Xe=function(e){qe&&qe===e||(e&&"object"===(void 0===e?"undefined":V(e))||(e={}),e=S(e),Ie="ALLOWED_TAGS"in e?b({},e.ALLOWED_TAGS):Te,be="ALLOWED_ATTR"in e?b({},e.ALLOWED_ATTR):Se,We="ADD_URI_SAFE_ATTR"in e?b(S(Ke),e.ADD_URI_SAFE_ATTR):Ke,Ye="ADD_DATA_URI_TAGS"in e?b(S(Ve),e.ADD_DATA_URI_TAGS):Ve,Oe="FORBID_TAGS"in e?b({},e.FORBID_TAGS):{},Ae="FORBID_ATTR"in e?b({},e.FORBID_ATTR):{},Be="USE_PROFILES"in e&&e.USE_PROFILES,we=!1!==e.ALLOW_ARIA_ATTR,Ce=!1!==e.ALLOW_DATA_ATTR,ke=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=e.SAFE_FOR_TEMPLATES||!1,Ne=e.WHOLE_DOCUMENT||!1,Me=e.RETURN_DOM||!1,Pe=e.RETURN_DOM_FRAGMENT||!1,xe=!1!==e.RETURN_DOM_IMPORT,Fe=e.RETURN_TRUSTED_TYPE||!1,Le=e.FORCE_BODY||!1,Ue=!1!==e.SANITIZE_DOM,je=!1!==e.KEEP_CONTENT,He=e.IN_PLACE||!1,_e=e.ALLOWED_URI_REGEXP||_e,Re&&(Ce=!1),Pe&&(Me=!0),Be&&(Ie=b({},[].concat(W(D))),be=[],!0===Be.html&&(b(Ie,A),b(be,L)),!0===Be.svg&&(b(Ie,w),b(be,M),b(be,x)),!0===Be.svgFilters&&(b(Ie,C),b(be,M),b(be,x)),!0===Be.mathMl&&(b(Ie,R),b(be,P),b(be,x))),e.ADD_TAGS&&(Ie===Te&&(Ie=S(Ie)),b(Ie,e.ADD_TAGS)),e.ADD_ATTR&&(be===Se&&(be=S(be)),b(be,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&b(We,e.ADD_URI_SAFE_ATTR),je&&(Ie["#text"]=!0),Ne&&b(Ie,["html","head","body"]),Ie.table&&(b(Ie,["tbody"]),delete Oe.tbody),r&&r(e),qe=e)},Ze=b({},["mi","mo","mn","ms","mtext"]),Je=b({},["foreignobject","desc","title","annotation-xml"]),Qe=b({},w);b(Qe,C),b(Qe,k);var $e=b({},R);b($e,N);var et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",nt="http://www.w3.org/1999/xhtml",at=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:nt,tagName:"template"});var n=v(e.tagName),a=v(t.tagName);if(e.namespaceURI===tt)return t.namespaceURI===nt?"svg"===n:t.namespaceURI===et?"svg"===n&&("annotation-xml"===a||Ze[a]):Boolean(Qe[n]);if(e.namespaceURI===et)return t.namespaceURI===nt?"math"===n:t.namespaceURI===tt?"math"===n&&Je[a]:Boolean($e[n]);if(e.namespaceURI===nt){if(t.namespaceURI===tt&&!Je[a])return!1;if(t.namespaceURI===et&&!Ze[a])return!1;var i=b({},["title","style","font","a","script"]);return!$e[n]&&(i[n]||!Qe[n])}return!1},it=function(e){h(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=re}catch(t){e.remove()}}},rt=function(e,t){try{h(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){h(n.removed,{attribute:null,from:t})}t.removeAttribute(e)},ot=function(e){var t=void 0,n=void 0;if(Le)e="<remove></remove>"+e;else{var a=g(e,/^[\r\n\t ]+/);n=a&&a[0]}var r=ie?ie.createHTML(e):e;try{t=(new Z).parseFromString(r,"text/html")}catch(e){}if(!t||!t.documentElement){var o=(t=se.createHTMLDocument("")).body;o.parentNode.removeChild(o.parentNode.firstElementChild),o.outerHTML=r}return e&&n&&t.body.insertBefore(i.createTextNode(n),t.body.childNodes[0]||null),ue.call(t,Ne?"html":"body")[0]},st=function(e){return ce.call(e.ownerDocument||e,e,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,(function(){return l.FILTER_ACCEPT}),!1)},ct=function(e){return!(e instanceof z||e instanceof X||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof T&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},ut=function(e){return"object"===(void 0===c?"undefined":V(c))?e instanceof c:e&&"object"===(void 0===e?"undefined":V(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},lt=function(e,t,a){pe[e]&&f(pe[e],(function(e){e.call(n,t,a,qe)}))},dt=function(e){var t=void 0;if(lt("beforeSanitizeElements",e,null),ct(e))return it(e),!0;if(g(e.nodeName,/[\u0080-\uFFFF]/))return it(e),!0;var a=v(e.nodeName);if(lt("uponSanitizeElement",e,{tagName:a,allowedTags:Ie}),!ut(e.firstElementChild)&&(!ut(e.content)||!ut(e.content.firstElementChild))&&_(/<[/\w]/g,e.innerHTML)&&_(/<[/\w]/g,e.textContent))return it(e),!0;if(!Ie[a]||Oe[a]){if(je&&!Ge[a])for(var i=ne(e),r=te(e),o=r.length-1;o>=0;--o)i.insertBefore($(r[o],!0),ee(e));return it(e),!0}return e instanceof u&&!at(e)?(it(e),!0):"noscript"!==a&&"noembed"!==a||!_(/<\/no(script|embed)/i,e.innerHTML)?(Re&&3===e.nodeType&&(t=e.textContent,t=E(t,he," "),t=E(t,ve," "),e.textContent!==t&&(h(n.removed,{element:e.cloneNode()}),e.textContent=t)),lt("afterSanitizeElements",e,null),!1):(it(e),!0)},ft=function(e,t,n){if(Ue&&("id"===t||"name"===t)&&(n in i||n in ze))return!1;if(Ce&&_(ge,t));else if(we&&_(Ee,t));else{if(!be[t]||Ae[t])return!1;if(We[t]);else if(_(_e,E(n,ye,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==m(n,"data:")||!Ye[e])if(ke&&!_(me,E(n,ye,"")));else if(n)return!1}return!0},pt=function(e){var t=void 0,a=void 0,i=void 0,r=void 0;lt("beforeSanitizeAttributes",e,null);var o=e.attributes;if(o){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};for(r=o.length;r--;){var c=t=o[r],u=c.name,l=c.namespaceURI;if(a=y(t.value),i=v(u),s.attrName=i,s.attrValue=a,s.keepAttr=!0,s.forceKeepAttr=void 0,lt("uponSanitizeAttribute",e,s),a=s.attrValue,!s.forceKeepAttr&&(rt(u,e),s.keepAttr))if(_(/\/>/i,a))rt(u,e);else{Re&&(a=E(a,he," "),a=E(a,ve," "));var d=e.nodeName.toLowerCase();if(ft(d,i,a))try{l?e.setAttributeNS(l,u,a):e.setAttribute(u,a),p(n.removed)}catch(e){}}}lt("afterSanitizeAttributes",e,null)}},ht=function e(t){var n=void 0,a=st(t);for(lt("beforeSanitizeShadowDOM",t,null);n=a.nextNode();)lt("uponSanitizeShadowNode",n,null),dt(n)||(n.content instanceof o&&e(n.content),pt(n));lt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var r=void 0,s=void 0,u=void 0,l=void 0,d=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!ut(e)){if("function"!=typeof e.toString)throw I("toString is not a function");if("string"!=typeof(e=e.toString()))throw I("dirty is not a string, aborting")}if(!n.isSupported){if("object"===V(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(ut(e))return t.toStaticHTML(e.outerHTML)}return e}if(De||Xe(i),n.removed=[],"string"==typeof e&&(He=!1),He);else if(e instanceof c)1===(s=(r=ot("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!Me&&!Re&&!Ne&&-1===e.indexOf("<"))return ie&&Fe?ie.createHTML(e):e;if(!(r=ot(e)))return Me?null:re}r&&Le&&it(r.firstChild);for(var f=st(He?e:r);u=f.nextNode();)3===u.nodeType&&u===l||dt(u)||(u.content instanceof o&&ht(u.content),pt(u),l=u);if(l=null,He)return e;if(Me){if(Pe)for(d=le.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return xe&&(d=de.call(a,d,!0)),d}var p=Ne?r.outerHTML:r.innerHTML;return Re&&(p=E(p,he," "),p=E(p,ve," ")),ie&&Fe?ie.createHTML(p):p},n.setConfig=function(e){Xe(e),De=!0},n.clearConfig=function(){qe=null,De=!1},n.isValidAttribute=function(e,t,n){qe||Xe({});var a=v(e),i=v(t);return ft(a,i,n)},n.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],h(pe[e],t))},n.removeHook=function(e){pe[e]&&p(pe[e])},n.removeHooks=function(e){pe[e]&&(pe[e]=[])},n.removeAllHooks=function(){pe={}},n}()}()},139:function(e,t,n){"use strict";var a=n(15),i=n(3),r=n(17),o=n(4);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=window,u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chatConfig=t,this._trackingIdMap={}}var t,n,u;return t=e,(n=[{key:"check",value:function(e,t,n){this._makeServerCall(e,t,n)}},{key:"getTrackingId",value:function(e){return this._trackingIdMap[e]}},{key:"_makeServerCall",value:function(e,t,n){var a=this._getCallbackName("_tfs_"),i=this._chatConfig,s=i.overrideCaStatus,u=i.overrideQueue,l=e;u&&(l=u);var d=this._getResponseHandler(a,l,n);if(c[a]=d,o.a.isUndefinedOrNull(s))r.a.injectScript(this._getURL(a,l,t),(function(e){}),document,{id:a},3e4);else{var f={data:{caStatus:s}};!0===s&&(f.data.trackingId="DEBUG01$12345"),d(f)}}},{key:"_getCallbackName",value:function(e){return e+a.a.get(10)}},{key:"_getResponseHandler",value:function(e,t,n){var a=this;return function(i){var r,o="false";i&&i.data&&(i.data.caStatus&&(o=i.data.caStatus),(r=i.data.trackingId)&&(a._trackingIdMap[t]=r));var s=document.getElementById(e);s&&s.parentNode.removeChild(s);try{delete c[e]}catch(t){c[e]=void 0}n(o,{trackingId:r})}}},{key:"_getURL",value:function(e,t,n){i.a.notEmpty(e,"callback name"),i.a.notEmpty(t,"queue");var a=this._chatConfig,r=a.assistCAEndpoint,o=a.assistAccountId,s="".concat(r,"/rest/checkAvailability?"),c={queueId:t,accountId:o,jsonp:e};n&&(c.skillId=n);var u=this.getTrackingId(t);return u&&(c.trackingId=u),s+Object.keys(c).map((function(e){return"".concat(e,"=").concat(c[e])})).join("&")}}])&&s(t.prototype,n),u&&s(t,u),e}(),l=n(19),d=n(8),f=n(54),p=n(10),h=n(20);function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=l.a.STATE,E=[g.MAXIMIZED,g.MINIMIZED],m=window;function y(e,t,n,a){return e["".concat(e.device,".").concat(t,".").concat(n)]||e["".concat(t,".").concat(n)]||e["".concat(n)]||a}function _(e,t,n,a){var i=!1,r=p.a.requestInterval((function(){if(t()&&!i){var r=a-n;p.a.requestTimeout((function(){o()}),r),i=!0}e()}),n),o=function(){p.a.clearRequestInterval(r)};return{clear:o}}var I=function(){function e(t){var n=this,a=t.config,i=t.template,r=t.apis,o=t.supportHours;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._desiredState=a.state,this._inviteId=a.inviteId,this._caqueue=a.queue,this._caskill=a.skill,this._engaged=a.engaged,this._dockId=a.dockId,this._appInteractionId="",this._caTrueOnce=!1,this._caChecked=!1,this._stateChangedByAction=!1,this._caPoller=void 0,this._trackingId="",this._apis=r,this._ruleId=a.ruleId,this._appId=a.appId,this._tabVisibleOnTrigger=a.tabVisibleOnTrigger,this._trackAction(l.a.TRACK_INTERACTION.INVITE_REQUESTED),this._assistAvailability=new u(a.workflowConfig),this._invite=new i(a,(function(e,t){e.split("-").map((function(e){return n.stimulus(l.a.STIMULI_TYPE.ACTION,e,t)}))}),r.fifMessageSender),this._caMap={},Object.keys(g).map((function(e){var t=g[e];return n._caMap[t]=y(a,t,"caType",l.a.AVAILABILITY_CHECK.NONE),0})),this._supportHours=new f.a(o,this._caqueue),this._preCheckSupportHours=y(a,a.state,"preCheckSupportHours",!1),this._pollInterval=a.pollInterval,this._pollDuration=a.pollDuration,this._checkAndLogAfterHours(),this._requestStateUpdate()}var t,n,i;return t=e,(n=[{key:"_checkAndLogAfterHours",value:function(){this._supportHours.isWithinSupportHours()||this._track(l.a.EVENT.QUEUE_AFTER_HOURS,this._getInviteMetadata({}))}},{key:"_requestStateUpdate",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._caTrueOnce=!1,this._caChecked=!1,this._caType=this._caMap[this._desiredState],this._stopAvailabilityPoller(),this._pollInterval&&this._pollDuration&&(this._caPoller=_(this._invokeAvailabilityCheck.bind(this),(function(){return!e._engaged}),parseInt(this._pollInterval,10),parseInt(this._pollDuration,10))),t&&this._invokeAvailabilityCheck()}},{key:"_stopAvailabilityPoller",value:function(){this._caPoller&&this._caPoller.clear()}},{key:"_invokeAvailabilityCheck",value:function(){if(this._engaged)this.stimulus(l.a.STIMULI_TYPE.INTERACTION,!0);else if(!0!==this._preCheckSupportHours||this._supportHours.isWithinSupportHours()){switch(this._caType){case l.a.AVAILABILITY_CHECK.NONE:this.stimulus(l.a.STIMULI_TYPE.AVAILABILITY,!0,{});break;case l.a.AVAILABILITY_CHECK.REPEAT:this._checkAvailability();break;case l.a.AVAILABILITY_CHECK.ONCE:this._caChecked||this._checkAvailability();break;case l.a.AVAILABILITY_CHECK.TILL_AVAILABLE:this._caTrueOnce||this._checkAvailability()}this._caChecked=!0}else this.stimulus(l.a.STIMULI_TYPE.AVAILABILITY,!1,{})}},{key:"_trackAction",value:function(e){var t=this._state||this._desiredState;this._apis.trackInteraction({logLevel:h.a.LOG_LEVEL.INFO,message:h.a.LOG_EVENTS.USER_ACTION,logData:{action:e,inviteId:this._inviteId,appInteractionId:this._appInteractionId,state:t,tabVisibleOnTrigger:this._tabVisibleOnTrigger}},t===l.a.STATE.MAXIMIZED)}},{key:"stimulus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="".concat(e,"_").concat(t);switch(i){case l.a.STIMULI.AGENT_AVAILABLE:if(!this._engaged){var r=!this._caTrueOnce&&!this._stateChangedByAction;this._stateChangedByAction=!1,this._setState(this._desiredState,r),this._trackingId=n.trackingId||"",this._caTrueOnce||(this._caTrueOnce=!0)}break;case l.a.STIMULI.AGENT_UNAVAILABLE:if(!this._engaged){var o=this._supportHours.isWithinSupportHours();o?(this._setState(g.BUSY),this._track(l.a.EVENT.CA_CHECK_FAIL,this._getInviteMetadata({}))):this._setState(g.OFFLINE)}break;case l.a.STIMULI.INTERACTION_STARTED:this._engaged=!0,this._setState(g.ENGAGED);break;case l.a.STIMULI.INTERACTION_ENDED:this._engaged=!1,this._requestStateUpdate();break;case l.a.STIMULI.INVITE_OFFERED:this._appInteractionId=a.a.uuid(),this._track(l.a.EVENT.INVITE_OFFERED,this._getInviteMetadata(n.event)),this._trackAction(l.a.TRACK_INTERACTION.INVITE_OFFERED);break;case l.a.STIMULI.INVITE_ACCEPTED:this._track(l.a.EVENT.INVITE_ACCEPTED,this._getInviteMetadata(n.event)),this._apis.startInteraction(this._getInviteMetadata(n.interaction)),this._trackAction(l.a.TRACK_INTERACTION.INVITE_ACCEPTED);break;case l.a.STIMULI.INVITE_DECLINED:this._track(l.a.EVENT.INVITE_DECLINED,this._getInviteMetadata(n.event)),this._trackAction(l.a.TRACK_INTERACTION.INVITE_DECLINED);break;case l.a.STIMULI.INVITE_IGNORED:this._track(l.a.EVENT.INVITE_IGNORED,this._getInviteMetadata(n.event)),this._trackAction(l.a.TRACK_INTERACTION.INVITE_IGNORED);break;case l.a.STIMULI.INVITE_REMOVED:this._apis.removeInvite(this.getInviteId());break;case l.a.STIMULI.INVITE_MINIMIZED:this._desiredState=l.a.STATE.MINIMIZED,this._state=void 0,this._engaged||(this._setState(g.MINIMIZED,!0),this._stateChangedByAction=!0),this._requestStateUpdate(!1)}}},{key:"getState",value:function(){return this._state}},{key:"getInviteId",value:function(){return this._inviteId}},{key:"_checkAvailability",value:function(){this._assistAvailability.check(this._caqueue,this._caskill,this.stimulus.bind(this,l.a.STIMULI_TYPE.AVAILABILITY)),this._apis.trackInteraction({logLevel:h.a.LOG_LEVEL.INFO,message:h.a.LOG_EVENTS.USER_ACTION,logData:{action:l.a.TRACK_INTERACTION.AVAILABILITY_CHECK}})}},{key:"_track",value:function(e,t){this._apis.logEvent({event:e,eventData:t})}},{key:"_getInviteMetadata",value:function(e){var t=Object(d.a)({},{queue:this._caqueue,ruleId:this._ruleId,state:this._state,appInteractionId:this._appInteractionId,triggerAppId:this._inviteId,inviteId:this._inviteId,trackingId:this._trackingId,appId:this._appId,dockId:this._dockId},e);return this._caskill&&!t.skill&&(t.skill=this._caskill),t}},{key:"_handleStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e;t.inviteId=this._inviteId;try{this._apis.onStateChange(t),m.dispatchEvent(new CustomEvent(l.a.STATE_CHANGE_EVENT,{detail:t}))}catch(e){}}},{key:"_setState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._invite&&this._state!==e){var n;try{n=this._invite.setState(e,t)}catch(t){var a=t.message||t;return void this._apis.trackInteraction({logLevel:h.a.LOG_LEVEL.INFO,message:h.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:l.a.TRACK_INTERACTION.INVITE_SET_STATE_ERROR,inviteId:this._inviteId,state:e,errorMsg:a,errorStack:t.stack}},!0)}this._state!==n&&this._handleStateChange({inviteState:n}),this._state=n}}},{key:"destructor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e&&E.indexOf(this._state)>=0)return!1;this._stopAvailabilityPoller();try{this._invite.destructor()}catch(e){}return this._invite=void 0,!0}}])&&v(t.prototype,n),i&&v(t,i),e}(),T=n(148),b=n(14),S=n(48),O=n(36);function A(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var w,C,k=!1,R=[];function N(e){for(var t=R,n=0;n<t.length;n+=1){var a=t[n];if(a&&a.getInviteId()===e)return{invite:a,index:n}}return{invite:void 0,index:-1}}function D(e,t){i.a.notEmpty(e,"inviteId");var n=N(e),a=n.invite,r=n.index;return i.a.assert(r>-1,"Invite doesn't exist"),!!a.destructor(t)&&(R[r]=void 0,!0)}var L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"init",value:function(e,t){k||(w=t,this._supportHours=e.supportHours,r.a.addStylesheet(l.a.LOADER_CSS_ID,l.a.LOADER_CSS),k=!0)}},{key:"triggerInvite",value:function(e,t){if(k&&t){var n=O.a.transformInvite(Object(d.a)({},t)),a=n.inviteId,i=n.state,r=N(a).invite;if(r){if(r.getState()===l.a.STATE.MAXIMIZED)return void w.trackInteraction({logLevel:h.a.LOG_LEVEL.INFO,message:h.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:l.a.TRACK_INTERACTION.INVITE_ALREADY_MAXIMIZED,inviteId:a}},!0);this.removeInvite(n)}var o,s=e.invites||[],c=O.a.transformInvite(function(e,t){var n=t.inviteId,a={},i={};a.engaged=C;for(var r=0;r<e.length;r+=1)if(e[r]&&e[r].inviteId===n){i=e[r];break}return Object(d.a)(a,i,t),a}(s,n)),u=S.a.documentHasFocus();c.queue||(c.queue=n.fallbackQueue||e.workflowConfig.assistQueue),c.appId=e.appId,c.device=w.device,c.workflowConfig=e.workflowConfig,c.tabVisibleOnTrigger=u;try{var f=T.a.getTemplate(c.template),p=e.supportHours||this._supportHours;if(w.disableBackgroundInvite&&i===l.a.STATE.MAXIMIZED&&!u)return void w.trackInteraction({logLevel:h.a.LOG_LEVEL.INFO,message:h.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:l.a.TRACK_INTERACTION.INVITE_PAGE_BACKGROUND}},!0);var v=new I({config:c,template:f,supportHours:p,apis:(o=b.a.noop,{startInteraction:w.startInteraction,removeInvite:D,logEvent:w.logEvent,fifMessageSender:w.fifMessageSender||o,onStateChange:w.onStateChange||o,trackInteraction:w.trackInteraction||o})});R.push(v)}catch(e){var g=e.message||e;w.trackInteraction({logLevel:h.a.LOG_LEVEL.INFO,message:h.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:l.a.TRACK_INTERACTION.INVITE_INITIALIZATION_ERROR,inviteId:a,state:i,errorMsg:g,errorStack:e.stack}},!0)}}}},{key:"setInteractionActive",value:function(e){var t;i.a.isBoolean(e,"setInteractionActive:active"),C=e,t=function(t){return t.stimulus(l.a.STIMULI_TYPE.INTERACTION,e)},R.forEach((function(e){return e&&t(e)}))}},{key:"removeInvite",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=O.a.transformInvite(Object(d.a)({},e)),n=t.inviteId,a=t.force;try{return D(n,a)}catch(e){return!1}}}])&&A(t.prototype,n),a&&A(t,a),e}();t.a=new L},14:function(e,t,n){"use strict";var a=n(24);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"lpad",value:function(e,t,n){var a=n||"0",i="".concat(e);return i.length>=t?i:new Array(t-i.length+1).join(a)+i}},{key:"trigger",value:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}else e.fireEvent("on".concat(t))}},{key:"openWindow",value:function(e,t,n){var i=a.a.normalizeUrl(e);window.open(i,t,n)}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isBlank",value:function(e){return!this.isString(e)||0===e.length}},{key:"arrayDeepEquals",value:function(e,t){if(!e||!t)return!1;if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}},{key:"setValueWithPath",value:function(e,t,n,a){var i=n.split(t);i.reduce((function(e,t,n){var r=e;return n<i.length-1?r[t]=r[t]||{}:r[t]=a,r[t]}),e)}},{key:"noop",value:function(){}},{key:"getObjectReference",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return t;for(var n=t,a=e.split("."),i=0;i<a.length;i+=1)if(!(n=n[a[i]]))return;return n}},{key:"getFunctionReference",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{var a=e.split("."),i=a.pop(),r=this.getObjectReference(a.join("."),t),o=r[i];if("function"!=typeof o)return;return n?o.bind(r):o}catch(e){}}}])&&i(t.prototype,n),r&&i(t,r),e}();t.a=new r},147:function(e,t,n){"use strict";var a=function(e){var t=!1;try{var n=window[e];n.setItem("testLS","works");var a=n.getItem("testLS");n.removeItem("testLS"),t="works"===a}catch(e){}return t};t.a={localStorage:a("localStorage"),sessionStorage:a("sessionStorage")}},148:function(e,t,n){"use strict";var a=n(206),i=n.n(a),r=n(138),o=n.n(r),s=n(19),c=n(27),u=n(17),l=n(10),d=n(72),f=n(8),p=n(3),h=n(11),v=n(51),g=n(14),E=n(23);function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.touch=!1,this.action=!1,this.diffX=0,this.diffY=0,this.endX=0,this.endY=0,this.scroll=!1,this.sort=!1,this.startX=0,this.startY=0,this.swipe=!1,this._element=t,this._onEndBound=this.onEnd.bind(this),this._onMoveBound=this.onMove.bind(this),this._onKeyDownBound=this.onKeyDown.bind(this),this._onStartBound=this.onStart.bind(this),this._element.addEventListener("touchstart",this._onStartBound),this._element.addEventListener("mousedown",this._onStartBound),this._element.addEventListener("keydown",this._onKeyDownBound),this._element.addEventListener("touchmove",this._onMoveBound),this._element.addEventListener("touchend",this._onEndBound),this._element.addEventListener("touchcancel",this._onEndBound),this._onTap=g.a.noop,this._onSwipe=g.a.noop,this._onSwipeEnd=g.a.noop,this._onSort=g.a.noop,this._onSortEnd=g.a.noop,this._onSortGrab=g.a.noop}var t,n,a;return t=e,(n=[{key:"testTouch",value:function(e){if("touchstart"===e.type)this.touch=!0;else if(this.touch)return this.touch=!1,!1;return!0}},{key:"getCoord",value:function(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page".concat(t)]:e["page".concat(t)]}},{key:"onKeyDown",value:function(e){E.a.shouldHandleActivate(e)&&(e.preventDefault(),e.stopPropagation(),this._onTap())}},{key:"onStart",value:function(e){var t=this;this.testTouch(e)&&!this.action&&(this.action=!0,this.startX=this.getCoord(e,"X"),this.startY=this.getCoord(e,"Y"),this.diffX=0,this.diffY=0,this.sortTimer=l.a.requestTimeout((function(){t.sort=!0,t._onSortGrab()}),200),"mousedown"===e.type&&(document.addEventListener("mousemove",this._onMoveBound),document.addEventListener("mouseup",this._onEndBound)))}},{key:"onMove",value:function(e){this.action&&(this.endX=this.getCoord(e,"X"),this.endY=this.getCoord(e,"Y"),this.diffX=this.endX-this.startX,this.diffY=this.endY-this.startY,this.sort||this.swipe||this.scroll||(Math.abs(this.diffY)>10?this.scroll=!0:Math.abs(this.diffX)>7&&(this.swipe=!0)),this.swipe&&(e.preventDefault(),this._onSwipe({start:{x:this.startX,y:this.startY},end:{x:this.endX,y:this.endY}})),this.sort&&(e.preventDefault(),this._onSort({start:{x:this.startX,y:this.startY},end:{x:this.endX,y:this.endY}})),(Math.abs(this.diffX)>5||Math.abs(this.diffY)>5)&&l.a.clearRequestTimeout(this.sortTimer))}},{key:"onEnd",value:function(e){this.action&&(this.action=!1,this.swipe?this._onSwipeEnd():this.sort?this._onSortEnd():!this.scroll&&Math.abs(this.diffX)<5&&Math.abs(this.diffY)<5&&("touchend"===e.type&&e.preventDefault(),this._onTap()),this.swipe=!1,this.sort=!1,this.scroll=!1,l.a.clearRequestTimeout(this.sortTimer),"mouseup"===e.type&&(document.removeEventListener("mousemove",this._onMoveBound),document.removeEventListener("mouseup",this._onEndBound)))}},{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.a.noop;switch(e){case"swipe":this._onSwipe=t;break;case"swipeend":this._onSwipeEnd=t;break;case"sort":this._onSort=t;break;case"sortend":this._onSortEnd=t;break;case"sortgrab":this._onSortGrab=t;break;case"tap":this._onTap=t}}},{key:"destroy",value:function(){this._element&&(this._element.removeEventListener("touchstart",this._onStartBound),this._element.removeEventListener("mousedown",this._onStartBound),this._element.removeEventListener("keydown",this._onKeyDownBound),this._element.removeEventListener("touchmove",this._onMoveBound),this._element.removeEventListener("touchend",this._onEndBound),this._element.removeEventListener("touchcancel",this._onEndBound))}}])&&m(t.prototype,n),a&&m(t,a),e}(),_=n(13);function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O,A=document,w=/^tooltip(-(.+))?/;function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e){if(Array.isArray(e))return e.map((function(e,n){return C(e,t,n)}));var a=A.createElement(t.tag),r="".concat(s.a.INVITE_PREFIX).concat(t.inviteId,"_");if(a.id="".concat(r).concat(t.name).concat(n),e.css&&u.a.setStyle(a,e.css,!0),e.text&&(a.innerHTML=o.a.sanitize(e.text)),e.tooltip&&w.test(e.action)){var c=e.action.match(w)[2]?e.action.match(w)[2].split("-"):["click","hover","focus"];new k(a,e.tooltip,a.id,c)}if(!0===e.autoFocus&&l.a.requestTimeout((function(){return a.focus()}),0),e.action&&t.signal&&!w.test(e.action)){var d=new y(a);d.on("tap",(function(){var n=e.action,a=e.queue,i=e.skill,r={event:{},interaction:{}};a&&(r.event.queue=a,r.interaction.queue=a),i&&(r.event.skill=i,r.interaction.skill=i),t.signal(n,r)}))}if(h.a.isObject(e.attributes)&&Object.keys(e.attributes).map((function(t){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return a.setAttribute(n,e.attributes[t]),0})),h.a.isArray(e.animate)&&e.animate.map((function(e){var t=e.property,n=e.unit,r=e.from,o=e.to,s=e.duration,c=e.easing;return i.a.animateCSS(a,t,n,parseInt(r,10),parseInt(o,10),parseInt(s,10),c),0})),h.a.isObject(e.audio)){var f=parseInt(e.audio.delay,10)||0,p=e.audio.name;v.a.register(p,e.audio),l.a.requestTimeout((function(){return v.a.play(p,!0)}),f)}return t.parent&&t.parent.appendChild(a),a}}var k=function(){function e(t,n,a,i){var r=this;I(this,e),this.element=t,this.config=n,this.inviteId=a,this.tooltipElement=void 0,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),i.forEach((function(e){switch(e){case"hover":r._handle("mouseover","mouseout");break;case"click":r._handle("click","focusout");break;case"focus":r._handle("focusin","focusout")}}))}return b(e,[{key:"_showTooltip",value:function(){if(!this.tooltipElement){var e=this.config,t=this.inviteId,n=C(e.container,{name:"tooltip_container",tag:"div",inviteId:t});C(e.before,{name:"tooltip_before",tag:"div",parent:n,inviteId:t}),C(e.content,{name:"tooltip_content",tag:"div",parent:n,inviteId:t}),C(e.after,{name:"tooltip_after",tag:"div",parent:n,inviteId:t}),this.tooltipElement=n,this.element.parentNode.appendChild(n)}}},{key:"_hideTooltip",value:function(){this.tooltipElement&&(this.tooltipElement.parentNode.removeChild(this.tooltipElement),this.tooltipElement=void 0)}},{key:"_handle",value:function(e,t){var n=this;this.element.addEventListener(e,(function(){return n._showTooltip()})),this.element.addEventListener(t,(function(){return n._hideTooltip()}))}}]),e}(),R=function(){function e(t,n,a){I(this,e),this._config=F.parseConfig(t),this._signal=n,O=a}return b(e,[{key:"_clearTimeout",value:function(){this._timeout&&l.a.clearRequestTimeout(this._timeout)}},{key:"setState",value:function(e,t){p.a.notEmpty(e,"GenericInviteTemplate: state"),p.a.isBoolean(t,"GenericInviteTemplate: reset"),this.destructor();var n,a=this._config,i=a.device;if(!(i&&a[i]&&a[i][e]))return e;n=a[i][e],this._stateConfig=n;var r=n.timeout||{},o=r.duration,v=r.action,g=void 0===v?"ignore-remove":v;o&&(this._timeout=l.a.requestTimeout(this._signal.bind(this,g,{}),o)),d.a.alter(!0===n.restrictViewport),this._invite=function(e,t,n){var a,i,r,o;if(e.frame&&e.frame.css&&O(c.a.IFRAME_POST_MESSAGE.SET_IFRAME_CSS,e.frame.css,!0),h.a.isObject(e.lightbox)&&h.a.isBoolean(e.lightbox.show)&&!0===e.lightbox.show){var d=s.a.LIGHTBOX_CSS;e.lightbox.css&&(d=Object(f.a)({},d,{css:e.lightbox.css})),r=C({},{name:"wrapper",tag:"div",inviteId:t}),C(d,{name:"lightbox",tag:"div",parent:r,inviteId:t}),i=C(e.container,{name:"container",tag:"div",parent:r,inviteId:t}),o=r}else i=C(e.container,{name:"container",tag:"div",inviteId:t}),o=i;C(e.viewBackground?Object(f.a)({},e.viewBackground,{attributes:S({},s.a.VIEW_ENABLED_ATTRIBUTE,!0)}):void 0,{name:"view",tag:"div",parent:i,inviteId:t}),C(e.decorative,{name:"decorative",tag:"div",parent:i,inviteId:t});var p=C(e.content,{name:"content",tag:"div",parent:i,inviteId:t});if(C(e.badge?Object(f.a)({},e.badge,{css:{display:"none"},attributes:(a={},S(a,s.a.BADGE_ENABLED_ATTRIBUTE,!0),S(a,s.a.BADGE_HINT_ATTRIBUTE,e.badge.hintText),a)}):void 0,{name:"badge",tag:"div",parent:p,inviteId:t,signal:n}),C(e.context,{name:"context",tag:"div",parent:p,inviteId:t}),C(e.action,{name:"action",tag:"button",parent:p,inviteId:t,signal:n}),!0===e.touchMove){var v,g=new y(o),E=function(){u.a.setStyle(o,e.container.css,!0)};g.on("sort",(function(e){var t=e.start,n=e.end,a=t.x-v.left,i=t.y-v.top,r=Math.max(Math.min(n.y-i,window.innerHeight-v.height),0),s=Math.max(Math.min(n.x-a,window.innerWidth-v.width),0);u.a.setStyle(o,{top:"".concat(r,"px"),left:"".concat(s,"px"),right:"auto",bottom:"auto",transform:"initial",position:"fixed",webkitTapHighlightColor:"rgba(0,0,0,0)"})})),g.on("sortgrab",(function(){v=o.getBoundingClientRect(),u.a.setStyle(o,{opacity:"0.8"}),u.a.addClass(o,"tfs-animate"),l.a.requestTimeout((function(){u.a.removeClass(o,"tfs-animate")}),500)})),g.on("sortend",(function(){v=void 0,u.a.setStyle(o,{opacity:"1"})})),window.addEventListener("orientationchange",E),_.a.isPhone||_.a.isTablet||window.addEventListener("resize",E)}return o}(n,a.inviteId,this._signal),!0===a.cssReset&&u.a.addClass(this._invite,"tfs-reset-css"),this._lastWidgetUpdate&&this.widgetUpdate(this._lastWidgetUpdate);var E=A.querySelector(n.selector||"body");return this._invite&&E&&E.insertBefore(this._invite,E.firstChild),t&&this._signal(s.a.ACTION.OFFER,{event:{state:e}}),e}},{key:"widgetUpdate",value:function(e){var t=e.unreadMessageCount,n=e.widgetView;if(this._invite){var a=this._invite.querySelector("[".concat(s.a.BADGE_ENABLED_ATTRIBUTE,"=true]"));if(a&&t){var i=a.getAttribute(s.a.BADGE_HINT_ATTRIBUTE);a.setAttribute("aria-label","".concat(t," ").concat(i)),a.textContent=t,a.style.display="block"}var r=this._invite.querySelector("[".concat(s.a.VIEW_ENABLED_ATTRIBUTE,"=true]"));if(r&&this._stateConfig&&this._stateConfig.viewBackground){this._viewBackground||(this._viewBackground=r.style.background);var o=this._stateConfig.viewBackground[n]||this._viewBackground;r.style.background=o}}else this._lastWidgetUpdate={unreadMessageCount:t,widgetView:n}}},{key:"destructor",value:function(){try{var e=this._invite;return e&&e.parentNode.removeChild(e),this._clearTimeout(),this._invite=void 0,d.a.alter(!1),!0}catch(e){return!1}}}]),e}();function N(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var D=document;function L(e,t){var n=t.currentTarget.getAttribute(s.a.ACTION_ATTRIBUTE);n&&e(n,{})}var M=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=this._processConfig(t),this._signal=n;var a=this._config.device;p.a.notEmpty(a,"device");var i=this._config[a].selector;p.a.notEmpty(i,"Selector '".concat(i,"'")),this._element=D.querySelector(i),p.a.isObject(this._element,i),this._actionListener=L.bind(this,n),this._element.addEventListener("click",this._actionListener)}var t,n,a;return t=e,(n=[{key:"_processConfig",value:function(e){var t={};Object.keys(e).map((function(n){return g.a.setValueWithPath(t,".",n,e[n])}));var n=t[t.device];return t.classes=[],Object.keys(n).map((function(e){var a=n[e];return a&&a.class&&t.classes.push(a.class),e.class})),t}},{key:"_searchAndReplace",value:function(e){for(var t=this._config.classes,n=this._element,a=0;a<t.length;a+=1)t[a]&&u.a.hasClass(n,t[a])&&u.a.removeClass(n,t[a]);e&&u.a.addClass(n,e)}},{key:"setState",value:function(e,t){p.a.notEmpty(e,"ClientManagedInviteTemplate: state"),p.a.isBoolean(t,"ClientManagedInviteTemplate: reset");var n,a=this._config,i=a.device;if(!(i&&a[i]&&a[i][e]))return e;(n=a[i][e]).action?this._element.setAttribute(s.a.ACTION_ATTRIBUTE,n.action):this._element.removeAttribute(s.a.ACTION_ATTRIBUTE),t&&this._signal(s.a.ACTION.OFFER,{event:{state:e}});var r=this._config[i].eventName?this._config[i].eventName:s.a.CUSTOM_EVENT_NAME,o=new CustomEvent(r,{detail:{inviteState:e,inviteId:this._config.inviteId}});return this._element.dispatchEvent(o),this._searchAndReplace(n.class),e}},{key:"destructor",value:function(){this._element.removeEventListener("click",this._actionListener)}}])&&N(t.prototype,n),a&&N(t,a),e}();function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var x=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._signal=n}var t,n,a;return t=e,(n=[{key:"setState",value:function(e,t){var n=this;return p.a.notEmpty(e,"DirectInviteTemplate: state"),p.a.isBoolean(t,"DirectInviteTemplate: reset"),t&&(this._signal("offer-accept",{event:{state:e}}),l.a.requestTimeout((function(){n._signal("remove")}),1)),e}},{key:"destructor",value:function(){}}])&&P(t.prototype,n),a&&P(t,a),e}();var F=t.a={parseConfig:function(e){var t={};return Object.keys(e).map((function(n){return function e(t,n,a){var i,r,o=t,s=!1,c=n.match(/(.+?)\.(.*)/);c?(i=c[1],r=c[2]):(i=n,s=!0);var u,l,d=i.match(/(.+?)\$(\d+)/);return d?(u=d[1],l=parseInt(d[2],10)):u=i,"number"==typeof l?(o[u]=o[u]||[],s?(o[u][l]=a,o):(o[u][l]=o[u][l]||{},e(o[u][l],r,a),o)):s?(o[n]=a,o):(o[u]=o[u]||{},e(o[u],r,a))}(t,n,e[n])})),t},getTemplate:function(e){return{generic:R,"client-managed":M,direct:x}[e]||g.a.getFunctionReference(e,void 0,!1)}}},15:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}for(var i=window,r=[],o=0;o<256;o+=1)r.push((o+256).toString(16).substr(1).toLowerCase());var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"uuid",value:function(){var e=(i.crypto||i.msCrypto).getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=63&e[8]|128;for(var t=[],n=0;n<e.length;n+=1)t[n]=r[e[n]];return"".concat(t[0]).concat(t[1]).concat(t[2]).concat(t[3],"-").concat(t[4]).concat(t[5],"-").concat(t[6]).concat(t[7],"-").concat(t[8]).concat(t[9],"-").concat(t[10]).concat(t[11]).concat(t[12]).concat(t[13]).concat(t[14]).concat(t[15])}},{key:"get",value:function(e){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",n="",a=0,i=t.length;a<e;a+=1)n+=t.substr(0|Math.random()*i,1);return n}}])&&a(t.prototype,n),o&&a(t,o),e}();t.a=new s},16:function(e,t,n){"use strict";t.a={STYLE:"style",READY:"ready",INTERACTION:"interaction",CONFIG:"config",CONTEXT:"context",SYSTEMMSG:"systemmsg",DESTROY:"destroy",STATE_CHANGE:"state_change",TRACK_INTERACTION:"track_interaction",TRACK_EVENT:"track_event",TRACK:{PRE_CHAT_SHOWN:"prechatShown",PRE_CHAT_SUBMIT:"prechatSubmit",EXIT_SURVEY_SHOWN:"exitSurveyShown",EXIT_SURVEY_SUBMIT:"exitSurveySubmit",CARD_INVITED:"cardInvited",CARD_SHOWN:"cardAccepted",CARD_SUBMITTED:"cardSubmitted",QUEUE_AFTER_HOURS:"queueAfterHours"},CARD:"card",NOTIFICATION:"notification",COBROWSE:"cobrowse",EXTENSIBLE_LISTENERS:"extensible_listeners",DISPATCH_ACTION:"dispatchAction",SHOW_INPAGE_VIEW:"showInpageView",HIDE_INPAGE_VIEW:"hideInpageView",FRAME:{READY:"frame.ready",ERROR:"frame.error",DIMENSIONS:"frame.dimensions",CARD:{SUBMIT:"frame.card.submit",CONFIG:"frame.card.config",CANCEL:"frame.card.cancel",CLOSE:"frame.card.close",ERROR:"frame.card.error"}}}},17:function(e,t,n){"use strict";var a=n(5),i=n(13),r=n(3),o=n(10),s=n(8),c=n(4);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,d;return t=e,(n=[{key:"trim",value:function(e){return e.replace(/^\s+|\s+$/g,"")}},{key:"addStylesheet",value:function(e,t){r.a.notEmpty(e,"addStylesheet id"),r.a.notEmpty(t,"addStylesheet cssText");var n=this.createElement("style",{id:e,type:"text/css"});try{n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.head.appendChild(n)}catch(e){}return n}},{key:"get",value:function(e){return document.getElementById(e)}},{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=document.createElement(e);return Object.keys(t).map((function(e){return a.setAttribute(e,t[e]),0})),"string"==typeof n?a.innerHTML=n:n.map((function(e){return a.appendChild(e)})),a}},{key:"removeElement",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t&&t.parentNode.removeChild(t)}},{key:"addClass",value:function(e,t){var n=this.trim(t),a=e;a&&("string"==typeof a&&(a=this.get(a)),a.classList?a.classList.add(n):a.className+=" ".concat(n))}},{key:"removeClass",value:function(e,t){var n=this.trim(t),a=e;a&&("string"==typeof a&&(a=this.get(a)),a.classList?a.classList.remove(t):a.className=a.className.replace(new RegExp("(^|\\b)(\\s*)".concat(n.split(" ").join("(\\s*)|(\\s*)"),"(\\s*)(\\b|$)"),"g")," "))}},{key:"hasClass",value:function(e,t){var n=this.trim(t),a=e;return"string"==typeof a&&(a=this.get(a)),a.classList?a.classList.contains(n):new RegExp("(^| )".concat(n,"( |$)"),"gi").test(a.className)}},{key:"hasSelector",value:function(e,t){return("string"==typeof e?this.createElement("div",void 0,e):e).querySelectorAll(t).length>0}},{key:"hide",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t.style.display="none"}},{key:"show",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t.style.display="block"}},{key:"getStyle",value:function(e,t){return window.getComputedStyle(e)[t]}},{key:"set",value:function(e,t,n){e&&"string"==typeof t&&"string"==typeof n&&(e.style[t]=n)}},{key:"setStyle",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e)switch(a&&e.setAttribute("style",""),u(t)){case"object":Object.keys(t).map((function(a){return Object.prototype.hasOwnProperty.call(t,a)&&n.set(e,a,t[a]),0}));break;case"string":e.setAttribute("style",e.style.cssText+t)}}},{key:"injectScript",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;r.a.notEmpty(e,"injectScript url"),r.a.isNotUndefinedOrNull(a.head,"document.head");var u=!1;if(this.get(i.id))n("success");else{var l,d=this.createElement("script",Object(s.a)({},i,{async:!0,src:e,type:"text/javascript"}));a.head.appendChild(d),d.onreadystatechange=function(){u||t.readyState&&"loaded"!==t.readyState&&"complete"!==t.readyState||(u=!0,l&&o.a.clearRequestTimeout(l),n("success"),d.onreadystatechange=null)},d.onload=function(){u||t.readyState&&"loaded"!==t.readyState&&"complete"!==t.readyState||(u=!0,l&&o.a.clearRequestTimeout(l),n("success"),d.onload=null)},d.onerror=function(){d.onreadystatechange=null,d.onload=null,l&&o.a.clearRequestTimeout(l),n("error")},c&&(l=o.a.requestTimeout((function(){d.onreadystatechange=null,d.onload=null,n("timeout")}),c))}}},{key:"reduceTags",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];r.a.isArray(t,"reduceTags allowedTags"),r.a.isObject(n,"reduceTags allowedAttributes"),r.a.isArray(a,"reduceTags purgeTags");var i=this.createElement("div",{},e),o=i.childNodes,s=[];if(o.length>0)for(var c=0;c<o.length;c+=1){var u=o[c],l=u.nodeName.toLowerCase();if((u=Array.isArray(n[l])?this.removeAttrs(u,n[l]):this.removeAttrs(u,[])).hasChildNodes()&&-1===a.indexOf(l))if(1===u.childNodes.length&&"#text"===u.childNodes[0].nodeName)t.indexOf(l)>-1?s.push(u.outerHTML):s.push(u.textContent);else{var d=u.innerHTML.indexOf("<"),f="";d>0&&(f=u.innerHTML.substr(0,d),u.innerHTML=u.innerHTML.substr(d));var p=u.innerHTML.lastIndexOf(">"),h="";h=u.innerHTML.substr(p+1),u.innerHTML=u.innerHTML.substr(0,p+1),t.indexOf(l)>-1?(u.innerHTML=f+this.reduceTags(u.innerHTML,t,n,a)+h,s.push(u.outerHTML)):s.push(f+this.reduceTags(u.innerHTML,t,n,a)+h)}else{var v=l;-1===a.indexOf(v)&&(t.indexOf(v)>-1?s.push(u.outerHTML):s.push(u.textContent))}}else s.push(e);return s.join(" ").trim()}},{key:"removeAttrs",value:function(e,t){var n=e;if(n.attributes)for(var a=n.attributes,i=a.length-1;i>=0;i-=1)-1===t.indexOf(a[i].name)&&n.removeAttribute(a[i].name);return n}},{key:"removeCSSProp",value:function(e,t){var n=e.match(/([^\s{]+?(?=:))(:\s)([^;]*);/g),a="";return n&&n.forEach((function(e){var n=e.split(":")[0];t.indexOf(n)>-1&&(a+=e)})),a}},{key:"fixAnchorTarget",value:function(e){var t,n=this.createElement("div",{},e),a=n.getElementsByTagName("a");if(a.length>0){for(var i=0;i<a.length;i+=1){var r=a[i].getAttribute("target");c.a.isEmptyOrNull(r)&&a[i].setAttribute("target","_blank")}t=n.innerHTML}else t=e;return t}},{key:"filterAttrOfTag",value:function(e,t,n){var a=this,i=this.createElement("div",{},e),r=i.getElementsByTagName(t),o=[],s=[].slice.call(r);return 0===s.length?{residueContent:i.innerHTML}:(s.map((function(e){var t={};return n.map((function(n){var a=c.a.isEmptyOrNull(e.getAttribute(n))?e.getAttribute(n):e.getAttribute(n).trim();return t[n]=c.a.isEmptyOrNull(e.dataset)||c.a.isEmptyOrNull(e.dataset[n])?a:e.dataset[n].trim(),0})),t.innerHTML=e.innerHTML.trim(),o.push(t),a.removeElement(e),0})),{residueContent:o.length>0&&""===i.textContent.trim()&&0===i.getElementsByTagName("img").length?void 0:i.innerHTML,tagAttributes:o})}},{key:"redrawElement",value:function(e,t,n){var a=this;return e?(this.setStyle(e,t),o.a.requestTimeout((function(){a.setStyle(e,n)}),40),0):0}},{key:"getOrientation",value:function(){switch(i.a.isMobileSafari||i.a.isIpad?Math.abs(window.orientation):screen.width>screen.height?90:0){case 90:return a.a.ORIENTATIONS.LANDSCAPE;default:return a.a.ORIENTATIONS.PORTRAIT}}},{key:"getScreenDimensions",value:function(){var e,t;return this.getOrientation()===a.a.ORIENTATIONS.PORTRAIT?(t=screen.height>screen.width?screen.height:screen.width,e=screen.height>screen.width?screen.width:screen.height):(t=screen.height>screen.width?screen.width:screen.height,e=screen.height>screen.width?screen.height:screen.width),{width:e,height:t}}},{key:"getKeyboardHeight",value:function(){var e=this.getOrientation(),t=Object.keys(a.a.ORIENTATIONS).reduce((function(t,n){return e===a.a.ORIENTATIONS[n]?n:t})),n=window.innerHeight;if(i.a.isIpad){var r=a.a.MAX_KEYBOARD_HEIGHT[t].filter((function(e){return n>=e.MIN_SCREEN_HEIGHT&&n<=e.MAX_SCREEN_HEIGHT}));if(r.length)return r[0].KEYBOARD_HEIGHT}return 0}},{key:"matches",value:function(e,t){for(var n=(e.document||e.ownerDocument).querySelectorAll(t),a=n.length;a>=0&&n.item(a)!==e;)a-=1;return a>-1}}])&&l(t.prototype,n),d&&l(t,d),e}();t.a=new d},181:function(e,t,n){"use strict";var a=n(14);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getTimezoneString",value:function(){var e=(new Date).getTimezoneOffset(),t=Math.floor,n=Math.abs;return"GMT ".concat(e<0?"+":"-").concat(t(n(e)/60),":").concat(n(e)%60)}},{key:"formatDate",value:function(e){var t=e.getFullYear(),n=a.a.lpad(e.getMonth()+1,2),i=a.a.lpad(e.getDate(),2),r=a.a.lpad(e.getHours(),2),o=a.a.lpad(e.getMinutes(),2),s=a.a.lpad(e.getSeconds(),2),c=a.a.lpad(e.getMilliseconds(),3),u=e.getTimezoneOffset(),l=u>0?"-":"+",d=a.a.lpad(Math.floor(Math.abs(u)/60),2),f=a.a.lpad(Math.abs(u)%60,2),p="".concat(l).concat(d).concat(f);return"".concat(t,"-").concat(n,"-").concat(i," ").concat(r,":").concat(o,":").concat(s,".").concat(c," ").concat(p)}}])&&i(t.prototype,n),r&&i(t,r),e}();t.a=new r},19:function(e,t,n){"use strict";t.a={INVITE_PREFIX:"tfs_invite_",STATE_CHANGE_EVENT:"stateChange",STATE:{MAXIMIZED:"maximized",MINIMIZED:"minimized",BUSY:"busy",OFFLINE:"offline",ENGAGED:"engaged"},STIMULI_TYPE:{AVAILABILITY:"availability",INTERACTION:"interaction",ACTION:"action"},ACTION:{OFFER:"offer",ACCEPT:"accept",DECLINE:"decline",IGNORE:"ignore",MINIMIZE:"minimize",REMOVE:"remove"},STIMULI:{AGENT_AVAILABLE:"availability_true",AGENT_UNAVAILABLE:"availability_false",INTERACTION_STARTED:"interaction_true",INTERACTION_ENDED:"interaction_false",INVITE_OFFERED:"action_offer",INVITE_ACCEPTED:"action_accept",INVITE_DECLINED:"action_decline",INVITE_IGNORED:"action_ignore",INVITE_MINIMIZED:"action_minimize",INVITE_REMOVED:"action_remove"},EVENT:{INVITE_OFFERED:"inviteOffered",INVITE_ACCEPTED:"inviteAccepted",INVITE_DECLINED:"inviteDeclined",INVITE_IGNORED:"inviteIgnored",QUEUE_AFTER_HOURS:"queueAfterHours",CA_CHECK_FAIL:"caCheckFail"},AVAILABILITY_CHECK:{NONE:"none",REPEAT:"repeat",ONCE:"once",TILL_AVAILABLE:"till_available"},TRACK_INTERACTION:{AVAILABILITY_CHECK:"AVAILABILITY_CHECK",INVITE_REQUESTED:"INVITE_REQUESTED",INVITE_OFFERED:"INVITE_OFFERED",INVITE_ACCEPTED:"INVITE_ACCEPTED",INVITE_DECLINED:"INVITE_DECLINED",INVITE_IGNORED:"INVITE_IGNORED",INVITE_ALREADY_MAXIMIZED:"INVITE_ALREADY_MAXIMIZED",INVITE_PAGE_BACKGROUND:"INVITE_PAGE_BACKGROUND",INVITE_INITIALIZATION_ERROR:"INVITE_INITIALIZATION_ERROR",INVITE_SET_STATE_ERROR:"INVITE_SET_STATE_ERROR"},ACTION_ATTRIBUTE:"data-tfs-action",QUEUE_ATTRIBUTE:"data-tfs-queue",SKILL_ATTRIBUTE:"data-tfs-skill",BADGE_ENABLED_ATTRIBUTE:"data-badge",BADGE_HINT_ATTRIBUTE:"data-hint",VIEW_ENABLED_ATTRIBUTE:"data-view",CUSTOM_EVENT_NAME:"tfsInviteStateChange",LIGHTBOX_CSS:{css:{backgroundColor:"#000000",position:"fixed",left:"0",top:"0",width:"100%",height:"100%",opacity:"0.85",zIndex:"2147483647"}},LOADER_CSS_ID:"tfs_loader_css",LOADER_CSS:".tfs-reset-css,.tfs-reset-css * {\n    background:none;\n    border:none;\n    bottom:auto;\n    clear:none;\n    cursor:default;\n    display:block;\n    float:none;\n    font-family:Arial, Helvetica, sans-serif;\n    font-size:medium;\n    font-style:normal;\n    font-weight:normal;\n    height:auto;\n    left:auto;\n    letter-spacing:normal;\n    line-height:normal;\n    margin:0;\n    max-height:none;\n    max-width:none;\n    min-height:0;\n    min-width:0;\n    overflow:visible;\n    outline:none;\n    position:static;\n    padding:0;\n    right:auto;\n    text-align:left;\n    text-decoration:none;\n    text-indent:0;\n    text-transform:none;\n    top:auto;\n    user-select:none;\n    -ms-user-select:none;\n    -webkit-user-select:none;\n    visibility:visible;\n    white-space:normal;\n    width:auto;\n    z-index:auto;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n  } .tfs-animate {\n    -webkit-animation-duration: 500ms;\n    animation-duration: 500ms;\n    -webkit-animation-name: tfsRubberBand;\n    animation-name: tfsRubberBand;\n  } @-webkit-keyframes tfsRubberBand {\n  from {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, 0.75, 1);\n    transform: scale3d(1.25, 0.75, 1);\n  }\n\n  40% {\n    -webkit-transform: scale3d(0.75, 1.25, 1);\n    transform: scale3d(0.75, 1.25, 1);\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, 0.85, 1);\n    transform: scale3d(1.15, 0.85, 1);\n  }\n\n  65% {\n    -webkit-transform: scale3d(0.95, 1.05, 1);\n    transform: scale3d(0.95, 1.05, 1);\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, 0.95, 1);\n    transform: scale3d(1.05, 0.95, 1);\n  }\n\n  to {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n}\n\n@keyframes tfsRubberBand {\n  from {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, 0.75, 1);\n    transform: scale3d(1.25, 0.75, 1);\n  }\n\n  40% {\n    -webkit-transform: scale3d(0.75, 1.25, 1);\n    transform: scale3d(0.75, 1.25, 1);\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, 0.85, 1);\n    transform: scale3d(1.15, 0.85, 1);\n  }\n\n  65% {\n    -webkit-transform: scale3d(0.95, 1.05, 1);\n    transform: scale3d(0.95, 1.05, 1);\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, 0.95, 1);\n    transform: scale3d(1.05, 0.95, 1);\n  }\n\n  to {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n}"}},20:function(e,t,n){"use strict";t.a={LOG_LEVEL:{DEBUG:100,INFO:200,WARN:300,ERROR:400},LOG_LEVEL_STRING:{100:"DEBUG",200:"INFO",300:"WARN",400:"ERROR"},LOG_EVENTS:{SESSION_UPDATE:"user.session.update",USER_ACTION:"user.action",WINDOW_ERROR:"window.error",SYSTEM_DEBUG:"system.debug",SYSTEM_ERROR:"system.error",CONFIG_ERROR:"config.error",PAGE_INIT:"page.init"},MAX_ERROR_MESSAGE_LENGTH:100,TIME_FORMAT:"%F %T.%L %z"}},204:function(e,t){function n(e){return e&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return e}function i(e,t){const i=(t=t||{}).delimiter||".",r=t.maxDepth,o=t.transformKey||a,s={};return function e(a,c,u){u=u||1,Object.keys(a).forEach((function(l){const d=a[l],f=t.safe&&Array.isArray(d),p=Object.prototype.toString.call(d),h=n(d),v="[object Object]"===p||"[object Array]"===p,g=c?c+i+o(l):o(l);if(!f&&!h&&v&&Object.keys(d).length&&(!t.maxDepth||u<r))return e(d,g,u+1);s[g]=d}))}(e),s}e.exports=i,i.flatten=i,i.unflatten=function e(t,r){const o=(r=r||{}).delimiter||".",s=r.overwrite||!1,c=r.transformKey||a,u={};if(n(t)||"[object Object]"!==Object.prototype.toString.call(t))return t;function l(e){const t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||r.object?e:t}return t=Object.keys(t).reduce((function(e,n){const a=Object.prototype.toString.call(t[n]);return!("[object Object]"===a||"[object Array]"===a)||function(e){const t=Object.prototype.toString.call(e),n="[object Array]"===t,a="[object Object]"===t;if(!e)return!0;if(n)return!e.length;if(a)return!Object.keys(e).length}(t[n])?(e[n]=t[n],e):function(e,t,n){return Object.keys(n).reduce((function(t,a){return t[e+o+a]=n[a],t}),t)}(n,e,i(t[n],r))}),{}),Object.keys(t).forEach((function(n){const a=n.split(o).map(c);let i=l(a.shift()),d=l(a[0]),f=u;for(;void 0!==d;){if("__proto__"===i)return;const e=Object.prototype.toString.call(f[i]),t="[object Object]"===e||"[object Array]"===e;if(!s&&!t&&void 0!==f[i])return;(s&&!t||!s&&null==f[i])&&(f[i]="number"!=typeof d||r.object?{}:[]),f=f[i],a.length>0&&(i=l(a.shift()),d=l(a[0]))}f[i]=e(t[n],r)})),u}},205:function(e,t,n){"use strict";var a=n(3),i=n(4),r=n(10);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=window,c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a.a.isNotUndefinedOrNull(t.targetOrigin,"targetOrigin"),a.a.isNotUndefinedOrNull(t.destinationWindow,"destinationWindow"),a.a.isNotUndefinedOrNull(t.listener,"listener"),this._targetOrigin=t.targetOrigin,this._destinationWindow=t.destinationWindow,this._listener=t.listener,s.addEventListener("message",(function(e){return n._listener(e)}),!1)}var t,n,c;return t=e,(n=[{key:"sendMessage",value:function(e){var t=this;i.a.isUndefinedOrNull(e)||r.a.requestTimeout((function(){t._destinationWindow.postMessage(e,t._targetOrigin)}),1)}}])&&o(t.prototype,n),c&&o(t,c),e}();t.a=c},206:function(e,t,n){var a,i;i=this,void 0===(a=function(e){!function(e){e.animate=function(e,n,a,i,r,o){if("number"==typeof e&&"number"==typeof n&&"number"==typeof a&&"function"==typeof i){"string"==typeof r&&t[r]&&(r=t[r]),"function"!=typeof r&&(r=t.linear),"function"!=typeof o&&(o=function(){});var s=window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},c=!1,u=n-e;i(e);var l=window.performance&&window.performance.now?window.performance.now():+new Date;return s((function t(d){if(!c){var f=(d||+new Date)-l;f>=0&&i(r(f,e,u,a)),f>=0&&f>=a?(i(n),o()):s(t)}})),{cancel:function(){c=!0}}}},e.animateCSS=function(t,n,a,i,r,o,s,c){return e.animate(i,r,o,(function(e){t.style[n]=e+a}),s,c)},e.cancel=function(e){e&&e.cancel()};var t=e.easings={};t.linear=function(e,t,n,a){return n*e/a+t},t.easeInQuad=function(e,t,n,a){return n*(e/=a)*e+t},t.easeOutQuad=function(e,t,n,a){return-n*(e/=a)*(e-2)+t},t.easeInOutQuad=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},t.easeInCubic=function(e,t,n,a){return n*(e/=a)*e*e+t},t.easeOutCubic=function(e,t,n,a){return n*((e=e/a-1)*e*e+1)+t},t.easeInOutCubic=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},t.easeInQuart=function(e,t,n,a){return n*(e/=a)*e*e*e+t},t.easeOutQuart=function(e,t,n,a){return-n*((e=e/a-1)*e*e*e-1)+t},t.easeInOutQuart=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},t.easeInQuint=function(e,t,n,a){return n*(e/=a)*e*e*e*e+t},t.easeOutQuint=function(e,t,n,a){return n*((e=e/a-1)*e*e*e*e+1)+t},t.easeInOutQuint=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},t.easeInSine=function(e,t,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+t},t.easeOutSine=function(e,t,n,a){return n*Math.sin(e/a*(Math.PI/2))+t},t.easeInOutSine=function(e,t,n,a){return-n/2*(Math.cos(Math.PI*e/a)-1)+t},t.easeInExpo=function(e,t,n,a){return 0==e?t:n*Math.pow(2,10*(e/a-1))+t},t.easeOutExpo=function(e,t,n,a){return e==a?t+n:n*(1-Math.pow(2,-10*e/a))+t},t.easeInOutExpo=function(e,t,n,a){return 0==e?t:e==a?t+n:(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},t.easeInCirc=function(e,t,n,a){return-n*(Math.sqrt(1-(e/=a)*e)-1)+t},t.easeOutCirc=function(e,t,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+t},t.easeInOutCirc=function(e,t,n,a){return(e/=a/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},t.easeInElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(1==(e/=a))return t+n;if(i||(i=.3*a),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return-r*Math.pow(2,10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)+t},t.easeOutElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(1==(e/=a))return t+n;if(i||(i=.3*a),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return r*Math.pow(2,-10*e)*Math.sin((e*a-o)*(2*Math.PI)/i)+n+t},t.easeInOutElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(2==(e/=a/2))return t+n;if(i||(i=a*(.3*1.5)),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)*-.5+t:r*Math.pow(2,-10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)*.5+n+t},t.easeInBack=function(e,t,n,a,i){return null==i&&(i=1.70158),n*(e/=a)*e*((i+1)*e-i)+t},t.easeOutBack=function(e,t,n,a,i){return null==i&&(i=1.70158),n*((e=e/a-1)*e*((i+1)*e+i)+1)+t},t.easeInOutBack=function(e,t,n,a,i){return null==i&&(i=1.70158),(e/=a/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},t.easeInBounce=function(e,n,a,i){return a-t.easeOutBounce(i-e,0,a,i)+n},t.easeOutBounce=function(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},t.easeInOutBounce=function(e,n,a,i){return e<i/2?.5*t.easeInBounce(2*e,0,a,i)+n:.5*t.easeOutBounce(2*e-i,0,a,i)+.5*a+n}}(i.TinyAnimate=e)}.apply(t,[t]))||(e.exports=a)},207:function(e,t,n){"use strict";t.a=function(){var e,t=!1,n=[1];try{e=n.map((function(e){return e+1})),t=n[0]+1===e[0]}catch(e){}return t}()},208:function(e,t,n){"use strict";t.a=function(){var e=!1;try{e="a"===Object.keys({a:1})[0]}catch(e){}return e}()},209:function(e,t,n){"use strict";t.a=function(){var e=!1,t=[1],n=[];try{t.forEach((function(e,t){n[t]=e+1})),e=t[0]+1===n[0]}catch(e){}return e}()},210:function(e,t,n){"use strict";t.a=function(){var e,t=!1;try{t=0===(e=["k0","k1","k2"].reduce((function(e,t,n){return e[t]=n,e}),{})).k0&&1===e.k1&&2===e.k2}catch(e){}return t}()},211:function(e,t,n){"use strict";var a=window;t.a=function(){var e=!1;try{var t=new Uint8Array(16);e=t===(a.crypto||a.msCrypto).getRandomValues(t)}catch(e){}return e}()},22:function(e,t,n){"use strict";var a=n(8),i=n(4);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e){return{type:"REFRESH_CONTEXT",context:e}}var s={chat:["visitorSessionId","interactionId"],va:["turnsId"]},c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialContext={},this.queuedContext=void 0}var t,n,c;return t=e,(n=[{key:"_listenChange",value:function(e){var t=this,n={};Object.keys(s).forEach((function(a){s[a].forEach((function(i){t.props[a]&&e[i]!==t.props[a][i]&&(n[i]=t.props[a][i])}))})),Object.keys(n).length>0&&this.refreshContext(n)}},{key:"subscribe",value:function(e){var t=this;this.store=e,this.store.subscribe((function(){var e=i.a.get(["props"],t,void 0),n=i.a.get(["app","context"],e,{});t.props=t.store.getState(),e&&e.controller.performStateSync&&!t.props.controller.performStateSync&&"REFRESH_CONTEXT"!==e.logger.actionType&&t.refreshContext(),t._listenChange(n)}))}},{key:"getContext",value:function(){return this.store&&this.props?this.props.app.context:this.initialContext}},{key:"getChatAuthToken",value:function(){return i.a.get(["props","chat","authToken"],this,void 0)}},{key:"refreshContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.queuedContext||i.a.get(["props","app","context"],this,this.initialContext),r=Object(a.a)({},n,e),s=i.a.get(["props","controller","performStateSync"],this,!1);this.store?s?this.queuedContext=r:(this.queuedContext=void 0,this.store.dispatch(o(r))):this.initialContext=r,t()}}])&&r(t.prototype,n),c&&r(t,c),e}();t.a=new c},23:function(e,t,n){"use strict";var a=n(3);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"shiftKey",value:function(e){return!!e.shiftKey}},{key:"ctrlKey",value:function(e){return!!e.ctrlKey}},{key:"altKey",value:function(e){return!!e.altKey}},{key:"shouldHandleActivate",value:function(e){return this.shouldHandle(e,[13,32])}},{key:"shouldHandleCancel",value:function(e){return this.shouldHandle(e,[27])}},{key:"shouldHandleFirst",value:function(e){return this.shouldHandle(e,[36])}},{key:"shouldHandleLast",value:function(e){return this.shouldHandle(e,[35])}},{key:"shouldHandlePrev",value:function(e){return this.shouldHandle(e,[38,37])}},{key:"shouldHandleNext",value:function(e){return this.shouldHandle(e,[40,39])}},{key:"shouldHandle",value:function(e,t){return a.a.isObject(e),!(this.shiftKey(e)||this.altKey(e)||this.ctrlKey(e))&&t.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation(),!0)}},{key:"suppressKeyDown",value:function(e){return a.a.isObject(e),32!==e.keyCode||"DIV"!==e.target.nodeName||(e.preventDefault(),!1)}}])&&i(t.prototype,n),r&&i(t,r),e}();t.a=new r},24:function(e,t,n){"use strict";var a=n(3);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=/^([a-z0-9.+-]+:)/i,o=/(https?:)\/\/([^/]+)(\/.*)*$/i,s=/(https?:\/\/[^/]+)(?:\/.+)*$/i,c=/^\s*$/,u=/\/(?!.*\/).*/,l=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,d=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,f;return t=e,(n=[{key:"normalizeUrl",value:function(e){a.a.notEmpty(e,"url");var t=window.location;return r.test(e)?e:/^\/\/.+/.test(e)?t.protocol+e:/^\/.+/.test(e)?t.origin+e:t.origin+t.pathname.replace(/\/[^/]+$/,"/")+e}},{key:"getOriginFromUrl",value:function(e){var t;if(a.a.assert(e,"url"),e.protocol&&e.hostname){if(!(t=e.origin)){var n=e.port,i="";n&&"80"!==n&&"443"!==n&&(i=":".concat(n)),t="".concat(e.protocol,"//").concat(e.hostname).concat(i)}}else a.a.notEmpty(e,"url"),t=this.normalizeUrl(e).replace(s,"$1");return t}},{key:"formatUrl",value:function(e){a.a.isObject(e,"urlObj"),a.a.notEmpty(e.origin,"urlObj.origin");var t=[e.origin];return e.pathname&&t.push(e.pathname),e.search&&t.push(e.search),e.hash&&t.push(e.hash),t.join("")}},{key:"parseUrl",value:function(e){var t=this;a.a.notEmpty(e,"url");var n=this.normalizeUrl(e),i=o.exec(n);if(!i)return{};var r=i[1],s=i[2],l=s.split(":");if(c.test(l[0]))return{};if(this.sanitizeUrl(n)!==n)return{};var d,f="",p="",h="";if(i[3]){var v=i[3].split("?");if(v.length>1)h=v[0],d=v[1].split("#"),f="?".concat(d[0]),d.length>1&&(p="#".concat(d[1]));else{var g=i[3].split("#");h=g[0],g.length>1&&(p="#".concat(g[1]))}}var E=function(e){return e},m=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",r=arguments.length>4?arguments[4]:void 0;a.a.isObject(n,"params"),a.a.assert(void 0===r||"boolean"==typeof r,"invalid encodeParams value");var o=r?encodeURIComponent:E,s=[];return e.length&&s.push(e.substring(1)),Object.keys(n).map((function(e){return s.push("".concat(e,"=").concat(void 0===e?"":o(n[e])))})),t+s.join(i)},y={protocol:r,host:s,hostname:l[0],port:l[1]?l[1]:"",origin:"".concat(r,"//").concat(s),pathname:h,search:f,hash:p,href:n,replaceResource:function(e){if(u.test(y.pathname)){var n=u.exec(y.pathname)[0];y.pathname=y.pathname.replace(n,"/".concat(e))}return y.href=t.formatUrl(y),y},secure:function(){var e=/http:/i;return y.origin=y.origin.replace(e,"https:"),y.protocol=y.protocol.replace(e,"https:"),y.href=y.href.replace(e,"https:"),y},appendToHash:function(e,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return y.hash=m(y.hash,"#",e,n,a),y.href=t.formatUrl(y),y},appendToSearch:function(e,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return y.search=m(y.search,"?",e,n,a),y.href=t.formatUrl(y),y}};return y}},{key:"parseUrlParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";a.a.notEmpty(e,"url"),a.a.assert(void 0===t||"?"===t||"#"===t,"invalid separator value");var n,i,r,o,s,c={},u=e.split(t);if(u.length>2&&(u[1]=u.splice(1,u.length-1).join(t)),u.length>1)for(n=u[1].split("&"),r=0;r<n.length;r+=1)o=(i=n[r].split("="))[0],i.splice(0,1),s=i.join("")||null,c[o]=decodeURIComponent(s);return c}},{key:"sanitizeUrl",value:function(e){return"null"===e||0===e.length||"about:blank"===e?"about:blank":e.match(l)||e.match(d)?e:"unsafe:".concat(e)}}])&&i(t.prototype,n),f&&i(t,f),e}();t.a=new f},26:function(e,t,n){"use strict";var a=n(3),i=n(81),r=n(5),o=n(8),s=n(40),c=n(36),u=n(22),l={PRE_RENDER_LOADING:"Loadingâ¦",PRE_RENDER_CLOSE:"Close",PRE_RENDER_TIMEOUT:"Still loading, but taking longer than usualâ¦",PRE_RENDER_FAILED_TITLE:"Loading failed",PRE_RENDER_FAILED_DESC:"Something went wrong. Make sure your Internet is up and running and reload this page."};function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f,p,h=new s.a,v={},g={},E=r.a.DEFAULT_CONFIG;function m(e){return e===r.a.DEFAULT_CONFIG?E:e}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=this.get(e),i=a.appId;this.update(i,t),n({appId:i})}function _(e){var t,n,a,r,s=e;return s.i18n.locale=("auto"!==(t=s.i18n.locale)?t:document.documentElement.lang?document.documentElement.lang:"undefined"==typeof navigator?"en":navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"en").toLowerCase().split("-")[0],"auto"!==s.i18n.locale&&(s.i18n.uiStrings=Object(o.a)({},s.i18n.uiStrings,(n={},a=s.i18n.locale,r={},a in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n))),Object.keys(s.i18n.uiStrings).forEach((function(e){s.i18n.uiStrings[e]=Object(o.a)({},l,s.i18n.uiStrings[e])})),0===s.supportHours.length&&(s.supportHours=i.a.supportHours),s}function I(e,t,n){var i=function(e){var t;if(a.a.notEmpty(e,"appId"),p)t="".concat(p.baseUrl,"/v1/frontends-console/clients/").concat(p.clientId,"/accounts/").concat(p.accountId,"/applications/published/").concat(e,"?environment=").concat(p.env);else{if(f.configroot)t=f.configroot;else{var n=f.key;t="".concat(f.origin,"/").concat(r.a.CONTENT_PATH,"/").concat(n)}t+="/".concat(e,"/").concat(r.a.UDE_CONFIG_JSON)}return t}(e);h.makeRequest("GET",i,void 0,void 0,(function(e){var n;try{n=JSON.parse(e),t(void 0,n)}catch(e){t({url:i,errorMsg:e.message,errorStack:e.stack})}}),(function(e){return t(e)}),void 0,void 0,void 0,n)}var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"init",value:function(e){if(f=Object(o.a)({},e.metaData),e.v2&&!0===e.v2.enabled){var t=e.metaData.key.split("-v1-001")[0];(p=e.v2).clientId=t,p.accountId=t,void 0===p.env&&(p.env=f.origin.indexOf("d1af033869koo7.cloudfront.net")>0?"live":"test")}}},{key:"get",value:function(e){var t=v[m(e)];return t?Object(o.a)({},t):void 0}},{key:"set",value:function(e){var t=c.a.transform(e),n=_(Object(o.a)({},i.a,t)),a=n.appId;v[a]=n,g[a]=Object(o.a)({},v[a])}},{key:"reset",value:function(e){var t=m(e);v[t]=g[t]}},{key:"update",value:function(e,t){var n=m(e),a=v[n];if(a){var i=_(Object(o.a)(a,t));v[n]=i}}},{key:"fetch",value:function(e,t,n,a){var i=this,o=e||r.a.DEFAULT_CONFIG;this.get(o)?y.call(this,o,t,n):I(o,(function(e,a){e?n({err:e}):(i.set(a),o===r.a.DEFAULT_CONFIG&&a.appId&&(E=a.appId),y.call(i,o,t,n))}),a)}},{key:"requestConfig",value:function(e,t,n,a,i,o){var s=this,l=t;t||(l=r.a.DEFAULT_CONFIG);var d=f&&f.key?f.key:e.clientId,p="".concat(e.baseUrl,"/clients/").concat(d,"/applications/").concat(l,"/configuration");!function(e,t,n,a,i,r){var o={};o.action=a,o.requestData=n,h.makeRequest("post",e,{Accept:"application/json","Content-type":"application/json",Authorization:t},JSON.stringify(o),(function(e){return i(void 0,e)}),(function(e){return i(e)}),void 0,void 0,void 0,r)}(p,e.apiKey,n,a,(function(e,t){if(e)i(e);else{var n={};try{n=JSON.parse(t),(n=c.a.transform(n)).prechatData&&(u.a.refreshContext(n.prechatData),delete n.prechatData)}catch(e){i({url:p,errorMsg:e.message,errorStack:e.stack})}s.update(l,n),i(void 0,n)}}),o)}}])&&d(t.prototype,n),a&&d(t,a),e}();t.a=new T},27:function(e,t,n){"use strict";t.a={SECURITY:{FRAME_IN_FRAME:"frame-in-frame",THIRD_PARTY_FRAME:"third-party-frame"},IFRAME_POST_MESSAGE:{SET_IFRAME_CSS:"SET_SN_IFRAME_CSS",SET_IFRAME_VIEWPORT:"SET_VIEWPORT",GET_BODY_CSS:"GET_BODY_CSS",SET_BODY_CSS:"SET_BODY_CSS"},IFRAME_INBOUND_MESSAGE:{MESSAGE_SOURCE:"_247_",RESP_GET_BODY_CSS:"RESP_GET_BODY_CSS"},IFRAME_BODY:"IFRAME_BODY",DEFAULT_MASKED_DATA_KEY:"secure"}},29:function(e,t,n){"use strict";t.a={STATES:{INIT:"INIT",INVITED:"INVITED",INITIALIZED:"INITIALIZED",TIMEOUT:"TIMEOUT",STARTED:"STARTED",JOINED:"JOINED",ENDED:"ENDED"},COMMANDS:{USER_CLOSE:"USER_CLOSE",AGENT_CLOSE:"AGENT_CLOSE"},MODES:{COBROWSE:"cobrowse",COVIEW:"coview"}}},3:function(e,t,n){"use strict";var a=n(11);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assert failed";e||c(t)}},{key:"isObject",value:function(e,t){var n=t?"".concat(t," is not an object"):"object expected";this.assert(a.a.isObject(e),n)}},{key:"isUndefinedOrNull",value:function(e,t){var n=t?"".concat(t," is not undefined or null"):"undefined or null expected";this.assert(null==e,n)}},{key:"isNotUndefinedOrNull",value:function(e,t){var n=t?"".concat(t," is undefined or null"):"undefined or null not expected";this.assert(null!=e,n)}},{key:"isBoolean",value:function(e,t){var n=t?"".concat(t," is not a boolean"):"boolean expected";this.assert(a.a.isBoolean(e),n)}},{key:"isFunction",value:function(e,t){var n=t?"".concat(t," is not a function"):"function expected";this.assert(a.a.isFunction(e),n)}},{key:"isNumber",value:function(e,t){var n=t?"".concat(t," is not a number"):"number expected";this.assert(a.a.isNumber(e),n)}},{key:"notEmpty",value:function(e,t){var n=t?"".concat(t," is not a string or is empty"):"non-empty string expected";this.assert(a.a.isString(e)&&!s.test(e),n)}},{key:"instanceOf",value:function(e,t,n){var a=n?"expected instance of ".concat(n):"unexpected instance type";this.assert(e instanceof t,a)}},{key:"isScalar",value:function(e,t){var n=i(e),a="".concat(t?"".concat(t," "):"","must be string, number, or boolean");this.assert("string"===n||"number"===n||"boolean"===n,a),"string"===n&&this.notEmpty(e,t)}},{key:"isArray",value:function(e,t){var n=t?"".concat(t," is not an array"):"array expected";this.assert(Array.isArray(e),n)}}])&&r(t.prototype,n),o&&r(t,o),e}(),s=/^\s*$/;function c(e){throw new Error(e)}t.a=new o},337:function(e,t,n){"use strict";var a=n(5),i=n(20),r=n(27),o=n(8),s=n(132),c=n(13),u=n(4),l=n(3),d=n(40),f=n(48),p=n(181);function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var v=!1,g=!1,E=(new Date).getTime(),m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"init",value:function(e,t,n){var a=this;l.a.notEmpty(e),l.a.isObject(t),l.a.notEmpty(t.baseUrl),l.a.notEmpty(t.apiKey),l.a.isObject(n),this.loggerConfig=t.opts.logger,this.loggerConfig&&(l.a.isObject(this.loggerConfig),l.a.isNumber(this.loggerConfig.level),l.a.isNumber(this.loggerConfig.flushTrigger)),this._basePath=[t.baseUrl,"clients",e,"applications"].join("/"),this._extraData=n,this._apiKey=t.apiKey,this._flushTrigger=this.loggerConfig.flushTrigger,this._logLevel=this.loggerConfig.level,this._interactions=[],window.addEventListener("beforeunload",(function(){a._interactions.length>0&&a.logFlush()})),g=!0}},{key:"setAppId",value:function(e){l.a.notEmpty(e),this._appId=e,v=!0}},{key:"setAppInteractionId",value:function(e){l.a.notEmpty(e),this._extraData.appInteractionId=e}},{key:"unsetAppInteractionId",value:function(){delete this._extraData.appInteractionId}},{key:"logInteraction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(v&&g){var n=e,a=n.logLevel;if(l.a.isNumber(a),a&&a<this._logLevel)return;var r={version:"ude-1.42.2",tsOffset:(new Date).getTime()-E,time:p.a.formatDate(new Date),tabVisible:f.a.documentHasFocus()};n.logLevel=i.a.LOG_LEVEL_STRING[a],n.logData=Object(o.a)({},this._extraData,n.logData,r),this._interactions.push(n),(t||this._interactions.length>=this._flushTrigger)&&this.logFlush()}}},{key:"logFlush",value:function(){var e=this._interactions;this._interactions=[];var t="".concat(this._basePath,"/").concat(this._appId,"/interactions");y.makeRequest("post",t,{"Content-Type":"application/json; charset=utf-8",Authorization:this._apiKey},JSON.stringify(e),(function(e){}),(function(e){e.response&&e.response.status}))}}])&&h(t.prototype,n),a&&h(t,a),e}(),y=new d.a,_=new m,I=n(204),T=n.n(I),b=n(137);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var A=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"encode",value:function(e){var t=this.getBuckets().reduce((function(e,t){return e[t]={},e}),{}),n=T.a.flatten(e),a=b.a.KEY_MAP;return Object.keys(n).map((function(e){var i=a.find((function(t){return t.key===e}));if(i){var r=n[e];"boolean"===i.type&&(r=!0===n[e]?1:0),t=Object(o.a)({},t,S({},i.bucket,S({},i.short,r)))}return 0})),t}},{key:"decode",value:function(e){var t={},n=T.a.flatten(e);return b.a.KEY_MAP.map((function(e){var a=e.bucket,i=e.short,r="".concat(a,".").concat(i);if(void 0!==n[r]){var s=n[r];"boolean"===e.type?s=1===n[r]:"number"===e.type&&(s=""===n[r]?void 0:n[r]),t=Object(o.a)({},t,S({},e.key,s))}return 0})),T.a.unflatten(t)}},{key:"getBuckets",value:function(){return b.a.BUCKETS}}])&&O(t.prototype,n),a&&O(t,a),e}());function w(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var C="".concat(a.a.STORAGE_KEY_NAMES.USER_SESSION,"."),k="Session data length exceeded 500",R="CustomStorage::get - failed to get",N="CustomStorage::set - failed to set",D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getData=t.getData,this._setData=t.setData}var t,n,a;return t=e,(n=[{key:"_log",value:function(e){_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:{errorMsg:e}},!0)}},{key:"_checkDataLength",value:function(e,t){e.length>500&&this._log("".concat(t," ").concat(k))}},{key:"set",value:function(e){var t=this,n=e;l.a.isObject(e,"CustomStorage::set data");try{var a=A.encode(n);Object.keys(a).map((function(e){var n=a[e];return t._checkDataLength(JSON.stringify(n),e),t._setData("".concat(C).concat(e),n),0}))}catch(e){var i="".concat(N,": ").concat(e);this._log(i)}}},{key:"get",value:function(e){var t=this;l.a.isFunction(e,"callback");var n={},a=A.getBuckets().reduce((function(e,t){return e[t]=!1,e}),{});A.getBuckets().map((function(i){return t._getData("".concat(C).concat(i),(function(r,o){var s=o;try{n[r.substr(C.length)]=s}catch(e){var c="".concat(R,' "').concat(r,'" "').concat(JSON.stringify(s),'": ').concat(e);t._log(c)}a[i]=!0,!0===Object.keys(a).reduce((function(e,t){return e=e&&a[t]}),!0)&&e(A.decode(n))})),0}))}}])&&w(t.prototype,n),a&&w(t,a),e}(),L=n(24),M=n(205);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var F=function(){function e(t,n,a,i){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l.a.isFunction(t,"XDStorage: successCallback"),l.a.isFunction(n,"XDStorage: errorCallback"),l.a.isFunction(a,"XDStorage: updateCallback"),l.a.notEmpty(i.storageKey,"XDStorage: options.storageKey"),l.a.notEmpty(i.sessionKey,"XDStorage: options.sessionKey"),l.a.notEmpty(i.path,"XDStorage: options.path"),this._storageKey=i.storageKey,this._sessionKey=i.sessionKey,this._successCallback=t,this._errorCallback=n,this._updateCallback=a,r="".concat(i.path,"/xd.html"),this._xdOrigin=L.a.parseUrl(r).secure().appendToHash({origin:location.origin,storageKey:this._storageKey},void 0,!0),this._xdUrl=this._xdOrigin.href,l.a.notEmpty(this._xdUrl,"xdUrl"),this._loadXdHtml(this._xdUrl)}var t,n,i;return t=e,(n=[{key:"_loadXdHtml",value:function(e){var t=null;(t=document.createElement("iframe")).id="tfsxdframe",t.src=e,document.getElementsByTagName("head")[0].appendChild(t),this._communicator=new M.a({targetOrigin:this._xdOrigin.origin,listener:this._messageHandler.bind(this),destinationWindow:t.contentWindow})}},{key:"_messageHandler",value:function(e){var t={};if(e.origin===this._xdOrigin.origin){try{t=JSON.parse(e.data)}catch(e){return}switch(t.queryCommand){case a.a.XD_COMMANDS.INITIALIZE:"object"===P(t.data)&&this._updateCallback(t.data),this._successCallback(a.a.STORAGE_TYPES.XD,this);break;case a.a.XD_COMMANDS.INITIALIZE_ERROR:this._errorCallback("XDSTORAGE_".concat(t.error));break;case a.a.XD_COMMANDS.UPDATE:if(t.data.key!==this._storageKey)break;var n={oldValue:t.data.oldValue,newValue:t.data.newValue};this._updateCallback(n)}}}},{key:"get",value:function(){}},{key:"set",value:function(e,t,n){this._sendCommand(a.a.XD_COMMANDS.SET,e,t,n)}},{key:"addStorageListener",value:function(){}},{key:"remove",value:function(e,t){this._sendCommand(a.a.XD_COMMANDS.REMOVE,e,t)}},{key:"_sendCommand",value:function(e,t,n,a){var i={command:e,key:t,value:n,opts:a};this._communicator.sendMessage(JSON.stringify(i))}}])&&x(t.prototype,n),i&&x(t,i),e}(),U=n(11);function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var H=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"isPopup",value:function(){return window._tfs&&window._tfs.isPopup}},{key:"getWindowParams",value:function(){var e=!1;try{var t=atob(window.name.replace(/_a/g,"+").replace(/_b/g,"/").replace(/_c/g,"="));e=JSON.parse(t)}catch(e){}return e}},{key:"generateSecureWindowName",value:function(e){var t=!1;try{var n=JSON.stringify(e);t=btoa(n).replace(/\+/g,"_a").replace(/\//g,"_b").replace(/=/g,"_c")}catch(e){}return t}}])&&j(t.prototype,n),a&&j(t,a),e}());function B(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var G={},Y=!1,V=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=this;if(!Y){this._initCallback=e.initCallback,this._storageKey="".concat(e.clientId||"default","||").concat(a.a.STORAGE_KEY_NAMES.USER_SESSION),this._useCustomStorage=!!c.a.safariVersion,this._sessionKey=a.a.STORAGE_KEY_NAMES.TAB_SESSION,this._getData=e.getData,this._setData=e.setData,this._forceCrossOrigin=e.forceCrossOrigin,this._storageType=void 0,this._store=void 0,this._storageTypeReasons=[],this._listeners=[],this._storageTypeReasons.push("FORCE_CROSS_ORIGIN_".concat(this._forceCrossOrigin.toString().toUpperCase()));var n=function(e,n){t._store=n,t._storageType=e,Y=!0,t._initCallback(t)};H.isPopup()&&H.getWindowParams()&&H.getWindowParams().storageType===a.a.STORAGE_TYPES.CUSTOM?this._createCustomStorage(n):this._forceCrossOrigin?c.a.safariVersion?this._createCustomStorage(n):this._store=new F(n,(function(e){t._storageTypeReasons.push(e),t._createCustomStorage(n)}),(function(e){var n=e;Y||Object.keys(n).forEach((function(e){G[e]=Object(o.a)({},G[e],n[e])})),n.oldValue&&!Object.keys(n.oldValue).length&&(n.oldValue=G),U.a.isObject(n.newValue)&&Object.keys(n.newValue).forEach((function(e){G[e]=n.newValue[e]}));for(var a=0;a<t._listeners.length;a+=1)t._listeners[a].call(t,n)}),{storageKey:this._storageKey,sessionKey:this._sessionKey,path:e.xdPath}):this._createStorage(n)}}},{key:"_createStorage",value:function(e){var t;try{var n=(t=new s.a("localStorage",this._storageKey)).getAll();G[this._sessionKey]=Object(o.a)({},G[this._sessionKey],n[this._sessionKey]),this.addStorageListener=function(e){t.addStorageListener(e)},e(a.a.STORAGE_TYPES.LOCALSTORAGE,t)}catch(t){this._createCustomStorage(e)?this._storageTypeReasons.push("XDLOCALSTORAGE_SETSTORE_ERROR"):this._storageTypeReasons.push("XDLOCALSTORAGE_NOSTORE")}}},{key:"_createCustomStorage",value:function(e){var t,n=this;return!(!this._getData||!this._setData||((t=new D({getData:this._getData,setData:this._setData})).get((function(i){G[n._sessionKey]=Object(o.a)({},G[n._sessionKey],i),e(a.a.STORAGE_TYPES.CUSTOM,t)})),0))}},{key:"getStorageTypeReasons",value:function(){return this._storageTypeReasons.join(",")}},{key:"getStorageType",value:function(){return this._storageType}},{key:"get",value:function(e){return G[e]}},{key:"set",value:function(e,t,n){switch(this._storageType){case a.a.STORAGE_TYPES.CUSTOM:n.syncCustomStorage&&this._store.set(Object(o.a)({},G[this._sessionKey],t));break;case a.a.STORAGE_TYPES.XD:case a.a.STORAGE_TYPES.LOCALSTORAGE:this._store.set(e,t,n)}G[e]=Object(o.a)({},G[e],t),G[a.a.SOURCE]=n.tabId}},{key:"addStorageListener",value:function(e){this._listeners.push(e)}},{key:"remove",value:function(e,t){switch(t&&t.length>0?G[e]=u.a.removeSpecificKeys(G[e],t):G[e]={},this._storageType){case a.a.STORAGE_TYPES.CUSTOM:this._store.set(Object(o.a)({},G[this._sessionKey]));break;case a.a.STORAGE_TYPES.XD:case a.a.STORAGE_TYPES.LOCALSTORAGE:this._store.remove(e,t)}}}])&&B(t.prototype,n),i&&B(t,i),e}()),W=n(17),K=n(10),q=n(59);function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var X=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentBody=void 0,this._parentBodyStyle="",this._initialized=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(e){this._parentBody=e.frameInFrame?document.body:parent.document.body,c.a.isMobileSafari||c.a.isIpad||(this._initialized=!0),this._initialized||(this._parentBodyStyle=this._parentBody.hasAttribute("style")?this._parentBody.getAttribute("style"):"",this._initialized=!0),this._securityRestrictions=e}},{key:"setStyle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._securityRestrictions.frameInFrame){q.a.sendMessage(r.a.IFRAME_POST_MESSAGE.SET_IFRAME_CSS,t,n);var a={height:"100%",width:"100%"};W.a.setStyle(e,a)}else W.a.setStyle(e,t,n)}},{key:"redrawWidget",value:function(e,t){c.a.isMobileSafari&&c.a.iosVersion<=8&&W.a.redrawElement(e,Object(o.a)({},t,{bottom:"1px"}),t)}},{key:"changeBodyStyle",value:function(e){if(e===r.a.IFRAME_BODY&&document.body&&document.body.setAttribute("style","overflow: hidden"),c.a.isMobileSafari&&!c.a.isTablet)if(e===a.a.WIDGET_STATE.MAXIMIZED){if(this._parentBody){var t="position:fixed;display:block;height:100%;width:100%;height:100vh;width:100vw;";this._securityRestrictions.frameInFrame&&q.a.sendMessage(r.a.IFRAME_POST_MESSAGE.SET_BODY_CSS,{css:t,isMaximized:!0},!0),this._parentBody.setAttribute("style",t)}W.a.getOrientation()===a.a.ORIENTATIONS.PORTRAIT&&K.a.requestTimeout(this.scrollWindowOnTopOfKeyboard.bind(this),100)}else u.a.isUndefinedOrNull(this._parentBody)||this._parentBody.setAttribute("style",this._parentBodyStyle),this._securityRestrictions.frameInFrame&&q.a.sendMessage(r.a.IFRAME_POST_MESSAGE.SET_BODY_CSS,{},!0)}},{key:"scrollWindowOnTopOfKeyboard",value:function(){this._securityRestrictions.frameInFrame?window.scrollTo(0,this._parentBody.clientHeight-this._parentBody.scrollTop):parent.window.scrollTo(0,this._parentBody.clientHeight-this._parentBody.scrollTop)}}])&&z(t.prototype,n),i&&z(t,i),e}()),Z=n(14),J=n(15);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ee,te,ne,ae,ie=!1,re={};function oe(e){try{var t=e.newValue,n=e.oldValue;if(t[a.a.SOURCE]===t[this.getTabId()])return;Object.keys(t).length>0&&(this._notifyListeners(n,t),this._onStoreUpdate(t))}catch(e){}}var se=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=this;if(!ie){ee=e.storage,l.a.isObject(ee,"storage"),l.a.isFunction(ee.get,"storage.get"),l.a.isFunction(ee.set,"storage.set");try{this._sessionStorage=new s.a("sessionStorage",a.a.TAB_STORAGE_KEY)}catch(e){this._sessionStorage={store:{},getAll:function(){return t._sessionStorage.store},set:function(e,n){t._sessionStorage.store[e]=n}}}te=a.a.STORAGE_KEY_NAMES.TAB_SESSION,ne=a.a.STORAGE_KEY_NAMES.TAB_PREFIX,this.isExistingTab=!1,ae=this._getTabId(),this._onStoreUpdate=e.onStoreUpdate,this.tab={set:function(e,n){return t._set(e,n,a.a.TAB_SESSION_KEY)},get:function(e){return t._get(e,a.a.TAB_SESSION_KEY)}},this.browser={set:function(e,n){return t._set(e,n,a.a.BROWSER_SESSION_KEY)},get:function(e){return t._get(e,a.a.BROWSER_SESSION_KEY)}},ee.addStorageListener(oe.bind(this));var n=e.activeSession;this._checkAndInitWorkflowSession(a.a.CHAT_SESSION_KEY),this._checkAndInitWorkflowSession(a.a.VA_SESSION_KEY),this._checkAndInitWorkflowSession(a.a.MESSAGING_SESSION_KEY);var i=this.browser.get(a.a.PRECHAT_DATA_KEYS.ACTIVE_SESSION);n&&n!==i&&!e.interLobEnabled&&(this.removeSessionData(),this.browser.set(a.a.PRECHAT_DATA_KEYS.ACTIVE_SESSION,n)),this.tab.set("app",{tabId:this.getTabId()}),ie=!0}}},{key:"_checkAndInitWorkflowSession",value:function(e){var t,n,a,i=this.browser.get(e);if(u.a.isUndefinedOrNull(i)){var r=(a={},(n=e)in(t={})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t);this.browser.set(r)}}},{key:"_getTabId",value:function(){var e;try{var t=this._sessionStorage.getAll();(e=u.a.get(["id"],t))&&e.indexOf(ne)>=0?this.isExistingTab=!0:(e=ne+J.a.get(5),this._sessionStorage.set("id",e))}catch(e){}return e}},{key:"_getData",value:function(e){return e===a.a.TAB_SESSION_KEY?ee.get(ae):e===a.a.BROWSER_SESSION_KEY?ee.get(te):ee.get(e)}},{key:"_setData",value:function(e,t){var n,i=e;t===a.a.BROWSER_SESSION_KEY?n=te:t===a.a.TAB_SESSION_KEY&&(n=ae);var r={tabId:ae};i.syncCustomStorage&&(r.syncCustomStorage=!0,delete i.syncCustomStorage),ee.set(n,i,r)}},{key:"removeSessionData",value:function(e){ee.remove(te,e)}},{key:"_get",value:function(e,t){var n=this._getData(t);return e?n?n[e]:void 0:n}},{key:"_set",value:function(e,t,n){if("object"!==Q(e)){var a={};a[e]=t,this._setData(a,n)}else this._setData(e,n)}},{key:"addListener",value:function(e,t){l.a.isFunction(t);var n=re[e]?re[e]:[];n.push(t),re[e]=n}},{key:"removeListener",value:function(e,t){if(l.a.isFunction(t),re[e]){var n=re[e];re[e]=n.splice(n.indexOf(t),1)}}},{key:"_notifyListeners",value:function(e,t){var n=this;if(Object.keys(e).length>0){var a=Object(o.a)({},e[te],e[ae]),i=Object(o.a)({},t[te],t[ae]);Object.keys(re).map((function(e){return n._diff(a,i,e)}))}else{var r=Object(o.a)({},t[te],t[ae]);Object.keys(re).map((function(e){return r[e]&&n._notify(r[e],e),0}))}}},{key:"_diff",value:function(e,t,n){var a,i;if(n.indexOf(".")>-1?(a=Z.a.getObjectReference(n,e),i=Z.a.getObjectReference(n,t)):(a=e[n],i=t[n]),a&&i)if(Array.isArray(a)){if(!Z.a.arrayDeepEquals(a,i))return this._notify(i,n)}else{if("object"===Q(a))return this._diff(a,i,n);if(a!==i)return this._notify(i,n)}else if(a||i)return this._notify(i,n);return 0}},{key:"_notify",value:function(e,t){re[t]&&re[t].map((function(n){return n(t,e)}))}},{key:"getTabId",value:function(){return ae}},{key:"getSource",value:function(){return this._getData(a.a.SOURCE)}}])&&$(t.prototype,n),i&&$(t,i),e}()),ce=n(22),ue=["appInteractionId","ruleId","inviteId","triggerAppId","state","queue"];function le(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ve=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"configure",value:function(e){this._onTrackEvent=e.onTrackEvent,this._logger=e.logger,this._channelSessionId=e.channelSessionId,this._ignoreEvents=e.events.ignoreList,this._onTrackEvent||(this._onTrackEvent=Z.a.noop)}},{key:"exitSurveyShown",value:function(e){return Object(o.a)({},this.exitSurveys(e),{name:"OnlineScreenLoadEvent"})}},{key:"exitSurveySubmit",value:function(e){var t=e.formData||{};return Object(o.a)({},this.exitSurveys(e),{name:"OnlineSurveySubmitEvent",questionsAndAnswers:Object.keys(t).map((function(e){return{question:e,answer:t[e]}}))})}},{key:"exitSurveys",value:function(e){return l.a.notEmpty(e.interactionId,"Tracker.exitSurveys - interactionId"),l.a.notEmpty(e.queue,"Tracker.exitSurveys - queue"),l.a.notEmpty(e.ruleId,"Tracker.exitSurveys - ruleId"),l.a.notEmpty(e.ruleCategory,"Tracker.exitSurveys - ruleCategory"),Object(o.a)({},this.commons(),{screenType:"SURVEY",targetChannelType:"WEB",optSharedSessionId:e.interactionId,platform:e.platform,source:e.source,clientKey:e.clientKey,Queue:e.queue,RuleId:e.ruleId,inviteType:"b"===e.ruleCategory?"BUTTON":"PROACTIVE"})}},{key:"prechatShown",value:function(){return Object(o.a)({},this.commons(),{name:"OnlineScreenLoadEvent",screenType:"PRECHAT",targetChannelType:"WEB"})}},{key:"prechatSubmit",value:function(e){var t=this.commons(),n=e.formData||{};return Object(o.a)(t,{name:"OnlineSurveySubmitEvent",screenType:"PRECHAT",targetChannelType:"WEB",questionsAndAnswers:Object.keys(n).map((function(e){return{question:e,answer:n[e]}}))}),u.a.isUndefinedOrNull(n.skill)||(t.Skill=n.skill),u.a.isUndefinedOrNull(n.queue)||(t.Queue=n.queue),t}},{key:"cardInvited",value:function(e){return Object(o.a)({},this.cards(e),{treatmentName:"activeCardSent"})}},{key:"cardAccepted",value:function(e){return Object(o.a)({},this.cards(e),{treatmentName:"activeCardViewed",userAction:"BUTTON_CLICKED",userResponse:"ACCEPTED"})}},{key:"cardSubmitted",value:function(e){return Object(o.a)({},this.cards(e),{treatmentName:"activeCardSubmitted",userAction:"BUTTON_CLICKED",outcome:"COMPLETE"})}},{key:"cards",value:function(e){l.a.notEmpty(e.workflow,"Tracker.cards - workflow"),l.a.notEmpty(e.name,"Tracker.cards - name");var t=e.workflow,n=e.name,i=a.a.TRACK_PLATFORMS[t];return this.treatment({platform:i,invitation:{invitePageID:n}})}},{key:"inviteOffered",value:function(e){return Object(o.a)({},this.invites(e),{name:"OnlineInvitationOfferEvent"})}},{key:"inviteAccepted",value:function(e){return Object(o.a)({},this.invites(e),{name:"OnlineInvitationResponseEvent",response:"ACCEPTED"})}},{key:"inviteDeclined",value:function(e){return Object(o.a)({},this.invites(e),{name:"OnlineInvitationResponseEvent",response:"DECLINED"})}},{key:"inviteIgnored",value:function(e){return Object(o.a)({},this.invites(e),{name:"OnlineInvitationResponseEvent",response:"IGNORED"})}},{key:"sessionEngaged",value:function(){return Object(o.a)({},this.commons(),{name:"OnlineSessionEngageEvent"})}},{key:"visitorIdChanged",value:function(e){return fe(fe({},e),{},{name:"VISITOR_ID_CHANGED"})}},{key:"queueAfterHours",value:function(e){return fe(fe({},this.application(e)),{},{appInfo:"queueAfterHours"})}},{key:"caCheckFail",value:function(e){return fe(fe({},this.application(e)),{},{appInfo:"caCheckFail"})}},{key:"application",value:function(e){return Object(o.a)({name:"Application",channel:"OMNICHANNEL",platform:"CHAT",source:"UDE",appEntity:"TIE_FRONTEND",appAction:"CHAT_SESSION_CHECK"},e)}},{key:"invites",value:function(e){var t=this.commons(),n=e.appInteractionId,a=e.ruleId,i=e.inviteId,r=(e.triggerAppId,e.state),s=e.queue,c=le(e,ue);return l.a.notEmpty(n,"In Tracker.Invites appInteractionId"),l.a.notEmpty(a,"In Tracker.Invites ruleId"),l.a.notEmpty(i,"In Tracker.Invites inviteId"),l.a.notEmpty(r,"In Tracker.Invites state"),l.a.notEmpty(s,"In Tracker.Invites queue"),Object(o.a)(t,{appInteractionId:n,RuleId:a,inviteId:i,inviteType:"maximized"===r?"PROACTIVE":"BUTTON",Queue:s,targetChannelType:"ONLINE"},c),t}},{key:"commons",value:function(){return{appInteractionId:ce.a.getContext()[a.a.PRECHAT_DATA_KEYS.APP_INTERACTION_ID]}}},{key:"treatment",value:function(e){return Object(o.a)({name:"Treatment",channel:"OMNICHANNEL",source:"UDE",treatmentCategory:"INVITE",invitation:{inviteType:"CARD",targetChannel:"WEB"}},e)}},{key:"logTrackEvent",value:function(e){var t=this[e.event](e.eventData),n=t.name;delete t.name;try{this._onTrackEvent(n,Z.a.noop,t)}catch(e){throw new Error("onTrackEvent API: ".concat(e.message||e))}}},{key:"log",value:function(e){if(!(this._ignoreEvents.indexOf(e.event)>-1))try{this.logTrackEvent(e)}catch(e){this._logger({errorMsg:e.message||e,errorStack:e.stack})}}}])&&he(t.prototype,n),i&&he(t,i),e}()),ge=["tabId"];function Ee(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ye,_e,Ie,Te=window,be=!1;function Se(){try{var e=JSON.stringify(Ie);se.browser.set(a.a.JOURNEY,e)}catch(e){}}function Oe(e,t){var n=se.getTabId(),a=(new Date).getTime();for(Ie.unshift({title:e,url:t,time:1,loadts:a,tabId:n});Ie.length>ye;)Ie.pop();Se()}function Ae(){var e=Ie[0];if(e){var t=e.time;e.tabId===se.getTabId()&&(Ie[0].time=t+10,Se())}}var we=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t,n){if(!be){ye=e.maxUrls,_e=e.maxUrlsLength;try{Ie=JSON.parse(se.browser.get(a.a.JOURNEY))}catch(e){Ie=[]}if(se.addListener(a.a.JOURNEY,(function(e,t){try{t&&(Ie=JSON.parse(t))}catch(e){}})),e.autoPush)if(t.frameInFrame&&n)try{var i=JSON.parse(decodeURIComponent(n)||"{}");i&&i.title&&i.url&&Oe(i.title,i.url)}catch(e){}else Oe(Te.document.title,Te.location.href);be=!0,Te.setInterval(Ae,1e4)}}},{key:"pushUrl",value:function(e,t){be&&Oe(e,t)}},{key:"getJourneyEncoded",value:function(e){var t,n=e||Ie.map((function(e){return e.tabId,Ee(e,ge)}));if(n){try{t=encodeURIComponent(JSON.stringify(n))}catch(e){return}return t.length<=_e?t:(n.pop(),this.getJourneyEncoded(n))}}}])&&me(t.prototype,n),i&&me(t,i),e}()),Ce=n(54),ke=n(26),Re=n(16),Ne=n(72);function De(e){var t=e;t.preventDefault(),t.returnValue=""}var Le={enable:function(){window.addEventListener("beforeunload",De)},disable:function(){window.removeEventListener("beforeunload",De)}},Me=n(139),Pe="tfs-apple-business-chat-js",xe="tfs-apple-business-chat",Fe="apple-business-chat-message-container",Ue=3e4,je={ID:"id",CLASS_NAME:"class",BUSINESS_ID:"data-apple-business-id",INTENT_ID:"data-apple-business-intent-id",GROUP_ID:"data-apple-business-group-id",MESSAGE_BODY:"data-apple-business-body",THEME:"data-apple-button-theme"},He={margin:"-1px",padding:0,width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",position:"absolute"};function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ye,Ve,We,Ke=document,qe=window,ze=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"configure",value:function(e,t){var n=this;if(Ve=e,this._shouldLoadScript(e)){var a=e.scriptUrl,i=e.businessId;l.a.notEmpty(a,"appleBusinessChat.scriptUrl"),l.a.notEmpty(i,"appleBusinessChat.businessId"),W.a.injectScript(a,(function(e){Ye=qe.appleBusinessChat,t(!0,{url:a,status:e,supported:n.isSupported()})}),Ke,{id:Pe},Ue)}else t(!1)}},{key:"_shouldLoadScript",value:function(e){var t=!1;return(c.a.isMac||(c.a.isMobileSafari||c.a.isIpad)&&c.a.iosVersion>10)&&(t=e.enabled[c.a.getDevice()]||e.loadOnly),t}},{key:"isSupported",value:function(){return!!Ye&&!Ve.loadOnly&&!1!==Ve.enabled[c.a.getDevice()]&&Ye.isSupported()}},{key:"trigger",value:function(e){var t;if(!this.isSupported())return!1;var n=Ve,a=n.businessId,i=n.intentId,r=n.groupId,o=n.messageBody,s=(Be(t={},je.ID,xe),Be(t,je.CLASS_NAME,Fe),Be(t,je.BUSINESS_ID,a),t),c=Z.a.getFunctionReference(i);if(c){var u=c(e);u&&"string"==typeof u&&(s[je.INTENT_ID]=u)}var l=Z.a.getFunctionReference(r);if(l){var d=l(e);d&&"string"==typeof d&&(s[je.GROUP_ID]=d)}var f=Z.a.getFunctionReference(o);if(f){var p=f(e);p&&"string"==typeof p&&(s[je.MESSAGE_BODY]=p)}W.a.removeElement(xe);var h=W.a.createElement("div",s);return W.a.setStyle(h,He),Ke.body.appendChild(h),Ye.refresh(),h.querySelector("a").click(),!0}}])&&Ge(t.prototype,n),a&&Ge(t,a),e}()),Xe={INTENT_ID:"data-google-business-intent-id",GROUP_ID:"data-google-business-group-id"};function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Qe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"configure",value:function(e){We=e}},{key:"isSupported",value:function(){return!1!==We.enabled[c.a.getDevice()]&&(c.a.isAndroid||c.a.isAndroidTablet)&&c.a.androidVersion>6}},{key:"trigger",value:function(e){if(!this.isSupported())return!1;var t=We,n=t.intentId,a=t.groupId,i=L.a.parseUrl(We.url),r=Z.a.getFunctionReference(n);if(r){var o=r(e);o&&"string"==typeof o&&i.appendToSearch(Ze({},Xe.INTENT_ID,o))}var s=Z.a.getFunctionReference(a);if(s){var c=s(e);c&&"string"==typeof c&&i.appendToSearch(Ze({},Xe.GROUP_ID,c))}return window.open(i.href),!0}}])&&Je(t.prototype,n),a&&Je(t,a),e}()),$e=["appInteractionId","ruleId","queue","state","inviteId","triggerAppId","trackingId","appId","dockId"],et=["onStateChange","securityRestrictions","disableBackgroundInvite"];function tt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nt(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function at(e){ze.isSupported()?ze.trigger(e):Qe.isSupported()?Qe.trigger(e):function(e){var t=e.appInteractionId,n=e.ruleId,a=e.queue,i=e.state,r=e.inviteId,s=(e.triggerAppId,e.trackingId),c=e.appId,u=e.dockId,l=nt(e,$e),d={chat:{assistQueue:a}},f=Object(o.a)({},{appInteractionId:t,sc:n,queue:a,rc:"maximized"===i?"p":"b",btnName:r,btnTyp:r,trackingId:s},l),p={workflowConfig:d};ce.a.refreshContext(f),la.startInteraction(c,u,p)}(e)}var it,rt,ot,st=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"init",value:function(e){var t,n=e.onStateChange,a=e.securityRestrictions,i=e.disableBackgroundInvite,r=nt(e,et),o="desktop";c.a.isPhone&&(o="phone"),c.a.isTablet&&(o="tablet"),a.frameInFrame&&(t=q.a.sendMessage);var s=ve.log.bind(ve);Me.a.init(r,{startInteraction:at,logEvent:s,device:o,onStateChange:n,disableBackgroundInvite:i,fifMessageSender:t,trackInteraction:_.logInteraction.bind(_)})}},{key:"triggerInvite",value:function(e,t){var n=ke.a.get(e);u.a.isUndefinedOrNull(t)?la.startInteraction(e):Me.a.triggerInvite({appId:e,invites:n.invites,supportHours:n.supportHours,workflowConfig:n.workflowConfig.chat||{}},t)}},{key:"removeInvite",value:function(e){Me.a.removeInvite(e)}},{key:"setInteractionActive",value:function(e){l.a.isBoolean(e,"InviteInterface: status"),Me.a.setInteractionActive(e)}}],(n=null)&&tt(t.prototype,n),a&&tt(t,a),e}(),ct=n(37);function ut(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var lt,dt=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){it=e.metaData,rt=e.storageType}},{key:"getPopupWindowConfig",value:function(e,t){var n,i,r=ke.a.get(e),o=function(e){var t={};switch(e.popupWindow.windowPosition){case a.a.POSITION.TOP_LEFT:t.left=0,t.top=0;break;case a.a.POSITION.TOP_RIGHT:t.left=window.screen.width-e.windowWidth,t.top=0;break;case a.a.POSITION.BOTTOM_LEFT:t.left=0,t.top=window.screen.height-e.windowHeight;break;case a.a.POSITION.BOTTOM_RIGHT:t.left=window.screen.width-e.windowWidth,t.top=window.screen.height-e.windowHeight;break;default:t.left=0,t.top=0}return t}(r),s=(i=["".concat(ct.a.URL_PARAMS.CLIENT_KEY,"=").concat(it.key),"".concat(ct.a.URL_PARAMS.IS_POPUP,"=true")].join("&"),n="".concat(it.path,"/apploader.html"),n=L.a.parseUrl(n).secure().href,"".concat(n,"?").concat(i)),c={appId:e,overrideConfig:t,context:ce.a.getContext(),storageType:rt};return{windowUrl:s,windowName:H.generateSecureWindowName(c),windowFeatures:["width=".concat(r.popupWindow.windowWidth),"height=".concat(r.popupWindow.windowHeight),"resizeable=yes","left=".concat(o.left),"top=".concat(o.top)].join(",")}}},{key:"start",value:function(e,t){var n=this;if(ot)ot.focus();else{var i=this.getPopupWindowConfig(e,t),r=i.windowUrl,o=i.windowName,s=i.windowFeatures;if(ot=parent.window.open(r,o,s),se.browser.set(a.a.DISPLAY_MODE_KEY,a.a.DISPLAY_MODE.NONE),se.addListener(a.a.VISITOR_SESSION_ID_KEY,(function(e,t){t&&(la.update(a.a.INITIAL_STATE,{chat:{visitorSessionId:t}}),la.reconcileWidget())})),se.addListener(a.a.VA_TURNS_ID_KEY,(function(e,t){t&&(la.update(a.a.INITIAL_STATE,{va:{turnsId:t}}),la.reconcileWidget())})),se.addListener(a.a.DOMAIN_ALIASES_KEY,(function(e,t){var i=t;n.update(a.a.INITIAL_STATE,{chat:{domainAliases:i}})})),V.getStorageType()===a.a.STORAGE_TYPES.CUSTOM)var c=K.a.requestInterval((function(){ot.closed&&(la.cleanUp(),K.a.clearRequestInterval(c))}),1e3)}}},{key:"resetPopupWindow",value:function(){ot=void 0}}])&&ut(t.prototype,n),i&&ut(t,i),e}()),ft=n(148),pt=n(19);function ht(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var vt,gt,Et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"initialize",value:function(e){var t=e.appConfig,n=e.dockId,a=void 0===n?"":n,i=e.securityRestrictions,r=e.maximizeWidget;if(lt)return!0;var o=(t.minimizedDock.customDocks||[]).filter((function(e){return e.dockId===a}))[0];if(!o)return!1;o.device=c.a.getDevice(),o.inviteId=a;var s,u=ft.a.getTemplate(o.template);i.frameInFrame&&(s=q.a.sendMessage);try{lt=new u(o,(function(e){"".concat(pt.a.STIMULI_TYPE.ACTION,"_").concat(e)===pt.a.STIMULI.INVITE_ACCEPTED&&r()}),s)}catch(e){return!1}return!!lt}},{key:"setState",value:function(e){var t=e!==a.a.STYLE_STATE.MINIMIZED?pt.a.STATE.MAXIMIZED:pt.a.STATE.MINIMIZED;try{lt&&lt.setState(t,!1)}catch(e){}}},{key:"terminate",value:function(){try{lt&&lt.destructor()}catch(e){}lt=void 0}},{key:"widgetNotification",value:function(e){try{lt&&lt.widgetUpdate(e)}catch(e){}}}],(n=null)&&ht(t.prototype,n),i&&ht(t,i),e}(),mt=n(80),yt=n(12),_t=n(29);function It(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Tt,bt={CHAT_COBROWSE_IN_PROGRESS:"You are sharing this page.",CHAT_COBROWSE_STOP:"Stop sharing"},St=new f.a,Ot=window,At=document,wt=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e){e&&t.cobrowseSessionData&&t.cobrowseContinueSession(t.cobrowseSessionData)}.bind(this);St.onChange(n)}var t,n,a;return t=e,(n=[{key:"cobrowseCreateSession",value:function(e,t,n){var a=this;bt=Object(o.a)({},bt,n),window.isInit&&"function"==typeof window.CreateSession?window.CreateSession(e,(function(e){xt.send(Re.a.COBROWSE,{state:_t.a.STATES.INITIALIZED,adminUrl:e})}),(function(e){xt.send(Re.a.COBROWSE,{state:_t.a.STATES.STARTED,cookieData:e}),a.cobrowseSessionData=e.cookieData,a.addSharingProgressDock()}),null,t):K.a.requestTimeout((function(){a.cobrowseCreateSession(e)}),1e3)}},{key:"disconnectCobrowse",value:function(){Ot.disconnect&&(this.cobrowseSessionData=null,Ot.disconnect(),this.removeSharingProgressDock())}},{key:"userClickedEndCobrowse",value:function(){xt.send(Re.a.COBROWSE,{state:_t.a.COMMANDS.USER_CLOSE}),this.disconnectCobrowse(),this.removeSharingProgressDock()}},{key:"resumeCobrowse",value:function(e){var t=this;bt=Object(o.a)({},bt,e.uiStrings),W.a.injectScript(e.url,(function(n){var a;"timeout"===n||"error"===n||(a="".concat(e.cobrowseId,";").concat(e.mode),t.cobrowseContinueSession(a))}),document,{id:"tfs-screenshare-js"},3e4)}},{key:"cobrowseContinueSession",value:function(e){var t=this;this.cobrowseSessionData=e,window.isInit&&"function"==typeof window.CreateSession?(window.ContinueSession(e),this.addSharingProgressDock()):K.a.requestTimeout((function(){t.cobrowseContinueSession(e)}),1e3)}},{key:"addSharingProgressDock",value:function(){this.removeSharingProgressDock(),gt=W.a.createElement("button",{id:"tfs-cobrowse-dock-cancel"},"<span aria-hidden>\n          <svg xmlns='http://www.w3.org/2000/svg' width='10' height='9' viewBox='0 0 10 10' focusable='false'>\n            <rect width='10' height='10' fill='#FFFFFF' fill-rule='evenodd' rx='2'/>\n          </svg>\n        </span>\n        <span>".concat(bt.CHAT_COBROWSE_STOP,"</span>")),vt=W.a.createElement("div",{id:"tfs-cobrowse-dock",class:"cobrowse-boundary"},[W.a.createElement("span",{id:"tfs-cobrowse-dock-span-2"},bt.CHAT_COBROWSE_IN_PROGRESS),gt,W.a.createElement("style",{id:"tfs-cobrowse-dock-style"},"#tfs-cobrowse-dock {\n          position: fixed;\n          top: 0px;\n          text-align: center;\n          font-size: 12px;\n          padding: 2px;\n          color: white;\n          background: rgb(0,128,0);\n          z-index: 1000000;\n          left: 50%;\n          transform: translateX(-50%);\n          -ms-transform: translateX(-50%);\n          border-radius: 0px 0px 5px 5px;\n          -ms-border-radius: 0px 0px 5px 5px;\n          margin: 0;\n          user-select: none;\n          cursor: default;\n          font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n        }\n        #tfs-cobrowse-dock-cancel {\n          border-radius: 4px;\n          cursor: pointer;\n          background-color: rgba(0,0,0,0.2);\n          border: none;\n          color: inherit;\n          font-size: inherit;\n          line-height: 20px;\n        }\n        #tfs-cobrowse-dock-span-2 {\n          margin: 0 10px 0 10px;\n          line-height: 20px;\n        }")]),this.userClickedEndCobrowseBound=this.userClickedEndCobrowse.bind(this),gt.addEventListener("click",this.userClickedEndCobrowseBound),At.body.appendChild(vt)}},{key:"removeSharingProgressDock",value:function(){vt=At.getElementById("tfs-cobrowse-dock"),gt=At.getElementById("tfs-cobrowse-dock-cancel"),vt&&(vt.parentNode.removeChild(vt),vt=null,gt.removeEventListener("click",this.userClickedEndCobrowseBound),gt=null)}}])&&It(t.prototype,n),a&&It(t,a),e}()),Ct=n(79);function kt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Rt(e){var t=e,n=t._data;switch(t._name){case Re.a.STYLE:Vn.updateState(n),X.changeBodyStyle(n),Ne.a.alter(n===a.a.WIDGET_STATE.MAXIMIZED);break;case Re.a.READY:la.update(a.a.IFRAME_READY,!0),la.sendInitData();break;case Re.a.INTERACTION:n.action&&n.action===a.a.STORE_UPDATE?n.type&&(n.type===a.a.BROWSER_SESSION_KEY?se.browser.set(n.interactionData):n.type===a.a.TAB_SESSION_KEY&&se.tab.set(n.interactionData)):n.action&&n.action===a.a.STORE_DELETE&&(se.removeSessionData(n.interactionData),n.showWidgetOnReload||se.browser.set(a.a.SHOW_ON_RELOAD,!1));break;case Re.a.CONFIG:break;case Re.a.STATE_CHANGE:la.handleStateChange(n);break;case Re.a.TRACK_INTERACTION:_.logInteraction(n,n.forceFlush);break;case Re.a.TRACK_EVENT:ve.log(n,(function(e,t){}));break;case Re.a.NOTIFICATION:Vn.widgetNotification(n);break;case Re.a.DESTROY:se.browser.set(a.a.WIDGET_LOADED,!1),Vn.updateState(a.a.STYLE_STATE.HIDDEN),la.resetInitialState(),K.a.requestTimeout((function(){la.cleanUp()}),1e3);break;case Re.a.CARD:var i={widgetState:a.a.WIDGET_STATE["CARD_".concat(n.state.toUpperCase())],card:{id:n.id,name:n.name}};switch(n.state){case yt.a.CARD_STATE.OPENING:var r;n.type===yt.a.CARD_TYPES.SLIDINGPLUS?r=a.a.STYLE_STATE.PLUSCARD:n.type===yt.a.CARD_TYPES.SLIDING&&(r=a.a.STYLE_STATE.CARD),u.a.isUndefinedOrNull(r)||Vn.updateState(r,!0),Pt.send(Re.a.CARD,{id:n.id,state:yt.a.CARD_STATE.OPEN}),n.type===yt.a.CARD_TYPES.CUSTOM&&setTimeout((function(){return la.onCustomCardAction(n.id,n.name)}),100),la.handleStateChange(i);break;case yt.a.CARD_STATE.CLOSING:Vn.updateState(a.a.STYLE_STATE.MAXIMIZED,!0),Pt.send(Re.a.CARD,{id:n.id,state:yt.a.CARD_STATE.CLOSE});break;case yt.a.CARD_STATE.SUBMIT:case yt.a.CARD_STATE.CANCEL:case yt.a.CARD_STATE.CLOSE:la.handleStateChange(i)}break;case Re.a.COBROWSE:switch(n.state){case _t.a.STATES.INITIALIZING:W.a.injectScript(n.url,(function(e){"timeout"===e||"error"===e||wt.cobrowseCreateSession(n.mode,n.timeout,n.uiStrings)}),document,{id:"tfs-screenshare-js"},3e4);break;case _t.a.COMMANDS.AGENT_CLOSE:wt.disconnectCobrowse();break;case _t.a.STATES.JOINED:wt.resumeCobrowse({cobrowseId:n.cobrowseId,mode:n.mode,url:n.url,uiStrings:n.uiStrings})}break;case Re.a.HIDE_INPAGE_VIEW:la.hideInpageView();break;case Re.a.SHOW_INPAGE_VIEW:la.showInpageView()}}var Nt,Dt,Lt,Mt,Pt=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"send",value:function(e,t){Tt.send({_name:e,_data:t})}},{key:"clear",value:function(){Tt&&Tt.clear()}},{key:"checkIntercom",value:function(){return!!Tt}},{key:"initIntercom",value:function(e,t){(Tt=new Ct.a("parent")).init({targetOrigin:e,destinationWindow:t}),Tt.addListener(Rt)}}])&&kt(t.prototype,n),a&&kt(t,a),e}()),xt=Pt,Ft=function(){try{window.eval("var test = (x) => x + 1")}catch(e){return!1}return!0}(),Ut=function(e,t,n){var a;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var s=void 0,c=function(){a=null,n||e.apply(s,r)},u=n&&!a;clearTimeout(a),a=setTimeout(c,t),u&&e.apply(s,r)}};function jt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ht=document;function Bt(e){return{x:e.pageX?e.pageX:e.changedTouches[0].pageX,y:e.pageY?e.pageY:e.changedTouches[0].pageY}}function Gt(e){e.preventDefault(),e.stopPropagation(),Dt.style.cssText="position: absolute; width: 100%; height: 100%;";var t=Bt(e),n=t.x,a=t.y;Nt.lastXPosition=n,Nt.lastYPosition=a,Ht.addEventListener("selectstart",Yt),Ht.addEventListener("dragstart",Yt),Ht.addEventListener("mousemove",Vt),Ht.addEventListener("mouseup",Wt),Ht.addEventListener("touchmove",Vt),Ht.addEventListener("touchend",Wt)}function Yt(){return!1}function Vt(e){var t,n;Nt.style.opacity=.8;try{var a=Bt(e);t=a.x,n=a.y}catch(e){return}var i=t-Nt.lastXPosition,r=n-Nt.lastYPosition;Lt(i,r),Nt.lastXPosition=t,Nt.lastYPosition=n}function Wt(){Ht.removeEventListener("selectstart",Yt),Ht.removeEventListener("dragstart",Yt),Ht.removeEventListener("mousemove",Vt),Ht.removeEventListener("mouseup",Wt),Ht.removeEventListener("touchmove",Vt),Ht.removeEventListener("touchend",Wt),Nt.style.opacity=1,Dt.style.cssText=Mt}var Kt,qt,zt,Xt,Zt,Jt,Qt,$t,en,tn=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"add",value:function(e,t,n){l.a.isObject(e,"element"),l.a.isObject(t,"handle"),this.remove(),Nt=e,Dt=t,Mt=t.style.cssText,Lt=n,Dt.addEventListener("mousedown",Gt),Dt.addEventListener("touchstart",Gt)}},{key:"remove",value:function(){Dt&&(Dt.removeEventListener("mousedown",Gt),Dt.removeEventListener("touchstart",Gt))}}])&&jt(t.prototype,n),a&&jt(t,a),e}()),nn=window,an=document.documentElement,rn=Ut((function(e){["resize","orientationchange"].indexOf(e.type)>-1&&fn(!1),En(a.a.STYLE_TRANSITION.SCROLL)}),c.a.isAndroid?800:300),on=Ut((function(){se.tab.set("position",un)}),1e3),sn=!1,cn={x:0,y:0},un={x:0,y:0},ln={x:100,y:100};function dn(){nn.removeEventListener("scroll",rn),nn.removeEventListener("orientationchange",rn),nn.removeEventListener("resize",rn),tn.remove(),sn=!1}function fn(e){var t,n,a=se.tab.get("position");if(a&&e){var i=vn(a.x,a.y);t=i.offsetX,n=i.offsetY}else{var r=vn(pn()?0:100,100);t=r.offsetX,n=r.offsetY,t+=pn()?$t:-$t}In(t,n)}function pn(){return Xt===a.a.POSITION.BOTTOM_LEFT}function hn(){return!u.a.isUndefinedOrNull(Qt)}function vn(e,t){var n=An();return Tn(e/100*n.screenWidth,t/100*n.screenHeight)}function gn(e,t){switch(Kt){case a.a.STYLE_STATE.MAXIMIZED:case a.a.STYLE_STATE.CARD:_n(e,t)}En(a.a.STYLE_TRANSITION.IMMEDIATE)}function En(e){var t,n,i,r,o;Jt.frameInFrame?(t=bn(),n=t.frameWidth,i=t.frameHeight,r=Sn()&&mn(),o=!Sn()&&mn(),X.setStyle(qt,{bottom:"0",right:o?wn($t):"0",width:r?"100%":wn(n),height:r?"100%":wn(i),position:"fixed",backgroundColor:"transparent",zIndex:"214783647",boxShadow:"none",display:"block"},!0)):Sn()&&mn()?function(e){X.setStyle(qt,{top:"0px",left:"0px",right:"0px",width:"100%",height:"100%",position:"fixed",display:"block",margin:"0 0 0 0",transition:yn(e)})}(e):hn()?X.setStyle(qt,{width:"100%",height:"100%"}):function(e){var t=function(){var e=cn.x,t=cn.y,n=An(),i=n.screenWidth,r=n.screenHeight,o=function(){var e=en.desktop;c.a.isPhone?e=en.phone:c.a.isTablet&&(e=en.tablet);return e}(),s=o.offsetX,u=o.offsetY;switch(Kt){case a.a.STYLE_STATE.MAXIMIZED:break;case a.a.STYLE_STATE.MINIMIZED:e=pn()?s:i-ln.x-s,t=r-ln.y-u;break;case a.a.STYLE_STATE.CARD:Xt!==a.a.POSITION.BOTTOM_LEFT&&(e-=Zt.width-30);break;case a.a.STYLE_STATE.PLUSCARD:e=2*$t,t=35}return Tn(e,t)}(),n=t.offsetX,i=t.offsetY,r=t.correctionX,o=t.correctionY,s=function(e,t){return{offsetLeft:nn.pageXOffset+e,offsetTop:nn.pageYOffset+t}}(n,i),u=s.offsetTop,l=s.offsetLeft,d=bn(),f=d.frameWidth,p=d.frameHeight;_n(r,o),X.setStyle(qt,{top:wn(u),left:wn(l),right:"auto",width:wn(f),height:wn(p),minWidth:Kt===a.a.STYLE_STATE.MINIMIZED?"auto":"330px",position:"absolute",display:Kt===a.a.STYLE_STATE.HIDDEN?"none":"block",margin:"auto",transition:yn(e)}),zt&&X.setStyle(zt,{display:Kt===a.a.STYLE_STATE.MINIMIZED?"none":"block"})}(e)}function mn(){return Kt===a.a.STYLE_STATE.MAXIMIZED||Kt===a.a.STYLE_STATE.CARD||Kt===a.a.STYLE_STATE.PLUSCARD}function yn(e){var t="cubic-bezier(.25,.1,.25,1)";switch(e){case a.a.STYLE_TRANSITION.SCROLL:return["top","left"].map((function(e){return"".concat(e," 300ms ").concat(t)})).join(",");case a.a.STYLE_TRANSITION.RESIZE:return["top","left","height","width"].map((function(e){return"".concat(e," 300ms ").concat(t)})).join(",");default:return""}}function _n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e||t){var n=cn.x,a=cn.y;In(n+e,a+t)}}function In(e,t){cn.x=e,cn.y=t;var n=An(),a=n.screenWidth,i=n.screenHeight;0!==a&&0!==i&&(un.x=Math.round(e/a*100),un.y=Math.round(t/i*100),on())}function Tn(e,t){var n=e,a=t,i=0,r=0,o=An(),s=o.screenWidth,c=o.screenHeight,u=bn(),l=u.frameWidth,d=u.frameHeight;return n+l>s?i=s-(n+l):n<0&&(i=-n),a+d>c?r=c-(a+d):a<0&&(r=-a),{offsetX:n+=i,offsetY:a+=r,correctionX:i,correctionY:r}}function bn(){var e,t;if(Jt.frameInFrame)e=Number.MAX_VALUE,t=Number.MAX_VALUE;else{var n=An();e=n.screenWidth,t=n.screenHeight}var i=0,r=0,o=Zt,s=o.width,c=o.height;switch(Kt){case a.a.STYLE_STATE.MAXIMIZED:i=s>e?e:s,r=c>t?t:c;break;case a.a.STYLE_STATE.MINIMIZED:i=ln.x,r=ln.y;break;case a.a.STYLE_STATE.CARD:var u=2*s-30;i=u>e?e:u,r=c>t?t:c;break;case a.a.STYLE_STATE.PLUSCARD:i=Math.min(1920,e-2*$t),r=Math.min(1080,t-70)}return{frameWidth:i,frameHeight:r}}function Sn(){return On()===a.a.DISPLAY_MODE.FULLSCREEN}function On(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;return c.a.isPhone||H.isPopup()||c.a.isTablet&&e.frameInFrame?a.a.DISPLAY_MODE.FULLSCREEN:a.a.DISPLAY_MODE.FLOATING}function An(){return{screenHeight:an.clientHeight-W.a.getKeyboardHeight(),screenWidth:an.clientWidth}}function wn(e){return"".concat(Math.round(e),"px")}var Cn,kn,Rn={initialize:function(e){var t=e.config,n=e.container,i=e.dragHandle,r=e.securityRestrictions,o=e.hasCustomMinimize,s=e.parentElement;dn(),function(e,t,n,i,r){Kt=a.a.STYLE_STATE.MAXIMIZED,qt=t,zt=n,Jt=i,Qt=r;var o=e.windowPosition,s=e.windowWidth,c=e.windowHeight,u=e.windowOffset,l=e.minimizedDock;Xt=o,Zt={width:s,height:c},$t=u,en=l}(t,n,i,r,s),hn()||(fn(!0),nn.addEventListener("scroll",rn),nn.addEventListener("orientationchange",rn),nn.addEventListener("resize",rn)),function(){var e=Jt.frameInFrame?{height:"100%",width:"100%",backgroundColor:"transparent",position:"fixed"}:{backgroundColor:"transparent",zIndex:"2147483647"};hn()&&(e={height:"100%",width:"100%"});if(W.a.setStyle(qt,e),zt){var t={position:"absolute",top:"10px",right:"90px",height:"34px",zIndex:"10",width:"".concat(Zt.width-134,"px"),cursor:"move"};W.a.setStyle(zt,t),tn.add(qt,zt,gn,!0)}}(),o&&(ln.x=1,ln.y=1),sn=!0},terminate:dn,updateState:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(sn){Kt=e;var n=t?a.a.STYLE_TRANSITION.IMMEDIATE:a.a.STYLE_TRANSITION.RESIZE;En(n)}},isFullScreen:Sn,getDisplayModeSetting:On};function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){Ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Pn,xn,Fn,Un,jn,Hn=!1,Bn=document,Gn=document.domain;function Yn(e){var t=Un,n=t.frontendsService,a=t.appId,r=mt.a.CONFIG_API_ACTION.WIDGET_LOADING,o=ce.a.getContext();o.appInteractionId&&_.setAppInteractionId(o.appInteractionId),n.opts.configuration?ke.a.requestConfig(n,a,o,r,(function(t,n){n&&(Un=ke.a.get(a)),t&&_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:Dn({action:"API_ERROR"},t)},!0),e()}),(function(e){_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:Dn({action:"API_PERF"},e)},!0)})):e()}var Vn=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){Fn=e.metaData,jn=e.securityRestrictions,Ne.a.init(jn),X.init(jn)}},{key:"updateState",value:function(e,t){Rn.updateState(e,t),Et.setState(e,t)}},{key:"start",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(l.a.notEmpty(e,"appId"),st.setInteractionActive(!0),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll){ke.a.update(e,r),Un=ke.a.get(e),la.isWidgetLoaded()||(se.browser.set(a.a.CONFIG_APP_ID,e),se.browser.set({app:{context:ce.a.getContext()}}),Un.workflowConfig.chat&&se.browser.set(a.a.QUEUE,Un.workflowConfig.chat.assistQueue)),(Pn=la.getInitialState()).app.displayMode=u.a.isUndefinedOrNull(o)?Rn.getDisplayModeSetting(jn):a.a.DISPLAY_MODE.FULLSCREEN,se.browser.get(a.a.DISPLAY_MODE_KEY)!==a.a.DISPLAY_MODE.NONE||H.isPopup()||V.getStorageType()!==a.a.STORAGE_TYPES.CUSTOM||(Pn.app.displayMode=a.a.DISPLAY_MODE.NONE),la.update(a.a.INITIAL_STATE,Pn);var s=Un.i18n,d=s.locale,f=s.uiStrings;if(se.browser.get(a.a.QUEUE)&&Un.workflowConfig.chat&&(Un.workflowConfig.chat.assistQueue=se.browser.get(a.a.QUEUE)),Bn.getElementById(a.a.TFS_CONTAINER_ID)){var p,h=se.tab.get(a.a.APP_SESSION_KEY);switch(h&&(p=h.minimized),p){case!0:return xt.send(Re.a.STATE_CHANGE,a.a.WIDGET_STATE.MAXIMIZED),void se.tab.set({app:{minimized:!1}});case!1:return;default:la.cleanUp()}}var v,g=W.a.createElement("nottoshow",{id:a.a.TFS_HIDE_COBROWSE_ID});xn=W.a.createElement("div",{id:a.a.TFS_CONTAINER_ID,class:"tfs-reset-css"}),Pn.app.displayMode===a.a.DISPLAY_MODE.FULLSCREEN||jn.frameInFrame||(v=W.a.createElement("div",{id:a.a.TFS_DRAG_ID,class:"tfs-reset-css"}),xn.appendChild(v)),Cn=W.a.createElement("iframe",{id:a.a.TFS_IFRAME_ID,src:"about:blank",class:"tfs-reset-css",frameborder:"0",title:Un.windowTitle,style:"height: 100%; width: 100%; border: 0; background-color: transparent; overflow: hidden;",allow:"autoplay"}),xn.appendChild(Cn);var E,m=Et.initialize({appConfig:Un,securityRestrictions:jn,dockId:t,maximizeWidget:function(){xt.send(Re.a.STATE_CHANGE,a.a.WIDGET_STATE.MAXIMIZED)}}),y=se.browser.get(a.a.APP_SESSION_KEY);E=u.a.isUndefinedOrNull(y)||u.a.isUndefinedOrNull(y.context)||u.a.isEmptyOrNull(y.context.frameView)?H.isPopup()?a.a.FRAME_VIEW.POPUP:a.a.FRAME_VIEW.INPAGE:y.context.frameView,ce.a.refreshContext({dockId:m?t:"",frameView:E});var I=o||Bn.body;if(Rn.initialize({config:Un,securityRestrictions:jn,container:xn,parentElement:o,dragHandle:v,hasCustomMinimize:m}),jn.frameInFrame&&q.a.init(Rn.isFullScreen()),se.browser.get(a.a.DISPLAY_MODE_KEY)!==a.a.DISPLAY_MODE.NONE||H.isPopup()?this.updateState(a.a.STYLE_STATE.MAXIMIZED):this.updateState(a.a.STYLE_STATE.HIDDEN),g?(g.appendChild(xn),I.appendChild(g)):I.appendChild(xn),jn.thirdPartyFrame){xt.initIntercom(L.a.parseUrl(Fn.path).origin,Cn.contentWindow);var T="renderer".concat("");Cn.src="".concat(Fn.path,"/").concat(T,".html#parentOrigin=").concat(location.origin)}else{xt.initIntercom(location.origin,Cn.contentWindow);try{kn=Cn.contentWindow.document}catch(e){Hn=!0,Cn.src="javascript:var d=document.open();d.domain='".concat(Gn,"';void(0);"),kn=Cn.contentWindow.document}kn.open()._load=function(e,t){Hn&&(kn.domain=e);var n="renderer".concat(Ft?"":".polyfill").concat(".min"),r="".concat(t,"/js/").concat(n,".js");kn.body.appendChild(W.a.createElement("script",{id:a.a.TFS_SCRIPT_ID},"\"use strict\";/** * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an * unpublished, proprietary work which is fully protected under * copyright law. This code may only be used pursuant to a valid * license from 24/7 Customer, Inc. *//** * PreRender module * @module loader/pre-render */(function () {var _doc = document;var _htmlLoadingTemplate = \"<style type='text/css'>body {background-color: transparent;overflow: hidden;}body * {box-sizing: border-box;}#tfs_loading_container {font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;position: absolute;top: 50%;left: 50%;width: 160px;background: #fafafa;border: 1px solid #cccccc;border-radius: 10px;padding: 10px;transform: translate(-50%, -50%);-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);text-align: center;margin-top: 15px;}#tfs_loading_container * {user-select: none;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;}@keyframes tfs-spinner {to {transform: rotate(360deg);}}#tfs_loading_spinner {height: 60px;margin: 0 auto;position: relative;}#tfs_loading_spinner:after {content: '';box-sizing: border-box;position: absolute;top: 50%;left: 50%;width: 38px;height: 38px;margin-top: -19px;margin-left: -19px;border-radius: 50%;border: 2px solid rgba(145, 145, 145, .3);border-top-color: rgba(145, 145, 145, 1);animation: tfs-spinner 1.5s linear infinite;}#tfs_loading_text {font-size: 14px;color: #727272;}#tfs_loading_text:focus {outline: none;}#tfs_loading_close_button {display: none;line-height: 34px;border: none;background: #727272;color: #fafafa;border-radius: 5px;font-size: 13px;margin: 10px auto 0px;padding: 0px 20px;font-weight: bold;cursor: pointer;vertical-align: middle;outline: none;}</style><div id='tfs_loading_container' class='tfs_status_default'><div id='tfs_loading_spinner' aria-hidden></div><div id='tfs_loading_text' aria-live='polite' tabindex='-1'>\x3c!-- PRE_RENDER_LOADING --\x3e</div><button id='tfs_loading_close_button' type='button'>\x3c!-- PRE_RENDER_CLOSE --\x3e</button></div>\";_doc.getElementById('tfs_container_root_pre').innerHTML = _htmlLoadingTemplate;_doc.getElementById('tfs_loading_text').focus();})();".replace("\x3c!-- PRE_RENDER_CLOSE --\x3e",W.a.reduceTags(f[d].PRE_RENDER_CLOSE)).replace("\x3c!-- PRE_RENDER_LOADING --\x3e",W.a.reduceTags(f[d].PRE_RENDER_LOADING)))),jn.frameInFrame&&c.a.safariVersion&&(W.a.removeClass(xn,"tfs-reset-css"),K.a.requestTimeout((function(){W.a.addClass(xn,"tfs-reset-css")}),10)),Yn((function(){se.browser.get(a.a.INITIAL_WORKFLOW)||se.browser.set(a.a.INITIAL_WORKFLOW,Un.workflow),W.a.injectScript(r,(function(e){_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"SCRIPT_LOAD_RENDERER",url:r,status:e}},!0);var t=kn.getElementById("tfs_loading_spinner"),n=kn.getElementById("tfs_loading_text"),o=kn.getElementById("tfs_loading_close_button");switch(e){case"error":t&&W.a.hide(t),n&&(n.innerHTML="\n                    <h3>\n                      <strong>".concat(W.a.reduceTags(f[d].PRE_RENDER_FAILED_TITLE),"</strong>\n                    </h3>\n                    <div>").concat(W.a.reduceTags(f[d].PRE_RENDER_FAILED_DESC),"</div>\n                  "),o&&(W.a.show(o),o.addEventListener("click",(function(){xn.parentNode.removeChild(xn),la.handleStateChange({widgetState:a.a.WIDGET_STATE.WIDGET_CLOSED})}))));break;case"timeout":n&&(n.innerHTML=W.a.reduceTags(f[d].PRE_RENDER_TIMEOUT))}}),kn,{id:a.a.TFS_RENDERER_SCRIPT_ID},3e4)}))},kn.write("<!DOCTYPE html>\n        <html lang=".concat(d,'>\n          <head>\n            <meta charset="utf-8">\n            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n          </head>\n          <body\n            style=\'position:relative;height:100%;height:100vh;margin:0 auto;overflow:hidden;\'\n            onload=\'document._load("').concat(Gn,'", "').concat(Fn.path,"\");'>\n            <div id=").concat(a.a.TFS_CONTAINER_ROOT_ID,"></div>\n            <div id=").concat(a.a.TFS_CONTAINER_ROOT_PRE_ID,"></div>\n          </body>\n        </html>")),kn.close()}se.browser.set(a.a.WIDGET_LOADED,!0),se.browser.set(a.a.SHOW_ON_RELOAD,!0),H.isPopup()&&se.browser.set(a.a.DISPLAY_MODE_KEY,a.a.DISPLAY_MODE.NONE),la.handleStateChange({widgetState:a.a.WIDGET_STATE.WIDGET_LOADING})}else K.a.requestTimeout((function(){n.start(e,t,r,o)}),50)}},{key:"stop",value:function(){var e=Bn.getElementById(a.a.TFS_HIDE_COBROWSE_ID);return!!e&&(e.parentNode.removeChild(e),Rn.terminate(),Et.terminate(),_.unsetAppInteractionId(),st.setInteractionActive(!1),la.handleStateChange({widgetState:a.a.WIDGET_STATE.WIDGET_CLOSED}),xn=void 0,!0)}},{key:"widgetNotification",value:function(e){Et.widgetNotification(e)}}])&&Mn(t.prototype,n),r&&Mn(t,r),e}());function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xn,Zn,Jn,Qn,$n,ea=!1,ta=!1,na=!1,aa=window,ia="default",ra={},oa={app:{},va:{},messaging:{}},sa=[];function ca(){var e,t=zn({},a.a.WIDGET_LOADED,!1);H.isPopup()&&Xn===a.a.STORAGE_TYPES.CUSTOM&&(t=Object(o.a)({},t,(zn(e={},a.a.SHOW_ON_RELOAD,!1),zn(e,"syncCustomStorage",!0),e)));se.browser.set(t)}function ua(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={messaging:{brandUserId:e,userTokenId:"",stickyTag:"",connectionId:"",lastSequenceAcked:"",interactionStatus:""}};se.browser.set(t),xt.checkIntercom()?xt.send(Re.a.INTERACTION,t):oa=Object(o.a)({},oa,t)}aa.addEventListener("touchstart",(function e(){!ea||c.a.isTablet||c.a.isPhone||(_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"USER_TOUCH_DETECTED_ON_DESKTOP"}},!0),aa.removeEventListener("touchstart",e))}),!1);var la=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=this;if(!ea){Jn=e.onStateChange,$n=e.metaData,ia=e.appId,Xn=e.storageType;var n=e.windowName,i=ke.a.get(ia);if(Vn.init({metaData:$n,securityRestrictions:e.securityRestrictions}),dt.init({metaData:$n,storageType:Xn}),H.isPopup()||se.addListener(a.a.WIDGET_LOADED,(function(e,n){var a=!!n;st.setInteractionActive(a),a||t.cleanUp(),X.changeBodyStyle(),Ne.a.alter(!1)})),!H.isPopup()||c.a.isTablet||c.a.isPhone||se.addListener(a.a.DISPLAY_MODE_KEY,(function(e,n){u.a.isEmptyOrNull(n)&&t.closePopupView()})),se.browser.get(a.a.SHOW_ON_RELOAD)){var r=!1,o=se.browser.get(a.a.CHAT_SESSION_KEY),s=!1;if(i.apis.forceEndInteraction){var l=Z.a.getFunctionReference(i.apis.forceEndInteraction);s=!!l&&l()}s&&!o&&(se.removeSessionData(),se.browser.set(a.a.WIDGET_LOADED,!1),se.browser.set(a.a.SHOW_ON_RELOAD,!1),r=!0),H.isPopup()&&(oa.app.isPopup=!0,Le.enable(),aa.addEventListener("unload",ca),Zn=H.getWindowParams(),aa.name=n),r||this.reconcileWidget()}else H.isPopup()?(oa.app.isPopup=!0,Le.enable(),aa.addEventListener("unload",ca),Zn=H.getWindowParams(),Vn.start(ia,"",Zn.overrideConfig,Qn),aa.name=n):se.browser.set(a.a.WIDGET_LOADED,!1);ea=!0}}},{key:"startInteraction",value:function(e,t,n){if(ea){ia=e,ra=n,se.tab.set(a.a.INITIATOR,!0);var i=ke.a.get(e);H.isPopup()||!i.popupWindow.initial||c.a.isTablet||c.a.isPhone?Vn.start(ia,t,n,Qn):dt.start(ia,n)}}},{key:"sendSystemMessage",value:function(e){var t=!1;return na&&(xt.send(Re.a.SYSTEMMSG,e),t=!0),t}},{key:"sendContext",value:function(e){!function(e){na&&xt.send(Re.a.CONTEXT,e)}(e)}},{key:"isWidgetLoaded",value:function(){return!!se.browser.get(a.a.WIDGET_LOADED)}},{key:"updateState",value:function(e){if(e[a.a.SOURCE]!==se.getTabId()&&xt.checkIntercom()){var t=Object(o.a)({},e[a.a.STORAGE_KEY_NAMES.TAB_SESSION],e[se.getTabId()]);xt.send(Re.a.INTERACTION,t)}}},{key:"isWidgetReconciled",value:function(){return ta}},{key:"getInitialState",value:function(){return oa}},{key:"resetInitialState",value:function(){oa={app:{},va:{},messaging:{}}}},{key:"update",value:function(e,t){switch(e){case a.a.INITIAL_STATE:oa=Object(o.a)({},oa,t);break;case a.a.IS_RECONCILED:ta=t;break;case a.a.IFRAME_READY:(na=t)&&this.onIframeReady()}}},{key:"onIframeReady",value:function(){var e,t,n,i,r,o=ke.a.get(ia);if(ta){i=!!o.forceMaximizeInNewTab,H.isPopup()||(c.a.isPhone?r=!0:se.isExistingTab||(r=!i),u.a.isUndefinedOrNull(r)||(oa.app.minimized=r,se.tab.set({app:{minimized:r}})));var s=se.tab.get(a.a.INITIATOR);(!s||s&&o.popupWindow.initial)&&(e=se.browser.get(a.a.VA_SESSION_KEY)||{},t=e.poller,n=e.turnsId,!t&&n&&(oa.va.poller=!0,se.browser.set({va:{poller:!0}})))}var l=se.tab.get(a.a.APP_SESSION_KEY);l&&!0===l.minimized?this.handleStateChange({widgetState:a.a.WIDGET_STATE.MINIMIZED}):this.handleStateChange({widgetState:a.a.WIDGET_STATE.MAXIMIZED})}},{key:"sendInitData",value:function(){var e=ke.a.get(ia),t=ce.a.getContext(),n=se.browser.get(a.a.MESSAGING_SESSION_KEY);xt.send(Re.a.CONFIG,{config:e,context:Kn(Kn({},t),{},{urls:we.getJourneyEncoded()})}),xt.send(Re.a.EXTENSIBLE_LISTENERS,{listeners:sa}),ta&&(oa=Object(o.a)({},oa,se.browser.get(),se.tab.get())),n&&(oa=Object(o.a)({},oa,{messaging:n})),H.isPopup()?oa.app.storageType=Zn.storageType:(oa.app.storageType=Xn,oa.app.popupWindowConfig=dt.getPopupWindowConfig(ia,ra)),oa.app.basePath=$n.path,xt.send(Re.a.INTERACTION,oa)}},{key:"handleStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.widgetState){case a.a.WIDGET_STATE.CHAT_ENDED:H.isPopup()&&Le.disable()}try{Jn(e),aa.dispatchEvent(new CustomEvent(a.a.STATE_CHANGE_EVENT,{detail:e}))}catch(e){}}},{key:"onCustomCardAction",value:function(e,t){l.a.notEmpty(e,"id"),l.a.notEmpty(t,"name");var n=ke.a.get(ia),a=Z.a.getFunctionReference(n.apis.onCustomCardAction);U.a.isFunction(a)?a(e,t,{}):this.sendCustomCardResponse(e,t,!1,{})}},{key:"login",value:function(e){return!!e&&(ua(e.trim()),!0)}},{key:"logout",value:function(){ua()}},{key:"getSessionContext",value:function(){var e=se.browser.get(a.a.CHAT_SESSION_KEY),t={};e&&(t[a.a.INTERACTION_ID]=e[a.a.INTERACTION_ID],t[a.a.VISITOR_SESSION_ID]=e[a.a.VISITOR_SESSION_ID]);var n=ce.a.getContext()[a.a.PRECHAT_DATA_KEYS.APP_INTERACTION_ID];return n&&(t[a.a.PRECHAT_DATA_KEYS.APP_INTERACTION_ID]=n),t}},{key:"setUserProfile",value:function(e){e&&se.browser.set(a.a.USER_PROFILE,e)}},{key:"setParentElement",value:function(e){l.a.isObject(e,"parentElement"),Qn=e}},{key:"sendCustomCardResponse",value:function(e,t,n,a){xt.checkIntercom()&&xt.send(Re.a.CARD,{id:e,name:t,isSuccess:n,responseData:a,state:yt.a.CARD_STATE.SUBMIT,type:yt.a.CARD_TYPES.CUSTOM})}},{key:"addExtensibleListener",value:function(e){sa=e}},{key:"dispatchAction",value:function(e,t){xt.checkIntercom()&&xt.send(Re.a.DISPATCH_ACTION,{actionName:e,actionData:t})}},{key:"cleanUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.a.noop;ea&&(Vn.stop(),dt.resetPopupWindow(),se.browser.set(a.a.SHOW_ON_RELOAD,!1),se.browser.set(a.a.DISPLAY_MODE_KEY,""),se.browser.set(a.a.INITIAL_WORKFLOW,""),se.tab.set(a.a.INITIATOR,!1),se.removeSessionData([a.a.CONFIG_APP_ID,a.a.APP_SESSION_KEY,a.a.CHAT_SESSION_KEY,a.a.VA_SESSION_KEY,a.a.CARDS_SESSION_KEY]),this.update(a.a.IFRAME_READY,!1),this.update(a.a.IS_RECONCILED,!1),ke.a.reset(ia),xt.clear(),K.a.requestTimeout(e,300))}},{key:"reconcileWidget",value:function(){if(!ta){ta=!0;var e={},t=se.browser.get(a.a.INITIAL_WORKFLOW);t&&(e.workflow=t);var n=ce.a.getContext(),i=n&&n.dockId?n.dockId:"";Vn.start(ia,i,e,Qn)}}},{key:"hideInpageView",value:function(){se.browser.set(a.a.DISPLAY_MODE_KEY,a.a.DISPLAY_MODE.NONE),Vn.updateState(a.a.STYLE_STATE.HIDDEN)}},{key:"showInpageView",value:function(){se.browser.set(a.a.DISPLAY_MODE_KEY,"");var e=se.tab.get(a.a.APP_SESSION_KEY);e&&e.minimized?Vn.updateState(a.a.STYLE_STATE.MINIMIZED):Vn.updateState(a.a.STYLE_STATE.MAXIMIZED)}},{key:"closePopupView",value:function(){Le.disable(),aa.removeEventListener("unload",ca),aa.close()}}])&&qn(t.prototype,n),i&&qn(t,i),e}()),da=n(207),fa=n(208),pa=n(209),ha=n(210),va=n(211);function ga(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ea=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"get",value:function(e){var t=document.cookie.match("(^|[^;]+)\\s*".concat(e,"\\s*=\\s*([^;]+)"));return t?t.pop():void 0}}])&&ga(t.prototype,n),a&&ga(t,a),e}());function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t,n){return(ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sa(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ia(e,t)}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Sa(e);if(t){var i=Sa(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return ba(this,n)}}function ba(e,t){return!t||"object"!==ma(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sa(e){return(Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function wa(e,t,n){return t&&Aa(e.prototype,t),n&&Aa(e,n),e}function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){Ra(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Na,Da=document,La=["dispatchAction"],Ma={},Pa=!1,xa=function(e){var t=ke.a.get(e),n=ce.a.getContext();_.init(Ma.key||"default",t.frontendsService,{vi:n.vi,tabId:se.getTabId(),userAgent:navigator.userAgent,browser:n.browser||void 0,device:n.device_id||void 0,os:n.os||void 0}),_.setAppId(e),ve.configure({channelSessionId:"".concat(n.vi,"::").concat(n.asid),events:t.events,onTrackEvent:t.apis.onTrackEvent?Z.a.getFunctionReference(t.apis.onTrackEvent):void 0,logger:function(e){_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:ka({},e)},!0)}});var o=function(e){l.a.isArray(e,"securityRestrictions");var t={frameInFrame:!1,thirdPartyFrame:!1};return e.forEach((function(e){switch(e){case r.a.SECURITY.FRAME_IN_FRAME:t.frameInFrame=!0;break;case r.a.SECURITY.THIRD_PARTY_FRAME:t.thirdPartyFrame=!0}})),t}(t.securityRestrictions);o===r.a.SECURITY.FRAME_IN_FRAME&&X.changeBodyStyle(r.a.IFRAME_BODY);var s=Z.a.getFunctionReference(t.apis.onStateChange)||Z.a.noop;la.init({metaData:Ma,securityRestrictions:o,onStateChange:s,appId:e,storageType:V.getStorageType(),windowName:t.windowName}),st.init({supportHours:t.supportHours,timeZoneOffset:t.timeZoneOffset,securityRestrictions:o,onStateChange:s,disableBackgroundInvite:t.disableBackgroundInvite,appId:e}),we.init(t.journey,o,Ma.currentpagedata);var d=se.browser.get(a.a.PRECHAT_DATA_KEYS.VISITOR_ID);u.a.isEmptyOrNull(d)?se.browser.set(a.a.PRECHAT_DATA_KEYS.VISITOR_ID,Na):Na!==d&&(_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:"VISITOR_ID_CHANGED",prevVisitorId:d,nextVisitorId:Na,widgetLoaded:la.isWidgetLoaded(),storage:V.getStorageType()}},!0),ve.log({event:"visitorIdChanged",eventData:{eventType:"VISITOR_ID_CHANGED",eventSource:"UDE",nextVi:Na,prevVi:d,version:"ude-1.42.2",tabId:se.getTabId()}}),se.browser.set(a.a.PRECHAT_DATA_KEYS.VISITOR_ID,Na)),_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.PAGE_INIT,logData:{storage:V.getStorageType(),storageReason:V.getStorageTypeReasons(),ieVersion:c.a.ieVersion||void 0,safariVersion:c.a.safariVersion||void 0,chromeVersion:c.a.chromeVersion||void 0,isMobileSafari:c.a.isMobileSafari||void 0,isAndroidTablet:c.a.isAndroidTablet||void 0,isIpad:c.a.isIpad||void 0,isTablet:c.a.isTablet||void 0,iosVersion:c.a.iosVersion||void 0,isPhone:c.a.isPhone||void 0,path:"".concat(location.origin).concat(location.pathname),compatMode:Da.compatMode}},!0),Da.compatMode,Qe.configure(t.googleBusinessMessages),ze.configure(t.appleBusinessChat,(function(e,t){e&&_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:ka({action:"SCRIPT_LOAD_ABC"},t)},!0),function(){if(Pa=!0,la.handleStateChange({widgetState:a.a.WIDGET_STATE.PAGE_INIT}),Ma.initdone){var e=Z.a.getFunctionReference(Ma.initdone);"function"==typeof e&&e()}}()}))},Fa=function(){function e(){var t=this;Oa(this,e);var n=document.getElementById(a.a.WIDGET_LOADER_ID),r=L.a.parseUrl(n.src);n.setAttribute("data-path",r.origin+r.pathname.match(/(.*)\/js\/.*/)[1]),n.setAttribute("data-origin",r.origin),Ma=n.dataset;var o={};try{o=JSON.parse(decodeURIComponent(Ma.prechatdata))}catch(e){}if(o.clientId=Ma.key,ce.a.refreshContext(o),Na=o.vi,delete Ma.prechatdata,ke.a.init({metaData:Ma,v2:{enabled:"true"===Ea.get("tfs.config.v2"),baseUrl:Ea.get("tfs.config.v2.origin"),env:Ea.get("tfs.config.v2.env")}}),"true"===Ma.auto){var s=Ma.appId;if(H.isPopup()){var c=H.getWindowParams();c&&c.appId&&(s=c.appId),c&&c.context&&ce.a.refreshContext(c.context)}ke.a.fetch(s,{},(function(e){e.appId&&t.init(e.appId),e.err&&_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:ka({action:"API_ERROR"},e.err)},!0)}),(function(e){_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:ka({action:"API_PERF"},e)})}))}}return wa(e,[{key:"init",value:function(e){var t;if(Z.a.isString(e))t=e;else{var n=e;t=n.appId,ke.a.set(n)}var r=ke.a.get(t),o=!H.isPopup()&&r.forceCrossOrigin;V.init({initCallback:function(e){!function(e,t){var n=ke.a.get(e),r=Z.a.getObjectReference("workflowConfig.chat.assistAccountClientKeyMap",n),o=Array.isArray(r)&&r.length>1,s=ce.a.getContext()[a.a.PRECHAT_DATA_KEYS.ACTIVE_SESSION];se.init({storage:t,activeSession:s,interLobEnabled:o,onStoreUpdate:la.updateState.bind(la)});var c=se.browser.get(a.a.APP_SESSION_KEY);c&&c.context&&ce.a.refreshContext(c.context);var u=se.browser.get(a.a.CONFIG_APP_ID);u?ke.a.fetch(u,{},(function(e){e.appId&&xa(e.appId),e.err&&_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:ka({action:"API_ERROR"},e.err)},!0)}),(function(e){_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:ka({action:"API_PERF"},e)})})):xa(e)}(t,e)},clientId:Ma.key,xdPath:Ma.path,getData:r.apis.getData?Z.a.getFunctionReference(r.apis.getData):void 0,setData:r.apis.setData?Z.a.getFunctionReference(r.apis.setData):void 0,forceCrossOrigin:o})}},{key:"startInteraction",value:function(e,t){if(!Pa)return!1;var n=t,a=e,r=n&&n.appId;return a&&a.prechatData&&(ce.a.refreshContext(a.prechatData),a.prechatData.queue&&(n||(n={}),n.fallbackQueue=e.prechatData.queue),delete a.prechatData),ke.a.fetch(r,a,(function(e){if(e.appId){_.setAppId(e.appId);var t=ke.a.get(e.appId);Qe.configure(t.googleBusinessMessages),ze.configure(t.appleBusinessChat,(function(){return st.triggerInvite(e.appId,n)}))}e.err&&_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:ka({action:"API_ERROR"},e.err)},!0)}),(function(e){_.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:ka({action:"API_PERF"},e)})})),!0}},{key:"endInteraction",value:function(e){return st.removeInvite(e)}},{key:"sendContext",value:function(e){la.sendContext(e)}},{key:"pushJourneyUrl",value:function(e,t){l.a.notEmpty(e,"pushJourneyUrl: Title"),l.a.notEmpty(t,"pushJourneyUrl: Url"),we.pushUrl(e,t),la.sendContext(Ra({},a.a.JOURNEY,we.getJourneyEncoded()))}},{key:"sendSystemMessage",value:function(e,t){l.a.notEmpty(e,"sendSystemMessage: content is not string or empty"),void 0!==t&&l.a.notEmpty(t,"sendSystemMessage: type is not string or empty"),la.sendSystemMessage({content:e,type:t})}},{key:"isWithinSupportHours",value:function(e){if(!Pa)return!1;var t=se.browser.get(a.a.CONFIG_APP_ID),n=ke.a.get(t||"default");return new Ce.a(n.supportHours,e).isWithinSupportHours()}},{key:"isInteractionActive",value:function(){return la.isWidgetLoaded()}},{key:"login",value:function(e){return l.a.notEmpty(e,"login: brandUserId is not string or empty"),!!Pa&&la.login(e)}},{key:"logout",value:function(){return!!Pa&&(la.logout(),!0)}},{key:"setUserProfile",value:function(e){return!!Pa&&(la.setUserProfile(e),!0)}},{key:"getSessionContext",value:function(){return!!Pa&&la.getSessionContext()}},{key:"sendCustomCardResponse",value:function(e,t,n,a){return!!Pa&&la.sendCustomCardResponse(e,t,n,a)}}]),e}(),Ua=function(e){_a(n,e);var t=Ta(n);function n(){return Oa(this,n),t.apply(this,arguments)}return wa(n,[{key:"init",value:function(e){Pa||da.a&&fa.a&&pa.a&&ha.a&&va.a&&ya(Sa(n.prototype),"init",this).call(this,e)}}]),n}(Fa),ja=function(e){_a(n,e);var t=Ta(n);function n(){var e;return Oa(this,n),e=t.call(this),la.addExtensibleListener(La),e}return wa(n,[{key:"init",value:function(e,t){Pa||(u.a.isUndefinedOrNull(t)||la.setParentElement(t),ya(Sa(n.prototype),"init",this).call(this,e))}},{key:"reconfigure",value:function(e,t){u.a.isUndefinedOrNull(t)||la.setParentElement(t),ya(Sa(n.prototype),"init",this).call(this,e)}},{key:"cleanUp",value:function(e){return la.cleanUp(e)}},{key:"dispatchAction",value:function(e,t){la.dispatchAction(e,t)}}]),n}(Fa);t.a=function(e){return e?new ja:new Ua}},36:function(e,t,n){"use strict";var a=n(8),i=n(11);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e){var t=e,n={proactive:"maximized",button:"minimized"};return Object.keys(t).forEach((function(e){/^.*\.(cssReset|restrictViewport|lightbox\.show|preCheckSupportHours|touchMove)$/.test(e)&&!i.a.isBoolean(t[e])&&(t[e]="true"===t[e])})),t.type&&(t.state=t.state||t.type,delete t.type),void 0!==n[t.state]&&(t.state=n[t.state]),t.triggerAppId&&(t.inviteId=t.inviteId||t.triggerAppId,delete t.triggerAppId),t}function s(e){var t=e;return t&&t.widgets&&(t.widgets=u(t.widgets)),t=c(t)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e;if(Object.prototype.hasOwnProperty.call(e,"isSecure")){var n=e.isSecure;delete t.isSecure,!0===n&&(t.confidential=!0,t.secureStorageModes=["third-party"])}return t}function u(e){var t=e;return t.forEach((function(e){switch(e.type){case"listinput":e.inputtype&&(e.inputType=e.inputType||e.inputtype,delete e.inputtype),e.boxcolor&&(e.optionColor=e.optionColor||e.boxcolor,delete e.boxcolor),e.options=e.options||e.boxes,delete e.boxes,e.options.forEach((function(e){e.imgsrc&&(e.imgSrc=e.imgSrc||e.imgsrc,delete e.imgsrc)}));break;case"text":e.number&&i.a.isString(e.number)&&(e.number=parseInt(e.number,10));break;case"panel":e.widgets&&i.a.isArray(e.widgets)&&(e.widgets=u(e.widgets))}})),t}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,l;return t=e,(n=[{key:"transformPage",value:function(e){return s(e)}},{key:"transformInvite",value:function(e){return o(e)}},{key:"transform",value:function(e){var t,n,r=Object(a.a)({},e);r.workflowConfig&&(r.workflowConfig=(t=r.workflowConfig,n={},t.messaging&&(n.messaging=t.messaging),t.va&&(n.va=t.va),t.chat&&(n.chat=t.chat),t.assistAccountId&&(n.chat={}),t.vaApiKey&&(n.va={}),Object.keys(t).forEach((function(e){e.indexOf("assist")>-1&&"chat"!==e&&(n.chat[e]=t[e]),e.indexOf("va")>-1&&"va"!==e&&(n.va[e]=t[e])})),n)),r.windowPosition&&(r.windowPosition=function(e){var t=e;switch(e){case"left":t="bottomleft";break;case"right":t="bottomright"}return t}(r.windowPosition));var l,d,f,p,h,v,g,E,m=function(e){if(!1===e.branding)return!1;if(e.branding&&!1===e.branding.type)return!1;if(!1===e.brandingType)return!1;if(void 0!==e.brandingType){var t={};return t.type=e.brandingType,t.logoUrl=e.brandingLogoUrl,t.avatarUrl=e.brandingAvatarUrl,t.agentDesc=e.brandingAgentDesc,t}return e.branding}(r);if(m?r.branding=m:delete r.branding,e.buttonFgColor&&(r.secondaryFgColor=e.buttonFgColor,r.tertiaryFgColor=e.buttonFgColor,delete r.buttonFgColor),e.messageFgColor&&(i.a.isString(e.messageFgColor.system)&&"#9b9b9b"===e.messageFgColor.system.toLowerCase()&&delete r.messageFgColor.system,i.a.isString(e.messageFgColor.typing)&&"#999999"===e.messageFgColor.typing&&delete r.messageFgColor.typing),r.headerBorderColor&&(r.header=Object(a.a)({},r.header,(l=r.headerBorderColor,(d={}).borderColor=l,d)),delete r.headerBorderColor),r.windowFontFamily&&(r.fontFamily=r.windowFontFamily,delete r.windowFontFamily),r.fontFamily){if(i.a.isString(r.fontFamily))r.fonts=r.fontFamily.split(",").map((function(e){return e.trim()}));else if(i.a.isArray(r.fontFamily)){var y=r.fontFamily[r.fontFamily.length-1].display.split(",").map((function(e){return e.trim()}));1===y.length&&y.push("'Helvetica Neue'","Helvetica","Arial","sans-serif"),r.fontFamily.forEach((function(e){switch(e.type){case"custom-font":i.a.isObject(y[0])||(y[0]={}),y[0].name=e.name,"bold"===e.weight&&(y[0].bold={ttf:e.ttf,woff:e.woff,woff2:e.woff2}),"normal"!==e.weight&&void 0!==e.weight||(y[0].normal={ttf:e.ttf,woff:e.woff,woff2:e.woff2})}})),r.fonts=y}delete r.fontFamily}r.borderRadius&&(r.borderRadius=(f=r.borderRadius,"string"==typeof(p=f)&&(p=parseInt(f,10)),p)),r.frontendsService&&(r.frontendsService=(h=r.frontendsService,(v=Object(a.a)({},h)).services&&(v.opts=Object(a.a)({},v.services),delete v.services),v)),r.audioNotify&&r.audioNotify.message&&r.audioNotify.message.mp3&&(r.notifications={audio:{message:r.audioNotify.message.mp3,started:r.audioNotify.message.mp3,reconciled:r.audioNotify.message.mp3}},delete r.audioNotify),r.i18n&&r.i18n.uiStrings&&(r.i18n.uiStrings=(g=r.i18n.uiStrings,E=g,Object.keys(g).forEach((function(e){Object.keys(g[e]).forEach((function(t){switch(E[e][t]=E[e][t].replace(/(\{\{)(.*?)(\}\})/gm,"%{$2}"),t){case"CHAT_WAIT":E[e].CHAT_WAIT_LONG=E[e].CHAT_WAIT,E[e].CHAT_WAIT_10MINS=E[e].CHAT_WAIT,E[e].CHAT_WAIT_5MINS=E[e].CHAT_WAIT,E[e].CHAT_WAIT_2MINS=E[e].CHAT_WAIT,E[e].CHAT_WAIT_1MIN=E[e].CHAT_WAIT;break;case"CHAT_DOCKED_RETURN":E[e].CHAT_HEADER_RETURN=E[e].CHAT_DOCKED_RETURN;break;case"CHAT_HEADER_GLOBAL":E[e].CHAT_HEADER_DEFAULT=E[e].CHAT_HEADER_GLOBAL;break;case"CHAT_DOCKED_OFFLINE":E[e].CHAT_HEADER_OFFLINE=E[e].CHAT_DOCKED_OFFLINE;break;case"CHAT_DOCKED_BUSY":E[e].CHAT_HEADER_BUSY=E[e].CHAT_DOCKED_BUSY}}))})),E));var _=/\/securepay$/;return r.secureCardProxyConfig&&_.test(r.secureCardProxyConfig.baseUrl)&&(r.secureCardProxyConfig.baseUrl=r.secureCardProxyConfig.baseUrl.replace(_,"")),r.appleBusinessChat&&"boolean"==typeof r.appleBusinessChat.enabled&&(r.appleBusinessChat.loadOnly=r.appleBusinessChat.enabled,delete r.appleBusinessChat.enabled),r=function(e){var t=e,n=-1;return i.a.isArray(t.maskMessagePatterns)&&(t.maskMessagePatterns.forEach((function(e,t){"creditcard"===e.name&&(n=t)})),n>-1&&t.maskMessagePatterns.splice(n,1)),t}(r=function(e){var t=e;return i.a.isArray(t.invites)&&t.invites.forEach((function(e){o(e)})),t}(r=function(e){var t=e;return["prechat","busy","offline","waiting"].forEach((function(e){t[e]&&t[e].widgets&&(t[e].widgets=u(t[e].widgets))})),["postchat","vaSurvey"].forEach((function(e){t.dialog&&t.dialog[e]&&t.dialog[e].widgets&&(t.dialog[e].widgets=u(t.dialog[e].widgets))})),t.cards&&t.cards.forEach((function(e){i.a.isArray(e.pages)?e.pages.forEach((function(e){e=s(e)})):!0===e.isExternal&&(e=c(e))})),t}(r)))}}])&&r(t.prototype,n),l&&r(t,l),e}();t.a=new l},37:function(e,t,n){"use strict";t.a={URL_PARAMS:{CONTEXT_INFO:"contextInfo",CLIENT_KEY:"clientKey",APP_ID:"appId",RULE_ID:"ruleId",INVITE_ID:"inviteId",LOAD_CUSTOMSCRIPT:"loadCustom",FIRE_LINK_PROPERTY:"fireLinkProperty",FIRE_TARGET_DETERMINATION:"fireTargetDetermination",IS_POPUP:"isPopup",TOKEN:"token"},EXTENSIBLE:{SCRIPT_ID:"tfs-tie-extensible",PATH:"/psp/platform/",DOMAIN_PROD:"d1af033869koo7.cloudfront.net",DOMAIN_STAGE:"d2j8jkom7xmn9n.cloudfront.net",SCRIPT:"247pxe.js",SCRIPT_DEBUG:"247pxe.debug.js"},TYPE_BUTTON:"BUTTON",LOCAL_STORAGE_NAME:"tfs-directchat",LOCAL_STORAGE_KEY:"directchat",DEBUG_KEY:"debug",WIDGET_STATE:{PAGE_INIT:"pageInit",WIDGET_LOADING:"widgetLoading",WIDGET_LOADED:"widgetLoaded",CHAT_REQUESTED:"chatRequested",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",CHAT_STARTED:"chatStarted",CHAT_INTERACTIVE:"chatInteractive",CHAT_ENDED:"chatEnded",MINIMIZED:"minimized",MAXIMIZED:"maximized",WIDGET_CLOSED:"widgetClosed"},EVENTS:{TARGET_DETERMINATION:"TargetDeterminationEvent",LINK_PROPERTY:"LinkPropertyEvent",CONNECTION_TO_AGENT:"OnlineInteractionConnectionToAgentEvent"},IVR:{ANI:"ani",PHONE_NUMBER:"phoneNumber"},STATE_CHANGE_EVENT:"stateChange",WINDOW:{TITLE:"Chat",NAME:"Chat"},ERRORS:{DEFAULT:"Something went wrong. Please try again later",INVALID_SESSION:"Invalid Session",SESSION_EXPIRED:"Session Expired",INVALID_CLIENT_KEY:"Invalid Client Key",INVALID_CONTEXT:"Invalid Context",PRIVATE_BROWSING_MESSAGE:"To enable chat, open this web page in a new window that isn't using Private/Incognito mode."}}},38:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"encode",value:function(e){try{return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}}},{key:"decode",value:function(e){try{return decodeURIComponent(escape(window.atob(e)))}catch(e){}}},{key:"parse",value:function(e,t){var n=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)$/i.exec(e);if(null!==n){var a=n[1],i=";base64"===n[3]?this.decode(n[4]):void 0;return t===a?i:void 0}}}])&&a(t.prototype,n),i&&a(t,i),e}();t.a=new i},4:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.isUndefinedOrNull(t)||this.isUndefinedOrNull(t[e[0]])?n:1===e.length?t[e[0]]:this.get(e.slice(1),t[e[0]],n)}},{key:"isUndefinedOrNull",value:function(e){return null==e}},{key:"isEmptyOrNull",value:function(e){return this.isUndefinedOrNull(e)||""===e}},{key:"createNestedObject",value:function(e,t,n){var a=e,i=t.pop();return t.map((function(e){return a[e]=a[e]||{},a=a[e],0})),a[i]=n,a=a[i]}},{key:"extractRequiredAttributes",value:function(e,t){for(var n={},a=0;a<t.length;a+=1){var i=t[a];if(i.indexOf(".")>0){var r=i.split("."),o=this.get(r,e,void 0);this.createNestedObject(n,r,o)}else this.isUndefinedOrNull(e[i])||(n[i]=e[i])}return n}},{key:"removeEmpty",value:function(e){var t=this,n=e;return Object.keys(n).forEach((function(e){t.isEmptyOrNull(n[e])&&delete n[e]})),n}},{key:"removeSpecificKeys",value:function(e,t){var n=e;return t.map((function(e){return delete n[e]})),n}}])&&a(t.prototype,n),i&&a(t,i),e}();t.a=new i},40:function(e,t,n){"use strict";var a=n(3),i=n(13),r=n(24),o=n(14);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,c;return t=e,(n=[{key:"createRequest",value:function(e,t){var n=new XMLHttpRequest,a="onreadystatechange";return"withCredentials"in n?(n.open(e,t,!0),""===n.responseType&&(a="onload")):"undefined"!=typeof XDomainRequest?((n=new XDomainRequest).open(e,t),a="onload"):n=null,{xhr:n,onloadHandler:a}}},{key:"makeRequest",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",n=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.a.noop,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.a.noop,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"text",f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:3e4,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:o.a.noop,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:o.a.noop,v=arguments.length>10&&void 0!==arguments[10]?arguments[10]:o.a.noop;a.a.isFunction(u,"success"),a.a.isFunction(l,"error");var g=n;if("get"===t.toLowerCase()&&null!=c){var E=Object.keys(c).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(c[e]))})).join("&");g="".concat(g,"?").concat(E)}9===i.a.ieVersion&&(s.Authorization&&(g=r.a.parseUrl(g).appendToSearch({api_key:s.Authorization}).href),g=g.replace(/(http(s?):)\/\//,"//"));var m=this.createRequest(t,g),y=m.xhr,_=m.onloadHandler;if(y){y.requestBeginTs=(new Date).getTime(),y.isErrorHandled=!1,y.timeout=f,Object.keys(s).map((function(e){return y.setRequestHeader&&y.setRequestHeader(e,s[e]),0})),y.responseType=d;var I=function(){if("onreadystatechange"!==_||4===y.readyState){var t;try{t=y.status}catch(e){t=0}if(0===t)T();else if("blob"===y.responseType)y.response&&200===t?u(y.response,e.getResponseHeaderMap(y)):T();else if(y.responseText||204===t){if(204===t){var n={code:204,statusText:y.statusText};u(JSON.stringify(n))}else Math.floor(t/100)>=4?T():u(y.responseText,e.getResponseHeaderMap(y));y.requestDoneTs=(new Date).getTime(),void 0===y.onloadstart&&void 0===y.onloadend&&v({url:g,statusCode:y.status,loadTime:-1,turnTime:y.requestDoneTs-y.requestBeginTs})}else T()}},T=function(e){if(!y.isErrorHandled){var t=y.statusText||("timeout"===e.type?"request timeout":"CORS error");y.requestDoneTs=(new Date).getTime(),l({url:g,errorMsg:t,errorInfo:"blob"===y.responseType?y.response:y.responseText,code:y.status}),y.isErrorHandled=!0}};y[_]=I,"ontimeout"in y&&(y.ontimeout=T),y.addEventListener("progress",p,!1),y.upload.addEventListener("progress",p,!1),y.addEventListener("error",T,!1),y.addEventListener("abort",h,!1),y.addEventListener("loadstart",(function(){y.requestStartTs=(new Date).getTime()}),!1),y.addEventListener("loadend",(function(){y.requestEndTs=(new Date).getTime(),v({url:g,statusCode:y.status,loadTime:y.requestEndTs-y.requestStartTs,turnTime:y.requestDoneTs-y.requestBeginTs})}),!1),y.onerror=T,y.send(c)}}},{key:"getResponseHeaderMap",value:function(e){var t={};return e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var n=e.split(": ");n.length>=2&&(t[n[0].trim().toLowerCase()]=n[1].trim())})),t}}])&&s(t.prototype,n),c&&s(t,c),e}();t.a=c},48:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"documentHasFocus",value:function(){return document.hasFocus?document.hasFocus():"hidden"in document?!document.hidden:!document.visibilityState||"visible"===document.visibilityState}}],(n=[{key:"onChange",value:function(e){var t="hidden",n=function(n){var a=n||window.event,i={focus:!0,focusin:!0,pageshow:!0,blur:!1,focusout:!1,pagehide:!1};a.type in i?e(i[a.type]):e(!document[t])};if(void 0===document.hidden){var a=["moz","webkit","ms"];Object.keys(a).forEach((function(e){var i=a[e].concat("Hidden");i in document&&(t=i,document.addEventListener(a[e].concat("visibilitychange"),n))})),"onfocusin"in document?(document.onfocusin=n,document.onfocusout=n):(window.onpageshow=n,window.onpagehide=n,window.onfocus=n,window.onblur=n)}else document.addEventListener("visibilitychange",n)}}])&&a(t.prototype,n),i&&a(t,i),e}();t.a=i},5:function(e,t,n){"use strict";t.a={TFS_HIDE_COBROWSE_ID:"tfs_hide_cobrowse",TFS_CONTAINER_ID:"tfs_container",TFS_CONTAINER_ROOT_ID:"tfs_container_root",TFS_CONTAINER_ROOT_PRE_ID:"tfs_container_root_pre",TFS_DRAG_ID:"tfs_drag",TFS_OVERLAY_ID:"tfs_overlay",TFS_IFRAME_ID:"tfs_interaction_iframe",TFS_SCRIPT_ID:"tfs-js-iframe-async",APPLE_SCRIPT_ID:"tfs-js-abc",TFS_RENDERER_SCRIPT_ID:"tfs-js-renderer",VISITOR_SESSION_ID:"visitorSessionId",INTERACTION_ID:"interactionId",CHAT:"chat",QUEUE:"queue",CHAT_STATUS:"chatStatus",TAB_SESSION_KEY:"tab-session-key",BROWSER_SESSION_KEY:"browser-session-key",PREVIOUS_WINDOW_NAME:"previous-window-name",LAST_UPDATED_TIME:"ts",SOURCE:"source",CARDS_RESOURCE_NAME:"cards.js",CARDS_MIN_RESOURCE_NAME:"cards.min.js",WIDGET_LOADER_ID:"widget-loader",XD_SCRIPT_RESOURCE_NAME:"xd.js",XD_SCRIPT_MIN_RESOURCE_NAME:"xd.min.js",REQUIRED_KEYS:["app.context.queue","app.context.accountId","chat.visitorSessionId","chat.domainAliases","chat.startTime","va.turnsId","va.noInput","va.poller","va.vaSurveyCompleted","messaging.userTokenId","messaging.brandUserId","messaging.interactionStatus","widgetLoaded","initialWorkflow","reload","displayMode","asid","appId"],WORKFLOW:"workflow",PRECHAT_DATA_KEYS:{ACTIVE_SESSION:"asid",RULE_ID:"sc",APP_INTERACTION_ID:"appInteractionId",RULE_CATEGORY:"rc",VISITOR_ID:"vi"},STORE_UPDATE:"STORE_UPDATE",STORE_DELETE:"STORE_DELETE",DISPLAY_MODE:{FULLSCREEN:"fullscreen",FLOATING:"floating",NONE:"none"},FRAME_VIEW:{INPAGE:"inpage",POPUP:"popup"},WIDGET_STATE:{PAGE_INIT:"pageInit",WIDGET_LOADING:"widgetLoading",WIDGET_LOADED:"widgetLoaded",CARD_OPEN:"cardOpened",CARD_SUBMIT:"cardSubmitted",CARD_CANCEL:"cardCanceled",CARD_CLOSE:"cardClosed",CHAT_REQUESTED:"chatRequested",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",CHAT_STARTED:"chatStarted",CHAT_INTERACTIVE:"chatInteractive",CHAT_ENDED:"chatEnded",CHAT_TRANSFERRED:"chatTransferred",VA_STARTED:"vaStarted",VA_ESCALATE:"vaEscalatedToChat",VA_SURVEY_COMPLETED:"vaSurveyCompleted",VA_FINALIZE:"vaFinalized",VA_TERMINATE:"vaTerminated",VA_RECONCILED:"vaReconciled",MINIMIZED:"minimized",MAXIMIZED:"maximized",WIDGET_CLOSED:"widgetClosed",USER_ACTIVE:"userActive",USER_INACTIVE:"userInactive"},ORIENTATIONS:{LANDSCAPE:"landscape",PORTRAIT:"portrait"},JOURNEY:"urls",WIDGET_LOADED:"widgetLoaded",INITIAL_WORKFLOW:"initialWorkflow",INITIATOR:"initiator",SHOW_ON_RELOAD:"reload",DISPLAY_MODE_KEY:"displayMode",CONTENT_PATH:"content",UDE_CONFIG_JSON:"config.json",CONFIG_APP_ID:"appId",TAB_STORAGE_KEY:"tfs-tab",APP_SESSION_KEY:"app",CHAT_SESSION_KEY:"chat",VA_SESSION_KEY:"va",CARDS_SESSION_KEY:"cards",MESSAGING_SESSION_KEY:"messaging",XD_COMMANDS:{INITIALIZE:"init",INITIALIZE_ERROR:"init-error",SET:"set",GET:"get",REMOVE:"remove",UPDATE:"update"},ERROR_CODES:{LOCALSTORAGE_UNAVAILABLE:"LOCALSTORAGE_UNAVAILABLE"},TRACK_PLATFORMS:{chat:"CHAT",va:"VIRTUAL_AGENT"},STATE_CHANGE_EVENT:"stateChange",POSITION:{TOP_LEFT:"topleft",TOP_RIGHT:"topright",BOTTOM_LEFT:"bottomleft",BOTTOM_RIGHT:"bottomright"},INITIAL_STATE:"initialState",IS_RECONCILED:"isReconciled",IFRAME_READY:"iframeReady",VA_TURNS_ID_KEY:"va.turnsId",VISITOR_SESSION_ID_KEY:"chat.visitorSessionId",DOMAIN_ALIASES_KEY:"chat.domainAliases",DEFAULT_CONFIG:"default",USER_LOGIN:"login",USER_PROFILE:"userProfile",MAX_KEYBOARD_HEIGHT:{LANDSCAPE:[{MIN_SCREEN_HEIGHT:600,MAX_SCREEN_HEIGHT:850,KEYBOARD_HEIGHT:400},{MIN_SCREEN_HEIGHT:851,MAX_SCREEN_HEIGHT:1100,KEYBOARD_HEIGHT:475}],PORTRAIT:[{MIN_SCREEN_HEIGHT:800,MAX_SCREEN_HEIGHT:1150,KEYBOARD_HEIGHT:315},{MIN_SCREEN_HEIGHT:1151,MAX_SCREEN_HEIGHT:1500,KEYBOARD_HEIGHT:380}]},STYLE_STATE:{MAXIMIZED:"maximized",MINIMIZED:"minimized",CARD:"card",PLUSCARD:"pluscard",HIDDEN:"hidden"},STYLE_TRANSITION:{IMMEDIATE:"immediate",SCROLL:"scroll",RESIZE:"resize"},STORAGE_TYPES:{LOCALSTORAGE:"localstorage",CUSTOM:"custom",XD:"xd"},STORAGE_KEY_NAMES:{USER_SESSION:"tfs-user-session",TAB_SESSION:"tfs-session",TAB_PREFIX:"tfs-tab-"}}},51:function(e,t,n){"use strict";var a=n(48),i=n(17),r=n(10),o=n(3);function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioContainer=i.a.createElement("div",{style:"display: none"}),"complete"!==u.readyState?r.a.requestTimeout((function(){u.body.appendChild(t.audioContainer)}),100):u.body.appendChild(this.audioContainer)}var t,n,c;return t=e,(n=[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.a.notEmpty(e,"AudioNotification::id"),!l[e]&&(l[e]=i.a.createElement("audio",{preload:"auto",controls:"false",hidden:"true"},[i.a.createElement("source",{src:t.mp3,type:"audio/mpeg"})]),this.mute(e),this.audioContainer.appendChild(l[e]),!0)}},{key:"deregister",value:function(e){return o.a.notEmpty(e,"AudioNotification::id"),!!l[e]&&(l[e].parentNode.removeChild(l[e]),delete l[e],!0)}},{key:"optIn",value:function(e){if(!l[e])return!1;try{this.mute(e),l[e].play()}catch(e){return!1}return!0}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!l[e])return!1;if(t||a.a.documentHasFocus()){try{this.unmute(e),l[e].play()}catch(e){return!1}return!0}return!1}},{key:"volume",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return!!l[e]&&(l[e].muted=!t,l[e].volume=t,!0)}},{key:"mute",value:function(e){return this.volume(e,0)}},{key:"unmute",value:function(e){return this.volume(e)}},{key:"destroy",value:function(){i.a.removeElement(this.audioContainer)}}])&&s(t.prototype,n),c&&s(t,c),e}(),u=document,l={};t.a=new c},54:function(e,t,n){"use strict";var a=n(4),i=n(3);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function s(e){var t=new Date,n=e,a=60*(t.getTimezoneOffset()-n)*1e3,i=t.getTime()+a;return new Date(i)}function c(e,t,n){for(var a=[],i=0;i<e.length;i+=1){var r=e[i],o=r.start,s=r.end;o=u(o,t,n),s=u(s,t,n),a.push({start:o,end:s})}return a}function u(e,t,n){var a=parseInt(e,10),i=t.getFullYear(),r=t.getMonth(),o=t.getDate()+n,s=parseInt(a/100,10);return new Date(i,r,o,s,a%100)}function l(e,t){var n=Math.abs(e-t),a=new Date(n);return{days:a.getUTCDate()-1,hours:a.getUTCHours(),minutes:a.getUTCMinutes()}}var d=function(){function e(t,n){var r,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.forEach((function(e){e.queue===n&&(r=e),"default"===e.queue&&(u=e)})),i.a.isObject(u,"SupportHours:default queue object"),r||(r=u),this.timeZoneOffset=a.a.get(["timeZoneOffset"],r,0),this.supportRange=function(e){i.a.isNumber(e.timeZoneOffset,"SupportHours::timeZoneOffset");for(var t=[],n=s(e.timeZoneOffset),a=n.getDay(),r=a;r<=a+o.length;r+=1){var u=r-a,l=c(e[o[r%7]]||[{start:"0000",end:"2359"}],n,u);t.push(l)}return t}(r),0}var t,n,u;return t=e,(n=[{key:"isWithinSupportHours",value:function(){var e=this.getNextAvailableTime();return e.days+e.hours+e.minutes===0}},{key:"getNextAvailableTime",value:function(){for(var e=this.supportRange,t=s(this.timeZoneOffset),n=0;n<e.length;n+=1)for(var a=0;a<e[n].length;a+=1){var i=e[n][a];if(t>=i.start&&t<=i.end)return l(t,t);if(t<=i.start)return l(i.start,t)}return 0}}])&&r(t.prototype,n),u&&r(t,u),e}();t.a=d},541:function(e,t,n){"use strict";n.r(t);var a=n(337),i=n(8),r=Object(a.a)(!1);window._tfs&&Object(i.a)(r,window._tfs),window._tfs=r},59:function(e,t,n){"use strict";var a,i=n(27),r=n(4);function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"init",value:function(e){this.isFullScreen=e,this.isFullScreen&&(this.sendMessage(i.a.IFRAME_POST_MESSAGE.GET_BODY_CSS),window.addEventListener("message",this._onInboundMessageReceived.bind(this)))}},{key:"_onInboundMessageReceived",value:function(e){var t=r.a.get(["data"],e);if(!r.a.isUndefinedOrNull(t)){try{t=JSON.parse(t)}catch(e){return}if(t.msgSrc===i.a.IFRAME_INBOUND_MESSAGE.MESSAGE_SOURCE)switch(t.msg){case i.a.IFRAME_INBOUND_MESSAGE.RESP_GET_BODY_CSS:a=t.css||{}}}}},{key:"sendMessage",value:function(e,t,n){switch(e){case i.a.IFRAME_POST_MESSAGE.SET_IFRAME_CSS:parent.postMessage(JSON.stringify({msg:e,css:t,clean:n}),"*");break;case i.a.IFRAME_POST_MESSAGE.SET_IFRAME_VIEWPORT:parent.postMessage(JSON.stringify({msg:e,content:t}),"*");break;case i.a.IFRAME_POST_MESSAGE.GET_BODY_CSS:parent.postMessage(JSON.stringify({msg:e}),"*");break;case i.a.IFRAME_POST_MESSAGE.SET_BODY_CSS:this.isFullScreen&&(t.isMaximized?parent.postMessage(JSON.stringify({msg:e,css:t.css,clean:n}),"*"):parent.postMessage(JSON.stringify({msg:e,css:a,clean:n}),"*"))}}}])&&o(t.prototype,n),s&&o(t,s),e}();t.a=new s},61:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},72:function(e,t,n){"use strict";var a=n(27),i=n(59);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chatVpContent="shrink-to-fit=no,width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no",this._oldVpContent="",this._viewport=void 0,this._initialized=!1}var t,n,o;return t=e,(n=[{key:"init",value:function(e){var t=document;if(p&&!this._initialized){var n=t.head||t.getElementsByTagName("head")[0];this._viewport=t.querySelector("meta[name=viewport]"),this._viewport?this._oldVpContent=this._viewport.content:(this._viewport=t.createElement("meta"),this._viewport.name="viewport",this._viewport.content="",n.appendChild(this._viewport)),this._securityRestrictions=e,this._initialized=!0}}},{key:"alter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._initialized&&(this._viewport.content=e?this._chatVpContent:this._oldVpContent,this._securityRestrictions.frameInFrame&&i.a.sendMessage(a.a.IFRAME_POST_MESSAGE.SET_IFRAME_VIEWPORT,this._viewport.content))}}])&&r(t.prototype,n),o&&r(t,o),e}(),s=window.navigator.userAgent,c=-1!==s.indexOf("AppleWebKit")&&s.match(/(iPod|iPhone|iPad)/),u=-1!==s.indexOf("Android"),l=u&&-1===s.indexOf("Mobile"),d=s.match(/(Macintosh)/),f=c&&"iPad"===c[0]||d&&navigator.maxTouchPoints>0,p=(u||c)&&!(l||f);t.a=new o},79:function(e,t,n){"use strict";var a=n(3),i=n(13);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this._initialized=!1,this._listeners=[]}var t,n,o;return t=e,(n=[{key:"send",value:function(e){this._initialized&&this._destinationWindow.postMessage(JSON.stringify(e),this._getOrigin())}},{key:"init",value:function(e){this._initialized||(a.a.isObject(e),a.a.notEmpty(e.targetOrigin),a.a.isNotUndefinedOrNull(e.destinationWindow),this._destinationWindow=e.destinationWindow,this._targetOrigin=e.targetOrigin,this._onMessageBound=this._onMessage.bind(this),this._getAddEventListener()("message",this._onMessageBound),this._initialized=!0)}},{key:"_onMessage",value:function(e){if(e.origin===this._getOrigin()||window.ReactNativeWebView)try{this._notify(JSON.parse(e.data))}catch(e){}}},{key:"_notify",value:function(e){return this._listeners.map((function(t){return t.apply(null,[e]),0})),0}},{key:"_getOrigin",value:function(){return this._targetOrigin||window.location.origin}},{key:"clear",value:function(){this._initialized=!1,this._getRemoveEventListener()("message",this._onMessageBound),this._listeners.splice(0,this._listeners.length)}},{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"_getAddEventListener",value:function(){return this._isAndroidMobileSDK()?document.addEventListener:window.addEventListener}},{key:"_getRemoveEventListener",value:function(){return this._isAndroidMobileSDK()?document.removeEventListener:window.removeEventListener}},{key:"_isAndroidMobileSDK",value:function(){return(i.a.isAndroid||i.a.isAndroidTablet)&&window.ReactNativeWebView}}])&&r(t.prototype,n),o&&r(t,o),e}();t.a=o},8:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function e(t){var n=arguments;if(null==t||"object"!==a(t))return t;for(var i=t,r=arguments.length<=1?0:arguments.length-1,o=function(t){var r=t+1<1||n.length<=t+1?void 0:n[t+1];null!=r&&"object"===a(r)&&Object.keys(r).map((function(t){return Object.prototype.hasOwnProperty.call(r,t)&&(void 0!==r[t]&&null!==r[t]&&r[t].constructor&&r[t].constructor===Object?(void 0===i[t]&&(i[t]={}),"object"!==a(i[t])?i[t]=r[t]:e(i[t],r[t])):r[t]&&r[t].constructor===Array?i[t]=r[t].slice(0):i[t]=r[t]),0}))},s=0;s<r;s+=1)o(s);return i}},80:function(e,t,n){"use strict";t.a={CONFIG_API_ACTION:{PRECHAT_SUBMIT:"prechatSubmit",CHAT_TRANSFERRED:"chatTransferred",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",WIDGET_LOADING:"widgetLoading"}}},81:function(e,t,n){"use strict";t.a={workflow:"chat",workflowConfig:{},appId:"default",primaryColor:"#EF8822",primaryFgColor:"#FFFFFF",header:{borderColor:void 0},secondaryColor:"#EF8822",secondaryFgColor:"#FFFFFF",tertiaryColor:"#727272",tertiaryFgColor:"#FFFFFF",windowHeight:530,windowWidth:330,windowOffset:35,windowPosition:"bottomright",windowTitle:"Chat support",windowName:"frontends",fonts:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Helvetica Neue"',"Helvetica","Arial","sans-serif"],minimizedDock:{customDocks:[],desktop:{offsetX:0,offsetY:0},phone:{offsetX:0,offsetY:0},tablet:{offsetX:0,offsetY:0}},popupWindow:{initial:!1,byUser:!1,windowWidth:450,windowHeight:680,windowPosition:"topleft"},surveyEndpoint:"",quickReply:{display:"horizontal",fgColor:void 0},notifications:{audio:{checkFocus:!0,message:"",reconciled:"",started:""},visual:{message:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",reconciled:"",started:""}},toastMessage:{duration:3e3,showClose:!0},toastMessageBgColor:"#000000",toastMessageFgColor:"#FFFFFF",menuItemBgColor:"#555555",menuItemFgColor:"#FFFFFF",scrollFromBottom:!0,legalese:[],timeFormat:"%l:%M %p",maxUserMessageLength:1500,useDefaultQueueForNewChat:!1,timestampDisplayInterval:12e4,showPoweredBy247:!0,showAbout247:!0,typingNotificationTimeout:15e3,longPollTimeoutInterval:72e5,forceCrossOrigin:!0,forceMaximizeInNewTab:!1,nonInteractiveChat:{showSurvey:!1,showTranscript:!1,showStartNewChat:!0},interactiveChat:{showSurvey:!0,showTranscript:!0,showStartNewChat:!0},branding:{type:"none",bgColor:"#EEEEEE",static:!1,logoUrl:"",logoOffset:0,avatarUrl:""},messageBgColor:{user:"#FFFFFF",agent:"#FFFFFF",va:"#FFFFFF",notification:"#5595E5"},messageFgColor:{user:"#333333",agent:"#333333",va:"#333333",system:"#727272",typing:"#919191",notification:"#FFFFFF",link:void 0},messageBorderColor:{user:"#CCCCCC",agent:"#CCCCCC",va:"#CCCCCC"},loaderColor:"#BBBBBB",footerBgColor:"#FAFAFA",borderRadius:5,maskVisitorMessages:!0,maskWiredMessages:!0,maskMessagePatterns:[{patternStr:"\\b((?!666|000)[0-8][0-9]{2}[-\\s]*(?!00)[0-9]{2}?[-\\s]*(?!0000)[0-9]{4})\\b",patternFlags:"gm",replaceStr:"â¢â¢â¢ â¢â¢ â¢â¢â¢â¢",name:"ssn"}],sendButtonIcon:!1,showMessageAvatar:!1,securityRestrictions:[],i18n:{locale:"auto",uiStrings:{}},prechatData:{},icons:{statusAvailable:"",statusBusy:"",statusChat:"",statusOffline:"",fileUpload:"",sendIcon:"",agentAvatar:"",vaAvatar:""},prechat:void 0,offline:{showCountdown:!0,a11yLive:!0,widgets:[{type:"text",description:"OFFLINE_DESCRIPTION",name:"offline",textAlign:"center"},{type:"hr",name:"busy-hr"},{type:"text",name:"offline-hours",description:"CHAT_HOURS",textAlign:"center"},{type:"text",name:"offline-monday-to-friday",title:"MONDAY_TO_FRIDAY",description:"MONDAY_TO_FRIDAY_TEXT",textAlign:"center"},{type:"text",name:"offline-saturdays",title:"SATURDAYS",description:"SATURDAYS_TEXT",textAlign:"center"},{type:"text",name:"offline-sundays",title:"SUNDAYS",description:"SUNDAYS_TEXT",textAlign:"center"}]},busy:{a11yLive:!0,widgets:[{type:"text",description:"BUSY_DESCRIPTION",name:"busy",textAlign:"center"},{type:"hr",name:"busy-hr"},{type:"text",name:"busy-hours",description:"CHAT_HOURS",textAlign:"center"},{type:"text",name:"busy-monday-to-friday",title:"MONDAY_TO_FRIDAY",description:"MONDAY_TO_FRIDAY_TEXT",textAlign:"center"},{type:"text",name:"busy-saturdays",title:"SATURDAYS",description:"SATURDAYS_TEXT",textAlign:"center"},{type:"text",name:"busy-sundays",title:"SUNDAYS",description:"SUNDAYS_TEXT",textAlign:"center"}]},waiting:{showWaitTime:!0,a11yLive:!0,widgets:[]},cards:[],postchatPromo:"",surveys:[],dialog:{postchat:{title:"CHAT_SURVEY_TITLE",widgets:[{type:"rating",description:"CHAT_SURVEY_CSAT",name:"csat",ratingStyle:"csat"},{type:"rating",description:"CHAT_SURVEY_NPS",name:"nps",ratingStyle:"nps",highText:"Absolutely",lowText:"No way"},{type:"textarea",name:"textarea",textareaPlaceholder:"CHAT_SURVEY_TEXT"},{type:"button",name:"cancel",label:"CHAT_ACTION_CANCEL",colspan:6,buttonType:"cancel"},{type:"button",name:"submit",label:"CHAT_SURVEY_ACTION",colspan:6,buttonType:"submit"}]},vaSurvey:{title:"CHAT_SURVEY_TITLE",widgets:[{type:"rating",description:"CHAT_SURVEY_CSAT",name:"csat",ratingStyle:"csat"},{type:"rating",description:"CHAT_SURVEY_NPS",name:"nps",ratingStyle:"nps",highText:"Absolutely",lowText:"No way"},{type:"textarea",name:"textarea",textareaPlaceholder:"CHAT_SURVEY_TEXT"},{type:"button",name:"cancel",label:"CHAT_ACTION_CANCEL",colspan:6,buttonType:"cancel"},{type:"button",name:"submit",label:"CHAT_SURVEY_ACTION",colspan:6,buttonType:"submit"}]}},supportHours:[{queue:"default",sunday:[{start:"0000",end:"2359"}],monday:[{start:"0000",end:"2359"}],tuesday:[{start:"0000",end:"2359"}],wednesday:[{start:"0000",end:"2359"}],thursday:[{start:"0000",end:"2359"}],friday:[{start:"0000",end:"2359"}],saturday:[{start:"0000",end:"2359"}],timeZoneOffset:0}],invites:[],disableBackgroundInvite:!1,appleBusinessChat:{enabled:{phone:!1,tablet:!1,desktop:!1},loadOnly:!1,scriptUrl:"https://static.cdn-apple.com/businesschat/start-chat-button/2.1.0/index.js",businessId:"",intentId:"",groupId:"",messageBody:""},googleBusinessMessages:{enabled:{phone:!1,tablet:!1},url:"",intentId:"",groupId:""},frontendsService:{baseUrl:"https://api.247-inc.net/v1/frontends",apiKey:"UYXHhmVoZK7dDHXcoHVGBSYUwumZWnhd",opts:{configuration:!1,logger:{level:400,flushTrigger:20}}},secureCardProxyConfig:{baseUrl:"https://api.247-inc.net/v1",apiKey:"9oreh76ekjhqt0D0597nEWkoAdOACMBa"},events:{ignoreList:["queueAfterHours","caCheckFail","cardInvited","cardAccepted","cardSubmitted"]},journey:{maxUrls:5,maxUrlsLength:1500,autoPush:!0},apis:{onStateChange:"onStateChange",onTrackEvent:"SN.trackEvent",getData:"SN.getData",setData:"SN.setData",forceEndInteraction:"forceEndInteraction",onCustomCardAction:"onCustomCardAction"},fileupload:{imgRes:1024,imgQuality:.5,maxFileSizeInKb:500,minOriginalFileSizeInKb:2,maxOriginalFileSizeInKb:5e4,showCancel:!0},cobrowse:{timeout:6e5}}},90:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}});
//# sourceMappingURL=widget-loader.min.js.map