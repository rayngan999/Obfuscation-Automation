(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1622:
/*!******************************************************************!*\
  !*** ../player/components/media/video/hlsJsVideo/hlsJsVideo.tsx ***!
  \******************************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ../player/components/media/Media.tsx (referenced with import()) */function(e,t,n){"use strict";n.r(t);var p=n(/*! react */366),m=n.n(p),h=n(/*! react-redux */369),c=n(/*! hls.js */847),k=n.n(c),y=n(/*! ../../video/Video */870),g=n(/*! ../../../utils/customHooks/useMux */849),E=n(/*! ../../../utils/customHooks/useStoreSelector */368),w=n(/*! ../../../../state/playback/actions */384),_=n(/*! ../../../../state/analytics/actions */402);t.default=function(){var r=Object(h.c)(),e=Object(p.useState)(!0),c=e[0],t=e[1],n=Object(E.c)("quality"),u=Object(E.c)("audioTrack"),a=Object(E.b)("preload"),o=Object(h.d)(function(e){e=e.ui.splashScreen;return"none"!==a||!e}),i=Object(h.d)(function(e){var t=e.playback.currentChapter,e=e.config.chapters;return o?e[t].sources.hls:null}),b=Object(h.d)(function(e){var t=e.playback.paused,n=e.config,e=n.firstFrame,n=n.playlistStartOpen;return"auto"!==a&&c&&(!t||e||n)}),f=Object(p.useRef)(null),l=Object(p.useRef)(),s=Object(p.useRef)(n),e=Object(p.useState)(!1),d=e[0],j=e[1],e=Object(p.useState)(!1),O=e[0],v=e[1];return Object(p.useEffect)(function(){l.current=new k.a({autoStartLoad:"auto"===a,capLevelToPlayerSize:!0,startLevel:-1,maxBufferSize:1e6});function n(){return v(!0)}function c(){var e;j(!0),l.current&&(e=l.current.audioTracks.map(function(e){return e.name}),r(Object(w.u)(e)))}return l.current.on(k.a.Events.MEDIA_ATTACHED,n),l.current.on(k.a.Events.MANIFEST_PARSED,c),l.current.attachMedia(f.current),r(Object(_.p)("hls")),function(){var e,t;j(!1),v(!1),null!==(e=l.current)&&void 0!==e&&e.off(k.a.Events.MEDIA_ATTACHED,n),null!==(e=l.current)&&void 0!==e&&e.off(k.a.Events.MANIFEST_PARSED,c);try{null!==(t=l.current)&&void 0!==t&&t.destroy()}catch(e){if(!(e instanceof TypeError&&"listener must be a function"===e.message))throw e}r(Object(_.j)())}},[r,a]),Object(p.useEffect)(function(){var e,t,n,c;O&&i&&(t=i.find(function(e){return"auto"===e.profile})||i[0],c=(n=i.map(function(e){return e.profile})).includes(s.current)?s.current:t.profile,null!==(e=l.current)&&void 0!==e&&e.loadSource(t.url),r(Object(w.v)(n)),r(Object(w.C)(c)))},[O,i,r]),Object(p.useEffect)(function(){var e;d&&l.current&&(e=null===(e=l.current)||void 0===e?void 0:e.levels.findIndex(function(e){return e.height+"p"===n}),l.current.currentLevel=e)},[d,n]),Object(p.useEffect)(function(){d&&l.current&&(l.current.audioTrack=u)},[d,u]),Object(p.useEffect)(function(){var e;b&&(null!==(e=l.current)&&void 0!==e&&e.startLoad(),t(!1))},[b]),Object(g.a)(f,l),m.a.createElement(y.a,{ref:f})}},848:
/*!***************************************************!*\
  !*** ../player/components/media/video/Video.scss ***!
  \***************************************************/
/*! no static exports found */
/*! exports used: hideCursor, hideVideo, video */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){e.exports={video:"_1l-KU",hideCursor:"_3OgU3",hideVideo:"_3-9KU"}},849:
/*!********************************************************!*\
  !*** ../player/components/utils/customHooks/useMux.ts ***!
  \********************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var i=n(/*! react */366),b=n(/*! react-redux */369),f=n(/*! ../../utils/customHooks/useStoreSelector */368),c=n(/*! mux-embed */960),l=n.n(c),c=n(/*! hls.js */847),s=n.n(c);t.a=function(t,n){var c=Object(f.a)("visitorId"),r=Object(f.b)("playerUuid"),u=Object(f.b)("accountId"),a=Object(b.d)(function(e){return e.config.chapters[e.playback.currentChapter].videoId}),o=Object(b.d)(function(e){var t=e.config,e=t.onComplete,t=t.chapterLoop;return"loop"===e||!!t});Object(i.useEffect)(function(){var e=!o&&Math.floor(100*Math.random())<=15;t.current&&(void 0===n||n.current)&&e&&l.a.monitor("."+t.current.classList[0],{debug:!1,disableCookies:!0,hlsjs:n?n.current:void 0,Hls:n?s.a:void 0,data:{env_key:"vfhbo3jsnvrutdkuee1akd0lj",player_name:"Pomo Player",player_init_time:window.__startTime,player_version:"f3e2ac653b1b27592990b8ad6d7d3568e1ec8b55",video_id:a,video_series:r,video_title:a,video_stream_type:"on-demand",viewer_user_id:c,page_type:window.location!==window.parent.location?"iframe":"watchpage",sub_property_id:u}})},[t,u,a,r,n,c,o])}},870:
/*!**************************************************************!*\
  !*** ../player/components/media/video/Video.tsx + 3 modules ***!
  \**************************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/autoplayPermission.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/customHooks/usePostRoll.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/customHooks/usePrevious.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/customHooks/useShouldRenderCaptions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/customHooks/useStoreSelector.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/utils/userBrowserChecker/UserBrowserChecker.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/state/playback/actions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/state/ui/actions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../player/state/ui/thunks.ts */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/classnames/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../player/components/media/video/Video.scss (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-redux/es/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../player/node_modules/unfetch/dist/unfetch.mjs */function(e,t,n){"use strict";var z=n(366),J=n.n(z),K=n(369),c=n(372),V=n.n(c),W=n(606),Q=n(368),X=n(401),Y=n(384),Z=n(374),$=n(670),o=n(132);function i(e){return"track-"+e.id}function ee(){var r=Object(K.d)(function(e){var t=e.playback.currentChapter;return e.config.chapters[t].captions}),u=Object(K.d)(function(e){e=e.config.userBrowser;return Object(X.d)(e)}),e=Object(z.useState)({}),t=e[0],a=e[1];return Object(z.useEffect)(function(){for(var c={},e=0,t=r;e<t.length;e++)!function(t){u?Object(o.a)(t.vttUrl,{method:"GET"}).then(function(e){return e.blob()}).then(function(e){c[i(t)]=URL.createObjectURL(e)}):c[i(t)]=t.vttUrl}(t[e]);return a(c),function(){if(u)for(var e=0,t=r;e<t.length;e++){var n=t[e];URL.revokeObjectURL(c[i(n)]),a({})}}},[r,u]),J.a.createElement(J.a.Fragment,null,r.map(function(e){return J.a.createElement("track",{id:i(e),key:e.id,kind:"captions",label:e.name,srcLang:e.language,src:t[i(e)]})}))}var b=n(668);function te(c){var r=Object(K.c)(),u=Object(Q.c)("canPlay"),a=Object(Q.c)("caption"),o=Object(b.a)();Object(z.useEffect)(function(){var e;if(u){var n=null===(e=c.current)||void 0===e?void 0:e.textTracks;if(n)for(var t=0;t<n.length;t++)!function(e){var t=n[e];o&&null!==a&&t.id===i(a)?(t.oncuechange=function(){var e=Array.from(t.activeCues);r(Object(Y.b)(e))},t.mode="hidden"):"disabled"!==t.mode&&(t.mode="disabled")}(t)}},[a,o,u,r,c])}var ne=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var c=Array(e),r=0,t=0;t<n;t++)for(var u=arguments[t],a=0,o=u.length;a<o;a++,r++)c[r]=u[a];return c};var ce=n(848),re=n(439),ue=n(507);t.a=Object(z.forwardRef)(function(t,e){var a=Object(K.c)(),n=Object(Q.b)("pauseDisabled"),c=Object(Q.b)("chapterLoop"),r=Object(Q.b)("redirectWholePage"),u=Object(Q.b)("redirectUrl"),o=Object(Q.b)("disableRedirect"),i=Object(Q.b)("onComplete"),b=Object(Q.b)("background"),f=Object(Q.b)("userBrowser"),l=Object(Q.b)("disableCtas"),s=Object(Q.b)("preload"),d=Object(Q.b)("autoplay"),j=Object(Q.c)("currentChapter"),O=Object(Q.c)("paused"),v=Object(Q.c)("mute"),p=Object(Q.c)("seekTo"),m=Object(Q.c)("seekFrom"),h=Object(Q.c)("speed"),k=Object(Q.c)("volume"),y=Object(Q.c)("canPlay"),g=Object(Q.c)("time"),E=Object(Q.d)("splashScreen"),w=Object(Q.d)("userActive"),_=Object(re.a)(),C=Object(z.useState)(!0),T=C[0],S=C[1],A=Object(K.d)(function(e){var t=e.playback.currentChapter;return e.config.chapters[t].name}),L=Object(K.d)(function(e){return e.playback.currentChapter===e.config.chapters.length-1}),C=Object(K.d)(function(e){var t=e.ui,e=t.userActive,t=t.controlsLocked;return!e&&!t}),P=Object(K.d)(function(e){var t=e.ui.playerDimensions;return e.playback.duration/t.width}),R=Object(K.d)(function(e){return!(null===(e=e.ui.eventState[null==_?void 0:_.id])||void 0===e||!e.playDisabled)}),D=Object(K.d)(function(e){return null===(e=e.ui.eventState[null==_?void 0:_.id])||void 0===e?void 0:e.dismissed}),U=Object(ue.a)(D),I=Object(z.useRef)(null),F=Object(z.useRef)(O),M=Object(z.useRef)(),x=Object(z.useRef)();Object(z.useImperativeHandle)(e,function(){return I.current});var q={start:function(){I.current&&(Math.abs(I.current.currentTime-g)>=P&&a(Object(Y.G)(I.current.currentTime)),M.current=window.requestAnimationFrame(function(){var e;return null===(e=x.current)||void 0===e?void 0:e.start()}))},stop:function(){null!=M.current&&cancelAnimationFrame(M.current),M.current=void 0}};Object(z.useEffect)(function(){x.current=q},[q]);var B=Object(z.useCallback)(function(){var e;y&&(O?null!==(e=I.current)&&void 0!==e&&e.pause():(e=null===(e=I.current)||void 0===e?void 0:e.play())instanceof Promise?e.catch(function(){!F.current&&I.current&&I.current.paused&&!I.current.muted&&2!==d?a(Object(Y.l)()):2===d&&T&&(a(Object(Y.j)()),a(Object(Z.B)()))}).finally(function(){S(!1)}):S(!1))},[y,O,d,T,a]);Object(z.useEffect)(function(){0<d&&!E&&a(Object(Y.k)())},[d,E,a]),Object(z.useEffect)(function(){B()},[B]),Object(z.useEffect)(function(){F.current=O},[O]),Object(z.useEffect)(function(){I.current&&(I.current.muted=v)},[v]),Object(z.useEffect)(function(){var e;null!==(e=I.current)&&void 0!==e&&e.paused&&!O&&v&&B()},[v,O,B]),Object(z.useEffect)(function(){y&&0<=p&&I.current&&p<=I.current.duration&&(Number.isFinite(p)&&(I.current.currentTime=p,a(Object(Y.G)(p))),a(Object(Y.q)()))},[y,p,a]),Object(z.useEffect)(function(){I.current&&(I.current.volume=k)},[k]),Object(z.useEffect)(function(){y&&I.current&&(I.current.playbackRate=h)},[y,h]),Object(z.useEffect)(function(){return function(){a(Object(Y.x)(!1))}},[a]);var G,H,N=Object(z.useCallback)(function(){if(c)return a(Object(Y.h)()),a(Object(Y.a)()),void B();if(!L)return a(Object(Y.s)(j+1)),void a(Object(Y.a)());switch(a(Object(Y.m)()),a(Object($.b)(0)),i){case"redirect_url":o?(a(Object(Z.B)()),a(Object(Z.q)(!1)),a(Object(Y.o)()),a(Object(Y.a)())):(r?window.top:window).location.replace(u);break;case"final_frame":a(Object(Y.j)()),a(Object(Z.q)(!1));break;case"loop":a(Object(Y.i)()),a(Object(Y.a)()),B();break;case"splash_screen":a(Object(Z.B)()),a(Object(Z.q)(!1)),a(Object(Y.o)()),a(Object(Y.a)())}},[c,j,a,L,i,u,r,o,B]);Object(z.useEffect)(function(){!R&&!1===U&&D&&N()},[N,R,D,U]),te(I),G=Object(Q.b)("pauseDisabled"),H=Object(Q.b)("hiddenControls"),Object(z.useEffect)(function(){if(navigator.mediaSession){var e=G||H?[]:[["play",null],["pause",null],["stop",null],["seekbackward",null],["seekforward",null],["seekto",null]];G&&(e=ne(e,[["play",function(){}],["stop",function(){}],["pause",function(){}]]));for(var t=0,n=e=H?ne(e,[["seekbackward",function(){}],["seekforward",function(){}],["seekto",function(){}]]):e;t<n.length;t++){var c=n[t],r=c[0],c=c[1];try{navigator.mediaSession.setActionHandler(r,c)}catch(e){}}}},[G,H]);e=V()(ce.video,((e={})[ce.hideCursor]=C,e[ce.hideVideo]=E,e));return J.a.createElement("video",{"aria-label":A,preload:s,crossOrigin:"anonymous",ref:I,className:e,style:{backgroundColor:b},playsInline:!0,onDurationChange:function(){I.current&&isFinite(I.current.duration)&&a(Object(Y.e)(I.current.duration))},onTimeUpdate:function(){-1===p&&I.current&&a(Object(Y.G)(I.current.currentTime))},onContextMenu:function(e){e.preventDefault()},onClick:function(){var e;(Object(X.h)(f)||Object(X.f)(f))&&Object(W.a)(),n||a((O?Object(Y.k):Object(Y.j))()),null!==(e=I.current)&&void 0!==e&&e.focus()},onEnded:function(){q.stop(),!l&&_||N()},onPause:function(){var e;n?null!==(e=I.current)&&void 0!==e&&e.play():q.stop()},onPlay:function(){O||a(Object(Y.k)()),q.start()},onCanPlayThrough:function(){a(Object(Y.w)(!1))},onCanPlay:function(){a(Object(Y.x)(!0))},onSeeked:function(){m!==p&&a(Object($.b)(g))},onProgress:function(){if(I.current)for(var e=I.current,t=e.buffered,n=e.currentTime,c=e.duration,r=0;r<t.length;r++)if(t.start(t.length-1-r)<n){var u=t.end(t.length-1-r)/c;a(Object(Y.z)(u));break}},onWaiting:function(){a(Object(Y.w)(!0))},onPlaying:function(){var e;a(Object(Y.w)(!1)),null!==(e=t.onPlaying)&&void 0!==e&&e.call(t)},onLoadedData:function(){var e;null!==I.current&&0<I.current.currentTime&&(I.current.currentTime=0,a(Object(Y.G)(0))),null!==(e=t.onLoadedData)&&void 0!==e&&e.call(t)},"data-testid":"video",tabIndex:w?-1:0},J.a.createElement(ee,null))})}}]);