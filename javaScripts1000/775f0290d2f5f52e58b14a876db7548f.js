(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{42:function(e,o,n){"use strict";n.r(o),n.d(o,"default",(function(){return m}));var i=n(12),t=n(2),u=n(1),s=n(3);function l(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function r(e,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,o,n){return o&&r(e.prototype,o),n&&r(e,n),e}function d(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}var c=new t.a("MOUSE-INPUT"),_=function(){function e(){var o=this;l(this,e),d(this,"_mouseDown",!1),d(this,"_isTouched",!1),d(this,"_isActive",!1),d(this,"_mouseIdleTimer",null),d(this,"_mouseIdleDuration",0),d(this,"mouseIdleCallback",null),d(this,"mouseActiveCallback",null),d(this,"_hideTimeoutId",null),d(this,"_onPlayerChanged",(function(){o._onMouseLeave()})),d(this,"_onFullscreenChangeRequested",(function(e){o._onMouseLeave()}));var n=this;n._onMouseLeave=n._onMouseLeave.bind(n),n._onMouseEnter=n._onMouseEnter.bind(n),n._onMouseMove=n._onMouseMove.bind(n),n._onMouseDown=n._onMouseDown.bind(n),n._onMouseUp=n._onMouseUp.bind(n),window.document.body.addEventListener("mousemove",n._onMouseMove),window.document.body.addEventListener("mousedown",n._onMouseDown,!0),window.document.body.addEventListener("mouseup",n._onMouseUp),window.PlayerView.on(s.a.UI.Event.PLAYER_CHANGED,n._onPlayerChanged),window.PlayerView.on(s.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,n._onFullscreenChangeRequested)}return a(e,[{key:"_onMouseDown",value:function(){c.debug("Mouse down"),this._mouseDown=!0,this._mouseIdleTimer&&clearInterval(this._mouseIdleTimer)}},{key:"_onMouseUp",value:function(){c.debug("Mouse up"),this._mouseDown=!1}},{key:"_onMouseLeave",value:function(){var e=this;e.isTouched||(e._mouseIdleTimer&&clearInterval(e._mouseIdleTimer),e._hideTimeoutId=setTimeout((function(){clearTimeout(e._hideTimeoutId),e._hideTimeoutId=null,e.isActive=!1}),1e3)),e._mouseDown=!1,e.isTouched=!1}},{key:"_onMouseEnter",value:function(){var e=this;e._hideTimeoutId&&(clearTimeout(e._hideTimeoutId),e._hideTimeoutId=null),e._resetIdleTimer(),e.isActive=!0}},{key:"_onMouseMove",value:function(){var e=this;e.isActive=!0,e.isTouched||e._resetIdleTimer(),e.isTouched=!1}},{key:"_resetIdleTimer",value:function(){var e=this;e._mouseIdleTimer&&clearInterval(e._mouseIdleTimer),e._mouseDown||(e._mouseIdleDuration=0,e._mouseIdleTimer=setInterval((function(){e._mouseIdleDuration+=500,e._mouseIdleDuration>=3e3&&(clearInterval(e._mouseIdleTimer),e._mouseDown=!1,e._isTouched=!1,e.isActive=!1)}),500))}},{key:"setFullscreen",value:function(e){}},{key:"isActive",get:function(){return this._isActive},set:function(e){var o=this;o._isActive=e,e?o.mouseActiveCallback():o.mouseIdleCallback()}}]),e}(),m=function(){function e(){l(this,e),d(this,"type","mouse"),d(this,"_isTouched",!1),d(this,"_mouseIdleTracker",new _);var o=this;o._mouseIdleTracker.mouseIdleCallback=o._onMouseIdle.bind(o),o._mouseIdleTracker.mouseActiveCallback=o._onMouseActive.bind(o),(new i.a).mixin(this),o._init()}return a(e,[{key:"_onMouseIdle",value:function(){this._dispatchEvent(s.a.UI.Event.MOUSE_OUT,null,window.Skin),this.isTouched=!1}},{key:"_onMouseActive",value:function(){this._dispatchEvent(s.a.UI.Event.MOUSE_OVER,null,window.Skin),this.isTouched=!1}},{key:"setFullscreen",value:function(e){this._mouseIdleTracker.setFullscreen(e)}},{key:"_init",value:function(){var e=this,o=window.PlayerState;Object(u.a)(document.body,"bolt-mouse-input"),e.setFullscreen(window.PlayerView.fullscreen),o.on(o.STATE_CHANGED,(function(){o.state===o.PLAYING&&(e._mouseIdleTracker.isActive||window.PlayerView.currentPlayer.isAd()||e._mouseIdleTracker._resetIdleTimer())}))}},{key:"isTouched",get:function(){return this._isTouched},set:function(e){this._isTouched=e,this._mouseIdleTracker.isTouched=e,e?Object(u.a)(document.body,"bolt-touch-input"):Object(u.d)(document.body,"bolt-touch-input")}}]),e}()}}]);