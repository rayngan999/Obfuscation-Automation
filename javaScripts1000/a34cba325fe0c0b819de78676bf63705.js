define(["modules/id.core"],function(e){"use strict";e.utils.log("loading id.cookie.js");var t=function(){this.conf={};var e=this,t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isPlainObj:function(e){return!!e&&"[object Object]"===Object.prototype.toString.call(e)},toArray:function(e){return Array.prototype.slice.call(e)},getKeys:Object.keys||function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},retrieve:function(e,t){return void 0===e?t:e}};this.set=function(n,o,i){i=i||{};var s,r,a=location&&location.host&&"."+location.host.split(".").slice(-2).join("."),d=i.expires||"",l=typeof d,c=a?";path=/":"",u=a?";domain="+a:"",m=i.secure?";secure":"";if(c=i.path?";path="+i.path:c,u=i.domain?";domain="+i.domain:u,t.isPlainObj(n))for(s in n)n.hasOwnProperty(s)&&e.set(s,n[s]);else"string"===l&&""!==d?d=";expires="+d:"number"===l?(r=new Date,r.setTime(r.getTime()+864e5*d),d=";expires="+r.toGMTString()):d.hasOwnProperty("toGMTString")&&(d=";expires="+d.toGMTString()),document.cookie=window.escape(n)+"="+window.escape(o)+d+c+u+m;return this},this.remove=function(n,o,i,s){var r,a,d;for(d=t.isArray(n)?n:t.toArray(arguments),r=0,a=d.length;a>r;r+=1)e.set(d[r],"",{expires:-1,path:o,domain:i,secure:s});return this},this.empty=function(n,o,i){return e.remove(t.getKeys(e.all()),n,o,i)},this.get=function(n,o){o=o||void 0;var i,s,r,a=e.all(),d={};if(t.isArray(n))for(i=0,s=n.length;s>i;i+=1)r=n[i],d[r]=t.retrieve(a[r],o);else d=t.retrieve(a[n],o);return d},this.all=function(){if(""===document.cookie)return{};var e,t,n,o=document.cookie.split("; "),i={};for(e=0,t=o.length;t>e;e+=1)n=o[e].split("="),i[window.unescape(n[0])]=window.unescape(n[1]);return i},this.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===e.set("_","_").get("_");return e.remove("_"),t}};return t});