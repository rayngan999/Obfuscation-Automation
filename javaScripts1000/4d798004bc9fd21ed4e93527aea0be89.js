!function(){"use strict";var e=/^http(.*)$/;function t(t){var r=t;e.test(r)||(r=location.protocol+r);var o=new URL(r),n=o.pathname.split("/").slice(-1)[0];return"".concat(o.host,":").concat(n)}function r(e){return new Promise(((t,r)=>setTimeout(r,e)))}function o(e,t){return e[Element.prototype.matches?"matches":"msMatchesSelector"](t)}var n="script[src]";function i(e){var t={childList:!0},r=new MutationObserver(s.bind(null,e));r.observe(document.head,t),r.observe(document.body,t)}function s(e,r){r.forEach((r=>{Array.from(r.addedNodes).forEach((r=>{if(1===r.nodeType&&o(r,n)){var i=t(r.src);e.add(i)}})),Array.from(r.removedNodes).forEach((r=>{if(1===r.nodeType&&o(r,n)){var i=t(r.src);e.delete(i)}}))}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof e||Array.isArray(e))return null;var t=Object.getPrototypeOf(e);return Object.getOwnPropertyNames(t).sort().join(":")}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u{constructor(e){if(a(this,"requestQueue",new Map),a(this,"loadedScripts",new Set),a(this,"version","1.0.1"),a(this,"cmd",[]),c(e)===c(this))return e;Array.from(document.scripts).forEach((e=>{if(o(e,"script[src]")){var r=t(e.src);this.loadedScripts.add(r)}})),i(this.loadedScripts),this.cmd=e&&e.cmd||[],this.cmd.push=e=>{"function"==typeof e&&e()}}isLoaded(e){var r=t(e);return this.loadedScripts.has(r)&&!this.requestQueue.has(r)}isRequested(e){var r=t(e);return this.requestQueue.has(r)}inject(e){var{timeout:o,ordered:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t(e);return this.isRequested(e)?this.requestQueue.get(i):this.isLoaded(e)?Promise.resolve(e):(this.requestQueue.set(i,u.injectScript(e,document.head,n).then((e=>(this.requestQueue.delete(i),e)))),o?Promise.race([r(o),this.requestQueue.get(i)]).catch((()=>{throw this.requestQueue.delete(i),this.loadedScripts.delete(i),new Error('ScriptInjector: Timed out loading "'.concat(e,'" after ').concat(o," ms"))})):this.requestQueue.get(i))}_flushQueue(){if(Array.isArray(this.cmd))for(;this.cmd.length;){var e=this.cmd.pop();"function"==typeof e&&e()}}static injectScript(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=document.createElement("script");return o.src=e,o.async=!r,new Promise(((r,n)=>{void 0!==o.onreadystatechange?o.onreadystatechange=function(){"loaded"===this.readyState&&(o.onreadystatechange=null,o=null,r(e))}:o.onload=o.onerror=function(i){if("error"===i.type)return n('ScriptInjector: Error loading script "'.concat(e,'"')),t.removeChild(o),o.onload=null,o.onerror=null,void(o=null);o.onload=null,o.onerror=null,o=null,r(e)},t.appendChild(o)}))}}var d=u;window.Spritz=new d(window.Spritz),window.Spritz._flushQueue()}();