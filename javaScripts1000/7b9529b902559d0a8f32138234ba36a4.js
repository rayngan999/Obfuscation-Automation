Cube("datav:/npm/bcore/0.0.22/event",["datav:/npm/bcore/0.0.22/class"],function(a,b,c){function d(){}var e=c("datav:/npm/bcore/0.0.22/class"),f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};d=e.extend(d),a.exports=d,b.EventEmitter=d;return d.prototype.setMaxListeners=function(a){this._events||(this._events={}),this._maxListeners=a},d.prototype.emit=function(){var a=arguments[0];if("error"===a&&(!this._events||!this._events.error||f(this._events.error)&&!this._events.error.length)){if(arguments[1]instanceof Error)throw arguments[1];else throw new Error("Uncaught, unspecified 'error' event.");return!1}if(!this._events)return!1;var b=this._events[a];if(!b)return!1;if("function"==typeof b){switch(arguments.length){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:for(var c=arguments.length,d=Array(c-1),e=1;e<c;e++)d[e-1]=arguments[e];b.apply(this,d);}return!0}if(f(b)){for(var c=arguments.length,d=Array(c-1),e=1;e<c;e++)d[e-1]=arguments[e];for(var g=b.slice(),e=0,c=g.length;e<c;e++)g[e].apply(this,d);return!0}return!1},d.prototype.addListener=function(a,b){if("function"!==typeof b)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",a,b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var c;c=void 0===this._maxListeners?20:this._maxListeners,c&&0<c&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("Possible mem-leak detected. event["+a+"] %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){d.removeListener(a,c),b.apply(this,arguments)}if("function"!==typeof b)throw new Error(".once only takes instances of Function");var d=this;return c.listener=b,d.on(a,c),this},d.prototype.removeListener=function(a,b){if("function"!==typeof b)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[a])return this;var c=this._events[a];if(f(c)){for(var d=-1,e=0,g=c.length;e<g;e++)if(c[e]===b||c[e].listener&&c[e].listener===b){d=e;break}if(0>d)return this;c.splice(d,1),0==c.length&&delete this._events[a]}else(c===b||c.listener&&c.listener===b)&&delete this._events[a];return this},d.prototype.removeAllListeners=function(a){return 0===arguments.length?(this._events={},this):(a&&this._events&&this._events[a]&&(this._events[a]=null),this)},d.prototype.listeners=function(a){return this._events||(this._events={}),this._events[a]||(this._events[a]=[]),f(this._events[a])||(this._events[a]=[this._events[a]]),this._events[a]},d.prototype.off=d.prototype.removeAllListeners,d.prototype.on=d.prototype.addListener,d.prototype.fire=d.prototype.fireEvent=d.prototype.emit,d.prototype.clearAllEventListeners=d.prototype.removeAllListeners,a.exports});