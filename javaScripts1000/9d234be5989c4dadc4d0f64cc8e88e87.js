(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"2uLe":function(e,t,a){"use strict";var n=a("mj2O"),c=a.n(n),r=a("7SM1"),i=a("VkHq"),o=a("Hvhg"),s=a("ERkP"),u=a("uDfI"),l=a("vTYT"),f=a("7oto");t.a=function useSetPreviewHeight(){var e=Object(s.useRef)(null),t=Object(u.c)(function(e){return!!e.conversations.activeConversation}),a=Object(u.c)(o.b).showBranding,n=void 0!==a&&a,b=Object(i.a)().noPolicy,d=Object(u.c)(function(e){return e.session.gdpr}),O=d.hasConsent,j=d.declinedConsent,v=Object(s.useCallback)(function(){var e=0,t=!n&&b;return j&&(e+=40),t&&(e+=18),O||(e+=t?14:7),e},[j,O,b,n]),h=Object(s.useCallback)(function(){return e.current?e.current.clientHeight:200},[e]),m=Object(s.useCallback)(function(){var e=Object(r.a)(c.a.mark(function _callee(e){var a,n,r,i,o=arguments;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(a=o.length>1&&void 0!==o[1]&&o[1],!t||!O){c.next=3;break}return c.abrupt("return");case 3:if(n=v(),r=h(),"205px"!==(i=e?"".concat(r+155-n,"px"):"0px")){c.next=8;break}return c.abrupt("return");case 8:Object(f.a)({topic:"set-frame-height",message:{height:i,name:l.c.CHAT,transition:!0,transitionHeight:a}});case 9:case"end":return c.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[t,O,v,h]),p=Object(s.useCallback)(Object(r.a)(c.a.mark(function _callee2(){var e;return c.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:e=h(),Object(f.a)({topic:"set-frame-height",message:{height:"".concat(e+80,"px"),name:l.c.SLIDER,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee2)})),[h]),g=Object(s.useCallback)(Object(r.a)(c.a.mark(function _callee3(){var e;return c.a.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:e=h(),Object(f.a)({topic:"set-frame-height",message:{height:"".concat(e+35,"px"),name:l.c.EMAIL_CAPTURE,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee3)})),[h]);return{previewRef:e,setChatHeight:m,setSliderHeight:p,setEmailCaptureHeight:g}}},G5CQ:function(e,t,a){},Gxm1:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return s});var n=a("QtlZ"),c=a("LVcX"),r=a("0lfv"),i=a("CYoe"),o=function markTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n.a.dispatch(Object(i.c)(e,t))},s=function measureTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),a=Object(c.a)(null,["metrics","timeByName",e],n.a.getState());return a?(n.a.dispatch(Object(i.a)(e)),t-a):(Object(r.n)({type:"warn",data:['Tried to measure "'.concat(e,'" without mark')]}),null)}},SrLZ:function(e,t,a){"use strict";a.r(t);var n=a("mj2O"),c=a.n(n),r=a("7SM1"),i=a("s8DI"),o=a("nJ3u"),s=a("OE2q"),u=a("O94r"),l=a.n(u),f=a("Rqwx"),b=a("fTFZ"),d=a("vkRn"),O=a("CwrG"),j=a("HXmn"),v=a("8eKL"),h=a("slYP"),m=a("BY8A"),p=a("+/Je"),g=a("Y0wo"),w=a("fw6E"),E=a("1b8i"),C=a("gRD2"),_=a("fpJs"),k=a("6wvX"),y=a("z24s"),T=a("Sn8X"),S=a("fJrp"),A=a("VkHq"),H=a("lE29"),L=a("swFs"),x=a("+Kbs"),N=a("nQD+"),R=a("sxX9"),I=a("2uLe"),M=a("g6eD"),B=a("2XY6"),D=a("ERkP"),P=a.n(D),V=a("uDfI"),F=(a("SwvN"),function HeaderLayout(e){var t=e.chatHidden,a=e.isConversationHistoryOpen,n=void 0!==a&&a,c=e.isChatTakeover,r=void 0!==c&&c,o=Object(V.b)(),s=Object(H.a)(),u=s.backgroundStyles,f=s.conversationHeaderTextStyles,b=Object(V.c)(function(e){return e.session.gdpr}).hasConsent,d=Object(k.a)(),O=Object(I.a)(),j=O.setChatHeight,v=O.previewRef,h=Object(V.c)(function(e){return e.view}).chatOpen,m=Object(D.useState)(Object(V.c)(B.a)),p=Object(i.a)(m,2),g=p[0],w=p[1],E=Object(S.a)(g),C=g!==E;Object(D.useLayoutEffect)(function(){h&&!t&&j(h,C)},[h,t,j,C]);var _=Object(V.c)(B.a);Object(D.useEffect)(function(){_!==g&&w(_)},[_,g]);var y=R.a[g],T=g!==R.b.CONVERSATION,A=d&&!r&&!n;return P.a.createElement("header",{className:l()("drift-widget-header",{"drift-widget-header--collapsed":T,"drift-widget-header--gdpr-consent":!b})},P.a.createElement(L.a,{style:u}),P.a.createElement("div",{className:"drift-widget-header--content"},P.a.createElement(y,{previewRef:v,resetChatHeight:function resetChatHeight(){j(h,!0)}})),A&&P.a.createElement(N.a,{onClick:function doToggleChat(){o(Object(M.e)({chatOpen:!1}))},className:"drift-widget-mobile-close","aria-label":"Close Drift Widget messenger",style:f},P.a.createElement(x.j,{width:16,height:16})))}),X=a("vjCh"),Y=a("qixE"),G=a("K7i0"),U=a("bYXQ"),J=a("Hvhg"),Q=a("da4L"),$=a("Gxm1"),q=a("LVcX"),K=a("TbSn"),W=a("kNJ0"),Z=a("oPI6"),z=a("MFhO"),ee=a("6lNa"),te=a("0lfv"),ae=a("VpmR"),ne=a("7oto"),ce=a("4c+F"),re=a("HSQL"),ie=(a("sXTY"),null),oe=function ChatLayout(){var e=Object(V.b)(),t=Object(k.a)(),a=Object(D.useState)(!0),n=Object(i.a)(a,2),u=n[0],f=n[1],L=Object(D.useRef)();Object(T.a)();var x=Object(y.a)(L),N=Object(V.c)(function(e){return e.view}),R=N.chatOpen,I=N.isChatTakeover,M=Object(V.c)(J.b).showBranding,B=void 0!==M&&M,Z=Object(A.a)().noPolicy,ae=!B&&Z;Object(D.useLayoutEffect)(function(){I&&R&&Object(ne.a)({topic:"set-frame-width-and-height",message:{className:g.a,height:"100%",max:!0,name:"chat",width:"100%"}})},[I,R]);var oe=Object(V.c)(function(e){return e.conversations.activeConversation}),se=Object(C.a)().fetchMessages,ue=Object(S.a)(oe),le=Object(V.c)(function(e){return e.conversations.conversations}),fe=Object(V.c)(function(e){return e.conversations.messages}),be=Object(V.c)(function(e){return Object(q.a)({},["conversations","messages",e.conversations.activeConversation],e)}),de=Object(V.c)(function(e){return Object(q.a)(!1,["conversations","conversationStatus",e.conversations.activeConversation,"permaclosed"],e)}),Oe=Object(D.useMemo)(function(){return Object(Q.p)(be)},[be]),je=Object(V.c)(function(e){return e.campaigns.activeCampaign}),ve=Object(D.useMemo)(function(){return Object(q.a)(null,["attributes","campaignDisplayType"],je)===z.a.WELCOME_MESSAGE},[je]),he=Object(V.c)(function(e){return e.session.gdpr}).hasConsent,me=Object(V.c)(function(e){return Object(q.a)(!1,["conversations","conversationStatus",oe,"endUserResponded"],e)}),pe=Object(w.a)(),ge=pe.conversationHistoryOpen,we=pe.conversationHistoryEnabled,Ee=Object(H.a)(),Ce=Ee.activeColor,_e=Ee.widgetBackgroundStyles;Object(D.useEffect)(function(){(function(){var t=Object(r.a)(c.a.mark(function _callee(){var t,a,n,r,i;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(t=!oe||oe===p.a,a=ue===oe,n=!!le[oe]&&!!fe[oe],!(t||a||n||Object(U.c)(oe))){c.next=5;break}return c.abrupt("return");case 5:return c.prev=5,c.next=8,Object(s.h)(oe);case 8:r=c.sent,i=r.data,e(Object(G.h)({conversation:i})),se({}),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(5),Object(te.f)("Failed to fetch messages or active conversation",c.t0);case 17:case"end":return c.stop()}},_callee,null,[[5,14]])}));return function fetchInfoForActiveConversation(){return t.apply(this,arguments)}})()()},[oe,e,se,ue,le,fe]),Object(D.useEffect)(function(){R?(function(){var e=Object(r.a)(c.a.mark(function _callee2(){return c.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.a)({topic:"focus-frame",message:{name:"chat"}});case 2:case"end":return e.stop()}},_callee2)}));return function focus(){return e.apply(this,arguments)}}()(),ie&&clearTimeout(ie),f(!1)):ie=setTimeout(function delaySetReflowHidden(){f(!0)},350)},[R]);var ke=Object(D.useMemo)(function(){if(!he||!R)return!1;if(je&&je.id&&!oe){var e=!!Object(q.a)(null,["attributes","cta"],je),t="CHAT_RESPONSE"!==Object(q.a)(null,["attributes","cta","CtaType"],je);if(e&&t)return!1}var a=Oe.length>0&&Oe.length<=2&&!Object(Q.f)(Oe[0]);return!I||a||Oe.length>2},[je,oe,he,I,Oe,R]);Object(D.useEffect)(function(){Object(re.b)("WIDGET_CHAT_FRAME.start")},[]);var ye=Object(D.useRef)(!1);Object(D.useEffect)(function(){if(!ye.current&&I&&Oe.length>0){var e=Object($.b)("post_form_takeover_tti"),t=Object($.b)("post_form_takeover_show");e&&Object(ce.d)("Post Form Takeover TTI",e),t&&Object(ce.d)("Post Form Takeover Show",t),ye.current=!0}},[I,Oe]);var Te=Object(D.useMemo)(function(){if(de)return b.a.UNAVAILABLE;var e=Object(K.a)(Oe);if(!e)return b.a.AVAILABLE;var t=Object(W.a)(-2,Oe),a=Object(Q.f)(t)&&Object(Q.h)(e);return Object(Q.f)(e)||a||Object(Q.i)(e)?b.a.UNAVAILABLE_BUTTONS:Object(Q.m)(e)||Object(Q.m)(t)&&Object(Q.h)(e)?b.a.AVAILABLE_BUTTONS:b.a.AVAILABLE},[Oe,de]),Se=Te===b.a.AVAILABLE||Te===b.a.AVAILABLE_BUTTONS,Ae=Object(E.a)(Oe,oe),He=Object(D.useMemo)(function(){return Object(Q.d)(Ae)},[Ae]),Le=Object(D.useMemo)(function(){return P.a.createElement(v.a,{messageGroups:He,messages:Ae,reflowHidden:u,disabled:ge})},[He,Ae,u,ge]),xe=Object(_.a)(),Ne=Object(D.useMemo)(function(){if(Ae&&Ae.length){var e=Object(K.a)(Ae);if(e&&Object(Q.j)(e))return e}return null},[Ae]),Re=he&&(!!oe||I),Ie=!ke||!Se;return P.a.createElement("main",{className:l()("drift-widget-chat-layout",{"drift-widget-chat-layout__takeover":I&&!t,"drift-widget-chat-layout__takeover--noResponse":I&&!t&&!me}),role:"main","aria-live":"polite"},P.a.createElement("style",null,"\n          .drift-widget-chat-wrapper.keyboard-focused {\n            ".concat(Object(o.c)(Ce,!1),"\n          }\n        ")),P.a.createElement(m.a,null),P.a.createElement("div",{className:l()("drift-widget-chat-wrapper",{"drift-widget-chat-wrapper__open":R,"drift-widget-chat-wrapper__closed":!R,"drift-widget-chat-wrapper__reflow-hidden":u,"drift-widget-chat-wrapper__active-conversation":Re,"drift-widget-chat-wrapper__no-footer-content":ae&&Ie,"keyboard-focused":x}),ref:L,tabIndex:0},P.a.createElement(F,{isConversationHistoryOpen:ge,chatHidden:u,isChatTakeover:I}),!I&&we&&P.a.createElement(d.a,null),Re&&P.a.createElement("div",{className:l()("drift-widget-message-history",{"drift-widget-message-history--with-footer":xe,"drift-widget-message-history--no-composer":Ie}),style:_e},Le,0===Oe.length&&P.a.createElement(j.a,null)),P.a.createElement("div",{className:"drift-widget-chat-bottom"},ke&&P.a.createElement(b.b,{state:Te,disabled:ge,onSubmit:function doSendMessage(t){if((ve||I)&&!oe){var a=Object(q.a)(null,["attributes","playbookId"],je);!function sendSubmittedEventForChatResponseCampaign(){je&&"CHAT_RESPONSE"===Object(q.a)(null,["attributes","cta","CtaType"],je)&&Object(Y.a)(ee.b.SUBMITTED)}(),Object(X.l)(je.id,a)}e(Object(G.m)(t))},chatHidden:u,activeConversationId:oe}),!ge&&P.a.createElement(O.a,null)),oe&&!!Ne&&P.a.createElement(h.a,{message:Ne})))};t.default=function(e){var t=Object(D.useState)(!1),a=Object(i.a)(t,2),n=a[0],o=a[1],s=Object(V.c)(function(e){return e.view.initComplete}),u=Object(V.c)(function(e){return Object(q.a)("en",["embed","configuration","locale"],e)});return Object(D.useEffect)(function(){s&&!n&&function(){var e=Object(r.a)(c.a.mark(function _callee3(){return c.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ae.b)(u);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(te.n)({data:["i18n failed to load - ".concat(e.t0.message),e.t0],type:"warn"});case 8:o(!0);case 9:case"end":return e.stop()}},_callee3,null,[[0,5]])}));return function runAsync(){return e.apply(this,arguments)}}()()},[s,n,u]),P.a.createElement(Z.a,null,s&&n?P.a.createElement(oe,e):P.a.createElement(f.a,null))}},SwvN:function(e,t,a){},sXTY:function(e,t,a){},swFs:function(e,t,a){"use strict";var n=a("ERkP"),c=a.n(n);a("G5CQ");t.a=function TopLine(e){var t=e.style;return c.a.createElement("div",{className:"drift-widget-header-top-line",style:t})}}}]);