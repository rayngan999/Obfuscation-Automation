KCMS.registerNamespace("KCMS.Shop"),KCMS.Shop=function(){var e="2",t="Requested",o="Verified",i=".";function a(e){return e.toFixed(2).replace(".",i)}function n(e){var t=e.split(i);return t[1]="<span>"+i+t[1]+"</span>",t[0]+t[1]}function s(){$(".top-summary-errors .summary-content").height()>25?$(".top-summary-errors .summary-content").css({"text-align":"left"}):$(".top-summary-errors .summary-content").css({"text-align":"center"})}function l(){var e=$("#formCheckout"),t=0;($("#BillAttentionFirstName",e).val()!=$("#ShipAttentionFirstName",e).val()||$("#BillAttentionLastName",e).val()!=$("#ShipAttentionLastName",e).val()||$("#BillAttentionCompany",e).val()!=$("#ShipAttentionCompany",e).val()||$("#BillAddress1",e).val()!=$("#ShipAddress1",e).val()||$("#BillAddress2",e).val()!=$("#ShipAddress2",e).val()||$("#BillAddress3",e).val()!=$("#ShipAddress3",e).val()||$("#BillCity",e).val()!=$("#ShipCity",e).val()||$("#BillState",e).val()!=$("#ShipState",e).val()||$("#BillZip",e).val()!=$("#ShipZip",e).val()||$("#BillCountry",e).val()!=$("#ShipCountry",e).val()||$("#BillPhone",e).val()!=$("#ShipPhone",e).val())&&(t=1),0==t?($("#SameAsShippingAddress",e).prop("checked",!0),$("#billingaddress-panel").addClass("hidden")):($("#SameAsShippingAddress",e).prop("checked",!1),$("#billingaddress-panel").removeClass("hidden"))}function r(e){var t=$("#formCheckout");$("#PaymentGateway",t).val();if(t.submit(),e){var o=t.valid();if($(".discountcode").closest(".f-input").hasClass("f-input--invalid")&&(o=!1),KCMS.Shop.showBillingAddressValidateResult(),o){if("USRegion"==KCMS.Shop.options.ShopRegion)if(KCMS.Shop.validateCityStateZip(KCMS.Shop.options.CheckCityStateZipUrl))return void KCMS.Shop.togglePlaceHolder(!0);$(".validation-summary-errors").hide(),$this.addClass("processing"),$(".place-order-text",$this).css({visibility:"hidden"});KCMS.Forms.OnSubmit(t,(function(){var e=t.serializeArray(),o=$("#formCheckout").attr("action");$.post(o,e).done((function(e){null!=e&&("0"!=e.ErrorCode?(KCMS.Shop.showErrorMessage(e.ErrorMessage),$this.removeClass("processing"),$(".place-order-text",$this).css({visibility:"visible"}),$(document).trigger("sync-basket"),KCMS.Forms.RevertToPlainCaptcha(t,e&&e.useplain,e.erroroncaptcha?e.ErrorMessage:"")):($this.addClass("complete"),u&&u.products.removeAll(),window.location.href=e.Data))})).fail((function(){KCMS.Shop.togglePlaceHolder(!0),$this.removeClass("processing"),$(".place-order-text",$this).css({visibility:"visible"})}))}))}else KCMS.Shop.togglePlaceHolder(!0)}else KCMS.Shop.togglePlaceHolder(!0)}function p(e,t){var o=0,i=e.toString(),a=t.toString();try{o+=i.split(".")[1].length}catch(e){}try{o+=a.split(".")[1].length}catch(e){}return Number(i.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,o)}function c(e,t){var o,i,a;try{o=e.toString().split(".")[1].length}catch(e){o=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}return(e*(a=Math.pow(10,Math.max(o,i)))+t*a)/a}var d=function(e){function t(e){i=e.DecimalPoint,e.quantityChange=function(){if(l&&!l.ajaxLoading){var t=parseInt(this.Quantity());(!t||t<1)&&(t=1,this.Quantity(t)),this.Qty=t,t>=1&&(l.ajaxLoading=!0,KCMS.Shop.toggleSpinner(!0),$.post(l.UpdateQuantityUrl,{partNumber:e.PartNo,quantity:t,SessionID:0===$("#SessionID").size()?null:$("#SessionID").val(),promoCode:$("#PromoCode").val()},(function(t){l.ajaxLoading=!1,e.message(null),t.HasViolation?(e.message(t.ErrorMessage),e.Quantity(t.Result.Qty),e.Qty=t.Result.Qty,clearTimeout(e.ErrorMessageTimeOut),e.ErrorMessageTimeOut=setTimeout((function(){e.message(null)}),3e3)):"USRegion"!=KCMS.Shop.options.ShopRegion&&$("#formCheckout #ShipMethod").data("nullable",!0),l.updateInfo(),KCMS.Shop.toggleSpinner(!1)})))}},e.Quantity=ko.observable(e.Qty),e.RegularPrice=ko.observable(e.FormatedRegPrice),e.RegSubtotal=ko.observable(e.FormatedRegTotal),e.Subtotal=ko.observable(n(e.FormatedTotal)),e.adding=ko.observable(!1),e.deleting=ko.observable(!1),e.promoPrice=ko.observable(n(e.FormatedPrice)),e.priceWithTax=ko.observable(n(e.FormatedPriceWithTax)),e.message=ko.observable(e.ErrorMessage),e.IsDisplaySaving=ko.observable(e.DisplaySaving),e.IsOutOfStock=ko.observable(e.IsOutOfStock)}for(var o=0;o<e.length;o++)t(e[o]);var s=null,l=this;this.ready=ko.observable(!1),this.currencySymbol=ko.observable(0),this.count=ko.observable(0),this.total=ko.observable(0),this.itemsTotal=ko.observable(0),this.origTotal=ko.observable(0),this.saving=ko.observable(0),this.shipping=ko.observable(0),this.shippingTotal=ko.observable(0),this.tax=ko.observable(0),this.ukTax=ko.observable(1),this.ukTaxDecimal=ko.observable(1),this.grandTotal=ko.observable(0),this.grandTotalExclVAT=ko.observable(0),this.products=ko.observableArray(e),this.isApplePayAvalible=ko.observable(!1),this.isBasketPromoEnable=ko.observable(!1),this.ajaxLoading=!1,this.message=ko.observable(null),this.currentUser=ko.observable(null),this.promoCode=ko.observable(null),this.checkOutUrl=ko.observable(null),this.showMessage=function(e){this.message(e),clearTimeout(this.sto),this.sto=setTimeout((function(){l.message(null)}),2e3)},this.updateInfo=function(){for(var t=0,o=0,i=0;i<e.length;i++)e[i].Quantity(e[i].Qty),o+=e[i].Qty,e[i].Total=p(e[i].Qty,e[i].Price),e[i].Subtotal(n(a(e[i].Total))),e[i].RegSubtotal(a(p(e[i].Qty,e[i].RegPrice))),t=c(t,e[i].Total);l.count(o),l.total(a(t)),null==s&&(s=$(".section-checkout").length>0),s&&KCMS.Shop.showPaymentInfo(l)},this.removeItem=function(e){var t=this;KCMS.Shop.toggleSpinner(!0),$.post(this.DeleteUrl,{partNumber:e.PartNo,SessionID:0===$("#SessionID").size()?null:$("#SessionID").val()},(function(o){o.ErrorMessage?alert(o.ErrorMessage):(e.deleting(!0),setTimeout((function(){"USRegion"!=KCMS.Shop.options.ShopRegion&&$("#formCheckout #ShipMethod").data("nullable",!0),t.products.remove(e),t.updateInfo(),KCMS.Shop.toggleSpinner(!1)}),500))}))}.bind(this),this.reduce=function(e){if(!this.ajaxLoading){var t=this;e.Qty>1&&(this.ajaxLoading=!0,KCMS.Shop.toggleSpinner(!0),$.post(this.UpdateQuantityUrl,{partNumber:e.PartNo,quantity:e.Qty-1,SessionID:0===$("#SessionID").size()?null:$("#SessionID").val(),promoCode:$("#PromoCode").val(),checkinventory:t.CheckInventory},(function(o){t.ajaxLoading=!1,e.Qty=o.Result.Qty,e.Quantity(e.Qty);var i=null!=e.message();o.HasViolation?(e.message(o.ErrorMessage),clearTimeout(e.ErrorMessageTimeOut),e.ErrorMessageTimeOut=setTimeout((function(){e.message(null)}),3e3)):(e.message(null),"USRegion"!=KCMS.Shop.options.ShopRegion&&$("#formCheckout #ShipMethod").data("nullable",!0),e.Price=o.Result.Price,i?$(document).trigger("sync-basket"):t.updateInfo()),KCMS.Shop.toggleSpinner(!1)})))}}.bind(this),this.add=function(e){if(!this.ajaxLoading){this.ajaxLoading=!0;var t=this;KCMS.Shop.toggleSpinner(!0),$.post(this.UpdateQuantityUrl,{partNumber:e.PartNo,quantity:e.IsOutOfStock()?e.Qty:e.Qty+1,SessionID:0===$("#SessionID").size()?null:$("#SessionID").val(),promoCode:$("#PromoCode").val(),checkinventory:t.CheckInventory},(function(o){t.ajaxLoading=!1,e.Qty=o.Result.Qty,e.Quantity(e.Qty),o.HasViolation?(e.message(o.ErrorMessage),clearTimeout(e.ErrorMessageTimeOut),e.ErrorMessageTimeOut=setTimeout((function(){e.message(null)}),3e3)):(e.message(null),"USRegion"!=KCMS.Shop.options.ShopRegion&&$("#formCheckout #ShipMethod").data("nullable",!0),e.Price=o.Result.Price,t.updateInfo()),KCMS.Shop.toggleSpinner(!1)}))}}.bind(this),this.continueShopping=function(){window.location.href=KCMS.Shop.options.ContinueShoppingUrl}.bind(this),this.showApplePay=function(){this.isApplePayAvalible(!0),this.isBasketPromoEnable(!0)},this.addToCart=function(o){for(var i=!1,a=0;a<e.length;a++)if(e[a].PartNo==o.PartNo){e[a].Qty+=1,i=!0;break}i||(t(o),o.adding(!0),setTimeout((function(){o.adding(!1)}),500),this.products.splice(0,0,o)),this.updateInfo()}.bind(this),this.tryAddNew=function(o){for(var i=!1,n=0;n<e.length;n++)if(e[n].PartNo==o.PartNo){i=!0;break}if(!i){t(o),this.products.splice(0,0,o);var s=0,r=0;for(n=0;n<e.length;n++)e[n].Quantity(e[n].Qty),r+=e[n].Qty,e[n].Subtotal(e[n].FormatedTotal),e[n].RegSubtotal(a(p(e[n].Qty,e[n].RegPrice))),s=c(s,e[n].Total);l.count(r),l.total(a(s))}}.bind(this),this.resetBasket=function(e){this.products.removeAll();for(var o=0;o<e.length;o++)t(e[o]),this.products.push(e[o]);this.updateInfo()}.bind(this)},u=null,h=!1;return{init:function(e){if(KCMS.Shop.options=$.extend({validPromoCode:"",promoValidateMessage:"",ContinueShoppingUrl:"/",CheckCityStateZipUrl:"/"},e||{}),e.StripePublishableKey){var i=KCMS.Stripe.init(e.StripePublishableKey);if(i){var a=i.Card,n=i.Stripe;KCMS.Shop.options.card=a,KCMS.Shop.options.stripe=n}}s(),l(),$("#RecieveEmailBox").on("click",(function(){$(this).prop("checked")?$("#RecieveEmail").val(!0):$("#RecieveEmail").val(!1)})),$("#SameAsShippingAddress").on("click",(function(){var e=$("#billingaddress-panel");$(this).prop("checked")?e.addClass("hidden"):(e.removeClass("hidden"),$("input,textarea,select",e).each((function(e){$("#formCheckout").validate().element($(this))})))})),$(".signin-toggle").each((function(){$(this).click((function(){$(".signin-container").toggleClass("active"),$(".grey-overlay").toggleClass("active")}))})),$("#signin-true").on("click",(function(){var i=$("#formSignin"),a=i.valid();if($(".validation-summary-errors",i).hide(),KCMS.Forms.ScrollToFirstInvalidField(i),a){KCMS.Forms.OnSubmit(i,(function(){var a=$(".captchaId",i).prop("id"),n={email:$("#signin_email").val(),password:$("#password").val(),isCheckout:!0,__RequestVerificationToken:$("input[name=__RequestVerificationToken]",i).val(),"g-recaptcha-response":$("#g-recaptcha-response",i).val(),CaptchaInputText:$("[name='CaptchaInputText']",i).val(),CaptchaDeText:$("[name='CaptchaDeText']",i).val()};n[a]=$(".captchaId",i).val(),$.post(e.signin,n,(function(a){if(a.succeed){if(KCMS.EventBus.publish("OnCustomerSigin",{customerId:a.data.CustomerID}),window.location.search.indexOf("sid=")<0){if(a.confirmMergeBasket){var n=confirm(a.merrgeMsg);$.ajax({url:e.MergeBasketUrl,data:{ShopSessionID:a.previous,keepOld:n,isCheckOut:$(".section-checkout").length>0},type:"post",async:!1,success:function(e){if(e.ItemErrorMessage){var t=[];for(var o in e.ItemErrorMessage)if(e.ItemErrorMessage[o]){t.push(e.ItemErrorMessage[o]);break}if(t.length>0){var i=$(".validation-summary-errors.top-summary-errors").show();$(".summary-content",i).html(t.join("<br/>")),setTimeout((function(){$(".summary-content",i).html(""),i.hide()}),5e3)}}e.PromoCodeErrorMessage&&KCMS.Shop.togglePromoValidate(!0,e.PromoCodeErrorMessage,!0),window.location.reload()}})}a.current&&$("#SessionID").val(a.current)}var s=a.data,r='Welcome back <a href="'+e.orderHistory+'">'+s.FirstName+" "+s.LastName+"</a>";i.remove(),$(".s-checkout__signinContainer__checkoutSignIn").html(r),$(".s-checkout__signinContainer").removeClass("s-checkout__signinContainer--active"),$(".s-checkout__overlay").removeClass("s-checkout__overlay--active"),$("body").removeClass("scroll-disabled"),$("#shippingAddress ,#billingAddress, #billingComplete").removeClass("collapsible"),$(".checkout-form .validation-summary-errors").hide(),$(".checkout-form .validation-summary-errors .summary-content").text(""),KCMS.Shop.fillInformation(s),l(),(p=s.VatStatus)!=o&&p!=t||$(".mobile-vat-hint, .vat-hint").hide()}else $(".validation-summary-errors .summary-content",i).text(a.message),$(".validation-summary-errors",i).show(),KCMS.Forms.RevertToPlainCaptcha(i,a&&a.useplain,a.message);var p}),"json")}))}})),$(".forget-password-btn").on("click",(function(e){var t=$("#signin_email").val(),o=KCMS.Shop.options.ForgetPasswordUrl;t&&(o=o+"&email="+t),window.location.href=o})),"USRegion"==KCMS.Shop.options.ShopRegion?$("#ShipState,#ShipCity,#ShipZip").on("change",(function(){setTimeout((function(){u&&u.updateInfo()}),100)})):$("#ShipCountry").on("change",(function(){$("#formCheckout #ShipMethod").data("nullable",!0),u&&u.updateInfo()})),$(".mobile-shipping-option #ShipMethod, #formCheckout #ShipMethod").parents(".f-input").next().remove(),$(".mobile-shipping-option #ShipMethod, #formCheckout #ShipMethod").on("change",(function(e,t){if(void 0===t||t&&t.canChange){var o=$(e.target).val();$(e.target).is("#formCheckout #ShipMethod")?$(".mobile-shipping-option #ShipMethod").val(o).trigger("change",{canChange:!1}):$(e.target).is(".mobile-shipping-option #ShipMethod")&&$("#formCheckout #ShipMethod").val(o).trigger("change",{canChange:!1}),u.updateInfo()}})),$("#BillState").on("change",(function(){$(this).closest("form").validate().element(this)})),$(".checkout-btn").bind("click",KCMS.Shop.checkoutBtnHandle),$("#formCheckout").on("submit",(function(e){e.preventDefault()})),$("#editCartLink").unbind("click").bind("click",KCMS.Shop.editCartClick),$("#updateCartLink").bind("click",(function(){if(!($(".c-cartCheckout .c-tooltip__group:visible").length>0)){var e=document.querySelector(".c-cartCheckout"),t=document.querySelector(".checkout-btn");e.classList.remove("c-cartCheckout--editing"),t.classList.remove("disabled"),$(".cart-summary").removeClass("editing"),$(".wrapper3d").removeClass("active"),KCMS.Shop.togglePlaceHolder(!0),u.updateInfo()}})),$("#updateMobileBtn").bind("click",(function(){$(".checkout-accordian").removeClass("editing"),KCMS.Shop.togglePlaceHolder(!0)})),$(".btn-apply-new-promo").on("mousedown",(function(){var t=$(this),o=t.closest(".f-input"),i=$(".discountcode",o);if($(".btn-apply",t).is(":visible")||i.removeData("applynew"),i.data("applynew"))return!1;if(t.hasClass("apply")){if(i.val(""),i.data("applynew",!0),t.removeClass("apply"),t.closest(".f-input").removeClass("f-input--changed").removeClass("f-input--valid"),0==u.count())return;u.updateInfo()}else{if(!i.val())return;if(i.data("applynew",!0),0==u.count())return;$.post(e.validPromoQuantityUrl,{promoCode:i.val()},(function(e){e.ErrorMessage?($(".c-dialog__content","#promo-quantity-confirm-modal").html(e.ErrorMessage),$("#promo-quantity-confirm")[0].click()):u.updateInfo()}))}})),$(".cancel","#promo-quantity-confirm-modal").click((function(){$(".btn-apply-new-promo").removeClass("apply").closest(".f-input").removeClass("f-input--changed").removeClass("f-input--invalid");var e=$(".discountcode");e.val(""),e.data("applynew",!1)})),$(".confirm","#promo-quantity-confirm-modal").click((function(){$.post(e.adjustQuantityUrl,{promoCode:$(".discountcode").val()},(function(e){u.updateInfo()}))}));var r=function(e){$(".btn-apply-new-promo").removeClass("apply").closest(".f-input").addClass("f-input--changed"),$(".discountcode").data("applynew",!1)};$(".discountcode").on("keyup paste",r).on("blur",(function(){var e=$(this);setTimeout((function(){if(!e.data("applynew")){var t=$("#PromoCode").val();e.val(t),$all=$(".discountcode"),$all.not(e).val(t),$inputgroup=$all.closest(".f-input"),e.val()?($(".btn-apply-new-promo").addClass("apply"),$inputgroup.addClass("f-input--changed").removeClass("f-input--invalid").addClass("f-input--valid")):($(".btn-apply-new-promo").removeClass("apply"),$inputgroup.removeClass("f-input--changed").removeClass("f-input--invalid").removeClass("f-input--valid")),u.updateInfo()}}),100)})).on("paste",(function(e){setTimeout((function(){r()}))})),$("#ShipState").val()&&$("#ShipState").trigger("change"),KCMS.Shop.showBillingAddressValidateResult(),KCMS&&KCMS.PayPal&&$("#paypal-button-container").length>0&&KCMS.PayPal.render({element:"#paypal-button-container",ReCaptchaEnabled:e.ReCaptchaEnabled,onError:function(e,t){KCMS.Shop.showErrorMessage(t)}})},options:{},editCartClick:function(e){var t=document.querySelector(".c-cartCheckout"),o=document.querySelector(".checkout-btn");t.classList.add("c-cartCheckout--editing"),o.classList.add("disabled"),document.querySelector(".section-checkout .c-accordion__panel").style.maxHeight="none",$(".cart-summary").addClass("editing"),$(".wrapper3d").addClass("active"),KCMS.Shop.togglePlaceHolder(!1)},checkoutBtnHandle:function(t){t.preventDefault(),KCMS.Shop.togglePlaceHolder(!1),$this=$(this);var o=$("#formCheckout"),i=$("#PaymentGateway",o).val();if(KCMS.Shop.shipMethodValidate($("#ShipMethod",o)),function(e){var t=$("#formCheckout");$("#CompanyName",t).val($("#ShipAttentionCompany",t).val()),$("#Country",t).val($("#ShipCountry",t).val()),$("#FirstName",t).val($("#ShipAttentionFirstName",t).val()),$("#LastName",t).val($("#ShipAttentionLastName",t).val()),$("#Phone",t).val($("#ShipPhone",t).val()),$("#SameAsShippingAddress",t).prop("checked")&&($("#BillAttentionFirstName",t).val($("#ShipAttentionFirstName",t).val()),$("#BillAttentionLastName",t).val($("#ShipAttentionLastName",t).val()),$("#BillAttentionCompany",t).val($("#ShipAttentionCompany",t).val()),$("#BillAddress1",t).val($("#ShipAddress1",t).val()),$("#BillAddress2",t).val($("#ShipAddress2",t).val()),$("#BillAddress3",t).val($("#ShipAddress3",t).val()),$("#BillCity",t).val($("#ShipCity",t).val()),$("#BillState",t).val($("#ShipState",t).val()),$("#BillZip",t).val($("#ShipZip",t).val()),$("#BillCountry",t).val($("#ShipCountry",t).val()),$("#BillPhone",t).val($("#ShipPhone",t).val()),$("input,textarea,select",$("#billingaddress-panel",t)).trigger("change").trigger("blur"))}($this),i==e){var a=function(){var e=$("#formCheckout");return{BillAttentionFirstName:$("#BillAttentionFirstName",e).val(),BillAttentionLastName:$("#BillAttentionLastName",e).val(),BillAttentionCompany:$("#BillAttentionCompany",e).val(),BillAddress1:$("#BillAddress1",e).val(),BillAddress2:$("#BillAddress2",e).val(),BillAddress3:$("#BillAddress3",e).val(),BillCity:$("#BillCity",e).val(),BillState:$("#BillState",e).val(),BillZip:$("#BillZip",e).val(),BillCountry:$("#BillCountry",e).val()}}(),n={name:a.BillAttentionFirstName+" "+a.BillAttentionLastName,address_line1:a.BillAddress1,address_line2:a.BillAddress2,address_city:a.BillCity,address_state:a.BillState,address_zip:a.BillZip,address_country:a.BillCountry},s=KCMS.Shop.options.stripe,l=KCMS.Shop.options.card;s.createToken(l,n).then((function(e){var t=KCMS.Stripe.validateStripeToken(e);t&&$("#PayerToken",o).val(e.token.id),r(t)}))}else $("#PaymentGateway").val($(this).data("paymentgateway")),r(!0)},showBillingAddressValidateResult:function(){if($("#ShipAddress1").val()&&$("#shippingAddress").addClass("active"),!($("#SameAsShippingAddress").length>0&&$("#SameAsShippingAddress").prop("checked"))){var e=$("#billingComplete");(e.find(".field-validation-error").length>0||$("#BillAddress1").val())&&e.addClass("active")}},showPaymentInfo:function(e){var t=$("#ShipState"),o=$("#formCheckout #ShipMethod");if(t.size()>0){t=t.val();var i=o.data("nullable")?null:o.val(),a=$("#ShipCity").val(),n=$("#ShipZip").val(),s=$(".discountcode").data("applynew")?$(".discountcode").val():$("#PromoCode").val(),l=$("#ShipCountry").val();KCMS.Shop.getPaymentInfo(e,i,l,a,t,n,s),o.data("nullable",!1)}},toggleShippingOptionNote:function(){if("USRegion"==KCMS.Shop.options.ShopRegion){var e=$("#formCheckout #ShipMethod"),t=e.closest(".f-input"),o=$("option:selected",e).data("note");KCMS.Shop.shipMethodMessage(t,"shippingnote","info",o)}},getPaymentInfo:function(e,t,o,i,a,s,l){KCMS.Shop.toggleSpinner(!0),$.post(KCMS.url.content(KCMS.Shop.options.getPaymentInfoUrl),{ShipCountry:o,ShipMethod:t,ShipCity:i,ShipState:a,ShipZip:s,SessionID:0===$("#SessionID").size()?null:$("#SessionID").val(),PromoCode:l,v:(new Date).valueOf()},(function(t){if(t){parseFloat(e.total());var o=e.products();$.each(t.Baskets,(function(t,i){e.tryAddNew(i);var a=_.find(o,(function(e){return e.PartNo==i.PartNo}));a&&(a.Qty=i.Qty,a.Quantity(i.Qty),a.Price=i.Price,a.promoPrice(n(i.FormatedPrice)),a.priceWithTax(n(i.FormatedPriceWithTax)),a.IsDisplaySaving(i.DisplaySaving),a.IsOutOfStock(i.IsOutOfStock),a.RegularPrice(i.FormatedRegPrice))}));for(var i=0,a=!1,s=0;s<o.length;s++)i+=o[s].Qty,t.itemMessage&&t.itemMessage[o[s].PartNo]?(o[s].message(t.itemMessage[o[s].PartNo]),a=!0):o[s].message(null);a&&!$(".c-cartCheckout").hasClass("c-cartCheckout--editing")&&$("#editCartLink").trigger("click"),e.count(i),e.tax(t.Tax),e.ukTax(t.Tax),e.ukTaxDecimal(t.TaxDecimal),e.total(t.OrderAmount),e.itemsTotal(t.ItemsTotal),e.grandTotal(t.OrderTotal),e.grandTotalExclVAT(t.OrderNetTotal),e.shipping(t.Freight),e.shippingTotal(t.FreightTotal),e.saving(t.TotalSaving),e.currencySymbol(t.CurrencySymbol);var l=$("#formCheckout #ShipMethod"),r=$("option",l),p=!0,c=$(".mobile-shipping-option #ShipMethod"),d=$("option",c),u=r.length>1;if(t.ShipOptions){var h=r.length!=t.ShipOptions.length;h||$.each(r,(function(e,o){if($(o).data("note")!=t.ShipOptions[e].Description)return h=!0,!1}));var m=r.size()==t.ShipOptions.length&&(l.val()||"0").toUpperCase()==(t.ShipMethod||"1").toUpperCase();if(m&&$.each(r,(function(e,o){if($(o).val()!=t.ShipOptions[e].Value||Number($(o).data("amount"))!=t.ShipOptions[e].Amount||"USRegion"!=KCMS.Shop.options.ShopRegion&&$(o).prop("title")!=t.ShipOptions[e].Text)return m=!1,!1})),!m||h){r.remove(),d.remove();var S=[];$.each(t.ShipOptions,(function(e,o){var i="";t.ShipMethod&&t.ShipMethod.toUpperCase()==o.Value.toUpperCase()&&(i="selected=selected"),S.push("<option value='"+o.Value+"' "+i+" title='"+o.Text+"' data-amount='"+o.Amount+"' data-note='"+o.Description+"'>"),S.push(o.Text),S.push("</option>")})),l.append($(S.join(""))).trigger("change",{canChange:!1}),window.Rexus.formInput.reloadOptions("ShipMethod"),c.append($(S.join(""))).trigger("change",{canChange:!1}),p=KCMS.Shop.shipMethodValidate(l)}if(p&&u){var v=$("#formCheckout #ShipMethod, .mobile-shipping-option #ShipMethod").closest(".f-input");KCMS.Shop.shipMethodMessage(v,"alerttip","info",m?"":KCMS.Shop.options.shippingOptionChangedMessage)}}var g=!1;t.ErrorMessage?(g=!0,t.PromoCode==$("#PromoCode").val()&&$("#PromoCode").val("")):$("#PromoCode").val(t.PromoCode),$("#formCheckout .shipping-message").empty().text(t.ShipMessage),KCMS.Shop.togglePromoValidate(g,t.ErrorMessage),KCMS.Shop.toggleShippingOptionNote(),KCMS.Shop.displayInvalidErrors(t.InvalidErrors)}KCMS.Shop.toggleSpinner(!1)}))},displayInvalidErrors:function(e){if($(".InvalidErrors").remove(),e)for(var t=0;t<e.length;t++){var o=e[t],i='<div class="c-tooltip__group InvalidErrors" style="display: block;"><div class="c-tooltip__arrow"></div><div class="c-tooltip__message">'+o.ErrorMessage+"</div></div>";$("#"+o.ParameterName).append(i)}},validateCityStateZip:function(e){var t,o=$("#SameAsShippingAddress").length>0&&$("#SameAsShippingAddress").prop("checked"),i={ShipCity:$("#ShipCity").val(),ShipState:$("#ShipState").val(),ShipZip:$("#ShipZip").val(),SessionID:0===$("#SessionID").size()?null:$("#SessionID").val(),SameAsShippingAddress:o,BillCity:$("#BillCity").val(),BillState:$("#BillState").val(),BillZip:$("#BillZip").val()};return $.getJson(e,i,"POST",(function(e){e&&e.HasViolation&&(t=!0,KCMS.Shop.showErrorMessage(e.ErrorMessage))})),t},togglePromoValidate:function(e,t,o){var i=$(".discountcode"),a=i.closest(".f-input"),n=$(".c-tooltip__message",a.siblings(".c-tooltip__group"));e?(n.empty(),i.val()?(i.each((function(){var e=$(this).closest(".f-input");e.find(".btn-apply-new-promo").removeClass("apply"),t&&$('<span class="field-validation-error" data-valmsg-for="'+$(this).prop("name")+'" data-valmsg-replace="true"><span id="'+$(this).prop("name")+'-error">'+t+"</span></span>").appendTo(e.siblings(".c-tooltip__group").find(".c-tooltip__message"))})),a.removeClass("f-input--valid").addClass("f-input--invalid")):($(".btn-apply-new-promo").removeClass("apply"),a.removeClass("f-input--valid").removeClass("f-input--invalid").removeClass("f-input--changed"),t&&KCMS.Shop.showErrorMessage(t))):i.val()&&i.val()==$("#PromoCode").val()?($(".btn-apply-new-promo").addClass("apply"),a.addClass("f-input--valid").removeClass("f-input--invalid")):($(".btn-apply-new-promo").removeClass("apply"),i.val()?a.removeClass("f-input--valid").addClass("f-input--changed"):a.removeClass("f-input--valid").removeClass("f-input--invalid").removeClass("f-input--changed"))},togglePlaceHolder:function(e){e?($(".checkout-btn").unbind("click").bind("click",KCMS.Shop.checkoutBtnHandle),$("#editCartLink").unbind("click").bind("click",KCMS.Shop.editCartClick),$("#editCartLink").removeClass("disabled"),$(".checkout-btn,#pay-with-apple-pay,#paypal-button-container").removeClass("disabled").prop("disabled",!1),$("#billingaddress-panel input").prop("disabled",!1)):($(".checkout-btn").unbind("click"),$("#editCartLink").unbind("click"),$("#editCartLink").addClass("disabled"),$("#editMobileCartLink").unbind("click"),$("#editMobileCartLink").addClass("disabled"),$(".checkout-btn,#pay-with-apple-pay,#paypal-button-container").addClass("disabled").prop("disabled",!0))},toggleSpinner:function(e){var t=$(".spinner");e?t.removeClass("hidden"):t.addClass("hidden")},toggleCart:function(e){e?($(".panel-toggle.checkout-toggle,.panel.checkout-panel").addClass("active"),$(".s-navigation__cart>.c-dropDown,.s-kt-navigation__cart>.c-dropDown").addClass("c-dropDown--active")):($(".panel-toggle.checkout-toggle,.panel.checkout-panel").removeClass("active"),$(".s-navigation__cart>.c-dropDown,.s-kt-navigation__cart>.c-dropDown").removeClass("c-dropDown--active"))},shipMethodValidate:function(e){return!0},shipMethodMessage:function(e,t,o,i,a){var n=$(".c-tooltip__group.c-tooltip-shipmethod",e.parent());if($.trim(n.text())&&i||(n.remove(),e.removeClass("f-input--helper")),$("."+t,n).remove(),i){0===n.length&&(n=$('<div class="c-tooltip__group c-tooltip-shipmethod" id="'+e.attr("aria-describedby")+'">                                <div class="c-tooltip__message c-tooltip__message--error">                                    <span class="field-validation-valid" data-valmsg-for="ShipMethod" data-valmsg-replace="true"></span>                                </div>                                <div class="c-tooltip__arrow"></div>                            </div>')).insertAfter(e),e.addClass("f-input--helper");var s={info:"c-tooltip__message--helper",error:"c-tooltip__message--error"}[o],l=$('<div class="c-tooltip__message '+t+'"><span></span></div>');s&&(l.addClass(s),e.data("hasmessage",!0)),$("span",l).html(i),l.insertBefore($(".c-tooltip__arrow",n)),void 0!==a&&$.isFunction(a)&&a()}},showErrorMessage:function(e){if($(".top-summary-errors.validation-summary-errors .summary-content").html(e.replace("\r\n","<br/>")),$(".top-summary-errors.validation-summary-errors").show(),s(),$(".top-summary-errors.validation-summary-errors").size()>0){$("html,body").animate({scrollTop:0},"slow")}KCMS.Shop.togglePlaceHolder(!0)},initBasket:function(t){(u=new d([])).DeleteUrl=t.DeleteUrl,u.UpdateQuantityUrl=t.UpdateQuantityUrl,u.CheckInventory=t.CheckInventory,ko.applyBindings(u,document.getElementById("main-nav"));var o,i=document.getElementById("checkout-container");function a(){u.checkOutUrl(t.PlaceOrderUrl),$.post(t.BasketsUrl,{SessionID:0===$("#SessionID").size()?null:$("#SessionID").val(),v:(new Date).valueOf(),checkInventory:t.CheckInventory},(function(e){e.BasketItems&&u.resetBasket(e.BasketItems);for(var t=u.products(),i=0;i<t.length;i++)e.itemMessage&&e.itemMessage[t[i].PartNo]?t[i].message(e.itemMessage[t[i].PartNo]):t[i].message(null);u.currentUser(e.CurrentUser),u.currencySymbol(e.CurrencySymbol),u.ready(!0),o=e.CurrentPromoCode,u.promoCode(e.CurrentPromoCode),e.CurrentPromoCode?setTimeout((function(){var t=$("#basket-code");if(n=!1,t.length>0){e.CurrentPromoCode.toLowerCase()==t.val().toLowerCase()?t.closest(".f-input").addClass("-valid f-input--changed"):t.closest(".f-input").removeClass("-valid");var o=t.closest(".f-input");e.PromoCodeErrorMessage?(o.addClass("f-input--invalid"),$(".c-tooltip__message",o.siblings(".c-tooltip__group")).html(e.PromoCodeErrorMessage)):o.removeClass("f-input--invalid"),t.val()&&(o.addClass("f-input--changed"),$(".checkout-panel .checkout-footer .input-cta.clear").removeClass("hidden"),$(".checkout-panel .checkout-footer .input-cta.apply").addClass("hidden"))}}),100):($("#basket-code").closest(".f-input").removeClass("f-input--valid").removeClass("f-input--invalid").removeClass("f-input--changed"),$(".checkout-panel .checkout-footer .input-cta.apply").addClass("hidden"),$(".checkout-panel .checkout-footer .input-cta.clear").addClass("hidden"));var a=[];if(e.BasketItems)for(i=0;i<e.BasketItems.length;i++)e.BasketItems[i].ErrorMessage&&a.push(e.BasketItems[i].PartNo+": "+e.BasketItems[i].ErrorMessage);if((e.PromoCodeErrorMessage||a.length>0)&&$(".section-checkout").length>0){if(a.length>0){var s=$(".validation-summary-errors.top-summary-errors").show();$(".summary-content",s).html(a.join("<br/>"))}e.PromoCodeErrorMessage&&KCMS.Shop.togglePromoValidate(!0,e.PromoCodeErrorMessage,!0)}var l=$("#basket-paypal-container");KCMS&&KCMS.PayPal&&e.BasketItems&&e.BasketItems.length>0&&l.length>0&&0==l.children().length&&(u.isBasketPromoEnable(!0),KCMS.PayPal.render({element:"#basket-paypal-container",onError:function(e,t){for(var o={},i=e.length,a=0,n=0;n<e.length;n++)o[e[n].ParameterName]=e[n].ErrorMessage;var s=u.products();for(n=0;n<s.length;n++)if(o[s[n].PartNo]){a++;var l=o[s[n].PartNo];s[n].message(l)}else s[n].message(null);(i||i!=a)&&alert(t)}}))}))}i&&ko.applyBindings(u,i),a(),$(".section-navigation .checkout-footer").on("click",".checkout-btn",(function(){if(fbq){var e=$(".section-navigation .checkout-footer .cart-totalItems>span:first").text();fbq("track","InitiateCheckout",{num_items:e})}})),$(".section-navigation .checkout-toggle").on("click",(function(){var e=$(this),t=e.parent();(e.hasClass("active")||t.hasClass("c-dropDown--active"))&&a()})),$(document).on("sync-basket",a),$(document).on("click",t.ButtonSelector,(function(){$("#dy-error-msg").remove();var e=$(this),o=$(this).data("pn"),i=$(this).data("quantity"),n=$(this).data("image"),s=$(this).data("promo");if(o)return $.post(t.AddToCartUrl,{partNumber:o,quantity:i,imageURL:n,promo:s},(function(t){if(a(),$("#main-nav").css("top","0px"),t.HasViolation||(KCMS.Shop.toggleCart(!0),a()),t.ErrorMessage)KCMS.Shop.showTooltip(e,t.ErrorMessage);else{fbq&&fbq("track","AddToCart",{content_name:t.Result.Descr,content_ids:[t.Result.PartNo],content_type:"product",value:t.Result.Total,currency:t.Result.CurrencyCode,product_catalog_id:"",contents:[{id:t.Result.PartNo,quantity:t.Result.Qty,item_price:t.Result.Price}]});var n=KCMS.ProductInfo.get(o);null!=n&&KCMS.EventBus.publish("/eCommerce/AddToCart",{product:n,location:"eCommerce",quantity:i,list:void 0,position:void 0})}})),!1})),$(document).on("click",".section-navigation .continue-shopping",(function(){$(".panel-toggle.checkout-toggle.active,.panel.checkout-panel.active").removeClass("active")}));var n=!1;function s(o){if(!$(this).hasClass("disabled")){var i="",a="",n="",s=workContext.ccode,l={label:"FedEx",detail:"FedEx Ground 5-7 Day (M-F) (Free!)",amount:"0.00",identifier:"RPN"},r=[],p=[],d=0,u=0,h=0,m=null,S=$("#SessionID").val();o&&o.Result&&o.Result.SessionID&&(S=o.Result.SessionID),$.ajax({url:t.BasketsUrl,data:{SessionID:S},type:"post",async:!1,success:function(e){p=e.BasketItems,$.each(p,(function(){d+=this.Qty,h=c(h,this.Total)}))}}),fbq&&fbq("track","InitiateCheckout",{num_items:d});var v={shippingType:"shipping",countryCode:"US",currencyCode:"USD",requiredBillingContactFields:["email","name","phone","postalAddress"],requiredShippingContactFields:["email","name","phone","postalAddress"],lineItems:y(),total:f()};(m=Stripe.applePay.buildSession(v,(function(o,i){var n="";$.ajax({url:t.SetPaymentToken,type:"post",async:!1,success:function(e){n=e}});var s=o.shippingContact,r=o.token.card,p={IsApplePay:!0,PayerToken:o.token.id,PaymentGateway:e,Action:"New",SessionID:S,CustomerID:null,CompanyName:"",FirstName:s.givenName,LastName:s.familyName,Phone:s.phoneNumber,Email:s.emailAddress,Country:s.country,ShipAttention:null,ShipAttentionCompany:"",ShipAttentionFirstName:s.givenName,ShipAttentionLastName:s.familyName,ShipAddress1:null!=s.addressLines?s.addressLines.join(" "):"",ShipAddress2:null,ShipCity:s.locality,ShipState:s.administrativeArea,ShipZip:a,ShipCountry:s.country,ShipPhone:s.phoneNumber,BillAttention:null,BillAttentionCompany:"",BillAttentionFirstName:r.name,BillAttentionLastName:r.name,BillAddress1:r.address_line1,BillAddress2:r.address_line2,BillCity:r.address_city,BillState:r.address_state,BillZip:r.address_zip,BillCountry:r.address_country,BillPhone:s.phoneNumber,ShipMethod:null!=o.shippingMethod?o.shippingMethod.identifier:l.identifier,DiscountCode:g(),PromoCode:g(),SameAsShippingAddress:!1,__RequestVerificationToken:n},c={None:"0",ShipState:"1",ShipCity:"2",ShipZip:"3",ShipAddress1:"4",ShipStateCityZipNotMatch:"5",BillState:"6",BillCity:"7",BillZip:"8",BillAddress1:"9",BillStateCityZipNotMatch:"10",Failed:"11"};$.post(t.PlaceOrderUrl,p).done((function(e){if(e&&e.ErrorCode==c.None&&e.Data)i(ApplePaySession.STATUS_SUCCESS),window.location.href=e.Data;else{if(e.ErrorCode==c.ShipState||e.ErrorCode==c.ShipCity||e.ErrorCode==c.ShipZip||e.ErrorCode==c.ShipAddress1||e.ErrorCode==c.ShipStateCityZipNotMatch)i(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS);else if(e.ErrorCode==c.BillState||e.ErrorCode==c.BillCity||e.ErrorCode==c.BillState||e.ErrorCode==c.BillAddress1||e.ErrorCode==c.BillStateCityZipNotMatch)i(ApplePaySession.STATUS_INVALID_BILLING_POSTAL_ADDRESS);else if(e.ErrorCode==c.Failed){["Phone","Email","ShipPhone","BillPhone"].indexOf(e.Property)>=0?i(ApplePaySession.STATUS_INVALID_SHIPPING_CONTACT):0===e.Property.indexOf("Bill")?i(ApplePaySession.STATUS_INVALID_BILLING_POSTAL_ADDRESS):i(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS)}else i(ApplePaySession.STATUS_FAILURE);setTimeout((function(){alert(e.ErrorMessage)}),1500)}})).fail((function(){i(ApplePaySession.STATUS_FAILURE)}))}))).onshippingmethodselected=function(e){l=e.shippingMethod,C(),m.completeShippingMethodSelection(ApplePaySession.STATUS_SUCCESS,f(),y())},m.onshippingcontactselected=function(e){var o=e.shippingContact;i=o.administrativeArea,a=o.postalCode,n=o.locality,s=o.countryCode||workContext.ccode,$.ajax({url:t.CheckCityStateZipUrl,type:"post",data:{ShipAddress1:null!=o.addressLines?o.addressLines.join(" "):"",ShipCity:o.locality,ShipState:o.administrativeArea,ShipZip:o.postalCode,ShipCountry:o.country,ShipPhone:o.phoneNumber,SameAsShippingAddress:!0},async:!1,success:function(e){var o,a=ApplePaySession.STATUS_SUCCESS;if(e.HasViolation&&(a=ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS),a==ApplePaySession.STATUS_SUCCESS){a=(o=i,r=[],$.ajax({url:t.ShipOptionsUrl,type:"post",data:{s:o,SessionID:S},async:!1,success:function(e){e&&$.each(e,(function(){r.push({label:this.Text.substring(0,this.Text.indexOf(" ")),detail:this.Text,amount:this.Amount.toFixed(2),identifier:this.Value})}))}}),r.length>0&&(l=r[0]),r).length>0?ApplePaySession.STATUS_SUCCESS:ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS;C()}m.completeShippingContactSelection(a,r,f(),y())}})},m.begin()}function g(){var e=$("#PromoCode").val();return e||(e=$(".discountcode").val()),e||(e=$(".promo-code").val()),e||(e=$("#basket-code").val()),e}function C(){$.ajax({url:t.TaxUrl,type:"post",data:{SessionID:S,ShipMethod:l.identifier,ShipCountry:(s||"US").toUpperCase(),ShipCity:n,ShipState:i,ShipZip:a,PromoCode:g()},async:!1,success:function(e){e&&e.OrderTotal?u=Number(e.Tax):null!=m&&m.abort()},error:function(){null!=m&&m.abort()}})}function f(){return{label:"Kingston Technology Company Inc.",amount:(Number(l.amount)+h+u).toFixed(2)}}function y(){var e=[];return e.push({type:"final",label:"Subtotal",amount:h.toFixed(2)}),Number(l.amount)>0&&e.push({type:"final",label:"Shipping",amount:l.amount}),u>0&&e.push({type:"final",label:"Tax",amount:u.toFixed(2)}),e}}$(document).on("mousedown",".checkout-panel .checkout-footer .input-cta",(function(){n=!0,$this=$(this),$this.hasClass("clear")&&$("#basket-code").val("").closest(".f-input").removeClass("f-input--changed");var e=$("#basket-code").val(),i=$(this).closest(".f-input");return u.promoCode(e),$.post(t.SetPromoCodeUrl,{code:e},(function(t){t.IsActive?($(document).trigger("promocodechanged",e),a(),o=e,i.removeClass("error"),o?(i.addClass("f-input--valid").removeClass("f-input--invalid"),$(".checkout-panel .checkout-footer .input-cta.apply").addClass("hidden"),$(".checkout-panel .checkout-footer .input-cta.clear").removeClass("hidden")):($(".checkout-panel .checkout-footer .input-cta.apply").addClass("hidden"),$(".checkout-panel .checkout-footer .input-cta.clear").addClass("hidden"),i.removeClass("-valid").removeClass("f-input--invalid"),$("#basket-code").focus())):(i.removeClass("f-input--valid").addClass("f-input--invalid"),$(".c-tooltip__message",i.siblings(".c-tooltip__group")).html(t.Message),setTimeout((function(){n=!1,$("#basket-code").focus()}),100))})),!1})),$(document).on("keyup paste","#basket-code",(function(){n=!1,$this=$(this),setTimeout((function(){o&&o==$this.val()?$this.closest(".f-input").addClass("f-input--valid").removeClass("f-input--invalid"):$this.closest(".f-input").removeClass("f-input--valid"),$this.val()?($(".checkout-panel .checkout-footer .input-cta.apply").removeClass("hidden"),$(".checkout-panel .checkout-footer .input-cta.clear").addClass("hidden")):($this.closest(".f-input").removeClass("f-input--invalid"),$(".checkout-panel .checkout-footer .input-cta.apply").addClass("hidden"),$(".checkout-panel .checkout-footer .input-cta.clear").addClass("hidden"))}))})).on("blur","#basket-code",(function(){$this=$(this),setTimeout((function(){n||($this.val(o),o?($this.closest(".f-input").addClass("-valid").addClass("f-input--changed").removeClass("f-input--invalid"),$(".checkout-panel .checkout-footer .input-cta.apply").addClass("hidden"),$(".checkout-panel .checkout-footer .input-cta.clear").removeClass("hidden")):($this.closest(".f-input").removeClass("-valid").removeClass("f-input--invalid"),$this.val()||$this.closest(".f-input").removeClass("f-input--changed"),$(".checkout-panel .checkout-footer .input-cta.apply").addClass("hidden"),$(".checkout-panel .checkout-footer .input-cta.clear").addClass("hidden")))}),100)})),$("#main-nav .checkout-header").on("click","#signoutlink",(function(){var e=$(document.signOutForm),o="";$.ajax({url:t.SetPaymentToken,type:"post",async:!1,success:function(e){o=e}}),$("input[name=__RequestVerificationToken]",e).val(o),e.submit()})),"undefined"!=typeof Stripe&&null!==Stripe&&Stripe.setPublishableKey&&(Stripe.setPublishableKey(t.stripeApiKey),Stripe.applePay.checkAvailability((function(e){e&&(h=!0,$(document).trigger("ApplyPay.Ready"),u.showApplePay())})),$(document).on("click","#apply-pay.btn",(function(){$("#dy-error-msg").remove();var e=$(this),o=e.data("pn"),i=e.data("quantity");o&&$.ajax({url:t.AddToCartUrl,type:"post",data:{partNumber:o,quantity:i,imageURL:"",newSession:!0},async:!1,success:s})})),$(document).on("click","#pay-with-apple-pay",s),$(".checkout-footer").on("click",".u-btn-apple,#apple-pay-button",s))},fillInformation:function(e){var t=window.Rexus.formInput;function o(e,o){var i=$("#"+e);i.val(o),t.setValue("group-"+e,o),i.is("select")&&window.Rexus&&window.Rexus.formInput&&(window.Rexus.formInput.reloadOptions("group-"+e),i.trigger("change"))}o("Email",e.Email),$("#ShipCountry").val()==e.ShipCountry&&(o("ShipAttentionCompany",e.ShipAttentionCompany),o("ShipAttentionFirstName",e.ShipAttentionFirstName),o("ShipAttentionLastName",e.ShipAttentionLastName),o("ShipAddress1",e.ShipAddress1),o("ShipAddress2",e.ShipAddress2),o("ShipAddress3",e.ShipAddress3),o("ShipCity",e.ShipCity),o("ShipZip",e.ShipZip),o("ShipPhone",e.Phone),o("BillAttentionCompany",e.BillAttentionCompany),o("BillAttentionFirstName",e.BillAttentionFirstName),o("BillAttentionLastName",e.BillAttentionLastName),o("BillAddress1",e.BillAddress1),o("BillAddress2",e.BillAddress2),o("BillAddress3",e.BillAddress3),o("BillCity",e.BillCity),o("BillZip",e.BillZip),o("BillPhone",e.Phone),o("ShipState",e.ShipState),o("BillState",e.BillState))},isApplyPayActive:function(){return h},showTooltip:function(e,t){$("#dy-error-msg").remove();var o=['<div id="dy-error-msg" class="f-quantity__input"><div class="tooltip-group" style="min-width: unset;white-space: nowrap;"><div class="tooltip"><div class="tooltip__message">',"","<span></span></div></div></div></div>"];o[1]=t;var i=$(o.join(""));i.css("position","absolute"),i.css("z-index",1e3),$("body").append(i),i.css("top",e.offset().top+e.outerHeight()),i.css("left",e.offset().left),e.offset().left+i.outerWidth()>$(window).width()&&(i.width($(window).width()-e.offset().left-10),$(".tooltip-group").css("white-space","normal")),setTimeout((function(){$("#dy-error-msg").remove()}),3e3)}}}();