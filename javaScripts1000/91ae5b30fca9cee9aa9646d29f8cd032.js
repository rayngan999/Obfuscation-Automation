(this.jsTagManagerJsonpCallback=this.jsTagManagerJsonpCallback||[]).push([[6,1],{39:function(e,t,n){"use strict";n.r(t),n.d(t,"addPropsFromSkippyHotelsUrl",(function(){return c})),n.d(t,"parseSkippyHotelsUrl",(function(){return s})),n.d(t,"parseUrl",(function(){return o}));var r=n(3),i=n(7),a=n(19),o=function(e){var t,n=(e||"").match(/^(https?):\/\/([^:/?#]*)(?::([0-9]+))?([/]{0,1}[^?#]*)(\?[^#]*|)(#(.*))?$/);if(n){var r=n[4]||"",o=n[5]||"";return{protocol:n[1]||"",host:n[2]||"",port:n[3]||"",pathname:r,pathSections:r.split("/"),search:o,queryParams:(t=o,t.slice(1).split("&").filter((function(e){return e.length>0})).map((function(e){return e.split("=")})).reduce((function(e,t){var n=Object(a.a)(t,2),r=n[0],o=n[1];return Object.assign(e,Object(i.a)({},r,o))}),{})),hash:n[7]||""}}return null},u=function(e){try{return decodeURIComponent(e)}catch(t){return""}},s=function(e){var t=o(e);if(!t)return{};var n=t.pathSections,r=t.queryParams,i=Object(a.a)(n,12),s=i[7],c=i[8],h=i[9];s=s||"",c=c||"",h=h||"";var d=r.guests||"",l=r.children_ages?u(r.children_ages).split(",").filter((function(e){return e.length>0})):[],p="".concat(l.length),v=r.rooms||"";return{hotelId:s,checkInDate:c,checkOutDate:h,adults:d,children:p,cityCode:r.city_code||"",countryCode:r.country_code||"",placeName:u(r.place_name||""),hotelStars:r.stars||"",rooms:v,childrenAges:l}},c=function(e){var t=e.skippyUrl;if(!t)return e;var n=s(t);return Object(r.a)(Object(r.a)({},e),n)}},42:function(e,t,n){"use strict";n.r(t),n.d(t,"criteo",(function(){return b})),n.d(t,"getViewItemId",(function(){return f}));var r=n(3),i=n(6),a=n(1),o=n(39),u=function(){return"".concat(Math.floor(1001*Math.random())).concat(Date.now())},s={AE:55781,AR:13381,AT:18942,AU:9736,BR:48339,CA:13385,CH:18948,CO:57616,CZ:18943,DE:7450,DK:7459,ES:7447,FI:17297,FR:3491,GR:18944,HK:16133,ID:21464,IE:17933,IL:46745,IN:13082,IT:7448,JP:13710,KR:21463,MX:13382,MY:14976,NL:7449,NO:7458,NZ:18568,PH:55780,PL:18572,PT:18947,RU:7446,SE:3686,SG:14979,TH:13734,TR:7444,TW:16134,UK:2936,US:18945},c={AE:78574,AR:78580,AT:78581,AU:78584,BR:78585,CA:78586,CH:78587,CO:78589,CZ:78591,DE:11105,DK:78593,ES:10891,FI:78594,FR:78595,GR:78596,HK:73798,ID:78597,IE:78598,IL:78599,IN:78600,IT:10890,JP:78601,KR:78602,MX:78603,MY:78604,NL:10894,NO:78605,NZ:78606,PH:78608,PL:78609,PT:78610,RU:10889,SE:78611,SG:78612,TH:78613,TR:78614,TW:73797,UK:4748,US:78615},h=function(e){return e.isMobile?"m":e.isBrowser?"d":e.isTablet?"t":"d"},d=function(e){return e.filter((function(e){return parseInt(e,10)<2})).length},l=function(e){return e.filter((function(e){return parseInt(e,10)>=2})).length},p=function(e){return{event:"setSiteType",type:h(e)}},v=function(e){return{event:"setAccount",account:e}},f=function(e){var t=e.originAirport||e.originIata||e.originId||e.originCityId,n=e.destinationAirport||e.destinationIata||e.destinationId||e.destinationCityId;if(t&&n)return"".concat(t,"_").concat(n)},m=function(e,t){var n=(e.page||"").toLowerCase(),i=[];if(i.push({event:"manualFlush"}),i.push(p(e)),i.push(v(t)),"home"!==n&&"flights-home"!==n||i.push({event:"viewHome"}),["day-view","month","browse-view"].indexOf(n)>-1&&void 0!==e.view_item_id&&i.push({event:"viewItem",item:e.view_item_id}),"day-view"===n&&i.push({event:"viewSearch",checkin_date:e.outboundDate,checkout_date:e.inboundDate}),"redir"===n&&"transport"===e.skippyTaskVertical){var a=Object(r.a)({},e);a.market=e.market?e.market.toUpperCase():"",i.push(function(e){return{event:"viewItem",account:s[e.market],item:e.destinationIata,din:e.inboundDate,dout:e.outboundDate,place:"flightconversion"}}(a)),i.push(function(e,t){return{event:"trackTransaction",account:t,id:e.redirectId,currency:e.currency,item:[{id:e.view_item_id,price:e.redirectValue||1,quantity:1}]}}(a,t))}return["news","last_minute_deals"].indexOf(n)>-1&&i.push({event:"viewItem",item:n}),i.push({event:"setHashedEmail",email:""}),i.push({event:"flushEvents"}),i},b=function(e,t){i.a.subscribe("criteo-event",(function(e){return function(e){var t=a.GLOBAL.getWindow();if(!e||!e.event)throw new Error("event required");if(!e.id)throw new Error("id required");var n={event:e.event,id:e.id,new_customer:e.new_customer||1,deduplication:e.deduplication||0,item:e.item||[]};return t.criteo_q&&t.criteo_q.push(n)}(e)}));var n=function(e){if(!e)throw new Error("__tagmanagerProps required");var t=Object(r.a)({},e),n=function(e){if(e)return"return"===e?"0":"1"}(t.tripType);void 0!==n&&(t.criteo_nc=n);var i=f(e);return i&&(t.view_item_id=i),e.destinationCityId&&(t.destinationCityId=e.destinationCityId),t}(e),h=m(n,"".concat(e.market?s[e.market.toUpperCase()]:"")),b=function(e,t){var n=!1,r=!1,s=e.page||"",c=e.pagetype||"",h=s.toLowerCase(),f=[];if(f.push({event:"manualFlush"}),f.push(p(e)),"hotels-home"===c)f.push(v(t)),f.push({event:"viewHome"});else if("hotels-hotel-details"===h)f.push(v(t)),f.push({event:"viewItem",nbri:d(e.childrenV2),nbra:parseInt(e.adultsV2,10),din:e.checkInDate,dout:e.checkOutDate,nbrc:l(e.childrenV2),nbrr:e.numberOfRooms,item:e.hotelId});else if("hotels-results"===c)i.a.subscribe("hotels-dayview-search-results-returned",(function(n){var r={event:"viewList",nbri:d(e.childrenV2),nbra:parseInt(e.adultsV2,10),din:e.checkInDate,dout:e.checkOutDate,nbrc:l(e.childrenV2),nbrr:e.numberOfRooms,item:n.top10Hotels.map((function(e){return e.id}))},i=a.GLOBAL.getWindow().criteo_q;i.push({event:"manualFlush"}),i.push(p(e)),i.push(v(t)),i.push(r),i.push({event:"setHashedEmail",email:""}),i.push({event:"flushEvents"})}));else if("hotels-dbook"===c)i.a.subscribe("hotels-dbook-page-loaded",(function(i){var o=a.GLOBAL.getWindow().criteo_q;if("hotels-dbook-checkout"!==i.pagetype||r){if("hotels-dbook-confirmation"===i.pagetype&&!n){var s=u();o.push({event:"manualFlush"}),o.push(p(e)),o.push(v(t)),o.push({event:"trackTransaction",currency:i.currency,id:s,nbri:d(i.childrenV2),nbra:parseInt(i.adultsV2,10),din:i.checkInDate,dout:i.checkOutDate,nbrc:l(i.childrenV2),nbrr:i.numberOfRooms}),o.push({event:"setHashedEmail",email:""}),o.push({event:"flushEvents"}),n=!0}}else o.push({event:"manualFlush"}),o.push(p(e)),o.push(v(t)),o.push({event:"viewBasket",currency:i.currency,nbri:d(i.childrenV2),nbra:parseInt(i.adultsV2,10),din:i.checkInDate,dout:i.checkOutDate,nbrc:l(i.childrenV2),nbrr:i.numberOfRooms,item:[{id:i.hotelId,price:i.totalPriceOfBooking}]}),o.push({event:"setHashedEmail",email:""}),o.push({event:"flushEvents"}),r=!0}));else if("skippy"===c&&"hotels"===e.skippyTaskVertical){var m=Object(o.parseSkippyHotelsUrl)(e.skippyUrl),b=u();f.push(v(t)),f.push({event:"trackTransaction",currency:e.currency,id:b,nbri:d(m.childrenAges),nbra:parseInt(m.adults,10),din:m.checkInDate,dout:m.checkOutDate,nbrc:l(m.childrenAges),nbrr:m.rooms,item:[{id:m.hotelId,price:e.redirectValue}]})}return f.push({event:"setHashedEmail",email:""}),f.push({event:"flushEvents"}),f}(n,"".concat(e.market?c[e.market.toUpperCase()]:"")),I=a.GLOBAL.getWindow();I.criteo_q=I.criteo_q||[],h.forEach((function(e){I.criteo_q.push(e)})),b.forEach((function(e){I.criteo_q.push(e)})),t("//static.criteo.net/js/ld/ld.js",null,null,"anonymous")};t.default=b}}]);
//# sourceMappingURL=criteo-criteo.8a85a5f5.chunk.js.map