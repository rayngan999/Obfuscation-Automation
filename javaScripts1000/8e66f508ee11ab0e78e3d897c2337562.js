!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){(function(n){(function(n){"use strict";function r(e,t,n,r,o){this.emit("error","This method has been deprecated. Check out DOM listeners: https://github.com/keen/keen-tracking.js#listeners");var i,s,a=e,u=a.currentTarget?a.currentTarget:a.srcElement||a.target,c=r||500,l=!1,d="";return void 0!==u.getAttribute?d=u.getAttribute("target"):u.target&&(d=u.target),"_blank"!=d&&"blank"!=d||a.metaKey||(s=window.open("about:blank"),s.document.location=u.href),"A"===u.nodeName?i=function(){l||a.metaKey||"_blank"===d||"blank"===d||(l=!0,window.location=u.href)}:"FORM"===u.nodeName?i=function(){l||(l=!0,u.submit())}:this.trigger("error","#trackExternalLink method not attached to an <a> or <form> DOM element"),o&&(i=function(){l||(l=!0,o())}),this.recordEvent(t,n,i),setTimeout(i,c),a.metaKey?void 0:!1}var o=e("./index"),i=e("./utils/each"),s=e("./utils/extend"),a=e("./utils/listener")(o);s(o.prototype,e("./record-events-browser")),s(o.prototype,e("./defer-events")),s(o.prototype,{extendEvent:e("./extend-events").extendEvent,extendEvents:e("./extend-events").extendEvents}),s(o.prototype,{initAutoTracking:e("./browser-auto-tracking")(o)}),o.prototype.trackExternalLink=r,s(o.helpers,{getBrowserProfile:e("./helpers/getBrowserProfile"),getDatetimeIndex:e("./helpers/getDatetimeIndex"),getDomNodePath:e("./helpers/getDomNodePath"),getDomNodeProfile:e("./helpers/getDomNodeProfile"),getScreenProfile:e("./helpers/getScreenProfile"),getScrollState:e("./helpers/getScrollState"),getUniqueId:e("./helpers/getUniqueId"),getWindowProfile:e("./helpers/getWindowProfile")}),s(o.utils,{cookie:e("./utils/cookie"),deepExtend:e("./utils/deepExtend"),listener:a,serializeForm:e("./utils/serializeForm"),timer:e("./utils/timer")}),o.listenTo=function(e){i(e,function(e,t){var n=t.split(" "),r=n[0],o=n.slice(1,n.length).join(" ");return a(o).on(r,e)})},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),"undefined"!=typeof t&&t.exports&&(t.exports=o),"undefined"!=typeof define&&define.amd&&define("keen-tracking",[],function(){return o}),n.Keen=o.extendLibrary(o)}).call(this,"undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser-auto-tracking":2,"./defer-events":3,"./extend-events":4,"./helpers/getBrowserProfile":5,"./helpers/getDatetimeIndex":6,"./helpers/getDomNodePath":7,"./helpers/getDomNodeProfile":8,"./helpers/getScreenProfile":9,"./helpers/getScrollState":10,"./helpers/getUniqueId":11,"./helpers/getWindowProfile":12,"./index":13,"./record-events-browser":14,"./utils/cookie":16,"./utils/deepExtend":17,"./utils/each":18,"./utils/extend":19,"./utils/listener":20,"./utils/serializeForm":22,"./utils/timer":23}],2:[function(e,t,n){function r(e){return function(t){var n=this,r=e.helpers,s=e.utils,a=s.extend({ignoreDisabledFormFields:!1,ignoreFormFieldTypes:["password"],recordClicks:!0,recordFormSubmits:!0,recordPageViews:!0,recordScrollState:!0},t),u=new Date,c=new s.cookie("keen"),l=c.get("uuid");l||(l=r.getUniqueId(),c.set("uuid",l));var d={};return a.recordScrollState&&(d=r.getScrollState(),s.listener("window").on("scroll",function(){d=r.getScrollState(d)})),n.extendEvents(function(){var e=r.getBrowserProfile();return{tracked_by:i.name+"-"+i.version,local_time_full:new Date,user:{uuid:l},page:{title:document?document.title:null,description:e.description,time_on_page:o(u)},ip_address:"${keen.ip}",geo:{},user_agent:"${keen.user_agent}",tech:{profile:e},url:{full:window?window.location.href:"",info:{}},referrer:{full:document?document.referrer:"",info:{}},time:{local:{},utc:{}},keen:{timestamp:(new Date).toISOString(),addons:[{name:"keen:ip_to_geo",input:{ip:"ip_address"},output:"geo"},{name:"keen:ua_parser",input:{ua_string:"user_agent"},output:"tech"},{name:"keen:url_parser",input:{url:"url.full"},output:"url.info"},{name:"keen:url_parser",input:{url:"referrer.full"},output:"referrer.info"},{name:"keen:date_time_parser",input:{date_time:"keen.timestamp"},output:"time.utc"},{name:"keen:date_time_parser",input:{date_time:"local_time_full"},output:"time.local"}]}}}),a.recordClicks===!0&&s.listener("a, a *").on("click",function(e){var t=e.target,o={element:r.getDomNodeProfile(t),local_time_full:new Date,page:{scroll_state:d}};n.recordEvent("clicks",o)}),a.recordFormSubmits===!0&&s.listener("form").on("submit",function(e){var t=e.target,o={disabled:a.ignoreDisabledFormFields,ignoreTypes:a.ignoreFormFieldTypes},i={form:{action:t.action,fields:s.serializeForm(t,o),method:t.method},element:r.getDomNodeProfile(t),local_time_full:new Date,page:{scroll_state:d}};n.recordEvent("form_submissions",i)}),a.recordPageViews===!0&&n.recordEvent("pageviews"),n}}function o(e){var t=(new Date).getTime()-e.getTime();return Math.round(t/1e3)}var i=e("../package.json");t.exports=r},{"../package.json":32}],3:[function(e,t,n){function r(e,t){return 2!==arguments.length||"string"!=typeof e?void u.call(this,"Incorrect arguments provided to #deferEvent method"):(this.queue.events[e]=this.queue.events[e]||[],this.queue.events[e].push(t),this.queue.capacity++,this.queue.timer||this.queue.start(),this.emit("deferEvent",e,t),this)}function o(e){var t=this;return 1!==arguments.length||"object"!=typeof e?void u.call(this,"Incorrect arguments provided to #deferEvents method"):(c(e,function(e,n){t.queue.events[n]=t.queue.events[n]||[],t.queue.events[n]=t.queue.events[n].concat(e),t.queue.capacity=t.queue.capacity+e.length,t.queue.timer||t.queue.start()}),t.emit("deferEvents",e),t)}function i(e){return arguments.length?(this.queue.config.capacity=e?Number(e):0,this.queue.check(),this):this.queue.config.capacity}function s(e){return arguments.length?(this.queue.config.interval=e?Number(e):0,this.queue.check(),this):this.queue.config.interval}function a(){var e,t,n=this;return n.queue.capacity>0&&(n.queue.pause(),e=JSON.parse(JSON.stringify(n.queue.config)),t=JSON.parse(JSON.stringify(n.queue.events)),n.queue=l(),n.queue.config=e,n.emit("recordDeferredEvents",t),n.recordEvents(t,function(e,r){e?n.recordEvents(t):t=void 0})),n}function u(e){var t="Event(s) not deferred: "+e;this.emit("error",t)}var c=(e("./index"),e("./utils/each")),l=e("./utils/queue");t.exports={deferEvent:r,deferEvents:o,queueCapacity:i,queueInterval:s,recordDeferredEvents:a}},{"./index":13,"./utils/each":18,"./utils/queue":21}],4:[function(e,t,n){function r(e,t){return 2!==arguments.length||"string"!=typeof e||"object"!=typeof t&&"function"!=typeof t?void i.call(this,"Incorrect arguments provided to #extendEvent method"):(this.extensions.collections[e]=this.extensions.collections[e]||[],this.extensions.collections[e].push(t),this.emit("extendEvent",e,t),this)}function o(e){return 1!==arguments.length||"object"!=typeof e&&"function"!=typeof e?void i.call(this,"Incorrect arguments provided to #extendEvents method"):(this.extensions.events.push(e),this.emit("extendEvents",e),this)}function i(e){var t="Event(s) not extended: "+e;this.emit("error",t)}function s(e,t){return t&&t.length>0&&u(t,function(t,n){var r="function"==typeof t?t():t;a(e,r)}),e}var a=e("./utils/deepExtend"),u=e("./utils/each");t.exports={extendEvent:r,extendEvents:o,getExtendedEventBody:s}},{"./utils/deepExtend":17,"./utils/each":18}],5:[function(e,t,n){function r(){return{cookies:"undefined"!=typeof navigator.cookieEnabled?navigator.cookieEnabled:!1,codeName:navigator.appCodeName,description:o(),language:navigator.language,name:navigator.appName,online:navigator.onLine,platform:navigator.platform,useragent:navigator.userAgent,version:navigator.appVersion,screen:i(),window:s()}}function o(){var e;return document&&"function"==typeof document.querySelector&&(e=document.querySelector('meta[name="description"]')),e?e.content:""}var i=e("./getScreenProfile"),s=e("./getWindowProfile");t.exports=r},{"./getScreenProfile":9,"./getWindowProfile":12}],6:[function(e,t,n){function r(e){var t=e||new Date;return{hour_of_day:t.getHours(),day_of_week:parseInt(1+t.getDay()),day_of_month:t.getDate(),month:parseInt(1+t.getMonth()),year:t.getFullYear()}}t.exports=r},{}],7:[function(e,t,n){function r(e){if(!e.nodeName)return"";for(var t=[];null!=e.parentNode;){for(var n=0,r=0,o=0;o<e.parentNode.childNodes.length;o++){var i=e.parentNode.childNodes[o];i.nodeName==e.nodeName&&(i===e&&(r=n),n++)}e.hasAttribute("id")&&""!=e.id?t.unshift(e.nodeName.toLowerCase()+"#"+e.id):n>1?t.unshift(e.nodeName.toLowerCase()+":eq("+r+")"):t.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return t.slice(1).join(" > ")}t.exports=r},{}],8:[function(e,t,n){function r(e){return{action:e.action,"class":e.className,href:e.href,id:e.id,method:e.method,name:e.name,node_name:e.nodeName,selector:o(e),text:e.text,title:e.title,type:e.type,x_position:e.offsetLeft||e.clientLeft||null,y_position:e.offsetTop||e.clientTop||null}}var o=e("./getDomNodePath");t.exports=r},{"./getDomNodePath":7}],9:[function(e,t,n){function r(){var e,t;if("undefined"==typeof window||!window.screen)return{};e=["height","width","colorDepth","pixelDepth","availHeight","availWidth"],t={};for(var n=0;n<e.length;n++)t[e[n]]=window.screen[e[n]]?window.screen[e[n]]:null;return t.orientation={angle:window.screen.orientation?window.screen.orientation.angle:0,type:window.innerWidth>window.innerHeight?"landscape":"portrait"},t}t.exports=r},{}],10:[function(e,t,n){function r(e){var t="object"==typeof e?e:{},n=a({pixel:0,pixel_max:0,ratio:null,ratio_max:null},t);return(void 0!==typeof window||void 0!==typeof document)&&(n.pixel=i()+s(),n.pixel>n.pixel_max&&(n.pixel_max=n.pixel),n.ratio=parseFloat(Number(n.pixel/o()).toFixed(2)),n.ratio_max=parseFloat(Number(n.pixel_max/o()).toFixed(2))),n}function o(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)||null}function i(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function s(){return window.innerHeight||document.documentElement.clientHeight}var a=e("../utils/extend");t.exports=r},{"../utils/extend":19}],11:[function(e,t,n){function r(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return e.replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}t.exports=r},{}],12:[function(e,t,n){function r(){var e,t,n;return"undefined"==typeof document?{}:(e=document.body,t=document.documentElement,n={height:"innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,width:"innerWidth"in window?window.innerWidth:document.documentElement.offsetWidth,scrollHeight:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)||null},window.screen&&(n.ratio={height:window.screen.availHeight?parseFloat((window.innerHeight/window.screen.availHeight).toFixed(2)):null,width:window.screen.availWidth?parseFloat((window.innerWidth/window.screen.availWidth).toFixed(2)):null}),n)}t.exports=r},{}],13:[function(e,t,n){var r=e("keen-core"),o=(e("./utils/each"),e("./utils/extend"),e("./utils/queue"));r.helpers=r.helpers||{},r.on("client",function(e){e.extensions={events:[],collections:{}},e.queue=o(),e.queue.on("flush",function(){e.recordDeferredEvents()})}),r.prototype.writeKey=function(e){return arguments.length?(this.config.writeKey=e?String(e):null,this):this.config.writeKey},r.prototype.setGlobalProperties=function(e){return r.log("This method has been deprecated. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events"),e&&"function"==typeof e?(this.config.globalProperties=e,this):void this.emit("error","Invalid value for global properties: "+e)},t.exports=r},{"./utils/each":18,"./utils/extend":19,"./utils/queue":21,"keen-core":26}],14:[function(e,t,n){function r(e,t,n,r){var o,i,s,p,y,b,k;if(o=this.url("events",encodeURIComponent(e)),i={},s=n,k="boolean"==typeof r?r:!0,a.call(this,s)){if(!e||"string"!=typeof e)return void u.call(this,"Collection name must be a string.",s);if(this.config.globalProperties&&(i=this.config.globalProperties(e)),x(i,t),b={},w.getExtendedEventBody(b,this.extensions.events),w.getExtendedEventBody(b,this.extensions.collections[e]),w.getExtendedEventBody(b,[i]),this.emit("recordEvent",e,b),!m.enabled)return u.call(this,"Keen.enabled is set to false.",s),!1;if(p=this.url("events",encodeURIComponent(e),{api_key:this.writeKey(),data:encodeURIComponent(v.encode(JSON.stringify(b))),modified:(new Date).getTime()}),y=p.length<c(),k)switch(this.config.requestType){case"xhr":d.call(this,"POST",o,b,s);break;case"beacon":y?g.call(this,p,s):l.call(this,o,b,"Beacon URL length exceeds current browser limit, and XHR is not supported.",s);break;default:y?h.call(this,p,s):l.call(this,o,b,"JSONp URL length exceeds current browser limit, and XHR is not supported.",s)}else y&&f(p);return n=s=null,this}}function o(e,t){var n,r,o,i=this;return n=this.url("events"),r=t,t=null,a.call(this,r)?"object"!=typeof e||e instanceof Array?void u.call(this,"First argument must be an object",r):arguments.length>2?void u.call(this,"Incorrect arguments provided to #recordEvents method",r):(this.config.globalProperties&&y(e,function(t,n){y(t,function(t,r){var o=i.config.globalProperties(n);e[n][r]=x(o,t)})}),o={},y(e,function(e,t){o[t]=o[t]||[],y(e,function(e,n){var r={};w.getExtendedEventBody(r,i.extensions.events),w.getExtendedEventBody(r,i.extensions.collections[t]),w.getExtendedEventBody(r,[e]),o[t].push(r)})}),this.emit("recordEvents",o),m.enabled?(p()&&d.call(this,"POST",n,o,r),t=r=null,this):(u.call(this,"Keen.enabled is set to false.",r),!1)):void 0}function i(){this.emit("error","This method has been deprecated. Check out #recordEvent: https://github.com/keen/keen-tracking.js#record-a-single-event"),r.apply(this,arguments)}function s(){this.emit("error","This method has been deprecated. Check out #recordEvents: https://github.com/keen/keen-tracking.js#record-multiple-events"),o.apply(this,arguments)}function a(e){var t=e;return e=null,this.projectId()?this.writeKey()?!0:(u.call(this,"Keen.Client is missing a writeKey property.",t),!1):(u.call(this,"Keen.Client is missing a projectId property.",t),!1)}function u(e,t){var n="Event(s) not recorded: "+e;this.emit("error",n),t&&(t.call(this,n,null),t=null)}function c(){return"undefined"!=typeof window&&navigator&&(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)?2e3:16e3}function l(e,t,n,r){p()?d.call(this,"POST",e,t,r):u.call(this,n)}function d(e,t,n,r){var o,i=this,s=p(),a=r;r=null,s.onreadystatechange=function(){var e;if(4==s.readyState)if(s.status>=200&&s.status<300){try{e=JSON.parse(s.responseText)}catch(t){m.emit("error","Could not parse HTTP response: "+s.responseText),a&&a.call(i,s,null)}a&&e&&a.call(i,null,e)}else m.emit("error","HTTP request failed."),a&&a.call(i,s,null)},s.open(e,t,!0),s.setRequestHeader("Authorization",i.writeKey()),s.setRequestHeader("Content-Type","application/json"),n&&(o=JSON.stringify(n)),"GET"===e.toUpperCase()&&s.send(),"POST"===e.toUpperCase()&&s.send(o)}function f(e){var t=p();t&&(t.open("GET",e,!1),t.send(null))}function p(){var e="undefined"==typeof window?this:window;if(e.XMLHttpRequest&&("file:"!=e.location.protocol||!e.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function h(e,t){function n(){i&&i.call(o,"An error occurred!",null)}function r(){window[c]=void 0;try{delete window[c]}catch(e){}u.removeChild(a)}var o=this,i=t,s=(new Date).getTime(),a=document.createElement("script"),u=document.getElementsByTagName("head")[0],c="keenJSONPCallback",l=!1;for(t=null,c+=s;c in window;)c+="a";window[c]=function(e){l!==!0&&(l=!0,i&&i.call(o,null,e),r())},a.src=e+"&jsonp="+c,u.appendChild(a),a.onreadystatechange=function(){l===!1&&"loaded"===this.readyState&&(l=!0,n(),r())},a.onerror=function(){l===!1&&(l=!0,n(),r())}}function g(e,t){var n=this,r=t,o=document.createElement("img"),i=!1;t=null,o.onload=function(){if(i=!0,"naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();r&&r.call(n)},o.onerror=function(){i=!0,r&&r.call(n,"An error occurred!",null)},o.src=e+"&c=clv1"}var m=e("./index"),v=e("./utils/base64"),y=e("./utils/each"),x=e("./utils/extend"),w=e("./extend-events");t.exports={recordEvent:r,recordEvents:o,addEvent:i,addEvents:s}},{"./extend-events":4,"./index":13,"./utils/base64":15,"./utils/each":18,"./utils/extend":19}],15:[function(e,t,n){t.exports=e("keen-core/lib/utils/base64")},{"keen-core/lib/utils/base64":27}],16:[function(e,t,n){function r(e){return arguments.length?this instanceof r==!1?new r(e):(this.config={key:e,options:{expires:365}},this.data=this.get(),this):void 0}var o=e("js-cookie"),i=e("./extend");t.exports=r,r.prototype.get=function(e){var t={};return o.get(this.config.key)&&(t=o.getJSON(this.config.key)),e&&"object"==typeof t&&null!==typeof t?"undefined"!=typeof t[e]?t[e]:null:t},r.prototype.set=function(e,t){return arguments.length&&this.enabled()?("string"==typeof e&&2===arguments.length?this.data[e]=t?t:null:"object"==typeof e&&1===arguments.length&&i(this.data,e),o.set(this.config.key,this.data,this.config.options),this):this},r.prototype.expire=function(e){return e?o.set(this.config.key,this.data,i(this.config.options,{expires:e})):(o.remove(this.config.key),this.data={}),this},r.prototype.options=function(e){return arguments.length?(this.config.options="object"==typeof e?e:{},this):this.config.options},r.prototype.enabled=function(){return navigator.cookieEnabled}},{"./extend":19,"js-cookie":25}],17:[function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++)if(e instanceof Array&&arguments[t]instanceof Array)for(var n=0;n<arguments[t].length;n++)e.indexOf(arguments[t][n])<0&&e.push(arguments[t][n]);else for(var i in arguments[t])"undefined"!=typeof e[i]&&"object"==typeof arguments[t][i]&&null!==arguments[t][i]?r(e[i],o(arguments[t][i])):void 0!==arguments[t][i]&&(e[i]=o(arguments[t][i]));return e}function o(e){return JSON.parse(JSON.stringify(e))}t.exports=r},{}],18:[function(e,t,n){t.exports=e("keen-core/lib/utils/each")},{"keen-core/lib/utils/each":28}],19:[function(e,t,n){t.exports=e("keen-core/lib/utils/extend")},{"keen-core/lib/utils/extend":29}],20:[function(e,t,n){function r(e,t){document.addEventListener?document.addEventListener(e,t,!1):document.attachEvent("on"+e,t)}function o(e,t){for(var n=(e.parentNode||document).querySelectorAll(t)||[],r=n.length;r--;)if(n[r]==e)return!0;return!1}function i(e,t,n){var r,o,i=500;return void 0!==t.getAttribute?r=t.getAttribute("target"):t.target&&(r=t.target),o=n(e),"boolean"==typeof o&&o===!1||e.defaultPrevented||e.returnValue===!1?(e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1):("_blank"===r||"blank"===r||e.metaKey||(e.preventDefault&&e.preventDefault(),e.returnValue=!1,setTimeout(function(){window.location=t.href},i)),!1)}function s(e,t,n){var r=500,o=n(e);return"boolean"==typeof o&&o===!1||e.defaultPrevented||e.returnValue===!1?(e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1):(e.preventDefault&&e.preventDefault(),e.returnValue=!1,setTimeout(function(){t.submit()},r),!1)}var a=(e("component-emitter"),e("./each"));t.exports=function(e){function t(e){return e?this instanceof t==!1?new t(e):(this.selector=e,this):void 0}function n(t){return function(n){var r,u;r=n||window.event,u=r.target||r.srcElement,"undefined"!==e.domListeners[t]&&a(e.domListeners[t],function(e,n){o(u,n)?a(e,function(e,n){"click"===t&&"A"===u.nodeName?i(r,u,e):"submit"===t&&"FORM"===u.nodeName?s(r,u,e):e(r)}):"window"===n&&a(e,function(e,t){e(r)})})}}return e.domListeners=e.domListeners||{},t.prototype.on=function(t,o){var i=this;return 2!==arguments.length||"string"!=typeof t||"function"!=typeof o?this:("undefined"==typeof e.domListeners[t]&&(r(t,n(t)),e.domListeners[t]={}),e.domListeners[t][i.selector]=e.domListeners[t][i.selector]||[],e.domListeners[t][i.selector].push(o),i)},t.prototype.once=function(e,t){function n(){return r.off(e,n),t.apply(r,arguments)}var r=this;return n.fn=t,r.on(e,n),r},t.prototype.off=function(t,n){var r=this,o=[];if(2===arguments.length)a(e.domListeners[t][r.selector],function(e,t){e!==n&&e.fn!==n&&o.push(e)}),e.domListeners[t][r.selector]=o;else if(1===arguments.length)try{delete e.domListeners[t][r.selector]}catch(i){e.domListeners[t][r.selector]=[]}else a(e.domListeners,function(t,n){try{delete e.domListeners[n][r.selector]}catch(o){e.domListeners[n][r.selector]=function(){}}});return r},t}},{"./each":18,"component-emitter":24}],21:[function(e,t,n){function r(){return this instanceof r==!1?new r:(this.capacity=0,this.config={capacity:5e3,interval:15},this.events={},this.interval=0,this.timer=null,this)}function o(e){return e.capacity>0&&e.interval>=e.config.interval?!0:e.capacity>=e.config.capacity?!0:!1}var i=e("component-emitter");i(r.prototype),r.prototype.check=function(){return o(this)&&this.flush(),(0===this.config.interval||0===this.capacity)&&this.pause(),this},r.prototype.flush=function(){return this.emit("flush"),this.interval=0,this},r.prototype.pause=function(){return this.timer&&(clearInterval(this.timer),this.timer=null),this},r.prototype.start=function(){var e=this;return e.pause(),e.timer=setInterval(function(){e.interval++,e.check()},1e3),e},t.exports=r},{"component-emitter":24}],22:[function(e,t,n){function r(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",r=t.serializer||(t.hash?s:a),o=e&&e.elements?e.elements:[],i=Object.create(null),l=0;l<o.length;++l){var d=o[l];if(!(t.ignoreTypes&&t.ignoreTypes.indexOf(d.type)>-1)&&(t.disabled||!d.disabled)&&d.name&&c.test(d.nodeName)&&!u.test(d.type)){var f=d.name,p=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(p=void 0),t.empty){if("checkbox"!==d.type||d.checked||(p=""),"radio"===d.type&&(i[d.name]||d.checked?d.checked&&(i[d.name]=!0):i[d.name]=!1),void 0==p&&"radio"==d.type)continue}else if(!p)continue;if("select-multiple"!==d.type)n=r(n,f,p);else{p=[];for(var h=d.options,g=!1,m=0;m<h.length;++m){var v=h[m],y=t.empty&&!v.value,x=v.value||y;v.selected&&x&&(g=!0,n=t.hash&&"[]"!==f.slice(f.length-2)?r(n,f+"[]",v.value):r(n,f,v.value))}!g&&t.empty&&(n=r(n,f,""))}}}if(t.empty)for(var f in i)i[f]||(n=r(n,f,""));return n}function o(e){var t=[],n=/^([^\[\]]*)/,r=new RegExp(l),o=n.exec(e);for(o[1]&&t.push(o[1]);null!==(o=r.exec(e));)t.push(o[1]);return t}function i(e,t,n){if(0===t.length)return e=n;var r=t.shift(),o=r.match(/^\[(.+?)\]$/);if("[]"===r)return e=e||[],Array.isArray(e)?e.push(i(null,t,n)):(e._values=e._values||[],e._values.push(i(null,t,n))),e;if(o){var s=o[1],a=+s;isNaN(a)?(e=e||{},e[s]=i(e[s],t,n)):(e=e||[],e[a]=i(e[a],t,n))}else e[r]=i(e[r],t,n);return e}function s(e,t,n){var r=t.match(l);if(r){var s=o(t);i(e,s,n)}else{var a=e[t];a?(Array.isArray(a)||(e[t]=[a]),e[t].push(n)):e[t]=n}return e}function a(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=encodeURIComponent(n),n=n.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}var u=/^(?:submit|button|image|reset|file)$/i,c=/^(?:input|select|textarea|keygen)/i,l=/(\[[^\[\]]*\])/g;t.exports=r},{}],23:[function(e,t,n){function r(e){return this instanceof r==!1?new r(e):(this.count=e||0,this)}t.exports=r,r.prototype.start=function(){var e=this;return this.pause(),this.interval=setInterval(function(){e.count++},1e3),this},r.prototype.pause=function(){return clearInterval(this.interval),this},r.prototype.value=function(){return this.count},r.prototype.clear=function(){return this.count=0,this}},{}],24:[function(e,t,n){function r(e){return e?o(e):void 0}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}"undefined"!=typeof t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,o=n.length;o>r;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],25:[function(e,t,n){!function(e){if("object"==typeof n)t.exports=e();else{var r=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=r,o}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,o,i){var s;if(arguments.length>1){if(i=e({path:"/"},r.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(u){}return o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}t||(s={});for(var c=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var f=c[d].split("="),p=f[0].replace(l,decodeURIComponent),h=f.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{if(h=n.read?n.read(h,p):n(h,p)||h.replace(l,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(u){}if(t===p){s=h;break}t||(s[p]=h)}catch(u){}}return s}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},{}],26:[function(e,t,n){(function(n){(function(n){function r(e){return this instanceof r==!1?new r(e):(this.configure(e),r.debug&&this.on("error",r.log),this.emit("ready"),void r.emit("client",this))}function o(e){return r.loaded||"undefined"==typeof document?void e():(null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),document.readyState="complete"},!1),document.readyState="loading"),void i(e))}function i(e){/in/.test(document.readyState)?setTimeout(function(){i(e)},9):e()}function s(e){return"undefined"!=typeof e}var a=n.Keen||void 0,u=e("./utils/each"),c=e("./utils/extend"),l=e("./utils/parse-params"),d=e("./utils/serialize"),f=e("component-emitter");a&&"undefined"==typeof a.resources&&(r.legacyVersion=a),f(r),f(r.prototype),c(r,{debug:!1,enabled:!0,loaded:!1,version:"1.4.0"}),r.helpers=r.helpers||{},r.resources=r.resources||{},c(r.resources,{base:"{protocol}://{host}",version:"{protocol}://{host}/3.0",projects:"{protocol}://{host}/3.0/projects",projectId:"{protocol}://{host}/3.0/projects/{projectId}",events:"{protocol}://{host}/3.0/projects/{projectId}/events",queries:"{protocol}://{host}/3.0/projects/{projectId}/queries"}),r.utils=r.utils||{},c(r.utils,{each:u,extend:c,parseParams:l,serialize:d}),r.extendLibrary=function(e,t){var n=a||t;return s(n)&&s(n.resources)&&(u(n,function(t,n){"object"==typeof t?(e[n]=e[n]||{},c(e[n],t)):e[n]=e[n]||t}),c(e.prototype,n.prototype)),e},r.log=function(e){r.debug&&"object"==typeof console&&console.log("[Keen]",e)},r.noConflict=function(){return"undefined"!=typeof n.Keen&&(n.Keen=r.legacyVersion||a),r},r.ready=function(e){r.loaded?e():r.once("ready",e)},r.prototype.configure=function(e){var t=e||{};return this.config=this.config||{projectId:void 0,writeKey:void 0,host:"api.keen.io",protocol:"https",requestType:"jsonp",resources:c({},r.resources)},"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1&&(t.protocol=document.location.protocol.replace(":","")),t.host&&t.host.replace(/.*?:\/\//g,""),c(this.config,t),this},r.prototype.masterKey=function(e){return arguments.length?(this.config.masterKey=e?String(e):null,this):this.config.masterKey},r.prototype.projectId=function(e){return arguments.length?(this.config.projectId=e?String(e):null,this):this.config.projectId},r.prototype.resources=function(e){if(!arguments.length)return this.config.resources;var t=this;return"object"==typeof e&&u(e,function(e,n){t.config.resources[n]=e?e:null}),t},r.prototype.url=function(e){var t,n=Array.prototype.slice.call(arguments,1),r=this.config.resources.base||"{protocol}://{host}";return t=e&&"string"==typeof e?this.config.resources[e]?this.config.resources[e]:r+e:r,u(this.config,function(e,n){"object"!=typeof e&&(t=t.replace("{"+n+"}",e))}),u(n,function(e,n){"string"==typeof e?t+="/"+e:"object"==typeof e&&(t+="?",u(e,function(e,n){t+=n+"="+e+"&"}),t=t.slice(0,-1))}),t},o(function(){r.loaded=!0,r.emit("ready")}),t.exports=r}).call(this,"undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils/each":28,"./utils/extend":29,"./utils/parse-params":30,"./utils/serialize":31,"component-emitter":24}],27:[function(e,t,n){t.exports={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){"use strict";var t,n,r,o,i,s,a,u="",c=0,l=this.map;for(e=this.utf8.encode(e);c<e.length;)t=e.charCodeAt(c++),n=e.charCodeAt(c++),r=e.charCodeAt(c++),o=t>>2,i=(3&t)<<4|n>>4,s=isNaN(n)?64:(15&n)<<2|r>>6,a=isNaN(n)||isNaN(r)?64:63&r,u=u+l.charAt(o)+l.charAt(i)+l.charAt(s)+l.charAt(a);return u},decode:function(e){"use strict";var t,n,r,o,i,s,a,u="",c=0,l=this.map,d=String.fromCharCode;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=l.indexOf(e.charAt(c++)),n=l.indexOf(e.charAt(c++)),r=l.indexOf(e.charAt(c++)),o=l.indexOf(e.charAt(c++)),i=t<<2|n>>4,s=(15&n)<<4|r>>2,a=(3&r)<<6|o,u=u+(d(i)+(64!=r?d(s):""))+(64!=o?d(a):"");return this.utf8.decode(u)},utf8:{encode:function(e){"use strict";for(var t,n="",r=0,o=String.fromCharCode;r<e.length;)t=e.charCodeAt(r++),n+=128>t?o(t):t>127&&2048>t?o(t>>6|192)+o(63&t|128):o(t>>12|224)+o(t>>6&63|128)+o(63&t|128);return n},decode:function(e){"use strict";for(var t,n,r="",o=0,i=String.fromCharCode;o<e.length;)n=e.charCodeAt(o),r+=128>n?[i(n),o++][0]:n>191&&224>n?[i((31&n)<<6|63&(t=e.charCodeAt(o+1))),o+=2][0]:[i((15&n)<<12|(63&(t=e.charCodeAt(o+1)))<<6|63&(c3=e.charCodeAt(o+2))),o+=3][0];return r}}}},{}],28:[function(e,t,n){function r(e,t,n){var r;if(!e)return 0;if(n=n?n:e,e instanceof Array){
for(r=0;r<e.length;r++)if(t.call(n,e[r],r,e)===!1)return 0}else for(r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e)===!1)return 0;return 1}t.exports=r},{}],29:[function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e}t.exports=r},{}],30:[function(e,t,n){function r(e){for(var t,n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},s=e.split("?")[1];t=o.exec(s);)n[i(t[1])]=i(t[2]);return n}t.exports=r},{}],31:[function(e,t,n){function r(e){var t=[];return o(e,function(e,n){"string"!=typeof e&&(e=JSON.stringify(e)),t.push(n+"="+encodeURIComponent(e))}),t.join("&")}var o=e("./each");e("./extend");t.exports=r},{"./each":28,"./extend":29}],32:[function(e,t,n){t.exports={name:"keen-tracking",version:"1.4.0",description:"Data Collection SDK for Keen IO",main:"lib/server.js",browser:"lib/browser.js",repository:{type:"git",url:"https://github.com/keen/keen-tracking.js.git"},scripts:{start:"gulp with-tests",test:"gulp test:cli"},bugs:"https://github.com/keen/keen-tracking.js/issues",author:"Dustin Larimer <dustin@keen.io> (https://keen.io/)",contributors:["Dustin Larimer <dustin@keen.io> (https://github.com/dustinlarimer)","Eric Anderson <eric@keen.io> (https://github.com/aroc)","Joe Wegner <joe@keen.io> (http://www.wegnerdesign.com)","Alex Kleissner <alex@keen.io> (https://github.com/hex337)"],license:"MIT",dependencies:{"component-emitter":"^1.2.0","js-cookie":"2.1.0","keen-core":"^0.1.3"},devDependencies:{browserify:"^9.0.8",chai:"^2.3.0","chai-spies":"^0.6.0",del:"^1.1.1",gulp:"^3.8.11","gulp-awspublish":"0.0.23","gulp-connect":"^2.2.0","gulp-derequire":"^2.1.0","gulp-mocha":"^2.0.1","gulp-mocha-phantomjs":"^0.6.1","gulp-remove-empty-lines":"0.0.2","gulp-rename":"^1.2.2","gulp-replace":"^0.5.3","gulp-sourcemaps":"^1.5.2","gulp-strip-comments":"^1.0.1","gulp-uglify":"^1.5.2","gulp-util":"^3.0.4","gulp-yuicompressor":"0.0.3",karma:"^1.7.1","karma-chrome-launcher":"^0.1.12","karma-firefox-launcher":"^0.1.6","karma-mocha":"^0.2.0","karma-nyan-reporter":"0.0.60","karma-requirejs":"^0.2.2","karma-safari-launcher":"^0.1.1","karma-sauce-launcher":"^0.2.11",mocha:"^2.2.5",moment:"^2.10.3",phantomjs:"^1.9.7-15",proclaim:"^3.3.0",requirejs:"^2.3.5","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"}}},{}]},{},[1]);