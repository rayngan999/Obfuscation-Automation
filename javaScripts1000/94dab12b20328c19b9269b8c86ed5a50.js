define("components/headerWeather",["FR","jquery","underscore","progressbar","services/freerideRestApi"],function(e,t,a,n,r){var o={newWeatherIcon:"",weatherData:{}},i={cloudy:"cloudy","partly-cloudy-day":"partly-sunny",rain:"rain",sleet:"snow-mix-light",snow:"snowflake","clear-day":"sunny",wind:"windy",fog:"fog","clear-night":"clear-night","partly-cloudy-night":"partly-cloudy-night",default:""},h="Â°F",_="Â°C",l="",d=function(){o.forecastMobile=t(".header_weather__forecast_mobile"),o.snowInsertMobile=t(".header_weather__snow_mobile"),o.liftStatusInsertMobile=t(".header_weather__lift_status_mobile"),o.forecastIcon=t(".header_weather__forecast_icon"),o.tempUnit=t(".header_weather__tempunit"),o.circle=t(".header_weather__circle"),o.mobileWeatherLink=t("#header_weather__mobile"),o.fahrenheitBtn=t(".header_weather__measurement--fahrenheit"),o.celsiusBtn=t(".header_weather__measurement--celsius"),o.measurement=t(".header_weather__measurement"),o.mobileWrapper=t(".header_weather__mobile_wrapper")},s=function(){o.desktopDropdownContainer.addClass(o.hiddenSection),o.desktopIconContainer.on("click",function(){o.weatherData.WeatherReportLink&&o.weatherData.WeatherReportLink.Url&&window.open(o.weatherData.WeatherReportLink.Url,"_self")}),o.mobileIconContainer.addClass(o.hiddenSection)},c=function(){if(o.weatherData.WeatherReportLink&&o.weatherData.WeatherReportLink.Url){var e=a.template(o.hamburgerWeatherLink.html());o.hamburgerWeatherInsert.html(e({weather:o.weatherData}))}},w=function(){var e=a.template(o.forecastTemplate.html()),t=a.template(o.snowTemplate.html()),n=a.template(o.liftStatusTemplate.html());o.forecastInsert.html(e({weather:o.weatherData})),!1===o.weatherData.HeaderSettings.ShowSnowReportSection?o.snowInsert.addClass(o.hiddenSection):o.snowInsert.html(t({weather:o.weatherData,snowReport:o.weatherData.SnowReportSections,headerSettings:o.weatherData.HeaderSettings})),!1!==o.weatherData.HeaderSettings.ShowLiftAndTerrainStatusSection&&o.weatherData.CurrentWorkDay?o.liftStatusInsert.html(n({weather:o.weatherData})):o.liftStatusInsert.addClass(o.hiddenSection)},m=function(){o.newWeatherIcon=o.weatherData.WeatherIcon in i?"icon-weather-"+i[o.weatherData.WeatherIcon]:"icon-weather-thermometer",o.iconTempIcon.addClass(o.newWeatherIcon),o.iconTempIcon_mobile.addClass(o.newWeatherIcon),t(".header_weather__forecast__weather i.header_weather__forecast_icon").addClass(o.newWeatherIcon)},p=function(){o.mobileWeatherLink.on("click",function(){var t=function(){var e=a.template(o.mobileTemplate.html()),t=o.weatherData,n=!1===t.HeaderSettings.ShowSnowReportSection?a.template("<span></span>"):a.template(o.snowTemplate.html()),r=!1!==t.HeaderSettings.ShowLiftAndTerrainStatusSection&&t.CurrentWorkDay?a.template(o.liftStatusTemplate.html()):a.template("<span></span>");return e({weatherData:t,forecastTemplate:a.template(o.forecastTemplate.html()),snowTemplate:n,liftStatusTemplate:r})}();e.$el.window.trigger("global-modal-open",[t,"header-weather-modal-opened","header-weather-modal-closed"]),S(),o.forecastIcon.addClass(o.newWeatherIcon),u()}),o.weatherLinkDesktop.on("mouseenter",function(){o.desktopDropdownContainer.trigger("shown"),e.$el.window.trigger("ApplicationDOM_Changed")}),o.weatherLinkMobile.on("click",function(){o.mobileWrapper.trigger("shown"),e.$el.window.trigger("ApplicationDOM_Changed")}),o.weatherLink.on("mouseenter",D),e.$el.window.on("header-weather-modal-opened",function(e){o.mobileModal=t(".header_weather__mobile_section").closest(".global_modal__container"),o.mobileModal.addClass("header_weather__global_modal"),o.forecastIcon=t(".header_weather__forecast_icon"),d(),o.forecastIcon.addClass(o.newWeatherIcon),S(),f()}),e.$el.window.on("header-weather-modal-closed",function(e){o.mobileModal.removeClass("header_weather__global_modal")}),!o.weatherData.HeaderSettings.ShowWeatherIconMenu&&o.weatherData.WeatherReportLink&&o.weatherData.WeatherReportLink.Url&&o.desktopIconContainer.on("click",function(){window.open(o.weatherData.WeatherReportLink.Url,"_self")})},u=function(){!1===o.weatherData.HeaderSettings.ShowSnowReportSection&&o.snowInsertMobile.addClass(o.hiddenSection),!1===o.weatherData.HeaderSettings.ShowLiftAndTerrainStatusSection&&o.liftStatusInsertMobile.addClass(o.hiddenSection)},f=function(){o.measurement.on("click",k)},g=function(){o.measurement.on("click",k),e.$el.window.on("toggle-metric-scale",function(e,t){C(l!==_)})},k=function(a){t(this).hasClass("c126__metricunselected--v1")&&e.$el.window.trigger("toggle-metric-scale")},S=function(){C(1!==o.weatherData.UnitOfMeasure)},C=function(e){l=e?_:h,o.weatherDesktopContainer.toggleClass("header_weather__international",e),void 0!==o.mobileWrapper&&(o.mobileWrapper.toggleClass("header_weather__international",e),o.fahrenheitBtn.toggleClass("c126__metricunselected--v1",e).toggleClass("c126__metricselected--v1",!e),o.celsiusBtn.toggleClass("c126__metricunselected--v1",!e).toggleClass("c126__metricselected--v1",e)),o.tempUnit.html(l),function(e){var t=e?o.weatherData.CurrentTempMetric:o.weatherData.CurrentTempStandard;o.iconTemp.html(t)}(e)},b=function(){o.circle.each(function(e){o.terrainCircle=new n.Circle(this,{trailWidth:10,strokeWidth:10,easing:"easeOut",duration:1600,color:"#4ccb7a"})})},D=function(){o.circle.each(function(){var e=t(this).data();o.terrainCircle.animate(e.open/e.total)})},I=function(){o.navigationIconHidden="header_weather__icon_container--hidden",o.desktopIconContainer=t(".header_weather__icon_container"),o.mobileIconContainer=t(".header_weather__icon_container--mobile"),o.desktopDropdownContainer=t(".main_nav__utility").find(".header_weather__desktop_container"),o.hiddenContainer=t(".header_weather__desktop_container--hidden"),o.hiddenSection="header_weather__hidden_section",o.weatherDesktopContainer=t(".main_nav__utility").find(".header_weather__background_container"),o.weatherLink=t(".main_nav__utility").find(".main_nav__utility_item__wx"),o.weatherLinkDesktop=o.weatherLink.filter(".main_nav__utility_item__wx--desktop"),o.weatherLinkMobile=o.weatherLink.filter(".main_nav__utility_item__wx--mobile"),o.weatherArea=t(".main_nav__utility").find(".nav_weather_search"),o.mobileTemplate=t("#header_weather__mobile_template"),o.desktopTemplate=t("#header_weather__desktop_template"),o.forecastTemplate=t("#header_weather__forecast"),o.forecastInsert=t(".header_weather__forecast"),o.forecastContainer=t(".header_weather__forecast_container"),o.snowTemplate=t("#header_weather__snow"),o.snowInsert=t(".header_weather__snow"),o.iconTemp=t("#header_weather__icon_temp"),o.iconTempUnit=t("#header_weather__icon_temp_unit"),o.iconTempIcon=t(".header_weather__icon_temp_icon"),o.iconTempIcon_mobile=t(".header_weather__icon_temp_icon--mobile"),o.liftStatusTemplate=t("#header_weather__lift_status"),o.liftStatusInsert=t(".header_weather__lift_status"),o.mobileModal=t(".header_weather__mobile_section").closest(".global_modal__container"),o.desktopWeatherLink=t("#header_weather__desktop"),o.hamburgerWeatherLink=t("#header_weather__hamburger"),o.hamburgerWeatherInsert=t(".header_weather__hamburger_insert"),o.tempUnit=t(".header_weather__tempunit"),r.checkWeatherForHeader({},{},function(t){!0===t.success?(o.weatherData=t.data,!0===o.weatherData.HeaderSettings.ShowWeatherWidget&&(!0===o.weatherData.HeaderSettings.ShowWeatherIconMenu?(w(),d(),o.forecastIcon.addClass(o.newWeatherIcon),b(),g(),p()):s(),S(),m(),o.weatherLink.removeClass(o.navigationIconHidden).animate({opacity:"1"},700),c()),window.weather=t.data,e.$el.window.trigger("pageManager_weatherLoaded")):(o.weatherLink.addClass(o.navigationIconHidden),o.desktopDropdownContainer.addClass(o.hiddenSection),console.log("Did not receive weather back from the server."),o.weatherLink.addClass(o.navigationIconHidden),o.desktopDropdownContainer.addClass(o.hiddenSection))})};t(function(){return I()})});
//# sourceMappingURL=headerWeather.js.map
