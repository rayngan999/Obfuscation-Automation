webshop.homepage=webshop.homepage||{};webshop.homepage.RotatingBanner={config:{fadeSpeed:1000,timer:0,selectedClass:'selected'},init:function(){webshop.homepage.RotatingBanner.registerRotatingBannerEvent();fixHeaderForBigScreens();var context=webshop.homepage.RotatingBanner;context.wrapper=jQ('.carousel-inner');context.nav=context.wrapper.find('.carousel-navigation li');context.wrapper.find('.carousel-panels').contents().uncomment();context.images=context.wrapper.find('.carousel-panels li');context.currentImage=context.images.filter(':visible');context.nav.on('mouseenter',function(){context.nav.removeClass(context.config.selectedClass);context.nav.eq(jQ(this).index()).addClass(context.config.selectedClass);context.changePanel(this,jQ(this).index());});context.wrapper.on('mouseenter',function(){context.timer=clearTimeout(context.timer);}).on('mouseleave',function(){context.animateCarousel();});if(webshop.common.Util.isIPad()){webshop.homepage.RotatingBanner.mobileEvents();}
context.animateCarousel();},registerRotatingBannerEvent:function(){webshop.homepage.RotatingBanner.eventSender=new(Backbone.Marionette.Object.extend({initialize:function(){if(!Backbone.Webshop.mixins.isBetaFeatureEnabled("GA_EXTENDED_CAROUSEL_TRACKING")){webshop.gtm.registerEventSource(this);}}}))();},mobileEvents:function(){var context=webshop.homepage.RotatingBanner;context.nav.off('mouseenter');context.nav.on('touchstart',function(e){if(!(jQ(this).hasClass('selected'))){context.nav.removeClass(context.config.selectedClass);context.nav.eq(jQ(this).index()).addClass(context.config.selectedClass);context.changePanel(this,jQ(this).index());e.preventDefault();context.animateCarousel();}});},changePanel:function(e,forceItem){var context=webshop.homepage.RotatingBanner,forced=typeof(forceItem)==='number'?true:false;context.timer=clearTimeout(context.timer);if(forced){context.nextImage=context.images.eq(forceItem);context.currentImage.hide();context.nextImage.show();context.currentImage=context.nextImage;webshop.homepage.RotatingBanner.eventSender.trigger('gtm:uaEvent',{category:'Homepage banner',action:'hover-show',label:jQ(e).find('a').text()});}else{context.currentImage.clearQueue();context.nextImage=context.currentImage.next().length?context.currentImage.next():context.images.eq(0);context.currentImage.fadeOut(context.config.fadeSpeed);context.nextImage.fadeIn(context.config.fadeSpeed,function(){context.currentImage=context.nextImage;if(!forced){context.animateCarousel();}});var nextNavElem=context.nav.eq(context.nextImage.index());context.nav.removeClass(context.config.selectedClass);nextNavElem.addClass(context.config.selectedClass);webshop.homepage.RotatingBanner.eventSender.trigger('gtm:uaEvent',{category:'Homepage banner',action:'timer-show',label:nextNavElem.find('a').text()});}},animateCarousel:function(){webshop.homepage.RotatingBanner.timer=setTimeout(webshop.homepage.RotatingBanner.changePanel,3000);}};function fixHeaderForBigScreens(){if((jQuery(window).height()>600&&jQuery(window).width()>920)){jQuery('body').removeClass('notFixed');}}
webshop.homepage=webshop.homepage||{};webshop.homepage.LoggedOut={init:function(){webshop.catalogue.socialLinks._registerSocialMedia();this.bindGAAttributeToLinks();},bindGAAttributeToLinks:function(){jQ('.section').find('a').each(function(index){var $this=jQ(this),href=webshop.ajax.Util.addNewParameters($this.attr('href'),["fromLoggedOutHome"],["yes"]);$this.attr('href',href);});}};