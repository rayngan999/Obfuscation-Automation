(function(b,r,u){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?module.exports=b(require("jquery")):b(r||u)})(function(b){var r=function(a,d,e){var c={invalid:[],getCaret:function(){try{var h,t=0,f=a.get(0),b=document.selection,d=f.selectionStart;if(b&&-1===navigator.appVersion.indexOf("MSIE 10"))h=b.createRange(),h.moveStart("character",-c.val().length),t=h.text.length;else if(d||"0"===d)t=d;return t}catch(m){}},setCaret:function(h){try{if(a.is(":focus")){var c,f=a.get(0);f.setSelectionRange?f.setSelectionRange(h,h):(c=f.createTextRange(),c.collapse(!0),c.moveEnd("character",h),c.moveStart("character",h),c.select())}}catch(C){}},events:function(){a.on("keydown.mask",function(h){a.data("mask-keycode",h.keyCode||h.which);a.data("mask-previus-value",a.val());a.data("mask-previus-caret-pos",c.getCaret());c.maskDigitPosMapOld=c.maskDigitPosMap}).on(b.jMaskGlobals.useInput?"input.mask":"keyup.mask",c.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){a.keydown().keyup()},100)}).on("change.mask",function(){a.data("changed",!0)}).on("blur.mask",function(){n!==c.val()&&!a.data("changed")&&a.val().length&&a.trigger("change");a.data("changed",!1)}).on("blur.mask",function(){n=c.val()}).on("focus.mask",function(a){!0===e.selectOnFocus&&b(a.target).select()}).on("focusout.mask",function(){e.clearIfNotMatch&&!q.test(c.val())&&c.val("")})},getRegexMask:function(){for(var a=[],c,f,b,e,m=0;m<d.length;m++)(c=g.translation[d.charAt(m)])?(f=c.pattern.toString().replace(/.{1}$|^.{1}/g,""),b=c.optional,(c=c.recursive)?(a.push(d.charAt(m)),e={digit:d.charAt(m),pattern:f}):a.push(b||c?f+"?":f)):a.push(d.charAt(m).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26"));a=a.join("");e&&(a=a.replace(new RegExp("("+e.digit+"(.*"+e.digit+")?)"),"($1)?").replace(new RegExp(e.digit,"g"),e.pattern));return new RegExp(a)},destroyEvents:function(){a.off("input keydown keyup paste drop blur focusout change focus ".split(" ").join(".mask "))},val:function(c){var b=a.is("input")?"val":"text";if(0<arguments.length){if(a[b]()!==c)a[b](c);b=a}else b=a[b]();return b},calculateCaretPosition:function(){var b=a.data("mask-previus-value")||"",d=c.getMasked(),f=c.getCaret();if(b!==d){var e=a.data("mask-previus-caret-pos")||0,d=d.length,g=b.length,m=b=0,p=0,z=0,k;for(k=f;k<d&&c.maskDigitPosMap[k];k++)m++;for(k=f-1;0<=k&&c.maskDigitPosMap[k];k--)b++;for(k=f-1;0<=k;k--)c.maskDigitPosMap[k]&&p++;for(k=e-1;0<=k;k--)c.maskDigitPosMapOld[k]&&z++;f>g?f=10*d:e>=f&&e!==g?c.maskDigitPosMapOld[f]||(e=f,f=f-(z-p)-b,c.maskDigitPosMap[f]&&(f=e)):f>e&&(f=f+(p-z)+m)}return f},behaviour:function(d){d=d||window.event;c.invalid=[];var e=a.data("mask-keycode");if(-1===b.inArray(e,g.byPassKeys)){var e=c.getMasked(),f=c.getCaret();setTimeout(function(){c.setCaret(c.calculateCaretPosition())},10);c.val(e);c.setCaret(f);return c.callbacks(d)}},getMasked:function(a,b){var f=[],h=void 0===b?c.val():b+"",l=0,m=d.length,p=0,t=h.length,k=1,q="push",n=-1,r=0;b=[];var w,u;e.reverse?(q="unshift",k=-1,w=0,l=m-1,p=t-1,u=function(){return-1<l&&-1<p}):(w=m-1,u=function(){return l<m&&p<t});for(var A;u();){var y=d.charAt(l),x=h.charAt(p),v=g.translation[y];if(v)x.match(v.pattern)?(f[q](x),v.recursive&&(-1===n?n=l:l===w&&(l=n-k),w===n&&(l-=k)),l+=k):x===A?(r--,A=void 0):v.optional?(l+=k,p-=k):v.fallback?(f[q](v.fallback),l+=k,p-=k):c.invalid.push({p:p,v:x,e:v.pattern}),p+=k;else{if(!a)f[q](y);x===y?(b.push(p),p+=k):(A=y,b.push(p+r),r++);l+=k}}a=d.charAt(w);m!==t+1||g.translation[a]||f.push(a);f=f.join("");c.mapMaskdigitPositions(f,b,t);return f},mapMaskdigitPositions:function(a,b,d){a=e.reverse?a.length-d:0;c.maskDigitPosMap={};for(d=0;d<b.length;d++)c.maskDigitPosMap[b[d]+a]=1},callbacks:function(b){var h=c.val(),f=h!==n,g=[h,b,a,e],l=function(a,b,c){"function"===typeof e[a]&&b&&e[a].apply(this,c)};l("onChange",!0===f,g);l("onKeyPress",!0===f,g);l("onComplete",h.length===d.length,g);l("onInvalid",0<c.invalid.length,[h,b,a,c.invalid,e])}};a=b(a);var g=this,n=c.val(),q;d="function"===typeof d?d(c.val(),void 0,a,e):d;g.mask=d;g.options=e;g.remove=function(){var b=c.getCaret();c.destroyEvents();c.val(g.getCleanVal());c.setCaret(b);return a};g.getCleanVal=function(){return c.getMasked(!0)};g.getMaskedVal=function(a){return c.getMasked(!1,a)};g.init=function(h){h=h||!1;e=e||{};g.clearIfNotMatch=b.jMaskGlobals.clearIfNotMatch;g.byPassKeys=b.jMaskGlobals.byPassKeys;g.translation=b.extend({},b.jMaskGlobals.translation,e.translation);g=b.extend(!0,{},g,e);q=c.getRegexMask();if(h)c.events(),c.val(c.getMasked());else{e.placeholder&&a.attr("placeholder",e.placeholder);a.data("mask")&&a.attr("autocomplete","off");h=0;for(var n=!0;h<d.length;h++){var f=g.translation[d.charAt(h)];if(f&&f.recursive){n=!1;break}}n&&a.attr("maxlength",d.length);c.destroyEvents();c.events();h=c.getCaret();c.val(c.getMasked());c.setCaret(h)}};g.init(!a.is("input"))};b.maskWatchers={};var u=function(){var a=b(this),d={},e=a.attr("data-mask");a.attr("data-mask-reverse")&&(d.reverse=!0);a.attr("data-mask-clearifnotmatch")&&(d.clearIfNotMatch=!0);"true"===a.attr("data-mask-selectonfocus")&&(d.selectOnFocus=!0);if(B(a,e,d))return a.data("mask",new r(this,e,d))},B=function(a,d,e){e=e||{};var c=b(a).data("mask"),g=JSON.stringify;a=b(a).val()||b(a).text();try{return"function"===typeof d&&(d=d(a)),"object"!==typeof c||g(c.options)!==g(e)||c.mask!==d}catch(n){}},q=function(a){var b=document.createElement("div"),e;a="on"+a;e=a in b;e||(b.setAttribute(a,"return;"),e="function"===typeof b[a]);return e};b.fn.mask=function(a,d){d=d||{};var e=this.selector,c=b.jMaskGlobals,g=c.watchInterval,c=d.watchInputs||c.watchInputs,n=function(){if(B(this,a,d))return b(this).data("mask",new r(this,a,d))};b(this).each(n);e&&""!==e&&c&&(clearInterval(b.maskWatchers[e]),b.maskWatchers[e]=setInterval(function(){b(document).find(e).each(n)},g));return this};b.fn.masked=function(a){return this.data("mask").getMaskedVal(a)};b.fn.unmask=function(){clearInterval(b.maskWatchers[this.selector]);delete b.maskWatchers[this.selector];return this.each(function(){var a=b(this).data("mask");a&&a.remove().removeData("mask")})};b.fn.cleanVal=function(){return this.data("mask").getCleanVal()};b.applyDataMask=function(a){a=a||b.jMaskGlobals.maskElements;(a instanceof b?a:b(a)).filter(b.jMaskGlobals.dataMaskAttr).each(u)};q={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&q("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};b.jMaskGlobals=b.jMaskGlobals||{};q=b.jMaskGlobals=b.extend(!0,{},q,b.jMaskGlobals);q.dataMask&&b.applyDataMask();setInterval(function(){b.jMaskGlobals.watchDataMask&&b.applyDataMask()},q.watchInterval)},window.jQuery,window.Zepto);