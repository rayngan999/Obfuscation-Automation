(function(){var k;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function ca(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var da=ca(this);function l(a,b){if(b)a:{var c=da;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}}
l("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.fB=f;ba(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.fB};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});l("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=da[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ba(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ea(aa(this))}})}return a});function ea(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function fa(a){if(!(a instanceof Array)){a=q(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ha="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ia;if("function"==typeof Object.setPrototypeOf)ia=Object.setPrototypeOf;else{var ja;a:{var ka={a:!0},ma={};try{ma.__proto__=ka;ja=ma.a;break a}catch(a){}ja=!1}ia=ja?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var oa=ia;function r(a,b){a.prototype=ha(b.prototype);a.prototype.constructor=a;if(oa)oa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.zJ=b.prototype}function pa(){this.Hm=!1;this.Ki=null;this.wd=void 0;this.ia=1;this.ox=this.Rl=0;this.Pi=null}function qa(a){if(a.Hm)throw new TypeError("Generator is already running");a.Hm=!0}pa.prototype.Rm=function(a){this.wd=a};pa.prototype.Nn=function(a){this.Pi={ix:a,fD:!0};this.ia=this.Rl||this.ox};pa.prototype.return=function(a){this.Pi={return:a};this.ia=this.ox};function ra(a,b,c){a.ia=c;return{value:b}}function sa(a){a.Rl=0;var b=a.Pi.ix;a.Pi=null;return b}function ta(a){this.Za=new pa;this.RD=a}ta.prototype.Rm=function(a){qa(this.Za);if(this.Za.Ki)return ua(this,this.Za.Ki.next,a,this.Za.Rm);this.Za.Rm(a);return va(this)};function xa(a,b){qa(a.Za);var c=a.Za.Ki;if(c)return ua(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.Za.return);a.Za.return(b);return va(a)}ta.prototype.Nn=function(a){qa(this.Za);if(this.Za.Ki)return ua(this,this.Za.Ki["throw"],a,this.Za.Rm);this.Za.Nn(a);return va(this)};function ua(a,b,c,d){try{var e=b.call(a.Za.Ki,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.Za.Hm=!1,e;var f=e.value}catch(g){return a.Za.Ki=null,a.Za.Nn(g),va(a)}a.Za.Ki=null;d.call(a.Za,f);return va(a)}
function va(a){for(;a.Za.ia;)try{var b=a.RD(a.Za);if(b)return a.Za.Hm=!1,{value:b.value,done:!1}}catch(c){a.Za.wd=void 0,a.Za.Nn(c)}a.Za.Hm=!1;if(a.Za.Pi){b=a.Za.Pi;a.Za.Pi=null;if(b.fD)throw b.ix;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function ya(a){this.next=function(b){return a.Rm(b)};this.throw=function(b){return a.Nn(b)};this.return=function(b){return xa(a,b)};this[Symbol.iterator]=function(){return this}}
function za(a,b){b=new ya(new ta(b));oa&&a.prototype&&oa(b,a.prototype);return b}
l("Promise",function(a){function b(g){this.rl=0;this.kn=void 0;this.Wk=[];this.sy=!1;var h=this.es();try{g(h.resolve,h.reject)}catch(m){h.reject(m)}}function c(){this.Jh=null}function d(g){return g instanceof b?g:new b(function(h){h(g)})}if(a)return a;c.prototype.Tv=function(g){if(null==this.Jh){this.Jh=[];var h=this;this.Uv(function(){h.mC()})}this.Jh.push(g)};var e=da.setTimeout;c.prototype.Uv=function(g){e(g,0)};c.prototype.mC=function(){for(;this.Jh&&this.Jh.length;){var g=this.Jh;this.Jh=[];for(var h=0;h<g.length;++h){var m=g[h];g[h]=null;try{m()}catch(n){this.uB(n)}}}this.Jh=null};c.prototype.uB=function(g){this.Uv(function(){throw g;})};b.prototype.es=function(){function g(n){return function(p){m||(m=!0,n.call(h,p))}}var h=this,m=!1;return{resolve:g(this.cE),reject:g(this.xu)}};b.prototype.cE=function(g){if(g===this)this.xu(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.vE(g);else{a:switch(typeof g){case "object":var h=null!=g;break a;case "function":h=!0;break a;default:h=!1}h?this.bE(g):this.yx(g)}};b.prototype.bE=function(g){var h=void 0;try{h=g.then}catch(m){this.xu(m);return}"function"==typeof h?this.wE(h,g):this.yx(g)};b.prototype.xu=function(g){this.iA(2,g)};b.prototype.yx=function(g){this.iA(1,g)};b.prototype.iA=function(g,h){if(0!=this.rl)throw Error("Cannot settle("+g+", "+h+"): Promise already settled in state"+this.rl);this.rl=g;this.kn=h;2===this.rl&&this.oE();this.nC()};b.prototype.oE=function(){var g=this;e(function(){if(g.CD()){var h=da.console;"undefined"!==typeof h&&h.error(g.kn)}},1)};b.prototype.CD=function(){if(this.sy)return!1;var g=da.CustomEvent,h=da.Event,m=da.dispatchEvent;if("undefined"===typeof m)return!0;"function"===typeof g?g=new g("unhandledrejection",{cancelable:!0}):"function"===typeof h?g=new h("unhandledrejection",{cancelable:!0}):(g=da.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g));g.promise=this;g.reason=this.kn;return m(g)};b.prototype.nC=function(){if(null!=this.Wk){for(var g=0;g<this.Wk.length;++g)f.Tv(this.Wk[g]);this.Wk=null}};var f=new c;b.prototype.vE=function(g){var h=this.es();g.uo(h.resolve,h.reject)};b.prototype.wE=function(g,h){var m=this.es();try{g.call(h,m.resolve,m.reject)}catch(n){m.reject(n)}};b.prototype.then=function(g,h){function m(z,D){return"function"==typeof z?function(la){try{n(z(la))}catch(Q){p(Q)}}:D}var n,p,A=new b(function(z,D){n=z;p=D});this.uo(m(g,n),m(h,p));return A};b.prototype.catch=function(g){return this.then(void 0,g)};b.prototype.uo=function(g,h){function m(){switch(n.rl){case 1:g(n.kn);break;case 2:h(n.kn);break;default:throw Error("Unexpected state: "+n.rl);}}var n=this;null==this.Wk?f.Tv(m):this.Wk.push(m);this.sy=!0};b.resolve=d;b.reject=function(g){return new b(function(h,m){m(g)})};b.race=function(g){return new b(function(h,m){for(var n=q(g),p=n.next();!p.done;p=n.next())d(p.value).uo(h,m)})};b.all=function(g){var h=q(g),m=h.next();return m.done?d([]):new b(function(n,p){function A(la){return function(Q){z[la]=Q;D--;0==D&&n(z)}}var z=[],D=0;do z.push(void 0),D++,d(m.value).uo(A(z.length-1),p),m=h.next();while(!m.done)})};return b});l("Number.isNaN",function(a){return a?a:function(b){return"number"===typeof b&&isNaN(b)}});function Aa(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}
l("Array.prototype.keys",function(a){return a?a:function(){return Aa(this,function(b){return b})}});l("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});l("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});function Ba(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}l("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==Ba(this,b,"includes").indexOf(b,c||0)}});function Ca(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
var Da="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Ca(d,e)&&(a[e]=d[e])}return a};l("Object.assign",function(a){return a||Da});l("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(h){return h};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}});l("WeakMap",function(a){function b(m){this.Am=(h+=Math.random()+1).toString();if(m){m=q(m);for(var n;!(n=m.next()).done;)n=n.value,this.set(n[0],n[1])}}function c(){}function d(m){var n=typeof m;return"object"===n&&null!==m||"function"===n}function e(m){if(!Ca(m,g)){var n=new c;ba(m,g,{value:n})}}function f(m){var n=Object[m];n&&(Object[m]=function(p){if(p instanceof c)return p;Object.isExtensible(p)&&e(p);return n(p)})}if(function(){if(!a||!Object.seal)return!1;try{var m=Object.seal({}),n=Object.seal({}),p=new a([[m,2],[n,3]]);if(2!=p.get(m)||3!=p.get(n))return!1;p.delete(m);p.set(n,4);return!p.has(m)&&4==p.get(n)}catch(A){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0;b.prototype.set=function(m,n){if(!d(m))throw Error("Invalid WeakMap key");e(m);if(!Ca(m,g))throw Error("WeakMap key fail: "+m);m[g][this.Am]=n;return this};b.prototype.get=function(m){return d(m)&&Ca(m,g)?m[g][this.Am]:void 0};b.prototype.has=function(m){return d(m)&&Ca(m,g)&&Ca(m[g],this.Am)};b.prototype.delete=function(m){return d(m)&&Ca(m,g)&&Ca(m[g],this.Am)?delete m[g][this.Am]:!1};return b});l("Map",function(a){function b(){var h={};return h.previous=h.next=h.head=h}function c(h,m){var n=h.hh;return ea(function(){if(n){for(;n.head!=h.hh;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:m(n)};n=null}return{done:!0,value:void 0}})}function d(h,m){var n=m&&typeof m;"object"==n||"function"==n?f.has(m)?n=f.get(m):(n=""+ ++g,f.set(m,n)):n="p_"+m;var p=h.em[n];if(p&&Ca(h.em,n))for(h=0;h<p.length;h++){var A=p[h];if(m!==m&&A.key!==A.key||m===A.key)return{id:n,list:p,index:h,Bd:A}}return{id:n,list:p,index:-1,Bd:void 0}}function e(h){this.em={};this.hh=b();this.size=0;if(h){h=q(h);for(var m;!(m=h.next()).done;)m=m.value,this.set(m[0],m[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),m=new a(q([[h,"s"]]));if("s"!=m.get(h)||1!=m.size||m.get({x:4})||m.set({x:4},"t")!=m||2!=m.size)return!1;var n=m.entries(),p=n.next();if(p.done||p.value[0]!=h||"s"!=p.value[1])return!1;p=n.next();return p.done||4!=p.value[0].x||"t"!=p.value[1]||!n.next().done?!1:!0}catch(A){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(h,m){h=0===h?0:h;var n=d(this,h);n.list||(n.list=this.em[n.id]=[]);n.Bd?n.Bd.value=m:(n.Bd={next:this.hh,previous:this.hh.previous,head:this.hh,key:h,value:m},n.list.push(n.Bd),this.hh.previous.next=n.Bd,this.hh.previous=n.Bd,this.size++);return this};e.prototype.delete=function(h){h=d(this,h);return h.Bd&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.em[h.id],h.Bd.previous.next=h.Bd.next,h.Bd.next.previous=h.Bd.previous,h.Bd.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.em={};this.hh=this.hh.previous=b();this.size=0};e.prototype.has=function(h){return!!d(this,h).Bd};e.prototype.get=function(h){return(h=d(this,h).Bd)&&h.value};e.prototype.entries=function(){return c(this,function(h){return[h.key,h.value]})};e.prototype.keys=function(){return c(this,function(h){return h.key})};e.prototype.values=function(){return c(this,function(h){return h.value})};e.prototype.forEach=function(h,m){for(var n=this.entries(),p;!(p=n.next()).done;)p=p.value,h.call(m,p[1],p[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});l("Array.prototype.values",function(a){return a?a:function(){return Aa(this,function(b,c){return c})}});l("Set",function(a){function b(c){this.Dg=new Map;if(c){c=q(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.Dg.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a(q([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||f.value[1]!=c)return!1;f=e.next();return f.done||f.value[0]==c||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:e.next().done}catch(g){return!1}}())return a;b.prototype.add=function(c){c=0===c?0:c;this.Dg.set(c,c);this.size=this.Dg.size;return this};b.prototype.delete=function(c){c=this.Dg.delete(c);this.size=this.Dg.size;return c};b.prototype.clear=function(){this.Dg.clear();this.size=0};b.prototype.has=function(c){return this.Dg.has(c)};b.prototype.entries=function(){return this.Dg.entries()};b.prototype.values=function(){return this.Dg.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(c,d){var e=this;this.Dg.forEach(function(f){return c.call(d,f,f,e)})};return b});l("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=Ba(this,b,"startsWith");b+="";var e=d.length,f=b.length;c=Math.max(0,Math.min(c|0,d.length));for(var g=0;g<f&&c<e;)if(d[c++]!=b[g++])return!1;return g>=f}});l("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});function Ea(a){return a?a:Array.prototype.fill}l("Int8Array.prototype.fill",Ea);l("Uint8Array.prototype.fill",Ea);l("Uint8ClampedArray.prototype.fill",Ea);l("Int16Array.prototype.fill",Ea);l("Uint16Array.prototype.fill",Ea);l("Int32Array.prototype.fill",Ea);l("Uint32Array.prototype.fill",Ea);l("Float32Array.prototype.fill",Ea);l("Float64Array.prototype.fill",Ea);function Fa(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{Zx:e,Al:f}}return{Zx:-1,Al:void 0}}l("Array.prototype.find",function(a){return a?a:function(b,c){return Fa(this,b,c).Al}});l("Array.prototype.findIndex",function(a){return a?a:function(b,c){return Fa(this,b,c).Zx}});l("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991});l("String.prototype.trimLeft",function(a){function b(){return this.replace(/^[\s\xa0]+/,"")}return a||b});l("String.prototype.trimStart",function(a){return a||String.prototype.trimLeft});l("String.prototype.repeat",function(a){return a?a:function(b){var c=Ba(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}});l("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)Ca(b,d)&&c.push([d,b[d]]);return c}});l("Array.prototype.entries",function(a){return a?a:function(){return Aa(this,function(b,c){return[b,c]})}});function Ga(){this.up=!1}da.Object.defineProperties(Ga.prototype,{current:{configurable:!0,enumerable:!0,get:function(){return this.value},set:function(a){this.up||(this.value=a,this.up=!0)}}});function Ha(){Ga.apply(this,arguments)}r(Ha,Ga);da.Object.defineProperties(Ha.prototype,{current:{configurable:!0,enumerable:!0,get:function(){return this.value},set:function(a){this.up||(this.value=a,this.up=!0)}}});var Ia=new Ha;var Ja=window.Hls,Ka;function t(){if(void 0===Ka){var a=!0;try{window.localStorage.setItem("cbModernizr","cbModernizr"),window.localStorage.removeItem("cbModernizr")}catch(b){a=!1}Ka=a}return Ka}function La(){try{return!!document.createElement("audio").canPlayType}catch(a){return!1}}var Ma;function Na(){if(void 0!==Ma)return Ma;Ma=!1;try{if("webkitAudioContext"in window)var a=new webkitAudioContext;else if("AudioContext"in window)a=new AudioContext;else return Ma;if(null===a)return Ma;Ma="function"===typeof a.createGain&&"function"===typeof a.decodeAudioData&&"function"===typeof a.createBufferSource&&"function"===typeof a.createBufferSource().start;"function"===typeof a.close&&a.close()}catch(b){u("Error checking for audio context: "+b)}return Ma}var Oa;function Pa(){if(void 0!==Oa)return Oa;var a=document.createElement("audio");return Oa="function"===typeof a.canPlayType&&""!==a.canPlayType("audio/mpeg;codecs=mp3")}var Qa=Object.prototype.hasOwnProperty.call(window,"onorientationchange");function Ra(){var a=document.createElement("video").canPlayType("application/vnd.apple.mpegurl");return"probably"===a||"maybe"===a}
function Sa(){return window.hasOwnProperty("requestAnimationFrame")?window.requestAnimationFrame:window.hasOwnProperty("webkitRequestAnimationFrame")?window.webkitRequestAnimationFrame:window.hasOwnProperty("mozRequestAnimationFrame")?window.mozRequestAnimationFrame:function(a){window.setTimeout(function(){a(0)},1E3/7);return Date.now()}}var Ta;function Ua(){if(void 0!==Ta)return Ta;try{var a=Object.defineProperty({},"passive",{get:function(){Ta=!0}});window.addEventListener("testPassive",function(){},a);window.removeEventListener("testPassive",function(){},a);void 0===Ta&&(Ta=!1)}catch(b){Ta=!1}return Ta}var Va,Wa=!1;window.setTimeout(function(){Wa=!0},200);function Xa(){if(void 0!==Va&&!Wa)return Va;var a=document.documentElement.scrollTop;document.documentElement.style.height=window.innerHeight+1+"px";document.documentElement.scrollTop=a+1;Va=document.documentElement.scrollTop!==a?document.documentElement:document.body;document.documentElement.style.height="";document.documentElement.scrollTop=a;Wa=!1;return Va}function Ya(){return void 0!==window.performance&&void 0!==window.performance.now}
function Za(){return void 0!==window.chrome&&(!!window.chrome.loadTimes||!!window.chrome.webstore||!!window.chrome.runtime)}function $a(){return/Edge\//i.test(navigator.userAgent)}function ab(){if(cb()&&/WebKit/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent))return!0;var a=!1;void 0!==window.safari&&void 0!==window.safari.pushNotification&&(a="[object SafariRemoteNotification]"===window.safari.pushNotification.toString());return/constructor/i.test(window.HTMLElement)||a}
function db(){return[/SM-T827R4/,/SM-T550/,/SM-T330/,/SM-T232/,/SM-T335/,/SM-T813/,/SM-T510/].some(function(a){return a.test(navigator.userAgent)})}function eb(){return(/iPad/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)&&void 0===window.MSStream}function fb(){return/iPhone/i.test(navigator.userAgent)&&void 0===window.MSStream}function cb(){return/iPod/i.test(navigator.userAgent)&&void 0===window.MSStream||fb()||eb()}
function gb(){if(cb()){var a=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return null===a?void 0:parseInt(a[1])}}function hb(){return/Android|webOS|BlackBerry|IEMobile|Opera Mini|SamsungBrowser/i.test(navigator.userAgent)||cb()}function ib(){return!!document.documentMode}function jb(){return ib()&&void 0===window.atob}function kb(){return/Puffin/i.test(navigator.userAgent)}function lb(){var a="unload";cb()&&ab()&&(a="pagehide");return a}
function mb(){return"object"===typeof navigator&&"object"===typeof navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getUserMedia}var nb;(new Promise(function(a){if(void 0!==nb)a(nb);else{var b=new Image;b.onerror=function(){a(!1)};b.onload=function(){nb=2!==b.width;a(nb)};b.src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAASUkqAAgAAAABABIBAwABAAAABgASAAAAAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAABAAIDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/iiiigD/2Q=="}})).then(function(a){nb=a});function ob(a){switch(a){case 1:return 255;case 2:return 65535;case 4:return 4294967295;default:return 1.8446744073709552E19}}function pb(a){var b;"crypto"in window?b=window.crypto:"msCrypto"in window&&(b=window.msCrypto);if(void 0===b){if(null!==a){b=a.length;for(var c=ob(a.byteLength/b),d=0;d<b;d+=1)a[d]=Math.floor(Math.random()*c)}}else a=b.getRandomValues(a);return a};var qb={},rb={};function sb(a){return Number.isNaN(Number(a))?0:Number(a)}
function v(a,b,c,d,e){d=void 0===d?!1:d;e=void 0===e?!1:e;if(b===window)var f=qb[a]=sb(qb[a])+1;else if(b===document)f=rb[a]=sb(rb[a])+1;else if(b instanceof HTMLElement){var g="data-listener-count-"+a;f=sb(b.getAttribute(g))+1;b.setAttribute(g,""+f)}else f=1;42<f&&w('event listener "'+a+'" has too many listeners. Element: '+(b===document?"document":b===window?"window":b.outerHTML.split(">")[0]+">"),{listeners:f,"max-listeners":42});void 0!==window.addEventListener?(d=Ua()?{capture:d,passive:e}:d,b.addEventListener(a,c,d)):void 0!==window.attachEvent?b.attachEvent("on"+a,c):u("Could not resolve addEventListenerPoly( "+a+" ) to "+b)}function tb(a,b,c){var d=void 0===d?!1:d;var e=void 0===e?!1:e;a=q(a);for(var f=a.next();!f.done;f=a.next())v(f.value,b,c,d,e)}
function x(a,b,c,d,e){d=void 0===d?!1:d;e=void 0===e?!1:e;if(b===window)var f=qb[a]=sb(qb[a])-1;else if(b===document)f=rb[a]=sb(rb[a])-1;else if(b instanceof HTMLElement){var g="data-listener-count-"+a;f=sb(b.getAttribute(g))-1;b.setAttribute(g,""+f)}else f=1;0>f&&u('event listener "'+a+'" removed without being added',{listeners:f});void 0!==window.removeEventListener?(d=Ua()?{capture:d,passive:e}:d,b.removeEventListener(a,c,d)):void 0!==window.detachEvent?b.detachEvent("on"+a,c):u("Could not resolve removeEventListenerPoly( "+
a+" ) from "+b)}function ub(a,b){function c(f){b(f);x("touchend",a,c,d,e)}var d=void 0===d?!1:d;var e=void 0===e?!1:e;v("touchend",a,c,d,e)};function vb(a){for(var b="",c=q(Object.keys(a)),d=c.next();!d.done;d=c.next()){d=d.value;""!==b&&(b+="&");var e=a[d];void 0===e&&(e="");b+=encodeURIComponent(d)+"="+encodeURIComponent(e)}return b}function wb(){var a=window.location.search;0<a.length&&"?"===a[0]&&(a=a.slice(1));var b={};a=q(a.split("&"));for(var c=a.next();!c.done;c=a.next())c=c.value,c.includes("=")&&(c=c.split("="),0<c[0].length&&(b[decodeURIComponent(c[0])]=0<c[1].length?decodeURIComponent(c[1]):void 0));return b};function xb(a){var b=a.length+1;return document.cookie.split(";").map(function(c){return c.trim()}).filter(function(c){return c.substring(0,b)===a+"="}).map(function(c){return decodeURIComponent(c.substring(b))})[0]}function yb(a){var b;return null!==(b=xb(a))&&void 0!==b?b:""}function zb(a,b,c){Ab(a,b,86400*c)}function Ab(a,b,c){var d=new Date;d.setTime(d.getTime()+1E3*c);document.cookie=a+"="+b+"; expires="+d.toUTCString()+"; path=/"};function Bb(a){var b="";null===a.match(/^[a-zA-Z]+:\/\//)&&(b="/");return""+b+a}function Cb(a){for(var b=new FormData,c=q(Object.keys(a)),d=c.next();!d.done;d=c.next())d=d.value,b.append(d,a[d]);return b}
function Db(a){switch(a.readyState){case 0:return"request not sent";case 4:switch(a.status){case 0:return"network error";case 400:return"bad request";case 401:return"unauthorized";case 403:return"access denied";case 404:return"not found";case 429:return"request throttled";case 500:return"server error";default:return"unknown status "+a.status}default:return"unknown ready state "+a.readyState}}
function Eb(a){var b=Error.call(this,Db(a));this.message=b.message;"stack"in b&&(this.stack=b.stack);var c=this;this.Kd=a;this.toString=function(){return"XhrError: "+c.message}}r(Eb,Error);function Fb(a){return 200<=a&&299>=a||1223===a}function y(a){return Gb(a)[1]}
function Gb(a){var b=6E4;b=void 0===b?6E4:b;var c=new XMLHttpRequest;return[c,new Promise(function(d,e){c.open("GET",Bb(a));c.withCredentials=!0;c.onerror=function(){e(new Eb(c))};c.onload=function(){Fb(c.status)?d(c):e(new Eb(c))};c.timeout=b;c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.send()})]}
function B(a,b){var c=b instanceof FormData?b:Cb(b);b=Hb(c);void 0===b?u("CSRF token is undefined",{cookies:document.cookie}):c.set("csrfmiddlewaretoken",b);return new Promise(function(d,e){var f=new XMLHttpRequest;f.open("POST",Bb(a),!0);f.withCredentials=!0;f.onerror=function(){e(new Eb(f))};f.onload=function(){Fb(f.status)?d(f):e(new Eb(f))};f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.send(c)})}
function Ib(a,b){var c=Object.keys(b).map(function(f){return f+"="+b[f]}).join("&"),d=""===c?a:a+"?"+c,e=xb("csrftoken");return new Promise(function(f,g){var h=new XMLHttpRequest;h.open("DELETE",Bb(d),!0);h.withCredentials=!0;h.onerror=function(){g(new Eb(h))};h.onload=function(){Fb(h.status)?f(h):g(new Eb(h))};void 0===e?(u("CSRF token is undefined",{cookies:document.cookie}),g(new Eb(h))):(h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.setRequestHeader("X-CSRFToken",e),h.send())})}
function Hb(a){var b;a.has("csrfmiddlewaretoken")&&(b=a.get("csrfmiddlewaretoken"));return void 0!==xb("csrftoken")?xb("csrftoken"):b};var Jb=window.newrelic,Kb,Lb,Mb;function C(a,b,c){b=void 0===b?{}:b;try{-1!==Nb&&(b.PlayerVol=Nb);-1!==(0===Nb?0:Ob)&&(b.TipVol=0===Nb?0:Ob);var d={};d["attributes.room_user"]=Kb;for(var e in b)d["attributes."+e]=b[e];if(void 0!==c&&c&&Ya()){var f=window.performance.now();d["attributes.timeSinceLoad"]=f/1E3;d["attributes.timeSinceLoadMS"]=f}void 0!==Lb&&(d["attributes.player"]=Lb);void 0!==Mb&&(d["attributes.currentMode"]=Mb);wb();void 0!==Jb&&(d==={}?Jb.addPageAction(a):Jb.addPageAction(a,d))}catch(g){u("New Relic Error in addPageAction: "+g)}}
function Pb(){x("load",window,Pb);for(var a=q(document.getElementsByTagName("script")),b=a.next();!b.done;b=a.next())b=b.value,null!==b.src.match(/https:\/\/js-agent\.newrelic\.com\/.*/)&&v("error",b,function(){u("Ad blocker stopped analytics collection");B("api/adblocker/",{}).then(function(){})})}var Ob=-1,Nb=-1;v("load",window,Pb);function Qb(a,b){this.jn=this.aj=this.active=!1;this.name=a;var c=window.experiments;if(void 0!==c){var d=c.active;this.active=void 0!==d&&-1!==d.indexOf(a);c=c.eligible;this.aj=void 0!==c&&-1!==c.indexOf(a)}!0===(void 0===b?!0:b)&&this.tu()}Qb.prototype.tu=function(){if(this.aj&&!this.jn){var a={experimentName:this.name,experimentGroup:"inactive"};this.active&&(a.experimentGroup="active");C("ExperimentEntered",a,!0);this.jn=!0}};function Rb(){var a=["PrchPgIfrmV3","PrchPgPopupV3"];var b=void 0===b?!0:b;this.tD="purchaseredesign";this.jn=this.aj=this.active=!1;var c=window.experiments;if(void 0!==c){var d=c.active,e=c.eligible;if(void 0!==e){var f=q(a);for(c=f.next();!c.done;c=f.next())if(-1!==e.indexOf(c.value)){this.aj=!0;break}if(this.aj&&void 0!==d)for(a=q(a),c=a.next();!c.done;c=a.next())if(c=c.value,-1!==d.indexOf(c)){this.active=!0;this.Qv=c;break}}}!0===b&&this.tu()}
Rb.prototype.tu=function(){if(this.aj&&!this.jn){var a={experimentName:this.Qv,experimentGroup:"inactive",namespace:this.tD};this.active&&(a.experimentGroup="active");C("ExperimentEntered",a,!0);this.jn=!0}};function Sb(){this.Ed=!0;this.oe=10;this.Rd=50}function Tb(a,b){this.jE=a;this.listener=b}Tb.prototype.removeListener=function(){this.jE.removeListener(this.listener)};function E(a,b){b.add(a)}function F(a,b){this.hx=a;this.listeners=[];this.history=[];this.options=Object.assign(new Sb,b)}
F.prototype.j=function(a,b){b=void 0===b?!0:b;this.listeners.push(a);if(b){b=q(this.history);for(var c=b.next();!c.done;c=b.next())a(c.value)}-1!==this.options.Rd&&this.listeners.length>this.options.Rd&&w('EventRouter "'+this.hx+'" has too many listeners',{listeners:this.listeners.length,"max-listeners":this.options.Rd});return new Tb(this,a)};F.prototype.once=function(a,b){function c(e){a(e);d.removeListener(c)}var d=this;return this.j(c,void 0===b?!0:b)};F.prototype.h=function(a){this.history.push(a)>this.options.oe&&this.history.shift();for(var b=q([].concat(fa(this.listeners))),c=b.next();!c.done;c=b.next()){c=c.value;try{c(a)}catch(d){u("Event listener error: "+d,{event_name:this.hx,event_listeners:this.listeners.length,listener:c,error_stack:d.stack})}}};F.prototype.removeListener=function(a){a=this.listeners.indexOf(a);0<=a&&this.listeners.splice(a,1)};function Ub(){this.Dr=[]}Ub.prototype.add=function(a){this.Dr.push(a)};function Vb(a){for(var b=q(a.Dr),c=b.next();!c.done;c=b.next())c.value.removeListener();a.Dr=[]};function G(a,b){a=void 0===a?"div":a;this.Ug=[];this.Lx=!1;this.Zw=new F("didReposition",{Ed:!1});this.element="string"===typeof a?this.Dw(a):a;this.initData(b);this.qa(b);this.element.setAttribute("ts",""+this.constructor.name)}k=G.prototype;k.Dw=function(a){a=document.createElement(a);a.style.height="100%";a.style.width="100%";a.style.position="absolute";a.style.overflow="hidden";a.style.webkitTapHighlightColor="transparent";return a};k.initData=function(){};k.qa=function(){};k.Et=function(){this.Lx=!0};k.G=function(){};k.Z=function(){this.G();for(var a=q(this.children()),b=a.next();!b.done;b=a.next())b.value.Z();this.Zw.h(void 0)};k.rr=function(){};k.qf=function(){this.rr();for(var a=q(this.children()),b=a.next();!b.done;b=a.next())b.value.qf()};k.J=function(a,b){Wb(this,a);void 0===b&&(b=this.element);a.Lx||a.Et();b.appendChild(a.element);return a};function Xb(a,b){Wb(a,b,0);if(void 0===c)var c=a.element;c.insertBefore(b.element,a.element.firstChild);return b}
function Wb(a,b,c){void 0!==b.parent&&b.parent!==a&&b.parent.removeChild(b);void 0===c?a.Ug.push(b):a.Ug.splice(c,0,b);b.parent=a}k.removeChild=function(a){var b=this.Ug.indexOf(a);if(-1===b)u("tried removing component that doesn't exist");else{this.Ug.splice(b,1);a.parent===this&&(a.parent=void 0);Yb(a);b=q(a.children());for(var c=b.next();!c.done;c=b.next())c.value.kg();a.kg()}};function Yb(a){var b=a.element.parentNode;null!==b?b.removeChild(a.element):u("couldn't find parent element to use for node removal")}function Zb(a){for(var b=q(a.children()),c=b.next();!c.done;c=b.next())c=c.value,c.parent===a&&(c.parent=void 0),Yb(c),c.kg();a.Ug=[]}k.children=function(){return this.Ug};k.kg=function(){};k.Bb=function(a){this.element.style.display=void 0===this.jz?void 0===a?"block":a:this.jz};k.Va=function(){"none"!==this.element.style.display&&(""!==this.element.style.display&&(this.jz=this.element.style.display),this.element.style.display="none")};k.Rb=function(){return"none"!==this.element.style.display};k.previousSibling=function(){if(void 0!==this.parent)return $b(this,this.parent.children())};k.nextSibling=function(){if(void 0!==this.parent)return $b(this,this.parent.children().slice().reverse())};k.lastChild=function(){return 0<this.children().length?this.children()[this.children().length-1]:void 0};function $b(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;if(c===a)break;var d=c}return d};function H(a,b){a=a instanceof G?a.element:a;a.classList.contains(b)||a.classList.add(b)}function I(a,b){a=a instanceof G?a.element:a;a.classList.contains(b)&&a.classList.remove(b)};function ac(){this.Jx=[]}function bc(a,b){a.Jx.push(b)}function cc(a,b){a=q(a.Jx);for(var c=a.next();!c.done;c=a.next())if(c=c.value,b.which===c.keyCode&&(!c.pi||b.ctrlKey||b.metaKey))return c.ba(b),!0;return!1};var dc={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},ec="webkitFullscreenEnabled webkitFullscreenElement webkitRequestFullscreen webkitExitFullscreen webkitfullscreenchange webkitfullscreenerror".split(" "),fc="mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),gc="msFullscreenEnabled msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" "),hc;"fullscreenEnabled"in document?hc=Object.keys(dc):ec[0]in document?hc=ec:fc[0]in document?hc=fc:gc[0]in document&&(hc=gc);function ic(a){if(void 0!==hc)a[hc[dc.requestFullscreen]]()}function jc(){void 0!==hc&&document[hc[dc.exitFullscreen]].bind(document)()}function kc(){return void 0===hc?!1:!!document[hc[dc.fullscreenEnabled]]}function lc(){if(void 0!==hc)return document[hc[dc.fullscreenElement]]}function mc(){return void 0===hc?"":hc[dc.fullscreenchange]}
function nc(){return void 0===hc?"":("on"+hc[dc.fullscreenerror]).toLowerCase()}function oc(){return!!lc()};function pc(){var a=this;this.message=document.createElement("div");this.sb=document.createElement("div");this.Bc=document.createElement("div");this.title=document.createElement("div");this.Nc=document.createElement("div");this.accept=document.createElement("div");this.Ln=function(){};this.yz=[];H(this.sb,"modalAlert");this.sb.style.display="none";this.sb.style.position="fixed";this.sb.style.overflow="auto";this.sb.style.top="0";this.sb.style.left="0";this.sb.style.width="100%";this.sb.style.height="100%";this.sb.style.zIndex="2000";H(this.Bc,"dialog");this.Bc.style.width="440px";this.Bc.style.position="relative";this.Bc.style.display="inline-block";this.Bc.style.borderRadius="10px";this.Bc.style.textAlign="left";this.Bc.style.overflow="hidden";this.Bc.style.zIndex="2001";this.Bc.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.title.style.display="block";this.title.style.fontSize="20px";this.title.style.paddingTop="20px";this.title.style.paddingLeft="20px";this.title.style.paddingRight="20px";this.title.style.whiteSpace="nowrap";this.title.style.fontWeight="bold";this.title.style.overflow="hidden";this.title.style.textOverflow="ellipsis";this.Bc.appendChild(this.title);this.message.style.display="inline-block";this.message.style.wordWrap="break-word";this.message.style.padding="20px";this.message.style.textAlign="left";this.Bc.appendChild(this.message);var b=document.createElement("div");H(b,"dialogForm");b.style.borderTopWidth="1px";b.style.borderTopStyle="solid";b.style.textAlign="center";b.style.height="40px";H(this.accept,"accept");this.accept.style.minWidth="70px";this.accept.style.padding="3px";this.accept.style.display="inline-block";this.accept.style.cssFloat="right";this.accept.style.position="relative";this.accept.style.top="7px";this.accept.style.right="10px";this.accept.style.boxSizing="border-box";this.accept.innerText="OK";this.accept.style.cursor="pointer";this.accept.style.borderWidth="1px";this.accept.style.borderStyle="solid";this.accept.onclick=function(c){c.stopPropagation();void 0!==a.ik&&a.ik();qc.Ln()};b.appendChild(this.accept);H(this.Nc,"decline");this.Nc.style.minWidth="70px";this.Nc.style.padding="3px";this.Nc.style.display="inline-block";this.Nc.style.cssFloat="right";this.Nc.style.position="relative";this.Nc.style.top="7px";this.Nc.style.right="25px";this.Nc.innerText="Cancel";this.Nc.style.cursor="pointer";this.Nc.style.borderWidth="1px";this.Nc.style.borderStyle="solid";this.Nc.onclick=function(c){c.stopPropagation();void 0!==a.Sm?a.Sm():void 0!==a.ik&&a.ik();qc.Ln()};b.appendChild(this.Nc);this.Bc.appendChild(b);this.sb.appendChild(this.Bc)}pc.prototype.resize=function(){this.Bc.style.width=Math.min(440,document.documentElement.clientWidth-40)+"px";this.Bc.style.left=Math.max(0,(this.sb.offsetWidth-this.Bc.offsetWidth)/2)+"px";this.Bc.style.top=Math.max(0,(this.sb.offsetHeight-80-this.Bc.offsetHeight)/2)+"px"};pc.prototype.display=function(a,b,c,d,e){var f=this;d=void 0===d?!1:d;if(this.active)this.yz.push({rD:a,ik:b,Sm:c,innerHTML:d,config:e});else{d?this.message.innerHTML=a:this.message.innerText=a;rc(this,e);this.sb.style.display="block";this.ik=b;void 0===c?qc.Nc.style.display="none":(this.Sm=c,qc.Nc.style.display="");var g=new ac,h=function(n){n.stopPropagation();n.preventDefault();cc(g,n)};bc(g,{keyCode:13,pi:!1,ba:function(){b();f.Ln()}});bc(g,{keyCode:27,pi:!1,ba:function(){void 0!==c?c():b();f.Ln()}});this.active=!0;var m=function(){f.resize()};v("keydown",document,h,!0);v("resize",window,m);v("orientationchange",window,m);this.Ln=function(){try{x("keydown",document,h,!0)}catch(p){}try{x("resize",window,m)}catch(p){}f.sb.style.display="none";f.active=!1;f.sb.parentElement===document.body&&document.body.removeChild(f.sb);f.ik=void 0;f.Sm=void 0;var n=f.yz.shift();void 0!==n&&f.display(n.rD,n.ik,n.Sm,n.innerHTML)};a=lc();void 0!==a&&a?a.appendChild(this.sb):document.body.appendChild(this.sb);this.resize()}};function rc(a,b){void 0!==(null===b||void 0===b?void 0:b.title)?(a.title.style.display="block",a.title.innerText=b.title):a.title.style.display="none";a.accept.innerText=void 0!==(null===b||void 0===b?void 0:b.iB)?b.iB:"OK";a.Nc.innerText=void 0!==(null===b||void 0===b?void 0:b.fC)?b.fC:"Cancel"}var qc=new pc;function J(a,b,c){void 0===b&&(b=function(){});qc.display(a,b,void 0,void 0===c?!1:c,void 0)}
function sc(a,b,c){qc.display(a,null!==b&&void 0!==b?b:function(){},null!==c&&void 0!==c?c:function(){},!1,void 0)};var K=new F("roomLoaded",{Rd:100,oe:1}),tc=new F("roomCleanup",{Rd:20}),uc=new F("userViewedPm");new F("tipSent");var vc=new F("externalChatMessage");new F("context");new F("context");function wc(a){return{left:a.offsetLeft,top:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight}}function xc(a,b,c){var d=Object.assign({},a);d.top=a.top+b;d.height=a.height-b;0>d.top?(d.height+=d.top,d.top=0):d.height<c&&(d.top-=c-d.height,d.height=c);return d}function yc(a,b,c,d){var e=Object.assign({},a);e.height=a.height+b;e.top+e.height>d?e.height=d-e.top:e.height<c&&(e.height=c);return e}
function zc(a,b,c){var d=Object.assign({},a);d.left=a.left+b;d.width=a.width-b;0>d.left?(d.width+=d.left,d.left=0):d.width<c&&(d.left-=c-d.width,d.width=c);return d}function Ac(a,b,c,d){var e=Object.assign({},a);e.width=a.width+b;e.left+e.width>d?e.width=d-e.left:e.width<c&&(e.width=c);return e};function L(a){G.call(this,"div",a);this.Sb=new F("overlayClick")}r(L,G);k=L.prototype;k.qa=function(a){var b=this;G.prototype.qa.call(this,a);this.P=document.createElement("div");this.P.style.position="fixed";this.P.style.display="none";this.P.style.left="0";this.P.style.top="0";this.P.style.right="0";this.P.style.bottom="0";this.P.style.zIndex="1000";this.P.style.cursor="auto";this.P.onclick=function(c){c.stopPropagation();b.kb();b.Sb.h(void 0)};this.element.style.zIndex="1001";this.element.onclick=function(c){c.stopPropagation()}};k.Et=function(){var a=this;G.prototype.Et.call(this);window.setTimeout(function(){a.qf()},0)};k.qf=function(){G.prototype.qf.call(this);null!==this.element.parentElement&&this.element.parentElement.insertBefore(this.P,this.element)};k.cf=function(){this.P.style.display="block"};k.kb=function(){this.P.style.display="none"};k.kg=function(){G.prototype.kg.call(this);null!==this.P.parentElement&&this.P.parentElement.removeChild(this.P)};function Bc(a){a=a.toLowerCase().split(" ");for(var b=0;b<a.length;b+=1)a[b]=a[b].charAt(0).toUpperCase()+a[b].slice(1);return a.join(" ")}function Cc(a,b){return null===a||void 0===a||""===a?null===b||void 0===b?"":b:a};var M=window.gettext;void 0===M&&(w("gettext is undefined."),M=function(a){return a});var Dc=window.ngettext;void 0===Dc&&(w("ngettext is undefined."),Dc=function(a,b,c){return 1<c?b:a});var Ec=window.interpolate;void 0===Ec&&(w("interpolate is undefined."),Ec=function(a){return a});function Fc(a){return Dc("token","tokens",a)}function Gc(a){return Ec(M("Confirm tip of %(tokens)s tokens"),{tokens:a},!0)}function Hc(a){return Ec(M('room subject changed to "%(subject)s"'),{subject:a},!0)}
function Ic(a,b,c,d){a=Ec(M("Enter private chat with %(username)s?\n%(price)s tokens per minute, minimum %(minMinutes)s minute(s)\n\n"),{username:a,price:b,minMinutes:c},!0);return a=d?a+M("This broadcaster allows private show recordings, so you will receive a recorded video of this show in your collection."):a+M("This broadcaster does not allow private show recordings, so you will not receive a recorded video of this show in your collection.")}
function Jc(a){return Ec(M("Broadcaster %(username)s is running these apps: "),{username:a},!0)}function Kc(a){return Ec(M("PM conversation with %(username)s &lt;ctrl-l to close&gt;"),{username:a},!0)}function Mc(){var a=Nc.dv;return Ec(M("Caution: The %(siteName)s Team will NEVER contact you via chat or ask for your password."),{siteName:a},!0)}var Oc=M("SEND PM");M("Send PM");var Pc=M("You must be a supporter, fan club member, or moderator to send this private message."),Qc=M("You must be a supporter, fan club member, moderator, or have received a tip today from this user to send this private message."),Rc=M("Sign up for a"),Sc=M("Supporter Membership");function Tc(a){return Ec(M("to send a pm to %(pmUser)s"),{pmUser:a},!0)}function Uc(a){return Ec(M("%(username)s is ignored"),{username:a},!0)}function Vc(a){return Ec(M("Ignore %(username)s"),{username:a},!0)}
function Wc(a){return Ec(M("Ban %(username)s?"),{username:a},!0)}function Xc(a){return Ec(M("%(username)s has tipped me"),{username:a},!0)}function Yc(a){return Ec(M("%(tokens)s in the past hour"),{tokens:a},!0)}function Zc(a){return Ec(M("%(tokens)s in the past day"),{tokens:a},!0)}function $c(a){return Ec(M("%(tokens)s in the past 2 weeks"),{tokens:a},!0)}function ad(a){return 1===a?M("There is 1 more open conversation"):M("There are "+a+" more open conversations")}
function bd(a){return Ec(M("Start Cam To Cam with %(username)s"),{username:a},!0)}function cd(a){return Ec(M("You are currently showing your cam to %(room)s. If your cam has ended, please wait up to 1 minute to be able to broadcast again."),{room:a},!0)}function dd(a){return Ec(M("Private conversation with %(username)s"),{username:a},!0)}M("Join Chaturbate's community.");M("Chat live, follow broadcasters, access private shows, or earn money!");M("Sign Up Free");var ed=M("Chat Color"),fd=M("Font Family"),gd=M("Font Size"),hd=M("Show Emoticons"),id=M("Autocomplete Delay");M("Sort Users");var jd=M("Highest Token Color");M("Chat Allowed By");M("Moderators Expire After");M("Silence Other Age-Verified Broadcasters");M("Yes, Always");var kd=M("Tip Volume");M("Use New Tip Alerts");var ld=M("View/Edit Ignored Users"),md=M("THE ACT OF MASTURBATING WHILE CHATTING ONLINE");M("CHAT ROOMS");M("BETA");M("TAGS");M("EARN FREE TOKENS");M("MY COLLECTION");var nd=M("My Collection"),od=M("Log in");M("Log In");var pd=M("Sign Up"),qd=M("Sign up"),rd=M("Include an optional message:"),sd=M("Optional message:"),td=M("Send Tip"),ud=M("SEND TIP"),vd=M("Send a tip");M("Send tip to broadcaster");var wd=M("Public Tipping"),xd=M("Username is visible to all users."),yd=M("Anonymous Tipping"),zd=M("Username only visible to broadcaster."),Ad=M("Send Anonymous Tip"),Bd=M("Sending..."),Cd=M("Click OK to continue to supporter signup.");M("Include optional message");M("Tip note...");M("Tap to chat...");var Dd=M("This broadcaster doesn't accept tips."),Ed=M("Purchase Tokens");M("Upgrade");M("Upgrade now");M("Supporter");M("Basic Member");M("MY PROFILE");M("LOG OUT");M("SEND FEEDBACK");var Gd=M("My Profile"),Hd=M("Log Out"),Id=M("Send Feedback");M("Status");M("You have:");var Jd=M("Get More"),Kd=M("Get more tokens"),Ld=M("Get More Tokens"),Md=M("Chat disconnected. The broadcaster has set a new password on this room."),Nd=M("Private"),Od=M("Start Private Show"),Pd=M("Spy on Private Show"),Qd=M("Private show has started."),Rd=M("Private show has finished."),Sd=M("Private show has been declined."),Td=M("Cancel Private Request"),Ud=M("Cannot cancel private show. Please try again in a few seconds."),Vd=M("Leave Private Show"),Wd=M("Private show request has been sent. Waiting on broadcaster to approve."),Xd=M("Broadcaster has returned from away mode."),Yd=M("You were disconnected because you have joined this room again."),Zd=M("The broadcaster has kicked you from the room."),$d=M("You were kicked from the room."),ae=M("signup to chat"),be=M("About Me"),ce=M("Wish List");M("PURCHASED");M("OR");var de=M("Photos and Videos"),ee=M("Real Name"),fe=M("Followers"),ge=M("I am"),he=M("We are"),ie=M("Birthday");M("Birth Date");var je=M("Age");M("Date");M("Action");var ke=M("Body Type"),le=M("Body Decorations"),me=M("Interested In"),ne=M("Location");M("Language(s)");var oe=M("Last Broadcast"),pe=M("Languages"),qe=M("Smoke Drink");M("Smoke / Drink");var re=M("User has no available BIO");M("Bio and Free Webcam");M("Unable to submit");M("Submitting...");var se=M("Loading"),te=M("loading"),ue=M("SETTINGS"),ve=M("Chat settings saved"),we=M("CHAT"),xe=M("SEND"),ye=M("TIP"),ze=M("Users"),Ae=M("USERS"),Be=M("a user"),Ce=M("Report Abuse"),De=M("REPORT ABUSE"),Ee=M("More Rooms"),Fe=M("spy private show"),Ge=M("Unfollow");M("unfollow");var He=M("Follow");M("NOTIFY ME");M("Always");M("Auto");M("Never");var Ie=M("Refresh Rooms"),Je=M("Women");M("WOMEN");M("women");var Ke=M("Men");M("MEN");M("men");var Le=M("Trans");M("TRANS");var Me=M("Couples");M("COUPLES");M("couples");M("Followed");M("FOLLOWED");M("SPY SHOWS");var Ne=M("SAVE"),Oe=M("Save"),Pe=M("Standard Emoticons"),Qe=M("Recently used"),Re=M("Smileys & People"),Se=M("Animals & Nature"),Te=M("Food & Drink"),Ue=M("Activities"),Ve=M("Travel & Places"),We=M("Objects"),Xe=M("Symbols"),Ye=M("Flags"),Ze=M("Upload"),$e=M("Tone"),af=M("Your current balance:");M("Balance:");M("Token Balance");var bf=M("You currently have: "),cf=M("WARNING: This room has a low satisfaction rating."),df=M("TIP AT YOUR OWN RISK!"),ef=M("Enter tip amount:"),ff=M("Invalid tip amount!");M("Amount:");var gf=M("Toggle this window with CTRL-S"),hf=M("Leave open after tipping"),jf=M("Select One"),kf=M("Please select a reason"),lf=M("Loading user list"),mf=M("refresh userlist"),nf=M("Send private message"),of=M("Mention this user");M("HIDE ALL ADS NOW");M("Powered by ExoticAds<br>Buy/Sell Traffic");M("Show More");M("Pics & Videos");var pf=M("Social Media");M("Unique Registered Viewers Watching");M("Points");M("Current Hour's Top Cams");M("Every hour, the cam with the most points wins a $10 prize. The cam in 2nd place wins a $5 prize.");M("Apps & Bots");M("Customize your chat room experience by launching an app or using bots to make your room unique. Explore a wide array of options, or even write your own app with javascript at the <a href='/apps/' target='_blank'>Apps and Bots page</a>.");M("Games");M("dismiss this message");M("Only 5 #hashtags will be applied");var qf=M("dismiss"),rf=M("Register later"),sf=M("Already have an account?"),tf=M("Login here");M("Please sign in using the form below");var uf=M("Username"),vf=M("Password");M("Prove you are human");var xf=M("Keep me logged in"),yf=M("Forgot password?");M("Incorrect password");M("Incorrect captcha");M("Create Free Account");M("We've improved Chaturbate's mobile site by adding these feature(s):");M("Satisfaction Voting");M("Visit the ");M("mobile site");M("survey");M(" again, or tell us why you're not satisfied in this ");M("Or ");var zf=M("or");M("tell us why you left");M("the mobile site");M("FOLLOWER BROWSER NOTIFICATIONS");M("Would you like to receive browser notifications when a broadcaster you follow comes online?");M("Subscription failure. Please try again from the Settings & Privacy page on your profile.");M("Yes");M("Not now");M("This room requires a password.");M("Login to room");M("Moderators");M("Remove Moderators");M("Non-Moderators");var Af=M("Remove Ignored Users"),Bf=M("Unignore this user"),Cf=M("Unignored Users");M("Ignore");var Df=M("Ignore this user"),Ef=M("Report this message"),Ff=M("Ignored Users"),Gf=M("Click on a user to unignore them."),Hf=M("Select a user from the list to unignore them.");M("Click on a user to revoke their moderator status.");var If=M("You must be logged in to ignore a user"),Jf=M("Room is currently offline");M("Follow broadcasters to receive instant notifications when they come online.");M("UNFOLLOW");M("FOLLOW");M("Share");M("Bio");M("Contest Stats");M("Features");M("Settings & Privacy");M("Settings saved");M("Token Stats");M("Memberships");M("Submit feedback to broadcaster");M("Optional comment for broadcaster:");M("Submitted");M("SATISFIED?");M("Satisfied?");M("SCAN CAMS");M("NEXT CAM");M("SCAN / NEXT");M("SCAN");M("SKIP CAM");M("EXIT SCANNING");M("Token Linkcodes");M("Earn up to 10 tokens for every registered user and 500 tokens for users who broadcast (broadcasters must earn $20.00 before they qualify).");M("Please send to chaturbate using one of the link codes below.");M("Embed Chaturbate's Top Cam on Your Webpage");M("the affiliate program stats");M("See details about tokens earned in ");M('Your browser is outdated and may not function correctly. Update it for the best Chaturbate experience and new features. <br> We recommend <a href="https://www.google.com/chrome/">Chrome</a>, <a href="https://www.mozilla.org/firefox/">Firefox</a>, or <a href="https://www.microsoft.com/edge">Edge</a>');M('Add an extra layer of protection to your account by setting up 2-Step Verification at the <a href="/security/">Security Center</a>');var Kf=M("Silence for 6 hours"),Lf=M("Remove Silence"),Mf=M("Theater Mode"),Nf=M("Full Screen"),Of=M("Exit Full Screen"),Pf=M("Split Mode"),Qf=M("unknown"),Rf=M("Show All"),Sf=M(" to follow your favorite broadcasters and see when they are live."),Tf=M("Follow your favorite broadcasters to see when they are live.");M("Promote your room");M("Not enough tokens.");M("Purchase more tokens");M("You are no longer eligible to promote your room.");M("User promotion currently unavailable - please check your settings.");M("You must be logged in to promote your room.");M("You must be broadcasting to promote your room.");M("Get More Viewers");M("Add your room to a rotating promoted spot on the homepage for 5 minutes.");M("details");M("Promote now");M("In Progress");M("Get more tokens");M("Current price");M("Setting up user promotion...");M("Promotion ending...");M("Unknown error occurred while retrieving promotion purchase price. Please try again.");M("Unknown error occurred while purchasing user promotion. Please try again.");M("Loading new pricing...");M("Announce you're online");M("Announce again in ");M("You have 1 follower");M("Send email and browser notifications to your followers.");M("Add a photo");M("Update photo");M("Must be non-nude");M("Recommended size: 1280 x 720 px");M("Shown in notification and featured emails");M("Send notifications");M("In Progress");M("New photos must be approved. If not approved in 15 minutes, email notifications will be sent without a photo.");M("You have no followers to notify.");M("Are you sure you want to notify your followers without an image?");M("Please use a jpeg, gif, or png image.");M("Image must not be larger than 10 megabytes.");M("A notification has already been sent.");M("Something went wrong after submit. Please try again.");M("Something went wrong during submit. Please try again.");M("Image must be at least 200px wide and 200px tall.");M("Image is too wide.");M("Image is too tall.");M("Please wait until all pending notifications have been sent.");M("Remove approved photo?");M("Sorry, this feature is not supported in your browser. Please upgrade to a modern browser like Chrome or Firefox.");var Uf=M("Close"),Vf=M("Cancel");M("cancel");var Wf=M("CANCEL");M("SUBMIT");M("Submit");M("You have unsaved changes, are you sure you want to leave this page?");var Xf=M("Choose a category");M("Abuse Report");var Yf=M("Broadcaster is underage"),Zf=M("Broadcaster is advertising"),$f=M("Broadcaster is abusive"),ag=M("Broadcaster is intoxicated"),bg=M("Using a toy that is too large"),cg=M("Asking for offline payments"),dg=M("Broadcasting in public"),eg=M("Broadcasting in service uniform"),fg=M("Broadcaster is sleeping"),gg=M("Broadcaster is wrong gender"),hg=M("Other");M("Please choose a category");var ig=M("Additional comments:"),jg=M("Please add a description"),kg=M("Message is inappropriate"),lg=M("Message is rude towards the broadcaster"),mg=M("Message is spam"),ng=M("Other (please describe):"),og=M("User is inappropriate"),pg=M("User is rude towards the broadcaster"),qg=M("User is spam"),rg=M("Other (please describe):"),sg=M("Report"),tg=M("REPORT"),ug=M("Unable to send report."),vg=M("Too many reports sent. Try slowing down."),wg=M("There was an error requesting your private show. Please try again."),xg=M("There was an error requesting your spy show. Please try again."),yg=M("Private Shows"),zg=M("Are you sure?"),Ag=M("This broadcaster allows private show recordings, so you will receive a recorded video of this show in your collection.");M("You may continue chatting while you wait for the broadcaster to return.");M("Performer Is Away");M("Group Show");var Bg=M("LEAVE PRIVATE SHOW"),Cg=M("CANCEL PRIVATE REQUEST"),Dg=M("START PRIVATE SHOW");M("SPY PRIVATE SHOW");var Eg=M("LEAVE SPY SHOW"),Fg=M("Private Show");M("Private Show in Progress");var Gg=M("This feature is not currently enabled on your device."),Hg=M('You must be logged in to enter a private show. Click "OK" to login.'),Ig=M('You must be logged in to spy on a private show. Click "OK" to login.'),Jg=M("Spy has been disabled by the broadcaster");M("More Rooms Like This");M("Here are some trending rooms instead:");M("RECOMMENDED");M("OFFLINE");M("EXHIBITIONIST");M("NEW");M("HD");M("HD+");M("IN PRIVATE");M("GAMING");M("CHATURBATING");M("HIDDEN - STAFF ONLY");var Kg=M("View on Twitter"),Lg=M("Show tips and messages"),Mg=M("How Can We Improve?"),Ng=M("Updates");M("This user has not added any photos or videos yet.");M("More Pics & Videos");M("FAN");M("CLUB");M("Tokens");M("Token");M("Uploaded");M("If you already purchased this photo set, try reloading the page to view it.");M("If you already purchased this video, try reloading the page to view it.");M("minutes");M("seconds");M("or");M("View Hi-Res Image");M('You must be logged in to purchase this photo set.  Click "OK" to login.');M('You must be logged in to view hi-res images.  Click "OK" to login.');M('You must be logged in to purchase this video.  Click "OK" to login.');M('Click "OK" to get more tokens.');M("Upload more Photos");M("Re-Order Items");M("Change video thumbnail image");M("Edit Details");M("Compliance");M("Deactivate");M("STAFF");M("Audio is disabled.");M("Audio muted to remove music");M("Enable Audio");M("(Check compliance for eligibility before enabling)");M("(Removes this item from being seen on the bio but does not remove from anyone's MyCollection.  To remove from MyCollections, reject in Compliance instead of deactivating.)");M("FAILED");M("PENDING");M("APPROVAL");M("VIDEO");M("PROCESSING");M("ERROR");M("Failed Approval");M("Please delete or edit offending items.");M("Open in new window");var Og=M("iPad has failed to setup the broadcast. Please try again."),Pg=M("Please check your internet connection or close other applications"),Qg=M("No camera found."),Rg=M("Permission to use your camera and microphone is currently denied."),Sg=M("We need permission to use your camera and microphone in order to proceed."),Tg=M("Visit our <a class=\"hrefColor\" target='_blank' href='https://support.chaturbate.com/hc/en-us/articles/360040862791'>support page</a> for help enabling your devices."),Ug=M("Request Device Permissions");M("support page");var Vg=M("Make sure there are no other broadcast tabs open."),Wg=M("Low FPS"),Xg=M("Are you sure you want to leave?"),Yg=M('This private show has ended. To give you\ntime to prepare, you are now shown as "Away" to\nthose in your room. To return and be visible on\ncam, click "Exit Away Mode" below.'),Zg=M("Exit Away Mode"),$g=M("Could not get devices"),ah=M("Turn your device 180 degrees."),bh=M("Turn your device into landscape mode."),ch=M("Camera"),dh=M("Resolution"),eh=M("Microphone"),fh=M("Input Level"),gh=M("Mute"),hh=M("None (Silent)"),ih=M("Start Broadcasting"),jh=M("Stop Broadcasting"),kh=M("You Are Away"),lh=M("For high quality streams we strongly recommend"),mh=M("Use external software (OBS)"),oh=M("Please wait. Connecting in"),ph=M("Could not start broadcast"),qh=M("Welcome back"),rh=M("Could not setup preview. Please make any possible adjustments and reload the page"),sh=M("Could not setup broadcast"),th=M("My Cam Preview"),uh=M("Cam To Cam"),vh=M("Stop Cam To Cam"),wh=M("Unable to share cam: You are already broadcasting from another window or tab"),xh=M("Your cam will not be visible to other users."),yh=M("The cam icon will turn orange when the broadcaster is viewing you."),zh=M("Error sharing cam"),Ah=M("Error sharing cam: Timed out trying to connect");M("Error viewing cam");var Bh=M("Unable to share cam: Make sure you are connected to chat and the broadcast is playing"),Ch=M("Unable to share cam: Broadcaster is in a private show");M("You are not allowed to share your cam with this user");var Dh=M("Sharing your cam is only available to users who have purchased tokens. Click OK to purchase tokens now.");M("Sharing your cam will remove your room password");M("Viewer ");M(" started sharing their cam");M(" stopped sharing their cam");var Eh=M(" started viewing your cam"),Fh=M(" stopped viewing your cam"),Gh=M("is currently viewing your cam"),Hh=M("is not currently viewing your cam"),Ih=M("Muted"),Jh=M("Close Cam");M("Block Cam");M("Pop Out Cam");M("Report Cam");M("Are you sure you want to block");M("User is broadcasting in public");M("User is rude/abusive");M("User is intoxicated");M("User is sleeping");M("User is spamming");M("User is underage");var Kh=M("My Cam");M("View Cam");M("Stop Viewing Cam");M("Unable to view cam: A maximum of five cams can be viewed at once");M("Unable to view cam: This viewer is no longer sharing their cam");var Lh=M("Leaving this page will end your cam. Click OK to proceed."),Mh=M("has left the room."),Nh=M("Follow to be notified when online."),Oh=M("Describe your issue or share your ideas:"),Ph=M("Some account and system information may be sent to %SITE_NAME%. We will use the information you give us to help address technical issues to improve our services, subject to our Privacy Policy and Terms of Service."),Qh=M("Submit Feedback"),Rh=M("Add Screenshot"),Sh=M("Scroll down to capture lower on the page"),Uh=M("Remove Screenshot"),Vh=M("Click to highlight or hide info"),Wh=M("Highlight issues with orange or hide sensitive info with black. Hit the ESC key to finish."),Xh=M("Highlight issue"),Yh=M("Hide sensitive info"),Zh=M("Permission to capture screen not granted"),$h=M("Could not capture screen"),ai=M("Please take screenshot again after resizing"),bi=M("Your feedback has been sent! Thank you for your feedback."),ci=M("Something went wrong. Please try again later."),di=M("Please wait before submitting more feedback."),ei=M("Unable to submit feedback. Please contact support."),fi=M("Done");M("Watching");M("Deny Private");M("Accept Private");M("Return to Public Chat");M("Your private show has ended.");M("Your camera will remain hidden until you re-enter public chat.");M("You're about to stop the group show. Do you want to continue?");M("You're about to stop the private show. Do you want to continue?");M("Error broadcasting");var gi=M("Font Settings"),hi=M("Emoticons Settings"),ii=M("Users Settings"),ji=M("Notifications Settings"),ki=M("Other Settings");M("You have no users ignored.");M("Back to Settings");var li=M("Notify on Entry For"),mi=M("Notify on Leave For"),ni=M("No new updates");M("The video is currently being processed.  It may take several minutes depending on the size of the video.");M("The video is damaged or its format is not supported.");M("Please delete this video and reupload again.");var oi=M("You must be a supporter to use this feature.");M("To disable, go to ");M(' on the homepage and uncheck "Enable floating player".');M("Options");M('You must be logged in to Follow. Click "OK" to login.');var pi=M("Log in or sign up to use this feature"),qi=M("Log in to continue"),ri=M("Don't have an account yet?"),si=M("Tipped Tons"),ti=M("1000+ tokens in the past 2 weeks"),ui=M("Tipped Lots"),vi=M("250+ tokens in the past 2 weeks"),wi=M("Tipped Recently"),xi=M("50+ tokens in the past 2 weeks"),yi=M("Purchased Tokens"),zi=M("Has bought tokens"),Ai=M("Fan Club Member"),Bi=M("Moderator"),Ci=M("Broadcaster");M('<a class="hrefColor" href="/supporter/upgrade/" >Upgrade to supporter</a> for no ads, private messaging, and more!');M("Outbound Tip");M("Tip From");M("Transfer tokens to cash");M("Transfer tokens to advertising credit");M("Referred Member");M("Admin Adjustment");M("This has been resolved by an administrator");M("email");M("Spy Show");M("Fan Club Membership");M("Broadcaster Rules: Tokens are the only form of payment allowed. You may promote your personal website as long as it does not offer video chat. Do not provide your Skype or Yahoo Messenger to anyone, and do not ask users to chat with you elsewhere.");M("Use External Encoder to Broadcast");M("Use the legacy in-browser broadcast");M("Broadcast yourself using Open Broadcaster Software (OBS)");M("Accept");M("Decline");M("User(s) Token Rate");M("Private Show Stats");M("Exit Private Show");M("Use the Features tab below to select an app and up to 5 bots to enhance your room.");M('You must <a class="hrefColor" href="/accounts/age_verification/"> submit age verification </a> to enable the ability to receive tokens while broadcasting.');M("Disabled");M("Allowed");M("Privates");M("Broadcaster's Guide");M("Age Verification");M('All persons appearing on your cam must have approved <a href="/accounts/age_verification/" style="color:#0A5A83">age verification</a> on file prior to appearing.');M("Tutorial Videos");M('Users and broadcasters have created <a href="https://vimeo.com/chaturbate" target="_blank" style="color:#0A5A83">videos</a> to teach you how to Chaturbate and earn money. You can view them on <a href="https://vimeo.com/chaturbate" target="_blank" style="color:#0A5A83">Chaturbate\'s Vimeo channel</a>.');M("Money Making Tips");M("Get an HD camera to receive the HD tag on your room.");M("Members love hearing you. Make sure to turn your microphone on and greet users by name.");M("Ask your users to type ':tipher' in order to enable emoticons that encourage members to tip");M("Grow Your User Base");M("Encourage viewers to 'Follow' you.");M("Send private messages to blue users and use the [Tab Key] to switch between PM windows.");M("Update your bio with colors and feature top tippers and longest fan club members.");M("Encourage users to raise their spending limits and get 200 tokens for free.");M("Broadcast on a known schedule so your biggest fans always know when to find you.");M("Fan Clubs");M('Enable your fan club in the "Settings & Privacy" tab to earn extra income.');M("Click On a Username To");M("Send a user a PM");M("Add/Remove a Moderator");M("Ignore a user's messages");M("Silence a user for 6 hours");M("Kick/Ban a user for 30 days");M("Assign Moderators");M("Those you trust can help monitor your chat room and silence troublemakers");M("Change Room Subject");M("Click on the room subject at the top of your broadcast to change the text, list token goals, and input all other forms of useful information.");M('<span style="background-color: #FF3;">Tips Are Highlighted</span>');M("Be sure to thank those who are generous enough to tip you.");M("Username Colors");M('<span style="color: #DC5500">Orange</span> names are Broadcasters');M('<span style="color: #ff0000">Red</span> names are Moderators');M('<span style="color: #090">Green</span> names are fan club members');M('<span style="color: #804baa">Dark Purple</span> names have tipped at least 1000 tokens in the past 2 weeks');M('<span style="color: #be6aff">Light Purple</span> names have tipped at least 250 tokens in the past 2 weeks');M('<span style="color: #009">Dark Blue</span> names have tipped at least 50 tokens in the past 2 weeks');M('<span style="color: #69A">Light Blue</span> names own or have purchased tokens');M('<span style="color: #666">Grey</span> names have no tokens');M("Checking Stats");M('Click on the "Contest Stats" and "Token Stats" tabs to see how much money you\'ve earned broadcasting.');M("Trouble Broadcasting?");M('Ensure you are running the latest version of your browser, we recommend Chrome, Firefox or Safari. If you are still having issues, <a href="https://support.chaturbate.com/hc/en-us/requests/new" style="color:#0A5A83">contact support</a>.');M("My Broadcast");M("Your room is password protected. Users may not enter your room unless they know your password. To remove your password, edit your settings & privacy.");var Di=M("Kick/Ban"),Ei=M("Remove Moderator Status"),Fi=M("Promote to Moderator");M("WARNING: Never show or share your broadcast token with anyone!");M("WARNING: Your broadcast is live on Chaturbate when you are streaming from RTMP/OBS, regardless of if you are in your room.");M("Your broadcast token");M("RTMP/OBS Broadcasting Information");M("Click here to view our OBS Setup Guide");M("Important Information");M("Do not upscale your source input (e.g. using a 1080p camera to a 1440p stream).");M("Ensure you use the minimum video bitrate specified in this table for a given resolution");M("You may only have copyrighted content -- including music, movies, and video games -- in your stream if you are the rights holder or have the permission of all rights holders.");M("Recommended Settings Table");M("Generate a new broadcast token? \n(This will invalidate your prior RTMP / OBS token and disconnect your current broadcast)");M('This is your satisfaction score. You can hide this by setting "Show my satisfaction score" to "No" in the Settings & Privacy tab.');M("This data is updated once per day and is based on votes in the past 90 days.");M("Click on your score (%) to view your rating history.");M("Fetching rating history");M("No history to show");M("Active App");M("Active Game");M("Bot #1");M("Bot #2");M("Bot #3");M("Bot #4");M("Bot #5");M("None Selected");M("Deactivate This App");M("Choose an App");M("Choose a Bot");M("Choose a Game");M("End Game");M("Stop streaming game");M("Are you a publisher?");M("Add your game.");M("Restart");M("Add new social media");M('You must be <a href="/accounts/age_verification/">age verified</a> to add new social media');M('You must purchase tokens or be <a href="/accounts/age_verification/">age verified</a> to add new photos and videos');M("Upload new pics");M("Upload new videos");M("Edit Your Bio");M("Current Contest Statistics for");M("Payout Information");M("Refresh Stats");M("See contest details");M("Manage photo sets");M("Update Bio");M("January");M("February");M("March");M("April");M("May");M("June");M("July");M("August");M("September");M("October");M("November");M("December");M("Expired Fan Club Memberships");M("Expired Social Media Subscriptions");M("You Have No Active Memberships");M("Expires");M("Expired");M("Extend by 3 months");M("Renews");M("renew");M("can't renew");M("can't extend");M("No email address on file");M("Blocked countries");M("Able to view");M("Blocked regions");M("Security");M("Statistics");M("Update Settings");M("Change your password");M("View the security center and adjust Two-Step Verification settings");M("Authorize your 3rd party stats");M("Add an email address");M("Change email address");M("E-mail Verified");M("Resend verification email");M("Verification Email Sent");M("Email is Unverified. Verify to receive follower notifications and newsletters.");M("Detailed Income Stats");M("Payment Information Form");M("required for payments");M("Broadcaster Verification Form");M("Download Transaction History");M("Please wait for the file to be generated");M("Download your last 30 days of transactions?\nProcessing may take up to 20 seconds.");M("Your Account's Activity");M("Latest cashouts");M("tokens are automatically cashed out at midnight");M("Please verify your identity to enable tokens on your account");M("Transfer Tokens");M("Tokens transferred on the 1st-15th of the month will be sent by the 22nd. Tokens transferred on the 16th-31st will be sent by the 7th.");M("Listed are users currently silenced from your room. Silences expire after 6 hours by default. You can convert a silence to a ban.");M("Listed are users currently banned from your room. Bans expire after 1 month by default. You can convert a ban to a permanent ban.");M("Banned");M("Silenced");M("Actions");M("Remove");M("Make Permanent");M("Convert to Ban");M("Click here to clear hidden silences and bans");M("Add ban");M("Enter Username To Ban");M("View/Edit Bans and Silences");M("View/Edit Moderators");M("View Fan Club Members");M("View/Edit Region Block Exemptions");M("Alphabetically");M("All Users");M("Users who tipped me today");M("Users who have tipped me");M("Users who have tokens");M("1 Day");M("2 Days");M("1 Week");M("2 Weeks");M("1 Month");M("2 Months");M("6 Months");M("No");M("Yes");M("Yes, only if they're broadcasting now");M("Age Verification Required");M("Only age verified broadcasters can change this setting");M("Listed are your current fan club members, the date they last joined, and the total number of months they've been your fan (Expiring memberships have a short grace period to renew before removed from your fanclub.)");M("Listed are all of your fan club members past and present and how long they were a member for. Current members are <strong>highlighted</strong>.");M("Add username");M("Add");M("No Region Block Exemptions");M("Unique Registered Viewers");M("Your Points");M("Your Rank");M("You may use some HTML tags (a p i strong b u ul ol li h1 h2 h3 img font br span).");M("You may post links to external wish lists (amazon wish list, for example) and use some HTML tags (a p i strong b u ul ol li h1 h2 h3 img font br).");M("Display Name");M("Display Birthday");M("Interested in");M("Spoken languages");M("Wish Lists");M("Join Fan Club");M("Member");M("Fan Club Member");M("Last Joined");M("Total Months a Member");M("Improve Video Quality");var Gi=M("Dark Mode");M("Search");M("Broadcasting right now");M("Recently online");var Hi=M("TAP TO UNMUTE");M("Modify Supporter Membership");M("Yes, cancel the membership");M("No, keep the features");M("Cancellation Successful");M("Send and close");M("Supporter Plan");M("Renew subscription");M("Why did you decide to cancel your membership plan? (Optional)");M("Would you like to cancel your supporter membership and lose all your supporter features?");M("You are about to renew your subscription.");M("Cancellation Failed");M("OK");M("Error, please try and refresh your window.");M("Please note that the 'Room subject' of your broadcast and the 'Location' field of your bio may not be used for promotion of social media or other websites. Thank you for your understanding.");var Ii=M("Note");M("Notes");var Ji=M("Loading..."),Ki=M("Enter notes about this user (only seen by you)"),Li=M("(unsaved)"),Mi=M("Type a message..."),Ni=M("Close tab"),Oi=M("Ctrl + l to close tab");M("One of your linked Guests has become inactive. <a href='/accounts/age_verification/'>Review your Guests</a> now.");var Pi=M("Back"),Qi=M("Loading More Messages"),Ri=M("Report this user"),Si=M("Send a private message"),Ti=M("Private Messages"),Ui=M("Don't have an account?"),Vi=M("Search users"),Wi=M("now"),Xi=M("1 minute ago"),Yi=M("an hour ago"),Zi=M("a day ago"),$i=M("minutes ago"),aj=M("hours ago"),bj=M("days ago");M("To avoid ending the private show, a new tab will open. Click OK to continue.");M("We launched the new Cam To Cam feature last month, hoping that this would be the best way to share your cam with broadcasters you are watching. You can help improve this feature by taking 30 seconds to complete a ");var cj=M("Accept Rules"),dj=M("Chat"),ej=M("Unmute");M("Clean, Ad-Free Interface");M("Custom Chat Font & Color Options");M("Private Messaging");M("Anonymous Tipping");M("Animate Room Images");M("There was an error cancelling your Fan Club.");M("Are you sure you wish to remove your supporter status? You will remain a supporter until your currently paid month expires.");M("There was an error cancelling your supporter membership.");M("You can renew after membership expires.");M("Since");var fj=M("Ban removed"),gj=M("Silence removed"),hj=M("Error removing ban, please try again"),ij=M("Error converting to ban, please try again"),jj=M("Error removing silence \u2013\u2013\u00a0it may have already been removed"),kj=M("Undo"),lj=M("Ban"),mj=M("Cam To Cam is the best way to share your cam with broadcasters you are watching.");M("trans viewers");M("and");M("How is Chaturbate doing today?");M("Your feedback has been sent!");M("Describe your issues or share your ideas.");M("You will no longer receive notifications or see them in your followed tab.");function nj(a,b,c){oj(a,b,c).then()}function oj(a,b,c){return new Promise(function(d){var e;oc()?(jc(),window.setTimeout(function(){var f=window.open(a,b,c,void 0);null!==f&&window.setTimeout(function(){f.focus()},200);d(null!==f&&void 0!==f?f:void 0)},500)):d(null!==(e=window.open(a,b,c,void 0))&&void 0!==e?e:void 0)})}var pj="",qj="";"hidden"in document?(pj="hidden",qj="visibilitychange"):"msHidden"in document?(pj="msHidden",qj="msvisibilitychange"):"webkitHidden"in document&&(pj="webkitHidden",qj="webkitvisibilitychange");var rj=new F("documentVisibilityChange",{oe:1}),sj=!document[pj];function tj(a){sj!==a&&(sj=a,rj.h(sj))}
if(""!==pj&&""!==qj){var uj=function(){tj(!document[pj])};v(qj,document,uj);var vj=function(){x(qj,document,uj);x("pagehide",window,vj);tj(!1);v("pagehide",window,function(){tj(!1)});v("pageshow",window,function(){tj(!0)})};v("pagehide",window,vj)}else v("blur",window,function(){tj(!1)}),v("focus",window,function(){tj(!0)});var wj=new F("bioClicked"),xj=new F("userListRequest"),yj=new F("openTipCalloutRequest"),zj=new F("loadRoomRequest"),Aj=new F("reportAbuseRequest"),Bj=new F("privateWindowRequest"),Cj=new F("chatWindowRequest"),Dj=new F("colorModeChangeRequest"),Ej=new F("roomChangeColorModeUpdateRequest");var Fj=new F("navigationRequest");var Gj=new F("modalReposition");v("resize",window,function(){Gj.h(void 0)});v("orientationchange",window,function(){Gj.h(void 0)});var Hj=new F("modalFullscreenChange");v(mc(),document,function(){Hj.h(void 0)});var Ij=new F("modalEscape");v("keydown",document,function(a){27===a.keyCode&&Ij.h(a)});var Jj=new F("modalExit");v("popstate",window,function(){Jj.h(void 0)});Fj.j(function(){Jj.h(void 0)});var Kj=new F("modalOpened");function Lj(a){a=void 0===a?{gm:!0}:a;G.call(this);var b=this;this.options=a;this.Sb=new F("overlayClick");this.I=new Ub;this.iq=this.bu=this.kb=this.di=!1;this.P=document.createElement("div");this.P.style.position="fixed";this.P.style.display="none";this.P.style.left="0";this.P.style.top="0";this.P.style.right="0";this.P.style.bottom="0";this.P.style.zIndex="1100";this.P.style.background="rgb(0,0,0,0)";this.P.onclick=function(c){c.stopPropagation();b.Sb.h(void 0);b.bu||b.D()};this.element.style.zIndex="1101";this.element.onclick=function(c){c.stopPropagation()};this.ZD=function(){b.di&&b.Z()};this.CC=function(){b.di&&b.show()}}r(Lj,G);Lj.prototype.show=function(){var a=this,b=lc();oc()&&void 0!==b?(b.appendChild(this.P),b.appendChild(this.element)):(document.body.appendChild(this.P),document.body.appendChild(this.element));this.di||(E(Gj.j(this.ZD,!1),this.I),E(Hj.j(this.CC,!1),this.I),E(Jj.j(function(){a.D()},!1),this.I),this.options.gm&&E(Ij.j(function(c){c.preventDefault();a.D()},!1),this.I),this.iq&&Kj.h(!0),void 0!==this.options.Xk&&this.options.Xk(),this.di=!0);this.kb||(this.P.style.display="block")};Lj.prototype.D=function(){this.P.style.display="none";null!==this.element.parentElement&&this.element.parentElement.removeChild(this.element);null!==this.P.parentElement&&this.P.parentElement.removeChild(this.P);this.di&&(Vb(this.I),this.iq&&Kj.h(!1),void 0!==this.options.Vk&&this.options.Vk(),this.di=!1)};function Mj(){function a(A){if("close"===A.data)g.Ql=!0,e();else if("hide-spinner"===A.data)g.wA.style.display="none";else if("crypto-submit"===A.data)g.Ql=!1,g.P.onclick=function(z){z.preventDefault()},p.onclick=function(z){z.preventDefault()};else if("crypto-error"===A.data)g.Ql=!0,g.P.onclick=function(z){z.stopPropagation();e();g.Sb.h(void 0)},p.onclick=e;else if(0===A.data.indexOf("crypto-redirect: "))b(A.data.substring(17),950,780);else if(0===A.data.indexOf("billing-redirect: "))b(A.data.substring(18),715,430);else if(0<=A.origin.indexOf(window.location.hostname)){switch(A.data){case "/tipping/purchase_tokens/":n.style.display="none"}p.onclick=e;null!==h.contentWindow&&v("keydown",h.contentWindow,d)}}function b(A,z,D){window.open(A,"_blank","status=0,toolbar=0,menubar=0,directories=0,resizable=1,scrollbars=1,height="+z+",width="+D);g.Ql=!0;e()}function c(A){var z=document.createElement("div");z.style.position="absolute";z.style.width="3px";z.style.height="15px";z.style.left="5px";z.style.background="#C4C4C4";z.style.transform=A;return z}function d(A){"Esc"!==A.key&&"Escape"!==A.key||e()}function e(){g.Ql&&!g.lt&&(g.lt=!0,x("message",window,a),x("keydown",document,d),f())}function f(){clearInterval(g.$D);g.element.style.opacity="0";g.content.style.right="-500px";window.setTimeout(function(){g.D()},500)}Lj.call(this,{gm:!1});var g=this;this.lt=!1;this.Ql=!0;this.width=430;this.Qr=135;this.url="/tipping/purchase_tokens/"+window.location.search;this.element.style.width=this.width+20+"px";this.element.style.position="fixed";this.element.style.right="0";this.element.style.top=this.Qr+"px";this.element.style.minHeight="200px";this.element.style.zIndex="1001";this.element.style.overflow="hidden";this.element.style.opacity="0";this.element.style.transition="opacity 1s";this.element.style.zIndex="1003";this.P.style.zIndex="1002";this.P.style.background="rgba(0, 0, 0, 0.5)";this.content=document.createElement("div");this.content.style.position="absolute";this.content.style.right="-500px";this.content.style.minHeight="200px";this.content.style.maxHeight="735px";this.content.style.width=this.width+"px";this.content.style.border="1px solid #ccc";this.content.style.borderRadius="5px";this.content.style.background="#FFF";this.content.style.transition="right 500ms";this.content.style.zIndex="1002";this.element.appendChild(this.content);var h=Nj(this),m=document.createElement("div");this.content.appendChild(m);var n=Oj();m.appendChild(n);var p=document.createElement("div");p.onclick=f;p.style.display="inline-block";p.style.height="12.73px";p.style.width="12.73px";p.style.cursor="pointer";p.style.position="absolute";p.style.right="15px";p.style.top="10px";p.appendChild(c("rotate(-135deg)"));p.appendChild(c("rotate(-45deg)"));m.appendChild(p);this.wA=this.Yr();this.content.appendChild(this.wA);this.P.onclick=function(A){A.stopPropagation();e();g.Sb.h(void 0)};n.onclick=function(){h.src=g.url};h.onload=function(){clearInterval(g.$D);var A=document.createElement("a");A.href=h.src;-1===g.url.indexOf(""+A.pathname+
A.search)&&(n.style.display="inline-block",p.onclick=f)};window.setTimeout(function(){g.content.appendChild(h)},1);v("message",window,a);v("keydown",document,d);this.show();window.setTimeout(function(){h.style.opacity="1"},1E3);this.G()}r(Mj,Lj);function Nj(a){var b=document.createElement("iframe");b.className="purchaseFrame";b.src=a.url;b.style.border="none";b.style.padding="0";b.style.background="transparent";b.style.height="calc(100% - 5px)";b.style.width="100%";b.style.transition="height 200ms, opacity 1s";b.style.opacity="0";return b}
function Oj(){var a=document.createElement("div");a.innerHTML="&lt; ";a.style.display="none";a.style.color="#999";a.style.cursor="pointer";a.style.fontSize="20px";a.style.fontWeight="bold";a.style.borderRadius="50px";a.style.padding="2px 0 5px 7px";var b=document.createElement("small");b.innerText="Back";b.style.fontSize="12px";b.style.verticalAlign="middle";b.style.lineHeight="9px";a.appendChild(b);return a}
Mj.prototype.Yr=function(){var a=document.createElement("div");a.style.animationName="spin";a.style.position="absolute";a.style.top="50%";a.style.left="50%";a.style.width="30px";a.style.height="31px";a.style.margin="-15px 0 0 -15px";a.style.background='url("https://static-assets.highwebmedia.com/tsdefaultassets/images/loading_spinner.svg")';a.style.backgroundSize="cover";a.style.animationName="spin";a.style.animationDuration="2s";a.style.webkitAnimationDuration="2s";a.style.animationTimingFunction="linear";a.style.webkitAnimationTimingFunction="linear";a.style.animationIterationCount="infinite";a.style.webkitAnimationIterationCount="infinite";a.style.zIndex="-1";return a};Mj.prototype.show=function(){var a=this;Lj.prototype.show.call(this);window.setTimeout(function(){a.element.style.opacity="1"},1);window.setTimeout(function(){a.content.style.right="10px"},500)};Mj.prototype.G=function(){this.content.style.height=window.innerHeight-this.Qr-10+"px";this.element.style.top=Math.min(this.Qr,window.innerHeight-this.content.offsetHeight-10)+"px"};function Pj(a,b,c,d){d=void 0===d?3:d;var e=document.createElement("div");e.style.position="absolute";e.style.height="0";e.style.width="0";e.style.top="-8px";e.style.left=c;c=document.createElement("div");H(c,"divotBorder");c.style.borderLeft="8px solid transparent";c.style.borderRight="8px solid transparent";c.style.borderBottomWidth="8px";c.style.borderBottomStyle="solid";""!==a&&(c.style.borderBottomColor=""+a);e.appendChild(c);a=8-d;var f=document.createElement("div");H(f,"divotBackground");f.style.position="absolute";f.style.top=d+"px";f.style.left=d+"px";f.style.borderLeft=a+"px solid transparent";f.style.borderRight=a+"px solid transparent";f.style.borderBottomWidth=a+"px";f.style.borderBottomStyle="solid";""!==b&&(f.style.borderBottomColor=""+b);c.appendChild(f);return e}
function Qj(a,b,c,d){d=void 0===d?3:d;var e=document.createElement("div");e.style.position="absolute";e.style.height="0";e.style.width="0";e.style.bottom="0";e.style.left=c;c=document.createElement("div");H(c,"divotBorder");c.style.borderLeft="8px solid transparent";c.style.borderRight="8px solid transparent";c.style.borderTopWidth="8px";c.style.borderTopStyle="solid";""!==a&&(c.style.borderTopColor=""+a);e.appendChild(c);a=8-d;var f=document.createElement("div");H(f,"divotBackground");f.style.position="absolute";f.style.top="0";f.style.left=d+"px";f.style.borderLeft=a+"px solid transparent";f.style.borderRight=a+"px solid transparent";f.style.borderTopWidth=a+"px";f.style.borderTopStyle="solid";""!==b&&(f.style.borderTopColor=""+b);c.appendChild(f);return e}
function Rj(a,b,c,d){d=void 0===d?3:d;var e=document.createElement("div");e.style.position="absolute";e.style.height="0";e.style.width="0";e.style.left="-8px";e.style.top=c;c=document.createElement("div");H(c,"divotBorder");c.style.borderTop="8px solid transparent";c.style.borderBottom="8px solid transparent";c.style.borderRightWidth="8px";c.style.borderRightStyle="solid";""!==a&&(c.style.borderRightColor=""+a);e.appendChild(c);a=8-d;var f=document.createElement("div");H(f,"divotBackground");f.style.position="absolute";f.style.top=d+"px";f.style.left=d+"px";f.style.borderTop=a+"px solid transparent";f.style.borderBottom=a+"px solid transparent";f.style.borderRightWidth=a+"px";f.style.borderRightStyle="solid";""!==b&&(f.style.borderRightColor=""+b);c.appendChild(f);return e}
function Sj(a,b,c,d){d=void 0===d?3:d;var e=document.createElement("div");e.style.position="absolute";e.style.height="0";e.style.width="0";e.style.right="0";e.style.top=c;c=document.createElement("div");H(c,"divotBorder");c.style.borderTop="8px solid transparent";c.style.borderBottom="8px solid transparent";c.style.borderLeftWidth="8px";c.style.borderLeftStyle="solid";""!==a&&(c.style.borderLeftColor=""+a);e.appendChild(c);a=8-d;var f=document.createElement("div");H(f,"divotBackground");f.style.position="absolute";f.style.top=d+"px";f.style.right="-"+a+"px";f.style.borderTop=a+"px solid transparent";f.style.borderBottom=a+"px solid transparent";f.style.borderLeftWidth=a+"px";f.style.borderLeftStyle="solid";""!==b&&(f.style.borderLeftColor=""+b);c.appendChild(f);return e};function Tj(){return"FRAGMENT"}
function Uj(a,b,c){var d=Vj(a)?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a);c=Wj(c);d.appendChild(c);var e=null===b?{}:b;Object.keys(e).forEach(function(f){if("style"===f)Object.assign(d.style,e[f]);else if("ref"===f&&"function"===typeof e.ref)e.ref(d,e);else if("className"===f||"class"===f)d.classList.add(e[f].split(" "));else if("colorClass"===f)f=e[f],Array.isArray(f)?f.forEach(function(m){""!==m&&d.classList.add(m)}):d.classList.add(f);else if("htmlFor"===f)d.setAttribute("for",e[f]);else if("xlinkHref"===f)d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e[f]);else if("dangerouslySetInnerHTML"===f)d.innerHTML=e[f].GF;else if(0===f.indexOf("on")){var g=f.toLowerCase(),h=!1;-1<f.indexOf("Capture",f.length-7)&&(h=!0,g=g.slice(-7));null===d[g]?v(g.slice(2),d,e[f],h):w("Event declared for JSX element that does not exist on type "+a+": "+f)}else d.setAttribute(f,e[f])});return d}function Xj(a,b){"function"===typeof a.ref&&a.ref(b,a)}
function Vj(a){var b=new RegExp("^"+a+"$","i");return["path","svg","use","g"].some(function(c){return b.test(c)})}
function Wj(a){function b(d){d instanceof HTMLElement||d instanceof SVGElement||d instanceof Comment||d instanceof DocumentFragment?c.appendChild(d):"string"===typeof d||"number"===typeof d?c.appendChild(document.createTextNode(""+d)):d instanceof Array?d.forEach(b):!1===d||null===d||void 0===d||w("Unexpected child in Tsx fragment: "+d)}var c=document.createDocumentFragment();a.forEach(b);return c}
function N(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];if("function"===typeof a)if(void 0===a.prototype||void 0===a.prototype.render){e=Object.assign({},{},b,{children:d});var f=a(e);d="FRAGMENT"===f?Wj(d):f;Xj(e,d)}else d=Object.assign({},{},b,{children:d}),e=[],void 0!==d.unsafeArgs&&(e=d.unsafeArgs),e=new(Function.prototype.bind.apply(a,[null,d].concat(fa(e)))),f=e.render(),"function"===typeof d.classRef&&d.classRef(e,d),Xj(d,f),d=f;else d=Uj(a,b,d);return d};function Yj(a){a=void 0===a?"16px":a;return N("a",{className:"closeBtnContainer",style:{height:a,borderRadius:"5px",color:"inherit"}},N("svg",{style:{width:a,height:a},width:"12",height:"12",viewBox:"0 0 12 12"},N("path",{d:"M7.15006 6.08867C7.13842 6.07705 7.12919 6.06326 7.12288 6.04807C7.11658 6.03289 7.11334 6.01661 7.11334 6.00017C7.11334 5.98372 7.11658 5.96744 7.12288 5.95226C7.12919 5.93707 7.13842 5.92328 7.15006 5.91167L11.7816 1.28067C11.9222 1.13984 12.0011 0.94891 12.001 0.749887C12.0008 0.550864 11.9216 0.360048 11.7808 0.219417C11.64 0.0787862 11.4491 -0.000140462 11.25 1.87661e-07C11.051 0.000140838 10.8602 0.0793373 10.7196 0.220167L6.08856 4.84917C6.07695 4.86081 6.06316 4.87004 6.04797 4.87634C6.03278 4.88265 6.0165 4.88589 6.00006 4.88589C5.98362 4.88589 5.96734 4.88265 5.95215 4.87634C5.93697 4.87004 5.92317 4.86081 5.91156 4.84917L1.28056 0.220167C1.21093 0.150501 1.12826 0.0952322 1.03726 0.0575166C0.946271 0.0198009 0.84874 0.000376944 0.75024 0.00035373C0.551311 0.000306846 0.360511 0.0792862 0.219814 0.219917C0.0791162 0.360548 4.6905e-05 0.551311 2.08617e-08 0.75024C-4.68632e-05 0.94917 0.0789325 1.13997 0.219564 1.28067L4.85006 5.91167C4.8617 5.92328 4.87094 5.93707 4.87724 5.95226C4.88354 5.96744 4.88679 5.98372 4.88679 6.00017C4.88679 6.01661 4.88354 6.03289 4.87724 6.04807C4.87094 6.06326 4.8617 6.07705 4.85006 6.08867L0.219564 10.7202C0.14993 10.7898 0.0947003 10.8725 0.0570276 10.9635C0.0193548 11.0546 -2.31938e-05 11.1521 2.08617e-08 11.2506C4.6905e-05 11.4495 0.0791162 11.6403 0.219814 11.7809C0.28948 11.8505 0.372179 11.9058 0.46319 11.9435C0.554201 11.9811 0.651741 12.0005 0.75024 12.0005C0.94917 12.0004 1.13993 11.9214 1.28056 11.7807L5.91156 7.14917C5.92317 7.13753 5.93697 7.12829 5.95215 7.12199C5.96734 7.11569 5.98362 7.11244 6.00006 7.11244C6.0165 7.11244 6.03278 7.11569 6.04797 7.12199C6.06316 7.12829 6.07695 7.13753 6.08856 7.14917L10.7196 11.7807C10.8602 11.9214 11.051 12.0004 11.2499 12.0005C11.4488 12.0005 11.6396 11.9215 11.7803 11.7809C11.921 11.6403 12.0001 11.4495 12.0001 11.2506C12.0002 11.0517 11.9212 10.8609 11.7806 10.7202L7.15006 6.08867Z"})))}
function Zj(a){var b=N("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},N("path",{d:"M9.41624 6.5001C8.36101 5.49058 6.91921 5.42139 6.31151 5.44408C6.2877 5.44511 6.26454 5.43559 6.2474 5.41774C6.23026 5.39989 6.22063 5.37525 6.22074 5.34955V4.37708C6.22037 4.2304 6.1414 4.09718 6.01813 4.0353C5.89485 3.97341 5.74953 3.99404 5.64528 4.08821L3.01893 6.49519C2.93812 6.56704 2.89133 6.67411 2.89136 6.78708C2.89077 6.89782 2.93585 7.00312 3.01437 7.07444L5.64739 9.58388C5.75212 9.677 5.89728 9.69652 6.02 9.63396C6.14272 9.57141 6.22092 9.43803 6.22074 9.29161V8.14408C6.22076 8.09924 6.25009 8.06064 6.29083 8.05182C6.95951 7.90058 9.14183 7.61398 10.2721 9.90072C10.3101 9.97676 10.3911 10.0153 10.4688 9.99434C10.5465 9.97338 10.6011 9.89827 10.6015 9.81187C10.6015 8.36716 10.2027 7.25328 9.41624 6.5001Z"}));return N("div",{colorClass:"replyIconSvg",style:a},b)};function ak(a,b){var c=bk,d,e;var f=null!==(d=null===b||void 0===b?void 0:b.update)&&void 0!==d?d:!1;void 0!==f&&f||a!==c.hg?(c.zy=c.hg,c.hg=a,a=!0):a=!1;if(a||null!==(e=null===b||void 0===b?void 0:b.h)&&void 0!==e&&e)b=c.hg,"videoonly"!==b&&(Mb=b),c.vf.h({Jo:c.hg,SI:c.zy})}function ck(){var a=bk;t()&&window.localStorage.setItem(a.tl,JSON.stringify({isTheaterMode:"theater"===a.hg}))}function O(){return bk.hg}
var bk=new function(){this.tl="isTheaterMode";this.vf=new F("changeVideoMode",{Rd:17});this.hg="split";this.zy="theater"};function dk(){return document.documentElement.clientHeight!==window.outerHeight||cb()?Math.max(window.innerHeight,document.documentElement.clientHeight):window.innerHeight}function ek(){return document.documentElement.clientWidth};function fk(a){G.call(this);var b=this;this.aa=a;this.state={videoWidth:500,videoHeight:300};this.rp=!1;this.ri=[];gk(this);this.element.style.display="inline-block";this.element.style.width="8px";this.element.style.boxSizing="border-box";v("mousedown",this.element,function(c){c.preventDefault();b.aa.element.onmousemove=function(d){d=d.pageX-a.mc.element.getBoundingClientRect().left-b.element.offsetWidth/2;b.Jf(d);b.aa.Z()};b.aa.element.onmouseup=function(){hk(b)};b.aa.element.onmouseleave=function(){hk(b)};b.rp=!0});v("touchmove",this.element,function(c){c.preventDefault();1===c.targetTouches.length&&(b.aa.element.ontouchmove=function(){var d=c.targetTouches.item(0);null!==d&&(d=d.pageX-a.mc.element.getBoundingClientRect().left-b.element.offsetWidth/2,b.Jf(d),b.aa.Z())},b.aa.element.ontouchend=function(){hk(b)},b.rp=!0)});window.setTimeout(function(){b.element.style.cursor=ik(b);H(b.element,"resizeHandle");b.Jf();hk(b)},0);bk.vf.j(function(){"split"===O()&&(gk(b),b.Jf())})}r(fk,G);k=fk.prototype;k.Jf=function(a){a=void 0===a?this.state.videoWidth:a;a=Math.max(a,502);a=Math.min(this.Fk(),a);var b=O();switch(b){case "split":if(0===this.element.offsetWidth)return;this.aa.mc.element.style.width=a+"px";var c=this.qm(a)+this.aa.mc.oa.O.ac();this.aa.mc.oa.element.style.height=c+"px";this.aa.nb.element.style.height=c+jk(this.aa.mc)+"px";this.element.style.height=c+jk(this.aa.mc)+"px";this.aa.nb.element.style.width=this.aa.element.clientWidth-a-this.element.offsetWidth-2*this.aa.mn+"px";this.aa.mc.dk();kk.h();break;case "theater":this.aa.mc.element.style.width=this.aa.element.clientWidth-2*this.aa.mn+"px";break;case "fullscreen":this.aa.mc.element.style.width=window.innerWidth+"px";break;case "videoonly":break;default:u("Unexpected VideoMode: "+b)}this.state.videoWidth=a;"split"===b&&(a=ik(this),this.element.style.cursor=a,this.aa.element.style.cursor=a)};function lk(a){var b=a.ri[a.ri.length-1],c={videoWidth:a.state.videoWidth,videoHeight:a.state.videoHeight,tw:parseInt(a.aa.nb.element.style.width),qw:parseInt(a.aa.nb.element.style.height)};void 0!==b&&b.videoWidth===c.videoWidth&&b.videoHeight===c.videoHeight||a.ri.push(c)}
function hk(a){lk(a);2<a.ri.length&&(a.ri=a.ri.slice(1));if(2===a.ri.length){var b=q(a.ri),c=b.next().value;b=b.next().value;C("VideoResized",{video_width_old:c.videoWidth,video_height_old:c.videoHeight,video_width_new:b.videoWidth,video_height_new:b.videoHeight,chat_width_old:c.tw,chat_height_old:c.qw,chat_width_new:b.tw,chat_height_new:b.qw})}"split"===O()&&0!==a.element.offsetWidth&&(a.Ib(),a.aa.element.onmousemove=function(){},a.aa.element.onmouseup=function(){},a.aa.element.onmouseleave=function(){},a.aa.element.ontouchend=function(){},a.aa.element.ontouchmove=function(){},a.aa.element.style.cursor="",a.rp=!1)}k.Fk=function(){return"split"===O()?this.aa.element.clientWidth-this.Mp():this.aa.element.clientWidth-2*this.aa.mn};k.Ek=function(){return window.innerHeight-166};function ik(a){var b=a.aa.mc.element.offsetWidth;return 500>=b?"e-resize":b>=a.Fk()?"w-resize":"ew-resize"}
function gk(a){if(t()){var b=window.localStorage.getItem("defaultVideoWidth");if(null!==b){b=JSON.parse(b);a.state={videoWidth:b.videoWidth,videoHeight:b.videoHeight};return}}"split"===O()&&0!==a.element.offsetWidth&&a.Aq({Gy:!0})}k.Ib=function(){t()&&window.localStorage.setItem("defaultVideoWidth",JSON.stringify({videoWidth:this.state.videoWidth,videoHeight:this.state.videoHeight}))};k.G=function(){this.Jf();this.rp||hk(this)};k.Aq=function(a){a=(void 0===a?{Gy:!1}:a).Gy;var b=ek();if(this.Fk()-95>b/2){if(a){var c=dk();c=c/b>mk(this)?this.Fk()-95:(c-200)/mk(this)}else c=b/2;b=this.qm(c)}else b=this.Ek(),c=b/mk(this);!a&&b>this.Ek()&&(b=this.Ek(),c=b/mk(this));500>c&&(c=500);this.state.videoWidth=c};function mk(a){return a.aa.mc.oa.Bg?.5625:.75}k.qm=function(a){return a*mk(this)};k.Mp=function(){return 155};var kk=new F("splitModeDragResize");function nk(a){var b=0;Array.from(document.querySelectorAll("*[style*=z-index]:not(.FloatingPlayer)")).forEach(function(c){var d;if(d=c instanceof HTMLElement&&!a.contains(c)){d=a.getBoundingClientRect();var e=c.getBoundingClientRect();d=!(d.right<e.left||d.left>e.right||d.bottom<e.top||d.top>e.bottom)}if(d)try{b=Math.max(b,parseInt(Cc(c.style.zIndex,"0")))}catch(f){}});return b}
function pk(a,b){var c=a instanceof G?a.element:a;var d=b;b instanceof Function&&(d=b(a));a=q(Object.keys(d));for(d=a.next();!d.done;d=a.next())d=d.value,c.style[d]=b[d]}function qk(a){v("mouseenter",a,function(){a.style.textDecoration="underline"});v("mouseleave",a,function(){a.style.textDecoration=""})}function rk(a){if(null===a)return"rgba(0, 0, 0, 0)";var b=getComputedStyle(a).backgroundColor;return""===b||"rgba(0, 0, 0, 0)"===b||"transparent"===b?rk(a.parentElement):b}
function sk(a){function b(h,m,n){return 0===h?0===m?void 0===n?0:n:m:h}a=a.getBoundingClientRect();var c=document.body,d=document.documentElement,e=b(window.pageYOffset,d.scrollTop,c.scrollTop),f=b(window.pageXOffset,d.scrollLeft,c.scrollLeft),g=b(d.clientTop,c.clientTop);c=b(d.clientLeft,c.clientLeft);return new DOMRect(a.left+f-c,a.top+e-g,a.width,a.height)}function tk(a){if(null===a)return 0;try{var b=parseFloat(a.substring(0,a.indexOf("px")));return isNaN(b)?0:b}catch(c){return 0}}
function uk(a){var b=new F("hover");a=a instanceof G?a.element:a;v("mouseenter",a,function(){b.h(!0)});v("mouseleave",a,function(){b.h(!1)});return b}var vk;function wk(){if(void 0!==vk)return vk;var a=document.createElement("div");a.style.visibility="hidden";a.style.width="100px";a.style.msOverflowStyle="scrollbar";document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%";a.appendChild(c);c=c.offsetWidth;document.body.removeChild(a);return vk=b-c};function xk(a,b){this.Os=a;this.config=b;this.Er=this.ru=!1}function yk(a){if(1===a.config.ce)clearTimeout(a.dC),a.dC=window.setTimeout(a.Os,a.config.yd);else{var b=function(){a.Er&&2===a.config.ce?(a.Er=!1,a.Os(),window.setTimeout(b,a.config.yd)):a.ru=!1};a.ru?a.Er=!0:(a.ru=!0,a.Os(),window.setTimeout(b,a.config.yd))}};function zk(){F.apply(this,arguments)}r(zk,F);zk.prototype.j=function(a,b){a=F.prototype.j.call(this,a,void 0===b?!0:b);yk(Ak);return a};var Bk=new zk("resizeDebounceEvent"),Ak=Ck(function(){Bk.h(!1)});function Dk(a,b,c,d,e,f){function g(){var m=c instanceof Function?c():c,n=d instanceof Function?d():d,p=m+(n-m)*(Math.max(Math.min(document.body.clientWidth,e),h)-h)/(e-h),A=a instanceof G?a.element:a;b instanceof Array?b.forEach(function(z){A.style[z]=p+"px"}):A.style[b]=p+"px";a instanceof G&&a.Z();void 0!==f&&f(p)}var h=500;h=void 0===h?500:h;e=void 0===e?1003:e;Bk.j(g);window.setTimeout(function(){g()})}
function Ck(a){var b=new xk(function(){a(!0)},{yd:80,ce:2}),c=new xk(function(){a(!1)},{yd:200,ce:1});v("resize",window,function(){yk(b);yk(c)});v("orientationchange",window,function(){a(!1);window.setTimeout(function(){a(!1)},80)});return c}if(eb()&&ab()){var Ek=document.createElement("div");pk(Ek,{position:"absolute",width:"100%"});document.body.appendChild(Ek);var Fk=Ek.offsetWidth;window.setInterval(function(){Fk!==Ek.offsetWidth&&(Bk.h(!0),Fk=Ek.offsetWidth)},150)};function Gk(a,b,c,d){d=void 0===d?document.body:d;var e,f;G.call(this);var g=this;this.target=a;this.tl=b;this.KD=d;this.I=new Ub;this.wg=function(){return 0};this.Sg=function(){return 0};this.element=Hk(c);this.element.style.paddingRight="40px";H(this,"modern");!0!==c.tI&&Ik(this);this.de=c.de;this.Df=c.Df;this.wg=null!==(e=c.wg)&&void 0!==e?e:this.wg;this.Sg=null!==(f=c.Sg)&&void 0!==f?f:this.Sg;E(Bk.j(function(){Jk(g)}),this.I);E(Kk.j(function(h){g.tl===h&&g.tb()}),this.I);void 0!==c.Bq&&(this.ZA=c.Bq,E(bk.vf.j(function(){Jk(g);Lk(g)}),this.I),E(kk.j(function(){Jk(g)}),this.I));Jk(this);Lk(this);d.appendChild(this.element)}r(Gk,G);function Mk(a){a.tb();void 0!==a.tl&&(Kk.h(a.tl),t()&&localStorage.setItem(a.tl,"true"))}Gk.prototype.tb=function(){var a,b;this.D();null===(a=this.parent)||void 0===a?void 0:a.removeChild(this);null===(b=this.element.parentElement)||void 0===b?void 0:b.removeChild(this.element);Vb(this.I)};function Ik(a){var b=Yj("12px");b.style.position="absolute";b.style.right="5px";b.style.top="5px";H(b,"tooltipCloseButton");v("click",b,function(){Mk(a)});a.element.appendChild(b)}
function Jk(a){var b=a.KD.getBoundingClientRect(),c=a.target.getBoundingClientRect(),d=c.top-b.top;b=c.left-b.left;c=tk(a.Df);1===a.de?(a.element.style.top=d-a.element.clientHeight-a.target.clientHeight+a.Sg(a.target)+"px",a.element.style.left=b-c+a.wg(a.target)+"px"):0===a.de?(a.element.style.top=d+a.target.clientHeight+a.Sg(a.target)+"px",a.element.style.left=b-c+a.wg(a.target)+"px"):2===a.de?(a.element.style.top=d-c+a.Sg(a.target)+"px",a.element.style.left=b+a.target.clientWidth+a.wg(a.target)+
"px"):3===a.de&&(a.element.style.top=d-c+a.Sg(a.target)+"px",a.element.style.left=b-a.element.clientWidth+a.wg(a.target)+"px")}function Nk(a,b,c){var d;a.Df=null!==c&&void 0!==c?c:a.Df;a.de=b;b=a.element.querySelector(".divot");null===(d=null===b||void 0===b?void 0:b.parentElement)||void 0===d?void 0:d.removeChild(b);d=Ok(a.de,a.Df);void 0!==d&&a.element.appendChild(d);Jk(a)}Gk.prototype.show=function(){Lk(this)};function Lk(a){void 0===a.ZA||a.ZA.includes(O())?a.element.style.display="block":a.D()}Gk.prototype.D=function(){this.element.style.display="none"};function Pk(a,b,c){if(!0===b.nJ||!t()||"true"!==localStorage.getItem("showMyCamTip"))return new Gk(a,"showMyCamTip",b,c)}var Kk=new F("key");function Hk(a){var b=void 0===a.hasHTML?a:{content:a.content,wm:"true"===a.hasHTML,width:parseInt(a.width),de:parseInt(a.divotPosition),Df:a.divotLeftOrTop};a=document.createElement("div");H(a,"tooltip");b.wm?a.innerHTML=b.content:a.textContent=b.content;a.style.width=b.width+"px";a.style.borderWidth="2px";a.style.position="absolute";a.style.borderStyle="solid";a.style.borderRadius="6px";a.style.fontSize="12px";a.style.padding="8px";a.style.display="none";a.style.zIndex="5";b=Ok(b.de,b.Df);void 0!==b&&a.appendChild(b);return a}function Ok(a,b){var c="";switch(a){case 0:a=Pj;c="divotTop";break;case 1:a=Qj;c="divotBottom";break;case 2:a=Rj;c="divotLeft";break;case 3:a=Sj;c="divotRight";break;default:a=void 0}if(void 0!==a)return b=a("","",b),H(b,c),H(b,"divot"),b};function Qk(a){G.call(this);var b=this;this.data=a;this.disabled=!1;this.GD=function(d){b.disabled&&(d.preventDefault(),void 0!==b.data.$w?sc(b.data.$w,function(){void 0!==b.Zg&&b.Zg(d)}):void 0!==b.Zg&&b.Zg(d))};this.KE=function(){void 0!==b.Bf&&(b.Bf.style.display="block")};this.SC=function(){void 0!==b.Bf&&(b.Bf.style.display="none")};this.element.removeAttribute("id");H(this.element,"menuItem");this.element.style.padding="9px 0";this.element.style.cursor="pointer";this.element.style.boxSizing="border-box";this.element.style.position="relative";this.element.style.overflow="visible";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";void 0!==a.Bf&&(this.Bf=a.Bf,this.Bf.style.top="57px",this.element.appendChild(a.Bf));this.$g=document.createElement("dt");this.$g.style.margin="0";this.$g.style.padding="0 8px 5px 28px";this.$g.style.backgroundSize="14px 14px";this.$g.innerText=a.label;this.element.appendChild(this.$g);var c=a.description;void 0!==c&&0<c.length&&(this.uk=document.createElement("dd"),this.uk.style.margin="0",this.uk.style.padding="0 8px 0 28px",this.uk.innerText=c,this.element.appendChild(this.uk));Rk+=1;c="ButtonMenuItem"+Rk.toString();this.input=document.createElement("input");this.input.id=c;this.input.setAttribute("name",c);this.input.setAttribute("type","radio");this.input.style.cursor="pointer";this.input.style.position="absolute";this.input.style.opacity="0";this.input.style.width="0";this.input.style.height="0";this.element.appendChild(this.input);void 0!==a.Zg&&(this.Zg=a.Zg);v("mouseenter",this.element,function(){b.disabled&&void 0!==b.Bf&&b.KE()});v("mouseleave",this.element,function(){b.disabled&&void 0!==b.Bf&&b.SC()});this.jm=a.jm;v("click",this.element,function(d){b.disabled?void 0!==b.Zg&&b.Zg(d):b.jm(d)});v("touchstart",this.element,this.GD);v("focus",this.input,function(){b.element.style.outline="2px solid Highlight"});v("blur",this.input,function(){b.element.style.removeProperty("outline")})}r(Qk,G);k=Qk.prototype;k.select=function(){H(this.$g,"selected")};k.Le=function(){return this.data.value};k.Vo=function(){var a=this.data.ew;return void 0===a?this.data.label:a};k.disable=function(){this.disabled||(this.disabled=!0,H(this.element,"disabled"))};k.enable=function(){this.disabled&&(this.disabled=!1,I(this.element,"disabled"))};var Rk=0;function Sk(a,b){L.call(this);var c=this;this.width=280;this.visible=!1;this.Kv=new F("visibilityChange");this.Lu=new F("selectionChange");var d=[],e=a.length;0===e&&u("ButtonMenu requires at least one option!");H(this.element,"menu");this.element.style.padding="0";this.element.style.display="none";this.element.style.width=this.width+"px";this.element.style.textAlign="left";this.element.style.fontSize="14px";this.element.style.lineHeight="14px";this.element.style.borderRadius="2px";this.P.style.zIndex="1002";this.element.style.zIndex="1003";this.element.style.overflow="visible";this.element.style.removeProperty("height");for(var f=-1,g=e-1,h={},m=0;m<e;h={$d:h.$d,eo:h.eo},m+=1){var n=a[m];n.value===b&&(f=m);n.jm=function(p){return function(A){A.stopPropagation();Tk(c,p.$d)}}(h);h.$d=new Qk(n);h.eo=function(p){return function(A){A.preventDefault();A.stopPropagation();Tk(c,p.$d);return!1}}(h);v("keyup",h.$d.input,function(p){return function(A){return 32===A.keyCode?p.eo(A):!0}}(h));v("keydown",h.$d.input,function(p){return function(A){return 13===A.keyCode?p.eo(A):!0}}(h));0===m&&(h.$d.element.style.borderTopWidth="1px",h.$d.element.style.borderTopLeftRadius="2px",h.$d.element.style.borderTopRightRadius="2px");m===g&&(h.$d.element.style.borderBottomLeftRadius="2px",h.$d.element.style.borderBottomRightRadius="2px");this.J(h.$d);d.push(h.$d.input)}this.rn=this.children()[-1===f?0:f];this.yk=d;this.Lu.j(function(p){p.current.select();void 0!==p.previous&&I(p.previous.$g,"selected")});this.Sb.j(function(){c.D()})}
r(Sk,L);k=Sk.prototype;k.Le=function(){return this.rn.Le()};k.Vo=function(){return this.rn.Vo()};k.isVisible=function(){return this.visible};k.show=function(a){this.isVisible()||(this.Kv.h(!0),this.element.style.display="inline-block",this.element.style.top=a.top+"px",this.element.style.left=a.left+"px",this.cf(),this.visible=!0,this.Z())};k.D=function(a){a=void 0===a?!1:a;this.isVisible()&&(a||this.Kv.h(!1),this.visible=!1,this.element.style.display="none",this.kb())};k.toggle=function(a){this.isVisible()?this.D():this.show(a)};k.qf=function(){L.prototype.qf.call(this);var a={current:this.rn};a.current.select();void 0!==a.previous&&I(a.previous.$g,"selected")};k.Js=function(){for(var a,b=this.parent;void 0!==b;b=b.parent)if("hidden"===window.getComputedStyle(b.element).overflowY){a=b.element;break}return a};k.G=function(){if(this.isVisible()){var a=this.Js();a=(void 0!==a?a.getBoundingClientRect().bottom:document.documentElement.clientHeight)-this.element.getBoundingClientRect().bottom;32>a&&(this.element.style.top=this.element.offsetTop-(32-a)+"px")}};function Tk(a,b){var c=a.rn;a.D();b!==c&&(a.rn=b,a.Lu.h({previous:c,current:b}))}
function Uk(a){G.call(this);var b=this;this.enabled=this.lk=this.Lm=!0;this.fF=new F("tipTypeChange");H(this.element,"sendTip");this.element.style.margin="6px";this.element.style.display="inline-block";this.element.style.verticalAlign="top";this.element.style.overflow="visible";this.element.style.position="static";this.element.style.removeProperty("width");this.element.style.removeProperty("height");this.Jb=Vk(this);this.Ie=Wk(this);this.Ie.innerHTML="&#9660;";this.Ie.id="id_tip_type_select_tm";this.Cc=new Sk(Xk,a);this.Jb.innerText=this.Cc.Vo();a=q(this.Cc.children());for(var c=a.next();!c.done;c=a.next())Yk(c.value);this.element.appendChild(this.Jb);this.element.appendChild(this.Ie);this.Di=this.Cc.Le();this.J(this.Cc);this.Cc.Lu.j(function(d){b.lk&&(Zk(b,d.current.Le()),b.Jb.focus())});v("mouseenter",this.Jb,function(){b.Jb.style.textDecoration="underline"});v("mouseleave",this.Jb,function(){b.Jb.style.textDecoration="none"});v("click",this.Ie,function(d){d.preventDefault();d.stopPropagation();d=b.element;var e=wc(b.Jb);b.Cc.toggle({top:e.height+2*e.top,left:d.offsetLeft+d.offsetWidth+1-b.Cc.width});return!1});this.Cc.Kv.j(function(d){d||b.Jb.focus()});this.yk=[this.Jb,this.Ie];K.j(function(d){if(!0!==d.C.pB)b.lk=!1,d=b.Cc.children(),1<d.length&&d[1].disable(),Zk(b,"public");else{d=b.Cc.Le();b.lk=!0;var e=b.Cc.children();1<e.length&&e[1].enable();Zk(b,d)}})}r(Uk,G);function $k(a,b){a.Jb.innerHTML=b+" &#9656;";a.Lm&&(a.hasFocus()&&a.Jb.focus(),a.Lm=!1,a.Cc.D(),a.Jb.style.borderRadius="4px",a.Ie.style.display="none",a.yk=[a.Jb])}function al(a){a.lk?a.Jb.innerText=a.Cc.Vo():a.Jb.innerHTML=""+td}k=Uk.prototype;k.isEnabled=function(){return this.enabled};k.disable=function(){this.isEnabled()&&(this.enabled=!1,this.Cc.D(),this.Jb.disabled=!0,H(this.Jb,"disabled"),this.Ie.disabled=!0,H(this.Ie,"disabled"))};k.enable=function(){this.isEnabled()||(this.enabled=!0,this.Jb.disabled=!1,I(this.Jb,"disabled"),this.Ie.disabled=!1,I(this.Ie,"disabled"))};k.hasFocus=function(){return-1<bl(this).index};function cl(a){a=bl(a);var b=a.elements.length;--a.index;if(-2===a.index)a.index=b-1;else if(-1===a.index)return!1;a.elements[a.index].focus();return!0}function dl(a){a=bl(a);var b=a.elements.length;a.index+=1;if(a.index>=b)return!1;a.elements[a.index].focus();return!0}
function bl(a){var b=a.yk;a.Lm&&a.Cc.isVisible()&&(b=a.yk.concat(a.Cc.yk));return{elements:b,index:b.indexOf(document.activeElement)}}function Zk(a,b){a.Di=b;a.fF.h(b);al(a)}function Yk(a){a.$g.style.fontFamily="'UbuntuMedium', Helvetica, Arial, sans-serif";void 0!==a.uk&&(a.uk.style.fontFamily="'UbuntuRegular', Helvetica, Arial, sans-serif")}
k.Eo=function(){var a=document.createElement("button");H(a,"buttons");a.style.position="relative";a.style.display="inline-block";a.style.cursor="pointer";a.style.fontSize="14px";a.style.borderWidth="1px";a.style.borderStyle="solid";a.style.height="32px";a.style.verticalAlign="top";a.style.margin="0";v("focus",a,function(){a.style.zIndex="100"});v("blur",a,function(){a.style.zIndex="auto"});return a};function Vk(a){a=a.Eo();a.setAttribute("type","submit");a.style.padding="6px 18px";a.style.borderRadius="4px 0 0 4px";a.style.borderRight="0 none transparent";return a}function Wk(a){a=a.Eo();a.style.padding="6px 0";a.style.borderRadius="0 4px 4px 0";a.style.width="24px";return a}
var Xk=[{label:wd,value:"public",description:xd,ew:td,jm:function(){}},{label:yd,value:"anonymous",description:zd,ew:Ad,jm:function(){},Zg:function(){C("SupporterPageOpened",{source:"anon_tip"});window.top.location.href="/supporter/upgrade/"},Bf:Hk({content:oi,wm:!1,width:240,de:0,Df:"40px"}),$w:oi+" "+Cd}];function el(a,b){window.setTimeout(function(){b.lk&&C("SendTipViewed",{source:a,tipType:b.Di,localStorage:t()})},0)}
function fl(){var a=document.createElement("input");H(a,"tipAmountInput");v("keypress",a,function(b){b.metaKey||8===b.charCode||0===b.charCode||13===b.charCode||48<=b.charCode&&57>=b.charCode||b.preventDefault()});v("paste",a,function(){window.setTimeout(function(){/^[1-9]\d*$/.test(a.value)||(a.value="")},0)});return a}var gl;function hl(a){a=void 0===a?!1:a;var b=""===window.location.search?"/tipping/purchase_tokens/":"/tipping/purchase_tokens/"+window.location.search,c=new Rb;c.aj&&c.active?(b=c.Qv,c=""===window.location.search?"/tipping/purchase_tokens/":"/tipping/purchase_tokens/"+window.location.search,"PrchPgIfrmV3"===b?a?nj(c,"_blank","height=715, width=430, scrollbars=1"):void 0===gl||gl.lt?gl=new Mj:gl.show():"PrchPgPopupV3"===b?nj(c,"_blank","height=715, width=430, scrollbars=1"):nj(c,"_blank","height=615, width=850")):nj(b,"_blank","height=615, width=850")}function il(a){for(var b=q(document.querySelectorAll(".tokencount[updatable-count]")),c=b.next();!c.done;c=b.next())c.value.textContent=""+a}function jl(a){a.onclick=function(b){b.ctrlKey||b.metaKey||(b.preventDefault(),hl(b.target.className.includes("popup_only")))};""===a.href&&(a.href="/tipping/purchase_tokens/")};function kl(a,b,c){b=void 0===b?!0:b;G.call(this,"div",c);var d=this;this.hf=new F("dropDownToggled",{Ed:!1});this.Mb=a;void 0!==a&&(v("click",a,function(e){e instanceof MouseEvent&&(e.metaKey||e.ctrlKey)||d.Pq(e)},!1),v("keydown",a,function(e){if(32===e.keyCode||"Space"===e.code)e.preventDefault(),d.Pq(e)}));ll(this,b)}r(kl,G);kl.prototype.qa=function(a){G.prototype.qa.call(this,a);this.element.style.overflow="visible";this.element.style.position="absolute";this.element.style.top="0";this.element.style.left="0";this.element.style.right="auto";this.element.style.bottom="auto";this.element.style.width="";this.element.style.height="";this.element.style.display="none"};kl.prototype.Bb=function(a,b){if(this.Rb())return!1;this.element.style.display=void 0===a?"block":a;this.hf.h(new ml(!0,b));return!0};kl.prototype.Va=function(a){if(!this.Rb())return!1;this.element.style.display="none";this.hf.h(new ml(!1,a));return!0};kl.prototype.Pq=function(a){if(this.Rb())return this.Va(a),!1;this.Bb(void 0,a);return!0};function ll(a,b){b=void 0===b?!0:b;nl.j(function(c){!(a.Rb()&&c.target instanceof Element)||b&&a.element.contains(c.target)||void 0!==a.Mb&&a.Mb.contains(c.target)||a.Va(c)})}function ol(a){kl.call(this,a)}r(ol,kl);ol.prototype.qa=function(){kl.prototype.qa.call(this);this.element.style.display="block"};ol.prototype.Bb=function(){var a=this.element.parentElement;if(null===a)return!1;a.classList.toggle("pushmenu-animate",!0);this.hf.h(new ml(!0));return!0};ol.prototype.Va=function(){var a=this.element.parentElement;if(null===a)return!1;a.classList.toggle("pushmenu-animate",!1);this.hf.h(new ml(!1));return!0};ol.prototype.Rb=function(){var a=this.element.parentElement;return null===a?!1:a.classList.contains("pushmenu-animate")};function ml(a,b){this.Sc=a;this.event=b}var nl=new F("documentClick"),pl=!1,ql;v("touchmove",document,function(){pl=!0});v("touchstart",document,function(){pl=!1});v("click",document,function(a){nl.h(a);void 0!==ql&&(clearTimeout(ql),ql=void 0)});(eb()||fb())&&v("touchend",document,function(a){pl||(ql=window.setTimeout(function(){ql=void 0;nl.h(a)},200))},!1);function rl(a){G.call(this,"div");this.element.style.height="";this.element.style.width="";this.element.style.position="relative";void 0!==a&&(a instanceof G?this.J(a):this.element.appendChild(a))}r(rl,G);function sl(a,b){kl.call(this,a,!1);var c=this;this.Mb=a;this.oB=!0===b;this.Aw=new tl;this.J(this.Aw);Bk.j(function(){c.Rb()&&c.ni()})}r(sl,kl);sl.prototype.Bb=function(a,b){if(!kl.prototype.Bb.call(this,void 0===a?"block":a,b))return!1;this.Mb.classList.add("active");document.body.appendChild(this.element);this.ni();return!0};sl.prototype.Va=function(a){if(!kl.prototype.Va.call(this,a))return!1;this.Mb.classList.remove("active");document.body.removeChild(this.element);return!0};sl.prototype.ni=function(){var a=sk(this.Mb),b=this.oB||this.element.offsetWidth+a.left>document.documentElement.clientWidth&&0<a.right-this.element.offsetWidth;this.element.style.position="absolute";this.element.style.backgroundColor=rk(this.Mb);"0px"!==ul(this,b?"borderRightWidth":"borderLeftWidth")&&(this.element.style.borderWidth=ul(this,b?"borderRightWidth":"borderLeftWidth"),this.element.style.borderStyle=ul(this,b?"borderRightStyle":"borderLeftStyle"),this.element.style.borderColor=ul(this,b?"borderRightColor":"borderLeftColor"));var c=ul(this,b?"borderTopRightRadius":"borderTopLeftRadius");""!==c&&(this.element.style.borderRadius=(b?c+" 0":"0 "+c)+" "+c+" "+c);c=tk(getComputedStyle(this.element).borderBottomWidth)-tk(getComputedStyle(this.Mb).borderLeftWidth);this.element.style.top=a.bottom+4+"px";b?(this.element.style.left="",a=document.documentElement.clientWidth-a.right-c,this.element.style.right=a+"px",this.element.style.right=a-vl(this.Mb,this.element)-c+"px"):(this.element.style.right="",a=a.left-c,this.element.style.left=a+"px",this.element.style.left=a+wl(this.Mb,this.element)-c+"px");a=this.Aw;var d=this.Mb,e=getComputedStyle(this.element);a.element.style.borderLeftWidth=e.borderLeftWidth;a.element.style.borderLeftStyle=e.borderLeftStyle;a.element.style.borderLeftColor=e.borderLeftColor;a.element.style.borderRightWidth=e.borderLeftWidth;a.element.style.borderRightStyle=e.borderLeftStyle;a.element.style.borderRightColor=e.borderLeftColor;var f=tk(getComputedStyle(d).width)+2*c;a.element.style.width=f+"px";var g=this.element.offsetTop-sk(d).bottom+1;a.element.style.height=g+2+"px";a.element.style.top="-"+(g+2)+"px";a.element.style.backgroundColor=e.backgroundColor;g=Cc(e.borderWidth,e.borderLeftWidth);a.element.style.right=b?"-"+g:"";a.element.style.left=b?"":"-"+g;a.element.style.zIndex=""+(parseInt(Cc(e.zIndex,"0"))+1);a.element.style.width=b?f-wl(d,a.element)+c+"px":f+vl(d,a.element)+c+"px";this.element.style.zIndex=""+(nk(this.element)+1)};function ul(a,b){return Cc(a.Mb.style[b],getComputedStyle(a.Mb)[b])}function tl(){G.call(this);pk(this.element,{position:"absolute",zIndex:4})}r(tl,G);function wl(a,b){return a.getBoundingClientRect().left-b.getBoundingClientRect().left}function vl(a,b){return a.getBoundingClientRect().right-b.getBoundingClientRect().right};function xl(a,b){G.call(this,a);var c=this;this.Ww="inline-block";this.Mr=new F("collapse",{Ed:!1});this.li=[];this.cv=[];this.Ah=new rl;this.Nr=[];if(void 0===a||"string"===typeof a)this.element.appendChild(document.createTextNode(yl)),pk(this.element,{cursor:"pointer",width:"",height:"",padding:"0 10px",textAlign:"center"});this.fe=new sl(this.element,!0===b);pk(this,{userSelect:"none"});this.Va();pk(this.Ah,{cssFloat:"right",height:"100%",visibility:"hidden"});this.fe.hf.j(function(d){c.onToggle(d)});Bk.j(function(d){c.fe.Rb()&&c.fe.Va();zl(c,!d)});window.setTimeout(function(){if(void 0!==c.parent||null!==c.element.parentElement){var d=void 0===c.parent?c.element.parentElement:c.parent.element;a:{if(void 0!==c.parent){var e=q(c.parent.children());for(var f=e.next();!f.done;f=e.next())if(f=f.value,Al(f.element)){e=f;break a}}e=void 0}void 0!==e&&d.insertBefore(c.Ah.element,e.element.nextSibling)}zl(c)})}r(xl,G);function zl(a,b){b=void 0===b?!0:b;var c=a.fe.Rb();c&&Bl(a);Cl(a);if(0===a.li.length)a.Rb()&&(a.Va(),a.Ah.element.style.paddingLeft="0px",a.Mr.h(!1));else{var d;if(d=1===a.li.length&&a.Rb()){d=a.li[0];var e=getComputedStyle(d.element);d=d.element.offsetWidth+tk(e.marginLeft)+tk(e.marginRight)+5<=a.element.offsetWidth+a.Ah.element.offsetLeft-a.element.offsetLeft}d?(a.Va(),d=a.Ah.element.style.paddingLeft,a.Ah.element.style.paddingLeft="0px",Cl(a),0<a.li.length?(a.Bb(a.Ww),a.Ah.element.style.paddingLeft=d):a.Mr.h(!1)):a.Rb()||(a.Bb(a.Ww),a.ni(),a.Mr.h(!0),Cl(a))}b&&a.Rb()&&Dl(a);c&&(0===a.li.length?a.fe.Va():(El(a),a.fe.ni()))}xl.prototype.G=function(){G.prototype.G.call(this);zl(this)};xl.prototype.onToggle=function(a){a.Sc?(Cl(this),El(this)):Bl(this)};function El(a){a.li.forEach(function(b){a.Nr.unshift([b,b.nextSibling()]);a.fe.J(b);b.collapse(!0)})}
function Bl(a){var b=a.parent;a.Nr.forEach(function(c){var d=c[0];c=c[1];void 0!==d.parent&&d.parent!==b&&d.parent.removeChild(d);c=void 0===c?-1:b.Ug.indexOf(c);0>c?b.element.appendChild(d.element):b.element.insertBefore(d.element,b.Ug[c].element);b.Ug.splice(c,0,d);d.parent=b;d.collapse(!1)});a.Nr=[]}function Fl(a){return void 0===a.parent?[]:a.parent.children().filter(function(b){return b instanceof Gl&&b.Rb()})}
function Cl(a){if(null!==a.element.parentElement&&null!==a.element.parentElement.offsetParent){var b=Fl(a);a.li=[];a.cv=[];b.forEach(function(c){c.element.offsetTop+2>=c.element.offsetHeight?a.li.push(c):a.cv.push(c)})}}
xl.prototype.ni=function(){null!==this.element.parentElement&&(pk(this.element,{position:"absolute",boxSizing:"border-box",textAlign:"center"}),this.Ah.element.style.paddingLeft=this.element.offsetWidth+"px",this.element.removeAttribute("data-floatingnav"),""===this.element.style.width&&(this.element.style.width=this.element.offsetWidth+1+"px"))};function Dl(a){if(void 0!==a.parent){for(var b=0,c=q(a.parent.children()),d=c.next();!d.done;d=c.next())d=d.value,!Al(d.element)||d===a||d instanceof Gl&&-1===a.cv.indexOf(d)||(b=Math.max(d.element.offsetLeft+d.element.offsetWidth+tk(getComputedStyle(d.element).marginRight),b));a.element.offsetLeft!==b&&(a.element.style.left=b+"px",window.setTimeout(function(){a.element.style.left=""}))}}var yl=".\u2009.\u2009.";function Al(a){return"none"!==a.style.display&&"right"!==a.style.cssFloat&&"absolute"!==a.style.position&&"fixed"!==a.style.position}function Gl(a){G.call(this,void 0===a?"div":a);var b=this;this.Vp=new F("collapse",{Ed:!1});this.collapsed=!1;window.setTimeout(function(){b.Vp.h(b.collapsed)})}r(Gl,G);Gl.prototype.collapse=function(a){(this.collapsed=a)?this.element.classList.add("collapsed"):this.element.classList.remove("collapsed");this.Vp.h(a)};function Hl(){G.call(this);this.Wj={position:"relative",padding:"5px",margin:"2px 0 0 2px",borderRadius:"4px 4px 0 0",minWidth:"16px",width:"auto",height:"auto",fontSize:"10px",cursor:"pointer",cssFloat:"left",CJ:"none",WebkitTextSizeAdjust:"none",userSelect:"none"};this.VE={cursor:"default"};H(this.element,"BaseTabsContainer");this.Kb=new rl;this.Kb.element.id="tab-row";this.Kb.element.style.overflow="hidden";this.Kb.element.style.width="100%";G.prototype.J.call(this,this.Kb);this.window=document.createElement("div");this.window.style.width="100%";this.window.style.position="absolute";this.element.appendChild(this.window)}r(Hl,G);function Il(a){var b=document.createElement("A");H(b,"feedbackLink");b.href=Jl.Gv;b.target="_blank";b.innerText=Mg;b.style.fontSize="11px";b.style.textAlign="center";b.style.width="100%";b.style.display="block";b.style.padding="5px 0";b.style.marginBottom="7px";a.element.appendChild(b)}k=Hl.prototype;k.G=function(){this.window.style.height=this.element.clientHeight-this.Kb.element.offsetHeight+"px"};k.J=function(){throw Error("addChild not implemented");};function Kl(a,b){b.element.style.width="100%";b.element.style.height="100%";b.element.style.display="none";G.prototype.J.call(a,b,a.window);a.yr(b);return b}k.yr=function(a){var b=Ll(a);this.Kb.J(b);a.qr();H(b,"tab");H(b,"chatAreaTabColor");return b};k.children=function(){return G.prototype.children.call(this).filter(function(a){return a instanceof Ml})};k.rb=function(a){this.Ph=a;Nl(this)};k.bc=function(){return this.Ph};function Nl(a){for(var b=a.children(),c=b.length-1;0<=c;--c){var d=b[c];d!==a.Ph?d.Va():a.Ph.active||d.Bb()}a.Z();a.qf()}k.Ub=function(){for(var a=!1,b=q(this.children()),c=b.next();!c.done;c=b.next())a=c.value.qr()||a;a&&this.Kb.Z()};k.ij=function(a){a.active?H(a.ba,"active"):(I(a.ba,"active"),a instanceof Ol&&(a.collapsed?H(a.ba,"collapsed"):I(a.ba,"collapsed")));return Object.assign(Object.assign(Object.assign({},this.Wj),a instanceof Ol&&a.collapsed?a.KC:{}),a.active?this.VE:{})};function Ml(){G.call(this);this.ny=this.active=!1;this.element.style.position="relative"}r(Ml,G);k=Ml.prototype;k.Xd=function(){Pl(this)};k.tj=function(){return"none"===this.ba.element.style.display};k.vg=function(){return"\u00a0"};k.gh=function(){return""};k.qr=function(){var a=this.ba.element.textContent;this.ba.element.textContent=this.vg();Ql(this);var b="none"===this.ba.element.style.display;this.ba.element.style.display=this.tj()?"none":"inline-block";return a!==this.ba.element.textContent||b!==("none"===this.ba.element.style.display)};function Ll(a){a.ba=a.Bw();tb(["click","touchstart"],a.ba.element,function(b){a.Xd(b);a instanceof Ol&&a.collapsed&&(a.ny=!1)});a.ba.element.textContent=a.vg();a.ba.element.id=a.gh();Ql(a);uk(a.ba).j(function(b){a.ny=b;Ql(a)});return a.ba}k.Bw=function(){return new G(document.createElement("div"))};function Pl(a){void 0===a.parent?u("no parent"):a.parent.rb(a)}function Rl(a){return void 0===a.parent?(u("no parent"),!1):a.parent.bc()===a}k.Ub=function(){void 0===this.parent?u("no parent"):this.parent.Ub()};k.ij=function(){return void 0!==this.parent?this.parent.ij(this):{}};function Ql(a){pk(a.ba,a.ij())}k.Va=function(){G.prototype.Va.call(this);this.active=!1;Ql(this)};k.Bb=function(){G.prototype.Bb.call(this);this.active=!0;Ql(this)};function Ol(){Ml.apply(this,arguments);this.KC={display:"block",cssFloat:"none",padding:"9px 12px",margin:0,borderRadius:"",border:"none",boxSizing:"border-box",width:"100%",height:"auto"}}r(Ol,Ml);Ol.prototype.Bw=function(){var a=this,b=new Gl(document.createElement("div"));b.Vp.j(function(c){a.collapsed=c;void 0!==a.DD&&a.DD(c);Ml.prototype.qr.call(a)});return b};function Sl(a){G.call(this);H(this.element,"twitterUpdateRow");this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.fontStyle="normal";this.element.style.fontWeight="normal";this.element.style.position="relative";this.element.style.height="";this.element.style.width="";this.element.style.margin="7px";this.element.style.padding="6px";a.wi?H(this.element,"seen"):I(this.element,"seen");Tl.active?H(this.element,"uipExp"):I(this.element,"uipExp");this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";Tl.active&&(this.element.style.margin="0px 0px 1px 0px",this.element.style.borderRadius="0px");var b=this.element,c=b.appendChild,d=document.createElement("div");d.innerHTML=a.text;Ul(d);H(d,"contentSection");d.style.fontSize="12px";d.style.lineHeight="14px";d.style.whiteSpace="pre-wrap";d.style.marginBottom="6px";d.style["word-wrap"]=d.style["word-break"]="break-word";d.style.overflow="hidden";c.call(b,d);""!==a.On&&(b=a.On,c=document.createElement("div"),H(c,"timeSince"),c.appendChild(document.createTextNode(b)),c.style.fontSize="9px",c.style.lineHeight="13px",c.style.cssFloat="left",Tl.active&&(c.style.fontSize="10px"),this.element.appendChild(c));""!==a.url&&(b="twitter_feed",void 0!==a.Ry&&(b=a.Ry),a=Vl(a.url,b),Tl.active&&(a.style.fontSize="10px"),this.element.appendChild(a))}r(Sl,G);function Ul(a){Array.from(a.querySelectorAll("a")).forEach(function(b){H(b,"tweetLink");b.target="_blank";b.style.outline="none";b.style.color=Tl.active?"#306A91":"#e45900";b.style.fontSize="12px";b.style.lineHeight="14px";null!==b.firstChild&&b.firstChild instanceof Text&&null!==b.firstChild.textContent&&(b.firstChild.textContent=b.firstChild.textContent.replace(/^http(s)?:\/\//,"").replace(/^www\./,""));b.onclick=function(){C("NewsfeedItemLinkClick")}})}var Tl=new Qb("UIPTest");function Vl(a,b){var c=document.createElement("a");c.href=a;c.target="_blank";a="twitter_feed"===b;c.appendChild(document.createTextNode(a?Kg:Lg));H(c,"twitterLink");c.style.fontSize="9px";c.style.lineHeight="13px";c.style.textAlign="right";c.style.cssFloat="right";a&&(c.onclick=function(){C("NewsfeedItemViewOnTwitter")});return c};function Wl(){G.call(this);this.element.style.overflow="";this.element.style.position="static";this.element.style.overflowX="hidden";this.element.style.overflowY="auto";Xl(this)}r(Wl,G);function Xl(a){if(/iPad|iPhone|iPod/.test(navigator.platform)){a.element.style["-webkit-overflow-scrolling"]="touch";var b=function(){a.element.style.overflowY="scroll";x("scroll",a.element,b)};v("scroll",a.element,b)}};function Yl(){Wl.call(this);this.J(new Sl({text:te+"...",wi:!0,timestamp:0,On:"",url:""}))}r(Yl,Wl);function Zl(a,b){Zb(a);0===b.length&&a.J(new Sl({text:""+ni,wi:!0,timestamp:0,On:"",url:""}));b.forEach(function(c){a.J(new Sl(c))})}Yl.prototype.qa=function(){H(this.element,"updatesTabContents");this.element.style.maxHeight="307px";this.element.style["-webkit-transform"]="translateZ(0)"};function $l(){Yl.apply(this,arguments)}r($l,Yl);$l.prototype.qa=function(){Yl.prototype.qa.call(this);this.element.style.maxHeight=""};var am=new F("dropDownToggle"),bm=new F("updatesAreRead"),cm=new F("toggleElementHasUnseen");function P(a){this.TA={};if("string"===typeof a){this.df=a;try{this.parsed=JSON.parse(a)}catch(b){this.parsed={},u("Cannot JSON parse",{message:a})}}else"object"===typeof a?(this.parsed=a,this.df=JSON.stringify(a)):u("Invalid input type",{message:a})}P.prototype.Mf=function(a){this.TA[a]=!0};function R(a,b){a.Mf(b);if(null!==a.parsed[b])return a.parsed[b]}function dm(a,b){a.Mf(b);if(null!==a.parsed[b]&&void 0!==a.parsed[b])return a.parsed[b].map(function(c){return new P(c)})}
function em(a,b){a.Mf(b);return Array.isArray(a.parsed[b])?a.parsed[b].map(function(c){return c}):[]}P.prototype.getAsString=function(a){return""+R(this,a)};function S(a,b,c){c=void 0===c?!0:c;var d=R(a,b);if("string"!==typeof d)c&&void 0!==d&&w("getStringOrUndefined("+b+"): "+d+" is wrong type",{message:a.df});else return d}function T(a,b,c){c=void 0===c?!0:c;var d=R(a,b);return"string"!==typeof d?(c&&w("getString("+b+"): "+d+" is wrong type",{message:a.df}),""):d}
function U(a,b,c){c=void 0===c?!0:c;var d=R(a,b);return"string"!==typeof d&&"number"!==typeof d?(c&&w("getStringWithNumbers("+b+"): "+d+" is wrong type",{message:a.df}),""):""+d}function V(a,b,c,d){c=void 0===c?!1:c;d=void 0===d?!0:d;var e=R(a,b);return"boolean"!==typeof e?(d&&w("getBoolean("+b+"): "+e+" is wrong type",{message:a.df}),c):e}function W(a,b,c){c=void 0===c?!0:c;var d=R(a,b);return"number"!==typeof d?(c&&w("getNumber("+b+"): "+d+" is wrong type",{message:a.df}),NaN):d}
function fm(a,b){var c=void 0===c?!0:c;var d=R(a,b);if("number"!==typeof d)c&&void 0!==d&&w("getNumberOrUndefined("+b+"): "+d+" is wrong type",{message:a.df});else return d}function gm(a,b){return new P(hm(a,b))}function im(a,b,c){a=jm(a,b,void 0===c?!0:c);if(void 0!==a)return new P(a)}function km(a,b){a=lm(a,b);return""===a?new P("{}"):new P(a)}
function lm(a,b,c){c=void 0===c?!0:c;var d=R(a,b);return"object"!==typeof d?(c&&w("getObjectString("+b+"): "+d+" is wrong type",{message:a.df}),""):JSON.stringify(d)}function mm(a,b,c){c=void 0===c?!0:c;var d=R(a,b);if("object"!==typeof d)c&&void 0!==d&&w("getObjectStringOrUndefined("+b+"): "+d+" is wrong type",{message:a.df});else return JSON.stringify(d)}
function hm(a,b){var c=void 0===c?!0:c;var d=R(a,b);return"object"!==typeof d?(c&&w("getObject("+b+"): "+d+" is wrong type",{message:a.df}),{}):d}function jm(a,b,c){c=void 0===c?!0:c;var d=R(a,b);if("object"!==typeof d)c&&void 0!==d&&w("getObjectOrUndefined("+b+"): "+d+" is wrong type",{message:a.df});else return d}function nm(a){var b=[],c;for(c in a.parsed)!0!==a.TA[c]&&b.push(c);b=q(b);for(c=b.next();!c.done;c=b.next())c=c.value,"object"===typeof a.parsed[c]&&JSON.stringify(a.parsed[c])};function om(a){var b=["twitter_feed","offline_tip"].map(function(c){return"notification_type="+c}).join("&");y("notifications/updates/?"+b).then(function(c){c=dm(new P(c.responseText),"items");void 0!==c&&(c=c.map(function(d){return{text:T(d,"text"),url:T(d,"url"),timestamp:W(d,"timestamp"),On:T(d,"time_since"),wi:V(d,"seen"),Ry:T(d,"notification_type")}}),a(c))}).catch()}function pm(a,b){y("notifications/record_last_seen/?timestamp="+a).then(function(){b()})};function qm(){}function rm(){this.enabled=!0;this.dy=!1;this.Gl=new Map;this.creationTime=(new Date).getTime();this.$l=new F("connectionStateChange");this.disabled=new F("disabled",{oe:1,Rd:1})}k=rm.prototype;k.gt=function(){return this.dy?Promise.resolve():this.enabled?(this.dy=!0,Promise.resolve()):Promise.reject(this.vs)};k.isEnabled=function(){return this.enabled};k.disable=function(a){this.enabled=!1;this.isConnected()&&this.close();void 0===this.vs&&(this.vs=a,this.disabled.h(a))};function sm(a,b,c){c=void 0===c?{}:c;void 0!==Jb&&(c.action=b,c.created=a.creationTime,c.client=a.RB,C("PushServiceClient",c))}k.isConnected=function(){return"connected"===tm(this.qe.connection.state)};function um(a){return a.isConnected()?Promise.resolve():a.isEnabled()?a.connect():Promise.reject(a.vs)}
function vm(a,b){return um(a).then(function(){var c=wm(a.auth,b);return void 0===c||(new Date).getTime()>=c.expires?Promise.reject("Auth context has no capability: "+a.auth.yi()):Promise.resolve()})}k.xt=function(a){var b=wm(this.auth,a);return void 0!==b&&!((new Date).getTime()>=b.expires)&&this.Gl.has(a.Oc())};function xm(a,b){a.Gl.set(b.Oc(),b);b.vm()}function ym(a,b){a.Gl.has(b.Oc())&&a.Gl.delete(b.Oc())}k.Ax=function(){return""};function zm(a){this.uv=a}r(zm,qm);zm.prototype.Oc=function(){return this.uv};zm.prototype.Wh=function(){return this.uv};zm.prototype.vm=function(){};function Am(){this.uv=Bm}r(Am,zm);Am.prototype.Wh=function(){return Bm};Am.prototype.Na=function(a){return{text:T(a,"text"),url:T(a,"url"),timestamp:W(a,"timestamp"),On:T(a,"time_since"),wi:V(a,"seen",!1,!1)}};Am.prototype.listener=function(a){Cm.h(a)};var Bm="global:news",Cm=new F(Bm);function Dm(a){function b(d,e){e=String(e.getAttribute("data-callback"));"null"!==e&&(window[e]=function(){d.ry=!0;d.zo()})}var c={name:"",he:"",Cs:"",py:!1,qp:!1,Em:!1,jy:!1,Xo:!0,eD:!1,ut:!1,EG:"",ry:!1,Xx:a,pc:function(){c.Cs=String(a.tagName.toLowerCase());var d=c.Ps();c.name=null!==d?d:"";c.he=c.name;if("captcha"===a.getAttribute("data-type"))c.ut=!0,b(c,a);else{var e=String(a.getAttribute("id")).split("_"),f=e[e.length-1];var g=["day","month","year"];d=!1;if(-1<g.indexOf(f))for(e.pop(),e=e.join("_"),d=!0,g=q(g),f=g.next();!f.done;f=g.next())null===document.querySelector("#"+(e+"_"+f.value))&&(d=!1);d&&(c.eD=!0,d=String(a.getAttribute("id")).split("_"),d.shift(),d.pop(),c.he=d.join("_"))}d=String(a.getAttribute("type"));"checkbox"===d?c.qp=!0:"hidden"===d?c.Em=!0:"select"===c.Cs&&"select-multiple"===a.type&&(c.py=!0);c.jy=null!==a.getAttribute("disabled");c.Kx()&&(c.Xo=!1)},Ps:function(){if("captcha"===a.getAttribute("data-type")){var d=String(a.getAttribute("id")).split("_");d.shift();d=d.join("_")}else d=a.getAttribute("name");return d},JE:function(){if(!c.Em&&!c.ut){var d=document.querySelector("#"+c.he+"_spinner");null!==d&&d.classList.remove("formvalidate_hidden")}},RC:function(){var d=document.querySelector("#"+c.he+"_spinner");null!==d&&d.classList.add("formvalidate_hidden")},FC:function(){return String(a.getAttribute("id"))},Wo:function(){return c.qp?a.checked?"on":"":a.value},ow:function(){c.Xo=!1},Kx:function(){if(c.Em)return!1;var d=document.querySelector("."+c.he+"_error");return null!==d&&"none"!==d.style.display},nA:function(d,e){c.Em||(e&&(c.Xo=!1),c.Xo||(document.querySelector("."+c.he+"_error .error_msg").appendChild(document.createTextNode(d)),d=document.querySelector("."+c.he+"_error"),d.style.display="tr"===String(d.tagName.toLowerCase())?"table-row":"block",d=document.querySelector("."+c.he+"_label"),null!==d&&d.classList.add("formvalidate_error")))},zo:function(){if(!c.Em){for(var d=document.querySelector("."+c.he+"_error .error_msg");null!==d.firstChild;)d.removeChild(d.firstChild);document.querySelector("."+c.he+"_error").style.display="none";d=document.querySelector("."+c.he+"_label");null!==d&&d.classList.remove("formvalidate_error")}}};c.pc();return c}
function Em(a){function b(){var f=document.createElement("button");f.style.display="none";a.appendChild(f);window.setTimeout(function(){f.click();a.removeChild(f)},0)}var c=!1;c=void 0===c?!0:c;var d="1"===a.getAttribute("data-formvalidate-disable-on-submit")?[].concat(fa(a.querySelectorAll("button:not([type=button]),input[type=submit]"))):[],e={ej:[],XG:a,Qe:!0,Mk:!1,Nk:!1,YA:"",Is:{},wy:{},Kj:!1,tt:!1,fn:[],pc:function(){e.YA=String(a.getAttribute("data-formvalidate")).substring(1);if(c){v("submit",a,function(p){e.Mk?p.preventDefault():(e.Mk=!0,e.Qe&&!e.Nk?e.sz(p):(e.tt=!1,d.map(function(A){return A.disabled=!0}),e.validate(!0).then(function(){e.Qe?e.sz(p):(e.Mk=!1,d.map(function(A){return A.disabled=!1}))}).catch(function(){e.Mk=!1;d.map(function(A){return A.disabled=!1})}),p.preventDefault()))});var f=a.getAttribute("data-formvalidate-eagerness")?Number(a.getAttribute("data-formvalidate-eagerness")):2,g;"1"===a.getAttribute("data-formvalidate-debounce")&&(g=new xk(function(){e.validate()},{yd:1E3,ce:2}));for(var h=q(a.querySelectorAll("input[type=text], input[type=checkbox], input[type=password], input[type=email], select")),m=h.next();!m.done;m=h.next()){m=m.value;var n=m.getAttribute("data-formvalidate-eagerness")?Number(m.getAttribute("data-formvalidate-eagerness")):f;1<=n&&v("change",m,function(p){e.ej[e.Is[String(p.target.getAttribute("id"))]].ow();e.validate()});2<=n&&v("input",m,function(p){e.ej[e.Is[String(p.target.getAttribute("id"))]].ow();void 0!==g?yk(g):e.validate()})}}f=0;h=q(a.querySelectorAll("input[type=text], input[type=checkbox], input[type=hidden], input[type=password], input[type=email], select, .g-recaptcha"));for(m=h.next();!m.done;m=h.next())m=Dm(m.value),e.ej.push(m),e.Is[m.FC()]=f,f+=1},yi:function(){return e.ej.map(function(f){if(""!==f.name&&!f.jy){if(f.py)return Array.from(f.Xx.options).filter(function(h){return h.selected}).map(function(h){return encodeURIComponent(f.name)+"="+encodeURIComponent(h.value)}).join("&");if(!f.qp&&"radio"!==f.Cs||f.Xx.checked){var g=f.Wo();return encodeURIComponent(f.name)+"="+encodeURIComponent(g)}}}).filter(function(f){return void 0!==f}).join("&").replace("%20","+")},validate:function(f){f=void 0===f?!1:f;if(e.Nk&&!f)return e.Kj=!0,Promise.resolve();e.Nk=!0;for(var g={},h={},m=!1,n=q(e.ej),p=n.next();!p.done;p=n.next())if(p=p.value,h[p.name]=p.Wo(),p.qp&&""===p.Wo()||(g[p.name]=p.Wo()),h[p.name]!==e.wy[p.name]||f)p.JE(),m=!0;if(!m)return e.Nk=!1,e.Kj&&(e.Kj=!1,e.validate()),Promise.resolve();e.wy=Object.assign({},h);return B(e.YA,g).then(function(A){A=JSON.parse(A.responseText);e.Qe=A.valid;for(var z=q(e.ej),D=z.next();!D.done;D=z.next())D=D.value,D.ut&&!D.ry?(D.zo(),D.nA("Captcha has to be completed",f)):void 0!==A.errors[D.he]?(D.zo(),D.nA(A.errors[D.he],f)):D.zo(),D.RC();e.PB();if(void 0!==A.errors.__all__){A=q(A.errors.__all__);for(z=A.next();!z.done;z=A.next())e.kB(z.value);e.GE()}e.Nk=!1;e.Kj&&(e.Kj=!1,e.validate())}).catch(function(A){Fm("error: "+A);e.Nk=!1;if(e.Kj)e.Kj=!1,e.validate();else throw A;})},sz:function(f){d.map(function(g){return g.disabled=!0});if(e.tt||0===e.fn.length)return window.setTimeout(function(){d.map(function(g){return g.disabled=!1})},700),Promise.resolve();f.preventDefault();return Promise.all(e.fn.map(function(g){return g()})).then(function(g){e.Mk=!1;window.setTimeout(function(){d.map(function(h){return h.disabled=!1})},10);g.reduce(function(h,m){return h&&m},!0)&&(e.tt=!0,b())}).catch(function(g){u("Can't complete preSubmitValidation in form "+a.action,g);e.Mk=!1;d.map(function(h){return h.disabled=!1});throw g;})},kB:function(f){var g=document.querySelector("#error_notice > .errorlist"),h=document.createElement("li");h.appendChild(document.createTextNode(f));g.appendChild(h)},PB:function(){var f=document.querySelector("#error_notice");if(null!==f&&(f.classList.add("formvalidate_hidden"),f=document.querySelector("#error_notice > .errorlist"),null!==f))for(;null!==f.firstChild;)f.removeChild(f.firstChild)},GE:function(){var f=document.querySelector("#error_notice");null!==f&&f.classList.remove("formvalidate_hidden")},lH:function(){for(var f=!1,g=q(e.ej),h=g.next();!h.done;h=g.next())h=h.value,f=f||h.Kx();g=0!==Array.from(a.getElementsByClassName("errorlist")).filter(function(m){return""!==m.innerHTML.trim()}).length;return f||g},IF:function(f){e.fn.push(f);var g=!1;return function(){g||(e.fn.splice(e.fn.indexOf(f),1),g=!0)}}};e.pc();return e};var Gm="https://cbjpeg.stream.highwebmedia.com/",Hm="https://roomimg.stream.highwebmedia.com/";var Im=ab()&&!hb();function Jm(a,b,c){c=void 0===c?{}:c;this.W=a;this.mp=b;this.ir=this.El=!1;this.Gs=this.gi=0;this.options=Object.assign(Object.assign({},{Uj:!1,lD:!0,jx:2E3}),c);a=navigator.userAgent.match(/Puffin\/(\d)/);this.QE=null!==a&&8>parseInt(a[1])?1500:140;this.options.Uj?this.Uj():this.options.lD&&Km(this,0)}Jm.prototype.kl=function(){this.ir||(Lm(this,!1),this.Gs=0,Km(this,0))};function Mm(a){return!a.El&&0<a.options.jx&&(new Date).getTime()<=a.Gs}
function Lm(a,b){a.Gs=b?0:(new Date).getTime()+a.options.jx;a.El=b}function Km(a,b){0===a.gi&&(a.gi=b);if(!(0===b||b-a.gi>a.QE))return Promise.resolve();a.gi=b;var c=a.El||Mm(a)?Gm+"minifwap/"+a.W+".jpg?f="+Math.random():Hm+"riw/"+a.W+".jpg?"+Math.floor((new Date).getTime()/3E4);return new Promise(function(d,e){var f=new Image;f.onload=function(){a.mp.onload=function(){a.ir=!0};a.ir=!1;a.mp.src=f.src;d()};f.onerror=function(){e("Error downloading image "+c)};f.src=c})}
Jm.prototype.Uj=function(){var a=this;if(!kb()){var b=this.El||Mm(this);Lm(this,!0);if(!b){var c=function(d){(a.El||Mm(a))&&Km(a,d).then(function(){requestAnimationFrame(function(e){c(e)})}).catch(function(){c(0)})};c(0)}}};function Nm(a){"Escape"!==a.key&&a.stopImmediatePropagation()}var Om="";K.j(function(a){Om=a.A.B()});function Pm(){function a(){""!==la.value.trim()&&""!==e.hk.value.trim()&&(e.vb.style.opacity="1")}function b(Q,na){return function(bb){"Tab"===bb.key&&(bb.preventDefault(),bb.shiftKey?na.focus():Q.focus())}}function c(Q,na,bb,Lc){var wf=document.createElement("label"),wa=document.createElement("input");wf.innerText=na;wf.htmlFor=Lc;wa.type=bb;wa.id=Lc;wa.name=Lc;wa.style.height="checkbox"===bb?"18px":"26px";wa.style.width="checkbox"===bb?"18px":"100%";wa.style.font="100% Arial,Helvetica,sans-serif";wa.style.color="#000";wa.style.boxSizing="border-box";wa.style.border="1px solid #d5d5d5";wa.style.padding="2px 4px";wa.style.margin="1px 0";wa.style.lineHeight="18px";wa.style.borderRadius="4px";v("keydown",wa,function(nh){"Enter"===nh.key&&(nh.preventDefault(),e.vb.click())});Q.appendChild(wf);Q.appendChild(wa);return wa}function d(Q){var na=document.createElement("div");na.style.display="block";na.style.margin="10px 0 0 0";Q.appendChild(na);return na}Lj.call(this,{Xk:function(){e.G();e.isVisible=!0;e.hk.focus();v("keydown",e.element,Nm);v(mc(),document,e.Xs);e.Xs()},Vk:function(){var Q=e.isVisible;e.element.style.display="none";e.isVisible=!1;Q&&(x("keydown",e.element,Nm),x(mc(),document,e.Xs));e.PA()},gm:!0});var e=this;this.isVisible=!1;this.PA=function(){void 0!==e.Ti&&(e.Ti.style.overflow="",e.Ti.style.visibility="",e.Ti.style.backgroundColor="")};this.Xs=function(){e.PA();null!==e.element.parentElement&&(e.Ti=e.element.parentElement,e.Ti.style.overflow="hidden",e.Ti.style.visibility="hidden",e.Ti.style.backgroundColor="#000000")};this.element.style.display="none";this.element.style.position="fixed";this.element.style.fontSize="12px";this.element.style.width="364px";this.element.style.height="264px";this.element.style.color="currentSiteSettings.defaultColor";this.element.style.margin="auto";this.element.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.4)";this.element.style.background="white";this.element.style.border="3px solid #0E6C92";this.element.style.borderRadius="10px";this.element.style.visibility="visible";this.P.style.backgroundColor="#000000";this.P.style.opacity="1";this.P.style.visibility="visible";this.P.style["-webkit-overflow-scrolling"]="touch";this.ld=document.createElement("form");this.ld.target="_top";this.ld.style.padding="5px 30px 10px 30px";this.ld.action="/auth/login/?next="+window.location.pathname+encodeURIComponent(window.location.search);this.ld.method="POST";this.ld.onclick=function(Q){Q.stopPropagation()};this.element.appendChild(this.ld);var f=d(this.ld),g=d(this.ld),h=d(this.ld),m=d(this.ld),n=d(this.ld),p=d(this.ld),A=d(this.ld),z=d(this.ld),D=document.createElement("input");D.type="submit";D.onclick=function(Q){Q.preventDefault();e.D()};D.value="";D.style.background="transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/close_icon2.svg) no-repeat center center";D.style.backgroundSize="10px";D.style.padding="10px 20px 8px 12px";D.style.border="none";D.style.cursor="pointer";f.appendChild(D);f.style.position="absolute";f.style.top="0px";f.style.right="0px";f.style.margin="0px";this.za=document.createElement("h1");this.za.style.font="18px ubuntumedium,Arial,Helvetica,sans-serif";this.za.style.color="#f47422";g.appendChild(this.za);g.style.textAlign="center";this.hk=c(h,uf+":","text","username");this.hk.required=!0;f=document.createElement("a");f.target="_top";f.href="/auth/password_reset/";f.tabIndex=0;f.textContent=yf;f.style.cssFloat="right";f.style.color="#0373a3";m.appendChild(f);var la=c(m,vf+":","password","password");la.required=!0;m=c(n,xf+":","checkbox","rememberme");m.style.marginLeft="10px";this.vb=document.createElement("input");this.vb.id="id_login_btn";this.vb.type="submit";this.vb.value=od;this.vb.style.backgroundColor="#F47321";this.vb.style.opacity="0.5";this.vb.style.border="1px solid #A8A8A8";this.vb.style.borderRadius="4px";this.vb.style.boxSizing="border-box";this.vb.style.cursor="pointer";this.vb.style.height="36px";this.vb.style.width="100%";this.vb.style.font="16px ubuntumedium,Arial,Helvetica,sans-serif";this.vb.style.color="#FFFFFF";this.vb.style.webkitAppearance="none";p.appendChild(this.vb);p=document.createElement("p");p.textContent=ri+" ";p.style.display="inline";n=document.createElement("a");n.target="_top";n.href="/accounts/register/?src=login_gate";n.tabIndex=0;n.textContent=pd;n.style.display="inline";n.style.color="#0373a3";A.appendChild(p);A.appendChild(n);A.style.textAlign="center";this.Qm=document.createElement("input");this.cm=document.createElement("input");this.Qm.type=this.cm.type="hidden";this.Qm.name="next";this.Qm.value=""+window.location.pathname+window.location.search;this.cm.name="csrfmiddlewaretoken";this.cm.value=yb("csrftoken");z.appendChild(this.Qm);z.appendChild(this.cm);z.style.display="none";D.onkeydown=b(this.hk,n);this.hk.onkeydown=b(la,D);la.onkeydown=b(f,this.hk);f.onkeydown=b(m,la);m.onkeydown=b(this.vb,f);this.vb.onkeydown=b(n,m);n.onkeydown=b(D,this.vb);this.hk.oninput=a;la.oninput=a;K.j(function(){e.Qm.value=""+window.location.pathname+window.location.search})}r(Pm,Lj);Pm.prototype.Nf=function(a){a=void 0===a?!1:a;window.self!==window.top&&""!==Om?nj("/auth/login/?next=/"+Om+"/"):(this.za.innerText=a?pi:qi,this.cm.value=yb("csrftoken"),this.element.style.display="block",Lj.prototype.show.call(this))};Pm.prototype.G=function(){var a=Math.max(document.documentElement.clientHeight,window.innerHeight);this.element.style.left=(Math.max(document.documentElement.clientWidth,window.innerWidth)-this.ld.offsetWidth)/2+"px";this.element.style.top=(a-this.ld.offsetHeight)/2+"px"};var Qm;function Rm(a){a=void 0===a?!1:a;void 0===Qm&&(Qm=new Pm,C("LoginOverlayOpened"));Qm.Nf(a)}function Sm(){return void 0!==Qm?Qm.isVisible:!1};function Tm(a){"Escape"!==a.key&&a.stopImmediatePropagation()}
function Um(a){function b(d){return function(e){"Tab"===e.key&&(e.preventDefault(),d.focus())}}Lj.call(this,{Xk:function(){c.G();c.isVisible=!0;c.vb.focus();v("keydown",c.element,Tm)},Vk:function(){var d=c.isVisible;c.element.style.display="none";c.isVisible=!1;d&&x("keydown",c.element,Tm)},gm:!0});var c=this;this.isVisible=!1;this.wB=new Qb("AutoLgnPopUpActn");this.Pr=N("div",{style:{display:"block",margin:"10px 0 0 0"}},N("div",{style:{position:"absolute",top:"0px",right:"0px",margin:"4px"}},N("button",{style:{background:"transparent url(https://static-assets.highwebmedia.com/tsdefaultassets/close_icon2.svg) no-repeat center center",backgroundSize:"10px",padding:"16px",border:"none",cursor:"pointer"},type:"submit",ref:function(d){return c.ob=d},onClick:function(d){d.preventDefault();c.D()}})),N("div",{style:{font:"1em/1.3em 'UbuntuMedium', Arial, Helvetica, sans-serif",padding:"0 19px 0 32px"}},N("h1",{style:{textAlign:"center",margin:"22px 0 24px",font:"1.733em/1.0769em 'UbuntuMedium', Arial, Helvetica, sans-serif",color:"#f47321"}},"Auto Login"),N("h2",{style:{margin:"0 0 24px",font:"1.166em/1.142em 'UbuntuMedium', Arial, Helvetica, sans-serif"}},"You are attempting to log in as ",N("span",{className:"login_name"},a.username),"."),N("form",{method:"post",action:"/accounts/autologin/"},N("input",{type:"hidden",name:"csrfmiddlewaretoken",value:xb("csrftoken")}),N("input",{type:"submit",value:od,style:{backgroundColor:"#F47321",border:"1px solid #A8A8A8",borderRadius:"4px",boxSizing:"border-box",cursor:"pointer",height:"36px",width:"100%",font:"16px ubuntumedium,Arial,Helvetica,sans-serif",color:"#FFFFFF",WebkitAppearance:"none"},ref:function(d){return c.vb=d}}),N("input",{type:"hidden",name:"username",value:a.username}),N("input",{type:"hidden",name:"t",value:a.t}),N("input",{type:"hidden",name:"e",value:a.e}),N("input",{type:"hidden",name:"next",value:a.next})),N("br",null),N("h3",{style:{textAlign:"center"}},"Not ",N("span",{className:"login_name"},a.username),"? ",N("a",{href:"/auth/login/?next="+a.next,ref:function(d){return c.Fy=d}},"Click here to log in as a different user."))));this.element.appendChild(this.Pr);this.element.style.display="none";this.element.style.position="fixed";this.element.style.width="364px";this.element.style.height="204px";this.element.style.color="currentSiteSettings.defaultColor";this.element.style.margin="auto";this.element.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.4)";this.element.style.background="white";this.element.style.border="3px solid #0E6C92";this.element.style.borderRadius="10px";this.element.style.visibility="visible";this.P.style["-webkit-overflow-scrolling"]="touch";this.P.style.backgroundColor="rgb(0, 0, 0, "+(this.wB.active?1:.5)+")";this.vb.onkeydown=b(this.Fy);this.Fy.onkeydown=b(this.ob);this.ob.onkeydown=b(this.vb)}r(Um,Lj);Um.prototype.G=function(){var a=Math.max(document.documentElement.clientHeight,window.innerHeight);this.element.style.left=(Math.max(document.documentElement.clientWidth,window.innerWidth)-this.Pr.offsetWidth)/2+"px";this.element.style.top=(a-this.Pr.offsetHeight)/2+"px"};Um.prototype.Nf=function(){this.element.style.display="block";this.show()};var Vm;function Wm(){var a=xb("aldata");if(void 0===a)return!1;void 0===Vm&&(a=decodeURIComponent(a),a=new P(a),a={username:T(a,"username"),t:T(a,"t"),e:T(a,"e"),next:T(a,"next")},Vm=new Um(a));Vm.Nf();return!0}function Xm(a){a=void 0===a?!1:a;(new Qb("AutoLgnPopUpActn")).active&&Wm()||Rm(a)};var Ym=new F("newFollowedOnline"),Zm=new F("onlineFollowedStorage"),$m=new F("onlineFollowedStorage");function an(){if(t()){var a=window.localStorage.getItem("onlineFollowedTab");null!==a&&(a=JSON.parse(a),a.timestamp=Date.now(),window.localStorage.setItem("onlineFollowedTab",JSON.stringify(a)))}}
function bn(){if(t()){var a=window.localStorage.getItem("onlineFollowedTab");if(null!==a){a=JSON.parse(a);var b=a.username,c=a.onlineFollowedList,d={Yf:{ph:c.onlineFollowed.online,total:c.onlineFollowed.total},sq:[]};c=q(c.roomList);for(var e=c.next();!e.done;e=c.next())e=e.value,d.sq.push({B:e.room,image:e.image});c=a.seenRooms;e=[];for(var f=q(a.unseenRooms),g=f.next();!g.done;g=f.next())g=g.value,e.push({B:g.room,image:g.image});return{username:b,hz:d,Rj:c,xv:e,fj:a.flash,timestamp:a.timestamp}}}}
function cn(){t()&&v("storage",window,function(a){if("onlineFollowedTab"===a.key){var b=bn();void 0!==b&&Zm.h(b)}"followedDropdownClicked"===a.key&&null!==a.newValue&&(b=bn(),void 0!==b&&(b.timestamp=JSON.parse(a.newValue).timestamp,b.fj=!1,b.xv=[],$m.h(b)))})}function dn(a){a=a.split(/[()/]+/);return 4!==a.length?{ph:0,total:0}:{ph:parseInt(a[1]),total:parseInt(a[2])}}
function en(){function a(b){return b.map(function(c){return{B:c.room,image:c.image}})}return y("follow/api/online_followed_rooms/").then(function(b){b=new P(b.responseText);return{Yf:{ph:W(b,"online"),total:W(b,"total")},sq:a(R(b,"online_rooms"))}})};function fn(){var a=Ia.current.qb;return void 0===a?!1:a.sj&&a.rB}function gn(){this.first=!0;this.pg=[];this.vj=[];this.Rj={};this.vx={};this.kj=!1}
gn.prototype.pc=function(a){var b=this;this.jb=a;if(this.kj)hn(this.jb.hd);else{jn=fn();zj.j(function(){b.jb.hd.Va()});K.j(function(d){hn(b.jb.hd);kn(b,[d.C.B])});ln.j(function(){b.jb.hd.Rb()&&mn(b.jb.hd)});nn.j(function(d){jn=d});Bk.j(function(){b.jb.hd.Rb()&&b.jb.hd.Va()});hn(this.jb.hd);!0===window.showcam&&"string"===typeof window.broadcaster&&kn(this,[window.broadcaster]);if(!this.jb.La){cn();Zm.j(function(d){b.zl(d,!1,b.jb.username,b.jb.zl)});$m.j(function(d){b.zl(d,!1,void 0,b.jb.tC)});window._followedTabUpdate=function(d){kn(b,[d]);on(b,!0,b.jb.username,b.jb.Wq)};a=0===window.location.pathname.indexOf("/followed-cams/",0)?void 0:bn();void 0!==a&&a.username===this.jb.username&&3E4>Date.now()-a.timestamp?(this.first=!1,this.zl(a,!0,this.jb.username,this.jb.zl),an(),on(this,!0,this.jb.username,this.jb.Wq)):on(this,!1,this.jb.username,this.jb.Wq);var c=function(d){clearInterval(b.RA);b.RA=window.setInterval(function(){b.jb.hd.Rb()||on(b,!1,b.jb.username,b.jb.Wq)},d)};c(1E4);window.setTimeout(function(){c(3E4)},6E5);window.setTimeout(function(){c(6E5)},18E5);window.setTimeout(function(){clearInterval(b.RA)},216E5);Ym.j(function(){b.jb.uC.fj()})}this.kj=!0}};function kn(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next())c=c.value,a.Rj[c]=!0,a.vx[c]=!0}gn.prototype.zl=function(a,b,c,d){b=void 0===b?!1:b;a.timestamp<=this.Ct||a.username!==c||(this.Yf=a.hz.Yf,this.Rj=a.Rj,this.vj=a.xv,this.update(a.hz,!0),void 0!==d&&d(a,b),this.Ct=a.timestamp)};gn.prototype.update=function(a,b){var c=this;b=void 0===b?!1:b;var d={},e=[],f=[];a=q(a.sq);for(var g=a.next();!g.done;g=a.next())g=g.value,void 0!==this.Rj[g.B]||this.first?f.push(g):e.push(g),this.Rj[g.B]=!0,d[g.B]=g;a=0<e.length;this.vj=this.vj.reduce(function(m,n){void 0===d[n.B]||c.vx[n.B]||m.push(d[n.B]);return m},[]);e=q(e);for(g=e.next();!g.done;g=e.next())this.vj.push(g.value);e={};this.pg=[];var h=q(this.vj);for(g=h.next();!g.done;g=h.next())g=g.value,e[g.B]=!0,this.pg.push(new pn(g,!0,this.pg.length+1));f=q(f);for(g=f.next();!g.done;g=f.next())g=g.value,void 0===e[g.B]&&this.pg.push(new pn(g,!1,this.pg.length+1));hn(this.jb.hd);(f=!this.first&&a)&&!b&&Ym.h(void 0);this.first=!1;return{fj:f,Vz:this.vj}};function on(a,b,c,d){(void 0===b||!b)&&1E4>Date.now()-a.Ct||en().then(function(e){a.Ct=Date.now();a.Yf=e.Yf;var f=a.update(e);d(f);var g=a.Rj,h=f.fj,m=f.Vz;if(t()){f={onlineFollowed:{online:e.Yf.ph,total:e.Yf.total},roomList:[]};e=q(e.sq);for(var n=e.next();!n.done;n=e.next())n=n.value,f.roomList.push({room:n.B,image:n.image});e=[];m=q(m);for(n=m.next();!n.done;n=m.next())n=n.value,e.push({room:n.B,image:n.image});g={username:c,onlineFollowedList:f,seenRooms:g,unseenRooms:e,flash:h,timestamp:Date.now()};window.localStorage.setItem("onlineFollowedTab",JSON.stringify(g))}})}var qn=new gn;var ln=new F("refreshRoomImages"),nn=new F("setAnimateThumbnails"),rn={fontSize:"13px",fontFamily:"UbuntuMedium, Helvetica, Arial, sans-serif",width:"auto",height:"auto",position:"absolute",display:"none",overflow:"",cursor:"default",top:"0px",left:"0px"},sn={width:"314px",maxHeight:"450px",overflowY:"auto",overflowX:"hidden",position:"relative",boxSizing:"border-box",padding:"8px",borderRadius:"0px 4px 4px 4px",WebkitBorderRadius:"0px 4px 4px 4px"};function tn(a,b){sl.call(this,a);this.La=b;this.Gf=qn;this.wr()}var jn;r(tn,sl);tn.prototype.Dw=function(){var a=this;return N("div",{className:"followedDropdown",colorClass:"tabActiveColor",style:rn},N("div",{className:"followedContainer",style:sn,colorClass:["tabActiveBgColor","tabBorderNoHover"],ref:function(b){a.Ff=b}}))};function hn(a){if(!a.Rb()){for(;null!==a.Ff.firstChild;)a.Ff.removeChild(a.Ff.firstChild);if(!a.La){var b;a.Ff.appendChild(N("div",{style:{margin:"5px 3px"}},N("a",{href:"/followed-cams/",style:{height:"auto",width:"auto",border:"none",borderRadius:"0px",textDecoration:"none",cursor:"pointer",cssFloat:"none",padding:"0px"},"data-floatingnav":"",colorClass:["tabActiveBgColor","hrefColor"],ref:function(h){b=h},onMouseEnter:function(){b.style.textDecoration="underline";H(b,"tabActiveColor");I(b,"hrefColor")},onMouseLeave:function(){b.style.textDecoration="none";H(b,"hrefColor");I(b,"tabActiveColor")},onClick:function(){C("FollowedDropdownSeeAll")}},Rf)))}a.Ff.style.width="auto";var c=N("div",{style:{display:"table"}}),d=N("div",null),e=0;a.Gf.pg.forEach(function(h){0===e%2&&(d=N("div",{style:{display:"table-row"}}),c.appendChild(d));var m=N("div",{style:{display:"table-cell"}});m.appendChild(h.Hr);d.appendChild(m);e+=1});a.Ff.appendChild(c);if(0===a.Gf.pg.length){var f=N("div",{colorClass:"textColor",style:{margin:"5px 3px 5px 3px",fontSize:"12px",fontFamily:"UbuntuRegular"}});if(a.La){var g=function(h){var m=N("a",{href:h.href,style:{height:"auto",width:"auto",border:"none",borderRadius:"0px",textDecoration:"none",cursor:"pointer",cssFloat:"none",padding:"0px"},colorClass:["tabActiveBgColor","hrefColor"],onMouseEnter:function(){m.style.textDecoration="underline"},onMouseLeave:function(){m.style.textDecoration="none"},onClick:void 0!==h.onClick?h.onClick:void 0},h.children);return m};f.appendChild(N(Tj,null,N(g,{href:"/accounts/register/?src=followed_tab&next="+window.location.pathname},pd),N("span",null," "+zf+" "),N(g,{href:"/auth/login/?next="+window.location.pathname,onClick:function(h){h.metaKey||h.ctrlKey||(h.preventDefault(),a.Va(),Xm())}},od)))}g=N("span",null,a.La?Sf:Tf);f.appendChild(g);a.Ff.appendChild(f);a.Ff.style.width="265px"}}}function mn(a){a=q(a.Gf.pg);for(var b=a.next();!b.done;b=a.next())b=b.value,""!==b.B.image&&Km(b.lp,0)}
tn.prototype.wr=function(){var a=this;Im&&v("pageshow",window,function(b){b.persisted&&a.Gf.pg.forEach(function(c){c.kl()})})};tn.prototype.Bb=function(){if(!sl.prototype.Bb.call(this))return!1;mn(this);this.Ff.scrollTop=0;this.Gf.vj=[];var a=sk(this.element),b=Math.max(ek(),tk(document.body.style.minWidth));a.right>b&&(this.element.style.width=this.element.offsetWidth-(a.right-b)-4+"px",this.Ff.style.overflowX="auto");return!0};tn.prototype.Va=function(a){if(void 0!==a&&(a.metaKey||a.ctrlKey)||!sl.prototype.Va.call(this))return!1;a=q(this.Gf.pg);for(var b=a.next();!b.done;b=a.next())b=b.value,b.Tx=!1,H(b.a,"notHighlighted"),I(b.a,"isHighlighted");this.element.style.width="auto";this.Ff.style.overflowX="hidden";hn(this);return!0};function pn(a,b,c){var d=this;this.B=a;this.Tx=b;this.username="";this.username=a.B;this.a=N("a",{className:"roomElementAnchor",colorClass:["tabInactiveColor",this.Tx?"isHighlighted":"notHighlighted"],style:{width:"180px",height:"126px",borderRadius:"4px",border:"none",padding:"0px",margin:"0px",display:"block",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",textDecoration:"none"},"data-room":this.B.B,href:"/"+this.B.B+"/",onClick:function(){C("FollowedDropdownVisit")}},N("img",{src:""!==this.B.image?this.B.image:"https://static-assets.highwebmedia.com/images/no_thumbnail_1_wide.jpg",width:180,height:101,style:{borderRadius:"3px 3px 0px 0px"},ref:function(e){d.mp=e}}),N("span",{style:{padding:"5px"}},this.B.B));this.Hr=N("div",{className:"roomElement",style:{display:"inline-block",width:"180px",height:"126px",borderRadius:"4px",margin:"3px",cursor:"pointer"}},this.a);un(this);tb(["click","mousedown","touchstart"],this.a,function(){vn(d.username,"ft",c)})}pn.prototype.kl=function(){this.lp.kl()};function un(a){""!==a.B.image&&(a.lp=new Jm(a.username,a.mp),v("mouseenter",a.Hr,function(){jn&&a.lp.Uj()}),v("mouseleave",a.Hr,function(){jn&&Lm(a.lp,!1)}))};function wn(a){switch(a){case "df":case "rc":case "ft":case "fo":case "ff":case "ml":case "mr":case "tp":case "pr":case "fn":case "bs":case "nc":case "sc":case "dc":return a;default:return"un"}}
function xn(a){switch(a){case "Default":return"df";case "Recommended":return"rc";case "FollowedTab":return"ft";case "FollowedPageOnline":return"fo";case "FollowedPageOffline":return"ff";case "MoreLikeThis":return"ml";case "MoreRooms":return"mr";case "TagPage":return"tp";case "Promoted":return"pr";case "FollowedNotification":return"fn";case "Boosted":return"bs";case "NextCam":return"nc";case "ScanCam":return"sc";case "Discover":return"dc";default:return"un"}}
function vn(a,b,c,d,e){void 0===e&&(e="");Ab("tbu_"+a,[b,""+c,""+("number"===typeof d&&0<d?d:-1),e,void 0].join(),30)}function yn(){this.Yy=[];this.Jn=new Map}var zn,An;function Bn(){for(var a=[],b=q(document.querySelectorAll(".endless_page_template")),c=b.next();!c.done;c=b.next())a.push(c.value);return a}function Cn(a,b){a.Yy.push(b)}yn.prototype.onSuccess=function(){for(var a=q(this.Yy),b=a.next();!b.done;b=a.next())b=b.value,b()};function Dn(){void 0===zn&&(zn=new yn);return zn}
function En(a){a=a.getAttribute("data-href");a="string"!==typeof a||0===a.length?window.location.href.replace(""===location.hash?"#":location.hash,""):"/"===a[0]?a.substr(1):a;var b="?";-1!==a.indexOf("?")&&(b="&");var c=document.getElementById("filter_search_form");c=null!==c?Em(c).yi():"";return a+b+c}function Fn(a){if(0<a){var b=Dn();An=window.setTimeout(function(){Gn(b);ln.h(void 0);Fn(a)},a)}}
function Gn(a,b){for(var c=q(a.Jn.values()),d=c.next();!d.done;d=c.next())Lm(d.value,!1);a.Jn.clear();c={};d=q(Bn());for(var e=d.next();!e.done;c={bo:c.bo},e=d.next())c.bo=e.value,e=En(c.bo),y(e).then(function(f){return function(g){f.bo.innerHTML=g.responseText;a.onSuccess();void 0!==b&&b()}}(c))}function Hn(a){Cn(Dn(),a)}function In(a){Gn(Dn(),a)}function Jn(a){Fn(a)}function Kn(){clearTimeout(An)}function Ln(a,b,c,d,e){vn(b,xn(a),c,d,e)}var Mn=!1;function Nn(a){Mn=a;nn.h(Mn)}
function On(a,b){if(Mn&&null!==b){var c=Dn(),d=c.Jn.get(a);void 0===d&&(d=new Jm(a,b,{Uj:!0}),c.Jn.set(a,d));d.Uj()}}function Pn(a){Mn&&(a=Dn().Jn.get(a),void 0!==a&&Lm(a,!1))}var Qn={buildTooltip:Hk};function X(a){return{hc:1,message:a}}function Rn(a){return{hc:0,V:a}}function Sn(a,b){return-1!==b.indexOf(a)?{hc:2,message:a}:X("#"+a)};var Tn;K.j(function(a){Tn=a.C.B});function Un(a){var b=Vn(a);b.Ke=S(a,"gender",!1);return b}
function Vn(a){for(var b=new Map,c=q(["from_username","user","username"]),d=c.next();!d.done;d=c.next())d=d.value,void 0!==S(a,d,!1)&&b.set(d,S(a,d,!1));1!==b.size&&u('getStrings(["from_username", "user", "username"]): '+b+" length is not 1 in "+a.df);b=b.values().next().value;return{username:b,yb:b===Tn,Ec:V(a,"in_fanclub"),je:V(a,"has_tokens"),fc:V(a,"is_mod"),ff:V(a,"tipped_recently"),fg:V(a,"tipped_alot_recently"),gf:V(a,"tipped_tons_recently"),Fb:T(a,"exploringHashTag",!1),wc:wn(T(a,"source_name",!1))}}function Wn(a,b){b={N:Un(b),message:T(b,"m"),font:S(b,"f",!1),ef:S(b,"c",!1),Tc:S(b,"i",!1),backgroundColor:S(b,"background",!1),da:W(b,"tid",!1)};b.N.username!==a&&u("Parsing username match failed");return b}function Xn(a){return{N:Un(gm(a,"from_user")),message:T(a,"m"),ef:S(a,"c",!1),Tc:S(a,"i",!1),Da:T(a,"other_user"),font:T(a,"f"),da:W(a,"tid",!1)}}function Yn(a){return{N:Un(a),message:T(a,"message"),amount:W(a,"amount"),pp:V(a,"is_anonymous_tip"),$j:S(a,"to_username"),da:W(a,"tid")}}
function Zn(a){var b=R(a,"messages"),c=[];if("string"===typeof b)c.push([X("Notice: "+b)]);else if(b instanceof Array){b=q(b);for(var d=b.next();!d.done;d=b.next())c.push([X("Notice: "+d.value)])}else u("handleAppNotice error: Invalid message type "+(void 0===b?"undefined":b.toString()));b=S(a,"weight");return{ya:S(a,"foreground"),background:S(a,"background"),weight:""===b?void 0:b,na:c,xa:V(a,"showInPrivateMessage",!1,!1),da:W(a,"tid")}};var $n=new F("privateMessage"),ao=new F("siteWideRoomNotice"),bo=new F("logMessage"),co=new F("showPmSession"),eo=new F("closePmSession"),fo=new F("updateTipBalance"),go=new F("updateSearchBar"),ho=new F("pmMarkedReadEvent"),io=new F("pmEmoticonLoaded"),jo=new F("navigateSuggestions"),ko=new F("openCurrentSuggestion"),lo=new F("suggestionSelectedEvent");var mo=new Set;function no(){for(var a=[],b=q(mo),c=b.next();!c.done;c=b.next())a.push(c.value);t()&&window.localStorage.setItem("ignorelist",JSON.stringify({jf:a}))}
function oo(){y("api/ts/chat/ignored-users/").then(function(a){t()&&(window.localStorage.setItem("ignorelist",a.responseText),window.localStorage.setItem("ignorelistlastfetch",Date.now().toString()));try{mo=new Set(JSON.parse(a.responseText).users)}catch(b){u("Cannot parse ignore list: "+b)}}).catch(function(a){u("Network error retrieving ignore list: "+a)})}function po(a){var b=mo;return void 0===b?(u("ignoreSet should not be undefined"),!1):b.has(a)};function qo(){var a=document.createElement("div");a.style.position="absolute";a.style.width="100%";a.style.height="100%";a.style.top="0px";a.style.left="0px";a.style.display="none";a.style.zIndex="1003";a.style.backgroundColor="rgba(0, 0, 0, .3)";a.style.boxShadow="0px 0px 4px rgba(0, 0, 0, 0.5)";return a}
function ro(a){function b(h){h.target!==e&&(f.style.display="none",g=!1,x("touchstart",document,b,!0))}var c=Math.floor(a.ft/2),d=document.createElement("div");d.style.display="inline-block";d.style.position="absolute";d.style.width=d.style.height=a.ft+"px";d.style.top="calc("+a.nw+" - "+c+"px)";var e=document.createElement("img");e.src="https://static-assets.highwebmedia.com/"+a.$x;e.style.position="relative";e.style.height="100%";e.style.width="100%";e.style.zIndex="1";d.appendChild(e);var f=document.createElement("div");f.style.position="absolute";f.style.display="none";f.style.width="39px";f.style.height="39px";f.style.top=-19+c+"px";f.style.left=-19+c+"px";f.style.borderRadius="4px";f.style.zIndex="0";f.style.backgroundColor="rgba(255, 255, 255, .25)";c=document.createElement("div");c.textContent=a.Id;c.style.position="relative";c.style.display="inline-block";c.style.top="42px";c.style.left="50%";c.style.transform="translateX(-50%)";c.style.padding="0px 7px";c.style.whiteSpace="nowrap";c.style.fontFamily="UbuntuRegular";c.style.fontSize="12px";c.style.color="#FFF";c.style.backgroundColor="rgba(0, 0, 0, .9)";c.style.border="1px solid #8A8A8A";f.appendChild(c);d.appendChild(f);void 0!==a.QC&&a.QC.j(function(){f.style.display="none"});void 0!==a.onClick&&(e.style.cursor="pointer",v("click",e,a.onClick));v("mouseenter",e,function(){f.style.display="block"});v("mouseleave",e,function(){f.style.display="none"});var g=!1;v("touchstart",e,function(h){g?void 0!==a.onClick&&ub(e,a.onClick):(f.style.display="block",g=!0,v("touchstart",document,b,!0),h.preventDefault(),h.stopPropagation())});return d}function so(a){return y("api/online/"+a+"/").then(function(b){return JSON.parse(b.responseText).online})}function to(){return y("api/ts/chat/share-my-cam/").then(function(a){a=JSON.parse(a.responseText).cam_room;return 0<a.length?a[0]:""})}function uo(a){function b(){to().then(function(c){""===c?a():window.setTimeout(b,5E3)})}b()}var vo=!1;function wo(a,b){this.prefix=a;this.username=b;if(0===a.length)throw Error("prefix cannot be empty");if(0===b.length)throw Error("username cannot be empty");}r(wo,qm);wo.prototype.Oc=function(){return this.prefix+":"+this.username};wo.prototype.Wh=function(){return this.prefix};wo.prototype.vm=function(){};function xo(a){wo.call(this,yo,a)}r(xo,wo);xo.prototype.Na=function(a){return{timestamp:W(a,"read_ts")}};xo.prototype.listener=function(a){zo.h(a)};var yo="user:news_seen",zo=new F(yo);function Ao(a){wo.call(this,Bo,a)}r(Ao,wo);Ao.prototype.Na=function(a){return{N:Un(gm(a,"from_user")),message:T(a,"message"),ef:S(a,"font_color",!1),Tc:S(a,"id",!1),da:W(a,"tid",!1),Da:T(a,"other_user"),font:T(a,"font_family"),backgroundColor:S(a,"background")}};Ao.prototype.listener=function(a){Co.h(a);po(a.N.username)||$n.h(a)};Ao.prototype.vm=function(){Do.h(this.username)};var Bo="user:message",Do=new F(Bo+":subscribed",{oe:1}),Co=new F(Bo);function Eo(a){wo.call(this,Fo,a)}r(Eo,wo);Eo.prototype.Na=function(a){return{target:T(a,"target"),da:W(a,"tid")}};Eo.prototype.listener=function(a){Go.h(a)};var Fo="user:update",Go=new F(Fo);function Ho(a){wo.call(this,Io,a)}r(Ho,wo);Ho.prototype.Na=function(a){return{$c:W(a,"tokens"),da:W(a,"tid")}};Ho.prototype.listener=function(a){Jo.h(a)};var Io="user:token_update",Jo=new F(Io);function Ko(a){wo.call(this,Lo,a)}r(Ko,wo);Ko.prototype.Na=function(a){return{N:Un(a),message:T(a,"message"),amount:W(a,"amount"),pp:V(a,"is_anonymous_tip"),yb:V(a,"is_broadcaster"),history:V(a,"history"),$j:T(a,"to_username"),da:W(a,"tid")}};Ko.prototype.listener=function(a){Mo.h(a)};var Lo="user:tip_alert",Mo=new F(Lo);function No(a){wo.call(this,Oo,a)}r(No,wo);No.prototype.Na=function(a){return{eG:T(a,"context_user"),na:em(a,"messages")}};No.prototype.listener=function(a){Po.h(a)};var Oo="user:pm_notice",Po=new F(Oo),Qo=new F("showMyCamStarted"),Ro=new F("showMyCamStopped"),So=new F("showMyCamViewStarted"),To=new F("showMyCamViewStopped");function Uo(a){var b=Object,c=b.assign,d=Object,e=d.assign;var f={username:T(a,"username"),yb:!1,Ec:V(a,"in_fanclub"),je:V(a,"has_tokens"),fc:V(a,"is_mod"),ff:V(a,"tipped_recently"),fg:V(a,"tipped_alot_recently"),gf:V(a,"tipped_tons_recently"),Fb:"",wc:"df"};return c.call(b,e.call(d,{},f),{cg:V(a,"started")})}
function Vo(a){wo.call(this,Wo,a)}r(Vo,wo);Vo.prototype.Na=function(a){return Uo(a)};Vo.prototype.listener=function(a){Xo.h(a);a.cg?Qo.h(a):Ro.h(a)};var Wo="user:smc_notify",Xo=new F(Wo);function Yo(a){wo.call(this,Zo,a)}r(Yo,wo);Yo.prototype.Na=function(a){return Uo(a)};Yo.prototype.listener=function(a){$o.h(a);a.cg?So.h(a):To.h(a)};var Zo="user:smc_watching",$o=new F(Zo);function ap(a){wo.call(this,bp,a)}r(ap,wo);ap.prototype.Na=function(){return{}};ap.prototype.listener=function(){};var bp="smc:presence";function cp(){Ml.call(this);var a=this;this.H=0;this.pt=!1;this.items=[];this.Mt=void 0;this.Yq=0;this.Mx=!1;this.J(this.Ge);cm.j(function(b){a.Mx=b});am.j(function(b){(a.pj=b)?(C("NewsfeedOpened",{is_orange:a.Mx}),dp(a),a.Yq=(new Date).getTime()):(bm.h(void 0),a.H=0,a.Ub(),0<a.items.length&&(ep(a,a.items[0].timestamp),fp(a,a.items[0].timestamp)),a.Pu())});this.La=void 0===Ia.current.qb;v("beforeunload",window,this.Pu.bind(this));v("unload",window,this.Pu.bind(this))}r(cp,Ml);function fp(a,b,c){!1===a.La&&pm(b,function(){void 0!==c&&c()})}k=cp.prototype;k.initData=function(){this.Ge=new Yl};k.Pu=function(){if(0!==this.Yq){var a={duration_seconds:((new Date).getTime()-this.Yq)/1E3};this.Yq=0;C("NewsfeedClosed",a)}};k.vg=function(){return 99<this.H?Ng+" (99+)":0<this.H?Ng+" ("+this.H+")":Ng};k.gh=function(){return"updates-tab"};k.Bb=function(){Ml.prototype.Bb.call(this);this.Ub();this.G()};function dp(a){a.pt?(Zl(a.Ge,a.items),gp(a)):om(function(b){a.items=b;Zl(a.Ge,b);a.H=b.filter(function(c){return!c.wi}).length;a.Ub();a.pt=!0;gp(a);zo.j(function(c){ep(a,c.timestamp);a.H=a.items.filter(function(d){return!d.wi}).length;a.Ub()});Cm.j(function(c){var d=0;0<a.items.length&&(d=Math.max.apply(Math,fa(a.items.map(function(e){return e.timestamp}))));d<c.timestamp&&(a.items.splice(0,0,c),a.H=a.items.filter(function(e){return!e.wi}).length,Zl(a.Ge,a.items),a.Ub(),gp(a))})})}
function ep(a,b){a.items.forEach(function(c){c.timestamp<=b&&(c.wi=!0)})}function gp(a){0<a.H?(void 0!==a.Mt&&clearTimeout(a.Mt),a.Mt=window.setTimeout(function(){a.pj&&fp(a,a.items[0].timestamp,function(){bm.h(void 0)})},500)):bm.h(void 0)}function hp(){cp.apply(this,arguments)}r(hp,cp);hp.prototype.initData=function(){this.Ge=new $l};function ip(a){G.call(this);pk(this,{position:"static",padding:"0px",margin:"4px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",width:"16px",height:"16px",backgroundColor:"transparent",cursor:"pointer",backgroundImage:"url('https://static-assets.highwebmedia.com/tsdefaultassets/close_icon_gray.svg')",cssFloat:"right"});v("click",this.element,function(){a()})}r(ip,G);function jp(){var a,b;return null!==(b=null===(a=Ia.current)||void 0===a?void 0:a.cC)&&void 0!==b?b:"https://static-assets.highwebmedia.com/images/logo.svg"};var Jl={gB:"chaturbate.com",hB:"",aF:md,bF:"#0b5d81",dv:"Chaturbate",bgColor:"#ffffff",xD:"#0c6a93",Py:"#ffffff",wD:"#f47321",uD:"#ffffff",vD:"url(https://static-assets.highwebmedia.com/tsdefaultassets/gender_tab_bg.gif) repeat-x",JC:"#004B5E",ef:"#494949",us:"#494949",Xw:"#222222",nF:"#222222",VC:"#0A5B83",Iq:"#8bb3da",TE:"#ffffff",WE:"#dde9f5",UE:"#dc5500",XE:"#5e81a4",YE:"#6D85B5",ZE:"#FFF",$E:"#2472B4",cF:"#4F4F4F",dF:"#B60A42",WB:"#FFFFFF",GB:"#F0F1F1",HB:"#ACACAC",JB:"#000",KB:"#0A5A83",FB:"#575757",IB:"#0A5A83",hF:"#e45900",xC:"#676767",BC:"#494949",XB:"#494949",nD:jp(),LE:"#f47321",oD:void 0,yC:"",PC:"#ffffff url(https://static-assets.highwebmedia.com/tsdefaultassets/header_bg.gif) repeat-x",wC:"#ffffff url(https://static-assets.highwebmedia.com/tsdefaultassets/footer_bg.gif) repeat-x",oF:"#e9e9e9",rF:"#ffffff",yD:"#FCEADB",vC:"#494949",zC:"#0A5A83",AC:"#dc5500",NB:"#4C4C4C",gC:"",fi:!1,Wu:!1,yE:!1,zE:!1,xE:!1,DE:!0,FE:!0,AE:!0,CE:!0,BE:!0,hE:"#494949",mD:"#000000",hC:"#494949",UA:"#3C87BA",pF:"#F47321",qF:"#ffffff",Gv:"https://www.surveymonkey.com/r/DXYF5T8",Qx:!0===window.hide_entrance_terms},Nc=Jl;if(void 0!==window.siteSettings){var Y=window.siteSettings,kp=Y.navigation_font_color,lp=Y.text_color,mp=Y.tab_inactive_color,np=Y.tab_inactive_font_color,op=Y.content_bgcolor,pp=Y.footer_href_color,qp=Y.footer_text_color,rp=Y.cam_href_color;Nc={gB:Y.chaturbate_alias,hB:Y.dbwl_domain,aF:Y.tagline,bF:Y.tagline_color,dv:Y.site_name,bgColor:Y.bgcolor,xD:Y.navigation_bgcolor,Py:kp,wD:Y.navigation_alt_bgcolor,uD:Y.navigation_alt_2_bgcolor,vD:"",JC:Y.h1_color,ef:lp,us:Jl.us,Xw:Jl.Xw,nF:lp,VC:Y.href_color,Iq:Y.tab_border_color,TE:Y.tab_active_color,WE:mp,UE:Y.tab_active_font_color,XE:np,YE:Y.tag_exhibitionist_color,ZE:Y.tag_font_color,$E:Y.tag_hd_color,cF:Y.tag_offline_color,dF:Y.tag_private_group_color,WB:op,GB:Y.cam_background_color,HB:Y.cam_border_color,JB:Y.cam_text_color,KB:"#0C6A93",FB:Y.cam_text_alt_color,IB:rp,hF:rp,xC:pp,BC:qp,XB:qp,nD:Y.logo_image_name,LE:Y.signup_bg_color,oD:Y._logo_width,yC:Y.footer_html,PC:"",wC:"",oF:op,rF:kp,yD:mp,vC:np,zC:pp,AC:pp,NB:"#0C6A93",gC:Y.default_campaign_slug,fi:!0,Wu:!0,yE:!0,zE:!0,xE:!0,DE:!1,FE:!1,AE:!1,CE:!1,BE:!1,hE:"#222222",mD:lp,hC:lp,Bz:Y.whitelabel_hit_count_referring_url,UA:Y.tab_inactive_color,pF:Y.tab_active_color,qF:Y.tab_active_font_color,Gv:Jl.Gv,Qx:Jl.Qx}}void 0!==Nc.Bz&&B("whitelabels/record_hit/",{referer:Nc.Bz}).catch(function(a){u("Error recording whitelabel hit: "+a)});function sp(){Hl.call(this);var a=this;this.pj=!1;this.zp=0;this.vv=new Qb("UIPTest");this.element.id="UserUpdatesPanel";H(this.element,"userUpdatesPanel");this.Kb.element.style.borderBottom="none";this.Kb.element.style.padding="4px 0 0 6px";this.Kb.element.style.marginBottom="4px";this.Kb.element.style.boxSizing="border-box";this.window.style.position="static";this.Wj=Object.assign(Object.assign({},this.Wj),{fontSize:"12px",padding:"5px 10px"});this.vv.active&&(this.Kb.element.style.backgroundColor="transparent",this.element.style.cursor="default",this.element.style.userSelect="text",this.Wj={fontSize:"14px",padding:"0px",backgroundColor:"transparent",margin:"4px",minHeight:"12px",border:"none"});Kl(this,this.Zq);if(this.vv.active){var b=new ip(function(){a.ys.Va()});this.Kb.J(b)}this.rb(this.Zq);Il(this)}r(sp,Hl);sp.prototype.G=function(){};sp.prototype.Bx=function(a){this.ys=new tp(this,a);this.vv.active&&(this.ys.hf.j(function(b){H(a,"triggerElement");a.classList.toggle("tabindex_fix",b.Sc);b.Sc||a.blur()}),a.onmousedown=function(){a.classList.add("tabindex_fix")},this.element.onclick=function(b){b.stopPropagation()});return this.ys};sp.prototype.qa=function(){var a=new Qb("UIPTest");this.element.style.overflow="";this.element.style.position="static";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderTop="none";this.element.style.borderRadius="0 0 4px 4px";a.active&&(H(this.element,"uipExp"),this.element.style.borderTop="",this.element.style.borderStyle="solid",this.element.style.borderWidth="1px",this.element.style.borderRadius="4px",this.element.style.boxShadow="0px 0px 16px rgba(0,0,0,0.32)")};sp.prototype.initData=function(){this.Zq=new cp};function up(){sp.call(this);for(var a=1;a<this.element.children.length-1;a+=1)this.element.children[a].style.height="calc(100% - 60px)"}r(up,sp);up.prototype.Bx=function(a){return new vp(this,a)};up.prototype.qa=function(){sp.prototype.qa.call(this);this.element.style.borderRight="0"};up.prototype.initData=function(){this.Zq=new hp};function wp(a,b){var c;Cm.j(function(e){a.zp<e.timestamp&&(b.classList.add("has_unseen"),cm.h(!0))});zo.j(function(e){a.zp<e.timestamp&&(a.zp=e.timestamp,bm.h(void 0))});if(!0!==Ia.current.jt){var d=null===(c=Ia.current.qb)||void 0===c?void 0:c.username;ao.j(function(e){0===e.BD&&e.$j===d&&(b.classList.add("has_unseen"),e=a.Zq,e.removeChild(e.Ge),e.Ge=new Yl,e.J(e.Ge),e.pt=!1,e.pj&&dp(e))})}}
function tp(a,b){kl.call(this,b);var c=this;this.Ej=a;this.element.appendChild(this.Ej.element);this.hf.j(function(d){c.Ej.pj!==d.Sc&&(c.Ej.pj=d.Sc,am.h(d.Sc),b.classList.toggle("active",d.Sc))});bm.j(function(){b.className=b.className.replace("has_unseen","");cm.h(!1)});wp(a,b)}r(tp,kl);tp.prototype.qa=function(){kl.prototype.qa.call(this);var a=new Qb("UIPTest");this.element.style.maxHeight="368px";this.element.style.height="";this.element.style.width="100%";this.element.style.zIndex="1001";this.element.style.backgroundColor="transparent";this.element.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";this.element.style.left="-1px";this.element.style.top=a.active?"36px":"24px"};function vp(a,b){kl.call(this,b);var c=this;this.Ej=a;this.element.appendChild(this.Ej.element);this.hf.j(function(d){c.Ej.pj!==d.Sc&&(c.Ej.pj=d.Sc,am.h(d.Sc),b.classList.toggle("active",d.Sc))});bm.j(function(){b.className=b.className.replace("has_unseen","");cm.h(!1)});wp(a,b)}r(vp,ol);vp.prototype.qa=function(){ol.prototype.qa.call(this);this.element.style.maxHeight="";this.element.style.width="100%";this.element.style.zIndex="1001";this.element.style.backgroundColor="#FFFFFF";this.element.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";this.element.style.left="-1px";this.element.style.top="0";this.element.style.height="calc(100% - 46px)";this.element.style.top="46px"};function xp(a,b){a.style.webkitTransition=b;a.style.transition=b;void 0!==a.style.setProperty&&a.style.setProperty("moz-transition",b)}function yp(a,b){a.style.userSelect=b;a.style.webkitUserSelect=b;a.style.msUserSelect=b;void 0!==a.style.setProperty&&a.style.setProperty("moz-user-select",b)};var zp={enabled:!1,move:function(){},end:function(){}};function Ap(a,b){Bp(a,b,function(c){return{valid:!0,x:c.clientX,y:c.clientY}},"mousedown","mousemove","mouseup");Bp(a,b,function(c){return 1===c.touches.length&&(c=c.touches.item(0),null!==c)?{valid:!0,x:c.clientX,y:c.clientY}:{valid:!1,x:0,y:0}},"touchstart","touchmove","touchend")}
function Bp(a,b,c,d,e,f){v(d,a,function(g){var h=c(g);if(h.valid){var m=b(g,h.x,h.y);if(m.enabled){m.move(h.x,h.y);g.preventDefault();var n=function(z){z=c(z);z.valid&&m.move(z.x,z.y)},p=function(z){z.preventDefault();void 0!==z.buttons&&(jb()?0===z.buttons:1===z.buttons)||void 0!==z.touches&&1===z.touches.length?n(z):A(z,!1)};v(e,document,p,!0);var A=function(z,D){(void 0===D||D)&&n(z);x(e,document,p,!0);x(f,document,A,!0);m.end()};v(f,document,A,!0)}}})};function Cp(a,b,c){this.$b=a;this.config=c;this.L={ne:NaN,we:NaN,be:NaN,se:NaN,width:NaN,height:NaN};this.Ey="window__"+b;a={ne:NaN,we:NaN,be:NaN,se:NaN,width:NaN,height:NaN};if(t()&&(b=window.localStorage.getItem(this.Ey),null!==b)){a=JSON.parse(b);for(var d in a)null===a[d]&&(a[d]=NaN);isNaN(a.width)&&(a.width=this.config.Af);isNaN(a.height)&&(a.height=this.config.zf)}this.L=a;isNaN(this.L.width)&&(this.L.width=this.config.Af);isNaN(this.L.height)&&(this.L.height=this.config.zf);isNaN(this.L.ne)&&isNaN(this.L.se)&&(0<=this.config.qg.indexOf(1)?this.L.se=wk():this.L.ne=0<=this.config.qg.indexOf(4)?Math.max(0,ek()/2-this.config.Af/2):0);isNaN(this.L.we)&&isNaN(this.L.be)&&(0<=this.config.qg.indexOf(3)?this.L.be=wk():this.L.we=0<=this.config.qg.indexOf(4)?Math.max(0,window.innerHeight/2-this.config.zf/2):0)}
Cp.prototype.save=function(){var a=this.$b.element.parentElement;if(null===a)u("no parent element");else{var b=this.$b.element.offsetLeft,c=this.$b.element.offsetTop,d=a.clientHeight-(this.$b.element.offsetHeight+c);a=a.clientWidth-(this.$b.element.offsetWidth+b);this.L.height=this.$b.element.offsetHeight;this.L.width=this.$b.element.offsetWidth;b<=a?(this.L.ne=b,this.L.se=NaN):(this.L.ne=NaN,this.L.se=a);c<=d?(this.L.we=c,this.L.be=NaN):(this.L.we=NaN,this.L.be=d)}t()&&window.localStorage.setItem(this.Ey,JSON.stringify(this.L))};Cp.prototype.apply=function(){var a=this.$b.element.parentElement;if(null===a)u("no parent element");else if(0!==a.clientHeight){void 0!==this.config.oo&&this.config.oo?(this.$b.Rc.style.position="relative",this.$b.element.style.width="auto",this.$b.element.style.height="auto",this.L.height=this.$b.element.offsetHeight,this.L.width=this.$b.element.offsetWidth):(this.config.si?(this.L.width=Math.min(this.L.width,a.clientWidth),this.L.height=Math.min(this.L.height,a.clientHeight),this.L.width=Math.max(this.L.width,this.config.minWidth),this.L.height=Math.max(this.L.height,this.config.minHeight)):(this.L.width=this.config.Af,this.L.height=this.config.zf+Dp(this.$b)),this.$b.element.style.width=this.L.width+"px",this.$b.element.style.height=this.L.height+"px");var b=!isNaN(this.L.ne)&&!isNaN(this.L.se)||isNaN(this.L.ne)&&isNaN(this.L.se);if(!isNaN(this.L.we)&&!isNaN(this.L.be)||isNaN(this.L.we)&&isNaN(this.L.be)||b)Fm("unexpected bounds: top:"+this.L.we+" bottom:"+this.L.be+" left:"+this.L.ne+" right: "+this.L.se);else{b=a.clientHeight;if(!isNaN(this.L.we)){if(this.L.we+this.L.height>b||0>this.L.we)Fm("set topBound to container height - bounds height to make fit"),this.L.we=Math.max(0,b-this.L.height);this.$b.element.style.top=this.L.we+"px"}else if(!isNaN(this.L.be)){if(this.L.be+this.L.height>b||0>this.L.be)Fm("set bottomBound to container height - bounds height to make fit"),this.L.be=Math.max(0,b-this.L.height);this.$b.element.style.top=b-this.L.height-this.L.be+"px"}a=a.clientWidth;if(!isNaN(this.L.ne)){if(this.L.ne+
this.L.width>a||0>this.L.ne)Fm("set leftBound to 0 to make fit"),this.L.ne=0;this.$b.element.style.left=this.L.ne+"px"}else if(!isNaN(this.L.se)){if(this.L.se+this.L.width>a||0>this.L.se)Fm("set rightBound to 0 to make fit"),this.L.se=0;this.$b.element.style.left=a-this.L.width-this.L.se+"px"}}}};function Ep(a){G.call(this);var b=this;this.element.style.height="0";this.element.style.width="0";this.element.style.overflow="visible";this.element.style.position="fixed";this.element.style.top="0";this.element.style.left="0";this.Md=a.Md;this.listener=function(){b.Z()};this.Md.Zw.j(this.listener);this.J(new Fp(this,a));this.J(new Gp(this,a));this.J(new Hp(this,a));this.J(new Ip(this,a));this.J(new Jp(this,a));this.J(new Kp(this,a));this.J(new Lp(this,a));this.J(new Mp(this,a))}r(Ep,G);Ep.prototype.G=function(){};function Np(a,b,c){G.call(this);var d=this;this.options=b;this.cursor=c;this.Ic=8;this.element.style.height=this.Ic+"px";this.element.style.width=this.Ic+"px";this.element.style.cursor=this.cursor;Ap(this.element,function(e,f,g){e.stopPropagation();void 0!==b.cz&&b.cz();var h=Object.freeze(wc(b.Md.element)),m=new xk(function(){b.Md.Z()},{yd:10});return{enabled:!0,move:function(n,p){n=d.hi(h,{x:n-f,y:p-g});p=b.Md.element;p.style.left=n.left+"px";p.style.top=n.top+"px";p.style.width=n.width+"px";p.style.height=n.height+"px";yk(m)},end:function(){void 0!==b.dz&&b.dz()}}})}r(Np,G);function Fp(a,b){Np.call(this,a,b,"ns-resize")}r(Fp,Np);Fp.prototype.G=function(){var a=this.options.Md.element.getBoundingClientRect();this.element.style.top=a.top-this.Ic/2+"px";this.element.style.left=a.left+"px";this.element.style.width=a.right-a.left+"px"};Fp.prototype.hi=function(a,b){return xc(a,b.y,this.options.minHeight)};function Gp(a,b){Np.call(this,a,b,"ns-resize")}r(Gp,Np);Gp.prototype.G=function(){var a=this.options.Md.element.getBoundingClientRect();this.element.style.top=a.top+a.height-this.Ic/2+"px";this.element.style.left=a.left+"px";this.element.style.width=a.width+"px"};Gp.prototype.hi=function(a,b){return yc(a,b.y,this.options.minHeight,this.options.maxHeight())};function Hp(a,b){Np.call(this,a,b,"ew-resize")}r(Hp,Np);Hp.prototype.G=function(){var a=this.options.Md.element.getBoundingClientRect();this.element.style.top=a.top+"px";this.element.style.left=a.left-this.Ic/2+"px";this.element.style.height=a.bottom-a.top+"px"};Hp.prototype.hi=function(a,b){return zc(a,b.x,this.options.minWidth)};function Ip(a,b){Np.call(this,a,b,"ew-resize")}r(Ip,Np);Ip.prototype.G=function(){var a=this.options.Md.element.getBoundingClientRect();this.element.style.top=a.top+"px";this.element.style.left=a.right-this.Ic/2+"px";this.element.style.height=a.bottom-a.top+"px"};Ip.prototype.hi=function(a,b){return Ac(a,b.x,this.options.minWidth,this.options.maxWidth())};function Jp(a,b){Np.call(this,a,b,"nwse-resize")}r(Jp,Np);Jp.prototype.G=function(){var a=this.options.Md.element.getBoundingClientRect();this.element.style.top=a.top-this.Ic+this.Ic/2+"px";this.element.style.left=a.left-this.Ic+this.Ic/2+"px"};Jp.prototype.hi=function(a,b){var c=xc(a,b.y,this.options.minHeight);a=zc(a,b.x,this.options.minWidth);return{top:c.top,height:c.height,left:a.left,width:a.width}};function Kp(a,b){Np.call(this,a,b,"nesw-resize")}r(Kp,Np);Kp.prototype.G=function(){var a=this.options.Md.element.getBoundingClientRect();this.element.style.top=a.top-this.Ic+this.Ic/2+"px";this.element.style.left=a.right-this.Ic/2+"px"};Kp.prototype.hi=function(a,b){var c=xc(a,b.y,this.options.minHeight);a=Ac(a,b.x,this.options.minWidth,this.options.maxWidth());return{top:c.top,height:c.height,left:a.left,width:a.width}};function Lp(a,b){Np.call(this,a,b,"nesw-resize")}r(Lp,Np);Lp.prototype.G=function(){var a=this.options.Md.element.getBoundingClientRect();this.element.style.top=a.bottom-this.Ic/2+"px";this.element.style.left=a.left-this.Ic+this.Ic/2+"px"};Lp.prototype.hi=function(a,b){var c=yc(a,b.y,this.options.minHeight,this.options.maxHeight());a=zc(a,b.x,this.options.minWidth);return{top:c.top,height:c.height,left:a.left,width:a.width}};function Mp(a,b){Np.call(this,a,b,"nwse-resize")}r(Mp,Np);Mp.prototype.G=function(){var a=this.options.Md.element.getBoundingClientRect();this.element.style.top=a.bottom-this.Ic/2+"px";this.element.style.left=a.right-this.Ic/2+"px"};Mp.prototype.hi=function(a,b){var c=yc(a,b.y,this.options.minHeight,this.options.maxHeight());a=Ac(a,b.x,this.options.minWidth,this.options.maxWidth());return{top:c.top,height:c.height,left:a.left,width:a.width}};function Op(a,b,c){G.call(this);var d=this;this.ee=a;this.content=b;this.config=c;this.ky=!1;this.fx=new F("draggingOrResizingChanged");this.pb=!1;H(this.element,"draggableCanvasWindow");this.element.style.overflow="visible";this.Rc=document.createElement("div");H(this.Rc,"innerDiv");this.Rc.style.height="100%";this.Rc.style.width="100%";this.Rc.style.position="absolute";this.Rc.style.overflow="visible";this.Rc.style.boxSizing="border-box";this.Rc.style.borderWidth="2px";this.Rc.style.borderStyle="solid";this.SB=void 0!==c.title;var e=this.ob=document.createElement("div");H(this.ob,"closeButton");this.ob.id=(this.config.nf+"-close-btn").toLowerCase();this.ob.style.position="absolute";this.ob.style.right="3px";this.ob.style.height="10px";this.ob.style.width="10px";this.ob.style.cursor="pointer";this.ob.style.borderWidth="1px";this.ob.style.borderStyle="solid";this.ob.style.borderRadius="2px";v("mouseenter",this.ob,function(){e.style.backgroundImage="url(https://static-assets.highwebmedia.com/tsdefaultassets/grey-close.svg)";e.style.backgroundSize="10px"});v("mouseleave",this.ob,function(){e.style.backgroundImage=""});void 0!==c.title?(this.Zd=document.createElement("div"),H(this.Zd,"titleBar"),this.Zd.style.position="relative",this.Zd.style.fontSize="13px",this.Zd.style.fontWeight="bold",this.Zd.style.padding="3px 3px 3px 5px",this.Zd.style.minHeight="10px",this.Og=document.createElement("div"),this.Og.style.height="100%",this.Og.style.whiteSpace="nowrap",this.Og.style.overflow="hidden",this.Og.style.textOverflow="ellipsis",this.Zd.appendChild(this.Og),this.Oq=document.createElement("span"),this.Oq.innerText=c.title,this.Og.appendChild(this.Oq),this.Hg=c.Hg,this.Zd.appendChild(this.ob),this.Rc.appendChild(this.Zd),v("click",this.ob,function(f){f.stopPropagation();d.ee.removeChild(d)})):(this.ob.style.top="5px",this.ob.style.zIndex="1",this.element.appendChild(this.ob),v("click",this.ob,function(f){f.stopPropagation();d.element.style.display="none";d.pb=!1}));this.J(this.content,this.Rc);this.ju=new Cp(this,this.config.nf,this.config);this.yA=function(){d.ju.save();d.Z()};void 0===c.Ts&&(c.Ts=void 0!==this.Og?[this.Og]:[this.element]);Pp(this.element,{dx:function(){Qp(d.ee,d);Rp(d,!0)},ex:function(){Rp(d,!1);d.yA();C("MoveDraggableWindow",{window:d.config.nf,left:d.element.offsetLeft,top:d.element.offsetTop,windowWidth:window.innerWidth,windowHeight:window.innerHeight})},jw:function(){return!d.ky}},c.Ts);!0===c.si&&Sp(this);this.element.appendChild(this.Rc)}r(Op,G);k=Op.prototype;k.xn=function(a){void 0!==this.Oq&&(this.Oq.innerText=a)};function Sp(a){void 0===a.Mz&&(a.Mz=a.J(new Ep({minWidth:a.config.minWidth,minHeight:a.config.minHeight,maxWidth:function(){return a.ee.element.clientWidth},maxHeight:function(){return a.ee.element.clientHeight},Md:a,cz:function(){Qp(a.ee,a);Rp(a,!0)},dz:function(){Rp(a,!1);a.yA();C("ResizeDraggableWindow",{window:a.config.nf,width:a.element.clientWidth,height:a.element.clientHeight,windowWidth:window.innerWidth,windowHeight:window.innerHeight})}})),a.Mz.Z())}
k.resize=function(a,b){this.config.zf=a;this.config.Af=b;this.G()};function Rp(a,b){a.ky=b;a.fx.h(b)}
k.G=function(){this.content.element.style.height=void 0!==this.config.oo&&this.config.oo?"auto":this.element.clientHeight-Dp(this)-4+"px";void 0!==this.Zd&&(void 0===this.ob?u("expected close button to be defined"):void 0===this.Og?u("expected title bar div inner to be defined"):(this.Og.style.maxWidth=this.Zd.clientWidth-this.ob.offsetWidth-5-6+"px",this.ob.style.top=(this.Zd.offsetHeight-this.ob.offsetHeight)/2+"px"))};k.show=function(){this.element.style.opacity="1"};k.D=function(){this.element.style.opacity="0"};function Dp(a){return void 0===a.Zd?0:a.Zd.offsetHeight}k.blur=function(){this.ee.Nd===this&&Qp(this.ee,void 0)};function Tp(a,b){return void 0!==a.config.Zt?a.config.Zt(b):!1}
function Pp(a,b,c){c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,d.style.cursor="move",Ap(d,function(e,f,g){if(void 0!==b.jw&&!1===b.jw())return zp;var h=a.offsetLeft,m=a.offsetTop,n=a.offsetHeight,p=a.offsetWidth;if(null===a.parentElement)return u("draggable without parent element"),zp;var A=a.parentElement.clientHeight,z=a.parentElement.clientWidth,D=f,la=g;void 0!==b.dx&&b.dx();return{enabled:!0,move:function(Q,na){D=Q;la=na;Q=m+(la-g);na=h+(D-f);0>Q?Q=0:Q+n>A&&(Q=A-n);0>na?na=0:na+p>z&&(na=z-p);a.style.top=Q+"px";a.style.left=na+"px"},end:function(){void 0!==b.ex&&b.ex()}}})};function Up(a){var b=void 0===b?!0:b;this.label=document.createElement("label");this.label.htmlFor="comments";this.label.innerText=Oh;this.input=document.createElement("textarea");this.input.name="comments";b&&(this.input.required=b);this.error=document.createElement("p");a.appendChild(this.label);a.appendChild(this.input);a.appendChild(this.error)};function Vp(a){switch(a){case "orga":return 0;case "orgb":return 1;case "org":return 2;case "none":return 3;default:return 1}}
function Wp(a){switch(a){case "away":return"away";case "private":return"privatenotwatching";case "private_watching":return"privatewatching";case "private_spying":return"privatespying";case "private_requesting":return"privaterequesting";case "public":return"public";case "hidden":return"hidden";case "offline":return"offline";case "password protected":return"passwordprotected";default:return u("unknown room status -- "+a),"unknown"}}var Xp;function Yp(a){var b=[];if(""!==a)try{JSON.parse(a).forEach(function(c){b.push({vr:c[0],Sv:c[1]})})}catch(c){u("Error parsing apps "+c.toString())}return b}function Zp(a){var b=[];if(""!==a)try{b=JSON.parse(a).map(function(c){return{text:c.text,href:c.href}})}catch(c){u("Error parsing anchors "+c.toString())}return b}
function $p(a){var b=km(a,"chat_settings"),c=km(a,"ads_zone_ids"),d=km(a,"satisfaction_score"),e=T(a,"flash_host"),f=wb();void 0!==f.edge&&(e="edge"+f.edge+".stream.highwebmedia.com");f=T(a,"wschat_host");var g=T(a,"broadcaster_username"),h=T(a,"room_uid"),m=S(a,"viewer_uid"),n=T(a,"room_pass"),p=T(a,"chat_rules"),A=T(a,"room_title"),z=Wp(T(a,"room_status")),D=V(a,"is_supporter"),la=V(a,"needs_supporter_to_pm"),Q=T(a,"broadcaster_gender"),na=T(a,"viewer_username"),bb=T(a,"chat_username"),Lc=encodeURI(T(a,"edge_auth")),wf=T(a,"chat_password"),wa=T(a,"viewer_gender"),nh=T(a,"exploring_hashtag"),KE=wn(T(a,"source_name",!1)),LE=T(a,"hls_source"),ME=V(a,"is_widescreen"),NE=Yp(T(a,"apps_running")),OE=V(a,"allow_private_shows"),PE=W(a,"private_show_price"),QE=W(a,"private_min_minutes"),RE=V(a,"allow_show_recordings"),SE=V(a,"allow_anonymous_tipping"),TE=W(a,"spy_private_show_price"),UE=V(a,"low_satisfaction_score"),VE=V(a,"is_age_verified"),WE=fm(a,"age"),XE=T(a,"hidden_message"),YE=V(a,"following"),ZE=T(a,"follow_notification_frequency",!1),$E=V(a,"is_moderator"),aF=T(a,"recommender_hmac"),bF=V(a,"broadcaster_on_new_chat"),cF=W(a,"token_balance"),dF=T(a,"server_name"),eF=W(a,"num_followed"),fF=W(a,"num_followed_online"),gF=V(a,"has_studio"),hF=V(a,"is_mobile"),iF=hm(a,"ignored_emoticons"),jF=V(a,"hide_satisfaction_score"),kF=W(a,"tips_in_past_24_hours"),lF=fm(a,"last_vote_in_past_24_hours"),mF=V(a,"last_vote_in_past_90_days_down"),Th=hm(a,"dismissible_messages"),Ps=[];Th=q(Th);for(var Fd=Th.next();!Fd.done;Fd=Th.next())Fd=Fd.value,Ps.push({pH:Fd.id,hI:Fd.message_html});b={host:f,B:g,iE:h,SJ:m,Sz:n,rw:p,jc:A,Ab:z,sj:D,Op:la,rq:Q,userName:na,Sl:bb,iC:Lc,bB:wf,RJ:wa,Fb:nh,wc:KE,jC:e,zm:LE,Bg:ME,Xg:NE,ae:OE,Ud:PE,mi:QE,Qi:RE,pB:SE,Ng:TE,ap:UE,Sa:VE,ed:WE,lj:XE,Ks:YE,tx:ZE,Pe:$E,XI:aF,VF:bF,hb:cF,hJ:dF,uI:eF,vI:fF,kH:gF,Rf:hF,Ne:iF,mH:jF,Zj:kF,wH:lF,xH:mF,KG:Ps,iJ:V(a,"show_mobile_site_banner_link"),Rp:W(a,"num_viewers"),hD:V(a,"fan_club_is_member"),OC:V(a,"performer_has_fanclub"),DI:V(a,"fan_club_paid_with_tokens"),yt:V(a,"is_testbed"),eJ:{KJ:W(d,"up_votes",!1),NG:W(d,"down_votes",!1),LI:W(d,"percent",!1)},DJ:V(a,"tfa_enabled"),JF:{header:T(c,"468x60"),rightTop:T(c,"160x600,top"),rightMiddle:T(c,"160x600,middle"),rightBottom:T(c,"160x600,bottom"),footerLeft:T(c,"300x250,left"),footerMiddle:T(c,"300x250,centre"),footerRight:T(c,"300x250,right")},ta:{Ls:T(b,"font_color"),fontFamily:T(b,"font_family"),fontSize:T(b,"font_size"),vc:V(b,"show_emoticons"),vk:T(b,"emoticon_autocomplete_delay"),Sx:T(b,"highest_token_color"),vA:T(b,"sort_users_key"),mI:W(b,"mod_expire"),Nj:Vp(T(b,"room_entry_for")),Pj:Vp(T(b,"room_leave_for")),lJ:T(b,"silence_broadcasters"),qH:T(b,"ignored_users"),LF:T(b,"allowed_chat"),mf:parseInt(T(b,"v_tip_vol")),WF:parseInt(T(b,"b_tip_vol"))},nk:T(a,"browser_id")};c=S(a,"staff_links");void 0!==c&&(b.vJ={wJ:Zp(c),PF:V(a,"auto_load_admin_info"),TI:S(a,"previous_usernames"),HG:S(a,"deletion_admin_notice")});c=im(a,"chat_push_groups_context",!0);void 0!==c&&(c=void 0!==c?{je:V(c,"has_tokens"),Ec:V(c,"in_fanclub"),ff:V(c,"tipped_recently"),FJ:V(c,"tipped_alot_recently"),gf:V(c,"tipped_tons_recently")}:void 0,b.bG=c);nm(a);return b}function aq(a){return new Promise(function(b,c){var d=new P(a);400<=W(d,"status",!1)?c("Bad response from server: "+a):b($p(d))})}
function bq(a){void 0!==Xp&&(Xp.abort(),Xp=void 0);return new Promise(function(b,c){var d=Gb("api/chatvideocontext/"+a+"/");Xp=d[0];d[1].then(function(e){b(aq(e.responseText))}).catch(function(e){404===e.Kd.status?(J("HTTP 404 - Page Not Found\n\nIt's probably just a broken link, or perhaps a cancelled broadcaster."),e.Kd.abort()):c(e)})})}function cq(a,b){var c=!0;"public"!==b.Dd&&"privaterequesting"===a.A.status&&"privaterequesting"===b.Ra&&(c=!1);return c}
function dq(a,b){return bq(a.A.B()).then(function(c){a.C=c;a.A.status=c.Ab;b.Ra=c.Ab})};function eq(a){L.call(this);var b=this;this.oa=a;this.Jj=new Map;this.tn=void 0;this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.minWidth="100px";this.element.style.height="auto";this.element.style.position="absolute";this.element.style.borderRadius="2px";this.element.style.fontSize="14px";this.element.style.textAlign="center";this.element.style.backgroundColor="rgba(0, 0, 0, 0.3)";this.element.onclick=function(){b.D()};this.oa.Ve.j(function(d){b.Jj.clear();b.clear();for(var e=!1,f=q(d),g=f.next();!g.done;g=f.next())g=g.value,g.label===b.tn&&(e=!0),b.Jj.set(g.label,g.value),b.element.appendChild(b.cs(g));0===d.length?b.oa.Dc.Ba.style.display="none":(b.oa.Dc.Ba.style.display="",c&&e&&void 0!==b.tn&&(c=!1,b.af(b.tn)))});var c=!1;this.oa.gw.j(function(){c=void 0!==b.tn});this.Sb.j(function(){b.D()});this.D()}r(eq,L);k=eq.prototype;k.G=function(){this.element.style.right="0px";this.element.style.bottom=this.oa.Dc.ac()+"px"};k.cs=function(a){var b=this,c=document.createElement("div");c.innerText=a.label;c.style.color="#ffffff";c.style.padding="1px";c.style.width="100%";c.style.border="1px solid rgba(255, 255, 255, 0.5)";c.onmouseenter=function(){c.style.color="#fc760c";c.style.borderColor="#fc760c"};c.onmouseleave=function(){c.style.color="#FFFFFF";c.style.borderColor="rgba(255, 255, 255, 0.5)"};a.ak?c.style.backgroundColor="rgba(204, 204, 204, 0.6)":c.onclick=function(){C("clickMenuLink:QualitySelect-"+a.label);b.af(a.label)};return c};k.af=function(a){this.tn=a;a=this.Jj.get(a);void 0===a?u("Undefined quality level key",{},"VIDEO_"):this.oa.af(a)};k.clear=function(){for(;null!==this.element.firstChild;)this.element.removeChild(this.element.firstChild)};k.show=function(){this.cf();this.element.style.visibility="";this.G()};k.D=function(){this.kb();this.element.style.visibility="hidden"};var fq=new F("roomListRequest"),gq=new F("playerForceMuted"),hq=new F("standardEmoticonRequest"),iq=new F("standardEmoticonRequest"),jq=new F("userMenuPmClicked"),kq=new F("mentionUser");new F("closePmSession");var lq=new F("appDebuggingToggled"),mq=new F("getMoreHistoryMessages"),nq=new F("repositionChatTabContent"),oq=new F("userModeratorStatusChanged");function pq(a){G.call(this);var b=this;this.config=a;this.value=0;this.$n=new F("valueChanged");this.Zn=new F("valueChangeStart");this.Yn=new F("valueChangeEnd");this.element.style.position="relative";this.element.style.overflow="visible";this.element.style.cursor="pointer";this.element.style.width=void 0!==a.sf?a.sf+a.Ob+"px":"90%";this.element.style.height=a.Ob+"px";this.Ih=void 0!==a.Ih?a.Ih:2*Math.round(.25*a.Ob/2);void 0!==a.Ar?(this.ge=document.createElement("img"),this.ge.src=a.Ar,this.ge.style.width="100%",this.ge.style.height="100%"):(this.ge=document.createElement("div"),this.ge.style.position="absolute",this.ge.style.boxSizing="border-box",void 0!==a.gx?this.ge.style.backgroundColor=a.gx:(this.ge.style.backgroundColor="#333333",this.ge.style.backgroundColor="rgba(255, 255, 255, 0.2)"),this.ge.style.top=.5*(a.Ob-this.Ih)+"px",this.ge.style.height=this.Ih+"px",this.ge.style.width="100%");this.element.appendChild(this.ge);void 0!==a.Ar?(this.Ef=document.createElement("div"),this.Ef.style.visibility="none"):(this.Ef=document.createElement("div"),this.Ef.style.position="absolute",this.Ef.style.boxSizing="border-box",this.Ef.style.backgroundColor=void 0!==a.nx?a.nx:"#ffffff",this.Ef.style.top=.5*(a.Ob-this.Ih)+"px",this.Ef.style.height=this.Ih+"px",this.element.appendChild(this.Ef));void 0!==a.Hx?(this.ba=document.createElement("img"),this.ba.style.position="absolute",this.ba.style.top="0",this.ba.src=a.Hx,this.ba.style.height=a.Ob+"px",this.ba.style.width=a.Ob+"px",this.ba.style.cursor="grab",this.ba.style.left="0px"):(this.ba=document.createElement("div"),this.ba.style.position="absolute",this.ba.style.top="0",this.ba.style.backgroundColor=void 0!==a.Gx?a.Gx:"#ffffff",this.ba.style.borderRadius="50%",this.ba.style.height=a.Ob+"px",this.ba.style.height=a.Ob+"px",this.ba.style.width=a.Ob+"px",this.ba.style.cursor="grab");this.element.appendChild(this.ba);this.tF=new xk(function(){b.$n.h(b.value)},{yd:100,ce:2});qq(this,function(c){rq(b,c,c.clientX)},"mousedown","mousemove","mouseup");qq(this,function(c){if(1===c.touches.length){var d=c.touches.item(0);null!==d&&rq(b,c,d.clientX)}},"touchstart","touchmove","touchend");v("mousedown",this.element,function(c){rq(b,c,c.clientX);var d=b.ba,e=d.dispatchEvent;var f=c.type;try{var g=new MouseEvent(f,c)}catch(h){g=document.createEvent("MouseEvent"),g.initMouseEvent(f,void 0!==c.bubbles?c.bubbles:!1,void 0!==c.cancelable?c.cancelable:!1,window,0,void 0!==c.screenX?c.screenX:0,void 0!==c.screenY?c.screenY:0,void 0!==c.clientX?c.clientX:0,void 0!==c.clientY?c.clientY:0,void 0!==c.ctrlKey?c.ctrlKey:!1,void 0!==c.altKey?c.altKey:!1,void 0!==c.shiftKey?c.shiftKey:!1,void 0!==c.metaKey?c.metaKey:!1,void 0!==c.button?c.button:0,void 0!==c.relatedTarget?c.relatedTarget:null)}e.call(d,g)})}r(pq,G);function qq(a,b,c,d,e){v(c,a.ba,function(f){function g(h){a.Yn.h(a.value);a.ba.style.cursor="grab";document.body.style.cursor="";h.preventDefault();x(d,document,b,!0);x(e,document,g,!0)}a.Zn.h(a.value);a.ba.style.cursor="";document.body.style.cursor="grabbing";f.preventDefault();f.stopPropagation();v(d,document,b,!0);v(e,document,g,!0)})}
function rq(a,b,c){var d=a.element.getBoundingClientRect().left;void 0!==a.config.sf?sq(a,100/a.config.sf*(Math.max(.5*a.config.Ob,Math.min(a.config.sf+.5*a.config.Ob,c-d))-.5*a.config.Ob)):sq(a,100/a.element.offsetWidth*(Math.max(.5*a.config.Ob,Math.min(a.element.offsetWidth+.5*a.config.Ob,c-d))-.5*a.config.Ob));yk(a.tF);b.stopPropagation()}pq.prototype.Le=function(){return this.value};function sq(a,b){void 0!==a.config.sf?(a.ba.style.left=b*a.config.sf/100+"px",a.Ef.style.width=b*a.config.sf/100+"px"):(a.ba.style.left=b*(a.element.offsetWidth-a.config.Ob)/100+"px",a.Ef.style.width=b*a.element.offsetWidth/100+"px");a.value=b}pq.prototype.Jf=function(){void 0===this.config.sf&&(this.ba.style.left=this.value*(this.element.offsetWidth-this.config.Ob)/100+"px",this.Ef.style.width=this.value*this.element.offsetWidth/100+"px")};var tq;K.j(function(a){tq=a.A});function uq(){Lj.call(this);var a=this;this.element.id="RemoveIgnoredUsersModal";this.element.style.position="fixed";this.element.style.width="410px";this.element.style.height="127px";this.element.style.borderRadius="6px";this.element.style.padding="10px";this.element.style.fontSize="12px";H(this.P,"overlay");this.P.style.background="";this.P.style.opacity="0.4";var b=this.Do("https://static-assets.highwebmedia.com/tsdefaultassets/close.svg");H(b,"lightCloseButton");b.style.opacity="0.5";this.element.appendChild(b);b=this.Do("https://static-assets.highwebmedia.com/tsdefaultassets/close-gray.svg");H(b,"darkCloseButton");this.element.appendChild(b);b=document.createElement("div");H(b,"bluetxt");b.innerText=Af;b.style.fontSize="15px";b.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.element.appendChild(b);this.Hk=document.createElement("div");H(this.Hk,"textColor");this.Hk.innerText="";this.Hk.style.margin="10px 0";this.element.appendChild(this.Hk);this.element.appendChild(this.Gw());this.element.appendChild(this.Kw());b=document.createElement("div");b.style.textAlign="right";var c=document.createElement("span");H(c,"saveButton");c.innerText=Ne;c.style.display="inline-block";H(c,"gradient");c.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";c.style.fontSize="14px";c.style.padding="5px 15px 5px 15px";c.style.marginTop="10px";c.style.borderRadius="4px";c.style.cursor="pointer";c.onclick=function(){a.Wz()};b.appendChild(c);this.element.appendChild(b);this.Sb.j(function(){a.D()})}r(uq,Lj);uq.prototype.G=function(){this.element.style.left=Math.max(16,(document.documentElement.clientWidth-this.element.offsetWidth)/2)+"px";this.element.style.top=(document.documentElement.clientHeight-this.element.offsetHeight)/2+"px"};function vq(){var a=document.createElement("div");H(a,"bluetxt");a.innerText=Cf;a.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";a.style.fontWeight="bold";return a}
function wq(){var a=document.createElement("select");H(a,"select");a.multiple=!0;return a}uq.prototype.Do=function(a){var b=this,c=document.createElement("img");c.src=a;c.style.position="absolute";c.style.width="14px";c.style.height="14px";c.style.top="10px";c.style.right="10px";c.style.cursor="pointer";c.onclick=function(){b.D()};c.onmouseenter=function(){c.style.opacity="1"};c.onmouseleave=function(){c.style.opacity="0.5"};return c};function xq(){uq.call(this);this.element.style.height="307px";this.Hk.innerText=Gf}r(xq,uq);xq.prototype.Nf=function(){for(;null!==this.Qc.firstChild;)this.Qc.removeChild(this.Qc.firstChild);for(;null!==this.mb.firstChild;)this.mb.removeChild(this.mb.firstChild);for(var a=q(mo),b=a.next();!b.done;b=a.next()){b=b.value;var c=document.createElement("option");c.innerText=b;c.value=b;this.Qc.appendChild(c)}uq.prototype.show.call(this);this.Z()};xq.prototype.Gw=function(){var a=this,b=document.createElement("div");b.style.display="inline-block";b.style.marginRight="10px";var c=vq();c.innerText=Ff;b.appendChild(c);this.Qc=wq();this.Qc.style.borderWidth="1px";this.Qc.style.borderStyle="solid";this.Qc.style.borderRadius="4px";this.Qc.style.marginTop="4px";this.Qc.style.width="200px";this.Qc.style.height="200px";this.Qc.style.padding="2px";this.Qc.style.overflow="auto";this.Qc.onchange=function(){for(var d=a.Qc.selectedOptions.length,e=[].concat(fa(a.Qc.selectedOptions)),f=0;f<d;f+=1){var g=e[f];g.selected=!1;a.mb.appendChild(g)}};b.appendChild(this.Qc);return b};xq.prototype.Kw=function(){var a=this,b=document.createElement("div");b.style.display="inline-block";var c=vq();c.innerText=Cf;b.appendChild(c);this.mb=wq();this.mb.style.borderWidth="1px";this.mb.style.borderStyle="solid";this.mb.style.borderRadius="4px";this.mb.style.marginTop="4px";this.mb.style.width="200px";this.mb.style.height="200px";this.mb.style.padding="2px";this.mb.style.overflow="auto";this.mb.onchange=function(){for(var d=a.mb.selectedOptions.length,e=[].concat(fa(a.mb.selectedOptions)),f=0;f<d;f+=1){var g=e[f];g.selected=!1;a.Qc.appendChild(g)}};b.appendChild(this.mb);return b};xq.prototype.Wz=function(){for(var a=q(this.mb.options),b=a.next();!b.done;b=a.next())tq.wv(b.value.value);this.D()};function yq(){uq.call(this);kb()&&(this.element.style.height="307px");this.Hk.innerText=Hf}r(yq,uq);yq.prototype.Nf=function(){for(;null!==this.mb.firstChild;)this.mb.removeChild(this.mb.firstChild);for(var a=q(mo),b=a.next();!b.done;b=a.next()){b=b.value;var c=document.createElement("option");c.innerText=b;c.value=b;this.mb.appendChild(c)}uq.prototype.show.call(this);this.Z()};yq.prototype.Gw=function(){return document.createElement("div")};yq.prototype.Kw=function(){var a=document.createElement("div");a.style.display="inline-block";var b=vq();b.innerText=Cf;a.appendChild(b);this.mb=wq();this.mb.style.width="200px";kb()&&(this.mb.style.height="200px");a.appendChild(this.mb);return a};yq.prototype.Wz=function(){for(var a=q(this.mb.selectedOptions),b=a.next();!b.done;b=a.next())tq.wv(b.value.value);this.D()};function zq(){var a;return void 0===(null===(a=Ia.current)||void 0===a?void 0:a.qb)}var Aq;function Bq(a){a=void 0===a?"Login required":a;return zq()?(void 0!==Aq?Aq():sc(a,function(){window.top.location.href="/auth/login/?next="+window.location.pathname+window.location.search},void 0),!0):!1};var Cq={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};function Dq(a){var b=void 0===b?{red:200,green:200,blue:200}:b;var c=a.toLowerCase();if(/^[a-z]+$/.test(c)){var d=Cq[c];void 0!==d&&(c=d)}if(/^#([a-fA-F0-9]{3}){1,2}$/.test(c))return b=c,4===b.length&&(b="#"+b[1]+b[1]+b[2]+b[2]+b[3]+b[3]),b=Number("0x"+b.substring(1)),{red:b>>16&255,green:b>>8&255,blue:b&255};if(0===c.indexOf("rgb")){a=a.match(/\d+(\.\d+)?%?/g);if(null===a||3>a.length||4<a.length)return b;a=[a[0],a[1],a[2]];b=[];for(c=0;3>c;c+=1)b[c]=-1!==a[c].indexOf("%")?Math.round(2.55*parseFloat(a[c])):Number(a[c]),0>b[c]?b[c]=0:255<b[c]&&(b[c]=255);return{red:b[0],green:b[1],blue:b[2]}}return b};function Eq(a,b,c){L.call(this);var d=this;this.Wp=b;this.Ym=c;this.Pb=document.createElement("input");this.nz=!1;this.oz=new F("pickerImgLoaded");this.jv=a;this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.height="auto";this.element.style.opacity="0";xp(this.element,"opacity 250ms");v("keydown",this.element,function(e){27===e.keyCode&&d.D()});this.Sb.j(function(){d.D()});Fq(this);Gq(this)}r(Eq,L);function Fq(a){var b=document.createElement("canvas");b.style.cursor="crosshair";b.style.border="1px solid #000001";a.element.appendChild(b);var c=document.createElement("img");"https://static-assets.highwebmedia.com/tsdefaultassets/colorPicker.png?v=1".startsWith("/")||c.setAttribute("crossorigin","anonymous");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/colorPicker.png?v=1";c.onload=function(){b.width=c.width;b.height=c.height;b.onclick=function(){a.np=a.Pb.value;a.Wp(a.Pb.value);a.D()};b.onmousemove=function(e){var f=b.getContext("2d");if(null!==f&&0<e.offsetX&&0<e.offsetY&&e.offsetX<b.clientWidth&&e.offsetY<b.clientHeight){var g=f.getImageData(e.offsetX,e.offsetY,1,1).data;e=a.Pb;f=g[0];var h=g[1];g=g[2];(255<f||255<h||255<g||0>f||0>h||0>g)&&u("Invalid rgb color value: r: "+f+", g: "+h+", b: "+g);f=("000000"+(f<<16|h<<8|g).toString(16)).slice(-6);e.value="#"+f}else a.Pb.value=a.np;a.Ym(a.Pb.value)};b.onmouseleave=function(){a.Pb.value=a.np;a.Ym(a.Pb.value)};var d=b.getContext("2d");null!==d&&d.drawImage(c,0,0,c.width,c.height);a.Pb.style.width=b.width-8+"px";a.nz=!0;a.oz.h(void 0)}}function Gq(a){a.Pb.type="text";a.Pb.style.display="block";a.Pb.style.border="1px solid #000000";a.Pb.style.padding="2px 4px";a.Pb.style.position="relative";a.Pb.style.top="-3px";a.Pb.style.fontSize="12px";a.Pb.oninput=function(){a.Ym(a.Pb.value)};v("keydown",a.Pb,function(b){13===b.keyCode&&(a.Wp(a.Pb.value),a.D())});a.element.appendChild(a.Pb)}
Eq.prototype.G=function(){this.element.style.left=this.jv.offsetLeft+"px";this.element.style.top=this.jv.offsetTop+this.jv.offsetHeight+2+"px"};Eq.prototype.show=function(a){this.np=a;if(this.nz)this.zA();else this.oz.once(this.zA.bind(this))};Eq.prototype.zA=function(){this.Pb.value=this.np;this.element.style.opacity="1";this.element.style.visibility="";this.cf();this.Z()};Eq.prototype.D=function(){var a=this;this.kb();this.element.style.opacity="0";window.setTimeout(function(){a.element.style.visibility="hidden"},250)};var Hq=new F("switchedToHLS"),Iq=new F("openDefaultTipCalloutRequest"),Jq=new F("loginOverlayRequest"),Kq=new F("userChatSettingsUpdate",{Rd:50});new F("openPhotoVideoTabRequest");function Lq(a,b){G.call(this);var c=this;this.Ha=document.createElement("input");this.onChange=function(){};this.disabled=!1;this.Ha.type="checkbox";this.Ha.style.position="absolute";this.Ha.style.opacity="0";this.Ha.style.margin="0";this.Ha.style.padding="0";this.Ha.style.width="0";this.Ha.style.height="0";this.Ha.style.border="none";this.Ha.style.zIndex="-1";this.BA();void 0!==a&&Mq(this,a);void 0!==b&&(this.onChange=b);this.element.appendChild(this.Ha);this.ek();this.element.onclick=function(d){c.disabled||d.target===c.Ha||(c.toggle(),c.Ha.focus(),d.preventDefault())};this.Ha.onchange=function(){Mq(c,c.Ha.checked)}}r(Lq,G);k=Lq.prototype;k.toggle=function(){this.Ha.checked=!this.Ha.checked;this.onChange();this.ek()};k.focus=function(){this.Ha.focus()};k.blur=function(){this.Ha.blur()};function Mq(a,b){a.Ha.checked=b;a.ek();a.onChange()}function Nq(a,b){a.Ha.checked=b;a.ek()}function Oq(a,b){a.onChange=b}k.disable=function(){this.disabled=!0;this.ek()};k.enable=function(){this.disabled=!1;this.ek()};function Pq(a,b,c){Lq.call(this,b,c);this.Zs=!1;this.element.style.height=a+"px";this.element.style.width=a+"px"}r(Pq,Lq);Pq.prototype.BA=function(){var a=this;H(this.element,"transparentCheckbox");this.element.style.display="inline-block";this.element.style.position="relative";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderRadius="2px";v("focus",this.Ha,function(){a.Zs&&H(a.element,"focused")});v("blur",this.Ha,function(){a.Zs&&I(a.element,"focused")})};Pq.prototype.ek=function(){this.Ha.checked?H(this.element,"checked"):I(this.element,"checked");this.disabled?H(this.element,"disabled"):I(this.element,"disabled")};Pq.prototype.Ps=function(){return this.Ha.name};Pq.prototype.xn=function(a){this.Ha.title=a};function Qq(){Lq.apply(this,arguments)}r(Qq,Lq);Qq.prototype.BA=function(){this.element.style.transition="border 0.4s ease 0s, box-shadow 0.4s ease 0s, background-color 1.4s ease 0s";this.element.style.width="50px";this.element.style.height="30px";this.element.style.borderRadius="20px";this.element.style.lineHeight="30px";this.element.style.position="relative";this.element.style.userSelect="none";this.element.style["-webkit-tap-highlight-color"]="transparent";this.element.style.display="inline-block";this.element.style.verticalAlign="middle";this.element.style.cursor="pointer";this.element.style.boxSizing="content-box";this.button=document.createElement("div");this.button.style.backgroundColor="white";this.button.style.height="30px";this.button.style.width="30px";this.button.style.top="0";this.button.style.borderRadius="100%";this.button.style.display="block";this.button.style.background="white";this.button.style.boxShadow="0 1px 4px rgba(0, 0, 0, 0.6)";this.button.style.transition="left 0.2s";this.button.style.overflow="hidden";this.button.style.position="absolute";this.element.appendChild(this.button)};Qq.prototype.ek=function(){this.Ha.checked?(this.element.style.backgroundColor="rgb(246, 115, 0)",this.element.style.boxShadow="rgb(246, 115, 0) 0 0 0 16px inset",this.element.style.border="1px solid rgb(246, 115, 0)",this.button.style.left="20px"):(this.element.style.backgroundColor="rgb(233, 233, 233)",this.element.style.boxShadow="rgb(233, 233, 233) 0 0 0 16px inset",this.element.style.border="1px solid rgb(223, 223, 223)",this.button.style.left="0")};function Rq(){}function Sq(a,b){b.style.margin="4px 0 7px 4px"}function Tq(a,b,c){b.innerText=c;b.style.fontSize="12px";b.style.display="inline-block";b.style.marginBottom="5px"}function Uq(a,b){H(b,"chat-settings-input");b.style.display="block";b.style.fontSize="12px";b.style.marginTop="0";b.style.borderWidth="1px";b.style.borderStyle="solid";b instanceof HTMLSelectElement&&(H(b,"chat-settings-select"),b.style.height="24px",b.style.width="100%")};var Vq=!1,Wq=new Map;function Xq(){this.Xf="10"}var Yq;function Zq(){void 0===Yq&&(Yq=new Xq);return Yq}function $q(a,b){b=b.match(/\d/g);b=null===b||void 0===b?void 0:b.join("");void 0!==b&&a.Xf!==b&&(a.Xf=b,ar(a))}
function br(a,b,c,d,e){b=void 0===b?!1:b;a=(void 0===e?0:e)||!(b||void 0!==d&&d)?"10":a.Xf;c=void 0===c?!1:c;c=N("div",{style:{display:"inline-block"},colorClass:["noteIconSvg",void 0===b||b?"regMsg":"roomNoticeMsg",(void 0===c?0:c)?"fvm":"tm"]},N("svg",{height:"12",width:"12",viewBox:"0 0 12 12",xmlns:"https://www.w3.org/2000/svg"},N("path",{d:"M5.5 2.00002H2C1.73478 2.00002 1.48043 2.10537 1.29289 2.29291C1.10536 2.48044 1 2.7348 1 3.00002V10C1 10.2652 1.10536 10.5196 1.29289 10.7071C1.48043 10.8947 1.73478 11 2 11H9C9.26522 11 9.51957 10.8947 9.70711 10.7071C9.89464 10.5196 10 10.2652 10 10V6.50002","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),N("path",{d:"M9.25 1.24985C9.44891 1.05094 9.7187 0.939194 10 0.939194C10.2813 0.939194 10.5511 1.05094 10.75 1.24985C10.9489 1.44877 11.0607 1.71855 11.0607 1.99985C11.0607 2.28116 10.9489 2.55094 10.75 2.74985L6 7.49985L4 7.99985L4.5 5.99985L9.25 1.24985Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})));c.firstElementChild instanceof SVGElement&&(b=c.firstElementChild,b.style.height=a+"px",b.style.width=a+"px",b.style.display="inline-block",b.style.marginLeft="2px");return c}
function ar(a){document.querySelectorAll(".notesIcon_msg").forEach(function(b){var c=b.querySelector("svg");b=b.querySelector("img");if(null!==c){b={height:a.Xf,width:a.Xf};var d=c.querySelector("use");if(null!==d)for(var e=q(Object.keys(b)),f=e.next();!f.done;f=e.next())f=f.value,d.setAttribute(f,b[f]);c.style.height=a.Xf+"px";c.style.width=a.Xf+"px"}else null!==b&&(b.height=parseInt(a.Xf),b.width=parseInt(a.Xf),b.style.height=a.Xf+"px",b.style.width=a.Xf+"px")})}
function cr(a){var b=this;this.Um=new Set;(Vq=void 0===a||a)||dr().then(function(c){c.forEach(function(d){b.Um.add(d)})}).catch(function(){u("Could not retrieve list of users for which currentUser has notes on")})}var er;function fr(a){void 0===er&&(er=new cr(a));return er}cr.prototype.sm=function(a){return this.Um.has(a)};function gr(a,b){a.Um.add(b);hr(b,!0)}cr.prototype.remove=function(a){this.Um.has(a)&&(this.Um.delete(a),hr(a,!1))};function hr(a,b){document.body.querySelectorAll(".notesIcon_"+a).forEach(function(c){c.style.display=b?"inline-block":"none"})}function ir(a){var b;a=new P(a);var c=mm(a,"error",!1);if(void 0===c)return{success:V(a,"success")};a=new P(c);c=null===(b=dm(a,"text"))||void 0===b?void 0:b.map(function(d){return{message:T(d,"message"),code:T(d,"code")}});b={text:void 0===c?[]:c};return{success:V(a,"success"),error:b}}
function dr(){return y("api/notes/usernames/").then(function(a){a=new P(a.responseText);return JSON.parse(lm(a,"usernames"))})}function jr(a){return y("api/notes/for_user/"+a+"/").then(function(b){return{text:S(new P(b.responseText),"text")}})}function kr(a){return new Promise(function(b,c){B("api/notes/for_user/"+a.V+"/",{text:a.text}).then(function(d){d=ir(d.responseText);b(d)}).catch(function(d){c(d.status)})})}
function lr(a,b,c,d){G.call(this);this.Yg=a;this.Ae=b;this.$m=c;this.Zm=d;this.Gp=!0;this.element.style.position="relative";this.element.appendChild(this.Ge());mr(this)}r(lr,G);lr.prototype.Ge=function(){this.Il=function(){};return document.createElement("div")};function mr(a){if(Vq)a.yf=a.$.value,a.$.placeholder=Ki,a.Gp=!1;else{var b=nr(a);jr(a.Ae).then(function(c){c=void 0===c.text?"":c.text;void 0!==b&&c===b.yf?(a.$.value=b.sg,a.sg=b.sg):(a.$.value=c,a.sg=c);a.yf=c;a.$.placeholder=Ki;a.Gp=!1;a.Il();a.$.selectionStart=a.$.selectionEnd=a.$.value.length;a.$.blur();a.$.focus();a.$.scrollTop=a.$.scrollHeight}).catch(function(){u("Unable to get notes for user "+a.Ae)})}}function nr(a){return Wq.has(a.Ae)?Wq.get(a.Ae):void 0}
function or(a){Vq||Wq.set(a.Ae,{yf:a.yf,sg:a.sg})}function pr(a){Wq.has(a.Ae)&&Wq.delete(a.Ae)}
function qr(a){if(!Vq||!Bq('You must be logged in to add a Note. Click "OK" to login.')){var b=a.$.value.trim();a.yf!==b&&300>=b.length?kr({V:a.Ae,text:b}).then(function(c){if(c.success)a.yf=b,a.$.blur(),pr(a),a.$m(),C("NoteSaved",{username:a.Yg,to_user:a.Ae}),""===a.yf?fr(!1).remove(a.Ae):gr(fr(!1),a.Ae);else if(void 0!==c.error){var d="Following error(s) occurred:<br/>";c.error.text.forEach(function(e){d+="Note text: "+e.message+" <br/>"});J(d,void 0,!0)}}).catch(function(){u("Was not able to update notes for user "+
a.Ae)}):300<b.length?J("Note text must be shorter than 300 characters."):a.$m()}}function rr(a,b,c,d){lr.call(this,a,b,c,d);this.username=a;this.Ae=b;this.$m=c;this.Zm=d}r(rr,lr);rr.prototype.Ge=function(){function a(){c.sg=c.$.value.trim();or(c);c.$.value!==c.yf?(void 0!==A&&(clearTimeout(A),A=void 0),void 0!==c.Zm&&c.Zm()):A=window.setTimeout(function(){p||(m.style.display="none",g.style.display="none");p=!1},500);c.Il()}function b(){qr(c);n.style.opacity="0.5";n.style.cursor="not-allowed"}var c=this,d=document.createElement("div");d.style.paddingTop="8px";d.style.borderTop="1px solid #F0F0F0";var e=document.createElement("img");e.src="https://static-assets.highwebmedia.com/tsdefaultassets/notes_light.svg";e.width=12;e.height=12;e.style.display="inline-block";e.style.width="12px";e.style.height="12px";e.style.marginRight="5px";e.style.marginLeft="1px";var f=document.createElement("span");f.textContent=Ii;f.style.display="inline-block";f.style.verticalAlign="top";f.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";f.style.fontSize="12px";f.style.color="#49494F";f.style.lineHeight="12px";var g=document.createElement("span");g.textContent=Li;g.style.display="inline-block";g.style.verticalAlign="top";g.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";g.style.fontSize="12px";g.style.color="#49494F";g.style.lineHeight="12px";g.style.marginLeft="2px";g.style.display="none";f.appendChild(g);var h=document.createElement("div");h.style.margin="0px 10px 8px 10px";h.style.height="15px";h.appendChild(e);h.appendChild(f);d.appendChild(h);this.$=document.createElement("textarea");this.$.style.width="calc(100% - 17px)";this.$.style.height="50px";this.$.style.lineHeight="14px";this.$.style.borderWidth="1px";this.$.style.borderStyle="solid";this.$.style.borderColor="#ACACAC";this.$.style.borderRadius="4px";this.$.style.resize="none";this.$.style.display="block";this.$.style.padding="7px 8px";this.$.style.margin="0px auto";this.$.style.overflow="auto";this.$.style.boxSizing="border-box";this.$.placeholder=Ji;d.appendChild(this.$);e=document.createElement("form");var m=document.createElement("div");m.style.margin="10px 10px 0px 0px";m.style.textAlign="right";m.style.display="none";f=document.createElement("a");f.innerText=Vf;f.style.display="inline-block";f.style.marginRight="8px";f.style.verticalAlign="middle";f.style.cursor="pointer";f.href="#";var n=document.createElement("input");n.type="submit";n.value=Oe;n.style.backgroundColor="#F47321";n.style.opacity="0.5";n.style.border="1px solid #A8A8A8";n.style.borderRadius="4px";n.style.boxSizing="border-box";n.style.cursor="pointer";n.style.height="27px";n.style.width="69px";n.style.font="16px ubuntumedium,Arial,Helvetica,sans-serif";n.style.color="#FFFFFF";n.style.webkitAppearance="none";n.style.display="inline-block";n.style.textAlign="center";var p=!1,A;this.Il=function(){var z=c.yf!==c.sg,D=300>=c.$.value.length;n.style.opacity=z&&D?"1":"0.5";n.style.cursor=z&&D?"pointer":"not-allowed";g.style.display=z?"":"none";m.style.display=z?"":"none"};jb()&&v("keyup",this.$,function(z){8===z.keyCode&&a()});v("input",this.$,function(){a()});v("keydown",this.element,function(z){z.ctrlKey||z.metaKey||27===z.keyCode||(z.stopPropagation(),z.shiftKey&&13===z.keyCode&&(z.preventDefault(),b()))});v("click",f,function(z){z.preventDefault();pr(c);c.$m()});v("submit",e,function(z){z.preventDefault();p=!0;b()});e.appendChild(f);e.appendChild(n);m.appendChild(e);d.appendChild(m);e=document.createElement("div");e.style.margin="4px 0px";e.style.height="2px";d.appendChild(e);return d};function sr(){lr.apply(this,arguments)}r(sr,lr);sr.prototype.Ge=function(){function a(){c.Gp||(c.sg=c.$.value.trim(),or(c),c.$.value!==c.yf?(void 0!==A&&(clearTimeout(A),A=void 0),void 0!==c.Zm&&c.Zm()):A=window.setTimeout(function(){p||(m.style.display="none",g.style.display="none");p=!1},500),c.Il())}function b(){qr(c);n.style.opacity="0.5";n.style.cursor="not-allowed"}var c=this,d=document.createElement("div");d.style.paddingTop="8px";H(d,"ucmNote");d.style.borderTopWidth="1px";d.style.borderTopStyle="solid";var e=document.createElement("div");H(e,"notesIcon");e.style.display="inline-block";e.style.width="12px";e.style.height="12px";e.style.marginRight="5px";e.style.marginLeft="1px";var f=document.createElement("span");f.textContent=Ii;f.style.display="inline-block";f.style.verticalAlign="top";f.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";f.style.fontSize="12px";f.style.lineHeight="12px";var g=document.createElement("span");g.textContent=Li;g.style.display="inline-block";g.style.verticalAlign="top";g.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";g.style.fontSize="12px";g.style.lineHeight="12px";g.style.marginLeft="2px";g.style.display="none";f.appendChild(g);var h=document.createElement("div");H(h,"ucmLinkColor");h.style.margin="0px 10px 8px 10px";h.style.height="15px";h.appendChild(e);h.appendChild(f);d.appendChild(h);this.$=document.createElement("textarea");this.$.style.width="calc(100% - 38px)";this.$.style.height="56px";this.$.style.lineHeight="14px";this.$.style.borderWidth="1px";this.$.style.borderStyle="solid";this.$.style.borderRadius="4px";this.$.style.resize="none";this.$.style.display="block";this.$.style.padding="7px 8px";this.$.style.margin="0px auto";this.$.style.overflow="auto";this.$.placeholder=Ji;this.$.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";this.$.style.fontSize="100%";this.$.tabIndex=1;d.appendChild(this.$);var m=document.createElement("div");m.style.margin="10px 10px 0px 0px";m.style.textAlign="right";m.style.display="none";e=document.createElement("a");H(e,"cancelLink");e.innerText=Vf;e.style.display="inline-block";e.style.marginRight="8px";e.style.verticalAlign="middle";e.style.cursor="pointer";e.href="#";e.tabIndex=3;var n=document.createElement("input");n.type="submit";n.value=Oe;n.style.opacity="0.5";n.style.borderWidth="1px";n.style.borderStyle="solid";n.style.borderRadius="4px";n.style.boxSizing="border-box";n.style.cursor="pointer";n.style.height="27px";n.style.width="69px";n.style.font="16px UbuntuMedium,Helvetica,sans-serif";n.style.webkitAppearance="none";n.style.display="inline-block";n.style.textAlign="center";n.tabIndex=2;var p=!1,A;this.Il=function(){if(!c.Gp){var z=c.yf!==c.sg,D=300>=c.$.value.length;n.style.opacity=z&&D?"1":"0.5";n.style.cursor=z&&D?"pointer":"not-allowed";g.style.display=z?"":"none";m.style.display=z?"":"none"}};jb()&&v("keyup",this.$,function(z){8===z.keyCode&&a()});ab()&&v("keyup",this.$,function(){""===c.sg&&(c.$.placeholder=Ki)});v("input",this.$,function(){a()});v("keydown",this.element,function(z){z.ctrlKey||z.metaKey||27===z.keyCode||(z.stopPropagation(),!eb()&&z.shiftKey&&13===z.keyCode&&(z.preventDefault(),p=!0,b()))});v("click",e,function(z){z.preventDefault();pr(c);c.$m()});v("click",n,function(z){z.preventDefault();p=!0;b()});m.appendChild(e);m.appendChild(n);d.appendChild(m);e=document.createElement("div");e.style.margin="4px 0px";e.style.height="2px";d.appendChild(e);return d};var tr=new F("getChatMode");function ur(){G.apply(this,arguments);this.Kr=new F("chatSettingsSavedRequest")}r(ur,G);k=ur.prototype;k.initData=function(){this.sj=this.Pe=!1;this.hy=!0;this.Tk=document.createElement("div");this.$p=document.createElement("div");this.form=document.createElement("form");this.Iv=document.createElement("div");this.Lh=document.createElement("input");this.lg=document.createElement("span");this.zk=document.createElement("select");this.So=document.createElement("select");this.Oo=document.createElement("select");this.An=new Qq(!1,this.Ib.bind(this));this.fp=document.createElement("select");this.Pp=document.createElement("select");this.Qp=document.createElement("select");this.IA=document.createElement("label");this.sd=new pq({Ob:16,Gx:"rgb(246, 115, 0)",gx:"#cccccc",nx:"rgb(246, 115, 0)"});this.Km=document.createElement("label")};k.qa=function(){var a=this;this.element.style.width="100%";this.element.style.overflow="auto";this.element.style.boxSizing="border-box";this.element.style.padding="11px";this.element.style.fontSize="12px";this.element.style.position="static";this.form.style.marginBottom="40px";this.form.style.maxWidth="400px";this.element.appendChild(this.form);var b=document.createElement("div"),c=document.createElement("div");this.form.appendChild(b);this.form.appendChild(c);this.form.appendChild(this.Iv);this.form.appendChild(this.Tk);this.form.appendChild(this.$p);vr(this);vr(this);vr(this);vr(this);vr(this);var d=this.Xi(gi);d.style.marginTop="0";b.appendChild(d);b.appendChild(wr(this));b.appendChild(xr(this));b.appendChild(yr(this));c.appendChild(this.Xi(hi));c.appendChild(zr(this));c.appendChild(Ar(this,document.createElement("label"),id,this.Oo,[{label:"Turn Off Autocomplete",value:"-1"},{label:"No Delay - 0s",value:"0"},{label:"Short - 0.5s",value:"500"},{label:"Medium - 1s",value:"1000"},{label:"Long - 1.5s",value:"1500"}]));this.Iv.appendChild(this.Xi(ii));this.Iv.appendChild(Ar(this,document.createElement("label"),jd,this.fp,[{label:"Dark Purple (Tipped 1000 recently)",value:"darkpurple"},{label:"Light Purple (Tipped 250 recently)",value:"lightpurple"},{label:"Dark Blue (Tipped 50 recently)",value:"darkblue"},{label:"Light Blue (Owns or purchased tokens)",value:"lightblue"}]));this.Tk.appendChild(this.Xi(ji));this.Tk.appendChild(Ar(this,document.createElement("label"),li,this.Pp,Br()));this.Tk.appendChild(Ar(this,document.createElement("label"),mi,this.Qp,Br()));this.$p.appendChild(this.Xi(ki));this.$p.appendChild(Cr(this));this.$p.appendChild(Dr(this));Kq.j(function(e){a.Un(e);$q(Zq(),e.fontSize)});K.j(function(e){a.Kf(e);$q(Zq(),e.C.ta.fontSize)})};function Er(a){void 0!==a.Co&&a.Co.D();void 0!==a.fl&&a.fl.D()}function Fr(a,b){a.Lh.value=b;a.lg.style.color=b;a.lg.style.backgroundColor=b}
k.iz=function(a){if(!this.yb()){if(Bq('You must be logged in to change chat color. Click "OK" to login.')){a.preventDefault();return}if(!this.sj){J("You must be a supporter to change chat color");a.preventDefault();return}}void 0===this.Co&&(this.Co=this.J(new Eq(this.lg,this.Wp.bind(this),this.Ym.bind(this))));this.Co.show(this.Lh.value)};k.Wp=function(a){Fr(this,a);this.Ib()};k.Ym=function(a){Fr(this,a)};function Ar(a,b,c,d,e){var f=document.createElement("div");Sq(vr(a),f);f.appendChild(b);f.appendChild(d);if(void 0!==e&&d instanceof HTMLSelectElement){e=q(e);for(var g=e.next();!g.done;g=e.next()){g=g.value;var h=document.createElement("option");h.innerText=g.label.toString();h.value=g.value.toString();d.appendChild(h)}}Tq(vr(a),b,c);Uq(vr(a),d);f.onclick=function(m){Bq('You must be logged in to change chat settings. Click "OK" to login.')?m.preventDefault():m.target!==d&&d.focus()};d.onmousedown=function(m){Bq('You must be logged in to change chat settings. Click "OK" to login.')&&m.preventDefault()};v("change",d,function(){a.Ib()});return f}function wr(a){var b=Ar(a,document.createElement("label"),ed,a.lg);b.appendChild(a.Lh);a.lg.style.width="20px";a.lg.style.height="20px";a.lg.style.border="1px solid "+Nc.us;a.lg.style.cursor="pointer";a.lg.style.verticalAlign="middle";a.lg.onmousedown=a.iz.bind(a);b.onclick=a.iz.bind(a);a.Lh.type="hidden";return b}
function xr(a){function b(d){a.yb()||(Bq('You must be logged in to change font family. Click "OK" to login.')?d.preventDefault():a.sj||(d.preventDefault(),a.zk.blur(),J("You must be a supporter to change font family")))}var c=Ar(a,document.createElement("label"),fd,a.zk,[{label:"Default",value:"default"},{label:"Arial",value:"Arial, Helvetica"},{label:"Bookman Old Style",value:"Bookman Old Style"},{label:"Comic Sans",value:'"Comic Sans MS", cursive'},{label:"Courier",value:'"Courier New"'},{label:"Lucida",value:"Lucida"},{label:"Palantino",value:"Palantino"},{label:"Tahoma",value:"Tahoma, Geneva"},{label:"Times New Roman",value:'"Times New Roman"'}]);a.zk.onmousedown=b.bind(a);c.onclick=b.bind(a);return c}function yr(a){for(var b=[],c=9;20>=c;c+=1)b.push({label:c+"pt",value:c+"pt"});return Ar(a,document.createElement("label"),gd,a.So,b)}function zr(a){var b=Ar(a,document.createElement("label"),hd,a.An.element);a.An.element.style.display="block";return b}
function Cr(a){var b="";tr.j(function(d){b=d});var c=Ar(a,a.IA,kd,a.sd.element);Gr(a);a.um(a.sd.Le());a.sd.Zn.j(function(d){a.um(d)});a.sd.$n.j(a.um.bind(a));a.sd.Yn.j(function(d){a.um(d);C("TipVolumeChanged",{tipvol:d,chatmode:b});d=Math.round(a.sd.Le());a.hy?(zb("tipvol",""+d,60),a.ta.mf=d,Kq.h(a.ta)):a.Ib()});c.onclick=function(){};a.sd.element.onmousedown=function(){};return c}k.um=function(a){this.IA.innerText=kd+" ("+Math.round(a)+"%)"};function Dr(a){var b=Hr(a,a.Km);a.Km.onclick=function(){Bq('You must be logged in to edit ignored users. Click "OK" to login.')||(void 0===a.fl&&void 0===a.fl&&(a.fl=hb()?new yq:new xq),void 0!==a.fl&&a.fl.Nf())};return b}
function Hr(a,b){var c=document.createElement("div");Sq(vr(a),c);c.appendChild(a.Km);H(b,"link");b.innerText=ld;b.style.marginTop="16px";b.style.cursor="pointer";b.onmouseenter=function(){b.style.textDecoration="underline"};b.onmouseleave=function(){b.style.textDecoration="none"};return c}k.Xi=function(a){var b=document.createElement("div");vr(this);b.innerText=a;b.style.fontWeight="bold";b.style.fontSize="12px";b.style.margin="14px 0 8px";b.style.backgroundColor="";return b};k.Ib=function(){var a=this;Bq('You must be logged in to change chat settings. Click "OK" to login.')?Kq.h(this.ta):(B("choose_viewer_chat_color/",{color:this.Lh.value}).catch(function(b){a.Lh.value=a.ta.Ls;u("Error saving user chat color: "+b)}),B("api/viewerchatsettings/"+this.W+"/",Ir(this)).then(function(){a.Kr.h(void 0);a.Pe&&(a.ta.Nj=Vp(a.Pp.value),a.ta.Pj=Vp(a.Qp.value));a.ta.Ls=a.Lh.value;a.ta.fontFamily=decodeURIComponent(a.zk.value);a.ta.fontSize=a.So.value;a.ta.vc=a.An.Ha.checked;a.ta.vk=a.Oo.value;a.ta.Sx=a.fp.value;a.ta.mf=Math.round(a.sd.Le());Kq.h(a.ta)}).catch(function(b){u("Error saving user chat settings: "+b)}))};function Ir(a){var b={color:a.Lh.value};b.font_family=decodeURIComponent(a.zk.value);b.font_size=a.So.value;b.show_emoticons=""+a.An.Ha.checked;b.emoticon_autocomplete_delay=a.Oo.value;b.highest_token_color=a.fp.value;b.viewer_tip_volume=""+Math.round(a.sd.Le());a.Pe&&(b.enter_notify=a.Pp.value,b.leave_notify=a.Qp.value);return b}
function Gr(a){a.sd.element.style.display="inline-block";a.sd.element.style.border="none";a.sd.element.style.verticalAlign="top";a.sd.element.style.height="16px";a.sd.element.style.width="100%"}k.G=function(){this.sd.Jf()};function vr(a){void 0===a.sw&&(a.sw=new Rq);return a.sw}
k.Un=function(a){this.ta=a;Fr(this,this.ta.Ls);this.zk.value=this.ta.fontFamily;this.So.value=this.ta.fontSize;Nq(this.An,this.ta.vc);this.Oo.value=this.ta.vk;this.fp.value=this.ta.Sx;sq(this.sd,this.ta.mf);this.um(this.ta.mf);Ob=this.ta.mf};k.yb=function(){return!1};k.Kf=function(a){this.Un(a.C.ta);this.W=a.C.B;this.Pe=a.C.Pe;this.sj=a.C.sj;this.hy=a.A.Ce;this.Pe?(this.Tk.style.display="block",this.Pp.value=Jr(this.ta.Nj),this.Qp.value=Jr(this.ta.Pj)):this.Tk.style.display="none"};function Br(){return[{label:"All Registered Users",value:"orga"},{label:"Mods, Fans, and Users With Tokens",value:"orgb"},{label:"Mods and Fans",value:"org"},{label:"No Users",value:"none"}]}function Jr(a){switch(a){case 0:return"orga";case 1:return"orgb";case 2:return"org";case 3:return"none";default:return u("Invalid enter/leave setting: "+a),"orgb"}};function Kr(a,b){function c(f){d.state.T&&!d.vd&&(d.vd=!0,C("UserUnmuted",{chatMode:d.wf}));f!==d.state.volume&&d.Ii(f)}G.call(this);var d=this;this.oa=a;this.state={volume:60,T:!0};this.vd=!1;this.UD=b;this.state.T=Lr();this.state.volume=Mr();this.element.style.bottom="0px";this.element.style.left="0px";this.element.style.height="32px";this.element.style.background="url(https://static-assets.highwebmedia.com/tsdefaultassets/ConfigBarNoEdge.png) repeat-x";this.Ta=this.J(new pq({Ob:11,sf:66,Ih:4,Hx:"https://static-assets.highwebmedia.com/tsdefaultassets/SliderKnob.png",Ar:"https://static-assets.highwebmedia.com/tsdefaultassets/SliderBar.png"}));this.Ta.element.style.position="absolute";this.Ta.element.style.left="30px";this.Ta.element.style.bottom="10px";sq(this.Ta,this.state.volume);this.Ta.Zn.j(function(f){d.state.T&&!d.vd&&(d.vd=!0,C("UserUnmuted",{chatMode:d.wf}));d.oa.$f(!1);d.ye();c(f)});this.Ta.$n.j(c);this.Ta.Yn.j(function(f){c(f);0===d.state.volume&&d.oa.$f(!0);C("ChangeVolume",{volume:f})});b=document.createElement("div");b.style.width="115px";b.style.height="100%";b.style.cssFloat="left";this.element.appendChild(b);this.Eq=document.createElement("img");this.Eq.src="https://static-assets.highwebmedia.com/tsdefaultassets/ConfigBar.png";this.Eq.style.width="100%";this.Eq.style.height="100%";b.appendChild(this.Eq);this.Ea=document.createElement("img");this.Ea.src="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume0.png";this.Ea.style.position="absolute";this.Ea.style.bottom="6px";this.Ea.style.left="5px";this.Ea.onclick=function(){C("ToggleMute",{newState:!d.state.T});C("ChangeVolume",{volume:d.state.volume});d.state.T?(d.vd||(d.vd=!0,C("UserUnmuted",{chatMode:d.wf})),d.ye()):d.ii()};b.appendChild(this.Ea);var e=kc();document[nc()]=function(){oc()||(e=!1,d.ua.style.display="none",J("Full screen is unavailable."))};this.ua=document.createElement("img");this.ua.src="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonFullscreen.png";this.ua.style.position="relative";this.ua.style.top="1px";this.ua.style.cssFloat="right";kc()||(this.ua.style.display="none");this.ua.onclick=function(){e&&d.oa.dj()};this.element.appendChild(this.ua);this.Ba=document.createElement("img");this.Ba.src="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQuality.png";this.Ba.style.position="relative";this.Ba.style.top="1px";this.Ba.style.display="none";this.Ba.style.cssFloat="right";this.Ba.onclick=function(){d.UD.show()};this.element.appendChild(this.Ba);this.ti=document.createElement("img");this.ti.src="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonScale.png";this.ti.style.position="relative";this.ti.style.top="1px";this.ti.style.cssFloat="right";this.ti.style.display=oc()?"":"none";this.ti.onclick=function(){var f=d.oa;f.nt=!f.nt;Nr(f)};this.element.appendChild(this.ti);K.j(function(f){void 0===f.C.Sa?u("Dossier is missing context."):(d.ze(),Or(d))});gq.j(function(){d.ii()});a.Ve.j(function(f){if(0===f.length)d.Ba.style.display="none";else{d.Ba.style.display="";var g="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQuality.png";f=q(f);for(var h=f.next();!h.done;h=f.next())if(h=h.value,h.label.includes("4K")||h.label.includes("HD")){if(g="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQualityHDAvil.png",!0===h.ak){g="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQualityHDSel.png";break}}else h.label.includes("Auto")&&720<=parseInt(h.label.slice(6,-2))&&(g="https://static-assets.highwebmedia.com/tsdefaultassets/ButtonQualityHDSel.png");d.Ba.src=g}});tr.j(function(f){d.wf=f});Or(this);this.D()}r(Kr,G);k=Kr.prototype;k.Ib=function(){t()&&!this.oa.ci&&window.localStorage.setItem("videoControls",JSON.stringify({volume:this.state.volume,isMuted:this.state.T}))};function Mr(){if(t()){var a=window.localStorage.getItem("videoControls");if(null!==a)return JSON.parse(a).volume}return 60}function Lr(){if(t()){var a=window.localStorage.getItem("videoControls");if(null!==a)return JSON.parse(a).isMuted}return!1}k.show=function(){this.element.style.visibility=""};k.D=function(){this.element.style.visibility="hidden"};k.ii=function(){!0!==this.state.T&&(this.state.T=!0,Or(this))};k.ye=function(){!1!==this.state.T&&(this.state.T=!1,0===this.state.volume&&(this.state.volume=60),Or(this))};k.G=function(){this.ti.style.display=oc()?"":"none"};function Or(a){a.ze();a.oa.nl(a.state.volume,a.state.T);sq(a.Ta,a.state.volume);a.Ib();Nb=a.state.T?0:a.state.volume}
k.ze=function(){this.Ea.src=!0===this.state.T?"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume0.png":0===this.state.volume?"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume1.png":40>this.state.volume?"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume2.png":70>this.state.volume?"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume3.png":"https://static-assets.highwebmedia.com/tsdefaultassets/ButtonVolume4.png"};k.Ii=function(a){this.state.volume!==a&&(this.state.volume=a,0!==a&&(this.state.T=!1),Or(this))};k.gg=function(a){this.vd||a||(this.vd=!0);this.state.T=a;Or(this)};k.Av=function(a){this.Ii(a);this.Ib()};k.zv=function(a){this.gg(a);this.Ib()};k.Lf=function(){this.D()};k.ac=function(){return"hidden"===this.element.style.visibility?0:32};k.tp=function(){return!1};var Pr=window.Hls;function Qr(a){a=void 0===a?{}:a;a.tabHidden=document.hidden;a.videoSessionID=Rr().value;C("VideoMetric",a,!0)}function Sr(){return Ya()?window.performance.now():(new Date).getTime()}function Tr(){var a=window.browserId;void 0!==a?this.nk=a:(a=window.initialRoomDossier,void 0!==a&&(this.nk=$p(new P(a)).nk))}var Ur;Tr.prototype.clear=function(){this.hr=void 0};function Rr(){void 0===Ur&&(Ur=new Tr);return Ur}
da.Object.defineProperties(Tr.prototype,{value:{configurable:!0,enumerable:!0,get:function(){void 0===this.hr&&(this.hr=this.nk+":"+(new Date).getTime());return this.hr}}});function Vr(){Ya()&&(this.start=Sr())}
Vr.prototype.send=function(a,b,c){if(Ya()&&void 0!==this.start){var d=Sr()-this.start-b,e=this.start=Sr();a={eventName:"autoPlayDuration",autoPlayDuration:e/1E3,autoPlayDurationMS:e,autoPlayDurationNoDelay:d/1E3,autoPlayDurationNoDelayMS:d,autoPlayable:a};0!==b&&(a.autoPlayHiddenDelay=b/1E3,a.autoPlayHiddenDelayMS=b);void 0!==c&&null!==c&&(a.autoPlayError=c);Qr(a)}};function Wr(a){var b=this;this.Hu=this.Lv=!1;this.wh=function(c){c=void 0===c?{}:c;var d={playerType:b.ND},e;for(e in c)d[e]=c[e];Qr(d)};this.sE=function(){var c={eventName:"playerCreated"},d=wb().player;void 0!==d&&(c.playerOverride=d);b.wh(c);b.$B=Sr()};this.az=function(c){b.tq=Sr();Rr().nk=c.C.nk};this.bz=function(){b.Lv||(b.yq(),Rr().clear())};this.cn=function(){b.Lv||(b.yq(),b.Lv=!0,b.mq())};this.ND=a;this.sE()}
function Xr(a){a.mq();K.j(a.az);tc.j(a.bz);v("beforeunload",window,a.cn);v("unload",window,a.cn);a.Hu=!0}Wr.prototype.yq=function(){if(void 0!==this.tq&&Ya()){this.Ju=Sr();var a=this.Ju-this.tq;this.wh({eventName:"viewerDuration",viewerDuration:a/1E3,viewerDurationMS:a});return a}};Wr.prototype.mq=function(){this.Hu&&(x("beforeunload",window,this.cn),x("unload",window,this.cn),K.removeListener(this.az),tc.removeListener(this.bz),this.Hu=!1)};function Yr(a){Wr.call(this,a);var b=this;this.gp=this.Yx=this.et=this.jp=!1;this.rE=function(){if(!b.et){var c={eventName:"videoPlaying",isAjax:!1,bitrate:b.Jk},d=b.bC();void 0!==d&&b.wh({eventName:"broadcastDelay",broadcastDelayMS:d,broadcastDelay:d/1E3});d=Sr();if(void 0===b.dt)w("Playing metric has triggered but htmlMediaLoadStartTime is undefined...skipping");else{var e=d-b.dt;c.timeSinceMediaLoadStart=e/1E3;c.timeSinceMediaLoadStartMS=e}void 0!==b.at&&(e=d-b.at,c.timeSinceMediaAttaching=e/1E3,c.timeSinceMediaAttachingMS=e);if(b.Yx){if(void 0===b.tq){w("Playing metric is for AJAX reload but roomLoadedTime is undefined...skipping");return}e=d-b.tq;c.timeSinceLoadAjax=e/1E3;c.timeSinceLoadAjaxMS=e;c.isAjax=!0;void 0===b.Ju?w("Playing metric is for AJAX reload but roomUnloadedTime is undefined"):(e=d-b.Ju,c.timeSinceUnloadAjax=e/1E3,c.timeSinceUnloadAjaxMS=e)}else d-=b.$B,c.timeSincePlayerCreated=d/1E3,c.timeSincePlayerCreatedMS=d;b.wh(c);b.et=!0;b.Yx=!0}};this.qE=function(){var c=b.Oa instanceof
HTMLMediaElement?b.Oa.error:b.Oa.error_;void 0!==c&&null!==c&&b.wh({eventName:"playerError",errorCode:c.code,errorMessage:c.message,errorSource:"HTMLMediaElement",errorReadyState:b.Oa.readyState,errorNetworkState:b.Oa.networkState,bitrate:b.Jk})};this.nd=function(c){b.jp&&("playing"===c.type?b.rE():"loadstart"===c.type?b.dt=Sr():"error"===c.type?b.qE():"stalled"===c.type?(c=c.target,void 0!==c&&null!==c&&b.wh({eventName:"playerStalled",stalledReadyState:c.readyState,stalledNetworkState:c.networkState,bitrate:b.Jk})):w("Received unknown HTMLMediaElement event: ",c))};this.yB=function(c){b.Fz();b.ih=c;b.ih.on(Pr.Events.ERROR,b.oh);b.ih.on(Pr.Events.FRAG_CHANGED,b.oh);Ya()&&(b.ih.on(Pr.Events.LEVEL_SWITCHING,b.oh),b.ih.on(Pr.Events.LEVEL_SWITCHED,b.oh),b.ih.on(Pr.Events.MEDIA_ATTACHING,b.oh));b.gp=!0};this.lB=function(c){var d=c.level;if(void 0===d)w("Received Hls.Events.LEVEL_SWITCHING without a level: ",c);else{for(var e=q(["bitrate","height","width"]),f=e.next();!f.done;f=e.next())if(f=f.value,isNaN(c[f])){w("Level "+f+" is not a number: "+c[f]+"...skipping");return}b.Ux[d]=c;b.Vx.unshift({level:d,ts:Sr()})}};this.uE=function(c){var d=c.level;if(void 0===d)w("Received Hls.Events.LEVEL_SWITCHED without a level: ",c);else{var e=b.Ux[d];if(void 0===e)w("Received unknown Hls.Events.LEVEL_SWITCHED level: ",c);else{c=q(b.Vx);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.level===d){d=f.ts;d=Sr()-d;b.hp.push(d);break}if(void 0===b.yg||e.bitrate>b.yg.bitrate)b.yg=e;b.Jk=e.bitrate}}};this.bC=function(){if(void 0!==b.ip){var c=b.Oa.currentTime()-b.ip.start;if(!(0>c||(c=(new Date).getTime()-b.ip.programDateTime+1E3*c,0>c||3E5<c)))return c}};this.oh=function(c,d){b.gp&&(c===Pr.Events.LEVEL_SWITCHING?b.lB(d):c===Pr.Events.LEVEL_SWITCHED?b.uE(d):c===Pr.Events.FRAG_CHANGED?b.ip=d.frag:c===Pr.Events.MEDIA_ATTACHING?b.at=Sr():c===Pr.Events.ERROR?(c=b.Oa.tech().el(),b.wh({eventName:"playerError",errorCode:d.type,errorMessage:d.details,errorSource:"hls.js",errorReadyState:c.readyState,errorNetworkState:c.networkState,bitrate:b.Jk,quality:b.TC})):w("Received unknown Hls.Event: ",c))};this.Fz=function(){b.gp&&(b.ih.off(Pr.Events.ERROR,b.oh),b.ih.off(Pr.Events.FRAG_CHANGED,b.oh),Ya()&&(b.ih.off(Pr.Events.LEVEL_SWITCHING,b.oh),b.ih.off(Pr.Events.LEVEL_SWITCHED,b.oh)),b.gp=!1)};this.Gz=function(){b.jp&&(b.Oa instanceof HTMLMediaElement?(Ya()&&(x("playing",b.Oa,b.nd),x("loadstart",b.Oa,b.nd)),x("error",b.Oa,b.nd),x("stalled",b.Oa,b.nd)):(Ya()&&(b.Oa.off("playing",b.nd),b.Oa.off("loadstart",b.nd)),b.Oa.off("error",b.nd),b.Oa.off("stalled",b.nd)),b.jp=!1)};this.reset=function(){b.et=!1;b.Ux=new Map;b.Jk=void 0;b.Vx=[];b.hp=[];b.yg=void 0;b.ip=void 0;b.dt=void 0;b.at=void 0};this.reset()}r(Yr,Wr);function Zr(a,b){a.Gz();a.Oa=b;a.Oa instanceof HTMLMediaElement?(Ya()&&(v("playing",a.Oa,a.nd),v("loadstart",a.Oa,a.nd)),v("error",a.Oa,a.nd),v("stalled",a.Oa,a.nd)):(Ya()&&(a.Oa.on("playing",a.nd),a.Oa.on("loadstart",a.nd)),a.Oa.on("error",a.nd),a.Oa.on("stalled",a.nd));a.jp=!0}Yr.prototype.af=function(a){this.TC=a};Yr.prototype.yq=function(){var a=Wr.prototype.yq.call(this);if(void 0!==a&&5E3<a){void 0!==this.yg&&this.wh({eventName:"levelMax",levelMaxName:this.yg.name,levelMaxBitrate:this.yg.bitrate,levelMaxAudioCodec:this.yg.audioCodec,levelMaxVideoCodec:this.yg.videoCodec,levelMaxHeight:this.yg.height,levelMaxWidth:this.yg.width,bitrate:this.Jk});var b=this.hp.reduce(function(c,d){return c+d},0)/this.hp.length;isNaN(b)||this.wh({eventName:"levelSwitchAvg",levelSwitchAvg:b/1E3,levelSwitchAvgMS:b,levelSwitchCount:this.hp.length})}this.reset();return a};Yr.prototype.mq=function(){Wr.prototype.mq.call(this);this.Fz();this.Gz()};function $r(){G.call(this);var a=this;this.Xe=new F("requestControlVisibility");this.un=new F("setControlVolume");this.Sj=new F("setControlIsMuted");this.Kn=this.Ai=!0;this.CA="10.2.0";this.Gg="xmovie";this.Ny="xmovieContainer";this.Fr=!1;this.gw=new F("callbacksRegistered");this.Ve=new F("possibleQualityLevelsChanged");this.xc=new F("videoOfflineChange");this.al=new F("playbackStart");this.volume=0;this.muted=!0;this.nt=this.ci=!1;this.MB="https://static-assets.highwebmedia.com/tsdefaultassets/CBV_TS_v1.0.swf";this.params={allowScriptAccess:"always",allowFullScreen:"true",quality:"high",wmode:"opaque",id:this.Gg,scale:"noborder"};this.attributes={id:"xmovie",name:this.Gg,align:"middle"};this.Tg=new Wr("FlashPlayer");Xr(this.Tg);this.vp=!1;if(t()){var b=window.localStorage.getItem("isTheaterMode");null!==b&&JSON.parse(b).vp&&(this.vp=!0)}this.zt=!0;this.qC=this.J(new eq(this));this.Dc=this.J(new Kr(this,this.qC));this.vp?this.Dc.D():this.Dc.show();this.element.style.backgroundColor="#000";as(this);this.element.className="videoPlayerDiv";window.updateQualityLevels=function(c){a.Ve.h(c)};window.showQualitySelect=function(){a.Ve.h(bs(a))};window.hideQualitySelect=function(){a.Ve.h([])};window.statusUpdate=function(c){"offline"===Wp(c)?a.xc.h(!0):(a.xc.h(!1),a.al.h(void 0))};window.callbacksRegistered=function(){a.Fr=!0;a.gw.h(void 0)};window.setFVMFlashMaxQ=function(c){zb("cbv_maxq",c,365)};window.getFVMFlashMaxQ=function(){return yb("cbv_maxq")};tr.j(function(c){a.wf=c})}r($r,G);function as(a){null===document.getElementById(a.Ny)&&(a.Ua=document.createElement("div"),a.Ua.id=a.Ny,a.Ua.style.height="calc(100% - "+a.Dc.ac()+"px)",a.Ua.style.width="100%",a.Ua.style.position="relative",a.Ua.style.top="0px",a.Ua.style.left="0px",a.element.appendChild(a.Ua));a.xj=document.createElement("div");a.xj.id=a.Gg;a.xj.style.margin="0";a.xj.style.padding="0";a.xj.style.width="100%";a.xj.style.height="100%";a.xj.style["object-fit"]="cover";a.Ua.appendChild(a.xj);a.element.style.position="static"}k=$r.prototype;k.Kf=function(a){this.context=a;var b="anonymous";this.context.A.Ce||(b=a.C.bB);this.params.FlashVars="pid="+a.C.B+"&address="+a.C.jC+"&uid="+a.C.userName+"&pw="+encodeURIComponent(b)+"&rpw="+encodeURIComponent(a.C.Sz)+"&auth="+a.C.iC+"&flash_debug="+("1"===wb().flash_debug?"1":"0");a=document.getElementById(this.Gg);if(null===a)u("id "+this.Gg+" for div not found for flash player in "+this.constructor.name,{},"VIDEO_");else{b=a.appendChild;var c=document.createElement("div");c.id="messageDiv";c.style.textAlign="center";c.style.marginTop="50px";c.style.zIndex="999";c.style.position="relative";var d=document.createElement("a");d.href="https://www.adobe.com/go/getflashplayer";d.target="_blank";d.style.border="0";c.appendChild(d);var e=document.createElement("img");e.alt="Get Adobe Flash player";e.src="https://static-assets.highwebmedia.com/tsdefaultassets/160x41_Get_Flash_Player.jpg";d.appendChild(e);d=document.createElement("p");d.appendChild(document.createTextNode("We've detected that you are missing the latest version of Flash Player."));d.style.margin="0";c.appendChild(d);d=document.createElement("p");d.appendChild(document.createTextNode("This version of the Chaturbate Viewer requires Flash Player "+this.CA+" or later."));d.style.margin="0";c.appendChild(d);d=document.createElement("a");d.href="https://www.adobe.com/go/getflashplayer";d.innerText="Click here to update your Flash Player for free";c.appendChild(d);b.call(a,c);swfobject.embedSWF(this.MB.toString(),this.Gg,"100%","100%",this.CA,void 0,void 0,this.params,this.attributes);this.Ve.h(bs(this));cs(this)}};function cs(a){var b=a.muted?0:a.volume,c=window[a.Gg];void 0!==c&&(void 0===c.SetCamVol?(window.setTimeout(function(){cs(a)},100),null===document.getElementById("messageDiv")&&"1"!==a.Ua.style.zIndex&&(a.Ua.style.zIndex="1")):(a.Dc.Ii(a.volume),a.Dc.gg(a.muted),a.un.h({volume:a.volume,save:!1}),a.Sj.h({T:a.muted,save:!1}),c.SetCamVol(b),oc()||0!==a.Dc.ac()||"1"!==a.Ua.style.zIndex||(a.Ua.style.height="100%"),a.Ua.style.zIndex="0",C("VideoOnloadMuteStatus",{muted:a.muted,chatMode:a.wf})))}
k.Tj=function(a){this.volume!==a&&(this.volume=a,this.muted||cs(this))};k.jj=function(){return this.muted?0:this.volume};k.$f=function(a){this.muted!==a&&(this.muted=a,cs(this))};k.nl=function(a,b){if(this.volume!==a||this.muted!==b)this.volume=a,this.muted=b,cs(this)};k.af=function(a){var b=window[this.Gg];void 0===b?u("Cannot find movie to set quality level.",{},"VIDEO_"):void 0===b.SetQualityLevel?u("SetQualityLevel is not available on this player.",{},"VIDEO_"):(b.SetQualityLevel(a),this.Ve.h(bs(this)))};function bs(a){var b=window[a.Gg];if(!a.Fr)return[];if(void 0===b)return u("Cannot find movie to get quality level.",{},"VIDEO_"),[];if(void 0===b.GetQualityLevels)return u("GetQualityLevel is not available on this player.",{},"VIDEO_"),[];var c=[];b.GetQualityLevels().forEach(function(d){c.push({label:d.label,ak:d.toggled,value:d.value})});return c}k.stop=function(){swfobject.removeSWF(this.Gg);this.Fr=!1;as(this)};k.paused=function(){return!1};k.ue=function(){this.Xe.h(!1);this.Dc.show();Nr(this)};k.Mg=function(){this.Xe.h(!0);this.Dc.D();Nr(this)};k.Lf=function(){this.Xe.h(!1);this.Dc.D();Nr(this)};function Nr(a){if(oc()&&lc()===a.element)if(a.nt)a.Ua.style.height="calc(100% - "+a.Dc.ac()+"px)",a.Ua.style.width="100%",a.Ua.style.left="0px",a.Ua.style.top="0px";else{var b=window.innerWidth;var c=window.innerHeight-a.ac(),d=c/(a.zt?.5625:.75);b<d&&(d=b,c=d*(a.zt?.5625:.75));b=[d,c];a.Ua.style.width=b[0]+"px";a.Ua.style.left=(window.innerWidth-b[0])/2+"px";a.Ua.style.height=b[1]+"px";a.Ua.style.top=(window.innerHeight-(b[1]+a.Dc.ac()))/2+"px"}else a.Ua.style.height="calc(100% - "+a.Dc.ac()+"px)",a.Ua.style.width="100%",a.Ua.style.left="0px",a.Ua.style.top="0px",0===a.Dc.ac()&&"1"===a.Ua.style.zIndex&&(a.Ua.style.height="calc(100% - 32px)")}k.G=function(){Nr(this)};k.dj=function(){var a=this;this.xl();window.setTimeout(function(){Nr(a);a.Z()},500)};k.ac=function(){return this.Dc.ac()};k.pl=function(){return this.vp||oc()};k.xl=function(){!0!==oc()?(ic(this.element),this.ue(),null===this.Ua.style.width&&(this.Ua.style.left="0px")):(jc(),this.Ua.style.height="calc(100% - "+this.Dc.ac()+"px)",this.Ua.style.width="100%",this.Z())};function ds(a,b){function c(e){return e instanceof d?e:new d(function(f){f(e)})}var d=void 0;return new(d||(d=Promise))(function(e,f){function g(n){try{m(b.next(n))}catch(p){f(p)}}function h(n){try{m(b["throw"](n))}catch(p){f(p)}}function m(n){n.done?e(n.value):c(n.value).then(g,h)}m((b=b.apply(a,[])).next())})};var es=new F("pictureInPictureChange");function fs(a,b){G.call(this);var c=this;this.Hb=a;this.Au=new F("requestJPEG");this.Xe=new F("requestControlVisibility");this.un=new F("setControlVolume");this.Sj=new F("setControlIsMuted");this.Kn=this.Ai=!0;this.M=document.createElement("video");this.Sf=!1;this.Oh=document.createElement("div");this.Or=[];this.Ve=new F("possibleQualityLevelsChanged");this.xc=new F("videoOfflineChange");this.al=new F("playbackStart");this.mt=!1;this.pA=!0;this.Tq=this.ot=this.Be=!1;this.element.style.position="static";this.element.style.background="#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover";this.element.className="videoPlayerDiv";this.M.setAttribute("webkit-playsinline","");this.M.setAttribute("playsinline","");this.M.setAttribute("autoplay","autoplay");this.M.style.margin="0";this.M.style.padding="0";this.M.style.width="100%";this.M.style.height="100%";this.M.style["object-fit"]="contain";this.M.style.backgroundColor="rgba(0, 0, 0, 0.0)";this.element.appendChild(this.M);window.videoElement=this.M;this.Oh.style.backgroundColor="#000000";this.Oh.style.opacity="0.6";this.Oh.style.position="absolute";this.Oh.style.width="inherit";this.Oh.style.height="inherit";this.Tg=new Yr(b);Xr(this.Tg);es.j(function(d){c.ot=d.active})}r(fs,G);function gs(a,b){return ds(a,function d(){var e=this,f,g,h;return za(d,function(m){if(1==m.ia)return b.C.zm!==e.yy&&void 0!==b.C.zm&&""!==b.C.zm?(e.yy=b.C.zm,f=b.A.status,e.Be&&(f="offline"),m.return({url:hs(b.C.zm),status:f})):ra(m,B("get_edge_hls_url_ajax/",{room_slug:b.C.B,bandwidth:"high",current_edge:""}),3);g=m.wd;h=JSON.parse(g.responseText);if(h.success)return e.yy=h.url,m.return({url:hs(h.url),status:Wp(h.room_status)});throw g.responseText;})})}
function hs(a){var b=wb();return void 0!==b.edge?a.replace(/(^https:\/\/edge)\d*(.+)/,"$1"+b.edge+"$2"):a}
function is(a,b){a.stop();(function(){return ds(a,function d(){var e=this,f,g,h,m;return za(d,function(n){switch(n.ia){case 1:if(b.C.B!==e.B)return n.return();n.Rl=2;return ra(n,gs(e,b),4);case 4:h=n.wd;f=h.url;g=h.status;n.ia=3;n.Rl=0;break;case 2:return m=sa(n),u("Unable to refresh HLS stream",{error:m}),n.return();case 3:"offline"===e.Ab&&g!==e.Ab&&(e.Sf=!0);e.Be="offline"===g;e.xc.h(e.Be);if("notconnected"!==e.Ab&&"offline"===g)return js(e,b),n.return();e.Cy(b,f);n.ia=0}})})})()}
function ks(a){return ds(a,function c(){var d=this,e,f;return za(c,function(g){if(1==g.ia){e=d.hu.play();if(void 0===e)return g.return({ko:"old",success:!d.M.paused});g.Rl=3;return ra(g,e,5)}if(3!=g.ia)return g.return({ko:"new",success:!0});f=sa(g);return g.return({ko:"new",success:!1,error:f})})})}
function ls(a){ds(a,function c(){var d=this,e,f;return za(c,function(g){if(1==g.ia)return ra(g,ks(d),2);if(3!=g.ia){e=g.wd;if(e.success)return d.al.h(void 0),g.return();"old"===e.ko&&C("NoPromiseAutoplayPolicy");gq.h(void 0);d.$f(!0);return ra(g,ks(d),3)}f=g.wd;if(f.success)return d.al.h(void 0),g.return();"new"===f.ko&&(d.Sf||(w("Unable to play twice in a row",{err:f.error},"VIDEO_"),/SamsungBrowser/i.test(navigator.userAgent)&&(u("Attempting to fallback to JPEG player."),d.Au.h(d.context))),d.Qs());g.ia=0})})}k=fs.prototype;k.play=function(){ls(this)};k.stop=function(){void 0!==this.Hb.yh.get(this.Ab)&&(ms(this),ns(this));this.Sf&&ns(this);os(this)};function ns(a){for(var b=q(a.Or),c=b.next();!c.done;c=b.next())clearTimeout(c.value);clearTimeout(a.Sp);a.Sp=void 0;clearTimeout(a.Bj);a.Bj=void 0}k.Tj=function(a){this.M.volume=a/100};k.jj=function(){return this.M.muted||!this.Sf&&this.M.paused?0:100*this.M.volume};k.ue=function(){this.mt=!1;this.Xe.h(!1)};k.Mg=function(){this.mt=!0;this.Xe.h(!0)};k.nl=function(){};k.dj=function(){};k.ac=function(){return 0};k.Qs=function(){os(this)};k.Kf=function(a){var b=this;this.Be=!1;this.pA=!a.C.yt;this.M.poster=a.C.yt?"":Gm+"stream?room="+a.C.B+"&f="+Math.random();this.context=a;this.B=a.C.B;a.A.event.kc.j(function(c){b.Ab=c.Ra;if(void 0!==b.Hb.yh.get(c.Ra)||b.Be)b.stop(),os(b),b.Be?js(b,a):ps(b,a);else switch(clearTimeout(b.Bj),b.Bj=void 0,c.Dd){case "notconnected":case "privaterequesting":break;default:switch(c.Ra){case "notconnected":qs(b,a.C.B);window.setTimeout(function(){is(b,a)},0);break;default:b.Or.push(window.setTimeout(function(){qs(b,a.C.B)},0)),b.Or.push(window.setTimeout(function(){is(b,a)},3E3))}}})};function qs(a,b){a.element.style.background="#333333 url("+(a.pA?Gm+"stream?room="+b+"&f="+Math.random():"")+") center center / cover";b=a.Hb;b.za.innerText="Connecting";b.text.innerText="Please wait while we connect you to this webcam broadcast.";b.element.style.display="block";b.Tf.style.display="none";b.Sk.style.display="none";b.Dm=!0;a.element.insertBefore(a.Oh,a.element.firstChild);a.Sf=!0}
function ms(a){a.Sf=!1;var b=a.Hb;b.Dm&&(b.za.innerText="",b.text.innerText="",b.element.style.display="none",b.Dm=!1);a.Oh.parentElement===a.element&&a.element.removeChild(a.Oh);a.element.style.background="#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover"}
function ps(a,b){void 0===a.Bj&&(a.Bj=window.setTimeout(function(){return ds(a,function d(){var e=this,f;return za(d,function(g){if(1==g.ia)return ra(g,gs(e,b),2);f=g.wd.status;"offline"===f?(e.Be=!0,e.Bj=void 0,js(e,b),e.xc.h(e.Be)):(e.Bj=void 0,ps(e,b));g.ia=0})})},1E4))}function js(a,b){void 0===a.Sp&&(a.Sp=window.setTimeout(function(){a.Sp=void 0;is(a,b)},1E4))}
function rs(a,b,c){c=void 0===c?function(){}:c;os(a);a.tv=window.setTimeout(function(){a.Tq?(ms(a),u("Attempting to fallback to JPEG player."),a.Au.h(a.context)):!sj||a.ot?rs(a,b,c):(Fm("Video seems to be stuck, refreshing"),a.Tq=!0,is(a,b),c())},1E4)}function os(a){void 0!==a.tv&&(clearTimeout(a.tv),a.tv=void 0)}k.pl=function(){return this.mt};var ss=new F("followingEvent");function ts(a,b,c){c=void 0===c?!1:c;if(void 0!==b&&!b||!Bq('You must be logged in to follow a broadcaster. Click "OK" to login.'))return B("follow/follow/"+a+"/",{from_sitewide_pm:""+c}).then(function(d){var e=new P(d.responseText);d=ss.h;a:switch(T(e,"notification_frequency")){case "all":e="all";break a;case "none":e="none";break a;default:e="smart"}d.call(ss,{W:a,Ks:!0,tx:e});void 0!==window._followedTabUpdate&&window._followedTabUpdate(a);return!0}).catch(function(d){u("Unable to follow "+a+": "+
d);return!1})}function us(a,b,c){c=void 0===c?!1:c;if(void 0!==b&&!b||!Bq('You must be logged in to follow a broadcaster. Click "OK" to login.'))return B("follow/unfollow/"+a+"/",{from_sitewide_pm:""+c}).then(function(){ss.h({W:a,Ks:!1,tx:"none"});void 0!==window._followedTabUpdate&&window._followedTabUpdate(a);return!0}).catch(function(d){u("Unable to unfollow "+a+": "+d);return!1})}
function vs(a){return y("follow/follow_allowed/"+a+"/").then(function(b){return V(new P(b.responseText),"can_follow")}).catch(function(b){u("Error checking if user following is allowed: "+b)})}function ws(){return new Promise(function(a){y("follow/online_following").then(function(b){b=new P(b.responseText);var c=R(b,"following");nm(b);a(c)}).catch(function(b){401!==b.Kd.status&&u("getOnlineFollowedRooms failed ("+b+")");a([])})})};function xs(a,b,c,d){d=void 0===d?!1:d;G.call(this);var e=this;this.sp=b;this.La=c;this.B=a;this.my=d;this.element=N("div",{style:{position:"absolute",height:"23.25px",width:"23.25px",cursor:"pointer"},className:this.sp?"icon_following":"icon_not_following",onClick:function(f){e.Ru();f.stopPropagation();f.preventDefault()}})}r(xs,G);function ys(a){a.element.title="Follow";a.sp=!1;a.element.className="icon_not_following no_hover";window.setTimeout(function(){a.element.classList.remove("no_hover")},3E3)}function zs(a){a.element.title="Unfollow";a.sp=!0;a.element.className="icon_following no_hover";window.setTimeout(function(){a.element.classList.remove("no_hover")},3E3)}
xs.prototype.Ru=function(){var a=this;if(this.sp){this.element.className="icon_update_following no_hover";var b=us(this.B,this.La,this.my);void 0!==b&&b.then(function(c){c?ys(a):a.element.className="icon_not_following"})}else this.La?Rm(!0):(this.element.className="icon_update_following no_hover",b=ts(this.B,this.La,this.my),void 0!==b&&b.then(function(c){c?zs(a):a.element.className="icon_following"}))};new F("floatingPlayerShow");new F("floatingPlayerHide");new F("floatingPlayerShowLoginOverlay");function As(a){27!==a.keyCode&&a.stopImmediatePropagation()}function Bs(a){32===a.keyCode&&a.target===document.body&&a.preventDefault()}var Cs=new F("canvasOpen"),Ds=new F("canvasClose"),Es=new F("openFeedbackForm");function Fs(a){var b=document.createElement("div");b.style.display="block";b.style.margin="10px 0 0 0";void 0!==a&&a.appendChild(b);return b}function Gs(){G.apply(this,arguments)}r(Gs,G);Gs.prototype.initData=function(){this.element=Fs();this.control=document.createElement("button");this.control.type="button";this.control.tabIndex=0;this.element.appendChild(this.control)};Gs.prototype.qa=function(){this.element.style.position="absolute";this.element.style.top="0";this.element.style.right="0";this.element.style.margin="15px 15px 0 0";H(this.control,"closeControl");this.control.style.padding="4px";this.control.style.cursor="pointer";this.control.style.width="20px";this.control.style.height="20px";this.control.style.backgroundSize="100% 100%";this.control.style.border="0"};function Hs(){G.apply(this,arguments)}r(Hs,G);Hs.prototype.initData=function(){this.element=Fs();this.za=document.createElement("h2");this.za.textContent=Id;this.element.appendChild(this.za)};Hs.prototype.qa=function(){this.za.style.fontSize="14px";this.za.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif"};function Is(){G.apply(this,arguments)}r(Is,G);Is.prototype.initData=function(){this.element=Fs();this.cancel=document.createElement("a");this.cancel.textContent=Vf;this.cancel.tabIndex=0;this.element.appendChild(this.cancel);this.submit=document.createElement("button");this.submit.type="submit";this.submit.textContent=Qh;this.submit.disabled=!0;this.element.appendChild(this.submit)};Is.prototype.qa=function(){this.element.style.textAlign="right";this.cancel.style.padding="4px";this.cancel.style.cursor="pointer";this.cancel.textContent=Vf;H(this.cancel,"cancelAnchor");H(this.submit,"submitRow");this.submit.style.borderStyle="solid";this.submit.style.borderWidth="1px";this.submit.style.boxSizing="border-box";this.submit.style.borderRadius="4px";this.submit.style.opacity="0.5";this.submit.style.padding="5px";this.submit.style.fontWeight="bold"};Is.prototype.disable=function(){this.submit.disabled=!0;this.submit.style.opacity="0.5";this.submit.style.cursor="default"};Is.prototype.enable=function(){this.submit.disabled=!1;this.submit.style.opacity="1";this.submit.style.cursor="pointer"};function Js(a){G.call(this);this.canvas=a}r(Js,G);Js.prototype.initData=function(){var a=this;this.element=document.createElement("div");this.Ad=document.createElement("button");this.Ad.type="button";H(this.Ad,"editToggle");this.No=new Image;this.No.src="https://static-assets.highwebmedia.com/images/feedback/select_black.svg";this.Ad.appendChild(this.No);this.As=document.createElement("div");this.As.textContent=Vh;this.Ad.appendChild(this.As);v("click",this.Ad,function(){a.canvas.show()});v("mouseenter",this.Ad,function(){a.No.src="https://static-assets.highwebmedia.com/images/feedback/select.svg"});v("mouseleave",this.Ad,function(){a.No.src="https://static-assets.highwebmedia.com/images/feedback/select_black.svg"});this.element.appendChild(this.Ad)};Js.prototype.qa=function(){this.element.style.width="345px";this.element.style.height="156px";this.element.style.left="-15px";this.element.style.position="relative";this.element.style.backgroundSize="100%";this.element.style.backgroundRepeat="no repeat";this.element.style.justifyContent="center";this.element.style.alignItems="center";this.element.style.display="none";this.Ad.style.width="75%";this.Ad.style.height="75%";this.Ad.style.border="0";this.Ad.style.borderRadius="4px";this.Ad.style.textAlign="center";this.Ad.style.cursor="pointer";this.Ad.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.As.style.width="100%"};function Ks(a,b){G.call(this);this.kt=!1;this.canvas=b;this.Ot=a;this.ka=new Js(b);this.J(this.ka,this.element)}r(Ks,G);Ks.prototype.initData=function(){var a=this;this.element=Fs();this.button=document.createElement("button");this.button.type="button";this.button.textContent=Rh;v("click",this.button,function(b){b.preventDefault();void 0===a.canvas.ka?Ls(a):Ms(a)});this.element.appendChild(this.button);this.info=document.createElement("div");this.info.textContent=Sh;this.element.appendChild(this.info);this.error=document.createElement("span");this.element.appendChild(this.error)};Ks.prototype.qa=function(){this.element.style.textAlign="center";H(this.element,"screenShotControl");H(this.button,"sscButton");this.button.style.borderWidth="1px";this.button.style.borderStyle="solid";this.button.style.boxSizing="border-box";this.button.style.borderRadius="4px";this.button.style.padding="5px";this.button.style.fontWeight="bold";this.button.style.margin="0 auto 10px auto";this.button.style.display="block";this.button.style.cursor="pointer";H(this.error,"error");H(this.info,"info");this.info.style.marginBottom="10px"};function Ls(a){if(Ns(a.canvas)&&(Ms(a),Os(a.canvas),a.error.textContent="",void 0!==a.canvas.ka)){var b=a.canvas.ka.getContext("2d");if(null!==b){a.kt=!0;a.Ot.D();var c=!1,d=document.createElement("video");d.style.display="none";a.canvas.element.appendChild(d);a.canvas.getDisplayMedia().then(function(e){d.srcObject=e;a.xF=e;d.play();v("canplay",d,function(){c||(c=!0,window.setTimeout(function(){var f=window.innerWidth,g=window.innerHeight,h=d.videoWidth/d.videoHeight;g*h<f?f=g*h:g=f/h;Qs(a.canvas,f,g);b.drawImage(d,0,0,f,g);a.ka.element.style.backgroundImage='url("'+b.canvas.toDataURL("image/png")+'")';a.ka.element.style.display="flex";a.button.textContent=Uh;a.info.style.display="none";d.pause();a.xF.getTracks().forEach(function(m){m.stop()});a.canvas.element.removeChild(d);a.Ot.show();window.setTimeout(function(){a.kt=!1},1E3)},250))},!1)}).catch(function(e){a.Ot.show();a.error.textContent="NotAllowedError"===e.name?Zh:$h;a.canvas.element.removeChild(d);Ms(a)})}}}
function Ms(a){Ns(a.canvas)&&(a.ka.element.style.backgroundImage="",a.ka.element.style.display="none",a.button.textContent=Rh,a.info.style.display="block",Rs(a.canvas),a.canvas.D())}
function Ss(a,b){G.call(this);var c=this;this.canvas=b;this.Qo=[];Ns(b)&&(this.ka=new Ks(a,b),this.Qo.push(this.ka.error));this.Qo.push(this.Gk);this.Qo.push(this.nc.error);this.lc=new Is;v("click",this.lc.cancel,function(d){d.preventDefault();a.D();Ts(c)});this.element.appendChild(this.form);this.form.appendChild(this.Gk);Ns(b)&&this.J(this.ka,this.form);this.form.appendChild(this.Tt);this.form.appendChild(this.bm);this.form.appendChild(this.url);this.form.appendChild(this.source);this.J(this.lc,this.form)}r(Ss,G);Ss.prototype.initData=function(){function a(){window.setTimeout(function(){""===b.nc.input.value.trim()?b.lc.disable():b.lc.enable()},200)}var b=this;this.element=Fs();this.form=document.createElement("form");this.form.action="/feedback/submit/";this.form.method="POST";this.Gk=document.createElement("p");this.nc=new Up(this.form);H(this.nc.input,"feedbackComment");this.nc.input.maxLength=5E3;v("keyup",this.nc.input,a);v("touchend",this.nc.input,a);v("paste",this.nc.input,a);v("cut",this.nc.input,a);this.Tt=document.createElement("p");this.Tt.textContent=Ph.replace("%SITE_NAME%",Nc.dv);this.bm=document.createElement("input");this.bm.type="hidden";this.bm.name="csrfmiddlewaretoken";this.bm.value=yb("csrftoken");this.url=document.createElement("input");this.url.type="hidden";this.url.name="url";this.url.value=document.location.href.substr(0,255);this.source=document.createElement("input");this.source.type="hidden";this.source.name="source";this.source.value=""};Ss.prototype.qa=function(){var a=this;this.Gk.style.color="red";this.nc.input.style.width="306px";this.nc.input.style.resize="none";this.nc.input.style.minHeight="150px";H(this.nc.error,"error");this.nc.error.style.marginBottom="20px";this.Tt.style.fontSize="85%";v("submit",this.form,function(b){b.preventDefault();a.nc.input.blur();Us(a);var c=new FormData;c.append("comments",a.nc.input.value);c.append("url",document.location.href.substr(0,255));c.append("source",a.source.value);c.append("csrfmiddlewaretoken",yb("csrftoken"));void 0!==a.canvas.ka?a.canvas.ka.toBlob(function(d){null!==d&&c.append("screenshot",d,"screenshot.png");Vs(a,c)}):Vs(a,c)})};function Us(a){a.Qo.forEach(function(b){b.textContent=""})}function Ts(a){Ws(a);Us(a);a.nc.input.value="";a.lc.disable();a.form.reset();Ns(a.canvas)&&Ms(a.ka)}function Ws(a){for(;null!==a.element.firstChild;)a.element.removeChild(a.element.firstChild);a.element.appendChild(a.form);a.nc.input.focus()}
function Vs(a,b){a.lc.disable();B(a.form.action,b).then(function(c){c=c.getResponseHeader("content-type");null!==c&&c.includes("text/html")?(a.Gk.textContent=ei,a.lc.enable()):(Ts(a),a.element.removeChild(a.form),c=document.createElement("p"),c.textContent=bi,a.element.appendChild(c))}).catch(function(c){if(429===c.Kd.status)a.Gk.textContent=di,a.lc.enable();else try{var d=JSON.parse(c.Kd.response);void 0!==d.TB&&(a.nc.error.textContent=d.TB);a.lc.enable()}catch(e){a.Gk.textContent=ci,a.lc.enable()}})}
function Xs(a){G.call(this);H(this.element,"drawControls");this.canvas=a}r(Xs,G);Xs.prototype.initData=function(){var a=this;this.element=Fs();this.Rh=document.createElement("div");this.Rh.style.background="url(https://static-assets.highwebmedia.com/images/feedback/drag.svg) no-repeat center";this.element.appendChild(this.Rh);this.dc=document.createElement("button");this.dc.type="button";H(this.dc,"highlight");this.ym=new Image;this.ym.src="https://static-assets.highwebmedia.com/images/feedback/highlight_issue.svg";this.dc.appendChild(this.ym);this.$s=document.createElement("span");this.$s.textContent=Xh;this.dc.appendChild(this.$s);v("click",this.dc,function(){Ys(a.canvas)});this.element.appendChild(this.dc);this.D=document.createElement("button");this.D.type="button";this.mj=document.createElement("div");this.D.appendChild(this.mj);this.Ys=document.createElement("span");this.Ys.textContent=Yh;this.D.appendChild(this.Ys);H(this.D,"highlight");v("click",this.D,function(){var b=a.canvas;Zs(b);$s(b);if(void 0!==b.$a){var c=b.$a.getContext("2d");null!==c&&(H(b.controls.D,"active"),c.globalAlpha=1,c.strokeStyle="rgb(0, 0, 0)",c.lineWidth=5,b.fillRect=!0,at(b))}});this.element.appendChild(this.D);this.UC=document.createElement("hr");this.element.appendChild(this.UC);this.done=document.createElement("a");H(this.done,"done");this.done.style.textDecoration="none";v("click",this.done,function(b){b.preventDefault();void 0!==a.canvas.ka&&void 0!==a.ka&&(a.ka.element.style.backgroundImage='url("'+a.canvas.ka.toDataURL("image/png")+'")');a.canvas.D()});this.element.appendChild(this.done);Pp(this.element,{},[this.Rh])};Xs.prototype.qa=function(){this.element.style.borderRadius="4px";this.element.style.padding="10px 15px 5px 15px";this.element.style.margin="0px";this.element.style.position="fixed";this.element.style.zIndex="2010";this.element.style.textAlign="right";this.element.style.width="115px";this.element.style.height="101px";this.element.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.element.style.userSelect="none";this.element.style.boxShadow="10px 10px 25px -5px rgba(0,0,0,0.75)";this.Rh.style.width="20px";this.Rh.style.height="10px";this.Rh.style.position="absolute";this.Rh.style.right="0";this.Rh.style.top="5px";H(this.dc,"highlight");this.dc.style.border="0";this.dc.style.display="inline-block";this.dc.style.padding="5px";this.dc.style.position="relative";this.dc.style.margin="7px 0 0 0";this.dc.style.left="-15px";this.dc.style.width="145px";this.dc.style.textAlign="left";this.dc.style.cursor="pointer";this.dc.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.ym.style.width="23px";this.ym.style.verticalAlign="middle";this.ym.style.marginRight="10px";this.$s.style.verticalAlign="middle";H(this.D,"highlight");this.D.style.border="0";this.D.style.display="inline-block";this.D.style.padding="5px";this.D.style.position="relative";this.D.style.margin="0";this.D.style.left="-15px";this.D.style.width="145px";this.D.style.textAlign="left";this.D.style.cursor="pointer";this.D.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";H(this.mj,"hideImage");this.mj.style.width="20px";this.mj.style.verticalAlign="middle";this.mj.style.marginRight="10px";this.mj.style.height="20px";this.mj.style.display="inline-block";this.Ys.style.verticalAlign="middle";this.done.style.padding="4px";this.done.style.cursor="pointer";this.done.style.textAlign="right";this.done.textContent=fi};function bt(){G.call(this);this.fillRect=!1;this.Qk=navigator.mediaDevices;if(void 0===this.Qk||void 0===this.Qk.getDisplayMedia)this.Qk=void 0;void 0===document.createElement("canvas").toBlob&&(this.Qk=void 0);this.controls=new Xs(this);this.J(this.controls,this.element)}r(bt,G);k=bt.prototype;k.initData=function(){var a=this;this.element=Fs();this.ec=Fs(this.element);this.ec.innerHTML=Wh+' (<a href="#" onclick="this.parentNode.style.display=\'none\';">'+qf+"</a>)";this.ec.style.userSelect="none";v("keydown",document,function(b){b.stopPropagation();27===b.keyCode&&"block"===a.element.style.display&&(b.stopImmediatePropagation(),a.D())})};k.qa=function(){H(this.element,"canvas");this.element.style.display="none";this.element.style.position="absolute";this.element.style.height="100%";this.element.style.width="100%";H(this.ec,"infoToolTip");this.ec.style.position="fixed";this.ec.style.backgroundColor="#FFFFD3";this.ec.style.borderWidth="1px";this.ec.style.borderStyle="solid";this.ec.style.boxSizing="border-box";this.ec.style.zIndex="2020";this.ec.style.top="100px";this.ec.style.left="0";this.ec.style.right="0";this.ec.style.margin="0 auto";this.ec.style.padding="12px";this.ec.style.fontWeight="bold";this.ec.style.width="500px";this.ec.style.textAlign="center";this.ec.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.ec.style.fontSize="1.3em"};function Ns(a){return void 0!==a.Qk&&!hb()}k.getDisplayMedia=function(){if(!Ns(this))throw new ReferenceError("Display media not supported by browser");return this.Qk.getDisplayMedia({video:{LG:"browser",cursor:!1},audio:!1})};function Os(a){Rs(a);a.ka=document.createElement("canvas");a.ka.style.zIndex="2000";a.ka.style.top="50%";a.ka.style.left="50%";a.ka.style.transform="translate(-50%, -50%)";a.ka.style.margin="0px auto";a.ka.style.position="fixed";a.D();a.element.appendChild(a.ka)}function Rs(a){ct(a);void 0!==a.ka&&(a.element.removeChild(a.ka),a.ka=void 0)}function Qs(a,b,c){void 0!==a.ka&&(a.ka.width=b,a.ka.height=c,a.ka.style.width=b+"px",a.ka.style.height=c+"px")}
function $s(a){void 0!==a.ka&&(void 0!==a.$a&&(a.element.removeChild(a.$a),a.$a=void 0),a.$a=a.ka.cloneNode(),a.$a.style.zIndex="2001",a.$a.tabIndex=0,a.element.appendChild(a.$a),dt(a))}function ct(a){void 0!==a.$a&&(a.element.removeChild(a.$a),a.$a=void 0)}k.D=function(){this.element.style.display="none";ct(this);Zs(this);window.top!==window&&(window.top.document.body.style.display="");document.body.style.overflow="";Ds.h(void 0)};k.show=function(){this.element.style.display="block";this.controls.element.style.left="75px";this.controls.element.style.bottom="30px";this.ec.style.display="block";window.top!==window&&(window.top.document.body.style.display="none");document.body.style.overflow="hidden";$s(this);Ys(this);void 0!==this.$a&&this.$a.focus();Cs.h(void 0)};function dt(a){if(void 0!==a.$a){var b=a.$a.getContext("2d");if(null!==b){var c=a.ka,d=a.$a;if(void 0!==c&&void 0!==d){var e=d.getContext("2d");if(null!==e){var f=e.globalAlpha;e.globalAlpha=1;e.clearRect(0,0,d.width,d.height);e.drawImage(c,0,0);e.globalAlpha=f}}c=b.globalAlpha;d=b.strokeStyle;b.globalAlpha=.1;b.strokeStyle="rgb(0, 0, 0)";b.fillRect(0,0,a.$a.width,a.$a.height);b.globalAlpha=c;b.strokeStyle=d}}}
function Zs(a){a.controls.D.style.backgroundColor="transparent";a.controls.D.classList.toggle("active",!1);a.controls.dc.style.backgroundColor="transparent";a.controls.dc.classList.toggle("active",!1);void 0!==a.$a&&(void 0!==a.Kh&&(x("mousedown",a.$a,a.Kh.xs),x("mouseup",window,a.Kh.yv),x("mousemove",window,a.Kh.move),a.Kh=void 0),a.$a.style.cursor="default")}
function Ys(a){Zs(a);$s(a);if(void 0!==a.$a){var b=a.$a.getContext("2d");null!==b&&(H(a.controls.dc,"active"),b.globalAlpha=.8,b.strokeStyle="rgb(249, 185, 144)",b.lineWidth=5,a.fillRect=!1,at(a))}}
function at(a){if(void 0!==a.$a){a.$a.style.cursor="crosshair";var b=a.$a.getContext("2d");if(null!==b){var c=0,d=0,e=0,f=0,g=0,h=0,m=!1,n=function(){h=g=d=c=0;m=!1};a.Kh={xs:function(p){m&&(et(a,c,d,g,h,b),n());var A=a.$a.getBoundingClientRect();c=p.clientX-A.left;d=p.clientY-A.top;m=!0;b.canvas.style.cursor="crosshair"},yv:function(){m&&(et(a,c,d,g,h,b),n())},move:function(p){if(m){var A=a.$a.getBoundingClientRect();e=p.clientX-A.left;f=p.clientY-A.top;dt(a);g=e-c;h=f-d;p=c;A=d;var z=g,D=h;b.beginPath();b.rect(p,A,z,D);a.fillRect?b.fill():b.stroke()}}};v("mousedown",a.$a,a.Kh.xs);v("mouseup",window,a.Kh.yv);v("mousemove",window,a.Kh.move)}}}function et(a,b,c,d,e,f){if(void 0!==a.ka){a.ka.style.cursor="crosshair";var g=a.ka.getContext("2d");null!==g&&(g.globalAlpha=f.globalAlpha,g.strokeStyle=f.strokeStyle,g.lineWidth=f.lineWidth,g.beginPath(),g.rect(b,c,d,e),a.fillRect?g.fill():g.stroke())}}
function ft(){Lj.call(this,{Xk:function(){a.Xk()},Vk:function(){a.Vk()},gm:!0});var a=this;this.isVisible=!1;this.iq=this.bu=!0;this.element.classList.add("block_CB1_chat_focus");H(this.P,"overlayOpacity");H(this.element,"userFeedbackForm");H(this.element,"defaultColor");Cs.j(function(){a.element.style.display="none";a.di=!1});Ds.j(function(){a.element.style.display="block";a.di=!0})}r(ft,Lj);ft.prototype.initData=function(){var a=this;this.canvas=new bt;Ns(this.canvas)&&document.body.appendChild(this.canvas.element);this.ht=Fs(this.element);this.close=new Gs;v("click",this.close.control,function(){a.D()});this.J(this.close,this.ht);this.za=new Hs;this.J(this.za,this.ht);this.form=new Ss(this,this.canvas);Ns(this.canvas)&&(this.canvas.controls.ka=this.form.ka.ka);this.J(this.form,this.ht);v("keydown",this.close.control,function(b){"Tab"===b.key&&b.shiftKey&&(b.preventDefault(),a.form.lc.submit.disabled?a.form.lc.cancel.focus():a.form.lc.submit.focus())});v("keydown",this.form.lc.submit,function(b){"Tab"!==b.key||b.shiftKey||(b.preventDefault(),a.close.control.focus())});v("keydown",this.form.lc.cancel,function(b){"Tab"===b.key&&!b.shiftKey&&a.form.lc.submit.disabled&&(b.preventDefault(),a.close.control.focus())});Ns(this.canvas)?v("keydown",this.form.ka.button,function(b){"Tab"!==b.key||b.shiftKey||(b.preventDefault(),a.form.lc.cancel.focus())}):v("keydown",this.form.nc.input,function(b){"Tab"!==b.key||b.shiftKey||(b.preventDefault(),a.form.lc.cancel.focus())});v("keydown",this.form.lc.submit,function(b){"Tab"===b.key&&b.shiftKey&&(b.preventDefault(),a.form.lc.cancel.focus())})};ft.prototype.qa=function(){var a=this;this.element.style.position="fixed";this.element.style.top="0px";this.element.style.fontSize="12px";this.element.style.left="50%";this.element.style.marginLeft="-157px";this.element.style.width="315px";this.element.style.top="150px";this.element.style.height="";this.element.style.borderRadius="10px";this.element.style.padding="15px";this.element.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";Ns(this.canvas)&&v("resize",window,function(){a.form.ka.kt||void 0===a.canvas.ka||(Ms(a.form.ka),a.form.ka.error.textContent=ai)})};ft.prototype.Xk=function(){this.form.bm.value=yb("csrftoken");this.form.url.value=document.location.href.substr(0,255);this.element.style.display="";this.G();this.isVisible=!0;v("keydown",this.element,As);v("keydown",document.body,Bs);Ws(this.form)};ft.prototype.Vk=function(){var a=this.isVisible;this.element.style.display="none";this.isVisible=!1;a&&(x("keydown",this.element,As),x("keydown",document.body,Bs));try{window.dispatchEvent(new Event("resize"))}catch(b){-1!==navigator.userAgent.indexOf("MSIE")||0<navigator.appVersion.indexOf("Trident/")?(a=document.createEvent("UIEvents"),a.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(a)):u("Could not fire resize event")}};var gt={"/tip":function(a){var b={};if(0<a.length){var c=Number(a[0]);isNaN(c)?b.message=a.join(" "):(a.shift(),b.amount=c,0<a.length&&(b.message=a.join(" ")))}return{Jp:b,messageType:1}},"/debug":function(){return{messageType:2}}};function ht(a){if("/"===a.trim().charAt(0)){a:{var b=a.match(/(\S+)/g);if(null!==b){var c=b.shift();if(Object.prototype.hasOwnProperty.call(gt,c)){b=gt[c](b);break a}}b={messageType:0}}if(0!==b.messageType)return b}return{messageType:0,Jp:a}};function it(a){return a.yb?"broadcaster":a.fc?"mod":a.Ec?"inFanclub":a.gf?"tippedTonsRecently":a.fg?"tippedALotRecently":a.ff?"tippedRecently":a.je?"hasTokens":"defaultUser"}function jt(a){return a.yb?"#DC5500":a.fc?"#DC0000":a.Ec?"#090":a.gf?"#804baa":a.fg?"#be6aff":a.ff?"#009":a.je?"#69A":"#494949"}function kt(a){return a.yb?"#ff6200":a.fc?"#DC0000":a.Ec?"#00ff00":a.gf?"#ad62e1":a.fg?"#d4a0ff":a.ff?"#8a98ff":a.je?"#84c6dc":"#b3b3b3"}
function lt(a){if(a.yb)return Ci;if(a.fc)return Bi;if(a.Ec)return Ai;if(a.gf)return si;if(a.fg)return ui;if(a.ff)return wi;if(a.je)return yi}function mt(a){if(!a.fc&&!a.yb&&!a.Ec){if(a.gf)return ti;if(a.fg)return vi;if(a.ff)return xi;if(a.je)return zi}}
function nt(a){a=a.toLowerCase();if(-1<["m","male"].indexOf(a))return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/male.svg";if(-1<["f","female"].indexOf(a))return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/female.svg";if(-1<["t","s","trans"].indexOf(a))return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/trans.svg";if(-1<["c","couple"].indexOf(a))return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/couple.svg";u("Could not set menu gender icon. Defaulting to male.");return"https://static-assets.highwebmedia.com/tsdefaultassets/gendericons/male.svg"};var ot=[];function pt(a){G.call(this,"div",a);var b=this;this.value="";this.I=new Ub;E(a.Ue.j(function(){b.input.value=""}),this.I);E(lo.j(function(c){c.wa===a.wa&&(c=c.Hc,b.input.value=""===c?b.value:c)}),this.I);this.ss=new xk(function(){var c=b.value.match(/^[\w-]*$/);go.h({wa:a.wa,tp:a.Of,Qe:null!==c,prefix:b.value})},{yd:100,ce:1});ot.push(this)}r(pt,G);pt.prototype.qa=function(a){var b=this;this.element=N("div",{colorClass:"SearchBar",style:{position:"relative",width:"100%",padding:"4px",boxSizing:"border-box"}},N("input",{colorClass:"searchUserInput",className:"search_autocomplete",type:"text",placeholder:Vi,style:{background:"none",height:"24px",borderWidth:"1px",borderStyle:"solid",boxSizing:"border-box",borderRadius:"3px",margin:"0",padding:"5px 22px 5px 8px",width:"100%",outline:"none",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontSize:"12px"},onFocus:function(){C("PMSearchStarted",{location:""===a.B?"PMWindow":"PMTab"})},onKeyDown:function(c){"ArrowDown"===c.key||"ArrowUp"===c.key||40===c.keyCode||38===c.keyCode?(c.preventDefault(),jo.h({event:c,wa:a.wa})):"Enter"!==c.key&&13!==c.keyCode||ko.h(a.wa)},onInput:function(){var c=b.input.value.toLowerCase();ot.forEach(function(d){d.value=c;d.input.value=c;yk(d.ss)})},ref:function(c){return b.input=c}}),N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/pms/icon-search.svg",alt:"Search",style:{height:"1em",margin:"auto",position:"absolute",right:"10px",top:"10px"}}))};pt.prototype.render=function(){return this.element};pt.prototype.tb=function(){Vb(this.I)};var qt=new F("historyPrivateMessage"),rt=new F("createNewSession");function st(){var a,b,c=Ia.current;return!0===(null===(a=c.Ij)||void 0===a?void 0:a.Lg.flags.get("sitewide_pms_enabled"))||!0===(null===(b=c.qb)||void 0===b?void 0:b.wt)}var tt;K.j(function(a){tt=a.A});function ut(a){return JSON.parse(a).map(function(b){b=new P(b);return{message:T(b,"m"),H:W(b,"num_unread"),time:1E3*W(b,"created_at"),N:T(b,"from_user"),Ia:Un(new P(hm(b,"other_user")))}})}
function vt(a){a=vb({offset:a.toString()});return y("api/ts/chatmessages/pm_users/?"+a).then(function(b){return ut(b.responseText)}).catch(function(b){u("Error loading conversations: "+b);throw b;})}function wt(a){var b=dm(a,"messages");return void 0===b?{na:[],H:0}:{na:b.map(function(c){return Xn(c)}),H:W(a,"num_unread")}}
function xt(a,b){b=vb({room:b});y("api/ts/chatmessages/pm_list/"+a+"/?"+b).then(function(c){var d=wt(new P(c.responseText)).na;c=!0;d=q(d);for(var e=d.next();!e.done;e=d.next())e=Object.assign(Object.assign({},e.value),{ly:c}),qt.h(e),c&&(c=!1)}).catch(function(c){u("Failed getting pm history",c)})}
function yt(a){var b=a.message,c=a.username,d=a.source,e=void 0===a.W?"":a.W,f=a.Hs;a=JSON.stringify({m:b,tid:jb()?Math.floor(Math.random()*ob(4)):pb(new Uint32Array(1))[0]});st()?B("push_service/publish_private_message/",{room:e,message:a,to_user:c}).then(function(g){g=new P(g.responseText);var h={username:c,source:d,is_reply:R(g,"is_reply"),token_color:S(g,"token_color"),in_fanclub:V(g,"in_fanclub",void 0,!1),success:"Ok"===T(g,"status")};C("SendPrivateMessage",h);g=R(g,"status");"Ok"!==g&&void 0!==f&&f(g)}).catch(function(g){u("Could not send private message: ",g)}):(C("SendPrivateMessageAttempted",{to_username:c}),zt(b,c))}function At(a,b){B("api/ts/chatmessages/update_pm_last_seen/"+a+"/",{}).then(b).catch(function(c){u("error marking window as read: "+c)})}var Bt=new Map;function Ct(a,b){var c="";void 0!==b&&(c="?"+vb({room:b}));var d="api/ts/chatmessages/user_info/"+a+"/"+c;if(Bt.has(d))return Bt.get(d);b=y(d).then(function(e){e=new P(e.responseText);window.setTimeout(function(){Bt.delete(d)},2500);return{H:W(e,"num_unread"),V:Un(new P(hm(e,"user")))}}).catch(function(e){u("Error getting user info for "+a+": "+e);throw e;});Bt.set(d,b);return b}
function Dt(a){return ds(this,function c(){var d,e,f,g;return za(c,function(h){if(1==h.ia){a:{var m=localStorage.getItem("pmAutocomplete-"+a);if(null!==m)if(m=JSON.parse(m),(new Date).getTime()>m.oC)localStorage.removeItem(a);else{m=m.value;break a}m=void 0}d=m;if(void 0!==d)return h.return(d);e=vb({keywords:a});return ra(h,y("api/ts/chatmessages/pm_available_users/?"+e),2)}f=h.wd;g=ut(f.responseText);localStorage.setItem("pmAutocomplete-"+a,JSON.stringify({value:g,oC:(new Date).getTime()+5E3}));return h.return(g)})})};function Et(a){var b=(Date.now()-a.getTime())/1E3;return 60>b?Wi:120>=b?Xi:3600>b?Math.floor(b/60)+" "+$i:7200>=b?Yi:86400>b?Math.floor(b/3600)+" "+aj:172800>=b?Zi:604800>b?Math.floor(b/86400)+" "+bj:a.toLocaleDateString()};var Ft={height:0,name:"",Oe:"",width:0,Fl:""};function Gt(a){var b=[],c=[],d=[];if(0>a.indexOf("%%%[emoticon "))a={dg:[a],Je:[]};else{for(var e=0;e<a.length;e+=1)if("%"===a[e])if("%%%[emoticon "===a.slice(e,e+13)){var f=e+a.slice(e,a.length).indexOf("]%%%");if("]%%%"===a.slice(f,f+4)){d.push(b.join(""));b=[];b:{e=a.slice(e,f+4);e=e.replace("%%%[emoticon ","").replace("]%%%","");e=e.split(/\|/);if(6===e.length){if(e={name:e[0],Xj:e[1],width:Ht(e[2])?Number(e[2]):80,height:Ht(e[3])?Number(e[3]):80,Oe:e[4],Fl:e[5]},void 0!==e.Xj&&It(e.Xj))break b}else if(5===e.length&&(e={name:e[0],Oe:e[1],width:Ht(e[2])?Number(e[2]):80,height:Ht(e[3])?Number(e[3]):80,Fl:e[4]},It(e.Oe)))break b;e=void 0}void 0!==e?c.push(e):(u("Cannot parse emoticon: "+e),c.push(Ft));e=f+4-1}}else b.push(a[e]);else b.push(a[e]);d.push(b.join(""));a={dg:d,Je:c}}this.Nv=a}Gt.prototype.dg=function(){return this.Nv.dg};Gt.prototype.Je=function(){return this.Nv.Je};function It(a){return null===a.match(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g)?(u("Invalid emoticon URL"),!1):!0}function Ht(a){return isNaN(parseInt(a,10))?(u("Invalid dimension argument"),!1):!0};var Jt=[];K.j(function(a){Jt=a.C.Ne});var Kt=new F("openEmoticonPreview"),Lt=new F("closeEmoticonPreview"),Mt=new F("emoticonPreviewClosed");function Nt(){Lj.call(this);var a=this;H(this.element,"emoticonPreviewModal");this.element.style.position="fixed";this.element.style.width="auto";this.element.style.height="auto";this.element.style.borderRadius="6px";this.element.style.padding="10px";this.element.style.fontSize="12px";this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.zIndex="1003";this.element.style.textAlign="center";this.element.style.boxShadow="0 0 18px rgba(0, 0, 0, 0.4)";this.P.style.backgroundColor="#000000";this.P.style.opacity="0.4";this.P.style.zIndex="1003";var b=document.createElement("div");H(b,"closeButton");b.style.display="inline-block";b.style.position="absolute";b.style.width="10px";b.style.height="10px";b.style.top="9px";b.style.right="9px";b.style.cursor="pointer";b.style.opacity="1";b.onclick=function(){a.D()};b.onmouseenter=function(){b.style.opacity="1"};b.onmouseleave=function(){b.style.opacity="0.5"};this.element.appendChild(b);this.Sd=document.createElement("img");this.Sd.style.verticalAlign="middle";this.Sd.style.padding="10px";v("load",this.Sd,function(){a.G()});this.element.appendChild(this.Sd);this.Vd=document.createElement("div");H(this.Vd,"hrefColor");this.Vd.innerText="REPORT EMOTICON";this.Vd.style.cursor="pointer";this.Vd.onclick=function(){a.Vd.style.display="none";a.sh.style.display="block";a.G()};this.Vd.onmouseenter=function(){a.Vd.style.textDecoration="underline"};this.Vd.onmouseleave=function(){a.Vd.style.textDecoration="none"};this.element.appendChild(this.Vd);this.sh=document.createElement("div");this.sh.style.display="none";this.element.appendChild(this.sh);var c=document.createElement("span");c.innerText="Choose a category:";c.style.marginRight="6px";this.sh.appendChild(c);var d=document.createElement("select");H(d,"categorySelect");d.style.marginBottom="3px";c=q(Ot);for(var e=c.next();!e.done;e=c.next()){e=e.value;var f=document.createElement("option");f.innerText=e.label;f.value=e.value;d.appendChild(f)}this.sh.appendChild(d);c=document.createElement("span");c.style.display="inline-block";e=document.createElement("span");H(e,"cancelButton");e.innerText="CANCEL";e.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";e.style.fontSize="12px";e.style.textShadow="#585858 1px 1px 0";e.style.padding="2px 6px";e.style.background="linear-gradient(180deg, #7b7b7b 0%, #898989 50%, #585858 60%, #616161 100%)";e.style.borderRadius="4px";e.style.boxSizing="border-box";e.style.cursor="pointer";e.style.display="inline-block";e.style.marginLeft="6px";e.onclick=function(){a.Vd.style.display="block";a.sh.style.display="none";a.G()};c.appendChild(e);e=document.createElement("span");H(e,"reportButton");e.innerText="REPORT";e.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";e.style.fontSize="12px";e.style.textShadow="#bc2b1d 1px 1px 0";e.style.padding="2px 6px";e.style.background="linear-gradient(180deg, #ff4d30 0%, #ef6352 50%, #f2240f 60%, #e63125 100%)";e.style.borderRadius="4px";e.style.boxSizing="border-box";e.style.cursor="pointer";e.style.display="inline-block";e.style.marginLeft="6px";e.onclick=function(){B("emoticon_report_abuse/"+a.im.Hc+"/",{category:d.value}).then(function(){Jt.push(a.im.Hc);a.sh.style.display="none";a.Gi.style.display="block";a.G()}).catch(function(h){u("Error reporting emoticon: "+h)})};c.appendChild(e);this.sh.appendChild(c);this.Gi=document.createElement("div");this.Gi.style.display="none";this.element.appendChild(this.Gi);c=document.createElement("span");c.innerText="EMOTICON REPORTED - ";this.Gi.appendChild(c);var g=document.createElement("span");H(g,"hrefColor");g.innerText="UNDO";g.style.cursor="pointer";g.onclick=function(){B("emoticon_report_abuse/"+a.im.Hc+"/",{category:d.value}).then(function(){var h=Jt.indexOf(a.im.Hc,0);0<=h&&Jt.splice(h,1);a.Gi.style.display="none";a.Vd.style.display="block";a.G()}).catch(function(h){u("Error reporting emoticon: "+h)})};g.onmouseenter=function(){g.style.textDecoration="underline"};g.onmouseleave=function(){g.style.textDecoration="none"};this.Gi.appendChild(g);this.Sb.j(function(){a.D()});Lt.j(function(){a.D()})}r(Nt,Lj);Nt.prototype.Nf=function(a){this.im=a;this.Sd.src=this.im.url;this.Vd.style.display="none";this.sh.style.display="none";this.Gi.style.display="none";0<=Jt.indexOf(a.Hc)?this.Gi.style.display="block":this.Vd.style.display="block";Lj.prototype.show.call(this);this.G()};Nt.prototype.G=function(){this.element.style.left=(document.documentElement.clientWidth-this.element.offsetWidth)/2+"px";this.element.style.top=(document.documentElement.clientHeight-this.element.offsetHeight)/2+"px"};Nt.prototype.D=function(){Lj.prototype.D.call(this);Mt.h(void 0)};Nt.prototype.show=function(){Lj.prototype.show.call(this);this.element.style.visibility="";this.G()};var Ot=[{label:"Just ignore this emoticon",value:"ignore"},{label:"Offensive",value:"offensive"},{label:"Disgusting",value:"disgusting"},{label:"Fake Tip",value:"fake_tip"},{label:"Advertising",value:"advertising"}];var Pt;Kq.j(function(a){Pt=a.vc});function Qt(a,b,c,d){d=void 0===d?!0:d;var e=null!==Pt&&void 0!==Pt?Pt:Ia.current.vc,f=new Gt(a);a=document.createElement("span");a.className="emoticonImage";var g=f.dg()[0];a.innerText=d?g:g.split("\n")[0];for(g={cd:1};g.cd<f.dg().length;g={cd:g.cd},g.cd+=1){if(b&&e){var h=document.createElement("img");h.onload=function(){io.h(c)};h.onerror=function(){io.h(c)};var m=f.Je()[g.cd-1].Xj;h.src=void 0!==m?m:f.Je()[g.cd-1].Oe;h.title=":"+f.Je()[g.cd-1].name;h.style.cursor="pointer";h.name=f.Je()[g.cd-
1].name;h.height=f.Je()[g.cd-1].height;h.width=f.Je()[g.cd-1].width;d?h.onclick=function(n){return function(){var p={Hc:f.Je()[n.cd-1].name,url:f.Je()[n.cd-1].Oe};Kt.h(p)}}(g):20<h.height&&(m=20/h.height,h.height*=m,h.width*=m);a.appendChild(h)}else h=document.createElement("span"),h.style.color="lightskyblue",h.innerText=":"+f.Je()[g.cd-1].name,h.style.cursor="pointer",a.appendChild(h);""!==f.dg()[g.cd]&&(h=document.createElement("span"),h.innerText=f.dg()[g.cd],a.appendChild(h))}return a};function Rt(a){G.call(this,"div",a)}r(Rt,G);k=Rt.prototype;k.initData=function(a){this.Wn=it(a.Ia);this.Da=a.Ia.username;this.N=a.N;this.message=a.message;this.H=a.H;this.time=a.time;this.ou=a.ou};k.qa=function(a){var b=this,c={display:"inline-block",left:St+"px",overflowX:"hidden",overflowY:"hidden",position:"absolute",textOverflow:"ellipsis",verticalAlign:"bottom",whiteSpace:"nowrap"},d={bottom:"8px",left:St+"px",overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"calc(100% - 35px)"},e={display:"inline-block",verticalAlign:"top"},f=void 0===this.time?"":Et(new Date(this.time)),g=Qt(this.message,!1,this.Da,!1),h=this.Da!==this.N;h&&(d.width="calc(100% - 60px)");this.Uk=N("span",null,0!==this.H?" ("+this.H+")":"");this.tg=N("div",{className:"timeString",style:{fontSize:"10px",position:"absolute",right:"8px",textAlign:"right",top:"8px"}},f);this.element=N("div",{colorClass:["PmListItem",0<this.H?"unreadBg":""],style:{borderTopWidth:"1px",borderTopStyle:"solid",cursor:"pointer",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontSize:"12px",height:"40px",lineHeight:"14px",overflowX:"hidden",padding:"8px",position:"relative",textAlign:"left"},onClick:function(){a.Ue.h(b.Da)}},N(Tt,{name:this.Da,style:{marginTop:"-16px",position:"absolute",top:"50%"},color:"",size:"32px",Wn:this.Wn}),N("div",{style:c,ref:function(m){return b.OB=m}},N("span",{colorClass:this.Wn,style:{fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontWeight:"bold"}},this.Da),this.Uk),this.tg,N("div",{colorClass:"messageDiv",style:d,ref:function(m){return b.Fg=m}},h&&""!==this.message?Zj(e):"",g))};k.render=function(){return this.element};k.G=function(){G.prototype.G.call(this);Ut(this)};k.rr=function(){G.prototype.rr.call(this);Ut(this)};function Vt(a){var b=Yj();pk(b,{display:"none",position:"absolute",right:"8px",top:"calc(50% - 8px)"});b.onclick=function(d){d.stopPropagation();d.preventDefault();Wt(a.Da)};var c=a.Fg.style.width;v("mouseenter",a.element,function(){b.style.display="block";void 0!==a.tg&&(a.tg.style.display="none");a.Fg.style.width="calc(100% - 85px)"});v("mouseleave",a.element,function(){b.style.display="none";void 0!==a.tg&&(a.tg.style.display="block");a.Fg.style.width=c});a.element.appendChild(b)}
function Ut(a){0<a.element.clientWidth&&void 0!==a.tg&&(a.tg.style.visibility=a.OB.clientWidth>a.element.clientWidth-St-8-a.tg.clientWidth?"hidden":"")}k.Od=function(){return this.H};var St=48;function Xt(){var a=this;this.Us=!0;this.Qf=!1;this.H=0;this.pd=[];this.I=new Ub;Yt(this);E(co.j(function(b){At(b);a.Pk(b)}),this.I);E(ho.j(function(b){a.Pk(b)}),this.I);E($n.j(function(b){var c=Zt(a,b.Da),d=void 0===c?b.N:c.Ia,e=void 0===c?0:c.H;$t.delete(b.Da);void 0===c&&b.Da!==b.N.username?Ct(b.Da).then(function(f){au(a,{message:b.message,H:0,time:Date.now(),N:b.N.username,Ia:f.V,Fu:!0})}):au(a,{message:b.message,H:b.N.username===b.Da?e+1:0,time:Date.now(),N:b.N.username,Ia:d,Fu:!0})}),this.I);E(K.j(function(b){a.B=b.C.B;a.pd.forEach(function(c){c.Ia.yb=c.Ia.username===b.C.B});void 0!==bu&&cu.h(b)}),this.I);E(jq.j(function(b){if(b.focus){for(var c=!1,d=q(a.pd),e=d.next();!e.done;e=d.next())if(e=e.value,e.N===b.username||e.Ia.username===b.username){c=!0;e.Fu=!0;break}c?cu.h(void 0):Ct(b.username).then(function(f){au(a,{message:"",H:0,time:Date.now(),N:a.B,Ia:f.V,Fu:!0})})}}),this.I);E(oq.j(function(b){a.pd.forEach(function(c){c.Ia.username===b.username&&(c.Ia.fc=b.fc,cu.h(void 0))})}),this.I)}
var bu;function du(){void 0===bu&&(bu=new Xt);return bu}function Yt(a){return ds(a,function c(){var d=this,e,f;return za(c,function(g){if(1==g.ia){if(!st())return g.return();if(d.Qf||!d.Us)return g.return(Promise.reject());d.Qf=!0;e=d.pd.length;return ra(g,vt(e),2)}f=g.wd;d.Us=f.length===eu;d.pd=d.pd.concat(f);d.Qf=!1;fu.h({Qy:f,dd:!1});g.ia=0})})}Xt.prototype.tb=function(){Vb(this.I)};function au(a,b){a.pd.unshift(b);fu.h({Qy:[b],dd:!0});a.Pk("")}
function gu(a,b){return a.pd.find(function(c){return c.Ia.username===b})}function Zt(a,b){for(var c=a.pd.length-1;0<=c;--c){var d=a.pd[c];if(d.Ia.username===b)return a.pd.splice(c,1),d}}Xt.prototype.Od=function(){return this.H};Xt.prototype.Pk=function(a){for(var b=0,c=q(this.pd),d=c.next();!d.done;d=c.next())d=d.value,d.Ia.username===a&&(d.H=0),0!==d.H&&(b+=1);this.H=b;hu.h({H:this.H,Da:a})};var cu=new F("pmListDataChanged"),fu=new F("pmListDatItemAdded"),hu=new F("pmListDataNumUnread"),eu=10;var iu=new Set,$t=new Set;function Wt(a){eo.h(a);$t.has(a)||($t.add(a),iu.forEach(function(b){ju(b,a)}))}
function Tt(a){var b={width:a.size,height:a.size,borderRadius:"50%",background:a.color,textAlign:"center",color:"#FFF",display:"table-cell",fontFamily:"UbuntuLight, Tahoma, Arial, Helvetica, sans-serif",fontSize:"16px",lineHeight:"14px",margin:"auto",verticalAlign:"middle"};return N("div",{colorClass:"avatarBubble",style:Object.assign({position:"relative"},a.style)},N("div",{colorClass:a.Wn,style:b},a.name.charAt(0).toLocaleUpperCase()))}
function ku(){var a=Ia.current;return void 0===a.qb?{Yg:"",La:!0}:{Yg:a.qb.username,La:!1}}
function lu(a){G.call(this,"div",a);var b=this;this.zd=-1;this.H=0;this.bb=[];this.wa||iu.add(this);this.I=new Ub;E(jo.j(function(c){if(c.wa===b.wa){c=c.event;var d=b.zd;-1<d&&(d=b.bb[d],I(d.element,"selected"),0<d.Od()?H(d.element,"unreadBg"):I(d.element,"unreadBg"));if("ArrowDown"===c.key||40===c.keyCode)b.zd=b.zd+1>=b.bb.length?-1:b.zd+1;else if("ArrowUp"===c.key||38===c.keyCode)b.zd=-1>b.zd-1?b.bb.length-1:b.zd-1;-1<b.zd?(c=b.bb[b.zd].Da,b.Zh(b.zd,!0),lo.h({wa:b.wa,Hc:c})):lo.h({wa:b.wa,Hc:""})}}),this.I);E(ko.j(function(c){c===b.wa&&-1<b.zd&&(c=b.bb[b.zd],C("PMSearchResultClicked",{location:""===b.B?"PMWindow":"PMTab",color:c.Wn}),lo.h({wa:b.wa,Hc:""}),b.Ue.h(c.Da))}),this.I);E(go.j(function(c){c.wa===b.wa&&c.tp===b.Of&&(b.zd=-1,c.Qe?mu(b,c.prefix):nu(b))}),this.I);E(K.j(function(c){b.A=c.A;b.B=c.C.B;ku().La||void 0!==b.Tb||(b.Tb=du());b.wa||(E(zj.j(function(){b.bb.forEach(function(d){eo.h(d.Da)})}),b.I),ou(b).then(),b.A.event.kc.j(function(d){return ds(b,function f(){var g,h=this;return za(f,function(m){if(1==m.ia)return ra(m,new Promise(function(n){return window.setTimeout(n,1E3)}),2);if(4!=m.ia){if("privatewatching"===d.Ra){h.mu=null===(g=h.A)||void 0===g?void 0:"privatewatching"===g.status?g.wz:"";h.Dh().then();m.ia=0;return}return ra(m,h.Dh(),4)}h.mu=void 0;m.ia=0})})}))}),this.I);E(cu.j(function(c){void 0!==c&&(b.A=c.A,b.B=c.C.B);ku().La||void 0!==b.Tb||(b.Tb=du());b.Dh().then()}),this.I);hu.j(function(c){if(void 0!==c.Da)for(var d=q(b.bb),e=d.next();!e.done;e=d.next())e=e.value,e.Da===c.Da&&(e.H=0,0===e.H?(e.Uk.innerText="",I(e.element,"unreadBg")):(e.Uk.innerText=" ("+e.H+")",H(e.element,"unreadBg")));b.wa?b.Eh(c.H):b.Eh(b.Od())});fu.j(function(c){var d=c.Qy,e=c.dd;0===b.bb.length?b.Dh():d.map(function(f){b.wa?(pu(b,f.Ia.username),qu(b,f,e)):ru(b).then(function(){(void 0!==pu(b,f.Ia.username)||b.Jg.has(f.Ia.username))&&qu(b,f,e);b.Eh(b.Od())})})});E(a.Ue.j(function(){b.ab.style.display="block";b.zd=-1;mu(b,"")}),this.I);this.ss=new xk(function(){b.Qf=!0;b.element.appendChild(N("div",{id:"pmUsersLoading",style:{textAlign:"center"}},N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/pms/loading-animated.svg",height:"32px",alt:"loading-animated"})));void 0!==b.Tb&&Yt(b.Tb).then(function(){b.Qf=!1;var c=document.getElementById("pmUsersLoading");null!==c&&b.element.removeChild(c)})},{yd:100,ce:1});su(this)}r(lu,G);function su(a){function b(){for(var c=q(a.bb),d=c.next();!d.done;d=c.next())if(d=d.value,void 0!==d.tg){var e=void 0===d.time?"":Et(new Date(d.time));d.tg.innerText=e}window.setTimeout(b,1E4)}window.setTimeout(b,1E4)}function tu(a,b){return-1<a.bb.findIndex(function(c){return c.ou.Ia.username===b})}k=lu.prototype;k.initData=function(a){this.backgroundColor=a.Of?"#2A2C2E":"";this.borderColor=a.Of?"#7F7F7F":"#E0E0E0";this.wa=a.wa;!0===a.jh&&(this.jh=a.jh);this.Of=a.Of;ku().La||(this.Tb=du());this.Ue=a.Ue;this.B="";this.Jg=new Set;this.Eh=a.Eh};k.qa=function(a){var b=this,c={background:this.backgroundColor,color:"#494949",fontSize:"12px",fontFamily:"UbuntuRegular, Tahoma, Arial, Helvetica, sans-serif",height:"100%",lineHeight:"16px",margin:"0 12px 0 auto",overflowX:"hidden",overflowY:"hidden",position:"relative",textAlign:"left",width:"100%",zIndex:2};a.Of?c.color="#FFF":a.wa&&(c.height="90%");this.ab=N("div",{style:{maxHeight:"calc(100% - 32px)",overflowY:"auto",width:"100%"},onScroll:function(){var d=void 0===b.Ye?!1:""!==b.Ye.value;!ku().La&&!b.Qf&&void 0!==b.Tb&&b.Tb.Us&&!d&&1>b.ab.scrollHeight-b.ab.scrollTop-b.ab.clientHeight&&yk(b.ss)}},this.bb);this.element=N("div",{style:c},this.ab);(!this.wa||void 0!==this.Tb&&0<this.Tb.pd.length)&&uu(this)};k.render=function(){return this.element};k.Z=function(){G.prototype.Z.call(this);for(var a=q(this.bb),b=a.next();!b.done;b=a.next())b.value.Z()};k.qf=function(){G.prototype.qf.call(this);for(var a=q(this.bb),b=a.next();!b.done;b=a.next())b.value.qf()};function uu(a){var b=N("div",{style:{borderTop:""===a.B?"1px solid "+a.borderColor:""}},N(pt,{classRef:function(c){a.Ye=c},borderColor:a.borderColor,Of:a.Of,wa:a.wa,Ue:a.Ue,B:a.B}));a.element.insertBefore(b,a.element.firstChild)}
k.Dh=function(){return ds(this,function b(){var c=this,d,e,f;return za(b,function(g){if(1==g.ia){d=c;if(ku().La)return c.element.style.display="block",g.return();nu(c);c.ab.style.top="";if(c.wa&&void 0!==c.Tb&&0===c.Tb.pd.length)return vu(c),c.Eh(0),g.return();void 0===c.Ye&&uu(c);return ra(g,ru(c),2)}if(3!=g.ia)return ra(g,ou(c),3);e=g.wd;void 0!==c.Tb&&(f=c.Tb.pd.filter(function(h){return wu(d,h)}),xu(c,f,e));g.ia=0})})};k.tb=function(){Vb(this.I);void 0!==this.Ye&&this.Ye.tb()};function nu(a){for(;null!==a.ab.firstChild;)a.ab.removeChild(a.ab.firstChild);a.bb=[]}function ru(a){return ds(a,function c(){var d=this,e,f;return za(c,function(g){if(1==g.ia)return e=d,d.Jg=new Set(d.bb.map(function(h){return h.Da})),ku().La||d.wa||void 0===d.A?(g.ia=2,g=void 0):g=ra(g,yu(d.A,"a",!1),3),g;2!=g.ia&&(f=g.wd,f.jf.forEach(function(h){return e.Jg.add(h.username)}),void 0!==d.mu&&d.Jg.add(d.mu));return g.return(d.Jg)})})}k.Fh=function(){return this.Jg.size};function zu(a,b){if(""===a.B)return!1;b=void 0===b?!0:a.B.startsWith(b);var c=ku();return!a.wa&&b&&!a.jh&&(c.La||c.Yg!==a.B)}
function ou(a){return ds(a,function c(){var d=this,e,f,g;return za(c,function(h){switch(h.ia){case 1:e=zu(d);if(!e){h.ia=2;break}if(ku().La){nu(d);qu(d,{message:"",H:0,N:d.B,Ia:{username:d.B,yb:!0,Ec:!1,je:!1,fc:!1,ff:!1,fg:!1,gf:!1,Fb:"",wc:"df"}});d.ab.style.borderBottom="1px solid "+d.borderColor;h.ia=2;break}if(void 0===d.Tb){h.ia=2;break}f=gu(d.Tb,d.B);if(void 0!==f){h.ia=5;break}return ra(h,Ct(d.B,d.B),6);case 6:return g=h.wd,void 0===gu(d.Tb,d.B)&&(nu(d),qu(d,{message:"",H:g.H,N:g.V.username,Ia:g.V})),h.return(e);case 5:nu(d),qu(d,f);case 2:return h.return(e)}})})}function xu(a,b,c){a.H=0;b.forEach(function(d){$t.has(d.Ia.username)||!a.wa&&d.Ia.username!==a.B&&!a.Jg.has(d.Ia.username)||c&&a.B===d.Ia.username||(0<d.H&&(a.H+=1),Au(a,d),a.wa||rt.h(d.Ia.username))});a.Eh(a.H);a.ab.style.borderBottom="1px solid "+a.borderColor;a.ab.style.margin="0"}
function Au(a,b,c){c=void 0===c?!1:c;var d=!a.wa;if(!tu(a,b.Ia.username)){var e=N(Rt,{message:b.message,ou:b,H:b.H,Ia:b.Ia,time:b.time,N:b.N,Ue:a.Ue,classRef:function(g){(a.wa||b.Ia.username!==a.B)&&Vt(g);c?d&&b.Ia.username!==a.B?a.bb.splice(1,0,g):a.bb.unshift(g):a.bb.push(g)}});if(c){var f=a.ab.firstChild;d&&b.Ia.username!==a.B&&ku().Yg!==a.B&&null!==f?a.ab.insertBefore(e,f.nextSibling):a.ab.insertBefore(e,f)}else a.ab.appendChild(e);a.ab.style.display="block";a.Z()}}
k.Od=function(){if(this.wa)return this.H;for(var a=0,b=q(this.bb),c=b.next();!c.done;c=b.next())0!==c.value.Od()&&(a+=1);return this.H=a};function ju(a,b){var c,d;null===(c=a.Tb)||void 0===c?void 0:c.Pk(b);c=a.bb.find(function(e){return e.Da===b});void 0!==c&&(a.bb.splice(a.bb.indexOf(c),1),null===(d=c.parent)||void 0===d?void 0:d.removeChild(a),c.element.remove())}
function mu(a,b){ds(a,function d(){var e=this,f,g,h,m,n,p;return za(d,function(A){f=e;g=!1;if(void 0===e.Tb)A.ia=0;else return nu(e),h=e.Tb.pd,zu(e,b)&&(n=gu(e.Tb,e.B),m=void 0!==n?n:{message:"",H:0,N:e.B,Ia:{username:e.B,yb:!0,Ec:!1,je:!1,fc:!1,ff:!1,fg:!1,gf:!1,Fb:"",wc:"df"}},Au(e,m),g=!0),0<h.length&&(p=h.filter(function(z){return wu(f,z,b)}),e.ab.style.display=g||0<p.length?"block":"none",xu(e,p,g)),st()?A=ra(A,Bu(e,b),0):(A.ia=0,A=void 0),A})})}
function wu(a,b,c){c=void 0===c?a.pE:c;return 0===c.length||b.Ia.username.startsWith(c)}function qu(a,b,c){wu(a,b,void 0)&&Au(a,b,void 0===c?!1:c)}function Bu(a,b){return ds(a,function d(){var e=this,f,g,h,m,n,p,A;return za(d,function(z){if(1==z.ia)return f=e.bb[e.bb.length-1],g=!1,0===e.bb.length&&(g=!0),ra(z,Dt(b),2);h=z.wd;m=q(h);for(n=m.next();!n.done;n=m.next())p=n.value,A=p.Ia.username,g?A===e.B||$t.has(A)||(e.wa?Au(e,p,!1):e.Jg.has(A)&&Au(e,p,!1)):A===f.Da&&(g=!0);z.ia=0})})}
function pu(a,b){for(var c,d=a.bb.length-1;0<=d;--d){var e=a.bb[d];e.Da===b&&(c=e,a.bb.splice(d,1),e.element.remove())}return c}k.Zh=function(a,b){-1<a&&(a=this.bb[a],b&&(this.ab.scrollTop=this.zd*a.element.clientHeight-this.ab.clientHeight/2),I(a.element,"unreadBg"),H(a.element,"selected"))};function vu(a){a.ab.style.marginTop="50%";a.ab.style.position="absolute";a.ab.style.textAlign="center";a.ab.style.top="-54px";a.element.style.borderTop="1px solid "+a.borderColor;a.ab.appendChild(N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/pms/empty-chat-state.svg",alt:"empty-chat-state"}));a.ab.appendChild(N("div",{style:{fontSize:"14px",fontFamily:"UbuntuRegular, Tahoma, Arial, Helvetica, sans-serif",lineHeight:"18px",margin:"8px 0"}},Si));a.ab.appendChild(N("div",{style:{margin:"auto",width:"75%"}},Mc()))}da.Object.defineProperties(lu.prototype,{pE:{configurable:!0,enumerable:!0,get:function(){var a,b;return null!==(b=null===(a=this.Ye)||void 0===a?void 0:a.value.trim())&&void 0!==b?b:""}}});var Cu=new F("tipsInPast24HoursUpdate"),Du=new F("tokenBalanceUpdate");function Eu(a){return new Promise(function(b,c){y("tipping/current_tokens/?room="+a).then(function(d){d=new P(d.responseText);var e={hb:W(d,"token_balance")},f=S(d,"tip_options");if(void 0!==f){f=new P(f);f=mm(f,"tip_options");if(void 0!==f){f=new P(f);var g=f.getAsString("label"),h=lm(f,"options"),m=[];h=q(JSON.parse(h));for(var n=h.next();!n.done;n=h.next())n=new P(JSON.stringify(n.value)),m.push({label:n.getAsString("label")}),nm(n);g={label:g,options:m};nm(f);f=g}else f=void 0;e.vl=f}nm(d);Du.h({$c:e.hb});b(e)}).catch(function(d){c(d.status)})})}var Fu=!1;function Gu(a){return new Promise(function(b,c){Fu||(Fu=!0,B("tipping/send_tip/"+a.W+"/",{tip_amount:a.mv,message:a.message,source:a.source,tip_room_type:a.nv,tip_type:a.Di,video_mode:a.hg}).then(function(d){Fu=!1;d=new P(d.responseText);var e={success:V(d,"success")},f=S(d,"error",!1);void 0!==f?e.error=f:(e.hb=W(d,"token_balance"),e.Zj=W(d,"tipped_performer_last_24hrs"));nm(d);void 0!==e.hb&&Du.h({$c:e.hb});b(e)}).catch(function(d){Fu=!1;c(d.status)}))})};function Hu(){return new Promise(function(a){y("api/broadcastvideocontext/").then(function(b){a(Iu(b.responseText))})})}function Iu(a){return new Promise(function(b,c){var d=new P(a);400<=W(d,"status",!1)?c("Bad response from server: "+a):(c={B:T(d,"room"),au:T(d,"originHost"),HD:T(d,"originPassword"),ID:T(d,"originWSEndpoint")},b(c))})};function Ju(){var a=void 0!==screen.orientation?screen.orientation.type:void 0;if(void 0!==a){if(a.startsWith("portrait"))return!0;if(a.startsWith("landscape"))return!1}}function Ku(){if(!Qa)return!0;var a=Ju();if(void 0!==a)return a;switch(window.orientation){case 0:case 180:case-180:return!0;case 90:case-90:case 270:return!1}return window.innerWidth===Math.min(screen.width,screen.height)?!0:window.innerWidth<=window.innerHeight}
function Lu(a){if(!Qa)return!0;if(!cb()){var b=Ju();if(void 0!==b)return!b}switch(window.orientation){case 0:case 180:case 270:case-180:return!1;case 90:if(void 0===a||"user"===a)return!cb();break;case-90:if("environment"===a)return!cb()}return!0};var Mu=new F("tryFullScreen");var Nu;Nu=[];for(var Ou=0;256>Ou;++Ou)Nu[Ou]=(Ou+256).toString(16).substr(1);var Pu=[[640,360],[960,540],[1280,720]];function Qu(a,b){void 0===b&&(b=200);a.forEach(function(c){c.stop()});return new Promise(function(c){window.setTimeout(function(){c()},b)})}var Ru=new F("FirefoxPermanentPermissionError");function Su(){return new Promise(function(a,b){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(c){Qu(c.getTracks(),void 0).then(function(){navigator.mediaDevices.enumerateDevices().then(function(d){d=Promise.all(d.map(function(f){if("videoinput"===f.kind){var g=new Map;Pu.forEach(function(h){var m=h[0];h=h[1];if(cb()&&ab()&&960===m&&540===h)m=void 0;else{var n=m/h;m={id:m+"x"+h,rk:f.deviceId,label:m+" x "+h,width:m,height:h,ratio:n,Bg:1.4<n,gD:720<=h}}void 0!==m&&g.set(m.id,m)});return Promise.resolve({device:f,resolutions:g})}return Promise.resolve({device:f})}));var e={Nt:new Map,Pl:new Map};d.then(function(f){var g=!0;f.forEach(function(h){var m=h.device;""!==m.label&&(g=!1);"audioinput"===m.kind?e.Nt.set(m.deviceId,{id:m.deviceId,label:m.label}):"videoinput"===m.kind&&void 0!==h.resolutions&&0<h.resolutions.size&&e.Pl.set(m.deviceId,{id:m.deviceId,label:m.label,Nz:h.resolutions})});g?(Ru.h(void 0),b(Error("We need PERMANENT permission to use your camera and microphone in order to proceed."))):a(e)}).catch(function(f){b(f)})})})}).catch(function(c){b(c)})})};var Tu;Tu={v:[{name:"version",U:/^(\d*)$/,S:"%s"}],o:[{name:"origin",U:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,S:"%s %s %d %s IP%d %s",names:"username sessionId sessionVersion netType ipVer address".split(" ")}],s:[{name:"name",U:/(.*)/,S:"%s"}],i:[{name:"description",U:/(.*)/,S:"%s"}],u:[{name:"uri",U:/(.*)/,S:"%s"}],e:[{name:"email",U:/(.*)/,S:"%s"}],p:[{name:"phone",U:/(.*)/,S:"%s"}],z:[{name:"timezones",U:/(.*)/,S:"%s"}],r:[{name:"repeats",U:/(.*)/,S:"%s"}],t:[{name:"timing",U:/^(\d*) (\d*)/,S:"%d %d",names:["start","stop"]}],c:[{name:"connection",U:/^IN IP(\d) (\S*)/,S:"IN IP%d %s",names:["version","ip"]}],b:[{push:"bandwidth",U:/^(TIAS|AS|CT|RR|RS):(\d*)/,S:"%s:%s",names:["type","limit"]}],m:[{U:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,S:"%s %d %s %s",names:["type","port","protocol","payloads"]}],a:[{push:"rtp",U:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],S:function(a){return void 0!==a.encoding?"rtpmap:%d %s/%s/%s":void 0!==a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",U:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],S:"fmtp:%d %s"},{name:"control",U:/^control:(.*)/,S:"control:%s"},{name:"rtcp",U:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],S:function(a){return void 0!==a.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",U:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],S:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",U:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],S:function(a){return void 0!==a.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",U:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],S:function(a){return"extmap:%d"+(void 0!==a.direction?"/%s":"%v")+(void 0!==a["encrypt-uri"]?" %s":"%v")+" %s"+(void 0!==a.config?" %s":"")}},{name:"extmapAllowMixed",U:/^(extmap-allow-mixed)/,S:"%s"},{push:"crypto",U:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],S:function(a){return void 0!==a.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",U:/^setup:(\w*)/,S:"setup:%s"},{name:"connectionType",U:/^connection:(new|existing)/,S:"connection:%s"},{name:"mid",U:/^mid:([^\s]*)/,S:"mid:%s"},{name:"msid",U:/^msid:(.*)/,S:"msid:%s"},{name:"ptime",U:/^ptime:(\d*)/,S:"ptime:%d"},{name:"maxptime",U:/^maxptime:(\d*)/,S:"maxptime:%d"},{name:"direction",U:/^(sendrecv|recvonly|sendonly|inactive)/,S:"%s"},{name:"icelite",U:/^(ice-lite)/,S:"%s"},{name:"iceUfrag",U:/^ice-ufrag:(\S*)/,S:"ice-ufrag:%s"},{name:"icePwd",U:/^ice-pwd:(\S*)/,S:"ice-pwd:%s"},{name:"fingerprint",U:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],S:"fingerprint:%s %s"},{push:"candidates",U:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:"foundation component transport priority ip port type raddr rport tcptype generation network-id network-cost".split(" "),S:function(a){var b="candidate:%s %d %s %d %s %d typ %s"+(void 0!==a.raddr?" raddr %s rport %d":"%v%v");b+=void 0!==a.tcptype?" tcptype %s":"%v";void 0!==a.generation&&(b+=" generation %d");b+=void 0!==a["network-id"]?" network-id %d":"%v";return b+=void 0!==a["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",U:/^(end-of-candidates)/,S:"%s"},{name:"remoteCandidates",U:/^remote-candidates:(.*)/,S:"remote-candidates:%s"},{name:"iceOptions",U:/^ice-options:(\S*)/,S:"ice-options:%s"},{push:"ssrcs",U:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],S:function(a){var b="ssrc:%d";void 0!==a.attribute&&(b+=" %s",void 0!==a.value&&(b+=":%s"));return b}},{push:"ssrcGroups",U:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],S:"ssrc-group:%s %s"},{name:"msidSemantic",U:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],S:"msid-semantic: %s %s"},{push:"groups",U:/^group:(\w*) (.*)/,names:["type","mids"],S:"group:%s %s"},{name:"rtcpMux",U:/^(rtcp-mux)/,S:"%s"},{name:"rtcpRsize",U:/^(rtcp-rsize)/,S:"%s"},{name:"sctpmap",U:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],S:function(a){return void 0!==a.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",U:/^x-google-flag:([^\s]*)/,S:"x-google-flag:%s"},{push:"rids",U:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],S:function(a){return void 0!==a.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",U:/^imageattr:(\d+|\*)[\s\t]+(send|recv)[\s\t]+(\*|\[\S+\](?:[\s\t]+\[\S+\])*)(?:[\s\t]+(recv|send)[\s\t]+(\*|\[\S+\](?:[\s\t]+\[\S+\])*))?/,names:["pt","dir1","attrs1","dir2","attrs2"],S:function(a){return"imageattr:%s %s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast",U:/^simulcast:(send|recv) ([a-zA-Z0-9\-_~,]+)(?:\s?(send|recv) ([a-zA-Z0-9\-_~,]+))?$/,names:["dir1","list1","dir2","list2"],S:function(a){return"simulcast:%s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast_03",U:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],S:"simulcast: %s"},{name:"framerate",U:/^framerate:(\d+(?:$|\.\d+))/,S:"framerate:%s"},{name:"sourceFilter",U:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],S:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",U:/^(bundle-only)/,S:"%s"},{name:"label",U:/^label:(.+)/,S:"label:%s"},{name:"sctpPort",U:/^sctp-port:(\d+)$/,S:"sctp-port:%s"},{name:"maxMessageSize",U:/^max-message-size:(\d+)$/,S:"max-message-size:%s"},{name:"keywords",U:/^keywds:(.+)$/,S:"keywds:%s"},{name:"content",U:/^content:(.+)/,S:"content:%s"},{name:"bfcpFloorCtrl",U:/^floorctrl:(c-only|s-only|c-s)/,S:"floorctrl:%s"},{name:"bfcpConfId",U:/^confid:(\d+)/,S:"confid:%s"},{name:"bfcpUserId",U:/^userid:(\d+)/,S:"userid:%s"},{name:"bfcpFloorId",U:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],S:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"],U:/(.*)/,S:"%s"}]};var Uu=/(\r\n|\r|\n)/,Vu=/%[sdv%]/g,Wu=RegExp.prototype.test.bind(/^([a-z])=(.*)/);function Xu(a){var b=1,c=arguments,d=c.length;return a.replace(Vu,function(e){if(b>=d)return e;var f=c[b];b+=1;switch(e){case "%%":return"%";case "%s":return String(f);case "%d":return String(Number(f))}return""})}
function Yu(a,b,c){var d=b.S;"function"===typeof b.S&&(d=c,void 0===b.push&&void 0!==b.name&&(d=c[b.name]),d=b.S(d));a=[a+"="+d];if(void 0!==b.names)for(d=0;d<b.names.length;d+=1){var e=b.names[d];void 0!==b.name?a.push(c[b.name][e]):a.push(c[b.names[d]])}else void 0!==b.name&&a.push(c[b.name]);return Xu.apply(void 0,a)}function Zu(a){return String(Number(a))===a?Number(a):a}var $u="vosiuepcbtrza".split(""),av=["i","c","b","a"];function bv(a){var b;void 0===b&&(b={JD:$u,cD:av});void 0===a.version&&(a.version=0);void 0===a.name&&(a.name=" ");a.media.forEach(function(d){void 0===d.LD&&(d.LD="")});var c=[];b.JD.forEach(function(d){Tu[d].forEach(function(e){void 0!==e.name&&e.name in a&&void 0!==a[e.name]?c.push(Yu(d,e,a)):void 0!==e.push&&e.push in a&&void 0!==a[e.push]&&a[e.push].forEach(function(f){c.push(Yu(d,e,f))})})});a.media.forEach(function(d){c.push(Yu("m",Tu.m[0],d));void 0!==b&&b.cD.forEach(function(e){Tu[e].forEach(function(f){void 0!==f.name&&f.name in d&&void 0!==d[f.name]?c.push(Yu(e,f,d)):void 0!==f.push&&f.push in d&&void 0!==d[f.push]&&d[f.push].forEach(function(g){c.push(Yu(e,f,g))})})})});return c.join("\r\n")+"\r\n"}
function cv(a){var b={};var c=[];var d=b;a.split(Uu).filter(Wu).forEach(function(e){var f=e[0],g=e.slice(2);"m"===f&&(c.push({aJ:[],VG:[]}),d=c[c.length-1]);void 0!==Tu[f]&&Tu[f].some(function(h){if(h.U.test(g)){var m=d;void 0!==h.push&&void 0===m[h.push]?m[h.push]=[]:void 0!==h.name&&void 0!==h.names&&void 0===m[h.name]&&(m[h.name]={});var n={};void 0===h.push&&(n=void 0!==h.name&&void 0!==h.names?m[h.name]:m);var p=g.match(h.U),A=n,z=h.names,D=h.name;if(null!==p)if(void 0!==D&&void 0===z)A[D]=Zu(p[1]);else if(void 0!==z)for(D=0;D<z.length;D+=1)D+1<p.length&&(A[z[D]]=Zu(p[D+1]));void 0!==h.push&&m[h.push].push(n);return!0}return!1})});b.media=c;return b};var dv=["H264","VP8","VP9"];function ev(a){this.sdp=cv(a);a=wb()["video-bitrate"];void 0!==a&&(fv(this,parseInt(a)),this.uF=!0);a=wb()["video-codecs"];if(void 0!==a){a=a.split(",");var b,c=wb()["video-profiles"];0<a.length&&void 0!==c&&(b=c.split(","));gv(this,a,b);this.vF=!0}}ev.prototype.write=function(){return bv(this.sdp)};function fv(a,b){if(!a.uF){var c=hv(b);a.sdp.media.forEach(function(d){"video"===d.type&&iv(c,d)});return c}}
function gv(a,b,c){a.vF||a.sdp.media.forEach(function(d){"video"===d.type&&jv(a,b,d,c)})}function hv(a){var b=1500;void 0!==a&&(360>=a?b=800:540<a&&(b=3E3));return b}function iv(a,b){var c=kv(dv,b);var d=[];c.forEach(function(e){d.push({payload:e,config:"x-google-min-bitrate="+a});d.push({payload:e,config:"x-google-max-bitrate="+a})});b.fmtp=b.fmtp.concat(d)}
function jv(a,b,c,d){var e=kv(dv,c),f=kv(b,c,d);c.rtp.filter(function(g){return e.some(function(h){return h===g.payload})&&!f.some(function(h){return h===g.payload})}).map(function(g){return g.payload}).forEach(function(g){lv(a,g,c)})}
function kv(a,b,c){var d,e=b.rtp.filter(function(g){var h=a.some(function(m){return m.toUpperCase()===g.codec.toUpperCase()});h&&"VP8"===g.codec.toUpperCase()&&(d=g.payload);return h}).map(function(g){return g.payload});if(void 0!==c){var f=["profile-level-id=","profile-id="];b=b.fmtp.filter(function(g){if(e.some(function(m){return m===g.payload})){var h=!1;g.config.split(";").forEach(function(m){f.forEach(function(n){if(m.startsWith(n)){var p=m.split(n)[1].toUpperCase();c.some(function(A){return A.toUpperCase()===p})&&(h=!0)}})});return h}return!1}).map(function(g){return g.payload});void 0!==d&&e.some(function(g){return g===d})&&b.unshift(d);e=b}return e}
function lv(a,b,c){var d=c.payloads.split(" ");d=d.filter(function(e){return parseInt(e)!==b});c.payloads=d.join(" ");c.rtp=c.rtp.filter(function(e){return e.payload!==b});d=c.rtcpFb;void 0!==d&&(c.rtcpFb=d.filter(function(e){return e.payload!==b}));c.fmtp=c.fmtp.filter(function(e){return e.payload!==b});c.fmtp.filter(function(e){e=e.config;return e.startsWith("apt=")&&parseInt(e.split("apt=")[1])===b?!0:!1}).map(function(e){return e.payload}).forEach(function(e){lv(a,e,c)})};function mv(a){var b=void 0;void 0===a||"number"===typeof a?b=a:void 0!==a.exact?b=a.exact:void 0!==a.ideal&&(b=a.ideal);return b}function nv(a){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);this.fatal=!0}r(nv,Error);function ov(a,b){this.Bp=this.Bt=0;this.Yv=!1;this.PE={applicationName:"live-origin",streamName:"stream",sessionId:"[empty]"};this.C=a;this.video=b;this.source="desktop";a=new Uint8Array(16);window.crypto.getRandomValues(a);a[6]=a[6]&15|64;a[8]=a[8]&63|128;b=0;this.kf=[Nu[a[b++]],Nu[a[b++]],Nu[a[b++]],Nu[a[b++]],"-",Nu[a[b++]],Nu[a[b++]],"-",Nu[a[b++]],Nu[a[b++]],"-",Nu[a[b++]],Nu[a[b++]],"-",Nu[a[b++]],Nu[a[b++]],Nu[a[b++]],Nu[a[b++]],Nu[a[b++]],Nu[a[b++]]].join("");this.Bp=Date.now();this.cg=!1}
k=ov.prototype;k.zn=function(a){var b=this;this.ib=a;return new Promise(function(c,d){"object"!==typeof navigator||"object"!==typeof navigator.mediaDevices||"function"!==typeof navigator.mediaDevices.getUserMedia?d(Error("Your browser doesn't support broadcasting. Recent versions of Safari, Firefox, or Chrome are recommended.")):navigator.mediaDevices.getUserMedia(a).then(function(e){b.stream=e;var f=e.getVideoTracks();if(0===f.length||void 0===f[0])d(Error("We can't find any cameras, please ensure you have given permission to use your camera."));else{b.Bh=f[0].getSettings();if(void 0!==b.Bh.width&&void 0!==b.Bh.height){var g=b.Bh.width;f=b.Bh.height;if(void 0!==a.video){var h=void 0;var m=void 0;var n=a.video;void 0!==n&&(h=mv(n.width),m=mv(n.height));n=m;if(void 0!==h&&h!==g||void 0!==n&&n!==f)m={WebRTCHandlerError:"Stream resolution different from constraint resolution"},void 0!==h&&(h=a.video.width,"object"===typeof h&&(h=JSON.stringify(h)),m.WebRTCHandlerConstraintWidth=h,m.WebRTCHandlerStreamWidth=g),void 0!==n&&(g=a.video.height,"object"===typeof g&&(g=JSON.stringify(g)),m.WebRTCHandlerConstraintHeight=g,m.WebRTCHandlerStreamHeight=f),C("WebRTCHandlerSetup",m)}}JSON.stringify(a);b.video.srcObject=e;c(e)}}).catch(function(e){var f=e.message;if("ConstraintNotSatisfiedError"===e.name)f="The resolution is not supported by your device.";else if("OverconstrainedError"===e.name)f="Your device does not support the minimum resolution.";else if("PermissionDeniedError"===e.name||"NotAllowedError"===e.name)f="We need permission to use your camera and microphone in order to proceed.";else if(""===f||null===f)f="An unknown error has occurred. We cannot enable your camera or microphone.";f=Error(f);f.name=e.name;d(f)})})};k.start=function(){var a=this;return new Promise(function(b,c){a.cg=!0;var d=!1;if(void 0===a.stream)a.close(),c(new nv("Unable to get video from camera. Try refreshing the page and make sure you allow video/audio if any prompts come up."));else try{void 0===a.Xq&&(a.closed=!1,a.Xq=window.setInterval(function(){pv(a)},1E3)),qv(a),void 0===a.wb?c(Error("Unable to connect to peer")):(a.wb.oniceconnectionstatechange=function(){if(void 0!==a.wb&&!d){if("connected"===a.wb.iceConnectionState||"completed"===a.wb.iceConnectionState)d=!0,C("WebRTCHandlerConnected",{WebRTCHandlerSource:a.source}),rv.h(a.kf),b();"failed"===a.wb.iceConnectionState&&(d=!0,c(Error("WebRTC failed")))}},sv(a,a.C,c))}catch(e){c(e)}})};k.stop=function(a){var b=this,c=!0===a;return new Promise(function(d){function e(){c||(b.cg=!1,tv.h(b.kf));d(b.kf)}c||b.close();if(void 0!==b.ad){if(b.ad.readyState!==WebSocket.CLOSING&&b.ad.readyState!==WebSocket.CLOSED)try{b.ad.close()}catch(f){u("could not close websocket connection "+f)}b.ad=void 0}if(void 0!==b.wb){try{b.wb.close()}catch(f){u("could not close peer connection "+f)}b.wb=void 0}b.Bt=Date.now();c||void 0===b.stream?e():Qu(b.stream.getTracks()).then(function(){b.stream=void 0;e()})})};k.wn=function(a){void 0===this.stream?u("no stream"):0<this.stream.getAudioTracks().length&&(this.stream.getAudioTracks()[0].enabled=!a)};k.reset=function(){var a=this;return new Promise(function(b,c){var d=a.cg;a.stop().then(function(){void 0!==a.ib?a.zn(a.ib).then(function(){d?a.start().then(function(){b()}).catch(function(e){c(e)}):b()}).catch(function(e){c(e)}):b()}).catch(function(e){c(e)})})};k.close=function(){this.closed=!0;void 0!==this.Xq&&(clearInterval(this.Xq),this.Xq=void 0)};function pv(a){if(!0===a.closed)a.stop().then();else{var b=Date.now();if(a.Bp<b-1E4){a.Bp=b;if(void 0!==uv){a.stop().then();return}C("WebRTCHandlerRestart");a.stop(!0).then(function(){y("api/switch_origin/?current_origin="+a.C.au).then(function(c){a.C.au=c.responseText;a.start().catch(function(d){u("Could not restart stream: "+d.message)})}).catch(function(c){u("Could not get new origin: "+c.message)})})}b=a.OE;void 0===a.ad&&(b={status:"connecting"});void 0!==b&&vv.h({kf:a.kf,data:b})}}
function qv(a){void 0===a.stream?u("no stream"):(void 0!==a.wb&&(u("peerConnection already open"),a.wb.close(),a.wb=void 0),a.wb=new RTCPeerConnection({iceServers:[]}),a.wb.onicecandidate=function(){},0<a.stream.getAudioTracks().length&&a.wb.addTrack(a.stream.getAudioTracks()[0],a.stream),a.wb.addTrack(a.stream.getVideoTracks()[0],a.stream),a.wb.createOffer().then(function(b){wv(a,b.sdp)}))}
function sv(a,b,c){void 0!==a.ad&&(u("WebSocket already open"),a.ad.close(),a.ad=void 0);var d=new WebSocket("wss://"+b.au+b.ID);d.binaryType="arraybuffer";d.onopen=function(){a.ad=d;d.send(JSON.stringify({method:"connect",username:b.B,password:b.HD}))};d.onerror=function(e){u("webrtc websocket error",{error:e});c(Error("WebSocket error: "+JSON.stringify(e)))};d.onclose=function(){a.ad=void 0};d.onmessage=function(e){try{var f=JSON.parse(e.data)}catch(g){return}switch(f.method){case "auth_valid":a.createOffer(c);break;case "stream_info":a.OE=f;a.Bp=Date.now();break;case "already_publishing":a.Bt=Date.now();J("You have started publishing from a new location, shutting down stream",function(){Mu.h("")});a.stop().then();break;case "shutdown":a.Bt<Date.now()-1E3&&J("Error Publishing Stream",function(){Mu.h("")});a.stop().then();break;case "origin_info":break;default:switch(f.command){case "sendOffer":xv(a,f,c);break;default:w("Unhandled",f)}}}}
k.createOffer=function(a){var b=this;void 0===this.ad?a(Error("ws undefined")):void 0===this.stream?a(Error("stream undefined")):(this.ad.send(JSON.stringify({method:"publish",width:this.Bh.width,height:this.Bh.height,frameRate:this.Bh.frameRate,source:this.source})),void 0===this.wb?u("peerConnection not open"):this.wb.createOffer().then(function(c){void 0===b.wb?u("peerConnection not open"):(c.sdp=wv(b,c.sdp),yv("gotDescription: "+JSON.stringify({sdp:c})+" "+b.wb),b.wb.setLocalDescription(c).then(function(){void 0===b.ad?a(Error("ws undefined")):b.ad.send(JSON.stringify({direction:"publish",command:"sendOffer",streamInfo:b.PE,sdp:c}))}).catch(function(d){a(d)}))}).catch(function(c){a(c)}))};function xv(a,b,c){if(void 0===a.wb)u("peerConnection not open");else{var d=b.sdp;void 0!==d&&null!==d&&a.wb.setRemoteDescription(d).catch(function(e){c(e)});b=b.iceCandidates;if(void 0!==b)for(b=q(b),d=b.next();!d.done;d=b.next())a.wb.addIceCandidate(new RTCIceCandidate(d.value)).catch(function(e){c(e)})}}
function wv(a,b){if(void 0===b)return u("sdpStr undefined"),"";b=new ev(b);cb()?gv(b,["H264"],["42e01f"]):gv(b,["H264","VP8"],["42e01f"]);var c=fv(b,a.Bh.height);void 0===c||a.Yv||(C("WebRTCHandlerSDPUpdate",{WebRTCHandlerVideoBitrate:c}),a.Yv=!0);return b=b.write()}var vv=new F("streamStatusUpdate"),rv=new F("streamStart"),tv=new F("streamStop");function zv(a,b,c){a=void 0===a?!0:a;b=void 0===b?function(){}:b;c=void 0===c?function(){}:c;Lj.call(this);pk(this.element,{position:"fixed",overflow:"hidden",height:"auto",maxWidth:"1000px",minWidth:"450px",width:"90%",top:"50%",transform:"translateY(-50%)",left:"0px",right:"0px",margin:"auto",padding:"20px",borderWidth:"2px",borderStyle:"solid",borderRadius:"20px"});H(this.element,"broadcastTermsModal");this.P.style.background="";a?(H(this.P,"blackOverlay"),this.bu=!0):(H(this.P,"transparentOverlay"),this.Sb.j(c));this.element.appendChild(this.Xi());this.element.appendChild(Av(this));this.element.appendChild(this.Rr(b))}r(zv,Lj);zv.prototype.Xi=function(){return N("div",{colorClass:"header"},N("h3",{style:{textAlign:"center"}},"WARNING:  THIS SITE HAS A ZERO TOLERANCE POLICY ON UNDERAGE BROADCASTING."))};function Av(a){var b={textDecoration:"underline",fontWeight:"bold"};a.body=N("div",{style:{height:"200px",overflow:"auto",padding:"0 15px 0 10px",borderWidth:"1px",borderStyle:"solid",margin:"0 auto",textAlign:"left"},colorClass:"body"},N("p",null,"The Chaturbate service is for use by adults only.  By clicking the link below, you are affirming your representation and warranty to us that:"),N("ol",null,N("li",null,'You are at least 18 years old or the age of majority in your jurisdiction, whichever is older (the "Age of Majority");'),N("li",null,"Anyone appearing on camera with you has also reached the Age of Majority;"),N("li",null,"At no time will anyone who has not reached the Age of Majority be present while you are using the Chaturbate service;"),N("li",null,"You will not permit anyone who has not reached the Age of Majority to use the Chaturbate service; and"),N("li",null,"You will immediately report by email to ",N("a",{href:"mailto:support@chaturbate.com"},"support@chaturbate.com")," any and all instances you become aware of wherein an individual has used the Chaturbate service without first reaching the Age of Majority.")),N("p",null,"If we suspect, in our sole discretion, that you are using the Chaturbate service without having complied in every respect with the foregoing statements, your account ",N("span",{style:b},"will")," be terminated immediately, and we ",N("span",{style:b},"will")," report your conduct to law enforcement."));return a.body}
zv.prototype.Rr=function(a){var b=this;return N("div",{style:{textAlign:"center",color:"#222"}},N("a",{style:{width:"200px",height:"30px",lineHeight:"30px",fontWeight:"bold",margin:"10px 5px 0px 5px",borderWidth:"1px",borderStyle:"solid",display:"inline-block",textAlign:"center",cursor:"pointer"},colorClass:"acceptLink",ref:function(c){b.HF=c},onClick:function(c){c.stopPropagation();b.D();zb("broadcast_terms","1",7);a()}},"I AGREE"))};function Bv(){this.algorithm=2;this.level=0}function Cv(a,b){var c=b.reduce(function(d,e){return d+e*e});a.level=Math.sqrt(c/b.length)}function Dv(a,b){var c=Number.MIN_SAFE_INTEGER;b.map(function(d){d>c&&(c=d);return d});0===b.length||0>c?c=0:1<c?c=1:a.level=c}
Bv.prototype.connect=function(a){var b=this;this.level=0;Na()&&(this.context="webkitAudioContext"in window?new webkitAudioContext:new AudioContext,this.vq=this.context.createScriptProcessor(2048,1,1),this.Ky=this.context.createMediaStreamSource(a),this.Ky.connect(this.vq),this.vq.connect(this.context.destination),this.vq.onaudioprocess=function(c){c=c.inputBuffer.getChannelData(0);1===b.algorithm?Cv(b,c):2===b.algorithm?Dv(b,c):u("invalid algorithm choice",b.algorithm)})};Bv.prototype.stop=function(){return Na()?(this.Ky.disconnect(),this.vq.disconnect(),this.context.close()):Promise.resolve()};var Ev=new F("privateJoinInitiated");function Fv(a){var b="tipping/private_show_tokens_per_minute/"+a+"/";return new Promise(function(c,d){y(b).then(function(e){e=new P(e.responseText);c({Ly:U(e,"private_show_minimum_minutes"),uz:W(e,"price"),Cz:V(e,"recordings_allowed"),qB:V(e,"allowed",!0,!1)});nm(e)}).catch(function(e){d(e)})})}
function Gv(a){Ev.h(void 0);Bq(Hg)||(C("RequestPrivateShow"),Fv(a.B()).then(function(b){if(b.qB){var c=Ic(a.B(),b.uz,b.Ly,b.Cz);sc(c,function(){Hv(a,b.uz,b.Ly,b.Cz).then(function(d){""!==d&&J(d)}).catch(function(d){"privatewatching"!==a.status&&(J(wg),u("Error entering private show: "+d))});C("StartPrivateShow")})}else J(Gg)}))}
function Iv(a){Ev.h(void 0);if(!Bq(Ig)){C("RequestSpyShow");var b="tipping/spy_on_private_show_tokens_per_minute/"+a.B()+"/";y(b).then(function(c){var d=Number(c.responseText);isNaN(d)?u("isNaN on "+c.responseText):0===d?J(Jg):sc(Ec(M("Spy on private show for (%(price)s tokens per minute)"),{price:d},!0),function(){Jv(a).then(function(e){""!==e&&J(e)}).catch(function(e){"privatespying"!==a.status&&(J(xg),u("Error entering spy show: "+e))});C("StartSpyShow")})})}}
function Kv(a,b){sc(zg,function(){C("LeavePrivateOrSpyShow");Lv(a).then(function(c){void 0!==b&&b();""!==c&&J(c)})},function(){void 0!==b&&b()})}function Mv(){B("tipping/private_show_approve/",{foo:"bar"}).then(function(){})}function Nv(){B("tipping/private_show_decline/",{foo:"bar"}).then(function(){})}function Ov(){B("tipping/return_from_away/",{foo:"bar"}).then(function(){})};var Pv=new F("anyRTCBroadcastStartStop"),Qv=new F("webRTCBroadcastStartStop"),Rv=new F("flashBroadcastStartStop"),Sv=new F("OBSBroadcastStartStop");function Tv(a){Pv.h(a)}Qv.j(Tv);Rv.j(Tv);Sv.j(Tv);var Uv=["public","private","hidden","away","connecting"];function Vv(a){var b=document.createElement("div");b.style.paddingLeft="10px";b.style.paddingTop="3px";b.style.fontSize="20px";b.textContent=a;return b}function Wv(a){a=Vv(a);a.style.paddingTop="10px";a.style.fontFamily="UbuntuRegular";a.style.fontSize="15px";return a}
function Xv(){var a=document.createElement("select");H(a,"select");a.style.width="177px";a.style.height="20px";a.style.marginLeft="10px";a.style.marginTop="10px";a.style.fontFamily="UbuntuRegular";a.style.fontSize="12px";a.style.borderWidth="1px";a.style.borderStyle="solid";a.style.borderRadius="4px";a.style.overflow="hidden";return a}
function Yv(){var a=document.createElement("video");a.autoplay=!0;a.muted=!0;a.setAttribute("playsinline","");a.oncontextmenu=function(b){b.preventDefault()};return a}function Zv(){this.so=!1;this.gv=void 0}
Zv.prototype.zn=function(a,b,c){var d=this,e={video:{deviceId:{exact:c.rk},width:{ideal:c.width}},frameRate:{min:24,max:30}};hb()?e.aspectRatio=1.777777778:e.video.height={ideal:c.height};"we-only-need-a-silent-mic"!==c.Nm&&(e.audio={deviceId:{exact:c.Nm}},e.audio.advanced=[{autoGainControl:!0},{noiseSuppression:!0}],Za()&&(e.audio.advanced.push({eH:!0}),e.audio.advanced.push({fH:!0}),e.audio.advanced.push({gH:!0})));this.Pd=new ov(b,a);this.kf=this.Pd.kf;return new Promise(function(f,g){void 0!==d.Pd&&d.Pd.zn(e).then(function(h){d.stream=h;void 0!==d.Pd&&d.Pd.wn(c.muted);f()}).catch(function(h){g(h)})})};Zv.prototype.stop=function(){var a=this;void 0===this.gv&&(this.gv=new Promise(function(b){function c(){a.Pd=void 0;a.stream=void 0;a.so=!1;b()}void 0!==a.Pd?a.Pd.stop().then(function(d){a.kf===d&&c()}):c()}));return this.gv};Zv.prototype.start=function(){var a=this;this.so=!1;if(void 0!==this.Pd){if(Qa&&!Lu(this.Pd.Bh.facingMode)){var b=ah;Ku()&&(b=bh);return Promise.reject(Error(b))}return new Promise(function(c,d){if(void 0!==a.Pd){var e=!1,f=function(h){void 0!==h&&h!==a.kf||!1!==e||(e=a.so=!0,rv.removeListener(g),c())},g=function(h){f(h)};rv.j(g);a.Pd.start().then(function(){f()}).catch(function(h){!0===h.fatal&&(rv.removeListener(g),d(h))})}})}return Promise.resolve()};Zv.prototype.wn=function(a){return void 0!==this.Pd&&void 0!==this.stream?(this.Pd.wn(a),!0):!1};function $v(a,b,c){G.call(this);this.videoWidth=268;this.C=a;this.config=c;this.ib=b;this.Iw();this.Ox=aw(this)}r($v,G);k=$v.prototype;k.start=function(){function a(){void 0!==b.Xa&&(uo(function(){b.Hn.disabled=!1}),b.video.style.height=Math.floor(b.videoWidth/b.aB)+"px",bw(b))}var b=this;this.stop().then(function(){b.Xa=new Zv;b.Xa.zn(b.video,b.C,b.ib).then(a).catch(function(c){Za()&&db()&&"Could not start video source"===c.message?a():J(rh+":\n"+c.message)})})};k.stop=function(){var a=this;this.Hn.disabled=!0;return cw(this).then(function(){return void 0!==a.Xa?a.Xa.stop():Promise.resolve()})};function cw(a){return new Promise(function(b){void 0!==a.br&&(a.br.style.width="0%");void 0!==a.Bl?a.Bl.stop().then(function(){clearInterval(a.AF);a.Bl=void 0;b()}):b()})}function bw(a){cw(a).then(function(){Na()&&void 0!==a.Xa&&void 0!==a.Xa.stream&&0<a.Xa.stream.getAudioTracks().length&&(a.Bl=new Bv,a.Bl.connect(a.Xa.stream),a.AF=window.setInterval(function(){void 0!==a.Bl&&void 0!==a.br&&(a.br.style.width=100*a.Bl.level+"%")}))})}
function dw(a,b){var c=a.Yw.Pl.get(a.ib.rk);void 0!==c&&(b=c.Nz.get(b.value),void 0!==b&&(a.ib.width=b.width,a.ib.height=b.height,a.aB=b.ratio,void 0!==a.Nx&&(a.Nx.style.visibility=b.gD?"visible":"hidden"),a.start()))}
function ew(a){var b=a.Yw.Pl.get(a.ib.rk);if(void 0!==b){for(var c=a.th.options.length-1;0<=c;--c)a.th.removeChild(a.th.options[c]);var d=xb("selected_res"),e=0,f=-1;b.Nz.forEach(function(g){var h=document.createElement("option");h.label=g.label;h.text=g.label;h.value=g.id;a.th.add(h);h.value===d&&(f=e);e+=1});-1===f&&(f=Math.floor(a.th.options.length/2));b=a.th.options[f];b.selected=!0;dw(a,b)}}
function fw(a){var b=a.Ol.selectedIndex;0<=b&&(b=a.Ol.options[b],a.ib.rk=b.value,zb("selected_cam",b.value,60),zb("selected_res","",0),ew(a))}function gw(a){var b=a.th.selectedIndex;0<=b&&(b=a.th.options[b],zb("selected_res",b.value,60),dw(a,b))}k.Iw=function(){H(this.element,"previewPanel");this.element.style.height="370px";this.element.style.width="488px";this.element.style.transform="translate(5px, 18.5px)";this.element.appendChild(this.am());this.element.appendChild(this.Fo());this.element.appendChild(this.ks())};k.am=function(){var a=document.createElement("div");H(a,"welcomeTitle");a.style.width="100%";a.style.height="32px";var b=document.createElement("span");b.style.paddingLeft="10px";b.style.verticalAlign="sub";b.style.lineHeight="32px";b.textContent=qh+", "+this.C.B;a.appendChild(b);return a};k.Fo=function(){var a=document.createElement("div");a.style.width="198px";a.style.cssFloat="left";a.style.height="318px";a.style.padding="10px 0 10px 0";a.appendChild(this.Fw());a.appendChild(this.Hw());this.getUserMedia();return a};k.getUserMedia=function(){var a=this;Su().then(function(b){a.Ox.style.display="none";a.Yw=b;if(0<b.Nt.size&&void 0!==a.Om){var c=document.createElement("option");c.label=hh;c.text=c.label;c.value="we-only-need-a-silent-mic";a.Om.add(c);var d=xb("selected_mic"),e=1,f=1;c.value===d&&(f=0);b.Nt.forEach(function(n){var p=document.createElement("option");p.label=n.label;p.text=n.label;p.value=n.id;void 0!==a.Om&&a.Om.add(p);p.value===d&&(f=e);e+=1});c=a.Om.options[f];c.selected=!0;a.ib.Nm=c.value}if(0<b.Pl.size){var g=xb("selected_cam"),h=0,m=0;b.Pl.forEach(function(n){var p=document.createElement("option");p.label=n.label;p.text=n.label;p.value=n.id;a.Ol.add(p);p.value===g&&(m=h);h+=1});b=a.Ol.options[m];b.selected=!0;a.ib.rk=b.value;ew(a)}}).catch(function(b){var c="",d="";null!==b.message&&void 0!==b.message?c="OverconstrainedError"===b.name||"NotFoundError"===b.name||"DevicesNotFoundError"===b.name?""+Qg:"PermissionDeniedError"===b.name||"NotAllowedError"===b.name?Rg+"<br/><br/>"+Tg:"NotReadableError"===b.name?b.message+". "+Vg:b.message:null!==b.name&&void 0!==b.name&&(c=b.name);""!==c&&(d=". ");J(""+$g+d+c,function(){a.Ox.style.display=""},!0)})};function aw(a){var b=document.createElement("div");H(b,"helpOverlay");b.style.fontSize="14px";b.style.fontFamily="UbuntuRegular";b.style.display="none";b.style.width="280px";b.style.fontWeight="bold";b.style.borderRadius="6px";b.style.textAlign="center";b.style.padding="8px";b.style.position="absolute";b.style.top="25%";b.style.left="50%";b.style.transform="translateX(-50%)";b.style.border="2px solid #444";b.style.boxShadow="rgba(0, 0, 0, 0.25) 0px 14px 28px, rgba(0, 0, 0, 0.22) 0px 10px 10px";b.innerHTML=Sg+"<br/><br/>"+Tg;var c=document.createElement("button");c.style.display="none";c.style.margin="10px auto 0";c.style.cursor="pointer";c.innerText=Ug;c.onclick=function(){a.getUserMedia()};b.appendChild(c);Ru.j(function(){c.style.display="block"});a.element.appendChild(b);return b}
k.Fw=function(){var a=this,b=document.createElement("div");H(b,"settingsPanel");b.style.width="100%";b.style.height="158px";b.style.marginBottom="5px";b.style.borderWidth="1px";b.style.borderStyle="solid";b.style.boxSizing="border-box";var c=Vv(ch);c.style.lineHeight="28px";c.style.paddingTop="8px";b.appendChild(c);c=Xv();c.style.marginTop="8px";c.style.height="32px";b.appendChild(c);var d=Wv(dh);d.style.marginTop="16px";d.style.fontSize="12px";d.style.paddingTop="0";b.appendChild(d);d=Xv();d.style.marginTop="5px";d.style.height="32px";b.appendChild(d);c.onchange=function(){fw(a)};d.onchange=function(){gw(a)};this.Ol=c;this.th=d;return b};k.Hw=function(){function a(p){if(void 0!==b.Xa){if(!b.Xa.wn(p))return!1}else return!1;p?Nq(m,!0):Nq(m,!1);zb("broadcast_muted",String(p),60);return!0}var b=this,c=document.createElement("div");H(c,"settingsPanel");c.style.width="100%";c.style.height="162px";c.style.paddingTop="8px";c.style.borderWidth="1px";c.style.borderStyle="solid";c.style.boxSizing="border-box";var d=Vv(eh);d.style.lineHeight="28px";c.appendChild(d);var e=Xv();c.appendChild(e);e.style.marginTop="8px";e.style.height="32px";e.onchange=function(){var p=e.selectedIndex;0<=p&&(p=e.options[p],b.ib.Nm=p.value,zb("selected_mic",p.value,60),b.start())};if(d=Na()){var f=document.createElement("div"),g=Wv(fh+":");g.style.fontSize="16px";g.style.paddingTop="16px";g.style.paddingLeft="8px";g.style.display="inline-block";f.appendChild(g);g=document.createElement("div");H(g,"inputLevelBar");g.style.width="82px";g.style.margin="23px 8px 0 10px";g.style.borderWidth="1px";g.style.borderStyle="solid";g.style.display="inline-block";g.style.height="7px";var h=document.createElement("div");h.style.width="78px";h.style.height="7px";h.style.width="0%";h.style.backgroundColor="lightgreen";this.br=h;g.appendChild(h);f.appendChild(g);c.appendChild(f)}f=document.createElement("div");var m=new Pq(16,!1,function(){var p=!b.ib.muted;a(p)&&(b.ib.muted=p)});m.Ha.value="Mute";m.element.id="mutebox";m.element.style.marginTop="8px";m.element.style.marginLeft="8px";m.disable();var n=window.setInterval(function(){a(b.ib.muted)&&(m.enable(),clearInterval(n))},200);f.appendChild(m.element);g=document.createElement("label");g.textContent=gh;g.htmlFor="mutebox";g.style.paddingLeft="5px";g.style.transform="translateY(-4px)";g.style.fontFamily="UbuntuRegular";g.style.fontSize="14px";g.style.display="inline-block";g.style.lineHeight="22px";f.appendChild(g);d||(m.element.style.marginTop="100px",g.style.marginTop="70px");c.appendChild(f);this.Om=e;return c};k.ks=function(){var a=document.createElement("div");a.style.width="289px";a.style.cssFloat="left";a.style.height="318px";a.style.padding="10px 0 10px 0";var b=Yv();b.style.width=this.videoWidth+"px";b.style.height="150px";b.style.marginLeft="10px";b.style.marginRight="10px";b.style.backgroundColor="black";a.appendChild(b);this.video=b;b=document.createElement("div");H(b,"hdLabel");b.style.fontSize="24px";b.style.fontFamily="UbuntuBold";b.style.marginLeft="10px";b.style.marginTop="10px";b.textContent="HD";b.style.visibility="hidden";this.Nx=b;a.appendChild(b);a.appendChild(this.gs());b=Wv(lh+":");b.style.fontSize="11px";b.style.paddingLeft="0";b.style.paddingTop="5px";b.style.textAlign="center";a.appendChild(b);b=document.createElement("div");b.style.textAlign="center";var c=document.createElement("a");H(c,"hrefColor");c.style.fontSize="12px";c.text=mh;c.style.cursor="pointer";b.appendChild(c);a.appendChild(b);c.onclick=function(){};return a};k.gs=function(){var a=this,b=document.createElement("div");b.style.textAlign="center";var c=document.createElement("button");H(c,"button");c.style.marginTop="75px";c.style.width="268px";c.style.height="32px";c.style.borderStyle="solid";c.style.borderWidth="1px";c.style.borderRadius="4px";c.style.fontWeight="normal";c.style.fontSize="14px";c.textContent=ih;c.style.fontFamily="UbuntuBold";c.style.cursor="pointer";b.appendChild(c);c.disabled=!0;c.onclick=function(){a.Fq()};this.Hn=c;return b};k.Fq=function(){var a=this;to().then(function(b){""!==b?(J(cd(b)),a.Hn.disabled=!0,uo(function(){a.Hn.disabled=!1})):a.stop().then(function(){a.config.Zp()})})};function hw(a,b,c){$v.call(this,a,b,c)}r(hw,$v);k=hw.prototype;k.stop=function(){return $v.prototype.stop.call(this)};k.start=function(){$v.prototype.start.call(this)};k.Iw=function(){this.element.style.width="402px";this.element.style.backgroundColor="transparent";this.element.style.position="relative";this.element.appendChild(this.am());var a=this.element,b=a.appendChild,c=document.createElement("div");c.style.display="inline-block";c.style.position="relative";c.style.right="-1px";c.style.width=c.style.height="17px";c.style.cssFloat="right";c.style.cursor="pointer";c.onclick=this.config.Hg;var d=document.createElement("img");d.src="https://static-assets.highwebmedia.com/tsdefaultassets/close-gray.svg";d.style.width=d.style.height="100%";c.appendChild(d);b.call(a,c);this.element.appendChild(this.ks());a=this.element;b=a.appendChild;c=document.createElement("div");c.style.backgroundColor="#FFFFD8";c.style.marginTop="6px";c.style.padding="6px 5px 9px 4px";c.style.border="1px solid #CCCCCC";c.style.boxSizing="border-box";var e;d=q(this.config.$C);for(e=d.next();!e.done;e=d.next()){e=e.value;var f=document.createElement("div");f.style.fontFamily="UbuntuRegular";f.style.fontStyle="normal";f.style.fontWeight="bold";f.style.fontSize="12px";f.style.lineHeight="14px";f.style.textAlign="center";f.style.color="#494949";f.textContent=e;c.appendChild(f)}b.call(a,c);this.element.appendChild(this.Fo());this.element.appendChild(this.gs())};k.am=function(){var a=document.createElement("div");a.style.width="200px";a.style.height="26px";a.style.display="inline-block";var b=document.createElement("div");H(b,"title");b.style.fontFamily="UbuntuBold";b.style.fontSize="18px";b.textContent=this.config.title;a.appendChild(b);return a};k.ks=function(){this.videoWidth=400;var a=document.createElement("div");a.style.textAlign="center";var b=Yv();b.style.width=this.videoWidth+"px";b.style.height=this.videoWidth/this.aB+"px";b.style.backgroundColor="#000";a.appendChild(b);this.video=b;return a};k.Fo=function(){var a=$v.prototype.Fo.call(this);a.style.width="100%";a.style.height="auto";a.style.padding="9px 0px 0px 0px";a.style.cssFloat="";return a};k.Fw=function(){var a=this,b=document.createElement("div");b.style.width="100%";b.style.height="68px";b.style.paddingTop="5px";b.style.border="2px solid #BFBFBF";b.style.boxSizing="border-box";var c=document.createElement("div");c.style.display="inline-block";var d=iw(ch),e=Xv();e.style.marginLeft="8px";e.style.marginTop="8px";e.style.borderColor="#BCBCBC";c.appendChild(d);c.appendChild(e);d=document.createElement("div");d.style.display="inline-block";d.style.paddingLeft="16px";var f=iw(dh);f.style.paddingLeft="10px";var g=Xv();g.style.marginTop="8px";g.style.borderColor="#BCBCBC";d.appendChild(f);d.appendChild(g);b.appendChild(c);b.appendChild(d);e.onchange=function(){fw(a)};g.onchange=function(){gw(a)};this.Ol=e;this.th=g;return b};k.Hw=function(){this.ib.Nm="we-only-need-a-silent-mic";var a=document.createElement("div");a.style.display="none";return a};k.gs=function(){var a=this,b=document.createElement("div");b.style.textAlign="center";b.style.paddingTop="10px";var c=document.createElement("button");H(c,"startButton");c.style.width="305px";c.style.height="27px";c.style.backgroundColor="linear-gradient(180deg, #E4E4E4 0%, #F6F6F6 100%)";c.style.borderWidth="1px";c.style.borderStyle="solid";c.style.borderRadius="4px";c.style.backgroundColor="#F47321";c.style.borderColor="#CD5D26";c.style.color="#FFFFFF";c.textContent=this.config.ME;c.style.fontFamily="UbuntuBold";c.style.fontSize="16px";c.style.cursor="pointer";c.style.whiteSpace="nowrap";c.style.overflow="hidden";c.style.textOverflow="ellipsis";b.appendChild(c);c.disabled=!0;c.onclick=function(){c.disabled=!0;a.Fq()};this.Hn=c;return b};function iw(a){var b=document.createElement("div");b.style.paddingLeft="8px";b.style.paddingTop="3px";b.style.fontSize="16px";b.style.fontFamily="UbuntuBold";b.textContent=a;return b}
function jw(a,b,c){function d(){var p=performance.now(),A=window.setInterval(function(){if(n){var z=performance.now(),D=Math.floor((z-p)/1E3);1>D||(10<=D&&(p=z),void 0!==f.pm&&(f.pm.textContent=""),void 0!==f.status&&(f.status.textContent=oh+" "+(10-D+1)+"..."))}else clearInterval(A)},200)}function e(p,A){void 0!==f.status&&void 0!==f.cr&&(!0!==A||h?!0!==A&&h&&(f.status.style.color="black",f.status.style.fontFamily="UbuntuRegular",f.status.style.width="",f.status.style.paddingLeft="0px",f.status.style.cssFloat="none",f.status.title="",f.cr.style.display="none",h=!1):(h=!0,f.status.style.color="#D80000",f.status.style.fontFamily="UbuntuBold",f.status.style.width="28%",f.status.style.paddingLeft="18%",f.status.style.cssFloat="left",f.status.title=f.cr.title=Pg,f.cr.style.display=""),f.status.textContent=p)}G.call(this);var f=this;this.hv=!1;this.HA=0;this.C=a;this.config=c;this.ib=b;this.Ew();var g=!1,h=!1,m=!1,n=!0;d();this.ez=function(p){if(void 0!==f.Xa&&f.Xa.kf===p.kf){p=p.data;if(void 0!==p.fps){var A=p.fps,z=20,D=15;hb()&&(z=12,D=9);var la=!0;A=Math.round(A);A>=z?z="green":A>=D?z="black":(z="#B62519",la=!1);void 0!==f.pm&&(f.pm.textContent=A+" FPS",f.pm.style.color=z);g=la?!1:!0}void 0!==p.status&&(p=p.status,"connecting"!==p&&(n=!1),kw(p)?e("(Offline)"):"away"!==p||m?"away"!==p&&m?(void 0!==f.po&&(f.po.style.display="none"),f.Ma.style.display="",m=!1):(A=p.charAt(0).toUpperCase()+p.slice(1),"connecting"===p?n||(n=!0,d()):g&&0<f.HA&&5E3<performance.now()-f.HA?e(Wg,!0):e("("+A+" Broadcasting)")):(f.Ma.style.display="none",void 0!==f.po&&(f.po.style.display=""),m=!0))}};this.fz=function(p){void 0===f.Xa||f.Xa.kf!==p||f.hv||f.stop(!0).then()};vv.j(this.ez);tv.j(this.fz);this.start()}r(jw,G);k=jw.prototype;k.Ew=function(){var a=this.Zr();a.appendChild(this.Ho());a.appendChild(this.Tr());var b=document.createElement("div");b.style.height="370px";b.style.backgroundColor="lightgrey";b.style.width="100%";b.style.backgroundColor="black";b.style.display="none";b.appendChild(this.am());var c=b.appendChild,d=document.createElement("div");d.style.textAlign="center";d.style.paddingLeft="16%";d.style.paddingRight="16%";d.style.paddingTop="50px";var e=document.createElement("span");H(e,"inBrowserAwayMessage");e.style.fontFamily="UbuntuRegular";e.style.fontSize="14px";e.textContent=Yg;d.appendChild(e);c.call(b,d);b.appendChild(this.og());this.element.appendChild(a);this.element.appendChild(b);this.Ma=a;this.po=b};k.Qb=function(){return void 0!==this.Xa?this.Xa.so:!1};k.start=function(){var a=this;this.stop().then(function(){function b(d,e){a.Xa=new Zv;a.Xa.zn(a.video,a.C,a.ib).then(function(){void 0!==a.Xa&&a.Xa.start().then(function(){a.Up=function(f){f.preventDefault();f.returnValue=!1;return Xg};v("beforeunload",window,a.Up);a.Aj=function(){a.stop(!0).then()};v(lb(),window,a.Aj);Qv.h(!0);d()}).catch(function(f){e(ph+": "+f.message)})}).catch(function(f){if(eb()&&"Invalid constraint"===f.message){c+=1;if(5>=c){a.stop().then(function(){window.setTimeout(function(){b(d,e)},500)});return}e(Og)}e(sh+": "+f.message)})}var c=0;(new Promise(b)).catch(function(d){J(d);a.stop(!0).then()})})};k.stop=function(a){var b=this;this.hv=!0;void 0!==this.Up&&(x("beforeunload",window,this.Up),this.Up=void 0);void 0!==this.Aj&&(x(lb(),window,this.Aj),this.Aj=void 0);var c=Promise.resolve();void 0!==this.Xa&&(c=this.Xa.stop());!0===a&&zb("last_broadcast_dt",Date.now().toString(10),1);return new Promise(function(d){c.then(function(){b.hv=!1;!0===a&&(vv.removeListener(b.ez),tv.removeListener(b.fz),b.config.zj(),Qv.h(!1));d()})})};k.Zr=function(){var a=document.createElement("div");a.style.height="370px";a.style.backgroundColor="lightgrey";a.style.width="100%";a.style.overflow="unset";return a};k.Ho=function(){var a=Yv();a.style.width="100%";a.style.height="370px";a.style.backgroundColor="black";return this.video=a};k.Tr=function(){function a(p){if(void 0!==b.Xa){if(!b.Xa.wn(p))return!1}else return!1;e.src=p?"https://static-assets.highwebmedia.com/broadcastassets/mic-muted.svg":"https://static-assets.highwebmedia.com/broadcastassets/mic2.svg";zb("broadcast_muted",String(p),60);return!0}var b=this,c=document.createElement("div");c.style.width="100%";c.style.height="35px";c.style.backgroundColor="lightgrey";var d=document.createElement("button");d.style.backgroundColor="lightgrey";d.style.border="0px";var e=document.createElement("input");e.type="image";e.src="https://static-assets.highwebmedia.com/broadcastassets/mic2.svg";e.style.height="30px";e.textContent="";e.style.height="20px";e.style.border="0px";e.style.backgroundColor="lightgrey";e.style.paddingTop="7px";ab()&&!hb()&&(e.style.paddingTop="2px");e.style.outline="none";d.appendChild(e);var f=document.createElement("div");f.style.cssFloat="left";f.style.textAlign="center";f.style.height="34px";f.style.borderRight="1px solid black";f.style.width="10%";cb()&&ab()&&(f.style.width="12%");f.appendChild(d);c.appendChild(f);d.onclick=function(){var p=!b.ib.muted;a(p)&&(b.ib.muted=p)};d.disabled=!0;var g=window.setInterval(function(){a(b.ib.muted)&&(d.disabled=!1,clearInterval(g))},200);f=document.createElement("div");H(f,"inBrowserStatus");f.style.cssFloat="left";f.style.textAlign="center";f.style.height="34px";f.style.width="51%";cb()&&ab()&&(f.style.width="44%");f.style.borderRight="1px solid black";f.style.padding="0px";f.style.fontFamily="UbuntuRegular";var h=Vv("");h.style.cssFloat="left";h.style.paddingLeft="5px";h.style.paddingTop="10px";var m=Wv("");m.style.paddingLeft="0px";var n=document.createElement("img");n.src="https://static-assets.highwebmedia.com/broadcastassets/warning.png";n.style.height="16px";n.style.paddingTop="9px";n.style.paddingLeft="5px";n.style.display="none";n.style.cssFloat="left";f.appendChild(h);f.appendChild(m);f.appendChild(n);this.pm=h;this.status=m;this.cr=n;c.appendChild(f);f=document.createElement("button");h=document.createElement("input");h.type="image";h.src="https://static-assets.highwebmedia.com/broadcastassets/stop.svg";h.style.verticalAlign="middle";h.style.height="16px";h.style.paddingTop="1px";f.appendChild(h);h=document.createElement("span");h.style.fontFamily="UbuntuRegular";h.style.fontSize="18px";h.textContent=h.innerText=jh;h.style.paddingLeft="7px";h.style.verticalAlign="middle";f.appendChild(h);f.style.backgroundColor="lightgrey";f.style.paddingTop="5px";f.style.cssFloat="right";f.style.border="0";h=document.createElement("div");h.style.cssFloat="left";h.style.textAlign="center";h.style.height="34px";h.appendChild(f);c.appendChild(h);f.onclick=function(){b.stop(!0).then()};return c};k.am=function(){var a=document.createElement("div");a.style.textAlign="center";a.style.paddingTop="90px";var b=document.createElement("span");H(b,"awayTitle");b.textContent=kh;b.style.fontFamily="UbuntuRegular";b.style.fontSize="40px";a.appendChild(b);return a};k.og=function(){var a=document.createElement("div");a.style.textAlign="center";a.style.paddingTop="35px";var b=document.createElement("a");H(b,"awayLink");b.text=Zg;b.style.fontFamily="UbuntuRegular";b.style.fontSize="20px";b.style.cursor="pointer";b.style.textDecoration="underline";a.appendChild(b);b.onclick=function(){Ov()};return a};function kw(a){return!Uv.some(function(b){return b===a})};var lw={username:"",yb:!0,Ec:!1,je:!1,fc:!1,ff:!1,fg:!1,gf:!1,Fb:"",wc:"df"},uv,mw;v("pageshow",window,function(a){a.persisted&&void 0!==mw&&nw(mw).then()});[].push(function(){return new Promise(function(a,b){void 0!==mw&&mw.Qb()?sc(Lh,function(){void 0!==mw?a(nw(mw)):a()},b):a()})});var ow=new F("showMyCamDidNotStart");function pw(a,b,c){if(!mb()||kb()||$a())return!1;var d;K.j(function(e){void 0!==mw&&e.A.B()!==mw.uh.B()&&(qw(),mw=void 0);if(e.A.Ce)b.h(function(){Jq.h(!1)});else{void 0===mw&&(mw=new rw(e.A,a));var f=function(){c.h("starting");b.h(function(){});void 0!==d&&d.removeListener();d=ow.j(function(){c.h("stopped");b.h(f)},!1);y("api/ts/chat/can-share-cam/"+e.C.B+"/").then(function(g){g=new P(g.responseText);V(g,"can_share")&&0===em(g,"shared_cam").length?void 0!==mw&&sw():(V(g,"is_grey")?sc(Dh,function(){C("SharedCamPurchaseTokensClicked");nj("/tipping/purchase_tokens/","_blank","height=615, width=850")}):V(g,"is_private")?J(Ch):0<em(g,"shared_cam").length?(J(wh),C("SharedCamAlreadySharing")):J(T(g,"message")),ow.h(void 0))})};mw.Zp.push(function(){c.h("started");b.h(function(){C("SharedCamBroadcastStopClicked");void 0!==mw&&nw(mw,!0)})});mw.zj.push(function(){c.h("inactiveStopped");b.h(function(){var g=Ec(M("Please allow up to %(sec)s seconds before sharing your cam again."),{sec:5},!0);J(g)});window.setTimeout(function(){c.h("stopped");b.h(function(){f()})},5E3)});b.h(function(){f()})}});return!0}
function tw(a,b){var c=new F("requestChangeClickListener"),d=new F("showMyCamStateChanged");c.j(function(e){a.onclick=e});d.j(function(e){switch(e){case "starting":a.textContent=uh;a.style.opacity="0.5";a.style.cursor="default";break;case "started":a.textContent=vh;a.style.opacity="1";a.style.cursor="pointer";break;case "inactiveStopped":a.textContent=uh;a.style.opacity="0.5";a.style.cursor="default";break;case "stopped":a.textContent=uh,a.style.opacity="1",a.style.cursor="pointer"}});return pw(b,c,d)}
function rw(a,b){var c=this;this.Zp=[];this.zj=[];this.I=new Ub;this.Fq=function(){void 0!==c.gn&&c.gn.D();C("SharedCamBroadcastStartClicked");if(c.uq||c.yo)J(Bh),ow.h(void 0);else{var d=c.zj;c.zj=[];nw(c).then(function(){c.zj=d;var e=!1,f=window.setTimeout(function(){void 0!==c.uf&&uw(c.uf).then();C("SharedCamBroadcastStartTimedOut");J(Ah);u("smcViewer - timeout starting cam");e=!0},2E4);B("api/ts/chat/share-my-cam/",{username:c.uh.B()}).then(function(){if(!e){c.uf=new vw(c.hw,c.ib,c.DB,c.uh,f);c.uf.Yu();v(mc(),document,c.uf.Yu);for(var g=q(c.Zp),h=g.next();!h.done;h=g.next())h=h.value,h()}}).catch(function(){e||(J(zh),ow.h(void 0))})})}};this.DB=function(){void 0!==c.uf&&(x(mc(),document,c.uf.Yu),c.uf.dm&&c.uh.event.Ga.h({na:[[Rn(Object.assign(lw,{username:c.uh.B()})),X(Fh)]],xa:!0}));c.uf=void 0;for(var d=q(c.zj),e=d.next();!e.done;e=d.next())e=e.value,e()};this.uh=a;this.ib={Nm:"",rk:"",width:0,height:0,muted:!0};this.uq=!0;E(b.j(function(d){(c.uq=d)&&nw(c).then()},!1),this.I);this.yo=!0;E(a.event.kc.j(function(d){c.yo="notconnected"===d.Ra;switch(d.Ra){case "privatenotwatching":case "privatespying":case "passwordprotected":case "notconnected":nw(c).then()}}),this.I)}function sw(){var a=mw;C("SharedCamStartClicked");a.uq||a.yo?(J(Bh),ow.h(void 0)):so(a.uh.username()).then(function(b){b?(J(wh),ow.h(void 0)):"1"===yb("broadcast_terms")?ww(a):(new zv(!1,function(){ww(a)},function(){ow.h(void 0)})).show()})}
function nw(a,b){return void 0!==a.uf?uw(a.uf,void 0===b?!1:b):Promise.resolve()}function qw(){var a=mw;nw(a).then();Vb(a.I)}function ww(a){a.uq||a.yo?(J(Bh),ow.h(void 0)):Hu().then(function(b){a.hw=b;void 0!==a.gn&&a.gn.D();a.gn=new xw(a.hw,a.ib,a.Fq,a.uh.B());a.gn.show()})}rw.prototype.Qb=function(){return void 0!==this.uf};function xw(a,b,c,d){Lj.call(this);var e=this;this.paused=!1;this.iq=!0;this.P.style.backgroundColor="rgba(0, 0, 0, 0.4)";H(this.element,"smc-preview-modal");this.element.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.3)";this.element.style.position="fixed";this.element.style.overflow="hidden";this.element.style.height="auto";this.element.style.width="422px";this.element.style.top="50%";this.element.style.left="50%";this.element.style.transform="translate(-50%, -56%)";this.element.style.borderRadius="6px";this.ku=new hw(a,b,{zI:function(){},Zp:c,title:th,$C:[xh,yh],ME:bd(d),Hg:function(){ow.h(void 0);e.D()}});this.element.style.padding="8px 10px";this.element.style.boxSizing="border-box";this.Sb.j(function(){ow.h(void 0);e.D()});this.J(this.ku)}r(xw,Lj);xw.prototype.show=function(){this.paused&&this.ku.start();Lj.prototype.show.call(this);C("SharedCamPreviewDisplayed")};xw.prototype.D=function(){Lj.prototype.D.call(this);this.ku.stop().then();this.paused=!0};function vw(a,b,c,d,e){jw.call(this,a,b,{zj:function(){Ib("api/ts/chat/share-my-cam/?",{username:f.nn}).then();null!==f.element.parentElement&&f.element.parentElement.removeChild(f.element);Vb(f.I);uv=void 0;c()}});var f=this;this.uh=d;this.dm=!1;this.I=new Ub;this.right=this.bottom=16;this.Ck=32;this.Dk=0;this.Lo=new Map;this.Yu=function(){var h=lc();oc()&&void 0!==h?(h.appendChild(f.element),f.Ma.style.bottom=f.Ck+"px",f.Ma.style.right=f.Dk+"px"):(document.body.appendChild(f.element),f.Ma.style.bottom=f.bottom+"px",f.Ma.style.right=f.right+"px")};this.nn=d.B();yw(this);this.element.style.height="auto";this.element.style.width="auto";this.Ma=this.Zr();this.Ma.appendChild(zw(this));this.Ma.appendChild(this.Ho());this.Ma.appendChild(this.Tr());this.element.appendChild(this.Ma);Aw(this);Bk.j(function(){oc()?(f.Ma.style.bottom=Bw(f,f.Ck)+"px",f.Ma.style.right=Cw(f,f.Dk)+"px"):(f.Ma.style.bottom=Bw(f,f.bottom)+"px",f.Ma.style.right=Cw(f,f.right)+"px")});var g=!0;E(vv.j(function(h){h=h.data.status;"connecting"!==h&&g&&"hidden"===h?(clearTimeout(e),g=!1,Dw(f)):!g&&kw(h)&&(uw(f).then(),J(zh),u("smcViewer - cam went offline"))},!1),this.I)}r(vw,jw);function Dw(a){C("SharedCamBroadcastStarted");uv=a.nn;E(So.j(function(b){Ew(a,!0,b)},!1),a.I);E(To.j(function(b){Ew(a,!1,b)},!1),a.I)}function uw(a,b){b=void 0===b?!1:b;v("mouseenter",a.element,function(c){c.stopPropagation()},!0);v("mouseleave",a.element,function(c){c.stopPropagation()},!0);b&&C("SharedCamBroadcastStopClicked",{tH:a.dm});return a.stop(!0)}
function Ew(a,b,c){a.dm=b;if(b){if(!a.Lo.has(c.username)){a.Vj.src="https://static-assets.highwebmedia.com/broadcastassets/active-cam-overlaying-video.svg";a.xA.textContent=a.nn+" "+Gh;a.Lo.set(c.username,c);var d=Eh}}else a.Lo.has(c.username)&&(a.Vj.src="https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg",a.xA.textContent=a.nn+" "+Hh,a.Lo.delete(c.username),d=Fh);void 0!==d&&a.uh.event.Ga.h({na:[[Rn(Object.assign(lw,{username:c.username})),X(d)]],xa:!0})}
vw.prototype.Ew=function(){};vw.prototype.Zr=function(){var a=document.createElement("div");a.style.height="117px";a.style.width=117*this.ib.width/this.ib.height+"px";a.style.backgroundColor="#000";a.style.position="fixed";a.style.zIndex="1002";a.style.border="1px solid #FFF";return a};function zw(a){var b=document.createElement("div");b.style.position="absolute";b.style.right="5px";b.style.top="5px";b.style.width=b.style.height="15px";b.style.zIndex="1004";var c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg";var d=document.createElement("div");d.style.position="absolute";d.style.backgroundColor="#303030";d.style.border="1px solid #222222";d.style.color="#EEE";d.style.width="175px";d.style.padding="9px";d.style.borderRadius="4px";d.style.fontSize="12px";d.style.display="none";d.style.zIndex="5";d.style.bottom="25px";d.style.left="-168px";var e=document.createElement("span");e.textContent=a.nn+" "+Hh;d.appendChild(e);d.appendChild(Qj("#222222","#303030","168px",2));b.appendChild(c);b.appendChild(d);a.Vj=c;a.Hq=d;a.xA=e;return b}vw.prototype.Ho=function(){var a=jw.prototype.Ho.call(this);a.style.height="100%";return a};vw.prototype.Tr=function(){var a=this,b=qo(),c=document.createElement("div");c.style.width="100%";c.style.height="26px";c.style.backgroundColor="rgba(0, 0, 0, 0.4)";c.style.cursor="move";Fw(this,c);var d=document.createElement("div");d.style.paddingLeft="10px";d.style.position="relative";d.style.top="50%";d.style.transform="translateY(-50%)";d.style.color="#FFF";d.style.cursor="default";d.textContent=Kh;d.style.cursor="move";Fw(this,d);c.appendChild(d);b.appendChild(c);c=ro({$x:"broadcastassets/volume-mute-grey.svg",Id:Ih,ft:31,nw:"60%"});c.style.left="50%";c.style.transform="translateX(calc(-50% - 30px))";b.appendChild(c);c=ro({$x:"broadcastassets/close.svg",Id:Jh,ft:23,nw:"60%",onClick:function(){uw(a,!0).then()}});c.style.left="50%";c.style.transform="translateX(calc(-50% + 30px))";b.appendChild(c);return this.controls=b};function Aw(a){function b(){a.controls.style.display="none";a.Vj.src=a.dm?"https://static-assets.highwebmedia.com/broadcastassets/active-cam-overlaying-video.svg":"https://static-assets.highwebmedia.com/broadcastassets/inactive-cam-overlaying-video.svg"}function c(){a.controls.style.display="block";a.Vj.src=a.dm?"https://static-assets.highwebmedia.com/broadcastassets/active-cam.svg":"https://static-assets.highwebmedia.com/broadcastassets/inactive-cam.svg"}v("mouseenter",a.Ma,c);v("mouseleave",a.Ma,b);var d=0;v("touchstart",a.Ma,function(){"none"===a.controls.style.display?(c(),d=1):d+=1});v("touchend",a.Ma,function(){1<d&&b()});v("touchstart",document,function(e){a.element.contains(e.target)||b()});v("mouseenter",a.Vj,function(){a.Hq.style.display="block"});v("mouseleave",a.Vj,function(){a.Hq.style.display="none"});v("touchstart",a.Vj,function(){a.Hq.style.display="block"});v("touchstart",document,function(){a.Hq.style.display="none"},!0)}
function Fw(a,b){Ap(b,function(c,d,e){var f=Cw(a,oc()?a.Dk:a.right),g=Bw(a,oc()?a.Ck:a.bottom),h=f,m=g;return{enabled:!0,move:function(n,p){n-=d;m=Bw(a,g-(p-e));h=Cw(a,f-n);a.Ma.style.bottom=m+"px";a.Ma.style.right=h+"px"},end:function(){oc()?(a.Dk=h,a.Ck=m):(a.right=h,a.bottom=m);t()&&window.localStorage.setItem("smcBroadcastSettings",JSON.stringify({bottom:a.bottom,right:a.right,fullscreenBottom:a.Ck,fullscreenRight:a.Dk}))}}})}
function Bw(a,b){return Math.max(0,Math.min(window.innerHeight-a.Ma.offsetHeight,b))}function Cw(a,b){return Math.max(0,Math.min(window.innerWidth-a.Ma.offsetWidth,b))}function yw(a){if(t()){var b=window.localStorage.getItem("smcBroadcastSettings");null!==b&&(b=JSON.parse(b),a.bottom=b.bottom,a.right=b.right,a.Ck=b.fullscreenBottom,a.Dk=b.fullscreenRight)}};function Gw(a,b,c){this.red=a;this.green=b;this.blue=c;this.ro=this.Yo=this.lq=10}function Hw(a,b){var c=void 0===c?!1:c;for(b=Math.min(255,b);b>a.brightness()&&(!c||255!==a.red&&255!==a.green&&255!==a.blue);)a.red=Math.min(a.red+Math.max(1,.05*a.red),255),a.green=Math.min(a.green+Math.max(1,.05*a.green),255),a.blue=Math.min(a.blue+Math.max(1,.05*a.blue),255);a.red=Math.round(a.red);a.green=Math.round(a.green);a.blue=Math.round(a.blue)}
Gw.prototype.brightness=function(){return Math.round(this.lq/(this.lq+this.Yo+this.ro)*this.red+this.Yo/(this.lq+this.Yo+this.ro)*this.green+this.ro/(this.lq+this.Yo+this.ro)*this.blue)};function Iw(){var a=document.createElement("div");a.style.width="100%";a.style.display="inline-block";a.style.padding="2px";return a}
function Jw(){var a=void 0===a?"":a;var b=document.createElement("div");b.style.fontFamily="Tahoma,Arial,Helvetica,sans-serif";b.style.boxSizing="border-box";b.style.width="100%";b.style.paddingTop="3px";b.style.paddingBottom="3px";b.style.paddingLeft="5px";b.style.paddingRight="5px";b.style.fontSize="12px";b.style.overflowX="hidden";0<a.length&&b.setAttribute("data-nick",a);return b}function Kw(a,b){return b.username===a?"Broadcaster ":b.fc?"Moderator ":b.Ec?"Fan club member ":""}
function Lw(a){a=Dq(a);a=new Gw(a.red,a.green,a.blue);var b=a.brightness();Hw(a,255-b/3);return"rgb("+a.red+", "+a.green+", "+a.blue+")"};function Mw(a){this.dg=[];this.Ws=[];var b=a.match(/#[a-z0-9\-_]{2,50}/g);if(null!==b){b=q(b);for(var c=b.next();!c.done;c=b.next())this.Ws.push(c.value.substr(1))}this.dg=a.split(/#[a-z0-9\-_]{2,50}/g)};function Nw(a){return 0===a.length?Promise.resolve([]):y("tags/approved_from_title/?title="+encodeURIComponent(a)).then(function(b){return b.responseText.split(",")})};var Ow=new F("gameSelectionChanged");function Pw(a){this.ea=a}window.debugAllMessages=function(){};var gx={onAuthResponse:Qw,onRoomCountUpdate:Rw,onRoomMsg:Sw,onNotify:Tw,onTitleChange:Uw,onPrivateMsg:Vw,onPromotion:Ww,onRevoke:Xw,onPersonallyKicked:Yw,onSilence:Zw,onKick:$w,onNotifyPrivateShowRequest:ax,onNotifyPrivateShowApprove:bx,onNotifyPrivateShowCancel:cx,onNotifyLeavePrivateRoom:dx,onNotifyTokenBalanceUpdate:ex,onNotifyAwayModeCancel:fx};function Rw(a,b){1>b.K.length?u("Invalid onRoomCountUpdate args: "+b.K):""!==b.K[0]&&a.event.Pz.h(parseInt(b.K[0]))}
function Qw(a,b){if(1<=b.K.length&&"1"===b.K[0]){b=a.NE;"notconnected"!==a.status&&(b=a.status);switch(b){case "offline":case "away":case "privaterequesting":case "privatenotwatching":case "privatespying":case "hidden":case "public":hx(a);ix(a,b);break;case "privatewatching":"notconnected"===a.status?(jx(a),ix(a,b)):bq(a.B()).then(function(c){"privatewatching"===c.Ab?jx(a):hx(a);ix(a,c.Ab)}).catch(function(c){u("Error getting room dossier on reconnect: "+c,{room:a.B()})});break;default:w("unexpected status: "+
b)}kx(a)}else 0<b.K.length&&"0"===b.K[0]||u("Error connecting!",{message:b})}function Uw(a,b,c){1>b.K.length?u("Invalid onTitleChange args: "+b.K):1<b.K.length&&"0"===b.K[1]||lx(a,b.K[0],c)}function lx(a,b,c){if(""!==b){var d=[],e=Hc(b),f=new Mw(e),g=function(h){for(var m=0;m<f.dg.length;m+=1){var n=X(f.dg[m]);n.eu=!1;d.push(n);m<f.Ws.length&&d.push(Sn(f.Ws[m],h))}a.event.Ga.h({na:[d],ya:"#DC5500",weight:"bold",xa:!1});a.event.pv.h(b)};void 0!==c?g(c):Nw(b).then(g).catch(function(){g([])})}}
function Vw(a,b){if(""===b.K[0])1<b.K.length?a.event.Ga.h({na:[[X(b.K[1])]],xa:!0}):u("handlePrivateMessage args: "+b.K);else{a=b.K;b=new P(a[1]);!0!==R(b,"X-Successful")&&u("X-Successful not true?");var c=Wn(a[0],b);nm(b);c.Da=""!==a[2]?a[2]:a[0];po(c.N.username)||$n.h(c)}}
function Ww(a,b){if(2!==b.K.length)u("Invalid onPromotion args: "+b.K);else{b.K[0]===a.username()&&a.event.My.h(!0);var c=b.K[1];var d=b.K[0];c=Ec(M("%(from)s has granted moderator privileges to %(to)s."),{from:c,to:d},!0);a.event.Ga.h({na:[[X(c)]],xa:0<=b.K.indexOf(a.username())})}}
function Xw(a,b){if(2!==b.K.length)u("Invalid onRevoke args: "+b.K);else{b.K[0]===a.username()&&a.event.My.h(!1);var c=b.K[1];var d=b.K[0];c=Ec(M("%(from)s has revoked moderator privileges from %(to)s."),{from:c,to:d},!0);a.event.Ga.h({na:[[X(c)]],xa:0<=b.K.indexOf(a.username())})}}
function Yw(a,b){1!==b.K.length?u("Invalid onPersonallyKicked args: "+b.K):(b=b.K[0],"rejoined"===b?b=Yd:"kicked"===b?b=Zd:(w("createPersonallyKickedMessage called with unknown argument "+b),b=$d),a.event.Ga.h({na:[[X(b)]],xa:!0}),ix(a,"notconnected"))}
function Zw(a,b){if(2!==b.K.length)u("Invalid onSilence args: "+b.K);else{a.event.oq.h({username:b.K[0]});var c=a.event.Ga,d=c.h;var e=b.K[0];var f=b.K[1];e=Ec(M("User %(username)s was silenced by %(silencer)s and their messages have been removed"),{username:e,silencer:f},!0);d.call(c,{na:[[X(e)]],xa:0<=b.K.indexOf(a.username())});a.event.Tp.h({zh:b.K[0],ql:b.K[1],bi:!1})}}
function $w(a,b){if(1!==b.K.length)u("Invalid onKick args: "+b.K);else{a.event.oq.h({username:b.K[0]});var c=a.event.Ga,d=c.h;var e=b.K[0];e=Ec(M("User %(username)s was kicked out of the room and their messages have been removed"),{username:e},!0);d.call(c,{na:[[X(e)]],xa:b.K[0]===a.username()});a.event.Tp.h({zh:b.K[0],ql:a.B(),bi:!0})}}
function Sw(a,b){if(""===b.K[0])1<b.K.length?"Chat disconnected. The broadcaster has set a new password on this room."===b.K[1]?(ix(a,"passwordprotected"),a.event.Ga.h({na:[[X(Md)]],xa:!0})):a.event.Ga.h({na:[[X(b.K[1])]],xa:!0}):u("roomMessage invalid args: "+b.K);else{var c=new P(b.K[1]);!0!==R(c,"X-Successful")&&u("X-Successful not true?");b=Wn(b.K[0],c);po(b.N.username)||(a.event.Iu.h(Object.assign(Object.assign({},b),{vt:!0===R(c,"X-Spam")})),a.event.jl.h(b))}}
function ax(a,b){if(2>b.K.length)u("PrivateShowRequest invalid args: "+b.K);else{var c=b.K[0];a.wz=c;a.event.QD.h({NJ:c,GJ:parseInt(b.K[1])});if(a.Qb){switch(a.status){case "public":case "away":break;default:w("unexpected status: "+a.status)}ix(a,"privaterequesting");a.Qb&&a.event.cq.h("show")}}}
function bx(a,b){if(1!==b.K.length)u("Invalid privateShowApprove args: "+b.K);else{switch(a.status){case "public":ix(a,"privatenotwatching");break;case "privaterequesting":mx(a,"leaveRoom",{room:a.B()});jx(a);ix(a,"privatewatching");break;default:w("private show approve unexpected status: "+a.status)}b=X(Qd);"privatewatching"===a.status?a.event.Ga.h({na:[[b]],ya:"#222",background:"#ff8b45",weight:"bold",xa:!0}):a.event.Ga.h({na:[[b,X(" ("),{hc:3},X(")")]],ya:"#222",background:"#ff8b45",weight:"bold",xa:!0})}}
function cx(a,b){function c(){ix(a,"away");a.event.Ga.h({na:[[X(Rd)]],ya:"#222",background:"#ff8b45",weight:"bold",xa:!0})}0!==b.K.length&&u("Invalid privateShowCancel args: "+b.K);switch(a.status){case "privaterequesting":ix(a,"public");a.event.Ga.h({na:[[X(Sd)]],ya:"#222",background:"#ff8b45",weight:"bold",xa:!0});break;case "away":case "hidden":case "public":break;case "privatewatching":mx(a,"leavePrivateRoom",{room:a.B()});hx(a);c();break;case "privatespying":case "privatenotwatching":c();break;default:w("privateShowCancel wrong room status: "+a.status)}}function dx(){}function ex(a,b){2!==b.K.length?u("Invalid tokenBalanceUpdate args: "+b.K):a.event.rv.h({$c:Number(b.K[1])})}function fx(a,b){0!==b.K.length&&w("Invalid awayModeCancel args: "+b.K);switch(a.status){case "away":case "public":case "privaterequesting":a.event.Ga.h({na:[[X(Xd)]],ya:"#222",background:"#ff8b45",weight:"bold",xa:!0});ix(a,"public");break;default:u("unexpected state: "+a.status)}}
function Tw(a,b){var c=new P(b.K[0]),d=T(c,"type");c.Mf("send_to");c.Mf("to_user");if("function"!==typeof nx[d])u("Unhandled onNotify type "+d,{message:b});else(0,nx[d])({ea:a,p:c,Bk:1<b.K.length&&"true"===b.K[1]})}
var nx={tip_alert:ox,log:px,refresh_panel:qx,app_tab_refresh:rx,appnotice:sx,apperrorlog:tx,clear_app:ux,room_entry:vx,room_leave:wx,spy_room_leave:xx,purchase_notification:yx,settingsupdate:zx,hidden_show_status_change:Ax,hidden_show_approve:Bx,hidden_show_deny:Cx,is_restricted_hls_allowed:Dx,compliance_image_required:Ex,show_my_cam_start:Fx,show_my_cam_stop:Gx,game_selection:Hx};function ox(a){var b=Yn(a.p);void 0!==a.Bk&&a.Bk||a.ea.event.cq.h(Ix(b.amount));a.ea.event.Jq.h(b);var c=[""===b.N.username?X(Be):Rn(b.N),X(" tipped "+b.amount+" "+(1<b.amount?"tokens":"token"))];b.pp&&c.push(X(" anonymously"));a.ea.Qb&&(""!==b.message&&c.push(X(" -- "+b.message)),y("tipping/get_token_balance/").then(function(d){d=new P(d.responseText);V(d,"success")&&a.ea.event.rv.h({$c:W(d,"token_balance")})}));a.ea.event.Ga.h({na:[c],background:"#ff3",ya:"#000",weight:"bold",xa:b.N.username===a.ea.username()||a.ea.Qb,rs:b.N.username})}function px(a){var b=S(a.p,"msg");void 0===b?u("handleLog with an empty msg"):(a.ea.event.Eu.h({message:b,type:T(a.p,"type"),da:W(a.p,"tid")}),a.ea.event.sr.h(b))}function rx(a){a.ea.event.sB.h(void 0)}function qx(a){a.ea.event.Dz.h(void 0)}
function sx(a){var b=R(a.p,"msg"),c=[];if("string"===typeof b)c.push([X("Notice: "+b)]);else if(b instanceof Array){b=q(b);for(var d=b.next();!d.done;d=b.next())c.push([X("Notice: "+d.value)])}else{u("handleAppNotice error: Invalid message type "+(void 0===b?"undefined":b.toString()));return}c={na:c,Hd:S(a.p,"to_group"),Pg:S(a.p,"to_user"),background:S(a.p,"background",!1),ya:S(a.p,"foreground",!1),weight:S(a.p,"weight",!1),xa:!1,da:W(a.p,"tid")};void 0!==a.Bk&&!1!==a.Bk||a.ea.event.vh.h(c);a.ea.event.Ga.h(c)}
function tx(a){if(a.ea.Qb){var b=R(a.p,"msg"),c=[];c.push([X("Error: ")]);if("string"===typeof b)c.push([X(b)]);else if(b instanceof Array){b=q(b);for(var d=b.next();!d.done;d=b.next())c.push([X(d.value)])}else{u("handleAppErrorLog error: Invalid message type "+(void 0===b?"undefined":b.toString()));return}c={na:c,xa:!1};void 0!==a.Bk&&!1!==a.Bk||a.ea.event.Eu.h({message:c.na,type:T(a.p,"type"),da:W(a.p,"tid")});a.ea.event.Ga.h(c)}}function ux(a){a.ea.event.ww.h(void 0)}
function vx(a){var b=a.ea;a=Vn(a.p);switch(a.Fb){case "promotion":a.Fb="";a.wc="pr";break;case "onlineannouncement":a.Fb="",a.wc="fn"}if(Jx(b,b.Nj,a)){var c=b.Qb?a.Fb:"",d=[X(Kw(b.B(),a)),Rn(a),X(" has joined the room")];""!==c?(d.push(X(" (from ")),d.push(Sn(c,[c])),d.push(X(")"))):b.Qb&&"pr"===a.wc?d.push(X(" via promotion")):b.Qb&&"fn"===a.wc&&d.push(X(" via online announcement"));d.push(X("."));b.event.Ga.h({na:[d],xa:a.username===b.username(),rs:a.username})}(a.yb||a.fc||a.Ec)&&b.event.Qz.h({V:Object.assign(Object.assign({},a),{Fb:""}),action:"enter"});b.event.fE.h({V:Object.assign(Object.assign({},a),{Fb:""}),wc:a.wc,pC:a.Fb})}function wx(a){var b=a.ea;a=Vn(a.p);if(Jx(b,b.Pj,a)){var c=" "+Mh;a.yb&&!Kx.has(b.status)&&(c+=" "+Nh);b.event.Ga.h({na:[[X(Kw(b.B(),a)),Rn(a),X(c)]],xa:a.username===b.username(),rs:a.username})}(a.yb||a.fc||a.Ec)&&b.event.Qz.h({V:Object.assign(Object.assign({},a),{Fb:""}),action:"leave"});b.event.gE.h({V:Object.assign(Object.assign({},a),{Fb:""})})}
function xx(a){"privatespying"===a.ea.status&&ix(a.ea,"privatenotwatching")}
function yx(a){var b=Vn(a.p);!0!==V(a.p,"history")&&w("purchase history is not true?");for(var c=[],d=q(T(a.p,"message").split(new RegExp("\\b"+b.username+"\\b","gi"))),e=d.next();!e.done;e=d.next())e=e.value,""!==e&&c.push(X(e)),c.push(Rn(b));c.pop();b.username===a.ea.username()&&y("tipping/get_token_balance/").then(function(f){f=new P(f.responseText);V(f,"success")&&a.ea.event.rv.h({$c:W(f,"token_balance")})});a.ea.event.Tz.h({N:b,content:T(a.p,"message"),da:W(a.p,"tid")});a.ea.event.Ga.h({na:[c],background:"#33ff33",ya:"#000",weight:"bold",xa:b.username===a.ea.username()})}
function zx(a){var b=a.p,c={ae:V(b,"allow_privates"),Ud:W(b,"private_price"),Ng:W(b,"spy_price"),mi:W(b,"private_min_minutes"),Qi:V(b,"allow_show_recordings"),da:W(b,"tid")};nm(b);a.ea.event.zi.h(c);if(a.ea.Ud!==c.Ud){a.ea.Ud=c.Ud;b=a.ea.B();var d=c.Ud;b=Ec(M("%(username)s changed Private Show price to %(price)s tokens per minute"),{username:b,price:d},!0);a.ea.event.Ga.h({na:[[X(b)]],xa:!0})}a.ea.Ng!==c.Ng&&0!==c.Ng&&(a.ea.Ng=c.Ng,b=a.ea.B(),c=c.Ng,c=Ec(M("%(username)s changed Spy on Private Show price to %(price)s tokens per minute"),{username:b,price:c},!0),a.ea.event.Ga.h({na:[[X(c)]],xa:!0}))}function Ax(a){if(!a.ea.Qb){var b=V(a.p,"is_starting")?"hidden":"public",c=T(a.p,"hidden_message");nm(a.p);a.ea.event.Px.h(c);switch(a.ea.status){case "privaterequesting":Lv(a.ea);break;case "public":case "hidden":break;default:u("handleHiddenShowStatusChange unexpected status: "+a.ea.status)}"public"===b?window.setTimeout(function(){ix(a.ea,"public")},3E3):ix(a.ea,b)}}
function Bx(a){V(a.p,"initial_hide_cam")?window.setTimeout(function(){ix(a.ea,"public")},2E3):"public"!==a.ea.status&&ix(a.ea,"public")}function Cx(a){"public"===a.ea.status&&ix(a.ea,"hidden")}function Dx(){}function Ix(a){return 1E3<=a?"huge":500<=a?"large":100<=a?"medium":15<=a?"small":"tiny"}var Lx=!1;function Ex(a){if(!Lx){Lx=!0;var b="Compliance Image Required!\nPlease visit "+window.location.host+"/verify on your mobile\n     device to verify your identity.\n\nThis is required for broadcasters not showing their face.";a=fm(a.p,"time");J(void 0!==a&&0<a?b+("\n\nYou have "+a+" minute"+(1===a?"":"s")+" to complete."):b+"\n\nYou must complete this to continue broadcasting, failure to do so may result in broadcasting restrictions.",function(){Lx=!1})}}function Fx(){}function Gx(){}
function Hx(a){var b=Ow.h;a:{a=mm(a.p,"game");if(void 0!==a&&(a=JSON.parse(a),null!==a)){a={description:a.description,DC:a.game_url,image:a.image_64x64,name:a.name,uid:a.uid,yF:a.viewers};break a}a=void 0}b.call(Ow,a)};function Mx(){this.wk=0}function Nx(a){a.wk+=1;return Math.min(1E4,500*a.wk)}Mx.prototype.reset=function(){this.wk=0};var Ox={o:"room-owner",m:"moderator",f:"fanclub-user",tr:"tipped-recently-user",g:"standard-user",t:"tipped-user",p:"tipped-lots-user",l:"tipped-tons-user"};function Px(a){this.kk=this.Rn=0;this.jf=[];var b=a.split(",");a=~~b[0];b=b.slice(1);var c=[];b=q(b);for(var d=b.next();!d.done;d=b.next()){var e=q(d.value.split("|"));d=e.next().value;var f=e.next().value;e=e.next().value;f=Ox[f];d={username:d,yb:!1,Ec:!1,je:!1,fc:!1,ff:!1,fg:!1,gf:!1,Fb:"",Ke:e,wc:"un"};"room-owner"===f?d.yb=!0:"fanclub-user"===f?d.Ec=!0:"tipped-user"===f?d.je=!0:"moderator"===f?d.fc=!0:"tipped-recently-user"===f?d.ff=!0:"tipped-lots-user"===f?d.fg=!0:"tipped-tons-user"===f&&(d.gf=!0);c.push(d)}this.Rn=a+c.length;this.kk=a;this.jf=c};function Qx(a){this.EB=new Set(a.dw);this.Ow=new Set(a.Nw)}var Rx=new Qx({dw:["connecting","closing"],Nw:["failed","unknown"],SE:["suspended","disconnected"]}),Sx=new Qx({dw:["subscribing","unsubscribing"],Nw:["failed","unknown"],SE:["suspended"]});var Tx=0;function Ux(a,b,c){this.token=a;this.expires=b;this.clientId=c;this.id=Tx+=1}function Vx(a){var b=a.join(",");return new Promise(function(c,d){B("push_service/auth/",{topics:b,client:"ably"}).then(function(e){try{var f=new P(e.responseText);c(f)}catch(g){d(g)}}).catch(function(e){u("(Push Service[ably) error on auth",e);d(e)})})};function Z(a,b){this.prefix=a;this.W=b;if(0===a.length)throw Error("prefix cannot be empty");if(0===b.length)throw Error("roomname cannot be empty");}r(Z,qm);Z.prototype.Oc=function(){return this.prefix+":"+this.W};Z.prototype.Wh=function(){return this.prefix};Z.prototype.vm=function(){};function Wx(a,b,c){this.prefix=a;this.W=b;this.username=c;if(0===a.length)throw Error("prefix cannot be empty");if(0===b.length)throw Error("roomname cannot be empty");if(0===c.length)throw Error("username cannot be empty");}r(Wx,qm);Wx.prototype.Oc=function(){return this.prefix+":"+this.W+":"+this.username};Wx.prototype.Wh=function(){return this.prefix};Wx.prototype.vm=function(){};function Xx(a){Z.call(this,Yx,a)}r(Xx,Z);Xx.prototype.Na=function(a){return{count:W(a,"count"),da:W(a,"tid")}};Xx.prototype.listener=function(a){Zx.h(a)};var Yx="room:count",Zx=new F(Yx);function $x(a){Z.call(this,ay,a)}r($x,Z);$x.prototype.Na=function(a){return{title:T(a,"title"),da:-2}};$x.prototype.listener=function(a){by.h(a)};var ay="room:title_change",by=new F(ay);function cy(a){Z.call(this,dy,a)}r(cy,Z);cy.prototype.Na=function(a){return{N:Un(a),message:T(a,"message"),amount:W(a,"amount"),pp:V(a,"is_anonymous_tip"),yb:V(a,"is_broadcaster"),history:V(a,"history"),$j:T(a,"to_username"),da:W(a,"tid")}};cy.prototype.listener=function(a){ey.h(a)};var dy="room:tip_alert",ey=new F(dy);function fy(a){Z.call(this,gy,a)}r(fy,Z);fy.prototype.Na=function(a){return{status:T(a,"status"),da:-4}};fy.prototype.listener=function(a){hy.h(a)};var gy="room:status",hy=new F(gy);function iy(a){Z.call(this,jy,a)}r(iy,Z);iy.prototype.Na=function(a){return{N:Un(gm(a,"from_user")),message:T(a,"message"),font:S(a,"font_family",!1),ef:S(a,"font_color",!1),Tc:S(a,"id",!1),backgroundColor:S(a,"background",!1),da:W(a,"tid",!1)}};iy.prototype.listener=function(a){ky.h(a)};var jy="room:message",ky=new F(jy);function ly(a){Z.call(this,my,a)}r(ly,Z);ly.prototype.Na=function(a){return{username:T(a,"username"),N:T(a,"from_username"),da:-5}};ly.prototype.listener=function(a){ny.h(a)};var my="room:silence",ny=new F(my);function oy(a){Z.call(this,py,a)}r(oy,Z);oy.prototype.Na=function(a){return{username:T(a,"username"),N:"Unknown",da:-6}};oy.prototype.listener=function(a){qy.h(a)};var py="room:kick",qy=new F(py);function ry(a){Z.call(this,sy,a)}r(ry,Z);ry.prototype.Na=function(a){return{username:T(a,"username"),N:T(a,"from_username"),da:-7}};ry.prototype.listener=function(a){ty.h(a)};var sy="room:mod_promoted",ty=new F(sy);function uy(a){Z.call(this,vy,a)}r(uy,Z);uy.prototype.Na=function(a){return{username:T(a,"username"),N:T(a,"from_username"),da:-8}};uy.prototype.listener=function(a){wy.h(a)};var vy="room:mod_revoked",wy=new F(vy);function xy(a){Z.call(this,yy,a)}r(xy,Z);xy.prototype.Na=function(a){return Object.assign({Hd:void 0,Pg:void 0},Zn(a))};xy.prototype.listener=function(a){zy.h(a)};var yy="room:appnotice",zy=new F(yy);function Ay(a,b){Wx.call(this,By,a,b)}r(Ay,Wx);Ay.prototype.Na=function(a){return Object.assign({Hd:void 0,Pg:this.username},Zn(a))};Ay.prototype.listener=function(a){Cy.h(a)};var By="room_user:appnotice",Cy=new F(By);function Dy(a){Z.call(this,Ey,a)}r(Dy,Z);Dy.prototype.Na=function(a){var b=T(a,"type");if("log"===b)var c=T(a,"message");else if("apperrorlog"===b){var d=R(a,"message");c=[];c.push([X("Error: ")]);if("string"===typeof d)c.push([X(d)]);else if(d instanceof Array){d=q(d);for(var e=d.next();!e.done;e=d.next())c.push([X(e.value)])}else u("parseAppLog error: Invalid message type "+(void 0===d?"undefined":d.toString()))}else u("parseAppLog error: Unknown app log type: "+b),c="";return{message:c,type:b,da:W(a,"tid")}};Dy.prototype.listener=function(a){Fy.h(a)};var Ey="room:app_log",Fy=new F(Ey);function Gy(a){Z.call(this,Hy,a)}r(Gy,Z);Gy.prototype.Na=function(a){return{N:Vn(gm(a,"user")),content:T(a,"message"),da:W(a,"tid")}};Gy.prototype.listener=function(a){Iy.h(a)};var Hy="room:purchase",Iy=new F(Hy);function Jy(a){Z.call(this,Ky,a)}r(Jy,Z);Jy.prototype.Na=function(a){return{ae:V(a,"allow_private_shows"),Ud:W(a,"private_show_tokens_per_minute"),Ng:W(a,"spy_on_private_show_tokens_per_minute"),mi:W(a,"private_min_minutes"),Qi:V(a,"allow_show_recordings"),da:W(a,"tid")}};Jy.prototype.listener=function(a){Ly.h(a)};var Ky="room:settings",Ly=new F(Ky);function My(a){Z.call(this,Ny,a)}r(My,Z);My.prototype.Na=function(a){return{V:Vn(gm(a,"user")),action:T(a,"action"),da:-3}};My.prototype.listener=function(a){Oy.h(a)};var Ny="room:enter_leave",Oy=new F(Ny);function Py(a){Z.call(this,Qy,a)}r(Py,Z);Py.prototype.Na=function(a){return{V:Vn(gm(a,"user")),wc:S(a,"source"),pC:S(a,"exploring_hash"),da:-9}};Py.prototype.listener=function(a){Ry.h(a)};var Qy="room_privileged:enter",Ry=new F(Qy);function Sy(a){Z.call(this,Ty,a)}r(Sy,Z);Sy.prototype.Na=function(a){return{V:Vn(gm(a,"user")),da:-10}};Sy.prototype.listener=function(a){Uy.h(a)};var Ty="room_privileged:leave",Uy=new F(Ty);function Vy(a){Z.call(this,Wy,a)}r(Vy,Z);Vy.prototype.Na=function(a){return Object.assign({Hd:"red",Pg:void 0},Zn(a))};Vy.prototype.listener=function(a){Xy.h(a)};var Wy="mod:appnotice",Xy=new F(Wy);function Yy(a){Z.call(this,Zy,a)}r(Yy,Z);Yy.prototype.Na=function(a){return Object.assign({Hd:"green",Pg:void 0},Zn(a))};Yy.prototype.listener=function(a){$y.h(a)};var Zy="fanclub:appnotice",$y=new F(Zy);new F("fanclub2:appnotice");function az(a){Z.call(this,bz,a)}r(az,Z);az.prototype.Na=function(a){return Object.assign({Hd:"lightpurple",Pg:void 0},Zn(a))};az.prototype.listener=function(a){cz.h(a)};var bz="lightpurple:appnotice",cz=new F(bz);function dz(a){Z.call(this,ez,a)}r(dz,Z);dz.prototype.Na=function(a){return Object.assign({Hd:"darkpurple",Pg:void 0},Zn(a))};dz.prototype.listener=function(a){fz.h(a)};var ez="darkpurple:appnotice",fz=new F(ez);function gz(a){Z.call(this,hz,a)}r(gz,Z);gz.prototype.Na=function(a){return Object.assign({Hd:"darkblue",Pg:void 0},Zn(a))};gz.prototype.listener=function(a){iz.h(a)};var hz="darkblue:appnotice",iz=new F(hz);function jz(a){Z.call(this,kz,a)}r(jz,Z);jz.prototype.Na=function(a){return Object.assign({Hd:"lightblue",Pg:void 0},Zn(a))};jz.prototype.listener=function(a){lz.h(a)};var kz="lightblue:appnotice",lz=new F(kz);function mz(a){var b=a.split(":"),c=b[2],d=b[3];b=nz.get(b.slice(0,2).join(":"));if(void 0!==b)return new b(c,d);u("Topic could not be mapped properly",a)}function oz(a,b){return[new Xx(a),new $x(a),new cy(a),new fy(a),new iy(a),new ly(a),new oy(a),new ry(a),new uy(a),new xy(a),new Ay(a,b),new Dy(a),new Gy(a),new Jy(a),new My(a),new Py(a),new Sy(a),new Vy(a),new Yy(a),new jz(a),new gz(a),new az(a),new dz(a)]}
var nz=new Map([[Bm,Am],[yo,xo],[Fo,Eo],[Oo,No],[Bo,Ao],[Io,Ho],[Lo,Ko],[Wo,Vo],[Zo,Yo],[bp,ap],[Yx,Xx],[ay,$x],[dy,cy],[gy,fy],[jy,iy],[my,ly],[py,oy],[sy,ry],[vy,uy],[yy,xy],[By,Ay],[Ey,Dy],[Hy,Gy],[Ky,Jy],[Ny,My],[Qy,Py],[Ty,Sy],[Wy,Vy],[Zy,Yy],[kz,jz],[hz,gz],[bz,az],[ez,dz]]);function pz(a,b,c){c=void 0===c?[]:c;if(isNaN(a)&&isNaN(b)&&"number"===typeof a&&"number"===typeof b||a===b)return!0;if(a instanceof Function)return a===b;if("function"===typeof a&&"function"===typeof b||a instanceof Date&&b instanceof Date||a instanceof RegExp&&b instanceof RegExp||a instanceof String&&b instanceof String||a instanceof Number&&b instanceof Number)return a.toString()===b.toString();if(!(a instanceof Object&&b instanceof Object)||a.isPrototypeOf(b)||b.isPrototypeOf(a)||a.constructor!==b.constructor||a.prototype!==b.prototype)return!1;for(var d in b)if(!(0<=c.indexOf(d)||b.hasOwnProperty(d)===a.hasOwnProperty(d)&&typeof b[d]===typeof a[d]))return!1;for(var e in a)if(!(0<=c.indexOf(e))){if(b.hasOwnProperty(e)!==a.hasOwnProperty(e)||typeof b[e]!==typeof a[e])return!1;switch(typeof a[e]){case "object":case "function":if(!pz(a[e],b[e],c))return!1;break;default:if(a[e]!==b[e])return!1}}return!0};function qz(a,b,c,d){this.value=a;this.Th=b;this.SD=c;this.FF=d;this.To=!1;this.tk=new Date;this.kx=!1}function rz(a,b,c){var d={},e;for(e in a)if(!0!==c[e]&&"function"!==typeof a[e]&&!(a[e]instanceof Object&&b[e]instanceof Object&&pz(a[e],b[e],Object.keys(c)))&&a[e]!==b[e]){var f={};d[e]=(f.wowza=a[e],f.push=b[e],f)}return d}
function sz(a,b,c,d){var e=this;d=void 0===d?{}:d;this.A=a;this.name=b;this.cy=void 0===c?0:c;this.Fn=d;this.jr=!0;this.gu=this.fu=0;this.bufferSize=100;this.timeout=2500;this.qy=!1;this.lv=new Set;this.no=new tz(this.bufferSize);this.hq=new tz(this.bufferSize);this.TD=uz.j(function(f){e.qy=f})}sz.prototype.verify=function(a,b,c){vz(this,a)||wz(this,a,b,c)};function xz(a,b,c){c=void 0===c?a.timeout:c;var d=window.setTimeout(function(){b();a.lv.delete(d)},c);a.lv.add(d)}
function vz(a,b){var c;if(c=a.qy&&yz())if(c=!a.jr){if(void 0===b.da)a=0;else a:switch(a=a.A.status,a){case "privatewatching":case "privatespying":case "notconnected":a=!1;break a;case "passwordprotected":case "privaterequesting":case "privatenotwatching":case "away":case "offline":case "hidden":case "public":a=!0;break a;default:w("unexpected status: "+a),a=!1}c=a}return c&&void 0!==b.da?!1:!0}
function wz(a,b,c,d){if(!vz(a,b)&&void 0!==b.da){var e=new qz(b,c,yz(),"open"===a.A.readyState()),f=function(h){return void 0!==h.value.da&&0>h.value.da?pz(h.value,e.value,Object.keys(a.Fn)):h.Th!==c&&h.value.da===b.da},g=a.no.values.find(f);void 0!==g?zz(a,g,e):(f=a.hq.values.find(f),void 0!==f?Az(a,f,e):(a.no.push(e),xz(a,function(){vz(a,b)||e.To||(Bz(a.no,e),0<a.cy&&e.tk.valueOf()-a.A.Ok.valueOf()<a.cy||(a.hq.push(e),xz(a,function(){if(!vz(a,b)&&!e.To){Bz(a.hq,e);e.kx=!0;var h="never arrived";d||(h+=", topic was not subscribed");Cz(a,e,h)}},1E4)))})))}}function zz(a,b,c){b.To=!0;pz(b.value,c.value,Object.keys(a.Fn))||(c=rz("wowza"===b.Th?b.value:c.value,"push"===b.Th?b.value:c.value,a.Fn),Cz(a,b,"differs",c),b.kx=!0);Bz(a.no,b)}
function Az(a,b,c){b.To=!0;b.Wx=(new Date).valueOf()-b.tk.valueOf();pz(b.value,c.value,Object.keys(a.Fn))?(Bz(a.hq,b),Cz(a,b,"arrived "+b.Wx+"ms late")):(c=rz("wowza"===b.Th?b.value:c.value,"push"===b.Th?b.value:c.value,a.Fn),Cz(a,b,b.Wx+"ms late and differs",c))}sz.prototype.stop=function(){for(var a,b=q(this.lv.keys()),c=b.next();!c.done;c=b.next())clearTimeout(c.value);null===(a=this.TD)||void 0===a?void 0:a.removeListener();this.jr=!0};sz.prototype.start=function(){this.jr=!1};function Cz(a,b,c,d){if(void 0!==b.value.da){var e={};e.trace_id=b.value.da;e.running_apps=a.A.Xg();e.viewer_ignored=po(a.A.username());e.received_from=b.Th;e.original=b.value;e.push_connected=b.SD;e.wowza_connected=b.FF;e.message_created=b.tk;e.message_age=b.tk.valueOf()-a.A.Ok.valueOf();e.verifier=a.name;e.timeout=a.timeout;e.viewer=a.A.username();e.room=a.A.B();e.room_status=a.A.status;e.prev_room_status=a.A.Dd;e.last_connection_time=a.A.Ok;e.created=a.A.tk;"wowza"===b.Th?a.fu+=1:"push"===b.Th&&(a.gu+=1);e.total_failures_push=a.fu;e.total_failures_wowza=a.gu;e.diff=d;void 0!==d&&(e.diff_fields=Object.keys(d));e.failure_reason=c;void 0!==Jb&&C("PushServiceVerifier",e)}}function tz(a){this.size=a;this.values=[]}function Bz(a,b){a.values=a.values.filter(function(c){return c!==b})}tz.prototype.push=function(a){this.size<this.values.length&&this.values.shift();this.values.unshift(a)};function Dz(a){var b={onRoomCountUpdate:-1,onTitleChange:-2,onPromotion:-7,onRevoke:-8,onSilence:-5,onKick:-6};return void 0===b[a]?-999999:b[a]}var Ez=0;function Fz(a){this.A=a;this.Jv=[];this.xz=new Ub;this.eB=new Ub}
function Gz(){var a=Hz,b=a.A.username(),c=a.A.B(),d=[{name:"roomTitleChange",ic:new $x(c),sc:by,yc:a.A.event.hl,Zb:[-2,16],$h:{da:!0},Nh:function(e){return{title:e.K[0],da:"0"===e.K[1]?-999999:Dz(e.method)}}},{name:"roomTipAlert",ic:new cy(c),sc:ey,yc:a.A.event.Jq,Zb:[4],$h:{yb:!0,history:!0,N:!0},Nh:function(e){return Object.assign(Object.assign({},e),{yb:!1,history:!1})},delay:6E3},{name:"roomMessage",ic:new iy(c),sc:ky,yc:a.A.event.Iu,Zb:[0,1,2],$h:{ef:!0,backgroundColor:!0,N:!0,vt:!0,Tc:!0},Nh:function(e){return Object.assign(Object.assign({},e),{message:e.message.trim()})},delay:6E3},{name:"roomSilence",ic:new ly(c),sc:ny,yc:a.A.event.hl,Zb:[-5],$h:{da:!0},Nh:function(e){return{username:e.K[0],N:e.K[1],da:Dz(e.method)}}},{name:"roomKick",ic:new oy(c),sc:qy,yc:a.A.event.hl,Zb:[-6],$h:{da:!0,N:!0},Nh:function(e){return{username:e.K[0],N:"Unknown",da:Dz(e.method)}}},{name:"roomModPromoted",ic:new ry(c),sc:ty,yc:a.A.event.hl,Zb:[-7],$h:{da:!0},Nh:function(e){return{username:e.K[0],N:e.K[1],da:Dz(e.method)}}},{name:"roomModRevoked",ic:new uy(c),sc:wy,yc:a.A.event.hl,Zb:[-8],$h:{da:!0},Nh:function(e){return{username:e.K[0],N:e.K[1],da:Dz(e.method)}}},{name:"roomAppNotice",ic:new xy(c),sc:zy,yc:a.A.event.vh,Zb:[5]},{name:"roomAppLog",ic:new Dy(c),sc:Fy,yc:a.A.event.Eu,Zb:[3]},{name:"roomPurchase",ic:new Gy(c),sc:Iy,yc:a.A.event.Tz,Zb:[],delay:6E3},{name:"roomSettings",ic:new Jy(c),sc:Ly,yc:a.A.event.zi,Zb:[]},{name:"roomModGroup",ic:new Vy(c),sc:Xy,yc:a.A.event.vh,Zb:[6]},{name:"fanclubGroupNotice",ic:new Yy(c),sc:$y,yc:a.A.event.vh,Zb:[7]},{name:"lightBlueGroupNotice",ic:new jz(c),sc:lz,yc:a.A.event.vh,Zb:[8]},{name:"darkBlueGroupNotice",ic:new gz(c),sc:iz,yc:a.A.event.vh,Zb:[9]},{name:"lightPurpleGroupNotice",ic:new az(c),sc:cz,yc:a.A.event.vh,Zb:[10]},{name:"darkPurpleGroupNotice",ic:new dz(c),sc:fz,yc:a.A.event.vh,Zb:[11]}];""!==b&&(d.push({name:"userTipAlert",ic:new Ko(b),sc:Mo,yc:a.A.event.Jq,Zb:[3,15],$h:{yb:!0,history:!0,N:!0}}),d.push({name:"userAppAlert",ic:new Ay(c,b),sc:Cy,yc:a.A.event.vh,Zb:[12]}));d.forEach(function(e){var f=Iz(a,e.name,e.delay,e.$h,e.PJ);a.eB.add(e.yc.j(function(g){g=void 0!==e.Nh?e.Nh(g):g;Jz(a,e.Zb,g)&&f.verify(g,"wowza",Kz(e.ic))},!1));a.xz.add(e.sc.j(function(g){Jz(a,e.Zb,g)&&f.verify(g,"push",Kz(e.ic))}))});150>Ez&&Lz(a)}
function Jz(a,b,c){var d=void 0===d?!1:d;if(Mz.has(a.A.status))return!1;b=q(b);for(var e=b.next();!e.done;e=b.next())if(e=e.value,0===e){if(po(c.N.username))return!1}else if(1===e){if(void 0===c.da)return!1}else if(2===e){if(!0===c.vt)return!1}else if(3===e){if(!a.A.Qb)return!1}else if(4===e){if(a.A.Qb)return!1}else if(13===e){if(!a.A.Qb&&!a.A.Pe)return!1}else if(14===e){if(c.V.username===a.A.username())return!1}else if(15===e){if(c.N.username===a.A.username())return!1}else if(16===e){if(""===c.title)return!1}else if(!d)if(5===e){if(e=c,void 0!==e.Hd||void 0!==e.Pg)return!1}else if(6===e){if("red"!==c.Hd)return!1}else if(7===e){if("green"!==c.Hd)return!1}else if(8===e){if("lightblue"!==c.Hd)return!1}else if(9===e){if("darkblue"!==c.Hd)return!1}else if(10===e){if("lightpurple"!==c.Hd)return!1}else if(11===e){if("darkpurple"!==c.Hd)return!1}else if(12===e){if(void 0===c.Pg)return!1}else if(0>e&&(-999999===c.da||c.da!==e))return!1;return!0}
function Iz(a,b,c,d,e){d=void 0===d?{}:d;e=void 0===e?sz:e;b=new e(a.A,b,void 0===c?0:c,d);a.Jv.push(b);return b}Fz.prototype.kv=function(){for(var a=q(this.Jv),b=a.next();!b.done;b=a.next())b.value.stop(),--Ez;Vb(this.xz);Vb(this.eB)};function Lz(a){a=q(a.Jv);for(var b=a.next();!b.done;b=a.next())b.value.start(),Ez+=1}var Mz=new Set(["privatewatching","unknown","notconnected","offline"]);var Nz={hc:1,height:0,name:"",Oe:"",width:0,Fl:""};function Oz(a){this.Gq="%%%[";this.km="]%%%";this.Hy=/((^|\s)@\w+)/;this.vc=a.vc;this.Ne=a.Ne;this.Rf=a.Rf}function Pz(a,b){var c=document.createElement("span");c.className="emoticonImage";Qz(a,b).forEach(function(d){switch(d.hc){case 0:d=d.Xc;""!==d&&c.appendChild(Rz(a,d));break;case 1:""!==d.name?c.appendChild(Sz(a,d)):c.appendChild(Rz(a,""))}});return c}
function Qz(a,b){var c=[],d=[];if(0>b.indexOf(a.Gq))return[{hc:0,Xc:b}];for(var e=0;e<b.length;e+=1)if("%"===b[e])if(b.slice(e,e+a.Gq.length)===a.Gq){var f=e+b.slice(e,b.length).indexOf(a.km);if(b.slice(f,f+a.km.length)===a.km){c!==[]&&d.push({hc:0,Xc:c.join("")});c=[];e=b.slice(e,f+a.km.length);if(e.slice(a.Gq.length).startsWith("emoticon")){b:{e=e.replace("%%%[emoticon ","").replace("]%%%","");e=e.split(/\|/);if(6===e.length){if(e={hc:1,name:e[0],Xj:e[1],width:Tz(e[2])?Number(e[2]):80,height:Tz(e[3])?Number(e[3]):80,Oe:e[4],Fl:e[5]},void 0!==e.Xj&&Uz(e.Xj))break b}else if(5===e.length&&(e={hc:1,name:e[0],Oe:e[1],width:Tz(e[2])?Number(e[2]):80,height:Tz(e[3])?Number(e[3]):80,Fl:e[4]},Uz(e.Oe)))break b;e=void 0}void 0===e&&(u("Cannot parse emoticon: "+e),e=Nz)}else e={hc:0,Xc:e};d.push(e);e=f+a.km.length-1}}else c.push(b[e]);else c.push(b[e]);c!==[]&&d.push({hc:0,Xc:c.join("")});return d}
function Sz(a,b){if(a.vc&&-1===a.Ne.indexOf(b.name)){var c=document.createElement("img"),d=b.Xj;c.src=void 0!==d?d:b.Oe;a.Rf?(b.width*=.5,b.height*=.5):(c.title=":"+b.name,c.style.cursor="pointer",c.onclick=function(){Kt.h({Hc:b.name,url:b.Oe})});c.name=b.name;c.height=b.height;c.width=b.width;c.style.verticalAlign="top";return c}c=document.createElement("span");c.style.color="lightskyblue";c.innerText=(a.Rf?"":":")+b.name;a.Rf||(c.style.cursor="pointer",c.onclick=function(){Kt.h({Hc:b.name,url:b.Oe})});return c}function Rz(a,b){var c=document.createElement("span");a.Hy.test(b)?b.split(a.Hy).forEach(function(d){var e=/^\s/.test(d);if("@"===d.trim().charAt(0)){var f=document.createElement("span");f.innerText=d.trimStart();f.className="username-mention";e&&c.appendChild(document.createTextNode(" "));c.appendChild(f)}else 0<d.trim().length&&c.appendChild(document.createTextNode(d))}):c.innerText=b;return c}
function Uz(a){return null===a.match(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/g)?(u("Invalid emoticon URL"),!1):!0}function Tz(a){return isNaN(parseInt(a,10))?(u("Invalid dimension argument"),!1):!0};var Vz,Hz,Wz,Xz,Yz,uz=new F("PushServiceTopicsSetup",{oe:1}),Zz=0;function $z(a,b){if(void 0!==Yz)Yz.then(function(){$z(a,b)});else{Vz=b.event.Iu.j(function(d){if(!(1E3>(new Date).valueOf()-b.Ok.valueOf())){var e=d.N.username===b.username();d.vt||!e||Mz.has(b.status)||void 0===d.da||(e=Qz(new Oz({vc:!0,Ne:[],Rf:!1}),d.message).map(function(f){switch(f.hc){case 0:return f.Xc;case 1:return":"+f.name}}).join(""),d=JSON.stringify({v:2,m:e,f:"",c:"",tid:d.da}),B("push_service/publish_chat_message/",{room:a.B,message:d}).catch(function(f){403===f.Kd.status||u("(Push Service) calling publish_chat_message returned an error",f)}))}},!1);Hz=new Fz(b);Gz();var c=Zz+=1;aA(a.B).then(function(d){Yz=void 0;c===Zz&&(bA().qq=a,cA(d))}).catch(function(d){u(d);Yz=void 0})}}var dA;K.j(function(a){$z(a.C,a.A);Wz=a.C.B;Xz=a.C.userName;dA=window.setTimeout(function(){var b="open"===a.A.readyState(),c=yz();(b||c)&&C("PushServiceConnectionStatus",{wowza_connected:b,push_connected:c,push_connection_type:eA()&&void 0!==fA?fA.Ax():""})},1E4)});tc.j(function(){window.clearTimeout(gA);window.clearTimeout(dA);uz.h(!1);hA(Wz,Xz)});function hA(a,b){if(void 0!==Yz)Yz.then(function(){hA(a,b)});else{Vz.removeListener();Hz.kv();var c=oz(a,b);c=iA(c);Yz=Promise.all(jA(c)).then(function(){Yz=void 0}).catch(function(d){u(d);Yz=void 0})}}Jo.j(function(a){il(a.$c)});var kA=new F("pushReconnectEvent"),gA,lA=1E4;function cA(a){a=Object.keys(a);var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())c=mz(c.value),void 0===c||Kz(c)||b.push(c);if(0!==b.length){a=mA(b);var d=(new Date).getTime(),e=!1,f=nA.j(function(){e=!0});Promise.all(jA(a)).then(function(g){f.removeListener();var h=g.filter(function(p){return"fulfilled"===p.status}).length,m=b.filter(function(p){return!Kz(p)}).map(function(p){return p.Wh()}).sort(),n=(new Date).getTime();C("PushServiceTopicSetup",{topics_requested_count:g.length,successful_topic_count:h,failed_topic_list:m,is_push_connected:yz(),elapsed_time:n-d});0<m.length&&!e&&(gA=window.setTimeout(function(){kA.h(void 0);lA*=2},lA));uz.h(0===m.length&&0<h)})}}function oA(a){var b=new xk(function(){pA(a.auth).then(function(){var c=a.auth.getCapabilities();cA(c)})},{yd:1E3,ce:2});kA.j(function(){yk(b)});Go.j(function(c){"authentication"===c.target&&yk(b)})}
function jA(a){return a.map(function(b){return Promise.resolve(b).then(function(c){return{status:"fulfilled",value:c}}).catch(function(c){return{status:"rejected",reason:c}})})};function qA(){var a=2;try{var b=!1;var c=!0}catch(d){c=b=!1}b?a=0:c&&(a=1);return{level:a}}
function rA(a){this.clientId=T(a,"client_id");this.Rq=hm(a,"token_request");this.wk=new Map;var b=gm(a,"settings");this.Lg={Vv:T(b,"backend"),restHost:S(b,"rest_host"),realtimeHost:S(b,"realtime_host"),fallbackHosts:em(b,"fallback_hosts"),flags:new Map};var c=this.Lg.flags;b=jm(b,"flags");if(void 0!==b){var d=Object.keys(b);d=q(d);for(var e=d.next();!e.done;e=d.next())e=e.value,c.set(e,b[e])}c=this.wk;b=jm(a,"failures");if(void 0!==b)for(d=Object.keys(b),d=q(d),e=d.next();!e.done;e=d.next())e=e.value,c.set(e,b[e]);nm(a)}rA.prototype.Qe=function(){return void 0!==this.Rq};rA.prototype.yi=function(){return JSON.stringify(this.Rq)};function sA(a){var b={},c=JSON.parse(a),d=Object.keys(c);d=q(d);for(var e=d.next();!e.done;e=d.next()){e=e.value;var f=c[e];f instanceof Array?b[e]=f.map(function(g){return g}):u("Invalid capability type for topic: "+e,{capability:a})}return b}function tA(a){Ux.call(this,a.token,a.expires,a.clientId);this.tokenDetails=a;this.capability=sA(a.capability)}r(tA,Ux);tA.prototype.yi=function(){return JSON.stringify(this.tokenDetails)};function uA(a){this.Zf=["global:news"];this.fA="";this.qe=a}function vA(a,b){a.fA=void 0===b?"":b.yi()}uA.prototype.yi=function(){return this.fA};uA.prototype.getCapabilities=function(){var a=this.mk;return void 0===a?{}:a.capability};function wA(a){return new Promise(function(b,c){return Vx(a.Zf).then(function(d){var e=jm(d,"failures");"object"===typeof e&&0!==Object.keys(e).length&&C("PushServiceClient",{action:"token_request_failed_topics",topics:e,client:"ably"});d=new rA(d);if(d.Qe()){vA(a,d);if(void 0===d.Rq)throw Error("Access to AblyContext.tokenRequest on an invalid context!");b(d.Rq)}else vA(a,void 0),c("Invalid token request")})})}
function xA(a,b){a:{if(void 0!==a.mk)if((new Date).getTime()>=a.mk.expires)a.mk=void 0;else{a=a.mk;break a}a=void 0}return void 0!==a&&a.capability.hasOwnProperty(b.Oc())}function wm(a,b){return xA(a,b)?a.mk:void 0}function yA(a,b){if(a.Zf.includes("room:"+b))return!1;a.Zf=a.Zf.filter(function(c){return!c.startsWith("room:")});a.Zf.push("room:"+b);return!0}
function pA(a){if(void 0!==a.Tn)return a.Tn.then(function(){return pA(a)});a.Tn=new Promise(function(b,c){a.qe.auth.authorize().then(function(d){a.Tn=void 0;d=new tA(d);a.mk=d;b()}).catch(function(d){a.Tn=void 0;c(zA("auth",d))})});return a.Tn}function AA(a,b){a.Zf=a.Zf.filter(function(c){return!c.startsWith(b.Wh())});a.Zf.push(b.Oc())}function BA(a,b){a.Zf=a.Zf.filter(function(c){return!c.startsWith(b.Wh())})}
function CA(a){rm.call(this);var b=this;this.RB="ably";this.Ei=new Map;this.disabled=new F("critical",{oe:1});this.$l=new F("connectionStateChange",{oe:1});if(!a.Ij.Qe())throw u("Invalid PushServiceContext made it to AblyClientImpl",a),Error("Invalid context");this.jA=void 0===a.jt?!0:!a.jt;this.context=a.Ij;this.qe=new Ably.Realtime.Promise(DA(this));this.auth=new uA(this.qe);vA(this.auth,this.context);this.qe.connection.on(function(c){c.previous!==c.current&&b.$l.h({yJ:b,previous:tm(c.previous),current:tm(c.current),reason:EA("connect",c.reason)})})}r(CA,rm);function DA(a){var b={autoConnect:!1,closeOnUnload:a.jA,log:qA(),authCallback:function(c,d){wA(a.auth).then(function(e){var f=sA(e.capability);f=FA(f);return Promise.all(jA(f)).then(function(){d(void 0,e)})}).catch(function(e){u("Error creating TokenRequest",e)})},restHost:a.context.Lg.restHost,realtimeHost:a.context.Lg.realtimeHost};0<a.context.Lg.fallbackHosts.length&&(b.fallbackHosts=a.context.Lg.fallbackHosts);return b}k=CA.prototype;k.connect=function(){var a=this;if(this.isConnected())return Promise.resolve();if(Rx.EB.has(tm(this.qe.connection.state))&&void 0===this.Zl)return Promise.reject("Connection is currently busy!");void 0===this.Zl&&(this.Zl=new Promise(function(b,c){function d(e){"connected"===e.current?(a.Zl=void 0,a.$l.removeListener(d),b()):"connecting"===e.previous&&(a.Zl=void 0,a.$l.removeListener(d),c(e.reason))}a.$l.j(d);a.qe.connect()}));return this.Zl};k.close=function(){this.isConnected()&&this.qe.close()};k.Ax=function(){var a,b,c,d,e;return null!==(e=null===(d=null===(c=null===(b=null===(a=this.qe.connection)||void 0===a?void 0:a.connectionManager)||void 0===b?void 0:b.activeProtocol)||void 0===c?void 0:c.transport)||void 0===d?void 0:d.shortName)&&void 0!==e?e:""};k.isConnected=function(){return"connected"===tm(this.qe.connection.state)};k.gt=function(){var a=this;this.jA||v(lb(),window,function(){a.close()});return rm.prototype.gt.call(this)};k.subscribe=function(a,b){var c=this,d=this.Ei.get(a.Oc());if(void 0!==d)return d.then(function(){return c.subscribe(a,b)});var e=a.Oc(),f=this.qe.channels.get(e);d=GA(f.state);if("subscribed"===d)return xm(this,a),Promise.resolve();if("subscribing"===d)return Promise.reject(zA("subscribe","Channel was already subscribing"));if(Sx.Ow.has(d))return Promise.reject(zA("subscribe",f.errorReason));var g=!1,h=nA.j(function(){g=!0});d=new Promise(function(m,n){vm(c,a).then(function(){return f.setOptions({dG:void 0,params:{},modes:["SUBSCRIBE","PRESENCE"]})}).then(function(){return f.subscribe(function(p){p=new P(p.data);p=a.Na(p);a.listener(p)})}).then(function(){var p=c.auth.getCapabilities()[e];if(Array.isArray(p)&&-1!==p.indexOf("presence")){p=f.presence;var A=p.enter;switch(a.Wh()){case jy:if(void 0!==c.qq){var z="";""!==c.qq.Fb&&(z=T(new P(c.qq.Fb),"hashtag"));z={exploring_hash:z,source_name:wn(c.qq.wc)}}break;default:z=void 0}p=A.call(p,z)}else p=Promise.resolve();return p}).catch(function(p){return"suspended"===f.state?f.detach():Promise.reject(p)}).then(function(){h.removeListener();xm(c,a);c.Ei.delete(e);m()}).catch(function(p){h.removeListener();c.Ei.delete(e);ym(c,a);g&&m();n(zA("subscribe",p))})});this.Ei.set(e,d);return d};k.unsubscribe=function(a){var b=this,c=this.Ei.get(a.Oc());if(void 0!==c)return c.then(function(){return b.unsubscribe(a)});var d=a.Oc(),e=this.qe.channels.get(d);c=GA(e.state);if("unsubscribed"===c||"initialized"===c)return ym(this,a),Promise.resolve();if(Sx.Ow.has(c))return Promise.reject(zA("unsubscribe",e.errorReason));c=new Promise(function(f,g){e.unsubscribe();ym(b,a);return e.detach().then(function(){b.Ei.delete(d);f()}).catch(function(h){b.Ei.delete(d);g("Failed to detach from topic "+d+" - "+
h)})});this.Ei.set(d,c);return c};k.xt=function(a){return"subscribed"===GA(this.qe.channels.get(a.Oc()).state)};function EA(a,b){a={code:a,message:"Unknown failure"};void 0!==b&&(a.message=b.message);return a}function zA(a,b){return void 0===b?{code:a,message:"Unknown"}:"string"===typeof b?{code:"auth",message:b}:"statusCode"in b?EA(a,b):b}
function tm(a){switch(a){case "initialized":return"initialized";case "connecting":return"connecting";case "connected":return"connected";case "closing":return"closing";case "closed":return"closed";case "disconnected":return"disconnected";case "failed":return"failed";case "suspended":return"suspended";default:return"unknown"}}
function GA(a){switch(a){case "initialized":return"initialized";case "attaching":return"subscribing";case "attached":return"subscribed";case "detaching":return"unsubscribing";case "detached":return"unsubscribed";case "failed":return"failed";case "suspended":return"suspended";default:return"unknown"}};var fA,HA;function IA(a){a=new P(a);var b={clientId:S(a,"client_id"),Lg:{Vv:"undefined",flags:new Map},Qe:function(){return!1}},c=im(a,"settings");if(void 0===c)return w("PushService parseContext failed: settings key does not exist",a),b;c=S(c,"backend");switch(c){case "ably":return new rA(a)}w("PushService parseContext failed: unrecognized backend or critical error in parse",[c,a]);return b}function eA(){return void 0!==fA&&fA.isEnabled()}function yz(){return void 0!==fA&&fA.isConnected()}
function JA(a){if(void 0!==HA)return HA;if(void 0!==fA)return Promise.resolve(fA);if(!a.Ij.Qe())return w("Push service context not valid:",a),Promise.reject("Invalid push service context");var b=a.Ij.Lg.Vv;try{switch(b){case "ably":fA=new CA(a)}}catch(d){w("An exception was thrown during client construction:",d)}if(void 0===fA)return Promise.reject("Failed to create a client for backend: "+b);var c=fA;return HA=new Promise(function(d,e){c.gt().then(function(){HA=void 0;d(c)}).catch(function(f){HA=void 0;e(f)})})}function bA(){if(void 0===fA)throw Error("PushServiceClient accessed before it's been created");return fA}function aA(a){if(!eA())throw Error("PushServiceClient accessed before it's ready");var b=bA();return yA(b.auth,a)?new Promise(function(c){pA(b.auth).then(function(){c(b.auth.getCapabilities())})}):Promise.resolve(b.auth.getCapabilities())}
function mA(a){if(!eA())return[];var b=bA(),c=[];a=q(a);for(var d=a.next();!d.done;d=a.next())d=d.value,xA(b.auth,d)?c.push(KA(d)):w("Push Attempting to subscribe to topic",d);return c}
function KA(a){var b=void 0===b?function(){}:b;var c=void 0===c?!1:c;if(eA()){var d=bA();return(new Promise(function(e){c?(AA(d.auth,a),pA(d.auth).then(e)):e()})).then(function(){return d.xt(a)?Promise.resolve():d.subscribe(a)}).catch(function(e){sm(d,"subscribe_failure",{topic:a.Oc(),auth:d.auth.yi(),message:e.message});b(e)})}}
function LA(a){var b=void 0===b?!1:b;var c=bA();return c.unsubscribe(a).then(function(){return b?(BA(c.auth,a),pA(c.auth)):Promise.resolve()}).catch(function(d){sm(c,"unsubscribe_failure",{topic:a.Oc(),auth:c.auth.yi(),message:d.message})})}function iA(a){if(!eA())return[];var b=[];a=q(a);for(var c=a.next();!c.done;c=a.next())b.push(LA(c.value));return b}function Kz(a){return eA()?bA().xt(a):!1}
function FA(a){if(!eA()||void 0===fA)return[];var b=fA.Gl,c=new Set(Object.keys(a)),d=[];b.forEach(function(e){c.has(e.Oc())||d.push(LA(e))});return d}try{var MA=new Uint8Array(1);pb(MA)}catch(a){}new F("ready",{oe:1});var nA=new F("PushServiceClosed",{oe:1});var NA;K.j(function(a){NA=a});function OA(){var a,b,c=Ia.current;return!0===(null===(a=c.Ij)||void 0===a?void 0:a.Lg.flags.get("offline_room_chat_pm_enabled"))||!0===(null===(b=c.qb)||void 0===b?void 0:b.wt)}
ey.j(function(a){var b=[""===a.N.username?X(Be):Rn(a.N),X(" tipped "+a.amount+" "+(1<a.amount?"tokens":"token"))];""!==a.message&&b.push(X(" -- "+a.message));a.pp&&b.push(X(" anonymously"));var c=void 0!==NA&&"offline"===NA.C.Ab;OA()&&c&&!0!==Ia.current.jt&&ao.h({na:[b],background:"#ff3",ya:"#000",weight:"bold",xa:!1,BD:0,xx:a.N.username,$j:a.$j})});ky.j(function(a){void 0!==NA&&PA(NA.A)&&(po(a.N.username)||NA.A.event.jl.h(a))});function QA(a){var b=this;this.d=a;this.tk=new Date;this.Ok=new Date;this.status=this.Dd="offline";this.Oi=void 0;this.Xu=!0;this.Jl=this.Pe=!1;this.Ir=2;this.wz="";this.Qb=!1;this.Fb="";this.wc="un";this.event={Kp:new F("messageSent"),jl:new F("roomMessage"),Ga:new F("roomNotice"),vh:new F("roomNoticeWowza"),Eu:new F("roomAppErrorWowza"),Iu:new F("roomMessageWowza"),hl:new F("roomControlWowza"),Tz:new F("roomPurchaseWowza"),Qz:new F("roomEnterLeave"),fE:new F("roomPrivilegedEnter"),gE:new F("roomPrivilegedLeave"),vz:new F("privateMessage"),kc:new F("statusChange",{Rd:15}),Px:new F("hiddenMessageChange"),Dz:new F("refreshPanel"),pv:new F("titleChange"),ww:new F("clearApp"),oq:new F("removeMessages"),zi:new F("settingsUpdate"),Pz:new F("roomCountUpdate"),My:new F("modStatusChange"),rv:Du,QD:new F("privateShowRequest"),cq:new F("playSound"),sB:new F("appTabRefresh"),sr:new F("appDebugLog"),Jq:new F("tipAlert"),CH:new F("leftRoom"),VB:new F("connectionLost"),Tp:new F("onBanSilence")};this.Mf=function(c){b.d.B===b.d.userName?(u("Error: cannot ignore users in this room"),new Promise(function(){return!1})):(b.event.Ga.h({na:[[X("Ignoring "+c)]],xa:!0}),B("api/ts/chat/ignored-users/",{username:c}).then(function(d){if("max"===d.responseText)return b.event.Ga.h({na:[[X("Please signup/login to enable this feature.")]],xa:!0}),!1;mo.add(c);no();return!0}).catch(function(d){u("Error posting ignore user: "+d);return!1}))};this.wv=function(c){b.event.Ga.h({na:[[X("No longer ignoring "+c)]],xa:!0});Ib("api/ts/chat/ignored-users/",{username:c}).then(function(){mo.delete(c);no();return!0}).catch(function(d){u("Error posting unignore user: "+d);return!1})};this.Ir=/cb2=1/.test(document.cookie)?2:1;this.Qb=this.username()===this.B();this.su=new Mx;this.qD=new Pw(this);this.Ce=0===a.Sl.indexOf("__anonymous__");!1===this.Ce&&oo();RA(this);this.Pe=a.Pe;this.Nj=a.ta.Nj;this.Pj=a.ta.Pj;this.NE=this.Qb?"public":a.Ab;this.Ud=a.Ud;this.Ng=a.Ng;this.Fb=this.d.Fb;this.wc=this.d.wc;ix(this,"notconnected")}k=QA.prototype;k.Xg=function(){return this.d.Xg};function PA(a){return OA()&&"offline"===a.d.Ab}k.disconnect=function(){this.Xu=!1;void 0!==this.Oi&&(this.Oi.close(),this.Oi=void 0)};function ix(a,b){b!==a.status&&(a.Dd=a.status,a.status=b,a.Qb&&"notconnected"===a.Dd&&"public"===a.status&&Nv(),a.Ok=new Date,a.event.kc.h({Dd:a.Dd,Ra:a.status}))}function SA(a){a.Jl=!a.Jl;lq.h(a.Jl)}
function TA(a){switch(a.status){case "privatewatching":return!0;case "privaterequesting":case "privatenotwatching":case "passwordprotected":case "public":case "away":case "hidden":case "offline":case "privatespying":case "notconnected":return!1;default:return w("unexpected status: "+a.status),!1}}
function yu(a,b,c){b=void 0===b?"a":b;c=void 0===c?!0:c;if("offline"===a.status||"notconnected"===a.status||"unknown"===a.status)return new Promise(function(e){e({Rn:0,kk:0,jf:[]})});if(void 0!==a.pn)return a.pn;var d={roomname:a.B(),"private":TA(a),sort_by:b,exclude_staff:c};a.pn=new Promise(function(e,f){y("api/getchatuserlist/?"+vb(d)).then(function(g){g=new Px(g.responseText);e(g);a.pn=void 0}).catch(function(g){f(g);a.pn=void 0})});return a.pn}
function RA(a){var b;if(0<a.d.host.length){var c="http"===a.d.host.substring(0,4)?new SockJS(a.d.host):new WebSocket(a.d.host);a.Oi=c;c.onclose=function(d){yv("Connection closed:"+JSON.stringify(d));void 0!==b?a.event.Ga.h({na:[[X("Trying to reconnect")]],xa:!0}):(a.event.Ga.h({na:[[X("Chat disconnected")]],xa:!0}),a.event.VB.h(void 0),a.Xu&&(b=window.setTimeout(function(){a.event.Ga.h({na:[[X("Trying to reconnect")]],xa:!0});RA(a)},Nx(a.su))))};c.onerror=function(d){yv("Connection error:"+JSON.stringify(d));void 0===b&&a.Xu&&(b=window.setTimeout(function(){RA(a)},Nx(a.su)))};c.onmessage=function(d){var e=a.qD;d=d.data;var f=JSON.parse(d);f={method:f.method,callback:f.callback,K:f.args};0<=Object.keys(gx).indexOf(f.method)?(e.ea.event.hl.h(f),gx[f.method](e.ea,f)):u("Unknown message method: "+f.method+" args: "+d)};c.onopen=function(){a.Ok=new Date;mx(a,"connect",{user:a.d.Sl,password:a.d.bB,room:a.d.B,room_password:a.d.Sz})}}}k.ad=function(){return this.Oi};k.readyState=function(){if(void 0!==this.Oi)switch(this.Oi.readyState){case WebSocket.CLOSED:return"closed";case WebSocket.OPEN:return"open";case WebSocket.CLOSING:return"closing";case WebSocket.CONNECTING:return"connecting";default:return"unknown"}else return"websocket undefined"};function kx(a){a.su.reset();lx(a,a.d.jc)}
function UA(a,b){new Promise(function(c,d){B("push_service/publish_chat_message/",{room:a.d.B,message:b}).catch(function(e){403===e.Kd.status||u("(Push Service) calling publish_chat_message returned an error",e);d("Message failed to send")}).then(function(e){var f="ok"===e.responseText;C("SendRoomMessage",{username:a.d.B,source:"offline",success:f});f||bo.h({message:e.responseText});c()}).catch(d)})}function mx(a,b,c){c=void 0===c?{}:c;b=JSON.stringify({method:b,data:c});a.ad().send(b)}
function VA(a,b){a.event.Kp.h(void 0);C("SendRoomMessage");var c=pb(new Uint32Array(1))[0];b=JSON.stringify({v:a.Ir,m:b,f:"",c:"",tid:c});PA(a)?UA(a,b):a.ad().readyState===WebSocket.OPEN&&mx(a,TA(a)?"messagePrivateRoom":"messageRoom",{room:a.d.B,msg:b})}function WA(a){mx(a,"updateRoomCount",{room_uid:a.d.iE,model_name:a.B(),private_room:"privatewatching"===a.status})}
function zt(a,b){var c=tt;c.event.Kp.h(void 0);mx(c,TA(c)?"addPrivateUserMsgToUser":"addUserMsgToUser",{msg:JSON.stringify({v:c.Ir,m:a,f:"",c:""}),room:c.B(),to_user:b})}function XA(a,b){mx(a,"kickUser",{user:b,room:a.B()})}
function Hv(a,b,c,d){return new Promise(function(e,f){"public"!==a.status?f("unexpected status: "+a.status):B("tipping/private_show_request/"+a.B()+"/",{chat_username:a.username(),price:""+b,private_show_minimum_minutes:""+c,recordings_allowed:""+d}).then(function(g){g=new P(g.responseText);var h=T(g,"message",!1);V(g,"success")?(nm(g),ix(a,"privaterequesting"),a.event.Ga.h({na:[[X(Wd)]],ya:"#222",background:"#ff8b45",weight:"bold",xa:!0}),e("")):(""===h&&(u("unknown cannot start private show reason"),h="Cannot start private show."),e(h))}).catch(function(g){f(g)})})}
function Jv(a){return new Promise(function(b,c){"privatenotwatching"!==a.status?c("unexpected status: "+a.status):B("tipping/spy_on_private_show_request/"+a.B()+"/",{chat_username:a.username()}).then(function(d){d=new P(d.responseText);var e=V(d,"success"),f=T(d,"message",!1);nm(d);e?(ix(a,"privatespying"),a.event.Ga.h({na:[[X("You are spying on the private show")]],ya:"#222",background:"#ff8b45",weight:"bold",xa:!0}),b("")):(""===f&&(f="Error joining spy show"),b(f))}).catch(function(d){c(d)})})}
function Lv(a){return new Promise(function(b){var c="tipping/private_show_cancel/"+a.B()+"/",d=a.status;B(c,{}).then(function(e){e=new P(e.responseText);var f=V(e,"success"),g=W(e,"remaining_seconds"),h=U(e,"private_show_minimum_minutes");nm(e);switch(d){case "privatewatching":if(!f){0===g?b(Ud):(e="You have started a private show with a "+h+" minute minimum. You cannot cancel your private show yet. It still has "+(g+" seconds remaining."),b(e));break}b("");break;case "privatespying":if(!f){b("Unable to cancel spy show");break}ix(a,"privatenotwatching");b("");break;case "privaterequesting":if(!f){b("Unable to cancel private request");break}b("");break;default:w("leave private show from status: "+d),f?b(""):b("Unable to leave private show from status: "+d)}})})}function hx(a){mx(a,"joinRoom",{room:a.B(),exploringHashTag:a.Fb,source_name:a.wc});a.Fb="";a.wc="df"}function jx(a){window.setTimeout(function(){mx(a,"joinPrivateRoom",{room:a.B()})},500)}k.B=function(){return this.d.B};k.ed=function(){return this.d.ed};k.username=function(){return this.d.Sl};function YA(a){var b=mo;return void 0===b?(u("ignoreSet should not be undefined"),!1):b.has(a)}function Jx(a,b,c){if(c.username===a.username())return!1;if(c.username===uv)return!0;if(3!==b)if(2===b){if(c.username===a.B()||c.fc||c.Ec)return!0}else if(1===b){if(c.username===a.B()||c.fc||c.Ec||c.je&&(a.Qb||a.Pe))return!0}else if(0===b&&(c.username===a.B()||c.fc||c.Ec||a.Qb||a.Pe))return!0;return!1}var Kx=new Set(["privatewatching","privatenotwatching","privatespying"]);function ZA(a,b,c,d){d=void 0===d?!1:d;G.call(this);var e=this;this.username=a;this.Tc=b;this.A=c;this.Ak=[];this.cj=[];this.rt=!1;this.Vl=new F("closeChatReportRequest");this.XD=new F("reportSent");this.WC=new F("ignoreReportedUser");this.kF=function(m){m.stopPropagation();27===m.keyCode?e.Vl.h(!1):9===m.keyCode&&(m.preventDefault(),e.rt?$A(e,e.cj,m.shiftKey):$A(e,e.Ak,m.shiftKey))};H(this.element,"chatReport");this.element.style.position="static";this.element.style.fontFamily="UbuntuBold, Arial, Helvetica, sans-serif";this.element.style.fontSize="11px";this.form=document.createElement("form");b=document.createElement("div");a=document.createElement("div");this.gd=document.createElement("textarea");this.form.appendChild(b);this.form.style.width="100%";H(b,"headerDiv");b.style.margin="6px";b.style.fontSize="13px";b.innerText=sg+" "+this.username;b="message"===(void 0===this.Tc?"user":"message")?{inappropriate:kg,rude:lg,spam:mg,other:ng}:{inappropriate:og,rude:pg,spam:qg,other:rg};c={};for(var f in b){var g=document.createElement("label");c.pf=document.createElement("input");var h=document.createElement("span");g.style.display="block";g.style.margin="6px 8px";c.pf.type="radio";c.pf.style.margin="0 4px 0 2px";c.pf.name="chatReport";c.pf.value=f;h.innerText=b[f];d&&"rude"===f&&(c.pf.style.display="inline-block",c.pf.style.marginBottom="5px",h.style.display="inline-block",h.style.width="135px",h.style.verticalAlign="bottom");g.appendChild(c.pf);g.appendChild(h);this.form.appendChild(g);g.onclick=function(m){return function(){e.io=m.pf}}(c);this.Ak.push(c.pf);c={pf:c.pf}}a.style.margin="6px 8px";this.gd.draggable=!1;this.gd.style.resize="none";this.gd.style.boxSizing="border-box";this.gd.style.height="40px";this.gd.style.width="100%";this.gd.style.border="1px solid #b1b1b1";this.gd.maxLength=255;this.gd.oninput=function(){e.gd.value=e.gd.value.slice(0,255)};a.appendChild(this.gd);this.form.appendChild(a);this.Ak.push(this.gd);this.pk=document.createElement("div");this.pk.style.margin="0 0 8px";this.pk.style.cssFloat="right";this.pk.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";d=document.createElement("button");H(d,"submitButton");d.type="submit";d.innerText=tg;d.style.fontSize="11px";d.style.padding="4px 6px 4px 6px";d.style.marginRight="8px";d.style.background="linear-gradient(#f66d51, #eb3404)";d.style.border="none";d.style.borderRadius="4px";d.style.boxSizing="border-box";d.style.cursor="pointer";d.style.display="inline-block";f=document.createElement("button");H(f,"cancelButton");f.type="button";f.innerText=Wf;f.style.fontSize="11px";f.style.padding="4px 6px 4px 6px";f.style.marginRight="8px";f.style.background="linear-gradient(#8b8b8b, #686868)";f.style.border="none";f.style.borderRadius="4px";f.style.boxSizing="border-box";f.style.cursor="pointer";f.style.display="inline-block";this.pk.appendChild(f);this.pk.appendChild(d);this.form.appendChild(this.pk);this.Ak.push(f);this.Ak.push(d);aB(this);v("submit",this.form,function(m){m.preventDefault();e.gd.blur();void 0===e.io?J(kf,e.lm.bind(e)):"other"===e.io.value&&""===e.gd.value.trim()?J(jg,e.sC.bind(e)):(e.Ou().then(function(n){n.success?(n=e.username,n=Ec(M("%(username)s has been reported"),{username:n},!0),e.gk.innerText=n):e.gk.innerText=ug}).catch(function(n){e.gk.innerText=403===n.Kd.status?vg:ug}),e.XD.h(void 0),bB(e))});v("click",f,function(m){m.preventDefault();e.Vl.h(!1)});this.element.appendChild(this.form);this.element.appendChild(this.xk);v("keydown",this.element,this.kF)}r(ZA,G);function bB(a){var b=a.element.offsetWidth,c=a.element.offsetHeight;a.form.style.display="none";a.xk.style.display="block";a.xk.style.width=b+"px";a.xk.style.height=c+"px";a.bh.style.padding=c/2-a.bh.offsetHeight/2+"px 0 0";a.rt=!0}function cB(a){a=new P(a);return{success:"success"===S(a,"result"),ct:S(a,"html")}}
ZA.prototype.Ou=function(){var a=this;return new Promise(function(b,c){var d=void 0===a.io?"":a.io.value,e=a.gd.value;return void 0===a.Tc?B("api/ts/chatmessages/report/"+a.username+"/",{category:d,additional_comments:e}).then(function(f){b(cB(f.responseText))}).catch(function(f){c(f)}):B("chatmessages/report/"+a.Tc+"/",{spammer:a.username,category:d,additional_comments:e}).then(function(f){b(cB(f.responseText))}).catch(function(f){c(f)})})};function aB(a){a.xk=document.createElement("div");a.bh=document.createElement("div");a.gk=document.createElement("div");a.fb=document.createElement("button");var b=[],c=document.createElement("button");a.cj.push(a.fb);for(var d=q(b),e=d.next();!e.done;e=d.next())a.cj.push(e.value);a.cj.push(c);a.gk.innerText=Bd;a.gk.style.margin="0 0 8px 0";a.gk.style.textAlign="center";H(a.fb,"ignoreUserLink");H(c,"closeReportLink");a.fb.style.textAlign="center";a.fb.style.fontSize="13px";a.fb.style.display="block";a.fb.style.margin="0 auto 8px";a.fb.style.background="none";a.fb.style.border="none";a.fb.style.cursor="pointer";void 0!==a.A&&dB(a,YA(a.username));d=q(b);for(e=d.next();!e.done;e=d.next())e=e.value,e.style.textAlign="center",e.style.fontSize="13px",e.style.display="block",e.style.margin="0 auto 8px",e.style.background="none",e.style.border="none",e.style.cursor="pointer";c.innerText=Uf;c.style.textAlign="center";c.style.fontSize="13px";c.style.display="block";c.style.margin="0 auto 8px";c.style.background="none";c.style.border="none";c.style.cursor="pointer";eB(c);a.xk.style.display="none";a.bh.style.fontSize="13px";a.bh.style.fontFamily="Arial, Helvetica, sans-serif";a.bh.appendChild(a.gk);void 0!==a.A&&a.A.username()!==a.A.B()&&a.bh.appendChild(a.fb);b=q(b);for(e=b.next();!e.done;e=b.next())a.bh.appendChild(e.value);a.bh.appendChild(c);a.xk.appendChild(a.bh);v("click",c,function(f){f.preventDefault();a.Vl.h(!0)})}
function fB(a){a.fb.disabled=!0;a.fb.style.cursor="default";a.fb.style.textDecoration="none";a.fb.onmouseenter=function(){};a.fb.onmouseleave=function(){};a.fb.onclick=function(){};H(a.fb,"disabled");var b=a.cj.indexOf(a.fb);-1!==b&&a.cj.splice(b,1);a.fb.blur()}function $A(a,b,c){if(document.activeElement instanceof HTMLElement){var d=b.indexOf(document.activeElement);-1===d?a.lm():(c?(a=d-1,0>a&&(a+=b.length)):a=(d+1)%b.length,b[a].focus())}else a.lm()}
function dB(a,b){void 0!==a.A&&(b?(a.fb.innerText=Uc(a.username),fB(a)):(a.fb.innerText=Vc(a.username),I(a.fb,"disabled"),eB(a.fb),a.fb.disabled=!1,a.fb.onclick=function(){Bq()?a.fb.innerText=If:(C("IgnoreUser",{username:a.username,location:"PMTab"}),void 0!==a.A&&a.A.Mf(a.username),a.fb.innerText=Uc(a.username),a.WC.h(void 0));fB(a)}))}ZA.prototype.sC=function(){this.gd.focus()};ZA.prototype.lm=function(){this.rt?this.cj[0].focus():this.Ak[0].focus()};ZA.prototype.kv=function(){};function eB(a){a.onmouseenter=function(){a.style.textDecoration="underline"};a.onmouseleave=function(){a.style.textDecoration="none"}};var gB="1"===wb().signup_notice;function hB(){G.call(this);var a=this;this.element.style.backgroundColor="#f7f6a8";this.element.style.fontSize="12px";this.element.style.padding="3px 10px";this.element.style.boxSizing="border-box";this.element.style.display="none";this.element.style.width="auto";this.element.style.height="auto";var b=document.createElement("a");b.innerText=ae;b.onclick=function(){C("Subscribe")};this.element.appendChild(b);this.element.appendChild(document.createTextNode(" -- totally free, no email needed"));gB&&K.j(function(c){window.self!==window.top&&(b.onclick=function(d){d.preventDefault();nj("/accounts/register/?next="+encodeURIComponent(window.location.pathname)+"?b="+c.C.B)});b.href="/accounts/register/?next="+encodeURIComponent(window.location.pathname)+"?b="+c.C.B;a.element.style.display=c.A.Ce?"block":"none"})}r(hB,G);function iB(a,b){b=void 0===b?!1:b;G.call(this);var c=this;this.Hb=a;this.rj=b;this.Xe=new F("requestControlVisibility");this.Ai=!0;this.Kn=!1;this.Ve=new F("possibleQualityLevelsChanged");this.xc=new F("videoOfflineChange");this.al=new F("playbackStart");this.gi=0;this.Fp=!1;this.stopped=this.muted=!0;this.url="";this.Cp=0;this.I=new Ub;this.Tg=new Wr(this.rj?"JpegToHlsPlayer":"JpegPushPlayer");Xr(this.Tg);this.element.style.background="#333333 url(https://static-assets.highwebmedia.com/tsdefaultassets/cam_notice_background.jpg) center center / cover";this.element.className="videoPlayerDiv";this.element.style.position="static";this.Vc=document.createElement("img");this.Vc.style.width="100%";this.Vc.style.height="100%";this.Vc.style["object-fit"]="contain";this.Vc.style.backgroundColor="black";this.Vc.onload=function(){c.Vc.style.display="inline";c.Fp=!1};this.Vc.onerror=function(){c.Vc.style.display="none";c.Cp-=100;c.Fp=!1};this.element.appendChild(this.Vc);kb()||(this.requestAnimationFrame=Sa(),jB(this,0))}r(iB,G);function kB(a){a.Cp=Date.now();void 0!==a.W&&B("get_edge_hls_url_ajax/",{room_slug:a.W,jpeg:"1"}).then(function(b){var c=new P(b.responseText),d=V(c,"success");"offline"===Wp(T(c,"room_status"))?(a.xc.h(!0),a.stop()):(a.xc.h(!1),c.Mf("url"),c.Mf("hidden_message"),d?(a.url=T(c,"cbjpeg_url",!1),nm(c)):u("Unable to refresh JPEG stream",{error:b.responseText},"VIDEO_"))}).catch(function(b){u("Unable to refresh JPEG stream",{error:b},"VIDEO_")})}
function jB(a,b){a.rj||(5E3<Date.now()-a.Cp&&kB(a),a.stopped||""===a.url||kb()?a.Vc.style.visibility="hidden":(0===a.gi||140<b-a.gi)&&!a.Fp&&(a.Fp=!0,a.gi=b,a.Vc.src=a.url+"&f="+Math.random(),"visible"!==a.Vc.style.visibility&&(a.al.h(void 0),a.Vc.style.visibility="visible")),a.requestAnimationFrame.call(window,function(c){jB(a,c)}))}k=iB.prototype;k.Kf=function(a){var b=this;this.stopped=!1;Vb(this.I);E(a.A.event.kc.j(function(c){void 0!==b.Hb.yh.get(c.Ra)||b.Be?b.stop():b.stopped=!1}),this.I);this.W=a.C.B;this.url=a.C.yt?"":Gm+"stream?room="+this.W;this.Xe.h(!0);this.rj&&(this.Vc.src=this.url+"&f="+Math.random(),this.Vc.style.visibility="visible")};k.Tj=function(a){this.volume=a};k.jj=function(){return this.muted?0:this.volume};k.$f=function(a){this.muted=a};k.stop=function(){this.Vc.style.visibility="hidden";this.stopped=!0};k.af=function(){};k.ue=function(){this.Xe.h(!0)};k.Mg=function(){this.Xe.h(!0)};k.pl=function(){return!0};k.ac=function(){return 0};k.dj=function(){ic(this.element)};k.nl=function(){};k.kg=function(){this.stop();Vb(this.I)};var lB=new F("HlsNativePlayer:AirPlayChange");function mB(a){fs.call(this,a,"HlsNativePlayer");var b=this;this.lh=0;this.XA=this.vd=!1;this.hu=this.M;this.element.appendChild(this.M);Zr(this.Tg,this.M);lB.j(function(d){b.XA=d});hb()&&rj.j(function(d){b.XA||(d?is(b,b.context):b.M.pause())},!1);tr.j(function(d){b.wf=d});this.M.onclick=function(){b.play()};this.M.onpause=function(){};this.M.onplay=function(){C("VideoOnloadMuteStatus",{muted:b.M.muted,chatMode:b.wf});b.M.muted||(b.vd=!0)};this.M.oncanplay=function(){b.Sf&&ms(b)};this.M.oncanplaythrough=function(){b.play()};this.M.onseeking=function(){};this.M.onerror=function(d){u(d,{},"VIDEO_")};this.M.onvolumechange=function(){var d=b.M.volume,e=b.M.muted;0===d&&(e=!0);e||b.vd||0!==Nb||(b.vd=!0,C("UserUnmuted",{chatMode:b.wf}));b.Sj.h({T:e,save:!0});b.un.h({volume:100*d,save:!0});void 0===b.xb||e||(b.element.removeChild(b.xb),b.xb=void 0)};this.M.onstalled=function(){sj&&!b.ot&&(b.M.pause(),window.setTimeout(function(){b.play()},10))};v("enterpictureinpicture",this.M,function(){es.h({active:!0})});v("leavepictureinpicture",this.M,function(){es.h({active:!1,$A:b.M.paused})});var c=this.M.webkitPresentationMode;v("webkitpresentationmodechanged",this.M,function(){var d=b.M.webkitPresentationMode;-1!==["inline","fullscreen"].indexOf(c)&&"picture-in-picture"===d?es.h({active:!0}):"picture-in-picture"===c&&-1!==["inline","fullscreen"].indexOf(d)&&es.h({active:!1,$A:b.M.paused});c=d});10===gb()&&nB(this)}r(mB,fs);k=mB.prototype;k.Cy=function(a,b){var c=this;rs(this,a);null===this.M.onplaying&&(this.M.onplaying=function(){rs(c,a)});null===this.M.ontimeupdate&&(this.M.ontimeupdate=function(){var d=c.M.currentTime;5<d-c.lh&&(c.lh=d,rs(c,a,function(){c.lh=0}),c.Tq=!1)});""!==b?this.M.src=b:this.M.removeAttribute("src");this.M.load();this.M.style.display="inline";"oncanplaythrough"in window||this.play();""===b&&(this.stop(),os(this))};k.Tj=function(a){this.M.volume=a/100};k.jj=function(){return this.M.muted||!this.Sf&&this.M.paused?0:100*this.M.volume};k.$f=function(a){this.M.muted=a;this.Sj.h({T:a,save:!0});a?this.M.setAttribute("muted",""):this.M.removeAttribute("muted")};k.stop=function(){this.lh=0;this.M.style.display="none";this.M.pause();this.M.removeAttribute("src");this.M.load();fs.prototype.stop.call(this)};k.Yc=function(){this.M.setAttribute("controls","")};k.Lf=function(){this.M.removeAttribute("controls")};k.ue=function(){fs.prototype.ue.call(this);this.Yc();void 0!==this.xb&&(this.xb.style.display="block")};k.Mg=function(){fs.prototype.Mg.call(this);this.Lf();void 0!==this.xb&&(this.xb.style.display="none")};k.af=function(){};k.nl=function(a,b){this.M.volume=a/100;0===a||b?(this.M.muted=!0,this.M.setAttribute("muted","")):(this.M.muted=!1,this.M.removeAttribute("muted"))};k.ac=function(){return 0};k.dj=function(){ic(this.M);this.ue()};k.xl=function(){this.dj()};function nB(a){a.xb=document.createElement("span");a.xb.style.position="absolute";a.xb.style.top="6px";a.xb.style.right="6px";a.xb.style.opacity="0.8";a.xb.style.rx="right";a.xb.style.backgroundColor="rgba(255, 255, 255, 0.8)";a.xb.style.borderRadius="6px";a.xb.style.height="36px";a.xb.style.padding="3px";a.xb.style.cursor="pointer";var b=document.createElement("span");b.textContent=Hi;b.style.color="#0c6a93";b.style.fontSize="14px";b.style.padding="6px";b.style.position="relative";b.style.top="2px";b.style.textShadow="0 0 1px #0c6a93";var c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/images/volume-mute.svg";c.style.width="36px";c.style.height="36px";c.style.display="inline";c.style.verticalAlign="middle";a.xb.appendChild(b);a.xb.appendChild(c);a.element.appendChild(a.xb);a.xb.onclick=function(){a.$f(!1);void 0!==a.xb&&(a.element.removeChild(a.xb),a.xb=void 0)};window.setTimeout(function(){b.style.display="none"},5E3)};var oB=window.videojs;function pB(a){fs.call(this,a,"VideoJsPlayer");var b=this;this.lh=0;this.T=!0;this.vd=this.Rt=!1;this.Mh=document.createElement("div");this.kd=!1;this.M.className="video-js vjs-default-skin";oB.log.level("error");this.Mh.style.position="absolute";this.Mh.style.backgroundColor="#000000";this.Mh.style.width="inherit";this.Mh.style.height="inherit";var c=this;this.element.onclick=function(){b.Rt&&(b.pl()?b.Mg():b.ue(),b.Rt=!1)};var d=oB(this.M,{techOrder:["html5"],autoplay:!0,html5:{hlsjsConfig:{debug:!1,liveSyncDuration:3,liveSyncDurationCount:void 0,liveDurationInfinity:Infinity,liveMaxLatencyDuration:7,liveMaxLatencyDurationCount:void 0,liveBackBufferLength:30}},controlBar:{playToggle:!1,progressControl:!1,remainingTimeDisplay:!1,durationDisplay:!1,currentTimeDisplay:!1,timeDivider:!1}});this.R=d;if(void 0!==d){Zr(this.Tg,d);void 0!==oB.Html5Hlsjs&&oB.Html5Hlsjs.addHook("beforeinitialize",function(f,g){f===d&&b.Tg.yB(g)});this.hu=d;qB(this);d.on("volumechange",function(){c.Tj(c.jj(!1))});d.on("canplay",function(){c.play();c.Sf&&ms(c)});d.on("canplaythrough",function(){c.play()});var e=this.Ve;d.on("updateVideoControlQuality",function(f,g){f=[];g=q(g);for(var h=g.next();!h.done;h=g.next())h=h.value,f.push({label:h.label,ak:h.selected,value:h.id});e.h(f);rB(c,f)});d.on("enterpictureinpicture",function(){es.h({active:!0})});d.on("leavepictureinpicture",function(){window.setTimeout(function(){es.h({active:!1,$A:d.paused()})},0)})}d.controls(this.pl());window.videoJsPlayer=d;tr.j(function(f){b.wf=f})}r(pB,fs);function qB(a){var b=0,c=window.setInterval(function(){10<=b&&clearInterval(c);void 0!==a.R&&void 0!==a.R.chromecastSessionManager&&(a.R.chromecastSessionManager.getCastContext().addEventListener("sessionstatechanged",function(d){if(void 0!==d.sessionState)switch(d.sessionState){case "SESSION_STARTED":case "SESSION_RESUMED":sB(a);a.kd||void 0===a.R||(a.R.off("canplay"),a.R.off("canplaythrough"));a.stop();window.setTimeout(function(){a.kd=!0;is(a,a.context);a.Tj(a.jj(!1));tB(a);void 0!==a.R&&(a.R.tech_._ui._findTitleEl().style.visibility="hidden")},1E3);a.Hb.D();uB(a);break;case "SESSION_ENDED":window.setTimeout(function(){if(void 0!==a.R){a.kd=!1;var e=a.jj(!1);a.R.muted(a.T);a.R.volume(e);is(a,a.context);vB(a);wB(a)}},2500),a.Mh.parentElement===a.element&&a.element.removeChild(a.Mh),a.Hb.show()}}),clearInterval(c));b+=1},1E3)}k=pB.prototype;k.Cy=function(a,b){if(""===b)this.stop();else{var c=this;this.kd?(uB(this),this.Hb.D(),os(this)):(this.Hb.show(),rs(this,a));void 0!==this.R?(this.kd?this.R.tech_.setSource({src:b,type:"application/x-mpegURL"}):this.kd||(this.R.on("playing",function(){rs(c,a)}),this.R.on("waiting",function(){rs(c,a)}),this.R.on("timeupdate",function(){if(void 0!==c.R){var d=c.R.currentTime();5<d-c.lh&&(c.lh=d,rs(c,a,function(){c.lh=0}),c.Tq=!1)}}),this.R.off("error"),this.R.on("error",function(d){if(void 0!==c.R){var e=c.R.error();null===e||2!==e.code&&4!==e.code||(c.Sf||is(c,a),u(e.message,d,"VIDEO_"))}else u("Videojs error type undefined",d,"VIDEO_")}),this.R.src({src:b,type:"application/x-mpegURL"}),this.R.qualityPickerPlugin(),this.R.show(),this.R.muted(this.T),this.M.style.display="inline"),this.hu=this.R,vB(this)):J("something went wrong")}};function tB(a){if(a.kd&&void 0!==a.R&&void 0!==a.R.chromecastSessionManager){var b=a.R.chromecastSessionManager.getCastContext().getCurrentSession();if(void 0!==b){var c=0;b.addMessageListener("urn:x-cast:com.highwebmedia.cast.media",function(d,e){a.kd&&e.includes("PAUSED")?(clearTimeout(c),c=window.setTimeout(function(){is(a,a.context)},2500)):a.kd&&e.includes("BUFFERING")?(clearTimeout(c),c=window.setTimeout(function(){is(a,a.context)},7500)):!a.kd||e.includes("PLAYING")?clearTimeout(c):a.kd&&e.includes("MEDIA_ERROR")&&is(a,a.context)})}}}k.Tj=function(a){if(void 0!==this.R){var b=this.T;this.T=0===a||this.R.muted();!b||this.T||this.vd||(this.vd=!0,C("UserUnmuted",{chatMode:this.wf}));this.un.h({volume:a,save:!0});this.Sj.h({T:this.T,save:!0})}};k.$f=function(a){this.T=a;this.Sj.h({T:a,save:!0});void 0!==this.R&&this.R.muted(a)};k.nl=function(a,b){this.T=b;void 0!==this.R&&(this.R.volume(a/100),this.R.muted(b))};k.jj=function(a){return void 0!==this.R?(void 0===a||a)&&this.R.muted()?0:100*this.R.volume():0};k.stop=function(){this.lh=0;if(!this.kd&&void 0!==this.R)this.R.off("timeupdate"),this.R.off("waiting"),this.R.off("playing"),this.R.pause(),sB(this),this.R.src(),this.R.hide(),this.R.muted(this.T);else if(this.kd&&void 0!==this.R){this.R.pause();this.R.src();this.R.hide();return}fs.prototype.stop.call(this)};function uB(a){a.Mh!==a.element.firstChild&&a.element.insertBefore(a.Mh,a.element.firstChild)}
function vB(a){a.kd||void 0!==a.Bi||void 0===a.R||(a.Bi=a.R.tech(),a.Bi.on("loadedqualitydataTS",function(b,c){C("VideoOnloadMuteStatus",{muted:a.T,chatMode:a.wf});a.T||(a.vd=!0);b=[];c=q(c.qualityData.video);for(var d=c.next();!d.done;d=c.next())d=d.value,b.push({label:d.label,ak:d.selected,value:d.id});a.Ve.h(b);rB(a,b)}))}function wB(a){a.kd||void 0===a.R||(a.R.on("canplay",function(){a.play();a.Sf&&ms(a)}),a.R.on("canplaythrough",function(){a.play()}))}
function sB(a){a.kd||void 0===a.Bi||(a.Bi.off("loadedqualitydataTS"),void 0!==a.Bi.hlsProvider&&a.Bi.hlsProvider.dispose(),a.Bi.reset(),a.Bi=void 0)}k.af=function(a){void 0!==this.R&&this.R.selectQualityButton(a)};k.Qs=function(){fs.prototype.Qs.call(this);this.Xe.h(!0);this.Rt=!0};k.ue=function(){fs.prototype.ue.call(this);void 0!==this.R&&this.R.controls(!0)};k.Mg=function(){fs.prototype.Mg.call(this);void 0!==this.R&&this.R.controls(!1)};k.dj=function(){void 0!==this.R&&(this.R.requestFullscreen(),this.ue())};k.ac=function(){return 0};function rB(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next())c=c.value,c.ak&&a.Tg.af(c.label)};function xB(a,b,c){G.call(this);this.Hb=b;this.xc=new F("videoOfflineChange");a=yB(this,a);this.Go(a,c);this.Db=document.createElement("img");this.Db.src=jp();this.Db.className="cbLogo";this.Db.style.position="fixed";this.Db.style.width="90px";this.Db.style.height="27px";this.Db.style.top="8px";this.Db.style.right="8px";this.Db.style.userSelect="none";this.Db.style.msUserSelect="none";this.Db.style.msUserSelect="none";this.Db.style.pointerEvents="none";this.Db.setAttribute("draggable","false");this.element.appendChild(this.Db);Nc.Wu&&(this.Db.style.visibility="hidden")}r(xB,G);k=xB.prototype;k.Cr=function(){var a=this,b;null===(b=this.O.Au)||void 0===b?void 0:b.j(function(c){a.Ms(c)});this.O.xc.j(function(c){a.xc.h(c);a.Hb.Tu(c)})};k.AA=function(){};function zB(){return(void 0===navigator.userAgent?0:/android/i.test(navigator.userAgent))||!Ra()?"videojs":"hlsnative"}k.uw=function(){return"jpegToHls"};function yB(a,b){var c=wb().player;if(void 0!==c)return"hls"===c&&(c=zB()),c;if(!Ra()&&!Ja.isSupported()){if(a=gB)a:{a=navigator.userAgent.match(/Firefox\/([0-9]+)/);if(null!==a&&2===a.length&&(a=parseInt(a[1]),!isNaN(a)&&55<=a)){a=!0;break a}a=!1}if(!(a||0>=swfobject.getFlashPlayerVersion().major))return"flash";Qr({eventName:"jpegFallback",hlsNativeSupported:Ra(),hlsJsSupported:Pr.isSupported()});return"jpeg"}return b?zB():a.uw()}
k.Go=function(a,b){var c;switch(a){case "flash":a=new $r;break;case "videojs":a=new pB(this.Hb);break;case "hlsnative":a=new mB(this.Hb);break;case "jpeg":a=new iB(this.Hb);break;case "jpegToHls":a=new iB(this.Hb,!0);break;default:u("received unexpected player name: "+a);J("unknown player: "+a);return}b=!(null!==(c=null===b||void 0===b?void 0:b.zD)&&void 0!==c&&c);this.O=Xb(this,a);b&&this.Hl()};k.Hl=function(){Lb=this.O instanceof $r?"flash":this.O instanceof pB?"videojs":this.O instanceof mB?"hlsnative":this.O instanceof iB?this.O.rj?"jpegToHls":"jpeg":"unknown player type";this.Hb.Ig=this.O.Ai;this.Cr();this.AA()};function AB(a){a.O.stop();a.O.Tg.cn();a.removeChild(a.O)}
function BB(a,b,c){c=void 0===c?!0:c;AB(a);var d="hlsnative"===zB()?new mB(a.Hb):new pB(a.Hb);v("loadeddata",d.M,function(){d.$f(!c)});d.Kf(b);is(d,b);c?(d.Tj(100),d.$f(!1)):d.$f(!0);a.O.pl()?d.Mg():d.ue();a.O=Xb(a,d);a.Hl();a.G()}k.Ms=function(a){AB(this);this.Go("jpeg");this.O.Kf(a)};var CB=new F("switchedToHLS");new F("openTipCalloutRequest");new F("loadRoomRequest");new F("userPanelRequest");new F("sendMessageInputFocus");new F("sendMessageInputBlur");new F("userMenuPmClicked");function DB(a,b){var c=document.createElement("div");c.innerText=a;c.style.color="#72C0FF";c.style.cursor="pointer";c.style.paddingTop="5px";c.onmouseenter=function(){c.style.textDecoration="underline"};c.onmouseleave=function(){c.style.textDecoration="none"};c.style.pointerEvents="auto";c.onclick=function(d){b(d)};return c}
function EB(a){a=void 0===a?!0:a;G.call(this);var b=this;this.qz=a;this.Sk=DB("More Rooms",function(d){fq.h(void 0);d.stopPropagation()});this.yh=new Map;this.Tf=DB("",function(){});this.EE=!0;this.lj="";this.Dm=!1;this.element.style.display="none";this.element.style.position=this.qz?"fixed":"absolute";this.element.style.height="auto";this.element.style.width="auto";this.element.style.boxSizing="border-box";this.element.style.padding="0 50px";this.element.style.left="0";this.element.style.textAlign="center";this.element.style.pointerEvents="none";this.element.style.zIndex="1";this.za=document.createElement("div");this.za.style.fontSize="32px";this.za.style.lineHeight="32px";this.za.style.color="#72c0ff";this.za.style.marginBottom="20px";this.element.appendChild(this.za);this.body=document.createElement("div");this.body.style.fontSize="16px";this.body.style.color="#ffffff";this.text=document.createElement("span");this.body.appendChild(this.text);this.Sk.style.display="none";this.body.appendChild(this.Sk);this.Tf.style.display="none";this.body.appendChild(this.Tf);this.element.appendChild(this.body);var c=new Ub;K.j(function(d){b.os=d.A;E(d.A.event.kc.j(function(e){FB(b,d.A,e.Ra)}),c);E(d.A.event.Px.j(function(e){b.lj=e}),c);E(CB.j(function(){b.Ig=!0;FB(b,d.A,d.C.Ab)}),c);void 0!==d.C.lj&&(b.lj=d.C.lj);FB(b,d.A,d.C.Ab)});tc.j(function(){Vb(c);b.lj="";b.Be=!1});this.yh.set("away",function(){b.za.innerText="Performer Is Away";b.text.innerText="You may continue chatting while you wait for the broadcaster to return.";b.Tf.style.display="none";GB(b,!0);b.element.style.display="block"});this.yh.set("privatenotwatching",function(d){b.za.innerText="Private Show In Progress";b.text.innerText="You may continue chatting while you wait for the broadcaster to return from the private show. If a goal had been set when the broadcaster returns it will continue where it left off.";void 0===b.Ig?u("unexpected"):!0===b.Ig&&(b.Tf.innerText="SPY ON THIS PRIVATE SHOW",b.Tf.style.display="block",b.Tf.onclick=function(){Iv(d)},b.Tf.style.display="block");GB(b,!0);b.element.style.display="block"});this.yh.set("hidden",function(){b.za.innerText="Cam is Hidden";b.text.innerText=b.lj;b.Tf.style.display="none";GB(b,!1);b.element.style.display="block"});this.yh.set("offline",function(){b.za.innerText="Offline";b.text.innerText="The member you are trying to view is currently offline. Please wait or choose another member to view.";b.Tf.style.display="none";b.element.style.display="block";GB(b,!0)});this.yh.set("passwordprotected",function(){b.za.innerText="Password Required";b.text.innerText="The broadcaster has set a password which is required for viewing. If you know the password, refresh this page to enter it.";b.Tf.style.display="none";GB(b,!0);b.element.style.display="block";oc()&&jc()})}r(EB,G);EB.prototype.D=function(){this.element.style.visibility="hidden"};EB.prototype.show=function(){this.element.style.visibility=""};EB.prototype.Tu=function(a){this.Be=a;void 0!==this.os&&FB(this,this.os,this.os.status)};EB.prototype.G=function(){if(void 0!==this.parent){var a=this.parent.element.getBoundingClientRect(),b=document.documentElement.clientWidth,c=document.documentElement.clientHeight;a.width<=b?(this.element.style.width=a.width+"px",this.qz&&(this.element.style.left=a.left+"px")):(this.element.style.width=b+"px",this.element.style.left="0");this.element.style.top=a.height<=c?"fixed"===this.parent.element.style.position?a.top+.5*a.height-.5*this.element.offsetHeight+"px":.5*a.height-.5*this.element.offsetHeight+
"px":.5*c-.5*this.element.offsetHeight+"px";this.element.style.maxHeight=a.height+"px"}};function FB(a,b,c){a.Be&&(c="offline");var d=a.yh.get(c);if(void 0!==d)d(b),a.Z();else switch(a.Dm||(a.Sk.style.display="none",a.element.style.display="none"),c){case "public":case "privaterequesting":case "privatewatching":case "privatespying":case "notconnected":break;default:w("unexpected status: "+c)}}function GB(a,b){var c=a.Dm&&!a.Be;a.Sk.style.display=void 0!==b&&!b||c||!a.EE?"none":"block"};new F("stopCamRequest");new F("shutdownCamRequest");var HB;K.j(function(a){HB=a.A.B()});function IB(a){var b=void 0===HB||""===HB?a:HB;return new Promise(function(c,d){y("api/ts/accounts/usermenu/"+a+"/"+b+"/").then(function(e){e=new P(e.responseText);var f=V(e,"online"),g=T(e,"username"),h=W(e,"display_age",!1),m=T(e,"gender"),n=T(e,"image_url"),p=V(e,"can_silence"),A=fm(e,"silence_id"),z=V(e,"can_access"),D=V(e,"needs_supporter_to_pm");nm(e);c({username:g,Cf:h,Ke:m,Kk:n,ph:f,LB:p,vo:z,Op:D,Dq:A})}).catch(function(e){d(e)})})};function JB(a,b,c){var d;L.call(this);var e=this;this.yl=new Ub;this.DA=function(g){var h=g.ctrlKey||g.metaKey,m=h&&83===g.keyCode,n=h&&191===g.keyCode,p=191===g.keyCode;h=h&&76===g.keyCode;var A=27===g.keyCode;(9===g.keyCode||m||n||h||A||p)&&e.kb()};this.Yh=function(){e.kb()};this.Ya=a;this.QB=b;this.cu=null!==(d=KB)&&void 0!==d?d:b.offsetParent;this.message=c;LB(this);MB(this);NB(this);this.pr();OB(this);this.lr();v("keydown",document,this.DA);v(mc(),document,this.Yh);v("popstate",window,this.Yh);E(Jq.j(this.Yh,!1),this.yl);E(zj.j(this.Yh,!1),this.yl);E(Fj.j(this.Yh,!1),this.yl);var f=window.innerWidth;E(Bk.j(function(){window.innerWidth<f&&e.Yh();f=window.innerWidth}),this.yl);this.cu.appendChild(this.element);this.qf();this.Sb.j(function(){e.kb()});L.prototype.cf.call(this)}var KB;r(JB,L);function LB(a){PB=0;a.element=document.createElement("div");a.element.id="user-context-menu";a.Eg=document.createElement("div");a.Vf=document.createElement("div");a.Eg.style.backgroundColor="";a.element.appendChild(a.Eg);a.element.style.textShadow="none";a.element.style.position="absolute";a.element.style.borderRadius="4px";a.element.style.borderStyle="solid";a.element.style.borderWidth="1px";a.element.style.zIndex="1010";a.element.style.top="0";a.element.style.fontWeight="normal";a.element.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";a.element.style.fontSize="12px";a.element.style.width="188px";a.element.style.cursor="default";a.element.style.visibility="visible";E(K.j(function(b){a.W=b.A.B();a.He=b.A.username();a.Fe=b.A}),a.yl)}
function MB(a){var b=document.createElement("div");H(b,"ucmHeader");b.style.padding="9px 10px";b.style.fontWeight="bold";b.style.borderTopLeftRadius="4px";b.style.borderTopRightRadius="4px";a.name=document.createElement("div");a.name.style.display="inline-block";a.name.style.width="120px";a.name.style.height="12px";a.name.style.marginRight="10px";b.appendChild(a.name);var c=document.createElement("div");c.style.display="inline-block";c.style.width="38px";c.style.height="12px";a.ed=document.createElement("span");H(a.ed,"ucmAgespan");a.ed.style.display="inline-block";a.ed.style.width="15px";a.ed.style.minHeight="14px";a.ed.style.fontSize="12px";a.ed.style.fontWeight="bold";a.ed.style.marginRight="6px";a.ed.style.verticalAlign="top";c.appendChild(a.ed);H(a.ed,"ucmPlaceholder");a.Vh=document.createElement("span");a.Vh.style.display="inline-block";a.Vh.style.width="15px";a.Vh.style.height="14px";a.Vh.style.verticalAlign="top";a.Uh=document.createElement("img");void 0!==a.Ya.Ke?(a.Uh.src=nt(a.Ya.Ke),a.Uh.style.display="inline-block"):(H(a.Vh,"ucmPlaceholder"),a.Uh.style.display="none");a.Uh.height=14;a.Uh.width=14;a.Vh.appendChild(a.Uh);c.appendChild(a.Vh);b.appendChild(c);a.Eg.appendChild(b)}
function OB(a){var b=document.createElement("a");b.innerText=a.Ya.username;H(b,it(a.Ya));b.style.fontWeight="bold";b.href="/"+a.Ya.username+"/";b.target="_blank";b.style.textDecoration="none";b.style.overflow="hidden";b.style.textOverflow="ellipsis";b.style.width="120px";b.style.display="inline-block";b.style.cursor="pointer";b.onmouseenter=function(){b.style.textDecoration="underline"};b.onmouseleave=function(){b.style.textDecoration="none"};v("click",a.name,function(c){C("ViewProfile",{username:a.Ya.username});c.stopPropagation();a.kb()});a.name.appendChild(b);a.P.style.background="rgba(0, 0, 0, 0.01)";a.element.style.visibility="visible"}
function QB(a){var b,c,d=document.createElement("div");d.style.width="188px";d.style.height="75px";d.style.overflow="hidden";d.style.borderRadius="4px 4px 0px 0px";if(!0===(null===(b=a.d)||void 0===b?void 0:b.ph)){var e=document.createElement("img");v("load",e,function(){var f=d.getBoundingClientRect(),g=e.getBoundingClientRect();f.height<g.height&&(e.style.position="relative",e.style.left="0px",e.style.top=(f.height-g.height)/2+"px")});e.src=a.d.Kk;e.style.width="100%";d.appendChild(e);a.element.style.top=a.element.offsetTop-75+"px";a.element.insertBefore(d,a.element.firstChild)}I(a.ed,"ucmPlaceholder");I(a.Vh,"ucmPlaceholder");!0===(null===(c=a.d)||void 0===c?void 0:c.vo)&&(!isNaN(a.d.Cf)&&18<=a.d.Cf&&(a.ed.innerText=a.d.Cf.toString()),I(a.ed,"ucmPlaceholder"),a.Uh.src=nt(a.d.Ke),a.Uh.style.display="inline-block")}
function NB(a){var b=lt(a.Ya),c=mt(a.Ya);if(void 0!==b){var d=document.createElement("div");H(d,"ucmUserLabel");d.style.padding="9px 10px";d.style.borderTopWidth="1px";d.style.borderTopStyle="solid";a.Eg.appendChild(d);var e=document.createElement("div");e.style.width="74px";e.style.height="12px";e.style.width="100%";e.innerText=b;H(e,it(a.Ya));e.style.fontWeight="bold";d.appendChild(e);void 0!==c&&(a=document.createElement("div"),H(a,"ucmSublabel"),a.style.height="10px",a.style.fontSize="10px",a.style.marginTop="4px",a.style.webkitTextSizeAdjust="none",a.innerText=c,d.appendChild(a))}}k=JB.prototype;k.pr=function(){this.Se=document.createElement("div");H(this.Se,"ucmLinks");this.Se.style.padding="5px 0";this.Se.style.fontSize="12px";this.Se.style.borderTopWidth="1px";this.Se.style.borderTopStyle="solid";this.Eg.appendChild(this.Se);this.Eg.appendChild(this.Vf);H(this.Vf,"ucmModSection");this.Vf.style.borderTopWidth="1px";this.Vf.style.borderTopStyle="solid";this.Vf.style.padding="5px 0";this.Vf.style.display="none";RB(this,this.Ya.username)};function RB(a,b){void 0!==a.He&&a.He!==b&&(a.ar=new sr(a.He,b,function(){a.kb()},function(){a.position()}),a.Eg.appendChild(a.ar.element))}
k.lr=function(){if(this.He!==this.Ya.username)if(void 0===this.Fe)u("ignoreText: Chatconnection should be defined");else{var a=SB(this,this.Ya.username);this.Se.appendChild(a);a=TB(this,this.Ya.username);this.Se.appendChild(a);this.W!==this.He&&(a=UB(this,this.Ya.username,this.Fe),this.Se.appendChild(a));""!==this.message&&(a=VB(this,this.Ya.username,this.message),this.Se.appendChild(a))}else this.Se.style.display="none"};k.kw=function(){return!1};function WB(a){if(void 0!==a.d&&a.d.LB&&(void 0===a.d.Dq||a.kw())){var b=document.createElement("div"),c=a.og(),d=XB(),e=a.d.username;d.style.paddingLeft="20px";c.appendChild(d);b.appendChild(c);d.innerText=void 0!==a.d.Dq?Lf:Kf;c.onclick=function(){void 0!==a.d&&void 0!==a.d.Dq&&void 0!==a.W?B("edit_room_ban/",{banid:String(a.d.Dq),action:"remove_silence",room_username:a.W}).catch(function(f){u(f);J("Error removing silence from user "+e)}):sc("Silence "+a.Ya.username+"?",function(){C("SilenceUser",{username:a.Ya.username,to_user:a.Ya.username});B("roomsilence/"+a.Ya.username+"/"+a.W+"/",{}).then(function(){}).catch(function(f){u(f);J("Error silencing user "+a.Ya.username)})});a.kb()};a.Vf.appendChild(b);a.Vf.style.display=""}}
k.Js=function(){if(oc())return{cw:lc(),aw:lc()};for(var a,b,c=this.cu;void 0!==c&&"body"!==c.tagName.toLowerCase();c=null===c.parentElement?void 0:c.parentElement){var d=c,e=window.getComputedStyle(d);void 0===a&&"hidden"===e.overflowY&&(a=d);void 0===b&&"hidden"===e.overflowX&&(b=d);d=q([a,b]);a=d.next().value;b=d.next().value;if(void 0!==a&&void 0!==b)break}return{cw:a,aw:b}};k.position=function(a){if(void 0===a?0:a){a=this.QB.getBoundingClientRect();if(document.body.contains(this.name)){var b=this.name.getBoundingClientRect(),c=this.element.offsetLeft+(a.left-b.left);this.element.style.top=this.element.offsetTop+(a.top-b.top)+"px";this.element.style.left=c+"px"}a=window.innerHeight-(this.element.getBoundingClientRect().top+this.element.offsetHeight+37);0>a&&(this.element.style.top=parseInt(this.element.style.top.slice(0,-2))+a+"px")}b=this.Js();a=b.cw;b=b.aw;b=void 0===b?document.documentElement:b;var d=(void 0===a?document.documentElement:a).getBoundingClientRect(),e=b.getBoundingClientRect();c=this.element.getBoundingClientRect();a=d.bottom-c.height;b=e.right-c.width;d=d.top;e=e.left;var f=c.top;c=c.left;d>f&&(this.element.style.top=this.element.offsetTop+(d-f)+4+"px");e>c&&(this.element.style.left=this.element.offsetLeft+(e-c)+4+"px");a<f&&(this.element.style.top=this.element.offsetTop+(a-f)-4+"px");b<c&&(this.element.style.left=this.element.offsetLeft+(b-c)-
4+"px")};k.kb=function(){2!==PB&&(L.prototype.kb.call(this),void 0!==this.mg&&this.mg.kv(),x("keydown",document,this.DA),x(mc(),document,this.Yh),x("popstate",window,this.Yh),Vb(this.yl),this.cu.removeChild(this.element),this.kg(),PB=2)};function SB(a,b){var c=a.og(),d=document.createElement("div"),e=XB();H(c,"ucmPMLink");c.appendChild(d);c.appendChild(e);e.innerText=nf;H(d,"ucmSendIcon");d.style.padding="0px 4px 0 0";d.style.verticalAlign="bottom";d.style.width="14px";d.style.height="14px";d.style.display="inline-block";d.style.marginRight="4px";v("click",c,function(f){a.kb();Bq('You must be logged in to send a private message. Click "OK" to login.')||(C("StartPrivateMessage",{username:b,to_user:b,location:"PMTab"}),jq.h({username:b,focus:!0,Dn:a.Dn}),$t.delete(b),f.stopPropagation())});return c}function TB(a,b){var c=a.og(),d=document.createElement("div"),e=XB();e.innerText=of;H(d,"ucmMentionIcon");d.style.width="14px";d.style.height="14px";d.style.padding="0px 4px 0 0px";d.style.verticalAlign="bottom";d.style.display="inline-block";d.style.marginRight="4px";c.id="ucm-mentionuser";c.appendChild(d);c.appendChild(e);v("click",c,function(){kq.h(b);a.kb()});return c}
function UB(a,b,c){var d=a.og(),e=document.createElement("div"),f=XB();YA(b)?(f.style.paddingLeft="20px",f.innerText=Bf):(H(d,"notIgnored"),f.style.paddingLeft="0",f.innerText=Df,d.appendChild(e));H(d,"ucmIgnoreLink");d.appendChild(f);H(e,"ucmIgnoreIcon");e.style.padding="0px 4px 0 0px";e.style.verticalAlign="bottom";e.style.width="14px";e.style.height="14px";e.style.display="inline-block";e.style.marginRight="4px";v("click",d,function(){C("IgnoreUser",{username:b,to_user:b,location:"PMTab"});YA(b)?c.wv(b):c.Mf(b);a.kb()});return d}
function VB(a,b,c){var d=a.og(),e=document.createElement("div"),f=XB();H(d,"ucmReportLink");d.appendChild(e);d.appendChild(f);H(e,"ucmReportIcon");e.style.padding="0 4px 0 0";e.style.verticalAlign="middle";e.style.width="14px";e.style.height="14px";e.style.display="inline-block";e.style.marginRight="4px";f.innerText=Ef;v("click",d,function(){C("ReportChatUser",{username:b,to_user:b});a.element.removeChild(a.Eg);a.mg=new ZA(b,c,a.Fe,!0);a.element.appendChild(a.mg.element);a.position();a.mg.lm();a.mg.Vl.j(function(){a.kb()})});return d}k.og=function(){var a=document.createElement("div");a.style.padding="3px 10px";a.style.whiteSpace="nowrap";a.style.fontWeight="normal";a.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";a.style.fontSize="12px";a.style.webkitTextSizeAdjust="none";H(a,"ucmLinkColor");YB(a);return a};function XB(){var a=document.createElement("span");a.style.fontWeight="normal";a.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";a.style.fontSize="12px";a.style.webkitTextSizeAdjust="none";H(a,"ucmLinkColor");return a}function YB(a){H(a,"ucmLinkHover");a.onmouseenter=function(){a.style.cursor="pointer"};a.onmouseleave=function(){a.style.cursor="default"}}var PB=2;function ZB(a,b,c,d,e,f){function g(n){n.preventDefault();null===h.element.parentElement?u("Username span has no parent"):(C("OpenUserContextMenu",{username:a.username}),$B(h,a,h.element,c))}b=void 0===b?!1:b;c=void 0===c?"":c;e=void 0===e?!0:e;f=void 0===f?!1:f;G.call(this);var h=this;this.element.style.height="auto";this.element.style.width="auto";this.element.style.position="";this.element.style.display="inline";var m=aC();this.element.appendChild(m);this.element.setAttribute("data-purecolor",kt(a));this.element.className="purecolor";b||(this.element.setAttribute("data-purecolor",kt(a)),H(this.element,"purecolor"));H(this.element,it(a));this.element.style.fontWeight="bold";void 0!==d&&(this.element.style.color=jt(a));this.element.appendChild(document.createTextNode(a.username));b=document.createElement("span");m=!e;b.classList.add("notesIcon_"+a.username);e&&b.classList.add("notesIcon_msg");b.style.display=fr().sm(a.username)?"":"none";e=br(Zq(),""!==c||m,f,e,m);b.appendChild(e);this.element.appendChild(b);m&&(e=document.createElement("img"),e.style.display="inline-block",e.style.height="16px",e.style.margin="0 5px",e.style.verticalAlign="middle",e.src=nt(a.Ke),this.element.insertBefore(e,this.element.firstChild),this.element.style.whiteSpace="nowrap");this.element.onmouseenter=function(){h.element.style.textDecoration="underline";h.element.style.cursor="pointer"};this.element.onmouseleave=function(){h.element.style.textDecoration="none";h.element.style.cursor="default"};void 0!==d?v("click",this.element,d):(v("click",this.element,g),v("contextmenu",this.element,g))}r(ZB,G);function $B(a,b,c,d){if(2===PB){PB=0;var e=a.Lw(b,c,void 0===d?"":d);e.position(!0);IB(b.username).then(function(f){2!==PB&&e.Ya.username===f.username&&(void 0===e.d&&(e.d=f,e.Dn=e.d.Op,QB(e),WB(e),PB=1),e.position())}).catch(function(f){u("Could not process user menu request: "+f)})}}ZB.prototype.Lw=function(a,b,c){return new JB(a,b,c)};function bC(a,b){a.element.innerText="@"+a.element.innerText;b&&(H(a.element,"mentionHl"),a.element.style.padding="2px");return a.element}function aC(){var a=document.createElement("span");a.style.verticalAlign="middle";return a};function cC(a,b,c){JB.call(this,a,b,c)}r(cC,JB);cC.prototype.pr=function(){var a=this;JB.prototype.pr.call(this);if(this.He!==this.Ya.username){this.Vf.style.display="";this.jq=document.createElement("div");this.jq.style.borderTop="1px solid #F0F0F0";this.jq.style.padding="5px 0";this.bp=document.createElement("div");this.bp.style.padding="9px 10px";this.bp.style.borderTop="1px solid #F0F0F0";this.Eg.insertBefore(this.jq,this.Vf.nextSibling);this.Eg.appendChild(this.bp);var b=this.og(),c=XB();c.style.paddingLeft="20px";this.Vf.appendChild(b);b.appendChild(c);c.innerText=Di;v("click",b,function(){a.kb();Bq('You must be logged in to ban a user. Click "OK" to login.')||sc(Wc(a.Ya.username),function(){C("BanUser",{username:a.Ya.username});B("roomban/"+a.Ya.username+"/"+a.W+"/",{}).then(function(){void 0!==a.Fe?XA(a.Fe,a.Ya.username):u("Chat Connection undefined when trying to ban a user")}).catch(function(m){u(m);J("Error banning user "+a.Ya.username)})})});b=document.createElement("div");c=document.createElement("img");var d=document.createElement("span");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/ico-tip.gif";c.style.width="13px";c.style.height="13px";c.style.padding="2px 4px 0 1px";b.appendChild(c);b.appendChild(d);d.innerText=Xc(this.Ya.username)+":";this.bp.appendChild(b);c=document.createElement("div");d=document.createElement("div");var e=document.createElement("div");c.style.paddingLeft="20px";d.style.paddingLeft="20px";e.style.paddingLeft="20px";var f=document.createElement("span"),g=document.createElement("span"),h=document.createElement("span");c.appendChild(f);d.appendChild(g);e.appendChild(h);f.innerText=Yc(0);g.innerText=Zc(0);h.innerText=$c(0);b.appendChild(c);b.appendChild(d);b.appendChild(e);void 0!==this.W&&void 0!==this.He&&B("api/getchatusermenu/",{roomname:this.W,fromuser:this.He,touser:this.Ya.username}).then(function(m){a.jq.appendChild(dC(a,!!m.getResponseHeader("X-Target_Is_Mod"),a.Ya));f.innerText=Yc(eC(m.getResponseHeader("X-Tipped_Performer_Last_Hour")));g.innerText=Zc(eC(m.getResponseHeader("X-Tipped_Performer_Last_24_Hours")));h.innerText=$c(eC(m.getResponseHeader("X-Tipped_Performer_Last_Two_Weeks")))}).catch(function(m){u(m);J("Error fetching user menu")})}};cC.prototype.lr=function(){JB.prototype.lr.call(this);var a=this.og();a.style.display="none";var b=document.createElement("img");b.style.padding="0px 4px 0 0";b.style.verticalAlign="bottom";a.appendChild(b);b=XB();a.appendChild(b);K.once(function(){});this.Se.prepend(a)};function dC(a,b,c){var d=a.og(),e=XB();e.style.paddingLeft="20px";if(b){e.innerText=Ei;var f='You must be logged in to remove a moderator. Click "OK" to login.';var g="removemoderator/"+c.username+"/"+a.W+"/"}else e.innerText=Fi,f='You must be logged in to promote a user to moderator. Click "OK" to login.',g="addmoderator/"+c.username+"/"+a.W+"/";var h="Error promoting user "+c.username;v("click",d,function(){a.kb();Bq(f)||B(g,{}).then(function(){oq.h({fc:!b,username:c.username})}).catch(function(m){u(m);J(h)})});d.appendChild(e);return d}function eC(a){if(null===a)return 0;a=Number(a);return 0>a?0:a}cC.prototype.kw=function(){return!0};function fC(a,b,c,d,e){ZB.call(this,a,void 0===b?!1:b,void 0===c?"":c,d,void 0===e?!0:e)}r(fC,ZB);fC.prototype.Lw=function(a,b,c){return new cC(a,b,c)};var gC,hC,iC={};K.j(function(a){gC=a.C.rq;hC=a.A;iC.vc=a.C.ta.vc;iC.Ne=a.C.Ne;iC.Rf=!1});function jC(a,b){var c=Jw();c.style.padding="1px 5px";var d=document.createElement("span");d.style.display="inline";void 0!==a.background?(d.style.background=a.background,d.style.color=void 0!==a.ya?a.ya:"#000000",d.style.padding="2px",d.style.textShadow="none"):d.style.color=Lw(void 0!==a.ya?a.ya:"#aaaaaa");H(d,"roomNotice");d.style.fontWeight=void 0!==a.weight?a.weight:"normal";c.appendChild(kC(d,a.na,void 0!==a.background,b));twemoji.parse(c);return c}
function kC(a,b,c,d){b=q(b);for(var e=b.next();!e.done;e=b.next()){var f=document.createElement("span");e=q(e.value);for(var g=e.next();!g.done;g=e.next())switch(g=g.value,g.hc){case 1:f.appendChild(lC(g));break;case 0:f.appendChild((new ZB(g.V,c,"",d,!0,!0)).element);break;case 2:f.appendChild(mC(g.message));break;case 3:f.appendChild(nC(function(){"privatespying"!==hC.status&&Iv(hC)}));break;default:u("Unknown roomNotice type for: "+g)}a.appendChild(f)}return a}
function nC(a){var b=document.createElement("a");H(b,"msg-link");b.style.textDecoration="underline";b.innerText=Fe;b.onclick=a;b.style.cursor="pointer";return b}function mC(a){var b=document.createElement("a");b.href="/tag/"+a+"/"+gC;H(b,"msg-link");b.style.textDecoration="none";b.innerText="#"+a;return b}
function lC(a){var b=document.createElement("span");!1!==a.eu?b=Pz(new Oz(iC),a.message):b.innerText=a.message;b.style.color=void 0!==a.ya?a.ya:"";b.style.background=void 0!==a.background?a.background:"";b.style.fontWeight=void 0!==a.weight?a.weight:"";return b};function oC(a){L.call(this);var b=this;this.gb=a;this.NA=this.ar=null;this.OA=!1;this.kp=function(){b.gb.by();b.gb.ul()};this.Uq=function(){b.gb.QA();b.gb.ul()};this.YD=function(){void 0!==b.gb.Kz&&b.gb.Kz();C("reporPMtUser",{location:void 0===b.gb.Kz?"PMTab":"PMWindow"});b.mg=new ZA(b.gb.Wb.username);b.mg.element.style.width="300px";b.element.innerHTML="";b.element.style.top="0";b.element.appendChild(b.mg.element);b.OA=!0;b.mg.lm();b.mg.Vl.j(function(){b.gb.ul()})};this.ZB=function(){b.element=N("div",{style:{background:"#FFFFFF",border:"1px solid #EFEFEF",boxShadow:"0px 0px 16px rgba(0, 0, 0, 0.08)",borderRadius:"4px",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",cursor:"initial"},className:"pm-more-menus"});b.mB()};this.mB=function(){var c={borderTop:"1px solid #F0F0F0",listStyle:"none",padding:"5px 0",margin:0},d={width:"14px",height:"14px",background:pC},e=Object.assign(Object.assign({},d),{cssFloat:"left"});d=Object.assign(Object.assign({},d),{cssFloat:"right"});IB(b.gb.Wb.username).then(function(f){var g=N(Tj,null,N(qC,{Ip:{vo:f.vo,Cf:f.Cf}}),N(rC,{Ke:f.Ke}));b.Jy.innerHTML="";b.Jy.append(g);f.ph&&(b.element.insertBefore(N(sC,{ZC:f.Kk}),b.Iy),b.element.style.top="-75px")}).catch(function(f){u("Could not process user menu request: "+f)});b.gb.He!==b.gb.Wb.username&&(b.NA=N("ul",{style:c},N(tC,{innerText:po(b.gb.Wb.username)?Bf:Df,ay:"https://static-assets.highwebmedia.com/tsdefaultassets/"+uC,Wb:b.gb.Wb,Ul:po(b.gb.Wb.username)?b.Uq:b.kp}),N(tC,{innerText:Ri,ay:"https://static-assets.highwebmedia.com/tsdefaultassets/"+
vC,Wb:b.gb.Wb,Ul:b.YD})),b.ar=(new rr(b.gb.He,b.gb.Wb.username,function(){b.gb.ul()})).element);void 0===b.gb.Ji&&(b.gb.Ji=N(wC,{Wb:b.gb.Wb}));b.Iy=N("div",null,N("div",{style:{padding:"9px 0 4px 9px",width:"188px",position:"relative",overflow:"hidden",boxSizing:"border-box"}},b.gb.Ji,N("span",{style:{display:"inline-block",cssFloat:"right",verticalAlign:"top",width:"36px",marginRight:"8px"},ref:function(f){return b.Jy=f}},N("span",{style:e}),N("span",{style:d}))),N(xC,{V:b.gb.Wb}),b.NA,b.ar);b.element.innerHTML="";b.element.appendChild(b.Iy)};this.ZB();this.P.style.background="#fff";this.P.style.opacity="0.01";this.Sb.j(function(){b.element.style.display="none";void 0!==b.gb.ED&&b.gb.ED();b.OA&&b.gb.ul()})}r(oC,L);oC.prototype.render=function(){return this.element};function sC(a){return N("div",{style:{width:"100%",height:"75px",overflow:"hidden",borderRadius:"4px 4px 0px 0px"}},N("img",{style:{position:"relative",left:"0px",width:"188px",top:"-50%"},src:a.ZC}))}
function wC(a){var b=N("a",{href:"/"+a.Wb.username+"/",target:"_blank",style:{color:jt(a.Wb),fontWeight:"bold",textDecoration:"none",overflow:"hidden",textOverflow:"ellipsis",width:"120px",display:"inline-block",cursor:"pointer"},onClick:function(c){C("ViewProfile",{username:a.Wb.username});c.stopPropagation()}},a.Wb.username);b.onmouseenter=function(){b.style.textDecoration="underline"};b.onmouseleave=function(){b.style.textDecoration="none"};return b}
function qC(a){var b,c=Object.assign({display:"inline-block",width:"15px",minHeight:"14px",fontSize:"12px",fontWeight:"bold",marginRight:"6px",verticalAlign:"top",color:yC,background:pC},a.pI),d="";!0===(null===(b=a.Ip)||void 0===b?void 0:b.vo)&&!isNaN(a.Ip.Cf)&&18<=a.Ip.Cf&&(d=a.Ip.Cf);c.background="";return N("span",{style:c},d)}
function rC(a){var b=Object.assign({display:"inline-block",width:"15px",height:"14px",verticalAlign:"top"},a.rI),c=Object.assign({display:"inline-block",width:"14px",height:"14px"},a.qI),d=N("img",null);void 0!==a.Ke&&""!==a.Ke&&(d=N("img",{style:c,src:nt(a.Ke)}));return N("span",{style:b},d)}
function xC(a){var b=lt(a.V),c=mt(a.V);if(void 0!==b){a={height:"12px",width:"100%",fontWeight:"bold",color:jt(a.V)};var d={height:"10px",fontSize:"10px",marginTop:"4px",color:zC,WebkitTextSizeAdjust:"none"},e="";void 0!==c&&(e=N("div",{style:d},c));return N("div",{style:{padding:"9px 10px",borderTop:"1px solid #F0F0F0"}},N("div",{style:a},b),e)}return null}
function tC(a){var b=Object.assign({padding:"3px 10px",whiteSpace:"nowrap",fontWeight:"normal",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontSize:"12px",WebkitTextSizeAdjust:"none",color:AC,cursor:"pointer",width:"100%",background:"transparent",boxSizing:"border-box"},a.sI),c={fontWeight:"normal",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontSize:"12px",WebkitTextSizeAdjust:"none",color:AC},d=N("li",{style:b,onClick:a.Ul},N("img",{src:a.ay,style:{padding:"0px 4px 0 0",verticalAlign:"bottom"}}),N("span",{style:c},a.innerText));v("mouseenter",d,function(){d.style.background=BC});v("mouseleave",d,function(){d.style.background="transparent"});return d}var yC="#000",zC="#49494F",AC="#49494F",BC="#F9E4D5",uC="ignore-user-d.svg",vC="report-msg-d.svg",pC="#E0E0E0";var CC=new F("emoticonAdded");function DC(a){function b(f,g){var h=document.createElement("img");h.src="https://static-assets.highwebmedia.com/tsdefaultassets/emoticons/"+f+"."+(void 0===g?"gif":g);h.style.margin="1px";h.style.cursor="pointer";h.onclick=function(){var m=f,n=c.bl;":"===m[0]&&(m=m.slice(1));n.maxLength>=n.value.length+(" :"+m+" ").length&&(n.value=""===n.value?":"+m+" ":n.value+" :"+m+" ",CC.h(void 0));c.D();c.bl.focus()};d.appendChild(h)}L.call(this);var c=this;this.bl=a;H(this.element,"standardEmoticonsModal");this.element.style.visibility="hidden";this.element.style.width="356px";this.element.style.height="146px";this.element.style.borderWidth="2px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";this.element.style.top="";this.element.style.right="0";this.element.style.overflow="";this.bx=Qj("","","313px");H(this.bx,"divot");this.element.appendChild(this.bx);v("keydown",document.documentElement,function(f){27===f.keyCode&&c.D()});a=document.createElement("div");H(a,"emoticonsHeader");a.innerText=Pe;a.style.fontSize="15px";a.style.fontFamily="UbuntuBold, Arial, Helvetica, sans-serif";a.style.fontWeight="bold";a.style.padding="6px";this.element.appendChild(a);var d=document.createElement("div");d.style.width="100%";d.style.padding="8px";d.style.boxSizing="border-box";this.element.appendChild(d);b("lmao");b("oo","png");b("kissy","png");b("gangsta","png");b("yawn");b("innocent");b("help");b("rofl");b("bow");b("upset");b("what");b("hearts");b("yes");b("thumbsup");b("hello");b("crazy");b("smoke");b("bounce");b("angel");b("woot");b("wink");b("thumbup");b("thumbdown");b("smile");b("ohmy");b("mellow");b("roll");b("huh");b("drool");b("cry");b("cool");b("confused");b("curse");b("blush");var e=document.createElement("a");H(e,"uploadLink");e.innerHTML=Ze+" &#9656;";e.href="/emoticons/";e.style.fontSize="13px";e.style.cssFloat="right";e.style.cursor="pointer";e.style.margin="12px 4px";e.onmouseenter=function(){e.style.textDecoration="underline"};e.onmouseleave=function(){e.style.textDecoration="none"};e.onclick=function(){window.use_uploaded_emoticon=function(f){var g=c.bl.value;c.bl.value=""===g||/\s/.test(g[g.length-1])?""+g+f:g+" "+f;c.bl.focus()};nj(e.href,"_blank","height=615, width=850");c.D();return!1};d.appendChild(e);this.Sb.j(function(){c.D()})}r(DC,L);DC.prototype.G=function(){void 0===this.Po?this.D():(this.element.style.bottom=this.bl.offsetHeight+10+"px",this.element.style.right="57px")};DC.prototype.show=function(a){this.Po=a;this.cf();this.G();this.element.style.visibility=""};DC.prototype.D=function(){this.kb();this.element.style.visibility="hidden"};function EC(a){G.call(this,"div",a)}r(EC,G);EC.prototype.qa=function(a){var b={backgroundColor:"#000000",color:"#EDEDED",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontSize:"10px",lineHeight:"14px",position:"absolute",height:"27px",borderRadius:"4px",bottom:void 0===a.MA?"40px":a.MA,right:void 0===a.iF?"0px":a.iF,padding:"0px 8px",width:"auto",whiteSpace:"nowrap",display:"none"},c={height:"0px",width:"0px",bottom:"-5px",right:void 0===a.mw?"7px":a.mw,position:"absolute",borderTop:"5px solid #000000",borderRight:"5px solid transparent",borderLeft:"5px solid transparent"};this.message=N("span",{style:{position:"relative",top:"7px"}},a.message);this.element=N("div",{style:b},N("div",{style:c}),this.message)};EC.prototype.show=function(){this.element.style.display="block"};EC.prototype.D=function(){this.element.style.display="none"};EC.prototype.render=function(){return this.element};function FC(a){G.call(this,"div",a);var b=this;void 0!==a.color?GC(this,a.color,a.Ao):Ct(a.username).then(function(c){GC(b,jt(c.V),a.Ao)})}r(FC,G);FC.prototype.qa=function(a){var b={maxWidth:a.Vs?"70px":"140px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"};this.element=N("div",{style:{position:"absolute",fontSize:"12px",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontWeight:"bold",lineHeight:"14px",top:"10px",left:"8px"}});this.Gh=N("div",{style:b});this.WA=a.Ao?N("a",{onClick:function(){void 0!==a.xw&&a.xw()},target:"_blank"},a.username):N("a",null,a.username);this.Gh.appendChild(this.WA);this.element.appendChild(this.Gh);a.Vs&&(b=N(HC,null),this.element.appendChild(b))};function GC(a,b,c){a.element.style.color=b;a.WA.style.color=b;"#090"===b&&void 0!==c&&c&&void 0===a.icon?(a.icon=document.createElement("img"),a.icon.src="https://static-assets.highwebmedia.com/tsdefaultassets/badge_star.svg",a.icon.height=16,a.element.insertBefore(a.icon,a.Gh),a.Gh.style.position="relative",a.Gh.style.left="5px",a.Gh.style.bottom="2px"):void 0!==a.icon&&(a.element.removeChild(a.icon),a.icon=void 0,a.Gh.style.position="",a.Gh.style.left="",a.Gh.style.bottom="")}
FC.prototype.render=function(){return this.element};function HC(){G.call(this,"div")}r(HC,G);HC.prototype.qa=function(){this.element=N("div",{className:"numDisplay",style:{position:"relative",display:"none",left:"4px",bottom:"2px",width:"16px",height:"15px",paddingTop:"1px",backgroundColor:"#F47321",color:"#FFFFFF",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",textAlign:"center",borderRadius:"4px",fontWeight:"normal"}})};HC.prototype.show=function(){this.element.style.display="inline-block"};HC.prototype.D=function(){this.element.style.display="none"};HC.prototype.render=function(){return this.element};function IC(a){return N("img",{src:a.XC,height:"13px",width:"13px",style:Object.assign({position:"relative",height:"13px",width:"13px",left:"6px"},a.YC)})}
function JC(a){var b=N("div",{style:Object.assign({position:"absolute",height:"25px",width:"25px",borderRadius:"5px",top:"5px"},a.fw),onMouseEnter:function(){b.style.backgroundColor="#C9C9C9";a.bq.style.backgroundColor=a.bq.classList.contains("unread")?"#FCEADC":"#FFFFFF"},onMouseLeave:function(){b.style.backgroundColor="";a.bq.style.backgroundColor="#E0E0E0"},onClick:a.Ul},a.children);return b}
function KC(a,b){G.call(this);var c=this;this.username=a;this.Iz=b;this.lF=function(){Eu(c.username).then(function(d){c.aC.innerText=d.hb+" "+Fc(d.hb)})};this.MC=function(d){d.metaKey||8===d.charCode||0===d.charCode||13===d.charCode||48<=d.charCode&&57>=d.charCode||d.preventDefault()};this.LC=function(){window.setTimeout(function(){/^[1-9]\d*$/.test(c.Pn.value)||(c.Pn.value="")},0)};this.NC=function(d){/^[1-9]\d*$/.test(c.Pn.value)?(c.Mv.style.display="none",c.xq.style.backgroundColor="#F47321",c.xq.style.color="#fff"):(c.Mv.style.display="inline-block",c.xq.style.backgroundColor="#888",c.xq.style.color="#ccc");13===d.keyCode&&c.eA()};this.eA=function(){if("inline-block"!==c.Mv.style.display){var d=c.Pn.value;C("SendTipClicked",{amount:d,location:"PMWindow"});Gu({W:c.username,mv:d,message:c.Fx.value,source:"sitewide",nv:"sitewidePMs",Di:"public",hg:O()}).then(function(e){e.success?(C("SendTipSuccess",{amount:d,location:"PMWindow"}),c.Ik()):void 0!==e.error?J(e.error):u("unknown send tip error");c.Fx.value="";void 0!==e.Zj&&Cu.h({$c:e.Zj,W:c.username})}).catch(function(e){u("Error sending tip ("+e+")")})}};this.Ik=function(){void 0!==c.Iz&&c.Iz()};this.tb=function(){Vb(c.I)};this.I=new Ub;E(fo.j(function(d){void 0!==d&&(c.Pn.value=String(d));c.lF()},!1),this.I)}r(KC,G);function LC(a){a.P=N("div",{style:{background:"#000000",display:"block",width:"100%",height:"225px",position:"absolute",bottom:0,left:0,cursor:"pointer",opacity:.5},id:"tipping-overlay",onClick:a.Ik});return a.P}
function MC(a){a.element=N("div",{id:"tippingWindow",style:{position:"absolute",bottom:"0px",height:"183px",width:"280px",backgroundColor:"#ffffff",fontSize:"12px",zIndex:999}},N("div",{style:{height:"31px",lineHeight:"31px",background:"#E0E0E0",borderRadius:"4px 4px 0px 0px",padding:"0 6px"}},N("span",{style:{color:"#306A91",fontSize:"14px",fontWeight:"bold"}},vd),N("span",{style:{background:"#999",color:"#000",border:0,borderRadius:"2px",cursor:"pointer",width:"12px",textAlign:"center",height:"12px",lineHeight:"12px",position:"absolute",top:"9px",right:"12px"},onClick:a.Ik},N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/close-black.svg",style:{width:"8px"}}))),N("div",{style:{padding:"6px",boxSizing:"border-box"}},N("div",null,N("span",null,af),N("span",{style:{color:"#288A09",margin:"0 5px",display:"inline-block",width:"90px"},ref:function(b){return a.aC=b}}),N("a",{onClick:function(){nj("/tipping/purchase_tokens/","_blank","height=615, width=850")},ref:function(b){return a.aH=b},style:{color:"#306A91",textDecoration:"underline",cursor:"pointer"}},Jd)),N("div",null,N("span",null,ef),N("input",{type:"text",style:{width:"69px",height:"24px",border:"2px solid #BDBDC0",boxSizing:"border-box",borderRadius:"4px",marginLeft:"5px"},value:25,onKeyPress:a.MC,onPaste:a.LC,onKeyUp:a.NC,ref:function(b){a.Pn=b}}),N("div",{style:{color:"red",marginLeft:"100px",display:"none"},ref:function(b){a.Mv=b}},ff)),N("div",null,sd),N("textarea",{style:{width:"262px",height:"32px",borderRadius:"4px",resize:"none",border:"1px solid #ACACAC",margin:"5px 0 0 0"},ref:function(b){return a.Fx=b}}),N("br",null),N("button",{style:{background:"#F47321",border:"1px solid #A8A8A8",boxSizing:"border-box",borderRadius:"4px",width:"117px",height:"32px",fontSize:"14px",fontWeight:"bold",position:"relative",left:"151px",top:"3px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#fff"},onClick:a.eA,ref:function(b){return a.xq=b}},td)));return a.element}
function NC(a){G.call(this);var b=this;this.Fm=!1;this.Ap="";this.ai=this.kj=!1;this.bf=st();this.bv=this.Ro=!1;this.Hz=function(){void 0!==b.md&&(b.element.removeChild(b.md.P),b.element.removeChild(b.md.element),b.xg.style.backgroundColor="#FFFFFF",b.md=void 0)};this.pw=function(c){b.element.style.zIndex=""+c};this.kp=function(){B("chat_ignore_list/",{username:b.username}).then(function(){mo.add(b.username);no();C("IgnoreUser",{location:"PMWindow"})}).catch(function(c){u("Error posting ignore pm user: "+
c)})};this.Uq=function(){B("chat_ignore_list/",{username:b.username,remove:"1"}).then(function(){mo.delete(b.username);no()}).catch(function(c){u("Error posting ignore pm user: "+c)})};this.HE=function(){void 0===b.Te&&(b.Te=new oC({He:b.Uc,Wb:b.sD,ul:b.Hz,by:b.kp,QA:b.Uq}),b.Te.element.style.display="none",b.Te.element.style.position="absolute",b.Te.element.style.left="0px",b.Te.element.style.top="0",b.Te.element.style.zIndex="1001",b.Te.element.onclick=function(c){c.stopPropagation()},b.element.appendChild(b.Te.P),b.element.appendChild(b.Te.element));b.Ni(b.username);"none"===b.Te.element.style.display&&(b.Te.element.style.display="block",b.Te.cf(),C("PMMenuClicked",{location:"PMWindow"}))};this.IE=function(){if(b.pb){if(void 0===b.md){var c=b.Ji.element.cloneNode(!0);c.childNodes[c.childNodes.length-3].childNodes[0].setAttribute("href","/"+b.username);b.md=new oC({He:b.Uc,Wb:b.Wb,Ji:c,ul:b.Hz,by:b.kp,QA:b.Uq});b.md.element.style.display="none";b.md.element.style.position="absolute";b.md.element.style.left="0px";b.md.element.style.top="0";b.md.element.style.zIndex="1001";b.md.element.onclick=function(d){d.stopPropagation()};b.element.appendChild(b.md.P);b.element.appendChild(b.md.element)}b.Ni(b.username);"none"===b.md.element.style.display&&(b.md.element.style.display="block",b.md.cf(),C("PMMenuClicked",{location:"PMWindow"}))}else OC(b,!0)};this.VA=function(c){!0===c?b.HE():b.IE()};this.rA=function(c){fo.h(c);b.element.appendChild(b.JA);b.element.appendChild(b.KA);b.bv=!0;C("SendTipViewed",{location:"PMWindow",tipType:"public",localStorage:t()})};this.Ik=function(){b.element.removeChild(b.JA);b.element.removeChild(b.KA);b.bv=!1};this.tb=function(){b.ov.tb();Vb(b.I)};this.pz=function(){0!==b.H&&(b.H=0,b.Sn.style.display="none",b.Hi.D())};this.username=a.username;this.Uc=a.Uc;this.Ni=a.Ni;this.ov=new KC(this.username,function(){b.Ik()});this.KA=MC(this.ov);this.JA=LC(this.ov);this.I=new Ub;PC(this);QC(this);Ct(this.username).then(function(c){b.Wb=c.V;b.color=jt(c.V);b.Ji=new FC({username:b.username,Ao:!0,Vs:!1,color:b.color,xw:b.VA});b.Ji.element.appendChild(b.Hi.element);b.Ji.element.appendChild(b.Sn);b.xg.appendChild(b.Ji.element);"#090"===b.color&&(b.Hi.element.style.bottom="4px",b.Hi.element.style.left="8px",b.Sn.style.right="-10px");RC(b,c.H);SC(b)});Ct(this.Uc).then(function(c){b.sD=c.V});this.element=N("div",{className:"PrivateChatWindow",style:{cssFloat:"right",position:"relative",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.25)",marginRight:"7px",borderRadius:"4px 4px 0px 0px",backgroundColor:"#FFFFFF",width:"280px"}},this.xg,this.xo);TC(this);OC(this,a.open,a.Pk);st()&&H(this.cA,"disabled");E(iq.j(function(c){c.OD&&c.yw===b.Po&&(void 0===b.Es&&(b.Es=new DC(b.nj),b.J(b.Es)),b.Ni(b.username),b.Es.show(c.yw))}),this.I);E(ao.j(function(c){var d=!1,e=jC(c,function(){b.VA(d)});e.style.margin="4px 0";var f=e.querySelector("div");null!==f&&(f.style.textAlign="center");c.xx===b.username&&c.$j===b.Uc?(e.style.textAlign="left",e.style.marginLeft="-3px",UC(b,e)):c.xx===b.Uc&&c.$j===b.username&&(d=!0,e.style.textAlign="right",e.style.marginRight="-3px",UC(b,e))}),this.I);E(ho.j(function(c){c===b.username&&b.pz()}),this.I);E(bo.j(function(c){void 0!==c.Da&&b.username!==c.Da||UC(b,VC(c.message))}),this.I);E(io.j(function(c){c===b.username&&b.Pa()}),this.I);E(Do.j(function(){b.bf=!1;I(b.cA,"disabled")}),this.I)}r(NC,G);NC.prototype.pc=function(a){var b=this;this.kj||(void 0===this.color?Ct(this.username).then(function(c){b.Wb=c.V;b.color=jt(c.V);WC(b,a);b.kj=!0}):(WC(this,a),this.kj=!0))};function PC(a){a.Sn=N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/orange_dot.svg",style:{position:"absolute",top:"0px",right:"-10px",display:"none"}});a.Hi=new HC;a.xg=N("div",{style:{position:"relative",height:"34px",borderRadius:"4px 4px 0px 0px",borderBottom:"2px solid #EFEFEF",cursor:"pointer"},onMouseEnter:function(){a.xg.style.backgroundColor="#E0E0E0"},onMouseLeave:function(){a.xg.style.backgroundColor="#FFFFFF"},onClick:function(c){c.target===a.xg&&OC(a,!a.pb)}});var b=XC(a.xg,{right:"5px"},function(){YC.h(a.username);a.tb()});a.Xl=new EC({message:Oi});v("mouseenter",b,function(){a.Xl.show()});v("mouseleave",b,function(){a.Xl.D()});b.appendChild(a.Xl.element);a.xg.appendChild(b)}
function QC(a){function b(){if(!a.bf){var g=a.nj.value.trim();a.nj.value="";a.Fm&&d();if(""!==g){var h=ht(g);switch(h.messageType){case 1:a.rA(h.Jp.amount);break;default:yt({message:g,username:a.username,source:"sitewidePM",Hs:c})}}}}function c(g){UC(a,VC(g))}function d(){a.ma.style.height="33px";a.Fg.style.height="175px";a.Fm=!1}function e(){a.ma.style.height="76px";a.Fg.style.height="132px";a.Fm=!0}var f=new ac;bc(f,{keyCode:76,pi:!0,ba:function(g){g.preventDefault();g.stopPropagation();YC.h(a.username);a.tb()}});a.xo=N("div",{style:{height:"224px",position:"relative",fontFamily:"Tahoma, Arial, Helvetica, sans-serif",fontSize:"12px"},ref:function(g){a.xo=g},onClick:function(){ZC(a)}},N("div",{style:{position:"relative",height:"184px",overflowY:"auto"},onScroll:function(){0!==a.Fg.scrollTop||a.ai||WC(a,!0,a.fm)},ref:function(g){return a.Fg=g}},N("div",{style:{width:"100%",boxSizing:"border-box",padding:"0px 4px"},ref:function(g){return a.ra=g}})),N("div",{style:{position:"absolute",bottom:"1px",width:"274px",height:"33px",margin:"0px 2px",backgroundColor:"#F8F9FA",border:"1px solid #EFEFEF",borderRadius:"2px"},ref:function(g){return a.ma=g}},N("textarea",{style:{position:"absolute",width:"270px",resize:"none",boxSizing:"border-box",backgroundColor:"#F8F9FA",border:"none",outline:"none",fontFamily:"Tahoma, Helvetica, Arial, sans-serif",fontSize:"12px",color:"#49494F",padding:"8px 0 0 8px"},placeholder:Mi,maxLength:1024,ref:function(g){return a.nj=g},onKeyUp:function(g){"Enter"===g.key||13===g.keyCode?g.shiftKey?e():b():!a.Fm&&17<=a.nj.value.length?e():a.Fm&&17>a.nj.value.length&&!a.nj.value.includes("\n")&&d()},onKeyDown:function(g){cc(f,g)}}),N("div",{style:{position:"absolute",bottom:"4px",right:"0px",padding:"2px 6px 0px",margin:"4px 0px"}},N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/emoji.svg",style:{position:"relative",top:"4px",marginRight:"5px",cursor:"pointer"},onClick:function(){iq.h({yw:a.Po,OD:!0})},ref:function(g){return a.Po=g}}),N("span",{style:{height:"23px",width:"47px",borderRadius:"4px",fontSize:"12px",lineHeight:"14px",color:"#FFFFFF",padding:"4px"},colorClass:["send-button"],onClick:b,ref:function(g){return a.cA=g}},xe),N("span",{style:{height:"23px",width:"47px",background:"#7AA35B",border:"1px solid #608445",borderRadius:"4px",fontSize:"12px",lineHeight:"14px",color:"#FFFFFF",padding:"4px",cursor:"pointer",marginLeft:"4px"},onClick:function(){a.rA()}},ye))))}
function TC(a){vs(a.username).then(function(b){b&&y("follow/is_following/"+a.username+"/").then(function(c){c=JSON.parse(c.responseText);a.eh=new xs(a.username,c.following,!1,!0);a.eh.element.style.height="20px";a.eh.element.style.width="20px";a.eh.element.style.backgroundSize="20px 20px";a.eh.element.style.backgroundPosition="center";a.eh.element.style.padding="3px 3px";a.eh.element.style.margin="0px";a.dh=N(JC,{bq:a.xg,fw:{right:"30px"},Ul:function(){}});a.mm=new EC({message:c.following?Ge:He});v("mouseenter",a.dh,function(){a.mm.show()});v("mouseleave",a.dh,function(){a.mm.D()});a.dh.appendChild(a.eh.element);a.dh.appendChild(a.mm.element);a.xg.appendChild(a.dh)})})}function XC(a,b,c){return N(JC,{bq:a,fw:b,Ul:c},N(IC,{XC:"https://static-assets.highwebmedia.com/tsdefaultassets/close-gray.svg",YC:{top:"7px"}}))}
NC.prototype.openWindow=function(a){this.xo.style.display="block";this.element.style.width="280px";this.element.style.bottom="260px";this.Xl.message.textContent=Oi;SC(this);a&&ZC(this);void 0!==this.dh&&(this.dh.style.display="block")};function OC(a,b,c){(a.pb=b)?a.openWindow(void 0===c?!0:c):(a.xo.style.display="none",a.element.style.bottom="36px",a.Xl.message.textContent=Ni,0<a.H&&(c=a.H,a.Hi.element.textContent=9<c?"9+":""+c,a.Hi.show(),a.Sn.style.display="none"),void 0!==a.dh&&(a.dh.style.display="none"),a.bv&&a.Ik());$C.h({username:a.username,pb:b})}NC.prototype.Pa=function(){this.Fg.scrollTop=this.ra.offsetHeight-this.Fg.offsetHeight};function SC(a){a.Pa();a.nj.focus()}
function WC(a,b,c){var d="api/ts/chatmessages/pm_list/"+a.username+"/";void 0!==c&&(d+="?"+vb({offset:c}));y(d).then(function(e){e=wt(new P(e.responseText));var f=e.na;f!==[]&&(30>f.length&&(a.ai=!0),a.Ro||(a.Ro=!0,b&&At(a.username,function(){ho.h(a.username)})),b||RC(a,e.H),0<f.length&&(a.fm=f[0].Tc,void 0===c?(f.forEach(function(g){aD(a,g.message,g.N.username===a.Uc)}),a.Pa()):bD(a,f)))})}
function bD(a,b){var c=N("div",null),d="",e,f,g,h=b.length;b.forEach(function(m,n){var p=m.N.username===a.Uc,A=cD(a,p,d);void 0!==A?f=A:g.classList.remove("corner");d=p?a.Uc:a.username;A=dD(e,f,d);void 0!==A&&(e=A);g=eD(a,m.message,p);f.appendChild(g);c.appendChild(f);n===h-1&&(d===a.zs.getAttribute("data-username")&&(g.classList.remove("corner"),d!==a.Uc&&null!==f.firstChild&&f.removeChild(f.firstChild)),a.zs=e)});a.ra.insertBefore(c,a.ra.firstChild);a.Fg.scrollTop=c.offsetHeight}
function VC(a){return N("div",{style:{color:"#6C6C78",maxWidth:"271px",textAlign:"center",fontSize:"10px",lineHeight:"12px"}},a)}function UC(a,b){!1!==a.kj&&(a.Ap="",a.ra.appendChild(b),a.Pa())}
function eD(a,b,c){var d={padding:"5px 8px",display:"inline-block",textAlign:"left",maxWidth:"210px",backgroundColor:"#D5EBF8",borderRadius:"10px"},e={padding:"5px 8px",display:"inline-block",textAlign:"left",maxWidth:"210px",border:"1px solid #CBCBCB",borderRadius:"10px",position:"relative",left:"28px"};a=Qt(b,!0,a.username);a.style.wordWrap="break-word";a.style.display="block";return N("div",{className:"corner",style:{textAlign:c?"right":"left",paddingTop:"2px"}},N("div",{className:c?"me":"other",style:c?d:e},a))}function aD(a,b,c){var d=cD(a,c,a.Ap);void 0!==d?a.Dt=d:a.Ay.classList.remove("corner");a.Ap=c?a.Uc:a.username;d=dD(a.zs,a.Dt,a.Ap);void 0!==d&&(a.zs=d);a.Ay=eD(a,b,c);a.Dt.appendChild(a.Ay);a.ra.appendChild(a.Dt)}function dD(a,b,c){if(void 0===a||null===a.getAttribute("data-username"))return b.setAttribute("data-username",c),b}
function cD(a,b,c){var d={position:"relative"};if(!b&&c!==a.username)return N("div",{style:d},N(Tt,{name:a.username,color:a.color,size:"24px",style:{position:"absolute",bottom:"0px"}}));if(b&&c!==a.Uc)return N("div",{style:d})}function RC(a,b){0===b?ZC(a):(a.H=b,a.pb?a.Sn.style.display="inline-block":(a.Hi.element.textContent=9<b?"9+":""+b,a.Hi.show()))}function ZC(a){0!==a.H&&At(a.username,function(){a.pz();ho.h(a.username)})};var fD=new F("createChatWindowEvent"),YC=new F("removeChatWindowEvent"),$C=new F("updateWindowIsOpenEvent"),gD=new F("removePmChatBarRequest"),hD=new F("restorePmChatBarRequest");function iD(a){G.call(this);var b=this;this.xd=new Map;this.Gd=[];this.qc=[];this.Fv={};this.Vq=0;this.Ni=function(d){b.xd.forEach(function(e,f){f===d?e.pw(2):e.pw(1)})};this.Uc=a;this.I=new Ub;E(YC.j(function(d){var e=b.xd.get(d);void 0!==e&&(b.En.removeChild(e.element),b.xd.delete(d),jD(d,b.Gd),kD()>b.Gd.length&&0<b.qc.length&&lD(b),mD(b,d,!0,!1),0===b.Gd.length&&0===b.qc.length&&0===b.xd.size&&(gD.h(!1),Vb(b.I)))}),this.I);E($C.j(function(d){mD(b,d.username,!1,d.pb)}),this.I);E($n.j(function(d){var e=b.xd.get(d.Da);if(void 0!==e&&e.Ro){var f=d.N.username===b.Uc,g=f?0:e.H+1;aD(e,d.message,f);e.Pa();f||RC(e,g);f||-1===b.qc.indexOf(d.Da)||nD(b,d.Da,e.H)}}),this.I);E(ss.j(function(d){var e=b.xd.get(d.W);void 0!==e&&e.Ro&&(d.Ks?(zs(e.eh),e.mm.message.textContent=Ge):(ys(e.eh),e.mm.message.textContent=He))}),this.I);var c=new xk(function(){for(;kD()<b.Gd.length&&1<b.Gd.length;)oD(b),pD(b);for(;kD()>b.Gd.length&&0<b.qc.length;)lD(b),pD(b)},{yd:100,ce:2});v("resize",window,function(){yk(c)})}r(iD,G);iD.prototype.qa=function(){G.prototype.qa.call(this);this.element=N("div",{id:"ChatWindowBar",style:{position:"fixed",bottom:"0px",right:"10px",minWidth:"350px",width:"100vw",height:"0px",backgroundColor:"rgba(255, 255, 255, 0.5)",zIndex:1003}});this.En=N("div",{style:{display:"inline-block",cssFloat:"right"}});this.element.appendChild(this.En)};function qD(a){a.Gd.forEach(function(b){b=a.xd.get(b);void 0!==b&&b.pc(!1)})}
function oD(a){var b=rD(a,a.Gd);if(""!==b){a.qc.push(b);1===a.qc.length&&sD(a);var c=a.xd.get(b);void 0!==c&&(a.En.removeChild(c.element),tD(a,b),c=c.H,0<c&&nD(a,b,c));b=ad(a.qc.length);a.$k.message.textContent=b}}
function lD(a,b,c){c=void 0===c?!1:c;var d=void 0!==b?jD(b,a.qc):rD(a,a.qc);""!==d&&(a.Gd.push(d),b=document.querySelector("div.overflowRow[data-username="+d+"]"),d=a.xd.get(d),null!==b&&null!==b.parentElement&&b.parentElement.removeChild(b),void 0!==d&&(a.En.appendChild(d.element),d.pc(c),SC(d),0<d.H&&uD(a,!1)),0===a.qc.length&&a.element.removeChild(a.Zk),c=ad(a.qc.length),a.$k.message.textContent=c)}function vD(a,b){lD(a,b,!0);b=a.xd.get(b);void 0!==b&&OC(b,!0);kD()<a.Gd.length&&oD(a);pD(a)}
function kD(){var a=Math.floor((window.innerWidth-180)/290);return 1>a?1:a}
function sD(a){a.Dj=N("div",{style:{position:"absolute",right:"0px",bottom:"40px",width:"172px",border:"1px solid #EFEFEF",borderRadius:"4px 4px 0px 4px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.25)",display:"none"},className:"overflowMenu"});a.kz=N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/orange_dot.svg",style:{position:"relative",top:"5px",left:"26px",display:"none"}});a.Zk=N("div",{style:{cssFloat:"right",position:"relative",width:"48px",height:"36px",bottom:"36px",marginRight:"7px",border:"1px solid #F0F0F0",borderRadius:"4px 4px 0px 0px",boxShadow:"0px 0px 16px rgba(0, 0, 0, 0.32)",background:"#FFFFFF url(https://static-assets.highwebmedia.com/tsdefaultassets/overflow.svg) no-repeat center center",cursor:"pointer"},onMouseEnter:function(){a.Zk.style.backgroundColor="#E0E0E0";"block"!==a.Dj.style.display&&a.$k.show()},onMouseLeave:function(){a.Zk.style.backgroundColor="#FFFFFF";"block"!==a.Dj.style.display&&a.$k.D()},onClick:function(){a.Dj.style.display="none"===a.Dj.style.display?"block":"none";a.$k.D()}},N(EC,{classRef:function(b){a.$k=b},message:ad(a.qc.length),MA:"45px",mw:"20px"}),a.Dj,a.kz);a.element.appendChild(a.Zk)}
function tD(a,b){var c=a.xd.get(b);if(void 0!==c){var d=N("div",{className:"overflowRow","data-username":b,style:{height:"29px",backgroundColor:"#FFFFFF",position:"relative"},onMouseEnter:function(){a.Zk.style.backgroundColor="#FFFFFF";d.style.backgroundColor="#E0E0E0";f.style.display="block"},onMouseLeave:function(){d.style.backgroundColor=d.classList.contains("unread")?"#FCEADC":"#FFFFFF";f.style.display="none"},onClick:function(){vD(a,b)}}),e=function(g){var h=N(FC,{username:b,Ao:!1,Vs:!0,color:g});h.style.left="51px";h.style.top="7px";g=N(Tt,{name:b,color:g,size:"24px",style:{width:"24px",top:"2px",left:"15px"}});d.appendChild(g);d.appendChild(h)};void 0===c.color?Ct(b).then(function(g){e(jt(g.V));0<g.H&&nD(a,b,g.H)}):e(c.color);var f=XC(d,{top:"2px",right:"2px",display:"none"},function(g){g.stopPropagation();a.xd.delete(b);a.Dj.removeChild(d);jD(b,a.qc);g=ad(a.qc.length);a.$k.message.textContent=g;0===a.qc.length&&a.element.removeChild(a.Zk);uD(a,!1);mD(a,b,!0,!1)});d.appendChild(f);a.Dj.appendChild(d)}}
function jD(a,b){var c=b.indexOf(a);if(-1<c)return b.splice(c,1),a;u('"'+a+'" not found in '+b);return""}function rD(a,b){var c;b===a.Gd&&(c=a.Gd.shift());b===a.qc&&(c=a.qc.pop());return void 0===c?(u(b+" is empty"),""):c}function mD(a,b,c,d){c?delete a.Fv[b]:a.Fv[b]=d;pD(a)}
function pD(a){if(t()){for(var b=[],c=q(a.qc.concat(a.Gd)),d=c.next();!d.done;d=c.next())d=d.value,void 0!==a.xd.get(d)&&b.push({username:d,isOpen:a.Fv[d]});c=window.localStorage.getItem("pmChatWindows");c=null!==c?JSON.parse(c):{};c[a.Uc]=JSON.stringify(b);window.localStorage.setItem("pmChatWindows",JSON.stringify(c))}}
function nD(a,b,c){b=document.querySelector("div.overflowRow[data-username="+b+"]");if(null!==b){var d=b.querySelector("div.numDisplay");null!==d&&(d.textContent=9<c?"9+":""+c,d.style.display="inline-block");b.classList.contains("unread")||(b.classList.add("unread"),b.style.backgroundColor="#FCEADC",uD(a,!0))}}function uD(a,b){a.Vq=b?a.Vq+1:a.Vq-1;a.kz.style.display=0<a.Vq?"inline":"none"}
function wD(a){function b(){if(t()){var f=window.localStorage.getItem("pmChatWindows");null!==f&&(f=JSON.parse(f),void 0!==f.length?window.localStorage.removeItem("pmChatWindows"):(f=f[a],void 0!==f&&(JSON.parse(f).forEach(function(g){c(g.username,g.isOpen,!1)}),void 0!==d&&qD(d))))}}function c(f,g,h,m){g=void 0===g?!0:g;h=void 0===h?!0:h;m=void 0===m?!1:m;if(a!==f){void 0===d&&(d=new iD(a),document.body.appendChild(d.element));var n=d;g=void 0===g?!0:g;m=void 0===m?!1:m;var p=n.xd.get(f);void 0!==p?-1!==n.qc.indexOf(f)?vD(n,f):OC(p,!0,!0):(n.Gd.push(f),kD()<n.Gd.length&&oD(n),h=new NC({username:f,Uc:n.Uc,open:g,Pk:h,Ni:n.Ni}),m&&h.pc(!0),n.xd.set(f,h),n.En.appendChild(h.element),mD(n,f,!1,g))}}var d,e=!1;oo();b();gD.j(function(f){f&&(e=!0);void 0!==d&&(document.body.removeChild(d.element),d=void 0)});hD.j(function(){e&&(b(),e=!1)});fD.j(function(f){e||c(f,!0,!0,!0)})};function xD(a){kl.call(this,a.Mb,!0,a);var b=this;this.Va();fD.j(function(){b.Va()});this.hf.j(function(){void 0!==b.Mb&&b.Mb.classList.toggle("active",b.Rb())})}r(xD,kl);k=xD.prototype;k.initData=function(a){this.La=a.La;this.H=0};k.qa=function(){function a(e){var f=0<e;b.H=e;b.Uk.innerText=f?" ("+b.H+")":"";void 0!==b.Mb&&(f?b.Mb.classList.add("has_unread"):b.Mb.classList.remove("has_unread"))}var b=this,c={background:"#FFF",border:"1px solid #0B6A93",borderRadius:"4px 0 4px 4px",boxShadow:"0px 0px 16px rgba(0, 0, 0, 0.32)",height:this.La?"":"383px",maxHeight:"383px",padding:"1px",position:"absolute",right:"0",width:"304px"};this.Uk=N("span",null,0<this.H?""+this.H:"");if(this.La){var d={color:"#306A91",cursor:"pointer",fontSize:"12px"};d=N("div",{style:{borderTop:"1px solid #E0E0E0",fontSize:"12px",marginTop:"0",padding:"44px 0 16px",position:"static",textAlign:"center",top:"50%",width:"100%"}},N("img",{src:"https://static-assets.highwebmedia.com/tsdefaultassets/pms/empty-chat-state.svg",alt:"empty-chat-state"}),N("div",{style:{fontSize:"14px",fontFamily:"UbuntuRegular, Tahoma, Arial, Helvetica, sans-serif",lineHeight:"18px",margin:"8px 0"}},Si),N("div",{style:{margin:"16px 0 44px"}},N("a",{style:d,onClick:function(){Rm(!0)}},od)),N("div",null,Ui," ",N("a",{href:"/accounts/register",style:d,onClick:function(){C("PMSignupClicked")}},qd)))}else this.od=new lu({wa:!0,Of:!1,Ue:fD,Eh:a}),d=this.od.render();this.element=N("div",{style:c},N("div",{style:{font:"14px/18px UbuntuRegular",margin:"10px 8px"}},Ti,this.Uk),d)};k.render=function(){return this.element};k.show=function(){C("PMMenuOpened",{num_unread:this.H});kl.prototype.Bb.call(this)};k.Pq=function(){return kl.prototype.Pq.call(this)};function yD(a,b,c){kl.call(this,a);var d=this;this.username=b;this.sk=c;this.Fi=new Qb("UIPTest");this.element.id="UserMenuDropDown";H(this.element,"userMenuDropDown");H(this.element,"userInfoDropdownBgColor");this.element.style.display="none";this.element.style.width="100%";this.element.style.height="auto";this.element.style.left="-1px";this.element.style.top="24px";this.element.style.zIndex="1001";this.element.style.borderRadius="0 0 5px 5px";this.element.style.borderStyle="solid";this.element.style.borderWidth="1px";this.element.style.borderTop="none";this.element.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";this.element.style.padding="5px 0";this.element.style.position="absolute";this.Fi.active&&(this.element.style.position="absolute",this.element.style.width="155px",this.element.style.top=""===b?"36px":"31px",this.element.style.borderRadius="5px",zD(this),this.hf.j(function(g){Nc.fi||H(a,"triggerElement");a.classList.toggle("tabindex_fix",g.Sc)}),a.onmousedown=function(){a.classList.add("tabindex_fix")});Nc.fi||AD(this);if(""!==b){this.nu=BD(this,Gd);this.element.appendChild(this.nu);this.Oy=BD(this,nd);this.Oy.href="/my_collection/";this.element.appendChild(this.Oy);var e=document.createElement("form");e.method="post";e.action="/auth/logout/";e.target="_top";e.style.display="none";var f=document.createElement("input");f.type="hidden";f.name="csrfmiddlewaretoken";f.value=yb("csrftoken");e.appendChild(f);this.element.appendChild(e);c=BD(this,Id);c.style.cursor="pointer";c.onclick=function(g){g.preventDefault();d.Va();Es.h("user_menu")};this.element.appendChild(c);c=BD(this,Hd);c.href="/auth/logout/";c.onclick=function(g){g.preventDefault();d.Va();sc("Are you sure you want to log out?",function(){f.value=yb("csrftoken");e.submit()})};this.element.appendChild(c);void 0!==b&&void 0!==this.nu&&(this.nu.href="/p/"+b+"/?tab=bio")}else this.Fi.active||(b=BD(this,od),b.classList.add("login-link"),b.href="/auth/login",this.element.appendChild(b),b=BD(this,pd),b.href="/accounts/register/?src=header",this.element.appendChild(b)),b=BD(this,Id),b.style.cursor="pointer",b.href="#",b.onclick=function(g){g.preventDefault();d.Va();Es.h("user_menu")},this.element.appendChild(b)}r(yD,kl);yD.prototype.G=function(){this.Fi.active&&(this.element.style.left="",this.element.style.right="0px")};function AD(a){if(void 0!==a.sk){a.oj=document.body.classList.contains("darkmode");var b=CD(a);a.element.insertBefore(b,a.element.firstChild);!document.body.classList.contains("isIpad")&&eb()&&document.body.classList.add("isIpad")}}
function CD(a){var b=document.createElement("div"),c=document.createElement("span");a.rg=document.createElement("span");b.innerText=Gi;c.appendChild(a.rg);b.appendChild(c);H(a.rg,"dmSwitchCircle");pk(a.rg,{borderRadius:"50%",display:"inline-block",height:"16px",width:"16px",position:"relative",top:"2px",left:"3px"});pk(c,{borderRadius:"25px",display:"inline-block",height:"20px",marginLeft:"10px",position:"relative",verticalAlign:"bottom",width:"44px"});H(c,"dmSwitch");yp(b,"none");xp(a.rg,"left 100ms");H(b,"userInfoDropdownTextColor");H(b,"userInfoDropdownHighlightColor");b.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";b.style.fontSize="14px";b.style.fontWeight="normal";b.style.padding="5px 0 5px 10px";a.Fi.active&&(b.style.color=document.body.classList.contains("darkmode")?"#fff":"#306a91",c.style.backgroundColor=document.body.classList.contains("darkmode")?"#BEBEBE":"#474747",a.rg.style.backgroundColor=document.body.classList.contains("darkmode")?"#474747":"#FFFFFF",b.onmouseenter=function(){b.style.backgroundColor=document.body.classList.contains("darkmode")?"#7f7f7f":"#306A91";b.style.color="#FFFFFF";c.style.backgroundColor=document.body.classList.contains("darkmode")?"#474747":"#BEBEBE";a.rg.style.backgroundColor=document.body.classList.contains("darkmode")?"#FFFFFF":"#474747"},b.onmouseleave=function(){b.style.backgroundColor="transparent";b.style.color=document.body.classList.contains("darkmode")?"#fff":"#306a91";c.style.backgroundColor=document.body.classList.contains("darkmode")?"#BEBEBE":"#474747";a.rg.style.backgroundColor=document.body.classList.contains("darkmode")?"#474747":"#FFFFFF"});b.onclick=function(){DD(a);void 0!==document.changeColorMode&&document.changeColorMode()};Ej.j(function(d){DD(a,d)});a.oj&&(a.rg.style.left="25px");return b}
function DD(a,b){Nc.fi||(void 0!==b&&(a.oj="darkmode"!==b),a.oj?(a.rg.style.left="3px",a.oj=!1,I(document.body,"darkmode"),H(document.body,"lightmode"),zb("theme_name","lightmode",60)):(a.rg.style.left="25px",a.oj=!0,I(document.body,"lightmode"),H(document.body,"darkmode"),zb("theme_name","darkmode",60)),zD(a),C("colorModeChanged",{username:void 0===a.username?"__anon__":a.username,color_mode:a.oj?"darkmode":"lightmode"}),Dj.h(a.oj?"darkmode":"lightmode"))}
function zD(a){a.Fi.active&&!Nc.fi?(a.element.style.boxShadow="0px 0px 16px rgba(0,0,0,0.32)",a.element.style.backgroundColor=document.body.classList.contains("darkmode")?"#2a2a2c":"#fff",a.element.style.border=document.body.classList.contains("darkmode")?"1px solid #474747":"1px solid #F0F0F0"):Nc.fi&&(a.element.style.backgroundColor=Nc.UA,a.element.style.border="1px solid "+Nc.Iq)}
function BD(a,b){var c=document.createElement("a");c.style.textDecoration="none";c.innerText=b;c.style.display="block";c.style.fontSize="14px";c.style.padding="5px 0 5px 10px";a.Fi.active&&!Nc.fi?(H(c,"uipTestLink"),c.style.margin="0px",c.style.borderRadius="0px"):(H(c,"userInfoDropdownTextColor"),H(c,"userInfoDropdownHighlightColor"));c.onclick=function(){a.Va()};return c}yD.prototype.Bb=function(){var a;this.Fi.active&&(null===(a=this.Mb)||void 0===a?void 0:a.blur());return kl.prototype.Bb.call(this)};yD.prototype.Va=function(){var a;this.Fi.active&&(null===(a=this.Mb)||void 0===a?void 0:a.blur());return kl.prototype.Va.call(this)};function ED(a,b){var c=!1,d=document.querySelector("#userInfoPanelMenuDropdownRoot"),e=document.querySelector("#user_information_profile_container"),f=document.querySelector("#userUpdatesBellRoot"),g=document.querySelector("#userUpdatesMenuDropdownRoot"),h=document.querySelector("#pmListIconRoot"),m=document.querySelector("#pmListDropdownRoot"),n=document.querySelector("#mmnav");c=void 0===c?!1:c;null!==d&&null!==e&&(b=new yD(e,a,b),d.appendChild(b.element),b.Z());if(!Nc.fi&&null!==f&&null!==g){0<=f.className.indexOf("has_unseen")&&cm.h(!0);if(c){var p=new up;void 0!==n&&null!==n&&(zo.j(function(A){p.zp<A.timestamp&&0>n.className.indexOf("has_unseen")&&(n.className=[n.className,"has_unseen"].join(" "))}),bm.j(function(){n.className=n.className.replace("has_unseen","")}))}else p=new sp;d=p.Bx(f);g.appendChild(d.element)}null===h||null===m||(void 0===c?0:c)||m.appendChild(N(xD,{La:""===a,Mb:h}))};var FD=new F("showJoinOverlay");function GD(){Lj.call(this);var a=this;this.element.style.display="none";this.element.style.position="absolute";this.element.style.width="560px";this.element.style.height="auto";this.element.style.backgroundColor="#ffffff";this.element.style.border="2px solid #cccccc";this.element.style.borderRadius="20px";this.element.style.padding="10px";this.element.style.top="190px";this.element.style.fontSize="12px";this.element.style.fontFamily="UbuntuRegular', Arial, Helvetica, sans-serif";this.P.style.backgroundColor="#000000";this.element.appendChild(this.Yr());this.zg=document.createElement("iframe");this.zg.frameBorder="0";this.zg.marginWidth="0";this.zg.scrolling="no";this.zg.marginHeight="0";this.zg.style.width="560px";this.zg.style.height="650px";this.zg.src="/accounts/register_iframe/";this.element.appendChild(this.zg);var b=document.createElement("hr");b.style.margin="15px 0 10px 0";b.style.border="0";b.style.color="#e4e4e4";b.style.backgroundColor="#e4e4e4";b.style.height="1px";this.element.appendChild(b);b=document.createElement("span");var c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/arrow_back.gif";c.style.marginRight="4px";c.style.verticalAlign="bottom";b.appendChild(c);this.We=document.createElement("a");this.We.innerText=rf;this.We.style.color="#0a5a83";this.We.style.position="relative";this.We.style.top="-1px";this.We.onmouseenter=function(){a.We.style.textDecoration="underline"};this.We.onmouseleave=function(){a.We.style.textDecoration="none"};b.appendChild(this.We);this.element.appendChild(b);b=document.createElement("span");b.style.cssFloat="right";c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/key.gif";c.style.marginRight="4px";c.style.verticalAlign="bottom";b.appendChild(c);c=document.createElement("span");c.innerText=sf;c.style.color="#7f7f7f";c.style.position="relative";c.style.top="-1px";c.style.marginRight="2px";b.appendChild(c);var d=document.createElement("a");d.href="/auth/login/";d.innerText=tf;d.style.color="#0a5a83";d.style.position="relative";d.style.top="-1px";d.onmouseenter=function(){d.style.textDecoration="underline"};d.onmouseleave=function(){d.style.textDecoration="none"};b.appendChild(d);this.element.appendChild(b);this.Sb.j(function(){a.D()})}r(GD,Lj);GD.prototype.Nf=function(a){var b=this;this.We.href=a.anchor.href;this.We.onclick=a.op;v("click",this.We,function(){b.D()});Lj.prototype.show.call(this);this.element.style.display="block";this.G();this.zg.onload=function(){var c=b.zg.contentDocument;if(null!==c){var d=c.getElementById("husername");null!==d&&d.focus();c=c.querySelector("a.next");c.href=a.anchor.href;c.onclick=a.op;v("click",c,function(){b.D()})}};C("RegisterIframe_Shown")};GD.prototype.Yr=function(){var a=document.createElement("div");a.style.animationName="spin";a.style.position="absolute";a.style.top="50%";a.style.left="50%";a.style.width="30px";a.style.height="31px";a.style.margin="-15px 0 0 -15px";a.style.background='url("https://static-assets.highwebmedia.com/tsdefaultassets/images/loading_spinner.svg")';a.style.backgroundSize="cover";a.style.animationName="spin";a.style.webkitAnimationName="spin";a.style.animationDuration="2s";a.style.webkitAnimationDuration="2s";a.style.animationTimingFunction="linear";a.style.webkitAnimationTimingFunction="linear";a.style.animationIterationCount="infinite";a.style.webkitAnimationIterationCount="infinite";a.style.zIndex="-1";return a};GD.prototype.G=function(){this.element.style.left=(document.documentElement.clientWidth-this.element.offsetWidth)/2+"px"};var HD=new F("commandeerJoinOverlayAnchors",{Rd:700,oe:1}),ID=new F("restoreJoinOverlayAnchors",{Rd:700,oe:1}),JD=!1;function KD(a){var b=this;this.anchor=a=void 0===a?document.createElement("a"):a;if(void 0!==wb().join_overlay){var c=function(){JD=!0;LD(b)};JD?window.setTimeout(function(){LD(b)},0):HD.j(c);var d=function(){JD=!1;b.restore();HD.removeListener(c);window.setTimeout(function(){ID.removeListener(d)},0)};ID.j(d)}}function LD(a){a.op=a.anchor.onclick;a.aD=a.anchor.href;a.anchor.href="/accounts/register/";a.anchor.onclick=function(b){b.preventDefault();FD.h(a);ID.h(void 0)}}
KD.prototype.restore=function(){this.anchor.onclick=this.op;this.anchor.href=this.aD;this.op=null};function MD(a){a=q(a.querySelectorAll("a:not(.nooverlay):not([href='#'])"));for(var b=a.next();!b.done;b=a.next())new KD(b.value)}
function ND(){var a=document.getElementById("header");null!==a&&MD(a);a=document.getElementById("footer-holder");null!==a&&MD(a);a=document.getElementById("room_list");null!==a&&MD(a);a=document.getElementById("hashtag_ticker");null!==a&&MD(a);a=document.getElementsByClassName("sub-nav");0!==a.length&&MD(a[0])};function OD(a,b,c){var d=this;this.Jc=a;this.Yk=!1;this.VD=this.Jc.querySelector(".followed_counts");H(this.Jc,"gender-tab");H(this.Jc,"tabAnchor");H(this.Jc,"tabBorder");H(this.Jc,"tabInactiveColor");H(this.Jc,"tabInactiveBgColor");this.Jc.style.borderBottomStyle="solid";this.Jc.style.borderBottomWidth="1px";pk(a,{whiteSpace:"nowrap",display:"inline-block",cursor:"pointer",boxSizing:"border-box",WebkitTextSizeAdjust:"none"});this.Gf=qn;this.Gf.Yf=dn(this.Jc.innerText);PD(this);a={username:c,La:b,Wq:function(e){PD(d);0===e.Vz.length&&(d.Yk=!1,QD(d))},zl:function(e,f){PD(d);d.Yk=0<e.xv.length;QD(d);e.fj&&!f&&d.fj()},tC:function(){PD(d);clearInterval(d.gj);d.gj=void 0;d.Yk=!1;QD(d)},hd:new tn(this.Jc,b),uC:this};this.hd=a.hd;this.hd.hf.j(function(e){if(e.Sc){clearInterval(d.gj);d.gj=void 0;d.Yk=!1;QD(d);C("FollowedDropdownOpened",{onlineBroadcasters:d.Gf.Yf.ph});if(t()&&(e=window.localStorage.getItem("onlineFollowedTab"),null!==e)){e=JSON.parse(e);for(var f=q(e.unseenRooms),g=f.next();!g.done;g=f.next())e.seenRooms[g.value.room]=!0;e.timestamp=Date.now();e.flash=!1;e.unseenRooms=[];window.localStorage.setItem("onlineFollowedTab",JSON.stringify(e))}t()&&window.localStorage.setItem("followedDropdownClicked",JSON.stringify({timestamp:Date.now()}))}});this.Gf.pc(a)}OD.prototype.fj=function(){var a=this;if(void 0===this.gj){var b=3,c=!0;this.gj=window.setInterval(function(){if(c){if(H(a.Jc,"orange"),--b,0===b){clearInterval(a.gj);a.gj=void 0;return}}else I(a.Jc,"orange");c=!c},500)}};function PD(a){var b=a.Gf.Yf;a.Jc.style.width="auto";a.VD.textContent="("+b.ph+"/"+b.total+")";null!==a.Jc.offsetParent&&window.setTimeout(function(){a.Jc.style.width=a.Jc.offsetWidth+1+"px";a.hd.Rb()&&a.hd.ni()})}function QD(a){a.Yk&&!a.hd.Rb()?H(a.Jc,"orange"):I(a.Jc,"orange")};function RD(a){G.call(this,a);a=a.querySelector(".nav");null!==a&&a instanceof HTMLElement&&Dk(a,["padding-left","padding-right"],10,65,800);a=document.querySelector(".footer-holder .langs");null!==a&&a instanceof HTMLElement&&Dk(a,["padding-left","padding-right"],10,65,800);var b=document.querySelector(".footer-holder .footer-cb-address");null!==b&&b instanceof HTMLElement&&Dk(b,"margin-left",-55,0,589,function(c){0===c&&(b.style.marginLeft="")})}r(RD,G);function SD(a){G.call(this,a);TD();UD();VD();a=document.querySelector("#user_information");null!==a&&a instanceof HTMLElement&&Dk(a,"margin-right",4,12,600)}r(SD,G);function VD(){var a=document.getElementById("nav");if(null!==a){var b=new G(a);Array.from(a.children).forEach(function(g){if(g instanceof HTMLLIElement){var h=new Gl(g);Wb(b,h);h.element.style.display="block";g=h.element.firstChild;if(null!==g&&g instanceof HTMLAnchorElement){var m=getComputedStyle(g);g.style.color=m.color;g.style.font=m.font;g.style.fontFamily=m.fontFamily;g.style.fontWeight=m.fontWeight;g.style.fontSize=m.fontSize}h.Vp.j(function(n){h.element.style.padding=n?"8px 4px":""})}});var c=new xl("li",!0);b.J(c);qk(c.element);pk(c,{border:"1px solid transparent",borderRadius:"4px 4px 0 0",height:"30px",top:"6px",width:"39px",paddingTop:"3px",color:Nc.Py});c.fe.hf.j(function(g){c.element.style.border=g.Sc?"1px solid "+Nc.Iq:"1px solid transparent"});pk(c.fe,{borderColor:""+Nc.Iq,padding:"8px 20px 8px 8px"});if(null!==a.parentElement){for(var d=0,e=q(a.parentElement.children),f=e.next();!f.done;f=e.next())f=f.value,f!==a&&f instanceof HTMLElement&&(d+=f.offsetWidth);c.Ah.element.style.width=d+"px"}}}function UD(){var a=document.querySelector("#header .ad");if(null!==a&&a instanceof HTMLElement){var b=document.querySelector(".right_section"),c=sk(null!==a.firstElementChild&&a.firstElementChild instanceof HTMLElement?a.firstElementChild:a).right;Bk.j(function(){a.style.display=(null===b?document.body.offsetWidth:b.offsetLeft)-25<c?"none":"block"})}}
function TD(){var a=document.querySelector(".logo-zone");if(null!==a&&a instanceof HTMLElement){var b=document.querySelector(".logo-zone svg"),c=document.querySelector(".logo-zone strong:last-child");Dk(a,"padding-left",8,15,600);Dk(a,"padding-top",12,6,600);null!==b&&b instanceof HTMLElement&&(Dk(b,"width",145,198,600),Dk(b,"height",45,61,600));null!==c&&c instanceof HTMLElement&&(Dk(c,"font-size",8,10,600),Dk(c,"padding-left",13,17,600));var d=document.querySelector(".logo-zone .logo");if(null!==d&&d instanceof HTMLElement){var e=d.clientWidth;e>500-wk()&&Bk.j(function(){d.style.maxWidth=e+d.offsetLeft>ek()?ek()-d.offsetLeft-1+"px":""})}}};function WD(a,b,c){this.La=a;this.eE=b;this.Rf=c;XD(this)}function XD(a){a.qo();Cn(Dn(),function(){a.qo()})}WD.prototype.qo=function(){var a=this,b=document.getElementById(this.eE);if(null!==b){var c={};b=q(b.querySelectorAll("div.icon_following, div.icon_not_following"));for(var d=b.next();!d.done;c={co:c.co},d=b.next())c.co=d.value,c.co.onclick=function(e){return function(){a.Ru(e.co)}}(c)}};function YD(a){a.classList.remove("icon_update_following");a.classList.add("icon_following");a.classList.add("no_hover");window.setTimeout(function(){a.classList.remove("no_hover")},3E3);a.title=Ge}function ZD(a,b){b.classList.remove("icon_not_following");b.classList.add("icon_update_following");var c=b.getAttribute("data-slug");null!==c&&(c=ts(c,a.La),void 0!==c&&c.then(function(d){d?YD(b):$D(a,b)}))}
function aE(a){a.classList.remove("icon_update_following");a.classList.add("icon_not_following");a.classList.add("no_hover");window.setTimeout(function(){a.classList.remove("no_hover")},3E3);a.title=He}function $D(a,b){b.classList.remove("icon_following");b.classList.add("icon_update_following");var c=b.getAttribute("data-slug");null!==c&&(void 0!==us(c,a.La)?aE(b):(b.classList.remove("icon_update_following"),b.classList.add("icon_following")))}
WD.prototype.Ru=function(a){a.classList.contains("icon_following")?$D(this,a):a.classList.contains("icon_not_following")&&(this.La?this.Rf?sc("To follow this broadcaster, please create an account or login now.",function(){window.location.href="/accounts/auth/login/?next="+window.location.pathname}):Rm(!0):ZD(this,a))};function bE(a,b){v("mouseover",a,function(){var c,d=0,e=a.getBoundingClientRect(),f=a.getBoundingClientRect(),g=Math.round(e.top+window.pageYOffset);e=Math.round(e.left+window.pageXOffset);300>window.innerHeight-g+window.pageYOffset&&(d=258);var h=null===(c=a.nextElementSibling)||void 0===c?void 0:c.cloneNode(!0);void 0!==h&&(h.style.display="",c=b.firstChild,null!==c?b.replaceChild(h,c):b.appendChild(h),b.style.display="");c=b.getBoundingClientRect();b.style.left=e+f.width/2-c.width/2+"px";b.style.top=g+f.height+8-d+"px"});v("mouseleave",a,function(){b.style.display="none"})};function cE(){window.setTimeout(function(){sj||location.reload();rj.j(function(){location.reload()})},1728E5)};function dE(a){this.Oz=1;this.du(a);Ia.current=this.context;this.pc();window.matchMedia("(prefers-color-scheme: dark)").matches&&""===yb("theme_name")&&new Qb("DrkSysStngs",!0)}k=dE.prototype;k.du=function(a){var b=a.logged_in_user;b=null!==b?{username:b.username,Ke:b.gender,sj:b.is_supporter,wt:b.is_staff,hb:b.token_balance,OJ:b.user_uid,kJ:b.signed_username,rB:b.animate_thumbnails,Sa:b.is_age_verified,Qb:b.is_broadcasting,IJ:b.total_followed,Yf:b.online_followed}:void 0;this.context={cC:a.current_logo,AD:a.no_ads,qb:b,Ij:IA(a.push_service),sk:a.dark_mode_enabled,vc:a.chat_settings.show_emoticons,YH:a.chat_settings.max_pm_age,kD:a.JPEG_STREAM_URL,jD:a.JPEG_ROOM_IMAGE_URL,Cw:a.entrypoint_context_id,oy:void 0};t()&&(a=window.localStorage.getItem("contextID"),window.localStorage.setItem("contextID",this.context.Cw),this.context.oy=a===this.context.Cw)};k.pc=function(){var a,b;cE();Gm=null!==(a=this.context.kD)&&void 0!==a?a:"https://cbjpeg.stream.highwebmedia.com/";Hm=null!==(b=this.context.jD)&&void 0!==b?b:"https://roomimg.stream.highwebmedia.com/";ED(void 0!==this.context.qb?this.context.qb.username:"",this.context.sk);eE(this);a=document.getElementById("followed_anchor");null!==a&&a instanceof HTMLAnchorElement&&(a.href="#",b=document.getElementById("followed_tab"),a=null!==b&&((new Qb("hpfilter1")).active||(new Qb("hpfilter2")).active)?b:a,new OD(a,void 0===this.context.qb,void 0!==this.context.qb?this.context.qb.username:""));this.qo();a=document.querySelector("#tag_tip");b=document.querySelectorAll(".room_link[data-roomlink='true']");if(null!==a){b=q(b);for(var c=b.next();!c.done;c=b.next())bE(c.value,a)}fE();var d;a=window.location.pathname.startsWith("/staff_tools");b=document.getElementById("header");null===b||null===b.offsetParent||a||(a=this.context.Ij.Lg.flags.get("sitewide_pms_enabled"),(!0===(null===(d=this.context.qb)||void 0===d?void 0:d.wt)||void 0!==this.context.qb&&!0===a)&&wD(this.context.qb.username));gE();hE(this);d=document.querySelector("#header");null!==d&&d instanceof HTMLElement&&new SD(d);d=document.querySelector(".footer-holder");null!==d&&d instanceof HTMLElement&&new RD(d);iE();void 0===this.context.qb&&("/auth/login/"!==window.location.pathname&&jE(),void 0!==wb().join_overlay&&"/accounts/register/"!==window.location.pathname&&this.Uu());kE();this.context.AD||lE();mE();nE();fr(void 0===this.context.qb);this.roomReload={addOnLoadHandler:Hn,loadRooms:In,scheduleRefresh:Jn,chatRoomListOnClick:Ln,startStreaming:On,stopStreaming:Pn,clearRefresh:Kn,setRoomAnimation:Nn};this.displayLoginOverlay=Rm;this.showModal=Qn};function hE(a){function b(){JA(c).then(function(e){a.nr(e,c);return pA(e.auth).then(function(){cA(e.auth.getCapabilities());oA(e)})}).catch(function(e){u("Push service failed to initialize - disabling:",e);--a.Oz;0<=a.Oz&&window.setTimeout(function(){hE(a)},3E4)})}var c=a.context;if(sj)b();else{var d=function(e){e&&(b(),rj.removeListener(d))};rj.j(d)}}k.nr=function(a,b){void 0!==b.qb&&a.auth.Zf.push("user:"+b.qb.username)};k.Uu=function(){ND();HD.h(void 0);var a;FD.j(function(b){void 0===a&&(a=new GD);window.scrollTo(0,0);a.Nf(b)})};function kE(){var a=new ft;Es.j(function(b){a.form.source.value=b;a.show()})}function jE(){for(var a=q(document.querySelectorAll("a.login-link")),b=a.next();!b.done;b=a.next())b.value.onclick=function(c){c.preventDefault();Xm()}}function fE(){v("popstate",window,function(a){void 0!==a.state&&null!==a.state&&location.reload()})}
function eE(a){for(var b=q(document.querySelectorAll(".purchase_tokens a, a.purchase_tokens")),c=b.next();!c.done;c=b.next())c=c.value,void 0!==a.context.qb?jl(c):c.onclick=function(d){Rm();d.preventDefault()}}function lE(){for(var a=q(document.querySelectorAll(".remove_ads a")),b=a.next();!b.done;b=a.next())b.value.onclick=function(){C("HideAds_Click")}}
function mE(){if(window.hasOwnProperty("ReportingObserver")){var a=function(c){c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,"intervention"===d.type&&C("AdIntervention",{report:JSON.stringify(d.body)})},b=new window.ReportingObserver(function(c){a(c)},{buffered:!0});b.observe();v("beforeunload",window,function(){var c=b.takeRecords();a(c)})}}
function iE(){function a(b){var c={};b=q(document.querySelectorAll(b+" input[type='checkbox']"));for(var d=b.next();!d.done;c={jg:c.jg,Mi:c.Mi},d=b.next())d=d.value,c.jg=d,c.Mi=new Pq(16,c.jg.checked),c.Mi.element.style.top="4px",Oq(c.Mi,function(e){return function(){e.jg.click()}}(c)),d=d.parentNode,null!==d&&(d.insertBefore(c.Mi.element,c.jg),c.jg.style.display="none",c.jg.disabled&&c.Mi.disable(),v("change",c.jg,function(e){return function(){e.jg.disabled||Nq(e.Mi,e.jg.checked)}}(c)))}a("#filter_gender_form");a("#filter_location_form");a("#filter_options_form");a("#animate_thumbnails_form");a("#floatingplayer_options_form")}function gE(){var a;Kt.j(function(b){void 0===a&&(a=new Nt);a.Nf(b)})}k.qo=function(){var a,b=(a=void 0===a?!1:a)?"broadcasters":"room_list",c=document.querySelector("div.icon_not_following"),d=document.querySelector("div.icon_following");null===document.querySelector("#"+b)||null===c&&null===d||new WD(void 0===this.context.qb,b,a)};function nE(){t()&&Object.keys(localStorage).forEach(function(a){a.startsWith("renderedPms_")&&delete localStorage[a]})}window.TS=dE;var oE=window.canAutoplay;function pE(){var a=new Vr;return new Promise(function(b){function c(f){var g=0;!0===f&&rj.removeListener(d);Ya()&&0!==e&&(g=window.performance.now()-e);f=gb();void 0!==f&&10>f&&(a.send(!1,g),b(!1));if(void 0===oE)w("canAutoplay library is undefined. Resolving autoplay to true"),a.send(!0,g,Error("canAutoplay library is undefined. Resolving autoplay to true")),b(!0);else oE.video({inline:!0,muted:!0,timeout:1E3,baseUrl:"https://static-assets.highwebmedia.com/"}).then(function(h){a.send(h.result,g,h.error);b(h.result)})["catch"](function(h){a.send(!1,g,h);b(!1)})}function d(f){f&&c(!0)}var e=0;sj?c():(Ya()&&(e=window.performance.now()),rj.j(d))})};function qE(a){var b,c;G.call(this,"span");var d=this;this.xf=new F("iconClicked",{oe:0});this.sk="light";this.Xr();this.xr();rE(this,null===a||void 0===a?void 0:a.hm);sE(this);tE(this,null!==(b=null===a||void 0===a?void 0:a.st)&&void 0!==b?b:!1);uE(this,null!==(c=null===a||void 0===a?void 0:a.st)&&void 0!==c?c:!1);this.element.onmouseenter=function(){d.Nb.style.visibility="visible";d.Xb.style.visibility="visible";d.Yb.style.visibility="visible";d.image.style.backgroundColor="rgba(203, 203, 203, 0.24)"};this.element.onmouseleave=function(){d.Nb.style.visibility="hidden";d.Xb.style.visibility="hidden";d.Yb.style.visibility="hidden";d.image.style.backgroundColor="rgba(0, 0, 0, 0)"};a=xb("theme_name");switch(a){case void 0:case "lightmode":vE(this,"light");break;case "darkmode":vE(this,"dark");break;default:w("Unknown color mode, defaulting to light:",a),vE(this,"light")}Ej.j(function(e){switch(e){case void 0:case "lightmode":vE(d,"light");break;case "darkmode":vE(d,"dark");break;default:w("Unknown color mode, defaulting to light:",e),vE(d,"light")}});Dj.j(function(e){switch(e){case "lightmode":vE(d,"light");break;case "darkmode":vE(d,"dark");break;default:w("Unknown color mode, defaulting to light:",e),vE(d,"light")}})}r(qE,G);qE.prototype.Xr=function(){this.image=document.createElement("img");this.Nb=document.createElement("div");this.Xb=document.createElement("div");this.Yb=document.createElement("div")};qE.prototype.xr=function(){this.element.appendChild(this.Nb);this.element.appendChild(this.Xb);this.element.appendChild(this.Yb);this.element.appendChild(this.image)};function rE(a,b){void 0!==b&&(a.element.id=b);a.element.style.display="inline-block";a.element.style.position="relative";a.element.style.overflow="visible";a.element.style.height="24px";a.element.style.width="24px";a.element.style.cursor="pointer";a.element.style.margin="0 4px";a.element.style.padding="0";a.element.classList.add("player-controls-icon")}
function sE(a){a.image.style.display="inline-block";a.image.style.boxShadow="border-box";a.image.style.height="16px";a.image.style.width="16px";a.image.style.padding="4px";a.image.style.margin="0";a.image.style.cursor="pointer";a.image.style.borderRadius="2px";a.image.style.backgroundColor="rgba(0, 0, 0, 0)";a.image.onclick=function(){a.xf.h(void 0)}}
function tE(a,b){a.Nb.style.position="absolute";a.Nb.style.bottom="calc(100% + 4px)";a.Nb.style.borderRadius="6px";a.Nb.style.paddingTop="6px";a.Nb.style.paddingBottom="6px";a.Nb.style.paddingLeft="8px";a.Nb.style.paddingRight="8px";a.Nb.style.visibility="hidden";b?a.Nb.style.right="0":a.Nb.style.left="0";a.Nb.classList.add("player-controls-icon-tooltip")}
function uE(a,b){a.Xb.style.position="absolute";a.Xb.style.bottom="100%";a.Xb.style.width="0px";a.Xb.style.height="0px";a.Xb.style.visibility="hidden";a.Xb.style.border="2px solid";a.Xb.style.borderLeftColor="transparent";a.Xb.style.borderBottomColor="transparent";a.Yb.style.position="absolute";a.Yb.style.bottom="100%";a.Yb.style.width="0px";a.Yb.style.height="0px";a.Yb.style.visibility="hidden";a.Yb.style.border="2px solid";a.Yb.style.borderRightColor="transparent";a.Yb.style.borderBottomColor="transparent";b?(a.Yb.style.right="8px",a.Xb.style.right="12px"):(a.Xb.style.left="8px",a.Yb.style.left="12px");a.Xb.classList.add("player-controls-icon-tooltip-decoration");a.Yb.classList.add("player-controls-icon-tooltip-decoration")}
function vE(a,b){a.sk=b;"light"===a.sk?(a.Nb.style.backgroundColor="white",a.Nb.style.color="rgb(73, 73, 79)",a.Xb.style.borderRightColor="white",a.Xb.style.borderTopColor="white",a.Yb.style.borderLeftColor="white",a.Yb.style.borderTopColor="white"):(a.Nb.style.backgroundColor="black",a.Nb.style.color="white",a.Xb.style.borderRightColor="black",a.Xb.style.borderTopColor="black",a.Yb.style.borderLeftColor="black",a.Yb.style.borderTopColor="black")}function wE(a,b){b?a.enable():a.disable()}
qE.prototype.enable=function(){this.element.style.display="inline-block"};qE.prototype.disable=function(){this.element.style.display="none"};function xE(a,b){a.image.src=null!==b&&void 0!==b?b:""}function yE(a,b){a.element.id=null!==b&&void 0!==b?b:""}function zE(a){qE.call(this,a);this.ck.style.whiteSpace="nowrap";this.ck.style.fontSize="14px";this.ck.style.lineHeight="16px";this.ck.classList.add("player-controls-icon-text");AE(this,null===a||void 0===a?void 0:a.Id)}r(zE,qE);zE.prototype.Xr=function(){qE.prototype.Xr.call(this);this.ck=document.createElement("span")};zE.prototype.xr=function(){qE.prototype.xr.call(this);this.Nb.appendChild(this.ck)};function AE(a,b){a.Id=b;void 0===a.Id?(a.ck.innerText="",a.Nb.style.display="none",a.Xb.style.display="none",a.Yb.style.display="none"):(a.ck.innerText=a.Id,a.Nb.style.display="",a.Xb.style.display="",a.Yb.style.display="")}function BE(a){zE.call(this,Object.assign(Object.assign({},a),{st:!1}))}r(BE,zE);function CE(a){zE.call(this,Object.assign(Object.assign({},a),{st:!0}))}r(CE,zE);function DE(a){CE.call(this,a);var b=this;this.xc=new F("videoOfflineChange");this.Pv=new Ub;AE(this,uh);xE(this,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg");a=new F("requestChangeClickListener");var c=new F("showMyCamStateChanged");a.j(function(d){Vb(b.Pv);E(b.xf.j(function(){d()}),b.Pv)});c.j(function(d){switch(d){case "started":AE(b,vh);xE(b,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_active.svg");break;case "inactiveStopped":AE(b,uh);xE(b,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg");break;case "stopped":AE(b,uh),xE(b,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/c2c_inactive.svg")}});this.iw=pw(this.xc,a,c);wE(this,this.iw)}r(DE,CE);DE.prototype.enable=function(){this.iw?CE.prototype.enable.call(this):CE.prototype.disable.call(this)};DE.prototype.Tu=function(a){this.xc.h(a)};function EE(a){BE.call(this,a);var b=this;this.Ty=new F("notifyMouseEnter");this.Uy=new F("notifyMouseExit");this.element.onmouseenter=function(){b.Ty.h(void 0)};this.element.onmouseleave=function(c){b.Uy.h(c)}}r(EE,BE);function FE(a,b){G.call(this);var c=this;this.Sh=new F("forceHlsPlayerEvent");this.ml=new F("setPlayerComponentMutedEvents");this.Su=new F("setPlayerComponentVolumeMutedEvents");this.eq=new F("playerComponentEnterFullScreenModeEvent");this.fq=new F("playerComponentReadjustForceHlsOverlayOrderEvent");this.gq=new F("playerComponentReadjustPlayButtonContainerEvent");this.Cq=new F("showJpegPlayerComponentImage");this.oi=new F("requestVideoQualityButtonVisibilityChange");this.state={volume:60,T:!0};this.rh=this.Pc=this.nm=this.om=this.visible=this.xm=this.Jd=this.le=this.Sa=!1;this.Cv(a);a=wb().disable_sound;void 0!==a&&"true"===a.toLowerCase()||"1"===a?(this.state.volume=0,this.state.T=!0):t()&&(a=window.localStorage.getItem("videoControls"),null!==a?(a=JSON.parse(a),this.state={volume:a.volume,T:this.Gj?a.isMuted:!0}):this.state.T=!this.Gj);Nb=this.state.T?0:this.state.volume;this.Nl=window.navigator.userAgent;this.element.style.overflow="";this.element.style.bottom="0";this.element.style.left="0";this.element.style.height="50px";this.element.style.background="linear-gradient(180deg, rgba(50, 50, 50, 0) 0%, rgba(50, 50, 50, 0.4) 66%, rgba(50, 50, 50, 0.7) 100%)";this.Wd=document.createElement("div");this.Wd.style.position="absolute";this.Wd.style.right="0";this.Wd.style.bottom="0";this.Wd.style.paddingRight="8px";this.Wd.style.paddingBottom="12px";this.Cg=document.createElement("div");this.Cg.style.position="absolute";this.Cg.style.left="0";this.Cg.style.bottom="0";this.Cg.style.paddingLeft="8px";this.Cg.style.paddingBottom="12px";this.ms();this.ns();this.ls(b);this.bs();this.Fd=new DE({Id:uh});this.fs();this.Sr();this.js();this.$r();this.hs();this.Vr();this.J(this.Ea,this.Cg);this.J(this.Ta,this.Cg);this.J(this.Ba,this.Cg);this.J(this.qd,this.Wd);this.J(this.Fd,this.Wd);this.J(this.X,this.Wd);this.J(this.Kc,this.Wd);this.J(this.ud,this.Wd);this.J(this.pe,this.Wd);this.J(this.Lb,this.Wd);this.J(this.ua,this.Wd);this.element.appendChild(this.Cg);this.element.appendChild(this.Wd);K.j(function(d){var e,f;void 0===d.C.Sa?u("Dossier is missing context."):(d.C.Sa?(c.rh=!0===d.C.ae,c.bg(d.A.status),d.A.event.kc.j(function(g){var h;c.Bv(g.Ra);c.bg(g.Ra);"privatespying"===g.Ra&&Bj.h(void 0);c.Bn(g.Ra);null===(h=c.eb)||void 0===h?void 0:Jk(h)}),d.A.event.zi.j(function(g){c.rh=g.ae&&!0===d.C.Sa;c.bg(d.A.status)})):(c.rh=!1,c.bg(d.A.status)),null===(e=c.eb)||void 0===e?void 0:e.show(),mb()&&!kb()&&!$a()&&vo&&void 0===c.eb&&(c.eb=Pk(c.Fd.element,{width:250,content:mj,wm:!1,de:0,Df:"135px",wg:function(){return 0},Sg:function(){return 15},Bq:["fullvideo","fullscreen","theater"]},null!==(f=c.Oa.parentElement)&&void 0!==f?f:void 0),c.rc&&void 0!==c.eb&&(c.eb.element.style.zIndex="100"),c.Fd.xf.j(function(){var g;null===(g=c.eb)||void 0===g?void 0:Mk(g)})),c.Mc=d,c.Fj&&!c.nm&&(c.nm=!0,c.Ur(),c.Bn(d.C.Ab)),c.Sa=d.C.Sa,c.qt="offline"===d.C.Ab,c.ze(),c.rc||GE(c),c.Rg(),c.Yc())});bk.vf.j(function(d){var e,f;"theater"===O()?c.Jd=!0:"split"===O()&&(c.Jd=!1);"fullscreen"===d.Jo?null===(e=c.eb)||void 0===e?void 0:Nk(e,1):null===(f=c.eb)||void 0===f?void 0:Nk(f,0);c.Rg()});Bk.j(function(d){c.visible&&d||c.Yc()});gq.j(function(){c.ii()});Jq.j(function(){oc()&&HE(c)});Ev.j(function(){c.Cd()},!1);v(mc(),document,function(){var d=O();"theater"===d?c.Jd=!0:"split"===d&&(c.Jd=!1);oc()&&lc()===c.Ns?ak("fullscreen"):oc()||ak(c.Jd?"theater":"split")});this.element.onmousemove=function(){c.Yc()};v("click",this.element,function(d){d.stopPropagation()});this.D()}r(FE,G);k=FE.prototype;k.Cv=function(a){this.Oa=a.element;this.Gj=a.O.Kn;a.O instanceof iB?(this.rc=!0,this.Fj=a.O.rj):this.Fj=this.rc=!1;this.Ig=a.O.Ai;this.iu=a.ci};k.ls=function(a){function b(d){d=d.target;c.Ba.element.contains(d)||a.element.contains(d)||(c.oi.h(!1),x("touchend",document,b))}var c=this;this.Ba=new EE({});xE(this.Ba,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/quality-gear-sd.svg");AE(this.Ba,void 0);this.Ba.disable();this.Ba.Ty.j(function(){c.oi.h(!0);v("touchend",document,b)});this.Ba.Uy.j(function(d){null!==d.relatedTarget&&(d=d.relatedTarget.parentNode,null===d||d.isEqualNode(a.element)||c.oi.h(!1))})};k.ns=function(){function a(c){c!==b.state.volume&&(b.state.volume=c,b.state.T=0===b.state.volume,IE(b),b.ze(),b.Ib())}var b=this;this.Ta=new pq({Ob:15,sf:50,Ih:1});this.Ta.element.style.display="inline-block";this.Ta.element.style.marginBottom="7px";this.Ta.element.style.verticalAlign="bottom";this.Ta.Zn.j(function(c){b.Pc&&void 0!==b.Mc&&(b.Cd(!1),C("ForceHLS"),b.Sh.h({gl:b.Mc}),b.ye(),Hq.h(void 0));b.ml.h(!1);a(c)});this.Ta.$n.j(a);this.Ta.Yn.j(function(c){a(c);0===b.state.volume&&b.ml.h(!0);C("ChangeVolume",{volume:c});b.Ib()})};k.ms=function(){var a=this;this.Ea=new BE({Id:ej});xE(this.Ea,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-off.svg");this.Ea.xf.j(function(){!a.rc||-1<a.Nl.indexOf("MSIE 10.0")||-1<a.Nl.indexOf("MSIE 9.0")?(C("ToggleMute",{newState:!a.state.T}),C("ChangeVolume",{volume:a.state.volume}),a.state.T?a.ye():a.ii(),a.Yc()):void 0===a.Mc?u("unexpected switch to hls",{},"VIDEO_"):(a.Pc&&a.Cd(!1),C("ForceHLS"),a.Sh.h({gl:a.Mc}),a.ye(),Hq.h(void 0))})};k.bs=function(){this.qd=new CE({Id:Nd});xE(this.qd,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/private_show.svg");this.qd.xf.j(function(){Bj.h(void 0)})};k.fs=function(){this.X=new CE({Id:td+" (ctrl+s)",hm:"send-tip"});xE(this.X,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/tip-new.svg");this.X.xf.j(function(){yj.h({})})};k.Sr=function(){this.Kc=new CE({Id:dj,hm:"chat-btn"});this.Kc.disable();xE(this.Kc,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/chat-closed.svg");this.Kc.xf.j(function(){Cj.h(void 0)})};k.js=function(){this.ud=new CE({Id:ze,hm:"user-list"});xE(this.ud,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/users.svg");this.ud.xf.j(function(){xj.h(void 0)})};k.$r=function(){this.pe=new CE({Id:Ee,hm:"more-rooms"});xE(this.pe,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/users-search.svg");this.pe.xf.j(function(){fq.h(void 0)})};k.hs=function(){var a=this;this.Jd=!1;this.Lb=new CE({Id:Mf});xE(this.Lb,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-theater.svg");this.Lb.xf.j(function(){var b="split";"split"===O()&&(b="theater");C("ChangeVideoMode",{videoMode:b});ak(b);ck();a.Rg()})};k.Vr=function(){var a=this;this.le=kc();document[nc()]=function(){oc()||(a.le=!1,a.ua.disable(),J("Full screen is unavailable."))};this.ua=new CE({Id:Nf,hm:"full-screen"});xE(this.ua,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-expand.svg");kc()||this.ua.disable();this.ua.xf.j(function(){a.xl()})};k.bg=function(a){var b=["privaterequesting","privatespying","privatewatching"];if(!this.rh&&-1===b.indexOf(a)||!this.Ig)this.qd.disable();else{switch(a){case "unknown":case "offline":case "notconnected":case "away":case "hidden":case "passwordprotected":case "privatenotwatching":this.qd.disable();break;default:wE(this.qd,!this.rc||"split"!==O())}this.Z()}};k.Rg=function(){wE(this.X,this.Sa);this.pe.disable();this.ud.enable();AE(this.Lb,Mf);xE(this.Lb,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-theater.svg");this.Lb.enable();AE(this.ua,Nf);xE(this.ua,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-expand.svg");this.Kc.enable();this.Fd.enable();void 0!==this.Mc&&this.bg(this.Mc.A.status);this.le&&this.ua.enable();switch(O()){case "split":this.X.disable();this.ud.disable();this.Kc.disable();this.qd.disable();this.Fd.disable();this.Lb.disable();this.rc?this.ua.enable():this.ua.disable();break;case "videoonly":this.X.disable();this.ud.disable();this.Kc.disable();this.qd.disable();this.Fd.disable();this.Lb.disable();this.ua.disable();break;case "theater":AE(this.Lb,Pf);xE(this.Lb,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/mode-split.svg");yE(this.Lb,"default-view");this.pe.enable();break;case "fullscreen":this.pe.enable();this.Lb.disable();AE(this.ua,Of+
" (esc)");xE(this.ua,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/fullscreen-shrink.svg");break;default:u("Unexpected VideoMode: "+O(),{},"VIDEO_")}this.qt&&(this.X.disable(),this.ud.disable(),this.Kc.disable());this.Yc()};k.ze=function(){var a=this.Ta.Le();0===a||this.state.T?(xE(this.Ea,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-off.svg"),yE(this.Ea,"volume-mute"),AE(this.Ea,ej)):(50>a?(xE(this.Ea,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-low.svg"),yE(this.Ea,"volume-medium")):(xE(this.Ea,"https://static-assets.highwebmedia.com/tsdefaultassets/video-controls/light/volume-control-full.svg"),yE(this.Ea,"volume-high")),AE(this.Ea,gh))};function IE(a){a.Su.h(Object.assign({},a.state))}k.Ib=function(){t()&&!this.iu&&window.localStorage.setItem("videoControls",JSON.stringify({volume:this.state.volume,isMuted:this.state.T}));Nb=this.state.T?0:this.state.volume};k.update=function(){GE(this);this.Ib()};function GE(a){sq(a.Ta,a.state.T?0:a.state.volume);IE(a);a.ze()}k.ii=function(){this.gg(!0);this.update()};k.ye=function(){this.gg(!1);0===this.state.volume&&(this.state.volume=60);this.update()};k.toggle=function(){this.visible?this.Lf():this.Yc()};k.Yc=function(){var a=this,b;null===(b=this.eb)||void 0===b?void 0:b.show();this.visible=!0;if(this.rc||"split"!==O())xp(this.element,"100ms"),this.element.style.opacity="1",void 0!==this.ki&&(clearTimeout(this.ki),this.ki=void 0),this.ki=window.setTimeout(function(){a.ki=void 0;a.Lf()},this.xm?2E3:5E3)};k.Lf=function(){var a;this.Pc||(this.visible=!1,this.xm=!0,xp(this.element,"500ms"),null===(a=this.eb)||void 0===a?void 0:a.D(),this.element.style.opacity="0")};k.show=function(){this.element.style.visibility="";this.Yc();this.element.style.zIndex=this.Pc?"100":"3"};k.D=function(){this.element.style.visibility="hidden"};k.Ii=function(a){this.state.volume=a;sq(this.Ta,this.state.T?0:this.state.volume);this.ze()};k.gg=function(a){this.state.T=a;sq(this.Ta,this.state.T?0:this.state.volume);this.ze()};k.Av=function(a){this.Ii(a);this.Ib()};k.zv=function(a){this.gg(a);this.Ib()};k.ac=function(){return 0};k.tp=function(){return!1};k.xl=function(){this.Pc&&this.Cd();oc()?jc():this.le&&(this.Jd="theater"===O(),this.eq.h(void 0));this.Rg()};function HE(a){"fullscreen"===O()?jc():ic(a.Ns)}
k.Bv=function(a){switch(a){case "unknown":case "offline":case "notconnected":case "away":case "privatenotwatching":case "hidden":case "passwordprotected":if("fullscreen"===O()){wE(this.ua,this.le);break}oc()&&jc();this.ua.disable();break;case "public":case "privatespying":case "privatewatching":case "privaterequesting":wE(this.ua,this.le);break;default:u("unexpected room status",a,"")}};k.Cd=function(a){a=void 0===a?!0:a;this.Pc&&void 0!==this.Mc&&(void 0!==this.Ja&&null!==this.Ja.parentElement&&(this.Ja.parentElement.removeChild(this.Ja),this.Ja=void 0),void 0!==this.pa&&null!==this.pa.parentElement&&(this.pa.parentElement.removeChild(this.pa),this.pa=void 0),this.Pc=!1,this.Lf(),this.D(),this.Ba.disable(),!this.om&&a&&(this.om=!0,C("ForceHLS"),this.Sh.h({gl:this.Mc,ye:!1}),Hq.h(void 0)),this.element.style.zIndex="3")};k.Wr=function(){var a=this;this.Ja=document.createElement("div");this.Ja.style.width="100%";this.Ja.style.height="100%";this.Ja.style.position="absolute";this.Ja.style.top="0";this.Ja.style.left="0";this.Ja.style.cursor="pointer";v("click",this.Ja,function(){a.Cd()});v("click",this.element,function(){a.Cd()});this.fq.h(this.Ja)};k.Bn=function(a){void 0!==this.pa&&void 0!==this.Ja&&("public"===a?(this.pa.style.display="",this.Ja.style.display=""):(this.pa.style.display="none",this.Ja.style.display="none"));this.Z()};k.Ur=function(){var a=this;if(this.rc){this.Pc=!0;this.pa=document.createElement("div");var b=this.Oa.getBoundingClientRect(),c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/play-inactive.svg";c.style.width="60px";c.style.height="60px";c.style.position="relative";c.style.top="40px";c.style.left="45px";c.style.cursor="pointer";v("click",c,function(){a.Cd()});this.pa.style.position="absolute";this.pa.style.top=b.height/2-70+"px";this.pa.style.left=b.width/2-70+"px";this.pa.style.cursor="pointer";this.pa.style.width="140px";this.pa.style.height="140px";this.pa.style.borderRadius="50%";this.pa.style.backgroundColor="rgba(0,0,0,0.25)";this.pa.appendChild(c);this.gq.h(this.pa);this.Cq.h(void 0);this.Wr();this.G()}};k.G=function(){if(void 0!==this.pa){var a=this.Oa.getBoundingClientRect();this.pa.style.top=a.height/2-70+"px";this.pa.style.left=a.width/2-70+"px"}};k.Vy=function(a){this.Gj=a};k.Wy=function(a){this.Ig=a};k.Vt=function(a){this.rc=a};k.Ut=function(a){this.Fj=a};k.Xy=function(a){this.Fd.Tu(a)};k.yj=function(){};k.hA=function(a){wE(this.Ba,a)};k.gA=function(a){this.Ba.element.style.paddingTop=(a?14:0)+"px"};k.Dx=function(){return this.Cg.offsetLeft+this.Ba.element.offsetLeft};var JE,nF=[];function oF(a){a=a.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g);return null!==a?a:[]}function pF(a){a=a.match(/<img/g);return null!==a&&1===a.length}function qF(a){for(var b=0;b<nF.length;b+=1)nF[b].name===a.name&&nF.splice(b,1);16===nF.length&&nF.pop();nF.unshift(a);a=nF.map(function(c){return JSON.stringify({value:c.value,name:c.name})}).join("|");window.localStorage.setItem("emojiRecents",a);return nF}
function rF(){return new Promise(function(a){var b=window.localStorage.getItem("emojiRecents");null!==b?a(b.split("|").map(function(c){c=JSON.parse(c);return{value:c.value,name:c.name}})):a([])})}function sF(){var a=rF(),b=y("api/ts/emoticons/search_emojis/");JE=Promise.all([a,b]).then(function(c){var d=q(c);c=d.next().value;d=d.next().value;nF=c;return[nF,new P(d.responseText)]})}
function tF(a){void 0===JE&&sF();return void 0!==JE?JE.then(function(b){var c=q(b);b=c.next().value;c=c.next().value;return"recent"===a?b:"smileys-people"===a?(b=R(c,"smileys-emotion"),c=R(c,"people-body"),uF(b.concat(c))):uF(R(c,a))}):Promise.reject()}
function vF(a){return y("api/ts/emoticons/search_emojis/?keywords="+encodeURIComponent(a)).then(function(b){b=new P(b.responseText);var c=[R(b,"smileys-emotion"),R(b,"people-body"),R(b,"animals-nature"),R(b,"food-drink"),R(b,"activities"),R(b,"travel-places"),R(b,"objects"),R(b,"symbols"),R(b,"flags")];b=[];c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,void 0!==d&&b.push(uF(d));return b.reduce(function(e,f){return e.concat(f)})}).catch(function(){return[]})}
function uF(a){return a.map(function(b){return{value:b.character,name:b.name}})};var wF={jG:17,shift:16,alt:18,BH:91,YI:93,$F:20,AJ:9},xF={left:37,yv:38,right:39,xs:40};function yF(a){if(void 0===a||13===a||27===a)return!1;for(var b in xF)if(a===xF[b])return!1;for(var c in wF)if(a===wF[c])return!1;return!0};var zF=new F("focusingInputFromKeypress");function AF(a,b){G.call(this);var c=this;this.RE=a;this.maxLength=b;this.tc={Wf:-1,Tm:-1};this.MD="";this.Lj=-1;this.xe=[{ey:"",fy:[],tc:this.tc}];this.Ch=0;this.Io=new Set;this.ws=!1;this.kA=OA();this.Bs=this.dE=!1;this.maxLength=b;this.element.classList.add("customInput");this.element.classList.add("noScrollbar");this.element.style.position="relative";this.element.style.outline="none";this.element.style.border="none";this.element.style.boxSizing="border-box";this.element.style.fontSize="12px";this.element.style.whiteSpace="nowrap";this.element.style.overflowY="hidden";this.element.style.overflowX="scroll";this.element.contentEditable="true";yp(this.element,"text");var d=new xk(function(){BF(c)},{yd:10,ce:0}),e=new xk(function(){CF(c)},{yd:10,ce:0}),f=new xk(function(){DF(c)},{yd:10,ce:1});Do.j(function(){c.kA=!1});var g=!1;v("input",this.element,function(h){g||c.dE||(g=!0,"historyUndo"===h.inputType?yk(d):"historyRedo"===h.inputType?yk(e):(yk(f),EF(c,!0)),FF(c),g=!1)});ib()&&window.setInterval(function(){document.activeElement===c.element&&DF(c)},200);v("paste",this.element,function(h){h.preventDefault();null!==h.clipboardData&&(h=null!==window.clipboardData&&void 0!==window.clipboardData?window.clipboardData.getData("Text"):h.clipboardData.getData("text/plain"),GF(c,h))});v("click",this.element,function(h){if(null!==h.target&&h.target!==c.element){var m=window.getSelection();if(null!==m){var n=document.createRange(),p=h.target;h.offsetX<p.offsetWidth/2?n.setStartBefore(p):n.setStartAfter(p);n.collapse(!0);m.removeAllRanges();m.addRange(n)}}FF(c)});v("keydown",this.element,function(h){if("Enter"===h.key)h.preventDefault(),c.kA||c.submit();else if(HF(c,h))h.preventDefault();else if(h.ctrlKey||h.metaKey){if(-1!==["u","b","i"].indexOf(h.key))h.preventDefault();else if("z"===h.key&&!h.shiftKey)BF(c),h.preventDefault();else if("z"===h.key&&h.shiftKey||"y"===h.key)CF(c),h.preventDefault();c.Io.add(h.key)}});v("keyup",this.element,function(h){ib()&&yF(h.which)&&(!c.Io.has(h.key)||h.repeat)?IF(c):-1===["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].indexOf(h.key)&&-1===["MetaLeft","MetaRight"].indexOf(h.code)||FF(c);c.Io.delete(h.key)});v("focus",this.element,function(){c.Bs=!0;void 0!==c.placeholder&&(c.placeholder.style.display="none",c.placeholder.textContent="")});v("blur",this.element,function(){c.Bs=!1;void 0!==c.placeholder&&""===JF(c)&&(c.placeholder.style.display="",c.placeholder.textContent=c.MD);c.Io.clear()});zF.j(function(h){HF(c,h)&&h.preventDefault()})}r(AF,G);function KF(a,b){a.ws=!0;LF(a);GF(a,b);a.element.scrollLeft=a.element.scrollWidth;a.ws=!1}
function GF(a,b,c){if(""!==b&&((void 0===c?0:c)&&MF(a),a.focus(!0),NF(a),OF(a)&&(c=window.getSelection(),null!==c&&0<c.rangeCount&&c.getRangeAt(0).deleteContents()),b=b.replace(/\r?\n|\r/g," "),b=b.replace(/ /g,"\u00a0"),b=PF(b,QF(a)),""!==b)){var d=document.createElement("div");d.textContent=b;var e={unselectable:"on"};twemoji.parse(d,{attributes:function(){return e}});b=window.getSelection();if(null!==b&&0<b.rangeCount){c=b.getRangeAt(0);var f=[].concat(fa(d.childNodes)).reverse();d=f[0];f=q(f);for(var g=f.next();!g.done;g=f.next())c.insertNode(g.value);c.setStartAfter(d);c.collapse(!0);b.removeAllRanges();b.addRange(c)}IF(a);RF(a)}}function LF(a){if(""!==JF(a)){NF(a);var b=window.getSelection();if(null!==b){var c=document.createRange();c.selectNodeContents(a.element);b.removeAllRanges();b.addRange(c);c.deleteContents();c.collapse(!0)}IF(a)}}
function JF(a){var b="",c=!1;a=q(a.element.childNodes);for(var d=a.next();!d.done;d=a.next())d=d.value,d instanceof HTMLImageElement?(b+=d.alt,c=!0):null!==d.textContent&&(!c||":"!==d.textContent[0]&&"@"!==d.textContent[0]||(b+=" "),b+=d.textContent,c=!1);return b.replace(/\s/g," ")}function QF(a){return a.maxLength-JF(a).length}
function MF(a){var b=window.getSelection();if(null!==b){var c=document.createRange();c.selectNodeContents(a.element);c.collapse(!1);b.removeAllRanges();b.addRange(c);FF(a)}}function SF(a,b){document.activeElement!==a.element&&TF(a);a=UF(a);var c=window.getSelection();null!==c&&(a.textContent=b,b=document.createRange(),b.selectNodeContents(a),b.collapse(!1),c.removeAllRanges(),c.addRange(b))}function VF(a){a=UF(a);return null!==a.textContent?a.textContent.replace(/\s/g," "):""}
function WF(a,b){var c=UF(a),d=window.getSelection();if(null!==d&&0<d.rangeCount){var e=document.createRange();e.selectNodeContents(c);e.setStart(c,b);RF(a);d.removeAllRanges();d.addRange(e)}}function XF(a){var b=window.getSelection();null!==b&&0<b.rangeCount&&(b=b.getRangeAt(0),b.startContainer!==a.element&&a.element.contains(b.startContainer)&&(EF(a,!1),b.deleteContents(),IF(a)))}
AF.prototype.focus=function(a){a=void 0===a?!1:a;document.activeElement!==this.element&&document.body.contains(this.element)&&(this.element.focus(),a?TF(this):MF(this),RF(this))};AF.prototype.blur=function(){this.element.blur()};AF.prototype.submit=function(){var a=this.element.innerHTML,b=/<img[^>]+alt="?([^"\s]+)"?\s*/g;this.RE();LF(this);for(var c=b.exec(a);null!==c;)C("emojiSent",{value:c[1]}),c=b.exec(a)};function DF(a){var b=window.getSelection();if(null!==b&&0<b.rangeCount){var c=UF(a);if(null!==c.textContent&&twemoji.test(c.textContent)){var d=c.textContent,e=document.createRange();e.selectNodeContents(c);b.removeAllRanges();b.addRange(e);e.deleteContents();GF(a,d);c=UF(a);""!==c.textContent&&(e.setStartBefore(c),e.collapse(!0),b.removeAllRanges(),b.addRange(e),FF(a))}}}
function OF(a){var b=window.getSelection();return null!==b&&0<b.rangeCount&&document.activeElement===a.element&&(a=b.getRangeAt(0),a.startContainer!==a.endContainer||a.startOffset!==a.endOffset)?!0:!1}function HF(a,b){return 0<QF(a)?!1:!b.ctrlKey&&!b.metaKey&&yF(b.which)&&-1===["Backspace","Delete"].indexOf(b.key)&&!OF(a)}function IF(a){FF(a);EF(a,!0)}function EF(a,b){window.clearTimeout(a.Lj);a.Lj=-1;a.ws||(b?a.Lj=window.setTimeout(function(){YF(a);a.Lj=-1},300):YF(a))}
function NF(a){-1!==a.Lj&&(window.clearTimeout(a.Lj),a.Lj=-1,YF(a))}function YF(a){FF(a);var b=JF(a);a.xe.splice(a.Ch+1,a.xe.length);a.xe[a.xe.length-1].ey===b&&a.xe.pop();var c=[].concat(fa(a.element.childNodes)).map(function(d){return d.cloneNode(!0)});a.xe.push({ey:b,fy:c,tc:a.tc});20<a.xe.length&&a.xe.shift();a.Ch=a.xe.length-1;ZF(a)}function BF(a){a.Ch===a.xe.length-1&&EF(a,!1);0<a.Ch&&(a.Ch--,$F(a,a.xe[a.Ch]),ZF(a))}function CF(a){a.Ch<a.xe.length-1&&(a.Ch++,$F(a,a.xe[a.Ch]),ZF(a))}
function $F(a,b){a.element.innerHTML="";b.fy.forEach(function(c){a.element.append(c.cloneNode())});a.tc=b.tc;TF(a);RF(a)}function ZF(a){if(a.Bs&&document.queryCommandSupported("insertText")){a=function(){document.execCommand("insertText",!1,"~");document.execCommand("delete",!1)};var b=window.getSelection();if(null!==b&&0<b.rangeCount){var c=b.getRangeAt(0);b.removeAllRanges();a();b.addRange(c)}else a()}}
function UF(a){FF(a);return 0===a.element.childNodes.length?a.element:-1===a.tc.Wf?a.element.childNodes[0]:a.element.childNodes[a.tc.Wf]}function aG(a){return bG(a,!0).getBoundingClientRect().left-a.element.getBoundingClientRect().left}function cG(a){var b=VF(a).length;return 0<b&&a.tc.Tm!==b?!1:![].concat(fa(a.element.childNodes)).slice(a.tc.Wf+1).some(function(c){var d,e;return"IMG"===c.nodeName||0<(null!==(e=null===(d=c.textContent)||void 0===d?void 0:d.length)&&void 0!==e?e:0)})}
function bG(a,b){b=void 0===b?!1:b;var c=document.createRange();if(0===a.element.childNodes.length)return c.setStart(a.element,0),c;var d=a.element.childNodes[a.tc.Wf];-1===a.tc.Wf?c.setStartBefore(a.element.childNodes[0]):""===d.textContent?c.setStartAfter(d):c.setStart(d,a.tc.Tm);if(b){var e,f;a=c.startContainer;if(0!==(null!==(f=null===(e=null===a||void 0===a?void 0:a.textContent)||void 0===e?void 0:e.length)&&void 0!==f?f:0))if(null!==window.getSelection())for(;0<c.startOffset;){if(/^\s/.test(c.toString())){c.setStart(a,c.startOffset+1);break}c.setStart(a,c.startOffset-1)}else c=document.createRange()}return c}
function FF(a){var b=window.getSelection();if(null!==b&&0<b.rangeCount&&document.activeElement===a.element){b=b.getRangeAt(0).cloneRange();b.collapse(!1);var c=b.startContainer===a.element?b.startOffset-1:Array.from(a.element.childNodes).indexOf(b.startContainer);if(-1===c)a.tc={Wf:-1,Tm:-1};else if(""===a.element.childNodes[c].textContent)a.tc={Wf:c,Tm:-1};else{var d=a.element.childNodes[c].textContent;a.tc={Wf:c,Tm:b.startContainer===a.element?d.length:b.startOffset}}}}
function TF(a){if(!(0===a.element.childNodes.length||a.tc.Wf>=a.element.childNodes.length)){var b=window.getSelection();null!==b&&(a=bG(a),a.collapse(!0),b.removeAllRanges(),b.addRange(a))}}function RF(a){var b=0;if(-1!==a.tc.Wf){b=a.element.childNodes[a.tc.Wf];var c=document.createRange();c.setStart(a.element,0);c.setEndAfter(b);b=c.getBoundingClientRect().width}a.element.scrollLeft=Math.max(a.element.scrollLeft,b+3-a.element.offsetWidth)}
function PF(a,b){if(a.length<=b)return a;for(var c=-1,d=0,e=q(a),f=e.next();!f.done;f=e.next()){f=f.value;if(d+f.length>b)break;twemoji.test(f)&&(c=d);d+=f.length}if(-1!==c){a:{var g=a.substr(c,a.length);if(twemoji.test(g)){e=-1;var h=f="",m=0;g=q(oF(g));for(var n=g.next();!n.done;n=g.next())n=n.value,-1===e&&twemoji.test(n)?(e=m,h=f=n):-1!==e&&(h=""+h+n,twemoji.test(n)&&pF(twemoji.parse(h))&&(f=h)),m+=n.length;if(-1!==e){e={OG:e,kC:f};break a}}e=void 0}if(void 0!==e&&c+e.kC.length>b)return a.substr(0,c)}return a.substr(0,d)};function dG(a){var b=gb();void 0!==b&&9>=b||(a.style["-webkit-overflow-scrolling"]="touch");a.style.overflowY="scroll";v("touchstart",a,function(c){1<c.touches.length?c.preventDefault():0===a.scrollTop&&(a.scrollTop=1)});v("touchmove",a,function(c){c.stopPropagation();a.scrollHeight<=a.clientHeight&&c.preventDefault()});v("scroll",a,function(){0===a.scrollTop?a.scrollTop=1:a.scrollTop===a.scrollHeight-a.offsetHeight&&(a.scrollTop=a.scrollHeight-a.offsetHeight-1)})};new F("MobileVideoControls:tap");new F("MobilePureChat:tap");new F("MobilePureChat:drag");new F("MobilePureChat:dragEnd");new F("MobileFullscreenSendChat");new F("MobilePlayer:Resize");new F("MobilePlayer:changeSize");new F("mobilePMChatLinkFullscreenToggle");new F("mobilePureChatChange");var eG=[40,37,39,38,13,27,32,9];function fG(a){L.call(this);var b=this;this.config=a;this.Sb.j(function(){void 0!==b.selectedIndex&&GF(b.config.va," ",!0);b.D()});v("keyup",this.config.va.element,function(c){b.Ix(c)});v("keydown",this.config.va.element,function(c){if(b.visible){13===c.keyCode&&b.D();38===c.keyCode&&(c.preventDefault(),b.wq(!0));40===c.keyCode&&(c.preventDefault(),b.wq(!1));if(9===c.keyCode||39===c.keyCode||32===c.keyCode)c.preventDefault(),b.D(),GF(b.config.va," ",!0),MF(b.config.va);if(27===c.keyCode||37===c.keyCode)c.preventDefault(),b.D(),XF(b.config.va)}})}r(fG,L);k=fG.prototype;k.Ix=function(a){this.Zo(a)};k.initData=function(){L.prototype.initData.call(this);this.list=document.createElement("div");this.EA="";this.cache=new Map;this.visible=!1;this.delay=0;this.I=new Ub};k.qa=function(){L.prototype.qa.call(this);H(this.element,"emoticonAutocompleteModal");this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.height="auto";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderBottom="none";this.element.style.fontFamily="Helvetica, Arial, sans-serif";this.element.style.cursor="pointer";this.list.style.width="260px";this.list.style.maxHeight="180px";this.list.style.overflowY="scroll";this.element.appendChild(this.list)};k.tb=function(){Vb(this.I)};k.G=function(){var a=aG(this.config.va)+this.config.Im;this.element.style.left=Math.min(a,this.config.va.element.clientWidth-this.config.ln)+"px"};k.Zo=function(a){var b=this;if(0<=this.delay&&-1===eG.indexOf(a.keyCode)){var c=VF(this.config.va).match(this.Ez);null!==c?(this.prefix=c[2],a=this.cache.get(this.prefix),void 0!==a?(this.items=a,this.Dh(c[1])):(clearTimeout(this.eC),this.eC=window.setTimeout(function(){b.getData().then(function(d){b.items=gG(b,d.responseText);b.cache.set(b.prefix,b.items);b.Dh(c[1])}).catch(function(d){u("Error autocomplete modal: "+d)})},100))):this.D()}};k.Dh=function(a){this.ng();this.element.style.display=0===this.items.length?"none":"block";for(var b=0;b<this.items.length;b+=1)hG(this,this.items[b],b);b=0>=this.list.children.length?0:this.list.children.item(this.list.children.length-1).offsetTop;this.list.scrollTop=b;this.EA=a;this.visible||this.show()};k.ng=function(){for(;null!==this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.selectedIndex=void 0};k.wq=function(a){this.Tl();a=void 0===this.selectedIndex?a?this.items.length-1:0:this.selectedIndex+(a?-1:1);0>a?a=this.items.length-1:a>=this.items.length&&(a=0);iG(this,a,!0)};k.Zh=function(a){void 0!==this.selectedIndex&&0<this.items.length&&(this.Tl(),H(this.items[this.selectedIndex].element,"selectedEmoticon"),a&&(this.list.scrollTop=this.selectedIndex*this.list.firstChild.clientHeight-this.list.clientHeight/2),a=VF(this.config.va).replace(new RegExp(this.PD+"$"),this.items[this.selectedIndex].Hc),SF(this.config.va,a),WF(this.config.va,this.EA.length+1))};k.show=function(){var a=this;0<=this.delay&&window.setTimeout(function(){null!==VF(a.config.va).match(a.Ez)&&(a.element.style.visibility="visible",0===tk(a.element.style.width)&&(a.element.style.width="auto"),a.element.style.height="auto",a.cf(),a.Z(),a.visible=!0)},this.delay)};k.D=function(){this.kb();this.element.style.visibility="hidden";this.element.style.width="0";this.element.style.height="0";this.visible=!1;this.ng()};k.Tl=function(){for(var a=q(this.items),b=a.next();!b.done;b=a.next())I(b.value.element,"selectedEmoticon")};k.getData=function(){var a=this,b=new XMLHttpRequest;return new Promise(function(c,d){b.onload=function(){Fb(b.status)?c(b):d(new Eb(b))};b.onerror=function(){d(new Eb(b))};b.open("GET","https://emote.highwebmedia.com/autocomplete?slug="+a.prefix+"&_="+Date.now());b.withCredentials=!1;b.timeout=6E4;b.send()})};function hG(a,b,c){var d=document.createElement("div");d.innerText=b.Hc;d.style.padding="2px 8px";a.lA(b)&&(d.style.display="none");d.onclick=function(e){iG(a,c,!1);e.preventDefault()};a.list.appendChild(d);b.element=d}function iG(a,b,c){a.PD=void 0===a.selectedIndex?a.prefix:a.items[a.selectedIndex].Hc;a.selectedIndex=b;a.Zh(c);a.config.va.focus()}k.lA=function(){return!1};k.isVisible=function(){return this.visible};var jG,kG=new F("videoModeChanged",{Rd:100});bk.vf.j(function(){kG.h(void 0)});function lG(){fG.apply(this,arguments)}r(lG,fG);k=lG.prototype;k.initData=function(){fG.prototype.initData.call(this);this.Td=document.createElement("div");this.Sd=document.createElement("img");this.ig=document.createElement("div");this.Ez=/(^|.*\s):([\w-]+)$/};k.qa=function(){var a=this;H(this.Td,"previewWrapper");this.Td.style.display="none";this.Td.style.width="260px";this.Td.style.height="110px";this.Td.style.lineHeight="110px";this.Td.style.borderBottomWidth="1px";this.Td.style.borderBottomStyle="solid";this.Td.style.textAlign="center";this.Td.onclick=function(){void 0!==a.selectedIndex&&Kt.h(a.items[a.selectedIndex])};this.element.appendChild(this.Td);fG.prototype.qa.call(this);this.Sd.src="https://static-assets.highwebmedia.com/tsdefaultassets/loading.png";this.Sd.style.maxWidth="240px";this.Sd.style.maxHeight="80px";this.Sd.style.verticalAlign="middle";this.Sd.style.padding="10px 10px 16px 10px";this.Td.appendChild(this.Sd);H(this.ig,"hrefColor");this.ig.innerText="VIEW / REPORT EMOTICON";this.ig.style.fontSize="10px";this.ig.style.position="relative";this.ig.style.bottom="8px";this.ig.style.lineHeight="0";this.ig.onmouseenter=function(){a.ig.style.textDecoration="underline"};this.ig.onmouseleave=function(){a.ig.style.textDecoration="none"};this.Td.appendChild(this.ig);this.I.add(K.j(function(b){jG=b.C.Ne;a.delay=parseInt(b.C.ta.vk)}));this.I.add(Kq.j(function(b){a.delay=parseInt(b.vk)}));this.I.add(kG.j(function(){void 0!==a.P&&a.D()}))};k.Ix=function(a){36<QF(this.config.va)&&cG(this.config.va)&&(this.Zo(a),this.G())};k.ng=function(){fG.prototype.ng.call(this);this.Td.style.display="none"};k.Zh=function(a){fG.prototype.Zh.call(this,a);void 0!==this.selectedIndex&&(this.Sd.src="https://static-assets.highwebmedia.com/tsdefaultassets/loading.png",this.Sd.src=this.items[this.selectedIndex].url,this.Td.style.display="block")};function gG(a,b){b=new P(b);T(b,"slug");var c=hm(b,"emoticons"),d=[];c=q(c);for(var e=c.next();!e.done;e=c.next())e=e.value,d.push({Hc:e.slug,url:e.url,element:mG,ui:e.score});d=d.map(function(f){var g=void 0===f.ui?0:f.ui;f.Hc===a.prefix?f.ui=g+1E5:0===f.Hc.indexOf(a.prefix)&&(f.ui=g+9E3);return f});d=d.sort(function(f,g){return(void 0===f.ui?0:f.ui)-(void 0===g.ui?0:g.ui)});nm(b);return d}k.lA=function(a){return 0<=jG.indexOf(a.Hc)};var mG=document.createElement("div");function nG(){var a=this;this.Cm=new Set;this.ev=!1;this.Jr=new Ub;this.Cb=[];K.j(function(b){a.Fe=b.A;a.La=b.A.Ce;E(b.A.event.kc.j(function(c){var d=c.Ra;c=c.Dd;a.La||-1<["offline","notconnected","hidden","passwordprotected"].indexOf(d)||(c="privatespying"!==c&&"privatewatching"!==c,d="privatespying"!==d&&"privatewatching"!==d,!c&&d?(a.Xn=void 0,oG(a)):c&&!d?(a.Xn=void 0,oG(a,!1)):oG(a))}),a.Jr);a.La||E(b.A.event.Ga.j(function(c){c=q(c.na);for(var d=c.next();!d.done;d=c.next()){d=q(d.value);for(var e=d.next();!e.done;e=d.next())e=e.value,0===e.hc&&void 0!==e.V&&pG(a,e.V)}}),a.Jr)});tc.j(function(){Vb(a.Jr)})}var qG;function rG(){void 0===qG&&(qG=new nG);return qG}function oG(a,b){void 0===a.Xn&&(a.Xn=a.wu(void 0===b?!0:b),sG(a));return a.Xn}nG.prototype.ng=function(){this.Cb=[]};function sG(a){window.setTimeout(function(){a.Xn=void 0},6E4)}
function tG(a){a.ev||(a.Cb.sort(function(b,c){return b.V.username.toLowerCase()<c.V.username.toLowerCase()?-1:b.V.username.toLowerCase()>c.V.username.toLowerCase()?1:0}),a.ev=!0);return a.Cb}nG.prototype.jf=function(){return this.Cb.map(function(a){return a.V})};nG.prototype.wu=function(a){var b=this;a=void 0===a?!0:a;return yu(this.Fe).then(function(c){var d=document.createElement("div");a?uG(b):b.Cb=[];c=q(c.jf);for(var e=c.next();!e.done;e=c.next())e=e.value,void 0!==b.sm(e.username)||b.Cb.push({V:e,element:d,visible:!1,pu:!1}),b.Cm.has(e.username)&&(vG.h(void 0),b.Cm.delete(e.username));return b.Cb}).catch(function(c){u("Error loading username autocomplete: "+c);return b.Cb})};function pG(a,b){var c=document.createElement("div");a.ev=!1;var d=a.sm(b.username);void 0===d?a.Cb.push({V:b,element:c,visible:!1,pu:!0}):(d.V=b,d.pu=!0);a.Cm.has(b.username)&&(vG.h(void 0),a.Cm.delete(b.username))}function wG(a,b){b=q(b);for(var c=b.next();!c.done;c=b.next())a.Cm.add(c.value)}function uG(a){a.Cb=a.Cb.filter(function(b){return b.pu})}nG.prototype.sm=function(a){return this.Cb.find(function(b){return b.V.username===a})};da.Object.defineProperties(nG.prototype,{count:{configurable:!0,enumerable:!0,get:function(){return this.Cb.length}}});var vG=new F("updateUserMention",{Ed:!1}),xG=[40,37,39,38,13,27,32,9],yG=new F("videoModeChanged",{Rd:20});function zG(a){L.call(this,a);var b=this;this.config=a;this.cg=this.isVisible=!1;this.I=new Ub;this.Cb=rG();this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.height="auto";this.element.style.borderBottom="none";this.element.style.fontFamily="Helvetica, Arial, sans-serif";this.element.style.cursor="pointer";this.element.style.userSelect="none";this.Sb.j(function(){AG(b)&&GF(b.config.va," ",!0);b.D()});this.list=document.createElement("div");this.list.style.width="260px";this.list.style.maxHeight="180px";this.list.style.overflowY="scroll";this.element.appendChild(this.list);v("keyup",this.config.va.element,function(c){36<QF(b.config.va)&&(b.Zo(c),b.G())});v("keydown",this.config.va.element,function(c){if(b.isVisible||b.cg){var d=VF(b.config.va);if(13===c.keyCode&&" "!==d[d.length-1])c.preventDefault(),b.D(),SF(b.config.va,d+" "),MF(b.config.va);else if(38===c.keyCode||40===c.keyCode)c.preventDefault(),b.wq(38===c.keyCode);else if(9===c.keyCode||39===c.keyCode||32===c.keyCode)c.preventDefault(),c.stopPropagation(),b.D(),GF(b.config.va," ",!0),MF(b.config.va);else if(27===c.keyCode||37===c.keyCode)c.preventDefault(),b.D(),XF(b.config.va)}});E(Kq.j(function(c){b.delay=parseInt(c.vk)}),this.I);E(yG.j(function(){b.D()}),this.I);E(K.j(function(c){b.delay=parseInt(c.C.ta.vk);b.D();b.ng();b.Cb.ng()}),this.I);H(this.element,"userMentionModal")}r(zG,L);k=zG.prototype;k.tb=function(){Vb(this.I)};k.G=function(){this.element.style.left=Math.min(aG(this.config.va)+this.config.Im,this.config.va.element.clientWidth-this.config.ln)+"px"};k.Zo=function(a){ds(this,function c(){var d=this,e;return za(c,function(f){if(1==f.ia){if(!(0<=d.delay&&-1===xG.indexOf(a.keyCode))){f.ia=0;return}e=VF(d.config.va).match(/(^|\s)@([\w-]*)$/);if(null===e||!cG(d.config.va)){d.D();f.ia=0;return}return ra(f,oG(d.Cb),4)}d.prefix=e[2];d.it=d.prefix;d.Dh();f.ia=0})})};k.ng=function(){for(;null!==this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.selectedIndex=-1};k.Dh=function(){var a=this;this.ng();" "===this.prefix[this.prefix.length-1]&&this.D();var b=!1;this.xi=tG(this.Cb);this.xi.forEach(function(d,e){""===a.prefix||d.V.username.toLowerCase().startsWith(a.prefix.toLowerCase())?(BG(a,d,e),b=!0):d.visible=!1});if(b){var c=0>=this.list.children.length?0:this.list.children.item(this.list.children.length-1).offsetTop;this.list.scrollTop=c;this.isVisible||this.show()}else this.D(),this.cg=!0};function BG(a,b,c){var d=document.createElement("div");d.classList.add("userMentionModalItem");H(d,it(b.V));d.innerText=b.V.username;d.style.padding="2px 8px";d.onclick=function(){a.selectedIndex===c?(a.D(),GF(a.config.va," ",!0)):(a.selectedIndex=c,a.Zh(!1),a.config.va.focus())};d.style.fontWeight="bold";d.style.textOverflow="ellipsis";d.style.overflow="hidden";b.element=d;b.visible=!0;a.list.appendChild(d)}
k.wq=function(a){var b;this.it=AG(this)?this.xi[this.selectedIndex].V.username:this.prefix;var c=!1;this.Tl();do if(this.selectedIndex=AG(this)?this.selectedIndex+(a?-1:1):a?this.xi.length-1:0,0>this.selectedIndex){if(c)break;this.selectedIndex=this.xi.length-1;c=!0}else if(this.selectedIndex>=this.xi.length){if(c)break;this.selectedIndex=0;c=!0}while(null===(b=this.xi[this.selectedIndex])||void 0===b||!b.visible);this.Zh(!0)};k.Tl=function(){this.list.querySelectorAll("div.highlight").forEach(function(a){I(a,"highlight")})};k.Zh=function(a){if(AG(this)){this.Tl();var b=this.xi[this.selectedIndex],c=this.list.clientHeight,d=this.list.firstChild.getBoundingClientRect().height;a&&(this.list.scrollTop=this.selectedIndex*d-c/2);H(b.element,"highlight");a=b.V.username;SF(this.config.va,VF(this.config.va).replace(new RegExp(this.it+"$"),a));this.it=a;a=VF(this.config.va).lastIndexOf(a);-1<a&&WF(this.config.va,a)}};k.show=function(){var a=this;this.cg=!0;0<=this.delay&&window.setTimeout(function(){a.element.style.visibility="";a.cf();a.Z();a.isVisible=!0},this.delay)};k.D=function(){this.kb();this.element.style.visibility="hidden";this.cg=this.isVisible=!1;this.ng()};function AG(a){return-1!==a.selectedIndex&&a.selectedIndex<a.xi.length};var CG=new F("goPMList"),DG=new F("ignoreUser");function EG(a){G.call(this);this.element=N("div",{colorClass:"PMControlBar",style:{width:"100%",height:"31px",lineHeight:"32px",borderBottom:"#BDBDBD 1px solid",display:"flex",justifyContent:"space-between"},id:"pm-control-bar"},N("span",{colorClass:"backButton",style:{marginLeft:"10px",cursor:"pointer",fontSize:"12px"},onClick:function(){CG.h(a)}},Pi));this.element.classList.add("pm-control-bar")}r(EG,G);function FG(){var a=this;this.av=!1;this.Cx=function(){return a.element};this.Sc=function(){return a.av};this.Rx=function(){a.element.style.display="none";a.av=!1};this.qA=function(){a.element.style.display="block";a.av=!0};this.element=N("div",{style:{display:"none",textAlign:"center"}},Qi)};function GG(){var a=this;this.Gn=new Map;this.supported=!0;this.supported=Pa()&&Na()||La();this.pc();v("beforeunload",window,function(){a.close()});rj.j(function(b){b&&cb()&&(b=gb(),void 0!==b&&13>b?a.pc():void 0!==a.context&&a.context.resume())})}
GG.prototype.pc=function(){var a=this;if(this.supported)if(Na()){Fm("Using audio context");this.close();this.context="webkitAudioContext"in window?new webkitAudioContext:new AudioContext;var b=function(){if(void 0!==a.context){var c=a.context.createBufferSource();c.buffer=a.context.createBuffer(1,1,22050);c.connect(a.context.destination);c.start(0)}x("click",document,b);x("touchstart",document,b);x("touchend",document,b)};v("click",document,b);v("touchstart",document,b);v("touchend",document,b)}else Fm("Using audio elements");else w("Sounds are not supported.")};GG.prototype.close=function(){void 0!==this.context&&("close"in this.context&&this.context.close(),this.context=void 0)};function HG(a,b,c){a.Gn.set(b,{ready:!1});if(void 0!==a.context){var d=new XMLHttpRequest;d.open("GET",c,!0);d.responseType="arraybuffer";d.onload=function(){200>d.status||300<=d.status?u("Error requesting sound "+b+" "+d.status+" "+d.statusText):void 0===a.context?u("unexpected"):a.context.decodeAudioData(d.response.slice(0),function(e){a.Gn.set(b,{ready:!0,buffer:e})},function(e){u("Error decoding sound "+b+" "+e)})};d.onerror=function(){u("Error requesting sound "+b+" ("+new Eb(d)+")")};d.send()}else La()&&a.Gn.set(b,{ready:!0,zr:new Audio(c)})}
function IG(a){HG(a,"huge","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/huge.mp3");HG(a,"large","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/large.mp3");HG(a,"medium","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/medium.mp3");HG(a,"small","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/small.mp3");HG(a,"tiny","https://static-assets.highwebmedia.com/tsdefaultassets/sounds/classic/tiny.mp3")}
GG.prototype.cq=function(a,b){if(JG(this,a,b)){var c=this.Gn.get(a);if(void 0!==c&&c.ready)if(void 0!==c.buffer)if(void 0===this.context)u("unexpected");else{var d=this.context.createBufferSource();d.buffer=c.buffer;c=this.context.createGain();d.connect(c);c.connect(this.context.destination);c.gain.value=b/3.5/100;d.start(0)}else void 0!==c.zr?(c.zr.volume=b/100,b=c.zr.play(),void 0!==b&&b.catch(function(e){u("Error playing sound "+a+" ("+e+")")})):u("Missing sound buffer or element for "+a)}};function JG(a,b,c){return a.supported&&0!==c?100<c||0>c||isNaN(c)?(u("setSoundVolume: invalid volume "+c),!1):a.Gn.has(b)?!0:(u("Unknown sound: "+b),!1):!1};function KG(){Uk.apply(this,arguments)}r(KG,Uk);KG.prototype.Eo=function(){var a=Uk.prototype.Eo.call(this);a.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";return a};function LG(a,b,c){L.call(this);var d=this;this.wl=a;this.Qg=b;this.tE=c;this.Qj="public";this.hb=0;this.qj=this.wp=!1;this.cx=96;this.Ci=new F("tipSent");this.closed=new F("tipClosed");this.isVisible=!1;this.element.id="SplitModeTipCallout";H(this.element,"defaultColor");this.element.style.display="none";this.element.style.position="absolute";this.element.style.width="390px";this.element.style.height="auto";this.element.style.top="0";this.element.style.borderWidth="2px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.fontSize="12px";this.element.style.overflow="visible";v("keydown",this.element,function(e){27===e.keyCode&&d.D();9===e.keyCode&&(e.shiftKey?d.X.hasFocus()&&!cl(d.X)?d.la.focus():document.activeElement===d.la?d.ha.focus():d.X.hasFocus()||cl(d.X):d.X.hasFocus()&&!dl(d.X)?d.ha.focus():document.activeElement===d.ha?d.la.focus():d.X.hasFocus()||dl(d.X),e.preventDefault())});this.tf=Qj("","","74px");H(this.tf,"bottomDivot");this.element.appendChild(this.tf);this.Qn=Pj("","","74px");H(this.Qn,"topDivot");this.element.appendChild(this.Qn);this.Dp=Rj("","","30px");H(this.Dp,"leftDivot");this.element.appendChild(this.Dp);this.P.style.bottom="";a=document.createElement("div");H(a,"titleBar");a.innerText=vd;a.style.fontSize="15px";a.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";a.style.padding="6px";this.element.appendChild(a);a=document.createElement("div");a.style.display="inline-block";a.style.width="100%";b=document.createElement("span");b.innerText=af;b.style.fontWeight="bold";b.style.display="inline-block";b.style.padding="6px";a.appendChild(b);this.Zc=document.createElement("span");H(this.Zc,"tokenBalance");this.Zc.style.display="inline-block";this.Zc.style.fontWeight="bold";this.Zc.style.padding="6px 6px 6px 0";a.appendChild(this.Zc);b=document.createElement("a");H(b,"purchaseTokens");b.innerText=Ed;b.href="/tipping/purchase_tokens/";b.style.display="inline-block";b.style.fontSize="11px";b.style.marginLeft="12px";b.style.cssFloat="right";b.style.padding="6px";b.style.textDecoration="underline";b.onclick=function(){hl("embed"===d.wl);return!1};a.appendChild(b);this.element.appendChild(a);this.zb=document.createElement("div");H(this.zb,"warning");this.zb.style.display="none";this.zb.style.fontWeight="bold";this.zb.style.padding="6px";this.zb.style.textAlign="center";this.zb.style.position="absolute";this.zb.style.left="50%";a=document.createElement("div");a.innerText=cf;this.zb.appendChild(a);a=document.createElement("div");a.innerText=df;this.zb.appendChild(a);this.element.appendChild(this.zb);this.$e=document.createElement("form");a=document.createElement("label");b=document.createElement("span");b.innerText=ef;b.style.display="inline-block";b.style.padding="6px";a.appendChild(b);this.ha=fl();this.ha.value="25";this.ha.min="1";this.ha.style.width="5em";this.ha.style.display="inline-block";this.ha.style.padding="4px";this.ha.style.borderWidth="1px";this.ha.style.borderStyle="solid";this.ha.style.borderRadius="4px";this.ha.onclick=function(){d.hj()};a.appendChild(this.ha);this.$e.appendChild(a);this.Yd=document.createElement("div");this.Yd.innerText=rd;this.Yd.style.padding="6px 6px 0 6px";this.$e.appendChild(this.Yd);this.ve=document.createElement("div");this.la=document.createElement("textarea");H(this.la,"tipMessageInput");this.la.maxLength=255;this.la.style.width="100%";this.la.style.height="40px";this.la.style.resize="none";this.la.style.margin="6px";this.la.style.padding="4px";this.la.style.borderWidth="1px";this.la.style.borderStyle="solid";this.la.style.borderRadius="4px";this.la.style.boxSizing="border-box";this.ve.appendChild(this.la);this.$e.appendChild(this.ve);this.Yd.onclick=function(){d.la.select()};this.ke=document.createElement("div");H(this.ke,"warning");this.ke.innerText=ff;this.ke.style.display="none";this.ke.style.paddingLeft="5px";a.appendChild(this.ke);a=document.createElement("div");this.ha.oninput=function(){MG(d)};a.style.textAlign="right";a.style.position="relative";this.oc=document.createElement("div");this.oc.innerText=gf;this.oc.style.position="absolute";this.oc.style.display="none";this.oc.style.fontSize="10px";this.oc.style.lineHeight="1.3em";this.oc.style.padding="6px";this.oc.style.textAlign="left";this.oc.style.top="6px";this.oc.style.left="0px";a.appendChild(this.oc);this.X=new KG;this.J(this.X,a);this.$e.appendChild(a);this.element.appendChild(this.$e);K.j(function(e){void 0!==e.C.ap?d.ap=e.C.ap:u("hasLowSatisfactionScore is not defined.");void 0!==e.C.Sa?d.Sa=e.C.Sa:u("isAgeVerified is not defined.");d.W=e.A.B();e.A.event.kc.j(function(f){switch(f.Ra){case "privatewatching":d.Qj="private";break;default:d.Qj="public"}})});Du.j(function(e){d.Dv(e.$c)});this.G();v("submit",this.$e,function(e){e.preventDefault();var f=parseInt(d.ha.value);d.isVisible&&!isNaN(f)&&d.X.isEnabled()&&(C("SendTipClicked",{amount:f,location:"PMTab"}),100<f&&!d.qj?($k(d.X,Gc(f)),d.qj=!0,d.G()):(d.ha.blur(),e=d.la.value,void 0!==d.Aa&&(e=""===d.la.value?d.Aa.value:d.Aa.value+" | "+d.la.value),Gu({W:d.W,mv:d.ha.value,message:e,source:d.wl,nv:d.Qj,Di:d.X.Di,hg:O()}).then(function(g){g.success?C("SendTipSuccess",{amount:f,location:"PMTab"}):void 0!==g.error?J(g.error):u("unknown send tip error");NG(d);d.la.value="";void 0!==g.Zj&&Cu.h({$c:g.Zj,W:d.W});d.Ci.h({amount:f,success:g.success})}).catch(function(g){u("Error sending tip. status: "+g);d.Ci.h({amount:f,success:!1})}),d.D()))});this.Sb.j(function(){d.D()});this.closed.j(function(){d.X.Cc.D(!0)})}r(LG,L);k=LG.prototype;k.G=function(){this.ve.style.width=Math.max(0,this.element.clientWidth-12)+"px";this.oc.style.maxWidth=Math.max(0,this.element.offsetWidth-this.X.element.offsetWidth-15)+"px";var a=sk(this.tE);this.tf.style.display="none";this.Qn.style.display="none";this.Dp.style.display="none";if("fixed"===this.Qg.style.position)this.Dp.style.display="block",this.element.style.top=a.top-30+"px",this.element.style.left=a.right+12+"px";else{var b=a.left-70,c=Math.max(0,b+this.element.offsetWidth-ek()+4);0>b-c&&(c+=b-c);this.element.style.left=b-c+"px";hb()||this.element.offsetHeight+a.bottom+20>dk()+document.documentElement.scrollTop?(this.tf.style.display="block",this.tf.style.left=this.cx+c+"px",this.element.style.top=a.top-this.element.offsetHeight-11+"px"):(this.Qn.style.display="block",this.Qn.style.left=this.cx+c+"px",this.element.style.top=a.bottom+14+"px")}this.P.style.height=document.documentElement.offsetHeight+"px"};function MG(a){/^[1-9]\d*$/.test(a.ha.value)?(a.X.enable(),a.ke.style.display="none",0<a.hb&&parseInt(a.ha.value)>a.hb?a.wp||(C("TokenAmountTooHigh"),a.wp=!0):a.wp=!1):(a.X.disable(),a.ke.style.display="inline-block");a.qj&&NG(a)}function NG(a){var b=a.X;al(b);b.lk&&!b.Lm&&(b.Lm=!0,b.Jb.style.borderRadius="4px 0 0 4px",b.Ie.style.display="inline-block",b.yk=[b.Jb,b.Ie],b.Z());a.qj=!1}
k.show=function(a){var b=this;if(!this.Sa)J("This broadcaster doesn't accept tips.");else if(!Bq('You must be logged in to tip. Click "OK" to login.')){void 0!==a.amount&&(this.ha.value=a.amount.toString(),MG(this));this.la.value=void 0!==a.message?a.message:"";this.zb.style.display=this.ap?"block":"none";this.oc.style.display=void 0!==a.Vn&&a.Vn?"none":"block";if(eb()){var c=document.createElement("input");c.type="text";c.style.opacity="0";c.style.height="0px";document.body.appendChild(c);c.focus({preventScroll:!0})}el(this.wl,this.X);this.Zc.innerText=te+"...";Eu(this.W).then(function(d){b.ha.max=d.hb.toString();if(void 0!==d.vl){b.Yd.innerText=d.vl.label;void 0!==b.Aa&&b.ve.removeChild(b.Aa);b.Aa=document.createElement("select");H(b.Aa,"tipOptionsSelect");b.Aa.style.width="100%";b.Aa.style.fontSize=".8125em";b.Aa.style.margin="6px";b.Aa.style.borderWidth="1px";b.Aa.style.borderStyle="solid";b.Aa.style.boxSizing="border-box";b.ve.insertBefore(b.Aa,b.la);var e=document.createElement("option");e.innerText="-- "+jf+" --";b.Aa.appendChild(e);d=q(d.vl.options);for(e=d.next();!e.done;e=d.next()){var f=e.value;e=document.createElement("option");e.innerText=f.label;e.value=f.label;b.Aa.appendChild(e)}}else void 0!==b.Aa&&(b.Yd.innerText=rd,b.la.value="",b.ve.removeChild(b.Aa),b.Aa=void 0);b.element.style.display="block";b.cf();b.G();b.hj();void 0!==c&&document.body.removeChild(c);b.isVisible=!0}).catch(function(d){u("Error getting token balance. status: "+d);b.Zc.innerText=Qf})}};k.D=function(){this.element.style.display="none";this.ha.blur();this.kb();this.isVisible=!1;this.closed.h(void 0)};k.hj=function(){document.activeElement!==this.ha&&(this.ha.focus(),this.ha.setSelectionRange(0,9999))};k.Dv=function(a){this.hb=a;this.Zc.innerText=a+" "+Fc(a)};var OG=new F("dossier");function PG(){G.call(this);this.vB=new GG;this.yp=0;this.I=new Ub;this.Jt={B:"",jc:""}}r(PG,G);k=PG.prototype;k.Ss=function(){};k.Rs=function(){};k.Kf=function(){(new Qb("AutoLgnPopUpDly")).active&&window.setTimeout(function(){Wm()},3E3)};k.Jf=function(){};function QG(a){Kq.j(function(b){a.mf=b.mf;a.oa.O instanceof $r&&RG(a)})}function SG(a,b,c){a.lb=a.J(new LG("embed",b,c));Iq.j(function(d){a.lb.isVisible?a.lb.D():a.lb.show(d)});a.lb.Ci.j(function(){a.lb.D()})}
k.Uu=function(){var a;FD.j(function(b){void 0===a&&(a=new GD);a.Nf(b)});Jq.j(function(b){Xm(b)});Aq=function(){Jq.h(!0)}};function TG(a){Bk.j(function(){a.Z();a.Jf()});window.onorientationchange=function(){jc();a.Z()}}function UG(a,b){VG(a,b);zj.j(function(c){VG(a,c)});K.j(function(c){a.Kf(c)})}function WG(a,b){document.title=a+" at Chaturbate: "+b}function RG(a){function b(){void 0===window.xmovie.SetTipVol?window.setTimeout(function(){b()},100):window.xmovie.SetTipVol(a.mf)}b()}
function VG(a,b){Kb=b;if(b!==a.Jt.B){a.Jt={B:b,jc:""};a.yp+=1;var c=a.yp;a.Ex(b).then(function(d){c===a.yp&&a.$t(d,!0)}).catch(function(d){if(d instanceof Eb&&""!==d.Kd.responseText)if("application/json"!==d.Kd.getResponseHeader("Content-Type"))u("Error reading room dossier error",{room:b,error:d.Kd.responseText});else{var e=new P(d.Kd.responseText);switch(S(e,"code",!1)){case "access-denied":J("Access Denied for room: "+b+"\n\n"+T(e,"detail"));break;case "unauthorized":window.top.location.href="/auth/login/?next="+
window.location.pathname+window.location.search;break;case "password-required":break;default:u("Error parsing room dossier error",{room:b,error:d.Kd.responseText})}}else u("Error occurred while processing room dossier: "+d,{room:b})})}}k.Ex=function(a){return bq(a)};k.$t=function(a){var b=this;void 0!==this.vw&&this.vw();void 0!==this.nB&&this.nB();WG(a.B,a.jc);this.Jt.jc=a.jc;OG.h(a);this.A=new QA(a);this.A.event.pv.j(function(f){WG(a.B,f)});this.mf=a.ta.mf;IG(this.vB);this.A.event.cq.j(function(){});void 0!==a.Bg?this.Ss(a.Bg):u("isWidescreen is not defined.",{},"VIDEO_");var c={C:a,A:this.A};this.oa.O.Kf(c);var d,e;this.vw=function(){clearInterval(d);window.clearTimeout(e);b.A.disconnect();b.oa.O.stop();Vb(b.I);tc.h(void 0)};OA()||"offline"===c.C.Ab&&this.Rs();K.h(c);this.I.add(this.A.event.kc.j(function(f){"notconnected"===f.Dd&&(d=window.setInterval(function(){WA(b.A)},3E4));var g="privatewatching"===f.Dd||"privatewatching"===f.Ra;if("notconnected"===f.Dd||g)e=window.setTimeout(function(){WA(b.A)},2E3);switch(f.Ra){case "passwordprotected":b.oa.O.stop()}}));this.I.add(Kq.j(function(f){var g=b.A,h=f.Pj;g.Nj=f.Nj;g.Pj=h}));this.Z()};K.j(function(){});function XG(){this.page=0;this.Ht=40;this.jk=new Set;this.Qf=!1}XG.prototype.pc=function(a,b,c,d){a=void 0===a?[]:a;this.Ht=void 0===b?10:b;this.page=void 0===c?0:c;this.EC=a;this.jk=new Set;void 0!==d&&(this.Ko=d,this.jk.add(d));return this};function YG(a){a.Qf=!0;return new Promise(function(b,c){y("api/ts/chat/room-list/?"+vb({genders:a.EC,limit:a.Ht,offset:a.page*a.Ht,after:a.Ko})).then(function(d){d=new P(d.responseText);var e=JSON.parse(lm(d,"rooms"));nm(d);a.Qf=!1;b(e);a.page++}).catch(function(d){a.Qf=!1;c(d)})})}
XG.prototype.next=function(){return ds(this,function b(){var c=this,d,e,f;return za(b,function(g){if(1==g.ia)return d=c,c.Qf?g.return([]):ra(g,YG(c),2);e=g.wd;if(0===e.length){if(0===c.page){if(void 0!==c.Ko)return c.Ko=void 0,c.jk=new Set,g.return(YG(c));throw Error("No rooms available");}c.Ko=void 0;c.jk=new Set;c.page=0;return g.return(YG(c))}f=e.filter(function(h){h=h.username;return d.jk.has(h)?!1:(d.jk.add(h),!0)});return 0===f.length?g.return(YG(c)):g.return(f)})})};K.j(function(){});function ZG(a){switch(a){case "male":return"m";case "female":return"f";case "trans":return"t";case "couple":return"c";case "followed":return"o";default:return u("Cannot convert category "+a),""}};function $G(a,b){a=new P(a);b={Lk:{username:b,PG:W(a,"fan_club_cost",!1),hD:V(a,"fan_club_is_member"),OC:V(a,"performer_has_fanclub"),QG:T(a,"fan_club_join_url"),location:T(a,"location"),gy:lm(a,"interested_in"),zz:T(a,"real_name"),ol:Bc(T(a,"sex")),ux:W(a,"follower_count"),Cf:W(a,"display_age",!1),Zv:T(a,"body_decorations"),ax:T(a,"display_birthday",!1),xy:S(a,"time_since_last_broadcast"),sA:T(a,"smoke_drink"),$v:T(a,"body_type"),languages:T(a,"languages"),Ab:T(a,"room_status"),Op:V(a,"needs_supporter_to_pm")},Ov:T(a,"about_me"),dB:T(a,"wish_list"),mz:function(c){var d=[];c=q(JSON.parse(c));for(var e=c.next();!e.done;e=c.next())e=new P(JSON.stringify(e.value)),d.push({id:W(e,"id"),name:T(e,"name"),YB:T(e,"cover_url"),$c:W(e,"tokens"),uy:V(e,"is_video"),QJ:V(e,"video_has_sound"),mF:V(e,"user_can_access"),SG:V(e,"fan_club_only"),xp:T(e,"label_text"),At:T(e,"label_color"),KI:V(e,"pending_approval",!1,!1),MJ:V(e,"user_has_purchased")}),nm(e);return d}(lm(a,"photo_sets")),tA:function(c){var d=[];c=q(JSON.parse(c));for(var e=c.next();!e.done;e=c.next())e=new P(JSON.stringify(e.value)),d.push({id:W(e,"id"),LA:T(e,"title_name"),Kk:T(e,"image_url"),$c:W(e,"tokens"),UI:V(e,"purchased"),xp:T(e,"label_text"),At:T(e,"label_color")}),nm(e);return d}(lm(a,"social_medias")),$G:function(c){if(void 0!==c)return{description:c.description,DC:c.game_url,image:c.image_64x64,name:c.name,uid:c.uid,yF:c.viewers}}(jm(a,"game_selection"))};nm(a);a=hm(a,"split_test_state_bio_rm_links");C("BioLoaded",{eligible:a.eligible,active:a.active});return b}function aH(a){return new Promise(function(b,c){y("api/biocontext/"+a+"/").then(function(d){b($G(d.responseText,a))}).catch(function(d){c(d)})})};function bH(){var a=this;this.kq=new Map;this.Rv=function(b){a.kq.set(b,(new Date).getTime())};this.Jz=function(b){a.kq.delete(b)};window.setInterval(function(){for(var b=(new Date).getTime(),c=q(a.kq),d=c.next();!d.done;d=c.next())d=d.value,5E3<b-d[1]&&a.Jz(d[0])},5E3);uc.j(function(b){a.Jz(b)})}function cH(a,b){var c=a.kq.get(b);if(void 0!==c&&5E3>(new Date).getTime()-c)return a.Rv(b),!1;a.Rv(b);return!0};function dH(){this.rf=[]}dH.prototype.dd=function(a){this.remove(a);this.rf.unshift(a)};function eH(a,b){a.remove(b);a.rf.push(b)}dH.prototype.remove=function(a){a=this.rf.indexOf(a);-1!==a&&this.rf.splice(a,1)};function fH(){this.$i=new dH;this.Zi=new dH}fH.prototype.dd=function(a){this.Zi.remove(a);this.$i.dd(a)};function gH(a){var b=a.$i.rf.shift();void 0!==a.Ca&&a.Zi.dd(a.Ca);return a.Ca=b}function hH(a){var b=a.Zi.rf.shift();void 0!==a.Ca&&a.$i.dd(a.Ca);return a.Ca=b}fH.prototype.remove=function(a){this.Zi.remove(a);this.$i.remove(a);this.Ca===a&&(this.Ca=void 0)};function iH(a,b){a.dd(b);gH(a)};function jH(a){if(void 0===a)return kH();a={name:T(a,"name",!1),eF:T(a,"template",!1),px:U(a,"row1_label",!1),Zz:U(a,"row2_label",!1),FA:U(a,"row3_label",!1),qx:U(a,"row1_value",!1),$z:U(a,"row2_value",!1),GA:U(a,"row3_value",!1)};return kH(a)}
function kH(a){var b=document.createElement("tr"),c=document.createElement("tr"),d=document.createElement("tr");if(void 0!==a){var e=a.eF,f=[],g=[];if(""!==a.px){var h=document.createElement("th");h.style.padding="2px";h.innerText=a.px;f.push(h);b.appendChild(h);h=document.createElement("td");h.innerText=a.qx;b.appendChild(h);g.push(h);h.style.width="50%";h.style.paddingLeft="10px"}else h=document.createElement("td"),h.innerText=a.qx,h.colSpan=2,g.push(h),b.appendChild(h),h.style.textAlign="center";""!==a.Zz?(h=document.createElement("th"),h.style.padding="2px",h.style.fontWeight="bold",h.innerText=a.Zz,f.push(h),c.appendChild(h),h=document.createElement("td"),h.innerText=a.$z,g.push(h),c.appendChild(h),h.style.width="50%",h.style.paddingLeft="10px"):(h=document.createElement("td"),h.innerText=a.$z,h.colSpan=2,g.push(h),c.appendChild(h),h.style.textAlign="center");""!==a.FA?(h=document.createElement("th"),h.style.padding="2px",h.innerText=a.FA,f.push(h),d.appendChild(h),h=document.createElement("td"),h.innerText=a.GA,g.push(h),d.appendChild(h),h.style.width="50%",h.style.paddingLeft="10px"):(h=document.createElement("td"),h.innerText=a.GA,h.colSpan=2,g.push(h),d.appendChild(h),h.style.textAlign="center");a=q(f);for(h=a.next();!h.done;h=a.next())h=h.value,h.style.overflow="hidden",h.style.display="block",h.style.cssFloat="right";if("3_rows_of_labels"===e)H(f[0],"threeRowsOfLabels"),f[0].style.display="block",f[0].style.margin="0px auto",f[0].style.height="16px",f[0].style.fontWeight="bold";else if("3_rows_11_21_31"===e||"3_rows_11_22_32"===e)H(g[0],"threeRows-11-21-31"),g[0].style.fontWeight="bold"}else e=document.createElement("td"),b.appendChild(e.cloneNode()),c.appendChild(e.cloneNode()),d.appendChild(e.cloneNode());H(b,"rowOne");b.style.height="33.3333%";H(c,"rowTwo");c.style.height="33.3333%";H(d,"rowThree");d.style.height="33.3333%";e=document.createElement("table");e.id="AppPanelTable";e.style.fontSize="11px";e.style.lineHeight="1.7em";e.style.width="100%";e.style.height="100%";e.style.borderCollapse="collapse";e.style.margin="0 auto";e.appendChild(b);e.appendChild(c);e.appendChild(d);return e};function lH(a){var b=new P(a);a={backgroundColor:U(b,"background-color",!1),color:U(b,"color",!1),textAlign:U(b,"text-align",!1),fontStyle:U(b,"font-style",!1),fontWeight:U(b,"font-weight",!1)};var c=lm(b,"col_1",!1);""!==c&&(a.za=mH(c));b=lm(b,"col_2",!1);""!==b&&(a.data=mH(b));return a}
function mH(a){a=new P(a);return{backgroundColor:U(a,"background-color",!1),color:U(a,"color",!1),left:U(a,"left",!1),textAlign:U(a,"text-align",!1),fontStyle:U(a,"font-style",!1),fontWeight:U(a,"font-weight",!1),value:U(a,"value",!1),width:U(a,"width",!1)}}
function nH(a){var b=document.createElement("div");b.style.height="23px";b.style.lineHeight="23px";b.style.width="270px";if(void 0!==a){b.style.backgroundColor=a.backgroundColor;b.style.color=a.color;b.style.fontStyle=a.fontStyle;b.style.fontWeight=a.fontWeight;b.style.textAlign=a.textAlign;if(void 0!==a.za){var c=oH(a.za);b.appendChild(c)}void 0!==a.data&&(a=oH(a.data),b.appendChild(a))}return b}
function oH(a){var b=document.createElement("div");b.style.position="absolute";b.style.whiteSpace="nowrap";b.style.overflow="hidden";b.style.textOverflow="ellipsis";b.style.position="absolute";b.style.backgroundColor=a.backgroundColor;b.style.color=a.color;b.style.fontStyle=a.fontStyle;b.style.fontWeight=a.fontWeight;b.style.textAlign=a.textAlign;b.innerText=a.value;b.style.width=a.width;b.style.left=a.left;return b};function pH(){G.call(this);var a=this;this.aq=new F("panelUpdated");this.Xh=!1;this.element.style.display="inline-block";this.element.style.paddingLeft="5px";this.element.style.paddingTop="3px";this.element.style.paddingRight="5px";this.element.style.paddingBottom="3px";this.element.style.position="";this.element.style.width="270px";this.element.style.height="69px";this.element.style.textShadow="none";this.element.style.fontSize="11px";this.element.style.lineHeight="1.7em";K.j(function(b){a.dk(b.A.B());b.A.event.Dz.j(function(){a.dk(b.A.B())});b.A.event.ww.j(function(){a.dk(b.A.B())})});this.Ri=jH();this.element.appendChild(this.Ri)}r(pH,G);pH.prototype.dk=function(a){var b=this;y("api/panel_context/"+a+"/").then(function(c){0<b.element.children.length&&b.element.removeChild(b.Ri);c=new P(c.responseText);if("no-content"===T(c,"code",!1))b.Xh=!1,b.Ri=jH();else{b.Xh=!0;var d=T(c,"template",!1);switch(d){case "image_template":T(c,"name",!1);T(c,"template",!1);var e=R(c,"layers");if(void 0!==e&&e instanceof Array&&0!==e.length){d=[];var f=q(e);for(var g=f.next();!g.done;g=f.next()){e=d;var h=e.push;g=JSON.stringify(g.value);g=new P(g);g={color:U(g,"color",!1),filename:U(g,"filename",!1),fontFamily:U(g,"font-family",!1),fontSize:U(g,"font-size",!1),fontStyle:U(g,"font-style",!1),fontWeight:U(g,"font-weight",!1),height:U(g,"height",!1),Kk:U(g,"image_url",!1),By:U(g,"type",!1),left:U(g,"left",!1),maxWidth:U(g,"max-width",!1),opacity:U(g,"opacity",!1),text:U(g,"text",!1),textAlign:U(g,"text-align",!1),top:U(g,"top",!1),width:U(g,"width",!1)};h.call(e,g)}f=d}d=lm(c,"table",!1);if(0!==d.length){d=new P(d);var m={backgroundColor:U(d,"background-color",!1),color:U(d,"color",!1),textAlign:U(d,"text-align",!1),fontStyle:U(d,"font-style",!1),fontWeight:U(d,"font-weight",!1)};e=lm(d,"row_1",!1);""!==e&&(m.kE=lH(e));e=lm(d,"row_2",!1);""!==e&&(m.mE=lH(e));d=lm(d,"row_3",!1);""!==d&&(m.lE=lH(d))}d=document.createElement("div");d.style.position="absolute";d.style.height="69px";d.style.width="270px";d.style.backgroundColor="white";d.style.overflow="hidden";d.style.font="1em 'UbuntuRegular', Arial, Helvetica, sans-serif";if(void 0!==f)for(f=q(f),e=f.next();!e.done;e=f.next())if(e=e.value,"text"===e.By){h=d;g=h.appendChild;var n=document.createElement("span");n.style.position="absolute";n.style.whiteSpace="nowrap";n.style.overflow="hidden";n.style.textOverflow="ellipsis";n.style.lineHeight="normal";n.style.color=e.color;n.style.fontFamily=e.fontFamily;n.style.fontSize=e.fontSize;n.style.fontStyle=e.fontStyle;n.style.fontWeight=e.fontWeight;n.style.left=e.left;n.style.maxWidth=e.maxWidth;n.innerText=e.text;n.style.textAlign=e.textAlign;n.style.top=e.top;n.style.width=e.width;g.call(h,n)}else"image"===e.By&&(h=d,g=h.appendChild,n=document.createElement("img"),n.style.position="absolute",n.alt=e.filename,n.style.height=e.height,n.src=e.Kk,n.style.left=e.left,n.style.top=e.top,n.style.width=e.width,g.call(h,n));if(void 0!==m){f=m;m=document.createElement("div");m.style.height="69px";m.style.width="270px";m.style.backgroundColor=f.backgroundColor;m.style.color=f.color;m.style.fontStyle=f.fontStyle;m.style.fontWeight=f.fontWeight;m.style.textAlign=f.textAlign;f=q([f.kE,f.mE,f.lE]);for(e=f.next();!e.done;e=f.next())e=e.value,e=void 0!==e?nH(e):nH(),m.appendChild(e);d.appendChild(m)}b.Ri=d;break;case "3_rows_11_21_31":case "3_rows_11_22_32":case "3_rows_12_21_31":case "3_rows_12_22_31":case "3_rows_of_labels":b.Ri=jH(c);break;default:b.Xh=!1,b.Ri=jH(),w("template of type ("+d+"): is not supported")}nm(c)}b.element.appendChild(b.Ri);b.aq.h(void 0)}).catch(function(c){u("Error fetching app panel ("+c+")")})};function qH(a){var b=this;this.config=a;this.zc=new pH;this.zc.element.style.width="270px";this.zc.element.style.position="relative";this.Gr=this.Xh=!1;K.j(function(){b.Xh=!1;b.Gr=!1;b.lo=void 0;b.Re=void 0;window.setTimeout(function(){b.Gr=!0;b.Xh&&rH(b)},2E3)});this.zc.aq.j(function(){b.Xh=!0;b.Gr&&rH(b)})}
function rH(a){if(a.zc.Xh){if(void 0!==a.Re){for(var b=0;b<a.Re.children.length;b+=1)a.Re.removeChild(a.Re.children.item(b));a.Re.appendChild(sH(a))}void 0===a.lo?(a.config.fa(a.zc.element,function(){return tH(a)}),a.lo=a.config.rm()):(b=a.zc.element.offsetTop-a.config.HC(),(0>b||b>a.config.GC()-30)&&20<a.config.Lp(a.lo)&&(a.config.nq(a.zc.element),a.config.fa(a.zc.element,function(){return tH(a)}),a.lo=a.config.rm()))}}function sH(a){a=a.zc.element.cloneNode(!0);a.style.width="270px";return a}
function tH(a){void 0!==a.Re&&null!==a.Re.parentNode&&a.Re.parentNode.removeChild(a.Re);a.Re=document.createElement("div");a.Re.appendChild(sH(a));return a.Re};function uH(a){return ds(this,function c(){var d;return za(c,function(e){d={room_user:a.Uz,created_by:a.Mw,banned_user:a.Wv,is_silence:a.ty.toString()};return e.return(B("api/ts/chat/ban-id/",d).then(function(f){return JSON.parse(f.responseText).banid}))})})}function vH(a,b,c,d,e){B("edit_room_ban/",{banid:String(a),action:b,room_username:c}).then(function(f){f=f.responseText;if(null===f)e();else{try{var g=JSON.parse(f)}catch(h){e();return}void 0!==g.error?e():d()}}).catch(function(){e()})};function wH(a,b,c,d,e){function f(n){var p;null===n||void 0===n?void 0:n.preventDefault();null===(p=g.parentElement)||void 0===p?void 0:p.removeChild(g);Array.from(document.getElementsByClassName("undo-ban-options-"+a.zh)).forEach(function(A){var z;null===(z=A.parentElement)||void 0===z?void 0:z.removeChild(A)})}var g=N("div",{className:"undo-ban-options-"+a.zh,style:{boxSizing:"border-box",padding:"2px 5px 3px 25px",fontWeight:"bold"}}),h=N("a",{href:"#",className:"msg-link",onClick:function(n){null===n||void 0===n?void 0:n.preventDefault();f();vH(b,a.bi?"remove_ban":"remove_silence",c.C.B,function(){d(a.bi?fj:gj)},function(){d(a.bi?hj:jj)})}},kj),m=N("a",{href:"#",style:{color:"inherit"},onClick:f},"(",qf,")");g.appendChild(h);a.bi||c.C.userName!==c.C.B||(h=N("a",{href:"#",style:{color:"red"},onClick:function(n){null===n||void 0===n?void 0:n.preventDefault();sc(Wc(a.zh),function(){f();vH(b,"convert_to_ban",c.C.B,function(){XA(c.A,a.zh);e({zh:a.zh,ql:c.C.B,bi:!0},c)},function(){d(ij)})})}},lj),g.appendChild(document.createTextNode("\u00a0".repeat(5))),g.appendChild(h));g.appendChild(document.createTextNode("\u00a0".repeat(5)));g.appendChild(m);return g};K.j(function(a){a.A.B();a.A.username()});function xH(){var a=this;this.Lq=this.Kq=this.Nq=this.Mq=this.Rk=this.Mm=0;this.Qu=!1;this.Dy=0;this.re={cbVersion:2,href:"",unloadTimestamp:0,count:0};this.vu=this.uu=!1;this.lb=this.A=void 0;this.jB="SessionMetrics";this.zB=function(b){b!==a.A&&(void 0!==a.A&&(a.A.event.Kp.removeListener(a.$y),a.A.event.jl.removeListener(a.Yp),$n.removeListener(a.Yp)),a.A=b,a.A.event.Kp.j(a.$y),a.A.event.jl.j(a.Yp),$n.j(a.Yp))};this.AB=function(b){b!==a.lb&&(void 0!==a.lb&&a.lb.Ci.removeListener(a.gz),a.lb=b,a.lb.Ci.j(a.gz,!1))};this.wo=function(){return void 0!==a.A&&!a.A.Ce};this.bA=function(){if(!a.Qu&&a.wo()){C(a.jB,{messageSuccessCount:a.Rk,messageFailCount:a.Mm-a.Rk,tipSuccessCount:a.Mq,tipSuccessTotal:a.Nq,tipFailCount:a.Kq,tipFailTotal:a.Lq,refreshCount:window.sessionStorage?a.re.count:void 0});a.Qu=!0;a.re={cbVersion:2,href:window.location.href,unloadTimestamp:(new Date).getTime(),count:0};try{window.sessionStorage.setItem("refreshMeta",JSON.stringify(a.re))}catch(b){}}};this.onLoad=function(){K.removeListener(a.onLoad);if(void 0!==window.sessionStorage&&a.wo()){a.Dy=(new Date).getTime();try{var b=window.sessionStorage.getItem("refreshMeta");null!==b&&(a.re=Object.assign(Object.assign({},a.re),JSON.parse(b)))}catch(c){}yH(a);a.Qt=a.IC();a.uu=!1;a.vu=!1}};this.gz=function(b){void 0!==b.amount&&(!0===b.success?(a.Mq+=1,a.Nq+=b.amount):(a.Kq+=1,0<b.amount&&(a.Lq+=b.amount)))};this.$y=function(){a.Mm+=1};this.Yp=function(b){void 0!==a.A&&b.N.username===a.A.username()&&a.Rk<a.Mm&&(a.Rk+=1)};this.IC=function(){if(void 0!==window.performance){var b=void 0!==window.performance.getEntriesByType?window.performance.getEntriesByType("navigation"):[];if(0<b.length)switch(b[0].type){case "navigate":return 0;case "reload":return 1;case "back_forward":return 2;case "prerender":return 3;default:return 255}else return window.performance.navigation.type}};this.BF=function(){return 1===a.Qt?2===a.re.cbVersion:0===a.Qt||void 0===a.Qt?a.re.href===window.location.href&&a.re.unloadTimestamp>a.Dy-1E4&&2===a.re.cbVersion:!1};this.SA=function(){void 0!==window.sessionStorage&&!a.uu&&a.wo()&&(a.re.count=a.BF()?1:0,a.uu=!0)};this.nE=function(){if(void 0!==window.sessionStorage&&!a.vu&&a.wo()){a.re={cbVersion:2,href:window.location.href,unloadTimestamp:(new Date).getTime(),count:a.re.count};try{window.sessionStorage.setItem("refreshMeta",JSON.stringify(a.re)),a.vu=!0}catch(b){}}};this.FD=function(){a.SA();a.bA()};this.Aj=function(){a.SA();a.nE();a.bA()};K.j(this.onLoad);K.j(function(){yH(a)});tc.j(this.FD);v("beforeunload",window,this.Aj);v("unload",window,this.Aj)}function yH(a){a.Mm=0;a.Rk=0;a.Mq=0;a.Nq=0;a.Kq=0;a.Lq=0;a.Qu=!1};var zH=new Set;function AH(a){zH.forEach(function(b){a!==b.W&&b.tb()})}OG.j(function(a){AH(a.B)});function BH(a,b){var c;null===(c=a.Ku)||void 0===c?void 0:c.tb();if(c="AnonymousUser"!==b.userName&&0<b.rw.trim().length){c=b.Sl;var d=b.B;c===d?c=!0:(c="rules_accepted_"+c+"_"+d,c=t()?"true"===localStorage.getItem(c):"true"===xb(c));c=!c}c&&(a.Ku=new CH({Bm:a.ma,sa:a.sa,W:b.B,userName:b.Sl,text:b.rw.trim(),sb:a,Eb:b.ta}),a.J(a.Ku),LF(a.sa))}
function CH(a,b){b=void 0===b?!1:b;var c;G.call(this);var d=this;this.oA=function(){d.show()};this.Ep=!1;this.I=new Ub;zH.add(this);this.element.style.position="absolute";this.element.style.textAlign="center";this.element.style.height="auto";b?(this.element.style.width="70%",this.element.style.left="15%"):(this.element.style.width="95%",this.element.style.left="2.5%");this.element.style.bottom="10px";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";this.element.style.margin="0 auto";this.element.style.padding="10px";this.element.style.boxSizing="border-box";this.element.style.maxHeight="95%";this.element.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";H(this.element,"rulesModal");this.Bm=a.Bm;this.Qh=a.sa;this.W=a.W;this.sb=null!==(c=a.sb)&&void 0!==c?c:void 0;this.userName=a.userName;this.Un(a.Eb);E(Kq.j(function(e){d.Un(e)}),this.I);this.pc(a.text);this.Ep||(v("focus",this.Qh.element,this.oA),this.Ep=!0);DH(this)}r(CH,G);k=CH.prototype;k.Un=function(a){this.element.style.fontFamily=a.fontFamily;this.element.style.fontSize=a.fontSize};k.pc=function(a){this.element.style.display="none";var b=document.createElement("div");b.style.fontWeight="bold";b.style.textAlign="left";b.style.paddingBottom="5px";b.style.whiteSpace="nowrap";b.style.textOverflow="ellipsis";b.style.overflow="hidden";b.innerText=""+this.W[0].toUpperCase()+this.W.substring(1)+"'s Rules:";this.element.appendChild(b);this.Mn=EH(this,a);a=document.createElement("div");H(a,"scrollIndicator");a.style.height="50px";a.style.position="absolute";a.style.bottom="0";a.style.fontWeight="bold";a.style.textAlign="center";a.style.boxSizing="border-box";a.style.width="calc(100% - 20px)";this.Xz=a;a=document.createElement("div");a.style.position="relative";a.appendChild(this.Mn);a.appendChild(this.Xz);this.element.appendChild(a);this.kr=this.Rr();this.zw=this.Do();this.element.appendChild(this.kr);this.element.appendChild(this.zw);this.G()};function EH(a,b){var c=document.createElement("div");c.style.whiteSpace="pre-line";c.style.textAlign="left";c.style.lineHeight="1.4";c.style.height="auto";c.style.paddingBottom="15px";c.style.boxSizing="border-box";c.style.width="100%";c.style.overflowY="scroll";c.style.CI="break-word";c.style.XJ="break-word";c.style.wordWrap="break-word";c.style.cssText+="; -ms-overflow-style: -ms-autohiding-scrollbar";c.style.marginBottom="3px";c.style.paddingRight="15px";c.onscroll=function(){DH(a)};c.appendChild(document.createTextNode(b));dG(c);return c}function DH(a){a.Xz.style.display=1>=a.Mn.scrollHeight-a.Mn.scrollTop-a.Mn.clientHeight?"none":"block"}k.G=function(){var a=this.sb.element.getBoundingClientRect().height;this.Mn.style.maxHeight="calc("+a+"px - 120px)";DH(this)};k.show=function(){this.element.style.display="block";this.Qh.element.blur();this.Bm.style.display="none";this.element.click();this.G();this.kr.focus()};k.D=function(){this.element.style.display="none";this.Qh.element.click();this.Qh.element.focus();this.Bm.style.display="block";this.sb.Z()};k.accept=function(){var a="rules_accepted_"+this.userName+"_"+this.W;t()?localStorage.setItem(a,"true"):zb(a,"true",1);AH();void 0!==this.Qh&&(this.Qh.element.click(),this.Qh.element.focus())};k.tb=function(){var a,b;this.D();this.Ep&&(x("focus",this.Qh.element,this.oA),this.Ep=!1);Vb(this.I);null===(a=this.parent)||void 0===a?void 0:a.removeChild(this);null===(b=this.element.parentElement)||void 0===b?void 0:b.removeChild(this.element);zH.delete(this);delete this.sb.Ku};k.Rr=function(){var a=this,b=document.createElement("button");b.innerText=cj;b.style.fontFamily="'UbuntuRegular',sans-serif";b.style.display="inline-block";b.style.boxSizing="content-box";b.style.width="calc(100% - 16px)";b.style.padding="8px";b.style.borderRadius="4px";b.style.cursor="pointer";b.style.fontWeight="500";b.style.lineHeight="16px";b.style.whiteSpace="nowrap";b.style.overflow="hidden";b.style.textOverflow="ellipsis";b.style.fontSize="120%";b.style.zIndex="2";v("click",b,function(){a.accept()});v("keydown",b,function(c){"Tab"===c.key&&(c.preventDefault(),a.zw.focus())});H(b,"acceptRulesButton");return b};k.Do=function(){var a=this,b=document.createElement("button"),c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/close_icon.svg";c.style.backgroundColor="inherit";b.appendChild(c);b.style.boxSizing="border-box";b.style.padding="7px";b.style.position="absolute";b.style.top="0";b.style.right="0";b.style.cursor="pointer";v("click",b,function(){a.D();a.Bm.focus()});v("keydown",b,function(d){"Tab"===d.key&&(d.preventDefault(),a.kr.focus())});H(b,"closeRulesButton");return b};function FH(a,b){"string"===typeof a&&-1!==a.indexOf(".")&&1===parseFloat(a)&&(a="100%");var c="string"===typeof a&&-1!==a.indexOf("%");a=360===b?a:Math.min(b,Math.max(0,parseFloat(a)));c&&(a=parseInt(String(a*b),10)/100);return 1E-6>Math.abs(a-b)?1:a=360===b?(0>a?a%b+b:a%b)/parseFloat(String(b)):a%b/parseFloat(String(b))}function GH(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function HH(a){return 1>=a?100*Number(a)+"%":a}function IH(a){return 1===a.length?"0"+a:String(a)};function JH(a,b,c){a=FH(a,255);b=FH(b,255);c=FH(c,255);var d=Math.max(a,b,c),e=Math.min(a,b,c),f=0,g=(d+e)/2;if(d===e)f=e=0;else{var h=d-e;e=.5<g?h/(2-d-e):h/(d+e);switch(d){case a:f=(b-c)/h+(b<c?6:0);break;case b:f=(c-a)/h+2;break;case c:f=(a-b)/h+4}f/=6}return{If:f,Xc:e,ub:g}}function KH(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}
function LH(a,b,c,d){a=[IH(Math.round(a).toString(16)),IH(Math.round(b).toString(16)),IH(Math.round(c).toString(16))];return d&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}
function MH(a,b,c,d,e){a=[IH(Math.round(a).toString(16)),IH(Math.round(b).toString(16)),IH(Math.round(c).toString(16)),IH(Math.round(255*parseFloat(d)).toString(16))];return e&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")};var NH={KF:"#f0f8ff",MF:"#faebd7",NF:"#00ffff",OF:"#7fffd4",QF:"#f0ffff",RF:"#f5f5dc",SF:"#ffe4c4",BB:"#000000",TF:"#ffebcd",blue:"#0000ff",UF:"#8a2be2",XF:"#a52a2a",YF:"#deb887",ZF:"#5f9ea0",aG:"#7fff00",cG:"#d2691e",fG:"#ff7f50",gG:"#6495ed",hG:"#fff8dc",iG:"#dc143c",kG:"#00ffff",lG:"#00008b",mG:"#008b8b",nG:"#b8860b",oG:"#a9a9a9",pG:"#006400",qG:"#a9a9a9",rG:"#bdb76b",sG:"#8b008b",tG:"#556b2f",uG:"#ff8c00",vG:"#9932cc",wG:"#8b0000",xG:"#e9967a",yG:"#8fbc8f",zG:"#483d8b",AG:"#2f4f4f",BG:"#2f4f4f",CG:"#00ced1",DG:"#9400d3",FG:"#ff1493",GG:"#00bfff",IG:"#696969",JG:"#696969",MG:"#1e90ff",TG:"#b22222",UG:"#fffaf0",WG:"#228b22",YG:"#ff00ff",ZG:"#dcdcdc",bH:"#f8f8ff",dH:"#daa520",cH:"#ffd700",hH:"#808080",green:"#008000",iH:"#adff2f",jH:"#808080",nH:"#f0fff0",oH:"#ff69b4",rH:"#cd5c5c",sH:"#4b0082",uH:"#fffff0",vH:"#f0e68c",zH:"#fff0f5",yH:"#e6e6fa",AH:"#7cfc00",DH:"#fffacd",EH:"#add8e6",FH:"#f08080",GH:"#e0ffff",HH:"#fafad2",IH:"#d3d3d3",JH:"#90ee90",KH:"#d3d3d3",LH:"#ffb6c1",MH:"#ffa07a",NH:"#20b2aa",OH:"#87cefa",PH:"#778899",QH:"#778899",RH:"#b0c4de",SH:"#ffffe0",TH:"#00ff00",UH:"#32cd32",VH:"#faf0e6",WH:"#ff00ff",XH:"#800000",ZH:"#66cdaa",$H:"#0000cd",aI:"#ba55d3",bI:"#9370db",cI:"#3cb371",dI:"#7b68ee",eI:"#00fa9a",fI:"#48d1cc",gI:"#c71585",iI:"#191970",jI:"#f5fffa",kI:"#ffe4e1",lI:"#ffe4b5",nI:"#ffdead",oI:"#000080",wI:"#fdf5e6",xI:"#808000",yI:"#6b8e23",Yk:"#ffa500",AI:"#ff4500",BI:"#da70d6",EI:"#eee8aa",FI:"#98fb98",GI:"#afeeee",HI:"#db7093",II:"#ffefd5",JI:"#ffdab9",MI:"#cd853f",OI:"#ffc0cb",QI:"#dda0dd",RI:"#b0e0e6",VI:"#800080",WI:"#663399",red:"#ff0000",ZI:"#bc8f8f",$I:"#4169e1",bJ:"#8b4513",cJ:"#fa8072",dJ:"#f4a460",fJ:"#2e8b57",gJ:"#fff5ee",jJ:"#a0522d",mJ:"#c0c0c0",oJ:"#87ceeb",pJ:"#6a5acd",qJ:"#708090",rJ:"#708090",sJ:"#fffafa",uJ:"#00ff7f",xJ:"#4682b4",tan:"#d2b48c",BJ:"#008080",EJ:"#d8bfd8",HJ:"#ff6347",JJ:"#40e0d0",TJ:"#ee82ee",UJ:"#f5deb3",CF:"#ffffff",VJ:"#f5f5f5",YJ:"#ffff00",ZJ:"#9acd32"};function OH(a){var b,c=0,d=0,e=0,f=1,g=!1,h=!1;"string"===typeof a&&(a=PH(a));if("object"===typeof a){if(QH(a.r)&&QH(a.Fa)&&QH(a.b))c=255*FH(a.r,255),d=255*FH(a.Fa,255),e=255*FH(a.b,255),g=!0,h="%"===String(a.r).substr(-1)?"prgb":"rgb";else if(isNaN(Number(a.y))||isNaN(Number(a.lz))||isNaN(Number(a.rz)))if(QH(a.If)&&QH(a.Xc)&&QH(a.Al)){d=HH(a.Xc);e=HH(a.Al);g=a.If;g=6*FH(g,360);c=FH(d,100);e=FH(e,100);d=Math.floor(g);var m=g-d;g=e*(1-c);h=e*(1-m*c);m=e*(1-(1-m)*c);var n=d%6;c=255*[e,h,g,g,m,e][n];d=255*[m,e,e,h,g,g][n];e=255*[g,g,m,e,e,h][n];g=!0;h="hsv"}else QH(a.If)&&QH(a.Xc)&&QH(a.ub)?(d=HH(a.Xc),e=HH(a.ub),c=a.If,c=FH(c,360),d=FH(d,100),e=FH(e,100),0===d?g=d=e:(g=.5>e?e*(1+d):e+d-e*d,h=2*e-g,e=KH(h,g,c+1/3),d=KH(h,g,c),g=KH(h,g,c-1/3)),c=255*e,d*=255,e=255*g,g=!0,h="hsl"):isNaN(Number(a.ub))||isNaN(Number(a.a))||isNaN(Number(a.b))||(e=(a.ub+16)/116,g=a.a/500+e,h=e-a.b/200,g=.95047*(.008856<g*g*g?g*g*g:(g-16/116)/7.787),e=.008856<e*e*e?e*e*e:(e-16/116)/7.787,h=1.08883*(.008856<h*h*h?h*h*h:(h-16/116)/7.787),c=3.2406*g+-1.5372*e+-.4986*h,d=-.9689*g+1.8758*e+.0415*h,e=.0557*g+-.204*e+1.057*h,c=.0031308<c?1.055*Math.pow(c,1/2.4)-.055:12.92*c,d=.0031308<d?1.055*Math.pow(d,1/2.4)-.055:12.92*d,e=.0031308<e?1.055*Math.pow(e,1/2.4)-.055:12.92*e,c=255*Math.max(0,Math.min(1,c)),d=255*Math.max(0,Math.min(1,d)),e=255*Math.max(0,Math.min(1,e)),g=!0,h="lab");else e=a.y,g=a.lz,d=a.rz,c=Math.round(e+1.402*d),d=Math.round(e-.344*g-.714*d),e=Math.round(e+1.772*g),g=!0,h="ypbpr";Object.prototype.hasOwnProperty.call(a,"a")&&(f=a.a)}f=GH(f);return{ok:g,format:null!==(b=a.format)&&void 0!==b?b:h,r:Math.min(255,Math.max(c,0)),Fa:Math.min(255,Math.max(d,0)),b:Math.min(255,Math.max(e,0)),a:f}}
var RH=/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,SH=/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,TH=/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,UH=/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,VH=/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,WH=/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,XH=/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,YH=/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ZH=/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,$H=/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,aI=/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;function PH(a){a=a.trim().toLowerCase();if(0===a.length)return!1;var b=!1;if(NH[a])a=NH[a],b=!0;else if("transparent"===a)return{r:0,Fa:0,b:0,a:0,format:"name"};var c=SH.exec(a);if(null!==c)return{r:c[1],Fa:c[2],b:c[3]};c=TH.exec(a);if(null!==c)return{r:c[1],Fa:c[2],b:c[3],a:c[4]};c=UH.exec(a);if(null!==c)return{If:c[1],Xc:c[2],ub:c[3]};c=VH.exec(a);if(null!==c)return{If:c[1],Xc:c[2],ub:c[3],a:c[4]};c=WH.exec(a);if(null!==c)return{If:c[1],Xc:c[2],Al:c[3]};c=XH.exec(a);if(null!==c)return{If:c[1],Xc:c[2],Al:c[3],a:c[4]};c=aI.exec(a);if(null!==c)return{r:parseInt(c[1],16),Fa:parseInt(c[2],16),b:parseInt(c[3],16),a:parseInt(c[4],16)/255,format:b?"name":"hex8"};c=ZH.exec(a);if(null!==c)return{r:parseInt(c[1],16),Fa:parseInt(c[2],16),b:parseInt(c[3],16),format:b?"name":"hex"};c=$H.exec(a);if(null!==c)return{r:parseInt(c[1]+c[1],16),Fa:parseInt(c[2]+c[2],16),b:parseInt(c[3]+c[3],16),a:parseInt(c[4]+c[4],16)/255,format:b?"name":"hex8"};c=YH.exec(a);return null!==c?{r:parseInt(c[1]+c[1],16),Fa:parseInt(c[2]+
c[2],16),b:parseInt(c[3]+c[3],16),format:b?"name":"hex"}:!1}function QH(a){return!!RH.exec(String(a))};function bI(a,b){var c=this;a=void 0===a?"":a;b=void 0===b?{}:b;var d;this.wj=function(e){return c.Yl.wj(e)};this.Mo=function(e){return c.Yl.Mo(e)};this.Kg=function(e){return c.Yl.Kg(e)};this.Hp=function(e){return c.Yl.Hp(e)};if(a instanceof bI)return a.clone();"number"===typeof a&&(a={r:a>>16,Fa:(a&65280)>>8,b:a&255});a=OH(a);this.r=a.r;this.Fa=a.Fa;this.b=a.b;this.a=a.a;this.qn=Math.round(100*this.a)/100;this.format=null!==(d=b.format)&&void 0!==d?d:a.format;1>this.r&&(this.r=Math.round(this.r));1>this.Fa&&(this.Fa=Math.round(this.Fa));1>this.b&&(this.b=Math.round(this.b));this.Qe=a.ok;cI(this);dI(this);eI(this)}function cI(a){a.fr={wj:function(b){var c=fI(a);c.ub+=b/100;c.ub=Math.min(1,Math.max(0,c.ub));return gI(c)},Mo:function(b){return a.fr.wj(-b)},Kg:function(b){var c=fI(a);c.ub=b;return gI(c)},Hp:function(b){b=gI(b).fr.mh;var c=fI(a);c.ub=b;return gI(c)},get mh(){return fI(a).ub}}}
function dI(a){a.er={wj:function(b){var c=hI(a);c.ub+=b/100;c.ub=Math.min(1,Math.max(0,c.ub));return gI(c)},Mo:function(b){return a.er.wj(-b)},Kg:function(b){var c=hI(a);c.ub=b;return gI(c)},Hp:function(b){b=gI(b).er.mh;var c=hI(a);c.ub=b;return gI(c)},get mh(){return hI(a).ub}}}
function eI(a){a.gr={wj:function(b){var c=iI(a);c.y+=b/100*255;c.y=Math.min(1,Math.max(0,c.y));return gI(c)},Mo:function(b){return a.gr.wj(-b)},Kg:function(b){var c=iI(a);c.y=b;return gI(c)},Hp:function(b){b=gI(b).gr.mh;var c=iI(a);c.y=b;return gI(c)},get mh(){return iI(a).y}}}function gI(a){var b=void 0===b?{}:b;return new bI(void 0===a?"":a,b)}function jI(a,b){a.a=GH(b);a.qn=Math.round(100*a.a)/100;return a}
function hI(a){var b=a.r,c=a.Fa,d=a.b;b/=255;c/=255;d/=255;b=.04045<b?Math.pow((b+.055)/1.055,2.4):b/12.92;c=.04045<c?Math.pow((c+.055)/1.055,2.4):c/12.92;d=.04045<d?Math.pow((d+.055)/1.055,2.4):d/12.92;a=(.4124*b+.3576*c+.1805*d)/.95047;var e=.2126*b+.7152*c+.0722*d;b=(.0193*b+.1192*c+.9505*d)/1.08883;a=.008856<a?Math.pow(a,1/3):7.787*a+16/116;e=.008856<e?Math.pow(e,1/3):7.787*e+16/116;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;return{ub:116*e-16,a:500*(a-e),b:200*(e-b)}}
function fI(a){var b=JH(a.r,a.Fa,a.b);return{If:360*b.If,Xc:b.Xc,ub:b.ub,a:a.a}}function kI(a,b){return LH(a.r,a.Fa,a.b,void 0===b?!1:b)}function lI(a){return{r:Math.round(a.r),Fa:Math.round(a.Fa),b:Math.round(a.b),a:a.a}}function iI(a){var b=a.r,c=a.Fa;a=a.b;return{y:.299*b+.587*c+.114*a,lz:-.169*b-.331*c+.5*a,rz:.5*b-.419*c-.081*a}}function mI(a){var b=Math.round(a.r),c=Math.round(a.Fa),d=Math.round(a.b);return 1===a.a?"rgb("+b+", "+c+", "+d+")":"rgba("+b+", "+c+", "+d+", "+a.qn+")"}
function nI(a){function b(c){return Math.round(100*FH(c,255))}return 1===a.a?"rgb("+b(a.r)+"%, "+b(a.Fa)+"%, "+b(a.b)+"%)":"rgba("+b(a.r)+"%, "+b(a.Fa)+"%, "+b(a.b)+"%, "+a.qn+")"}function oI(a){if(0===a.a)return"transparent";if(1>a.a)return!1;a="#"+LH(a.r,a.Fa,a.b,!1);for(var b=q(Object.entries(NH)),c=b.next();!c.done;c=b.next()){var d=q(c.value);c=d.next().value;d=d.next().value;if(a===d)return c}return!1}
bI.prototype.toString=function(a){var b=!!a;a=null!==a&&void 0!==a?a:this.format;var c=!1,d=1>this.a&&0<=this.a;if(!b&&d&&(a.startsWith("hex")||"name"===a))return"name"===a&&0===this.a?oI(this):mI(this);"rgb"===a&&(c=mI(this));"prgb"===a&&(c=nI(this));if("hex"===a||"hex6"===a)c="#"+kI(this,!1);"hex3"===a&&(c="#"+kI(this,!0));"hex4"===a&&(c="#"+MH(this.r,this.Fa,this.b,this.a,!0));"hex8"===a&&(c="#"+MH(this.r,this.Fa,this.b,this.a,!1));"name"===a&&(c=oI(this));"hsl"===a&&(d=JH(this.r,this.Fa,this.b),b=Math.round(360*d.If),c=Math.round(100*d.Xc),d=Math.round(100*d.ub),c=1===this.a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this.qn+")");if("hsv"===a){c=this.r;d=this.Fa;var e=this.b;c=FH(c,255);d=FH(d,255);e=FH(e,255);a=Math.max(c,d,e);var f=Math.min(c,d,e),g=0;b=a-f;if(a===f)g=0;else{switch(a){case c:g=(d-e)/b+(d<e?6:0);break;case d:g=(e-c)/b+2;break;case e:g=(c-d)/b+4}g/=6}c=Math.round(360*g);b=Math.round(100*(0===a?0:b/a));a=Math.round(100*a);c=1===this.a?"hsv("+c+", "+b+"%, "+
a+"%)":"hsva("+c+", "+b+"%, "+a+"%, "+this.qn+")"}return null!==c&&void 0!==c?c:"#"+kI(this,!1)};bI.prototype.clone=function(){return gI(this.toString())};da.Object.defineProperties(bI.prototype,{Yl:{configurable:!0,enumerable:!0,get:function(){return 1===pI?this.fr:0===pI?this.er:this.gr}},mh:{configurable:!0,enumerable:!0,get:function(){return this.Yl.mh}},iy:{configurable:!0,enumerable:!0,get:function(){return mI(this)===mI(gI("black"))}},vy:{configurable:!0,enumerable:!0,get:function(){return mI(this)===mI(gI("white"))}},iD:{configurable:!0,enumerable:!0,get:function(){return 0===this.a}},Du:{configurable:!0,enumerable:!0,get:function(){var a=1>this.a?[this.r,this.Fa,this.b,this.a]:[this.r,this.Fa,this.b];var b=Math.max.apply(Math,fa(a));a=Math.min.apply(Math,fa(a));return b-a}}});da.Object.defineProperties(bI,{Uw:{configurable:!0,enumerable:!0,get:function(){return gI("#202223")}},Vw:{configurable:!0,enumerable:!0,get:function(){return gI("#DEDEDE")}},BB:{configurable:!0,enumerable:!0,get:function(){return gI("black")}},CF:{configurable:!0,enumerable:!0,get:function(){return gI("white")}},jF:{configurable:!0,enumerable:!0,get:function(){return gI("transparent")}}});var pI=1;var qI=/\s*,\s*/,rI=/(?:[+-]?\d*\.?\d+)(?:%|[a-z]+)?/,tI=sI(["(?:",/#(?:[a-f0-9]{6}|[a-f0-9]{3})/,"|","(?:rgb|hsl)",/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*\)/,"|","(?:rgba|hsla)",/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*,\s*\d*\.?\d+\)/,"|",/[_a-z-][_a-z0-9-]*/,")"],""),uI=sI([tI,"(?:\\s+",rI,"(?:\\s+",rI,")?)?"],""),vI=sI(["(?:",uI,qI,")*",uI],""),wI=["(?:(",sI(["(?:(",/(?:[+-]?\d*\.?\d+)(?:deg|grad|rad|turn)/,")|",/to\s+((?:(?:left|right|top|bottom)(?:\s+(?:top|bottom|left|right))?))/,")"],""),")",qI,")?(",vI,")"],xI=["\\s*(",tI,")","(?:\\s+","(",rI,"))?","(?:",qI,"\\s*)?"];function yI(a,b,c){var d;this.sl=[];this.line=c[1];a=b.exec(a);if(null!==a)for(this.angle=a[1],b=sI(xI,"gi"),c=b.exec(a[4]);null!==c;)this.sl.push({color:gI(c[1]),position:null!==(d=c[2])&&void 0!==d?d:""}),c=b.exec(a[4])}function zI(a){a=void 0===a?"":a;if(0!==a.trim().length&&a.trim().toLowerCase().startsWith("linear-gradient")){var b=sI(wI,"gi"),c=b.exec(a);if(null!==c)return new yI(a,b,c)}}
yI.prototype.iy=function(){return this.sl.every(function(a){return mI(a.color)===mI(gI("black"))})};yI.prototype.vy=function(){return this.sl.every(function(a){return mI(a.color)===mI(gI("white"))})};yI.prototype.toString=function(){var a=[];void 0!==this.angle&&a.push(this.angle);for(var b=q(this.sl),c=b.next();!c.done;c=b.next())c=c.value,a.push((mI(c.color)+" "+c.position).trim());return"linear-gradient("+a.join(", ")+")"};function sI(a,b){return new RegExp(a.reduce(function(c,d){return c+("string"===typeof d?d:d.source)},""),b)};Dj.j(function(a){a="darkmode"===a;for(var b=q(document.querySelectorAll(".dm-adjust")),c=b.next();!c.done;c=b.next())AI(c.value,a)});function AI(a,b){var c,d;a=a.firstElementChild;if(null!==a){var e=a.classList.contains("roomNotice");if(!e||a.innerText.startsWith("Notice:")){var f=b?null!==(c=a.getAttribute("dm-adjust-bg"))&&void 0!==c?c:"#202223":null!==(d=a.getAttribute("dm-init-bg"))&&void 0!==d?d:"white";f.startsWith("linear-gradent")?a.style.backgroundImage=f:a.style.background=f;b=b?a.getAttribute("dm-adjust-fg"):a.getAttribute("dm-init-fg");c=e?a:a.querySelector("span.msg-text");null!==b&&null!==c&&(c.style.color=b)}}}
pI=2;var BI=bI.Uw.mh,CI=bI.Vw.mh;function DI(a){this.background=a.Xv;this.ya=a.lx;EI(this)}function EI(a){var b,c=zI(a.background);a.mx=mI(jI(jI(gI(null!==(b=a.ya)&&void 0!==b?b:bI.Vw),1).Kg(CI),1));void 0!==c?(c.sl.forEach(function(d){var e=lI(d.color);var f=lI(gI(bI.Uw));e=gI({r:f.r+(e.r-f.r)*e.a,Fa:f.Fa+(e.Fa-f.Fa)*e.a,b:f.b+(e.b-f.b)*e.a});d.color=e.Kg(BI)}),a.Br=c.toString()):(b=gI(a.background),a.Br=!b.Qe||b.vy||b.iD||b.iy?"#202223":mI(b.Kg(BI)))}
function FI(a){a.style.textShadow="1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000"}
function GI(a,b,c){b=(null!==b&&void 0!==b?b:"").trim();c=(null!==c&&void 0!==c?c:"").trim();var d=a.firstElementChild,e=d,f=a;if(d.classList.contains("roomNotice")){if(f=d,!e.innerText.startsWith("Notice:"))return}else e=a.querySelector(".msg-text");a=gI(b);e.style.color=10>a.Du?"#D3D3D3":mI(jI(a.Kg(CI),1));0<c.length?(a=zI(c),void 0!==a?(a.sl.forEach(function(g){var h=g.color.a;g.color=10>g.color.Du?bI.jF:jI(g.color.Kg(BI),h)}),f.style.background=a.toString()):(c=gI(c),10>c.Du?(f.style.removeProperty("background"),FI(e)):(a=c.a,c=jI(c.Kg(BI),a),f.style.background=mI(c),1>a&&FI(e)))):FI(e)};var HI,II,JI={};K.j(function(a){HI=a.C.rq;II=a.A;JI.vc=a.C.ta.vc;JI.Ne=a.C.Ne;JI.Rf=!1});Kq.j(function(a){JI.vc=a.vc});function KI(a){a=Dq(a);a=new Gw(a.red,a.green,a.blue);var b=a.brightness();Hw(a,255-b/3);return"rgb("+a.red+", "+a.green+", "+a.blue+")"}function LI(a,b,c,d,e){return 0===a?new fC(b,c,d,e):new ZB(b,c,d,e,!0,!0)}
function MI(a,b,c){var d=NI(a.N.username);d.style.fontSize="";var e=LI(b,a.N,!1,a.Tc);e.element.style.paddingRight="4px";d.appendChild(e.element);var f=Pz(new Oz(JI),a.message);f.style.color=void 0!==a.ef?a.ef:"#FFFFFF";void 0!==a.font&&(e.element.style.fontFamily=a.font,f.style.fontFamily=a.font);f.className="purecolor";f.classList.add("msg-text");d.appendChild(f);ib()?window.setTimeout(function(){twemoji.parse(d,{className:"emojiChat"})},0):twemoji.parse(d,{className:"emojiChat"});GI(d,a.ef,a.backgroundColor);OI(d,b,c);return d}function OI(a,b,c){var d,e=a.querySelectorAll(".username-mention");a=[];var f=rG(),g=f.jf(),h={};e=q(e);for(var m=e.next();!m.done;h={ho:h.ho},m=e.next()){m=m.value;h.ho=m.innerText.replace("@","").toLowerCase();var n=g.find(function(p){return function(A){return A.username===p.ho}}(h));void 0!==n?(n=bC(LI(b,n,!1),c===n.username),null===(d=m.parentElement)||void 0===d?void 0:d.replaceChild(n,m)):a.push(h.ho)}wG(f,a)}
function PI(a,b,c,d){var e=NI();e.style.padding="1px 5px";var f=document.createElement("div");f.style.display="inline-block";void 0!==a.background?(f.style.background=a.background,f.style.color=void 0!==a.ya?a.ya:"#000000",f.style.padding="2px",f.style.textShadow="none"):f.style.color=void 0!==a.ya?a.ya:"#aaaaaa";H(f,"roomNotice");f.style.fontWeight=void 0!==a.weight?a.weight:"normal";e.appendChild(QI(b,f,a.na,void 0!==a.background,c));twemoji.parse(f,{className:"emojiChat"});GI(e,a.ya,a.background);OI(e,b,d);return e}function QI(a,b,c,d,e){c=q(c);for(var f=c.next();!f.done;f=c.next()){var g=document.createElement("div");f=q(f.value);for(var h=f.next();!h.done;h=f.next())switch(h=h.value,h.hc){case 1:g.appendChild(RI(h));break;case 0:g.appendChild(LI(a,h.V,d,"",e).element);break;case 2:g.appendChild(SI(h.message));break;case 3:g.appendChild(TI(Fe,function(){"privatespying"!==II.status&&Iv(II)}));break;default:u("Unknown roomNotice type for: "+h)}b.appendChild(g)}return b}
function TI(a,b){var c=document.createElement("a");H(c,"msg-link");c.style.textDecoration="underline";c.innerText=a;c.onclick=b;c.style.cursor="pointer";return c}function SI(a){var b=document.createElement("a");b.href="/tag/"+a+"/"+HI;H(b,"msg-link");b.style.textDecoration="none";b.innerText="#"+a;return b}function UI(a){var b=NI();b.innerText=a;b.style.color=KI("#aaaaaa");return b}
function VI(a,b){function c(e){var f=document.createElement("span");f.innerText=e;return f}var d=NI();d.style.color=KI("#aaaaaa");d.appendChild(c(b?Qc:Pc));d.appendChild(document.createElement("br"));d.appendChild(c(Rc+" "));b=TI(Sc,function(){});b.href="/supporter/upgrade/";b.target="_blank";b.onclick=function(){C("SupporterPageOpened",{source:"chat"})};d.appendChild(b);d.appendChild(c(" "+Tc(a)+"."));return d}
function NI(a){a=void 0===a?"":a;var b=document.createElement("div");b.style.fontFamily="Tahoma,Arial,Helvetica,sans-serif";b.style.boxSizing="border-box";b.style.paddingTop="3px";b.style.paddingBottom="3px";b.style.paddingLeft="5px";b.style.paddingRight="5px";0<a.length&&b.setAttribute("data-nick",a);return b}
function RI(a){var b=document.createElement("span");!1!==a.eu?b=Pz(new Oz(JI),a.message):b.innerText=a.message;b.style.color=void 0!==a.ya?a.ya:"";b.style.background=void 0!==a.background?a.background:"";b.style.fontWeight=void 0!==a.weight?a.weight:"";return b}function WI(a){var b=NI();return a.WD(b)};function XI(){G.call(this);this.element=N("div",{className:"buttonHolder",style:{position:"absolute",right:"6px"}});YI(this)}r(XI,G);function YI(a){a.element.style.top="calc(50% - "+a.height()/2+"px)"}function ZI(a,b){var c;a.element.appendChild(b);b.style.display="inline-block";b.style.top=(a.height()-b.getBoundingClientRect().height)/2+"px";null===(c=a.parent)||void 0===c?void 0:c.Z();YI(a);return b}
function $I(a,b){var c;a.J(b);b.element.style.display="inline-block";b.element.style.top=(a.height()-b.element.getBoundingClientRect().height)/2+"px";null===(c=a.parent)||void 0===c?void 0:c.Z();YI(a);return b}XI.prototype.height=function(){return this.element.getBoundingClientRect().height};XI.prototype.width=function(){return this.element.getBoundingClientRect().width};function aJ(){var a=document.createElement("div");a.className="msg-list-wrapper-split";a.style.boxSizing="border-box";a.style.overflow="auto";a.style.margin="0 auto 5px";a.style.padding="5px";return a}function bJ(){var a=document.createElement("div");a.style.width="100%";a.className="notice-list-fvm";yp(a,"text");a.style.cursor="text";return a}
function cJ(){var a=document.createElement("div");a.className="msg-list-fvm";H(a,"message-list");a.style.width="100%";yp(a,"text");a.style.cursor="text";a.style.paddingBottom="4px";return a}function dJ(){var a=document.createElement("form");a.style.display="inline-block";a.style.boxSizing="border-box";a.style.margin="0 auto";return a}
function eJ(){var a=document.createElement("div");H(a,"inputDiv");a.style.height="28px";a.style.boxSizing="border-box";a.style.position="absolute";a.style.left="5px";a.style.bottom="3px";a.style.border="1px solid #acacac";a.style.borderRadius="4px 4px 0 0";a.style.fontSize="12px";return a}
function fJ(a,b){a=new AF(a,b);H(a.element,"msg-input");a.element.style.margin="6px";a.element.style.height="16px";a.element.style.fontFamily="Helvetica, Arial, sans-serif";a.element.style.lineHeight="15px";return a}
function gJ(a,b){a=void 0===a?!0:a;b=void 0===b?!1:b;G.call(this);var c=this;this.Vu=a;this.Ll=function(){I(c.element,"disabled");H(c.element,"send-button-gradient")};this.element=document.createElement("span");this.element.innerText=xe;this.element.style.lineHeight="1.2";this.element.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.element.style.fontSize="12px";this.element.style.color="#ffffff";this.element.style.padding="3px 5px";this.element.style.borderRadius="4px";this.element.style.boxSizing="border-box";this.element.style.display="inline-block";H(this.element,"send-button");H(this.element,"disabled");!1===this.Vu&&this.Ll();this.element.classList.add(b?"theatermodeSendButtonPm":"theatermodeSendButtonChat")}r(gJ,G);function hJ(){var a=document.createElement("span");a.textContent="\ud83d\ude01";a.style.cursor="pointer";a.style.marginRight="6px";a.style.fontSize="15px";a.style.lineHeight="15px";twemoji.parse(a,{className:"emojiButton"});return a}
function iJ(a,b){b=void 0===b?!1:b;G.call(this);var c=this;this.Cj=a;this.Ag=b;this.mr=new F("addMessageHtml",{Ed:!1});this.zu=new F("removeMessageHtml",{Ed:!1});this.ra=cJ();this.Vm=bJ();this.Wa=aJ();this.Uf=0;this.I=new Ub;this.bf=OA();this.me=!1;this.qv=function(){c.Pa()};this.element.id="ChatTabContents";this.element.style.position="static";this.element.style.boxSizing="border-box";this.element.style.fontSize="12px";this.element.style.overflow="";this.element.classList.add(b?"TheatermodeChatDivPm":"TheatermodeChatDivChat");this.Wa.appendChild(this.Vm);this.Wa.appendChild(this.ra);b&&this.element.appendChild((new EG(!1)).element);this.element.appendChild(this.Wa);jJ(this);this.I.add(OG.j(function(d){BH(c,d)}));this.I.add(K.j(function(d){c.element.style.fontSize=d.C.ta.fontSize;kJ(c);c.Yg=d.A.username();d.C.B===d.C.userName&&(c.me=!0)}));E(Kq.j(function(d){c.element.style.fontSize=d.fontSize;kJ(c)}),this.I);this.ah=this.J(new lG({va:this.sa,Im:16,ln:207}));this.Ag||(this.fk=this.J(new zG({va:this.sa,Im:16,ln:207})),E(vG.j(function(){OI(c.ra,c.me?0:1,c.Yg)}),this.I));E(Do.j(function(){c.bf=!1;c.uc.Ll()}),this.I);this.ah.element.classList.add(b?"theatermodeEmoticonAutocompleteModalPm":"theatermodeEmoticonAutocompleteModalChat")}r(iJ,G);function jJ(a){var b=dJ(),c=a.Ag?4096:1024;a.ma=eJ();a.element.appendChild(a.ma);a.Ld=new XI;a.ug=ZI(a.Ld,hJ());a.uc=$I(a.Ld,new gJ(a.bf,a.Ag));a.sa=fJ(function(){a.Mu()},c);a.sa.element.classList.add(a.Ag?"theatermodeInputFieldPm":"theatermodeInputFieldChat");a.ug.classList.add(a.Ag?"theatermodeEmojiButtonPm":"theatermodeEmojiButtonChat");b.appendChild(a.sa.element);a.ma.appendChild(b);a.ma.appendChild(a.Ld.element);YI(a.Ld);v("mousedown",a.ma,function(d){if(d.target===a.ma||d.target===b)a.sa.focus(),d.preventDefault()});v("click",a.uc.element,function(){a.sa.submit()});v("click",a.ug,function(){hq.h(a.ug)});v("submit",b,function(d){d.preventDefault();a.sa.submit()});v("scroll",a.Wa,function(){var d=a.Wa.scrollTop;a.Ag&&0===d&&lJ(a)&&mq.h()})}function kJ(a){a.Wa.style.lineHeight=Number(a.element.style.fontSize.slice(0,-2))+7+"pt"}k=iJ.prototype;k.tb=function(){var a,b;Vb(this.I);null===(a=this.ah)||void 0===a?void 0:a.tb();null===(b=this.fk)||void 0===b?void 0:b.tb()};k.Mu=function(){if(!this.bf&&!Bq('You must be logged in to send a message. Click "OK" to login.')&&!this.bf){this.Pa();var a=JF(this.sa);if(""!==a.trim()){var b=ht(a);switch(b.messageType){case 2:this.Cj.bn();break;case 1:this.Cj.an(b.Jp);break;default:this.Cj.Xm(a)}}b=a.match(/@[a-zA-Z0-9_]+/gm);a=rG();if(null!==b){b=q(b);for(var c=b.next();!c.done;c=b.next())c=c.value.replace("@",""),void 0!==a.sm(c)&&C("UserMentionMessage")}this.sa.blur()}};k.G=function(){this.ma.style.width=this.element.clientWidth-10+"px";var a=this.ma.clientWidth-18-this.Ld.width();this.sa.element.style.width=Math.max(0,a)+"px";YI(this.Ld);this.Pa();void 0!==this.ah&&(this.ah.element.style.bottom=this.ma.offsetHeight+2+"px");void 0!==this.fk&&(this.fk.element.style.bottom=this.ma.offsetHeight+2+"px")};function lJ(a){return a.Wa.scrollTop<=a.Wa.scrollHeight-(a.Wa.offsetHeight+20)}k.Pa=function(){this.Wa.scrollTop=this.Wa.scrollHeight-this.Wa.offsetHeight};k.Wg=function(a){this.Vm.appendChild(a)};k.fa=function(a,b,c){var d=this;b=void 0===b?!1:b;c=void 0===c?!1:c;var e=lJ(this);e||a.querySelectorAll("img").forEach(function(g){var h=g.src;g.src="";g.onload=d.qv;g.src=h});this.ra.appendChild(a);var f=this.ra.childElementCount-1E3;for(b?this.ra.prepend(a):this.ra.appendChild(a);0<f;--f)b=this.ra.firstElementChild,null!==b&&this.ra.removeChild(b);e||this.Pa();this.mr.h({pD:function(){return a.cloneNode(!0)}});c&&(this.Uf+=1);return a};k.nq=function(a){this.ra.removeChild(a)};k.rm=function(){return this.Uf};k.Lp=function(a){return this.Uf-a};k.vn=function(a){this.fm=a};k.$o=function(a){for(var b=[],c=q(this.ra.childNodes),d=c.next();!d.done;d=c.next())d=d.value,d.getAttribute("data-nick")===a&&b.push(d);a=q(b);for(b=a.next();!b.done;b=a.next())this.ra.removeChild(b.value)};k.clear=function(){for(this.Uf=0;null!==this.ra.firstChild;)this.ra.removeChild(this.ra.firstChild)};k.jd=function(){this.sa.focus()};k.De=function(){this.sa.blur()};k.yu=function(a){this.zu.h(a)};k.Qd=function(){return document.activeElement===this.sa.element};k.ie=function(){return JF(this.sa)};k.te=function(a){KF(this.sa,a)};k.Si=function(a){GF(this.sa,a,!0)};function mJ(){var a=document.createElement("div");a.className="msg-list-wrapper-fvm";a.style.width="100%";a.style.boxSizing="border-box";a.style.overflow="auto";return a}function nJ(){var a=document.createElement("div");a.style.width="100%";a.className="notice-list-fvm";yp(a,"text");a.style.cursor="text";return a}function oJ(){var a=document.createElement("div");a.className="msg-list-fvm";a.style.width="100%";yp(a,"text");a.style.cursor="text";return a}
function pJ(){var a=document.createElement("form");a.style.display="inline-block";a.style.boxSizing="border-box";return a}function qJ(){var a=document.createElement("div");H(a,"chat-input-div");a.style.height="27px";a.style.boxSizing="border-box";a.style.position="absolute";a.style.bottom="0";a.style.fontSize="12px";return a}
function rJ(a,b){a=new AF(a,b);H(a.element,"chat-input-field");a.element.style.margin="6px";a.element.style.height="15px";a.element.style.fontFamily="Helvetica, Arial, sans-serif";a.element.style.lineHeight="15px";return a}
function sJ(a,b){b=void 0===b?!0:b;G.call(this);var c=this;this.I=a;this.Vu=b;this.element=document.createElement("span");this.element.innerText=xe;this.element.style.fontSize="12px";this.element.style.padding="5px 8px 4px";this.element.style.marginRight="6px";this.element.style.borderRadius="4px";this.element.style.boxSizing="border-box";this.element.style.display="inline-block";this.element.style.position="absolute";this.element.style.bottom="2px";H(this.element,"send-button");H(this.element,"disabled");a=K.j(function(d){c.element.style.right=!0===d.C.Sa?"37px":"0px"});void 0!==this.I&&this.I.add(a);!1===this.Vu&&this.Ll()}r(sJ,G);sJ.prototype.Ll=function(){I(this.element,"disabled");H(this.element,"send-button-gradient")};function tJ(a){yj.h({});a.stopPropagation();a.preventDefault()}
function uJ(a){var b=document.createElement("span");H(b,"tip-button");b.innerText=ye;b.style.fontSize="12px";b.style.padding="5px 8px 4px";b.style.marginRight="2px";H(b,"tip-button-gradient");b.style.borderRadius="4px";b.style.boxSizing="border-box";b.style.cursor="pointer";b.style.display="inline-block";b.style.position="absolute";b.style.right="2px";b.style.bottom="2px";v("mousedown",b,function(d){d.stopPropagation()});v("click",b,tJ);var c=K.j(function(d){b.style.display=!0===d.C.Sa?"inline-block":"none"});void 0!==a&&a.add(c);return b}function vJ(){var a=document.createElement("span");a.textContent="\ud83d\ude01";a.style.cursor="pointer";a.style.marginRight="6px";a.style.fontSize="15px";a.style.position="absolute";a.style.bottom="6px";twemoji.parse(a,{className:"emojiButton"});return a}
function wJ(a,b){b=void 0===b?!1:b;G.call(this);var c=this;this.Cj=a;this.Ag=b;this.mr=new F("addMessageHtml",{Ed:!1});this.zu=new F("removeMessageHtml",{Ed:!1});this.ra=oJ();this.Vm=nJ();this.Wa=mJ();this.wx=new F("formSubmitted");this.Uf=0;this.qs=new Map;this.I=new Ub;this.bf=OA();this.qv=function(){c.Pa()};this.element.id="FVChatTabContents";this.element.style.fontSize="12px";this.element.style.overflow="";this.element.classList.add(b?"FullvideoChatDivPm":"FullvideoChatDivChat");H(this.element,"hasDarkBackground");this.Wa.appendChild(this.Vm);this.Wa.appendChild(this.ra);this.Ag&&this.element.appendChild((new EG(!0)).element);this.element.appendChild(this.Wa);var d=pJ();this.ma=qJ();this.sa=rJ(function(){c.Mu()},b?4096:1024);this.sa.element.classList.add(b?"fullvideoInputFieldPm":"fullvideoInputFieldChat");this.ug=vJ();this.ug.classList.add(b?"fullvideoEmojiButtonPm":"fullvideoEmojiButtonChat");this.aA=new sJ(this.I,this.bf);this.uc=this.aA.element;this.uc.classList.add(b?"fullvideoSendButtonPm":"fullvideoSendButtonChat");this.Yj=uJ(this.I);d.appendChild(this.sa.element);this.ma.appendChild(d);this.ma.appendChild(this.ug);this.ma.appendChild(this.uc);this.ug.onload=function(){c.Z()};var e=!1;v("mousedown",this.ma,function(f){if(f.target===c.ma||f.target===d)c.sa.focus(),f.preventDefault()});v("submit",d,function(f){f.preventDefault();c.sa.submit()});v("click",this.uc,function(f){f.stopPropagation();c.sa.submit()});v("click",this.ug,function(f){f.stopPropagation();hq.h(c.ug)});v("scroll",this.Wa,function(){var f=c.Wa.scrollTop;b&&0===f&&lJ(c)&&mq.h()});this.ma.appendChild(this.Yj);this.element.appendChild(this.ma);this.I.add(OG.j(function(f){BH(c,f)}));this.I.add(K.j(function(f){c.element.style.fontSize=f.C.ta.fontSize;c.Yg=f.A.username();f.C.B===f.C.userName&&(e=!0);c.Yj.style.display=!0===f.C.Sa?"inline-block":"none";kJ(c)}));this.I.add(Kq.j(function(f){c.element.style.fontSize=f.fontSize;kJ(c)}));this.ah=this.J(new lG({va:this.sa,Im:10,ln:167}));this.Ag||(this.fk=this.J(new zG({va:this.sa,Im:10,ln:167})),E(vG.j(function(){OI(c.ra,e?0:1,c.Yg)}),this.I));this.ah.element.classList.add(b?"fullvideoEmoticonAutocompleteModalPm":"fullvideoEmoticonAutocompleteModalChat");E(Do.j(function(){c.aA.Ll();c.bf=!1}),this.I)}r(wJ,G);k=wJ.prototype;k.tb=function(){var a,b;Vb(this.I);null===(a=this.ah)||void 0===a?void 0:a.tb();null===(b=this.fk)||void 0===b?void 0:b.tb()};k.Mu=function(){if(!this.bf&&!Bq('You must be logged in to send a message. Click "OK" to login.')&&!this.bf){this.Pa();var a=JF(this.sa);if(""!==a.trim()){var b=ht(a);switch(b.messageType){case 2:this.Cj.bn();break;case 1:this.Cj.an(b.Jp);break;default:this.Cj.Xm(a)}}var c=a.match(/@[a-zA-Z0-9_]+/gm);b=rG();if(null!==c){var d={};c=q(c);for(var e=c.next();!e.done;d={dr:d.dr},e=c.next())d.dr=e.value,void 0!==b.jf().find(function(f){return function(g){return g.username===f.dr.replace("@","")}}(d))&&C("UserMentionMessage")}this.wx.h(a)}};k.G=function(){var a=lJ(this);xJ(this);this.ma.style.width=this.element.clientWidth+"px";var b=this.ma.clientWidth-18-6-Math.ceil(this.Yj.offsetWidth+this.uc.offsetWidth+this.ug.offsetWidth)-4;b=Math.max(0,b);this.sa.element.style.width=b+"px";a||this.Pa();void 0!==this.ah&&(this.ah.element.style.bottom=this.ma.offsetHeight+"px");void 0!==this.fk&&(this.fk.element.style.bottom=this.ma.offsetHeight+"px")};function xJ(a){var b=Math.max(0,a.element.clientHeight-27);a.Ag&&(b-=32);a.Wa.style.height=b+"px"}k.Pa=function(){var a=this;this.Wa.scrollTop=this.Wa.scrollHeight;this.Wa.scrollLeft=0;window.setTimeout(function(){lJ(a)&&a.Pa()},0)};k.Wg=function(a){this.Vm.appendChild(a)};k.fa=function(a,b,c,d){var e=this;c=void 0===c?!1:c;d=void 0===d?!1:d;var f=this.Wa.scrollTop,g=lJ(this);g||a.querySelectorAll("img").forEach(function(h){var m=h.src;h.src="";h.onload=e.qv;h.src=m});c?this.ra.prepend(a):this.ra.appendChild(a);if(g)xJ(this),this.Wa.scrollTop=f;else{for(c=this.ra.childElementCount-1E3;0<c;--c)f=this.ra.firstElementChild,null!==f&&this.ra.removeChild(f);xJ(this);this.Pa()}void 0!==b&&this.qs.set(a,b);this.mr.h({pD:function(){return void 0!==b?b():a.cloneNode(!0)}});d&&(this.Uf+=1);return a};k.nq=function(a){this.qs.delete(a);this.ra.removeChild(a)};k.rm=function(){return this.Uf};k.Lp=function(a){return this.Uf-a};k.vn=function(a){this.fm=a};k.D=function(){this.ra.style.opacity="0"};k.show=function(){this.ra.style.opacity="1"};k.clear=function(){for(this.Uf=0;null!==this.ra.firstChild;)this.ra.removeChild(this.ra.firstChild);this.qs.clear()};k.jd=function(){this.sa.focus()};k.De=function(){this.sa.blur()};k.yu=function(a){this.zu.h(a)};k.Qd=function(){return document.activeElement===this.sa.element};k.ie=function(){return JF(this.sa)};k.te=function(a){KF(this.sa,a)};k.Si=function(a){GF(this.sa,a,!0)};var yJ=new F("userCountUpdate");function zJ(){function a(){if(void 0!==b.parent&&!b.ag){var d=b.parent;d.rb(d.children()[0])}}Ol.call(this);var b=this;this.Fh=0;this.Cb=[];this.ag=this.me=!1;this.element.id="UserListTab";this.element.style.overflow="visible";this.element.style.fontFamily="Tahoma, Helvetica, Arial, sans-serif";this.element.style.boxSizing="border-box";this.element.style.position="relative";this.bd=document.createElement("div");this.bd.style.width="100%";this.bd.style.overflow="auto";this.bd.style.padding="6px";this.bd.style.boxSizing="border-box";this.element.appendChild(this.bd);this.ma=eJ();var c=dJ();this.Ka=fJ(function(){},4096);v("click",this.Ka.element,a);v("focus",this.Ka.element,a);this.Ld=new XI;this.uc=ZI(this.Ld,(new gJ(!1)).element);this.uc.style.marginLeft="6px";this.uc.onclick=a;c.appendChild(this.Ka.element);this.ma.appendChild(c);this.ma.appendChild(this.Ld.element);this.element.appendChild(this.ma);this.Yi();K.j(function(d){b.me=d.C.userName===d.C.B;b.Fe=d.A;b.Fe.event.kc.j(function(e){"privatewatching"!==e.Dd&&"privatewatching"!==e.Ra||window.setTimeout(function(){b.refresh(!1)},2E3)});b.Fe.event.Pz.j(function(e){b.Fh=e;yJ.h(b.Fh)});void 0!==d.C.Rp&&b.clear(d.C.Rp);b.uA=d.C.ta.vA});Kq.j(function(d){b.uA=d.vA})}r(zJ,Ol);k=zJ.prototype;k.Mj=function(){for(;null!==this.bd.firstChild;)this.bd.removeChild(this.bd.firstChild)};k.Yi=function(){var a=document.createElement("div");H(a,"defaultTooltipColor");a.innerText=lf+"...";a.style.margin="8px 0";this.bd.style.fontSize="12px";this.bd.appendChild(a)};k.ds=function(){var a=this,b=document.createElement("div");b.style.margin="6px";b.style.cssFloat="right";var c=document.createElement("span");c.innerText=mf;c.style.cursor="pointer";H(c,"refreshUsersLink");c.onmouseenter=function(){c.style.textDecoration="underline"};c.onmouseleave=function(){c.style.textDecoration="none"};v("click",c,function(d){a.wu();d.preventDefault()});b.appendChild(c);this.bd.appendChild(b)};k.wu=function(){this.Mj();this.Yi();this.refresh(!1)};k.clear=function(a){this.Fh=a;yJ.h(this.Fh);this.Mj();this.Yi();this.G()};k.refresh=function(a){var b=this;a=void 0===a?!0:a;void 0!==this.Fe&&yu(this.Fe,this.uA).then(function(c){b.Fh=c.Rn;yJ.h(c.Rn);if(!a){b.Mj();b.ds();b.Cb=c.jf;for(var d=q(b.Cb),e=d.next();!e.done;e=d.next()){e=e.value;var f=document.createElement("div");pk(f,{width:"auto",maxWidth:"100%",margin:"2px 0"});f.appendChild((b.me?new fC(e,!0,"",void 0,!1):new ZB(e,!0,"",void 0,!1)).element);b.bd.appendChild(f)}d=document.createElement("div");H(d,"defaultTooltipColor");d.innerText="+"+c.kk+" anonymous user"+
(1===c.kk?"":"s");pk(d,{width:"100%",margin:"2px 0",whiteSpace:"nowrap",cssFloat:"left"});b.bd.appendChild(d);b.G()}}).catch(function(c){u("Error retrieving user list: "+c)})};k.G=function(){this.ma.style.width=this.element.clientWidth-10+"px";YI(this.Ld);this.Ka.element.style.width=Math.max(0,this.ma.clientWidth-18-Math.ceil(this.uc.offsetWidth)-4)+"px";this.bd.style.height=this.element.clientHeight-28-4+1+"px"};k.vg=function(){return Ae+" ("+this.Fh+")"};k.gh=function(){return"users-tab-default"};k.jd=function(){this.Ka.focus()};k.De=function(){this.Ka.blur()};k.Qd=function(){return document.activeElement===this.Ka.element};k.Pa=function(){this.bd.scrollTop=this.bd.scrollHeight-this.bd.offsetHeight};k.ie=function(){return JF(this.Ka)};k.te=function(a){var b=this;this.ag=!0;KF(this.Ka,a);this.Ka.blur();window.setTimeout(function(){b.ag=!1},100)};k.fh=function(){};k.Xd=function(a){Ol.prototype.Xd.call(this,a);C("FocusTab",{location:"userlist"});this.refresh(!1)};function AJ(a,b){G.call(this);var c=this;this.Sh=new F("forceHlsPlayerEvent");this.ml=new F("setPlayerComponentMutedEvents");this.Su=new F("setPlayerComponentVolumeMutedEvents");this.eq=new F("playerComponentEnterFullScreenModeEvent");this.fq=new F("playerComponentReadjustForceHlsOverlayOrderEvent");this.gq=new F("playerComponentReadjustPlayButtonContainerEvent");this.Cq=new F("showJpegPlayerComponentImage");this.oi=new F("requestVideoQualityButtonVisibilityChange");this.xc=new F("videoOfflineChange");this.state={volume:60,T:!0};this.rh=this.Pc=this.nm=this.om=this.visible=this.xm=this.Jd=this.le=this.Sa=!1;this.Cv(a);a=wb().disable_sound;void 0!==a&&"true"===a.toLowerCase()||"1"===a?(this.state.volume=0,this.state.T=!0):t()&&(a=window.localStorage.getItem("videoControls"),null!==a?(a=JSON.parse(a),this.state={volume:a.volume,T:this.Gj?a.isMuted:!0}):this.state.T=!this.Gj);Nb=this.state.T?0:this.state.volume;this.Nl=window.navigator.userAgent;this.element.style.overflow="";this.element.style.bottom="0";this.element.style.left="0";this.element.style.height="26px";this.element.style.background="linear-gradient(180deg, rgba(50, 50, 50, 0) 0%, rgba(50, 50, 50, 0.4) 66%, rgba(50, 50, 50, 0.7) 100%)";this.ms();this.element.appendChild(this.Ea);this.ns();this.element.appendChild(this.Ta.element);this.ls(b);this.element.appendChild(this.Ba);this.Ac=new rl;this.Ac.element.style.position="absolute";this.Ac.element.style.bottom="0";this.Ac.element.style.right="0";this.Ac.element.style.textAlign="right";this.J(this.Ac);this.bs();this.Ac.element.appendChild(this.qd);this.Fd=BJ(uh);var d=!1;tw(this.Fd,this.xc)&&(this.Ac.element.appendChild(this.Fd),d=!0);this.fs();this.Ac.element.appendChild(this.X);this.Sr();this.Ac.element.appendChild(this.Kc);this.js();this.Ac.element.appendChild(this.ud);this.$r();this.Ac.element.appendChild(this.pe);this.hs();this.Ac.element.appendChild(this.Lb);this.Vr();this.Ac.element.appendChild(this.ua);K.j(function(e){var f,g;void 0===e.C.Sa?u("Dossier is missing context."):(e.C.Sa?(c.rh=!0===e.C.ae,c.bg(e.A.status),e.A.event.kc.j(function(h){c.Bv(h.Ra);c.bg(h.Ra);"privatespying"===h.Ra&&Bj.h(void 0);c.Bn(h.Ra)}),e.A.event.zi.j(function(h){c.rh=h.ae&&!0===e.C.Sa;c.bg(e.A.status)})):(c.rh=!1,c.bg(e.A.status)),null===(f=c.eb)||void 0===f?void 0:f.show(),mb()&&!kb()&&!$a()&&d&&vo&&void 0===c.eb&&(c.eb=Pk(c.Fd,{width:250,content:mj,wm:!1,de:0,Df:"135px",wg:function(h){return CJ()?0:.45*h.getBoundingClientRect().width},Sg:function(h){return CJ()?.18*h.getBoundingClientRect().height:3},Bq:["fullvideo","fullscreen","theater"]},null!==(g=c.Oa.parentElement)&&void 0!==g?g:void 0),c.rc&&void 0!==c.eb&&(c.eb.element.style.zIndex="100"),v("click",c.Fd,function(){var h;null===(h=c.eb)||void 0===h?void 0:Mk(h)})),c.Mc=e,c.Fj&&!c.nm&&(c.nm=!0,c.Ur(),c.Bn(e.C.Ab)),c.Sa=e.C.Sa,c.qt="offline"===e.C.Ab,c.ze(),c.rc||GE(c),c.Rg(),c.Yc())});bk.vf.j(function(e){var f,g;"theater"===O()?c.Jd=!0:"split"===O()&&(c.Jd=!1);"fullscreen"===e.Jo?null===(f=c.eb)||void 0===f?void 0:Nk(f,1):null===(g=c.eb)||void 0===g?void 0:Nk(g,0);c.Rg()});Bk.j(function(e){c.visible&&e||c.Yc()});gq.j(function(){c.ii()});Jq.j(function(){oc()&&HE(c)});Ev.j(function(){c.Cd()},!1);v(mc(),document,function(){var e=O();"theater"===e?c.Jd=!0:"split"===e&&(c.Jd=!1);oc()&&lc()===c.Ns?ak("fullscreen"):oc()||ak(c.Jd?"theater":"split")});this.element.onmousemove=function(){c.Yc()};v("click",this.element,function(e){e.stopPropagation()});this.D()}r(AJ,G);k=AJ.prototype;k.Cv=function(a){this.Oa=a.element;this.Gj=a.O.Kn;a.O instanceof iB?(this.rc=!0,this.Fj=a.O.rj):this.Fj=this.rc=!1;this.Ig=a.O.Ai;this.iu=a.ci};k.ls=function(a){function b(d){d=d.target;c.Ba.contains(d)||a.element.contains(d)||(c.oi.h(!1),x("touchend",document,b))}var c=this;this.Ba=BJ("");this.Ba.style.position="absolute";this.Ba.style.bottom="0";this.Ba.style.left="103px";this.Ba.onmouseover=function(){c.oi.h(!0);v("touchend",document,b)};this.Ba.onmouseout=function(d){null!==d.relatedTarget&&(d=d.relatedTarget.parentNode,null===d||d.isEqualNode(a.element)||c.oi.h(!1))}};k.ns=function(){function a(c){c!==b.state.volume&&(b.state.volume=c,b.state.T=0===b.state.volume,IE(b),b.ze(),b.Ib())}var b=this;this.Ta=new pq({Ob:12,sf:50});this.Ta.element.style.margin="6px 5px 0 0";this.Ta.element.style.position="absolute";this.Ta.element.style.bottom="7px";this.Ta.element.style.left="36px";this.Ta.Zn.j(function(c){b.Pc&&void 0!==b.Mc&&(b.Cd(!1),C("ForceHLS"),b.Sh.h({gl:b.Mc}),b.ye(),Hq.h(void 0));b.ml.h(!1);a(c)});this.Ta.$n.j(a);this.Ta.Yn.j(function(c){a(c);0===b.state.volume&&b.ml.h(!0);C("ChangeVolume",{volume:c});b.Ib()})};k.ms=function(){var a=this;this.Ea=document.createElement("img");this.Ea.style.height="24px";this.Ea.style.width="24px";this.Ea.style.margin="0 6px 2px 6px";this.Ea.style.cursor="pointer";this.Ea.style.position="absolute";this.Ea.style.bottom="0";this.Ea.onclick=function(){!a.rc||-1<a.Nl.indexOf("MSIE 10.0")||-1<a.Nl.indexOf("MSIE 9.0")?(C("ToggleMute",{newState:!a.state.T}),C("ChangeVolume",{volume:a.state.volume}),a.state.T?a.ye():a.ii(),a.Yc()):void 0===a.Mc?u("unexpected switch to hls",{},"VIDEO_"):(a.Pc&&a.Cd(!1),C("ForceHLS"),a.Sh.h({gl:a.Mc}),a.ye(),Hq.h(void 0))}};k.bs=function(){this.qd=BJ(Nd);this.qd.onclick=function(){Bj.h(void 0)}};k.fs=function(){this.X=BJ(td);this.X.id="send-tip";this.X.onclick=function(){yj.h({})}};k.Sr=function(){this.Kc=BJ("Chat");this.Kc.id="chat-btn";this.Kc.style.display="none";this.Kc.onclick=function(){Cj.h(void 0)}};k.js=function(){var a=this;this.ud=BJ(ze+" (0)");this.ud.id="user-list";this.ud.onclick=function(){xj.h(void 0)};yJ.j(function(b){a.ud.innerText=ze+" ("+b+")"})};k.$r=function(){this.pe=BJ("More Rooms");this.pe.id="more-rooms";this.pe.onclick=function(){fq.h(void 0)}};k.hs=function(){var a=this;this.Jd=!1;this.Lb=BJ("Theater Mode");this.Lb.onclick=function(){var b="split";"split"===O()&&(b="theater");C("ChangeVideoMode",{videoMode:b});ak(b);ck();a.Rg()}};k.Vr=function(){var a=this;this.le=kc();document[nc()]=function(){oc()||(a.le=!1,a.ua.style.display="none",J("Full screen is unavailable."))};this.ua=BJ("Full Screen");this.ua.id="full-screen";kc()||(this.ua.style.display="none");this.ua.onclick=function(){a.xl()}};k.bg=function(a){var b=["privaterequesting","privatespying","privatewatching"];if(!this.rh&&-1===b.indexOf(a)||!this.Ig)this.qd.style.display="none";else switch(a){case "unknown":case "offline":case "notconnected":case "away":case "hidden":case "passwordprotected":case "privatenotwatching":this.qd.style.display="none";break;default:this.qd.style.display=this.rc&&"split"===O()?"none":"inline-block"}};k.Rg=function(){this.X.style.display=this.Sa?"inline-block":"none";this.pe.style.display="none";this.ud.style.display="inline-block";this.Lb.innerText=Mf;this.Lb.style.display="inline-block";this.ua.innerText=Nf;this.Kc.style.display="inline";this.Fd.style.display="block";void 0!==this.Mc&&this.bg(this.Mc.A.status);this.le&&(this.ua.style.display="inline-block");switch(O()){case "split":this.X.style.display="none";this.ud.style.display="none";this.Kc.style.display="none";this.qd.style.display="none";this.Fd.style.display="none";this.Lb.style.display="none";this.ua.style.display=this.rc?"inline":"none";break;case "videoonly":this.X.style.display="none";this.ud.style.display="none";this.Kc.style.display="none";this.qd.style.display="none";this.Fd.style.display="none";this.Lb.style.display="none";this.ua.style.display="none";break;case "theater":this.Lb.innerText=Pf;this.Lb.id="default-view";this.pe.style.display="inline-block";break;case "fullscreen":this.pe.style.display="inline-block";this.Lb.style.display="none";this.ua.innerText=Of;break;default:u("Unexpected VideoMode: "+O(),{},"VIDEO_")}this.qt&&(this.X.style.display="none",this.ud.style.display="none",this.Kc.style.display="none");this.Yc()};k.ze=function(){var a=this.Ta.Le();0===a||this.state.T?(this.Ea.src="https://static-assets.highwebmedia.com/tsdefaultassets/volume-mute.svg",this.Ea.id="volume-mute"):33>a?(this.Ea.src="https://static-assets.highwebmedia.com/tsdefaultassets/volume-low.svg",this.Ea.id="volume-low"):66>a?(this.Ea.src="https://static-assets.highwebmedia.com/tsdefaultassets/volume-medium.svg",this.Ea.id="volume-medium"):(this.Ea.src="https://static-assets.highwebmedia.com/tsdefaultassets/volume-high.svg",this.Ea.id="volume-high")};k.Ib=function(){t()&&!this.iu&&window.localStorage.setItem("videoControls",JSON.stringify({volume:this.state.volume,isMuted:this.state.T}));Nb=this.state.T?0:this.state.volume};k.update=function(){GE(this);this.Ib()};k.ii=function(){this.gg(!0);this.update()};k.ye=function(){this.gg(!1);0===this.state.volume&&(this.state.volume=60);this.update()};k.toggle=function(){this.visible?this.Lf():this.Yc()};k.Yc=function(){var a=this,b;this.visible=!0;if(this.rc||"split"!==O()){DJ(this);xp(this.element,"100ms");this.element.style.opacity="1";void 0!==this.ep&&clearTimeout(this.ep);void 0!==this.ki&&clearTimeout(this.ki);var c=this.xm?2E3:5E3;this.ep=window.setTimeout(function(){a.ep=void 0;a.ki=window.setTimeout(function(){a.ki=void 0;a.Lf()},c-100)},100);null===(b=this.eb)||void 0===b?void 0:b.show()}};function CJ(){return"theater"===O()&&750>ek()}
function DJ(a){var b,c,d=CJ();d?(a.Ac.element.style.width="100px",a.Ac.element.style.marginBottom="15px",null===(b=a.eb)||void 0===b?void 0:Nk(b,3,"12px")):(a.Ac.element.style.width="",a.Ac.element.style.marginBottom="",b="fullscreen"===O()?1:0,null===(c=a.eb)||void 0===c?void 0:Nk(c,b,"135px"));a=q(a.Ac.element.children);for(c=a.next();!c.done;c=a.next())c=c.value,c instanceof HTMLElement&&"none"!==c.style.display&&(c.style.display=d?"block":"inline-block")}
k.Lf=function(){var a;this.Pc||void 0!==this.ep||(this.visible=!1,this.xm=!0,xp(this.element,"500ms"),this.element.style.opacity="0",null===(a=this.eb)||void 0===a?void 0:a.D())};k.show=function(){this.element.style.visibility="";this.Yc();this.element.style.zIndex=this.Pc?"10":"2"};k.D=function(){this.element.style.visibility="hidden"};k.Ii=function(a){this.state.volume=a;sq(this.Ta,this.state.T?0:this.state.volume);this.ze()};k.gg=function(a){this.state.T=a;sq(this.Ta,this.state.T?0:this.state.volume);this.ze()};k.Av=function(a){this.Ii(a);this.Ib()};k.zv=function(a){this.gg(a);this.Ib()};k.ac=function(){return 0};k.tp=function(){return!1};k.xl=function(){this.Pc&&this.Cd();oc()?jc():this.le&&(this.Jd="theater"===O(),this.eq.h(void 0));this.Rg()};k.Bv=function(a){switch(a){case "unknown":case "offline":case "notconnected":case "away":case "privatenotwatching":case "hidden":case "passwordprotected":if("fullscreen"===O()){this.ua.style.display=this.le?"inline":"none";break}oc()&&jc();this.ua.style.display="none";break;case "public":case "privatespying":case "privatewatching":case "privaterequesting":this.ua.style.display=this.le?"inline-block":"none";break;default:u("unexpected room status",a,"")}};k.Cd=function(a){a=void 0===a?!0:a;this.Pc&&void 0!==this.Mc&&(void 0!==this.Ja&&null!==this.Ja.parentElement&&(this.Ja.parentElement.removeChild(this.Ja),this.Ja=void 0),void 0!==this.pa&&null!==this.pa.parentElement&&(this.pa.parentElement.removeChild(this.pa),this.pa=void 0),this.Pc=!1,this.Lf(),this.D(),this.Ba.innerText="",this.Ba.style.display="none",!this.om&&a&&(this.om=!0,C("ForceHLS"),this.Sh.h({gl:this.Mc,ye:!1}),Hq.h(void 0)),this.element.style.zIndex="2")};k.Wr=function(){var a=this;this.Ja=document.createElement("div");this.Ja.style.width="100%";this.Ja.style.height="100%";this.Ja.style.position="absolute";this.Ja.style.top="0";this.Ja.style.left="0";this.Ja.style.cursor="pointer";v("click",this.Ja,function(){a.Cd()});v("click",this.element,function(){a.Cd()});this.fq.h(this.Ja)};k.Bn=function(a){void 0!==this.pa&&void 0!==this.Ja&&("public"===a?(this.pa.style.display="",this.Ja.style.display=""):(this.pa.style.display="none",this.Ja.style.display="none"))};k.Ur=function(){var a=this;if(this.rc){this.Pc=!0;this.pa=document.createElement("div");var b=this.Oa.getBoundingClientRect(),c=document.createElement("img");c.src="https://static-assets.highwebmedia.com/tsdefaultassets/play-inactive.svg";c.style.width="60px";c.style.height="60px";c.style.position="relative";c.style.top="40px";c.style.left="45px";c.style.cursor="pointer";v("click",c,function(){a.Cd()});this.pa.style.position="absolute";this.pa.style.top=b.height/2-70+"px";this.pa.style.left=b.width/2-70+"px";this.pa.style.cursor="pointer";this.pa.style.width="140px";this.pa.style.height="140px";this.pa.style.borderRadius="50%";this.pa.style.backgroundColor="rgba(0,0,0,0.25)";this.pa.appendChild(c);this.gq.h(this.pa);this.Cq.h(void 0);this.Wr();this.G()}};k.G=function(){if(void 0!==this.pa){var a=this.Oa.getBoundingClientRect();this.pa.style.top=a.height/2-70+"px";this.pa.style.left=a.width/2-70+"px"}};k.Vy=function(a){this.Gj=a};k.Wy=function(a){this.Ig=a};k.Vt=function(a){this.rc=a};k.Ut=function(a){this.Fj=a};k.Xy=function(a){this.xc.h(a)};k.yj=function(a){this.Ba.innerText=a};k.hA=function(a){this.Ba.style.display=a?"":"none"};k.gA=function(){};k.Dx=function(){return this.Ba.offsetLeft};function BJ(a){var b=document.createElement("span");b.innerText=a;b.style.color="#ffffff";b.style.fontSize="13px";b.style.padding="5px";b.style.marginRight="4px";b.style.cursor="pointer";b.style.display="inline-block";return b};function EJ(a){L.call(this);var b=this;this.oa=a;this.Wt=new F("notifyQualityLevelLabelChanged");this.yj=new F("notifyQualityLevelChanged");this.Bu=new F("requestVideoQualityButtonVisibilityChange");this.Lz=new F("requestVideoQualityModalReposition");this.Xt=new F("notifyVisibilityChanged");this.Jj=new Map;this.element.style.visibility="hidden";this.element.style.width="auto";this.element.style.minWidth="100px";this.element.style.height="auto";this.element.style.backgroundColor="black";this.element.style.position="absolute";this.element.style.borderRadius="2px";this.element.style.backgroundColor="rgba(50, 50, 50, 0.7)";this.oa.O instanceof pB&&v("visibilitychange",document,function(){b.oa.wF||("visible"===document.visibilityState?(void 0!==b.lu&&(b.yj.h(b.lu),b.lu=void 0),clearTimeout(b.zF)):"hidden"===document.visibilityState&&FJ(b))});this.element.onmouseleave=function(){b.D()}}r(EJ,L);k=EJ.prototype;k.G=function(){this.Lz.h(void 0)};k.clear=function(){for(;null!==this.element.firstChild;)this.element.removeChild(this.element.firstChild)};k.cs=function(a){var b=this,c=document.createElement("div");c.innerText=a.label;c.style.color="#ffffff";c.style.fontSize="13px";c.style.padding="5px";c.style.marginRight="6px";c.style.cursor="pointer";c.style.width="100%";a.ak?(c.style.backgroundColor="#ffffff",c.style.color="#333333"):(c.onclick=function(){C("clickMenuLink:QualitySelect-"+a.label);b.af(a.label);b.Wt.h(a.label)},c.onmouseenter=function(){c.style.backgroundColor="rgba(150, 150, 150, 0.3)"},c.onmouseleave=function(){c.style.backgroundColor=""});return c};k.af=function(a){a=this.Jj.get(a);void 0===a?u("Undefined quality level key",{},"VIDEO_"):(this.yj.h(a),this.ps=a)};function FJ(a){a.zF=window.setTimeout(function(){a.lu=a.ps;a.yj.h(0);a.ps=0},3E5)}k.show=function(){this.Xt.h(!0);this.Bb();this.element.style.visibility="";this.G()};k.D=function(){this.Xt.h(!1);this.Va();this.element.style.visibility="hidden"};function GJ(a){xB.call(this,a,new EB(!1),{zD:!0});var b=this;this.Bg=!0;this.wF=this.ci=!1;pk(this.element,{position:"relative",backgroundColor:"#000000",overflow:"hidden"});this.O.element.style.position="relative";this.Db.style.position="absolute";this.Db.style.width="88px";this.Db.style.height="26px";this.Db.style.top="6px";this.Db.style.right="6px";this.Db.style.visibility="hidden";eb()&&(this.Db.style.opacity="0.5");this.Hb.Sk.style.visibility="hidden";this.Hb.Ig=this.O.Ai;this.lf=new EJ(this);this.Qa=(this.sF=(new Qb("VideoControlsIcons")).active)?new FE(this,this.lf):new AJ(this,this.lf);HJ(this);IJ(this);this.Hl();this.O.element.appendChild(this.Db);Xb(this,this.Hb);this.J(this.lf);this.J(this.Qa);this.Qa.show();this.element.onmousemove=function(){"split"===O()&&b.O.pl()&&b.Qa.show()}}r(GJ,xB);function JJ(a,b){a.J(b);b.element.style.zIndex="2"}
function IJ(a){a.Qa.Sh.j(function(b){var c=b.ye;BB(a,b.gl,null!==c&&void 0!==c?c:!0)});a.Qa.ml.j(function(b){a.O.$f(b)});a.Qa.eq.j(function(){a.O.dj()});a.Qa.Su.j(function(b){a.O.nl(b.volume,b.T)});a.Qa.fq.j(function(b){a.O.element.insertBefore(b,a.O.element.firstChild)});a.Qa.gq.j(function(b){a.element.insertBefore(b,a.Qa.element)});a.Qa.Cq.j(function(){a.O instanceof iB&&(a.O.Vc.style.visibility="visible")});a.Qa.oi.j(function(b){b?a.lf.show():a.lf.D()})}
function HJ(a){a.lf.yj.j(function(b){a.O.af(b)});a.lf.Wt.j(function(b){a.Qa.yj(b)});a.lf.Bu.j(function(b){a.Qa.hA(b)});a.lf.Lz.j(function(){var b=a.lf,c=a.Qa.element.offsetHeight;b.element.style.left=a.O.element.offsetLeft+a.Qa.Dx()+"px";b.element.style.bottom=c+"px"});a.lf.Xt.j(function(b){a.Qa.gA(b)})}k=GJ.prototype;k.Cr=function(){var a=this,b,c;xB.prototype.Cr.call(this);this.O.Xe.j(function(d){d?a.Qa.show():a.Qa.D()});null===(b=this.O.un)||void 0===b?void 0:b.j(function(d){var e=d.volume;d.save?a.Qa.Av(e):a.Qa.Ii(e)});null===(c=this.O.Sj)||void 0===c?void 0:c.j(function(d){var e=d.T;d.save?a.Qa.zv(e):a.Qa.gg(e)});this.O.xc.j(function(d){a.Qa.Xy(d)});this.O.Ve.j(function(d){var e=a.lf;e.Jj.clear();e.clear();for(var f=q(d),g=f.next();!g.done;g=f.next())g=g.value,e.Jj.set(g.label,g.value),e.element.appendChild(e.cs(g)),g.ak&&(e.Wt.h(g.label),e.ps=g.value);0===d.length?e.Bu.h(!1):e.Bu.h(!0)})};k.AA=function(){this.O.element.style.position="relative"};k.G=function(){function a(){var d=b.O.ac();b.ci&&"split"===c&&b.O instanceof $r&&(d=32);if("theater"===c)b.ci&&(b.O.element.style.height="100%",b.O.element.style.width="100%");else if("videoonly"===c){d=document.documentElement.clientHeight;var e=document.documentElement.clientWidth;b.element.style.height=(b.Bg?d:.75*e)+"px";b.element.style.width=(b.Bg?d/.5625:e)+"px";b.O.element.style.height="100%";b.O.element.style.width="auto"}else b.element.style.height=b.element.offsetWidth*(b.Bg?.5625:.75)+
d+"px",b.element.style.width="100%",b.O.element.style.height="100%",b.O.element.style.width="100%";b.O.element.style.left="0";b.Db.style.visibility=Nc.Wu||b.ci?"hidden":""}var b=this,c=O();switch(c){case "split":a();this.ci||this.O.ue();break;case "videoonly":a();this.O.ue();break;case "theater":a();oc()||this.O.Mg();break;case "fullscreen":this.O.Mg();break;default:u("Unexpected VideoMode: "+c)}};k.Ms=function(a){xB.prototype.Ms.call(this,a);this.Qa.element.style.display="block";a=this.Qa;a.Rg();a.show()};k.Hl=function(){xB.prototype.Hl.call(this);this.Qa.Vy(this.O.Kn);this.Qa.Wy(this.O.Ai);this.O instanceof iB?(this.Qa.Vt(!0),this.Qa.Ut(this.O.rj)):(this.Qa.Vt(!1),this.Qa.Ut(!1))};function KJ(a){GJ.call(this,a)}r(KJ,GJ);KJ.prototype.uw=function(){return"jpeg"};var LJ;K.j(function(a){LJ=a.A.B()});var MJ={"---":"---",underage:Yf,advertising:Zf,abusive:$f,intoxicated:ag,"large toy":bg,"offline payments":cg,"public broadcast":dg,"service uniform":eg,sleeping:fg,gender:gg,other:hg};function NJ(){G.call(this);var a=this;this.Bo=new F("closeReportAbuseRequest");this.element.id="AbuseReport";this.element.style.fontFamily="UbuntuBold, Arial, Helvetica, sans-serif";this.element.style.fontSize="11px";var b=document.createElement("form"),c=document.createElement("div");H(c,"defaultColor");this.Ui=document.createElement("label");this.Ui.style.margin="6px";this.Ui.htmlFor="abuse-category";this.Ui.innerText=Xf;c.appendChild(this.Ui);this.Ee=document.createElement("select");H(this.Ee,"abuseInput");this.Ee.id="abuse-category";this.Ee.style.margin="6px";this.Ee.style.boxSizing="border-box";for(var d in MJ){var e=document.createElement("option");e.value=d;e.innerText=MJ[d];this.Ee.appendChild(e)}c.appendChild(this.Ee);b.appendChild(c);c=document.createElement("div");c.style.paddingTop="6px";d=document.createElement("label");d.style.margin="6px";d.htmlFor="abuse-comments";d.innerText=ig;c.appendChild(d);this.Lc=document.createElement("textarea");H(this.Lc,"abuseInput");this.Lc.id="abuse-comments";this.Lc.maxLength=255;this.Lc.style.width="100%";this.Lc.style.resize="none";this.Lc.style.margin="6px";this.Lc.style.padding="4px";this.Lc.style.borderWidth="1px";this.Lc.style.borderStyle="solid";this.Lc.style.borderRadius="4px";this.Lc.style.boxSizing="border-box";this.Lc.style.display="block";c.appendChild(this.Lc);b.appendChild(c);this.qk=document.createElement("div");this.qk.style.cssFloat="right";this.qk.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";c=document.createElement("span");H(c,"submitSpan");c.innerText=tg;c.style.padding="3px 6px 4px 5px";c.style.marginRight="6px";H(c,"gradient");c.style.borderRadius="4px";c.style.boxSizing="border-box";c.style.cursor="pointer";c.style.display="inline-block";d=document.createElement("span");H(d,"cancelSpan");d.innerText=Wf;d.style.padding="3px 6px 4px 5px";d.style.marginRight="6px";H(d,"gradient");d.style.borderRadius="4px";d.style.boxSizing="border-box";d.style.cursor="pointer";d.style.display="inline-block";this.qk.appendChild(d);this.qk.appendChild(c);b.appendChild(this.qk);v("click",c,function(f){f.preventDefault();"other"===a.Ee.value&&""===a.Lc.value?J("Please add a description of the abuse being reported."):"---"===a.Ee.value?J("Please choose a category."):(a.Ou().then(function(g){g.success?J("Your abuse report has been submitted."):void 0!==g.ct&&J(g.ct)}).catch(function(g){403===g.Kd.status?J(g.Kd.responseText):J("Error sending abuse report ("+g+")")}),a.Bo.h(void 0))});v("click",d,function(){a.Bo.h(void 0)});this.element.appendChild(b)}
r(NJ,G);NJ.prototype.G=function(){this.Ee.style.width=Math.max(0,this.element.clientWidth-12-(this.Ui.offsetWidth+2*this.Ui.offsetLeft))+"px";this.Lc.style.width=Math.max(0,this.element.clientWidth-12)+"px";this.Lc.style.height=Math.max(0,this.element.clientHeight-(this.qk.offsetHeight+4*this.Ui.offsetHeight+6+10))+"px"};NJ.prototype.Ou=function(){var a=this;return new Promise(function(b,c){return B("abuse/report/"+LJ+"/",{category:a.Ee.value,additional_comments:a.Lc.value}).then(function(d){d=new P(d.responseText);var e={success:"success"===T(d,"result"),ct:S(d,"html")};nm(d);b(e)}).catch(function(d){c(d)})})};function OJ(a,b){var c=document.createElement("div");c.innerHTML=a;a=document.createElement("div");a.style.paddingTop="5px";var d=document.createElement("span");d.innerText=b;d.style.color="#0c6a93";d.style.padding="5px";d.style.display="inline";d.style.verticalAlign="top";a.appendChild(d);b=document.createElement("div");b.style.padding="0 10px";b.style.display="inline-block";d=q(c.getElementsByTagName("*"));for(var e=d.next();!e.done;e=d.next()){var f=e=e.value;"fixed"===f.style.position&&(f.style.position="absolute");"IMG"===f.tagName&&(e.className="bioImage");null!==f.style.top&&0>parseInt(f.style.top,10)&&(f.style.top="0");null!==f.style.marginTop&&0>parseInt(f.style.marginTop,10)&&(f.style.marginTop="0");null!==f.style.left&&0>parseInt(f.style.left,10)&&(f.style.left="0");null!==f.style.marginLeft&&0>parseInt(f.style.marginLeft,10)&&(f.style.marginLeft="0")}0!==c.children.length&&(c.children[0].style.display="unset");c.style.position="relative";b.appendChild(c);a.appendChild(b);return a}
function PJ(a,b){function c(g){var h=document.createElement("div");h.style.padding="10px";h.style.position="relative";h.style.display="inline-block";h.style.height="100px";h.title=g.name;h.onmouseenter=function(){h.style.cursor="pointer";n.style.textDecoration="underline"};h.onmouseleave=function(){h.style.cursor="default";n.style.textDecoration="none"};h.onclick=function(){var p="resizable,dependent,scrollbars,height=520,width=803,top="+(screen.height/2-260).toString()+",left="+(screen.width/2-401.5).toString(),A="/photo_videos/photoset/detail/"+b+"/"+g.id;C("PhotoSetClicked",{source:"BioTab",photoset_id:g.id,cost:g.$c,is_video:g.uy});nj(A,void 0,p);return!1};var m=document.createElement("img");m.src=g.YB;m.width=150;m.height=100;m.className="userUpload";h.appendChild(m);g.mF||(m=document.createElement("img"),m.src="https://static-assets.highwebmedia.com/images/locked_rectangle4.png",m.width=150,m.height=100,m.style.top="10px",m.style.left="10px",m.style.position="absolute",m.style.border="none",h.appendChild(m));g.uy&&(m=document.createElement("img"),m.src="https://static-assets.highwebmedia.com/images/play3.png",m.height=20,m.style.position="absolute",m.style.top="10px",m.style.left="10px",h.appendChild(m));""!==g.xp&&(m=document.createElement("span"),m.innerText=g.xp,m.style.backgroundColor=g.At,m.style.position="absolute",m.style.top="92px",m.style.right="15px",m.style.fontSize="10px",m.style.padding="2px",h.appendChild(m));var n=document.createElement("div");n.innerText=g.name;n.style.fontSize="12px";n.style.position="absolute";n.style.top="111px";n.style.left="0px";n.style.paddingLeft="13px";n.style.color="#0c6a93";n.style.maxWidth="145px";n.style.whiteSpace="nowrap";n.style.textOverflow="ellipsis";n.style.overflow="hidden";h.appendChild(n);return h}var d=document.createElement("div");d.style.position="relative";d.style.paddingTop="5px";d.style.paddingBottom="25px";var e=document.createElement("span");e.innerText=de+":";e.style.color="#0c6a93";e.style.padding="5px";d.appendChild(e);e=document.createElement("div");e.style.paddingLeft="5px";a=q(a);for(var f=a.next();!f.done;f=a.next())e.appendChild(c(f.value));d.appendChild(e);return d}
function QJ(a,b){function c(g){var h=document.createElement("div");h.style.padding="10px";h.style.position="relative";h.style.display="inline-block";h.style.height="100px";h.title=g.LA;h.onmouseenter=function(){h.style.cursor="pointer";n.style.textDecoration="underline"};h.onmouseleave=function(){h.style.cursor="default";n.style.textDecoration="none"};h.onclick=function(){nj("/socials/social_media/"+b+"/"+g.id,void 0,"resizable,dependent,scrollbars,height=520,width=803,top="+(screen.height/2-260).toString()+
",left="+(screen.width/2-401.5).toString());return!1};var m=document.createElement("img");m.src=g.Kk;m.width=150;m.height=100;m.className="userUpload";h.appendChild(m);m=document.createElement("span");m.innerText=g.xp;m.style.backgroundColor=g.At;m.style.position="absolute";m.style.top="92px";m.style.right="15px";m.style.fontSize="10px";m.style.padding="2px";h.appendChild(m);var n=document.createElement("div");n.innerText=g.LA;n.style.fontSize="12px";n.style.position="absolute";n.style.top="111px";n.style.left="0px";n.style.paddingLeft="13px";n.style.color="#0c6a93";n.style.maxWidth="145px";n.style.whiteSpace="nowrap";n.style.textOverflow="ellipsis";n.style.overflow="hidden";h.appendChild(n);return h}var d=document.createElement("div");d.style.position="relative";d.style.paddingTop="5px";d.style.paddingBottom="25px";var e=document.createElement("span");e.innerText=pf+":";e.style.color="#0c6a93";e.style.padding="5px";d.appendChild(e);e=document.createElement("div");e.style.paddingLeft="5px";a=q(a);for(var f=a.next();!f.done;f=a.next())e.appendChild(c(f.value));d.appendChild(e);return d}
function RJ(a){function b(f,g){var h=document.createElement("div"),m=document.createElement("div");m.style.position="relative";m.style.paddingLeft="5px";m.style.display="inline";var n=document.createElement("span");n.style.color="#0c6a93";n.innerText=f;m.appendChild(n);f=document.createElement("div");f.style.position="absolute";f.style.paddingRight="5px";f.style.display="inline";f.style.left="150px";f.style.overflow="hidden";f.style.textOverflow="ellipsis";f.style.whiteSpace="nowrap";n=document.createElement("span");n.style.whiteSpace="nowrap";n.innerText=g;f.appendChild(n);h.style.paddingTop="5px";h.appendChild(m);h.appendChild(f);return h}var c=document.createElement("div"),d=a.username.charAt(0).toUpperCase()+a.username.slice(1);if("public"===a.Ab){var e=document.createElement("a");e.href="./?"+a.username;e.text="View "+d+"'s Cam";e.style.position="relative";e.style.padding="5px 5px 5px 0";e.style.textAlign="right";e.style.display="inline-block";e.style.width="100%";e.style.fontSize="14px";e.style.textDecoration="none";e.onmouseenter=function(){e.style.textDecoration="underline"};e.onmouseleave=function(){e.style.textDecoration="none"};v("click",e,function(f){f.preventDefault();zj.h(a.username)});c.appendChild(e)}""!==a.zz&&c.appendChild(b(ee+":",a.zz));isNaN(a.ux)||c.appendChild(b(fe+":",a.ux.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")));""!==a.ol&&("Couple"===a.ol?c.appendChild(b(he+":",""+a.ol.charAt(0).toUpperCase()+a.ol.substring(1))):c.appendChild(b(ge+":",""+a.ol.charAt(0).toUpperCase()+a.ol.substring(1))));""!==a.ax&&c.appendChild(b(ie+":",a.ax));isNaN(a.Cf)||c.appendChild(b(je+":",a.Cf.toString()));""!==a.$v&&c.appendChild(b(ke+":",a.$v));""!==a.Zv&&c.appendChild(b(le+":",a.Zv));""!==a.gy&&(d=JSON.parse(a.gy).join(", "),c.appendChild(b(me+":",d)));""!==a.location&&c.appendChild(b(ne+":",a.location));void 0!==a.xy&&c.appendChild(b(oe+":",a.xy));""!==a.languages&&c.appendChild(b(pe+":",a.languages));""!==a.sA&&c.appendChild(b(qe+":",a.sA));return c}
function SJ(a){G.call(this);var b=this;this.element.style.color="#000";TJ(this,aH(a));this.Rz=function(c){TJ(b,aH(c.C.B))};K.j(this.Rz,!1)}r(SJ,G);function TJ(a,b){void 0!==a.content&&a.element.removeChild(a.content.Ma);var c=document.createElement("span");c.innerText=se+"...";a.element.appendChild(c);a.element.style.display="block";b.then(function(d){var e=document.createElement("div");e.style.fontSize="14px";var f=RJ(d.Lk);e.appendChild(f);var g=void 0;0<d.tA.length&&(g=QJ(d.tA,d.Lk.username),e.appendChild(g));var h=void 0;0<d.mz.length&&(h=PJ(d.mz,d.Lk.username),e.appendChild(h));var m=void 0;""!==d.Ov&&(m=OJ(d.Ov,be+":"),e.appendChild(m));var n=void 0;""!==d.dB&&(n=OJ(d.dB,ce+":"),e.appendChild(n));a.content={Ma:e,Lk:f,tJ:g,NI:h,LJ:m,WJ:n};a.content.Ma.style.position="relative";a.content.Ma.style.paddingRight="3px";a.content.Ma.style.cursor="default";a.content.Ma.style.overflow="scroll";a.content.Ma.style.height="100%";a.element.removeChild(c);a.element.appendChild(a.content.Ma);a.Z()}).catch(function(d){u("Bio Content error: "+d);d=document.createElement("div");d.style.position="absolute";d.style.height="100%";d.style.width="100%";d.style.top="0";d.style.left="0";d.style.display="block";var e=document.createElement("span");e.innerText=re;e.style.display="block";e.style.padding="10px";d.appendChild(e);a.content={Ma:d};a.element.removeChild(c);a.element.appendChild(a.content.Ma)})}SJ.prototype.G=function(){if(void 0!==this.content&&void 0!==this.content.Lk)for(var a=q(this.content.Lk.childNodes),b=a.next();!b.done;b=a.next())b=b.value.childNodes[1],void 0!==b&&(b.style.maxWidth=this.element.offsetWidth-150-5+"px")};SJ.prototype.kg=function(){K.removeListener(this.Rz)};function UJ(){Ml.call(this);var a=this;this.H=0;this.element.id="chat-box";this.element.style.overflow="";this.F=new wJ({an:function(b){yj.h(b)},bn:function(){SA(a.A)},Xm:function(b){VA(a.A,b)}});this.J(this.F);this.ur=new qH({fa:function(b,c){return a.F.fa(b,c)},nq:function(b){a.F.nq(b)},rm:function(){return a.F.rm()},Lp:function(b){return a.F.Lp(b)},HC:function(){return a.F.Wa.scrollTop},GC:function(){return a.F.element.offsetHeight}});K.j(function(b){a.A=b.A;a.F.fa(UI("Rules: No spamming. Do not insist the cam hosts to do as you please. Do not announce other rooms or websites that would conflict with this room. Avoid any argumentative and/or rude posts related to the cam viewing. Do not attempt to post your e-mail address in the public chat."));a.F.fa(UI('To send a tip, press CTRL+S or type "/tip 25".'));if(0<b.C.Xg.length){var c=a.F,d=c.fa,e=b.C.B;b=b.C.Xg;var f=NI(),g=document.createElement("span");g.innerText=Jc(e);f.appendChild(g);for(e=0;e<b.length;e+=1)g=document.createElement("a"),g.href=b[e].Sv,g.target="_blank",g.innerText=b[e].vr,g.style.color=KI("#1c8fc8"),g.style.textDecoration="none",f.appendChild(g),e<b.length-1&&(g=document.createElement("span"),g.innerText=", ",f.appendChild(g));f.style.color=KI("#aaaaaa");d.call(c,f)}});tc.j(function(){a.F.clear()})}r(UJ,Ml);k=UJ.prototype;k.Od=function(){return this.H};k.G=function(){Ml.prototype.G.call(this)};k.Pa=function(){this.F.Pa()};k.vg=function(){return 99<this.H?we+" (99+)":0<this.H?we+" ("+this.H+")":we};k.gh=function(){return"chat-tab-fvm"};k.jd=function(){this.F.jd()};k.De=function(){};k.Qd=function(){return this.F.Qd()};function VJ(a){Rl(a)||(a.H+=1);a.Ub()}k.Bb=function(){Ml.prototype.Bb.call(this);this.H=0;this.Ub();this.F.Pa()};k.$o=function(a){for(var b=[],c=q(this.F.ra.childNodes),d=c.next();!d.done;d=c.next())d=d.value,d.getAttribute("data-nick")===a&&b.push(d);a=q(b);for(b=a.next();!b.done;b=a.next())this.F.ra.removeChild(b.value)};k.ie=function(){return this.F.ie()};k.te=function(a){this.F.te(a)};k.Si=function(a){this.F.Si(a)};k.fh=function(){return this.F.sa};k.Xd=function(a){Ml.prototype.Xd.call(this,a);C("FocusTab",{location:"chat"})};function WJ(a){Ml.call(this);var b=this;this.Ft=a;this.H=0;this.dn=new F("incomingPm");this.Gb=new Map;this.ca=new fH;this.Nu=function(c){var d=b.Gb.get(b.ca.Ca);d.Kl||(d.F.fa(UI(c)),d.Kl=!0)};this.element.style.overflow="";this.od=new lu({wa:!1,Of:!0,Ue:co,Eh:function(c){c!==b.H&&(b.H=c,b.Ub())}});this.J(this.od);jq.j(function(c){b.Me();XJ(b);void 0===b.Gb.get(c.username)&&b.kh(c.username,!1,c.Dn);iH(b.ca,c.username);b.Ub();b.xh();c.focus&&Pl(b)});K.j(function(c){b.A=c.A});eo.j(function(c){b.Wi(c)});co.j(function(c){b.Me();iH(b.ca,c);b.xh()});CG.j(function(c){var d,e=YJ(b),f=!1===(null===e||void 0===e?void 0:lJ(e.F));b.Cn(c,!0);f&&ho.h(null!==(d=null===e||void 0===e?void 0:e.V)&&void 0!==d?d:"")});DG.j(function(){C("IgnoreUser",{location:"PMTab"});b.A.Mf(b.ca.Ca)});mq.j(function(){var c=b.Gb.get(b.ca.Ca);!1===c.ai&&b.It(c)});rt.j(function(c){b.ca.dd(c);b.kh(c,!1,!1)})}r(WJ,Ml);k=WJ.prototype;k.Cn=function(a,b){b=void 0===b?!1:b;a&&(this.Me(),b||1<this.od.ab.childNodes.length?(this.od.element.style.display="block",this.od.Z()):(iH(this.ca,this.A.B()),this.xh()))};function XJ(a){a.od.element.style.display="none"}k.Pa=function(){var a=YJ(this);void 0!==a&&a.F.Pa()};k.Od=function(){return this.H};k.vg=function(){return 99<this.H?"PM (99+)":0<this.H?"PM ("+this.H+")":"PM"};k.Xd=function(){C("FocusTab",{location:"PM",unread:this.Od()});Pl(this);this.Cn(!0)};k.tj=function(){return 0===this.Gb.size};k.gh=function(){return"pm-tab-fvm"};k.jd=function(){var a=YJ(this);void 0===a?u("session undefined"):a.F.jd()};k.De=function(){};k.Qd=function(){var a=YJ(this);return void 0===a?(u("session undefined"),!1):a.F.Qd()};k.G=function(){Ml.prototype.G.call(this);var a=YJ(this);void 0!==a&&a.F.Pa()};k.kh=function(a,b,c,d){var e=this;d=void 0===d?!1:d;var f,g,h=this.Gb.get(a);void 0===h?(h=Jw(),h.innerHTML=Kc(a),h.style.textAlign="center",h.style.width="auto",h.style.borderBottom="1px solid #acacac",h.style.margin="0 10px 5px 5px",h.style.display="none",h.style.color="#cfcfcf",h={F:new wJ({an:function(m){yj.h(m)},bn:function(){SA(e.A)},Xm:function(m){ho.h(a);e.ca.dd(a);yt({message:m,username:a,source:"roomviewPM",W:e.A.B(),Hs:e.Nu})}},!0),H:0,Wm:0,V:a,Wl:h,nh:new FG,Pf:!1,Gm:!1,ai:!1,Kl:!1},this.Gb.set(a,h),h.F.Wg(UI(dd(a))),h.F.Wg(UI(Mc())),!b&&c?(c=null!==(g=null===(f=Ia.current.qb)||void 0===f?void 0:f.Sa)&&void 0!==g?g:!1,h.F.Wg(VI(a,c))):h.F.Wg(h.nh.Cx()),h.F.element.style.display="none",this.J(h.F)):h.Wl.style.display="";d||!0!==b||h.Gm||(h.Gm=!0,this.dn.h({username:a}));void 0===this.ca.Ca&&iH(this.ca,a);return h};k.It=function(a){if(!a.nh.Sc()){a.nh.qA();var b=a.F.ra.clientHeight,c=a.F.fm;void 0!==c&&(c=vb({offset:c,room:this.A.B()}),y("api/ts/chatmessages/pm_list/"+a.V+"/?"+c).then(function(d){a.nh.Rx();d=JSON.parse(d.responseText).messages;30>d.length&&(a.ai=!0);var e=d.length-1;d.reverse().map(function(f,g){f=Xn(new P(f));a.F.fa(MI(f,1),void 0,!0,!0);g===e&&void 0!==f.Tc&&a.F.vn(f.Tc)});a.F.Wa.scrollTop=a.F.ra.clientHeight-b}))}};k.fa=function(a,b,c,d,e){d=void 0===d?!1:d;this.ca.dd(c);var f=this.kh(c,b!==this.A.username(),!1,d);d&&!1===f.Pf&&(f.Pf=!0);this.A.username()===b||Rl(this)&&this.ca.Ca===c||(f.H+=1,f.Wm+=1,this.Ub());f.Pf&&(a=f.F.fa(a,void 0,void 0,!0));void 0!==e&&f.F.vn(e);return a};k.en=function(a){if(Rl(this)){var b=YJ(this);void 0!==b&&b.F.fa(a)}};function YJ(a){if(void 0!==a.ca.Ca)return a.Gb.get(a.ca.Ca)}function ZJ(a){return a.$u("next")}function $J(a){return a.$u("prev")}
k.$u=function(a){function b(){return"next"===a?gH(c.ca):hH(c.ca)}var c=this;this.Me();for(var d=b(),e=!1;void 0!==d&&d!==this.A.B()&&!this.od.Jg.has(d)&&0!==this.od.Fh();)this.ca.remove(d),d=b(),void 0!==d||e||("next"===a?aK(c):bK(c),d=b(),e=!0);if(void 0===d)return!1;this.xh();return!0};k.Wi=function(a){var b=this.Gb.get(a);if(void 0!==b){var c=Rl(this)&&this.ca.Ca===a;this.ca.remove(a);b.F.tb();this.removeChild(b.F);this.Gb.delete(a);c&&(ZJ(this)||this.Ft());this.Ub();eo.h(b.V)}};k.Vi=function(){var a=YJ(this);void 0===a?u("cannot close current tab"):this.Wi(a.V)};function aK(a){a.Me();for(a=a.ca;;){var b=a.Zi.rf.pop();if(void 0===b)break;eH(a.$i,b)}void 0!==a.Ca&&(eH(a.$i,a.Ca),a.Ca=void 0)}function bK(a){a.Me();for(a=a.ca;;){var b=a.$i.rf.pop();if(void 0===b)break;eH(a.Zi,b)}void 0!==a.Ca&&(eH(a.Zi,a.Ca),a.Ca=void 0)}function cK(a){a.Me();a.ca=new fH}
k.xh=function(){void 0===this.ca.Ca&&iH(this.ca,this.A.B());if(void 0===this.ca.Ca)u("no currentpmsession");else{var a=this.Gb.get(this.ca.Ca);void 0===a&&this.kh(this.ca.Ca,!1,!1);a=this.Gb.get(this.ca.Ca);var b=O();"theater"!==b&&"fullvideo"!==b&&"fullscreen"!==b||a.Pf||this.A.Ce||(a.Pf=!0,xt(a.V,this.A.B()));XJ(this);a.F.element.style.display="block";a.F.Z();0<a.H&&(a.H=0,this.Ub());ho.h(a.V);uc.h(a.V);a.F.fa(a.Wl)}};k.Me=function(){var a=YJ(this);void 0!==a&&(a.F.element.style.display="none")};k.ie=function(){var a=YJ(this);return void 0===a?"":a.F.ie()};k.te=function(a){var b=YJ(this);void 0!==b&&b.F.te(a)};k.fh=function(){var a=YJ(this);if(void 0!==a)return a.F.sa};function dK(){function a(){if(!b.ag&&(Er(b.Eb),void 0!==b.parent)){var f=b.parent;f.rb(f.children()[0])}}Ml.call(this);var b=this;this.Eb=new ur;this.ag=!1;this.element.id="FVChatSettingsTab";this.element.style.fontSize="12px";this.element.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";Xb(this,this.Eb);I(this.Eb.Km,"link");H(this.Eb.Km,"manage-ignored-link");this.ma=qJ();this.ma.style.position="absolute";var c=pJ();this.Ka=rJ(function(){},4096);v("click",this.Ka.element,a);v("focus",this.Ka.element,a);this.uc=(new sJ(void 0,!1)).element;this.uc.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.Yj=uJ();this.Yj.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";c.appendChild(this.Ka.element);this.ma.appendChild(c);this.ma.appendChild(this.uc);this.ma.appendChild(this.Yj);this.element.appendChild(this.ma);var d=document.createElement("div");d.innerText=ve;d.style.position="absolute";d.style.top="10px";d.style.right="10px";d.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";d.style.color="#000000";d.style.backgroundColor="#d8deea";d.style.border="1px solid #acacac";d.style.borderRadius="4px";d.style.padding="8px 12px";d.style.opacity="0";this.element.appendChild(d);bk.vf.j(function(){"split"!==O()&&Xb(b,b.Eb)});var e;this.Eb.Kr.j(function(){clearTimeout(e);xp(d,"250ms");d.style.opacity="1";e=window.setTimeout(function(){xp(d,"1000ms");d.style.opacity="0"},3E3)})}r(dK,Ml);k=dK.prototype;k.ij=function(){return Object.assign(Object.assign({},Ml.prototype.ij.call(this)),{minWidth:"16px",backgroundImage:"url(https://static-assets.highwebmedia.com/tsdefaultassets/ico-preferences.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center"})};k.G=function(){if("split"!==O()){this.ma.style.width=this.element.clientWidth+"px";var a=this.uc.getBoundingClientRect();a=a.right-a.left;var b=this.Yj.getBoundingClientRect();a=this.ma.clientWidth-12-6-Math.ceil(b.right-b.left+a)-4;a=Math.max(0,a);this.Ka.element.style.width=a+"px";this.Eb.element.style.height=this.element.clientHeight-27+"px"}};k.gh=function(){return"settings-tab-fvm"};k.jd=function(){};k.De=function(){this.Ka.blur()};k.Qd=function(){return document.activeElement===this.Ka.element};k.Pa=function(){};k.ie=function(){return JF(this.Ka)};k.te=function(a){var b=this;this.ag=!0;KF(this.Ka,a);this.Ka.blur();window.setTimeout(function(){b.ag=!1},100)};k.fh=function(){return this.Ka};k.Xd=function(a){Ml.prototype.Xd.call(this,a);C("FocusTab",{location:"chatSettings"})};function eK(){Hl.call(this);var a=this;this.me=!1;this.qh=new Ub;this.element.style.overflow="";this.Y=Kl(this,new UJ);this.ja=Kl(this,new WJ(function(){a.rb(a.Y)}));this.yn=Kl(this,new dK);this.rb(this.Y);K.j(function(c){a.me=c.C.userName===c.C.B;a.A=c.A;a.W=c.C.B;a.rb(a.Y);cK(a.ja);c.A.event.jl.j(function(d){a.St(d,c.A.username())});c.A.event.Ga.j(function(d){a.Pm(d,c.A.username())});ao.j(function(d){a.Pm(d,c.A.username())});c.A.event.vz.j(function(d){var e=MI(d,fK(a));a.ja.fa(e,d.N.username,d.Da)});c.A.event.oq.j(function(d){a.Y.$o(d.username);a.Y.F.yu(d.username);a.ja.Wi(d.username)});c.A.event.sr.j(function(d){c.A.Jl&&a.Y.F.fa(UI("DEBUG: "+d))});c.A.event.Tp.j(function(d){a.tm(d,c)});E($n.j(function(d){a.ja.fa(MI(d,fK(a)),d.N.username,d.Da)},!1),a.qh);E(qt.j(function(d){var e=d.ly?d.Tc:void 0;a.ja.fa(MI(d,fK(a)),d.N.username,d.Da,!0,e)},!1),a.qh);E(bo.j(function(d){a.Y.F.fa(UI(d.message))},!1),a.qh)});tc.j(function(){Vb(a.qh)});lq.j(function(c){c?a.Y.F.fa(UI("Debug mode enabled. Type /debug again to disable.")):a.Y.F.fa(UI("Debug mode disabled."))});vc.j(function(c){a.Y.F.fa(WI(c));c.xa&&a.ja.en(WI(c))});kq.j(function(c){"split"!==O()&&(a.rb(a.Y),a.Y.Si("@"+c+" "))});var b=new bH;this.ja.dn.j(function(c){cH(b,c.username)&&yu(a.A,"a",!1).then(function(d){-1!==d.jf.map(function(e){return e.username}).indexOf(c.username)&&a.Y.F.fa(PI({na:[[{hc:1,message:"New private conversation from "+c.username+" "},{hc:1,message:"(Press TAB to cycle through your conversations)",ya:"#cd0000",weight:"700"}]],xa:!1},fK(a)))})})}
r(eK,Hl);k=eK.prototype;k.tm=function(a,b){return ds(this,function d(){var e=this,f,g,h,m,n;return za(d,function(p){if(1==p.ia)return f=e,e.me||a.ql===b.C.userName?p=ra(p,uH({Wv:a.zh,Mw:a.ql,ty:!a.bi,Uz:b.C.B}),3):(p.ia=0,p=void 0),p;g=p.wd;h=function(A,z){return f.tm(A,z)};m=function(A){f.Zu(A)};n=wH(a,g,b,m,h);void 0!==n&&e.Y.F.fa(n);p.ia=0})})};k.Zu=function(a){this.Y.F.fa(UI(a))};k.St=function(a,b){VJ(this.Y);pG(rG(),a.N);a=MI(a,fK(this),b);this.Y.F.fa(a)};k.Pm=function(a,b){b=PI(a,fK(this),void 0,b);this.Y.F.fa(b);a.xa&&this.ja.en(PI(a,fK(this)))};function fK(a){return a.me?0:1}k.G=function(){this.window.style.height=this.element.clientHeight-this.Kb.element.offsetHeight+"px"};k.bc=function(){return Hl.prototype.bc.call(this)};k.children=function(){return Hl.prototype.children.call(this)};k.Sw=function(){Er(this.yn.Eb);Hl.prototype.bc.call(this)===this.Y?this.ja.tj()||(this.rb(this.ja),aK(this.ja),ZJ(this.ja)||u("no pmSessions")):0<this.Y.Od()?this.rb(this.Y):ZJ(this.ja)||this.rb(this.Y)};k.Tw=function(){Er(this.yn.Eb);Hl.prototype.bc.call(this)===this.Y?this.ja.tj()||(this.rb(this.ja),bK(this.ja),$J(this.ja)||u("no pmSessions")):$J(this.ja)||this.rb(this.Y)};k.Vi=function(){Hl.prototype.bc.call(this)===this.ja&&this.ja.Vi()};var gK=new F("emojiAdded"),hK="\ud83c\udffb \ud83c\udffc \ud83c\udffd \ud83c\udffe \ud83c\udfff ".split(" "),iK=new F("toneChange",{Rd:500});function jK(a){L.call(this);var b=this;this.nb=a;this.Pw="";this.Az=new Ub;this.Yz=new Ub;kK(this);this.Sb.j(function(){b.D()});v("keydown",document,function(c){(yF(c.which)||27===c.keyCode||13===c.keyCode)&&b.D()});v("keydown",this.Ye,function(c){c.stopPropagation()});v("click",this.element,function(c){c.stopPropagation();window.setTimeout(function(){""!==b.Ye.value&&b.Ye.focus()},0)})}r(jK,L);jK.prototype.qa=function(){var a=this;L.prototype.qa.call(this);var b={position:"relative",padding:"8px 8px 0px 8px",height:"219px",boxSizing:"border-box",overflowY:"scroll"},c=new xk(function(){lK(a)},{yd:200,ce:1});this.tf=Qj("","","",1);H(this.tf,"divot");this.tf.style.bottom="-37px";var d;this.element=N("div",{style:{position:"absolute",visibility:"hidden",width:"284px",height:"261px",borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",boxSizing:"border-box",fontFamily:"UbuntuMedium, Helvetica, Arial, sans-serif",fontSize:"12px",bottom:"60px",zIndex:1001},colorClass:"emojiSelectionModal"},N("div",{style:{position:"static",width:"calc(100% - 8px)",height:"28px",boxSizing:"border-box",margin:"4px",borderWidth:"1px",borderStyle:"solid",borderRadius:"4px"},colorClass:"searchBar"},N("div",{style:{position:"relative",width:"15px",height:"15px",top:"50%",transform:"translateY(-50%)",cssFloat:"left",left:"7px"},colorClass:"searchIcon"}),N("div",{style:{marginLeft:"22px",height:"100%"}},N("input",{style:{position:"static",width:"calc(100% - 10px)",height:"calc(100% - 2px)",padding:"0px",borderWidth:"0px",marginLeft:"4px",outline:"none"},ref:function(e){a.Ye=e},onInput:function(){yk(c)}}))),N("div",{style:b,ref:function(e){a.Ds=e}},N("a",{style:{position:"absolute",lineHeight:"14px",right:"22px",top:"9px",cursor:"pointer"},ref:function(e){d=e},onMouseEnter:function(){pk(d,{textDecoration:"underline"})},onMouseLeave:function(){pk(d,{textDecoration:""})},colorClass:"uploadLink",onClick:function(){return mK(a)}},Ze)),N("div",{style:Object.assign({display:"none"},b),ref:function(e){a.vi=e}}),nK(this),this.tf)};function kK(a){sF();oK(a,Qe,"recent",function(b){a.dl=b});oK(a,Re,"smileys-people");oK(a,Se,"animals-nature");oK(a,Te,"food-drink");oK(a,Ue,"activities");oK(a,Ve,"travel-places");oK(a,We,"objects");oK(a,Xe,"symbols");oK(a,Ye,"flags")}
function oK(a,b,c,d){d=void 0===d?function(){}:d;var e;b=N("div",null,N("div",{style:{lineHeight:"16px"},colorClass:"sectionTitle"},b),N("div",{ref:function(f){e=f;d(f)}}));a.Ds.appendChild(b);tF(c).then(function(f){pK(a,e,f)})}
function pK(a,b,c,d){var e={};c=q(c);for(var f=c.next();!f.done;e={Li:e.Li,Dl:e.Dl},f=c.next())e.Li=f.value,e.Dl=N("div",{style:{position:"relative",display:"inline-block",width:"32px",height:"32px",cursor:"pointer",borderRadius:"2px",fontSize:"22px"},colorClass:"emojiDiv",onClick:function(g){return function(){var h=g.Li,m=b===a.dl,n=qK(h,a.Pw),p=a.nb.bc().fh();void 0!==p&&(GF(p,n),gK.h(void 0),C("emojiAdded",{name:h.name,value:h.value}),h=qF(h),m?a.qu=h:rK(a,h))}}(e)}),sK(e.Dl,e.Li.value),qK(e.Li,"\ud83c\udffd")!==e.Li.value&&(f=iK.j(function(g){return function(h){sK(g.Dl,qK(g.Li,h))}}(e)),null===d||void 0===d?void 0:d.add(f)),b.appendChild(e.Dl)}function rK(a,b){if(null!==a.dl.parentNode){var c=a.dl.cloneNode(!1);Vb(a.Az);pK(a,c,b,a.Az);a.dl.parentNode.replaceChild(c,a.dl);a.dl=c}}
function nK(a){var b={height:"24px",width:"24px",fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)",cssFloat:"left",marginRight:"8px",cursor:"pointer"};window.setTimeout(function(){iK.j(function(h){a.Pw=h;a.Rw.textContent="\ud83d\udc4b"+h;twemoji.parse(a.Rw,{className:"emojiToneChoice"})});iK.h(tK())},0);for(var c=N("div",{style:{position:"relative",left:"-1px",borderWidth:"1px",borderStyle:"solid",borderRadius:"0px 0px 3px 3px",width:"100%",height:"40px"},colorClass:"toneSelect"},N("div",{style:{position:"relative",cssFloat:"right",height:"100%",right:"17px"}},N("div",{style:{position:"relative",top:"50%",transform:"translateY(-50%)",cssFloat:"left",marginRight:"8px"},colorClass:"sectionTitle"},$e+": "),N("div",{style:{position:"relative",width:"32px",height:"32px",top:"50%",transform:"translateY(-50%)",borderRadius:"2px",cssFloat:"left",cursor:"pointer"},colorClass:"currentToneContainer",ref:function(h){a.Qw=h},onClick:function(){a.Qw.style.display="none";a.sv.style.display="inline-block"}},N("div",{style:{height:"24px",width:"24px",fontSize:"24px",position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},ref:function(h){a.Rw=h}})),N("div",{style:{fontSize:"24px",display:"none",height:"100%"},ref:function(h){a.sv=h}}))),d={},e=q(hK.entries()),f=e.next();!f.done;d={fo:d.fo},f=e.next()){f=q(f.value);var g=f.next().value;d.fo=f.next().value;f=g===hK.length-1?Object.assign(b,{marginRight:"4px"}):b;f=N("div",{style:f,onClick:function(h){return function(){var m=h.fo;window.localStorage.setItem("emojiTone",m);iK.h(m);uK(a)}}(d)},"\ud83d\udc4b"+d.fo);twemoji.parse(f,{className:"emojiToneChoice"});a.sv.appendChild(f)}return c}function uK(a){a.Qw.style.display="inline-block";a.sv.style.display="none"}function tK(){var a,b=null!==(a=window.localStorage.getItem("emojiTone"))&&void 0!==a?a:"";return-1===hK.indexOf(b)?(u("Bad emojiTone value",b),""):b}
function qK(a,b){var c=oF(a.value)[0],d=a.value.split(c);1<d.length&&d[1][0]===twemoji.convert.fromCodePoint("fe0f")&&(d[1]=d[1].slice(1,d[1].length));b=d.join(c+b);return pF(twemoji.parse(b))?b:a.value}
function lK(a){var b=a.Ye.value;1>=b.length?(pk(a.Ds,{display:"block"}),pk(a.vi,{display:"none"})):(pk(a.Ds,{display:"none"}),pk(a.vi,{display:"block"}),vF(b).then(function(c){if(null!==a.vi.parentNode){var d=a.vi.cloneNode(!1);a.vi.parentNode.replaceChild(d,a.vi);a.vi=d}Vb(a.Yz);pK(a,a.vi,c,a.Yz)}))}
function sK(a,b){var c=twemoji.parse(b),d=c.match(/<img/g);if(null!==d&&1<d.length&&(c=new RegExp(twemoji.convert.fromCodePoint("fe0f"),"g"),b=b.replace(c,""),c=twemoji.parse(b),d=c.match(/<img/g),null!==d&&1<d.length))return;b=c.match(new RegExp('src="'+twemoji.base+'72x72/(.*?).png"'));if(null!==b){b=b[1];c=N("span",{style:{position:"relative",display:"block",top:"50%",left:"50%"}});c.classList.add("sprite-twemoji-"+b);for(c.classList.add("sprite-twemoji");null!==a.firstChild;)a.removeChild(a.firstChild);a.appendChild(c)}}function mK(a){window.use_uploaded_emoticon=function(b){var c=a.nb.bc().fh();if(void 0!==c){var d=JF(c);""===d||/\s/.test(d[d.length-1])?GF(c,b,!0):GF(c," "+b,!0)}};nj("/emoticons/","_blank","height=615, width=850");a.D();return!1}jK.prototype.show=function(a){a.appendChild(this.P);a.appendChild(this.element);this.ni();this.cf();this.element.style.visibility="";C("emojiSelectorOpened")};jK.prototype.D=function(){if("hidden"!==this.element.style.visibility){this.kb();uK(this);this.element.style.visibility="hidden";this.Ye.value="";lK(this);var a=this.nb.bc().fh();void 0!==a&&a.focus(!0);void 0!==this.qu&&(rK(this,this.qu),this.qu=void 0)}};jK.prototype.ni=function(){this.element.style.left=-this.element.offsetWidth+35+"px";this.tf.style.left=this.element.offsetWidth-37+"px";0>this.element.getBoundingClientRect().left+window.scrollX&&(this.element.style.left="-25px",this.tf.style.left="23px")};function vK(a){var b=new eK;Op.call(this,a,b,{nf:"Chat",minWidth:150,minHeight:100,Af:400,zf:250,qg:[1,3],si:!0,Zy:function(){c.nb.bc().Pa()},Ts:[b.Kb.element]});var c=this;H(this.element,"draggableCanvasChatWindow");H(this.element,"hasDarkBackground");I(this.Rc,"innerDiv");H(this.Rc,"chatInnerDiv");b.Y.F.wx.j(function(){c.blur()});v("blur",b.Y.F.sa.element,function(){if(a.bt!==c||Sm())a.Nd=void 0,a.sx.h(void 0)});v("mouseleave",this.element,function(){a.bt=void 0;a.cB.h(void 0)});var d=!0;K.j(function(f){d=f.A.Ce});var e;bk.vf.j(function(f){e=f.Jo;void 0!==c.bj&&"split"===e&&c.bj.D()});hq.j(function(f){d?Jq.h(!0):"split"!==e&&(void 0===c.bj&&(c.bj=new jK(b)),c.bj.show(f))});this.nb=b}r(vK,Op);function wK(a){G.call(this);var b=this;this.Xp=a;this.element.style.position="static";this.element.style.overflow="auto";this.element.style.padding="4px 7px";this.element.style.boxSizing="border-box";this.element.style.fontSize="12px";this.element.style.minWidth="230px";this.element.style.maxWidth="230px";this.element.style.height="auto";a=q(this.children());for(var c=a.next();!c.done;c=a.next())c.value.element.style.margin="2px 0";K.j(function(d){var e=!0===d.C.ae;xK(b,e,d.A.status);d.A.event.kc.j(function(f){xK(b,e,f.Ra)});d.A.event.zi.j(function(f){e=f.ae;xK(b,e,d.A.status)})})}r(wK,G);function xK(a,b,c){Zb(a);a:switch(c){case "privatewatching":case "privatespying":var d=!0;break a;default:d=!1}if(d)void 0===a.lw&&(a.lw=new yK),a.J(a.lw);else{a:switch(c){case "privaterequesting":b=!0;break a;case "privatespying":case "privatewatching":case "privatenotwatching":case "away":b=!1}b&&(void 0===a.hn&&(a.hn=new zK(a.Xp)),a.J(a.hn))}a.Xp()}
function AK(){G.call(this);H(this.element,"showsComponent");this.element.style.display="inline-block";this.element.style.height="auto";this.element.style.position="relative";this.element.style.padding="5px 5px";this.element.style.borderWidth="1px";this.element.style.borderStyle="solid";this.element.style.boxSizing="border-box";this.element.style.borderRadius="3px";this.element.style.font="UbuntuRegular, Arial, Helvetica, sans-serif";this.element.style.fontSize="12px";this.element.style.lineHeight="14px";this.element.style.textAlign="center"}r(AK,G);function BK(){var a=document.createElement("div");H(a,"showsHeader");a.innerText=Fg;a.style.width="100%";a.style.margin="5px 0";a.style.fontSize="14px";a.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";a.style.fontWeight="500";a.style.letterSpacing="-0.05em";return a}
function CK(){var a=document.createElement("div");H(a,"showsButton");H(a,"showsButtonGradient");a.style.display="inline-block";a.innerText=Dg;a.style.borderWidth="1px";a.style.borderStyle="solid";a.style.boxSizing="border-box";a.style.borderRadius="4px";a.style.fontWeight="bold";a.style.padding="6px 10px";a.style.margin="5px 0";a.style.cursor="pointer";a.style.textDecoration="none";return a}
function zK(a){AK.call(this);var b=this;this.Xp=a;this.za=BK();this.button=CK();this.mi=this.Ud=0;this.Qi=!1;this.element.appendChild(this.za);this.cl=document.createElement("div");this.cl.style.margin="5px 0";this.cl.style.lineHeight="16px";this.cl.style.letterSpacing="-0.05em";this.Sq=document.createElement("div");H(this.Sq,"tokensRequirement");this.Sq.style.fontFamily="UbuntuMedium, Arial, Helvetica, sans-serif";this.cl.appendChild(this.Sq);this.Np=document.createElement("div");H(this.Np,"minutesRequirement");this.cl.appendChild(this.Np);this.element.appendChild(this.cl);this.element.appendChild(this.button);this.Hj=document.createElement("div");H(this.Hj,"showsFooter");this.Hj.innerText=Ag;this.Hj.style.fontSize="9px";this.Hj.style.lineHeight="125%";this.Hj.style.margin="5px 0";this.element.appendChild(this.Hj);K.j(function(c){c.A.event.kc.j(function(d){"privaterequesting"===d.Ra?(b.button.innerText=Cg,b.button.onclick=function(){Kv(c.A)}):(b.button.innerText=Dg,b.button.onclick=function(){Gv(c.A)},b.update())});c.A.event.zi.j(function(d){DK(b,d.Qi,d.Ud,d.mi);switch(c.A.status){case "privaterequesting":break;default:b.update()}});DK(b,c.C.Qi,c.C.Ud,c.C.mi);b.update()})}r(zK,AK);function DK(a,b,c,d){void 0!==b&&(a.Qi=b);void 0!==c&&(a.Ud=c);void 0!==d&&(a.mi=d)}
zK.prototype.update=function(){var a=this.Sq;var b=this.Ud;b=Ec(M("%(price)s tokens per minute"),{price:b},!0);a.innerText=b;a=this.Np;b=this.mi;b=Ec(M("(minimum %(minMinutes)s minutes)"),{minMinutes:b},!0);a.innerText=b;this.Np.style.display=0===this.mi?"none":"block";this.Hj.style.display=this.Qi?"block":"none";this.Xp()};function yK(){G.call(this);var a=this;this.bk=document.createElement("div");this.element.style.display="inline-block";this.element.style.height="auto";this.element.style.position="relative";this.element.style.boxSizing="border-box";this.element.style.borderRadius="3px";this.element.style.font="UbuntuRegular, Arial, Helvetica, sans-serif";this.element.style.fontSize="12px";this.element.style.lineHeight="14px";this.element.style.minWidth="200px";this.element.style.textAlign="center";this.bk.style.display="block";this.bk.style.fontSize="16px";this.bk.style.lineHeight="18px";this.bk.style.margin="5px 0";H(this.bk,"tokenTextArea");this.element.appendChild(this.bk);var b=document.createElement("div");H(b,"cancelShowButton");H(b,"cancelShowButtonGradient");b.style.display="inline-block";b.style.boxSizing="border-box";b.style.borderRadius="4px";b.style.padding="6px 10px";b.style.margin="5px 0";b.style.cursor="pointer";b.style.textDecoration="none";this.element.appendChild(b);K.j(function(c){EK(a,c.C.hb);c.A.event.Jq.j(function(d){d.N.username===c.A.username()&&EK(a,a.xB-d.amount)});c.A.event.kc.j(function(d){function e(){Kv(c.A)}switch(d.Ra){case "privatewatching":b.innerText=Bg;b.onclick=e;break;case "privatespying":b.innerText=Eg;b.onclick=e;break;default:b.onclick=function(){}}})});Du.j(function(c){EK(a,c.$c)})}r(yK,G);function EK(a,b){a.xB=b;a.bk.innerText=b+" "+Fc(b)};var FK;K.j(function(a){FK=a.C.B});function GK(a,b,c){G.call(this);var d=this;this.W=a;this.element.style.position="relative";this.element.style.padding="4px";this.il=document.createElement("a");this.il.href="/"+a+"/";this.element.appendChild(this.il);v("click",this.il,function(e){C("LoadRoomFromRoomList",{location:c+"_draggable",from_broadcaster:FK,broadcaster:d.W});e.metaKey||e.ctrlKey||(zj.h(d.W),e.preventDefault())});tb(["click","mousedown","touchstart"],this.il,function(){vn(d.W,"mr",b)});this.Oj=document.createElement("img");this.Oj.style.height="100%";this.Oj.style.width="100%";this.Oj.style.cursor="pointer";this.Oj.className="moreRooms";this.Oj.id="roomImage"+b;this.il.appendChild(this.Oj);this.jc=document.createElement("div");this.jc.innerText=a;this.jc.style.position="absolute";this.jc.style.bottom="7px";this.jc.style.color="#ffffff";this.jc.style.fontSize="19px";this.jc.style.textShadow="1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000";this.jc.classList.add("roomTitle"+b);this.il.appendChild(this.jc);this.Xa=new Jm(this.W,this.Oj);this.element.onmouseenter=function(){d.Xa.Uj()};this.element.onmouseleave=function(){Lm(d.Xa,!1)}}r(GK,G);GK.prototype.G=function(){void 0!==this.parent?this.jc.style.left=this.parent.element.offsetWidth/2-this.jc.offsetWidth/2+"px":u("Room does not have a parent")};GK.prototype.kg=function(){Lm(this.Xa,!1);G.prototype.kg.call(this)};GK.prototype.kl=function(){this.Xa.kl()};var HK,IK=!0;K.j(function(a){HK=ZG(a.C.rq);IK=a.A.Ce});function JK(a){G.call(this);var b=this;this.zx=[];this.Uo=[];this.mo=!0;this.Kt=!1;this.Lt="genders";this.Ze=[];this.Gu=new XG;this.ei=!1;this.source=a;this.element.style.fontSize="12px";this.element.style.overflowY="scroll";v("scroll",this.element,function(){KK(b)});t()&&(a=window.localStorage.getItem(this.Lt),null!==a&&(this.Ze=JSON.parse(a),IK&&(a=this.Ze.indexOf(ZG("followed")),0<=a&&this.Ze.splice(a,1))));this.Hf=document.createElement("div");this.Hf.style.margin="2px 2px 0 2px";this.Hf.style.whiteSpace="nowrap";this.Hf.style.textAlign="center";this.element.appendChild(this.Hf);LK(this,"Female",Je);LK(this,"Male",Ke);LK(this,"Couple",Me);LK(this,"Trans",Le);this.Jm=document.createElement("div");H(this.Jm,"defaultTooltipColor");this.Jm.innerText=se+"...";this.Jm.style.margin="4px";MK(this);var c=document.createElement("p");H(c,"defaultTooltipColor");c.style.cursor="pointer";c.style.padding="0";c.style.margin="0";c.onclick=function(){MK(b)};v("mouseenter",c,function(){c.style.textDecoration="underline"});v("mouseleave",c,function(){c.style.textDecoration=""});c.innerText=Ie;c.style.textAlign="left";this.Hf.appendChild(c);this.dD=window.setInterval(function(){for(var d=q(b.children()),e=d.next();!e.done;e=d.next())Km(e.value.Xa,0)},3E4);this.wr()}r(JK,G);JK.prototype.close=function(){clearInterval(this.dD)};function NK(a,b){a.Kt&&(a.element.removeChild(a.Jm),a.Kt=!1);b=q(b);for(var c=b.next();!c.done;c=b.next())a.J(new GK(c.value,a.children().length+1,a.source))}JK.prototype.children=function(){return G.prototype.children.call(this)};function LK(a,b,c){function d(){return"Followed"===b&&Bq('You must be logged in to view your followed cams. Click "OK" to login.')?!0:!1}var e=-1<a.Ze.indexOf(ZG(b.toLowerCase())),f=new Pq(12,e);Oq(f,function(){d()?Nq(f,!1):OK(a)});f.Ha.name=b.toLowerCase();f.xn(b);0<a.Uo.length&&(f.element.style.marginLeft="12px");f.element.style.top="2px";a.Hf.appendChild(f.element);a.zx.push(f);e=document.createElement("img");e.src="https://static-assets.highwebmedia.com/tsdefaultassets/icon"+b+".png";e.style.position="relative";e.style.top="2px";e.style.cursor="pointer";e.style.width="16px";e.style.height="16px";e.style.marginLeft="3px";e.title=c;e.onclick=function(){d()||(Mq(f,!f.Ha.checked),OK(a))};a.Hf.appendChild(e);e=document.createElement("span");H(e,"defaultTooltipColor");e.innerText=c;e.style.position="relative";e.style.top="1px";e.style.marginLeft="4px";e.style.cursor="pointer";e.onclick=function(){d()||(Mq(f,!f.Ha.checked),OK(a))};a.Hf.appendChild(e);a.Uo.push(e)}
function OK(a){a.Ze=[];for(var b=q(a.zx),c=b.next();!c.done;c=b.next())c=c.value,c.Ha.checked&&a.Ze.push(ZG(c.Ps()));C("ChangeRoomListGender",{selectedGenders:a.Ze});t()&&(0===a.Ze.length?window.localStorage.removeItem(a.Lt):window.localStorage.setItem(a.Lt,JSON.stringify(a.Ze)));MK(a)}
JK.prototype.G=function(){G.prototype.G.call(this);for(var a=this.element.clientWidth-8,b=q(this.children()),c=b.next();!c.done;c=b.next())c=c.value,c.element.style.width=a+"px",c.element.style.height=.5625*(this.element.clientWidth-8)+"px";this.Hf.style.width=a+"px";if(!this.mo&&this.Hf.scrollWidth<=a){c=q(this.Uo);for(b=c.next();!b.done;b=c.next())b.value.style.display="inline-block";this.mo=!0}if(this.mo&&this.Hf.scrollWidth>a){a=q(this.Uo);for(b=a.next();!b.done;b=a.next())b.value.style.display="none";this.mo=!1}KK(this)};function MK(a){Zb(a);a.Kt=!0;a.element.appendChild(a.Jm);!IK&&-1<a.Ze.indexOf(ZG("followed"))?(a.ei=!0,ws().then(function(b){0<b.length&&(PK(a),NK(a,b));QK(a);a.Z();a.ei=!1})):(QK(a),a.Z())}function RK(a){return 0===a.Ze.length?void 0===HK?window.default_gender.split(""):[HK]:a.Ze.filter(function(b){return b!==ZG("followed")})}
function QK(a){a.Gu.pc(RK(a),10);a.Gu.next().then(function(b){SK(a,b.map(function(c){return c.username}))}).catch(function(b){a.ei=!1;u("getNewIterator: "+b)})}function TK(a){a.ei||(a.ei=!0,a.Gu.next().then(function(b){SK(a,b.map(function(c){return c.username}))}).catch(function(b){a.ei=!1;u("loadMoreRooms: "+b)}))}function SK(a,b){0<b.length?(PK(a),NK(a,b),a.Z(),a.ei=!1,KK(a)):a.ei=!1}
function PK(a){for(var b=.5625*(a.element.clientWidth-8),c=a.element.scrollTop,d=[],e=q(a.children()),f=e.next();!f.done;f=e.next())if(f=f.value,f.element.offsetTop-c<-15*b)d.push(f);else break;b=q(d);for(f=b.next();!f.done;f=b.next())d=f.value,c-=d.element.offsetHeight,a.removeChild(d);a.element.scrollTop=c}function KK(a){a.element.scrollTop+2.8125*(a.element.clientWidth-8)>=a.element.scrollHeight-a.element.offsetHeight&&TK(a)}
JK.prototype.wr=function(){var a=this;Im&&v("pageshow",window,function(b){b.persisted&&a.children().forEach(function(c){c.kl()})})};function UK(a){G.call(this);var b=this;this.wl=a;this.Qj="public";this.hb=0;this.qj=this.wp=!1;this.Ci=new F("tipSent");this.Sy=new F("notifyAttemptSendTip");this.mA=new F("tipCalloutShouldReposition");this.fv=!1;this.element.id="FVTipCallout";H(this.element,"defaultTooltipColor");this.element.style.minWidth="368px";this.element.style.minHeight="175px";this.element.style.overflow="visible";a=document.createElement("div");a.style.display="inline-block";var c=document.createElement("span");c.innerText=af;c.style.display="inline-block";c.style.fontSize="13px";c.style.fontWeight="bold";c.style.padding="6px";a.appendChild(c);this.Zc=document.createElement("span");H(this.Zc,"tokenBalance");this.Zc.innerText=te+"...";this.Zc.style.display="inline-block";this.Zc.style.fontSize="13px";this.Zc.style.fontWeight="bold";this.Zc.style.padding="6px 6px 6px 0";a.appendChild(this.Zc);K.j(function(m){b.W=m.A.B();m.A.event.kc.j(function(n){switch(n.Ra){case "privatewatching":b.Qj="private";break;default:b.Qj="public"}})});Du.j(function(m){b.Dv(m.$c)});var d=document.createElement("a");H(d,"purchaseTokens");d.innerText=Kd;d.href="/tipping/purchase_tokens/";d.style.display="inline-block";d.style.position="absolute";d.style.right="0";d.style.fontSize="13px";d.style.padding="6px";d.onclick=function(){hl();return!1};d.onmouseenter=function(){d.style.textDecoration="underline"};d.onmouseleave=function(){d.style.textDecoration="none"};a.appendChild(d);this.element.appendChild(a);this.gF=a;this.zb=document.createElement("div");H(this.zb,"warning");this.zb.style.display="none";this.zb.style.fontSize="13px";this.zb.style.fontWeight="bold";this.zb.style.padding="6px";this.zb.style.textAlign="center";this.zb.style.position="absolute";this.zb.style.left="50%";a=document.createElement("div");a.innerText=cf;this.zb.appendChild(a);a=document.createElement("div");a.innerText=df;this.zb.appendChild(a);this.element.appendChild(this.zb);this.$e=document.createElement("form");c=document.createElement("label");a=document.createElement("span");a.innerText=ef;a.style.display="inline-block";a.style.fontSize="13px";a.style.padding="6px";c.appendChild(a);this.ha=fl();this.ha.value="25";this.ha.min="1";this.ha.style.width="5em";this.ha.style.display="inline-block";this.ha.style.fontSize="13px";this.ha.style.padding="4px";this.ha.style.borderWidth="1px";this.ha.style.borderStyle="solid";this.ha.style.borderRadius="4px";this.ha.onclick=function(){b.hj()};this.ke=document.createElement("div");H(this.ke,"warning");this.ke.innerText=ff;this.ke.style.display="none";this.ke.style.paddingLeft="5px";a=document.createElement("div");this.ha.oninput=function(){MG(b)};c.appendChild(this.ha);c.appendChild(this.ke);this.$e.appendChild(c);c=document.createElement("label");this.Yd=document.createElement("div");this.Yd.innerText=rd;this.Yd.style.fontSize="13px";this.Yd.style.padding="6px 6px 0 6px";c.appendChild(this.Yd);this.ve=document.createElement("div");this.la=document.createElement("textarea");H(this.la,"tipMessageInput");this.la.maxLength=255;this.la.style.width="100%";this.la.style.resize="none";this.la.style.fontSize="13px";this.la.style.margin="6px";this.la.style.padding="4px";this.la.style.borderWidth="1px";this.la.style.borderStyle="solid";this.la.style.borderRadius="4px";this.la.style.boxSizing="border-box";this.ve.appendChild(this.la);this.Yd.onclick=function(){b.la.select()};c.appendChild(this.ve);this.$e.appendChild(c);a.style.textAlign="right";a.style.position="relative";c=document.createElement("div");c.style.textAlign="left";this.oc=document.createElement("div");this.oc.innerText=gf;c.style.position="absolute";this.oc.style.display="none";c.style.fontSize="10px";c.style.cssFloat="left";c.style.lineHeight="1.3em";c.style.padding="6px";c.style.textAlign="left";c.style.left="0px";a.appendChild(c);c.appendChild(this.oc);this.X=new KG;this.J(this.X,a);this.In=document.createElement("div");this.In.style.fontSize="10px";var e=document.createElement("label"),f=document.createElement("span");f.innerText=hf;f.style.cursor="pointer";var g=new Pq(12);g.Zs=!0;g.element.style.top="2px";g.element.style.marginLeft="3px";Oq(g,function(){b.fv=!b.fv});e.appendChild(f);e.appendChild(g.element);this.In.appendChild(e);c.appendChild(this.In);this.$e.appendChild(a);v("keydown",this.element,function(m){9===m.keyCode&&(m.preventDefault(),m.shiftKey?b.X.hasFocus()&&!cl(b.X)?g.focus():document.activeElement===g.Ha?b.la.focus():document.activeElement===b.la?b.ha.focus():b.X.hasFocus()||cl(b.X):b.X.hasFocus()&&!dl(b.X)?b.ha.focus():document.activeElement===b.ha?b.la.focus():document.activeElement===b.la?g.focus():b.X.hasFocus()||dl(b.X))});this.element.appendChild(this.$e);this.G();var h;v("submit",this.$e,function(m){m.preventDefault();var n=parseInt(b.ha.value);if(!isNaN(n)&&b.X.isEnabled())if(C("SendTipClicked",{amount:n,location:"PMTab"}),100<n&&!b.qj)$k(b.X,Gc(n)),b.qj=!0,b.G();else if(b.ha.blur(),void 0===h){m=O();var p=b.la.value;void 0!==b.Aa&&(p=""===b.la.value?b.Aa.value:b.Aa.value+" | "+b.la.value);Gu({W:b.W,mv:b.ha.value,message:p,source:b.wl,nv:b.Qj,Di:b.X.Di,hg:m}).then(function(A){A.success?C("SendTipSuccess",{amount:n,location:"PMTab"}):void 0!==A.error?J(A.error):u("unknown send tip error");NG(b);b.la.value="";void 0!==A.Zj&&Cu.h({$c:A.Zj,W:b.W});b.Ci.h({amount:n,success:A.success})}).catch(function(A){u("Error sending tip ("+A+")");b.Ci.h({amount:n,success:!1})});b.Sy.h({amount:n});h=window.setTimeout(function(){return h=void 0},250)}})}r(UK,G);UK.prototype.G=function(){this.ve.style.width=Math.max(0,this.element.clientWidth-12)+"px";this.oc.style.maxWidth=Math.max(0,this.element.offsetWidth-this.X.element.offsetWidth-15)+"px"};UK.prototype.show=function(a){var b=this;this.X.Cc.D(!0);this.element.style.minWidth=450>ek()?"340px":"368px";void 0!==a.amount&&(this.ha.value=a.amount.toString(),MG(this));this.la.value=void 0!==a.message?a.message:"";void 0!==a.Vn&&a.Vn?(this.oc.style.display="none",this.In.style.lineHeight="3em"):(this.oc.style.display="block",this.In.style.lineHeight="");el(this.wl,this.X);Eu(this.W).then(function(c){b.ha.max=c.hb.toString();if(void 0!==c.vl){b.Yd.innerText=c.vl.label;void 0!==b.Aa&&b.ve.removeChild(b.Aa);b.Aa=document.createElement("select");H(b.Aa,"tipOptionsSelect");b.Aa.style.width="100%";b.Aa.style.fontSize=".8125em";b.Aa.style.margin="6px";b.Aa.style.borderWidth="1px";b.Aa.style.borderStyle="solid";b.Aa.style.boxSizing="border-box";b.ve.insertBefore(b.Aa,b.la);var d=document.createElement("option");d.innerText="-- "+jf+" --";b.Aa.appendChild(d);c=q(c.vl.options);for(d=c.next();!d.done;d=c.next()){var e=d.value;d=document.createElement("option");d.innerText=e.label;d.value=e.label;b.Aa.appendChild(d)}}else void 0!==b.Aa&&(b.Yd.innerText=rd,b.la.value="",b.ve.removeChild(b.Aa),b.Aa=void 0);b.G();b.mA.h(void 0);b.hj()}).catch(function(c){u("Error getting token balance ("+c+")")})};UK.prototype.hj=function(a){if(document.activeElement!==this.ha||(void 0===a?0:a))this.ha.focus(),this.ha.setSelectionRange(0,9999)};UK.prototype.Dv=function(a){this.hb=a;this.Zc.innerText=a+" "+Fc(a)};function VK(a){var b=a.element.parentElement;a.element.style.visibility="hidden";document.body.appendChild(a.element);a.element.style.width=a.gF.offsetWidth+"px";a.element.style.height="auto";var c=[a.element.offsetWidth,a.element.offsetHeight];document.body.removeChild(a.element);null===b||void 0===b?void 0:b.appendChild(a.element);a.element.style.visibility="";return c};var WK,XK=!1;K.j(function(a){WK=a.A;XK=a.C.userName===a.C.B});function YK(){G.call(this);this.Ev=new F("UserListWindow:userCountUpdate");this.Cb=[];this.element.id="users-list";this.element.style.padding="0 6px";this.element.style.boxSizing="border-box";this.element.style.position="";this.Yi();this.refresh(!1)}r(YK,G);k=YK.prototype;k.Mj=function(){for(;null!==this.element.firstChild;)this.element.removeChild(this.element.firstChild)};k.Yi=function(){var a=document.createElement("div");H(a,"defaultTooltipColor");a.innerText=lf+"...";a.style.margin="6px 0";this.element.style.fontSize="12px";this.element.appendChild(a)};k.ds=function(){var a=this,b=document.createElement("div");H(b,"defaultTooltipColor");b.style.margin="6px 0";var c=document.createElement("span");c.innerText=mf;c.id="refresh-userlist";c.style.cursor="pointer";v("click",c,function(d){a.Mj();a.Yi();a.refresh(!1);d.preventDefault()});v("mouseenter",c,function(){c.style.textDecoration="underline"});v("mouseleave",c,function(){c.style.textDecoration=""});b.appendChild(c);this.element.appendChild(b)};k.clear=function(a){this.Ev.h(a);this.Mj();this.Yi();this.G()};k.refresh=function(a){var b=this;a=void 0===a?!0:a;yu(WK).then(function(c){b.Ev.h(c.Rn);if(!a){b.Mj();b.ds();b.Cb=c.jf;for(var d=q(b.Cb),e=d.next();!e.done;e=d.next()){var f=e.value;e=document.createElement("div");e.style.width="auto";e.style.margin="2px 0";e.style.rx="left";e.style.whiteSpace="nowrap";e.style.overflow="hidden";e.style.maxWidth="100%";e.style.textOverflow="ellipsis";var g=e,h=g.appendChild,m=!document.body.classList.contains("darkmode");m=void 0===m?!0:m;f=XK?new fC(f,m,"",void 0,!1):new ZB(f,m,"",void 0,!1,!0);h.call(g,f.element);b.element.appendChild(e)}d=document.createElement("div");H(d,"defaultTooltipColor");d.innerText="+"+c.kk+" anonymous user"+(1===c.kk?"":"s");d.style.width="100%";d.style.margin="6px 0";d.style.whiteSpace="nowrap";d.style.rx="left";b.element.appendChild(d);b.G()}}).catch(function(c){u("Error retrieving user list: "+c)})};k.G=function(){G.prototype.G.call(this)};function ZK(a,b){a=void 0===a?"fullvideo":a;G.call(this);var c=this;this.zq=b;this.UB=[];this.Cl=new dH;this.rC=new F("focusChanging",{Ed:!1});this.sx=new F("focusChanged",{Ed:!1});this.EF=new F("windowOpened",{Ed:!1});this.DF=new F("windowClosed",{Ed:!1});this.cB=new F("windowHover",{Ed:!1});this.Lr=new F("chatVisibilityChanged",{Ed:!1});this.element.style.overflow="";this.element.style.pointerEvents="none";this.source=a;this.cb=$K(this,new vK(this));jq.j(function(g){c.cb.pb||(c.cb.element.style.display="",c.cb.pb=!0,c.Lr.h(!0));g.focus&&Qp(c,c.cb);c.cb.Z()});xj.j(function(){if(void 0!==c.Hv&&c.Hv.pb)c.removeChild(c.Hv);else{aL(c,"Users");var g=new YK,h=function(A){"privatewatching"!==A.Dd&&"privatewatching"!==A.Ra||window.setTimeout(function(){g.refresh(!1)},2E3);"notconnected"===A.Dd&&(g.refresh(!1),g.element.scrollTop=0)},m=!0,n=function(A){A.A.event.kc.j(h,!1);m||void 0===A.C.Rp||g.clear(A.C.Rp);m=!1};K.j(n);var p=$K(c,new Op(c,g,{title:ze,si:!0,nf:"Users",minWidth:100,minHeight:100,Af:190,zf:230,qg:[0,2]}));g.element.style.overflowY="auto";c.Z();g.Ev.j(function(A){p.xn(ze+" ("+A+")")});p.Hg=function(){K.removeListener(n)};c.Hv=p}});Cj.j(function(){c.cb.pb?(c.cb.element.style.display="none",c.cb.pb=!1,c.Lr.h(!1)):(c.cb.element.style.display="",c.cb.pb=!0,Qp(c,c.cb),c.Lr.h(!0));c.Z()});kq.j(function(){c.cb.pb||Cj.h(void 0);Qp(c,c.cb);c.bt=c.cb;c.cb.nb.Y.jd()});fq.j(function(){void 0!==c.Pt&&c.Pt.pb?c.removeChild(c.Pt):(bL(c),c.Z())});wj.j(function(g){function h(p){n.xn(p.C.B)}aL(c,"Bio");var m=new SJ(g),n=$K(c,new Op(c,m,{title:g,si:!0,nf:"Bio",zf:400,Af:360,minWidth:360,minHeight:100,qg:[0,2],Hg:function(){K.removeListener(h)}}));K.j(h,!1);c.Z()});var d;K.j(function(g){void 0!==g.C.Sa?d=g.C.Sa:u("isAgeVerified is not defined.")});var e;yj.j(function(g){if(void 0!==g.amount||!cL(c)){C("OpenTipCallout");void 0===c.lb&&(c.lb=new UK(a),c.lb.Sy.j(function(n){e=n.amount;void 0!==c.td&&yj.h({})}),c.lb.mA.j(function(){if(void 0!==c.td&&void 0!==c.lb){var n=q(VK(c.lb)),p=n.next().value;n=n.next().value;c.td.resize(n,p);c.Z()}}));void 0===g.amount&&(g.amount=e);var h=function(){void 0!==c.td&&c.removeChild(c.td)};if(d)var m=!Bq('You must be logged in to tip. Click "OK" to login.');else J("This broadcaster doesn't accept tips."),m=!1;m&&(void 0!==c.zq&&c.zq.AB(c.lb),c.lb.show(g),void 0!==c.td?Qp(c,c.td):(m=q(VK(c.lb)),g=m.next().value,m=m.next().value,c.td=$K(c,new Op(c,c.lb,{title:vd,si:!1,nf:"Tip",minWidth:g+4,minHeight:m+4,Af:g,zf:m,qg:[4],Hg:function(){K.removeListener(h);c.td=void 0},Yt:function(){void 0!==c.lb&&c.lb.hj()},Zt:function(n){if(void 0===c.td)return u("undefined tipwindow"),!0;27===n.keyCode?c.removeChild(c.td):83===n.keyCode&&n.ctrlKey&&c.removeChild(c.td);return!0}})),c.td.Rc.style.boxSizing="",K.j(h,!1),c.Z(),c.lb.hj(!0)))}});var f;K.j(function(g){0<g.C.Xg.length&&(f=g.C.Xg[0].vr,void 0!==c.tB&&c.tB.xn("App: "+f));void 0!==c.Fc&&c.Fc.pb&&c.removeChild(c.Fc);var h=g.A.status,m=!0!==g.C.Sa||!0!==g.C.ae;g.A.event.kc.j(function(p){h=p.Ra;switch(p.Ra){case "unknown":case "offline":case "notconnected":case "away":case "hidden":case "privatenotwatching":case "passwordprotected":void 0!==c.Fc&&c.Fc.pb&&c.removeChild(c.Fc);break;case "privaterequesting":case "privatewatching":case "privatespying":break;default:m&&void 0!==c.Fc&&c.Fc.pb&&c.removeChild(c.Fc)}});var n=["privaterequesting","privatespying","privatewatching"];g.A.event.zi.j(function(p){p.ae||-1!==n.indexOf(h)||void 0!==c.Fc&&c.Fc.pb&&c.removeChild(c.Fc)})});Aj.j(function(){void 0!==c.Hh&&c.Hh.pb?c.removeChild(c.Hh):(void 0!==c.Hh&&c.removeChild(c.Hh),c.Vg=new NJ,c.Hh=$K(c,new Op(c,c.Vg,{title:Ce,si:!0,nf:"Abuse",minWidth:270,minHeight:200,Af:270,zf:200,qg:[3,1],Yt:function(){void 0!==c.Vg&&c.Vg.Ee.focus()},Zt:function(){return!0},Hg:function(){c.Hh=void 0}})),c.Z(),c.Vg.Bo.j(function(){void 0!==c.Hh&&c.removeChild(c.Hh)}))});Bj.j(function(){void 0!==c.Fc&&c.Fc.pb?c.removeChild(c.Fc):(void 0===c.hn&&(c.hn=new wK(function(){void 0!==c.Fc&&c.Fc.pb&&c.Fc.ju.apply()})),c.Fc=$K(c,new Op(c,c.hn,{title:yg,si:!1,nf:"Private",oo:!0,minWidth:248,minHeight:270,Af:248,zf:270,qg:[2,1]})),c.Z())});this.jo=new hB;dL(this,this.jo);"1"===wb().room_list&&bL(this);Qp(this,void 0)}r(ZK,G);function bL(a){aL(a,"Rooms");var b=new JK(a.source),c=225+wk();a.Pt=$K(a,new Op(a,b,{title:Ee,si:!0,nf:"Rooms",minWidth:c,minHeight:100,Af:c,zf:385,qg:[1,2],Hg:function(){b.close()}}))}ZK.prototype.G=function(){G.prototype.G.call(this);for(var a=q([].concat(this.Cl.rf)),b=a.next();!b.done;b=a.next())b.value.ju.apply();void 0!==this.jo&&(this.jo.element.style.left=(this.element.clientWidth-this.jo.element.offsetWidth)/2+"px")};function Qp(a,b){if(!a.aE&&a.Nd!==b){if(void 0!==a.Nd){var c=a.Nd;c.Rc.style.opacity=void 0!==c.config.CB?c.config.CB:"1";void 0!==c.config.Zy&&c.config.Zy();if(document.activeElement!==document.body&&void 0!==document.activeElement&&null!==document.activeElement)try{document.activeElement.blur()}catch(f){}}a.rC.h(b);if(void 0!==b){C("FocusWindow",{windowName:b.config.nf});a.Cl.dd(b);c=a.children().length+10;for(var d=q([].concat(a.Cl.rf)),e=d.next();!e.done;e=d.next())e.value.element.style.zIndex=""+c,--c;d=q(a.UB);for(e=d.next();!e.done;e=d.next())e.value.element.style.zIndex=""+c,--c;b.Rc.style.opacity="1";void 0!==b.config.Yt&&b.config.Yt()}a.Nd=b;a.sx.h(b)}}ZK.prototype.J=function(){throw Error("addChild not supported");};function dL(a,b,c){b.element.style.pointerEvents="auto";G.prototype.J.call(a,b,c)}
function $K(a,b){b.fx.j(function(c){a.aE=c});v("mousedown",b.element,function(c){a.Nd!==b&&(Qp(a,b),c.preventDefault())});v("mouseover",b.element,function(){a.bt=b;a.cB.h(b)});a.Cl.dd(b);dL(a,b,void 0);Qp(a,b);a.EF.h(b);b.pb=!0;return b}ZK.prototype.removeChild=function(a){a.pb=!1;void 0!==a.Hg&&a.Hg();Qp(this,void 0);this.Cl.remove(a);G.prototype.removeChild.call(this,a);this.DF.h(a)};function aL(a,b){for(var c=q([].concat(a.Cl.rf)),d=c.next();!d.done;d=c.next())if(d=d.value,d.config.nf===b){a.removeChild(d);d===a.Nd&&Qp(a,void 0);break}}function cL(a){var b=!1;void 0!==a.td&&a.td.pb&&void 0!==a.lb&&!a.lb.fv&&(a.removeChild(a.td),b=!0);return b};var eL,fL;function gL(){var a=document.getElementById("ChatTabContainer");null!==a&&(a=a.offsetTop,0<a&&window.scrollTo(0,a))}
function hL(a,b){function c(){return void 0!==document.activeElement&&null!==document.activeElement&&0<=["input","textarea","select","button"].indexOf(document.activeElement.tagName.toLowerCase())&&!Sm()}function d(){return a.cb.nb.bc().Qd()||b.bc().Qd()}bk.vf.j(function(){eL=void 0});var e=new ac,f=0;Kj.j(function(h){f=h?f+1:f-1});bc(e,{keyCode:9,pi:!1,ba:function(h){if(!(!d()&&c()&&a.Nd!==a.td||Sm()||Sm())){Qp(a,a.cb);var m=function(n){h.shiftKey?n.Tw():n.Sw()};"split"===O()?(m(a.cb.nb),m(b)):(m(b),m(a.cb.nb));gL();h.preventDefault();h.stopPropagation()}}});bc(e,{keyCode:13,pi:!1,ba:function(h){d()?Bq()?h.preventDefault():Xa().scrollTop===fL&&void 0!==eL&&(Xa().scrollTop=eL,eL=void 0):(Qp(a,a.cb),("split"===O()?b:a.cb.nb).bc().jd())}});bc(e,{keyCode:27,pi:!1,ba:function(h){Sm()?(void 0!==Qm&&Qm.D(),Qp(a,void 0),eL=void 0):(h.stopPropagation(),h.preventDefault(),void 0!==a.Nd&&a.Nd.SB&&a.removeChild(a.Nd),Qp(a,void 0),Xa().scrollTop===fL&&void 0!==eL&&(b.bc().De(),Xa().scrollTop=eL,eL=void 0))}});bc(e,{keyCode:76,pi:!0,ba:function(h){if("split"===O()||a.Nd===a.cb)if("split"!==O()||"block"===b.ja.element.style.display)h.stopPropagation(),h.preventDefault(),a.cb.nb.Vi(),b.Vi()}});bc(e,{keyCode:83,pi:!0,ba:function(h){h.stopPropagation();h.preventDefault();"split"===O()||"hidden"===a.element.style.visibility?Iq.h({Vn:!0}):yj.h({Vn:!0})}});var g=[32,34,33];v("keydown",document,function(h){(27===h.keyCode||h.ctrlKey||h.metaKey?0:Sm()||-1!==g.indexOf(h.keyCode)||0!==f||!d()&&c())||void 0!==a.Nd&&Tp(a.Nd,h)||cc(e,h)||h.ctrlKey||h.metaKey||!yF(h.which)||(eL=Xa().scrollTop,"split"!==O()&&Qp(a,a.cb),zF.h(h),("split"===O()?b:a.cb.nb).bc().jd(),window.setTimeout(function(){fL=Xa().scrollTop},0))})};var iL,jL,kL={};K.j(function(a){kL.vc=a.C.ta.vc;kL.Ne=a.C.Ne;kL.Rf=!1;iL=a.C.rq;jL=a.A});Kq.j(function(a){kL.vc=a.vc});function lL(a,b,c){return 0===a?new fC(b,!0,c):new ZB(b,!0,c)}
function mL(a,b,c){var d=nL(a.N.username),e=Iw();e.style.padding="0";var f=lL(b,a.N,a.Tc);f.element.style.paddingRight="4px";e.appendChild(f.element);e.style.marginRight="4px";var g=Pz(new Oz(kL),a.message);void 0!==a.ef&&(g.style.color=a.ef);void 0!==a.font&&(f.element.style.fontFamily=a.font,g.style.fontFamily=a.font);H(g,"msg-text");g.classList.add("split-mode");void 0!==a.backgroundColor&&(e.style.background=a.backgroundColor);oL(d,e,new DI({lx:a.ef,Xv:a.backgroundColor}));e.appendChild(g);d.appendChild(e);ib()?window.setTimeout(function(){twemoji.parse(d,{className:"emojiChat"})},0):twemoji.parse(d,{className:"emojiChat"});OI(d,b,c);return d}
function pL(a,b,c){var d=nL(a.rs),e=document.createElement("div");e.style.display="inline-block";if(void 0!==a.background)e.style.background=a.background,e.style.marginTop="1px",e.style.textShadow="none",H(e,"hasBg"),"#ff8b45"===a.background&&(e.style.padding="0px 4px",H(e,"bright-background"));else{var f=Lw(void 0!==a.ya?a.ya:"#aaaaaa");e.setAttribute("data-purecolor",f);e.className="purecolor"}"#ff3"===a.background&&H(e,"isTip");H(e,"roomNotice");e.style.color=void 0!==a.ya?a.ya:"";e.style.fontWeight=void 0!==a.weight?a.weight:"normal";d.appendChild(qL(b,e,a.na));twemoji.parse(e,{className:"emojiChat"});d.innerText.startsWith("Notice:")&&e.removeAttribute("data-purecolor");oL(d,e,new DI({lx:a.ya,Xv:a.background}));OI(d,b,c);twemoji.parse(d);return d}
function oL(a,b,c){var d,e,f=void 0!==c.Br,g=void 0!==c.mx;if(f||g)a.classList.add("dm-adjust"),f&&(b.setAttribute("dm-adjust-bg",c.Br),b.setAttribute("dm-init-bg",null!==(d=c.background)&&void 0!==d?d:"")),g&&(b.setAttribute("dm-adjust-fg",c.mx),b.setAttribute("dm-init-fg",null!==(e=c.ya)&&void 0!==e?e:""))}
function qL(a,b,c){c=q(c);for(var d=c.next();!d.done;d=c.next()){var e=document.createElement("div");d=q(d.value);for(var f=d.next();!f.done;f=d.next())switch(f=f.value,f.hc){case 1:e.appendChild(rL(f));break;case 0:e.appendChild(lL(a,f.V).element);break;case 2:e.appendChild(sL(f.message));break;case 3:e.appendChild(tL("spy private show",function(){"privatespying"!==jL.status&&Iv(jL)}));break;case 4:e.appendChild(tL("start private show",function(){"privaterequesting"===jL.status&&Mv()}));break;default:u("Unknown roomNotice type for: "+
JSON.stringify(f))}b.appendChild(e)}return b}function tL(a,b){var c=document.createElement("a");H(c,"msg-link");c.style.textDecoration="underline";c.innerText=a;c.onclick=b;c.style.cursor="pointer";return c}function sL(a){var b=document.createElement("a");b.href="/tag/"+a+"/"+iL;H(b,"camSubjectTagColor");b.style.textDecoration="none";b.innerText="#"+a;return b}function uL(a){var b=nL();b.innerText=a;b.setAttribute("data-purecolor",Lw("#aaaaaa"));b.className="purecolor";return b}
function vL(a,b){function c(e){var f=document.createElement("span");f.innerText=e;return f}var d=nL();d.setAttribute("data-purecolor",Lw("#aaaaaa"));d.className="purecolor";d.appendChild(c(b?Qc:Pc));d.appendChild(document.createElement("br"));d.appendChild(c(Rc+" "));b=tL(Sc,function(){});b.href="/supporter/upgrade/";b.target="_blank";H(b,"msg-link");b.onclick=function(){C("SupporterPageOpened",{source:"chat"})};d.appendChild(b);d.appendChild(c(" "+Tc(a)+"."));return d}
function nL(a){a=void 0===a?"":a;var b=document.createElement("div");b.classList.add("msg-text");b.style.fontFamily="Tahoma,Arial,Helvetica,sans-serif";b.style.boxSizing="border-box";b.style.paddingTop="2px";b.style.paddingBottom="3px";b.style.paddingLeft="5px";b.style.paddingRight="5px";0<a.length&&b.setAttribute("data-nick",a);return b}
function rL(a){var b=document.createElement("span");!1!==a.eu?b=Pz(new Oz(kL),a.message):b.innerText=a.message;b.style.color=void 0!==a.ya?a.ya:"";b.style.backgroundColor=void 0!==a.background?a.background:"";b.style.fontWeight=void 0!==a.weight?a.weight:"";return b}function wL(a){var b=nL();return a.WD(b)};function xL(){Ml.call(this);var a=this;this.H=0;this.element.style.overflow="";this.F=new iJ({bn:function(){SA(a.A)},an:function(b){Iq.h(b)},Xm:function(b){VA(a.A,b);a.F.De()}});this.J(this.F);K.j(function(b){a.A=b.A;a.F.fa(uL("Rules: No spamming. Do not insist the cam hosts to do as you please. Do not announce other rooms or websites that would conflict with this room. Avoid any argumentative and/or rude posts related to the cam viewing. Do not attempt to post your e-mail address in the public chat."));a.F.fa(uL("To go to next room, press CTRL+/. To send a tip, press CTRL+S or type \"/tip 25\". To disable emoticons or adjust autocomplete settings, click the 'Gear' tab above."));if(0<b.C.Xg.length){var c=a.F,d=c.fa,e=b.C.B;b=b.C.Xg;var f=nL(),g=document.createElement("span");g.innerText=Jc(e);f.appendChild(g);for(e=0;e<b.length;e+=1)g=document.createElement("a"),g.href=b[e].Sv,g.target="_blank",g.innerText=b[e].vr,H(g,"msg-link"),g.style.textDecoration="none",f.appendChild(g),e<b.length-1&&(g=document.createElement("span"),g.innerText=", ",f.appendChild(g));f.setAttribute("data-purecolor",Lw("#aaaaaa"));f.className="purecolor";d.call(c,f)}Pl(a)});tc.j(function(){a.F.clear()})}r(xL,Ml);k=xL.prototype;k.Od=function(){return this.H};k.G=function(){Ml.prototype.G.call(this);this.F.Pa()};k.Pa=function(){this.F.Pa()};k.vg=function(){return 99<this.H?we+" (99+)":0<this.H?we+" ("+this.H+")":we};k.gh=function(){return"chat-tab-default"};k.jd=function(){this.F.jd()};k.De=function(){this.F.De()};k.Qd=function(){return this.F.Qd()};k.Bb=function(){Ml.prototype.Bb.call(this);this.H=0;this.Ub();this.F.Pa()};k.$o=function(a){for(var b=[],c=q(this.F.ra.childNodes),d=c.next();!d.done;d=c.next())d=d.value,d.getAttribute("data-nick")===a&&b.push(d);a=q(b);for(b=a.next();!b.done;b=a.next())this.F.ra.removeChild(b.value)};k.ie=function(){return this.F.ie()};k.te=function(a){this.F.te(a)};k.Si=function(a){this.F.Si(a)};k.fh=function(){return this.F.sa};k.Xd=function(a){Ml.prototype.Xd.call(this,a);C("FocusTab",{location:"chat"})};function yL(a,b){b=void 0===b?!1:b;Ol.call(this);var c=this;this.Ft=a;this.jh=b;this.H=0;this.dn=new F("incomingPm");this.Gb=new Map;this.ca=new fH;this.Nu=function(d){var e=c.Gb.get(c.ca.Ca);e.Kl||(e.F.fa(uL(d)),e.Kl=!0)};this.element.style.overflow="";this.od=new lu({wa:!1,Of:!1,Ue:co,Eh:function(d){d!==c.H&&(c.H=d,c.Ub())},jh:this.jh});this.J(this.od);jq.j(function(d){c.Me();XJ(c);void 0===c.Gb.get(d.username)&&c.kh(d.username,!1,d.Dn);iH(c.ca,d.username);c.Ub();c.xh();d.focus&&Pl(c)});K.j(function(d){c.A=d.A});eo.j(function(d){c.Wi(d)});co.j(function(d){c.Me();iH(c.ca,d);c.xh()});CG.j(function(d){var e,f=YJ(c),g=!1===(null===f||void 0===f?void 0:lJ(f.F));c.Cn(d,!0);g&&ho.h(null!==(e=null===f||void 0===f?void 0:f.V)&&void 0!==e?e:"")});mq.j(function(){var d=c.Gb.get(c.ca.Ca);!1===d.ai&&c.It(d)});rt.j(function(d){c.ca.dd(d);c.kh(d,!1,!1)})}r(yL,Ol);k=yL.prototype;k.Cn=function(a,b){b=void 0===b?!1:b;a||(this.Me(),b||1<this.od.ab.childNodes.length?(this.od.element.style.display="block",this.od.Z()):(this.jh||iH(this.ca,this.A.B()),this.xh()))};k.Pa=function(){var a=YJ(this);void 0!==a&&a.F.Pa()};k.Od=function(){return this.H};k.vg=function(){return 99<this.H?"PM (99+)":0<this.H?"PM ("+this.H+")":"PM"};k.ie=function(){var a=YJ(this);return void 0===a?"":a.F.ie()};k.te=function(a){var b=YJ(this);void 0!==b&&b.F.te(a)};k.Xd=function(a){Ol.prototype.Xd.call(this,a);C("FocusTab",{location:"PM",unread:this.Od()});Pl(this);this.Cn(!1)};k.tj=function(){return 0===this.Gb.size};k.gh=function(){return"pm-tab-default"};k.jd=function(){var a=YJ(this);void 0===a?u("session undefined"):a.F.jd()};k.De=function(){var a=YJ(this);void 0===a?u("session undefined"):a.F.De()};k.Qd=function(){var a=YJ(this);return void 0===a?(u("session undefined"),!1):a.F.Qd()};k.G=function(){Ol.prototype.G.call(this);var a=YJ(this);void 0!==a&&a.F.Pa()};k.kh=function(a,b,c,d){var e=this;d=void 0===d?!1:d;var f,g,h=this.Gb.get(a);void 0===h?(h=Jw(),h.innerHTML=Kc(a),h.style.textAlign="center",h.style.width="auto",h.style.borderBottom="1px solid #acacac",h.style.margin="0 10px 5px 5px",h.style.display="none",h.style.color="#cfcfcf",h={F:new iJ({an:function(m){Iq.h(m)},bn:function(){SA(e.A)},Xm:function(m){ho.h(a);e.ca.dd(a);yt({message:m,username:a,source:"roomviewPM",W:e.A.B(),Hs:e.Nu})}},!0),H:0,Wm:0,V:a,Wl:h,nh:new FG,Pf:!1,Gm:!1,ai:!1,Kl:!1},this.Gb.set(a,h),h.F.Wg(uL(dd(a))),h.F.Wg(uL(Mc())),!b&&c?(c=null!==(g=null===(f=Ia.current.qb)||void 0===f?void 0:f.Sa)&&void 0!==g?g:!1,h.F.Wg(vL(a,c))):h.F.Wg(h.nh.Cx()),h.F.element.style.display="none",this.J(h.F)):h.Wl.style.display="";d||!0!==b||h.Gm||(h.Gm=!0,this.dn.h({username:a}));void 0===this.ca.Ca&&iH(this.ca,a);return h};k.It=function(a){if(!a.nh.Sc()){a.nh.qA();var b=a.F.ra.clientHeight,c=a.F.fm;c=void 0!==c?vb({offset:c,room:this.A.B()}):vb({room:this.A.B()});y("api/ts/chatmessages/pm_list/"+a.V+"/?"+c).then(function(d){a.nh.Rx();d=JSON.parse(d.responseText).messages;30>d.length&&(a.ai=!0);var e=d.length-1;d.reverse().map(function(f,g){f=Xn(new P(f));a.F.fa(mL(f,1),!0,!0);g===e&&void 0!==f.Tc&&a.F.vn(f.Tc)});a.F.Wa.scrollTop=a.F.ra.clientHeight-b})}};k.fa=function(a,b,c,d,e){d=void 0===d?!1:d;AI(a,document.body.classList.contains("darkmode"));this.ca.dd(c);var f=this.kh(c,b!==this.A.username(),!1,d);d&&!1===f.Pf&&(f.Pf=!0);this.A.username()===b||Rl(this)&&this.ca.Ca===c||(f.H+=1,f.Wm+=1,this.Ub());f.Pf&&(a=f.F.fa(a,void 0,!0));void 0!==e&&f.F.vn(e);return a};k.en=function(a){if(Rl(this)){var b=YJ(this);void 0!==b&&b.F.fa(a)}};k.$u=function(a){function b(){return"next"===a?gH(c.ca):hH(c.ca)}var c=this;this.Me();for(var d=b(),e=!1;void 0!==d&&d!==this.A.B()&&!this.od.Jg.has(d)&&0!==this.od.Fh();)this.ca.remove(d),d=b(),void 0!==d||e||("next"===a?aK(c):bK(c),d=b(),e=!0);if(void 0===d)return!1;this.xh();return!0};k.Wi=function(a){var b=this.Gb.get(a);if(void 0!==b){var c=Rl(this)&&this.ca.Ca===a;this.ca.remove(a);b.F.tb();this.removeChild(b.F);this.Gb.delete(a);c&&(ZJ(this)||this.Ft());this.Ub();eo.h(b.V)}};k.Vi=function(){var a=YJ(this);void 0===a?u("cannot close current tab"):this.Wi(a.V)};k.xh=function(){void 0===this.ca.Ca&&iH(this.ca,this.A.B());if(void 0===this.ca.Ca)u("no currentpmsession");else{var a=this.Gb.get(this.ca.Ca);void 0===a&&this.kh(this.ca.Ca,!1,!1);a=this.Gb.get(this.ca.Ca);"split"!==O()||a.Pf||this.A.Ce||(a.Pf=!0,xt(a.V,this.A.B()));XJ(this);a.F.element.style.display="block";a.F.Wa.style.display="block";a.F.ma.style.display="block";a.F.Z();0<a.H&&(a.H=0,this.Ub());ho.h(a.V);uc.h(a.V);nq.h();a.F.fa(a.Wl)}};k.Me=function(){var a=YJ(this);void 0!==a&&(a.F.element.style.display="none")};k.fh=function(){var a=YJ(this);if(void 0!==a)return a.F.sa};function zL(){function a(){if(!b.ag&&(Er(b.Eb),void 0!==b.parent)){var f=b.parent;f.rb(f.children()[0])}}Ol.call(this);var b=this;this.Eb=new ur;this.ag=!1;this.element.id="SplitModeChatSettingsTab";H(this.element,"defaultColor");this.element.style.fontSize="12px";this.element.style.fontFamily="Tahoma, Arial, Helvetica, sans-serif";this.element.style.boxSizing="border-box";this.ma=eJ();var c=dJ();this.Ka=fJ(function(){},4096);v("click",this.Ka.element,a);v("focus",this.Ka.element,a);this.Ld=new XI;this.uc=ZI(this.Ld,(new gJ(!1)).element);this.uc.style.marginLeft="6px";this.uc.onclick=a;c.appendChild(this.Ka.element);this.ma.appendChild(c);this.ma.appendChild(this.Ld.element);this.element.appendChild(this.ma);this.element.appendChild(this.ma);var d=document.createElement("div");d.innerText=ve;d.style.position="absolute";d.style.top="30px";d.style.right="10px";d.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";d.style.color="#000000";d.style.backgroundColor="#d8deea";d.style.border="1px solid #acacac";d.style.borderRadius="4px";d.style.padding="8px 12px";d.style.opacity="0";this.element.appendChild(d);bk.vf.j(function(){"split"===O()&&(Xb(b,b.Eb),b.Eb.element.style.margin="0")});var e;this.Eb.Kr.j(function(){clearTimeout(e);xp(d,"250ms");d.style.opacity="1";e=window.setTimeout(function(){xp(d,"1000ms");d.style.opacity="0"},3E3)})}r(zL,Ol);k=zL.prototype;k.ij=function(){return Object.assign(Object.assign({},Ol.prototype.ij.call(this)),{minWidth:"34px",backgroundImage:this.collapsed?"none":"url(https://static-assets.highwebmedia.com/tsdefaultassets/ico-preferences.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center",boxSizing:"border-box",minHeight:"20px"})};k.G=function(){"split"===O()&&(YI(this.Ld),this.ma.style.width=this.element.clientWidth-10+"px",this.Ka.element.style.width=Math.max(0,this.ma.clientWidth-18-Math.ceil(this.uc.offsetWidth)-4)+"px",this.Eb.element.style.height=this.element.clientHeight-28-4+1+"px")};k.vg=function(){return this.collapsed?ue:Ol.prototype.vg.call(this)};k.gh=function(){return"settings-tab-default"};k.jd=function(){this.Ka.focus()};k.De=function(){this.Ka.blur()};k.Qd=function(){return document.activeElement===this.Ka.element};k.Pa=function(){this.Eb.element.scrollTop=this.Eb.element.scrollHeight-this.Eb.element.offsetHeight};k.ie=function(){return JF(this.Ka)};k.te=function(a){var b=this;this.ag=!0;KF(this.Ka,a);this.Ka.blur();window.setTimeout(function(){b.ag=!1},100)};k.fh=function(){return this.Ka};k.Xd=function(a){Ol.prototype.Xd.call(this,a);C("FocusTab",{location:"chatSettings"})};function AL(a){a=void 0===a?!1:a;Hl.call(this);var b=this;this.jh=a;this.Y=new xL;this.$q=new zJ;this.me=!1;this.qh=new Ub;this.Kb.element.style.padding="1px 3px 0 3px";this.Kb.element.style.boxSizing="border-box";this.Kb.element.style.borderBottom="";this.Kb.element.style.height="22px";this.window.style.width="";this.window.style.position="";this.element.id="ChatTabContainer";this.element.style.display="inline-block";this.element.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.element.style.borderRadius="4px 4px 0 0";this.element.style.margin="0 0 6px 8px";this.element.style.boxSizing="border-box";this.element.style.overflow="";this.Wj=Object.assign(Object.assign({},this.Wj),{position:"static",fontSize:"11px",marginRight:"2px",padding:"3px 8px"});this.Y=Kl(this,this.Y);this.$q=Kl(this,this.$q);this.ja=Kl(this,new yL(function(){b.rb(b.Y)},this.jh));this.ja.Bb();this.yn=Kl(this,new zL);this.Fs=BL(this);this.Kb.J(this.Fs);this.rb(this.Y);K.j(function(d){b.me=d.C.userName===d.C.B;b.A=d.A;b.rb(b.Y);cK(b.ja);b.me||jq.h({username:d.C.B,focus:!1,Dn:d.C.Op});d.A.event.jl.j(function(e){b.St(e,d.A.username())});d.A.event.Ga.j(function(e){b.Pm(e,d.A.username())});ao.j(function(e){b.Pm(e,d.A.username())});d.A.event.vz.j(function(e){var f=mL(e,fK(b));b.ja.fa(f,e.N.username,e.Da)});d.A.event.oq.j(function(e){b.Y.$o(e.username);b.Y.F.yu(e.username);b.ja.Wi(e.username)});d.A.event.kc.j(function(e){"notconnected"===e.Dd&&b.Ph===b.$q&&b.$q.refresh(!1)});d.A.event.sr.j(function(e){d.A.Jl&&b.Y.F.fa(uL("DEBUG: "+e))});d.A.event.Tp.j(function(e){b.tm(e,d)});E($n.j(function(e){b.ja.fa(mL(e,fK(b)),e.N.username,e.Da)},!1),b.qh);E(qt.j(function(e){var f=e.ly?e.Tc:void 0;b.ja.fa(mL(e,fK(b)),e.N.username,e.Da,!0,f)},!1),b.qh);E(bo.j(function(e){b.Y.F.fa(uL(e.message))},!1),b.qh)});tc.j(function(){Vb(b.qh)});lq.j(function(d){d?b.Y.F.fa(uL("Debug mode enabled. Type /debug again to disable.")):b.Y.F.fa(uL("Debug mode disabled."))});vc.j(function(d){b.Y.F.fa(wL(d));d.xa&&b.ja.en(wL(d))});yJ.j(function(){b.Ub()});kq.j(function(d){"split"===O()&&(b.rb(b.Y),b.Y.Si("@"+d+" "),b.Y.jd())});kk.j(function(){b.Fs.fe.Rb()&&b.Fs.fe.Va()});var c=new bH;this.ja.dn.j(function(d){cH(c,d.username)&&yu(b.A,"a",!1).then(function(e){-1!==e.jf.map(function(f){return f.username}).indexOf(d.username)&&b.Y.F.fa(pL({na:[[{hc:1,message:"New private conversation from "+d.username+" "},{hc:1,message:"(Press TAB to cycle through your conversations)",ya:"#cd0000",weight:"700"}]],xa:!1},fK(b)))})});jq.j(function(){window.setTimeout(function(){b.Z()},0)});nq.j(function(){b.G()})}
r(AL,Hl);k=AL.prototype;k.St=function(a,b){VJ(this.Y);pG(rG(),a.N);a=mL(a,fK(this),b);AI(a,document.body.classList.contains("darkmode"));this.Y.F.fa(a,void 0,!0)};k.Pm=function(a,b){b=pL(a,fK(this),b);AI(b,document.body.classList.contains("darkmode"));this.Y.F.fa(b);a.xa&&this.ja.en(pL(a,fK(this)))};function BL(a){var b=new xl(void 0,!0);H(b,"tab");pk(b,Object.assign(Object.assign({},a.Wj),{position:"absolute",height:"19px",width:"32px"}));pk(b.fe,{width:"105px",padding:"8px 0",borderWidth:"1px",borderStyle:"solid"});H(b.fe,"chat-tabs-dropdown-border");return b}k.yr=function(a){a=Hl.prototype.yr.call(this,a);a.element.classList.add("chat-tab-handle");return a};k.tm=function(a,b){return ds(this,function d(){var e=this,f,g,h,m,n;return za(d,function(p){if(1==p.ia)return f=e,e.me||a.ql===b.C.userName?p=ra(p,uH({Wv:a.zh,Mw:a.ql,ty:!a.bi,Uz:b.C.B}),3):(p.ia=0,p=void 0),p;g=p.wd;h=function(A,z){return f.tm(A,z)};m=function(A){f.Zu(A)};n=wH(a,g,b,m,h);void 0!==n&&e.Y.F.fa(n);p.ia=0})})};k.Zu=function(a){this.Y.F.fa(uL(a))};k.G=function(){var a=this;Hl.prototype.G.call(this);var b=this.element.clientHeight-28-this.Kb.element.offsetHeight-8;this.Y.F.Wa.style.height=b+"px";window.setTimeout(function(){var c=YJ(a.ja);void 0!==c&&(c.F.Wa.style.height=b-32+"px")},0);this.Kb.Z()};k.rb=function(a){var b="";void 0!==this.Ph&&(b=this.Ph.ie());this.Ph=a;Nl(this);this.Ph.te(b)};k.bc=function(){return Hl.prototype.bc.call(this)};k.children=function(){return Hl.prototype.children.call(this)};k.Sw=function(){Er(this.yn.Eb);Hl.prototype.bc.call(this)===this.Y?this.ja.tj()||(this.rb(this.ja),aK(this.ja),ZJ(this.ja)||u("no pmSessions")):0<this.Y.Od()?this.rb(this.Y):ZJ(this.ja)||($J(this.ja),this.rb(this.Y),ZJ(this.ja));this.Z()};k.Tw=function(){Er(this.yn.Eb);Hl.prototype.bc.call(this)===this.Y?this.ja.tj()||(this.rb(this.ja),bK(this.ja),$J(this.ja)||u("no pmSessions")):$J(this.ja)||(ZJ(this.ja),this.rb(this.Y),$J(this.ja))};k.Vi=function(){Hl.prototype.bc.call(this)===this.ja&&this.ja.Vi()};function CL(){L.call(this);var a=this;this.element.id="AbuseReportModal";this.element.style.visibility="hidden";this.element.style.maxWidth="350px";this.element.style.height="203px";this.element.style.borderWidth="2px";this.element.style.borderStyle="solid";this.element.style.borderRadius="4px";this.element.style.overflow="";v("keydown",this.element,function(c){27===c.keyCode&&a.D()});var b=Pj("","","295px");H(b,"divot");this.element.appendChild(b);this.za=document.createElement("div");H(this.za,"header");this.za.innerText=Ce;this.za.style.fontSize="15px";this.za.style.fontFamily="UbuntuBold, Arial, Helvetica, sans-serif";this.za.style.padding="6px";this.element.appendChild(this.za);this.Sb.j(function(){a.D()})}r(CL,L);CL.prototype.show=function(a){var b=this;this.Vg=this.J(new NJ);this.Vg.Bo.j(function(){b.D()});this.pq=a;this.cf();this.G();this.Vg.element.style.height=Math.max(0,this.element.clientHeight-this.za.clientHeight)+"px";this.element.style.visibility="";this.Vg.Ee.focus();this.Z()};CL.prototype.G=function(){void 0===this.pq?this.D():(this.element.style.top=this.pq.offsetHeight-4+"px",this.element.style.left=this.pq.offsetLeft+this.pq.offsetWidth-this.element.offsetWidth+(518>ek()&&"split"===O()?4:-4)+"px")};CL.prototype.D=function(){this.removeChild(this.Vg);this.kb();this.element.style.visibility="hidden"};function DL(a,b){function c(z){var D=document.createElement("span");D.innerText=z;D.title=z;D.style.overflow="hidden";D.style.lineHeight="1.4";D.style.height="21px";D.style.maxWidth="76px";D.style.fontSize="12px";D.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";D.style.margin="11px 0px 11px 0px";D.style.textOverflow="ellipsis";D.style.padding="3px 10px 3px";D.style.borderRadius="4px";D.style.boxSizing="border-box";D.style.cursor="pointer";D.style.display="none";return D}G.call(this);var d=this;this.oa=a;this.cp=this.Gt=!1;this.ee=b;this.element.id="VideoPanel";this.element.style.position="relative";this.element.style.display="inline-block";this.element.style.borderRadius="4px 4px 0 0";this.element.style.boxSizing="border-box";this.element.style.height="auto";this.element.style.fontFamily="UbuntuRegular, Helvetica, Arial, sans-serif";this.element.style.fontSize="11px";this.element.style.overflow="visible";KB=this.element;var e;this.rd=document.createElement("a");H(this.rd,"reportAbuseLink");this.rd.href="#";this.rd.innerText=De;this.rd.style.fontSize="10px";this.rd.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.rd.style.textDecoration="none";this.rd.style.padding="8px 6px 12px 0";this.rd.style.cssFloat="right";this.rd.onmouseenter=function(){d.rd.style.textDecoration="underline"};this.rd.onmouseleave=function(){d.rd.style.textDecoration="none"};this.rd.onclick=function(z){z.preventDefault();void 0===e&&(e=d.J(new CL));e.show(d.rd)};this.element.appendChild(this.rd);this.Gc=document.createElement("div");H(this.Gc,"defaultColor");this.Gc.style.fontFamily="UbuntuMedium, Helvetica, Arial, sans-serif";this.Gc.style.height="22px";this.Gc.style.lineHeight="24px";this.Gc.style.overflow="hidden";this.Gc.style.fontSize="12px";this.Gc.style.padding="4px 0 4px 9px";this.Gc.onmouseenter=function(){d.Gc.clientHeight<d.Gc.scrollHeight-2&&(d.Vb.style.visibility="",d.Vb.style.top=d.Gc.offsetTop+d.Gc.offsetHeight+2+"px")};this.Gc.onmouseleave=function(){d.Vb.style.visibility="hidden"};this.Vb=document.createElement("div");H(this.Vb,"roomSubjectTooltip");H(this.Vb,"roomSubjectToolTipColor");this.Vb.style.visibility="hidden";this.Vb.style.fontFamily="UbuntuRegular, Arial, Helvetica, sans-serif";this.Vb.style.fontSize="12px";this.Vb.style.boxSizing="border-box";this.Vb.style.zIndex="999";this.Vb.style.position="absolute";this.Vb.style.borderRadius="4px";this.Vb.style.borderWidth="1px";this.Vb.style.borderStyle="solid";this.Vb.style.padding="10px";this.Vb.style.width="500px";this.Vb.style.height="auto";this.Vb.style.lineHeight="16px";this.element.appendChild(this.Gc);this.element.appendChild(this.Vb);JJ(this.oa,b);this.J(this.oa);this.Ml=new rl;this.J(this.Ml);this.fd=document.createElement("span");this.fd.style.width="270px";this.fd.style.height="69px";this.fd.style.display="inline-block";this.fd.style.verticalAlign="top";this.fd.style.margin="0";this.Ml.element.appendChild(this.fd);this.zc=b.cb.nb.Y.ur.zc;this.zc.aq.j(function(){if("split"===O()){for(;null!==d.fd.firstChild;)d.fd.removeChild(d.fd.firstChild);d.fd.appendChild(d.zc.element.cloneNode(!0))}});window.setTimeout(function(){d.cp=!0},2E3);bk.vf.j(function(z){z=z.Jo;d.Ml.element.style.display="split"===z?"block":"none";d.fd.style.display="split"===z?"inline-block":"none";d.eg.style.display="split"===z?"inline-block":"none";d.element.style.border="split"===z||"theater"===z?"1px solid #acacac":"none";d.Gc.style.display="fullscreen"===z?"none":"block";d.rd.style.display="fullscreen"===z?"none":"inline";"split"===z||"theater"===z?H(d.element,"border"):I(d.element,"border");d.dk()});Bk.j(function(){d.dk()});this.eg=document.createElement("div");H(this.eg,"defaultColor");this.eg.style.height="69px";this.eg.style.boxSizing="border-box";this.eg.style.fontSize="11px";this.eg.style.overflow="hidden";this.eg.style.display="inline-block";this.eg.style.verticalAlign="top";this.eg.style.margin="0";this.Ml.element.appendChild(this.eg);a=document.createElement("div");a.style.display="block";a.style.boxSizing="border-box";a.style.width="100%";a.style.height="100%";a.style.padding="2px 10px";this.eg.appendChild(a);b=document.createElement("div");H(b,"currentBalance");b.style.display="block";b.style.height="19px";a.appendChild(b);var f=document.createElement("span");f.innerText=bf;b.appendChild(f);this.hb=document.createElement("span");this.hb.innerText="0";this.hb.style.fontSize="15px";this.hb.style.fontFamily="UbuntuBold, Helvetica, Arial, sans-serif";b.appendChild(this.hb);this.Qq=document.createElement("span");this.Qq.innerText=" tokens";b.appendChild(this.Qq);b=document.createElement("div");b.style.display="inline-block";b.style.verticalAlign="top";b.style.width="130px";b.style.textOverflow="ellipsis";b.style.overflow="hidden";b.style.whiteSpace="nowrap";a.appendChild(b);var g=EL(Ld);g.style.margin="2px 0 0 0";g.href="/tipping/purchase_tokens/";g.onclick=function(){hl();return!1};g.onmouseenter=function(){g.style.textDecoration="underline"};g.onmouseleave=function(){g.style.textDecoration="none"};b.appendChild(g);var h=EL(uh),m=!1;tw(h,this.oa.xc)&&(b.appendChild(h),m=!0);this.Wc=EL(Od);this.Wc.style.display="none";b.appendChild(this.Wc);var n=document.createElement("div");n.innerText=Dd;n.style.display="none";a.appendChild(n);this.dA=document.createElement("span");this.dA.style.display="none";a.appendChild(this.dA);var p=new Ub,A="";Fj.j(function(){var z;return null===(z=d.eb)||void 0===z?void 0:z.D()});K.j(function(z){var D;if(void 0===z.C.Sa||void 0===z.C.ae)u("Dossier is missing context.");else{null===(D=d.eb)||void 0===D?void 0:D.show();mb()&&!kb()&&!$a()&&m&&vo&&void 0===d.eb&&(d.eb=Pk(h,{width:250,content:mj,wm:!1,de:d.oa.O instanceof iB?0:1,Df:"30px",wg:function(){return 20},Sg:function(){return 3},Bq:["split"]}),v("click",h,function(){var Q;null===(Q=d.eb)||void 0===Q?void 0:Mk(Q)}));A=z.C.B;d.Gc.innerText=z.C.jc;d.Vb.innerText=z.C.jc;D=isNaN(z.C.hb)?0:z.C.hb;d.hb.innerText=""+D;d.Qq.innerText=" "+Fc(D);d.ll.style.display="none";d.Sa=z.C.Sa;var la=!0===z.C.ae;d.Sa?(d.X.style.display="inline-block",n.style.display="none",z.A.event.zi.j(function(Q){la=Q.ae;FL(d,la,z.A,z.A.status)}),z.A.event.kc.j(function(Q){var na;if(d.oa.O.Ai){var bb=function(){FL(Lc,la,z.A,Q.Ra)},Lc=d;cq(z,Q)?bb():dq(z,Q).then(bb);"passwordprotected"===Q.Ra&&(null===(na=d.eb)||void 0===na?void 0:na.D())}})):(d.X.style.display="none",FL(d,!1,z.A,z.C.Ab),n.style.display="block",n.style.position="absolute",n.style.top="54px");E(CB.j(function(){FL(d,la,z.A,z.C.Ab)}),p);E(z.A.event.pv.j(function(Q){d.Gc.innerText=Q;d.Vb.innerText=Q}),p);d.cp=!1;window.setTimeout(function(){d.cp=!0},2E3)}});Du.j(function(z){d.hb.innerText=""+z.$c;d.Qq.innerText=" "+Fc(z.$c)});this.X=c(ud);H(this.X,"sendTipButton");this.X.style.textShadow="#588d3d 1px 1px 0px";this.X.style.marginRight="4px";this.ll=c(Oc);H(this.ll,"sendPmButton");this.ll.style.textShadow="#F47321 1px 1px 0px";H(this.X,"gradient");H(this.ll,"gradient");a.appendChild(this.X);st()&&a.appendChild(this.ll);this.X.onclick=function(){Iq.h({})};this.ll.onclick=function(){Bq()||fD.h(A)};tc.j(function(){Vb(p)})}r(DL,G);DL.prototype.dk=function(){var a=this;if("split"===O())this.zc.element.style.padding="0",this.zc.aq.h(void 0);else{for(;null!==this.fd.firstChild;)this.fd.removeChild(this.fd.firstChild);this.zc.element.style.padding="3px 5px";this.cp?rH(this.ee.cb.nb.Y.ur):window.setTimeout(function(){rH(a.ee.cb.nb.Y.ur)},2E3)}0<this.element.clientWidth&&500>this.element.clientWidth?(this.zc.element.style.width="100%",this.fd.style.width="100%"):(this.zc.element.style.width="270px",this.fd.style.width="270px")};function EL(a){var b=document.createElement("a");H(b,"panelLink");b.innerText=a;b.title=a;b.style.lineHeight="1.3";b.style.display="block";b.style.maxWidth="130px";b.style.overflow="hidden";b.style.textOverflow="ellipsis";b.style.textDecoration="none";b.style.cursor="pointer";b.onmouseenter=function(){b.style.textDecoration="underline"};b.onmouseleave=function(){b.style.textDecoration="none"};return b}
function FL(a,b,c,d){a.Wc.innerText=Od;var e=["privaterequesting","privatewatching","privatespying"];if(b||-1!==e.indexOf(d))switch(a.Wc.style.display="block",a.Wc.onclick=function(){Gv(c)},b=function(f){f.preventDefault();a.Gt||(a.Gt=!0,Kv(c,function(){a.Gt=!1}))},d){case "privaterequesting":a.Wc.innerText=Td;a.Wc.style.maxWidth="130px";a.Wc.onclick=b;break;case "privatenotwatching":a.Wc.innerText=Pd;a.Wc.style.maxWidth="130px";a.Wc.onclick=function(){Iv(c)};break;case "privatewatching":case "privatespying":a.Wc.innerText=Vd;a.Wc.style.maxWidth="100px";a.Wc.onclick=b;break;case "offline":case "away":case "hidden":case "notconnected":a.Wc.style.display="none";a.Wc.style.maxWidth="130px";break;case "passwordprotected":case "public":break;default:w("unexpected status for updatePrivateState: "+d)}else a.Wc.style.display="none"}function jk(a){return a.Gc.offsetHeight+a.Ml.element.offsetHeight+4};function GL(a,b){G.call(this);var c=this;this.mn=4;this.oa=a;this.ee=b;H(this.element,"BaseRoomContents");this.element.style.position="static";this.element.style.display="block";this.element.style.height="auto";this.element.style.borderStyle="solid";this.element.style.borderWidth="1px";this.element.style.borderRadius="4px";this.element.style.padding=this.mn+"px";this.element.style.margin="12px 0 17px 12px";this.element.style.overflow="visible";this.element.style.boxSizing="border-box";this.ji=document.createElement("div");H(this.ji,"offlineRoomNotice");this.ji.innerText=Jf;this.ji.style.display="none";this.ji.style.fontFamily="UbuntuRegular, Arial, Helvetica, sans-serif";this.ji.style.fontSize="12px";this.ji.style.fontWeight="bold";this.ji.style.margin="13px 0";this.element.appendChild(this.ji);this.Qg=document.createElement("div");H(this.Qg,"topSectionWrapper");this.Qg.style.width="100%";this.Qg.style.height="auto";this.element.appendChild(this.Qg);this.mc=this.J(new DL(this.oa,this.ee),this.Qg);this.Cu=this.J(this.Jw(),this.Qg);this.nb=this.J(new AL,this.Qg);hq.j(function(e){d?Jq.h(!0):"split"===O()&&(void 0===c.bj&&(c.bj=new jK(c.nb)),c.bj.show(e))});var d=!0;K.j(function(e){d=e.A.Ce})}r(GL,G);GL.prototype.Jw=function(){return new fk(this)};GL.prototype.G=function(){var a=this.mc.element.offsetHeight;this.nb.element.style.width=this.element.clientWidth-this.mc.element.offsetWidth-16+"px";this.nb.element.style.height=a+"px"};function HL(a,b){fk.call(this,a);this.aa=a;this.ao=b}r(HL,fk);k=HL.prototype;k.Aq=function(){var a=this.Fk(),b=this.qm(a);b>this.Ek()&&(b=this.Ek(),a=b/mk(this));!this.ao&&(300>b||500>a)&&(a=502,b=this.qm(a));this.state.videoWidth=a;this.state.videoHeight=b};k.Jf=function(){this.Aq();"split"===O()&&(this.aa.mc.element.style.width=this.state.videoWidth+"px",this.aa.mc.oa.element.style.height=this.state.videoHeight+"px",this.aa.nb.element.style.width=this.aa.element.clientWidth-this.state.videoWidth-this.element.offsetWidth-2*this.aa.mn+"px")};k.qm=function(a){return a*(this.aa.mc.oa.Bg?.5625:.75)+this.aa.mc.oa.O.ac()};k.Fk=function(){return window.innerWidth-this.Mp()-10};k.Ek=function(){return window.innerHeight-116};k.Mp=function(){return 200};function IL(a,b,c){GL.call(this,a,b);this.ao=c;this.element.style.padding="0";this.element.style.margin="0";this.element.style.overflow="hidden";this.ee.element.style.display="none";ak(this.ao?"videoonly":"split",{h:!0});this.element.style.margin="0";this.element.style.padding="0 0 10px";this.Cu.element.style.display="none"}r(IL,GL);IL.prototype.Mp=function(){return 200};IL.prototype.Jw=function(){return new HL(this,this.ao)};IL.prototype.G=function(){this.ao||this.Cu.Jf();GL.prototype.G.call(this)};var JL=!1;function KL(a,b,c){PG.call(this,a,b);this.bD=b;this.uj=c;this.zq=new xH;document.getElementById("main").appendChild(this.element);this.element.style.lineHeight="normal";this.uj?(this.element.style.height="",this.element.style.overflow="visible"):this.element.style.overflow="auto";QG(this);UG(this,a);this.Go(this.bD);b=new ZK;this.aa=new IL(this.oa,b,this.uj);this.aa.element.style.display="none";this.aa.element.style.minWidth="800px";this.oa.Qa.Ns=this.aa.mc.element;hL(b,this.aa.nb);if(this.uj){this.J(this.oa);b=document.createElement("a");c=document.createElement("div");document.body.appendChild(b);b.appendChild(c);var d=wb(),e={};void 0!==d.disable_sound&&(e.disable_sound=d.disable_sound);var f="_blank";void 0!==d.target&&(f=d.target);d=vb(e);b.href="/"+a+"/?"+d;b.target=f;c.style.position="absolute";c.style.top="0";c.style.bottom="0";c.style.left="0";c.style.right="0"}else this.J(this.aa);this.Uu();SG(this,this.aa.Qg,this.aa.mc.X);TG(this)}r(KL,PG);k=KL.prototype;k.Go=function(a){this.oa=new KJ(a);this.uj&&(this.oa.element.style.position="absolute",this.oa.element.style.top="0px",this.oa.element.style.left="0px")};k.Ex=function(a){return!JL&&window.initialRoomDossier&&!0!==Ia.current.oy?aq(window.initialRoomDossier):bq(a)};k.$t=function(a,b){PG.prototype.$t.call(this,a,b);C("LoadRoom",{version:2});this.zq.zB(this.A)};k.Kf=function(a){PG.prototype.Kf.call(this,a);WG(a.C.B,a.C.jc);this.aa.element.style.display="block";this.mf=a.C.ta.mf;this.oa.O instanceof $r&&RG(this);il(a.C.hb);this.Z();JL||(JL=!0)};k.Ss=function(a){PG.prototype.Ss.call(this,a);var b=this.oa;b.Bg=a;b.O instanceof $r&&(b.O.zt=a);b.Z()};k.Rs=function(){PG.prototype.Rs.call(this);if(this.uj){var a=document.createElement("div");a.innerText=Jf;a.style.margin="10px 0";this.element.appendChild(a);this.oa.element.style.display="none"}else this.aa.element.innerText=Jf,this.aa.element.style.padding="10px 0"};k.G=function(){PG.prototype.G.call(this);this.aa.Cu.Aq()};function LL(){dE.apply(this,arguments)}r(LL,dE);LL.prototype.du=function(a){dE.prototype.du.call(this,a);this.context.uj=a.embed_video_only;this.context.W=a.room_name;this.context.lC=a.smc_tooltip_enabled;this.context.lC&&(vo=!0)};LL.prototype.pc=function(){ML(this);hE(this);mE();fr(void 0===this.context.qb)};function ML(a){pE().then(function(b){new KL(a.context.W,b,a.context.uj)})}LL.prototype.nr=function(a,b){dE.prototype.nr.call(this,a,b);yA(a.auth,this.context.W)};window.TS=LL;var NL=window.newrelic;function OL(a,b,c){c=void 0===c?{}:c;try{if(void 0!==NL){var d={};d["attributes.level"]=a;if("object"===typeof c)for(var e in c)d["attributes."+e]=c[e];NL.noticeError(b,d)}}catch(f){u("New Relic Error in reportError: "+f.toString())}}function Fm(a){void 0!==window.console&&console.info(a,"")}
function w(a,b,c){c=void 0===c?"":c;void 0!==window.console&&console.warn(c.concat("WARN "),a,void 0===b?"":b);try{var d="object"===typeof a?JSON.stringify(a):a.toString()}catch(e){d=""+a}OL(c.concat("WARN"),Error(d),b)}function u(a,b,c){c=void 0===c?"":c;void 0!==window.console&&console.error(c.concat("ERROR "),a,void 0===b?"":b);try{var d="object"===typeof a?JSON.stringify(a):a.toString()}catch(e){d=""+a}OL(c.concat("ERROR"),Error(d),b)}function yv(){}
window.onerror=function(a,b,c,d,e){try{var f=JSON.stringify(e)}catch(g){f=""+e}u(['"Message: " '+a,'"URL: "  '+b,'"Line: " '+c,'"Column: " '+d,'"Error object: " '+f].join("\n"),{},"");return!1};}).call(this);