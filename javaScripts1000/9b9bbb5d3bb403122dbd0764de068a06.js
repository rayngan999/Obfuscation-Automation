function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}define("components/rentals/rentalsHelper",["FR","react","i18n!nls/Global","components/rentals/constants","components/rentals/TooltipModal","services/adaHelper"],function(e,t,n,r,o,i){var a=r.deliveryStrings,l=r.LineOfBusiness,c=r.BikeRentalLengthString,s=r.dateFormat,u=r.BikeRentalLength,m=function(e){return _.has(e.rentFilterContextDetails,"specifiedContext")?e.rentFilterContextDetails.specifiedContext:p(e)},p=function(e){var t=e.rentFilterContextDetails,n=e.isSummer,r=e.resortData,o=void 0===r?null:r;return _objectSpread({selectedBookingType:t.rentFulfillmentType,rentalType:n?"Bike Rental":"Ski/Snowboard"},o?{bookingResort:_.findWhere(o.rentalsResorts,{ResortCode:parseInt(o.resortCode)}).Name}:o)},d=function(e){var t=_.where(e.state.locationFilters,{isChecked:!0});return _.isEmpty(t)?f(e):_.map(t,function(e){return{group:"Pickup",value:e.name}})},f=function(e){var t=e.state,n=e.isSummer,r=e.rentFilterContextDetails,o=r.isDelivery,i=r.rentFulfillmentType,a=t.bikeRentalLength,l=t.pickupAfter3,s=t.deliveryTime,u=b(s),m="".concat(i," ").concat(u||!o&&l?"After":"Before"," 3"),p=[{group:i,value:o?s:i},{group:i,value:n&&!o?c[a]:m}];return o?[{group:i,value:i}].concat(p):p},b=function(e){return!!e&&!moment(e,"HH:mm A").isBefore(moment(a.THREE_PM,"HH:mm A"))},g=function(e,t){return e[t]?_defineProperty({},t,e[t]):null},y=function(e){return _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({lob:e.isSummer?l.SUMMER:l.WINTER,isSummer:e.isSummer,context:m(e),productFilters:d(e),booking:(o=e,i=o.state,a=o.rentFilterContextDetails,c=i.pickupDate,u=i.returnDate,p=i.pickupAfter3,f=i.deliveryTime,y=i.bikeRentalLength,v=a.isDelivery,_=b(f)||!v&&p,S=moment(c).format(s)===moment().format(s),w=!S&&_?1:0,h=moment(c).diff(moment(),"days")+1+w,k=moment(u).diff(moment(c),"days"),{startDate:_?moment(c).add(1,"d").format(s):moment(c).format(s),endDate:moment(u).format(s),numberNights:D(y)?.5:_?k:k+1,bookingWindow:S&&!_?"0":h})},(t=e.state,n=t.selectedLocation,(r=void 0===n?null:n)&&{locationCode:r.LocationCode})),g(e,"products")),g(e,"tabName")),g(e,"pickupLocation")),g(e,"lowInventoryShown"));var t,n,r,o,i,a,c,u,p,f,y,v,_,S,w,h,k},v=function(n){var r=t.createElement(o,{modalBody:n});e.$el.window.trigger("global-modal-open-jsx",[r])},D=function(e){return _.contains([u.HALF_DAY_MORNING,u.HALF_DAY_AFTERNOON],e)};return{trackRentalData:function(t){e.$el.window.trigger("trackAnalytics",[{component:t.analyticsComponent||"c145_Optimized_Product_Filter",event:t.event||"click",data:_.has(t,"errors")?t:y(t)}])},scrollToProgressBar:function(){var t=$("#sitewideAlert").length?$("#sitewideAlert").innerHeight()+e.$el.mainNav.innerHeight():e.$el.mainNav.innerHeight();e.$el.window.scrollTop($("#rentals-landing-page").offset().top-t)},getRentalsAnalyticsData:y,getIsDeliveryAfter3:b,getTooltip:function(e){return t.createElement("button",{className:"btn-reset btn-tooltip",onClick:function(){return v(e)},onKeyPress:function(t){i.isKeyboardSelect(t)&&(t.stopPropagation(),v(e))}},t.createElement("i",{className:"icon-global-info","aria-hidden":"true"}),t.createElement("span",{className:"sr-only"},n.ScreenReader_MoreInfo," ",n.ScreenReader_Modal))},showTooltip:v,getIsHalfDay:D,getIsSearchCriteriaComplete:function(e){var t=e.isSummer,n=e.startDate,r=e.endDate,o=e.hasPickupAfter3,i=e.isDelivery,a=e.deliveryTime,l=e.bikeRentalDuration;return!(!n||!r)&&(i?!!a:t?!!l:o)}}});
//# sourceMappingURL=rentalsHelper.js.map
