"use strict";var miniCartRoot=document.querySelector("[data-mini-cart-wrapper]");function showMiniCart(){function t(){r.className=r.className.replace(" minicart-fixed",""),r.className=r.className.replace(" minicart-show","");var e,t,i,n=document.querySelector(".keep-shopping");n&&n.parentNode&&n.parentNode.removeChild(n),document.querySelector(".mini-cart-summary-price a.btn-buy").classList.remove("quick-view-cart"),document.querySelector(".ab-test-minicart")&&(window.freedom.nsPubSub.pub("overlay.display","hide"),e=document.querySelector("#buy-box #buy-button-now"),t=document.createElement("a"),i=document.createTextNode("Ir para o carrinho"),t.appendChild(i),t.className="btn-go-to-cart",t.href="/cart",e.parentNode.insertBefore(t,e.nextSibling),e.remove())}var e,r=document.querySelector(".minicart-sub-menu"),i=window.pageYOffset;document.querySelector(".ab-test-minicart")&&window.freedom.nsPubSub.pub("overlay.display","show"),r.className+=" minicart-show";var n=document.createElement("div");n.className="keep-shopping";var o=document.createTextNode("Continuar comprando");n.appendChild(o);var a=document.querySelector(".minicart-sub-menu .mini-cart-summary-price");a&&a.appendChild(n);var c=document.querySelector(".keep-shopping");c&&c.addEventListener("click",function(){var e;document.querySelector(".ab-test-minicart")?(e=sessionStorage.getItem("lastVisitedUrl")||window.location.origin,window.location.href=e):t()});var d,m=document.querySelector(".mini-cart-summary-price a.btn-buy");m&&m.classList.add("quick-view-cart"),106<=i&&(r.className+=" minicart-fixed",d=(window.document.querySelector("#header-content").clientWidth-window.document.querySelector("header .breakpoint").clientWidth)/2,window.document.querySelector(".minicart-fixed").style.right=d+"px",window.onscroll=function(){e&&clearTimeout(e),e=setTimeout(function(){window.pageYOffset<=126&&(r.className=r.className.replace(" minicart-fixed",""),window.document.querySelector(".minicart-sub-menu").style.right=0)},80)});var u,s=setTimeout(function(){t()},5e3);document.querySelector(".ab-test-minicart")&&((u=document.querySelector(".minicart-sub-menu")).addEventListener("mouseover",function(){clearTimeout(s)}),u.addEventListener("mouseleave",function(){t()}))}function initModalFixed(){renderMiniCart(showMiniCart)}function renderMiniCart(n){window.freedom.restClient.request("/minicart",{method:"get",complete:function(e){var t=null,i=null,i=e&&e.items&&e.items.length?(t=window.freedom.minicartvdom.getLinkVdom(e),window.freedom.minicartvdom.getQuickViewVDom(e)):(t=window.freedom.minicartvdom.getLinkVdom({}),window.freedom.minicartvdom.getEmptyQuickViewVdom());miniCartRoot.innerHTML="",window.freedom.nsRender.render(t,miniCartRoot),window.freedom.nsRender.render(i,miniCartRoot),n&&"function"==typeof n&&n(),window.freedom.nsPubSub.pub("miniCart.loaded")}})}window.freedom.nsPubSub.sub("pubsub.dom.content.loaded",renderMiniCart),window.freedom.nsPubSub.sub("miniCart.load",renderMiniCart),window.freedom.nsPubSub.sub("miniCart.fixed",initModalFixed);