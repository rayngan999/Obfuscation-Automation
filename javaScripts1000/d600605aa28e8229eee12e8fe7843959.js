(function(t){function e(e){for(var r,o,c=e[0],a=e[1],u=e[2],d=0,f=[];d<c.length;d++)o=c[d],i[o]&&f.push(i[o][0]),i[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var a=n[o];0!==i[a]&&(r=!1)}r&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},i={broker:0},s=[];function o(t){return c.p+"broker/js/"+({"lazy-iwc":"lazy-iwc","lazy-modules":"lazy-modules"}[t]||t)+"."+{"lazy-iwc":"9b430e25","lazy-modules":"a169b1ec"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=r);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,c.nc&&a.setAttribute("nonce",c.nc),a.src=o(t),s=function(e){a.onerror=a.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+r+": "+s+")");o.type=r,o.request=s,n[1](o)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="https://static.arc.io/",c.oe=function(t){throw console.error(t),t};var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var d=0;d<a.length;d++)e(a[d]);var l=u;s.push(["0fe7","chunk-vendors"]),n()})({"04ed":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return p}));var r=n("3d15"),i=n("2677"),s=n.n(i),o=n("364d"),c=n.n(o),a=n("460a"),u=n("cee5");const d=n("34eb")("arc:storage:store");console.log;function l(t,e){return`chunk-${t}-${e}`}function f(t,e="Async"){const{prototype:n}=t.constructor,r=["get","put","close","destroy","remove"];for(const i of r){if(!(i in n))continue;const t=i+e;n[t]=c()(n[i])}return t}class h{constructor(t,e={}){this.chunkLength=t,this.fid=e.fid,this.dbAsync=e.dbAsync,this.closed=!1}async get(e,n,r){if("function"===typeof n)return this.get(e,null,n);if(this.closed)return this._alreadyClosedErrback(r);try{const i=[this.fid,e],s=await(await this.dbAsync).get(a["CHUNK_STORE"],i);if(!s){const n=new Error(`No chunk at index ${e}.`);return void t.nextTick(r,n)}n=n||{};const{buffer:o}=s,c=n.offset||0,u=n.length||o.length-c,d=o.slice(c,c+u);t.nextTick(r,null,d)}catch(i){d(i),t.nextTick(r,i)}}async put(e,n,r){if(this.closed)this._alreadyClosedErrback(r);else try{await(await this.dbAsync).put(a["CHUNK_STORE"],{fid:this.fid,index:e,buffer:n}),t.nextTick(r,null)}catch(i){t.nextTick(r,i)}}async remove(e,n){if(this.closed)this._alreadyClosedErrback(n);else try{const r=[this.fid,e];await(await this.dbAsync).delete(a["CHUNK_STORE"],r),t.nextTick(n,null)}catch(r){t.nextTick(n,r)}}async close(e){this.closed?this._alreadyClosedErrback(e):((await this.dbAsync).close(),this.closed=!0,t.nextTick(e,null))}async destroy(e){if(this.closed)this._alreadyClosedErrback(e);else try{const n=IDBKeyRange.bound([this.fid,0],[this.fid,1/0]);await(await this.dbAsync).delete(a["CHUNK_STORE"],n),t.nextTick(e,null)}catch(n){t.nextTick(e,n)}}_alreadyClosedErrback(e){t.nextTick(e,new Error("Store is closed"))}}class p{constructor(t){const{fid:e,torrentFileObj:n}=t;this.fid=e;const r=n.pieceLength,i=Object(a["initDb"])();this.dbAsync=i;const o=f;this.diskStore=o(new h(r,{fid:e,dbAsync:i})),this.memStore=o(new s.a(r,n)),this.quota=new u["a"](e,i),this.promises=[Object(a["storeFileInfo"])(t)],this._addQuotaListeners()}_addQuotaListeners(){this.quota.onEviction((t,e)=>{d("eviction, storing in memStore",t,e.length),this.memStore.putAsync(t,e)})}async get(e,n,i){this.promises.push(this.quota.updateAccessTime());let s=null;try{s=await this.memStore.getAsync(e,n)}catch(c){s=null}const o=l(e,this.fid);if(null!==s)return d("memStore get: "+o),void t.nextTick(i,null,r["c"](s,[s.buffer]));try{s=await this.diskStore.getAsync(e,n),d("diskStore get: "+o),t.nextTick(i,null,r["c"](s,[s.buffer]))}catch(c){t.nextTick(i,c)}}async put(e,n,r){const i=l(e,this.fid);let s=!1;try{await this.quota.willExceedCustomQuota(n.length)&&await this.quota.clearStorageForChunk(n.length),d("diskStore put: "+i),await this.diskStore.putAsync(e,n),t.nextTick(r,null)}catch(o){s=!0,"QuotaExceededError"===o.name&&await this.quota.clearStorageForChunk(n.length)}if(s)try{d("memStore put: "+i),await this.memStore.putAsync(e,n),t.nextTick(r,null)}catch(o){t.nextTick(r,o)}}async remove(e,n){if(this.closed)this._alreadyClosedErrback(n);else try{await this.diskStore.removeAsync(e),t.nextTick(n,null)}catch(r){t.nextTick(n,r)}}async close(e){if(this.closed)this._alreadyClosedErrback(e);else{this.closed=!0;try{await Promise.all([this.diskStore.closeAsync(),this.memStore.closeAsync()]),t.nextTick(e,null)}catch(n){t.nextTick(e,n)}}}async destroy(e){if(this.closed)this._alreadyClosedErrback(e);else{this.closed=!0;try{await Promise.all(this.promises),await Promise.all([this.diskStore.destroyAsync(),this.memStore.destroyAsync(),(await this.dbAsync).delete(a["FILE_INFO_STORE"],this.fid)]),t.nextTick(e,null)}catch(n){t.nextTick(e,n)}}}_alreadyClosedErrback(e){t.nextTick(e,new Error("FileChunkStore is closed."))}}}).call(this,n("4362"))},"0fe7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getWidgetOptState",(function(){return N})),n.d(r,"setWidgetOptState",(function(){return v})),n.d(r,"enableWidget",(function(){return A})),n.d(r,"disableWidget",(function(){return D}));var i={};n.r(i),n.d(i,"hasNewPropertySession",(function(){return U})),n.d(i,"enableMasterEligibility",(function(){return W})),n.d(i,"getBrokerIds",(function(){return K})),n.d(i,"listPropertySessions",(function(){return H}));n("8011");var s=n("c4d1"),o=n("a5a5"),c=n("3d15");n("5cc6");console.log;function a(t="-"){const e=(new Date).getTime(),n=String(Math.random()).slice(2,11);return e+t+n}function u(t){const{name:e,message:n,stack:r}=t;return{name:e,message:n,stack:r}}function d(){c["d"].set("error",{canHandle:t=>t instanceof Error,serialize:t=>{const e=u(t),n=[];return[e,n]},deserialize:t=>Object.assign(Error(),t)}),c["d"].set("babelError",{canHandle:t=>t&&1===t.length&&t[0]instanceof Error,serialize:t=>{const e=[u(t[0])],n=[];return[e,n]},deserialize:t=>[Object.assign(Error(),t[0])]})}var l=n("81e8"),f=n("5de4");const{COMLINK_INIT:h}=o["e"];async function p(t,e){const[n,r]=e;c["a"](t,n);const i=c["e"](r);await i._confirmRpc()}async function y(t,e){const[n,r]=e,i=c["e"](r);await i._rejectRpc(t)}var b=n("ade3"),g=n("a78e"),w=n.n(g),O=n("2677"),m=n.n(O);const I=new Date("January 1, 2036"),E="arc.io",_={state:o["d"].UNDECIDED,date:new Date,dismissedAt:null},T=()=>({domain:S(),expires:I,sameSite:"None",secure:!0});function S(){const{hostname:t}=window.location;return k(t)?E:t}function k(t){return t.endsWith("."+E)||t===E}async function N(){let t=w.a.get(o["c"]);return t?(t=JSON.parse(t),t.date=new Date(t.date),t):(v(_),_)}async function v(t){return t=JSON.stringify(t),w.a.set(o["c"],t,T())}async function A(t,e){const n={state:o["d"].OPTED_IN,date:Date.now(),referrerPropertyId:t,referrerOrigin:e};return v(n)}async function D(t,e){const n={state:o["d"].OPTED_OUT,date:Date.now(),referrerPropertyId:t,referrerOrigin:e};return v(n)}var C=n("04ed"),R=n("460a"),x=n("612d");const j=n("34eb")("arc:broker"),P="propertySessions";class F{static establishRpc(t){return"_rpc|establish:"+t}static confirmRpc(t){return"_rpc|confirm:"+t}static rpcPair(t,e){return`_rpc|pair:${t}-${e}`}}const L=()=>n.e("lazy-iwc").then(n.bind(null,"4be7")).then(t=>t.SJ.iwc),G=t=>new Promise(e=>t.onReady(e));function B(t,e){const n=new Set(e),r={};for(const[i,s]of Object.entries(t)){const t=s.activeBrokers.filter(t=>{const e=n.has(t.brokerId);return e});t.length>0&&(r[i]={propertySessionId:s.propertySessionId,activeBrokers:t})}return r}function M(t,e,n,r){t=t||{},t=B(t,e);const{propertyId:i,myBrokerId:s,...o}=n;i in t||(t[i]={propertySessionId:r,activeBrokers:[]});const{activeBrokers:c}=t[i];return c.find(t=>t.brokerId===s)||t[i].activeBrokers.push({brokerId:s,propertyId:i,...o}),t}function U(t,e){const n=Object.values(t),r=e.some(t=>n.some(({activeBrokers:e})=>{const n=1===e.length&&e[0].brokerId===t;return n}));return r}async function W(t,e,n=!1){const r=this;window.name=a();const[i,{uuid4:s}]=await Promise.all([L(),Object(x["a"])()]),o=i.WindowMonitor;await G(o);const c=o.getThisWindowId();j("broker is eligible to become master. myBrokerId: "+c);const u=new i.SharedData("master"),d=new i.SharedData(P);function l(){const t=u.get();return c===t}function f(t,e,n){for(const r of n)i.EventBus.un(F.rpcPair(r,c));const s=t.getOpenWindowIds();s.sort(),u.change(t=>(t=t||null,s.includes(t)||(t=null),t||s[0]!==c||(t=c),t)),j("brokers changed. \nmyBrokerId %s \nbrokerIds %o \nnewBrokers %o \nclosedBrokers %o",c,s,e,n),l()&&(e.length&&d.onceChanged(t=>{U(t,e)&&r.emit("newSession")}),n.length&&(j("master: cleaning sessions b/c brokers closed. %o",n),d.change(t=>(t=t||{},B(t,s)))))}u.onChanged(()=>{if(l()){r.emit("master"),j("master: cleaning sessions b/c im the new master");const t=o.getOpenWindowIds();d.change(e=>(e=e||{},B(e,t)))}}),d.onChanged((e={})=>{if(j("propertySessions changed %o",e),!(t in e))return;const{propertySessionId:n}=e[t];r.emit("propertySessionId",n)});const h=()=>{const r=o.getOpenWindowIds(),i={myBrokerId:c,propertyId:t,origin:e,isSwActive:n};d.change(t=>M(t,r,i,s()))};h(),setInterval(h,3e4),f(o,[c],[]),o.onWindowsChanged((...t)=>f(o,...t))}async function K(){const t=await L(),e=t.WindowMonitor;await G(e);const n=e.getOpenWindowIds();return n}async function H(){const t=await L(),e=[],n=new t.SharedData(P).get();for(const[r,i]of Object.entries(n)){const{activeBrokers:t=[],propertySessionId:n}=i;if(!t.length)continue;const s=[...new Set(t.map(t=>t.origin))].filter(Boolean),o=t.some(t=>t.isSwActive);e.push({propertyId:r,propertySessionId:n,origins:s,isSwActive:o,status:"open"})}return e}class z{constructor(){Object(b["a"])(this,"listeners",{})}async on(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}async emit(t,...e){if(t in this.listeners)for(const n of this.listeners[t])n(...e)}async removeAllListeners(t){t?this.listeners[t]=[]:this.listeners={}}async destroy(){this.removeAllListeners()}}class q extends z{constructor(){super(),Object(b["a"])(this,"Cookies",c["b"](w.a)),Object(b["a"])(this,"localStorage",c["b"](localStorage)),Object.assign(this,i),Object.assign(this,R),Object.assign(this,r)}async createStore(t){return new C["a"](t)}}class J extends q{async createStore(t){const e=new C["a"](t);return c["b"](e)}}class Q extends q{async createStore({torrentFileObj:t}){const{pieceLength:e,length:n}=t,r=m()(e,{length:n});return c["b"](r)}}const{COMLINK_INIT:V,BROKER_LOAD:Y}=o["e"];window.cl=console.log,async function(){d(),Object(s["b"])(),Object(l["a"])(),window.addEventListener("message",async t=>{const{arcEvent:e,wrappedPort:n,exposedPort:r,parentUrl:i}=t.data;if(e===V)if(await Object(R["isStorageAccessDenied"])()){const e=new Error("Storage access denied");y(e,t.ports)}else{const e=i&&Object(f["a"])(i)?new Q:new J;let s;s=n&&r?[n,r]:t.ports,p(e,s)}}),window.parent.postMessage({arcEvent:Y},"*");const t=await Object(R["getOrGenerateMyNodeId"])();s["a"].configureScope(e=>{e.setTag("nodeId",t),e.setTag("arcClient","broker")})}()},"460a":function(t,e,n){"use strict";n.r(e),n.d(e,"CHUNK_STORE",(function(){return f})),n.d(e,"FILE_INFO_STORE",(function(){return h})),n.d(e,"getOrGenerateMyNodeId",(function(){return p})),n.d(e,"isStorageAccessDenied",(function(){return y})),n.d(e,"initDb",(function(){return b})),n.d(e,"destroyDb",(function(){return g})),n.d(e,"forceDbCompaction",(function(){return w})),n.d(e,"storeFileInfo",(function(){return O})),n.d(e,"getFilesToSeed",(function(){return m})),n.d(e,"listFilesToSeed",(function(){return I})),n.d(e,"getTorrentFileObject",(function(){return E})),n.d(e,"destroyFile",(function(){return _})),n.d(e,"generateStorageReport",(function(){return T})),n.d(e,"getStoredFids",(function(){return S})),n.d(e,"getCustomStorageEstimate",(function(){return k}));var r=n("3f4f"),i=n("8665"),s=n("a5a5"),o=n("5de4"),c=n("612d");const a=n("34eb")("arc:broker"),u="Arc_nodeId",d="arc",l=50,f=(console.log,"fileChunks"),h="fileInfo";async function p(){let t=await i["a"].get(u);if(!t){const{guid:e}=await Object(c["a"])();t=e(),await i["a"].set(u,t)}return t}async function y(){try{return window.localStorage.getItem("test"),await b(),!1}catch{return!0}}async function b(){const t=await Object(r["b"])(d,l,{upgrade(t,e,n,r){let i,s;if(t.objectStoreNames.contains(f))i=r.objectStore(f);else{const e={keyPath:["fid","index"]};i=t.createObjectStore(f,e)}if(i.indexNames.contains("fid")||i.createIndex("fid","fid"),t.objectStoreNames.contains(h))s=r.objectStore(h);else{const e={keyPath:"fid"};s=t.createObjectStore(h,e)}s.indexNames.contains("accessTime")||s.createIndex("accessTime","accessTime"),s.indexNames.contains("expiresAt")||s.createIndex("expiresAt","expiresAt")},blocked(){},blocking(){},terminated(){}});return t}async function g(){return Object(r["a"])(d)}async function w(){try{const t="tempDb",e="temp",n=await Object(r["b"])(t,1,{upgrade(t){t.createObjectStore(e,{keyPath:"id"})}});await n.put(e,{id:"fucboi"}),await Object(r["a"])(t)}catch(t){console.log(t)}}async function O(t){const{parseTorrent:e}=await Object(c["a"])(),{fid:n,torrentFileObj:r,expiresAt:i}=t,s=e.toTorrentFile(r),o={fid:n,torrentFile:s,expiresAt:i?new Date(i):null,accessTime:new Date},a=await b();await a.put(h,o)}async function m(t=5,e=[]){const{parseTorrent:n,Buffer:r}=await Object(c["a"])(),i={};let o=0;const a=await b();let u=await a.transaction(h).store.openCursor();while(u&&o<t){const{fid:t,torrentFile:c}=u.value,a=n(r.from(c)),d=e.includes(t),l=a.length>s["a"];!d&&l&&(i[t]=a,o++),u=await u.continue()}return i}async function I(t=5,e=[]){const{parseTorrent:n,Buffer:r}=await Object(c["a"])(),i=[];let o=0;const a=await b();let u=await a.transaction(h).store.openCursor();while(u&&o<t){const{fid:t,torrentFile:c,expiresAt:a}=u.value,d=n(r.from(c)),l=e.includes(t),f=d.length>s["a"];!l&&f&&(i.push({fid:t,torrentFileObj:d,expiresAt:a}),o++),u=await u.continue()}return i}async function E(t){const{parseTorrent:e,Buffer:n}=await Object(c["a"])(),r=await b(),i=await r.get(h,t);if(!i)return null;const{torrentFile:s}=i,o=e(n.from(s));return o}async function _(t){const e=await b(),n=IDBKeyRange.bound([t,0],[t,1/0]);await Promise.all([e.delete(f,n),e.delete(h,t)])}async function T(){const t={};try{const e=await b(),n=await e.getAll(h);for(const i of n){const{fid:e,torrentFile:n}=i;t[e]={isSeeding:!1,clientName:null,hasTorrentFile:!!n,chunkIndexes:[]}}const r=await e.getAllKeys(f);for(const[i,s]of r)t[i]=t[i]||{chunkIndexes:[]},t[i].chunkIndexes.push(s)}catch(e){a(e)}return t}async function S(){let t=[];try{const e=await b();t=await e.getAllKeys(h)}catch(e){a(e)}return t}async function k(){const{storage:t}=navigator;if(!t||!t.estimate||Object(o["b"])())return{usage:0,quota:0,customQuota:0};const e=o["c"].asNumber("quotaSizeMb",s["b"]),{usage:n,quota:r}=await t.estimate(),i=1048576,c=Math.min(r,e*i);return{usage:n,quota:r,customQuota:c}}},"5de4":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));console.log;const r={_searchParams(t=window.location.href){const{searchParams:e}=new URL(t);return e},exists(t,e){return this._searchParams(e).has(t)},get(t,e=null,n){return this._searchParams(n).get(t)||e},isTruthy(t,e=!1,n){const r=this._searchParams(n);return r.has(t)?["1","true"].includes(r.get(t).toLowerCase()):e},asNumber(t,e,n){const r=this._searchParams(n);return r.has(t)?Number(r.get(t)):e}};function i(t){const e=r.isTruthy("diskstore",!0,t);return!e||s()||o(t)}function s(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function o(t){return t.startsWith("https://arc.io/demo")}},"612d":function(t,e,n){"use strict";async function r(){return n.e("lazy-modules").then(n.bind(null,"e8a7"))}n.d(e,"a",(function(){return r}))},8011:function(t,e){(function(t,e,n,r,i,s,o,c,a){for(var u=!0,d=!1,l=0;l<document.scripts.length;l++)if(document.scripts[l].src.indexOf(o)>-1){u=!("no"===document.scripts[l].getAttribute("data-lazy"));break}var f=!1,h=[],p=function(t){("e"in t||"p"in t||t.f&&t.f.indexOf("capture")>-1||t.f&&t.f.indexOf("showReportDialog")>-1)&&u&&y(h),p.data.push(t)};function y(o){if(!f){f=!0;var u=e.getElementsByTagName(n)[0],d=e.createElement(n);d.src=c,d.setAttribute("crossorigin","anonymous"),d.addEventListener("load",(function(){try{t[r]=g,t[i]=w;var e=t[s],n=e.init;e.init=function(t){var e=a;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);n(e)},b(o,e)}catch(c){console.error(c)}})),u.parentNode.insertBefore(d,u)}}function b(e,n){try{for(var s=p.data,o=0;o<e.length;o++)"function"===typeof e[o]&&e[o]();var c=!1,a=t["__SENTRY__"];"undefined"!==typeof a&&a.hub&&a.hub.getClient()&&(c=!0);var u=!1;for(o=0;o<s.length;o++)if(s[o].f){u=!0;var d=s[o];!1===c&&"init"!==d.f&&n.init(),c=!0,n[d.f].apply(n,d.a)}!1===c&&!1===u&&n.init();var l=t[r],f=t[i];for(o=0;o<s.length;o++)"e"in s[o]&&l?l.apply(t,s[o].e):"p"in s[o]&&f&&f.apply(t,[s[o].p])}catch(h){console.error(h)}}p.data=[],t[s]=t[s]||{},t[s].onLoad=function(t){h.push(t),u&&!d||y(h)},t[s].forceLoad=function(){d=!0,u&&setTimeout((function(){y(h)}))},["init","addBreadcrumb","captureMessage","captureException","captureEvent","configureScope","withScope","showReportDialog"].forEach((function(e){t[s][e]=function(){p({f:e,a:arguments})}}));var g=t[r];t[r]=function(e,n,r,i,s){p({e:[].slice.call(arguments)}),g&&g.apply(t,arguments)};var w=t[i];t[i]=function(e){p({p:"reason"in e?e.reason:"detail"in e&&"reason"in e.detail?e.detail.reason:e}),w&&w.apply(t,arguments)},u||setTimeout((function(){y(h)}))})(window,document,"script","onerror","onunhandledrejection","Sentry","7e5c2fad7a564ff8bffd4effc2abb26d","https://browser.sentry-cdn.com/6.2.2/bundle.min.js",{dsn:"https://7e5c2fad7a564ff8bffd4effc2abb26d@sentry.arc.io/2"})},"81e8":function(t,e,n){"use strict";(function(t){function r(){const e=Promise.resolve();function n(t,...n){e.then(()=>{t(...n)})}t.nextTick=n,t.nextTickAsync=()=>e.then()}n.d(e,"a",(function(){return r}))}).call(this,n("4362"))},a5a5:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return a}));const r="arc:",i={COMLINK_INIT:r+"comlink:init",NODE_ID:r+":nodeId",CLIENT_TEARDOWN:r+"client:teardown",CDN_CONFIG:r+"cdn:config",P2P_CLIENT_READY:r+"cdn:ready",STORED_FIDS:r+"cdn:storedFids",SW_HEALTH_CHECK:r+"cdn:healthCheck",WIDGET_CONFIG:r+"widget:config",WIDGET_INIT:r+"widget:init",WIDGET_UI_LOAD:r+"widget:load",BROKER_LOAD:r+"broker:load",RENDER_FILE:r+"inlay:renderFile",FILE_RENDERED:r+"inlay:fileRendered"},s=300,o=2**17,c={UNDECIDED:"UNDECIDED",OPTED_IN:"OPTED_IN",OPTED_OUT:"OPTED_OUT"},a="widgetOptState"},c490:function(t,e){t.exports=Sentry},c4d1:function(t,e,n){"use strict";var r=n("c490");const i=Object({NODE_ENV:"production",BASE_URL:"https://static.arc.io/",ACCOUNT_ORIGIN:"https://account.arc.io",BANDWIDTH_WARDEN_ORIGIN:"https://warden.arc.io",COGNITO_APP_ID:"431634imeo45noat90ccl0lkep",COGNITO_REGION:"us-east-2",COGNITO_IDENTITY_POOL_ID:"us-east-2:cec1bb4c-3aa1-4d9a-87df-b75ae59441d0",COGNITO_USER_POOL_ID:"us-east-2_3sKO4HOjv",COMMIT_HASH:"e775732",CORE_ORIGIN:"https://core.arc.io",DEMO_VUE_ORIGIN:"https://demo.arc.io",DOCS_ORIGIN:"https://docs.arc.io",FIREBASE_API_KEY:"AIzaSyCGmeUDT5F7Bq77JvXlN8IXBwJjIXJwvcI",GA_TID_HOMEPAGE:"UA-123508647-1",GA_TID_USER_TIMING:"UA-123508647-2",GATEWAY_ORIGIN:"https://gateway.arc.io",GOOGLE_PROJECT_FIRESTORE_ID:"prod-firestore-arc",HOMEPAGE_ORIGIN:"https://arc.io",INLAY_ORIGIN:"https://inlay.arc.io",OVERMIND_ORIGIN:"https://overmind.arc.io",PORTAL_VUE_ORIGIN:"https://portal.arc.io",PORTAL_ORIGIN:"https://portal.arc.io",NODE_REPORT_MAILBOX_ORIGIN:"https://warden.arc.io",ROOT_DOMAIN:"arc.io",SOCKETCLUSTER_HOSTNAME:"socket.arc.io",SOCKETCLUSTER_PORT:"443",STATIC_ORIGIN:"https://static.arc.io",STORAGE_ORIGIN:"https://storage.arc.io",STRIPE_CLIENT_ID:"ca_DMhwnlBqMfP4Vx8mJF4M1nGxTNU5263W",STRIPE_PUBLISHABLE_KEY:"pk_live_Df4EdjIuSE8fW21HyuwWhJcm",SW_ORIGIN:"https://arc.io",TCDN_ORIGIN:"https://tcdn.arc.io",TRACKER_ANNOUNCE_URL:"wss://tkr.arc.io/announce",TRACKER_ORIGIN:"https://tkr.arc.io",WEBSEED_ORIGIN:"https://webseed.arc.io",WIDGET_ORIGIN:"https://arc.io",DEBUG:"false"});i.IS_PROD="production"===i.NODE_ENV;var s=i;const o=[/extensions\//i,/-extension:\/\//i];n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return h}));const{NODE_ENV:c,COMMIT_HASH:a}=s,u=["SecurityError IDBFactory.open() called in an invalid security context"];let d=r;function l(t){!d.SDK_NAME&&self.Sentry&&(d=self.Sentry),d.init({dsn:"https://7e5c2fad7a564ff8bffd4effc2abb26d@sentry.arc.io/2",enabled:"production"===c,environment:c,release:a,maxBreadcrumbs:5,ignoreErrors:u,autoSessionTracking:!1,denyUrls:o,blacklistUrls:o,...t})}function f(){const t={};l(t)}function h(){d.onLoad(f)}},cee5:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("517b"),i=(n("c4d1"),n("460a"));const s=n("34eb")("arc:storage:quota"),o=300;console.log;class c{constructor(t,e){this.fid=t,this.dbAsync=e,this.evictionCallback=()=>{},this.updateAccessTime=Object(r["a"])(this.updateAccessTime,2500)}onEviction(t){this.evictionCallback=t}async willExceedCustomQuota(t){const{usage:e,customQuota:n}=await Object(i["getCustomStorageEstimate"])();return e+t>n}async clearStorageForChunk(t){const e=1.25;t*=e;try{const e=await this._evictChunks(t);for(const t of e){const{index:e,buffer:n}=t;this.evictionCallback(e,n)}}catch(n){s(n)}}async _evictChunks(t){const e=await this.dbAsync,n=[];let r=0;const o=await this._getFilesEligibleForEviction();for(const c of o){const{fid:o}=c;let a=!0;const u=e.transaction(i["CHUNK_STORE"],"readwrite"),d=IDBKeyRange.bound([o,0],[o,1/0]);let l=await u.store.openCursor(d,"prev");while(l){if(r>t){a=!1;break}const e=l.value,{index:i,buffer:c}=e;this._isCurrentFile(o)&&n.push(e),r+=c.length,s(`Deleting fid: ${o}, index: ${i}`),await l.delete(),l=await l.continue()}if(a&&!this._isCurrentFile(o)&&(s("Deleting torrentFile: "+o),await e.delete(i["FILE_INFO_STORE"],o)),r>t)break}return n}async _getFilesEligibleForEviction(){const t=await this.dbAsync,e=await t.getAll(i["FILE_INFO_STORE"]);return e.filter(t=>{const{fid:e,accessTime:n}=t;return this._isCurrentFile(e)||this._hasTimedOut(n)}).sort((t,e)=>t.accessTime.getTime()-e.accessTime.getTime())}_hasTimedOut(t){const e=((new Date).getTime()-t.getTime())/1e3,n=Math.abs(e)>o;return n}async updateAccessTime(){try{const t=await this.dbAsync,e=t.transaction(i["FILE_INFO_STORE"],"readwrite"),n=e.store,r=await n.get(this.fid);if(!r)return;r.accessTime=new Date,await n.put(r)}catch(t){}}_isCurrentFile(t){return t===this.fid}}}});