(function(){"use strict";var VideoX=window&&window.VideoX&&window.VideoX["default"];var supportVedioTag=checkSupportVedioTag();var supportFlash=checkSupportFlash();var videoHost=["vodcdn.alicdn.com","v.biz.ku6.com","player.pps.tv","t.focosee.com","players.youku.com"];function readyHandle(){var embedDomList=document.getElementsByTagName("embed");var arr=[];for(var i=0;i<embedDomList.length;i+=1){arr.push(embedDomList[i])}for(var i=0;i<arr.length;i+=1){replaceEmbed(arr[i],i)}arr=[]}function checkOtherVideo(src){for(var i=0;i<videoHost.length;i+=1){if(src.indexOf(videoHost[i])>0){return true}}return false}function replaceEmbed(embed,i){var parentNode=embed.parentNode||embed.parentElement;if(embed.getAttribute("type")!=="application/x-shockwave-flash")return;var src=embed.getAttribute("src");if(!supportFlash&&checkOtherVideo(src)){embed.style.display="none";return}var videoSrc=getTaobaoVideoSrc(src);if(!videoSrc)return;if(supportVedioTag&&VideoX){var id="J_replace_vedio_"+i;var p=document.createElement("div");p.setAttribute("id",id);p.style.display="inline-block";var height=embed.getAttribute("height");var width=embed.getAttribute("width");if(height){p.style.height=height+"px"}if(width){p.style.width=width+"px"}parentNode.insertBefore(p,embed);setTimeout(function(){var vx=new VideoX({container:"#"+id,from:"ugc_copy",url:videoSrc,controls:true,autoplay:true})},1e3);parentNode.removeChild(embed)}else if(!supportFlash){parentNode.removeChild(embed)}}function getTaobaoVideoSrc(swf){var result="";if(swf.indexOf("cloud.video.taobao.com")>0){swf=swf.replace(".swf",".mp4");swf=swf.replace("/e/1/","/e/6/");result=swf}return result}function checkSupportFlash(){var hasFlash=false;try{var fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(fo)hasFlash=true}catch(e){if(navigator.mimeTypes["application/x-shockwave-flash"]!=undefined)hasFlash=true}return hasFlash}function checkSupportVedioTag(){if(!!document.createElement("video").canPlayType){var vidTest=document.createElement("video");var oggTest=vidTest.canPlayType('video/ogg; codecs="theora, vorbis"');if(!oggTest){var h264Test=vidTest.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');if(!h264Test){return false}else{if(h264Test=="probably"){return true}else{return false}}}else{if(oggTest=="probably"){return true}else{return false}}}else{return false}}window.embedReplace=window.embedReplace||{};window.embedReplace.supportFlash=supportFlash;window.embedReplace.supportVedioTag=supportVedioTag;window.embedReplace.checkSupportVedioTag=checkSupportVedioTag;window.embedReplace.checkSupportFlash=checkSupportFlash;window.embedReplace.replaceEmbed=replaceEmbed;window.embedReplace.replaceAll=readyHandle})();