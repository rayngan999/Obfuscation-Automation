var plenigo=plenigo||{};plenigo.baseURI=plenigo.baseURI||"https://remote.plenigo.com",plenigo.baseStaticURI=plenigo.baseStaticURI||"https://static.plenigo.com",plenigo.baseApiURI=plenigo.baseApiURI||"https://api.plenigo.com",plenigo.baseCheckoutURI=plenigo.baseCheckoutURI||"https://checkout.plenigo.com",plenigo.baseSnippetsURI=plenigo.baseSnippetsURI||"https://selfservice.plenigo.com",plenigo.environments={test:"plenigo-test.com",stage:"plenigo-stage.com",production:"plenigo.com"},plenigo.configuration=plenigo.configuration||{},plenigo.configuration.options=plenigo.configuration.options||{},plenigo.configuration.callbacks=plenigo.configuration.callbacks||{},plenigo.CryptoJS=plenigo.CryptoJS||function(l){function n(){}var e={},t=e.lib={},i=t.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=t.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||r).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var o=0;o<e;o++)t[i+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(i+o)%4*8;else if(65535<n.length)for(o=0;o<e;o+=4)t[i+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=l.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*l.random()|0);return new s.init(t,e)}}),o=e.enc={},r=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,t/2)}},a=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,t)}},p=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},g=t.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,o=this.blockSize,r=i/(4*o);if(e=(r=e?l.ceil(r):l.max((0|r)-this._minBufferSize,0))*o,i=l.min(4*e,i),e){for(var a=0;a<e;a+=o)this._doProcessBlock(n,a);a=n.splice(0,e),t.sigBytes-=i}return new s.init(a,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=g.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new c.HMAC.init(n,t).finalize(e)}}});var c=e.algo={};return e}(Math),function(){var e=plenigo.CryptoJS,s=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var o=0;o<n;o+=3)for(var r=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)e.push(i.charAt(r>>>6*(3-a)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;!(r=n.charAt(64))||-1!=(r=e.indexOf(r))&&(t=r);for(var i,o,r=[],a=0,l=0;l<t;l++)l%4&&(i=n.indexOf(e.charAt(l-1))<<l%4*2,o=n.indexOf(e.charAt(l))>>>6-l%4*2,r[a>>>2]|=(i|o)<<24-a%4*8,a++);return s.create(r,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(r){function k(e,t,n,i,o,r,a){return((e=e+(t&n|~t&i)+o+a)<<r|e>>>32-r)+t}function b(e,t,n,i,o,r,a){return((e=e+(t&i|n&~i)+o+a)<<r|e>>>32-r)+t}function I(e,t,n,i,o,r,a){return((e=e+(t^n^i)+o+a)<<r|e>>>32-r)+t}function P(e,t,n,i,o,r,a){return((e=e+(n^(t|~i))+o+a)<<r|e>>>32-r)+t}for(var e=plenigo.CryptoJS,t=(i=e.lib).WordArray,n=i.Hasher,i=e.algo,L=[],o=0;o<64;o++)L[o]=4294967296*r.abs(r.sin(o+1))|0;i=i.MD5=n.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=e[o=t+n];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var n=this._hash.words,o=e[t+0],i=e[t+1],r=e[t+2],a=e[t+3],l=e[t+4],s=e[t+5],p=e[t+6],g=e[t+7],c=e[t+8],d=e[t+9],u=e[t+10],f=e[t+11],h=e[t+12],m=e[t+13],y=e[t+14],w=e[t+15],U=k(U=n[0],S=n[1],C=n[2],v=n[3],o,7,L[0]),v=k(v,U,S,C,i,12,L[1]),C=k(C,v,U,S,r,17,L[2]),S=k(S,C,v,U,a,22,L[3]),U=k(U,S,C,v,l,7,L[4]),v=k(v,U,S,C,s,12,L[5]),C=k(C,v,U,S,p,17,L[6]),S=k(S,C,v,U,g,22,L[7]),U=k(U,S,C,v,c,7,L[8]),v=k(v,U,S,C,d,12,L[9]),C=k(C,v,U,S,u,17,L[10]),S=k(S,C,v,U,f,22,L[11]),U=k(U,S,C,v,h,7,L[12]),v=k(v,U,S,C,m,12,L[13]),C=k(C,v,U,S,y,17,L[14]),U=b(U,S=k(S,C,v,U,w,22,L[15]),C,v,i,5,L[16]),v=b(v,U,S,C,p,9,L[17]),C=b(C,v,U,S,f,14,L[18]),S=b(S,C,v,U,o,20,L[19]),U=b(U,S,C,v,s,5,L[20]),v=b(v,U,S,C,u,9,L[21]),C=b(C,v,U,S,w,14,L[22]),S=b(S,C,v,U,l,20,L[23]),U=b(U,S,C,v,d,5,L[24]),v=b(v,U,S,C,y,9,L[25]),C=b(C,v,U,S,a,14,L[26]),S=b(S,C,v,U,c,20,L[27]),U=b(U,S,C,v,m,5,L[28]),v=b(v,U,S,C,r,9,L[29]),C=b(C,v,U,S,g,14,L[30]),U=I(U,S=b(S,C,v,U,h,20,L[31]),C,v,s,4,L[32]),v=I(v,U,S,C,c,11,L[33]),C=I(C,v,U,S,f,16,L[34]),S=I(S,C,v,U,y,23,L[35]),U=I(U,S,C,v,i,4,L[36]),v=I(v,U,S,C,l,11,L[37]),C=I(C,v,U,S,g,16,L[38]),S=I(S,C,v,U,u,23,L[39]),U=I(U,S,C,v,m,4,L[40]),v=I(v,U,S,C,o,11,L[41]),C=I(C,v,U,S,a,16,L[42]),S=I(S,C,v,U,p,23,L[43]),U=I(U,S,C,v,d,4,L[44]),v=I(v,U,S,C,h,11,L[45]),C=I(C,v,U,S,w,16,L[46]),U=P(U,S=I(S,C,v,U,r,23,L[47]),C,v,o,6,L[48]),v=P(v,U,S,C,g,10,L[49]),C=P(C,v,U,S,y,15,L[50]),S=P(S,C,v,U,s,21,L[51]),U=P(U,S,C,v,h,6,L[52]),v=P(v,U,S,C,a,10,L[53]),C=P(C,v,U,S,u,15,L[54]),S=P(S,C,v,U,i,21,L[55]),U=P(U,S,C,v,c,6,L[56]),v=P(v,U,S,C,w,10,L[57]),C=P(C,v,U,S,p,15,L[58]),S=P(S,C,v,U,m,21,L[59]),U=P(U,S,C,v,l,6,L[60]),v=P(v,U,S,C,f,10,L[61]),C=P(C,v,U,S,r,15,L[62]),S=P(S,C,v,U,d,21,L[63]);n[0]=n[0]+U|0,n[1]=n[1]+S|0,n[2]=n[2]+C|0,n[3]=n[3]+v|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32;var o=r.floor(n/4294967296);for(t[15+(64+i>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t[14+(64+i>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,n=0;n<4;n++)i=t[n],t[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=n._createHelper(i),e.HmacMD5=n._createHmacHelper(i)}(Math),function(){var e=plenigo.CryptoJS,t=e.lib,n=t.Base,p=t.WordArray,i=(t=e.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(a=this.cfg).hasher.create(),i=p.create(),o=i.words,r=a.keySize,a=a.iterations;o.length<r;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var s=1;s<a;s++)l=n.finalize(l),n.reset();i.concat(l)}return i.sigBytes=4*r,i}});e.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),plenigo.CryptoJS.lib.Cipher||function(){var e=(d=plenigo.CryptoJS).lib,t=e.Base,a=e.WordArray,n=e.BufferedBlockAlgorithm,i=d.enc.Base64,o=d.algo.EvpKDF,r=e.Cipher=n.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(i){return{encrypt:function(e,t,n){return("string"==typeof t?u:c).encrypt(i,e,t,n)},decrypt:function(e,t,n){return("string"==typeof t?u:c).decrypt(i,e,t,n)}}}});e.StreamCipher=r.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});function l(e,t,n){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=i[o]}var s=d.mode={},p=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();p.Encryptor=p.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;l.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),p.Decryptor=p.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=e.slice(t,t+i);n.decryptBlock(e,t),l.call(this,e,t,i),this._prevBlock=o}}),s=s.CBC=p,p=(d.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,i=(n=n-e.sigBytes%n)<<24|n<<16|n<<8|n,o=[],r=0;r<n;r+=4)o.push(i);n=a.create(o,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=r.extend({cfg:r.cfg.extend({mode:s,padding:p}),reset:function(){r.reset.call(this);var e,t=(n=this.cfg).iv,n=n.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode=e.call(n,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var g=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),s=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t,n=(e=i.parse(e)).words;return 1398893684==n[0]&&1701076831==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),g.create({ciphertext:e,salt:t})}},c=e.SerializableCipher=t.extend({cfg:t.extend({format:s}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var o=e.createEncryptor(n,i);return t=o.finalize(t),o=o.cfg,g.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),d=(d.kdf={}).OpenSSL={execute:function(e,t,n,i){return i=i||a.random(8),e=o.create({keySize:t+n}).compute(e,i),n=a.create(e.words.slice(t),4*n),e.sigBytes=4*t,g.create({key:e,iv:n,salt:i})}},u=e.PasswordBasedCipher=c.extend({cfg:c.cfg.extend({kdf:d}),encrypt:function(e,t,n,i){return n=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,(e=c.encrypt.call(this,e,t,n.key,i)).mixIn(n),e},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt),i.iv=n.iv,c.decrypt.call(this,e,t,n.key,i)}})}(),function(){for(var e=plenigo.CryptoJS,t=e.lib.BlockCipher,n=e.algo,a=[],i=[],o=[],r=[],l=[],s=[],p=[],g=[],c=[],d=[],u=[],f=0;f<256;f++)u[f]=f<128?f<<1:f<<1^283;for(var h=0,m=0,f=0;f<256;f++){var y=(y=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&y^99;a[h]=y;var w=u[i[y]=h],U=u[w],v=u[U],C=257*u[y]^16843008*y;o[h]=C<<24|C>>>8,r[h]=C<<16|C>>>16,l[h]=C<<8|C>>>24,s[h]=C,C=16843009*v^65537*U^257*w^16843008*h,p[y]=C<<24|C>>>8,g[y]=C<<16|C>>>16,c[y]=C<<8|C>>>24,d[y]=C,h?(h=w^u[u[u[v^w]]],m^=u[u[m]]):h=m=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e,t=(i=this._key).words,n=i.sigBytes/4,i=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],r=0;r<i;r++)r<n?o[r]=t[r]:(e=o[r-1],r%n?6<n&&4==r%n&&(e=a[e>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e]):(e=a[(e=e<<8|e>>>24)>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e],e^=S[r/n|0]<<24),o[r]=o[r-n]^e);for(t=this._invKeySchedule=[],n=0;n<i;n++)r=i-n,e=n%4?o[r]:o[r-4],t[n]=n<4||r<=4?e:p[a[e>>>24]]^g[a[e>>>16&255]]^c[a[e>>>8&255]]^d[a[255&e]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,r,l,s,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,p,g,c,d,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,o,r,a,l){for(var s=this._nRounds,p=e[t]^n[0],g=e[t+1]^n[1],c=e[t+2]^n[2],d=e[t+3]^n[3],u=4,f=1;f<s;f++)var h=i[p>>>24]^o[g>>>16&255]^r[c>>>8&255]^a[255&d]^n[u++],m=i[g>>>24]^o[c>>>16&255]^r[d>>>8&255]^a[255&p]^n[u++],y=i[c>>>24]^o[d>>>16&255]^r[p>>>8&255]^a[255&g]^n[u++],d=i[d>>>24]^o[p>>>16&255]^r[g>>>8&255]^a[255&c]^n[u++],p=h,g=m,c=y;h=(l[p>>>24]<<24|l[g>>>16&255]<<16|l[c>>>8&255]<<8|l[255&d])^n[u++],m=(l[g>>>24]<<24|l[c>>>16&255]<<16|l[d>>>8&255]<<8|l[255&p])^n[u++],y=(l[c>>>24]<<24|l[d>>>16&255]<<16|l[p>>>8&255]<<8|l[255&g])^n[u++],d=(l[d>>>24]<<24|l[p>>>16&255]<<16|l[g>>>8&255]<<8|l[255&c])^n[u++],e[t]=h,e[t+1]=m,e[t+2]=y,e[t+3]=d},keySize:8});e.AES=t._createHelper(n)}(),plenigo.CryptoJS.pad.NoPadding={pad:function(){},unpad:function(){}},plenigo.CryptoJS.mode.CTR=function(){var e=plenigo.CryptoJS.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,r=this._counter;for(o&&(r=this._counter=o.slice(0),this._iv=void 0),o=r.slice(0),n.encryptBlock(o,0),r[i-1]=r[i-1]+1|0,n=0;n<i;n++)e[t+n]^=o[n]}});return e.Decryptor=t,e}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),function(){var r;plenigo.JWT=(r=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)})).replace("=","")},{encode:function(e,t){var n,i,o;if("object"!=typeof e)throw"Payload has to be of type object!";try{n=JSON.stringify(e),o=(i=JSON.stringify({alg:"HS256",typ:"JWT"}))+n}catch(e){throw"Error while generating JSON!"}try{return r(i)+"."+r(n)+"."+r(o)}catch(e){throw"Error while encription"}},decode:function(e,t){var n,i,o;if("string"!=typeof e)throw"JWT has to be of type string!";if(3!==(n=e.split(".")).length)throw"JWT has to have 3 parts!";try{o=n[1],o=decodeURIComponent(atob(o).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join("")),i=JSON.parse(o)}catch(e){throw"Error while parsing JSON parts!"}return i}})}(),function(e){var i,n,t,r={},o=e.document,a="localStorage";if(r.disabled=!1,r.set=function(e,t){},r.get=function(e){},r.remove=function(e){},r.clear=function(){},r.transact=function(e,t,n){var i=r.get(e);null==n&&(n=t,t=null),void 0===i&&(i=t||{}),n(i),r.set(e,i)},r.getAll=function(){},r.forEach=function(){},r.serialize=function(e){return JSON.stringify(e)},r.deserialize=function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(e){return t||void 0}},function(){try{return a in e&&e[a]}catch(e){return}}())i=e[a],r.set=function(e,t){return void 0===t?r.remove(e):(i.setItem(e,r.serialize(t)),t)},r.get=function(e){return r.deserialize(i.getItem(e))},r.remove=function(e){i.removeItem(e)},r.clear=function(){i.clear()},r.getAll=function(){var n={};return r.forEach(function(e,t){n[e]=t}),n},r.forEach=function(e){for(var t=0;t<i.length;t++){var n=i.key(t);e(n,r.get(n))}};else if(o.documentElement.addBehavior){try{(t=new ActiveXObject("htmlfile")).open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),n=t.w.frames[0].document,i=n.createElement("div")}catch(e){i=o.createElement("div"),n=o.body}function l(t){return function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(i),n.appendChild(i),i.addBehavior("#default#userData"),i.load(a);e=t.apply(r,e);return n.removeChild(i),e}}var s=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function p(e){return e.replace(/^d/,"___$&").replace(s,"___")}r.set=l(function(e,t,n){return t=p(t),void 0===n?r.remove(t):(e.setAttribute(t,r.serialize(n)),e.save(a),n)}),r.get=l(function(e,t){return t=p(t),r.deserialize(e.getAttribute(t))}),r.remove=l(function(e,t){t=p(t),e.removeAttribute(t),e.save(a)}),r.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(a);for(var n,i=0;n=t[i];i++)e.removeAttribute(n.name);e.save(a)}),r.getAll=function(e){var n={};return r.forEach(function(e,t){n[e]=t}),n},r.forEach=l(function(e,t){for(var n,i=e.XMLDocument.documentElement.attributes,o=0;n=i[o];++o)t(n.name,r.deserialize(e.getAttribute(n.name)))})}try{var g="__storejs__";r.set(g,g),r.get(g)!==g&&(r.disabled=!0),r.remove(g)}catch(e){r.disabled=!0}r.enabled=!r.disabled,plenigo.Store=r}(Function("return this")()),plenigo.ConfigurationHelper={PAYWALL_TYPE_SHOW:"show",PAYWALL_TYPE_HIDE:"hide",PAYWALL_TYPE_URL:"url",scriptTag:null,extractConfiguration:function(){for(var e,t,n,i,o="/plenigo_sdk.min.js",r=document.getElementsByTagName("script"),a=r.length-1;0<=a;--a)if((i=r[a].getAttribute("src"))&&i.slice(-o.length)===o){e=r[a],this.scriptTag=r[a];break}if(e)for(a=0;a<e.attributes.length;++a)0===(i=e.attributes[a]).nodeName.indexOf("data-")&&(t=i.nodeName.slice("data-".length),n=i.value,t&&n&&(plenigo.configuration.options[t]=n))},isMeteredEnabled:function(){var e=!0;return plenigo.configuration.options["disable-metered"]&&(e="true"!==plenigo.configuration.options["disable-metered"].toLowerCase()),e},showMeteredCounter:function(){var e=!0;return plenigo.configuration.options["hide-metered-counter"]&&(e="true"!==plenigo.configuration.options["hide-metered-counter"].toLowerCase()),e},getLanguage:function(){var e="";return plenigo.configuration.options.lang&&(e=plenigo.configuration.options.lang.toLowerCase()),e},isClientPaywall:function(){var e=!1;return plenigo.configuration.options["client-paywall"]&&(e="true"===plenigo.configuration.options["client-paywall"].toLowerCase()),e},isTestMode:function(){var e=!1;return plenigo.configuration.options["test-mode"]&&(e="true"===plenigo.configuration.options["test-mode"].toLowerCase()),e},isHideProfileSecurityLabel:function(){var e=!1;return plenigo.configuration.options["profile-security-label"]&&(e="true"===plenigo.configuration.options["profile-security-label"].toLowerCase()),e},getPaywallType:function(){return plenigo.configuration.options["paywall-type"]},getPaywallSourceElementId:function(){return plenigo.configuration.options["paywall-source-element-id"]},getPaywallTargetElementId:function(){return plenigo.configuration.options["paywall-target-element-id"]},getRegistrationViewId:function(){return plenigo.configuration.options["paywall-registration-element-id"]},getPaywallBaseUrl:function(){var e=plenigo.configuration.options["paywall-base-url"];return e&&"/"!=e.substr(-1)&&(e+="/"),e},getProductId:function(){return plenigo.configuration.options["product-id"]},getExternalContentId:function(){return plenigo.configuration.options["external-content-id"]},getPaymentCheckFunction:function(){return plenigo.configuration.options["payment-check"]},getLoginStatusFunction:function(){return plenigo.configuration.options["login-status"]},getOAuth2AccessCodeFunction:function(){return plenigo.configuration.options["oauth2-access-code"]},getOriginalSiteUrl:function(){return plenigo.configuration.options["original-site-url"]},getMeteredDescriptionUrl:function(){return plenigo.configuration.options["metered-description-url"]},isAutoBrowserPrepare:function(){var e=!0;return plenigo.configuration.options["auto-browser-prepare"]&&(e="true"===plenigo.configuration.options["auto-browser-prepare"].toLowerCase()),e},isDisableAutoStart:function(){var e=!1;return plenigo.configuration.options["auto-start-disabled"]&&(e="true"===plenigo.configuration.options["auto-start-disabled"].toLowerCase()),e},getActionCallback:function(){var e="";return plenigo.configuration.options["on-action"]&&(e=plenigo.configuration.options["on-action"]),e},getTeaserLength:function(){var e="";return plenigo.configuration.options["teaser-length"]&&(e=plenigo.configuration.options["teaser-length"]),e},getCookieDomain:function(){var e="";return plenigo.configuration.options["cookie-domain"]&&(e=plenigo.configuration.options["cookie-domain"]),e},has3QVideo:function(){return!(!plenigo.configuration.options.video||"3q"!==plenigo.configuration.options.video&&"3Q"!==plenigo.configuration.options.video)},useEvents:function(){return!!plenigo.configuration.options["use-events"]},getDebugLevel:function(){var e=0;return plenigo.configuration.options["debug-level"]&&(e=parseInt(plenigo.configuration.options["debug-level"]||0,10)),e},isDisableAutomaticMeteredCount:function(){var e=!1;return plenigo.configuration.options["disable-automatic-metered-count"]&&(e="true"===plenigo.configuration.options["disable-automatic-metered-count"].toLowerCase()),e},getProcessFinishedCallback:function(){return plenigo.configuration.options["process-finished"]},getPlenigoStage:function(){var e;return plenigo.configuration.options.env&&plenigo.environments[plenigo.configuration.options.env]?plenigo.configuration.options.env:(null==this.scriptTag&&this.extractConfiguration(),this.scriptTag&&this.scriptTag.src&&(e=plenigo.Utils.stripDownUrl(this.scriptTag.src).host||""),-1<e.indexOf("plenigo-stage.com")?"stage":-1<e.indexOf("plenigo-test.com")?"test":"production")},isDisableRedirect:function(){return!!plenigo.configuration.options["disable-redirect"]&&"true"===plenigo.configuration.options["disable-redirect"].toLowerCase()},isSSO:function(){return!!plenigo.configuration.options.sso&&"true"===plenigo.configuration.options.sso.toLowerCase()},getCompanyId:function(){return plenigo.configuration.options.companyId||""}},function(i){i.debug={__print:function(e,t){var n;i.ConfigurationHelper.getDebugLevel()&&"function"==typeof(n=console[e]||console.log)&&n(t)},log:function(e){this.__print("log",e)},error:function(e){this.__print("error",e)},warn:function(e){this.__print("warn",e)}}}(plenigo),plenigo.Language={textStrings:{de:{meteredCounter:'<span class="enp-1st">Noch</span><span class="enp-2nd">{count}</span><span class="enp-3rd">kostenlose Ansichten</span>',meteredCounterWithDescription:'<span class="enp-1st">Noch</span><span class="enp-2nd">{count}</span><span class="enp-3rd">kostenlose Ansichten<small><a href="{descriptionUrl}">Was bedeutet das?</a></small></span>'},en:{meteredCounter:'<span class="enp-1st">Still</span><span class="enp-2nd">{count}</span><span class="enp-3rd">free views</span>',meteredCounterWithDescription:'<span class="enp-1st">Still</span><span class="enp-2nd">{count}</span><span class="enp-3rd">free views<small><a href="{descriptionUrl}">How does it work?</a></small></span>'}},getI18nText:function(e,t){var n,i=plenigo.ConfigurationHelper.getLanguage()?plenigo.ConfigurationHelper.getLanguage():(i=navigator.language||navigator.userLanguage).split("-")[0],o=(plenigo.Language.textStrings[i]||plenigo.Language.textStrings.en)[e];for(n in t)t.hasOwnProperty(n)&&(o=o.replace("{"+n+"}",t[n]));return o}},plenigo.Utils={plenigoUserCookieName:"plenigo_user",plenigoViewCookieName:"plenigo_view",plenigoCheckCookieName:"plenigo_check",plenigoDivId:"plenigoDiv",plenigoGreyDivId:"plenigoGreyDiv",plenigoCookieHintUrl:"/cookieHint",plenigoElementId:"",jsonpCounter:0,browserInitRedirect:!1,ieInitDone:!1,savedUrl:"",popupWindow:"",popupOpened:!1,plenigoInitializedFlag:"plenigoSdkInitialized",xhrCache:{},getViewport:function(e,t){var n=window,i="inner";return"innerWidth"in window||(i="client",n=document.documentElement||document.body),t=(n[i+"Height"]-t)/2,{left:e=(e=(n[i+"Width"]-e)/2)<0?5:e,top:t=t<0?20:t}},setBorderColor:function(e){var t=document.getElementById("plenigoDiv");t&&(t.style.borderColor=e),t&&t.childNodes[1]&&(t.childNodes[1].style.borderColor=e)},requireScript:function(e,t){var n=document.getElementsByTagName("script")[0],i=document.createElement("script");i.async=!0,i.src=e,n.parentNode.insertBefore(i,n),t&&(i.onload=t)},isSet:function(e,t){if(t){if("object"!=typeof e)return!1;if(void 0!==e[t])return!0}return void 0!==e},loadCSS:function(e){var t=document.getElementsByTagName("head")[0],e=this.createNode("link",{href:e,rel:"stylesheet"});t.appendChild(e)},isMobile:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isWebView:function(){var e=!1,t=navigator.userAgent,n=/Safari/.test(t),i=/iPhone|iPod|iPad/.test(t),o=/CriOS/.test(t),r=/Twitter/.test(t),t=/FBAN/.test(t);return!!i&&("standalone"in navigator&&(e=navigator.standalone),!e&&!n&&!o||e&&!n&&!o||r||t)},isIE:function(){return/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/i.test(navigator.userAgent)},isChromeBrowser:function(){return!!window.chrome},isMobileOs:function(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;return/iPhone|iPod|iPad|Android|Windows Phone/.test(t)&&(e=!0),e},isSafari:function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&!/CriOS/.test(navigator.userAgent)},findHighestZIndex:function(e){for(var t,n=document.getElementsByTagName(e),i=0,o=0;o<n.length;o++)i<(t=document.defaultView.getComputedStyle(n[o],null).getPropertyValue("z-index"))&&"auto"!=t&&(i=t);return i},createNode:function(e,t){var n,i=document.createElement(e);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i},migrate:function(){plenigo.Store.remove("views.defaultProduct")},setCookie:function(e,t,n){e=e+"="+t+"; path=/",t=plenigo.ConfigurationHelper.getCookieDomain();n&&(e+="; expires="+n),t&&(e+="; domain="+t),document.cookie=e},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var o=n[i].trim();if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""},deleteCookie:function(e){this.setCookie(e,"delete","Thu, 18 Dec 2013 12:00:00 GMT")},multiply:Math.imul||function(e,t){var n=65535&e,i=65535&t;return n*i+((e>>>16&65535)*i+n*(t>>>16&65535)<<16>>>0)|0},createHash:function(e){for(var t=0,n=3735928559;t<e.length;t++)n=this.multiply(n^e.charCodeAt(t),2654435761);return(n^n>>>16)>>>0},getJSONP:function(e,t){var n,i="plenigo.Utils.getJSONP."+("cb"+this.jsonpCounter++),o=new XMLHttpRequest,r=this;-1===e.indexOf("?")?e+="?jsonp="+i:e+="&jsonp="+i,n=this.createHash(e),this.xhrCache[n]={status:"pending",xmlhttp:o},o.onreadystatechange=function(){var e;4===this.readyState&&200===this.status&&(e=JSON.parse(this.responseText),t(e),r.xhrCache[n].status="done",r.xhrCache[n].response=e)},o.open("GET",e,!0),o.send()},getContent:function(e,t){var n=new XMLHttpRequest;try{n.open("GET",e,!0)}catch(e){console.log(e)}n.onload=function(){4===n.readyState&&200===n.status&&t(n.responseText)},n.send()},getMessages:function(){var e=window.addEventListener?"addEventListener":"attachEvent",t=window[e],n=this;t("attachEvent"==e?"onmessage":"message",function(e){"string"!=typeof e.data||("closeIframe"==e.data?plenigo.Utils.closeWindow():-1<e.data.indexOf("resize:")&&n.resizeIframe(e.data.replace("resize:","")))},!1)},resizeIframe:function(e){var t=document.getElementById(plenigo.Utils.plenigoDivId);t&&e&&(t.style.height=e+"px")},showCookieHint:function(){var e=this.createNode("div",{id:"plenigoCookieHint"});this.getCookie("plenigoTextCookie")||(e.className="",e.style.left=plenigo.configuration.position.left+"px",e.innerHTML='<iframe src="'+plenigo.baseURI+this.plenigoCookieHintUrl+'" frameborder="0" scrolling="no" id="plenigoCookieFrame"></iframe>',document.body.appendChild(e),this.setCookie("plenigoTextCookie",!0))},isSnippetValid:function(e){for(var t in plenigo.Snippet)if(plenigo.Snippet[t]===e)return!0;return!1},addClass:function(e,t){e.classList&&e.classList.contains&&(e.classList.contains(t)||e.classList.add(t))},removeClass:function(e,t){e.classList&&e.classList.contains&&e.classList.contains(t)&&e.classList.remove(t)},snippetFactory:{create:function(e,t){},getWidth:function(){return window.innerWidth<plenigo.configuration.popupWidth+40&&500<window.innerWidth?window.innerWidth-40:plenigo.configuration.popupWidth},__overlay:function(e){function t(e){i instanceof HTMLElement&&(e&&(i.style.display="none"),plenigo.configuration.position=plenigo.Utils.getViewport(o.getWidth(),plenigo.configuration.popupHeight),i.style.top=plenigo.configuration.position.top+"px",i.style.left=plenigo.configuration.position.left+"px",i.style.width=o.getWidth()+"px",i.style.display="block")}var n=plenigo.Utils.createNode("div",{id:plenigo.Utils.plenigoGreyDivId}),i=plenigo.Utils.createNode("div",{id:plenigo.Utils.plenigoDivId}),o=this,r=document.createElement("a");return plenigo.configuration.position=plenigo.Utils.getViewport(this.getWidth(),plenigo.configuration.popupHeight),plenigo.Utils.removeIFrame(),i.className="",i.style.top=plenigo.configuration.position.top+"px",i.style.left=plenigo.configuration.position.left+"px",i.style.width=this.getWidth()+"px",document.body.appendChild(n),document.body.appendChild(i),(e=new plenigo.iFrame(i,e,"overlay")).addCallback(t),e.setAutoHeight(!0),e.create(),i.appendChild(r),n.className="pActive",window.scrollTo(0,0),i.style.height=plenigo.configuration.popupHeight+"px",r.addEventListener&&(window.addEventListener("resize",function(){t(!0)},!1),window.addEventListener("message",function(e){t()},!1),r.addEventListener("click",function(){plenigo.Utils.closeWindow()},!1),n.addEventListener("click",function(){},!1)),i},__embedded:function(e){e=plenigo.Utils.createNode("div",{id:"plenigoIFrameWrapper"+e});return e.style.width="100%",e.style.height="100%",e.style.maxWidth="1000px",e},mobileOverlay:function(e){function t(){n.style.width=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+"px",n.style.width="450px",n.style.height=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+"px"}var n=plenigo.Utils.createNode("div",{id:plenigo.Utils.plenigoDivId}),i=window.matchMedia("(orientation: portrait)"),o=document.createElement("meta"),r=document.body;return o.name="viewport",o.content="width=450, user-scalable=no",o.id="plenigo-viewport",document.getElementsByTagName("head")[0].appendChild(o),i.addListener(t),plenigo.Utils.addClass(r,"checkout-open"),t(),r.appendChild(n),(e=new plenigo.iFrame(n,e,"overlay")).setAutoHeight(!1),e.setMobileMode(!0),e.enableScrolling(),e.create(),window.scrollTo(0,0),n},mobileEmbedded:function(e){return this.__embedded(e)},desktopOverlay:function(e){return this.__overlay(e)},desktopEmbedded:function(e){return this.__embedded(e)}},openIFrame:function(e,t,n){var i;return plenigo.ConfigurationHelper.getLanguage()&&(e=plenigo.Utils.addUrlParameter(e,"lang",plenigo.ConfigurationHelper.getLanguage())),t&&(i=document.getElementById(t))?(t=this.isMobile()?this.snippetFactory.mobileEmbedded(n):this.snippetFactory.desktopEmbedded(n),i.appendChild(t),(n=new plenigo.iFrame(t,e,n)).setAutoHeight(!0),this.isMobile()&&n.setMobileMode(!0),n.create(),t):this.isMobile()?this.snippetFactory.mobileOverlay(e):this.snippetFactory.desktopOverlay(e)},removeIFrame:function(){var t=document.getElementById(plenigo.Utils.plenigoDivId),e=document.getElementById("plenigo-viewport"),n=document.getElementById(plenigo.Utils.plenigoGreyDivId),i=document.body;if(plenigo.windowAlreadyOpened=!1,t)try{document.body.removeChild(t)}catch(e){t.outerHTML=""}if(n)try{document.body.removeChild(n)}catch(e){n.outerHTML=""}if(e)try{e.outerHTML=""}catch(e){}i&&this.removeClass(i,"checkout-open")},extractConfiguration:function(){for(var e,t,n,i,o="/plenigo_sdk.min.js",r=document.getElementsByTagName("script"),a=r.length-1;0<=a;--a)if((i=r[a].getAttribute("src"))&&i.slice(-o.length)===o){e=r[a];break}if(e)for(a=0;a<e.attributes.length;++a)0===(i=e.attributes[a]).nodeName.indexOf("data-")&&(t=i.nodeName.slice("data-".length),n=i.value,t&&n&&(plenigo.configuration.options[t]=n))},cleanedHostUrl:function(){var t=window.location.href,t=plenigo.Utils.removeURLParameter(t,"plppsuccess");return t=plenigo.Utils.removeURLParameter(t,"token"),t=plenigo.Utils.removeURLParameter(t,"PayerID"),t=plenigo.Utils.removeURLParameter(t,"plpaymentsuccess"),t=plenigo.Utils.removeURLParameter(t,"plcompanyid"),t=plenigo.Utils.removeURLParameter(t,"plflowid"),t=plenigo.Utils.removeURLParameter(t,"plIFrameElementId"),t=plenigo.Utils.removeURLParameter(t,"plMobile"),t=plenigo.Utils.removeURLParameter(t,"plfesid"),t=plenigo.Utils.removeURLParameter(t,"plppasuccess"),t=plenigo.Utils.removeURLParameter(t,"plupdatesubscriptions"),plenigo.Payment.pfAliasParams.forEach(function(e){t=plenigo.Utils.removeURLParameter(t,e)}),t},reloadPage:function(e){if(!plenigo.ConfigurationHelper.isDisableRedirect()){var t,n=plenigo.Utils.cleanedHostUrl();for(t in plenigo.successRedirectUrl&&(n=plenigo.successRedirectUrl),e)e.hasOwnProperty(t)&&(n=plenigo.Utils.addUrlParameter(n,t,e[t]));if(plenigo.ConfigurationHelper.useEvents())try{(e=e||{}).currentLocation=this.stripDownUrl(n),document.dispatchEvent(new window.CustomEvent("plenigo.Reload",{detail:e}))}catch(e){console.warn("Error during generating custom events")}else n===window.location.href?top.location.reload():top.location.href=n}},getQueryVariable:function(e){var t,n,i={},o=e.split("&");for(e="?"===e[0]?e.substring(1):e,t=0;t<o.length;t++)i[(n=o[t].split("="))[0]]=n[1]||"";return i},stripDownUrl:function(e){var t=document.createElement("a");return t.href=e,t.queryVars=this.getQueryVariable(t.search.substring(1)),t},removeURLParameter:function(e,t){var n=e.split("?");if(2<=n.length){for(var i=encodeURIComponent(t)+"=",o=n[1].split(/[&;]/g),r=o.length;0<r--;)-1!==o[r].lastIndexOf(i,0)&&o.splice(r,1);return e=0<o.length?n[0]+"?"+o.join("&"):n[0]}return e},removeAllUrlParameter:function(e){var t=e.split("?");return 2<=t.length?t[0]:e},removeUrlHash:function(e){if(0<e.indexOf("#")){var t=e.indexOf("#");return e.substring(0,t)}return e},addUrlParameter:function(e,t,n){var i;document.createElement("a");if(!t||void 0===t||!n||void 0===n)return e;n=encodeURIComponent(n),0<e.indexOf("#")?(o=e.indexOf("#"),i=e.substring(e.indexOf("#"),e.length)):(i="",o=e.length);var o=e.substring(0,o).split("?"),r="";if(1<o.length&&""!==o[1])for(var a=o[1].split("&"),l=0;l<a.length;l++){var s=a[l].split("=");s[0]!==t&&(""===r?r="?":r+="&",r+=s[0]+"="+(s[1]||""))}return""===r&&(r="?"),""!==r&&"?"!==r&&(r+="&"),r+=t+"="+(n||""),o[0]+r+i},getUrl:function(){return window.location.href},getReferrer:function(){return document.referrer},inArray:function(e,t){var n;if(Array.prototype.indexOf)return-1<e.indexOf(t);for(n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},createGuid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},callExternalFunction:function(t){var e,n,i,o,r=0;if(t){plenigo.debug.log("Calling external function "+t);try{for(t=t.split("(")[0],e=[].slice.call(arguments).splice(1),i=(n=t.split(".")).pop(),o=window,r=0;r<n.length;r++)o=o[n[r]];o[i].apply(o,e)}catch(e){plenigo.debug.error("Could not execute function with function name "+t)}}},getURLParameter:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null},getParameterFromGivenURL:function(e,t){var n=plenigo.Utils.cleanupUrl(e),n=e.replace(n,"");return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(n)||[,""])[1].replace(/\+/g,"%20"))||null},cleanupUrl:function(e){var t=e.indexOf("?");return-1==t&&(t=e.indexOf("#")),-1!=t&&(e=e.substring(0,t)),e},closeWindow:function(){plenigo.windowAlreadyOpened=!1;try{plenigo.Utils.popupWindow.close()}catch(e){}plenigo.Utils.removeIFrame(),plenigo.ConfigurationHelper.isClientPaywall()||plenigo.ConfigurationHelper.getPaymentCheckFunction()||plenigo.configuration.callbacks.paymentCheck||plenigo.Utils.reloadPage()},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},addToSessionStorage:function(e,t){if(plenigo.Utils.hasSessionStorage())try{window.sessionStorage.setItem(e,t)}catch(e){}},getFromSessionStorage:function(e){if(plenigo.Utils.hasSessionStorage())try{return window.sessionStorage.getItem(e)}catch(e){}return null}},plenigo.Fingerprint=function(e){var a=Array.prototype.forEach,t=Array.prototype.map;this.each=function(e,t,n){if(null!==e)if(a&&e.forEach===a)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e)==={})return}else for(var r in e)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e)==={})return},this.map=function(e,i,o){var r=[];return null==e?r:t&&e.map===t?e.map(i,o):(this.each(e,function(e,t,n){r[r.length]=i.call(o,e,t,n)}),r)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.screen_orientation=e.screen_orientation,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)},plenigo.Fingerprint.prototype={get:function(){var e=[];if(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution&&void 0!==this.getScreenResolution()&&e.push(this.getScreenResolution().join("x")),e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),document.body?e.push(typeof document.body.addBehavior):e.push("undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),plenigo.Utils.isMobileOs()&&void 0!==plenigo.Store&&plenigo.Store.enabled)try{var t=plenigo.Store.get("fp_id_check");t?e.push(t):(t=plenigo.Utils.createGuid(),plenigo.Store.set("fp_id_check",t),e.push(t))}catch(e){}return this.hasher(e.join("###"),31)},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject)return this.map(["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"],function(e){try{return new ActiveXObject(e),e}catch(e){return null}}).join(";");return""},getScreenResolution:function(){var e=!this.screen_orientation||screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height];return e},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()},getFingerprint:function(){return new plenigo.Fingerprint({screen_resolution:!0,canvas:!0,ie_activex:!0,hasher:function(e,t){return plenigo.CryptoJS.MD5(e)}}).get()}},plenigo.Login={plenigoLoginStatusUrl:plenigo.baseApiURI+"/api/v2/login/status",viewUrl:plenigo.baseApiURI+"/api/v2/user/view",plenigoLoginUrl:plenigo.baseURI+"/remote/desktop/overlay/login",plenigoLoginUrlEmbedded:plenigo.baseURI+"/remote/desktop/embedded/login",plenigoLoginMobileUrl:plenigo.baseURI+"/remote/mobile/overlay/login",plenigoLoginMobileUrlEmbedded:plenigo.baseURI+"/remote/mobile/embedded/login",plenigoRegistrationUrl:plenigo.baseURI+"/remote/desktop/overlay/register",plenigoRegistrationUrlEmbedded:plenigo.baseURI+"/remote/desktop/embedded/register",plenigoRegistrationMobileUrl:plenigo.baseURI+"/remote/mobile/overlay/register",plenigoRegistrationMobileUrlEmbedded:plenigo.baseURI+"/remote/mobile/embedded/register",plenigoPasswordForgottenUrl:plenigo.baseURI+"/remote/desktop/overlay/passwordForgotten",plenigoPasswordForgottenUrlEmbedded:plenigo.baseURI+"/remote/desktop/embedded/passwordForgotten",plenigoPasswordForgottenMobileUrl:plenigo.baseURI+"/remote/mobile/overlay/passwordForgotten",plenigoPasswordForgottenMobileUrlEmbedded:plenigo.baseURI+"/remote/mobile/embedded/passwordForgotten",plenigoOAuth2Url:plenigo.baseURI+"/remote/desktop/overlay/oauth2",plenigoOAuth2UrlEmbedded:plenigo.baseURI+"/remote/desktop/embedded/oauth2",plenigoOAuth2MobileUrl:plenigo.baseURI+"/remote/mobile/overlay/oauth2",plenigoOAuth2MobileUrlEmbedded:plenigo.baseURI+"/remote/mobile/embedded/oauth2",plenigoMaxCookieLifetime:5184e6,plenigoLoginCheckDone:!1,plenigoLoginState:!1,getUserCookie:function(){var e,t=plenigo.Utils.getCookie(plenigo.Utils.plenigoUserCookieName),n=[];return n.cookieValue="",n.autoLoginData="",n.cookieLifetime=0,t&&(3===(e=t.split("|")).length?(n.cookieValue=e[1],n.autoLoginData=e[2].split("_")[0],n.cookieLifetime=e[2].split("_")[1]):2===e.length?(n.cookieValue=e[1].split("_")[0],n.cookieLifetime=e[1].split("_")[1]):(console.log("No plenigo user cookie. Handle like no cookie at all. Content is: "+t),n=[])),n},isUserCookieSet:function(){return""!==plenigo.Utils.getCookie(plenigo.Utils.plenigoUserCookieName)},isLoggedIn:function(){var t,n,e,i,o,r,a;plenigo.Login.plenigoLoginCheckDone&&!plenigo.ConfigurationHelper.isClientPaywall()?(plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getLoginStatusFunction(),plenigo.Login.plenigoLoginState),plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getPaymentCheckFunction())):(e=plenigo.Login.getUserCookie(),i=encodeURIComponent(plenigo.configuration.companyId),a=r=!1,plenigo.Login.isUserCookieSet()&&(o=e.cookieLifetime,r=parseInt(o,10)+36e5<(new Date).getTime(),a=parseInt(o,10)+3e5<(new Date).getTime()),t=(t=e.cookieValue)||"",n=(n=e.autoLoginData)||"",plenigo.ConfigurationHelper.isMeteredEnabled()&&!plenigo.ConfigurationHelper.isDisableAutomaticMeteredCount()?plenigo.View.handle(function(e){null==e?plenigo.Utils.getJSONP(plenigo.Login.viewUrl+"?companyId="+i+"&cookieData="+t+"&refreshCookie="+r+"&meteredCount=false&autoLoginData="+n,plenigo.Login.handleLoginStatus):(plenigo.Login.isUserCookieSet()&&(r=!0),plenigo.Utils.getJSONP(plenigo.Login.viewUrl+"?browserId="+e.browserId+"&companyId="+i+"&url="+e.url+"&cookieData="+t+"&refreshCookie="+r+"&referrer="+e.referrer+"&status="+e.status+"&meteredCount=true&autoLoginData="+n,plenigo.Login.handleLoginStatus))},function(){0<t.length&&a&&plenigo.Utils.getJSONP(plenigo.Login.viewUrl+"?companyId="+i+"&cookieData="+t+"&refreshCookie="+r+"&meteredCount=false&autoLoginData="+n,plenigo.Login.handleLoginStatus)}):!plenigo.ConfigurationHelper.isDisableAutomaticMeteredCount()&&0<t.length&&a&&plenigo.Utils.getJSONP(this.viewUrl+"?companyId="+i+"&cookieData="+t+"&refreshCookie="+r+"&meteredCount=false&autoLoginData="+n,plenigo.Login.handleLoginStatus))},handleLoginStatus:function(e){var t,n,i;e&&(plenigo.ConfigurationHelper.isDisableAutomaticMeteredCount()||plenigo.View.handleMeteredViewResult(e),t=plenigo.Utils.getCookie(plenigo.Utils.plenigoUserCookieName),e.isLoggedIn&&e.cookieData?(n=new Date,(i=new Date).setTime(n.getTime()+plenigo.Login.plenigoMaxCookieLifetime),plenigo.Utils.setCookie(plenigo.Utils.plenigoUserCookieName,e.cookieData+"_"+n.getTime(),i.toUTCString()),plenigo.Login.plenigoLoginState=!0,plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getLoginStatusFunction(),!0),plenigo.ConfigurationHelper.isClientPaywall()?plenigo.Paywall.checkPaymentState():plenigo.ConfigurationHelper.getPaymentCheckFunction()?plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getPaymentCheckFunction()):t||plenigo.Utils.reloadPage()):!e.isLoggedIn&&t?(plenigo.Utils.deleteCookie(plenigo.Utils.plenigoUserCookieName),plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getLoginStatusFunction(),!1),plenigo.ConfigurationHelper.isClientPaywall()?plenigo.Paywall.checkPaymentState():plenigo.ConfigurationHelper.getPaymentCheckFunction()?plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getPaymentCheckFunction()):plenigo.Utils.reloadPage()):(plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getLoginStatusFunction(),e.isLoggedIn),plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getPaymentCheckFunction())),plenigo.Login.plenigoLoginCheckDone=!0)},openLoginScreen:function(e){var t;e?!e.partnerLogin||e.origin&&void 0!==e.testMode&&e.productIds&&e.targetUrl?(t=e.elementId||!1,this.openScreen(e.ssoRedirectURL,e.scope,e.state,t?this.plenigoLoginUrlEmbedded:this.plenigoLoginUrl,t?this.plenigoLoginMobileUrlEmbedded:this.plenigoLoginMobileUrl,!1,t,e.targetUrl,e.origin,e.testMode,e.productIds,e.partnerLogin,e.notCustomerUrl)):console.warn("If partner management is enabled the fields 'origin', 'targetUrl', 'testMode' and 'productIds' are mandatory."):this.openScreen(null,null,null,this.plenigoLoginUrl,this.plenigoLoginMobileUrl,!1,!1)},openScreen:function(e,t,n,i,o,r,a,l,s,p,g,c,d,u){var f,h;e?(h=a?this.plenigoOAuth2UrlEmbedded:this.plenigoOAuth2Url,plenigo.Utils.isMobile()&&!plenigo.Utils.isWebView()&&(h=a?this.plenigoOAuth2MobileUrlEmbedded:this.plenigoOAuth2MobileUrl),f=h+"?client_id="+plenigo.configuration.companyId+"&response_type=code&redirect_uri="+encodeURIComponent(e)+"&scope="+t+"&register="+r+"&loginSource="+window.location.host,n&&(f+="&state="+n)):(h=i,plenigo.Utils.isMobile()&&!plenigo.Utils.isWebView()&&(h=o),f=h+"?companyId="+plenigo.configuration.companyId+"&loginSource="+window.location.host),plenigo.checkoutTheme&&"doo"===plenigo.checkoutTheme&&(f=(f=f.replace("/remote/desktop/","/remote/doo/")).replace("/remote/mobile/","/remote/doo/")),e||(f=plenigo.Utils.addUrlParameter(f,"targetUrl",l),c&&!0===c&&(f=plenigo.Utils.addUrlParameter(f,"origin",s),f=plenigo.Utils.addUrlParameter(f,"testMode",p),f=plenigo.Utils.addUrlParameter(f,"productIds",g),f=plenigo.Utils.addUrlParameter(f,"partnerLogin",c),f=plenigo.Utils.addUrlParameter(f,"nothingBoughtUrl",d))),f=plenigo.Utils.addUrlParameter(f,"loginIdentifier",u),plenigo.Utils.openIFrame(f,a,"login")},openRegistrationScreen:function(e){var t;e?!e.partnerLogin||e.origin&&e.testMode&&e.productIds&&e.targetUrl?(t=e.elementId||!1,this.openScreen(e.ssoRedirectURL,e.scope,e.state,t?this.plenigoRegistrationUrlEmbedded:this.plenigoRegistrationUrl,t?this.plenigoRegistrationMobileUrlEmbedded:this.plenigoRegistrationMobileUrl,!0,t,e.targetUrl,e.origin,e.testMode,e.productIds,e.partnerLogin,e.notCustomerUrl,e.loginIdentifier)):console.warn("If partner management is enabled the fields 'origin', 'targetUrl', 'testMode' and 'productIds' are mandatory."):this.openScreen(null,null,null,this.plenigoRegistrationUrl,this.plenigoRegistrationMobileUrl,!0,!1)},openPasswordForgottenScreen:function(e){var t;e?!e.partnerLogin||e.origin&&e.testMode&&e.productIds&&e.targetUrl?(t=e.elementId||!1,this.openScreen(e.ssoRedirectURL,e.scope,e.state,t?this.plenigoPasswordForgottenUrlEmbedded:this.plenigoPasswordForgottenUrl,t?this.plenigoPasswordForgottenMobileUrlEmbedded:this.plenigoPasswordForgottenMobileUrl,!0,t,e.targetUrl,e.origin,e.testMode,e.productIds,e.partnerLogin,e.notCustomerUrl,e.loginIdentifier)):console.warn("If partner management is enabled the fields 'origin', 'targetUrl', 'testMode' and 'productIds' are mandatory."):this.openScreen(null,null,null,this.plenigoPasswordForgottenUrl,this.plenigoPasswordForgottenMobileUrl,!0,!1)}},plenigo.View={SEARCH_ENGINES:["www.google.","www.bing.com","yahoo.com","www.baidoo.com"],SOCIAL_MEDIA_SITES:["twitter.com","facebook.com","instagram.com"],fingerprintSize:32,fingerprintArguments:16,fingerprintIndex:0,fingerprintActivatedIndex:1,fingerprintFreeViewsIndex:2,fingerprintViewsTaken:3,fingerprintLimitReachedIndex:4,fingerprintOnlyUniqueViews:5,fingerprintIgnoreSearchEngines:6,fingerprintIgnoreSocialMedia:7,fingerprintUniquelyVisitedSites:8,fingerprintFreeAfterLogin:9,fingerprintFreeAfterLoginTaken:10,fingerprintLimitAfterLoginReachedIndex:11,fingerprintStartTimeIndex:12,fingerprintPeriodIndex:13,fingerprintStartWithFirstVisitIndex:14,fingerprintCookieCreationIndex:15,fingerprintCookieVersionIndex:16,fingerprintCookieVersion:1,metered:null,meteredLabel:null,AESMode:{mode:plenigo.CryptoJS.mode.CTR,padding:plenigo.CryptoJS.pad.NoPadding,iv:plenigo.CryptoJS.enc.Hex.parse("7a134cc376d05cf6bc116e1e53c8801e")},getEncryptionKey:function(){var e=plenigo.CryptoJS.MD5(plenigo.configuration.companyId).toString();return plenigo.CryptoJS.enc.Hex.parse(e)},createMeteredCounter:function(e){var t,n=document.createElement("div");n.id="enp-metered-counter",t='<div class="enp-metered-content">',plenigo.ConfigurationHelper.getMeteredDescriptionUrl()?t+=plenigo.Language.getI18nText("meteredCounterWithDescription",{count:e,descriptionUrl:plenigo.ConfigurationHelper.getMeteredDescriptionUrl()}):t+=plenigo.Language.getI18nText("meteredCounter",{count:e}),t+="</div>",n.innerHTML=t,this.metered=n,this.meteredLabel=n.getElementsByClassName("enp-2nd")[0],document.getElementsByTagName("body")[0].appendChild(n)},handle:function(e,t){var n;plenigo.ConfigurationHelper.isClientPaywall()?plenigo.Paywall.checkPaymentState(function(){(n=plenigo.View.handleMeteredView())&&!n.preventCall&&e(n)},t):(n=plenigo.View.handleMeteredView())&&!n.preventCall&&e(n)},getMeteredCookieInfo:function(){try{var e,t,n=decodeURIComponent(plenigo.Utils.getCookie(plenigo.Utils.plenigoViewCookieName)),i={};if(!(n&&n.length>this.fingerprintSize))return""===n&&["","true"];if(e=plenigo.CryptoJS.enc.Hex.parse(n),t=plenigo.CryptoJS.enc.Base64.stringify(e),(n=plenigo.CryptoJS.AES.decrypt(t,this.getEncryptionKey(),plenigo.View.AESMode).toString(plenigo.CryptoJS.enc.Utf8).split("|")).length>=this.fingerprintArguments)return e=new Date(parseInt(n[this.fingerprintCookieCreationIndex],10)),t=new Date,t=new Date(t.getFullYear(),t.getMonth(),1),n[this.fingerprintCookieVersionIndex]&&n[this.fingerprintCookieVersionIndex]!=this.fingerprintCookieVersion&&plenigo.Utils.migrate(),t<=e&&(i.fingerprint=n[this.fingerprintIndex],i.fingerprint&&(i.browserId=i.fingerprint,i.activated=n[this.fingerprintActivatedIndex],"true"===i.activated&&(i.freeViews=parseInt(n[this.fingerprintFreeViewsIndex],10),i.viewsTaken=parseInt(n[this.fingerprintViewsTaken],10),i.limitReached=n[this.fingerprintLimitReachedIndex],i.onlyUniqueViews=n[this.fingerprintOnlyUniqueViews],i.ignoreSearchEngines=n[this.fingerprintIgnoreSearchEngines],i.ignoreSocialMedia=n[this.fingerprintIgnoreSocialMedia],i.uniquelyVisitedSites=n[this.fingerprintUniquelyVisitedSites],i.freeAfterLogin=parseInt(n[this.fingerprintFreeAfterLogin],10),i.freeAfterLoginTaken=parseInt(n[this.fingerprintFreeAfterLoginTaken],10),i.limitReachedAfterLogin=n[this.fingerprintLimitAfterLoginReachedIndex],i.startTime=n[this.fingerprintStartTimeIndex],i.period=n[this.fingerprintPeriodIndex],i.startWithFirstVisit=n[this.fingerprintStartWithFirstVisitIndex],i.cookieCreation=n[this.fingerprintCookieCreationIndex],i.cookieVersion=n[this.fingerprintCookieVersionIndex])),i)}catch(e){}return null},handleMeteredView:function(){return this.executeMeteredView(location.pathname)},executeMeteredView:function(e){var t,n,i,o,r,a,l,s,p,g,c,d,u,f,h,m,y,w,U,v=this.uuidv4(),C=encodeURIComponent(e),S=plenigo.Utils.getReferrer(),k=encodeURIComponent(S),b={preventCall:!0},I=[],P=!0,L=0,E=this.getMeteredCookieInfo();try{if(E&&plenigo.Utils.isSet(E.activated)){if(!(y=plenigo.Utils.isSet(E.fingerprint)&&32===E.fingerprint.length?E.fingerprint:v))return plenigo.Utils.deleteCookie(plenigo.Utils.plenigoViewCookieName),{preventCall:!0};if(v=y,"true"===(t=E.activated)){if(i=parseInt(E.freeViews,10),o=parseInt(E.viewsTaken,10),n=E.limitReached,d=E.onlyUniqueViews,u=E.ignoreSearchEngines,f=E.ignoreSocialMedia,h=(plenigo.Store.enabled?plenigo.Store.get("1f021b70a7bbadfc5cf3d45340081a62"):E.uniquelyVisitedSites)||"",g=E.freeAfterLogin,c=E.freeAfterLoginTaken,r=E.limitReachedAfterLogin,a=E.startTime,l=E.period,s=E.startWithFirstVisit,p=E.cookieCreation,"true"===d&&(y=plenigo.CryptoJS.MD5(e).toString().substring(0,8),h&&(I=h.split(",")).length>o+c&&(h="",I=[]),plenigo.Utils.inArray(I,y)?P=!1:(h&&0<h.length&&(h+=","),h+=y)),plenigo.Store.enabled&&plenigo.Store.set("1f021b70a7bbadfc5cf3d45340081a62",h),"true"===u&&P)for(L=0;L<plenigo.View.SEARCH_ENGINES.length;L++)if(-1<S.indexOf(plenigo.View.SEARCH_ENGINES[L])){P=!1;break}if("true"===f&&P)for(L=0;L<plenigo.View.SOCIAL_MEDIA_SITES.length;L++)if(-1<S.indexOf(plenigo.View.SOCIAL_MEDIA_SITES[L])){P=!1;break}if(P&&!plenigo.Login.isUserCookieSet()&&0<i?++o:P&&plenigo.Login.isUserCookieSet()&&0<g&&++c,"true"===n&&o<i&&(n="false"),"true"===r&&c<g&&(r="false"),("true"===n&&(!plenigo.Login.isUserCookieSet()||g<=0)||"true"===r&&plenigo.Login.isUserCookieSet())&&window.location.search.indexOf("meteredLimitReached=true")<0)m=t+"|"+i+"|"+o+"|"+(n="true")+"|"+d+"|"+u+"|"+f+"|"+h+"|"+g+"|"+c+"|"+r+"|"+a+"|"+l+"|"+s+"|"+p,this.setViewCookie(v,m,l),plenigo.ConfigurationHelper.isClientPaywall()?plenigo.View.startUpSelling(0<g&&"true"!==r):(w=plenigo.Login.isUserCookieSet()?g:i,U=plenigo.Login.isUserCookieSet()?c:o,plenigo.View.showCookieCounter(t,w,U));else if(i<=o&&!plenigo.Login.isUserCookieSet())m=t+"|"+i+"|"+o+"|"+(n="true")+"|"+d+"|"+u+"|"+f+"|"+h+"|"+g+"|"+c+"|"+r+"|"+a+"|"+l+"|"+s+"|"+p,this.setViewCookie(v,m,l),plenigo.View.startUpSelling(0<g),plenigo.View.showCookieCounter(t,i,o);else{if(!(g<=c&&plenigo.Login.isUserCookieSet()))return m=t+"|"+i+"|"+o+"|"+(n="false")+"|"+d+"|"+u+"|"+f+"|"+h+"|"+g+"|"+c+"|"+(r="false")+"|"+a+"|"+l+"|"+s+"|"+p,this.setViewCookie(v,m,l),w=plenigo.Login.isUserCookieSet()?g:i,U=plenigo.Login.isUserCookieSet()?c:o,plenigo.View.showCookieCounter(t,w,U),plenigo.ConfigurationHelper.isClientPaywall()&&plenigo.Paywall.showContent({access:"granted"}),b=plenigo.View.prepareMeteredViewRequest(v,C,k,!1),{preventCall:!0};m=t+"|"+i+"|"+o+"|"+(n=r="true")+"|"+d+"|"+u+"|"+f+"|"+h+"|"+g+"|"+c+"|"+r+"|"+a+"|"+l+"|"+s+"|"+p,this.setViewCookie(v,m,l),plenigo.View.startUpSelling(!1),plenigo.View.showCookieCounter(t,g,c)}}else plenigo.View.startUpSelling(!1)}else b=plenigo.View.prepareMeteredViewRequest(v,C,k,!0)}catch(e){plenigo.Utils.deleteCookie(plenigo.Utils.plenigoViewCookieName),b=plenigo.View.prepareMeteredViewRequest(v,C,k,!0)}return b},prepareMeteredViewRequest:function(e,t,n,i){return plenigo.Login.isUserCookieSet()&&(i=!0),{browserId:encodeURIComponent(e),url:t,referrer:n,status:i}},showCookieCounter:function(e,t,n){"true"===e&&plenigo.ConfigurationHelper.showMeteredCounter()&&(n=t-n,plenigo.View.createMeteredCounter(0<=n?n:0))},setViewCookie:function(e,t,n){var i=plenigo.CryptoJS.AES.encrypt(e+"|"+t+"|"+(new Date).getTime()+"|"+this.fingerprintCookieVersion,this.getEncryptionKey(),plenigo.View.AESMode),o=new Date,r=new Date(o.getFullYear(),o.getMonth(),o.getUTCDate()),e=new Date(o.getFullYear(),o.getMonth()+1,1).getTime(),t=plenigo.CryptoJS.enc.Base64.parse(i.toString()),i=plenigo.CryptoJS.enc.Hex.stringify(t);"WEEK"===n?(t=r.getDate()-r.getDay()+8,e=new Date((new Date).setDate(t)).getTime()):"DAY"===n&&(e=r.getTime()+864e5),o.setTime(e),plenigo.Utils.setCookie(plenigo.Utils.plenigoViewCookieName,encodeURIComponent(i),o.toUTCString())},uuidv4:function(){return plenigo.CryptoJS.MD5("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})).toString()},handleMeteredViewResult:function(e){var t,n;plenigo.Paywall&&!0===plenigo.Paywall.paymentState||(t=this.getMeteredCookieInfo(),n=this.uuidv4(),n=plenigo.Utils.isSet(t.browserId)&&t.browserId?t.browserId:n,plenigo.Utils.isSet(e.meteredActivated)&&!1!==e.meteredActivated?(e.viewsTaken=plenigo.Utils.isSet(t.viewsTaken)?parseInt(t.viewsTaken,10):0,e.limitReached=e.freeViews-e.viewsTaken<=0,e.freeAfterLoginTaken=plenigo.Utils.isSet(t.freeAfterLoginTaken)?parseInt(t.freeAfterLoginTaken,10):0,e.limitReachedAfterLogin=e.freeAfterLogin-e.freeAfterLoginTaken<=0,e.uniquelyVisitedSites=plenigo.Utils.isSet(t.uniquelyVisitedSites)?t.uniquelyVisitedSites:"",t=e.meteredActivated+"|"+e.freeViews+"|"+e.viewsTaken+"|"+e.limitReached+"|"+e.onlyUniqueViews+"|"+e.ignoreSearchEngines+"|"+e.ignoreSocialMedia+"|"+e.uniquelyVisitedSites+"|"+e.freeAfterLogin+"|"+e.freeAfterLoginTaken+"|"+e.limitReachedAfterLogin+"|"+e.startTime+"|"+e.period+"|"+e.startWithFirstVisit,plenigo.View.setViewCookie(n,t,e.period),e.viewsTaken>e.freeViews&&(!plenigo.Login.isUserCookieSet()||e.freeAfterLogin<=0)||e.freeAfterLoginTaken>e.freeAfterLogin&&plenigo.Login.isUserCookieSet()&&0<e.freeAfterLogin?plenigo.ConfigurationHelper.isClientPaywall()?plenigo.Paywall.checkPaymentState(function(){plenigo.View.startUpSelling(0<e.freeAfterLogin)}):e.viewsTaken>e.freeViews&&!plenigo.Login.isUserCookieSet()&&0<e.freeAfterLogin?plenigo.View.startUpSelling(0<e.freeAfterLogin):window.location.search.indexOf("meteredLimitReached=true")<0&&plenigo.Utils.reloadPage({meteredLimitReached:!0}):(plenigo.Login.isUserCookieSet()&&e.freeAfterLogin,this.executeMeteredView(location.pathname),plenigo.ConfigurationHelper.isClientPaywall()&&plenigo.Paywall.showContent({access:"granted"}))):(!1===e.meteredActivated&&plenigo.Utils.deleteCookie(plenigo.Utils.plenigoViewCookieName),plenigo.ConfigurationHelper.isClientPaywall()&&plenigo.Paywall.checkPaymentState(function(){plenigo.View.startUpSelling(!1)})))},startUpSelling:function(e){var t=document.getElementById(plenigo.ConfigurationHelper.getPaywallTargetElementId()),n=document.getElementById(plenigo.ConfigurationHelper.getRegistrationViewId());if(!t||!n)return plenigo.debug.error("Elements missing.\n  Please check reference: https://plenigo.github.io/sdks/javascript#paywall-functionality\n This functionality requires data-paywall-registration-element-id AND data-paywall-target-element-id to be set."),!1;plenigo.ConfigurationHelper.isClientPaywall()?e&&!plenigo.Login.isUserCookieSet()?t.innerHTML=n.innerHTML:plenigo.Paywall.showContent({access:"denied"}):window.location.search.indexOf("meteredLimitReached=true")<0&&plenigo.Utils.reloadPage({meteredLimitReached:!0})}},plenigo.Payment={plenigoCheckoutUrl:plenigo.baseURI+"/remote/desktop/overlay/checkout",plenigoCheckoutMobileUrl:plenigo.baseURI+"/remote/mobile/overlay/checkout",plenigoCheckoutUrlEmbedded:plenigo.baseURI+"/remote/desktop/embedded/checkout",plenigoCheckoutMobileUrlEmbedded:plenigo.baseURI+"/remote/mobile/embedded/checkout",plenigoPayPalSummaryUrl:plenigo.baseURI+"/remote/desktop/overlay/checkout/handlePayPalResult",plenigoPayPalSummaryMobileUrl:plenigo.baseURI+"/remote/mobile/overlay/checkout/handlePayPalResult",plenigoPayPalSummaryUrlEmbedded:plenigo.baseURI+"/remote/desktop/embedded/checkout/handlePayPalResult",plenigoPayPalSummaryMobileUrlEmbedded:plenigo.baseURI+"/remote/mobile/embedded/checkout/handlePayPalResult",plenigoWaitUrl:plenigo.baseURI+"/remote/desktop/overlay/checkout/waitForTransaction",plenigoWaitMobileUrl:plenigo.baseURI+"/remote/mobile/overlay/checkout/waitForTransaction",plenigoWaitUrlEmbedded:plenigo.baseURI+"/remote/desktop/embedded/checkout/waitForTransaction",plenigoWaitMobileUrlEmbedded:plenigo.baseURI+"/remote/mobile/embedded/checkout/waitForTransaction",pfAliasParams:["LANGUAGE","OrderID","CN","NCErrorCN","CardNo","Brand","NCErrorCardNo","CVC","NCErrorCVC","ED","NCErrorED","NCError","Alias","status","SHASign","ALIASPERSISTEDAFTERUSE"],checkout:function(e){var t,n=encodeURIComponent((new plenigo.Fingerprint).getFingerprint()),i=plenigo.Utils.cleanedHostUrl(),o=(o=e.targetUrl)||plenigo.Utils.cleanedHostUrl();plenigo.Payment.pfAliasParams.forEach(function(e){i=plenigo.Utils.removeURLParameter(i,e)}),i=encodeURIComponent(i),t=e.elementId?this.plenigoCheckoutUrlEmbedded:this.plenigoCheckoutUrl,plenigo.Utils.isMobile()&&!plenigo.Utils.isWebView()&&(t=e.elementId?this.plenigoCheckoutMobileUrlEmbedded:this.plenigoCheckoutMobileUrl),plenigo.checkoutTheme&&"doo"===plenigo.checkoutTheme&&(t=(t=t.replace("/remote/desktop/","/remote/doo/")).replace("/remote/mobile/","/remote/doo/"));n=t+"?companyId="+plenigo.configuration.companyId+"&checkoutInfo="+e.paymentData+"&browserId="+n+"&currentUrl="+i+"&loginSource="+window.location.host;e.loginToken&&(n+="&loginToken="+e.loginToken),e.startWithRegistration&&(n+="&showRegisterFirst=true"),e.sourceUrl&&(e.sourceUrl=encodeURIComponent(e.sourceUrl),n+="&sourceUrl="+plenigo.Utils.removeAllUrlParameter(e.sourceUrl)),o&&(n+="&targetUrl="+(o=encodeURIComponent(o))),e.affiliateId&&(e.affiliateId=encodeURIComponent(e.affiliateId),n+="&affiliateId="+e.affiliateId),e.elementId&&(e.elementId=encodeURIComponent(e.elementId),n+="&embeddedId="+e.elementId),plenigo.Utils.openIFrame(n,e.elementId,"checkout")},continuePPCheckout:function(e,t,n,i,o,r){var a=this.plenigoPayPalSummaryUrl;o&&i&&document.getElementById(i)?a=this.plenigoPayPalSummaryMobileUrlEmbedded:o?a=this.plenigoPayPalSummaryMobileUrl:i&&document.getElementById(i)&&(a=this.plenigoPayPalSummaryUrlEmbedded),a=a+"?flowId="+e+"&companyId="+t+"&success="+n,r&&(a+="&plSession="+r),plenigo.Utils.openIFrame(a,i,"checkout")},continueCheckout:function(e,t,n,i,o,r){var a=this.plenigoWaitUrl;o&&i&&document.getElementById(i)?a=this.plenigoWaitMobileUrlEmbedded:o?a=this.plenigoWaitMobileUrl:i&&document.getElementById(i)&&(a=this.plenigoWaitUrlEmbedded),a=a+"?flowId="+e+"&companyId="+t+"&success="+n,r&&(a+="&plSession="+r),plenigo.Utils.openIFrame(a,i,"checkout")},getPFCheckoutParams:function(){var n="";return this.pfAliasParams.forEach(function(e){var t=plenigo.Utils.getURLParameter(e);t&&null!=t&&(n&&(n+="&"),n+=e.toLowerCase()+"="+t)}),n},openPostFinance:function(e){var t,n,i=document.createElement("FORM");for(t in i.name="pfForm",i.method="POST",i.action=e.url,e.data)e.data.hasOwnProperty(t)&&((n=document.createElement("INPUT")).type="HIDDEN",n.name=t,n.value=e.data[t],i.appendChild(n));document.body.appendChild(i),i.submit()}},plenigo.Paywall={paymentState:!1,plenigoCheckPaymentStateUrl:plenigo.baseApiURI+"/api/v2/user/product/clientCheck",checkPaymentState:function(t,n){var e,i=plenigo.ConfigurationHelper.getProductId();plenigo.Login.isUserCookieSet()?!1===plenigo.Paywall.paymentState&&(e=plenigo.Login.getUserCookie(),plenigo.Utils.getJSONP(this.plenigoCheckPaymentStateUrl+"?companyId="+plenigo.configuration.companyId+"&userCookie="+e.cookieValue+"&productId="+i+"&testMode="+plenigo.ConfigurationHelper.isTestMode()+"&autoLoginData="+e.autoLoginData,function(e){plenigo.Paywall.showContent(e),"granted"!==e.access?t&&t():(plenigo.Paywall.paymentState=!0,n&&n())})):plenigo.ConfigurationHelper.isClientPaywall?t&&t():plenigo.ConfigurationHelper.getPaymentCheckFunction()||plenigo.configuration.callbacks.paymentCheck||plenigo.Utils.reloadPage()},showContent:function(e){var t,n=document.getElementById(plenigo.ConfigurationHelper.getPaywallTargetElementId()),i=document.getElementById(plenigo.ConfigurationHelper.getPaywallSourceElementId());"granted"===e.access?plenigo.ConfigurationHelper.getPaywallType()===plenigo.ConfigurationHelper.PAYWALL_TYPE_SHOW?n&&i&&(n.innerHTML=i.innerHTML):plenigo.ConfigurationHelper.getPaywallType()===plenigo.ConfigurationHelper.PAYWALL_TYPE_URL&&(t=plenigo.CryptoJS.MD5(plenigo.ConfigurationHelper.getExternalContentId()),plenigo.Utils.getContent(plenigo.ConfigurationHelper.getPaywallBaseUrl()+t,function(e){n.innerHTML=e})):(t=plenigo.View.getMeteredCookieInfo(),plenigo.ConfigurationHelper.getPaywallType()===plenigo.ConfigurationHelper.PAYWALL_TYPE_HIDE&&(!1===plenigo.ConfigurationHelper.isMeteredEnabled()||null===t||t.freeAfterLogin<=0||"true"===t.limitReachedAfterLogin||"true"!==t.activated)&&n&&i&&(n.innerHTML=i.innerHTML))},isAccessAllowed:function(t){var e,n=plenigo.ConfigurationHelper.getProductId(),i=!1;plenigo.Login.isUserCookieSet()?(e=plenigo.Login.getUserCookie(),plenigo.Utils.getJSONP(this.plenigoCheckPaymentStateUrl+"?companyId="+plenigo.configuration.companyId+"&userCookie="+e.cookieValue+"&productId="+n+"&testMode="+plenigo.ConfigurationHelper.isTestMode()+"&autoLoginData="+e.autoLoginData,function(e){"granted"===e.access&&(i=!0),t(i)})):t(i)}},function(n){n.statistic={onAction:function(e){var t=n.ConfigurationHelper.getActionCallback();if(t)n.Utils.callExternalFunction(t,e);else try{document.dispatchEvent(new window.CustomEvent("plenigo.Statistic",{detail:e}))}catch(e){console.warn("Error during generating custom events")}}}}(plenigo),function(U){U.iFrame=function(n,t,o){function i(e){var t=l.getBoundingClientRect(),n=!1;if(m=!1,s&&c[s])try{c[s]()}catch(e){}y();try{n=1<document.querySelectorAll("iframe[src*=plenigo]").length}catch(e){n=!1}if((p||screen.height<800)&&!n){window.scrollTo(0,t.top+window.pageYOffset);try{document.dispatchEvent(new window.CustomEvent("plenigo.Scroll",{detail:t.top+window.pageYOffset}))}catch(e){console.error(e)}}}function r(){n.hasAttribute("data-status")&&(l.setAttribute("data-status","loading"),n.setAttribute("data-status","loading"))}function a(){var e;l.onload=i,e=window.addEventListener?"addEventListener":"attachEvent",(0,window[e])("attachEvent"==e?"onmessage":"message",w,!1)}var l,s,p,g,c=this,d=!0,u='scrolling="no"',f=[],h=0,m=!1,e=window.matchMedia("(orientation: portrait)"),y=function(){n.hasAttribute("data-status")&&(l.setAttribute("data-status","finished"),n.setAttribute("data-status","finished"))},w=function(e){var t,n={},i=e.origin.replace(/:[0-9]+$/,"");if(i===g)if(0!==e.data.indexOf("resize:")){try{n=JSON.parse(e.data)}catch(e){}"object"==typeof n&&"plenigo"===n.api&&"function"==typeof c[n.func]&&(t=n.iFrameName&&n.iFrameName===o,c[n.func](n.param||"",t))}else c.resize(e.data.replace("resize:",""),!0);else console.log("catched event from "+i+" but listen to events from "+g)};window.setInterval(function(){m=!1},1500);e.addListener(function(e){m=!1}),this.load=function(e){l.src=e},this.finishedLoading=function(e,t){this.resize(e,!0),y()},this.unload=function(e,t){t&&r()},this.setLayout=function(e,t){t&&(n.className="",n.classList.add(e))},this.loginSuccess=function(e,t){location.href;this.close(e,t);try{document.dispatchEvent(new window.CustomEvent("plenigo.LoginSuccess",{detail:e}))}catch(e){console.warn("Error during generating custom events")}},this.purchaseSuccess=function(e,t){var n=location.href;"object"!=typeof e&&(e={orderId:e,customerSession:""});try{document.dispatchEvent(new window.CustomEvent("plenigo.PurchaseSuccess",{detail:e}))}catch(e){console.warn("Error during generating custom events")}try{window.sessionStorage.setItem("checkoutSuccess",""+e.orderId||"1")}catch(e){console.error("store data in sessionStorage failed with "+e.message)}U.ConfigurationHelper.isDisableRedirect()||(n+=(-1<n.indexOf("?")?"&":"?")+"plPurchase=success&plOrderId="+e.orderId,location.href=n);try{this.close(e,t)}catch(e){}},this.sendError=function(e,t){try{document.dispatchEvent(new window.CustomEvent("plenigo.Error",{detail:e}))}catch(e){console.warn("Error during generating custom events")}},this.callAmazonPay=function(n,e){var i;if(e&&"string"==typeof n.lib&&"object"==typeof n.data){e=n.lib,i=n.method;try{delete n.lib,delete n.method}catch(e){console.warn(e.message)}U.Utils.requireScript(e,function(){try{var e,t;"checkout"===i?amazon.Pay.initCheckout(n.data):"change"===i&&(e="plenigoAmazonChangeButton",t=U.Utils.createNode("div",{id:e,style:"display: none;"}),document.body.appendChild(t),amazon.Pay.bindChangeAction("#"+e,n.data),t.click())}catch(e){console.error(e.message)}})}},this.analyticsLoad=function(e,t){location.href;var n={action:"load",page:e.page||"",data:e};try{document.dispatchEvent(new window.CustomEvent("plenigo.WebAnalyticsLoad",{detail:n}))}catch(e){console.warn("Error during generating custom events")}},this.resize=function(e,t){var n=l.getBoundingClientRect();if(!m&&!(e<200)&&t&&d){if(h&&n.top<0&&e<n.height){window.scrollTo(0,n.top+window.pageYOffset);try{document.dispatchEvent(new window.CustomEvent("plenigo.Scroll",{detail:n.top+window.pageYOffset}))}catch(e){console.error(e)}}l.style.height=e+"px",h++}},this.log=function(e,t){e.level&&e.message&&(console.group("plenigo Checkout"),console[e.level](e.message,e.data||{}),console.groupEnd())},this.onAction=function(e,t){U.statistic&&U.statistic.onAction(e)},this.addCallback=function(e){"function"==typeof e&&f.push(e)},this.initialize=function(e){var t=l.contentWindow,n={name:o,ssl:-1<window.location.protocol.indexOf("https"),hideSecurity:U.ConfigurationHelper.isHideProfileSecurityLabel()||!1},i=0;for(t?t.postMessage(JSON.stringify(n),"*"):s="initialize",function(e,t){var n={func:e,param:t,api:"plenigo",iFrameName:o};try{l.contentWindow.postMessage(JSON.stringify(n),"*")}catch(e){console.error(e)}}("setName",o),i=h=0;i<f.length;i++)try{f[i]()}catch(e){}},this.location=function(e,t){t&&(location.href=e,r())},this.setSession=function(e,t){try{var n,i,o=window.sessionStorage;[n,i]=e.split("."),o.setItem(n+"FlowKey",i)}catch(e){console.error("store data in sessionStorage failed with "+e.message)}},this.setAutoHeight=function(e){d=e},this.enableScrolling=function(){u=""},this.trigger=function(e,t){console.group("trigger"),console.log(e),console.log(t),console.groupEnd()},this.setMobileMode=function(e){p=e},this.setEmbedded=function(e){0},this.create=function(){var e;n.innerHTML='<iframe src="'+t+'" frameborder="0" '+u+' style="width: 1px; min-width: 100%; height: 100%;" height="100%" width="100%" id="plenigoFrame'+o+'"></iframe>',l=document.getElementById("plenigoFrame"+o),e=U.Utils.stripDownUrl(t),g=e.protocol+"//"+e.hostname,a();try{document.dispatchEvent(new window.CustomEvent("plenigo.OpenIframe",{detail:{}}))}catch(e){console.warn("Error during generating custom events")}},this.getIframe=function(){return l},this.restart=function(e,t){t&&location.reload()},this.close=function(e,t){try{document.dispatchEvent(new window.CustomEvent("plenigo.Close",{detail:o}))}catch(e){console.warn("Error during generating custom events")}try{l.remove()}catch(e){l.parentNode.removeChild(l)}U.Utils.removeIFrame()}}}(plenigo),function(c){function o(t,n){function i(){var e;if(void 0!==c.configuration.companyId)return c.configuration.companyId;e=document.getElementsByTagName("script");for(var t=0;1<e.length;t++)if(e[t].src&&-1<e[t].src.indexOf("plenigo_sdk.min.js"))return e[t].src.split("/").reverse()[1]}function o(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&(-1<r.indexOf("?")?r+="&":r+="?",r+=t+"="+e[t])}function e(){var e;r=c.baseCheckoutURI.replace("plenigo.com",c.environments[c.ConfigurationHelper.getPlenigoStage()])+(t.hasOwnProperty("language")?"/"+t.language:c.ConfigurationHelper.getLanguage()?"/"+c.ConfigurationHelper.getLanguage():"")+"/default"+(!0===a?"/api/getConfig/"+i()+"/"+t.session:!0===s?"/payment/handleReturn/"+i()+"/"+t.session:!1!==p?"/start-sso-purchase":"/start-purchase"),o({purchaseId:n||"",companyId:i(),config:(e=JSON.stringify((delete(e=Object.assign({},t)).returnUrl,e)),decodeURIComponent(btoa(e).replace(/=+$/,""))),url:encodeURIComponent("string"==typeof t.returnUrl&&10<t.returnUrl.length&&0===t.returnUrl.indexOf("http")?t.returnUrl:g)}),t.session&&o({session:t.session})}var r,a=!1,l={},s=!1,p=!1,g=location.href;this.addParameters=function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&(l[t]=e[t])},this.setConfigUrl=function(){a=!0},this.setReturn=function(e){this.addParameters({status:e}),s=!0},this.sso=function(e){p=e},this.addPurchaseId=function(e){n=e},this.configure=function(e){t=e},this.get=function(){return e(),o(l),r}}var e,r=!1;c.Utils.stripDownUrl(location.href);c.Checkout=function(e,t){var n,i;if("string"!=typeof e||e.length<5)return console.error("purchase ID is missing! Please see https://plenigo.github.io/sdks/javascript#example-with-full-html-1 for documentation!"),!1;c.configuration.popupWidth=1050,n=new o(t,e);try{(i=window.sessionStorage.getItem("checkoutFlowKey"))&&n.addParameters({oldSession:i})}catch(e){console.error(e)}this.start=function(){return!r&&c.Utils.openIFrame(n.get(),t.elementId,"checkout"+(t.elementId||Math.round(1e5*Math.random()))).setAttribute("data-status","loading")},this.login=function(){return n.addParameters({sso:"login"}),n.sso("login"),this.start()},this.register=function(){return n.addParameters({sso:"register"}),n.sso("register"),this.start()},this.close=function(e){r=!1}},c.Utils.getURLParameter("pci")&&c.Utils.getURLParameter("pcs")&&(r||(r=!0,(e=new o({language:"de",session:c.Utils.getURLParameter("pci")})).setConfigUrl(),c.Utils.getJSONP(e.get(),function(e){var t,n,i;t=e,n=c.Utils.getURLParameter("pcs"),i=c.Utils.stripDownUrl(location.href),e=new o(t),void 0!==i.queryVars.ba_token&&e.addParameters({token:i.queryVars.token,ba_token:i.queryVars.ba_token}),void 0!==i.queryVars.amazonCheckoutSessionId&&e.addParameters({amazonCheckoutSessionId:i.queryVars.amazonCheckoutSessionId}),void 0!==i.queryVars.setup_intent&&e.addParameters({setup_intent:i.queryVars.setup_intent,setup_intent_client_secret:i.queryVars.setup_intent_client_secret||"",redirect_status:i.queryVars.redirect_status||""}),e.setReturn(n),c.Utils.openIFrame(e.get(),t.elementId,"checkout"+(t.elementId||Math.round(1e5*Math.random()))).setAttribute("data-status","loading"),i=i.href,i=c.Utils.removeURLParameter(i,"pci"),i=c.Utils.removeURLParameter(i,"pcs"),i=c.Utils.removeURLParameter(i,"token"),i=c.Utils.removeURLParameter(i,"ba_token"),i=c.Utils.removeURLParameter(i,"redirect_status"),i=c.Utils.removeURLParameter(i,"setup_intent"),i=c.Utils.removeURLParameter(i,"setup_intent_client_secret"),i=c.Utils.removeURLParameter(i,"amazonCheckoutSessionId"),history.replaceState({},document.title,i)})))}(plenigo),function(r){function i(t){function n(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&(-1<i.indexOf("?")?i+="&":i+="?",i+=t+"="+e[t])}function e(){var e;i=r.baseCheckoutURI.replace("plenigo.com",r.environments[r.ConfigurationHelper.getPlenigoStage()])+(t.hasOwnProperty("language")?"/"+t.language:r.ConfigurationHelper.getLanguage()?"/"+r.ConfigurationHelper.getLanguage():"")+"/default/start-sso",n({companyId:function(){var e;if(void 0!==r.configuration.companyId)return r.configuration.companyId;e=document.getElementsByTagName("script");for(var t=0;1<e.length;t++)if(e[t].src&&-1<e[t].src.indexOf("plenigo_sdk.min.js"))return e[t].src.split("/").reverse()[1]}(),config:(e=JSON.stringify(t),decodeURIComponent(btoa(e).replace(/=+$/,""))),url:encodeURIComponent(location.href)}),t.session&&n({session:t.session})}var i,o={};this.addParameters=function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&(o[t]=e[t])},this.configure=function(e){t=e},this.get=function(){return e(),n(o),i}}r.Utils.stripDownUrl(location.href);r.SSO=function(e){var t,n=new i(e);try{(t=window.sessionStorage.getItem("checkoutFlowKey"))&&n.addParameters({oldSession:t})}catch(e){console.error(e)}"string"==typeof e.connect&&"USER"===e.connect&&n.addParameters({connect:e.connect}),"string"==typeof e.connectToken&&15<e.connectToken.length&&n.addParameters({connectToken:e.connectToken}),"string"==typeof e.transferToken&&10<e.transferToken.length&&n.addParameters({transferToken:e.transferToken}),this.login=function(){n.addParameters({sso:"login"}),r.Utils.openIFrame(n.get(),e.elementId,"checkout").setAttribute("data-status","loading")},this.register=function(){n.addParameters({sso:"register"}),r.Utils.openIFrame(n.get(),e.elementId,"checkout").setAttribute("data-status","loading")},this.forgotPassword=function(){n.addParameters({sso:"forgot-password"}),r.Utils.openIFrame(n.get(),e.elementId,"checkout").setAttribute("data-status","loading")}}}(plenigo),function(e){e.CONSTS=e.CONSTS||{},e.CONSTS.SNIPPETS={PERSONAL_DATA:"PERSONAL_DATA",PERSONAL_DATA_ADDRESS:"PERSONAL_DATA_ADDRESS",PERSONAL_DATA_SETTINGS:"PERSONAL_DATA_SETTINGS",ADDRESS_DATA:"ADDRESS_DATA",PERSONAL_DATA_PASSWORD:"PERSONAL_DATA_PASSWORD",ORDER:"ORDER",INVOICE:"INVOICE",DASHBOARD:"DASHBOARD",SUBSCRIPTION:"SUBSCRIPTION",PAYMENT_METHODS:"PAYMENT_METHODS",BILLING_ADDRESS_DATA:"BILLING_ADDRESS_DATA",DELIVERY_ADDRESS_DATA:"DELIVERY_ADDRESS_DATA",CREDIT_CARD:"CREDIT_CARD",BANK_ACCOUNT:"BANK_ACCOUNT",PERSONAL_DATA_PROTECTION:"PERSONAL_DATA_PROTECTION",TERMS_AND_CONDITIONS:"TERMS_AND_CONDITIONS",NEWSLETTER:"NEWSLETTER",OPT_IN:"OPT_IN",MULTI_USER_ACCOUNTS:"MULTI_USER_ACCOUNTS",DEFAULT:"DEFAULT"},e.CONSTS.SNIPPET_NAVIGATION={OFF:"OFF",HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL",DEFAULT:"HORIZONTAL"}}(plenigo),function(u){function o(t,n){function e(){var e;if(void 0!==u.configuration.companyId)return u.configuration.companyId;e=document.getElementsByTagName("script");for(var t=0;1<e.length;t++)if(e[t].src&&-1<e[t].src.indexOf("plenigo_sdk.min.js"))return e[t].src.split("/").reverse()[1]}function i(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&(-1<l.indexOf("?")?l+="&":l+="?",l+=t+"="+e[t])}function o(e){return decodeURIComponent(btoa(e).replace(/=+$/,""))}function r(){return{sessionToken:n||"",companyId:e(),config:o(JSON.stringify(t)),url:location.href}}function a(){l=u.baseSnippetsURI.replace("plenigo.com",u.environments[u.ConfigurationHelper.getPlenigoStage()])+"/default"+(!0===g?"/getConfig?sessionId="+t.session:!0===c?"/restart":""!==p?"/startSnippets":"/start"),i({config:o(JSON.stringify(t)),url:encodeURIComponent(location.href)}),t.session&&i({session:t.session}),d&&(i({transferToken:d}),i({companyId:e()}))}var l,s={},p="",g=!1,c=!1,d="";this.getConfig=r,this.setConfigUrl=function(){g=!0},this.setReturn=function(e){this.addParameters({status:e}),c=!0},this.addParameters=function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&(s[t]=e[t])},this.setPayPalReturn=function(e){0},this.set3dsReturn=function(e){this.addParameters({status:e})},this.addPurchaseId=function(e){n=e},this.configure=function(e){t=e},this.get=function(){return a(),i(s),l},this.setView=function(e){this.addParameters({view:e})},this.setSession=function(e){p=e,this.addParameters({session:e})},this.getSession=function(){return a(),i(s),l},this.setTransferToken=function(e){d=e,p=""}}var e,t,r=!1;u.Utils.stripDownUrl(location.href);u.Snippets=function(t,n){var e,i=new o(n,t);this.view=u.CONSTS.SNIPPETS.DEFAULT,this.navigation=u.CONSTS.SNIPPET_NAVIGATION.DEFAULT;try{(e=window.sessionStorage.getItem("selfServiceFlowKey"))&&i.addParameters({oldSession:e})}catch(e){console.error(e)}this.start=function(){var e=new XMLHttpRequest;if(!r)if("object"==typeof n)if(void 0!==n.elementId)if(void 0!==t)if(t.length<10)console.error("1st Parameter transfer token is mandatory");else{if(void 0!==n.navigation&&n.navigation&&void 0!==u.CONSTS.SNIPPET_NAVIGATION[n.navigation]&&i.addParameters({navigation:n.navigation}),i.setView(this.view),t.length<50&&(t.match(/\./g)||[]).length<2)return i.setTransferToken(t),void u.Utils.openIFrame(i.get(),n.elementId,"snippets").setAttribute("data-status","loading");e.open("POST",i.get(),!0),e.setRequestHeader("Content-Type","application/json; charset=UTF-8"),e.onreadystatechange=function(){var e;this.readyState===XMLHttpRequest.DONE&&200===this.status&&(e=JSON.parse(this.response).session,i.setSession(e),u.Utils.openIFrame(i.get(),n.elementId,"snippets"+(n.elementId||Math.round(1e5*Math.random()))).setAttribute("data-status","loading"))},e.send(JSON.stringify(i.getConfig()))}else console.error("1st Parameter transfer token is mandatory");else console.error("2nd Parameter for new Snippets should contain key elementId");else console.error("2nd Parameter for new Snippets call should be an object")},this.open=function(e){e&&u.CONSTS.SNIPPETS.hasOwnProperty(e)?this.view=e:console.warn("given "+e+" not known",u.CONSTS.Snippets),this.start()}},u.Utils.getURLParameter("psi")&&u.Utils.getURLParameter("pss")&&(r?console.warn("already started"):(r=!0,e=new o({language:"de",session:u.Utils.getURLParameter("psi")}),t=new XMLHttpRequest,e.setConfigUrl(),t.open("GET",e.get(),!0),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.onreadystatechange=function(){var e,t,n,i;this.readyState===XMLHttpRequest.DONE&&200===this.status&&(i=JSON.parse(this.response),e=i,t=u.Utils.getURLParameter("pss"),n=u.Utils.stripDownUrl(location.href),i=new o(e),void 0!==n.queryVars.ba_token&&i.addParameters({token:n.queryVars.token,ba_token:n.queryVars.ba_token}),void 0!==n.queryVars.setup_intent&&i.addParameters({setup_intent:n.queryVars.setup_intent,setup_intent_client_secret:n.queryVars.setup_intent_client_secret||"",redirect_status:n.queryVars.redirect_status||""}),i.setReturn(t),u.Utils.openIFrame(i.get(),e.elementId,"snippets"+(e.elementId||Math.round(1e5*Math.random()))),n=n.href,n=u.Utils.removeURLParameter(n,"psi"),n=u.Utils.removeURLParameter(n,"pss"),n=u.Utils.removeURLParameter(n,"token"),n=u.Utils.removeURLParameter(n,"ba_token"),n=u.Utils.removeURLParameter(n,"redirect_status"),n=u.Utils.removeURLParameter(n,"setup_intent"),n=u.Utils.removeURLParameter(n,"setup_intent_client_secret"),history.replaceState({},document.title,n))},t.send()))}(plenigo),plenigo.initialized=!1,plenigo.paymentReturn=!1,plenigo.afterInitializationCallback=null,plenigo.afterBrowserInitCallback=null,plenigo.afterInitializationSnippetCallbacks=[],plenigo.windowAlreadyOpened=!1,plenigo.payPalAgreementSuccess=null,plenigo.payPalAgreementToken=null,plenigo.updateSubscriptions=null,plenigo.orderId=null,plenigo.orderDetails=null,plenigo.checkoutTheme=null,plenigo.Snippet={PERSONAL_DATA:"personal",ORDER:"orders",SUBSCRIPTION:"subscriptions",PAYMENT_METHODS:"payments",ADDRESS_DATA:"addresses",BILLING_ADDRESS_DATA:"addresses/billing",DELIVERY_ADDRESS_DATA:"addresses/delivery",BANK_ACCOUNT:"payments/bankAccount",CREDIT_CARD:"payments/creditCard",PERSONAL_DATA_SETTINGS:"personal/settings",PERSONAL_DATA_ADDRESS:"personal/address",PERSONAL_DATA_PROTECTION:"personal/protection",PERSONAL_DATA_SOCIAL_MEDIA:"personal/socialMedia",PERSONAL_DATA_PASSWORD:"personal/password"},plenigo.ConfigurationHelper.extractConfiguration(),plenigo.start=function(){if(!0!==plenigo.initialized){var e,t,n,i,o,r,a,l;if(plenigo.configuration.companyId=plenigo.configuration.companyId||"EWRKTTZZFOFVZ6SAB9RC",plenigo.configuration.popupWidth=plenigo.configuration.popupWidth||800,plenigo.configuration.popupHeight=600,plenigo.configuration.dooPopupWidth=600,plenigo.configuration.dooPopupHeight=380,plenigo.configuration.position=plenigo.Utils.getViewport(plenigo.configuration.popupWidth,plenigo.configuration.popupHeight),plenigo.Login.isLoggedIn(),t=plenigo.Utils.getURLParameter("plcompanyid"),n=plenigo.Utils.getURLParameter("plflowid"),e=plenigo.Utils.getURLParameter("plppsuccess"),i=plenigo.Utils.getURLParameter("plIFrameElementId"),o=plenigo.Utils.getURLParameter("plMobile"),r=plenigo.Utils.getURLParameter("token"),a=plenigo.Utils.getURLParameter("plsuid"),l=plenigo.Utils.getURLParameter("plfesid"),plenigo.payPalAgreementSuccess=plenigo.Utils.getURLParameter("plppasuccess"),plenigo.updateSubscriptions=plenigo.Utils.getURLParameter("plupdatesubscriptions"),plenigo.ConfigurationHelper.has3QVideo()&&plenigo.Utils.requireScript(plenigo.baseStaticURI+"/static_resources/javascript/video3q.js?build=586"),plenigo.payPalAgreementToken=r,e){if(plenigo.windowAlreadyOpened)return;plenigo.windowAlreadyOpened=!0,plenigo.paymentReturn=!0,history.replaceState({},document.title,plenigo.Utils.cleanedHostUrl()),plenigo.Utils.getCookie("ppFinished")!==r?plenigo.Payment.continuePPCheckout(n,t,e,i,o,l):plenigo.windowAlreadyOpened=!1,plenigo.Utils.setCookie("ppFinished",r)}if(r=plenigo.Utils.getURLParameter("plpaymentsuccess")){if(plenigo.windowAlreadyOpened)return;plenigo.windowAlreadyOpened=!0,plenigo.paymentReturn=!0,history.replaceState({},document.title,plenigo.Utils.cleanedHostUrl()),plenigo.Utils.getCookie("suFinished")!==a?plenigo.Payment.continueCheckout(n,t,r,i,o,l):plenigo.windowAlreadyOpened=!1,a&&plenigo.Utils.setCookie("suFinished",a)}if(null!==plenigo.payPalAgreementSuccess&&history.replaceState({},document.title,plenigo.Utils.cleanedHostUrl()),plenigo.Utils.loadCSS("https://fonts.googleapis.com/css?family=Ubuntu:300,400,500"),plenigo.Utils.loadCSS(plenigo.baseStaticURI+"/static_resources/v2/css/plenigo_sdk.min.css?build=586"),plenigo.initialized=!0,0<plenigo.afterInitializationSnippetCallbacks.length)for(var s=0;s<plenigo.afterInitializationSnippetCallbacks.length;++s)plenigo.afterInitializationSnippetCallbacks[s]();plenigo.afterInitializationCallback&&plenigo.afterInitializationCallback();try{document.dispatchEvent(new window.CustomEvent("plenigo.Initialize",{detail:1}))}catch(e){console.warn("Error during generating custom events")}}},plenigo.checkout=function(e,t,n,i,o,r){var a=null;if("string"==typeof e&&1<=arguments.length)a={paymentData:e,startWithRegistration:t,sourceUrl:n,targetUrl:i,affiliateId:o,elementId:r};else{if("object"!=typeof e)throw new Error("to few arguments or wrong argument type");a=e}plenigo.initialized?plenigo.windowAlreadyOpened||(plenigo.windowAlreadyOpened=!0,plenigo.Payment.checkout(a)):plenigo.afterInitializationCallback=function(){plenigo.Payment.checkout(a)}},plenigo.setCheckoutTheme=function(e){if(e&&"doo"===e&&(plenigo.checkoutTheme="doo",plenigo.configuration.popupWidth=plenigo.configuration.dooPopupWidth||600,plenigo.configuration.popupHeight=plenigo.configuration.dooPopupHeight||380,!plenigo.initialized))try{document.addEventListener("plenigo.Initialize",function(){plenigo.setCheckoutTheme("doo")})}catch(e){console.log("Error during adding an event listener")}},plenigo.checkoutWithRemoteLogin=function(e,t,n,i,o,r){var a=null;if("string"==typeof e&&2<=arguments.length)a={paymentData:e,loginToken:t,sourceUrl:n,targetUrl:i,affiliateId:o,elementId:r};else{if("object"!=typeof e)throw new Error("to few arguments or wrong argument type");a=e}plenigo.initialized?plenigo.windowAlreadyOpened||(plenigo.windowAlreadyOpened=!0,plenigo.Payment.checkout(a)):plenigo.afterInitializationCallback=function(){plenigo.Payment.checkout(a)}},plenigo.login=function(e,t,n,i){var o=null;"string"==typeof e&&2<=arguments.length?o={ssoRedirectURL:e,scope:t,state:n,elementId:i}:"object"==typeof e&&(o=e),plenigo.initialized?plenigo.Login.openLoginScreen(o):plenigo.afterInitializationCallback=function(){plenigo.Login.openLoginScreen(o)}},plenigo.registration=function(e,t,n,i){var o=null;"string"==typeof e&&2<=arguments.length?o={ssoRedirectURL:e,scope:t,state:n,elementId:i}:"object"==typeof e&&(o=e),plenigo.initialized?plenigo.Login.openRegistrationScreen(o):plenigo.afterInitializationCallback=function(){plenigo.Login.openRegistrationScreen(o)}},plenigo.passwordForgotten=function(e){plenigo.initialized?plenigo.Login.openPasswordForgottenScreen(e):plenigo.afterInitializationCallback=function(){plenigo.Login.openPasswordForgottenScreen(e)}},plenigo.logout=function(){plenigo.initialized?plenigo.Utils.deleteCookie(plenigo.Utils.plenigoUserCookieName):plenigo.afterInitializationCallback=function(){plenigo.Utils.deleteCookie(plenigo.Utils.plenigoUserCookieName)}},plenigo.renderSnippet=function(e,t,n,i){var o=null;if("string"==typeof e&&3<=arguments.length)o={elementId:e,snippetId:t,loggedOutRedirectUrl:n,loginToken:i};else{if("object"!=typeof e)throw new Error("to few arguments or wrong argument type");o=e}if(!plenigo.Utils.isSnippetValid(o.snippetId))throw new Error("Cannot create plenigo snippet of type "+o.snippetId+" because there is no snippet of this type.");if(plenigo.initialized){var r,a,l=!!o.elementId&&document.getElementById(o.elementId),s=plenigo.Utils.capitalizeFirstLetter(o.snippetId);if(!l)throw new Error("Cannot create plenigo snippet of type "+o.snippetId+" because element id "+o.elementId+" is not found, but it is mandatory.");if(!plenigo.configuration.companyId)throw new Error("Company id is not initialized correctly. Please check the inclusion of the plenigo JavaScript.");o.loginToken||plenigo.Login.isUserCookieSet()?(r=plenigo.Utils.snippetFactory.desktopEmbedded(o.snippetId),l.appendChild(r),a=plenigo.baseURI+"/customerBackend/"+plenigo.configuration.companyId+"/"+o.snippetId,a=o.loginToken?plenigo.Utils.addUrlParameter(a,"loginToken",o.loginToken):(l=plenigo.Login.getUserCookie().cookieValue,plenigo.Utils.addUrlParameter(a,"cookieData",l)),a=plenigo.Utils.addUrlParameter(a,"ec","true"),null!==plenigo.payPalAgreementSuccess&&o.snippetId===plenigo.Snippet.PAYMENT_METHODS&&(a="true"===plenigo.payPalAgreementSuccess?(a=plenigo.Utils.addUrlParameter(a,"ppSuccess",!0),a=plenigo.Utils.addUrlParameter(a,"ppToken",plenigo.payPalAgreementToken),plenigo.Utils.addUrlParameter(a,"updateSubscriptions",plenigo.updateSubscriptions)):plenigo.Utils.addUrlParameter(a,"ppSuccess",!1)),a=plenigo.Utils.addUrlParameter(a,"sourceUrl",plenigo.Utils.getUrl()+"#plenigoFrame"+s),plenigo.ConfigurationHelper.getLanguage()&&(a=plenigo.Utils.addUrlParameter(a,"lang",plenigo.ConfigurationHelper.getLanguage())),!o.edit||o.snippetId!==plenigo.Snippet.PERSONAL_DATA&&o.snippetId!==plenigo.Snippet.PERSONAL_DATA_ADDRESS||(a+="#edit"),(s=new plenigo.iFrame(r,a,s)).setAutoHeight(!0),s.create()):o.loggedOutRedirectUrl&&void 0!==o.loggedOutRedirectUrl?window.location.href=o.loggedOutRedirectUrl:console.warn("Redirect url for not logged in users is missing for the plenigo snippets, but it is mandatory.")}else plenigo.afterInitializationSnippetCallbacks.push(function(){plenigo.renderSnippet(o)})},plenigo.initializeBrowser=function(e){e&&e()},plenigo.countMeteredView=function(e){var t;plenigo.initialized,plenigo.View.executeMeteredView(e.identifier),e.callback&&(t=plenigo.View.getMeteredCookieInfo(),plenigo.Utils.callExternalFunction(e.callback,t))},plenigo.getMeteredViewInfo=function(){return plenigo.View.getMeteredCookieInfo()},plenigo.handleEvent=function(e){var t,n,i,o=null;if(e.data)if("string"==typeof e.data)try{o=JSON.parse(e.data)}catch(e){}else o=e.data;if(e.origin===plenigo.baseURI&&o&&o.cookieData&&(n=new Date,(i=new Date).setTime(n.getTime()+plenigo.Login.plenigoMaxCookieLifetime),plenigo.Utils.setCookie(plenigo.Utils.plenigoUserCookieName,o.cookieData+"_"+n.getTime(),i.toUTCString()),plenigo.ConfigurationHelper.isClientPaywall()?plenigo.ConfigurationHelper.getPaywallType()===plenigo.ConfigurationHelper.PAYWALL_TYPE_HIDE?plenigo.Utils.reloadPage():plenigo.Login.isLoggedIn():plenigo.ConfigurationHelper.getPaymentCheckFunction()?plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getPaymentCheckFunction()):plenigo.configuration.callbacks.paymentCheck&&plenigo.configuration.callbacks.paymentCheck()),e.origin===plenigo.baseURI&&o&&o.afterLoginRedirectUrl&&(plenigo.Utils.removeIFrame(),window.location=o.afterLoginRedirectUrl),e.origin===plenigo.baseURI&&o&&o.oauth2RedirectUrl&&(plenigo.Utils.popupWindow?plenigo.Utils.popupWindow.close():plenigo.Utils.removeIFrame(),plenigo.ConfigurationHelper.getOAuth2AccessCodeFunction()?(i=plenigo.Utils.getParameterFromGivenURL(o.oauth2RedirectUrl.replace(/&amp;/g,"&"),"code"),plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getOAuth2AccessCodeFunction(),i)):window.location=o.oauth2RedirectUrl.replace(/&amp;/g,"&")),e.origin===plenigo.baseURI&&o&&o.paymentRedirectUrl&&(t=plenigo.Utils.removeUrlHash(o.paymentRedirectUrl),window.location!==window.top.location?window.top.location.href=t:window.location.href=t),e.origin===plenigo.baseURI&&o&&o.successRedirectUrl&&(plenigo.successRedirectUrl=o.successRedirectUrl.replace(/&amp;/g,"&"),plenigo.orderId=plenigo.Utils.getParameterFromGivenURL(plenigo.successRedirectUrl,"orderId"),plenigo.orderDetails=JSON.parse(plenigo.Utils.getParameterFromGivenURL(plenigo.successRedirectUrl,"orderDetails"))),e.origin===plenigo.baseURI&&o&&o.registerRedirectUrl&&(window.location=o.registerRedirectUrl.replace(/&amp;/g,"&")),e.origin===plenigo.baseURI&&o&&o.safariRecall){if(plenigo.Utils.browserInitRedirect=!0,plenigo.Utils.popupWindow)try{plenigo.Utils.popupWindow.close()}catch(e){}plenigo.ConfigurationHelper.isAutoBrowserPrepare()?plenigo.Utils.openIFrame(plenigo.Utils.savedUrl):plenigo.afterBrowserInitCallback&&plenigo.afterBrowserInitCallback()}e.origin===plenigo.baseURI&&o&&o.ieRecall&&(plenigo.Utils.ieInitDone=!0,plenigo.Utils.openIFrame(plenigo.Utils.savedUrl)),e.origin===plenigo.baseURI&&o&&o.closeWindow&&(plenigo.ConfigurationHelper.getProcessFinishedCallback()&&plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getProcessFinishedCallback(),plenigo.orderId,plenigo.orderDetails),plenigo.Utils.callExternalFunction(plenigo.ConfigurationHelper.getLoginStatusFunction(),plenigo.Login.isUserCookieSet()),plenigo.Utils.closeWindow()),e.origin===plenigo.baseURI&&o&&o.borderColor&&plenigo.Utils.setBorderColor(o.borderColor),e.origin===plenigo.baseURI&&o&&o.postFinanceData&&plenigo.Payment.openPostFinance(o.postFinanceData)},plenigo.browserNeedsInitialization=function(){return!1},plenigo.isUserLoggedIn=function(){return plenigo.Login.isUserCookieSet()},plenigo.resetLayerOpenedDetection=function(){plenigo.windowAlreadyOpened=!1},document.addEventListener?window.addEventListener("message",plenigo.handleEvent,!1):document.attachEvent("onmessage",plenigo.handleEvent),plenigo.ConfigurationHelper.isDisableAutoStart()||("complete"===document.readyState||"interactive"===document.readyState?plenigo.start():(document.onreadystatechange=function(){"complete"===document.readyState&&plenigo.start()},document.attachEvent&&document.attachEvent("onload",plenigo.start))),""===plenigo.Utils.getCookie(plenigo.Utils.plenigoCheckCookieName)&&plenigo.Utils.setCookie(plenigo.Utils.plenigoCheckCookieName,plenigo.JWT.encode({pv:0},plenigo.configuration.companyId));