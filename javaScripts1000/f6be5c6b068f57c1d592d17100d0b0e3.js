!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@appfabric/intuit-logging")):"function"==typeof define&&define.amd?define(["@appfabric/intuit-logging"],t):"object"==typeof exports?exports["web-shell"]=t(require("@appfabric/intuit-logging")):e["web-shell"]=t(e["@appfabric/intuit-logging"])}(self,(function(e){return(()=>{"use strict";var t,n,o,i,r,s,l={5004:t=>{t.exports=e}},a={};function u(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return l[e](n,n.exports,u),n.exports}n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,u.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var i=Object.create(null);u.r(i);var r={};t=t||[null,n({}),n([]),n(n)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,u.d(i,r),i},u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o=u.u,i=u.e,r=new Map,s=new Map,u.u=function(e){return o(e)+(r.has(e)?"?"+r.get(e):"")},u.e=function(e){return i(e).catch((function(t){var n=s.has(e)?s.get(e):2;if(n<1){var i=o(e);throw t.message="Loading chunk "+e+" failed after 2 retries.\n("+i+")",t.request=i,t}return new Promise((function(t){setTimeout((function(){var o="cache-bust="+Date.now();r.set(e,o),s.set(e,n-1),t(u.e(e))}),0)}))}))};var c={};return(()=>{u.r(c),u.d(c,{context:()=>ge,logger:()=>ce,rum:()=>pe});const e={createEventObject(e){const t={_detail:null};let n;if(null==e)return t;for(n in e)n in t||(t[n]=e[n]);return t},dispatchDomEvent(e,t,n){if(!e||"undefined"==typeof document)return;let o,i;if(void 0===(n=n||{}).bubbles&&(n.bubbles=!0),void 0===n.cancelable&&(n.cancelable=!0),e.dispatchEvent&&document.createEvent){o=e.ownerDocument||document,i=o.createEvent("HTMLEvents"),i.initEvent(t,!(!n||!n.bubbles),!(!n||!n.cancelable));for(const e in n)e in i||(i[e]=n[e]);e.dispatchEvent(i)}}};function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const n=/\s+/,o=(e,t,o,i)=>{let r,s,l,a;if(!o)return!0;if("object"==typeof o){for(s in o)e[t].apply(e,[s,o[s]].concat(i));return!1}if(n.test(o)){for(r=o.split(n),l=0,a=r.length;l<a;l++)e[t].apply(e,[r[l]].concat(i));return!1}return!0},i=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}var i,r;return i=n,(r=[{key:"on",value:function(e,t,n){return o(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"off",value:function(e,t,n){let i,r,s,l,a,u,c;if(!this._events||!o(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;const g=e?[e]:Object.keys(this._events);for(l=0,a=g.length;l<a;l++)if(e=g[l],s=this._events[e],s){if(this._events[e]=i=[],t||n)for(u=0,c=s.length;u<c;u++)r=s[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this}},{key:"emit",value:function(t,n){if(!this._events||this._suspend)return this;if(!o(this,"emit",t,n))return this;const i=this._events[t];return i&&((t,n)=>{let o,i=-1;const r=t.length;for(;++i<r;)(o=t[i]).callback.call(o.ctx,e.createEventObject(n))})(i,n),this}},{key:"suspendEvents",value:function(){this._suspend=!0}},{key:"resumeEvents",value:function(){this._suspend=!1}}])&&t(i.prototype,r),n}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _="__default_logger__",v={FATAL:1,ERROR:2,WARN:3,LOG:4,DEBUG:5},w={};w[v.FATAL]="fatal",w[v.ERROR]="error",w[v.WARN]="warn",w[v.LOG]="log",w[v.DEBUG]="debug";const y=["fatal-and-above","error-and-above","warn-and-above","log-and-above","debug-and-above"],m={};const L=function(e){a(n,e);var t=p(n);function n(e){var o;return r(this,n),o=t.call(this,e),e._name&&(o._name=e._name),o}return l(n,[{key:"setDefaultProps",value:function(e){this._props=e}},{key:"debug",value:function(e,t){this._log(v.DEBUG,e,t)}},{key:"log",value:function(e,t){this._log(v.LOG,e,t)}},{key:"info",value:function(e,t){this._log(v.LOG,e,t)}},{key:"warn",value:function(e,t){this._log(v.WARN,e,t)}},{key:"error",value:function(e,t){this._log(v.ERROR,e,t)}},{key:"fatal",value:function(e,t,n){this._log(v.FATAL,e,t,null,n)}},{key:"logException",value:function(e,t,n,o){this._log(v.ERROR,e,n,t,o)}},{key:"_log",value:function(e,t,n,o,i){!function(e,t,n,o,i,r){const s=y.slice(t-1,y.length).join(" ");let l=null;e._props&&(l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e._props)),o&&(l=Object.assign(l||{},o));const a={message:n,level:t,props:l,loggerName:e._name};i&&(a.exception=i),r&&(a.options=r),e.emit(s,a)}(this,e,t,n,o,i)}},{key:"isLevelDebug",value:function(){return this._isLevel(v.DEBUG)}},{key:"isLevelLog",value:function(){return this._isLevel(v.LOG)}},{key:"isLevelInfo",value:function(){return this._isLevel(v.LOG)}},{key:"isLevelWarn",value:function(){return this._isLevel(v.WARN)}},{key:"isLevelError",value:function(){return this._isLevel(v.ERROR)}},{key:"isLevelFatal",value:function(){return this._isLevel(v.FATAL)}},{key:"_isLevel",value:function(e){return function(e,t){if(!e._events)return!1;for(let n=y.length;n>=t;n--)if(e._events[y[n-1]])return!0;return!1}(this,e)}}]),n}(i),O=new(function(e){a(n,e);var t=p(n);function n(){var e;return r(this,n),(e=t.call(this)).levels=v,e.levelNames=w,e}return l(n,[{key:"getLogger",value:function(e){e||(e=_);let t=m[e];return t||(t=m[e]=new L({_name:e}),e!==_&&this.emit("logger-created",{name:e})),t}},{key:"getLoggerNames",value:function(){const e=Object.keys(m),t=e.indexOf(_);return t>-1&&e.splice(t,1),e}},{key:"_removeLogger",value:function(e){m[e]&&(m[e].off(),delete m[e])}}]),n}(i));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E={};function A(e){return"undefined"!=typeof window&&window.__shellInternal&&window.__shellInternal.pluginsInfo&&window.__shellInternal.pluginsInfo.plugins&&window.__shellInternal.pluginsInfo.plugins[e]||{}}function j(e){return"undefined"!=typeof window&&window.__shellInternal&&window.__shellInternal.appExperience&&window.__shellInternal.appExperience[e]||null}function k(){return"undefined"!=typeof window&&window.__shellInternal&&window.__shellInternal.applicationContext||null}function C(e){return"undefined"!=typeof window&&window.__shellInternal&&window.__shellInternal.shellExperiments&&window.__shellInternal.shellExperiments[e]||!1}function S(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return C(e)===t}const R={enableOILV1:"enable-oilv-1",enableMobileMode:"enable-mobile-mode",enableTracing:"enable-tracing-rum",disableFCILogging:"disable-fci-logging",disablePerformanceLogging:"disable-performance-logging",tracingLoad25:"enable-tracing-rum-load-25",tracingLoad50:"enable-tracing-rum-load-50",tracingLoad75:"enable-tracing-rum-load-75",tracingLoad100:"enable-tracing-rum-load-100",enableRUM:"enable-rum",rumLoad25:"enable-rum-load-25",rumLoad50:"enable-rum-load-50",rumLoad75:"enable-rum-load-75",rumLoad100:"enable-rum-load-100"};function D(){if("undefined"==typeof window)return!1;const e=new URLSearchParams(window.location.search),t={};return e.forEach(((e,n)=>{n.startsWith("_embeddedMobile")&&(t[n]=e)})),(!!window.MobileShell||t&&"true"===t._embeddedMobile)&&S(R.enableMobileMode)}function N(){return"undefined"!=typeof window&&window.MobileShell&&window.MobileShell.embeddedAppInfo||null}function M(){let e="WEB";return D()&&(e="WEB-VIEW-MOBILE"),{clientMode:e,embeddedAppInfo:N()}}const V={};function T(e){if("undefined"!=typeof window&&!Object.prototype.hasOwnProperty.call(V,e))try{const t=window[e];t.setItem("_".concat(e,"Check"),"check"),t.removeItem("_".concat(e,"Check")),V[e]=!0}catch(t){V[e]=!1}return V[e]}function F(){return T("localStorage")}function z(){return T("sessionStorage")}function Q(e){const t=F();return t&&"true"===localStorage.getItem(R["".concat(e,"Load100")])||S(R["".concat(e,"Load100")])?1:t&&"true"===localStorage.getItem(R["".concat(e,"Load75")])||S(R["".concat(e,"Load75")])?.75:t&&"true"===localStorage.getItem(R["".concat(e,"Load50")])||S(R["".concat(e,"Load50")])?.5:t&&"true"===localStorage.getItem(R["".concat(e,"Load25")])||S(R["".concat(e,"Load25")])?.25:0}const G={loadAMDModule:function(e){return"undefined"==typeof window?Promise.resolve():new Promise(((t,n)=>{try{window.require([e],t,n)}catch(e){n(e)}}))},getEnvironment:function(){return"undefined"!=typeof window&&window.__shellInternal&&window.__shellInternal.environment||"unknown"},getIusOfferingEnvironment:function(){var e,t;return"prod"===(null===(e=k())||void 0===e?void 0:e.environment)?"prd":null===(t=k())||void 0===t?void 0:t.environment},getCompleteEventContext:function(e){const t=x({pluginId:e&&e.pluginId||"",widgetId:e&&e.widgetId||"",sandboxType:e&&e.sandboxType||"",widgetVersion:e&&e.widgetVersion||""},function(){const e=j("appPlugin"),{clientMode:t}=M(),n={appExpId:j("id")||"",route:"undefined"!=typeof window&&window.location.pathname||null,url:"undefined"!=typeof window&&window.location.href||null,referrer:"undefined"!=typeof document&&document.referrer||null,userAgent:"undefined"!=typeof window&&window.navigator.userAgent||null,browserInfo:"undefined"!=typeof window&&window.__shellInternal&&window.__shellInternal.browserInfo?window.__shellInternal.browserInfo:null,shellVersion:A("web-shell").version,deviceMemory:"undefined"!=typeof window&&window.navigator.deviceMemory||null,cores:"undefined"!=typeof window&&window.navigator.hardwareConcurrency||null,appPlugin:j("appPlugin")||"",appPluginVersion:A(e).version||"",clientMode:t,isOffline:"undefined"!=typeof window&&!window.navigator.onLine,assetId:j("assetId")||"",target:void 0};return Object.keys(n).filter((e=>["boolean","number"].includes(typeof n[e])||Boolean(n[e]))).reduce(((e,t)=>x(x({},e),{},{[t]:n[t]})),{})}()),n=A(t.pluginId);return n?(t.pluginVersion=n.version||"",t.pluginLabel=n.label||""):(t.pluginVersion="",t.pluginLabel=""),e&&"boolean"==typeof e.isFirstLoad&&(t.isFirstLoad=e.isFirstLoad),t},getAppExperienceData:j,getAppContext:k,getAuthId:function(){const e="undefined"!=typeof window&&window.__shellInternal&&window.__shellInternal.applicationContext||void 0;return e&&e.userAuthInfo&&e.userAuthInfo.authId},getPluginExperimentAssignments:e=>{const t="undefined"!=typeof window&&window.__shellInternal&&window.__shellInternal.applicationContext&&window.__shellInternal.applicationContext.experimentAssignments||void 0;return t&&t[e]},getPlugin:A,getPluginAssetData:function(e){let t="",n="";if(e){const o=A(e);o&&o.assetId&&(t=o.assetId),o&&o.assetAlias&&(n=o.assetAlias)}return{pluginAssetId:t,pluginAssetAlias:n}},isExperimentApplicable:S,experiences:R,isLocalStorageSupported:F,isSessionStorageSupported:z,_supportedBrowserFeatures:V,getLoadPercent:Q,isTracingEnabled:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=N();if(!e&&t&&Array.isArray(t.enabledFeatures)&&t.enabledFeatures.includes("fci"))return!1;const n=F(),o=z(),i=n&&"true"===localStorage.getItem(R.enableTracing)||S(R.enableTracing);if(!i)return!1;const r=o&&sessionStorage.getItem("intuit-trace-enabled");if(r)return"true"===r;const s=Math.random()<Q("tracing");return s?o&&sessionStorage.setItem("intuit-trace-enabled","true"):o&&sessionStorage.setItem("intuit-trace-enabled","false"),s},isRUMEnabled:function(){const e=F(),t=z();if(!(e&&"true"===localStorage.getItem(R.enableRUM)||S(R.enableRUM)))return t&&sessionStorage.setItem("intuit-rum-enabled","false"),!1;const n=t&&sessionStorage.getItem("intuit-rum-enabled");if(n)return"true"===n;const o=Math.random()<Q("rum");return o?t&&sessionStorage.setItem("intuit-rum-enabled","true"):t&&sessionStorage.setItem("intuit-rum-enabled","false"),o},isFCILoggingDisabled:function(){return S(R.disableFCILogging)||F()&&"true"===localStorage.getItem(R.disableFCILogging)},isPerformanceLoggingDisabled:function(){return S(R.disablePerformanceLogging)||F()&&"true"===localStorage.getItem(R.disablePerformanceLogging)},getPluginOILAppId:function(e){const t=A(e);return t&&t.extendedProperties&&t.extendedProperties.loggingV2&&t.extendedProperties.loggingV2.oil&&t.extendedProperties.loggingV2.oil.appId?t.extendedProperties.loggingV2.oil.appId:null},shouldPostShellLogs:function(e,t){return!e||"web-shell"===e||t<4&&"web-shell"!==e},getShellExperiments:C,getPluginOILPerformanceAppId:function(e){const t=A(e);return t&&t.extendedProperties&&t.extendedProperties.performance&&t.extendedProperties.performance.oil&&t.extendedProperties.performance.oil.appId?t.extendedProperties.performance.oil.appId:null},isMobileShell:D,getPlatformInfo:M,setPropertyValue:function(e,t){E[e]=t},getPropertyValue:function(e){return E[e]},isQboApp:function(){return["qbo-web-app-experience"].includes(j("id"))},getEmbeddedAppInfo:N,createGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},W=Object.freeze({maxItems:64}),U=e=>{const t="undefined"!=typeof window?window.__shellInternal&&window.__shellInternal.OILConfigs:void 0;return{appId:"Intuit.shell.appfhostedshell",apiKey:t&&t.key||"",env:e}};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const{levels:J}=O,X={appId:"Intuit.utilities.default",apiKey:"preprdakyresX9M43dws9Wfg6IfJFQt13j265dlm",env:"e2e"},Y={appId:"Intuit.utilities.default",apiKey:"prdakyresXH4j4NJCZ9v9VNlWeHC2rOjtVdObGKT",env:"prod"},Z=()=>{const{logger:e=console}="undefined"!=typeof window&&window.__shellInternal||{};return e};let $=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SHELL_ENVIRONMENT=G.getEnvironment(),this.SHELL_CONFIG=U(this.SHELL_ENVIRONMENT),"function"==typeof t?this._loggingCustomizationClass=t||null:(this._shellLoggingCustomization=t||null,this._loggingCustomizationClass=n||null),this._oilV1Enabled=G.isExperimentApplicable(G.experiences.enableOILV1),this._appLoggerConfig=null,this._sendAppLogs=!0,this._intuitLogger=null}var t,n;return t=e,(n=[{key:"handleAction",value:function(e){let t,n,o,i=!1;({context:t}=e),e.payload?(n=e.payload,({context:{pluginId:o}}=e)):(i=!0,n=e,({sourcePluginId:o}=e));const{message:r,props:s,exception:l,level:a,options:u}=n,c=G.getCompleteEventContext(t);c.pluginId||(c.pluginId=o||"");const g={msgProps:s,appProps:this._getAppProps(),context:c,queued:e.queued||!1,flushLogsImmediately:u&&u.flushLogsImmediately||!1};if(!this._filterLogging(a,r,g,l))return Promise.resolve(!1);const p=g&&g.msgProps&&g.msgProps.isShellLog;if(!this._oilV1Enabled){const e=[];if(i&&(G.shouldPostShellLogs(o,a)||p)&&e.push(this.SHELL_CONFIG.appId),o&&"web-shell"!==o){const t=G.getPluginOILAppId(o);t&&e.push(t)}return this._getLoggerConfiguration(!this._oilV1Enabled).then((t=>(t&&t.appId&&this._sendAppLogs&&e.push(t.appId),g.destination=e,0===e.length?Promise.resolve():Promise.resolve(this._executeAction(a,r,g,l,u)))))}return Promise.resolve(this._executeAction(a,r,g,l,u))}},{key:"_executeAction",value:function(e,t,n,o,i){switch(e){case J.DEBUG:this._intuitLogger.debug(t,n);break;case J.INFO:this._intuitLogger.info(t,n);break;case J.LOG:this._intuitLogger.log(t,n);break;case J.WARN:this._intuitLogger.warn(t,n);break;case J.ERROR:o?this._intuitLogger.error(t,n,o,null,i):this._intuitLogger.error(t,n);break;case J.FATAL:o?this._intuitLogger.fatal(t,n,o,null,i):this._intuitLogger.fatal(t,n,null,null,i);break;default:this._intuitLogger.log(t,n)}}},{key:"_getAppProps",value:function(){const e=this._appLoggingCustomization;if(!e||"function"!=typeof e.getAppProps)return null;let t=null;try{t=e.getAppProps()}catch(e){this._intuitLogger?this._intuitLogger.error("Function call for getAppPros has an issue",{},e):console.error("Function call for getAppPros has an issue",e)}return t}},{key:"_filterLogging",value:function(e,t,n,o){if(!this._appLoggingCustomization){if(!this._loggingCustomizationClass)return!0;this._appLoggingCustomization=new this._loggingCustomizationClass({env:this.SHELL_ENVIRONMENT})}const i=this._appLoggingCustomization;let r=!0;const s=JSON.parse(JSON.stringify(n));if(s.msgProps&&!0===s.msgProps.isShellLog)return!0;if(!i||"function"!=typeof i.filterLogging)return!0;try{r=i.filterLogging(e,t,s,o)}catch(e){this._intuitLogger?this._intuitLogger.error("Function call for filterLogging has an issue",{},e):console.error("Function call for filterLogging has an issue",e)}return r}},{key:"initializeLogger",value:function(){const e=this;return Promise.resolve().then(u.t.bind(u,5004,23)).then((t=>(e._intuitLogger=new t.LoggingUtility,e._getLoggerConfiguration(!1).then((t=>Promise.resolve(e._setLoggerConfiguration(B(B({},t),{},{reliableTransmission:W,oilVersion:e._oilV1Enabled?"v1":"v2"}))))).catch((e=>{throw e})))))}},{key:"_setLoggerConfiguration",value:function(e){this._intuitLogger.setConfiguration(e)}},{key:"_handleUnavailableCustomizations",value:function(){if("prod"!==this.SHELL_ENVIRONMENT)return Z().error("No Logging configs specified.\n        In pre-production, sending logs to the OIL splunk dashboard.\n        Please NOTE: The events will be lost in production\n        Please add Logging configs in your app plugin."),this._appLoggerConfig=X,Promise.resolve(X);const e="No Logging configs specified in you app. Please add Logging configs in your Web App Config in DevPortal or App Plugin. The events will be lost in production";return this._oilV1Enabled?Promise.reject(new Error(e)):(Z().error(e),this._sendAppLogs=!1,Promise.resolve(Y))}},{key:"_getConfigFromAppExperience",value:function(){const e=G.getAppExperienceData("loggingV2");return e&&e.oil&&e.oil.appId&&e.oil.apiKey?{appId:e.oil.appId,apiKey:e.oil.apiKey,env:this.SHELL_ENVIRONMENT}:null}},{key:"_getLoggerConfigWithoutAppPluginOverride",value:function(){const e=this._getConfigFromAppExperience();return e?(this._appLoggerConfig=e,Promise.resolve(e)):this._handleUnavailableCustomizations()}},{key:"_getAppLoggerConfig",value:function(){const e=this;if(!this._loggingCustomizationClass)return this._getLoggerConfigWithoutAppPluginOverride();const t={env:this.SHELL_ENVIRONMENT};return this._appLoggingCustomization=new this._loggingCustomizationClass(t),"function"!=typeof this._appLoggingCustomization.getConfig?this._getLoggerConfigWithoutAppPluginOverride():Promise.resolve(this._appLoggingCustomization.getConfig()).then((t=>"APP_ID"===t.appId||"API_KEY"===t.apiKey?e._getLoggerConfigWithoutAppPluginOverride():Promise.resolve(t))).then((t=>{const n=B(B({},t),{},{env:t&&t.env||e.SHELL_ENVIRONMENT,oilVersion:e._oilV1Enabled?"v1":"v2"});return e._appLoggerConfig=n,t}))}},{key:"_getLoggerConfiguration",value:function(e){return this._shellLoggingCustomization&&!e?Promise.resolve(this._shellLoggingCustomization):this._appLoggerConfig?Promise.resolve(this._appLoggerConfig):this._getAppLoggerConfig()}}])&&K(t.prototype,n),e}();function ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}let te=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._executionQueue=[],this._module=void 0,this._shouldQueueExecutions=!0}var t,n;return t=e,(n=[{key:"setModule",value:function(e){this._module=e}},{key:"execute",value:function(e,t){this._shouldQueueExecutions?this._executionQueue.push({method:e,args:t}):this._doExecution(e,t)}},{key:"removeFromQueue",value:function(){this._executionQueue&&this._executionQueue.length&&this._executionQueue.pop()}},{key:"triggerExecutions",value:function(){if(void 0===this._module)throw new Error("no module loaded");this._executionQueue.forEach((e=>{const t=e.method,{args:n}=e;this._doExecution(t,n)})),this._flushQueue(),this._shouldQueueExecutions=!1}},{key:"_doExecution",value:function(e,t){try{Array.isArray(t)?this._module[e](...t):this._module[e]()}catch(e){console.error(e)}}},{key:"hasQueuedExecutions",value:function(){return 0!==this._executionQueue.length}},{key:"_flushQueue",value:function(){this._executionQueue=[]}},{key:"isExecutionsQueued",value:function(){return this._shouldQueueExecutions}}])&&ee(t.prototype,n),e}();function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{levels:re}=O,se=G.getEnvironment(),le=U(se),ae=G.experiences.enableOILV1,ue={_isOILV1Enabled:()=>G.isExperimentApplicable(ae),_initLoggerInstances(){let e=null,t=null;return t=this._appLoggerInstance||this._initIntuitLogger(this._appCustomization,null).then((e=>(this._appDeferredExec.setModule(e),this._appLoggerInstance=e,e))).catch((e=>(this.error("unable to initialize logger for app",{},e,"",null),this._appLoggerInstance=null,this._appLoggerInstance))),this._isOILV1Enabled()&&(le.oilVersion="v1",e=this._shellLoggerInstance||this._initIntuitLogger(le,this._appCustomization).then((e=>(this._shellLoggerInstance=e,e))).catch((e=>(this.error("unable to initialize logger for shell",{},e,"",null),this._shellLoggerInstance=null,this._shellLoggerInstance)))),Promise.all([t,e])},async _initIntuitLogger(e,t){const n=new $(e,t);return await n.initializeLogger(),n},_initDeferredExecutors(){this._appDeferredExec||(this._appDeferredExec=new te)},_postShellLogs(e,t){const{message:n,props:o,exception:i,sourcePluginId:r,context:s,destination:l}=t;this._shellLoggerInstance?this._shellLoggerInstance.handleAction(t):"undefined"!=typeof window&&window.__shellInternal.logger[e](n,o,i,r,s,l)},_queueAppLogs(e){this.handleAction(e)},_handleLogging(e,t){const{sourcePluginId:n,level:o}=t;this._queueAppLogs(t),this._isOILV1Enabled()&&G.shouldPostShellLogs(n,o)&&this._postShellLogs(e,t)},_generateEventPayload:(e,t,n,o,i,r)=>({message:e,level:t,props:oe(oe({},n),{},{isShellLog:!0}),exception:o,sourcePluginId:i,context:r,options:{flushLogsImmediately:t===re.ERROR||t===re.FATAL}}),handleAction(e){this._initDeferredExecutors();const t=oe(oe({},e),{},{queued:this._appDeferredExec.isExecutionsQueued()});this._appDeferredExec.execute("handleAction",[t])},sendEvents(e){return this._initDeferredExecutors(),this._initLoggerInstances().then((t=>{let[n]=t;Array.isArray(e)&&e.length>0&&e.forEach((e=>{this.handleAction(e)})),n&&this._appDeferredExec.triggerExecutions()}))},setAppCustomization(e){this._appCustomization=e||null},webShellLogHandler(e){const t=e.sourcePluginId||"",n=e.context||{};switch(e.level){case re.DEBUG:this.debug(e.message,e.props,e.exception,t,n);break;case re.INFO:this.info(e.message,e.props,e.exception,t,n);break;case re.LOG:this.log(e.message,e.props,e.exception,t,n);break;case re.WARN:this.warn(e.message,e.props,e.exception,t,n);break;case re.ERROR:this.error(e.message,e.props,e.exception,t,n);break;case re.FATAL:this.fatal(e.message,e.props,e.exception,t,n);break;default:this.log(e.message,e.props,e.exception,t,n)}},debug(e,t,n,o,i){const r=this._generateEventPayload(e,5,t,n,o,i);this._handleLogging("debug",r)},log(e,t,n,o,i){const r=this._generateEventPayload(e,4,t,n,o,i);this._handleLogging("log",r)},info(e,t,n,o,i){const r=this._generateEventPayload(e,4,t,n,o,i);this._handleLogging("info",r)},warn(e,t,n,o,i){const r=this._generateEventPayload(e,3,t,n,o,i);this._handleLogging("warn",r)},error(e,t,n,o,i){const r=this._generateEventPayload(e,2,t,n,o,i);this._handleLogging("error",r)},fatal(e,t,n,o,i){const r=this._generateEventPayload(e,1,t,n,o,i);this._handleLogging("fatal",r)}},ce={logError(e,t,n){ue.error(e,n)}},ge={getUIDataLayerContext:()=>(console.log("getUIDataLayerContext() called from web-shell"),{}),getHostName(){if("undefined"==typeof window)return"";const{port:e}=window.location,t=80===e||443===e?"":":".concat(e);return window.location.origin||window.location.host?"".concat(window.location.protocol,"//").concat(window.location.host):"".concat(window.location.protocol,"//").concat(window.location.hostname).concat(t)}},pe={getShellResourceTiming:e=>(console.log("resourceName received from ui-data-layer ",e),{})}})(),c})()}));
//# sourceMappingURL=shell-lib.js.map