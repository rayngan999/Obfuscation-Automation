function rtt(t={}){let e={Huffman:{}};e.Huffman.buildHuffmanTable=function(t){var e,a,r,i,n,o,s,f,l,u,h,c=t.length,p=0,w=Number.POSITIVE_INFINITY;for(f=0,l=c;f<l;++f)t[f]>p&&(p=t[f]),t[f]<w&&(w=t[f]);for(e=1<<p,a=new Uint32Array(e),r=1,i=0,n=2;r<=p;){for(f=0;f<c;++f)if(t[f]===r){for(o=0,s=i,u=0;u<r;++u)o=o<<1|1&s,s>>=1;for(h=r<<16|f,u=o;u<e;u+=n)a[u]=h;++i}++r,i<<=1,n<<=1}return[a,p,w]};var a,r=e.Huffman.buildHuffmanTable;function i(){let t=Date.now(),a=window.location.href.match(/&?notice=([^&#]+)/);if(null===a||2!==a.length)return parseInt(localStorage.getItem("rtt_to"))>t;let r=a[1];window.history.replaceState({},window.title,window.location.href.replace(a[0],"").replace(/\?&/,"?").replace(/\?$/,""));let i=function(t){t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/%3D/g,"=");let a=atob(t),r=a.split("").map(function(t){return t.charCodeAt(0)}),i=new Uint8Array(r),n=new e.RawInflate(i).decompress();a=String.fromCharCode.apply(null,new Uint8Array(n));let o=JSON.parse(a);return o["min-time"]=parseInt(o["min-time"]),o["max-time"]=parseInt(o["max-time"]),o}(r);return null!==i&&"object"==typeof i&&(localStorage.setItem("rtt_from",t+1e3*i["min-time"]),localStorage.setItem("rtt_to",t+1e3*i["max-time"]),localStorage.setItem("rtt_actions",i.actions.replace(/, /g,",")),localStorage.setItem("rtt_nurl",i.nurl),localStorage.setItem("rtt_queue","default,"+t),localStorage.removeItem("rtt_wasClick"),localStorage.removeItem("rtt_wasAction"),!0)}e.RawInflate=function(t,a){switch(this.buffer,this.blocks=[],this.bufferSize=1024,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=new Uint8Array(t),this.output,this.op,this.bfinal=!1,this.bufferType=e.RawInflate.BufferType.ADAPTIVE,this.resize=!1,!a&&(a={})||(a.index&&(this.ip=a.index),a.bufferSize&&(this.bufferSize=a.bufferSize),a.bufferType&&(this.bufferType=a.bufferType),a.resize&&(this.resize=a.resize)),this.bufferType){case e.RawInflate.BufferType.BLOCK:this.op=e.RawInflate.MaxBackwardLength,this.output=new Uint8Array(e.RawInflate.MaxBackwardLength+this.bufferSize+e.RawInflate.MaxCopyLength);break;case e.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new Uint8Array(this.bufferSize);break;default:throw new Error("invalid inflate mode")}},e.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},e.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case e.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case e.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}},e.RawInflate.MaxBackwardLength=32768,e.RawInflate.MaxCopyLength=258,e.RawInflate.Order=(a=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],new Uint16Array(a)),e.RawInflate.LengthCodeTable=function(t){return new Uint16Array(t)}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),e.RawInflate.LengthExtraTable=function(t){return new Uint8Array(t)}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),e.RawInflate.DistCodeTable=function(t){return new Uint16Array(t)}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),e.RawInflate.DistExtraTable=function(t){return new Uint8Array(t)}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),e.RawInflate.FixedLiteralLengthTable=function(){var t,e,a=new Uint8Array(288);for(t=0,e=a.length;t<e;++t)a[t]=t<=143?8:t<=255?9:t<=279?7:8;return r(a)}(),e.RawInflate.FixedDistanceTable=function(){var t,e,a=new Uint8Array(30);for(t=0,e=a.length;t<e;++t)a[t]=5;return r(a)}(),e.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},e.RawInflate.prototype.readBits=function(t){var e,a=this.bitsbuf,r=this.bitsbuflen,i=this.input,n=this.ip;if(n+(t-r+7>>3)>=i.length)throw new Error("input buffer is broken");for(;r<t;)a|=i[n++]<<r,r+=8;return e=a&(1<<t)-1,a>>>=t,r-=t,this.bitsbuf=a,this.bitsbuflen=r,this.ip=n,e},e.RawInflate.prototype.readCodeByTable=function(t){for(var e,a,r=this.bitsbuf,i=this.bitsbuflen,n=this.input,o=this.ip,s=n.length,f=t[0],l=t[1];i<l&&!(o>=s);)r|=n[o++]<<i,i+=8;if((a=(e=f[r&(1<<l)-1])>>>16)>i)throw new Error("invalid code length: "+a);return this.bitsbuf=r>>a,this.bitsbuflen=i-a,this.ip=o,65535&e},e.RawInflate.prototype.parseUncompressedBlock=function(){var t,a,r=this.input,i=this.ip,n=this.output,o=this.op,s=r.length,f=n.length;if(this.bitsbuf=0,this.bitsbuflen=0,i+1>=s)throw new Error("invalid uncompressed block header: LEN");if(t=r[i++]|r[i++]<<8,i+1>=s)throw new Error("invalid uncompressed block header: NLEN");if(t===~(r[i++]|r[i++]<<8))throw new Error("invalid uncompressed block header: length verify");if(i+t>r.length)throw new Error("input buffer is broken");switch(this.bufferType){case e.RawInflate.BufferType.BLOCK:for(;o+t>n.length;)t-=a=f-o,n.set(r.subarray(i,i+a),o),o+=a,i+=a,this.op=o,n=this.expandBufferBlock(),o=this.op;break;case e.RawInflate.BufferType.ADAPTIVE:for(;o+t>n.length;)n=this.expandBufferAdaptive({fixRatio:2});break;default:throw new Error("invalid inflate mode")}n.set(r.subarray(i,i+t),o),o+=t,i+=t,this.ip=i,this.op=o,this.output=n},e.RawInflate.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case e.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(e.RawInflate.FixedLiteralLengthTable,e.RawInflate.FixedDistanceTable);break;case e.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(e.RawInflate.FixedLiteralLengthTable,e.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}},e.RawInflate.prototype.parseDynamicHuffmanBlock=function(){var t,a,i,n,o,s,f,l,u,h=this.readBits(5)+257,c=this.readBits(5)+1,p=this.readBits(4)+4,w=new Uint8Array(e.RawInflate.Order.length);for(l=0;l<p;++l)w[e.RawInflate.Order[l]]=this.readBits(3);for(t=r(w),n=new Uint8Array(h+c),l=0,u=h+c;l<u;)switch(o=this.readCodeByTable(t)){case 16:for(f=3+this.readBits(2);f--;)n[l++]=s;break;case 17:for(f=3+this.readBits(3);f--;)n[l++]=0;s=0;break;case 18:for(f=11+this.readBits(7);f--;)n[l++]=0;s=0;break;default:n[l++]=o,s=o}switch(a=r(n.subarray(0,h)),i=r(n.subarray(h)),this.bufferType){case e.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(a,i);break;case e.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(a,i);break;default:throw new Error("invalid inflate mode")}},e.RawInflate.prototype.decodeHuffmanBlock=function(t,a){var r=this.output,i=this.op;this.currentLitlenTable=t;for(var n,o,s,f,l=r.length-e.RawInflate.MaxCopyLength,u=e.RawInflate.LengthCodeTable,h=e.RawInflate.LengthExtraTable,c=e.RawInflate.DistCodeTable,p=e.RawInflate.DistExtraTable;256!==(n=this.readCodeByTable(t));)if(n<256)i>=l&&(this.op=i,r=this.expandBufferBlock(),i=this.op),r[i++]=n;else for(f=u[o=n-257],h[o]>0&&(f+=this.readBits(h[o])),s=c[n=this.readCodeByTable(a)],p[n]>0&&(s+=this.readBits(p[n])),i>=l&&(this.op=i,r=this.expandBufferBlock(),i=this.op);f--;)r[i]=r[i++-s];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=i},e.RawInflate.prototype.decodeHuffmanAdaptive=function(t,a){var r=this.output,i=this.op;this.currentLitlenTable=t;for(var n,o,s,f,l=r.length,u=e.RawInflate.LengthCodeTable,h=e.RawInflate.LengthExtraTable,c=e.RawInflate.DistCodeTable,p=e.RawInflate.DistExtraTable;256!==(n=this.readCodeByTable(t));)if(n<256)i>=l&&(l=(r=this.expandBufferAdaptive()).length),r[i++]=n;else for(f=u[o=n-257],h[o]>0&&(f+=this.readBits(h[o])),s=c[n=this.readCodeByTable(a)],p[n]>0&&(s+=this.readBits(p[n])),i+f>l&&(l=(r=this.expandBufferAdaptive()).length);f--;)r[i]=r[i++-s];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=i},e.RawInflate.prototype.expandBufferBlock=function(t){var a=new Uint8Array(this.op-e.RawInflate.MaxBackwardLength),r=this.op-e.RawInflate.MaxBackwardLength,i=this.output;return a.set(i.subarray(e.RawInflate.MaxBackwardLength,a.length)),this.blocks.push(a),this.totalpos+=a.length,i.set(i.subarray(r,r+e.RawInflate.MaxBackwardLength)),this.op=e.RawInflate.MaxBackwardLength,i},e.RawInflate.prototype.expandBufferAdaptive=function(t){var e,a,r,i=this.input.length/this.ip+1|0,n=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(i=t.fixRatio),"number"==typeof t.addRatio&&(i+=t.addRatio)),a=i<2?(r=(n.length-this.ip)/this.currentLitlenTable[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*i,(e=new Uint8Array(a)).set(o),this.output=e,this.output},e.RawInflate.prototype.concatBufferBlock=function(){var t,a,r,i,n,o=0,s=this.totalpos+(this.op-e.RawInflate.MaxBackwardLength),f=this.output,l=this.blocks,u=new Uint8Array(s);if(0===l.length)return this.output.subarray(e.RawInflate.MaxBackwardLength,this.op);for(a=0,r=l.length;a<r;++a)for(i=0,n=(t=l[a]).length;i<n;++i)u[o++]=t[i];for(a=e.RawInflate.MaxBackwardLength,r=this.op;a<r;++a)u[o++]=f[a];return this.blocks=[],this.buffer=u,this.buffer},e.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return this.resize?(t=new Uint8Array(e)).set(this.output.subarray(0,e)):t=this.output.subarray(0,e),this.buffer=t,this.buffer};var n=!1;async function o(){if(!n)for(n=!0;;){let t=localStorage.getItem("rtt_queue");if(0===t.length)return void(n=!1);let e=(t=t.split(",")).shift(),a=t.shift(),r=localStorage.getItem("rtt_nurl");r=r.replace(/^https?/,"https"),"default"!==e&&(r=r.replace(/action=[^&#]+/,"action="+e)),r+="&nonce="+a,200===(await fetch(r)).status&&localStorage.setItem("rtt_queue",t.join(","))}}function s(t){let e=localStorage.getItem("rtt_queue");0===e.length?localStorage.setItem("rtt_queue",t+","+Date.now()):localStorage.setItem("rtt_queue",e+","+t+","+Date.now())}function f(){let t=parseInt(localStorage.getItem("rtt_from")),e=parseInt(localStorage.getItem("rtt_to")),a=Date.now();if(a<t||a>e)return;let r=new RegExp(`(^| )${u}($| )`).test(this.className),i=localStorage.getItem("rtt_actions");r&&/(^|,)uclick($|,)/.test(i)&&"1"!==localStorage.getItem("rtt_wasClick")&&(localStorage.setItem("rtt_wasClick","1"),s("uclick")),/(^|,)uaction($|,)/.test(i)&&"1"!==localStorage.getItem("rtt_wasAction")&&(localStorage.setItem("rtt_wasAction","1"),s("uaction")),r&&/(^|,)click($|,)/.test(i)&&s("click"),!r&&/(^|,)action($|,)/.test(i)&&s("action"),o()}function l(){const t={once:!0,passive:!0};let e=document.querySelectorAll("a:not([data-rtt-init])");for(let a=0;a<e.length;a++)e[a].addEventListener("click",f,t),e[a].addEventListener("auxclick",f,t),e[a].setAttribute("data-rtt-init","")}var u=t.clickClass||"cl";document.addEventListener("DOMContentLoaded",function(){i()&&(l(),o(),function(){const t=document.querySelector("body");new MutationObserver(function(t,e){for(let e of t)"childList"===e.type&&l()}).observe(t,{childList:!0,subtree:!0})}())})}
