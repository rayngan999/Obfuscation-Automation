(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define([],r);else{var n=r();for(var i in n)(typeof exports==="object"?exports:t)[i]=n[i]}})(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:false};e[n].call(i.exports,i,i.exports,r);i.loaded=true;return i.exports}r.m=e;r.c=t;r.p="";return r(0)}(function(e){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t)){switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var r=t.slice(1),n=e[t[0]];return function(e,t,i){n.apply(this,[e,t,i].concat(r))}}(e[t]);break;default:e[t]=e[e[t]];break}}}return e}([function(e,t,r){"use strict";var n=r(1);var i=R(n);var o=r(5);var a=R(o);var u=r(6);var s=R(u);var f=r(60);var l=R(f);var c=r(59);var h=R(c);var y=r(68);var d=R(y);var v=r(8);var p=R(v);var m=r(9);var _=R(m);var b=r(2);var g=R(b);var w=r(69);var k=R(w);var S=r(66);var I=R(S);var x=r(3);var P=R(x);var T=r(7);var E=R(T);var O=r(11);var j=R(O);function R(e){return e&&e.__esModule?e:{default:e}}e.exports={BaseHTTPTransformer:i.default,DefaultPurgeStrategy:a.default,DefaultRetryStrategy:s.default,DefaultDispatcher:l.default,DefaultCollector:h.default,RTConfiguration:d.default,ItemQueue:p.default,Item:_.default,ItemQueueCallback:k.default,HTTPTransformResult:g.default,DispatchTimerTask:I.default,JSONPostBodyEncoder:P.default,NetworkRequest:E.default,PersistentLocalStorage:j.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(2);var o=f(i);var a=r(3);var u=f(a);var s=r(4);function f(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(){l(this,e);this._queryParams={};this._contentType="application/json";this._headers={"Content-Type":this._contentType};this._JSONPostBodyEncoder=new u.default}n(e,[{key:"setHeaders",value:function e(t){this._headers=t}},{key:"getHeaders",value:function e(){return this._headers}},{key:"setQueryParams",value:function e(t){this._queryParams=t}},{key:"getQueryParams",value:function e(){return this._queryParams}},{key:"setContentType",value:function e(t){if(t===null){throw new Error("Cannot set MIME type to null")}else{this._contentType=t}}},{key:"getContentType",value:function e(){return this._contentType}},{key:"formatPostBody",value:function e(t){return this._JSONPostBodyEncoder.formatPostBody(t)}},{key:"transform",value:function e(t,r,n){if(n===null){throw new Error("List of items cannot be null")}var i=void 0;this._headers=(0,s.assignCI)(this._headers,t);this._queryParams=(0,s.assignCI)(this._queryParams,r);i=this.formatPostBody(n);var a=new o.default(this._headers,this._queryParams,i);return a}}]);return e}();t.default=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(t,r,i){n(this,e);this._headers=t;this._queryParams=r;this._body=i}r(e,[{key:"getHeaders",value:function e(){return this._headers}},{key:"setHeaders",value:function e(t){this._headers=t}},{key:"getQueryParams",value:function e(){return this._queryParams}},{key:"setQueryParams",value:function e(t){this._queryParams=t}},{key:"getBody",value:function e(){return this._body}},{key:"setBody",value:function e(t){this._body=t}}]);return e}();t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(){n(this,e)}r(e,[{key:"formatPostBody",value:function e(t){return JSON.stringify(t)}}]);return e}();t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function r(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}if(!r||r.length<1){return e}var i={};for(var o in e){i[o.toLowerCase()]=o}for(var a=0;a<r.length;a++){for(var u in r[a]){var s=u;var f=u.toLowerCase();if(i.hasOwnProperty(f)){s=i[f]}else{i[f]=u}e[s]=r[a][u]}}return e}function n(e){return Object.keys(e).map(function(t){var r=e[t]===null?"":e[t];return encodeURIComponent(t)+"="+encodeURIComponent(r)}).join("&")}t.assignCI=r;t.paramsToQueryString=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=t.DefaultPurgeStrategy=function(){function e(t){n(this,e);this._maxStorageInBytes=t.getMaxBytesQuota()}r(e,[{key:"setMaxStorageInBytes",value:function e(t){if(t<0||t===null||typeof t!=="number"){throw new Error("Use valid integer for byte maximum of storage")}else{this._maxStorageInBytes=t}}},{key:"getMaxStorageInBytes",value:function e(){return this._maxStorageInBytes}},{key:"onRetryCountExceeded",value:function e(t,r){t._getItemStore().deleteNetworkRequest(r)}},{key:"onStorageLimitExceeded",value:function e(t){t._getItemStore().deleteOldestItem()}}]);return e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DefaultRetryStrategy=undefined;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(7);var o=s(i);var a=r(8);var u=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=t.DefaultRetryStrategy=function(){function e(t){f(this,e);this._maxRetryCount=t.getMaxRetries();this._requestTimeout=t.getRequestTimeout()}n(e,[{key:"setMaxRetryCount",value:function e(t){if(t<0||t===null||typeof t!=="number"){throw new Error("Use valid integer for max retry count")}else{this._maxRetryCount=t}}},{key:"getMaxRetryCount",value:function e(){return this._maxRetryCount}},{key:"setRequestTimeout",value:function e(t){if(t<0||t===null||typeof t!=="number"){throw new Error("Use valid integer for max timeout")}else{this._requestTimeout=t}}},{key:"getRequestTimeout",value:function e(){return this._requestTimeout}},{key:"maxRetryCountExceeded",value:function e(t){if(t){return t.getRetryCount()>=this.getMaxRetryCount()}return false}},{key:"onSendFailed",value:function e(t,r,n){r.setDispatchInProgress(false);t._getItemStore().updateNetworkRequest(r)}}]);return e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=r(4);function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(t,r,n,i,o){a(this,e);this.url=t;this.method=r;this.data=n;this.headers=i;this.params=o;this._retryCount=0;this._dispatchInProgress=false;this._id;this._createdAt=Date.now()}i(e,[{key:"setId",value:function e(t){if(typeof t!=="string"||t===""||t===null){throw new Error("Must use valid ID format")}else{this._id=t}}},{key:"getId",value:function e(){return this._id}},{key:"setUrl",value:function e(t){if(t===null||t===""||typeof t!=="string"){throw new Error("Must have a valid url")}else{this.url=t}}},{key:"getUrl",value:function e(t){if(!t){return this.url}var r=(0,o.paramsToQueryString)(this.params);return r&&r.length>0?this.url+"?"+r:this.url}},{key:"setMethod",value:function e(t){if(t===null||t===""||typeof t!=="string"){throw new Error("Must have a valid method")}else{this.method=t.toLowerCase()}}},{key:"getMethod",value:function e(){return this.method}},{key:"setPayload",value:function e(t){if(t===null){throw new Error("Must have a valid payload")}else{this.data=t}}},{key:"getPayload",value:function e(){return this.data}},{key:"setHeaders",value:function e(t){if(t===null||(typeof t==="undefined"?"undefined":n(t))!=="object"||Array.isArray(t)===true){throw new Error("Must include valid headers")}else{this.headers=t}}},{key:"getHeaders",value:function e(){return this.headers}},{key:"setQueryParams",value:function e(t){if(t===null){throw new Error("Must set valid query parameters")}else{this.params=t}}},{key:"getQueryParams",value:function e(){return this.params}},{key:"setRetryCount",value:function e(t){if(t===null||t<0){throw new Error("Cannot set an invalid retry count")}else{this._retryCount=t}}},{key:"getRetryCount",value:function e(){return this._retryCount}},{key:"setDispatchInProgress",value:function e(t){this._dispatchInProgress=t}},{key:"getDispatchInProgress",value:function e(){return this._dispatchInProgress}}]);return e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=r(9);var a=S(o);var u=r(10);var s=S(u);var f=r(59);var l=S(f);var c=r(60);var h=S(c);var y=r(5);var d=r(66);var v=S(d);var p=r(7);var m=S(p);var _=r(6);var b=r(1);var g=S(b);var w=r(67);var k=S(w);function S(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function x(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function P(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var T=function(e){P(t,e);function t(e,r){I(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));try{n._configuration=e;n._timeBetweenDispatch=n._configuration.getInterval();n._itemStore=new s.default({storeName:n._configuration.getItemStoreIdentifier(),itemQueueSize:n._configuration.getMaxItemQueueSize(),itemQueueInterval:n._timeBetweenDispatch});n._collector=r&&r.collector?r.collector:new l.default;n._transformer=r&&r.transformer?r.transformer:new g.default;n._purgeStrategy=r&&r.purgeStrategy?r.purgeStrategy:new y.DefaultPurgeStrategy(n._configuration);n._retryStrategy=r&&r.retryStrategy?r.retryStrategy:new _.DefaultRetryStrategy(n._configuration);n._dispatcher=r&&r.dispatcher?r.dispatcher:new h.default(n._retryStrategy);n._url=n._configuration.getUrl();n._method=n._configuration.getMethod();n._headers=n._configuration.getHeaders();n._queryParams=n._configuration.getQueryParams();n._timerTask=null;n._isTimerStarted=false;n._timerTaskId=null;n._dispatcher.setCallback(n);n._purgeStrategy.setMaxStorageInBytes(n._configuration.getMaxBytesQuota());n.start()}catch(e){console.error("Error initializing ItemQueue",e)}return n}i(t,[{key:"insert",value:function e(t){if(t===null){throw new Error("Item cannot be null")}if(this._configuration.getMaxItemQueueSize()===0){return}this._itemStore.insert(t);if(this.getCurrentStorageSize()>=this._purgeStrategy.getMaxStorageInBytes()){this._purgeStrategy.onStorageLimitExceeded(this)}this.drain(false)}},{key:"insertObject",value:function e(t){if(t===null){throw new Error("Cannot insert null")}var r=new a.default(t);this.insert(r)}},{key:"start",value:function e(){var t=this;if(this._isTimerStarted===false){this._isTimerStarted=true;this._timerTask=new v.default(this);this._timerTaskId=setInterval(function(){t._timerTask.sendItemsInQueue()},this._timeBetweenDispatch)}else{console.log("Timer task has already been started")}}},{key:"stop",value:function e(){if(this._isTimerStarted===true){this._isTimerStarted=false;clearInterval(this._timerTaskId)}else{console.log("Timer task has already been stopped")}}},{key:"getCurrentStorageSize",value:function e(){return this._itemStore.getCurrentStorageSize()}},{key:"buildNetworkRequest",value:function e(t,r,n,i,o,a){var u=new m.default;try{var s=t.transform(o,i,a);u.setUrl(n);u.setMethod(r);u.setPayload(s.getBody());u.setQueryParams(s.getQueryParams());u.setHeaders(s.getHeaders())}catch(e){console.error("Error building network request",e)}return u}},{key:"drain",value:function e(t){this.retryRequest();var r=typeof t==="boolean"?t:true;var n=this._collector.collect(this._itemStore,this._configuration,r);if(n.length===0){return}var i=[];n.forEach(function(e){i.push({object:e.getDataBlob(),timestamp:e.getTimestamp()})});var o=this.buildNetworkRequest(this._transformer,this._method,this._url,this._queryParams,this._headers,i);o.setDispatchInProgress(true);this._itemStore.deleteItems(n);this._itemStore.insertNetworkRequest(o);this._dispatcher.dispatch(o)}},{key:"retryRequest",value:function e(){var t=this;var r=5;var n=this._itemStore.getNetworkRequestNotInProgress(r);n.forEach(function(e){var r=new m.default(e.url,e.method,e.data,e.headers,e.params);r.setRetryCount(e._retryCount);r.setId(e._id);if(t._retryStrategy&&t._retryStrategy.maxRetryCountExceeded(r)){t._purgeStrategy.onRetryCountExceeded(t,r);if(t._itemQueueCallback&&typeof t._itemQueueCallback.onError==="function"){t._itemQueueCallback.onError(t,r,new Error("Retry count exceeded"))}}else{var n=r.getRetryCount()+1;r.setRetryCount(n);t._dispatcher.dispatch(r)}})}},{key:"_purgeAll",value:function e(){this._itemStore.purgeAll()}},{key:"setMethod",value:function e(t){if(t===null||typeof t!=="string"){throw new Error("Please give a valid HTTP method")}else{this._method=t}}},{key:"getMethod",value:function e(){return this._method}},{key:"setUrl",value:function e(t){if(t===null||typeof t!=="string"){throw new Error("Please give a valid url")}else{this._url=t}}},{key:"getUrl",value:function e(){return this._url}},{key:"setHeaders",value:function e(t){if(t===null||(typeof t==="undefined"?"undefined":n(t))!=="object"||Array.isArray(t)===true){throw new Error("Please give valid HTTP headers")}else{this._headers=t}}},{key:"getHeaders",value:function e(){return this._headers}},{key:"setQueryParams",value:function e(t){if(t===null||(typeof t==="undefined"?"undefined":n(t))!=="object"||Array.isArray(t)===true){throw new Error("Please use valid query parameters")}else{this._queryParams=t}}},{key:"getQueryParams",value:function e(){return this._queryParams}},{key:"setTransformer",value:function e(t){this._transformer=t}},{key:"getTransformer",value:function e(){return this._transformer}},{key:"_getDispatcher",value:function e(){return this._dispatcher}},{key:"_getItemStore",value:function e(){return this._itemStore}},{key:"getItemQueueCallback",value:function e(){return this._itemQueueCallback}},{key:"setItemQueueCallback",value:function e(t){this._itemQueueCallback=t}},{key:"dispatchInitiated",value:function e(t,r){if(this._itemQueueCallback&&typeof this._itemQueueCallback.onPrepareNetworkRequest==="function"){this._itemQueueCallback.onPrepareNetworkRequest(this,r)}this.updateNetworkRequestDispatchStatus(r,true)}},{key:"dispatchSuccess",value:function e(t,r,n){this._itemStore.deleteNetworkRequest(r);if(this._itemQueueCallback&&typeof this._itemQueueCallback.onSuccess==="function"){this._itemQueueCallback.onSuccess(this,r)}}},{key:"dispatchFailed",value:function e(t,r,n){this.updateNetworkRequestDispatchStatus(r,false);try{this._retryStrategy.onSendFailed(this,r,n)}catch(e){if(this._itemQueueCallback&&typeof this._itemQueueCallback.onError==="function"){this._itemQueueCallback.onError(this,r,e)}}if(this._itemQueueCallback&&typeof this._itemQueueCallback.onError==="function"){this._itemQueueCallback.onError(this,r,n)}}},{key:"updateNetworkRequestDispatchStatus",value:function e(t,r){t.setDispatchInProgress(r);this._itemStore.updateNetworkRequest(t)}}]);return t}(k.default);t.default=T},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(t,r){n(this,e);this._id=undefined;this._timestamp=r?r:(new Date).getTime();this._dataBlob=t?t:""}r(e,[{key:"setDataBlob",value:function e(t){this._dataBlob=t}},{key:"getDataBlob",value:function e(){return this._dataBlob}},{key:"setId",value:function e(t){if(typeof t!=="string"||t===""||t===null){throw new Error("Must use valid ID format")}else{this._id=t}}},{key:"getId",value:function e(){return this._id}},{key:"setTimestamp",value:function e(t){if(t===null||typeof t!=="number"){throw new Error("Must use valid timestamp")}else{this._timestamp=t}}},{key:"getTimestamp",value:function e(){return this._timestamp}}]);return e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=r(11);var u=l(a);var s=r(9);var f=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function h(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var y=function(){function e(t){var r=t.itemQueueSize,n=t.itemQueueInterval,i=t.storeName;h(this,e);this._storeName=i;this._storage=this._createDB(i);this._itemQueueInterval=n;this._itemQueueSize=r;this._networkRequestStorage=this._initNetworkRequestStorage(i)}o(e,[{key:"_createDB",value:function e(t){var r=new u.default(t);return r}},{key:"_initNetworkRequestStorage",value:function e(t){var r=this._createDB(t+"NetworkRequestStorage");r._items=Object.keys(r.getAllItems()).reduce(function(e,t){return i({},e,c({},t,i({},r._items[t],{_dispatchInProgress:false})))},{});return r}},{key:"insert",value:function e(t){var r=this._storage.insertItem({item:t.getDataBlob(),timestamp:t.getTimestamp()});t.setId(r)}},{key:"getItems",value:function e(){var t=this.getAllItems();return t.slice(0,this._itemQueueSize)}},{key:"getAllItems",value:function e(t){var r=this._storage.getAllItems();var n=Object.keys(r);var i=[];n.forEach(function(e){var t=new f.default(r[e].item,r[e].timestamp);t.setId(e);i.push(t)});return t?i.slice(0,t):i}},{key:"getOverallItemCount",value:function e(){return Object.keys(this._storage._items).length}},{key:"deleteItemById",value:function e(t){return this._storage.removeItem(t.getId())}},{key:"deleteItems",value:function e(t){var r=this;var n=0;t.forEach(function(e){n+=r._storage.removeItem(e.getId())});return n}},{key:"deleteItemsOlderThan",value:function e(t){var r=this;var n=this._storage.getAllItems();var i=Object.keys(n);var o=0;i.forEach(function(e){if(n[e].timestamp<t.getTimestamp()){o+=r._storage.removeItem(e)}});return o}},{key:"deleteOldestItem",value:function e(){var t=this.getAllItems();var r=t[0];t.forEach(function(e){if(e.getTimestamp()<r.getTimestamp()){r=e}});this.deleteItemById(r)}},{key:"insertNetworkRequest",value:function e(t){var r=this._networkRequestStorage.insertItem(t);t.setId(r)}},{key:"deleteNetworkRequest",value:function e(t){return this._networkRequestStorage.removeItem(t.getId())}},{key:"updateNetworkRequest",value:function e(t){var r=this._networkRequestStorage.updateItem(t.getId(),t);return r}},{key:"getAllNetworkRequests",value:function e(){var t=this;var r=this._networkRequestStorage.getAllItems();var n=Object.keys(r);var i=n.map(function(e){var n=r[e];if(n._dispatchInProgress&&(!n._createdAt||n._createdAt<Date.now()-t._itemQueueInterval*100)){n._dispatchInProgress=false}n._id=e;return n});return i}},{key:"getNetworkRequest",value:function e(t){var r=this.getAllNetworkRequests();return t?r.slice(0,t):r}},{key:"getNetworkRequestNotInProgress",value:function e(t){var r=this.getAllNetworkRequests();var n=0;var i=[];for(var o=0;o<r.length;o+=1){if(r[o]._dispatchInProgress===false){i.push(r[o]);n+=1;if(n===t){break}}}return i}},{key:"purgeAll",value:function e(){this._storage._reset();this._networkRequestStorage._reset()}},{key:"getCurrentStorageSize",value:function e(){var t=[];var r=function e(r){var i=0;if(typeof r==="boolean"){i=4}else if(typeof r==="string"){i+=r.length*2}else if(typeof r==="number"){i=8}else if((typeof r==="undefined"?"undefined":n(r))==="object"&&t.indexOf(r)===-1){t[t.length]=r;for(var o in r){i+=8;i+=e(r[o])}}return i};return r(this._storage)+r(this._networkRequestStorage)}}]);return e}();t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DELIMITER=undefined;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var o=r(12);var a=f(o);var u=r(56);var s=f(u);function f(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=t.DELIMITER="_";var y=function(){function e(t){c(this,e);this._storageName=t;this._items={};this._supportedBrowserFeatures={};this._useLocalStorage=this.isLocalStorageSupported();this._loadFromStorage()}i(e,[{key:"_isStorageTypeSupported",value:function e(t){if(!Object.prototype.hasOwnProperty.call(this._supportedBrowserFeatures,t)){try{this._supportedBrowserFeatures[t]=window[t]instanceof Storage}catch(e){console.error("[reliable-transmission] "+t+" is inaccessible, falling back to memory usage",e);this._supportedBrowserFeatures[t]=false}}return this._supportedBrowserFeatures[t]}},{key:"isLocalStorageSupported",value:function e(){return this._isStorageTypeSupported("localStorage")}},{key:"getItem",value:function e(t){var r=void 0;r=this._items[t]?(0,a.default)(this._items[t]):null;if(r){return r}}},{key:"insertItem",value:function e(t){var r=""+this._storageName+h+(0,s.default)();this._items[r]=t;if(this._useLocalStorage){try{localStorage.setItem(r,JSON.stringify(t))}catch(e){console.warn("Failed to insert item into localStorage, possibly due to lack of available space",e)}}return r}},{key:"updateItem",value:function e(t,r){if(this._items[t]){this._items[t]=r;if(this._useLocalStorage){try{localStorage.setItem(t,JSON.stringify(r))}catch(e){console.warn("Failed to update item into localStorage",e)}}return t}}},{key:"removeItem",value:function e(t){if(this._items[t]){delete this._items[t];if(this._useLocalStorage){try{localStorage.removeItem(t)}catch(e){console.warn("Failed to remove item from localStorage",e)}}return 1}}},{key:"getAllItems",value:function e(){var t=this;var r=Object.keys(this._items).filter(function(e){return e.substring(0,(""+t._storageName+h).length)===""+t._storageName+h}).reduce(function(e,r){return n({},e,l({},r,t._items[r]))},{});return r}},{key:"_reset",value:function e(){var t=this;var r=Object.keys(this._items).filter(function(e){delete t._items[e];if(t._useLocalStorage){try{localStorage.removeItem(e)}catch(e){console.warn("Failed to remove item from localStorage",e)}}});console.log("Deleted "+r.length+" items from persistent local storage. Storage is now reset.")}},{key:"_loadFromStorage",value:function e(){var t=this;if(this._useLocalStorage){this._items=Object.keys(localStorage).filter(function(e){return e.substring(0,(""+t._storageName+h).length)===""+t._storageName+h}).reduce(function(e,t){var r=n({},e);var i=null;try{i=JSON.parse(localStorage.getItem(t))}catch(e){console.error("Failed to load item from localStorage:",e)}r[t]=i;return r},{})}}}]);return e}();t.default=y},function(e,t,r){var n=r(13);var i=1,o=4;function a(e){return n(e,i|o)}e.exports=a},function(e,t,r){var n=r(14),i=r(22),o=r(23),a=r(27),u=r(31),s=r(33),f=r(37),l=r(38),c=r(40),h=r(42),y=r(43),d=r(44),v=r(45),p=r(46),m=r(47),_=r(52),b=r(53),g=r(54),w=r(49),k=r(55),S=r(29);var I=1,x=2,P=4;var T="[object Arguments]",E="[object Array]",O="[object Boolean]",j="[object Date]",R="[object Error]",C="[object Function]",A="[object GeneratorFunction]",M="[object Map]",B="[object Number]",q="[object Object]",D="[object RegExp]",Q="[object Set]",N="[object String]",F="[object Symbol]",U="[object WeakMap]";var L="[object ArrayBuffer]",z="[object DataView]",H="[object Float32Array]",V="[object Float64Array]",J="[object Int8Array]",G="[object Int16Array]",W="[object Int32Array]",Y="[object Uint8Array]",K="[object Uint8ClampedArray]",X="[object Uint16Array]",$="[object Uint32Array]";var Z={};Z[T]=Z[E]=Z[L]=Z[z]=Z[O]=Z[j]=Z[H]=Z[V]=Z[J]=Z[G]=Z[W]=Z[M]=Z[B]=Z[q]=Z[D]=Z[Q]=Z[N]=Z[F]=Z[Y]=Z[K]=Z[X]=Z[$]=true;Z[R]=Z[C]=Z[U]=false;function ee(e,t,r,E,O,j){var R,M=t&I,B=t&x,D=t&P;if(r){R=O?r(e,E,O,j):r(e)}if(R!==undefined){return R}if(!w(e)){return e}var Q=_(e);if(Q){R=v(e);if(!M){return f(e,R)}}else{var N=d(e),F=N==C||N==A;if(b(e)){return s(e,M)}if(N==q||N==T||F&&!O){R=B||F?{}:m(e);if(!M){return B?c(e,u(R,e)):l(e,a(R,e))}}else{if(!Z[N]){return O?e:{}}R=p(e,N,M)}}j||(j=new n);var U=j.get(e);if(U){return U}j.set(e,R);if(k(e)){e.forEach(function(n){R.add(ee(n,t,r,n,e,j))})}else if(g(e)){e.forEach(function(n,i){R.set(i,ee(n,t,r,i,e,j))})}var L=D?B?y:h:B?keysIn:S;var z=Q?undefined:L(e);i(z||e,function(n,i){if(z){i=n;n=e[i]}o(R,i,ee(n,t,r,i,e,j))});return R}e.exports=ee},function(e,t,r){var n=r(15),i=r(16),o=r(19),a=r(20),u=r(21);function s(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n;s.prototype["delete"]=i;s.prototype.get=o;s.prototype.has=a;s.prototype.set=u;e.exports=s},function(e,t){function r(){this.__data__=[];this.size=0}e.exports=r},function(e,t,r){var n=r(17);var i=Array.prototype;var o=i.splice;function a(e){var t=this.__data__,r=n(t,e);if(r<0){return false}var i=t.length-1;if(r==i){t.pop()}else{o.call(t,r,1)}--this.size;return true}e.exports=a},function(e,t,r){var n=r(18);function i(e,t){var r=e.length;while(r--){if(n(e[r][0],t)){return r}}return-1}e.exports=i},function(e,t){function r(e,t){return e===t||e!==e&&t!==t}e.exports=r},function(e,t,r){var n=r(17);function i(e){var t=this.__data__,r=n(t,e);return r<0?undefined:t[r][1]}e.exports=i},function(e,t,r){var n=r(17);function i(e){return n(this.__data__,e)>-1}e.exports=i},function(e,t,r){var n=r(17);function i(e,t){var r=this.__data__,i=n(r,e);if(i<0){++this.size;r.push([e,t])}else{r[i][1]=t}return this}e.exports=i},function(e,t){function r(e,t){var r=-1,n=e==null?0:e.length;while(++r<n){if(t(e[r],r,e)===false){break}}return e}e.exports=r},function(e,t,r){var n=r(24),i=r(18);var o=Object.prototype;var a=o.hasOwnProperty;function u(e,t,r){var o=e[t];if(!(a.call(e,t)&&i(o,r))||r===undefined&&!(t in e)){n(e,t,r)}}e.exports=u},function(e,t,r){var n=r(25);function i(e,t,r){if(t=="__proto__"&&n){n(e,t,{configurable:true,enumerable:true,value:r,writable:true})}else{e[t]=r}}e.exports=i},function(e,t,r){var n=r(26);var i=function(){try{var e=n(Object,"defineProperty");e({},"",{});return e}catch(e){}}();e.exports=i},function(e,t){function r(e,t){return e==null?undefined:e[t]}e.exports=r},function(e,t,r){var n=r(28),i=r(29);function o(e,t){return e&&n(t,i(t),e)}e.exports=o},function(e,t,r){var n=r(23),i=r(24);function o(e,t,r,o){var a=!r;r||(r={});var u=-1,s=t.length;while(++u<s){var f=t[u];var l=o?o(r[f],e[f],f,r,e):undefined;if(l===undefined){l=e[f]}if(a){i(r,f,l)}else{n(r,f,l)}}return r}e.exports=o},function(e,t,r){var n=r(30);var i=n(Object.keys,Object);e.exports=i},function(e,t){function r(e,t){return function(r){return e(t(r))}}e.exports=r},function(e,t,r){var n=r(28),i=r(32);function o(e,t){return e&&n(t,i(t),e)}e.exports=o},function(e,t){function r(e){var t=[];if(e!=null){for(var r in Object(e)){t.push(r)}}return t}e.exports=r},function(e,t,r){(function(e){var n=r(35);var i=typeof t=="object"&&t&&!t.nodeType&&t;var o=i&&typeof e=="object"&&e&&!e.nodeType&&e;var a=o&&o.exports===i;var u=a?n.Buffer:undefined,s=u?u.allocUnsafe:undefined;function f(e,t){if(t){return e.slice()}var r=e.length,n=s?s(r):new e.constructor(r);e.copy(n);return n}e.exports=f}).call(t,r(34)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){e.deprecate=function(){};e.paths=[];e.children=[];e.webpackPolyfill=1}return e}},function(e,t,r){var n=r(36);var i=typeof self=="object"&&self&&self.Object===Object&&self;var o=n||i||Function("return this")();e.exports=o},function(e,t){(function(t){var r=typeof t=="object"&&t&&t.Object===Object&&t;e.exports=r}).call(t,function(){return this}())},function(e,t){function r(e,t){var r=-1,n=e.length;t||(t=Array(n));while(++r<n){t[r]=e[r]}return t}e.exports=r},function(e,t,r){var n=r(28),i=r(39);function o(e,t){return n(e,i(e),t)}e.exports=o},function(e,t){function r(){return[]}e.exports=r},function(e,t,r){var n=r(28),i=r(41);function o(e,t){return n(e,i(e),t)}e.exports=o},39,29,32,function(e,t){var r=Object.prototype;var n=r.toString;function i(e){return n.call(e)}e.exports=i},function(e,t){var r=Object.prototype;var n=r.hasOwnProperty;function i(e){var t=e.length,r=new e.constructor(t);if(t&&typeof e[0]=="string"&&n.call(e,"index")){r.index=e.index;r.input=e.input}return r}e.exports=i},function(e,t){function r(e){return e}e.exports=r},function(e,t,r){var n=r(48),i=r(50),o=r(51);
function a(e){return typeof e.constructor=="function"&&!o(e)?n(i(e)):{}}e.exports=a},function(e,t,r){var n=r(49);var i=Object.create;var o=function(){function e(){}return function(t){if(!n(t)){return{}}if(i){return i(t)}e.prototype=t;var r=new e;e.prototype=undefined;return r}}();e.exports=o},function(e,t){function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}e.exports=r},function(e,t,r){var n=r(30);var i=n(Object.getPrototypeOf,Object);e.exports=i},function(e,t){function r(){return false}e.exports=r},function(e,t){var r=Array.isArray;e.exports=r},51,51,51,function(e,t,r){var n=r(57);var i=r(58);function o(e,t,r){var o=t&&r||0;if(typeof e=="string"){t=e=="binary"?new Array(16):null;e=null}e=e||{};var a=e.random||(e.rng||n)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(t){for(var u=0;u<16;++u){t[o+u]=a[u]}}return t||i(a)}e.exports=o},function(e,t){(function(t){var r;var n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function e(){n.getRandomValues(i);return i}}if(!r){var o=new Array(16);r=function(){for(var e=0,t;e<16;e++){if((e&3)===0)t=Math.random()*4294967296;o[e]=t>>>((e&3)<<3)&255}return o}}e.exports=r}).call(t,function(){return this}())},function(e,t){var r=[];for(var n=0;n<256;++n){r[n]=(n+256).toString(16).substr(1)}function i(e,t){var n=t||0;var i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}e.exports=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(){n(this,e)}r(e,[{key:"collect",value:function e(t,r,n){if(n||t.getOverallItemCount()>=r.getMaxItemQueueSize()){var i=t.getAllItems(r.getMaxItemQueueSize());return i}else{return[]}}}]);return e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(61);var o=s(i);r(63);var a=r(6);var u=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function e(t){f(this,e);this._retryStrategy=t?t:new u.default;this._dispatcherCallback=null}n(e,[{key:"setCallback",value:function e(t){this._dispatcherCallback=t}},{key:"transmitNetworkRequest",value:function e(t){return new Promise(function(e,r){var n=true;(0,o.default)(t.getUrl(n),{body:t.getPayload(),cache:"no-cache",credentials:"include",headers:t.getHeaders(),method:"POST",mode:"cors",redirect:"error",referrer:"no-referrer"}).then(function(t){if(t.ok===false){throw new Error("HTTP Bad Response:"+JSON.stringify(t))}else{e(t)}}).catch(function(e){r(e)})})}},{key:"dispatch",value:function e(t){var r=this;if(t===null){return}if(this._dispatcherCallback){this._dispatcherCallback.dispatchInitiated(this,t)}return this.transmitNetworkRequest(t).then(function(e){r._dispatcherCallback.dispatchSuccess(r,t,e)}).catch(function(e){r._dispatcherCallback.dispatchFailed(r,t,e)})}}]);return e}();t.default=l},function(e,t,r){r(62);e.exports=self.fetch.bind(self)},function(e,t,r){(function(e,r){true?r(t):typeof define==="function"&&define.amd?define(["exports"],r):r(e.WHATWGFetch={})})(this,function(e){"use strict";var t={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function r(e){return e&&DataView.prototype.isPrototypeOf(e)}if(t.arrayBuffer){var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1}}function o(e){if(typeof e!=="string"){e=String(e)}if(/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e)){throw new TypeError("Invalid character in header field name")}return e.toLowerCase()}function a(e){if(typeof e!=="string"){e=String(e)}return e}function u(e){var r={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};if(t.iterable){r[Symbol.iterator]=function(){return r}}return r}function s(e){this.map={};if(e instanceof s){e.forEach(function(e,t){this.append(t,e)},this)}else if(Array.isArray(e)){e.forEach(function(e){this.append(e[0],e[1])},this)}else if(e){Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}}s.prototype.append=function(e,t){e=o(e);t=a(t);var r=this.map[e];this.map[e]=r?r+", "+t:t};s.prototype["delete"]=function(e){delete this.map[o(e)]};s.prototype.get=function(e){e=o(e);return this.has(e)?this.map[e]:null};s.prototype.has=function(e){return this.map.hasOwnProperty(o(e))};s.prototype.set=function(e,t){this.map[o(e)]=a(t)};s.prototype.forEach=function(e,t){for(var r in this.map){if(this.map.hasOwnProperty(r)){e.call(t,this.map[r],r,this)}}};s.prototype.keys=function(){var e=[];this.forEach(function(t,r){e.push(r)});return u(e)};s.prototype.values=function(){var e=[];this.forEach(function(t){e.push(t)});return u(e)};s.prototype.entries=function(){var e=[];this.forEach(function(t,r){e.push([r,t])});return u(e)};if(t.iterable){s.prototype[Symbol.iterator]=s.prototype.entries}function f(e){if(e.bodyUsed){return Promise.reject(new TypeError("Already read"))}e.bodyUsed=true}function l(e){return new Promise(function(t,r){e.onload=function(){t(e.result)};e.onerror=function(){r(e.error)}})}function c(e){var t=new FileReader;var r=l(t);t.readAsArrayBuffer(e);return r}function h(e){var t=new FileReader;var r=l(t);t.readAsText(e);return r}function y(e){var t=new Uint8Array(e);var r=new Array(t.length);for(var n=0;n<t.length;n++){r[n]=String.fromCharCode(t[n])}return r.join("")}function d(e){if(e.slice){return e.slice(0)}else{var t=new Uint8Array(e.byteLength);t.set(new Uint8Array(e));return t.buffer}}function v(){this.bodyUsed=false;this._initBody=function(e){this._bodyInit=e;if(!e){this._bodyText=""}else if(typeof e==="string"){this._bodyText=e}else if(t.blob&&Blob.prototype.isPrototypeOf(e)){this._bodyBlob=e}else if(t.formData&&FormData.prototype.isPrototypeOf(e)){this._bodyFormData=e}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)){this._bodyText=e.toString()}else if(t.arrayBuffer&&t.blob&&r(e)){this._bodyArrayBuffer=d(e.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))){this._bodyArrayBuffer=d(e)}else{this._bodyText=e=Object.prototype.toString.call(e)}if(!this.headers.get("content-type")){if(typeof e==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(t.blob){this.blob=function(){var e=f(this);if(e){return e}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return f(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(c)}}}this.text=function(){var e=f(this);if(e){return e}if(this._bodyBlob){return h(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(y(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(t.formData){this.formData=function(){return this.text().then(b)}}this.json=function(){return this.text().then(JSON.parse)};return this}var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e){var t=e.toUpperCase();return p.indexOf(t)>-1?t:e}function _(e,t){t=t||{};var r=t.body;if(e instanceof _){if(e.bodyUsed){throw new TypeError("Already read")}this.url=e.url;this.credentials=e.credentials;if(!t.headers){this.headers=new s(e.headers)}this.method=e.method;this.mode=e.mode;this.signal=e.signal;if(!r&&e._bodyInit!=null){r=e._bodyInit;e.bodyUsed=true}}else{this.url=String(e)}this.credentials=t.credentials||this.credentials||"same-origin";if(t.headers||!this.headers){this.headers=new s(t.headers)}this.method=m(t.method||this.method||"GET");this.mode=t.mode||this.mode||null;this.signal=t.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function b(e){var t=new FormData;e.trim().split("&").forEach(function(e){if(e){var r=e.split("=");var n=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}});return t}function g(e){var t=new s;var r=e.replace(/\r?\n[\t ]+/g," ");r.split(/\r?\n/).forEach(function(e){var r=e.split(":");var n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}});return t}v.call(_.prototype);function w(e,t){if(!t){t={}}this.type="default";this.status=t.status===undefined?200:t.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in t?t.statusText:"OK";this.headers=new s(t.headers);this.url=t.url||"";this._initBody(e)}v.call(w.prototype);w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})};w.error=function(){var e=new w(null,{status:0,statusText:""});e.type="error";return e};var k=[301,302,303,307,308];w.redirect=function(e,t){if(k.indexOf(t)===-1){throw new RangeError("Invalid status code")}return new w(null,{status:t,headers:{location:e}})};e.DOMException=self.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e;this.name=t;var r=Error(e);this.stack=r.stack};e.DOMException.prototype=Object.create(Error.prototype);e.DOMException.prototype.constructor=e.DOMException}function S(r,n){return new Promise(function(i,o){var a=new _(r,n);if(a.signal&&a.signal.aborted){return o(new e.DOMException("Aborted","AbortError"))}var u=new XMLHttpRequest;function s(){u.abort()}u.onload=function(){var e={status:u.status,statusText:u.statusText,headers:g(u.getAllResponseHeaders()||"")};e.url="responseURL"in u?u.responseURL:e.headers.get("X-Request-URL");var t="response"in u?u.response:u.responseText;i(new w(t,e))};u.onerror=function(){o(new TypeError("Network request failed"))};u.ontimeout=function(){o(new TypeError("Network request failed"))};u.onabort=function(){o(new e.DOMException("Aborted","AbortError"))};u.open(a.method,a.url,true);if(a.credentials==="include"){u.withCredentials=true}else if(a.credentials==="omit"){u.withCredentials=false}if("responseType"in u&&t.blob){u.responseType="blob"}a.headers.forEach(function(e,t){u.setRequestHeader(t,e)});if(a.signal){a.signal.addEventListener("abort",s);u.onreadystatechange=function(){if(u.readyState===4){a.signal.removeEventListener("abort",s)}}}u.send(typeof a._bodyInit==="undefined"?null:a._bodyInit)})}S.polyfill=true;if(!self.fetch){self.fetch=S;self.Headers=s;self.Request=_;self.Response=w}e.Headers=s;e.Request=_;e.Response=w;e.fetch=S;Object.defineProperty(e,"__esModule",{value:true})})},function(e,t,r){"use strict";e.exports=r(64).polyfill()},function(e,t,r){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   v4.2.8+1e68dce6
	 */
(function(t,r){true?e.exports=r():typeof define==="function"&&define.amd?define(r):t.ES6Promise=r()})(this,function(){"use strict";function e(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function n(e){return typeof e==="function"}var i=void 0;if(Array.isArray){i=Array.isArray}else{i=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}var o=i;var a=0;var u=void 0;var s=void 0;var f=function e(t,r){k[a]=t;k[a+1]=r;a+=2;if(a===2){if(s){s(S)}else{x()}}};function l(e){s=e}function c(e){f=e}var h=typeof window!=="undefined"?window:undefined;var y=h||{};var d=y.MutationObserver||y.WebKitMutationObserver;var v=typeof self==="undefined"&&typeof t!=="undefined"&&{}.toString.call(t)==="[object process]";var p=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function m(){return function(){return t.nextTick(S)}}function _(){if(typeof u!=="undefined"){return function(){u(S)}}return w()}function b(){var e=0;var t=new d(S);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function g(){var e=new MessageChannel;e.port1.onmessage=S;return function(){return e.port2.postMessage(0)}}function w(){var e=setTimeout;return function(){return e(S,1)}}var k=new Array(1e3);function S(){for(var e=0;e<a;e+=2){var t=k[e];var r=k[e+1];t(r);k[e]=undefined;k[e+1]=undefined}a=0}function I(){try{var e=Function("return this")().require("vertx");u=e.runOnLoop||e.runOnContext;return _()}catch(e){return w()}}var x=void 0;if(v){x=m()}else if(d){x=b()}else if(p){x=g()}else if(h===undefined&&"function"==="function"){x=I()}else{x=w()}function P(e,t){var r=this;var n=new this.constructor(O);if(n[E]===undefined){Y(n)}var i=r._state;if(i){var o=arguments[i-1];f(function(){return V(i,n,o,r._result)})}else{z(r,n,e,t)}return n}function T(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var r=new t(O);N(r,e);return r}var E=Math.random().toString(36).substring(2);function O(){}var j=void 0;var R=1;var C=2;function A(){return new TypeError("You cannot resolve a promise with itself")}function M(){return new TypeError("A promises callback cannot return that same promise.")}function B(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function q(e,t,r){f(function(e){var n=false;var i=B(r,t,function(r){if(n){return}n=true;if(t!==r){N(e,r)}else{U(e,r)}},function(t){if(n){return}n=true;L(e,t)},"Settle: "+(e._label||" unknown promise"));if(!n&&i){n=true;L(e,i)}},e)}function D(e,t){if(t._state===R){U(e,t._result)}else if(t._state===C){L(e,t._result)}else{z(t,undefined,function(t){return N(e,t)},function(t){return L(e,t)})}}function Q(e,t,r){if(t.constructor===e.constructor&&r===P&&t.constructor.resolve===T){D(e,t)}else{if(r===undefined){U(e,t)}else if(n(r)){q(e,t,r)}else{U(e,t)}}}function N(t,r){if(t===r){L(t,A())}else if(e(r)){var n=void 0;try{n=r.then}catch(e){L(t,e);return}Q(t,r,n)}else{U(t,r)}}function F(e){if(e._onerror){e._onerror(e._result)}H(e)}function U(e,t){if(e._state!==j){return}e._result=t;e._state=R;if(e._subscribers.length!==0){f(H,e)}}function L(e,t){if(e._state!==j){return}e._state=C;e._result=t;f(F,e)}function z(e,t,r,n){var i=e._subscribers;var o=i.length;e._onerror=null;i[o]=t;i[o+R]=r;i[o+C]=n;if(o===0&&e._state){f(H,e)}}function H(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var n=void 0,i=void 0,o=e._result;for(var a=0;a<t.length;a+=3){n=t[a];i=t[a+r];if(n){V(r,n,i,o)}else{i(o)}}e._subscribers.length=0}function V(e,t,r,i){var o=n(r),a=void 0,u=void 0,s=true;if(o){try{a=r(i)}catch(e){s=false;u=e}if(t===a){L(t,M());return}}else{a=i}if(t._state!==j){}else if(o&&s){N(t,a)}else if(s===false){L(t,u)}else if(e===R){U(t,a)}else if(e===C){L(t,a)}}function J(e,t){try{t(function t(r){N(e,r)},function t(r){L(e,r)})}catch(t){L(e,t)}}var G=0;function W(){return G++}function Y(e){e[E]=G++;e._state=undefined;e._result=undefined;e._subscribers=[]}function K(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e;this.promise=new e(O);if(!this.promise[E]){Y(this.promise)}if(o(t)){this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){U(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(t);if(this._remaining===0){U(this.promise,this._result)}}}else{L(this.promise,K())}}e.prototype._enumerate=function e(t){for(var r=0;this._state===j&&r<t.length;r++){this._eachEntry(t[r],r)}};e.prototype._eachEntry=function e(t,r){var n=this._instanceConstructor;var i=n.resolve;if(i===T){var o=void 0;var a=void 0;var u=false;try{o=t.then}catch(e){u=true;a=e}if(o===P&&t._state!==j){this._settledAt(t._state,r,t._result)}else if(typeof o!=="function"){this._remaining--;this._result[r]=t}else if(n===ne){var s=new n(O);if(u){L(s,a)}else{Q(s,t,o)}this._willSettleAt(s,r)}else{this._willSettleAt(new n(function(e){return e(t)}),r)}}else{this._willSettleAt(i(t),r)}};e.prototype._settledAt=function e(t,r,n){var i=this.promise;if(i._state===j){this._remaining--;if(t===C){L(i,n)}else{this._result[r]=n}}if(this._remaining===0){U(i,this._result)}};e.prototype._willSettleAt=function e(t,r){var n=this;z(t,undefined,function(e){return n._settledAt(R,r,e)},function(e){return n._settledAt(C,r,e)})};return e}();function $(e){return new X(this,e).promise}function Z(e){var t=this;if(!o(e)){return new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new t(function(r,n){var i=e.length;for(var o=0;o<i;o++){t.resolve(e[o]).then(r,n)}})}}function ee(e){var t=this;var r=new t(O);L(r,e);return r}function te(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function re(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ne=function(){function e(t){this[E]=W();this._result=this._state=undefined;this._subscribers=[];if(O!==t){typeof t!=="function"&&te();this instanceof e?J(this,t):re()}}e.prototype.catch=function e(t){return this.then(null,t)};e.prototype.finally=function e(t){var r=this;var i=r.constructor;if(n(t)){return r.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})})}return r.then(t,t)};return e}();ne.prototype.then=P;ne.all=$;ne.race=Z;ne.resolve=T;ne.reject=ee;ne._setScheduler=l;ne._setAsap=c;ne._asap=f;function ie(){var e=void 0;if(typeof r!=="undefined"){e=r}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if(n==="[object Promise]"&&!t.cast){return}}e.Promise=ne}ne.polyfill=ie;ne.Promise=ne;return ne})}).call(t,r(65),function(){return this}())},function(e,t){var r=e.exports={};var n;var i;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=a}}catch(e){i=a}})();function u(e){if(n===setTimeout){return setTimeout(e,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function s(e){if(i===clearTimeout){return clearTimeout(e)}if((i===a||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var f=[];var l=false;var c;var h=-1;function y(){if(!l||!c){return}l=false;if(c.length){f=c.concat(f)}else{h=-1}if(f.length){d()}}function d(){if(l){return}var e=u(y);l=true;var t=f.length;while(t){c=f;f=[];while(++h<t){if(c){c[h].run()}}h=-1;t=f.length}c=null;l=false;s(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}f.push(new v(e,t));if(f.length===1&&!l){u(d)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function p(){}r.on=p;r.addListener=p;r.once=p;r.off=p;r.removeListener=p;r.removeAllListeners=p;r.emit=p;r.prependListener=p;r.prependOnceListener=p;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(t){n(this,e);this._itemQueue=t}r(e,[{key:"sendItemsInQueue",value:function e(){return this._itemQueue.drain(true)}}]);return e}();t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(){n(this,e);this._itemQueueCallback=null}r(e,[{key:"setCallback",value:function e(t){this._itemQueueCallback=t}},{key:"dispatchSuccess",value:function e(t,r,n){}},{key:"dispatchFailed",value:function e(t,r,n){}},{key:"dispatchInitiated",value:function e(t,r){}}]);return e}();t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=2e3;var a=1048576;var u=3;var s=3e3;var f=3e4;var l=function(){function e(t){i(this,e);this._itemStoreIdentifier=t&&t.itemStoreIdentifier?t.itemStoreIdentifier:"RTDefault";this._maxRetries=t&&t.maxRetries?t.maxRetries:u;this._maxItemQueueSize=t&&t.maxItemQueueSize?t.maxItemQueueSize:o;this._interval=t&&t.interval?t.interval:f;this._maxBytesQuota=t&&t.maxBytesQuota?t.maxBytesQuota:a;this._retryStrategy=t&&t.retryStrategy?t.retryStrategy:"DefaultRetryStrategy";this._purgeStrategy=t&&t.purgeStrategy?t.purgeStrategy:"Purge";this._requestTimeout=t&&t.requestTimeout?t.requestTimeout:s;this._url=t&&t.url?t.url:"localhost";this._method=t&&t.method?t.method:"post";this._headers=t&&t.headers?t.headers:{};this._queryParams=t&&t.queryParams?t.queryParams:{};this.OVERRIDE_LIMIT_ENFORCED=false;this.minimumMaxItemQueueSize=64;this.minimumMaxBytesQuota=102400;this.minimumMaxRetryCount=2;this.minimumRequestTimeout=1e3;this.minimumInterval=1e4}n(e,[{key:"setItemStoreIdentifier",value:function e(t){if(typeof t!=="string"||t===null){throw"Please use a valid string for queue name"}else{this._itemStoreIdentifier=t}}},{key:"getItemStoreIdentifier",value:function e(){return this._itemStoreIdentifier}},{key:"setMaxItemQueueSize",value:function e(t){if(t<1||t===null){throw"Maximum item queue size should be at the minimum 1."}if(this.OVERRIDE_LIMIT_ENFORCED===true){this._maxItemQueueSize=t}else{if(t<this.minimumMaxItemQueueSize){console.error("This value is less than the recommended size of "+this.minimumMaxItemQueueSize+" events. Setting to default value "+o+".");this._maxItemQueueSize=o}else{this._maxItemQueueSize=t}}}},{key:"getMaxItemQueueSize",value:function e(){return this._maxItemQueueSize}},{key:"setRequestTimeout",value:function e(t){if(t<1||t===null){throw"Maximum retry timeout should be at the minimum 1ms."}if(this.OVERRIDE_LIMIT_ENFORCED===true){this._requestTimeout=t}else{if(t<this.minimumRequestTimeout){console.error("This value is less than the recommended time of "+this.minimumRequestTimeout+". Setting to default value "+s+".");this._requestTimeout=s}else{this._requestTimeout=t}}}},{key:"getRequestTimeout",value:function e(){return this._requestTimeout}},{key:"setInterval",value:function e(t){if(t<1||t===null){throw"Time interval should be at the minimum 1ms."}if(this.OVERRIDE_LIMIT_ENFORCED===true){this._interval=t}else{if(t<this.minimumInterval){console.error("This value is less than the recommended time of "+this.minimumInterval+". Setting to default value "+f+".");this._interval=f}else{this._interval=t}}}},{key:"getInterval",value:function e(){return this._interval}},{key:"setMaxRetries",value:function e(t){if(t<0||t===null){throw"Maximum retries should be at the minimum 0."}if(this.OVERRIDE_LIMIT_ENFORCED===true){this._maxRetries=t}else{if(t<this.minimumMaxRetryCount){console.error("This value is less than the recommended retries of "+this.minimumMaxRetryCount+". Setting to default value "+u+".");this._maxRetries=u}else{this._maxRetries=t}}}},{key:"getMaxRetries",value:function e(){return this._maxRetries}},{key:"setMaxBytesQuota",value:function e(t){if(t<0||t===null){throw"Maximum bytes quota should be at the minimum 0."}if(this.OVERRIDE_LIMIT_ENFORCED===true){this._maxBytesQuota=t}else{if(t<this.minimumMaxBytesQuota){console.error("This value is less than the recommended bytes quota of "+this.minimumMaxBytesQuota+". Setting to default value "+a+".");this._maxBytesQuota=a}else{this._maxBytesQuota=t}}}},{key:"getMaxBytesQuota",value:function e(){return this._maxBytesQuota}},{key:"setPurgeStrategy",value:function e(t){this._purgeStrategy=t}},{key:"getPurgeStrategy",value:function e(){return this._purgeStrategy}},{key:"setRetryStrategy",value:function e(t){this._retryStrategy=t}},{key:"getRetryStrategy",value:function e(){return this._retryStrategy}},{key:"setUrl",value:function e(t){if(t===null||typeof t!=="string"||t===""){throw"Please use a valid URL"}else{this._url=t}}},{key:"getUrl",value:function e(){return this._url}},{key:"setMethod",value:function e(t){if(t===null||typeof t!=="string"||t===""){throw"Please use a valid HTTP method"}else{this._method=t}}},{key:"getMethod",value:function e(){return this._method}},{key:"setHeaders",value:function e(t){if(t===null||(typeof t==="undefined"?"undefined":r(t))!=="object"||Array.isArray(t)===true){throw"Please use valid headers"}else{this._headers=t}}},{key:"getHeaders",value:function e(){return this._headers}},{key:"setQueryParams",value:function e(t){if(t===null||(typeof t==="undefined"?"undefined":r(t))!=="object"||Array.isArray(t)===true){throw"Please use valid query params"}else{this._queryParams=t}}},{key:"getQueryParams",value:function e(){return this._queryParams}}]);return e}();t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function e(){n(this,e)}r(e,[{key:"onPrepareNetworkRequest",value:function e(t,r){}},{key:"onSuccess",value:function e(t,r){}},{key:"onError",value:function e(t,r,n){}}]);return e}();t.default=i}]))});