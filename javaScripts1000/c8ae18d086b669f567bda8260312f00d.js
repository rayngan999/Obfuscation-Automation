/* 20210701-102625 */!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var p="function"==typeof require&&require;if(!f&&p)return p(i,!0);if(u)return u(i,!0);throw(p=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",p}p=n[i]={exports:{}},e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(_engagement,module,exports){"use strict";var _k5a=_interopRequireDefault(_engagement("../../js/src/k5a.js")),_pageview=_interopRequireDefault(_engagement("../../js/src/log/pageview.js")),_click=_interopRequireDefault(_engagement("../../js/src/log/click.js")),_engagement=_interopRequireDefault(_engagement("../../js/src/log/engagement.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}new _k5a.default({installationId:"6093b0e54e5b9d15851a1112",logServer:"https://cl.k5a.io/",domains:["swp.de","npg-digital.de","lr-online.de","hz.de","moz.de"],modules:[_pageview.default,_click.default,_engagement.default],pageData:{wordCount:{article:{cl:{"article-text":1}}},paywall:{auto:!0,element:".paywall"}},moduleCfg:{engagement:{elements:{page:"document"}},click:{storage:!1,slotInspector:{position:{header:{el:["header"]},"current-news":{cl:["teaser-current-news"]},footer:{el:["footer"]}},mains:{main:[".content-col"]},slot:{cl:["teaser"],ss:"auto"},title:{el:["h2"]},image:{el:["img"]},positionTemplate:"row${row}_pos${pos}"}}}},-1!==location.href.indexOf("k5aDebug"))},{"../../js/src/k5a.js":3,"../../js/src/log/click.js":4,"../../js/src/log/engagement.js":11,"../../js/src/log/pageview.js":13}],2:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _k5a=new WeakMap,_hookAbleEvents=new WeakMap,_delayEventCnt=new WeakMap,_currHref=new WeakMap,_hookMap=new WeakMap,_callBacks=new WeakMap,_addSPASupport=new WeakSet,_handleEvent=new WeakSet,_execDelayHook=new WeakSet,_execHook=new WeakSet,_execute=new WeakSet,_runDebug=new WeakSet;function _addSPASupport2(){window.addEventListener("popstate",function(event){_classPrivateFieldGet(this,_currHref)!==location.href&&(_classPrivateFieldSet(this,_currHref,location.href),_classPrivateMethodGet(this,_execHook,_execHook2).call(this,"spa",event,!0))}.bind(this),!0),new MutationObserver(function(mutation){_classPrivateFieldGet(this,_currHref)!==location.href&&(_classPrivateFieldSet(this,_currHref,location.href),_classPrivateMethodGet(this,_execHook,_execHook2).call(this,"spa",mutation,!0))}.bind(this)).observe(document.documentElement||document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}function _handleEvent2(event){switch(event.type){case"readystatechange":var rs=event.target.readyState;void 0!==_classPrivateFieldGet(this,_hookMap)[rs]&&_classPrivateMethodGet(this,_execHook,_execHook2).call(this,rs,event),"complete"==event.target.readyState&&(_classPrivateMethodGet(this,_execute,_execute2).call(this,"interactive",event),_classPrivateMethodGet(this,_execute,_execute2).call(this,"loaded",event));break;case"pageshow":_classPrivateMethodGet(this,_execHook,_execHook2).call(this,event.type,event,event.persisted);break;case"visibilitychange":_classPrivateMethodGet(this,_execHook,_execHook2).call(this,"visible"===document.visibilityState?"active":"hidden",event,!0);break;case"DOMContentLoaded":case"click":case"mousemove":case"mousedown":case"mouseup":case"scroll":case"pagehide":case"beforeunload":case"blur":case"focus":_classPrivateFieldGet(this,_hookMap)[event.type].delay?(_classPrivateFieldSet(this,_delayEventCnt,1+ +_classPrivateFieldGet(this,_delayEventCnt)),setTimeout(_classPrivateMethodGet(this,_execDelayHook,_execDelayHook2).bind(this,event.type,event,_classPrivateFieldGet(this,_delayEventCnt)),100)):_classPrivateMethodGet(this,_execHook,_execHook2).call(this,event.type,event);break;default:_classPrivateFieldGet(this,_k5a).speaker.say("Don't know how to handle this event: "+event.type)}}function _execDelayHook2(hook,event,eventCnt){eventCnt===_classPrivateFieldGet(this,_delayEventCnt)&&_classPrivateMethodGet(this,_execHook,_execHook2).call(this,event.type,event)}function _execHook2(hook,event){var ignoreDone=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(void 0!==_classPrivateFieldGet(this,_hookMap)[hook])for(var i=0;i<_classPrivateFieldGet(this,_hookMap)[hook].hooks.length;i++){for(var hookName=_classPrivateFieldGet(this,_hookMap)[hook].hooks[i],x=0;x<_classPrivateFieldGet(this,_hookAbleEvents)[hookName].length;x++)if(0==_classPrivateFieldGet(this,_hookAbleEvents)[hookName][x].done||1==ignoreDone)try{_classPrivateFieldGet(this,_hookAbleEvents)[hookName][x].callBack(event),_classPrivateFieldGet(this,_hookAbleEvents)[hookName][x].reuse||(_classPrivateFieldGet(this,_hookAbleEvents)[hookName][x].done=!0)}catch(err){_classPrivateFieldGet(this,_k5a).speaker.say("Could not execute callback....."+err.toString())}else _classPrivateFieldGet(this,_k5a).speaker.say("["+event.type+"]Hook already done: "+hookName);_classPrivateFieldGet(this,_k5a).logger.fire(hookName,event.type)}else _classPrivateFieldGet(this,_k5a).speaker.say("undefined hook: "+hook)}function _execute2(step,event){for(var i=0;i<_classPrivateFieldGet(this,_callBacks)[step].length;i++)0==_classPrivateFieldGet(this,_callBacks)[step][i].done&&(_classPrivateFieldGet(this,_callBacks)[step][i].callback(event),_classPrivateFieldGet(this,_callBacks)[step][i].done=!0)}exports.default=function(){function listener(k5a){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,listener),_runDebug.add(this),_execute.add(this),_execHook.add(this),_execDelayHook.add(this),_handleEvent.add(this),_addSPASupport.add(this),_k5a.set(this,{writable:!0,value:null}),_hookAbleEvents.set(this,{writable:!0,value:{ready:[],active:[],hidden:[],pageView:[],click:[],exit:[],scroll:[],activity:[],spa:[]}}),_delayEventCnt.set(this,{writable:!0,value:0}),_currHref.set(this,{writable:!0,value:location.href}),_hookMap.set(this,{writable:!0,value:{blur:{hooks:["hidden"]},hidden:{hooks:["hidden"]},active:{hooks:["active"]},focus:{hooks:["active"]},loading:{hooks:["pageView"]},interactive:{hooks:["pageView","ready"]},complete:{hooks:["pageView","ready"]},DOMContentLoaded:{hooks:["pageView","ready"]},pageshow:{hooks:["pageView","ready"]},click:{hooks:["click"]},pagehide:{hooks:["exit"]},scroll:{hooks:["scroll","activity"],delay:!0},mousemove:{hooks:["activity"],delay:!0},mousedown:{hooks:["activity"],delay:!0},mouseup:{hooks:["activity"],delay:!0},spa:{hooks:["spa"]}}}),_callBacks.set(this,{writable:!0,value:{interactive:[],load:[],loaded:[],click:[]}}),_classPrivateFieldSet(this,_k5a,k5a),_classPrivateFieldGet(this,_k5a).element.addEventListener("readystatechange",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),_classPrivateFieldGet(this,_k5a).element.addEventListener("visibilitychange",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),_classPrivateFieldGet(this,_k5a).element.addEventListener("click",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),_classPrivateFieldGet(this,_k5a).element.addEventListener("scroll",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),_classPrivateFieldGet(this,_k5a).element.addEventListener("mousemove",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),window.addEventListener("DOMContentLoaded",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),window.addEventListener("pageshow",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),window.addEventListener("pagehide",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this)),window.addEventListener("blur",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),window.addEventListener("focus",_classPrivateMethodGet(this,_handleEvent,_handleEvent2).bind(this),!0),_classPrivateMethodGet(this,_addSPASupport,_addSPASupport2).call(this)}var Constructor,protoProps,staticProps;return Constructor=listener,(protoProps=[{key:"addHook",value:function(hook,callBack){var reuse="activity"!=hook&&"spa"!=hook?2<arguments.length&&void 0!==arguments[2]&&arguments[2]:!0;_classPrivateFieldGet(this,_hookAbleEvents)[hook].push({callBack:callBack,done:!1,reuse:reuse})}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),listener}()},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _listener=_interopRequireDefault(require("./evts/listener.js")),_speaker=_interopRequireDefault(require("./util/speaker.js")),_logger=_interopRequireDefault(require("./util/logger.js")),_pageData=_interopRequireDefault(require("./log/core/pageData.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,function(receiver,privateMap,action){if(privateMap.has(receiver))return privateMap.get(receiver);throw new TypeError("attempted to "+action+" private field on non-instance")}(receiver,privateMap,"get"))}var _modules=new WeakMap,_insId=new WeakMap,_initializeModules=new WeakSet;function _initializeModules2(){for(var _this$cfg$moduleCfg$t,i=0;i<this.cfg.modules.length;i++){this.speaker.say('Loading module "'+this.cfg.modules[i].name+'"');try{_classPrivateFieldGet(this,_modules)[this.cfg.modules[i].name]=new this.cfg.modules[i](this,null!==(_this$cfg$moduleCfg$t=this.cfg.moduleCfg[this.cfg.modules[i].name])&&void 0!==_this$cfg$moduleCfg$t?_this$cfg$moduleCfg$t:{})}catch(err){this.speaker.say('Could not load log module: "'+this.cfg.modules[i]+'", reason: '+err.toString())}}}exports.default=function(){function k5a(config){var debugMode=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,k5a),_initializeModules.add(this),_defineProperty(this,"cfg",{}),_modules.set(this,{writable:!0,value:{}}),_defineProperty(this,"speaker",null),_defineProperty(this,"logger",null),_defineProperty(this,"k5aServer","//l.kilkaya.com/"),_insId.set(this,{writable:!0,value:""}),_defineProperty(this,"element",document),_defineProperty(this,"pageData",null),this.cfg=config,void 0===this.cfg.moduleCfg&&(this.cfg.moduleCfg={}),void 0!==this.cfg.logServer&&(this.k5aServer=this.cfg.logServer),this.speaker=new _speaker.default(debugMode),this.listener=new _listener.default(this),this.logger=new _logger.default(this),this.pageData=new _pageData.default(this.element,this.cfg.pageData||{}),function(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}(this,_initializeModules,_initializeModules2).call(this)}var Constructor,protoProps,staticProps;return Constructor=k5a,(protoProps=[{key:"debugMode",set:function(debug){this.speaker.debugMode(debug=void 0===debug?!1:debug)}},{key:"debugUrl",set:function(url){this.speaker.debugUrl(url=void 0===url?!1:url)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),k5a}()},{"./evts/listener.js":2,"./log/core/pageData.js":6,"./util/logger.js":17,"./util/speaker.js":18}],4:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logModule2=_interopRequireDefault(require("./logModule.js")),_slotInspector=(_interopRequireDefault(require("./util/user.js")),_interopRequireDefault(require("./util/slotInspector.js"))),_storage=_interopRequireDefault(require("./util/storage.js")),_url=_interopRequireDefault(require("./core/url.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}var _initTime=new WeakMap,_storeClick=new WeakSet,_handleStoredClick=new WeakSet;function _storeClick2(clickData){(new _storage.default).setKey("_cl",clickData,10)}function _handleStoredClick2(){var logData=new _storage.default,clickData=logData.getKey("_cl");null!==clickData&&(logData.delKey("_cl"),logData=this.k5a.pageData.getLogData(["url","type","section","title","author","tag","cntTag"]),clickData.tu=logData.u,clickData.tptl=logData.ptl,clickData.tpsn=logData.psn,clickData.tptp=logData.ptp,clickData.tptg=logData.ptg,clickData.tpctg=logData.pctg,clickData.tpar=logData.par,this.k5a.logger.addData("click",clickData),this.k5a.logger.fire("click"))}exports.default=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(click,_logModule2.default);var _super=_createSuper(click);function click(_this){var config=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,click),_this=_super.call(this,_this),_handleStoredClick.add(_assertThisInitialized(_this)),_storeClick.add(_assertThisInitialized(_this)),_initTime.set(_assertThisInitialized(_this),{writable:!0,value:0}),_classPrivateFieldSet(_assertThisInitialized(_this),_initTime,(new Date).getTime()),_this.addHook("pageView",function(evt){_classPrivateMethodGet(this,_handleStoredClick,_handleStoredClick2).call(this)}.bind(_assertThisInitialized(_this)),!0),_this.addHook("click",function(logData){var receiver=new _slotInspector.default(config.slotInspector).analyze(logData.srcElement),url=new _url.default(receiver.url),logData=this.k5a.pageData.getLogData(["url","channel","type","section","title","author","tag","cntTag"]);logData.tu=receiver.url,logData.cr=receiver.row,logData.cp=receiver.pos,logData.po=receiver.position,logData.ps=receiver.size,logData.ct=(((new Date).getTime()-function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver=this,_classExtractFieldDescriptor(receiver,_initTime,"get")))/1e3).toFixed(1),this.k5a.cfg.domains.includes(url.domain)?_classPrivateMethodGet(this,_storeClick,_storeClick2).call(this,logData):(this.k5a.speaker.say("AY exit...."),this.k5a.logger.addData("click",logData))}.bind(_assertThisInitialized(_this)),!0),_this}return click}()},{"./core/url.js":9,"./logModule.js":12,"./util/slotInspector.js":14,"./util/storage.js":15,"./util/user.js":16}],5:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _channel=new WeakMap;exports.default=function(){function channel(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,channel),_channel.set(this,{writable:!0,value:""});var test=document.createElement("div");test.style.cssText="position: fixed;top: 0;left: 0;bottom: 0;right: 0;",document.documentElement.insertBefore(test,document.documentElement.firstChild);var d={width:test.offsetWidth,height:test.offsetHeight};_classPrivateFieldSet(this,_channel,(d.width<d.height?d.width:d.height)<600?"mobile":"desktop"),document.documentElement.removeChild(test)}var Constructor,protoProps,staticProps;return Constructor=channel,(protoProps=[{key:"getChannel",value:function(){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver=this,_classExtractFieldDescriptor(receiver,_channel,"get"));var receiver}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),channel}()},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _channel=_interopRequireDefault(require("./channel.js")),_wordcount=_interopRequireDefault(require("./wordcount.js")),_paywall=_interopRequireDefault(require("./paywall.js")),_referer=_interopRequireDefault(require("./referer.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}var _pageElm=new WeakMap,_cfg=new WeakMap,_prefixes=new WeakMap,_pData=new WeakMap,_result=new WeakMap,_autoMeta=new WeakSet;function _autoMeta2(field){if(_typeof("undefined"!==_classPrivateFieldGet(this,_pData)[field])){for(var i=0;i<_classPrivateFieldGet(this,_pData)[field].fields.length;i++)for(var y=0;y<_classPrivateFieldGet(this,_prefixes).length;y++){var name=-1==_classPrivateFieldGet(this,_pData)[field].fields[i].indexOf(":")?_classPrivateFieldGet(this,_prefixes)[y]+":"+_classPrivateFieldGet(this,_pData)[field].fields[i]:_classPrivateFieldGet(this,_pData)[field].fields[i],tmp=_classPrivateFieldGet(this,_pageElm).querySelectorAll('[property="'+name+'"]');if(tmp&&0<tmp.length)for(var x=0;x<tmp.length;x++){var v=tmp[x].getAttribute("content");""!=v&&this.setField(field,v)}}void 0===_classPrivateFieldGet(this,_result)[field]&&void 0!==_classPrivateFieldGet(this,_pData)[field].auto&&this.setField(field,_classPrivateFieldGet(this,_pData)[field].auto())}}exports.default=function(){function pageData(){var mField,pageElm=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,config=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;for(mField in!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,pageData),_autoMeta.add(this),_pageElm.set(this,{writable:!0,value:null}),_cfg.set(this,{writable:!0,value:{}}),_prefixes.set(this,{writable:!0,value:["k5a","kilkaya","og","lp"]}),_pData.set(this,{writable:!0,value:{url:{type:"string",auto:function(){return location.href},fields:["url"],param:"u"},referer:{type:"string",auto:function(){return new _referer.default(_classPrivateFieldGet(this,_pageElm),_classPrivateFieldGet(this,_cfg)).getReferer()}.bind(this),fields:["referer"],param:"r"},title:{type:"string",fields:["title"],param:"ptl"},section:{type:"string",fields:["section","article:section"],param:"psn"},type:{type:"string",fields:["type"],param:"ptp"},image:{type:"string",fields:["image"],param:"pig"},author:{type:"array",fields:["author","article:author"],param:"par"},tag:{type:"array",fields:["tag","article:tag"],param:"ptg"},cntTag:{type:"array",fields:["cntTag","article:cntTag"],param:"pctg"},channel:{type:"string",fields:["channel"],auto:function(){return(new _channel.default).getChannel()},param:"c"},wordcount:{type:"int",fields:["wordcount"],auto:function(){return new _wordcount.default(_classPrivateFieldGet(this,_pageElm),_classPrivateFieldGet(this,_cfg)).getWordcount()}.bind(this),param:"pwct"},publishtime:{type:"datetime",fields:["published_time","article:published_time"],param:"ppt"},modifiedtime:{type:"datetime",fields:["modified_time","article:modified_time"],param:"pmt"},paid:{type:"boolean",fields:["paid"],param:"pd"},paywall:{type:"string",fields:["paywall"],auto:function(){return new _paywall.default(_classPrivateFieldGet(this,_pageElm),_classPrivateFieldGet(this,_cfg)).getPaywall()}.bind(this),param:"pw"},login:{type:"boolean",fields:["login"],param:"ul"},subscriber:{type:"boolean",fields:["subscriber"],param:"sbs"},conversion:{type:"boolean",fields:["conversion"],param:"cs"}}}),_result.set(this,{writable:!0,value:{}}),_classPrivateFieldSet(this,_pageElm,pageElm),_classPrivateFieldSet(this,_cfg,config),_classPrivateFieldGet(this,_pData))_classPrivateMethodGet(this,_autoMeta,_autoMeta2).call(this,mField)}var Constructor,protoProps,staticProps;return Constructor=pageData,(protoProps=[{key:"reRead",value:function(){for(var mField in _classPrivateFieldGet(this,_pData))_classPrivateMethodGet(this,_autoMeta,_autoMeta2).call(this,mField)}},{key:"setData",value:function(data){for(var field in data)this.setField(field,data[field])}},{key:"setField",value:function(field,value){if(void 0!==_classPrivateFieldGet(this,_pData)[field]&&""!=value)switch(_classPrivateFieldGet(this,_pData)[field].type){case"string":"url"===field&&(value=new URL(value,document.baseURI).href),_classPrivateFieldGet(this,_result)[field]=value.trim();break;case"array":value=value.toLowerCase().trim(),void 0===_classPrivateFieldGet(this,_result)[field]?_classPrivateFieldGet(this,_result)[field]=[value]:_classPrivateFieldGet(this,_result)[field].includes(value)||_classPrivateFieldGet(this,_result)[field].push(value);break;case"boolean":_classPrivateFieldGet(this,_result)[field]="true"==value||1==value||"yes"==value||"1"==value?1:0;break;case"int":var n=parseInt(value);isNaN(n)||(_classPrivateFieldGet(this,_result)[field]=n);break;case"datetime":n=Date.parse(value);isNaN(n)||(_classPrivateFieldGet(this,_result)[field]=value)}}},{key:"getField",value:function(field){return void 0!==_classPrivateFieldGet(this,_pData)[field]&&void 0!==_classPrivateFieldGet(this,_result)[field]?_classPrivateFieldGet(this,_result)[field]:null}},{key:"getData",value:function(){return _classPrivateFieldGet(this,_result)}},{key:"getLogData",value:function(){var fields=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,tmp={};null===fields&&(fields=Object.keys(_classPrivateFieldGet(this,_result)));for(var i=0;i<fields.length;i++)tmp[_classPrivateFieldGet(this,_pData)[fields[i]].param]=_classPrivateFieldGet(this,_result)[fields[i]]?_classPrivateFieldGet(this,_result)[fields[i]]:"";return tmp}},{key:"getDefaultData",value:function(){return this.getLogData(["url","image","channel","type","section","title","wordcount","author","tag","cntTag","publishtime","modifiedtime","paywall","paid","subscriber","conversion","referer","login"])}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),pageData}()},{"./channel.js":5,"./paywall.js":7,"./referer.js":8,"./wordcount.js":10}],7:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _paywallDetected=new WeakMap;exports.default=function(){function paywall(elm,cfg){if(!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,paywall),_paywallDetected.set(this,{writable:!0,value:""}),void 0!==cfg.paywall&&void 0!==cfg.paywall.auto&&cfg.paywall.auto){if(void 0===cfg.paywall.element)return console.error("Paywall: missing element configuration"),!1;0<elm.querySelectorAll(cfg.paywall.element).length&&_classPrivateFieldSet(this,_paywallDetected,"hard")}}var Constructor,protoProps,staticProps;return Constructor=paywall,(protoProps=[{key:"getPaywall",value:function(){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver=this,_classExtractFieldDescriptor(receiver,_paywallDetected,"get"));var receiver}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),paywall}()},{}],8:[function(require,module,exports){"use strict";function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _referer=new WeakMap,_qsps=new WeakMap,_special=new WeakMap,_getQSP=new WeakSet;function _getQSP2(e){var q=e+"=",s=location.href.indexOf(q),e=-1;return-1<s&&(s+=q.length,-1<(e=-1==(e=location.href.indexOf("&",s))?location.href.indexOf("#",s):e)?decodeURIComponent(location.href.substring(s,e)):decodeURIComponent(location.href.substr(s)))}exports.default=function(){function referer(elm,cfg){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,referer),_getQSP.add(this),_referer.set(this,{writable:!0,value:""}),_qsps.set(this,{writable:!0,value:["utm_source"]}),_special.set(this,{writable:!0,value:{"facebook.com":["fbclid"]}}),void 0!==cfg.referer&&_classPrivateFieldSet(this,_qsps,[].concat(_toConsumableArray(cfg.referer),_toConsumableArray(_classPrivateFieldGet(this,_qsps))));for(var i=0;i<_classPrivateFieldGet(this,_qsps).length;i++)if(!1!==(r=_classPrivateMethodGet(this,_getQSP,_getQSP2).call(this,_classPrivateFieldGet(this,_qsps)[i]))&&""!==r){_classPrivateFieldSet(this,_referer,r);break}if(""===_classPrivateFieldGet(this,_referer))for(var _i=0,_Object$keys=Object.keys(_classPrivateFieldGet(this,_special));_i<_Object$keys.length;_i++){for(var r,el=_Object$keys[_i],i=0;i<_classPrivateFieldGet(this,_special)[el].length;i++)if(!1!==(r=_classPrivateMethodGet(this,_getQSP,_getQSP2).call(this,_classPrivateFieldGet(this,_special)[el][i]))){_classPrivateFieldSet(this,_referer,el);break}if(""!==_classPrivateFieldGet(this,_referer))break}""===_classPrivateFieldGet(this,_referer)&&document.referrer&&""!==document.referrer&&_classPrivateFieldSet(this,_referer,document.referrer)}var Constructor,protoProps,staticProps;return Constructor=referer,(protoProps=[{key:"getReferer",value:function(){return _classPrivateFieldGet(this,_referer)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),referer}()},{}],9:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _url=new WeakMap;exports.default=function(){function url2(){var url=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,url2),_url.set(this,{writable:!0,value:""}),_classPrivateFieldSet(this,_url,new URL(null!=url?url:location.href))}var Constructor,protoProps,staticProps;return Constructor=url2,(protoProps=[{key:"domain",get:function(){return _classPrivateFieldGet(this,_url).hostname.split(".").slice(-2).join(".")}},{key:"hash",get:function(){return _classPrivateFieldGet(this,_url).hash}},{key:"host",get:function(){return _classPrivateFieldGet(this,_url).host}},{key:"hostname",get:function(){return _classPrivateFieldGet(this,_url).hostname}},{key:"href",get:function(){return _classPrivateFieldGet(this,_url).href}},{key:"origin",get:function(){return _classPrivateFieldGet(this,_url).origin}},{key:"password",get:function(){return _classPrivateFieldGet(this,_url).password}},{key:"pathname",get:function(){return _classPrivateFieldGet(this,_url).pathname}},{key:"port",get:function(){return _classPrivateFieldGet(this,_url).port}},{key:"protocol",get:function(){return _classPrivateFieldGet(this,_url).port}},{key:"search",get:function(){return _classPrivateFieldGet(this,_url).search}},{key:"searchParams",get:function(){return _classPrivateFieldGet(this,_url).searchParams}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),url2}()},{}],10:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _wordcount=new WeakMap;exports.default=function(){function wordcount(elm,cfg){if(!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,wordcount),_wordcount.set(this,{writable:!0,value:0}),void 0!==cfg.wordCount)for(var _i=0,_Object$keys=Object.keys(cfg.wordCount.article);_i<_Object$keys.length;_i++){var el=_Object$keys[_i];if("cl"==el)for(var _i2=0,_Object$keys2=Object.keys(cfg.wordCount.article[el]);_i2<_Object$keys2.length;_i2++)for(var cl=_Object$keys2[_i2],elms=elm.getElementsByClassName(cl),i=0;i<elms.length;i++)txt=(txt=elms[i].textContent).replace(/\s+/g," "),1==cfg.wordCount.article.cl[cl]?_classPrivateFieldSet(this,_wordcount,_classPrivateFieldGet(this,_wordcount)+(txt.split(" ").length-1)):_classPrivateFieldSet(this,_wordcount,_classPrivateFieldGet(this,_wordcount)-(txt.split(" ").length-1));else if("el"==el)for(var _i3=0,_Object$keys3=Object.keys(cfg.wordCount.article[el]);_i3<_Object$keys3.length;_i3++)for(var txt,ell=_Object$keys3[_i3],elms=elm.getElementsByTagName(ell),i=0;i<elms.length;i++)txt=(txt=elms[i].textContent).replace(/\s+/g," "),1==cfg.wordCount.article.el[ell]?_classPrivateFieldSet(this,_wordcount,_classPrivateFieldGet(this,_wordcount)+(txt.split(" ").length-1)):_classPrivateFieldSet(this,_wordcount,_classPrivateFieldGet(this,_wordcount)-(txt.split(" ").length-1))}}var Constructor,protoProps,staticProps;return Constructor=wordcount,(protoProps=[{key:"getWordcount",value:function(){return _classPrivateFieldGet(this,_wordcount)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),wordcount}()},{}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_logModule2=(obj=require("./logModule.js"))&&obj.__esModule?obj:{default:obj};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}var _initTime=new WeakMap,_maxScroll=new WeakMap,_scrollPercentage=new WeakMap,_scrollCnt=new WeakMap,_trackElements=new WeakMap,_logData=new WeakMap,_state=new WeakMap,_setupTrackElements=new WeakSet,_calcScroll=new WeakSet,_startEngagement=new WeakSet,_stopEngagement=new WeakSet,_finalizeExitData=new WeakSet,_runDebug=new WeakSet;function _setupTrackElements2(queries){for(var _i=0,_Object$keys=Object.keys(queries);_i<_Object$keys.length;_i++){var key=_Object$keys[_i],elm=null;null!==(elm="document"===queries[key]?document.body:document.querySelector(queries[key]))&&(_classPrivateFieldGet(this,_trackElements)[key]={elm:elm,max:0,per:0,maxPer:0,top:elm.offsetTop,height:elm.offsetHeight,tInit:0,currTime:0,totalTime:0})}this.k5a.speaker.debugMode&&(console.log("Tracking these"),console.debug(_classPrivateFieldGet(this,_trackElements)))}function _calcScroll2(scrollIndent){if(!(scrollIndent!==_classPrivateFieldGet(this,_scrollCnt)&&0<scrollIndent)){for(var offset=window.pageYOffset+window.innerHeight,_i2=0,_Object$keys2=Object.keys(_classPrivateFieldGet(this,_trackElements));_i2<_Object$keys2.length;_i2++){var key=_Object$keys2[_i2];_classPrivateFieldGet(this,_trackElements)[key].top,_classPrivateFieldGet(this,_trackElements)[key].height;_classPrivateFieldGet(this,_trackElements)[key].top>=window.pageYOffset&&_classPrivateFieldGet(this,_trackElements)[key].top<=offset||_classPrivateFieldGet(this,_trackElements)[key].top<=offset&&_classPrivateFieldGet(this,_trackElements)[key].top+_classPrivateFieldGet(this,_trackElements)[key].height>=window.pageYOffset?0===_classPrivateFieldGet(this,_trackElements)[key].tInit?_classPrivateFieldGet(this,_trackElements)[key].tInit=(new Date).getTime():_classPrivateFieldGet(this,_trackElements)[key].currTime=((new Date).getTime()-_classPrivateFieldGet(this,_trackElements)[key].tInit)/1e3:0<_classPrivateFieldGet(this,_trackElements)[key].tInit&&(_classPrivateFieldGet(this,_trackElements)[key].totalTime+=((new Date).getTime()-_classPrivateFieldGet(this,_trackElements)[key].tInit)/1e3,_classPrivateFieldGet(this,_trackElements)[key].currTime=0,_classPrivateFieldGet(this,_trackElements)[key].tInit=0);var p=offset-_classPrivateFieldGet(this,_trackElements)[key].top,p=parseInt(p/_classPrivateFieldGet(this,_trackElements)[key].height*100);100<(p=p<0?0:p)&&(p=100),_classPrivateFieldGet(this,_trackElements)[key].per=p,_classPrivateFieldGet(this,_trackElements)[key].maxPer<p&&(_classPrivateFieldGet(this,_trackElements)[key].maxPer=p)}_classPrivateMethodGet(this,_runDebug,_runDebug2).call(this)}}function _startEngagement2(){_classPrivateMethodGet(this,_calcScroll,_calcScroll2).call(this,0),_classPrivateMethodGet(this,_runDebug,_runDebug2).call(this)}function _stopEngagement2(){for(var _i3=0,_Object$keys3=Object.keys(_classPrivateFieldGet(this,_trackElements));_i3<_Object$keys3.length;_i3++){var key=_Object$keys3[_i3];0<_classPrivateFieldGet(this,_trackElements)[key].tInit&&(_classPrivateFieldGet(this,_trackElements)[key].totalTime+=((new Date).getTime()-_classPrivateFieldGet(this,_trackElements)[key].tInit)/1e3,_classPrivateFieldGet(this,_trackElements)[key].tInit=0,_classPrivateFieldGet(this,_trackElements)[key].currTime=0)}_classPrivateMethodGet(this,_runDebug,_runDebug2).call(this)}function _finalizeExitData2(){for(var d=[],_i4=0,_Object$keys4=Object.keys(_classPrivateFieldGet(this,_trackElements));_i4<_Object$keys4.length;_i4++){var key=_Object$keys4[_i4];"page"!=key&&(0!==_classPrivateFieldGet(this,_trackElements)[key].tInit&&(_classPrivateFieldGet(this,_trackElements)[key].totalTime=((new Date).getTime()-_classPrivateFieldGet(this,_trackElements)[key].tInit)/1e3),0<_classPrivateFieldGet(this,_trackElements)[key].maxPer&&d.push(key+"|"+_classPrivateFieldGet(this,_trackElements)[key].totalTime.toFixed(1)+"|"+_classPrivateFieldGet(this,_trackElements)[key].maxPer+"|"+_classPrivateFieldGet(this,_trackElements)[key].per))}return d.join("|")}function _runDebug2(){if(!0===this.k5a.speaker.debugMode){var d=document.getElementById("engangementDebug");null===d&&((d=document.createElement("DIV")).id="engangementDebug",d.style="background:grey;color:white;padding:5px;position:fixed;top:10px;right:10px;min-width:300px;min-height:20px;font-size:12px;opacity:0.90;",document.body.appendChild(d));for(var html="",_i5=0,_Object$keys5=Object.keys(_classPrivateFieldGet(this,_trackElements));_i5<_Object$keys5.length;_i5++){var key=_Object$keys5[_i5];html+="name: <b>"+key+"</b>",html+=" current: <b>"+_classPrivateFieldGet(this,_trackElements)[key].per+"%</b>",html+=" max: <b>"+_classPrivateFieldGet(this,_trackElements)[key].maxPer+"%</b>",html+=" active: <b>"+_classPrivateFieldGet(this,_trackElements)[key].currTime.toFixed(1)+"s</b>",html+=" total: <b>"+_classPrivateFieldGet(this,_trackElements)[key].totalTime.toFixed(1)+"s</b><br>"}d.innerHTML=html}}exports.default=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(engagement,_logModule2.default);var _super=_createSuper(engagement);function engagement(_this){var config=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,engagement),_this=_super.call(this,_this),_runDebug.add(_assertThisInitialized(_this)),_finalizeExitData.add(_assertThisInitialized(_this)),_stopEngagement.add(_assertThisInitialized(_this)),_startEngagement.add(_assertThisInitialized(_this)),_calcScroll.add(_assertThisInitialized(_this)),_setupTrackElements.add(_assertThisInitialized(_this)),_initTime.set(_assertThisInitialized(_this),{writable:!0,value:0}),_maxScroll.set(_assertThisInitialized(_this),{writable:!0,value:0}),_scrollPercentage.set(_assertThisInitialized(_this),{writable:!0,value:0}),_scrollCnt.set(_assertThisInitialized(_this),{writable:!0,value:0}),_trackElements.set(_assertThisInitialized(_this),{writable:!0,value:{}}),_logData.set(_assertThisInitialized(_this),{writable:!0,value:null}),_state.set(_assertThisInitialized(_this),{writable:!0,value:"active"}),_classPrivateFieldSet(_assertThisInitialized(_this),_logData,_this.k5a.pageData.getLogData(["url","image","channel","type","section","title","wordcount","author","tag","cntTag","publishtime","modifiedtime","paywall"])),"object"===_typeof(config.elements)&&_this.addHook("ready",function(evt){_classPrivateMethodGet(this,_setupTrackElements,_setupTrackElements2).call(this,config.elements),_classPrivateMethodGet(this,_startEngagement,_startEngagement2).call(this)}.bind(_assertThisInitialized(_this))),_this.addHook("active",function(evt){_classPrivateFieldSet(this,_state,"active"),_classPrivateMethodGet(this,_startEngagement,_startEngagement2).call(this)}.bind(_assertThisInitialized(_this)),!0),_this.addHook("hidden",function(evt){_classPrivateMethodGet(this,_stopEngagement,_stopEngagement2).call(this),_classPrivateFieldSet(this,_state,"hidden")}.bind(_assertThisInitialized(_this)),!0),_classPrivateFieldSet(_assertThisInitialized(_this),_initTime,(new Date).getTime()),_this.addHook("scroll",function(evt){_classPrivateFieldSet(this,_scrollCnt,1+ +_classPrivateFieldGet(this,_scrollCnt)),setTimeout(_classPrivateMethodGet(this,_calcScroll,_calcScroll2).bind(this,_classPrivateFieldGet(this,_scrollCnt)),100)}.bind(_assertThisInitialized(_this)),!0),_this.addHook("exit",function(evt){_classPrivateFieldGet(this,_logData).tids=_classPrivateMethodGet(this,_finalizeExitData,_finalizeExitData2).call(this),void 0!==_classPrivateFieldGet(this,_trackElements).page&&(evt=_classPrivateFieldGet(this,_trackElements).page.totalTime,0<_classPrivateFieldGet(this,_trackElements).page.tInit&&(evt+=((new Date).getTime()-_classPrivateFieldGet(this,_trackElements).page.tInit)/1e3),86400<evt&&(evt=0),_classPrivateFieldGet(this,_logData).evt=evt.toFixed(1),_classPrivateFieldGet(this,_logData).eeh=_classPrivateFieldGet(this,_trackElements).page.per,_classPrivateFieldGet(this,_logData).ems=_classPrivateFieldGet(this,_trackElements).page.maxPer),this.k5a.logger.addData("exit",_classPrivateFieldGet(this,_logData))}.bind(_assertThisInitialized(_this))),_this.k5a.speaker.debugMode&&setInterval(function(){"active"==_classPrivateFieldGet(this,_state)&&(_classPrivateMethodGet(this,_calcScroll,_calcScroll2).call(this,0),_classPrivateMethodGet(this,_runDebug,_runDebug2).call(this))}.bind(_assertThisInitialized(_this)),100),_this}return engagement}()},{"./logModule.js":12}],12:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _pingData=new WeakMap;exports.default=function(){function logModule(k5a){var obj,key,value;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,logModule),value=null,(key="k5a")in(obj=this)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,_pingData.set(this,{writable:!0,value:{userActive:0,pings:[]}}),this.k5a=k5a}var Constructor,protoProps,staticProps;return Constructor=logModule,(protoProps=[{key:"addHook",value:function(hookName,callback){this.k5a.listener.addHook(hookName,callback,2<arguments.length&&void 0!==arguments[2]&&arguments[2])}},{key:"addUserActiveHook",value:function(callback,intervall,userActiveTime){this.k5a.listener.addUserActiveHook(callback,intervall,userActiveTime)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),logModule}()},{}],13:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _logModule2=_interopRequireDefault(require("./logModule.js")),_user=_interopRequireDefault(require("./util/user.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var call,self=_getPrototypeOf(Derived);return call=hasNativeReflectConstruct?(call=_getPrototypeOf(this).constructor,Reflect.construct(self,arguments,call)):self.apply(this,arguments),self=this,!(call=call)||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}var _logData=new WeakMap,_setupData=new WeakSet;function _setupData2(){_classPrivateFieldSet(this,_logData,this.k5a.pageData.getDefaultData());var u=new _user.default;_classPrivateFieldGet(this,_logData).uid=u.getId(),_classPrivateFieldGet(this,_logData).ns=u.isNewSession()?1:0}exports.default=function(){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(pageview,_logModule2.default);var _super=_createSuper(pageview);function pageview(_this){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,pageview),_this=_super.call(this,_this),_setupData.add(_assertThisInitialized(_this)),_logData.set(_assertThisInitialized(_this),{writable:!0,value:{}}),function(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}(_assertThisInitialized(_this),_setupData,_setupData2).call(_assertThisInitialized(_this)),_this.addHook("pageView",function(evt){this.k5a.logger.addData("pageView",_classPrivateFieldGet(this,_logData))}.bind(_assertThisInitialized(_this))),_this.addHook("spa",function(evt){this.k5a.pageData.reRead();var f,data=this.k5a.pageData.getDefaultData(),urlChanged=!1;for(f in data)_classPrivateFieldGet(this,_logData)[f]!==data[f]&&(_classPrivateFieldGet(this,_logData)[f]=data[f],"u"==f&&(urlChanged=!0));(!urlChanged||this.k5a.cfg&&this.k5a.cfg.spaHref)&&(_classPrivateFieldGet(this,_logData).u=location.href,this.k5a.pageData.setField("url",location.href)),this.k5a.logger.fireNow("pageView",_classPrivateFieldGet(this,_logData),"spa")}.bind(_assertThisInitialized(_this)),!0),_this}return pageview}()},{"./logModule.js":12,"./util/user.js":16}],14:[function(require,module,exports){"use strict";function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(o,F){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||F&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Map"===(n="Object"===n&&o.constructor?o.constructor.name:n)||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slotCfg=new WeakMap,_getSlot=new WeakSet,_get=new WeakSet,_getData=new WeakSet,_getSize=new WeakSet,_getUrl=new WeakSet,_autoSize=new WeakSet,_getSlotMains=new WeakSet,_autoPos=new WeakSet,_getElementPosition=new WeakSet,_getPos=new WeakSet;function _getSlot2(elm){if(!_classPrivateFieldGet(this,_slotCfg).slot)return!1;for(var safe=0;elm&&safe++<10;){if(_classPrivateFieldGet(this,_slotCfg).slot.cl)for(var i=0;i<_classPrivateFieldGet(this,_slotCfg).slot.cl.length;i++)if(elm.classList.contains(_classPrivateFieldGet(this,_slotCfg).slot.cl[i]))return elm;if(_classPrivateFieldGet(this,_slotCfg).slot.el)for(i=0;i<_classPrivateFieldGet(this,_slotCfg).slot.el.length;i++)if(elm.tagName.toLowerCase()==_classPrivateFieldGet(this,_slotCfg).slot.el[i].toLowerCase())return elm;if(!elm.parentNode||!elm.parentNode.hasAttribute)return!1;elm=elm.parentNode}return!1}function _get2(elm,atr){if(void 0===_classPrivateFieldGet(this,_slotCfg)[atr])return"";if(_classPrivateFieldGet(this,_slotCfg)[atr].cl)for(var i=0;i<_classPrivateFieldGet(this,_slotCfg)[atr].cl.length;i++)if((r=elm.getElementsByClassName(_classPrivateFieldGet(this,_slotCfg)[atr].cl[i]))&&0<r.length)return _classPrivateMethodGet(this,_getData,_getData2).call(this,atr,r[0]);if(_classPrivateFieldGet(this,_slotCfg)[atr].el)for(var r,i=0;i<_classPrivateFieldGet(this,_slotCfg)[atr].el.length;i++)if((r=elm.getElementsByTagName(_classPrivateFieldGet(this,_slotCfg)[atr].el[i]))&&0<r.length)return _classPrivateMethodGet(this,_getData,_getData2).call(this,atr,r[0]);return""}function _getData2(type,elm){var res=!1;switch(type){case"title":res=elm.textContent;break;case"image":res=elm.src}return!1!==res&&""!==res?res.trim():""}function _getSize2(elm){if(void 0!==_classPrivateFieldGet(this,_slotCfg).slot.ss&&"auto"==_classPrivateFieldGet(this,_slotCfg).slot.ss)return _classPrivateMethodGet(this,_autoSize,_autoSize2).call(this,elm)}function _getUrl2(elm){for(var safeIdx=0;"A"!=elm.tagName&&safeIdx++<10;){if(elm.hasAttribute("data-k5a-url"))return elm.hasAttribute("data-k5a-url");elm=elm.parentNode}return"A"==elm.tagName?elm.href:""}function _autoSize2(tmp){var w=tmp.clientWidth,tmp=tmp.parentNode.clientWidth;if(0<w&&0<tmp){tmp=w/tmp;return tmp<=.33?"small":tmp<=.5?"medium":tmp<=.75?"large":"big"}}function _getSlotMains2(elm){var topName=!1,containers=[];if(void 0!==_classPrivateFieldGet(this,_slotCfg).mains){for(var safeIdx=0;"BODY"!==elm.tagName&&safeIdx++<50;){for(var _i=0,_Object$keys=Object.keys(_classPrivateFieldGet(this,_slotCfg).mains);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];if(elm.hasAttribute("id")&&_classPrivateFieldGet(this,_slotCfg).mains[key].includes("#"+elm.id)){topName=key;break}if(elm.hasAttribute("class")){var _step,_iterator=_createForOfIteratorHelper(elm.className.split(" "));try{for(_iterator.s();!(_step=_iterator.n()).done;){var cl=_step.value;if(_classPrivateFieldGet(this,_slotCfg).mains[key].includes(cl)){topName=key;break}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}elm&&elm.parentNode&&(elm=elm.parentNode)}if(!1!==topName){var _step2,_iterator2=_createForOfIteratorHelper(_classPrivateFieldGet(this,_slotCfg).mains[topName]);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var parentElms,k=_step2.value;-1<k.indexOf("#")?containers.push(document.getElementById(k.substr(1))):(parentElms=document.getElementsByClassName(k),containers.push.apply(containers,_toConsumableArray(parentElms)))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}return!1===topName&&(topName="",containers.push(document.body)),{topName:topName,containers:containers}}function _autoPos2(elm){for(var childs,_classPrivateMethodGe=_classPrivateMethodGet(this,_getSlotMains,_getSlotMains2).call(this,elm),topName=_classPrivateMethodGe.topName,containers=_classPrivateMethodGe.containers,arts=[],i=0;i<containers.length;i++)void 0!==_classPrivateFieldGet(this,_slotCfg).slot&&(childs=[],void 0!==_classPrivateFieldGet(this,_slotCfg).slot.cl&&childs.push.apply(childs,_toConsumableArray(_classPrivateFieldGet(this,_slotCfg).slot.cl.map(function(cl){return"."+cl}))),void 0!==_classPrivateFieldGet(this,_slotCfg).slot.el&&childs.push.apply(childs,_toConsumableArray(_classPrivateFieldGet(this,_slotCfg).slot.el.map(function(el){return el}))),childs=containers[i].querySelectorAll(childs.join(childs)),arts.push.apply(arts,_toConsumableArray(childs)));for(var row=0,pos=0,cY=0,cH=0,cX=0,i=0;i<arts.length;i++){var g=_classPrivateMethodGet(this,_getElementPosition,_getElementPosition2).call(this,arts[i]);if((0==cY||cY+cH<g.top)&&(cY=g.top,cH=arts[i].offsetHeight,row++,pos=cX=0),cY==g.top&&arts[i].offsetHeight>cH&&(cH=arts[i].offsetHeight),(0==cX||cX<g.left)&&(cX=g.left,pos++),arts[i]==elm)return{row:row,pos:pos,position:(""!=topName?topName+"_":"")+_classPrivateFieldGet(this,_slotCfg).positionTemplate.replace("${row}",row).replace("${pos}",pos)}}return!1}function _getElementPosition2(clientRect){clientRect=clientRect.getBoundingClientRect();return{left:clientRect.left+document.body.scrollLeft,top:clientRect.top+document.body.scrollTop}}function _getPos2(elm){if(!_classPrivateFieldGet(this,_slotCfg).position)return"";for(var pos=[];"BODY"!=elm.tagName;){if(elm.hasAttribute("data-k5a-pos"))pos.push(elm.getAttribute("data-k5a-pos"));else for(var atrList={id:"id",tagName:"el",class:"cl"},_i2=0,_Object$keys2=Object.keys(_classPrivateFieldGet(this,_slotCfg).position);_i2<_Object$keys2.length;_i2++)for(var posKey=_Object$keys2[_i2],_i3=0,_Object$keys3=Object.keys(atrList);_i3<_Object$keys3.length;_i3++){var tv,atr=_Object$keys3[_i3];void 0===_classPrivateFieldGet(this,_slotCfg).position[posKey][atrList[atr]]||"string"==typeof(tv="tagName"==atr?elm.tagName.toLowerCase():elm.getAttribute(atr))&&""!==tv&&null!==tv.match("s*"+_classPrivateFieldGet(this,_slotCfg).position[posKey][atrList[atr]].join("|")+"s*")&&pos.push(posKey)}elm=elm.parentNode}return pos.reverse().join("_")}exports.default=function(){function slotInspector(){var slotCfg=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,slotInspector),_getPos.add(this),_getElementPosition.add(this),_autoPos.add(this),_getSlotMains.add(this),_autoSize.add(this),_getUrl.add(this),_getSize.add(this),_getData.add(this),_get.add(this),_getSlot.add(this),_slotCfg.set(this,{writable:!0,value:{}}),_classPrivateFieldSet(this,_slotCfg,slotCfg),void 0===_classPrivateFieldGet(this,_slotCfg).slotUrl&&(_classPrivateFieldGet(this,_slotCfg).slotUrl={el:["a"]})}var Constructor,protoProps,staticProps;return Constructor=slotInspector,(protoProps=[{key:"analyze",value:function(elm){var s=_classPrivateMethodGet(this,_getSlot,_getSlot2).call(this,elm),slotPos=!1,slotPos=!1!==s?_classPrivateMethodGet(this,_autoPos,_autoPos2).call(this,s):{position:_classPrivateMethodGet(this,_getPos,_getPos2).call(this,elm),row:0,pos:0};return{url:_classPrivateMethodGet(this,_getUrl,_getUrl2).call(this,elm),size:0!=s?_classPrivateMethodGet(this,_getSize,_getSize2).call(this,s):"",image:0!=s?_classPrivateMethodGet(this,_get,_get2).call(this,s,"image"):"",title:0!=s?_classPrivateMethodGet(this,_get,_get2).call(this,s,"title"):"",row:slotPos?slotPos.row:0,pos:slotPos?slotPos.pos:0,position:slotPos?slotPos.position:_classPrivateMethodGet(this,_getPos,_getPos2).call(this,elm)}}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),slotInspector}()},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_url=(obj=require("./../core/url.js"))&&obj.__esModule?obj:{default:obj};function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}var _storageName=new WeakMap,_storageMode=new WeakMap,_getData=new WeakSet,_saveData=new WeakSet,_getCookie=new WeakSet,_saveToCookie=new WeakSet,_setCookie=new WeakSet;function _getData2(){var data="local"==_classPrivateFieldGet(this,_storageMode)?localStorage.getItem(_classPrivateFieldGet(this,_storageName)):_classPrivateMethodGet(this,_getCookie,_getCookie2).call(this,_classPrivateFieldGet(this,_storageName));return null==data?{}:JSON.parse(data)}function _saveData2(json){json=JSON.stringify(json);"local"==_classPrivateFieldGet(this,_storageMode)?localStorage.setItem(_classPrivateFieldGet(this,_storageName),json):_classPrivateMethodGet(this,_saveToCookie,_saveToCookie2).call(this,json)}function _getCookie2(offset){var end=offset+"=";if(0<document.cookie.length){offset=document.cookie.indexOf(end);if(-1!=offset){offset+=end.length;end=document.cookie.indexOf(";",offset);return-1==end&&(end=document.cookie.length),unescape(document.cookie.substring(offset,end))}}return null}function _saveToCookie2(data){var d=new Date;d.setFullYear(d.getFullYear()+1);var u=new _url.default(location.href);_classPrivateMethodGet(this,_setCookie,_setCookie2).call(this,"_k5a",data,new Date(d),"/",u.domain,!1,!0)}function _setCookie2(name,value,expires,path,domain,curCookie,samesite){void 0===samesite&&(samesite="lax");curCookie=name+"="+escape(value)+(expires?"; expires="+expires.toGMTString():"")+(path?"; path="+path:"")+(domain?"; domain="+domain:"")+(samesite?"; samesite="+samesite:"")+(curCookie?"; secure":"");document.cookie=curCookie}exports.default=function(){function storage(){var storageName=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"k5a";!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,storage),_setCookie.add(this),_saveToCookie.add(this),_getCookie.add(this),_saveData.add(this),_getData.add(this),_storageName.set(this,{writable:!0,value:""}),_storageMode.set(this,{writable:!0,value:"localstorage"}),_classPrivateFieldSet(this,_storageName,storageName),_classPrivateFieldSet(this,_storageMode,"cookie")}var Constructor,protoProps,staticProps;return Constructor=storage,(protoProps=[{key:"get",value:function(){return _classPrivateMethodGet(this,_getData,_getData2).call(this)}},{key:"set",value:function(data){_classPrivateMethodGet(this,_saveData,_saveData2).call(this,data)}},{key:"getKey",value:function(keyName){var data=_classPrivateMethodGet(this,_getData,_getData2).call(this);return void 0!==data[keyName]?0<data[keyName][1]&&parseInt((new Date).getTime()/1e3)>data[keyName][1]?(delete data[keyName],_classPrivateMethodGet(this,_saveData,_saveData2).call(this,data),null):data[keyName][0]:null}},{key:"setKey",value:function(keyName,value){var ttl=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,data=_classPrivateMethodGet(this,_getData,_getData2).call(this);data[keyName]=[value,0<ttl?parseInt((new Date).getTime()/1e3)+ttl:0],_classPrivateMethodGet(this,_saveData,_saveData2).call(this,data)}},{key:"delKey",value:function(keyName){var data=_classPrivateMethodGet(this,_getData,_getData2).call(this);delete data[keyName],_classPrivateMethodGet(this,_saveData,_saveData2).call(this,data)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),storage}()},{"./../core/url.js":9}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_storage=(obj=require("./storage.js"))&&obj.__esModule?obj:{default:obj};function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}var _length=new WeakMap,_data=new WeakMap,_ttl=new WeakMap,_defaultSessionTTL=new WeakMap,_wasNewSession=new WeakMap,_UUID=new WeakSet;function _UUID2(){for(var chr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),radix=chr.length,uuid=[],i=0;i<_classPrivateFieldGet(this,_length);i++)uuid[i]=chr[0|Math.random()*radix];return uuid.join("")}exports.default=function(){function user(){var name=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"u",store=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,user),_UUID.add(this),_length.set(this,{writable:!0,value:16}),_data.set(this,{writable:!0,value:{}}),_ttl.set(this,{writable:!0,value:9e4}),_defaultSessionTTL.set(this,{writable:!0,value:1800}),_wasNewSession.set(this,{writable:!0,value:!1}),_classPrivateFieldSet(this,_length,store);store=new _storage.default;_classPrivateFieldSet(this,_data,store.getKey(name)),null!==_classPrivateFieldGet(this,_data)?(_classPrivateFieldSet(this,_wasNewSession,_classPrivateFieldGet(this,_data).ts+_classPrivateFieldGet(this,_defaultSessionTTL)<parseInt((new Date).getTime()/1e3)),_classPrivateFieldGet(this,_data).ts=parseInt((new Date).getTime()/1e3)):(_classPrivateFieldSet(this,_wasNewSession,!0),_classPrivateFieldSet(this,_data,{uid:function(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}(this,_UUID,_UUID2).call(this),ts:parseInt((new Date).getTime()/1e3)})),store.setKey(name,_classPrivateFieldGet(this,_data),_classPrivateFieldGet(this,_ttl))}var Constructor,protoProps,staticProps;return Constructor=user,(protoProps=[{key:"getId",value:function(){return _classPrivateFieldGet(this,_data).uid}},{key:"getLastSeen",value:function(){return _classPrivateFieldGet(this,_data).ts}},{key:"isNewSession",value:function(){return _classPrivateFieldGet(this,_wasNewSession)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),user}()},{"./storage.js":15}],17:[function(require,module,exports){"use strict";function ownKeys(object,enumerableOnly){var symbols,keys=Object.keys(object);return Object.getOwnPropertySymbols&&(symbols=Object.getOwnPropertySymbols(object),enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)),keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){!function(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value}(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _k5a=new WeakMap,_data=new WeakMap,_hookMap=new WeakMap,_compileLogdata=new WeakSet;function _compileLogdata2(data){for(var k in data)data[k]instanceof Array&&(data[k]=data[k].join("|"));var logType="";void 0!==data.l&&(logType="&l="+data.l,delete data.l);var qsp=Object.keys(data).map(function(key){return key+"="+encodeURIComponent(data[key])}).join("&");return _classPrivateFieldGet(this,_k5a).k5aServer+"?i="+_classPrivateFieldGet(this,_k5a).cfg.installationId+logType+"&"+qsp}exports.default=function(){function logger(k5a){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,logger),_compileLogdata.add(this),_k5a.set(this,{writable:!0,value:null}),_data.set(this,{writable:!0,value:{}}),_hookMap.set(this,{writable:!0,value:{pageView:"p",click:"c",exit:"e",activity:"a"}}),_classPrivateFieldSet(this,_k5a,k5a)}var Constructor,protoProps,staticProps;return Constructor=logger,(protoProps=[{key:"fireNow",value:function(hookName,data){var eventName=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"code";this.addData(hookName,data),this.fire(hookName,eventName)}},{key:"addData",value:function(hookName,data){_classPrivateFieldGet(this,_k5a).speaker.say("adding: "+hookName),_classPrivateFieldGet(this,_k5a).speaker.dump(data),void 0===_classPrivateFieldGet(this,_data)[hookName]?_classPrivateFieldGet(this,_data)[hookName]=data:_classPrivateFieldGet(this,_data)[hookName]=_objectSpread(_objectSpread({},_classPrivateFieldGet(this,_data)[hookName]),data)}},{key:"fire",value:function(hookName,eventName){var data;void 0!==_classPrivateFieldGet(this,_data)[hookName]&&(data=_classPrivateFieldGet(this,_data)[hookName],delete _classPrivateFieldGet(this,_data)[hookName],void 0!==_classPrivateFieldGet(this,_hookMap)[hookName]&&(data.l=_classPrivateFieldGet(this,_hookMap)[hookName]),data._l=eventName,this.doLog(data))}},{key:"doLog",value:function(logUrl){logUrl=function(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}(this,_compileLogdata,_compileLogdata2).call(this,logUrl);_classPrivateFieldGet(this,_k5a).speaker.say(logUrl);try{if(navigator&&navigator.sendBeacon)return navigator.sendBeacon(logUrl+"&_m=b",{});var t=(new Date).getTime();return(new Image).src=logUrl+"&_m=i&_r="+t,!0}catch(e){console.error(e.toString())}}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),logger}()},{}],18:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _classPrivateFieldGet(receiver,privateMap){return function(receiver,descriptor){if(descriptor.get)return descriptor.get.call(receiver);return descriptor.value}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"get"))}function _classPrivateFieldSet(receiver,privateMap,value){return function(receiver,descriptor,value){if(descriptor.set)descriptor.set.call(receiver,value);else{if(!descriptor.writable)throw new TypeError("attempted to set read only private field");descriptor.value=value}}(receiver,_classExtractFieldDescriptor(receiver,privateMap,"set"),value),value}function _classExtractFieldDescriptor(receiver,privateMap,action){if(!privateMap.has(receiver))throw new TypeError("attempted to "+action+" private field on non-instance");return privateMap.get(receiver)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _debugMode=new WeakMap,_devMode=new WeakMap,_debugUrl=new WeakMap,_log=new WeakSet,_callerLocation=new WeakSet,_stackTracer=new WeakSet;function _log2(msg){console.log(msg),!1!==_classPrivateFieldGet(this,_debugUrl)&&((new Image).src=_classPrivateFieldGet(this,_debugUrl)+"?"+msg)}function _callerLocation2(){if(!_classPrivateFieldGet(this,_devMode))return"";var l=_classPrivateMethodGet(this,_stackTracer,_stackTracer2).call(this);return null!==l&&2<=l.length?l.match(/\(([^\)]+)\)/)[1]:""}function _stackTracer2(){var full=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!_classPrivateFieldGet(this,_devMode))return"";for(var d=(new Error).stack.split("\n"),result=[],i=1;i<d.length;i++)if(-1==d[i].indexOf("speaker.js")){if(!full)return d[i];result.push(d[i])}return result.join("\n")}exports.default=function(){function speaker(){var debugMode=0<arguments.length&&void 0!==arguments[0]&&arguments[0],devMode=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,speaker),_stackTracer.add(this),_callerLocation.add(this),_log.add(this),_debugMode.set(this,{writable:!0,value:!1}),_devMode.set(this,{writable:!0,value:!1}),_debugUrl.set(this,{writable:!0,value:!1}),_classPrivateFieldSet(this,_devMode,devMode),this.debugMode=debugMode}var Constructor,protoProps,staticProps;return Constructor=speaker,(protoProps=[{key:"debugUrl",set:function(url){_classPrivateFieldSet(this,_debugUrl,url=void 0===url?!1:url)}},{key:"debugMode",get:function(){return _classPrivateFieldGet(this,_debugMode)},set:function(debug){_classPrivateFieldSet(this,_debugMode,debug=void 0===debug?!1:debug),debug&&this.say("Debug mode is on!")}},{key:"say",value:function(msg){var l,fullStack=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classPrivateFieldGet(this,_debugMode)&&(fullStack?(l=_classPrivateMethodGet(this,_stackTracer,_stackTracer2).call(this),_classPrivateMethodGet(this,_log,_log2).call(this,msg+(""!=l?"\n"+l:""))):(l=_classPrivateMethodGet(this,_callerLocation,_callerLocation2).call(this),_classPrivateMethodGet(this,_log,_log2).call(this,msg+(""!=l?l.padStart(120-msg.length," "):""))))}},{key:"dump",value:function(data){var l,fullStack=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classPrivateFieldGet(this,_debugMode)&&(fullStack?(l=_classPrivateMethodGet(this,_stackTracer,_stackTracer2).call(this),console.debug(data),console.log("Dump at "+l)):(l=_classPrivateMethodGet(this,_callerLocation,_callerLocation2).call(this),console.debug(data),console.log("Dump at "+l)))}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),speaker}()},{}]},{},[1]);