define(["modules/id.core"],function(e){"use strict";e.utils.log("loading id.clickTr.js");var t=function(){this.conf={CONTAINER_IDENTIFIER_DATA_ATTR:"data-id-container-ct",ELEMENT_IDENTIFIER_DATA_ATTR:"data-id-ct-closest"};var t=this;this.init=function(){this.setClickHandler()},this.setClickHandler=function(){e.dom.bind(document.body,"click auxclick",function(e){("click"===e.type||"click"===e.originalEvent.type||"auxclick"===e.originalEvent.type&&2===e.originalEvent.which)&&(e.isTrusted===!0||void 0===e.isTrusted&&void 0===e._lpEvent)&&(t.trackContainerClick(e),t.trackElementClick(e))})},this.trackContainerClick=function(i){var n=i.target,s=this.getClosestClickTrackConf(n,t.conf.CONTAINER_IDENTIFIER_DATA_ATTR);s&&s.containerId&&n.tagName&&"a"===n.tagName.toLowerCase()&&e.event.publish(e.event.constants.CUA.TRACK,[{event:"INTERACTION",index:"user-interaction",type:"container-click",payload:{region:"container-click",action:s.containerId,description:n.className||""}}])},this.trackElementClick=function(t){var i=t.target,n=this.getClosestClickTrackConf(i,this.conf.ELEMENT_IDENTIFIER_DATA_ATTR);n&&e.event.publish(e.event.constants.CUA.TRACK,[{event:"INTERACTION",index:"user-interaction",type:"container-click",payload:{region:n.region,action:n.action,description:""}}])},this.getClosestClickTrackConf=function(t,i){var n,s;if(t&&i){n=e.dom.closest(i,e.dom.$(t));try{s=JSON.parse(n&&n[0]&&n[0].getAttribute(i))}catch(o){e.utils.log("ContainerClickTracking failed! Please make sure to have a valid json config in the dataAttribute")}}return s}};return t});