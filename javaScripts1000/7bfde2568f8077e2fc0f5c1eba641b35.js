KCMS.registerNamespace("KCMS.Captcha"),KCMS.Captcha={Refresh:function(e){var t=$(".google-captcha:not(.ignore-recaptcha-token .google-captcha)",document).parents("form");KCMS.Captcha.RefreshBy(t,e)},RefreshBy:function(e,t){var a=[];$(".google-captcha",e).each((function(){var e=$(this),t=$(".captcha-group",e),c=t.data("action");c=c||"default",a.push({action:c,scope:t})}));var c=a.reduce((function(e,t){return e[t.action]=e[t.action]||[],e[t.action].push(t.scope),e}),{}),n=Object.keys(c).map((function(e){return{action:e,scope:c[e]}}));if(n.length>0)for(var o=0;o<n.length;o++)KCMS.Captcha.GetToken(n[o].scope,n[o].action,t);else void 0!==t&&"function"==typeof t&&t instanceof Function&&t()},GetToken:function(e,t,a){e=e||$(document),t=t&&"default"!==t?{action:t}:{},"undefined"!=typeof grecaptcha&&null!==grecaptcha?grecaptcha.execute(workContext.GoogleCaptcha.SiteKey,t).then((function(t){$.each(e,(function(e,a){$(a).find(".google-recaptcha-token").val(t)})),void 0!==a&&"function"==typeof a&&a instanceof Function&&a()})):void 0!==a&&"function"==typeof a&&a instanceof Function&&a()},GoogleCaptcha:function(){var e=!1;e||(e=!0,"undefined"!=typeof grecaptcha&&null!==grecaptcha&&grecaptcha.ready((function(){KCMS.Captcha.Refresh()})),setInterval(KCMS.Captcha.Refresh,workContext.GoogleCaptcha.Expired))}};