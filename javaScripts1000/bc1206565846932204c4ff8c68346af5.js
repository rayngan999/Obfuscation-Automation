(window.webpackJsonppageos=window.webpackJsonppageos||[]).push([[6],{"2+si":function(i,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return p}));var o=t("lwsE"),n=t.n(o),s=t("W8MJ"),l=t.n(s),r=t("YfMo"),a=t("Am97"),c=t("CtoA"),d=t("o3b6"),h=t("OqRl"),p=function(){function i(e){var t=this;n()(this,i);var o=e.playlistId,s=e.precontentUrl;e.stickySize&&(e.size=e.stickySize),e.stickyPosition&&(e.location=e.stickyPosition),this.playerId="tyche_trendi_video",this.locationKey=window.ramp.isMobile?"mobileLocation":"desktopLocation",this.adUnitType="trendi_video",this.validRules=this.checkValidRules(e),this.validRules&&(this.rules=e,this.boltConfig=Object(a.f)(e.content,o,s),this.playerType="ads_only"===this.rules.content?"precontent":"playlist",this.device=window.ramp.settings.device,this.size=this.rules.size["tablet"===this.device?"desktop":this.device],this.rules.embedSize&&(this.embedSize=this.rules.embedSize["tablet"===this.device?"desktop":this.device]),this.setBoltEvents(),this.isShowing=!1,this.isDocked=!1,this.mobileLocation=this.rules.mobileLocation,this.topSelector=this.rules.selector,"top"===this.mobileLocation&&window.ramp.isMobile&&(this.topMobilePlacementEnabled=!0,this.topMobilePlacementHandler=new c.a,this.dock=this.dock.bind(this),this.topMobilePlacementHandler.init=this.topMobilePlacementHandler.init.bind(this)),this.containerDiv=this.buildContainer(),this.closeBtnClass="pw-close-btn",window.ramp.showCornerVideo=this.show.bind(this),window.ramp.closeCornerVideo=this.close.bind(this),e.show=this.show.bind(this),e.close=this.close.bind(this),e.destroyUnit=this.destroyUnit.bind(this),window.PageOS.BUS.on("bottom_rail_loaded",(function(){t.isDocked&&"bottom"===t.rules.location.y&&!t.topMobilePlacementEnabled&&t.dock()}),!1))}return l()(i,[{key:"placeScript",value:function(){null!==this.script&&(this.containerDiv.appendChild(this.script),this.script=null)}},{key:"init",value:function(){if(this.rules.loaded=!0,this.validRules){var i=this.getBuildScript();if(this.script=i,i.id="tyche_trendi_video_script",Object(a.h)(this.device,this.size),"corner"===this.rules[this.locationKey])this.placeScript(),document.body.appendChild(this.containerDiv);else if("in_article"===this.rules[this.locationKey]){(new h.a).init(this)}else if("sidebar"===this.rules[this.locationKey]){(new d.a).init(this)}else"top"===this.rules[this.locationKey]&&this.topMobilePlacementHandler.init()}}},{key:"getBuildScript",value:function(){var i={boltConfig:this.boltConfig,id:this.playerId,onReady:"window.ramp.handleBoltEvents.trendiVideo",playerType:this.playerType,adUnitType:this.adUnitType};return!0===this.rules.noPrerollHide&&(i.noPrerollHide=this.rules.noPrerollHide),void 0!==this.rules.prerollAdAmt&&(i.prerollAdAmt=this.rules.prerollAdAmt),this.rules.showOnComplete&&(i.showOnComplete=this.rules.showOnComplete),Object(a.b)(i)}},{key:"buildContainer",value:function(){if(document.getElementById("tyche_trendi_video_container"))return document.getElementById("tyche_trendi_video_container");var i=document.createElement("div");return i.id="tyche_trendi_video_container",this.topMobilePlacementEnabled||(i.style.height="".concat(this.size[1],"px"),i.style.width="".concat(this.size[0],"px"),i.style.visibility="hidden",i.style.opacity="0"),"corner"===this.rules[this.locationKey]&&(i.style.position="fixed",i.style.right="0",i.style.bottom="0"),i}},{key:"dock",value:function(){if(!this.isInContent||!0===this.wasViewed)if(this.topMobilePlacementEnabled)this.topMobilePlacementHandler.dockVideo();else{this.isDocked=!0,!this.adIsPlaying&&Object(a.a)(this.containerDiv,window.ramp.closeCornerVideo,this.closeBtnClass);var i={player:this.containerDiv,location:"".concat(this.rules.location.x,"-").concat(this.rules.location.y),stickyH:this.size[1],stickyW:this.size[0]};Object(a.e)(i)}}},{key:"close",value:function(){if("corner"===this.rules[this.locationKey]&&window.Bolt&&window.Bolt.removeVideo(this.playerId,!0),this.topMobilePlacementEnabled)this.topMobilePlacementHandler.undockVideo();else{if("function"==typeof this.undock)return this.undock();this.isShowing=!1,window.Bolt&&window.Bolt.removeVideo(this.playerId),this.containerDiv.remove()}}},{key:"show",value:function(){this.isShowing||!this.validRules||window.ramp.takeOverActive||(this.isShowing=!this.isShowing,this.isDocked||"corner"!==this.rules[this.locationKey]||(this.isDocked=!0,this.dock()),r.h.info("Show Corner Video"),null!==document.getElementById("tyche_trendi_video_script")?(this.containerDiv.style.visibility="visible",this.containerDiv.style.opacity="1"):this.init())}},{key:"handleCloseButton",value:function(){var i=this;Object(a.a)(this.containerDiv,(function(){window.Bolt.closeButtonClicked&&window.Bolt.closeButtonClicked(i.playerId),window.Bolt.pauseMedia(i.playerId),i.observer&&i.observer.unobserve(i.observedElement),window.ramp.closeCornerVideo()}),this.closeBtnClass)}},{key:"destroyUnit",value:function(){r.h.info("Close Trendi Native Video"),window.Bolt.removeVideo(this.playerId,!0),this.observer&&this.observer.unobserve(this.observedElement),this.containerDiv.remove(),this.anchorDiv&&this.anchorDiv.remove(),this.topContainerDiv&&this.topContainerDiv.remove(),this.playerContainerDiv&&this.playerContainerDiv.remove(),delete window.ramp.settings.slots.trendi_video}},{key:"setBoltEvents",value:function(){var i=this,e=this;window.ramp.handleBoltEvents=window.ramp.handleBoltEvents||{},window.ramp.handleBoltEvents.trendiVideo=function(){window.Bolt.playMedia(i.playerId),window.Bolt.on(i.playerId,window.Bolt.BOLT_AD_STARTED,(function(){i.adIsPlaying=!0,i.show(),Object(a.d)()})),window.Bolt.on(i.playerId,window.Bolt.BOLT_CONTENT_STARTED,(function(){e.show(),i.adIsPlaying=!1,e.isDocked?"sidebar"!==e.rules.location.y&&e.handleCloseButton():e.isTopDocked&&e.handleCloseButton()})),window.Bolt.on(i.playerId,window.Bolt.BOLT_AD_COMPLETE,(function(){i.adIsPlaying=!1,i.isDocked&&"sidebar"!==i.rules.location.y&&i.handleCloseButton()})),window.Bolt.on(i.playerId,window.Bolt.BOLT_AD_ERROR,(function(){(i.rules.noPrerollHide||"ads_only"===i.rules.content)&&(i.adIsPlaying=!1,i.isShowing=!0,i.close())})),"precontent"===i.playerType&&window.Bolt.on(i.playerId,window.Bolt.BOLT_AD_SESSION_COMPLETE,(function(){i.destroyUnit()}))}}},{key:"checkValidRules",value:function(i){var e=window.ramp.settings.isMobile?"mobile":"desktop";return void 0===i.playlistId&&void 0===i.precontentUrl?(r.h.info("Video needs playlist or precontent URL"),!1):void 0!==i.size&&void 0!==i.size[e]||(r.h.info("Video missing size rule"),!1)}}]),i}()},CtoA:function(i,e,t){"use strict";t.d(e,"a",(function(){return h}));var o=t("pVnL"),n=t.n(o),s=t("lwsE"),l=t.n(s),r=t("W8MJ"),a=t.n(r),c=t("YfMo"),d=t("Am97"),h=function(){function i(){l()(this,i)}return a()(i,[{key:"init",value:function(){var i=this.topMobilePlacementHandler;if(i.dockVideo=i.dockVideo.bind(this),i.undockVideo=i.undockVideo.bind(this),this.topSelectorElement=document.querySelector(this.topSelector),null!==this.topSelectorElement){var e=window.innerWidth;this.initialH=e/(16/9),this.initialW=e,this.closeBtnClass="pw-close-btn-top",this.topContainerDiv=document.createElement("div"),this.topContainerDiv.id="tyche_trendi_parent_container",n()(this.topContainerDiv.style,{height:"".concat(e/(16/9),"px"),"background-color":"#000000",width:"100vw","margin-left":"calc(-50vw + 50%)"}),this.playerContainerDiv=document.createElement("div"),this.playerContainerDiv.style.backgroundColor="rgba(0, 0, 0, 0.9)",this.playerContainerDiv.style.width="100%",this.containerDiv.style.margin="auto",this.topContainerDiv.appendChild(this.playerContainerDiv),this.playerContainerDiv.appendChild(this.containerDiv),this.topSelectorElement.insertAdjacentElement(this.rules.embedPosition,this.topContainerDiv),this.observer=Object(d.g)(this.topSelectorElement,i.undockVideo.bind(this),this.dock.bind(this),this,0)}else c.h.error("No element found for selector: ".concat(this.topSelector,"."))}},{key:"dockVideo",value:function(){var i=this;if(this.placeScript&&this.placeScript(),this.isTopDocked=!0,!this.adIsPlaying)Object(d.a)(this.containerDiv,(function(){window.Bolt.closeButtonClicked&&window.Bolt.closeButtonClicked(i.playerId),window.Bolt.pauseMedia(i.playerId),i.observer&&i.observer.unobserve(i.observedElement),i.topMobilePlacementHandler.undockVideo()}),this.closeBtnClass);var e="tablet"===this.device?"desktop":this.device,t=this.rules?this.rules.size[e]:this.size;window.Bolt&&window.Bolt.resizeVideo(this.playerId,"".concat(this.size[0],"px"),"".concat(this.size[1],"px")),Object(d.e)({player:this.playerContainerDiv,location:"top",stickyH:t[1],stickyW:t[0]})}},{key:"undockVideo",value:function(){this.placeScript&&this.placeScript();var i="".concat(this.initialW,"px"),e="".concat(this.initialH,"px");this.isTopDocked=!1,window.Bolt&&window.Bolt.resizeVideo(this.playerId,i,e),Object(d.j)(this.playerContainerDiv,"mobileTop"),this.containerDiv.style.height=e,this.containerDiv.style.width=i,this.containerDiv.style.maxHeight=e,this.containerDiv.style.maxWidth=i}}]),i}()},OqRl:function(i,e,t){"use strict";t.d(e,"a",(function(){return c}));var o=t("lwsE"),n=t.n(o),s=t("W8MJ"),l=t.n(s),r=t("Am97"),a=t("YfMo"),c=function(){function i(){n()(this,i)}return l()(i,[{key:"init",value:function(i){if(i.rules.location.x||"top"!==i.rules.location.y||"desktop"!==i.device){i.dock=this.dock.bind(i),i.undock=this.undock.bind(i);var e=document.querySelector(i.rules.paragraphContainer);if(null!==e){if(!0===i.rules.clearContentArea){var t=window.ramp.settings,o=e.querySelectorAll(t.isMobile?"[data-pw-mobi]":"[data-pw-desk]");[].forEach.call(o,(function(i){void 0!==t.slots[i.id]&&void 0!==t.slots[i.id].slot&&window.googletag.cmd.push((function(){window.googletag.destroySlots([t.slots[i.id].slot]),delete t.slots[i.id]})),i.parentNode.removeChild(i)}))}var n=e.querySelectorAll(i.rules.paragraphRecognition);if(0!==n.length){i.isDocked=!1,i.isInContent=!0;var s=document.createElement("div");if(s.id="tyche_trendi_parent_container","responsive"===i.embedSize?(s.style.width="100%",s.style.position="relative",s.style.paddingTop="56.25%",s.style.marginTop="-56.25%",s.style.marginBottom="56.25%",i.containerDiv.style.maxWidth="100%",i.containerDiv.style.position="absolute"):(s.style.width="".concat(i.embedSize[0],"px"),s.style.height="".concat(i.embedSize[1],"px"),s.style.margin="0 auto"),i.containerDiv.style.width="100%",i.containerDiv.style.height="100%",i.anchorDiv=s,s.appendChild(i.containerDiv),0===i.rules.insertInto)n[0].insertAdjacentElement("beforebegin",i.anchorDiv);else try{n[i.rules.insertInto-1].insertAdjacentElement(i.rules.embedPosition||"afterend",i.anchorDiv)}catch(e){return void a.a.error("No selector found",{matches:n.length,insertLocation:i.rules.insertInto})}"top"===i.rules.location.y&&(i.closeBtnClass="pw-close-btn-top"),i.alterFonts&&i.alterFonts(i.anchorDiv.getBoundingClientRect().width);var l="responsive"===i.embedSize?0:void 0;i.observer=Object(r.g)(i.anchorDiv,this.undock.bind(i),this.dock.bind(i),i,l)}else a.a.error("No selector found",{paragraphRecognition:i.rules.paragraphRecognition})}else a.a.error("No container found",{paragraphContainer:i.rules.paragraphContainer})}}},{key:"dock",value:function(){var i=this;if(Object(r.c)(this),!0===this.wasViewed&&!0===this.rules.sticky){this.isDocked=!0,this.placeScript&&this.placeScript(),this.adIsPlaying||!1===this.slideShowStarted||Object(r.a)(this.containerDiv,(function(){window.Bolt.closeButtonClicked&&window.Bolt.closeButtonClicked(i.playerId),"mrss"!==i.rules.content&&window.Bolt.pauseMedia(i.playerId),i.observer&&i.observer.unobserve(i.observedElement),i.undock()}),this.closeBtnClass),this.containerDiv.style.height="100%",this.containerDiv.style.backgroundColor="rgba(0, 0, 0, 0.9)","responsive"===this.embedSize&&window.Bolt&&window.Bolt.resizeVideo(this.playerId,"".concat(this.size[0],"px"),"".concat(this.size[1],"px"));var e=this.rules.location.x?"".concat(this.rules.location.x,"-").concat(this.rules.location.y):this.rules.location.y,t={player:this.containerDiv,location:e,stickyH:this.size[1],stickyW:this.size[0]};this.alterFonts&&this.alterFonts(this.size[0]),Object(r.e)(t)}}},{key:"undock",value:function(){if(this.wasViewed=!0,this.placeScript&&this.placeScript(),!1!==this.isDocked){this.isDocked=!1,this.containerDiv.classList.remove("is-docked"),Object(r.d)(),this.containerDiv.removeAttribute("style"),this.containerDiv.style.height="100%",this.containerDiv.style.width="100%";var i=this.anchorDiv.getBoundingClientRect().width,e=9*i/16;this.alterFonts&&this.alterFonts(i),"responsive"===this.embedSize&&(window.Bolt&&window.Bolt.resizeVideo(this.playerId,"".concat(i,"px"),"".concat(e,"px")),this.containerDiv.style.maxWidth="100%",this.containerDiv.style.position="absolute")}}}]),i}()},o3b6:function(i,e,t){"use strict";t.d(e,"a",(function(){return a}));var o=t("lwsE"),n=t.n(o),s=t("W8MJ"),l=t.n(s),r=t("Am97"),a=function(){function i(){n()(this,i)}return l()(i,[{key:"init",value:function(i){i.dock=this.dock.bind(i),i.undock=this.undock.bind(i);var e=document.querySelector(i.rules.selector);if(e){i.isDocked=!1,i.isInContent=!0;var t=document.createElement("div");t.id="tyche_trendi_parent_container","responsive"===i.embedSize?(t.style.width="100%",t.style.position="relative",t.style.paddingTop="56.25%",t.style.marginTop="-56.25%",t.style.marginBottom="56.25%",i.containerDiv.style.maxWidth="100%",i.containerDiv.style.position="absolute"):(t.style.width="".concat(i.embedSize[0],"px"),t.style.height="".concat(i.embedSize[1],"px"),t.style.margin="0 auto"),i.containerDiv.style.width="100%",i.containerDiv.style.height="100%",i.anchorDiv=t,t.appendChild(i.containerDiv),e.insertAdjacentElement(i.rules.embedPosition,i.anchorDiv);var o="responsive"===i.embedSize?0:void 0;i.observer=Object(r.g)(i.anchorDiv,this.undock.bind(i),this.dock.bind(i),i,o)}}},{key:"dock",value:function(){var i=this;if(Object(r.c)(this),!0===this.wasViewed&&!0===this.rules.sticky){if(this.isDocked=!0,this.placeScript&&this.placeScript(),"sidebar"===this.rules.location.y){var e=this.anchorDiv.getBoundingClientRect();if(e.top>0)return;var t={player:this.containerDiv,location:"sidebar",stickyH:e.height,stickyW:e.width};return this.rules.navHeight&&(t.navHeight=this.rules.navHeight),void Object(r.e)(t)}"responsive"===this.embedSize&&window.Bolt&&window.Bolt.resizeVideo(this.playerId,"".concat(this.size[0],"px"),"".concat(this.size[1],"px")),!this.adIsPlaying&&Object(r.a)(this.containerDiv,(function(){window.Bolt.closeButtonClicked&&window.Bolt.closeButtonClicked(i.playerId),window.Bolt.pauseMedia(i.playerId),i.observer&&i.observer.unobserve(i.observedElement),i.undock()}),this.closeBtnClass);var o={player:this.containerDiv,location:"".concat(this.rules.location.x,"-").concat(this.rules.location.y),stickyH:this.size[1],stickyW:this.size[0]};Object(r.e)(o)}}},{key:"undock",value:function(){this.wasViewed=!0,this.placeScript&&this.placeScript(),!1!==this.isDocked&&(this.isDocked=!1,Object(r.j)(this.containerDiv),"responsive"===this.embedSize&&(this.containerDiv.style.position="absolute"))}}]),i}()}}]);