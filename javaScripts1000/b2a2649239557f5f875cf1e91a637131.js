var embeddedOverlay=function(t){var o,d;function a(){o.modal.querySelector("iframe").setAttribute("src","about:blank")}function n(){if(!e){window.addEventListener("message",function(e){try{var t=JSON.parse(e.data);t.hasOwnProperty("auth")&&"success"===t.auth&&window.location.reload(!0)}catch(e){}},!1);var e=!0}if(!t){window.addEventListener("message",function(e){try{var t=JSON.parse(e.data);t.hasOwnProperty("breakOut")&&window.open(t.breakOut)}catch(e){}},!1);var t=!0}}return{init:function(){var e=t("#nav-login a, #update-account");e.length&&(function(){if(!d){var e=t('<div id="js-embedded-overlay" class="iframe-wrap animated animated-modal">\t\t\t<div class="modal-content container embedded-overlay">\t\t\t\t<div class="btn-close-modal close-modal">Close modal</div>\t\t\t\t<iframe src="about:blank" title="embedded-overlay" />\t\t\t</div>\t\t</div>');d=e.find("iframe")[0],t("body").append(e),o=new AnimatedModal({afterClose:a,animatedIn:"slideInUp",animatedOut:"slideOutDown",color:"#fff",modalTarget:"js-embedded-overlay"})}}(),n(),e.on("click",function(e){e.preventDefault();var t="undefined"!=typeof App?new Spinner(App.options.spin).spin():new Spinner({className:"spinner",lines:12,length:5,opacity:.5,width:3,radius:7,color:"#4b4b4b",speed:1,trail:50,shadow:!1}).spin();o.modal.appendChild(t.el),d.onload=function(){t.stop()};var a=this.getAttribute("href"),n="/srcUrl/"+window.encodeURIComponent(window.btoa(window.location.hostname+window.location.pathname.replace(/\/$/,"")));d.setAttribute("src",a+n),o.open()}))}}}(jQuery);jQuery(document).ready(function(){embeddedOverlay.init()});