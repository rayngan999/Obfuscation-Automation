(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{54:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return v}));var i=t(15),o=t(3),a=t(2),r=t(0);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,n){return(s=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function c(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=p(e);if(n){var o=p(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return u(this,t)}}function u(e,n){return!n||"object"!==l(n)&&"function"!=typeof n?f(e):n}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var w=new a.a("DISPLAY-BACKFILL"),v=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&s(e,n)}(l,e);var n,t,i,a=c(l);function l(){var e;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,l),y(f(e=a.call(this)),"handleInterval",(function(){var n=f(e);n.interval||(n.interval=setInterval((function(){n.duration-=1,0===n.duration?n.adEnd():(e.duration=n.duration,n._dispatchEvent(o.a.Media.Event.TIME_UPDATE,n.duration))}),1e3))})),y(f(e),"adEnd",(function(){var n=f(e);n.duration=0,n.remove(),n._dispatchEvent(o.a.Media.Event.ENDED),window.BoltAdManager._dispatchEvent(o.a.Media.Event.ENDED),w.info("Display backfill ad ended")})),e.duration=15,w.info("Display backfill instantiated"),e.bindListeners(),e}return n=l,(t=[{key:"bindListeners",value:function(){var e=this;e.resizeCb=e.resizeCb.bind(e),window.addEventListener("resize",e.resizeCb)}},{key:"getDuration",value:function(){return this.duration}},{key:"createBackground",value:function(){var e=document.createElement("div");return e.classList.add("display-backfill-bg"),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="9",e.style.backgroundColor="#000",document.body.appendChild(e),e}},{key:"removeBackground",value:function(e){(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e),this.backgroundDiv=null}},{key:"resizeCb",value:function(){if(void 0!==this.size){var e=this.size[0],n=this.size[1];if(window.innerWidth<e||window.innerHeight<n)w.warn("Window was resized too small for display to fit in container",{width:e,height:n,windowWidth:window.innerWidth,windowHeight:window.innerHeight}),this.adEnd();else{var t={action:"boltBackfillResize",size:[window.innerWidth,window.innerHeight],id:window.id};window.parent.postMessage(JSON.stringify(t),Object(r.h)())}}}},{key:"showHideAdControls",value:function(){var e=window.client.isMobile?document.getElementById("mobile-ad-unmute-btn"):document.getElementById("desktop-ad-unmute-btn");e&&(e.style.display="none");var n=!!window.client.isMobile&&document.getElementById("mobile-ad-play-pause-btn");n&&(n.style.display="none")}},{key:"play",value:function(){}},{key:"playAd",value:function(){var e=this;e.backgroundDiv=e.createBackground(),e.showHideAdControls(),w.info("Play Display Backfill"),e._dispatchEvent(o.a.Media.Event.DURATION_CHANGE),e._dispatchEvent(o.a.Media.Event.START_TIME_CHANGED),window.displayBackfill.wasSuccessful=function(n,t){w.info("Play Ad",{success:n,size:t}),n?(e.handleInterval(),window.postLogMessage("Display Backfill playing"),w.info("Display Backfill playing"),e.size=t,window.BoltAdManager._dispatchEvent(o.a.Media.Event.LOADED),e._dispatchEvent(o.a.Media.Event.PLAY)):(window.postLogMessage("Display Backfill No ad","warn"),w.warn("Display Backfill is not playing"),window.displayBackfill.enabled=!1,window.BoltAdManager._dispatchEvent(o.a.Ad.Event.FAILED))};var n={action:"boltRenderBackFill",id:window.id};window.parent.postMessage(JSON.stringify(n),Object(r.h)())}},{key:"remove",value:function(){var e=this;clearInterval(e.interval),e.removeBackground(e.backgroundDiv),window.removeEventListener("resize",e.resizeCb);var n={action:"boltRemoveBackfill",id:window.id};window.parent.postMessage(JSON.stringify(n),Object(r.h)())}}])&&d(n.prototype,t),i&&d(n,i),l}(i.a)}}]);