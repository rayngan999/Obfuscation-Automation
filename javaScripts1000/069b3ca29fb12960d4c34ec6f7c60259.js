(window.stacklaWidgetJsonp=window.stacklaWidgetJsonp||[]).push([[1],{136:function(t,e,i){var a=i(1),o={};window.Stackla||(window.Stackla={}),o.createClass=function(){var t,e,i,n,s,r,l,c;if(i=function(){for(var t,e,i=this,a=[],o=[];i;)i.initializer&&a.push(i.initializer),i.destructor&&o.push(i.destructor),i=i.$parent;for(t=a.length-1;t>=0;t--)a[t].apply(this,arguments);this.destroy?(e=this.destroy,this.destroy=function(){for(t=o.length-1;t>=0;t--)o[t].apply(this,arguments);e.call(this)}):this.destroy=function(){for(t=o.length-1;t>=0;t--)o[t].apply(this,arguments)}},n=function(t,e){var i,a,o;for(a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);if(!Object.getOwnPropertyNames)for(a=0,o=(i=["toString","valueOf","toLocaleString","isPrototypeOf","propertyIsEnumerable","hasOwnProperty"]).length;a<o;a++)"function"==typeof e[i[a]]&&-1===e[i[a]].toString().indexOf("[native code]")&&(t[i[a]]=e[i[a]]);return t.$super=function(t){return this.$parent[t].apply(this.$parent,Array.prototype.slice.call(arguments,1))},t},!arguments.length)throw new Error("You need to specify either parent class or methods object");return"function"==typeof arguments[0]?(t=arguments[0],e=arguments[1]):e=arguments[0],t&&(n(i.prototype,t.prototype),i.prototype.$parent=t.prototype),n(i.prototype,e),i.prototype.constructor=i,i.prototype.initializer||(i.prototype.initializer=function(){}),i.prototype.destructor||(i.prototype.destructor=function(){}),a.isString(arguments[arguments.length-1])&&(s=arguments[arguments.length-1],"Stackla"===(r=s.split("."))[0]&&r.shift(),l=o,c=window.Stackla,a.each(r,function(t,e){e===r.length-1?(l[t]=i,c[t]=i):(a.isUndefined(l[t])&&(l[t]={}),a.isUndefined(c[t])&&(c[t]={})),l=l[t],c=c[t]})),i},o.getInstanceOrCreate=function(t,e,i,a){var o;return a=$.isPlainObject(a)?a:{},(o=(t=$(t)).data(e))||(delete(a=$.extend({},t.data(),a))[e],(o=new i(t,a)).render(),t.data(e,o)),o},o.smartBind=function(t,e,i,a){if("object"==typeof t){var n=$.extend({},t);t=n.pluginName,e=n.selector,i=n.classFn,a=!!n.autoBind}$.fn[t]=function(e,a){var n;return this.each(function(){var s=o.getInstanceOrCreate($(this),t,i,e);"string"==typeof e&&s[e]&&(n=n||s[e].call(s,a))}),n},$.fn[t].Constructor=i,$(document).on("click",e,function(e){o.getInstanceOrCreate($(e.currentTarget),t,i)}),$(function(){var i;(i=a?$(e):$(e+"[data-autobind=true]")).length&&i.each(function(e,i){$(i)[t]()})})},t.exports=o},145:function(t,e,i){"use strict";(function(t){!function(){var e="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0;e&&e(t)}();"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=function(){var t=window.StacklaFluidWidgetProperties||{},e=[];return{on:function(t,i){if(!t||!i)throw new Error("Both event type and callback are required parameters");return e[t]||(e[t]=[]),e[t].push(i),i},emit:function(t,i,a){var o,n=0;if((i=i||[]).unshift({type:t,target:this}),!t)throw new Error("Lacks of type parameter");if(e[t]&&e[t].length)for(o in e[t])e[t].hasOwnProperty(o)&&(e[t][o].apply(this,i),n+=1);return 0!==n},onBeforeExpandedTileOpen:function(e,i,a){var o=(t[e]||{}).callbacks||{};return"function"==typeof o.onBeforeExpandedTileOpen&&(i=o.onBeforeExpandedTileOpen(i,a)),this.emit("beforeExpandedTileOpen",[e,i,a]),i},onAfterExpandedTileOpen:function(e){var i=(t[e]||{}).callbacks||{};"function"==typeof i.onAfterExpandedTileOpen&&i.onAfterExpandedTileOpen(),this.emit("afterExpandedTileOpen",[e])},onBeforeExpandedTileImageResize:function(e,i,a,o){var n=(t[e]||{}).callbacks||{};"function"==typeof n.onBeforeExpandedTileImageResize&&n.onBeforeExpandedTileImageResize.call(this,i,a,o),this.emit("beforeExpandedTileImageResize",[e,i,a,o])},onAfterExpandedTileImageResize:function(e,i,a,o){var n=(t[e]||{}).callbacks||{};"function"==typeof n.onAfterExpandedTileImageResize&&n.onAfterExpandedTileImageResize.call(this,i,a,o),this.emit("afterExpandedTileImageResize",[e,i,a,o])},onAfterExpandedTileImageLoad:function(e,i,a){var o=(t[e]||{}).callbacks||{};"function"==typeof o.onAfterExpandedTileImageLoad&&o.onAfterExpandedTileImageLoad.call(this,i,a),this.emit("afterExpandedTileImageLoad",[e,i,a])}}}();e.a=i,function(){var t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0;t&&t.register(i,"default","/home/ec2-user/workspace/production/stackla-web/app/media/js/widget/common/expanded-tile-callbacks.js")}(),function(){var e="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0;e&&e(t)}()}).call(this,i(5)(t))},150:function(t,e,i){var a=i(136),o=i(1),n=a.createClass({initializer:function(t){var e=this.getParams("debug");t=t||{},e?this.debug="true"===e||"1"===e:t.debug?this.debug=!0===t.debug:this.debug=!1,this._listeners=[]},toString:function(){return"Base"},log:function(t,e){this.debug&&(e=e||"info",window.console&&window.console[e]&&window.console[e]("["+this.toString()+"] "+t))},on:function(t,e){if(!t||!e)throw new Error("Both event type and callback are required parameters");return this.log("on() - event '"+t+"' is subscribed"),this._listeners[t]||(this._listeners[t]=[]),e.instance=this,this._listeners[t].push(e),e},emit:function(t,e,i){var a,o,n=0;if(this.log("emit() - event '"+t+"' is triggered"),(e=e||[]).unshift({type:t,target:this}),!t)throw new Error("Lacks of type parameter");if(this._listeners[t]&&this._listeners[t].length)for(a in this._listeners[t])this._listeners[t].hasOwnProperty(a)&&(this._listeners[t][a].apply(this,e),n+=1);return this.$el&&(o=this.toString().toLowerCase(),this.$el.trigger(o+":"+t,[e])),0!==n},getParams:function(t){var e,i,a,o=this.getUrl(),n={},s=o.indexOf("?");for(a in this.log("getParams() is executed"),i=-1!==o.indexOf("#")?o.slice(s+1,o.indexOf("#")).split("&"):o.slice(s+1).split("&"))i.hasOwnProperty(a)&&(n[(e=i[a].split("="))[0]]=e[1]);return t?n[t]:n},getUrl:function(){return window.location.href},destroy:function(){var t=this;o.each(t._listeners,function(e){o.eachRight(e,function(i,a){i.instance===t&&e.splice(a,1)})})}});t.exports=n},151:function(t,e,i){var a,o,n,s,r,l=$tackla,c=i(46),d=i(221),p=i(136),u=i(150),f=i(220),h=i(219).initiateTrackingPixel;r={NAME:"Tagla",FORM_TEMPLATE:['<div class="{{tag_class_name}}-form-wrapper">','    <form class="{{tag_class_name}}-form">','        <div class="{{tag_class_name}}-form-title">',"            Select Your Product",'            <a href="javascript:void(0);" class="{{tag_class_name}}-form-close">Ã</a>',"        </div>","        {{#has_product_tags}}",'        <input type="hidden" name="x">','        <input type="hidden" name="y">','        <select class="{{tag_class_name}}-select"','            data-uikit="xelect2"','            data-category="tag"','            data-type="product"','            data-stack="{{stack}}"','            data-search-placeholder="Search...">',"            <option></option>","        </select>","        {{/has_product_tags}}","        {{^has_product_tags}}",'        <div class="{{tag_class_name}}-form-empty">','            <div class="st-title st-title-h5">No Product Tags available </div>','            Go to <a href="/{{stack_short_name}}/admin/ecommerce" target="_blank">Social Commerce</a>','            and tap "Create Product Tag" to get started',"        </div>","        {{/has_product_tags}}","    </form>","</div>"].join("\n"),TAG_TEMPLATE:['<div class="{{tag_class_name}}">','    <i class="{{tag_class_name}}-icon fs fs-tag2"></i>','    <div class="{{tag_class_name}}-flyout">',"    {{#product}}","        {{#image_small_url}}",'        <div class="{{tag_class_name}}-flyout-image">','          <img src="{{image_small_url}}">',"        </div>","        {{/image_small_url}}",'        <div class="{{tag_class_name}}-flyout-text">','          <div class="{{tag_class_name}}-flyout-actions">','            <a href="javascript:void(0)"','               class="{{tag_class_name}}-flyout-link {{tag_class_name}}-flyout-edit-link">','              <i class="{{tag_class_name}}-flyout-delete-icon fs fs-pencil"></i> Edit',"            </a>",'            <a href="javascript:void(0)"','               class="{{tag_class_name}}-flyout-link {{tag_class_name}}-flyout-delete-link">','              <i class="{{tag_class_name}}-flyout-delete-icon fs fs-cross3"></i> Delete',"            </a>","          </div>",'          <h2 class="{{tag_class_name}}-flyout-title">{{tag}}</h2>',"          {{#price}}",'          <div class="{{tag_class_name}}-flyout-price">{{price}}</div>',"          {{/price}}","          {{#description}}",'          <p class="{{tag_class_name}}-flyout-description">{{description}}</p>',"          {{/description}}","          {{#custom_url}}",'          <a href="{{custom_url}}" class="{{tag_class_name}}-flyout-button"','              target="{{target}}">','              <i class="{{tag_class_name}}-flyout-button-icon fs fs-cart"></i>','              <span class="{{tag_class_name}}-flyout-button-text">{{cta_text}}</span>',"          </a>","          {{/custom_url}}","        </div>",'        <a class="{{tag_class_name}}-flyout-close-link" href="javascript:void(0);">&#8592;</a>',"    {{/product}}","    </div>","    {{{form_html}}}","</div>"].join("\n"),NEW_TAG_TEMPLATE:['<div class="{{tag_class_name}}">','    <i class="{{tag_class_name}}-icon fs fs-tag2"></i>',"</div>"].join("\n")},s=p.createClass(u,{toString:function(){return"Tagla"},initializer:function(t,e){e=e||{},this.$wrapper=l(t),this.init(e),this.bind()},init:function(t){this.log("init() is executed"),this.widgetId=t.widgetId,this.tileId=t.tileId,this.data=t.data||[],this.editor=!0===t.editor,this.formHtml=t.form?l(t.form):l(s.FORM_TEMPLATE),this.formHtml=this.formHtml.html(),this.formHtml=t.editor?this.formHtml:"",this.tagTemplate=t.tagTemplate?t.tagTemplate:s.TAG_TEMPLATE,this.unit="percent"===t.unit?"percent":"pixel",this.imageSize=null,this.image=this.$wrapper.find("img"),this.lastDragTime=new Date,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.trackingPixelConfig=t.trackingPixelConfig,this.image.length?(this.onSync=t.onSync||function(){},this.namespace=t.namespace||"tagla",this.term=t.term||"tag",this.wrapperClass=[this.namespace,this.term,"wrapper"].join("-"),this.tagClass=this.namespace+"-"+this.term,this.tagPrefix=this.tagClass+"-"):console.error(this.$wrapper,this.image)},bind:function(){var t=this;t.log("bind() is executed"),t.isMobile?(t.$wrapper.on("touchstart","."+t.tagClass,l.proxy(t.handleTagTouch,t)).on("touchstart","."+t.tagPrefix+"flyout-edit-link",l.proxy(t.handleTagEdit,t)).on("touchstart","."+t.tagPrefix+"flyout-delete-link",l.proxy(t.handleTagDelete,t)),l(window).on("orientationchange",function(e){t.mobileOrientation=e.orientation,t.$wrapper.removeClass(t.tagPrefix+"mobile-landscape "+t.tagPrefix+"mobile-portrait").addClass(t.tagPrefix+"mobile-"+t.mobileOrientation)})):t.$wrapper.on("click",l.proxy(t.handleWrapperClick,t)).on("click","."+t.tagPrefix+"flyout-edit-link",l.proxy(t.handleTagEdit,t)).on("click","."+t.tagPrefix+"flyout-delete-link",l.proxy(t.handleTagDelete,t)).on("click","."+t.tagPrefix+"flyout-button",l.proxy(t.handleTagRedirect,t)).on("mouseenter","."+t.tagClass,l.proxy(t.handleTagMouseEnter,t)).on("mouseleave","."+t.tagClass,l.proxy(t.handleTagMouseLeave,t))},render:function(){this.log("render() is executed"),this.imageSize=f.get(this.image,l.proxy(this._renderFn,this)),this.imageSize.on("change",l.proxy(this.handleImageResize,this))},_renderFn:function(t,e){var i,a=this;if(a.log("_renderFn() is executed"),!t)return a.log("Failed to load image: "+a.image.attr("src"),"error"),void a.destroy();for(i in a._saveImageSize(e),a.image.attr("draggable",!1),a.$wrapper.addClass(a.wrapperClass),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&a.$wrapper.addClass(a.wrapperClass+"-safari"),a.data)a.data.hasOwnProperty(i)&&a.addTag(a.data[i]);setTimeout(function(){a.editor&&a.$wrapper.addClass(a.wrapperClass+"-editing"),a.emit("ready",[a])},500)},destroy:function(){var t=this;t.log("destroy() is executed"),t.$wrapper.removeClass(t.wrapperClass+" "+t.wrapperClass+"-editing"),t.$wrapper.find("."+t.tagClass).each(function(){var e=l(this),i=e.find("."+t.tagClass+"-select");i.data("xelect2")&&i.xelect2("destroy"),e.data("draggabilly")&&e.data("draggabilly").destroy(),e.remove()})},_applyTools:function(t){var e,i=t.find("."+this.tagClass+"-form"),a=t.data("tag-data");this.log("_applyTools() is executed"),(e=new Draggabilly(t[0],{containment:"."+this.wrapperClass,handle:"."+this.tagPrefix+"icon"})).on("dragEnd",l.proxy(this.handleTagMove,this)),t.data("draggabilly",e),i.find("[name=x]").val(a.x),i.find("[name=y]").val(a.y),i.find("[name=tag] option[value="+a.value+"]").attr("selected","selected")},_applyChooser:function(t){var e=t.find("."+this.tagClass+"-form"),i=t.find("."+this.tagClass+"-select"),a=t.data("tag-data");i.xelect2({dropdownParent:e,selectedValues:a.value,selectionCssClass:this.namespace+"-select2-selection",containerCssClass:this.namespace+"-select2-container",dropdownCssClass:this.namespace+"-select2-dropdown"}),i.on("xelect2:build",function(){setTimeout(function(){i.select2("open")},100)}),i.on("change",l.proxy(this.handleTagChange,this)).on("select2:close",function(){i.select2("open")})},_removeChooser:function(t){var e=t.find("."+this.tagClass+"-select");this.log("_removeChooser() is executed"),e.data("xelect2")&&(e.xelect2("destroy"),e.html("<option></option>"))},_disableDrag:function(t){this.editor&&(this.log("_disableDrag() is executed"),t=l(t),l("."+this.tagClass).each(function(e,i){t[0]!==i&&l(i).data("draggabilly").disable()}))},_enableDrag:function(t){!1!==this.editor&&(this.log("_enableDrag() is executed"),t=l(t),l("."+this.tagClass).each(function(e,i){t[0]!==i&&l(i).data("draggabilly").enable()}))},_removeTools:function(t){this.log("_removeTools() is executed"),t.data("draggabilly")&&t.data("draggabilly").destroy(),t.find("."+this.tagClass+"-select"),this._removeChooser(t)},_getPosition:function(t){var e,i,a;return this.log("_getPosition() is executed"),i=((e=t.position()).left+t.width()/2)/this.currentWidth*this.naturalWidth,a=(e.top+t.height()/2)/this.currentHeight*this.naturalHeight,"percent"===this.unit&&(i=i/this.naturalWidth*100,a=a/this.naturalHeight*100),[i,a]},_saveImageSize:function(t){this.log("_saveImageSize() is executed"),this.naturalWidth=t.naturalWidth,this.naturalHeight=t.naturalHeight,this.currentWidth=t.width,this.currentHeight=t.height,this.widthRatio=t.widthRatio,this.heightRatio=t.heightRatio},handleTagChange:function(t){var e,i,a,o,n;this.log("handleTagChange() is executed"),o=(i=(e=l(t.target)).parents("."+this.tagClass)).hasClass(this.tagPrefix+"new"),i.removeClass(this.tagPrefix+"choose "+this.tagPrefix+"new"),(a=l.extend({},i.data("tag-data"))).label=e.find("option:selected").text(),a.value=e.val()||a.label,n=i.find("."+this.tagPrefix+"form").serialize(),i.data("align-flyout").align(),i.data("align-form")&&i.data("align-form").align(),this.$wrapper.removeClass(this.wrapperClass+"-editing-selecting"),o?this.emit("add",[a,n,i]):this.emit("change",[a,n,i]),this._removeChooser(i)},handleTagDelete:function(t){var e,i,a=this;a.log("handleTagDelete() is executed"),t.preventDefault(),e=l(t.currentTarget).parents("."+a.tagClass),i=l.extend({},e.data("tag-data")),e.fadeOut(function(){a._removeTools(e),e.remove(),a.emit("delete",[i])})},handleTagEdit:function(t){var e=l(t.currentTarget).parents("."+this.tagClass),i=l.extend({},e.data("tag-data"));this.log("handleTagEdit() is executed"),t.preventDefault(),t.stopPropagation(),e.addClass(this.tagPrefix+"choose"),this.$wrapper.addClass(this.wrapperClass+"-editing-selecting"),this._disableDrag(e),this._applyChooser(e),this.emit("edit",[i,e])},handleTagRedirect:function(t){var e=l(t.currentTarget).parents("."+this.tagClass),i=l.extend({},e.data("tag-data"));this.log("handleTagRedirect() is executed"),t.preventDefault(),t.stopPropagation();var a=i.product?i.product.ext_product_id:null,o=i.product?i.product.custom_url:null,n=i.product?i.product.target:null;h(this.widgetId,this.tileId,a,o,n,this.trackingPixelConfig)},handleTagMove:function(t){var e,i,a=l(t.element),o=a.find("."+this.tagPrefix+"-form"),n=a.data("tag-data"),s=this._getPosition(a);this.log("handleTagMove() is executed"),n.x=s[0],n.y=s[1],o.find("[name=x]").val(n.x),o.find("[name=y]").val(n.y),e=o.serialize(),this.lastDragTime=new Date,i=!(n=l.extend({},n)).id,a.data("align-flyout").align(),a.data("align-form")&&a.data("align-form").align(),n.id&&this.emit("move",[n,e,a,i])},handleTagMouseEnter:function(t){var e,i;l(t.target).hasClass("select2-results__option")||(e=l(t.currentTarget),this.log("handleTagMouseEnter"),(i=e.data("timer"))&&clearTimeout(i),e.removeData("timer"),e.addClass(this.tagPrefix+"hover"),e.data("align-flyout").align(),e.data("align-form")&&e.data("align-form").align(),this.emit("hover",[e]))},handleTagMouseLeave:function(t){var e=this,i=l(t.currentTarget),a=i.find(["."+e.tagPrefix+"flyout","."+e.tagPrefix+"form"].join(",")),o=i.data("timer");return e.log("handleTagMouseLeave"),o&&clearTimeout(o),i.removeData("timer"),o=setTimeout(function(){i.removeClass(e.tagPrefix+"hover"),i.hasClass(e.tagPrefix+"choose")||a.removeAttr("style")},300),i.data("timer",o)},handleTagTouch:function(t){var e=this,i=l(t.target),a=l(t.currentTarget),o=e.$wrapper;e.log("handleTagTouch() is executed"),a.hasClass(e.tagPrefix+"hover")?i.is("."+e.tagPrefix+"flyout-close-link")&&(t.preventDefault(),t.stopPropagation(),a.find("."+e.tagPrefix+"navbar").remove(),a.find("."+e.tagPrefix+"flyout").css({position:"fixed",top:0,bottom:0,left:"100%",width:l(window).outerWidth()+"px"}),setTimeout(function(){a.find("."+e.tagPrefix+"flyout").css({position:"absolute"}),a.removeClass(e.tagPrefix+"hover"),o.parents(".stacklapopup-image-wrapper").css("z-index","2")},300)):(t.preventDefault(),t.stopPropagation(),a.find("."+e.tagPrefix+"flyout").css({position:"fixed",left:"100%",width:l(window).outerWidth()+"px"}),setTimeout(function(){var t=l('                    <div class="'+e.tagPrefix+'navbar">                        <div class="'+e.tagPrefix+'flyout-close-link">                            Back                        </div>                    </div>                ');a.addClass(e.tagPrefix+"hover"),a.find("."+e.tagPrefix+"flyout").css({position:"fixed",top:0,bottom:0,left:0,width:l(window).outerWidth()+"px","margin-top":0,"padding-top":64,overflow:"auto"}).append(t),l(".stacklapopup-image-wrapper").css("z-index","3")},300))},handleWrapperClick:function(t){var e=l(t.target);this.log("handleWrapperClick() is executed"),e.hasClass("select2-search__field")||new Date-this.lastDragTime>10&&this.shrink()},handleImageResize:function(t){this.log("handleImageResize() is executed"),this.sync()},addTag:function(t){var e,i,a,o,n,s,r,p,u,f=this;f.log("addTag() is executed"),t=t||{},(t=l.extend({},t)).form_html=f.formHtml,t.tag_class_name=f.tagClass,t.product&&(t.product.cta_text=t.product.cta_text||"Buy Now"),a=l(c.render(f.tagTemplate,t)),(n=!t.x&&!t.y)&&l("."+f.tagClass).each(function(){var t=l(this);t.hasClass(f.tagPrefix+"new")&&!t.find("[name=tag]").val()&&t.fadeOut(function(){f._removeTools(t),t.remove()})}),f.$wrapper.append(a),n&&(t.x=50,t.y=50),"percent"===f.unit?(p=f.currentWidth*(t.x/100),u=f.currentHeight*(t.y/100)):(p=t.x*f.widthRatio,u=t.y*f.heightRatio),s=a.outerWidth()/2,r=a.outerHeight()/2,a.css({left:p-s+"px",top:u-r+"px"}),a.data("tag-data",t),o={relateTo:a,constrainBy:f.$wrapper,skipViewport:!1},e=a.find("."+f.tagPrefix+"flyout"),a.data("align-flyout",new d(e,o)),a.data("align-flyout").align(),f.editor&&(i=a.find("."+f.tagPrefix+"form"),a.data("align-form",new d(i,o)),a.data("align-form")&&a.data("align-form").align(),f._applyTools(a),n&&(a.addClass([f.tagPrefix+"new",f.tagPrefix+"choose"].join(" ")),a.data("draggabilly").enable(),f.$wrapper.addClass(f.wrapperClass+"-editing-selecting"),a.find("."+f.tagClass+"-select"),f._applyChooser(a),f._disableDrag(a),f.emit("new",[a])))},getTags:function(){var t=[];return this.log("getTags() is executed"),l("."+this.tagClass).each(function(e,i){l.extend({},l(i).data("tag-data")),t.push(l(i).data("tag-data"))}),t},shrink:function(t){var e=this;e.editor&&(e.log("shrink() is executed"),t=l(t),l("."+e.tagClass).each(function(i,a){var o=l(a),n=o.find(["."+e.tagPrefix+"flyout","."+e.tagPrefix+"form"].join(","));t[0]!==a&&(o.hasClass(e.tagPrefix+"new")&&!o.find("[name=tag]").val()?o.fadeOut(function(){e._removeTools(o),e._removeChooser(o),o.remove()}):(e._removeChooser(o),o.removeClass(e.tagPrefix+"choose"),o.hasClass(e.tagPrefix+"hover")||n.removeAttr("style")))}),e.$wrapper.removeClass(e.wrapperClass+"-editing-selecting"),e._enableDrag())},sync:function(){var t,e,i=this,a=i.data,o=i.image;i.log("sync() is executed"),a.width=o.width(),a.height=o.height(),l("."+i.tagClass).each(function(){var o=l(this),n=o.data("tagData");"percent"===i.unit?(t=a.width*(n.x/100),e=a.height*(n.y/100)):(t=n.x*i.widthRatio,e=n.y*i.heightRatio);var s=o.outerWidth()/2,r=o.outerHeight()/2;o.css({left:t-s+"px",top:e-r+"px"})}),i.onSync&&i.onSync(a),i._saveImageSize(a)},updateDialog:function(t,e){var i,a=l('                <div class="'+this.tagPrefix+'navbar">                    <div class="'+this.tagPrefix+'flyout-close-link">                        Back                    </div>                </div>            ');this.log("updateDialog() is executed"),(e=l.extend({},t.data("tag-data"),e)).form_html=this.formHtml,e.tag_class_name=this.tagClass,i=l(c.render(this.tagTemplate,e)).find("."+this.tagPrefix+"flyout").html(),t.find("."+this.tagPrefix+"flyout").html(i).append(a).css("overflow","auto"),t.data("tag-data",e)}},r.NAME),l.extend(s,r),window.Tagla=s,window.Stackla&&(window.Stackla.Tagla=s),"object"==typeof e&&e?t.exports=s:(o=[e],void 0===(n="function"==typeof(a=s)?a.apply(e,o):a)||(t.exports=n))},152:function(t,e){$tackla;!function(t){var e,i,a,o,n,s,r,l="Close",c="BeforeClose",d="MarkupParse",p="Open",u="Change",f="stacklapopup",h="."+f,g="stacklapopup-ready",m="stacklapopup-removing",v="stacklapopup-prevent-close",w=function(){},y=!!window.jQuery,x=t(window),C=function(t,i){e.ev.on(f+t+h,i)},k=function(e,i,a,o){var n=document.createElement("div");return n.className="stacklapopup-"+e,a&&(n.innerHTML=a),o?i&&i.appendChild(n):(n=t(n),i&&n.appendTo(i)),n},_=function(i,a){e.ev.triggerHandler(f+i,a),e.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),e.st.callbacks[i]&&e.st.callbacks[i].apply(e,t.isArray(a)?a:[a]))},b=function(i){return i===r&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),r=i),e.currTemplate.closeBtn},T=function(){t.magnificPopup.instance||((e=new w).init(),t.magnificPopup.instance=e)};w.prototype={constructor:w,init:function(){var i=navigator.appVersion;e.isIE7=-1!==i.indexOf("MSIE 7."),e.isIE8=-1!==i.indexOf("MSIE 8."),e.isLowIE=e.isIE7||e.isIE8,e.isAndroid=/android/gi.test(i),e.isIOS=/iphone|ipad|ipod/gi.test(i),e.supportsTransition=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1}(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),a=t(document.body),o=t(document),e.popupsCache={}},open:function(i){var a;if(!1===i.isObj){e.items=i.items.toArray(),e.index=0;var n,r=i.items;for(a=0;a<r.length;a++)if((n=r[a]).parsed&&(n=n.el[0]),n===i.el[0]){e.index=a;break}}else e.items=t.isArray(i.items)?i.items:[i.items],e.index=i.index||0;if(!e.isOpen){e.types=[],s="",i.mainEl&&i.mainEl.length?e.ev=i.mainEl.eq(0):e.ev=o,i.key?(e.popupsCache[i.key]||(e.popupsCache[i.key]={}),e.currTemplate=e.popupsCache[i.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,i),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=k("bg").on("click"+h,function(){e.close()}),e.wrap=k("wrap").attr("tabindex",-1).on("click"+h,function(t){e._checkIfClose(t.target)&&e.close()}),e.container=k("container",e.wrap)),e.contentContainer=k("content"),e.st.preloader&&(e.preloader=k("preloader",e.container,e.st.tLoading));var l=t.magnificPopup.modules;for(a=0;a<l.length;a++){var c=l[a];c=c.charAt(0).toUpperCase()+c.slice(1),e["init"+c].call(e)}_("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(C(d,function(t,e,i,a){i.close_replaceWith=b(a.type)}),s+=" stacklapopup-close-btn-in"):e.wrap.append(b())),e.st.alignTop&&(s+=" stacklapopup-align-top"),e.fixedContentPos?e.wrap.css({overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}):e.wrap.css({top:x.scrollTop(),position:"absolute"}),(!1===e.st.fixedBgPos||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:o.height(),position:"absolute"}),e.st.enableEscapeKey&&o.on("keyup"+h,function(t){27===t.keyCode&&e.close()}),x.on("resize"+h,function(){e.updateSize()}),e.st.closeOnContentClick||(s+=" stacklapopup-auto-cursor"),s&&e.wrap.addClass(s);var u=e.wH=x.height(),f={};if(e.fixedContentPos&&e._hasScrollBar(u)){var m=e._getScrollbarSize();m&&(f.marginRight=m)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):f.overflow="hidden");var v=e.st.mainClass;return e.isIE7&&(v+=" stacklapopup-ie7"),v&&e._addClassTostacklapopup(v),e.updateItemHTML(),_("BuildControls"),t("html").css(f),e.bgOverlay.add(e.wrap).prependTo(document.body),e._lastFocusedEl=document.activeElement,setTimeout(function(){e.content?(e._addClassTostacklapopup(g),e._setFocus()):e.bgOverlay.addClass(g),o.on("focusin"+h,e._onFocusIn)},16),e.isOpen=!0,e.updateSize(u),_(p),i}e.updateItemHTML()},close:function(){e.isOpen&&(_(c),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassTostacklapopup(m),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){_(l);var i=m+" "+g+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(i+=e.st.mainClass+" "),e._removeClassFromstacklapopup(i),e.fixedContentPos){var a={marginRight:""};e.isIE7?t("body, html").css("overflow",""):a.overflow="",t("html").css(a)}o.off("keyup"+h+" focusin"+h),e.ev.off(h),e.wrap.attr("class","stacklapopup-wrap").removeAttr("style"),e.bgOverlay.attr("class","stacklapopup-bg"),e.container.attr("class","stacklapopup-container"),e.st.showCloseBtn&&(!e.st.closeBtnInside||!0===e.currTemplate[e.currItem.type])&&e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,_("AfterClose")},updateSize:function(t){if(e.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,a=window.innerHeight*i;e.wrap.css("height",a),e.wH=a}else e.wH=t||x.height();e.fixedContentPos||e.wrap.css("height",e.wH),_("Resize")},updateItemHTML:function(){var i=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),i.parsed||(i=e.parseEl(e.index));var a=i.type;if(_("BeforeChange",[e.currItem?e.currItem.type:"",a]),e.currItem=i,!e.currTemplate[a]){var o=!!e.st[a]&&e.st[a].markup;_("FirstMarkupParse",o),e.currTemplate[a]=!o||t(o)}n&&n!==i.type&&e.container.removeClass("stacklapopup-"+n+"-holder");var s=e["get"+a.charAt(0).toUpperCase()+a.slice(1)](i,e.currTemplate[a]);e.appendContent(s,a),i.preloaded=!0,_(u,i),n=i.type,e.container.prepend(e.contentContainer),_("AfterChange")},appendContent:function(t,i){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&!0===e.currTemplate[i]?e.content.find(".stacklapopup-close").length||e.content.append(b()):e.content=t:e.content="",_("BeforeAppend"),e.container.addClass("stacklapopup-"+i+"-holder"),e.contentContainer.append(e.content)},parseEl:function(i){var a=e.items[i],o=a.type;if((a=a.tagName?{el:t(a)}:{data:a,src:a.src}).el){for(var n=e.types,s=0;s<n.length;s++)if(a.el.hasClass("stacklapopup-"+n[s])){o=n[s];break}a.src=a.el.attr("data-stacklapopup-src"),a.src||(a.src=a.el.attr("href"))}return a.type=o||e.st.type||"inline",a.index=i,a.parsed=!0,e.items[i]=a,_("ElementParse",a),e.items[i]},addGroup:function(t,i){var a=function(a){a.stacklapopupEl=this,e._openClick(a,t,i)};i||(i={});var o="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(o).on(o,a)):(i.isObj=!1,i.delegate?t.off(o).on(o,i.delegate,a):(i.items=t,t.off(o).on(o,a)))},_openClick:function(i,a,o){if((void 0!==o.midClick?o.midClick:t.magnificPopup.defaults.midClick)||2!==i.which&&!i.ctrlKey&&!i.metaKey){var n=void 0!==o.disableOn?o.disableOn:t.magnificPopup.defaults.disableOn;if(n)if(t.isFunction(n)){if(!n.call(e))return!0}else if(x.width()<n)return!0;i.type&&(i.preventDefault(),e.isOpen&&i.stopPropagation()),o.el=t(i.stacklapopupEl),o.delegate&&(o.items=a.find(o.delegate)),e.open(o)}},updateStatus:function(t,a){if(e.preloader){i!==t&&e.container.removeClass("stacklapopup-s-"+i),!a&&"loading"===t&&(a=e.st.tLoading);var o={status:t,text:a};_("UpdateStatus",o),t=o.status,a=o.text,e.preloader.html(a),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("stacklapopup-s-"+t),i=t}},_checkIfClose:function(i){if(!t(i).hasClass(v)){var a=e.st.closeOnContentClick,o=e.st.closeOnBgClick;if(a&&o)return!0;if(!e.content||t(i).hasClass("stacklapopup-close")||e.preloader&&i===e.preloader[0])return!0;if(i===e.content[0]||t.contains(e.content[0],i)){if(a)return!0}else if(o&&t.contains(document,i))return!0;return!1}},_addClassTostacklapopup:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromstacklapopup:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?o.height():document.body.scrollHeight)>(t||x.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(i){if(i.target!==e.wrap[0]&&!t.contains(e.wrap[0],i.target))return e._setFocus(),!1},_parseMarkup:function(e,i,a){var o;a.data&&(i=t.extend(a.data,i)),_(d,[e,i,a]),t.each(i,function(t,i){if(void 0===i||!1===i)return!0;if((o=t.split("_")).length>1){var a=e.find(h+"-"+o[0]);if(a.length>0){var n=o[1];"replaceWith"===n?a[0]!==i[0]&&a.replaceWith(i):"img"===n?a.is("img")?a.attr("src",i):a.replaceWith('<img src="'+i+'" class="'+a.attr("class")+'" />'):a.attr(o[1],i)}}else e.find(h+"-"+t).html(i)})},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.id="stacklapopup-sbm",t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:w.prototype,modules:[],open:function(e,i){return T(),(e=e?t.extend(!0,{},e):{}).isObj=!0,e.index=i||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,i){i.options&&(t.magnificPopup.defaults[e]=i.options),t.extend(this.proto,i.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="stacklapopup-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},t.fn.magnificPopup=function(i){T();var a=t(this);if("string"==typeof i)if("open"===i){var o,n=y?a.data("magnificPopup"):a[0].magnificPopup,s=parseInt(arguments[1],10)||0;n.items?o=n.items[s]:(o=a,n.delegate&&(o=o.find(n.delegate)),o=o.eq(s)),e._openClick({stacklapopupEl:o},a,n)}else e.isOpen&&e[i].apply(e,Array.prototype.slice.call(arguments,1));else i=t.extend(!0,{},i),y?a.data("magnificPopup",i):a[0].magnificPopup=i,e.addGroup(a,i);return a};var P,I,E,S="inline",O=function(){E&&(I.after(E.addClass(P)).detach(),E=null)};t.magnificPopup.registerModule(S,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(S),C(l+"."+S,function(){O()})},getInline:function(i,a){if(O(),i.src){var o=e.st.inline,n=t(i.src);if(n.length){var s=n[0].parentNode;s&&s.tagName&&(I||(P=o.hiddenClass,I=k(P),P="stacklapopup-"+P),E=n.after(I).detach().removeClass(P)),e.updateStatus("ready")}else e.updateStatus("error",o.tNotFound),n=t("<div>");return i.inlineElement=n,n}return e.updateStatus("ready"),e._parseMarkup(a,{},i),a}}});var z,H="ajax",W=function(){z&&a.removeClass(z)},M=function(){W(),e.req&&e.req.abort()};t.magnificPopup.registerModule(H,{options:{settings:null,cursor:"stacklapopup-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(H),z=e.st.ajax.cursor,C(l+"."+H,M),C("BeforeChange."+H,M)},getAjax:function(i){z&&a.addClass(z),e.updateStatus("loading");var o=t.extend({url:i.src,success:function(a,o,n){var s={data:a,xhr:n};_("ParseAjax",s),e.appendContent(t(s.data),H),i.finished=!0,W(),e._setFocus(),setTimeout(function(){e.wrap.addClass(g)},16),e.updateStatus("ready"),_("AjaxContentAdded")},error:function(){W(),i.finished=i.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",i.src))}},e.st.ajax.settings);return e.req=t.ajax(o),""}}});var L;t.magnificPopup.registerModule("image",{options:{markup:'<div class="stacklapopup-figure"><div class="stacklapopup-close"></div><figure><div class="stacklapopup-img"></div><figcaption><div class="stacklapopup-bottom-bar"><div class="stacklapopup-title"></div><div class="stacklapopup-counter"></div></div></figcaption></figure></div>',cursor:"stacklapopup-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var t=e.st.image,i=".image";e.types.push("image"),C(p+i,function(){"image"===e.currItem.type&&t.cursor&&a.addClass(t.cursor)}),C(l+i,function(){t.cursor&&a.removeClass(t.cursor),x.off("resize"+h)}),C("Resize"+i,e.resizeImage),e.isLowIE&&C("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var i=0;e.isLowIE&&(i=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-i)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,L&&clearInterval(L),t.isCheckingImgSize=!1,_("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("stacklapopup-loading"),t.imgHidden=!1))},findImageSize:function(t){var i=0,a=t.img[0],o=function(n){L&&clearInterval(L),L=setInterval(function(){a.naturalWidth>0?e._onImageHasSize(t):(i>200&&clearInterval(L),3===++i?o(10):40===i?o(50):100===i&&o(500))},n)};o(1)},getImage:function(i,a){var o=0,n=function(){i&&(i.img[0].complete?(i.img.off(".stacklapopuploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,_("ImageLoadComplete")):++o<200?setTimeout(n,100):s())},s=function(){i&&(i.img.off(".stacklapopuploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("error",r.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},r=e.st.image,l=a.find(".stacklapopup-img");if(l.length){var c=document.createElement("img");c.className="stacklapopup-img",i.img=t(c).on("load.stacklapopuploader",n).on("error.stacklapopuploader",s),c.src=i.src,l.is("img")&&(i.img=i.img.clone()),i.img[0].naturalWidth>0&&(i.hasSize=!0)}return e._parseMarkup(a,{title:function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var a=e.st.image.titleSrc;if(a){if(t.isFunction(a))return a.call(e,i);if(i.el)return i.el.attr(a)||""}return""}(i),img_replaceWith:i.img},i),e.resizeImage(),i.hasSize?(L&&clearInterval(L),i.loadError?(a.addClass("stacklapopup-loading"),e.updateStatus("error",r.tError.replace("%url%",i.src))):(a.removeClass("stacklapopup-loading"),e.updateStatus("ready")),a):(e.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,a.addClass("stacklapopup-loading"),e.findImageSize(i)),a)}}});var B;t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,i=e.st.zoom,a=".zoom";if(i.enabled&&e.supportsTransition){var o,n,s=i.duration,r=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("stacklapopup-animated-image"),a="all "+i.duration/1e3+"s "+i.easing,o={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},n="transition";return o["-webkit-"+n]=o["-moz-"+n]=o["-o-"+n]=o[n]=a,e.css(o),e},d=function(){e.content.css("visibility","visible")};C("BuildControls"+a,function(){if(e._allowZoom()){if(clearTimeout(o),e.content.css("visibility","hidden"),!(t=e._getItemToZoom()))return void d();(n=r(t)).css(e._getOffset()),e.wrap.append(n),o=setTimeout(function(){n.css(e._getOffset(!0)),o=setTimeout(function(){d(),setTimeout(function(){n.remove(),t=n=null,_("ZoomAnimationEnded")},16)},s)},16)}}),C(c+a,function(){if(e._allowZoom()){if(clearTimeout(o),e.st.removalDelay=s,!t){if(!(t=e._getItemToZoom()))return;n=r(t)}n.css(e._getOffset(!0)),e.wrap.append(n),e.content.css("visibility","hidden"),setTimeout(function(){n.css(e._getOffset())},16)}}),C(l+a,function(){e._allowZoom()&&(d(),n&&n.remove(),t=null)})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return!!e.currItem.hasSize&&e.currItem.img},_getOffset:function(i){var a,o=(a=i?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem)).offset(),n=parseInt(a.css("padding-top"),10),s=parseInt(a.css("padding-bottom"),10);o.top-=t(window).scrollTop()-n;var r={width:a.width(),height:(y?a.innerHeight():a[0].offsetHeight)-s-n};return void 0===B&&(B=void 0!==document.createElement("p").style.MozTransform),B?r["-moz-transform"]=r.transform="translate("+o.left+"px,"+o.top+"px)":(r.left=o.left,r.top=o.top),r}}});var A="iframe",$=function(t){if(e.currTemplate[A]){var i=e.currTemplate[A].find("iframe");i.length&&(t||(i[0].src="//about:blank"),e.isIE8&&i.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(A,{options:{markup:'<div class="stacklapopup-iframe-scaler"><div class="stacklapopup-close"></div><iframe class="stacklapopup-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(A),C("BeforeChange",function(t,e,i){e!==i&&(e===A?$():i===A&&$(!0))}),C(l+"."+A,function(){$()})},getIframe:function(i,a){var o=i.src,n=e.st.iframe;t.each(n.patterns,function(){if(o.indexOf(this.index)>-1)return this.id&&(o="string"==typeof this.id?o.substr(o.lastIndexOf(this.id)+this.id.length,o.length):this.id.call(this,o)),o=this.src.replace("%id%",o),!1});var s={};return n.srcAction&&(s[n.srcAction]=o),e._parseMarkup(a,s,i),e.updateStatus("ready"),a}}});var D=function(t){var i=e.items.length;return t>i-1?t-i:t<0?i+t:t},R=function(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="stacklapopup-arrow stacklapopup-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=e.st.gallery,a=".stacklapopup-gallery",n=Boolean(t.fn.stacklapopupFastClick);if(e.direction=!0,!i||!i.enabled)return!1;s+=" stacklapopup-gallery",C(p+a,function(){i.navigateByImgClick&&e.wrap.on("click"+a,".stacklapopup-img",function(){if(e.items.length>1)return e.next(),!1}),o.on("keydown"+a,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),C("UpdateStatus"+a,function(t,i){i.text&&(i.text=R(i.text,e.currItem.index,e.items.length))}),C(d+a,function(t,a,o,n){var s=e.items.length;o.counter=s>1?R(i.tCounter,n.index,s):""}),C("BuildControls"+a,function(){if(e.items.length>1&&i.arrows&&!e.arrowLeft){var a=i.arrowMarkup,o=e.arrowLeft=t(a.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(v),s=e.arrowRight=t(a.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(v),r=n?"stacklapopupFastClick":"click";o[r](function(){e.prev()}),s[r](function(){e.next()}),e.isIE7&&(k("b",o[0],!1,!0),k("a",o[0],!1,!0),k("b",s[0],!1,!0),k("a",s[0],!1,!0)),e.container.append(o.add(s))}}),C(u+a,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),C(l+a,function(){o.off(a),e.wrap.off("click"+a),e.arrowLeft&&n&&e.arrowLeft.add(e.arrowRight).destroystacklapopupFastClick(),e.arrowRight=e.arrowLeft=null})},next:function(){e.direction=!0,e.index=D(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=D(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,i=e.st.gallery.preload,a=Math.min(i[0],e.items.length),o=Math.min(i[1],e.items.length);for(t=1;t<=(e.direction?o:a);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?a:o);t++)e._preloadItem(e.index-t)},_preloadItem:function(i){if(i=D(i),!e.items[i].preloaded){var a=e.items[i];a.parsed||(a=e.parseEl(i)),_("LazyLoad",a),"image"===a.type&&(a.img=t('<img class="stacklapopup-img" />').on("load.stacklapopuploader",function(){a.hasSize=!0}).on("error.stacklapopuploader",function(){a.hasSize=!0,a.loadError=!0,_("LazyLoadError",a)}).attr("src",a.src)),a.preloaded=!0}}}});var j="retina";t.magnificPopup.registerModule(j,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,i=t.ratio;(i=isNaN(i)?i():i)>1&&(C("ImageHasSize."+j,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/i,width:"100%"})}),C("ElementParse."+j,function(e,a){a.src=t.replaceSrc(a,i)}))}}}}),function(){var e="ontouchstart"in window,i=function(){x.off("touchmove"+a+" touchend"+a)},a=".stacklapopupFastClick";t.fn.stacklapopupFastClick=function(o){return t(this).each(function(){var n,s,r,l,c,d,p,u=t(this);e&&u.on("touchstart"+a,function(t){c=!1,p=1,d=t.originalEvent?t.originalEvent.touches[0]:t.touches[0],r=d.clientX,l=d.clientY,x.on("touchmove"+a,function(t){d=t.originalEvent?t.originalEvent.touches:t.touches,p=d.length,d=d[0],(Math.abs(d.clientX-r)>10||Math.abs(d.clientY-l)>10)&&(c=!0,i())}).on("touchend"+a,function(t){i(),c||p>1||(n=!0,t.preventDefault(),clearTimeout(s),s=setTimeout(function(){n=!1},1e3),o())})});u.on("click"+a,function(){n||o()})})},t.fn.destroystacklapopupFastClick=function(){t(this).off("touchstart"+a+" click"+a),e&&x.off("touchmove"+a+" touchend"+a)}}(),T()}(window.$tackla||window.Zepto)},219:function(t,e){t.exports.initiateTrackingPixel=function(t,e,i,a,o,n){if(!n||!n.isEnabled)return window.open(a,o||"_blank");var s=["https://",n.domain,"/start?widget_id=",t,"&tile_id=",e,"&product_id=",i].join("");fetch(s+"&check=1",{method:"GET",redirect:"manual"}).then(function(t){if("opaqueredirect"!==t.type)throw new Error(t.statusText);window.open(s,o||"_blank"),window.focus()}).catch(function(){window.open(a,o||"_blank"),window.focus()})}},220:function(t,e,i){"use strict";var a,o=window.$,n=i(136),s=i(150);o=window.$tackla||o,a=n.createClass(s,{initializer:function(t,e){this.init(t),this.bind(),this.render(e)},toString:function(){return"ImageSize"},init:function(t){this.el=o(t)[0],this.complete=this.el.complete,this.data={},this._timer=null,this.data.width=this.el.width,this.data.height=this.el.height},bind:function(){return this.log("bind() is executed"),o(window).resize(function(t){return function(e){if(!(t.el.width===t.data.width&&t.el.height===t.data.height))return o.extend(t.data,{width:t.el.width,height:t.el.height,widthRatio:t.el.width/t.data.naturalWidth,heightRatio:t.el.height/t.data.naturalHeight}),t.log("handleResize() is executed"),t.emit("change",[t.data])}}(this))},render:function(t){var e;return this.log("render() is executed"),this.complete?((e=new Image).src=this.el.src,this.log("Image '"+this.el.src+"' is loaded"),this.data.naturalWidth=e.width,this.data.naturalHeight=e.height,t(!0,this.data)):(this.log("Image '"+this.el.src+"' is NOT ready"),(e=new Image).src=this.el.src,e.onload=function(i){return function(a){return i.log("Image '"+e.src+"' is loaded"),i.data.naturalWidth=e.width,i.data.naturalHeight=e.height,t(!0,i.data)}}(this),e.onerror=function(i){return function(a){return i.log("Image '"+e.src+"' is failed to load"),t(!1,i.data)}}(this))}},"ImageSize"),window.Stackla||(window.Stackla={}),n.getImageSize=function(t,e){return new a(t,e)},t.exports={get:function(t,e){return new a(t,e)}}},221:function(t,e,i){"use strict";var a,o,n,s=window.$;function r(t,e){if(this.overlay=s(t),this.relateTo=s(e.relateTo)||null,this.constrainBy=s(e.constrainBy)||null,this.skipViewport=!1!==e.skipViewport,!this.overlay)throw new Error("`overlay` element is required");if(!this.relateTo)throw new Error("`relateTo` option is required")}(function(t){(function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}t.ui=t.ui||{};var a,o,n=Math.max,s=Math.abs,r=Math.round,l=/left|center|right/,c=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,u=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==a)return a;var e,i,o=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=o.children()[0];return t("body").append(o),e=n.offsetWidth,o.css("overflow","scroll"),i=n.offsetWidth,e===i&&(i=o[0].clientWidth),o.remove(),a=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),a=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),o="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,n="scroll"===a||"auto"===a&&e.height<e.element[0].scrollHeight;return{width:n?t.position.scrollbarWidth():0,height:o?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),a=t.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:a,isDocument:o,offset:a||o?{left:0,top:0}:i.offset(),scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:a||o?i.width():i.outerWidth(),height:a||o?i.height():i.outerHeight()}}},t.fn.position=function(a){if(!a||!a.of)return f.apply(this,arguments);a=t.extend({},a);var u,h,g,m,v,w,y=t(a.of),x=t.position.getWithinInfo(a.within),C=t.position.getScrollInfo(x),k=(a.collision||"flip").split(" "),_={};return w=function(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}(y),y[0].preventDefault&&(a.at="left top"),h=w.width,g=w.height,m=w.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,e,i=(a[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",t=d.exec(i[0]),e=d.exec(i[1]),_[this]=[t?t[0]:0,e?e[0]:0],a[this]=[p.exec(i[0])[0],p.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===a.at[0]?v.left+=h:"center"===a.at[0]&&(v.left+=h/2),"bottom"===a.at[1]?v.top+=g:"center"===a.at[1]&&(v.top+=g/2),u=e(_.at,h,g),v.left+=u[0],v.top+=u[1],this.each(function(){var l,c,d=t(this),p=d.outerWidth(),f=d.outerHeight(),w=i(this,"marginLeft"),b=i(this,"marginTop"),T=p+w+i(this,"marginRight")+C.width,P=f+b+i(this,"marginBottom")+C.height,I=t.extend({},v),E=e(_.my,d.outerWidth(),d.outerHeight());"right"===a.my[0]?I.left-=p:"center"===a.my[0]&&(I.left-=p/2),"bottom"===a.my[1]?I.top-=f:"center"===a.my[1]&&(I.top-=f/2),I.left+=E[0],I.top+=E[1],o||(I.left=r(I.left),I.top=r(I.top)),l={marginLeft:w,marginTop:b},t.each(["left","top"],function(e,i){t.ui.position[k[e]]&&t.ui.position[k[e]][i](I,{targetWidth:h,targetHeight:g,elemWidth:p,elemHeight:f,collisionPosition:l,collisionWidth:T,collisionHeight:P,offset:[u[0]+E[0],u[1]+E[1]],my:a.my,at:a.at,within:x,elem:d})}),a.using&&(c=function(t){var e=m.left-I.left,i=e+h-p,o=m.top-I.top,r=o+g-f,l={target:{element:y,left:m.left,top:m.top,width:h,height:g},element:{element:d,left:I.left,top:I.top,width:p,height:f},horizontal:0>i?"left":e>0?"right":"center",vertical:0>r?"top":o>0?"bottom":"middle"};p>h&&h>s(e+i)&&(l.horizontal="center"),f>g&&g>s(o+r)&&(l.vertical="middle"),l.important=n(s(e),s(i))>n(s(o),s(r))?"horizontal":"vertical",a.using.call(this,t,l)}),d.offset(t.extend(I,{using:c}))})},t.ui.position={fit:{left:function(t,e){var i,a=e.within,o=a.isWindow?a.scrollLeft:a.offset.left,s=a.width,r=t.left-e.collisionPosition.marginLeft,l=o-r,c=r+e.collisionWidth-s-o;e.collisionWidth>s?l>0&&0>=c?(i=t.left+l+e.collisionWidth-s-o,t.left+=l-i):t.left=c>0&&0>=l?o:l>c?o+s-e.collisionWidth:o:l>0?t.left+=l:c>0?t.left-=c:t.left=n(t.left-r,t.left)},top:function(t,e){var i,a=e.within,o=a.isWindow?a.scrollTop:a.offset.top,s=e.within.height,r=t.top-e.collisionPosition.marginTop,l=o-r,c=r+e.collisionHeight-s-o;e.collisionHeight>s?l>0&&0>=c?(i=t.top+l+e.collisionHeight-s-o,t.top+=l-i):t.top=c>0&&0>=l?o:l>c?o+s-e.collisionHeight:o:l>0?t.top+=l:c>0?t.top-=c:t.top=n(t.top-r,t.top)}},flip:{left:function(t,e){var i,a,o=e.within,n=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,d=c-l,p=c+e.collisionWidth-r-l,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,h=-2*e.offset[0];0>d?(0>(i=t.left+u+f+h+e.collisionWidth-r-n)||s(d)>i)&&(t.left+=u+f+h):p>0&&((a=t.left-e.collisionPosition.marginLeft+u+f+h-l)>0||p>s(a))&&(t.left+=u+f+h)},top:function(t,e){var i,a,o=e.within,n=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,d=c-l,p=c+e.collisionHeight-r-l,u="top"===e.my[1],f=u?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>d?(0>(a=t.top+f+h+g+e.collisionHeight-r-n)||s(d)>a)&&(t.top+=f+h+g):p>0&&((i=t.top-e.collisionPosition.marginTop+f+h+g-l)>0||p>s(i))&&(t.top+=f+h+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,a,n,s,r=document.getElementsByTagName("body")[0],l=document.createElement("div");for(s in e=document.createElement(r?"div":"body"),a={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(a,{position:"absolute",left:"-1000px",top:"-1000px"}),a)e.style[s]=a[s];e.appendChild(l),(i=r||document.documentElement).insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",n=t(l).offset().left,o=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(),t.ui.position})(s=window.$tackla||s),r.prototype.align=function(){s(this.overlay).position({of:this.relateTo,my:"right top",at:"left top",collision:"flipfit"})},window.Stackla?window.Stackla.AlignMe=r:window.AlignMe=r,"object"==typeof e&&e?t.exports=r:(o=[e],void 0===(n="function"==typeof(a=r)?a.apply(e,o):a)||(t.exports=n))}}]);