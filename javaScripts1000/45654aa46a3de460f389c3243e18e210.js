"use strict";window.freedom.restClient=function(){var t=100,o=300;function u(e,t){e.displayLoading&&window.freedom.nsPubSub.pub("nsLoading."+t,document.body),e.buttonWithLoading&&window.freedom.nsPubSub.pub("disabled.button",e.buttonWithLoading,t)}function s(e){return e.disableDebounce?0:t}function a(e){clearTimeout(e.loadingTimeout),e.reqEndTime=(new Date).getTime();var t=e.reqEndTime-e.reqStartTime-s(e);0<t&&t<o?setTimeout(function(){u(e,"hide")},o-t):u(e,"hide")}function d(){window.freedom.nsPubSub.pub("placeholder.apply")}return{request:function(t,o){var e;(e=o).reqStartTime=(new Date).getTime(),e.loadingTimeout=setTimeout(function(){u(e,"show")},s(e));try{o.headers||(o.headers={});var r="no-store, no-cache, must-revalidate";(0<=t.indexOf("/refactoring/tpl/frdmprcs/",0)||0<=t.indexOf("/frdmprcs/",0))&&(r="public"),o.headers["Cache-Control"]=r;var n={url:t,headers:o.headers,data:o.data,method:o.method||"get",success:function(e){a(o),o.success&&(o.success(e),d()),window.freedom.nsPubSub.pub("RestClient.afterAjax")},error:function(e){var t;a(o),o.error&&(o.error(e),d()),401===e.status&&"string"==typeof e.response&&(t=JSON.parse(e.response),!o.preventRedirect&&t.url&&(window.location=t.url)),window.freedom.nsPubSub.pub("RestClient.afterAjax")}};o.type&&(n.type=o.type),o.complete&&(n.complete=o.complete),o.timeout&&(n.timeout=o.timeout),window.freedom.nsPubSub.pub("RestClient.beforeAjax");var i=window.reqwest(n);"always"in o&&i.always(o.always)}catch(e){console.error("error on request "+t),console.error(e.stack)}}}}();