ï»¿!function(e){function t(t){for(var o,r,n=t[0],l=t[1],s=t[2],d=0,u=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);u.length;)u.shift()();return a.push.apply(a,s||[]),_()}function _(){for(var e,t=0;t<a.length;t++){for(var _=a[t],o=!0,n=1;n<_.length;n++){var l=_[n];0!==i[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=_[0]))}return e}var o={},i={"web/page":0},a=[];function r(t){if(o[t])return o[t].exports;var _=o[t]={i:t,l:!1,exports:{}};return e[t].call(_.exports,_,_.exports,r),_.l=!0,_.exports}r.e=function(){return Promise.resolve()},r.m=e,r.c=o,r.d=function(e,t,_){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:_})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var _=Object.create(null);if(r.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(_,o,function(t){return e[t]}.bind(null,o));return _},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/";var n=window.webpackJsonp=window.webpackJsonp||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var c=l;a.push([296,"evbus","lottie","common","palette","6596aa1d08b2a3df4cf3c1602c166e21","38bbba19c51366e1cdf70b622e97cd8e","vendors"]),_()}({"/ZeZ":function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="menu_outline_24",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="menu_outline_24"><path d="M21 11H3a1 1 0 100 2h18a1 1 0 100-2zm0-7H3a1 1 0 000 2h18a1 1 0 100-2zM3 20h18a1 1 0 100-2H3a1 1 0 100 2z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 24 24",id:c,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=u,t.a=p},"/bCM":function(e,t,_){"use strict";_.d(t,"a",(function(){return o})),_.d(t,"g",(function(){return i})),_.d(t,"b",(function(){return a})),_.d(t,"c",(function(){return r})),_.d(t,"d",(function(){return n})),_.d(t,"e",(function(){return l})),_.d(t,"f",(function(){return s}));var o=600,i=140,a=0,r=7,n=0,l=void 0,s=2},"1+Fu":function(e,t,_){"use strict";_.d(t,"c",(function(){return p})),_.d(t,"b",(function(){return b})),_.d(t,"a",(function(){return m}));_("rE2o"),_("ioFf"),_("HEwt"),_("a1Th"),_("KKXr"),_("91GP"),_("rGqo"),_("Btvt"),_("9AAn");var o=_("DM26");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var _=[],o=!0,i=!1,a=void 0;try{for(var r,n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(_.push(r.value),!t||_.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return _}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(_):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var _=0,o=new Array(t);_<t;_++)o[_]=e[_];return o}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var _=arguments[t];for(var o in _)Object.prototype.hasOwnProperty.call(_,o)&&(e[o]=_[o])}return e}).apply(this,arguments)}var l=new Map,s=!1;function c(e){return e.queue||e.key}function d(){l.forEach((e,t)=>{var _,o,i=e.onData,a=e.onUpdateKey,r=e.ts;if(_=t,(null===(o=window.curNotifier)||void 0===o?void 0:o.addQueues)&&!curNotifier.addQueues[c(_)]){var l=n({},t,{ts:r});Notifier.addKey(l,O.bind(null,i,a,l))}})}function u(){s||(s=setInterval(d,3e3))}function p(e){!function(e){var t;if(!(null===(t=window.curNotifier)||void 0===t?void 0:t.addQueues))return!1;delete curNotifier.addQueues[c(e)]}(e),l.delete(e),0===l.size&&(clearInterval(s),s=!1)}function b(e){var t=[];l.forEach((_,o)=>{(null==o?void 0:o.queue)===e&&t.push(o)}),t.forEach(e=>{p(e)})}function E(e,t){var _,o=void 0,r=null==e?void 0:e.queue;if(r){var n,s=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,_=function(){};return{s:_,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,n=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){n=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(n)throw i}}}}(l);try{for(s.s();!(n=s.n()).done;){var c=i(n.value,1)[0];if((null==c?void 0:c.queue)===r){o=c;break}}}catch(e){s.e(e)}finally{s.f()}}var d=null!==(_=o)&&void 0!==_?_:e;l.set(d,t)}function O(e,t,_,i,a){if(a.failed)return p(_),void function(e,t,_,i){var a;switch(e){case 1:case 2:case 3:case 5:a=i(t,e);break;case 4:a=Object(o.c)(1).then(()=>t);break;default:throw new Error("Unkonwn error from queue: "+e)}Object(o.c)(3).then(()=>a).then(e=>{l.set(e,{onUpdateKey:i,onData:_,ts:e.ts}),d(),u()})}(a.err,_,e,t);var r=intval(a.ts);Object.assign(_,{ts:r}),E(_,{onData:e,onUpdateKey:t,ts:r}),a.events.map(e=>"string"==typeof e?e.split("<!>"):e).forEach(e)}function m(e,t,_){return Notifier.addKey(e,O.bind(null,t,_,e)),l.set(e,{onData:t,onUpdateKey:_,ts:e.ts}),u(),{stop:p.bind(null,e)}}},"12ku":function(e,t,_){"use strict";_.d(t,"a",(function(){return l})),_.d(t,"b",(function(){return s}));_("HEwt"),_("a1Th"),_("Btvt"),_("rGqo"),_("rE2o"),_("ioFf");var o=_("zxIV"),i=_("lXE5"),a=_("k3PD");function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var _=[],o=!0,i=!1,a=void 0;try{for(var r,n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(_.push(r.value),!t||_.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return _}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var _=Object.prototype.toString.call(e).slice(8,-1);"Object"===_&&e.constructor&&(_=e.constructor.name);if("Map"===_||"Set"===_)return Array.from(_);if("Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var _=0,o=new Array(t);_<t;_++)o[_]=e[_];return o}var l="onboarding_bg_rect";class s{constructor(e,t){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.el=e,this.text=t,this.hideDarkness=!0,this.oldColor=!1;var o=_.class?_.class:"",i={autoShow:!1,noAutoHideOnWindowClick:!0,content:t instanceof HTMLElement?t:""+t,cls:"feature_intro_tt feature_intro_blue_tt tutorial_tip_tt "+o,appendToParent:!0,onHide:this.ttOnHide.bind(this),scrollOffset:_.scrollOffset||0};_.side&&(i.forceSide=_.side),_.offset&&(i.offset=_.offset),_.width&&(i.width=_.width),_.shift&&(i.centerShift=_.shift),_.border?this.border=_.border:this.border=[10,10,10,10],_.ttOnHide&&(i.onHide=_.ttOnHide),_.withCloseButton&&(i.withCloseButton=_.withCloseButton,i.onCloseButtonClick=_.onCloseButtonClick),_.align&&(i.align=_.align),this.ttParams=i,this.opts=_,this.initOnboardingBG()}initOnboardingBG(){if(!window.onboardingBG){var e=se('\n<div id="onboarding_layout">\n  <svg id="onboarding_bg_header" width="100%" height="49px">\n    <rect id="onboarding_bg_rect" x="0" y="0" width="100%" height="100%" fill-opacity="0.8" fill="#000"></rect>\n  </svg>\n  <svg id="onboarding_bg" width="100%" height="100%">\n  <defs>\n    <mask id="mask" x="0" y="0" width="100%" height="100%">\n      <rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect>\n      <rect id="onboarding_bg_clip" x="0" y="0" width="0" height="0" fill="#000" rx="8" ry="8"></rect>\n    </mask>\n  </defs>\n  <rect id="onboarding_bg_rect" x="0" y="42" width="100%" height="100%" mask="url(#mask)" fill-opacity="0.8"></rect>\n  </svg>\n</div>\n      ');Object(o.z)(e,window.layerBG),window.onboardingBGHeader=ge("onboarding_bg_header"),window.onboardingBG=ge("onboarding_bg"),window.onboardingBGRect=ge(l),window.onboardingBGClip=ge("onboarding_bg_clip"),window.cur.destroy.push(()=>{hide(window.onboardingBG),hide(window.onboardingBGHeader),removeClass(ge("page_header_cont"),"onboarding"),this.hideDarkness=!0,this.hideTT(),delete window.onboardingBG,delete window.onboardingBGHeader,delete window.onboardingBGRect,delete window.onboardingBGClip,this.opts.onBGClick&&removeEvent(window.onboardingBG,"click",this.opts.onBGClick)}),this.opts.onBGClick&&addEvent(window.onboardingBG,"click",this.opts.onBGClick)}}showTT(){var e=r(Object(o.V)(this.el),2)[1];this.tt=new window.ElementTooltip(this.el,this.ttParams),this.opts.highlight&&(this.addDarkness(),this.addHighlight()),this.tt.show();var t=this.tt.getContent();Object(a.a)(this.el)&&Object(a.a)(t)||Object(i.g)(e-42-this.ttParams.scrollOffset)}hideTT(){this.tt&&(this.tt.destroy(),this.removeDarkens(),this.hideDarkness&&(removeEvent(window,"scroll"),removeEvent(window,"resize")))}addHighlight(){window.onboardingBGClip&&(this.highlightElement(),addEvent(window,"scroll",this.onScrollTT.bind(this)),addEvent(window,"resize",this.onResizeTT.bind(this)))}highlightElement(){var e=this.el.offsetWidth,t=this.el.offsetHeight,_=Object(o.V)(this.el);attr(window.onboardingBGClip,"width",e+this.border[1]+this.border[3]),attr(window.onboardingBGClip,"height",t+this.border[0]+this.border[2]),attr(window.onboardingBGClip,"x",_[0]-this.border[1]),attr(window.onboardingBGClip,"y",_[1]-this.border[0])}onResizeTT(){this.setDartToFullWidth(),this.highlightElement()}onScrollTT(){var e=this.getPageHeight();window.onboardingBG.height!=e&&this.setDartToFullHeight()}setDartToFullHeight(){attr(window.onboardingBG,"height",this.getPageHeight())}setDartToFullWidth(){attr(window.onboardingBG,"width",this.getPageWidth()),attr(window.onboardingBGHeader,"width",this.getPageWidth())}addDarkness(){Object(o.fb)(window.onboardingBG)||(this.setDartToFullHeight(),this.setDartToFullWidth(),show(window.onboardingBG),Object(o.fb)(window.onboardingBGHeader)||(show(window.onboardingBGHeader),addClass(ge("page_header_cont"),"onboarding")))}removeDarkens(){this.hideDarkness&&(hide(window.onboardingBG),hide(window.onboardingBGHeader),removeClass(ge("page_header_cont"),"onboarding"))}ttOnHide(){this.hideTT()}show(){setTimeout(this.showTT.bind(this),1e3)}getPageWidth(){var e=document.documentElement,t=document.body;return Math.max(t.scrollWidth,e.scrollWidth,t.offsetWidth,e.offsetWidth,t.clientWidth,e.clientWidth)}getPageHeight(){var e=document.documentElement,t=document.body;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)}}},296:function(e,t,_){e.exports=_("FgzW")},"2vnv":function(e,t,_){"use strict";_.d(t,"b",(function(){return m})),_.d(t,"i",(function(){return h})),_.d(t,"g",(function(){return v})),_.d(t,"e",(function(){return f})),_.d(t,"d",(function(){return g})),_.d(t,"c",(function(){return P})),_.d(t,"h",(function(){return M})),_.d(t,"f",(function(){return C})),_.d(t,"a",(function(){return T}));var o,i=_("zxIV"),a=_("Egk5"),r=_("EasH"),n=_("v+DW"),l=_("Xrg9"),s=_("t7n3"),c=_("D1OX"),d=_("3oLO"),u=_("4+be"),p=_("kcIO"),b=_("jE6c");!function(e){e[e.DELETED_USER=-5]="DELETED_USER",e[e.BLACKLISTED=-4]="BLACKLISTED",e[e.FRIENDS_COUNT_EXCEEDED=-3]="FRIENDS_COUNT_EXCEEDED",e[e.FLOOD_CONTROL=-2]="FLOOD_CONTROL",e[e.SERVER_ERROR=-1]="SERVER_ERROR",e[e.NOT_FRIENDS=0]="NOT_FRIENDS",e[e.REQUEST_FROM_USER=1]="REQUEST_FROM_USER",e[e.REQUEST_TO_USER=2]="REQUEST_TO_USER",e[e.ARE_FRIENDS=3]="ARE_FRIENDS"}(o||(o={}));var E=_("Ieup"),O=function(){var e;return"feed"===window.cur.module&&window.Feed?null===(e=window.Feed)||void 0===e?void 0:e.getModuleRef():window.cur.module};function m(e,t){if(void 0===t&&(t={}),e){var _=Object(i.v)(e,"from")||"user_rec",o=Object(i.v)(e,"code"),a={scrollY:!1,onViewItem:function(e,o){var i;(null===(i=null==t?void 0:t.checkViewItem)||void 0===i?void 0:i.call(t,e))||h(e,o,_)}};Object(i.v)(e,"next")&&(a.onLoadMore=function(){d.a.post("al_friends.php",{act:"a_recomm_friends_gallery",next:Object(i.v)(e,"next"),track_code:o,friend_id:t.friendId||0,ref:O()},{onDone:function(t,_){var o,a=[];t&&(a=Object(i.p)(Object(i.g)("div",{innerHTML:t}))),null===(o=Object(c.b)(e))||void 0===o||o.addMore(a,!_),Object(i.v)(e,"next",_||null)}})}),new c.a(e,a)}}function h(e,t,_){if(!e.viewed&&Object(i.ab)(e,"ui_gallery_item")){var o=+Object(i.v)(e,"uid"),a=O(),r=w(e);v(["show_user_rec",o,Date.now(),t,a,_,r]),e.viewed=!0}}function w(e){var t,_=Object(i.v)(e,"code");return _||(t=Object(i.Y)("ui_gallery",e),_=Object(i.v)(t,"code")),_||""}function v(e,t){void 0===t&&(t=!1);var _=f();_.push(e),l.a.set("friends_recomm",_),M(t)}function f(e,t,_){void 0===e&&(e=!1),void 0===_&&(_=!1);var o=l.a.get("friends_recomm"),i=Array.isArray(o)?o:[];return t&&(i=i.filter((function(e){return(_?e[1]!==t:e[1]===t)&&Object(s.o)(e[0],["show_user_rec","open_user"])}))),e&&(i=i.map((function(e){return e.join("|")}))),i}function g(e){if(e){var t=f(!1,e,!0);t.length?l.a.set("friends_recomm",t):l.a.remove("friends_recomm")}else l.a.remove("friends_recomm");!function(e){if(e){var t=l.a.get("friends_recomm_visited")||{};delete t[e],l.a.set("friends_recomm_visited",t)}else l.a.remove("friends_recomm_visited")}(e)}function P(e){return(l.a.get("friends_recomm_visited")||{})[e]}function M(e){var t,_;void 0===e&&(e=!1),!(null===(t=window.cur)||void 0===t?void 0:t.friendsRecommLogIdle)&&(null===(_=null===window||void 0===window?void 0:window.curNotifier)||void 0===_?void 0:_.idle_manager)&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=function(){clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(M)),clearTimeout(window.cur.friendsRecommLog),e?D():window.cur.friendsRecommLog=window.setTimeout(D,1e4)}function D(){if(!window.cur.friendsRecommProcess){var e=f(!0);e.length&&(window.cur.friendsRecommProcess=!0,g(),d.a.post("al_friends.php",{act:"a_recomm_logs",logs:e},{onDone:function(){delete window.cur.friendsRecommProcess},onFail:function(){return C(e),delete window.cur.friendsRecommProcess,!0}}))}}function C(e){var t=f();t=e.map((function(e){return e.split("|")})).concat(t),l.a.set("friends_recomm",t)}var T={toggleRecommFriend:function(e,t,_){var l=Object(i.Y)("friend_recomm_card",e),s=l&&+Object(i.v)(l,"uid");if(s){var c={act:"add",mid:s,hash:_,from:"user_rec",ref:O(),track_code:w(l),ts:Date.now()},m=f(!0,s);return m.length&&(g(s),c.logs=m),d.a.post("al_friends.php",c,{onDone:function(t,_){if(Object(i.Cb)(e,t),Object(i.c)(e,"secondary"),Object(n.f)(e,!0),Object(i.c)(l,"friend_recomm_card_accepted"),Object(i.kb)(Object(i.L)("wall_card_text_special",l)),function(e){if(Object(b.l)(e)){var t=e;return(null==t?void 0:t.result_code)===o.REQUEST_FROM_USER}return!1}(_)&&_.friend_request_add_sent_message_nudge){var r=t;Object(p.g)("",{},{tooltipHandler:(s=_.friend_request_entrypoint,function(e,t){var _=t.hide;Object(a.b)(e.querySelector('[data-section-ref="friend_request_notification_send_message"]'),"click",(function(e){var t;if(e.currentTarget instanceof HTMLElement){var o=parseInt(null!==(t=e.currentTarget.getAttribute("data-message-user-id"))&&void 0!==t?t:"");if(!o||Object(a.d)(e))return!0;_(),Object(E.h)(e,o,{params:{box_custom_entrypoint:s}})}}))}),text:_.friend_request_add_sent_message_nudge,title:r})}var s},onFail:function(e){if(m&&C(m),e)return Object(r.d)(Object(u.d)("global_error"),e),!0},showProgress:function(){return Object(n.o)(e)},hideProgress:function(){return Object(n.w)(e)}}),Object(a.c)(t),!1}},hideRecommFriend:function(e,t,_){var o=Object(i.Y)("friend_recomm_card",e),l=o&&+Object(i.v)(o,"uid");if(l){var s=Object(i.Y)("ui_gallery",e),p=O(),b=Object(i.v)(o,"code")||Object(i.v)(s,"code")||"";return d.a.post("al_friends.php",{act:"hide_possible",mid:l,ref:p,track_code:b,hash:_},{onDone:function(){var t=Object(c.b)(Object(i.Y)("ui_gallery",e));if(t){var _=Object(i.Y)("ui_gallery_item",e);t.removeItem(_)}},onFail:function(e){if(e)return Object(r.d)(Object(u.d)("global_error"),e),!0},showProgress:function(){return Object(n.o)(e)},hideProgress:function(){return Object(n.w)(e)}}),Object(a.c)(t),!1}},onClickRecommFriend:function(e){if(Object(i.ab)(e,"ui_gallery_item")||(e=Object(i.Y)("ui_gallery_item",e)),e){var t=+Object(i.v)(e,"uid"),_=O(),o=w(e);!function(e,t,_){var o=l.a.get("friends_recomm_visited")||{};o[e]={ref:t,trackCode:_},l.a.set("friends_recomm_visited",o)}(t,_,o),v(["open_user",t,Date.now(),_,o])}}}},"34p4":function(e,t,_){"use strict";_.d(t,"a",(function(){return o}));var o=function(e){var t=e.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/);if(t)return{type:t[3]||"wall",id:t[1]+"_"+t[4]}}},"3EzW":function(e,t,_){"use strict";_.d(t,"a",(function(){return o})),_.d(t,"b",(function(){return r}));var o,i=_("DM2o"),a=_("W9Tc");function r(e){var t={event_type:e,nav_screen:window.cur.module};Object(a.b)("best_friends_analytics_log")&&console.log(t),Object(i.a)("best_friends_product_analytic",t)}!function(e){e.addFriendsFromChat="add_friends_from_chat",e.clear="clear",e.moreChats="more_chats",e.selectFriendFromSearch="select_friend_from_search",e.selectChatFromSearch="select_chat_from_search",e.saveBestFriendsList="save_best_friends_list",e.updatePopupSave="update_popup_save",e.updatePopupCancel="update_popup_cancel",e.createPostFromPopupBest="create_post_from_popup_best",e.createPostFromPopupFriends="create_post_from_popup_friends",e.clickToLockFriends="click_to_lock_friends",e.clickToLockBestFriends="click_to_lock_best_friends",e.editBestFriendsFromPopup="edit_best_friends_from_popup",e.editBestFriends="edit_best_friends",e.selectBestFriends="select_best_friends",e.clickToBestFriendsEntrypoint="click_to_best_friends_entrypoint"}(o||(o={}))},"4Ch9":function(e,t,_){"use strict";_.d(t,"a",(function(){return O})),_.d(t,"i",(function(){return m})),_.d(t,"h",(function(){return M})),_.d(t,"m",(function(){return j})),_.d(t,"o",(function(){return I})),_.d(t,"l",(function(){return L})),_.d(t,"n",(function(){return A})),_.d(t,"d",(function(){return B})),_.d(t,"g",(function(){return k})),_.d(t,"f",(function(){return K})),_.d(t,"p",(function(){return S})),_.d(t,"e",(function(){return H})),_.d(t,"c",(function(){return F})),_.d(t,"k",(function(){return q})),_.d(t,"b",(function(){return V})),_.d(t,"j",(function(){return Y}));_("pIFo"),_("Vd3H"),_("rGqo"),_("Btvt"),_("HEwt"),_("SRfc");var o,i,a,r=_("ofcU"),n=_("b8yN"),l=_("awNS"),s=_("t7n3"),c=_("W28y"),d=_("FThC"),u=_("aqR2"),p=1576215,b=138305184,E=163176673,O="custom";function m(e){var t=e.conditions;t&&(ls.set(N(""),t),addClass(geByClass("conditions_clear_button")[0],"highlighted"));var _=e.conditions2;_&&(ls.set(N("2"),_),addClass(geByClass("conditions_clear_button")[1],"highlighted"))}function h(){return hasClass(l.b,"console_locked")}function w(){h()||addClass(l.b,"console_locked"),removeClass(l.b,"console_show_message")}function v(){var e=geByClass1("_apply_pattern",l.f),t=geByClass1("_search_reports",l.f);h()&&removeClass(l.b,"console_locked"),unlockButton(e),unlockButton(t)}function f(e,t){var _=geByClass1("_console_error",l.b),o=geByClass("console_item");_.innerHTML="",e||(e="");var i=ce("div");e&&(i.innerHTML=e),i.className=t?"error":"info_msg",e.match(/\/pattern[0-9]+/)&&o&&o.forEach((function(e){e.className="console_item red_item"})),addClass(l.b,"console_show_message"),_.appendChild(i),v()}function g(e){o&&clearTimeout(o),o=setTimeout(()=>{domData(l.b,"failed",0)},3e3),domData(l.b,"failed",1),console.error(e),f(e,!0)}function P(){var e=ge("queries",l.b);return geByClass1("_queries_toggle",l.b).innerHTML=isVisible(e)?"ÐÐ¾ÐºÐ°Ð·Ð°ÑÑ Ð·Ð°Ð¿ÑÐ¾ÑÑ":"Ð¡ÐºÑÑÑÑ Ð·Ð°Ð¿ÑÐ¾ÑÑ",toggle(e)}function M(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[],_=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",_={},o=function(e){var t="conditions_input"===e.id?domPS(e):domNS(e);return hasClass(t,"option_cleared")},i=function(t){return e&&o(t)};_["type"+t]=cur["uiSpamtype"+t].val();var a=ge("pattern_input"+t);_["pattern"+t]=i(a)?D(a):a.value,_["threshold"+t]=ge("threshold_input"+t).value;var r=ge("uid_input"+t);_["uid"+t]=i(r)?D(r):r.value;var n=ge("ip_input"+t);_["ip"+t]=i(n)?D(n):n.value;var l=ge("uahash_input"+t);_["uahash"+t]=i(l)?D(l):l.value;var s=ge("time_start_input"+t);_["time_start"+t]=i(s)?D(s):s.value;var c=ge("time_finish_input"+t);if(_["time_finish"+t]=i(c)?D(c):c.value,Object(u.b)())_["conditions"+t]=window["ConditionsEditor"+t].getPlainText();else{var d=ge("conditions_input"+t);_["conditions"+t]=i(d)?ls.get(N(t)):d.value}return _},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",_=[];Array.from(geByClass("option_cleared",e)).forEach((function(e){var t=geByTag1("input",domPN(e))||geByTag1("textarea",domPN(e));_.push(t.id)}));var o=[];return _.forEach(e=>{switch(e){case"pattern_input"+t:o|=cur.hideFieldsBitMasks.substring;break;case"ip_input"+t:o|=cur.hideFieldsBitMasks.ip;break;case"uahash_input"+t:o|=cur.hideFieldsBitMasks.uaHash;break;case"uid_input"+t:o|=cur.hideFieldsBitMasks.uid;break;case"time_finish_input"+t:o|=cur.hideFieldsBitMasks.timeFinish;break;case"time_start_input"+t:o|=cur.hideFieldsBitMasks.timeStart;break;case"conditions_input"+t:o|=cur.hideFieldsBitMasks.conditions}}),o};t.simplify=cur.uiSimplify.val(),t.duration=cur.uiDuration.val(),t.bantype=cur.uiBan.val(),t.search_period=cur.uiSearchPeriod.val();var i=cur.uiSearchPeriod.selectedItems();return i&&i.length>0&&(t.period_in_seconds=3===i[0].length&&1===i[0][2]?1:0),t.comment=ge("comment_input").value,t.all_actions=isChecked("all_actions")||!1,t.notbannedonly=isChecked("not_banned_only")||!1,t.linksonly=isChecked("links_only")||!1,t.wrap_actions=null===ge("wrap_actions")?1:isChecked("wrap_actions"),t.encode_entities=null===ge("encode_entities")?1:isChecked("encode_entities"),t.hidden_fields=o(geByClass1("pattern_part_root")),extend(t,_(e,"")),z()&&(t.hidden_fields2=o(geByClass1("pattern_part_child"),"2"),extend(t,_(e,"2"))),t}function D(e){return domData(e,"restore")}function C(e,t){return domData(e,"restore",t)}function T(){var e=ge("pattern_input"),t=geByClass1("_search_reports",l.f),_=M();if(!e.value)return scrollToTop(0),void notaBene(e);isButtonLocked(t)||(w(),lockButton(t),i&&(tooltips.destroy(i.el),i=!1),_.act="a_console_find_actions",ajax.post("noSpam.php",_,{onDone:e=>function(e){v(),geByClass1("_console",l.b).innerHTML=e;var t=geByClass1("_console_numfield_ip1024",l.b);t&&new InlineDropdown(t,{items:[[256,"/24 - 256"],[1024,"/22 - 1024"],[4096,"/20 - 4096"],[16384,"/18 - 16k"],[65536,"/16 - 65k"],[262144,"/14 - 262k"],[1048576,"/12 - 1kk"]],selected:256,withArrow:!0,keepTitle:!0,autoShow:!0,autoHide:300,onSelect:e=>k("ip"+e)})}(e),onFail:e=>g(e)}))}function y(e,t){"string"==typeof t&&(t=clean(t)),val(e,t),q(!1,ge(e),"reset")}function j(e){y("ip_input",e)}function I(e){y("uahash_input",e)}function L(e,t){Object(u.b)()?window.ConditionsEditor.update("append",e):(0!==e.length&&(ge("conditions_input").value+=ge("conditions_input").value?" "+(t?"||":"&&")+" "+e:e),H("reset"))}function A(e){y("threshold_input",e)}function B(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(e=M(!0));var t=Object.keys(e);t.sort();for(var _=[],o=0;o<t.length;o++){var i=t[o],a=e[i];_.push(encodeURIComponent(i)+"="+encodeURIComponent(a))}return"/noSpam?"+_.join("&")}function R(){var e=B(),t=geByClass1("_get_pattern_link");t&&t.tt&&t.tt.destroy(),addClass(t,"progress"),ajax.post("noSpam.php",{act:"get_search_link",link:e},{onDone:function(e){removeClass(t,"progress"),showTooltip(t,{text:e,slide:15,center:1,black:1,nohide:1,hidedt:400,shift:[0,2,0],onShowEnd:()=>{(0,window.selectText)("shorten_link"),setTimeout(t.tthide,3e3)}})},onFail:function(e){removeClass(t,"progress"),topError(e,{dt:5})}})}function W(){var e=geByClass1("debug_pattern",l.f);if(!isButtonLocked(e)){var t=extend(M(),{act:"debug_pattern"});w(),ajax.post("noSpam.php",t,{onDone:e=>f(e),onFail:e=>g(e)})}}function k(e,t){var _=isChecked("values_hist"),o=M();o.need_hist=_,o.act="numeric_field",o.field=e,o.custom_condition=t||"",cur.numFieldSel=e,ajax.post("noSpam.php",o,{onDone:function(o,i){var a=clean(t||e);showFastBox({width:_?330:710,title:a,dark:1,containerClass:"nospam_hist_wrap",hideButtons:_},o).evalBox(i)},progress:"console_query_fields_progress"})}function U(e){a=e,geByClass1("_nospam_console_custom_num_condition_patterns").innerHTML=e}function K(e){var t=2===e?cur.uiSpamtype2.val():cur.uiSpamtype.val();return showBox("noSpam.php",{act:"conditions_hint",spamtype:t},{dark:1,containerClass:"nospam_hint_wrap"})}function x(){var e=M(),t=geByClass1("_apply_pattern",l.f);e.act="apply_pattern",isButtonLocked(t)||null===document.querySelector(".console_failed_queries")&&(w(),lockButton(t),ajax.post("noSpam.php",e,{onDone:e=>f(e),onFail:e=>g(e)}))}function S(e){var t=["pattern_input","threshold_input","ip_input","uahash_input","time_finish_input","time_start_input","conditions_input"];if(Object(u.b)()){t.pop();var _=window.ConditionsEditor.getEditorState(),o=window.ConditionsEditor2.getEditorState();window.ConditionsEditor.setEditorState(o),window.ConditionsEditor2.setEditorState(_)}t.forEach(e=>{var t=ge(e).value;ge(e).value=ge(e+"2").value,ge(e+"2").value=t});var i=cur.uiSpamtype.val();cur.uiSpamtype.selectItem(cur.uiSpamtype2.val()),cur.uiSpamtype2.selectItem(i),toggleClass(e,"switched")}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return`nospam_conditions${e}_${vk.id}`}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Object(u.b)())window.ConditionsEditor.handleClearRestore();else{var _=ge("conditions_input"+t),o="option_cleared",i=domPS(_),a=function(){var e=_.value;ls.set(N(t),e),_.value="",e&&addClass(i,o)},r=function(){var e=ls.get(N(t));removeClass(i,o),removeClass(i,"highlighted"),e&&(ls.remove(N(t)),_.value=e)},n=function(){removeClass(i,o),removeClass(i,"highlighted"),ls.remove(N(t))};switch(e){case"clear":hasClass(i,o)?r():a();break;case"reset":n()}}}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=["pattern_input","ip_input","uahash_input","uid_input","time_finish_input","time_start_input"];t.forEach(t=>{q(document.getElementById(t+e).nextElementSibling,t+e,"soft_clear")})}function q(e,t,_){var o=ge(t),i=hasClass(e,"option_cleared");function a(_){var o=val(_);switch(C(_,o),t){case"pattern_input":case"pattern_input2":val(_,"/"),cur.uiSimplify.selectItem(32);break;case"threshold_input":case"threshold_input2":val(_,_.value&&"2"===_.value?"1":"2");break;default:val(_,"")}o&&addClass(e,"option_cleared")}switch(_){case"clear":i?function(){switch(t){case"threshold_input":case"threshold_input2":a(o);break;default:i&&(o.value=D(o))}removeClass(e,"option_cleared"),removeClass(e,"highlighted")}():a(o);break;case"reset":!function(){var e=geByClass1("option_clear",o.parentNode);C(o,""),removeClass(e,"option_cleared"),removeClass(e,"highlighted")}();break;case"reset_all":geByClass("option_clear").forEach((function(e){C(ge(e.getAttribute("data-option")),""),removeClass(e,"option_cleared"),removeClass(e,"highlighted")}));break;case"soft_clear":i||a(o)}}function z(){var e=geByClass1("_pattern_part_child");if(!isVisible(e))return!1;for(var t=geByClass("cloneable_input",e),_=0;_<t.length;_++)if(val(t[_]))return!0;return!1}function V(){var e=geByClass1("pattern_wrap");hasClass(e,"pattern_composite")?removeClass(e,"pattern_composite"):addClass(e,"pattern_composite")}function J(){}function $(e){var t=ge(document.activeElement);if(e.altKey)switch(-1!==[49,50,51,52,53,67,70,81,82,83,87].indexOf(e.keyCode)&&t&&t.blur(),e.keyCode){case 83:Object(l.a)()===l.j?T():Object(l.a)()===l.k&&Object(n.g)(Object(n.a)(),Object(n.b)());break;case 70:if(-1!==[p,b,E].indexOf(vk.id))return x();break;case 81:G("pattern_input");break;case 82:G("conditions_regex");break;case 87:G("conditions_simple");break;case 67:H("clear"),cur.conditions.deselectTemplate();break;case 49:cur.uiSearchPeriod.selectItem(1);break;case 50:cur.uiSearchPeriod.selectItem(24);break;case 51:cur.uiSearchPeriod.selectItem(72);break;case 52:cur.uiSearchPeriod.selectItem(240);break;case 53:cur.uiSearchPeriod.selectItem(2160)}}function G(e){if(e){var t=getSelectionText();switch(e){case"pattern_input":y("pattern_input",t),cur.uiSimplify.selectItem("0");break;case"conditions_simple":case"conditions_regex":var _=document.getSelection().baseNode,o=Object(d.getFieldName)(_);if(!o)return;L("conditions_simple"===e?`'${t}' << ${o}`:`@check_regex('${t=t.replace(/[.|+*(){}\[\]^$?]/g,"\\\\$&")}', ${o})`)}Object(d.removeSelectedText)()}}function Y(){var e=window.pageNode,t=window.browser.msie6?e:window,_=geByClass1("_pattern_buttons",l.f),o=Object(r.a)({handlers:(e,o)=>{o(_,"click","_search_reports",T),o(_,"click","_apply_pattern",x),o(_,"click","_get_pattern_link",R),o(_,"click","debug_pattern",W),o(l.b,"click","_queries_toggle",P),o(l.b,"click","_console_linkfield_action",e=>function(e){var t=domData(e.target,"field"),_=showFastBox.pbind({width:710,title:t,dark:1}),o=M();o.act="link_field",o.field=t,ajax.post("noSpam.php",o,{onDone:_,progress:"console_query_fields_progress"})}(e)),o(l.b,"click","_console_numfield_action",e=>{var t=e.target,_=domData(t,"field");_!==O?k(_):function(e){var t="nospam_console_custom_num_condition",_=()=>{var e=ge("nospam_console_custom_num_condition"),t=val(e);if(t){var _={act:"a_numeric_field_add_condition",custom_condition:t};ajax.post("noSpam.php",_,{onDone:U.pbind()}),k(O,t)}else notaBene(e)},o={className:"nospam_console_custom_num_condition_wrap",text:getTemplate("nospam_console_custom_num_condition"),forcetodown:1,nohide:1,forceNoHide:1,shift:[10,8],showdt:0,onShowEnd:()=>{elfocus(ge("nospam_console_custom_num_condition"))},onShowStart:()=>{val("nospam_console_custom_num_condition",ls.get(t)||"")},init:o=>{i=o;var a=ge("nospam_console_custom_num_condition");addEvent(a,"keypress",e=>onEnter(_,e)),addEvent(a,"keyup",()=>ls.set(t,val(a)));var r=geByClass1("_nospam_console_custom_num_condition_close",domPN(a));addEvent(r,"click",()=>e.tthide())}};i?(i.show(),_()):showTooltip(e,o),a&&U(a)}(t)}),o(t,"click","_nospam_console_custom_num_condition_pattern",e=>{var t=e.target,_=Object(s.J)(domData(t,"pattern"));val("nospam_console_custom_num_condition",_)}),o(t,"click","_nospam_console_custom_num_condition_clear",e=>{var t=e.target,_={act:"a_numeric_field_delete_condition",custom_condition:Object(s.J)(domData(t,"pattern"))};ajax.post("noSpam.php",_,{onDone:U.pbind()})}),o(l.b,"click","console_set_range",e=>{var t=e.target,_=domData(t,"time");_<0?y("time_finish_input",-_):_>0&&function(e){y("time_start_input",e)}(_)}),o(l.b,"click","console_uid",e=>{e.altKey&&e.ctrlKey&&(y("uid_input",e.target.dataset.uid),cancelEvent(e))}),e(t,"scroll",J),e(document,"keydown",$),o(l.f,"click","_option_clear",e=>{var t=e.target;q(t,domData(t,"option"),"clear")}),o(l.f,"click","_conditions_clear",e=>{H("clear",domNS(e.target).id.replace("conditions_input",""))}),o(document,"click","_console_conditions",e=>{var t=e.target;L(domData(t,"conditions"))}),o(l.b,c.b,"console_story",e=>{return t=e.target,_=domData(t,"owner_id"),o=domData(t,"story_id"),i=domData(t,"moderator_hash"),cur.noStoriesBack=!0,void window.showStory(`${_}/${_}_${o}/moderator_hash:${i}`);var t,_,o,i}),o(l.b,c.b,"_console_item_field_length",e=>{var t=Object(d.getFieldName)(e.target);if(t){var _=e.target.dataset.length,o="=";switch(e.target.dataset.mode){case"less":o="<",_=Math.floor(1.3*_);break;case"greater":o=">",_=Math.round(.7*_)}L(`@length(${t}) ${o} ${_}`)}}),o(l.b,"click","console_item_exclude_uid",e=>{addClass(e.target.closest(".console_item"),"console_item_excluded"),L("uid != "+e.target.dataset.uid)}),o(l.b,"click","console_item_pattern_from_sample",e=>{var t={pattern:"/",simplify:"simplify",uid:e.target.dataset.uid,ip:e.target.dataset.ip,ua_hash:e.target.dataset.ua,type:cur.uiSpamtype.val(),bantype:cur.uiBan.val(),duration:cur.uiDuration.val(),search_period:cur.uiSearchPeriod.val()};Object(c.r)(B(t))})}});cur.destroy.push(()=>{Object(r.c)(o)})}},"4PuL":function(e,t,_){"use strict";var o=_("lXE5"),i=_("aong"),a=_("zxIV"),r=_("t7n3"),n=_("Egk5");function l(e,t,_){if(Object(r.y)(t)?_=t:this._dragElClass=t,this.options=Object(r.i)({dragThreshold:l.DRAG_THRESHOLD_DIST},_),this._contEl=Object(a.J)(e),this._contEl){this._excludedCount=0;for(var o=0;o<this._contEl.children.length;o++)this._contEl.children[o].getAttribute("nodrag")&&this._excludedCount++;Object(n.b)(this._contEl,"mousedown",this._ev_mousedown_handler=this._onMouseDown.bind(this)),Object(a.vb)(this._contEl,"position","relative"),this._inited=!0,this._updateScrollbar=this._initUpdaterScrollbar()}}l.AUTO_SCROLL_DY=10,l.DRAG_THRESHOLD_DIST=0,l.AUTO_SCROLL_DISTANCE_THRESHOLD=300,l.AUTO_SCROLL_GAP=300,l.prototype.destroy=function(){this._inited&&(this._inited=!1,this._deinitEvents(!0))},l.prototype._getParentDragItemEl=function(e){for(var t,_=e;_&&(t=Object(a.C)(_))!==this._contEl;)_=t;return _===this._curPlaceholderEl&&(_=null),_},l.prototype._onKey=function(e){e.keyCode===n.a.ESC&&this.isCurrentlyDragging()&&this._onMouseUp()},l.prototype._onMouseDown=function(e){if(!(this._disabled||0!=e.button||this._curDragEl||Object(a.e)(e.target,"nodrag")||this._dragElClass&&!Object(a.q)(this._dragElClass,e.target))){for(var t=e.target;t&&t!==window.document;){if(Object(r.r)(Object(a.v)(t,"nodrag")))return;t=Object(a.C)(t)}var _=this._getParentDragItemEl(e.target);if(_&&!Object(a.e)(_,"nodrag")&&(Object(a.kb)(Object(a.L)("ui_gridsorter_placeholder"),this._contEl),this._contInfo=this._contInfo||{prevSize:Object(a.S)(this._contEl)},this._ensureGridIsActual(),!(this._grid.length<=1))){var o=window.getComputedStyle(_),i=Object(a.V)(_);this._initial={candidateEl:_,x:e.clientX,y:e.clientY,itemMargin:{x:parseInt(o.marginLeft),y:parseInt(o.marginTop)},shift:{x:e.pageX-i[0],y:e.pageY-i[1]}},Object(n.b)(document,"mousemove",this._ev_mousemove_handler=this._onMouseMove.bind(this)),Object(n.b)(document,"mouseup",this._ev_mouseup_handler=this._onMouseUp.bind(this)),Object(n.b)(document,"keydown",this._ev_keydown_handler=this._onKey.bind(this)),cur.cancelClick=!1,Object(n.c)(e)}}},l.prototype._dist=function(e){return Math.abs(e.clientX-this._initial.x)+Math.abs(e.clientY-this._initial.y)},l.prototype._onMouseUp=function(e){var t=this._curDragEl,_=!e;if(this._curDragEl){this._curDragEl=null,Object(a.mb)(t,"ui_gridsorter_moveable_notrans"),this._curOverCell||(this._curOverCell={el:this._curPlaceholderEl,pos:Object(a.V)(this._curPlaceholderEl),size:Object(a.S)(this._curPlaceholderEl)});var o=this._curOverCell.pos,i=this._curOverCell.el,r=this._grid[this._curDragCellIndex],l=r&&r.size;Object(a.Y)("_ape_item_list",t)&&(o[0]+=20,o[1]+=20),l&&this._isShiftToLeft&&(o[1]-=l[1]-this._curOverCell.size[1]),setTimeout(()=>{if(_){for(var e=0,i=this._grid.length;e<i;e++){var a=this._grid[e];a.dirty&&this._setPos(a.el,{left:0,top:0})}this._setPos(t,this._initialCurDragPos)}else this._setPos(t,{left:o[0],top:o[1]})}),setTimeout(()=>{if(Object(a.kb)(this._curPlaceholderEl),Object(a.mb)(this._contEl,"ui_gridsorter_cont"),this.options.dragCls&&Object(a.mb)(t,this.options.dragCls),this._inited){var e;if(_){for(var o=this._grid.length,r=0;r<o;r++){var n=this._grid[r];n.dirty&&this._setPos(n.el,{left:null,top:null})}this._setPos(t,{left:null,top:null,width:null,height:null})}else{var l;e=this._isShiftToLeft?Object(a.B)(i):i,this._contEl.insertBefore(t,e);var s=-1,c=this._initial.hasInlineSize;this._setPos(t,{left:null,top:null}),c||Object(a.vb)(t,{width:null,height:null});for(var d=this._grid.length,u=0;u<d;u++){var p=this._grid[u];(p.dirty||p.el===t)&&(this._setPos(p.el,{left:null,top:null}),c||Object(a.vb)(p.el,{width:null,height:null}),p.pos=this._calcElementPos(p.el),p.dirty=!1),p.el===t?l=u:p.el===i&&(s=u)}if(s>=0){var b=this._grid.splice(l,1);this._grid.splice(s,0,b[0])}}Object(a.mb)(t,"ui_gridsorter_moveable"),this._curOverCell=this._curPlaceholderEl=null,_&&this.update(),this.options.onDragFinish&&this.options.onDragFinish(t),i!==t&&!_&&this.options.onReorder&&this.options.onReorder(t,e,Object(a.D)(t))}},210),e&&this._dist(e)>5&&(Object(n.c)(e),cur.cancelClick=!0)}this._updateScrollbar(),this._deinitEvents(),t&&this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,t),_||t&&this._overEl&&this.options.onDragDrop&&(_=this.options.onDragDrop(this._overEl,t)),this._overEl=null},l.prototype._deinitEvents=function(e){e&&(this._onMouseUp(),Object(n.i)(this._contEl,"mousedown",this._ev_mousedown_handler)),clearTimeout(this._autoScrollTO),this._autoScrollTO=!1,this._ev_mousemove_handler&&Object(n.i)(document,"mousemove",this._ev_mousemove_handler),this._ev_mouseup_handler&&Object(n.i)(document,"mouseup",this._ev_mouseup_handler),this._ev_keydown_handler&&Object(n.i)(document,"keydown",this._ev_keydown_handler)},l.prototype._setPos=function(e,t){this.options.noPosTransform||!this._hasTranslateFeauture&&!(this._hasTranslateFeauture=window.getComputedStyle(e).getPropertyValue("transform"))?Object(a.vb)(e,Object(r.i)({transform:null},t)):null===t.left||null===t.top?Object(a.vb)(e,{transform:null,top:null,left:null}):Object(a.vb)(e,{transform:"translate("+t.left+"px, "+t.top+"px)",top:null,pos:null})},l.prototype._recalc=function(){var e=this._curDragEl,t=this._curOverCell.el;if(this._initGrid(),t!==e){for(var _=0,o=!1,i=!1,a=this._grid.length,r=0;r<a;r++){var n=this._grid[r];if(n.el===e){o=!0;break}if(n.el===t){o=!1;break}}this._isShiftToLeft=o;for(var l=o?0:this._grid.length-1,s=o?this._grid.length:-1,c=o?1:-1,d=[0,0];l!==s;l+=c){var u=this._grid[l];if(2!==_)if(u.el!==e){if(u.el===t&&_++,1===_||2===_){var p=0,b=0;o?(p=i.pos[0]+d[0],b=i.pos[1]+d[1],d[0]+=u.size[0]-i.size[0],d[1]+=u.size[1]-i.size[1]):(d[0]+=i.size[0]-u.size[0],d[1]+=i.size[1]-u.size[1],p=i.pos[0]+d[0],b=i.pos[1]+d[1]),this._setPos(u.el,{left:p-u.pos[0],top:b-u.pos[1]}),u.dirty=!0}else u.dirty&&(this._setPos(u.el,{left:null,top:null}),u.dirty=!1);i=u}else _++,i=u;else u.dirty&&(this._setPos(u.el,{left:null,top:null}),u.dirty=!1),i=u}}else for(var E=this._grid.length,O=0;O<E;O++){var m=this._grid[O];m.el!==e&&m.dirty&&(m.dirty=!1,this._setPos(m.el,{left:null,top:null}))}},l.prototype.disable=function(){this._disabled=!0},l.prototype.enable=function(){this._disabled=!1,this._initGrid(!0)},l.prototype.update=function(){this._disabled||this._initGrid(!0)},l.prototype._ensureGridIsActual=function(){this._initGrid()},l.prototype._needGridUpdate=function(){if(!this._grid)return 1;this._contInfo.prevSize=this._contInfo.prevSize||Object(a.S)(this._contEl);var e=0,t=this._contEl.children.length-this._excludedCount-Object(r.r)(!!this._curPlaceholderEl);if(t!==this._grid.length)e=t>this._grid.length?2:1,this._contInfo.prevSize=Object(a.S)(this._contEl);else{var _=Object(a.S)(this._contEl),o=this._contInfo.prevSize;(Math.abs(o[0]-_[0])>5||Math.abs(o[1]-_[1])>5)&&(e=1),this._contInfo.prevSize=_}return e},l.prototype._initGrid=function(e){var t=e?1:this._needGridUpdate();if(t){1===t&&(this._grid=[],this._contInfo&&(delete this._contInfo.pos,delete this._contInfo.size));var _=this._grid?this._grid[this._grid.length-1]:null;this._grid=this._grid||[];var o,i=!!_,r=this._contEl.children;if(r.length)for(var n=this._getItemMargins(),l=this._curDragEl?this._grid.length:0,s=r.length;l<s;l++){var c=r[l];_&&c===_.el?i=!1:i||c===this._curPlaceholderEl||c.getAttribute("nodrag")||((o=Object(a.S)(c))[0]+=n[0],o[1]+=n[1],this._grid.push({el:c,size:o,pos:this._calcElementPos(c)}))}}},l.prototype._getRelativeMousePos=function(e){var t=this._getContPos(),_=this._getContShift();return{left:e.clientX-t[0]-_[0],top:e.clientY-t[1]-_[1]}},l.prototype._updateDraggablePosition=function(e){if(this._curDragEl){var t=this._getRelativeMousePos(e),_=this._getItemShift(),o=this._getContShift(),i=this._getContSize(),r=t.top-this._initial.shift.y-_[1]+o[1];this.options.limitBottomMove&&(r=Math.min(r,i[1]+30)),Object(a.ab)(this._contEl,"_ape_item_list")&&(r+=this._contEl.scrollTop),this._setPos(this._curDragEl,{left:t.left-this._initial.shift.x-_[0]+o[0],top:r}),window.AudioPage&&window.AudioPage.onUpdateDraggablePosition&&window.AudioPage.onUpdateDraggablePosition()}},l.prototype._getContShift=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.shift){var e=window.getComputedStyle(this._contEl);this._contInfo.shift=[parseFloat(e.paddingLeft),parseFloat(e.paddingTop)]}return this._contInfo.shift},l.prototype._getContSize=function(){return this._contInfo=this._contInfo||{},this._contInfo.size=Object(a.S)(this._contEl),this._contInfo.size},l.prototype._getContPos=function(){return this._contInfo=this._contInfo||{},this._contInfo.pos=Object(a.V)(this._contEl),this._contInfo.pos[1]-=Object(o.e)(),this._contInfo.pos},l.prototype._getItemShift=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.itemShift){var e=window.getComputedStyle(Object(a.x)(this._contEl));this._contInfo.itemShift=[parseFloat(e.marginLeft),parseFloat(e.marginTop)]}return this._contInfo.itemShift},l.prototype._getItemMargins=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.itemMargins){var e=window.getComputedStyle(Object(a.x)(this._contEl));this._contInfo.itemMargins=[parseFloat(e.marginLeft)+parseFloat(e.marginRight),parseFloat(e.marginTop)+parseFloat(e.marginBottom)]}return this._contInfo.itemMargins},l.prototype._calcElementPos=function(e){var t=this._getContShift(),_=this._getItemShift();return[e.offsetLeft-t[0]-_[0],e.offsetTop-t[1]-_[1]]},l.prototype.isCurrentlyDragging=function(){return!!this._curDragEl},l.prototype._initUpdaterScrollbar=function(){return Object(i.o)(e=>{var t=this.options.wrapNode||e,_=Object(a.l)(t,"sb");_&&_.update(!1,!0)},500)},l.prototype._onMouseMove=function(e){var t=()=>this.options.wrapNode?this.options.wrapNode.scrollTop:Object(o.e)(),_=e=>{this.options.wrapNode?this.options.wrapNode.scrollTop=e:Object(o.g)(e,0,!1,!0)};if(this._curDragEl){this._ensureGridIsActual(),!e&&(e={clientX:this._lastMousePos.x,clientY:this._lastMousePos.y}),this._lastMousePos={x:e.clientX,y:e.clientY},this._updateDraggablePosition(e);var i=this._getContSize(),r=this._getRelativeMousePos(e),l=!1;if(Object(a.ab)(this._contEl,"_ape_item_list")&&(r.top+=this._contEl.scrollTop),r.left>0&&r.left<i[0]&&r.top>0&&r.top<i[1])for(var s=0,c=this._grid.length-1,d=50;d;){var u=s+Math.floor((c-s)/2),p=this._grid[u];if(r.left>p.pos[0]&&r.top>p.pos[1]&&r.left<p.pos[0]+p.size[0]&&r.top<p.pos[1]+p.size[1]){l=p;break}if(s===c)break;r.top<p.pos[1]||r.left<p.pos[0]&&r.top<p.pos[1]+p.size[1]?c=c===u?c-1:u:s=s===u?s+1:u,d--}else{for(var b,E,O,m=this._grid.length,h=999999,w=0;w<m;w++){var v=this._grid[w],f=(E=r.left-(v.pos[0]+v.size[0]/2))*E+(O=r.top-(v.pos[1]+v.size[1]/2))*O;h>f&&(h=f,b=v)}l=b}!l||this._curOverCell&&this._curOverCell.el===l.el||(this._curOverCell=l,this._recalc());var g,P,M,D,C=0;if(this.options.wrapNode)g=D=this.options.wrapNode,P=Object(a.S)(g),(M=Object(a.V)(g))[1]-=Object(o.e)(),C=e.clientY;else{var T=window,y=document.documentElement,j=document.getElementsByTagName("body")[0],I=T.innerWidth||y.clientWidth||j.clientWidth,L=T.innerHeight||y.clientHeight||j.clientHeight;D=T.bodyNode,P=[I,L],M=[0,0],C=e.clientY}var A=Math.max(20,P[1]/10),B=M[1]+A-C,R=A-(M[1]+P[1]-C);if(R>0||B>0){var W=Math.min(1,B/A),k=Math.min(1,R/A);this._autoScrollTO||(this._autoScrollTO=setTimeout(()=>{this._autoScrollTO=!1;var e=t();_(e+16*(W>0?-W:k)),e!==D.scrollTop&&(this._updateScrollbar(D),this._onMouseMove())},20))}if(this.options.onDragOverElClass){var U=e.target;Object(a.ab)(U,this.options.onDragOverElClass)||(U=Object(a.Y)(this.options.onDragOverElClass,U))?this._overEl!==U&&(this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,this._curDragEl),this.options.onDragEnter&&this.options.onDragEnter(U,this._curDragEl),this._overEl=U):(this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,this._curDragEl),this._overEl=null)}}else if(this._dist(e)>this.options.dragThreshold){this._curDragEl=this._initial.candidateEl;for(var K=this._grid.length,x=0;x<K;x++)if(this._grid[x].el===this._curDragEl){this._curDragCellIndex=x;break}this.options.dragCls&&Object(a.c)(this._curDragEl,this.options.dragCls);var S=Object(a.S)(this._curDragEl),N=Object(a.V)(this._curDragEl),H=window.getComputedStyle(this._curDragEl),F=this._getContPos();this._initial.hasInlineSize=!(!this._curDragEl.style.width&&!this._curDragEl.style.height),Object(a.vb)(this._curDragEl,{width:S[0],height:S[1]}),this._initialCurDragPos={left:N[0]-F[0],top:N[1]-F[1]-bodyNode.scrollTop},this._curPlaceholderEl=Object(a.g)("div",{className:"ui_gridsorter_placeholder"}),Object(a.vb)(this._curPlaceholderEl,{width:S[0]+parseFloat(H.marginLeft)+parseFloat(H.marginRight),height:S[1]+parseFloat(H.marginTop)+parseFloat(H.marginBottom)}),this._contEl.insertBefore(this._curPlaceholderEl,this._curDragEl),Object(a.c)(this._curDragEl,"ui_gridsorter_moveable"),Object(a.c)(this._curDragEl,"ui_gridsorter_moveable_notrans"),Object(a.c)(this._contEl,"ui_gridsorter_cont"),this._onMouseMove(e),this._updateDraggablePosition(e),this.options.onDragStart&&this.options.onDragStart(this._curDragEl)}Object(n.c)(e)},t.a=l},"4WSo":function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));var o=_("q1tI"),i=_.n(o),a=_("ZxpX"),r=i.a.memo((function(e){var t=e.title,_=e.onClick,o=e.cover,r=e.href,n=e.className,l=void 0===n?"":n,s=e.extra,c=e.noBorder,d=void 0!==c&&c,u=e.isDraft,p=void 0!==u&&u,b=e.size,E=void 0===b?58:b,O=o?{backgroundImage:"url("+o+")"}:{},m=Object(a.a)("NarrativeItemPreviewCover","NarrativeItemPreviewCover--size"+E,l,{"NarrativeItemPreviewCover--noBorder":d,"NarrativeItemPreviewCover--isDraft":p}),h=i.a.createElement("div",{className:"NarrativeItemPreviewCover__image",style:O,title:t||void 0},s);return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement("a",{href:r,className:m,onClick:_},h),!r&&i.a.createElement("div",{className:m,onClick:_},h))}))},"5IGG":function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="write_24",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="write_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M14.188 6.273l3.54 3.54-8.624 8.622a6.674 6.674 0 01-2.77 1.664l-2.903.886a.334.334 0 01-.416-.416l.886-2.902a6.674 6.674 0 011.664-2.771l8.623-8.623zm1.061-1.06l1.769-1.77a1.5 1.5 0 012.121 0l1.418 1.419a1.5 1.5 0 010 2.121L18.79 8.752l-3.54-3.54z" fill="currentColor" /></g></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 24 24",id:c,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=u,t.a=p},"5soy":function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="block_16",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="block_16"><path clip-rule="evenodd" d="M3.974 5.034a5.001 5.001 0 006.992 6.992zm8.052 5.932a5.001 5.001 0 00-6.992-6.992zm.57 1.63a6.5 6.5 0 10-9.192-9.192 6.5 6.5 0 009.192 9.192z" fill="currentColor" fill-rule="evenodd" /></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 16 16",id:c,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};p.mountIcon=u,t.a=p},"60IB":function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));var o=_("ha24"),i=_("pruO"),a=_("Kl2g"),r=function(e,t,_,r){var n=Object(o.f)(e);n&&n.objectType===i.d.wall&&n.objectId?Object(a.b)(a.a.post_reactions_counts_update,{counts:t,isFromWkLayer:null==r?void 0:r.isFromWkLayer,isPrimaryLikeButtonClick:null==r?void 0:r.isPrimaryLikeButtonClick,isQueueUpdate:null==r?void 0:r.isQueueUpdate,isUserAction:null==r?void 0:r.isUserAction,postFullId:n.objectId,reactionIdState:_?{reactionId:_.id}:void 0}):n&&n.objectType===i.d.wall_reply&&n.objectId?Object(a.b)(a.a.reply_reactions_counts_update,{counts:t,replyFullId:n.objectId,reactionIdState:_?{reactionId:_.id}:void 0}):console.warn("Unsupported reactions object update",e)}},"6SSS":function(e,t){e.exports={reactions_preview_item:'<div class="ReactionsPreviewItem ReactionsPreviewItem--stackOverlay %class%" style="background-image: url(\'%image_url%\');" aria-label="%title%"></div>'}},"6qdA":function(e,t,_){"use strict";_.d(t,"a",(function(){return Oe}));var o,i=_("q1tI"),a=_.n(i),r=_("6krn"),n=_("ppaw"),l=_("BiHW"),s=_("v+DW"),c=_("kcIO"),d=_("WfnU"),u=_("RlRI"),p=_("ZxpX"),b=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function _(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(_.prototype=t.prototype,new _)}),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gridContainerRef=a.a.createRef(),t}return b(t,e),t.prototype.getGridContainer=function(){return this.gridContainerRef.current},t.prototype.render=function(){var e=this.props,t=e.className,_=e.children,o=e.isScrolling;return a.a.createElement("div",{className:Object(p.a)("StoryArchivePreviewGrid",t,{"StoryArchivePreviewGrid--scrolling":o})},a.a.createElement("div",{className:"StoryArchivePreviewGrid__inner",ref:this.gridContainerRef},_))},t.defaultProps={className:""},t}(a.a.Component),O=_("4+be"),m=_("rJNF"),h=_("HLtZ"),w=_("1BRX"),v=_("85vT"),f=_("frAj"),g=_("3blr"),P=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),M=function(e){function t(t){var _=e.call(this,t)||this;return _.videoRef=a.a.createRef(),_.needPauseAfterLoading=!1,_.onLinkButtonClick=function(e){var t=_.props,o=t.story,i=t.onStoryLinkUpdate,a=t.linkData;t.isDragged||(Object(m.h)({story:o,onStoryLinkUpdate:i,linkData:a}),e.stopPropagation())},_.onMouseEnter=function(){_.setState({isHovered:!0})},_.onMouseLeave=function(){_.setState({isHovered:!1})},_.onToggleCheck=function(){var e=_.props,t=e.onToggleCheck,o=e.story;!e.isDragged&&t&&t(o)},_.state={isHovered:!1,preloadVideo:!1,canPlayVideo:!1,isLoading:!1},_}return P(t,e),t.prototype.componentDidUpdate=function(e,t){var _=this.props,o=_.story,i=_.isDragged,a=this.state.isHovered;o.videoUrl&&(i||(!t.isHovered&&a?this.playVideo():t.isHovered&&!a&&this.pauseVideo()),!e.isDragged&&i&&this.pauseVideo(),e.isDragged&&!i&&a&&this.playVideo())},t.prototype.componentWillUnmount=function(){this.cleanVideoPlayTimeout(),this.cleanVideoPauseTimeout(),this.cleanVideoLoaderTimeout()},t.prototype.playVideo=function(e){var t=this;void 0===e&&(e=!1),null!=this.videoPauseDelayTimeout&&this.cleanVideoPauseTimeout();var _=function(){delete t.videoPlayDelayTimeout,t.videoRef.current&&(t.videoRef.current.muted=!0,t.videoRef.current.play().then((function(){var e;if(t.hideLoader(),t.setState({canPlayVideo:!0}),t.needPauseAfterLoading)return null===(e=t.videoRef.current)||void 0===e||e.pause(),void(t.needPauseAfterLoading=!1)})).catch((function(e){t.hideLoader(),console.error(e),Object(h.c)(e)})))};e?_():null==this.videoPlayDelayTimeout&&(this.videoLoaderTimeout=setTimeout((function(){t.setState({isLoading:!0})}),800),this.setState({preloadVideo:!0}),this.videoPlayDelayTimeout=setTimeout((function(){_()}),200))},t.prototype.pauseVideo=function(e){var t=this;void 0===e&&(e=!1),null!=this.videoPlayDelayTimeout&&this.cleanVideoPlayTimeout();var _=function(){var e;if(delete t.videoPauseDelayTimeout,t.hideLoader(),t.state.canPlayVideo){var _=null===(e=t.videoRef)||void 0===e?void 0:e.current;null==_||_.pause()}else t.needPauseAfterLoading=!0};e?_():null==this.videoPauseDelayTimeout&&(this.videoPauseDelayTimeout=setTimeout((function(){_()}),200))},t.prototype.cleanVideoPlayTimeout=function(){this.videoPlayDelayTimeout&&(clearTimeout(this.videoPlayDelayTimeout),delete this.videoPlayDelayTimeout)},t.prototype.cleanVideoPauseTimeout=function(){this.videoPauseDelayTimeout&&(clearTimeout(this.videoPauseDelayTimeout),delete this.videoPauseDelayTimeout)},t.prototype.cleanVideoLoaderTimeout=function(){this.videoLoaderTimeout&&(clearTimeout(this.videoLoaderTimeout),delete this.videoLoaderTimeout)},t.prototype.hideLoader=function(){this.state.isLoading&&this.setState({isLoading:!1}),this.cleanVideoLoaderTimeout()},t.prototype.render=function(){var e=this,t=this.props,_=t.story,o=t.checked,i=t.selectable,r=t.draggable,n=t.className,l=t.isEditingLinksAvailable,s=t.needShowDate,c=this.state,d=c.preloadVideo,u=c.canPlayVideo,b=c.isLoading,E=Boolean(_.videoUrl),m=new Date(1e3*_.time);return a.a.createElement("div",{className:Object(p.a)("StoryArchivePreview","StoryPreviewContainer",n,{"StoryArchivePreview--video":E,"StoryArchivePreview--checked":o}),onClick:this.onToggleCheck,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,"data-id":_.rawId},a.a.createElement("div",{className:"StoryArchivePreview__wrapper"},E&&a.a.createElement(a.a.Fragment,null,d&&a.a.createElement("video",{className:Object(p.a)("StoryArchivePreview__media",{"StoryArchivePreview__media--hidden":!u}),src:_.videoUrl,ref:this.videoRef,controls:!1,preload:"metadata",loop:!0,playsInline:!0}),!u&&a.a.createElement("img",{className:"StoryArchivePreview__media",src:_.preview,alt:""})),!E&&a.a.createElement("img",{className:"StoryArchivePreview__media",src:_.preview,alt:""}),s&&a.a.createElement("div",{className:"StoryArchivePreview__date"},a.a.createElement("div",{className:"StoryArchivePreview__day"},m.getDate()),a.a.createElement("div",{className:"StoryArchivePreview__month"},a.a.createElement(v.default,null,Object(O.d)("months_sm_of")[m.getMonth()+1]))),r&&!s&&a.a.createElement("div",{className:"StoryArchivePreview__draggableIcon"}),i&&a.a.createElement("div",{className:Object(p.a)("StoryArchivePreview__select",{"StoryArchivePreview__select--on":o})}),(l||_.videoUrl)&&a.a.createElement("div",{className:"StoryArchivePreview__footer"},a.a.createElement("div",{className:"StoryArchivePreview__footerInner"},_.videoUrl&&a.a.createElement("div",{className:"StoryArchivePreview__play"},a.a.createElement(f.a,null),a.a.createElement("span",{className:"StoryArchivePreview__playTime"},Object(w.a)(_.duration))),l&&a.a.createElement("div",{className:"StoryArchivePreview__linkBtn",onClick:function(t){return e.onLinkButtonClick(t)}},_.linkUrl?Object(O.d)("stories_edit_link"):Object(O.d)("stories_add_link")))),b&&a.a.createElement("div",{className:"StoryArchivePreview__loader"},a.a.createElement(g.default,{size:24,strokeWidth:3,color:"#fff"}))))},t.defaultProps={checked:!1,selectable:!1,draggable:!1,isDragged:!1,className:"",isEditingLinksAvailable:!1,onToggleCheck:function(){},onStoryLinkUpdate:function(){},linkData:[]},t}(a.a.PureComponent),D=_("UCWv"),C=_("4PuL"),T=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),y=function(e){function t(t){var _=e.call(this,t)||this;return _.gridContainerRef=a.a.createRef(),_.tabRef=a.a.createRef(),_.state={draggingStoryRawId:""},_}return T(t,e),t.prototype.render=function(){var e=this,t=this.props,_=t.stories,o=t.selectedStoriesMap,i=t.className,r=t.isEditingLinksAvailable,n=t.onStoryLinkUpdate,l=t.linkData,s=t.onToggleCheck,c=this.state.draggingStoryRawId;return a.a.createElement("div",{className:Object(p.a)("NarrativeEditorSelectedTab ScrollContainer",i),ref:this.tabRef},a.a.createElement(E,{ref:this.gridContainerRef},_.map((function(t){return a.a.createElement("div",{className:"NarrativeEditorSelectedTab__story",key:t.rawId},a.a.createElement(M,{className:"NarrativeEditorSelectedTab__storyPreview",story:t,draggable:!0,isDragged:t.rawId===c,checked:!!o[t.id],selectable:e.isSelectable(t),onToggleCheck:s,onStoryLinkUpdate:n,isEditingLinksAvailable:r,linkData:l}))}))))},t.prototype.isSelectable=function(e){var t=this.props.selectedStoriesMap,_=Object.keys(t).length;return!e.isUnavailable&&!!(_<D.f||t[e.rawId])},t.prototype.componentDidMount=function(){var e=this,t=this.props,_=t.onReorder,o=t.appearance,i=this.getGridContainer(),a={dragThreshold:0,onDragFinish:function(){e.setState({draggingStoryRawId:""})},onDragStart:function(t){var _=t.querySelector(".NarrativeEditorSelectedTab__storyPreview");if(_){var o=_.dataset.id;e.setState({draggingStoryRawId:o})}},onReorder:function(){var t=e.props.stories,o=document.querySelectorAll(".NarrativeEditorSelectedTab__storyPreview"),i=[];o.forEach((function(e){var _=e.getAttribute("data-id"),o=t.find((function(e){return e.rawId===_}));o&&i.push(o.id)})),_(i)}};i&&(o===n.d.box&&(a.wrapNode=this.getTabEl()),this.sorter=new C.a(i,"",a))},t.prototype.componentWillUnmount=function(){this.sorter&&this.sorter.destroy()},t.prototype.getTabEl=function(){var e;return null===(e=this.tabRef)||void 0===e?void 0:e.current},t.prototype.getGridContainer=function(){var e,t;return null===(t=null===(e=this.gridContainerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.getGridContainer()},t}(a.a.Component),j=_("xt6h"),I=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),L=function(e){function t(t){var _=e.call(this,t)||this;return _.tabRef=a.a.createRef(),_.onScroll=function(){_.props.hasMore&&_.checkLoading()},_.checkLoading=Object(j.k)((function(){var e=_.props,t=e.loadMore,o=e.hasMore,i=_.state.isLoading,a=_.getScrollContainer(),r=_.getTabEl();o&&r&&(!i&&_.isMount&&(a instanceof HTMLElement?r.scrollTop+r.clientHeight>=r.scrollHeight-D.i:window.innerHeight+D.i>=r.getBoundingClientRect().bottom)&&(_.setState({isLoading:!0}),t().catch((function(e){console.error(e),Object(h.c)(e)})).finally((function(){_.setState({isLoading:!1})}))))}),D.j),_.state={isLoading:!1},_}return I(t,e),t.prototype.render=function(){var e,t=this,_=this.props,o=_.stories,i=_.selectedStoriesMap,r=_.className,n=_.onToggleCheck,l=_.isEditingLinksAvailable,s=_.onStoryLinkUpdate,c=_.linkData,d=this.state.isLoading;return a.a.createElement("div",{className:Object(j.a)("NarrativeEditorAllTab ScrollContainer",r),ref:this.tabRef},a.a.createElement(E,{className:"NarrativeEditorAllTab__grid"},o.map((function(_){var o=!1,r=new Date(1e3*_.time).toDateString();return e&&r===e||(e=r,o=!0),a.a.createElement("div",{className:"NarrativeEditorAllTab__story",key:_.rawId},a.a.createElement(M,{story:_,checked:!!i[_.id],selectable:t.isSelectable(_),onToggleCheck:n,onStoryLinkUpdate:s,isEditingLinksAvailable:l,linkData:c,needShowDate:o}))}))),d&&a.a.createElement("div",{className:"NarrativeEditorAllTab__loader"},a.a.createElement(g.default,null)))},t.prototype.isSelectable=function(e){var t=this.props.selectedStoriesMap,_=Object.keys(t).length;return!e.isUnavailable&&!!(_<D.f||t[e.id])},t.prototype.componentDidMount=function(){this.isMount=!0,this.initScrollListener()},t.prototype.componentWillUnmount=function(){this.isMount=!1,this.deInitScrollContainer()},t.prototype.initScrollListener=function(){var e=this.getScrollContainer(),t=this.getTabEl();e&&t&&e.addEventListener("scroll",this.onScroll,!0)},t.prototype.deInitScrollContainer=function(){var e;null===(e=this.getScrollContainer())||void 0===e||e.removeEventListener("scroll",this.onScroll)},t.prototype.getScrollContainer=function(){return this.props.appearance===n.d.box?this.getTabEl():window},t.prototype.getTabEl=function(){var e;return null===(e=this.tabRef)||void 0===e?void 0:e.current},t.defaultProps={isEditingLinksAvailable:!1,hasMore:!1},t}(a.a.Component),A=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),B=function(){return(B=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},R=function(e,t){for(var _=0,o=t.length,i=e.length;_<o;_++,i++)e[i]=t[_];return e},W=function(e){function t(t){var _=e.call(this,t)||this;return _.onTabClick=function(e,t){_.setState({tabKey:t,selectedTabStoryIds:R([],_.props.selectedStoryIds)})},_.onReorder=function(e){var t=_.props.onSelectedStoriesUpdate,o=_.getSelectedStoriesMap(),i=e.filter((function(e){return o[e]}));_.setState({selectedTabStoryIds:e}),t(i)},_.onStorySelectToggle=function(e){var t,o=_.props,i=o.selectedStoryIds,a=o.onSelectedStoriesUpdate,r=_.state,l=r.tabKey,s=r.selectedTabStoryIds,c=_.getSelectedStoriesMap();if(!(Object.keys(c).length>=D.f)||c[e.id]){if(!s.length)return _.setState({selectedTabStoryIds:[e.id]}),void a([e.id]);if(c[e.id]){a(i.filter((function(t){return t!==e.id})))}else{var d=[],u=B(B({},c),((t={})[e.id]=e,t));if(l===n.c.selected)d=s.filter((function(e){return u[e]}));else if(l===n.c.all){if(s.includes(e.id))d=s.filter((function(e){return u[e]}));else d=R(R([],s),[e.id]).filter((function(e){return u[e]})),_.setState({selectedTabStoryIds:R(R([],s),[e.id])})}a(d)}}},_.state={tabKey:t.selectedStoryIds.length?n.c.selected:n.c.all,selectedTabStoryIds:R([],t.selectedStoryIds)},_}return A(t,e),t.prototype.render=function(){var e,t=this.props,_=t.selectedStoryIds,o=t.appearance,i=t.isEditingLinksAvailable,l=t.linkData,s=t.onStoryLinkUpdate,c=t.loadMore,d=t.hasMore,b=this.state.tabKey,E=this.getSelectedStoriesMap(),O=this.getAllStories();return a.a.createElement("div",{className:"NarrativeEditorStoriesTabPanel"},a.a.createElement(u.default,{className:"NarrativeEditorStoriesTabPanel__tabs",onTabClick:this.onTabClick,active:b,disabledTabMap:(e={},e[n.c.selected]=!_.length,e)},a.a.createElement("span",{key:n.c.selected},Object(r.b)("stories_narrative_editor_selected_tab"),_.length>0&&a.a.createElement("span",{className:"Tabs__desc"},_.length)),a.a.createElement("span",{key:n.c.all},Object(r.b)("stories_narrative_editor_all_tab"))),b===n.c.selected&&a.a.createElement(y,{className:Object(p.a)("NarrativeEditorSelectPanel__grid","NarrativeEditorSelectPanel__grid--"+o),appearance:o,stories:this.getSelectedTabStories(),onReorder:this.onReorder,onToggleCheck:this.onStorySelectToggle,selectedStoriesMap:E,onStoryLinkUpdate:s,isEditingLinksAvailable:i,linkData:l}),b===n.c.all&&a.a.createElement(L,{className:Object(p.a)("NarrativeEditorSelectPanel__grid","NarrativeEditorSelectPanel__grid--"+o),appearance:o,stories:O,loadMore:c,hasMore:d,onToggleCheck:this.onStorySelectToggle,selectedStoriesMap:E,onStoryLinkUpdate:s,isEditingLinksAvailable:i,linkData:l}))},t.prototype.getSelectedTabStories=function(){var e=this;return this.state.selectedTabStoryIds.map((function(t){return e.props.storyMap[t]}))},t.prototype.getAllStories=function(){var e=this;return this.props.storyIds.map((function(t){return e.props.storyMap[t]}))},t.prototype.getSelectedStoriesMap=function(){var e=this;return this.props.selectedStoryIds.reduce((function(t,_){return t[_]=e.props.storyMap[_],t}),{})},t.defaultProps={isEditingLinksAvailable:!1},t}(a.a.Component),k=_("4WSo"),U=_("Egk5"),K=_("gdug"),x=_("5IGG"),S=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),N=function(e){function t(t){var _=e.call(this,t)||this;return _.getInputEl=function(){return _.nameInputRef&&_.nameInputRef.current},_.onKeyDown=function(e){e.keyCode===U.a.ENTER&&(e.ctrlKey||e.metaKey&&K.a.mac)&&_.props.onSubmit()},_.nameInputRef=a.a.createRef(),_}return S(t,e),t.prototype.render=function(){var e=this.props,t=e.name,_=e.onNameChange,o=e.selectedStoriesCount,i=e.coverUrl,n=e.onCoverClick,l=e.className,s=0===o,c="";return s||(c=Object(r.b)("stories_choose_cover")),a.a.createElement("div",{className:Object(j.a)("NarrativeEditorDataPanel",l)},a.a.createElement("div",{className:"NarrativeEditorDataPanel__preview"},a.a.createElement(k.a,{className:Object(j.a)("NarrativeEditorDataPanel__cover",{"NarrativeEditorDataPanel__cover--active":!s}),onClick:n,cover:i,title:c,extra:!s&&a.a.createElement("div",{className:"NarrativeEditorDataPanel__pencil"},a.a.createElement(x.a,null))}),a.a.createElement("span",{className:Object(j.a)("NarrativeEditorDataPanel__name",{"NarrativeEditorDataPanel__name--empty":!t})},t||Object(r.b)("stories_narrative_name_full"))),a.a.createElement("div",{className:"NarrativeEditorDataPanel__form"},a.a.createElement("span",{className:"NarrativeEditorDataPanel__nameLabel"},Object(r.b)("stories_narrative_name")),a.a.createElement("input",{className:"NarrativeEditorDataPanel__nameInput",value:t,onChange:_,onKeyDown:this.onKeyDown,type:"text",placeholder:Object(r.b)("stories_enter_name"),maxLength:D.g,ref:this.nameInputRef,autoFocus:!0}),o>0&&a.a.createElement("span",{className:"NarrativeEditorDataPanel__selectedStoryCount"},Object(r.b)("stories_selected_count",o))))},t}(a.a.Component),H=_("t7n3"),F=_("jmhT"),q=_("7ckd"),z=_("5PZO"),V=function(e){var t=e.appearance,_=e.actionButtons;return a.a.createElement("div",{className:Object(p.a)("NarrativeEditorFooter","NarrativeEditorFooter--"+t)},a.a.createElement(z.a,{actionButtons:_}))},J=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollContainerRef=a.a.createRef(),t}return J(t,e),t.prototype.render=function(){var e=this.props,t=e.className,_=e.children,o=e.appearance,i=e.actionFooterButtons;return a.a.createElement("div",{className:Object(p.a)("NarrativeEditorSection",t),ref:this.scrollContainerRef},a.a.createElement("div",{className:"NarrativeEditorSection__body"},_),Boolean(i)&&a.a.createElement(V,{appearance:o,actionButtons:i}))},t.prototype.getSectionEl=function(){var e;return null===(e=this.scrollContainerRef)||void 0===e?void 0:e.current},t}(a.a.Component),G=_("9kZp"),Y=function(e){var t=e.text,_=e.multiple,o=void 0!==_&&_,i=e.onFilesLoad;return a.a.createElement("div",{className:"StoryLoadFile StoryPreviewContainer"},a.a.createElement(G.a,null),a.a.createElement("span",{className:"StoryLoadFile__text"},t),a.a.createElement("input",{type:"file",className:"StoryLoadFile__input",multiple:o,onChange:function(e){var t=e.currentTarget.files;t&&i(Array.from(t))}}))},X=function(){return a.a.createElement("div",{className:"UploadDropBoxArea"},a.a.createElement("div",{className:"UploadDropBoxArea__inner"},a.a.createElement("div",{className:"UploadDropBoxArea__text"},Object(r.b)("stories_narrative_cover_drop_hint"))))},Q=_("HlBa"),Z=function(){return a.a.createElement(Q.a,null,a.a.createElement("div",{className:"UploadDropPageArea"},a.a.createElement("div",{className:"UploadDropPageArea__inner"},a.a.createElement("div",{className:"UploadDropPageArea__image"}),a.a.createElement("div",{className:"UploadDropPageArea__text"},Object(r.b)("stories_drop_page_area_label")))))},ee=3,te=2*Math.PI*22,_e=a.a.memo((function(e){var t=e.percent,_=void 0===t?60:t,o=e.width,i=void 0===o?24:o,r=e.height,n=void 0===r?24:r,l=(te-ee)*_/100+ee;return a.a.createElement("svg",{className:"StoryProgressSpinner",width:i,height:n,viewBox:"0 0 50 50"},a.a.createElement("circle",{cx:"25",cy:"25",r:22,stroke:"#fff",fill:"none",strokeWidth:"6",strokeMiterlimit:"10",strokeDashoffset:"0",strokeDasharray:l+","+te,strokeLinecap:"round"}))})),oe=_("cP3I"),ie=_("eewf"),ae=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),re=function(e){function t(t){return e.call(this,t)||this}return ae(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,_=e.coverUrl,o=e.onToggleCheck,i=e.uploadingStatus,n=e.uploadingPercent,l=e.retryUpload,s=i===ie.a.uploaded,c=i===ie.a.uploading,d=i===ie.a.failed,u=s;return a.a.createElement("div",{className:Object(j.a)("StoryCustomCoverPreview StoryPreviewContainer",{"StoryCustomCoverPreview--empty":c||d}),onClick:function(){u&&o()}},s&&a.a.createElement("div",{className:"StoryCustomCoverPreview__coverFrame"},a.a.createElement("div",{className:"StoryCustomCoverPreview__coverWrap"},a.a.createElement("img",{src:_,className:"StoryCustomCoverPreview__cover",alt:""}))),c&&a.a.createElement(_e,{percent:n}),d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(oe.a,null),a.a.createElement("span",{className:"StoryCustomCoverPreview__errorText"},Object(r.b)("stories_upload_error_text")),a.a.createElement("div",{className:"StoryCustomCoverPreview__repeat",onClick:l},Object(r.b)("stories_upload_repeat"))),u&&a.a.createElement("div",{className:Object(j.a)("StoryCustomCoverPreview__select",{"StoryCustomCoverPreview__select--on":t})}))},t.defaultProps={uploadingStatus:ie.a.uploaded},t}(a.a.PureComponent),ne=_("hmNr"),le=_("EasH"),se=_("PU8N"),ce=_("p6Sd"),de=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),ue=function(){return(ue=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},pe=function(e){function t(t){var _,o=e.call(this,t)||this;o.scrollContainerRef=a.a.createRef(),o.isMount=!1,o.isCropSubmitted=!1,o.onFilesLoad=function(e){o.file=e[0],o.file&&o.uploadCover()},o.uploadCover=function(){if(o.file){var e=o.file,t=o.props.coverUploadConfig,_=new ne.a(t,o.onUploadCoverProgress);_.validate(e).then((function(){if(o.isMount){var t=URL.createObjectURL(e),i={id:ie.b,url:t,customPhotoOriginalUrl:t,percent:0,status:ie.a.uploading};return o.setState({customCover:i}),_.upload(e).then((function(e){if(o.isMount){var t=JSON.stringify(e);o.setState({customCover:ue(ue({},i),{percent:100,status:ie.a.uploaded,uploadResponse:t}),checkedCoverId:ie.b})}}))}})).catch((function(e){if(o.isMount){var t=o.state.customCover;t&&(t=ue(ue({},t),{percent:0,status:ie.a.failed})),console.error(e),e=Object(j.i)(e)?e.text:String(e),Object(le.d)(Object(r.b)("global_error"),e||Object(r.b)("global_unknown_error")),Object(h.c)(new Error("error with uploadCover"+(e?": "+e:""))),o.setState({customCover:t})}}))}},o.onUploadCoverProgress=function(e,t){var _=Math.min(e/t*100,90);o.setState((function(e){var t=e.customCover;return t?{customCover:ue(ue({},t),{percent:_})}:null}))},o.selectCustomCover=function(){o.setState({checkedCoverId:ie.b})},o.toggleCheck=function(e){o.setState({checkedCoverId:e.rawId})},o.openCropper=function(){var e=o.state.checkedCoverId,t=o.getCoverById(e);if(t){var _=o.getCoverOriginalUrl(t);_&&Object(se.f)(_).then((function(e){if(o.isMount){var i=e.width,a=e.height,r=o.getThumbSizes(i,a),n=r[0],l=r[1];o.setState({isModalOpen:!0}),Object(m.e)({coverUrl:_,coverHeight:a,coverWidth:i,thumbHeight:l,thumbWidth:n,crop:t.crop,onSave:o.onCropSave,onClose:o.onCropClose})}})).catch((function(e){console.error(e),e=String(e),Object(le.d)(Object(r.b)("global_error"),e||Object(r.b)("global_unknown_error")),Object(h.c)(new Error("error with cover openCropper"+(e?": "+e:"")))}))}},o.onCropSave=function(e,t){return o.saveCustomPhotoIfNeeded().then((function(_){o.isCropSubmitted=!0;var i=o.state.covers;Object(ie.e)(_)?o.setState({customCover:ue(ue({},_),{url:t,crop:e})}):o.setState({covers:i.map((function(o){return o.id===_.id?ue(ue({},_),{url:t,crop:e}):o}))})}))},o.onCropClose=function(){var e=o.props.onSave,t=o.state.checkedCoverId;o.setState({isModalOpen:!1});var _=o.getCoverById(t);_&&o.isCropSubmitted&&e({url:_.url,coverStoryId:_.coverStoryId,customPhotoOriginalUrl:_.customPhotoOriginalUrl,customPhotoId:_.customPhotoId,crop:_.crop})},o.getFooterButtons=function(){var e=o.props.onSave,t=o.state.customCover;return[a.a.createElement(l.a,{key:"close",appearance:"tertiary",onClick:function(){return e()}},Object(r.b)("global_cancel")),a.a.createElement(d.default,{key:"save",onClick:o.openCropper,disabled:(null==t?void 0:t.status)===ie.a.uploading},Object(r.b)("stories_narrative_cover_next_step"))]},o.onDragEnter=function(e){var t,_,i,a;("file"===(null===(_=null===(t=null==e?void 0:e.dataTransfer)||void 0===t?void 0:t.items[0])||void 0===_?void 0:_.kind)||(null===(a=null===(i=null==e?void 0:e.dataTransfer)||void 0===i?void 0:i.types)||void 0===a?void 0:a.includes("Files")))&&(clearTimeout(o.dragLeaveTimeout),delete o.dragLeaveTimeout,o.setState({showDropArea:!0})),Object(U.c)(e)},o.onDragLeave=function(e){clearTimeout(o.dragLeaveTimeout),o.dragLeaveTimeout=setTimeout((function(){delete o.dragLeaveTimeout,o.setState({showDropArea:!1})}),100),Object(U.c)(e)},o.onDragDrop=function(e){var t,_;o.onDragLeave(e),(null===(_=null===(t=null==e?void 0:e.dataTransfer)||void 0===t?void 0:t.files)||void 0===_?void 0:_.length)&&o.onFilesLoad(Array.from(e.dataTransfer.files));var i=o.getScrollContainer();i&&i.scrollTo({top:0,behavior:"smooth"}),Object(U.c)(e)};var i=o.buildCovers(t),n=i[0],s=i[1],c=null===(_=n[0])||void 0===_?void 0:_.id;if(t.cover){var u=t.cover.customPhotoId,p=t.cover.coverStoryId;c=u?ie.b:p?t.storyMap[p].rawId:t.stories[0].rawId}return o.state={showDropArea:!1,covers:n,customCover:s,checkedCoverId:c,isModalOpen:!1},o}return de(t,e),t.prototype.render=function(){var e=this,t=this.props,_=t.className,o=t.appearance,i=t.stories,l=this.state,s=l.customCover,c=l.checkedCoverId,d=l.showDropArea,u=l.isModalOpen;return a.a.createElement($,{className:Object(j.a)("NarrativeEditorCoverSection",_),appearance:o,actionFooterButtons:this.getFooterButtons()},a.a.createElement("div",{className:"ScrollContainer",ref:this.scrollContainerRef},a.a.createElement("div",{className:"NarrativeEditorCoverSection__hint StoryGridHint"},Object(r.b)("stories_choose_cover_hint")),a.a.createElement(E,{className:"NarrativeEditorCoverSection__grid"},a.a.createElement("div",{className:"NarrativeEditorCoverSection__create"},a.a.createElement(Y,{text:Object(r.b)("stories_upload_narrative_cover"),onFilesLoad:this.onFilesLoad})),s&&a.a.createElement(re,{uploadingStatus:s.status,coverUrl:s.customPhotoOriginalUrl,checked:s.id===c,uploadingPercent:s.percent,onToggleCheck:this.selectCustomCover,retryUpload:this.uploadCover}),i.map((function(t){return a.a.createElement("div",{className:"NarrativeEditorCoverSection__story",key:t.rawId},a.a.createElement(M,{story:t,checked:c===t.rawId,selectable:!0,onToggleCheck:e.toggleCheck}))})))),d&&!u&&o===n.d.box&&a.a.createElement(X,null),d&&!u&&o===n.d.page&&a.a.createElement(Z,null))},t.prototype.getThumbSizes=function(e,t){var _,o,i=e/t;return e>=t?(_=Math.min(e,ce.b),(o=Math.floor(_/i))>ce.a&&(o=ce.a,_=Math.floor(o*i))):(o=Math.min(t,ce.a),(_=Math.floor(o*i))>ce.b&&(_=ce.b,o=Math.floor(_/i))),[_,o]},t.prototype.saveCustomPhotoIfNeeded=function(){var e=this,t=this.props,_=t.ownerId,o=t.coverUploadConfig,i=this.state.checkedCoverId,a=this.getCoverById(i);return a?Object(ie.f)(a)?new Promise((function(t,i){window.ajax.post("al_stories.php",{act:"save_narrative_cover",owner_id:_,upload_response:a.uploadResponse,hash:o.hash},{onDone:function(_){var o=e.state.customCover;if(e.isMount&&o){var a=ue(ue({},o),{customPhotoId:_});t(a)}else i()},onFail:function(e){return console.error(e),i(e),!0}})})):Promise.resolve(a):Promise.reject()},t.prototype.componentDidMount=function(){this.isMount=!0;var e=this.getDragAndDropContainer();e&&(e.addEventListener("drop",this.onDragDrop),e.addEventListener("dragenter",this.onDragEnter),e.addEventListener("dragover",this.onDragEnter),e.addEventListener("dragleave",this.onDragLeave))},t.prototype.componentWillUnmount=function(){this.isMount=!1,null!=this.dragLeaveTimeout&&clearTimeout(this.dragLeaveTimeout);var e=this.getDragAndDropContainer();e&&(e.removeEventListener("drop",this.onDragDrop),e.removeEventListener("dragenter",this.onDragEnter),e.removeEventListener("dragover",this.onDragEnter),e.removeEventListener("dragleave",this.onDragLeave))},t.prototype.getDragAndDropContainer=function(){return this.props.appearance===n.d.box?window.boxLayerWrap:document.body},t.prototype.getScrollContainer=function(){return this.props.appearance===n.d.box?this.scrollContainerRef.current:document.documentElement},t.prototype.buildCovers=function(e){var t,_=e.cover,o=e.stories;return _&&Object(ie.d)(_)&&(t=ue({id:ie.b},_)),[o.map((function(e){return(null==_?void 0:_.coverStoryId)===e.id?ue({id:e.rawId},_):{id:e.rawId,url:e.preview,coverStoryId:e.id}})),t]},t.prototype.getCoverById=function(e){return e===ie.b?this.state.customCover:this.state.covers.find((function(t){return t.id===e}))},t.prototype.getCoverOriginalUrl=function(e){var t,_=this.props.storyMap,o="";return Object(ie.e)(e)?o=e.customPhotoOriginalUrl:e.coverStoryId&&(o=null===(t=_[e.coverStoryId])||void 0===t?void 0:t.originalPreviewUrl),o},t}(a.a.Component),be=_("1UEa"),Ee=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),Oe=function(e){function t(t){var _=e.call(this,t)||this;_.onSelectedStoriesUpdate=function(e){void 0===e&&(e=[]);var t=_.props.storyMap,o=_.state.cover,i=null==o?void 0:o.coverStoryId,a={selectedStoryIds:e};if((null==o?void 0:o.customPhotoId)||i&&e.includes(i))e.length||(a.cover=null);else{var r=e[0];e[0]?a.cover={url:t[r].preview,coverStoryId:r}:a.cover=null}_.setState(a)},_.openCoverSelection=function(){var e=_.state.cover;((null==e?void 0:e.coverStoryId)||(null==e?void 0:e.customPhotoId))&&_.setState({section:n.b.cover})},_.confirmCover=function(e){var t=_.state.cover;_.setState({cover:e||t,section:n.b.main})},_.onNameChange=function(e){var t=e.target.value,o=Object(H.I)(t)?t:"";_.setState({name:o})},_.close=function(e,t){var o=_.props,i=o.ownerId,a=o.narrativeRawId,r=o.navScreen;if(!e){var n="";a&&(n=a.split("_")[1]),Object(be.c)(be.a.close,i,Number(n),r)}_.props.close(t)},_.onSave=function(e){_.props.onSave(e)},_.getFooterButtons=function(){var e=_.props.type,t=_.state,o=t.selectedStoryIds,i=t.loading;return[a.a.createElement(l.a,{key:"close",appearance:"tertiary",onClick:function(){return _.close(!1)},disabled:i},Object(r.b)("global_cancel")),a.a.createElement(d.default,{loading:i,key:"save",onClick:_.save,disabled:0===o.length},e===n.a.edit?Object(r.b)("global_save"):Object(r.b)("stories_create_narrative"))]},_.save=function(){var e=_.props,t=e.publishHash,o=e.editHash,i=e.type,a=e.navScreen,l=e.ownerId,d=_.state,u=d.cover,p=d.loading,b=_.getSelectedStories(),E=_.state.name,O=void 0===E?"":E,m=_.props.narrativeRawId;if(!p)if(O=Object(H.I)(O)){if((null==u?void 0:u.coverStoryId)||(null==u?void 0:u.customPhotoId)){var h="publish_narrative",w=t;i===n.a.edit&&(h="edit_narrative",w=o);var v={act:h,owner_id:l,title:O,hash:w,story_ids:Object(q.b)(b)};if(m){var f=m.split("_")[1];v.narrative_id=f}u.customPhotoId&&(v.custom_cover_photo_id=u.customPhotoId),u.coverStoryId&&(v.cover_story_id=u.coverStoryId),u.crop&&(v.crop_y=u.crop.y,v.crop_x=u.crop.x,v.crop_height=u.crop.height,v.crop_width=u.crop.width),window.ajax.post("al_stories.php",v,{onDone:function(e){m||(m=l+"_"+e);var t=_.getPublishDoneHtml(m,O,i);_.onSave(m),_.close(!0,(function(){return Object(c.f)(t)})),Object(be.c)(i===n.a.edit?be.a.editNarrative:be.a.publishNarrative,Number(l),Number(e),a)},onFail:function(e){return Object(c.f)(e||Object(r.b)("global_error")),!0},hideProgress:function(){_.setState({loading:!1})}}),_.setState({loading:!0})}}else _.dataPanelRef.current&&Object(s.q)(_.dataPanelRef.current.getInputEl())};var o=t.cover,i=t.selectedStoryIds[0];return!o&&i&&(o={url:t.storyMap[i].preview,coverStoryId:i}),_.state={tabKey:t.activeTabKey,name:t.name,selectedStoryIds:t.selectedStoryIds,cover:o,loading:!1,section:n.b.main},_.dataPanelRef=a.a.createRef(),_}return Ee(t,e),t.prototype.render=function(){var e=this;return this.props.appearance===n.d.box?a.a.createElement(F.a,{className:"NarrativeEditor NarrativeEditor--box",appearance:"blue",title:this.getBoxTitle(),onClose:function(){return e.close()},hasScroll:!1},this.renderInner()):a.a.createElement("div",{className:"NarrativeEditor NarrativeEditor--page"},this.renderInner())},t.prototype.renderInner=function(){var e=this.props,t=e.storyIds,_=e.storyMap,o=e.onStoryLinkUpdate,i=e.isEditingLinksAvailable,r=e.linkData,l=e.appearance,s=e.loadMore,c=e.hasMore,d=e.coverUploadConfig,u=e.ownerId,p=this.state,b=p.name,E=p.selectedStoryIds,O=p.cover,m=p.section,h=this.getSelectedStories(),w=(null==O?void 0:O.url)||"";return a.a.createElement("div",{className:"NarrativeEditor__inner"},m===n.b.main&&a.a.createElement($,{appearance:l,actionFooterButtons:this.getFooterButtons()},a.a.createElement(N,{className:"NarrativeEditor__dataPanel",coverUrl:w,name:b,selectedStoriesCount:E.length,onNameChange:this.onNameChange,onSubmit:this.save,onCoverClick:this.openCoverSelection,ref:this.dataPanelRef}),a.a.createElement(W,{appearance:l,onSelectedStoriesUpdate:this.onSelectedStoriesUpdate,storyIds:t,loadMore:s,hasMore:c,selectedStoryIds:E,storyMap:_,linkData:r,isEditingLinksAvailable:i,onStoryLinkUpdate:o})),m===n.b.cover&&a.a.createElement(pe,{ownerId:u,appearance:l,cover:O,stories:h,onSave:this.confirmCover,coverUploadConfig:d,storyMap:_}))},t.prototype.getBoxTitle=function(){var e=this.props.type;return this.state.section===n.b.cover?Object(r.b)("stories_choose_cover_title"):e===n.a.create?Object(r.b)("stories_creating_narrative"):Object(r.b)("stories_editing_narrative")},t.prototype.getPublishDoneHtml=function(e,t,_){var o=this.props.getPublishDoneHTML;if(o)return o(e,t,_);var i=e.split("_"),a=i[0],l=i[1],s="if (!event.metaKey && !event.ctrlKey) { showNarrative("+Number(a)+", "+Number(l)+", 0, 'narrative"+e+"'); return false; }";return'\n      <div class="top_result_header">\n        '+(_===n.a.create?Object(r.b)("stories_narrative_created"):Object(r.b)("stories_narrative_edited")).replace("{name}",'<a href="/narrative'+e+'" onclick="'+s+'">'+Object(H.c)(t)+"</a>")+'\n      </div>\n      <a href="#" class="link" onclick="window.Likes.share(\'narrative'+e+"'); return false;\">"+Object(r.b)("stories_manage_share_narrative")+"</a>\n    "},t.prototype.getSelectedStories=function(){var e=this;return this.state.selectedStoryIds.map((function(t){return e.props.storyMap[t]}))},t.prototype.componentWillUnmount=function(){this.revokeCustomUrls()},t.prototype.revokeCustomUrls=function(){var e=this.state.cover;e&&Object(ie.d)(e)&&[e.url,e.customPhotoOriginalUrl].forEach((function(e){(null==e?void 0:e.startsWith("blob:"))&&URL.revokeObjectURL(e)}))},t.defaultProps={name:"",type:n.a.create,activeTabKey:n.c.selected,isEditingLinksAvailable:!1,appearance:n.d.page},t}(a.a.Component)},"6zvi":function(e,t,_){"use strict";_.d(t,"a",(function(){return r})),_.d(t,"b",(function(){return n}));var o=_("zxIV"),i=_("+QWO"),a="PageActionCell--locked";function r(e){e&&(e.classList.contains(a)||(e.lockTimeout&&clearTimeout(e.lockTimeout),e.resetLockTimeout=!1,e.lockTimeout=window.setTimeout((function(){if(!e.resetLockTimeout){var t=Object(o.g)("div",{className:"PageActionCell__spinner"});t.innerHTML=Object(i.a)().icon,e.prepend(t),e.classList.add(a)}}),500)))}function n(e){if(e&&(e.resetLockTimeout=!0,e.classList.contains(a))){e.classList.remove(a);var t=e.querySelector(".PageActionCell__spinner");t&&t.remove()}}},"7GuL":function(e,t,_){"use strict";_.d(t,"a",(function(){return i})),_.d(t,"b",(function(){return a})),_.d(t,"c",(function(){return v})),_.d(t,"e",(function(){return D})),_.d(t,"f",(function(){return g})),_.d(t,"d",(function(){return M})),_.d(t,"h",(function(){return C})),_.d(t,"g",(function(){return T}));var o,i="donut_duration",a="donut_duration",r=_("BTjd"),n=_("zxIV"),l=_("t7n3"),s=_("oK+H"),c=function(e,t,_){_?Object(n.y)(e,_):t&&(t.firstChild?Object(n.z)(e,t.firstChild):e&&t.appendChild(e))},d=_("vkK6"),u=_("Egk5"),p=_("v+DW"),b=function(e,t){var _=function(e){if(!(e instanceof Element)||"submit_post_box"!==e.id)return!0;var t=parseInt(Object(n.v)(e,"from-oid"))||void 0;return!!t&&t<0}(e),o=function(e){var t,_=null===(t=null==e?void 0:e.markAsAdsGetCheckboxEl)||void 0===t?void 0:t.call(e);return!_||!!!Object(p.l)(_)}(t);return _&&o},E=function(e){var t,_=null===(t=null==e?void 0:e[5])||void 0===t?void 0:t[i];return void 0!==_?_:void 0},O=_("HLtZ"),m=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function _(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(_.prototype=t.prototype,new _)}),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t}(Error),w=function(){function e(t,_){var o=this;this.containerEl=t,this.addMedia=_,this.updateView=function(){o.isInitialized&&(o.actionsUpdateVisibilityView()&&(o.tooltipVisibilityUpdateView(),o.tooltipDurationUpdateView()))},this.chooseDonutVisibility=function(t){var _,i,a=e.getEventParams(t);if(!a)return!1;null===(i=null===(_=o.tooltipDonutVisibility)||void 0===_?void 0:_.hide)||void 0===i||i.call(_),o.setDonutDuration(a.donut_duration)},this.chooseDonutDuration=function(t){var _,i,a=e.getEventParams(t);if(!a)return!1;null===(i=null===(_=o.tooltipDonutDuration)||void 0===_?void 0:_.hide)||void 0===i||i.call(_),o.setDonutDuration(a.donut_duration)};try{this.tooltipVisibilityInitView(),this.tooltipDurationInitView(),this.isInitialized=!0,this.updateView();var i=this.getEmitter();i&&i.on(this.addMedia.eventTypes.mediaUpdate,this.updateView)}catch(e){e instanceof h||Object(O.c)(e),this.isInitialized=!1}}return e.prototype.setPostDonutOnly=function(){this.setDonutDuration(-1)},e.prototype.donutUpdateVisibility=function(e){this.actionsUpdateVisibilityView(e)},e.prototype.getEmitter=function(){return this.addMedia.emitter},e.prototype.tooltipVisibilityInitView=function(){var t,_=this.getLnkId(),o=Object(l.n)("visibility_access_donut",{link_id:_});if(!o)throw new h;if(this.visibilityTooltipEl=Object(n.rb)(o),!this.visibilityTooltipEl)throw new h;c(this.visibilityTooltipEl,this.containerEl),this.tooltipDonutVisibility=null===(t=Object(s.a)(e.TOOLTIP_VISIBILITY_NAME,_))||void 0===t?void 0:t.toooltip,Object(r.a)(this.containerEl,e.TOOLTIP_VISIBILITY_OPTION_SELECTOR,"click",this.chooseDonutVisibility)},e.prototype.tooltipDurationInitView=function(){var t,_=this.getLnkId(),o=Object(l.n)("donut_duration_select",{link_id:_});if(!o)throw new h;if(this.durationTooltipEl=Object(n.rb)(o),!this.durationTooltipEl)throw new h;c(this.durationTooltipEl,this.containerEl,this.visibilityTooltipEl),this.tooltipDonutDuration=null===(t=Object(s.a)(e.TOOLTIP_DURATION_NAME,_))||void 0===t?void 0:t.toooltip,Object(r.a)(this.containerEl,e.TOOLTIP_DURATION_OPTION_SELECTOR,"click",this.chooseDonutDuration)},e.prototype.getLnkId=function(){return this.addMedia.lnkId},e.getEventParams=function(e){var t,_=e.target;return!Object(u.d)(e)&&_ instanceof HTMLElement&&(null===(t=Object(d.a)(_))||void 0===t?void 0:t.actionParams)},e.prototype.setDonutDuration=function(t){var _;e.isDurationValueEmpty(t)?this.addMedia.unchooseMediaForType(a):this.addMedia.addOrUpdateChosenMedia(a,"",((_={})[i]=t,_))},e.isDurationValueEmpty=function(e){return null===e},e.prototype.getTooltipVisibilityActiveElement=function(t){var _=null!==t?-1:null;return this.containerEl.querySelector(e.TOOLTIP_VISIBILITY_OPTION_SELECTOR+'[data-value="'+_+'"]')},e.prototype.getTooltipDurationActiveElement=function(t){return this.containerEl.querySelector(e.TOOLTIP_DURATION_OPTION_SELECTOR+'[data-value="'+t+'"]')},e.prototype.getActiveDurationOption=function(){var e=this.addMedia.findChosenMedia(a),t=e?E(e):void 0;return void 0!==t?t:null},e.prototype.tooltipVisibilityUpdateView=function(){var t=this.getActiveDurationOption(),_=String(this.getLnkId())||"",o=this.getTooltipVisibilityActiveElement(t),i=!e.isDurationValueEmpty(t),a=this.visibilityTooltipEl;Object(p.r)(o,t,"post_settings_btn"+e.TOOLTIP_VISIBILITY_NAME+_);var r=null==a?void 0:a.querySelector(".post_action_btn_text"),s=o&&Object(n.Cb)(o)||"";r&&s&&(r.innerHTML=s,r.setAttribute("aria-label",Object(l.F)(s))),Object(n.zb)(a,"on",i)},e.prototype.tooltipDurationUpdateView=function(){var t=this.getActiveDurationOption(),_=String(this.getLnkId())||"",o=this.getTooltipDurationActiveElement(t),i=!e.isDurationValueEmpty(t),a=i&&!!t&&t>0,r=this.durationTooltipEl;Object(p.r)(o,t,"post_settings_btn"+e.TOOLTIP_DURATION_NAME+_);var s=null==r?void 0:r.querySelector(".post_action_btn_text"),c=a?o&&Object(n.Cb)(o):Object(n.v)(s,"empty"),d=o?c:"";s&&d&&(s.innerHTML=d,s.setAttribute("aria-label",Object(l.F)(d))),Object(n.zb)(r,"on",a),Object(n.zb)(r,"visible",i);var u=this.addMedia.markAsAdsGetCheckboxEl();u&&Object(p.e)(u,i)},e.prototype.actionsUpdateVisibilityView=function(e){var t=null!=e?e:this.getPostboxForNewPost(),_=b(t,this.addMedia);return this.visibilityTooltipEl&&this.durationTooltipEl?(Object(n.zb)(this.containerEl,"post_actions_btns--donut-actions-hidden",!_),_):_},e.prototype.getPostboxForNewPost=function(){return"post_actions_btns"===this.containerEl.id?document.querySelector("#submit_post_box"):null},e.TOOLTIP_DURATION_NAME="post_donut_duration_btn",e.TOOLTIP_DURATION_OPTION_SELECTOR='[data-onclick="toggleDonutPostDuration"]',e.TOOLTIP_VISIBILITY_NAME="donut_visibility_btn",e.TOOLTIP_VISIBILITY_OPTION_SELECTOR='[data-onclick="toggleDonutPostVisibility"]',e}(),v=function(e){var t=e.actionsEl,_=e.addMedia;if(t instanceof Element){var o=new w(t,_);return{donutPostSettings:o.isInitialized?o:void 0}}},f=_("aong"),g=function(e){var t,_=E(e);return void 0!==_?((t={}).donut_duration=_,t):void 0},P=function(e){var t=e.findChosenMedia(a);return E(t)},M=function(e,t){return void 0!==(t&&P(t))&&b(e,t)?1:0},D=function(e,t){var _;if(e&&t){var o=P(t)||-1;return(_={}).donut_duration=o,_.mark_as_ads=0,_}},C=function(e,t){if(e instanceof Element){var _=!!(null==t?void 0:t.is_marked_as_donut),o=e.querySelector('[data-section-ref="donut-post-donator-icon"]');if(_){var i,a,r,s=e.querySelector(".post_date"),c=Object(l.n)("postDonatorIcon");if(s&&c)i=s,a=Object(n.rb)(c),(r=o)?Object(n.G)(r,a):i.appendChild(a)}else null==o||o.remove()}},T=function(e,t){return e.getMedias().some((function(e){return function(e,t){var _;switch(e[0]){case"article":var o=null==e?void 0:e[5],i=(null==o?void 0:o.owner_id)===t;return Boolean(i&&(null==o?void 0:o.is_donut));case"podcast":var a=null===(_=null==e?void 0:e[5])||void 0===_?void 0:_.audio,r=null==a?void 0:a[12];i=(null==a?void 0:a[1])===t;return Boolean(i&&Object(f.l)(r).paid);default:return!1}}(e,t)}))}},"7RaI":function(e,t,_){"use strict";_.d(t,"a",(function(){return u})),_.d(t,"j",(function(){return p})),_.d(t,"h",(function(){return b})),_.d(t,"g",(function(){return E})),_.d(t,"f",(function(){return O})),_.d(t,"c",(function(){return m})),_.d(t,"d",(function(){return h})),_.d(t,"e",(function(){return w})),_.d(t,"k",(function(){return v})),_.d(t,"i",(function(){return f})),_.d(t,"b",(function(){return P}));var o=_("ErRf"),i=_("Egk5"),a=_("zxIV"),r=_("kcIO"),n=[],l=function(){window.cur.storyLayer&&window.cur.storyLayer.onVisibilityChange()},s=function(){window.cur.storyLayer&&window.cur.storyLayer.onResize()},c=function(e){window.cur.storyLayer&&window.cur.storyLayer.onKeyDown(e)},d=function(e){window.cur.storyLayer&&window.cur.storyLayer.onKeyUp(e)};function u(e,t){window.cur.storyLayer&&window.cur.storyLayer.pauseLayer(),Object(a.J)("stories_layers_background")||(document.body.appendChild(Object(a.g)("div",{id:"stories_layers_background",className:"stories_layers_background"})),window.layerQueue.hide(),window.layerQueue.push(),window.layers.fullhide=O,Object(i.b)(window,"visibilitychange",l,void 0,void 0,!0),Object(i.b)(window,"resize",s),Object(i.b)(document,"keydown",c),Object(i.b)(document,"keyup",d)),window.cur.storyLayer=e,e.animateStory("expand",t.fromEl).catch((function(){})),n.push(e),Object(a.c)(document.body,"stories_layer_shown"),Object(o.c)("stories_layer_close"+n.length,(function(t){void 0===t&&(t={}),t.byTimer?e.sendNavigationStatEvents("close_auto_by_time"):e.sendNavigationStatEvents("close_tap"),n.length>1&&!t.isCloseBtnClick?e.back():(e.hideAllLayers=t.isCloseBtnClick,e.hide(!1))}))}function p(){n.pop(),window.cur.storyLayer=n[n.length-1],window.cur.storyLayer?window.cur.storyLayer.resumeLayer():(O(!0),window.layerQueue.pop(),window.cur.storiesCashedBoxQueueData&&(Object(r.e)(window.cur.storiesCashedBoxQueueData),function(){var e=g();e&&(e.forceHide=!1,e._show(!0,!1,!0))}(),delete window.cur.storiesCashedBoxQueueData))}function b(){n.length>1&&(n[n.length-2].setLayerVisibility(!1),n[n.length-1].showBackButton())}function E(){n.length>1?n[n.length-2].setLayerVisibility(!0):Object(a.vb)("stories_layers_background","opacity",0)}function O(e){void 0===e&&(e=!1);for(var t=0;t<n.length;t++)n[t].hide(!0);if(window.layers.fullhide=!1,Object(a.mb)(document.body,"stories_layer_shown"),Object(a.kb)("stories_layers_background"),Object(i.i)(window,"visibilitychange",l),Object(i.i)(window,"resize",s),Object(i.i)(document,"keydown",c),Object(i.i)(document,"keyup",d),e){var _=window.nav.objLoc;delete _.w,window.nav.setLoc(_)}window.cur.needUpdateFeedStories&&window.Stories.updateFeedStories(),n=[]}function m(){return n.length}function h(){return n[0]}function w(){return n[n.length-2]}function v(){for(var e=n.length-2;e>=0;e--)n[e].doHide(!0);n.splice(0,n.length-1)}function f(e){for(var t=0;t<n.length;t++)n[t].onReplyDeleted(e)}function g(){var e;if(!(null===(e=window._message_boxes)||void 0===e?void 0:e.length))return null;var t=window._message_boxes.filter(Boolean);return t.length?t[t.length-1]:null}function P(e){Object(r.b)()&&(e.fromEl=null,function(){var e=g();e&&(e._hide(!1,!0,!0),e.forceHide=!0)}(),window.cur.storiesCashedBoxQueueData=Object(r.c)())}window.LayersX=n},"7ckd":function(e,t,_){"use strict";_.d(t,"b",(function(){return u})),_.d(t,"c",(function(){return p})),_.d(t,"a",(function(){return b})),_.d(t,"d",(function(){return E}));var o=_("zxIV"),i=_("kcIO"),a=_("r6iD"),r=_("4+be"),n=_("jE6c"),l=_("CTYr"),s=_("s5b+"),c=_("HLtZ"),d=_("W9Tc");function u(e){return e.map((function(e){return e.id})).join(",")}function p(e){void 0===e&&(e=!1);var t=Object(n.f)(window.cur.oid);if(window.cur.narrativeBlock)window.ajax.post("al_stories.php",{act:"get_narrative_block",owner_id:t},{onDone:function(e){var t=Object(n.f)(window.cur.oid),_=document.getElementById("narratives_module"+t+"_wrapper");if(_)if(e)Object(o.G)(_,e),window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),window.NarrativeBlock&&(window.cur.narrativeBlock=new l.a);else{var i=_.parentElement;(null==i?void 0:i.children.length)&&(null==i?void 0:i.children.length)>1?_.remove():null==i||i.remove(),window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),delete window.cur.narrativeBlock}Object(s.b)("narratives"+t)}});else if(t>0&&"profile"===window.cur.module){var _=document.getElementById("profile_media_narrow_block"),a=!_;window.ajax.post("al_stories.php",{act:"get_narrative_block",owner_id:t,need_wrap_block:Object(n.f)(a)},{onDone:function(e){if(_)_.insertAdjacentHTML("afterbegin",e);else{var o=document.getElementById("narrow_column");if(!o)return;o.insertAdjacentHTML("beforeend",e)}window.cur.narrativeBlock&&window.cur.narrativeBlock.destroy(),window.NarrativeBlock&&(window.cur.narrativeBlock=new l.a,window.cur.narrativeBlock.showOnboardTooltipIfNeeded()),Object(s.b)("narratives"+t)}})}else e&&function(e){window.boxQueue.hideAll();var t=document.querySelector("#box_layer_wrap"),_=document.querySelector("#box_loader");window.nav.reload({onDone:function(){e&&e()},showProgress:function(){Object(o.xb)(t),Object(o.xb)(_),Object(i.a)(_)},hideProgress:function(){Object(o.bb)(t),Object(o.bb)(_)}})}((function(){window.cur.needNarrativeOnboard=!0}))}function b(e){if(e){var t="narratives_module"+window.vk.id;Object(a.a)({module:t,text:Object(r.d)("stories_narrative_block_onboarding_text"),onClose:function(){delete window.cur.needNarrativeOnboard,window.ajax.post("al_index.php",{act:"hide_feature_tt",hash:e,type:"profile_narrative"})},autoCancelDelay:1e4,speed:600})}}function E(e){if(window.vk.id&&Object(d.b)("update_private_snippets_by_queue")){var t=Array.from(e.querySelectorAll(".NarrativeSnippet"));if(t.length){var _=[];t.forEach((function(e){if(window.vk.id&&e.dataset.needUpdate){var t=e.dataset.narrativeRawId;t&&_.push({narrative_raw_id:t,snippet_type:e.dataset.snippetType,from:e.dataset.from})}})),_.length&&window.ajax.post("al_stories.php",{act:"get_narrative_snippets",narrative_snippets:JSON.stringify(_)},{onDone:function(e){t.forEach((function(t){t.dataset.narrativeRawId&&e[t.dataset.narrativeRawId]&&(t.outerHTML=e[t.dataset.narrativeRawId])}))},onFail:function(){return Object(c.c)(new Error("Fail: updateNarrativeSnippetFromQueueByPost")),!0}})}}}},"9at3":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a1Th"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pIFo"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("zxIV"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("v+DW"),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ryw6"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("t7n3"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("cGUQ"),WallUpload={_videoUploadIndex:null,photoUploaded:function(e,t){var _=void 0!==e.ind?e.ind:e,o=(e.fileName?e.fileName:e).replace(/[&<>"']/g,""),i=e.fileName?_+"_"+e.fileName:e,a=ge("upload"+i+"_progress_wrap");a&&hide(geByClass1("progress_x",a)),ajax.post("al_photos.php",extend({act:"choose_uploaded"},t),{onDone:function(e,t){WallUpload.addMedia().chooseMedia("photo",e,extend(t,{upload_ind:_+"_"+o}))},onFail:WallUpload.uploadFailed.pbind(e)})},uploadFailed:function(e,t){var _=void 0!==e.ind?e.ind:e,o=Upload.options[_],i=(e.fileName?e.fileName:e).replace(/[&<>"']/g,"");if("fileApi"==Upload.types[_]&&!o.wiki_editor){var a,r=e.fileName?_+"_"+e.fileName:e;cur.imMedia?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.kb)("upload"+r+"_progress_wrap"),a=cur.imMedia.lnkId,cur.addMedia[a].unchooseMedia()):cur.addMedia&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.kb)("upload"+r+"_progress_wrap"),(a=(cur.attachMediaIndexes||{})[i])&&cur.addMedia[a].unchooseMedia()),1==o.filesTotalCount&&setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.d)({title:getLang("global_error")},getLang("wall_add_photo_error")).hide,2e3)}Object(_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_6__.c)("Upload failed",{dt:-1,type:102,url:(ge("file_uploader_form"+_)||{}).action}),Upload.embed(_)},show:function(){cur.uploadInited&&("feed"==cur.wallType?removeClass(cur.uploadWrap,"post_upload_min_wrap"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.xb)(cur.uploadWrap))},hide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){cur.uploadInited&&("feed"==cur.wallType?addClass(cur.uploadWrap,"post_upload_min_wrap"):hide(cur.uploadWrap),hide("post_upload_dropbox"))})),addMedia:function(){return cur.dropboxAddMedia||cur.wallAddMedia},attachEl:function(){return WallUpload.dropboxAttachEl||ge("submit_post_box")},attachToEl:function(e){e=ge(e);var t=ge("post_upload_dropbox");if(WallUpload.dropboxAttachEl=e,!e||!t)return!1;e.insertBefore(t,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.x)(e))},checkDragDrop:function(){var e=browser,t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.k)(browser.version);return!!(e.msie&&t>=9||e.mozilla&&t>=3.5||e.chrome||e.safari)&&((window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder))))},initCallback:function(){cur.editingPost?WallUpload.init():Wall.showEditPost()},init:function(){cur.withUpload&&(cur.uploadAdded?WallUpload.show():(cur.uploadAdded=!0,window.Upload&&window.VideoInlineUpload?(WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()):stManager.add([jsc("web/upload.js"),"video_upload.js"],(function(){WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()}))))},initVideoUploader:function(){var e=cur.wallUploadVideoOpts;if(e){var t=ge("post_field_upload_video"),_=ge("post_upload_video_dropbox");e.options.from="post";var o=ge("send_post"),i={onUploadAllCompleteDone:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.f)(o,!1)},onUploadStartDone:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.f)(o,!0)}};return window.VideoInlineUpload.getUploadModule(t,_,e,WallUpload.addMedia(),i)}},initLoader:function initLoader(){removeEvent(bodyNode,"dragover dragenter");var data=cur.wallUploadOpts,field=ge("post_field");if(WallUpload.checkDragDrop()){cur.uploadWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.g)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="post_field_upload" class="post_upload"></div>'}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.z)(cur.uploadWrap,field),cur.uploadVideoWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.g)("div",{className:"post_upload_video_wrap fl_r",innerHTML:'<div id="post_field_upload_video" class="post_upload_video"></div>'}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.z)(cur.uploadVideoWrap,field);var submitBox=WallUpload.attachEl();submitBox.insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.g)("div",{id:"post_upload_dropbox",className:"post_upload_dropbox",innerHTML:'<div class="post_upload_dropbox_inner"><div class="post_upload_label drop_label">'+(data.opts.lang.wall_drop_media_here||"Drop files here")+'</div><div class="post_upload_label release_label">'+(data.opts.lang.wall_release_media_here||"Release button to attach files")+"</div></div>"}),submitBox.firstChild),cur.wallUploadInd=Upload.init("post_field_upload",data.url,data.params,{accept:"image/jpeg,image/png,image/gif",dragEl:bodyNode,dropbox:"post_upload_dropbox",file_input:null,file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_match:data.opts.ext_re,lang:data.opts.lang,noFlash:1,multiple:1,multi_progress:1,max_files:10,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:data.opts.server,error:data.opts.default_error,error_hash:data.opts.error_hash,label:data.opts.label,wiki_editor:0,onUploadStart:function(e,t){var _=void 0!==e.ind?e.ind:e,o=Upload.options[_];"form"==Upload.types[_]&&(geByClass1("file",ge("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[_]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),o.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete:function onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(e){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__.fromQueryString)(res)}params.photos?WallUpload.photoUploaded(info,params):Upload.onUploadError(info)},onUploadProgress:function(e,t,_){var o=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[o]){var i=(cur.attachMediaIndexes||{})[o];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){var a={loaded:t,total:_};e.fileName&&(a.fileName=e.fileName.replace(/[&<>"']/g,"")),WallUpload.addMedia().showMediaProgress("photo",o,a)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(e){"form"==Upload.types[e]&&Upload.embed(e)},onDragEnter:function(){cur.editingPost?(Wall.hidePosterFeatureTooltip(),WallUpload.init()):Wall.showEditPost()},onNoFilteredCallback:function(e){Wall._videoUploadIndex&&Upload.onFileApiSend(Wall._videoUploadIndex,e)}}),cur.uploadInited=!0,WallUpload.show(),cur.wallUploadFromDrag&&(1==cur.wallUploadFromDrag&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.xb)("post_upload_dropbox"),delete cur.wallUploadFromDrag)}}};__webpack_exports__.a=WallUpload},"9kZp":function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c=!1;function d(){c||(Object(l.a)(new r.a({id:"add_36",viewBox:"0 0 36 36",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" id="add_36"><g fill="none" fill-rule="evenodd"><path d="M0 0h36v36H0z" /><path d="M19.5 19.5v9a1.5 1.5 0 01-3 0v-9h-9a1.5 1.5 0 010-3h9v-9a1.5 1.5 0 013 0v9h9a1.5 1.5 0 010 3h-9z" fill="currentColor" /></g></symbol>'})),c=!0)}var u=function(e){return Object(l.b)((function(){d()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 36 36",id:"add_36",width:isNaN(e.width)?36:+e.width,height:isNaN(e.height)?36:+e.height}))};u.mountIcon=d,t.a=u},"9xR5":function(e,t,_){"use strict";_.d(t,"a",(function(){return r})),_.d(t,"b",(function(){return n})),_.d(t,"c",(function(){return l})),_.d(t,"e",(function(){return s})),_.d(t,"f",(function(){return c})),_.d(t,"g",(function(){return d})),_.d(t,"d",(function(){return p}));var o=_("xc/8"),i=_("qssJ"),a=_("q1tI"),r=function(e,t){var _=Object(o.b)({});return Object.entries(Object(o.a)(e)).forEach((function(e){var o,i,a,r=e[0],n=e[1],l=r,s=null!==(a=null===(i=null===(o=null==t?void 0:t.itemsById)||void 0===o?void 0:o[l])||void 0===i?void 0:i.score)&&void 0!==a?a:1;_[l]=s*(n||0)})),_},n=function(e){return Object.values(Object(o.a)(e)).reduce((function(e,t){return e+(t||0)}),0)},l=function(e){return n(Object(o.b)(e))},s=function(){var e,t,_;return"function"==typeof(null===(e=window.cur)||void 0===e?void 0:e.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null===(_=null===(t=window.Widgets)||void 0===t?void 0:t.oauth)||void 0===_||_.call(t),!1)},c=function(e){return new Promise((function(t,_){var o=new Image;o.src=e,o.onload=function(){return t()},o.onerror=function(){return _()}}))},d=function(e){var t=a.useRef(e);return a.useEffect((function(){t.current=e})),t.current},u=Object.values(i.a),p=function(e){return u.includes(e)}},BTjd:function(e,t,_){"use strict";const o=new WeakMap;function i(e,t,_,i){var a,r;if(!e&&!o.has(t))return!1;const n=null!==(a=o.get(t))&&void 0!==a?a:new WeakMap;if(o.set(t,n),!e&&!o.has(t))return!1;const l=null!==(r=n.get(_))&&void 0!==r?r:new Set;n.set(_,l);const s=l.has(i);return e?l.add(i):l.delete(i),s&&e}t.a=function e(t,_,o,a,r){if("string"==typeof t&&(t=document.querySelectorAll(t)),"function"!=typeof t.addEventListener){const i=Array.prototype.map.call(t,t=>e(t,_,o,a,r));return{destroy(){i.forEach(e=>e.destroy())}}}const n=t,l=Boolean("object"==typeof r?r.capture:r),s=e=>{const t=e.target.closest(_);t&&(e.delegateTarget=t,e.currentTarget.contains(e.delegateTarget)&&a.call(n,e))},c=JSON.stringify({selector:_,type:o,capture:l}),d={destroy(){n.removeEventListener(o,s,r),i(!1,n,a,c)}};return i(!0,n,a,c)||n.addEventListener(o,s,r),d}},CTYr:function(e,t,_){"use strict";var o=_("jE6c"),i=_("rJNF"),a=_("7ckd"),r=_("1UEa"),n=_("D1OX"),l=_("7RaI"),s=function(){function e(){var e=this;this.destroy=function(){e.gallery&&e.gallery.destroy()},this.moduleEl=document.querySelector(".narratives_module"),this.isWide=this.moduleIsWide(this.moduleEl),this.initGallery(),this.needOnBoard()&&this.showOnboardTooltipIfNeeded(),window.cur.destroy&&window.cur.destroy.push((function(){e.destroy()}))}return e.prototype.initGallery=function(){if(this.isWide&&(this.galleryEl=document.querySelector(".NarrativeBlock"),this.galleryEl)){var e=this.galleryEl.querySelectorAll(".ui_gallery_item"),t={scrollY:!1};(!e||e.length<7)&&(t.scrollX=!1),this.gallery=new n.a(this.galleryEl,t)}},e.prototype.moduleIsWide=function(e){if(e){var t=e.getAttribute("data-is-wide");return!!Object(o.f)(t)}return!1},e.prototype.getOnboardHash=function(){var e;return null===(e=this.moduleEl)||void 0===e?void 0:e.dataset.onboardHash},e.prototype.openNarrativeBox=function(){var e=this.getOwnerId(),t=e>0?r.b.profile:r.b.club;this.showBox(),Object(r.c)(r.a.openNarrativeList,e,0,t)},e.prototype.seeMore=function(){var e=this.getOwnerId(),t=e>0?r.b.profile:r.b.club;this.showBox(),Object(r.c)(r.a.seeMore,e,0,t)},e.prototype.showBox=function(){var e=this.getOwnerId(),t={ownerId:e,onSave:function(){return Object(a.c)()},onRemove:function(){return Object(a.c)()},onReorder:function(){return Object(a.c)()},navScreen:e>0?r.b.profile:r.b.club};Object(i.b)(t)},e.prototype.showNarrativeEditorBox=function(){var e=this.getOwnerId(),t=e>0?r.b.profile:r.b.club;if(Object(r.c)(r.a.createNarrative,e,0,t),e<0)window.nav.go(location.pathname+"?act=narrative_create");else{var _={onSave:function(){return Object(a.c)()},navScreen:t};Object(i.f)(e,_)}},e.prototype.getOwnerId=function(){return Object(o.f)(window.cur.oid)},e.prototype.showOnboardTooltipIfNeeded=function(){var e=this.getOnboardHash();e&&(window.cur.storyLayer&&l.f(!0),window.boxQueue.hideAll(),Object(a.a)(e))},e.prototype.needOnBoard=function(){return Boolean(window.cur.needNarrativeOnboard)},e}();t.a=s},D1OX:function(e,t,_){"use strict";_.d(t,"b",(function(){return a})),_.d(t,"a",(function(){return r}));var o=_("qYuU"),i=Object(o.a)("ui-gallery",()=>({galleries:{},incIndex:0}));function a(e){var t=domData(ge(e),"gallery-id");return t&&i().galleries[t]}class r{constructor(e,t){if(!e)throw new Error("No element was provided for UIGallery");if(e=ge(e),!hasClass(e,"ui_gallery"))throw new Error("Provided incorrect element for UIGallery");var _=a(e);if(_)return _;this._opts=extend({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1},t),this._id=i().incIndex,i().incIndex+=1,this._el=e,this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._itemWidth=getSize(this._items[0])[0],this._itemOffset=intval(getStyle(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=intval(getStyle(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=geByClass1("ui_gallery__inner_cont",this._el),this._inner=geByClass1("ui_gallery__inner",this._el),this._scroll=function(){var e={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return e;if(!cur._scrollInfo){var t=se('<div style="position: fixed; left: -1000; width: 0; overflow: scroll">x</div>');ge("content").appendChild(t);var _=t.scrollLeft;e.rtl=vk.rtl,e.backward=_>0,t.scrollLeft=1e3,e.delta=t.scrollLeft===_?-1:1,e.negative=!e.backward&&e.delta<0,e.rtlSame=e.rtl&&!e.backward&&!e.negative,re(t),cur._scrollInfo=e}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[]},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),domData(this._el,"gallery-id",this._id),i().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&addEvent(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this))}_initArrows(){this._opts.noArrows?addClass(this._el,"ui_gallery_no_arrows"):(this._leftArrow=geByClass1("ui_gallery__arrow_left",this._el),this._rightArrow=geByClass1("ui_gallery__arrow_right",this._el),this._arrowWidth=getSize(this._leftArrow)[0],addEvent(this._leftArrow,"click",this._onArrowScroll.bind(this,-1)),addEvent(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),addEvent(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),addEvent(this._rightArrow,"click",this._onArrowScroll.bind(this,1)),addEvent(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),addEvent(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(e){if(this._opts.scrollX||this._opts.scrollY){var t;if("wheel"==e.type)if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){if(!this._opts.scrollY)return;t=-e.deltaY}else{if(!this._opts.scrollX)return;t=-e.deltaX}else if(void 0!==e.wheelDeltaY){if(!this._opts.scrollY)return;t=e.wheelDeltaY}else if(void 0!==e.wheelDelta)t=e.wheelDelta;else{if(!e.detail||1!==e.axis)return;t=-e.detail}t=this._scroll.rtlSame?-t:t,Math.abs(t)>=120&&(t=74*Math.max(-1,Math.min(1,t))),this._innerCont.scrollLeft-=t,this._checkItemsAfterScroll(this._innerCont.scrollLeft),cancelEvent(e)}}_onArrowScroll(e,t){if(!this._opts.noArrows){var _=this._innerCont.scrollLeft+(this._scroll.rtlSame?-e:e)*(this._width-2*this._arrowWidth),o=this._innerCont.scrollWidth-this._width;this._scroll.negative?(_=Math.min(_,0),_=Math.abs(_)):_=Math.max(0,_),_=Math.min(o,_);var i=this._scroll.negative||this._scroll.rtlSame?-e:e;if(i>0&&_<o)_=Math.floor(_/this._itemFullWidth)*this._itemFullWidth;else if(i<0&&_>0){_=Math.floor(_/this._itemFullWidth)*this._itemFullWidth}if(0===_||_===o){var a=this._innerCont.scrollWidth;addClass(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),_&&(_+=e*(this._innerCont.scrollWidth-a))}this._scroll.negative&&(_=-_),animate(this._innerCont,{scrollLeft:_},{duration:Math.abs(this._innerCont.scrollLeft-_)+50,transition:Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(_),setTimeout(()=>removeClass(this._inner,"ui_gallery__inner_shift_instant"),0),cancelEvent(t)}}_checkItemsAfterScroll(e,t){if(this._scroll.negative&&(e=Math.abs(e)),this._opts.markOutside||this._opts.onViewItem){var _,o=this._itemWidth/3,i=(this._scroll.backward?this._inner.scrollWidth-this._width-e:e)-this._scrollOffset,a=e&&Math.floor(i/this._itemFullWidth),r=a*this._itemFullWidth+2*o;_=this._scroll.backward?e+this._width<this._inner.scrollWidth-r:e>r;var n,l=Math.min(this._items.length-1,Math.floor((i+this._width)/this._itemFullWidth)),s=l*this._itemFullWidth+2*o;if(n=this._scroll.backward?e>this._inner.scrollWidth-s:e+this._width<s,this._opts.onViewItem){var c=_?Math.min(this._items.length-1,a+1):a,d=n?Math.max(0,l-1):l;if(t||c!==this._visible.left||d!==this._visible.right){for(var u=c;u<=d;u++)(this._visible.left<0||t&&!inArray(this._items[u],this._visible.items)||u<this._visible.left||u>this._visible.right)&&this._opts.onViewItem(this._items[u],u);this._visible.left=c,this._visible.right=d,this._visible.items=this._items.slice(c,d+1)}}this._opts.markOutside&&(t?(geByClass("ui_gallery_item_outside",this._inner).forEach(e=>{removeClass(e,"ui_gallery_item_outside")}),this._outside.left=-1,this._outside.right=-1):((a!==this._outside.left||!_)&&this._outside.left>=0&&(removeClass(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(l!==this._outside.right||!n)&&this._outside.right>=0&&(removeClass(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),_&&a!==this._outside.left&&(addClass(this._items[a],"ui_gallery_item_outside"),this._outside.left=a),n&&l!==this._outside.right&&(addClass(this._items[l],"ui_gallery_item_outside"),this._outside.right=l))}if(!this._opts.noArrows){var p=e>0,b=e+this._width<this._inner.scrollWidth;toggleClass(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?b:p),toggleClass(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?p:b)}(!this._scroll.backward&&this._inner.scrollWidth-e-this._width<1e3||this._scroll.backward&&e<1e3)&&this._onLoadMore()}_onArrowMouseOver(e){this._opts.noArrows||addClass(this._inner,"ui_gallery__inner_shift_"+e)}_onArrowMouseOut(){this._opts.noArrows||(removeClass(this._inner,"ui_gallery__inner_shift_left"),removeClass(this._inner,"ui_gallery__inner_shift_right"))}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(e,t){e=e||[],this.addItems(e),this._finised=!!t||!e.length,this._loadingMore=!1}addItems(e,t){if((e=e||[]).length){var _=t>=0&&t<this._items.length?this._items[t]:null;e.forEach(e=>{_?domInsertBefore(e,_):this._inner.appendChild(e)}),this.refresh()}}destroy(){removeEvent(this._innerCont),removeEvent(this._leftArrow),removeEvent(this._rightArrow),domData(this._el,"gallery-id",null),delete i().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),re(this._el)}removeItem(e){return isNumeric(e)&&(e=this._items[e]),!(!e||!inArray(e,this._items))&&(re(e),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}getItems(){return this._items}getVisibleItems(){return this._visible.items.map((e,t)=>[e,this._visible.left+t])}}},DN6O:function(e,t,_){"use strict";_.d(t,"a",(function(){return l})),_.d(t,"b",(function(){return s}));var o=_("Jph1"),i=_("xqyG"),a=_("qYuU"),r=Object(a.a)("reactions-animations-storage",(function(){return{animationItemsData:new Map}})),n=function(){return r().animationItemsData},l=function(e){return n().has(e)},s=Object(i.a)({animationItemGet:function(e){var t=e.animationId;return n().get(t)},animationItemSet:function(e){var t=e.animationId,_=e.loadedAnimationData;n().set(t,_)},loadAnimation:Object(i.b)(o.a)})},DfBR:function(e,t,_){"use strict";_.d(t,"a",(function(){return i})),_.d(t,"b",(function(){return a}));var o=_("zxIV"),i=function(e){var t=document.querySelector("#wall_tabs");return t?Array.from(t.querySelectorAll(".ui_tab")).filter((function(t){var _=t.parentNode;return null!==_&&_!==e&&!Object(o.ab)(_,"unshown")&&!Object(o.ib)(_,'[data-ui-tab="no_posts"]')})):[]},a=function(){var e=document.querySelector("#wall_tabs"),t=null==e?void 0:e.querySelector(".page_wall_no_posts");null==t||t.remove(),Object(o.mb)(document.querySelector("#wall_tabs"),"page_tabs_hidden")}},DzCs:function(e,t,_){"use strict";var o=_("2vnv");_.d(t,"a",(function(){return o.a}))},F5gA:function(e,t,_){"use strict";_.d(t,"a",(function(){return n}));var o=_("zxIV"),i=_("lXE5"),a=function(e){window.cur.wallLayer?window.wkLayerWrap&&(window.wkLayerWrap.scrollTop=e):Object(i.g)(e,0,!1,!0)},r=function(e){var t,_;a((window.cur.wallLayer?null!==(_=null===(t=window.wkLayerWrap)||void 0===t?void 0:t.scrollTop)&&void 0!==_?_:0:Object(i.e)())+e)},n=function(e,t){if(e instanceof HTMLElement&&t instanceof HTMLElement){var _="fixed"===Object(o.T)(t,"position"),i=void 0!==window.cur.wallLayer;if(_){var n=e.getBoundingClientRect(),l=20-(t.getBoundingClientRect().top-n.bottom);l>0&&r(l)}else{if(i)return;var s=t.closest(".replies_wrap");s&&function(e){var t=Object(o.j)();if(e.getBoundingClientRect().bottom>t){var _=Object(o.V)(e)[1]+Object(o.Q)(e)-t;a(_)}}(s)}}}},F7NX:function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="narrative_active_outline_24",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="narrative_active_outline_24"><path d="M14.298 1.435c.732.17 1.377.543 1.891 1.092.521.556.825 1.145 1.151 2.298l.79 2.944a1 1 0 11-1.931.518l-.72-2.69-.113-.401c-.215-.729-.377-1.024-.636-1.302a1.726 1.726 0 00-.887-.512c-.37-.086-.707-.078-1.445.1l-.405.104L6.866 4.96c-.854.228-1.254.394-1.51.583l-.06.047-.134.119c-.26.243-.43.539-.512.886-.093.4-.076.763.148 1.638l2.723 10.17.113.401c.215.729.377 1.024.636 1.302.244.26.54.43.887.512.401.093.745.076 1.607-.14a1 1 0 11.487 1.94c-1.148.288-1.805.32-2.549.147a3.726 3.726 0 01-1.891-1.092c-.521-.556-.825-1.145-1.151-2.298L2.922 8.963c-.355-1.324-.405-2.027-.22-2.823a3.722 3.722 0 01.93-1.728l.183-.182.179-.157c.496-.412 1.077-.685 2.091-.973l.263-.072 5.128-1.374c1.323-.355 2.026-.405 2.822-.22zM18.368 11c2 0 3.632 1.592 3.632 3.567 0 1.91-.772 2.851-3.78 5.134l-1.328 1.007c-.527.4-1.257.4-1.784 0l-1.328-1.007C10.772 17.418 10 16.476 10 14.567 10 12.592 11.631 11 13.632 11c.829 0 1.595.224 2.282.66l.086.057.086-.057a4.174 4.174 0 012.036-.653z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 24 24",id:c,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=u,t.a=p},FThC:function(e,t,_){"use strict";_.r(t),_.d(t,"NOSPAM_TEXT_FIELD",(function(){return g})),_.d(t,"noSpamPatterns",(function(){return o.b})),_.d(t,"abortPatternMild",(function(){return o.a})),_.d(t,"noSpamSuspicious",(function(){return i})),_.d(t,"noSpamTemplates",(function(){return r})),_.d(t,"dealSingleSpamer",(function(){return n.c})),_.d(t,"reportsTime",(function(){return n.h})),_.d(t,"onFiltersChange",(function(){return n.f})),_.d(t,"rollbackDocMailSpamer",(function(){return s})),_.d(t,"rollbackDocWallSpamer",(function(){return c})),_.d(t,"rollbackJpgMailSpamer",(function(){return d})),_.d(t,"rollbackJpgWallSpamer",(function(){return u})),_.d(t,"rollbackPngMailSpamer",(function(){return p})),_.d(t,"rollbackPngWallSpamer",(function(){return b})),_.d(t,"rollbackDocSpamer",(function(){return E})),_.d(t,"rollbackPhotoSpamer",(function(){return O})),_.d(t,"rollbackPhotoSpamerFromWall",(function(){return m})),_.d(t,"rollbackPhotoSpamerFromMail",(function(){return h})),_.d(t,"rollbackVideoSpamer",(function(){return w})),_.d(t,"rollbackVideoSpamerFromWall",(function(){return v})),_.d(t,"rollbackVideoSpamerFromMail",(function(){return f})),_.d(t,"entityDecode",(function(){return P})),_.d(t,"selectText",(function(){return M})),_.d(t,"removeSelectedText",(function(){return D})),_.d(t,"getSelectedText",(function(){return C})),_.d(t,"selectValue",(function(){return T})),_.d(t,"blockDomain",(function(){return y})),_.d(t,"removeFidSearch",(function(){return j})),_.d(t,"banFidZero",(function(){return I})),_.d(t,"banFidForever",(function(){return L})),_.d(t,"isClaimContent",(function(){return A})),_.d(t,"getFieldName",(function(){return B}));var o=_("uRA3"),i={selected:"ua_hash",updateOnSelect:function(){return i.getByType(i.selected)},getSpamType:function(){return isObject(this.spamtype)?this.spamtype._selected[0]:"wall"},getPeriod:function(){return isObject(this.period)?this.period._selected[0]:1},getByType:function(e){var t=ge("suspicious_table"),_=geByClass1("summary_tab_sel","suspicious_tabs"),o=isVisible("suspicious_tabs")?0:1,i=this;this.selected=e;var a=ge("suspicious_spamtype"),r=ge("suspicious_period"),n=geByClass("_suspicious_msg"),l=geByClass1("_suspicious_"+e+"_msg");each(n,(function(e,t){hide(t)})),show(l),"hashtags"==e?hide(a):show(a),"users"==e&&hide(a,r),o&&(t=ge("suspicious")),removeClass(_,"summary_tab_sel");var s={act:"a_get_suspicious",type:e,spamtype:this.getSpamType(),period:this.getPeriod(),need_tabs:o};addClass("suspicious_"+e,"summary_tab_sel"),ajax.post("noSpam.php",s,{onDone:function(e){if(!e)return topError(getLang("nospam_suspicious_data_error"));t.innerHTML=e,i.initInlineDropdown()},progress:"suspicious_progress"})},initInlineDropdown:function(){var e={withArrow:!0,keepTitle:!0,autoShow:!0,autoHide:300,onSelect:i.updateOnSelect},t=extend({items:cur.options.spamtypes,selected:"wall"},e),_=extend({items:[[1,"ÐÐ´Ð¸Ð½ ÑÐ°Ñ"],[2,"ÐÐ²Ð° ÑÐ°ÑÐ°"],[5,"5 ÑÐ°ÑÐ¾Ð²"],[10,"10 ÑÐ°ÑÐ¾Ð²"],[24,"Ð¡ÑÑÐºÐ¸"]],selected:1},e);this.spamtype||(this.spamtype=new InlineDropdown("suspicious_spamtype",t)),this.spamtype._els.valueEl.innerHTML=this.spamtype._selected[1],this.period||(this.period=new InlineDropdown("suspicious_period",_)),this.period._els.valueEl.innerHTML=this.period._selected[1]}},a=(_("pIFo"),_("Vd3H"),_("4Ch9")),r=function(e){this.selected=0,extend(this,e),this.templates=JSON.parse(e.templates)};r.prototype={addTemplate:function(){showBox("noSpam.php",{act:this.acts.add},{params:{width:430,dark:1,progress:"add_template"}})},saveTemplate:function(e){var t=cur[e],_=t.selected||0;if(ge("add_template_title")&&ge("add_template_text")){var o=trim(ge("add_template_title").value),i=trim(ge("add_template_text").value);if(!o)return notaBene("add_template_title");if(!i)return notaBene("add_template_text");var a={act:t.acts.save,title:o,text:i,hash:t.hash,template_id:_};ajax.post("noSpam.php",a,{onDone:function(e,_){var o=ge(t.links);o.innerHTML=e,hasClass(o,"template_links")||addClass(o,"template_links"),t.templates=JSON.parse(_),curBox().hide()},progress:_?"edit_template":"add_template"})}},editTemplate:function(){var e={act:this.acts.edit,template_id:this.selected,hash:this.hash};showBox("noSpam.php",e,{params:{width:430,dark:1,progress:"edit_template"}})},deleteTemplate:function(){var e=this;if(!this.selected)return!1;showFastBox({title:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÐ°Ð±Ð»Ð¾Ð½Ð°",width:430,dark:1,progress:"delete_condition"},getLang("nospam_delete_template"),getLang("global_delete"),(function(){var t=e.selected,_={act:e.acts.remove,template_id:t,hash:e.hash};ajax.post("noSpam.php",_,{onDone:function(t,_){var o=ge(e.links);o.innerHTML=t,e.deselectTemplate(),e.templates=JSON.parse(_),isObject(e.templates)||removeClass(o,"template_links"),curBox().hide()},progress:"delete_condition"})}),getLang("global_cancel"))},selectTemplate:function(e){if(e){var t=this.templates[e];this.selected=e;var _=entityDecode(t.text);Object(a.l)(_),this.label.innerHTML=t.title+": ",addClass(this.wrap,"template_selected")}},selectCommentTemplate:function(e){if(e){var t=this.templates[e];this.selected=e;var _=entityDecode(t.text);this.editComment(_),this.label.innerHTML=t.answer_name+": ",addClass(this.wrap,"template_selected")}},editComment:function(e){if(val(this.input,e),this.input.autosize)return this.input.autosize.update();autosizeSetup("comment_input",{minHeight:32})},getFromLocal:function(e){var t=localStorage.comments_templates_storage;ge("get_local_comments");try{t=JSON.parse(t)}catch(e){}return t?t&&e?(each(t,(function(e,t){var _=function(e,t){var _=ge("comment_template_links");hasClass(_,"template_links")||addClass(_,"template_links"),cur.comment.links.innerHTML=e,cur.comment.templates=JSON.parse(t)};setTimeout((function(){var e=t[1];ajax.post("noSpam.php",{act:"save_comment_template",title:e.name,text:e.comment,hash:opts.comment_hash,template_id:0},{onDone:_})}),1e3*e)})),curBox().hide()):void showBox("noSpam.php",{act:"apply_comments_export"},{params:{width:430,dark:1,progress:"export_progress"}}):showFastBox({title:"ÐÐµÑÐµÐ½Ð¾Ñ ÑÐ°Ð±Ð»Ð¾Ð½Ð¾Ð²",dark:1},"Ð ÑÐ¾Ð¶Ð°Ð»ÐµÐ½Ð¸Ñ, Ð½Ðµ ÑÐ´Ð°Ð»Ð¾ÑÑ Ð½Ð°Ð¹ÑÐ¸ Ð½Ð¸ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð¼Ð¼ÐµÐ½ÑÐ°ÑÐ¸Ñ.")},deselectTemplate:function(){var e=this.selected,t=this.templates[e];if(t){var _=entityDecode(this.templates[e].text);t&&this.input.value==_&&val(this.input,""),this.label.innerHTML=this.label_html,removeClass(this.wrap,"template_selected"),delete this.selected}},editSort:function(){var e={act:this.acts.sort,hash:this.hash};showBox("noSpam.php",e,{params:{width:430,dark:1,progress:"sort_template"}})},saveSort:function(e,t,_,o,i){var a=cur[e],r={hash:t,act:a.acts.sort_save,tid:_.id.replace("template",""),tpos:_.dataset.pos,after_id:o&&o.dataset?o.dataset.pos:"",before_id:i&&i.dataset?i.dataset.pos:""};ajax.post("noSpam.php",r,{onDone:function(e,t){box=curBox(),box.content(e[2]),box.evalBox(t),box.setOptions({onHide:function(){debugLog(e),a.links.innerHTML=e[0],a.templates=JSON.parse(e[1])}})},progress:"sort_template"})}};var n=_("b8yN");function l(e){var t=ge("console_item_"+e);hasClass(t,"green_item")&&removeClass(t,"green_item"),addClass(t,"red_item")}function s(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_docmail_spamer",uid:e,hash:t,act_type:_,spam_date:o,to_id:i,to_msg_id:a},{onDone:function(t){ge("rollback_docmail_spamer"+e).innerHTML=t,l(e)}})}function c(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_docwall_spamer",uid:e,hash:t,act_type:_,spam_date:o,owner_id:i,msg_id:a},{onDone:function(t){ge("rollback_docwall_spamer"+e).innerHTML=t,l(e)}})}function d(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_jpgmail_spamer",uid:e,hash:t,act_type:_,spam_date:o,to_id:i,to_msg_id_id:a},{onDone:function(t){ge("rollback_jpgmail_spamer"+e).innerHTML=t,l(e)}})}function u(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_jpgwall_spamer",uid:e,hash:t,act_type:_,spam_date:o,owner_id:i,msg_id:a},{onDone:function(t){ge("rollback_jpgwall_spamer"+e).innerHTML=t,l(e)}})}function p(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_pngmail_spamer",uid:e,hash:t,act_type:_,spam_date:o,to_id:i,to_msg_id:a},{onDone:function(t){ge("rollback_pngmail_spamer"+e).innerHTML=t,l(e)}})}function b(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_pngwall_spamer",uid:e,hash:t,act_type:_,spam_date:o,owner_id:i,msg_id:a},{onDone:function(t){ge("rollback_pngwall_spamer"+e).innerHTML=t,l(e)}})}function E(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_doc_spamer",uid:e,hash:t,act_type:_,spam_date:o,owner_id:i,doc_id:a},{onDone:function(t){ge("rollback_doc_spamer"+e).innerHTML=t,l(e)}})}function O(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_photo_spamer",uid:e,hash:t,act_type:_,spam_date:o,owner_id:i,photo_id:a},{onDone:function(t){ge("rollback_photo_spamer"+e).innerHTML=t,l(e)}})}function m(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_photo_spamer_from_wall",uid:e,hash:t,act_type:_,spam_date:o,owner_id:i,msg_id:a},{onDone:function(t){ge("rollback_photo_spamer"+e).innerHTML=t,l(e)}})}function h(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_photo_spamer_from_mail",uid:e,hash:t,act_type:_,spam_date:o,to_id:i,to_msg_id:a},{onDone:function(t){ge("rollback_photo_spamer"+e).innerHTML=t,l(e)}})}function w(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_video_spamer",uid:e,hash:t,act_type:_,spam_date:o,owner_id:i,video_id:a},{onDone:function(t){ge("rollback_video_spamer"+e).innerHTML=t,l(e)}})}function v(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_video_spamer_from_wall",uid:e,hash:t,act_type:_,spam_date:o,owner_id:i,msg_id:a},{onDone:function(t){ge("rollback_video_spamer"+e).innerHTML=t,l(e)}})}function f(e,t,_,o,i,a){ajax.post("noSpam.php",{act:"rollback_video_spamer_from_mail",uid:e,hash:t,act_type:_,spam_date:o,to_id:i,to_msg_id:a},{onDone:function(t){ge("rollback_video_spamer"+e).innerHTML=t,l(e)}})}var g="_console_item_field_text";function P(e){return se("<textarea>"+e+"</textarea>").value}function M(e){var t=document,_=t.getElementById(e);if(t.body.createTextRange)(o=t.body.createTextRange()).moveToElementText(_),o.select();else if(window.getSelection){var o,i=window.getSelection();(o=t.createRange()).selectNodeContents(_),i.removeAllRanges(),i.addRange(o)}}function D(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function C(){var e="";return window.getSelection?e=window.getSelection():document.getSelection?e=document.getSelection():document.selection&&(e=document.selection.createRange().text),e}function T(e){var t=ge(e);return t.options[t.selectedIndex].value}function y(e,t,_,o){ajax.post("noSpam.php",{act:"a_block_domain",domain:e,type:t,hash:_,warn_users:isChecked("warn_users")||0,comment:ge("linksban_comment").value,link_ex:o},{onDone:function(_){ge("block_domain_1_"+e).innerHTML="",ge("block_domain_2_"+e).innerHTML="",ge("block_domain_3_"+e).innerHTML="",ge("block_domain_"+t+"_"+e).innerHTML=_}})}function j(e,t){ajax.post("noSpam.php",{act:"a_remove_fid_search",fid:e,hash:t},{onDone:function(t){ge("remove_fid_search_"+e).innerHTML=t}})}function I(e,t){ajax.post("noSpam.php",{act:"a_ban_fid_zero",fid:e,hash:t},{onDone:function(t){ge("ban_fid_zero_"+e).innerHTML=t}})}function L(e,t){ajax.post("noSpam.php",{act:"a_ban_fid_forever",fid:e,hash:t},{onDone:function(t){ge("ban_fid_forever_"+e).innerHTML=t}})}function A(){return window.nav&&window.nav.objLoc&&window.nav.objLoc.claim}function B(e){var t=domClosest(g,e);return!!t&&t.getAttribute("data-field")}},FgzW:function(e,t,_){"use strict";_.r(t);var o=_("MJEz"),i=_("oBWH"),a=_("qwyz"),r=_("9at3"),n=_("aG8I"),l=_("aong");window.Page=i.a,window.page=i.a,window.Wall=a.a,window.wall=a.a,window.WallUpload=r.a,window.Composer=n.a,window._postsSendTimer||(window._postsSendTimer=setTimeout(i.a.postsSend,1e4));try{stManager.done("page.js"),Object(o.c)().setInteractiveHandler("Page/owner_new_photo",e=>{try{var t=e.payload.dataAttrs.options,_=JSON.parse(t),o=_.ownerId;_.useNewForm?i.a.ownerAvatarUpload(o):i.a.ownerPhoto(o)}catch(e){Object(l.m)(getLang("global_error"))}}),Object(o.c)().setInteractiveHandler("Page/owner_edit_photo",e=>{try{var t=e.payload.dataAttrs.options,_=JSON.parse(t),o=_.ownerId,a=_.hash;_.useNewForm?i.a.ownerAvatarEdit(o,a):i.a.ownerCrop(o,a)}catch(e){Object(l.m)(getLang("global_error"))}}),Object(o.c)().setInteractiveHandler("Page/owner_set_exist_photo",e=>{try{var t=e.payload.dataAttrs.options,_=JSON.parse(t),o=_.photo;_.useNewForm?i.a.ownerAvatarSelect(o):showBox("al_page.php",{act:"owner_photo_edit",photo:o},{stat:["owner_photo.css",jsc("web/owner_photo.js"),"tagger.css",jsc("web/tagger.js")]})}catch(e){Object(l.m)(getLang("global_error"))}})}catch(e){}},H4Lr:function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="add_outline_28",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="add_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path d="M14 4a1 1 0 011 1v8h8a1 1 0 010 2h-8v8a1 1 0 01-2 0v-8H5a1 1 0 010-2h8V5a1 1 0 011-1z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 28 28",id:c,width:isNaN(e.width)?28:+e.width,height:isNaN(e.height)?28:+e.height}))};p.mountIcon=u,t.a=p},J3qk:function(e,t,_){"use strict";_.d(t,"a",(function(){return p})),_.d(t,"b",(function(){return E}));var o=_("q1tI"),i=_("Rafy"),a=_("fBgk"),r=_("ci+N"),n=_("k487"),l=function(){return(l=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e,t){var _=t.elementTooltipOpts,o=void 0===_?{}:_,i=t.helpHintConfig,a='<div style="text-align: center">'+i.content+"</div>";return Object(r.a)(e,l(l({},i),{content:a}),l({align:n.a.ALIGN_CENTER,cls:"feature_intro_tt feature_intro_blue_tt feature_intro_blue_tt--heightSmall",forceSide:"top",offset:[0,-8],type:n.a.TYPE_VERTICAL,width:250,withCloseButton:!1},o)).tooltip},c=_("1+Fu");var d=function(){return(d=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=void 0,p=function(e){if(e)if(Object(a.d)(e))!function(){var e=null==u?void 0:u.notifierKey;e&&function(e){if(window.Notifier){var t={key:e.key,queue:e.queue,ts:e.ts};return Object(c.c)(t)}console.log("reactions: unlock notifier is unavailable")}(e);u=void 0}();else if(e.initialUnlockedIds){var t=void 0;if(e.queueSettings){var _=function(e,t){var _=t.handleQueueEvent;if(window.Notifier){var o={key:e.key,queue:e.queue,ts:e.ts},i=void 0;Object(c.b)(o.queue);var a=Object(c.a)(o,_({stop:function(){null==i||i()}}),(function(){return new Promise((function(){}))}));return i=a.stop,{notifierKey:o}}console.log("reactions: unlock notifier is unavailable")}(e.queueSettings,{handleQueueEvent:b.bind(null,e)});t=null==_?void 0:_.notifierKey}u={lockedHintOptions:e.lockedHintOptions,notifierKey:t,revealHintOptions:e.revealHintOptions,unlockedItemsIds:e.initialUnlockedIds.filter(a.e)}}};function b(e,t){return function(e){var t=e.data;Object(i.b)()&&console.log("reactions: unlocked update",t);var _=t.unlocked_reactions.filter(a.e);u=d(d({},u),{unlockedItemsIds:_})}}var E=function(e){var t=Object(o.useRef)(null),_=Object(o.useRef)(),i=Object(o.useRef)(),a=Object(o.useState)(!1),r=a[0],n=a[1],l=Object(o.useState)(!1),c=l[0],p=l[1];Object(o.useEffect)((function(){var e,o,i;if((null==u?void 0:u.revealHintOptions)&&t.current)if(r){var a=s(t.current,{helpHintConfig:d(d({},u.revealHintOptions),{onHideRequestSent:function(){u&&(u.revealHintOptions=void 0)}})});a.show(),_.current=a,null===(e=t.current)||void 0===e||e.addEventListener("mouseenter",(function(){a.hide()}),{once:!0})}else null===(i=null===(o=_.current)||void 0===o?void 0:o.hide)||void 0===i||i.call(o)}),[r]),Object(o.useEffect)((function(){var e,_;if((null==u?void 0:u.lockedHintOptions)&&t.current){if(c){var o=s(t.current,{elementTooltipOpts:{noHideOnClick:!0},helpHintConfig:d(d({},u.lockedHintOptions),{isServerSideHideDisabled:!0})});o.show(),i.current=o;var a=window.setTimeout((function(){p(!1)}),3e3);return function(){window.clearTimeout(a)}}null===(_=null===(e=i.current)||void 0===e?void 0:e.hide)||void 0===_||_.call(e)}}),[c]),Object(o.useEffect)((function(){return function(){var e,t,o,a;null===(t=null===(e=i.current)||void 0===e?void 0:e.hide)||void 0===t||t.call(e),null===(a=null===(o=_.current)||void 0===o?void 0:o.hide)||void 0===a||a.call(o)}}),[]);var b=Object(o.useCallback)((function(){p(!0)}),[]);return Object(o.useMemo)((function(){if(!e)return{needUnmountOnHide:!1};var _=function(e){var t=null==u?void 0:u.unlockedItemsIds;if(t){var _=Object.create(null);return t.forEach((function(e){_[e]=!0})),d(d({},e),{items:e.items.map((function(e){var t=void 0===_[e.id];return d(d({},e),{isLocked:t})}))})}}(e);if(!_)return{needUnmountOnHide:!1};return{needUnmountOnHide:!0,menuSetWithUnlockedStates:_,onReactionChooseLocked:b,reactionsMenuRef:t,updateUnlockedTooltip:function(e){e&&n(e)}}}),[])}},Kl2g:function(e,t,_){"use strict";_.d(t,"a",(function(){return r})),_.d(t,"c",(function(){return s})),_.d(t,"b",(function(){return c}));var o=_("uQjJ"),i=_("qYuU"),a=function(){return(a=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update"},n=Object(i.a)("wall-data",(function(){return{emitter:new o.a,keyedListeners:Object.create(null)}})),l=function(e,t,_){var o,i,r=n(),l=null===(i=null===(o=r.keyedListeners)||void 0===o?void 0:o[e])||void 0===i?void 0:i[t];return l&&r.emitter.removeListener(e,l),function(e,t,_){var o,i=n();i.emitter.addListener(e,_),i.keyedListeners[e]=a(a({},i.keyedListeners[e]),((o={})[t]=_,o));return function(){var o,a;i.emitter.removeListener(e,_),(null===(o=i.keyedListeners[e])||void 0===o?void 0:o[t])===_&&(null===(a=i.keyedListeners[e])||void 0===a||delete a[t])}}(e,t,_)},s=function(e,t,_){return l(t,e,_)},c=function(e,t){n().emitter.emit(e,t)}},"LM/t":function(e,t,_){"use strict";_.d(t,"a",(function(){return a}));var o=_("HLtZ");var i=_("crIy"),a=function(e){var t,_=e.error,a=Object(i.a)();!function(e){var t=e.error,_=e.reportError;void 0!==_&&_&&Object(o.c)(t,{environment:"reactions"}),console.error(t)}({error:_,reportError:null!==(t=null==a?void 0:a.reportJsErrors)&&void 0!==t&&t})}},Mt6f:function(e,t,_){"use strict";var o=_("Kl2g");_.d(t,"a",(function(){return o.a})),_.d(t,"b",(function(){return o.c}))},PU8N:function(e,t,_){"use strict";_.d(t,"c",(function(){return i})),_.d(t,"a",(function(){return a})),_.d(t,"f",(function(){return r})),_.d(t,"g",(function(){return n})),_.d(t,"d",(function(){return l})),_.d(t,"e",(function(){return s})),_.d(t,"b",(function(){return c}));var o=function(){return(o=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(){return!!window.isMVK}function a(e,t,_,o,i){void 0===t&&(t=0),void 0===_&&(_=0);var a,r={r:0,g:0,b:0};o=o||e.canvas.width,i=i||e.canvas.height;try{a=e.getImageData(t,_,o,i)}catch(e){return r}for(var n=-4,l=0;(n+=20)<a.data.length;)++l,r.r+=a.data[n],r.g+=a.data[n+1],r.b+=a.data[n+2];return r.r=~~(r.r/l),r.g=~~(r.g/l),r.b=~~(r.b/l),r}function r(e){return new Promise((function(t,_){var o=new Image;o.crossOrigin=e.startsWith("data:")?null:"Anonymous",o.onerror=function(){return _(new Error("Failed to load image's URL: "+e))},o.onload=function(){return t(o)},o.src=e}))}var n=function(e){return new Promise((function(t){var _=e.map((function(e){return r(e)}));Promise.all(_).then((function(e){return t(e)})).catch((function(){}))}))};function l(e,t){var _,o,i,a,r,n,l,s,c={normal:"400",500:"500",600:"600",bold:"700"},d={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5e3,weight:"400",style:"normal"},u={display:"block","font-size":"48px","line-height":"normal","font-variant":"normal","white-space":"nowrap",position:"absolute",visibility:"hidden",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0"};function p(e){var t=[];return each(e,(function(e,_){t.push(e+":"+_)})),t.join(";")}function b(e,t,_){return Math.abs(e.width-t.offsetWidth)>_||Math.abs(e.height-t.offsetHeight)>_}function E(){a||(utilsNode.appendChild(r),a=!0,i={sansSerif:{width:l.offsetWidth,height:l.offsetHeight},serif:{width:n.offsetWidth,height:n.offsetHeight}},browser.opera&&!browser.chrome?(l.style.fontFamily='"'+e+'", sans-serif',n.style.fontFamily='"'+e+'", serif'):(setStyle(l,"font-family",'"'+e+'", sans-serif'),setStyle(n,"font-family",'"'+e+'", serif'))),a&&i&&(b(i.sansSerif,l,t.tolerance)||b(i.serif,n,t.tolerance))?(re(r),t.success()):(new Date).getTime()-o.getTime()>t.timeout?(re(r),t.error()):!a&&"requestAnimationFrame"in window?window.requestAnimationFrame(E):window.setTimeout(E,t.delay)}for(var O in d)t.hasOwnProperty(O)||(t[O]=d[O]);u["font-weight"]=t.weight,u["font-style"]=t.style,!t.glyphs&&"fonts"in document?(t.timeout&&(_=setTimeout((function(){t.error()}),t.timeout)),function(_){each(null===document||void 0===document?void 0:document.fonts,(function(o){o.family.toLowerCase()===e.toLowerCase()&&(c[o.weight]||o.weight)===""+t.weight&&o.style===t.style&&o.load().then((function(){t.success(),clearTimeout(_)}))}))}(_)):(s="AxmTYklsjo190QW"+t.glyphs,o=new Date,r=ce("div"),l=ce("div",{innerHTML:s}),n=ce("div",{innerHTML:s}),l.setAttribute("style",p(extend({"font-family":"sans-serif"},u))),n.setAttribute("style",p(extend({"font-family":"serif"},u))),r.appendChild(l),r.appendChild(n),E())}function s(e,t){return new Promise((function(_,i){l(e,o(o({},t),{glyphs:"îîîî",success:function(){var e=function(){_(),(null==t?void 0:t.success)&&t.success()};browser.safari?setTimeout(e,150):e()},error:function(){i(),(null==t?void 0:t.error)&&t.error()}}))}))}function c(e,t,_,o,i,a){return void 0===a&&(a=0),new Promise((function(n,l){("string"==typeof e?r(e):Promise.resolve(e)).then((function(e){var s=document.createElement("canvas");s.width=90===a||270===a?e.naturalHeight:e.naturalWidth,s.height=90===a||270===a?e.naturalWidth:e.naturalHeight;var c=s.getContext("2d");if(c){c.fillStyle="#fff",c.fillRect(0,0,c.canvas.width,c.canvas.height),a?(c.translate(s.width/2,s.height/2),c.rotate(a*Math.PI/180),c.drawImage(e,-e.naturalWidth/2,-e.naturalHeight/2)):c.drawImage(e,0,0);var d=c.getImageData(t,_,o,i),u=document.createElement("canvas");u.width=o,u.height=i;var p=u.getContext("2d");if(p)return p.putImageData(d,0,0),r(u.toDataURL("image/jpeg",1)).then(n).catch(l);n(e)}else n(e)})).catch(l)}))}},QpOW:function(e,t,_){"use strict";var o,i,a;_.d(t,"c",(function(){return o})),_.d(t,"b",(function(){return i})),_.d(t,"a",(function(){return a})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.UPLOAD=1]="UPLOAD",e[e.NOT_ALLOWED_EXTENSION=2]="NOT_ALLOWED_EXTENSION",e[e.IMAGE_TOO_SMALL=3]="IMAGE_TOO_SMALL",e[e.IMAGE_TOO_BIG=4]="IMAGE_TOO_BIG",e[e.BAD_ASPECT_RATIO=5]="BAD_ASPECT_RATIO"}(o||(o={})),function(e){e.UPLOADED="uploaded",e.EXISTED="existed"}(i||(i={})),function(e){e[e.UPLOAD=1]="UPLOAD",e[e.SELECT=2]="SELECT",e[e.EDIT=3]="EDIT"}(a||(a={}))},QxcO:function(e,t,_){"use strict";_.d(t,"a",(function(){return d})),_.d(t,"b",(function(){return u})),_.d(t,"c",(function(){return E}));var o=_("W9Tc"),i=_("zxIV"),a=_("pruO"),r=_("crIy"),n=_("fBgk"),l=_("xc/8"),s=function(e,t){var _,a=null===(_=function(e){try{var t=JSON.parse(e);if(null!==t&&"object"!=typeof t)return;return t}catch(e){return}}(e))||void 0===_?void 0:_.set_id,l="string"==typeof a?a:void 0;if(Object(o.b)("reactions_enabled")&&t&&l){var s=Object(r.b)(l);if(s)return{likeClassName:"like_btn--hidden PostBottomAction--hidden",template:Object(i.qb)(t,{reactions_button_title:Object(n.b)(s)||"",reactions_set_id:l})}}},c=function(e,t){return t.length>e},d=function(e,t){var _,o=null===(_=null==t?void 0:t.wallTpl)||void 0===_?void 0:_.post_likes_reactions,i=c(14,e)?e[14]:void 0;if("string"==typeof i)return s(i,o)},u=function(e,t){var _,i=null===(_=null==t?void 0:t.wallTpl)||void 0===_?void 0:_.reply_likes_reactions;if(Object(o.b)("reactions_enabled_post_replies")){var a=c(14,e)?e[14]:void 0;if("string"==typeof a)return s(a,i)}},p=function(e){var t=JSON.parse(e);if(null===t||"object"==typeof t||Array.isArray(t)){var _;if(Array.isArray(t))t=Object(l.b)((_=t,Object.assign(Object.create(null),_)));return t}},b=function(e){if(Object(o.b)("reactions_enabled")){var t=c(5,e)?e[5]:void 0;if("string"==typeof t){var _=function(e){var t=e.indexOf(";"),_=e.substr(0,t),o=e.substr(t+1);if("1"===_)return p(o)}(t);if(_)return{counts:_}}}},E=function(e){var t,_=b(e);return(t={})[a.a]=null==_?void 0:_.counts,t}},Rafy:function(e,t,_){"use strict";_.d(t,"a",(function(){return i}));var o=_("sMoB");_.d(t,"b",(function(){return o.a}));var i=!1},TkSl:function(e,t,_){"use strict";function o(){return{icon:'<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M5 5a9.87 9.87 0 017-2.9A9.87 9.87 0 0119 5a9.87 9.87 0 012.9 7 9.87 9.87 0 01-2.9 7 9.87 9.87 0 01-7 2.9A9.87 9.87 0 015 19a9.87 9.87 0 01-2.9-7A9.87 9.87 0 015 5zm7-1.1A8.08 8.08 0 003.9 12a8.08 8.08 0 008.1 8.1 8.08 8.08 0 008.1-8.1A8.08 8.08 0 0012 3.9z"/><path d="M7.83 7.83A5.88 5.88 0 0117.9 12a5.88 5.88 0 01-10.07 4.17 5.88 5.88 0 010-8.34zM12 7.9A4.1 4.1 0 007.9 12a4.1 4.1 0 004.1 4.1 4.1 4.1 0 002.9-1.2 4.1 4.1 0 000-5.8A4.08 4.08 0 0012 7.9z"/><path d="M13.34 10.66a1.9 1.9 0 00-2.68 0 1.9 1.9 0 000 2.68 1.9 1.9 0 002.68 0 1.9 1.9 0 000-2.68z"/></g></svg>',name:"live_outline_24"}}_.d(t,"a",(function(){return o}))},ToGb:function(e,t,_){"use strict";_.d(t,"a",(function(){return w}));var o=_("zxIV"),i=_("ha24"),a=_("Rafy"),r=_("p4k+"),n=_("WQ5g"),l=function(e,t){var _,o;return null!==(o=null!==(_=function(e){var t;if("string"==typeof e)return null!==(t=document.querySelector("#post"+e))&&void 0!==t?t:void 0}(e))&&void 0!==_?_:null==t?void 0:t.closest("._post, .wl_post"))&&void 0!==o?o:void 0},s=_("Mt6f"),c=_("ZD4m"),d=function(e){var t=!1;return function(){for(var _=[],o=0;o<arguments.length;o++)_[o]=arguments[o];if(!t)return t=!0,e.apply(this,_)}};function u(e,t){var _=(void 0===t?{}:t).scrollByImpl,o=void 0===_?window.scrollBy:_,i=e;return{start:d((function(e){e&&(i=e);var t=Object(c.c)(i);return d((function(e){if(e&&(i=e),i.isConnected){var _=Object(c.c)(i);o(0,_.top-t.top)}}))}))}}var p=_("dJem"),b=function(e,t,_){var i;void 0===_&&(_=null===(i=window.cur)||void 0===i?void 0:i.wallTpl);var a=null==_?void 0:_[e];if(a)return function(e){return e.replace(/%[-\w]+%/g,"")}(Object(o.qb)(a,t));console.warn("renderTemplate: missing template '"+e+"'",_)},E=function(e){for(var t=e.isUserAction,_=void 0!==t&&t,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];_?console.error.apply(console,o):Object(a.b)()&&console.warn.apply(console,o)},O=function(e,t,_){var i,a,r=_.isActionStatusBarVisible,s=_.isReactionsPreviewVisible,c=_.positionTrackingEnd,d=function(e,t){var _,i,a=Object(n.c)(e);if(a){var r=l(t,a),s=null==r?void 0:r.querySelector('[data-section-ref="post-action-status-bar"]');if(s)return{actionStatusBar:s};var c=Object(p.a)()?null===(_=window.wkcur)||void 0===_?void 0:_.wallTpl:null===(i=window.cur)||void 0===i?void 0:i.wallTpl,d=Object(o.rb)(b("post_action_status_bar",{class:"PostActionStatusBar--hidden"},c));if(d)return Object(o.z)(d,a),{actionStatusBar:d}}}(e,t.postFullId);if(d){var u=d.actionStatusBar;if(u.classList.toggle("PostActionStatusBar--hidden",!r),r&&!Object(n.e)(e)){var O=Object(p.a)()?null===(i=window.wkcur)||void 0===i?void 0:i.wallTpl:null===(a=window.cur)||void 0===a?void 0:a.wallTpl;u.prepend(Object(o.rb)(b("post_reactions_preview",{class:s?"":"ReactionsPreview--empty",object_raw:e},O)))}if(c){var m=Object(n.b)(e);null==c||c(m)}}else E({},"Unable to init ActionStatusBar in post",t)},m=function(e){var t=Object(i.d)(e.postFullId),_=l(e.postFullId,Object(n.c)(t));_||E(e,"Missing post element for reactions preview update",{payload:e,likeWrap:Object(n.c)(t)});var o=Object(n.b)(t);if(!!e.isQueueUpdate&&o&&function(e){var t=Object(r.a)(e);if(!t)return!1;var _=t+1e4;return Date.now()<_}(o))Object(a.b)()&&console.log("Ignoring reactions update from queue",e);else{var s;e.isPrimaryLikeButtonClick&&!e.isFromWkLayer&&o&&(s=u(o).start());var c=Object(r.d)(e.counts),d=c;null==_||_.classList.toggle("post--withActionStatusBar",d),O(t,e,{isActionStatusBarVisible:d,isReactionsPreviewVisible:c,positionTrackingEnd:s}),c&&Object(r.g)(t,{counts:e.counts}),Object(r.f)(t,{counts:e.counts})}},h=function(e){if(!a.a)return!1;var t=Object(i.e)(e.replyFullId);Object(r.g)(t,{counts:e.counts}),Object(r.f)(t,{counts:e.counts})},w=function(){var e=[Object(s.b)("wall-post-action-status-bar",s.a.post_reactions_counts_update,m),Object(s.b)("wall-reply-reactions-counts",s.a.reply_reactions_counts_update,h)];return{onDestroy:function(){e.forEach((function(e){e()})),e=[]}}}},UCWv:function(e,t,_){"use strict";_.d(t,"k",(function(){return o})),_.d(t,"d",(function(){return i})),_.d(t,"l",(function(){return a})),_.d(t,"b",(function(){return r})),_.d(t,"h",(function(){return n})),_.d(t,"e",(function(){return l})),_.d(t,"c",(function(){return s})),_.d(t,"f",(function(){return c})),_.d(t,"g",(function(){return d})),_.d(t,"a",(function(){return u})),_.d(t,"j",(function(){return p})),_.d(t,"i",(function(){return b}));var o="stories_manage",i=200,a={hashtag:1,mention:2,question:3,place:4,music:5,storyReply:6,owner:7,link:8,marketItem:9,post:10,poll:11,sticker:12,app:13,situationalTheme:14},r=[{code:"f09f9882",name:"face_with_tears_of_happiness"},{code:"f09f988d",name:"smiling_face_with_heart_eyes"},{code:"f09f918df09f8fbf",name:"thumbs_up"},{code:"f09f98ad",name:"loud_crying_face"},{code:"f09f98b1",name:"face_screaming_in_fear"},{code:"e298ba",name:"smiling_face"}],n={PUBLIC:0,AUTHOR_ONLY:1,ANONYMOUS:3},l=50,s=10,c=100,d=23,u="NarrativeBox__draggable",p=34,b=400},W28y:function(e,t,_){"use strict";_.d(t,"e",(function(){return o})),_.d(t,"d",(function(){return i})),_.d(t,"f",(function(){return a})),_.d(t,"b",(function(){return r})),_.d(t,"a",(function(){return n})),_.d(t,"c",(function(){return l})),_.d(t,"i",(function(){return s})),_.d(t,"u",(function(){return c})),_.d(t,"l",(function(){return d})),_.d(t,"g",(function(){return u})),_.d(t,"r",(function(){return p})),_.d(t,"k",(function(){return b})),_.d(t,"h",(function(){return E})),_.d(t,"j",(function(){return O})),_.d(t,"t",(function(){return m})),_.d(t,"s",(function(){return h})),_.d(t,"n",(function(){return w})),_.d(t,"m",(function(){return v})),_.d(t,"o",(function(){return f})),_.d(t,"q",(function(){return g})),_.d(t,"p",(function(){return P}));var o=86400,i=1e3,a="_blank",r="mousedown",n="keydown",l="scroll";function s(){return nav.strLoc}function c(e){var t={0:nav.objLoc[0],act:nav.objLoc.act};nav.setLoc(extend(t,e))}function d(e){return nav.objLoc[e]}function u(){return d("act")}function p(e){window.open(e,"_blank").focus()}function b(){return m(Date.now())}function E(){return O((new Date).getTime())}function O(e){var t=new Date(e),_=new Date(e);return t.setHours(0,0,0,0),_.setHours(23,59,59,999),[t.getTime(),_.getTime()]}function m(e){return Math.floor(e/i)}function h(){var e=new MessageBox;e.setOptions({title:!1,hideButtons:!0}).show(),hide(boxLayerBG),hide(e.bodyNode),show(boxLoader),boxRefreshCoords(boxLoader)}function w(){curBox&&curBox()&&curBox().hide()}function v(){curBox().hide()}function f(e,t,_){window.radioBtns[e]={val:_,els:Array.prototype.slice.apply(geByClass("radiobtn",geByClass1(t)))}}function g(e){return e.ctrlKey||e.metaKey&&browser.mac}function P(e){return/^-?(0|[1-9]\d*)$/.test(e)}},WQ5g:function(e,t,_){"use strict";_.d(t,"b",(function(){return o})),_.d(t,"a",(function(){return i})),_.d(t,"c",(function(){return a})),_.d(t,"d",(function(){return r})),_.d(t,"e",(function(){return n}));var o=function(e){var t;return null!==(t=document.querySelector('[data-section-ref="reactions-button"][data-reaction-target-object="'+e+'"]'))&&void 0!==t?t:void 0},i=function(e){var t;return null!==(t=e.closest('[data-section-ref="reactions-button-container"]'))&&void 0!==t?t:void 0},a=function(e){var t,_=o(e);if(_)return null!==(t=_.closest(".like_wrap"))&&void 0!==t?t:void 0},r=function(e){var t,_;return null!==(_=null===(t=e.closest('[data-section-ref="reactions-button-container"]'))||void 0===t?void 0:t.querySelector('[data-section-ref="reactions-menu-mount"]'))&&void 0!==_?_:null},n=function(e){return document.querySelector('[data-section-ref="reactions-preview-items"][data-reaction-target-object="'+e+'"]')}},XRX7:function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="help_outline_16",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="help_outline_16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 8a5.5 5.5 0 1011 0 5.5 5.5 0 00-11 0zM8 1a7 7 0 100 14A7 7 0 008 1z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M8 5.15a.85.85 0 00-.823.637.75.75 0 01-1.453-.374A2.35 2.35 0 0110.35 6c0 1.036-.566 1.578-.963 1.948-.39.363-.586.55-.645.958a.75.75 0 01-1.484-.212c.134-.942.685-1.453 1.05-1.79l.055-.052c.353-.33.487-.488.487-.852A.85.85 0 008 5.15z" fill="currentColor" /><path d="M8.75 11.15a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 16 16",id:c,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};p.mountIcon=u,t.a=p},YIAi:function(e,t,_){"use strict";_.d(t,"a",(function(){return o}));var o={PUBLIC:0,ONLY_FRIENDS:1,ONLY_BEST_FRIENDS:2}},aG8I:function(e,t,_){"use strict";_("KKXr"),_("Oyvg"),_("pIFo"),_("SRfc");var o=_("zxIV"),i=_("t7n3"),a=_("Egk5"),r=_("/PiP"),n=_("7jxN"),l=_("lXE5"),s={init:function(e,t){if(!(e=ge(e)))return null;var _=Object(o.l)(e,"composer");if(_)return _;_={input:e,inited:!1,options:t},Object(o.l)(e,"composer",_),_.wddWrap=Object(o.g)("div",{className:"composer_wdd clear_fix "+(t.wddClass||""),id:e.id+"_composer_wdd",innerHTML:'<input type="hidden" id="'+e.id+'_composer_wdd_term"/>'},{width:t.width||Object(o.S)(e)[0]}),t.appendTo&&Object(i.v)(t.appendTo)?t.appendTo(_.wddWrap):Object(o.z)(_.wddWrap,e.nextSibling),_.wddInput=_.wddWrap.firstChild,_.wdd=WideDropdown.initSelect(_.wddWrap,extend({text:_.wddInput,input:e,noResult:t.lang.noResult||"",introText:t.lang.introText||"",toup:t.toup,wddOpts:t.wddOpts,searchKeys:t.searchKeys,width:"auto",onItemSelect:s.onItemSelect.bind(s).pbind(_)},t.wddOpts||{url:"hints.php",params:{act:"a_json_friends",from:"composer"}})),e.dd=_.wddWrap.id,s.initEvents(_),t.media&&(_.addMedia=new MediaSelector(t.media.lnk,t.media.preview,t.media.types,t.media.options,t.media.gearEl,t.media.actionsEl)),Object(o.vb)(_.wddWrap,"width",""),_.inited=!0,s.updateAutoComplete(_),_.edit=t.edit,_.isReply=t.isReply,s.updateArticleConvertSuggest(_);var a=cur.onMediaChanged;return cur.onMediaChanged=function(){s.updateArticleConvertSuggest(_),a&&a()},_},initEvents:function(e){addEvent(e.input,"keyup keydown keypress",s.onKeyEvent.pbind(e)),addEvent(e.input,"click mousedown mouseup focus blur paste",s.onMouseEvent.pbind(e))},destroy:function(e){WideDropdown.deinit(e.wddWrap),Object(o.i)(e.input,e.wddWrap),Object(o.kb)(e.wddWrap),e.inited=!1,e.addMedia&&e.addMedia.destroy(),Object(o.l)(e.input,"composer",null),Object(o.kb)(e.articleConvertEl),e.articleConvertEl=!1},onKeyEvent:function(e,t){var _=!t.shiftKey&&inArray(t.keyCode,[KEY.UP,KEY.DOWN,KEY.RETURN]),r=e.wdd&&_;if("keypress"==t.type||"keydown"==t.type){if(t.keyCode==KEY.RETURN||10==t.keyCode){if(e.select&&e.select.isVisible())return Object(a.k)(document,t.type,t),Object(a.c)(t);if(t.ctrlKey&&Object(i.v)(e.options.onSubmit))return!0}if(t.keyCode==KEY.TAB){var n=e.input,l=window.Emoji?Emoji.editableVal(n):"",c=s.getCursorPosition(n),d=(l.substr(0,c)+String.fromCodePoint(1)+l.substr(c)).match(/^[\s\S]*(@|\*)[\S]+\s*\([\s\S]*?\001[\s\S]*?\)\s*/);if(d){var u=d[0].length-1;return Object(o.H)(e.input,u,u),Object(a.c)(t)}}var p=0;for(var b in e.wdd.shown)p+=1;if(r&&Object(o.fb)(e.wdd.listWrap)&&p)return t.type==(browser.opera&&!browser.chrome?"keypress":"keydown")&&WideDropdown._textEvent(t),Object(a.c)(t)}if("keyup"==t.type&&!r){if(65==t.keyCode&&t.ctrlKey)return;e.wdd&&inArray(t.keyCode,[KEY.SPACE,KEY.HOME,190,191,78,55,49])&&s.hideSelectList(e)}"keyup"!=t.type||r&&t.keyCode!=KEY.RETURN||s.updateAutoComplete(e,t),s.updateArticleConvertSuggest(e)},isArticleConvertSuggestAvailable:function(e){if(e.edit||e.isReply)return!1;var t=!!cur.wallAddMedia&&cur.wallAddMedia.types,_=!1;if(t)for(var o=0;o<t.length;o++)if("article"==t[o][0]){_=!0;break}if(!_||!Object(r.o)())return!1;var i=!0;return each(cur.wallAddMedia.getMedias()||[],(function(e,t){if(!inArray(t[0],["photo","video","postpone","mark_as_ads"]))return i=!1,!1})),!!i&&!!(cur.options.articleConvertThreshold>0&&e.curValue.length>=cur.options.articleConvertThreshold)},updateArticleConvertSuggest:function(e){if(s.isArticleConvertSuggestAvailable(e)){if(!e.articleConvertEl){var t=gpeByClass("post_field_wrap",e.input),_=geByClass1("post_actions_btns",t);e.articleConvertEl=Object(o.rb)('<button class="article_post_convert round_button">'+getLang("profile_convert_to_article_short")+"</button>"),_?(t!==domPN(_)&&Wall.sendInsertBeforeError(),t.insertBefore(e.articleConvertEl,_)):t.appendChild(e.articleConvertEl),removeEvent(e.articleConvertEl),addEvent(e.articleConvertEl,"click",(function(){cur.postComposer=e;var t=[];each(cur.wallAddMedia.getMedias()||[],(function(e,_){inArray(_[0],["photo","video"])&&t.push(_[0]+"_"+_[1])})),Object(r.s)(cur.oid,0,{text:e.curValue,medias:t})}))}Object(o.xb)(e.articleConvertEl)}else Object(o.kb)(e.articleConvertEl),delete e.articleConvertEl},onMouseEvent:function(e,t){"blur"!=t.type?("focus"!=t.type&&"click"!=t.type||s.updateAutoComplete(e,t),"paste"==t.type&&setTimeout(s.updateAutoComplete.pbind(e,t),0)):s.hideSelectList(e)},updateAutoComplete:function(e,t){var _=e.input,o=(e.options&&e.options.getValue||window.Emoji&&Emoji.editableVal||val)(_),i=Math.max(o.lastIndexOf("@"),o.lastIndexOf("*")),a=!1;if(i>-1){var r=s.getCursorPosition(_),n=o.substr(0,r),l=n.match(/(^|[\s.,:\'\"Â«Â»;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);i=Math.max(n.lastIndexOf("@"),n.lastIndexOf("*")),l&&"."!==l[2].substr(-1)&&(a=l[2])}!1===a&&delete e.ignoredTerm,void 0!==e.ignoredTerm&&a==e.ignoredTerm&&(a=!1),e.curValue=o,e.curTerm=a,e.curPos=i,val(e.wddInput,a),s.toggleSelectList(e),!t||"keyup"!=t.type&&"paste"!=t.type||(e.options.onValueChange&&e.options.onValueChange(o,"keyup"!=t.type),e.addMedia&&e.addMedia.checkMessageURLs(o,"keyup"!=t.type),e.options.checkLen&&e.options.checkLen(o))},toggleSelectList:function(e){var t=e.curTerm;!1===t?s.hideSelectList(e):s.showSelectList(e,t)},hideSelectList:function(e){e.wddInput.focused=!1,WideDropdown._hideList(e.wdd);var t=e.options||{};t.onHide&&t.onHide()},showSelectList:function(e,t){function _(_){e.wddInput.focused=!0,WideDropdown.items(e.wdd.id,_||[]),WideDropdown._updateList(e.wdd,!1,t);var o=e.options||{};o.onShow&&o.onShow()}"function"==typeof cur.wallMentions&&(cur.wallMentions=cur.wallMentions()),cur.wallMentions&&"function"==typeof cur.wallMentions.then?cur.wallMentions.then((function(e){_(e)})):_(cur.wallMentions)},onItemSelect:function(e,t){if(!t)return!1;var _=t[2].replace("@",""),a=t[8]||t[1],r=e.curValue.substr(0,e.curPos),n=e.curValue.substr(e.curPos),l=!!r.match(/\#[\w_\.\u0400-\u04FF]+$/i);document.activeElement.classList.contains("_im_text")&&(/^(?:id|club)\d{1,}$/.test(_)||(l=!0));var c=e.options.poster,d=window.Emoji&&void 0!==e.input.emojiId||c;d||c?n=Object(i.c)(n):a=Object(i.F)(a),cur.selNum=(cur.selNum||0)+1;var u=new RegExp("^(@|\\*)"+Object(i.h)(e.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");return n=n.replace(u,(function(e,t,o){var i=t+_+" ";return l?i+=d||c?'<span id="tmp_sel_'+cur.selNum+'"></span>':"":(i+=(d||c?'<span id="tmp_sel_'+cur.selNum+'">':"")+"(",i+=a.replace(/[\(\)\]\[]/g,""),i+=")"+(d||c?"</span>":"")+" "),i})),l||!r||r.match(/[\.\(\)\?\!\s\n\r\'\"Â«Â» \u00A0]$/)||(n=" "+n),s.hideSelectList(e),d||c?(Emoji.val(e.input,Object(i.c)(r)+n),Emoji.focus(e.input),Emoji.editableFocus(e.input,ge("tmp_sel_"+cur.selNum),!0),c&&c.checkText()):(val(e.input,r+n),Object(o.H)(e.input)),Object(i.v)(e.options.onItemSelect)&&e.options.onItemSelect(t),!1},getCursorPosition:function(e){if(void 0!==e.selectionStart)return e.selectionStart;if(void 0!==window.getSelection){var t=window.getSelection();if(!t||!t.rangeCount)return 0;var _=t.getRangeAt(0),i=_.cloneRange(),a=Object(o.g)("div");return i.selectNodeContents(e),i.setEnd(_.startContainer,_.startOffset),a.appendChild(i.cloneContents()),(window.Emoji?Emoji.editableVal:val)(a).replace(/\n$/,"").length}return 0},getSendParams:function(e,t,_){var a=e.addMedia||{},r=a.chosenMedia||{},s=a&&a.getMedias?a.getMedias():[],c=a.shareData||{},d=e&&e.options.media&&e.options.media.options.limit||0,u=e.input,p=cur.posterWpe&&cur.posterWpeSendParams?cur.posterWpeSendParams.text:Object(i.I)(window.Emoji?Emoji.editableVal(u):val(u)),b={message:p},E=0,O=hasClass(gpeByClass("post",u),"suggest");isArray(r)&&r.length&&s.push(clone(r)),Object(o.vb)(bodyNode,{cursor:"default"});var m=ge("wpe_cont"),h=geByClass1("wpe_error",m);function w(e){h||(h=Object(o.rb)('<div class="wpe_error error"><div>'),m.insertBefore(h,Object(o.x)(m))),h.innerHTML=e.length>60?'<div class="msg_text">'+e+"</div>":e,Object(o.fb)(h)||(Object(n.l)(h,100),Object(l.g)(Object(o.V)(h)[1]-15),Object(n.b)(ge("box_layer_wrap"),{scrollTop:0}))}if(h&&hide(h),s.length&&each(s,(function(e,o){var r;if(isArray(o)&&o.length){var n=this[0],l=this[1];if(E>=d&&"postpone"!=n)return!1;switch(n){case"poll":var u=a.pollData(_);if(!u)return b.delayed=!0,!1;Object(i.r)(l)&&(b.poll_id=Object(i.r)(l)),l=u.question,delete u.question,b=extend(b,u);break;case"copyright":var m=a.copyrightData();if(m)return void(b=extend(b,m));break;case"share":if(c.failed||!c.title&&(!c.images||!c.images.length)&&!c.photo_url&&!c.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(b.delayed=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&c.button_text&&c.button_action){var h;s.length>1&&(h=getLang("global_share_too_many_attachments")),b.message.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(h=getLang("global_share_too_many_newlines")),b.message.length>(cur.options.share||{}).button_exclusive_max_message_len&&(h=getLang("global_share_too_long_message"));var v=Object(i.j)(" "+b.message+" "),f=Object(i.j)(" "+c.url+" ")[0];if(f&&v.length){"/"===f.query&&(f.query=""),"www."===f.domain.substr(0,4)&&(f.domain=f.domain.substr(4));for(var g=0;g<v.length;++g){var P=v[g];if("/"===P.query&&(P.query=""),"www."===P.domain.substr(0,4)&&(P.domain=P.domain.substr(4)),f.domain!=P.domain||f.query!=P.query){h=getLang("global_share_too_many_links");break}}}if(h)return w(h),b.delayed=!0,!1}if(!c.title)return w(getLang("global_share_title_required")),b.delayed=!0,!1;if(!c.url)return w(getLang("global_share_url_required")),b.delayed=!0,!1;if(c.url=new URL(c.url).href,c.video?(l=c.video_owner_id+"_"+c.video_id,b.snippet_video=1):l=c.prometheus?c.media:c.user_id&&c.photo_id&&!c.noPhoto?c.user_id+"_"+c.photo_id:"",c.share_upload_failed&&!l)return c.share_upload_failed=0,b.delayed=!0,!1;if(c.images&&c.images.length&&!isArray(c.images[cur.shareShowImg])&&!_&&!l&&!c.noPhoto&&!c.video)return a.uploadShare(t),b.delayed=!0,!1;if((cur.options.share||{}).require_image&&!l)return w(getLang("global_share_image_required")),b.delayed=!0,!1;c.initialPattern&&Object(i.I)(p)==c.initialPattern&&(b.message=""),c.is_vk_mini_app&&(b.is_vk_mini_app=!0,b.is_photo_edit=c.isPhotoEdit,b.image_offset=cur.shareShowImg),extend(b,{url:c.url,module:cur.module,mode:c.mode,title:Object(i.F)(c.title),description:Object(i.F)(c.description),button_text:Object(i.F)(c.button_text),button_action:c.button_action,extra:c.extra,extra_data:c.extraData,photo_url:c.video?"":Object(i.F)(c.photo_url),placeholder_inserted:c.placeholder_inserted,open_graph_data:(c.openGraph||{}).data,open_graph_hash:(c.openGraph||{}).hash});break;case"page":c.initialPattern&&Object(i.I)(p)==c.initialPattern&&(b.message="");break;case"postpone":return b.postpone=val("postpone_date"+a.lnkId),void(cur.postponedLastDate=b.postpone);case"donut_duration":return;case"mark_as_ads":return void(b.mark_as_ads=1);case"pretty_cards":if(!a.prettyCardGallery)return;if(a.prettyCardGallery.needSendData())return a.prettyCardGallery.saveCards(t,(function(e){w(e)})),b.delayed=!0,!1;l=a.prettyCardGallery.getSendData().attachVal;break;case"donut_link":b["attach"+(E+1)+"_owner_id"]=null===(r=this[5])||void 0===r?void 0:r.owner_id}this[3]&&Object(i.I)(p)==this[3]&&(b.message=""),O&&this[4]&&(l+="_"+this[4]),b["attach"+(E+1)+"_type"]=n,b["attach"+(E+1)]=l,E++}})),!a.multi&&(b.postpone||(a.postponeDate&&a.postponeIsTooltip||a.postponePreview)&&(b.postpone=val("postpone_date"+a.lnkId),cur.postponedLastDate=b.postpone),!b.copyright&&a.copyrightData)){var v=a.copyrightData();v&&(b=extend(b,v))}return a.multi||b.mark_as_ads||!a.markAsAds||(b.mark_as_ads=1),b},reset:function(e){var t=e.input,_=val(t),i=e.addMedia,a={value:_};return window.Emoji?Emoji.val(t,""):t.innerHTML="",i&&(a.urlsCancelled=clone(i.urlsCancelled),i.unchooseMedia(),i.urlsCancelled=[]),Object(o.kb)(e.articleConvertEl),a},restore:function(e,t){var _=e.input,o=s.reset(e);return val(_,t.value||""),o}};t.a=s},aqR2:function(e,t,_){"use strict";_.d(t,"a",(function(){return q})),_.d(t,"b",(function(){return z}));var o=_("q1tI"),i=_.n(o),a=_("i8i4"),r=_.n(a),n=_("dV62");function l(e){var t,_=window.getSelection();if(_&&_.focusNode){var o,i,a,r,n,l=Array.prototype.slice.call(e.childNodes),s=null===(t=_.anchorNode)||void 0===t?void 0:t.parentNode,c=l.indexOf(s),d=_.focusOffset,u=0,p=0;if("Range"===_.type&&(o=_.getRangeAt(0),i=l.indexOf(o.startContainer.parentNode),a=l.indexOf(o.endContainer.parentNode),r=o.startOffset,n=o.endOffset,d=r,c=i),c){for(var b=0;b<c;b++)u+=l[b].textContent.length;u+=d}else 0===c&&(u=d);if(a&&a>=0){for(var E=a;E<l.length;E++)E===a?p=l[a].textContent.length-n:p+=l[E].textContent.length;p=e.innerText.length-p}else 0===a&&(p=n);return{startIndex:c,offset:d,textStart:u,textEnd:p,type:_.type,rangeStartIndex:i,rangeEndIndex:a,rangeStartOffset:r,rangeEndOffset:n}}}function s(e,t){if(void 0!==e.startIndex&&-1!==e.startIndex){var _=window.getSelection(),o=e,i=document.createRange();t&&(i.setStart(t.childNodes[o.startIndex].firstChild,o.offset),_.removeAllRanges(),_.addRange(i))}}var c;!function(e){e.newState="newState",e.addToCurrent="addToCurrent"}(c||(c={}));var d,u=function(){function e(e){this.statesQueue=[{text:e,selection:null}],this.currentStateIndex=0,this.lastTimeStateAdded=0}return e.prototype.saveState=function(e,t){var _=(new Date).getTime();this.currentStateIndex!==this.statesQueue.length-1&&this.clearStatesAfterCurrent(),_-this.lastTimeStateAdded>3e3||t===c.newState?(30===this.statesQueue.length&&this.statesQueue.shift(),this.statesQueue.push(e),this.indexIncrement(),this.lastTimeStateAdded=_):this.statesQueue[this.statesQueue.length-1]=e},e.prototype.getPreviousState=function(){return this.indexDecrement(),this.statesQueue[this.currentStateIndex]},e.prototype.getNextState=function(){return this.indexIncrement(),this.statesQueue[this.currentStateIndex]},e.prototype.clearStatesAfterCurrent=function(){this.statesQueue=this.statesQueue.slice(0,this.currentStateIndex+1),this.currentStateIndex=this.statesQueue.length-1,this.lastTimeStateAdded=0},e.prototype.indexIncrement=function(){this.currentStateIndex=this.currentStateIndex<this.statesQueue.length-1?this.currentStateIndex+1:this.statesQueue.length-1},e.prototype.indexDecrement=function(){this.currentStateIndex=this.currentStateIndex>0?this.currentStateIndex-1:0},e}(),p=(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function _(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(_.prototype=t.prototype,new _)}),b=["Enter","Tab","ArrowRight","ArrowDown","ArrowUp"],E=function(e){function t(t){return e.call(this,t)||this}return p(t,e),t.prototype.handleChange=function(e){var t,_=this.props;switch(e.type){case"keydown":if(_.suggestActive&&b.includes(e.key)){switch(e.preventDefault(),e.key){case"Enter":case"Tab":case"ArrowRight":_.onHotkeyInput(k.suggestEnter);break;case"ArrowDown":_.onHotkeyInput(k.suggestSelectDown);break;case"ArrowUp":_.onHotkeyInput(k.suggestSelectUp)}return}if(~["'","!","("].indexOf(e.key)&&!(null===(t=null===window||void 0===window?void 0:window.getSelection())||void 0===t?void 0:t.isCollapsed))return e.preventDefault(),void _.wrapSelecion(e.key);if((e.ctrlKey||e.metaKey)&&90===e.which){e.preventDefault();var o=e.shiftKey?k.redo:k.undo;return void _.onHotkeyInput(o)}if("Enter"===e.key)return e.preventDefault(),void _.onTextInput(W.insert,"\n");e.key.length<2&&!(e.ctrlKey||e.metaKey||e.altKey)&&(e.preventDefault(),_.onTextInput(W.insert,e.key));break;case"keyup":"Backspace"!==e.key&&"Delete"!==e.key||_.onTextInput(W.sync);break;case"paste":var i=e;i.preventDefault();var a=i.clipboardData;a&&_.onTextInput(W.insert,a.getData("Text"));break;case"cut":e.preventDefault(),document.execCommand("copy"),_.onTextInput(W.insert,"")}},t.prototype.handleSelect=function(e){var t=l(e.target),_=0;t&&"Range"==t.type&&(_=t.textEnd-t.textStart),this.props.updateSelectionLength(_)},t.prototype.shouldComponentUpdate=function(e){return this.props.currentText!==e.currentText},t.prototype.componentDidUpdate=function(){var e=this.props,t=r.a.findDOMNode(this);if(function(e,t,_){if(e>=t||-1===e){if(0===t)return;var o=_.childNodes.length-1;s({offset:_.childNodes[o].textContent.length,startIndex:o},_)}else{for(var i,a,r=0,n=0;n<_.childNodes.length;n++)if((r+=_.childNodes[n].textContent.length)>=e){i=n,a=e-(r-_.childNodes[n].textContent.length);break}s({offset:a,startIndex:i},_)}}(e.caretPosition,e.currentText.length,t),e.updateMode===W.history)return null;var _=l(t),o=e.updateMode===W.insert||e.updateMode===W.sync?c.addToCurrent:c.newState;e.updateHistory(_,o)},t.prototype.render=function(){var e=this.props,t={width:380,height:"auto",minHeight:75,borderRadius:"2px 2px 0 0"};return e.useMonospace&&(t=Object.assign({},t,{fontFamily:K,lineHeight:"140%",fontSize:"11px"})),i.a.createElement("div",{className:"Input",contentEditable:"true",suppressContentEditableWarning:!0,spellCheck:!1,style:t,onKeyDown:this.handleChange.bind(this),onKeyUp:this.handleChange.bind(this),onPaste:this.handleChange.bind(this),onCut:this.handleChange.bind(this),onSelect:this.handleSelect.bind(this),dangerouslySetInnerHTML:{__html:e.lexedHTML},placeholder:"ÐÐ¾Ð¿Ð¾Ð»Ð½Ð¸ÑÐµÐ»ÑÐ½ÑÐµ ÑÑÐ»Ð¾Ð²Ð¸Ñ"})},t}(i.a.Component),O=_("oj6k"),m=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),h="ClearRestoreInputButton",w=function(e){function t(t){return e.call(this,t)||this}return m(t,e),t.prototype.handleClick=function(){this.props.handleClearRestore()},t.prototype.render=function(){var e=this.props.clearRestoreStatus?h+" "+h+"--active":h;return i.a.createElement("span",{className:e,onClick:this.handleClick.bind(this)},i.a.createElement(O.a,null))},t}(i.a.Component),v=_("wiul"),f=_("5soy"),g=_("XRX7"),P=_("s0Wt"),M=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),D=function(e){function t(t){return e.call(this,t)||this}return M(t,e),t.prototype.render=function(){var e=this.props,t=e.charCountLimitReached?"Controls__charCount Controls__charCount--reachedLimit":"Controls__charCount";return i.a.createElement("div",{className:"Controls"},i.a.createElement("span",{className:"Controls__conditionsOnly",onClick:e.conditionsOnly.bind(this)},i.a.createElement(P.default,{text:"Ð¢Ð¾Ð»ÑÐºÐ¾ Ð´Ð¾Ð¿. ÑÑÐ»Ð¾Ð²Ð¸Ñ",delay:1e3},i.a.createElement(v.a,null))),i.a.createElement("span",{className:"Controls__removeSpaces",onClick:e.removeSpaces.bind(this)},i.a.createElement(P.default,{text:"Ð£Ð±ÑÐ°ÑÑ Ð¿ÑÐ¾Ð±ÐµÐ»Ñ",delay:1e3},i.a.createElement(f.a,null))),i.a.createElement("span",{className:"Controls__mergeBlocks",onClick:e.mergeBlocks.bind(this)},i.a.createElement(P.default,{text:"ÐÐ±ÑÐµÐ´Ð¸Ð½Ð¸ÑÑ Ð±Ð»Ð¾ÐºÐ¸",delay:1e3},i.a.createElement("span",null,"IN"))),i.a.createElement("span",null),i.a.createElement("span",{className:t},e.charCount,i.a.createElement(C,{length:e.selectionLength})),i.a.createElement("span",{className:"Controls__helpButton",onClick:e.helpPopup.bind(this)},i.a.createElement(P.default,{text:"Ð¨Ð¿Ð°ÑÐ³Ð°Ð»ÐºÐ°",delay:1e3},i.a.createElement(g.a,null))),i.a.createElement(w,{handleClearRestore:e.handleClearRestore,clearRestoreStatus:e.clearRestoreStatus}))},t}(i.a.Component);function C(e){return 0===e.length?null:i.a.createElement("span",null," (",e.length,")")}var T=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),y=function(e){function t(t){return e.call(this,t)||this}return T(t,e),t.prototype.handleSelect=function(){var e=this.props;e.selectSuggestion(e.fieldName)},t.prototype.render=function(){var e=this.props,t="Suggestion";return e.isSelected&&(t+=" Suggestion--selected"),i.a.createElement("div",{className:t,key:e.fieldName,onClick:this.handleSelect.bind(this)},e.fieldName)},t}(i.a.Component),j=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),I=function(e){function t(t){return e.call(this,t)||this}return j(t,e),t.prototype.renderSuggestions=function(){var e=this,t=this.props,_=t.suggestVariantSelected;return t.suggestVariants.map((function(o){var a=_===o;return i.a.createElement(y,{selectSuggestion:t.selectSuggestion.bind(e),isSelected:a,fieldName:o,key:o})}))},t.prototype.componentDidUpdate=function(){var e,t,_=r.a.findDOMNode(this),o=null===(t=null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e?void 0:e.focusNode)||void 0===t?void 0:t.parentElement;if(_&&o){var i=o.getBoundingClientRect();_.style.top=Number(o.offsetTop+i.bottom-i.top)+"px",_.style.left=Number(o.offsetLeft-5)+"px"}},t.prototype.render=function(){var e=this.props;if(0===e.suggestVariants.length)return null;var t={};return e.useMonospace&&(t={fontFamily:K,fontSize:"11px"}),i.a.createElement("div",{className:"SuggestBox",style:t},this.renderSuggestions())},t}(i.a.Component);_("rGqo"),_("Btvt"),_("SRfc"),_("pIFo");function L(e){for(var t="",_=0;_<e.length;_++)switch(e[_].type){case"space":t+='<span class="Input__space">'+e[_].text+"</span>";break;case"field":t+='<span class="Input__field">'+e[_].text+"</span>";break;case"text_start":t+='<span class="Input__textStart">'+e[_].text+"</span>";break;case"text":t+='<span class="Input__text">'+e[_].text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span>";break;case"text_end":t+='<span class="Input__textEnd">'+e[_].text+"</span>";break;case"operator":t+='<span class="Input__operator">'+e[_].text+"</span>";break;case"comma":t+='<span class="Input__comma">'+e[_].text+"</span>";break;case"function":t+='<span class="Input__function">'+e[_].text+"</span>";break;case"number":t+='<span class="Input__number">'+e[_].text+"</span>";break;case"block_start":t+='<span class="Input__blockStart">'+e[_].text+"</span>";break;case"block_end":t+='<span class="Input__blockEnd">'+e[_].text+"</span>";break;default:t+='<span class="Input__genericText">'+e[_].text+"</span>"}return t}function A(e,t,_){for(var o=function(e){for(var t=[],_=[],o=[],i=null,a=0,r=0;r<e.length;r++){switch(e[r]){case" ":case"\n":i="space";break;case"@":i="function";break;case"(":i="block_start";break;case")":i="block_end";break;case"&":case"|":case"!":case"~":case"+":case"-":case"*":case"/":case"%":case"<":case">":case"=":case"^":i="operator";break;case",":i="comma";break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case".":i="number";break;case"'":switch(_[a]){case"text":case"text_start":i="text_end";break;default:i="text_start"}break;default:i="field"}r?"text"!==_[a]&&"text_start"!==_[a]||"text_end"===i?"function"===_[a]&&"field"===i?(_[a]="function",t[a]+=e[r]):_[a]!==i||"block_start"===_[a]||"block_end"===_[a]?(t[++a]=e[r],_[a]=i):t[a]+=e[r]:(_[a]="text",t[a]+=e[r]):(t[a]=e[r],_[a]=i)}for(var n=0;n<t.length;n++)o[n]={text:t[n],type:_[n]};return o}(e),i=0;i<o.length;i++)switch(o[i].type){case"field":t.fields[_]&&(t.common_fields.hasOwnProperty(o[i].text)||t.fields[_].hasOwnProperty(o[i].text))||(o[i].type="generic_text"),"IN"===o[i].text&&(i>0&&"space"===o[i-1].type?(o.splice(i,1),o[i-1].text=" IN",o[i-1].type="operator",i++):o[i].type="operator");break;case"text_end":o[i].type="text",o[i].text=o[i-1].text+"'",o.splice(i-1,1);break;case"function":for(var a=o[i].text,r=[],n=void 0,l=0;a.length>0;){if(/(@.+?)\b/.test(a)){n=a.match(/(@.+?)\b/)[0];for(var s=0;s<t.functions.length;s++)~n.indexOf(t.functions[s])&&(a=a.slice(t.functions[s].length),r.push({text:t.functions[s],type:"function"}))}r.length>l?l++:(t.common_fields.hasOwnProperty(a)||t.fields[_].hasOwnProperty(a)?r.push({text:a,type:"field"}):r.push({text:a,type:"generic_text"}),a="")}r.length>0&&o.splice.apply(o,[i,1].concat(r));break;case"operator":var c=void 0;~["&&!","&&-","&&~","||!","||-","||~"].indexOf(o[i].text)&&(c=o[i].text,o[i].text=o[i].text.slice(0,2),o.splice(i+1,0,{text:c.slice(-1),type:"operator"}))}return o}_("Vd3H");function B(e){return function(e){var t,_,o,i,a,r,n,l=[],s=!1;function c(e){this.pos=e.pos,this.field=e.field,this.operation=e.operation,this.value=e.value,this.isIN=e.isIN||!1,this.fieldIsExp=e.fieldIsExp||!1}for(var d=0;d<e.length;d++)if("single"===e[d].type&&"unknown"!==e[d].expType)switch(e[d].expType){case"equals":case"equalsNot":(t=[])[0]=R(e[d].expRightSide),o=R(e[d].expLeftSide),e[d].expLeftSide.length>1&&(s=!0),l.push(new c({pos:d,field:o,operation:e[d].expType,value:t,isIN:!1,fieldIsExp:s}));break;case"inList":if(r=e[d].expLeftSide,n=e[d].expRightSide,a=[],_=[],"!"===r[0].text&&")"===n[n.length-1].text&&")"===n[n.length-2].text?(i="equalsNot",a=n,r.length>1&&"("===r[2].text&&")"===r[r.length-1].text?(s=!0,o=R(r).slice(3).slice(0,-1)):o=R(r).slice(2)):(i="equals",a=n,r.length>1&&"("===r[0].text&&")"===r[r.length-1].text?(s=!0,o=R(r).slice(1).slice(0,-1)):o=R(r)),a.length>0){for(var u=0;u<a.length;u++)switch(a[u].type){case"operator":u<a.length-1&&"-"===a[u].text&&"number"===a[u+1].type&&(_.push("-"+a[u+1].text),u++);break;case"number":_.push(a[u].text)}l.push(new c({pos:d,field:o,operation:i,value:_,isIN:!0,fieldIsExp:s}))}}function p(e,t,_){this.field=e,this.operation=t,this.blocks=[],this.blocks.push(_)}for(var b=[],E=0;E<l.length;E++)e:if(0===b.length)b.push(new p(l[E].field,l[E].operation,l[E]));else{for(var O=0;O<b.length;O++)if(b[O].field===l[E].field){b[O].blocks.push(l[E]);break e}b.push(new p(l[E].field,l[E].operation,l[E]))}for(var m=[],h=0;h<b.length;h++)b[h].blocks.length>1&&function(){for(var t={equals:new c({pos:null,field:b[h].blocks[0].field,operation:"equals",value:[],isIN:!0,fieldIsExp:b[h].blocks[0].fieldIsExp}),equalsNot:new c({pos:null,field:b[h].blocks[0].field,operation:"equalsNot",value:[],isIN:!0,fieldIsExp:b[h].blocks[0].fieldIsExp})},_=0;_<b[h].blocks.length;_++){var o=t[b[h].blocks[_].operation];if(null===o.pos&&(o.pos=b[h].blocks[_].pos),0===o.value.length)o.value=b[h].blocks[_].value;else for(var i=0;i<b[h].blocks[_].value.length;i++)o.value.includes(b[h].blocks[_].value[i])||o.value.push(b[h].blocks[_].value[i]),m.includes(b[h].blocks[_].pos)||m.push(b[h].blocks[_].pos)}t.equals.value=t.equals.value.filter((function(e,_){return t.equals.value.indexOf(e)===_})),t.equalsNot.value=t.equalsNot.value.filter((function(e,_){return t.equalsNot.value.indexOf(e)===_}));var a=[],r=[];if(null!==t.equals.pos&&null!==t.equalsNot.pos){for(var n=0;n<t.equalsNot.value.length;n++){var l=t.equals.value.indexOf(t.equalsNot.value[n]);~l&&(a.push(l),r.push(n))}a.sort((function(e,t){return t-e})),r.sort((function(e,t){return t-e}));for(var s=0;s<a.length;s++)t.equals.value.splice(a[s],1);for(var d=0;d<r.length;d++)t.equalsNot.value.splice(r[d],1)}var u=e[t.equals.pos],p=e[t.equalsNot.pos];null!==t.equals.pos&&(t.equals.value.length>1?(t.equals.fieldIsExp&&(t.equals.field="("+t.equals.field+")"),u.text=t.equals.field+" IN ("+t.equals.value.join(", ")+") "):1===t.equals.value.length?u.text=t.equals.field+" = "+t.equals.value[0]:0===t.equals.value.length&&(m.includes(t.equals.pos)||m.push(t.equals.pos)),0!==t.equals.pos&&(u.text=" "+u.logicOp+" "+u.text)),null!==t.equalsNot.pos&&(t.equalsNot.value.length>1?(t.equalsNot.fieldIsExp&&(t.equalsNot.field="("+t.equalsNot.field+")"),p.text="!("+t.equalsNot.field+" IN ("+t.equalsNot.value.join(", ")+")) "):1===t.equalsNot.value.length?p.text=t.equalsNot.field+" != "+t.equalsNot.value[0]:0===t.equalsNot.value.length&&(m.includes(t.equalsNot.pos)||m.push(t.equalsNot.pos)),0!==t.equalsNot.pos&&(p.text=" "+p.logicOp+" "+p.text))}();m.sort((function(e,t){return t-e}));for(var w=0;w<m.length;w++)e.splice(m[w],1);for(var v="",f=0;f<e.length;f++)v+=e[f].text;v.startsWith(" && ")&&(v=v.slice(4));return v}(function(e){if(!e)return;function t(e,t,_){this.type=e,this.logicOp=t,this.content=_,this.text="",this.level=0}var _=[],o=0,i=0;_[o]=new t("single","&&",[]);for(var a=0;a<e.length;a++)switch(!0){case"space"===e[a].type:_[o].text+=e[a].text;break;case"block_start"===e[a].type:_[o].hasOpenBrace=!0,i+=e[a].text.length,_[o].content.push(e[a]),_[o].text+=e[a].text;break;case"block_end"===e[a].type:_[o].hasClosedBrace=!0,i-=e[a].text.length,_[o].content.push(e[a]),_[o].text+=e[a].text;break;case("&&"===e[a].text||"||"===e[a].text)&&0===i:o++,_[o]=new t("single",e[a].text,[]),_[o].text+=e[a].text;break;case("&&"===e[a].text||"||"===e[a].text)&&i>0:_[o].content.push(e[a]),_[o].type="compound",_[o].text+=e[a].text;break;default:_[o].content.push(e[a]),_[o].text+=e[a].text}for(var r=0;r<_.length;r++)if("single"===_[r].type)for(var n=0;n<_[r].content.length;n++){switch(_[r].content[n].text){case"=":case"==":_[r].expType="equals";break;case"!=":case"&lt;&gt;":_[r].expType="equalsNot";break;case" IN":_[r].expType="inList"}if(~["equals","equalsNot","inList"].indexOf(_[r].expType)){_[r].expOperator=_[r].content[n].text,_[r].expLeftSide=_[r].content.slice(0,n),_[r].expRightSide=_[r].content.slice(n+1);break}}return _}(e))}function R(e){for(var t="",_=0;_<e.length;_++)t+=e[_].text;return t}var W,k,U=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),K='Roboto Mono, Monaco, "Andale Mono", "Lucida Console", "Courier New", Courier, monospace';!function(e){e.refresh="refresh",e.append="append",e.insert="insert",e.suggested="suggested",e.history="history",e.clear="clear",e.restore="restore",e.sync="sync"}(W||(W={})),function(e){e.suggestEnter="suggestEnter",e.suggestSelectUp="suggestSelectUp",e.suggestSelectDown="suggestSelectDown",e.undo="undo",e.redo="redo"}(k||(k={}));var x=function(e){function t(t){var _=e.call(this,t)||this,o=A(t.initialText,t.syntaxDictionary,t.initialSection);return _.state={currentText:t.isTextStored?"":t.initialText,storedText:t.isTextStored?t.initialText:"",currentSection:t.initialSection,updateMode:W.refresh,lexedArray:o,lexedHTML:L(o),reachedLengthLimit:!1,caretPosition:0,selectionLength:0,suggestNodeIndex:0,suggestActive:!1,suggestVariants:[],suggestVariantSelected:""},_.history=new u(_.state.currentText),_}return U(t,e),t.prototype.getPlainText=function(){return this.state.currentText},t.prototype.handleHotkeys=function(e){var t=this.state;switch(e){case k.suggestEnter:this.handleEnterSuggestion(t.suggestVariantSelected);break;case k.suggestSelectUp:case k.suggestSelectDown:var _=t.suggestVariants.indexOf(t.suggestVariantSelected),o=_-1<0?t.suggestVariants.length-1:_-1,i=_+1===t.suggestVariants.length?0:_+1,a=e===k.suggestSelectUp?o:i;this.setState({suggestVariantSelected:t.suggestVariants[a]});break;case k.undo:case k.redo:var r=e===k.undo?this.history.getPreviousState():this.history.getNextState();if(!r)return;this.update(W.history,r.text,r.selection)}},t.prototype.createSuggestions=function(e){var t=[],_="",o=e.text;if("generic_text"===e.type){var i=o.startsWith("@")?"functions":"fields";t=function(e,t,_){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[],a=[];"functions"===t?a=_[t]:"fields"===t&&_[t][o]&&(a=Object.keys(_[t][o]).concat(Object.keys(_.common_fields)));for(var r=0;r<e.length;r++){for(var n=0;n<a.length;n++)e.slice(0,r+1)===a[n].slice(0,r+1)&&i.push(a[n]);a=i.slice(0),i=[]}return a}(o,i,this.props.syntaxDictionary,this.state.currentSection)}return 0!==t.length&&(_=t[0]),{variants:t,variantSelected:_}},t.prototype.handleEnterSuggestion=function(e){this.update(W.suggested,e)},t.prototype.update=function(e,t,_){void 0===t&&(t="");var o=this.state,i=this.props,a=this.getInputElement(),r=(null==(_=_||l(a))?void 0:_.textStart)||0,n="",s="",c=o.currentText.slice(0,r),d=o.currentText.slice(r);if(_&&"Range"===_.type){var u=function(e,t,_){for(var o=0,i=e.rangeEndIndex-e.rangeStartIndex,a="",r="",n=0,l=0;l<i;l++)o+=t.childNodes[e.rangeStartIndex+l].textContent.length;o+=e.rangeEndOffset-e.rangeStartOffset;for(var s=0;s<e.rangeStartIndex;s++)n+=t.childNodes[s].textContent.length;n+=e.rangeStartOffset;for(var c=0;c<n;c++)a+=_[c];for(var d=n+o;d<_.length;d++)r+=_[d];return{textStart:n,textBefore:a,textAfter:r}}(_,a,o.currentText);r=u.textStart,c=u.textBefore,d=u.textAfter}switch(e){case W.history:case W.refresh:n=t;break;case W.insert:r+=t.length,n=c+t+d;break;case W.append:r=-1;var p=t;i.mainTextFields.hasOwnProperty(o.currentSection)&&i.mainTextFields[o.currentSection]&&(p=t.replace(new RegExp("message","g"),i.mainTextFields[o.currentSection])),n=0!==o.currentText.length?o.currentText+" && "+p:p;break;case W.suggested:var b=a.children[o.suggestNodeIndex].innerHTML.length;if(!b)break;r=o.caretPosition-b+t.length,n=o.currentText.slice(0,o.caretPosition-b)+t+o.currentText.slice(o.caretPosition);break;case W.clear:n="",s=o.currentText;break;case W.restore:n=o.storedText,s="",r=-1;break;case W.sync:n=a.innerText}var E=A(n=n.replace(/^\n$/,""),i.syntaxDictionary,o.currentSection),O=L(E),m=function(e,t){for(var _=0,o=0;o<e.length;o++)if((_+=e[o].text.length)>=t)return o;return 0}(E,r),h=null,w=[],v="";E[m]&&r>0&&(w=(h=this.createSuggestions(E[m])).variants,v=h.variantSelected),this.setState({currentText:n,caretPosition:r,lexedArray:E,lexedHTML:O,suggestNodeIndex:m,suggestVariants:w,suggestVariantSelected:v,updateMode:e,storedText:s})},t.prototype.handleClearRestore=function(){var e=this.state;0===e.storedText.length?0!==e.currentText.length&&this.update(W.clear):this.update(W.restore)},t.prototype.updateHistory=function(e,t){this.history.saveState({text:this.state.currentText,selection:e},t)},t.prototype.callHelpPopup=function(){var e=this.props.partIndex?Number(this.props.partIndex):"";this.props.helpFunction(e)},t.prototype.setSection=function(e){this.setState({currentSection:e})},t.prototype.getEditorState=function(){return this.state},t.prototype.setEditorState=function(e){this.setState(e)},t.prototype.setSelectionLength=function(e){this.setState({selectionLength:e})},t.prototype.showConditionOnly=function(){this.props.conditionsOnlyFunction(this.props.partIndex)},t.prototype.removeSpacesFromText=function(){var e="";this.state.lexedArray.forEach((function(t){"space"!==t.type&&(e+=t.text)})),this.update(W.refresh,e)},t.prototype.mergeSameFieldBlocks=function(){var e=B(this.state.lexedArray);this.getInputElement().blur(),this.update(W.refresh,e)},t.prototype.wrapSelection=function(e){var t="",_="",o=this.state.currentText;switch(e){case"'":t=e,_=e;break;case"!":t="!(",_=")";break;case"(":t="(",_=")"}var i=l(this.getInputElement());if(i){var a=o.slice(0,i.textStart)+t+o.slice(i.textStart,i.textEnd)+_+o.slice(i.textEnd);this.update(W.refresh,a)}},t.prototype.getInputElement=function(){var e=r.a.findDOMNode(this);return null==e?void 0:e.querySelector(".Input")},t.prototype.render=function(){var e=this.state,t=this.props;return i.a.createElement("div",{className:"ConditionsEditor"},i.a.createElement(E,{currentText:e.currentText,caretPosition:e.caretPosition,onTextInput:this.update.bind(this),onHotkeyInput:this.handleHotkeys.bind(this),suggestActive:0!==e.suggestVariants.length,lexedHTML:e.lexedHTML,updateHistory:this.updateHistory.bind(this),updateMode:e.updateMode,updateSelectionLength:this.setSelectionLength.bind(this),wrapSelecion:this.wrapSelection.bind(this),useMonospace:t.useMonospace,"data-placeholder":"ÐÐ¾Ð¿Ð¾Ð»Ð½Ð¸ÑÐµÐ»ÑÐ½ÑÐµ ÑÑÐ»Ð¾Ð²Ð¸Ñ"}),i.a.createElement(I,{selectSuggestion:this.handleEnterSuggestion.bind(this),suggestVariants:e.suggestVariants,suggestVariantSelected:e.suggestVariantSelected,useMonospace:t.useMonospace}),i.a.createElement(D,{handleClearRestore:this.handleClearRestore.bind(this),clearRestoreStatus:0!==e.storedText.length,charCount:e.currentText.length,selectionLength:e.selectionLength,charCountLimitReached:e.currentText.length>2250,helpPopup:this.callHelpPopup.bind(this),conditionsOnly:this.showConditionOnly.bind(this),removeSpaces:this.removeSpacesFromText.bind(this),mergeBlocks:this.mergeSameFieldBlocks.bind(this)}))},t}(i.a.Component),S=_("W9Tc"),N=_("4Ch9"),H=_("nAFc"),F=_("awNS");function q(e,t){if(z()){var _=JSON.parse(e),i=JSON.parse(t);["","2"].forEach(e=>{var t="ConditionsEditor"+e,r="uiSpamtype"+e;Object(n.b)(t,e=>{a.render(o.createElement(x,{initialText:Object(H.a)(e.currentText),isTextStored:e.isTextStored,partIndex:e.partIndex,syntaxDictionary:_,mainTextFields:i,initialSection:cur[r].val(),ref:e=>window[t]=e,helpFunction:window.noSpamConsole.getConditionsHint,conditionsOnlyFunction:N.c,useMonospace:Object(F.d)("conditions_monospace")}),document.getElementById(n.d+t))})})}}function z(){return Object(S.b)("nospam_use_new_conditions_editor")}},awNS:function(e,t,_){"use strict";_.d(t,"b",(function(){return o})),_.d(t,"f",(function(){return i})),_.d(t,"g",(function(){return a})),_.d(t,"h",(function(){return r})),_.d(t,"k",(function(){return b})),_.d(t,"j",(function(){return E})),_.d(t,"i",(function(){return O})),_.d(t,"c",(function(){return m})),_.d(t,"a",(function(){return h})),_.d(t,"d",(function(){return v})),_.d(t,"e",(function(){return P}));var o,i,a,r,n,l=_("4Ch9"),s=_("b8yN"),c=_("uRA3"),d=_("W28y"),u=_("ofcU"),p=_("aqR2"),b="reports",E="pattern";function O(e,t){var _=geByClass1("_nospam_tab_switch_"+e);uiTabs.switchTab(domFC(_)),t&&(_=domChildren(_));var o=geByClass("nospam_tab"),i=domData(_,"tab-id");return o.forEach((function(e){domData(e,"id")!=i?hide(e):show(e)})),Object(d.u)({tab:e}),"patterns"===e?c.b.initUpdate():e===b?s.e.initUpdate():e===E&&scrollToTop(),!1}function m(){return Object(d.l)("tab")}function h(){var e=domPN(geByClass1("ui_tab_sel"));return domData(e,"tab-id")}function w(e){geByClass("_nospam_option_action",n).forEach(t=>{var _=domData(t,"option"),o=+e[_],i=window.cur.lang["nospam_options_"+_];i&&(t.innerHTML=i[o]),domData(t,"option-state",o)}),cur.options.custom_options=e}function v(e){var t=window.cur;return!!t.options.custom_options&&t.options.custom_options[e]}function f(e,t,_){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i={width:185,height:500,multiselect:!1};return Object(p.b)()&&e.includes("spamtype")&&extend(i,{onChange:e=>{window["ConditionsEditor"+o].setSection(e)}}),new Dropdown(document.getElementById(e),t,extend(i,{selectedItems:_}))}function g(e){extend(cur,{uiSpamtype:f("spamtype",e.spamtypes,cur.options.spamtype),uiSpamtype2:f("spamtype2",e.spamtypes,cur.options.spamtype2,2),uiSimplify:f("simplify_select",e.simplifies,cur.options.simplify),uiBan:f("ban_select",e.bans,cur.options.ban),uiDuration:f("duration_select",e.durations,cur.options.duration),uiSearchPeriod:f("search_period_select",e.searchperiods,cur.options.searchperiod)}),placeholderSetup("comment_input"),val("comment_input")&&autosizeSetup("comment_input",{minHeight:30}),geByClass("conditions_input").forEach((function(e){placeholderSetup("comment_input"),val(e)&&autosizeSetup("comment_input",{minHeight:30})}));var t=ge("page_body");i=geByClass1("pattern_wrap",t),o=geByClass1("console_wrap",t),r=geByClass1("reports_tabs",t),a=geByClass1("_reports_list",t),n=geByClass1("_nospam_options",t);var _=geByClass1("nospam_patterns_wrap",t),d=Object(u.a)({handlers:(e,t)=>{t(_,"click","_abort_pattern_mild",e=>Object(c.a)(domData(e.target,"id"))),t(n,"click","_nospam_option_action",e=>{return t=e.target,_={act:"a_set_custom_option",name:domData(t,"option"),state:1^domData(t,"option-state")},void ajax.post("noSpam.php",_,{onDone:w,showProgress:lockActionsMenuItem.pbind(t),hideProgress:unlockActionsMenuItem.pbind(t)});var t,_})}});cur.destroy.push(()=>{Object(u.c)(d)}),Object(l.j)(),Object(s.d)()}function P(e){var t=Object(u.b)(g);t.callMutations;(0,t.bindMutations)(e)}},b8yN:function(e,t,_){"use strict";_.d(t,"a",(function(){return w})),_.d(t,"b",(function(){return v})),_.d(t,"g",(function(){return f})),_.d(t,"c",(function(){return y})),_.d(t,"h",(function(){return I})),_.d(t,"f",(function(){return R})),_.d(t,"d",(function(){return W})),_.d(t,"e",(function(){return k}));_("HEwt"),_("a1Th"),_("rE2o"),_("ioFf"),_("Vd3H"),_("KKXr"),_("rGqo"),_("Btvt");var o,i=_("1BRX"),a=_("4Ch9"),r=_("awNS");function n(){o=(new Date).getTime()}function l(){var e=(new Date).getTime(),t=(e-o)/1e3,_=Array.prototype.slice.call(arguments);_.push(t),debugLog.apply(null,_)}var s=_("W28y"),c=_("ofcU");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var _=[],o=!0,i=!1,a=void 0;try{for(var r,n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(_.push(r.value),!t||_.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return _}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var _=Object.prototype.toString.call(e).slice(8,-1);"Object"===_&&e.constructor&&(_=e.constructor.name);if("Map"===_||"Set"===_)return Array.from(_);if("Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var _=0,o=new Array(t);_<t;_++)o[_]=e[_];return o}var p=["botscore","hacked_score","secondary_score"],b={},E={},O=new Date,m=setTimeout(null),h=0;function w(){var e=geByClass1("active_filter",r.h);return domData(e,"type")}function v(){var e=geByClass1("_reports_subtabs",r.h),t=geByClass1("active_filter",e);return domData(t,"subtype")}function f(e,t){n();var _=geByClass1("_report_btn_update",r.g);if(!isButtonLocked(_)){var o=geByClass1("_reports_"+e+"_wrap",r.g);if(o){var i={act:"a_get_reports",encode_entities:1,type:e,sub_type:t,shift:cur.options.shift};"mail"===e&&"mail_group"===t&&(i=extend(i,function(){if("mail"===e||"mail_group"===t){var _=geByClass1("filters");return{hide_groups_with_disabled_messages:isChecked(geByClass1("hide_groups_with_disabled_messages_filter",_)),shift:isObject(cur.hoursShiftSlider)?23*cur.hoursShiftSlider._currValue:0,min_reporters_amount:val(geByClass1("min_reports_amount_filter",_)),sorting:radioval("group_messages_reports_sorting")}}console.log("Unsupported filters used")}())),ajax.post("noSpam.php",i,{onDone:function(t){if(l("actions fetch"),b={},0!==t.length){for(var _=0;_<t.length;_++){var i=t[_];i.ui_type=e;var a=g(i.ui_type,_);A(i.ua_hash,i.agent_name),delete i.agent_name,delete i.remix_seed,i.index=_,b[a]=i}o.innerHTML="",P(e,0),t=""}else o.innerHTML=getTemplate("nospam_reports_type_search_empty")},onFail:function(e){l("actions fetched fail"),topError(e),o.innerHTML=getTemplate("nospam_reports_type_search_error")},showProgress:lockButton.pbind(_),hideProgress:unlockButton.pbind(_)}),scrollToTop()}else topError("Can't find wrap for type: "+e)}}function g(e,t){return"report_"+e+"_"+t}function P(e,t,_){n(),_||(_=20);for(var o=geByClass1("_reports_"+e+"_wrap",r.g),i=domPN(o),a=geByClass1("_reports_type_show_more",i),s=0,c=0,u=0;s<_;){c=u,u++;var p=g(e,c),E=b[p];if(!(c<t)){if("object"!=typeof E){debugLog("empty reports after "+c,"need to shift "+t);break}if(E.uid&&!0!==E.showed){var O=ce("div",{id:"report_"+e+"_"+c});if(addClass(O,"clear_fix"),addClass(O,"report"),E.mem_banned||E.uid_base_info){if(Object(r.d)("hide_banned"))continue;addClass(O,"banned")}E.ui_type=e;[C(E),d(D(E),1)[0],T(E,c)].forEach((function(e){O.appendChild(e)})),o.appendChild(O),s++}}}if(0!==s){a?isVisible(a)||show(a):(a=ce("div",{className:"reports_type_show_more _reports_type_show_more"}),i.appendChild(a));var m=parseInt(t)+20;a.innerHTML=getTemplate("nospam_reports_show_more",{need_shift:m}),l("actions to html")}else hide(a)}function M(){var e=getSelectionText();e?cur.uiSimplify.selectItem("0"):(e="/",cur.uiSimplify.selectItem("32")),val("pattern_input",e)}function D(e){var t,_="",o=e.type_name,i=parseInt(e.type),a=ce("div");addClass(a,"report_body report_body_regular"),e.api_id>0&&(setStyle(a,"color","#bbbbbb"),_+=e.api_id>0?'<div class="report_api">ÐÑÐ¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ ('+e.api_id+"):</div>":""),e.message&&(_+=getTemplate("nospam_reports_field",{class:"report_message",value:e.message})),e.kludges&&(_+=getTemplate("nospam_reports_field",{class:"reports_kludges",value:e.kludges})),e.attaches&&(_+=getTemplate("nospam_reports_attaches",{attaches:e.attaches}));var r="";switch(i){case 500:case 510:case 545:t="<a href='/wall"+e.owner_id+"_"+e.msg_id+"' target='_blank'> "+o+"</a>";break;case 501:case 550:t="<a href='/wall"+e.owner_id+"_"+e.parent_id+"?reply="+e.msg_id+"' target='_blank'> "+o+"</a>",e.group_id&&e.group_link&&(_+=getTemplate("nospam_reports_group_id",{group_id:e.group_id,group_link:e.group_link}));break;case 100:e.score&&e.score.hasOwnProperty("phone_cheat")&&(r+=getTemplate("nospam_reports_score_block",{label:"phone_cheat",score:e.score.phone_cheat})),e.update_time&&(_+=getTemplate("nospam_reports_tag",{tag_label:e.update_time})),e.uid%2==1&&(a.classList.remove("report_body_regular"),a.classList.add("report_body_odd"));break;case 200:_+=getTemplate("nospam_reports_labeled_value",{label:"receivers_num",value:e.receivers_num}),_+=getTemplate("nospam_reports_labeled_value",{label:"chat_msg_id",value:e.chat_msg_id}),_+=getTemplate("nospam_reports_labeled_value",{label:"chat_title",value:e.chat_title});break;case 300:if(e.group_id&&e.group_link&&(_+=getTemplate("nospam_reports_group_id",{group_id:e.group_id,group_link:e.group_link})),e.admin_id&&e.admin_link){var n=e.admin_id;_+=getTemplate("nospam_reports_admin_id",{admin_id:n,admin_link:e.admin_link})}break;case 160:_+=e.title;break;case 161:_+=e.new_title;break;case 200:e.attaches;-152029297==e.uid&&e.original_user_link&&(_+=getTemplate("nospam_reports_molodec_label",{original_user_link:e.original_user_link}));case 2602:case 2647:t="<a href='/video"+e.owner_id+"_"+e.video_id+"' target='_blank'> "+o+"</a>";break;case 2600:case 2610:case 2611:case 2645:case 2650:t="<a href='/video"+e.owner_id+"_"+e.video_id+"' target='_blank'> "+o+"</a>",_+='<table class="report_video"><tr>',_+='<td style="width: 130px;"><a class="report_video_thumb" href="'+e.video.href+'" onclick="'+e.video.onclick+'" style="background-image: url(\''+e.video.thumb+'\')"><div class="report_video_duration"><span class="report_video_icon"></span><span class="report_video_duration_text">'+e.video.duration_text+"</span></div></a></td>",_+="<td>",_+=e.video.DELETED?"ÐÐ¸Ð´ÐµÐ¾Ð·Ð°Ð¿Ð¸ÑÑ ÑÐ´Ð°Ð»ÐµÐ½Ð°":'<div class="report_video_title"><a href="'+e.video.href+'" onclick="'+e.video.onclick+'">'+e.video.title_short+"</a></div>",_+=!e.video.DELETED&&e.description?'<div class="report_video_description">'+e.video.description_short+"</div>":"",_+="</td>",_+="</tr></table>",_+='<div class="report_video_duration_second"><b>Duration:</b> <a class="_console_conditions" data-conditions="duration = '+e.duration+'">'+e.duration+"</a></div>",e.external&&(_+='<div class="report_video_external"><b>External:</b> '+e.external+"</div>");break;case 3504:case 3545:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+o+"</a>";break;case 13120:case 13121:t="<a href='/market"+e.owner_id+"?w=product"+e.owner_id+"_"+e.item_id+"' target='_blank'> "+o+"</a>";break;case 3500:case 3547:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+o+"</a>",_+='<table class="report_photo"><tr>',_+='<td><div class="report_photo_thumb">'+e.photo+"</div></td>",_+=e.description?'<td><div class="report_photo_description">'+e.description+"</div></td>":"",_+="</tr></table>",_+=e.album_id<0?'<div class="report_album_id"><b>album_id:</b> '+e.album_id+"</div>":"";break;case 3550:t="<a href='/photo"+e.owner_id+"_"+e.photo_id+"' target='_blank'> "+o+"</a>",_+=e.photo,_+=e.album_id<0?'<div class="report_album_id"><b>album_id:</b> '+e.album_id+"</div>":"";break;case 9258:_+=e.about;break;case 1800:_+=e.status;break;case 1531:case 1530:case 1534:_+=getTemplate("nospam_reports_field",{class:"report_message",value:e.text});break;case 5e3:t="<a href='/topic-"+e.group_id+"_"+e.topic_id+"' target='_blank'> "+o+"</a>",_+=e.title;break;case 5001:case 5046:t="<a href='/topic-"+e.group_id+"_"+e.topic_id+"?post="+Math.abs(e.comment_id)+"' target='_blank'> "+o+"</a>";break;case 2131:var l=e.group_id;t="ÐÑÑÐ¿Ð¿Ð°: "+getTemplate("nospam_reports_id_link",{type:"club",id:l,label:l,color:"black"}),_+="<b>ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ:</b>"+e.group_name+"<br>",_+="<b>ÐÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:</b>"+e.group_description+"<br>";break;case 7530:t="<a href='/app"+e.app_id+"' target='_blank'> "+o+"</a>",_+=e.app_name+"<br>";break;case 3670:var s=e.like_ref,c=e.like_type,d=e.owner_id+"_"+e.item_id,u="";switch(Number(c)){case 11:t="<a href='wall<a href='wall"+d+"' target='_blank'> "+o+"</a>",u+="(Ð·Ð°Ð¿Ð¸ÑÑ Ð½Ð° ÑÑÐµÐ½Ðµ), <a href='wall"+d+"' target='_blank'>vk.com/wall"+d+"</a>";break;case 12:t="<a href='wall"+d+"' target='_blank'> "+o+"</a>",u+="(ÐºÐ¾Ð¼Ð¼ÐµÐ½ÑÐ°ÑÐ¸Ð¹ Ð½Ð° ÑÑÐµÐ½Ðµ), <a href='wall"+d+"' target='_blank'>vk.com/wall"+d+"</a>";break;case 10:t="<a href='photo"+d+"' target='_blank'> "+o+"</a>",u+="(ÑÐ¾ÑÐ¾Ð³ÑÐ°ÑÐ¸Ñ), <a href='photo"+d+"' target='_blank'>vk.com/photo"+d+"</a>";break;case 24:case 8:t="<a href='photo"+d+"' target='_blank'> "+o+"</a>",u+="(Ð²Ð¸Ð´ÐµÐ¾Ð·Ð°Ð¿Ð¸ÑÑ), <a href='video"+d+"' target='_blank'>vk.com/video"+d+"</a>";break;case 6:t="<a href='audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"' target='_blank'> "+o+"</a>",u+="(Ð°ÑÐ´Ð¸Ð¾Ð·Ð°Ð¿Ð¸ÑÑ), <a href='audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"' target='_blank'>vk.com/audio.php?id="+e.owner_id+"&audio_id="+e.item_id+"</a>";break;case 22:t=o,u+="(ÐºÐ¾Ð¼Ð¼ÐµÐ½ÑÐ°ÑÐ¸Ð¹ Ðº Ð²Ð¸Ð´ÐµÐ¾)";break;case 21:t=o,u+="(ÐºÐ¾Ð¼Ð¼ÐµÐ½ÑÐ°ÑÐ¸Ð¹ Ðº ÑÐ¾ÑÐ¾Ð³ÑÐ°ÑÐ¸Ð¸)";break;case 20:t=o,u+="(ÐºÐ¾Ð¼Ð¼ÐµÐ½ÑÐ°ÑÐ¸Ð¹ Ð½Ð° ÑÑÐµÐ½Ðµ)";break;default:t=o,u+=" (Ð½ÐµÐ·Ð²ÐµÑÑÐ½ÑÐ¹ ÑÐ¸Ð¿) "+d}_+=getTemplate("nospam_reports_report_like",{like_ref:s,like_ref_id:e.ref,like_type:u,like_type_id:c});break;default:console.log("No type specified")}if(e.post_tags){var b=e.post_tags;Object.keys(b).forEach((function(e){b[e]&&(_=getTemplate("nospam_reports_tag",{tag_label:b[e]})+_)}))}if(e.score){var E=function(e){if(0===e.length)return!1;var t=[];for(var _ in e)p.includes(_)&&t.push([_,e[_]]);if(0===t.length)return!1;return t.sort((e,t)=>t[1]-e[1]),t[0]}(e.score);E&&(r+=getTemplate("nospam_reports_score_block",{label:E[0],score:E[1]})),_+=getTemplate("nospam_reports_scores",{score_blocks:r})}return a.innerHTML=_,[a,t]}function C(e){var t,_,o=e.mem_banned,i=isObject(o),a=i?"ÐÐµÐ´Ð°Ð²Ð½ÑÑ Ð±Ð»Ð¾ÐºÐ¸ÑÐ¾Ð²ÐºÐ°:<br>"+o.comment+"<br>"+j(new Date(1e3*o.time)):"",r="",n=g(e.ui_type,e.index),l=e.uid_base_info;""==a&&l&&(t=l[0].pattern_id,_=l[0].state,i=!0,a=(a=0==Number(_)?"ÐÐ¶Ð¸Ð´Ð°ÐµÑ Ð¾Ð±ÑÐ°Ð±Ð¾ÑÐºÐ¸ noSpam ":"ÐÐ±ÑÐ°Ð±Ð¾ÑÐ°Ð½ noSpam ")+"(ÑÐ°Ð±Ð»Ð¾Ð½ Ð½Ð¾Ð¼ÐµÑ <a href='/pattern"+Number(t)+"' target='_blank'>"+Number(t)+"</a>)");var s,c=ce("div");addClass(c,"report_info"),i&&addClass(c,"report_banned"),a&&(r=getTemplate("nospam_reports_report_ban_tooltip",{action_index:n}),b[n].ban_tt=a);var u,p=e.uid,E=Number(e.type),O=i?"red":"blue";return s=p>0?getTemplate("nospam_reports_id_link",{type:"id",id:p,label:p,color:O}):getTemplate("nospam_reports_id_link",{type:"club",id:-p,label:p,color:O}),u=d(D(e),2)[1],c.innerHTML=getTemplate("nospam_reports_report_info",{action_mention_link:s,action_tt:r,type:E,index:e.index,ip:e.ip,report_time:j(new Date(1e3*e.report_time)),action_time:j(new Date(1e3*e.time)),ua_hash:e.ua_hash,from_uid:e.from_uid,report_count:e.report_count>1?langNumeric(e.report_count,["","%s Ð¶Ð°Ð»Ð¾Ð±Ð°","%s Ð¶Ð°Ð»Ð¾Ð±Ñ","%s Ð¶Ð°Ð»Ð¾Ð±"]):"",report_type_link:u}),c}function T(e,t){var _="",o="report_"+e.ui_type+"_"+e.index,i=ce("div");(addClass(i,"report_steps"),"photo"!=e.ui_type&&"video"!=e.ui_type||cur.isSearchOnlyMode)||(_+="<span id = 'spamer_by_"+o+"'> <a onclick = \""+("dealSingleSpamer('"+e.ui_type+"', "+e.uid+", "+e.index+")")+'"> ÐÐ°Ð±Ð°Ð½Ð¸ÑÑ Ð¸ Ð¾ÑÐºÐ°ÑÐ¸ÑÑ </a> </span>');return _+=getTemplate("nospam_reports_compose_button",{type:e.real_ui_type?e.real_ui_type:e.ui_type,ip:e.ip,ua_hash:e.ua_hash}),_+="<span id='selected_text_span"+t+"' style='display:none;'></span>",i.innerHTML=_,i}function y(e,t,_){var o="report_"+e+"_"+_;ajax.post("noSpam.php",{act:"a_single_spamer",uid:t,type:e,action:JSON.stringify(b[ge(o)])},{onDone:function(){ge("spamer_by_"+o).innerHTML="<span style = 'color: green'> ÐÐ¾Ð±Ð°Ð²Ð»ÐµÐ½ </span>"},onFail:function(){ge("spamer_by_"+o).innerHTML="<span style = 'color: red'> ÐÐµÑÐ´Ð°ÑÐ° </span>"}})}function j(e){var t=e.getDate(),_=e.getMonth()+1;return(t<10?"0":"")+t+"."+(_<10?"0":"")+_+" Ð² "+e.toLocaleTimeString()}var I={_sel:[],day:O.getDate(),month:O.getMonth(),months:[[0,"Ð¯Ð½Ð²Ð°ÑÑ"],[1,"Ð¤ÐµÐ²ÑÐ°Ð»Ñ"],[2,"ÐÐ°ÑÑÐ°"],[3,"ÐÐ¿ÑÐµÐ»Ñ"],[4,"ÐÐ°Ñ"],[5,"ÐÑÐ½Ñ"],[6,"ÐÑÐ»Ñ"],[7,"ÐÐ²Ð³ÑÑÑÐ°"],[8,"Ð¡ÐµÐ½ÑÑÐ±ÑÑ"],[9,"ÐÐºÑÑÐ±ÑÑ"],[10,"ÐÐ¾ÑÐ±ÑÑ"],[11,"ÐÐµÐºÐ°Ð±ÑÑ"]],year:O.getFullYear(),generateHMS:function(e){var t,_=[];switch(e){case"hour":t=23;break;case"minute":case"second":t=59}for(var o=0;o<=t;++o)_.push([o,o<10?"0"+o:o+""]);return _},generateDays:function(e,t){for(var _=[],o=Object(i.d)(e,t),a=1;a<=o;++a)_.push([a,a+""]);return _},updateDays:function(){var e=this._sel[0],t=this._sel[1].val(),_=this._sel[2].val();e.val()>Object(i.d)(_,t)&&e.clear(),e.setData(this.generateDays(_,t))},setControls:function(){var e=I,t=[["reports_day",55],["reports_month",95],["reports_year",60],["reports_hour",50],["reports_minute",50],["reports_second",50]],_=ce("div",{id:"reports_time_wrap",className:"reports_time_wrap"}),o=geByClass1("box_body");e.clear(),o.appendChild(_),t.forEach((function(_,i){var a=[],r=[],n=ce("div",{className:_[0]+" fl_l"}),l=ce("input",{type:"hidden",name:_[0],id:_[0]}),s=_[0].split("_")[1];switch(domLC(o).appendChild(n),n.appendChild(l),s){case"year":r=(a=[[e.year,e.year+""]])[0];break;case"month":a=e.months,r=e.month;break;case"day":r=(a=e.generateDays(e.year,e.month))[e.day-1];break;case"hour":a=e.generateHMS(s),r=O.getHours();break;case"minute":a=e.generateHMS(s),r=O.getMinutes();break;case"second":a=e.generateHMS(s),r=O.getSeconds();break;default:r=a=e[s]}var c={width:t[i][1],multiselect:!1,autocomplete:!1,selectedItems:r};"month"!==s&&"year"!==s||extend(c,{onChange:function(e){I.updateDays()}}),I._sel.push(new Dropdown(l,a,c))}))},setTime:function(){boxQueue.hideLast();var e=I,t=e._sel,_={day:t[0].val(),month:t[1].val(),year:t[2].val(),hour:t[3].val(),minute:t[4].val(),second:t[5].val()},o=new Date(_.year,_.month,_.day,_.hour,_.minute,_.second),i=e.tt;val(i,o.getTime()/1e3)},set:function(e,t){var _=this.setControls,o=this.setTime,i=domData(t,"part");O=new Date;var a=i?"time_"+e+"_input2":"time_"+e+"_input";this.tt=ge(a,r.f),showFastBox({width:435,title:"ÐÑÐµÐ¼Ñ Ð´ÐµÐ¹ÑÑÐ²Ð¸Ñ ("+("start"==e?"Ð¿Ð¾Ð·Ð¶Ðµ":"ÑÐ°Ð½ÑÑÐµ")+", ÑÐµÐ¼)",dark:1,containerClass:"nospam_report_time_box",onShow:_},'<div class="reports_time_label">Ð£ÐºÐ°Ð¶Ð¸ÑÐµ Ð´Ð°ÑÑ:</div>',"ÐÑÐ¸Ð¼ÐµÐ½Ð¸ÑÑ",o)},clear:function(){return this._sel=[]}};function L(e){Object(s.q)(e)?function(e){var t=Object(a.h)();if(t.type=domData(e,"type"),null===t.type)return!1;"post"!==t.type&&"comment"!==t.type||(t.type="wall");t.ip=domData(e,"ip"),t.uahash=domData(e,"ua-hash"),t.pattern=t.pattern||getSelectionText(),t.threshold=1;var _=Object(a.d)(t);Object(s.r)(_)}(e.target):function(e){var t=domData(e,"type"),_=domData(e,"ip"),o=domData(e,"ua-hash");if(null===t)return;"post"!=t&&"comment"!=t||(t="wall");Object(a.m)(_),Object(a.o)(o),Object(a.n)(1),cur.uiSpamtype.selectItem(t),Object(r.i)(r.j),Object(a.k)(!1,"reset_all")}(e.target)}function A(e,t){var _=E[e];E[e]?_&&_!==t&&debugLog("collision for "+e,t,_):E[e]=t}function B(){if(Object(r.c)()===r.k){var e=w(),t=geByClass1("_reports_"+e+"_wrap",r.g),_=geByClass1("_report_show_more",domPN(t)),o=domPN(_),i=window.innerHeight||document.documentElement||bodyNode.clientHeight;h=scrollGetY(),isVisible(o)&&Object(r.a)()===r.k&&i+h>_.offsetTop&&_.click()}}function R(){clearTimeout(m),m=setTimeout(f.pbind(w(),v()),1e3)}function W(){var e=Object(c.a)({handlers:(e,t)=>{t(r.g,"mouseover","report_steps",M),t(r.g,"click","report_steps",e=>L(e)),t(r.g,"mouseover","report_info_ban_tooltip",e=>function(e){var t=e.target,_=domData(t,"action-index"),o=b[_].ban_tt;o&&showTooltip(t,{text:o,dir:"down",hasover:1,shift:[22,5,0]})}(e)),t(r.g,"mouseover","report_info_ua_hash",e=>function(e){var t=e.target,_=domData(t,"ua-hash"),o=E[_];showTooltip(t,{text:o||"[NULL]",dir:"down",hasover:1,shift:[22,5,0]})}(e)),e(document,"scroll",B),t(r.g,"click","_report_show_more",e=>{var t=domData(e.target,"need-shift");P(w(),t)}),t(r.h,"click","report_filter",e=>function(e){var t=e.target,_=domData(t,"type"),o=domData(t,"subtype"),i=geByClass("report_filter",r.h),a=geByClass("report_subfilter",r.h),n=geByClass1("active_type",r.g);if(!_)return!1;i.forEach(e=>{hasClass(e,"active_filter")&&removeClass(e,"active_filter"),domData(e,"type")!==_||domData(e,"subtype")||addClass(e,"active_filter")});var l=!1,s=!1;a.forEach(e=>{removeClass(e,"report_subfilter_active"),removeClass(e,"active_filter"),domData(e,"type")===_&&(addClass(e,"report_subfilter_active"),l=!0),domData(e,"subtype")===o&&(addClass(e,"active_filter"),s=!0)});var c=geByClass1("hr",r.h);if(l?show(c):hide(c),l&&!s){var d=geByClass1("report_subfilter_active",r.h);addClass(d,"active_filter")}domData(n,"type")!==_&&(removeClass(n,"active_type"),addClass(ge("reports_"+_),"active_type")),f(_,o)}(e)),t(r.g,"click","_report_btn_update",e=>{f(w(),v())}),t(r.h,"mouseover","settings_dots_wrap",e=>{var t=geByClass1("settings_dots_wrap");showTooltip(t,{black:!0,text:getTemplate("reports_group_message_tab_tooltip"),className:"group_messages_settings_tt",slideY:15,shift:[98,100,20],dir:"top",showdt:300,hidedt:100,hasover:!0,onCreate:function(){var e;e=ge("search_shift_filter"),cur.hoursShiftSlider=new Slider(e,{width:200,height:100,debounce:10,size:2,value:parseFloat(nav.objLoc.shift/23)||0,onChange:e=>{Object(s.u)({shift:parseInt(23*e)}),R()},formatHint:e=>langNumeric(parseInt(23*e),["","%s ÑÐ°Ñ Ð½Ð°Ð·Ð°Ð´","%s ÑÐ°ÑÐ° Ð½Ð°Ð·Ð°Ð´","%s ÑÐ°ÑÐ¾Ð² Ð½Ð°Ð·Ð°Ð´"])}),Object(s.o)("group_messages_reports_sorting","sorting_radio_filter_wrap",1)}})})}});cur.destroy.push(()=>{Object(c.c)(e)})}var k={initUpdate:function(){scrollToY(h)}}},bWc2:function(e,t,_){"use strict";_.d(t,"a",(function(){return o}));var o=function(){var e,t;return window.cur.wallLayer?null!==(e=document.getElementById("wl_reply_form"))&&void 0!==e?e:void 0:"full"===window.cur.wallType&&null!==(t=document.querySelector("#reply_box_wrap"+window.cur.oid+"_"+window.cur.pid+" .reply_box_inner_wrap"))&&void 0!==t?t:void 0}},cMbV:function(e,t,_){"use strict";function o(e,t){var _=t.icon,o=t.label,i=e.querySelector(".PageActionCell__label");if(i&&(i.innerHTML=o),void 0!==_){var a=e.querySelector(".PageActionCell__icon");a&&(a.innerHTML=_)}}_.d(t,"a",(function(){return o}))},cP3I:function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="error_circle_outline_24",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="error_circle_outline_24"><path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm0 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 14a1.333 1.333 0 110 2.667A1.333 1.333 0 0112 16zm.324-10.667a1 1 0 011 1.037l-.266 7.276a1.059 1.059 0 01-2.116 0l-.265-7.276a1 1 0 01.963-1.036h.684z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 24 24",id:c,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=u,t.a=p},"ci+N":function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));var o=_("3oLO"),i=_("k487"),a=function(){return(a=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=function(e,t,_){var r,n,l;void 0===_&&(_={});var s={autoShow:!1,cls:"feature_intro_tt feature_intro_blue_tt feature_info_tooltip",content:t.content,withCloseButton:!0,noAutoHideOnWindowClick:!0,onDestroy:function(){var e,_;"isServerSideHideDisabled"in(_=t)&&_.isServerSideHideDisabled||o.a.post("al_index.php",{act:"help_hints_hide",hash:t.helpHintHash,hint_id:t.helpHintId}),null===(e=t.onHideRequestSent)||void 0===e||e.call(t)},onHide:function(){null==l||l.destroy()},width:230},c=a(a({},s),_);return l=new i.a(e,c),null===(n=null===(r=window.cur)||void 0===r?void 0:r.destroy)||void 0===n||n.push((function(){null==l||l.destroy()})),{tooltip:l}}},crIy:function(e,t,_){"use strict";_.d(t,"c",(function(){return p})),_.d(t,"b",(function(){return b})),_.d(t,"d",(function(){return E})),_.d(t,"a",(function(){return O}));var o=_("vkmG"),i=_("fBgk"),a=_("qYuU"),r=_("LM/t"),n=_("pruO"),l=_("Rafy"),s=_("J3qk"),c=function(){return(c=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d=Object(a.a)("reactions-storage",(function(){return new Map})),u=Object(a.a)("reactions-config",(function(){return{config:void 0}})),p=function(e){Object(l.b)()&&console.log(e),Object.entries(e).forEach((function(e){var t=e[0],_=e[1],a=Object(i.j)(_,t);if(a)Object(r.a)({error:a.error});else{var l=_.map((function(e){return c(c({},e),{title:Object(o.a)(e.title)})}));d().set(t,Object(i.i)(t,l,{imageMenuSize:n.b,imagePreviewSize:n.c}))}}))},b=function(e){var t=d().get(e);if(t)return t;var _=new Error("Reaction set not found: "+e);Object(r.a)({error:_})},E=function(e){Object(l.b)()&&console.log(e);var t=Object(i.h)(e);t?(u().config=t,Object(s.a)(t.unlockedConfig)):console.warn("Reactions: invalid menu config passed",e)},O=function(){var e;return null===(e=u())||void 0===e?void 0:e.config}},dJem:function(e,t,_){"use strict";_.d(t,"a",(function(){return o}));var o=function(){return!!window.cur.wallLayer}},eKS6:function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));var o=_("HLtZ"),i=_("jE6c"),a=_("W9Tc");function r(e){if(window.vk.id&&Object(a.b)("update_private_snippets_by_queue")){var t=Array.from(e.querySelectorAll(".article_snippet"));if(t.length){var _=[];t.forEach((function(e){if(window.vk.id&&e.dataset.needUpdate){var t=e.dataset.articleRawId;t&&_.push({article_raw_id:t,post_raw_id:e.dataset.postId,is_mini_snippet:Object(i.f)(e.dataset.isMiniSnippet)})}})),_.length&&window.ajax.post("al_articles.php",{act:"get_snippets",article_snippets:JSON.stringify(_)},{onDone:function(e){t.forEach((function(t){t.dataset.articleRawId&&e[t.dataset.articleRawId]&&(t.outerHTML=e[t.dataset.articleRawId])}))},onFail:function(){return Object(o.c)(new Error("Fail: updateArticleSnippetsFromQueueByPost")),!0}})}}}},eewf:function(e,t,_){"use strict";var o;function i(e){return Boolean(e.customPhotoId||e.uploadResponse)}function a(e){return Boolean(e.customPhotoId)}function r(e){return e.uploadResponse&&!e.customPhotoId}function n(e){var t={url:e.coverUrl,crop:e.coverCrop};return e.customCover?(t.customPhotoId=e.customCover.photoId,t.customPhotoOriginalUrl=e.customCover.originalPhotoUrl):t.coverStoryId=e.coverStoryId,t}_.d(t,"a",(function(){return o})),_.d(t,"e",(function(){return i})),_.d(t,"d",(function(){return a})),_.d(t,"f",(function(){return r})),_.d(t,"c",(function(){return n})),_.d(t,"b",(function(){return l})),function(e){e[e.uploaded=0]="uploaded",e[e.uploading=1]="uploading",e[e.failed=2]="failed"}(o||(o={}));var l="custom"},fBgk:function(e,t,_){"use strict";_.d(t,"a",(function(){return a})),_.d(t,"b",(function(){return r})),_.d(t,"i",(function(){return l})),_.d(t,"c",(function(){return s})),_.d(t,"e",(function(){return c})),_.d(t,"d",(function(){return d})),_.d(t,"f",(function(){return u})),_.d(t,"g",(function(){return p})),_.d(t,"j",(function(){return b})),_.d(t,"h",(function(){return E}));var o=_("/bCM"),i=function(e){return null!==e&&"object"==typeof e},a=function(e){return e.itemsById[o.b]},r=function(e){var t;return null===(t=a(e))||void 0===t?void 0:t.title},n=function(e,t){return 0===e.length?"":(_=e,o=function(e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)},i=!1,void 0===i&&(i=!0),_.reduce((function(e,t){var _=o(t),a=o(e);return a===_?i?e:t:a<_?e:t}))).url;var _,o,i},l=function(e,t,_){var o=_.imageMenuSize,i=_.imagePreviewSize,a=t.map((function(e){var t=e.asset,_=e.color_sets,a=e.id,r=e.score,l=e.title;return{animationURL:t.animation_url||void 0,backgroundColor:null==_?void 0:_.background,id:a,imageMenuURL:n(t.images,o),imagePreviewURL:n(t.images,i),score:r,title:l,titleColor:null==_?void 0:_.foreground}})),r={};return a.forEach((function(e){r[e.id]=e})),{id:e,items:a,itemsById:r}},s=function(e){return e===o.e},c=function(e){return Number.isInteger(e)&&e>=o.d&&e<=o.c};function d(e){return"unlocking_disabled"in e}var u=function(e){var t=parseInt(e,10);return c(t)?{isValid:!0,value:t}:{isValid:!1}},p=function(e){var t=u(e);return t.isValid?t.value:o.e},b=function(e,t){if(e.length<o.f)return{error:new Error("Invalid reactions items count in set '"+t+"': "+e.length)}},E=function(e){if(i(e)){var t,_={},o=e.animationShowStaticAfterEnd,a=e.reportJsErrors,r=e.menuShowDelay,n=e.unlockedConfig;if("number"!=typeof r&&void 0!==r||(_.menuShowDelay=r),"boolean"==typeof o&&(_.animationShowStaticAfterEnd=o),"boolean"==typeof a&&(_.reportJsErrors=a),i(n))if(!0===(null==n?void 0:n.unlocking_disabled))_.unlockedConfig={unlocking_disabled:!0};else{var l=Array.isArray(n.unlocked_ids)?n.unlocked_ids.filter((function(e){return"number"==typeof e})):void 0,s=void 0;if(i(n.unlocked_queue)){var c=n.unlocked_queue,d=c.key,u=c.queue,p=c.ts;"string"==typeof d&&"string"==typeof u&&"number"==typeof p&&(s={key:d,queue:u,ts:p})}var b=(t=n.locked_hint_options,i(t)&&"string"==typeof t.content?n.locked_hint_options:void 0),E=function(e){return i(e)&&"string"==typeof e.content&&"string"==typeof e.helpHintHash&&"string"==typeof e.helpHintId}(n.reveal_hint_options)?n.reveal_hint_options:void 0;_.unlockedConfig={initialUnlockedIds:l,lockedHintOptions:b,revealHintOptions:E,queueSettings:s}}return _}}},frAj:function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="videocam_16",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="videocam_16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 3.75a2 2 0 00-2 2v4.5a2 2 0 002 2h5a2 2 0 002-2v-4.5a2 2 0 00-2-2H4zm11 2.2a.454.454 0 00-.103-.286c-.171-.21-.53-.19-.723-.095-.193.095-1.571.788-1.571.788a.233.233 0 00-.103.191v2.88c0 .075.038.145.103.19 0 0 1.097.548 1.571.789.434.22.826.033.826-.382V5.951z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 16 16",id:c,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};p.mountIcon=u,t.a=p},ha24:function(e,t,_){"use strict";function o(e){var t=e.match(/^([a-z_]+)([0-9\-_]+)$/);return t?{objectType:t[1],objectId:t[2]}:null}_.d(t,"f",(function(){return o})),_.d(t,"d",(function(){return i})),_.d(t,"e",(function(){return a})),_.d(t,"a",(function(){return r})),_.d(t,"b",(function(){return n})),_.d(t,"c",(function(){return l}));var i=function(e){return"wall"+e},a=function(e){return"wall_reply"+e},r=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_count, ._like_button_count"))&&void 0!==t?t:void 0},n=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_icon, ._like_button_icon"))&&void 0!==t?t:void 0},l=function(e){var t;return null!==(t=e.querySelector(".like_button_label, ._like_button_label"))&&void 0!==t?t:void 0}},hmNr:function(e,t,_){"use strict";function o(e){return t=URL.createObjectURL(e),new Promise((function(e,_){var o=new Image;o.onload=function(){var t=Number(o.height),_=Number(o.width);e([_,t])},o.onerror=function(){_()},o.onabort=function(){_()},o.src=t}));var t}_.d(t,"a",(function(){return r}));var i=_("QpOW"),a=function(){return(a=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=function(){function e(e,t){this.config=a({allowedTypes:["*"]},e),this.progressCallback=t}return e.prototype.validate=function(e){var t=this.config,_=t.constraints,a=t.allowedTypes,r=t.lang,n=!1;return a&&(n=a.some((function(t){return"*"===t||t===e.type}))),n?_?o(e).then((function(e){var t=_.maxWidth,o=_.minWidth,a=_.maxHeight,n=_.minHeight,l=_.maxAspectRatio,s=_.minAspectRatio,c=e[0],d=e[1],u=c/d;if(c>t||d>a){var p=(r["error_"+i.c.IMAGE_TOO_BIG]||"").replace("{width}",String(t)).replace("{height}",String(a));return Promise.reject({code:i.c.IMAGE_TOO_BIG,text:p})}if(c<o||d<n){p=(r["error_"+i.c.IMAGE_TOO_SMALL]||"").replace("{width}",String(o)).replace("{height}",String(n));return Promise.reject({code:i.c.IMAGE_TOO_SMALL,text:p})}return s&&s>u||l&&u>l?Promise.reject({code:i.c.BAD_ASPECT_RATIO,text:r["error_"+i.c.BAD_ASPECT_RATIO]}):Promise.resolve(null)})).catch((function(e){return e&&e.text&&e.code?Promise.reject(e):Promise.reject({code:i.c.UNKNOWN,text:r["error_"+i.c.UNKNOWN]})})):Promise.resolve(null):Promise.reject({code:i.c.NOT_ALLOWED_EXTENSION,text:r["error_"+i.c.NOT_ALLOWED_EXTENSION]})},e.prototype.upload=function(e){var t=this;return this.validate(e).then((function(){return new Promise((function(_,o){var a=new XMLHttpRequest,r=new FormData;r.append("file1",e),a.open("POST",t.config.url,!0),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE&&200===a.status){var e=void 0;try{a.responseText&&(e=JSON.parse(a.responseText))}catch(e){o({code:i.c.UNKNOWN,text:t.config.lang["error_"+i.c.UNKNOWN]})}_(e)}},a.onerror=function(){o({code:i.c.UPLOAD,text:t.config.lang["error_"+i.c.UPLOAD]})},a.upload.onprogress=function(e){t.progressCallback&&t.progressCallback(e.loaded,e.total)},a.send(r)}))}))},e}()},htvV:function(e,t,_){"use strict";function o(){return{icon:'<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M12 3.9c-1.06 0-2.07.2-3 .57a.9.9 0 11-.66-1.67A9.88 9.88 0 0112 2.1a9.9 9.9 0 019.9 9.9 9.88 9.88 0 01-.7 3.66.9.9 0 01-1.67-.66A8.1 8.1 0 0012 3.9z"/><path d="M11.13 7a.9.9 0 01.9-.9 5.9 5.9 0 015.87 5.85.9.9 0 11-1.8.02 4.1 4.1 0 00-4.07-4.07.9.9 0 01-.9-.9zM5 19a9.87 9.87 0 007 2.9c2.41 0 4.62-.86 6.33-2.3l1.13 1.14a.9.9 0 101.28-1.28L4.54 3.26a.9.9 0 10-1.28 1.28L4.4 5.66A9.86 9.86 0 002.1 12 9.87 9.87 0 005 19zm-1.1-7a8.08 8.08 0 008.1 8.1c1.91 0 3.67-.66 5.06-1.77l-1.57-1.57A5.88 5.88 0 0112 17.9a5.88 5.88 0 01-4.17-1.73A5.88 5.88 0 016.1 12a5.88 5.88 0 011.14-3.49L5.67 6.94A8.06 8.06 0 003.9 12zm4 0a4.1 4.1 0 001.2 2.9 4.08 4.08 0 002.9 1.2 4.07 4.07 0 002.2-.64l-1.65-1.64c-.66.2-1.4.01-1.9-.48s-.67-1.23-.47-1.89L8.54 9.81A4.08 4.08 0 007.9 12z"/></g></svg>',name:"live_disable_outline_24"}}_.d(t,"a",(function(){return o}))},hzb7:function(e,t,_){"use strict";_.d(t,"a",(function(){return O})),_.d(t,"d",(function(){return h})),_.d(t,"e",(function(){return m})),_.d(t,"f",(function(){return E})),_.d(t,"b",(function(){return P})),_.d(t,"c",(function(){return M}));var o,i=_("k487"),a=_("zxIV"),r=_("Egk5"),n=_("t7n3");!function(e){e.topicId="topic_id"}(o||(o={}));var l=function(){return(l=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=new Map,c=function(e,t){return function(e,t){return s.set(e,t)}(e,{actionParams:void 0,selector:t})},d=function(e,t){!function(e,t){var _=s.get(e);void 0!==_&&s.set(e,t(_))}(e,(function(e){return l(l({},e),{actionParams:t})}))},u=function(e,t){var _;d(e,((_={})[o.topicId]=t,_))},p=function(e){return"post_discover_category_btn"+e},b=function(e,t){var _,o,i=(_={link_id:String(t)},(o=Object(n.n)("postCategorySelect",_))?Object(a.rb)(o):null);if(e instanceof HTMLElement&&i instanceof HTMLElement)return e.appendChild(i),i},E=function(e){var t,_;null===(_=null===(t=function(e){return s.get(e)}(e))||void 0===t?void 0:t.selector)||void 0===_||_.tooltipHide()},O=function(e){var t,_,i=null===(_=function(e){var t;return null===(t=s.get(e))||void 0===t?void 0:t.actionParams}(e))||void 0===_?void 0:_[o.topicId];return void 0!==i&&-1!==i?((t={})[o.topicId]=i,t):void 0},m=function(e){return!0===(null==e?void 0:e.wallPostTopicSettingEnabled)},h=function(e){return void 0!==e.topic_options},w=_("jE6c"),v=_("ZD4m"),f=function(){function e(e,t,_,o){var n=this;this.btnEl=e,this.containerEl=t,this.options=_,this.selectorContentEl=o,this.onOptionClickWrapper=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.tooltip.hide();var _=e[0].currentTarget;if(_ instanceof HTMLElement){var o=Object(v.e)(_,"data-click-params");o&&n.selectTopicId(o.value)}},this.linkId=this.options.linkId,this.radioBtnId=p(this.options.linkId),window.radioBtns[this.radioBtnId]={val:!1,els:o.children},this.tooltip=new i.a(e,{appendTo:t,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-12*(window.vk.rtl?-1:1),7],content:o,align:"left",onFirstTimeShow:function(){Object(a.xb)(o)}}),Object(a.E)('[data-onclick="togglePostTopic"]',t).forEach((function(e){Object(r.b)(e,"click",n.onOptionClickWrapper)}))}return e.create=function(t,_){var o=b(t,_.linkId);if(o){var i=this.getSelectorContentEl(o),r=Object(a.F)(".post_action_btn_layout",o);if(i&&r)return new e(r,o,_,i)}},e.getSelectorContentEl=function(e){return Object(a.F)(".post_action_tt_content",e)},e.prototype.destroy=function(){this.tooltip.destroy(),delete window.radioBtns[this.radioBtnId]},e.prototype.tooltipHide=function(){this.tooltip.hide()},e.prototype.selectTopicId=function(e){this.options.selectTopicId(this.linkId,e),this.updateViewForSelectedTopic({isTopicSelected:-1!==e,topicId:e})},e.prototype.clearSelection=function(){this.selectTopicId(-1)},e.prototype.updateViewForSelectedTopic=function(t){var _=t.isTopicSelected,o=t.topicId,i=e.getSelectOptionEl(this.containerEl,o),r=i&&Object(v.e)(i,"data-click-params"),n=Object(a.F)(".post_action_btn_text",this.containerEl);if(i&&r&&n){var l=r.label;window.radiobtn(i,void 0,p(this.options.linkId));var s=n.getAttribute("data-empty")||"",c=_?l:s;n.innerHTML=c,n.setAttribute("aria-label",Object(w.q)(c)),Object(a.zb)(this.containerEl,"on",_)}},e.getSelectOptionEl=function(e,t){return Object(a.F)('[data-value="'+t+'"]',e)},e}(),g=function(e,t,_){var i=f.create(t,{linkId:e,selectTopicId:u});if(i)return c(e,i),i.selectTopicId(_[o.topicId]),{clearSelection:function(){i.clearSelection()},onDestroy:function(){i.destroy()}}},P=function(e,t){var _;return g(e,t,((_={})[o.topicId]=-1,_))},M=function(e,t,_){var i,a;return g(e,t,((i={})[o.topicId]=null!==(a=_[o.topicId])&&void 0!==a?a:-1,i))}},"isy+":function(e,t,_){"use strict";function o(){return{icon:'<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.1c4.17 0 6.9 3.45 6.9 7.53v1.6c0 .25.15.54.58 1 .47.49 1.01.93 1.4 1.5.32.48.53 1.04.52 1.7a.9.9 0 11-1.8-.05c.02-.81-.93-1.4-1.43-1.92-.47-.5-1.07-1.23-1.07-2.23v-1.6c0-3.31-2.13-5.73-5.1-5.73-1 0-1.88.27-2.62.73a.9.9 0 11-.96-1.52A6.67 6.67 0 0112 2.1zm4.35 15.8c-.63 2.33-2.13 3.6-4.35 3.6s-3.72-1.27-4.35-3.6H5.74c-1.5 0-2.47-.5-2.9-1.41-.2-.4-.24-.72-.24-1.16 0-1.3.94-2.16 1.78-3.02.53-.55.72-.85.72-1.08 0-1.5-.04-2.97.46-4.4l-2.3-2.3a.9.9 0 111.28-1.27l16.2 16.2a.9.9 0 11-1.28 1.28l-2.83-2.84zm-6.82 0h4.94c-.46 1.25-1.25 1.8-2.47 1.8s-2.01-.55-2.47-1.8zM6.9 11.23c0-.97-.06-1.97.12-2.93l7.8 7.8H5.75c-.85 0-1.18-.17-1.28-.39-.34-.7.52-1.44.93-1.86.72-.73 1.51-1.52 1.51-2.62z" clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"/></svg>',name:"notification_slash_outline_24"}}_.d(t,"a",(function(){return o}))},jmhT:function(e,t,_){"use strict";_.d(t,"a",(function(){return s}));var o,i=_("q1tI"),a=_.n(i),r=_("ZxpX"),n=_("GSQL"),l=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function _(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(_.prototype=t.prototype,new _)}),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.render=function(){var e=this.props,t=e.className,_=e.appearance,o=e.title,i=e.actionButtons,l=e.onClose,s=e.children,c=e.hint,d=e.hasScroll;return a.a.createElement("div",{className:"BoxModal"},a.a.createElement("div",{className:Object(r.a)("Modal","Modal--"+_,t)},a.a.createElement(n.default.Header,{title:o,onClose:l,appearance:_}),Boolean(s)&&a.a.createElement(n.default.Body,{hasScroll:d},s),Boolean(i)&&a.a.createElement(n.default.Footer,{actionButtons:i,hint:c})))},t.defaultProps={appearance:"white",hasScroll:!0},t}(a.a.Component)},k3PD:function(e,t,_){"use strict";function o(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}_.d(t,"a",(function(){return o}))},n7oi:function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="more_horizontal_24",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="more_horizontal_24"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" fill="currentColor" /></g></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 24 24",id:c,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};p.mountIcon=u,t.a=p},nTq2:function(e,t,_){"use strict";_.d(t,"a",(function(){return f}));_("rGqo"),_("Btvt"),_("hhXQ"),_("pIFo"),_("91GP"),_("SRfc");var o=_("zxIV"),i=_("Egk5"),a=_("FWc3"),r=_("t7n3"),n=_("7jxN"),l=_("/PiP"),s=_("jE6c"),c=_("EasH"),d=_("4+be"),u=_("ha24"),p=_("pruO"),b=_("60IB"),E=_("jXbq");function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var _=arguments[t];for(var o in _)Object.prototype.hasOwnProperty.call(_,o)&&(e[o]=_[o])}return e}).apply(this,arguments)}var m="like",h="share",w="views",v="comment",f={toggle(e,t,_,a){if(Object(i.c)(t),Object(s.l)(window.cur)&&Object(s.j)(cur.viewAsBox))return cur.viewAsBox();if(vk.widget&&!vk.id)return window.Widgets.oauth();var r=Object(o.ab)(e,"active");Object(o.c)(e,"animate"),this.clientUpdate(_,m,r?-1:1,!r);var n=()=>{Object(o.zb)(e,"active",r),this.clientUpdate(_,m,r?1:-1,r)};window.ajax.post("like.php",{act:r?"a_do_unlike":"a_do_like",object:_,hash:a,list:cur.pvListId,wall:2,from:this._getReference(_),from_widget:vk.widget?1:0},{onDone:t=>{if(t.unauth_action_box)return n(),void E.a.show(t.unauth_action_box);this.update(_,t);var o=_.match(/^(wall|market)(.*)/);o&&cur.onLike&&cur.onLike(e,o[1],o[2],r)},onFail:()=>(n(),!1)}),Object(s.f)(Object(o.v)(e,"count"))>0?f.showLikes(e,_,{fast:!0}):e.tt&&e.tt.destroy&&e.tt.destroy()},_getReference:e=>cur.pvShown?"photo_viewer":e===cur.wallLayer?"wkview":window.mvcur&&window.mvcur.mvShown?"videoview":cur.wallType?"feed"===cur.wallType?"news"===cur.section?"feed_"+(cur.subsection?cur.subsection:cur.section):"recommended"===cur.section?"feed_recommended"+("recent"!==cur.subsection?"_"+cur.subsection:""):Object(r.o)(cur.section,["friends","groups","videos","photos"])?"feed_"+(cur.subsection?"_"+cur.subsection:""):"feed_"+cur.section:"top"===cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,share(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(vk.widget&&!vk.id)return window.Widgets.oauth();if(Object(s.l)(window.cur)&&Object(s.j)(cur.viewAsBox))return cur.viewAsBox();var _=Object(u.f)(e),o=_.objectType,i=_.objectId;(vk.widget?window.showBox:c.b)("like.php",O({act:"publish_box",object:e,from_widget:vk.widget?1:0},t),{onDone:(e,t)=>{t.unauth_action_box&&(e.hide(),E.a.show(t.unauth_action_box))},stat:["page.js","page.css","wide_dd.js","wide_dd.css",window.jsc("web/sharebox.js")]}),"wall"===o&&window.Wall&&window.Wall.triggerAdPostStat(i,"share_post"),cur.RpcMethods&&(cur.RpcMethods.likeFullUpdate=t=>f.update(e,window.cleanObj(t)))},clientUpdate(e,t,_,i){var a=this._getButtonsByType(e,t);if(a.length){var r=Object(s.f)(Object(o.v)(a[0],"count"))+_;this._updateDom(e,t,r,i),this.updateExternalIndex(e,{type:t,count:r,isActive:i})}},update(e,t){if(!isNaN(parseInt(t.like_num))){var _=Object(s.n)(t.like_my)?void 0:!!Object(s.f)(t.like_my);this._updateDom(e,m,t.like_num,_,t.like_title),this.updateExternalIndex(e,{type:m,count:t.like_num,isActive:_})}if(!isNaN(parseInt(t.share_num))){var o=Object(s.n)(t.share_my)?void 0:!!Object(s.f)(t.share_my);this._updateDom(e,h,t.share_num,o,t.share_title),this.updateExternalIndex(e,{type:h,count:t.share_num})}if(Object(r.x)(t.views_num)&&this._updateDom(e,w,t.views_num,void 0,t.views_title),Object(r.x)(t.comment_num)&&this._updateDom(e,v,t.comment_num),t[p.a]){var i=!!t.isQueueUpdate;Object(b.a)(e,t[p.a],void 0,{isQueueUpdate:i})}},updateComments(e,t){this.update(e,{comment_num:t})},_updateDom(e,t,_,i,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=(null==l?void 0:l.els)?null==l?void 0:l.els:this._getButtonsByType(e,t),p=t===w;if(null==c?void 0:c.length){var b="";p?b=_:_>0&&(b=vk.widget?Object(r.l)(_):Object(d.j)(_,"%s",!0)),p||(_=Object(s.f)(_));for(var E=0;E<c.length;E++){var O=c[E];if(!Object(o.ab)(O,"no_counter")){var v=p?c[E]:Object(u.a)(c[E]);Object(n.c)(v,b,{str:"auto",noWrapWidth:!p,noSpaceIfEmpty:!0}),Object(o.zb)(O,"empty",_<=0),"boolean"==typeof i&&Object(o.zb)(O,"active",i),Object(o.e)(c[E],"data-count",_),p&&Object(o.e)(c[E],"title",a||"");var f=c[E].tt;if(f){var g=Object(o.m)(f.container,"_content"),P=Object(o.m)(f.container,"_value"),M=Object(o.m)(f.container,"_title"),D=Object(s.f)(Object(o.Cb)(P));Object(o.Cb)(P,_),a&&Object(o.Cb)(M,a),Object(s.l)(f)&&(f.likeInvalidated=!0),(D!==_&&D<7||!1===a)&&(t===m?O.needReinitLikesTT=!0:t===h&&(O.needReinitShareTT=!0)),t===m&&Object(o.zb)(g,"me_hidden",!i),!1===a&&f.destroy&&f.destroy()}}}}},_getButtonsByType:(e,t)=>Object(o.E)(`._like_${e} ._${t}, ._like_${e} [data-like-button-type="${t}"]`),showLikes(e,t){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&e instanceof HTMLElement&&!e.postDontShowLikes&&(!vk.widget||!vk.show_external_auth_box)){var i=_.views?{views:1}:_.share?{published:1}:{};_.listId&&(i.list=_.listId),_.like_stats_params&&Object.assign(i,_.like_stats_params);var n=!!Object(o.L)("share",Object(o.Y)("like_wrap",e)),l=document.body,c=getComputedStyle(e),d=Object(s.f)(c.getPropertyValue("padding-left").replace("px","")),p=Object(s.f)(c.getPropertyValue("padding-top").replace("px","")),b=Object(u.b)(e),E=40;"wpost"===_.from&&(E=24);var O,m,h=[E-Object(o.S)(b)[0]/2-d,10-p],w=_.cl||"";if(_.share)w+="likes_tt_share";else if(w+="likes_tt_like","widget_community"===_.from)h[0]=6;else if("wcomments"===_.from||"widget_comments"===cur.wallType){h[0]=Object(o.S)(e)[0]+16-Object(o.S)(b)[0]/2-10}else"photo_carousel"===_.from&&(h[1]=10);if("reactions-preview-items"===e.dataset.sectionRef){var v=e.querySelector(".ReactionsPreview__items");if(v){var g=v.querySelector(".ReactionsPreviewItem");h[0]=E-(Object(o.S)(g)[0]/2||0),l=e}}_.share?(O="needReinitLikesTT",m="resetLikesTTTimer"):(O="needReinitShareTT",m="resetShareTTTimer"),clearTimeout(e[m]),Object(a.c)(e,{url:"/like.php",params:Object(r.i)({act:"a_get_stats",object:t,has_share:n?1:""},i),appendEl:l,slide:15,shift:h,ajaxdt:_.fast?0:100,showdt:_.fast?0:400,hidedt:200,dir:"auto",checkLeft:!0,reverseOffset:80,noZIndex:!0,hasover:!0,tip:{over:()=>{f.showLikes(e,t,_)}},typeClass:"like_tt",className:w,onHide:()=>{clearTimeout(e[m]),e[O]&&(e[m]=setTimeout(()=>{delete e[O],e.tt&&e.tt.destroy&&e.tt.destroy()},200))}})}},showShare:function(e,t,_){f.showLikes(e,t,Object(r.i)(_,{share:1}))},updateViews:(e,t,_)=>{if(!vk.widget||!vk.show_external_auth_box){var i=t.currentTarget;window.ajax.post("like.php",{act:"a_get_stats",object:e,views:1},{cache:1,onDone(t,a){var r=Object(o.g)("div",{innerHTML:a}),n=(null==_?void 0:_.updateTargetElOnly)?{els:[i]}:void 0;f._updateDom(e,w,t,void 0,r.innerText||r.textContent,n)}})}},makeTemplate(e,t){if(!e)return"";(t=Object(r.i)({buttons_prepend:"",object_raw:"",likes_count:"",liked:!1,share_count:"",shared:"",views_count:"",share_opts:{},like_opts:{},class_name:"",like_cont_class:"",like_class_name:"",[p.a]:"",reactions_class_name:""},t)).like_active=t.liked?"active":"",t.share_active=t.shared?"active":"",t.comment_active="",t.likes_formatted_count=t.likes_count>0?Object(d.j)(t.likes_count,"%s",!0):"",t.share_formatted_count=t.share_count>0?Object(d.j)(t.share_count,"%s",!0):"",t.share_opts=this._convertOptsToString(t.share_opts),t.like_opts=this._convertOptsToString(t.like_opts),t.like_class_name+=t.likes_count>0?"":" empty",t.share_class_name=t.share_count>0?"":"empty";var _=t[p.a],i=!!_&&Object.values(_).some(e=>!!e);return t.reactions_class_name+=i?"":" empty",Object(o.qb)(e,t)},_convertOptsToString:e=>JSON.stringify(e).replace(/\"/g,"'"),updateExternalIndex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=Object(u.f)(e),o=_.objectType,i=_.objectId;switch(o){case"photo":if(!cur.pvShown||!cur.pvCurPhoto||cur.pvCurPhoto.id!==i)return;var a=cur.pvListId,r=cur.pvIndex,n=cur.pvData[a][r];t.type===m?(n.likes=t.count,n.liked=t.isActive,cur.pvCommsLikes[n.id][1]=t.count):t.type===h&&(n.shares=t.count);break;case"video":if(window.mvcur&&window.mvcur.mvShown&&window.mvcur.videoRaw===i&&t.type===m){var l=window.Videoview.getMvData();l.likes=t.count,void 0!==t.isActive&&(l.liked=t.isActive,window.Videoview.playerOnLiked(t.isActive),window.Videoview.recache())}}},showLikesList(e,t){cur.viewAsBox||Object(o.ab)(Object(o.Y)("like_btn",e),"no_counter")||Object(l.H)({w:"likes/"+Object(r.c)(t)},!1,!1,{queue:1})},showSharesList(e,t){cur.viewAsBox||Object(o.ab)(Object(o.Y)("like_btn",e),"no_counter")||Object(l.H)({w:"shares/"+Object(r.c)(t)},!1,!1,{queue:1})}}},oBWH:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("HEwt"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a1Th"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Btvt"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("rGqo"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rE2o"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ioFf"),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("91GP"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("KKXr"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("SRfc"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("pIFo"),_lib_dom__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("zxIV"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("cGUQ"),_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("/PiP"),_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("Egk5"),_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("FWc3"),_lib_message_box__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("v+DW"),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("Xrg9"),_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("t7n3"),_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("98sY"),_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("kcIO"),_lib_stats__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("XzvV"),_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("BJj/"),_lib_scroll__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("lXE5"),_lib_video__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("Ia1d"),_lib_fx__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("7jxN"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("4+be"),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("821F"),_web_profile_helpers__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("cMbV"),_icons_desktop_getIcon24NotificationSlashOutline__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("isy+"),_icons_desktop_getIcon24NotificationOutline__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("vBYu"),_icons_desktop_getIcon24LiveOutline__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("TkSl"),_icons_desktop_getIcon24LiveDisableOutline__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("htvV"),_web_page_actionCell_helpers__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("6zvi");function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(_):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var _=0,o=new Array(t);_<t;_++)o[_]=e[_];return o}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var _=[],o=!0,i=!1,a=void 0;try{for(var r,n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(_.push(r.value),!t||_.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return _}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var _=arguments[t];for(var o in _)Object.prototype.hasOwnProperty.call(_,o)&&(e[o]=_[o])}return e}).apply(this,arguments)}var Page={_adBlockSeenStorage:{},_postsClearTimeoutsCalls:0,initUploadForImagePaste:function initUploadForImagePaste(txtEl,addMedia,blob){stManager.add([jsc("web/upload.js")],(function(){addMedia.menu&&addMedia.menu.activate();var uploadEl=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="page_field_upload" class="post_upload"></div>'});Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.z)(uploadEl,txtEl);var uploadData=window.wkcur?wkcur.wallUploadOpts:cur.wallUploadOpts;if(void 0!==addMedia.clipboardImageUploadIndex)Upload.onFileApiSend(addMedia.clipboardImageUploadIndex,[blob]);else{var composer=txtEl&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(txtEl,"composer"),composerOpts=composer&&composer.options&&composer.options.media&&composer.options.media.options||{},limit=composerOpts&&composerOpts.limit||2;addMedia.clipboardImageUploadIndex=Upload.init(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(uploadEl),uploadData.url,uploadData.params,{file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_input:null,accept:"image/jpeg,image/png",file_match:uploadData.opts.ext_re,lang:uploadData.opts.lang,wiki_editor:0,onUploadStart:function(e,t){var _=void 0!==e.ind?e.ind:e,o=Upload.options[_];"form"==Upload.types[_]&&(geByClass1("file",ge("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[_]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),o.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete:function onUploadComplete(info,res){var params,i=void 0!==info.ind?info.ind:info,fileName=(info.fileName?info.fileName:info).replace(/[&<>"']/g,"");try{params=eval("("+res+")")}catch(e){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_11__.fromQueryString)(res)}params.photos?ajax.post("al_photos.php",extend({act:"choose_uploaded"},params),{onDone:function(e,t){t.uploadNum=i,addMedia.chooseMedia("photo",e,extend(t,{upload_ind:i+"_"+fileName}))},onFail:function(){}}):Upload.onUploadError(info)},onUploadProgress:function(e,t,_){var o=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[o]){var i=(cur.attachMediaIndexes||{})[o];if(void 0===i||i&&cur.addMedia[i].chosenMedia||cur.imMedia){var a={loaded:t,total:_};e.fileName&&(a.fileName=e.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",o,a)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(e){"form"==Upload.types[e]&&Upload.embed(e)},onCheckComplete:function(e){Upload.types[e]="fileApi",Upload.onFileApiSend(e,[blob])},customShowProgress:function(){},noFlash:1,multiple:1,multi_progress:1,max_files:limit,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:uploadData.opts.server,error:uploadData.opts.default_error,error_hash:uploadData.opts.error_hash})}}))},buildMediaLinkEl:function(e,t){return'<div class="page_media_link_url '+(t?"page_market_owner_link":"")+'">'+(t?"":'<div class="page_media_link_icon"></div>')+'<div class="page_media_link_text">'+e+"</div></div>"},showManyPhoto:function(e,t,_,o){var i=[];return each(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e).childNodes,(function(e,t){var _=(t&&t.getAttribute&&t.getAttribute("onclick")).match(/'(-?\d+_\d+)'\s*,\s*'([a-f0-9]{18})'/i);_&&i.push(_[1]+"/"+_[2])})),o.additional={draft_photos:i.join(";")},Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.D)(t,_,extend(o,{queue:1}))},inviteToGroup:function(e,t,_,o,i){var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e),r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e)),n=function(e){var o=e?1:0,r=e?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("friends_cancel_event_invite"):Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("friends_send_event_invite");a.innerHTML='<a onclick="return page.inviteToGroup(this, '+t+", "+_+", "+o+", '"+i+"')\">"+r+"</a>"};return o?(ajax.post("/al_page.php",{act:"a_cancel_invite",mid:_,gid:t,hash:i}),n(0)):(ajax.post("/al_page.php",{act:"a_invite",mid:_,gid:t,hash:i},{onDone:function(e,t){if(!e){n(0),hide(a);var _=geByClass1("error",r),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.rb)('<div class="page_members_box_error msg"><div class="msg_text">'+t+"</div></div>");_?r.replaceChild(o,_):r.insertBefore(o,r.firstChild)}}}),n(1)),!1},moneyTransferBox:function(e,t){var _={to_id:cur.oid,from:t};"own_profile"!==t&&"own_profile_tt"!==t||(_.to_id=0,_.tab="link"),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_27__.a.showMoneyTransferBox(_,{},e=>(setTimeout(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_error"),e).hide,2e3),!0)),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(e)},showMoreActions:function(e){var t=geByClass1("page_actions_more",e.parentElement);t&&(hide(e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(t))},onSubscriptionItemOnClick:function(e,t,_,o,i){var a=hasClass(e,"on");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"act",a?0:1),_&&Page.toggleSubscription(e,_,t,0,"page",(function(){var t=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)(a?"groups_notifications_on":"groups_notifications_set_up");val(e,t),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.zb)(e,"on")})),o&&Page.toggleLiveSubscription(e,o,a?0:1,t,(function(){}),!0),i&&Page.togglePodcastsSubscription(this,i,a?0:1,t,(function(){}),!0)},toggleSubscription:function(e,t,_,o,i,a,r){var n=parseInt(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"act"))?1:0,l={onDone:t=>{a?a(t,n?0:1,e):(e.querySelector(".PageActionCell__icon")?Object(_web_profile_helpers__WEBPACK_IMPORTED_MODULE_28__.a)(e,{icon:n?Object(_icons_desktop_getIcon24NotificationSlashOutline__WEBPACK_IMPORTED_MODULE_29__.a)().icon:Object(_icons_desktop_getIcon24NotificationOutline__WEBPACK_IMPORTED_MODULE_30__.a)().icon,label:t}):val(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.O)("span",e),t),e.setAttribute("data-act",n?0:1))}};r||(l.showProgress=Page.actionsDropdownLock.pbind(e),l.hideProgress=Page.actionsDropdownUnlock.pbind(e)),ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:n?1:0,oid:o||cur.oid,hash:t,source:i},l),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(_)},toggleLiveSubscription:function(e,t,_,o,i,a){void 0!==cur.toggleLiveSubscriptionAct&&(_=cur.toggleLiveSubscriptionAct),ajax.post("al_video.php?act=a_subscribe_live",{subscribe:_?1:0,owner_id:cur.oid,hash:t},{onDone:t=>{cur.toggleLiveSubscriptionAct=!_,i?i(t):e.querySelector(".PageActionCell__icon")?Object(_web_profile_helpers__WEBPACK_IMPORTED_MODULE_28__.a)(e,{icon:cur.toggleLiveSubscriptionAct?Object(_icons_desktop_getIcon24LiveOutline__WEBPACK_IMPORTED_MODULE_31__.a)().icon:Object(_icons_desktop_getIcon24LiveDisableOutline__WEBPACK_IMPORTED_MODULE_32__.a)().icon,label:t}):val(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.O)("span",e),t)},showProgress:()=>Page.actionsDropdownLock(e),hideProgress:()=>Page.actionsDropdownUnlock(e)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(o)},togglePodcastsSubscription:function(e,t,_,o,i,a){null!=cur.togglePodcastsSubscriptionAct&&(_=cur.togglePodcastsSubscriptionAct),ajax.post("al_wall.php",{act:"a_toggle_podcasts_subscription",subscribe:_?1:0,owner_id:cur.oid,hash:t},{onDone:function(t){cur.togglePodcastsSubscriptionAct=!_,i?i(t):val(e,t)},showProgress:!a&&Page.actionsDropdownLock.pbind(e),hideProgress:!a&&Page.actionsDropdownUnlock.pbind(e)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(o)},showMessagesFromCommunityTooltip:function(e,t,_,o){null==cur.toggleMessagesFromCommunityAct&&0==t&&(o?Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(e,{text:_,dir:"auto",shift:[4,-3]}):Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(e,{text:_,dir:"auto"}))},toggleMessagesFromCommunity:function(e,t,_,o){null!=cur.toggleMessagesFromCommunityAct&&(_=cur.toggleMessagesFromCommunityAct),ajax.post("al_groups.php",{act:"a_toggle_messages_from_community",allow:_?1:0,oid:cur.oid,hash:t},{onDone:function(t){val(e,t),cur.toggleMessagesFromCommunityAct=!_},showProgress:Page.actionsDropdownLock.pbind(e),hideProgress:Page.actionsDropdownUnlock.pbind(e)}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(o)},showPageMembers:function(e,t,_){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(e)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.f)("al_page.php",{act:"box",oid:t,tab:_},{cache:1},e)},showHiddenMembersBoxInfo:()=>Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("groups_hidden_members_message_box_title"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("groups_hidden_members_message_box_content")),showPageVideos:function(e,t){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(e)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_video.php?act=a_choose_video_box",{review:1,to_id:t},{cache:1,grey:1})},showPageAudios:function(e,t){return cur.viewAsBox?(cur.viewAsBox(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(e)):!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("/al_audio.php?act=audios_box",{oid:t},{cache:1,params:{width:638}},e)},ownerPhotoFast:function(){var e=ge("owner_photo_bubble_input");e||(e=ge("owner_photo_wrap").appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("input",{type:"file",id:"owner_photo_bubble_input",onchange:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(this,"changed",!0),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"owner_photo_box",oid:cur.oid}).inp=this}}))),e.click()},ownerPhoto:function(e,t){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t||(t={});var o=_extends({stat:["owner_photo.css",jsc("web/owner_photo.js")]},_);Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"owner_photo_box",oid:e||cur.oid,gid:t.gid},o)},openAvatarForm:function(e){window.show(boxLayerBG),window.show(boxLoader),window.show(boxLayerWrap),window.boxRefreshCoords(boxLoader),ajax.post("al_page.php",e,{onDone:function(e){window.initOwnerAvatarEditForm(e),window.hide(boxLayerBG),window.hide(boxLoader),window.hide(boxLayerWrap)},onFail:function(){window.hide(boxLayerBG),window.hide(boxLoader),window.hide(boxLayerWrap)}})},ownerAvatarUpload:function(e){Page.openAvatarForm({act:"owner_avatar_upload",oid:e})},ownerAvatarEdit:function(e,t){Page.openAvatarForm({act:"owner_avatar_edit",oid:e,hash:t})},ownerAvatarSelect:function(e){Page.openAvatarForm({act:"owner_avatar_select",photo:e})},ownerCrop:function(e,t){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=_extends({stat:["owner_photo.css",jsc("web/owner_photo.js")]},_);Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{hash:t,act:"owner_photo_crop",oid:e||cur.oid},o)},ownerPhotoEffects:function(e,t){var _="album"+t+"_0/rev";!cur.pvData||cur.pvShown&&cur.pvListId==_||delete cur.pvData[_],Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.D)(e,_,{additional:{open_pe:1,pe_no_copy:1},loader:1,onHide:function(){cur.pvEditorSaved&&nav.reload()}})},uploadOwnerCover:function(e){return!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"owner_photo_box",oid:e||cur.oid,cover:1},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},editOwnerCover:function(e){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"owner_cover_crop",oid:e||cur.oid},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},deleteOwnerCover:function(e,t,_){_||(_=cur.shareSetOwnPhoto),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)({title:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("groups_delete_cover_title")},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("groups_delete_cover_confirm"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_delete"),(function(o){ajax.post("al_page.php",{act:"owner_cover_remove",oid:e,hash:t,from:cur.module},{showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind(o),onDone:_})}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_cancel"))},editPhoto:function(e){cur.hideOther(),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",extend(e||{},{act:"a_edit_photo"}),{params:{bodyStyle:"padding: 16px 7px"},stat:[jsc("web/tagger.js"),"tagger.css"]})},deletePhoto:function(e,t){cur.hideOther();var _=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)({title:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_warning")},Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("sure_delete_photo"),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_delete"),(function(){ajax.post("al_page.php",{act:"a_delete_photo",hash:t,oid:e},{showProgress:_.showProgress,hideProgress:_.hideProgress})}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_cancel"))},shareCurrent:function(){var e=geByClass1("current_audio",ge("page_current_info"));return e||nav.reload(),(e=e.getAttribute("data-audio"))||nav.reload(),((e=e.split("_")).length<3||"s"!=e[2].substr(0,1))&&nav.reload(),!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("like.php",{act:"publish_box",object:"audio"+e[0]+"_"+e[1],list:e[2]+(e[3]&&"h"==e[3].charAt(0)?"_"+e[3]:"")},{stat:["page.js","page.css","wide_dd.js","wide_dd.css",jsc("web/sharebox.js")]})},playCurrent:function(e,t){var _=e.parentNode;return Page.playLive(t,{showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.u)(_)},hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.i)(_)}})},playLive:function(e,t){Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.l)().playLive(e,t)},audioStatusUpdate:function(e){var t=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.l)("currinfo_audio"),_=Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.l)(),o=AudioUtils.asObject(_.getCurrentAudioLs());ajax.post("al_audio.php",{act:"toggle_status",hash:e,exp:t,id:o?o.fullId:"",oid:vk.id},{onDone:function(e,t){vk.id==cur.oid&&e&&(val("current_info",e),_.setStatusExportInfo(t,!0))},onFail:()=>!0})},audioListenersOver:function(e,t){Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(e,{url:"al_audio.php",params:{act:"listeners_tt",oid:t},slide:15,shift:[24,10,10],ajaxdt:100,showdt:400,hidedt:200,asrtl:1,dir:"auto",typeClass:"audio_tt",appendParentCls:"scroll_fix_wrap"})},showAudioListeners:function(e,t){function _(){var e=ge("listeners_more_link"),t=ge("listeners_more_link_trigger");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.fb)(t)&&boxLayerWrap.scrollHeight-500<boxLayerWrap.scrollTop+boxLayerWrap.offsetHeight&&(hide(t),e.click())}return t.cancelBubble=!0,cur.audioListenersOnDone={onHide:function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window.boxLayerWrap,"scroll",_)},onDone:function(e,t){window.audioListenersOffset=0,t?Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window.boxLayerWrap,"scroll",_):(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)("listeners_more_link"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)("listeners_more_link_trigger"))}},!Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("/al_audio.php",{act:"listeners_box",oid:e},extend(cur.audioListenersOnDone,{cache:1}))},moreAudioListeners:function(e){window.audioListenersOffset+=50;var t=geByClass1("fans_rows"),_=ge("listeners_more_link");ajax.post("/al_audio.php",{act:"listeners_box",oid:e,offset:window.audioListenersOffset},{onDone:function(e,o){for(var i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("div",{innerHTML:e}),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(i);a;a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(i))t.appendChild(a);if(o){var r=ge("listeners_more_link_trigger");Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(r)}else Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)("listeners_more_link_trigger")},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind(_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind(_)})},postsUnseen:function(e){window._postsExtras||(window._postsExtras={});var t=Date.now(),_=!1;for(var o in e)for(var i in e[o])if("module"!=i&&"index"!=i&&"q"!=i&&"block"!=i&&"contain_ids"!=i){var a=window._postsExtras[i];a&&-1==a.diff&&(a.diff=t-a.start,_=!0)}_&&Page.postsClearTimeouts()},postsSeen:function(e){if(vk.id&&e.length&&!vk.pd){window._postsSeenModules||(window._postsSeenModules={}),window._postsExtras||(window._postsExtras={});var t,_=Date.now(),o=Page._adBlockSeenStorage;for(var i in e){var a=Page.getPostModuleCode(e[i].module?e[i].module:""),r=e[i].index,n=e[i].q,l=e[i].block,s=e[i].contain_ids;for(var c in e[i].hash&&!window._postsViewHash&&(window._postsViewHash=e[i].hash),e[i])if("module"!=c&&"index"!=c&&"q"!=c&&"hash"!=c&&"block"!=c&&"contain_ids"!=c){window._postsSeenModules[c]=a;var d=e[i][c],u=ge("post"+c);if(c in o||(o[c]=!(!u||!attr(u,"data-ad-view"))),!o[c]){var p=window._postsSeen[c],b=window._postsSaved[c];if(-1==b||-1==p||1==d&&(b||p))continue}var E=0;if(u){E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(u)[1];var O=geByClass1("replies",u);O&&(E-=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(O)[1])}window._postsSeen[c]=d,t=d,window._postsExtras[c]={start:_,diff:-1,index:r,q:n,block:l,postHeight:E,viewportHeight:window.clientHeight(),session_id:cur.feed_session_id?cur.feed_session_id:"na",contain_ids:s||""},Wall.triggerAdStat(c,e[i].long?"impression_long":"impression")}}t&&Page.postsClearTimeouts()}},postsClearTimeouts:function(){clearTimeout(window._postsSaveTimer),clearTimeout(window._postsSendTimer),++Page._postsClearTimeoutsCalls<10?(window._postsSaveTimer=setTimeout(Page.postsSave,2500),window._postsSendTimer=setTimeout(Page.postsSend,5e3)):(Page._postsClearTimeoutsCalls=0,Page.postsSave(),Page.postsSend())},postsSave:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.checkVersion()||Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.u)(window._postsSeen))return window._postsSeen;var e,t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_sent")||{},_=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen_modules")||{},i=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_extras")||{},a=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),r=Page._adBlockSeenStorage;for(var n in window._postsExtras||(window._postsExtras={}),window._postsSeen){var l=window._postsSeen[n];window._postsExtras[n]&&(i[n]={diff:window._postsExtras[n].diff,index:window._postsExtras[n].index,q:window._postsExtras[n].q,session_id:window._postsExtras[n].session_id?window._postsExtras[n].session_id:"na",postHeight:window._postsExtras[n].postHeight,viewportHeight:window._postsExtras[n].viewportHeight,block:window._postsExtras[n].block,contain_ids:window._postsExtras[n].contain_ids},delete window._postsExtras[n]);var s=n.split("_");"ad"!==s[0]&&"adsite"!==s[0]&&"posthashtag"!==s[0]&&"block"!==s[0]&&"contain_ids"!==s[0]&&(s[0]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(s[0]),s[1]&&"p"==s[1].substr(0,1)||(s[1]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(s[1])));var c=(t[s[0]]||{})[s[1]],d=s&&"block"===s[0]&&4===Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(s[1]),u=s&&"block"===s[0]&&"market-items"===s[1];s[0]!=vk.id&&(d||u||r[n]||!c||-1==l&&c>0)&&(_[s[0]]||(_[s[0]]={},delete o[n]),(!_[s[0]][s[1]]||-1==l&&_[s[0]][s[1]]>0)&&(e=_[s[0]][s[1]]=a*l,o[n]=window._postsSeenModules[n])),window._postsSaved[n]=l}window._postsSeen={},window._postsSeenModules={},e&&(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen",_),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen_modules",o),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_extras",i))},getPostModuleCode:function(e){switch(e){case"feed":return"f";case"public":case"groups":return"c";case"profile":return"p";case"wall":return"w";case"wall_top":return"tw";case"feed_search":return"s";case"feed_news_recent":case"feed_news":return"rf";case"feed_news_top":return"tf";case"feed_recommended":case"feed_recommended_recent":return"d";case"feed_recommended_top":return"e";case"feed_other":return"o";case"feed_friends":case"feed_friends_recent":return"rr";case"feed_friends_top":return"tr";case"feed_podcasts":case"feed_podcasts_top":case"feed_podcasts_recent":return"h";case"feed_groups":case"feed_groups_recent":return"rg";case"feed_groups_top":return"tg";case"feed_videos":case"feed_videos_recent":return"rv";case"feed_videos_top":return"tv";case"feed_photos":case"feed_photos_recent":return"rp";case"feed_photos_top":return"tp";case"feed_list_recent":return"rl";case"feed_list_top":return"tl";case"groups_ads_promoted_post":return"ag";case"public_ads_promoted_post":return"ap";default:return"u"}},postsSend:function(){var e={},t={},_={};if(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.checkVersion())e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen"),t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen_modules")||{},_=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_extras")||{};else{var o=Page.postsSave();for(var i in o){var a=o[i],r=i.split("_");"ad"!==r[0]&&"posthashtag"!==r[0]&&(r[0]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(r[0]),"p"!=r[1].substr(0,1)&&(r[1]=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(r[1]))),e[r[0]]||(e[r[0]]={}),(!e[r[0]][r[1]]||-1==a&&e[r[0]][r[1]]>0)&&(e[r[0]][r[1]]=a)}}var n=[],l=[];for(var s in e){var c=[];for(var d in e[s]){var u=s+"_"+d,p=t[u]||"",b=_[u],E="s"==p&&b&&b.q?b.q:"";E=E.replace(/[,;:]/g,"");var O=b&&b.session_id?b.session_id:"na",m="";b&&"ad"!==s&&"posthashtag"!==s&&(m=(m=":"+[b.diff,b.index,O,E||"",b.block||"",b.contain_ids||""].join(":")).replace(/:+$/,"")),b&&b.postHeight&&l.push([u,b.postHeight,b.viewportHeight].join(":")),c.push(p+(e[s][d]>0?d:-d)+m)}c.length&&n.push(s+"_"+c.join(","))}if(n.length){if(!vk.id)return Page.postsClear();var h={act:"seen",data:n.join(";"),meta:l.join(";")};window._postsViewHash&&(h.hash=window._postsViewHash),ajax.post("al_page.php",h,{onDone:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.checkVersion())return extend(window._postsSaved,window._postsSeen);var t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen")||{},_=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_sent")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_seen_modules");for(var i in e){var a=void 0;for(a in e[i])_[i]||(_[i]={}),-1!=_[i][a]&&(_[i][a]=e[i][a]),(t[i]||{})[a]&&(delete t[i][a],delete o[i+"_"+a]);t[i]&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.u)(t[i])&&(delete t[i],delete o[i+"_"+a])}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen",t),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_sent",_),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen_modules",o),clearTimeout(window._postsCleanTimer),window._postsCleanTimer=setTimeout(Page.postsClean,1e4)}})}},postsClean:function(){if(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle)return Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.b)("waiting ls clean.."),clearTimeout(window._postsCleanTimer),void(window._postsCleanTimer=setTimeout(Page.postsClean,1e4));Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.b)("cleaning ls..");var e=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("posts_sent")||{};for(var _ in t){for(var o in t[_]){var i=t[_][o];e-(i>0?i:-i)>24&&delete t[_][o]}Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.u)(t[_])&&delete t[_]}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_sent",t),Wall.cleanAdsEvents()},postsClear:function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_seen",{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_extras",{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("posts_sent",{}),window._postsSaved={},window._postsSeen={},window._postsSeenModules={},window._postsExtras={},_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set(Wall.LS_ADS_EVENTS,Wall._lsAdsEvents={})},showContacts:function(e,t,_){Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("/al_page.php",{act:"a_get_contacts",oid:e,edit:t},{noEval:!0}).setOptions({onHideAttempt:function(){return cur.reloadAfterClose&&(_?_():(nav.reload({noscroll:!0}),cur.reloadAfterClose=!1)),!0}})},showContactTT:function(e,t){Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(e,{text:()=>t,slideX:15,className:"pedit_tt",hasover:1,shift:[-Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(e)[0]-10,-15,-15],dir:"left",appendParentCls:"scroll_fix_wrap",onCreate:function(){e.tt&&setTimeout(e.tt.hide,3e3)}})},editContact:function(e,t,_,o){var i=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_page.php",{act:"a_edit_contact_box",mid:t,oid:e});return i.setButtons(Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_save"),(function(a){function r(){var r={act:"a_add_contact",mid:t,oid:e,boxhash:i.boxhash};r.hash=_,_||(r.hash=ge("group_contact_hash").value),r.title=val("group_contact_position"),r.phone=val("group_contact_phone"),r.email=val("group_contact_email"),t||!ge("group_contact_memlink")||(r.page=val("group_contact_memlink"),r.page||r.phone||r.email)?ajax.post("al_page.php",r,{onDone:function(t,_){i.hide();var a=Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.b)();a?(a.content(t),ge("public_contacts_list")&&ge("public_contacts_list").sorter&&ge("public_contacts_list").sorter.destroy(),a.execInline(i.boxhash),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.yb)("group_add_contact",ge("public_contacts_list").childNodes.length<30)):Page.showContacts(e,1,o)},onFail:function(e){if(ge("group_contact_error"))return ge("group_contact_error").innerHTML=e,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("group_contact_error_wrap"),!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind(a),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind(a)}):i.hide()}cur.reloadAfterClose=!0,t||cur.lastContact==val("group_contact_memlink")?r():Page.searchContact(e,val("group_contact_memlink"),r)}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_cancel")),!1},searchContact:function(e,t,_){if(!Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)(t))return cur.lastContact="",void(_&&_());t!=cur.lastContact&&ajax.post("al_page.php",{act:"a_search_contact",oid:e,page:t},{onDone:function(e,o,i,a){cur.lastContact=t,ge("group_contact_name").innerHTML=i,ge("group_contact_image").innerHTML=o,ge("group_contact_hash").value=a,e?_?_():hide("group_contact_error_wrap"):(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.q)("group_contact_memlink","",!0),hide("group_contact_error_wrap"))}})},deleteContact:function deleteContact(oid,mid,hash){return cur.reloadAfterClose=!0,ajax.post("al_page.php",{act:"a_delete_contact",oid,mid,hash},{onDone:function onDone(res,script){var box=Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.b)();if(box.content(res),ge("public_contacts_list")&&ge("public_contacts_list").sorter&&ge("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(e){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.d)(e,script)}Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.yb)("group_add_contact",ge("public_contacts_list").childNodes.length<30)}}),!1},reorderContacts:function(e,t,_,o,i){var a=_.id.replace("group_contact_cell",""),r=(o&&o.id||"").replace("group_contact_cell",""),n=(i&&i.id||"").replace("group_contact_cell","");cur.reloadAfterClose=!0,ajax.post("/al_page.php",{act:"a_reorder_contacts",oid:e,mid:a,before:r,after:n,hash:t})},initStatusEditable:function(e){if(e.emojiInited)return!1;e.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(e,{ttDiff:-48,rPointer:!0,controlsCont:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e),noStickers:!0,forceEnterSend:!0,ref:"status",onSend:Page.infoSave,checkEditable:function(){var t=Emoji.editableVal(e);t.length>140&&(Emoji.val(e,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.c)(t.substr(0,140))),Emoji.editableFocus(e,!1,!0))}})}))},infoEdit:function(e){if(cur.viewAsBox)return cur.viewAsBox();var t=ge("current_info").tt;t&&t.hide&&t.hide({fasthide:!0}),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("currinfo_editor","currinfo_fake"),hide("currinfo_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.fb)("currinfo_app")&&!cur.ciApp?(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("currinfo_audio"),hide("currinfo_app")):cur.ciApp&&(hide("currinfo_audio"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("currinfo_app"));var _=ge("current_info").firstChild,o=ge("currinfo_input"),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.O)("a",_);if(Page.initStatusEditable(o,cur.infoOld),cur.infoEditing="my_current_info"==_.className,cur.infoEditing){var a=i?i.innerHTML:_.innerHTML;a=a.replace(/<img[^>]+alt="([^"]+)"[^>]*>/g,"$1"),cur.infoOld=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.c)(Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.H)(a)))}else cur.infoOld="";return window.Emoji?(Emoji.val(o,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.N)(cur.infoOld)),Emoji.editableFocus(o,!1,!0,!0)):(val(o,Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.N)(cur.infoOld)),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.H)(o)),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"keydown",Page.infoKeydown),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(document,"mousedown",Page.infoMousedown),ge("currinfo_save").onclick=Page.infoSave,!1},infoCancel:function(){hide("currinfo_editor","currinfo_fake"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("currinfo_wrap"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.i)("currinfo_save","currinfo_cancel"),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"keydown",Page.infoKeydown),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(document,"mousedown",Page.infoMousedown),cur.ciApp=!1},infoShowShare:function(){if(cur.viewAsBox)return cur.viewAsBox();var e=ge("current_info"),t=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("share_current_info");Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(e,{content:'<div class="content"><div class="checkbox">'+t+"</div></div>",className:"share_tt",init:function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(geByClass1("checkbox",e.tt.container),"click",(function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.c)(this),ajax.post("al_page.php",{act:"share_currinfo",hash:cur.options.info_hash,oid:cur.oid,checked:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.l)(this)},{onDone:Wall.receive})}))},toup:!1,showdt:0,slide:10,shift:[6,8,8],dir:"auto",hidedt:200,onClean:function(){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.i)(geByClass1("checkbox",e.tt.container))}})},infoKeydown:function(e){e.keyCode==KEY.ESC&&Page.infoCancel()},infoMousedown:function(e){for(var t=e.target;t.parentNode;){if("currinfo_editor"==t.id)return;t=t.parentNode}Page.infoCancel()},infoSave:function(){if(cur.viewAsBox)return cur.viewAsBox();var e=ge("currinfo_input"),t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)((window.Emoji?Emoji.editableVal:val)(e)).replace(/\n/g," ");if(t==cur.infoOld||t==Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.N)(cur.infoOld))return Page.infoCancel();t=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)(t).substr(0,140),ajax.post("al_page.php",{act:"current_info",oid:cur.oid,info:t,hash:cur.options.info_hash},{onDone:function(){var e=t?"my":"no",_=t?'<span class="current_text">'+Emoji.emojiToHTML(t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),!0)+"</span>":Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("change_current_info");ge("current_info").innerHTML=ge("currinfo_fake").innerHTML='<span class="'+e+'_current_info">'+_+"</span>",Page.infoCancel();var o=ge("current_info"),i=o.tt;i&&i.el&&(i.destroy(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(o,"mouseover")),t&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(o,"mouseover",Page.infoShowShare),Page.infoShowShare())},onFail:function(e){if(!e)return!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind("currinfo_save"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind("currinfo_save"),stat:[jsc("web/tooltips.js"),"tooltips.css",jsc("web/emoji.js")]})},showGifBox:function(e,t,_,o,i,a){a&&(a.ctrlKey||a.metaKey||a.shiftKey)||(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(a),Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("docs.php",{act:"show_box",doc_id:e,doc_owner_id:t,post_id:_,post_owner_id:o,hash:i},{stat:[window.jsc("web/docs.js"),"docs.css"],params:{white:!0,hideButtons:!0},onDone:function(e,t){if(!vk.widget){if(Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.b)().setOptions({width:t.width+50}),cur.gifAdded&&cur.gifAdded[t.doc]){var _=geByClass1("docs_gif_box_add_"+t.doc);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.pb)(_,"button_action_light_add","button_action_light_done"),val(_,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("wall_doc_added_short"))}var o=geByClass1("page_doc_photo_href",Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.b)().bodyNode);Page.showGif(o)}}}))},showGif:function(e,t,_){if(t&&(t.ctrlKey||t.metaKey))return!0;var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(o),a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(e);cur.gifAdded=cur.gifAdded||{},(cur.activeGif&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif))===i||hasClass(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif),"page_gif_large")&&!_)&&Page.hideGif(cur.activeGif,!1);var r,n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"doc"),l=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"hash"),s=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"add-txt")||"",c=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"add-hash"),d=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"share-txt")||"",u=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"post"),p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"reply"),b=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"preview"),E=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"width"),O=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"height"),m=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"thumb"),h=hasClass(o,"page_gif_large"),w=!t,v=!0;b||(v=!1);var f=e.href+"&wnd=1&module="+cur.module;v?(r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("video",{autoplay:!0,muted:!0,loop:"loop",poster:m,src:f+"&mp4=1",className:"pages_gif_img page_gif_big"},{width:E?E+"px":void 0,height:O?O+"px":void 0,background:h?"transparent url("+m+") no-repeat 0 0":"",backgroundSize:"cover"}),attr(r,"webkit-playsinline",""),browser.ipad&&attr(r,"controls","")):r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("img",{src:f,className:"pages_gif_img"},{visibility:"hidden"});var g=l?'<div class="page_gif_share" onmouseover="showTooltip(this, {text: \''+d+"', black: 1, shift: [7, 6, 6], toup: 0, needLeft: 1})\" onclick=\"return Page.shareGif(this, '"+n+"', '"+l+'\', event)"><div class="page_gif_share_icon"></div></div>':"",P=c?'<div class="page_gif_add" onmouseover="return Page.overGifAdd(this, \''+s+"', '"+n+"', event);\" onclick=\"return Page.addGif(this, '"+n+"', '"+l+"', '"+c+'\', event);"><div class="page_gif_add_icon"></div></div>':"",M=g||P?'<div class="page_gif_actions">'+g+P+"</div>":"",D='<div class="page_gif_progress_icon" style="display:none;">'+Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.qb)(vk.pr_tpl,{id:"",cls:""})+"</div>",C=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("a",{href:e.href,className:"page_gif_preview"+(cur.gifAdded[n]?" page_gif_added":""),innerHTML:D+M,onclick:_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c},{backgroundImage:v?"":(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.T)(a,"backgroundImage")||"").replace(/"/g,"'"),backgroundSize:v?"":(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.T)(a,"backgroundSize")||"").replace(/"/g,"'"),width:E?E+"px":void 0,height:O?O+"px":void 0}),T=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(C);C.appendChild(r),cur.activeGif=C,o!==Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e)&&Wall.sendInsertBeforeError(),o.insertBefore(C,e),hide(e);var y,j=!1,I=function(){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(r);(e[0]||e[1])&&(clearInterval(y),delete r.onload,delete r.onloadeddata,j=!0,hide(T),C.style.background="",C.setAttribute("onclick","return Page.hideGif(this, event);"),addClass(r,"page_gif_big"),addClass(C,"page_gif_loaded"),E&&(r.style.width=E+"px"),O&&(r.style.height=O+"px"),r.style.visibility="",Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("gif_play",0,v?"mp4":"gif",w?1:0))};t?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(T):setTimeout((function(){j||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(T)}),300),v?r.onloadeddata=I:(y=setInterval(I,10),r.onload=I),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(o,"playing",1);var L=w?"autoplay":"manual",A=cur.module||"other",B=u?"post":p?"reply":"";if(Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("gif_show",L,A,B),u){var R=u.split("_"),W=R[0],k=R[1];Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("show_post_gif",1,W,k)}return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(t)},hideGif:function(e,t){if(t&&(t.ctrlKey||t.metaKey))return!0;var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e),o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.B)(e);return _.removeAttribute("data-playing"),t&&removeClass(_,"page_gif_autoplay"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(e),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(o),delete cur.activeGif,!1},overGifAdd:function(e,t,_,o){return cur.gifAdded=cur.gifAdded||{},cur.gifAdded[_]&&!(t=cur.gifAdded[_].tooltip)||Object(_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_14__.c)(e,{text:t,black:1,shift:[7,6,6],toup:0,needLeft:1}),!1},addGif:function(e,t,_,o,i){if(cur.viewAsBox)return Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.j)(i),cur.viewAsBox();cur.gifAdded=cur.gifAdded||{},isObject(e.tt)&&e.tt.hide();var a=hasClass(e,"button_action_light");return cur.gifAdded[t]?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.gifAdded[t].did,hash:cur.gifAdded[t].hash},{onDone:function(){if(a)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.pb)(e,"button_action_light_done","button_action_light_add"),val(e,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("wall_doc_add_short"));else{var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.Y)("page_gif_large",e)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e);removeClass(_,"page_gif_added"),e.tt&&e.tt.el&&e.tt.destroy()}delete cur.gifAdded[t]}}):(addClass(e,"page_gif_adding"),ajax.post("docs.php",{act:"a_add",doc:t,hash:_,add_hash:o},{onDone:function(_,o,i,r){if(Object(_lib_box_utils__WEBPACK_IMPORTED_MODULE_20__.f)(_),a)Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.pb)(e,"button_action_light_add","button_action_light_done"),val(e,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("wall_doc_added_short"));else{var n=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.Y)("page_gif_large",e)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e);addClass(n,"page_gif_added"),e.tt&&e.tt.el&&e.tt.destroy()}cur.gifAdded[t]={tooltip:o,did:i[0],hash:r}}})),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(i)},shareGif:function(e,t,_,o){return cur.viewAsBox?(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.j)(o),cur.viewAsBox()):(isObject(e.tt)&&e.tt.hide(),window.showBox("like.php",{act:"publish_box",object:"doc"+t,list:_},{stat:["wide_dd.js","wide_dd.css",jsc("web/sharebox.js")]}),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(o))},initGifAutoplay:function(){if(!(cur.gifAutoplayScrollHandler||browser.mobile||cur.viewAsBox)){var e=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)("page_header")[1],t=Object(_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_22__.a)((function(){var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.K)("page_gif_autoplay");if(!(!t.length||window.wkcur&&wkcur.shown)){var _,o,i,a=(window.innerHeight||document.documentElement.clientHeight)-e,r=e+a/2,n=Math.min(a,800),l=r-n/2,s=r+n/2,c=t.length-1,d=-1;if(cur.activeGif){var u=cur.activeGif.getBoundingClientRect();if(u.top>l&&u.bottom<s){if(u.top<r&&u.bottom>r)return;var p=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.p)(t,Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif)),b=Math.min(Math.abs(a/2-u.top),Math.abs(a/2-u.bottom));_={el:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif),distanceToMiddle:b},p>-1&&(c=p,d=Math.abs(a/2-u.top)<Math.abs(a/2-u.bottom)?-1:1)}else inArray(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(cur.activeGif),t)&&Page.hideGif(cur.activeGif)}for(;o=t[c];){var E=o.getBoundingClientRect(),O=E.width&&E.height&&E.top>l&&E.bottom<s;if(O&&0==c&&Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()<300){_={el:o,distanceToMiddle:i};break}if(O){if(i=Math.min(Math.abs(a/2-E.top),Math.abs(a/2-E.bottom)),_&&i>_.distanceToMiddle)break;_={el:o,distanceToMiddle:i}}c+=d}if(_&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(_.el)!==cur.activeGif){Page.showGif(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(_.el));for(var m,h=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.p)(t,_.el)+1;m=t[h++];){var w=m.getBoundingClientRect();if(w.width&&w.height){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("video",{src:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(m).href+"&wnd=1&mp4=1",preload:"auto"});break}}}}}),50);cur.gifAutoplayScrollHandler=t,Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"scroll",t),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"resize",t),t(),cur.destroy.push((function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"scroll",t),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"resize",t),t=null,delete cur.gifAutoplayScrollHandler}))}},initVideoAutoplay:function initVideoAutoplay(){if(browser.mobile||cur.videoAutoplayScrollHandler)"feed"===cur.module&&Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("feed_init_video_autoplay",cur.videoAutoplayScrollHandler?"already_init":"bad_browser");else{var isMessagePage="im"===cur.module,chatHeader,chatWrapperUiScroll,chatHeaderHeight,chatInputBox,lastScroll,directionUp,lastAutoPlayVideo,chatHeaderBottom,chatInputBoxTop;if("feed"===cur.module)Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("feed_init_video_autoplay","good_browser");else if(isMessagePage){var chatWrapper=geByClass1("_im_chat_body_abs");chatHeader=geByClass1("im-page--chat-header"),chatWrapperUiScroll=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(chatWrapper,"ui-scroll"),chatHeaderHeight=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)(chatHeader)[1],chatInputBox=geByClass1("im-chat-input"),lastScroll=0,directionUp=!0,lastAutoPlayVideo=null}var canPlayHls=window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),noHlsMaxDuration=300,fixedHeaderHeight=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.S)("page_header")[1],scrollHandler=Object(_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_22__.a)((function(e,t){if(!(layers.visible||window.mvcur&&mvcur.mvShown||nav.objLoc.z||_getFullscreenElement()||window.Calls&&window.Calls.isInActiveCall)){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.K)("page_video_autoplayable"),o=_.length;if(o&&(!t||!cur.videoInlinePlayer||cur.videoInlinePlayer.isAutoplay())){var i,a,r,n=document.body.scrollHeight-fixedHeaderHeight,l=(window.innerHeight||document.documentElement.clientHeight)-fixedHeaderHeight,s=fixedHeaderHeight+l/2,c=Math.min(l,800);isMessagePage?(r=cur.imClassicInterface?n-(l+Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()):chatWrapperUiScroll.api.data.scrollBottom,directionUp=r>=lastScroll,lastScroll=r,(t||r&&(cur.imClassicInterface&&directionUp||!cur.imClassicInterface&&directionUp))&&(_=_.reverse()),i=s-c/2,a=r<100?l:i+c,cur.imClassicInterface?(chatHeaderBottom=chatHeader.getBoundingClientRect().top+chatHeaderHeight,chatInputBoxTop=chatInputBox.getBoundingClientRect().top):(chatHeaderBottom=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.V)(chatHeader)[1]+chatHeaderHeight,chatInputBoxTop=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.V)(chatInputBox)[1]),i<chatHeaderBottom&&(i=chatHeaderBottom),a>chatInputBoxTop&&(a=chatInputBoxTop)):a=(i=(r=Object(_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)())<300?fixedHeaderHeight:s-c/2)+c;var d=cur.videoInlinePlayer;if(d){var u=d.isAutoplay(),p=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.q)("post",d.el),"ad-view"),b=d.el.getBoundingClientRect(),E=b.top>i&&b.bottom<a;if(!p&&u||(E=b.bottom>i&&b.bottom<a||b.top>i&&b.top<a),E){if(u&&"paused"==d.getState()&&d.play(),"ended"!=d.getState())return}else u&&!d.isActiveLive()&&d.pause()}var O=o;for(t&&lastAutoPlayVideo&&(O=_.indexOf(lastAutoPlayVideo));O--;){var m=_[O],h=hasClass(m,"VideoRestriction");if(!(!canPlayHls&&Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(m,"duration"))>noHlsMaxDuration||h)){var w=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(m,"loading"),v=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(m,"playing"),f=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.q)("post",m),"ad-view"),g=(v?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.B)(m):m).getBoundingClientRect();if(g.width&&g.height){var P=g.top>i&&g.bottom<a;if(f&&!d&&(P=g.bottom>i&&g.bottom<a||g.top>i&&g.top<a),P){if(!v&&!w){var M=_getVideoParams(m),D=Date.now();lastAutoPlayVideo=m,Object(_lib_video__WEBPACK_IMPORTED_MODULE_24__.h)(M.video,M.list,{autoplay:1,no_progress:1,cache:1,addParams:M},!1,m),Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("page_show_inline_video",Date.now()-D),_sendLoadEvent(M),cur.videoAutoplayStat={video:M.video,launched:Date.now(),preloaded:_isPreloaded(M.video)}}break}if(!isMessagePage&&g.top<=i)break}}}var C=O+1;if(isMessagePage){if(!r)return;C=O-1}do{var T=_[C];if(T&&(canPlayHls||Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(T,"duration"))<=noHlsMaxDuration)){var y=_getVideoParams(T);_isPreloaded(y.video)||Object(_lib_video__WEBPACK_IMPORTED_MODULE_24__.d)(y,_onVideoDataLoaded,!0);break}}while(++C<o&&!isMessagePage)}}}),50);cur.videoAutoplayScrollHandler=scrollHandler,Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"scroll",scrollHandler),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"resize",scrollHandler),isMessagePage&&!cur.imClassicInterface&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(window,"imScroll",scrollHandler),scrollHandler(),cur.destroy.push((function(){Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"scroll",scrollHandler),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"resize",scrollHandler),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(window,"imScroll",scrollHandler),scrollHandler=null,delete cur.videoAutoplayScrollHandler}))}function _getVideoParams(thumb){var _options$addParams,videoRawId,listId,options,showInlineParamsMatch=attr(thumb,"onclick").match(/showInlineVideo\((.+)\)/);if(showInlineParamsMatch){var paramsStr=showInlineParamsMatch[1];try{var _eval=eval("["+paramsStr+"]"),_eval2=_slicedToArray(_eval,3);videoRawId=_eval2[0],listId=_eval2[1],options=_eval2[2]}catch(e){}}return videoRawId||(videoRawId=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"video"),listId=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"list")),options=options||{},extend(options.addParams,{video:videoRawId,list:listId,ad_data:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"ad-data"),ad_block_id:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"ad-block-id"),post_id:(null===(_options$addParams=options.addParams)||void 0===_options$addParams?void 0:_options$addParams.post_id)||Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.q)("post",thumb),"post-id"),stretch_vertical:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"stretch-vertical")),autoplay_sound:Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.r)(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(thumb,"autoplay-sound")),autoplay:1,from_autoplay:1,module:options.module||currentModule()})}function _isPreloaded(e){var t=!1;return each(window.ajaxCache,(function(_,o){if(0===_.indexOf("/al_video.php?act=show_inline")&&_.indexOf("&video="+e)>0)return t=!0,!1})),t}function _sendLoadEvent(e){ajax.post("al_video.php?act=autoplay_stat",{event:"load",video:e.video,post_id:e.post_id,module:cur.module||""},{})}function _onVideoDataLoaded(e,t){if(e){var _=t[3].player.params[0];VideoPlayer.preload(_)}}function _getFullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}},actionsDropdown:function(e,t){e||!t?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)(e):t()},actionsDropdownHide:function(e,t,_){if(1===t)return _&&_(),hide(e);clearTimeout(cur.actDdHide),cur.actDdHide=setTimeout((function(){Object(_lib_fx__WEBPACK_IMPORTED_MODULE_25__.f)(e,200,hide.pbind("page_actions_sublist")),_&&_()}),150)},actionsDropdownUnhide:function(){clearTimeout(cur.actDdHide)},actionsDropdownLocked:function(e){if(e=ge(e))return hasClass(e,"page_actions_item_lock")},lockTimeout:null,resetLockTimeout:null,actionsDropdownLock:function(e){(e=ge(e))&&(e.classList.contains("PageActionCell")?Object(_web_page_actionCell_helpers__WEBPACK_IMPORTED_MODULE_33__.a)(e):(e=ge(e))&&hasClass(e,"page_actions_item")&&!hasClass(e,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),Page.resetLockTimeout=!1,Page.lockTimeout=setTimeout((function(){if(!Page.resetLockTimeout){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(e,"inner",e.innerHTML),addClass(e,"page_actions_item_lock");var t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.g)("div",{className:"page_actions_item_lock_text"});val(t,e.innerHTML),e.appendChild(t),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.u)(e)}}),500)))},actionsDropdownUnlock:function(e){(e=ge(e)).classList.contains("PageActionCell")?Object(_web_page_actionCell_helpers__WEBPACK_IMPORTED_MODULE_33__.b)(e):(Page.resetLockTimeout=!0,(e=ge(e))&&hasClass(e,"page_actions_item")&&hasClass(e,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),removeClass(e,"page_actions_item_lock"),e.innerHTML=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.l)(e,"inner")))},actionsPreloadFeedLists:function actionsPreloadFeedLists(el,sh){ajax.post("al_feed.php",{act:"a_get_lists_by_item",item_id:cur.oid},{onDone:function onDone(html,js){if(sh&&!ge("page_actions_wrap")){Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(el).appendChild(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.rb)(html),el);try{eval(js)}catch(e){Object(_lib_debug_tools__WEBPACK_IMPORTED_MODULE_19__.d)(e,js)}}},cache:1})},feedListsDDShow:function(){var e=ge("page_actions_item_lists");if(addClass(e,"page_actions_item_unfolded"),ge("page_actions_sublist"))return clearTimeout(cur.feedListsDDHide),void Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.xb)("page_actions_sublist");var t=[];for(var _ in cur.options.feedLists){var o=cur.options.feedLists[_];o.length>20&&(o=Object(_lib_utils_common__WEBPACK_IMPORTED_MODULE_18__.I)(o.substr(0,18))+"..."),t.push('<a id="page_feed_item'+_+'" class="page_actions_item page_actions_subitem'+(cur.options.feedListsSet&&cur.options.feedListsSet[_]?" checked":"")+'" onclick="Page.feedListsCheck(this, '+_+');">'+o+"</a>")}t=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.rb)('<div id="page_actions_sublist" onmouseover="Page.feedListsDDShow();">'+t.join("")+"</div>"),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.C)(e).appendChild(t)},feedListsDDHide:function(){clearTimeout(cur.feedListsDDHide),cur.feedListsDDHide=setTimeout((function(){hide("page_actions_sublist"),removeClass("page_actions_item_lists","page_actions_item_unfolded")}),150)},feedListsCheck:function(e,t){var _=hasClass(e,"checked");_?(cur.options.feedListsSet[t]=0,cur.options.feedListsChanges[t]=-1):(cur.options.feedListsSet[t]=1,cur.options.feedListsChanges[t]=1),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.zb)(e,"checked",!_),cur.feedListsTO&&clearTimeout(cur.feedListsTO);var o=[];for(var i in cur.options.feedListsChanges)o.push(cur.options.feedListsChanges[i]*i);o.length&&(cur.feedListsTO=setTimeout((function(){ajax.post("al_feed.php",{act:"a_toggle_lists",item_id:cur.oid,lists_ids:o.join(","),hash:cur.options.feedListsHash},{onDone:function(){cur.options.feedListsChanges={}}})})))},addAudioPreview:function(e,t){return t[AudioUtils.AUDIO_ITEM_INDEX_CONTEXT]="attach_preview",AudioUtils.drawAudio(t,"inlined")},ownerButtonClick:function(e,t,_){if(!Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.d)(_)){switch(e.type){case"open_url":if(e.is_internal&&e.open_in_layer){var o=nav.fromStr(e.url),i=o[0].replace("/","");return delete o[0],Object(_lib_feature_entries__WEBPACK_IMPORTED_MODULE_12__.H)({w:i},null,null,{ads_params:o})}return nav.go(t,_)}return!1}},postAttachesShowMore:function(e,t){var _=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.D)(e);if(_&&hasClass(_,"post_cropped_attaches")){var o=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.D)(_),i=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.x)(_);["wall_audio_rows","post_media","post_thumbed_media"].some((function(e){return hasClass(o,e)&&hasClass(i,e)}))&&(Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.p)(i).forEach((function(e){o.appendChild(e)})),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(i));var a=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.h)(_.innerHTML);Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.z)(a,_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(_),Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.kb)(e);var r=Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.Y)("post",e),n=r?Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(r,"post-id"):"";if(n){var l="feed"===cur.module&&feed?feed.getModuleRef():cur.module;Object(_lib_stats__WEBPACK_IMPORTED_MODULE_21__.bb)("post_activity","expand_attach",n,l)}}return t&&Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.c)(t)},showLoginBox:()=>(Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.b)("al_login.php",{act:"box"}),!1),showUnblurBox(e,t,_,o,i){var a=Object(_lib_message_box__WEBPACK_IMPORTED_MODULE_15__.d)({title:e},t,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("photos_restriction_button_watch"),(function(e){Page.unblurPhoto(_,o,e,(function(){a.hide(),i&&i()}))}),Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("global_cancel"))},unblurPhoto(e,t,_,o){ajax.post("al_photos.php",{act:"unblur",photo_raw:e,hash:t},{showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.o.pbind(_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_16__.w.pbind(_),onDone:function(t){var _=[];if(t){cur.unblurredOwners||(cur.unblurredOwners=[]);var i=e.split("_")[0];cur.unblurredOwners.push(i),_=document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id^='${i}'], .PostPhotoRestriction--blur[data-photo-id^='${i}'], .PostPhotoRestriction--blurWithText[data-photo-id^='${i}']`)}else _=document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id='${e}'], .PostPhotoRestriction--blur[data-photo-id='${e}'], .PostPhotoRestriction--blurWithText[data-photo-id='${e}']`);if(_.forEach((function(e){removeClass(e,"PhotosRestriction--blur"),removeClass(e,"PostPhotoRestriction--blur"),removeClass(e,"PostPhotoRestriction--blurWithText");var t=e.querySelector(".PostPhotoRestriction__blurTitle"),_=e.querySelector(".PostPhotoRestriction__blurButton");t&&t.parentNode.removeChild(t),_&&_.parentNode.removeChild(_)})),cur.unblurredPhotos||(cur.unblurredPhotos=[]),cur.unblurredPhotos.push(e),cur.pvPhoto&&cur.pvCurData&&cur.pvCurData.photoRaw===e){removeClass(cur.pvPhoto,"ZPhotosRestriction--blur");var a=cur.pvPhoto.querySelector(".ZPhotosRestriction__title"),r=cur.pvPhoto.querySelector(".ZPhotosRestriction__text"),n=cur.pvPhoto.querySelector(".ZPhotosRestriction__button");a&&a.parentNode.removeChild(a),r&&r.parentNode.removeChild(r),n&&n.parentNode.removeChild(n),cur.pvCurData.restrictionBlur=!1,window.Photoview&&window.Photoview.doShow()}o&&o()}})},playVkFestBanner(){window.onDomReady((function(){setTimeout((function(){!function(){var e=ge("vk_fest_2020_banner_video");if(e){var t={video:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.v)(e,"video"),module:currentModule()};Object(_lib_video__WEBPACK_IMPORTED_MODULE_24__.h)(t.video,"",{autoplay:1,no_progress:1,cache:1,addParams:t},!1,e)}}()}))}))},showGroupCallsOnboardingTooltip(){var e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.get("group_calls_tooltip_shown")||0;e<=2&&!cur.groupCallsTooltip&&"im"!==cur.module&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.fb)("side_bar")&&Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.fb)("side_bar_inner")&&!cur.introTooltipShow&&setTimeout((function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("group_calls_tooltip_shown",e+1);var t=()=>{cur.groupCallsTooltip&&cur.groupCallsTooltip.destroy(),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_17__.a.set("group_calls_tooltip_shown",999)};cur.groupCallsTooltip=new ElementTooltip("l_msg",{autoShow:!1,content:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.d)("mail_group_calls_sidebar_tt"),cls:"feature_intro_tt feature_intro_blue_tt",forceSide:"right",width:228,appendTo:Object(_lib_dom__WEBPACK_IMPORTED_MODULE_10__.O)("body"),offset:[7,0,0],onHide:function(){cur.groupCallsTooltip&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(cur.groupCallsTooltip._ttel,"click",t),cur.groupCallsTooltip.destroy())}}),cur.groupCallsTooltip.show(),Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.b)(cur.groupCallsTooltip._ttel,"click",t),cur.destroy.push((function(){cur.groupCallsTooltip&&(Object(_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.i)(cur.groupCallsTooltip._ttel,"click",t),cur.groupCallsTooltip.destroy())}))}),1e3)}};__webpack_exports__.a=Page},"oK+H":function(e,t,_){"use strict";_.d(t,"a",(function(){return a}));var o=_("zxIV"),i=_("k487"),a=(e,t,_)=>{var a=t||"",r=e+a,n=Object(o.J)(r),l=Object(o.L)("post_action_tt_content",n),s=Object(o.L)("post_action_btn_layout",n),c=l.children;if(window.radioBtns["post_settings_btn"+e+a]={val:!1,els:c},!Object(o.ab)(n,"disabled")){var d=[-12*(window.vk.rtl?-1:1),7],u=new i.a(s,{appendTo:n,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:d,content:l,align:"left",onFirstTimeShow:()=>{Object(o.xb)(l)}});return cur[e+a]=u,cur.destroy.push((function(){u&&u.destroy()})),_&&(cur[e+a+"_onChange"]=_),{toooltip:u}}}},oj6k:function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="cancel_16",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="cancel_16"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v16H0z" /><path d="M8 6.727l3.464-3.463a.9.9 0 111.272 1.272L9.273 8l3.463 3.464a.9.9 0 11-1.272 1.272L8 9.273l-3.464 3.463a.9.9 0 11-1.272-1.272L6.727 8 3.264 4.536a.9.9 0 011.272-1.272L8 6.727z" fill="currentColor" fill-rule="nonzero" /></g></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 16 16",id:c,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};p.mountIcon=u,t.a=p},"p4k+":function(e,t,_){"use strict";_.d(t,"b",(function(){return f})),_.d(t,"c",(function(){return g})),_.d(t,"e",(function(){return T})),_.d(t,"a",(function(){return y})),_.d(t,"d",(function(){return j})),_.d(t,"g",(function(){return L})),_.d(t,"f",(function(){return A}));var o=_("jE6c"),i=_("smNX"),a=_("fBgk"),r=_("zxIV"),n=_("7jxN"),l=_("4+be"),s=_("DN6O"),c=_("crIy"),d=_("WQ5g"),u=_("9xR5"),p=_("ZxpX"),b=_("6SSS"),E=_.n(b),O=_("qssJ"),m=function(e,t,_,o,i){var n=function(e,t,_){void 0===_&&(_=!1);for(var o=[],i=0,r=Object.keys(e);i<r.length;i++){var n=r[i],l=Object(a.f)(n);l.isValid&&e[l.value]>0&&o.push(l.value)}return o=o.sort((function(t,_){return(e[_]||0)-(e[t]||0)})).slice(0,t),_&&o.reverse(),o}(t,3),l=e.querySelector(".ReactionsPreview__items"),s=Object(c.b)(_),d=0===Object(u.b)(t),b=E.a.reactions_preview_item;l&&s&&"string"==typeof b?(l.innerHTML=n.map((function(e){var t=s.itemsById[e];if(!t)return"";var _=Object(p.a)({"ReactionsPreviewItem--lite ReactionsPreviewItem--stackOverlayLite":i===O.a.Reply,"ReactionsPreviewItem--post ReactionsPreviewItem--stackOverlayPost":i===O.a.Post});return Object(r.qb)(b,{image_url:t.imagePreviewURL,title:t.title,class:_})})).join(""),e.classList.toggle("ReactionsPreview--empty",d),e.classList.toggle("ReactionsPreview--active",void 0!==o)):console.warn("Unable to render reaction previews",{itemsContainer:l,previewItemTemplate:b,reactionSet:s})},h=_("xqyG"),w=function(){return(w=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var v=function(e){var t=e.getAttribute("data-reaction-counts");if(null===t)return{};var _=t?Object(i.a)(t):void 0;return"object"==typeof _&&null!==_?_:void 0},f=function(e){var t=e.getAttribute("data-reaction-target-object"),_=e.getAttribute("data-reaction-hash"),o=e.getAttribute("data-reaction-set-id");if(null!==o){var i=e.getAttribute("data-reaction-user-reaction-id"),r=i?Object(a.g)(i):void 0,n=e.getAttribute("data-reaction-style-variant"),l=n&&Object(u.d)(n)?n:void 0,s=!!e.getAttribute("data-reaction-without-preview");return{counts:v(e),csrfHash:_,objectRaw:t,reactionSetId:o,styleVariant:l,userReactionId:r,withoutPreview:s}}},g=function(e,t){e.setAttribute("data-reaction-user-reaction-id",void 0===t?"":String(t))},P=function(e){var t,_=null===(t=e.__reactionIconAnimation)||void 0===t?void 0:t.animationItem;_&&(!_._cbs||_.destroy(),delete e.__reactionIconAnimation)},M=function(e,t,_,o){var i;if(!(e!==(null===(i=_.__reactionIconAnimation)||void 0===i?void 0:i.animationURL))&&e||(P(_),t.innerHTML="",_.classList.remove("PostButtonReactions__icon--animationActive")),o&&e){var a=Object(s.b)(e,t,{loadAnimationParams:{autoplay:!0,loop:!1}});Object(h.c)(a,(function(){_.classList.add("PostButtonReactions__icon--animationActive")}));a.addEventListener("complete",(function(){var e;!0===(null==(e=Object(c.a)())?void 0:e.animationShowStaticAfterEnd)&&(_.classList.remove("PostButtonReactions__icon--animationActive"),P(_))})),_.__reactionIconAnimation={animationItem:a,animationURL:e}}},D=function(e,t,_,o){var i=e.querySelector('[data-section-ref="reactions-button-icon"]');if(i){if(t){var a=null==t?void 0:t.imageMenuURL;i.style.backgroundImage="url('"+a+"')",i.setAttribute("aria-label",null==t?void 0:t.title)}else i.style.backgroundImage="",(null==_?void 0:_.title)&&i.setAttribute("aria-label",null==_?void 0:_.title);i.classList.toggle("PostButtonReactions__icon--custom",!!t);var n=null==t?void 0:t.animationURL,l=function(e){var t=e.querySelector(".PostButtonReactions__iconAnimation");return t||(t=Object(r.rb)('<div class="PostButtonReactions__iconAnimation" data-section-ref="reactions-button-icon-animation"></div>'),e.append(t),t)}(i);M(n,l,i,o)}},C=function(e,t,_){e.classList.toggle("PostButtonReactions--icon-active",t),e.classList.toggle("PostButtonReactions--active",t)},T=function(e,t,_,o){var i=!Object(a.c)(t),r=Object(a.a)(_),n=void 0;void 0===t||(n=_.itemsById[t])?(D(e,n,r,o),function(e,t,_){var o=e.querySelector('[data-section-ref="reactions-button-title"]');if(o){var i=null==t?void 0:t.titleColor,a=null==t?void 0:t.backgroundColor,r=i?{"--reaction-button-title-color-light":i.light,"--reaction-button-title-color-dark":i.dark}:{"--reaction-button-title-color-light":null,"--reaction-button-title-color-dark":null},n=a?{"--reaction-button-background-color-light":a.light,"--reaction-button-background-color-dark":a.dark}:{"--reaction-button-background-color-light":null,"--reaction-button-background-color-dark":null},s=w(w({},r),n);if(Object.entries(s).forEach((function(t){var _=t[0],o=t[1];e.style.setProperty(_,o)})),t){o.innerText=t.title;var c=Object(l.l)(Object(l.d)("reactions_button_unset_reaction_title"),{reaction_name:t.title});e.setAttribute("aria-label",c||"")}else(null==_?void 0:_.title)&&(o.innerText=_.title),e.setAttribute("aria-label",Object(l.d)("reactions_button_title")||"")}}(e,n,r),C(e,i),o&&function(e,t){e.setAttribute("data-reaction-last-own-change-time",String(t))}(e,Date.now())):console.error(new Error("Missing reaction meta for "+t+" in set '"+_.id+"'"))},y=function(e){var t=e.getAttribute("data-reaction-last-own-change-time");if(t&&Object(o.k)(t))try{return new Date(Number.parseInt(t)).getTime()||void 0}catch(e){return void console.error(e)}};var j=function(e){return Object(u.b)(e)>0},I=function(e,t){var _=t.counts,o=t.countsPrevious,i=t.objectRaw,a=t.reactionId,r=t.reactionSetId,s=t.styleVariant,p=Object(c.b)(r),b=Object(u.a)(_,p),E=Object(u.c)(b),O=Object(u.b)(_),h=o?Object(u.b)(o):0,w=Object(d.e)(i);w&&(m(w,_,r,a,s),function(e,t,_,o){var i,a,r=Object(l.j)(_,Object(l.d)("reactions_n_reacted","raw")||"%s",!0);e.setAttribute("aria-label",r);var s=function(e){var t;return null!==(t=e.querySelector('[data-section-ref="like-button-count"]'))&&void 0!==t?t:void 0}(e);if(s){if(e.tt&&"object"==typeof e.tt)e.tt.shown||e.tt.showing||null===(a=null===(i=e.tt)||void 0===i?void 0:i.destroy)||void 0===a||a.call(i);var c=Object(l.j)(t,"%s",!0);Object(n.c)(s,c,{allowZero:0!==o,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})}}(w,E,O,h))},L=function(e,t){var _=Object(d.b)(e),o=t.counts;_&&o?function(e,t){var _=f(e);_&&_.objectRaw&&I(0,{counts:t,countsPrevious:_.counts,objectRaw:_.objectRaw,reactionId:_.userReactionId,reactionSetId:_.reactionSetId,styleVariant:_.styleVariant})}(_,o):console.warn("Unable to update object reactions",{objectRaw:e,options:t})},A=function(e,t){var _=t.counts,o=Object(d.b)(e);o&&function(e,t){e.setAttribute("data-reaction-counts",JSON.stringify(t))}(o,_)}},p6Sd:function(e,t,_){"use strict";_.d(t,"a",(function(){return E})),_.d(t,"b",(function(){return O})),_.d(t,"c",(function(){return m}));var o,i=_("q1tI"),a=_.n(i),r=_("jmhT"),n=_("BiHW"),l=_("6krn"),s=_("BD02"),c=_("EasH"),d=_("HLtZ"),u=_("WfnU"),p=_("PU8N"),b=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function _(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(_.prototype=t.prototype,new _)}),E=604,O=468,m=function(e){function t(t){var _=e.call(this,t)||this;return _.onSaveCrop=function(){var e=_.props,t=e.onSave,o=e.onClose,i=e.coverUrl,a=_.crop;a&&(_.setState({isLoading:!0}),Object(p.b)(i,a.left,a.top,a.width,a.height).then((function(e){return t(_.getCropForSaving(a),e.src)})).then(o).catch((function(e){_.setState({isLoading:!1}),Object(c.d)(Object(l.b)("global_error"),e||Object(l.b)("global_unknown_error")),console.error(e),Object(d.c)(new Error("error with onSaveCrop"+(e?": "+e:"")))})))},_.onCropUpdate=function(e){_.crop=e},_.state={isLoading:!1},_}return b(t,e),t.prototype.render=function(){var e=this.props,t=e.onClose,_=e.coverUrl,o=e.coverHeight,i=e.coverWidth,c=e.thumbHeight,d=e.thumbWidth,p=e.crop,b=this.state.isLoading;return a.a.createElement(r.a,{className:"NarrativeCoverCropper",appearance:"white",title:Object(l.b)("stories_cover_cropper_title"),onClose:t,hasScroll:!1},a.a.createElement("div",{className:"NarrativeCoverCropper__inner"},a.a.createElement("div",{className:"NarrativeCoverCropper__info"},a.a.createElement("div",null,Object(l.b)("stories_cover_cropper_info_1")),a.a.createElement("div",null,Object(l.b)("stories_cover_cropper_info_2"))),a.a.createElement("div",{className:"NarrativeCoverCropper__frame"},a.a.createElement(s.a,{className:"NarrativeCoverCropper__tagger",imgSrc:_,imgHeight:o,imgWidth:i,previewHeight:c,previewWidth:d,minHeight:75,minWidth:75,isSquare:!0,preview100:!0,cropRect:this.getCropForTagger(p),onCropUpdated:this.onCropUpdate})),a.a.createElement("div",{className:"NarrativeCoverCropper__footer"},a.a.createElement(u.default,{loading:b,onClick:this.onSaveCrop},Object(l.b)("stories_cover_next")),a.a.createElement(n.a,{disabled:b,appearance:"secondary",onClick:t},Object(l.b)("stories_cover_back")))))},t.prototype.getCropForTagger=function(e){var t,_=this.props,o=_.coverWidth,i=_.coverHeight;if(e){var a=Math.round(e.width*o),r=Math.round(e.height*i);if(Math.abs(r-a)>1)return t;r=a,t={top:Math.round(e.y*i),left:Math.round(e.x*o),width:a,height:r}}return t},t.prototype.getCropForSaving=function(e){var t=this.props,_=t.coverWidth,o=t.coverHeight;return{y:e.top/o,x:e.left/_,width:e.width/_,height:e.height/o}},t}(a.a.Component)},ppaw:function(e,t,_){"use strict";var o,i,a,r;_.d(t,"a",(function(){return o})),_.d(t,"c",(function(){return i})),_.d(t,"d",(function(){return a})),_.d(t,"b",(function(){return r})),function(e){e[e.create=0]="create",e[e.edit=1]="edit"}(o||(o={})),function(e){e.all="all",e.selected="selected"}(i||(i={})),function(e){e.box="box",e.page="page"}(a||(a={})),function(e){e.main="main",e.cover="cover"}(r||(r={}))},pruO:function(e,t,_){"use strict";_.d(t,"d",(function(){return o})),_.d(t,"b",(function(){return i})),_.d(t,"c",(function(){return a})),_.d(t,"a",(function(){return r}));var o={wall:"wall",wall_reply:"wall_reply"},i={width:96,height:96},a={width:32,height:32},r="reactions_counts"},qssJ:function(e,t,_){"use strict";_.d(t,"a",(function(){return o}));var o={Post:"post",Reply:"reply"}},qwyz:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("HEwt"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("rGqo"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("rE2o"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ioFf"),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("OG14"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a1Th"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("VRzm"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("Oyvg"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("KKXr"),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("91GP"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("pIFo"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("SRfc"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("zxIV"),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("/PiP"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("Egk5"),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("FWc3"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("v+DW"),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("Xrg9"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("t7n3"),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("kcIO"),_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("XzvV"),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("lXE5"),_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("7jxN"),_web_lib_video__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("Ia1d"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("4+be"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("cGUQ"),_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("t/FQ"),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("QGEU"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("98sY"),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("o7bv"),_web_lib_utils__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("aong"),_web_donut__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("7GuL"),_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("DzCs"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("YIAi"),_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("QxcO"),_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("te1c"),_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("hzb7"),_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("jE6c"),_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("oK+H"),_web_wall_deep_replies_utils__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("F5gA"),_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("bWc2"),_web_wall_wall_post_render__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("zqir"),_web_wall_wall_utils__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("34p4"),_internal_nospam_common__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("FThC"),_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("DfBR"),_web_lib_date__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__("1BRX"),_shared_donut_stats_donut_log__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__("g4nd"),_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__("6krn"),_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__("3EzW"),_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__("7ckd"),_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__("eKS6"),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__("W9Tc");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var _=arguments[t];for(var o in _)Object.prototype.hasOwnProperty.call(_,o)&&(e[o]=_[o])}return e}).apply(this,arguments)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var _=Object.prototype.toString.call(e).slice(8,-1);return"Object"===_&&e.constructor&&(_=e.constructor.name),"Map"===_||"Set"===_?Array.from(_):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var _=0,o=new Array(t);_<t;_++)o[_]=e[_];return o}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var _=[],o=!0,i=!1,a=void 0;try{for(var r,n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(_.push(r.value),!t||_.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return _}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var Wall={LS_ADS_EVENTS:"ads.events",deleteAll:function(e,t,_){ajax.post("al_wall.php",{act:"delete_all",post:t,hash:_},{onDone:function(t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e));_.oldt=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_,t)},showProgress:function(){hide(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"progress"})))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e))}})},restoreAll:function(e,t,_){var o=Math.floor(1e5*Math.random());cur.wallRnd=o,ajax.post("al_wall.php",{act:"restore_all",post:t,hash:_,rnd:o},{onDone:function(t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_,_.oldt)},showProgress:function(){hide(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{className:"progress_inline"})))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e))}})},deleteThread:function(e,t,_){ajax.post("al_wall.php",{act:"delete_thread",post:t,hash:_,from_deleted:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t),"reply_deleted")},{onDone:function(_){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("dld_inner",e);if(o)o.oldElements=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o,_);else{var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t),a=geByClass1("reply_wrap",i);hide(a),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{id:"post_del"+t,className:"dld",innerHTML:'<span class="dld_inner">'+_+"</span>"}),i.appendChild(o)}hide("replies_wrap_deep"+t)},showProgress:function(){hide(e);var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post_actions",e);if(t)addClass(t,"post_actions_progress");else{var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e);_||(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"progress"}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e).appendChild(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_))}},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e);var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post_actions",e);t?removeClass(t,"post_actions_progress"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e))}})},restoreThread:function(e,t,_){ajax.post("al_wall.php",{act:"restore_thread",post:t,hash:_},{onDone:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("replies_wrap_deep"+t),_.oldElements)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_,_.oldElements);else{var o=geByClass1("reply_wrap","post"+t);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("post_del"+t)}},showProgress:function(){hide(e);var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e);t||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"progress"}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e).appendChild(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(t))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e))}})},block:function(e,t,_,o,i){ajax.post("al_wall.php",{act:"block",post:t,hash:_,bl:o,from:i},{onDone:function(t){o?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e).insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{innerHTML:t}),e),hide(e)):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e)))},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.u)(e,"post_inline_progress","post_inline_progress",!0)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("post_inline_progress")}})},blockEx:function(e,t){Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("groupsedit.php",{act:"bl_edit",name:"id"+t,gid:e,auto:1},{stat:["page.css","ui_controls.js","ui_controls.css"],dark:1})},withMentions:!(browser.mozilla&&browser.version.match(/^2\./)||browser.mobile),editPost:function(e,t,_,o,i){if(cur.editingPost&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpe_text")){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wall_posts",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpe_text"));if(!a||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(a))return o&&o(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.q)("wpe_text");Wall.cancelEdit()}cur.editingPost=[t],Wall.withMentions?stManager.add(["ui_controls.css","ui_controls.js","mentions.js",jsc("web/wall_edit.js")]):stManager.add([jsc("web/wall_edit.js")]),ajax.post("al_wall.php",extend({act:"edit",post:t,mention:Wall.withMentions?1:""},_),{onDone:function(){var e=Array.prototype.slice.call(arguments);if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(e[4])&&cur.options&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(cur.options.filter_media_types)){var o=[];each(e[4],(function(e,t){each(cur.options.filter_media_types,(function(e,_){if(t[0]===_[0])return o.push(_),!1}))})),e[4]=o}e.unshift(t),_&&_.fromAds&&e.push(_.fromAds),WallEdit.editPost.apply(window,e),i&&i()},onFail:function(){cur.editingPost=!1,o&&o()},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(e):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(e):addClass(geByClass1("post_actions","post"+t),"post_actions_progress")},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(e):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(e):removeClass(geByClass1("post_actions","post"+t),"post_actions_progress")},noSort:!0})},fixPost:function fixPost(link,post,hash,value){return ajax.post("al_wall.php",{act:"a_fix_post",post,hash,value},{onDone:function onDone(js){if(js)try{eval(js)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(e,js)}var postEl=cur.wallLayer==post?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+post);each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_fixed"),(function(){removeClass(this,"post_fixed")})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(postEl,"post_fixed",value),link&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(link,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)(value?"wall_unfix_post":"wall_fix_post")),link.onclick=function(){return Wall.fixPost(link,post,hash,value?0:1)}),cur.onWKFix&&(cur.onWKFix(value),delete cur.onWKFix)},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(link,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(link):_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind("wpe_fix"+post)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(link,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(link):_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind("wpe_fix"+post)}}),!1},cancelEdit:function(e){if(cur.editingPost){if(!0===e&&cur.editingPost[0].match(/^-?\d+_/))return;window.WallEdit?WallEdit.cancelEditPost():cur.editingPost=!1}},searchWall:function(){},switchTabContent:function(e){switch(hide("page_wall_posts","page_postponed_posts","page_suggested_posts","page_search_posts","page_top_posts","page_archive_posts","page_donut_posts"),e){case"own":case"all":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_wall_posts");break;case"postponed":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_postponed_posts"),hide("wall_more_link");break;case"suggested":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_suggested_posts");break;case"search":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_search_posts");break;case"top":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_top_posts");break;case"archive":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_archive_posts");break;case"donut":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_donut_posts")}},switchWall:function(e,t,_){var o;if(t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(t))return!0;if(_||(_="own"==cur.wallType?"all":"own"),t&&"click"==t.type&&t.clientX&&t.offsetX&&cur.wallTab==_&&cur.wallType==_&&"top"!==_)return nav.go(e,t);if("postponed"==cur.wallTab&&wall.checkPostponedCount(),"archive"!==cur.wallTab&&"archive"!==_||((cur.wallLayer?wkcur:cur).wallMyDeleted={}),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(cur.wallArchiveFeatureTooltipHide)&&cur.wallArchiveFeatureTooltipHide(),!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(_,["top","archive","donut"])){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts");removeClass(i,"own"),removeClass(i,"all"),addClass(i,_)}cur.wallType=_,cur.wallTab=_,uiTabs.switchTab(e),uiTabs.hideProgress(e),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(_,["top","archive","donut"])?(cur.baseWallModule=cur.module,cur.module="wall_"+_,cur.topWallFeatureTT&&cur.topWallFeatureTT.hide()):cur.baseWallModule&&(cur.module=cur.baseWallModule,delete cur.baseWallModule);var a="donut"===_&&Wall.cantAccessDonutPosts();return Wall.hasPosts()||a?(Wall.update(),Wall.showWall()):(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,cur.wallArchiveRestored=0,cur.wallArchiveArchived=0,cur.wallArchiveRolledback=0,cur.wallDonutNextFrom=0,"top"===_?delete cur.wallTopFinished:"archive"===_?delete cur.wallArchiveFinished:"donut"===_&&delete cur.wallDonutFinished,uiTabs.showProgress(e),Wall.showMore(0,e)),(null==e||null===(o=e.dataset)||void 0===o?void 0:o.donutLogEvent)&&Object(_shared_donut_stats_donut_log__WEBPACK_IMPORTED_MODULE_48__.a)(e.dataset.donutLogEvent),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)},resetWall:function(){if(cur.wallType&&cur.wallTab){var e=geByClass1("_wall_tab_"+cur.wallType);e&&(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,(cur.wallLayer?wkcur:cur).wallMyDeleted={},"top"===cur.wallType?delete cur.wallTopFinished:"archive"===cur.wallType?delete cur.wallArchiveFinished:"donut"===cur.wallType&&delete cur.wallDonutFinished,uiTabs.showProgress(e),Wall.showMore(0,e,!0))}},hasPosts:function(e){e=e||cur.wallType;var t=Wall.getPostsWrap(e);return!!geByClass1("post",t)},getPostsWrap:function(e){switch(e){case"archive":return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_archive_posts");case"top":return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_top_posts");case"donut":return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_donut_posts");default:return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts")}},showSuggested:function showSuggested(ev,rows,notAll){if(ev&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(ev))return!0;if(!cur.oid)return!1;var el=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_suggest");if(el=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(el,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.F)("#page_wall_suggest_more .ui_tab_group_item"):geByClass1("ui_tab",el),!el)return!1;if(uiTabs.switchTab(el),cur.wallTab="suggested",delete cur.suggestedDeletedCount,void 0!==rows)wall.suggestLoaded(rows,notAll);else{if(cur.suggestedLoading)return!1;var curOid=cur.suggestedLoading=cur.oid;uiTabs.showProgress(el),ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid},{onDone:function onDone(rows,notAll,js,count){if(js)try{eval(js)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(e,js)}cur.suggestedLoading=!1,uiTabs.hideProgress(el),Wall.updateTabCounter("page_wall_suggested_cnt",count),curOid===cur.oid&&"suggested"==cur.wallTab&&wall.suggestLoaded.apply(window,arguments)}})}return!1},deleteSuggested:function(e,t,_,o){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(o)){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(o);var i=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)({title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_action_confirmation"),onHide:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(o)}},Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_delete_suggested_box"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_delete_suggested_btn"),(function(o){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(o)||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(o),ajax.post("al_wall.php",{act:"delete_suggested",post_id:e,hash:_,group_id:t},{onDone:function(e){if("full_own"==cur.wallType||"full_all"==cur.wallType){var t=(Math.ceil(e/cur.pgPerPage)-1)*cur.pgPerPage;t<cur.pgOffset&&(t>0?nav.objLoc.offset=t:delete nav.objLoc.offset,nav.setLoc(nav.objLoc)),nav.reload()}else Wall.showSuggested();i.hide()},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(o)}))}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_cancel"))}},suggestLoaded:function(e,t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_suggested_posts",e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)("wall_more_link",t),wall.switchTabContent("suggested")},suggestMore:function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_suggested_posts"),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link");Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(t)||ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid,offset:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post",e).length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("dld",e).length},{onDone:function(_,o){for(var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:_}),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(i);a;)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(a.id)||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"post")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(a):e.appendChild(a),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(i);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(t,o)},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(t),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(t)})},suggestUpdate:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_suggests_count"),_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t));t&&(-1!==e&&1!==e||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,_+=e),Wall.updateTabCounter("page_wall_suggested_cnt",_))},suggestPublished:function(e,t,_){if(cur.onepost)return nav.go("/wall"+cur.oid);if(Wall.suggestUpdate(-1),Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(t),cur.wallMyDeleted[e]=1,cur.editingPost=!1,Wall.deinitComposer(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpe_text")),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),cur.postWpeIsPoster=!!cur.posterWpeSendParams,cur.posterWpe&&cur.posterWpeSendParams&&WallEdit.posterDestroy(),_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_postponed_posts",_),wall.postponeUpdateCount()),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_suggests_count")))Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("post"+e);else{var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_rmenu");o?(geByClass1("ui_rmenu_item",o).click(),hide(geByClass1("_wall_menu_suggested",o))):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")&&(geByClass1("ui_tab",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")).click(),wall.updateTabVisibility("page_wall_suggest",!1))}},showDonutWall:function(e){if(!cur.oid)return!1;Wall.updateTabVisibility("page_wall_donut",!0);var t=Wall.getWallTabLink("donut");if(!t)return!1;uiTabs.switchTab(t),cur.wallTab="donut",cur.wallType="donut",void 0!==e&&Wall.donutWallSetRows(e)},donutWallSetRows(e){var t=Wall.getPostsWrap("donut");t&&(t.innerHTML=e,Wall.switchTabContent("donut"),Wall.update())},getWallTabLink:e=>{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_"+e);return(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.F)(`#page_wall_${e}_more .ui_tab_group_item`):geByClass1("ui_tab",t))||null},showPostponedFull:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("ui_rmenu_postponed"),_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts");if(!t||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"ui_rmenu_item_sel")||!_){var o={0:nav.objLoc[0],postponed:1};return nav.go(o)}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(_,e),FullWall.updateSummary(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post",_).length)},showPostponed:function(e,t){if(e&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(e))return!0;if(!cur.oid)return!1;var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_postponed");if(!(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.F)("#page_wall_postponed_more .ui_tab_group_item"):geByClass1("ui_tab",_)))return!1;if(uiTabs.switchTab(_),cur.wallTab="postponed",void 0!==t)Wall.postponedLoaded(t);else{if(cur.postponedLoading)return!1;var o=cur.postponedLoading=cur.oid;uiTabs.showProgress(_),ajax.post("al_wall.php",{act:"get_postponed",owner_id:cur.oid},{onDone:function(e){cur.postponedLoading=!1,uiTabs.hideProgress(_),o===cur.oid&&"postponed"==cur.wallTab&&Wall.postponedLoaded(e)}})}return!1},postponedLoaded:function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_postponed_posts",e),wall.postponeUpdateCount(),wall.switchTabContent("postponed")},postponeUpdateCount:function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_postponed_posts"),t=e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post",e).length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("dld",e).length||0;e&&Wall.updateTabCounter("page_wall_postponed_cnt",t)},checkPostponedCount:function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post","page_postponed_posts"),t=0;each(e,(function(){var e=this.id.replace("post","");cur.wallMyDeleted[e]||t++})),t||wall.updateTabVisibility("page_wall_postponed",!1)},updateTabCounter:function(e,t){t=t?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(t,"%s",!0):"",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)(e).forEach((function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,t);var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"ui_tab_group_item")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"default-label",_.innerHTML)}))},updateTabVisibility:function(e,t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_more_tab");if(_)if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(_))if(t){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"unshown")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e+"_more","unshown")){var o=!1;cur.wallTabsMorePriority.forEach((function(t){o||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"unshown")||(addClass(t,"unshown"),removeClass(t+"_more","unshown"),removeClass(e,"unshown"),o=!0)})),o||removeClass(e+"_more","unshown")}}else{var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"unshown"))addClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e+"_more"),"unshown");else{addClass(i,"unshown");var a=cur.wallTabsLimit-1-Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_46__.a)(_).length;if(a>0){var r=a;cur.wallTabsMorePriority.forEach((function(e){if(!(r<=0)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e+"_more");t&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"unshown")&&(removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e),"unshown"),addClass(t,"unshown"),r--)}}))}}var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("ui_tab_group_item",_);n.length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("unshown",_).length<=1&&(n.forEach((function(e){e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"unshown")||(removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e.id.replace(/_more$/,"")),"unshown"),addClass(e,"unshown"))})),addClass(_,"unshown"))}else{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e),"unshown",!t);var l=Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_46__.a)(_).length;if(l>cur.wallTabsLimit){var s=l-(cur.wallTabsLimit-1);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("ui_tab_group_item",_).forEach((function(e){addClass(e,"unshown")})),cur.wallTabsMorePriority.forEach((function(e){if(!(s<=0)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e);t&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"unshown")&&(addClass(t,"unshown"),removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e+"_more"),"unshown"),s--)}})),removeClass(_,"unshown"),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.bb)("wall_more_tab_shown",cur.oid)}}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e),"unshown",!t)},postponedPublished:function(e,t){if(cur.onepost)return nav.go("/wall"+cur.oid);"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),t&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(t),cur.wallMyDeleted[e]=1;var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_postponed_posts")),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);if(_.length<=1&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(o,_)){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_rmenu");i?(geByClass1("ui_rmenu_item",i).click(),hide(geByClass1("_wall_menu_postponed",i))):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")&&(geByClass1("ui_tab",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")).click(),wall.updateTabVisibility("page_wall_postponed",!1))}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(o),wall.postponeUpdateCount()},onWallSearchSend:function(e,t){t?Wall.showSearch(t,0):Wall.hideSearch()},showSearch:function(e,t){if(cur.searchLoading&&cur.searchLoading==e||!cur.oid)return!1;var _=cur.oid;cur.wallQuery=cur.searchLoading=e,"search"!=cur.wallTab&&(cur.prevWallTab=cur.wallTab,cur.wallTab="search");var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link"),i=+new Date;return ajax.post("al_wall.php",{act:"s",search:1,q:e,owner_id:cur.oid,offset:t,inline:1,owners_only:1},{onDone:function(a,r,n){if(_===cur.oid&&"search"==cur.wallTab){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_search_posts");t||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(l,""),l.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(a)),wall.switchTabContent("search"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(o,r<n),o.onclick=Wall.showSearch.pbind(e,r);var s=cur.oid>0?_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.ab:_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.Z,c=+new Date-i;Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.t)(s,0,n,e,0,0,c)}},showProgress:function(){uiSearch.showProgress("wall_search"),t&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(o)},hideProgress:function(){cur.searchLoading=!1,uiSearch.hideProgress("wall_search"),t&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(o)}}),!1},hideSearch:function(){if(delete cur.wallQuery,cur.prevWallTab){var e=(cur.oid,_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.ab);Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.s)(e),cur.wallTab=cur.prevWallTab,cur.prevWallTab=!1,wall.switchTabContent(cur.wallTab),wall.update()}},publishPostponedPost:function(e,t,_){Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("publish_postponed_title"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("publish_postponed_confirm"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("publish_postponed_btn"),(function(){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().hide(),ajax.post("al_wall.php",{act:"publish_postponed",post:e,from:_,hash:t},{onDone:Wall.postponedPublished.pbind(e),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind("wpe_publish"+e),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind("wpe_publish"+e)})}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_cancel"))},publishFreeDonutCopy:function(e,t,_,o){var i=e.currentTarget,a=o?{title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_warning"),content:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_publish_donut_as_free_confirmation_warn")}:{title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_publish_donut_as_free_confirmation_title"),content:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_publish_donut_as_free_confirmation_confirm")},r=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(a.title,a.content,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_publish_donut_as_free_confirmation_btn"),()=>{var e=()=>{r.hide()},o=r.btns.ok[0];ajax.post("al_wall.php",{act:"publish_free_donut_copy",post_id:t,hash:_},{onDone:t=>{Wall.publishFreeDonutCopyDone({menuActionEl:i,message:t}),e()},onFail:()=>{e()},showProgress:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(o)},hideProgress:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(o)}})},Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_cancel"))},publishFreeDonutCopyDone(e){var t=e.message,_=e.menuActionEl;"full_own"!==cur.wallType&&"full_all"!==cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),t&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(t,{timeout:3e3}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_)},cmp:function(e,t){var _=e.length,o=t.length;return _<o?-1:_>o?1:e<t?-1:e>t?1:0},receive:function(e,t,_,o){o=!0===o;var i,a,r,n,l="top"===(_=_||cur.wallType),s="archive"===_,c="donut"===_,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:e}),u=!!cur.options.revert,p=Wall.getPostsWrap(_),b=[],E=[],O=["page_top_posts","page_wall_posts","page_archive_posts","page_donut_posts"],m=0;if(o)E=O;else{var h=[[s,"page_archive_posts"],[l,"page_top_posts"],[c,"page_donut_posts"],[!0,"page_wall_posts"]].find(e=>_slicedToArray(e,1)[0]),w=_slicedToArray(h,2)[1];E=O.filter(e=>e!==w),r=u?p.firstChild:p.lastChild}function v(e){return!!(e&&e.tagName&&"div"===e.tagName.toLowerCase()&&e.id&&"post"===e.id.substr(0,4))&&e.id}E.forEach((function(e){if("page_donut_posts"!==e||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_donut_info"))for(var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e));t;){var _=t;t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(t),_.tagName&&"input"===_.tagName.toLowerCase()||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_)}}));for(var f=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(u?d.firstChild:d.lastChild);f;f=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(u?d.firstChild:d.lastChild))if("input"!=f.tagName.toLowerCase()){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(f,"post_fixed")||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(f.id))if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(f,"_ads_promoted_post"))b.push({el:f,beforePost:v(u?d.firstChild:i),afterPost:v(u?i:d.lastChild)});else{for(;r&&r.tagName&&"div"==r.tagName.toLowerCase()&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(r,"post_fixed")&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(r,"_ads_promoted_post")||!l&&!s&&Wall.cmp(r.id,f.id)<0);)r=u?r.nextSibling:r.previousSibling;++m,r?Wall.cmp(r.id,f.id)?(n=r,(a=u?r.previousSibling:r.nextSibling)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"_ads_promoted_post")&&(n=a),u?(p!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(n)&&Wall.sendInsertBeforeError(),p.insertBefore(f,n)):(p!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(n.nextSibling)&&Wall.sendInsertBeforeError(),p.insertBefore(f,n.nextSibling))):(p.replaceChild(f,r),r=f,--m):u?p.appendChild(f):p.insertBefore(f,p.firstChild),i=f,Object(_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_31__.c)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.O)("textarea",f),{fast:1})}}else{var g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(f.id);g?p.replaceChild(f,g):p.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(f,p.firstChild):p.appendChild(f)}if(b.length)for(var P=0,M=b.length;P<M;++P){var D=b[P];if(D.beforePost||D.afterPost){for(var C="no_position",T=u?p.firstChild:p.lastChild;T;T=u?T.nextSibling:T.previousSibling){n=null;var y=v(T);if(y){if(D.beforePost===y?n=T:D.afterPost===y&&(n=T.nextSibling),n&&(n.previousSibling&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n.previousSibling,"_ads_promoted_post")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n,"_ads_promoted_post"))){n=null,C="ads_sibling";break}if(n){p!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(n)&&Wall.sendInsertBeforeError(),p.insertBefore(D.el,n),C=!1;break}}}C&&Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.bb)("debug_watch",1,"js_page_ads_promoted_post_no_position",C)}}l&&!m?cur.wallTopFinished=cur.oid:s&&!m?cur.wallArchiveFinished=cur.oid:c&&!m&&(cur.wallDonutFinished=cur.oid),"full_own"!==_&&"full_all"!==_||(Pagination.recache(m),FullWall.updateSummary(cur.pgCount)),Wall.update(),wall.addReplyNames(t),Wall.updateMentionsIndex(),m&&Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.l)().updateCurrentPlaying()},showMore:function(e,t,_){if(cur.viewAsBox)return cur.viewAsBox();if(!cur.wallLayer){if("suggested"===cur.wallTab)return Wall.suggestMore();if(!(cur.wallTypeLoading&&cur.wallTypeLoading[cur.wallType]||"top"===cur.wallType&&cur.wallTopFinished===cur.oid||"archive"===cur.wallType&&cur.wallArchiveFinished===cur.oid||"donut"===cur.wallType&&cur.wallDonutFinished===cur.oid)){var o=cur.wallType,i="top"===o,a="archive"===o,r="donut"===o,n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link"),l=cur.wallLoading=cur.oid,s=i&&!!cur.wallTopOnlyCache,c="";0!==e&&(c=a?cur.wallArchiveNextFrom:i?cur.wallTopNextFrom:r?cur.wallDonutNextFrom:cur.wallNextFrom),cur.wallTypeLoading=cur.wallTypeLoading||{},cur.wallTypeLoading[o]=!0,_=!0===_&&!e,ajax.post("al_wall.php",{act:"get_wall",owner_id:cur.oid,offset:e,type:o,fixed:cur.options.fixed_post_id||"",wall_start_from:c,onlyCache:s},{onDone:function(n,s,c,d){return t&&uiTabs.hideProgress(t),l!==cur.oid||o!==cur.wallType?(delete cur.wallLoading,void delete cur.wallTypeLoading[o]):i&&isObject(n)&&n.wait?(cur.wallTopLoadingDelay=cur.wallTopLoadingDelay?cur.wallTopLoadingDelay+100:200,void(cur.wallTopLoadingDelay<500?setTimeout((function(){delete cur.wallLoading,delete cur.wallTypeLoading[o],Wall.showMore(e)}),cur.wallTopLoadingDelay):(delete cur.wallLoading,delete cur.wallTypeLoading[o],cur.wallTopOnlyCache=!1,Wall.showMore(e)))):(delete cur.wallTopLoadingDelay,cur.wallVideos&&each(c,(function(e,t){cur.wallVideos[e]&&(cur.wallVideos[e].list=cur.wallVideos[e].list.concat(t.list))})),a?cur.wallArchiveNextFrom=d:i?cur.wallTopNextFrom=d:r?cur.wallDonutNextFrom=d:cur.wallNextFrom=d,void setTimeout((function(){Wall.receive(n,s,o,_),e||o!==cur.wallType||Wall.showWall(),delete cur.wallLoading,delete cur.wallTypeLoading[o]}),0))},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(n),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(n)})}}},showWall:function(){wall.switchTabContent(cur.wallType);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("wall_module",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts")))[1];e<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(e-15)},checkTextLen:function(e,t,_){var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.editableVal(e).replace(/\n\n\n+/g,"\n\n"));if(e.lastLen!==o.length||_){var i=e.lastLen=o.length,a=(cur.options||{}).max_post_len||(window.mvcur||{}).maxReplyLength,r=i-o.replace(/\n/g,"").length;t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(t),i>a-100||r>4?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(t),t.innerHTML=i>a?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_recommended_exceeded",i-a):r>4?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_recommended_lines",r-4):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("text_N_symbols_remain",a-i)):hide(t),window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()}else window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()},checkPostLen:function(e,t,_,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e);if(_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(_).replace(/\n\n\n+/g,"\n\n"),i&&(i.lastLen!==_.length||o)){var a=i.lastLen=_.length,r=cur.options.max_post_len,n=a-_.replace(/\n/g,"").length,l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(t);a>r-100||n>4?(l.innerHTML=a>r?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_recommended_exceeded",a-r):n>4?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_recommended_lines",n-4):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("text_N_symbols_remain",r-a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(l)):hide(l)}},postChanged:function(e){var t,_=Wall.isPosterEditorOpen();if((_||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("submit_post"))&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),"shown")||Wall.showEditPost(),vk.id&&!vk.widget&&!(null===(t=cur.options)||void 0===t?void 0:t.no_draft)){clearTimeout(cur.postAutosave);var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(cur.oid)==vk.id?Wall.saveDraft:Wall.saveOwnerDraftText.pbind(cur.oid);!0===e?o():cur.postAutosave=setTimeout(o,10===e?10:1e3)}_||setTimeout(Wall.checkPosterAvailability)},ownerDraftKey:function(e){return"wall_draft"+vk.id+"_"+e},ownerDraftData:function(){return cur.wallDraftData||(cur.wallDraftData={}),cur.wallDraftData},addOwnerDraftMedia:function(e,t){var _;if(!(null===(_=cur.options)||void 0===_?void 0:_.no_draft)){var o=Wall.ownerDraftData(),i=t[0],a=t[1],r=t[2];o._attach_cache=o._attach_cache||{},r?o._attach_cache[i+a]=r:r=o._attach_cache[i+a],o.attaches=o.attaches||[];var n=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.ownerDraftKey(e))||{};!1!==i?o.attaches.push([i,a,r,o.attaches.length]):!1===i&&void 0!==a&&(o.attaches=o.attaches.filter((function(e){return e[3]!==a}))),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.ownerDraftKey(e),extend(n,{txt:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Wall.getDraftData().message||""),medias:o.attaches}))}},cleanOwnerDraftMedia:function(e){var t;if(!(null===(t=cur.options)||void 0===t?void 0:t.no_draft)){var _=Wall.ownerDraftData(),o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.ownerDraftKey(e))||{};_.attaches=[],_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.ownerDraftKey(e),extend({txt:""},o,{medias:[]}))}},saveOwnerDraftText:function(e){var t;if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!(null===(t=cur.options)||void 0===t?void 0:t.no_draft)){var _=Wall.ownerDraftData(),o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.ownerDraftKey(e))||{},i=Wall.getDraftData(),a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(i.message||""),r=null;if(_.txt=a,each(o.medias||{},(function(e,t){switch(t[0]){case"postpone":i.postpone&&(o.medias[e][1]=i.postpone,o.medias[e][2].draft=1);break;case"poll":var _=(cur.wallAddMedia||{}).pollData(!0,!0);_&&extend(o.medias[e][2],_);break;case"copyright":var a=(cur.wallAddMedia||{}).copyrightData(!0);a&&extend(o.medias[e][2],a);break;case _web_donut__WEBPACK_IMPORTED_MODULE_33__.a:i[_web_donut__WEBPACK_IMPORTED_MODULE_33__.a]&&(o.medias[e][2]=Object.assign(o.medias[e][2]||{},{[_web_donut__WEBPACK_IMPORTED_MODULE_33__.a]:i[_web_donut__WEBPACK_IMPORTED_MODULE_33__.a]}))}})),a&&i.bkg_id&&(r={id:i.bkg_id},cur.poster&&cur.poster.isCustomBkgId(i.bkg_id)&&extend(r,cur.poster.getCustomBkg()),o.bkg_id&&delete o.bkg_id),extend(o,{txt:a,bkg:r}),cur.shareShowImg&&extend(o,{shareShowImg:cur.shareShowImg}),e<0){var n=cur.poster?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official"));extend(o,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"from-oid")||vk.id,signed:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("signed")?1:0}),Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.d)(n,cur.wallAddMedia)?o.donutOnly=1:delete o.donutOnly}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.ownerDraftKey(e),o)}},getOwnerDraft:function(e){var t;if(null===(t=cur.options)||void 0===t?void 0:t.no_draft)return[];var _=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.ownerDraftKey(e))||[],o={from:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_.from),signed:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_.signed),shareShowImg:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_.shareShowImg)};return Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(_.donutOnly)&&(o.donutOnly=1),[_.txt,_.medias,!0,o,_.bkg]},saveOwnerDraftMedia:function(e,t,_,o){var i;if(!(null===(i=cur.options)||void 0===i?void 0:i.no_draft)){Wall.cleanOwnerDraftMedia(e);var a=cur.wallAddMedia||{},r=[],n=(cur.wallAddMedia?a.getMedias():[]).slice().map((function(e){return e.slice(0,2)}));void 0!==_&&t?r=[[t,_,o]]:t||void 0===_||n.splice(_,1),n=n.concat(r),each(n,(function(){Wall.addOwnerDraftMedia(e,this)}))}},saveDraft:function(){var e;if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!(null===(e=cur.options)||void 0===e?void 0:e.no_draft))if(cur.noDraftSave)cur.noDraftSave=!1;else if(!cur.postSent&&vk.id==Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(cur.oid)){var t=Wall.getDraftData();t.delayed||ajax.post("al_wall.php",Wall.fixPostParams(extend({act:"save_draft",hash:cur.options.post_hash},t)),{onFail:function(){return!0}})}},getDraftData:function(){var e;if(null===(e=cur.options)||void 0===e?void 0:e.no_draft)return{};var t=cur.wallAddMedia||{},_=t.chosenMedia||{},o=cur.wallAddMedia?t.getMedias():[],i=t.shareData||{},a="",r=0,n=null;if(Wall.isPosterEditorOpen())n=(a=cur.poster.getText())?cur.poster.getBkgId():null;else{var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");a=window.Emoji?Emoji.editableVal(l):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(l),a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(a)}var s={message:a,bkg_id:n};return Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(_)&&_.length&&o.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(_)),o.length&&each(o,(function(e,_){if(_){var o=this[0],n=this[1];switch(o){case"poll":var l=t.pollData(!0,!0);if(!l)return s.delayed=!0,!1;n=l.question,delete l.question,s=extend(s,l);break;case"copyright":var c=t.copyrightData(!0);if(c)return void(s=extend(s,c));break;case"share":if(i.failed||!i.title&&(!i.images||!i.images.length)&&!i.photo_url&&!i.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(s.delayed=!0,!1):void 0;i.video?(n=i.video_owner_id+"_"+i.video_id,s.snippet_video=1):n=i.user_id&&i.photo_id&&!i.noPhoto?i.user_id+"_"+i.photo_id:"",i.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(a)==i.initialPattern&&(s.message=""),i.is_vk_mini_app&&(s.is_vk_mini_app=!0,s.is_photo_edit=i.isPhotoEdit,s.image_offset=cur.shareShowImg),s=extend(s,{url:i.url,module:cur.module,mode:i.mode,title:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(i.title),description:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(i.description),button_text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(i.button_text),button_action:i.button_action,extra:i.extra,extra_data:i.extraData,photo_url:i.video?"":Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(i.photo_url),open_graph_data:(i.openGraph||{}).data,open_graph_hash:(i.openGraph||{}).hash});break;case"page":i.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(a)==i.initialPattern&&(s.message="");break;case"postpone":var d=+t.postponeDate;return void(s=extend(s,{postpone:d}));case"mark_as_ads":return void(s=extend(s,{mark_as_ads:1}));case _web_donut__WEBPACK_IMPORTED_MODULE_33__.a:return void(s=extend(s,Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.f)(_)))}this[3]&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(a)==this[3]&&(s.message=""),s["attach"+(r+1)+"_type"]=o,s["attach"+(r+1)]=n,r++}})),s},setDraft:function(e){var t;if(!(null===(t=cur.options)||void 0===t?void 0:t.no_draft)&&(e[0]||e[1]&&e[1].length||null!=e[4])){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");if(_){var o=e[4];o||Emoji.val(_,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(e[0]||"")).replace(/\n/g,"<br/>")),Wall.showEditPost((function(){setTimeout((function(){if(o&&cur.poster){Wall.hidePosterFeatureTooltip();var t={text:e[0]||""};if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.A)(o)?t.bkgId=e[4]:isObject(o)&&(cur.poster.isCustomBkgId(o.id)&&cur.poster.addCustomBkg(o),t.bkgId=o.id),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(Wall.getMainPostBlock()))return cur.poster.setBkg(t.bkgId,!0),cur.poster.setText(t.text),void Emoji.val(_,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(e[0])).replace(/\n/g,"<br/>"));Wall.openPosterEditor(t)}if(e[1]&&cur.wallAddMedia)for(var i in e[1])cur.noDraftSave=!0,cur.wallAddMedia.chooseMedia.apply(cur.wallAddMedia,e[1][i]);Wall.checkPosterAvailability(),Wall.saveDraft()}),0)})),e[2]&&wall.focusOnEnd(),e[3]&&(wall.setReplyAsGroup(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official"),e[3]),e[3].shareShowImg&&(cur.shareShowImgRestored=e[3].shareShowImg),e[3].donutOnly&&cur.wallAddMedia&&cur.wallAddMedia.donutPostSettings&&cur.wallAddMedia.donutPostSettings.setPostDonutOnly&&cur.wallAddMedia.donutPostSettings.setPostDonutOnly()),cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}}},initPostEditable:function(e){var t=cur.postField;if(!t||t.emojiInited)return!1;t.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(t,{ttDiff:-42,rPointer:!0,controlsCont:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(t),noStickers:!0,onSend:Wall.sendPost,noEnterSend:!0,ref:"post",checkEditable:Wall.postChanged,initUploadForImagePasteCallback:function(e,t,_){window.Upload&&Upload.onFileApiSend(cur.wallUploadInd,[_])}}),addClass(t,"submit_post_inited"),e?setTimeout(Wall.setDraft.pbind(e),0):cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)})),setTimeout((function(){cur.postFieldZoomText&&addEvent(t,"keydown paste",(function(){setTimeout((function(){cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}),0)}))}),0)},showEditPost:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");if(cur.viewAsBox)return setTimeout((function(){t.blur()}),0),cur.viewAsBox();0!==cur.editing&&(setTimeout(WallUpload.init,0),Wall.initComposer(t,{lang:{introText:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("profile_mention_start_typing"),noResult:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("profile_mention_not_found")},checkLen:Wall.postChanged,onValueChange:Wall.onPostValChange,onItemSelect:Wall.onPostItemSelect},e),Wall.hideEditPostReply(),addClass("submit_post_box","shown"),cur.editing=0,Wall.showPosterFeatureTooltip(),Wall.showPostCopyrightFeatureTooltip(),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(cur.onShowEditPost)&&cur.onShowEditPost(),cur.wallAdsReplacedFeatureTooltip&&Wall.showAdsReplacedTooltip(),stManager.add(["ui_controls.css","ui_controls.js","datepicker.css",window.jsc("web/datepicker.js")]))},postBoxFocus:function(e,t){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(e||window.event);var _=Wall.isPosterEditorOpen();(cur.postField&&window.Emoji||_)&&setTimeout((function(){t?_?(cur.poster.focusPoster(),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(cur.poster.getPosterElement())[1]-15)):(Emoji.focus(cur.postField),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(cur.postField)[1]-15)):_?cur.poster.focusPoster():Emoji.focus(cur.postField,!0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"))}),0)},initComposer:function(e,t,_){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"composer"))_&&_();else if(cur.composerAdded){var o=Composer.init(e,t);_&&_(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(o))}else stManager.add(["wide_dd.css","wide_dd.js"],(function(){cur.composerAdded=!0;var o=Composer.init(e,t);_&&_(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(o))}))},deinitComposer:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"composer");t&&Composer.destroy(t),e.emojiId&&window.Emoji&&Emoji.destroy(e.emojiId)},hasComposerMedia:function(e){var t=e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"composer");return!(!t||!t.addMedia)&&t.addMedia.attachCount()>0},composerListShown:function(e){var t=e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"composer");if(!t)return!1;var _=t.wdd,o=0;for(var i in _.shown)o+=1;return!!(_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(_.listWrap)&&o)},onPostValChange:function(e){if(cur.wallAddMedia&&cur.wallAddMedia.checkMessageURLs.apply(window,arguments),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||Pagination.pageTopUpdated(),browser.msie&&!e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");hide(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(t)}},onPostItemSelect:function(e){if(e&&!(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[0])>=0)&&cur.wallAddMedia){var t="vk.com/event"+-e[0];cur.wallAddMedia.checkMessageURLs(t,!0)}},hideEditPost:function(e){cur.editing=!1;var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field"),_=cur.wallAddMedia||{},o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t));!browser.opera_mobile&&t&&(!e&&(o||_.chosenMedia||_.getMedias&&_.getMedias().length>0||_.activeState||_.attachCount&&_.attachCount()>0)||(removeClass("submit_post_box","shown"),t&&!o&&cur.postMention&&(cur.postMention.options.minHeight=cur.emptyPostheight||14),cur.onWallSendCancel&&cur.onWallSendCancel(),window.WallUpload&&WallUpload.hide(),cur.wallAddMedia&&cur.wallAddMedia._hideAddMedia(!0)))},clearInput:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("page_add_media");var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field");if(Wall.withMentions){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"mention");t&&(t.rtaEl.innerHTML="",hide(t.cont),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e))}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,""),e.blur(),e.phonblur(),Wall.hideEditPost(!0),cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),Wall.resetPostVisibilityAccess(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)("export_status",!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)("close_comments",!1),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(window.cur.wallOnClearInput)&&window.cur.wallOnClearInput.forEach(e=>{e()});var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"composer");_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_.articleConvertEl),_.articleConvertEl=!1)},fixPostParams:function(e){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(e);return t.Message=e.message,delete t.message,t},focusOnEnd:function(e){if(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field"))if("TEXTAREA"!=e.tagName){var t=e.innerHTML?e.innerHTML.length:e.length?e.length:e.childNodes.length-1;if(e.focus(),document.selection){var _=document.selection.createRange();_.moveStart("character",t),_.select()}else window.getSelection().collapse(e,e.childNodes.length)}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(e)},showPostSettings:function(e,t){var _=cur.wallAdsReplacedFeatureTooltip&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"addpost_opt");if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"ett")||_){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e),i=o&&o.querySelector(".Post__copyrightButton");_&&Wall.hideAdsReplacedTT(),new ElementTooltip(e,{cls:"post_settings_tooltip"+(i?" post_settings_tooltip_with_custom_btn":""),content:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o),defaultSide:"top",offset:[0,-5],appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e)}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(o)}t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.e)(t)&&"click"===t.type&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"ett").toggle()},togglePostVisibilityAccess:function(e,t,_,o){_=_||"";var i="post_visibility_btn",a=cur[i+_];a&&a.hide(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.r)(e,t,"post_settings_btn"+i+_);var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_visibility_btn"+_),n=geByClass1("post_action_btn_text",r),l=![_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.a.ONLY_FRIENDS,_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.a.ONLY_BEST_FRIENDS].includes(t);if(t===_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.a.ONLY_BEST_FRIENDS){var s=(window.event||{}).target,c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("best_friends_only"+_).querySelector(".PostVisibilityBestFriendsOnlyOption"),d=Number(c.dataset.count);s&&s.closest(".PostVisibilityBestFriendsOnlyOption__editLink")||0===d?(Object(_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_50__.b)(_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_50__.a.editBestFriends),this.resetPostVisibilityAccess(),stManager.add([jsc("web/best_friends.js"),"BestFriends.css"],()=>{window.bestFriendsBoxSettings(e=>{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("best_friends_only"+_);if(0===e)t.innerHTML=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.n)("visibility_access_best_friends_only_option",{html:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_choose_best_friends"),count:e}),this.togglePostVisibilityAccess(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("no_friends_only"+_),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.a.PUBLIC,_,!0);else{var o=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_best_friends_settings_box_conversation_friends_count",e);t.innerHTML=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.n)("visibility_access_best_friends_only_option",{html:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.n)("visibility_access_best_friends_only_item",{count_text:o}),count:e}),this.togglePostVisibilityAccess(t,_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.a.ONLY_BEST_FRIENDS,_,!0)}})})):(Object(_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_50__.b)(_web_BestFriends_analytics__WEBPACK_IMPORTED_MODULE_50__.a.selectBestFriends),n.innerHTML=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_best_friends_only"),n.setAttribute("aria-label",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_best_friends_only")),addClass(r,"best_friends_only"))}else if(l){var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("no_friends_only"+_).innerHTML;n.innerHTML=u,n.setAttribute("aria-label",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(u)),removeClass(r,"on"),removeClass(r,"best_friends_only")}else{var p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("friends_only"+_),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(p);n.innerHTML=b,n.setAttribute("aria-label",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(b)),addClass(r,"on"),removeClass(r,"best_friends_only")}o||Wall.postChanged()},resetPostVisibilityAccess(){Wall.canChangeVisibilityForNewPost()&&Wall.togglePostVisibilityAccess(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("no_friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.a.PUBLIC,!1,!0)},canChangeVisibilityForNewPost:()=>!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_visibility_btn"),initPostVisibilitySelector(e){Wall.canChangeVisibilityForNewPost()&&Object(_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_40__.a)("post_visibility_btn",e.id)},cantAccessDonutPosts:()=>!1===window.cur.donutGroupUserHasWallAccess,togglePostMarkAsAds:function(e,t){t=t||"mute_notifications";var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(t);if(_){var o=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(e);if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(_,o),o)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"prev-state",+Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(_)),addClass(_,"on");else{var i=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"prev-state");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(_,"on",i)}}},needCheckSign:function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("check_sign");return e&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(e)},saveCheckSign:function(e){var t=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"title",t?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_check_sign_disabled"):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_check_sign_enabled")),window.tooltips&&tooltips.hide(e,{onHide:e.onmouseover.bind(e)}),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(e,!t)},checkAsGroup:function(e){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(e),wall.setReplyAsGroup(e,{fromGroup:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(e)})},sendPost:function(e,t){var _=cur.wallAddMedia||{},o=_.chosenMedia||{},i=cur.wallAddMedia?_.getMedias():[],a=_.shareData||{},r=cur.poster&&!!t,n=r?t.text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field"))),l=!1,s=r?null:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("send_post"),c=cur.options.suggesting?"suggest":cur.wallType;"top"===c&&(c="all"),r&&(i=i.filter(e=>{if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(e)){var t=_slicedToArray(e,1)[0];return["copyright","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_33__.b].includes(t)}}));var d=r?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official")),u=Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.d)(d,_),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(d,"from-oid")==cur.postTo?1:"";d&&cur.postTo||p||cur.defaultPostSettings&&(p=cur.defaultPostSettings.official?1:"");var b={act:"post",message:n,to_id:cur.postTo,type:c,friends_only:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("friends_only"),best_friends_only:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("best_friends_only"),check_sign:Wall.needCheckSign(),close_comments:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("close_comments")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("close_comments")?1:0:"",mute_notifications:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mute_notifications")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("mute_notifications")?1:0:"",mark_as_ads:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("mark_as_ads")?1:0,official:p,signed:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)("signed"),hash:cur.options.post_hash,from:cur.from?cur.from:"",fixed:cur.options.fixed_post_id||"",situational_suggest_id:cur.options.situational_suggest_id||null},E=0;extend(b,Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.e)(u,_)),cur.options.additional_save_params&&(b=extend(b,cur.options.additional_save_params));var O,m=cur.wallAddMedia&&cur.wallAddMedia.id||"";function h(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_error");if(t.innerHTML=e.length>60?'<div class="msg_text">'+e+"</div>":e,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("submit_post_error")||(Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.l)("submit_post_error",100),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.b)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("box_layer_wrap"),{scrollTop:0})),Wall.isPosterEditorOpen()){var _=cur.poster.getErrorWrapperElement();_.innerHTML="",_.appendChild(t)}}if(extend(b,Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__.a)(String(m))),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(o)&&o.length&&i.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(o)),r&&(b.poster_bkg_id=t.bkgId,b.poster_bkg_access_hash=t.accessHash,t.fallbackObj&&(i.push(["photo",t.fallbackObj.owner_id+"_"+t.fallbackObj.id,!1]),b.poster_photo_hash=t.fallbackObj.post_hash),b.poster_bkg_id!==cur.posterCtaBkgId&&(b.poster_author_bkg_check=!0)),hide("submit_post_error"),i.length){var w=0;O=!1,each(i,(function(e,t){var o;if(t){var r=this[0],d=this[1];switch(r){case"video":if(l||"suggest"==c)break;var u=Wall.getOwnerDraft(cur.oid)[1];if(!u)break;each(u,(function(e,t){t[1]===d&&t[2]&&t[2].upload_new&&w++}));break;case"poll":var p=_.pollData();if(!p)return O=!0,!1;d=p.question,delete p.question,b=extend(b,p);break;case"copyright":var m=_.copyrightData();if(m)return void(b=extend(b,m));break;case"share":if(a.failed||!a.title&&(!a.images||!a.images.length)&&!a.photo_url&&!a.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(O=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&a.button_text&&a.button_action){var v;i.length>1&&(v=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_share_too_many_attachments")),n.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(v=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_share_too_many_newlines")),n.length>(cur.options.share||{}).button_exclusive_max_message_len&&(v=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_share_too_long_message"));var f=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.j)(" "+n+" "),g=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.j)(" "+a.url+" ")[0];if(g&&f.length){"/"===g.query&&(g.query=""),"www."===g.domain.substr(0,4)&&(g.domain=g.domain.substr(4));for(var P=0;P<f.length;++P){var M=f[P];if("/"===M.query&&(M.query=""),"www."===M.domain.substr(0,4)&&(M.domain=M.domain.substr(4)),g.domain!=M.domain||g.query!=M.query){v=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_share_too_many_links");break}}}if(v)return h(v),O=!0,!1}if(!a.title)return h(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_share_title_required")),O=!0,!1;if(!a.url)return h(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_share_url_required")),O=!0,!1;if(a.url=new URL(a.url).href,a.video?(d=a.video_owner_id+"_"+a.video_id,b.snippet_video=1):d=a.user_id&&a.photo_id&&!a.noPhoto?a.user_id+"_"+a.photo_id:"",a.share_upload_failed&&!d)return void(a.share_upload_failed=0);if(a.images&&a.images.length&&!Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(a.images[cur.shareShowImg])&&!d&&!a.noPhoto&&!a.share_own_image&&!a.video)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(s),_.uploadShare((function(){Wall.sendPost(!0)})),O=!0,!1;if((cur.options.share||{}).require_image&&!d)return h(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_share_image_required")),O=!0,!1;a.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(n)==a.initialPattern&&(b.message=""),a.is_vk_mini_app&&(b.is_vk_mini_app=!0,b.is_photo_edit=a.isPhotoEdit,b.image_offset=cur.shareShowImg),b=extend(b,{url:a.url,module:cur.module,mode:a.mode,title:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(a.title),description:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(a.description),button_text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(a.button_text),button_action:a.button_action,extra:a.extra,extra_data:a.extraData,photo_url:a.noPhoto||a.video?"":Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.F)(a.photo_url),open_graph_data:(a.openGraph||{}).data,open_graph_hash:(a.openGraph||{}).hash});break;case"page":a.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(n)==a.initialPattern&&(b.message="");break;case"postpone":var D=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("postpone_date"+_.lnkId);return b=extend(b,{postpone:D}),cur.postponedLastDate=D,void(l=!0);case"mark_as_ads":return void(b=extend(b,{mark_as_ads:1}));case"pretty_cards":if(!_.prettyCardGallery)return;if(_.prettyCardGallery.needSendData())return _.prettyCardGallery.saveCards(Wall.sendPost,(function(e){h(e)})),O=!0,!1;var C=_.prettyCardGallery.getSendData();d=C.attachVal;break;case"podcast":if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(this[2],"attach_disabled"))return!1;break;case _web_donut__WEBPACK_IMPORTED_MODULE_33__.b:return;case"donut_link":b["attach"+(E+1)+"_owner_id"]=null===(o=this[5])||void 0===o?void 0:o.owner_id}this[3]&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(n)==this[3]&&(b.message=""),b["attach"+(E+1)+"_type"]=r,b["attach"+(E+1)]=d,E++}}));var v=cur.postTo<0||cur.postTo===vk.id;if(cur.wallUploadVideoOpts&&cur.wallUploadVideoOpts.vars.is_wall_postponed_allowed&&v&&w&&!e&&!cur.postponeVideoPost)return Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)()&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().hide(),void Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("al_video.php?act=postponed_post_box",{videos_count:w},{onDone:function(e,t){e.removeButtons(),e.addButton(t.video_post_later_text,(function(){cur.postponeVideoPost=!0,Wall.sendPost(!0),e.hide()})),e.addButton(t.video_post_now_text,(function(){Wall.sendPost(!0),e.hide()}),"no")}});if(O)return void(e&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(s))}if(!E&&!n)return e&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(s),void Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)("post_field");if(!s||e||!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(s)){cur.postponeVideoPost&&(b=extend(b,{postpone_video:!0,postpone_video_hd:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("postponed_post_hd"))})),cur.postAutosave&&clearTimeout(cur.postAutosave),hide("submit_post_error"),cur.postSent=!0;var f=window.GroupsAdminTips&&window.GroupsAdminTips.isShownSection()?1:0;b.update_admin_tips=f;var g=Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.g)(_,cur.oid);b.donut_duration&&-1!==b.donut_duration&&g&&!cur.donutAttachesApproved?Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)({title:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("publish_postponed_title"),onHide:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(s)}},Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_publish_donut_freeing_attaches_confirmation_title"),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("publish_postponed_btn"),()=>{Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().hide(),cur.donutAttachesApproved=!0,Wall.sendPost(e,t)},Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_cancel"),()=>{Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().hide(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(s)}):setTimeout((function(){ajax.post("al_wall.php",Wall.fixPostParams(b),{onDone:function(e,t,o,i){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.A)(o)||(o=null),cur.poster&&r&&(cur.poster.unlockEditPoster(),cur.poster.closeEditor(),cur.poster.resetPoster(),cur.posterCtaBkgId&&(cur.posterCtaBkgId=null)),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),Wall.clearInput(),cur.postSent=!1,cur.postponeVideoPost=!1,cur.donutAttachesApproved=!1;var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mark_as_ads"),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mute_notifications");if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(a)&&n&&(removeClass(n,"on"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(n,0)),a&&(removeClass(a,"on"),_.donutUpdateVisibility()),cur.options.onSendPostDone)cur.options.onSendPostDone.apply(window,arguments);else{if(i&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(i),!isObject(e)||!e.redirect){if(Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_46__.b)(),l){if("feed"==c)Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(e,{out:3e3});else if("full_own"==c||"full_all"==c)return Wall.showPostponedFull(e);return wall.updateTabVisibility("page_wall_postponed",!0),void Wall.showPostponed(!1,e)}if(("full_own"==c||"full_all"==c)&&(cur.pgStart||nav.objLoc.postponed)){var s=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(nav.objLoc);return delete s.offset,delete s.postponed,vk.id!=cur.oid&&delete s.own,nav.go(s)}if(vk.id!=cur.oid&&"full_own"==c){var d=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(nav.objLoc);return delete d.own,nav.go(d)}return"feed"==c?cur.wallPostCb():"suggest"==c?(wall.updateTabVisibility("page_wall_suggest",!0),Wall.showSuggested(!1,e,t),Wall.suggestUpdate()):void(u?Wall.showDonutWall(e):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")&&geByClass1("ui_tab",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_tabs")).click(),Wall.receive(e,t),cur.onWallSendPost&&cur.onWallSendPost(),f&&null!==o&&window.GroupsAdminTips&&window.GroupsAdminTips.refreshSection(o)))}nav.go(e.redirect)}},onFail:function(e){if(cur.postSent=!1,cur.postponeVideoPost=!1,cur.donutAttachesApproved=!1,cur.poster&&r&&cur.poster.unlockEditPoster(),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),!cur.options.onSendPostFail){if(!e)return!0;var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_error");if(t.innerHTML=e.length>60?'<div class="msg_text">'+e+"</div>":e,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("submit_post_error")||Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.l)("submit_post_error",100),Wall.isPosterEditorOpen()){var _=cur.poster.getErrorWrapperElement();_.innerHTML="",_.appendChild(t)}return!0}cur.options.onSendPostFail.apply(window,arguments)},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(s)},hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(s)},noSort:!0})}),0)}},_repliesLoaded:function(e,t,_,o,i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e);if(a){var r=a.nextSibling;if(t){var n=a.offsetHeight;a.innerHTML=_,Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()+(a.offsetHeight-n),0,void 0,!0),setTimeout(Wall.scrollHighlightReply.pbind("post"+t),0)}else a.innerHTML=_;if(r&&"replies_open"==r.className&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(r),ajax._framenext(),e==cur.wallLayer){var l=wkcur.reverse;extend(wkcur,{offset:!l&&i.offset||0,loaded:i.num||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",a,"div").length,count:i.count}),wall.addReplyNames(o),WkView.wallUpdateReplies(),l||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll())}else wall.addReplyNames(o),Wall.repliesSideSetup(e);Wall.updateMentionsIndex(),setTimeout((function(){Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.l)().updateCurrentPlaying()}),10),i&&Likes.updateComments("wall"+e,i.count)}},repliesSideSetup:function(e){if(cur.wallLayer!=e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e);if(t){var _=geByClass1("wr_header",t,"a"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"deep_active"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_side"+e);if(cur.wallMyOpened[e]&&(_||i)){if(!a){var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)('<div class="replies_side_wrap"><div id="replies_side'+e+'" class="replies_side"></div></div>');t.parentNode.insertBefore(r,t),(a=r.firstChild).onmouseover=Wall.repliesSideOver.pbind(e),a.onmouseout=Wall.repliesSideOut.pbind(e),a.onclick=i?Wall.hideDeepReplies.pbind(e):Wall.repliesSideClick.pbind(e)}t.onmouseover=Wall.repliesSideOver.pbind(e),t.onmouseout=Wall.repliesSideOut.pbind(e),Wall.repliesSideOver(e)}else hide(a),t.onmouseover=null,t.onmouseout=null}}else WkView.wallUpdateReplies()},repliesSideClick:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),_=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(t)[1];return _>o&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(o-100,0),hide("replies_side"+e),Wall.showReplies(e,3,!1)},repliesSideOver:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_side"+e);if(t){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_))[1],i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(_)[1],a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(t)[1],r=t.offsetHeight,n=window.lastWindowHeight||0,l=o+i-n+15,s=a+r-n;cur.wallRepliesSideOver=[e,_,l,s],Wall.repliesSideUpdate()}},repliesSideOut:function(e){cur.wallRepliesSideOver&&cur.wallRepliesSideOver[0]==e&&delete cur.wallRepliesSideOver},repliesSideUpdate:function(e){var t=cur.wallRepliesSideOver;if(t){var _,o=t[1],i=t[4]||{},a=t[5]||"",r="replies_side";void 0===e&&(e=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()),e<t[2]?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(o),_={marginTop:0,opacity:1}):e<t[3]?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(o),r+=" replies_side_fixed",_={opacity:Math.max(0,Math.min(1,(t[3]-e)/200))}):(r+=" replies_side_hidden",_={marginTop:t[3]-t[2],opacity:0,display:null}),JSON.stringify(i)!==JSON.stringify(_)&&(each(i,(function(e,t){i[e]=null})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(o,extend(i,_)),t[4]=_),a!=r&&(o&&(o.className=r),t[5]=r)}},highlightReply:function(e){(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e))&&(addClass(e,"reply_highlighted"),setTimeout((function(){removeClass(e,"reply_highlighted")}),1500))},scrollHighlightReply:function(e){if(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e))if(cur.wallLayer||e.id.match(/^post-?\d+(photo|video|market)?_\d+$/)&&(window.wkcur&&wkcur.shown||window.mvcur&&mvcur.mvShown||cur.pvShown)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(e,!0)[1];t<0||t>lastWindowHeight-200?Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.b)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+t-50},300,Wall.highlightReply.pbind(e)):Wall.highlightReply(e)}else{var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(e)[1];_<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)()+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("page_header")[1]?(Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(_,300),setTimeout(Wall.highlightReply.pbind(e),300)):Wall.highlightReply(e)}},showReply:function(e,t,_,o){if(cur.viewAsBox)return!1;if(o&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(o))return!0;if(window.mvcur&&mvcur.post==t)return Videoview.showComment(_),!1;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);if(i)Wall.scrollHighlightReply(i);else if(cur.wallLayer==t)WkView.wallShowPreviousReplies(_);else if(t.match(/market/))Market.comments(t);else{if(e.tt&&e.tt.hide&&e.tt.hide(),"full"==cur.wallType){var a=_.split("_");return delete nav.objLoc.offset,nav.go(extend(nav.objLoc,{reply:a[1]}))}Wall.showReplies(t,!1,_)}return!1},showReplies:function(e,t,_,o){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(o||window.event))return!0;if(cur.viewAsBox)return cur.viewAsBox();if(cur.wallLayer!=e||!wkcur.reverse){cur.wallMyOpened[e]=3!=t;var i={act:"get_replies",post:e,count:t},a={onDone:Wall._repliesLoaded.pbind(e,_),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind("wrh"+e),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind("wrh"+e),local:1};if(_||t&&!(t>20)||(extend(i,{cont:"replies"+e}),extend(a,{frame:1}),cur.onFrameBlocksDone=function(){setTimeout(Wall.repliesSideSetup.pbind(e),browser.msie?100:10)}),ajax.post("al_wall.php",i,a),!browser.msie&&t>0&&t<10){for(var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),n=r&&r.lastChild,l=[];l.length<t&&n;)"DIV"==n.tagName&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n,"reply")&&l.push(n),n=n.previousSibling;if(l.length==t){var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",r,"div").length;for(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(r,'<a class="wr_header wrh_all"></a>'),Wall.updateRepliesHeader(e,r.firstChild,t,s),hide("replies_side"+e);l.length;)r.appendChild(l.pop());Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)("wrh"+e)}}return!1}},moreReplies:function(e,t,_,o){var i;if(o.deep){var a=e.split("_");i={act:"get_post_replies",offset:t,owner_id:a[0],item_id:a[1],count:_},o.order&&(i.order=o.order)}else i={act:"get_replies",offset:t,post:e,count:_};return extend(i,{rev:o.rev,from:o.from}),ajax.post("al_wall.php",i,{onDone:function(t,_,i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e);o.clear?a.innerHTML=t:o.rev||o.append?a.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(t)):a.innerHTML=t+a.innerHTML,wall.addReplyNames(_),o.onDone&&o.onDone(t,_,i),Wall.updateMentionsIndex()},onFail:()=>!1,showProgress:o.showProgress,hideProgress:o.hideProgress}),!1},openDeepShortReplies:function(e,t){var _=geByClass1("replies_next",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e));return _&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_),_.focus(),_.click(),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e)),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)},collapseDeepReplies:function(e,t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+t);if(_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"replies_list_deep")){var o=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(e)[1],a=Math.round(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.j)()/2);cur.wallLayer?(i-=o)<a&&Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.b)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+i-a},300):o>i-a&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(i-a),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t));var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{className:"progress_inline replies_next_loader"});Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e),_.innerHTML="";var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box_wrap"+t);n&&hide(n);var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+t),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",_),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"post-id"),d=wall.getRepliesOrder(c);removeClass(l,"replies_deep_has_field"),addClass(l,"replies_deep_has_short"),wall.updateRepliesOnScroll(),ajax.post("al_wall.php",{act:"get_collapsed_replies",reply_id:t,order:d},{onDone:function(e){_.innerHTML=e},onFail:function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(cur.wallTpl.reply_deep_next,{post_id:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"post-id"),reply_id:t,offset:0,text:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_next_n_replies",cur.options&&cur.options.replies_page_count||20),class:" replies_next_deep"}));_.appendChild(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(e)},showProgress:function(){_.appendChild(r),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(r)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(r)}})}},overCollapseDeepReplies:function(e){var t=geByClass1("replies_deep_collapse_icon",e),_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(t),o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.T)(t,"bottom")),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(e),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(e),r=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),n=cur.wallLayer?wkLayerWrap.scrollTop:r;cur.wallLayer&&(a[1]-=r);var l,s,c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.j)(),d=a[1]+i[1],u=Object(_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_42__.a)(),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(u)[1];cur.wallLayer?(l=n+d-c,s=n+a[1]+_[1]+o+o-c):(l=d-c,s=a[1]+_[1]+o+o-c),cur.onScrollCollapseDeepReplies=wall.updCollapseDeepRepliesIcon.pbind(e,t,{iconSize:_,iconBottom:o,collapseSize:i,collapsePos:a,fixedField:u,fixedFieldSize:p,maxFixedScroll:l,topMaxScroll:s}),addEvent(cur.wallLayer?wkLayerWrap:window,"scroll",cur.onScrollCollapseDeepReplies),addEvent(window,"resize",cur.onScrollCollapseDeepReplies),cur.onScrollCollapseDeepReplies()},outCollapseDeepReplies:function(e){cur.onScrollCollapseDeepReplies&&(removeEvent(cur.wallLayer?wkLayerWrap:window,"scroll",cur.onScrollCollapseDeepReplies),removeEvent(window,"resize",cur.onScrollCollapseDeepReplies),delete cur.onScrollCollapseDeepReplies);var t=geByClass1("replies_deep_collapse_icon",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(t,{position:null,bottom:null,left:null,right:null})},updCollapseDeepRepliesIcon:function(e,t,_){var o=cur.wallLayer?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),i=_.maxFixedScroll;if((cur.wallLayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_.fixedField,"wl_reply_form_fixed")||"full"===cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_.fixedField,"fixed"))&&(i+=_.fixedFieldSize),o<i){var a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)((_.collapseSize[0]-_.iconSize[0])/2),r=_.topMaxScroll+_.fixedFieldSize-o,n=_.fixedFieldSize+_.iconBottom;r>0&&(n-=r),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(t,{position:"fixed",bottom:n,left:_.collapsePos[0]+a,right:"auto"})}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(t,{position:null,bottom:null,left:null,right:null})},updateCollapseDeepReplies:function(e){if(cur.wallTpl&&cur.wallTpl.reply_deep_collapse){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e));if(t){e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"post-id");var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e);if(!_)return _;var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",_).length>=2,i=geByClass1("replies_deep_collapse",t);if(o){if(i)return;i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(cur.wallTpl.reply_deep_collapse,{reply_id:e})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(i,_)}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(i)}}},showNextReplies:function(e,t,_){var o=t.split("_"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"offset"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"count"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"collapse"),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"replies_prev"),l=cur.wallLayer?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)("post"+t,"reply"),c={act:"get_post_replies",owner_id:o[0],item_id:o[1],offset:i,count:a,collapse:r},d=n?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.D)(e);if(d&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(d,"reply")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(d,"replies_wrap_deep"))){var u=(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(d,"post-id")||"").split("_")[1];n?c.next_id=u:c.prev_id=u}if(s)cur.wallLayer||(l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",l));else{var p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+t),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(p,"top-ids");b&&(c.top_replies=b)}var E=l.offsetHeight,O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"post-id");c.order=wall.getRepliesOrder(O);var m=s&&wall.isDescRepliesOrder(O,c.order);m&&(n=!n);var h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{className:"progress_inline replies_next_loader"});return ajax.post("al_wall.php",c,{onDone:function(_,o,a){var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:_})),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(),d=!1;s.forEach((function(e){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"wr_header")){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e.id);t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"reply")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"replies_wrap_deep"))||(c.appendChild(e),d=!0)}}));var u,p,b=n&&!m||!n&&m,h=!1;if(b){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+t),"replies_deep_has_short")){var w=window.innerHeight||document.documentElement.clientHeight,v=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("page_header")[1],f=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e),g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(f)[1];u=cur.wallLayer?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),h=cur.wallLayer?g<w:g<u+w-v}p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(c,e)}else p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(c,e);var P=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(a.num),M=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(a.offset),D=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(a.count),C=Math.max(0,M+(n?-P:P)),T=D-C,y=0;if(d&&(n&&M>0||!n&&T>0)&&(y=n?i-C:Math.min(T,P),a.closest_inx>=0&&(y=Math.min(y,a.closest_inx))),document.activeElement===e?addEvent(e,"focusout",(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e)})):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e),y){var j=e.cloneNode(!0);removeClass(j,"replies_next_pre_deleted"),r||(b?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(j,p),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(j,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_prev_n_replies",y))):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(j,p),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(j,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_next_n_replies",y))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(j,"count",y),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(j,"offset",C))}removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+t),"replies_deep_has_short");var I=l.offsetHeight-E;if(h&&I){var L=u+I;cur.wallLayer?wkLayerWrap.scrollTop=L:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(L,0,!1,!0)}wall.updateCollapseDeepReplies(t),wall.updateMentionsIndex(),wall.addReplyNames(o),wall.addDeepRepliesBlock(t),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[O]=1,wall.repliesSideSetup(O),wall.updateRepliesOnScroll()},onFail:function(){removeClass(e,"replies_next_pre_deleted")},showProgress:function(){addClass(e,"replies_next_pre_deleted"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(h,e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(h)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(h)}}),_&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(!1)},emojiOpts:{},emojiShowTT:function(e,t,_){return void 0!==Wall.emojiOpts[e]&&Emoji.ttShow(Wall.emojiOpts[e],t,_)},emojiHideTT:function(e,t,_){return void 0!==Wall.emojiOpts[e]&&Emoji.ttHide(Wall.emojiOpts[e],t,_)},initReplyEditable:function(e,t,_,o,i){if(e.emojiInited)return!1;var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+_),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_media_preview"+_);e.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){var n=Emoji.init(e,{ttDiff:o?-40:-42,rPointer:!0,controlsCont:t,shouldFocus:!i,ref:"reply",onSend:function(){Wall.sendReply(_),e.blur()},ctrlSend:function(){return Wall.customCur().wallTpl.reply_multiline||Wall.composerListShown(e)},checkEditable:function(){cur.onReplyChanged&&cur.onReplyChanged(e,_),Wall.checkTextLen(e,"reply_warn"+_)},onChange:function(){a&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(a,"reply_send_disabled",!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.editableVal(e))&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(r,"media_preview_has_medias")),Wall.hideCheckTimer(_,"editing")},onStickerSend:function(e,t){Wall.sendReply(_,!1,{stickerId:e,sticker_referrer:t})},initUploadForImagePasteCallback:Page.initUploadForImagePaste});if(vk.widget&&!window.emojiStickers&&Emoji.updateTabs(),Wall.emojiOpts[_]=n,cur.afterEmojiInit&&cur.afterEmojiInit[_]){var l=geByClass1("emoji_smile",Emoji.opts[n].controlsCont);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(l)&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_])}}))},initEditReply:function(e,t,_,o){var i,a=e,r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+e),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+e),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(n,"reply"),d=cur.wallLayer?wkcur:cur,u=!1;if(c){if(i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",n)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",n),u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"deep_active")){if(!cur.reply_to){var p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"answering-id");if(p){var b=e.split("_")[1];cur.reply_to=[Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(p),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(b)],Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+e,b)}}wall.addDeepRepliesBlock(e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+e)}a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"post-id")}else cur.wallLayer?(u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"),"deep_active"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_reply_form_inner")):(i=n,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"deep_active"));if(!i&&l?i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_wrap",l):!i&&s&&(i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_wrap",s)),l){var E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+a),O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(E,"can_reply_as_group"),m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(E,"can_reply_as_any_group"),h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"owner-photo")||"",w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"owner-href")||"",v=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"owner-name")||"",f="";m?f=d.wallTpl.reply_form_any_group:O&&(f=d.wallTpl.reply_form_group),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(u&&d.wallTpl.reply_form_new?d.wallTpl.reply_form_new:d.wallTpl.reply_form,{add_buttons:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(f,{post_id:e,oid:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e),owner_photo:h||"/images/blank.gif"}),post_id:e,oid:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e),owner_photo:h,owner_href:w,owner_name:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.J)(v))})),l.parentNode.replaceChild(s,l),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e)}if(!r)throw new Error("Failed to init new reply or edit reply: no reply field");if(Wall.initReplyEditable(r,s,e,t,_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(r,"composer"))o&&o();else{var g,P,M,D,C=[],T=!1;window.mvcur&&mvcur.mvShown?g=mvcur.mvMediaTypes:cur.wallLayer==a?g=wkcur.options.rmedia_types:window.pvcur&&cur.pvShown?(g=pvcur.rmedia_types,P=0,M=0):g=d.options&&d.options.rmedia_types,(u||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i.parentElement,"VerticalVideoLayerInfo__commentsReply"))&&(T=!0,P=0,M=0),each(g||d.options&&d.options.media_types||[],(function(){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(this[0],["photo","video","audio","doc","link","page"])&&C.push(this)}));var y=!1,j=a.match(/^(\d+_)?-?\d+_(photo|video|topic|market)?\d+(mv)?(_\d+)?$/);C.length>0&&j?(D={lnk:u?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_more_attaches"+e):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_add_media_"+e),preview:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_media_preview"+e),actionsEl:!1,gearEl:!1,types:C,options:{from:"topic"===j[2]?"board":"comment",limit:2,disabledTypes:["album","market","market_album","poll",_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_37__.a],toggleLnk:!0,maxShown:void 0!==P?P:void 0,hideAfterCount:void 0!==M?M:void 0,vectorIcon:T,hideLabel:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_reply_add_attach_label"),toId:"full"===cur.wallType?cur.oid:cur.postTo,onToggleBlock:function(t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+e),o=geByClass1("reply_box_photo",_);o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(o,t)},onMediaChanged:function(){Wall.hideCheckTimer(e,"editing"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)("reply_button"+e,"reply_send_disabled",!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.editableVal(r))&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)("reply_media_preview"+e,"media_preview_has_medias"))}}},a.match(/^-?\d+_topic/)&&(extend(D.options,{disabledTypes:["album","share","link","page"],limit:10,editable:1,sortable:1,teWidth:280,teHeight:200}),y=!0)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("reply_add_media_"+e),Wall.initComposer(r,{lang:{introText:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("profile_mention_start_typing"),noResult:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("profile_mention_not_found")},toup:y,wddClass:"reply_composer_dd",width:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(r.parentNode)[0],media:D,isReply:!0},o)}return void 0!==r.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[e]&&(cur.afterEmojiInit[e](),delete cur.afterEmojiInit[e]),{postId:a,postEl:i,isReply:c,rf:r}},showEditReply:function(e,t,_,o,i,a){if(cur.viewAsBox)return setTimeout((function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e).blur()}),0),cur.viewAsBox();if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)("post"+e,"Post--with_closed_comments_donut"))return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)("replies_wrap"+e,{display:""}),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t);var r=wall.initEditReply(e,_,i,a);if(r.rf){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("reply_box_wrap",r.rf));var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",r.rf);n&&addClass(n,"replies_deep_has_field")}return cur.wallMyOpened&&(cur.wallMyOpened[e]=cur.wallMyOpened[e]||!1),cur.editing===e?(Emoji.editableFocus(r.rf,!1,!0),!1):(Wall.hideEditPostReply(),r.isReply?addClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e),"deep_reply_box_open"):(addClass(r.postEl,"reply_box_open"),addClass(r.postEl,"post--replyBoxWasOpened")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)("replies_wrap"+e,{display:""}),cur.editing=e,window.Emoji&&setTimeout((function(){Emoji.editableFocus(r.rf,!1,!0),Wall.repliesSideOver(e)}),0),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.k)(window,"scroll"),void 0!==r.rf.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[e]&&(cur.afterEmojiInit[e](),delete cur.afterEmojiInit[e]),cur.wallTpl&&cur.wallTpl.reply_multiline_intro&&ajax.post("al_wall.php",{act:"a_ctrl_submit_intro",hash:cur.wallTpl.poll_hash},{onDone:function(t){t&&cur.editing===r.postId&&Wall.replySubmitTooltip(e,1)},onFail:function(){return!0}}),window.mvcur&&(mvcur.post==r.postId&&Videoview.onShowEditReply(),mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),mvcur.scrollBottom&&mvcur.scrollBottom()),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(cur.onReplyFormSizeUpdate)&&cur.onReplyFormSizeUpdate(r.rf),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(cur.onReplyFormFocus)&&cur.onReplyFormFocus(r.rf),!1)},hideEditReply:function(e,t){cur.editing=!1;var _,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+e),r=cur.reply_to&&Wall.getReplyName(cur.reply_to[0]),n=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(window.Emoji?Emoji.editableVal(o):""),l=Wall.hasComposerMedia(o),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"reply");if(!(_=cur.wallLayer?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_reply_form_inner"):s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",i):i)&&a&&(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_wrap",a)),o&&(!l||t)){if(r&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(r)&&r[1]&&(n&&r[1].indexOf(n)||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o,""),n="")),t&&(n||l)){var c=o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(o,"composer");c?Composer.reset(c):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o,""),n="",hide(geByClass1("reply_warn",_))}if(!(browser.opera_mobile||browser.safari_mobile||n)){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)()&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().isVisible()||(s?removeClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e),"deep_reply_box_open"):removeClass(_,"reply_box_open")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_link"+e)&&hide("replies_wrap"+e),window.tooltips&&a&&tooltips.hideAll(a),o.blur(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.k)(window,"scroll"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+e,""),hide("reply_to_title"+e),cur.reply_to=!1;var d=Wall.emojiOpts[e];d>=0&&Emoji.opts[d]&&Emoji.opts[d].onChange&&Emoji.opts[d].onChange(),cur.onReplyFormSizeUpdate&&cur.onReplyFormSizeUpdate();var u=cur.replySubmitSettings;u&&u.tt&&u.tt.el&&u.tt.destroy(),window.mvcur&&mvcur.post==e&&(Videoview.onHideEditReply(),mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate())}}},replyNamesRE:function(){wall.addReplyNames({});var e=wall.getReplyNames();if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.u)(e))return!1;var t=[];return each(e,(function(e,_){_&&(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(_)&&(_=_[1]),"string"==typeof _&&t.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.h)(_)))})),new RegExp("^("+t.join("|")+")")},replyTo:function(e,t,_,o){var i=window.cur.wallLayer==e?wkcur:window.cur;Wall.showEditReply(e,o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+e,t);var a=i.reply_to&&Wall.getReplyName(i.reply_to[0]);i.reply_to=[_,t];var r=Wall.getReplyName(_),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_as_group"+e),l=e.match(/^(-?\d+)_([a-z]+)?(\d+)([a-z]+)?$/),s=l[1],c=l[2]||"",d=l[4]||"",u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+s+c+"_"+t),p=u&&geByClass1("reply_to",u,"a"),b=Wall.replyNamesRE(),E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",u)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",u),O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(E,"deep_active"),m=O?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",u):null,h=m?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(m,"post-id"):e,w="";if(!O||m){var v=(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(r)?r[0]:r)||"";v='<a class="reply_to_mem" onclick="return wall.showReply(this, \''+h+"', '"+s+c+"_"+t+d+"', event);\">"+v+"</a>";var f='<span class="reply_to_cancel" onclick="return Wall.cancelReplyTo(\''+h+"', event);\"></span>",g='<div class="reply_to_label">'+langStr(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_reply_to"),"user",v)+"</div>";w=O?g+f:f+g}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to_title"+h,w);var P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+h);if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(r)&&r[1]&&window.Emoji){var M=P,D=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.val(M)));!(D=D.replace(/&nbsp;/g," "))||a&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(a)&&!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.N)(a[1]).indexOf(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.N)(D))?Emoji.val(M,r[1]):b&&(D=D.replace(b,r[1]),Emoji.val(M,D));var C=Wall.emojiOpts[e];C>=0&&Emoji.opts[C]&&Emoji.opts[C].onChange&&Emoji.opts[C].onChange(),Emoji.focus(M,!0)}if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)("reply_to_title"+h,w),n){var T=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(n.parentNode)&&s<0&&p&&p.getAttribute("rid")===s;Wall.setReplyAsGroup(n,{from:T?s:vk.id})}var y=Object(_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_42__.a)();return O&&P&&y&&Object(_web_wall_deep_replies_utils__WEBPACK_IMPORTED_MODULE_41__.a)(P,y),i.onReplyFormSizeUpdate&&i.onReplyFormSizeUpdate(),window.mvcur&&mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(o),!1},cancelReplyTo:function(e,t){var _=window.cur.wallLayer==e?wkcur:window.cur,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e),i=_.reply_to&&Wall.getReplyName(_.reply_to[0]),a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(window.Emoji?Emoji.editableVal(o):"")),r=Wall.replyNamesRE(),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",n)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",n),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"deep_active");if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(i)&&i[1]&&window.Emoji){a&&i[1].indexOf(a)?r&&(a=a.replace(r,""),Emoji.val(o,a)):(a="",Emoji.val(o,a));var c=Wall.emojiOpts[e];c>=0&&Emoji.opts[c]&&Emoji.opts[c].onChange&&Emoji.opts[c].onChange(),Emoji.focus(o,!0)}if(hide("reply_to_title"+e),s){var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"answering-id");if(d){var u=e.split("_")[1];_.reply_to=[Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(d),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(u)],Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+e,u)}else _.reply_to=!1,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+e,"")}else window.mvcur&&mvcur.post==e?mvcur.mvReplyTo=!1:_.reply_to=!1,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+e,"");return _.onReplyFormSizeUpdate&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(_.onReplyFormSizeUpdate)&&_.onReplyFormSizeUpdate(o),window.mvcur&&mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(t),!1},replySubmitTooltip:function(e,t,_){var o=e&&window.cur.wallLayer==e?wkcur:window.cur,i=e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+e)),a=i&&geByClass1("button_blue",i,"div"),r=o.replySubmitSettings;if(!(_&&a&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(a)))if(_=_||a,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"flat_button")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.k)(_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"button_disabled"))!t&&r&&r.tt&&r.tt.hide&&r.tt.hide();else if(r||(r=o.replySubmitSettings=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"reply_submit_hint_tt_point"})),t){if(_)if(r.parentNode==_&&r.tt&&r.tt.show)r.tt.show();else{r.tt&&r.tt.el&&r.tt.destroy(),_.insertBefore(r,_.firstChild);var n=Wall.customCur().wallTpl.reply_multiline?1:0,l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(Wall.customCur().wallTpl.reply_multiline_hint,{enabled:n?"on":"",disabled:n?"":"on"}),s=i&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",i)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",i)),c=s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"deep_active");Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(r,{text:l,typeClass:"tt_default_right",slide:15,shift:c?[15,8]:[0,8],asrtl:1,hasover:1,toup:!1,showdt:700,hidedt:700,dir:"auto",noZIndex:!0,onCreate:function(){radioBtns.reply_submit={els:Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("radiobtn",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_submit_hint_opts"))),val:l?1:0}}})}}else r&&r.tt&&r.tt.hide&&r.tt.hide()},onReplySubmitChanged:function(e,t){if(cur.wallTpl?cur.wallTpl.reply_multiline=e:mvcur.wallTpl&&(mvcur.wallTpl.reply_multiline=e),Wall.customCur().wallTpl&&(Wall.customCur().wallTpl.reply_multiline=e),t){var _=cur.replySubmitSettings;_&&_.tt&&_.tt.el&&_.tt.destroy()}else ajax.post("al_wall.php",{act:"a_save_ctrl_submit",value:e,hash:Wall.customCur().wallTpl.poll_hash}),window.Notifier&&Notifier.lcSend("wall_reply_multiline",{value:e})},getReplyFromId:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_as_group"+e);return!(!t||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(t.parentNode))&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",t),"from-oid")},showCheckTimer(e,t,_){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+e),a=i&&geByClass1("WallCheckComment__timer",i);if(o&&a){Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(o,{text:_.description,showdt:0,hidedt:0,shift:[0,-1],width:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(o)[0],forcetoup:!0,nohide:!0,noZIndex:browser.msie_edge,className:"WallCheckComment__tt"}),geByTag("span",a).forEach(e=>{e.style.animationDuration=_.delay+"s"}),i.classList.add("WallCheckComment--shown");var r=setTimeout(()=>{i.classList.remove("WallCheckComment--shown"),Wall.sendReply(e,void 0,t)},1e3*_.delay);a.timeout=r,a.onclick=()=>{Wall.hideCheckTimer(e,"button")},cur.destroy||(cur.destroy=[]),cur.destroy.push(()=>{r&&clearTimeout(r)}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(o)}},hideCheckTimer(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+e),i=o&&geByClass1("WallCheckComment__timer",o);if(_&&i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"check_timestamp");t&&a&&Wall.isCheckTimerShown(e)&&ajax.post("al_wall.php",{act:"check_comment_cancelled",post_raw:e,timestamp:a,reason:t}),i.timeout&&clearTimeout(i.timeout),_.tt&&_.tt.hide&&_.tt.hide(),o.classList.remove("WallCheckComment--shown"),"button"===t&&setTimeout(()=>Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(_),0)}},isCheckTimerShown(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+e);return t&&t.classList.contains("WallCheckComment--shown")},sendReply:function(e,t,_){_=extend({},_);var o,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("reply_to"+e);if(i?(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",i)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",i),"post-id"),a=a||e.split("_")[1]):o=e,window.mvcur&&mvcur.post==o)return Videoview.sendComment(o,t,_);var r,n,l,s=window.cur.wallLayer==o,c=s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+o),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(c,"deep_active"),p=s?wkcur:window.cur,b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e),E=b&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(b,"composer"),O=p.reply_to&&Wall.getReplyName(p.reply_to[0]),m=b&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(b,"send");if(m&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(m))return m(e,t,_);if(_.stickerId)n={message:"",attach1_type:"sticker",attach1:_.stickerId,sticker_referrer:_.sticker_referrer};else if(_.suggest)n={message:_.suggest};else{if((n=E?Composer.getSendParams(E,Wall.sendReply.pbind(e)):{message:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Emoji.editableVal(b))}).delayed)return;if(!n.attach1_type&&(!n.message||Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(O)&&O[1]&&!O[1].indexOf(n.message)))return void Emoji.editableFocus(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e),!1,!0)}var h=window.wkcur&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wk_content");if(b&&(h&&h.contains(b)?wkcur.wallCheckComments:p.wallCheckComments)){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"check_in_progress"))return;if(!(l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"check_timestamp")||void 0))return Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(t),void ajax.post("al_wall.php",{act:"check_comment",post_raw:o,text:n.message},{onDone(t){t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"check_timestamp",t.timestamp),t.description&&t.delay)?Wall.showCheckTimer(e,_,t):Wall.sendReply(e,void 0,_)},onFail:()=>(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"check_timestamp",Date.now()),Wall.sendReply(e,void 0,_),!0),showProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"check_in_progress",!0)},hideProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"check_in_progress",null)}});if(Wall.isCheckTimerShown(e))return void Wall.hideCheckTimer(e,"button");Wall.hideCheckTimer(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(b,"check_timestamp",null)}_.stickerId||_.suggest||(E?r=Composer.reset(E):window.Emoji&&Emoji.val(b,""),b.autosize&&b.autosize.update()),p.wallMyOpened=p.wallMyOpened||{},p.wallMyReplied[o]=1,p.wallMyOpened[o]=1;var w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_hash"+o)?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_hash"+o).value:p.options.post_hash,v=null,f=u&&(i||!s&&"full"!==p.wallType),g=wall.getRepliesOrder(o),P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(d,"top-ids"),M=!1;if(f&&d){var D=!i&&wall.isDescRepliesOrder(o,g)?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(d):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(d);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(D,"replies_next")&&(f=!1,M=!0)}extend(n,{act:"post",type:p.wallType,reply_to:o,reply_to_msg:a,reply_to_user:p.reply_to&&p.reply_to[0]||0,start_id:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("start_reply"+o),from:s?"wkview":"",hash:w,only_new:f?1:0,need_last:M?1:0,order:g,top_replies:P||null,timestamp:l}),p.reverse&&(n.rev=1);var C,T=wall.getReplyFromId(e);if(T&&(n.from_oid=T),C=p.wallType?"feed"==p.wallType?"news"==p.section?"feed_"+(p.subsection?p.subsection:p.section):"recommended"==p.section?"feed_recommended"+("recent"!=p.subsection?"_"+p.subsection:""):-1!==["friends","groups","videos","photos","list"].indexOf(p.section)?"feed_"+p.section+(p.subsection?"_"+p.subsection:""):"feed_"+p.section:"top"==p.wallType?"wall_top":"wall_"+(p.onepost?"one":(p.wallType||"").indexOf("full_")?"page":"full"):p.module,extend(n,{ref:C}),browser.mobile?Wall.hideEditReply(e):(Emoji.editableFocus(b,!1,!0),Wall.cancelReplyTo(e,t)),hide("reply_warn"+e),ajax.post("al_wall.php",Wall.fixPostParams(n),{onDone:function(t,_,i,a){if(u){if(f)return wall.onOnlyNewReplySent.apply(window,arguments);if(M)return wall.onLastChunkReplySent.apply(window,arguments);if(s)return wall.onNewReplySentLayer.apply(window,arguments)}if("full"===p.wallType)return u?FullWall.onNewReplySent.apply(window,arguments):FullWall.onReplySent.apply(window,arguments);p.wallMyReplied[o]=0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("reply_link"+o),hide("reply_warn"+o),Wall._repliesLoaded(e,!1,_,i,a),Wall.processPostReplyActions(t)},onFail:function(e){if(v&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(v),E?r=Composer.restore(E,r):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(b,n.message),b.autosize&&b.autosize.update(),e)return Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_error"),e),!0},showProgress:function(){u?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.f)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+e),!0):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+e))},hideProgress:function(){u?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.f)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+e),!1):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_button"+e))}}),window.cur.onPostReply&&window.cur.onPostReply(e),!n.from_oid&&n.message&&!f){var y=-++p.wallMyRepliesCnt,j=Emoji.emojiToHTML(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(n.message),!0),I=wall.getReplyNames(),L=n.reply_to_user<0?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_replied_to_group"):I[n.reply_to_user]&&I[n.reply_to_user][0],A=L?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(p.wallTpl.reply_link_to,{to_user:L}):"";if(v=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(p.wallTpl.reply_fast,{reply_id:"0_"+y,message:j.replace(/\n/g,"<br/>"),to_link:A,date:Wall.getNowRelTime(p)})),d&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(d)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_link"+e))Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("reply_link"+e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("replies_wrap"+e);else if(!p.onepost){var B=d.nextSibling;if(B&&"replies_open"==B.className&&Wall.openNewComments(e),!s){var R=geByClass1("wr_header",d,"a"),W=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",d,"div").length+1,k=W;R&&(k=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(R.getAttribute("offs").split("/")[1])+1),(k>5||W<k)&&(R||d.insertBefore(R=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("a",{className:"wr_header"}),d.firstChild),Wall.updateRepliesHeader(e,R,W,k))}}p.reverse?d.insertBefore(v,d.firstChild):d.appendChild(v),s&&(WkView.wallUpdateReplies(),p.reverse||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()))}},onOnlyNewReplySent:function(e,t,_){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"reply"),a=i?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",o)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",o):o,r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(a,"post-id"),n=!i&&wall.isDescRepliesOrder(r);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"deep_active")){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",o);i&&l&&(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"post-id"));var s=cur.wallLayer===r,c=Wall._getRepliesInfoBeforeAddNewReply(e,s),d=Wall._checkVisibilityBeforeAddNewReply(e,c,n,s);i&&wall.addDeepRepliesBlock(e);var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(t);n&&c.repliesListEl.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(u,c.repliesListEl.firstChild):c.repliesListEl.appendChild(u),Wall._fixScrollAfterAddNewReply(e,c,d,n,s),i&&wall.updateCollapseDeepReplies(e),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(u),wall.incReplyCounter(a),wall.addReplyNames(_)}},onLastChunkReplySent:function(e,t,_,o,i,a){var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+i),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(r,"reply"),l=n?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",r)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",r):r,s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"post-id"),c=!n&&wall.isDescRepliesOrder(s);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"deep_active")){var d=cur.wallLayer===s,u=Wall._getRepliesInfoBeforeAddNewReply(i,d),p=Wall._checkVisibilityBeforeAddNewReply(i,u,c,d);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(u.repliesListEl,t),Wall._fixScrollAfterAddNewReply(i,u,p,c,d);var b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+a);Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(b),n&&wall.updateCollapseDeepReplies(i),wall.incReplyCounter(l,1,e),wall.addReplyNames(o)}},_getRepliesInfoBeforeAddNewReply:function(e,t){var _=t?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),o=window.innerHeight||document.documentElement.clientHeight,i=_+(t?0:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("page_header_cont")[1]),a=_+o,r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(r,t)[1],l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(r)[1];return{repliesListEl:r,scrollY:_,topY:i,bottomY:a,viewportHeight:o,repliesListY:n,repliesListH:l,repliesListEndY:n+l,layerFieldH:t?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("wl_reply_form")[1]:0}},_checkVisibilityBeforeAddNewReply:function(e,t,_,o){return _?o?t.repliesListY>0&&t.repliesListY<t.viewportHeight-t.layerFieldH:t.topY<t.repliesListY&&t.bottomY>t.repliesListY:o?t.repliesListEndY>0&&t.repliesListEndY<t.viewportHeight-t.layerFieldH:t.topY<t.repliesListEndY&&t.bottomY>t.repliesListEndY},_fixScrollAfterAddNewReply:function(e,t,_,o,i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(t.repliesListEl)[1];if(o)_||Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(t.repliesListY-100,300,!1,!0);else if(_){var r=t.scrollY+a-t.repliesListH;i?wkLayerWrap.scrollTop=r:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(r,0,!1,!0)}else{var n=t.repliesListY+a-300;i?Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.b)(wkLayerWrap,{scrollTop:t.scrollY+n},300):Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(n,300,!1,!0)}},incReplyCounter:function(e,t,_){t=t||1;var o,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"post-id"),a=geByClass1("comment",e);a&&(_||(o=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(a,"count"),_=Math.max(0,o+t)),Likes.update("wall"+i,{comment_num:_}))},onNewReplySentLayer:function(e,t,_,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"),a=geByClass1("wl_replies",i);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(a,t);var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(a).filter((function(e){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"reply")})).length;extend(wkcur,{offset:_,loaded:r,count:e}),wall.addReplyNames(o),WkView.wallUpdateReplies();var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"post-id");wall.isDescRepliesOrder(n)?wkLayerWrap.scrollTop=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(i)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("wl_replies_wrap")[1]-30:wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()},postTooltip:function(e,t,_,o){if(!cur.viewAsBox){var i=(_||{}).reply,a=(_||{}).className||"",r=i&&!(i%2)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(e)[0]>420;o=o||{},i||(o.appendEl=bodyNode),Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(e,extend({url:"al_wall.php",params:extend({act:"post_tt",post:t},_||{}),slide:15,shift:[r?417:27,6,6],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",className:"rich wall_tt"+a,typeClass:r?"tt_default_right":"tt_default"},o))}},adsMarkTooltip:function(e){cur.viewAsBox||Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(e,{black:1,shift:[15,7,0],text:e.getAttribute("data-tooltip")})},hideEditPostReply:function(e,t){if(!1!==cur.editing&&(cur.wallLayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)("wl_post","deep_active")&&(t=!0),t||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(boxLayerBG)&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(layerBG))){var _=e&&e.target?e.target:{},o=_.id;cur.editing?cur.editingHide?cur.editingHide(cur.editing,_):e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_reply_wrap",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"reply_link")||o=="reply_field"+cur.editing||"reply_to_link"==_.className)||Wall.hideEditReply(cur.editing):(cur.wallAddMedia||{}).chosenMedia||e&&"post_field"==o||Wall.hideEditPost()}},postShowDeletedMessage:function(e,t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);if(_){var o=geByClass1("_post_content",_)||geByClass1("feedback_row_t",_);Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(o),hide(o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(o),"post_publish")&&hide(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(o));var i="post_del"+e,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(i),r='<span class="dld_inner">'+t+"</span>";return a?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(a,r),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(a)):_.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{id:i,className:"dld",innerHTML:r})),!0}return!1},postHideDeletedMessage:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);if(t){var _=geByClass1("_post_content",t)||geByClass1("feedback_row_t",t);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_),"post_publish")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_));var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_del"+e);return hide(o),!0}return!1},isArchiveWall:function(){return cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module},rollbackPostsArchiveState:function(e,t,_){if(Wall.isArchiveWall()&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.m)(e)){var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_rollback_state",from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_more_tab")?"profile":"wall",postId:o,hash:_},{onDone:function(e){cur.wallArchiveRolledback=!0,Wall.postShowDeletedMessage(t,e)},showProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.p)(e),hideProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.x)(e)})}},restoreLastRollbackPostsArchiveState:function(e,t,_){if(Wall.isArchiveWall()&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.m)(e)){var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_restore_last_rollback",from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_more_tab")?"profile":"wall",postId:o,hash:_},{onDone:function(e){delete cur.wallArchiveRolledback,Wall.postShowDeletedMessage(t,e)},showProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.p)(e),hideProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.x)(e)})}},postSetArchiveState:function postSetArchiveState(actionEl,postRaw,hash,state,isRollback){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.a)(actionEl)&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.m)(actionEl)){var postId=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(postRaw.split("_")[1]),isActionMenuItem=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(actionEl,"ui_actions_menu_item"),localCur=cur.wallLayer?wkcur:cur;localCur&&(localCur.wallMyDeleted||(localCur.wallMyDeleted={}),localCur.wallMyDeleted[postRaw]=!Wall.isArchiveWall()==!state?0:1);var extended=!isRollback&&(Wall.isArchiveWall()?cur.wallArchiveRestored>=3&&!cur.wallArchiveRolledback:!cur.wallArchiveArchived);ajax.post("al_wall_archive.php",{act:"a_set_state",from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_more_tab")?"profile":cur.pid?"post":"wall",hash,state:state?1:void 0,extended:extended?1:void 0,postId},{onDone:function onDone(msg,js){if(Wall.isArchiveWall()&&(state=!state,isRollback||(cur.wallArchiveRestored||(cur.wallArchiveRestored=0),cur.wallArchiveRestored++)),state&&(cur.wallArchiveArchived=!0),isRollback?Wall.postHideDeletedMessage(postRaw):Wall.postShowDeletedMessage(postRaw,msg)){"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(state?-1:1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(postEl,"reply")&&(state?--cur.pgOffset:++cur.pgOffset,state?--cur.pgCount:++cur.pgCount,FullWall.repliesSummary(cur.pgCount));var postEl=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+postRaw);"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(postEl,"own")&&(state?++cur.deletedCnts.own:--cur.deletedCnts.own),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(postEl,"all")&&(state?++cur.deletedCnts.all:--cur.deletedCnts.all),Wall.isArchiveWall()&&(state?--cur.deletedCnts.archive:++cur.deletedCnts.archive),Wall.update())}if(js)try{eval(js)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(e,js)}},showProgress:isActionMenuItem?_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n.pbind(actionEl):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.p)(actionEl),hideProgress:isActionMenuItem?_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v.pbind(actionEl):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.x)(actionEl)})}},deletePost:function(e,t,_,o,i){(cur.wallLayer?wkcur:cur).wallMyDeleted[t]=1;var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t),r=geByClass1("post_actions",a),n={act:"delete",post:t,hash:_,root:o?1:0,confirm:i?1:0,from:"wall"};cur.suggestedDeletedCount&&cur.suggestedDeletedCount>=2&&(n.delete_all=1),Object(_internal_nospam_common__WEBPACK_IMPORTED_MODULE_45__.isClaimContent)()&&(n._nol=JSON.stringify(window.nav.objLoc)),ajax.post("al_wall.php",n,{onDone:function(i,r,n){if(n)var l=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(i,n,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_delete"),(function(){l.hide(),wall.deletePost(e,t,_,o,1)}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("box_cancel"));else{Wall.postShowDeletedMessage(t,i),"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"reply")&&(cur.pgOffset--,cur.pgCount--,FullWall.repliesSummary(cur.pgCount));var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_publish_wrap"+t);s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"suggest")&&(void 0===cur.suggestedDeletedCount&&(cur.suggestedDeletedCount=0),cur.suggestedDeletedCount++),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"suggest")?Wall.suggestUpdate(-1):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"own")&&++cur.deletedCnts.own,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"all")&&++cur.deletedCnts.all,Wall.isArchiveWall()&&++cur.deletedCnts.archive,Wall.update())}},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(e):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(e):addClass(r,"post_actions_progress")},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(e):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(e):removeClass(r,"post_actions_progress")}});var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("delete_post"+t);l&&l.tt&&l.tt.el&&l.tt.destroy()},markAsSpam:function markAsSpam(el,post,hash,inline){var postEl="block_market-items"===post?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(post):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+post),adData=postEl?postEl.getAttribute("data-ad"):"";ajax.post("al_wall.php",{act:"spam",post,ad_data:adData,hash,from:inline?"inline":""},{onDone:function onDone(msg,js,js2){if("string"!=typeof js&&js2&&(js=js2),inline)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(el).replaceChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:msg}),el);else{var postSelector="#post"+post,r=el.closest(postSelector)||document.querySelector(postSelector),t=geByClass1("_post_content",r)||geByClass1("feedback_row_t",r);Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(r);var pd=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_del"+post);if(pd?(pd.innerHTML=msg,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(pd)):r.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{id:"post_del"+post,innerHTML:msg})),hide(t),js)try{eval(js)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(e,js)}adData&&Wall._setAdReportHandler(post,adData,hash)}},showProgress:function(){el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(el,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(el):inline&&(hide(el),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(el)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(el).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span",{className:"progress_inline"}))))},hideProgress:function(){el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(el,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(el):inline&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(el),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(el)))},stat:[jsc("web/privacy.js"),"privacy.css"]});var btn=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("delete_post"+post);btn&&btn.tt&&btn.tt.el&&btn.tt.destroy()},_setAdReportHandler(e,t,_){var o="ad_report_"+e,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(o+"_send");if(i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("radiobtn",o),r=geByClass1("radiobtn on",o);window.radioBtns[o]={val:r.dataset.value||1,els:a};var n=()=>{var a=_slicedToArray(e.split("_"),2),r=a[0],l=a[1],s=window.radioBtns[o].val;ajax.post("reports.php",{act:"report_ad_common",type:"ad",oid:r,item_id:l,hash:_,reason:s,ad_data:t},{onDone:()=>{delete window.radioBtns[o],i.removeEventListener("click",n),window.closeChosenReportReasonBlock(r,l),Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("reports_warning_sent"))},onFail:e=>(Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.f)(e),!1),showProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(i),hideProgress:()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(i)})};i.addEventListener("click",n)}},showIgnoreItemReasons:function(e,t,_,o,i,a,r){var n="block_market-items"===t?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(t):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t);if(n){var l=n.getAttribute("data-ad");Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(n),ajax.post("/al_wall.php?misc",{act:"get_ignore_reasons",post_raw:t,feed_raw:_,caption_type:i,uids:a,hash:o,ad_data:l,mode:r},{onDone:function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(n,e);var l="ad_hide_"+t,s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(l+"_send");if(s){var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("radiobtn",l),d=geByClass1("radiobtn on",l);window.radioBtns[l]={val:d.dataset.value||1,els:c},s.addEventListener("click",()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(s);var e=window.radioBtns[l].val;("feed"===r?window.feed.ignoreItem:wall.ignoreAdsItem)(t,_,o,i,a,e).then(()=>{delete window.radioBtns[l]}).catch(()=>Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(s))})}},showProgress:function(){e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"ui_actions_menu_item")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(e)},hideProgress:function(){e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"ui_actions_menu_item")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(e)}})}},ignoreAdsItem:function(e,t,_,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e),n=r.getAttribute("data-ad"),l=geByClass1("ui_actions_menu_wrap",r);if(r)return l&&uiActionsMenu.toggle(l,!1),Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(r),new Promise((o,i)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:e,feed_raw:t,hash:_,ad_data:n,no_html:1,reason_id:a},{onDone:function(){hide(r),o()},onFail:i})})},ignoreAdsOwner:function(e,t,_,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);i&&ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:e,owner_id:t,hash:_,list:0,no_html:1},{onDone:function(e){hide(i)},showProgress:o&&_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(o),hideProgress:o&&_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(o)})},markAsAds:function(e,t,_,o){ajax.post("al_wall.php",{act:"mark_as_ads",post:e,hash:t,full:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o)},{onDone:function(t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("ui_actions_menu_item_mark_as_ads"+e).innerHTML=t}})},restorePost:function(e,t,_){return(cur.wallLayer?wkcur:cur).wallMyDeleted[e]=0,ajax.post("al_wall.php",{act:"restore",post:e,hash:t,root:_?1:0},{onDone:function(t){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("post_del_btn"+e),Wall.postHideDeletedMessage(e)){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"reply")&&(cur.pgOffset++,cur.pgCount++,FullWall.repliesSummary(cur.pgCount)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"suggest")?Wall.suggestUpdate(1):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"own")&&--cur.deletedCnts.own,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"all")&&--cur.deletedCnts.all,Wall.isArchiveWall()&&--cur.deletedCnts.archive,Wall.update())}}}),!1},blockPostApp:function(e,t,_,o){ajax.post("al_wall.php",{act:"block_post_app",aid:e,from:t,hash:_},{onDone:function(e){o.parentNode.parentNode.innerHTML=e},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(o)})},checkPostClick:function(e,t,_){if(t=t||window.event,!e||!t)return!0;var o=t.target||t.srcElement,i=8,a=!1,r=/wall_post_text|published_comment|post_media|page_event_share|page_public_share|page_group_share|feed_friends|feed_videos|feed_explain_list|explain|feed_photos|feedback_row/;do{if(!o||o==e||o.onclick||o.onmousedown||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(o.tagName,["A","IMG","TEXTAREA","EMBED","OBJECT"])||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(o.className,["play_new","video_box_wrap"])||(a=o.className.match&&o.className.match(r)))break}while(i--&&(o=o.parentNode));if(!a)return!1;if(cur.postClicked||(cur.postClicked={}),!_||!cur.postClicked[e]){if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return!1;_&&(cur.postClicked[e]=!0,setTimeout((function(){cur.postClicked[e]=!1}),2e3))}return o||!0},postClick:function(e,t,_){_=_||{};var o,i=(e||"").match(/^(-?\d+)_(wall)?(\d+)$/),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);if(o=!!_.skipCheck||Wall.checkPostClick(a,t)){if(!0!==o){var r=geByClass1("wall_post_more",o,"a");if(r&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(r))return r.onclick(),void(i||removeClass(a,"wall_post_over"))}if(i&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(a,"suggest")&&!cur.onepost){var n=a&&a.getAttribute("data-ad"),l=a&&a.getAttribute("data-ad-block-uid"),s="/wall"+i[1]+"_"+i[3];if(browser.mobile&&t){var c={};n&&l&&(c.params={_post_ad_data:n,_post_ad_block_unique_id:l}),nav.go(s,null,c)}else Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.d)(t)?window.open(s,"_blank"):(n&&l&&(_.ads_params={post_ad_data:n,ad_block_unique_id:l}),Wall.hideEditPostReply(),Wall.postFull("wall"+i[1]+"_"+i[3],!1,_))}}},postClickStat:function(e){var t=(e=Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.h)(e)).currentTarget,_=[];t.getAttribute("data-ad-view")&&(_.push(Wall.postsGetRaws(t)),Page.postsSeen(_));var o=e.target;Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(o.getAttribute("data-post-click-type"),["post_owner_img","post_owner_link"])||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"author")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"post_image")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"post_img")?Wall.triggerAdStat(t,"click_post_owner"):("A"==e.target.nodeName&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wall_post_text",e.target,t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("page_media_thumbed_link",e.target,t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e.target,"lnk")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("lnk",e.target,t))&&Wall.triggerAdStat(t,"click_post_link")},adBlockClickStat:function(e,t){var _=(e=Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.h)(e)).currentTarget;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_ads_block_data_w")||(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_ads_block_data_w",_));var o=[];_.getAttribute("data-ad-view")&&(o.push(Wall.postsGetRaws(_)),Page.postsSeen(o)),Wall.triggerAdStat(_,t)},getAdsEvents:function(){var e=Wall._lsAdsEvents;return e||(e=Wall._lsAdsEvents=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.get(Wall.LS_ADS_EVENTS)||{}),e},cleanAdsEvents:function(){var e=Wall.getAdsEvents(),t=(new Date).getTime()/1e3|0,_=!1;each(e,(function(o,i){t-i>=3600&&(delete e[o],_=!0)})),_&&_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.LS_ADS_EVENTS,e)},triggerAdPostStat:function(e,t){Wall.triggerAdStat(e,t)},triggerAdStat:function triggerAdStat(elIdOrEl,event){for(var el="string"==typeof elIdOrEl?Wall.domPost(elIdOrEl):elIdOrEl,pixels=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-"+event);pixels;){var adBlockUID=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-block-uid"),isUniqueEvent=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(event,["load","impression","impression_long","video_start","video_play_3s","video_play_10s","video_play_25","video_play_50","video_play_75","video_play_95","video_play_100"]);if(isUniqueEvent&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-disabled-stat-"+event,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-"+event)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-"+event,null)),adBlockUID&&isUniqueEvent)try{var eventKey=Object(_web_lib_utils__WEBPACK_IMPORTED_MODULE_32__.g)(""+event+adBlockUID),lsData=Wall.getAdsEvents();if(lsData[eventKey])break;var now=(new Date).getTime()/1e3|0;lsData[eventKey]=now,_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.a.set(Wall.LS_ADS_EVENTS,lsData)}catch(e){try{console.log(e.message)}catch(e){}}pixels=pixels.split("$$$"),each(pixels,(function(e,t){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.K)().src=t}));break}var statHtml=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-html-"+event);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(el,"ad-stat-html-"+event,null),statHtml)for(var statElemWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:statHtml}),elem;elem=statElemWrap.firstChild;)if(el.appendChild(elem),"SCRIPT"===elem.tagName)try{eval(elem.innerHTML)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(e,elem.innerHTML)}},copyHistory:function(e,t,_,o){var i=(e=e||window.event).target||e.srcElement,a=8,r=!1,n=/published_a_quote/;do{if(!i||(r=i.className.match(n))||i.onclick||i.onmousedown||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(i.tagName,["A","IMG"]))break}while(a--&&(i=i.parentNode));if(r&&!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return ajax.post("al_wall.php",{act:"copy_history",post:_,offset:o,from:cur.module},{onDone:function(e){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(t)&&(hide(t),e)){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(t),"published_by_quote")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(t):t;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(_).insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(_)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.db)(_,"im_rows")?IM.updateScroll(!0):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.db)(_,"wl_post")&&WkView.wallUpdateReplies()}}}),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e)},postFull:function(e,t,_){if(e.match(/^wall-?\d+_\d+$/)&&!(_||{}).nolist&&(!cur.pgParams||!cur.pgParams.owners_only&&!cur.pgParams.q))switch(cur.wallType){case"all":case"full_all":e+="/all"}return Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.H)({w:e},!1,t,_)},checkReplyClick:function(e,t){if(t=t||window.event,!e||!t)return!1;var _=t.target||t.srcElement,o=8,i=!1;do{if(!_||_==e||_.onclick||_.onmousedown||"A"==_.tagName&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_reply_lnk")||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(_.tagName,["IMG","TEXTAREA","EMBED","OBJECT"])&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"emoji")||"wpe_cont"==_.id||(i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"_reply_content")))break}while(o--&&(_=_.parentNode));return!i||!!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString())},replyClick:function(e,t,_,o){var i=e.split("_"),a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(i[0]),r=i[1].replace(/-?\d+$/,""),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+a+r+"_"+t),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);if(!(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"closed_comments")||!cur.stickerClicked&&Wall.checkReplyClick(n,_))){(_||{}).cancelBubble=!0;var s=geByClass1("wall_reply_more",n,"a");if(s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(s))return removeClass(n,"reply_moreable"),void s.onclick();if(o){l=cur.wallLayer?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):l;var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"deep_active"),d=cur.stickerClicked||!1,u=e;if(c){var p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",n);u=p?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(p,"post-id"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"post-id")}var b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+u);cur.stickerClicked=!1,!d||b&&b.emojiInited||(cur.afterEmojiInit=cur.afterEmojiInit||{},cur.afterEmojiInit[u]=function(){Emoji.clickSticker(d,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+u))}),Wall.replyTo(u,t,o,_),d&&b&&b.emojiInited&&Emoji.clickSticker(d,b)}}},stickerClick:function(e,t,_){if((_||{}).cancelBubble=!0,window.Emoji)if(t){var o=Emoji.isStickerPackEnabled(e,Wall.stickerClick.pbind(e,t));if(0!==o)if(o){var i=t.parentNode,a=8;do{if(!i||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"reply"))break}while(a--&&(i=i.parentNode));i&&i.onclick&&(cur.stickerClicked=e,i.onclick())}else Emoji.clickSticker(e,!1)}else Emoji.clickSticker(e,!1);else stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Wall.stickerClick(e,t)}))},domPost:function(e){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e)},formatCount:function(e,t){return t=t||{},Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.l)(e,t)},likeFullUpdate:function(e,t,_){var o=t.match(/^(wall|photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(-?\d+_)(\d+)/);Likes.update(o?(o[1]||"wall")+o[2]+o[3]:t,_)},likeUpdate:function(e,t,_,o,i,a,r){r||(o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o)),!1===e&&cur.wallLayer===t&&(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post_body"));var n=t.match(/(-?\d+)(_?)(photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),l=n[1]+"_"+n[4],s=e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_content",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",e))||wall.domPost(l),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,r?"_views_wrap":a?"_share_wrap":"_like_wrap"),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(c,"_count");if(d){if(!r&&!a){var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,"_views_wrap"),p=u&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(u,"_count");!p||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(u,"_auto_update")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(p)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(p)!=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(d)||wall.likeUpdate(e,t,0,this.formatCount(o),void 0,void 0,1)}var b=c.tt||{},E=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(b.opts||{}),O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(b.container,"_value"),m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(b.container,"_content"),h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(b.container,"_title");i&&h&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(h,i),b&&(b.likeInvalidated=!0),O&&(O.value=o),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.c)(d,r?o:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(o,"%s",!0),{str:"auto",noWrapWidth:!!r}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(c,a?"my_share":"my_like",_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(c,r?"no_views":a?"no_shares":"no_likes",!o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(m,"me_hidden",!_&&!r),o?b.el&&(!1===i?b.destroy&&b.destroy():Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(b.container)||i||!1===i||tooltips.show(b.el,extend(E,{showdt:0}))):b.el&&b.hide();var w=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(o,"%s",!0);if(r){var v=geByClass1("feedback_views",s),f=0;f=o.match(/^\d+$/)?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o):5,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(v,"<em>"+o+"</em> "+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_X_post_views",f,!0))}else if(a){var g="";o>0&&(g="<em>"+w+"</em> "+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_X_shared",o,!0)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_share",s),g)}else{var P="";o>0&&(P="<em>"+w+"</em> "+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_like")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_like",s),P)}Wall.updateFeedbackVisibility(s)}},updateFeedbackVisibility:function(e){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_views",e))),_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_share",e))),o=!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(geByClass1("feedback_like",e)))&&!_&&!t;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(geByClass1("post_feedback_info",e),"empty",o)},likeShareUpdate:function(e,t,_,o,i){return Wall.likeUpdate(e,t,_,o,i,!0)},like:function(e,t){if(vk.id&&!cur.viewAsBox){var _=wall.domPost(e),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(_,"_like_wrap"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(o,"_icon"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(o,"_count"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"fw_like_icon")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(i,"fw_my_like"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(o,"my_like"),n=e.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),l=(n[3]||"wall")+n[1]+"_"+n[4],s=cur.module;cur.wallType&&(s="feed"==cur.wallType?"feed_"+("news"==cur.section&&cur.subsection?cur.subsection:cur.section):"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full")),ajax.post("like.php",{act:"a_do_"+(r?"un":"")+"like",object:l,hash:t,wall:2,from:s},{onDone:Wall.likeFullUpdate.pbind(!1,e)});var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(a);Wall.likeUpdate(!1,e,!r,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(c)+(r?-1:1)),cur.onWallLike&&cur.onWallLike()}},bookmark:function(e,t){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t),addClass(e,"bookmarked")},likeShare:function(e,t){if(vk.id&&!cur.viewAsBox){var _=e.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),o=(_[3]||"wall")+_[1]+"_"+_[4],i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("like_share_"+o),a=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(i),r=cur.wallType?"feed"==cur.wallType?"feed_"+cur.section:"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module;"top"==cur.wallType&&(r="wall_top"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(i),ajax.post("like.php",{act:"a_do_"+(a?"un":"")+"publish",object:o,hash:t,wall:2,ref:r},{onDone:Wall.likeFullUpdate.pbind(!1,e)});var n=wall.domPost(e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(n,"_like_wrap"),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(l,"_icon"),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(n,"_count")),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"fw_like_icon")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"fw_my_like"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(l,"my_like");Wall.likeUpdate(!1,e,!0,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(c)+(d?0:1))}},likeShareCustom:function(e,t){var _=e.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),o=(_[3]||"wall")+_[1]+"_"+_[4];Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("like.php",extend({act:"publish_box",object:o},t))},likeShareCheckLen:function(e,t,_){e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(t),_=_||255;var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e)).replace(/\n\n\n+/g,"\n\n");if(e.lastLen!==o.length){var i=e.lastLen=o.length,a=i-o.replace(/\n/g,"").length;i>_-50||a>4?(i>_?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("text_exceeds_symbol_limit",i-_)):a>4?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_recommended_lines",a-4)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("text_N_symbols_remain",_-i)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(t)):hide(t)}},showLikesPage:function(e,t,_){cur.likesBox.loadTabContent("like.php",{act:"a_get_members",object:e,published:t,offset:_,wall:1},t)},clearLikesCache:function(e,t){var _="^/like.php#"+Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_27__.toQueryString)({act:"a_get_members",object:e,published:t,offset:12345,wall:1,tab:t,only_content:1}).replace("12345","\\d+")+"$",o=new RegExp(_,"i");for(var i in ajaxCache)o.test(i)&&delete ajaxCache[i]},subscribeByButton:function(e,t,_,o,i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"_subscribed"),r={showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o.pbind(e),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w.pbind(e),onDone:function(){a=!a,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e,"_subscribed",a)}},n={};t>0&&i&&(n.from=i),Wall.subscribeToAuthor(a,t,_,o,r,n)},subscribeByAction:function(e,t,_,o){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.a)(e)){var i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"value"))?1:0,a={showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n.pbind(e),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v.pbind(e)},r={};t>0&&o?r.from=o:t<0&&(a=extend(a,{onDone:function(o,r,n){if(r){var l=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_warning"),r,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("group_leave_group"),(function(){l.hide(),Wall.subscribeToAuthor(i,t,_,a,"",{confirm:1})}),Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_cancel"));return!0}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,o),e.setAttribute("data-value",1-i),n&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e))}})),Wall.subscribeToAuthor(i,t,_,"",a,r)}},subscribeToAuthor:function(e,t,_,o,i,a){i=extend({onFail:function(e){setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.d)(Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_error"),e).hide,3e3)}},i),a=a||{},t>0?ajax.post("al_friends.php",extend({act:e?"remove":"add",mid:t,hash:_,from:"feed"},a),i):ajax.post("al_groups.php",extend({act:e?"list_leave":"list_enter",gid:-t,hash:_},a),i),o&&ajax.post("al_feed.php?act=viral_subscribe_stat",{author_id:t,subscribe:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(!e),hash:o})},showPhoto:function(e,t,_,o,i){return!Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("al_photos.php",{act:"photo_box",to_id:e,photo:t,hash:_},{cache:1},!!o.href&&i)},_animDelX:function(e,t,_,o){},domFC:function(e){for(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(e);e&&e.id.match(/page_wall_count_/);)e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(e);return e},domPS:function(e){for(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.D)(e);e&&e.id.match(/page_wall_count_/);)e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.D)(e);return e},scrollCheck:function(e,t,_){var o,i,a=null==t?Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)():t,r=0,n=[],l=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight;if(window.scrollAnimation)return!1;if((Wall.repliesSideUpdate(a),cur.wallPage)&&(i="suggested"==cur.wallTab?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_suggested_posts"):"top"==cur.wallTab?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_top_posts"):"donut"===cur.wallTab?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_donut_posts"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts"),(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(cur.topRow)!=i||((cur.topRow||{}).id||"").match(/page_wall_count_/))&&(cur.topRow=Wall.domFC(i)),vk.id&&cur.topRow&&!cur.topRow.id.match(/page_wall_count_/)&&!((window.curNotifier||{}).idle_manager||{}).is_idle)){for(var s=[],c=Wall.domPS(cur.topRow);c;c=Wall.domPS(c))cur.topRow.offsetTop>a&&(cur.topRow=c),c.unseen||(c.unseen=!0,s.push(Wall.postsGetRaws(c)));Page.postsUnseen(s);for(var d=cur.topRow;d;d=o){LongView&&LongView.register(d,"Wall");var u=r||d.offsetTop;if(u>=a+l)break;(((o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(d))||{}).id||"").match(/page_wall_count_/)&&(o=null),(r=o?o.offsetTop:u+d.offsetHeight)<a&&o&&(cur.topRow=o);var p=d.bits||0;p>=3||(p|=(u>=a&&u<a+l?1:0)|(r>=a&&r<a+l?2:0))&&(d.bits=p,3==p&&n.push(Wall.postsGetRaws(d)))}LongView&&LongView.onScroll(a,l),Page.postsSeen(n)}if(cur.wallAutoMore&&!cur.wallLoading&&!cur.viewAsBox){var b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(b)&&a+lastWindowHeight+1500>Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(b)[1]&&b.onclick()}},postsGetRaws:function(e){var t,_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.p)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e).children,e),o={};if(!e)return o;o.module=cur.module,o.index=_;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"_ads_promoted_post"),a=e.getAttribute("data-ad-view");a&&(o["ad_"+a]=1,i&&(o.module+="_ads_promoted_post"));var r=e.getAttribute("post_view_hash");if(r&&(o.hash=r),"block_"===e.id.substr(0,6)){o[e.id]=1,o.block=e.id.substr(6);var n=attr(e,"data-contain");n&&(n=n.split(",")).forEach((function(e){e=e.split(":"),o[e[0]]=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[1])||1}))}else(t=e.id.match(/^post(-?\d+_\d+)$/))&&(o[t[1]]=1,(t=(e.getAttribute("data-copy")||"").match(/^(-?\d+_\d+)$/))&&(o[t[1]]=-1));return o},votingExtendParams:function(e,t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"fixed")&&(e.is_fixed=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"preview")&&(e.is_preview=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"board")&&(e.is_board=1),vk.widget&&(e.is_widget=1,e.width=cur.widgetWidth,e.url=cur.url),cur.voteHash&&(e.vote_hash=cur.voteHash);var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"id");_&&(e.voting_id=_);var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"ref");o&&(e.ref=o);var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"hash");i&&(e.hash=i);var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"material");return!a||e.is_board||e.is_widget||(e.material=a),e},votingRevote:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"id");if(this.votingIsLocked(_))return;var o=this.votingExtendParams({act:"revote"},t);ajax.post("al_voting.php",o,{onDone:this.votingUpdateFull.bind(this,_),showProgress:this.votingLock.bind(this,_),hideProgress:this.votingUnlock.bind(this,_)})}},votingIsLocked:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+e),_=!1;return t.forEach(e=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"media_voting_locked")&&(_=!0)}),_},votingLock:function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+e).forEach(e=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"disabled")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"queue")||addClass(e,"media_voting_locked")})},votingUnlock:function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+e).forEach(e=>{removeClass(e,"media_voting_locked")})},votingUpdate:function(e,t){ajax.post("al_voting.php",{act:"get_layout",voting_id:e},{onDone:_=>{Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(t)&&!1===t(_)||(this.votingUpdateFull(e,_),this.votingUnlock(e))},onFail:()=>this.votingUnlock(e),showProgress:()=>this.votingLock(e)})},votingUpdateFull:function(e,t){if(e&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.A)(t)){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+e);_.length&&(_.forEach(e=>{if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"disabled")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"queue"))if(""===t)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e);else{var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(t);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"media_voting_can_vote")){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(_);addClass(o,"media_voting_just_voted"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(e,_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.nb)(o,"media_voting_just_voted")}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(e,_)}}),window.IMBRIDGE&&setTimeout(IMBRIDGE.syncHistory.bind(IMBRIDGE),0),vk.widget&&window.WPoll&&window.WPoll.resizeWidget())}},votingUpdatePartly:function(e,t){if(e&&isObject(t)&&!this.votingIsLocked(e)){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_media_voting"+e);if(_.length){var o=t.answers.reduce((e,t)=>Math.max(e,t.rate),0),i={};t.answers.forEach(e=>{e.isLeader=e.rate===o,i[e.id]=e}),_.some(_=>{if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"disabled")){if(_.classList.contains("media_voting_voted")&&!t.votes)return this.votingUpdate(e),!0;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("media_voting_option_wrap",_).forEach(e=>{var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"id"),o=i[_];if(e.tt&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.v)(e.tt.destroy)&&e.tt.destroy(),o){var a=geByClass1("media_voting_option_bar",e),r=geByClass1("media_voting_option_percent",e),n=geByClass1("media_voting_option_count",e),l=geByClass1("media_voting_option_counter",e),s=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(o.votes,"%s",!0),c=new Array(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(s).textContent.split("").length+2).join("0");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(n),c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(l),s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(r,t.votes?o.rate:""),a.style.transform=`scaleX(${.01*o.rate})`,a.style.oTransform=`scaleX(${.01*o.rate})`,o.votes?n.classList.remove("media_voting_option_count_hidden"):(n.classList.add("media_voting_option_count_hidden"),e.classList.remove("media_voting_option_voted")),o.isLeader?e.classList.add("media_voting_option_leader"):e.classList.remove("media_voting_option_leader")}});var o=geByClass1("_media_voting_footer_voted_text",_);if(o){var a;a=t.votes?vk.widget?"voting_x_voted_short":"voting_x_voted":"voting_nobody_voted",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(o,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)(a,t.votes,!0));var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("media_voting_footer_voted_friend",_);r.length>t.votes&&r.forEach(e=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(e)})}}}),window.IMBRIDGE&&window.IMBRIDGE.syncHistory(),vk.widget&&window.WPoll&&window.WPoll.resizeWidget()}}},votingUpdateByPostRaw:function(e){if(vk.id){e=e.split("_");var t=positive(e[1]),_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[0]),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_media_voting"+_+"_"+t);if(o&&o.length){var i=geByClass1("media_voting",o[0]);if(i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"id");this.votingUpdate(a)}}}},votingVote:function(e,t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"id");if(!this.votingIsLocked(_)&&vk.id){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"queue"))return this.votingUpdate(_,e=>{if(e&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.A)(e)){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(e));if(_&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"queue")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"disabled"))return this.votingVote(_,t,!0),!1}});if(t.length){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e),"wk_voting_box"),i=this.votingExtendParams({act:"vote",option_ids:t.join(",")},e);ajax.post("al_voting.php",i,{onDone:(e,t)=>{o?nav.reload():(vk.widget&&window.WPoll&&window.WPoll.updateShareMessage(t),this.votingUpdateFull(_,e))},showProgress:this.votingLock.bind(this,_),hideProgress:()=>{o||this.votingUnlock(_)}})}}else vk.widget&&Widgets.oauth()},votingButtonVote:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"media_voting_multiple")){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("media_voting_option_selected",t),o=[];_.forEach((function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"id");t&&o.push(t)})),this.votingVote(t,o)}},votingOptionVote:function(e,t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(_){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"media_voting_multiple")){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id");if(this.votingIsLocked(o)||!vk.id)return void(vk.widget&&Widgets.oauth());Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e,"media_voting_option_selected");var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("media_voting_option_selected",_).length;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(_,"media_voting_has_selected_options",i)}else{var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"id");this.votingVote(_,[a])}Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)}},votingOptionVoteAttempt:function(e,t,_,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"ref");Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.bb)("voting_vote_attempt",a,_,o)}Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)},votingOptionTooltip:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"id"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"owner-id"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"id"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"board");Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(e,{url:"al_voting.php",params:{act:"option_tt",option_id:_,owner_id:o,is_board:a,voting_id:i},slide:15,ajaxdt:100,showdt:400,hidedt:200,dir:"auto",shift:[0,10,10],typeClass:"voting_tt"})}},votingLayer:function(e,t){var _=!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"media_voting_option_wrap")&&e,o=_?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id"):0,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"media_voting")?e:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"id"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"owner-id"),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"board"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"ref"),s={w:(n?"board_poll":"poll")+r+"_"+a};if(o&&(s.opt_id=o),vk.widget)window.open(location.origin+"/"+s.w,"poll");else{var c={queue:1,noloader:!!Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)()};"story"===l&&(c.customRef="story"),Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.H)(s,!1,void 0,c)}Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(t)}},votingExport:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(t&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"board")){var _=this.votingExtendParams({act:"export_box"},t);(vk.widget?window.showBox:_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("al_voting.php",_,{onDone:function(){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.b)().setOptions({width:500})}})}},votingOnMain:function(e,t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(_){if(this.votingIsLocked(o))return;var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id"),i=this.votingExtendParams({act:"onmain",state:t?1:0},_);ajax.post("al_voting.php",i,{onDone:this.votingUpdateFull.bind(this,o),showProgress:this.votingLock.bind(this,o),hideProgress:this.votingUnlock.bind(this,o)})}},votingClosed:function(e,t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(_){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id");if(this.votingIsLocked(o))return;var i=this.votingExtendParams({act:"closed",state:t?1:0},_);ajax.post("al_voting.php",i,{onDone:this.votingUpdateFull.bind(this,o),showProgress:this.votingLock.bind(this,o),hideProgress:this.votingUnlock.bind(this,o)})}},votingNarrowAction:function votingNarrowAction(votingId,hash,action){var act,state;switch(action){case 101:act="closed",state=0;break;case 102:act="closed",state=1;break;case 103:act="onmain",state=0;break;case 104:act="onmain",state=1}act&&!cur.votingNarrowActionProgress&&ajax.post("al_voting.php",{act,voting_id:votingId,is_fixed:1,state,narrow:1,hash},{onDone:function onDone(html,js){var votingModuleEl=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("group_voting");if(votingModuleEl&&(votingModuleEl=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(votingModuleEl),html?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(votingModuleEl,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(html)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(votingModuleEl)),js)try{eval(js)}catch(e){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.d)(e,js)}},showProgress:function(){cur.votingNarrowActionProgress=!0},hideProgress:function(){cur.votingNarrowActionProgress=!1}})},votingReport:function(e,t){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.a)(e)){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("media_voting",e);if(_){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"id");if(this.votingIsLocked(o))return;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"board");ajax.post("al_voting.php",{act:"a_report_form",voting_id:o,is_board:i,hash:t},{onDone:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.h)(e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"media_voting_board")&&addClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(t),"media_voting_board"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(_,t),vk.widget&&window.WPoll&&window.WPoll.resizeWidget()},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.n)(e),this.votingLock(o)}.bind(this),hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.v)(e),this.votingUnlock(o)}.bind(this)})}}},foTT:function(e,t,_){_&&_.oid&&(t=_.oid==vk.id?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_my_friends_only"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("wpfo"+_.pid)),Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.b)(e,t)},update:function(){if(cur.wallLayer)WkView.wallUpdateReplies();else{var e="top"===cur.wallType,t="archive"===cur.wallType,_="donut"===cur.wallType;if(("all"===cur.wallType||"own"===cur.wallType||e||t||_)&&("all"===cur.wallTab||"own"===cur.wallTab||"top"===cur.wallTab||"archive"===cur.wallTab||"donut"===cur.wallTab)){var o=t?"all":e||_?"own":cur.wallType,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_more_link"),a=Wall.getPostsWrap(cur.wallType),r=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(cur.deletedCnts[o]),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)(o,a).length-r,l=!1;if((e||t||_)&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(geByClass1("no_posts",a))||e&&cur.wallTopFinished===cur.oid||t&&cur.wallArchiveFinished===cur.oid||_&&(cur.wallDonutFinished===cur.oid||Wall.cantAccessDonutPosts())))l=!0;else{var s;if(s=t?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive")):e?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_top")):_?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_donut")):"own"===o?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own")):Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all")),"suggested"!==cur.wallTab){var c=s;cur.oid<0&&cur.options.fixed_post_id&&(c-=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_posts_count",c?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(c,cur.options.wall_counts):cur.options.wall_no)}var d=n;!e&&!t&&cur.options.fixed_post_id&&cur.options.wall_oid<0&&(d+=1),l=d>=s-r}l?hide(i):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(i),i.onclick=Wall.showMore.pbind(n)),cur.wallTab==cur.wallType&&(shortCurrency(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler())}}},getAbsDate:function(e,t){t=t||window.cur;var _,o=new Date(e||Date.now()),i=o.getHours(),a=o.getMinutes(),r="";return t.wallTpl.time_system&&(r=t.wallTpl.time_system[i>11?1:0],i=i%12||12),_=i>9?i:"0"+i,a=a>9?a:"0"+a,t.wallTpl.date_format.replace("{am_pm}",r).replace("{hour}",i).replace("{num_hour}",_).replace("{minute}",a)},getNowRelTime:function(e){e=e||window.cur;var t=Date.now();return'<span class="rel_date rel_date_needs_update" time="'+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t/1e3-(e.tsDiff||0))+'" abs_time="'+Wall.getAbsDate(t,e)+'">'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_just_now")+"</span>"},getNewPostHTML:function(e,t,_,o){var i,a=(o=o||window.cur).wallTpl.post;if(a){var r,n=[],l=e[2],s=l.split("_")[0],c="",d=e[4].split("|"),u=Wall.getNowRelTime(o),p="1"===e[8];p?c=o.wallTpl.reply_link||"":s!=vk.id&&(c=o.wallTpl.own_reply_link||"");var b=e[3].replace("mem_link","author").replace("memLink","author"),E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(b),O=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.J)(E.innerText||E.textContent||""));-1!=e[6].indexOf('id="wpfo')&&(u+=`<span class="page_friends_only inl_bl dvd">${Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_post_privacy_friends")}</span>`),o.wallTpl.custom_del&&(t>(e[9]==s?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)||s==vk.id||e[9]==vk.id||e[2].split("_")[0]!=e[4])&&n.push(o.wallTpl.custom_del),t>(e[9]==s?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)||s==vk.id||e[9]==vk.id?n.push(o.wallTpl.del):e[2].split("_")[0]!=e[4]&&n.push(o.wallTpl.spam);var m=t>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR&&e[9]==s||s==vk.id||e[9]==vk.id;m&&"rss"!==e[13]&&n.push(o.wallTpl.edit),s!=vk.id&&e[9]!=vk.id||!e[6]||(e[6]=e[6].replace("vk2017_snippet_show_layer_button","vk2017_snippet_show_layer_button_hidden"));var h=s<0&&e[9]==s&&t>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR,w=Object(_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_36__.a)(e,o);return r={oid:s,name:b,actions:n.length&&(null===(i=o.wallTpl)||void 0===i?void 0:i.post_actions)?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o.wallTpl.post_actions,{actions:n.join("")}):"",replies:"",reply_link:c,own_reply_link:o.wallTpl.own_reply_link,reply_box:p&&o.wallTpl.reply_box?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o.wallTpl.reply_box,{actions:"",class:h?" reply_fakebox_with_official":""}):"",photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(d[0]),link:e[5],text:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(e[6]),date:u,post_id:e[2],poll_hash:o.wallTpl.poll_hash,date_postfix:"",user_image:"",post_url:"/wall"+l.replace("_wall_reply","_"),can_reply_as_group:h?1:"",owner_photo:h?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(d[1]||d[0]):"",owner_href:h?e[5]:"",owner_name:h?O:"",online_class:s>0?" online":"",likes:Likes.makeTemplate(o.wallTpl.post_likes,{buttons_prepend:null==w?void 0:w.template,like_class_name:null==w?void 0:w.likeClassName,object_raw:e[2]}),class:""},_&&extend(r,_(r,e)),m&&o.wallTpl.author_data&&(r.date=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o.wallTpl.author_data,{date:r.date,post_id:l})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(a,r),r)}console.error(new Error("Missing wall post template"))},getNewReplyHTML:function(e,t,_,o){var i=o||window.cur,a=i.wallTpl.reply,r=[],n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_field"+e[2])||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+e[2])||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("fwr_text"),l="",s="",c="",d=e[10]||"",u=Object(_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_36__.b)(e,i);if(a){if(t>constants.Groups.GROUPS_ADMIN_LEVEL_USER||!e[2].indexOf(vk.id+"_")||e[4]==vk.id?r.push(i.wallTpl.del_reply):e[2].split("_")[0]!=e[4]&&r.push(i.wallTpl.spam_reply),(t>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR&&e[4]==Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[2])||e[4]==vk.id)&&r.push(i.wallTpl.edit_reply),-1!=e[8].indexOf('class="wall_reply_more"')&&(l+="reply_moreable"),n)l+=" reply_replieable",s=i.wallTpl.reply_link_wrap,wall.getReplyNames()[e[4]]||wall.addReplyName(e[4],[e[11],e[12]]);l&&(c=" onclick=\"Wall.replyClick('%post_id%', %reply_msg_id%, event, %reply_uid%)\""),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(i.wallTpl.reply_actions,{actions:r.join("")});var p={name:e[5].replace("mem_link","author"),photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(e[6]),link:e[7],text:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(e[8]),classname:l,actions:r,attr:c,date:Wall.getNowRelTime(i),to_link:d,answer_link:s,post_id:e[2],reply_id:e[3],like_id:e[3].replace("_","_wall_reply"),reply_msg_id:e[3].split("_")[1],reply_uid:e[4]||"false",likes:Likes.makeTemplate(i.wallTpl.reply_likes,{buttons_prepend:null==u?void 0:u.template,like_class_name:null==u?void 0:u.likeClassName,object_raw:e[2]})};return _&&extend(p,_(p)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(a,p)}console.error(new Error("Missing wall reply template"))},updatePostImages:function(e){return e.replace(/<img[^>]+>/g,(function(e){return e.match(/class=/)?e.replace("src=","data-src=").replace('class="','class="__need_img '):e}))},loadPostImages:function(e){each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("__need_img",e,"img"),(function(){var e=this.getAttribute("data-src");e&&(this.src=e,this.removeAttribute("data-src")),removeClass(this,"__need_img")}))},openNewComments:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),_=t.nextSibling,o=geByClass1("wr_header",t,"a"),i=0,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",t,"div").length,r=a,n=_.newCnt;Wall.loadPostImages(t),each(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.d)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("new_reply",t,"div")),(function(){if(removeClass(this,"new_reply"),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(this),100==++i)return!1})),o&&(r=i+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o.getAttribute("offs").split("/")[1])),a+=-n+i,(r>3||a<r)&&(o||t.insertBefore(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("a",{className:"wr_header"}),t.firstChild),Wall.updateRepliesHeader(e,o,a,r)),cur.wallMyOpened[e]=1,_&&"replies_open"==_.className&&(n>100?(_.innerHTML=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("news_x_new_replies_more",Math.min(100,n-i)),_.newCnt-=i):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_)),Wall.repliesSideSetup(e)},langWordNumeric:function(e,t,_){return Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.n)(e,t,_)},updateTimes:function(e){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Date.now()/1e3),_=[];t-=cur.tsDiff,each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("rel_date_needs_update",e||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts"),"span"),(function(e,o){if(o){var i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(o.getAttribute("time")),a=t-i,r=Object(_web_lib_date__WEBPACK_IMPORTED_MODULE_47__.c)(a);r||(r=o.getAttribute("abs_time"),_.push(o)),o.innerHTML=r}})),each(_,(function(){removeClass(this,"rel_date_needs_update")}))},updateRepliesHeader:function(e,t,_,o){if(!cur.onepost){var i,a,r=t.href,n=3,l=0;if(!r&&(a=e.match(/^(-?\d+)_(photo|video|note|topic|video|)(\d+)$/))){var s=a[2]||"wall";switch(r="/"+s+a[1]+"_"+a[3],s){case"topic":r+="?offset=last&scroll=1";break;case"wall":r+="?offset=last&f=replies"}t.href=r}o>_?_<100?(i=o>100?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_show_n_last_replies",100):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_show_all_n_replies",o),n=!1):i=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_hide_replies"):(i=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_hide_replies"),l=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(t,"wrh_all",l),t.innerHTML=i,t.onclick=Wall.showReplies.pbind(e,n,!1),t.setAttribute("offs",_+"/"+o)}},processQueueEvent(e){if(isObject(e)&&e.entity_type)switch(e.entity_type){case"voting":this.votingUpdatePartly(e.data.id,e.data)}},updated:function(e,t,_){var o=e?window.wkcur:window.cur;if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(o.wallQueues)&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(_.events)&&_.events.length){var i=o.wallQueues.filter(e=>e.key===t).pop();if(i)if(_.failed)o.wallQueues=!1;else{i.ts=_.ts;var a=e?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.e)(),r=a,n=!(o.wallType||"").indexOf("full"),l=o.onepost,s=!!e,c=e;n&&(nav.objLoc.q||nav.objLoc.search||nav.objLoc.day)||(each(_.events,(function(){if(isObject(this))return Wall.processQueueEvent(this);var t=this.split("<!>"),_=t[0],i=t[1],a=t[2],d=0,u=0,p=e&&window.cur.wallLayer==a&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post");if(p&&"del_reply"!=i||(p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.db)(p,e?wkLayerWrap:pageNode)||(p=null)),_==o.options.qversion){switch((Wall.isArchiveWall()?"archive_post"===i:"reveal_post"===i)&&(i="res_post"),(Wall.isArchiveWall()?"reveal_post"===i:"archive_post"===i)&&(i="del_post"),i){case"new_post":if(p)break;if(n&&o.pgStart>0){o.pgOffset++;break}if(o.oid==vk.id&&vk.id==t[9]&&window.curNotifier&&curNotifier.idle_manager.is_idle&&Wall.clearInput(),"own"!==o.wallType&&"all"!==o.wallType&&!Wall.hasPosts("own"))break;var b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_posts"),E=b.lastChild,O=!!n&&FullWall.addTetaTet,m=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t[t.length-1]),h=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&m?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&m?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,w=Wall.getNewPostHTML(t,h,O,o);if(!w)break;var v=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(w),f=b.firstChild;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+a))break;for(E&&E!=v?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(E):E=!1,n?E||o.pgOffset++:(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all"))+1),addClass(v,"all"),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t[10])&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own"))+1),addClass(v,"own"))),0==t[8]&&addClass(v,"closed_comments"),o.deepRepliesActive&&addClass(v,"deep_active");f&&("INPUT"==f.tagName||1!=f.nodeType||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(f,"post_fixed"));)f=f.nextSibling;b!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(f)&&Wall.sendInsertBeforeError(),b.insertBefore(v,f),Wall.votingUpdateByPostRaw(a),Object(_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_51__.d)(v),Object(_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_52__.a)(v),d=v.offsetHeight+15,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(v,c)[1],Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(v),Object(_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_29__.d)(),Wall.updateMentionsIndex(),AudioUtils.updateQueueReceivedPost(v);break;case"edit_post":var g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpt"+a);if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(p)||!g)break;var P=geByClass1("wall_post_more",g);P&&(P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(P))),d=-g.offsetHeight,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(g,c)[1];var M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(t[3],{poll_hash:o.wallTpl.poll_hash})),D=o.videoInlinePlayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.db)(window._videoLastInlined[0],g),C=D&&"playing"==o.videoInlinePlayer.getState();if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(g,M),D){var T=geByClass1("page_post_sized_thumbs",g);1==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(T).length&&(T.innerHTML="",T.appendChild(window._videoLastInlined[1]),T.appendChild(window._videoLastInlined[0]),C&&setTimeout((function(){o.videoInlinePlayer.play()}),0))}P&&(P=geByClass1("wall_post_more",g))&&P.onclick(),Wall.votingUpdateByPostRaw(a),Object(_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_51__.d)(g),Object(_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_52__.a)(g),d+=g.offsetHeight,Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(g),Wall.updatePostAuthorData(a);break;case"edit_reply":var y=t[3],j=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wpt"+y);if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("post"+y)||!j)break;var I=geByClass1("wall_reply_more",j);I&&(I=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(I)));var L=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.jb)(t[4]);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(j,L),d=-j.offsetHeight,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(j,c)[1],I&&(I=geByClass1("wall_reply_more",j))&&I.onclick(),d+=j.offsetHeight,Object(_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_51__.d)(j),Object(_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_52__.a)(j),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(j);break;case"post_parsed_link":if(!p)break;var A=geByClass1("wall_postlink_preview_btn_disabled",p);if(!A)break;var B=t[3];if("1"===B)removeClass(A,"wall_postlink_preview_btn_disabled"),removeClass(A,"button_disabled");else if("0"===B)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(A);else if(B){var R=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("a",{href:B,className:"flat_button",innerHTML:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_preview_link")});Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(A,R)}break;case"del_post":p&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(p)&&!o.wallMyDeleted[a]&&!l&&(d-=p.offsetHeight+15,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(p,c)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(p),addClass(p,"unshown"),n||s||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all"))-1),t[3]&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own"))-1),Wall.isArchiveWall()&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive"))-1)));break;case"res_post":p&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(p)&&((o.wallRnd==t[4]||Wall.isArchiveWall())&&removeClass(p,"unshown"),n?o.pgOffset++:(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_all"))+1),t[3]&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_own"))+1),Wall.isArchiveWall()&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)("page_wall_count_archive"))+1)));break;case"new_reply":if(!p||o.wallMyReplied[a]||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t[3])||l&&o.pgOffset<o.pgCount||s&&(o.reverse?o.offset:o.offset+o.loaded<o.count))break;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+a),"deep_active")){var W=wall.addNewReply(t);d+=W[0],u=W[1];break}var k=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+a),U=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap"+a),K=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t[t.length-1]),x=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&K?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&K?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,S=Wall.getNewReplyHTML(t,x,!1,o);if(!S)break;var N,H=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(S),F=s?k.offsetHeight:p.offsetHeight,q=!1;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(k)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(U)&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("reply_link"+a)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("wall_fixed",U)){N=k.nextSibling;var z=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("new_reply",k,"div").length+1;if(s||l||o.wallMyOpened[a]){if(!l){N&&"replies_open"==N.className&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(N),q=!0;var V=geByClass1("wr_header",k,"a"),J=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",k,"div").length+1,$=J;V&&($=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(V.getAttribute("offs").split("/")[1])+1),($>5||J<$)&&(V||k.insertBefore(V=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("a",{className:"wr_header"}),k.firstChild),Wall.updateRepliesHeader(a,V,J,$))}}else addClass(H,"new_reply"),N&&"replies_open"==N.className||(N=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(a),role:"button",tabIndex:0}),k.parentNode.insertBefore(N,k.nextSibling)),N.innerHTML=Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_x_new_replies_more",Math.min(100,z)),N.newCnt=z}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)("reply_link"+a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(U,k),q=!0;e&&o.reverse&&k.firstChild?k.insertBefore(H,k.firstChild):k.appendChild(H),q&&Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(H),s?(o.count++,o.loaded++,WkView.wallUpdateReplies(),d=k.offsetHeight-F,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(H,c)[1]):(l&&(FullWall.repliesSummary(t[13]),o.pgOffset++,o.pgCount++,FullWall.repliesSummary(o.pgCount),Pagination.pageReady(!1),FullWall.onePostOnScroll(!1,!1,!0)),d=p.offsetHeight-F,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(q?H:N)[1],Wall.repliesSideSetup(a)),Object(_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_51__.d)(H),Object(_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_52__.a)(H),Wall.updateMentionsIndex(),Likes.update("wall"+a,{comment_num:t[13]});break;case"del_reply":if(o.wallMyDeleted[a]||!p)break;var G=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",p)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",p);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(G,"deep_active")){var Y=wall.removeDeepReply(t);d+=Y[0],u=Y[1];break}if(d-=p.offsetHeight,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(p,c)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(p),o.layerpost)hide(p),o.count--,o.loaded--;else{l&&(o.pgOffset--,o.pgCount--,FullWall.repliesSummary(o.pgCount));var X=p.parentNode.id.match(/replies(-?\d+_\d+)/);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(p),X&&Wall.repliesSideSetup(X[1])}break;case"view_post":Wall.likeUpdate(!1,a,0,Wall.formatCount(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t[3])),void 0,void 0,1);break;case"like_post":case"like_reply":if(!p)break;var Q="like_reply"==i?"wall_reply"+a:a,Z=p&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(p,"_like_wrap"),ee=p&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(p,"_share_wrap"),te=Object(_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_36__.c)(t);wall.likeFullUpdate(Z,Q,_extends({isQueueUpdate:!0,like_my:Z&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(Z,"my_like"),like_num:t[3],like_title:!1,share_my:ee&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(ee,"my_share"),share_num:t[4],share_title:!1},te));break;case"upd_ci":var _e=t[2],oe=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("current_info"),ie=oe||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_current_info");if(!ie)break;switch(t[3]){case"audio":var ae=geByClass1("current_audio_cnt");ae&&ae.tt&&ae.tt.hide();var re=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t[5]||""),ne=re?"":" hidden",le="";oe||(le+=" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+o.options.ciAudioTip+"', black: 1, shift: [14, 5, 5]})\" onclick=\"Page.playCurrent(this, '"+t[4]+"')\""),_e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o.options.ciAudioTpl,{text:_e,attrs:le,count:re,cnt_class:ne}),wall.updateOwnerStatus(_e,ie,t,oe);break;case"app":var se=t[6]?"[12, 5, 5]":"[15, 5, 5]",ce=t[6]?" current_app_icon":"",de=oe?' onclick="cur.ciApp = '+t[4]+'"':" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+o.options.ciAppTip+"', black: 1, shift: "+se+'})" href="'+t[5]+'?ref=14" onclick="return showApp(event, '+t[4]+', 1, 14, cur.oid)"';t[6]&&(de+=" style=\"background-image: url('"+t[6]+"'); background-size: 16px 16px;\""),_e='<a class="current_app'+ce+'"'+de+">"+_e+"</a>",wall.updateOwnerStatus(_e,ie,t,oe);break;default:stManager.add([jsc("web/emoji.js")],(function(){_e=_e?'<span class="current_text">'+Emoji.emojiToHTML(_e,!0)+"</span>":_e,wall.updateOwnerStatus(_e,ie,t,oe)}))}break;case"upd_ci_cnt":var ue=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("current_info"),pe=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(t[2]),be=ue||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_current_info"),Ee=be&&geByClass1("current_audio_cnt",be);Ee&&(Ee.tt&&Ee.tt.destroy(),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(Ee,"hidden",0==pe),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.c)(Ee,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.j)(pe,"%s",!0),{str:"auto"}));break;case"cover_updated":var Oe=geByClass1("_page_cover");if(Oe&&t[2]){var me=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.K)(),he=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.z)()?t[3]:t[2];me.src=he,me.onload=function(){Oe.style.backgroundImage="url('"+he+"')",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(me)}}}d&&(e?u<0:r+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)("page_header_cont")[1]>u)&&(r+=d)}})),r!=a&&a>100&&!o.onepost&&(e?wkLayerWrap.scrollTop=r:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(r,0,!1,!0)),Wall.update())}}},updateOwnerStatus:function(e,t,_,o){o&&(e='<span class="'+(e?"my_current_info":"no_current_info")+'">'+(e||Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("change_current_info"))+"</span>",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t.parentNode.nextSibling,e),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)("currinfo_editor")&&cur.oid>0&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)("currinfo_audio","app"!=_[3]),_[2]&&"app"!=_[3]&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("currinfo_audio"),Boolean(_[2])),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)("currinfo_app","app"==_[3]),addClass("currinfo_app","on")));Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,e)},updateMentionsIndex:function(e){if(clearTimeout(cur.wallUpdateMentionsIndexTO),e){var t={},_=[],o=new RegExp("^(https?://(vk.com|"+location.host.replace(/\./,"\\.")+"))?/?"),i=[];each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("author",bodyNode,"a"),(function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(this),i=this.href.replace(o,"");if(void 0===t[i]){var a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(this.getAttribute("data-from-id"));a&&a!=vk.id&&(t[i]=_.length,_.push([a,e,"@"+i,"/images/camera_c.gif"]))}})),i=(i=i.concat(Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_image",bodyNode,"a")))).concat(Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply_image",bodyNode,"a"))),each(i,(function(){var e=this.href.replace(o,""),i=t[e];if(void 0!==i){for(var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(this);a&&"IMG"!=a.tagName;)a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(a);a&&(_[i][3]=a.getAttribute("src"),delete t[e])}})),cur.wallMentions=_}else cur.wallUpdateMentionsIndexTO=setTimeout(wall.updateMentionsIndex.pbind(!0),300)},initUpdates:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.length&&window.Notifier){var _=t?window.wkcur:window.cur,o=()=>{_.wallQueues&&_.wallQueues.forEach(e=>{Notifier.addKey(e,(e,_)=>{Wall.updated(t,e,_)})})};if(!_.wallQueues){var i=setInterval(o,1e4);t?_._hide.push(()=>clearInterval(i)):_.destroy.push(()=>clearInterval(i))}_.wallQueues=e,o()}},initWallOptions:function(e){extend(cur,{wallCheckComments:e.check_comments,wallType:e.wall_type,wallTpl:e.wall_tpl,wallMyDeleted:{},tsDiff:e.wall_tpl&&e.wall_tpl.abs_timestamp?900*Math.round((Date.now()/1e3-e.wall_tpl.abs_timestamp)/900):0,wallMyOpened:{},wallMyReplied:{},wallMentions:[],wallMyRepliesCnt:0,wallUploadOpts:e.upload,wallUploadVideoOpts:e.upload_video,hasGroupAudioAccess:e.hasGroupAudioAccess,wallAdsReplacedFeatureTooltip:e.ads_replaced_feature_tooltip,wallAdsReplacedFeatureTooltipHash:e.ads_replaced_feature_tooltip_hash}),e.wall_tpl&&e.wall_tpl.lang&&(cur.lang=extend(cur.lang||{},e.wall_tpl.lang)),window.Notifier&&Notifier.addRecvClbk("wall_reply_multiline","wall",(function(e){Wall.onReplySubmitChanged(e.value,1)}),!0)},onPostLoaded:function(e,t){e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)(e),Wall.onAdBlockLoaded(e,t),t&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"_post")&&(e=geByClass1("_post",e)),e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"_post")&&cur.onPostLoaded&&cur.onPostLoaded(e)},onAdBlockLoaded:function(e,t){var _;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"_ads_block_data_w")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"_ads_promoted_post_data_w")?_=e:t&&(_=geByClass1("_ads_block_data_w",e)||geByClass1("_ads_promoted_post_data_w",e)),_&&Wall.triggerAdStat(_,"load")},init:function(e){var t;Wall.initWallOptions(e),extend(cur,{wallInited:!0,postField:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_field"),wallSearch:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wall_search"),wallPage:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("profile")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("group")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("public"),wallPageNarrow:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("narrow_column"),wallUploadOpts:e.upload||!1,wallOnClearInput:[],deletedCnts:{own:0,all:0,archive:0},posterFeatureTooltip:e.poster_feature_tooltip,posterFeatureTooltipHash:e.poster_feature_tooltip_hash,postCopyrightFeatureTooltip:e.post_copyright_feature_tooltip,postCopyrightFeatureTooltipHash:e.post_copyright_feature_tooltip_hash}),cur.destroy.push((function(e){Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.s)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.ab),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.s)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.Z),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.s)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.N),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.i)(e.postField)}));var _=removeEvent.pbind(document,"click",Wall.hideEditPostReply);cur._back?(cur._back.hide.push(_),cur._back.show.push(_),cur._back.show.push(addEvent.pbind(document,"click",Wall.hideEditPostReply))):cur.destroy.push(_),cur.wallTab=cur.wallType,Wall.update(),Wall.initUpdates(e.add_queues),e.wall_tpl&&(cur.timeUpdateInt=setInterval((function(){Wall.updateTimes(e.wallCont)}),1e4),cur.destroy.push((function(){clearInterval(cur.timeUpdateInt)})));var o=window;addEvent(o,"scroll",Wall.scrollCheck),addEvent(window,"resize",Wall.scrollCheck),cur.destroy.push((function(){removeEvent(o,"scroll",Wall.scrollCheck),removeEvent(window,"resize",Wall.scrollCheck)})),cur.wallAutoMore=e.automore;var i=!1;if((null===(t=cur.options)||void 0===t?void 0:t.no_draft)||(i=e.draft||cur.oid!=vk.id&&Wall.getOwnerDraft(cur.oid)),Wall.initPostEditable(i),cur.wallSearch&&placeholderInit(cur.wallSearch),removeEvent(document,"click",Wall.hideEditPostReply),addEvent(document,"click",Wall.hideEditPostReply),e.poster_options&&Wall.initPosterEditor(e.poster_options),e.media_types){var a=e.media_types.find(e=>"article"===(null==e?void 0:e[0])),r=extend({onAddMediaChange:(e,t,_)=>{cur.postCopyrightFeatureTT&&cur.postCopyrightFeatureTT.hide(),Wall.hidePosterFeatureTooltip(),Wall.postChanged(10),["poll","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_33__.b].includes(e)||wall.focusOnEnd(),cur.oid!=vk.id&&Wall.saveOwnerDraftMedia(cur.oid,e,t,_),setTimeout(Wall.checkPosterAvailability)},onChangedSize:()=>{setTimeout(()=>{var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("VideoRestriction",e);each(t,(e,t)=>{var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(t)[1],o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(t)[0];Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(t,"VideoRestriction--onlyIcon",o<200),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(t,"VideoRestriction--small",o>=200&&o<300&&o>_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(t,"VideoRestriction--medium",o>=300&&o<400)})})},onMediaChange:()=>{Wall.postChanged()},onMediaUploadStarted:()=>{Wall.postChanged()},editable:1,from:"ads"===cur.module?"ads":"post",sortable:1,poster:cur.poster,maxShown:a&&Object(_shared_user_user_env__WEBPACK_IMPORTED_MODULE_53__.b)("inline_attaches_icons")?4:3,hideAfterCount:4},e.media_opts||{});if(cur.wallAddMedia=new MediaSelector(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_add_media"),"media_preview",e.media_types,r),cur.wallAddMedia.menu){var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(cur.wallAddMedia.menu.menuNode,"_type_podcast"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official");n&&l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",l),"from-oid")!=cur.postTo&&hide(n)}}if(Wall.initPostVisibilitySelector(cur.wallAddMedia),Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__.e)(window.cur)){var s=cur.wallAddMedia&&cur.wallAddMedia.id||"",c=Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__.b)(String(s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_actions_btns"));c&&(window.cur.destroy.push(c.onDestroy),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(window.cur.wallOnClearInput)&&window.cur.wallOnClearInput.push(c.clearSelection))}if(cur.withUpload=window.WallUpload&&!browser.safari_mobile&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.o)(cur.wallType,["all","own","feed","full_all","ads_promoted_stealth"])&&Wall.withMentions&&cur.wallUploadOpts,cur.withUpload&&WallUpload.checkDragDrop()){var d=function(){removeEvent(document,"dragover dragenter drop dragleave",b)},u=!1,p=!1,b=function(e){if(!1!==u&&(clearTimeout(u),u=!1),cur.uploadInited)return d(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e);switch(e.type){case"drop":p=!1,delete cur.wallUploadFromDrag,hide("post_upload_dropbox");break;case"dragleave":u=setTimeout((function(){p=!1,delete cur.wallUploadFromDrag,hide("post_upload_dropbox")}),100);break;case"dragover":case"dragenter":p||2==(p=!e.target||"IMG"!=e.target.tagName&&"A"!=e.target.tagName?2:1)&&setTimeout(WallUpload.initCallback,0),2==p&&(cur.wallUploadFromDrag=1)}return Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e)};addEvent(document,"dragover dragenter drop dragleave",b),cur.destroy.push(d)}if(Wall.updateMentionsIndex(),e.top_wall_feature_tooltip?setTimeout((function(){Wall.showTopWallTooltip(e.top_wall_feature_tooltip_hash)}),800):e.order_feature_tooltip&&setTimeout((function(){Wall.showOrderTooltip(e.order_feature_tooltip_hash)}),800),Object(_web_wall_wall_post_render__WEBPACK_IMPORTED_MODULE_43__.a)(),nav.objLoc.new_post){Wall.showEditPost();var E=nav.objLoc.post_privacy;"friends_only"===E?Wall.togglePostVisibilityAccess(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.a.ONLY_FRIENDS,"",!0):"best_friends_only"===E&&Wall.togglePostVisibilityAccess(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("best_friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.a.ONLY_BEST_FRIENDS,"",!0),delete nav.objLoc.new_post,delete nav.objLoc.post_privacy,nav.setLoc(nav.objLoc)}},initPosterEditor:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)('<div class="page_block"></div>'),_=Wall.getMainPostBlock();"feed"===cur.module&&addClass(t,"feed_post_field_wrap");var o=function(){return!1},i=function(){Wall.closeFancyTooltipsInPost(),Wall.openPosterEditor(),cur.poster.sendStatsInfo("open")},a={onPreOpen:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(t,_)},onPostOpen:function(){var e=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(e)},onPreHide:function(){Wall.saveCaretPositionForPoster(cur.poster.getTextInputEl()),Wall.closeFancyTooltipsInPost();var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_error"),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_actions_btns"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(_,o),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(e)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(e,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(t))},onPostHide:function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_settings_btn"),o=cur.options.suggesting&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("check_sign");e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(e,cur.openPosterBtn),o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(o,cur.openPosterBtn),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(_);var i=cur.poster.getTextAsHtml();i&&i.match(Emoji.emojiRegex)&&(i=i.replace(Emoji.emojiRegex,Emoji.emojiReplace)),cur.postField.innerHTML=i,Wall.restoreCaretPositionForPoster(cur.postField),setTimeout((function(){Composer.updateArticleConvertSuggest(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(cur.postField,"composer"))})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t)},onPreUploaderOpen:function(){var e=cur.poster.getTextInputEl();Wall.saveCaretPositionForPoster(e)},onPostUploaderClose:function(){var e=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(e)},onOverTextLimit:function(){Wall.disablePoster(!0),cur.poster.closeEditor(),cur.poster.sendStatsInfo("auto_disable"),cur.poster.state.toggled=!0},onChangeData:Wall.postChanged,onSend:function(e){Wall.sendPost(!0,e)},onDestroy:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t)},getPostOwnerId:function(){return+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),"from-oid")},width:Wall.getMainPostBlock().clientWidth,containerClasses:"poster_wall-creating",placeholder:attr(cur.postField,"placeholder"),appendToElem:t};cur.openPosterBtn=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_poster_btn"),cur.poster=new Poster(e.poster_config,a),addEvent(cur.openPosterBtn,"click",i),addEvent(cur.openPosterBtn,"mousedown",o),cur.destroy.push((function(){removeEvent(cur.openPosterBtn,"click",i),removeEvent(cur.openPosterBtn,"mousedown",o)}))},openPosterEditor:function(e){if(cur.viewAsBox)return cur.viewAsBox();if(cur.poster&&!cur.poster.state.disabled&&!cur.poster.state.opened){e=e||{},cur.posterFeatureTT&&cur.posterFeatureTT.hide();var t=Wall.getMainPostBlock(),_=e.bkgId,o=window.browser.windows7||window.browser.windowsVista||window.browser.windowsXp;Wall.saveCaretPositionForPoster(cur.postField);var i=e.text||cur.postField.innerHTML;if(i=(i=i.replace(/\n/g,"<br/>")).replace(/<img[^>]*>/g,(function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:e}).firstChild,_=Emoji.getCode(t);return _?o?" ":Emoji.codeToChr(_):e})),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(t))return cur.poster.setBkg(_,!0),void cur.poster.setText(i);hide(t);var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_settings_btn"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_error"),n=cur.options.suggesting&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("check_sign"),l=cur.poster.getPostOptionsWrapperEl();if(a&&l.appendChild(a),n&&l.appendChild(n),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(r)){var s=cur.poster.getErrorWrapperElement();s.innerHTML="",s.appendChild(r)}var c=cur.poster.getBtnsWrapper(),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_actions_btns");d&&(c.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(d,c.firstChild):c.appendChild(d),d.children.length||c.children.length>1?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(c):hide(c)),cur.poster.openEditor(),cur.poster.setBkg(_,!0),cur.poster.setText(i)}},checkPosterAvailability:function(){if(cur.poster){var e=cur.wallAddMedia?cur.wallAddMedia.getMedias():[],t=cur.poster.isTextFieldValid(cur.postField),_=Wall.checkAttachesForPoster(e),o=t&&_;!o!==cur.poster.state.disabled&&Wall.disablePoster(!o),o&&cur.poster.state.toggled&&(Wall.openPosterEditor(),cur.poster.sendStatsInfo("auto_enable"),cur.poster.state.toggled=!1)}},checkAttachesForPoster(e){if(!Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(e))return!1;if(!e.length)return!0;var t=0;return e.some(e=>{if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.h)(e)){var _=_slicedToArray(e,1)[0];["copyright","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_33__.b].includes(_)||++t}}),0===t},disablePoster:function(e){cur.poster&&(void 0===e&&(e=!0),cur.poster.state.disabled=e,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(cur.openPosterBtn,"_disable",e))},isPosterEditorOpen:function(){return cur.poster&&cur.poster.isOpen()},saveCaretPositionForPoster:function(e){if(document.activeElement===e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span"),_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("span");t.classList.add("poster__marker","poster__marker_start"),_.classList.add("poster__marker","poster__marker_end");var o=getSelection().getRangeAt(0);(o=o.cloneRange()).insertNode(t),o.collapse(!1),o.insertNode(_)}},restoreCaretPositionForPoster:function(e){var t=geByClass1("poster__marker_start",e),_=geByClass1("poster__marker_end",e);if(t&&_){var o=document.createRange();o.setStartBefore(t),o.setEndBefore(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_);var i=window.getSelection();i.removeAllRanges(),i.addRange(o)}else wall.focusOnEnd(e)},getMainPostBlock:function(){var e=cur.mainPostBlock;return e||(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box")),cur.mainPostBlock=e),e},changeAuthorInPoster:function(e){cur.poster&&e&&cur.poster.changeBkgAuthor({authorName:e.authorName,authorUrl:e.authorUrl})},sendInsertBeforeError:function(){ajax.post("al_page.php",{act:"insert_before_error",trace:(new Error).stack,owner_id:cur.oid,module:cur.module})},closeFancyTooltipsInPost:function(){var e=cur.wallAddMedia.lnkId;cur["postPostponeTT"+e]&&cur["postPostponeTT"+e].hide(),cur["post_action_btn"+e]&&cur["post_action_btn"+e].hide(),Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__.f)(e)},switchOwner:function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(geByClass1("_ui_toggler",e),"on"),uiSearch.showProgress("wall_search"),cur.options.params.owners_only=cur.options.params.owners_only?null:1,nav.change({owners_only:cur.options.params.owners_only,offset:null})},fakeReplyAsGroupOver:function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("reply_fakebox_with_official",e)&&wall.replyAsGroupOver(e)},fakeReplyAsGroupCheck:function(e,t,_){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("reply_fakebox_with_official",e))return window.tooltips&&window.tooltips.hide(e),Wall.showEditReply(t,null,!1,!1,!0,(function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_as_group"+t);e&&(e.focus(),e.click())})),_&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_)},setReplyAsGroup:function(e,t){if(!e)return!1;if(e.hasAttribute("data-reinit-ads-needs-confirmation")&&window.AdsEdit&&!t.reinitConfirmed&&AdsEdit.reinitCreatingPostFormNeeded())return AdsEdit.reinitCreatingPostFormConfirm(wall.setReplyAsGroup.pbind(e,extend({},t||{},{reinitConfirmed:!0}))),!1;var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("_submit_post_box",e),o=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("signed"),i=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("close_comments"),a=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mute_notifications"),r=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official"),n=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mark_as_ads"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"tt"),s=t.from||(t.fromGroup?cur.oid:vk.id),c=s==vk.id?wall.replyAsProfileData():window.replyAsData&&window.replyAsData[s]||wall.replyAsGroupDomData(e);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"from-oid")==s||!c||c[0]!=s)return!1;var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("submit_post_box"),u=!_&&cur.poster&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("poster",e),p=_===d;u&&(_=d,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("signed"),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mark_as_ads"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("close_comments"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("mute_notifications"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("official")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"from-oid",s),wall.replyAsAnimate(_,c[2],c[1]),cur.poster&&(p||u)&&Wall.changeAuthorInPoster({authorName:c[3],authorUrl:c[2]}),l&&l.rows&&each(l.rows,(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(this,"active",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(this,"from-oid")==s)})),o&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(o,s>0),n&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(n,s>0),i&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(i,s>0),a&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.l)(n)?(addClass(a,"on"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(a,1)):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.e)(a,s>0)),r&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(r,s!==vk.id),e.setAttribute("aria-label",Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)(s<0?"wall_reply_as_group":"wall_reply_as_user")),e.hasAttribute("data-replace-owner-name")&&(e.innerHTML=c[3],"A"===e.tagName&&(e.href=c[2])),e.hasAttribute("data-replace-post-to")&&(cur.postTo=c[0]),e.hasAttribute("data-replace-oid")&&(cur.oid=c[0]),e.hasAttribute("data-reinit-ads-post-editor")&&window.AdsEdit&&(t.withoutRedraw?AdsEdit.reinitCreatingPostFormBoundWithoutRedraw():AdsEdit.reinitCreatingPostFormBound()),"official"==e.id&&Wall.postChanged(!0);var b=cur.wallAddMedia&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(cur.wallAddMedia.menu.menuNode,"_type_podcast");if(b){var E=cur.postTo==s;each(cur.wallAddMedia.getMedias()||[],(function(e,t){if("podcast"===t[0])return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(t[2],"attach_disabled",!E),E=!1,!1})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(b,E)}return e.id&&Wall.hideCheckTimer(e.id.replace("reply_as_group",""),"editing"),cur.wallAddMedia&&cur.wallAddMedia.donutUpdateVisibility(_),!1},replyAsAnimate:function(e,t,_){var o=e&&geByClass1("_post_field_author",e),i=o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_field_image",o),a=e&&geByClass1("_post_field_official",e),r=a&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_field_image",a),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"author_secondary")?0:1;o&&i&&i[n]&&(o.href=t,i[n].src=_),r&&r[n]&&(r[n].src=_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(e,"author_secondary")},replyAsGroupOver:function(e){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"checkbox_official")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"reply_fakebox_wrap_image")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"disabled"))return!1;var t,_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_submit_post_box",e),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("deep_active",e);if(t=o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",e)?[7,8,8]:o?[2,8,8]:[9,8,8],Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(e,{text:function(){return(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"from-oid")||vk.id)<0?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_on_behalf_group"):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_on_behalf_me")},black:1,shift:t}),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"reply_fakebox_wrap_image")&&(wall.isWallReply(e)||wall.isAdsCreatingPost(e))){var i="/al_groups.php",a="get_editor_clubs";wall.isAdsCreatingPost(e)&&(i="/ads_edit.php",a="a_get_promoted_post_stealth_groups"),ajax.post(i,{act:a},{cache:1})}},replyAsGroupFocus:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"tt");t&&t.isShown()||wall.replyAsGroupOver(e)},replyAsGroup:function(e,t,_){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"checkbox_official")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"disabled"))return _&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_);if(!(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"can_reply_as_any_group")>0)&&wall.isWallReply(e))return wall.replyAsGroupTT(e,t,[]),_&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_);if(!wall.isWallReply(e)&&!wall.isAdsCreatingPost(e)||cur.replyAsLoaded)wall.showReplyAsGroupTooltip(e,t);else{var o="/al_groups.php",i="get_editor_clubs";wall.isAdsCreatingPost(e)&&(o="/ads_edit.php",i="a_get_promoted_post_stealth_groups"),ajax.post(o,{act:i},{cache:1,onDone:function(_){cur.replyAsLoaded=_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(e)&&wall.showReplyAsGroupTooltip(e,t)}})}return _&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_)},showReplyAsGroupTooltip(e,t){var _=!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("can_reply_only_verified",e),o=(cur.replyAsLoaded||[]).filter(e=>!_||e[0]>0||e[4]);wall.replyAsGroupTT(e,t,o)},replyAsGroupDomData:function(e){var t,_,o,i,a;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",e)){var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",e),"post-id");r&&(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+r)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+r),_=r.split("_")[0])}else t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_submit_post_box",e),_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"oid");return t&&(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"owner-photo"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"owner-href"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"owner-name")),_&&o&&i&&a&&[_,o,i,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.J)(a))]||cur.wallTpl&&cur.wallTpl.ownerData||!1},isWallReply:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_submit_post_box",e);return t&&t.id.match(/reply_box(-?\d+)_(\d+)/)},isAdsCreatingPost:function(e){return!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("ads_edit_ad_submit_post_header",e)},replyAsProfileData:function(){return window.cur&&cur.wallTpl&&cur.wallTpl.profileData||window.wkcur&&wkcur.wallTpl&&wkcur.wallTpl.profileData||window.mvcur&&mvcur.wallTpl&&mvcur.wallTpl.profileData},replyAsGroupList:function(e,t){var _=e.hasAttribute("data-disallow-profile")?[]:[wall.replyAsProfileData()],o=wall.replyAsGroupDomData(e);return o&&_.push(o),(wall.isWallReply(e)||wall.isAdsCreatingPost(e))&&each(window.replyAsList,(function(){this[0]!=t&&_.push(this)})),_},replyAsGroupTT:function(e,t,_){window.replyAsList=_||[],window.replyAsData={},each(window.replyAsList,(function(){window.replyAsData[this[0]]=this}));var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"tt"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_submit_post_box",e),a=i&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"from-oid");if(!wall.replyAsProfileData())return!1;if(!o){var r=wall.replyAsGroupList(e,t),n="";e.hasAttribute("data-enable-search")&&(n+='<div class="post_from_tt_row_search_wrap"><input class="clear_fix post_from_tt_row post_from_tt_row_search" value="" placeholder="'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_search")+'" /><div class="post_from_tt_row_search_progress"></div></div>');var l=function(e,t,_,o,i){return'<a id="_post_from_tt_row_oid_'+t+'" class="clear_fix post_from_tt_row _post_from_tt_row_searchable'+e+'" data-from-oid="'+t+'" href="'+_+'"><img class="post_from_tt_image" src="'+o+'" aria-label="'+i+'">'+i+"</a>"};each(r,(function(){var e=a==this[0]?" active":"";n+=l(e,this[0],this[2],this[1],this[3])}));var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("deep_active",e);o=new ElementTooltip(e,{content:'<div class="post_from_tt_choose _post_scroll_wrap">'+n+"</div>",appendToParent:!0,autoHide:!0,customShow:!0,defaultSide:"bottom",offset:function(){return wall.isAdsCreatingPost(e)?[e.offsetWidth/2+8.5,-2]:s?[1,-5]:[-10,-5]},onFirstTimeShow:function(t){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_from_tt_row",t);each(_,(function(t,_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"post_from_tt_row_search")||addEvent(_,"click",wall.setReplyAsGroup.pbind(e,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(this,"from-oid")}))}));var i=geByClass1("post_from_tt_row_search",t);if(i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_from_tt_row_searchable",t),r=e.getAttribute("data-search-url"),n={};addEvent(i,"keyup valueChanged",(function(){var _=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.I)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(i)).toLowerCase();if(r&&_){e.searchRequestTimeout&&(clearTimeout(e.searchRequestTimeout),delete e.searchRequestTimeout);var s=geByClass1("post_from_tt_row_search_progress",t);geByClass1("pr",s)||Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.u)(s),e.searchRequestTimeout=setTimeout((function(){n[_]?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.i)(s):ajax.plainpost(r,{str:_},(function(i){n[_]=!0,i=JSON.parse(i),each(i,(function(){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("_post_from_tt_row_oid_"+this[0])){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(l("",this[0],this[2],this[1],this[3]));geByClass1("ui_scroll_content",t).appendChild(_),addEvent(_,"click",wall.setReplyAsGroup.pbind(e,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"from-oid")})),window.replyAsData[this[0]]||(window.replyAsData[this[0]]=this)}})),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_from_tt_row_searchable",t),setTimeout((function(){o.scroll.update(),o.updatePosition()}),0),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.i)(s)}),(function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.i)(s)}))}),500)}each(a,(function(e,t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.yb)(t,""===_||-1!==t.innerText.toLowerCase().indexOf(_))}))}))}this.rows=_,this.scroll=new uiScroll(geByClass1("_post_scroll_wrap",t)),setTimeout((function(){o.scroll.update(),o.updatePosition()}),0)},onShow:function(e){setTimeout((function(){if(o.scroll){var t=geByClass1("active",e),_=t?t.offsetTop-(o.scroll.data.viewportHeight-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(t)[1])/2:0;o.scroll.scrollTop(_);var i=geByClass1("post_from_tt_row_search",e);i&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.H)(i)}}),0)},onHide:function(e){var t=geByClass1("post_from_tt_row_search",e);t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,"")}}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"tt",o)}t&&o.isShown()&&!e.hasAttribute("data-disallow-profile")&&wall.setReplyAsGroup(e,{from:a==vk.id?t:vk.id}),e.tt&&e.tt.hide&&e.tt.hide(),o.isShown()||o.show()},reportPost:function(e,t,_){stManager.add([jsc("web/privacy.js"),"privacy.css"],(function(){return Privacy.show(e,t,"report_"+_)}))},parsePostId:_web_wall_wall_utils__WEBPACK_IMPORTED_MODULE_44__.a,likeIt:function(e,t,_,o){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(o),!vk.id)return!1;if(cur.viewAsBox)return cur.viewAsBox(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(o);var i,a=wall.parsePostId(t),r=a.type,n=a.id,l=e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_content",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",e))||wall.domPost(n),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(l,"_like_wrap"),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,"_count"),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"my_like");i=t==cur.wallLayer?"wkview":cur.wallType?"feed"==cur.wallType?"news"==cur.section?"feed_"+(cur.subsection?cur.subsection:cur.section):"recommended"==cur.section?"feed_recommended"+("recent"!=cur.subsection?"_"+cur.subsection:""):"friends"==cur.section||"groups"==cur.section||"videos"==cur.section||"photos"==cur.section?"feed_"+cur.section+(cur.subsection?"_"+cur.subsection:""):"feed_"+cur.section:"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,ajax.post("like.php",{act:d?"a_do_unlike":"a_do_like",object:r+n,hash:_,wall:2,from:i},{onDone:Wall.likeFullUpdate.pbind(e,t),onFail:function(){return!0}});var u=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.H)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(c)).replace(/(\s|,)/g,"");return Wall.likeUpdate(e,t,!d,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(u)+(d?-1:1)),"wall"==r&&window.cur.onLike&&window.cur.onLike(e,r,t,d),cur.onWallLike&&cur.onWallLike(),"wall"==r&&Wall.triggerAdStat(n,"like_post"),!1},likesShow:function(e,t,_){if(!e.postDontShowLikes){_=_||{};var o=wall.parsePostId(t),i=o.type,a=o.id,r=i+a,n=e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_content",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",e))||wall.domPost(a),l=_.views?"_views_wrap":_.share?"_share_wrap":"_like_wrap",s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(n,l),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"_feedback_info_item")?e:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,"_icon"),d=n&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(n,"_share_wrap");if(c&&!cur.viewAsBox){var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(s)[0],p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(c)[0],b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(c,!0)[0],E=p+b/2-u-41,O=_.views?{views:1}:_.share?{published:1}:{};if(_.listId&&(O.list=_.listId),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(c,"_feedback_info_item")){var m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.O)("em",c);E=-40,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(c,"feedback_share")&&(E+=7),E+=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(m)[0]/2}var h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(c,"_feedback_info_item")?c:c.parentNode;Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(h,{url:"/like.php",params:extend({act:"a_get_stats",object:r,has_share:d?1:""},O),slide:15,shift:[-E,_.views?2:"wall_reply"==i?-3:7],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",checkLeft:!0,reverseOffset:80,noZIndex:!0,tip:{over:function(){Wall.likesShow(e,t,_)}},onShowStart:function(){var t=h.tt.container;setTimeout((function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.vb)(t,{left:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.k)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.T)(t,"left"))+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(c)[0]-p})}),10),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.bb)("likes_show",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"shown"))},typeClass:"like_tt",className:_.cl||""})}}},likesShowList:function(e,t,_){_=_||{};var o=wall.parsePostId(t),i=o.type,a=o.id,r=i+a,n=e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_post_content",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",e))||wall.domPost(a),l=_.share?"_share_wrap":"_like_wrap",s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(n,l);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.m)(s,"_icon")&&!cur.viewAsBox&&Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.H)({w:(_.views?"views":_.share?"shares":"likes")+"/"+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(r)},!1,!1,{queue:1})},sharesShow:function(e,t,_){Wall.likesShow(e,t,extend(_,{share:1}))},sharesShowList:function(e,t,_){Wall.likesShowList(e,t,extend(_,{share:1}))},viewsShowList:function(e,t,_){Wall.likesShowList(e,t,extend(_,{views:1}))},viewsUpdate:function(e,t){var _=wall.parsePostId(t),o={act:"a_get_stats",object:_.type+_.id,views:1};ajax.post("/like.php",o,{cache:1,onDone:function(_,i){Wall.likeUpdate(!1,t,!1,_,void 0,void 0,1);var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.g)("div",{innerHTML:i});e.setAttribute("title",a.innerText||a.textContent),setTimeout(ajax.invalidate.pbind("/like.php",o),3e3)}})},sharesOpen:function(e,t,_){if(cur.viewAsBox)return cur.viewAsBox(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(e);if(!vk.id)return!1;Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.j)(e);var o=wall.parsePostId(t),i=o.type,a=o.id,r=i+a;return Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.b)("/like.php",extend({act:"publish_box",object:r},_)),"wall"==i&&Wall.triggerAdStat(a,"share_post"),!1},customCur:function(){return window.wkcur&&wkcur.shown?wkcur:window.mvcur&&mvcur.mvShown?mvcur:window.pvcur&&cur.pvShown?pvcur:cur},processPostReplyActions:function(e){},updatePostAuthorData:function(e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("_post_author_data_"+e).forEach((function(e){e.post_author_data_update=!0}))},closeComments:function(e,t,_,o,i){var a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"closed"))?0:1;ajax.post("al_wall.php",{act:"close_comments",owner_id:t,post_id:_,close:a,hash:o},{onDone:function(){if(i)i(a);else{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",e);Wall.onCloseComments(a,t)}}})},onCloseComments:function(e,t,_){if(t&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"postponed")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"post")&&!vk.widget){var o=geByClass1("comment",t),i=geByClass1("reply_box_inner_wrap",t),a=cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module,r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"Post--with_closed_comments_donut");if(_||r||o&&i){a||r||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(t,"closed_comments",e);var n=geByClass1("action_closing_comments",t);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(n,"closed",e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(n,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)(e?"wall_open_comments":"wall_closing_comments"))}else{var l=t.id.replace("post","").split("_");ajax.post("al_wall.php",{act:"comment_box",owner_id:l[0],post_id:l[1]},{onDone:function(_,o){if(!a){var i=geByClass1("comment",t),r=geByClass1("reply_box_inner_wrap",t);if(!i&&_){var n=geByClass1("like",t);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.B)(n))}if(!r&&o){var l=geByClass1("replies_list",t);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(o),l)}}Wall.onCloseComments(e,t,!0)}})}}},showPostEditedTime:function(e){var t=(cur.lang||{}).wall_changed;if(t){var _=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"time")),o=60*((new Date).getTimezoneOffset()+180);_&&Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(e,{text:t.replace("{time}",Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.c)(_,o)),black:1,shift:[0,4]})}},showPostAuthorData:function(e,t){var _=e.className.match(/_post_author_data_(-?\d+_\d+)/)[1]||"",o=t?t.target:window.event.srcElement;!_||o!=e&&o.onmouseover||(e.post_author_data_update&&(delete e.post_author_data_update,e.post_author_data_tt&&(e.post_author_data_tt.destroy(),e.post_author_data_tt=!1)),e.post_author_data_tt||ajax.post("al_page.php",{act:"post_author_data_tt",raw:_},{onDone:function(t){var o=geByClass1("post_link",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(e);if(t&&o){var i={content:t,arrowSize:"mini",cls:"post_author_data",defaultSide:"bottom",align:"left",id:"author_tt_"+_},a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("_im_mess_stack",e);a?i.appendTo=a:i.appendToParent=!0,vk.widget&&(i.offset=[0,-2],i.forceSide="bottom"),e.post_author_data_tt=new ElementTooltip(o,i),e.post_author_data_tt.show()}else e.post_author_data_tt=!0}}))},hideAdsReplacedTT:function(){cur.adsReplacedFeatureTT.destroy(),cur.wallAdsReplacedFeatureTooltip=null,cur.adsReplacedFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.wallAdsReplacedFeatureTooltipHash,type:"ads_in_post_replaced"})},showAdsReplacedTooltip:function(){if(!cur.adsReplacedFeatureTT){var e=setTimeout((function(){var e=geByClass1("addpost_opt");e&&(cur.adsReplacedFeatureTT=new ElementTooltip(e,{content:'<div class="ads_replaced_feature_tt__close" onclick="cur.adsReplacedFeatureTT.hide();"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_ads_in_post_replaced"),forceSide:"top",cls:"feature_intro_tt ads_replaced_feature_tt",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e),offset:[1,-10],onHide:Wall.hideAdsReplacedTT}),cur.adsReplacedFeatureTT.show())}),800);cur.destroy.push((function(){clearTimeout(e)})),cur.destroy.push((function(){cur.adsReplacedFeatureTT&&cur.adsReplacedFeatureTT.destroy()}))}},createPostTooltip:_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_40__.a,showTopWallTooltip:function(e){if(!cur.topWallFeatureTT){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_top");t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(t)||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_wall_top_more")),t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.fb)(t)&&(cur.topWallFeatureTT=new ElementTooltip(geByClass1("ui_tab",t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("ui_tab",t),{content:'<div class="feature_tooltip__close" onclick="cur.topWallFeatureTT.hide();"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_top_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.q)("page_block",t),onHide:function(){ajax.post("al_index.php",{act:"hide_feature_tt",hash:e,type:"top_wall_web"})}}),cur.topWallFeatureTT.show())}},hidePostCopyrightFeatureTooltip:function(){cur.postCopyrightFeatureTooltip&&cur.postCopyrightFeatureTooltipHash&&(cur.postCopyrightFeatureTooltip=!1,cur.postCopyrightFeatureTT.hide(),setTimeout(()=>{cur.postCopyrightFeatureTT.destroy()},ElementTooltip.FADE_SPEED),ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"}))},showPostCopyrightFeatureTooltip:function(){if(cur.postCopyrightFeatureTooltip&&!cur.postCopyrightFeatureTT){var e=setTimeout(()=>{var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_settings_btn");e&&cur.postCopyrightFeatureTooltip&&(cur.postCopyrightFeatureTT=new ElementTooltip(e,{content:'<div class="feature_tooltip__close" onclick="Wall.hidePostCopyrightFeatureTooltip();"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_post_copyright_feature_text"),cls:"feature_intro_tt feature_info_tooltip",forceSide:"bottom",autoShow:!1,noOverflow:!1,noHideOnClick:!0,appendToParent:!0,offset:[-6.5,-8],onShow:()=>{ajax.post("al_index.php",{act:"show_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"})},onWindowClick:()=>{cur.postCopyrightFeatureTT&&(cur.postCopyrightFeatureTT.hide(),cur.postField.blur())}}),cur.postCopyrightFeatureTT.show())},800);cur.destroy.push(()=>clearTimeout(e))}},hidePosterFeatureTooltip:function(){cur.posterFeatureTooltip=!1,cur.posterFeatureTT&&cur.posterFeatureTooltipHash&&(cur.posterFeatureTT.destroy(),cur.posterFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.posterFeatureTooltipHash,type:"poster_new_year"}))},showPosterFeatureTooltip:function(){if(cur.posterFeatureTooltip){var e=setTimeout((function(){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.F)(".poster__open-btn",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("page_poster_btn"));if(e&&cur.posterFeatureTooltip){var t='<div class="poster_feature_tt__layout" onclick="cur.posterFeatureTT.hide(); cancelEvent(event);"><div class="poster_feature_tt__close"></div><div class="poster_feature_tt__info">'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_new_posters_new_year")+"</div>";cur.posterFeatureTT=new ElementTooltip(e,{content:t,forceSide:"bottom",cls:"eltt_fancy poster_feature_tt",autoShow:!1,noOverflow:!1,align:"left",centerShift:-28,noHideOnClick:!0,appendToParent:!0,offset:[0,-8],onHide:Wall.hidePosterFeatureTooltip,onWindowClick:function(){cur.posterFeatureTT.hide(),cur.postField.blur()}}),cur.posterFeatureTT.show(),cur.poster&&cur.poster.sendStatsInfo("new_bkg_tooltip_show")}}),800);cur.destroy.push((function(){clearTimeout(e)}))}},toggleRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_34__.a.toggleRecommFriend,hideRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_34__.a.hideRecommFriend,onClickRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_34__.a.onClickRecommFriend,replyEditPhoto:function(e,t,_){return Wall.showEditReply(t,null,!1,!1,!1,(function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_more_attaches"+t);if(_){var o=geByClass1("ms_item_photo",_);tooltips.hide(e),o&&o.click()}})),_&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_)},replyMoreAttachShow:function(e,t,_){return Wall.showEditReply(t,null,!1,!1,!0,(function(){var e=geByClass1("ms_items_more_wrap",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_more_attaches"+t));e&&(e.focus(),e.click())})),_&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(_)},replyFakeEmojiOver:function(e){wall.initEditReply(e,!1,!0,(function(){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_smile"+e);if(t){var _,o=geByClass1("emoji_smile",t);null===(_=o.onmouseenter)||void 0===_||_.call(o)}}))},hideDeepReplies:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"reply")&&(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",t),e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"post-id"));var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"replies-offset")||0,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"replies-limit")||3,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+e),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(cur.wallTpl.reply_deep_next,{post_id:e,reply_id:e,offset:_,count:o,text:"",class:" replies_next_main"}));i.innerHTML="",i.appendChild(a),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.g)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(i)[1]-100,0,null,!0),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(a,"collapse",!0),a.click(),cur.wallMyOpened[e]=0},addNewReply:function(e){var t,_=e[2],o=(e[10]||"").match(/wall.showReply\([^-)0-9]*(-?[_0-9]+)[^-)0-9]*(-?[_0-9]+)[^-)0-9]*\)/),i=o&&o[2]||"",a=i&&i!==_,r=cur.wallLayer&&cur.wallLayer===_,n=r?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_),l=n.offsetHeight,s=0,c=0;t=a?wall._addDeepReply(e,i):wall._addRootReply(e);var d=r?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("wl_post"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+_);return wall.incReplyCounter(d,1,e[13]),r?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(geByClass1("wl_replies_wrap",d)),cur.count++,cur.loaded++):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)("replies_wrap"+_),Wall.repliesSideSetup(_)),Wall.updateMentionsIndex(),t&&(Object(_web_stories_narrative_utils__WEBPACK_IMPORTED_MODULE_51__.d)(t),Object(_web_articles_article_utils__WEBPACK_IMPORTED_MODULE_52__.a)(t),s=n.offsetHeight-l,c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(t,r)[1]),[s,c]},_addDeepReply:function(e,t){var _,o=e[2],i=e[10]||"",a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(i),r=a&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(a,"root-id")||t,n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+r),l=n&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",n),s=cur.wallLayer&&cur.wallLayer===o?wkcur:cur;if(l&&(r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"post-id"),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+r)),!n)return null;var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+r);if(!c){wall.addDeepRepliesBlock(r);var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+r)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+r);d&&hide(d),_=c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+r)}if(!c)return null;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("reply",c).length){var u=wall._addNewReplyShowMore(o,r,c,"replies_next_deep");_=_||u}else{var p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_short_deep"+r),b=wall.isDescRepliesOrder(o);if(p){var E=geByClass1("replies_short_text_count",p),O=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(E).replace(/[^0-9]/g,""))||0;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(E,Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_replied_to_reply_count",O+1))}else{p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(s.wallTpl.reply_deep_short,{post_id:o,reply_id:r,reply_msg_id:r.split("_")[1],img_src:e[6]||"",name:e[5]||"",count:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("global_replied_to_reply_count",1)}));var m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(c);if(m)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(p,m),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(m,"replies_next_deep")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.zb)(m,"replies_prev",b);else{c.appendChild(p);var h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(s.wallTpl.reply_deep_next,{post_id:o,reply_id:r,offset:0,count:1,text:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_next_n_replies",1),class:" replies_next_deep"+(b?" replies_prev":"")}));c.appendChild(h)}}addClass(l,"replies_deep_has_short"),_=p}return wall.updateCollapseDeepReplies(r),removeClass(l,"replies_deep_empty_list"),_},_addRootReply:function(e){var t=e[2],_=cur.wallLayer&&cur.wallLayer===t,o=_?wkcur:cur,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+t),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(i).length,r="full"===o.wallType,n=!a||a<3&&(_||r),l=wall.isDescRepliesOrder(t);if(n){var s=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.r)(e[e.length-1]),c=void 0!==o.options.is_admin?o.options.is_admin:o.options.wall_oid<0?8&s?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&s?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,d=Wall.getNewReplyHTML(e,c,!1,o);if(!d)throw new Error("Failed to add root reply");var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(d);return Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.k)(u),l&&i.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(u,i.firstChild):i.appendChild(u),u}return wall._addNewReplyShowMore(t,t,i,"replies_next_main",l)},_addNewReplyShowMore:function(e,t,_,o,i){var a,r,n=cur.wallLayer&&cur.wallLayer===e?wkcur:cur,l=n.options.replies_page_count||20,s=i?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.x)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.A)(_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(s,"replies_next"))return(a=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"count")||0)<l?(a++,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"count",a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(s,i?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_prev_n_replies",a):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_next_n_replies",a))):i&&(r=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"offset")||0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(s,"offset",r+1)),s;if(i)r=0;else{var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)(o,_),d=c[c.length-1],u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.p)(_);if(d){var p=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(d,"count")||l,b=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(d,"offset")||0,E=u.indexOf(d);E=(E>=0?E:0)+1,r=b+p+u.slice(E).filter((function(e){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"reply")})).length}else r=u.filter((function(e){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(e,"reply")})).length}var O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(n.wallTpl.reply_deep_next,{post_id:e,reply_id:t,offset:r,count:1,text:i?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_prev_n_replies",1):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_next_n_replies",1),class:" "+(i?" replies_prev":"")+(o?" "+o:"")}));return i?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.z)(O,_.firstChild):_.appendChild(O),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.xb)(O),O},removeDeepReply:function(e){var t=e[2],_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+t),o=0,i=0;if(cur.wallMyDeleted[t]||!_)return[o,i];i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.V)(_,cur.layerpost)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.g)(_);var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",_),r=a?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(a,"post-id"):"",n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("replies_wrap_deep",_);if(n)o=-_.offsetHeight,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.S)(n)[1]&&addClass(n,"replies_deep_empty_list"),wall.updateCollapseDeepReplies(t);else if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+t)){var l=cur.wallLayer&&cur.wallLayer===r?wkcur:cur,s=geByClass1("reply_date",_),c=geByClass1("reply_link_wrap",_),d="",u=attr(_,"onclick");u&&(d+=' onclick="'+u+'"');var p=t.split("_")[0],b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(p<0?l.wallTpl.reply_deleted_group:l.wallTpl.reply_deleted_user,{reply_id:t,date:s?s.innerHTML:"",answer:c?c.outerHTML:"",class:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"reply_replieable")?" reply_replieable":"",attr:d})),E=_.offsetHeight;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.G)(_,b),o=b.offsetHeight-E}else o=-_.offsetHeight,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.kb)(_);return cur.layerpost&&(cur.count--,cur.loaded--),a&&(wall.repliesSideSetup(r),wall.incReplyCounter(a,-1)),[o,i]},addDeepRepliesBlock:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post"+e);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(t,"reply")){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("wl_post",t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("post",t);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ab)(_,"deep_active")){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(_,"post-id"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies_wrap_deep"+e),a=(cur.wallLayer?wkcur:cur).wallTpl;i||(i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(a.reply_deep,{post_id:o,reply_id:e,reply_msg_id:e.split("_")[1],text:"",offset:0,class:" replies_next_deep"})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.y)(i,t));var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+e),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+e);if(!r&&!n){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_fakebox"+o)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("reply_box"+o),s=geByClass1("checkbox_official",l)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Y)("reply_fakebox_with_official",l),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(a.reply_box,{post_id:e,owner_name:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.c)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"owner-name")||""),owner_photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"owner-photo")||"",owner_href:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(l,"owner-href")||"",can_reply_as_group:s||"",class:s?" reply_fakebox_with_official":""}));i.appendChild(c),addClass(i,"replies_deep_has_field")}}}},addReplyName:function(e,t){var _={};_[e]=t,wall.addReplyNames(_)},addReplyNames:function(e){var t=cur.wallLayer?wkcur:cur;t.options||(t.options={}),t.options.reply_names=extend({},t.options.reply_names,e)},getReplyNames:function(){return(cur.wallLayer?wkcur:cur).options.reply_names||{}},getReplyName:function(e){return cur.pvShown&&cur.pvReplyNames?cur.pvReplyNames[e]||[]:window.mvcur&&mvcur.mvShown&&!mvcur.minimized?mvcur.mvReplyNames[e]||[]:wall.getReplyNames()[e]||[]},showReorderRepliesTooltip:function(e,t){var _=cur.wallLayer&&cur.wallLayer===t?wkcur:cur;if(!_["postRepliesReorderTT"+t]&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.l)(e,"ett")){var o,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.C)(e);o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"hide-smart")||!1?_.wallTpl.replies_reorder_tooltip:_.wallTpl.replies_reorder_tooltip_with_smart;var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(o||"",{postId:t})),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("radiobtn",a),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"order")||"asc";radioBtns["post_replies_reorder"+t]={val:n,els:r},r.some((function(e){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"order")===n)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.c)(e,!0),!0}));var l=new ElementTooltip(e,{appendTo:i,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-10,0],content:a,align:"left"});_["postRepliesReorderTT"+t]=l,cur.destroy.push((function(){l&&l.destroy()})),l.show()}},reorderReplies:function(e,t,_){var o=cur.wallLayer&&cur.wallLayer===t?wkcur:cur;_=_||"asc",Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.r)(e,_,"post_replies_reorder"+t);var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_replies_reorder"+t),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"label")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(i,a),i.setAttribute("aria-label",a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"order",_),o["postRepliesReorderTT"+t]&&o["postRepliesReorderTT"+t].hide(),wall.moreReplies(t,0,0,{deep:!0,clear:!0,order:_,onDone:function(e,_,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("replies"+t);if(o.count>o.offset+o.num){var a=cur.wallLayer&&cur.wallLayer===t?wkcur:cur,r=a.options.replies_page_count||20,n=Math.min(r,o.count-o.offset-o.num),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rb)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.qb)(a.wallTpl.reply_deep_next,{post_id:t,reply_id:t,offset:o.offset+o.num,count:n,text:Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_next_n_replies",n),class:" replies_next_main"}));i.appendChild(l)}o.top_reply_ids&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(i,"top-ids",o.top_reply_ids.join(",")),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[t]=1,wall.repliesSideSetup(t)}})},getRepliesOrder:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.J)("post_replies_reorder"+e);return(t?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(t,"order"):"")||"asc"},isDescRepliesOrder:function(e,t){return"desc"===(t=t||wall.getRepliesOrder(e))},postEventChangeStatus:function(e,t,_,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"context");return stManager.add([jsc("web/groups.js")],()=>{Groups.enter(e,t,_,i,(e,_,o)=>{var a=i.split("_"),r=!a[1],n=a[0]+"_"+(r?"decline":""),l=r?Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("events_snippet_will_participate_active"):Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("events_snippet_cant_participate_active");o=o||{},Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_event_action_btn"+t).forEach(e=>{addClass(e,"secondary"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(e,l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.v)(e,"context",n)}),o.members&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("page_media_event"+t).forEach(e=>{var t=geByClass1("page_media_event_members",e);t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.Cb)(t,o.members)})},{showProgress:()=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_event_action_btn"+t).forEach(e=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.o)(e)})},hideProgress:()=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.K)("post_event_action_btn"+t).forEach(e=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.w)(e)})}})}),o&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.c)(o)},showEventFriends:function(e,t){Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.c)(e,{url:"/al_groups.php",params:{act:"a_event_friends_tt",owner_id:t},ajaxdt:100,showdt:400,hidedt:200,dir:"auto",noZIndex:!0,typeClass:"like_tt"})},showOrderTooltip:function(e){var t=geByClass1("post_replies_reorder");t&&(cur.orderFeatureTT=new ElementTooltip(t,{content:'<div class="feature_tooltip__close" onclick="cur.orderFeatureTT.hide();"></div>'+Object(_web_lib_react_lang_utils__WEBPACK_IMPORTED_MODULE_49__.b)("wall_order_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip order_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendToParent:!0,offset:[0,-4],onHide:()=>{ajax.post("al_index.php",{act:"hide_feature_tt",hash:e,type:"order_web"}),cur.orderFeatureTT.destroy(),delete cur.orderFeatureTT}}),cur.orderFeatureTT.show())},updateRepliesOnScroll:function(){cur.wallLayer?WkView.wallUpdateRepliesOnScroll():"full"===cur.wallType&&FullWall.onePostOnScroll()}};__webpack_exports__.a=Wall},r6iD:function(e,t,_){"use strict";_.d(t,"a",(function(){return s}));var o,i,a=_("12ku"),r=_("El3O"),n=_("lXE5"),l=_("zxIV");function s(e){var t,_=document.getElementById(e.module);if(_&&_.classList.contains("module")){window.cur.__narrowBarForceNotFixed=!0;var s=e.speed?e.speed:300;Object(n.g)(Object(l.V)(_)[1]-100,s);var c=function(){o&&(o.hideTT(),Object(n.b)(),delete window.cur.__narrowBarForceNotFixed,Object(r.n)(),e.onClose&&e.onClose())};(o=new a.b(_,e.text,{highlight:!0,width:250,offset:[0,-17],side:"bottom",withCloseButton:!0,onBGClick:c,onCloseButtonClick:c})).show(),Object(n.a)(),e.autoCancelDelay&&(i=setTimeout((function(){c(),i=null}),e.autoCancelDelay),null===(t=window.cur.destroy)||void 0===t||t.push((function(){i&&clearTimeout(i)})))}}},rJNF:function(e,t,_){"use strict";_.d(t,"f",(function(){return Ee})),_.d(t,"b",(function(){return Oe})),_.d(t,"g",(function(){return me})),_.d(t,"a",(function(){return he})),_.d(t,"c",(function(){return ve})),_.d(t,"d",(function(){return fe})),_.d(t,"h",(function(){return ge})),_.d(t,"e",(function(){return Pe}));var o,i=_("q1tI"),a=_.n(i),r=_("ppaw"),n=_("vkmG"),l=_("dV62"),s=_("jmhT"),c=_("BiHW"),d=_("6krn"),u=function(e){var t=e.title,_=e.count,o=void 0===_?0:_,i=e.showNarrativeNumber,r=void 0===i||i;return a.a.createElement("div",{className:"NarrativeBoxTitle"},t,r&&o>0&&a.a.createElement("span",{className:"NarrativeBoxTitle__count"},o))};!function(e){e[e.view=0]="view",e[e.edit=1]="edit"}(o||(o={}));var p,b,E=_("XuKo"),O=_("xt6h"),m=function(){return(m=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=function(e,t){var _={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(_[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(_[o[i]]=e[o[i]])}return _},w=a.a.memo((function(e){e.id;var t,_=e.title,o=e.subtitle,i=e.preview,r=e.aside,l=e.href,s=e.onClick,c=e.className,d=void 0===c?"":c,u=e.size,p=void 0===u?58:u,b=h(e,["id","title","subtitle","preview","aside","href","onClick","className","size"]),E=Boolean(s||l);return _=Object(n.a)(_),t=l?a.a.createElement("a",{href:l,className:"NarrativeRowBase__title",onClick:s},_):a.a.createElement("span",{className:"NarrativeRowBase__title",onClick:s},_),a.a.createElement("div",m({className:Object(O.a)("NarrativeRowBase","NarrativeRowBase--previewSize"+p,d,{"NarrativeRowBase--clickable":E})},b),a.a.createElement("div",{className:"NarrativeRowBase__preview"},i),a.a.createElement("div",{className:"NarrativeRowBase__inner"},a.a.createElement("div",{className:"NarrativeRowBase__main"},a.a.createElement("div",{className:"NarrativeRowBase__title"},t),o&&a.a.createElement("div",{className:"NarrativeRowBase__subtitle"},o)),r&&a.a.createElement("div",{className:"NarrativeRowBase__aside"},r)))})),v=_("H4Lr"),f=function(){return(f=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},g=a.a.memo((function(e){var t=e.onClick,_=e.clickable,o=void 0!==_&&_,i=e.size,r=void 0===i?58:i,n=Object(d.b)("stories_create_new_narrative"),l=a.a.createElement("div",{className:Object(O.a)("NarrativeRowCreation__preview","NarrativeRowCreation__preview--size"+r)},a.a.createElement(v.a,null));return a.a.createElement("div",f({className:Object(O.a)("NarrativeRowCreation NarrativeListItem",{"NarrativeRowCreation--clickable":o})},{nodrag:"true"}),a.a.createElement(w,{className:"NarrativeRowCreation__inner",title:n,onClick:t,preview:l,size:r}))})),P=_("4PuL"),M=_("3blr"),D=_("kcIO"),C=_("jE6c"),T=_("n3cE"),y=_("yuXj"),j=_("/PiP"),I=_("nTq2"),L=_("4WSo"),A=_("F7NX"),B=a.a.memo((function(e){var t,_,o,i,r=e.narrative,n=e.aside,l=e.onClick,s=e.className,c=e.clickable,u=e.size,p=e.noBorder,b=!r.storiesCount,E=b?"":"/narrative"+r.ownerId+"_"+r.id;return b?(t=a.a.createElement(L.a,{isDraft:!0,extra:a.a.createElement(A.a,null),size:u}),_=a.a.createElement(a.a.Fragment,null,Object(d.b)("groups_narrative_box_stories_count",r.storiesCount),a.a.createElement("span",{className:"dvd"}),a.a.createElement("span",null,Object(d.b)("stories_narratives_draft")))):(t=a.a.createElement(L.a,{onClick:l,size:u,cover:r.coverUrl,href:E,noBorder:p}),_=a.a.createElement("span",null,Object(d.b)("groups_narrative_box_stories_count",r.storiesCount))),c?o=l:b||(i=l),a.a.createElement("div",{className:Object(O.a)("NarrativeRow NarrativeListItem",s,{"NarrativeRow--clickable":c}),"data-id":r.id,onClick:o},a.a.createElement(w,{className:"NarrativeRow__inner",href:E,onClick:i,preview:t,id:r.id,title:r.title,subtitle:_,size:u,aside:n}))})),R=_("UCWv"),W=_("n7oi"),k=_("/ZeZ"),U=_("1UEa"),K=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function _(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(_.prototype=t.prototype,new _)}),x=function(e,t){for(var _=0,o=t.length,i=e.length;_<o;_++,i++)e[i]=t[_];return e},S=function(e){function t(t){var _=e.call(this,t)||this;return _.getBoxActionButtons=function(){var e=_.props,t=e.onClose,i=e.boxData,r=e.type,n=[a.a.createElement(c.a,{key:"close",appearance:"primary",onClick:function(){return t()}},Object(d.b)("global_close"))];if(r===o.edit&&i.userId===i.ownerId){var l=i.ownerDomain||"id"+i.userId;n.unshift(a.a.createElement(T.a,{key:"archive",href:l+"?w=stories",onClick:function(){t(),Object(j.H)({w:"stories"})},className:"NarrativeBox__additionalFooterButton"},Object(d.b)("stories_archive")))}return n},_.onNarrativeClick=function(e,t){if(!e.ctrlKey&&!e.metaKey){e.preventDefault(),e.stopPropagation();var o=_.props.list?_.props.list:"narrative"+t.ownerId+"_"+t.id;Object(E.b)(t.ownerId,t.id,0,o,{trackCode:_.props.trackCode,source:_.props.source})}},_.onCreateNarrativeClick=function(){var e=_.props,t=e.boxData,o=e.navScreen,i=t.ownerId;if(Object(U.c)(U.a.createNarrative,i,0,o),i>0)_.openNarrativeEditorBox();else{var a=t.ownerDomain?t.ownerDomain:"club"+-i;window.open("https://"+location.hostname+"/"+a+"?act=narrative_create")}},_.openNarrativeEditorBox=function(e){var t=_.props,o=t.onSave,i=t.boxData,a=t.onClose,r=t.navScreen;if(o){var n=[];(null==e?void 0:e.stories.length)&&(n=x([],e.stories));var l={narrative:e,selectedStories:n,publishHash:i.publishHash,onSave:function(e){o(e),a()},navScreen:r};Ee(i.ownerId,l)}},_.getNarrativeItemActions=function(e){var t=[];if(_.canEdit())t.push({text:Object(d.b)("global_edit"),onClick:function(){return _.editNarrative(e)}}),t.push({text:Object(d.b)("stories_share"),onClick:function(){return _.shareNarrative(e)}}),t.push({separator:!0}),t.push({text:Object(d.b)("global_delete"),onClick:function(){return _.removeNarrative(e)}});else{var o=e.isBookmarked?Object(d.b)("global_remove_from_bookmarks"):Object(d.b)("global_add_to_bookmarks");t.push({text:o,onClick:function(){return _.bookmarkNarrative(e)}}),t.push({text:Object(d.b)("stories_share"),onClick:function(){return _.shareNarrative(e)}})}return t},_.state={isLoad:!1,draggingNarrativeRawId:""},_.scrollContainerRef=a.a.createRef(),_.gridRef=a.a.createRef(),_.sentinelRef=a.a.createRef(),_}return K(t,e),t.prototype.render=function(){var e=this,t=this.props,_=t.narratives,o=t.onClose,i=t.boxData,r=this.state,n=r.isLoad,l=r.draggingNarrativeRawId,c=_.length<i.count,d=this.canEdit();return a.a.createElement(s.a,{className:"NarrativeBox",title:this.getTitle(),actionButtons:this.getBoxActionButtons(),onClose:o,hasScroll:!1},a.a.createElement("div",{className:"NarrativeBox__scrollContainer",ref:this.scrollContainerRef},a.a.createElement("div",{className:"NarrativeBox__scrollInner"},a.a.createElement("div",{className:"NarrativeBox__list",ref:this.gridRef},d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(g,{key:"create",onClick:this.onCreateNarrativeClick}),_.map((function(t){return a.a.createElement(B,{className:R.a,narrative:t,key:t.rawId,onClick:function(_){return e.onNarrativeClick(_,t)},aside:a.a.createElement("div",{className:"NarrativeBox__aside"},t.rawId===l&&a.a.createElement("div",{className:"NarrativeBox__action NarrativeBox__action--more"},a.a.createElement(W.a,null)),t.rawId!==l&&a.a.createElement(y.a,{position:"b",align:"center",trigger:"hover",data:e.getNarrativeItemActions(t)},a.a.createElement("div",{className:"NarrativeBox__action NarrativeBox__action--more"},a.a.createElement(W.a,null))),a.a.createElement("div",{className:"NarrativeBox__action NarrativeBox__action--burger"},a.a.createElement(k.a,null)))})}))),!d&&a.a.createElement(a.a.Fragment,null,_.map((function(t){return a.a.createElement(B,{narrative:t,key:t.rawId,onClick:function(_){return e.onNarrativeClick(_,t)},aside:a.a.createElement("div",{className:"NarrativeBox__aside"},a.a.createElement(y.a,{position:"b",align:"right",trigger:"hover",data:e.getNarrativeItemActions(t)},a.a.createElement("div",{className:"NarrativeBox__action NarrativeBox__action--more"},a.a.createElement(W.a,null))))})})))),n&&a.a.createElement("div",{className:"NarrativeBox__loader",key:"loader"},a.a.createElement(M.default,null)),c&&a.a.createElement("div",{className:"NarrativeBox__sentinel",ref:this.sentinelRef}))))},t.prototype.canEdit=function(){var e=this.props,t=e.type,_=e.onSave,i=e.onReorder,a=e.onRemove;return t===o.edit&&Boolean(_)&&Boolean(i)&&Boolean(a)},t.prototype.componentDidMount=function(){this.initSorter(),this.observeNarrativeScrollIfNeeded()},t.prototype.componentWillUnmount=function(){this.deInitSorter(),this.unObserveNarrativeScrollIfNeeded()},t.prototype.editNarrative=function(e){var t=this.props.boxData;Object(U.c)(U.a.clickToEditNarrative,e.ownerId,e.id,this.props.navScreen),t.ownerId>0?this.openNarrativeEditorBox(e):window.open("https://"+location.hostname+location.pathname+"?act=narrative_edit&nid="+e.id)},t.prototype.shareNarrative=function(e){I.a.share("narrative"+e.rawId),Object(U.c)(U.a.shareNarrative,e.ownerId,e.id,this.props.navScreen)},t.prototype.bookmarkNarrative=function(e){var t=this.props.onBookmark;Object(j.c)(e.ownerId,e.id,"narrative",e.bookmarkHash,e.isBookmarked),Object(U.c)(U.a.addToBookmarks,e.ownerId,e.id,this.props.navScreen),t(e)},t.prototype.removeNarrative=function(e){var t,_;null===(_=(t=this.props).onRemove)||void 0===_||_.call(t,e)},t.prototype.observeNarrativeScrollIfNeeded=function(){var e=this,t=this.props,_=t.narratives,o=t.boxData;if(_.length<o.count){var i=this.scrollContainerRef.current,a=this.sentinelRef.current;if(!a)return;this.observer=new IntersectionObserver((function(t){t.forEach((function(t){t.intersectionRatio>0&&e.loadViewers()}))}),{threshold:[0],root:i,rootMargin:"0px 0px 480px 0px"}),this.observer.observe(a)}},t.prototype.unObserveNarrativeScrollIfNeeded=function(){this.observer&&this.observer.disconnect()},t.prototype.loadViewers=function(){var e=this,t=this.props.loadMore;this.state.isLoad||(this.setState({isLoad:!0}),t().finally((function(){e.setState({isLoad:!1})})))},t.prototype.initSorter=function(){var e,t,_=this,o=this.props.boxData;if(this.canEdit()){var i=null===(e=this.scrollContainerRef)||void 0===e?void 0:e.current,a=null===(t=this.gridRef)||void 0===t?void 0:t.current;if(a&&i){var r={dragThreshold:0,wrapNode:i,onDragFinish:function(){_.setState({draggingNarrativeRawId:""})},onDragStart:function(e){var t=_.getNarrativeIdByEl(e);_.setState({draggingNarrativeRawId:o.ownerId+"_"+t})},onReorder:function(e){var t=_.getNarrativeIdByEl(e),o=Array.from(a.querySelectorAll("."+R.a));if(1!==o.length){var i=0,r=0,n=o.findIndex((function(e){return _.getNarrativeIdByEl(e)===t}));o[n-1]&&(i=_.getNarrativeIdByEl(o[n-1])),o[n+1]&&(r=_.getNarrativeIdByEl(o[n+1])),_.saveReorder(t,r,i)}}};this.sorter=new P.a(a,"",r)}}},t.prototype.saveReorder=function(e,t,_){var o=this,i=this.props,a=i.boxData,r=i.onReorder;if(r){var n=a.ownerId;window.ajax.post("al_stories.php",{act:"narratives_reorder",narrative_id:e,before_narrative_id:t,after_narrative_id:_,hash:a.reorderHash,owner_id:n},{onDone:function(){var t,_=o.props.narratives,i=null===(t=o.gridRef)||void 0===t?void 0:t.current;if(i){var a=Array.from(i.querySelectorAll("."+R.a)),l=[];a.forEach((function(e){var t=o.getNarrativeIdByEl(e),i=_.find((function(e){return e.id===t}));i&&l.push(i)})),Object(U.c)(U.a.changeSort,n,e,o.props.navScreen),r(l)}},onFail:function(e){return Object(D.f)(e||Object(d.b)("global_error")),!0}})}},t.prototype.getNarrativeIdByEl=function(e){return Object(C.f)(e.getAttribute("data-id"))},t.prototype.getTitle=function(){var e=this.props,t=e.title,_=e.boxData,o=e.showNarrativeNumber;return a.a.createElement(u,{title:t||Object(d.b)("stories_narratives_title"),count:_.count,showNarrativeNumber:o})},t.prototype.deInitSorter=function(){this.sorter&&this.sorter.destroy()},t.defaultProps={type:o.view,showNarrativeNumber:!0},t}(a.a.Component),N=_("4+be"),H=_("v+DW"),F=_("EasH"),q=_("WfnU"),z=_("ZxpX"),V=_("URsI");!function(e){e.Add="add",e.Delete="delete"}(b||(b={}));var J=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),$=function(){return($=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},G=function(e){function t(t){var _=e.call(this,t)||this;return _.loadMore=function(){var e=_.props,t=e.loadMore,o=e.story,i=_.state.selectedNarrativeIds;return t().then((function(e){void 0===e&&(e=[]),_.setState({selectedNarrativeIds:$($({},i),_.getSelectedNarrativeIdsMap(o.id,e))})}))},_.onCheckboxClick=function(e){var t=_.state.selectedNarrativeIds,o=$({},t);o[e.id]?delete o[e.id]:o[e.id]=!0,_.setState({selectedNarrativeIds:o})},_.getBoxActionButtons=function(){var e=_.props,t=e.onClose,o=e.story,i=e.narratives,r=_.state,n=r.isLoad,l=r.selectedNarrativeIds,s=_.getSelectedNarrativeIdsMap(o.id,i),u=_.getDiffOperations(o.id,l,s);return[a.a.createElement(c.a,{key:"close",appearance:"tertiary",onClick:function(){return t()}},Object(d.b)("global_close")),a.a.createElement(q.default,{key:"save",appearance:"primary",disabled:!u.length,onClick:_.save,loading:n},Object(d.b)("global_save"))]},_.save=function(){var e=_.props,t=e.story,o=e.narratives,i=e.boxData,a=e.onClose,r=e.onSave,n=e.navScreen,l=_.state.selectedNarrativeIds,s=_.getSelectedNarrativeIdsMap(t.id,o),c=_.getDiffOperations(t.id,l,s),u=Boolean(Object.keys(l).length),p=i.ownerId;_.setState({isLoad:!0}),window.ajax.post("al_stories.php",{act:"batch_edit",owner_id:p,operations:JSON.stringify(c),hash:i.editHash},{onDone:function(){r(u),a(),Object(U.c)(U.a.addStoryToNarrative,p,0,n),Object(D.f)(_.getDoneText(c))},onFail:function(e){return Object(D.f)(e||Object(d.b)("global_error")),!0},hideProgress:function(){_.setState({isLoad:!1})}})},_.onCreateNarrativeClick=function(){var e=_.props,t=e.story,o=e.narratives,i=e.onSave,a=e.onClose,r=e.boxData,n=e.navScreen,l=r.ownerId;if(l>0){var s=_.getSelectedNarrativeIdsMap(t.id,o),c=Boolean(Object.keys(s).length);return Ee(l,{selectedStories:[t],onSave:function(){c=!0},onClose:function(){i(c),a()},navScreen:n}),void Object(U.c)(U.a.createNarrative,l,0,n)}var d=r.ownerDomain?r.ownerDomain:"club"+-r.ownerId;window.nav.go(d+"?act=narrative_create&story_id="+t.id)},_.onNarrativeClick=function(e,t){e.ctrlKey||e.metaKey||(Object(E.b)(t.ownerId,t.id,0,"narrative"+t.ownerId+"_"+t.id),e.preventDefault(),e.stopPropagation())},_.state={isLoad:!1,selectedNarrativeIds:_.getSelectedNarrativeIdsMap(t.story.id,t.narratives)},_}return J(t,e),t.prototype.render=function(){var e=this,t=this.props,_=t.onClose,o=t.narratives,i=t.boxData,r=this.state.selectedNarrativeIds,n=o.length<i.count;return a.a.createElement(s.a,{className:"NarrativeChooseBox",title:Object(d.b)("stories_narrative_choosing"),actionButtons:this.getBoxActionButtons(),onClose:_,hasScroll:!1,appearance:"blue"},a.a.createElement(V.a,{className:"NarrativeChooseBox__list",itemHeight:80,loadMore:this.loadMore,hasMore:n},a.a.createElement(g,{key:"create",onClick:this.onCreateNarrativeClick,clickable:!0,size:50}),o.map((function(t){return a.a.createElement(B,{narrative:t,key:t.rawId,onClick:function(){return e.onCheckboxClick(t)},size:50,noBorder:!0,clickable:!0,aside:a.a.createElement("div",{className:Object(z.a)("NarrativeChooseBox__checkbox",{"NarrativeChooseBox__checkbox--checked":r[t.id]})})})}))))},t.prototype.getDoneText=function(e){var t=e.filter((function(e){return e.op===b.Add})).length;if(t>1)return Object(d.b)("stories_saved_in_narratives_text");if(1===t)return Object(d.b)("stories_saved_in_narrative_text");var _=e.filter((function(e){return e.op===b.Delete})).length;return _>1?Object(d.b)("stories_deleted_in_narratives_text"):1===_?Object(d.b)("stories_deleted_in_narrative_text"):Object(d.b)("stories_settings_saved")},t.prototype.getDiffOperations=function(e,t,_){var o=[];return Object.keys(t).forEach((function(t){_[t]||o.push({op:b.Add,story_id:e,narrative_id:Number(t)})})),Object.keys(_).forEach((function(_){t[_]||o.push({op:b.Delete,story_id:e,narrative_id:Number(_)})})),o},t.prototype.getSelectedNarrativeIdsMap=function(e,t){return t.reduce((function(t,_){return _.stories.find((function(t){return t.id===e}))&&(t[_.id]=!0),t}),{})},t}(a.a.Component),Y=_("t7n3"),X=function(e){var t=e.className,_=e.coverUrl,o=e.title,i=e.ownerName,r=e.storyCount;return a.a.createElement("div",{className:Object(O.a)("NarrativeSnippet",t)},a.a.createElement("div",{className:"NarrativeSnippet__inner"},a.a.createElement("div",{className:"NarrativeSnippet__cover"},a.a.createElement("div",{className:"NarrativeSnippet__image",style:{backgroundImage:"url("+_+")"}})),a.a.createElement("div",{className:"NarrativeSnippet__info"},a.a.createElement("div",{className:Object(O.a)("NarrativeSnippet__title",{"NarrativeSnippet__title--empty":!o})},o||Object(d.b)("stories_narrative_name_full")),a.a.createElement("span",{className:"NarrativeSnippet__author"},i),a.a.createElement("span",{className:"NarrativeSnippet__description"},a.a.createElement("span",null,Object(d.b)("global_type_narrative")),a.a.createElement("span",{className:"dvd"}),a.a.createElement("span",null,Object(d.b)("global_narrative_stories_count",r))))))},Q=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),Z=function(e){function t(t){var _=e.call(this,t)||this;return _.onNameChange=function(e){var t=e.target.value,o=Object(Y.I)(t)?t:"";_.setState({name:o})},_.getBoxActionButtons=function(){var e=_.state.isLoad;return[a.a.createElement(q.default,{key:"publish",appearance:"primary",onClick:_.save,loading:e},Object(d.b)("groups_edit_narrative_publish"))]},_.save=function(){var e=_.state.isLoad,t=_.state.name,o=void 0===t?"":t;e||((o=Object(Y.I)(o))?(_.setState({isLoad:!0}),_.props.onSave(o).catch((function(){_.setState({isLoad:!1})}))):Object(H.q)(_.nameInputRef.current))},_.state={isLoad:!1,name:"",coverStory:t.stories[0]},_.nameInputRef=a.a.createRef(),_}return Q(t,e),t.prototype.render=function(){var e=this.props,t=e.onClose,_=e.ownerName,o=e.stories,i=this.state,r=i.name,n=i.coverStory,l=null==n?void 0:n.preview;return a.a.createElement(s.a,{className:"NarrativeCreateLiteBox",title:Object(d.b)("stories_creating_narrative"),actionButtons:this.getBoxActionButtons(),onClose:t,hasScroll:!1,appearance:"blue"},a.a.createElement("div",{className:"NarrativeCreateLiteBox__inner"},a.a.createElement("div",{className:"NarrativeCreateLiteBox__title"},Object(d.b)("groups_edit_narrative_title")),a.a.createElement("input",{type:"text",className:"NarrativeCreateLiteBox__nameInput",value:r,onChange:this.onNameChange,placeholder:Object(d.b)("stories_enter_name"),maxLength:R.g,ref:this.nameInputRef,autoFocus:!0}),a.a.createElement("div",{className:"NarrativeCreateLiteBox__title"},Object(d.b)("groups_edit_narrative_preview")),a.a.createElement("div",{className:"NarrativeCreateLiteBox__text"},Object(d.b)("groups_edit_narrative_pin_text")),a.a.createElement("div",{className:"NarrativeCreateLiteBox__previews"},a.a.createElement("div",{className:"NarrativeCreateLiteBox__previewWrapper"},a.a.createElement("div",{className:"NarrativeCreateLiteBox__previewTitle"},Object(d.b)("stories_narrative_preview_block_title")),a.a.createElement("div",{className:"NarrativeCreateLiteBox__smallPreview"},a.a.createElement(L.a,{cover:l}),a.a.createElement("span",{className:"NarrativeCreateLiteBox__smallPreviewName"},r||Object(d.b)("stories_narrative_name_full")))),a.a.createElement("div",{className:"NarrativeCreateLiteBox__previewWrapper NarrativeCreateLiteBox__previewWrapper--snippet"},a.a.createElement("div",{className:"NarrativeCreateLiteBox__previewTitle"},Object(d.b)("stories_narrative_preview_feed_title")),a.a.createElement(X,{className:"NarrativeCreateLiteBox__snippet",ownerName:_,coverUrl:l,title:r,storyCount:o.length})))))},t}(a.a.Component),ee=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),te=function(){return(te=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},_e=function(e,t){var _={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(_[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(_[o[i]]=e[o[i]])}return _},oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=a.a.createRef(),t.componentRef=a.a.createRef(),t}return ee(t,e),t.prototype.notaBene=function(){var e,t=null===(e=this.componentRef)||void 0===e?void 0:e.current;t&&Object(H.q)(t)},t.prototype.focus=function(){var e,t;null===(t=null===(e=this.inputRef)||void 0===e?void 0:e.current)||void 0===t||t.focus()},t.prototype.render=function(){var e=this.props,t=e.className,_=e.prefix,o=_e(e,["className","prefix"]);return a.a.createElement("div",{className:Object(z.a)("InputWithPrefix",t),ref:this.componentRef},a.a.createElement("div",{className:"InputWithPrefix__text"},_),a.a.createElement("input",te({className:"InputWithPrefix__input"},o,{ref:this.inputRef})))},t}(a.a.Component),ie=_("hN/p"),ae=_("6x0M"),re=function(e){var t=e.text,_=e.children,o=e.open,i=void 0!==o&&o,r=a.a.createElement("div",{className:"StoryLinkHint"},a.a.createElement("div",{className:"StoryLinkHint__inner"},t));return a.a.createElement(ae.a,{open:i,position:"t",align:"left",content:r},_)},ne=_("HLtZ"),le=function(){var e=function(t,_){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(e[_]=t[_])})(t,_)};return function(t,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function o(){this.constructor=t}e(t,_),t.prototype=null===_?Object.create(_):(o.prototype=_.prototype,new o)}}(),se=function(e){function t(t){var _=e.call(this,t)||this;return _.inputRef=a.a.createRef(),_.needCleanLink=!1,_.onChangeLink=function(e){var t=Object(Y.I)(e.target.value);_.needCleanLink&&(_.needCleanLink=!1,t=_.cleanLink(t)||t),_.setState({link:t,needShowHint:!_.isLinkValid(t)})},_.onKeyUpLink=function(){var e=_.state.link;_.setState({needShowHint:!_.isLinkValid(e)})},_.onPasteLink=function(){_.needCleanLink=!0},_.onChangeLinkType=function(e){_.setState({linkType:String(e.selected.value)})},_.onSave=function(){var e,t,o,i,a=_.props.linkData,r=_.state.linkType,n=_.state.link;if(n=Object(Y.I)(n),!_.isLinkValid(n))return null===(t=null===(e=_.inputRef)||void 0===e?void 0:e.current)||void 0===t||t.focus(),null===(i=null===(o=_.inputRef)||void 0===o?void 0:o.current)||void 0===i||i.notaBene(),void _.setState({needShowHint:!0});var l=n?"https://vk.com/"+n:"";a.needShowHint?Object(F.d)(Object(N.d)("stories_saving_link"),Object(N.d)("stories_link_editing_warning"),Object(N.d)("global_save"),(function(e){_.edit(l,r,!0,e)}),Object(N.d)("global_cancel")):_.edit(l,r)},_.onDelete=function(){_.props.linkData.needShowHint?Object(F.d)(Object(N.d)("stories_deleting_link"),Object(N.d)("stories_link_deleting_warning"),Object(N.d)("global_delete"),(function(e){_.delete(e)}),Object(N.d)("global_cancel")):_.delete()},_.state={link:t.story.linkUrl?_.cleanLink(t.story.linkUrl):"",linkType:t.story.linkType||t.linkData.items[0].value,needShowHint:!1,isSaving:!1,isDeleting:!1},_}return le(t,e),t.prototype.render=function(){var e=this.props,t=e.onClose,_=e.linkData,o=this.state,i=o.linkType,r=o.link,n=o.needShowHint,l=this.isEditMode()?Object(N.d)("stories_edit_link_title"):Object(N.d)("stories_add_link_title");return a.a.createElement(s.a,{className:"StoryLinkEditorBox",appearance:"blue",onClose:t,title:l,actionButtons:this.getActionButtons(),hasScroll:!1},a.a.createElement("div",{className:"StoryLinkEditorBox__inner"},a.a.createElement("div",{className:"StoryLinkEditorBox__row"},a.a.createElement("span",{className:"StoryLinkEditorBox__label"},Object(N.d)("stories_link_label_url")),a.a.createElement("div",{className:"StoryLinkEditorBox__control"},a.a.createElement(re,{open:n,text:Object(N.d)("stories_upload_link_format")},a.a.createElement("div",{className:"StoryLinkHint__input"},a.a.createElement(oe,{className:"StoryLinkEditorBox__input",prefix:"https://vk.com/",value:r,onChange:this.onChangeLink,onKeyUp:this.onKeyUpLink,onPaste:this.onPasteLink,autoFocus:!0,ref:this.inputRef}))))),a.a.createElement("div",{className:"StoryLinkEditorBox__row"},a.a.createElement("span",{className:"StoryLinkEditorBox__label"},Object(N.d)("stories_link_label_text")),a.a.createElement("div",{className:"StoryLinkEditorBox__control"},a.a.createElement(ie.default,{className:"StoryLinkEditorBox__select",appearance:"secondary",options:_.items,value:i,onChange:this.onChangeLinkType})))))},t.prototype.isEditMode=function(){return Boolean(this.props.story.linkUrl)},t.prototype.isLinkValid=function(e){return Boolean(e)&&e.length>=2&&Boolean(e.match(/^[a-z0-9\/\-._%=?&@#]+$/i))&&!decodeURIComponent(e).match(/away.php/)},t.prototype.cleanLink=function(e){var t=(e=Object(Y.I)(e)).match(/[https?:\/\/]*((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,9})\/)(.*?)?(\#.*?)?(?:[\.!:;,\*\(\)&]*&nbsp;|[ \t\r\n \u00A0]|$)/i);return(t&&t[2]?t[2]:"")+(t&&t[3]?t[3]:"")},t.prototype.edit=function(e,t,_,o){var i=this;void 0===e&&(e=""),void 0===t&&(t=""),void 0===_&&(_=!0);var a=this.props,r=a.onStoryLinkUpdate,n=a.onClose,l=a.story,s=a.linkData;window.ajax.post("al_stories.php",{act:"edit_link",story_raw_id:l.rawId,link_url:e,link_text:t,hash:s.editHash},{onDone:function(){n(),r(l.rawId,e,t)},onFail:function(e){Object(D.f)(e||Object(N.d)("global_unknown_error"));var t="Link saving error in StoryLinkEditor"+(e?": "+e:"");return Object(ne.c)(new Error(t)),!0},showProgress:function(){_?i.setState({isSaving:!0}):i.setState({isDeleting:!0}),Object(H.o)(o)},hideProgress:function(){var e;o&&(null===(e=Object(D.b)())||void 0===e||e.hide(),Object(H.w)(o)),_?i.setState({isSaving:!1}):i.setState({isDeleting:!1})}})},t.prototype.delete=function(e){this.edit("","",!1,e)},t.prototype.getActionButtons=function(){var e=this.props.onClose,t=this.state,_=t.isSaving,o=t.isDeleting,i=[a.a.createElement(c.a,{key:"close",appearance:"tertiary",onClick:function(){return e()}},Object(N.d)("global_cancel")),a.a.createElement(q.default,{loading:_,key:"save",appearance:"primary",onClick:this.onSave},this.isEditMode()?Object(N.d)("global_save"):Object(N.d)("stories_add_link"))];return this.isEditMode()&&i.unshift(a.a.createElement(q.default,{loading:o,appearance:"link",key:"delete",className:"StoryLinkEditorBox__extraFooterBtn",onClick:this.onDelete},Object(N.d)("stories_delete_link"))),i},t}(a.a.Component),ce=_("6qdA"),de=_("p6Sd"),ue=_("eewf"),pe=function(){return(pe=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},be=function(e,t){for(var _=0,o=t.length,i=e.length;_<o;_++,i++)e[i]=t[_];return e};function Ee(e,t){void 0===t&&(t={});var _={},o=t.narrative,i=t.onClose,s=t.onSave,c=t.navScreen,d=t.stories,u=t.selectedStories,p=void 0===u?[]:u,b=t.publishHash,E=t.editHash,O=t.linkData,m=t.isEditingLinksAvailable,h=t.storiesCount,w=t.coverUploadConfig,v=t.getPublishDoneHTML,f=!1;function g(){window.stManager.add(["NarrativeEditor.css"]).then((function(){_.box=Object(l.e)(j(),{width:638,onDestroy:function(e){Object(l.a)(e),i&&i(f)}})})).catch((function(e){console.error(e),Object(ne.c)(e)}))}function P(){return(null==d?void 0:d.length)?new Promise((function(t,_){if(!(null==d?void 0:d.length))return _("empty stories");window.ajax.post("al_stories.php",{act:"get_archive_stories",owner_id:e,offset:d.length},{onDone:function(e,o){if(d){d=be(be([],d),e);var i=(h=o)>d.length;t(i),T()}else _("empty stories after loading")},onFail:function(e){return _(e),!0}})})):Promise.reject("empty stories")}function M(e){f=!0,s&&s(e)}function C(e){_.box&&_.box.hide(),e&&e()}function T(){(null==d?void 0:d.length)&&b&&E&&Object(l.f)(j())}function y(e,t,_){if(null==d?void 0:d.length){var o=function(o){return null==o?void 0:o.map((function(o){return o.rawId===e?pe(pe({},o),{linkUrl:t,linkType:_}):o}))};d=o(d),p=o(p)||[],T()}}function j(){if((null==d?void 0:d.length)&&b&&E&&h&&w){var t=d.reduce((function(e,t){return e[t.id]=t,e}),{});t=p.reduce((function(e,t){return e[t.id]=t,e}),t);var _=d.map((function(e){return e.id})),i=p.map((function(e){return e.id})),l=o?r.a.edit:r.a.create,s=(null==o?void 0:o.title)?Object(n.a)(o.title):"",u=h>d.length,f=o?Object(ue.c)(o):void 0;return a.a.createElement(ce.a,{ownerId:e,type:l,name:s,narrativeRawId:null==o?void 0:o.rawId,cover:f,selectedStoryIds:i,storyIds:_,hasMore:u,storyMap:t,close:C,loadMore:P,onSave:M,publishHash:b,editHash:E,linkData:O,isEditingLinksAvailable:m,onStoryLinkUpdate:y,appearance:r.d.box,navScreen:c,coverUploadConfig:w,getPublishDoneHTML:v})}}d&&b&&E&&h&&w?g():new Promise((function(t,_){window.ajax.post("al_stories.php",{act:"get_narrative_editor_data",owner_id:e},{loader:!0,onDone:function(e){d=e.stories,h=e.storiesCount,b=e.publishHash,E=e.editHash,O=e.linkData,m=e.isEditingLinksAvailable,w=e.coverUploadConfig,t([d,h,b,E,O,m,w])},onFail:function(e){return _(e),!0}})})).then((function(){g()})).catch((function(e){Object(D.f)(e||Object(N.d)("global_error")),Object(ne.c)(e)}))}function Oe(e){var t=e.ownerId,_=e.onClose,i=e.onSave,r=e.onRemove,n=e.onReorder,s=e.navScreen,c={narratives:[],ownerId:t,boxAct:"get_narrative_box_data"},d=!1;function u(){return De(c).then((function(){p()})).catch((function(e){Object(D.f)(e||Object(N.d)("global_error"))}))}function p(){if(c.boxData){var e=c.boxData.canEdit?o.edit:o.view;Object(l.f)(a.a.createElement(S,{type:e,boxData:c.boxData,narratives:c.narratives,onClose:m,onSave:b,onRemove:E,onBookmark:w,onReorder:h,loadMore:u,navScreen:s}))}}function b(e){i&&i(e),d=!0}function E(e){!function(e){var t={title:Object(N.d)("global_warning")};Object(F.d)(t,Object(N.d)("stories_narrative_remove_warning"),Object(N.d)("stories_remove_confirm"),(function(t){var _=c.boxData;_&&window.ajax.post("al_stories.php",{act:"remove_narrative",narrative_raw:e.rawId,hash:_.removeHash},{onDone:function(){_.count-=1,Object(U.c)(U.a.deleteNarrative,e.ownerId,e.id,s),c.narratives=c.narratives.filter((function(t){return t.rawId!==e.rawId})),p(),Object(D.f)(Object(N.d)("stories_deleted_narrative")),r&&r()},onFail:function(e){return Object(D.f)(e||Object(N.d)("global_error")),!0},showProgress:function(){return Object(H.o)(t)},hideProgress:function(){Object(D.b)().hide(),Object(H.w)(t)}})}),Object(N.d)("global_cancel"))}(e)}function O(){d&&m()}function m(){c.box&&c.box.hide()}function h(e){c.narratives=e,p(),n&&n()}function w(e){e.isBookmarked=!e.isBookmarked,p()}Me(c).then((function(e){var t=e[0],i=e[1],r=e[2];c.narratives=t,c.boxData=i,c.startFrom=r,c.box=function(e,t){var i=t.canEdit?o.edit:o.view;return Object(l.e)(a.a.createElement(S,{type:i,boxData:t,narratives:e,loadMore:u,onClose:m,onSave:b,onReorder:h,onBookmark:w,onRemove:E,navScreen:s}),{width:560,onShow:O,onDestroy:function(e){Object(l.a)(e),_&&_()}})}(t,i)})).catch((function(e){Object(D.f)(e||Object(N.d)("global_error")),_&&_()}))}function me(e){var t;void 0===e&&(e={});var _=we(e);function o(){return De(_).then((function(){r()})).catch((function(e){Object(D.f)(e||Object(N.d)("global_error"))}))}function i(){return Object(l.e)(n(),{width:560,onDestroy:function(e){Object(l.a)(e)}})}function r(){_.boxData&&Object(l.f)(n())}function n(){if(_.boxData)return a.a.createElement(S,{title:Object(N.d)("news_fb_block_recommend_narratives"),showNarrativeNumber:!1,boxData:_.boxData,narratives:_.narratives,loadMore:o,onClose:s,onBookmark:c,trackCode:_.trackCode,list:_.list,source:_.source})}function s(){_.box&&_.box.hide()}function c(e){e.isBookmarked=!e.isBookmarked,r()}(null===(t=_.narratives)||void 0===t?void 0:t.length)&&_.boxData?_.box=i():Me(_).then((function(e){var t=e[0],o=e[1];_.narratives=t,_.boxData=o,_.box=i()})).catch((function(e){Object(D.f)(e||Object(N.d)("global_error"))}))}function he(e){return void 0===e&&(e={}),Me(we(e),!0)}function we(e){return void 0===e&&(e={}),{narratives:e.narratives?e.narratives:[],boxData:e.boxData,boxAct:"get_recommended_narratives",trackCode:e.trackCode,list:e.list,source:e.source}}function ve(e){var t=e.ownerId,_=e.story,o=e.onClose,i=e.onSave,r=e.navScreen,n={narratives:[],ownerId:t,boxAct:"get_narrative_choose_box_data"},s=!1;function c(){return De(n).then((function(e){return function(){if(!n.boxData)return;Object(l.f)(a.a.createElement(G,{story:_,narratives:n.narratives,onClose:p,onSave:d,boxData:n.boxData,loadMore:c,navScreen:r}))}(),e})).catch((function(e){return Object(D.f)(e||Object(N.d)("global_error")),[]}))}function d(e){s=!0,i&&i(e)}function u(){s&&p()}function p(){n.box&&n.box.hide()}Me(n).then((function(e){var t=e[0],i=e[1],b=e[2];n.narratives=t,n.boxData=i,n.startFrom=b,n.box=function(e,t){return Object(l.e)(a.a.createElement(G,{story:_,narratives:e,boxData:t,loadMore:c,onClose:p,onSave:d,navScreen:r}),{width:560,onShow:u,onDestroy:function(e){Object(l.a)(e),o&&o(s)}})}(t,i)})).catch((function(e){Object(D.f)(e||Object(N.d)("global_error")),o&&o()}))}function fe(e){var t=e.onSave,_=e.onClose,o=e.ownerId,i=e.ownerName,r=e.stories,n=e.publishNarrativeHash,s=Object(l.e)(a.a.createElement(Z,{stories:r,ownerId:o,ownerName:i,publishNarrativeHash:n,onSave:t,onClose:function(){s&&s.hide()}}),{width:560,onDestroy:function(e){Object(l.a)(e),_&&_()}})}function ge(e){var t=e.story,_=e.onClose,o=e.onStoryLinkUpdate,i=e.linkData;t.linkType&&t.linkText&&(i.items.find((function(e){return e.value===t.linkType}))||(i=pe(pe({},i),{items:be(be([],i.items),[{value:t.linkType,label:t.linkText}])})));var r=Object(l.e)(a.a.createElement(se,{story:t,onClose:function(){r&&r.hide()},onStoryLinkUpdate:o,linkData:i}),{width:450,onDestroy:function(e){Object(l.a)(e),_&&_()}})}function Pe(e){var t=e.coverUrl,_=e.coverHeight,o=e.coverWidth,i=e.thumbHeight,r=e.thumbWidth,n=e.onClose,s=e.onSave,c=e.crop,d=Object(l.e)(a.a.createElement(de.c,{coverUrl:t,coverHeight:_,coverWidth:o,thumbHeight:i,thumbWidth:r,onClose:function(){d&&d.hide()},onSave:s,crop:c}),{width:638,onDestroy:function(e){Object(l.a)(e),n&&n()}})}function Me(e,t){return void 0===t&&(t=!1),new Promise((function(_,o){window.ajax.post("al_stories.php",{act:e.boxAct,owner_id:e.ownerId,start_from:e.startFrom,track_code:e.trackCode},{loader:!e.narratives.length&&!t,onDone:function(e,t,o){_([e,t,o])},onFail:function(e){return o(e),!0}})}))}function De(e){return Me(e).then((function(t){var _,o=t[0],i=t[2];return e.narratives=(null===(_=e.narratives)||void 0===_?void 0:_.concat(o))||o,e.startFrom=i,o}))}},"s5b+":function(e,t,_){"use strict";function o(){var e=window.ls.get("video_volume");return"number"==typeof e?Math.min(1,Math.max(0,e)):1}function i(e){window.ls.set("video_volume",e)}function a(e){delete window.cur["stories_list_"+e]}_.d(t,"a",(function(){return o})),_.d(t,"c",(function(){return i})),_.d(t,"b",(function(){return a}))},sMoB:function(e,t,_){"use strict";_.d(t,"a",(function(){return a}));var o=_("Xrg9"),i=void 0,a=function(){return void 0!==i?i:i=!!o.a.get("reactions.debug_enabled")}},te1c:function(e,t,_){"use strict";_.d(t,"a",(function(){return v})),_.d(t,"b",(function(){return L}));_("HEwt"),_("rE2o"),_("ioFf"),_("rGqo"),_("VRzm"),_("Vd3H"),_("a1Th"),_("Btvt"),_("KKXr"),_("Oyvg"),_("SRfc"),_("91GP"),_("pIFo");var o=_("v+DW"),i=_("EasH"),a=_("FWc3"),r=_("ER42"),n=_("wetz"),l=_("t7n3"),s=_("/PiP"),c=_("W9Tc"),d=_("7GuL"),u=_("nqXl"),p=_("jE6c"),b=_("uQjJ"),E=_("821F");var O=_("yLAM");function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var _=[],o=!0,i=!1,a=void 0;try{for(var r,n=e[Symbol.iterator]();!(o=(r=n.next()).done)&&(_.push(r.value),!t||_.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw a}}return _}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var _=Object.prototype.toString.call(e).slice(8,-1);"Object"===_&&e.constructor&&(_=e.constructor.name);if("Map"===_||"Set"===_)return Array.from(_);if("Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var _=0,o=new Array(t);_<t;_++)o[_]=e[_];return o}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var _=arguments[t];for(var o in _)Object.prototype.hasOwnProperty.call(_,o)&&(e[o]=_[o])}return e}).apply(this,arguments)}var v="group",f=d.b,g="anonymous",P="poll_fixed",M="poll_closed",D="poll_background_id",C="poll_photo_id",T="poll_until",y="poll_is_multiple",j="poll_disable_unvote",I=/^invite\/[a-zA-Z0-9]{7}$|/,L=function(e,t,_,h,L,A){var B,R=[],W=(h=h||{}).mediaHandlers||{},k=h.from;each(_||[],(function(t,_){var r=_[0],n=_[1],l=_[2];if(n){var s=!1,c=h.toId||cur.postTo,d={to_id:c,blockPersonal:h.blockPersonal};d.mail_add=h.mail?1:"",d.from=h.from;var u={};switch(r){case"graffiti":s=showBox.pbind("al_wall.php",{act:"canvas_draw_box",flash:browser.flash},{cache:1,dark:1});break;case"photos_list":s=showBox.pbind("al_photos.php",extend(d,{act:"choose_photo"}),{cache:1,stat:[jsc("web/photos.js"),"photos.css",jsc("web/upload.js")],dark:1});break;case"photo":s=W.photo?W.photo.pbind(h):showBox.pbind("al_photos.php",extend(d,{act:"choose_photo",max_files:h.limit||10,no_album_select:~(h.disabledTypes||[]).indexOf("album")?1:""}),{cache:1,stat:[jsc("web/photos.js"),"photos.css",jsc("web/upload.js")],dark:1});break;case"video":var p=extend(d,{act:"a_choose_video_box",max_files:h.limit||10});s=function(){showBox("al_video.php",p,{cache:1,dark:1})};break;case"audio":s=function(){stManager.add([jsc("web/audio.js"),jsc("web/indexer.js"),jsc("web/auto_list.js"),jsc("web/grid_sorter.js"),"audio.css"],(function(){var t=!1;each(B.chosenMedias||[],(function(){"audio_playlist"===this[0]&&(t=!0)})),cur.audioAttachOriginalOwnerId=!1,cur.audioAttachSwitchOwnerId=!1;var _=vk.id,o=parseInt((""+d.to_id||"").replace(/^board/,"-")),i=domClosest("_submit_post_box",e);domData(i,"from-oid")<0||"im"===cur.module&&cur.gid?(_=o,cur.audioAttachOriginalOwnerId=o,cur.audioAttachSwitchOwnerId=vk.id):cur.hasGroupAudioAccess&&(cur.audioAttachOriginalOwnerId=vk.id,cur.audioAttachSwitchOwnerId=o),AudioPage.showAttachBox(_,{canPlaylistAttach:!t&&!cur.editor,onAudioChoose:AudioUtils.onAudioChoose,onPlaylistChoose:AudioUtils.onPlaylistChoose})}))};break;case"poll":s=()=>B.chooseMedia("poll","",l);break;case"doc":s=W.doc?W.doc.pbind(h):showBox.pbind("docs.php",Object.assign(d,h.docParams,{act:"a_choose_doc_box"}),{stat:["docs.css"]});break;case"map":s=showBox.pbind("al_places.php",extend(d,{act:"a_choose_place_box"}),{stat:["places.css","map.css","maps.js","ui_controls.css","ui_controls.js","boxes.css"],width:640,bodyStyle:"padding: 0px;",dark:1});break;case"note":s=showWiki.pbind({note:"new"},!0,!1,{queue:1});break;case"postpone":s=e=>{if(A){if(hasClass(e.target,"_close"))return B.unchooseMedia(B.postponeInd),void cancelEvent(e);var t=()=>{cur["postPostponeTT"+B.lnkId].show(),triggerEvent(geByClass1("datepicker_control",cur["postPostponeTT"+B.lnkId]._ttel),"mousedown",!1,!0);var e=!B.postponeDate;B.postponeDate=val("postpone_date"+B.lnkId),e&&B.chooseMedia("postpone",B.postponeDate,l)};B.postponeDatepicker?"DP_PLACEHOLDER"!==B.postponeDatepicker&&t():(cur.postponedLastDate&&(l.date=intval(cur.postponedLastDate)+3600),B.postponeDatepicker="DP_PLACEHOLDER",B.setupPostpone(l,null,t))}else B.chooseMedia("postpone",n,l)};break;case f:u.onMediaTypeInit=e=>{e.addMedia.donutVisibilityAddSelect&&e.addMedia.donutVisibilityAddSelect(e)},s=()=>{};break;case"mark_as_ads":s=()=>B.chooseMedia("mark_as_ads",n,l);break;case"share":s=function(e){e=e||{},window.onShareChooseUrlBoxInit=function(){var e=geByClass1("share_url_input",curBox().bodyNode);addEvent(e,"keydown",(function(e){if(e.which==KEY.ENTER)return _(curBox().btns.ok[0],e),!1}))};var t=showBox("share.php",{act:"choose_url_box"},{dark:1}),_=function(_,i){var a=geByClass1("share_url_input",t.bodyNode),r=val(a);Object(o.o)(_),disable(a,!0),hide("share_url_error"),B.chooseMedia("share",n,extend(l,{url:r,draft:!0,onSuccess:function(){disable(a,!1),Object(o.w)(_),t.hide(),e.videoId&&window.AdsEdit&&window.AdsEdit.showSnippetVideo&&window.AdsEdit.showSnippetVideo(e.videoId)},onError:function(e){var t="";e&&e!==getLang("global_unknown_error")&&-1===e.indexOf("ERR_PAGE_GET_FAILED")&&(t=e+" "),disable(a,!1),Object(o.w)(_),ge("share_url_error").innerHTML=t+getLang("global_share_link_failed"),show("share_url_error")}}))};t.removeButtons(),t.addButton(getLang("global_continue"),_)};break;case"pretty_cards":s=function(e){e&&e.replace_owner_id&&(l.editor.owner_id=e.replace_owner_id),B.chooseMedia("pretty_cards",n,l)};break;case"gift":s=function(){var e=(e=h.peer<2e9?h.peer:0)||cur.peer;h.giftBoxPrepare&&h.giftBoxPrepare(e),showBox("al_gifts.php",{act:"get_gift_box",mid:e,fr:e==vk.id?1:0,ref:"media_selector"},{stat:["gifts.css","wide_dd.js","wide_dd.css"],dark:1})};break;case"money":s=function(){var e=cur.peer;c>-2e9&&c<0&&(d.owner_id=c),E.a.showMoneyTransferBox(extend(d,{to_id:e}),{},e=>(curBox()&&curBox().hide(),setTimeout(Object(i.d)(getLang("global_error"),e).hide,2e3),!0))};break;case"market":c==vk.id?(s=showBox.pbind("al_market.php",extend(d,{act:"a_choose_user_product_box"}),{cache:1}),l.tt_words&&(cur.checkMessageHandler=function(e){if(!cur.marketIntroShown&&(e=" "+e+" ").match(new RegExp("\\s("+l.tt_words.join("|")+")\\s","i"))){var t=getSize(B.menu.moreWrap);Object(a.c)(B.menu.moreWrap,{text:l.tt_text,dir:"left",slideX:15,width:230,shift:[-t[0]-5,-t[1]/2],hasover:1}),cur.marketIntroShown=!0}})):s=showBox.pbind("al_market.php",extend(d,{act:"a_choose_product_box"}),{cache:1});break;case"market_services":s=()=>{showBox("/al_market.php",w({act:"a_choose_product_box"},d,{album_id:-2}),{cache:1})};break;case"article":s=()=>openArticleEditor(c);break;case"podcast":s=function(){stManager.add([jsc("web/podcast.js")],(function(){Podcast.select()}))}}s&&R.push([r,n,s,u])}})),t=ge(t||"media_preview"),L=!1!==L&&ge(L||"post_settings_btn"),A=!1!==A&&ge(A||"post_actions_btns");var U=h.limit||10,K=cur.pbIsTextlive||U>1,x=h.editable&&(!browser.msie||parseInt(browser.version)>8),S=h.sortable&&(!browser.msie||parseInt(browser.version)>8),N=!!A,H=function(e,t,_){if(!(e=ge(e)))return!1;_=_||{},window.__addMediaIndex||(window.__addMediaIndex=0);var o=++__addMediaIndex;e.innerHTML='<div class="media_selector clear_fix"></div>';var i,a=domByClass(e,"media_selector"),r=[],n={id:o,menuNode:a,types:t,lastTypes:t,activate:function(e){n.touched=!0===e,_.onActivate&&_.onActivate()},show:function(){if(i&&(clearTimeout(i),i=0),n.moreWrap&&!hasClass(n.moreWrap,"shown")){_.forceToUp||replaceClass(n.moreWrap,"to_up","to_down");var e=domByClass(n.moreWrap,"_more_items");(getClientRectOffsetY(e)>0||_.forceToUp)&&replaceClass(n.moreWrap,"to_down","to_up"),setTimeout(addClass.pbind(n.moreWrap,"shown"),0)}},hide:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){if(!i){var t=function(){i=0,n.moreWrap&&removeClass(n.moreWrap,"shown")};if(e){var _=domByClass(n.moreWrap,"_more_items");hide(_),t(),setTimeout(show.pbind(_),0)}else i=setTimeout(t,300)}})),setOptions:function(e){extend(_,e)},setItems:function(e){for(window.tooltips&&tooltips.destroyAll(a);a.firstChild;)re(a.firstChild);var t=void 0!==_.hideAfterCount?_.hideAfterCount:4,o=void 0!==_.maxShown?_.maxShown:3,i=!1,l=_.hideItem,d=(l||e.length>t)&&(!browser.mobile||_.ignoreMobile),u=_.hideLabel||getLang("global_media_selector_more");function p(e,t,o,i,a,l){var s=ce("a",{innerHTML:i?t:'<span class="blind_label">'+t+"</span>",className:"ms_item ms_item_"+e+" _type_"+e}),c=document.createElement("span");if(c.classList.add("MediaSelector__mediaIcon"),c.innerHTML=function(e){switch(e){case"photo":return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.5 5.5c.57 0 1-.2 1.34-.52.24-.24.43-.54.55-.74l.06-.1c.15-.23.26-.37.39-.47.11-.08.3-.17.66-.17h3c.36 0 .55.09.66.17.13.1.24.24.4.48l.05.09c.12.2.3.5.55.74.33.32.77.52 1.34.52.73 0 .99 0 1.19.04.9.18 1.59.88 1.77 1.77.04.2.04.46.04 1.19v3.45c0 .85 0 1.45-.04 1.9-.04.46-.1.72-.2.92-.22.42-.57.77-.99.98-.2.1-.46.17-.91.21-.46.04-1.06.04-1.91.04h-6.9c-.85 0-1.45 0-1.91-.04a2.4 2.4 0 01-.91-.2 2.25 2.25 0 01-.99-.99 2.4 2.4 0 01-.2-.91c-.04-.46-.04-1.06-.04-1.91V8.5c0-.73 0-.99.04-1.19.18-.9.88-1.59 1.77-1.77.2-.04.46-.04 1.19-.04zm3-3.5c-.64 0-1.14.16-1.54.46-.39.27-.62.63-.78.9l-.08.11c-.13.22-.2.34-.3.43-.06.05-.12.1-.3.1h-.09c-.61 0-1.03 0-1.4.07a3.75 3.75 0 00-2.94 2.95C1 7.38 1 7.8 1 8.42v3.56c0 .81 0 1.47.04 2 .05.55.14 1.03.37 1.47.36.7.93 1.28 1.64 1.64.44.23.92.32 1.47.37.53.04 1.18.04 2 .04H13.48c.81 0 1.47 0 2-.04a3.84 3.84 0 001.47-.37c.7-.36 1.28-.93 1.64-1.64.23-.44.32-.92.37-1.47.04-.53.04-1.19.04-2V8.41c0-.61 0-1.03-.07-1.4a3.75 3.75 0 00-2.95-2.94 7.5 7.5 0 00-1.4-.07h-.08c-.18 0-.24-.05-.3-.1-.1-.1-.17-.2-.3-.43l-.08-.12c-.16-.26-.4-.62-.78-.9-.4-.29-.9-.45-1.54-.45zm3.75 8.25a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm1.5 0a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"camera_outline_20"}.icon;case"video":return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 17a7 7 0 110-14 7 7 0 010 14zm-8.5-7a8.5 8.5 0 1117 0 8.5 8.5 0 01-17 0zm8.65 3.38l2.7-1.56a2.1 2.1 0 000-3.64l-2.7-1.56A2.1 2.1 0 007 8.44v3.12a2.1 2.1 0 003.15 1.82zm1.95-3.9c.4.23.4.8 0 1.04l-2.7 1.56a.6.6 0 01-.9-.52V8.44c0-.46.5-.75.9-.52z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"video_circle_outline_20"}.icon;case"audio":return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="music_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="music_outline_20__Icons-20/music_outline_20"><g id="music_outline_20__music_outline_20"><path d="M0 0h20v20H0z"/><path d="M14.73 2.05a2.28 2.28 0 012.75 2.23v7.99c0 3.57-3.5 5.4-5.39 3.51-1.9-1.9-.06-5.38 3.52-5.38h.37V6.76L8 8.43v5.82c0 3.5-3.35 5.34-5.27 3.62l-.11-.1c-1.9-1.9-.06-5.4 3.51-5.4h.37V6.24c0-.64.05-1 .19-1.36l.05-.13c.17-.38.43-.7.76-.93.36-.26.7-.4 1.41-.54zM6.5 13.88h-.37c-2.32 0-3.34 1.94-2.45 2.82.88.89 2.82-.13 2.82-2.45v-.37zm9.48-1.98h-.37c-2.32 0-3.34 1.94-2.46 2.82.89.89 2.83-.13 2.83-2.45v-.37zm-.02-7.78a.78.78 0 00-.92-.6L9.06 4.77c-.4.09-.54.15-.68.25a.8.8 0 00-.27.33c-.08.18-.1.35-.1.88v.67l7.97-1.67v-.95-.08z" id="music_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"music_outline_20"}.icon;case"doc":return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M17.2 6.78a2 2 0 01.24.58c.06.23.06.48.06.97v2.97c0 2.52 0 3.78-.49 4.74a4.5 4.5 0 01-1.97 1.97c-.96.49-2.22.49-4.74.49h-.6c-2.52 0-3.78 0-4.74-.49a4.5 4.5 0 01-1.97-1.97c-.49-.96-.49-2.22-.49-4.74V8.7c0-2.52 0-3.78.49-4.74a4.5 4.5 0 011.97-1.97c.96-.49 2.22-.49 4.74-.49h.97c.5 0 .74 0 .97.06.2.04.4.13.58.23.2.13.37.3.72.65l3.62 3.62c.35.35.52.52.65.72zM10.3 17h-.6c-1.28 0-2.16 0-2.83-.06-.66-.05-1-.15-1.23-.27a3 3 0 01-1.31-1.3 3.24 3.24 0 01-.27-1.24C4 13.46 4 12.58 4 11.3V8.7c0-1.28 0-2.16.06-2.83.05-.66.15-1 .27-1.23a3 3 0 011.3-1.31c.24-.12.58-.22 1.24-.27C7.54 3 8.42 3 9.7 3h.3v1.28c0 .67 0 1.23.04 1.67.03.47.12.88.31 1.28.32.6.81 1.1 1.42 1.42.4.2.81.28 1.28.31.44.04 1 .04 1.67.04H16v2.3c0 1.28 0 2.16-.06 2.83-.05.66-.15 1-.27 1.23a3 3 0 01-1.3 1.31c-.24.12-.58.22-1.24.27-.67.06-1.55.06-2.83.06zm5.57-9.5h-1.12c-.71 0-1.2 0-1.58-.03a1.88 1.88 0 01-.71-.16c-.33-.17-.6-.44-.77-.77a1.88 1.88 0 01-.16-.7 21.6 21.6 0 01-.03-1.59V3.13l.01.01.37.36 3.62 3.62.36.37.01.01z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"document_outline_20"}.icon;case"map":return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="place_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="place_outline_20__Icons-20/place_outline_20"><g id="place_outline_20__place_outline_20"><path opacity=".4" d="M0 0h20v20H0z"/><path d="M10 1c4.15 0 7.5 3.43 7.5 7.5 0 2.85-1.84 6.17-5.43 10.1a2.8 2.8 0 01-4.14 0C4.34 14.66 2.5 11.34 2.5 8.5 2.5 4.43 5.85 1 10 1zm0 1.5c-3.38 0-6 2.83-6 6 0 2.38 1.68 5.41 5.04 9.08a1.3 1.3 0 001.92 0C14.32 13.91 16 10.88 16 8.5c0-3.17-2.62-6-6-6zM10 5a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm0 1.5a2 2 0 100 4 2 2 0 000-4z" id="place_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"place_outline_20"}.icon;case"graffiti":return{icon:'<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.67 12.5c-1 0-1.77.76-1.82 1.72a3.54 3.54 0 01-1.28 2.65c.53.15 1.27.21 2.22-.07 1.9-.57 2.7-1.73 2.7-2.62 0-.9-.78-1.69-1.82-1.69zm-3.31 1.65a3.3 3.3 0 013.3-3.16c1.8 0 3.32 1.4 3.32 3.2 0 1.8-1.5 3.37-3.76 4.05-2.16.64-3.64-.03-4.35-.55a.92.92 0 01-.3-.36.84.84 0 01-.03-.6c.15-.47.64-.67.99-.95.38-.3.79-.76.83-1.63zM15.7 2a1.6 1.6 0 012.26-.07 1.69 1.69 0 01.17 2.29l-6.08 7.5a.75.75 0 01-1.05.1.75.75 0 01-.1-1.05l6.07-7.5a.18.18 0 00-.02-.23c-.07-.07-.13-.03-.2.04l-7 6.7a.75.75 0 01-1.06-.02.75.75 0 01.02-1.06l7-6.7z" fill="currentColor"/></svg>',name:"brush_outline_20"}.icon;case"poll":return{icon:'<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.75 6.41a.75.75 0 00-1.5 0v7.18a.75.75 0 001.5 0V6.4zM6.5 8.3a.75.75 0 01.75.75v4.55a.75.75 0 01-1.5 0V9.04a.75.75 0 01.75-.75zm7.75 2.5a.75.75 0 00-1.5 0v2.8a.75.75 0 001.5 0v-2.8z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3.75 1.98c.8-.42 1.57-.6 3.38-.6h5.74c1.8 0 2.58.18 3.38.6a4.26 4.26 0 011.77 1.77c.42.8.6 1.57.6 3.38v5.74c0 1.8-.18 2.58-.6 3.38a4.26 4.26 0 01-1.77 1.77c-.8.42-1.57.6-3.38.6H7.13c-1.8 0-2.58-.18-3.38-.6a4.26 4.26 0 01-1.77-1.77c-.42-.8-.6-1.57-.6-3.38V7.13c0-1.8.18-2.58.6-3.38a4.26 4.26 0 011.77-1.77zm3.38.9c-1.7 0-2.19.17-2.67.43-.5.26-.89.65-1.15 1.15-.26.48-.44.98-.44 2.67v5.74c0 1.7.18 2.19.43 2.67.27.5.66.89 1.16 1.15.48.26.98.43 2.67.43h5.74c1.7 0 2.19-.17 2.67-.43a2.76 2.76 0 001.15-1.15c.26-.48.43-.98.43-2.67V7.13c0-1.7-.17-2.19-.43-2.67a2.76 2.76 0 00-1.15-1.15c-.48-.26-.98-.44-2.67-.44H7.13z" fill="currentColor"/></svg>',name:"poll_outline_20"}.icon;case"article":return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.25 14.5c.42 0 .75.34.75.75v.1a.75.75 0 01-.75.65H4.75a.75.75 0 110-1.5h12.5zm0-5a.75.75 0 110 1.5h-8.5a.75.75 0 01-.75-.75v-.1a.75.75 0 01.75-.65h8.5zm-9-6.5c.4 0 .75.34.75.75v.1a.75.75 0 01-.75.65h-2.5v5.75a.75.75 0 01-1.5 0V4.5h-2.5a.76.76 0 01-.74-.65L1 3.75c0-.42.34-.75.75-.75h6.5zm9 1.5a.75.75 0 010 1.5h-5.5a.75.75 0 01-.75-.75v-.1a.75.75 0 01.75-.65h5.5z" fill="currentColor"/></svg>',name:"articles_outline_20"}.icon;case"postpone":return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="recent_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="recent_outline_20__Icons-20/recent_outline_20-@-clock,-time"><g id="recent_outline_20__recent_outline_20"><path d="M0 0h20v20H0z"/><path d="M10 1.5a8.5 8.5 0 110 17 8.5 8.5 0 010-17zM10 3a7 7 0 100 14 7 7 0 000-14zm-.75 3c.41 0 .75.34.75.75v3.23l2.77 1.07a.75.75 0 01-.54 1.4L8.98 11.2a.75.75 0 01-.48-.7V6.75c0-.41.34-.75.75-.75z" id="recent_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"recent_outline_20"}.icon;case"note":return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="article_box_outline_20__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="article_box_outline_20__article_box_outline_20" fill-rule="nonzero"><path id="article_box_outline_20__Shape" opacity=".53" d="M0 0h20v20H0z"/><path d="M6.92 2h6.16c1.44 0 2.14.13 2.86.52a3.7 3.7 0 011.54 1.54c.39.72.52 1.42.52 2.86v6.16c0 1.44-.13 2.14-.52 2.86a3.7 3.7 0 01-1.54 1.54c-.72.39-1.42.52-2.86.52H6.92c-1.44 0-2.14-.13-2.86-.52a3.7 3.7 0 01-1.54-1.54c-.39-.72-.52-1.42-.52-2.86V6.92c0-1.44.13-2.14.52-2.86a3.7 3.7 0 011.54-1.54C4.78 2.13 5.48 2 6.92 2zm0 1.5c-1.21 0-1.68.09-2.15.35-.4.2-.71.52-.92.92-.26.47-.35.94-.35 2.15v6.16c0 1.21.09 1.68.35 2.15.2.4.52.71.92.92.47.26.94.35 2.15.35h6.16c1.21 0 1.68-.09 2.15-.35.4-.2.71-.52.92-.92.26-.47.35-.94.35-2.15V6.92c0-1.21-.09-1.68-.35-2.15a2.2 2.2 0 00-.92-.92c-.47-.26-.94-.35-2.15-.35H6.92zM6.75 6h6.5a.75.75 0 110 1.5h-6.5a.75.75 0 010-1.5zm0 3.25h6.5a.75.75 0 110 1.5h-6.5a.75.75 0 110-1.5zm0 3.25h4.5a.75.75 0 110 1.5h-4.5a.75.75 0 110-1.5z" id="article_box_outline_20__Icon-Color" fill="currentColor"/></g></g></svg>',name:"article_box_outline_20"}.icon;case"gift":return Object(O.a)().icon;case"market":return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M7.25 5.75a2.75 2.75 0 015.5 0V6h-5.5zM5.75 6v-.25a4.25 4.25 0 018.5 0V6c1.01.02 1.62.08 2.11.33a3 3 0 011.31 1.3c.33.65.33 1.49.33 3.17v.5c0 2.52 0 3.78-.49 4.74a4.5 4.5 0 01-1.97 1.97c-.96.49-2.22.49-4.74.49H9.2c-2.52 0-3.78 0-4.74-.49a4.5 4.5 0 01-1.97-1.97C2 15.08 2 13.82 2 11.3v-.5c0-1.68 0-2.52.33-3.16a3 3 0 011.3-1.31c.5-.25 1.1-.31 2.12-.33zm-.8 1.54c.43-.04.99-.04 1.85-.04h6.4c.86 0 1.42 0 1.85.04.4.03.56.09.63.12.28.15.51.38.66.66.03.07.1.22.12.63.04.43.04.99.04 1.85v.5c0 1.28 0 2.16-.06 2.83-.05.66-.15 1-.27 1.23a3 3 0 01-1.3 1.31c-.24.12-.58.22-1.24.27-.67.06-1.55.06-2.83.06H9.2c-1.28 0-2.16 0-2.83-.06-.66-.05-1-.15-1.23-.27a3 3 0 01-1.31-1.3 3.24 3.24 0 01-.27-1.24c-.06-.67-.06-1.55-.06-2.83v-.5c0-.86 0-1.42.04-1.85.03-.4.09-.56.12-.63.15-.28.38-.51.66-.66.07-.03.22-.1.63-.12zm.8 2.33a.87.87 0 111.75 0 .87.87 0 01-1.75 0zM13.38 9a.88.88 0 100 1.75.88.88 0 000-1.75z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"market_outline_20"}.icon;case"market_services":return{icon:'<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.53 9.28a.75.75 0 00-1.06-1.06L9 11.69l-1.47-1.47a.75.75 0 10-1.06 1.06l2 2a.75.75 0 001.06 0l4-4z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 1a.75.75 0 01.75.75v.27C7.51 2 8.11 2 8.82 2h.43v-.25a.75.75 0 011.5 0V2h.43c.7 0 1.3 0 1.82.02v-.27a.75.75 0 011.5 0v.46c.24.06.46.14.68.25a4.25 4.25 0 011.86 1.86c.25.5.36 1.04.41 1.67.05.61.05 1.37.05 2.33v3.86c0 .96 0 1.72-.05 2.33a4.39 4.39 0 01-.41 1.67 4.25 4.25 0 01-1.86 1.86c-.5.25-1.04.36-1.67.41-.61.05-1.38.05-2.33.05H8.82c-.96 0-1.72 0-2.33-.05a4.39 4.39 0 01-1.67-.41 4.25 4.25 0 01-1.86-1.86 4.39 4.39 0 01-.41-1.67c-.05-.61-.05-1.38-.05-2.33V8.32c0-.96 0-1.72.05-2.33.05-.63.16-1.17.41-1.67a4.25 4.25 0 011.86-1.86c.22-.1.44-.19.68-.25v-.46A.75.75 0 016.25 1zm4.9 2.5c.77 0 1.37 0 1.85.02v.23a.75.75 0 001.5.05A2.75 2.75 0 0115.7 5c.13.25.21.57.26 1.11.04.55.04 1.25.04 2.24v3.8c0 1 0 1.7-.04 2.24a2.9 2.9 0 01-.26 1.1 2.75 2.75 0 01-1.2 1.21c-.25.13-.57.21-1.11.26-.55.04-1.25.04-2.24.04h-2.3c-1 0-1.7 0-2.24-.04a2.9 2.9 0 01-1.1-.26 2.75 2.75 0 01-1.21-1.2 2.94 2.94 0 01-.26-1.11C4 13.84 4 13.14 4 12.15v-3.8c0-1 0-1.7.04-2.24.05-.53.13-.86.26-1.1A2.75 2.75 0 015.5 3.8.75.75 0 007 3.75v-.23a45.88 45.88 0 011.85-.02h.4v.25a.75.75 0 001.5 0V3.5h.4z" fill="currentColor"/></svg>',name:"notebook_check_outline_20"}.icon;case"money":return{icon:'<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.62 2.5h6.76c.99 0 1.65 0 2.21.16a4.05 4.05 0 012.75 2.75c.16.56.16 1.22.16 2.2v3.18a.75.75 0 01-1.5 0V8.5H3v1.47c0 .94 0 1.6.04 2.1.04.51.12.8.24 1.04.24.48.63.87 1.11 1.11.23.12.53.2 1.03.24.52.04 1.17.04 2.11.04H17a.75.75 0 010 1.5H7.5c-.9 0-1.62 0-2.2-.05a4.2 4.2 0 01-1.59-.4 4.05 4.05 0 01-1.77-1.76c-.24-.48-.34-1-.4-1.6-.04-.57-.04-1.3-.04-2.19V7.62c0-.99 0-1.65.16-2.21a4.05 4.05 0 012.75-2.75c.56-.16 1.22-.16 2.2-.16zM3 7h14c-.01-.63-.03-.93-.1-1.17a2.55 2.55 0 00-1.73-1.73c-.33-.1-.75-.1-1.92-.1h-6.5c-1.17 0-1.6 0-1.92.1A2.55 2.55 0 003.1 5.83C3.03 6.07 3 6.37 3 7z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.72 12.22a.75.75 0 011.06 0l2.5 2.5a.75.75 0 010 1.06l-2.5 2.5a.75.75 0 11-1.06-1.06l1.97-1.97-1.97-1.97a.75.75 0 010-1.06z" fill="currentColor"/></svg>',name:"money_transfer_outline_20"}.icon;case"mark_as_ads":return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M18 5.2a2.25 2.25 0 00-3.44-1.9l-3.53 2.2H6a4 4 0 00-.44 7.98l.28 1.96a2.11 2.11 0 004.18-.6l-.2-1.34h1.21l3.53 2.2c1.5.94 3.44-.14 3.44-1.9zm-9.69 8.3H7.08l.25 1.73a.61.61 0 001.2-.18zM6 7h4.5v5H6a2.5 2.5 0 010-5zm9.35 7.43L12 12.33V6.67l3.35-2.1a.75.75 0 011.15.64v8.58c0 .6-.65.95-1.15.64z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"advertising_outline_20"}.icon;case"share":return{icon:'<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 6.96a.75.75 0 000-1.06L10.53 1.6a.75.75 0 00-1.06 0L5.18 5.9a.75.75 0 101.06 1.06l3.01-3v9.18a.75.75 0 001.5 0V3.95l3 3a.75.75 0 001.07 0z" fill="currentColor"/><path d="M4 12a.75.75 0 00-1.5 0v1.25a4.5 4.5 0 004.5 4.5h6a4.5 4.5 0 004.5-4.5V12a.75.75 0 00-1.5 0v1.25a3 3 0 01-3 3H7a3 3 0 01-3-3V12z" fill="currentColor"/></svg>',name:"share_external_outline_20"}.icon;case"pretty_cards":return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path clip-rule="evenodd" d="M7.08 3.5c-1.66 0-2.02.17-2.36.35-.38.2-.67.5-.87.87-.18.34-.35.7-.35 2.36v5.84c0 1.66.17 2.02.35 2.36.2.38.5.67.87.87.34.18.7.35 2.36.35h5.84c1.66 0 2.02-.17 2.36-.35.38-.2.67-.5.87-.87.18-.34.35-.7.35-2.36V7.08c0-1.66-.17-2.02-.35-2.36-.2-.38-.5-.67-.87-.87-.34-.18-.7-.35-2.36-.35zm-3.07-.97C4.66 2.18 5.31 2 7.08 2h5.84c1.77 0 2.42.18 3.07.53.64.34 1.14.84 1.48 1.48.35.65.53 1.3.53 3.07v5.84c0 1.77-.18 2.42-.53 3.07A3.57 3.57 0 0116 17.47c-.65.35-1.3.53-3.07.53H7.08c-1.77 0-2.42-.18-3.07-.53A3.57 3.57 0 012.53 16c-.35-.65-.53-1.3-.53-3.07V7.08c0-1.77.18-2.42.53-3.07.34-.64.84-1.14 1.48-1.48z" fill-rule="evenodd"/><path d="M6 7.5c0-.47 0-.7.08-.88a1 1 0 01.54-.54C6.8 6 7.03 6 7.5 6s.7 0 .88.08c.25.1.44.3.54.54.08.18.08.41.08.88v3c0 .47 0 .7-.08.88a1 1 0 01-.54.54c-.18.08-.41.08-.88.08s-.7 0-.88-.08a1 1 0 01-.54-.54C6 11.2 6 10.97 6 10.5zM11 7.5c0-.47 0-.7.08-.88a1 1 0 01.54-.54c.18-.08.41-.08.88-.08s.7 0 .88.08c.25.1.44.3.54.54.08.18.08.41.08.88v5c0 .47 0 .7-.08.88a1 1 0 01-.54.54c-.18.08-.41.08-.88.08s-.7 0-.88-.08a1 1 0 01-.54-.54c-.08-.18-.08-.41-.08-.88z"/></g></svg>',name:"columns_square_20"}.icon;case"podcast":return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="podcast_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="podcast_outline_20__Icons-20/podcast_outline_20"><g id="podcast_outline_20__podcast_outline_20"><path id="podcast_outline_20__Shape" opacity=".4" d="M0 0h20v20H0z"/><path d="M10 5a4 4 0 014 4v3a4 4 0 01-3.25 3.93v1.32a.75.75 0 11-1.5 0v-1.32A4 4 0 016 12V9a4 4 0 014-4zm0 1.5A2.5 2.5 0 007.5 9v3a2.5 2.5 0 004.5 1.5H10.45a.75.75 0 110-1.5h2.05v-1.5h-2.05a.75.75 0 110-1.5h2.05A2.5 2.5 0 0010 6.5zM10 2a7 7 0 016.94 6.07A1.5 1.5 0 0118 9.5v3a1.5 1.5 0 01-3 0v-3c0-.43.18-.81.47-1.09a5.5 5.5 0 00-5.25-4.9L10 3.5a5.5 5.5 0 00-5.47 4.91c.29.28.47.66.47 1.09v3a1.5 1.5 0 01-3 0v-3c0-.68.45-1.25 1.06-1.43A7 7 0 0110 2z" id="podcast_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"podcast_outline_20"}.icon}return""}(e),s.insertBefore(c,s.firstChild),!i&&n.moreWrap?domInsertBefore(s,n.moreWrap):(i||a).appendChild(s),s.setAttribute("tabindex",0),!i){s.setAttribute("data-title",t),s.setAttribute("aria-label",t),s.setAttribute("role","link");var d=function(){showTitle(this,!1,l||!1,{noZIndex:!0})};addEvent(s,"mouseover",d),r.push((function(){removeEvent(s,"mouseover",d)}))}if(o&&!cur.viewAsBox){var u=function(){return n.activate(),n.hide(!0),_.onItemClick&&!_.onItemClick(e)||o(),!1};addEvent(s,"click",u),r.push((function(){removeEvent(s,"click",u)}))}}n.moreWrap=!1,n.lastTypes=e,each(e,(function(e,t){var b=t[0],E=t[1],O=t[2];if("article"===b){if(!Object(c.b)("inline_attaches_icons"))return void(Object(s.o)()&&p(b,E,O,!1,a,[6,8]));if(!Object(s.o)())return}if("postpone"===b&&N&&!n.postponeBtn){var m=getLang("wall_publication_now");n.postponeBtn=se(`<div class="post_action_btn has_cross" id="post_postpone_btn${n.id}">\n                <div class="post_action_btn_layout">\n                  <span class="post_action_btn_text" role="button" aria-label="${replaceEntities(m)}">${m}</span>\n                  <span class="post_action_image_btn _close" role="button" title="${replaceEntities(getLang("wall_post_timer_reset"))}"></span>\n                  <div class="post_action_tt_content _postpone" id="post_postpone_tt_content${n.id}" onclick="cancelEvent(event)"></div>\n                </div>\n               </div>`),_.actionsEl.appendChild(n.postponeBtn);var h="post_postpone_btn"+n.id,w=ge(h),v=geByClass1("post_action_tt_content",w),g=geByClass1("post_action_btn_layout",w),P=[-4*(vk.rtl?-1:1),4],M=new ElementTooltip(g,{appendTo:domPN(w),forceSide:"bottom",autoShow:!1,customShow:!0,cls:"_postpone timer_in_tt",noOverflow:!1,centerShift:0,offset:P,content:v,noHideOnClick:!0,align:"left",onShow:()=>{B.activeState=!0},onHide:()=>{B.activeState=!1,setTimeout(()=>{B.postponeDatepicker&&B.postponeDatepicker.hide()},ElementTooltip.FADE_SPEED)},onFirstTimeShow:function(){show(v)}});return cur["postPostponeTT"+n.id]=M,cur.destroy.push((function(){M&&M.destroy()})),addEvent(n.postponeBtn,"click",O),void r.push((function(){removeEvent(n.postponeBtn,"click",O)}))}if(b!==f){if(d&&(l?b==l:e==o)){var D=a.appendChild(ce("div",{className:"ms_items_more_wrap"})),C=function(){n.show()},T=function(e){0===e.detail&&hasClass(n.moreWrap,"shown")?n.hide():n.show()},y=function(){n.hide()};addEvent(D,"mouseenter",C),addEvent(D,"click",T),addEvent(D,"mouseleave",y),r.push((function(){removeEvent(D,"mouseenter",C),removeEvent(D,"click",T),removeEvent(D,"mouseleave",y)}));var j=u;if(_.vectorIcon)j='<span class="blind_label">'+u+"</span>",addClass(D,"ms_items_more_wrap_vector");else j+=`<span class="MediaSelector__moreIcon">${{icon:'<svg fill="none" height="8" viewBox="0 0 12 8" width="12" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M2.16 2.3a.75.75 0 011.05-.14L6 4.3l2.8-2.15a.75.75 0 11.9 1.19l-3.24 2.5c-.27.2-.65.2-.92 0L2.3 3.35a.75.75 0 01-.13-1.05z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"dropdown_12"}.icon}</span>`;var I=D.appendChild(ce("a",{className:"ms_item_more",innerHTML:'<span class="ms_item_more_label">'+j+"</span>"}));I.setAttribute("tabindex",0),I.setAttribute("role","button"),I.setAttribute("aria-label",u);var L=ce("div",{className:"ms_items_more_helper"});i=ce("div",{className:"ms_items_more _more_items"}),L.appendChild(i),D.appendChild(L),n.moreWrap=D}p(b,E,O,i,a)}}))},enqueueOnAddMediaInit(e){},onAddMediaInit(e){}};t&&n.setItems(t),browser.msie&&(removeEvent(e,"MSPointerDown"),addEvent(e,"MSPointerDown",n.activate.pbind(!0)));removeEvent(e,"mouseover"),addEvent(e,"mouseover click",n.activate),_.global||cur.destroy.push((function(){removeEvent(e,"mouseover click",n.activate)}));_.forceToUp&&addClass(geByClass1("ms_items_more_wrap",a),"to_up");return n.handlersToClean=r,n}(e,R,{onActivate:function(){cur.attachCount=B.attachCount,cur.chooseMedia=B.chooseMedia,cur.getFrom=B.getFrom,cur.hasChosenMedia=B.hasChosenMedia,cur.lastAddMedia=B,cur.onMediaUploadStarted=h.onMediaUploadStarted,cur.showMediaProgress=B.showMediaProgress,cur.unchooseMedia=B.unchooseMedia,cur.updateChosenMedia=B.updateChosenMedia},onItemClick:function(e){return!(K&&B.attachCount()>=U&&"postpone"!==e&&"mark_as_ads"!==e&&"copyright"!==e)||(vk.widget?showBox("blank.php",{code:1900,limit:U}):Object(i.d)(getLang("global_error"),getLang("attachments_limit",U)),!1)},hideAfterCount:h.hideAfterCount,topOffset:h.topOffset,forceUp:h.forceUp,global:h.global,maxShown:h.maxShown,forceToUp:h.forceToUp,vectorIcon:h.vectorIcon,ignoreMobile:h.ignoreMobile,actionsEl:A,hideLabel:h.hideLabel});if(H){var F=intval(H.id);if(K){t.innerHTML=`<div id="page_pics_preview${F}" class="page_pics_preview media_preview clear_fix"></div><div id="page_dpics_preview${F}" class="page_pics_preview post_thumbed_media page_media_sortable media_preview clear_fix"></div><div id="page_docs_preview${F}" class="page_docs_preview post_thumbed_media page_media_sortable media_preview clear_fix"></div><div id="page_pdocs_preview${F}" class="page_docs_preview media_preview clear_fix"></div><div id="page_ldocs_preview${F}" class="page_docs_preview media_preview clear_fix"></div><div id="page_adocs_preview${F}" class="page_docs_preview media_preview clear_fix"></div><div id="page_mpics_preview${F}" class="page_pics_preview media_preview clear_fix"></div><div id="page_ppdocs_preview${F}" class="page_docs_preview media_preview _page_ppdocs_preview clear_fix"></div><div id="page_progress_preview${F}" class="page_progress_preview media_preview clear_fix"></div>`;var q=domFC(t),z=domNS(q),V=domNS(z),J=domNS(V),$=domNS(J),G=domNS($),Y=domNS(G),X=domNS(Y),Q=domNS(X);removeClass(t,"media_preview"),removeClass($,"vk_mini_app_preview"),removeClass($,"vk_mini_app_preview_fixed"),addClass(t,"multi_media_preview")}else addClass(t,"med_no_attach"),show(t);return N&&(X=ge("post_postpone_tt_content"+F)),(B={_addMediaLink:e,lnkId:F,menu:H,types:R,phLists:{},handlers:{},postponeIsTooltip:N,chosenMedias:[],limit:U,emitter:new b.a,eventTypes:{mediaUpdate:"mediaUpdate"},_showAddMedia:function(){H.show()},_hideAddMedia:function(e){H.hide(e)},hasRestrictingAttach:function(){return geByClass1("medadd_c_story",V)},getFrom:()=>k,updateChosenMedia:function(e,t,_){B.chooseMedia(e,t,_,null,null,null,!0)},addOrUpdateChosenMedia(){for(var e=arguments.length,t=new Array(e),_=0;_<e;_++)t[_]=arguments[_];var o=t[0],i=t[1];return(B.hasChosenMedia(o,i)?B.updateChosenMedia.bind(B):B.chooseMedia.bind(B))(...t)},hasChosenMedia:function(e,t){var _=!1;return each(B.chosenMedias,(function(){if(this[0]===e&&this[1]===t)return _=!0,!1})),_},chooseMedia:function(_,o,i,a,r,n,s){if(!cur.articleEditorLayer||"article"===_||"poll"===_){if(vk.widget&&(o=clean(o)),"postpone"===_&&N){if(hasClass(B.menu.postponeBtn,"on"))return!1;addClass(B.menu.postponeBtn,"on")}if(h.poster&&h.poster.isOpen()&&"postpone"!==_&&_!==f&&"copyright"!==_&&"situational_theme"!==_&&h.poster.closeEditor(),(B.attachCount()>=U&&void 0===i.upload_ind&&"postpone"!==_&&_!==f&&"situational_theme"!==_&&"mark_as_ads"!==_||B.hasRestrictingAttach())&&"copyright"!==_){if(K)return!1;B.unchooseMedia()}if(h.skipDuplicates)if(B.chosenMedias.find(e=>{if(!e)return!1;var t=m(e,2),o=t[0],i=t[1];return o===_&&i===e}))return!1;if(B.onChange&&!1===B.onChange(_,o,i,a))return void 0!==i.upload_ind&&re("upload"+i.upload_ind+"_progress_wrap"),!1;if("note"===_&&(cur.pbNoteAdded=!1),inArray(_,h.disabledTypes||[]))return!1;var d=!1,p={},b=null;if(K&&(each(B.chosenMedias,(function(e){if(b=e,this[0]==_&&this[1]==o)return d=!0,!1;p[this[0]]=p[this[0]]?p[this[0]]+1:1})),d&&!s||s&&!d))return!1;var E,O,w="",g="",P=!1,M=V,D="",C="",T=!1,y="";switch(_){case"graffiti":if(p.pretty_cards)return!1;isObject(i)||(i={thumb:i||""}),w=`<div class="fl_l page_preview_graffiti"><img class="page_preview_graffiti" src="${(i=Ye(i)).thumb}" /></div>`,M=P=Y;break;case"photos_list":if(vk.widget||p.pretty_cards)return!1;hide(this._addMediaLink),vkImage().src=i[1],(I=i[3].replace(/^{|}$/g,""))&&(I+=","),I+='"queue":1';var j=i[5];j&&j.restrictionBlur&&(y+=" PostPhotoRestriction--blur PostPhotoRestriction--photosList PostPhotoRestriction--smallIcon"),j&&j.restrictionGeo&&(y+=" PostPhotoRestriction--geo PostPhotoRestriction--photosList PostPhotoRestriction--smallIcon"),w=`<div${h.nocl?"":` onclick="return showPhoto('${i[4]}', '${i[2]}', '${clean(I)});"`} class="fl_l page_preview_photo${y}"><img class="page_preview_photo" src="${i[1]}" /></div>`,M=P=q;break;case"photo":if(p.pretty_cards)return!1;isObject(i)||(i={thumb_m:i[0]||"",thumb_s:i[1]||"",list:i[2]||"",view_opts:i[3]||"",upload_ind:i.upload_ind||void 0}),i=Ye(i),vkImage().src=i.thumb_m;var I=i.view_opts.replace(/^{|}$/g,"");if(vk.widget&&(I=I.replace(/&quot;/g,'"')),I&&(I+=","),I+='"queue":1',B.phLists[o]=i.list,x){if(!i.editable)return!1;if(!h.nocl){var L="{"+I+"}";L=JSON.parse(L),i.editable.click=B.showPhoto.pbind(o,i.list,L)}}var A=parseJSON(i.view_opts);y="",A.temp&&A.temp.restrictionGeo&&(y+=" PostPhotoRestriction--geo"),A.temp&&A.temp.restrictionBlur&&(y+=" PostPhotoRestriction--blur"),w=`<div ${h.nocl?"":` onclick="return cur.addMedia[${B.lnkId}].showPhoto('${o}', '${i.list}', {${clean(I)}});"`} class="fl_l page_preview_photo${n?" page_preview_ph_graff":""}${y}"><img class="page_preview_photo" src="${i.thumb_m}" /></div>`,P=1,M=q;break;case"video":if(isEmpty(i)||p.pretty_cards)return!1;if(isObject(i)||(i={thumb:i||""}),x){if(!i.editable)return!1;h.nocl||(i.editable.click=showVideo.pbind(o,i.list_id,{queue:1,autoplay:1}))}(i=Ye(i)).preview&&!vk.widget?(w=i.preview,i.editable.preview=w):w=`\n              <div ${h.nocl?"":`onclick="return showVideo('${o}', '${i.list_id}', {queue:1,autoplay:1});"`} class="fl_l page_preview_video">\n                <img class="page_preview_video" src="${i.thumb}" />\n              </div>\n            `,P=1,M=q,O=i.list_id;break;case"donut_link":if(!i||p.donut_link)return!1;w='<div class="medadd_h medadd_h_pretty_cards inl_bl">'+getLang("groups_donut_snippet_link_title")+"</div>",g=i.snippet_html;break;case"article":if(vk.widget||p.article||p.page||p.pretty_cards||!i)return!1;w='<div class="medadd_h medadd_h_pretty_cards inl_bl">'+getLang("global_article")+"</div>",g=i.snippet_html,o=i.url,i.rev&&(o+="?rev="+i.rev),M=$;break;case"audio":if(p.pretty_cards)return!1;i=Ye(i),w=Page.addAudioPreview(clean(o),i),D=` id="pam${F}_audio${clean(o)}"`;break;case"audio_playlist":if(p.audio_playlist)return!1;(i=Ye(i)).id=intval(i.id),i.ownerId=intval(i.ownerId),vk.widget&&i.authorHref&&!i.authorHref.match(/^(https?:\/\/|\/)/)&&(i.authorHref="https://"+i.authorHref),vk.widget&&i.coverUrl&&!i.coverUrl.match(/^(https?:\/\/|\/)/)&&(i.coverUrl="https://"+i.coverUrl);var R=i.coverUrl?`background-image:url('${i.coverUrl}'); background-size: cover;`:"",W="";W=i.authorHref?`<a href="${i.authorHref}" onclick="return nav.go(this)">${i.authorName}</a>`:i.authorName;var k="'"+(i.accessHash||"")+"'";g='<div class="audio_pl_attach_preview _audio_pl _audio_pl_'+i.ownerId+"_"+i.id+' clear_fix"><div class="audio_pl_attach_preview__play" onclick="return getAudioPlayer().playPlaylist('+i.ownerId+", "+i.id+", "+k+')"></div><div class="audio_pl_attach_preview__cover" style="'+R+'">'+(i.gridCovers||"")+'</div><div class="audio_pl_attach_preview__title">'+i.title+'</div><div class="audio_pl_attach_preview__info_line">'+W+"</div></div>",w='<span class="medadd_h">'+getLang("global_audio_playlist")+"</span>",M=$;break;case"artist":if(p.artist)return!1;var Q=i.coverUrl?`background-image:url('${i.coverUrl}');`:"",Z="",ee="";i.blockId&&(Z=`<div class="MusicAuthorSnippet__play" onclick="return getAudioPlayer().playBlock('${i.ownerId}', 'artist${i.blockId}', '', '', 'artist')">${getLang("audio_listen_snippet")}</div>`,ee="_audio_pl _audio_pl_${data.ownerId}_artist${data.blockId}"),g=`<div class="MusicAuthor_attach_preview _MusicAuthor ${ee} clear_fix">\n              <div class="MusicAuthorSnippet__cover" style="${Q}"></div>\n              <div class="MusicAuthorSnippet__info">\n                ${Z}\n                <div class="MusicAuthorSnippet__title">${i.title}</div>\n                <div class="MusicAuthorSnippet__subtitle">${getLang("global_artist")}</div>\n              </div>\n            </div>`,w='<span class="medadd_h">'+getLang("global_artist")+"</span>",M=$;break;case"curator":if(p.curator)return!1;var te="",_e="",oe=i.coverUrl?`background-image:url('${i.coverUrl}');`:"";i.blockId&&(te=`<div class="MusicAuthorSnippet__play" onclick="return getAudioPlayer().playBlock('${i.ownerId}', '${i.blockId}', '', '', 'curator')">${getLang("audio_listen_snippet")}</div>`,_e="_audio_pl _audio_pl_${data.ownerId}_curator${data.blockId}"),g=`<div class="MusicAuthor_attach_preview _MusicAuthor ${_e} clear_fix">\n              <div class="MusicAuthorSnippet__cover" style="${oe}"></div>\n              <div class="MusicAuthorSnippet__info">\n                ${te}\n                <div class="MusicAuthorSnippet__title">${i.title}</div>\n                <div class="MusicAuthorSnippet__subtitle">${getLang("global_curator")}</div>\n              </div>\n            </div>`,w='<span class="medadd_h">'+getLang("global_curator")+"</span>",M=$;break;case"doc":if(vk.widget||p.pretty_cards)return!1;if(i.editable){var ie="stopEvent(event);";(i=Ye(i)).hasBox&&(i.editable.click=e=>{Page.showGifBox(i.id,i.ownerId,intval(i.postId),intval(i.postOwnerId),i.hash,e)},ie=`Page.showGifBox(${intval(i.id)}, ${intval(i.ownerId)}, ${intval(i.postId)}, ${intval(i.postOwnerId)}, '${i.hash}', event);`),C+=" page_preview_doc_as_photo_wrap";var ae=m(i.editable.sizes.m||i.editable.sizes.s,1)[0];w=`<a href="${i.editable.href}" onclick="${h.nocl?"":ie}" class="page_preview_doc_as_photo" target="_blank" rel="noopener" style="background-image: url('${ae}');"><img class="page_preview_doc_as_photo" src="${ae}" />${i.editable.label}</a>`,P=1,M=q}else i.thumb&&i.thumb_s?(w="gif"==i.ext?'<a onclick="if (cur.cancelClick) return (cur.cancelClick = false);" target="_blank" rel="noopener" href="'+i.href+'" class="pam_dpic"><div class="page_preview_doc_photo"><img src="'+i.thumb+'" align="center" /></div><div class="page_preview_doc_photo_hint doc_gif">'+i.title+"</div>":'<a onclick="if (cur.cancelClick) return (cur.cancelClick = false);" target="_blank" rel="noopener" href="'+i.href+'" class="pam_dpic"><div class="page_preview_doc_photo"><img src="'+i.thumb+'" align="center" /></div><div class="page_preview_doc_photo_hint">'+i.title+"</div>",g='</a><div class="pam_bg"></div>',M=P=z,D=' id="pam'+F+"_doc"+o+'"'):(w="",g='<div class="page_doc_row"><a target="_blank" rel="noopener" href="'+i.href+'" class="page_doc_icon page_doc_icon'+intval(i.type)+'"></a><a target="_blank" href="'+i.href+'" class="page_doc_title">'+i.title+'</a><div class="page_doc_description_row"><div class="page_doc_size">'+i.size_str+"</div></div></div>",D=' id="pam'+F+"_doc"+o+'"');break;case"story":if(vk.widget||p.pretty_cards)return!1;w='<div class="medadd_c_story"><a target="_blank" rel="noopener" '+i.attr+'"><div class="medadd_c_story_thumb fl_l" style="background-image:url('+i.thumb+')"></div></a><div class="medadd_c_story_info fl_l"><a class="medadd_c_story_title" target="_blank" '+i.attr+'">'+i.title+'</a><div class="medadd_c_story_desc">'+i.date_string+"</div></div>",hide(e);break;case"narrative":if(p.narrative)return!1;w='<span class="medadd_h">'+getLang("global_type_narrative")+"</span>",g=i.snippet_html;break;case"mask":if(vk.widget||p.pretty_cards)return!1;w='<div class="medadd_c_mask"><div class="medadd_c_story_thumb fl_l" style="background-image:url(/images/landings/vkmasks/masksSnippet_2x.png)"></div></a><div class="medadd_c_story_info fl_l"><div class="medadd_c_story_title">'+i.share.title+'</div><div class="medadd_c_story_desc">'+i.share.desc+"</div></div>";break;case"share":if(p.share||p.page||p.pretty_cards||p.market||!i.lang)return!1;if(isArray(i)&&(i={domain:i[0],url:i[1],initialPattern:i[2],title:i[3],description:i[4],images:[i[5]],user_id:i[6],photo_id:i[7]}),T=i.is_vk_mini_app,i.draft){var ne={onSuccess:i.onSuccess,onError:i.onError};return B.checkURL(i.url,void 0,i.checkUrlAdditionalParams||{},ne),!1}if(!i.title&&!(cur.options.share||{}).allow_preview_empty_links)return(i.onError||function(){})(),!1;T?(i.title=Object(l.J)((i.title||"").replace(/\n/g,"\\n")),i.description=Object(l.J)((i.description||"").replace(/\n/g,"\\n"))):(i.title=Object(l.J)((i.title||"").replace(/<br>/g,"\n")),i.description=Object(l.J)((i.description||"").replace(/<br>/g,"\n")),i.description_short=Object(l.J)((i.description_short||"").replace(/<br>/g,"\n")),i.description_narrow=Object(l.J)((i.description_narrow||"").replace(/<br>/g,"\n"))),cur.options=cur.options||{},cur.options.share&&cur.options.share.max_title_len&&(i.title=(i.title||"").substr(0,cur.options.share.max_title_len)),cur.options.share&&cur.options.share.max_desc_len&&(i.description=(i.description||"").substr(0,cur.options.share.max_desc_len),i.description_short=(i.description_short||"").substr(0,cur.options.share.max_desc_len),i.description_narrow=(i.description_narrow||"").substr(0,cur.options.share.max_desc_len)),i.media=i.media||o,i.lang&&(cur.lang=extend(cur.lang||{},i.lang));var le={};if(vk.widget&&i.images_proxy_url&&i.images_proxy&&i.images_proxy.length&&(le={images_proxy_url:i.images_proxy_url,images_proxy:i.images_proxy.slice()}),i=extend(Ye(i),le),w='<a target="_blank" rel="noopener" href="/away.php?to='+encodeURIComponent(i.url)+'" class="medadd_h medadd_h_link inl_bl">'+clean(Object(l.J)(i.is_vk_mini_app?i.lang.global_vk_mini_app:i.lang.profile_choose_link))+"</a>",T){var de="vk_mini_app_preview";Object(c.b)("mini_apps_web_fixed_snippet_subtitle")&&(de+=" vk_mini_app_preview_fixed"),addClass($,de)}if(!i.prometheus&&!i.verification&&i.map_data){var ue=Xe($),pe="";pe=i.map_data[3]?i.map_data[3].replace("size=0,0","size="+ue.width+","+ue.height):"/maps?lat="+floatval(i.map_data[0])+"&lng="+floatval(i.map_data[1])+"&z=11&"+(window.isRetina()?"w="+2*ue.width+"&h="+2*ue.height:"w="+ue.width+"&h="+ue.height);var be="";Object(c.b)("maps_no_referrer")&&(be='referrerpolicy="no-referrer"'),w+=`<div class="medadd_c_share_map"><a onclick="return showBox('al_places.php', {act: 'geo_box', lat: ${floatval(i.map_data[0])}, long: ${floatval(i.map_data[1])}, provider: ${intval(i.map_data[3])}}, {dark: 1});"><div class="page_media_map_point"></div><img class="page_preview_map" ${be} width="${ue.width}" height="${ue.height}" src="${pe}" /></a></div>`}if(B.shareData=extend(B.shareData||{},i,{imagesStyles:[""]}),M=$,(i.onSuccess||function(){})(),(cur.options.share||{}).button_exclusive&&i.shareButtons)hide(e),(Ee=ge("signed"))&&disable(Ee);hide(domByClass(H.menuNode,"_type_share")),hide(domByClass(H.menuNode,"_type_market"));break;case"pretty_cards":if(p.share||p.pretty_cards||vk.widget)return!1;var Ee;w='<div class="medadd_h medadd_h_pretty_cards inl_bl">'+i.lang.global_wall_pretty_cards+"</div>",(Ee=ge("signed"))&&disable(Ee),hide(domByClass(H.menuNode,"_type_pretty_cards")),hide(e),M=$;break;case"poll":if(!i.lang||vk.vidget||p.poll||!J||p.pretty_cards)return!1;hide(domByClass(H.menuNode,"_type_poll")),M=J;break;case"map":if(vk.widget||p.pretty_cards)return!1;var Oe=Xe(Y);be="";Object(c.b)("maps_no_referrer")&&(be='referrerpolicy="no-referrer"'),w=`<span class="medadd_h medadd_h_link inl_bl">${clean(Object(l.J)(i[4]))}</span><div class="fl_l medadd_c_map"><a onclick="return showBox('al_places.php', {act: 'geo_box', lat: ${floatval(i[0])}, long: ${floatval(i[1])}, provider: ${intval(i[3])}}, {dark: 1});"><div class="page_media_map_point"></div><img class="page_preview_map" ${be} width="${Oe.width}" height="${Oe.height}" src="/maps?lat=${floatval(i[0])}&lng=${floatval(i[1])}&z=11&w=${Oe.width}&h=${Oe.height}" /></a></div>`,M=P=Y,hide(domByClass(H.menuNode,"_type_map"));break;case"page":if(p.share||p.page||!i.lang||vk.widget||p.pretty_cards)return!1;var me=i.media.split("_");w='<a href="/page'+i.media+'" onclick="return showWiki({oid: '+me[0]+", id: "+me[1]+'}, false, event, {queue: 1})" class="medadd_h medadd_h_page inl_bl">'+i.lang.profile_choose_page+"</a>",M=$;break;case"album":if(vk.widget||p.pretty_cards)return!1;if(i.is_private_album){extend(i.editable,{title:i.title,size:0}),P=1,M=q;break}if(i.thumb.match(/^\/images\//)&&(i.thumb=""),x){if(!i.editable)return!1;extend(i.editable,{title:i.title,size:i.count,click:!h.nocl&&nav.change.pbind({z:"album"+o})})}var he=i.thumb;vkImage().src=he,w=`<a class="${"fl_l page_album_link"+(he?"":" page_album_nocover")}" ${E=h.nocl?"":' href="/album'+o+'" onclick="return nav.change({z: \'album'+o+"'}, event)\""}>\n              ${he?`<div class="page_album_thumb_wrap"><img class="page_album_thumb" src="${he}"/></div>`:""}\n              <div class="page_album_title">\n                <div class="page_album_size">${i.count}</div>\n                <div class="page_album_title_text">${i.title}</div>\n              </div>\n            </a>`,P=1,M=q;break;case"note":if(!i.lang||vk.widget||p.pretty_cards)return!1;w="<a onclick=\"showWiki({w: 'note"+i.raw+'\', edit: 1}, true, event, {queue: 1})" class="medadd_h medadd_h_note inl_bl">'+i.lang.profile_choose_note+"</a>",g='<div class="medadd_c medadd_c_note"><a onclick="showWiki({w: \'note'+i.raw+'\', edit: 1}, true, event, {queue: 1})" id="share_note_title'+i.raw+'">'+i.title+"</a></div>",M=$;break;case"market":if(vk.widget||p.pretty_cards||p.share||p.market||p.market_services)return!1;var we="";i.thumb&&(we='<a target="_blank" rel="noopener" href="'+i.href+'"><img class="medadd_c_market_thumb fl_l" src="'+i.thumb+'" /></a>'),w='<div class="medadd_c_market">'+we+'<div class="medadd_c_market_info fl_l"><a class="medadd_c_market_title" target="_blank" href="'+i.href+'">'+i.title+'</a><div class="medadd_c_market_price">'+i.price+"</div></div>",hide(domByClass(H.menuNode,"_type_market")),hide(domByClass(H.menuNode,"_type_market_services"));break;case"market_album":if(vk.widget||p.pretty_cards)return!1;if(i.is_private_album){extend(i.editable,{title:i.title,msize:""}),P=1,M=q;break}if(x){if(!i.editable)return!1;extend(i.editable,{title:i.title,msize:langNumeric(i.count,i.lang.profile_X_market_items),click:!1})}me=o.split("_");vkImage().src=i.thumb,E=h.nocl?"":' href="/market'+me[0]+"?section=album_"+me[1]+'"',w=`<a class="${"fl_l page_preview_album wall_album_cover_wrap wall_market_album_cover"+(i.thumb?"":" page_album_nocover")}" ${E}>\n              ${i.thumb?`<img class="wall_album_cover" src="${i.thumb}"/>`:""}\n              <div class="wall_album_caption">\n                <div class="wall_album_title_wrap clear_fix">\n                  <div class="wall_album_count fl_r">${i.count}</div>\n                  <div class="wall_album_title">${i.title}</div>\n                </div>\n              </div>\n            </a>`,P=1,M=q;break;case"copyright":if(vk.widget)return!1;B.copyrightCreate(i);break;case"postpone":if(vk.widget)return!1;var ve="";if(cur.editingPost&&!K)o=intval(o),i.date=o||intval(cur.editingPost[7]),ge("wpe_save").innerHTML=getLang("global_save"),ve=getLang("global_save");else if(cur.editingPost&&"wpe_media_preview"==t.id){o=intval(o),i.date=o||intval(cur.editingPost[7]);var fe=geByClass1("medadd_c_timersett",X);if(fe){var Pe=domPN(fe);fe=Pe.innerHTML,re(Pe)}else fe="";ge("wpe_save").innerHTML=getLang("global_save"),ve=getLang("global_save")}else{i.draft?i.date=intval(o):cur.postponedLastDate&&(i.date=intval(cur.postponedLastDate)+3600);var Me=ge("official");if(!(Ke=gpeByClass("_submit_post_box",Me))&&h.poster&&domClosest("poster",Me)&&(Ke=ge("submit_post_box")),Me&&Ke){var De=domData(Ke,"from-oid"),Ce=domData(Ke,"oid");De==vk.id&&Ce&&wall.setReplyAsGroup(Me,{from:Ce}),disable(Me);var Te=window.data(Me,"tt");if(Te&&Te.rdBtns){var ye=Te.rdBtns[1],je=Te.rdBtnsGroup,Ie=domData(ye,"as");radiobtn(ye,Ie,je)}}(ye=ge("send_post"))&&(ye.innerHTML=i.lang.profile_wall_postpone_btn,ve=i.lang.profile_wall_postpone_btn)}N?(B.updatePostponeBtnText(!1,i.date),B.postponeDate=i.date):w=`<div class="medadd_h medadd_h_timer inl_bl">${i.lang.profile_choose_timer}<span id="postpone_preview${F}"></span></div>`,!B.postponeDatepicker&&N&&B.setupPostpone(i,fe),h.poster&&h.poster.changeBtnText(ve);var Le=Math.round((new Date).getTime()/1e3);intval(i.date)<Le&&(i.date=Le+3600),hide(domByClass(H.menuNode,"_type_postpone")),M=X;break;case f:if(vk.widget)return!1;break;case"mark_as_ads":if(vk.widget)return!1;w='<div class="medadd_h medadd_h_mark_as_ads inl_bl">'+i.lang.global_ads_wall_post_mark_as_ads_action+"</div>",hide(domByClass(H.menuNode,"_type_mark_as_ads")),M=X;break;case"wall":if(vk.widget||p.pretty_cards)return!1;w='<div class="medadd_c_wall"><a target="_blank" rel="noopener" href="'+i.href+'"><img class="medadd_c_wall_thumb fl_l" src="'+i.thumb+'" /></a><div class="medadd_c_wall_info fl_l"><a class="medadd_c_wall_author" target="_blank" href="'+i.href+'">'+i.author+'</a><div class="medadd_c_wall_type">'+i.lang.title+"</div></div>",D=' id="pam'+F+"_wall"+o+'"',hide(e);break;case"wall_reply":if(vk.widget||p.pretty_cards)return!1;w='<div class="medadd_c_wall"><a target="_blank" rel="noopener" href="'+i.href+'"><img class="medadd_c_wall_thumb fl_l" src="'+i.thumb+'" /></a><div class="medadd_c_wall_info fl_l"><a class="medadd_c_wall_author" target="_blank" href="'+i.href+'">'+i.author+'</a><div class="medadd_c_wall_type">'+i.lang.title+"</div></div>",D=' id="pam'+F+"_wall_reply"+o+'"',hide(e);break;case"podcast":if(vk.widget||p.pretty_cards)return!1;var Ae="_im_media_preview"===domPN(M).id,Be=!Ae&&cur.editingPost&&"wpe_media_preview"===domPN(M).id;if(Ae)w='<div class="medadd_c_podcast"><a target="_blank" rel="noopener" href="'+i.href+'"><img class="medadd_c_podcast_thumb fl_l" src="'+i.thumb+'" /></a><div class="medadd_c_podcast_info fl_l"><a class="medadd_c_podcast_title" target="_blank" href="'+i.href+'">'+i.title+'</a><div class="medadd_c_podcast_type">'+i.lang.title+"</div></div>";else{var Re=!1;each(B.chosenMedias||[],(function(e,t){isArray(t)&&"podcast"===t[0]&&(cur.addMedia[B.lnkId].unchooseMedia(e),Re=!0)})),Re&&B.onChange&&B.onChange(_,o,i,a),w='<div class="podcast_preview_title">'+getLang("audio_podcast_attach_media")+"</div>";var We=i.audio[AudioUtils.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+i.audio[AudioUtils.AUDIO_ITEM_INDEX_ID];cur.podcastEditData={audioId:We,ref:"post",onCreate:function(e,t){B.chooseMedia("podcast",e[AudioUtils.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[AudioUtils.AUDIO_ITEM_INDEX_ID],{audio:e,coverUrl:t})}};var ke="<span class=\"podcast_snippet__edit\" onclick=\"cur.chooseMedia = cur.podcastEditData.chooseMedia; stManager.add([jsc('web/podcast.js')], function() { Podcast.edit('"+We+"'); });\"></span>";w+='<div class="podcast_snippet_loading" id="podcast_loading'+o[0]+'"></div>',stManager.add([jsc("web/podcast.js")],(function(){domReplaceEl(ge("podcast_loading"+o[0]),Podcast.drawSnippet(i.audio,i.coverUrl,ke))}),!0)}if(M=G,(i.onSuccess||function(){})(),hide(domByClass(H.menuNode,"_type_podcast")),!Ae&&!Be){var Ue=ge("official"),Ke=Ue&&gpeByClass("_submit_post_box",Ue);if(Ue&&Ke)(De=domData(Ke,"from-oid"))!==(Ce=domData(Ke,"oid"))&&(C=" attach_disabled")}break;case v:if(vk.widget||p.pretty_cards||p[v])return!1;var xe="",Se=Number(i.type);if(Se===u.c&&(xe=i.private?getTemplate("event_snippet_private_info"):""),!(w=getTemplate("event_snippet",extend({bottom:xe},i))))return(i.onError||function(){})(),!1;w='<div class="event_preview_title">'+(Se===u.c?getLang("events_media_type"):getLang("groups_media_type_community"))+"</div>"+w,M=$,(i.onSuccess||function(){})();break;case"textlive":if(p.textlive)return!1;w=getTemplate("textlive_snippet",i);break;case"situational_theme":if(p.situational_theme)return!1}if(K){var Ne=B.chosenMedias,He=d?b:Ne.length,Fe="";if(x&&1===P)Fe=!1;else if("photos_list"===_)Fe=se('<div class="page_preview_'+_+"_wrap"+C+'" style="position: relative">'+w+'<div class="page_photos_count">'+o.split(",").length+"</div></div>");else if("postpone"==_&&N||"copyright"===_||_===f||"situational_theme"===_)Fe=!1;else{var qe=null;"share"===_&&i.map_data&&(qe="map"),Fe=se('<div class="page_preview_'+(qe||_)+"_wrap"+C+(T?" page_preview_vk_mini_app":"")+'"'+(h.nocl?' style="cursor: default"':"")+D+'><div nosorthandle="1" class="page_media_x_wrap inl_bl" data-title="'+getLang("dont_attach")+'" aria-label="'+getLang("dont_attach")+'" role="button" onmouseover="showTitle(this)" onclick="cur.addMedia['+B.lnkId+"].unchooseMedia("+He+'); return cancelEvent(event);"><div class="page_media_x" nosorthandle="1"></div></div>'+w+g+"</div>")}if(addClass(Fe,P?"fl_l":"clear_fix"),void 0!==i.upload_ind&&re("upload"+i.upload_ind+"_progress_wrap"),h.toggleLnk&&!d){var ze=B.attachCount()+1<U;toggle(e,ze),h.onToggleBlock&&h.onToggleBlock(ze)}x&&1===P?(addClass(M,"editable_thumbs_wrap"),M=domLC(M)&&hasClass(domLC(M),"editable_thumbs")?domLC(M):M.appendChild(ce("div",{id:"thumbs_edit"+F,className:"editable_thumbs"})),stManager.add(["thumbs_edit.css",jsc("web/thumbs_edit.js")],()=>{if(Ne[He]&&(Ne[He].type===_||Ne[He].media!==o)){if(h.toggleLnk&&!d){var a=B.attachCount()+1<U;toggle(e,a),h.onToggleBlock&&h.onToggleBlock(a)}i.editable.remove=B.unchooseMedia.pbind(He),show(domPN(M));var r=ThumbsEdit.convert(_,o,i.editable);domData(M,"te-inited")?d?ThumbsEdit.updateMedia(M,_,o,i):ThumbsEdit.addMedia(M,r):ThumbsEdit.init(M,[r],{width:h.teWidth,height:h.teHeight,nocl:h.nocl,force:!0,onMove:h.onAddMediaChange,onUpdate:h.onChangedSize,deferred:!0}),toggleClass(t,"media_preview_has_medias",B.hasVisibleRows()&&(hasClass(t,"reply_media_preview")||isVisible(e)||!hasClass("signed","disabled"))),h.onChangedSize&&h.onChangedSize()}},!0)):(("postpone"==_||"copyright"==_||_===f)&&N||"situational_theme"===_||(show(M),d?M.replaceChild(Fe,Ne[b][2]):M.appendChild(Fe)),S&&(M==V?stManager.add([jsc("web/sorter.js")],(function(){var e=getXY(V),t=getSize(V),_=function(){V.sorter?sorter.added(V):M.childNodes.length>1&&sorter.init(V,{onReorder:h.onAddMediaChange})};e[0]||e[1]||t[0]||t[1]?_():cur.sorterClbk=_,h.onChangedSize&&h.onChangedSize()}),!0):M==z&&stManager.add([jsc("web/qsorter.js")],(function(){z.qsorter?qsorter.added(z):M.childNodes.length>1&&qsorter.init(z,B.qsorterOpts()),h.onChangedSize&&h.onChangedSize()}),!0)),h.onChangedSize&&h.onChangedSize()),d?Ne[b]=[_,o,Fe,a,O,i]:Ne.push([_,o,Fe,a,O,i])}else{He=0;if("postpone"===_?He=1:"mark_as_ads"===_&&(He=2),"postpone"==_&&N||"copyright"===_||_===f||"situational_theme"===_)Fe=!1;else{var Ve=(!1===P?"page_docs_preview":"page_pics_preview")+(He?"":" post_thumbed_media");Ve+=P?" fl_l":" clear_fix";var Je=null;"share"===_&&i.map_data&&(Je="map"),Fe=se(`\n            <div class="${Ve}">\n              <div class="${"page_preview_"+(Je||_)+"_wrap"} ${C}" ${(h.nocl?'style="cursor: default"':"")+D}>\n                ${w}\n                <div nosorthandle="1" class="page_media_x_wrap inl_bl" data-title="${getLang("dont_attach")}" aria-label="${getLang("dont_attach")}" role="button" onmouseover="showTitle(this)" onclick="cur.addMedia[${B.lnkId}].unchooseMedia(${He}); return cancelEvent(event);">\n                  <div class="page_media_x" nosorthandle="1"></div>\n                </div>\n                ${g}\n              </div>\n            </div>`)}void 0!==i.upload_ind&&re("upload"+i.upload_ind+"_progress_wrap"),"postpone"!==_&&_!==f&&"mark_as_ads"!==_&&"copyright"!==_&&(B.chosenMedia=[_,o],B.chosenMedia[5]=i,B.chosenMediaData=i),B.singleAdded(Fe,_)}"share"==_?!i.title||a||i.url?i.video?(cur.shareShowImg=0,B.bigLink=!0,B.showExternalPreview()):B.showExternalPreview():(cur.shareShowImg=0,B.showPreview(!0),B.shareData.images=!1):"page"==_?i.nopreview||(cur.shareShowImg=0,B.shareData=extend(B.shareData||{},i,{images:!1}),B.showPreview()):"poll"===_?B.pollCreate(i):"postpone"==_?N?B.postponeInd=He:B.setupPostpone(i,fe):"mark_as_ads"==_?B.markAsAds=1:"pretty_cards"==_&&B.createPrettyCards(i),toggleClass(t,"media_preview_has_medias",B.hasVisibleRows()&&(isVisible(e)||!hasClass("signed","disabled"))),h.onChangedSize&&h.onChangedSize();var $e=window.event;return $e&&"click"==$e.type&&($e.ctrlKey||$e.metaKey||$e.shiftKey)&&B.attachCount()+1<=U&&(r=!0),cur.fileApiUploadStarted&&void 0!==i.upload_ind||i.upload_new||cur.preventBoxHideWithSharedBox||cur.preventBoxHide||!0===r||inArray(_,["poll","share","page","postpone","mark_as_ads","pretty_cards","copyright"])||boxQueue.hideLast(),cur.lastPostMsg=!1,h.onMediaAdd&&h.onMediaAdd(),getAudioPlayer().updateCurrentPlaying(),cur.onMediaChanged&&cur.onMediaChanged(B.chosenMedias),window.mvcur&&mvcur.onMediaChanged&&mvcur.onMediaChanged(),h.onMediaChanged&&h.onMediaChanged(),B.emitter&&B.emitter.emit(B.eventTypes.mediaUpdate),void 0!==i.upload_ind&&delete i.upload_ind,!1}function Ge(e,t){return isString(e)?e=clean(Object(l.J)(Object(l.J)(e))):(isObject(e)||isArray(e))&&(e=Ye(e,t)),e}function Ye(e,t){if(!vk.widget)return e;if((t=positive(t))>5)return e;if(isArray(e))e.forEach((function(_,o){e[o]=Ge(_,t+1)}));else if(isObject(e))for(var _ in e)e.hasOwnProperty(_)&&(e[_]=Ge(e[_],t+1));return e}function Xe(e){var t=340,_=127;return"im"!==cur.module&&(t=Math.min(parseInt(e.parentElement.offsetWidth),510)||480,_=Math.min(t/2,200),(hasClass(e.parentElement,"reply_media_preview")||"wpe_media_preview"===e.parentElement.id)&&_>120&&(_=120)),{width:t,height:_}}},unchooseMedia:function(_,o){if(B.onChange&&!1===B.onChange(!1,_))return!1;if(K){if(cur.checkURLDomainRequest&&cur.checkURLDomainRequest.abort(),clearTimeout(cur.showLoaderTimeout),clearInterval(cur.shareImgInterval),clearTimeout(cur.shareImgInterval2),clearTimeout(cur.imgLoadTimeout),clearTimeout(cur.checkURLDomainTO),void 0===_){if(window.ThumbsEdit&&ThumbsEdit.removeAll("thumbs_edit"+F),each(B.chosenMedias,(function(e,t){!t||void 0===e||o&&!inArray(t[0],o)||B.unchooseMedia(e)})),B.urlsCancelled=[],h.onChangedSize){h.onChangedSize();var i=setInterval(h.onChangedSize,50);setTimeout(clearTimeout.bind(null,i),500)}return void(B.copyrightToggle&&B.copyrightToggle(!0))}var a=B.chosenMedias;if(a[_]){var r;switch("podcast"===a[_][0]&&(r=cur.editingPost&&!cur.editingPost[3].reply&&"wpe_media_preview"===gpeByClass("multi_media_preview",a[_][2]).id),a[_][2]?((m=geByClass1("page_media_x_wrap",a[_][2],"div"))&&m.tt&&m.tt.el&&m.tt.destroy(),domPN(a[_][2])==V&&V.sorter?(each(V.sorter.elems,(function(){setStyle(this,{top:"auto",left:"auto",cursor:"auto"})})),V.sorter.destroy(),re(a[_][2]),V.childNodes.length>1&&sorter.init(V,{onReorder:h.onAddMediaChange})):domPN(a[_][2])==z&&z.qsorter?(each(z.qsorter.elems,(function(){setStyle(domFC(this),{top:"auto",left:"auto"}),setStyle(this,{cursor:"auto"})})),z.qsorter.destroy(),re(a[_][2]),z.childNodes.length>1&&qsorter.init(z,B.qsorterOpts())):re(a[_][2])):"photo"!=a[_][0]&&"video"!=a[_][0]&&"album"!=a[_][0]||window.ThumbsEdit&&ThumbsEdit.removeById("thumbs_edit"+F,a[_][0]+a[_][1]),a[_][0]){case"page":case"share":B.shareData={},re(B.sharePreview),hide("medadd_c_linkimg_loader"),delete B.sharePreview,show(domByClass(H.menuNode,"_type_share")),show(e),(n=ge("signed"))&&disable(n,!isChecked("official")),show(domByClass(H.menuNode,"_type_market"));break;case"pretty_cards":var n;re(B.prettyCardGallery.el),delete B.prettyCardGallery,(n=ge("signed"))&&disable(n,!isChecked("official")),show(domByClass(H.menuNode,"_type_pretty_cards")),show(e);break;case"poll":re(B.pollPreview),delete B.pollPreview,show(domByClass(H.menuNode,"_type_poll"));break;case"map":show(domByClass(H.menuNode,"_type_map"));break;case"podcast":var l=!0;if(r)+cur.editingPost[0].split("_")[0]!==cur.oid&&(l=!1);else{var s=(c=ge("official"))&&gpeByClass("_submit_post_box",c);if(c&&s)domData(s,"from-oid")!==domData(s,"oid")&&(l=!1)}toggle(domByClass(H.menuNode,"_type_podcast"),l);break;case"market":show(e),show(domByClass(H.menuNode,"_type_market")),show(domByClass(H.menuNode,"_type_market_services"));break;case"wall":case"wall_reply":case"story":case"narrative":show(e);break;case"postpone":var c,d=geByClass1("medadd_c_timersett",B.postponePreview);cur.editingPost&&d&&!N?re(domFC(B.postponePreview)):(X.innerHTML="",B.postponeDatepicker=null,B.postponeDate=null),B.postponePreview=!1,(c=ge("official"))&&disable(c,!1);var u=h.poster,p="";if(cur.editingPost)if(cur.editingPost[6]&&intval(cur.editingPost[6].getAttribute("data-suggest"))){p=getLang("wall_publish_suggest");var b=ge("wpe_save");b&&(b.innerHTML=p)}else{p=getLang("wall_publish_now");var E=ge("wpe_save");E&&(E.innerHTML=p)}else p=getLang("wall_send"),ge("send_post").innerHTML=p;u&&u.changeBtnText(p),N?(removeClass(B.menu.postponeBtn,"on"),B.updatePostponeBtnText(!0)):show(domByClass(H.menuNode,"_type_postpone"));break;case"mark_as_ads":show(domByClass(H.menuNode,"_type_mark_as_ads")),B.markAsAds=!1;break;case"copyright":B.copyrightRemove()}a[_]=!1}if(h.toggleLnk){l=B.attachCount()<U;toggle(e,l),h.onToggleBlock&&h.onToggleBlock(l)}toggle(q,!!(x?geByClass1("thumb_wrap",q):domFC(q))),toggle(z,!!domFC(z)),toggle(V,!!domFC(V)),toggle(J,!!domFC(J)),toggle($,!!domFC($)),toggle(G,!!domFC(G)),toggle(Y,!!domFC(Y)),N||toggle(X,!!domFC(X)),toggle(Q,!!domFC(Q))}else{var O,m;if(null==_&&(_=0),(m=geByClass("page_media_x_wrap",t,"div")[_])&&m.tt&&m.tt.el&&m.tt.destroy(),1==_){if(N)X.innerHTML="",B.postponeDatepicker=null,B.postponeDate=null,removeClass(B.menu.postponeBtn,"on"),B.updatePostponeBtnText(!0);else if(B.postponePreview){show(geByClass1("add_media_type_"+F+"_postpone",H.menuNode,"a"));var w=domPN(B.postponePreview);window.tooltips&&tooltips.destroyAll(w),re(w),B.postponePreview=!1;var v=H.lastTypes;each(H.types,(function(e,t){"postpone"===t[0]&&v.push(t)})),H.setItems(v)}}else if(2==_&&B.markAsAds){B.markAsAds=!1;var f=geByClass1("page_preview_mark_as_ads_wrap",t);window.tooltips&&f&&tooltips.destroyAll(f),re(f);v=H.lastTypes;each(H.types,(function(e,t){"mark_as_ads"===t[0]&&v.push(t)})),H.setItems(v)}else if(3===_)B.copyrightRemove();else{if(B.postponePreview||B.markAsAds){w=B.postponePreview&&domPN(B.postponePreview),f=B.markAsAds&&domPN(geByClass1("page_preview_mark_as_ads_wrap",t));for(var g=[],P=0;P<t.childNodes.length;P++){var M=t.childNodes[P];"DIV"==M.nodeName&&M!=w&&M!=f&&g.push(M)}each(g,(function(e,t){re(t)}));v=[];each(H.types,(function(e,t){"postpone"===t[0]&&B.postponePreview||"mark_as_ads"===t[0]&&B.markAsAds||v.push(t)})),H.setItems(v)}else val(t,""),addClass(t,"med_no_attach"),H.setItems(H.types);B.chosenMedia&&(B.chosenMedia=!1,B.chosenMediaData=!1),(O=B.shareData)&&(O.url&&B.urlsCancelled.push(O.url),O.initialPattern&&B.urlsCancelled.push(O.initialPattern),B.shareData={}),each([B.sharePreview,B.pollPreview],(function(){re(this)})),B.sharePreview=B.pollPreview=!1}h.toggleLnk&&show(e)}if($&&$.classList.remove("vk_mini_app_preview"),toggleClass(t,"media_preview_has_medias",B.hasVisibleRows()&&(hasClass(t,"reply_media_preview")||isVisible(e)||!hasClass("signed","disabled"))),B.copyrightToggle&&B.copyrightToggle(!0),cur.onMediaChanged&&cur.onMediaChanged(a),window.mvcur&&mvcur.onMediaChanged&&mvcur.onMediaChanged(),h.onMediaChanged&&h.onMediaChanged(),B.emitter&&B.emitter.emit(B.eventTypes.mediaUpdate),cur.lastPostMsg=!1,B.onChange&&B.onChange(!1),h.onChangedSize){h.onChangedSize();i=setInterval(h.onChangedSize,50);setTimeout(clearTimeout.bind(null,i),500)}},findChosenMedia:e=>B.chosenMedias.find(t=>t&&t[0]===e),findChosenMediaAllIndices(e){return t=B.chosenMedias,_=t=>t[0]===e,t.reduce((function(e,t,o){return _(t)?e.concat(o):e}),[]);var t,_},chosenMediaToObject(e){var t=m(e,6);return{type:t[0],media:t[1],data:t[5]}},unchooseMediaForType(e){B.findChosenMediaAllIndices(e).forEach(e=>{B.unchooseMedia(e)})},unchooseMediaByTypeAndId(e,t){var _=B.chosenMedias.findIndex(_=>{if(!_)return!1;var o=m(_,2),i=o[0],a=o[1];return e===i&&t===a});_>-1&&this.unchooseMedia(_)},singleAdded:function(_,o){if("copyright"!==o){if("postpone"===o){if(N)return;t.appendChild(_)}else if("mark_as_ads"===o)B.postponePreview?t.insertBefore(_,domLC(t)):t.appendChild(_);else{if(o===f||"situational_theme"===o)return;domFC(t)?t.insertBefore(_,domFC(t)):t.appendChild(_)}removeClass(t,"med_no_attach");var i=[];each(H.lastTypes,(function(e,t){("postpone"!==t[0]||!B.postponePreview&&"postpone"!==o)&&("mark_as_ads"!==t[0]||!B.markAsAds&&"mark_as_ads"!==o)&&(inArray(o,["postpone","mark_as_ads"])||inArray(t[0],["postpone","mark_as_ads"]))&&i.push(t)})),H.setItems(i),h.toggleLnk&&!i.length&&hide(e)}},getMedias:function(e){if(K){var t=window.ThumbsEdit?ThumbsEdit.getMedias("thumbs_edit"+F):[],_={},o=B.chosenMedias||[],i=[],a=function(e,t,o){if(o[0]+o[1]==e)return i.push(o),_[e]=!0,!1};return each(t,(function(e,t){each(o,a.pbind(t[0]+t[1]))})),each(z.childNodes,(function(e,t){var _=(t.id||"").match(/^pam\d+_([a-z]+)(-?\d+_\d+)/);_&&each(o,a.pbind(_[1]+_[2]))})),each(V.childNodes,(function(e,t){var _=(t.id||"").match(/^pam\d+_([a-z]+)(-?\d+_\d+)/);_&&each(o,a.pbind(_[1]+_[2]))})),each(o,(function(e,t){t&&isArray(t)&&t.length&&!_[t[0]+t[1]]&&i.push(t)})),i}return(o=B.chosenMedia)?[e?o:o[0]+o[1]]:[]},showPhoto:function(e){function t(t,_,o,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,_,o){for(var i in!cur.pvData||cur.pvShown&&cur.pvListId==t||delete cur.pvData[t],ajaxCache)i.toString().match(/^\/al_photos\.php\#act=show&draft_photos/)&&delete ajaxCache[i];var a=B.getMedias(),r=[];return each(a,(function(e,t){t&&"photo"==t[0]&&r.push(t[1]+"/"+(B.phLists[t[1]]||""))})),_.additional={},_.additional.open_pe=intval(cur.openEditor),cur.openEditor||(_.additional.draft_photos=r.join(";")),delete cur.openEditor,showPhoto(e,t,extend(_,{queue:1}),o)})),showMediaProgress:function(t,_,o){if(B.onProgress&&!1===B.onProgress(t,_,o))return!1;var i=o.loaded/o.total,a=intval(100*i),r=(o.fileName||o.name||"").replace(/[&<>"']/g,""),n=r?_+"_"+r:_,l=r?r.length>33?r.substr(0,30)+"...":r:"",s=ge("upload"+n+"_progress");if(s){show(s);p=geByClass1("ui_progress_bar",s);setStyle(p,{width:a+"%"})}else{cur.attachMediaIndexes||(cur.attachMediaIndexes={}),cur.attachMediaIndexes[n]=F;var c=`\n          <div class="fl_l">\n            <div class="page_attach_progress_wrap" style="margin-top: 3px; margin-bottom: 4px;">\n              <div id="upload${n}_progress" class="page_attach_progress ui_progress">\n                <div class="ui_progress_back"></div>\n                <div class="ui_progress_bar"></div>\n              </div>\n            </div>\n          </div>\n          ${l?'<div class="attach_label fl_l">'+l+"</div>":""}\n          <div class="progress_x fl_l" onmouseover="animate(this, {opacity: 1}, 200);showTooltip(this, {text: '${getLang("dont_attach")}', shift: [16, 8, 8], black: 1})" onmouseout="animate(this, {opacity: 0.6}, 200);" onclick="Upload.terminateUpload(${_}, '${r||_}', this);"></div>\n          `;if(K){if(Q.appendChild(ce("div",{id:"upload"+n+"_progress_wrap",innerHTML:c,className:"clear_fix upload_"+_+"_progress"},{marginTop:"6px"})),show(Q),h.toggleLnk){var d=B.attachCount()<U;toggle(e,d),h.onToggleBlock&&h.onToggleBlock(d)}}else{var u=ce("div",{id:"upload"+n+"_progress_wrap",innerHTML:c,className:"clear_fix upload_"+_+"_progress"});B.chosenMedia="progress",B.singleAdded(u,"progress")}h.onChangedSize&&h.onChangedSize(),s=ge("upload"+n+"_progress");var p=geByClass1("ui_progress_bar",s);a?setStyle(p,{width:a+"%"}):(setStyle(p,{width:"1px"}),hide(s))}},hasVisibleRows:function(){var e=!1;return each(geByClass("media_preview",t),(function(){if(isVisible(this))return e=!0,!1})),e},attachCount:function(){if(B.attachedCount)return B.attachedCount();if(!t)return 0;if(!K)return t.childNodes.length-(B.postponePreview?1:0)-(B.markAsAds?1:0);var e=(x&&window.ThumbsEdit?(ThumbsEdit.cache()["thumbs_edit"+F]||{}).previews||[]:q.childNodes).length+z.childNodes.length+Y.childNodes.length+V.childNodes.length/(V.sorter?2:1)+Q.childNodes.length;return B.sharePreview&&++e,B.pollPreview&&++e,e},onMediaTypesInit(){var e={actionsEl:A,addMedia:B,onMediaChange:h.onMediaChange};B.types.forEach(t=>{var _=t[3],o=_&&_.onMediaTypeInit;o&&o(e)})},pollCreate:function(e){var t=e.poll_html;if(cur.addMedia[F].pollInputData=e,J)if(t){var _=`<div class="medadd_c" id="poll_dummy${F}">${t}</div>`;B.pollPreview=J.appendChild(domFC(cf(_)))}else stManager.add(["ui_controls.css","ui_controls.js","datepicker.css",window.jsc("web/datepicker.js")],()=>{var t=e.poll_question_length,_=e.question,o=e.lang,i=e[g],a=e.answers,r=e[P],n=e[M],s=e[D],c=e[C],d=e[T],u=e[y],p=e.poll_is_board,b=e.poll_is_edit,E=e.poll_is_not_posted,O=e.poll_backgrounds,w=e.poll_answers_limit||10,v=e.poll_no_animate_opening||e.question,f=e[j],I=`\n          <div class="medadd_h medadd_h_poll inl_bl">\n            ${o.question}\n            <span class="medadd_poll_question_warning"></span>\n          </div>\n          <input onkeydown="cur.addMedia[%lnkid%].pollKeydown(this, event)" oninput="cur.addMedia[%lnkid%].pollChangeQuestion(this)" maxlength="${t}" onkeyup="cur.addMedia[%lnkid%].pollKeyup(this, event)" class="text dark medadd_poll_question${p&&b?" disabled":""}"${p&&b?' readonly="readonly"':""} id="create_poll_question%lnkid%" value="%question%" />\n          <div class="medadd_h">${o.answers}</div>\n          <div class="medadd_poll_answers" id="create_poll_answers%lnkid%">\n            %answers%\n          </div>\n          ${p&&b?"":`<div class="medadd_poll_answer_add_wrap" id="create_poll_add%lnkid%">\n            <div class="medadd_poll_answer_add fakeinput dark" onclick="cur.addMedia[%lnkid%].pollAnswerAdd()">${o.answer_add}</div>\n          </div>`}\n          %backgrounds%\n          %settings%\n          <div class="checkbox medadd_datepicker_checkbox medadd_poll_cb%classuntil%" id="create_poll_until%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${o.until}</div>\n          <div class="medadd_datepicker">\n            <input type="text" class="medadd_datepicker_date dark" id="create_poll_untildate%lnkid%"/><div class="medadd_datepicker_at datepicker_at">${o.at}</div><input type="text" class="medadd_datepicker_time dark" id="create_poll_untiltime%lnkid%"/>\n          </div>\n          ${p?`\n          <div class="checkbox medadd_poll_cb%classonmain%" id="create_poll_onmain%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${o.add_to_main}</div>\n          `:""}\n          ${p&&b?`\n          <div class="checkbox medadd_poll_cb%classclosed%" id="create_poll_closed%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${o.close}</div>\n          `:""}\n        `,L=`\n          <div class="medadd_h">${o.settings}</div>\n          ${b&&!E||p?"":`<div class="checkbox medadd_poll_cb%classanon%" id="create_poll_anonymous%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${o.anonymous}</div>`}\n          ${b?"":`<div class="checkbox medadd_poll_cb%classmulty%" id="create_poll_multy%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${o.multy}</div>`}\n          ${b?"":`<div class="checkbox medadd_poll_cb%classdisableunvote%" id="create_poll_disable_unvote%lnkid%" onclick="checkbox(this);cur.addMedia[%lnkid%].pollChanged();">${o.disable_unvote}</div>`}\n        `,A=`\n          <div class="medadd_poll_answer_wrap">\n            <input onkeydown="cur.addMedia[%lnkid%].pollKeydown(this, event)" onkeyup="cur.addMedia[%lnkid%].pollKeyup(this, event)" class="text dark medadd_poll_answer${p&&b?" disabled":""}"${p&&b?' readonly="readonly"':""} %attrs%/>\n            <div class="page_media_x_wrap medadd_poll_answer_remove" data-title="${o.answer_remove}" aria-label="${o.answer_remove}" role="button" onmouseover="showTitle(this)" onclick="cur.addMedia[%lnkid%].pollAnswerRemove(this)">\n              <div class="page_media_x"></div>\n            </div>\n          </div>\n        `,R=`\n          <div class="medadd_h">${o.background}</div>\n          <div class="medadd_poll_backgrounds_wrap" id="create_poll_backgrounds_wrap%lnkid%">\n            <div class="medadd_poll_backgrounds_arrow_prev" onclick="cur.addMedia[%lnkid%].pollBackgroundsPaging('prev')"></div>\n            <div class="medadd_poll_backgrounds_arrow_next" onclick="cur.addMedia[%lnkid%].pollBackgroundsPaging('next')"></div>\n            <div class="medadd_poll_backgrounds" id="create_poll_backgrounds%lnkid%">\n              %backgrounds%\n            </div>\n          </div>\n        `;cur.addMedia[F].answersLimit=w,cur.addMedia[F].tplAnswer=A;var W="";p||(W+=cur.addMedia[F].pollBackgroundGetHtml(),O&&O.forEach(e=>{W+=cur.addMedia[F].pollBackgroundGetHtml(e)}),W+=rs('\n          <div class="medadd_poll_background medadd_poll_background_uploader" onclick="cur.addMedia[%lnkid%].pollBackgroundUpload(this);">\n            <div class="medadd_poll_background_preview"></div>\n          </div>\n        ',{lnkid:F}),W=rs(R,{lnkid:F,backgrounds:W}));var k="";if(!a||isArray(a)&&!a.length){var U=[];for(var K in e)if(e.hasOwnProperty(K)){var x="answers".length+1;if("answers["===K.substr(0,x)){var S=intval(K.slice(x,-1));U.push([S,e[K]])}}U.length?(a=[],U.sort((e,t)=>e[0]<0&&t[0]<0?e[0]<t[0]:e[0]>=0&&t[0]>=0?e[0]>t[0]:t[0]<0).forEach(e=>{a.push([e[0]<0?e[0]:0,e[1]])})):a=[[0,""],[0,""]]}a.forEach((e,t)=>{var _=m(e,2),o=_[0],i=_[1];k+=rs(A,{attrs:(o?` id="create_poll_ans${o}"`:"")+(i?` value="${clean(Object(l.J)(i))}"`:""),lnkid:F})}),B.pollPreview=J.appendChild(ce("div",{className:"medadd_c medadd_poll",innerHTML:rs(I,{lnkid:F,question:_?clean(Object(l.J)(_)):"",classuntil:d?" on":"",settings:rs(L,{lnkid:F,classanon:i?" on":"",classmulty:u?" on":"",classdisableunvote:f?" on":""}),backgrounds:W,answers:k,classonmain:r?" on":"",classclosed:n?" on":""})})),a.length==w&&hide("create_poll_add"+F);var N="create_poll_untildate"+F,H=new Datepicker(N,{time:"create_poll_untiltime"+F,width:157,noPast:!0,activePeriod:2592e6,minStep:1,date:d||Math.round(((new Date).getTime()+864e5)/1e3),onUpdate:()=>{var e=new Date,t=new Date(1e3*positive(val(N)));t.getTime()>=e.getTime()+2592e6&&(H.timePicker.hourDD.val(e.getHours()),t.getMinutes()>e.getMinutes()&&H.timePicker.minDD.val(e.getMinutes()),H.setDate(t.getFullYear(),t.getMonth()+1,t.getDate(),!0,e.getHours(),e.getMinutes())),cur.addMedia[F].pollChanged()}});if(cur.addMedia[F].pollBackgroundsPos=0,cur.addMedia[F].pollBackgroundSelect(c?-c:intval(s)),cur.addMedia[F].pollChangeQuestion(ge("create_poll_question"+F)),v)elfocus("create_poll_question"+F),h.onChangedSize&&h.onChangedSize(),cur.addMedia[F].pollUpdateArrows();else{B.pollPreview.style.position="absolute",B.pollPreview.style.visibility="hidden";var q=B.pollPreview.offsetHeight;B.pollPreview.style.height=0,B.pollPreview.style.position="",B.pollPreview.style.visibility="",animate(B.pollPreview,{height:q},h.mail?0:200,()=>{B.pollPreview.style.height="",elfocus("create_poll_question"+F),h.onChangedSize&&h.onChangedSize(),cur.addMedia[F].pollUpdateArrows()})}var z=ge("create_poll_backgrounds_wrap"+F);function V(){addEvent(z,browserFeatures.wheelEvent,cur.addMedia[F].pollMouseWheel)}function $(){removeEvent(z,browserFeatures.wheelEvent,cur.addMedia[F].pollMouseWheel)}addEvent(z,"mouseenter",V),addEvent(z,"mouseleave",$),cur.destroy.push((function(){removeEvent(z,browserFeatures.wheelEvent,cur.addMedia[F].pollMouseWheel),removeEvent(z,"mouseenter",V),removeEvent(z,"mouseleave",$)}))})},pollMouseWheel:function(e){cancelEvent(e);var t=Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX;cur.addMedia[F].pollBackgroundsPaging(t,!0)},pollBackgroundsPaging:function(e,t){var _=ge("create_poll_backgrounds_wrap"+F),o=ge("create_poll_backgrounds"+F),i=_.offsetWidth,a=cur.addMedia[F].pollBackgroundsPos;isNumeric(e)?a+=e:"next"===e?a+=i:a-=i,cur.addMedia[F].pollBackgroundsPos=Math.max(0,Math.min(a,o.scrollWidth-i)),t?removeClass(o,"animated"):addClass(o,"animated"),setStyle(o,"transform","translateX("+cur.addMedia[F].pollBackgroundsPos*(vk.rtl?1:-1)+"px)"),cur.addMedia[F].pollUpdateArrows()},pollUpdateArrows:function(){var e=ge("create_poll_backgrounds_wrap"+F),t=ge("create_poll_backgrounds"+F);if(e){var _=e.offsetWidth,o=t.scrollWidth-_;toggleClass(e,"medadd_poll_backgrounds_arrow_prev_disabled",0===cur.addMedia[F].pollBackgroundsPos),toggleClass(e,"medadd_poll_backgrounds_arrow_next_disabled",cur.addMedia[F].pollBackgroundsPos===o||o<=0)}},pollUntilGet:function(){var e=isChecked("create_poll_until"+F)?positive(val("create_poll_untildate"+F)):0;return Math.min(e,(new Date).getTime()+2592e6)},pollBackgroundChange:function(e,t){var _=gpeByClass("medadd_poll_backgrounds",e),o=geByClass1("medadd_poll_background_radio",e);geByClass("medadd_poll_background_radio",_).forEach(e=>{checkbox(e,e===o)}),cur.addMedia[F].pollChanged()},pollAnswerAdd:function(){var e=ge("create_poll_answers"+F),t=geByClass("medadd_poll_answer_wrap",e).length,_=cur.addMedia[F].answersLimit;if(t<_){var o=cf(rs(cur.addMedia[F].tplAnswer,{lnkid:F}));e.appendChild(o);var i=geByClass("medadd_poll_answer",e).pop();elfocus(i)}h.onChangedSize&&h.onChangedSize(),toggle("create_poll_add"+F,t<_-1)},pollAnswerRemove:function(e){e.tt&&e.tt.el&&e.tt.destroy(),re(domPN(e)),h.onChangedSize&&h.onChangedSize(),cur.addMedia[F].pollChanged(),show("create_poll_add"+F)},pollKeydown:function(e,t){if((t=t||window.event)&&(10==t.keyCode||t.keyCode==KEY.ENTER||t.keyCode==KEY.TAB)){var _=hasClass(e,"medadd_poll_question"),o=t.shiftKey;if(_&&o)return;var i=_?domFC(domNS(domNS(e))):(o?domPS:domNS)(domPN(e));return i?elfocus(geByTag1("input",i)):o?elfocus(geByClass1("medadd_poll_question",domPN(domPN(domPN(e))))):this.pollAnswerAdd(),cancelEvent(t)}},pollKeyup:function(e,t){(!(t=t||window.event)||10!=t.keyCode&&t.keyCode!=KEY.ENTER&&t.keyCode!=KEY.TAB)&&(cur.addMedia[F].pollChangedTimeout&&clearTimeout(cur.addMedia[F].pollChangedTimeout),cur.addMedia[F].pollChangedTimeout=setTimeout(()=>cur.addMedia[F].pollChanged(),100))},pollBackgroundGetHtml:function(e){var t="",_=m(e||[0],1)[0];if(_<0){var o=m(e,5),i=o[1],a=o[2],r=o[3],n=o[4];t=`\n          <div class="medadd_poll_background" onclick="cur.addMedia[${F}].pollBackgroundChange(this);">\n            <div class="medadd_poll_background_preview">\n              <div class="medadd_poll_background_preview_lines1"></div>\n              <div class="medadd_poll_background_preview_lines2"></div>\n              <div class="medadd_poll_background_photo" style="background: rgb(${a}, ${r}, ${n});">\n                <div class="medadd_poll_background_photo_holder">\n                  <div class="medadd_poll_background_photo_gradient" style="background: linear-gradient(0, rgba(${a}, ${r}, ${n}, 1) 0, rgba(${a}, ${r}, ${n}, 0) 50%)"></div>\n                  <img src="${i}" class="medadd_poll_background_photo_img"/>\n                </div>\n              </div>\n            </div>\n            <div class="medadd_poll_background_radio radiobtn" data-id="${_}" data-photo-r="${a}" data-photo-g="${r}" data-photo-b="${n}" data-photo-url="${i}"></div>\n          </div>\n        `}else{var l="",s="";if(_){var c=m(e,2)[1];if("gradient"===c){var d=m(e,4),u=d[2],p=d[3],b=[];p.forEach(e=>{var t=m(e,2),_=t[0],o=t[1];b.push(`#${o} ${Math.round(100*_)}%`)}),l=`background: linear-gradient(${u-90}deg, ${b.join(",")});"`}else if("tile"===c){var E=m(e,5),O=E[2],h=E[3];l=`background: url(${E[4]}) top center;background-size: ${O}px ${h}px;"`}}else s=" medadd_poll_background_default";t=`\n          <div class="medadd_poll_background${s}" onclick="cur.addMedia[${F}].pollBackgroundChange(this);">\n            <div class="medadd_poll_background_preview"${l?` style="${l}"`:""}>\n              <div class="medadd_poll_background_preview_lines1"></div>\n              <div class="medadd_poll_background_preview_lines2"></div>\n            </div>\n            <div class="medadd_poll_background_radio radiobtn" data-id="${_}"></div>\n          </div>\n        `}return t},pollBackgroundAdd:function(e){var t=ge("create_poll_backgrounds"+F),_=geByClass1("medadd_poll_background_uploader",t),o=cf(cur.addMedia[F].pollBackgroundGetHtml(e));o=domFC(o),t.insertBefore(o,_)},pollBackgroundSelect:function(e){var t=ge("create_poll_backgrounds"+F);if(t){var _=domQuery1(`.radiobtn[data-id="${e}"]`,t)||domQuery1('.radiobtn[data-id="0"]',t);if(_){var o=domPN(_);cur.addMedia[F].pollBackgroundsPos=(o.offsetLeft-t.offsetWidth/2+o.offsetWidth/2)*(vk.rtl?-1:1),cur.addMedia[F].pollBackgroundsPaging(0,!0),cur.addMedia[F].pollBackgroundChange(o)}}},pollBackgroundGet:function(){var e=domQuery1(`#create_poll_backgrounds${F} .radiobtn.on`);return intval(domData(e,"id"))},pollBackgroundUploaded:function(e,t,_){var o=-intval(e);cur.addMedia[F].pollBackgroundAdd([o,clean(t),intval(_.r),intval(_.g),intval(_.b)]),cur.addMedia[F].pollBackgroundSelect(o)},pollBackgroundUpload:function(){var e=cur.addMedia[F].pollInputData;showBox("al_page.php",{act:"owner_photo_box",oid:e&&e.poll_owner_id||(h.mail?cur.gid?-cur.gid:vk.id:cur.oid||vk.id),lnk_id:F,is_voting:1},{stat:["owner_photo.css",jsc("web/owner_photo.js")]})},pollChanged:function(){h.onMediaChange&&h.onMediaChange()},pollBackgroundsGet:function(){var e=cur.addMedia[F].pollInputData,t=[];e&&e.poll_backgrounds&&e.poll_backgrounds.forEach(e=>{m(e,1)[0]>0&&t.push(e)});var _=ge("create_poll_backgrounds"+F);return geByClass("radiobtn",_).forEach((function(e){var _=intval(domData(e,"id"));_&&_<0&&t.push([_,domData(e,"photo-url"),intval(domData(e,"photo-r")),intval(domData(e,"photo-g")),intval(domData(e,"photo-b"))])})),t},pollData:function(e,t){var _=cur.addMedia[F],i={};if(_&&ge("create_poll_question"+F)){for(var a=ge("create_poll_answers"+F),r=!1,n=0,l=domFC(a);l;l=domNS(l)){var s=trim(val(domFC(l)));if(s){var c=-intval((domFC(l).id.match(/^create_poll_ans(\d+)$/)||[0,-n++])[1]);i[`answers[${c}]`]=s,r=!0}}if(!r)return domFC(a)||_.pollAnswerAdd(),!0!==e&&Object(o.q)(domFC(domFC(a))),!1;var d=trim(val("create_poll_question"+F));if(!d)return!0!==e&&Object(o.q)("create_poll_question"+F),!1;i.question=d,i[T]=_.pollUntilGet();var u=_.pollBackgroundGet();if(u<0?(i[C]=-u,i[D]=0):u>=0&&(i[C]=0,i[D]=u),i[g]=isChecked("create_poll_anonymous"+F)?1:0,i[P]=isChecked("create_poll_onmain"+F)?1:0,i[M]=isChecked("create_poll_closed"+F)?1:0,i[y]=isChecked("create_poll_multy"+F)?1:0,i[j]=isChecked("create_poll_disable_unvote"+F)?1:0,_.pollInputData&&t){i.poll_backgrounds=_.pollBackgroundsGet();var p=["poll_is_board","poll_is_edit","poll_id","poll_answers_limit"];h.mail&&p.push("lang"),p.forEach(e=>{_.pollInputData[e]&&(i[e]=_.pollInputData[e])}),h.mail&&(i.poll_is_edited=0,i["answers[0]"]||i.question!=_.pollInputData.question?i.poll_is_edited=1:[g,P,M,y,T,C,D,j].forEach(e=>{intval(i[e])!==intval(_.pollInputData[e])&&(i.poll_is_edited=1)}),i.poll_is_edited||_.pollInputData.answers.forEach(e=>{var t=m(e,2),_=t[0],o=t[1];void 0!==i[`answers[${-_}]`]&&i[`answers[${-_}]`]==o||(i.poll_is_edited=1)}))}}else _&&ge("poll_dummy"+F)&&_.pollInputData&&_.pollInputData.poll_id&&(i.poll_id=_.pollInputData.poll_id);return i},pollChangeQuestion:function(e){var t=cur.addMedia[F].pollInputData,_=t.poll_question_length-e.value.length,o=geByClass1("medadd_poll_question_warning");o.innerHTML=_<=20?langNumeric(_,t.lang.question_length):""},markAsAdsInit(){var e=this.markAsAdsGetCheckboxEl();e&&attr(e,"onclick",`cur.addMedia[${this.lnkId}].markAsAdsChanged();`)},markAsAdsGetCheckboxEl:()=>!!L&&L.querySelector(".Post__markAsAdsButton"),markAsAdsData(e){var t=!!e&&{},_=this.markAsAds||isChecked(this.markAsAdsGetCheckboxEl());return!_&&this.chosenMedias&&(_=this.chosenMedias.some(e=>{if(isArray(e)&&"mark_as_ads"===m(e,1)[0])return!0})),(_||e)&&(t={mark_as_ads:_?1:0}),t},markAsAdsChanged(){var e=this.markAsAdsGetCheckboxEl();if(e&&!hasClass(e,"disabled")){checkbox(e),Wall&&Wall.togglePostMarkAsAds(e,e.dataset.muteId);var t=this.markAsAdsData(!0).mark_as_ads;B.copyrightToggle&&B.copyrightToggle(!t),B.donutUpdateVisibility(),h.onMediaChange&&h.onMediaChange()}},copyrightInit(){var e=this.copyrightGetBtnEl();e&&attr(e,"onclick",`cur.addMedia[${this.lnkId}].copyrightShowBox();`),this.markAsAdsData(!0).mark_as_ads&&this.copyrightToggle(!1)},copyrightToggle(e){var t=document.querySelector("#post_copyright_btn"+this.lnkId);toggle(t,e);var _=this.copyrightGetBtnEl();_&&(e?(this.copyrightData(!0).copyright?(val(_,getLang("wall_post_copyright_edit_button")),_.classList.add("Post__copyrightButton--added")):(val(_,getLang("wall_post_copyright_add_button")),_.classList.remove("Post__copyrightButton--added")),_.classList.remove("Post__copyrightButton--disabled")):(val(_,getLang("wall_post_copyright_add_button")),_.classList.remove("Post__copyrightButton--added"),_.classList.add("Post__copyrightButton--disabled")))},copyrightGetBtnEl:()=>!!L&&L.querySelector(".Post__copyrightButton"),copyrightCreate(e){if(this.copyrightInputData=e,A&&e&&e.copyright){var t="post_copyright_btn"+this.lnkId,_=document.querySelector("#"+t);if(!_){var o=getLang("wall_post_copyright_source_text");_=cf(`<div class="post_action_btn on" id="${t}" onclick="cur.addMedia[${this.lnkId}].copyrightShowBox();">\n              <div class="post_action_btn_layout">\n                <span class="post_action_btn_text" role="button" aria-label="${replaceEntities(o)}">${o}</span>\n              </div>\n             </div>`),A.appendChild(_)}}this.copyrightChanged()},copyrightRemove(){var e=document.querySelector("#post_copyright_btn"+this.lnkId);e&&e.parentNode.removeChild(e),this.copyrightInputData&&(this.copyrightInputData.copyright=""),this.copyrightChanged()},copyrightUnchoose(){this.chosenMedias&&this.chosenMedias.forEach((e,t)=>{isArray(e)&&"copyright"===e[0]&&this.unchooseMedia(t)}),this.multi||this.copyrightRemove()},copyrightBoxAccept(e){var t=e.btns.ok[0],_=document.querySelector(".PostCopyrightBox__input"),i=document.querySelector(".PostCopyrightBox__error");if(hide(i),!Object(o.k)(t)){var a=val(_);if(!a)return Object(o.q)(_);ajax.post("al_wall.php",{act:"copyright_check_link",link:a},{onDone:()=>{this.copyrightInputData||(this.copyrightInputData={}),this.copyrightInputData.copyright=a,this.chooseMedia("copyright","",this.copyrightInputData),e.hide()},onFail:e=>(val(i,e),show(i),!0),showProgress:()=>Object(o.o)(t),hideProgress:()=>Object(o.w)(t)})}},copyrightBoxDecline(e,t){t&&this.copyrightUnchoose(),e.hide()},copyrightShowBox(){showBox("al_wall.php",{act:"copyright_box"},{cache:!0,onDone:e=>{cur.postCopyrightFeatureTT&&cur.postCopyrightFeatureTT.hide();var t=this.copyrightData(!0);e.removeButtons(),t.copyright?(e.setOptions({width:400,title:getLang("wall_post_copyright_mb_title_text_edit")}),e.setButtons(getLang("wall_post_copyright_edit_button"),()=>this.copyrightBoxAccept(e),getLang("global_cancel"),()=>this.copyrightBoxDecline(e)),e.setControlsText(`<a onclick="cur.addMedia[${this.lnkId}].copyrightBoxDecline(curBox(), true);">${getLang("global_delete")}</a>`)):(e.setOptions({width:400,title:getLang("wall_post_copyright_mb_title_text")}),e.setButtons(getLang("wall_post_copyright_add_button"),()=>this.copyrightBoxAccept(e),getLang("global_cancel"),()=>this.copyrightBoxDecline(e)),e.setControlsText("")),e.show();var _=document.querySelector(".PostCopyrightBox__input");val(_,t.copyright?Object(l.J)(t.copyright):""),addEvent(_,"keypress",t=>Object(n.e)(()=>{this.copyrightBoxAccept(e)},t)),_.focus()}})},copyrightChanged(){var e=this.markAsAdsData(!0).mark_as_ads;this.copyrightToggle(!e),h.onMediaChange&&h.onMediaChange()},copyrightData(e){var t=!!e&&{};return(this.copyrightInputData&&this.copyrightInputData.copyright||e)&&(t={copyright:this.copyrightInputData&&this.copyrightInputData.copyright||""}),t},urlsCancelled:[],shareData:{},checkMessageURLs:function(e,t,_){if(!(cur.noCheckMessageURLs||B.chosenMedia||B.urlAttachmentLoading&&B.urlAttachmentLoading[0]>vkNow()-1e4||B.attachCount()>=U)){if(cur.checkMessageHandler&&Object(p.j)(cur.checkMessageHandler)&&cur.checkMessageHandler(e),cur.reply_to&&cur.reply_to[0]){var o=Wall.getReplyName(cur.reply_to[0]);if(o=o&&isArray(o)&&o[1]?o[1]:""){var i=extractUrls(o,t);for(var a in i)if(i.hasOwnProperty(a)){var r=i[a].url;r.match(/^https?:\/\//)||(r="http://"+r),inArray(r,B.urlsCancelled)||B.urlsCancelled.push(r)}}}var n=extractUrls(e,t).map((function(e){var t=e.url,_=e.query,o=e.domain,i=t,a={};t.match(/^https?:\/\//)||(t="http://"+t);var r=inArray(t,B.urlsCancelled)||inArray(i,B.urlsCancelled),n=!0,l=!1;r||o.match(/(^|\.|\/\/)(vkontakte\.ru|vk\.com)/i)&&(n=!!_.match(/(#photo|^\/(photo|video|album|page|audio|doc|mask|poll|podcast)|z=(album|photo|video|audio_playlist|podcast)|w=(page|product|poll))(-?\d+_)?\d+|app\d+(?:_-\d+)?|\.(jpg|png|gif)$|artist\/([^\/]+).*$|market-?\d+\?section=album_\d+|^\/stickers\/.+$|\?w\=story(\d+)_(\d+)$|stor(y|ies)(\d+)_(\d+)$|^(\/dev)?\/(blog|press|education)\/.+$|^\/jobs\?w=job\d+$|^\/landings\/.+$|^\/messenger$|^\/fellowship$|^\/talents$|^\/play_safe_at_home$|^\/sale_day$|^\/services$|^\/vk_apps_contest$|^\/home(\/.+)?$|^\/2020(\/.+)?$|^\/notify(\/.+)?$|^\/ahmatova(\/.+)?$|^\/video-calls(\/.+)?$|^\/monetization(\/.+)?$|^\/mini-apps(\/.+)?$|^\/mobile$|^\/miniapps_2019$|^\/data_protection(\?section=(rules|requests|principles))?$|^\/safety(\?section=(social|parents|youth|tips|health|standards))?$|^\/ads(\/([a-zA-Z0-9\_]+))?$|^http:\/\/instagram\.com\/p\/.+/),_.match(I)&&(n=!0),_.match(/narrative(-?\d+_\d+(?:_\d+)?)$/)&&(n=!0),_.match(/^(\/@[._a-zA-Z0-9-]+)([\?|\&]rev=[_a-z0-9]+|[\?|\&]anchor=[-a-zÐ°-Ñ0-9]+)*$/)&&(delete(a=nav.fromStr(t))[0],n=!0),!n&&_.match(/music\/(album|playlist)\/(-?\d+_\d+)(_[a-z0-9]+)?/)&&(n=!0,l=!1),!n&&_.match(/[a-zA-Z0-9_\.-]{2,32}/)&&(n=!0,l=!0));return e.url=t,e.canceled=r,e.valid=n,e.initialUrl=i,e.params=a,e.needsCheckDomain=l,e})).filter((function(e){return!e.canceled&&e.valid})).sort((function(e,t){return e.needsCheckDomain-t.needsCheckDomain}));if(n.length){var l=n[0];l.needsCheckDomain?B.checkURLDomain(l.query,l.initialUrl,_):B.checkURL(l.initialUrl,_,l.params)}}},checkURLDomain:function(e,t,_){cur.checkURLDomainTO&&clearTimeout(cur.checkURLDomainTO),cur.checkURLDomainTO=setTimeout(function(e,t,_){cur.checkURLDomainRequest=ajax.post("share.php",{act:"id_by_link",url:e,to_mail:h.mail},{onDone:function(e,o){(e||o)&&B.checkURL(t,_)},onFail:function(){return!0}})}.pbind(e,t,_),100)},clearCheckURL:function(){clearTimeout(cur.checkURLTO),re(B.urlAttachmentLoading[2]),K?toggle(Q,Q.childNodes>0):toggleClass(t,"med_no_attach",!t.childNodes),B.urlAttachmentLoading=!1,setStyle(bodyNode,{cursor:"default"})},onCheckURLDone:function(e,t,_){var o="";t=t||{},B.urlAttachmentLoading&&(o=B.urlAttachmentLoading[1],B.clearCheckURL()),e?B.chooseMedia(_[0],_[1],extend({},_[2],t),o,!0):((h.onCheckURLDone||function(){})(e,_),(t.onError||function(){})(_))},cancelCheckUrl:function(){re(B.checkURLForm)},_getShareTimeHash:function(){var e=cur.share_timehash||((cur.options||{}).share||{}).timehash||"",t=Math.floor(Date.now()/1e3),_=-1;return e&&(_=parseInt(e.split("_",1)[0])+36e3),_-t<60?Object(r.b)("share.php?act=renew_url_attachment_hash",{act:"renew_url_attachment_hash",hash:e}).then((function(e){var t=e[0];return cur.share_timehash=t,t})):Promise.resolve(e)},checkURL:function(e,t){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e?this._getShareTimeHash().then((function(i){B.urlsCancelled.push(e),B.urlAttachmentLoading=[vkNow(),e],re(B.checkURLForm),B.checkURLForm=ce("div",{innerHTML:'<iframe name="share_parse_iframe'+F+'"></iframe>'}),utilsNode.appendChild(B.checkURLForm);var a=B.checkURLForm.appendChild(ce("form",{action:"/share.php?act=url_attachment",method:"post",target:"share_parse_iframe"+F}));each(extend({hash:i,allowed_share_buttons:((cur.options||{}).share||{}).allowed_buttons||"",index:F,url:e,to_mail:h.mail?1:"",from:h.from,module:cur.module},_),(function(e,t){a.appendChild(ce("input",{type:"hidden",name:e,value:t}))})),setStyle(bodyNode,{cursor:"wait"}),window.onUploadDone=B.onCheckURLDone.pbind(!0,o),window.onUploadFail=B.onCheckURLDone.pbind(!1,o),t&&(cur.checkURLTO=setTimeout((function(){B.urlAttachmentLoading.length>0&&B.clearCheckURL()}),t)),a.submit()})):(o.onError||function(){})()},addPreview:function(e,t){var _=t?" medadd_c_link_hidden":"";return B.sharePreview=$.appendChild(ce("div",{className:"medadd_c medadd_c_link"+_,innerHTML:'<div class="medadd_c_linkcon"><div></div>'+(e?'<div class="medadd_c_linkprg">'+getProgressHtml("","medadd_c_linkprg_inner")+"</div>":"")+"</div>"}))},shareImgUrl:function(e){var t=B.shareData;if(isArray(t.preview_images)&&t.preview_images[e])return t.preview_images[e];if(t.images_proxy&&t.images_proxy[e])return t.images_proxy_url+t.images_proxy[e];if(t.images){var _=t.images[e];return isArray(_)&&(_=_[0]?_[0]:""),_}return""},initSnippetVideoFunctions:function(){cur.selectSnippetVideo=function(){var e={to_id:h.toId||cur.postTo,act:"a_choose_video_box",snippet_video:1,from:this.getFrom()};showBox("al_video.php",e,{cache:1,dark:1})},cur.chooseSnippetVideo=function(e,t){var _=B.shareData,o=e.split("_");_.video_owner_id=o[0],_.video_id=o[1],_.video_full_id=e,_.video=t;for(var i=!1,a=0,r=Object.keys(t.editable.sizes);a<r.length;a++){var n=r[a];(i&&t.editable.sizes[n][1]>t.editable.sizes[i][1]||!i)&&(i=n)}if(i){var l=t.editable.sizes[i];_.images[_.images.length-1]=[l[0],o[0],o[1],"video",t.editable.duration],cur.shareShowNext(0,1)}B.showVideoSnippetPreview()}},showPreview:function(e){var _,o,i,a=B.shareData,r=B.sharePreview||B.addPreview(),n=domFC(r),s=a.is_vk_mini_app,d=window.wkcur&&window.wkcur.shown&&window.wkLayerWrap&&isVisible(window.wkLayerWrap)||(null===(_=window.Videoview)||void 0===_?void 0:_.isLayerShown())||cur.pvLayerCreated,u="ads"===cur.module||a.ads_post,p="im"===cur.module;a.is_product?addClass(n,"medadd_c_link_product"):removeClass(n,"medadd_c_link_product"),toggleClass(n,"medadd_c_link_special",!(!a.prometheus&&!a.verification)),"comment"!==h.from||s||(a.images=[]),a.prometheus||a.verification||!a.images||(o=a.images[cur.shareShowImg],i=!(!B.bigLink&&!a.big_link||a.force_small_link));var b=!(!cur.options.share||!cur.options.share.allow_snippet_video)||u,E=a.video&&b,O="",w={};if(a.failed)O=getLang("page_not_loaded");else if(a.prometheus)O="im"===cur.module?'<a target="_blank" href="'+a.url+'">'+a.title+"</a>":getTemplate("prometheus_snippet",{author_img:a.prometheus_author_image_url}),e=!0;else if(a.verification)O="im"===cur.module?'<a target="_blank" href="'+a.url+'">'+a.title+"</a>":getTemplate("verification_snippet",{author_img:a.verification_author_image_url}),e=!0;else if(a.template){var v=a.template;v&&(O=getTemplate(v,a))}else{var f="",g=clean(B.shareImgUrl(cur.shareShowImg));if(b&&B.initSnippetVideoFunctions(),!g&&s&&a.images&&a.images[cur.shareShowImg]&&(g=a.images[cur.shareShowImg]),s&&d&&2!==a.images.length)g=m(a.images,2)[1];if(s&&a.edit_video&&(g=a.edit_video.thumb),a.images&&a.images[cur.shareShowImg]&&g){var P=a.images[cur.shareShowImg];if(a.images.length>0){var M,D=!(!cur.options.share||!cur.options.share.allow_custom_photo||a.disable_edit||vk.widget),C=D&&!(cur.options.share&&cur.options.share.require_image)&&!s,T="onmouseover=\"showTooltip(this, {text: '"+getLang("global_link_choose_own_photo")+"', black: 1, shift: [7, 11, 8], appendParentCls: 'post'})\"",y="onmouseover=\"showTooltip(this, {text: '"+getLang("global_link_choose_own_video")+"', black: 1, shift: [7, 11, 8], appendParentCls: 'post'})\"",j="onmouseover=\"showTooltip(this, {text: '"+getLang("global_link_remove_photo")+"', black: 1, shift: [7, 11, 8], appendParentCls: 'post'})\"",I=isArray(P)&&1==P.length,L=I&&!b,A=I&&b,R=a.media&&"_"!=a.media&&D?'<div class="medadd_c_linkimg_controls">  <div class="medadd_c_linkimg_controls_btn_group clear_fix fl_l">'+(a.images.length>1?'    <div class="medadd_c_linkimg_controls_btn_arrows_group">      <div class="medadd_c_linkimg_controls_btn" id="medadd_ctrl_left" onclick="cur.shareShowNext(true);"></div>      <div class="medadd_c_linkimg_controls_btn" id="medadd_ctrl_right" onclick="cur.shareShowNext();"></div>    </div>':"")+'<div class="medadd_c_linkimg_controls_btn '+(a.images.length>1?"medadd_c_btn_side_padd":"")+'" id="medadd_ctrl_upload" '+T+" onclick=\"Page.ownerPhoto('"+a.media+"');\"></div>"+(b?'<div class="medadd_c_linkimg_controls_btn '+(a.images.length>1?"medadd_c_btn_side_padd":"")+'" id="medadd_ctrl_upload_video" '+y+' onclick="cur.selectSnippetVideo();"></div>':"")+"  </div>"+(C?'  <div class="medadd_c_linkimg_controls_btn_group clear_fix fl_r">    <div class="medadd_c_linkimg_controls_btn" id="medadd_ctrl_remove" '+j+' onclick="window.tooltips && window.tooltips.hide(this); cur.removeLinkImage(this)"></div>  </div>':"")+"</div>":"",W=(o?"":"display: none")+";background-image:url("+g+")";a.image_ratio>0&&(W+=";height: 0px; padding-top: "+100*a.image_ratio+"%;min-height: 0px;");var k="video"===P[3]||a.edit_video,U="";s&&k&&(U+=" MiniAppsCoverWrapper--video");var K=P[4]||(null===(M=a.edit_video)||void 0===M?void 0:M.duration);f='<div class="medadd_c_linkimg_container '+($&&$.offsetWidth>550?"medadd_c_linkimg_container_wide":"")+U+'" style="'+W+'">'+f+(k?'<div class="medadd_c_linkimg_container_video_overlay"></div>':"")+(k?'<div class="video_thumb_label"><span class="video_thumb_label_item"></span><span class="video_thumb_label_item">'+K+"</span></div>":"")+(L?'<div class="medadd_c_linkimg_button"><button class="flat_button secondary_dark" onclick="Page.ownerPhoto(\''+a.media+"');\">"+getLang("global_link_choose_own_photo")+"</button></div>":"")+(A?'<div class="medadd_c_linkimg_button"><div class="medadd_c_linkimg_button_half_container"><button class="flat_button secondary_dark" onclick="Page.ownerPhoto(\''+a.media+"');\">"+getLang("global_link_choose_own_photo")+'</button></div><div class="medadd_c_linkimg_button_half_container"><button class="flat_button secondary_dark medadd_c_linkimg_video_button" onclick="cur.selectSnippetVideo();">'+getLang("global_link_choose_own_video")+"</button></div></div>":"")+R+'<div id="medadd_c_linkimg_loader" class="medadd_c_linkimg_loader">'+getProgressHtml("","inv medadd_c_linkimg_loader_inner")+"</div></div>"}}var x="";a.microdata&&a.microdata_preview_html&&(x=a.microdata_preview_html),w={title:{placeholder:'<span class="medadd_inline_placeholder">'+getLang("global_link_edit_title")+"</span>",editable:cur.options.share&&cur.options.share.allow_edit_title&&!a.disable_edit&&!vk.widget},description:{placeholder:'<span class="medadd_inline_placeholder">'+getLang("global_link_edit_desc")+"</span>",editable:cur.options.share&&cur.options.share.allow_edit_desc&&!a.disable_edit&&!vk.widget},url:{placeholder:'<span class="medadd_inline_placeholder">'+getLang("global_link_edit_url")+"</span>",editable:cur.options.share&&cur.options.share.allow_edit_url&&!a.disable_edit&&!vk.widget}};var S=a.shareButtons,N=S&&S.length&&S[0],H=a.button_text||N&&N[1],F=a.button_text_lang||N&&N[2],q=a.button_action||N&&N[0];if(S&&S.length&&F===H)for(var z=0;z<S.length;++z)if(S[z][0]===q&&S[z][2]===H){H=S[z][1];break}var V=!1;S&&S.length&&(V=S.length>1||F===H||N[0]!==q||N[1]!==H);var J=!!S&&S.length,G=cur.options.share&&cur.options.share.allow_remove_button&&!E;s&&!u&&(G=!1);var Y=clean(a.title).replace(/\n/g,"<br>"),X=a.domain,Q="";s&&u&&(Q+=" MiniAppsSnippetWrap--ads"),s&&k&&(addClass(n,"MiniAppsSnippetCover--video"),Q+=" MiniAppsSnippetWrap--video"),s&&2===a.images.length&&(Q+=" MiniAppsSnippetWrap--small"),s&&Object(c.b)("vk_mini_apps_new_web_snippet")&&stManager.add(["MiniAppsSnippet.css"]);var Z="";if(s)Z={icon:'<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M5.4 9c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96s-.27.36-.47.47c-.2.11-.4.17-.96.17H3.6c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47S2 12.96 2 12.4v-1.8c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47.2-.11.4-.17.96-.17zm7 0c.55 0 .76.06.96.17s.36.27.47.47c.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47-.2.11-.4.17-.96.17h-1.8c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47S9 12.96 9 12.4v-1.8c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47s.4-.17.96-.17zm-.57-7.47c.23.07.4.17.8.57l1.27 1.27c.4.4.5.57.57.8.06.22.06.44 0 .66s-.17.4-.57.8L12.63 6.9c-.4.4-.57.5-.8.57-.22.06-.44.06-.66 0-.23-.07-.4-.17-.8-.57L9.1 5.63c-.4-.4-.5-.57-.57-.8a1.14 1.14 0 010-.66c.07-.23.17-.4.57-.8l1.27-1.27c.4-.4.57-.5.8-.57s.44-.06.66 0zM5.4 2c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47-.2.11-.4.17-.96.17H3.6c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47-.11-.2-.17-.4-.17-.96V3.6c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47.2-.11.4-.17.96-.17z" fill="currentColor"/></svg>',name:"services_16"}.icon;if(O=f+'<div class="medadd_c_linkwrap '+(f?"":"no_photo")+Q+'"><div class="medadd_c_linkwrap_block">'+(Y||w.title.editable?'<div class="medadd_c_linkhead '+(w.title.editable?"medadd_inline_editable":"")+'">'+(w.title.editable?'<div class="medadd_inline_editable_icon"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.6 5.64l2.76 2.76L7.75 15a5.2 5.2 0 01-2.16 1.3l-2.25.69a.26.26 0 01-.33-.33l.7-2.25A5.2 5.2 0 015 12.25l6.6-6.61zm3.95-2.3l1.1 1.1c.44.43.46 1.1.09 1.57l-.08.09-1.18 1.17-2.75-2.75 1.17-1.18c.46-.45 1.2-.45 1.65 0z" fill="currentColor"/></svg></div>':"")+'<span class="medadd_inline_edit_target" data-max-length="'+(cur.options.share&&cur.options.share.max_title_len?cur.options.share.max_title_len:0)+'" data-field="title">'+(clean(a.title).replace(/\n/g,"<br>")||w.title.placeholder)+"</span></div>":"")+(x?'<div class="medadd_c_linkmicrodata">'+x+"</div>":"")+(X||w.url.editable?`<div class="page_media_link_url medadd_c_linkaddr ${w.url.editable?"medadd_inline_editable":""}">${w.url.editable?'<div class="medadd_inline_editable_icon"></div>':""}<span class="medadd_inline_edit_target" data-max-length="2000" data-field="url" data-display-field="domain">${a.domain||"Url..."}</div>`:"")+"</div>"+(F&&J?'<div class="medadd_c_linkwrap_block medadd_c_linkwrap_block_button">'+(G?'<div class="hide_icon medadd_c_linkbtn_remove" onclick="cur.shareRemoveButton();" onmouseover="showTooltip(this, {text: \''+getLang("global_share_button_remove_tooltip")+"', black: 1, shift: [15, 10, 0]})\"></div>":"")+'<div class="wall_postlink_preview_btn medadd_c_linkbtn"><a onclick="cur.toggleShareButton(this);return false;" onmouseout="Page.actionsDropdownHide(domNS(this), 0, cur.setActiveShareButton.pbind(false))" onmouseover="Page.actionsDropdownUnhide()" class="flat_button">'+Z+'<span onmouseover="Page.actionsDropdownUnhide()" class="'+(V?"page_actions_dd_label":"")+' wall_postlink_preview_btn_label" data-field="button_text">'+F+"</span></a></div></div>":"")+'</div><div class="clear_fix"></div>',s&&p){O=f;var ee={icon:'<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M5.4 9c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96s-.27.36-.47.47c-.2.11-.4.17-.96.17H3.6c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47S2 12.96 2 12.4v-1.8c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47.2-.11.4-.17.96-.17zm7 0c.55 0 .76.06.96.17s.36.27.47.47c.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47-.2.11-.4.17-.96.17h-1.8c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47S9 12.96 9 12.4v-1.8c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47s.4-.17.96-.17zm-.57-7.47c.23.07.4.17.8.57l1.27 1.27c.4.4.5.57.57.8.06.22.06.44 0 .66s-.17.4-.57.8L12.63 6.9c-.4.4-.57.5-.8.57-.22.06-.44.06-.66 0-.23-.07-.4-.17-.8-.57L9.1 5.63c-.4-.4-.5-.57-.57-.8a1.14 1.14 0 010-.66c.07-.23.17-.4.57-.8l1.27-1.27c.4-.4.57-.5.8-.57s.44-.06.66 0zM5.4 2c.55 0 .76.06.96.17.2.1.36.27.47.47.11.2.17.4.17.96v1.8c0 .55-.06.76-.17.96-.1.2-.27.36-.47.47-.2.11-.4.17-.96.17H3.6c-.55 0-.76-.06-.96-.17-.2-.1-.36-.27-.47-.47-.11-.2-.17-.4-.17-.96V3.6c0-.55.06-.76.17-.96.1-.2.27-.36.47-.47.2-.11.4-.17.96-.17z" fill="currentColor"/></svg>',name:"services_16"}.icon,te=`<h5 class="MiniAppsSnippetBottomFields__title">${Y}</h5>`,_e=`<h6 class="MiniAppsSnippetBottomFields__description">${X}</h6>`,oe=`<h6 class="MiniAppsSnippetBottomFields__type_description">${getLang("apps_snippet_mini_app")}</h6>`,ie=`<a class="MiniAppsSnippetBottomButton flat_button">${ee}${F}</a>`;O+=i?`\n            <div class="MiniAppsSnippetBottom">\n              <div class="MiniAppsSnippetBottomFields">\n                ${te}\n                ${_e}\n                ${oe}\n              </div>\n              ${ie}\n            </div>\n          `:`\n              <div class="MiniAppsSnippetFields">\n                 ${te}\n                 ${_e}\n                 ${oe}\n                 ${ie}\n              </div>\n            `}}if(i?addClass(n,"medadd_c_linkimg_big"):removeClass(n,"medadd_c_linkimg_big"),e)cur.preventShareAnim&&(cur.preventShareAnim.stop(),clearInterval(cur.animateUpdateInterval),h.onChangedSize&&h.onChangedSize()),val(n,O),n.style.height="auto",shortCurrency();else{show($);var ae="";s&&k&&(ae+=" MiniAppsSnippet--video");var ne=t.appendChild(ce("div",{innerHTML:'<div class="medadd_c_linkcon '+(i?"medadd_c_linkimg_big":"")+ae+'">'+O+"</div>"},{position:"absolute",width:getSize(r)[0]-10,visibility:"hidden"})),le=getSize(ne)[1];re(ne),setStyle(n,{height:"0"}),setStyle(r,{overflow:"hidden"}),val(n,O),shortCurrency(),cur.animateUpdateInterval=setInterval((function(){h.onChangedSize&&h.onChangedSize()}),100),cur.preventShareAnim=animate(n,{height:le},200,(function(){setStyle(n,{height:"auto",display:""}),setStyle(r,{overflow:""}),clearInterval(cur.animateUpdateInterval),h.onChangedSize&&h.onChangedSize()})),re(geByClass1("medadd_c_linkprg",$))}function de(e){var t=new RegExp(/^([\w-]*:\/\/)|(tel:).*$/),_=new RegExp(/^(?:tel:)?\+?[0-9()-]+$/),o=new RegExp(/^(([a-zÐ°-Ñ0-9]|[a-zÐ°-Ñ0-9][a-zÐ°-Ñ0-9\-]*[a-zÐ°-Ñ0-9])\.)*([a-zÐ°-Ñ0-9]|[a-zÐ°-Ñ0-9][a-zÐ°-Ñ0-9\-]*[a-zÐ°-Ñ0-9])$/i),i=new RegExp(/^([\w-]*:\/\/)?([a-zÐ°-Ñ0-9\-]+(?:[\-\.]{1}[a-zÐ°-Ñ0-9\-]+)*\.[a-zÐ°-Ñ0-9\-]{2,22})(:[0-9]{1,5})?([\/\?\#].*)?$/i);if(!e||e.inlineEdit)return!1;var a=getSize(e),r=gpeByClass("medadd_inline_editable",e);e.inlineEdit=!0,addClass(r,"medadd_inline_editing"),removeClass(r,"medadd_inline_invalid");var n=ce("textarea",{className:"medadd_inline_edit"},{width:a[0],height:a[1]}),s=parseInt(e.getAttribute("data-max-length"));s&&n.setAttribute("maxlength",s);var c=e.getAttribute("data-field"),d=e.getAttribute("data-display-field");val(n,Object(l.J)(B.shareData[c])),val(e,""),e.appendChild(n);var u=ce("span",{className:"medadd_inline_edit_target"},{opacity:0,zIndex:-1,width:a[0],height:"auto",wordWrap:"break-all",position:"absolute"});r.appendChild(u);var p=a[1];if(elfocus(n),"url"===c){var b=B.shareData[c];_.test(b)&&val(n,Object(l.J)(b.replace("tel:",""))),n.onkeydown=function(e){32!==e.which&&32!==e.keyCode||e.preventDefault(),13!==e.which&&13!==e.keyCode||(e.preventDefault(),n.blur())},n.oninput=function(){var e=this;cur.editingPostUrlCleanTimeout&&clearTimeout(cur.editingPostUrlCleanTimeout),cur.editingPostUrlCleanTimeout=setTimeout((function(){e.value=e.value.replace(/[\n ]/g,"")}))}}n.onblur=function(){if(n.oninput=null,removeClass(r,"medadd_inline_editing"),re(u),clearTimeout(cur.editingPostUrlCleanTimeout),B.shareData[c]=val(n),"url"===c&&B.shareData[c])try{var a=B.shareData[c];if(_.test(a.replace(/[\h\s(\)-]/g,"")))a=a.replace(/[\h\s\(\)-]|(tel:)/g,""),B.shareData.domain="...",B.shareData[c]="tel:"+a,e.inlineEdit=!1,ajax.post("share.php",{act:"check_phone",url:B.shareData[c]},{onDone:function(t){var _;t&&t.formattedPhone?(B.shareData.domain=clean(t.formattedPhone),_=B.shareData.domain):(addClass(r,"medadd_inline_invalid"),B.shareData.domain=getLang("global_link_invalid_url"),_=B.shareData.domain),val(e,clean(_).replace(/\n/g,"<br>")||w[c].placeholder)},onFail:function(){addClass(r,"medadd_inline_invalid"),B.shareData.domain=getLang("global_link_invalid_url")}});else{t.test(a)||(a="https://"+a);var s=new URL(a);if(!s.host||!o.test(s.host)||!i.test(a))throw new Error("Invalid url");if(_.test(Object(l.J)(B.shareData.domain).replace(/[\h\s\(\)-]/g,""))||o.test(B.shareData.domain)||B.shareData.domain===getLang("global_link_invalid_url")||B.shareData.domain===getLang("global_link_edit_url")){var p=a.match(i);B.shareData[c]=a.replace(i,"$1"+p[2].toLowerCase()+"$3$4"),B.shareData.domain=p[2].toLowerCase()}}}catch(e){addClass(r,"medadd_inline_invalid"),B.shareData.domain=getLang("global_link_invalid_url")}var b;"url"!==c||B.shareData[c]||(B.shareData.domain=getLang("global_link_edit_url")),b=d&&B.shareData[d]?B.shareData[d]:val(n),val(e,clean(b).replace(/\n/g,"<br>")||w[c].placeholder),e.inlineEdit=!1};var E=function(){var e=clean(val(n)+" M").replace(/\n/g,"<br>");val(u,e);var t=getSize(u);p!=t[1]&&(p=t[1],animate(n,{height:t[1]},200))};addEvent(n,"click keyup change",E),setTimeout(E,0)}if(w.title&&w.title.editable){var ue=geByClass1("medadd_c_linkhead",n),pe=geByClass1("medadd_inline_edit_target",ue);ue&&pe&&(ue.onclick=de.bind(this,pe))}if(w.description&&w.description.editable){var be=geByClass1("medadd_inline_edit_target",geByClass1("medadd_c_linkdsc",n));be&&(be.onclick=de.bind(this,be))}if(w.url&&w.url.editable){var Ee=geByClass1("medadd_c_linkaddr",n),Oe=geByClass1("medadd_inline_edit_target",Ee);Ee&&Oe&&(Ee.onclick=de.bind(this,Oe)),h.linkTooltip&&!cur.linkTooltip&&Ee&&(cur.linkTooltip=new ElementTooltip(h.linkTooltip.el(Ee),h.linkTooltip.opts),h.linkTooltip.timeout?setTimeout(()=>cur.linkTooltip.show(),h.linkTooltip.timeout):cur.linkTooltip.show())}if(J&&(B.shareData.button_text=H,B.shareData.button_text_lang=F,B.shareData.button_action=q,V)){var me=domPN(geByClass1("wall_postlink_preview_btn_label",n)),he=[],we=0,ve=0,fe=[];for(var z in S)if(S.hasOwnProperty(z)){var ge=S[z];ge[0]==q&&ge[1]==H&&(we=ve),he.push([ve++,ge[1]]),fe.push('<a class="page_actions_item" tabindex="0" role="link" onclick="cur.updateShareButton(this);Page.actionsDropdownHide(domPN(domPN(this)), 1, cur.setActiveShareButton.pbind(false));return false;" data-button-text="'+ge[1]+'" data-button-text-lang="'+ge[2]+'" data-button-action="'+ge[0]+'">'+ge[2]+"</a>")}me.setAttribute("data-items",JSON.stringify(he)),me.setAttribute("data-value",we);var Pe=['<div class="page_actions_wrap medadd_c_linkbtn_actions_wrap unshown" onmouseout="Page.actionsDropdownHide(this, 0, cur.setActiveShareButton.pbind(false))" onmouseover="Page.actionsDropdownUnhide()" onmouseup="setTimeout(function() { Page.actionsDropdownUnhide(); }, 5)">','<div class="page_actions_inner">',fe.join(""),"</div>","</div>"].join("");domPN(me).appendChild(se(Pe)),ls.get("share_button_text_tooltip_shown")||cur.buttonTextTooltip||setTimeout((function(){cur.closeButtonTextTooltip=function(){cur.buttonTextTooltip.hide(),ls.set("share_button_text_tooltip_shown",1)};var e=geByClass1("wall_postlink_preview_btn_label",n),t=domCA(e,".box_layout");cur.buttonTextTooltip=new ElementTooltip(e,{autoShow:!1,appendTo:t||geByTag1("body"),content:'<div class="feature_intro_tt_hide" onclick="cur.closeButtonTextTooltip();"></div>'+getLang("global_share_button_text_tooltip"),forceSide:"left",cls:"feature_intro_tt feature_intro_blue_tt",offset:[-10,0,0],onHide:function(){cur.buttonTextTooltip.destroy()}}),cur.buttonTextTooltip.show(),addEvent(e,"mouseover",(function(){cur.buttonTextTooltip&&cur.buttonTextTooltip.hide()}))}),1e3)}},showVideoSnippetPreview:function(){if(!(!cur.options.share||!cur.options.share.allow_snippet_video)){var e=B.shareData,t=e.video,_=e.video_owner_id,o=e.video_id;t&&isObject(t)&&_&&o&&t.editable&&(B.initSnippetButtonFunctions(),B.showPreview())}},initSnippetButtonFunctions:function(){cur.shareRemoveButton=function(){var t=B.sharePreview;window.tooltips&&tooltips.destroyAll(t),re(geByClass1("medadd_c_linkwrap_block_button",t)),B.shareData.button_text="",B.shareData.button_text_lang="",B.shareData.button_action="",show(domByClass(e,"media_selector"))},cur.updateShareButton=function(e){var t=e.getAttribute("data-button-text"),_=e.getAttribute("data-button-text-lang"),o=e.getAttribute("data-button-action");B.shareData.button_text=t,B.shareData.button_text_lang=_,B.shareData.button_action=o;var i=B.sharePreview;return val(geByClass1("page_actions_header_inner",i),_),val(geByClass1("wall_postlink_preview_btn_label",i),_),!1},cur.setActiveShareButton=function(e){var t=B.sharePreview;(e?addClass:removeClass)(domPN(geByClass1("wall_postlink_preview_btn_label",t)),"active")},cur.toggleShareButton=function(e){hasClass(e,"active")?(Page.actionsDropdownHide(domNS(e),1),cur.setActiveShareButton(!1)):(Page.actionsDropdown(domNS(e)),cur.setActiveShareButton(!0))}},showExternalPreview:function(){var e=B.shareData;e.images||(e.images=[]);var t,_=[],o=[],i={};each(e.images,(function(t,a){i[a]||(i[a]=!0,_.push(a),e.images_proxy&&o.push(e.images_proxy[t]))})),e.uniqueImagesCount=_.length,e.images=_,e.images_proxy=o;var a=!(!cur.options.share||!cur.options.share.allow_snippet_video);if(t=$&&$.offsetWidth>550?isRetina()?"/images/post_snippet_image_placeholder_w_2x.png":"/images/post_snippet_image_placeholder_w.png":a?isRetina()?"/images/post_snippet_image_video_placeholder_2x.png":"/images/post_snippet_image_video_placeholder.png":isRetina()?"/images/post_snippet_image_placeholder_2x.png":"/images/post_snippet_image_placeholder.png",e.placeholder_inserted||(e.images.push([(cur.options.share||{}).allow_custom_photo&&!vk.widget?t:""]),e.placeholder_inserted=!0),!e.images||!e.images.length)return cur.shareShowImg=0,void B.showPreview();cur.shareShowImg=0,cur.shareShowImg--,B.addPreview(!0,!!e.map_data),e.imagesStyles={};var r=!1;cur.shareSetOwnPhoto=function(t){curBox()&&curBox().hide(),B.bigLink=!0,e.isPhotoEdit=!0,e.images[e.images.length-1]=[t.photo_url,t.user_id,t.photo_id],cur.shareShowNext(0,1)},cur.shareClearOwnPhoto=function(){e.images[e.images.length-1]=[],cur.shareShowNext(0,0,1)},cur.removeLinkImage=function(t){var _=gpeByClass("medadd_c_linkcon",t);addClass(_,"no_photo"),removeClass(_,"medadd_c_linkimg_big"),re(gpeByClass("medadd_c_linkimg_container",t)),setStyle(_,"height",""),e.video_edit&&e.is_vk_mini_app&&removeClass(_,"MiniAppsCoverWrapper--video"),B.shareData.noPhoto=!0},B.initSnippetButtonFunctions(),cur.shareShowNext=function(_,o,i){var a=vkImage(),n="ads"===cur.module;cur.prevShareShowDir=_,i||(o?cur.shareShowImg=e.images.length-1:_?cur.shareShowImg-=1:cur.shareShowImg+=1);var l=cur.shareShowImg;!e.is_vk_mini_app||-1!==l&&2!==l||n||e.isPhotoEdit||(cur.shareShowImg=_?1:0);var s=isArray(e.images[e.images.length-1])&&!!e.images[e.images.length-1][0];if(!s&&cur.shareShowImg>e.images.length-2)cur.shareShowImg=0;else if(cur.shareShowImg>e.images.length-1)cur.shareShowImg=0;else if(!s&&cur.shareShowImg<0)cur.shareShowImg=e.images.length-2;else if(cur.shareShowImg<0)cur.shareShowImg=e.images.length-1;else if(0==cur.shareShowImg)for(var c=1;c<e.images.length-1;c++){vkImage().src=B.shareImgUrl(c)}if(!e.images.length||isEmpty(e.images)||void 0===e.images[cur.shareShowImg])return B.showPreview(r),void(r=!0);var d=B.shareImgUrl(cur.shareShowImg);d&&(a.src=d),e.video=0,isArray(e.images[cur.shareShowImg])&&e.images[cur.shareShowImg][1]&&e.images[cur.shareShowImg][2]?"video"===e.images[cur.shareShowImg][3]?(e.video=1,e.video_owner_id=e.images[cur.shareShowImg][1],e.video_id=e.images[cur.shareShowImg][2]):(e.user_id=e.images[cur.shareShowImg][1],e.photo_id=e.images[cur.shareShowImg][2],e.share_own_image=!0):(e.user_id=void 0,e.photo_id=void 0,e.share_own_image=!1);var u=null;d&&(cur.imgLoadTimeout=u=setTimeout((function(){!0!==cur.shareImgInterval&&(isArray(e.images[cur.shareShowImg])||(e.images.splice(cur.shareShowImg,1),e.images_proxy&&e.images_proxy.length>cur.shareShowImg&&e.images_proxy.splice(cur.shareShowImg,1),cur.shareShowNext()))}),5e3));var p=setTimeout((function(){show("medadd_c_linkimg_loader"),p=null,h.onChangedSize&&h.onChangedSize()}),100);cur.showLoaderTimeout=p;var b=function(){if(a.width||a.height||!d){var _=a.width,o=a.height,i="",n="";if(u&&(clearTimeout(u),u=null),p&&(clearTimeout(p),p=null),hide("medadd_c_linkimg_loader"),clearInterval(cur.shareImgInterval),!isArray(e.images[cur.shareShowImg])&&(_<150||o<67)){if(e.images.splice(cur.shareShowImg,1),e.images_proxy&&e.images_proxy.length>cur.shareShowImg&&e.images_proxy.splice(cur.shareShowImg,1),e.images.length)return setTimeout(cur.shareShowNext.pbind(0,0,1),0)}else{var l=_>=532&&o>=235,s=(l||!!e.big_link)&&!e.force_small_link;if(cur.options.share&&cur.options.share.force_big_link&&!l){e.images.splice(cur.shareShowImg,1),e.images_proxy.splice(cur.shareShowImg,1);var c=(cur.options.share||{}).allow_custom_photo||(cur.options.share||{}).require_image;return 0==e.images.length&&c&&e.images.push([c?t:""]),cur.prevShareShowDir||cur.shareShowImg--,void cur.shareShowNext(cur.prevShareShowDir)}B.bigLink=s,s?i="width: 100%;":(_>150&&(o=150*o/_,_=150),i="width: "+_+"px; height: "+o+"px;")}e.images.length>1&&(n=""),e.imagesStyles[cur.shareShowImg]='style="'+i+'"'+n,B.showPreview(r),r=!0,h.onAddMediaChange&&h.onAddMediaChange("share",e.media,e)}};clearInterval(cur.shareImgInterval),cur.shareImgInterval=setInterval(b,300),cur.shareImgInterval2=setTimeout(b,0)},cur.shareShowNext()},uploadShare:function(e){var t=B.shareData,_=B.sharePreview,o=_.appendChild(ce("div",{innerHTML:'<iframe class="upload_frame" name="share_upload_iframe'+F+'"></iframe>'})),i=o.appendChild(ce("form",{action:"/share.php",method:"post",target:"share_upload_iframe"+F})),a=t.images[cur.shareShowImg];each({act:"a_photo",url:t.url,index:F,image:a,extra:t.extra||0,hash:vk.ip_h},(function(e,t){i.appendChild(ce("input",{type:"hidden",name:e,value:t}))})),window.onUploadDone=function(t,i){window.onUploadFail=window.onUploadDone=function(){},_.removeChild(o),B.shareData=extend(B.shareData,{user_id:i.user_id,photo_id:i.photo_id,photo_url:a}),setTimeout(e,0)},window.onUploadFail=function(t,i){window.onUploadFail=window.onUploadDone=function(){},_.removeChild(o),B.shareData.share_upload_failed=1,setTimeout(e,0)},cur.shareLastParseSubmitted=vkNow(),i.submit()},setupPostpone:function(e,_,o){var i;i=K||X?X:domPN(geByClass1("page_preview_postpone_wrap",t));var a=cur.editingPost&&"wpe_media_preview"==domPN(i).id,r=a||!K?"":"1px",n=!1,l=`<div class="clear_fix">\n        <div class="fl_l datepicker_item"><input type="hidden" id="postpone_date${F}" value="${e.date||""}" /></div>\n        <div class="fl_l datepicker_item medadd_c_timerat">${e.lang.profile_wall_postpone_at}</div>\n        <div class="fl_l datepicker_item"><input type="hidden" id="postpone_time${F}"/></div></div>`,s=void 0!==e.friends_only;cur.editingPost&&s?(l+='<div class="medadd_c_timersett">',B.visibilityAddSelect(e),n=!0):cur.editingPost&&_&&(l+=_,n=!0),N||(B.postponePreview=i.appendChild(ce("div",{className:"medadd_c medadd_c_timer clear_fix"+(n?" medadd_c_nofixed":"")+(N?" timer_in_tt":""),innerHTML:l}))),N&&(B.postponeSubmitWrapper=se(`<div><input type="hidden" id="postpone_date${F}" value="${e.date||""}"><input type="hidden" id="postpone_time${F}"></div>`),i.appendChild(B.postponeSubmitWrapper)),N||(B.postponePreview.style.height=r);var c="datepicker-inline-container_"+F,d=`<button class='flat_button reset_time_btn secondary' onclick='cur.addMedia[${F}].onResetPostponeBtnClick()'>${getLang("wall_post_timer_reset")}</button>`,u=`<td class="cal_clear" id="${c}" colspan="7">${d}</td>`;stManager.add(["ui_controls.css","ui_controls.js","datepicker.css",window.jsc("web/datepicker.js")],(function(){B.postponeDatepicker=new Datepicker("postpone_date"+F,{time:"postpone_time"+F,width:155,noPast:!0,minStep:1,sideTop:cur.oid<0,sideTopOffset:10,inlineTime:N,inlineTimeContainerId:c,inlineTimeContainerIdx:F,addRows:N?"<tr>"+u+"</tr>":null,addRowsM:N?'<tr><td class="cal_clear" colspan="7"></td></tr>':null,onUpdate:function(e,t){var _=[...arguments];h.onMediaChange&&h.onMediaChange.apply(h,_),B.postponeDate=val("postpone_date"+B.lnkId),N&&B.updatePostponeBtnText()},hideAnotherMonth:!1}),a||!K||N||animate(B.postponePreview,{height:33},200,(function(){B.postponePreview.style.height=""})),B.menu.postponeBtn&&B.updatePostponeBtnText(),Object(p.j)(o)&&o()}))},getPostponeDateString:function(e){if(val("postpone_date"+B.lnkId)||e){e=(e=e||+val("postpone_date"+B.lnkId))+(60*(new Date).getTimezoneOffset()+intval(vk.tz))+intval(vk.dt);var t=getLang("datepicker_dateFormat");"dateFormat"===t&&(t="{day} {month} {year}");var _=new Date(1e3*e),o=_.getDate(),i=_.getMonth()+1,a=_.getFullYear();return t.replace("{day}",o).replace("{month}",winToUtf(getLang("Month"+i+"_of"))).replace("{year}",a)+` ${getLang("profile_wall_postpone_at")} `+`${_.getHours()}:${("0"+_.getMinutes()).slice(-2)}`}},onResetPostponeBtnClick(){cur["postPostponeTT"+B.lnkId].hide(),null!=B.postponeInd&&setTimeout(()=>{B.unchooseMedia(B.postponeInd)},ElementTooltip.FADE_SPEED),cancelEvent(window.event)},resetPostpone:function(e){if(e){e=e+(60*(new Date).getTimezoneOffset()+intval(vk.tz))+intval(vk.dt);var t=new Date(1e3*e);if(t){var _=t.getDate(),o=t.getMonth()+1,i=t.getFullYear(),a=t.getHours(),r=t.getMinutes();B.postponeDatepicker.timePicker.hourDD.val(a),B.postponeDatepicker.timePicker.minDD.val(r),B.postponeDatepicker.setDate(i,o,_,null,a,r)}}},updatePostponeBtnText:function(e,t){if(N){var _=geByClass1("post_action_btn_text",B.menu.postponeBtn),o="";if(e)o=getLang("wall_publication_now");else{var i=B.getPostponeDateString(t);if(!i)return;o=i}_.innerHTML=o,_.setAttribute("aria-label",replaceEntities(o))}},createPrettyCards:function(e){cur.lang=extend(cur.lang||{},e.lang||{});var t=se(e.editor.container_html);$.appendChild(t),B.prettyCardGallery=new PrettyCardGallery(t,e.editor,e.pretty_cards)},visibilityAddSelect:function(e){var t,_=!1,o=!1;e.friends_only?(_=!0,t="name_friends_only"):e.best_friends_only?(o=!0,t="name_best_friends_only"):t="name_no_friends_only";var i=se(getTemplate("visibility_access",{link_id:F}));toggleClass(i,"on",_),toggleClass(i,"best_friends_only",o);var a=geByClass1(t,i),r="post_visibility_btn",n=+domData(a,"value"),l=geByClass1("post_action_btn_text",i),s=o?getLang("wall_best_friends_only"):val(a);if(val(l,s),attr(l,"aria-label",s),i){var c=geByClass1("post_action_btn",A);c?A.insertBefore(i,c):A.appendChild(i),Wall.createPostTooltip(r,F)}radiobtn(a,n,"post_settings_btn"+r+F)},donutVisibilityAddSelect(e){var t=Object(d.c)(e);t&&t.donutPostSettings&&(B.donutPostSettings=t.donutPostSettings)},donutUpdateVisibility(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;B.donutPostSettings&&B.donutPostSettings.donutUpdateVisibility(e)},destroy:function(){(V||{}).sorter&&V.sorter.destroy();for(var _=0;_<H.handlersToClean.length;_++)H.handlersToClean[_]();(z||{}).qsorter&&z.qsorter.destroy(),removeClass(t,"media_preview_has_medias"),t&&(t.innerHTML=""),show(e),h.cleanOnDestroy&&delete cur.addMedia[F]},qsorterOpts:function(){return{xsize:Math.floor(z.offsetWidth/135),width:135,height:102,onReorder:h.onAddMediaChange,clsUp:"pam_dpic_up"}},resized:function(){window.ThumbsEdit&&ThumbsEdit.setWide("thumbs_edit"+cur.wallEditComposer.addMedia.lnkId),z.qsorter&&(z.qsorter.destroy(),window.qsorter.init(z,B.qsorterOpts()))}}).copyrightInit(),B.markAsAdsInit(),B.onMediaTypesInit(),cur.addMedia||(cur.addMedia={}),cur.addMedia[F]=B,h.onAddMediaChange&&(B.onChange=h.onAddMediaChange),H.activate(),B}}},uRA3:function(e,t,_){"use strict";_.d(t,"a",(function(){return l})),_.d(t,"b",(function(){return s}));var o,i,a,r=_("awNS"),n={};function l(e){ajax.post("noSpam.php",{act:"a_abort_pattern_mild",pid:e},{onDone:function(){ge("abort_pattern_mild"+e).innerHTML="<span style = 'color: green'>Ð¾ÑÑÐ°Ð½Ð¾Ð²Ð»ÐµÐ½</span>"},onFail:function(){ge("abort_pattern_mild"+e).innerHTML="<span style = 'color: red'>Ð¾ÑÐ¸Ð±ÐºÐ°</span>"}})}var s={patternTooltip:function(e,t){var _={content:n[t]?n[t].tooltip:"",className:"pattern_tt_wrap",nohideover:0,showsp:150,slide:15,hasover:0,shift:[5,0,0]};return showTooltip(e,_)},updateProcess:function(e){var t=vkNow();"patterns"===Object(r.a)()&&-1!=window._wf&&((t-i>5e3||e)&&(ajax.post("noSpam.php",{act:"a_in_process"},{onDone:function(e){var t=ge("in_process");if(t)return e>0?animateCount(t,e):t.innerHTML=e},onFail:function(e){ge("in_process").innerHTML=e||"ÐÐµÐ¸Ð·Ð²ÐµÑÑÐ½Ð°Ñ Ð¾ÑÐ¸Ð±ÐºÐ° (banProcess)"}}),i=t),(t-o>1e4||e)&&(ajax.post("noSpam.php",{act:"a_last_patterns"},{onDone:function(e){var t=geByClass1("in_process_wrap");if(t){show(t);var _=e.table;delete e.table,n=e,ge("patterns").innerHTML=_}},onFail:function(e){var t=geByClass1("in_process_wrap");if(t)return t.innerHTML=e||"ÐÐµÐ¸Ð·Ð²ÐµÑÑÐ½Ð°Ñ Ð¾ÑÐ¸Ð±ÐºÐ° (pProcess)"}}),o=t))},clearTimer:function(){clearInterval(a)},initUpdate:function(){this.updateProcess(!0),a||(a=setInterval(this.updateProcess,1e3),cur.destroy.push(this.clearTimer))}}},vBYu:function(e,t,_){"use strict";function o(){return{icon:'<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.1c4.02 0 6.9 3.28 6.9 7.53v1.6c0 .23.2.53.72 1.08l.27.27c1.08 1.1 1.51 1.73 1.51 2.75 0 .44-.05.79-.27 1.2-.45.88-1.42 1.37-2.87 1.37h-1.9c-.64 2.33-2.14 3.6-4.36 3.6-2.25 0-3.75-1.3-4.37-3.67l.02.07H5.74c-1.5 0-2.47-.5-2.9-1.41-.2-.4-.24-.72-.24-1.16 0-1.02.43-1.65 1.51-2.75l.27-.27c.53-.55.72-.85.72-1.08v-1.6C5.1 5.38 7.99 2.1 12 2.1zm2.47 15.8H9.53c.46 1.25 1.25 1.8 2.47 1.8s2.01-.55 2.47-1.8zM12 3.9c-2.96 0-5.1 2.43-5.1 5.73v1.6c0 .85-.39 1.46-1.23 2.33l-.28.29c-.75.75-.99 1.11-.99 1.48 0 .19.01.29.06.38.1.22.43.39 1.28.39h12.52c.82 0 1.16-.17 1.28-.4.05-.1.06-.2.06-.37 0-.37-.24-.73-.99-1.48l-.28-.29c-.84-.87-1.23-1.48-1.23-2.33v-1.6c0-3.3-2.13-5.73-5.1-5.73z" fill="currentColor"/></svg>',name:"notification_outline_24"}}_.d(t,"a",(function(){return o}))},vkK6:function(e,t,_){"use strict";_.d(t,"a",(function(){return i}));var o=_("ZD4m"),i=function(e){var t=Object(o.e)(e,"data-action-params");if("object"==typeof t||null===t)return{actionParams:t}}},wiul:function(e,t,_){"use strict";var o=_("q1tI"),i=_.n(o),a=_("4BeY"),r=_.n(a),n=_("nv/5"),l=_("mWs8"),s=_("IXTq"),c="article_outline_16",d=!1;function u(){d||(Object(l.a)(new r.a({id:c,viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="article_outline_16"><path d="M13.182 3.5c.452 0 .818.336.818.75 0 .38-.308.693-.707.743L13.182 5H2.818C2.366 5 2 4.664 2 4.25c0-.38.308-.693.707-.743l.111-.007zm0 4c.452 0 .818.336.818.75 0 .38-.308.693-.707.743L13.182 9H2.818C2.366 9 2 8.664 2 8.25c0-.38.308-.693.707-.743l.111-.007zm-3.727 4c.3 0 .545.336.545.75 0 .38-.205.694-.471.743L9.455 13h-6.91c-.3 0-.545-.336-.545-.75 0-.38.205-.694.471-.743l.074-.007z" fill="currentColor" /></symbol>'})),d=!0)}var p=function(e){return Object(l.b)((function(){u()}),[]),i.a.createElement(s.a,Object(n.assign)({},e,{viewBox:"0 0 16 16",id:c,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};p.mountIcon=u,t.a=p},"xc/8":function(e,t,_){"use strict";_.d(t,"a",(function(){return o})),_.d(t,"b",(function(){return i}));var o=function(e){return e},i=function(e){return e}},xqyG:function(e,t,_){"use strict";_.d(t,"b",(function(){return i})),_.d(t,"c",(function(){return a})),_.d(t,"a",(function(){return r}));var o=function(){return(o=Object.assign||function(e){for(var t,_=1,o=arguments.length;_<o;_++)for(var i in t=arguments[_])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=function(e){return function(t){var _,i,a=t.animationData,r=t.animationURL,n=t.container,l=t.loadAnimationParams,s=void 0===l?{}:l,c=a?{animationData:a}:{path:r},d={renderer:"svg",autoplay:null!==(_=null==s?void 0:s.autoplay)&&void 0!==_&&_,loop:null===(i=null==s?void 0:s.loop)||void 0===i||i,rendererSettings:{progressiveLoad:!0}},u=o(o(o({},c),d),{container:n});return e.loadAnimation(u)}},a=function(e,t){e.isLoaded?t():e.addEventListener("DOMLoaded",(function(){t()}))};var r=function(e){var t=e.animationItemGet,_=e.animationItemSet,o=e.loadAnimation;return function(e,i,a){var r=e,n=t({animationId:r}),l=o({animationData:n,animationURL:e,container:i,loadAnimationParams:null==a?void 0:a.loadAnimationParams});return n||function(e,t){e.addEventListener("data_ready",(function(){t(e.animationData)}))}(l,(function(e){_({animationId:r,loadedAnimationData:e})})),l}}},yLAM:function(e,t,_){"use strict";function o(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g id="gift_outline_20__Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="gift_outline_20__Icons-20/gift_outline_20"><g id="gift_outline_20__gift_outline_20"><path d="M0 0h20v20H0z"/><path d="M14.85 2.31c1.02 1.03 1.23 2.88-.26 4.19h.91a3 3 0 013 3v.5c0 .82-.1 1.15-.27 1.48a1.88 1.88 0 01-1.23.94v1.61c0 1.56-.16 2.13-.47 2.7-.3.57-.75 1.02-1.32 1.32l-.2.1c-.48.23-1.04.35-2.23.37h-5.3c-1.55 0-2.12-.16-2.69-.47a3.18 3.18 0 01-1.32-1.32l-.1-.2A5.12 5.12 0 013 14.3V12.4a1.88 1.88 0 01-1.23-.93c-.16-.3-.25-.6-.27-1.3V9.5a3 3 0 013-3h.91c-1.49-1.31-1.28-3.16-.26-4.19C6.37 1.1 8.74 1.04 10 3.57c1.26-2.53 3.63-2.47 4.85-1.26zM9.25 12.5H4.5v1.76l.01.4c.02.6.08.92.2 1.2l.08.16c.17.31.4.54.7.71l.17.08c.33.14.72.2 1.6.2h1.99V12.5zm6.25 0h-4.75v4.52h2l.4-.01c.6-.02.91-.08 1.19-.2l.16-.08c.31-.17.54-.4.71-.7.19-.36.27-.7.29-1.56V12.5zM9.16 8H4.5C3.67 8 3 8.67 3 9.5v.87c.02.23.04.31.09.4.03.06.08.1.14.14.11.06.22.08.63.09h5.39V8h-.09zm6.34 0h-4.76v3h5.4c.4 0 .52-.03.63-.09.06-.03.1-.08.14-.14.06-.12.09-.25.09-.78V9.5c0-.83-.67-1.5-1.5-1.5zM9.22 6.16c-.43-3.1-1.96-3.83-3-2.79C5.16 4.42 5.9 5.95 9 6.38l.26.04zm1.56 0l-.03.19.01.06.24-.03c3.1-.43 3.83-1.96 2.79-3-1.05-1.05-2.58-.32-3.01 2.78z" id="gift_outline_20__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></g></svg>',name:"gift_outline_20"}}_.d(t,"a",(function(){return o}))},zqir:function(e,t,_){"use strict";_.d(t,"a",(function(){return i}));var o=_("ToGb"),i=function(){Object(o.a)()}}});