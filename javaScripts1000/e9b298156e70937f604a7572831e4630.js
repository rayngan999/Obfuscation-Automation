!function($){"use strict";var jCarousel=$.jCarousel={};jCarousel.version="0.3.3";var rRelativeTarget=/^([+\-]=)?(.+)$/;jCarousel.parseTarget=function(target){var relative=!1,parts="object"!=typeof target?rRelativeTarget.exec(target):null;return parts?(target=parseInt(parts[2],10)||0,parts[1]&&(relative=!0,"-="===parts[1]&&(target*=-1))):"object"!=typeof target&&(target=parseInt(target,10)||0),{target:target,relative:relative}},jCarousel.detectCarousel=function(element){for(var carousel;0<element.length;){if(0<(carousel=element.filter("[data-jcarousel]")).length)return carousel;if(0<(carousel=element.find("[data-jcarousel]")).length)return carousel;element=element.parent()}return null},jCarousel.base=function(pluginName){return{version:jCarousel.version,_options:{},_element:null,_carousel:null,_init:$.noop,_create:$.noop,_destroy:$.noop,_reload:$.noop,create:function(){return this._element.attr("data-"+pluginName.toLowerCase(),!0).data(pluginName,this),!1===this._trigger("create")||(this._create(),this._trigger("createend")),this},destroy:function(){return!1===this._trigger("destroy")||(this._destroy(),this._trigger("destroyend"),this._element.removeData(pluginName).removeAttr("data-"+pluginName.toLowerCase())),this},reload:function(options){return!1===this._trigger("reload")||(options&&this.options(options),this._reload(),this._trigger("reloadend")),this},element:function(){return this._element},options:function(key,value){if(0===arguments.length)return $.extend({},this._options);if("string"==typeof key){if(void 0===value)return void 0===this._options[key]?null:this._options[key];this._options[key]=value}else this._options=$.extend({},this._options,key);return this},carousel:function(){return this._carousel||(this._carousel=jCarousel.detectCarousel(this.options("carousel")||this._element),this._carousel||$.error('Could not detect carousel for plugin "'+pluginName+'"')),this._carousel},_trigger:function(type,element,data){var event,defaultPrevented=!1;return data=[this].concat(data||[]),(element||this._element).each(function(){event=$.Event((pluginName+":"+type).toLowerCase()),$(this).trigger(event,data),event.isDefaultPrevented()&&(defaultPrevented=!0)}),!defaultPrevented}}},jCarousel.plugin=function(pluginName,pluginPrototype){var Plugin=$[pluginName]=function(element,options){this._element=$(element),this.options(options),this._init(),this.create()};return Plugin.fn=Plugin.prototype=$.extend({},jCarousel.base(pluginName),pluginPrototype),$.fn[pluginName]=function(options){var args=Array.prototype.slice.call(arguments,1),returnValue=this;return"string"==typeof options?this.each(function(){var instance=$(this).data(pluginName);if(!instance)return $.error("Cannot call methods on "+pluginName+' prior to initialization; attempted to call method "'+options+'"');if(!$.isFunction(instance[options])||"_"===options.charAt(0))return $.error('No such method "'+options+'" for '+pluginName+" instance");var methodValue=instance[options].apply(instance,args);return methodValue!==instance&&void 0!==methodValue?(returnValue=methodValue,!1):void 0}):this.each(function(){var instance=$(this).data(pluginName);instance instanceof Plugin?instance.reload(options):new Plugin(this,options)}),returnValue},Plugin}}(jQuery),function($,window){"use strict";function toFloat(val){return parseFloat(val)||0}$.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:$(),_first:$(),_last:$(),_visible:$(),_fullyvisible:$(),_init:function(){var self=this;return this.onWindowResize=function(){self.resizeTimer&&clearTimeout(self.resizeTimer),self.resizeTimer=setTimeout(function(){self.reload()},100)},this},_create:function(){this._reload(),$(window).on("resize.jcarousel",this.onWindowResize)},_destroy:function(){$(window).off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),null==this.vertical&&(this.vertical=this.list().height()>this.list().width()),this.rtl=this.options("rtl"),null==this.rtl&&(this.rtl=function(element){if("rtl"===(""+element.attr("dir")).toLowerCase())return!0;var found=!1;return element.parents("[dir]").each(function(){if(/rtl/i.test($(this).attr("dir")))return!(found=!0)}),found}(this._element)),this.lt=this.vertical?"top":"left",this.relative="relative"===this.list().css("position"),this._list=null,this._items=null;var item=0<=this.index(this._target)?this._target:this.closest();this.circular="circular"===this.options("wrap"),this.underflow=!1;var props={left:0,top:0};return 0<item.length&&(this._prepare(item),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,props[this.lt]=this._position(item)+"px"),this.move(props),this},list:function(){if(null===this._list){var option=this.options("list");this._list=$.isFunction(option)?option.call(this):this._element.find(option)}return this._list},items:function(){if(null===this._items){var option=this.options("items");this._items=($.isFunction(option)?option.call(this):this.list().find(option)).not("[data-jcarousel-clone]")}return this._items},index:function(item){return this.items().index(item)},closest:function(){var width,self=this,pos=this.list().position()[this.lt],closest=$(),stop=!1,lrb=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right";return this.rtl&&this.relative&&!this.vertical&&(pos+=this.list().width()-this.clipping()),this.items().each(function(){if(closest=$(this),stop)return!1;var dim=self.dimension(closest);if(0<=(pos+=dim)){if(width=dim-toFloat(closest.css("margin-"+lrb)),!(Math.abs(pos)-dim+width/2<=0))return!1;stop=!0}}),closest},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var wrap=this.options("wrap"),end=this.items().length-1,check=this.options("center")?this._target:this._last;return!!(0<=end&&!this.underflow&&(wrap&&"first"!==wrap||this.index(check)<end||this.tail&&!this.inTail))},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var wrap=this.options("wrap");return!!(0<this.items().length&&!this.underflow&&(wrap&&"last"!==wrap||0<this.index(this._first)||this.tail&&this.inTail))},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(element){return element["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(target,animate,callback){if(this.animating)return this;if(!1===this._trigger("scroll",null,[target,animate]))return this;$.isFunction(animate)&&(callback=animate,animate=!0);var parsed=$.jCarousel.parseTarget(target);if(parsed.relative){var current,first,index,start,curr,isVisible,props,i,end=this.items().length-1,scroll=Math.abs(parsed.target),wrap=this.options("wrap");if(0<parsed.target){var last=this.index(this._last);if(end<=last&&this.tail)this.inTail?"both"===wrap||"last"===wrap?this._scroll(0,animate,callback):$.isFunction(callback)&&callback.call(this,!1):this._scrollTail(animate,callback);else if(current=this.index(this._target),this.underflow&&current===end&&("circular"===wrap||"both"===wrap||"last"===wrap)||!this.underflow&&last===end&&("both"===wrap||"last"===wrap))this._scroll(0,animate,callback);else if(index=current+scroll,this.circular&&end<index){for(i=end,curr=this.items().get(-1);i++<index;)curr=this.items().eq(0),(isVisible=0<=this._visible.index(curr))&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(curr),isVisible||((props={})[this.lt]=this.dimension(curr),this.moveBy(props)),this._items=null;this._scroll(curr,animate,callback)}else this._scroll(Math.min(index,end),animate,callback)}else if(this.inTail)this._scroll(Math.max(this.index(this._first)-scroll+1,0),animate,callback);else if(first=this.index(this._first),current=this.index(this._target),index=(start=this.underflow?current:first)-scroll,start<=0&&(this.underflow&&"circular"===wrap||"both"===wrap||"first"===wrap))this._scroll(end,animate,callback);else if(this.circular&&index<0){for(i=index,curr=this.items().get(0);i++<0;){curr=this.items().eq(-1),(isVisible=0<=this._visible.index(curr))&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(curr),this._items=null;var dim=this.dimension(curr);(props={})[this.lt]=-dim,this.moveBy(props)}this._scroll(curr,animate,callback)}else this._scroll(Math.max(index,0),animate,callback)}else this._scroll(parsed.target,animate,callback);return this._trigger("scrollend"),this},moveBy:function(properties,opts){var position=this.list().position(),multiplier=1,correction=0;return this.rtl&&!this.vertical&&(multiplier=-1,this.relative&&(correction=this.list().width()-this.clipping())),properties.left&&(properties.left=position.left+correction+toFloat(properties.left)*multiplier+"px"),properties.top&&(properties.top=position.top+correction+toFloat(properties.top)*multiplier+"px"),this.move(properties,opts)},move:function(properties,opts){opts=opts||{};var option=this.options("transitions"),transitions=!!option,transforms=!!option.transforms,transforms3d=!!option.transforms3d,duration=opts.duration||0,list=this.list();if(!transitions&&0<duration)list.animate(properties,opts);else{var complete=opts.complete||$.noop,css={};if(transitions){var backup={transitionDuration:list.css("transitionDuration"),transitionTimingFunction:list.css("transitionTimingFunction"),transitionProperty:list.css("transitionProperty")},oldComplete=complete;complete=function(){$(this).css(backup),oldComplete.call(this)},css={transitionDuration:(0<duration?duration/1e3:0)+"s",transitionTimingFunction:option.easing||opts.easing,transitionProperty:0<duration?transforms||transforms3d?"all":properties.left?"left":"top":"none",transform:"none"}}transforms3d?css.transform="translate3d("+(properties.left||0)+","+(properties.top||0)+",0)":transforms?css.transform="translate("+(properties.left||0)+","+(properties.top||0)+")":$.extend(css,properties),transitions&&0<duration&&list.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",complete),list.css(css),duration<=0&&list.each(function(){complete.call(this)})}},_scroll:function(item,animate,callback){if(this.animating)return $.isFunction(callback)&&callback.call(this,!1),this;if("object"!=typeof item?item=this.items().eq(item):void 0===item.jquery&&(item=$(item)),0===item.length)return $.isFunction(callback)&&callback.call(this,!1),this;this.inTail=!1,this._prepare(item);var pos=this._position(item);if(pos===this.list().position()[this.lt])return $.isFunction(callback)&&callback.call(this,!1),this;var properties={};return properties[this.lt]=pos+"px",this._animate(properties,animate,callback),this},_scrollTail:function(animate,callback){if(this.animating||!this.tail)return $.isFunction(callback)&&callback.call(this,!1),this;var pos=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(pos+=this.list().width()-this.clipping()),this.rtl&&!this.vertical?pos+=this.tail:pos-=this.tail,this.inTail=!0;var properties={};return properties[this.lt]=pos+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(properties,animate,callback),this},_animate:function(properties,animate,callback){if(callback=callback||$.noop,!1===this._trigger("animate"))return callback.call(this,!1),this;this.animating=!0;var animation=this.options("animation"),complete=$.proxy(function(){this.animating=!1;var c=this.list().find("[data-jcarousel-clone]");0<c.length&&(c.remove(),this._reload()),this._trigger("animateend"),callback.call(this,!0)},this),opts="object"==typeof animation?$.extend({},animation):{duration:animation},oldComplete=opts.complete||$.noop;return!1===animate?opts.duration=0:void 0!==$.fx.speeds[opts.duration]&&(opts.duration=$.fx.speeds[opts.duration]),opts.complete=function(){complete(),oldComplete.call(this)},this.move(properties,opts),this},_prepare:function(item){var curr,isVisible,dim,index=this.index(item),idx=index,wh=this.dimension(item),clip=this.clipping(),lrb=this.vertical?"bottom":this.rtl?"left":"right",center=this.options("center"),update={target:item,first:item,last:item,visible:item,fullyvisible:wh<=clip?item:$()};if(center&&(wh/=2,clip/=2),wh<clip)for(;;){if(0===(curr=this.items().eq(++idx)).length){if(!this.circular)break;if(curr=this.items().eq(0),item.get(0)===curr.get(0))break;if((isVisible=0<=this._visible.index(curr))&&curr.after(curr.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(curr),!isVisible){var props={};props[this.lt]=this.dimension(curr),this.moveBy(props)}this._items=null}if(0===(dim=this.dimension(curr)))break;if(wh+=dim,update.last=curr,update.visible=update.visible.add(curr),wh-toFloat(curr.css("margin-"+lrb))<=clip&&(update.fullyvisible=update.fullyvisible.add(curr)),clip<=wh)break}if(!this.circular&&!center&&wh<clip)for(idx=index;!(--idx<0||0===(curr=this.items().eq(idx)).length||0===(dim=this.dimension(curr))||(wh+=dim,update.first=curr,update.visible=update.visible.add(curr),wh-toFloat(curr.css("margin-"+lrb))<=clip&&(update.fullyvisible=update.fullyvisible.add(curr)),clip<=wh)););return this._update(update),this.tail=0,center||"circular"===this.options("wrap")||"custom"===this.options("wrap")||this.index(update.last)!==this.items().length-1||clip<(wh-=toFloat(update.last.css("margin-"+lrb)))&&(this.tail=wh-clip),this},_position:function(item){var first=this._first,pos=first.position()[this.lt],center=this.options("center"),centerOffset=center?this.clipping()/2-this.dimension(first)/2:0;return this.rtl&&!this.vertical?(this.relative?pos-=this.list().width()-this.dimension(first):pos-=this.clipping()-this.dimension(first),pos+=centerOffset):pos-=centerOffset,!center&&(this.index(item)>this.index(first)||this.inTail)&&this.tail?(pos=this.rtl&&!this.vertical?pos-this.tail:pos+this.tail,this.inTail=!0):this.inTail=!1,-pos},_update:function(update){function doUpdate(key){var elIn=[],elOut=[];update[key].each(function(){current[key].index(this)<0&&elIn.push(this)}),current[key].each(function(){update[key].index(this)<0&&elOut.push(this)}),back?elIn=elIn.reverse():elOut=elOut.reverse(),self._trigger(key+"in",$(elIn)),self._trigger(key+"out",$(elOut)),self["_"+key]=update[key]}var key,self=this,current={target:this._target,first:this._first,last:this._last,visible:this._visible,fullyvisible:this._fullyvisible},back=this.index(update.first||current.first)<this.index(current.first);for(key in update)doUpdate(key);return this}})}(jQuery,window),function($){"use strict";$.jcarousel.fn.scrollIntoView=function(target,animate,callback){var index,parsed=$.jCarousel.parseTarget(target),first=this.index(this._fullyvisible.first()),last=this.index(this._fullyvisible.last());if((index=parsed.relative?parsed.target<0?Math.max(0,first+parsed.target):last+parsed.target:"object"!=typeof parsed.target?parsed.target:this.index(parsed.target))<first)return this.scroll(index,animate,callback);if(first<=index&&index<=last)return $.isFunction(callback)&&callback.call(this,!1),this;for(var curr,items=this.items(),clip=this.clipping(),lrb=this.vertical?"bottom":this.rtl?"left":"right",wh=0;0!==(curr=items.eq(index)).length;){if(clip<=(wh+=this.dimension(curr))){wh-(parseFloat(curr.css("margin-"+lrb))||0)!==clip&&index++;break}if(index<=0)break;index--}return this.scroll(index,animate,callback)}}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onReload=$.proxy(this._reload,this),this.onEvent=$.proxy(function(e){e.preventDefault();var method=this.options("method");$.isFunction(method)?method.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var active,parsed=$.jCarousel.parseTarget(this.options("target")),carousel=this.carousel();if(parsed.relative)active=carousel.jcarousel(0<parsed.target?"hasNext":"hasPrev");else{var target="object"!=typeof parsed.target?carousel.jcarousel("items").eq(parsed.target):parsed.target;active=0<=carousel.jcarousel("target").index(target)}return this._active!==active&&(this._trigger(active?"active":"inactive"),this._active=active),this}})}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(page){return'<a href="#'+page+'">'+page+"</a>"},event:"click",method:"scroll"},_carouselItems:null,_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onReload=$.proxy(this._reload,this),this.onScroll=$.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll),this._reload()},_destroy:function(){this._clear(),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll),this._carouselItems=null},_reload:function(){var perPage=this.options("perPage");if(this._pages={},this._items={},$.isFunction(perPage)&&(perPage=perPage.call(this)),null==perPage)this._pages=this._calculatePages();else for(var curr,pp=parseInt(perPage,10)||0,items=this._getCarouselItems(),page=1,i=0;0!==(curr=items.eq(i++)).length;)this._pages[page]?this._pages[page]=this._pages[page].add(curr):this._pages[page]=curr,i%pp==0&&page++;this._clear();var self=this,carousel=this.carousel().data("jcarousel"),element=this._element,item=this.options("item"),numCarouselItems=this._getCarouselItems().length;$.each(this._pages,function(page,carouselItems){var currItem=self._items[page]=$(item.call(self,page,carouselItems));currItem.on(self.options("event")+".jcarouselpagination",$.proxy(function(){var target=carouselItems.eq(0);if(carousel.circular){var currentIndex=carousel.index(carousel.target()),newIndex=carousel.index(target);parseFloat(page)>parseFloat(self._currentPage)?newIndex<currentIndex&&(target="+="+(numCarouselItems-currentIndex+newIndex)):currentIndex<newIndex&&(target="-="+(currentIndex+(numCarouselItems-newIndex)))}carousel[this.options("method")](target)},self)),element.append(currItem)}),this._update()},_update:function(){var currentPage,target=this.carousel().jcarousel("target");$.each(this._pages,function(page,carouselItems){if(carouselItems.each(function(){if(target.is(this))return currentPage=page,!1}),currentPage)return!1}),this._currentPage!==currentPage&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[currentPage])),this._currentPage=currentPage},items:function(){return this._items},reloadCarouselItems:function(){return this._carouselItems=null,this},_clear:function(){this._element.empty(),this._currentPage=null},_calculatePages:function(){for(var curr,dim,carousel=this.carousel().data("jcarousel"),items=this._getCarouselItems(),clip=carousel.clipping(),wh=0,idx=0,page=1,pages={};0!==(curr=items.eq(idx++)).length;)clip<wh+(dim=carousel.dimension(curr))&&(page++,wh=0),wh+=dim,pages[page]?pages[page]=pages[page].add(curr):pages[page]=curr;return pages},_getCarouselItems:function(){return this._carouselItems||(this._carouselItems=this.carousel().jcarousel("items")),this._carouselItems}})}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0},_timer:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onAnimateEnd=$.proxy(this.start,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy),this.options("autostart")&&this.start()},_destroy:function(){this.stop(),this.carousel().off("jcarousel:destroy",this.onDestroy)},start:function(){return this.stop(),this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout($.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this},stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().off("jcarousel:animateend",this.onAnimateEnd),this}})}(jQuery),function($){"use strict";$.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=$.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",$.proxy(this._create,this))},this),this.onReload=$.proxy(this._reload,this),this.onEvent=$.proxy(function(e){e.preventDefault();var method=this.options("method");$.isFunction(method)?method.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var active,parsed=$.jCarousel.parseTarget(this.options("target")),carousel=this.carousel();if(parsed.relative)active=carousel.jcarousel(0<parsed.target?"hasNext":"hasPrev");else{var target="object"!=typeof parsed.target?carousel.jcarousel("items").eq(parsed.target):parsed.target;active=0<=carousel.jcarousel("target").index(target)}return this._active!==active&&(this._trigger(active?"active":"inactive"),this._active=active),this}})}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"undefined"!=typeof module&&module.exports?module.exports=factory:factory(jQuery,window,document)}(function($){var pluginNS,defaults,totalInstances,liveTimers,oldIE,touchActive,touchable,classes,methods,_selector,_theme,removeLiveTimers,_findAxis,_findScrollButtonsType,_pluginMarkup,_contentWidth,_expandContentHorizontally,_scrollButtons,_setDraggerLength,_scrollRatio,_onDragClasses,_overflowed,_resetContentPosition,_bindEvents,_unbindEvents,_scrollbarVisibility,_coordinates,_draggable,_contentDraggable,_selectable,_mousewheel,_canAccessIFrameCache,_canAccessIFrame,_iframe,_disableMousewheel,_draggerRail,_focus,_wrapperScroll,_buttons,_keyboard,_sequentialScroll,_arr,_to,_autoUpdate,_stop,_scrollTo,_tweenTo,_getTime,_stopTween,_delete,_mouseBtnLeft,_pointerTouch,_isNumeric,_childPos,_isTabHidden,_rjs,_njs,_dlp;_rjs="function"==typeof define&&define.amd,_njs="undefined"!=typeof module&&module.exports,_dlp="https:"==document.location.protocol?"https:":"http:",_rjs||(_njs?require("jquery-mousewheel")($):$.event.special.mousewheel||$("head").append(decodeURI("%3Cscript src="+_dlp+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E"))),pluginNS="mCustomScrollbar",defaults={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},totalInstances=0,liveTimers={},oldIE=window.attachEvent&&!window.addEventListener?1:0,touchActive=!1,classes=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],methods={init:function(options){options=$.extend(!0,{},defaults,options);var selector=_selector.call(this);if(options.live){var liveSelector=options.liveSelector||this.selector||".mCustomScrollbar",$liveSelector=$(liveSelector);if("off"===options.live)return void removeLiveTimers(liveSelector);liveTimers[liveSelector]=setTimeout(function(){$liveSelector.mCustomScrollbar(options),"once"===options.live&&$liveSelector.length&&removeLiveTimers(liveSelector)},500)}else removeLiveTimers(liveSelector);return options.setWidth=options.set_width?options.set_width:options.setWidth,options.setHeight=options.set_height?options.set_height:options.setHeight,options.axis=options.horizontalScroll?"x":_findAxis(options.axis),options.scrollInertia=0<options.scrollInertia&&options.scrollInertia<17?17:options.scrollInertia,"object"!=typeof options.mouseWheel&&1==options.mouseWheel&&(options.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),options.mouseWheel.scrollAmount=options.mouseWheelPixels?options.mouseWheelPixels:options.mouseWheel.scrollAmount,options.mouseWheel.normalizeDelta=options.advanced.normalizeMouseWheelDelta?options.advanced.normalizeMouseWheelDelta:options.mouseWheel.normalizeDelta,options.scrollButtons.scrollType=_findScrollButtonsType(options.scrollButtons.scrollType),_theme(options),$(selector).each(function(){var $this=$(this);if(!$this.data("mCS")){$this.data("mCS",{idx:++totalInstances,opt:options,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:$this.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var d=$this.data("mCS"),o=d.opt,htmlDataAxis=$this.data("mcs-axis"),htmlDataSbPos=$this.data("mcs-scrollbar-position"),htmlDataTheme=$this.data("mcs-theme");htmlDataAxis&&(o.axis=htmlDataAxis),htmlDataSbPos&&(o.scrollbarPosition=htmlDataSbPos),htmlDataTheme&&(o.theme=htmlDataTheme,_theme(o)),_pluginMarkup.call(this),d&&o.callbacks.onCreate&&"function"==typeof o.callbacks.onCreate&&o.callbacks.onCreate.call(this),$("#mCSB_"+d.idx+"_container img:not(."+classes[2]+")").addClass(classes[2]),methods.update.call(null,$this)}})},update:function(el,cb){var selector=el||_selector.call(this);return $(selector).each(function(){var $this=$(this);if($this.data("mCS")){var d=$this.data("mCS"),o=d.opt,mCSB_container=$("#mCSB_"+d.idx+"_container"),mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")];if(!mCSB_container.length)return;d.tweenRunning&&_stop($this),cb&&d&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),$this.hasClass(classes[3])&&$this.removeClass(classes[3]),$this.hasClass(classes[4])&&$this.removeClass(classes[4]),mCustomScrollBox.css("max-height","none"),mCustomScrollBox.height()!==$this.height()&&mCustomScrollBox.css("max-height",$this.height()),_expandContentHorizontally.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||mCSB_container.css("width",_contentWidth(mCSB_container)),d.overflowed=_overflowed.call(this),_scrollbarVisibility.call(this),o.autoDraggerLength&&_setDraggerLength.call(this),_scrollRatio.call(this),_bindEvents.call(this);var to=[Math.abs(mCSB_container[0].offsetTop),Math.abs(mCSB_container[0].offsetLeft)];"x"!==o.axis&&(d.overflowed[0]?mCSB_dragger[0].height()>mCSB_dragger[0].parent().height()?_resetContentPosition.call(this):(_scrollTo($this,to[0].toString(),{dir:"y",dur:0,overwrite:"none"}),d.contentReset.y=null):(_resetContentPosition.call(this),"y"===o.axis?_unbindEvents.call(this):"yx"===o.axis&&d.overflowed[1]&&_scrollTo($this,to[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(d.overflowed[1]?mCSB_dragger[1].width()>mCSB_dragger[1].parent().width()?_resetContentPosition.call(this):(_scrollTo($this,to[1].toString(),{dir:"x",dur:0,overwrite:"none"}),d.contentReset.x=null):(_resetContentPosition.call(this),"x"===o.axis?_unbindEvents.call(this):"yx"===o.axis&&d.overflowed[0]&&_scrollTo($this,to[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),cb&&d&&(2===cb&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===cb&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),_autoUpdate.call(this)}})},scrollTo:function(val,options){if(void 0!==val&&null!=val){var selector=_selector.call(this);return $(selector).each(function(){var $this=$(this);if($this.data("mCS")){var d=$this.data("mCS"),o=d.opt,methodDefaults={trigger:"external",scrollInertia:o.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},methodOptions=$.extend(!0,{},methodDefaults,options),to=_arr.call(this,val),dur=0<methodOptions.scrollInertia&&methodOptions.scrollInertia<17?17:methodOptions.scrollInertia;to[0]=_to.call(this,to[0],"y"),to[1]=_to.call(this,to[1],"x"),methodOptions.moveDragger&&(to[0]*=d.scrollRatio.y,to[1]*=d.scrollRatio.x),methodOptions.dur=_isTabHidden()?0:dur,setTimeout(function(){null!==to[0]&&void 0!==to[0]&&"x"!==o.axis&&d.overflowed[0]&&(methodOptions.dir="y",methodOptions.overwrite="all",_scrollTo($this,to[0].toString(),methodOptions)),null!==to[1]&&void 0!==to[1]&&"y"!==o.axis&&d.overflowed[1]&&(methodOptions.dir="x",methodOptions.overwrite="none",_scrollTo($this,to[1].toString(),methodOptions))},methodOptions.timeout)}})}},stop:function(){var selector=_selector.call(this);return $(selector).each(function(){var $this=$(this);$this.data("mCS")&&_stop($this)})},disable:function(r){var selector=_selector.call(this);return $(selector).each(function(){var $this=$(this);if($this.data("mCS")){$this.data("mCS");_autoUpdate.call(this,"remove"),_unbindEvents.call(this),r&&_resetContentPosition.call(this),_scrollbarVisibility.call(this,!0),$this.addClass(classes[3])}})},destroy:function(){var selector=_selector.call(this);return $(selector).each(function(){var $this=$(this);if($this.data("mCS")){var d=$this.data("mCS"),o=d.opt,mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container"),scrollbar=$(".mCSB_"+d.idx+"_scrollbar");o.live&&removeLiveTimers(o.liveSelector||$(selector).selector),_autoUpdate.call(this,"remove"),_unbindEvents.call(this),_resetContentPosition.call(this),$this.removeData("mCS"),_delete(this,"mcs"),scrollbar.remove(),mCSB_container.find("img."+classes[2]).removeClass(classes[2]),mCustomScrollBox.replaceWith(mCSB_container.contents()),$this.removeClass(pluginNS+" _mCS_"+d.idx+" "+classes[6]+" "+classes[7]+" "+classes[5]+" "+classes[3]).addClass(classes[4])}})}},_selector=function(){return"object"!=typeof $(this)||$(this).length<1?".mCustomScrollbar":this},_theme=function(obj){obj.autoDraggerLength=!(-1<$.inArray(obj.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"]))&&obj.autoDraggerLength,obj.autoExpandScrollbar=!(-1<$.inArray(obj.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"]))&&obj.autoExpandScrollbar,obj.scrollButtons.enable=!(-1<$.inArray(obj.theme,["minimal","minimal-dark"]))&&obj.scrollButtons.enable,obj.autoHideScrollbar=-1<$.inArray(obj.theme,["minimal","minimal-dark"])||obj.autoHideScrollbar,obj.scrollbarPosition=-1<$.inArray(obj.theme,["minimal","minimal-dark"])?"outside":obj.scrollbarPosition},removeLiveTimers=function(selector){liveTimers[selector]&&(clearTimeout(liveTimers[selector]),_delete(liveTimers,selector))},_findAxis=function(val){return"yx"===val||"xy"===val||"auto"===val?"yx":"x"===val||"horizontal"===val?"x":"y"},_findScrollButtonsType=function(val){return"stepped"===val||"pixels"===val||"step"===val||"click"===val?"stepped":"stepless"},_pluginMarkup=function(){var $this=$(this),d=$this.data("mCS"),o=d.opt,expandClass=o.autoExpandScrollbar?" "+classes[1]+"_expand":"",scrollbar=["<div id='mCSB_"+d.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+d.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+expandClass+"'><div class='"+classes[12]+"'><div id='mCSB_"+d.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+d.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+d.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+expandClass+"'><div class='"+classes[12]+"'><div id='mCSB_"+d.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],wrapperClass="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",scrollbars="yx"===o.axis?scrollbar[0]+scrollbar[1]:"x"===o.axis?scrollbar[1]:scrollbar[0],contentWrapper="yx"===o.axis?"<div id='mCSB_"+d.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",autoHideClass=o.autoHideScrollbar?" "+classes[6]:"",scrollbarDirClass="x"!==o.axis&&"rtl"===d.langDir?" "+classes[7]:"";o.setWidth&&$this.css("width",o.setWidth),o.setHeight&&$this.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===d.langDir?"989999px":o.setLeft,$this.addClass(pluginNS+" _mCS_"+d.idx+autoHideClass+scrollbarDirClass).wrapInner("<div id='mCSB_"+d.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+wrapperClass+"'><div id='mCSB_"+d.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir='"+d.langDir+"' /></div>");var mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||mCSB_container.css("width",_contentWidth(mCSB_container)),"outside"===o.scrollbarPosition?("static"===$this.css("position")&&$this.css("position","relative"),$this.css("overflow","visible"),mCustomScrollBox.addClass("mCSB_outside").after(scrollbars)):(mCustomScrollBox.addClass("mCSB_inside").append(scrollbars),mCSB_container.wrap(contentWrapper)),_scrollButtons.call(this);var mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")];mCSB_dragger[0].css("min-height",mCSB_dragger[0].height()),mCSB_dragger[1].css("min-width",mCSB_dragger[1].width())},_contentWidth=function(el){var val=[el[0].scrollWidth,Math.max.apply(Math,el.children().map(function(){return $(this).outerWidth(!0)}).get())],w=el.parent().width();return w<val[0]?val[0]:w<val[1]?val[1]:"100%"},_expandContentHorizontally=function(){var d=$(this).data("mCS"),o=d.opt,mCSB_container=$("#mCSB_"+d.idx+"_container");if(o.advanced.autoExpandHorizontalScroll&&"y"!==o.axis){mCSB_container.css({width:"auto","min-width":0,"overflow-x":"scroll"});var w=Math.ceil(mCSB_container[0].scrollWidth);3===o.advanced.autoExpandHorizontalScroll||2!==o.advanced.autoExpandHorizontalScroll&&w>mCSB_container.parent().width()?mCSB_container.css({width:w,"min-width":"100%","overflow-x":"inherit"}):mCSB_container.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(mCSB_container[0].getBoundingClientRect().right+.4)-Math.floor(mCSB_container[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},_scrollButtons=function(){var d=$(this).data("mCS"),o=d.opt,mCSB_scrollTools=$(".mCSB_"+d.idx+"_scrollbar:first"),tabindex=_isNumeric(o.scrollButtons.tabindex)?"tabindex='"+o.scrollButtons.tabindex+"'":"",btnHTML=["<a href='#' class='"+classes[13]+"' "+tabindex+" />","<a href='#' class='"+classes[14]+"' "+tabindex+" />","<a href='#' class='"+classes[15]+"' "+tabindex+" />","<a href='#' class='"+classes[16]+"' "+tabindex+" />"],btn=["x"===o.axis?btnHTML[2]:btnHTML[0],"x"===o.axis?btnHTML[3]:btnHTML[1],btnHTML[2],btnHTML[3]];o.scrollButtons.enable&&mCSB_scrollTools.prepend(btn[0]).append(btn[1]).next(".mCSB_scrollTools").prepend(btn[2]).append(btn[3])},_setDraggerLength=function(){var d=$(this).data("mCS"),mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container"),mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")],ratio=[mCustomScrollBox.height()/mCSB_container.outerHeight(!1),mCustomScrollBox.width()/mCSB_container.outerWidth(!1)],l=[parseInt(mCSB_dragger[0].css("min-height")),Math.round(ratio[0]*mCSB_dragger[0].parent().height()),parseInt(mCSB_dragger[1].css("min-width")),Math.round(ratio[1]*mCSB_dragger[1].parent().width())],h=oldIE&&l[1]<l[0]?l[0]:l[1],w=oldIE&&l[3]<l[2]?l[2]:l[3];mCSB_dragger[0].css({height:h,"max-height":mCSB_dragger[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":l[0]+"px"}),mCSB_dragger[1].css({width:w,"max-width":mCSB_dragger[1].parent().width()-10})},_scrollRatio=function(){var d=$(this).data("mCS"),mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container"),mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")],scrollAmount=[mCSB_container.outerHeight(!1)-mCustomScrollBox.height(),mCSB_container.outerWidth(!1)-mCustomScrollBox.width()],ratio=[scrollAmount[0]/(mCSB_dragger[0].parent().height()-mCSB_dragger[0].height()),scrollAmount[1]/(mCSB_dragger[1].parent().width()-mCSB_dragger[1].width())];d.scrollRatio={y:ratio[0],x:ratio[1]}},_onDragClasses=function(el,action,xpnd){var expandClass=xpnd?classes[0]+"_expanded":"",scrollbar=el.closest(".mCSB_scrollTools");"active"===action?(el.toggleClass(classes[0]+" "+expandClass),scrollbar.toggleClass(classes[1]),el[0]._draggable=el[0]._draggable?0:1):el[0]._draggable||("hide"===action?(el.removeClass(classes[0]),scrollbar.removeClass(classes[1])):(el.addClass(classes[0]),scrollbar.addClass(classes[1])))},_overflowed=function(){var d=$(this).data("mCS"),mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container"),contentHeight=null==d.overflowed?mCSB_container.height():mCSB_container.outerHeight(!1),contentWidth=null==d.overflowed?mCSB_container.width():mCSB_container.outerWidth(!1),h=mCSB_container[0].scrollHeight,w=mCSB_container[0].scrollWidth;return contentHeight<h&&(contentHeight=h),contentWidth<w&&(contentWidth=w),[contentHeight>mCustomScrollBox.height(),contentWidth>mCustomScrollBox.width()]},_resetContentPosition=function(){var $this=$(this),d=$this.data("mCS"),o=d.opt,mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container"),mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")];if(_stop($this),("x"!==o.axis&&!d.overflowed[0]||"y"===o.axis&&d.overflowed[0])&&(mCSB_dragger[0].add(mCSB_container).css("top",0),_scrollTo($this,"_resetY")),"y"!==o.axis&&!d.overflowed[1]||"x"===o.axis&&d.overflowed[1]){var cx=dx=0;"rtl"===d.langDir&&(cx=mCustomScrollBox.width()-mCSB_container.outerWidth(!1),dx=Math.abs(cx/d.scrollRatio.x)),mCSB_container.css("left",cx),mCSB_dragger[1].css("left",dx),_scrollTo($this,"_resetX")}},_bindEvents=function(){var $this=$(this),d=$this.data("mCS"),o=d.opt;if(!d.bindEvents){var mousewheelTimeout;if(_draggable.call(this),o.contentTouchScroll&&_contentDraggable.call(this),_selectable.call(this),o.mouseWheel.enable)!function _mwt(){mousewheelTimeout=setTimeout(function(){$.event.special.mousewheel?(clearTimeout(mousewheelTimeout),_mousewheel.call($this[0])):_mwt()},100)}();_draggerRail.call(this),_wrapperScroll.call(this),o.advanced.autoScrollOnFocus&&_focus.call(this),o.scrollButtons.enable&&_buttons.call(this),o.keyboard.enable&&_keyboard.call(this),d.bindEvents=!0}},_unbindEvents=function(){var $this=$(this),d=$this.data("mCS"),o=d.opt,namespace="mCS_"+d.idx,sb=".mCSB_"+d.idx+"_scrollbar",sel=$("#mCSB_"+d.idx+",#mCSB_"+d.idx+"_container,#mCSB_"+d.idx+"_container_wrapper,"+sb+" ."+classes[12]+",#mCSB_"+d.idx+"_dragger_vertical,#mCSB_"+d.idx+"_dragger_horizontal,"+sb+">a"),mCSB_container=$("#mCSB_"+d.idx+"_container");o.advanced.releaseDraggableSelectors&&sel.add($(o.advanced.releaseDraggableSelectors)),o.advanced.extraDraggableSelectors&&sel.add($(o.advanced.extraDraggableSelectors)),d.bindEvents&&($(document).add($(!_canAccessIFrame()||top.document)).unbind("."+namespace),sel.each(function(){$(this).unbind("."+namespace)}),clearTimeout($this[0]._focusTimeout),_delete($this[0],"_focusTimeout"),clearTimeout(d.sequential.step),_delete(d.sequential,"step"),clearTimeout(mCSB_container[0].onCompleteTimeout),_delete(mCSB_container[0],"onCompleteTimeout"),d.bindEvents=!1)},_scrollbarVisibility=function(disabled){var $this=$(this),d=$this.data("mCS"),o=d.opt,contentWrapper=$("#mCSB_"+d.idx+"_container_wrapper"),content=contentWrapper.length?contentWrapper:$("#mCSB_"+d.idx+"_container"),scrollbar=[$("#mCSB_"+d.idx+"_scrollbar_vertical"),$("#mCSB_"+d.idx+"_scrollbar_horizontal")],mCSB_dragger=[scrollbar[0].find(".mCSB_dragger"),scrollbar[1].find(".mCSB_dragger")];"x"!==o.axis&&(d.overflowed[0]&&!disabled?(scrollbar[0].add(mCSB_dragger[0]).add(scrollbar[0].children("a")).css("display","block"),content.removeClass(classes[8]+" "+classes[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&mCSB_dragger[0].css("display","none"),content.removeClass(classes[10])):(scrollbar[0].css("display","none"),content.addClass(classes[10])),content.addClass(classes[8]))),"y"!==o.axis&&(d.overflowed[1]&&!disabled?(scrollbar[1].add(mCSB_dragger[1]).add(scrollbar[1].children("a")).css("display","block"),content.removeClass(classes[9]+" "+classes[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&mCSB_dragger[1].css("display","none"),content.removeClass(classes[11])):(scrollbar[1].css("display","none"),content.addClass(classes[11])),content.addClass(classes[9]))),d.overflowed[0]||d.overflowed[1]?$this.removeClass(classes[5]):$this.addClass(classes[5])},_coordinates=function(e){var t=e.type,o=e.target.ownerDocument!==document&&null!==frameElement?[$(frameElement).offset().top,$(frameElement).offset().left]:null,io=_canAccessIFrame()&&e.target.ownerDocument!==top.document&&null!==frameElement?[$(e.view.frameElement).offset().top,$(e.view.frameElement).offset().left]:[0,0];switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return o?[e.originalEvent.pageY-o[0]+io[0],e.originalEvent.pageX-o[1]+io[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],touches=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[touch.screenY,touch.screenX,1<touches]:[touch.pageY,touch.pageX,1<touches];default:return o?[e.pageY-o[0]+io[0],e.pageX-o[1]+io[1],!1]:[e.pageY,e.pageX,!1]}},_draggable=function(){function _drag(dragY,dragX,y,x){if(mCSB_container[0].idleTimer=o.scrollInertia<233?250:0,draggable.attr("id")===draggerId[1])var dir="x",to=(draggable[0].offsetLeft-dragX+x)*d.scrollRatio.x;else dir="y",to=(draggable[0].offsetTop-dragY+y)*d.scrollRatio.y;_scrollTo($this,to.toString(),{dir:dir,drag:!0})}var draggable,dragY,dragX,$this=$(this),d=$this.data("mCS"),o=d.opt,namespace="mCS_"+d.idx,draggerId=["mCSB_"+d.idx+"_dragger_vertical","mCSB_"+d.idx+"_dragger_horizontal"],mCSB_container=$("#mCSB_"+d.idx+"_container"),mCSB_dragger=$("#"+draggerId[0]+",#"+draggerId[1]),rds=o.advanced.releaseDraggableSelectors?mCSB_dragger.add($(o.advanced.releaseDraggableSelectors)):mCSB_dragger,eds=o.advanced.extraDraggableSelectors?$(!_canAccessIFrame()||top.document).add($(o.advanced.extraDraggableSelectors)):$(!_canAccessIFrame()||top.document);mCSB_dragger.bind("contextmenu."+namespace,function(e){e.preventDefault()}).bind("mousedown."+namespace+" touchstart."+namespace+" pointerdown."+namespace+" MSPointerDown."+namespace,function(e){if(e.stopImmediatePropagation(),e.preventDefault(),_mouseBtnLeft(e)){touchActive=!0,oldIE&&(document.onselectstart=function(){return!1}),_iframe.call(mCSB_container,!1),_stop($this);var offset=(draggable=$(this)).offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left,h=draggable.height()+offset.top,w=draggable.width()+offset.left;y<h&&0<y&&x<w&&0<x&&(dragY=y,dragX=x),_onDragClasses(draggable,"active",o.autoExpandScrollbar)}}).bind("touchmove."+namespace,function(e){e.stopImmediatePropagation(),e.preventDefault();var offset=draggable.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left;_drag(dragY,dragX,y,x)}),$(document).add(eds).bind("mousemove."+namespace+" pointermove."+namespace+" MSPointerMove."+namespace,function(e){if(draggable){var offset=draggable.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left;if(dragY===y&&dragX===x)return;_drag(dragY,dragX,y,x)}}).add(rds).bind("mouseup."+namespace+" touchend."+namespace+" pointerup."+namespace+" MSPointerUp."+namespace,function(e){draggable&&(_onDragClasses(draggable,"active",o.autoExpandScrollbar),draggable=null),touchActive=!1,oldIE&&(document.onselectstart=null),_iframe.call(mCSB_container,!0)})},_contentDraggable=function(){function _onTouchstart(e){if(!_pointerTouch(e)||touchActive||_coordinates(e)[2])touchable=0;else{docDrag=touchDrag=0,draggable=touchable=1,$this.removeClass("mCS_touch_action");var offset=mCSB_container.offset();dragY=_coordinates(e)[0]-offset.top,dragX=_coordinates(e)[1]-offset.left,touchIntent=[_coordinates(e)[0],_coordinates(e)[1]]}}function _onTouchmove(e){if(_pointerTouch(e)&&!touchActive&&!_coordinates(e)[2]&&(o.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!docDrag||touchDrag)&&draggable)){runningTime=_getTime();var offset=mCustomScrollBox.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left;if(touchMoveY.push(y),touchMoveX.push(x),touchIntent[2]=Math.abs(_coordinates(e)[0]-touchIntent[0]),touchIntent[3]=Math.abs(_coordinates(e)[1]-touchIntent[1]),d.overflowed[0])var limit=mCSB_dragger[0].parent().height()-mCSB_dragger[0].height(),prevent=0<dragY-y&&y-dragY>-(limit*d.scrollRatio.y)&&(2*touchIntent[3]<touchIntent[2]||"yx"===o.axis);if(d.overflowed[1])var limitX=mCSB_dragger[1].parent().width()-mCSB_dragger[1].width(),preventX=0<dragX-x&&x-dragX>-(limitX*d.scrollRatio.x)&&(2*touchIntent[2]<touchIntent[3]||"yx"===o.axis);prevent||preventX?(touchAction||e.preventDefault(),touchDrag=1):(docDrag=1,$this.addClass("mCS_touch_action")),touchAction&&e.preventDefault(),amount="yx"===o.axis?[dragY-y,dragX-x]:"x"===o.axis?[null,dragX-x]:[dragY-y,null],mCSB_container[0].idleTimer=250,d.overflowed[0]&&_drag(amount[0],durA,"mcsLinearOut","y","all",!0),d.overflowed[1]&&_drag(amount[1],durA,"mcsLinearOut","x",overwrite,!0)}}function _onTouchstart2(e){if(!_pointerTouch(e)||touchActive||_coordinates(e)[2])touchable=0;else{touchable=1,e.stopImmediatePropagation(),_stop($this),startTime=_getTime();var offset=mCustomScrollBox.offset();touchStartY=_coordinates(e)[0]-offset.top,touchStartX=_coordinates(e)[1]-offset.left,touchMoveY=[],touchMoveX=[]}}function _onTouchend(e){if(_pointerTouch(e)&&!touchActive&&!_coordinates(e)[2]){draggable=0,e.stopImmediatePropagation(),docDrag=touchDrag=0,endTime=_getTime();var offset=mCustomScrollBox.offset(),y=_coordinates(e)[0]-offset.top,x=_coordinates(e)[1]-offset.left;if(!(30<endTime-runningTime)){var slow=(speed=1e3/(endTime-startTime))<2.5,diff=slow?[touchMoveY[touchMoveY.length-2],touchMoveX[touchMoveX.length-2]]:[0,0];distance=slow?[y-diff[0],x-diff[1]]:[y-touchStartY,x-touchStartX];var absDistance=[Math.abs(distance[0]),Math.abs(distance[1])];speed=slow?[Math.abs(distance[0]/4),Math.abs(distance[1]/4)]:[speed,speed];var a=[Math.abs(mCSB_container[0].offsetTop)-distance[0]*_m(absDistance[0]/speed[0],speed[0]),Math.abs(mCSB_container[0].offsetLeft)-distance[1]*_m(absDistance[1]/speed[1],speed[1])];amount="yx"===o.axis?[a[0],a[1]]:"x"===o.axis?[null,a[1]]:[a[0],null],durB=[4*absDistance[0]+o.scrollInertia,4*absDistance[1]+o.scrollInertia];var md=parseInt(o.contentTouchScroll)||0;amount[0]=md<absDistance[0]?amount[0]:0,amount[1]=md<absDistance[1]?amount[1]:0,d.overflowed[0]&&_drag(amount[0],durB[0],"mcsEaseOut","y",overwrite,!1),d.overflowed[1]&&_drag(amount[1],durB[1],"mcsEaseOut","x",overwrite,!1)}}}function _m(ds,s){var r=[1.5*s,2*s,s/1.5,s/2];return 90<ds?4<s?r[0]:r[3]:60<ds?3<s?r[3]:r[2]:30<ds?8<s?r[1]:6<s?r[0]:4<s?s:r[2]:8<s?s:r[3]}function _drag(amount,dur,easing,dir,overwrite,drag){amount&&_scrollTo($this,amount.toString(),{dur:dur,scrollEasing:easing,dir:dir,overwrite:overwrite,drag:drag})}var draggable,dragY,dragX,touchStartY,touchStartX,startTime,runningTime,endTime,distance,speed,amount,durB,touchDrag,docDrag,$this=$(this),d=$this.data("mCS"),o=d.opt,namespace="mCS_"+d.idx,mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container"),mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")],touchMoveY=[],touchMoveX=[],durA=0,overwrite="yx"===o.axis?"none":"all",touchIntent=[],iframe=mCSB_container.find("iframe"),events=["touchstart."+namespace+" pointerdown."+namespace+" MSPointerDown."+namespace,"touchmove."+namespace+" pointermove."+namespace+" MSPointerMove."+namespace,"touchend."+namespace+" pointerup."+namespace+" MSPointerUp."+namespace],touchAction=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;mCSB_container.bind(events[0],function(e){_onTouchstart(e)}).bind(events[1],function(e){_onTouchmove(e)}),mCustomScrollBox.bind(events[0],function(e){_onTouchstart2(e)}).bind(events[2],function(e){_onTouchend(e)}),iframe.length&&iframe.each(function(){$(this).bind("load",function(){_canAccessIFrame(this)&&$(this.contentDocument||this.contentWindow.document).bind(events[0],function(e){_onTouchstart(e),_onTouchstart2(e)}).bind(events[1],function(e){_onTouchmove(e)}).bind(events[2],function(e){_onTouchend(e)})})})},_selectable=function(){function _seq(a,c,s){seq.type=s&&action?"stepped":"stepless",seq.scrollAmount=10,_sequentialScroll($this,a,c,"mcsLinearOut",s?60:null)}var action,$this=$(this),d=$this.data("mCS"),o=d.opt,seq=d.sequential,namespace="mCS_"+d.idx,mCSB_container=$("#mCSB_"+d.idx+"_container"),wrapper=mCSB_container.parent();mCSB_container.bind("mousedown."+namespace,function(e){touchable||action||(action=1,touchActive=!0)}).add(document).bind("mousemove."+namespace,function(e){if(!touchable&&action&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)){var offset=mCSB_container.offset(),y=_coordinates(e)[0]-offset.top+mCSB_container[0].offsetTop,x=_coordinates(e)[1]-offset.left+mCSB_container[0].offsetLeft;0<y&&y<wrapper.height()&&0<x&&x<wrapper.width()?seq.step&&_seq("off",null,"stepped"):("x"!==o.axis&&d.overflowed[0]&&(y<0?_seq("on",38):y>wrapper.height()&&_seq("on",40)),"y"!==o.axis&&d.overflowed[1]&&(x<0?_seq("on",37):x>wrapper.width()&&_seq("on",39)))}}).bind("mouseup."+namespace+" dragend."+namespace,function(e){touchable||(action&&(action=0,_seq("off",null)),touchActive=!1)})},_mousewheel=function(){function _onMousewheel(e,delta){if(_stop($this),!_disableMousewheel($this,e.target)){var deltaFactor="auto"!==o.mouseWheel.deltaFactor?parseInt(o.mouseWheel.deltaFactor):!(oldIE&&e.deltaFactor<100)&&e.deltaFactor||100,dur=o.scrollInertia;if("x"===o.axis||"x"===o.mouseWheel.axis)var dir="x",px=[Math.round(deltaFactor*d.scrollRatio.x),parseInt(o.mouseWheel.scrollAmount)],amount="auto"!==o.mouseWheel.scrollAmount?px[1]:px[0]>=mCustomScrollBox.width()?.9*mCustomScrollBox.width():px[0],contentPos=Math.abs($("#mCSB_"+d.idx+"_container")[0].offsetLeft),draggerPos=mCSB_dragger[1][0].offsetLeft,limit=mCSB_dragger[1].parent().width()-mCSB_dragger[1].width(),dlt="y"===o.mouseWheel.axis?e.deltaY||delta:e.deltaX;else dir="y",px=[Math.round(deltaFactor*d.scrollRatio.y),parseInt(o.mouseWheel.scrollAmount)],amount="auto"!==o.mouseWheel.scrollAmount?px[1]:px[0]>=mCustomScrollBox.height()?.9*mCustomScrollBox.height():px[0],contentPos=Math.abs($("#mCSB_"+d.idx+"_container")[0].offsetTop),draggerPos=mCSB_dragger[0][0].offsetTop,limit=mCSB_dragger[0].parent().height()-mCSB_dragger[0].height(),dlt=e.deltaY||delta;"y"===dir&&!d.overflowed[0]||"x"===dir&&!d.overflowed[1]||((o.mouseWheel.invert||e.webkitDirectionInvertedFromDevice)&&(dlt=-dlt),o.mouseWheel.normalizeDelta&&(dlt=dlt<0?-1:1),(0<dlt&&0!==draggerPos||dlt<0&&draggerPos!==limit||o.mouseWheel.preventDefault)&&(e.stopImmediatePropagation(),e.preventDefault()),e.deltaFactor<5&&!o.mouseWheel.normalizeDelta&&(amount=e.deltaFactor,dur=17),_scrollTo($this,(contentPos-dlt*amount).toString(),{dir:dir,dur:dur}))}}if($(this).data("mCS")){var $this=$(this),d=$this.data("mCS"),o=d.opt,namespace="mCS_"+d.idx,mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_dragger=[$("#mCSB_"+d.idx+"_dragger_vertical"),$("#mCSB_"+d.idx+"_dragger_horizontal")],iframe=$("#mCSB_"+d.idx+"_container").find("iframe");iframe.length&&iframe.each(function(){$(this).bind("load",function(){_canAccessIFrame(this)&&$(this.contentDocument||this.contentWindow.document).bind("mousewheel."+namespace,function(e,delta){_onMousewheel(e,delta)})})}),mCustomScrollBox.bind("mousewheel."+namespace,function(e,delta){_onMousewheel(e,delta)})}},_canAccessIFrameCache=new Object,_canAccessIFrame=function(iframe){var result=!1,cacheKey=!1,html=null;if(void 0===iframe?cacheKey="#empty":void 0!==$(iframe).attr("id")&&(cacheKey=$(iframe).attr("id")),!1!==cacheKey&&void 0!==_canAccessIFrameCache[cacheKey])return _canAccessIFrameCache[cacheKey];if(iframe){try{html=(iframe.contentDocument||iframe.contentWindow.document).body.innerHTML}catch(err){}result=null!==html}else{try{html=top.document.body.innerHTML}catch(err){}result=null!==html}return!1!==cacheKey&&(_canAccessIFrameCache[cacheKey]=result),result},_iframe=function(evt){var el=this.find("iframe");if(el.length){var val=evt?"auto":"none";el.css("pointer-events",val)}},_disableMousewheel=function(el,target){var tag=target.nodeName.toLowerCase(),tags=el.data("mCS").opt.mouseWheel.disableOver;return-1<$.inArray(tag,tags)&&!(-1<$.inArray(tag,["select","textarea"])&&!$(target).is(":focus"))},_draggerRail=function(){var clickable,$this=$(this),d=$this.data("mCS"),namespace="mCS_"+d.idx,mCSB_container=$("#mCSB_"+d.idx+"_container"),wrapper=mCSB_container.parent();$(".mCSB_"+d.idx+"_scrollbar ."+classes[12]).bind("mousedown."+namespace+" touchstart."+namespace+" pointerdown."+namespace+" MSPointerDown."+namespace,function(e){touchActive=!0,$(e.target).hasClass("mCSB_dragger")||(clickable=1)}).bind("touchend."+namespace+" pointerup."+namespace+" MSPointerUp."+namespace,function(e){touchActive=!1}).bind("click."+namespace,function(e){if(clickable&&(clickable=0,$(e.target).hasClass(classes[12])||$(e.target).hasClass("mCSB_draggerRail"))){_stop($this);var el=$(this),mCSB_dragger=el.find(".mCSB_dragger");if(0<el.parent(".mCSB_scrollTools_horizontal").length){if(!d.overflowed[1])return;var dir="x",clickDir=e.pageX>mCSB_dragger.offset().left?-1:1,to=Math.abs(mCSB_container[0].offsetLeft)-clickDir*(.9*wrapper.width())}else{if(!d.overflowed[0])return;dir="y",clickDir=e.pageY>mCSB_dragger.offset().top?-1:1,to=Math.abs(mCSB_container[0].offsetTop)-clickDir*(.9*wrapper.height())}_scrollTo($this,to.toString(),{dir:dir,scrollEasing:"mcsEaseInOut"})}})},_focus=function(){var $this=$(this),d=$this.data("mCS"),o=d.opt,namespace="mCS_"+d.idx,mCSB_container=$("#mCSB_"+d.idx+"_container"),wrapper=mCSB_container.parent();mCSB_container.bind("focusin."+namespace,function(e){var el=$(document.activeElement),nested=mCSB_container.find(".mCustomScrollBox").length;el.is(o.advanced.autoScrollOnFocus)&&(_stop($this),clearTimeout($this[0]._focusTimeout),$this[0]._focusTimer=nested?17*nested:0,$this[0]._focusTimeout=setTimeout(function(){var to=[_childPos(el)[0],_childPos(el)[1]],contentPos=[mCSB_container[0].offsetTop,mCSB_container[0].offsetLeft],isVisible=[0<=contentPos[0]+to[0]&&contentPos[0]+to[0]<wrapper.height()-el.outerHeight(!1),0<=contentPos[1]+to[1]&&contentPos[0]+to[1]<wrapper.width()-el.outerWidth(!1)],overwrite="yx"!==o.axis||isVisible[0]||isVisible[1]?"all":"none";"x"===o.axis||isVisible[0]||_scrollTo($this,to[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:overwrite,dur:0}),"y"===o.axis||isVisible[1]||_scrollTo($this,to[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:overwrite,dur:0})},$this[0]._focusTimer))})},_wrapperScroll=function(){var d=$(this).data("mCS"),namespace="mCS_"+d.idx,wrapper=$("#mCSB_"+d.idx+"_container").parent();wrapper.bind("scroll."+namespace,function(e){0===wrapper.scrollTop()&&0===wrapper.scrollLeft()||$(".mCSB_"+d.idx+"_scrollbar").css("visibility","hidden")})},_buttons=function(){var $this=$(this),d=$this.data("mCS"),o=d.opt,seq=d.sequential,namespace="mCS_"+d.idx,sel=".mCSB_"+d.idx+"_scrollbar";$(sel+">a").bind("contextmenu."+namespace,function(e){e.preventDefault()}).bind("mousedown."+namespace+" touchstart."+namespace+" pointerdown."+namespace+" MSPointerDown."+namespace+" mouseup."+namespace+" touchend."+namespace+" pointerup."+namespace+" MSPointerUp."+namespace+" mouseout."+namespace+" pointerout."+namespace+" MSPointerOut."+namespace+" click."+namespace,function(e){function _seq(a,c){seq.scrollAmount=o.scrollButtons.scrollAmount,_sequentialScroll($this,a,c)}if(e.preventDefault(),_mouseBtnLeft(e)){var btnClass=$(this).attr("class");switch(seq.type=o.scrollButtons.scrollType,e.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===seq.type)return;touchActive=!0,d.tweenRunning=!1,_seq("on",btnClass);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===seq.type)return;touchActive=!1,seq.dir&&_seq("off",btnClass);break;case"click":if("stepped"!==seq.type||d.tweenRunning)return;_seq("on",btnClass)}}})},_keyboard=function(){function _onKeyboard(e){function _seq(a,c){seq.type=o.keyboard.scrollType,seq.scrollAmount=o.keyboard.scrollAmount,"stepped"===seq.type&&d.tweenRunning||_sequentialScroll($this,a,c)}switch(e.type){case"blur":d.tweenRunning&&seq.dir&&_seq("off",null);break;case"keydown":case"keyup":var code=e.keyCode?e.keyCode:e.which,action="on";if("x"!==o.axis&&(38===code||40===code)||"y"!==o.axis&&(37===code||39===code)){if((38===code||40===code)&&!d.overflowed[0]||(37===code||39===code)&&!d.overflowed[1])return;"keyup"===e.type&&(action="off"),$(document.activeElement).is(editables)||(e.preventDefault(),e.stopImmediatePropagation(),_seq(action,code))}else if(33===code||34===code){if((d.overflowed[0]||d.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type){_stop($this);var keyboardDir=34===code?-1:1;if("x"===o.axis||"yx"===o.axis&&d.overflowed[1]&&!d.overflowed[0])var dir="x",to=Math.abs(mCSB_container[0].offsetLeft)-keyboardDir*(.9*wrapper.width());else dir="y",to=Math.abs(mCSB_container[0].offsetTop)-keyboardDir*(.9*wrapper.height());_scrollTo($this,to.toString(),{dir:dir,scrollEasing:"mcsEaseInOut"})}}else if((35===code||36===code)&&!$(document.activeElement).is(editables)&&((d.overflowed[0]||d.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type)){if("x"===o.axis||"yx"===o.axis&&d.overflowed[1]&&!d.overflowed[0])dir="x",to=35===code?Math.abs(wrapper.width()-mCSB_container.outerWidth(!1)):0;else dir="y",to=35===code?Math.abs(wrapper.height()-mCSB_container.outerHeight(!1)):0;_scrollTo($this,to.toString(),{dir:dir,scrollEasing:"mcsEaseInOut"})}}}var $this=$(this),d=$this.data("mCS"),o=d.opt,seq=d.sequential,namespace="mCS_"+d.idx,mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container"),wrapper=mCSB_container.parent(),editables="input,textarea,select,datalist,keygen,[contenteditable='true']",iframe=mCSB_container.find("iframe"),events=["blur."+namespace+" keydown."+namespace+" keyup."+namespace];iframe.length&&iframe.each(function(){$(this).bind("load",function(){_canAccessIFrame(this)&&$(this.contentDocument||this.contentWindow.document).bind(events[0],function(e){_onKeyboard(e)})})}),mCustomScrollBox.attr("tabindex","0").bind(events[0],function(e){_onKeyboard(e)})},_sequentialScroll=function(el,action,trigger,e,s){function _on(once){o.snapAmount&&(seq.scrollAmount=o.snapAmount instanceof Array?"x"===seq.dir[0]?o.snapAmount[1]:o.snapAmount[0]:o.snapAmount);var c="stepped"!==seq.type,t=s||(once?c?steplessSpeed/1.5:steppedSpeed:1e3/60),m=once?c?7.5:40:2.5,contentPos=[Math.abs(mCSB_container[0].offsetTop),Math.abs(mCSB_container[0].offsetLeft)],ratio=[10<d.scrollRatio.y?10:d.scrollRatio.y,10<d.scrollRatio.x?10:d.scrollRatio.x],amount="x"===seq.dir[0]?contentPos[1]+seq.dir[1]*(ratio[1]*m):contentPos[0]+seq.dir[1]*(ratio[0]*m),px="x"===seq.dir[0]?contentPos[1]+seq.dir[1]*parseInt(seq.scrollAmount):contentPos[0]+seq.dir[1]*parseInt(seq.scrollAmount),to="auto"!==seq.scrollAmount?px:amount,easing=e||(once?c?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),onComplete=!!once;once&&t<17&&(to="x"===seq.dir[0]?contentPos[1]:contentPos[0]),_scrollTo(el,to.toString(),{dir:seq.dir[0],scrollEasing:easing,dur:t,onComplete:onComplete}),once?seq.dir=!1:(clearTimeout(seq.step),seq.step=setTimeout(function(){_on()},t))}var d=el.data("mCS"),o=d.opt,seq=d.sequential,mCSB_container=$("#mCSB_"+d.idx+"_container"),once="stepped"===seq.type,steplessSpeed=o.scrollInertia<26?26:o.scrollInertia,steppedSpeed=o.scrollInertia<1?17:o.scrollInertia;switch(action){case"on":if(seq.dir=[trigger===classes[16]||trigger===classes[15]||39===trigger||37===trigger?"x":"y",trigger===classes[13]||trigger===classes[15]||38===trigger||37===trigger?-1:1],_stop(el),_isNumeric(trigger)&&"stepped"===seq.type)return;_on(once);break;case"off":clearTimeout(seq.step),_delete(seq,"step"),_stop(el),(once||d.tweenRunning&&seq.dir)&&_on(!0)}},_arr=function(val){var o=$(this).data("mCS").opt,vals=[];return"function"==typeof val&&(val=val()),val instanceof Array?vals=1<val.length?[val[0],val[1]]:"x"===o.axis?[null,val[0]]:[val[0],null]:(vals[0]=val.y?val.y:val.x||"x"===o.axis?null:val,vals[1]=val.x?val.x:val.y||"y"===o.axis?null:val),"function"==typeof vals[0]&&(vals[0]=vals[0]()),"function"==typeof vals[1]&&(vals[1]=vals[1]()),vals},_to=function(val,dir){if(null!=val&&void 0!==val){var $this=$(this),d=$this.data("mCS"),o=d.opt,mCSB_container=$("#mCSB_"+d.idx+"_container"),wrapper=mCSB_container.parent(),t=typeof val,contentLength="x"===(dir=dir||("x"===o.axis?"x":"y"))?mCSB_container.outerWidth(!1)-wrapper.width():mCSB_container.outerHeight(!1)-wrapper.height(),contentPos="x"===dir?mCSB_container[0].offsetLeft:mCSB_container[0].offsetTop,cssProp="x"===dir?"left":"top";switch(t){case"function":return val();case"object":if(!(obj=val.jquery?val:$(val)).length)return;return"x"===dir?_childPos(obj)[1]:_childPos(obj)[0];case"string":case"number":if(_isNumeric(val))return Math.abs(val);if(-1!==val.indexOf("%"))return Math.abs(contentLength*parseInt(val)/100);if(-1!==val.indexOf("-="))return Math.abs(contentPos-parseInt(val.split("-=")[1]));if(-1!==val.indexOf("+=")){var p=contentPos+parseInt(val.split("+=")[1]);return 0<=p?0:Math.abs(p)}if(-1!==val.indexOf("px")&&_isNumeric(val.split("px")[0]))return Math.abs(val.split("px")[0]);if("top"===val||"left"===val)return 0;if("bottom"===val)return Math.abs(wrapper.height()-mCSB_container.outerHeight(!1));if("right"===val)return Math.abs(wrapper.width()-mCSB_container.outerWidth(!1));if("first"!==val&&"last"!==val)return $(val).length?"x"===dir?_childPos($(val))[1]:_childPos($(val))[0]:(mCSB_container.css(cssProp,val),void methods.update.call(null,$this[0]));var obj=mCSB_container.find(":"+val);return"x"===dir?_childPos(obj)[1]:_childPos(obj)[0]}}},_autoUpdate=function(rem){function doUpd(cb){clearTimeout(mCSB_container[0].autoUpdate),methods.update.call(null,$this[0],cb)}var $this=$(this),d=$this.data("mCS"),o=d.opt,mCSB_container=$("#mCSB_"+d.idx+"_container");if(rem)return clearTimeout(mCSB_container[0].autoUpdate),void _delete(mCSB_container[0],"autoUpdate");!function upd(){clearTimeout(mCSB_container[0].autoUpdate),0!==$this.parents("html").length?mCSB_container[0].autoUpdate=setTimeout(function(){return o.advanced.updateOnSelectorChange&&(d.poll.change.n=function(){!0===o.advanced.updateOnSelectorChange&&(o.advanced.updateOnSelectorChange="*");var total=0,sel=mCSB_container.find(o.advanced.updateOnSelectorChange);return o.advanced.updateOnSelectorChange&&0<sel.length&&sel.each(function(){total+=this.offsetHeight+this.offsetWidth}),total}(),d.poll.change.n!==d.poll.change.o)?(d.poll.change.o=d.poll.change.n,void doUpd(3)):o.advanced.updateOnContentResize&&(d.poll.size.n=$this[0].scrollHeight+$this[0].scrollWidth+mCSB_container[0].offsetHeight+$this[0].offsetHeight+$this[0].offsetWidth,d.poll.size.n!==d.poll.size.o)?(d.poll.size.o=d.poll.size.n,void doUpd(1)):!o.advanced.updateOnImageLoad||"auto"===o.advanced.updateOnImageLoad&&"y"===o.axis||(d.poll.img.n=mCSB_container.find("img").length,d.poll.img.n===d.poll.img.o)?void((o.advanced.updateOnSelectorChange||o.advanced.updateOnContentResize||o.advanced.updateOnImageLoad)&&upd()):(d.poll.img.o=d.poll.img.n,void mCSB_container.find("img").each(function(){!function(el){if($(el).hasClass(classes[2]))return doUpd();var img=new Image;img.onload=function(contextObject,delegateMethod){return function(){return delegateMethod.apply(contextObject,arguments)}}(img,function(){this.onload=null,$(el).addClass(classes[2]),doUpd(2)}),img.src=el.src}(this)}))},o.advanced.autoUpdateTimeout):$this=null}()},_stop=function(el){var d=el.data("mCS");$("#mCSB_"+d.idx+"_container,#mCSB_"+d.idx+"_container_wrapper,#mCSB_"+d.idx+"_dragger_vertical,#mCSB_"+d.idx+"_dragger_horizontal").each(function(){_stopTween.call(this)})},_scrollTo=function(el,to,options){function _cb(cb){return d&&o.callbacks[cb]&&"function"==typeof o.callbacks[cb]}function _mcs(){var cp=[mCSB_container[0].offsetTop,mCSB_container[0].offsetLeft],dp=[mCSB_dragger[0].offsetTop,mCSB_dragger[0].offsetLeft],cl=[mCSB_container.outerHeight(!1),mCSB_container.outerWidth(!1)],pl=[mCustomScrollBox.height(),mCustomScrollBox.width()];el[0].mcs={content:mCSB_container,top:cp[0],left:cp[1],draggerTop:dp[0],draggerLeft:dp[1],topPct:Math.round(100*Math.abs(cp[0])/(Math.abs(cl[0])-pl[0])),leftPct:Math.round(100*Math.abs(cp[1])/(Math.abs(cl[1])-pl[1])),direction:options.dir}}var d=el.data("mCS"),o=d.opt,defaults={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:o.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},dur=[(options=$.extend(defaults,options)).dur,options.drag?0:options.dur],mCustomScrollBox=$("#mCSB_"+d.idx),mCSB_container=$("#mCSB_"+d.idx+"_container"),wrapper=mCSB_container.parent(),totalScrollOffsets=o.callbacks.onTotalScrollOffset?_arr.call(el,o.callbacks.onTotalScrollOffset):[0,0],totalScrollBackOffsets=o.callbacks.onTotalScrollBackOffset?_arr.call(el,o.callbacks.onTotalScrollBackOffset):[0,0];if(d.trigger=options.trigger,0===wrapper.scrollTop()&&0===wrapper.scrollLeft()||($(".mCSB_"+d.idx+"_scrollbar").css("visibility","visible"),wrapper.scrollTop(0).scrollLeft(0)),"_resetY"!==to||d.contentReset.y||(_cb("onOverflowYNone")&&o.callbacks.onOverflowYNone.call(el[0]),d.contentReset.y=1),"_resetX"!==to||d.contentReset.x||(_cb("onOverflowXNone")&&o.callbacks.onOverflowXNone.call(el[0]),d.contentReset.x=1),"_resetY"!==to&&"_resetX"!==to){if(!d.contentReset.y&&el[0].mcs||!d.overflowed[0]||(_cb("onOverflowY")&&o.callbacks.onOverflowY.call(el[0]),d.contentReset.x=null),!d.contentReset.x&&el[0].mcs||!d.overflowed[1]||(_cb("onOverflowX")&&o.callbacks.onOverflowX.call(el[0]),d.contentReset.x=null),o.snapAmount)to=function(to,amount,offset){return Math.round(to/amount)*amount-offset}(to,o.snapAmount instanceof Array?"x"===options.dir?o.snapAmount[1]:o.snapAmount[0]:o.snapAmount,o.snapOffset);switch(options.dir){case"x":var mCSB_dragger=$("#mCSB_"+d.idx+"_dragger_horizontal"),property="left",contentPos=mCSB_container[0].offsetLeft,limit=[mCustomScrollBox.width()-mCSB_container.outerWidth(!1),mCSB_dragger.parent().width()-mCSB_dragger.width()],scrollTo=[to,0===to?0:to/d.scrollRatio.x],tso=totalScrollOffsets[1],tsbo=totalScrollBackOffsets[1],totalScrollOffset=0<tso?tso/d.scrollRatio.x:0,totalScrollBackOffset=0<tsbo?tsbo/d.scrollRatio.x:0;break;case"y":mCSB_dragger=$("#mCSB_"+d.idx+"_dragger_vertical"),property="top",contentPos=mCSB_container[0].offsetTop,limit=[mCustomScrollBox.height()-mCSB_container.outerHeight(!1),mCSB_dragger.parent().height()-mCSB_dragger.height()],scrollTo=[to,0===to?0:to/d.scrollRatio.y],tso=totalScrollOffsets[0],tsbo=totalScrollBackOffsets[0],totalScrollOffset=0<tso?tso/d.scrollRatio.y:0,totalScrollBackOffset=0<tsbo?tsbo/d.scrollRatio.y:0}scrollTo[1]<0||0===scrollTo[0]&&0===scrollTo[1]?scrollTo=[0,0]:scrollTo[1]>=limit[1]?scrollTo=[limit[0],limit[1]]:scrollTo[0]=-scrollTo[0],el[0].mcs||(_mcs(),_cb("onInit")&&o.callbacks.onInit.call(el[0])),clearTimeout(mCSB_container[0].onCompleteTimeout),_tweenTo(mCSB_dragger[0],property,Math.round(scrollTo[1]),dur[1],options.scrollEasing),!d.tweenRunning&&(0===contentPos&&0<=scrollTo[0]||contentPos===limit[0]&&scrollTo[0]<=limit[0])||_tweenTo(mCSB_container[0],property,Math.round(scrollTo[0]),dur[0],options.scrollEasing,options.overwrite,{onStart:function(){options.callbacks&&options.onStart&&!d.tweenRunning&&(_cb("onScrollStart")&&(_mcs(),o.callbacks.onScrollStart.call(el[0])),d.tweenRunning=!0,_onDragClasses(mCSB_dragger),d.cbOffsets=[o.callbacks.alwaysTriggerOffsets||contentPos>=limit[0]+tso,o.callbacks.alwaysTriggerOffsets||contentPos<=-tsbo])},onUpdate:function(){options.callbacks&&options.onUpdate&&_cb("whileScrolling")&&(_mcs(),o.callbacks.whileScrolling.call(el[0]))},onComplete:function(){if(options.callbacks&&options.onComplete){"yx"===o.axis&&clearTimeout(mCSB_container[0].onCompleteTimeout);var t=mCSB_container[0].idleTimer||0;mCSB_container[0].onCompleteTimeout=setTimeout(function(){_cb("onScroll")&&(_mcs(),o.callbacks.onScroll.call(el[0])),_cb("onTotalScroll")&&scrollTo[1]>=limit[1]-totalScrollOffset&&d.cbOffsets[0]&&(_mcs(),o.callbacks.onTotalScroll.call(el[0])),_cb("onTotalScrollBack")&&scrollTo[1]<=totalScrollBackOffset&&d.cbOffsets[1]&&(_mcs(),o.callbacks.onTotalScrollBack.call(el[0])),d.tweenRunning=!1,mCSB_container[0].idleTimer=0,_onDragClasses(mCSB_dragger,"hide")},t)}}})}},_tweenTo=function(el,prop,to,duration,easing,overwrite,callbacks){function _step(){tobj.stop||(progress||onStart.call(),progress=_getTime()-startTime,_tween(),progress>=tobj.time&&(tobj.time=progress>tobj.time?progress+_delay-(progress-tobj.time):progress+_delay-1,tobj.time<progress+1&&(tobj.time=progress+1)),tobj.time<duration?tobj.id=_request(_step):onComplete.call())}function _tween(){0<duration?(tobj.currVal=function(t,b,c,d,type){switch(type){case"linear":case"mcsLinear":return c*t/d+b;case"mcsLinearOut":return t/=d,t--,c*Math.sqrt(1-t*t)+b;case"easeInOutSmooth":return(t/=d/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b;case"easeInOutStrong":return(t/=d/2)<1?c/2*Math.pow(2,10*(t-1))+b:(t--,c/2*(2-Math.pow(2,-10*t))+b);case"easeInOut":case"mcsEaseInOut":return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b;case"easeOutSmooth":return t/=d,-c*(--t*t*t*t-1)+b;case"easeOutStrong":return c*(1-Math.pow(2,-10*t/d))+b;case"easeOut":case"mcsEaseOut":default:var ts=(t/=d)*t,tc=ts*t;return b+c*(.499999999999997*tc*ts+-2.5*ts*ts+5.5*tc+-6.5*ts+4*t)}}(tobj.time,from,diff,duration,easing),elStyle[prop]=Math.round(tobj.currVal)+"px"):elStyle[prop]=to+"px",onUpdate.call()}el._mTween||(el._mTween={top:{},left:{}});var _delay,_request,onStart=(callbacks=callbacks||{}).onStart||function(){},onUpdate=callbacks.onUpdate||function(){},onComplete=callbacks.onComplete||function(){},startTime=_getTime(),progress=0,from=el.offsetTop,elStyle=el.style,tobj=el._mTween[prop];"left"===prop&&(from=el.offsetLeft);var diff=to-from;tobj.stop=0,"none"!==overwrite&&null!=tobj.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(tobj.id):clearTimeout(tobj.id),tobj.id=null),_delay=1e3/60,tobj.time=progress+_delay,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(f){return _tween(),setTimeout(f,.01)},tobj.id=_request(_step)},_getTime=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},_stopTween=function(){var el=this;el._mTween||(el._mTween={top:{},left:{}});for(var props=["top","left"],i=0;i<props.length;i++){var prop=props[i];el._mTween[prop].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(el._mTween[prop].id):clearTimeout(el._mTween[prop].id),el._mTween[prop].id=null,el._mTween[prop].stop=1)}},_delete=function(c,m){try{delete c[m]}catch(e){c[m]=null}},_mouseBtnLeft=function(e){return!(e.which&&1!==e.which)},_pointerTouch=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},_isNumeric=function(val){return!isNaN(parseFloat(val))&&isFinite(val)},_childPos=function(el){var p=el.parents(".mCSB_container");return[el.offset().top-p.offset().top,el.offset().left-p.offset().left]},_isTabHidden=function(){var prop=function(){var pfx=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var i=0;i<pfx.length;i++)if(pfx[i]+"Hidden"in document)return pfx[i]+"Hidden";return null}();return!!prop&&document[prop]},$.fn[pluginNS]=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist"):methods.init.apply(this,arguments)},$[pluginNS]=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist"):methods.init.apply(this,arguments)},$[pluginNS].defaults=defaults,window[pluginNS]=!0,$(window).bind("load",function(){$(".mCustomScrollbar")[pluginNS](),$.extend($.expr[":"],{mcsInView:$.expr[":"].mcsInView||function(el){var wrapper,cPos,$el=$(el),content=$el.parents(".mCSB_container");if(content.length)return wrapper=content.parent(),0<=(cPos=[content[0].offsetTop,content[0].offsetLeft])[0]+_childPos($el)[0]&&cPos[0]+_childPos($el)[0]<wrapper.height()-$el.outerHeight(!1)&&0<=cPos[1]+_childPos($el)[1]&&cPos[1]+_childPos($el)[1]<wrapper.width()-$el.outerWidth(!1)},mcsInSight:$.expr[":"].mcsInSight||function(el,i,m){var elD,wrapperView,pos,wrapperViewPct,$el=$(el),content=$el.parents(".mCSB_container"),pctVals="exact"===m[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(content.length)return elD=[$el.outerHeight(!1),$el.outerWidth(!1)],pos=[content[0].offsetTop+_childPos($el)[0],content[0].offsetLeft+_childPos($el)[1]],wrapperView=[content.parent()[0].offsetHeight,content.parent()[0].offsetWidth],pos[0]-wrapperView[0]*(wrapperViewPct=[elD[0]<wrapperView[0]?pctVals[0]:pctVals[1],elD[1]<wrapperView[1]?pctVals[0]:pctVals[1]])[0][0]<0&&0<=pos[0]+elD[0]-wrapperView[0]*wrapperViewPct[0][1]&&pos[1]-wrapperView[1]*wrapperViewPct[1][0]<0&&0<=pos[1]+elD[1]-wrapperView[1]*wrapperViewPct[1][1]},mcsOverflow:$.expr[":"].mcsOverflow||function(el){var d=$(el).data("mCS");if(d)return d.overflowed[0]||d.overflowed[1]}})})}),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var matches=require("matches-selector");module.exports=function(element,selector,checkYoSelf){for(var parent=checkYoSelf?element:element.parentNode;parent&&parent!==document;){if(matches(parent,selector))return parent;parent=parent.parentNode}}},{"matches-selector":5}],2:[function(require,module,exports){var closest=require("closest");module.exports=function(element,selector,type,callback,useCapture){var listenerFn=function(element,selector,type,callback){return function(e){e.delegateTarget=closest(e.target,selector,!0),e.delegateTarget&&callback.call(element,e)}}.apply(this,arguments);return element.addEventListener(type,listenerFn,useCapture),{destroy:function(){element.removeEventListener(type,listenerFn,useCapture)}}}},{closest:1}],3:[function(require,module,exports){exports.node=function(value){return void 0!==value&&value instanceof HTMLElement&&1===value.nodeType},exports.nodeList=function(value){var type=Object.prototype.toString.call(value);return void 0!==value&&("[object NodeList]"===type||"[object HTMLCollection]"===type)&&"length"in value&&(0===value.length||exports.node(value[0]))},exports.string=function(value){return"string"==typeof value||value instanceof String},exports.fn=function(value){return"[object Function]"===Object.prototype.toString.call(value)}},{}],4:[function(require,module,exports){var is=require("./is"),delegate=require("delegate");module.exports=function(target,type,callback){if(!target&&!type&&!callback)throw new Error("Missing required arguments");if(!is.string(type))throw new TypeError("Second argument must be a String");if(!is.fn(callback))throw new TypeError("Third argument must be a Function");if(is.node(target))return function(node,type,callback){return node.addEventListener(type,callback),{destroy:function(){node.removeEventListener(type,callback)}}}(target,type,callback);if(is.nodeList(target))return function(nodeList,type,callback){return Array.prototype.forEach.call(nodeList,function(node){node.addEventListener(type,callback)}),{destroy:function(){Array.prototype.forEach.call(nodeList,function(node){node.removeEventListener(type,callback)})}}}(target,type,callback);if(is.string(target))return function(selector,type,callback){return delegate(document.body,selector,type,callback)}(target,type,callback);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(require,module,exports){var proto=Element.prototype,vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=function(el,selector){if(vendor)return vendor.call(el,selector);for(var nodes=el.parentNode.querySelectorAll(selector),i=0;i<nodes.length;++i)if(nodes[i]==el)return!0;return!1}},{}],6:[function(require,module,exports){module.exports=function(element){var selectedText;if("INPUT"===element.nodeName||"TEXTAREA"===element.nodeName)element.focus(),element.setSelectionRange(0,element.value.length),selectedText=element.value;else{element.hasAttribute("contenteditable")&&element.focus();var selection=window.getSelection(),range=document.createRange();range.selectNodeContents(element),selection.removeAllRanges(),selection.addRange(range),selectedText=selection.toString()}return selectedText}},{}],7:[function(require,module,exports){function E(){}E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});return(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx}),this},once:function(name,callback,ctx){function listener(){self.off(name,listener),callback.apply(ctx,arguments)}var self=this;return listener._=callback,this.on(name,listener,ctx)},emit:function(name){for(var data=[].slice.call(arguments,1),evtArr=((this.e||(this.e={}))[name]||[]).slice(),i=0,len=evtArr.length;i<len;i++)evtArr[i].fn.apply(evtArr[i].ctx,data);return this},off:function(name,callback){var e=this.e||(this.e={}),evts=e[name],liveEvents=[];if(evts&&callback)for(var i=0,len=evts.length;i<len;i++)evts[i].fn!==callback&&evts[i].fn._!==callback&&liveEvents.push(evts[i]);return liveEvents.length?e[name]=liveEvents:delete e[name],this}},module.exports=E},{}],8:[function(require,module,exports){!function(global,factory){if(0,void 0!==exports)factory(module,require("select"));else{var mod={exports:{}};factory(mod,global.select),global.clipboardAction=mod.exports}}(this,function(module,_select){"use strict";var obj,_select2=(obj=_select)&&obj.__esModule?obj:{default:obj},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ClipboardAction=function(){function ClipboardAction(options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ClipboardAction),this.resolveOptions(options),this.initSelection()}return ClipboardAction.prototype.resolveOptions=function(argument_0){var options=arguments.length<=0||void 0===argument_0?{}:argument_0;this.action=options.action,this.emitter=options.emitter,this.target=options.target,this.text=options.text,this.trigger=options.trigger,this.selectedText=""},ClipboardAction.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},ClipboardAction.prototype.selectFake=function(){var _this=this,isRTL="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return _this.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="fixed",this.fakeElem.style[isRTL?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,_select2.default)(this.fakeElem),this.copyText()},ClipboardAction.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},ClipboardAction.prototype.selectTarget=function(){this.selectedText=(0,_select2.default)(this.target),this.copyText()},ClipboardAction.prototype.copyText=function(){var succeeded=void 0;try{succeeded=document.execCommand(this.action)}catch(err){succeeded=!1}this.handleResult(succeeded)},ClipboardAction.prototype.handleResult=function(succeeded){succeeded?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},ClipboardAction.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},ClipboardAction.prototype.destroy=function(){this.removeFake()},_createClass(ClipboardAction,[{key:"action",set:function(argument_0){var action=arguments.length<=0||void 0===argument_0?"copy":argument_0;if(this._action=action,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(target){if(void 0!==target){if(!target||"object"!==(void 0===target?"undefined":_typeof(target))||1!==target.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&target.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(target.hasAttribute("readonly")||target.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=target}},get:function(){return this._target}}]),ClipboardAction}();module.exports=ClipboardAction})},{select:6}],9:[function(require,module,exports){!function(global,factory){if(0,void 0!==exports)factory(module,require("./clipboard-action"),require("tiny-emitter"),require("good-listener"));else{var mod={exports:{}};factory(mod,global.clipboardAction,global.tinyEmitter,global.goodListener),global.clipboard=mod.exports}}(this,function(module,_clipboardAction,_tinyEmitter,_goodListener){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getAttributeValue(suffix,element){var attribute="data-clipboard-"+suffix;if(element.hasAttribute(attribute))return element.getAttribute(attribute)}var _clipboardAction2=_interopRequireDefault(_clipboardAction),_tinyEmitter2=_interopRequireDefault(_tinyEmitter),_goodListener2=_interopRequireDefault(_goodListener),Clipboard=function(_Emitter){function Clipboard(trigger,options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Clipboard);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Emitter.call(this));return _this.resolveOptions(options),_this.listenClick(trigger),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Clipboard,_Emitter),Clipboard.prototype.resolveOptions=function(argument_0){var options=arguments.length<=0||void 0===argument_0?{}:argument_0;this.action="function"==typeof options.action?options.action:this.defaultAction,this.target="function"==typeof options.target?options.target:this.defaultTarget,this.text="function"==typeof options.text?options.text:this.defaultText},Clipboard.prototype.listenClick=function(trigger){var _this2=this;this.listener=(0,_goodListener2.default)(trigger,"click",function(e){return _this2.onClick(e)})},Clipboard.prototype.onClick=function(e){var trigger=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new _clipboardAction2.default({action:this.action(trigger),target:this.target(trigger),text:this.text(trigger),trigger:trigger,emitter:this})},Clipboard.prototype.defaultAction=function(trigger){return getAttributeValue("action",trigger)},Clipboard.prototype.defaultTarget=function(trigger){var selector=getAttributeValue("target",trigger);if(selector)return document.querySelector(selector)},Clipboard.prototype.defaultText=function(trigger){return getAttributeValue("text",trigger)},Clipboard.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},Clipboard}(_tinyEmitter2.default);module.exports=Clipboard})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)}),Validation.defaultOptions.immediate=!0,Validation.defaultOptions.addClassNameToContainer=!0;var MgResponsive=function($){"use strict";return{init:function(initModules){$.each(initModules,function(key,value){!0===value&&MgResponsive[key].init()})}}}(window.jQuery);jQuery(function(){MgResponsive.init({SvgDefs:!0,FancyBox:!0,Search:!0,uiTabs:!0,uiAccordion:!0,uiCarousel:!0,clipboardCopy:!0,StoreSwitcher:!0,MiniBag:!0,ProductSocialShare:!0,CookieBanner:!0,NewsletterLightbox:!0,NewsletterSignup:!0,NewsletterUnsubscribe:!0,CustomSelect:!0,confirmRemove:!0,ScrollToTop:!0,FormValidation:!0,Wishlist:!0,CampaignCheck:!0,promoBanners:!0,GoogleTags:!0,Promotions:!0,MgAffiliate:!0,Tooltip:!0,GeoIpTooltip:!0,Footer:!0})}),(MgResponsive=MgResponsive||{}).uiAccordion=function($){"use strict";return{init:function(){this.initAccordion(),this.initAccordionMenu(),this.helpPageAnchors()},initAccordion:function(){$(".ui-tabs--help .js-accordion").length&&$(".js-accordion").accordion({active:!1,animate:250,icons:!1,collapsible:!0,heightStyle:"content"}),$(".js-accordion")&&$(".js-accordion").accordion({animate:250,icons:!1,collapsible:!0,heightStyle:"content"}),$(".js-accordion.collapse")&&$(".js-accordion.collapse").accordion({active:!1,animate:250,icons:!1,collapsible:!0,heightStyle:"content"}),$(".ui-accordion--help").accordion("disable").find(".ui-accordion-header").on("click",function(){$(this).toggleClass("ui-accordion-header-active"),$(this).find("+ div").slideToggle(250)})},initAccordionMenu:function(){$(".js-accordion--menu").accordion({active:!1,animate:250,icons:!1,collapsible:!0,heightStyle:"content"}),$(".js-accordion--menu li").each(function(){$(this).has("ul").length<1&&$(this).find("a").click(function(e){e.stopPropagation()})}),$(".js-accordion--menu .level0 a").off("click")},helpPageAnchors:function(){-1<window.location.href.indexOf("help#")&&$(window).on("load",function(){var anchorId=window.location.hash.slice(1),anchorEl=document.getElementById(anchorId);anchorEl&&setTimeout(function(){anchorEl.scrollIntoView({behavior:"smooth"}),$(anchorEl).trigger("click")},100)})}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).CampaignCheck=function($){"use strict";return{init:function(){$(".products-grid--campaign").length&&($("body").addClass("campaign-grid"),$(".main-container").removeClass("col2-left-layout"))}}}(window.jQuery),(MgResponsive=MgResponsive||{}).uiCarousel=function($){"use strict";return{init:function(){var jcarousel=$(".ui-carousel--responsive .jcarousel");jcarousel.on("jcarousel:reload jcarousel:create",function(){var itemWidth,itemsPerPage,carousel=$(this),containerWidth=carousel.innerWidth();512<=containerWidth?(itemWidth=containerWidth/4,itemsPerPage=4):350<=containerWidth?(itemWidth=containerWidth/3,itemsPerPage=3):250<=containerWidth&&(itemWidth=containerWidth/2,itemsPerPage=2),itemsPerPage<carousel.jcarousel("items").length?jcarousel.removeClass("hide-controls"):jcarousel.addClass("hide-controls"),carousel.jcarousel("items").css("width",Math.ceil(itemWidth)+"px")}),$(".ui-carousel--hor .jcarousel").jcarousel({wrap:"both"}),$(".ui-carousel--vert .jcarousel").jcarousel({vertical:!0}),$(".ui-carousel--hor .jcarousel-prev").jcarouselControl({target:"-=1"}),$(".ui-carousel--hor .jcarousel-next").jcarouselControl({target:"+=1"}),$(".ui-carousel--vert .jcarousel-prev").jcarouselControl({target:"-=1"}),$(".ui-carousel--vert  .jcarousel-next").jcarouselControl({target:"+=1"}),$(".jcarousel-pagination")&&$(".jcarousel-pagination").on("jcarouselpagination:active","a",function(){$(this).addClass("active")}).on("jcarouselpagination:inactive","a",function(){$(this).removeClass("active")}).jcarouselPagination({item:function(page){return'<a href="#'+page+'">'+page+"</a>"}})}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).UserData=function(Modernizr){return{setSessionStorage:function(storageItemName,storageItemData){var item,dataObject={};if("object"==typeof storageItemData){for(item in storageItemData)dataObject[item]=storageItemData[item];dataObject=JSON.stringify(dataObject)}else dataObject=storageItemData;Modernizr.sessionstorage?sessionStorage.setItem(storageItemName,dataObject):Mage.Cookies.set(storageItemName,dataObject)},getSessionStorage:function(storageItemName){var dataObject;if(sessionStorage.getItem(storageItemName))dataObject=sessionStorage.getItem(storageItemName);else{if(!Mage.Cookies.get(storageItemName))return!1;dataObject=Mage.Cookies.get(storageItemName)}try{return JSON.parse(dataObject)}catch(error){return dataObject}},killSessionStorage:function(storageItemName){sessionStorage.getItem(storageItemName)?sessionStorage.removeItem(storageItemName):Mage.Cookies.get(storageItemName)&&Mage.Cookies.clear(storageItemName)}}}((window.jQuery,Modernizr)),(MgResponsive=MgResponsive||{}).clipboardCopy=function($){"use strict";var clipboard,copyBtn,promoCodeIntrofullText,promoIntroText,promoText;return{init:function(){function resetCopy(){$(".copied").each(function(){$(this).siblings(promoIntroText,promoText).show(),$(".promotion__code-success").remove(),$(this).html('<svg class="icon icon--copy"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-copy"></use></svg>'),$(this).removeClass("copied")})}clipboard=new Clipboard(".js-copy-btn"),copyBtn=$(".js-copy-btn"),promoCodeIntrofullText=$(".promotion__code-full-text"),promoIntroText=$(".promotion__code-intro-text"),promoText=$(".promotion__code-text"),$(".tooltip__container"),this.setCodeSize(),this.removeCopyBtn(),clipboard.on("success",function(e){var elem;resetCopy(),elem=e.trigger,$(elem).siblings(promoIntroText,promoText).hide(),$(elem).parent().prepend("<span class='promotion__code-success'>Copied To Clipboard</span>"),$(elem).addClass("copied").html('<svg class="icon icon--tick"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-tick"></use></svg>'),setTimeout(function(){resetCopy()},6e3),$(e.trigger).trigger("copiedToClipboard",{promoCode:e.text})}),clipboard.on("error",function(e){var elem,msg,action,actionKey;elem=e.trigger,action=e.action,actionKey="cut"===action?"X":"C",msg=/iPhone|iPad/i.test(navigator.userAgent)?"Press and hold to copy":/Mac/i.test(navigator.userAgent)?"Press â-"+actionKey+" to "+action:"Press Ctrl-"+actionKey+" to "+action,$(elem).prev(promoText).select(),$(elem).addClass("promotion__code-tooltipped"),MgResponsive.Tooltip.tip($(".promotion__code-tooltipped"),msg,{closeBtn:!1,timeout:2e3,afterClose:function(){$(elem).removeClass("promotion__code-tooltipped")}}),resetCopy()})},setCodeSize:function(){/iPad|iPhone|iPod/.test(navigator.userAgent)&&($(copyBtn).hide(),$(promoCodeIntrofullText).text("Promo Code"),$(promoText).css("text-align","right"))},removeCopyBtn:function(){$(promoText).each(function(){/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?$(this).attr("size",$(this).val().length+1):$(this).attr("size",$(this).val().length)})}}}(window.jQuery),(MgResponsive=MgResponsive||{}).confirmRemove=function($){"use strict";return{init:function(){$(".js-confirm-remove-item").on("click",function(event){event.preventDefault();var $this=$(this),deleteUrl=$this.attr("href")||$this.data("remove-url");MgResponsive.FancyBox.initFancyConfirm($this.data("confirm-message"),deleteUrl)})}}}(window.jQuery),MgResponsive.CookieBanner=function($){function insertBanner(){var bannerHtml=document.getElementById(cookieBannerId).innerHTML;$body.append(bannerHtml),$(cookieAgreeButton).click(function(e){var date;e.preventDefault(),Mage.Cookies.set("MG_cookiesAccepted","true",((date=new Date).setTime(date.getTime()+24*cookieLengthDays*60*60*1e3),date)),$(cookieBanner).addClass("slide-out"),window.setTimeout(function(){$(cookieBanner).remove()},500)})}var $body=$("body"),cookieLengthDays=9999,cookieBanner=".cookie-banner",cookieAgreeButton=".js-cookie-agree",cookieBannerId="js-cookie-banner";return{init:function(){!Mage.Cookies.get("MG_cookiesAccepted")&&document.getElementById(cookieBannerId)&&insertBanner()}}}(window.jQuery),(MgResponsive=MgResponsive||{}).CustomSelect=function($){"use strict";return{init:function(){this.initDropdown(".js-dropdown",".js-dropdown-label")},onDropdownClose:function(){$("body").removeClass("mobile-sortby-menu-open")},initDropdown:function(dropdownClass,dropdownLabelClass){$(dropdownClass).selectric({disableOnMobile:!1,customClass:{prefix:"sort-by"},responsive:!0,arrowButtonMarkup:'<svg class="icon icon--sortation-pagination-icon"><use xlink:href="#icon-sortation-pagination-icon" /></svg>',optionsItemBuilder:function(itemData){return'<svg class="icon icon--tick"><use xlink:href="#icon-tick" /></svg>'+itemData.text},onOpen:function(){$(".sort-by-items").removeAttr("style")},onClose:this.onDropdownClose}),$("body").on("click",dropdownLabelClass,function(){$(this).closest("div").find(".sort-by-wrapper").toggleClass("sort-by-open")})}}}(window.jQuery),(MgResponsive=MgResponsive||{}).DesktopMenu=function($,Modernizr){"use strict";function handleMenuTouch(event){!$(this).is(".expanded")&&0<$(this).children("ul").length&&(event.preventDefault(),navItem.removeClass("expanded"),$(this).addClass("expanded"))}var navItem=$("#nav li.level-top");return{init:function(){Modernizr.touch&&navItem.on("touchstart",handleMenuTouch)}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).FancyBox=function($){"use strict";function fancyAlertClose(btnClass,url){$(document).on("click",btnClass,function(){$.fancybox.close(),url&&(window.location=url)})}function fancyLightboxClose(btnClass){$(document).on("click",btnClass,function(e){e.preventDefault(),$.fancybox.close()})}var fancyDefaults={autoSize:!1,height:"auto",minHeight:0,width:320,minWidth:240,padding:20,wrapCSS:"fancybox__content",helpers:{overlay:{locked:!0}}},fancyClose='<a class="js-fancybox-button-close fancybox__close" href="#"></a>';return{init:function(){window.alert=this.initFancyAlert},initFancyAlert:function(msg){var fancySettings={wrapCSS:"fancybox__content fancybox__content--alert",content:"<p>"+Translator.translate(msg)+'</p><div class="fancybox__button-wrapper"><button class="js-fancybox-button-close button button--alt button--alert" type="button">'+Translator.translate("Ok")+"</button></div>"};return $.fancybox($.extend({},fancyDefaults,fancySettings)),fancyAlertClose(".js-fancybox-button-close"),!1},initFancyConfirm:function(msg,url){fancyAlertClose(".js-fancybox-button-close"),fancyAlertClose(".js-fancybox-button-close-confirm",url);var fancySettings={wrapCSS:"fancybox__content fancybox__content--confirm",content:"<p>"+Translator.translate(msg)+'</p><div class="fancybox__button-wrapper"><button class="js-fancybox-button-close button button--alt button--alert" type="button">'+Translator.translate("Cancel")+'</button><button class="js-fancybox-button-close-confirm button button--alt button--alert" type="button">'+Translator.translate("Ok")+"</button></div>"};return $.fancybox($.extend({},fancyDefaults,fancySettings)),!1},initFancyConfirmCallback:function(msg,callback){var $content=$("<p>"+Translator.translate(msg)+'</p><div class="fancybox__button-wrapper"><button class="js-fancybox-button-close button button--alt button--alert" type="button">'+Translator.translate("Cancel")+'</button><button class="js-fancybox-button-close-confirm button button--alt button--alert" type="button">'+Translator.translate("Ok")+"</button></div>"),fancySettings={wrapCSS:"fancybox__content fancybox__content--confirm",content:$content};$.fancybox($.extend({},fancyDefaults,fancySettings));return $content.find(".js-fancybox-button-close").on("click",function(){$.fancybox.close()}),$content.find(".js-fancybox-button-close-confirm").on("click",function(){$.fancybox.close(),callback&&"function"==typeof callback&&callback()}),!1},initFancyRemoveProduct:function(msg,sku,callback){fancyAlertClose(".js-fancybox-button-close");var fancySettings={wrapCSS:"fancybox__content fancybox__content--confirm",modal:!0,content:"<p>"+Translator.translate(msg)+'</p><div class="fancybox__button-wrapper"><button class="js-fancybox-button-close button button--alt button--alert" type="button">'+Translator.translate("Cancel")+'</button><button class="js-fancybox-button-close-confirm button button--alt button--alert" type="button">'+Translator.translate("Ok")+"</button></div>"};return $.fancybox($.extend({},fancyDefaults,fancySettings)),$(document).on("click",".js-fancybox-button-close-confirm",function(){$.fancybox.close(),$(window).trigger("minibag:update"),"undefined"!=typeof _riTrack&&_riTrack.trackRemoveProductFromCart(sku),callback&&"function"==typeof callback&&callback()}),!1},initFancyLightbox:function(msg){fancyLightboxClose(".js-fancybox-button-close");var fancySettings={padding:25,width:"auto",wrapCSS:"fancybox__content fancybox__content--lightbox",content:msg+fancyClose};$.fancybox($.extend({},fancyDefaults,fancySettings))},initFancyStoreSwitch:function(msg){fancyLightboxClose(".js-fancybox-button-close");var fancySettings={wrapCSS:"fancybox__content fancybox__content--lightbox fancybox__content--store-switch",content:msg+fancyClose,topRatio:0,width:"auto",maxWidth:570,margin:15,afterClose:function(){Mage.Cookies.set("storeSwitcherPopup","1")}};$.fancybox($.extend({},fancyDefaults,fancySettings))}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).Footer=function($){"use strict";return{init:function(){function _trigger(matches,evt){matches?self.activateAccordions.call(self,evt):self.destroyAccordions.call(self,evt)}var self=this,MQ=window.matchMedia("(max-width: 799px)");this.$accordions=$("footer .js-footer-accordion"),this.$accordionContent=$("footer .js-footer-accordion-content"),this.$newsletterInput=$("footer input.js-newsletter-input"),this.$accordions.accordion({active:!1,collapsible:!0,animate:{easing:"easeInOutQuint",duration:500},heightStyle:"content",icons:!1}),MQ.addListener(function(evt){_trigger(evt.matches,evt)}),_trigger(MQ.matches)},activateAccordions:function(){this.$accordionContent.css({display:"none"}),this.$accordions.accordion("enable").accordion("option","active",!1),this.$newsletterInput.attr("placeholder","email address")},destroyAccordions:function(evt){var self=this;self.$accordions.accordion("disable"),evt?self.$accordionContent.css({display:"inline-block"}):setTimeout(function(){self.$accordionContent.css({display:"inline-block"})},250)}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).FormValidation=function($){"use strict";return{init:function(){Validation.addAllThese([["validate-telephone","Please enter a valid number",function(v){return 0===v.length||6<=v.length}],["missguided-telephone-number-syntax","Please enter a valid number",function(v){return/^(.*?\S){6,}/.test(v)}],["validate-password","Enter 7 or more characters",function(v){var pass=v.strip();return!(0<pass.length&&pass.length<7)}]]),$(".my-account-wrapper").length&&$("#form-validate").on("submit",function(){var $submitButton=$(this).find("button[type=submit]");dataForm.validator.validate()&&!$submitButton.prop("disabled")&&($submitButton.prop("disabled",!0),$submitButton.addClass("disabled")),window.setTimeout(function(){$submitButton.prop("disabled",!1),$submitButton.removeClass("disabled")},5e3)})}}}(window.jQuery),(MgResponsive=MgResponsive||"").GeoIpTooltip=function($){"use strict";var tooltipHtml;return{init:function(){"undefined"!=typeof MgResponsiveConfig&&MgResponsiveConfig.storeRegion&&MgResponsiveConfig.currencyDescription&&1==(1&Mage.Cookies.get("mg_geoip_rule_flags"))&&(tooltipHtml="<p><strong>"+Translator.translate("Select the country code above to switch location/currency")+'</strong></p><span class="tooltip__current-store--name">'+MgResponsiveConfig.storeRegion+" "+Translator.translate("site")+'</span><span class="tooltip__current-store--currency">'+MgResponsiveConfig.currencyDescription+"</span>",this.renderTooltip())},renderTooltip:function(){MgResponsive.Tooltip.tip($(".store-currency-switcher"),tooltipHtml,{timeout:7e3,arrowPosition:"top-right",afterClose:this.setCookie})},setCookie:function(){Mage.Cookies.set("mg_geoip_rule_flags",-2&Mage.Cookies.get("mg_geoip_rule_flags"))}}}(window.jQuery),(MgResponsive=MgResponsive||"").GoogleTags=function($,window){"use strict";return{init:function(){function noop(){}function pushPromoClickEvent(data,callBack){dataLayer.push({event:data.event,ecommerce:{promoClick:{promotions:[{position:data.position,name:data.name,creative:data.creative||"",id:data.type}]}},promoClickedURL:[data.creative],eventCallback:callBack||noop})}function pushPromoData(isModal){var promotionsArray=[];$(".promotion").each(function(ii,el){var $el=$(el),type=isModal?"promoModal":"promoPage",promotionsObject={position:"slot_"+(ii+1),name:$el.find(".promotion__title").text(),creative:$el.find(".promotion__link").attr("href")||"",id:type};promotionsArray.push(promotionsObject)}),dataLayer.push({ecommerce:{promoView:{promotions:[{promotions:promotionsArray}]}}})}window.dataLayer=window.dataLayer||[],$(window).on("minibag:update",function(){window.googleAnalyticsUniversalCart.subscribeProductsUpdateInCart(),window.googleAnalyticsUniversalCart.parseAddToCartCookies(),window.googleAnalyticsUniversalCart.parseRemoveFromCartCookies()}),$(".currency-items").click(function(){window.dataLayer.push({event:"ChangeCurrency",currency:this.getAttribute("value")})}),$(".store-switch__link").click(function(){window.dataLayer.push({event:"ChangeCountry",country:this.getInnerText()})}),$(".level0 > a").click(function(e){var innerText="";innerText="Home"==this.getAttribute("title")?this.getAttribute("title"):this.getInnerText(),window.dataLayer.push({event:"Navigation",nav_item:innerText})}),$(".level1 > a").click(function(){window.dataLayer.push({event:"Navigation",nav_item:this.getInnerText()})}),$(".level2 > a").click(function(){window.dataLayer.push({event:"Navigation",nav_item:this.getInnerText()})}),$(".crumb > a").click(function(){window.dataLayer.push({event:"Breadcrumb",breadcrumb_item:this.getInnerText()})}),$(".product-options__configure-option--product-colour .colours-list__swatch a").on("click",function(){window.dataLayer.push({event:"product_colour_click",colour:$(this).children().first().text()})}),$("#IG-Home-ViewGallery").on("click",function(){window.dataLayer.push({event:"home_view_more_babes"})}),$("#IG-FollowUs").on("click",function(){window.dataLayer.push({event:"IG_Follow_US"})}),$(document).on("click",".button__category-wishlist",function(){window.dataLayer.push({event:"wishlist_icon_clicked_category"})}),pushPromoData(!1),$(document).on("open",".modal",function(){pushPromoData(!0)}),$(document).on("copiedToClipboard",".js-copy-btn",function(e,data){var $this=$(this),$promo=$this.parents(".promotion"),ii=$(".promotion").index($promo),isModal=$this.parents(".modal").length?"promoModal_CopyCode":"promoPage_CopyCode";pushPromoClickEvent({position:"slot_"+(ii+1),name:$promo.find(".promotion__title").text(),creative:$promo.find(".promotion__link").attr("href"),type:isModal,event:"PromotionClick"})}),$(document).on("click",".promotion__link",function(e){e.preventDefault();var $this=$(this),$promo=$this.parents(".promotion"),ii=$(".promotion").index($promo),isModal=$this.parents(".modal").length?"promoModal_ClickLink":"promoPage_ClickLink";pushPromoClickEvent({position:"slot_"+(ii+1),name:$promo.find(".promotion__title").text(),creative:$promo.find(".promotion__link").attr("href"),type:isModal,event:"PromotionClick"},function(){window.location=$this.attr("href")})}),$(document).on("click",".event__link-social-media",function(){dataLayer.push({event:"Social_Media",social_media_type:$(this).attr("data-link-social-media")})})}}}(window.jQuery,window),jQuery(document).on("click",".js-menu-account-links-placeholder li > a",function(){window.dataLayer.push({event:"Navigation",nav_item:this.innerText})}),(MgResponsive=MgResponsive||{}).Header=function($){"use strict";function isDesktop(){return window.matchMedia("(min-width: 1025px)").matches}function isHeaderAccountEnabled(){return window.experiments&&window.experiments.headerAccount&&isDesktop()}function setupHeaderAccount(){$burgerNavContainerElement.css({display:"none"})}function setSearchTermCookie(){if(!window.Mage.Cookies.get(searchTermCookieName)){var searchTerm=$("#search").val();window.Mage.Cookies.set(searchTermCookieName,searchTerm)}}var $burgerNavContainerElement,searchTermCookieName="mg_search_term";return{init:function(){var maxAttempts,attempts,poller;$burgerNavContainerElement=$(".site-header__element--menu"),maxAttempts=20,attempts=0,poller=null,function poll(testFunction,callback){if(attempts+=1,testFunction())return window.clearTimeout(poller),callback();attempts<=maxAttempts&&(poller=window.setTimeout(function(){poll(testFunction,callback)},200))}(isHeaderAccountEnabled,setupHeaderAccount),window.addEventListener("resize",_.debounce(function(){isHeaderAccountEnabled()&&isDesktop()&&setupHeaderAccount(),isHeaderAccountEnabled()&&isDesktop()||$burgerNavContainerElement.css({display:"unset"})},100)),$("body").on("submit","#search_mini_form",function(){setSearchTermCookie()}),$("body").on("keydown","#search",function(e){13===e.keyCode&&setSearchTermCookie()}),$("body").on("click",".search-autocomplete__item",function(){setSearchTermCookie()}),window.Mage.Cookies.clear(searchTermCookieName)}}}(window.jQuery),(MgResponsive=MgResponsive||{}).MgAffiliate=function(){"use strict";function getRequestParameter(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var url=window.location.href,results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(url);return null==results?null:results[1]}return{init:function(){!function(){for(var mgAffiliateTrackingCodes=mgAft,mgAffiliatePrefix=mgPre,ii=0;ii<mgAffiliateTrackingCodes.length;ii++){var code=mgAffiliateTrackingCodes[ii],value=getRequestParameter(code),fCode=mgAffiliatePrefix+code;null!=value&&Mage.Cookies.set(fCode,value)}}()}}}(window.jQuery),(MgResponsive=MgResponsive||{}).MiniBag=function($,Modernizr){"use strict";function bindMiniBasketDisplay(){var $bag;Modernizr.touch?$("html").on("click",".mini-bag__link",function(e){if(e.preventDefault(),minibagHasItems()||tooltipActive||!emptyBagHtml){var minibagIsVisible=$("#js-shopping-bag").hasClass("active");Modernizr.mq("screen and (min-width: 1025px)")&&minibagIsVisible||Modernizr.mq("screen and (max-width: 1024px)")&&minibagHasItems()?window.location=this.href:($("#js-shopping-bag").addClass("active"),setTimeout(function(){$("#js-shopping-bag").removeClass("active")},6e3))}else showTooltip()}):(($bag=$("#js-shopping-bag")).unbind("mouseenter mouseleave"),$bag.hover(function(){minibagHasItems()||tooltipActive||!emptyBagHtml?$bag.addClass("active"):showTooltip()},function(){$bag.removeClass("active")}))}function showTooltip(){MgResponsive.Tooltip.tip($("#js-shopping-bag"),emptyBagHtml,{htmlClass:"tooltip__bag-empty",closeBtn:!1,afterClose:function(){$(document).off("mouseleave","#js-shopping-bag"),tooltipActive=!1},afterOpen:function(){$(document).on("mouseleave","#js-shopping-bag",function(){MgResponsive.Tooltip.remove($(".tooltip__bag-empty"))}),$(".tooltip__bag-empty").on("click",function(){MgResponsive.Tooltip.remove($(".tooltip__bag-empty"))}),$(document).on("click touchend",function(e){if(tooltipActive){var $container=$("#js-shopping-bag");$container.is(e.target)||$container.has(e.target).length||MgResponsive.Tooltip.remove($(".tooltip__bag-empty"))}}),$(".mini-bag__link").on("click",function(e){e.preventDefault()}),tooltipActive=!0}})}function minibagHasItems(){return!!$("#js-shopping-bag").find(".mini-bag__link--has-items").length}var emptyBagHtml,tooltipActive=!1,postRequest=!1,productId=0;return{init:function(){var self=this;$("body").on("touchstart click","#js-shopping-bag .btn-remove",function(e){var $this=$(this),url=$this.data("url"),sku=$this.data("sku");MgResponsive.FancyBox.initFancyRemoveProduct("Are you sure you would like to remove this item from the shopping bag?",sku,function(){window.location=url})}),bindMiniBasketDisplay(),emptyBagHtml=$("#empty-bag__tooltip-text").html(),document.observe("mxvarnish:csiBlocksInserted",function(){self.initMiniBagCarousel(),bindMiniBasketDisplay()})},bindAddToCartListener:function(){var that=this;$(document).on("click",".button--add-to-bag",function(){if(!postRequest){postRequest=!0;var form=$(this).closest("form"),valid=!0,$addToBasketButton=$(this),addUrl=$addToBasketButton.data("url");if(productId=form.find('input[name="product"]').val(),$('select[name^="super_attribute"]',form).each(function(){$(this).val()||(valid=!1)}),!valid)return alert($("#select-size-copy").text()),postRequest=!1;$addToBasketButton.addClass("disabled-add-to-cart").attr("disabled",!0).html($("#adding-to-bag-copy").text()),$addToBasketButton.addClass("button--add-to-bag--active"),$.post(addUrl,form.serialize(),function(data){try{var jsonObject=$.parseJSON(data);alert(jsonObject.messages),$addToBasketButton.html($("#button-title-copy").text())}catch(e){if(""==(data=data.trim()))return alert($("#adding-to-bag-problem-copy").text()),void setTimeout(function(){location.reload(!0)},3e3);that.refreshBasket(data,!0),$addToBasketButton.html($("#add-to-bag-success").text()),setTimeout(function(){$addToBasketButton.html($("#button-title-copy").text()),$addToBasketButton.removeClass("button--add-to-bag--active")},2e3)}postRequest=!1,$addToBasketButton.removeAttr("disabled").removeClass("disabled-add-to-cart")}).error(function(){var unicornErrMsg=$("#unicorn-add-to-bag-problem-copy").text(),defaultErrMsg=$("#adding-to-bag-problem-copy").text(),delay=unicornErrMsg?5e3:3e3;alert(unicornErrMsg||defaultErrMsg),setTimeout(function(){location.reload(!0)},delay)})}})},refreshBasket:function(html,scrollActive){if(html){var $bag=$("#js-shopping-bag"),$html=$(html.trim());$bag.replaceWith($html),Modernizr.mq("screen and (min-width: 767px)")&&($html.addClass("active"),setTimeout(function(){$("#js-shopping-bag").removeClass("active")},3e3)),bindMiniBasketDisplay();var itemTotal=$html.find(".mini-bag__item-qty").text();itemTotal?($(".header__mobile-bag-qty").text(itemTotal),$(".header__mobile-bag").addClass("mini-bag__link--has-items")):$(".header__mobile-bag").removeClass("mini-bag__link--has-items"),this.initMiniBagCarousel(),1023<$(window).width()&&scrollActive&&$("html, body").animate({scrollTop:0},"slow"),function(){function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:null};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}"function"!=typeof window.CustomEvent&&(CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent)}();var addToBagEvent=new CustomEvent("minibag:update",{detail:{productId:productId}});window.dispatchEvent(addToBagEvent)}},initMiniBagCarousel:function(){2<$(".mini-bag__item-list").children(".item").length&&($("#js-mini-bag__items .jcarousel").jcarousel({vertical:!0}),$(".ui-carousel__nav--prev").jcarouselControl({target:"-=1"}),$(".ui-carousel__nav--next").jcarouselControl({target:"+=1"}))}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).Modal=function($){"use strict";var self,modalTimeout,$modalOverlay=$(".js-modal-overlay"),$modalContent=$(".js-modal-wrap .modal"),$modalInner=($(".site-header").outerHeight(),$(".js-modal-wrap__inner"));return{init:function(content,options){this.options={modalClass:null,closeBtn:!0,overlayClose:!0,showDuration:null,closeBtnOutside:!1,closeOnEscapeKey:!0,verticalAlign:!1,beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}},this.options=$.extend({},this.options,options),this.content=content,(self=this)._parseContent(),this._bindEventListeners(),this.options.beforeOpen(),this._openModal()},_parseContent:function(){var content,modalClass;content=this.content[0].tagName||this.content[0].nodeName?this.content.clone():this.content,modalClass=this.options.modalClass?"modal "+this.options.modalClass:"modal",$modalContent.removeClass().addClass(modalClass).html(content),this.options.verticalAlign?$modalInner.addClass("modal-centred"):$modalInner.removeClass("modal-centred"),(this.options.closeBtn||this.options.closeBtnOutside)&&this._appendCloseButtons()},_appendCloseButtons:function(){var inner='<a href="#" class="modal__closeInner js-modal__close"><span>'+Translator.translate("Close")+"</span></a>",outer='<a href="#" class="modal__close js-modal__close"><span>'+Translator.translate("Close")+"</span></a>";if(!this.options.closeBtn||this.options.closeBtnOutside)return this.options.closeBtn&&this.options.closeBtnOutside?($modalInner.append(inner),void $modalContent.append(outer)):void $modalInner.append(inner);$modalContent.append(outer)},_bindEventListeners:function(){this.options.overlayClose&&$modalOverlay.on("click touchstart",function(e){e.preventDefault(),self.options.beforeClose(),self._closeModal()}),$modalContent.on("click touchstart",".js-modal__close",function(e){e.preventDefault(),self.options.beforeClose(),self._closeModal()}),$modalInner.on("click touchstart",".js-modal__close",function(e){e.preventDefault(),self.options.beforeClose(),self._closeModal()}),this.options.closeOnEscapeKey&&$(document).on("keyup.Modal",function(e){27===e.keyCode&&(self.options.beforeClose(),self._closeModal())})},_unbindEventListeners:function(){$($modalContent).off("click"),$($modalOverlay).off("click"),$(document).off("keyup.Modal"),$(window).off("resize.ModalReposition")},_openModal:function(){$(window).scrollTop(0),$("html").addClass("js-modal--open"),this.options.afterOpen(),this._positionModal(),this.options.showDuration&&(modalTimeout=setTimeout(function(){self.options.beforeClose(),self._closeModal()},this.options.showDuration)),$(window).on("resize.ModalReposition",_.debounce(self._positionModal,300))},_closeModal:function(){$("html").removeClass("js-modal--open"),$modalContent.empty(),$(".modal__closeInner").remove(),this.options.afterClose(),this._unbindEventListeners(),clearTimeout(modalTimeout)},_positionModal:function(){var cookieContainerHeight=$(".cookie-banner").outerHeight(),headerContainerHeight=$(".site-header").outerHeight(),headerHeight=cookieContainerHeight+headerContainerHeight,$modalWrap=$(".js-modal-wrap"),cookieBannerPresent=Mage.Cookies.get("MG_cookiesAccepted");$(".cookie-banner").addClass("cookie-banner--modal"),$(".site-header").addClass("site-header--modal"),$(window).width()<768?$(".js-modal--open")[0]&&("true"!==cookieBannerPresent?($(".js-modal-overlay").css("top",headerHeight),$modalWrap.css("padding-top",headerHeight)):($(".js-modal-overlay").css("top",headerContainerHeight),$modalWrap.css("padding-top",headerContainerHeight))):("true"!==cookieBannerPresent?$modalWrap.css("padding-top",headerHeight):$modalWrap.css("padding-top",headerContainerHeight),$(".js-modal-overlay").css("top","0"))}}}(window.jQuery),(MgResponsive=MgResponsive||{}).NewsletterLightbox=function($){"use strict";var $overlay,$html=$("html"),$body=$("body");return{init:function(){this.triggerNewsletterLightbox(),this.prependEnvelope()},triggerNewsletterLightbox:function(){var that=this,$content=$("#js-newsletter-lightbox").html();$overlay=$('<div class="newsletter-overlay-fixed"><div class="newsletter-overlay-content">'+$content+"</div></div>"),$body.on("click",".js-new-signup-link > a",function(event){event.preventDefault(),that.openLightbox(),MgEmailAutoComplete()}),$body.on("click",".js-newsletter-overlay-close",function(event){event.preventDefault(),$html.removeClass("fancybox-lock fancybox-margin"),$overlay.remove()})},registerEmailAutoComplete:function(){window.MgResponsive&&window.MgEmailAutoComplete&&window.graphqlUrl&&window.graphqlKey&&MgEmailAutoComplete(window.graphqlUrl,window.graphqlKey)},openLightbox:function(){$html.addClass("fancybox-lock fancybox-margin"),$overlay.appendTo("body");new MgResponsive.NewsletterSignup.NewsletterSignup(".newsletter-overlay-content .js-newsletter-validate",".newsletter-overlay-content .js-newsletter-input",".newsletter-overlay-content .js-newsletter-result",".newsletter-overlay-content .js-newsletter-button",".newsletter-overlay-content .js-newsletter-terms");this.registerEmailAutoComplete()},prependEnvelope:function(){var $envelopeHtml=$('<svg class="icon icon--envelope"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-envelope"></use></svg>');$(".js-new-signup-link-mobile").prepend($envelopeHtml)}}}(window.jQuery),(MgResponsive=MgResponsive||"").NewsletterSignup=function($){"use strict";function NewsletterSignupObserver(delegate){this.delegate,this.__construct=function(delegate){this.delegate=delegate,this.setupEvents()},this.setupEvents=function(){this.delegate.input_element.focus($.proxy(this.handleFocus,this)),this.delegate.input_element.blur($.proxy(this.handleBlur,this)),this.delegate.input_element.change($.proxy(this.handleChange,this)),this.delegate.form_element.submit($.proxy(this.handleSubmit,this))},this.handleFocus=function(){this.delegate.hideResult(),this.delegate.removeIcon()},this.handleBlur=function(){this.delegate.hideResult(),this.delegate.removeIcon()},this.handleChange=function(){this.delegate.hideResult(),this.delegate.removeIcon(),this.delegate.setEmail($.trim(this.delegate.getInputValue()))},this.handleAjaxResponse=function(response){if(void 0===response.messages)this.handleAjaxError(response);else{this.delegate.setMessage(response.messages+"<br />");window.location.href;dataLayer.push({event:"Newsletter",action:"subscribed"}),response.error?this.delegate.changeIcon(!1):($(".js-newsletter-input").attr("value",""),this.delegate.changeIcon(!0),this.delegate.replaceNewsletterWithMessage(!0))}"string"==typeof response.javascript&&$(response.javascript).prependTo("body")},this.handleAjaxError=function(response){this.delegate.setMessage(Translator.translate("Sorry, there was a problem with your subscription. Please try again later.")),this.delegate.changeIcon(!1),dataLayer.push({event:"Newsletter",action:"error"})},this.handleSubmit=function(event){if(!this.delegate.getTerms())return this.delegate.setMessage(Translator.translate("Please accept the terms & conditions.")),this.delegate.changeIcon(!1),!1;var area_of_site,territory,ajaxUrl;this.delegate.getEmail()?(this.delegate.showAjaxSpinner(),area_of_site=this.delegate.getAreaOfSite(),territory=$("#territory").val(),ajaxUrl=this.delegate.form_element.hasClass("private-sale-box")?this.delegate.form_element.attr("action"):MgResponsiveConfig.storeBaseUrl+"ajax/subscriber/new",$.ajax({type:"POST",url:ajaxUrl,data:"email="+encodeURIComponent(this.delegate.getEmail())+"&area_of_site="+encodeURIComponent(area_of_site)+"&territory="+encodeURIComponent(territory),dataType:"json",success:$.proxy(this.handleAjaxResponse,this),error:$.proxy(this.handleAjaxError,this)})):(this.delegate.setMessage(Translator.translate("Please enter an email address.")),this.delegate.changeIcon(!1));return!1},this.__construct(delegate)}function NewsletterSignup(form_selector,input_selector,result_selector,button_selector,terms_selector,hide_newsletter){this.form_element=null,this.input_element=null,this.result_element=null,this.button_element=null,this.terms_element=null,this.hide_newsletter=null,this.observer=null,this.__construct=function(form_selector,input_selector,result_selector,button_selector,terms_selector,hide_newsletter){this.form_element=$(form_selector),this.input_element=$(input_selector),this.result_element=$(result_selector),this.button_element=$(button_selector),this.terms_element=$(terms_selector),this.hide_newsletter=hide_newsletter,this.observer=new NewsletterSignupObserver(this)},this.hideResult=function(){this.result_element.fadeOut("slow"),this.input_element.removeClass("validation-failed"),this.button_element.html('<svg class="icon icon--arrow-right"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-arrow-right"></use></svg>')},this.getInputValue=function(){return this.input_element.val()},this.hideForm=function(){this.form_element.fadeOut("slow")},this.setEmail=function(string){this.input_element.attr("value",string)},this.getEmail=function(){return this.input_element.val()},this.getAreaOfSite=function(){return this.input_element.parents("form").find('input[name="area_of_site"]').length?this.input_element.parents("form").find('input[name="area_of_site"]').val():0<$(this.delegate.button_element).parents(".footer").length?$("#area_of_site_footer").val():$("#area_of_site_header").val()},this.getTerms=function(){return!this.terms_element[0]||this.terms_element.is(":checked")},this.setMessage=function(message){this.result_element.html(message),this.result_element.fadeIn("slow"),this.input_element.addClass("validation-failed")},this.removeIcon=function(){this.result_element.removeClass("result-success result-error")},this.changeIcon=function(result){this.button_element.attr("disabled",!1),result?(this.result_element.addClass("result-success"),this.button_element.html('<svg class="icon icon--tick"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-tick"></use></svg>')):(this.result_element.addClass("result-error"),this.button_element.html('<svg class="icon icon--cross"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-cross"></use></svg>'))},this.replaceNewsletterWithMessage=function(result){if(this.hide_newsletter&&result){var successMsg=Translator.translate("Thank you for registering");this.result_element.remove(),this.form_element.html('<h3 class="message-success">'+successMsg+"</h3>")}},this.showAjaxSpinner=function(){this.button_element.attr("disabled",!0),this.button_element.html('<div class="spinner"></div>')},this.__construct(form_selector,input_selector,result_selector,button_selector,terms_selector,hide_newsletter)}return{init:function(){new NewsletterSignup(".footer .js-newsletter-validate",".footer .js-newsletter-input",".footer .js-newsletter-result",".footer .js-newsletter-button",".footer .js-newsletter-terms");if($(".cms-cyber-weekend")[0])new NewsletterSignup(".js-cyber-weekend-newsletter",".js-cyber-weekend-newsletter-input",".js-cyber-weekend-newsletter-result",".js-cyber-weekend-newsletter-button",".js-cyber-weekend-newsletter-terms");new NewsletterSignup("#private-sale-newsletter .js-newsletter-validate","#private-sale-newsletter .js-newsletter-input","#private-sale-newsletter .js-newsletter-result","#private-sale-newsletter .js-newsletter-button","#private-sale-newsletter .js-newsletter-terms",!0)},NewsletterSignup:NewsletterSignup}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).NewsletterUnsubscribe=function($){"use strict";return{init:function(){$('.js-newsletter-unsubscribe-form select[name="UNSUBSCRIBE_REASON"]').change(function(){"other"===$(this).val()?$(".js-newsletter-unsubscribe__textarea").show():$(".js-newsletter-unsubscribe__textarea").hide()})}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).pathView=function(){"use strict";return{getPathname:function(url){var _a=document.createElement("a");return _a.href=url,_a.pathname},generateCatalogListName:function(urlMethod){return"Catalog Page - "+this.getPathname(urlMethod).slice(1).replace("/"," ")},getPage:function(pageType,urlMethod){switch(pageType){case"catalogsearch_result_index":return"Search Results Page";case"checkout_securecheckout_index":return"Checkout Page";case"catalog_product_view":return"Related Products Page";case"catalog_category_view":return this.generateCatalogListName(urlMethod);case"wishlist_index_index":return"Wishlist Page";case"cms_index_index":return"Home Page";case"cms_page_view":return"Static Page";default:return"PDP Land"}},showCurOrPrevPage:function(){return"catalog_product_view"==localStorage.getItem("pageType")?this.getPrevPageType():this.getCurrentPageType()},getPrevPageType:function(){var prevPageType=localStorage.getItem("prevPageType");return this.getPage(prevPageType,document.referrer)},getCurrentPageType:function(){var currentPageType=localStorage.getItem("pageType");return this.getPage(currentPageType,window.location.href)},isClickThrough:function(){return!!document.referrer}}}((window.jQuery,Modernizr)),(MgResponsive=MgResponsive||{}).ProductSocialShare=function($){"use strict";var self,devices_android=navigator.userAgent.match(/Android/i),devices_ios=navigator.userAgent.match(/iPhone|iPad|iPod/i);return{init:function(){this.initGooglePlusShare(),this.initPintrestShare(),this.initSocialShare(),this.initSmsShare(),this.initTwitterShare(),this.initFacebookShare(),self=this,document.fire(":desktopSocialLinksAdded"),window.desktopSocialLinksAdded=!0},initFacebookShare:function(){var fbShareBtn=$(".js-product-share__link--fb"),facebookURL="https://www.facebook.com/sharer/sharer.php?u="+$(location).attr("href");fbShareBtn.each(function(){$(this).attr("href",facebookURL)})},initGooglePlusShare:function(){$(".js-product-share__link--gplus").on("click",function(e){e.preventDefault(),popWin($(this).attr("href"),"googleplusShare","width=600,height=600,resizable=yes,scrollbars=yes")})},initPintrestShare:function(){var pinterestShareBtn=$(".js-product-share__link--pt"),pinProductDescription="description="+$('meta[property="og:title"]').attr("content"),pinProductShareUrlMobile="//www.pinterest.com/pin/create/button/?"+("url="+$('meta[property="og:url"]').attr("content"))+"&"+pinProductDescription;pinterestShareBtn.attr("href",pinProductShareUrlMobile)},initSocialShare:function(){$(window).on("load resize",_.debounce(function(){window.innerWidth<768?($(".product-images__carousel, .jcarousel").append('<a href="" class="js-social-share"><svg class="icon icon--share"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-share"></use></svg></a>'),document.fire(":shareIconsBuilt"),window.shareIconsBuilt=!0,$(".js-social-share").on("click",function(e){e.preventDefault(),MgResponsive.Modal.init($(".modal__socialsharing"),{modalClass:"modal--share",closeBtn:!1,closeBtnOutside:!0,beforeOpen:function(){$(".cookie-banner").remove(),$("body").trigger("mg-cookie-banner-removed")},afterOpen:function(){self.initFacebookShare(),MgResponsiveCatalog.DeepLink.initDeepLink(),$(".modal__socialsharing.col1-set")&&$(".modal__socialsharing.col1-set").parent(".modal--share").addClass("one-column")}}),$(".modal-wrap").addClass("modal--social")})):$(".js-social-share").remove()},300))},initSmsShare:function(){var smsShareBtn,smsMsg,smsLink;smsShareBtn=$(".js-product-share__link--sms"),smsLink="sms:&body="+(smsMsg=(smsMsg=Translator.translate("NEED this from Missguided")).replace(/\s/g,"%20"))+". ",devices_android||devices_ios?(devices_android&&(smsLink="sms:?body="+smsMsg+". "),smsLink+=$(location).attr("href"),smsShareBtn.attr("href",smsLink)):($(".modal__container--whatsapp").hide(),$(".modal__container--sms").hide())},initTwitterShare:function(){var twShareBtn,twitterMsg,twitterUrl;twShareBtn=$(".js-product-share__link--tw"),twitterMsg=(twitterMsg=Translator.translate("Obsessed with this @Missguided look")).replace(/\s/g,"%20"),twitterUrl="https://twitter.com/intent/tweet?text=%23"+twitterMsg+"%3A&url=",twitterUrl+=$(location).attr("href")+"&amp;related=missguided",twShareBtn.each(function(){$(this).attr("href",twitterUrl)})}}}(window.jQuery),(MgResponsive=MgResponsive||{}).promoBanners=function($){"use strict";return{init:function(){function changeBanner(){var currentBanner=$(".js-promo--is-visible"),nextBanner=currentBanner.next().length?currentBanner.next():currentBanner.parent().children(":first");currentBanner.removeClass("js-promo--is-visible").fadeOut(function(){nextBanner.fadeIn().addClass("js-promo--is-visible")})}var interval,banners=$(".promo");$(window).on("load resize",function(){$(window).width()<768&&1<banners.length?(clearInterval(interval),interval=setInterval(changeBanner,3e3)):(clearInterval(interval),banners.css("display",""))})}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).Promotions=function($){"use strict";return{init:function(){this.initAccordion(),this.initPromotionsModal()},initAccordion:function(){$(document).on("click",".js-terms-toggle",function(e){function changeArrow(activeClass){$(".js-terms-toggle").each(function(){var $icon=$(this).find(".icon");$(this).closest(".promotion").hasClass(activeClass)?($icon.remove(),$(this).append('<svg class="icon icon--arrow-down"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-arrow-down"></use></svg></svg>')):($icon.remove(),$(this).append('<svg class="icon icon--arrow-right"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-arrow-right"></use></svg></svg>'))})}e.preventDefault();var activeClass="promotion__show-terms",$parent=$(this).closest(".promotion");$parent.hasClass(activeClass)?$parent.removeClass(activeClass):($(".promotion").removeClass(activeClass),$parent.addClass(activeClass)),changeArrow(activeClass)})},initPromotionsModal:function(){var cachedAJAX=null;$(".js-promotion-modal").each(function(){$(this).on("click",function(e){e.preventDefault(),cachedAJAX=(cachedAJAX||jQuery.ajax({type:"POST",url:"/cmspromotions/ajax/index"})).done(function(html){MgResponsive.Modal.init(html,{modalClass:"modal__promotions",afterOpen:function(){$(".modal").trigger("open")}})}).fail(function(){MgResponsive.Modal.init("I'm sorry this content cannot be displayed.",{modalClass:"modal__promotions"})})})})}}}(window.jQuery),(MgResponsive=MgResponsive||{}).ScrollToTop=function($){"use strict";var $backToTopLink=$(".back-to-top__link"),debouncedLoad=_.debounce(function(target){target.matches(".products-grid img")&&Waypoint.refreshAll()});return{init:function(){$("body.catalog-category-view .products-grid__item:eq(3)").length&&(this.showBackToTop(),this.scrollBackToTop(),document.body.addEventListener("load",function(evt){debouncedLoad(evt.target)},!0))},showBackToTop:function(){new Waypoint({element:$(".products-grid__item:eq(3)")[0],handler:function(direction){"down"===direction?$backToTopLink.addClass("back-to-top__link--show"):$backToTopLink.removeClass("back-to-top__link--show")}}),new Waypoint({element:$(".footer-container"),handler:function(direction){"down"===direction?$backToTopLink.removeClass("back-to-top__link--show"):$backToTopLink.addClass("back-to-top__link--show")},offset:"100%"})},scrollBackToTop:function(){$(".back-to-top__link").on("click",function(){$("html, body").animate({scrollTop:0},400)})}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).Search=function($){"use strict";function isDropdownActive(){return $searchDropdown.hasClass(dropdownActiveClass)}function hideDropdown(){$searchHandle.removeClass(handleActiveClass),$searchDropdown.removeClass(dropdownActiveClass),$siteHeader.removeClass($siteActiveClass),$(".cookie-banner").css("display","block"),$backgroundOverlay.fadeOut(animationSpeed),searchInputElm.blur(),$exposedSearch&&($exposedSearch.removeClass("exposed-search--disappear"),showExposedSearch(),$body.removeClass($bodyExposedSearchHiddenClass))}function showDropdown(){$searchHandle.addClass(handleActiveClass),$searchDropdown.addClass(dropdownActiveClass),$siteHeader.addClass($siteActiveClass),$(".cookie-banner").css("display","none"),$backgroundOverlay.fadeIn(animationSpeed),searchInputElm.focus(),$("#search").val($("#search").val()),$exposedSearch&&($body.addClass($bodyExposedSearchHiddenClass),$exposedSearch.addClass("exposed-search--disappear"))}function hideHeader(){$searchResultsHeader.css({visibility:"hidden"})}function showHeader(){$searchResultsHeader.css({visibility:"visible"})}function isExposedSearchHidden(){return $exposedSearch.hasClass($exposedSearchHiddenClass)}function showExposedSearch(){$exposedSearch.removeClass($exposedSearchHiddenClass),$searchHandle.css({opacity:"0"})}function hideExposedSearch(){$exposedSearch.addClass($exposedSearchHiddenClass),$searchHandle.css({opacity:"1"})}function usePolling(testFunction,callback,maxAttempts){var attempts=0,poller=null;!function poll(testFunction,callback){if(attempts+=1,testFunction())return window.clearTimeout(poller),callback();attempts<=maxAttempts&&(poller=window.setTimeout(function(){poll(testFunction,callback)},200))}(testFunction,callback)}function isMobile(){return window.matchMedia("(max-width: 767px)").matches}function isExposedSearchEnabled(){return window.experiments&&window.experiments.exposedSearchEnabled&&isMobile()}function hasCmsSlimBanner(){return Boolean($(".cms-slimbanner").length)}function hasExposedSearch(){return Boolean($(".exposed-search").length)}function setupExposedSearch(){var $exposedSearchSlot=$(".exposed-search__slot"),lastScroll=0,classes=window.experiments.exposedSearchVariantTwo?"exposed-search exposed-search--variant-two":"exposed-search";$exposedSearchSlot.append('<div class="'+classes+'"><button class="exposed-search__button search-form__button"><svg class="icon icon--search exposed-search__button-icon"><use xlink:href="#icon-header-search" /></svg><p class="exposed-search__button-text">Search</p></button></div>'),$exposedSearch=$(".exposed-search"),$megaNav.css({display:"none"}),$body.addClass("body-exposed-search"),$searchHandle.css({opacity:"0"}),$exposedSearch.click(function(){$("html").addClass("no-scroll"),showDropdown(),hideExposedSearch()}),$(window).scroll(_.debounce(function(){var currScroll=$(this).scrollTop(),isScrollingDown=lastScroll<currScroll,isAtTop=currScroll<60,isAtBottom=window.innerHeight+currScroll>=document.body.offsetHeight;lastScroll<0&&isAtTop&&!isExposedSearchHidden()||isAtBottom||(isScrollingDown&&!isExposedSearchHidden()?hideExposedSearch():isScrollingDown||!isExposedSearchHidden()||isDropdownActive()||showExposedSearch(),lastScroll=currScroll)},10))}var $searchHandle,$searchDropdown,$siteHeader,$backgroundOverlay,$searchResultsHeader,searchInputElm,$noSearchResultsTxt,$searchResultFilters,$exposedSearch,$body,$megaNav,$siteActiveClass="site-header--active",dropdownActiveClass="search-form__dropdown--active",handleActiveClass="search-form__handle--active",animationSpeed="fast",$bodyExposedSearchHiddenClass="body-exposed-search--hidden",$exposedSearchHiddenClass="exposed-search--hidden";return/Android|webOS|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$(".button--reset .icon--cross").css("padding-top","3px"),{init:function(){$searchHandle=$(".js-search-handle"),$searchDropdown=$(".js-search-dropdown"),$siteHeader=$(".site-header"),$backgroundOverlay=$(".js-background-overlay"),$searchResultsHeader=$(".search-results-header"),$noSearchResultsTxt=$(".search-results__empty"),searchInputElm=$("#search")[0],$searchResultFilters=$(".search-results__filters");var $searchInput=$(".search-form__text"),$searchReset=$(".js-button-search-clear");$body=$("body"),$megaNav=$(".mega-nav__slot"),$searchHandle.click(function(){isDropdownActive()?($("html").removeClass("no-scroll"),hideDropdown(),showHeader()):($("html").addClass("no-scroll"),showDropdown(),hideHeader())}),$searchInput.on("focus",function(){$("html").addClass("no-scroll"),showDropdown(),hideHeader()}),$backgroundOverlay.click(function(){$("html").removeClass("no-scroll"),hideDropdown(),showHeader()}),$noSearchResultsTxt.text().trim().length||$noSearchResultsTxt.addClass("no-display"),$(".js-menu-handle, .js-store-currency-selected").click(function(){isDropdownActive()&&($("html").removeClass("no-scroll"),hideDropdown(),showHeader())}),$searchReset.on("click",function(e){e.preventDefault(),hideDropdown(),showHeader(),$("html").removeClass("no-scroll")}),$(".search-results__text--empty").length&&$searchResultFilters.remove(),usePolling(isExposedSearchEnabled,setupExposedSearch,20),usePolling(hasCmsSlimBanner,function(){$body.addClass("body-top-promo-banner")},30),window.addEventListener("resize",_.debounce(function(){!hasExposedSearch()&&isExposedSearchEnabled()&&setupExposedSearch(),!isMobile()&&hasExposedSearch()&&($megaNav.css({display:"block"}),$body.removeClass("body-exposed-search"),$exposedSearch.remove(),$exposedSearch=null)},100))}}}(window.jQuery),(MgResponsive=MgResponsive||{}).SizeGuide=function($){"use strict";return{init:function(){$(".accordion--size-guide").accordion({animate:250,icons:!1,collapsible:!0,active:!1,heightStyle:"content",activate:MgResponsive.SizeGuide.checkTableOverflow}),MgResponsive.SizeGuide.bindResize(),$(".accordion--size-guide").accordion("option","active",0)},checkTableOverflow:function(event,ui){var $panel=ui.selector?ui:ui.newPanel||ui.panel,$currentTable=$panel.find("table"),$container=$(".accordion--size-guide");$currentTable.outerWidth()>$container.outerWidth()&&0===$panel.scrollLeft()?($panel.find(".js-accordion__overflow").length||$panel.append('<div class="js-accordion__overflow"/>'),$panel.find(".js-accordion__overflow").addClass("visible"),$panel.on("scroll",function(){$panel.find(".js-accordion__overflow").removeClass("visible")})):($panel.find(".js-accordion__overflow").removeClass("visible"),$panel.off("scroll"))},bindResize:function(){$(window).on("resize.accordion--size-guide",_.debounce(function(){var $accordionContainer=$(".accordion--size-guide").accordion("widget"),$activePanelIdx=$accordionContainer.accordion("option","active"),$activePanel=$accordionContainer.find(".ui-accordion-content:eq("+$activePanelIdx+")");MgResponsive.SizeGuide.checkTableOverflow("resize",$activePanel)},300))},unbindResize:function(){$(window).off("resize.accordion--size-guide")}}}(window.jQuery),(MgResponsive=MgResponsive||{}).StoreSwitcher=function($){"use strict";return{init:function(){this.currencySwitcher()},currencySwitcher:function(){function modalClose(){$(".js-modal__close").trigger("click")}function labelBuilder($el){return'<span class="currency-switcher__symbol">'+$el.data("currency-symbol")+'</span><span class="currency-switcher__code">'+$el.data("currency-code")+"</span>"}var open=!1;$(".js-store-currency-menu").children().length&&$(".js-store-currency-selected").click(function(){if(!open){var storeCurrencyMenuHtml=$(".js-store-currency-menu").html();MgResponsive.Modal.init(storeCurrencyMenuHtml,{modalClass:"modal--store-switcher",afterOpen:function(){open=!0,$(".js-store-currency-selector").selectric({preventWindowScroll:!1,disableOnMobile:!0,onInit:function(){$(".currency-switcher--mobile").hide(),$(".currency-switcher-input").hide()},responsive:!0,customClass:{prefix:"currency-switcher"},arrowButtonMarkup:'<div class="currency-switcher__arrow"><svg class="icon"><use xlink:href="#icon-arrow-down" /></svg></div>',optionsItemBuilder:function(itemData,$el){return labelBuilder($el)},labelBuilder:function(currItem){return labelBuilder(currItem.element)}}),$(".js-menu-handle, .js-search-handle").on("click",modalClose)},beforeClose:function(){$(".js-store-currency-selector").selectric("destroy")},afterClose:function(){open=!1}})}})}}}(window.jQuery),(MgResponsive=MgResponsive||{}).SvgDefs=function($){"use strict";return{init:function(){jQuery.get($("meta[name=svg-url]").attr("content"),function(data){if(data.documentElement){var div=document.createElement("div");div.style.display="none",div.innerHTML=(new XMLSerializer).serializeToString(data.documentElement),jQuery("body").prepend(div)}})}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||"").uiTabs=function($){"use strict";function openTab(fragment){$(elementSelector+' a[href="'+fragment+'"]').parent("li").addClass("active"),$(fragment).addClass("open")}function closeTab(){$(elementSelector+" .open").removeClass("open"),$(elementSelector+" .active").removeClass("active")}function getFragment(linkHref){return-1<linkHref.indexOf("#")?linkHref.substr(linkHref.indexOf("#"),linkHref.length):""}var elementSelector=".js-tabs";return{init:function(){this.initResponsiveTabs()},initResponsiveTabs:function(){var fragment,windowFragment=getFragment(window.location.href);$(".ui-tabs").length&&(fragment=(void 0!==windowFragment||windowFragment.length)&&$(windowFragment).length?windowFragment:$(elementSelector+" li:first-child > a").attr("href")),(767<window.innerWidth||windowFragment)&&openTab(fragment),$(elementSelector).on("click",".ui-tabs__tab > a:first-of-type",function(e){!function(event,clickedTab,fragment){event.preventDefault(),fragment=$(clickedTab).attr("href"),$(clickedTab).parent("li").hasClass("active")?closeTab():(closeTab(),openTab(fragment))}(e,this,fragment)}),$(elementSelector).on("click",".ui-tabs__content-inner a",function(e){var event,linkHref,windowPath,linkFragment;event=e,linkHref=$(this).attr("href"),windowPath=window.location.pathname.replace(/^\/|\/$/g,""),linkFragment=getFragment(linkHref),(linkHref===linkFragment||-1<linkHref.indexOf(windowPath))&&$(linkFragment).length&&(event.preventDefault(),closeTab(),openTab(linkFragment))})}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).Tooltip=function($){"use strict";var self,tipObj,closeBtn,defaults={arrowPosition:"top-right",closeBtn:!0,timeout:null,htmlClass:null,fixedPosition:!1,afterClose:function(){},afterOpen:function(){}};return{init:function(options){self=this,$(".tooltipped").each(function(){MgResponsive.Tooltip.tip($(this),$(this).data("tooltip"),options)})},tip:function(el,content,options){void 0===el.selector&&(el=$(el)),this.options=$.extend({},defaults,options),this.element=el;var tooltipId="tooltip-"+Math.random().toString(36).substr(2,9);this.element.attr("aria-describedby",tooltipId),this.element.addClass("tooltipped");var tipHtml='<div class="tooltip__container tooltip__arrow tooltip__arrow--'+this.options.arrowPosition+" "+this.options.htmlClass+'" id="'+tooltipId+'"';tipHtml+=this.options.fixedPosition?'style="position:fixed;">':">",this.options.closeBtn&&(tipHtml+='<a href="#" class="tooltip__close" title="'+Translator.translate("Close")+'"><svg class="icon icon--cross-slim"><title>'+Translator.translate("Close")+'</title><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-cross-slim"></use></svg></a>'),tipHtml+='<div class="tooltip__content">'+content+"</div>",$("body").append(tipHtml),tipObj=$("#"+tooltipId),this.options.timeout&&setTimeout(this.remove.bind(this,tipObj),this.options.timeout),this.options.closeBtn&&(closeBtn=tipObj.find(".tooltip__close")),this.bindListeners(),this.positionTips(),this.options.afterOpen(),$(window).on("resize",_.debounce(function(){self.positionTips()},300))},bindListeners:function(){this.options.closeBtn?closeBtn.on("click",function(e){e.preventDefault(),self.remove($(e.target).closest(".tooltip__container"))}):self.options.dontCloseOnClick||(tipObj.css("cursor","pointer"),tipObj.on("click",function(e){e.preventDefault(),self.remove($(e.target).closest(".tooltip__container"))}))},positionTips:function(){$(".tooltipped").each(function(){var $this=$(this),tooltipId=$this.attr("aria-describedby"),$tooltip=$("#"+tooltipId),offset=$this.offset(),width=$this.outerWidth(),height=$this.outerHeight(),bottomY=Math.ceil(offset.top+height),centerX=offset.left+width/2;$tooltip.hasClass("tooltip__arrow--top-right")?centerX=Math.ceil(centerX-$tooltip.outerWidth()+29):$tooltip.hasClass("tooltip__arrow--top-left")?centerX=Math.ceil(centerX-29):$tooltip.hasClass("tooltip__arrow--top-center")&&(centerX=Math.ceil(centerX-$tooltip.outerWidth()/2)),$tooltip.css({left:centerX,top:bottomY}),$tooltip.addClass("tooltip--active")})},remove:function($el){void 0===$el.selector&&($el=$($el)),$el.removeClass("tooltip--active"),window.setTimeout(function(){$el.remove()},1e3),this.options.afterClose()}}}(window.jQuery),(MgResponsive=MgResponsive||{}).UrlScrollTo=function($){"use strict";return{init:function(){this.initScrollToUrlQuery("scrollTo")},initScrollToUrlQuery:function(identifier){var urlParam=function(name){name=name.replace(/[\[|\]]/g,function(output){return"\\"+output});var results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}(identifier),width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;""!==urlParam&&width<=768&&Effect.ScrollTo(urlParam)},initParamScrollTo:function(identifier){-1<identifier.indexOf("#")&&(identifier=identifier.substr(identifier.indexOf("#")+1,identifier.length)),identifier&&document.getElementById(identifier)&&Effect.ScrollTo(identifier)},initScrollSetData:function(sessionName,positionSession,urlSession){var scrollData={};urlSession&&(scrollData[urlSession]=window.location.origin+window.location.pathname),scrollData[positionSession]=window.pageYOffset,MgResponsive.UserData.setSessionStorage(sessionName,scrollData)},initScrollDataAction:function(sessionName,positionSession,urlSession){var scrollData=MgResponsive.UserData.getSessionStorage(sessionName);if(urlSession)var windowUrl=window.location.origin+window.location.pathname;urlSession&&scrollData[urlSession]===windowUrl&&$("html, body").animate({scrollTop:scrollData[positionSession]},500),MgResponsive.UserData.killSessionStorage(sessionName)}}}(window.jQuery,Modernizr),(MgResponsive=MgResponsive||{}).Wishlist=function($){"use strict";function ajax(url,options){var defaults={url:url,cache:!1,global:!1,dataType:"json",method:"post"};$.ajax($.extend({},defaults,options||{}))}var Base=Class.create({initialize:function(){this.cache={}},clearCache:function(){return this.cache={},this},$:function(selector,bypassCache){return bypassCache?this.$el.find(selector):(this.cache[selector]||(this.cache[selector]=this.$el.find(selector)),this.cache[selector])}}),Wishlist=Class.create(Base,{initialize:function($super){$super(),this.items=[],this.$el=$(".my-wishlist"),this.$el.length&&(this.getItems(),this.$(".js-wishlist-sort").on("change",this.sort.bind(this)))},sort:function(e){return ajax(e.currentTarget.value,{dataType:"html",success:function(html){this.$(".js-wishlist-item",!0).remove(),this.$(".js-wishlist-content").empty().html(html),this.reset()}.bind(this),error:function(){this.showGeneralError()}.bind(this)}),this},getFormKey:function(){return this.$('input[name="form_key"]').first().val()},massAction:function(e){e.preventDefault();var massActionUrl=$(e.currentTarget).data("mass-action-url");return this.submitMassAction(massActionUrl),this},submitMassAction:function(url){var form=$("<form />");form.attr("action",url),form.attr("method","POST");var items=this.getSelectedItems();if(!items||!items.length)return this.toggleNoItemsSelectedMessage(!0),this;var formkeyInput=$("<input />");return formkeyInput.attr({name:"form_key",value:this.getFormKey()}),form.append(formkeyInput),this.toggleNoItemsSelectedMessage(!1),$.each(items,function(index,item){var itemInput=$("<input />"),qtyInput=$("<input />");itemInput.attr({name:"item["+index+"]",value:item.getId()}),qtyInput.attr({name:"qty["+index+"]",value:item.getQty()}),form.append(itemInput,qtyInput)}),form.submit(),this},toggleNoItemsSelectedMessage:function(toggle){return toggle?this.$(".js-no-items-selected").show():this.$(".js-no-items-selected").hide(),this},getItems:function(){return this.items.length||this.$(".js-wishlist-item",!0).each(function(index,item){this.items.push(new Item(this,$(item)))}.bind(this)),this.items},getSelectedItems:function(){var items=[];return $.each(this.getItems(),function(index,item){item.isSelected()&&items.push(item)}),items},hasAnyVisibleItems:function(){var visible=!1;return $.each(this.getItems(),function(index,item){if(item.isVisible())return!(visible=!0)}),visible},getItemCount:function(){var count=0;return $.each(this.getItems(),function(index,item){item.isVisible()&&item.$el.length&&count++}),count},showGeneralError:function(){return alert(Translator.translate("Oops, something went wrong. Please try later.")),this},refreshItemCount:function(){var count=this.getItemCount();return count?this.$(".js-wishlist-count").text(count):this.$(".wishlist-count").remove(),this},refreshHeaderWishlistIcon:function(html){$(".js-mini-wishlist").replaceWith($(html.trim()))},refreshTotal:function(){var ajaxUrl=this.$(".js-wishlist-total").data("ajax-url");return ajax(ajaxUrl,{dataType:"html",success:function(data){var html=JSON.parse(data);$(".js-wishlist-total").replaceWith(html.html)}.bind(this),error:function(){this.showGeneralError()}.bind(this)}),this},reset:function(){return this.clearCache(),this.items.length=0,this.getItems(),this},refreshView:function(){return this.hasAnyVisibleItems()||(this.$("#wishlist-view-form").remove(),this.$("#wishlist-allcart-form").remove(),this.$(".col2-set--wishlist-actions").remove(),this.$(".js-empty").removeClass("no-display")),this},refresh:function(){return this.refreshItemCount(),this.refreshTotal(),this.refreshView(),this}}),Item=Class.create(Base,{initialize:function($super,wishlist,$el){$super(),this.wishlist=wishlist,this.$el=$el,this.isDeleted=!1,this.bindClickHandlers(),this.$el.find(".no-option").length&&this.toggleChangeDetails()},bindClickHandlers:function(){this.getAddToBagButton().on("click",this.addToBag.bind(this)),this.getChangeDetailsButton().on("click",function(e){e.preventDefault(),this.changeDetails()}.bind(this)),this.getRemoveButton().on("click",this.remove.bind(this))},toggleChangeDetails:function(){this.changeDetails()},getWishlist:function(){return this.wishlist},getId:function(){return this.$(".js_item_id").val()},getQty:function(){return this.$(".js_item_qty").val()},getAddToBagButton:function(){return this.$(".js-wishlist-add-to-bag",!0)},getChangeDetailsButton:function(){return this.$(".js-wishlist-change-details",!0)},getCancelButton:function(){return this.$(".js-button-config-cancel",!0)},getUpdateDetailsButton:function(){return this.$(".js-button-config-submit",!0)},getUpdateDetailsUrl:function(){return this.$(".js-wishlist-item-configure-url",!0)},getUpdateDetailsForm:function(){return this.$("select",!0)},getRemoveButton:function(){return this.$(".js-confirm-remove",!0)},getOptionsContainer:function(){return this.$(".js-options-configure",!0)},addToBag:function(e){e.preventDefault();var $button=this.getAddToBagButton(),url=$button.data("href");return url||$button.click(),$button.attr("disabled",!0),$button.text(Translator.translate("Moving to bag...")),ajax(url,{success:function(data){data.success?this.onAddToBagSuccess(data):this.onAddToBagError(data)}.bind(this),error:function(data){this.onAddToBagError(data)}.bind(this)}),this},renderItemError:function(data){this.$el.find(".description__error-container").html('<span class="validation-advice">'+data.message+"</span>")},changeDetails:function(){var $button=this.getChangeDetailsButton(),url=$button.data("href");return $button.attr("disabled",!0),$button.text(Translator.translate("Please wait...")),this.getOptionsContainer().is(":empty")?ajax(url,{success:function(data){data.success?this.onChangeDetailsSuccess(data):this.onChangeDetailsError(data)}.bind(this),error:function(data){this.onChangeDetailsError(data)}.bind(this),complete:function(){$button.attr("disabled",!1),$button.text($button.attr("title"))}}):($button.attr("disabled",!1),$button.text($button.attr("title")),this.toggleProductOptions()),this},onAddToBagSuccess:function(data){return this.getAddToBagButton().text(Translator.translate("Moved to bag")),this.isDeleted=!0,this.fadeOut(),data.html&&(MgResponsive.MiniBag.refreshBasket(data.html),data.headerIconHtml&&this.getWishlist().refreshHeaderWishlistIcon(data.headerIconHtml),this.getWishlist().refresh()),this},onAddToBagError:function(data){var $button=this.getAddToBagButton();return $button.text(Translator.translate("Move to bag")),$button.attr("disabled",!1),data.message?alert(data.message):this.getWishlist().showGeneralError(),this.renderItemError(data),this},onChangeDetailsSuccess:function(data){return(data.html||data.headerIconHtml)&&(data.headerIconHtml&&this.getWishlist().refreshHeaderWishlistIcon(data.headerIconHtml),this.getOptionsContainer().html(data.html),this.getCancelButton().on("click",this.bindToggleProductOptions.bind(this)),this.getUpdateDetailsButton().on("click",this.updateProductOptions.bind(this)),this.toggleProductOptions()),this},updateProductOptions:function(e){e.preventDefault();var url=this.getUpdateDetailsUrl().val(),query=this.getUpdateDetailsForm().serialize(),requestUrl=url.replace(/\/$/,"")+"?"+query,$button=this.getUpdateDetailsButton(),$wishlist=this.getWishlist();return $button.attr("disabled",!0),ajax(requestUrl,{success:function(data){if(data&&data.success){var $oldItem=this.$(".products-list__item-description",!0),$newItem=data.html;$oldItem.replaceWith($newItem),data.price&&this.$(".js-price").html(data.price),this.bindClickHandlers()}else this.getWishlist().showGeneralError()}.bind(this),error:function(){this.getWishlist().showGeneralError()}.bind(this),complete:function(){$button.attr("disabled",!1),$wishlist.refreshTotal()}}),this},bindToggleProductOptions:function(e){e.preventDefault(),this.toggleProductOptions()},onChangeDetailsError:function(data){return data.message?alert(data.message):this.getWishlist().showGeneralError(),this},toggleProductOptions:function(){var optionsContainer=this.getOptionsContainer(),selectedContainer=this.$(".js-options-selected",!0);return optionsContainer.hasClass("active")?(optionsContainer.removeClass("active"),selectedContainer.addClass("active")):(optionsContainer.addClass("active"),selectedContainer.removeClass("active")),this},remove:function(e){e.preventDefault();var $this=$(e.currentTarget),url=$this.data("href");return-1===url.indexOf("form_key")&&(url+="form_key/"+this.getWishlist().getFormKey()),MgResponsive.FancyBox.initFancyConfirmCallback($this.data("confirm-message"),function(){ajax(url,{success:function(data){data&&data.success?(this.isDeleted=!0,data.headerIconHtml&&this.getWishlist().refreshHeaderWishlistIcon(data.headerIconHtml),this.fadeOut()):this.getWishlist().showGeneralError()}.bind(this),error:function(){this.getWishlist().showGeneralError()}.bind(this)})}.bind(this)),this},fadeOut:function(){return this.$el.fadeOut("slow",function(){this.$el.remove(),this.getWishlist().refresh()}.bind(this)),this},show:function(){return this.$el.show(),this},isSelected:function(){return!this.isDeleted&&this.$(".js-mass-action-select").prop("checked")},isVisible:function(){return!!this.$el.length&&!this.isDeleted},select:function(){return this.toggleSelect(!0)},unselect:function(){return this.toggleSelect(!1)},toggleSelect:function(toggle){return this.$(".js-mass-action-select").prop("checked",!!toggle),this}});return{init:function(){this.wishlist=new Wishlist}}}(window.jQuery),(MgResponsive=MgResponsive||{}).fancyFormFields=function($){"use strict";function setFieldState(field){var input=field.querySelector("."+baseClass+"__input"),currentActiveElement=document.activeElement;input.classList.contains("validation-failed")?field.classList.add(baseClass+states.invalid):field.classList.remove(baseClass+states.invalid),input.value.length||currentActiveElement===input?field.classList.add(baseClass+states.populated):field.classList.remove(baseClass+states.populated),input.disabled?field.classList.add(baseClass+states.disabled):field.classList.remove(baseClass+states.disabled)}function updateFieldStates(specificFields){var fieldsToUpdate=specificFields||fields;fieldsToUpdate instanceof NodeList?fieldsToUpdate.length&&Array.prototype.forEach.call(fieldsToUpdate,setFieldState):setFieldState(fieldsToUpdate)}var baseClass,scope,fields,states={populated:"--populated",invalid:"--invalid",disabled:"--disabled"};return{init:function(baseClassName,container,delegate){var targetSelector;baseClass=baseClassName,scope=document.querySelector(container),fields=scope.querySelectorAll(".js-fancy-form-field"),updateFieldStates(),delegate?(targetSelector=".js-fancy-form-field input, .js-fancy-form-field select",jQuery(document).on("focus blur change",targetSelector,function(evt){updateFieldStates(jQuery(this).parents(".js-fancy-form-field")[0])}).on("keyup",targetSelector,_.debounce(function(evt){updateFieldStates(jQuery(this).parents(".js-fancy-form-field")[0])},150))):Array.prototype.forEach.call(fields,function(field){var input=field.querySelector("input, select"),$input=$(input);$input.on("keyup",_.debounce(function(){updateFieldStates(field)},150)),$input.on("focus",function(){updateFieldStates(field)}),$input.on("blur",function(){updateFieldStates(field)}),$input.on("change",function(){updateFieldStates(field)}),$input.on("updateFieldStates",function(){updateFieldStates(field)})}),this.passwordToggle.init(scope),this.dropdown.init(baseClass,scope)},updateFieldStates:updateFieldStates}}(jQuery),MgResponsive.fancyFormFields.dropdown=function($,Modernizr){"use strict";function insertIcon(dropdown){var html,template;dropdown.appendChild((html='<span class="'+baseClass+'__icon"><svg class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-arrow-down"></use></svg></span>',(template=document.createElement("div")).innerHTML=html,template.firstChild))}function initSelectric(dropdown){var $select=$(dropdown.querySelector("select")),mobileEnabled=$select.data("selectric-mobile-enabled");dropdown.classList.add(baseClass+"--selectric"),$select.selectric({disableOnMobile:!mobileEnabled,responsive:!0,optionsItemBuilder:function(itemData){var text=itemData.text;return text.length||(text=Translator.translate("No Option Selected")),text},onInit:function(){var label=dropdown.querySelector(".label"),icon=dropdown.querySelector(".button"),items=dropdown.querySelector(".selectric-items"),scrollArea=dropdown.querySelector(".selectric-scroll");label.classList.add(baseClass+"__input"),items.classList.add(baseClass+"__dropdown-items"),icon.style.display="none",$(scrollArea).mCustomScrollbar({theme:"mg-fancy-form",axis:"y",scrollInertia:Modernizr.touch?950:0})},onOpen:function(select){select.focus(),dropdown.classList.add(baseClass+"--dropdown-open")},onClose:function(select){select.blur(),dropdown.classList.remove(baseClass+"--dropdown-open")},onChange:function(select){select.dispatchEvent(new Event("change",{bubbles:!0}))}})}var baseClass,dropdowns;return{init:function(baseClassName,scope){baseClass=baseClassName,dropdowns=scope.querySelectorAll(".js-fancy-form-field-dropdown"),Array.prototype.forEach.call(dropdowns,function(dropdown){insertIcon(dropdown),"none"!==dropdown.querySelector("select").style.display&&initSelectric(dropdown)})},initSelectric:initSelectric}}(window.jQuery,Modernizr),MgResponsive.fancyFormFields.passwordToggle=function($){"use strict";var toggles,showText=Translator.translate("Show"),hideText=Translator.translate("Hide");return{init:function(scope){toggles=scope.querySelectorAll(".js-fancy-form-field-password-toggle"),Array.prototype.forEach.call(toggles,function(toggle){var input=scope.querySelector(toggle.getAttribute("data-field"));$(toggle).on("click",function(){var passwordVisible=toggle.getAttribute("data-active");!function(toggle,input,passwordVisible){passwordVisible?(toggle.innerText=showText,toggle.removeAttribute("data-active"),input.setAttribute("type","password")):(toggle.innerText=hideText,toggle.setAttribute("data-active",!0),input.setAttribute("type","text"))}(toggle,input,passwordVisible)})})}}}(window.jQuery),-1<window.location.pathname.indexOf("/help")&&(null!=document.querySelector(".help-returns-options a.rebound-return")||null!=document.querySelector(".help-returns-options a.rebound-track"))||document.querySelectorAll('a[target="_blank"]').forEach(function(a){relAttrString=a.getAttribute("rel"),newRelAttrString=null==relAttrString?"noopener":-1<relAttrString.indexOf("noopener")?relAttrString:relAttrString+" noopener",a.setAttribute("rel",newRelAttrString)}),window.graphqlUrl="https://api.missguided.com/graphql",window.graphqlKey="FKWHrrSmac6f4YMKHISoz9trjC3AAjgu676IsBkE";var MgEmailAutoComplete=function(url,key){function addDatalist(emails,prevalue,value,datalist,$emailField){var i,newOptionsString="";for(i=0;i<emails.length;i++){var newOption="<span value='"+prevalue+"@"+emails[i]+"'>"+prevalue+"@"+emails[i]+"</span>";emails[i].match("^"+value)&&emails[i]!==value&&(newOptionsString+=newOption)}datalist.html(newOptionsString),function(datalist,$emailField){datalist.on("click","*",function(e){var current=$(this).attr("value");current&&(datalist.empty(),$emailField.val(current))}),0<$emailField.parents(".js-fancy-form-field").length&&$emailField.parents(".js-fancy-form-field").addClass("fancy-form-autocomplete")}(datalist,$emailField)}var $=jQuery,bindTo=$('input[type="email"]');url&&key&&fetch(url,{method:"POST",headers:new Headers({"Content-Type":"application/json","x-api-key":key,Authorization:"True"}),body:JSON.stringify({query:"{emailDomain { list } }",variables:null,operationName:null})}).then(function(res){return res.json()}).then(function(data){var emails=data.data.emailDomain.list;$.each(bindTo,function(index){var $emailField=$(this);0<$emailField.next("span").length?$emailField.next().attr("id","email-options"+index):$('<span class="email-autocomplete" id="email-options'+index+'"/>').insertAfter($emailField),$emailField.attr("list","email-options"+index),$emailField.on("keyup",_.debounce(function(){var el=$emailField,value=el.val(),datalist=el.nextAll(".email-autocomplete");if(-1!=value.indexOf("@")&&0<value.substr(value.lastIndexOf("@")+1).length){var prevalue=value.split("@")[0];value=value.split("@")[1],addDatalist(emails,prevalue,value,datalist,$emailField)}else datalist.empty()},100))})})};setTimeout(function(){MgEmailAutoComplete(window.graphqlUrl,window.graphqlKey)},2e3),function(){function Lexer(options){this.tokens=[],this.tokens.links={},this.options=options||marked.defaults,this.rules=block.normal,this.options.gfm&&(this.options.tables?this.rules=block.tables:this.rules=block.gfm)}function InlineLexer(links,options){if(this.options=options||marked.defaults,this.links=links,this.rules=inline.normal,this.renderer=this.options.renderer||new Renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=inline.breaks:this.rules=inline.gfm:this.options.pedantic&&(this.rules=inline.pedantic)}function Renderer(options){this.options=options||{}}function Parser(options){this.tokens=[],this.token=null,this.options=options||marked.defaults,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options}function escape(html,encode){return html.replace(encode?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function replace(regex,opt){return regex=regex.source,opt=opt||"",function self(name,val){return name?(val=(val=val.source||val).replace(/(^|[^\[])\^/g,"$1"),regex=regex.replace(name,val),self):new RegExp(regex,opt)}}function noop(){}function merge(obj){for(var target,key,i=1;i<arguments.length;i++)for(key in target=arguments[i])Object.prototype.hasOwnProperty.call(target,key)&&(obj[key]=target[key]);return obj}function marked(src,opt,callback){if(callback||"function"==typeof opt){callback||(callback=opt,opt=null);var tokens,pending,highlight=(opt=merge({},marked.defaults,opt||{})).highlight,i=0;try{tokens=Lexer.lex(src,opt)}catch(e){return callback(e)}pending=tokens.length;function done(err){if(err)return opt.highlight=highlight,callback(err);var out;try{out=Parser.parse(tokens,opt)}catch(e){err=e}return opt.highlight=highlight,err?callback(err):callback(null,out)}if(!highlight||highlight.length<3)return done();if(delete opt.highlight,!pending)return done();for(;i<tokens.length;i++)!function(token){"code"!==token.type?--pending||done():highlight(token.text,token.lang,function(err,code){return err?done(err):null==code||code===token.text?--pending||done():(token.text=code,token.escaped=!0,void(--pending||done()))})}(tokens[i])}else try{return opt=opt&&merge({},marked.defaults,opt),Parser.parse(Lexer.lex(src,opt),opt)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(opt||marked.defaults).silent)return"<p>An error occured:</p><pre>"+escape(e.message+"",!0)+"</pre>";throw e}}var block={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:noop,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:noop,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:noop,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};block.item=replace(block.item,"gm")(/bull/g,block.bullet)(),block.list=replace(block.list)(/bull/g,block.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+block.def.source+")")(),block.blockquote=replace(block.blockquote)("def",block.def)(),block._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",block.html=replace(block.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,block._tag)(),block.paragraph=replace(block.paragraph)("hr",block.hr)("heading",block.heading)("lheading",block.lheading)("blockquote",block.blockquote)("tag","<"+block._tag)("def",block.def)(),block.normal=merge({},block),block.gfm=merge({},block.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),block.gfm.paragraph=replace(block.paragraph)("(?!","(?!"+block.gfm.fences.source.replace("\\1","\\2")+"|"+block.list.source.replace("\\1","\\3")+"|")(),block.tables=merge({},block.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),Lexer.rules=block,Lexer.lex=function(src,options){return new Lexer(options).lex(src)},Lexer.prototype.lex=function(src){return src=src.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(src,!0)},Lexer.prototype.token=function(src,top,bq){var next,loose,cap,bull,b,item,space,i,l;for(src=src.replace(/^ +$/gm,"");src;)if((cap=this.rules.newline.exec(src))&&(src=src.substring(cap[0].length),1<cap[0].length&&this.tokens.push({type:"space"})),cap=this.rules.code.exec(src))src=src.substring(cap[0].length),cap=cap[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?cap:cap.replace(/\n+$/,"")});else if(cap=this.rules.fences.exec(src))src=src.substring(cap[0].length),this.tokens.push({type:"code",lang:cap[2],text:cap[3]||""});else if(cap=this.rules.heading.exec(src))src=src.substring(cap[0].length),this.tokens.push({type:"heading",depth:cap[1].length,text:cap[2]});else if(top&&(cap=this.rules.nptable.exec(src))){for(src=src.substring(cap[0].length),item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/\n$/,"").split("\n")},i=0;i<item.align.length;i++)/^ *-+: *$/.test(item.align[i])?item.align[i]="right":/^ *:-+: *$/.test(item.align[i])?item.align[i]="center":/^ *:-+ *$/.test(item.align[i])?item.align[i]="left":item.align[i]=null;for(i=0;i<item.cells.length;i++)item.cells[i]=item.cells[i].split(/ *\| */);this.tokens.push(item)}else if(cap=this.rules.lheading.exec(src))src=src.substring(cap[0].length),this.tokens.push({type:"heading",depth:"="===cap[2]?1:2,text:cap[1]});else if(cap=this.rules.hr.exec(src))src=src.substring(cap[0].length),this.tokens.push({type:"hr"});else if(cap=this.rules.blockquote.exec(src))src=src.substring(cap[0].length),this.tokens.push({type:"blockquote_start"}),cap=cap[0].replace(/^ *> ?/gm,""),this.token(cap,top,!0),this.tokens.push({type:"blockquote_end"});else if(cap=this.rules.list.exec(src)){for(src=src.substring(cap[0].length),bull=cap[2],this.tokens.push({type:"list_start",ordered:1<bull.length}),next=!1,l=(cap=cap[0].match(this.rules.item)).length,i=0;i<l;i++)space=(item=cap[i]).length,~(item=item.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(space-=item.length,item=this.options.pedantic?item.replace(/^ {1,4}/gm,""):item.replace(new RegExp("^ {1,"+space+"}","gm"),"")),this.options.smartLists&&i!==l-1&&(bull===(b=block.bullet.exec(cap[i+1])[0])||1<bull.length&&1<b.length||(src=cap.slice(i+1).join("\n")+src,i=l-1)),loose=next||/\n\n(?!\s*$)/.test(item),i!==l-1&&(next="\n"===item.charAt(item.length-1),loose=loose||next),this.tokens.push({type:loose?"loose_item_start":"list_item_start"}),this.token(item,!1,bq),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(cap=this.rules.html.exec(src))src=src.substring(cap[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===cap[1]||"script"===cap[1]||"style"===cap[1]),text:cap[0]});else if(!bq&&top&&(cap=this.rules.def.exec(src)))src=src.substring(cap[0].length),this.tokens.links[cap[1].toLowerCase()]={href:cap[2],title:cap[3]};else if(top&&(cap=this.rules.table.exec(src))){for(src=src.substring(cap[0].length),item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/(?: *\| *)?\n$/,"").split("\n")},i=0;i<item.align.length;i++)/^ *-+: *$/.test(item.align[i])?item.align[i]="right":/^ *:-+: *$/.test(item.align[i])?item.align[i]="center":/^ *:-+ *$/.test(item.align[i])?item.align[i]="left":item.align[i]=null;for(i=0;i<item.cells.length;i++)item.cells[i]=item.cells[i].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(item)}else if(top&&(cap=this.rules.paragraph.exec(src)))src=src.substring(cap[0].length),this.tokens.push({type:"paragraph",text:"\n"===cap[1].charAt(cap[1].length-1)?cap[1].slice(0,-1):cap[1]});else if(cap=this.rules.text.exec(src))src=src.substring(cap[0].length),this.tokens.push({type:"text",text:cap[0]});else if(src)throw new Error("Infinite loop on byte: "+src.charCodeAt(0));return this.tokens};var inline={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:noop,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:noop,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/};inline.link=replace(inline.link)("inside",inline._inside)("href",inline._href)(),inline.reflink=replace(inline.reflink)("inside",inline._inside)(),inline.normal=merge({},inline),inline.pedantic=merge({},inline.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),inline.gfm=merge({},inline.normal,{escape:replace(inline.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:replace(inline.text)("]|","~]|")("|","|https?://|")()}),inline.breaks=merge({},inline.gfm,{br:replace(inline.br)("{2,}","*")(),text:replace(inline.gfm.text)("{2,}","*")()}),InlineLexer.rules=inline,InlineLexer.output=function(src,links,options){return new InlineLexer(links,options).output(src)},InlineLexer.prototype.output=function(src){for(var link,text,href,cap,out="";src;)if(cap=this.rules.escape.exec(src))src=src.substring(cap[0].length),out+=cap[1];else if(cap=this.rules.autolink.exec(src))src=src.substring(cap[0].length),href="@"===cap[2]?(text=":"===cap[1].charAt(6)?this.mangle(cap[1].substring(7)):this.mangle(cap[1]),this.mangle("mailto:")+text):text=escape(cap[1]),out+=this.renderer.link(href,null,text);else if(this.inLink||!(cap=this.rules.url.exec(src))){if(cap=this.rules.tag.exec(src))!this.inLink&&/^<a /i.test(cap[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(cap[0])&&(this.inLink=!1),src=src.substring(cap[0].length),out+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(cap[0]):escape(cap[0]):cap[0];else if(cap=this.rules.link.exec(src))src=src.substring(cap[0].length),this.inLink=!0,out+=this.outputLink(cap,{href:cap[2],title:cap[3]}),this.inLink=!1;else if((cap=this.rules.reflink.exec(src))||(cap=this.rules.nolink.exec(src))){if(src=src.substring(cap[0].length),link=(cap[2]||cap[1]).replace(/\s+/g," "),!(link=this.links[link.toLowerCase()])||!link.href){out+=cap[0].charAt(0),src=cap[0].substring(1)+src;continue}this.inLink=!0,out+=this.outputLink(cap,link),this.inLink=!1}else if(cap=this.rules.strong.exec(src))src=src.substring(cap[0].length),out+=this.renderer.strong(this.output(cap[2]||cap[1]));else if(cap=this.rules.em.exec(src))src=src.substring(cap[0].length),out+=this.renderer.em(this.output(cap[2]||cap[1]));else if(cap=this.rules.code.exec(src))src=src.substring(cap[0].length),out+=this.renderer.codespan(escape(cap[2],!0));else if(cap=this.rules.br.exec(src))src=src.substring(cap[0].length),out+=this.renderer.br();else if(cap=this.rules.del.exec(src))src=src.substring(cap[0].length),out+=this.renderer.del(this.output(cap[1]));else if(cap=this.rules.text.exec(src))src=src.substring(cap[0].length),out+=this.renderer.text(escape(this.smartypants(cap[0])));else if(src)throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}else src=src.substring(cap[0].length),href=text=escape(cap[1]),out+=this.renderer.link(href,null,text);return out},InlineLexer.prototype.outputLink=function(cap,link){var href=escape(link.href),title=link.title?escape(link.title):null;return"!"!==cap[0].charAt(0)?this.renderer.link(href,title,this.output(cap[1])):this.renderer.image(href,title,escape(cap[1]))},InlineLexer.prototype.smartypants=function(text){return this.options.smartypants?text.replace(/---/g,"â").replace(/--/g,"â").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1â").replace(/'/g,"â").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1â").replace(/"/g,"â").replace(/\.{3}/g,"â¦"):text},InlineLexer.prototype.mangle=function(text){if(!this.options.mangle)return text;for(var ch,out="",l=text.length,i=0;i<l;i++)ch=text.charCodeAt(i),.5<Math.random()&&(ch="x"+ch.toString(16)),out+="&#"+ch+";";return out},Renderer.prototype.code=function(code,lang,escaped){if(this.options.highlight){var out=this.options.highlight(code,lang);null!=out&&out!==code&&(escaped=!0,code=out)}return lang?'<pre><code class="'+this.options.langPrefix+escape(lang,!0)+'">'+(escaped?code:escape(code,!0))+"\n</code></pre>\n":"<pre><code>"+(escaped?code:escape(code,!0))+"\n</code></pre>"},Renderer.prototype.blockquote=function(quote){return"<blockquote>\n"+quote+"</blockquote>\n"},Renderer.prototype.html=function(html){return html},Renderer.prototype.heading=function(text,level,raw){return"<h"+level+' id="'+this.options.headerPrefix+raw.toLowerCase().replace(/[^\w]+/g,"-")+'">'+text+"</h"+level+">\n"},Renderer.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},Renderer.prototype.list=function(body,ordered){var type=ordered?"ol":"ul";return"<"+type+">\n"+body+"</"+type+">\n"},Renderer.prototype.listitem=function(text){return"<li>"+text+"</li>\n"},Renderer.prototype.paragraph=function(text){return"<p>"+text+"</p>\n"},Renderer.prototype.table=function(header,body){return"<table>\n<thead>\n"+header+"</thead>\n<tbody>\n"+body+"</tbody>\n</table>\n"},Renderer.prototype.tablerow=function(content){return"<tr>\n"+content+"</tr>\n"},Renderer.prototype.tablecell=function(content,flags){var type=flags.header?"th":"td";return(flags.align?"<"+type+' style="text-align:'+flags.align+'">':"<"+type+">")+content+"</"+type+">\n"},Renderer.prototype.strong=function(text){return"<strong>"+text+"</strong>"},Renderer.prototype.em=function(text){return"<em>"+text+"</em>"},Renderer.prototype.codespan=function(text){return"<code>"+text+"</code>"},Renderer.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},Renderer.prototype.del=function(text){return"<del>"+text+"</del>"},Renderer.prototype.link=function(href,title,text){if(this.options.sanitize){try{var prot=decodeURIComponent(href.replace(/&([#\w]+);/g,function(_,n){return"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""})).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===prot.indexOf("javascript:")||0===prot.indexOf("vbscript:"))return""}var out='<a href="'+href+'"';return title&&(out+=' title="'+title+'"'),out+=">"+text+"</a>"},Renderer.prototype.image=function(href,title,text){var out='<img src="'+href+'" alt="'+text+'"';return title&&(out+=' title="'+title+'"'),out+=this.options.xhtml?"/>":">"},Renderer.prototype.text=function(text){return text},Parser.parse=function(src,options,renderer){return new Parser(options,renderer).parse(src)},Parser.prototype.parse=function(src){this.inline=new InlineLexer(src.links,this.options,this.renderer),this.tokens=src.reverse();for(var out="";this.next();)out+=this.tok();return out},Parser.prototype.next=function(){return this.token=this.tokens.pop()},Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},Parser.prototype.parseText=function(){for(var body=this.token.text;"text"===this.peek().type;)body+="\n"+this.next().text;return this.inline.output(body)},Parser.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var i,row,cell,j,header="",body="";for(cell="",i=0;i<this.token.header.length;i++)this.token.align[i],cell+=this.renderer.tablecell(this.inline.output(this.token.header[i]),{header:!0,align:this.token.align[i]});for(header+=this.renderer.tablerow(cell),i=0;i<this.token.cells.length;i++){for(row=this.token.cells[i],cell="",j=0;j<row.length;j++)cell+=this.renderer.tablecell(this.inline.output(row[j]),{header:!1,align:this.token.align[j]});body+=this.renderer.tablerow(cell)}return this.renderer.table(header,body);case"blockquote_start":for(body="";"blockquote_end"!==this.next().type;)body+=this.tok();return this.renderer.blockquote(body);case"list_start":body="";for(var ordered=this.token.ordered;"list_end"!==this.next().type;)body+=this.tok();return this.renderer.list(body,ordered);case"list_item_start":for(body="";"list_item_end"!==this.next().type;)body+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(body);case"loose_item_start":for(body="";"list_item_end"!==this.next().type;)body+=this.tok();return this.renderer.listitem(body);case"html":var html=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(html);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},noop.exec=noop,marked.options=marked.setOptions=function(opt){return merge(marked.defaults,opt),marked},marked.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new Renderer,xhtml:!1},marked.Parser=Parser,marked.parser=Parser.parse,marked.Renderer=Renderer,marked.Lexer=Lexer,marked.lexer=Lexer.lex,marked.InlineLexer=InlineLexer,marked.inlineLexer=InlineLexer.output,marked.parse=marked,"undefined"!=typeof module&&"object"==typeof exports?module.exports=marked:"function"==typeof define&&define.amd?define(function(){return marked}):this.marked=marked}.call(function(){return this||("undefined"!=typeof window?window:global)}());var MgHelpAssistant=MgHelpAssistant||{};MgHelpAssistant=function($){"use strict";var config={minFaqs:"1",maxFaqs:"3"},territoryCode="",baseUrl="",results={sessionId:"",dialogPath:null,originInteractionId:"",html:""};return{init:function(params){config=$.extend(config,params),territoryCode=this.getStoreCode(),""!==config.customerKey&&""!==config.key&&(baseUrl+="https://"+params.customerKey+"-"+params.key+".digitalcx.com",delete config.customerKey,delete config.key)},ask:function(params){config=$.extend(config,params);var urlParams=$.param(config);urlParams=urlParams.replace("sessionId","session.id");var dcxUrl=baseUrl+"/ask?"+urlParams+"&dim.Territory="+territoryCode;return this.callVirtualAssistant(config,"get",dcxUrl).then(this.getResponseText,this.getError)},feedback:function(params){config=$.extend(config,params);var dcxUrl=baseUrl+"/feedback?apiKey="+config.apiKey+"&culture="+config.culture+"&originInteractionId="+config.originInteractionId,dataObj={originInteractionId:config.originInteractionId,label:config.label,score:config.score,comment:config.comment||""};return Promise.resolve($.ajax({url:dcxUrl,method:"post",dataType:"json",contentType:"application/json",async:!0,data:JSON.stringify(dataObj)})).then().catch(function(e){if("OK"===e.statusText)return Translator.translate("Thank you for your feedback!")})},broadcast:function(){var urlParams=$.param(config),dcxUrl=baseUrl+"/event/message_of_the_day?"+urlParams+"&dim.Territory="+territoryCode;return this.callVirtualAssistant(config,"get",dcxUrl).then(this.getResponseText,this.getError)},faqs:function(params){var configNoFaqs=$.extend(config,params);delete configNoFaqs.minFaqs,delete configNoFaqs.maxFaqs;var urlParams=$.param(configNoFaqs),dcxUrl=baseUrl+"/faqs?"+urlParams;return this.callVirtualAssistant(config,"get",dcxUrl).then(this.getFaqs,this.getError)},callVirtualAssistant:function(config,method,dcxUrl){return Promise.resolve($.ajax({url:dcxUrl,method:method,dataType:"json"}))},getResponseText:function(response){var outputs=response.outputs;return results={sessionId:response.sessionId,originInteractionId:response.interactionId,feedback:!0,noResults:!1,dialogOptions:!1},$.each(outputs,function(i,values){results.dialogPath=values.dialogPath,"escalation_1x_noanswer"!==values.interactionValue&&"escalation_3x_noanswer"!==values.interactionValue||(results.feedback=!1,results.noResults=!0),$.each(values.outputParts,function(y,value){var html=MgHelpAssistant.getParsedResponse(value);results.html=html,value.dialogOptions.length&&(results.dialogOptions=!0,results.feedback=!1)})}),results},getStoreCode:function(){var newStoreCode="";switch(MgResponsiveConfig.mageStoreCode){case"au_en":newStoreCode="AUS_NZ";break;case"eu_en":newStoreCode="EU";break;case"ie_en":newStoreCode="IE";break;case"us_en":newStoreCode="USA_CA";break;case"default":newStoreCode="UK";break;default:newStoreCode=""}return newStoreCode},getParsedResponse:function(answer){var text=answer.text||"",links=answer.links||[];return 0<(answer.dialogOptions||[]).length&&(text=text.replace(/%\{DialogOption\(([^)}]*)\)}/g,'<a href="#">$1</a>')),0<links.length&&(text=text.replace(/%\{Link\(([0-9]*)\)}/g,function(match){return match=/[0-9]+/g.exec(match)[0],'<a href="'+links[match-1].url+'" id="'+links[match-1].id+'" target="_blank">'+links[match-1].text+"</a>"})),marked(text)},getError:function(){return Translator.translate("Sorry, we seem to be having some difficulties. Please try refreshing the page.")},getFaqs:function(response){var outputs=response.result,qList="";return $.each(outputs,function(i,value){qList+='<li id="faq_'+value.id+'">'+value.question+"</li>"}),marked('<ol class="faqsList">'+qList+"</ol>")}}}(window.jQuery),function($){"use strict";function answerFeedbackResponse(feedbackId){var $helpContainer=$(".help-feedback-container"),$helpThumbsUp=$(".help-feedback-thumbs-up"),$helpThumbsDown=$(".help-feedback-thumbs-down");$helpContainer&&($helpThumbsUp.one("click",function(){0<!$helpContainer.find(".positive-feedback").length&&(submitCustomerFeedback(feedbackId,5),$('<div class="help-feedback-positive">').appendTo(".help-answer-container"),$helpThumbsDown.off("click"))}),$helpThumbsDown.one("click",function(){0<!$helpContainer.find(".negative-feedback").length&&($('<div class="help-feedback-negative"><form action="#" name="faq-feedback-form" id="faq-feedback-form" class="l-form negative-feedback" method="POST" autocomplete="off" onsubmit="event.preventDefault();"><fieldset class="js-fancy-form-field form-field--faq-feedback"><input type="faq-feedback-input" name="faq-feedback-input" value="" id="faq-feedback-input" class="faq-feedback-input" maxlength="128" placeholder="please could you tell us why?" autofocus="autofocus"><div class="validation-advice"></div><button disabled="" id="faq-feedback-button" value="Submit" type="submit" class="faq-feedback-button button button--short  button--submit">submit</button></fieldset></form>').appendTo(".help-answer-container"),$helpThumbsUp.off("click"),$(".faq-feedback-input").on("keyup",function(){""==$(this).val()?($(this).removeClass("form-field--populated"),$("#faq-feedback-button").attr("disabled",!0)):($(this).addClass("form-field--populated"),$("#faq-feedback-button").attr("disabled",!1))}),submitCustomerFeedback(feedbackId,-5))}))}function submitCustomerFeedback(feedbackId,score){if(-5===score)$("#faq-feedback-button").one("click",function(e){e.preventDefault();var feedback=$(".faq-feedback-input").val(),feedbackConfig={originInteractionId:feedbackId,label:"no",score:score,comment:feedback};MgHelpAssistant.feedback(feedbackConfig).then(function(response){$(".form-field--faq-feedback").css("display","none"),$(".negative-feedback").css("display","none"),$(".help-feedback-negative").css("display","none"),$('<p class="response faq-feedback">'+response+"</p>").insertAfter(".help-feedback-negative"),$(".help-feedback-container").css("display","none")})});else{var feedbackConfig={originInteractionId:feedbackId,label:"yes",score:score};MgHelpAssistant.feedback(feedbackConfig).then(function(response){$('<p class="response faq-feedback">'+response+"</p>").insertAfter(".help-feedback-positive"),$(".help-feedback-container").css("display","none")})}}function searchValidation(state){state?"enabled"===state?($searchButton.attr("disabled",!1),$searchInput.addClass("filled"),$searchButton.addClass("filled")):($searchButton.attr("disabled",!0),$searchInput.removeClass("filled"),$searchButton.removeClass("filled")):$searchInput.on("keyup focus change",function(){""==$(this).val()?($searchButton.attr("disabled",!0),$searchInput.removeClass("filled"),$searchButton.removeClass("filled")):($searchButton.attr("disabled",!1),$searchInput.addClass("filled"),$searchButton.addClass("filled")),changeIcon("search")})}function addFeedback(feedbackResponse){feedbackResponse.feedback&&($('<div class="help-feedback-container"><div class="help-answer"><p class="help-feedback-answer">Was this answer helpful?</p><span class="help-feedback-thumbs-up">YES</span><span class="help-feedback-thumbs-down">NO</span></div></div>').appendTo(".help-answer-container"),$($helpAnswerContainer).addClass("help-feeback"),$(".help-answer-container").removeClass("help-answer-single"))}function showSpinner(container){container?(container.empty(),container.html('<div class="spinner"></div>')):($searchButton.empty(),$searchButton.html('<div class="spinner"></div>'))}function changeIcon(response){$searchButton.empty(),"cross"===response?$searchButton.html('<svg class="help-search-button-icon icon icon--cross-alt"><title>Clear FAQ\'s</title><use xlink:href="#icon-cross-alt"/></svg>'):$searchButton.html('<svg class="help-search-button-icon icon icon--search-alt"><title>Search FAQ\'s</title><use xlink:href="#icon-search-alt"/></svg>')}var $accordion,$searchInput=$(".help-search-form__input"),$searchButton=$("#help-search-form__button"),$searchContainer=$(".help-search-container"),$helpAnswerContainer=$(".help-answer-container");$("body").hasClass("cms-help")&&(MgHelpAssistant.init({customerKey:"missguided",key:"missguided",apiKey:"05eedaf2-fa52-43e1-9937-be4d4c315218",culture:"en"}),$accordion=$(".js-accordion"),$(".ui-accordion--dcx-help .js-accordion").length&&$accordion.accordion({active:!1,animate:250,icons:!1,collapsible:!0,heightStyle:"content"}).on("click",function(){$accordion.not(this).accordion("option","active",!1)}),MgHelpAssistant.broadcast().then(function(response){response.html?$(".help-weather-container").html('<div class="help-weather"><div class="help-weather-content">'+response.html+"</div></div>"):$(".help-weather-container").remove()}),searchValidation(),$searchButton.on("click",function(e){e.preventDefault()}),$searchButton.on("click",_.debounce(function(){var $question,$searchIcon,prevAnswer,feedbackContainer,feedbackSadFace,feedbackForm,feedbackHappyFace,feedbackHappyResponse,feedbackSadResponse;$question=$searchInput.val(),$searchIcon=$(".help-search-button-icon"),prevAnswer=$(".help-answer-container"),feedbackContainer=$(".help-feedback-container"),feedbackSadFace=$(".help-feedback-negative"),feedbackForm=$(".negative-feedback"),feedbackHappyFace=$(".help-feedback-positive"),feedbackHappyResponse=$(".positive-feedback"),feedbackSadResponse=$(".faq-feedback"),$searchIcon.hasClass("icon--cross-alt")?(prevAnswer.remove(),feedbackContainer.remove(),feedbackSadFace.remove(),feedbackForm.remove(),feedbackHappyFace.remove(),feedbackHappyResponse.remove(),feedbackSadResponse.remove(),function(previousContent){$searchInput.val(""),previousContent.remove()}(prevAnswer),changeIcon("search"),searchValidation("disabled")):(showSpinner(),searchValidation("disabled"),prevAnswer.remove(),feedbackContainer.remove(),feedbackSadFace.remove(),feedbackForm.remove(),feedbackHappyFace.remove(),feedbackHappyResponse.remove(),feedbackSadResponse.remove(),setTimeout(function(){MgHelpAssistant.ask({q:$question}).then(function(response){if(searchValidation("enabled"),void 0!==response.html?$('<div class="help-answer-container">'+response.html+"</div>").insertAfter($searchContainer):$('<div class="help-answer-container error">'+response.html+"</div>").insertAfter($searchContainer),$(".help-answer-container").addClass("help-answer-single"),response.noResults)changeIcon("cross");else{changeIcon("cross");var $helpContainer=$(".help-answer-container");addFeedback(response),answerFeedbackResponse(response.originInteractionId)}response.dialogPath&&!function showDialog(response,helpContainer){$(".help-answer-container a").on("click",function(e){e.preventDefault();var dialogOption=$(this).text(),config={q:dialogOption,sessionId:response.sessionId,dialogPath:response.dialogPath};$searchInput.val(dialogOption),showSpinner(helpContainer),setTimeout(function(){MgHelpAssistant.ask(config).then(function(response){helpContainer.html(response.html),response.dialogOptions?showDialog(response,helpContainer):(addFeedback(response),answerFeedbackResponse(response.originInteractionId))})},200)})}(response,$helpContainer)})},200)),$searchInput.blur()},200)));var scrolling=!1,scolllHandler=_.debounce(function(){var currentGreatestVal=0,currentGreatestInd=null;$(".help-returns-options li").each(function(ind){var rect=this.getBoundingClientRect(),contWidth=jQuery(".help-returns-options ul").width()+10,spaceTaken=0;rect.x<0&&0<rect.x+rect.width&&(spaceTaken=rect.width+rect.x),0<rect.x&&rect.x<contWidth&&(spaceTaken=contWidth-rect.x),currentGreatestVal<spaceTaken&&(currentGreatestVal=spaceTaken,currentGreatestInd=ind)}),scrolling=!0,$(".help-returns-options ul").animate({scrollLeft:195*currentGreatestInd},200,function(){scrolling=!1})},200);$(".help-returns-options ul").on("scroll",function(evt){!0!==scrolling&&scolllHandler(evt)})}(window.jQuery);