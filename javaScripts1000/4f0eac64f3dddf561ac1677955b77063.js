define(["require"],function(moduleRequire){"use strict";function testElementStyle(e,r,s){var t=document.documentElement,c=t.insertBefore(document.createElement(e),t.firstChild);c.id=r;var l=(c.currentStyle||getComputedStyle(c,null)||{})[s];return t.removeChild(c),l}return{load:function(resourceDef,require,callback,config){var url=require.toUrl(resourceDef),options;url.match(/!$/)&&(options={wait:!1},url=url.slice(0,-1));var cachedCss=require.cache&&require.cache["url:"+url];if(null==cachedCss){var displayStyle=testElementStyle("div",resourceDef.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if("none"==displayStyle)return checkForParser();moduleRequire(["./core/load-css"],function(e){e(url,checkForParser,options)})}else{if(cachedCss.xCss){var parser=cachedCss.parser,xCss=cachedCss.xCss;cachedCss=cachedCss.cssText}"string"==typeof cachedCss?moduleRequire(["./core/load-css"],function(e){checkForParser(e.insertCss(cachedCss))}):checkForParser()}function checkForParser(styleSheetElement){var parser=testElementStyle("x-parse",null,"content"),sheet=styleSheetElement&&(styleSheetElement.sheet||styleSheetElement.styleSheet);parser&&"none"!=parser&&"normal"!=parser?require([eval(parser)],function(e){styleSheetElement?e.process(styleSheetElement,callback):(e.processAll(),callback(sheet))}):callback(sheet)}}}});