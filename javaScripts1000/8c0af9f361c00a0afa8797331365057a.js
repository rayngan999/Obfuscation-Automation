window.tsDotClient=window.tsDotClient||new function(t,e){function o(){y.log("main",v.path,p),c()}function n(){if(e.currentScript)return e.currentScript.src;for(var t=e.getElementsByTagName("script"),o=0;o<t.length;o++){var n=t[o];if(g.test(n.src))return n.src}return""}function r(){for(var e={},o=["product","basket","sale","customer"],n=0;n<o.length;n++){var r=o[n],a=p[r]||t[r];a&&"object"==typeof a&&void 0===a.tagName&&(y.log("soc:",r,a),e[r]=a)}return"undefined"!=typeof JSON&&(e=JSON.parse(JSON.stringify(e))),e.product&&e.product.description&&(e.product.description=e.product.description.substring(0,200)),e.product&&(e.product.alternativeImages||[]).length>5&&(e.product.alternativeImages=e.product.alternativeImages.slice(0,5)),e}function a(){return t.location.href}function i(){return parent!==t?e.referrer||"":""}function s(t){return t=encodeURIComponent(t)}function c(){var o=e.createElement("iframe"),n={soc:r(),url:a(),parentUrl:i(),productUrl:p.url||"",ver:"v0.1.12",tags:p.tags||"",ajax:p.ajax||0,utDomain:m,dsp:t.pxDsp};d(n),y.log(n),o.width=1,o.height=1,o.style.border="none",o.style.position="absolute",o.style.overflow="hidden",o.style.top="-1px",o.src=v.path+"/iframe.html?ver=v0.1.12&pageUrl="+s(n.url)+"&tags="+n.tags,o.onload=function(){y.log("iframe loaded"),o.contentWindow.postMessage(n,v.path)},e.body.appendChild(o),u()}function d(t){if("function"==typeof tsDotModify)try{tsDotModify(t,y)}catch(t){y.error("tsDotModify",t)}}function l(){try{if(t.localStorage)return!0}catch(t){return y.error("try:",t),!1}return!1}function u(){function e(e){y.log("message from iframe:",e),e.data&&e.data.pesid&&l()&&t.localStorage.setItem("px_pesid",e.data.pesid)}t.addEventListener?addEventListener("message",e,!1):attachEvent("onmessage",e)}function f(e){t.addEventListener?t.addEventListener("DOMContentLoaded",function(){e.called||(e.called=1,y.log("dom ready"),e())},!1):t.attachEvent&&t.attachEvent("onload",function(){e.called||(e.called=1,y.log("onload"),e())}),setTimeout(function(){e.called||(e.called=1,y.log("setTimeout"),e())},1e3)}if(!navigator.userAgent.match(/googlebot|seznambot|yandex|Baidu|BingPreview|msnbot|bingbot|Slurp|Sosospider|Google Web Preview|screenshot\-generator/i)){var p=t.tsDot||{},g=/ut\.js$/,m=function(){var t=n();return t?t.split("/")[2]:""}(),v=this;v.path=t.dotUrl||"https://ut.performax.cz/js";var h=function(){},y=e.cookie.indexOf("ts.debug=1")>-1&&t.console||{log:h,error:h,warn:h,info:h,debug:h};return y.log("init"),p.onlyAjax?y.log("exit: only ajax call"):f(o),v.ajax=function(e){y.log("ajax: data=",e,"self.tsDot=",p,"window.tsDot=",t.tsDot),(p=e||t.tsDot||{}).ajax=1,o()},this}}(window,document);