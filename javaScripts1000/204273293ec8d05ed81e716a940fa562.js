(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk/components/common/GlobalPlayer/component/PlayerMainBox"],{1035:function(e,t,a){"use strict";var l=a(2),o=a(0),r=a(823),i=a(680),n=a(824).a,c=a(5),s=Object(c.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-player-control-item global-player-control-album-info-box"},[a("div",{staticClass:"global-player-control-album-info-item"},[a("pp-router-link",{attrs:{to:e.head_title_url,title:e.head_title},nativeOn:{click:function(t){return e.gotoAlbumPage(t)}}},[a("div",{staticClass:"album-photo lazyload",attrs:{"data-src":e.cover_url}})])],1),e._v(" "),a("div",{staticClass:"global-player-control-album-info-item",attrs:{rel:"album-title"}},[a("pp-router-link",{attrs:{to:e.head_title_url,title:e.head_title},nativeOn:{click:function(t){return e.gotoAlbumPage(t)}}},[a("span",{domProps:{textContent:e._s(e.head_title)}})])],1),e._v(" "),a("div",{staticClass:"global-player-control-album-info-item",attrs:{rel:"collection"}},["timeline"===e.track_source?[a("button",{staticClass:"btn btn-sm",class:{"btn-error":!e.is_followed,"btn-outline-error":e.is_followed},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.clickFollow(t)}}},[e.is_followed?[e._v("\n                    å·²è¿½è¹¤\n                ")]:[a("i",{staticClass:"icon icon-follow_outline"}),e._v("\n                    è¿½è¹¤\n                ")]],2)]:e._e(),e._v(" "),"album"===e.track_source?[a("button",{staticClass:"btn btn-sm",class:{"btn-primary":!e.is_collected,"btn-outline-primary":e.is_collected},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.clickCollect(t)}}},[e.is_collected?[e._v("\n                    å·²æ¶è\n                ")]:[a("i",{staticClass:"icon icon-collect_outline"}),e._v("\n                    æ¶è\n                ")]],2)]:e._e()],2)])}),[],!1,null,"2b517450",null).exports,u=a(825).a,p=Object(c.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"global-player-control-item global-player-control-trick-title-box"},[a("div",{staticClass:"global-player-control-trick-title-string"},[a("string-marquee-box",[a("pp-router-link",{attrs:{to:e.track_title_url},nativeOn:{click:function(t){return e.gotoTrackPage(t)}}},[a("span",{domProps:{textContent:e._s(e.track_title)}})])],1)],1),e._v(" "),a("div",{staticClass:"share-btn",on:{click:e.triggerShareUrl}},[a("i",{staticClass:"icon icon-social_share_S"})])]),e._v(" "),a("div",{staticClass:"global-player-control-item global-player-control-trick-desc-box"},[e.readLoading?[a("div",{staticClass:"global-player-control-trick-desc-empty"},[e._v("\n                è®åä¸­\n            ")])]:e.timeline_desc?[a("div",{staticClass:"global-player-control-trick-desc-info"},[e._v("\n                "+e._s(e.timeline_desc)+"\n            ")]),e._v(" "),a("pp-router-link",{staticClass:"global-player-control-trick-desc-more-btn",attrs:{to:e.track_title_url},nativeOn:{click:function(t){return e.gotoTrackDescription(t)}}},[e._v("\n                More\n            ")])]:[a("div",{staticClass:"global-player-control-trick-desc-empty"},[e._v("\n                æ²ææè¿°\n            ")])]],2)])}),[],!1,null,"6128bfcb",null).exports,y=a(826).a,f=Object(c.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-player-control-item global-player-control-progress-box"},[a("div",{staticClass:"global-player-control-progress-info"},[a("div",{staticClass:"global-player-control-progress-item"},[a("span",{domProps:{textContent:e._s(e.playerCurrentTime)}})]),e._v(" "),a("div",{staticClass:"global-player-control-progress-item"},[a("span",{domProps:{textContent:e._s(e.playerDurationTime)},on:{click:e.changeReciprocal}})])]),e._v(" "),a("div",{staticClass:"global-player-control-progress-bar-box",class:{grabbing:!!e.progressBarDrag},attrs:{"data-ref":"control-process-bar-box"}},[a("div",{staticClass:"global-player-control-progress-ball",style:{left:e.playCurrentPercent+"%"},attrs:{"data-ref":"control-process-bar-box",draggable:"true"}}),e._v(" "),a("div",{staticClass:"global-player-control-progress-bar",style:{width:e.playCurrentPercent+"%"},attrs:{rel:"current"}}),e._v(" "),e._l(e.globalPlayerInfoBufferBar,(function(e,t){return a("div",{key:t,staticClass:"global-player-control-progress-bar",style:{left:e.left+"%",width:e.width+"%"},attrs:{rel:"buffer"}})})),e._v(" "),a("div",{staticClass:"global-player-control-progress-bar",attrs:{rel:"default"}})],2),e._v(" "),a("div",{staticClass:"global-player-notice-msg",attrs:{rel:e.noticeMsg.type},domProps:{textContent:e._s(e.noticeMsg.text)}})])}),[],!1,null,"42bd1289",null).exports,g=a(827).a,d=Object(c.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-player-control-item global-player-control-controller-box"},[a("div",{staticClass:"global-player-control-controller-wrapper",attrs:{rel:"controller"}},[a("div",{staticClass:"global-player-control-controller-item"},[a("div",{staticClass:"global-player-control-controller-btn goto-track-btn",class:{disabled:-1===e.prevTrackIndex},attrs:{rel:"prev"},on:{click:function(t){return e.clickGoToTrack(-1)}}},[a("i",{staticClass:"icon icon-previous_audio"})])]),e._v(" "),a("div",{staticClass:"global-player-control-controller-item"},[a("div",{staticClass:"global-player-control-controller-btn goto-btn",attrs:{rel:"prev","data-time":e.goToTime},on:{click:function(t){return e.clickGoTo(-e.goToTime)}}},[a("i",{staticClass:"icon icon-previous_time_border"})])]),e._v(" "),a("div",{staticClass:"global-player-control-controller-item"},[a("div",{staticClass:"global-player-control-controller-btn play-btn",class:{"is-play":"play"===e.globalPlayerInfoStatus},attrs:{status:e.globalPlayerInfoStatus,"play-speed":e.globalPlayerInfoPlaySpeed},on:{click:e.clickPlayOrPause}},[a("i",{staticClass:"icon",class:{"icon-arrow_play_border":"play"!==e.globalPlayerInfoStatus,"icon-audio_pause_light":"play"===e.globalPlayerInfoStatus}})])]),e._v(" "),a("div",{staticClass:"global-player-control-controller-item"},[a("div",{staticClass:"global-player-control-controller-btn goto-btn",attrs:{rel:"next","data-time":e.goToTime},on:{click:function(t){return e.clickGoTo(e.goToTime)}}},[a("i",{staticClass:"icon icon-after_time_border"})])]),e._v(" "),a("div",{staticClass:"global-player-control-controller-item"},[a("div",{staticClass:"global-player-control-controller-btn goto-track-btn",class:{disabled:-1===e.nextTrackIndex},attrs:{rel:"next"},on:{click:function(t){return e.clickGoToTrack(1)}}},[a("i",{staticClass:"icon icon-after_audio"})])])]),e._v(" "),a("div",{staticClass:"global-player-control-controller-wrapper",attrs:{rel:"other"}},[a("div",{staticClass:"global-player-control-controller-item"},[a("div",{staticClass:"global-player-control-controller-btn normal-btn",on:{click:e.triggerDiscussUrl}},[a("i",{staticClass:"icon icon-comment"})])]),e._v(" "),a("div",{staticClass:"global-player-control-controller-item"},[a("loop-type-box",{attrs:{version:e.version}})],1),e._v(" "),a("div",{staticClass:"global-player-control-controller-item"},[a("speed-btn-box",{attrs:{version:e.version},on:{"trigger-control-player-btn":e.triggerControlPlayerBtn}})],1),e._v(" "),a("div",{staticClass:"global-player-control-controller-item"},[a("div",{staticClass:"global-player-control-controller-btn normal-btn pp-tooltip",attrs:{"data-title":"å å¥æ¸å®"},on:{click:e.clickColllectTrack}},[a("i",{staticClass:"icon icon-add"})])]),e._v(" "),a("div",{staticClass:"global-player-control-controller-item"},[a("div",{staticClass:"global-player-control-controller-btn normal-btn pp-tooltip",attrs:{"data-title":"æ­æ¾æ¸å®"},on:{click:e.triggerPlayerCollect}},[a("i",{staticClass:"icon icon-audio_list"})])])])])}),[],!1,null,"7d9765de",null).exports;function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=o.f.get("MemberInfo.member_id"),P=!!m,v={components:{playerControlAlbumInfoBox:s,playerControlTrackInfoBox:p,playerControlProcessBox:f,playerControlControllerBox:d},filters:{},mixins:[r.a],props:{version:{type:String,default:"1.0"}},data:function(){return{isLogin:P,PageSetting_page_scroll_Timer:null,PlayerInfoTimer:null,focus_file_key:"",defaultAttachInfo:{file_key:"",filename:"",duration:0,last_play_second:0,play_count:0,record:{last_time_second:0,last_updated_time:null,completed:0,max_completed:0}},attachInfo:!1,playerTarget:!1,setPlayerDurationLogTimer:1e4,playErrorCount:0,mediaSessionActionForce:!1,playerProcessBufferList:[],notice_msg:!1,notice_msg_timer:!1,lastUpdateIndex:{queue_id:"",play_index:""},autoLoadMore:!0,init:!1,autoPlayErrorTriggerLayout:!1}},computed:h({},Object(l.mapGetters)({PageSetting_page_focus:"PageSetting_page_focus",PageSetting_page_scroll:"PageSetting_page_scroll",PlayerAttachList:"PlayerAttachList",triggerGlobalPlayerPlay:"triggerGlobalPlayerPlay",triggerGlobalPlayerStop:"triggerGlobalPlayerStop",LocalStorage_DEFAULT:"".concat(i.a,"/LocalStorage_DEFAULT"),LSGlobalPlayerId:"".concat(i.a,"/LSGlobalPlayerId"),loopTypeList:"".concat(i.a,"/loopTypeList"),globalPlayerId:"".concat(i.a,"/globalPlayerId"),miniPlayerNextTrack:"".concat(i.a,"/miniPlayerNextTrack"),globalPlayerQueue:"".concat(i.a,"/globalPlayerQueue"),globalPlayerQueue_id:"".concat(i.a,"/globalPlayerQueue_id"),globalPlayerQueueIndexToArrayIndexMapping:"".concat(i.a,"/globalPlayerQueueIndexToArrayIndexMapping"),globalPlayerQueue_player_index:"".concat(i.a,"/globalPlayerQueue_player_index"),globalPlayerQueueInfoLite:"".concat(i.a,"/globalPlayerQueueInfoLite"),globalPlayerLoopType:"".concat(i.a,"/globalPlayerLoopType"),globalPlayerInfo:"".concat(i.a,"/globalPlayerInfo"),globalPlayerInfoLite:"".concat(i.a,"/globalPlayerInfoLite"),globalPlayerInfoStatus:"".concat(i.a,"/globalPlayerInfoStatus"),globalPlayerInfoCurrentTime:"".concat(i.a,"/globalPlayerInfoCurrentTime"),globalPlayerInfoCurrentTimeForce:"".concat(i.a,"/globalPlayerInfoCurrentTimeForce"),globalPlayerInfoDuration:"".concat(i.a,"/globalPlayerInfoDuration"),globalPlayerInfoPlaySpeed:"".concat(i.a,"/globalPlayerInfoPlaySpeed"),globalPlayerInfo_nextTrackIndex:"".concat(i.a,"/globalPlayerInfo_nextTrackIndex"),globalPlayerInfo_prevTrackIndex:"".concat(i.a,"/globalPlayerInfo_prevTrackIndex"),autoLoadMoreForceStopPrev:"".concat(i.a,"/autoLoadMoreForceStopPrev"),autoLoadMoreForceStopNext:"".concat(i.a,"/autoLoadMoreForceStopNext")}),{},Object(l.mapState)({}),{boxClass:function(){var e={};if(this.globalPlayerQueue.length>0)switch(this.globalPlayerStatus){case"control":e["toggle-open"]=!0,e["toggle-close"]=!1,e["toggle-hidden"]=!1;break;case"queue":e["toggle-open"]=!1,e["toggle-close"]=!0,e["toggle-hidden"]=!1;break;case"collect":e["toggle-open"]=!1,e["toggle-close"]=!1,e["toggle-hidden"]=!0}else e.disabled=!0;return e}}),watch:{LSGlobalPlayerId:function(){this.LSGlobalPlayerId!==this.globalPlayerId&&this.playerTarget&&(this.playerTarget.forcePause=!0,this.playerTarget.pause(),this.destoryMediaSession())},globalPlayerLoopType:function(e,t){this.PageSetting_page_focus&&""!==this.lastUpdateIndex.queue_id&&(this.notice_msg={type:"default",text:this.loopTypeList[this.globalPlayerLoopType].title},this.notice_msg_timer=3e3)},miniPlayerNextTrack:function(){this.playerGotoTrack(1,!0)},globalPlayerQueue_id:function(){this.resetPlayerInfo()},globalPlayerQueue:function(){this.resetPlayerInfo()},globalPlayerQueue_player_index:function(){this.resetPlayerInfo()},globalPlayerInfo:function(){this.globalPlayerInfo.file_key!==this.focus_file_key?this.focus_file_key=this.globalPlayerInfo.file_key:this.checkPlayerTargetPlay(),this.clearPlayerTrigger()},focus_file_key:function(){var e=JSON.parse(JSON.stringify(this.defaultAttachInfo));e=h({},e,{},this.PlayerAttachList[this.focus_file_key]||{}),this.attachInfo=e},attachInfo:function(e,t){e.file_key!==t.file_key&&(this.setGlobalPlayerInfoDuration(this.attachInfo.duration),this.checkPlayerTargetPlay())},globalPlayerInfoStatus:function(e){if(!this.playerTarget&&this.attachInfo.filename&&this.checkPlayerTargetPlay(),this.playerTarget)switch(this.globalPlayerInfoStatus){case"play":!this.PageSetting_page_focus&&!this.mediaSessionActionForce||this.playerTarget.play_error||this.playerTarget.play();break;default:this.playerTarget.pause()}this.mediaSessionActionForce=!1},globalPlayerInfoPlaySpeed:function(){this.playerTarget&&this.playerTarget.playbackRate!==this.globalPlayerInfoPlaySpeed&&(this.playerTarget.playbackRate=this.globalPlayerInfoPlaySpeed)},PageSetting_page_focus:function(e,t){e!==t&&!0===e&&this.LSGlobalPlayerId!==this.globalPlayerId&&this.checkPlayerTargetPlay(!0)},PageSetting_page_scroll:function(e,t){var a=this;a.PageSetting_page_focus||e===t||(clearTimeout(a.PageSetting_page_scrollTimer),a.PageSetting_page_scrollTimer=setTimeout((function(){a.LSGlobalPlayerId!==a.globalPlayerId&&a.checkPlayerTargetPlay(!0)}),500))},notice_msg_timer:function(e,t){var a=this;!1!==e&&Number.isInteger(e)?(clearTimeout(a.notice_msg_timer_obj),a.notice_msg_timer_obj=setTimeout((function(){a.notice_msg=!1,a.notice_msg_timer=!1}),a.notice_msg_timer)):e!==t&&(a.notice_msg_timer=!1)},triggerGlobalPlayerPlay:function(){this.playerTargetPlay()},triggerGlobalPlayerStop:function(){this.playerTargetPause()}},created:function(){},mounted:function(){this.resetPlayerInfo()},updated:function(){},destroyed:function(){},methods:h({},Object(l.mapActions)({}),{},Object(l.mapMutations)({changeGlobalPlayerBoxOpen:"".concat(i.a,"/changeGlobalPlayerBoxOpen"),setGlobalPlayerInfo:"".concat(i.a,"/setGlobalPlayerInfo"),setLSGlobalPlayerId:"".concat(i.a,"/setLSGlobalPlayerId"),setGlobalPlayerInfoPlayStatus:"".concat(i.a,"/setGlobalPlayerInfoPlayStatus"),setGlobalPlayerInfoCurrentTime:"".concat(i.a,"/setGlobalPlayerInfoCurrentTime"),setGlobalPlayerInfoCurrentTimeForce:"".concat(i.a,"/setGlobalPlayerInfoCurrentTimeForce"),setGlobalPlayerInfoDuration:"".concat(i.a,"/setGlobalPlayerInfoDuration"),setGlobalPlayerPlayIndex:"".concat(i.a,"/setGlobalPlayerPlayIndex"),setGlobalPlayerInfoPlaySpeed:"".concat(i.a,"/setGlobalPlayerInfoPlaySpeed"),setGlobalPlayerInfoTrackIndex:"".concat(i.a,"/setGlobalPlayerInfoTrackIndex")}),{closePlayer:function(){this.changeGlobalPlayerBoxOpen(!1)},resetPlayerInfo:function(){var e=this,t=this;clearTimeout(t.PlayerInfoTimer),t.globalPlayerQueue&&t.globalPlayerQueue_player_index>=0?t.PlayerInfoTimer=setTimeout((function(){var a=e.globalPlayerQueueIndexToArrayIndexMapping[t.globalPlayerQueue_player_index];if(t.globalPlayerQueue[a]){var l=t.globalPlayerQueue[a];if(t.setGlobalPlayerInfo(l),o.p.pageAction("GlobalPlayer_PlayerInfo_change",{version:e.version,queue_info:e.globalPlayerQueueInfoLite,player_info:e.globalPlayerInfoLite}),t.autoLoadMore&&[0,t.globalPlayerQueue.length-1].includes(a)){var r=0===a?"prev":"next";("prev"===r&&!t.autoLoadMoreForceStopPrev||"next"===r&&!t.autoLoadMoreForceStopNext)&&(t.autoLoadMore=!1,t.$store.dispatch("".concat(i.a,"/getGlobalPlayerQueueLoadMore"),r).then((function(e){setTimeout((function(){t.autoLoadMore=!0}),2e3)}),(function(e){setTimeout((function(){t.autoLoadMore=!0}),2e3)})))}}else e.playerTargetPause();t.calcPlayerDirectionIndex()}),200):this.playerTargetPause()},calcPlayerDirectionIndex:function(){this.setGlobalPlayerInfoTrackIndex({type:"nextTrackIndex",value:this.calcNextIndex(1)}),this.setGlobalPlayerInfoTrackIndex({type:"prevTrackIndex",value:this.calcNextIndex(-1)})},checkPlayerTargetPlay:function(e){var t=this,a=this;(this.PageSetting_page_focus||this.mediaSessionActionForce||a.LSGlobalPlayerId===a.globalPlayerId)&&a.globalPlayerInfo.can_play&&(a.createPlayerTarget(),a.checkPlayerCurrentTime(e),setTimeout((function(){"play"===a.globalPlayerInfoStatus&&a.playerTarget&&(a.playerTarget.forcePause=!0,a.playerTarget.play().then((function(){}),(function(){a.notice_msg_timer=!1,a.notice_msg={type:"default",text:"ä»»æé»ææ­æ¾"},a.autoPlayErrorTriggerLayout=!0})),o.p.pageAction("GlobalPlayer_Player_checkPlay_trigger",{version:t.version,player_info:t.globalPlayerInfoLite}))}),1))},createPlayerTarget:function(){var e=this;e.playerTarget&&(e.playerTarget.src===e.attachInfo.filename&&e.playerTarget.file_key===e.attachInfo.file_key||(e.playerTarget.forcePause=!0,e.playerTarget.pause(),delete e.playerTarget)),e.playerTarget||(e.playerTarget=new Audio);e.playerTarget.loadstart=function(){},e.playerTarget.onerror=function(){(this.play_error=!0,e.playErrorCount+=1,e.playErrorCount>3)?(o.h.get(e.LocalStorage_DEFAULT.globalPlayerErrorUrl,!1)!==this.src&&(o.n.warning({html:"é³æªæ­æ¾å¤±æï¼è«æ´½è©¢å®¢æäººå¡",confirmButtonText:"éæ°æ´ç",cancelButtonText:"ç¢ºå®",showConfirmButton:!0,showCancelButton:!0},(function(){window.location.reload()}),(function(){})),o.h.set(e.LocalStorage_DEFAULT.globalPlayerErrorUrl,this.src)),setTimeout((function(){e.notice_msg_timer=!1,e.notice_msg={type:"error",text:"æ­æ¾å¤±æ"}}),500),e.playerTargetPause(),e.playErrorCount=0):e.playErrorRePlay()},e.playerTarget.onloadedmetadata=function(){},e.playerTarget.onloadeddata=function(){e.playErrorCount=0,this.lastCurrentTimeRecordTime=0,this.lastCurrentTimeLSRecordTime=0,this.lastPlayerRecordTime=0,e.setGlobalPlayerInfoDuration(this.duration),"play"===e.globalPlayerInfoStatus?(e.notice_msg_timer=!1,e.notice_msg={type:"default",text:"é³æªè¼å¥ä¸­"}):e.notice_msg=!1},e.playerTarget.onprogress=function(t){!function(t){for(var a=[],l=0;l<t.buffered.length;l+=1){var o=t.buffered.start(l),r=t.buffered.end(l);a.push({start:o,end:r})}e.playerProcessBufferList=a}(this)},e.playerTarget.oncanplay=function(){e.playErrorCount=0,o.h.set(e.LocalStorage_DEFAULT.globalPlayerErrorUrl,!1),o.p.pageAction("projectArticle_attached_log_trigger",{project_id:e.globalPlayerInfoLite.project_id,channel_id:e.globalPlayerInfoLite.channel_id,album_id:e.globalPlayerInfoLite.album_id,timeline_key:e.globalPlayerInfoLite.timeline_key,file_key:e.globalPlayerInfoLite.file_key,type:"audio"})},e.playerTarget.oncanplaythrough=function(e){},e.playerTarget.onseeking=function(t){e.notice_msg={type:"default",text:"è®åä¸­..."}},e.playerTarget.onseeked=function(t){e.notice_msg=!1},e.playerTarget.onplay=function(){e.setGlobalPlayerIdToLS(),e.setGlobalPlayerQueueInfoToLS(),"play"!==e.globalPlayerInfoStatus&&e.setGlobalPlayerInfoPlayStatus({status:"play",force:!1}),e.setMediaSession(),e.notice_msg_timer=!1,e.notice_msg={type:"default",text:"é³æªè¼å¥ä¸­"}},e.playerTarget.onpause=function(){this.forcePause||"play"!==e.globalPlayerInfoStatus||e.setGlobalPlayerInfoPlayStatus({status:"pause",force:!1}),this.forcePause=!1,e.notice_msg=!1},e.playerTarget.onended=function(){e.setGlobalPlayerInfoCurrentTime(0),e.playerEndTrigger()},e.playerTarget.ontimeupdate=function(){var t=(new Date).getTime(),a=this.currentTime;if(t-this.lastCurrentTimeRecordTime>100&&(this.lastCurrentTimeRecordTime=t,e.setGlobalPlayerInfoCurrentTime(a)),t-this.lastCurrentTimeLSRecordTime>1e3){this.lastCurrentTimeLSRecordTime=t;var l={file_key:e.attachInfo.file_key,currentTime:a};o.h.set(e.LocalStorage_DEFAULT.globalPlayerDurationInfo,l)}if(!this.paused){if(this.currentTime-this.lastPlayerRecordTime>e.setPlayerDurationLogTimer/1e3||this.lastPlayerRecordTime>this.currentTime){this.lastPlayerRecordTime=this.currentTime;var r=Math.floor((this.currentTime/this.duration*100).toFixed(2)),i={type:"audio",attachedId:e.globalPlayerInfo.file_key,duration:Math.floor(a),completed:r,memberId:m||"",playerStatus:this.paused?"stop":"playing"};o.m.post(i)}!1!==e.notice_msg&&(e.notice_msg=!1)}},e.playerTarget.file_key=e.attachInfo.file_key,e.playerTarget.src!==e.attachInfo.filename?(e.playerTarget.src=e.attachInfo.filename,e.notice_msg_timer=!1,e.notice_msg={type:"default",text:"åæé³æª"}):(e.notice_msg_timer=!1,e.notice_msg={type:"default",text:"è®åä¸­..."}),e.playerTarget.playbackRate=e.globalPlayerInfoPlaySpeed;var t={queue_id:e.globalPlayerQueue_id,play_index:e.globalPlayerQueue_player_index||0};e.lastUpdateIndex.queue_id===t.queue_id&&e.lastUpdateIndex.play_index===t.play_index||e.$store.dispatch("".concat(i.a,"/updateIndexFromPlayQueueList"),t),e.lastUpdateIndex=t},clearPlayerTrigger:function(){var e=document.createElement("a");e.href=window.location.href;var t=o.s.getJsonFromUrl(e.search.substr(1));t.player_trigger&&t.player_trigger===this.globalPlayerInfo.file_key&&(delete t.player_trigger,t=Object.keys(t).length>0?o.s.object2QueryStr(t):"",e.search=t,o.e.replaceState(null,null,e.href.replace(e.origin,"")))},setMediaSession:function(){var e=this;if("mediaSession"in window.navigator){var t=window.navigator.mediaSession;t.metadata=new MediaMetadata({title:e.globalPlayerInfo.track_title,album:e.globalPlayerInfo.head_title,artwork:[{src:e.globalPlayerInfo.cover_url,sizes:"512x512"}]}),t.setActionHandler("play",(function(){e.mediaSessionActionForce=!0,e.triggerControlPlayerBtn({type:"play"})})),t.setActionHandler("pause",(function(){e.triggerControlPlayerBtn({type:"pause"})})),t.setActionHandler("seekbackward",(function(){e.triggerControlPlayerBtn({type:"goto",value:-1*e.$refs["controller-box"].goToTime})})),t.setActionHandler("seekforward",(function(){e.triggerControlPlayerBtn({type:"goto",value:1*e.$refs["controller-box"].goToTime})})),-1!==this.calcNextIndex(-1)?t.setActionHandler("previoustrack",(function(){e.triggerControlPlayerBtn({type:"gotoTrack",value:-1})})):t.setActionHandler("previoustrack",null),-1!==this.calcNextIndex(1)?t.setActionHandler("nexttrack",(function(){e.triggerControlPlayerBtn({type:"gotoTrack",value:1})})):t.setActionHandler("nexttrack",null)}},destoryMediaSession:function(){if("mediaSession"in window.navigator){var e=window.navigator.mediaSession;this.playerTarget=null,e.metadata=new MediaMetadata({title:"æ­æ¾å¨æ«å",album:" ",artwork:[]}),["play","pause","seekbackward","seekforward","previoustrack","nexttrack"].forEach((function(t){e.setActionHandler(t,null)}))}},checkPlayerCurrentTime:function(e){if(this.playerTarget){var t=!1;if(!0===this.globalPlayerInfoCurrentTimeForce&&(t=0),e&&(t=!1),!1===t){var a=o.h.get(this.LocalStorage_DEFAULT.globalPlayerDurationInfo),l=a.file_key,r=a.currentTime;l&&Number.isFinite(r)&&this.playerTarget.file_key===l&&(t=r)}if(!1===t){var i=this.attachInfo.record.last_time_second;this.attachInfo.duration-i<=this.setPlayerDurationLogTimer/1e3&&(i=0),t=i}!1===t&&(t=0),this.playerTarget.currentTime=t,this.setGlobalPlayerInfoCurrentTime(t),this.setGlobalPlayerInfoCurrentTimeForce(!1)}},playErrorRePlay:function(){this.playerTarget&&(this.playerTarget.pause(),delete this.playerTarget),this.createPlayerTarget()},triggerControlPlayerBtn:function(e){var t=e.type,a=e.value;switch(t){case"playOrPause":this.playerTarget&&("pause"===this.globalPlayerInfoStatus?this.playerTargetPlay():this.playerTargetPause());break;case"play":this.playerTargetPlay();break;case"pause":case"stop":this.playerTargetPause();break;case"goto":this.playerGoTo(a);break;case"gotoTrack":this.playerGotoTrack(a,!0);break;case"playSpeed":this.playerPlaySpeed(a);break;case"shareUrl":this.clickShareUrl();break;case"discuss":this.clickDiscuss();break;case"collectTrack":this.clickCollectTrack()}},changeCurrentTime:function(e){this.playerTarget&&Number.isFinite(e)&&(e<this.globalPlayerInfoDuration?this.playerTarget.currentTime=e:this.playerTarget.currentTime=this.globalPlayerInfoDuration)},playerGoTo:function(e){if(this.playerTarget&&Number.isFinite(e)){var t=this.playerTarget.currentTime+e;this.changeCurrentTime(t),o.p.pageAction("GlobalPlayer_controller_btn_click",{version:this.version,playerType:"main",act_type:"goto",act_value:parseFloat(e),player_info:this.globalPlayerInfoLite})}},playerGotoTrack:function(e,t){var a=this.calcNextIndex(e);-1!==a&&(t&&this.setGlobalPlayerInfoPlayStatus({status:"play",force:!0}),this.setGlobalPlayerPlayIndex(a)),o.p.pageAction("GlobalPlayer_controller_btn_click",{version:this.version,playerType:"main",act_type:"gotoTrack",act_value:parseFloat(e),player_info:this.globalPlayerInfoLite})},calcNextIndex:function(e){for(var t=this.globalPlayerQueue.length,a=this.globalPlayerQueue_player_index,l=this.globalPlayerQueueIndexToArrayIndexMapping[a],o=0;o<t;o+=1){if(l+=e,!this.globalPlayerQueue[l]){a=-1;break}if(this.globalPlayerQueue[l].can_play){a=this.globalPlayerQueue[l].queue_index;break}}return a},playerPlaySpeed:function(e){this.globalPlayerInfoPlaySpeed!==e&&this.setGlobalPlayerInfoPlaySpeed(e)},playerTargetPlay:function(e){this.setGlobalPlayerInfoPlayStatus({status:"play",force:!!e}),o.p.pageAction("GlobalPlayer_controller_btn_click",{version:this.version,playerType:"main",act_type:"play",act_value:"",player_info:this.globalPlayerInfoLite})},playerTargetPause:function(){this.setGlobalPlayerInfoPlayStatus({status:"pause",force:!1}),o.p.pageAction("GlobalPlayer_controller_btn_click",{version:this.version,playerType:"main",act_type:"pause",act_value:"",player_info:this.globalPlayerInfoLite})},clickShareUrl:function(){if(this.globalPlayerInfo&&this.globalPlayerInfo.timeline_key){var e=document.createElement("a");this.globalPlayerInfo.track_source,e.href=this.globalPlayerInfo.track_title_url;var t=o.s.getJsonFromUrl(e.search.substr(1));t.player_trigger=this.globalPlayerInfo.file_key,e.search=o.s.object2QueryStr(t);var a={url:e.href,title:this.globalPlayerInfo.head_title,content:this.globalPlayerInfo.track_title};this.$store.dispatch("setShareOnceUrl",a),this.$store.dispatch("shareUrlTrigger",a).then((function(){}),(function(){}))}},clickDiscuss:function(){if(this.globalPlayerInfo&&this.globalPlayerInfo.timeline_key){var e=document.createElement("a");e.href=this.globalPlayerInfo.track_title_url,e.hash="goToDiscuss";var t=e.href.replace(e.origin,"");this.checkIsRouterUrl(t)?this.$router.push({path:t}).catch((function(){})):window.location.href=t}},checkIsRouterUrl:function(e){if(this.$router&&this.$router.matcher.match(e).name)return!0;return!1},clickCollectTrack:function(){if(this.globalPlayerInfo&&this.globalPlayerInfo.timeline_key){var e={file_key:this.globalPlayerInfo.file_key,track_source:this.globalPlayerInfo.track_source||"",album_id:this.globalPlayerInfo.album_id||"",timeline_key:this.globalPlayerInfo.timeline_key};this.$store.dispatch("triggerToOpenPlayListBox",e)}},setGlobalPlayerIdToLS:function(){o.h.get(this.LocalStorage_DEFAULT.globalPlayerId)!==this.globalPlayerId&&(o.h.set(this.LocalStorage_DEFAULT.globalPlayerId,this.globalPlayerId),this.setLSGlobalPlayerId(this.globalPlayerId))},setGlobalPlayerQueueInfoToLS:function(){var e=o.h.get(this.LocalStorage_DEFAULT.globalPlayerQueueInfo),t=!1;if(e){var a=e.queue_id,l=e.player_index;a===this.globalPlayerQueue_id&&l===this.globalPlayerQueue_player_index||(t=!0)}else t=!0;if(t){var r={queue_id:this.globalPlayerQueue_id,player_index:this.globalPlayerQueue_player_index};o.h.set(this.LocalStorage_DEFAULT.globalPlayerQueueInfo,r)}},playerEndTrigger:function(){var e=this;switch(this.globalPlayerLoopType){default:case"normal":this.playerGotoTrack(1),setTimeout((function(){e.playerTarget.play()}),100);break;case"single_loop":this.changeCurrentTime(0),setTimeout((function(){e.playerTarget.play()}),100);break;case"once":this.changeCurrentTime(0),this.setGlobalPlayerInfoPlayStatus({status:"pause",force:!1})}},autoPlayErrorTrigger:function(){this.autoPlayErrorTriggerLayout=!1,this.playerTarget.play()}})},k=Object(c.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-player-item-box global-player-control-box",class:e.boxClass},[a("div",{staticClass:"global-player-control-close-btn",on:{click:e.closePlayer}},[a("i",{staticClass:"icon-arrow_smaller"})]),e._v(" "),a("div",{staticClass:"global-player-control-wrapper"},[a("player-control-album-info-box",e._b({attrs:{"is-login":e.isLogin,version:e.version}},"player-control-album-info-box",e.globalPlayerInfo,!1)),e._v(" "),a("player-control-track-info-box",e._b({attrs:{"is-login":e.isLogin,version:e.version},on:{"trigger-control-player-btn":e.triggerControlPlayerBtn}},"player-control-track-info-box",e.globalPlayerInfo,!1)),e._v(" "),a("player-control-process-box",{attrs:{"is-login":e.isLogin,"attach-info":e.attachInfo,"player-process-buffer-list":e.playerProcessBufferList,version:e.version,"notice-msg":e.notice_msg},on:{"change-current-time":e.changeCurrentTime}}),e._v(" "),a("player-control-controller-box",{ref:"controller-box",attrs:{"is-login":e.isLogin,"prev-track-index":e.globalPlayerInfo_prevTrackIndex,"next-track-index":e.globalPlayerInfo_nextTrackIndex,version:e.version},on:{"trigger-control-player-btn":e.triggerControlPlayerBtn}})],1),e._v(" "),e.autoPlayErrorTriggerLayout?a("div",{staticClass:"global-player-control-click-mask",on:{click:e.autoPlayErrorTrigger}}):e._e()])}),[],!1,null,"4e8af671",null);t.a=k.exports},1037:function(e,t,a){"use strict";var l=a(2),o=a(0),r=a(823),i=a(680),n=a(831).a,c=a(5),s=Object(c.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?[e._m(0)]:"list"===e.showType?[0===e.albumList.length?[a("div",{staticClass:"global-player-list-notice"},[a("div",{staticClass:"notice-box"},[a("div",{staticClass:"notice-wrapper"},[e._m(1),e._v(" "),a("div",{staticClass:"notice-desc"},[e._v("\n                            æ²ææ­æ¾æ¸å®\n                        ")]),e._v(" "),a("div",{staticClass:"notice-goto"},[a("pp-router-link",{attrs:{to:"/album"}},[e._v("\n                                å»éé\n                            ")])],1)])])])]:[a("vue-perfect-scrollbar",{staticClass:"scroll-area",on:{"ps-scroll-y":e.scrollHandle}},[a("div",{staticClass:"global-player-list-wrapper",staticStyle:{"padding-top":"20px","margin-bottom":"45px"}},[e._l(e.albumList,(function(t,l){return[a("player-list-item-box",e._b({key:l,on:{click:e.readCollectInfo}},"player-list-item-box",t,!1))]}))],2)])]]:"info"===e.showType&&!1!==e.listInfo?[e.listInfo.tracks.length>0?[a("vue-perfect-scrollbar",{ref:"scroll",staticClass:"scroll-area",on:{"ps-scroll-y":e.scrollHandleDetectLoadMore}},[a("div",{staticClass:"global-player-list-wrapper",staticStyle:{"padding-top":"10px","margin-bottom":"45px"}},[a("div",{staticClass:"global-player-list-title",attrs:{"data-title":e.listInfo.title}}),e._v(" "),e._l(e.listInfo.tracks,(function(t,l){return a("player-track-box",e._b({key:l,attrs:{index:l},on:{"click-track":e.clickTrack,"collect-track":e.collectTrack}},"player-track-box",t,!1))}))],2),e._v(" "),e.autoLoadMore?a("div",{staticClass:"global-player-load-more-trigger",attrs:{rel:"next"}}):e._e()])]:[a("div",{staticClass:"global-player-list-wrapper",staticStyle:{"margin-bottom":"45px"}},[a("div",{staticClass:"global-player-list-title",attrs:{"data-title":e.listInfo.title}})]),e._v(" "),e._m(2)]]:e._e()],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-list-notice"},[t("div",{staticClass:"notice-box"},[t("div",{staticClass:"notice-wrapper"},[t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})]),this._v(" "),t("div",{staticClass:"notice-desc"},[this._v("\n                        è®åä¸­...\n                    ")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-list-notice"},[t("div",{staticClass:"notice-box"},[t("div",{staticClass:"notice-wrapper"},[t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})]),this._v(" "),t("div",{staticClass:"notice-desc"},[this._v("\n                            æ­¤ç¯ç®æ²æå§å®¹\n                        ")])])])])}],!1,null,"9a2779d8",null).exports,u=a(22),p=a.n(u),y=a(879),f=a(862),g=a(708);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _={components:{VuePerfectScrollbar:p.a,playerListItemBox:y.a,playerTrackBox:f.a},filters:{},props:{version:{type:String,default:"1.0"},reloadListTrigger:{type:[Boolean,Number],default:0},collectType:{type:String,default:""}},data:function(){return{loading:!1,showType:"list",history:[],historyInfo:!1,myList:[],myListInfo:!1}},computed:b({},Object(l.mapGetters)({})),watch:{reloadListTrigger:function(){this.reloadList()},collectType:function(){this.reloadList()},showType:function(){this.$emit("showType",this.showType)}},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){},methods:b({},Object(l.mapActions)({}),{},Object(l.mapMutations)({setPPGlobalPlayerAttachList:"setPPGlobalPlayerAttachList"}),{reloadList:function(){var e=this;"myList"===e.collectType&&(e.loading=!0,e.showType="list",g.a.getGlobalPlayerMyLists().success((function(t){e.loading=!1,e.myList=t.data.playlists,e.history=[t.data.history]})).error((function(t){e.loading=!1,e.myList=[],e.history=[]})),o.p.pageAction("GlobalPlayer_collect_list_load",{version:this.version,collectType:"myList"}))},readMyListInfo:function(e){var t=this,a=e.id;e.list_from;if("myList"===t.collectType){if(t.loading=!0,t.showType="info",t.myListInfo=!1,t.historyInfo=!1,"history"===a)g.a.getGlobalPlayerHistoryInfo().success((function(e){t.loading=!1;var a={playlist_id:"history",title:"æè¿æ­æ¾",count:1,cover_url:"https://static.pressplay.cc/static/uploads/projectHead/20180731/ABBC074A632F5362D05EF603026E8885/5b6061a4a104dABBC074A632F5362D05EF603026E888520180731.png"};if(e.data.history){var l=[];a.tracks=e.data.history.map((function(e){var t=e.track,a=t.attach;return t.file_key=a.file_key,l.push(t.attach),delete t.attach,t})),t.setPPGlobalPlayerAttachList(l)}t.historyInfo=a})).error((function(e){t.showType="list",t.historyInfo=!1}));else{var l={playlist_id:a};g.a.getGlobalPlayerMyListInfo(l).success((function(e){t.loading=!1;var a=e.data,l=[];a.tracks=a.items.map((function(e){var t=e.track,a=t.attach;return t.file_key=a.file_key,l.push(t.attach),delete t.attach,t})),delete a.items,t.setPPGlobalPlayerAttachList(l),t.myListInfo=a})).error((function(e){t.showType="list",t.myListInfo=!1}))}o.p.pageAction("GlobalPlayer_collect_info_load",{version:this.version,collectType:"album",playlist_id:a})}},clickHistoryTrack:function(e){var t=e.index,a=e.trackInfo;switch(a.track_source){case"album":var l={album_id:a.album_id,file_key:a.file_key};this.$store.dispatch("chooseTrackFromAlbumIndex",l).then((function(){}),(function(){}));break;case"timeline":var r={project_id:a.project_id,file_key:a.file_key};this.$store.dispatch("chooseTrackFromProject",r).then((function(){}),(function(){}))}o.p.pageAction("GlobalPlayer_history_track_click",{version:this.version,playlist_id:"history",index:t,track_info:a})},clickMyListTrack:function(e){var t=e.index,a=e.trackInfo,l={playlist_id:this.myListInfo.playlist_id,index:t};this.$store.dispatch("chooseTrackFromMyListIndex",l).then((function(){}),(function(){})),o.p.pageAction("GlobalPlayer_playlist_track_click",{version:this.version,playlist_id:this.myListInfo.playlist_id,index:t,track_info:a})},removeTrack:function(e){var t=this,a=this;o.n.confirm({html:"æ¨ç¢ºå®è¦ç§»é¤åï¼",showCancelButton:!0,confirmButtonText:"ç§»é¤",cancelButtonText:"åæ¶"},(function(){var l=e.index,r=e.trackInfo,n={playlist_id:a.myListInfo.playlist_id,index:l};a.$store.dispatch("".concat(i.a,"/removeTrackFromMyListIndex"),n).then((function(e){a.readMyListInfo(a.myListInfo.playlist_id)}),(function(){o.n.warning({html:"ç§»é¤é³æªå¤±æï¼è«æ´½è©¢å®¢æäººå¡"})})),o.p.pageAction("GlobalPlayer_playlist_track_click",{version:t.version,playlist_id:t.myListInfo.playlist_id,index:l,track_info:r})}))},collectTrack:function(e){var t=e.index,a=e.trackInfo;if(a){var l={file_key:a.file_key,track_source:a.track_source||"",album_id:a.album_id||"",timeline_key:a.timeline_key};this.$store.dispatch("triggerToOpenPlayListBox",l),o.p.pageAction("GlobalPlayer_queue_track_collect_click",{version:this.version,queue_id:this.globalPlayerQueue_id,play_index:t,track_info:a})}}})};function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k={components:{CollectListAlbumProjectBox:s,CollectListMyListBox:Object(c.a)(_,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?[e._m(0)]:"list"===e.showType?[0===e.history.length&&0===e.myList.length?[a("div",{staticClass:"global-player-list-notice"},[a("div",{staticClass:"notice-box"},[a("div",{staticClass:"notice-wrapper"},[e._m(1),e._v(" "),a("div",{staticClass:"notice-desc"},[e._v("\n                            æ²æå¾æ­æ¾çæ¸å®\n                        ")]),e._v(" "),a("div",{staticClass:"notice-goto"},[a("pp-router-link",{attrs:{to:"/album"}},[e._v("\n                                å»éé\n                            ")])],1)])])])]:[a("vue-perfect-scrollbar",{staticClass:"scroll-area",staticStyle:{"padding-top":"20px","margin-bottom":"45px"},attrs:{rel:"history"}},[a("div",{staticClass:"global-player-list-wrapper"},[e._l(e.history,(function(t,l){return[a("player-list-item-box",e._b({key:l,on:{click:e.readMyListInfo}},"player-list-item-box",t,!1))]}))],2),e._v(" "),a("div",{staticClass:"global-player-list-wrapper"},[e._l(e.myList,(function(t,l){return[a("player-list-item-box",e._b({key:l,on:{click:e.readMyListInfo}},"player-list-item-box",t,!1))]}))],2)])]]:"info"!==e.showType||!1===e.myListInfo&&!1===e.historyInfo?e._e():[!1!==e.historyInfo?[e.historyInfo.tracks.length>0?[a("vue-perfect-scrollbar",{staticClass:"scroll-area"},[a("div",{staticClass:"global-player-list-wrapper",staticStyle:{"padding-top":"10px","margin-bottom":"45px"}},[a("div",{staticClass:"global-player-list-title",attrs:{"data-title":e.historyInfo.title}}),e._v(" "),e._l(e.historyInfo.tracks,(function(t,l){return[a("player-track-box",e._b({key:l,attrs:{index:l},on:{"click-track":e.clickHistoryTrack,"collect-track":e.collectTrack}},"player-track-box",t,!1))]}))],2)])]:[a("div",{staticClass:"global-player-list-wrapper",staticStyle:{"margin-bottom":"45px"}},[a("div",{staticClass:"global-player-list-title",attrs:{"data-title":e.historyInfo.title}})]),e._v(" "),e._m(2)]]:e._e(),e._v(" "),!1!==e.myListInfo?[e.myListInfo.tracks.length>0?[a("vue-perfect-scrollbar",{staticClass:"scroll-area"},[a("div",{staticClass:"global-player-list-wrapper",staticStyle:{"padding-top":"10px","margin-bottom":"45px"}},[a("div",{staticClass:"global-player-list-title",attrs:{"data-title":e.myListInfo.title}}),e._v(" "),e._l(e.myListInfo.tracks,(function(t,l){return[a("player-track-box",e._b({key:l,attrs:{index:l},on:{"click-track":e.clickMyListTrack,"remove-track":e.removeTrack}},"player-track-box",t,!1))]}))],2)])]:[a("div",{staticClass:"global-player-list-wrapper"},[a("div",{staticClass:"global-player-list-title",attrs:{"data-title":e.myListInfo.title}})]),e._v(" "),e._m(3)]]:e._e()]],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-list-notice"},[t("div",{staticClass:"notice-box"},[t("div",{staticClass:"notice-wrapper"},[t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})]),this._v(" "),t("div",{staticClass:"notice-desc"},[this._v("\n                        è®åä¸­...\n                    ")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-list-notice",staticStyle:{height:"calc(100% - 100px)"}},[t("div",{staticClass:"notice-box"},[t("div",{staticClass:"notice-wrapper"},[t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})]),this._v(" "),t("div",{staticClass:"notice-desc"},[this._v("\n                                æ­·å²æ­æ¾æ²æå§å®¹\n                            ")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-list-notice",staticStyle:{height:"calc(100% - 100px)"}},[t("div",{staticClass:"notice-box"},[t("div",{staticClass:"notice-wrapper"},[t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})]),this._v(" "),t("div",{staticClass:"notice-desc"},[this._v("\n                                æ­¤æ¸å®æ²æå§å®¹\n                            ")])])])])}],!1,null,"62859bbf",null).exports},filters:{},mixins:[r.a],props:{version:{type:String,default:"1.0"},isLogin:{type:Boolean,default:!1}},data:function(){return{collectType:"album",collectTypeList:{album:"è¿½è¹¤åè¡¨",myList:"æ­æ¾æ¸å®"},reloadListTrigger:!1,showType:"list"}},computed:P({},Object(l.mapGetters)({}),{boxClass:function(){var e={};switch(this.globalPlayerStatus){case"collect":e["toggle-open"]=!0,e["toggle-close"]=!1;break;default:e["toggle-open"]=!1,e["toggle-close"]=!0}return e}}),watch:{globalPlayerStatus:function(e){"collect"===e&&(this.reloadListTrigger=(new Date).getTime())}},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){},methods:P({},Object(l.mapActions)({}),{},Object(l.mapMutations)({changeGlobalPlayerStatus:"".concat(i.a,"/changeGlobalPlayerStatus")}),{chooseCollectType:function(e){var t="";switch(e){case"myList":t="myList";break;case"album":default:t="album"}this.collectType=t,this.showType="list",o.p.pageAction("GlobalPlayer_collect_tab_click",{version:this.version,type:e})},triggerGoBack:function(){this.reloadListTrigger=(new Date).getTime(),o.p.pageAction("GlobalPlayer_collect_goback_click",{version:this.version,collectType:this.collectType})},triggerToggle:function(){this.changeGlobalPlayerStatus("control"),o.p.pageAction("GlobalPlayer_displayStatus_click",{version:this.version,status:"control"})},setShowType:function(e){this.showType=e}})},T=Object(c.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-player-item-box global-player-collect-box",class:e.boxClass},[a("div",{staticClass:"global-player-collect-wrapper"},[a("div",{staticClass:"global-player-collect-header",attrs:{rel:e.collectType}},[a("div",{staticClass:"global-player-collect-header-wrapper"},e._l(e.collectTypeList,(function(t,l){return a("div",{key:l,staticClass:"global-player-collect-header-item",class:{active:l===e.collectType},domProps:{textContent:e._s(t)},on:{click:function(t){return e.chooseCollectType(l)}}})})),0)]),e._v(" "),a("div",{staticClass:"global-player-collect-content"},[a("div",{staticClass:"global-player-collect-content-wrapper",attrs:{rel:e.collectType}},[a("collect-list-album-project-box",{staticClass:"global-player-collect-content-item",attrs:{version:e.version,"reload-list-trigger":e.reloadListTrigger,"collect-type":e.collectType},on:{showType:e.setShowType}}),e._v(" "),a("collect-list-my-list-box",{staticClass:"global-player-collect-content-item",attrs:{version:e.version,"reload-list-trigger":e.reloadListTrigger,"collect-type":e.collectType},on:{showType:e.setShowType}})],1)]),e._v(" "),"list"===e.showType?[a("div",{staticClass:"global-player-collect-toggle-bar",on:{click:e.triggerToggle}},[a("div",{staticClass:"global-player-playlist-toggle-btn"},[e._v("\n                    è¿åæ­æ¾å¨\n                ")])])]:"info"===e.showType?[a("div",{staticClass:"global-player-collect-toggle-bar",on:{click:e.triggerGoBack}},[a("div",{staticClass:"global-player-playlist-toggle-btn"},[e._v("\n                    "+e._s("album"===e.collectType?"è¿åè¿½è¹¤åè¡¨":"è¿åæ­æ¾æ¸å®")+"\n                ")])])]:e._e()],2)])}),[],!1,null,"38664e0a",null);t.a=T.exports},1075:function(e,t,a){"use strict";var l=a(2),o=a(0),r=a(680);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s={components:{},filters:{},props:{version:{type:String,default:"1.0"}},data:function(){return{}},computed:n({},Object(l.mapGetters)({LocalStorage_DEFAULT:"".concat(r.a,"/LocalStorage_DEFAULT"),loopTypeList:"".concat(r.a,"/loopTypeList"),globalPlayerLoopType:"".concat(r.a,"/globalPlayerLoopType"),globalPlayerInfoLite:"".concat(r.a,"/globalPlayerInfoLite")})),watch:{globalPlayerLoopType:function(e,t){e!==t&&this.setLGLoopType(e)}},created:function(){},mounted:function(){var e=this,t=o.h.get(e.LocalStorage_DEFAULT.globalPlayerLoopType);e.loopTypeList[t]&&e.changeGlobalPlayerLoopType(t),o.h.listen(e.LocalStorage_DEFAULT.globalPlayerLoopType,(function(t){e.changeGlobalPlayerLoopType(t)}))},updated:function(){},destroyed:function(){},methods:n({},Object(l.mapActions)({}),{},Object(l.mapMutations)({changeGlobalPlayerLoopType:"".concat(r.a,"/changeGlobalPlayerLoopType")}),{changeLoopType:function(){this.changeGlobalPlayerLoopType()},setLGLoopType:function(e){e!==o.h.get(this.LocalStorage_DEFAULT.globalPlayerLoopType)&&(o.h.set(this.LocalStorage_DEFAULT.globalPlayerLoopType,e),o.p.pageAction("GlobalPlayer_controller_playSpeed_change",{version:this.version,playerType:"main",loopType:this.globalPlayerLoopType,player_info:this.globalPlayerInfoLite}))}})},u=a(5),p=Object(u.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-control-controller-btn normal-btn",on:{click:this.changeLoopType}},[t("i",{staticClass:"icon ",class:this.loopTypeList[this.globalPlayerLoopType].icon})])}),[],!1,null,"69c360dd",null);t.a=p.exports},1108:function(e,t,a){"use strict";var l=a(828).a,o=a(5),r=Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"global-player-control-controller-btn speed-btn",on:{click:e.triggerSpeedList}},[a("div",{staticClass:"icon"},[e._v("\n            "+e._s(e._f("formatSpeedText")(e.globalPlayerInfoPlaySpeed))+"\n        ")])]),e._v(" "),a("div",{staticClass:"global-player-control-controller-speed-list-box",class:{show:e.openSpeedList}},[a("div",{staticClass:"global-player-control-controller-speed-list-header"},[e._v("\n            æ­æ¾éåº¦\n        ")]),e._v(" "),a("div",{staticClass:"global-player-control-controller-speed-list-content"},e._l(e.speedList,(function(t){return a("div",{key:t,staticClass:"global-player-control-controller-speed-item",class:{checked:e.globalPlayerInfoPlaySpeed===t},on:{click:function(a){return e.choosePlaySpeed(t)}}},[a("div",{staticClass:"global-player-control-controller-speed-text"},[e._v("\n                    "+e._s(e._f("formatSpeedText")(t))+"\n                ")]),e._v(" "),e._m(0,!0)])})),0)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-control-controller-speed-check"},[t("div",{staticClass:"icon icon-check"})])}],!1,null,"e662f99e",null);t.a=r.exports},1111:function(e,t,a){"use strict";a.r(t);var l=a(822).a,o=a(5),r=Object(o.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-main-box"},[t("global-player-control-box",{attrs:{version:this.version}}),this._v(" "),t("global-player-collect-box",{attrs:{version:this.version}}),this._v(" "),t("global-player-playlist-box",{attrs:{version:this.version}}),this._v(" "),t("div",{staticClass:"global-player-main-box-layout",on:{click:this.closePlayer}})],1)}),[],!1,null,"2931c3b3",null);t.default=r.exports},1116:function(e,t,a){"use strict";var l=a(829).a,o=a(5),r=Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-player-item-box global-player-playlist-box",class:e.boxClass},[a("div",{staticClass:"global-player-playlist-wrapper"},[a("div",{staticClass:"global-player-playlist-header"},[e._m(0),e._v(" "),a("div",{staticClass:"global-player-playlist-header-item",class:{"cursor-pointer":e.cleanQueueFlag,disabled:!e.cleanQueueFlag},attrs:{rel:"delete-banner"}},[a("div",{staticClass:"global-player-playlist-header-btn",on:{click:e.clearQueue}},[a("i",{staticClass:"icon icon-delete"}),e._v("\n                    æ¸é¤å¨é¨\n                ")])])]),e._v(" "),a("div",{staticClass:"global-player-playlist-content"},[e.recommendLoading?[e._m(1)]:e.globalPlayerRecommend.length>0?[a("div",{staticClass:"global-player-list-wrapper"},[a("vue-perfect-scrollbar",{staticClass:"scroll-area"},[a("div",{staticClass:"global-player-list-title",attrs:{"data-title":"çºæ¨æ¨è¦"}}),e._v(" "),e._l(e.globalPlayerRecommend,(function(t,l){return a("player-track-box",e._b({key:l,attrs:{index:l},on:{"click-track":e.playRecommendLsit,"collect-track":e.collectTrack}},"player-track-box",t,!1))}))],2)],1)]:e.globalPlayerQueue.length>0?[a("div",{staticClass:"global-player-list-wrapper"},[a("vue-perfect-scrollbar",{ref:"scroll",staticClass:"scroll-area",on:{"ps-scroll-y":e.scrollHandle}},[e.globalPlayerQueue_have_tracks_before&&e.globalPlayerQueue_source_url?a("pp-router-link",{staticClass:"global-player-load-more",attrs:{to:e.globalPlayerQueue_source_url},on:{click:function(t){return e.gotoSourceUrl("top")}}},[e._v("\n                            æ´å¤\n                        ")]):e._e(),e._v(" "),e.autoLoadMore&&e.globalPlayerQueue_can_load_more_prev&&!e.autoLoadMoreForceStopPrev?a("div",{staticClass:"global-player-load-more-trigger",attrs:{rel:"prev"}}):e._e(),e._v(" "),e._l(e.globalPlayerQueue,(function(t,l){return a("player-track-box",e._b({directives:[{name:"show",rawName:"v-show",value:t.can_play,expression:"trackInfo.can_play"}],key:l,attrs:{index:l,"queue-index":t.queue_index,focus:e.globalPlayerQueue_player_index===t.queue_index},on:{"click-track":e.clickQueueTrack,"collect-track":e.collectTrack}},"player-track-box",t,!1))})),e._v(" "),e.autoLoadMore&&e.globalPlayerQueue_can_load_more_next&&!e.autoLoadMoreForceStopNext?a("div",{staticClass:"global-player-load-more-trigger",attrs:{rel:"next"}}):e._e(),e._v(" "),e.globalPlayerQueue_have_tracks_after&&e.globalPlayerQueue_source_url?a("pp-router-link",{staticClass:"global-player-load-more",attrs:{to:e.globalPlayerQueue_source_url},on:{click:function(t){return e.gotoSourceUrl("bottom")}}},[e._v("\n                            æ´å¤\n                        ")]):e._e()],2)],1)]:[a("div",{staticClass:"global-player-list-notice"},[a("div",{staticClass:"notice-box"},[a("div",{staticClass:"notice-wrapper"},[e._m(2),e._v(" "),a("div",{staticClass:"notice-desc"},[e._v("\n                                æ²æå¾æ­æ¾çæ¸å®\n                            ")]),e._v(" "),a("div",{staticClass:"notice-goto"},[a("pp-router-link",{attrs:{to:"/album"}},[e._v("\n                                    å»éé\n                                ")])],1)])])])]],2),e._v(" "),a("div",{staticClass:"global-player-playlist-toggle-bar",on:{click:e.triggerToggle}},[e._m(3)])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-playlist-header-item",attrs:{rel:"next-play"}},[t("div",{staticClass:"global-player-playlist-header-btn"},[t("i",{staticClass:"icon icon-content_queue"}),this._v("\n                    æ¥èæ­æ¾\n                ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-list-notice"},[t("div",{staticClass:"notice-box"},[t("div",{staticClass:"notice-wrapper"},[t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})]),this._v(" "),t("div",{staticClass:"notice-desc"},[this._v("\n                                è®åä¸­\n                            ")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"notice-icon"},[t("i",{staticClass:"icon icon-ghost_audio"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-player-playlist-toggle-btn"},[t("i",{staticClass:"icon icon-down_line"})])}],!1,null,"0177ee7e",null);t.a=r.exports},822:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(1035),r=a(1116),i=a(1037),n=a(680);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{GlobalPlayerControlBox:o.a,GlobalPlayerPlaylistBox:r.a,GlobalPlayerCollectBox:i.a},filters:{},props:{version:{type:String,default:"1.0"}},data:function(){return{}},computed:s({},Object(l.mapGetters)({globalPlayerBoxOpen:"".concat(n.a,"/globalPlayerBoxOpen")})),watch:{globalPlayerBoxOpen:function(e,t){e!==t&&this.clickOuterToClose()}},created:function(){},mounted:function(){this.clickOuterToClose()},updated:function(){},destroyed:function(){},methods:s({},Object(l.mapActions)({}),{},Object(l.mapMutations)({changeGlobalPlayerBoxOpen:"".concat(n.a,"/changeGlobalPlayerBoxOpen")}),{closePlayer:function(){this.changeGlobalPlayerBoxOpen(!1)},clickOuterToClose:function(){var t=this,a=function(e){e.stopPropagation()},l=function(){t.closePlayer()};!0===this.globalPlayerBoxOpen?setTimeout((function(){e(".global-player-main-box").off("click",a).on("click",a),e(".pp-main-page").off("click",l).one("click",l)}),100):(e(".global-player-main-box").off("click",a),e(".pp-main-page").off("click",l))}})}}).call(this,a(1))},823:function(e,t,a){"use strict";var l=a(2),o=a(680);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{},filters:{},props:{},data:function(){return{}},computed:i({},Object(l.mapGetters)({globalPlayerStatus:"".concat(o.a,"/globalPlayerStatus")})),watch:{},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){},methods:i({},Object(l.mapActions)({}),{},Object(l.mapMutations)({}))}},824:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(0),r=a(680);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{},filters:{},props:{version:{type:String,default:"1.0"},isLogin:{type:Boolean,default:!1},head_title:{type:String,default:""},head_title_url:{type:String,default:""},cover_url:{type:String,default:""},is_followed:{type:Boolean,default:!1},is_collected:{type:Boolean,default:!1},track_source:{type:String,default:""},album_id:{type:String,default:""},timeline_key:{type:String,default:""},project_id:{type:String,default:""},file_key:{type:String,default:""},can_play:{type:Boolean,default:!1},has_description:{type:Boolean,default:!1},publish_time:{type:String,default:""},track_title:{type:String,default:""},track_title_url:{type:String,default:""},track_type:{type:String,default:""}},data:function(){return{}},computed:n({},Object(l.mapGetters)({globalPlayerInfoLite:"".concat(r.a,"/globalPlayerInfoLite")})),watch:{cover_url:function(){this.lazyImg()}},created:function(){},mounted:function(){this.lazyImg()},updated:function(){},destroyed:function(){},methods:n({},Object(l.mapActions)({}),{},Object(l.mapMutations)({}),{lazyImg:function(){e(this.$el).find(".lazyload").removeClass("lazy-bind lazy-empty"),e("body").trigger("lazyImg")},clickFollow:function(){if(o.p.pageAction("GlobalPlayer_controller_follow_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),this.isLogin)switch(this.track_source){case"timeline":this.clickFollowProject()}else this.$store.dispatch("PressPlayLoginModalTriggerOpen",{})},clickCollect:function(){if(o.p.pageAction("GlobalPlayer_controller_collect_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),this.isLogin)switch(this.track_source){case"album":this.clickCollectAlbum();break;case"timeline":this.clickCollectTimeline()}else this.$store.dispatch("PressPlayLoginModalTriggerOpen",{})},clickCollectAlbum:function(){var e={album_id:this.album_id,channel_follow:1};this.$store.dispatch("setPPGlobalCollectionAlbum",e).then()},clickCollectTimeline:function(){var e={timeline_key:this.timeline_key,project_collect:!0};this.$store.dispatch("setPPGlobalCollectionTimeline",e).then()},clickFollowProject:function(){var e=this,t={project_id:e.project_id};e.$store.dispatch("setPPGlobalFollowProject",t).then((function(a){var l={project_id:t.project_id,is_followed:a.data.is_followed},o={data:a.data,ppPanel_data:l,event_category:"player",event_label:{project_id:t.project_id}};e.$store.commit("triggerProjectFollowLog",o)}),(function(){}))},gotoAlbumPage:function(){return o.p.pageAction("GlobalPlayer_controller_albumInfo_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),!0}})}}).call(this,a(1))},825:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(0),r=a(708),i=a(680);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(a,!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{stringMarqueeBox:function(){return a.e("chunk/components/common/stringMarqueeBox").then(a.bind(null,858))}},filters:{},props:{version:{type:String,default:"1.0"},timeline_key:{type:String,default:""},file_key:{type:String,default:""},track_title:{type:String,default:""},track_title_url:{type:String,default:""},has_description:{type:Boolean,default:!1},can_play:{type:Boolean,default:!1},track_source:{type:String,default:"timeline"}},data:function(){return{readDescriptionTimer:null,readLoading:!1,timeline_desc:""}},computed:c({},Object(l.mapGetters)({globalPlayerInfoLite:"".concat(i.a,"/globalPlayerInfoLite"),PageSetting_mode_type:"PageSetting_mode_type"})),watch:{timeline_key:function(){this.readDescription()},has_description:function(){this.readDescription()}},created:function(){},mounted:function(){this.readDescription()},updated:function(){},destroyed:function(){},methods:c({},Object(l.mapActions)({}),{},Object(l.mapMutations)({changeGlobalPlayerBoxOpen:"".concat(i.a,"/changeGlobalPlayerBoxOpen")}),{readDescription:function(){var t=this;clearTimeout(t.readDescriptionTimer),t.timeline_key?t.readDescriptionTimer=setTimeout((function(){t.readLoading=!0,t.timeline_desc="";var a={file_key:t.file_key,scope:"head_title,project_id,album_id,timeline_key,track_title,timeline_desc"};r.a.getGlobalPlayerTrackInfo(a).success((function(a){if("success"===a.message){var l=a.data.timeline_desc,o=e("<div></div>");o.html(l),t.timeline_desc=o.text().substr(0,100)}else t.timeline_desc="";t.readLoading=!1})).error((function(){t.readLoading=!1}))}),100):t.timeline_desc=""},gotoTrackPage:function(){return o.p.pageAction("GlobalPlayer_controller_TrackInfo_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),!0},gotoTrackDescription:function(){return o.p.pageAction("GlobalPlayer_controller_TrackInfo_desc_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),"mobile"===this.PageSetting_mode_type&&this.changeGlobalPlayerBoxOpen(!1),!0},triggerShareUrl:function(){o.p.pageAction("GlobalPlayer_controller_share_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),this.$emit("trigger-control-player-btn",{type:"shareUrl"})}})}}).call(this,a(1))},826:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(0),r=a(680);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{},filters:{},props:{version:{type:String,default:"1.0"},attachInfo:{type:[Boolean,Object],default:!1},playerProcessBufferList:{type:[Array],default:function(){return[]}},noticeMsg:{type:[Object,Boolean],default:!1}},data:function(){return{pageX:0,progressBarDrag:null}},computed:n({},Object(l.mapGetters)({LocalStorage_DEFAULT:"".concat(r.a,"/LocalStorage_DEFAULT"),globalPlayerInfoCurrentTime:"".concat(r.a,"/globalPlayerInfoCurrentTime"),globalPlayerInfoDuration:"".concat(r.a,"/globalPlayerInfoDuration"),globalPlayerInfoProcessReciprocal:"".concat(r.a,"/globalPlayerInfoProcessReciprocal"),globalPlayerInfoLite:"".concat(r.a,"/globalPlayerInfoLite")}),{playCurrentPercent:function(){var e=0;return this.globalPlayerInfoDuration&&(e=this.progressBarDrag&&Number.isFinite(this.progressBarDrag)?this.progressBarDrag:(this.globalPlayerInfoCurrentTime/this.globalPlayerInfoDuration*100).toFixed(2)),e},playerCurrentTime:function(){var e="--:--";if(this.globalPlayerInfoDuration&&!1!==this.globalPlayerInfoCurrentTime){var t=0;t=this.progressBarDrag&&Number.isFinite(this.progressBarDrag)?this.globalPlayerInfoDuration*(this.progressBarDrag/100):this.globalPlayerInfoCurrentTime,e=o.s.formatSecond(parseInt(t))}return e},playerDurationTime:function(){var e="--:--";if(this.globalPlayerInfoDuration)if(!0===this.globalPlayerInfoProcessReciprocal){var t=0;t=this.progressBarDrag?this.globalPlayerInfoDuration*((100-this.progressBarDrag)/100):this.globalPlayerInfoCurrentTime?this.globalPlayerInfoDuration-this.globalPlayerInfoCurrentTime:0,e="-".concat(o.s.formatSecond(parseInt(t)))}else e=o.s.formatSecond(parseInt(this.globalPlayerInfoDuration));return e},globalPlayerInfoBufferBar:function(){var e=this;return this.playerProcessBufferList.map((function(t){return{left:t.start/e.globalPlayerInfoDuration*100,width:(t.end-t.start)/e.globalPlayerInfoDuration*100}}))},noticeMsgObj:function(){var e={type:"default",text:""};return!1!==this.noticeMsg&&(e=n({},e,{},this.noticeMsg)),e}}),watch:{globalPlayerInfoProcessReciprocal:function(){o.h.get(this.LocalStorage_DEFAULT.globalPlayerProcessReciprocal,!1)!==this.globalPlayerInfoProcessReciprocal&&o.h.set(this.LocalStorage_DEFAULT.globalPlayerProcessReciprocal,this.globalPlayerInfoProcessReciprocal)}},created:function(){},mounted:function(){this.init()},updated:function(){},destroyed:function(){},methods:n({},Object(l.mapActions)({}),{},Object(l.mapMutations)({changeGlobalPlayerInfoProcessReciprocal:"".concat(r.a,"/changeGlobalPlayerInfoProcessReciprocal")}),{init:function(){this.setGlobalPlayerProgressAct()},changeReciprocal:function(){this.changeGlobalPlayerInfoProcessReciprocal(),o.p.pageAction("GlobalPlayer_controller_progress_reciprocal_change",{version:this.version,playerType:"main",reciprocal:this.globalPlayerInfoProcessReciprocal,player_info:this.globalPlayerInfoLite})},setGlobalPlayerProgressAct:function(){var t=this;t.pageX=0;var a=null,l=new Image;l.src="data:image/png;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=";var o=function(a){var l=e(t.$el).find('[data-ref="'.concat(a,'"]')),o=l.offset().left,r=l[0].offsetWidth,i=(t.pageX-o)/r;return i=i>=1?1:i<=0?0:parseInt(100*i)/100*100},r=function(e){if(e.stopPropagation(),t.attachInfo&&t.globalPlayerInfoDuration){var r=this.dataset.ref||"control-process-bar-box",i=0;switch(t.pageX=e.pageX,e.type){case"dragstart":e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.setDragImage&&e.originalEvent.dataTransfer.setDragImage(l,1,1),clearInterval(a),a=setInterval((function(){0!==t.pageX&&(i=o(r),t.setProgressBarDrag(i,"setInterval"))}),50);break;case"click":case"dragend":clearInterval(a),i=o(r);var n=t.globalPlayerInfoDuration*(i/100),c="dragend"===e.type?"drag":"click";t.changeCurrentTime(n,c,i),setTimeout((function(){t.setProgressBarDrag(null,"dragend")}),500)}}};e(t.$el).find(".global-player-control-progress-bar-box").on("click",r),e(t.$el).find(".global-player-control-progress-ball").on("dragstart drag dragend",r)},changeCurrentTime:function(e,t,a){this.$emit("change-current-time",e),o.p.pageAction("GlobalPlayer_controller_progress_change",{version:this.version,playerType:"main",type:t,percent:parseFloat(a.toFixed(2)),currentTime:parseFloat(e.toFixed(2)),player_info:this.globalPlayerInfoLite})},setProgressBarDrag:function(e,t){this.progressBarDrag=e}})}}).call(this,a(1))},827:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(0),r=a(680),i=a(1075),n=a(1108);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{loopTypeBox:i.a,speedBtnBox:n.a},filters:{},props:{version:{type:String,default:"1.0"},isLogin:{type:Boolean,default:!1},prevTrackIndex:{type:Number,default:0},nextTrackIndex:{type:Number,default:0}},data:function(){return{goToTime:15}},computed:s({},Object(l.mapGetters)({globalPlayerInfoStatus:"".concat(r.a,"/globalPlayerInfoStatus"),globalPlayerInfoPlaySpeed:"".concat(r.a,"/globalPlayerInfoPlaySpeed"),globalPlayerInfoLite:"".concat(r.a,"/globalPlayerInfoLite")})),watch:{openSpeedList:function(t){var a=this;!0===t&&setTimeout((function(){e("body").one("click",(function(){a.openSpeedList=!1}))}),100)}},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){},methods:s({},Object(l.mapActions)({}),{},Object(l.mapMutations)({changeGlobalPlayerStatus:"".concat(r.a,"/changeGlobalPlayerStatus")}),{triggerPlayerCollect:function(){o.p.pageAction("GlobalPlayer_displayStatus_click",{version:this.version,status:"collect"}),this.isLogin?this.changeGlobalPlayerStatus("collect"):this.$store.dispatch("PressPlayLoginModalTriggerOpen",{})},clickPlayOrPause:function(){this.$emit("trigger-control-player-btn",{type:"playOrPause"})},clickGoTo:function(e){this.$emit("trigger-control-player-btn",{type:"goto",value:e})},clickGoToTrack:function(e){this.$emit("trigger-control-player-btn",{type:"gotoTrack",value:e})},triggerControlPlayerBtn:function(e){this.$emit("trigger-control-player-btn",e)},triggerShareUrl:function(){o.p.pageAction("GlobalPlayer_controller_share_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),this.$emit("trigger-control-player-btn",{type:"shareUrl"})},triggerDiscussUrl:function(){o.p.pageAction("GlobalPlayer_controller_discuss_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),this.$emit("trigger-control-player-btn",{type:"discuss"})},clickColllectTrack:function(){o.p.pageAction("GlobalPlayer_controller_addToPlaylist_click",{version:this.version,playerType:"main",player_info:this.globalPlayerInfoLite}),this.$emit("trigger-control-player-btn",{type:"collectTrack"})}})}}).call(this,a(1))},828:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(0),r=a(680);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(a,!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{},filters:{formatSpeedText:function(e){var t=e;return Number.isFinite(e)&&(t=Number.isInteger(e)?Number.parseFloat(t).toFixed(1):Number.parseFloat(t)),"".concat(t,"x")}},props:{version:{type:String,default:"1.0"}},data:function(){return{speedList:[2,1.75,1.5,1.25,1,.75],openSpeedList:!1}},computed:n({},Object(l.mapGetters)({LocalStorage_DEFAULT:"".concat(r.a,"/LocalStorage_DEFAULT"),globalPlayerInfoPlaySpeed:"".concat(r.a,"/globalPlayerInfoPlaySpeed"),globalPlayerInfoLite:"".concat(r.a,"/globalPlayerInfoLite")})),watch:{openSpeedList:function(t){var a=this;!0===t&&setTimeout((function(){e("body, .global-player-main-box").one("click",(function(){setTimeout((function(){a.openSpeedList=!1}),1)}))}),100)},globalPlayerInfoPlaySpeed:function(e,t){e!==t&&this.setLGPlaySpeed(e)}},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){},methods:n({},Object(l.mapActions)({}),{},Object(l.mapMutations)({}),{triggerSpeedList:function(){this.openSpeedList=!0},choosePlaySpeed:function(e){this.$emit("trigger-control-player-btn",{type:"playSpeed",value:e})},setLGPlaySpeed:function(){o.h.get(this.LocalStorage_DEFAULT.globalPlayerInfoPlaySpeed)!==this.globalPlayerInfoPlaySpeed&&(o.h.set(this.LocalStorage_DEFAULT.globalPlayerInfoPlaySpeed,this.globalPlayerInfoPlaySpeed),o.p.pageAction("GlobalPlayer_controller_playSpeed_change",{version:this.version,playerType:"main",speed:this.globalPlayerInfoPlaySpeed,player_info:this.globalPlayerInfoLite}))}})}}).call(this,a(1))},829:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(22),r=a.n(o),i=a(0),n=a(823),c=a(680),s=a(862);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{playerTrackBox:s.a,VuePerfectScrollbar:r.a},filters:{},mixins:[n.a],props:{version:{type:String,default:"1.0"}},data:function(){return{recommendLoading:!1,recommendLoadSuccess:!1,checkRecommendTimer:null,autoLoadMore:!1,checkAutoLoadMoreTimer:null}},computed:p({},Object(l.mapGetters)({globalPlayerBoxOpen:"".concat(c.a,"/globalPlayerBoxOpen"),globalPlayerQueue_id:"".concat(c.a,"/globalPlayerQueue_id"),globalPlayerQueue_player_index:"".concat(c.a,"/globalPlayerQueue_player_index"),globalPlayerQueue_source_url:"".concat(c.a,"/globalPlayerQueue_source_url"),globalPlayerQueue:"".concat(c.a,"/globalPlayerQueue"),globalPlayerRecommend:"".concat(c.a,"/globalPlayerRecommend"),globalPlayerQueue_can_load_more_prev:"".concat(c.a,"/globalPlayerQueue_can_load_more_prev"),globalPlayerQueue_can_load_more_next:"".concat(c.a,"/globalPlayerQueue_can_load_more_next"),autoLoadMoreForceStopPrev:"".concat(c.a,"/autoLoadMoreForceStopPrev"),autoLoadMoreForceStopNext:"".concat(c.a,"/autoLoadMoreForceStopNext"),globalPlayerQueue_have_tracks_before:"".concat(c.a,"/globalPlayerQueue_have_tracks_before"),globalPlayerQueue_have_tracks_after:"".concat(c.a,"/globalPlayerQueue_have_tracks_after")}),{boxClass:function(){var e={};if(this.globalPlayerQueue.length>0)switch(this.globalPlayerStatus){case"control":e["toggle-open"]=!1,e["toggle-close"]=!0,e["toggle-hidden"]=!1;break;case"queue":e["toggle-open"]=!0,e["toggle-close"]=!1,e["toggle-hidden"]=!1;break;case"collect":e["toggle-open"]=!1,e["toggle-close"]=!1,e["toggle-hidden"]=!0}else e["toggle-open"]=!0;return e},cleanQueueFlag:function(){return this.globalPlayerQueue.length>0}}),watch:{globalPlayerBoxOpen:function(){this.checkRecommand()},globalPlayerQueue:function(e,t){this.resetLoadMoreAutoLoadAct()},globalPlayerQueue_player_index:function(e,t){e!==t&&this.scrollToTrackItem(this.globalPlayerQueue_player_index)}},created:function(){},mounted:function(){this.checkRecommand(),this.resetLoadMoreAutoLoadAct(),this.checkAutoLoadMore()},updated:function(){},destroyed:function(){},methods:p({},Object(l.mapActions)({}),{},Object(l.mapMutations)({changeGlobalPlayerStatus:"".concat(c.a,"/changeGlobalPlayerStatus"),reloadGlobalPlayerQueueTrigger:"reloadGlobalPlayerQueueTrigger",setGlobalPlayerPlayIndex:"".concat(c.a,"/setGlobalPlayerPlayIndex"),setGlobalPlayerInfoPlayStatus:"".concat(c.a,"/setGlobalPlayerInfoPlayStatus")}),{triggerToggle:function(){var e="control";switch(this.globalPlayerStatus){case"control":e="queue";break;default:e="control"}i.p.pageAction("GlobalPlayer_displayStatus_click",{version:this.version,status:e}),this.changeGlobalPlayerStatus(e)},checkRecommand:function(){var e=this,t=this;clearTimeout(t.checkRecommendTimer),t.checkRecommendTimer=setTimeout((function(){!0===t.globalPlayerBoxOpen&&(0===t.globalPlayerQueue.length?(t.recommendLoading=!0,t.$store.dispatch("".concat(c.a,"/getGlobalPlayerRecommend")).then((function(a){t.recommendLoading=!1,t.recommendLoadSuccess=a.data.audios>0,i.p.pageAction("GlobalPlayer_recommand_load",{version:e.version,recommand_count:a.data.audios.length})}),(function(e){t.recommendLoading=!1}))):t.scrollToTrackItem(t.globalPlayerQueue_player_index))}),100)},playRecommendLsit:function(e){var t={playlist_id:"recommend",index:e.index};this.$store.dispatch("chooseTrackFromMyListIndex",t).then((function(){}),(function(){})),i.p.pageAction("GlobalPlayer_playlist_track_click",{version:this.version,playlist_id:"recommend",index:e.index,track_info:e.trackInfo})},clickQueueTrack:function(e){var t=e.index,a=e.trackInfo,l=a.queue_index;this.setGlobalPlayerInfoPlayStatus({status:"play",force:!0}),this.setGlobalPlayerPlayIndex(l),this.changeGlobalPlayerStatus("control"),i.p.pageAction("GlobalPlayer_queue_track_click",{version:this.version,queue_id:this.globalPlayerQueue_id,play_index:t,track_info:a})},collectTrack:function(e){var t=e.index,a=e.trackInfo;if(a){var l={file_key:a.file_key,track_source:a.track_source||"",album_id:a.album_id||"",timeline_key:a.timeline_key};this.$store.dispatch("triggerToOpenPlayListBox",l),i.p.pageAction("GlobalPlayer_queue_track_collect_click",{version:this.version,queue_id:this.globalPlayerQueue_id,play_index:t,track_info:a})}},clearQueue:function(){var e={queue_id:this.globalPlayerQueue_id};this.$store.dispatch("".concat(c.a,"/clearGlobalPlayerQueue"),e).then((function(e){}),(function(e){})),i.p.pageAction("GlobalPlayer_queue_clear_click",{version:this.version,queue_id:this.globalPlayerQueue_id})},scrollHandle:function(e){this.autoLoadMore&&this.checkAutoLoadMore()},scrollToTrackItem:function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=this;setTimeout((function(){if(l.$el){var o=e(l.$el).find(".scroll-area"),r=o.find(".global-player-track[queue-index='".concat(t,"']"));if(!!o.length>0&&!!r.length>0){var i=o.offset().top,n=r.offset().top;a&&(n+=r.height()),l.$refs.scroll.$el.scrollTop+=n-i}}}),100)},gotoSourceUrl:function(e){return i.p.pageAction("GlobalPlayer_queue_gotoMore_click",{version:this.version,queue_id:this.globalPlayerQueue_id,from:e}),!0},resetLoadMoreAutoLoadAct:function(){var e=this;this.globalPlayerQueue.length>0&&(this.autoLoadMore=!1,setTimeout((function(){e.autoLoadMore=!0}),3e3))},checkAutoLoadMore:function(){var t=this,a=this;clearTimeout(a.checkAutoLoadMoreTimer),a.checkAutoLoadMoreTimer=setTimeout((function(){if(t.$refs.scroll&&t.$refs.scroll.$el){var l=t.$refs.scroll.$el,o=e(l).find(".global-player-load-more-trigger"),r=e(l).offset().top,i=r+e(l).height();if(o.length>0)for(var n=0;n<o.length;n+=1){var c=o.eq(n),s=c.offset().top+c.outerHeight()/2;if(s>r&&s<i){a.autoLoadMoreRun(c.attr("rel"));break}}}}),150)},autoLoadMoreRun:function(e){var t=this;t.autoLoadMore=!1;var a=t.globalPlayerQueue[0].queue_index;"next"===e&&(a=!1),t.$store.dispatch("".concat(c.a,"/getGlobalPlayerQueueLoadMore"),e).then((function(e){!1!==a&&t.scrollToTrackItem(a,!1)}),(function(e){t.autoLoadMore=!1}))}})}}).call(this,a(1))},830:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(4),r=a.n(o),i=a(0);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(a,!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{stringMarqueeBox:function(){return a.e("chunk/components/common/stringMarqueeBox").then(a.bind(null,858))}},filters:{formatSecond:i.s.formatSecond,format8601:function(e){return r.a.duration(e,"seconds").toISOString()}},props:{index:{type:Number,default:0},focus:{type:Boolean,default:!1},project_id:{type:String,default:""},album_id:{type:String,default:""},timeline_key:{type:String,default:""},track_source:{type:String,default:""},track_type:{type:String,default:""},track_title:{type:String,default:""},cover_url:{type:String,default:""},file_key:{type:String,default:""},queue_index:{type:Number,default:0},is_collected:{type:Boolean,default:!1},can_play:{type:Boolean,default:!1},has_description:{type:Boolean,default:!1}},data:function(){return{}},computed:c({},Object(l.mapGetters)(["PageSetting"]),{},Object(l.mapState)({audioAttach:function(e,t){return c({},{file_key:"",filename:"",duration:0,last_play_second:0,play_count:0,record:{last_time_second:0,last_updated_time:null,completed:0,max_completed:0}},{},e.PlayerAttachList[this.file_key])}}),{deleteBtnFlag:function(){return!!this.$listeners["remove-track"]},addCollectFlag:function(){return!!this.$listeners["collect-track"]},trackInfo:function(){var e=this,t={};return["index","queue_index","project_id","album_id","timeline_key","track_source","track_type","file_key"].forEach((function(a){t[a]=e[a]})),t}}),watch:{PageSetting:function(e){e.width?e.width<this.pc_min_size?this.mode_type="mobile":this.mode_type="pc":this.mode_type=e.mode_type},cover_url:function(e,t){e!==t&&this.lazyImg()},audioAttach:function(){}},created:function(){},mounted:function(){this.lazyImg()},updated:function(){},destroyed:function(){},methods:c({},Object(l.mapActions)({}),{},Object(l.mapMutations)({}),{lazyImg:function(){e(this.$el).find(".lazyload").removeClass("lazy-bind lazy-empty"),e("body").trigger("lazyImg")},playTrack:function(){this.$emit("click",this.index)},clickTrack:function(){if(this.can_play){var e=this.trackInfo;this.$emit("click-track",{index:this.index,trackInfo:e})}},removeTrack:function(){var e=this.trackInfo;this.$emit("remove-track",{index:this.index,trackInfo:e})},collectTrack:function(){var e=this.trackInfo;this.$emit("collect-track",{index:this.index,trackInfo:e})}})}}).call(this,a(1))},831:function(e,t,a){"use strict";(function(e){var l=a(2),o=a(22),r=a.n(o),i=a(0),n=a(879),c=a(862),s=a(708);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{VuePerfectScrollbar:r.a,playerListItemBox:n.a,playerTrackBox:c.a},filters:{},props:{version:{type:String,default:"1.0"},reloadListTrigger:{type:[Boolean,Number],default:0},collectType:{type:String,default:""}},data:function(){return{loading:!1,showType:"list",albumList:[],albumInfo:!1,focusListData:!1,listInfo:!1,autoLoadMore:!1,checkAutoLoadMoreTimer:null}},computed:{},watch:{reloadListTrigger:function(){this.reloadList()},collectType:function(){this.reloadList()},showType:function(){this.$emit("showType",this.showType)}},created:function(){},mounted:function(){},updated:function(){},destroyed:function(){},methods:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(l.mapActions)({}),{},Object(l.mapMutations)({setPPGlobalPlayerAttachList:"setPPGlobalPlayerAttachList"}),{scrollHandle:function(e){},scrollHandleDetectLoadMore:function(e){this.autoLoadMore&&this.checkAutoLoadMore()},reloadList:function(){var e=this;"album"===e.collectType&&(e.loading=!0,e.showType="list",s.a.getGlobalPlayerCollectionLists().success((function(t){e.loading=!1,e.albumList=t.data.playlists})).error((function(t){e.loading=!1,e.albumList=[]})),i.p.pageAction("GlobalPlayer_collect_list_load",{version:this.version,collect_type:"album"}))},readCollectInfo:function(e,t){var a=e.id,l=e.list_from;switch(l){case"Album":case"Project":this.focusListData=!1,this.autoLoadMore=!0,this.readAlbumInfo({id:a,list_from:l},t)}},checkAutoLoadMore:function(){var t=this,a=this;clearTimeout(a.checkAutoLoadMoreTimer),a.checkAutoLoadMoreTimer=setTimeout((function(){if(t.$refs.scroll&&t.$refs.scroll.$el){var l=t.$refs.scroll.$el,o=e(l).find(".global-player-load-more-trigger"),r=e(l).offset().top,i=r+e(l).height();if(o.length>0)for(var n=0;n<o.length;n+=1){var c=o.eq(n),s=c.offset().top+c.outerHeight()/2-30;if(s>r&&s<i){a.readCollectInfo(t.focusListData,!0);break}}}}),150)},readAlbumInfo:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,l=e.id,o=e.list_from;a.focusListData={id:l,list_from:o},!1===t&&(a.loading=!0),a.showType="info";var r={},n="";switch(o){case"Project":n="getGlobalPlayerCollectionProjectListInfo",r.project_id=l;break;default:n="getGlobalPlayerCollectionAlbumListInfo",r.album_id=l}switch(t&&this.listInfo&&this.listInfo.tracks.length>0&&(r.start_index=this.listInfo.tracks.length),s.a[n](r).success((function(e){a.loading=!1;var l=e.data,o=[];if(l.tracks=l.tracks.map((function(e){var t=e,a=t.attach;return t.file_key=a.file_key,o.push(t.attach),delete t.attach,t})),0===l.tracks.length&&(a.autoLoadMore=!1),a.setPPGlobalPlayerAttachList(o),t){var r=JSON.parse(JSON.stringify(a.listInfo));r.tracks=r.tracks.concat(l.tracks),a.listInfo=r}else a.listInfo=l})).error((function(e){a.showType="list",a.listInfo=!1})),o){case"Project":i.p.pageAction("GlobalPlayer_collect_info_load",{version:this.version,collect_type:"project",project_id:l});break;default:i.p.pageAction("GlobalPlayer_collect_info_load",{version:this.version,collect_type:"album",album_id:l})}},__readAlbumInfo:function(e){var t=this,a=e.id;e.list_from;if("album"===t.collectType){t.loading=!0,t.showType="info";var l={album_id:a};s.a.getGlobalPlayerCollectionAlbumListInfo(l).success((function(e){t.loading=!1;var a=e.data,l=[];a.tracks=a.tracks.map((function(e){var t=e,a=t.attach;return t.file_key=a.file_key,l.push(t.attach),delete t.attach,t})),t.setPPGlobalPlayerAttachList(l),t.albumInfo=a})).error((function(e){t.showType="list",t.albumInfo=!1})),i.p.pageAction("GlobalPlayer_collect_info_load",{version:this.version,collect_type:"album",album_id:a})}},clickTrack:function(e){var t=e.index,a=e.trackInfo,l="",o={};switch(this.focusListData.list_from){case"Project":l="chooseTrackFromProject",o={project_id:a.project_id,file_key:a.file_key};break;default:l="chooseTrackFromAlbumIndex",o={album_id:a.album_id,index:t}}switch(this.$store.dispatch(l,o).then((function(){}),(function(){})),this.focusListData.list_from){case"Project":i.p.pageAction("GlobalPlayer_project_track_click",{version:this.version,project_id:a.project_id,index:t,track_info:a});break;default:i.p.pageAction("GlobalPlayer_album_track_click",{version:this.version,album_id:a.album_id,index:t,track_info:a})}},__clickTrack:function(e){var t=e.index,a=e.trackInfo,l={album_id:a.album_id,index:t};this.$store.dispatch("chooseTrackFromAlbumIndex",l).then((function(){}),(function(){})),i.p.pageAction("GlobalPlayer_album_track_click",{version:this.version,album_id:a.album_id,index:t,track_info:a})},collectTrack:function(e){var t=e.index,a=e.trackInfo;if(a){var l={file_key:a.file_key,track_source:a.track_source||"",album_id:a.album_id||"",timeline_key:a.timeline_key};this.$store.dispatch("triggerToOpenPlayListBox",l),i.p.pageAction("GlobalPlayer_queue_track_collect_click",{version:this.version,queue_id:this.globalPlayerQueue_id,play_index:t,track_info:a})}}})}}).call(this,a(1))},832:function(e,t,a){"use strict";(function(e){var l=a(2);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(a,!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.a={components:{stringMarqueeBox:function(){return a.e("chunk/components/common/stringMarqueeBox").then(a.bind(null,858))}},filters:{},props:{id:{type:String,default:""},title:{type:String,default:""},subtitle:{type:String,default:""},cover_url:{type:String,default:""},count:{type:Number,default:0},list_from:{type:String,default:""}},data:function(){return{}},computed:r({},Object(l.mapGetters)({})),watch:{cover_url:function(e,t){e!==t&&this.lazyImg()}},created:function(){},mounted:function(){this.lazyImg()},updated:function(){},destroyed:function(){},methods:r({},Object(l.mapActions)({}),{},Object(l.mapMutations)({}),{lazyImg:function(){e(this.$el).find(".lazyload").removeClass("lazy-bind lazy-empty"),e("body").trigger("lazyImg")},clickItem:function(){this.$emit("click",{id:this.id,list_from:this.list_from})}})}}).call(this,a(1))},862:function(e,t,a){"use strict";var l=a(830).a,o=a(5),r=Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-player-track",class:{focus:!!e.can_play&&e.focus,disabled:!e.can_play},attrs:{index:e.index},on:{click:e.clickTrack}},[a("div",{staticClass:"global-player-track-item",attrs:{rel:"track-cover"}},[a("div",{staticClass:"track-cover lazyload",attrs:{"data-src":e.cover_url}})]),e._v(" "),a("div",{staticClass:"global-player-track-item",attrs:{rel:"track-title"}},[a("string-marquee-box",[e._v("\n            "+e._s(e.track_title)+"\n        ")])],1),e._v(" "),a("div",{staticClass:"global-player-track-item",attrs:{rel:"track-duration"}},[e._v("\n        "+e._s(e._f("formatSecond")(e.audioAttach.duration))+"\n    ")]),e._v(" "),e.addCollectFlag?a("div",{staticClass:"global-player-track-item",attrs:{rel:"track-collect"}},[a("div",{staticClass:"global-player-track-btn",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.collectTrack(t)}}},[a("i",{staticClass:"icon icon-add_border"})])]):e._e(),e._v(" "),e.deleteBtnFlag?a("div",{staticClass:"global-player-track-item",attrs:{rel:"track-collect"}},[a("div",{staticClass:"global-player-track-btn",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.removeTrack(t)}}},[a("i",{staticClass:"icon icon-remove"})])]):e._e()])}),[],!1,null,"1e891f82",null);t.a=r.exports},879:function(e,t,a){"use strict";var l=a(832).a,o=a(5),r=Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"global-player-list-item",on:{click:e.clickItem}},[a("div",{staticClass:"global-player-list-item-item",attrs:{rel:"album-cover"}},[a("div",{staticClass:"album-cover lazyload",attrs:{"data-src":e.cover_url}})]),e._v(" "),a("div",{staticClass:"global-player-list-item-item",attrs:{rel:"album-info"}},[a("div",{staticClass:"global-player-list-item-info-wrapper"},[a("div",{staticClass:"global-player-list-item-info-item",attrs:{rel:"album-title"}},[a("string-marquee-box",[e._v(e._s(e.title))])],1),e._v(" "),a("div",{staticClass:"global-player-list-item-info-item",attrs:{rel:"album-desc"}},[e._v("\n                "+e._s(e.count)+" åé³æª\n            ")])])])])}),[],!1,null,"160b0380",null);t.a=r.exports}}]);