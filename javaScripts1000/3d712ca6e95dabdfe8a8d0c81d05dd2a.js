if(window.cpexSkinVersion="0.7 fixed header support",window.location.href.indexOf("cpexsrc=test")>-1&&void 0===CPEX_testSkinSourceCalled){var CPEX_testSkinSourceCalled=!0,customSkinScript=document.createElement("script");customSkinScript.async=!0,customSkinScript.type="text/javascript",customSkinScript.src="https://test.cpex.cz/skin/v2/cpex-skin.js";var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(customSkinScript,node)}else{try{window.cpexTimer=cpexTimer||{},cpexTimer.que=cpexTimer.que||[],cpexTimer.que.push(["creative_init_skin",performance.now()])}catch(e){}function CPExSkinObject(){void 0!==window.console&&void 0!==window.console.log||(window.console={},window.console.log=function(e){},window.console.error=function(e){});var e="not-detected";try{(window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0)&&(e="Opera"),"undefined"!=typeof InstallTrigger&&(e="Firefox"),(/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString())&&(e="Safari"),document.documentMode&&(e="IE"),!document.documentMode&&window.StyleMedia&&(e="Edge"),window.chrome&&window.chrome.webstore&&(e="Chrome")}catch(e){}var t={creativeURL:void 0,measurePixel:void 0,clickURL:void 0,creativeURLw:void 0,creativeURLs:void 0,backgroundColor:"#ffffff",title:""};this.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n||(n=(i=new RegExp("[#&]"+e+"(=([^&#]*)|&|#|$)")).exec(t))?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};var i=function(e,t){var i;for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e};function n(e,t,i){if(e&&(t||(t="cpexloadskin"),!document.getElementById(t))){var n=document.createElement("script");n.async=!0,n.id=t,n.type="text/javascript",n.src=e,i||(i=document.getElementsByTagName("script")[0]),i.parentNode.insertBefore(n,i)}}if(this.debug=!("1"!==this.getParameterByName("debug")&&!window.cpexSkinDebug),this.version=window.cpexSkinVersion,this.isReadyToRender=!1,arguments[0]&&"object"==typeof arguments[0]?this.options=i(t,arguments[0]):this.options=t,this.setOptions=function(e){e&&"object"==typeof e&&(this.options=i(t,e))},this.checkMinWidth=function(){var e;try{e=matchMedia("(min-width: 1150px)").matches}catch(t){e=Math.max(document.documentElement.clientWidth,window.innerWidth||0)>1150}return!!e||(this.debug&&this.log("Insufficient viewport width"),!1)},this.isBrowserSupported=function(){try{var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return!(parseInt(e.substring(t+5,e.indexOf(".",t)),10)<10)}catch(e){}return!0},this.checkReadyToRender=function(){return this.isReadyToRender=this.checkMinWidth()&&"function"==typeof cpexSkin&&this.isBrowserSupported(),this.isReadyToRender},this.log=function(e){this.debug&&console.log(e)},this.logTestUrl=function(){function e(e,t){t||(t="?");var i={};return e.replace(new RegExp("([^"+t+"=&]+)(=([^&]*))?","g"),function(e,t,n,o){i[t]=o}),i}function t(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(""!==t&&(t+="&"),t+=i+"="+encodeURIComponent(e[i]));return t}if(!this.options.scriptSrc&&this.options.creativeURL&&-1!==this.options.creativeURL.indexOf("cdn.cpex")){var i=this.options.creativeURL.split("/");this.options.scriptSrc=i[i.length-2]}if(this.options.scriptSrc){var n,o=location.origin+location.pathname;""!==location.search&&(delete(n=e(location.search,"?")).cpexloadskin,delete n.cpexloadskinurl,o+="?"+t(n)),""!==location.hash?(delete(n=e(location.hash,"#")).cpexloadskin,delete n.cpexloadskinurl,n.cpexloadskinurl=this.options.scriptSrc,o+="#"+t(n)):o+="#cpexloadskinurl="+this.options.scriptSrc,console.log(o)}},this.logError=function(t){if(t||(t=""),"string"==typeof t.message&&(t=t.message),this.debug&&(console.error("CPEx skin ERROR: "+t),this.logTestUrl()),!this.debug){this.options.error=t;var n=i(this.options,{errorMessage:t,type:"CPExSkinObject",browser:e,url:window.location.href,version:this.version});n.version=this.version;var o="";for(var r in n)n.hasOwnProperty(r)&&(""!==o&&(o+="&"),o+=r+"="+encodeURIComponent(n[r]));try{var s=new XMLHttpRequest;s.open("POST","https://log.cpex.cz/log.php",!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(o)}catch(e){}}},this.logSkinImpression=function(){if(!this.debug&&void 0!==this.options.hash)try{var e={hash:this.options.hash,dsp:this.options.dsp||""},t="";for(var i in e)""!==t&&(t+="&"),t+=i+"="+encodeURIComponent(e[i]);var n=new XMLHttpRequest;n.open("POST","https://log.cpex.cz/log-skin.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(t)}catch(e){}},this.testBeforeRender=function(){if(this.isRendered)return!1;if(!this.options.creativeURL)return this.logError("Missing creative URL"),!1;if(this.options.clickURL||this.logError("Missing click URL"),!this.checkMinWidth()){if(!this.isReadyToRender)return this.logError("isReadyToRender = false"),!1;this.logError("Width changed.")}if("https:"===location.protocol)for(var e in this.options)this.options.hasOwnProperty(e)&&"string"==typeof this.options[e]&&"http:"===this.options[e].substring(0,5)&&(this.logError("Calling http from https domain in: "+e),this.options[e]=this.options[e].replace("http:","https:"));return"function"==typeof cpexSkin||(this.logError("Missing render function cpexSkin. Skin not rendered."),!1)},this.preparePage=function(){if(this.testBeforeRender()){var e=cpexSkin(this);if(e)return e.fixedHeader&&(top.window.cpexFixedHeader=e.fixedHeader,n("https://cdn.cpex.cz/skin/v2/cpex-skinOffset.js","fixedHeaderScript")),void 0!==e.skinWrapper&&(this.elements=e,this.logSkinImpression()),e;this.logError("Missing render elements"),this.isRendered=!0}},this.resetSkin=function(){this.isRendered=!1;try{this.elements&&(this.elements.skinWrapper&&this.elements.skinWrapper.parentNode.removeChild(this.elements.skinWrapper),this.elements.scrollElement&&(this.elements.scrollElement.style.backgroundImage="none")),"function"==typeof cpexResetSkin&&cpexResetSkin()}catch(e){this.logError(e)}},this.insertTest=function(e){try{var t;e&&(t=this.getElement(e));var i=this.getParameterByName("cpexload"),o=this.getParameterByName("version");if("script"===o)n("https://"+i,"generator-test",t);else if("html5"===o){var r=top.document.createElement("iframe");r.setAttribute("style","width:0px; height:0px; overflow:hidden; border:none; margin:0 auto; display:block"),r.setAttribute("scrolling","no"),r.setAttribute("marginwidth","0"),r.setAttribute("marginheight","0"),r.src="https://"+i,t||(t=document.body),t.appendChild(r)}}catch(e){console.log(e)}},this.getElement=function(e,t){try{if(t||(t=document),"function"==typeof e&&(e=e.bind(this)()),e instanceof Element||"object"==typeof e&&e.nodeName)return e;if("string"==typeof e){var i=t.querySelector(e);if(i)return i;if(i=t.getElementById(e))return i;if(i=t.getElementsByClassName(e)[0])return i;if(t!==window.top.document)return this.getElement(e,window.parent.document)}}catch(e){this.logError(e)}},this.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n||(n=(i=new RegExp("[#&]"+e+"(=([^&#]*)|&|#|$)")).exec(t))?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},this.prepareSkinIframe=function(){var e=!0;try{try{var t=window.top.cpexSkinObject=new top.window.CPExSkinObject({creativeURL:"creativeURL-substitution ",clickURL:"clickURL-substitution"})}catch(t){e=!1}if(e&&void 0!==top.window.CPExSkinObject&&t.isReadyToRender){var i=t.preparePage();if(void 0===i.skinWrapper){var n=top.document.getElementById("cpex-skin-wrapper");if(!n)return this.logError("missing skinWrapper element"),null;i.skinWrapper=n}if(void 0===i.contentElement)return this.logError("missing content element"),null;try{var o=top.document.createElement("div");o.setAttribute("style","position: fixed;width: 100%; height: 100%; top:0; z-index:0;overflow: hidden"),i.skinWrapper.appendChild(o);var r=top.document.createElement("div");r.setAttribute("style","position: absolute;top:0;left:50%;margin-left:-1000px;"),o.appendChild(r);var s=top.document.createElement("iframe");return s.setAttribute("style","width:2000px;height:1400px;overflow: hidden;border: none;margin: 0 auto; display: block"),s.setAttribute("marginwidth","0"),s.setAttribute("marginheight","0"),s.setAttribute("scrolling","no"),r.appendChild(s),s}catch(e){this.logError("basicIframe: "+e)}}}catch(e){this.logError(e)}return null},this.render=function(){var e=this;if(this.testBeforeRender())try{var t=cpexSkin(this);if(t){try{t.skinWrapper.title=this.options.title||""}catch(e){this.logError("addTitle: "+e)}try{var i=t.skinWrapper;i.style.backgroundImage="url("+this.options.creativeURL+")",i.style.backgroundColor=this.options.backgroundColor,i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="center top",i.style.backgroundAttachment="fixed",i.style.cursor="pointer"}catch(e){this.logError("basic: "+e)}try{this.options.clickURL&&t.skinWrapper.addEventListener("click",function(){location.href=e.options.clickURL})}catch(e){this.logError("click: "+e)}if(this.options.measurePixel){var n=new Image;n.src=this.options.measurePixel,n.onerror=function(){e.logError("Chybne zadany nebo nedostupny measurePixel")},n.style.display="none",top.document.body.appendChild(n)}}else this.logError("Missing render elements");this.isRendered=!0}catch(e){this.logError(e)}},this.renderSkinCreativeIntoIframe=function(e,t){if(t||(t=this.prepareSkinIframe()),t)try{var i=t.document;t.contentWindow&&(i=t.contentWindow.document),i.open(),i.write((e.indexOf("<html>"),"<html><head><style>body {margin: 0; padding: 0}</style></head><body>"+e+"</body></html>")),i.close()}catch(e){this.logError(e)}else this.logError("Missing cpexSkin function");return t},"function"!=typeof cpexSkin&&this.logError("Missing render function cpexSkin on object init."),this.checkReadyToRender()){var o=this;!function(){function e(){setTimeout(function(){var e=o.getParameterByName("cpexloadskin");e?n("https://cdn.cpex.cz/skin/js/skin-"+e+".js"):(e=o.getParameterByName("cpexloadskinurl"))&&n("https://"+e)},3e3)}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e():document.addEventListener("DOMContentLoaded",e)}()}}!function(){if("undefined"==typeof cpexLoader||void 0===cpexLoader.useSequential||cpexLoader.useSequential)window.top.cpexSkinObject=new CPExSkinObject,window.top.cpexSkinObject.log("--------------- cpexSkinObject useSequential ----------------");else{var e,t=function(){try{window.top.cpexSkinObject=new CPExSkinObject,cpexLoader.log("--------------- cpexSkinObject ----------------")}catch(e){cpexLoader.log(e)}cpexLoader.emitEvent("cpexSkinObject"),clearInterval(e)};"function"==typeof cpexSkin?t():("undefined"!=typeof cpexLoader&&"function"==typeof cpexLoader.emitEvent&&"undefined"==typeof cpexSkin&&(e=setInterval(function(){if("function"==typeof cpexSkin){cpexLoader.emitEvent("cpexSkin");try{CPExSkinObject.log("------------------------- cpexSkin interval -----------------------")}catch(e){}}},50)),cpexLoader.waitFor("cpexSkin",t))}}()}if(window.top.location.href.indexOf("cpexsrc=test")>-1&&void 0===CPEX_testHTML5Called){var CPEX_testHTML5Called=!0;!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="https://test.cpex.cz/html5/v1/cpex-html5.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}else{var cpexLoadTest=!1;try{cpexLoadTest=window.top.location.href.indexOf("cpexsrc=test")>-1}catch(e){try{var me=document.currentScript;me&&void 0!==me.src&&(me.src.indexOf("test.cpex")>-1||me.src.indexOf("4443")>-1)&&(cpexLoadTest=!0)}catch(e){}}try{!function(){var e=!1;try{e=window.top.location.href.indexOf("debug=1")>-1}catch(t){e=!1}var t={},i=function(i){!function(t){if(e)try{console.log(t)}catch(e){}}(i),t.errorMessage=i;var n="";for(var o in t)""!==n&&(n+="&"),n+=o+"="+encodeURIComponent(t[o]);var r=new XMLHttpRequest;r.open("POST","https://log.cpex.cz/log.php",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(n)},n=function(e){var t=e.source;if("string"==typeof e.data.source){var i=document.querySelectorAll(e.data.source);if(i)return[i[0]]}for(var n=document.getElementsByTagName("iframe"),o=0;o<n.length;o++){if(n[o].contentWindow===t)return[n[o]];try{for(var r=n[o].contentWindow.document.getElementsByTagName("iframe"),s=0;s<r.length;s++)if(r[s].contentWindow===t)return[r[s],n[o]]}catch(e){}}return null},o=function(e,t,n){var o=Math.random().toString(36).substring(8),r=document.createElement("script");r.src="https://"+(cpexLoadTest?"test":"cdn")+".cpex.cz/caf/v1/html5/"+e+".js",r.id=o,r.onload=function(){try{window.cpexHtml5[e](t,o)}catch(e){i(e)}},r.onerror=function(){i("Error in loadHTML5Script")},n?Array.isArray(n)?n[1]?n[1].parentNode.insertBefore(r,n[1].nextSibling):n[0].parentNode.insertBefore(r,n[0].nextSibling):n.parentNode.insertBefore(r,n.nextSibling):document.getElementsByTagName("head")[0].appendChild(r)};if(void 0===window.cpexMessageListener||!window.cpexMessageListener){window.cpexMessageListener=!0;var r={};function s(e){var t;if(void 0!==e.data&&void 0!==e.data.data&&void 0!==e.data.type&&("caf"===e.data.type||"skin"===e.data.type)&&((t=n(e))||console.log("iframe catch: origin iframe not found"),t&&t[0]&&("skin"===e.data.type&&"undefined"!=typeof cpexSkinObject&&cpexSkinObject.isReadyToRender||void 0!==e.data.creativeType&&("native"===e.data.creativeType||"interscroller"===e.data.creativeType)))){var i={response:"cpexHTML5"};i[e.data.type]=!0,i.hash=e.data.hash||"",void 0!==e.data.source&&t[0].contentWindow.postMessage(i,"*"),e.source.postMessage(i,"*"),t[0].style.display="none",t[1]&&(t[1].style.display="none"),"string"==typeof e.data.data&&(e.data.data=JSON.parse(decodeURIComponent(escape(atob(e.data.data))))),e.data.iurl=e.data.url,e.data.url=window.location.href,"skin"===e.data.type?o("skin",e.data,t):o(e.data.creativeType,e.data,t)}}window.addEventListener("message",function(e){if(window.self===window.top)s(e);else if(e&&void 0!==e.data)if(void 0!==e.data.response&&"cpexHTML5"===e.data.response)void 0!==r[e.data.hash]&&(clearTimeout(r[e.data.hash].timeout),s(r[e.data.hash].ev));else if(void 0!==e.data.hash){var t=setTimeout(function(){s(e)},95);r[e.data.hash]={ev:e,timeout:t},window.parent.postMessage(e.data,"*")}},!1)}}()}catch(e){cpexSkinObject.logError(e)}}
//# sourceMappingURL=cpex-skin.js.map