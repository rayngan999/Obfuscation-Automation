(self.webpackChunkweb_shell=self.webpackChunkweb_shell||[]).push([[4632],{9611:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var n=o(2768);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const u=e=>function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,o,u,s,d=(u=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(u);if(s){var o=l(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return a(this,e)});function f(){return r(this,f),d.apply(this,arguments)}return t=f,(o=[{key:"listenTo",value:function(e,t,o){if(o||"object"!=typeof t||(o=this),(this._listeningTo||(this._listeningTo={}))[n.Z.uniqueId("l")]={object:e,name:t,callback:o},e.addEventListener){let n=t.match(/(.*):(.*)/);n&&([,n,t]=n,o=function(e,t,o){return n=>{const r=function(e,t,o){const n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;for(;e&&1===e.nodeType&&e!==o;){if(n.call(e,t))return e;e=e.parentNode}return!1}(n.target,e,o);r&&t(n,r)}}(n,o,e)),e.addEventListener(t,o,!1)}else e.on&&e.on(t,o,this);return this}},{key:"stopListening",value:function(e,t,o){const n=this._listeningTo;let r,i,c={};if(!n)return this;if(!e||t||o)if(e&&t&&!o)for(i in n)n[i].object===e&&n[i].name===t&&(c[i]=n[i]);else if(e&&t&&o)for(i in n)n[i].object===e&&n[i].name===t&&n[i].callback===o&&(c[i]=n[i]);else e||t||o||(c=n);else for(i in n)n[i].object===e&&(c[i]=n[i]);for(i in c)r=c[i],r.object.removeEventListener?r.object.removeEventListener(r.name,r.callback,!1):r.object.off&&r.object.off(r.name,r.callback,this),delete this._listeningTo[i];return this}}])&&i(t.prototype,o),f}(e)},4632:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>h});var n=o(3003),r=o(9611),i=o(8912),c=o(5706);function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){u(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const _={DEPMAN_NOT_DEFINED:"Dependency Manifest is not defined",DEPMAN_MISSING_CONFIG:"Dependency Manifest does not contain required 'config' property",DEPMAN_MISSING_SOURCE:"Dependency Manifest does not contain required 'source' property",DEPMAN_INVALID_DEPENDENCY_CONFIG:'Dependency Manifest dependency "{{dependency}}" has an invalid configuration',DEPMAN_INVALID_GETTER:"Dependency Manifest dependency \"{{dependency}}\" has an invalid 'get' property. Must be a function, or not provided at all",DEPMAN_MISSING_GETTER:'Dependency Manifest dependency "{{dependency}}" could not resolve a getter. One must be provided or the loader must be configured to use the default bridge',REMOTE_MODULE_MISSING_PLUGIN_ID:"Failed to load remote module: Missing Plugin ID",REMOTE_MODULE_MISSING_REMOTE_ENTRY:"Failed to load remote module: Missing remote entry path",REMOTE_MODULE_LOADER_NOT_STARTED:"Failed to load remote module: RemoteModuleLoader has not been started",REMOTE_MODULE_MISSING_PLUGINCONFIG:"Failed to load remote module: options.pluginConfig was not provided",REMOTE_MODULE_INVALID_REMOTE_ID:"Failed to load remote module: Invalid remote module ID was provided ({{ids}})",REMOTE_MODULE_REMOTE_ENTRY_SCRIPT_ERR:"Error loading remoteEntry script."};let h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(h,e);var t,n,r,a,u=(r=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(a){var o=p(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return f(this,e)});function h(e){var t,o,n,r,c,a,l,s,d,f,p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(p=u.call(this,e))._logger=i.Z.getLogger("remoteLoader"),p._logLevel=(null==e||null===(t=e.config)||void 0===t?void 0:t.logLevel)||"log-and-above",p._dependencyManifest=null==e||null===(o=e.config)||void 0===o||null===(n=o.remoteLoaderConfig)||void 0===n||null===(r=n.moduleFederation)||void 0===r?void 0:r.dependencyManifest,p._useDefaultBridge=(null==e||null===(c=e.config)||void 0===c||null===(a=c.remoteLoaderConfig)||void 0===a||null===(l=a.moduleFederation)||void 0===l?void 0:l.useDefaultBridge)||!1,p._shareScope=(null==e||null===(s=e.config)||void 0===s||null===(d=s.remoteLoaderConfig)||void 0===d||null===(f=d.moduleFederation)||void 0===f?void 0:f.shareScope)||"default",p._requireLoaderFactory=()=>p._applicationCtx.getCorePlugin("loader"),p._remoteLoadScriptPromiseCache=new Map,p}return t=h,(n=[{key:"_validateDependencyManifest",value:function(e){if(!e)throw new Error(_.DEPMAN_NOT_DEFINED);if(!e.config)throw new Error(_.DEPMAN_MISSING_CONFIG);if(!e.source)throw new Error(_.DEPMAN_MISSING_SOURCE);Object.entries(e.config).forEach((e=>{let[t,o]=e;if(!o||!o.version)throw new Error(_.DEPMAN_INVALID_DEPENDENCY_CONFIG.replace("{{dependency}}",t));if(o.get&&(this._logger.debug("Dependency Manifest contains dependency with a 'get' override",{name:t,version:o.version}),"function"!=typeof o.get))throw new Error(_.DEPMAN_INVALID_GETTER.replace("{{dependency}}",t))}))}},{key:"_getSharedScopeConfiguration",value:function(e){return this._logger.debug("_getSharedScopeConfiguration",e.config),Object.entries(e.config).reduce(((t,o)=>{let[n,r]=o;const i=r.get||this._useDefaultBridge&&this._getFederationRequireLoader;if(!i)throw new Error(_.DEPMAN_MISSING_GETTER.replace("{{dependency}}",n));return t[n]={[r.version]:{get:()=>i.call(this,n,r),singleton:r.singleton||!1,from:e.source,loaded:!0}},t}),{})}},{key:"_getFederationRequireLoader",value:function(e,t){return this._logger.debug("_getFederationRequireLoader",l({dependencyName:e},t)),this._requireLoaderFactory().then((t=>new Promise(((o,n)=>{t.load([e],o,n)})))).then((t=>{let{loadedModules:o}=t;return()=>o[e].module}))}},{key:"initializeFederationScope",value:async function(){this.listenTo(this._logger,this._logLevel,c.Z),await this._initializeFederationScope(this._dependencyManifest)}},{key:"onBeforeStart",value:async function(){return this.initializeFederationScope()}},{key:"onBeforeStop",value:function(){}},{key:"setContext",value:function(){}},{key:"onApplicationReady",value:function(){}},{key:"_loadScript",value:function(e,t){if(this._remoteLoadScriptPromiseCache.has(e))return this._logger.debug("_loadScript",{remoteEntryUrl:e,moduleId:t,event:"script already in flight to load"}),this._remoteLoadScriptPromiseCache.get(e);const o=new Promise(((o,n)=>{let r=document.querySelector('script[src="'.concat(e,'"]'));r?(this._logger.debug("_loadScript",{remoteEntryUrl:e,moduleId:t,event:"script alreadyloaded"}),o()):(r=document.createElement("script"),r.src=e,r.type="text/javascript",r.async=!0,r.onload=()=>{this._remoteLoadScriptPromiseCache.delete(e),this._logger.debug("_loadScript",{remoteEntryUrl:e,moduleId:t,event:"onload"}),o()},r.onerror=t=>{this._remoteLoadScriptPromiseCache.delete(e),n(new Error("".concat(_.REMOTE_MODULE_REMOTE_ENTRY_SCRIPT_ERR," type=").concat(t.type," src=").concat(e)))},document.head.appendChild(r))}));return this._remoteLoadScriptPromiseCache.set(e,o),o}},{key:"_initializeFederationScope",value:async function(e){this._logger.debug("_initializeFederationScope",{scope:this._shareScope,source:null==e?void 0:e.source,context:null==e?void 0:e.config,willHydrateScope:!(null==e||!e.config)}),await o.I(this._shareScope),e&&(this._validateDependencyManifest(e),o.S[this._shareScope]=l(l({},o.S[this._shareScope]),this._getSharedScopeConfiguration(e)))}},{key:"_loadRemoteModule",value:async function(e,t){this._logger.debug("_loadRemoteModule",{remoteModuleId:e,remoteModuleScope:t,shareScope:this._shareScope});const n=window[t];if(!n)throw new Error("Failed to load remote module: container for ".concat(t," was not initialized. Please make sure the remoteEntry has been fetched"));return await n.init(o.S[this._shareScope]),(await window[t].get("./".concat(this._getModuleName(e))))()}},{key:"_loadModule",value:async function(e,t){const{id:o,baseSourceUrl:n,remoteEntry:r}=t;if(!o||"string"!=typeof o)throw new Error(_.REMOTE_MODULE_MISSING_PLUGIN_ID);if(!r)throw new Error(_.REMOTE_MODULE_MISSING_REMOTE_ENTRY);if(e.endsWith(r)){const t="".concat(n,"/").concat(r,".js");return this._loadScript(t,e)}return this._loadRemoteModule(e,this._getRemoteModuleScopeName(o))}},{key:"load",value:function(e,t,o,n){const r=(e,t)=>{o({failedModules:{[e]:{moduleId:e,status:"errored",error:t}}})};let i;if(Array.isArray(e)&&e.length)e.length>1&&this._logger.warn("RemoteModuleLoader::load has been provided multiple modules, but only supports loading one today. The first entry in the array will be used",{remoteModuleIds:e}),[i]=e;else{if("string"!=typeof e)return void r(JSON.stringify(e),new Error(_.REMOTE_MODULE_INVALID_REMOTE_ID.replace("{{ids}}",JSON.stringify(e))));i=e}this.isStarted()?(n=n||{}).pluginConfig?(this._logger.debug("load",{remoteModuleId:i}),this._loadModule(i,n.pluginConfig).then((e=>{t({loadedModules:{[i]:{moduleId:i,status:"resolved",module:e}}})})).catch((e=>{r(i,e)}))):r(i,new Error(_.REMOTE_MODULE_MISSING_PLUGINCONFIG)):r(i,new Error(_.REMOTE_MODULE_LOADER_NOT_STARTED))}},{key:"_getRemoteModuleScopeName",value:function(e){return"__appfabric__".concat(e.replace(/-/g,"__"))}},{key:"_getModuleName",value:function(e){return e.replace(/[-/@]/g,"__")}}])&&s(t.prototype,n),h}((0,r.Z)(n.Z))}}]);
//# sourceMappingURL=4632.js.map