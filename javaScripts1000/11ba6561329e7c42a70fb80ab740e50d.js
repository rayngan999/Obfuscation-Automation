Cube("datav:/com/carousel-table/1.7.7",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1","datav:/npm/animejs/3.1.0/lib/anime.min.js"],function(a,b,c){var d=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},e=c("datav:/npm/bcore/0.0.18/event"),f=c("datav:/npm/jquery/2.1.4"),g=c("datav:/npm/lodash/4.6.1"),h=c("datav:/npm/animejs/3.1.0/lib/anime.min.js");return a.exports=e.extend(function(a,b){this.container=f(a);var c={width:this.container.width(),height:this.container.height(),"background-color":"transparent",theme:{},global:{animation:{singleStop:!1},ifRowHidden:!1,textAnimate:{ifRun:!1,animateDur:2},ifUpdateImd:!0,highLight:{show:!1,isOrder:!0,hightLightIndex:3,hightLightStyle:{textStyle:{fontFamily:"Microsoft Yahei",fontSize:12,fontWeight:"normal",color:"#f00"},backgroundColor:"yellowGreen",border:{borderWidth:1,borderStyle:"solid",borderColor:"#f00"}}}},idList:{textStyle:{fontFamily:"Microsoft Yahei",fontSize:10,fontWeight:"normal",color:"#ffffff"}},series:[{columnName:"area",displayName:"\u5730\u533A",width:20,dataType:"text",widthPercent:50,margin:{left:0,top:0,bottom:10,right:10},isBr:!1,textStyle:{textAlign:"left",fontSize:12,color:"rgba(255,255,255,0.8)",fontWeight:"normal",fontFamily:"Microsoft Yahei"},backgroundColor:"#ff7900",textAlign:"left"},{columnName:"pv",displayName:"\u6D41\u91CF(pv)",width:20,dataType:"text",widthPercent:50,margin:{left:0,top:0,bottom:10,right:10},isBr:!1,textStyle:{textAlign:"left",fontSize:12,color:"rgba(255,255,255,0.8)",fontWeight:"normal",fontFamily:"Microsoft Yahei"},backgroundColor:"#ff7900",textAlign:"left"},{columnName:"attribute",displayName:"\u7528\u6237\u884C\u4E3A\u7279\u5F81",width:53,dataType:"text",widthPercent:50,margin:{left:0,top:0,bottom:10,right:10},isBr:!1,textStyle:{textAlign:"left",fontSize:12,color:"rgba(255,255,255,0.8)",fontWeight:"normal",fontFamily:"Microsoft Yahei"},backgroundColor:"#ff7900",textAlign:"left"}]};this.headerTemp=g.template("<div class=\"line header\" style=\"z-index:2; width: 100%; position: absolute; display: flex;align-items: center;background-color: <%= backgroundColor %>;height: <%= height %>px;text-overflow: ellipsis;white-space: nowrap;overflow: hidden;vertical-align: middle;color: <%= color %>;\">\n      <% if (hasIndex) {%><div class=\"index-list\" style=\"display: inline-block;vertical-align: middle;width: <%= idListWidth %>%;height: <%= height %>px;\"></div><%}%>\n      <%= column %>\n    </div>");this.rowTemp=g.template("<div class=\"line row-content\" style=\"height: <%= height %>px;text-overflow: ellipsis;overflow: hidden;vertical-align: middle; display: flex;align-items: center;background-color: <%= bgColor %>;\">\n    <% if (hasIndex) {%>\n      <div class=\"index\" style=\"display: inline-block;text-align: center;vertical-align: middle;width: <%= idListWidth %>%;color: <%= idListColor %>;font-size: <%= idListFontSize %>px;\">\n        <div class=\"index-bg\" style=\"background-color: <%= idListBgColor %>; font-family: <%= idListFontFamily %>;font-weight: <%= fontWeight %>; width: <%= bgSize %>px;height: <%= bgSize %>px;line-height: <%= bgSize %>px;vertical-align: middle;margin: auto;border-radius: <%= radius %>px;text-align: center;\">\n        </div>\n      </div>\n    <%}%>\n  </div>");this.cellTemp=g.template("<div class=\"<%=classname%>\" style=\"width: <%= width %>%;display:inline-block;text-align: <%= textAlign %>;<% if (isBr) {%>word-break:break-all;<%}%><% if (!isBr) {%>white-space: nowrap;<%}%>overflow: hidden;vertical-align: middle;background-color: transparent;font-size: <%= fontSize %>px;color: <%= color %>;font-family: <%= fontFamily %>;font-weight: <%= fontWeight %>;\">\n\n      <%= content %>\n      <% if (!ifHeader) {%>\n        <div class=\"marquee-text\" style=\"display: inline-block;\">\n          <span style=\"display: inline-block;\" class=\"marquee-text-span\"></span><i class=\"whiteSpace\" style=\"display:inline-block;width:<%= whiteWidth %>;\"></i>\n          <% if (ifRun && !isBr) {%>\n            <span style=\"display: inline-block;\" class=\"marquee-text-span\"></span><i class=\"whiteSpace\" style=\"display:inline-block;width:<%= whiteWidth %>;\"></i>\n          <%}%>\n        </div>\n      <%}%>\n  </div>"),this._data=null,this.THREE=3,this.base64Img="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABBCAMAAADygeqaAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxIAAAsSAdLdfvwAAADhUExURUdwTADY3BPL1gDZ3ADZ3ATY3ADZ3ADZ3ADZ3ADZ3NTF2ATY3AHW2wXV2gDZ3ADZ3ADZ3ADZ3DCCq0HG1AbZ3ALZ3ADZ3AfS2ADZ3ADZ3ADZ3Me2yRwpcrehwcSzzkNOld/j6G+SpMSsyS9BiD6yxZqNusGuxMrh5iGUtNbA1xSRslxRnKuvyJyFtDSju2xeoADZ3AQvdQEeYw9BiQQpbj2uwDGHrNvn6UBBkSt6pjgseUfN0ws4gRFymwIjVROYrLObuRpKihdZjDE5hnNypzWBiKyMnqG80UnY2VuCrg53iWrCbhYAAAAwdFJOUwAhD3M6kqmI2wj+Y0MaKUx/bO4Fv1vzMlL65/n8G32X7f1O1efzpu2tzHtUPijJ36w5cUEAAAL/SURBVFjD7ZVpc5swEIYFiBtxBDDER2IncdIjaTHGqe/4Ttr//4O6C7ZDZxrSzrj9pGfGFqxgX+0hQQiHw+FwOBzO3/DhrMzNXfvurt1uN7rdxtXJNKLV7BEY4W80ev6WYywaxkf/dIFcpmlvulyuVqvZQaKxMwzj/oTJYs00zXrAtLnebDbdZ2OxWxjG7WFel0Kf2bEkUMIoMalpRaLABMG2LYlFgufRSLIipkdVIp9SIBcZ5qzH4+Gm2zpMCy4NTRdcy75uWq4kOaFgma7lxMwV3TAOVY/Fihw5VRr+NYpAKP1+fzkcTpvj8Xh9eZwWJFtVVTN0VYfEiuVRxbQ92QURk1JZNR3Z8x2FymFltqxlhhp9ZNrroca1eJwVpdiyWRhGokVEymLJij1LYJ5neWYo2qZNqeRQEVJZ3b+jZZodJNIsa44/n3yPCGfQtv1pLpHNe1l6jX1L1SO4RoYZE9UyEto8tn8AMMH2ZtlHk5fBrN/LwP8cspWHYSdHNJ0QBS9okJRwVfx3guKB4g35LQ3xZjJ5mTz1M5CYTw8F9169SYSe4xiUhBON1nJbVMMHABQT38xWOJlMBk9Psx5orIcP+4bTkqQuyyoOIrxfB5kwlmUZRg0GCqHV4NqEcGo2ITEIxhUlCSaDAYqs5s3hsW8t8AnVgmW6YZKco886JEWCa9xxDvoE//WoniQK0WEtQeWxNUCN2ezHdvP1NVwl2GeAaejFBjU118Ssi7mNgX/VxFJ5uIzK3pJB4xEktuXzNpIlT8ayupANgRAYzgUw1BkpbmgRFbaClgdTfWzdDB5H3zvb7W3JKBXFDXDpiblfOqTII0UKIao8RWgDauydTWKCxG7X6TyU9k2t0KB532IgmBRL0XD75LYkKkrt5HfuexvR/9JZwGfjohyGlqMKxQj96QeaJkcWprGwQWF8RdMUvA3Ed3f7vYG0yttGzyG+vr/Ao74YiP6LTcRn/uRIuQWJi3/8aW+d9gP7ey6Mq38tQVoXhMPhcDgcDuc/8xNsRHRmPkNeHAAAAABJRU5ErkJggg==",this.config=c,this.apis=b.apis,this.isInit=!0,this.startIndex=0,this.RANDOM_TIME=g.random(1e3,1010),this.textTimer={},this.animationTime={},this.observerShow=!1,this.singleIndex=0,this.fullScrollIndex=0,this.timerScroll=null,this.listenerImgCb=this.listenerImgCb.bind(this),this.init(b)},{init:function(a){this.mergeConfig(a),this.initInteraction(),this.observeStyle(),this.listenerImgError()},listenerImgCb:function(a){var b=a.target,c=b.getAttribute("data-retry-num");"IMG"!==b.nodeName.toUpperCase()||g.isNull(c)||(c>=this.THREE?b.src=this.base64Img:(b.src=g.get(this.config,"global.defaultImg"),b.setAttribute("data-retry-num",c+=1)))},listenerImgError:function(){this.container[0].addEventListener("error",this.listenerImgCb,!0)},observeStyle:function(){var a=this,b=new MutationObserver(function(b){b.forEach(function(b){var c=g.get(b.target,"style.display");"attributes"==b.type&&c&&("block"===c?(a.observerShow=!0,a.render(null,a.config)):a.observerShow=!1)})});b.observe(this.container.parent()[0],{attributes:!0,attributeFilter:["style"]});var c=this.container.parents(".slider");c&&0<c.length&&g.map(c,function(a){b.observe(a,{attributes:!0,attributeFilter:["style"]})})},initInteraction:function(){var a=this;a.container.css("cursor","pointer"),a.container.off("mouseenter").off("mouseleave").on("mouseenter",function(){a.removeTimer()}).on("mouseleave",function(){a.restartLoop()})},initPool:function(){this.dataPool=[]},setHeader:function(a,b){for(var c,d=this,e=this.headerTemp,f=this.cellTemp,g="",h=0;h<a.length;h++)c=a[h],g+=f({width:c.width,height:b.height,content:c.displayName,textAlign:b.textStyle.textAlign,whiteWidth:0,classname:"column column-title",isBr:b.isBr,ifRun:!1,ifHeader:!0,fontSize:b.textStyle.fontSize,fontFamily:b.textStyle.fontFamily,color:b.textStyle.color,fontWeight:b.textStyle.fontWeight});b.column=g,b.color=b.textStyle.color,b.fontSize=b.textStyle.fontSize,b.fontWeight=b.textStyle.fontWeight;var i=e(b);this.container.append(i),this.container.append("<div class=\"placeholder\" style=\"height: "+b.height+"px\"></div>")},setRowNodeStr:function(a){this.rowStr=this.rowTemp(a)},appendRow:function(a,b){for(var c,d=this,e=d.cellTemp,g=d.config.row.callbackId,h=d.config.row.backgroundColor2,k=0;k<a;k++){c=f(d.rowStr),1===k%2&&c.css({"background-color":h});for(var i="",l=0;l<b.length;l++){var j=b[l]||{},m=j;i+=e({width:m.width,height:m.height,content:"",bgColor:m.backgroundColor,textAlign:m.textAlign,whiteWidth:0,classname:"column cell-content",isBr:m.isBr,ifHeader:!1,ifRun:d.config.global.textAnimate.ifRun,fontSize:m.textStyle.fontSize,fontFamily:m.textStyle.fontFamily||d.config.global.fontFamily,color:m.textStyle.color,fontWeight:m.textStyle.fontWeight})}c.append(i),c.on("click",function(){var a=f(this).data("data");d.emit("row-clicked",a),g&&""!==g&&(d.emit("click-rank-dot",a[g]),d.emit("global_var",g,a[g]))}),this.rowContainer&&this.rowContainer.append(c)}},removeTimer:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this.timer&&clearTimeout(this.timer),this.mouseTimer&&clearTimeout(this.mouseTimer),this.visibleTimer&&clearTimeout(this.visibleTimer),this.timer=null,this.mouseTimer=null,this.visibleTimer=null,this.animationTime&&(this.animationTime=null),g.map(this.textTimer,function(b,c){b&&(h.remove(g.get(b,"animatables[0].target")),b=null),delete a.textTimer[c]})},initRank:function(){var a=this.config;this.removeTimer(),this.initPool(),this.container.find(".row-content").off("click"),this.container.empty(),this.container.css({overflow:"hidden","background-color":a["background-color"]});var b=a.header,c=a.idList,d=a.series;this.columnNameList=g.map(d,"columnName"),b.show?(b.hasIndex=c.show,b.idListWidth=c.width,b.height=a.height*(b.heightPercent/100),this.setHeader(d,b)):(b.height=0,this.container.find(".placeholder").css("height",0)),this.container.append("<div class=\"rows-container\" style=\"height: "+(this.container.height()-(b.show?a.height*(b.heightPercent/100):0))+"px;width:100%;overflow:hidden\"></div>"),this.rowContainer=this.container.find(".rows-container");var e=a.global.rowCount;this.fillCellHeight=(a.height-b.height)/e;var f={rowCount:e,height:this.fillCellHeight,hasIndex:c.show,idListWidth:c.width,idListRadius:c.radius,idListBgColor:c.backgroundColor,idListColor:c.textStyle.color,idListFontSize:c.textStyle.fontSize,idListFontFamily:c.textStyle.fontFamily||a.global.fontFamily,bgColor:a.row.backgroundColor1,fontWeight:c.textStyle.fontWeight};f.bgSize=Math.min(Math.floor(this.container.width()*c.width/100),f.height)*f.idListRadius/100-4,f.radius=f.bgSize/2,this.setRowNodeStr(f),e="bottom"===this.config.global.animation.mode?e+1:2*e,this.appendRow(e,d,a.defaultCell)},updateData:function(a){a&&(this.dataPool=a)},getAnimationData:function(a,b){this.singleIndex=b;var c=this.config.global.animation.mode,d=0,e=g.get(this.config,"global.highLight"),f=e.isOrder,h=e.hightLightIndex;if("bottom"===c){d=f?b+1:h;var i=g.filter(this._data,function(a,b){return b+1===d});this.emit("highLight",{index:d,data:i})}var j=this.getData(a,b,"bottom"===this.config.global.animation.mode?1:this.config.global.rowCount);return{data:j,index:j[0].index}},getData:function(a,b,c){var d=this.config,e=[],f=g.max([a.length,c]);b>a.length-1&&("bottom"===d.global.animation.mode&&0<a.length?b%=f:b=0);for(var h,j=0;j<c;j++){h=j+b,h>a.length-1&&("bottom"===d.global.animation.mode?a.length<c?h>=f-1&&(h-=f-1):h-=a.length:(h-(a.length-1)+a.length%(c/2)>c/2||0===a.length%(c/2))&&(h%=c/2));var i=a[h];if(i&&void 0!==i){var k=g.cloneDeep(i);k.index=h+1,e.push(k)}else e.push({index:h+1})}return e},setStartIndex:function(a,b,c){b+=c,b>g.max([a.length,this.config.global.rowCount])-1&&(b=0),this.startIndex=b},calTransform:function(a,b,c){var d=b.find(".marquee-text-span"),e=this.config.series[c].isBr;return"left"===a?0:"center"===a?e?0:b.width()/2-d.width()/2:"right"===a?e?0:b.width()-d.width()-1:0},fillCell:function(a){for(var b=this,c=b.config,d=b.columnNameList||[],e=c.row.backgroundColor1,h=c.row.backgroundColor2,i=c.series,j=c.global.animation.mode,k=g.get(c,"global.highLight"),l=k.show,m=k.isOrder,n=k.hightLightIndex,o=0;o<this.$rowContent.length;o++){var p=a[o],q=this.$rowContent[o];if(p){var r=p.index,s=f(q),t=s.find(".cell-content");if(s.data({index:r-1,data:p}),1===Object.keys(p).length&&c.global.ifRowHidden?s.css("opacity",0):s.css("opacity",1),t.each(function(a){var c=f(this),e=d[a],h=i[a].dataType,j="",k="";"img"===h&&p[e]?(k="width: "+i[a].widthPercent+"px; margin-left: "+g.get(i[a],"margin.left")+"px; margin-top: "+g.get(i[a],"margin.top")+"px; font-size: 0;",j="<img class=\"marquee-img\" data-retry-num=\"0\" src=\""+(p[e]||"")+"\" style=\""+k+"\" />",c.css("font-size",0)):j=p[e]||0===+p[e]?p[e]:"-";var l=c.find(".marquee-text");l.find(".marquee-text-span").html(j);var m=l.find(".marquee-text-span"),n=f(m[0]).width();c.find(".whiteSpace").css({width:c.width()-n-1}),"img"!==h&&l.css("transform","translateX("+b.calTransform(i[a].textAlign,c,a)+"px)")}),s.attr("highLightNum",r),s.css("background-color",0==r%2?h:e).find(".index-bg").text(r),l)if("bottom"===j){if(m){var u=this.container.find(".row-content").eq(0);this.addHighLightStyle(u)}else r===n?this.addHighLightStyle(s):this.cancelHighLightStyle(r,s);}else if("top"===j){var v=this.config.global.rowCount,w=this.container.find(".row-content").slice(0,v);this.fullScreenScroll(w)}}}},highlight:function(a){if(g.isEmpty(a))return!1;var b=g.get(a,"hightLightStyle.color"),c=g.get(a,"hightLightStyle.borderColor"),e=g.get(a,"hightLightStyle.borderStyle"),f=g.get(a,"hightLightStyle.borderWidth"),h=g.get(a,"hightLightStyle.backgroundColor"),i=g.get(a,"hightLightStyle.fontSize"),j=g.get(a,"hightLightStyle.fontWeight"),k=g.get(a,"hightLightStyle.fontFamily"),l=g.get(a,"isOrder"),m=g.get(a,"hightLightIndex"),n=d({},this.config,{global:d({},this.config.global,{highLight:d({},this.config.global.highLight,{show:!0,isOrder:l,hightLightIndex:m,hightLightStyle:d({},this.config.global.highLight.hightLightStyle,{textStyle:d({},this.config.global.highLight.hightLightStyle.textStyle,{color:b,fontSize:i,fontFamily:k,fontWeight:j}),backgroundColor:h,border:d({},this.config.global.highLight.hightLightStyle.border,{borderWidth:f,borderStyle:e,borderColor:c})})})})});this.render(this._data,n)},textLoop:function(){for(var a=this,b=this,c=b.config,d=function(d){f(a.$rowContent[d]).find(".cell-content").each(function(a,e){var g=f(e).find(".marquee-text");c.series[a].isBr&&g.find(".whiteSpace").css("width",0),!c.series[a].isBr&&c.global.textAnimate.ifRun&&g.find(".marquee-text-span").width()>f(e).width()&&(g.find(".whiteSpace").css("width",0),b.textRun(d+1+"-"+a,g,a))})},e=0;e<this.$rowContent.length;e++)d(e)},textRun:function(a,b,c){var d=this.config,e=d.global.textAnimate,f=d.series,g=h({targets:b[0],translateX:[0,-b.outerWidth()/2+this.calTransform(f[c].textAlign,b.parent(),c)],easing:"linear",loop:!0,duration:1e3*e.animateDur});this.textTimer[a]=g,g=null},animation:function(){var a=this.config.global.animation.mode,b=g.get(this.config,"global.highLight"),c=b.show,d=b.isOrder;if(c)if("bottom"===a){if(d){var e=this.container.find(".row-content").eq(0);this.cancelHighLightStyle(0,e);var f=this.container.find(".row-content").eq(1);this.addHighLightStyle(f)}}else if("top"===a){var i=this.container.find(".row-content").eq(0);i.on("transitionend",this.transFunction())}var j=this.config,k=g.map(this.$rowContent),l="bottom"===j.global.animation.mode?(j.height-j.header.height)/j.global.rowCount:j.height-j.header.height;this.animationTime=h({targets:k,translateY:[0,-l],easing:"linear",duration:400})},transFunction:function(){var a=this.config.global.rowCount,b=this.container.find(".row-content").slice(a,2*a);clearInterval(this.timer),this.fullScreenScroll(b)},fullScreenScroll:function(a){var b=this,c=1e3*this.config.global.animation.duration,d=this.config.global.rowCount,e=0;clearInterval(this.timerScroll);var f=a.eq(d-1),h=f.attr("highLightNum");this.cancelHighLightStyle(0===h%2?d:d+1,f),this.timerScroll=setInterval(function(){var c=a.eq(e-1);0<=e-1?b.cancelHighLightStyle(e-1,c):"";var d=a.eq(e);b.addHighLightStyle(d),e++,b.fullScrollIndex=b.singleIndex+e;var f=g.filter(b._data,function(a,c){return c+1===b.fullScrollIndex});b.emit("highLight",{index:b.fullScrollIndex,data:f})},c/d-100)},cancelHighLightStyle:function(a,b){var c=this.config,d=c.idList,e=d.backgroundColor,f=d.textStyle,h=f.color,i=f.fontSize,j=f.fontWeight,k=f.fontFamily,l=c.series,m=this.config.row.backgroundColor1,n=this.config.row.backgroundColor2,o=b.find(".cell-content");b.css({"background-color":0==(a+1)%2?n:m,border:"none"}),b.find(".index-bg").css({backgroundColor:e,color:h,fontSize:i,fontWeight:j,fontFamily:k}),g.forEach(l,function(a,b){var c=a.textStyle,d=c.color,e=c.fontFamily,f=c.fontSize,g=c.fontWeight;o.eq(b).find(".marquee-text-span").css({color:d,fontFamily:e,fontSize:f,fontWeight:g})})},addHighLightStyle:function(a){var b=g.get(this.config,"global.highLight"),c=b.hightLightStyle,d=c.textStyle,e=d.fontFamily,f=d.fontSize,h=d.fontWeight,i=d.color,j=c.backgroundColor,k=c.border,l=k.borderWidth,m=k.borderStyle,n=k.borderColor;a.css({border:l+"px "+m+" "+n,backgroundColor:j}).find(".marquee-text-span").css({color:i,fontSize:f,fontWeight:h,fontFamily:e}),a.find(".index-bg").css({backgroundColor:j,color:i,fontFamily:e,fontSize:f,fontWeight:h})},loop:function(){var a=this.config;this.removeTimer();var b=this.dataPool;if(b){var c,d=this.startIndex,e=a.global.rowCount,f=a.global.animation.mode;if("bottom"===f?(c=1,++e):(c=e,e*=2),!this.isInit){var g=this.getData(b,this.startIndex,e);this.fillCell(g),this.animation(),this.setStartIndex(b,d,c),this.emit("data-flipped",this.getAnimationData(b,this.startIndex))}this.textLoop(),this.timer=setTimeout(this.loop.bind(this),a.global.animation.duration*this.RANDOM_TIME)}},render:function(a,b){var c=this,d=this,e=this.mergeConfig(b);if(a=this.data(a),this.$rowContent=this.container.find(".row-content"),this.container.css({fontFamily:"\""+e.global.fontFamily+"\"",transform:"translateZ(0px)"}),this.container.find(".header").css({fontFamily:"\""+e.header.textStyle.fontFamily+"\""}),a)if(this.updateData(a),!e.global.isLoop||e.global.animation.singleStop&&a.length<=e.global.rowCount){this.removeTimer(!1),this.isInit=!0;var f=this.dataPool;if(f){var g=0,h=e.global.rowCount,i=e.global.animation.mode;h="bottom"===i?h+1:2*h;var a=this.getData(f,g,h);this.fillCell(a)}var j=this.container.find(".row-content:first").height();setTimeout(function(){j?(c.fillCell(c.getData(f,0,h)),c.emit("data-flipped",c.getAnimationData(f,0))):console.log("carousel-table first row height = 0"),c.textLoop()},0)}else{var f=this.dataPool,g=this.startIndex,h=e.global.rowCount;if(h="bottom"===i?h+1:2*h,this.isInit){if(this.removeTimer(),f){var i=e.global.animation.mode,a=this.getData(f,g,h);this.fillCell(a)}this.emit("data-flipped",this.getAnimationData(f,g)),this.loop(),this.isInit=!1}if(this.observerShow){var a=this.getData(f,g,h);this.fillCell(a),this.observerShow=!1}this.visibleEventAdd||document.addEventListener("visibilitychange",function(){clearTimeout(d.visibleTimer);var a=document.visibilityState;"visible"===a?c.restartLoop():"hidden"===a&&(clearTimeout(d.visibleTimer),c.removeTimer())}),this.visibleEventAdd=!0}},restartLoop:function(){var a=this.config;a.global.isLoop&&(!a.global.animation.singleStop||this._data&&this._data.length&&this._data.length>a.global.rowCount)&&(this.mouseTimer=setTimeout(this.loop.bind(this),a.global.animation.duration*this.RANDOM_TIME)),a.global.textAnimate.ifRun&&this.textLoop()},resize:function(a,b){this.render(null,{width:a,height:b})},data:function(a){return a&&((this.config.global.ifUpdateImd||this.config.global.animation.singleStop&&a.length<=this.config.global.rowCount)&&(this.isInit=!0,this.startIndex=0,this.initRank()),this._data=a),this._data},mergeConfig:function(a){if(!a)return this.config;var b=this.config,c=g.cloneDeep(a),d=g.defaultsDeep(a||{},b);return d.series=c.series||b.series,g.isEqual(b,d)||(this.config=d,this.isInit=!0,this.startIndex=0,this.initRank()),this.config},destroy:function(){this.removeTimer(),this.container.find(".row-content").off(),this.container.empty(),this._data=null,this.off&&this.off(),this.container[0].removeEventListener("error",this.listenerImgCb,!0)},clearAnimate:function(){this.removeTimer()},startAnimate:function(){this.isInit=!0,this.restartLoop(),this.isInit=!1}}),a.exports});