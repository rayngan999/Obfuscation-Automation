function JSONreplacer(a,b){return"number"!=typeof b||isFinite(b)?b:String(b)}function failedImageHandler(a){$.post(jsvars.LANG_URL+"/failed-image/",{src:a.src}),a.src="/images/noimage_large."+jsvars.USER_LANGUAGE+".jpg",a.onerror=null}function bounceexchangeEmailCapture(a){var a=a||{};a.toscheckbox=a.tos;var b=$.Deferred();if(jsvars.user.id)customerio.track(a.campaign),b.resolve();else{var c=bigstock.emailOnlySignup(a);c.done(function(c){c&&1==c.status?(customerio.track(a.campaign),b.resolve()):b.reject()})}return b.promise()}function postMessage_callback(a){if(-1!=a.origin.indexOf(location.hostname)){var b=js_routes.get(a.data);if(b)js_routes.init(js_routes.get(a.data));else{var c=$.parseJSON(a.data);$.each(c,function(a,b){bsp[a]=b}),$(document).trigger("postMessage_JSON")}}}function postMessage_iframe_setup(a){a.load(function(){bsp.hasPostMessage&&$(this)[0].contentWindow.postMessage('{"parent_protocol":"'+location.protocol+'", "i_am_an_iframe":true, "iframe_id":"'+$(this).attr("id")+'"}',"https://"+location.hostname),$.browser.mozilla&&$(a).focus()})}function log(){window.console&&"prod"!==jsvars.run_env&&window.console.log(1==arguments.length?arguments[0]:arguments)}function vof(a,b){return"function"==typeof a?b?a.call(b):a():a}function accessor(a,b){var c=b;return function(b){return"undefined"==typeof b?c:(c=b,a)}}function isdef(a){return"undefined"!=typeof a}function URL(a){function b(a){var b;for(b=0;b<g.length;b++)if(g[b][0]==a)return b;return-1}var c,d,e,f,g=[];if(c=a?a.split("?"):window.location.href.split("?"),c.length>1)for(g=c[1].split("&"),d=0;d<g.length;d++)e=g[d].split("="),g[d]=[null,null],e.length&&(g[d]=[e[0],null],e.length>1&&(g[d]=[e[0],e[1]]));return f={get:function(a){var c=b(a);return-1==c?void 0:g[c][1]},set:function(a){if("object"!=typeof a)throw"this should be an object";for(var c in a){var d=b(c);-1==d?g[g.length]=[c,a[c]]:g[d][1]=a[c]}},toString:function(){var a,b=c[0];for(a=0;a<g.length;a++)b+=0==a?"?":"&",b+=g[a][0]+"=",b+=g[a][1];return b}}}function _bspAlert(a){var b=function(a){var b;if("string"==typeof a){var c=a;a={},a.message=c}else var a=a||{};if(a.type=a.type||"focus",a.clear&&$(".js_global_alert").remove(),a.message){var d='<div class="alert js_global_alert">'+a.message+"</div>",e='<div class="alert alert-error js_global_alert">'+a.message+"</div>",f='<div class="alert alert-success js_global_alert">'+a.message+"</div>";"focus"==a.type?b=d:"error"==a.type?b=e:"alert"==a.type&&(b=f),a.target?"before"==a.target_option?$(a.target).before(b):"after"==a.target_option?$(a.target).after(b):"prepend"==a.target_option?$(a.target).prepend(b):$(a.target).append(b):$("#header2").after(b),a.no_scroll||$("html, body").animate({scrollTop:0},"fast")}return this.clear=function(){$(".js_global_alert").remove()},this};return a&&b(a),b}function go(a){return document.location.href=a,!1}function signup(a){if(bsp.user.isLoggedIn())return!0;var a=a||{};return bsp.signup_modal2=bsp.https_modal2("signup",a),$().modal?bsp.signup_modal2.modal():$("html").on("bootstrap.min.js",function(){bsp.signup_modal2.modal()}),!1}function login(a){if(bsp.user.isLoggedIn())return!0;var a=a||{};return a.header?($(".login_from_header_wrapper").toggle(),bsp.hasPostMessage&&"block"==$(".login_from_header_wrapper").css("display")&&($(".login_from_header_wrapper iframe")[0].contentWindow.postMessage('{"focus":"true"}',"https://"+location.hostname),$(".login_from_header_wrapper iframe").load(function(){$(".login_from_header_wrapper iframe")[0].contentWindow.postMessage('{"focus":"true"}',"https://"+location.hostname)})),$.browser.mozilla&&$(".login_from_header_wrapper iframe").focus()):(bsp.login_modal2=bsp.https_modal2("login",a),$().modal?bsp.login_modal2.modal():$("html").on("bootstrap.min.js",function(){bsp.login_modal2.modal()})),!1}function signup_complete(a){var a=a||{};$.get(LANG_URL+"/serverside/signup_complete.php?js_routes_skip_request=1",function(b){bsp.signup_modal2&&bsp.signup_modal2.modal("hide"),tmp=$(b),"guest_user"==a.type&&tmp.find(".guest_user").removeClass("hide"),tmp.on("hidden",function(){document.location=document.location}),bsp.modals.signup_complete=tmp.filter(".modal").modal()})}function isResponsiveWidth(){return $(window).width()<=980}function _bspCart(a,b,c,d){b=b||[],c=c||{},d=d||{};var e={ids:b,length:b.length,latest:c,count:0,remove:function(b,c){var c=c||{};a.ajax({url:d.LANG_URL+"/cart/remove/",data:{image_id:b},type:"POST",dataType:"json",beforeSend:function(a){a.setRequestHeader("anti-csrf-token",jsvars.csrf_session_token)},success:function(d){e.count=d.data.total_item_count||d.data.total_items,delete e.ids[b],delete e.latest[b],c.callback?c.callback.call({},d):"",a("html").trigger("cart_removed")}})},add:function(b,c){var c=c||{};c.credit_cost=c.credit_cost||d.default_image_size||2;var f={image_id:b,credit_cost:c.credit_cost};c.format_id&&(f.format_id=c.format_id),c.license_id&&(f.license_id=c.license_id),a.ajax({url:d.LANG_URL+"/cart/add/",data:f,type:"POST",dataType:"json",beforeSend:function(a){a.setRequestHeader("anti-csrf-token",jsvars.csrf_session_token)},success:function(f){"success"==f.type?(e.count=f.data.total_item_count,e.ids.push(b),c.callback?c.callback.call({},f):"",0==Object.size(e.latest)&&(e.latest={}),c.id=b,c.added_on=(new Date).toString(),delete c.callback,e.latest[b]=c,c.format&&c.type&&a(document).trigger("track_sdp_event",{event:"cart",id:b,type:c.type,format:c.format,lightbox:f.data.collection_id}),a("html").trigger("cart_added",{image_id:b})):(a("html").trigger("alert.bsp",{clear:!0}),100==e.count?a("html").trigger("alert.bsp",{type:"error",message:d.message_too_many}):a("html").trigger("alert.bsp",{type:"error",message:d.message_fail}),a(document).trigger("cart_error",{photo_id:b}))}})},update:function(b){b.credit_cost=b.credit_cost||d.default_image_size||2;var c={credit_cost:b.credit_cost},e=d.LANG_URL+"/cart/update/";b.image_id?c.image_id=b.image_id:e+="all/",b.format_id&&(c.format_id=b.format_id),b.license_id&&(c.license_id=b.license_id),a.ajax({url:e,data:c,type:"GET",dataType:"json",success:function(c){b.callback?b.callback.call({},c):"",a(document).trigger("cart_size_set")}})}};return e}function usaNumberNotation(a){a+="";var b=a.indexOf(","),c=a.indexOf(".");if(-1!=b&&-1!=c){if(b>c){var a=a.split(",");return a[0]=a[0].replace(".",","),a[0]+"."+a[1]}}else if(b)return a.replace(",",".");return a}function extractParamFromUri(a,b){if(a){var a=a.split("#")[0],c=a.split("?");if(1!=c.length){var d=decodeURI(c[1]);b+="=";for(var e,f=d.split("&"),g=0;e=f[g];++g)if(0===e.indexOf(b))return unescape(e.split("=")[1])}}}function imagePreview(a,b){if(!a)return $("#image_preview").html("").hide(),!1;if(bsp.SearchResult||(bsp.SearchResult={preview_images:{}}),!bsp.SearchResult.hide_image_preview){var c=$(a),b=b||{};if($("#image_preview").length||$("body").append('<div id="image_preview" class="image_preview_new"></div>'),c.find(".save_button.active").length)return!1;{1==Cookies.get("hide_image_preview")?!0:!1,b.display_side&&"left"==b.display_side?"left":"right"}switch(b.thumb_size){case"small2":image_preview_size="small2",image_preview_host="static",image_preview_bounds_horizontal=170,image_preview_bounds_vertical=170;break;case"small":image_preview_size="small",image_preview_host="static",image_preview_bounds_horizontal=110,image_preview_bounds_vertical=110;break;default:image_preview_size="large2",image_preview_host="static2",image_preview_bounds_horizontal=450,image_preview_bounds_vertical=470}var d=20,e=25,f=5,g=c.data("resolution");if(g="undefined"!=typeof g?g.split("x"):[c.width(),c.height()],2==g.length){var h=parseInt(g[0],10),i=parseInt(g[1],10);h>i?(i=Math.floor(i/(h/image_preview_bounds_horizontal)),h=image_preview_bounds_horizontal):(h=Math.floor(h/(i/image_preview_bounds_vertical)),i=image_preview_bounds_vertical);var j=i+d,k=c.find("img").attr("src");if("large2"==this.image_preview_size){var l=k.replace("/small/","/large2/");l=l.replace("/small2/","/large2/"),l=l.replace("/170/","/450/"),l=l.replace("://static.","://static2.")}else{var l=k.replace("/small/","/"+this.image_preview_size+"/");l=l.replace("/small2/","/"+this.image_preview_size+"/")}var m=k.lastIndexOf("/"),n=k.indexOf(".jpg",m),o=k.substring(m+1,n);bsp.SearchResult.last_preview_id=o;var p=$("#image_preview"),q=c.data("title")||"";bsp.SearchResult.preview_images[o]?p.html('<div id="image_preview_box" style="height:'+i+"px; width:"+h+'px;"><img src="'+bsp.SearchResult.preview_images[o].src+'" style="width:'+h+"px;height:"+j+'px;"></div><div><div class="text">'+q+"</div></div>"):(p.html('<div id="image_preview_box" style="height:'+i+"px; width:"+h+'px;"><img id="image_preview_'+o+'" src="'+l+'" style="width:'+h+"px;height:"+j+'px;display:none;"><img id="image_preview_thumb_'+o+'" src="'+k+'" style="width:'+h+"px;height:"+i+'px;"></div><div><div class="text">'+q+"</div></div>"),preload_image=new Image,$(preload_image).load(function(a){bsp.SearchResult.last_preview_id===o&&($("#image_preview_thumb_"+o).hide(),$("#image_preview_box .loader").hide(),$("#image_preview_"+o).show(),a.stopPropagation())}),preload_image.src=l,bsp.SearchResult.preview_images[o]=preload_image);var r=$(window).scrollTop(),s=$(a).find("img").offset(),t=s.top-Math.floor(i/2),u="auto";r>t&&(t=r+e),$(window).height()+r-s.top<i&&(t="auto",u=0==r?e+"px":r-e>0?"-"+(r-e)+"px":r-e);var v=$(a).find("img").width();if(100>v&&(v+=Math.round((100-v)/2)),"left"==bsp.SearchResult.image_preview_side)if(s.left-h>0)var w="auto",x=parseInt($(window).width()-s.left+f)+"px";else var x="auto",w=parseInt(s.left+v+f)+"px";else if($(window).width()-s.left-v<h)var w="auto",x=parseInt($(window).width()-s.left+f)+"px";else var x="auto",w=parseInt(s.left+v+f)+"px";p.css("top",t).css("bottom",u).css("right",x).css("left",w).css("width",h).show()}}}function sortListElements(a,b){return $(a).text()>$(b).text()?1:-1}function _createMediaElement(a,b){var b=b||{},c=!1,d=!1,e=["playpause","current","duration","progress","speed","volume"],f=new MediaElementPlayer(a,{features:e,loop:!0,alwaysShowControls:!0,enableKeyboard:!1,success:function(a){function g(a){return setTimeout(function(){$(".mejs-controls .mejs-snippet").hasClass("active")?a.options.alwaysShowControls=!0:(a.options.alwaysShowControls=!1,a.hideControls(!0))},1200)}var h,i=$(a),j=!0;c=!0;var k,l=null;i.hasClass("media-hoverplay")?l=i.parents(".mejs-container"):i.parents(".media-hoverplay").length&&(l=i.parents(".media-hoverplay")),b.permalink&&i.parents(".mejs-container").attr("data-href",b.permalink),l&&(i.parents(".mejs-container").find(".mejs-controls").remove(),i.parents(".mejs-container").find(".mejs-overlay").remove(),i.off("click"),l.on("mouseenter",function(){k&&(f.media.src=k),f.play()}),l.on("mouseleave",function(){f.pause(),k=f.media.src,f.media.src=""}),$(window).on("load",function(){f.load()})),$(a),bsp.track("event",{category:"video_load",action:"total loads"});var m=setTimeout(function(){log("over 1 second load"),bsp.track("event",{category:"video_load",action:"over 1 second load"})},1e3),n=setTimeout(function(){log("over 5 second load"),bsp.track("event",{category:"video_load",action:"over 5 second load"})},5e3),o=setTimeout(function(){log("over 10 second load"),bsp.track("event",{category:"video_load",action:"over 10 second load"})},1e4);a.addEventListener("canplay",function(){clearTimeout(m),clearTimeout(n),clearTimeout(o);var a=URL().get("start_video")||0;a&&f.setCurrentTime(a),j&&(j=!1,h=g(f),f.$media.on("mouseenter",function(){f.killControlsTimer(),clearTimeout(h)}))},!1),a.addEventListener("loadedmetadata",function(){d=!0,_.indexOf(e,"snippet")>-1&&_initSnippetPanel(),setTimeout(function(){f.showControls(!1)},200)},!1),$(window).on("load",function(){"none"==$(a).attr("preload")&&$(a).attr("preload","metadata")});var p=!1;a.addEventListener("playing",function(){p||(p=!0,$(document).trigger("track_sdp_event",{event:"play-start",id:b.id,type:"video",format:b.format}))}),a.addEventListener("pause",function(){p&&($(document).trigger("track_sdp_event",{event:"play-end",id:b.id,type:"video",format:b.format}),p=!1)})}})}function BSPAutoSuggest(a,b,c){this.options={},this.suggester=c;var d=this;BSPAutoSuggest.instanceNum=BSPAutoSuggest.instanceNum?BSPAutoSuggest.instanceNum+1:1;var e,f,g=this,h="AutoSuggestContainer"+BSPAutoSuggest.instanceNum,j=-1;this.init=function(){function c(b){b=b.trim(),$("#"+h).length?asc=$("#"+h):($(a).parent().append("<div class=asugg-wrapper id="+h+"></div>"),asc=$("#"+h),asc.css("top",$(a).position().top+$(a).outerHeight()+g.offsetTop()).css("left",$(a).position().left+g.offsetLeft()).width(g.width()||$(a).outerWidth())),l(asc,e,b)}function k(b){$(a).val(b),window.bigstockSearch&&window.bigstockSearch.set("q",b),d.clearSuggestions(),$("html").trigger("BSPAutoSuggest_selection"),_gaq.push(["_trackEvent","auto_suggest-"+jsvars.USER_LANGUAGE,"suggestion_selected",b])}function l(a,b,c){if(a.html(""),j=-1,b&&(1!=b.length||b[0]!=c))for(i=0;i<b.length;i++)!function(b,e){switch(0===i&&a.append("<div class=asugg-cntr></div>"),$("#"+h+" div.asugg-cntr").append('<a href=# id="sugg'+i+'" class=asugg style=padding:4px><span class=typed></span><span class=remainder></span></a>'),d.suggester.options.type){case"exact":$("#sugg"+i+" span.typed").text(e.substring(0,c.length)),$("#sugg"+i+" span.remainder").text(e.substring(c.length));case"fuzzy":default:null!=e.match("^"+c.trim())?($("#sugg"+i+" span.typed").text(e.substring(0,c.trim().length)),$("#sugg"+i+" span.remainder").text(e.substring(c.trim().length))):$("#sugg"+i+" span.remainder").text(e)}$("#sugg"+i).click(function(a){return k(e),null!=g.suggestionSelected()&&g.suggestionSelected()(),a.preventDefault(),!1}).mouseover(function(){m(b)})}(i,b[i])}function m(a){-1!=j&&n(j),j=a,$("#sugg"+a).addClass("active")}function n(a){$("#sugg"+a).removeClass("active")}return $(a).bind("change paste keydown",function(h){var i=j+1,l=j-1;if(40==h.which){if(!e||!e.length)return;return j==e.length-1&&(i=0),m(i),void h.preventDefault()}if(38==h.which){if(!e||!e.length)return;return 0>=j&&(l=e.length-1),m(l),void h.preventDefault()}return 13==h.which?(j>-1&&(d.tracking_typed_terms.push($(a).val()),d.tracking_dropdown_positions.push(j),d.tracking_completed_terms.push(e[j]),k(e[j])),!0):(9==h.which&&j>-1&&(d.tracking_typed_terms.push($(a).val()),d.tracking_dropdown_positions.push(j),d.tracking_completed_terms.push(e[j]),$(this).val(e[j]),h.preventDefault()),void window.setTimeout(function(){var i=$(a).val();if(i!=f||27==h.which){f=i;var j=$(b).data("type");"image"==j&&(j="fuzzy"),d.suggester.getSuggestions(j,g,27==h.which?"":i,function(a){e=a,c(i)})}},1))}),this.clearSuggestions=function(){var a=$("#"+h);a.length&&l(a)},this},this.maxSuggestions=accessor(this,50),this.offsetTop=accessor(this,0),this.offsetLeft=accessor(this,0),this.suggestionSelected=accessor(this,null),this.width=accessor(this,null),this.tracking_typed_terms=[],this.tracking_dropdown_positions=[],this.tracking_completed_terms=[]}!function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if("undefined"!=typeof c.Adapter)throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},"undefined"!=typeof c.init&&c.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;try{f=a.sessionStorage,f.setItem("TEST","1"),f.removeItem("TEST")}catch(o){f=!1}if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.disableSuid=m.options.disableSuid||!1,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.options.html4Mode=m.options.html4Mode||!1,m.options.delayInit=m.options.delayInit||!1,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){m.options.debug&&m.log.apply(m,arguments)},m.log=function(){var a,b,e,f,g,h=!("undefined"==typeof c||"undefined"==typeof c.log||"undefined"==typeof c.log.apply),i=d.getElementById("log");for(h?(f=Array.prototype.slice.call(arguments),a=f.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[a,f]):c.log.apply(c,[a,f])):a="\n"+arguments[0]+"\n",b=1,e=arguments.length;e>b;++b){if(g=arguments[b],"object"==typeof g&&"undefined"!=typeof k)try{g=k.stringify(g)}catch(j){}a+="\n"+g+"\n"}return i?(i.value+=a+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):h||l(a),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated=m.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a,b=m.getState(!1,!1),c=(b||{}).url||m.getLocationHref();return a=c.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=m.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.getLocationHref=function(a){return a=a||d,a.URL===a.location.href?a.location.href:a.location.href===decodeURIComponent(a.URL)?a.URL:a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash?a.location.href:-1==a.URL.indexOf("#")&&-1!=a.location.href.indexOf("#")?a.location.href:a.URL||a.location.href},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b,c=m.extractId(a.url);if(!c)if(b=m.getStateString(a),"undefined"!=typeof m.stateToId[b])c=m.stateToId[b];else if("undefined"!=typeof m.store.stateToId[b])c=m.store.stateToId[b];else{for(;;)if(c=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof m.idToState[c]&&"undefined"==typeof m.store.idToState[c])break;m.stateToId[b]=c,m.idToState[c]=a}return c},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(a.url?a.url:m.getLocationHref()),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&m.options.disableSuid!==!0&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d,e;return e=-1!=a.indexOf("#")?a.split("#")[0]:a,c=/(.*)\&_suid=([0-9]+)$/.exec(e),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c,d,e=null;return b=b||!1,c=m.extractId(a),c&&(e=m.getStateById(c)),e||(d=m.getFullUrl(a),c=m.getIdByUrl(d)||!1,c&&(e=m.getStateById(c)),e||!b||m.isTraditionalAnchor(a)||(e=m.createStateObject(null,null,d))),e},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b,c=!1;return b=m.extractState(a.url),c=b&&b.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b,c,d,e=!1;return m.savedStates.length&&(b=a.id,c=m.getLastSavedState(),d=c.id,e=b===d),e},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]},m.getCurrentIndex=function(){var a=null;return a=m.savedStates.length<1?0:m.savedStates.length-1},m.getHash=function(a){var b,c=m.getLocationHref(a);return b=m.getHashByUrl(c)},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=decodeURIComponent(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(m.busy(!0),c=m.extractState(a,!0),c&&!m.emulated.pushState?m.pushState(c.data,c.title,c.url,!1):m.getHash()!==a&&(m.bugs.setHash?(e=m.getPageUrl(),m.pushState(null,null,e+"#"+a,!1)):d.location.hash=a),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.encodeURIComponent(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var b,c=a.title;c||(b=m.getStateByIndex(0),b&&b.url===a.url&&(c=b.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=c.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=c,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b,c=m.extractState(m.getLocationHref());if(!m.isLastSavedState(c))return b=c,b||(b=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var d,e,f=!1,g=!1;return m.doubleCheckComplete(),(d=m.getHash())?(e=m.extractState(d||m.getLocationHref(),!0),e?m.replaceState(e.data,e.title,e.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(f=m.Adapter.extractEventData("state",b,c)||!1,g=f?m.getStateById(f):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(m.getLocationHref()),g||(g=m.createStateObject(null,null,m.getLocationHref())),m.expectedStateId=!1,m.isLastSavedState(g)?(m.busy(!1),!1):(m.storeState(g),m.saveState(g),m.setTitle(g),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(m.getLocationHref(),!0))),f&&(m.onUnload=function(){var a,b,c;try{a=k.parse(f.getItem("History.store"))||{}}catch(d){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),c=k.stringify(a);try{f.setItem("History.store",c)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;f.length&&(f.removeItem("History.store"),f.setItem("History.store",c))}},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},m.options&&m.options.delayInit||m.init()}(window);var jsvars=jsvars||{},LANG_URL=jsvars.LANG_URL,_gaq=_gaq||[],dataLayer=dataLayer||[],ga=ga||function(){(ga.q=ga.q||[]).push(arguments)};$(function(){$("body").addClass(jsvars.USER_LANGUAGE)}),jsvars.LANG_URL=="/"+$("html").attr("default_lang")&&(LANG_URL="");var bsp=bsp||{};bsp.photos={},bsp.selected={},bsp.modals={},bsp.bench_start=new Date,HTTP_HOST=document.location.host,bsp.ab_password_crack_power=bsp.ab_password_crack_power||0;var _kiq=_kiq||[];if(jsvars.user.id&&_kiq.push(["identify",jsvars.user.email]),window.lang={},bsp.hasPostMessage="undefined"==typeof window.postMessage?!1:!0,window.optimizely=window.optimizely||[],window.optimizely&&"undefined"==typeof window.optimizely.push&&(window.optimizely.push=function(){}),Cookies.defaults.path="/",Cookies.defaults.domain=COOKIE_DOMAIN,"/close_popup/"==location.pathname)try{self.close(),window.close()}catch(e){}var ABtest_exclude_extended_license=ABtest_exclude_extended_license||0;if(!jQuery.browser){var uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}};matched=uaMatch(navigator.userAgent),browser={},matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),jQuery.browser=browser}Number.prototype.formatMoney=function(a,b,c){var d=this,a=isNaN(a=Math.abs(a))?2:a,b=void 0==b?",":b,c=void 0==c?".":c,e=0>d?"-":"",f=parseInt(d=Math.abs(+d||0).toFixed(a))+"",g=(g=f.length)>3?g%3:0;
return e+(g?f.substr(0,g)+c:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+c)+(a?b+Math.abs(d-f).toFixed(a).slice(2):"")},bsp.util={set_var:function(a,b,c){if("undefined"==typeof a)return!1;if("undefined"==typeof b)return!1;var c=c||{};c.async=c.async||!1,$.ajax({url:LANG_URL+"/serverside/set_var.php?"+a+"="+b,async:c.async})},floordec:function(a,b){var b=b||2;return Math.floor(a*Math.pow(10,b))/Math.pow(10,b)},ceildec:function(a,b){var b=b||2;return Math.ceil(a*Math.pow(10,b))/Math.pow(10,b)},formatMoney:function(a,b){var b=b||{};return b.decimal_places=b.decimal_places||2,b.decimal=b.decimal||jsvars.DEC_POINT,b.thousands=b.thousands||jsvars.THOUSANDS_SEP,a=parseFloat(a),a%1==0&&(b.decimal_places=0),parseFloat(a).formatMoney(b.decimal_places,b.decimal,b.thousands)},countryTax:function(a){var b=$.Deferred(),c=$.ajax({type:"POST",url:"/country-tax/taxable-country",data:{country:a},dataType:"json"});return c.done(function(a){"success"==a.result?b.resolve(a.data):b.reject(a.data)}),b.promise()},saveTaxId:function(a,b,c){var d=$.Deferred(),e=c||"European Union VAT",f=$.ajax({type:"POST",url:"/country-tax/valid-exempt-number",data:{tax_type:e,exempt_number:a,country_code:b},dataType:"json"});return f.done(function(a){log(a),"success"==a.result&&1==a.data.is_valid?d.resolve(a.data):d.reject(a.data)}),d.promise()},isMobile:function(){return $(window).width()<=768?!0:!1},numberWithCommas:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},bsp.user={credits:{add:function(a){$(".user_credits").text(jsvars.user.credits+a),jsvars.user.credits=jsvars.user.credits+a},get:function(){return jsvars.user.credits}},photo_payment_method:{set:function(a,b){var b=b||{};return bsp.util.set_var("photo_payment_method",a,b)}},isLoggedIn:function(){return 0==jsvars.user.id?!1:!0},hasSubscription:function(a){return bsp.user.subscriptions.getActiveSubscriptions(a).length?!0:!1},subscriptions:{getActiveSubscriptions:function(a){for(var b=[],c=0;c<jsvars.user.subscriptions.length;c++)a&&a==jsvars.user.subscriptions[c].redeemable_for?b.push(jsvars.user.subscriptions[c]):a||b.push(jsvars.user.subscriptions[c]);return b},hasActiveSubscriptions:function(a){return this.getActiveSubscriptions(a).length?!0:!1},getSubscriptionById:function(a){for(var b={},c=0;c<jsvars.user.subscriptions.length;c++)a==jsvars.user.subscriptions[c].id&&(b=jsvars.user.subscriptions[c]);return b},getTrialSubscriptions:function(a){for(var b=[],c=this.getActiveSubscriptions(a),d=0;d<c.length;d++)c[d].is_trial&&b.push(c[d]);return b},hasTrialSubscriptions:function(a){return this.getTrialSubscriptions(a).length?!0:!1},getCredits:function(a){for(var b=0,c=this.getActiveSubscriptions(a),d=0;d<c.length;d++)a&&a==c[d].redeemable_for?b+=c[d].total_credits_remaining:a||(b+=c[d].total_credits_remaining);return b},cancel:function(a){return $.ajax({url:"https://"+location.host+jsvars.LANG_URL+"/account/",type:"POST",data:{action:"cancel_subscription",id:a.id},xhrFields:{withCredentials:!0}})},upsell:function(a){return $.ajax({url:"https://"+location.host+jsvars.LANG_URL+"/account/",type:"POST",data:{action:"upsell",id:a.id},xhrFields:{withCredentials:!0}})},activate:function(a){return $.ajax({url:"https://"+location.host+jsvars.LANG_URL+"/account/",type:"POST",data:{action:"activate_subscription",id:a.id},xhrFields:{withCredentials:!0}})},upgrade:function(a,b,c){if(a.is_trial){var c=c||1;return this.cancel(a).done(function(){var d=$("<form></form>");d.css({display:"none"}),d.attr({method:"POST",action:"https://"+location.host+"/payment/"}),d.append("<input type='hidden' name='id' value='"+a.id+"'>"),d.append("<input type='hidden' name='freesubupgrade' value='"+c+"'>"),d.append("<input type='hidden' name='product' value='"+b+"'>"),$("body").append(d),d.submit()}),!0}return!1}}},optimizely.push(["addToSegment","country",jsvars.COUNTRY_CODE_3]),optimizely.push(["addToSegment","language",jsvars.USER_LANGUAGE]),bsp.user.subscriptions.hasActiveSubscriptions()&&optimizely.push(bsp.user.subscriptions.hasTrialSubscriptions()?["addToSegment","has_subscription","free"]:["addToSegment","has_subscription","paid"]),optimizely.push(jsvars.user.id?["addToSegment","logged_in_status","logged in"]:["addToSegment","logged_in_status","logged out"]);var BounceXReady=$.Deferred();if($(window).on("load",function(){"qa"==jsvars.run_env||-1!=location.href.indexOf("/partners")||Cookies.get("had_sub")||jsvars.hide_bounceexchange||(window.bxAsyncInit=function(){BounceXReady.resolve()},"undefined"==typeof BounceXOff&&!function(a){var b=a.createElement("script");b.src=a.location.protocol+"//bounceexchange.com/bounce/i.js?client_id=613",b.async=!0,a.getElementsByTagName("head")[0].appendChild(b)}(document))}),window.__insp=window.__insp||[],__insp.push(["wid",821203232]),"prod"==jsvars.run_env&&$(window).load(function(){!function(){function a(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.id="inspsync",a.src=("https:"==document.location.protocol?"https":"http")+"://cdn.inspectlet.com/inspectlet.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}window.attachEvent?window.attachEvent("onload",a):window.addEventListener("load",a,!1)}()}),jsvars.user.id){__insp.push(["tagSession",jsvars.user.id]),__insp.push(["tagSession",jsvars.user.email]),__insp.push(["tagSession",jsvars.COUNTRY_CODE_3]),__insp.push(["tagSession",jsvars.CURRENCY_CODE]),__insp.push(["tagSession",jsvars.USER_LANGUAGE]),__insp.push(["tagSession",jsvars.USER_LANGUAGE]);var subscription_type="none";bsp.user.subscriptions.hasActiveSubscriptions()&&(subscription_type=bsp.user.subscriptions.hasTrialSubscriptions()?"free":"paid"),__insp.push(["tagSession","subscription_type_"+subscription_type]),$("html").on("cart_added",function(){__insp.push(["tagSession","cart_added"])})}bsp.universal_analytics_tracker=function(a){var b="";a.name=a.name||"t1",function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),a.name&&(b=a.name+"."),ga("create",a.ga_account_id,{clientId:a.clientId,name:a.name}),ga(b+"set","dimension3",a.lang),a.host=a.host.split("."),ga(b+"set","dimension1",a.host[a.host.length-1]),a.user_type&&ga(b+"set","dimension2",a.user_type),ga(function(){c=ga.getByName(a.name),jsvars.ga_clientId!=c.get("clientId")&&(jsvars.ga_clientId=c.get("clientId"),$.get("/serverside/set_var.php?ga_current_clientId="+c.get("clientId")))});var c=function(a,c){switch(a){case"pageview":ga(b+"send",{hitType:"pageview",page:c.page,title:c.title});break;case"dimension":ga(b+"set","dimension"+c.dimension,c.value);break;case"metric":ga(b+"set","metric"+c.metric,c.value);break;case"event":if(!c.category||!c.action)throw"ga event has missing feilds";ga(b+"send",{hitType:"event",eventCategory:c.category,eventAction:c.action,eventLabel:c.label,eventValue:c.value,nonInteraction:c.noninteraction||!1});break;case"transaction":ga(b+"require","ecommerce","ecommerce.js"),ga(b+"ecommerce:addTransaction",{id:c.id,affiliation:c.vendor,revenue:c.cost,shipping:c.shipping,tax:c.tax,currencyCode:"USD"});break;case"item":ga(b+"ecommerce:addItem",{id:c.id,name:c.name,sku:c.sku,category:c.category,price:c.cost,quantity:c.quantity});break;case"finish_transaction":ga(b+"ecommerce:send");break;case"social":ga(b+"send","social",{socialNetwork:c.network,socialAction:c.action,socialTarget:c.target});break;case"error":ga(b+"send","exception",{exDescription:c.description||"no description",exFatal:c.fatal||!1})}};return c},bsp.track=function(a,b){switch(b=b||{},"string"!=typeof a&&log("please set a type to track"),bsp.universal_analytics_trackers=bsp.universal_analytics_trackers||[],_.each(bsp.universal_analytics_trackers,function(c){c(a,b)}),a){case"pageview":_gaq.push(["_trackPageview",b.page]),dataLayer.push({event:"_trackPageview",page:b.page});break;case"event":if(!b.category||!b.action)throw"ga event has missing feilds";_gaq.push(["_trackEvent",b.category,b.action,b.label,b.value,b.noninteraction]),dataLayer.push({event:"_trackEvent",eventCategory:b.category,eventAction:b.action,eventLabel:b.label,eventValue:b.value});break;case"transaction":_gaq.push(["_addTrans",b.id,b.vendor,b.cost,b.tax,b.shipping,b.city,b.state,b.country]),dataLayer.push({event:"_addTrans",orderId:b.id,orderVendor:b.vendor,orderCost:b.cost,orderTax:b.tax,orderShipping:b.shipping,orderCity:b.city,orderState:b.state,orderCountry:b.country});break;case"item":_gaq.push(["_addItem",b.id,b.sku,b.name,b.category,b.cost,b.quantity]),dataLayer.push({event:"_addItem",itemId:b.id,itemSku:b.sku,itemName:b.name,itemCategory:b.category,itemCost:b.cost,itemQuantity:b.quantity});break;case"finish_transaction":_gaq.push(["_trackTrans"]),dataLayer.push({event:"_trackTrans"});break;case"social":_gaq.push(["_trackSocial",b.network,b.action,b.target]),dataLayer.push({event:"_trackSocial",socialNetwork:b.network,socialAction:b.action,socialTarget:b.target})}},window.onerror=function(a,b,c){bsp.track("error",{description:a+" "+b+" "+c,fatal:!0})},_gaq.push(["_setAccount",jsvars.google_analytics]),_gaq.push(["_setDomainName","bigstockphoto.com"]),_gaq.push(["_addIgnoredRef","bigstockphoto.com"]),_gaq.push(["_setSiteSpeedSampleRate",10]),_gaq.push(["_addOrganic","google","q",!0,"google images","/imgres?"]);var user_type;"subscription"==jsvars.photo_payment_method?user_type="Subscriber":"credits"==jsvars.photo_payment_method&&jsvars.user.credits>0?user_type="Buyer-Credits":"paygo"==jsvars.photo_payment_method&&(user_type="Buyer-PayGo"),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),bsp.universal_analytics_trackers=[],_.each(jsvars.google_analytics_universal,function(a,b){bsp.universal_analytics_trackers[bsp.universal_analytics_trackers.length]=new bsp.universal_analytics_tracker({ga_account_id:a,clientId:jsvars.ga_clientId,lang:jsvars.USER_LANGUAGE,host:document.location.host,photo_payment_method:jsvars.photo_payment_method,user:jsvars.user,user_type:user_type,name:"t"+(b+1)})});var p={};jsvars.ga_trackPageview_override&&(p.page=jsvars.ga_trackPageview_override),bsp.track(name+"pageview",p);var PixelTrack=function(a,b){"use strict";var c=function(c,d){"prod"===b?$(function(){a.append("script"==d?'<script class="bsp-pixelTrack" src="'+c+'" /></script>':"iframe"==d?'<iframe class="bsp-pixelTrack" style="display:none" src="'+c+'" async /></iframe>':'<img class="bsp-pixelTrack" style="display:none" src="'+c+'"  />')}):window.console&&console.log("DEV: Pixel Track: "+c)};return c}($("html"),jsvars.run.env);if(PixelTrack("//googleads.g.doubleclick.net/pagead/viewthroughconversion/1070250879/?value=0&amp;guid=ON&amp;script=0"),PixelTrack("//getrockerbox.com/pixel?source=bigstock&type=imp&an_seg=1106123","script"),jsvars.user.id?PixelTrack("//getrockerbox.com/pixel?source=bigstock&type=imp&an_seg=1106107","script"):PixelTrack("//getrockerbox.com/pixel?source=bigstock&type=imp&an_seg=1106123","script"),document.location.pathname.indexOf("/free-trial")>=0&&PixelTrack("//secure.adnxs.com/seg?add=1106123&t=2","script"),document.location.pathname.indexOf("/subscribe/payment/")>=0&&PixelTrack("//secure.adnxs.com/seg?add=1106124&t=2"),$("html").on("subscription_purchase_success",function(a,b){if(!(b&&b.data&&b.data.redeemable_for&&b.data.order&&b.data.order.transid))return void log("not the right data");b.data.redeemable_for.join("_");-1!==b.data.redeemable_for.indexOf("video")?(PixelTrack("https://secure.adnxs.com/px?id=494016&seg=2467003&t=1&order_id="+b.data.order.transid,"script"),PixelTrack("https://getrockerbox.com/pixel?source=bigstock&type=conv&id=494016&seg=2467003&order_type=video","script")):-1!==b.data.redeemable_for.indexOf("image")&&(PixelTrack("https://secure.adnxs.com/px?id=128793&seg=1106125&t=1&order_id=image","script"),PixelTrack("https://getrockerbox.com/pixel?source=bigstock&type=conv&id=128793&seg=1106125&order_type=image","script"))}),$("html").on("signup_complete",function(a,b){PixelTrack("//secure.adnxs.com/px?id=128793&seg=1106125&t=1&order_id="+b.id),PixelTrack("//getrockerbox.com/pixel?source=bigstock&type=conv&id=128793&img=true")}),$(function(){$("html").trigger("bootstrap.min.js"),bsp.bootstrapReady=$.Deferred().resolve()}),function(a,b,c){function d(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function e(a,d){var e=this,f=c(e);if(e.value==f.attr("placeholder")&&f.hasClass("placeholder"))if(f.data("placeholder-password")){if(f=f.hide().next().show().attr("id",f.removeAttr("id").data("placeholder-id")),a===!0)return f[0].value=d;f.focus()}else e.value="",f.removeClass("placeholder"),e==b.activeElement&&e.select()}function f(){var a,b=this,f=c(b),g=this.id;if(""==b.value){if("password"==b.type){if(!f.data("placeholder-textinput")){try{a=f.clone().attr({type:"text"})}catch(h){a=c("<input>").attr(c.extend(d(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",e),f.data({"placeholder-textinput":a,"placeholder-id":g}).before(a)}f=f.removeAttr("id").hide().prev().attr("id",g).show()}f.addClass("placeholder"),f[0].value=f.attr("placeholder")}else f.removeClass("placeholder")}var g,h,i="placeholder"in b.createElement("input"),j="placeholder"in b.createElement("textarea"),k=c.fn,l=c.valHooks,m=c.propHooks;i&&j?(h=k.placeholder=function(){return this},h.input=h.textarea=!0):(h=k.placeholder=function(){var a=this;return a.filter((i?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":f}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},h.input=i,h.textarea=j,g={get:function(a){var b=c(a),d=b.data("placeholder-password");return d?d[0].value:b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,d){var g=c(a),h=g.data("placeholder-password");return h?h[0].value=d:g.data("placeholder-enabled")?(""==d?(a.value=d,a!=b.activeElement&&f.call(a)):g.hasClass("placeholder")?e.call(a,!0,d)||(a.value=d):a.value=d,g):a.value=d}},i||(l.input=g,m.value=g),j||(l.textarea=g,m.value=g),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(e);setTimeout(function(){a.each(f)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),bsp.pattern={email:"^([A-Za-z0-9_]{1,}([-_\\.&+'][A-Za-z0-9_]{1,}){0,}){1,}@(([-A-Za-z0-9]{1,}[-]{0,1})\\.){1,}[A-Za-z]{2,7}$",zip:"^\\d{5}(-\\d{4})?$",cvv:"^\\d{3,4}$",credit_card:"^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6011[0234789][0-9]{11}|65[0-9]{14}|64[4-9][0-9]{13}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11})$",password:"^[^\\s]{5,100}$",password_login:"^[^\\s]{1,100}$",first_name:"^[^\\s]{2,25}$",full_name:"^(.+?){2,25} (.+?){2,25}$",last_name:"^[^\\s]{2,25}$",numeric:"^[0-9]$"},bsp.regex={email:new RegExp(bsp.pattern.email),hash:/#.*?$/,credit_card:new RegExp(bsp.pattern.credit_card),password:new RegExp(bsp.pattern.password),password_login:new RegExp(bsp.pattern.password_login)},$(function(){$(".email_regex").each(function(){$(this).attr("pattern",bsp.pattern.email)}),$(".credit_card_regex").each(function(){$(this).attr("pattern",bsp.pattern.credit_card)}),$(".credit_card_international_regex").each(function(){$(this).attr("pattern",bsp.pattern.credit_card)}),$(".cvv_regex").each(function(){$(this).attr("pattern",bsp.pattern.cvv)}),$(".zip_regex").each(function(){$(this).attr("pattern",bsp.pattern.zip)}),$(".password_regex").each(function(){$(this).attr("pattern",bsp.pattern.password)}),$(".password_login_regex").each(function(){$(this).attr("pattern",bsp.pattern.password_login)}),$(".first_name_regex").each(function(){$(this).attr("pattern",bsp.pattern.first_name)}),$(".full_name_regex").each(function(){$(this).attr("pattern",bsp.pattern.full_name)}),$(".last_name_regex").each(function(){$(this).attr("pattern",bsp.pattern.last_name)}),$(".number").each(function(){$(this).attr("pattern",bsp.pattern.numeric)})}),bsp.lang=function(a,b){"use strict";var b=b||{};return"undefined"!=typeof lang[a]?b.html?lang[a]:$("<div>"+lang[a]+"</div>").text():"undefined"!=typeof b.en?b.en:""},$.fn.serializeObject=function(){var a={},b=this.serializeArray();return $.each(b,function(){void 0!==a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""}),a},bsp.is_int=function(a){return parseFloat(a)!=parseInt(a)||isNaN(a)?!1:!0},"object"!=typeof console){var console={};console.log=function(){}}bsp.html5={localStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}},function(a){a.load_js_translation=function(b){return jsvars.SITE_DOWN?!1:("object"!=typeof window.lang&&(window.lang={}),"object"!=typeof b&&(b=[b]),a(b).each(function(){var b=this.replace(".js",""),c=new Date,d=0;if(localStorage["js_translate_"+a("html").attr("lang")+"_"+b]){var e=a.parseJSON(localStorage["js_translate_"+a("html").attr("lang")+"_"+b]);if("prod"==jsvars.run_env&&e.cache_buster==jsvars.CACHE_BUSTER){for(i in e.data)lang[i]=e.data[i];d=1}}d||a.ajax({url:LANG_URL+"/js_translation/?path="+b+".html",async:!0,success:function(d){var e=a("<div>").append(d),f={};if(e.find("div").each(function(){lang[a(this).attr("id")]=a(this).html(),f[a(this).attr("id")]=a(this).html()}),bsp.html5.localStorage()){var g={data:f,date:c.getTime(),cache_buster:jsvars.CACHE_BUSTER},h=JSON.stringify(g,JSONreplacer);localStorage["js_translate_"+a("html").attr("lang")+"_"+b]=h}}})}))}}(jQuery),$.load_js_translation("common"),$("html").on("click","[data-href]",function(){document.location=$(this).data("href")}),Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},Object.defineProperty(Array.prototype,"unique",{value:function(){for(var a=[],b=this.length,c=0;b>c;c++){for(var d=c+1;b>d;d++)this[c]===this[d]&&(d=++c);a.push(this[c])}return a}}),Object.defineProperty(Array.prototype,"clean",{value:function(a){for(var b=0;b<this.length;b++)this[b]==a&&(this.splice(b,1),b--);return this}}),String.prototype.trim=function(a){return this.lTrim(a).rTrim(a)},String.prototype.lTrim=function(a){null==a?a=/\s/:"string"==typeof a.toString().toLowerCase()&&(a=new RegExp(a));for(var b=0;b<this.length-1&&a.test(this.charAt(b));)b++;return this.substring(b,this.length)},String.prototype.rTrim=function(a){null==a?a=/\s/:"string"==typeof a.toString().toLowerCase()&&(a=new RegExp(a));for(var b=this.length-1;b>=0&&a.test(this.charAt(b));)b--;return this.substring(0,b+1)},String.prototype.capitalize=function(){return this.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},function(a){a.url={},a.extend(a.url,{_params:{},_base_url:"",init:function(a){"undefined"==typeof a&&(a=document.location.href);var b="";try{this._params={},this._base_url=a.split("?")[0],b=(a.split("?",2)[1]||"").split("#")[0].split("&")||[];for(var c=0;c<b.length;c++){var d=b[c].split("=");d[0]&&(this._params[d[0]]=decodeURI(d[1]))}}catch(e){}},param:function(a,b){return"undefined"==typeof b&&(b=document.location.href),this.init(b),this._params[a]||""},paramAll:function(a){return"undefined"==typeof a&&(a=document.location.href),this.init(a),this._params},build:function(b){var b=b||{};if(!this._params)return!1;var c="",d=a.extend({},this._params,b.params),e=0;for(var f in d){if(c+=0==e?"?":"&",b.params[f])var g=b.params[f];else var g=this._params[f];c+=f+"="+g,e++}return this._base_url+c}})}(jQuery),bsp.knownCards={visa:{prefixes:[4],name:"Visa",key:"VI"},mastercard:{prefixes:[51,52,53,54,55],name:"MasterCard",key:"MC"},american_express:{prefixes:[34,37],name:"American Express",key:"AX"},discover:{prefixes:[60110,60112,60113,60114,601174,601177,601186,60119,644,65],name:"Discover",key:"DI"}},bsp.detectCardType=function(a){a=a.replace(/\D/g,"");var b=bsp.knownCards;for(var c in b)if(b.hasOwnProperty(c))for(var d=b[c],e=0,f=d.prefixes.length;f>e;++e)if(d.prefixes.hasOwnProperty(e)){var g=d.prefixes[e];if(new RegExp("^"+g.toString()).test(a))return d}return!1};var BigstockSearchModel=function(a){var b=this;b.data=a||{};var c=function(){},d={start:0,show:150,q:"",type:"image",contributor:"",exclude:"",photos:"",illustrations:"",vectors:"",category:"",software:"",subject:"",release:"",resell:"",el_license_only:"",orientation:"",people_number:"",safesearch:"y",hd:"",sd:"",web:"",level:"",duration:"",nocheck:0,order:""},e=$.extend({},d);d=$.extend(d,b.data.input||{}),d.next_start=b.data.next_start,d.previous_start=b.data.previous_start,d.type=b.data.type||d.type,c.prototype.getBaseUrl=function(){var a=jsvars.LANG_URL;return a+="image"==d.type?"/search/":"/"+d.type+"/search/"},c.prototype.getDefaults=function(){return e},c.prototype.getUrl=function(){var a="",a=this.getBaseUrl(),b=d.q||"";b=b.replace(/\s+/g,"-"),b&&(a+=b+"/");var c=[];for(var f in d)"q"!=f&&"type"!=f&&"next_start"!=f&&"previous_start"!=f&&d[f]&&d[f]!=e[f]&&c.push(f+"="+d[f]);return c.length&&(a+="?"+c.join("&")),a=a.replace(/\s/g,"+")},c.prototype.parseQuery=function(a){var b=a||"",c="",d="",e=b.trim().match(/((c|contributor):(.*))/i);e&&e[3]&&(c=e[3].toLowerCase(),b=b.replace(e[1],"").trim()),b=b.replace(/%/g,"");var f=b.match(/(^|\s+)-\w*/gi);b=b.replace(/(^|\s+)-\w*/gi,"").replace(/\s+/g," "),null!=f&&(f.forEach(function(a,b){f[b]=a.replace(/-\b/,"").trim()}),d=f.join(" "));var g={q:b,contributor:c,exclude:d};return g},c.prototype.set=function(a,b){return void 0!==typeof a&&void 0!==typeof d[a]?(d[a]=b,!0):!1},c.prototype.get=function(a){return a?d[a]:d},c.prototype.exportModelData=function(){return b.data},c.prototype.getResults=function(){return b.data.results};var f=new c;return f},BigstockSearchControler=function(a){var b=this;b.options=a||{},b.typeTotalsCache={};var c=$(this),d={};return b.search=new BigstockSearchModel(a),b.init=function(){var a=b.search.exportModelData();History.pushState(a,a.tracking.page_title,b.search.getUrl()),b.trackSearchSdp(b.search.exportModelData()),d.draw()},b.is_paginate=!1,b.getSearchData=function(a){var b=$.get(a);return b.promise()},b.getFromHistoryStore=function(a){for(i in History.savedStates)if(History.savedStates[i].url==a)return History.savedStates[i].data;return!1},d.getUrl=function(){return b.search.getUrl()},d.set=function(a,d,e){var f={},e=e||{};if("string"==typeof a)f[a]=d;else{if("object"!=typeof a)return!1;f=a,e=d||{}}var g=!1;for(var h in f)f[h]&&"string"==typeof f[h]&&(f[h]=f[h].trim()),b.search.get(h)!=f[h]&&(b.search.set(h,f[h]),e.silent||(g=!0,c.trigger(h+"_change",[h,f[h]])));return(g||e.force)&&c.trigger("change"),!0},d.get=function(a){return b.search.get(a)},d.parseQuery=function(a){return b.search.parseQuery(a)},d.getDisplayQuery=function(){var a=this.get("q"),b=this.get("exclude")||"";b=b.split(" ");var c="";return b=_.map(b,function(a){return a?" -"+a:""}),b=b.join(""),this.get("contributor")&&(c=" contributor:"+this.get("contributor")),a+b+c},d.clear=function(a){var c=b.search.getDefaults();c.type=b.search.get("type"),c.q=b.search.get("q"),c.order=b.search.get("order"),d.set(c,a)},b.trackSearchSdp=function(a){var c={event:b.is_paginate?"search-paginate":"search",term:b.search.get("q"),sort:b.search.get("order")||"popular",per_page:b.search.get("show"),page:$(".search_pagination_bottom input").val(),ids:a.ids,type:b.search.get("type"),execution_time:a.tracking.execution_time,search_language:a.tracking.search_language,search_rows:a.tracking.search_rows,search_start:a.tracking.search_start,search_url:a.tracking.search_url,total_results:a.total,search_tracking:a.tracking.tracking_id};$(document).trigger("track_sdp_event",c),b.is_paginate=!1},d.go=_.throttle(function(){if($(window.document).trigger("main_search_submit"),bsp.track("event",{category:"search_submit",action:b.search.getUrl()}),b.options.results){var a=b.search.getUrl();b.getSearchData(a).done(function(c){c.redirect?document.location=c.redirect:($(document).trigger("search_navigation"),History.pushState(c,c.tracking.page_title,a),b.trackSearchSdp(c),b.is_paginate=!1)}).always(function(){$(".mosaic_wrapper").removeClass("loading_data")}).fail(function(){document.location=b.search.getUrl()})}else document.location=b.search.getUrl()},5,{leading:!1}),d.goNext=function(){b.is_paginate=!0,$(".mosaic_wrapper").addClass("loading_data"),this.set({show:150,start:b.search.get("next_start")},{silent:!0});var a=JSON.parse(localStorage.getItem("next_search_page")),c=b.getFromHistoryStore(location.origin+this.getUrl());return c?(History.pushState(c,c.tracking.page_title,this.getUrl()),b.trackSearchSdp(c)):a&&a.url==b.search.getUrl()?(History.pushState(a.data,a.data.tracking.page_title,a.url),b.trackSearchSdp(a.data)):this.go(),$(document).trigger("search_navigation"),!0},d.goPrevious=function(){b.is_paginate=!0,$(".mosaic_wrapper").addClass("loading_data"),this.set({show:150,start:b.search.get("previous_start")},{silent:!0});var a=b.getFromHistoryStore(location.origin+this.getUrl());return a?(History.pushState(a,a.tracking.page_title,this.getUrl()),b.trackSearchSdp(a)):this.go(),$(document).trigger("search_navigation"),!0},d.getNext=function(){var a=b.search.exportModelData(),c=new BigstockSearchModel(a);c.set("show",150),c.set("start",c.get("next_start"));var d=b.getFromHistoryStore(location.origin+c.getUrl()),e=JSON.parse(localStorage.getItem("next_search_page"));if(!d&&e&&e.url!==c.getUrl()){var f=b.getSearchData(c.getUrl());f.done(function(a){localStorage.setItem("next_search_page",JSON.stringify({url:c.getUrl(),data:a}))})}else var f=$.Deferred().reject();return f.promise()},d.change=function(a,b){if(a){var a=a.split(" ");a.forEach(function(a){c.bind(a+"_change",b)})}else c.bind("change",b)},d.setOptions=function(a){b.options=a,b.search=new BigstockSearchModel(b.options),d.draw()},d.draw=function(){$(function(){$(document).trigger("draw_search",b.options)})},d.getResultsCount=function(){return b.options.total},d.getTabsInfo=function(){var a=b.search.exportModelData(),c=a.type_tabs,e=[];for(var f in c)e.push(d.getTypeTotal(c[f].type));var g=$.when.apply(void 0,e).then(function(){for(var a={},b=0;b<arguments.length;b++)"undefined"==typeof arguments[b].total&&(arguments[b].total=0),a[arguments[b].type]=arguments[b],a[arguments[b].type].formated_total=(arguments[b].total+"").toString().replace(/\B(?=(\d{3})+(?!\d))/g,jsvars.THOUSANDS_SEP);return $.Deferred().resolve(a)});return g},d.getTypeTotal=function(a){var c=b.search.exportModelData(),d=c.type_tabs,e=$.Deferred(),f=new BigstockSearchModel(c);f.set("start",0),f.set("type",a);var g=f.getUrl();if(b.typeTotalsCache[g])return b.typeTotalsCache[g];if(d&&d[a]&&d[a].total)return b.typeTotalsCache[g]=e.promise(),e.resolve(d[a]),b.typeTotalsCache[g];var h=$.get(g,{get_count:!0});return b.typeTotalsCache[g]=e.promise(),h.done(function(b){d[a].total=b.total,e.resolve(d[a])}),b.typeTotalsCache[g]},d.getMediaResults=function(){return b.search.getResults()},d.getMediaResultById=function(a){return _.find(d.getMediaResults(),function(b){return b.id===a})},History.Adapter.bind(window,"statechange",function(){var a=History.getState();d.setOptions(a.data)}),b.options.results&&b.init(),d},bigstockSearch=new BigstockSearchControler(jsvars.search?jsvars.search:{});$(function(){$(".search_phrase, #a_search").val(bigstockSearch.getDisplayQuery())}),("video"==bigstockSearch.get("type")||jsvars.media&&"video"==jsvars.media.media_type||bsp.user.subscriptions.hasActiveSubscriptions("video")&&!bsp.user.subscriptions.hasActiveSubscriptions("image")&&"video"===bigstockSearch.get("type"))&&bigstockSearch.set("type","video"),$(function(){$("#formsearch, #sidebar_advsearch_solr form, form.single_search").on("submit",function(a){a.preventDefault(),$(document).trigger("track_sdp_event",{event:"autocomplete",typed_terms:window.BSPAutoSuggest.tracking_typed_terms,dropdown_positions:window.BSPAutoSuggest.tracking_dropdown_positions,completed_terms:window.BSPAutoSuggest.tracking_completed_terms,autocomplete_test:window.BSPAutoSuggest.suggester.client,type:$("#search_keyword_wrapper .dropdown .selected").data("type")}),window.BSPAutoSuggest.clearTracking();var b=$(this).find(".search_phrase, #a_search").val(),c=bigstockSearch.parseQuery(b);"formsearch"==$(this).attr("id")&&(bigstockSearch.clear(),$(window.document).trigger("clear_search_suggestions")),$(this).parents("#sidebar_advsearch_solr").length&&(c.exclude=$("#sidebar_advsearch_solr #a_exclude").val()),c.start=0,c.nocheck=0,bigstockSearch.set(c),bigstockSearch.go()})}),bigstockSearch.change(null,function(){jsvars.search&&($(".mosaic_wrapper").addClass("loading_data"),bigstockSearch.go())}),bigstockSearch.change("q contributor exclude",function(){var a=bigstockSearch.getDisplayQuery();$(".search_phrase, #a_search").each(function(){$(this).val()!==a&&$(this).val(a)})}),$("html").on("change keyup",".search_phrase, #a_search",_.debounce(function(){var a=$(this).val(),b=bigstockSearch.parseQuery(a);b.start=0,bigstockSearch.set(b)},1e3)),bigstockSearch.change("type",function(a,b,c){$(".compact_search .dropdown .selected").attr("data-type",c),$(".compact_search .dropdown .selected").data("type",c);var d=$(".compact_search:first .dropdown ul li[data-type="+c+"]").text();$(".compact_search .dropdown .selected .text").text(d);var b=$(".compact_search .dropdown .selected").data("type");$(".compact_search .search_phrase").attr("placeholder",bsp.lang("findperfect"+b))}),$(function(){$(".compact_search .dropdown .selected").attr("data-type",bigstockSearch.get("type"));var a=$(".compact_search:first .dropdown ul li[data-type="+bigstockSearch.get("type")+"]").text();$(".compact_search .dropdown .selected .text").text(a);var b=$(".compact_search .dropdown .selected").data("type");$(".compact_search .search_phrase").attr("placeholder",bsp.lang("findperfect"+b))}),$("html").on("click",".compact_search .dropdown",function(){var a=$(this).find(".selected"),b=a.data("type");$(this).find("ul li").show(),$(this).find("li[data-type="+b+"]").hide(),$(this).find("ul").toggle()}),$("html").on("click",".compact_search .dropdown ul li",function(){var a=$(this).parents(".dropdown").find(".selected"),b=$(this).data("type");a.find(".text").text($(this).text()),a.data("type",b),a.attr("data-type",b),a.parents("form").find(".search_phrase").attr("placeholder",bsp.lang("findperfect"+b)),bigstockSearch.clear({silent:!0}),bigstockSearch.set("type",b)}),$("html").on("click",function(a){0!=$(a.target).parents(".compact_search .dropdown").length||$(a.target).hasClass("dropdown")||$(".compact_search .dropdown ul").hide()});var Bigstock=function(a,b,c){var d={};a.event_namespace&&0!==a.event_namespace.indexOf(".")&&(a.event_namespace="."+a.event_namespace);var e={event_namespace:""};return gloabl_options=b.extend({},e,a||{}),d.signup=function(a){return c.user.id?b.Deferred().reject({error:"user is logged in"}):b.ajax({url:"https://"+location.host+a.action,type:"POST",data:a.data,xhrFields:{withCredentials:!0},success:function(a){a&&1==a.status?b("html").trigger("signup_complete",a):b("html").trigger("signup_failed",a),b("html").trigger("signup.bigstock"+gloabl_options.event_namespace,a)},dataType:"json"})},d.emailOnlySignup=function(a){var a=a||{};a.action="signup",a.is_guest_signup=1;var b={action:LANG_URL+"/signup/modal",data:a};return this.signup(b)},d.login=function(a){var d={action:"login",login:a.login,password:a.password};return b.ajax({url:"https://"+location.host+c.LANG_URL+"/serverside/login.php",type:"POST",data:d,xhrFields:{withCredentials:!0},success:function(a){b("html").trigger("login.bigstock"+gloabl_options.event_namespace,a)
},dataType:"json"})},d.logout=function(){return b.get(LANG_URL+"/logout/")},d},bigstock=new Bigstock({},$,jsvars),_cio=_cio||[];!function(){var a,b,c;for(a=function(a){return function(){_cio.push([a].concat(Array.prototype.slice.call(arguments,0)))}},b=["load","identify","sidentify","track","page"],c=0;c<b.length;c++)_cio[b[c]]=a(b[c])}(),log(_cio),$(window).load(function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0],c="aec3c24e16e9bcccd6d9";("qa"==jsvars.run.env||"dev"==jsvars.run.env)&&(c="93f4246b25047a04e5e1"),a.async=!0,a.id="cio-tracker",a.setAttribute("data-site-id",c),a.src="https://assets.customer.io/assets/track.js",b.parentNode.insertBefore(a,b)});var CustomerIO=function(a,b,c){"use strict";var d={},e={};return d.init=function(a){var b={id:a.user.id,email:a.user.email,created_at:moment(a.user.sign_date||"jan 1, 2012").unix(),timezone:moment().format("Z"),COUNTRY_CODE_3:a.COUNTRY_CODE_3,CURRENCY_CODE:a.CURRENCY_CODE,language:a.USER_LANGUAGE,credits:a.user.credits,last_id_char:a.user.id.slice(-1).toLowerCase()};if(a.user.name&&(b.name=a.user.name),a.user.optin===!1&&(b.unsubscribed=!0),bsp.user.hasSubscription()){var d=bsp.user.subscriptions.getActiveSubscriptions()[0],e=bsp.user.subscriptions.getActiveSubscriptions("image")[0],f=bsp.user.subscriptions.getActiveSubscriptions("video")[0];e&&(e.end_date&&(b.image_subscription_expires=moment(e.end_date).unix()),b.image_subscription_type=e.is_canceled?"canceled":e.is_trial?"free":"paid"),f&&(f.end_date&&(b.video_subscription_expires=moment(f.end_date).unix()),b.video_subscription_type=f.is_canceled?"canceled":f.is_trial?"free":"paid"),d.end_date&&(b.subscription_expires=moment(d.end_date).unix()),bsp.user.subscriptions.hasActiveSubscriptions("image")&&!bsp.user.subscriptions.hasActiveSubscriptions("video")&&(b.subscription_media="photo"),!bsp.user.subscriptions.hasActiveSubscriptions("image")&&bsp.user.subscriptions.hasActiveSubscriptions("video")&&(b.subscription_media="video"),bsp.user.subscriptions.hasActiveSubscriptions("image")&&bsp.user.subscriptions.hasActiveSubscriptions("video")&&(b.subscription_media="photo_video"),b.subscription_type=d.is_canceled?"canceled":d.is_trial?"free":"paid"}else b.subscription_type="none";b.cart_total=Object.size(a.cart_latest),b.cart_images=[],c.each(a.cart_latest,function(a){b.cart_images.push(a.thumb_url)}),b.cart_images=JSON.stringify(b.cart_images),this.identify(b)},d.identify=function(d){var d=d||{},e=this.attr(),d=c.extend(e,d);return d.id&&d.email&&d.created_at?(this.attr(d),"prod"==a||jsvars.customerio_allow?_cio.identify(this.getAttrs()):(b(JSON.stringify(this.getAttrs())),b(this.getAttrs())),!0):!1},d.track=function(c,d){return c?void("prod"==a||jsvars.customerio_allow?_cio.track(c,d):b(c,d)):(b("_cio.track must have name"),!1)},d.attr=function(a,b){if("undefined"==typeof a)return e;if("object"!=typeof a){var d=a;if(!b)return e[d];a={},a[d]=b}return c.each(a,function(a,b){e[b]=a}),e},d.getAttrs=function(){return e},d},customerio=new CustomerIO(jsvars.run.env,log,_);jsvars.user.id&&customerio.init(jsvars),$("html").on("cart_added",function(){customerio.track("cart_added")}),"undefined"!=typeof window.addEventListener?window.addEventListener("message",postMessage_callback,!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onmessage",postMessage_callback),$(document).ready(function(){""!=$.url.param("js_routes")?(js_routes.page_has_reloaded=1,js_routes.init($.url.param("js_routes"))):"undefined"!=typeof jsvars.js_routes&&(js_routes.page_has_reloaded=1,js_routes.init(jsvars.js_routes))}),$("html").on("click","[data-js_routes]",function(){return js_routes.init($(this).attr("data-js_routes")),!1});var js_routes={init:function(a){bsp.hash={},bsp.hash.full=a;var b=bsp.hash.full.indexOf("?");if(-1!=b?(bsp.hash.query=bsp.hash.full.slice(b),bsp.hash.query=bsp.hash.query.replace("?",""),bsp.hash.route=bsp.hash.full.slice(0,b)):(bsp.hash.query="",bsp.hash.route=bsp.hash.full),bsp.hash.routes=[],tmp_routes=bsp.hash.route.split("/"),$.each(tmp_routes,function(a,b){""!=b&&bsp.hash.routes.push(b)}),""!=bsp.hash.query){bsp.hash.params={};var c=bsp.hash.query.split("&");$.each(c,function(a,b){var c=b.split("=");c[0]&&c[1]&&(bsp.hash.params[c[0]]=c[1].replace(/::/g,"="))})}else bsp.hash.params=[];js_routes.run()},run:function(){var a=0;$(bsp.hash.routes).each(function(b,c){switch(c){case"save_image":bsp.user.save_button.star(bsp.hash.routes[1],{image_offset:bsp.hash.routes[2]}),$(function(){$(".save_button").filter(function(){return $(this).data("photo-id")==bsp.hash.routes[1]}).addClass("saved")}),a=0;break;case"shake_modal":$(".dialog").animate({left:"+=20px"},70).animate({left:"-=20px"},70).animate({left:"+=20px"},70).animate({left:"-=20px"},70),$(".modal").animate({marginLeft:"+=20px"},70).animate({marginLeft:"-=20px"},70).animate({marginLeft:"+=20px"},70).animate({marginLeft:"-=20px"},70),a=0;break;case"continue_to":bsp.hash.routes.shift();var d=bsp.hash.routes.join("/");document.location="https://"+document.location.host+LANG_URL+"/"+d+"/",a=0;break;case"trigger_cart_click":var e=1;case"trigger_click":$(function(){e&&"credits"!=jsvars.photo_payment_method?$(".js_route_trigger_click").click():bsp.hash.routes[1]?$("."+bsp.hash.routes[1]).click():$(".js_route_trigger_click").click()}),a=0;break;case"trigger_form_submit":$(".js_route_form_submit").submit(),a=0;break;case"goto_checkout_from_credits":setTimeout(function(){document.location="/checkout/credits/"+bsp.hash.routes[1]},500),a=0;break;case"unset-input":$(".js_route_unset").val(""),a=1;break;case"closeModalWindows":bsp.signup_modal2&&bsp.signup_modal2.modal("hide"),bsp.login_modal2&&bsp.login_modal2.modal("hide"),bsp.show_password_obj&&hideDialog(bsp.show_password_obj),$.each(bsp.modals,function(a,b){b.modal("hide")}),a=0;break;case"simple_login":case"login":bsp.signup_modal2&&bsp.signup_modal2.modal("hide"),bsp.hash.routes.shift(),login({action:bsp.hash.routes.join("/"),template:c}),a=0;break;case"signup":bsp.login_modal2&&bsp.login_modal2.modal("hide"),bsp.hash.routes.shift(),signup({action:bsp.hash.routes.join("/")}),a=0;break;case"signup_complete":if(bsp.hash.routes.shift(),"goto_checkout_from_credits"==bsp.hash.routes[0]){a=1;break}"-1"==Cookies.get("modal_prompt_actions")&&bsp.track("event",{category:"modal_prompt",action:"has_signed_up"}),signup_complete({type:bsp.hash.routes[0]}),a=0;break;case"showAlert":$("html").trigger("alert.bsp",{type:"alert",message:bsp.hash.routes[1]}),a=0;break;case"iframe_resize":$("#"+bsp.hash.routes[1]).height(bsp.hash.routes[2]),a=0}return 0==a?!1:void 0})},clean_url:function(a){return decodeURIComponent(a.replace(/js_routes=.*?(&|$)/g,"").replace(/\?$/,""))},get:function(a){if(!a)return!1;var b=a.match(/js_routes=.*?(?=&|$)/);return null!=b?b[0]=b[0].split("="):(b=[],b[0]=["",""]),"undefined"==typeof b[0][1]&&(b[0][1]=""),b[0][1]},for_next_page:function(a,b){var b=b||{};return bsp.util.set_var("js_routes",a,b)}};if(self==top){var shutterstock=shutterstock||{};shutterstock.jobs={apply:function(){bsp.track("event",{category:"shutterstock jobs",action:"console run"}),window.location.href="https://www.shutterstock.com/jobs.mhtml"}},console.log("%cIf you are here then you should consider working at Shutterstock. just execute: %cshutterstock.jobs.apply();","color:#333; font-size:17px; font-weight:bold; border:1px solid red; border-width:1px 0px; padding:5px 0px; line-height:50px;","color:red; font-size:17px; font-weight:bold; border:1px solid red; border-width:1px 0px; padding:5px 0px; line-height:50px;")}if(bsp.user.hasSubscription()&&(Cookies.set("has_sub",1,{expires:30,secure:!0,sameSite:"None"}),Cookies.set("had_sub",1,{expires:10950,secure:!0,sameSite:"None"})),bsp.user.hasSubscription("image")&&(Cookies.set("has_image_sub",1,{expires:30,secure:!0,sameSite:"None"}),Cookies.set("had_image_sub",1,{expires:10950,secure:!0,sameSite:"None"})),bsp.user.hasSubscription("video")&&(Cookies.set("has_video_sub",1,{expires:30,secure:!0,sameSite:"None"}),Cookies.set("had_video_sub",1,{expires:10950,secure:!0,sameSite:"None"})),bsp.user.credits.get()>0&&(Cookies.set("has_credits",1,{expires:30,secure:!0,sameSite:"None"}),Cookies.set("had_credits",1,{expires:10950,secure:!0,sameSite:"None"})),function(a){function b(b,d){b.data("AutoResizer")&&b.data("AutoResizer").destroy(),d=this.config=a.extend({},c.defaults,d),this.el=b,this.nodeName=b[0].nodeName.toLowerCase(),this.originalHeight=b.height(),this.previousScrollTop=null,this.value=b.val(),"original"===d.maxWidth&&(d.maxWidth=b.width()),"original"===d.minWidth&&(d.minWidth=b.width()),"original"===d.maxHeight&&(d.maxHeight=b.height()),"original"===d.minHeight&&(d.minHeight=b.height()),"textarea"===this.nodeName&&b.css({resize:"none",overflowY:"hidden"}),b.data("AutoResizer",this),d.animate.complete=function(a){return function(){return d.onAfterResize.call(b),a.apply(this,arguments)}}(d.animate.complete),this.bind()}function c(d){return this.filter(c.resizableFilterSelector).each(function(){new b(a(this),d)}),this}{var d="ar"+ +new Date;c.defaults={onResize:function(){},onBeforeResize:function(){return 123},onAfterResize:function(){return 555},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500}}c.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","paddingTop","paddingLeft","paddingBottom","paddingRight","width"],c.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden"},c.resizableFilterSelector=["textarea:not(textarea."+d+")","input:not(input[type])","input[type=text]","input[type=password]","input[type=email]","input[type=url]"].join(","),c.AutoResizer=b,a.fn.autoResize=c,b.prototype={bind:function(){var b=a.proxy(function(){return this.check(),!0},this);this.unbind(),this.el.bind("keyup.autoResize",b).bind("change.autoResize",b).bind("paste.autoResize",function(){setTimeout(function(){b()},0)}),this.el.is(":hidden")||this.check(null,!0)},unbind:function(){this.el.unbind(".autoResize")},createClone:function(){var b=this.el,e="textarea"===this.nodeName?b.clone():a("<span/>");this.clone=e,a.each(c.cloneCSSProperties,function(a,c){e[0].style[c]=b.css(c)}),e.removeAttr("name").removeAttr("id").addClass(d).attr("tabIndex",-1).css(c.cloneCSSValues),"textarea"===this.nodeName?e.height("auto"):e.width("auto").css({whiteSpace:"nowrap"})},check:function(a,b){this.clone||(this.createClone(),this.injectClone());var c=this.config,d=this.clone,e=this.el,f=e.val();if(f===this.prevValue)return!0;if(this.prevValue=f,"input"===this.nodeName){d.text(f);var g=d.width(),h=g+c.extraSpace>=c.minWidth?g+c.extraSpace:c.minWidth,i=e.width();return h=Math.min(h,c.maxWidth),void((i>h&&h>=c.minWidth||h>=c.minWidth&&h<=c.maxWidth)&&(c.onBeforeResize.call(e),c.onResize.call(e),e.scrollLeft(0),c.animate&&!b?e.stop(1,1).animate({width:h},c.animate):(e.width(h),c.onAfterResize.call(e))))}d.width(e.width()).height(0).val(f).scrollTop(1e4);var j=d[0].scrollTop;this.previousScrollTop!==j&&(this.previousScrollTop=j,j+c.extraSpace>=c.maxHeight?(e.css("overflowY",""),j=c.maxHeight,b=!0):j<=c.minHeight?j=c.minHeight:(e.css("overflowY","hidden"),j+=c.extraSpace),c.onBeforeResize.call(e),c.onResize.call(e),c.animate&&!b?e.stop(1,1).animate({height:j},c.animate):(e.height(j),c.onAfterResize.call(e)))},destroy:function(){this.unbind(),this.el.removeData("AutoResizer"),this.clone.remove(),delete this.el,delete this.clone},injectClone:function(){(c.cloneContainer||(c.cloneContainer=a("<arclones/>").appendTo("body"))).append(this.clone)}}}(jQuery),bsp.track_subscription_purchase=function(a){a.promo_code=a.promo_code||"",a.tokens_type=1==a.allotment_duration_in_days?"day":7==a.allotment_duration_in_days?"week":30==a.allotment_duration_in_days?"month":"allotment_duration_in_days_"+a.allotment_duration_in_days;var b=Math.round(100*parseFloat(a.order.amount))/100;a.order.pixel_track&&a.order.pixel_track.forEach(function(a){PixelTrack(a,"script")}),$("html").trigger("subscription_purchase_success",{cost:b,data:a});var c="Subscription Signup",d="Subscription";if(-1!==a.redeemable_for.indexOf("image")&&-1!==a.redeemable_for.indexOf("video")?(c="Image-Video Subscription Signup",d="Image-Video Subscription"):-1!==a.redeemable_for.indexOf("image")?(c="Subscription Signup",d="Subscription"):-1!==a.redeemable_for.indexOf("video")&&(c="Video Subscription Signup",d="Video Subscription"),bsp.track("event",{category:c,action:a.order.sku,label:a.id,value:b,noninteraction:!0}),BounceXReady.done(function(){bouncex.report_conversion({order_id:a.order.transid,amount:b,email:jsvars.user.email})}),PixelTrack("https://www.facebook.com/tr?ev=6013499625962&amp;cd[value]="+b+"&amp;cd[currency]=USD&amp;noscript=1"),a.redeemable_for.indexOf("image")>-1&&customerio.track("image_subscription_signup"),a.redeemable_for.indexOf("video")>-1&&customerio.track("video_subscription_signup"),b>0)customerio.track("subscription_signup"),customerio.track(a.id),customerio.track(a.tokens_type),customerio.identify({subscription_type:"paid"}),__insp.push(["tagSession","subscription_signup"]),__insp.push(["tagSession",a.id]),__insp.push(["tagSession",a.tokens_type]),a.redeemable_for.indexOf("image")>-1&&optimizely.push(["trackEvent","image_subscription_purchase"]),a.redeemable_for.indexOf("video")>-1&&optimizely.push(["trackEvent","video_subscription_purchase"]),optimizely.push(["trackEvent","subscription_purchase",100*b]),optimizely.push(["trackEvent","subscription_purchase_anon",{anonymous:!0}]),bsp.track("pageview",{page:"/subscription-success/"+a.id}),bsp.track("transaction",{id:a.order.transid,vendor:a.order.vendor_code,cost:b,country:jsvars.COUNTRY_CODE_3}),bsp.track("item",{id:a.order.transid,name:d,sku:a.order.sku,category:a.id,cost:b,quantity:1}),bsp.track("finish_transaction"),PixelTrack("//bigstockmail.com/pub/cct?_ri_=X0Gzc2X%3DUQpglLjHJlYQf11QQQQQvQvQEtA&_ei_=&action=once&OrderTotal="+b+"&OrderId="+a.order.transid+"&CustomerId="+jsvars.user.id+"&Type=Subscription"),PixelTrack("//flex.atdmt.com/mstag/tag/8c7afb7e-83f9-48be-9981-9d9d5f7c0c66/analytics.html?dedup=1&domainId=815648&type=1&revenue="+b+"&actionid=21662"),PixelTrack("https://www.googleadservices.com/pagead/conversion/1070250879/?value="+b+"&amp;label=eqcsCOGwowUQ__aq_gM&amp;guid=ON&amp;script=0"),PixelTrack("//insight.adsrvr.org/track/conv/?adv=wkmjwfks&ct=0:edrgr59u&fmt=3"),PixelTrack(a.order.first_purchase?"https://bigstock.7eer.net/ifconv/?irchannel=4062&cid=1736&oid="+a.order.transid+"&cat1=Subscription "+a.id+"&sku1=&qty1=1&amt1="+b+"&promocode="+a.promo_code:"https://bigstock.7eer.net/ifconv/?irchannel=4063&cid=1736&oid="+a.order.transid+"&cat1=Subscription "+a.id+"&sku1=&qty1=1&amt1="+b+"&promocode="+a.promo_code);else{if(customerio.track("free_subscription_signup"),customerio.track(a.id),customerio.track(a.tokens_type),customerio.identify({subscription_type:"free"}),PixelTrack("https://www.facebook.com/tr?ev=6021549050426&amp;cd[value]="+b+"&amp;cd[currency]=USD&amp;noscript=1"),PixelTrack("https://analytics.twitter.com/i/adsct?txn_id=l5hcl&p_id=Twitter"),PixelTrack("//t.co/i/adsct?txn_id=l5hcl&p_id=Twitter"),__insp.push(["tagSession","free_subscription_signup"]),__insp.push(["tagSession",a.id]),__insp.push(["tagSession",a.tokens_type]),Cookies.get("tmp_free_trial_landing"))return PixelTrack("https://bigstock.7eer.net/ifconv/?irchannel=7890&cid=1736&oid="+jsvars.user.id+"&note="+a.id),Cookies.remove("tmp_free_trial_landing");"1amonth1month"==a.id?optimizely.push(["trackEvent","image_free_1amonth_subscription_add"]):(a.redeemable_for.indexOf("image")>-1&&optimizely.push(["trackEvent","image_free_subscription_add"]),a.redeemable_for.indexOf("video")>-1&&optimizely.push(["trackEvent","video_free_subscription_add"]),optimizely.push(["trackEvent","free_subscription_add"])),"MANUAL"!=a.order.vendor_code&&bsp.cc_added_to_trial(a)}},bsp.cc_added_to_trial=function(a){var a=a||{};optimizely.push("1amonth1month"==a.id?["trackEvent","image_free_1amonth_payment_subscription_add"]:["trackEvent","free_subscription_payment_add"]),bsp.track("pageview",{page:"/free_subscription_payment_add/"}),PixelTrack("https://www.googleadservices.com/pagead/conversion/1070250879/?value=0&amp;label=W_EpCNnimwUQ__aq_gM&amp;guid=ON&amp;script=0"),PixelTrack("//insight.adsrvr.org/track/conv/?adv=wkmjwfks&ct=0:1ppwmhem&fmt=3"),bsp.track("pageview",{page:"/subscription-success/"+a.id+" - free"});var b=0;PixelTrack("https://bigstock.7eer.net/ifconv/?irchannel=5332&cid=1736&oid="+a.order.transid+"&str1=Subscription "+a.id+"&custid="+jsvars.user.id+"&sku1=&qty1=1&amt1="+b)},$(function(){jsvars.subscription_purchase?bsp.track_subscription_purchase(jsvars.subscription_purchase):jsvars.cc_added_to_trial&&bsp.cc_added_to_trial(jsvars.cc_auth_call)}),$("html").on("click","[data-photo_payment_method]",function(){bsp.track("event",{category:"photo_payment_method",action:$(this).attr("data-photo_payment_method")}),bsp.user.photo_payment_method.set($(this).attr("data-photo_payment_method"))}),jsvars.credit_cart_tracking){var tmp_credit_cost=jsvars.credit_cart_tracking.credit_cost;if(ABtest_exclude_extended_license){tmp_credit_cost=0;for(var i in jsvars.credit_cart_tracking.purchased)"extended license"!=jsvars.credit_cart_tracking.purchased[i].size_name&&(tmp_credit_cost+=1*jsvars.credit_cart_tracking.purchased[i].credit_cost)}optimizely.push(["trackEvent","credits_bulk_download",100*tmp_credit_cost]),$("html").trigger("credits_bulk_download",{cost:tmp_credit_cost});var has_extended_license=!1;for(var i in jsvars.credit_cart_tracking.purchased)"extended license"!=jsvars.credit_cart_tracking.purchased[i].size_name?window.optimizely_legacy_events?optimizely.push(["trackEvent","downloaded_image",{anonymous:!0}]):$("html").trigger("downloaded_image",{type:"credits"}):has_extended_license=!0;ABtest_exclude_extended_license&&!has_extended_license?window.optimizely_legacy_events?window.optimizely.push(["trackEvent","download_success_credits",{anonymous:!0}]):$("html").trigger("download_success_credits"):ABtest_exclude_extended_license||(window.optimizely_legacy_events?window.optimizely.push(["trackEvent","download_success_credits",{anonymous:!0}]):$("html").trigger("download_success_credits"))}bsp.trackCreditsPurchase=function(a){customerio.track("credit_purchase",{credits:a.purchase_credits}),__insp.push(["tagSession","credit_purchase"]),bsp.track("pageview",{page:"/payment-success/"+a.vendor}),a.purchase_amount=Math.round(100*usaNumberNotation(a.purchase_amount))/100,bsp.track("transaction",{id:a.purchase_transid,vendor:a.vendor,cost:a.purchase_amount,country:jsvars.COUNTRY_CODE_3}),bsp.track("item",{id:a.purchase_transid,sku:a.purchase_credits,name:"Credits",cost:a.purchase_amount,quantity:1}),bsp.track("finish_transaction");var b="Credits "+(a.purchase_credits>500?"500+":a.purchase_credits);PixelTrack(1==a.first_purchase?"https://bigstock.7eer.net/ifconv/?irchannel=4062&cid=1736&oid="+a.purchase_transid+"&cat1="+b+"&sku1=&qty1=1&amt1="+a.purchase_amount+"&promocode="+a.promo_code:"https://bigstock.7eer.net/ifconv/?irchannel=4063&cid=1736&oid="+a.purchase_transid+"&cat1="+b+"&sku1=&qty1=1&amt1="+a.purchase_amount+"&promocode="+a.promo_code),PixelTrack("//bigstockmail.com/pub/cct?_ri_=X0Gzc2X%3DUQpglLjHJlYQf11QQQQQvQvQEtA&_ei_=&action=once&OrderTotal="+a.purchase_amount+"&OrderId="+a.purchase_transid+"&CustomerId="+jsvars.user.id+"&Type=Credits"),optimizely.push(["trackEvent","credit_pack_purchase",100*a.purchase_amount]),optimizely.push(["trackEvent","credit_pack_purchase_anon",{anonymous:!0}]),PixelTrack("//flex.atdmt.com/mstag/tag/8c7afb7e-83f9-48be-9981-9d9d5f7c0c66/analytics.html?dedup=1&domainId=815648&type=1&revenue="+a.purchase_amount+"&actionid=21662"),PixelTrack("//www.googleadservices.com/pagead/conversion/1070250879/?value="+a.purchase_amount+"&label=qqpqCNmxowUQ__aq_gM&guid=ON&script=0"),PixelTrack("//insight.adsrvr.org/track/conv/?adv=wkmjwfks&ct=0:cndmrdrn&fmt=3"),PixelTrack("//802-ct.c3tag.com/c3metrics-802.js?c3_type=8&account_id="+jsvars.user.id+"&c3_transaction="+a.purchase_transid+"&order_amount="+a.purchase_amount,"script")},$(function(){jsvars.credits_purchase&&bsp.trackCreditsPurchase(jsvars.credits_purchase)}),bsp.trackCurrencyPurchase=function(){"undefined"==typeof jsvars.purchase_info&&(jsvars.purchase_info=1111111);{var a=(jsvars.purchase_info.tracking_name,Math.round(100*usaNumberNotation(jsvars.purchase_info.amount))/100),b=(jsvars.COUNTRY_CODE_3,jsvars.purchase_info.transid),c=jsvars.purchase_info.vendor,d=jsvars.purchase_info.promo_code;jsvars.purchase_info.size_name}if(customerio.track("paygo_purchase"),__insp.push(["tagSession","paygo_purchase"]),PixelTrack("//www.googleadservices.com/pagead/conversion/1070250879/?value="+a+"&label=inxvCOnxggIQ__aq_gM&guid=ON&script=0"),PixelTrack("//flex.atdmt.com/mstag/tag/8c7afb7e-83f9-48be-9981-9d9d5f7c0c66/analytics.html?dedup=1&domainId=815648&type=1&revenue="+a+"&actionid=21662"),PixelTrack("//bigstockmail.com/pub/cct?_ri_=X0Gzc2X%3DUQpglLjHJlYQf11QQQQQvQvQEtA&_ei_=&action=once&OrderTotal="+a+"&OrderId="+b+"&CustomerId="+jsvars.user.id+"&Type=PAYGO"),"prod"==jsvars.run_env&&$.getScript(document.location.protocol+"//go.referralcandy.com/purchase/s5eg9qq3t0k6f3ensloxs8ith.js"),bsp.track("transaction",{id:b,vendor:c,cost:a,country:jsvars.COUNTRY_CODE_3}),jsvars.bulk_purchase_info){var e=!1,f={};for(var g in jsvars.bulk_purchase_info)if("function"!=typeof jsvars.bulk_purchase_info[g]){var h=jsvars.bulk_purchase_info[g];f[h.tracking_name]=f[h.tracking_name]||{},f[h.tracking_name].tracking_name=h.tracking_name,f[h.tracking_name].amount=h.amount,f[h.tracking_name].count?f[h.tracking_name].count+=1:f[h.tracking_name].count=1,"extended license"==h.tracking_name&&(e=!0)}ABtest_exclude_extended_license&&!e?window.optimizely_legacy_events?window.optimizely.push(["trackEvent","download_success_paygo",{anonymous:!0}]):$("html").trigger("download_success_paygo"):ABtest_exclude_extended_license||(window.optimizely_legacy_events?window.optimizely.push(["trackEvent","download_success_paygo",{anonymous:!0}]):$("html").trigger("download_success_paygo"));for(var g in f)bsp.track("item",{id:b,sku:f[g].tracking_name,name:"Image",cost:f[g].amount,quantity:f[g].count}),PixelTrack(jsvars.purchase_info.first_purchase?"https://bigstock.7eer.net/ifconv/?irchannel=4062&cid=1736&oid="+b+"&cat1=Cash "+f[g].tracking_name+"&sku1=&qty1="+f[g].count+"&amt1="+f[g].amount+"&promocode="+d:"https://bigstock.7eer.net/ifconv/?irchannel=4063&cid=1736&oid="+b+"&cat1=Cash "+f[g].tracking_name+"&sku1=&qty1="+f[g].count+"&amt1="+f[g].amount+"&promocode="+d)}if(bsp.track("finish_transaction"),window.adroll_segments="payasyougoconfirmation","undefined"!=typeof __adroll&&__adroll.render_pixel_code(adroll_adv_id,adroll_pix_id),jsvars.bulk_purchase_info){var i=a;ABtest_exclude_extended_license&&(i=0,$.each(jsvars.bulk_purchase_info,function(a,b){"extended license"!=b.tracking_name&&(i+=b.amount)})),optimizely.push(["trackEvent","paygo_bulk_purchase",100*i]),$("html").trigger("paygo_bulk_purchase",{cost:100*i}),$.each(jsvars.bulk_purchase_info,function(a,b){"extended license"!=b.tracking_name&&(window.optimizely_legacy_events?optimizely.push(["trackEvent","downloaded_image",{anonymous:!0}]):$("html").trigger("downloaded_image",{type:"paygo"}))})}},$(function(){jsvars.purchase_info&&bsp.trackCurrencyPurchase()}),bsp.download_success=function(a){if(a.purchase_info||a.credit_cart_tracking||a.subscription_cart_tracking){var b;b=a.purchase_info?"Used Paygo":a.credit_cart_tracking?"Used Credits":a.subscription_cart_tracking?"Used Subscription":"not set";var c,d=a.user.id?"Registered User":"Guest User";a.credit_cart_tracking?c=a.credit_cart_tracking.count_purchased:a.purchase_info?c=a.bulk_purchase_info.length:a.subscription_cart_tracking&&(c=a.subscription_cart_tracking.count_purchased);var e="";a.subscription_cart_tracking&&(e=a.subscription_cart_tracking.type),customerio.track("download_success",{url:document.location.href,media_type:e,photo_payment_method:b,num_images:c}),bsp.track("event",{category:"Download Success",action:b,label:d,value:c,noninteraction:!0})}if(optimizely.push(["trackEvent","downloaded_image_v1"]),customerio.track("just_downloaded"),a.credit_cart_tracking)for(i in a.credit_cart_tracking.purchased)optimizely.push(["trackEvent","downloaded_image_v1_anon",{anonymous:!0}]),bsp.track("event",{category:"Downloaded With Credits",action:a.credit_cart_tracking.purchased[i].size_name,label:a.credit_cart_tracking.purchased[i].photo_id,value:1*a.credit_cart_tracking.purchased[i].credit_cost,noninteraction:!0});if(a.subscription_cart_tracking)for(i in a.subscription_cart_tracking.purchased)optimizely.push(["trackEvent","downloaded_image_v1_anon",{anonymous:!0}]),bsp.track("event",{category:"Downloaded With Subscription",action:a.subscription_cart_tracking.purchased[i].size_name,label:a.subscription_cart_tracking.purchased[i].photo_id,noninteraction:!0}),$("html").trigger("downloaded_image",{type:"subscription"})},(jsvars.purchase_info||jsvars.credit_cart_tracking||jsvars.subscription_cart_tracking)&&bsp.download_success(jsvars),bsp.header=function(){return this.setCreditAllotments=function(a){a&&$(".credits_total").text(a)},this.setSubscriptionAllotments=function(a){a.video&&$(".video_subscription_total").text(a.video),a.image&&$(".image_subscription_total").text(a.image)},this}(),bsp.alert=new _bspAlert,$("html").on("alert.bsp",function(a,b){bsp.alert(b)}),$("html").on("click",".js_global_alert .msgbox-close",function(){return $(this).parents(".js_global_alert").remove(),!1}),bsp.user.isLoggedIn()||(bsp.https_modal2=function(a,b){if(bsp.user.isLoggedIn())return!0;var b=b||{};if(b.closable=b.closable||!0,b.onDispose=b.onDispose||!1,b.json="string"==typeof b.json?encodeURIComponent(b.json):"",b.js_routes="undefined"!=typeof b.action?document.location.href.match("\\?")?"&js_routes="+b.action:"?js_routes="+b.action:"","signup"==a){b.template=b.template||"signup";var c=$('<iframe id="signup_iframe" class="modal '+(b.template||"")+'" src="https://'+location.hostname+LANG_URL+"/signup/modal/?uri="+encodeURIComponent(js_routes.clean_url(document.location.href.replace(/#.*?$/,""))+b.js_routes)+"&return_to_here=false&template="+(b.template||"")+"&json="+(b.json||"")+"&js_actions="+b.action+'"  scrolling="no" />')}else if("login"==a){"login"==b.template?b.template="login_or_signup":"",b.template=b.template||"login_or_signup";var c=$('<iframe id="login_iframe" class="modal '+(b.template||"")+'" src="https://'+location.hostname+LANG_URL+"/serverside/login.php?uri="+encodeURIComponent(js_routes.clean_url(document.location.href.replace(/#.*?$/,""))+b.js_routes)+"&return_to_here=false&template="+(b.template||"")+"&json="+(b.json||"")+"&js_actions="+b.action+'"  scrolling="no" />');b.action&&-1!==b.action.indexOf("save_image")&&c.css("width",650)}return c.on("load",function(){bsp.hasPostMessage&&$(this)[0].contentWindow.postMessage('{"parent_protocol":"'+location.protocol+'", "i_am_an_iframe":true, "iframe_id":"'+$(this).attr("id")+'"}',"https://"+location.hostname),$.browser.mozilla&&$(c).focus()}),c.on("hidden",function(){$(this).remove()}),c}),$("html").on("signup_complete",function(a,b){bsp.track("event",{category:"signup_modal",action:"finish"}),window.optimizely.push(["trackEvent","signup_complete"]),jsvars.user.id=b.id,jsvars.user.email=b.email,jsvars.user.name=b.first,jsvars.user.sign_date=new Date,jsvars.user.optin=b.optin,customerio.init(jsvars),bsp.track("pageview",{page:"/signup-done/"}),ga(function(){tracker=ga.getByName(options.name),jsvars.ga_clientId=tracker.get("clientId"),$.get("/serverside/set_var.php?ga_current_clientId="+tracker.get("clientId"))}),PixelTrack("https://bigstock.7eer.net/ifconv/?irchannel=4061&cid=1736&oid="+b.id)}),jsvars.signup_success&&$(function(){$("html").trigger("signup_complete",jsvars.signup_success)}),$(function(){$("#LoginCntr form input#uname").focus(),$("#LoginCntr form").submit(function(){return $.ajax({type:"POST",url:$("#LoginCntr form").attr("action"),data:$("#LoginCntr form").serialize(),success:function(a){a&&1==a.status?(bsp.track("event",{category:"login",action:"success"}),bsp.track("event",{category:"login",action:"success"}),js_routes.get($.url.param("uri"))&&js_routes.for_next_page(js_routes.get($.url.param("uri"))),parent.location=js_routes.clean_url($.url.param("uri"))):($("#LoginCntr .errors").html(a.errors[0]),$("#LoginCntr .text").addClass("error"),bsp.hasPostMessage&&parent.postMessage("js_routes=shake_modal",bsp.parent_protocol+"//"+HTTP_HOST),bsp.track("event",{category:"login",action:"error"}))},error:function(){alert($("#login_ajax_fail").text())},dataType:"json"}),!1}),$("html").on("submit","#login_modal form",function(){return $.ajax({type:"POST",url:$("#login_modal form").attr("action"),data:$("#login_modal form").serialize(),success:function(a){$("#uname, #password").removeClass("error"),a&&1==a.status?(bsp.track("event",{category:"login",action:"success"}),bsp.hasPostMessage?js_routes.get($.url.param("uri"))&&(js_routes.get($.url.param("uri")).indexOf("for_next_page")>0?js_routes.for_next_page(js_routes.get($.url.param("uri"))):parent.postMessage("js_routes="+js_routes.get($.url.param("uri")),bsp.parent_protocol+"//"+HTTP_HOST)):js_routes.get($.url.param("uri"))&&js_routes.for_next_page(js_routes.get($.url.param("uri"))),parent.location=js_routes.clean_url($.url.param("uri"))):($("#login_modal .errors").show(),$("#login_modal .alert").html(a.errors),a.has_account?$("#password").addClass("error"):$("#uname").addClass("error"),$("#login_modal .text").addClass("error"),bsp.hasPostMessage&&parent.postMessage("js_routes=shake_modal",bsp.parent_protocol+"//"+HTTP_HOST),bsp.track("event",{category:"login",action:"error"}))},error:function(){alert($("#login_ajax_fail").text())},complete:function(){bsp.hasPostMessage&&parent.postMessage("js_routes=/iframe_resize/"+bsp.iframe_id+"/"+$("html").height(),bsp.parent_protocol+"//"+HTTP_HOST)},dataType:"json"}),!1}),$("#password_check #password-field").focus(),$("#password_check form").submit(function(){return $.post($(this).attr("action"),$(this).serialize(),function(a){a&&1==a.status?bsp.hasPostMessage?parent.postMessage("js_routes=/continueDownload/",bsp.parent_protocol+"//"+location.hostname):parent.location=$.url.param("uri"):($("#password_check .errors").text(a.error),$("#password_check .text").addClass("error"))},"json"),!1}),$("#password_check form .cancel").click(function(){bsp.hasPostMessage?parent.postMessage("js_routes=/closeModalWindows/",bsp.parent_protocol+"//"+location.hostname):parent.location=$.url.param("uri")}),$("html").on("click","a.switch_to_signup",function(){return bsp.hasPostMessage?bsp.i_am_an_iframe?parent.postMessage("js_routes="+tmp_routes,bsp.parent_protocol+"//"+HTTP_HOST):js_routes.init("signup"):parent.location=full_url,!1}),$("html").on("click",".send_guest_validation_again",function(){var a=$(this),b=$(this).data("id");return $.ajax({type:"POST",url:"/serverside/guest_validation_email.php?id="+b,success:function(b){a.parents(".message_cntr").length?a.parents(".message_cntr").find(".alert-error").removeClass("alert-error").addClass("alert-success").find("dt").html(b):a.parent().hasClass("errors")&&(bsp.hasPostMessage?(parent.postMessage("js_routes=/showAlert/"+b,bsp.parent_protocol+"//"+location.hostname),parent.postMessage("js_routes=/closeModalWindows/",bsp.parent_protocol+"//"+location.hostname)):parent.location=$.url.param("uri"))},dataType:"text",async:!1}),!1})}),isResponsiveWidth()&&$(document).ready(function(){$("#dropdown_toggle_account").attr("href","javascript:void(0)"),$("#mobile_dropdown_btn").is(":visible")?($("#dropdown_account").toggleClass("open"),$(window).click(function(){$("#dropdown_account").addClass("active open")})):$("#dropdown_toggle_account").click(function(){$("#dropdown_account").toggleClass("active open")
})});var default_image_size=jsvars.default_image_size;if(!default_image_size&&bsp.user.hasSubscription()&&(default_image_size=6),bsp.cart=new _bspCart(jQuery,jsvars.cart_ids,jsvars.cart_latest,{default_image_size:default_image_size,message_too_many:lang.cart_too_many,message_fail:lang.cart_fail,LANG_URL:LANG_URL}),$("html").on("cart_added cart_removed",function(){$(".num_cart_images").html(bsp.cart.count),bsp.cart.count>1?($(".cart_many_text").show(),$(".cart_single_text").hide()):1==bsp.cart.count?($(".cart_many_text").hide(),$(".cart_single_text").show()):($(".cart_many_text").hide(),$(".cart_single_text").show())}),$("html").on("cart_added",function(){customerio.track("cart_add"),optimizely.push(["trackEvent","cart_add"]),bsp.user.subscriptions.hasActiveSubscriptions()&&(bsp.user.subscriptions.getCredits("image")==bsp.cart.count&&bsp.user.subscriptions.getCredits("image")>0&&(document.location="/cart/"),bsp.user.subscriptions.getCredits("image")<bsp.cart.count&&bsp.user.subscriptions.getCredits("image")>0&&(document.location="/cart/"))}),$(function(){$(".cart.menu_item").click(function(){return document.location=$(".cart.menu_item").find("a:first").attr("href"),!1})}),bsp.promo={get_prices:function(a){if(jsvars.promo_info&&jsvars.promo_info.amount&&jsvars.promo_info.trans_type==jsvars.photo_payment_method){var b=a*(jsvars.promo_info.amount/100),c=bsp.util.floordec(a-b),d=bsp.util.ceildec(b);return{total:c.toFixed(2),discount:d.toFixed(2),subtotal:a.toFixed(2)}}return{total:a.toFixed(2)}}},jQuery.fn.alpha_sort_children=function(){var a="";return this.each(function(){var b=$(this),c=b.children(":not(.sort_skip)").get();c.sort(function(a,b){var c=$(a).text().toUpperCase().replace("","A").replace("","O").replace("","A"),d=$(b).text().toUpperCase().replace("","A").replace("","O").replace("","A");return d>c?-1:c>d?1:0}),$.each(c,function(a,c){b.append(c)}),a=b.find("[selected]").val()}),$(this).val(a),this},$("html").on("mouseenter","select.country_code_select",function(){if("true"!=$(this).attr("prev_set")){$(this).alpha_sort_children();var a=$(this).attr("prev");$(this).val(a),$(this).attr("prev_set","true"),$(this).val($(this).find("[selected]").val())}}),window.Surveyor={survey_html:"",dgx_ref:"",loadit:function(a){var b={closable:!0,width:600,title:"&nbsp;"};$.ajax({url:LANG_URL+"/surveys/"+a+"?do=get",success:function(a){""!=a&&(b.html=a,Surveyor.dgx_ref=showDialog(b))}})},unloadit:function(){hideDialog(Surveyor.dgx_ref)},submitit:function(a,b,c){return $.post(LANG_URL+"/surveys/"+a+"?do=save",b,function(a){"function"==typeof c&&c(a)}),!1}},$(window).load(function(){"undefined"!=typeof jsvars.load_surveyor&&Surveyor.loadit(jsvars.load_surveyor)}),$(window).load(function(){$(".g_plus_1").length&&(window.___gcfg={lang:jsvars.USER_LANGUAGE},function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/plusone.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()),$(".twitter-share-button, .twitter-follow-button").length&&!function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://platform.twitter.com/widgets.js",$(a).load(function(){twttr.events.bind("tweet",function(a){if(a){var b;a.target&&"IFRAME"==a.target.nodeName&&(b=extractParamFromUri(a.target.src,"url")),bsp.track("social",{network:"twitter",action:"tweet",target:b})}})});var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),function(){var a=document.createElement("script");a.async=!0,a.src=("file:"==document.location.protocol?"https:":document.location.protocol)+"//connect.facebook.net/"+jsvars.FACEBOOK_LANGUAGE_CODE+"/all.js",$("#fb-root").append(a)}(),window.fbAsyncInit=function(){var a,b={bigstockcorp:"518685531530309",bigstockphoto:"401448256631593",bigstock:"556414987749698"};document.location.host.indexOf("bigstockcorp.")>-1?a=b.bigstockcorp:document.location.host.indexOf("bigstock.")>-1?a=b.bigstock:document.location.host.indexOf("bigstockphoto.")>-1&&(a=b.bigstockphoto),FB.init({appId:a,status:!0,cookie:!0,xfbml:!0,channelUrl:document.location.origin+"/files/facebook_channel.html"}),FB.Event.subscribe("edge.create",function(a){bsp.track("social",{network:"facebook",action:"like",target:a})}),FB.Event.subscribe("edge.remove",function(a){bsp.track("social",{network:"facebook",action:"unlike",target:a})}),FB.Event.subscribe("message.send",function(a){bsp.track("social",{network:"facebook",action:"send",target:a})})}}),$(window).load(function(){$.getScript(document.location.protocol+"//s3.amazonaws.com/ki.js/29922/5RA.js")}),bsp.user.lightbox={list:{},views:{},page_size:100,last_requested_page:0,view:function(a,b){var b=b||{};if(b.page=b.page||1,bsp.user.lightbox.last_requested_page=b.page,bsp.user.lightbox.page_size=b.page_size||bsp.user.lightbox.page_size,bsp.user.lightbox.views[a]&&bsp.user.lightbox.views[a].pages&&bsp.user.lightbox.views[a].pages[b.page])return bsp.user.lightbox.views[a].pages[b.page];var c={lightbox_id:a,page:b.page,page_size:bsp.user.lightbox.page_size};if("all"==a)var d="/saved/get-all";else var d="/lightbox/view";$.ajax({type:"POST",url:d,data:c,success:function(c){"success"==c.type&&(bsp.user.lightbox.views[a]=bsp.user.lightbox.views[a]||[],bsp.user.lightbox.views[a].pages=bsp.user.lightbox.views[a].pages||[b.page],bsp.user.lightbox.views[a].loaded_pages=b.page,bsp.user.lightbox.views[a].pages[b.page]=c.data,$("html").trigger("next_page_loaded",{data:c.data,type:"lightbox"}))},dataType:"json"})},viewNext:function(a,b){var b=b||{};if(bsp.user.lightbox.views[a])var c=bsp.user.lightbox.last_requested_page||1;else{bsp.user.lightbox.views[a]=[];var c=bsp.user.lightbox.views[a].loaded_pages=1}return bsp.saved_page.infinite_scroll.current_limit>0?(bsp.saved_page.infinite_scroll.current_limit-=1,b.page=c+1,bsp.user.lightbox.views[a].pages&&Object.size(bsp.user.lightbox.views[a].pages[c])==bsp.user.lightbox.page_size?void bsp.user.lightbox.view(a,b):!1):!1},get:function(a){return _.find(bsp.user.lightbox.list,function(b){return b.collection_id==a})},getList:function(a){var a=a||{};if(a.force="undefined"!==a.force?a.force:!0,a.force)bsp.user.lightbox.list=[],bsp.html5.localStorage()&&localStorage.removeItem(jsvars.user.id+"_lightbox-getList");else if(localStorage&&localStorage[jsvars.user.id+"_lightbox-getList"]){var b=$.parseJSON(localStorage[jsvars.user.id+"_lightbox-getList"]);bsp.user.lightbox.list=b.data,$("html").trigger("lightbox-getList",{data:b.data})}if(bsp.user.lightbox.list.length)$("html").trigger("lightbox-getList",{data:b.data});else{$.ajax({url:LANG_URL+"/lightbox/list",dataType:"json",success:function(a){if("success"==a.type){var b=new Date,c={data:a.data,date:b.getTime()},d=JSON.stringify(c,JSONreplacer);localStorage[jsvars.user.id+"_lightbox-getList"]=d,bsp.user.lightbox.list=a.data,$("html").trigger("lightbox-getList",{data:a.data})}else localStorage[jsvars.user.id+"_lightbox-getList"]="",bsp.user.lightbox.list={},$("html").trigger("lightbox-getList")}})}},create:function(a,b){if(!a)return!1;var b=b||0;if(b)var b=2;else var b=0;var c=$.ajax({type:"POST",url:"/lightbox/add",data:{name:a,is_viewable:b},async:!1}).responseText;return c=$.parseJSON(c),"success"==c.type?($("html").trigger("lightbox-create",{collection_id:c.collection_id,name:a}),bsp.html5.localStorage()&&localStorage.removeItem(jsvars.user.id+"_lightbox-getList"),bsp.track("event",{category:"save",action:"lightbox",label:"create_lightbox"}),c.collection_id):(c.message&&alert(c.message),!1)},remove:function(a){if(!a)return!1;delete bsp.user.lightbox.views[a];var b=$.ajax({type:"POST",url:"/lightbox/remove",data:{lightbox_id:a},async:!1}).responseText;return b=$.parseJSON(b),"success"==b.type?($("html").trigger("lightbox-delete",{collection_id:a}),bsp.track("event",{category:"save",action:"lightbox",label:"delete_lightbox"}),!0):!1},addTo:function(a,b,c){var c=c||{};if(!a&&!b)return!1;delete bsp.user.lightbox.views[b];var d=$.ajax({type:"POST",url:"/lightbox/add-photo",data:{lightbox_id:b,photo_id:a},async:!1}).responseText;if(d=$.parseJSON(d),"success"==d.type){if(bsp.user.images_in_lightboxes.addTo(a,b),$("html").trigger("lightbox-addTo",{photo_id:a,collection_id:b}),bsp.track("event",{category:"save",action:"lightbox",label:"add_to_lightbox"}),c.type&&c.format){var e="lightbox";b==bsp.user.lightbox.default_gallery&&(e="save"),$(document).trigger("track_sdp_event",{event:e,id:a,type:c.type,format:c.format,lightbox:b})}return customerio.track("lightbox_add"),window.optimizely.push(["trackEvent","star_or_lightbox"]),!0}return!1},removeFrom:function(a,b,c){if(!a&&!b)return!1;delete bsp.user.lightbox.views[b];var d=$.ajax({type:"POST",url:"/lightbox/remove-photo",data:{lightbox_id:b,photo_id:a},async:!1}).responseText;return d=$.parseJSON(d),"success"==d.type?($("html").trigger("lightbox-removeFrom",{photo_id:a,collection_id:b}),bsp.track("event",{category:"save",action:"lightbox",label:"remove_from_lightbox"}),!0):!1},update:function(a,b,c,d){if(!a&&!b)return!1;var c=c||0;if(c)var c=2;else var c=0;$.ajax({type:"POST",url:"/lightbox/update",data:{lightbox_id:a,name:b,is_viewable:c},success:function(){$.each(bsp.user.lightbox.list,function(d,e){a==e.collection_id&&(bsp.user.lightbox.list[d].name=b,bsp.user.lightbox.list[d].is_viewable=c)}),$("html").trigger("lightbox-update",{collection_id:a,name:b,privacy:c})}})},share:function(a){var b=$.ajax({type:"POST",url:"/lightbox/share-key",data:{lightbox_id:a},async:!1}).responseText;return b=$.parseJSON(b),"success"==b.type?b.data:!1},setDefault:function(a){var b=$.ajax({type:"POST",url:"/lightbox/set-default",data:{lightbox_id:a},async:!1}).responseText;return b=$.parseJSON(b),"success"==b.type?("all"==a&&(a=""),bsp.user.lightbox.default_gallery=a,$("html").trigger("lightbox-setDefault",{collection_id:a,data:b.data}),bsp.html5.localStorage()&&localStorage.removeItem(jsvars.user.id+"_lightbox-getList"),bsp.user.lightbox.getList({force:!0}),b.data):!1}},bsp.user.images_in_lightboxes={images:{},last_call:"",collection_id:null,get:function(a,b){if(!jsvars.user.id)return!1;var b=b||{};null==bsp.user.images_in_lightboxes.collection_id&&b.collection_id&&(bsp.user.images_in_lightboxes.collection_id=b.collection_id);var c=[];$.each(a,function(a,b){c[c.length]=b});var d=c.sort().join(",");if(bsp.user.images_in_lightboxes.last_call!=d){bsp.user.images_in_lightboxes.last_call=c;{$.ajax({type:"POST",url:"/saved/checkin",data:{ids:c},dataType:"json",success:function(a){if(a.data){if(b.collection_id==bsp.user.images_in_lightboxes.collection_id)for(i in a.data)bsp.user.images_in_lightboxes.images[i]=a.data[i];else bsp.user.images_in_lightboxes.collection_id=b.collection_id,bsp.user.images_in_lightboxes.images=a.data;$("html").trigger("images_in_lightboxes",{data:a.data})}}})}}},addTo:function(a,b){bsp.user.images_in_lightboxes.images[a]||(bsp.user.images_in_lightboxes.images[a]=[]),bsp.user.images_in_lightboxes.images[a].push(b)},removeFrom:function(a,b){if(bsp.user.images_in_lightboxes.images[a])if(b)for(i in bsp.user.images_in_lightboxes.images[a])bsp.user.images_in_lightboxes.images[a][i]==b&&delete bsp.user.images_in_lightboxes.images[a][i];else delete bsp.user.images_in_lightboxes.images[a]}},$("html").on("lightbox-getList",function(a,b){b?($.each(b.data,function(a,b){1==b.default_gallery&&(bsp.user.lightbox.default_gallery=b.collection_id)}),$(".save_button").addClass("advance"),$(".save_button .menu.pane ul").html(""),$.each(b.data,function(a,b){$(".save_button .menu.pane ul").append('<li class="item " data-collection-id="'+b.collection_id+'" data-default="'+(b.default_gallery?"true":"false")+'"> <span class="sprite check2"></span> '+b.name+"</li>")})):$(".save_button").removeClass("advance")}),bsp.user.save_button={star:function(a,b){var b=b||{};if($(".saved_page .sidebar div.selected").data("collection-id"))bsp.user.save_button.addToLightbox(a,$(".saved_page .sidebar div.selected").data("collection-id"));else{bsp.user.lightbox.default_gallery?(endpoint=LANG_URL+"/lightbox/add-photo",add_data={photo_id:a,lightbox_id:bsp.user.lightbox.default_gallery}):(endpoint=LANG_URL+"/saved/add",add_data={photo_id:a});{$.ajax({url:endpoint,type:"POST",data:add_data,dataType:"json",beforeSend:function(a){a.setRequestHeader("anti-csrf-token",jsvars.csrf_session_token)},success:function(c){"success"==c.type?(bsp.user.images_in_lightboxes.addTo(a,"all"),$("html").trigger("save_button-star",{photo_id:a}),bsp.track("event",{category:"save",action:"star",label:"add_star"}),b.type&&b.format&&$(document).trigger("track_sdp_event",{event:"save",id:a,type:b.type,format:b.format,lightbox:c.collection_id})):alert(c.message)}})}}},unstar:function(a,b){$.ajax({url:LANG_URL+"/saved/remove",dataType:"json",data:{photo_id:a},success:function(b){"success"==b.type?($("html").trigger("save_button-unstar",{photo_id:a}),bsp.track("event",{category:"save",action:"star",label:"remove_star"})):alert(b.message)}});$("html").trigger("lightbox-removeFrom",{collection_id:bsp.user.images_in_lightboxes.images[a],photo_id:a}),bsp.user.images_in_lightboxes.removeFrom(a)},updateLightboxes:function(a){var a=a||{};a.force=a.force||!1,bsp.user.lightbox.getList(a)},create:function(a,b,c){var c=c||{},d=bsp.user.lightbox.create(a,b);return d?(bsp.user.save_button.updateLightboxes({force:!0}),c.photo_id&&bsp.user.lightbox.addTo(c.photo_id,d),d):!1},addToLightbox:function(a,b,c){var c=c||{};return bsp.user.lightbox.addTo(a,b,c)},removeFromLightbox:function(a,b,c){var c=c||{};return bsp.user.lightbox.removeFrom(a,b,c)}},$("html").on("images_in_lightboxes",function(a,b){$(this).find(".save_button").each(function(){var a=$(this).data("photo-id");b.data[a]&&$(this).addClass("saved")})}),$("html").on("images_in_lightboxes",function(a,b){$(this).find(".save_link").each(function(){var a=$(this).data("media-id");b.data[a]&&$(this).addClass("saved")})}),$("html").on("check_for_lightbox_info",function(){if(($(".save_button").length||$(".save_link").length)&&jsvars.user.id){if(bsp.user.save_button.updateLightboxes(),!$(".saved_page").length||!$(".save_link").length){var a=[];$(".save_button").each(function(){a[a.length]=$(this).data("photo-id")}),$(".save_link").each(function(){a[a.length]=$(this).data("media-id")}),log(a),bsp.user.images_in_lightboxes.get(a)}}else jsvars.user.id&&bsp.user.lightbox.getList({force:!1})}),$(function(){$("html").trigger("check_for_lightbox_info"),$("html").on("mouseenter mousemove mouseleave",".save_button.advance",function(a){"mouseenter"==a.type||"mousemove"==a.type?$(this).hasClass("active")||($(this).addClass("active"),$(this).find(".save_button_dropdown .pane").hide(),$(this).find(".save_button_dropdown .menu").show()):$(this).find(".save_button_dropdown").hasClass("active")||($(this).removeClass("active"),$(this).find(".save_button_dropdown .pane").hide(),$(this).find(".save_button_dropdown .menu").show())}),$("html").on("mousemove",".save_button .save_button_dropdown .save_button_toggle",function(){$(this).trigger("hover")}),$("html").on("click",function(a){if(!$(a.target).hasClass("save_button")&&!$(a.target).parents(".save_button").length){var b=$(".save_button.advance");b.removeClass("active"),b.find(".save_button_dropdown").removeClass("active"),b.find(".save_button_dropdown .pane").hide(),b.find(".save_button_dropdown .menu .create_lightbox").show(),b.find(".save_button_dropdown .menu").show()}}),$("html").on("click",".save_button",function(a){if(!login({action:"save_image/"+$(this).data("photo-id")+"/"}))return"function"==typeof imagePreview&&imagePreview(),!1;if(!$(a.target).hasClass("dropdown")&&!$(a.target).parents(".save_button_dropdown").length){var b=$(this).data("photo-id");if($(this).hasClass("saved"))$(this).removeClass("saved"),$(this).find(".save_button_dropdown .menu li.item span.checked").removeClass("checked"),bsp.user.save_button.unstar(b);else if($(this).addClass("saved"),bsp.user.lightbox.default_gallery&&!$(".saved_page .sidebar .lightboxes .selected").length){var c=$(this).find(".save_button_dropdown .menu li.item").filter(function(){return $(this).data("collection-id")==bsp.user.lightbox.default_gallery}).click();$(this).mouseover();var d=$(this).offset(),e=bsp.tooltip.show({body:'<div style="padding:5px 2px; font-size:11px; color:#666;">'+lang.saved_to+' "'+c.text().trim()+'"</div>',top:d.top+8,left:d.left+$(this).width()/2-15,type:"top",init:function(a){return a.hide(),a.fadeIn(),a}});setTimeout(function(){e.fadeOut("slow")},1500)}else bsp.user.save_button.star(b)}}),$("html").on("click",".save_button .save_button_toggle",function(){if("function"==typeof imagePreview&&imagePreview(),$(this).parents(".save_button_dropdown").toggleClass("active"),$(this).parents(".save_button_dropdown").find(".menu .create_lightbox").show(),$(this).parents(".save_button_dropdown").find(".create_lightbox input.lightbox_name").val(""),$(this).parents(".save_button_dropdown").find(".create_lightbox .public_lightbox").prop("checked",!1),$(this).parents(".save_button_dropdown").hasClass("active")){if($(this).parents(".save_button_dropdown").find(".menu ul").jScrollPane(),"undefined"==typeof $(this).parents(".save_button_dropdown").find(".display").data("left")&&$(this).parents(".actions").length)var a=$(this).parents(".actions").offset().left-$(this).parents(".save_button_dropdown").find(".display").offset().left;else var a=$(this).parents(".save_button_dropdown").find(".display").data("left");$(this).parents(".save_button_dropdown").find(".display").data("left",a),$(this).parents(".save_button_dropdown").find(".display").css("left",a+"px");var b=$(this).parents(".save_button").data("photo-id");bsp.user.images_in_lightboxes.images[b]&&$(this).parents(".save_button_dropdown").find(".menu.pane ul li").each(function(){for(i in bsp.user.images_in_lightboxes.images[b])bsp.user.images_in_lightboxes.images[b][i]==$(this).data("collection-id")&&($(this).addClass("added"),$(this).find(".sprite").addClass("checked"))}),$("html").trigger("save_button_dropdown_open",{photo_id:b})}else $(this).parents(".save_button_dropdown").find(".pane").hide(),$(this).parents(".save_button_dropdown").find(".menu").show(),$(this).parents(".save_button_dropdown").find(".menu ul").data("jsp").destroy()}),$("html").on("click",".save_button .save_button_dropdown .menu li.item",function(){var a=$(this).data("collection-id");if(!a)return!1;var b=$(this).parents(".save_button").data("photo-id");if(!b)return!1;if($(this).find("span.sprite").hasClass("checked")){var c=bsp.user.save_button.removeFromLightbox(b,a);if(!c)return!1;bsp.user.images_in_lightboxes.removeFrom(b,a),$(this).removeClass("added"),$(this).find("span.sprite").removeClass("checked")}else{var d=$(this).parents(".search-image-box");if(d.length)var e="mov"==d.data("srcformat")?"video":"image",f=d.data("srcformat");else if(jsvars.media)var e=jsvars.media.media_type,f=jsvars.media.format;else var e="image",f="jpeg";var g=bsp.user.save_button.addToLightbox(b,a,{type:e,format:f});if(!g)return!1;$(this).addClass("added"),$(this).find("span.sprite").addClass("checked"),$(this).parents(".save_button").addClass("saved")}$(this).parents(".save_button").removeClass("active"),$(this).parents(".save_button").find(".save_button_dropdown").removeClass("active"),$(this).parents(".save_button").find(".save_button_dropdown .pane").hide(),$(this).parents(".save_button").find(".save_button_dropdown .menu").show()}),$("html").on("click",".save_button .save_button_dropdown .menu .create_lightbox",function(){var a=$(this).parents(".display");$(this).hide(),a.find("> .create_lightbox").show(),a.find("> .create_lightbox").find("input.lightbox_name").focus()}),$("html").on("click",".save_button .save_button_dropdown .display > .create_lightbox .cancel",function(){$(this).parents(".save_button_dropdown").find(".pane.create_lightbox").hide(),$(this).parents(".create_lightbox").find("input.lightbox_name").val(""),$(this).parents(".create_lightbox").find(".public_lightbox").prop("checked",!1),$(this).parents(".save_button_dropdown").find(".menu .create_lightbox").show()}),$("html").on("submit",".save_button .save_button_dropdown .display > .create_lightbox form",function(){if(""==$(this).parents(".create_lightbox").find("input.lightbox_name").val().trim())return!1;var a=$(this).parents(".create_lightbox").find("input.lightbox_name").val();a=a.replace(/#/gi,"").replace(/%/gi,"").replace(/(<([^>]+)>)/gi,"");var b=$(this).parents(".create_lightbox").find(".public_lightbox").prop("checked"),c=$(this).parents(".save_button").data("photo-id"),d=bsp.user.save_button.create(a,b,{photo_id:c});return d?(bsp.user.images_in_lightboxes.addTo(c,d),$("html").trigger("images_in_lightboxes",{data:bsp.user.images_in_lightboxes.images}),bsp.user.images_in_lightboxes.addTo(c,d),$(this).parents(".create_lightbox").find(".cancel").click(),$(this).parents(".save_button_dropdown").find(".menu ul").data("jsp").destroy(),$(this).parents(".save_button_dropdown").toggleClass("active"),!1):!1}),$("html").on("click",".save_button .save_button_dropdown .display > .create_lightbox .save",function(){$(this).parents("form").find("[type=submit]").click()}),$("html").on("click",".save_button .save_button_dropdown .display > .create_lightbox label[for=public_lightbox]",function(){$(this).parents(".create_lightbox").find("input.public_lightbox").prop("checked")?$(this).parents(".create_lightbox").find("input.public_lightbox").prop("checked",0):$(this).parents(".create_lightbox").find("input.public_lightbox").prop("checked",1)}),$("html").on("mouseenter mouseleave",".jspScrollable",function(a){"mouseenter"==a.type?$(this).addClass("over"):$(this).removeClass("over")})}),bsp.tooltip={template:'<div class="bsp-tooltip"><div class="bsp-tooltip-arrow"></div><div class="bsp-tooltip-arrow-inside"></div><div class="bsp-tooltip-inner"><div class="bsp-tooltip-inner-white body_html"></div></div></div>',show:function(a){var a=a||{};a.init=a.init||function(a){return a},a.type=a.type||"top",a.body=a.body||"";var b=$(bsp.tooltip.template);b.addClass(a.type),b.find(".body_html").html(a.body);for(var c in a.data)b.data(c,a.data[c]);if(a.top||a.right||a.left||a.bottom)a.target?a.target.append(b):$("body").append(b),"top"==a.type?(a.top&&b.css("top",a.top-(b.height()+20)),a.bottom&&b.css("bottom",a.bottom),a.left&&b.css("left",a.left-b.width()/2),a.right&&b.css("right",a.right)):"left"==a.type?(a.top&&b.css("top",a.top-b.height()/2),a.bottom&&b.css("bottom",a.bottom),a.left&&b.css("left",a.left-(b.width()+20)),a.right&&b.css("right",a.right)):"right"==a.type?(a.top&&b.css("top",a.top-b.height()/2),a.bottom&&b.css("bottom",a.bottom),a.left&&b.css("left",a.left),a.right&&b.css("right",a.right)):"bottom"==a.type&&(a.top&&b.css("top",a.top-(b.height()-20)),a.bottom&&b.css("bottom",a.bottom),a.left&&b.css("left",a.left-b.width()/2),a.right&&b.css("right",a.right));else if(a.target){if(a.target.find(".bsp-tooltip").length)return!1;a.target.append(b),b.css({top:"-"+(b.height()+20)+"px",left:"-"+(b.width()/2-3)+"px"})}return a.init(b),b},clear:function(a){"object"==typeof a?a.find(".bsp-tooltip").remove():"string"==typeof a?$(a).remove():$(".bsp-tooltip").remove()}},function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),function(a,b,c){a.fn.jScrollPane=function(b){function d(b,d){function e(d){var g,i,k,l,m,p,q=!1,r=!1;if(P=d,Q===c)m=b.scrollTop(),p=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),R=b.innerWidth()+tb,S=b.innerHeight(),b.width(R),Q=a('<div class="jspPane" />').css("padding",sb).append(b.children()),T=a('<div class="jspContainer" />').css({width:R+"px",height:S+"px"}).append(Q).appendTo(b);else{if(b.css("width",""),q=P.stickToBottom&&B(),r=P.stickToRight&&C(),l=b.innerWidth()+tb!=R||b.outerHeight()!=S,l&&(R=b.innerWidth()+tb,S=b.innerHeight(),T.css({width:R+"px",height:S+"px"})),!l&&ub==U&&Q.outerHeight()==V)return void b.width(R);ub=U,Q.css("width",""),b.width(R),T.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}Q.css("overflow","auto"),U=d.contentWidth?d.contentWidth:Q[0].scrollWidth,V=Q[0].scrollHeight,Q.css("overflow",""),W=U/R,X=V/S,Y=X>1,Z=W>1,Z||Y?(b.addClass("jspScrollable"),g=P.maintainPosition&&(ab||db),g&&(i=z(),k=A()),f(),h(),j(),g&&(x(r?U-R:i,!1),w(q?V-S:k,!1)),G(),D(),N(),P.enableKeyboardNavigation&&I(),P.clickOnTrack&&n(),K(),P.hijackInternalLinks&&M()):(b.removeClass("jspScrollable"),Q.css({top:0,width:T.width()-tb}),E(),H(),J(),o(),L()),P.autoReinitialise&&!rb?rb=setInterval(function(){e(P)},P.autoReinitialiseDelay):!P.autoReinitialise&&rb&&clearInterval(rb),m&&b.scrollTop(0)&&w(m,!1),p&&b.scrollLeft(0)&&x(p,!1),b.trigger("jsp-initialised",[Z||Y])}function f(){Y&&(T.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />'))),eb=T.find(">.jspVerticalBar"),fb=eb.find(">.jspTrack"),$=fb.find(">.jspDrag"),P.showArrows&&(jb=a('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",l(0,-1)).bind("click.jsp",F),kb=a('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",l(0,1)).bind("click.jsp",F),P.arrowScrollOnHover&&(jb.bind("mouseover.jsp",l(0,-1,jb)),kb.bind("mouseover.jsp",l(0,1,kb))),k(fb,P.verticalArrowPositions,jb,kb)),hb=S,T.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){hb-=a(this).outerHeight()}),$.hover(function(){$.addClass("jspHover")},function(){$.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",F),$.addClass("jspActive");var c=b.pageY-$.position().top;return a("html").bind("mousemove.jsp",function(a){q(a.pageY-c,!1)}).bind("mouseup.jsp mouseleave.jsp",p),!1}),g())}function g(){fb.height(hb+"px"),ab=0,gb=P.verticalGutter+fb.outerWidth(),Q.width(R-gb-tb);try{0===eb.position().left&&Q.css("margin-left",gb+"px")}catch(a){}}function h(){Z&&(T.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),lb=T.find(">.jspHorizontalBar"),mb=lb.find(">.jspTrack"),bb=mb.find(">.jspDrag"),P.showArrows&&(pb=a('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",l(-1,0)).bind("click.jsp",F),qb=a('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",l(1,0)).bind("click.jsp",F),P.arrowScrollOnHover&&(pb.bind("mouseover.jsp",l(-1,0,pb)),qb.bind("mouseover.jsp",l(1,0,qb))),k(mb,P.horizontalArrowPositions,pb,qb)),bb.hover(function(){bb.addClass("jspHover")},function(){bb.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",F),bb.addClass("jspActive");var c=b.pageX-bb.position().left;return a("html").bind("mousemove.jsp",function(a){s(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",p),!1}),nb=T.innerWidth(),i())}function i(){T.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){nb-=a(this).outerWidth()}),mb.width(nb+"px"),db=0}function j(){if(Z&&Y){var b=mb.outerHeight(),c=fb.outerWidth();hb-=b,a(lb).find(">.jspCap:visible,>.jspArrow").each(function(){nb+=a(this).outerWidth()}),nb-=c,S-=c,R-=b,mb.parent().append(a('<div class="jspCorner" />').css("width",b+"px")),g(),i()}Z&&Q.width(T.outerWidth()-tb+"px"),V=Q.outerHeight(),X=V/S,Z&&(ob=Math.ceil(1/W*nb),ob>P.horizontalDragMaxWidth?ob=P.horizontalDragMaxWidth:ob<P.horizontalDragMinWidth&&(ob=P.horizontalDragMinWidth),bb.width(ob+"px"),cb=nb-ob,t(db)),Y&&(ib=Math.ceil(1/X*hb),ib>P.verticalDragMaxHeight?ib=P.verticalDragMaxHeight:ib<P.verticalDragMinHeight&&(ib=P.verticalDragMinHeight),$.height(ib+"px"),_=hb-ib,r(ab))}function k(a,b,c,d){var e,f="before",g="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split"),b==f?g=b:b==g&&(f=b,e=c,c=d,d=e),a[f](c)[g](d)}function l(a,b,c){return function(){return m(a,b,this,c),this.blur(),!1}}function m(b,c,d,e){d=a(d).addClass("jspActive");var f,g,h=!0,i=function(){0!==b&&vb.scrollByX(b*P.arrowButtonSpeed),0!==c&&vb.scrollByY(c*P.arrowButtonSpeed),g=setTimeout(i,h?P.initialDelay:P.arrowRepeatFreq),h=!1};i(),f=e?"mouseout.jsp":"mouseup.jsp",e=e||a("html"),e.bind(f,function(){d.removeClass("jspActive"),g&&clearTimeout(g),g=null,e.unbind(f)})}function n(){o(),Y&&fb.bind("mousedown.jsp",function(b){if(b.originalTarget===c||b.originalTarget==b.currentTarget){var d,e=a(this),f=e.offset(),g=b.pageY-f.top-ab,h=!0,i=function(){var a=e.offset(),c=b.pageY-a.top-ib/2,f=S*P.scrollPagePercent,k=_*f/(V-S);if(0>g)ab-k>c?vb.scrollByY(-f):q(c);else{if(!(g>0))return void j();c>ab+k?vb.scrollByY(f):q(c)}d=setTimeout(i,h?P.initialDelay:P.trackClickRepeatFreq),h=!1},j=function(){d&&clearTimeout(d),d=null,a(document).unbind("mouseup.jsp",j)};return i(),a(document).bind("mouseup.jsp",j),!1}}),Z&&mb.bind("mousedown.jsp",function(b){if(b.originalTarget===c||b.originalTarget==b.currentTarget){var d,e=a(this),f=e.offset(),g=b.pageX-f.left-db,h=!0,i=function(){var a=e.offset(),c=b.pageX-a.left-ob/2,f=R*P.scrollPagePercent,k=cb*f/(U-R);if(0>g)db-k>c?vb.scrollByX(-f):s(c);else{if(!(g>0))return void j();c>db+k?vb.scrollByX(f):s(c)}d=setTimeout(i,h?P.initialDelay:P.trackClickRepeatFreq),h=!1},j=function(){d&&clearTimeout(d),d=null,a(document).unbind("mouseup.jsp",j)};return i(),a(document).bind("mouseup.jsp",j),!1}})}function o(){mb&&mb.unbind("mousedown.jsp"),fb&&fb.unbind("mousedown.jsp")}function p(){a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),$&&$.removeClass("jspActive"),bb&&bb.removeClass("jspActive")}function q(a,b){Y&&(0>a?a=0:a>_&&(a=_),b===c&&(b=P.animateScroll),b?vb.animate($,"top",a,r):($.css("top",a),r(a)))}function r(a){a===c&&(a=$.position().top),T.scrollTop(0),ab=a;var d=0===ab,e=ab==_,f=a/_,g=-f*(V-S);(wb!=d||yb!=e)&&(wb=d,yb=e,b.trigger("jsp-arrow-change",[wb,yb,xb,zb])),u(d,e),Q.css("top",g),b.trigger("jsp-scroll-y",[-g,d,e]).trigger("scroll")}function s(a,b){Z&&(0>a?a=0:a>cb&&(a=cb),b===c&&(b=P.animateScroll),b?vb.animate(bb,"left",a,t):(bb.css("left",a),t(a)))}function t(a){a===c&&(a=bb.position().left),T.scrollTop(0),db=a;var d=0===db,e=db==cb,f=a/cb,g=-f*(U-R);(xb!=d||zb!=e)&&(xb=d,zb=e,b.trigger("jsp-arrow-change",[wb,yb,xb,zb])),v(d,e),Q.css("left",g),b.trigger("jsp-scroll-x",[-g,d,e]).trigger("scroll")}function u(a,b){P.showArrows&&(jb[a?"addClass":"removeClass"]("jspDisabled"),kb[b?"addClass":"removeClass"]("jspDisabled"))}function v(a,b){P.showArrows&&(pb[a?"addClass":"removeClass"]("jspDisabled"),qb[b?"addClass":"removeClass"]("jspDisabled"))}function w(a,b){var c=a/(V-S);q(c*_,b)}function x(a,b){var c=a/(U-R);s(c*cb,b)}function y(b,c,d){var e,f,g,h,i,j,k,l,m,n=0,o=0;try{e=a(b)}catch(p){return}for(f=e.outerHeight(),g=e.outerWidth(),T.scrollTop(0),T.scrollLeft(0);!e.is(".jspPane");)if(n+=e.position().top,o+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;
h=A(),j=h+S,h>n||c?l=n-P.verticalGutter:n+f>j&&(l=n-S+f+P.verticalGutter),l&&w(l,d),i=z(),k=i+R,i>o||c?m=o-P.horizontalGutter:o+g>k&&(m=o-R+g+P.horizontalGutter),m&&x(m,d)}function z(){return-Q.position().left}function A(){return-Q.position().top}function B(){var a=V-S;return a>20&&a-A()<10}function C(){var a=U-R;return a>20&&a-z()<10}function D(){T.unbind(Bb).bind(Bb,function(a,b,c,d){var e=db,f=ab;return vb.scrollBy(c*P.mouseWheelSpeed,-d*P.mouseWheelSpeed,!1),e==db&&f==ab})}function E(){T.unbind(Bb)}function F(){return!1}function G(){Q.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){y(a.target,!1)})}function H(){Q.find(":input,a").unbind("focus.jsp")}function I(){function c(){var a=db,b=ab;switch(d){case 40:vb.scrollByY(P.keyboardSpeed,!1);break;case 38:vb.scrollByY(-P.keyboardSpeed,!1);break;case 34:case 32:vb.scrollByY(S*P.scrollPagePercent,!1);break;case 33:vb.scrollByY(-S*P.scrollPagePercent,!1);break;case 39:vb.scrollByX(P.keyboardSpeed,!1);break;case 37:vb.scrollByX(-P.keyboardSpeed,!1)}return e=a!=db||b!=ab}var d,e,f=[];Z&&f.push(lb[0]),Y&&f.push(eb[0]),Q.focus(function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(b){if(b.target===this||f.length&&a(b.target).closest(f).length){var g=db,h=ab;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=b.keyCode,c();break;case 35:w(V-S),d=null;break;case 36:w(0),d=null}return e=b.keyCode==d&&g!=db||h!=ab,!e}}).bind("keypress.jsp",function(a){return a.keyCode==d&&c(),!e}),P.hideFocus?(b.css("outline","none"),"hideFocus"in T[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in T[0]&&b.attr("hideFocus",!1))}function J(){b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function K(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash);try{b=a(d)}catch(e){return}b.length&&Q.find(d)&&(0===T.scrollTop()?c=setInterval(function(){T.scrollTop()>0&&(y(d,!0),a(document).scrollTop(T.position().top),clearInterval(c))},50):(y(d,!0),a(document).scrollTop(T.position().top)))}}function L(){a("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function M(){L(),a("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var a,b=this.href.split("#");return b.length>1&&(a=b[1],a.length>0&&Q.find("#"+a).length>0)?(y("#"+a,!0),!1):void 0})}function N(){var a,b,c,d,e,f=!1;T.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){var h=g.originalEvent.touches[0];a=z(),b=A(),c=h.pageX,d=h.pageY,e=!1,f=!0}).bind("touchmove.jsp",function(g){if(f){var h=g.originalEvent.touches[0],i=db,j=ab;return vb.scrollTo(a+c-h.pageX,b+d-h.pageY),e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,i==db&&j==ab}}).bind("touchend.jsp",function(){f=!1}).bind("click.jsp-touchclick",function(){return e?(e=!1,!1):void 0})}function O(){var a=A(),c=z();b.removeClass("jspScrollable").unbind(".jsp"),b.replaceWith(Ab.append(Q.children())),Ab.scrollTop(a),Ab.scrollLeft(c)}var P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb=this,wb=!0,xb=!0,yb=!1,zb=!1,Ab=b.clone(!1,!1).empty(),Bb=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";sb=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),tb=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0),a.extend(vb,{reinitialise:function(b){b=a.extend({},P,b),e(b)},scrollToElement:function(a,b,c){y(a,b,c)},scrollTo:function(a,b,c){x(a,c),w(b,c)},scrollToX:function(a,b){x(a,b)},scrollToY:function(a,b){w(a,b)},scrollToPercentX:function(a,b){x(a*(U-R),b)},scrollToPercentY:function(a,b){w(a*(V-S),b)},scrollBy:function(a,b,c){vb.scrollByX(a,c),vb.scrollByY(b,c)},scrollByX:function(a,b){var c=z()+Math[0>a?"floor":"ceil"](a),d=c/(U-R);s(d*cb,b)},scrollByY:function(a,b){var c=A()+Math[0>a?"floor":"ceil"](a),d=c/(V-S);q(d*_,b)},positionDragX:function(a,b){s(a,b)},positionDragY:function(a,b){q(a,b)},animate:function(a,b,c,d){var e={};e[b]=c,a.animate(e,{duration:P.animateDuration,easing:P.animateEase,queue:!1,step:d})},getContentPositionX:function(){return z()},getContentPositionY:function(){return A()},getContentWidth:function(){return U},getContentHeight:function(){return V},getPercentScrolledX:function(){return z()/(U-R)},getPercentScrolledY:function(){return A()/(V-S)},getIsScrollableH:function(){return Z},getIsScrollableV:function(){return Y},getContentPane:function(){return Q},scrollToBottom:function(a){q(_,a)},hijackInternalLinks:function(){M()},destroy:function(){O()}}),e(d)}return b=a.extend({},a.fn.jScrollPane.defaults,b),a.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){b[this]=b[this]||b.speed}),this.each(function(){var c=a(this),e=c.data("jsp");e?e.reinitialise(b):(e=new d(c,b),c.data("jsp",e))})},a.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),bsp.scrollImages=function(a,b,c){el=$("#"+a),width=el.width(),offsetLeft=el.scrollLeft(),pages=Math.ceil(c/6)-1,"R"==b?(scroll_amount=offsetLeft+width,scroll_amount>width*pages&&(scroll_amount=width*pages)):(scroll_amount=offsetLeft-width,0>scroll_amount&&(scroll_amount=0)),el.animate({scrollLeft:scroll_amount},"fast")},$("html").on("click",".navbar .nav > li .dropdown-toggle",function(a){return a.preventDefault(),isResponsiveWidth()&&($(this).find("> a").hasClass("saved")||$(this).hasClass("saved"))||$(this).parents(".dropdown").hasClass("language-selector")?void 0:"click"==a.type?(document.location=$(this).find("> a").attr("href")||$(this).attr("href"),!1):void 0}),$("html").on("mouseenter mouseleave",".navbar .nav > li",function(a){"use strict";function b(){if($(c).toggleClass("active"),$(c).hasClass("dropdown")&&$(c).toggleClass("open"),"mouseenter"===a.type&&$(c).hasClass("saved")&&($(c).find(".lightboxes ul").css({maxHeight:$(window).height()<715?$(window).height()-100:615}),$(c).find(".lightboxes ul").jScrollPane()),"mouseleave"===a.type&&$(c).hasClass("saved")&&$(c).find(".lightboxes ul").jScrollPane().data().jsp.destroy(),"mouseenter"===a.type&&$(c).hasClass("account")&&$(c).find(".dropdown-menu").hasClass("contributor")){var b=0;$(c).find(".dropdown-menu.contributor .btn").each(function(a,c){b=$(c).width()>b?$(c).width():b}),$(c).find(".dropdown-menu.contributor .btn").width(b),$(c).find(".dropdown-menu.contributor .text").css({marginRight:b+20}),$(c).width()>$(c).find(".dropdown-menu").width()&&$(c).find(".dropdown-menu").width($(c).width())}}var c=this;isResponsiveWidth()||$(this).hasClass("language-selector")||("mouseenter"===a.type?(bsp.header3_timeout&&clearTimeout(bsp.header3_timeout),$(".navbar .nav li").removeClass("active open"),b()):$(this).filter(":not(.dropdown)").length?b():bsp.header3_timeout=setTimeout(function(){b(c,a)},500))}),$("html").on("mouseover",".navbar .nav .login .toggle_navbar_login",function(){$(".login_from_header_wrapper iframe").attr("src")||$(".login_from_header_wrapper iframe").attr("src",$(".login_from_header_wrapper iframe").data("src"))}),$("html").on("click",".navbar .nav .login .toggle_navbar_login",function(){return bsp.track("event",{category:"top_menu",action:"login"}),isResponsiveWidth()?!0:login({header:!0})}),$("html").on("click",".login_from_header_wrapper .close",function(){return login({header:!0})}),$("html").on("click",function(a){$(a.target).parents(".navbar .nav .login").length||$(".login_from_header_wrapper").hide()}),$(window).load(function(){Object.size(bsp.cart.latest)&&$("html").trigger("navbar_cart_draw")}),$("html").on("cart_added cart_removed navbar_cart_draw",function(){"use strict";1==Object.size(bsp.cart.latest)?$(".navbar .nav > .cart").addClass("dropdown"):0==Object.size(jsvars.cart_latest)&&$(".navbar .nav > .cart").removeClass("dropdown"),$(".navbar .nav > .cart .cart_item").remove();var a=0,b=_.sortBy(bsp.cart.latest,function(a){return-Date.parse(a.added_on)});$.each(b,function(b,c){var d=$(".navbar .dropdown.cart .cart_item_template").clone(),e=c.thumb_url||c.image;0===window.location.protocol.indexOf("https")&&"undefined"!=typeof e&&(e=e.replace(/http:\/\/(.+?)\//,"https://ssl.bigs.tc/").replace("/thumbs/","/"));var f=bsp.lang("size_id_letter_"+c.credit_cost);return 1*c.credit_cost!=6||"eps"!=c.format&&"ai"!=c.format||(f=bsp.lang("size_id_letter_v")),1*c.credit_cost!=6||"psd"!=c.format&&"pdf"!=c.format&&"png"!=c.format||(f=c.format.toUpperCase()),d.removeClass("cart_item_template").addClass("cart_item").find(".img").attr("src",e).end().find(".title").text(c.display_title||c.title).end().find(".size").html(bsp.lang("Size",{en:"Size"})+": "+f).end().show(),$(".navbar .dropdown.cart .cart_item_template").before(d),a++,4==a?!1:void 0}),b.length>4||jsvars.cart_ids.length>4?($(".navbar .dropdown.cart .cart_multi_items").show(),$(".navbar .dropdown.cart .cart_single_item").hide()):($(".navbar .dropdown.cart .cart_multi_items").hide(),$(".navbar .dropdown.cart .cart_single_item").show())}),$("html").on("lightbox-getList",function(a,b){"use strict";var c=$(".navbar .lightboxes ul"),d=!1;c.find("li").remove(),c.find(".jspContainer").remove(),"undefined"!=typeof b?($.each(b.data,function(a,b){b.default_gallery===!0&&(d=!0),c.append('<li><a href="/saved'+b.permalink+'" class="'+(1==b.default_gallery?"sprite_2 checked":"")+'"><span class="text">'+b.name+"</span></a></li>")}),c.prepend('<li><a href="/saved/" class="'+(d===!1?"sprite_2 checked":"")+'"><span class="text">'+bsp.lang("all_saved",{en:"All Saved"})+"</span></a></li>"),c.parents(".dropdown-menu").find(".divider").removeClass("hide"),$(".navbar .saved").addClass("dropdown").removeClass("no-lightboxes"),bsp.html5.localStorage()&&localStorage.setItem("has_lightboxes_"+jsvars.user.id,!0)):bsp.html5.localStorage()&&localStorage.setItem("has_lightboxes_"+jsvars.user.id,!1)}),$(function(){bsp.html5.localStorage()&&"false"==localStorage.getItem("has_lightboxes_"+jsvars.user.id)&&$(".navbar .saved").removeClass("dropdown").addClass("no-lightboxes")}),$("html").on("mouseenter mouseleave",".image-preview, [data-image-preview]",function(a){var b=this;"mouseenter"==a.type?bsp.imagePreview_obj=setTimeout(function(){imagePreview(b)},250):(bsp.imagePreview_obj&&clearTimeout(bsp.imagePreview_obj),imagePreview())}),$(function(){$("iframe#header_login").length&&postMessage_iframe_setup($("iframe#header_login"))}),$("html").on("click","button.close",function(){bsp.i_am_an_iframe?bsp.hasPostMessage?parent.postMessage("js_routes=closeModalWindows",bsp.parent_protocol+"//"+HTTP_HOST):top.location.href=top.location.href:js_routes.init("closeModalWindows")}),$(function(){jsvars.customer_support||($("#bsp_footer .footer_help .phone.online").hide(),$("#bsp_footer .footer_help .phone.offline").show())}),$("html").on("keypress",function(a){if(!$(a.target).is("input:focus")&&47==a.keyCode){$("body").scrollTop(0);var b=$("#search_keyword");b.focus();var c=b.val();return b[0].setSelectionRange(c.length,c.length),!1}}),$(function(){$(".subscriptions-header-callout.buyasub").click(function(){bsp.track("event",{category:"subscriptions header callout",action:"click"});var a=this;return setTimeout(function(){document.location=$(a).find("a").attr("href")},500),!1})}),$("html").on("mouseenter mouseleave",".sprite.question.show_cvv_tutorial",function(a){if("mouseenter"==a.type){var b=$(this).offset();bsp.cvv_enter_timeout=setTimeout(function(){bsp.cvv_timeout?bsp.cvv_timeout=clearTimeout(bsp.cvv_timeout):bsp.tooltip.show({body:$(".cvv_tutorial_template").html(),top:b.top+8,left:b.left+4,type:"top"})},200)}else bsp.cvv_timeout=setTimeout(function(){bsp.tooltip.clear(),delete bsp.cvv_timeout},500)}),jsvars.user.id||"prod"!==jsvars.run_env||(bsp.ModalPrompt=function(a,b,c){var d={triggerOn:2,template:"prompt"},c=a.extend({},d,c||{});a(document).on("search_navigation",function(){bsp.modalPrompt.urlActions(),bsp.modalPrompt.check()});var e={actions:0,show:function(){window.optimizely.push(["trackEvent","show_modal_prompt"]),bsp.track("event",{category:"modal_prompt",action:"show"}),setTimeout(function(){c.modal.call({},{template:c.template})},100),this.actions=-1,this.save()},check:function(){this.actions===c.triggerOn&&this.show()},urlActions:function(){if(!(this.actions<0)){for(var a=this,b=c.urls.length-1;b>=0;b--)-1!==c.currentPath.indexOf(c.urls[b])&&a.actions++;this.save()}},save:function(){b.set("modal_prompt_actions",this.actions,{secure:!0,sameSite:"None"})}};return e.actions="undefined"==typeof b.get("modal_prompt_actions")?0:1*b.get("modal_prompt_actions"),-1!==e.actions&&(c.currentPath&&c.urls&&e.urlActions(),e.check()),e}),!window.turn_off_default_modal_prompt){var prompt_options={currentPath:document.location.pathname,urls:["/search/"],triggerOn:2,modal:signup,template:"modal_prompt"};jsvars.user.id||"prod"!==jsvars.run_env||(bsp.modalPrompt=new window.bsp.ModalPrompt(window.$,window.Cookies,prompt_options))}$(function(){jsvars.logged_in_now&&PixelTrack("//insight.adsrvr.org/track/conv/?adv=wkmjwfks&ct=0:awo98pce&fmt=3")}),$("html").on("images_in_cart_update",function(){$(".image-block-display > .item").each(function(a,b){$.inArray($(b).data("id"),jsvars.cart_ids)>=0&&$(b).addClass("in_cart show_actions")})}),$("html").on("click",".extention-install",function(){return chrome.webstore.install(),!1}),$(function(){"undefined"!=typeof chrome&&($("body").addClass("chrome"),chrome.app&&chrome.app.isInstalled&&$("body").addClass("has-chrome-extention"))}),$(function(){$(".g-savetodrive").length&&$.getScript("https://apis.google.com/js/plusone.js")}),$(function(){$(".language-selector .dropdown-menu a").click(function(a){a.preventDefault(),window.location.search+="&lang="+$(this).data("lang")}),$(".language-selector .dropdown-toggle").on("click mouseenter mouseleave",function(a){var b;b="none"==$(this).parent().find(".dropdown-menu").css("display")?"open":"close",$(this).parents("#bsp_footer").length&&"click"==a.type?bsp.track("event",{category:"language",action:b,label:"footer"}):$(this).parents(".nav").length&&"click"!==a.type&&bsp.track("event",{category:"language",action:b,label:"header"})}),$(".language-selector .dropdown-menu a").on("click",function(){var a;$(this).parents("#bsp_footer").length?a="footer":$(this).parents(".nav").length&&(a="header"),bsp.track("event",{category:"language",action:$(this).data("lang"),label:a})}),$(".language-selector .dropdown-toggle .text").text($(".language-selector .dropdown-menu a[data-lang="+jsvars.USER_LANGUAGE+"]:first").text())}),$(window).load(function(){setTimeout(function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0018/5884.js?"+Math.floor((new Date).getTime()/36e5),a.async=!0,a.type="text/javascript",b.parentNode.insertBefore(a,b)},1)});var Countdown=function(a){var b=function(b,c){var d=this,e=a().unix(),b=a(b).unix(),f=b-e,g=1e3;this.duration=a.duration(f*g,"milliseconds"),$(function(){c.call(this,d.duration)}),this.timer=setInterval(function(){d.tick(g,c)},1e3),this.tick=function(b,c){var d=this.duration-b;this.duration=a.duration(d,"milliseconds"),c.call(this,this.duration),0>=d&&clearInterval(this.timer)}};return b}(moment);$(function(){if($(".rebillCountdown").length&&bsp.user.subscriptions.hasActiveSubscriptions()){{new Countdown(bsp.user.subscriptions.getActiveSubscriptions()[0].end_date,function(a){var b="";a.years()&&(b+=a.years()+" "+lang.year+" "),1==a.months()&&(b+=a.months()+" "+lang.month+" "),a.months()>1&&(b+=a.months()+" "+lang.months+" "),1==a.days()&&(b+=a.days()+" "+lang.day+" "),a.days()>1&&(b+=a.days()+" "+lang.days+" "),1==a.hours()&&(b+=a.hours()+" "+lang.hour+" "),a.hours()>1&&(b+=a.hours()+" "+lang.hours+" "),1==a.minutes()&&(b+=a.minutes()+" "+lang.minute+" "),a.minutes()>1&&(b+=a.minutes()+" "+lang.minutes+" "),1==a.seconds()&&(b+=a.seconds()+" "+lang.second),a.seconds()>1&&(b+=a.seconds()+" "+lang.seconds),a.days()<=0&&a.hours()<=0&&a.minutes()<=0&&a.seconds()<=0&&$(".rebillCountdown").remove(),$(".time_from").text($("<span>"+b+"</span>").text())})}$(".rebillCountdown").show()}}),function(){document.location.pathname.replace(jsvars.LANG_URL,"");PixelTrack("//802-ct.c3tag.com/c3metrics-802.js","script"),$("html").on("signup_complete",function(a,b){PixelTrack("//802-ct.c3tag.com/c3metrics-802.js?c3_type=0&account_id="+b.id+"&c3_transaction="+b.id,"script")}),$("html").on("subscription_purchase_success",function(){})}(),$(function(){$(".alert.site_down button").click(function(){Cookies.set("site_down",1,{expires:1,secure:!0,sameSite:"None"})}),Cookies.get("site_down")||$(".alert.site_down").show()}),$(window).on("load",function(){navigator.plugins&&jsvars.user.id&&_.each(navigator.plugins,function(a){a&&a.name&&a.name.indexOf("AdobeAAMDetect")>=0&&bsp.util.set_var("ccp",1,{async:!0})})}),setTimeout(function(){window.ga&&ga.create?bsp.track("event",{category:"ga_loaded_check",action:"yes"}):bsp.track("event",{category:"ga_loaded_check",action:"no"})},3e3),$(function(){var a=[];a.push($("#categories li").sort(sortListElements)),$("#categoryCol1").empty().append(a[0].slice(0,7)),$("#categoryCol2").empty().append(a[0].slice(7,14)),$("#categoryCol3").empty().append(a[0].slice(14,21)),$("#categoryCol4").empty().append(a[0].slice(21,28))}),$(document).ready(function(){$(".bsp-search-filters").on("mouseover",function(){var a=$("#a_category option:selected"),b=$("#a_category");b.html(b.find("option").sort(sortListElements)),b.find('option[value="all"]').prependTo(b),b.val(a.val())})}),$(document).on("track_sdp_event",function(a,b){b=b||{},b.hasOwnProperty("event")&&"string"==typeof b.event||log("Event type must be defined to track"),b.country=jsvars.COUNTRY_CODE_3,b.host=document.location.host,b.language=jsvars.USER_LANGUAGE,b.referer=document.referrer,b.request=document.location.href,$.post(jsvars.LANG_URL+"/track-sdp/",b)}),bsp.previewPopover=function(a,b){function c(a,b){var c={animation:!1,container:"body",html:!0,placement:"auto",trigger:"manual",template:'<div class="popover hide" style="display:none; width:348px; max-width:348px;"><div class="popover-inner"><div class="popover-content"><div></div></div></div></div>'};a.popover($.extend(c,b))}var d;$(a).on("mouseenter.popover mouseleave.popover",b.selector,function(a){var e=$(this);window.video_preview=e,"mouseenter"==a.type&&("undefined"==typeof e.data("popover")&&c(e,b),e.popover("show"),e.data("popover").$tip.css({display:"none"}),d=setTimeout(function(){e.data("popover")&&e.data("popover").$tip.css({display:"block"})},333)),"mouseleave"==a.type&&(clearTimeout(d),e.popover("hide"))})},$("html").on("bootstrap.min.js",function(){$("[data-preview-mp4], [data-preview-webm]").length&&$(function(){bsp.previewPopover(document,{selector:"[data-preview-mp4], [data-preview-webm]",container:"body",content:function(){var a=$(this).data(),b={mp4:a.previewMp4,webm:a.previewWebm,title:a.title};return b.mp4||log("previewPopover: mp4 url is missing"),b.webm?b.title||log("previewPopover: title url is missing"):log("previewPopover: webm url is missing"),'<video width="320" height="178" autoplay="" loop=""> 								<source type="video/webm" src="'+b.webm+'"> 								<source type="video/mp4" src="'+b.mp4+'"> 								<object width="320" height="180" type="application/x-shockwave-flash" id="fallback-player"> 									<param name="movie" value="/files/overlay-player.swf"> 									<param name="FlashVars" value="loop=1&video='+b.mp4+'"> 								</object> 							</video> 							<p>'+(b.title||"")+"</p>"}})})}),$(function(){$(".media-player").each(function(){_createMediaElement(this,{id:$(this).data("id"),format:$(this).data("format")})}),$(".media-player").on("error",function(){$.get("/serverside/error_log.php?code=media-element-error")})}),BSPAutoSuggest.prototype.clearTracking=function(){this.tracking_typed_terms=[],this.tracking_dropdown_positions=[],this.tracking_completed_terms=[]};var SSSuggester=function(){var a,b={fuzzy:[],exact:[],video:[]};return window.Ss=window.Ss||{},window.Ss.suggest={processSuggestion:function(b){var c,d=b[1];for(d&&d.length||(d=[]),c=0;c<d.length;c++)d[c]="exact"==bsp.autoSuggestType?b[0]+d[c]:d[c][0];a(b[0],d)}},function(c){var d=this;switch(this.client="control",this.options=c||{},this.options.type=this.options.type||"fuzzy",this.options.urls={exact:"//autocomplete.shutterstock.com/ac/?version=",fuzzy:"//autocomplete.shutterstock.com/ac/?version=fuzzy",video:"//autocompletefootage.shutterstock.com/ac/?version="},this.options.type){case"exact":this.options.url="//autocomplete.shutterstock.com/ac/?version=";break;case"video":this.options.url="//autocompletefootage.shutterstock.com/ac/?version=";break;default:case"fuzzy":this.options.url="//autocomplete.shutterstock.com/ac/?version=fuzzy"}this.getSuggestions=function(c,e,f,g){f=f.trim();var c=c||d.options.type;return f?(a=function(a,d){var f,h=[];for(f=0;f<d.length&&(h[h.length]=d[f],!(h.length>=e.maxSuggestions()));f++);g(h),b[c][a]=h},b[c][f]?void g(b[c][f]):(f=f.replace(/"/g,'\\"'),void $.ajax({dataType:"jsonp",url:d.options.urls[c]+"&q="+f+"&language="+jsvars.SEARCH_LANG,success:function(){}}))):void g([])}}}(),SSAutoSuggestNew=function(a,b){var c={image:[],video:[]};return function(d){var e=this;this.client="test";var f={endpoint:"autosuggest",language:"en",type:"image"};this.options=a.extend({},f,d||{}),this.getSuggestions=function(d,f,g,h){if(g=g.trim(),!g)return h([]);var d=d||e.options.type;return("exact"==d||"fuzzy"==d)&&(d="image"),c[d][g]?h(c[d][g]):(g=g.replace(/"/g,'\\"'),void a.getJSON(b.jsvars.LANG_URL+"/"+e.options.endpoint,{q:g,language:e.options.language,type:d},function(a){if("success"!=a.message)return log("Error received from autosuggest endpoint: "+a.error),h([]);var b=[];return a.data.length&&(b=a.data),b=b.slice(0,f.maxSuggestions()),c[d][g]=b,h(b)}).fail(function(){log("Request to autosuggest endpoint failed.")}))}}}(jQuery,window);$(document).one("attach_autosuggest",function(a,b){var c={client:"sssuggester",language:window.jsvars.USER_LANGUAGE,type:window.BSPAutoSuggest_override};if(b=$.extend({},c,b||{}),"autosuggestnew"==b.client)var d=new SSAutoSuggestNew({language:b.language,type:b.type});else var d=new SSSuggester({type:b.type});window.BSPAutoSuggest=new BSPAutoSuggest("#formsearch input.search_phrase","#search_keyword_wrapper .dropdown .selected",d).offsetTop(1).offsetLeft(1).width($("#search_keyword_wrapper #search_keyword").outerWidth()).maxSuggestions(10).suggestionSelected(function(){$("#formsearch").submit()}).init(),$(document).on("click clear_search_suggestions",function(){window.BSPAutoSuggest.clearSuggestions()})}),$(function(){window.BSPAutoSuggest_override="video"==jsvars.search_type?window.BSPAutoSuggest_override||"video":window.BSPAutoSuggest_override||"fuzzy",$(function(){$(document).trigger("attach_autosuggest",{client:"autosuggestnew"})}),window.SearchResult&&SearchResult.appendRelatedTerms("#related_header")}),function(a){a.optimizely={tests:jsvars.optimizely_tests||[],check:function(a){return this.tests.indexOf(a)>=0&&!Cookies.get(a)?!0:!1},bucket:function(a,b){this.check(a)?(Cookies.set(a,b,{sameSite:"None"}),location.reload()):console.log("Optimizely: The code you provided is not a valid test or the user is already bucketed")}}}(bsp),$(function(){!function(a){var b=a("#theme-view-more"),c=a(".theme-container .theme-hidden");b.click(function(a){a.preventDefault(),b.hide(),c.slideDown(800)}),a("#theme-email-signup").submit(function(b){b.preventDefault();var c={email:a(".theme-form-email").val(),toscheckbox:1,campaign:null},d=bigstock.emailOnlySignup(c);d.done(function(b){console.log(b),b&&1==b.status?(customerio.track(c.campaign),window.location.reload()):(a(".theme-error-message").show(),b.errors.forEach(function(b){a(".theme-error-message").append(b)}))})})}(jQuery)}),$(function(){!function(a){var b=a(".keywords-read-more"),c=a(".keyword_list.not-expanded");b.click(function(a){a.preventDefault(),c.removeClass("not-expanded"),b.remove()})}(jQuery)});var prefill=function(a){a(function(){if(window.location.href.indexOf("?")>-1){var b=document.location.search.replace("?","");b=b.indexOf("&")>-1?b.split("&"):JSON.parse('["'+b+'"]'),a.isArray(b)?b.map(function(b){var c=b.split("=");a('input[name="'+c[0]+'"], select[name="'+c[0]+'"]').val(c[1])}):console.log("Something went wrong fetching the data")}})}(jQuery);$(function(){function a(){var a=j.width();g.css({width:a}),h.css({width:a,height:a*d})}var b,c,d,e=$("body"),f=$("#modal-image-preview"),g=f.find(".modal-body"),h=g.find(".modal-crop"),i=h.find(".modal-close"),j=h.find(".modal-image"),k=$(".image-holder .image"),l=$(".bsp-image-preview").attr("src"),m=$(".image-holder .image .image-1500-url").attr("href"),n=120;f.length>0&&(j.on("load",function(){j.attr("src")===l&&(n=20),b=j[0].width,c=j[0].height-n,d=c/b,k.attr("data-toggle","modal").attr("data-target","#modal-image-preview"),$(".image-holder .image").addClass("image-ready")}),j.on("error",function(){j.attr("src",l)}),j.attr("src",m),f.click(function(){f.modal("hide")}),j.click(function(a){a.stopImmediatePropagation()}),f.on("show",function(){e.addClass("modal-open")}).on("hidden",function(){e.removeClass("modal-open")}),i.click(function(){f.modal("hide")}),f.on("shown.bs.modal",a),$(window).resize(a))});
//# sourceMappingURL=build.map