var WPush={appId:null,_sbUrl:"https://subscribe.swpush.com",_appUrl:"https://app.swpush.com",_fpUrl:"https://fp.swpush.com",_rjUrl:"https://rj.swpush.com",_tagsUrl:"https://tag.swpush.com",_uuid:null,_isReady:!1,_options:{autoShow:!0,disableDialog:!1,ttl:30,delay:0},_tmpOptions:{},_fpData:null,_tags:{},_tagTicker:null,_templates:'<div id="ppialog-popover-container" class="ppialog-popover-container ppialog-reset {ANI_CSS}" style="display: none;"><div id="ppialog-popover-dialog" class="ppialog-popover-dialog" style="{BODY_BG}"><div id="normal-popover"><div class="popover-body"><div class="popover-body-icon"><img alt="notification icon" src="{ICON_URL}"></div><div class="popover-body-message">{MESSAGE}</div><div class="clearfix"></div></div><div class="popover-footer"><button id="ppialog-popover-allow-button" class="align-right primary popover-button" style="{BTN_ALLOW_STYLE}">{BTN_ALLOW_TXT}</button><button id="ppialog-popover-cancel-button" class="align-right secondary popover-button" style="{BTN_NO_THANKS_STYLE}">{BTN_NO_THANKS_TXT}</button><div class="clearfix"></div></div></div></div></div>',addTags:function(o,t){var e={};for(var r in"string"==typeof o&&void 0!==t?e[o]=t:"object"==typeof o&&(e=o),e)e.hasOwnProperty(r)&&(WPush._tags[r]=e[r]);clearTimeout(WPush._tagTicker),WPush._tagTicker=setTimeout(WPush._tagsTicker,1e3)},setOptions:function(o){if(o){var t={};o.hasOwnProperty("disableDialog")&&(t.disableDialog=o.disableDialog||!1),o.hasOwnProperty("ttl")&&(t.ttl=o.ttl||30),o.hasOwnProperty("autoShow")&&(t.autoShow=o.autoShow||!1),o.hasOwnProperty("delay")&&(t.delay=o.delay||0),0<Object.keys(o.tags||{}).length&&WPush.addTags(o.tags),WPush._isReady?WPush._options=t:WPush._tmpOptions=t,o.appId&&null===WPush.appId&&WPush.registerServiceWorker(o.appId)}},showDialog:function(){var o=parseInt(WPush._getCookie("ppialog"));if(isNaN(o))if(WPush._options.disableDialog)WPush._subscribe();else{var t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn-dt.fcdn.info/sdialog.min.css?_=4",document.body.appendChild(t);var e=document.createElement("div");for(e.innerHTML=WPush._templates.replace("{ANI_CSS}",WPush._isMobile()?"slide-up":"slide-down");0<e.children.length;)document.body.appendChild(e.children[0]);document.getElementById("ppialog-popover-cancel-button").addEventListener("click",function(o){o.preventDefault(),document.getElementById("ppialog-popover-container").classList.add("close-popover"),WPush._setCookie("ppialog",1,WPush._options.ttl),setTimeout(function(){document.getElementById("ppialog-popover-container").remove()},1e3),WPush._post(WPush._rjUrl+"/reject",{app_id:WPush.appId,type:2},function(o){o||WPush._storeFp()})}),document.getElementById("ppialog-popover-allow-button").addEventListener("click",function(o){o.preventDefault(),WPush._subscribe(),document.getElementById("ppialog-popover-container").classList.add("close-popover"),setTimeout(function(){document.getElementById("ppialog-popover-container").remove()},1e3)})}},_storeFp:function(){WPush.appId&&WPush._uuid&&WPush._fpData&&(WPush._fpData.app_id=WPush.appId,WPush._fpData.uuid=WPush._uuid,WPush._post(WPush._fpUrl+"/fp",WPush._fpData,function(o){o||(WPush._fpData=null)}))},registerServiceWorker:function(o){if(WPush.appId=o,"serviceWorker"in navigator){var t=document.createElement("script");t.rel="application/javascript",t.src="https://cdn-dt.fcdn.info/fgpt.min.js?_=1",t.onload=function(){window.requestIdleCallback?requestIdleCallback(function(){FGPT.getV18(function(o,t){WPush._fpData={fp:o,fp_data:t},WPush._storeFp()})}):setTimeout(function(){FGPT.getV18(function(o,t){WPush._fpData={fp:o,fp_data:t},WPush._storeFp()})},500)},setTimeout(function(){document.body.appendChild(t)},500),this._post(WPush._appUrl+"/get-keys",{uuid:o,auth:"76C8208217C3AEC312DDCAA47877247A"},function(o,t){if(200===t.status){var e=JSON.parse(t.response),r={text:"We'd like to send you notifications for the latest news and updates.",allow_text:"Allow",allow_text_color:"",allow_button_color:"",deny_text:"No Thanks",deny_text_color:"",deny_button_color:"",bg_color:"",icon_url:"data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%2239.5%22%20height%3D%2240.5%22%20viewBox%3D%220%200%2079%2081%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ctitle%3Eppialog-Bell%3C%2Ftitle%3E%3Cg%20fill%3D%22%23BBB%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M39.96%2067.12H4.12s-3.2-.32-3.2-3.36%202.72-3.2%202.72-3.2%2010.72-5.12%2010.72-8.8c0-3.68-1.76-6.24-1.76-21.28%200-15.04%209.6-26.56%2021.12-26.56%200%200%201.6-3.84%206.24-3.84%204.48%200%206.08%203.84%206.08%203.84%2011.52%200%2021.12%2011.52%2021.12%2026.56s-1.6%2017.6-1.6%2021.28c0%203.68%2010.72%208.8%2010.72%208.8s2.72.16%202.72%203.2c0%202.88-3.36%203.36-3.36%203.36H39.96zM27%2070.8h24s-1.655%2010.08-11.917%2010.08S27%2070.8%2027%2070.8z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E",btn_allow_styles:"",btn_deny_styles:""};if(e.hasOwnProperty("prompt")&&(e.prompt.hasOwnProperty("text")&&(r.text=e.prompt.text||r.text),e.prompt.hasOwnProperty("allow_text")&&(r.allow_text=e.prompt.allow_text||r.allow_text),e.prompt.hasOwnProperty("allow_text_color")&&(r.allow_text_color=e.prompt.allow_text_color||r.allow_text_color,""!==r.allow_text_color&&(r.btn_allow_styles="color:"+r.allow_text_color+" !important;")),e.prompt.hasOwnProperty("allow_button_color")&&(r.allow_button_color=e.prompt.allow_button_color||r.allow_button_color,""!==r.allow_button_color&&(r.btn_allow_styles+="background-color:"+r.allow_button_color+" !important;")),e.prompt.hasOwnProperty("deny_text")&&(r.deny_text=e.prompt.deny_text||r.deny_text),e.prompt.hasOwnProperty("deny_text_color")&&(r.deny_text_color=e.prompt.deny_text_color||r.deny_text_color,""!==r.deny_text_color&&(r.btn_deny_styles="color:"+r.deny_text_color+" !important;")),e.prompt.hasOwnProperty("deny_button_color")&&(r.deny_button_color=e.prompt.deny_button_color||r.deny_button_color,""!==r.deny_button_color&&(r.btn_deny_styles+="background-color:"+r.deny_button_color+" !important;")),e.prompt.hasOwnProperty("bg_color")&&(r.bg_color=e.prompt.bg_color||r.bg_color,""!==r.bg_color&&(r.bg_color="background-color:"+r.bg_color+" !important;")),e.prompt.hasOwnProperty("icon_url")&&(r.icon_url=e.prompt.icon_url||r.icon_url),e.prompt.hasOwnProperty("ttl")&&(WPush._options.ttl=e.prompt.ttl),e.prompt.hasOwnProperty("disable_dialog")&&(WPush._options.disableDialog=e.prompt.disable_dialog),e.prompt.hasOwnProperty("delay")&&(WPush._options.delay=e.prompt.delay),e.prompt.hasOwnProperty("auto_show")&&(WPush._options.autoShow=e.prompt.auto_show)),WPush._templates=WPush._templates.replace("{MESSAGE}",r.text).replace("{BTN_ALLOW_TXT}",r.allow_text).replace("{BTN_NO_THANKS_TXT}",r.deny_text).replace("{BTN_ALLOW_STYLE}",r.btn_allow_styles).replace("{BTN_NO_THANKS_STYLE}",r.btn_deny_styles).replace("{BODY_BG}",r.bg_color).replace("{ICON_URL}",r.icon_url),e.hasOwnProperty("public_key")){var s=Object.keys(WPush._tmpOptions);for(var n in s){var i=s[n];WPush._options[i]=WPush._tmpOptions[i]}WPush.publicKey=e.public_key,WPush._isReady=!0;var a=WPush._options.delay;isNaN(a)&&(a=1e3),setTimeout(function(){WPush._init()},a)}}else console.error("Something went wrong")})}else console.log("Service workers are not supported in this browser.")},_init:function(){"serviceWorker"in navigator?navigator.serviceWorker.register("/smart-worker.js?app="+WPush.appId).then(function(){WPush._initializeState()}).catch(function(o){console.error("ServiceWorker registration failed.",o)}):console.log("Service workers are not supported in this browser.")},_initializeState:function(){"showNotification"in ServiceWorkerRegistration.prototype?"denied"!==Notification.permission?"PushManager"in window?navigator.serviceWorker.ready.then(function(o){o.pushManager.getSubscription().then(function(o){o?WPush._sendSubscriptionToServer(o,!0):WPush._options.autoShow&&WPush.showDialog()}).catch(function(o){console.error("Error during getSubscription()",o)})}).catch(function(o){console.error("Error serviceWorker ready",o)}):console.error("Push messaging is not supported."):console.error("The user has blocked notifications."):console.error("Notifications are not supported.")},_subscribe:function(){function t(){WPush._unsubscribe()}function e(){navigator.serviceWorker.ready.then(function(o){o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:WPush._buildApplicationServerKey()}).then(function(o){WPush._sendSubscriptionToServer(o,!1)}).catch(function(o){console.error("Unable to subscribe to messaging server.",o)})})}"denied"!==Notification.permission?"default"!==Notification.permission?e():Notification.requestPermission().then(function(o){if("granted"!==o)return WPush._post(WPush._rjUrl+"/reject",{app_id:WPush.appId,type:1},function(o){o||WPush._storeFp()}),void t();e()}):t()},_unsubscribe:function(){navigator.serviceWorker.ready.then(function(o){o.pushManager.getSubscription().then(function(o){o&&o.unsubscribe().then(function(){WPush._subscribe()}).catch(function(o){console.error("Unable to unsubscribe to messaging server.",o)})}).catch(function(o){console.error("Error during getSubscription()",o)})})},_isMobile:function(){var o,t=!1;return o=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)))&&(t=!0),t},_buildApplicationServerKey:function(){var o=WPush.publicKey.replace(/-/g,"+").replace(/_/g,"/"),t=atob(o).split("").map(function(o){return o.charCodeAt(0)});return new Uint8Array(t)},_post:function(o,t,e){var r=new XMLHttpRequest;r.open("POST",o),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){if(200===r.status){var o=JSON.parse(r.response);o.hasOwnProperty("uuid")&&(WPush._uuid=o.uuid),o.hasOwnProperty("unsubscribe")&&WPush._unsubscribe(),e&&e(null,r)}else 200!==r.status&&(console.error("Something went wrong"),e&&e("Something went wrong"))},r.send(JSON.stringify(t))},_tagsTicker:function(){if(WPush._uuid){var t={};for(var o in WPush._tags)WPush._tags.hasOwnProperty(o)&&(t[o]=WPush._tags[o],delete WPush._tags[o]);0<Object.keys(t).length&&WPush._post(WPush._tagsUrl+"/set-tags/"+WPush._uuid,t,function(o){o&&(WPush._tags=t)})}},_sendSubscriptionToServer:function(o,t){var e=o.toJSON();e.app_id=WPush.appId,e.subscribed=t,clearTimeout(WPush._tagTicker);var r={};for(var s in WPush._tags)WPush._tags.hasOwnProperty(s)&&(r[s]=WPush._tags[s],delete WPush._tags[s]);e.tags=r,WPush._post(WPush._sbUrl+"/subscribe",e,function(o){o&&(WPush._tags=r),WPush._tagTicker=setTimeout(WPush._tagsTicker,1e3),WPush._storeFp()})},_setCookie:function(o,t,e){var r=new Date;r.setTime(r.getTime()+60*e*1e3);var s="expires="+r.toUTCString(),n=location.hostname.substring(location.hostname.lastIndexOf(".",location.hostname.lastIndexOf(".")-1)+1);~location.host.indexOf("localhost")||(n="."+n),document.cookie=o+"="+t+";domain="+n+";"+s+";path=/"},_getCookie:function(o){for(var t=o+"=",e=decodeURIComponent(document.cookie).split(";"),r=0;r<e.length;r++){for(var s=e[r];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}};document.addEventListener("DOMContentLoaded",function(){window.w_push_options?WPush.setOptions(window.w_push_options):window.spAppId&&WPush.registerServiceWorker(window.spAppId)});