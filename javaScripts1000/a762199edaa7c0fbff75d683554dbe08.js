var SCal=function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}var t,l=function(){function e(){i(this,e),o(this,"type",2),o(this,"setCookie",function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);i="Expires="+i.toUTCString();document.cookie=e+"="+t+"; Path=/; "+i+";"}),o(this,"getCookie",function(e){for(var t,n=e+"=",i=decodeURIComponent(document.cookie).split(";"),r=0;r<i.length;r++){for(t=i[r];" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return""}),"undefined"!=typeof Storage&&(this.type=1)}return s(e,[{key:"set",value:function(e,t){return 1===this.type?window.localStorage.setItem(e,t):this.setCookie(e,t),this}},{key:"get",value:function(e){return 1===this.type?window.localStorage.getItem(e):this.getCookie(e)}},{key:"del",value:function(e){return 1===this.type?window.localStorage.removeItem(e):document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",this}},{key:"getType",get:function(){return this.type}}]),e}(),u=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"SCal";i(this,t),o(this,"_prefix","SCal"),o(this,"_enabled",!1),this._prefix=e}return s(t,[{key:"enabled",value:function(e){this._enabled=e}},{key:"emit",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this._enabled&&(t=new CustomEvent(this._prefix+"."+e,{bubbles:!0,cancelable:!0,detail:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t)}),document.dispatchEvent(t))}}]),t}(),n=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(i(this,n),o(this,"isSupported",!1),o(this,"sid",void 0),o(this,"storageManager",new l),o(this,"eventsManager",new u),o(this,"isReady",!1),o(this,"callbacks",{beforeOpen:null,afterOpen:null}),o(this,"cKey",void 0),o(this,"defaultOptions",{delay:500,enabled:!0,events:!0,display:!0,cUrl:"",container:"",style:""}),!e||36!==e.length)throw new Error("Calendar ID not present or wrong.");this.cKey=e,this.sid=this.storageManager.get("c_sid"),this.defaultOptions=Object.assign(this.defaultOptions,t),this.eventsManager.enabled(this.defaultOptions.events),this.isSupported=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.start(function(){})}return s(n,[{key:"start",value:function(e){var n=this;return this.isSupported?void this.request(function(e,t){return e?(console.error(e),void n.eventsManager.emit("unsupported")):t.c_url&&t.custom_prompt.html&&t.custom_prompt.style?(n.sid=t.s,n.storageManager.set("c_sid",t.s),n.defaultOptions.enabled=t.enabled||n.defaultOptions.enabled,n.defaultOptions.cUrl=t.c_url,n.defaultOptions.display=t.display||n.defaultOptions.display,n.defaultOptions.events=t.events||n.defaultOptions.events,n.defaultOptions.container=t.custom_prompt.html||n.defaultOptions.container,n.defaultOptions.style=t.custom_prompt.style||n.defaultOptions.style,n.isReady=!0,void(t.subscribed?n.eventsManager.emit("subscribed"):n.defaultOptions.display&&n.displayPrompt({delay:n.defaultOptions.delay||500}))):void n.eventsManager.emit("empty_response")}):(this.eventsManager.emit("unsupported"),void(e&&e()))}},{key:"displayPrompt",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!this.isReady)return!1;e.events&&this.eventsManager.enabled(e.events),e=Object.assign(this.defaultOptions,e);var n=document.createElement("style");n.innerHTML=this.defaultOptions.style;var i=document.createElement("div");i.id="Alert7",i.innerHTML=this.defaultOptions.container,document.body.appendChild(n),document.body.appendChild(i);var r=document.getElementsByClassName("alert7-action-item"),s=document.getElementsByClassName("alert7-action-cancel"),n=window.location.hostname.split("."),i=n[2<n.length?1:0];0<i.length&&((n=document.getElementById("alert7-hostname"))&&(n.innerText=i.toUpperCase()));for(var o=this,a=0;a<r.length;a++)r[a].addEventListener("click",function(){var e=document.getElementById("Alert7");e&&e.remove(),t.eventsManager.emit("beforeOpen"),t.callbacks.beforeOpen&&t.callbacks.beforeOpen(),location.href=o.defaultOptions.cUrl,t.eventsManager.emit("afterOpen"),t.callbacks.afterOpen&&t.callbacks.afterOpen()},!1);for(var l=0;l<s.length;l++)s[l].addEventListener("click",function(){var e=document.getElementById("Alert7");e&&e.remove(),t.eventsManager.emit("beforeOpen"),t.callbacks.beforeOpen&&t.callbacks.beforeOpen(),t.eventsManager.emit("afterOpen"),t.callbacks.afterOpen&&t.callbacks.afterOpen()},!1);return setTimeout(function(){var e=document.getElementById("Alert7");e&&(e.style.display="block")},e.delay),!0}},{key:"request",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",n=encodeURIComponent(window.location.href),i="https://eventsist.com/cal/1118208217C3AEC312DDCAA47877247A?c="+this.cKey+"&s="+this.sid+"&ref="+n,r=new XMLHttpRequest;r.responseType="json",r.onreadystatechange=function(){var e;r.readyState===XMLHttpRequest.DONE&&(200<=(e=r.status)&&e<400?t&&t(void 0,r.response):t&&t("cRequest error."))},r.open(e,i),r.setRequestHeader("ref",n),r.send()}}]),n}();return null===(null===(t=document.currentScript)||void 0===t?void 0:t.getAttribute("async"))||(t=document.currentScript)&&""!==(t.getAttribute("id")||"")&&new n(t.getAttribute("id")||"",{events:"true"===(t.getAttribute("data-events")||"true")}),e.Init=n,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
