define("components/sharedUI/loadingSpinner",["FR","jquery","spin"],function(n,e,i){var s={spinners:[],autoDismisses:[],lastFocused:null,startTime:null,options:{lines:11,length:7,width:4,radius:14,scale:1,corners:1,rotate:0,direction:1,speed:1.1,trail:64,fps:20,className:"loading_spinner",shadow:!1,hwaccel:!0,autoDismiss:!1,dismissTimeLimit:45e3,inTime:0,focusOnComplete:null}},t={overlay:e("#loading_spinner_template")},o={startLoading:function(n,t){var a=o.getElement(n),r=o.getIndex(n);void 0===n||o.isSet(r)||(s.options=e.extend(s.options,t),o.appendOverlay(a,t),s.spinners[r]=new i(s.options).spin(a[0]),o.setAutoDismiss(n),o.setMinDiplayTime(),s.lastFocused=document.activeElement,o.setFocus(e(".loading_spinner__loading")))},appendOverlay:function(n,e){n.css("position","relative").append(_.template(t.overlay.html())({options:e}))},setMinDiplayTime:function(){var n=s.options.minTime;_.isNumber(n)&&n>0&&(s.startTime=new Date)},setAutoDismiss:function(n){if(s.options.autoDismiss){var e=o.getIndex(n);s.autoDismisses[e]=setTimeout(function(){o.isSet(e)&&o.stopLoading(n)},s.options.dismissTimeLimit)}},clearAutoDismiss:function(n){o.isSet(n)&&(clearTimeout(s.autoDismisses[n]),delete s.autoDismisses[n])},stopLoading:function(n){if(s.startTime){var e=s.options.minTime-(new Date-s.startTime);_.delay(function(){s.startTime=null,o.unloadSpinner(n)},e)}else o.unloadSpinner(n)},unloadSpinner:function(n){var i=o.getElement(n),t=o.getIndex(n);o.isSet(t)&&(s.spinners[t].stop(),o.removeOverlay(i),o.clearAutoDismiss(t),delete s.spinners[t],s.options.focusOnComplete?o.setFocus(e(s.options.focusOnComplete)):o.setFocus(s.lastFocused))},removeOverlay:function(n){n.css("position","").find(".loading_spinner").remove()},getElement:function(n){return"string"==typeof n?e(n).first():n.first()},getIndex:function(n){return"string"==typeof n?n:n.first()[0].className},isSet:function(n){return void 0!==s.spinners[n]},setFocus:function(n){n&&setTimeout(function(){n.focus()},0)}},a={init:function(){a.setWatches()},setWatches:function(){n.$el.window.on("loading-spinner-on",function(n,e,i){o.startLoading(e,i)}),n.$el.window.on("loading-spinner-off",function(n,e){o.stopLoading(e)})}};e(function(){return a.init()})});
//# sourceMappingURL=loadingSpinner.js.map
