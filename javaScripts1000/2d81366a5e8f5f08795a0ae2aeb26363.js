(function(){(function(){var w=/%20/g,k={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};function b(e,t){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}function l(){var e={};if(location.search!=="")for(var t=location.search.replace("?","").split("&"),o=0;o<t.length;o++){var n=t[o].split("="),i=n[0],c=n[1];!c||(i=decodeURIComponent(i).replace(/[^a-zA-Z0-9-_]/gi,""),c=decodeURIComponent(c),i in e?(Array.isArray(e[i])||(e[i]=[e[i]]),e[i].push(c)):e[i]=c)}return e}function a(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),c_start!=-1)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),decodeURIComponent(document.cookie.substring(c_start,c_end))):""}function s(e,t,o){var n=document.location.host.toLowerCase().split(":")[0],i=n.split("."),c=[];if(i.length==1){var r=new Date;r.setDate(r.getDate()+o),document.cookie=e+"="+escape(t)+(o==null?"":";expires="+r.toUTCString())+";path=/"}else for(var f=i.length-1;f>=0;f--){c.push(i[f]);var j="."+c.slice().reverse().join("."),r=new Date;if(r.setDate(r.getDate()+o),document.cookie=e+"="+escape(t)+(o==null?"":";expires="+r.toUTCString())+";domain="+j+";path=/",a(e)==t)break}}function p(e){s(e,"",-1)}function y(e){return _(e)==="function"}function _(e){return e==null?String(e):k[Object.prototype.toString.call(e)]||"object"}function C(e){typeof console!="undefined"&&console.warn("_cio: "+e)}function N(e){var t=[],o=function(i,c){c=y(c)?c():c,t[t.length]=encodeURIComponent(i)+"="+encodeURIComponent(c)};for(var n in e)e.hasOwnProperty(n)&&g(n,e[n],o);return t.join("&").replace(w,"+")}function g(e,t,o){if(t!=null&&typeof t=="object")for(var n in t)t.hasOwnProperty(n)&&g(e+"["+n+"]",t[n]==null?"":t[n],o);else o(e,t)}function R(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function U(){var e=R();return s(_cio.cookieNamespace+"anonid",e,365),e}function A(e){try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function m(){var e=a("ajs_anonymous_id");return e&&e!==""?A(e):a(_cio.cookieNamespace+"anonid")}function h(){return a(_cio.cookieNamespace+"id")}function I(e,t){var o,n,i=document.getElementById("cio-tracker");return i&&(n=i.getAttribute("data-site-id"),o=i.src.replace("assets.customer.io",_cio._trackUrl),o=o.replace("/assets/track.js","/events/"+e+".gif"),o=o.replace(/\/events\/.*\.gif/,"/events/"+e+".gif"),o=o.replace(/^(http|https):/,""),o=o.replace(/^\/\//,""),t.site_id=n,t.timestamp=new Date().getTime(),o[o.length-1]!=="?"&&(o+="?"),o+=N(t)),location.protocol?location.protocol+"//"+o:"https://"+o}function S(){if(!a(_cio.cookieNamespace)){if(s(_cio.cookieNamespace,"test",1),!a(_cio.cookieNamespace))return!1;s(_cio.cookieNamespace,"",-1)}return!0}function O(e,t){t.c=h(),t.c?t.s=m():(t.s=m(),!t.s&&S()&&e!=="identify"&&(t.s=U()));var o=new Image;o.src=I(e,t),_cio.images.push(o)}function d(e,t){_cio.pageHasLoaded?O(e,t):setTimeout(function(){d(e,t)},50)}if(_(_cio)=="array"){var v=_cio.slice(0);_cio={_version:"afbf83bb",_trackUrl:"track.customer.io",images:[],pageHasLoaded:!1,cookieNamespace:"_cio",load:function(){_cio.pageHasLoaded=!0},push:function(e){var t=e.shift();_cio[t].apply(this,e)},identify:function(e){var t=e.id||e.id_secure;if(typeof t=="undefined"||t===null||t.length===0){C("id can't be empty. This identify call will not be tracked.");return}s(_cio.cookieNamespace+"id",t,365),d("identify",{user:e})},sidentify:function(e){e._secure=!0,_cio.identify(e)},track:function(e,t){d("event",{name:e,data:t||{}})},page:function(e,t){var o=b(t||{},l());d("page",{name:e,data:o})},cookie:function(e){_cio.cookieNamespace=e},reset:function(){_cio.images=[],p(_cio.cookieNamespace+"id"),p(_cio.cookieNamespace+"anonid")}},function(){var e={width:window.innerWidth,height:window.innerHeight},t=h();if(!t){var o=l();if("_cio_id"in o&&o._cio_id){var n=o._cio_id;Array.isArray(n)&&(n=n[n.length-1]),n&&_cio.identify({id:"cio_"+n})}}document.referrer&&document.referrer!=""&&(e.referrer=document.referrer),_cio.page(document.location.href,e)}();for(var u=0;u<v.length;u++)_cio.push(v[u]);document.readyState==="complete"?_cio.load():window.addEventListener?window.addEventListener("load",_cio.load,!1):window.attachEvent?window.attachEvent("onload",_cio.load):_cio.load()}})();})();
