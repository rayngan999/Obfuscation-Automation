/*!
----------------------------------------------------------------------------------------------------
* Important! - To edit this JS, you must use the JS source file.
----------------------------------------------------------------------------------------------------
*/
"use strict";function init_wishlist(){$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(e){if(e.length){if(my_wishlist=JSON.parse(e[0].wishlistProducts),p_wl=Object.keys(my_wishlist).length,$("#total-wishlist").html(p_wl),$("#wishlist-wrapper").length){var t="";0==p_wl&&(t="<p>AÃºn no tienes productos en tu lista de deseos</p>"),$("#wishlist-wrapper").html('<div id="wl-container">'+t+"</div>"),load_wishlist(),setTimeout(function(){get_total_wishlist()},2e3),$(".sideMenu a").each(function(){var e=$(this).attr("href");if(-1!=e.indexOf("?")){var e=e.substring(0,e.indexOf("?"));$(this).attr("href",e)}})}if($("body.produto").length){var i=$("#___rc-p-id").val();null!=my_wishlist["p"+i]&&$(class_pdp).addClass("active")}}else $("#wishlist-wrapper").length&&($("#wishlist-wrapper").html('<div class="re-central"><div id="#wl-container"><h2>No hay productos en tu lista de deseos</h2></div></div>'),$(".sideMenu a").each(function(){var e=$(this).attr("href");if(-1!=e.indexOf("?")){var e=e.substring(0,e.indexOf("?"));$(this).attr("href",e)}}))}),$("body").on("click",class_pdp,function(e){e.preventDefault(),that=$(this);var t=$("#___rc-p-id").val();that.hasClass("active")?update_wishlist(t,"remove"):update_wishlist(t,"add")}),$("body").on("click",class_item,function(e){e.preventDefault();var t=$(this),i=t.attr("data-id");t.hasClass("active")?update_wishlist(i,"remove"):update_wishlist(i,"add")}),$(class_item).not(".checked").each(function(){var e=$(this),t=e.attr("data-id");e.addClass("checked"),is_in_wishlist(t)}),$(document).ajaxComplete(function(e,t,i){-1!=i.url.indexOf("/buscapagina")&&$(class_item).not(".checked").each(function(){var e=$(this),t=e.attr("data-id");e.addClass("checked"),is_in_wishlist(t)})})}function load_wishlist(){$.each(my_wishlist,function(e,t){$("#wl-container").addClass("product-list grid-view grid-small").append('<div id="wl-wrapper-'+t.id+'" class="wl-wrapper"></div>'),load_product_wl(t.id)})}function load_product_wl(e){$.ajax({url:"/buscapagina?fq=productId:"+e+"&sl="+sl+"&cc=1&sm=0",success:function(t,i,a){(i=0==a.responseText.length)&&update_wishlist(e,"remove"),t.length&&(t=$(t).find('>ul:first-child>li:not(".helperComplement")'),$("#wl-wrapper-"+e).html(t),sameHeight())}})}function get_total_wishlist(){""!=profile_email&&$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(e){e.length?(my_wishlist=JSON.parse(e[0].wishlistProducts),p_wl=Object.keys(my_wishlist).length,$("#total-wishlist").html(p_wl)):$("#total-wishlist").html("0")})}function update_wishlist(e,t){""!=profile_email&&$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(i){if(i.length){if(my_wishlist=JSON.parse(i[0].wishlistProducts),"remove"==t){delete my_wishlist["p"+e];var a=JSON.stringify(my_wishlist)}else if("add"==t){var s="p"+e,o={};o[s]={id:e},$.extend(my_wishlist,o);var a=JSON.stringify(my_wishlist)}}else{var s="p"+e,o={};o[s]={id:e};var a=JSON.stringify(o)}var n={};n.email=profile_email,n.wishlistProducts=a,$.ajax({accept:"application/vnd.vtex.ds.v10 json",contentType:"application/json; charset=utf-8",crossDomain:!0,data:JSON.stringify(n),type:"PUT",url:"/api/dataentities/WL/documents",success:function(){"remove"==t?($(class_pdp).removeClass("active"),$(class_item+'[data-id="'+e+'"]').removeClass("active")):($(class_pdp).addClass("active"),$(class_item+'[data-id="'+e+'"]').addClass("active")),get_total_wishlist()}})})}function is_in_wishlist(e){$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(t){t.length&&(my_wishlist=JSON.parse(t[0].wishlistProducts),"undefined"!=typeof my_wishlist["p"+e]&&$(class_item+'[data-id="'+e+'"]').addClass("active"))})}var my_wishlist="",p_wl="",profile_email="",accountname=jsnomeLoja,sl="d9ae3c98-5948-4cd4-afe7-fe2061eb26e3",class_item=".product-item__wishlist",class_pdp=".product-detail__add-to-wishlist";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){return r.raw?e:encodeURIComponent(e)}function i(e){return r.raw?e:decodeURIComponent(e)}function a(e){return t(r.json?JSON.stringify(e):String(e))}function s(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(n," ")),r.json?JSON.parse(e):e}catch(e){}}function o(t,i){var a=r.raw?t:s(t);return e.isFunction(i)?i(a):a}var n=/\+/g,r=e.cookie=function(s,n,l){if(arguments.length>1&&!e.isFunction(n)){if(l=e.extend({},r.defaults,l),"number"==typeof l.expires){var c=l.expires,d=l.expires=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*c)}return document.cookie=[t(s),"=",a(n),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var u=s?void 0:{},h=document.cookie?document.cookie.split("; "):[],v=0,g=h.length;g>v;v++){var p=h[v].split("="),m=i(p.shift()),f=p.join("=");if(s===m){u=o(f,n);break}s||void 0===(f=o(f))||(u[m]=f)}return u};r.defaults={},e.removeCookie=function(t,i){return e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t)}}),$(function(){vtexid.setScope("50fef15e-1468-4fe9-a8e8-267c6ed6670a"),vtexid.setScopeName(jsnomeLoja),vtexjs.checkout.getOrderForm().done(function(e){null!=e.clientProfileData&&null!=e.clientProfileData.email&&e.loggedIn?(profile_email=e.clientProfileData.email,init_wishlist()):$("body").on("click",class_item+", "+class_pdp,function(e){e.preventDefault(),vtexid.start({locale:"es-MX",forceReload:!1}),$("html,body").animate({scrollTop:0},"slow")})})});
//# sourceMappingURL=css-js_wishlist.min.js.map