var QueueIt;function queueClient(e,t,i){var o;return 5<=arguments.length&&(o=arguments[4]),"object"==typeof i&&(o=i),o=o||new QueueIt.Javascript.Options,null==i||isNaN(i)||(o.validity=Number(i)),null!=arguments[3]&&"string"==typeof arguments[3]&&(o.culture=arguments[3]),new QueueIt.Javascript.QueueClient(e,t,o)}!function(e){(e.Javascript||(e.Javascript={})).Version="2.0.26"}(QueueIt=QueueIt||{}),function(e){var t,i,o;function n(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.queryStringPrefix=t||"",this.client=e,this.urlUtil=i,this.urlUtil||(this.urlUtil={getPathName:function(){return document.location.pathname},getSearch:function(){return document.location.search},getHash:function(){return document.location.hash},replaceHistory:function(e){return window.history.replaceState(window.history.state,document.title,e)}})}t=e.Javascript||(e.Javascript={}),i=t.Addons||(t.Addons={}),n.prototype.removeTokenFromUrl=function(){if(window.history&&window.history.replaceState){var e=this.urlUtil.getSearch(),t="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}";e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=this.tryRemoveQueueITToken(e)).replace(this.generateRegex("q",t),"$1")).replace(this.generateRegex("p",t),"$1")).replace(this.generateRegex("h","[0-9a-f]{32}"),"$1")).replace(this.generateRegex("rt","[a-z]+"),"")).replace(this.generateRegex("ts","\\d+"),"$1")).replace(this.generateRegex("e","[a-z0-9]{3,20}"),"$1")).replace(this.generateRegex("c",this.client.getCustomerId()),"$1")).replace(/\?$/,"")).replace(/&$/,"")).replace(/\?#/,"#");var i=this.urlUtil.getPathName()+e+this.urlUtil.getHash();i=i||"/",this.urlUtil.replaceHistory(i)}},n.prototype.tryRemoveQueueITToken=function(e){var t=new RegExp("([?&])(queueittoken=([a-z0-9]|-|_|~)*&?)","i");return e=e.replace(t,"$1")},n.prototype.generateRegex=function(e,t){return void 0===t&&(t="[^&]+"),new RegExp("([?&])("+this.queryStringPrefix+e+"="+t+"&?)","i")},o=n,i.token=o}(QueueIt=QueueIt||{}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),function(l){!function(a){var o=(e.prototype.add=function(e){this.clients.push(e),this[e.getEventId()]=e},e.prototype.getAll=function(){return this.clients},e);function e(){this.clients=new Array}a.QueueClientCustomerRepo=o;var n=(t.prototype.set=function(e,t,i){this[e]||(this[e]=new o),this[e].add(i)},t.prototype.get=function(e){return this[e]},t);function t(){}a.QueueClientRepository=n;var r=(i.prototype.addTargetUrlParam=function(e,t){this.targetUrlParams.push(new s(e,t))},i);function i(){this.targetUrlParams||(this.targetUrlParams=new Array)}a.Options=r;var s=function(e,t){if(this.key=e,this.value=t,!e||!e.match("^[a-zA-Z0-9_]+$"))throw new Error("Target URL parameter key '"+e+"' is invalid")};a.TargetUrlParam=s;function u(){}a.RedirectOptions=u;var c=(h.prototype.initialize=function(e,t){var i=this;this.options.removeTokenFromUrl&&this.hasBeenThroughQueue(this.getCurrentUrl())&&new a.Addons.token(this,this.options.queryStringPrefix).removeTokenFromUrl();var o=this.cookieManager.getValidationState();if(this.queueitTokenExist(this.getCurrentUrl())?this.queueClientIsEnabled=!0:"verified"===o?(this.options.extendValidity&&this.cookieManager.extendCookie(this.validity),this.queueClientIsVerified=!0,this.queueClientIsEnabled=!0,this.executeCallback(this.options.onVerified)):"disabled"!==o||this.hasBeenThroughQueue(this.getCurrentUrl())?"timeout"!==o||this.hasBeenThroughQueue(this.getCurrentUrl())?this.queueClientIsEnabled=this.cookieManager.cookieIsEnabled():(this.queueClientIsEnabled=!1,this.executeCallback(this.options.onTimeout)):(this.queueClientIsEnabled=!1,this.executeCallback(this.options.onDisabled)),!this.queueClientIsVerified&&this.queueClientIsEnabled){var n=this.cookieManager.getQueueStateCookie(),r=document.createElement("script");r.type="text/javascript",r.src="https://"+this.options.host+"/javascriptqueue/"+e+"/"+t+"/"+(new Date).getTime()+"?t="+encodeURIComponent(this.getTargetUrl())+"&ver=js"+l.Javascript.Version+(this.language?"&cid="+this.language:"")+(this.layoutName?"&l="+encodeURIComponent(this.layoutName):"")+(n?"&_cval="+encodeURIComponent(n)+"&_cv="+this.options.validity:"")+this.generateTargetUrlParams(),r.async=!0;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(r,s),this.timeoutTimer=setTimeout(function(){i.cookieManager.setTimeoutState(),i.executeCallback(i.options.onTimeout)},5e3)}},h.prototype.getCustomerId=function(){return this.customerId},h.prototype.getEventId=function(){return this.eventId},h.prototype.enqueue=function(e){if(e&&(clearTimeout(this.timeoutTimer),!this.queueClientIsVerified&&this.queueClientIsEnabled))if(e.redirect)this.options.redirector(e.redirectUrl);else if(e.isError)this.executeCallback(this.options.onDisabled);else{this.cookieManager.setCookieValue(e.cookieValue,e.fixedCookieValidity||this.validity);var t=this.cookieManager.getValidationState();if("disabled"!=t&&!e.isError){if("verified"==t)return this.queueClientIsVerified=!0,void this.executeCallback(this.options.onVerified);throw"queueit could not set cookie."}this.executeCallback(this.options.onDisabled)}},h.prototype.cancel=function(e){void 0===e&&(e=null),this.cancelSession(),this.cancelQueueItem(e)},h.prototype.cancelSession=function(){this.cookieManager.cancelCookie()},h.prototype.cancelQueueItem=function(e){void 0===e&&(e=null);var t="//"+this.options.host+"/cancel/"+this.customerId+"/"+this.eventId+"?t="+encodeURIComponent(window.location.href);e&&(t=t+"&r="+encodeURIComponent(e)),this.options.redirector(t)},h.prototype.getTargetUrl=function(){var e=this.getCurrentUrl();return this.hasBeenThroughQueue(e)?e:this.options.useEventTargetUrl?"":this.targetUrl?this.targetUrl:e},h.prototype.generateTargetUrlParams=function(){if(!this.options.useEventTargetUrl||!this.options.targetUrlParams)return"";for(var e="",t=0;t<this.options.targetUrlParams.length;t++){var i=this.options.targetUrlParams[t];e+="&t_"+i.key+"="+encodeURIComponent(i.value)}return e},h.prototype.getCurrentUrl=function(){return this.options.currentUrl},h.prototype.hasBeenThroughQueue=function(e){return e.match("[?&][a-zA-Z]{0,4}q=[0-9a-f-]{36}.*&[a-zA-Z]{0,4}h=[0-9a-f]{32}")||-1<e.toLowerCase().indexOf("queueittoken")},h.prototype.queueitTokenExist=function(e){return-1<e.toLowerCase().indexOf("queueittoken")},h.prototype.executeCallback=function(e){if(e)try{e()}catch(e){window.console&&window.console.error("Error in onVerified callback: "+e.message)}},h);function h(e,t,i){this.queueClientIsEnabled=!1,this.queueClientIsVerified=!1,this.timeoutTimer=null,this.customerId=e.toLowerCase().trim(),this.eventId=t.toLowerCase().trim(),window.queueit||(window.queueit=new n),window.queueit.set(this.customerId,this.eventId,this),(i=i||new r).host||(i.host=this.customerId+".queue-it.net"),i.redirector||(i.redirector=function(e){window.location.href=e,document.close()}),i.getCookies||(i.getCookies=function(){return document.cookie}),i.setCookie||(i.setCookie=function(e){document.cookie=e}),void 0===i.extendValidity&&(i.extendValidity=!0),i.currentUrl||(i.currentUrl=window.location.href),this.options=i,isNaN(i.validity)?this.validity=20:this.validity=Number(i.validity),this.language=i.culture,this.layoutName=i.layoutName,this.targetUrl=i.targetUrl,i.createCookieManager||(i.createCookieManager=function(e,t,i,o,n,r){return new a.CookieManager(e,t,i,o,n,r)}),this.cookieManager=i.createCookieManager(this.customerId,this.eventId,this.options.host,this.options.cookieDomain,this.options.getCookies,this.options.setCookie),this.initialize(this.customerId,this.eventId)}a.QueueClient=c}(l.Javascript||(l.Javascript={}))}(QueueIt=QueueIt||{}),function(e){var t,i;function o(e,t,i,o,n,r,s){void 0===n&&(n=function(){return document.cookie}),void 0===r&&(r=function(e){return document.cookie=e}),void 0===s&&(s=function(){return new Date}),this.customerId=e,this.eventId=t,this.host=i,this.cookieDomain=o,this.getCookies=n,this.setCookie=r,this.getNow=s}t=e.Javascript||(e.Javascript={}),o.prototype.extendCookie=function(e){var t=this.getQueueStateCookie();t&&"timeout"!==t&&this.setCookieValue(t,e)},o.prototype.getValidationState=function(){var e=this.getQueueStateCookie();if(e){if("timeout"===e)return"timeout";var t=this.toQueueState(e);if(t){if("idle"!==t.redirectType)return"verified";var i=this.getNow();t.issueTime=1e3*t.issueTime;var o=new Date(t.issueTime);o.setMinutes(o.getMinutes()+t.fixedCookieValidity);var n=new Date(t.issueTime);if(n.setMinutes(n.getMinutes()-t.fixedCookieValidity),!(o<i||i<n))return"disabled"}}},o.prototype.cookieIsEnabled=function(){return navigator.cookieEnabled},o.prototype.setTimeoutState=function(){this.setQueueStateCookie(this.getCookieName(),"timeout",3)},o.prototype.setCookieValue=function(e,t){this.setQueueStateCookie(this.getCookieName(),e,t)},o.prototype.cancelCookie=function(){this.setQueueStateCookie(this.getCookieName(),"",-1)},o.prototype.getQueueStateCookie=function(){var e=this.getCookieName(),t=this.getCookies();if(t){var i,o,n,r=t.split(";");for(i=0;i<r.length;i++)if(o=r[i].substr(0,r[i].indexOf("=")),n=r[i].substr(r[i].indexOf("=")+1),(o=o.replace(/^\s+|\s+$/g,""))==e)return decodeURIComponent(n)}},o.prototype.cancelQueueId=function(){var e=this.getQueueIdFromQueueStateCookie();this.removeLocalSession(),e&&this.removeSessionInQueueITDomain(e)},o.prototype.setQueueStateCookie=function(e,t,i){var o=encodeURIComponent(t)+";path=/",n=this.getNow();n.setMinutes(n.getMinutes()+i),0<i?o=o+";expires="+n.toUTCString():o+=";expires=Thu, 01 Jan 1970 00:00:01 GMT",this.cookieDomain&&(o=o+";domain="+this.cookieDomain),this.setCookie(e+"="+o),0<i&&this.getQueueStateCookie()!==t?(o=encodeURIComponent(t)+";path=/;expires="+n.toUTCString(),this.setCookie(e+"="+o)):i<=0&&this.getQueueStateCookie()&&(o=encodeURIComponent(t)+";expires=Thu, 01 Jan 1970 00:00:01 GMT",this.setCookie(e+"="+o))},o.prototype.getCookieName=function(){return o.CookieNameInitializer+this.eventId},o.prototype.getQueueIdFromQueueStateCookie=function(){try{var e=this.getQueueStateCookie();return e?this.toQueueState(e).queueId:null}catch(e){console.warn("Resolving QueueId from cookie failed")}},o.prototype.toQueueState=function(e){for(var t={redirectType:"",issueTime:0,fixedCookieValidity:0,queueId:null},i=0,o=e.split("&");i<o.length;i++){var n=o[i].split("=");if(2!=n.length)return;switch(n[0].toLowerCase()){case"redirecttype":t.redirectType=n[1].toLowerCase();break;case"issuetime":t.issueTime=Number(n[1]);break;case"fixedvaliditymins":t.fixedCookieValidity=Number(n[1]);break;case"queueid":t.queueId=n[1]}}return t},o.prototype.removeLocalSession=function(){var e=this.getCookieName()+"=";this.cookieDomain&&(e+=";domain="+this.cookieDomain),e+=";path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie=e,this.setCookie(e)},o.prototype.removeSessionInQueueITDomain=function(e){var t=document.createElement("script");t.src=this.host+"/cancel/"+this.customerId+"/"+this.eventId+"/"+e+"/cancelqueueid",document.getElementsByTagName("head")[0].appendChild(t)},o.CookieNameInitializer="QueueITAccepted-SDFrts345E-V3_",i=o,t.CookieManager=i}(QueueIt=QueueIt||{});