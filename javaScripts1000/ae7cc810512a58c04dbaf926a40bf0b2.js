/*! For license information please see 2.js.LICENSE.txt */
(window.webpackJsonpCustomerLoader=window.webpackJsonpCustomerLoader||[]).push([[2],Array(199).concat([function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(97))},function(t,e,n){var r=n(199),i=n(237),o=n(202),s=n(241),u=n(242),a=n(262),c=i("wks"),f=r.Symbol,h=a?f:f&&f.withoutSetter||s;t.exports=function(t){return o(c,t)||(u&&o(f,t)?c[t]=f[t]:c[t]=h("Symbol."+t)),c[t]}},function(t,e,n){var r=n(207);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(205),i=n(206),o=n(218);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(204);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){var r=n(205),i=n(239),o=n(201),s=n(240),u=Object.defineProperty;e.f=r?u:function(t,e,n){if(o(t),e=s(e,!0),o(n),i)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(199),i=n(229).f,o=n(203),s=n(211),u=n(224),a=n(268),c=n(246);t.exports=function(t,e){var n,f,h,l,p,d=t.target,v=t.global,y=t.stat;if(n=v?r:y?r[d]||u(d,{}):(r[d]||{}).prototype)for(f in e){if(l=e[f],h=t.noTargetGet?(p=i(n,f))&&p.value:n[f],!c(v?f:d+(y?".":"#")+f,t.forced)&&void 0!==h){if(typeof l==typeof h)continue;a(l,h)}(t.sham||h&&h.sham)&&o(l,"sham",!0),s(n,f,l,t)}}},function(t,e,n){var r=n(270),i=n(199),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"h",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function f(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}},function(t,e,n){var r=n(199),i=n(203),o=n(202),s=n(224),u=n(226),a=n(214),c=a.get,f=a.enforce,h=String(String).split("String");(t.exports=function(t,e,n,u){var a=!!u&&!!u.unsafe,c=!!u&&!!u.enumerable,l=!!u&&!!u.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),f(n).source=h.join("string"==typeof e?e:"")),t!==r?(a?!l&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)):c?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||u(this)}))},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e){t.exports=!1},function(t,e,n){var r,i,o,s=n(263),u=n(199),a=n(207),c=n(203),f=n(202),h=n(227),l=n(228),p=u.WeakMap;if(s){var d=new p,v=d.get,y=d.has,g=d.set;r=function(t,e){return g.call(d,t,e),e},i=function(t){return v.call(d,t)||{}},o=function(t){return y.call(d,t)}}else{var b=h("state");l[b]=!0,r=function(t,e){return c(t,b,e),e},i=function(t){return f(t,b)?t[b]:{}},o=function(t){return f(t,b)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!a(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(212),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(267),i=n(230);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(201),i=n(278),o=n(245),s=n(248),u=n(279),a=n(280),c=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,n,f,h){var l,p,d,v,y,g,b,m=s(e,n,f?2:1);if(h)l=t;else{if("function"!=typeof(p=u(t)))throw TypeError("Target is not iterable");if(i(p)){for(d=0,v=o(t.length);v>d;d++)if((y=f?m(r(b=t[d])[0],b[1]):m(t[d]))&&y instanceof c)return y;return new c(!1)}l=p.call(t)}for(g=l.next;!(b=g.call(l)).done;)if("object"==typeof(y=a(l,m,b.value,f))&&y&&y instanceof c)return y;return new c(!1)}).stop=function(t){return new c(!0,t)}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){"use strict";var r,i,o=n(210),s=n(236),u=n(259),a=n(260),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),f=new s.b("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),l=new a.b("@firebase/app"),p=function(){function t(t,e,n){var r,i,a=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new u.b(e.name),this._addComponent(new u.a("app",(function(){return a}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),f=c.next();!f.done;f=c.next()){var h=f.value;this._addComponent(h)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){l.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw f.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var u=o.name;if("string"!=typeof u||!u)throw f.create("bad-app-name",{appName:String(u)});if(Object(s.c)(e,u))throw f.create("duplicate-app",{appName:u});var a=new t(n,o,r);return e[u]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void l.warn(a.join(" "))}c(new u.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:a.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw f.create("invalid-log-argument",{appName:name});Object(a.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.c)(e,t))throw f.create("no-app",{appName:t});return e[t]}function c(u){var a,c,h=u.name;if(n.has(h))return l.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===u.type?r[h]:null;if(n.set(h,u),"PUBLIC"===u.type){var p=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw f.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==u.serviceProps&&Object(s.f)(p,u.serviceProps),r[h]=p,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,u.multipleInstances?t:[])}}try{for(var d=Object(o.h)(Object.keys(e)),v=d.next();!v.done;v=d.next()){var y=v.value;e[y]._addComponent(u)}}catch(t){a={error:t}}finally{try{v&&!v.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}return"PUBLIC"===u.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.h)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&l.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),g.apply(void 0,t)};var b=d;!function(t,e){t.INTERNAL.registerComponent(new u.a("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",e),t.registerVersion("fire-js","")}(b),e.a=b},function(t,e,n){var r={};r[n(200)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(199),i=n(203);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(199),i=n(207),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,n){var r=n(238),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(237),i=n(241),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(205),i=n(266),o=n(218),s=n(219),u=n(240),a=n(202),c=n(239),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=s(t),e=u(e,!0),c)try{return f(t,e)}catch(t){}if(a(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r=n(206).f,i=n(202),o=n(200)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(202),i=n(289),o=n(227),s=n(290),u=o("IE_PROTO"),a=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),r(t,u)?t[u]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r,i=n(201),o=n(291),s=n(232),u=n(228),a=n(251),c=n(225),f=n(227),h=f("IE_PROTO"),l=function(){},p=function(t){return"<script>"+t+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;d=r?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",a.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var n=s.length;n--;)delete d.prototype[s[n]];return d()};u[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=i(t),n=new l,l.prototype=null,n[h]=t):n=d(),void 0===e?n:o(n,e)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return h})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"k",(function(){return v})),n.d(e,"l",(function(){return c})),n.d(e,"m",(function(){return f})),n.d(e,"n",(function(){return p})),n.d(e,"o",(function(){return y}));var r=n(210),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var u=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function f(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function h(){return"object"==typeof self&&self.self===self}function l(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function v(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return a().indexOf("MSAppHost/")>=0}var g=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,b.prototype.create),o}return Object(r.c)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?m(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new g(i,u,r);return a},t}();function m(t,e){return t.replace(w,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var w=/\{\$([^}]+)}/g;function _(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,u=this.chain_[0],a=this.chain_[1],c=this.chain_[2],f=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=f^a&(c^f),s=1518500249):(o=a^c^f,s=1859775393):r<60?(o=a&c|f&(a|c),s=2400959708):(o=a^c^f,s=3395469782);i=(u<<5|u>>>27)+o+h+s+n[r]&4294967295;h=f,f=c,c=4294967295&(a<<30|a>>>2),a=u,u=i}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function E(t,e){var n=new O(t,e);return n.subscribe.bind(n)}var O=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function I(){}}).call(this,n(97))},function(t,e,n){var r=n(213),i=n(238);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(199),i=n(224),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(205),i=n(204),o=n(225);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(207);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(204);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(223),i=n(215),o=n(200)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r=n(202),i=n(219),o=n(272).indexOf,s=n(228);t.exports=function(t,e){var n,u=i(t),a=0,c=[];for(n in u)!r(s,n)&&r(u,n)&&c.push(n);for(;e.length>a;)r(u,n=e[a++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(231),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(204),i=/#|\.prototype\./,o=function(t,e){var n=u[s(t)];return n==c||n!=a&&("function"==typeof e?r(e):!!e)},s=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=o.data={},a=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(199);t.exports=r.Promise},function(t,e,n){var r=n(212);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(201),i=n(212),o=n(200)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[o])?e:i(n)}},function(t,e,n){var r,i,o,s=n(199),u=n(204),a=n(215),c=n(248),f=n(251),h=n(225),l=n(252),p=s.location,d=s.setImmediate,v=s.clearImmediate,y=s.process,g=s.MessageChannel,b=s.Dispatch,m=0,w={},_=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},E=function(t){return function(){_(t)}},O=function(t){_(t.data)},I=function(t){s.postMessage(t+"",p.protocol+"//"+p.host)};d&&v||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return w[++m]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(m),m},v=function(t){delete w[t]},"process"==a(y)?r=function(t){y.nextTick(E(t))}:b&&b.now?r=function(t){b.now(E(t))}:g&&!l?(o=(i=new g).port2,i.port1.onmessage=O,r=c(o.postMessage,o,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||u(I)||"file:"===p.protocol?r="onreadystatechange"in h("script")?function(t){f.appendChild(h("script")).onreadystatechange=function(){f.removeChild(this),_(t)}}:function(t){setTimeout(E(t),0)}:(r=I,s.addEventListener("message",O,!1))),t.exports={set:d,clear:v}},function(t,e,n){var r=n(209);t.exports=r("document","documentElement")},function(t,e,n){var r=n(253);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r=n(209);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(201),i=n(207),o=n(217);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(208),i=n(288),o=n(234),s=n(257),u=n(233),a=n(203),c=n(211),f=n(200),h=n(213),l=n(216),p=n(256),d=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,y=f("iterator"),g=function(){return this};t.exports=function(t,e,n,f,p,b,m){i(n,e,f);var w,_,E,O=function(t){if(t===p&&S)return S;if(!v&&t in j)return j[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},I=e+" Iterator",T=!1,j=t.prototype,A=j[y]||j["@@iterator"]||p&&j[p],S=!v&&A||O(p),x="Array"==e&&j.entries||A;if(x&&(w=o(x.call(new t)),d!==Object.prototype&&w.next&&(h||o(w)===d||(s?s(w,d):"function"!=typeof w[y]&&a(w,y,g)),u(w,I,!0,!0),h&&(l[I]=g))),"values"==p&&A&&"values"!==A.name&&(T=!0,S=function(){return A.call(this)}),h&&!m||j[y]===S||a(j,y,S),l[e]=S,p)if(_={values:O("values"),keys:b?S:O("keys"),entries:O("entries")},m)for(E in _)(v||T||!(E in j))&&c(j,E,_[E]);else r({target:e,proto:!0,forced:v||T},_);return _}},function(t,e,n){"use strict";var r,i,o,s=n(234),u=n(203),a=n(202),c=n(200),f=n(213),h=c("iterator"),l=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(r=i):l=!0),null==r&&(r={}),f||a(r,h)||u(r,h,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:l}},function(t,e,n){var r=n(201),i=n(293);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){n(305);var r=n(9).Object,i=t.exports=function(t,e,n){return r.defineProperty(t,e,n)};r.defineProperty.sham&&(i.sham=!0)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u}));var r=n(210),i=n(236),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),u=s[0],a=s[1],c=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService(c);a.resolve(f)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return p}));var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var u={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},a=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),f=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=f,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?u[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function l(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=u[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var u=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:u,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){n(i[r])}}},function(t,e,n){var r=n(223),i=n(211),o=n(264);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){var r=n(242);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(199),i=n(226),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){"use strict";var r=n(223),i=n(243);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){"use strict";var r,i,o,s,u=n(208),a=n(213),c=n(199),f=n(209),h=n(247),l=n(211),p=n(275),d=n(233),v=n(276),y=n(207),g=n(212),b=n(277),m=n(215),w=n(226),_=n(220),E=n(281),O=n(249),I=n(250).set,T=n(282),j=n(254),A=n(283),S=n(217),x=n(221),N=n(214),D=n(246),P=n(200),k=n(284),L=P("species"),R="Promise",C=N.get,M=N.set,V=N.getterFor(R),U=h,q=c.TypeError,F=c.document,B=c.process,z=f("fetch"),G=S.f,W=G,K="process"==m(B),H=!!(F&&F.createEvent&&c.dispatchEvent),Y=D(R,(function(){if(!(w(U)!==String(U))){if(66===k)return!0;if(!K&&"function"!=typeof PromiseRejectionEvent)return!0}if(a&&!U.prototype.finally)return!0;if(k>=51&&/native code/.test(U))return!1;var t=U.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[L]=e,!(t.then((function(){}))instanceof e)})),Q=Y||!E((function(t){U.all(t).catch((function(){}))})),$=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},X=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;T((function(){for(var i=e.value,o=1==e.state,s=0;r.length>s;){var u,a,c,f=r[s++],h=o?f.ok:f.fail,l=f.resolve,p=f.reject,d=f.domain;try{h?(o||(2===e.rejection&&et(t,e),e.rejection=1),!0===h?u=i:(d&&d.enter(),u=h(i),d&&(d.exit(),c=!0)),u===f.promise?p(q("Promise-chain cycle")):(a=$(u))?a.call(u,l,p):l(u)):p(i)}catch(t){d&&!c&&d.exit(),p(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Z(t,e)}))}},J=function(t,e,n){var r,i;H?((r=F.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):"unhandledrejection"===t&&A("Unhandled promise rejection",n)},Z=function(t,e){I.call(c,(function(){var n,r=e.value;if(tt(e)&&(n=x((function(){K?B.emit("unhandledRejection",r,t):J("unhandledrejection",t,r)})),e.rejection=K||tt(e)?2:1,n.error))throw n.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){I.call(c,(function(){K?B.emit("rejectionHandled",t):J("rejectionhandled",t,e.value)}))},nt=function(t,e,n,r){return function(i){t(e,n,i,r)}},rt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,X(t,e,!0))},it=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw q("Promise can't be resolved itself");var i=$(n);i?T((function(){var r={done:!1};try{i.call(n,nt(it,t,r,e),nt(rt,t,r,e))}catch(n){rt(t,r,n,e)}})):(e.value=n,e.state=1,X(t,e,!1))}catch(n){rt(t,{done:!1},n,e)}}};Y&&(U=function(t){b(this,U,R),g(t),r.call(this);var e=C(this);try{t(nt(it,this,e),nt(rt,this,e))}catch(t){rt(this,e,t)}},(r=function(t){M(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(U.prototype,{then:function(t,e){var n=V(this),r=G(O(this,U));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=K?B.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&X(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=C(t);this.promise=t,this.resolve=nt(it,t,e),this.reject=nt(rt,t,e)},S.f=G=function(t){return t===U||t===o?new i(t):W(t)},a||"function"!=typeof h||(s=h.prototype.then,l(h.prototype,"then",(function(t,e){var n=this;return new U((function(t,e){s.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof z&&u({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return j(U,z.apply(c,arguments))}}))),u({global:!0,wrap:!0,forced:Y},{Promise:U}),d(U,R,!1,!0),v(R),o=f(R),u({target:R,stat:!0,forced:Y},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),u({target:R,stat:!0,forced:a||Y},{resolve:function(t){return j(a&&this===o?U:this,t)}}),u({target:R,stat:!0,forced:Q},{all:function(t){var e=this,n=G(e),r=n.resolve,i=n.reject,o=x((function(){var n=g(e.resolve),o=[],s=0,u=1;_(t,(function(t){var a=s++,c=!1;o.push(void 0),u++,n.call(e,t).then((function(t){c||(c=!0,o[a]=t,--u||r(o))}),i)})),--u||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,i=x((function(){var i=g(e.resolve);_(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(204),i=n(215),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(202),i=n(269),o=n(229),s=n(206);t.exports=function(t,e){for(var n=i(e),u=s.f,a=o.f,c=0;c<n.length;c++){var f=n[c];r(t,f)||u(t,f,a(e,f))}}},function(t,e,n){var r=n(209),i=n(271),o=n(274),s=n(201);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(199);t.exports=r},function(t,e,n){var r=n(244),i=n(232).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(219),i=n(245),o=n(273),s=function(t){return function(e,n,s){var u,a=r(e),c=i(a.length),f=o(s,c);if(t&&n!=n){for(;c>f;)if((u=a[f++])!=u)return!0}else for(;c>f;f++)if((t||f in a)&&a[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,n){var r=n(231),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(211);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(209),i=n(206),o=n(200),s=n(205),u=o("species");t.exports=function(t){var e=r(t),n=i.f;s&&e&&!e[u]&&n(e,u,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){var r=n(200),i=n(216),o=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},function(t,e,n){var r=n(243),i=n(216),o=n(200)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(201);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(200)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var r,i,o,s,u,a,c,f,h=n(199),l=n(229).f,p=n(215),d=n(250).set,v=n(252),y=h.MutationObserver||h.WebKitMutationObserver,g=h.process,b=h.Promise,m="process"==p(g),w=l(h,"queueMicrotask"),_=w&&w.value;_||(r=function(){var t,e;for(m&&(t=g.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?s():o=void 0,t}}o=void 0,t&&t.enter()},m?s=function(){g.nextTick(r)}:y&&!v?(u=!0,a=document.createTextNode(""),new y(r).observe(a,{characterData:!0}),s=function(){a.data=u=!u}):b&&b.resolve?(c=b.resolve(void 0),f=c.then,s=function(){f.call(c,r)}):s=function(){d.call(h,r)}),t.exports=_||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,s()),o=e}},function(t,e,n){var r=n(199);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e,n){var r,i,o=n(199),s=n(253),u=o.process,a=u&&u.versions,c=a&&a.v8;c?i=(r=c.split("."))[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){"use strict";var r=n(208),i=n(213),o=n(247),s=n(204),u=n(209),a=n(249),c=n(254),f=n(211);r({target:"Promise",proto:!0,real:!0,forced:!!o&&s((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=a(this,u("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype.finally||f(o.prototype,"finally",u("Promise").prototype.finally)},function(t,e,n){"use strict";var r=n(287).charAt,i=n(214),o=n(255),s=i.set,u=i.getterFor("String Iterator");o(String,"String",(function(t){s(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(231),i=n(230),o=function(t){return function(e,n){var o,s,u=String(i(e)),a=r(n),c=u.length;return a<0||a>=c?t?"":void 0:(o=u.charCodeAt(a))<55296||o>56319||a+1===c||(s=u.charCodeAt(a+1))<56320||s>57343?t?u.charAt(a):o:t?u.slice(a,a+2):s-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){"use strict";var r=n(256).IteratorPrototype,i=n(235),o=n(218),s=n(233),u=n(216),a=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),s(t,c,!1,!0),u[c]=a,t}},function(t,e,n){var r=n(230);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(204);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(205),i=n(206),o=n(201),s=n(292);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=s(e),u=r.length,a=0;u>a;)i.f(t,n=r[a++],e[n]);return t}},function(t,e,n){var r=n(244),i=n(232);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(207);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var r=n(208),i=n(205),o=n(234),s=n(257),u=n(235),a=n(206),c=n(218),f=n(220),h=n(203),l=n(214),p=l.set,d=l.getterFor("AggregateError"),v=function(t,e){var n=this;if(!(n instanceof v))return new v(t,e);s&&(n=s(new Error(e),o(n)));var r=[];return f(t,r.push,r),i?p(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&h(n,"message",String(e)),n};v.prototype=u(Error.prototype,{constructor:c(5,v),message:c(5,""),name:c(5,"AggregateError")}),i&&a.f(v.prototype,"errors",{get:function(){return d(this).errors},configurable:!0}),r({global:!0},{AggregateError:v})},function(t,e,n){n(296)},function(t,e,n){"use strict";var r=n(208),i=n(212),o=n(217),s=n(221),u=n(220);r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=o.f(e),r=n.resolve,a=n.reject,c=s((function(){var n=i(e.resolve),o=[],s=0,a=1;u(t,(function(t){var i=s++,u=!1;o.push(void 0),a++,n.call(e,t).then((function(t){u||(u=!0,o[i]={status:"fulfilled",value:t},--a||r(o))}),(function(t){u||(u=!0,o[i]={status:"rejected",reason:t},--a||r(o))}))})),--a||r(o)}));return c.error&&a(c.value),n.promise}})},function(t,e,n){"use strict";var r=n(208),i=n(212),o=n(209),s=n(217),u=n(221),a=n(220);r({target:"Promise",stat:!0},{any:function(t){var e=this,n=s.f(e),r=n.resolve,c=n.reject,f=u((function(){var n=i(e.resolve),s=[],u=0,f=1,h=!1;a(t,(function(t){var i=u++,a=!1;s.push(void 0),f++,n.call(e,t).then((function(t){a||h||(h=!0,r(t))}),(function(t){a||h||(a=!0,s[i]=t,--f||c(new(o("AggregateError"))(s,"No one promise resolved")))}))})),--f||c(new(o("AggregateError"))(s,"No one promise resolved"))}));return f.error&&c(f.value),n.promise}})},function(t,e,n){"use strict";var r=n(208),i=n(217),o=n(221);r({target:"Promise",stat:!0},{try:function(t){var e=i.f(this),n=o(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}})},function(t,e,n){var r=n(199),i=n(300),o=n(301),s=n(203),u=n(200),a=u("iterator"),c=u("toStringTag"),f=o.values;for(var h in i){var l=r[h],p=l&&l.prototype;if(p){if(p[a]!==f)try{s(p,a,f)}catch(t){p[a]=f}if(p[c]||s(p,c,h),i[h])for(var d in o)if(p[d]!==o[d])try{s(p,d,o[d])}catch(t){p[d]=o[d]}}}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){"use strict";var r=n(219),i=n(302),o=n(216),s=n(214),u=n(255),a=s.set,c=s.getterFor("Array Iterator");t.exports=u(Array,"Array",(function(t,e){a(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var r=n(200),i=n(235),o=n(206),s=r("unscopables"),u=Array.prototype;null==u[s]&&o.f(u,s,{configurable:!0,value:i(null)}),t.exports=function(t){u[s][t]=!0}},function(t,e,n){t.exports=n(304)},function(t,e,n){var r=n(258);t.exports=r},function(t,e,n){var r=n(3),i=n(10);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(11).f})},function(t,e,n){t.exports=n(307)},function(t,e,n){var r=n(308);t.exports=r},function(t,e,n){n(309);var r=n(9).Object,i=t.exports=function(t,e){return r.defineProperties(t,e)};r.defineProperties.sham&&(i.sham=!0)},function(t,e,n){var r=n(3),i=n(10);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(98)})},function(t,e,n){t.exports=n(311)},function(t,e,n){var r=n(312);t.exports=r},function(t,e,n){n(313);var r=n(9);t.exports=r.Object.getOwnPropertyDescriptors},function(t,e,n){var r=n(3),i=n(10),o=n(314),s=n(15),u=n(40),a=n(99);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,n,r=s(t),i=u.f,c=o(r),f={},h=0;c.length>h;)void 0!==(n=i(r,e=c[h++]))&&a(f,e,n);return f}})},function(t,e,n){var r=n(12),i=n(62),o=n(60),s=n(8);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){t.exports=n(316)},function(t,e,n){var r=n(317);t.exports=r},function(t,e,n){n(318);var r=n(9).Object,i=t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)};r.getOwnPropertyDescriptor.sham&&(i.sham=!0)},function(t,e,n){var r=n(3),i=n(4),o=n(15),s=n(40).f,u=n(10),a=i((function(){s(1)}));r({target:"Object",stat:!0,forced:!u||a,sham:!u},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},function(t,e,n){t.exports=n(320)},function(t,e,n){var r=n(321);t.exports=r},function(t,e,n){var r=n(322),i=Array.prototype;t.exports=function(t){var e=t.filter;return t===i||t instanceof Array&&e===i.filter?r:e}},function(t,e,n){n(323);var r=n(14);t.exports=r("Array").filter},function(t,e,n){"use strict";var r=n(3),i=n(26).filter;r({target:"Array",proto:!0,forced:!n(61)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){t.exports=n(325)},function(t,e,n){var r=n(326);t.exports=r},function(t,e,n){n(100);var r=n(9);t.exports=r.Object.getOwnPropertySymbols},function(t,e,n){var r=n(328);t.exports=function(t,e,n){return e in t?r(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){t.exports=n(329)},function(t,e,n){var r=n(258);t.exports=r},function(t,e,n){"use strict";(function(t){var e=n(210),r=n(222),i=n(260),o=n(236),s=n(332),u=n(259),a=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},c=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),f=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();f.UNAUTHENTICATED=new f(null),f.l=new f("google-credentials-uid"),f._=new f("first-party-uid");var h=new i.b("@firebase/firestore");function l(){return h.logLevel}function p(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(h.logLevel<=i.a.DEBUG){var o=n.map(y);h.debug.apply(h,Object(e.g)(["Firestore (8.1.2): "+t],o))}}function d(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(h.logLevel<=i.a.ERROR){var o=n.map(y);h.error.apply(h,Object(e.g)(["Firestore (8.1.2): "+t],o))}}function v(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(h.logLevel<=i.a.WARN){var o=n.map(y);h.warn.apply(h,Object(e.g)(["Firestore (8.1.2): "+t],o))}}function y(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function g(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.2) INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function b(t,e){t||g()}function m(t,e){return t}var w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(e.c)(n,t),n}(Error),E=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},O=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(f.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),I=function(){function t(t){var e=this;this.P=null,this.currentUser=f.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then((function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.V!==e?(p("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(b("string"==typeof n.accessToken),new E(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return b(null===t||"string"==typeof t),new f(t)},t}(),T=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=f._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),j=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new T(this.v,this.S))},t.prototype.A=function(t){t(f._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();function A(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var S=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=A(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function x(t,e){return t<e?-1:t>e?1:0}function N(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function D(t){return t+"\0"}var P=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?x(this.nanoseconds,t.nanoseconds):x(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),k=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new P(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),L=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&g(),void 0===n?n=t.length-e:n>t.length-e&&g(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return t=void 0===t?1:t,this.L(this.segments,this.offset+t,this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),R=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.L=function(t,e,r){return new n(t,e,r)},n.prototype.J=function(){return this.H().join("/")},n.prototype.toString=function(){return this.J()},n.Y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new _(w.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new n(r)},n.X=function(){return new n([])},n}(L),C=/^[_a-zA-Z][_a-zA-Z0-9]*$/,M=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.L=function(t,e,r){return new n(t,e,r)},n.Z=function(t){return C.test(t)},n.prototype.J=function(){return this.H().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.Z(t)||(t="`"+t+"`"),t})).join(".")},n.prototype.toString=function(){return this.J()},n.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},n.et=function(){return new n(["__name__"])},n.nt=function(t){for(var e=[],r="",i=0,o=function(){if(0===r.length)throw new _(w.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new _(w.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new _(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new _(w.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)},n.X=function(){return new n([])},n}(L),V=function(){function t(t){this.path=t}return t.st=function(e){return new t(R.Y(e))},t.it=function(e){return new t(R.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===R.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return R.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new R(e.slice()))},t}();function U(t){return null==t}function q(t){return 0===t&&1/t==-1/0}function F(t){return"number"==typeof t&&Number.isInteger(t)&&!q(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var B=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function z(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new B(t,e,n,r,i,o,s)}function G(t){var e=m(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.J()+t.op.toString()+Vt(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.J()+t.dir}(t)})).join(","),U(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Un(e.startAt)),e.endAt&&(n+="|ub:",n+=Un(e.endAt)),e.ut=n}return e.ut}function W(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Gn(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Lt(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fn(t.startAt,e.startAt)&&Fn(t.endAt,e.endAt)}function K(t){return V.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var H=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.at,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return x(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();H.lt=new H("");var Y,Q,$=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=k.min()),void 0===o&&(o=k.min()),void 0===s&&(s=H.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),X=function(t){this.count=t};function J(t){switch(t){case w.OK:return g();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0;default:return g()}}function Z(t){if(void 0===t)return d("GRPC error has no .code"),w.UNKNOWN;switch(t){case Y.OK:return w.OK;case Y.CANCELLED:return w.CANCELLED;case Y.UNKNOWN:return w.UNKNOWN;case Y.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Y.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Y.INTERNAL:return w.INTERNAL;case Y.UNAVAILABLE:return w.UNAVAILABLE;case Y.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Y.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Y.NOT_FOUND:return w.NOT_FOUND;case Y.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Y.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Y.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Y.ABORTED:return w.ABORTED;case Y.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Y.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Y.DATA_LOSS:return w.DATA_LOSS;default:return g()}}(Q=Y||(Y={}))[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS";var tt=function(){function t(t,e){this.$=t,this.root=e||nt.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,nt.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,nt.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new et(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new et(this.root,t,this.$,!1)},t.prototype.vt=function(){return new et(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new et(this.root,t,this.$,!0)},t}(),et=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw g();if(this.right.Mt())throw g();var t=this.left.Qt();if(t!==this.right.Qt())throw g();return t+(this.Mt()?0:1)},t}();nt.EMPTY=null,nt.RED=!0,nt.It=!1,nt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new nt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());var rt=function(){function t(t){this.$=t,this.data=new tt(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt((function(e,n){return t(e),!1}))},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new it(this.data.yt())},t.prototype.Vt=function(t){return new it(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),it=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),ot=new tt(V.$);function st(){return ot}function ut(){return st()}var at=new tt(V.$);function ct(){return at}var ft=new tt(V.$),ht=new rt(V.$);function lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ht,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pt=new rt(x);function dt(){return pt}var vt=function(){function t(t){this.$=t?function(e,n){return t(e,n)||V.$(e.key,n.key)}:function(t,e){return V.$(t.key,e.key)},this.Ht=ct(),this.Jt=new tt(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),yt=function(){function t(){this.Xt=new tt(V.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):g():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt((function(e,n){t.push(n)})),t},t}(),gt=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=u}return t.ie=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,vt.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&In(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),bt=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,mt.he(e,n)),new t(k.min(),r,dt(),st(),lt())},t}(),mt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t(H.lt,n,lt(),lt(),lt())},t}(),wt=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},_t=function(t,e){this.targetId=t,this.Te=e},Et=function(t,e,n,r){void 0===n&&(n=H.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ot=function(){function t(){this.Ie=0,this.me=jt(),this.Ae=H.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=lt(),e=lt(),n=lt();return this.me.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:g()}})),new mt(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=jt()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),It=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=st(),this.Me=Tt(),this.ke=new rt(x)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof fn?this.Le(r,t.Ee):t.Ee instanceof hn&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Be(s,t.key,t.Ee)}},t.prototype.qe=function(t){var e=this;this.Ue(t,(function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:g()}}))},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach((function(t,r){n.Ke(r)&&e(r)}))},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(K(i))if(0===n){var o=new V(i.path);this.Be(e,o,new hn(o,k.min()))}else b(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach((function(r,i){var o=e.Ge(i);if(o){if(r.le&&K(o.target)){var s=new V(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new hn(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}}));var r=lt();this.Me.forEach((function(t,n){var i=!0;n.Wt((function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new bt(t,n,this.ke,this.Oe,r);return this.Oe=st(),this.Me=Tt(),this.ke=new rt(x),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new Ot,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new rt(x),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new Ot),this.xe.Xe(t).forEach((function(n){e.Be(t,n,null)}))},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();function Tt(){return new tt(V.$)}function jt(){return new tt(V.$)}function At(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function St(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xt(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Nt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Dt(t){var e=Ut(t.mapValue.fields.__local_write_time__.timestampValue);return new P(e.seconds,e.nanos)}var Pt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nt(t)?4:10:g()}function Lt(t,e){var n=kt(t);if(n!==kt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dt(t).isEqual(Dt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ut(t.timestampValue),r=Ut(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ft(t.bytesValue).isEqual(Ft(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return qt(t.geoPointValue.latitude)===qt(e.geoPointValue.latitude)&&qt(t.geoPointValue.longitude)===qt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return qt(t.integerValue)===qt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=qt(t.doubleValue),r=qt(e.doubleValue);return n===r?q(n)===q(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return N(t.arrayValue.values||[],e.arrayValue.values||[],Lt);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(At(n)!==At(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Lt(n[i],r[i])))return!1;return!0}(t,e);default:return g()}}function Rt(t,e){return void 0!==(t.values||[]).find((function(t){return Lt(t,e)}))}function Ct(t,e){var n=kt(t),r=kt(e);if(n!==r)return x(n,r);switch(n){case 0:return 0;case 1:return x(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=qt(t.integerValue||t.doubleValue),r=qt(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Mt(t.timestampValue,e.timestampValue);case 4:return Mt(Dt(t),Dt(e));case 5:return x(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ft(t),r=Ft(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return x(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=x(qt(t.latitude),qt(e.latitude));return 0!==n?n:x(qt(t.longitude),qt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ct(n[i],r[i]);if(o)return o}return x(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=x(r[s],o[s]);if(0!==u)return u;var a=Ct(n[r[s]],i[o[s]]);if(0!==a)return a}return x(r.length,o.length)}(t.mapValue,e.mapValue);default:throw g()}}function Mt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return x(t,e);var n=Ut(t),r=Ut(e),i=x(n.seconds,r.seconds);return 0!==i?i:x(n.nanos,r.nanos)}function Vt(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Ut(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ft(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,V.it(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):g();var n,r}(t)}function Ut(t){if(b(!!t),"string"==typeof t){var e=0,n=Pt.exec(t);if(b(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ft(t){return"string"==typeof t?H.fromBase64String(t):H.fromUint8Array(t)}function Bt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function zt(t){return!!t&&"integerValue"in t}function Gt(t){return!!t&&"arrayValue"in t}function Wt(t){return!!t&&"nullValue"in t}function Kt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ht(t){return!!t&&"mapValue"in t}var Yt={asc:"ASCENDING",desc:"DESCENDING"},Qt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$t=function(t,e){this.t=t,this.tn=e};function Xt(t){return{integerValue:""+t}}function Jt(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q(e)?"-0":e}}function Zt(t,e){return F(e)?Xt(e):Jt(t,e)}function te(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ee(t,e){return t.tn?e.toBase64():e.toUint8Array()}function ne(t,e){return te(t,e.M())}function re(t){return b(!!t),k.N(function(t){var e=Ut(t);return new P(e.seconds,e.nanos)}(t))}function ie(t,e){return function(t){return new R(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function oe(t){var e=R.Y(t);return b(Ae(e)),e}function se(t,e){return ie(t.t,e.path)}function ue(t,e){var n=oe(e);if(n.get(1)!==t.t.projectId)throw new _(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new _(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new V(he(n))}function ae(t,e){return ie(t.t,e)}function ce(t){var e=oe(t);return 4===e.length?R.X():he(e)}function fe(t){return new R(["projects",t.t.projectId,"databases",t.t.database]).J()}function he(t){return b(t.length>4&&"documents"===t.get(4)),t.B(5)}function le(t,e,n){return{name:se(t,e),fields:n.proto.mapValue.fields}}function pe(t,e){var n;if(e instanceof Xe)n={update:le(t,e.key,e.value)};else if(e instanceof rn)n={delete:se(t,e.key)};else if(e instanceof Je)n={update:le(t,e.key,e.data),updateMask:je(e.en)};else if(e instanceof tn)n={transform:{document:se(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Pe)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof ke)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof Re)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof Me)return{fieldPath:e.field.J(),increment:n.nn};throw g()}(0,t)}))}};else{if(!(e instanceof on))return g();n={verify:se(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ne(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g()}(t,e.rn)),n}function de(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ze.updateTime(re(t.updateTime)):void 0!==t.exists?ze.exists(t.exists):ze.on()}(e.currentDocument):ze.on();if(e.update){e.update.name;var r=ue(t,e.update.name),i=new sn({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new qe(e.map((function(t){return M.nt(t)})))}(e.updateMask);return new Je(r,i,o,n)}return new Xe(r,i,n)}if(e.delete){var s=ue(t,e.delete);return new rn(s,n)}if(e.transform){var u=ue(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue),n=new Pe;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ke(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Re(i)}else"increment"in e?n=new Me(t,e.increment):g();var o=M.nt(e.fieldPath);return new Fe(o,n)}(t,e)}));return b(!0===n.exists),new tn(u,a)}if(e.verify){var c=ue(t,e.verify);return new on(c,n)}return g()}function ve(t,e){return{documents:[ae(t,e.path)]}}function ye(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ae(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ae(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Kt(t.value))return{unaryFilter:{field:Ee(t.field),op:"IS_NAN"}};if(Wt(t.value))return{unaryFilter:{field:Ee(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Kt(t.value))return{unaryFilter:{field:Ee(t.field),op:"IS_NOT_NAN"}};if(Wt(t.value))return{unaryFilter:{field:Ee(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ee(t.field),op:_e(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ee(t.field),direction:we(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||U(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=be(e.startAt)),e.endAt&&(n.structuredQuery.endAt=be(e.endAt)),n}function ge(t){var e=ce(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Te(e)]:void 0!==e.fieldFilter?[Ie(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):g():[]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Bn(Oe(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return U(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=me(n.startAt));var f=null;return n.endAt&&(f=me(n.endAt)),dn(e,i,u,s,a,"F",c,f)}function be(t){return{before:t.before,values:t.position}}function me(t){var e=!!t.before,n=t.values||[];return new Vn(n,e)}function we(t){return Yt[t]}function _e(t){return Qt[t]}function Ee(t){return{fieldPath:t.J()}}function Oe(t){return M.nt(t.fieldPath)}function Ie(t){return xn.create(Oe(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return g()}}(t.fieldFilter.op),t.fieldFilter.value)}function Te(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Oe(t.unaryFilter.field);return xn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Oe(t.unaryFilter.field);return xn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Oe(t.unaryFilter.field);return xn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Oe(t.unaryFilter.field);return xn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return g()}}function je(t){var e=[];return t.fields.forEach((function(t){return e.push(t.J())})),{fieldPaths:e}}function Ae(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Se=function(){this.cn=void 0};function xe(t,e,n){return t instanceof Pe?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ke?Le(t,e):t instanceof Re?Ce(t,e):function(t,e){var n=De(t,e),r=Ve(n)+Ve(t.nn);return zt(n)&&zt(t.nn)?Xt(r):Jt(t.serializer,r)}(t,e)}function Ne(t,e,n){return t instanceof ke?Le(t,e):t instanceof Re?Ce(t,e):n}function De(t,e){return t instanceof Me?zt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Pe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n}(Se),ke=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(e.c)(n,t),n}(Se);function Le(t,e){for(var n=Ue(e),r=function(t){n.some((function(e){return Lt(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Re=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(e.c)(n,t),n}(Se);function Ce(t,e){for(var n=Ue(e),r=function(t){n=n.filter((function(e){return!Lt(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Me=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(e.c)(n,t),n}(Se);function Ve(t){return qt(t.integerValue||t.doubleValue)}function Ue(t){return Gt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var qe=function(){function t(t){this.fields=t,t.sort(M.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return N(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Fe=function(t,e){this.field=t,this.transform=e},Be=function(t,e){this.version=t,this.transformResults=e},ze=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ge(t,e){return void 0!==t.updateTime?e instanceof fn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof fn}var We=function(){};function Ke(t,e,n){return t instanceof Xe?function(t,e,n){return new fn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Je?function(t,e,n){if(!Ge(t.rn,e))return new ln(t.key,n.version);var r=Ze(t,e);return new fn(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof tn?function(t,e,n){if(b(null!=n.transformResults),!Ge(t.rn,e))return new ln(t.key,n.version);var r=en(t,e),i=function(t,e,n){var r=[];b(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof fn&&(u=e.field(o.field)),r.push(Ne(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=nn(t,r.data(),i);return new fn(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new hn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function He(t,e,n,r){return t instanceof Xe?function(t,e){if(!Ge(t.rn,e))return e;var n=$e(e);return new fn(t.key,n,t.value,{an:!0})}(t,e):t instanceof Je?function(t,e){if(!Ge(t.rn,e))return e;var n=$e(e),r=Ze(t,e);return new fn(t.key,n,r,{an:!0})}(t,e):t instanceof tn?function(t,e,n,r){if(!Ge(t.rn,e))return e;var i=en(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof fn&&(c=n.field(u.field)),null===c&&r instanceof fn&&(c=r.field(u.field)),i.push(xe(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=nn(t,i.data(),o);return new fn(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return Ge(t.rn,e)?new hn(t.key,k.min()):e}(t,e)}function Ye(t,e){return t instanceof tn?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof fn?e.field(o.field):void 0,u=De(o.transform,s||null);null!=u&&(n=null==n?(new un).set(o.field,u):n.set(o.field,u))}return n?n.hn():null}(t,e):null}function Qe(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||N(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ke&&e instanceof ke||t instanceof Re&&e instanceof Re?N(t.elements,e.elements,Lt):t instanceof Me&&e instanceof Me?Lt(t.nn,e.nn):t instanceof Pe&&e instanceof Pe}(t.transform,e.transform)}(t,e)})))}function $e(t){return t instanceof fn?t.version:k.min()}var Xe=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(e.c)(n,t),n}(We),Je=function(t){function n(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(e.c)(n,t),n}(We);function Ze(t,e){return function(t,e){var n=new un(e);return t.en.fields.forEach((function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.hn()}(t,e instanceof fn?e.data():sn.empty())}var tn=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=ze.exists(!0),r}return Object(e.c)(n,t),n}(We);function en(t,e){return e}function nn(t,e,n){for(var r=new un(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.hn()}var rn=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(e.c)(n,t),n}(We),on=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(e.c)(n,t),n}(We),sn=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ht(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return Lt(this.proto,t.proto)},t}(),un=function(){function t(t){void 0===t&&(t=sn.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===kt(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn(M.X(),this._n);return null!=t?new sn(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=Ht(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function an(t){var e=[];return St(t.fields||{},(function(t,n){var r=new M([t]);if(Ht(n)){var i=an(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new qe(e)}var cn=function(t,e){this.key=t,this.version=e},fn=function(t){function n(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(e.c)(n,t),n.prototype.field=function(t){return this.wn.field(t)},n.prototype.data=function(){return this.wn},n.prototype.En=function(){return this.wn.proto},n.prototype.isEqual=function(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},n.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n}(cn),hn=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(e.c)(n,t),n.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(cn),ln=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(cn),pn=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.In=null,this.mn=null,this.startAt,this.endAt};function dn(t,e,n,r,i,o,s,u){return new pn(t,e,n,r,i,o,s,u)}function vn(t){return new pn(t)}function yn(t){return!U(t.limit)&&"F"===t.limitType}function gn(t){return!U(t.limit)&&"L"===t.limitType}function bn(t){return t.Tn.length>0?t.Tn[0].field:null}function mn(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function wn(t){return null!==t.collectionGroup}function _n(t){var e=m(t);if(null===e.In){e.In=[];var n=mn(e),r=bn(e);if(null!==n&&null===r)n.tt()||e.In.push(new Bn(n)),e.In.push(new Bn(M.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var u=s[o];e.In.push(u),u.field.tt()&&(i=!0)}if(!i){var a=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new Bn(M.et(),a))}}}return e.In}function En(t){var e=m(t);if(!e.mn)if("F"===e.limitType)e.mn=z(e.path,e.collectionGroup,_n(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=_n(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Bn(o.field,s))}var u=e.endAt?new Vn(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Vn(e.startAt.position,!e.startAt.before):null;e.mn=z(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.mn}function On(t,e,n){return new pn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function In(t,e){return W(En(t),En(e))&&t.limitType===e.limitType}function Tn(t){return G(En(t))+"|lt:"+t.limitType}function jn(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.J()+" "+e.op+" "+Vt(e.value);var e})).join(", ")+"]"),U(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Un(t.startAt)),t.endAt&&(e+=", endAt: "+Un(t.endAt)),"Target("+e+")"}(En(t))+"; limitType="+t.limitType+")"}function An(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):V.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!qn(t.startAt,_n(t),e)||t.endAt&&qn(t.endAt,_n(t),e))}(t,e)}function Sn(t){return function(e,n){for(var r=!1,i=0,o=_n(t);i<o.length;i++){var s=o[i],u=zn(s,e,n);if(0!==u)return u;r=r||s.field.tt()}return 0}}var xn=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(e.c)(n,t),n.create=function(t,e,r){return t.tt()?"in"===e||"not-in"===e?this.Rn(t,e,r):new Nn(t,e,r):"array-contains"===e?new Ln(t,r):"in"===e?new Rn(t,r):"not-in"===e?new Cn(t,r):"array-contains-any"===e?new Mn(t,r):new n(t,e,r)},n.Rn=function(t,e,n){return"in"===e?new Dn(t,n):new Pn(t,n)},n.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn(Ct(e,this.value)):null!==e&&kt(this.value)===kt(e)&&this.Pn(Ct(e,this.value))},n.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return g()}},n.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},n}((function(){})),Nn=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=V.it(r.referenceValue),i}return Object(e.c)(n,t),n.prototype.matches=function(t){var e=V.$(t.key,this.key);return this.Pn(e)},n}(xn),Dn=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=kn("in",n),r}return Object(e.c)(n,t),n.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},n}(xn),Pn=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=kn("not-in",n),r}return Object(e.c)(n,t),n.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},n}(xn);function kn(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return V.it(t.referenceValue)}))}var Ln=function(t){function n(e,n){return t.call(this,e,"array-contains",n)||this}return Object(e.c)(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return Gt(e)&&Rt(e.arrayValue,this.value)},n}(xn),Rn=function(t){function n(e,n){return t.call(this,e,"in",n)||this}return Object(e.c)(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Rt(this.value.arrayValue,e)},n}(xn),Cn=function(t){function n(e,n){return t.call(this,e,"not-in",n)||this}return Object(e.c)(n,t),n.prototype.matches=function(t){if(Rt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Rt(this.value.arrayValue,e)},n}(xn),Mn=function(t){function n(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(e.c)(n,t),n.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Gt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Rt(e.value.arrayValue,t)}))},n}(xn),Vn=function(t,e){this.position=t,this.before=e};function Un(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Vt(t)})).join(",")}function qn(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?V.$(V.it(s.referenceValue),n.key):Ct(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Fn(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Lt(t.position[n],e.position[n]))return!1;return!0}var Bn=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function zn(t,e,n){var r=t.field.tt()?V.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ct(r,i):g()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}function Gn(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Wn=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ke(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=He(i,e,e,this.gn))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=He(a,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&N(this.mutations,t.mutations,(function(t,e){return Qe(t,e)}))&&N(this.baseMutations,t.baseMutations,(function(t,e){return Qe(t,e)}))},t}(),Kn=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){b(e.mutations.length===r.length);for(var i=ft,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Hn=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.Cn(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){St(this.Nn,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.W=function(){return xt(this.Nn)},t}(),Yn=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t((function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)}),(function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&g(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t((function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}}))},t.prototype.Ln=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn((function(){return e(n)})):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.qn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.qn(r)},t}(),Qn=function(){function t(){this.Qn=new Hn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:k.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?Yn.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),$n=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};function Xn(t){return new $t(t,!0)}function Jn(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Zn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tr=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach((function(t){return t()}))},t}(),er=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t}))},t.prototype.ls=function(t,e,n){var r=ut();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)})),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next((function(e){return n.fs(t,e)}))},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next((function(r){var i=n.ls(t,e,r),o=st();return i.forEach((function(t,e){e||(e=new hn(t,k.min())),o=o.Tt(t,e)})),o}))},t.prototype.ws=function(t,e,n){return function(t){return V.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):wn(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new V(e)).next((function(t){var e=ct();return t instanceof fn&&(e=e.Tt(t.key,t)),e}))},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=ct();return this.os.As(t,i).next((function(s){return Yn.forEach(s,(function(s){var u=function(t,e){return new pn(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,u,n).next((function(t){t.forEach((function(t,e){o=o.Tt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next((function(n){return r=n,o.rs.Rs(t,e)})).next((function(e){return i=e,o.Ps(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,f=r.get(c),h=He(a,f,f,o.gn);r=h instanceof fn?r.Tt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){An(e,n)||(r=r.remove(t))})),r}))},t.prototype.Ps=function(t,e,n){for(var r=lt(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Je&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.ss.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof fn&&(c=c.Tt(t,e))})),c}))},t}(),nr=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=lt(),i=lt(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),rr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();rr.Ds=-1;var ir=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,(function(){return e.$s=Date.now(),t()})),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),or=function(){function n(t,e,r){this.name=t,this.version=e,this.Ws=r,12.2===n.js(Object(o.g)())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return n.delete=function(t){return p("SimpleDb","Removing database:",t),hr(window.indexedDB.deleteDatabase(t)).Ln()},n.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(n.zs())return!0;var t=Object(o.g)(),e=n.js(t),r=0<e&&e<10,i=n.Hs(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},n.zs=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.Js)},n.Ys=function(t,e){return t.store(e)},n.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},n.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},n.prototype.Xs=function(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.db?[3,2]:(p("SimpleDb","Opening database:",this.name),n=this,[4,new Promise((function(e,n){var i=indexedDB.open(r.name,r.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){n(new ur(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var r=e.target.error;"VersionError"===r.name?n(new _(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new ur(t,r))},i.onupgradeneeded=function(t){p("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;r.Ws.createOrUpgrade(e,i.transaction,t.oldVersion,r.version).next((function(){p("SimpleDb","Database upgrade to version "+r.version+" complete")}))}}))]);case 1:n.db=e.sent(),e.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return r.Zs(t)}),this.db)]}}))}))},n.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},n.prototype.runTransaction=function(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,u,a,c;return Object(e.d)(this,(function(f){switch(f.label){case 0:o="readonly"===n,s=0,u=function(){var n,u,c,f,h;return Object(e.d)(this,(function(e){switch(e.label){case 0:++s,e.label=1;case 1:return e.trys.push([1,4,,5]),[4,a.Xs(t)];case 2:return a.db=e.sent(),n=cr.open(a.db,t,o?"readonly":"readwrite",r),u=i(n).catch((function(t){return n.abort(t),Yn.reject(t)})).Ln(),c={},u.catch((function(){})),[4,n.ei];case 3:return[2,(c.value=(e.sent(),u),c)];case 4:return f=e.sent(),h="FirebaseError"!==f.name&&s<3,p("SimpleDb","Transaction failed with error:",f.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(f)}];case 5:return[2]}}))},a=this,f.label=1;case 1:return[5,u()];case 2:if("object"==typeof(c=f.sent()))return[2,c.value];f.label=3;case 3:return[3,1];case 4:return[2]}}))}))},n.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},n}(),sr=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return hr(this.ni.delete())},t}(),ur=function(t){function n(e,n){var r=this;return(r=t.call(this,w.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(e.c)(n,t),n}(_);function ar(t){return"IndexedDbTransactionError"===t.name}var cr=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new $n,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new ur(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=pr(e.target.error);n.ci.reject(new ur(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ur(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(p("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new fr(e)},t}(),fr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),hr(n)},t.prototype.add=function(t){return p("SimpleDb","ADD",this.store.name,t,t),hr(this.store.add(t))},t.prototype.get=function(t){var e=this;return hr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return p("SimpleDb","DELETE",this.store.name,t),hr(this.store.delete(t))},t.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),hr(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.hi=function(t,e){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,(function(t,e,n){return n.delete()}))},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new Yn((function(n,r){e.onerror=function(t){var e=pr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.ai=function(t,e){var n=[];return new Yn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sr(i),s=e(i.primaryKey,i.value,o);if(s instanceof Yn){var u=s.catch((function(t){return o.done(),Yn.reject(t)}));n.push(u)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}})).next((function(){return Yn.qn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function hr(t){return new Yn((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=pr(t.target.error);n(e)}}))}var lr=!1;function pr(t){var e=or.js(Object(o.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new _("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return lr||(lr=!0,setTimeout((function(){throw r}),0)),r}}return t}function dr(){return"undefined"!=typeof window?window:null}function vr(){return"undefined"!=typeof document?document:null}var yr=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new $n,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch((function(t){}))}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout((function(){return e.Ai()}),t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new _(w.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri((function(){return null!==t.mi?(t.clearTimeout(),t.op().then((function(e){return t.Ti.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),gr=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new ir(this,"async_queue_retry"),this.Di=function(){var e=vr();e&&p("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=vr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=vr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise((function(t){})):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri((function(){return e.gi.push(t),e.ki()}))},t.prototype.ki=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:if(0===this.gi.length)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return e.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!ar(t=e.sent()))throw t;return p("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs((function(){return n.ki()})),e.label=5;case 5:return[2]}}))}))},t.prototype.Fi=function(t){var e=this,n=this.Pi.then((function(){return e.vi=!0,t().catch((function(t){throw e.pi=t,e.vi=!1,d("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.vi=!1,t}))}));return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=yr.Ii(this,t,e,n,(function(t){return r.$i(t)}));return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&g()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(e.b)(this,void 0,void 0,(function(){var t;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then((function(){e.Vi.sort((function(t,e){return t.wi-e.wi}));for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()}))},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function br(t,e){if(d("AsyncQueue",e+": "+t),ar(t))return new _(w.UNAVAILABLE,e+": "+t);throw t}function mr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=x(n,i);return 0===s?x(r,o):s}var wr=function(){function t(t){this.Ki=t,this.buffer=new rt(mr),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();mr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),_r={zi:!1,Hi:0,Ji:0,Yi:0},Er=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();Er.nr=10,Er.sr=1e3,Er.ir=new Er(41943040,Er.nr,Er.sr),Er.rr=new Er(-1,0,0);var Or=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var n=this,r=this.ur?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ar=this.di.Us("lru_garbage_collection",r,(function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:this.ar=null,this.ur=!0,e.label=1;case 1:return e.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return e.sent(),[3,7];case 3:return ar(n=e.sent())?(p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n),[3,6]):[3,4];case 4:return[4,Xi(n)];case 5:e.sent(),e.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return e.sent(),[2]}}))}))}))},t}(),Ir=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Tr=function(t,e){var n=this;if(0===e)return Yn.resolve(rr.Ds);var r=new wr(e);return this.dr.Ue(t,(function(t){return r.Gi(t.sequenceNumber)})).next((function(){return n.dr.Ir(t,(function(t){return r.Gi(t)}))})).next((function(){return r.maxValue}))},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(p("LruGarbageCollector","Garbage collection skipped; disabled"),Yn.resolve(_r)):this.Pr(t).next((function(r){return r<n.params.Xi?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),_r):n.gr(t,e)}))},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,o,s,u,a,c,f=this,h=Date.now();return this.wr(t,this.params.Zi).next((function(e){return e>f.params.tr?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.tr+" from "+e),r=f.params.tr):r=e,s=Date.now(),f.Tr(t,r)})).next((function(r){return n=r,u=Date.now(),f.mr(t,n,e)})).next((function(e){return o=e,a=Date.now(),f.Ar(t,n)})).next((function(t){return c=Date.now(),l()<=i.a.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(u-s)+"ms\n\tRemoved "+o+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-h)+"ms"),Yn.resolve({zi:!0,Hi:r,Ji:o,Yi:t})}))},t}(),Tr=function(){function t(){}return t.prototype.yr=function(t){this.Vr=t},t.prototype.ws=function(t,e,n,r){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(k.min())?this.pr(t,e):this.Vr._s(t,r).next((function(s){var u=o.vr(e,s);return(yn(e)||gn(e))&&o.br(e.limitType,u,r,n)?o.pr(t,e):(l()<=i.a.DEBUG&&p("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),jn(e)),o.Vr.ws(t,e,n).next((function(t){return u.forEach((function(e){t=t.Tt(e.key,e)})),t})))}))},t.prototype.vr=function(t,e){var n=new rt(Sn(t));return e.forEach((function(e,r){r instanceof fn&&An(t,r)&&(n=n.add(r))})),n},t.prototype.br=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.pr=function(t,e){return l()<=i.a.DEBUG&&p("QueryEngine","Using full collection scan to execute query:",jn(e)),this.Vr.ws(t,e,k.min())},t}();function jr(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Sr(e)),e=Ar(t.get(n),e);return Sr(e)}function Ar(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Sr(t){return t+""}function xr(t){var e=t.length;if(b(e>=2),2===e)return b(""===t.charAt(0)&&""===t.charAt(1)),R.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&g(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:g()}o=s+2}return new R(r)}var Nr=function(t){this.Sr=t};function Dr(t,e){if(e.document)return function(t,e,n){var r=ue(t,e.name),i=re(e.updateTime),o=new sn({mapValue:{fields:e.fields}});return new fn(r,i,o,{hasCommittedMutations:!!n})}(t.Sr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=V.ct(e.noDocument.path),r=Cr(e.noDocument.readTime);return new hn(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=V.ct(e.unknownDocument.path),o=Cr(e.unknownDocument.version);return new ln(i,o)}return g()}function Pr(t,e,n){var r=kr(n),i=e.key.path.q().H();if(e instanceof fn){var o=function(t,e){return{name:se(t,e.key),fields:e.En().mapValue.fields,updateTime:te(t,e.version.M())}}(t.Sr,e),s=e.hasCommittedMutations;return new ci(null,null,o,s,r,i)}if(e instanceof hn){var u=e.key.path.H(),a=Rr(e.version),c=e.hasCommittedMutations;return new ci(null,new ui(u,a),null,c,r,i)}if(e instanceof ln){var f=e.key.path.H(),h=Rr(e.version);return new ci(new ai(f,h),null,null,!0,r,i)}return g()}function kr(t){var e=t.M();return[e.seconds,e.nanoseconds]}function Lr(t){var e=new P(t[0],t[1]);return k.N(e)}function Rr(t){var e=t.M();return new ni(e.seconds,e.nanoseconds)}function Cr(t){var e=new P(t.seconds,t.nanoseconds);return k.N(e)}function Mr(t,e){var n=(e.baseMutations||[]).map((function(e){return de(t.Sr,e)})),r=e.mutations.map((function(e){return de(t.Sr,e)})),i=P.fromMillis(e.localWriteTimeMs);return new Wn(e.batchId,i,n,r)}function Vr(t){var e,n,r=Cr(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Cr(t.lastLimboFreeSnapshotVersion):k.min();return void 0!==t.query.documents?(b(1===(n=t.query).documents.length),e=En(vn(ce(n.documents[0])))):e=function(t){return En(ge(t))}(t.query),new $(e,t.targetId,0,t.lastListenSequenceNumber,r,i,H.fromBase64String(t.resumeToken))}function Ur(t,e){var n,r=Rr(e.ft),i=Rr(e.lastLimboFreeSnapshotVersion);n=K(e.target)?ve(t.Sr,e.target):ye(t.Sr,e.target);var o=e.resumeToken.toBase64();return new hi(e.targetId,G(e.target),r,o,e.sequenceNumber,i,n)}function qr(t){var e=ge({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?On(e,e.limit,"L"):e}var Fr=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Dr=r,this.Cr={}}return t.Nr=function(e,n,r,i){return b(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.Fr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gr(t)._i({index:oi.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Or=function(t,e,n,r){var i=this,o=Wr(t),s=Gr(t);return s.add({}).next((function(u){b("number"==typeof u);for(var a=new Wn(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return pe(t.Sr,e)})),i=n.mutations.map((function(e){return pe(t.Sr,e)}));return new oi(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,a),f=[],h=new rt((function(t,e){return x(t.J(),e.J())})),l=0,p=r;l<p.length;l++){var d=p[l],v=si.key(i.userId,d.key.path,u);h=h.add(d.key.path.q()),f.push(s.put(c)),f.push(o.put(v,si.PLACEHOLDER))}return h.forEach((function(e){f.push(i.os.Mr(t,e))})),t.es((function(){i.Cr[u]=a.keys()})),Yn.qn(f).next((function(){return a}))}))},t.prototype.kr=function(t,e){var n=this;return Gr(t).get(e).next((function(t){return t?(b(t.userId===n.userId),Mr(n.serializer,t)):null}))},t.prototype.$r=function(t,e){var n=this;return this.Cr[e]?Yn.resolve(this.Cr[e]):this.kr(t,e).next((function(t){if(t){var r=t.keys();return n.Cr[e]=r,r}return null}))},t.prototype.Lr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Gr(t)._i({index:oi.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(b(e.batchId>=r),o=Mr(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Br=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Gr(t)._i({index:oi.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.qr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gr(t).ui(oi.userMutationsIndex,n).next((function(t){return t.map((function(t){return Mr(e.serializer,t)}))}))},t.prototype.us=function(t,e){var n=this,r=si.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Wr(t)._i({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],f=xr(a);if(u===n.userId&&e.path.isEqual(f))return Gr(t).get(c).next((function(t){if(!t)throw g();b(t.userId===n.userId),o.push(Mr(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.ds=function(t,e){var n=this,r=new rt(x),i=[];return e.forEach((function(e){var o=si.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Wr(t)._i({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=xr(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Yn.qn(i).next((function(){return n.Ur(t,r)}))},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=si.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new rt(x);return Wr(t)._i({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],f=xr(a);s===n.userId&&r.j(f)?f.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Ur(t,u)}))},t.prototype.Ur=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Gr(t).get(e).next((function(t){if(null===t)throw g();b(t.userId===n.userId),r.push(Mr(n.serializer,t))})))})),Yn.qn(i).next((function(){return r}))},t.prototype.Qr=function(t,e){var n=this;return zr(t.Kr,this.userId,e).next((function(r){return t.es((function(){n.Wr(e.batchId)})),Yn.forEach(r,(function(e){return n.Dr.jr(t,e)}))}))},t.prototype.Wr=function(t){delete this.Cr[t]},t.prototype.Gr=function(t){var e=this;return this.Fr(t).next((function(n){if(!n)return Yn.resolve();var r=IDBKeyRange.lowerBound(si.prefixForUser(e.userId)),i=[];return Wr(t)._i({range:r},(function(t,n,r){if(t[0]===e.userId){var o=xr(t[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length)}))}))},t.prototype.zr=function(t,e){return Br(t,this.userId,e)},t.prototype.Hr=function(t){var e=this;return Kr(t).get(this.userId).next((function(t){return t||new ii(e.userId,-1,"")}))},t}();function Br(t,e,n){var r=si.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Wr(t)._i({range:o,li:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function zr(t,e,n){var r=t.store(oi.store),i=t.store(si.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r._i({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){b(1===u)})));for(var c=[],f=0,h=n.mutations;f<h.length;f++){var l=h[f],p=si.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Yn.qn(o).next((function(){return c}))}function Gr(t){return Pi.Ys(t,oi.store)}function Wr(t){return Pi.Ys(t,si.store)}function Kr(t){return Pi.Ys(t,ii.store)}var Hr=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return $r(t).put(Xr(e),n)},t.prototype.Hn=function(t,e){var n=$r(t),r=Xr(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Jr(t,r)}))},t.prototype.Jn=function(t,e){var n=this;return $r(t).get(Xr(e)).next((function(t){return n.Yr(t)}))},t.prototype.Xr=function(t,e){var n=this;return $r(t).get(Xr(e)).next((function(t){var e=n.Yr(t);return e?{zn:e,size:Jr(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ut();return this.Zr(t,e,(function(t,e){var i=n.Yr(e);r=r.Tt(t,i)})).next((function(){return r}))},t.prototype.eo=function(t,e){var n=this,r=ut(),i=new tt(V.$);return this.Zr(t,e,(function(t,e){var o=n.Yr(e);o?(r=r.Tt(t,o),i=i.Tt(t,Jr(e))):(r=r.Tt(t,null),i=i.Tt(t,0))})).next((function(){return{no:r,so:i}}))},t.prototype.Zr=function(t,e,n){if(e.W())return Yn.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return $r(t)._i({range:r},(function(t,e,r){for(var s=V.ct(t);o&&V.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null}))},t.prototype.ws=function(t,e,n){var r=this,i=ct(),o=e.path.length+1,s={};if(n.isEqual(k.min())){var u=e.path.H();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.H(),c=kr(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=ci.collectionReadTimeIndex}return $r(t)._i(s,(function(t,n,s){if(t.length===o){var u=Dr(r.serializer,n);e.path.j(u.key.path)?u instanceof fn&&An(e,u)&&(i=i.Tt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.io=function(t){return new Yr(this,!!t&&t.ro)},t.prototype.oo=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Qr(t).get(fi.key).next((function(t){return b(!!t),t}))},t.prototype.Jr=function(t,e){return Qr(t).put(fi.key,e)},t.prototype.Yr=function(t){if(t){var e=Dr(this.serializer,t);return e instanceof hn&&e.version.isEqual(k.min())?null:e}return null},t}(),Yr=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).co=e,r.ro=n,r.uo=new Hn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(e.c)(n,t),n.prototype.Zn=function(t){var e=this,n=[],r=0,i=new rt((function(t,e){return x(t.J(),e.J())}));return this.Qn.forEach((function(o,s){var u=e.uo.get(o);if(s.zn){var a=Pr(e.co.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=Jr(a);r+=c-u,n.push(e.co.jn(t,o,a))}else if(r-=u,e.ro){var f=Pr(e.co.serializer,new hn(o,k.min()),e.Wn(o));n.push(e.co.jn(t,o,f))}else n.push(e.co.Hn(t,o))})),i.forEach((function(r){n.push(e.co.os.Mr(t,r))})),n.push(this.co.updateMetadata(t,r)),Yn.qn(n)},n.prototype.Yn=function(t,e){var n=this;return this.co.Xr(t,e).next((function(t){return null===t?(n.uo.set(e,0),null):(n.uo.set(e,t.size),t.zn)}))},n.prototype.Xn=function(t,e){var n=this;return this.co.eo(t,e).next((function(t){var e=t.no;return t.so.forEach((function(t,e){n.uo.set(t,e)})),e}))},n}(Qn);function Qr(t){return Pi.Ys(t,fi.store)}function $r(t){return Pi.Ys(t,ci.store)}function Xr(t){return t.path.H()}function Jr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g();e=t.noDocument}return JSON.stringify(e).length}var Zr=function(){function t(){this.ao=new ti}return t.prototype.Mr=function(t,e){return this.ao.add(e),Yn.resolve()},t.prototype.As=function(t,e){return Yn.resolve(this.ao.getEntries(e))},t}(),ti=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new rt(R.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new rt(R.$)).H()},t}(),ei=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;b(n<r&&n>=0&&r<=11);var o=new cr("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ri.store)}(t),function(t){t.createObjectStore(ii.store,{keyPath:ii.keyPath}),t.createObjectStore(oi.store,{keyPath:oi.keyPath,autoIncrement:!0}).createIndex(oi.userMutationsIndex,oi.userMutationsKeyPath,{unique:!0}),t.createObjectStore(si.store)}(t),vi(t),function(t){t.createObjectStore(ci.store)}(t));var s=Yn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(li.store),t.deleteObjectStore(hi.store),t.deleteObjectStore(pi.store)}(t),vi(t)),s=s.next((function(){return function(t){var e=t.store(pi.store),n=new pi(0,0,k.min().M(),0);return e.put(pi.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(oi.store).ui().next((function(n){t.deleteObjectStore(oi.store),t.createObjectStore(oi.store,{keyPath:oi.keyPath,autoIncrement:!0}).createIndex(oi.userMutationsIndex,oi.userMutationsKeyPath,{unique:!0});var r=e.store(oi.store),i=n.map((function(t){return r.put(t)}));return Yn.qn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(yi.store,{keyPath:yi.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(fi.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ci.store);e.createIndex(ci.readTimeIndex,ci.readTimeIndexPath,{unique:!1}),e.createIndex(ci.collectionReadTimeIndex,ci.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(gi.store,{keyPath:gi.keyPath})}(t),function(t){t.createObjectStore(bi.store,{keyPath:bi.keyPath})}(t)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(ci.store)._i((function(t,n){e+=Jr(n)})).next((function(){var n=new fi(e);return t.store(fi.store).put(fi.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(ii.store),r=t.store(oi.store);return n.ui().next((function(n){return Yn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(oi.userMutationsIndex,i).next((function(r){return Yn.forEach(r,(function(r){b(r.userId===n.userId);var i=Mr(e.serializer,r);return zr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(li.store),n=t.store(ci.store);return t.store(pi.store).get(pi.key).next((function(t){var r=[];return n._i((function(n,i){var o=new R(n),s=function(t){return[0,jr(t)]}(o);r.push(e.get(s).next((function(n){return n?Yn.resolve():function(n){return e.put(new li(0,jr(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Yn.qn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(di.store,{keyPath:di.keyPath});var n=e.store(di.store),r=new ti,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:jr(i)})}};return e.store(ci.store)._i({li:!0},(function(t,e){var n=new R(t);return i(n.q())})).next((function(){return e.store(si.store)._i({li:!0},(function(t,e){t[0];var n=t[1],r=(t[2],xr(n));return i(r.q())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(hi.store);return n._i((function(t,r){var i=Vr(r),o=Ur(e.serializer,i);return n.put(o)}))},t}(),ni=function(t,e){this.seconds=t,this.nanoseconds=e},ri=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ri.store="owner",ri.key="owner";var ii=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ii.store="mutationQueues",ii.keyPath="userId";var oi=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};oi.store="mutations",oi.keyPath="batchId",oi.userMutationsIndex="userMutationsIndex",oi.userMutationsKeyPath=["userId","batchId"];var si=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,jr(e)]},t.key=function(t,e,n){return[t,jr(e),n]},t}();si.store="documentMutations",si.PLACEHOLDER=new si;var ui=function(t,e){this.path=t,this.readTime=e},ai=function(t,e){this.path=t,this.version=e},ci=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ci.store="remoteDocuments",ci.readTimeIndex="readTimeIndex",ci.readTimeIndexPath="readTime",ci.collectionReadTimeIndex="collectionReadTimeIndex",ci.collectionReadTimeIndexPath=["parentPath","readTime"];var fi=function(t){this.byteSize=t};fi.store="remoteDocumentGlobal",fi.key="remoteDocumentGlobalKey";var hi=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};hi.store="targets",hi.keyPath="targetId",hi.queryTargetsIndexName="queryTargetsIndex",hi.queryTargetsKeyPath=["canonicalId","targetId"];var li=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};li.store="targetDocuments",li.keyPath=["targetId","path"],li.documentTargetsIndex="documentTargetsIndex",li.documentTargetsKeyPath=["path","targetId"];var pi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};pi.key="targetGlobalKey",pi.store="targetGlobal";var di=function(t,e){this.collectionId=t,this.parent=e};function vi(t){t.createObjectStore(li.store,{keyPath:li.keyPath}).createIndex(li.documentTargetsIndex,li.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hi.store,{keyPath:hi.keyPath}).createIndex(hi.queryTargetsIndexName,hi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(pi.store)}di.store="collectionParents",di.keyPath=["collectionId","parent"];var yi=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};yi.store="clientMetadata",yi.keyPath="clientId";var gi=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};gi.store="bundles",gi.keyPath="bundleId";var bi=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};bi.store="namedQueries",bi.keyPath="name";var mi=Object(e.g)(Object(e.g)(Object(e.g)(Object(e.g)([ii.store,oi.store,si.store,ci.store,hi.store,ri.store,pi.store,li.store],[yi.store]),[fi.store]),[di.store]),[gi.store,bi.store]),wi=function(){function t(t){this.serializer=t}return t.prototype.ho=function(t,e){return _i(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Cr(e.createTime),version:e.version};var e}))},t.prototype.lo=function(t,e){return _i(t).put({bundleId:(n=e).id,createTime:Rr(re(n.createTime)),version:n.version});var n},t.prototype._o=function(t,e){return Ei(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:qr(e.bundledQuery),readTime:Cr(e.readTime)};var e}))},t.prototype.fo=function(t,e){return Ei(t).put(function(t){return{name:t.name,readTime:Rr(re(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function _i(t){return Pi.Ys(t,gi.store)}function Ei(t){return Pi.Ys(t,bi.store)}var Oi=function(){function t(){this.wo=new ti}return t.prototype.Mr=function(t,e){var n=this;if(!this.wo.has(e)){var r=e.K(),i=e.q();t.es((function(){n.wo.add(e)}));var o={collectionId:r,parent:jr(i)};return Ii(t).put(o)}return Yn.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[D(e),""],!1,!0);return Ii(t).ui(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(xr(o.parent))}return n}))},t}();function Ii(t){return Pi.Ys(t,di.store)}var Ti=function(){function t(t){this.Eo=t}return t.prototype.next=function(){return this.Eo+=2,this.Eo},t.To=function(){return new t(0)},t.Io=function(){return new t(-1)},t}(),ji=function(){function t(t,e){this.Dr=t,this.serializer=e}return t.prototype.mo=function(t){var e=this;return this.Ao(t).next((function(n){var r=new Ti(n.highestTargetId);return n.highestTargetId=r.next(),e.Ro(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Po=function(t){return this.Ao(t).next((function(t){return k.N(new P(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.yo=function(t){return this.Ao(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Vo=function(t,e,n){var r=this;return this.Ao(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ro(t,i)}))},t.prototype.po=function(t,e){var n=this;return this.vo(t,e).next((function(){return n.Ao(t).next((function(r){return r.targetCount+=1,n.bo(e,r),n.Ro(t,r)}))}))},t.prototype.So=function(t,e){return this.vo(t,e)},t.prototype.Do=function(t,e){var n=this;return this.Co(t,e.targetId).next((function(){return Ai(t).delete(e.targetId)})).next((function(){return n.Ao(t)})).next((function(e){return b(e.targetCount>0),e.targetCount-=1,n.Ro(t,e)}))},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return Ai(t)._i((function(s,u){var a=Vr(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Do(t,a)))})).next((function(){return Yn.qn(o)})).next((function(){return i}))},t.prototype.Ue=function(t,e){return Ai(t)._i((function(t,n){var r=Vr(n);e(r)}))},t.prototype.Ao=function(t){return Si(t).get(pi.key).next((function(t){return b(null!==t),t}))},t.prototype.Ro=function(t,e){return Si(t).put(pi.key,e)},t.prototype.vo=function(t,e){return Ai(t).put(Ur(this.serializer,e))},t.prototype.bo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.No=function(t){return this.Ao(t).next((function(t){return t.targetCount}))},t.prototype.xo=function(t,e){var n=G(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ai(t)._i({range:r,index:hi.queryTargetsIndexName},(function(t,n,r){var o=Vr(n);W(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Fo=function(t,e,n){var r=this,i=[],o=xi(t);return e.forEach((function(e){var s=jr(e.path);i.push(o.put(new li(n,s))),i.push(r.Dr.Oo(t,n,e))})),Yn.qn(i)},t.prototype.Mo=function(t,e,n){var r=this,i=xi(t);return Yn.forEach(e,(function(e){var o=jr(e.path);return Yn.qn([i.delete([n,o]),r.Dr.ko(t,n,e)])}))},t.prototype.Co=function(t,e){var n=xi(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.$o=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xi(t),i=lt();return r._i({range:n,li:!0},(function(t,e,n){var r=xr(t[1]),o=new V(r);i=i.add(o)})).next((function(){return i}))},t.prototype.zr=function(t,e){var n=jr(e.path),r=IDBKeyRange.bound([n],[D(n)],!1,!0),i=0;return xi(t)._i({index:li.documentTargetsIndex,li:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ze=function(t,e){return Ai(t).get(e).next((function(t){return t?Vr(t):null}))},t}();function Ai(t){return Pi.Ys(t,hi.store)}function Si(t){return Pi.Ys(t,pi.store)}function xi(t){return Pi.Ys(t,li.store)}var Ni="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Di=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).Kr=e,r.Lo=n,r}return Object(e.c)(n,t),n}(tr),Pi=function(){function t(e,n,r,i,o,s,u,a,c,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=u,this.Bo=c,this.qo=f,this.Uo=null,this.Qo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ko=null,this.inForeground=!1,this.Wo=null,this.jo=null,this.Go=Number.NEGATIVE_INFINITY,this.zo=function(t){return Promise.resolve()},!t.Gs())throw new _(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Dr=new Ri(this,i),this.Ho=n+"main",this.serializer=new Nr(a),this.Jo=new or(this.Ho,11,new ei(this.serializer)),this.Yo=new ji(this.Dr,this.serializer),this.os=new Oi,this.ss=function(t,e){return new Hr(t,e)}(this.serializer,this.os),this.Xo=new wi(this.serializer),this.window&&this.window.localStorage?this.Zo=this.window.localStorage:(this.Zo=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof Di)return or.Ys(t.Kr,e);throw g()},t.prototype.start=function(){var t=this;return this.tc().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new _(w.FAILED_PRECONDITION,Ni);return t.ec(),t.nc(),t.sc(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Yo.yo(e)}))})).then((function(e){t.Uo=new rr(e,t.Bo)})).then((function(){t.Qo=!0})).catch((function(e){return t.Jo&&t.Jo.close(),Promise.reject(e)}))},t.prototype.ic=function(t){var n=this;return this.zo=function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return this.lr?[2,t(r)]:[2]}))}))},t(this.isPrimary)},t.prototype.rc=function(t){var n=this;this.Jo.ti((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return null===r.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.oc=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return this.lr?[4,this.tc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.tc=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Li(e).put(new yi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.cc(e).next((function(e){e||(t.isPrimary=!1,t.Cs.Mi((function(){return t.zo(!1)})))}))})).next((function(){return t.uc(e)})).next((function(n){return t.isPrimary&&!n?t.ac(e).next((function(){return!1})):!!n&&t.hc(e).next((function(){return!0}))}))})).catch((function(e){if(ar(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Cs.Mi((function(){return t.zo(e)})),t.isPrimary=e}))},t.prototype.cc=function(t){var e=this;return ki(t).get(ri.key).next((function(t){return Yn.resolve(e.lc(t))}))},t.prototype._c=function(t){return Li(t).delete(this.clientId)},t.prototype.fc=function(){return Object(e.b)(this,void 0,void 0,(function(){var n,r,i,o,s=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return!this.isPrimary||this.dc(this.Go,18e5)?[3,2]:(this.Go=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Ys(e,yi.store);return n.ui().next((function(t){var e=s.wc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Yn.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(n=e.sent(),this.Zo)for(r=0,i=n;r<i.length;r++)o=i[r],this.Zo.removeItem(this.Ec(o.clientId));e.label=2;case 2:return[2]}}))}))},t.prototype.sc=function(){var t=this;this.jo=this.Cs.Us("client_metadata_refresh",4e3,(function(){return t.tc().then((function(){return t.fc()})).then((function(){return t.sc()}))}))},t.prototype.lc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.uc=function(t){var e=this;return this.qo?Yn.resolve(!0):ki(t).get(ri.key).next((function(n){if(null!==n&&e.dc(n.leaseTimestampMs,5e3)&&!e.Tc(n.ownerId)){if(e.lc(n)&&e.networkEnabled)return!0;if(!e.lc(n)){if(!n.allowTabSynchronization)throw new _(w.FAILED_PRECONDITION,Ni);return!1}}return!(!e.networkEnabled||!e.inForeground)||Li(t).ui().next((function(t){return void 0===e.wc(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&p("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Ic=function(){return Object(e.b)(this,void 0,void 0,(function(){var t=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.Qo=!1,this.mc(),this.jo&&(this.jo.cancel(),this.jo=null),this.Ac(),this.Rc(),[4,this.Jo.runTransaction("shutdown","readwrite",[ri.store,yi.store],(function(e){var n=new Di(e,rr.Ds);return t.ac(n).next((function(){return t._c(n)}))}))];case 1:return e.sent(),this.Jo.close(),this.Pc(),[2]}}))}))},t.prototype.wc=function(t,e){var n=this;return t.filter((function(t){return n.dc(t.updateTimeMs,e)&&!n.Tc(t.clientId)}))},t.prototype.gc=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Li(e).ui().next((function(e){return t.wc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"lr",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),t.prototype.yc=function(t){return Fr.Nr(t,this.serializer,this.os,this.Dr)},t.prototype.Vc=function(){return this.Yo},t.prototype.vc=function(){return this.ss},t.prototype.bc=function(){return this.os},t.prototype.Sc=function(){return this.Xo},t.prototype.runTransaction=function(t,e,n){var r=this;p("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Jo.runTransaction(t,o,mi,(function(o){return i=new Di(o,r.Uo?r.Uo.next():rr.Ds),"readwrite-primary"===e?r.cc(i).next((function(t){return!!t||r.uc(i)})).next((function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Cs.Mi((function(){return r.zo(!1)})),new _(w.FAILED_PRECONDITION,Zn);return n(i)})).next((function(t){return r.hc(i).next((function(){return t}))})):r.Dc(i).next((function(){return n(i)}))})).then((function(t){return i.ns(),t}))},t.prototype.Dc=function(t){var e=this;return ki(t).get(ri.key).next((function(t){if(null!==t&&e.dc(t.leaseTimestampMs,5e3)&&!e.Tc(t.ownerId)&&!e.lc(t)&&!(e.qo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new _(w.FAILED_PRECONDITION,Ni)}))},t.prototype.hc=function(t){var e=new ri(this.clientId,this.allowTabSynchronization,Date.now());return ki(t).put(ri.key,e)},t.Gs=function(){return or.Gs()},t.prototype.ac=function(t){var e=this,n=ki(t);return n.get(ri.key).next((function(t){return e.lc(t)?(p("IndexedDbPersistence","Releasing primary lease."),n.delete(ri.key)):Yn.resolve()}))},t.prototype.dc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(d("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.ec=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Wo=function(){t.Cs.Ri((function(){return t.inForeground="visible"===t.document.visibilityState,t.tc()}))},this.document.addEventListener("visibilitychange",this.Wo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Ac=function(){this.Wo&&(this.document.removeEventListener("visibilitychange",this.Wo),this.Wo=null)},t.prototype.nc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ko=function(){e.mc(),e.Cs.Ri((function(){return e.Ic()}))},this.window.addEventListener("unload",this.Ko))},t.prototype.Rc=function(){this.Ko&&(this.window.removeEventListener("unload",this.Ko),this.Ko=null)},t.prototype.Tc=function(t){var e;try{var n=null!==(null===(e=this.Zo)||void 0===e?void 0:e.getItem(this.Ec(t)));return p("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return d("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.mc=function(){if(this.Zo)try{this.Zo.setItem(this.Ec(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.Pc=function(){if(this.Zo)try{this.Zo.removeItem(this.Ec(this.clientId))}catch(t){}},t.prototype.Ec=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ki(t){return Pi.Ys(t,ri.store)}function Li(t){return Pi.Ys(t,yi.store)}var Ri=function(){function t(t,e){this.db=t,this.cr=new Ir(this,e)}return t.prototype.Er=function(t){var e=this.Cc(t);return this.db.Vc().No(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Cc=function(t){var e=0;return this.Ir(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ue=function(t,e){return this.db.Vc().Ue(t,e)},t.prototype.Ir=function(t,e){return this.Nc(t,(function(t,n){return e(n)}))},t.prototype.Oo=function(t,e,n){return Ci(t,n)},t.prototype.ko=function(t,e,n){return Ci(t,n)},t.prototype.mr=function(t,e,n){return this.db.Vc().mr(t,e,n)},t.prototype.jr=function(t,e){return Ci(t,e)},t.prototype.xc=function(t,e){return function(t,e){var n=!1;return Kr(t).fi((function(r){return Br(t,r,e).next((function(t){return t&&(n=!0),Yn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.vc().io(),i=[],o=0;return this.Nc(t,(function(s,u){if(u<=e){var a=n.xc(t,s).next((function(e){if(!e)return o++,r.Jn(t,s).next((function(){return r.Hn(s),xi(t).delete([0,jr(s.path)])}))}));i.push(a)}})).next((function(){return Yn.qn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Lo);return this.db.Vc().So(t,n)},t.prototype.Fc=function(t,e){return Ci(t,e)},t.prototype.Nc=function(t,e){var n,r=xi(t),i=rr.Ds;return r._i({index:li.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==rr.Ds&&e(new V(xr(n)),i),i=u,n=s):i=rr.Ds})).next((function(){i!==rr.Ds&&e(new V(xr(n)),i)}))},t.prototype.Pr=function(t){return this.db.vc().oo(t)},t}();function Ci(t,e){return xi(t).put(function(t,e){return new li(0,jr(t.path),e)}(e,t.Lo))}function Mi(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Vi=function(){function t(t,e,n,r){this.persistence=t,this.Oc=e,this.serializer=r,this.Mc=new tt(x),this.kc=new Hn((function(t){return G(t)}),W),this.$c=k.min(),this.rs=t.yc(n),this.Lc=t.vc(),this.Yo=t.Vc(),this.Bc=new er(this.Lc,this.rs,this.persistence.bc()),this.Xo=t.Sc(),this.Oc.yr(this.Bc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Rr(n,e.Mc)}))},t}();function Ui(t,e,n,r){return new Vi(t,e,n,r)}function qi(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=m(t),i=r.rs,o=r.Bc,[4,r.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return r.rs.qr(t).next((function(s){return e=s,i=r.persistence.yc(n),o=new er(r.Lc,i,r.persistence.bc()),i.qr(t)})).next((function(n){for(var r=[],i=[],s=lt(),u=0,a=e;u<a.length;u++){var c=a[u];r.push(c.batchId);for(var f=0,h=c.mutations;f<h.length;f++){var l=h[f];s=s.add(l.key)}}for(var p=0,d=n;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var b=g[y];s=s.add(b.key)}}return o._s(t,s).next((function(t){return{qc:t,Uc:r,Qc:i}}))}))}))];case 1:return s=e.sent(),[2,(r.rs=i,r.Bc=o,r.Oc.yr(r.Bc),s)]}}))}))}function Fi(t,e){var n=m(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Lc.io({ro:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Yn.resolve();return o.forEach((function(t){s=s.next((function(){return r.Jn(e,t)})).next((function(e){var o=e,s=n.Sn.get(t);b(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)}))})),s.next((function(){return t.rs.Qr(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.rs.Gr(t)})).next((function(){return n.Bc._s(t,r)}))}))}function Bi(t){var e=m(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Yo.Po(t)}))}function zi(t,e){var n=m(t),r=e.ft,i=n.Mc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Lc.io({ro:!0});i=n.Mc;var s=[];e.re.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.Yo.Mo(t,e.de,o).next((function(){return n.Yo.Fo(t,e._e,o)})));var a=e.resumeToken;if(a.ht()>0){var c=u.wt(a,r).dt(t.Lo);i=i.Tt(o,c),function(t,e,n){return b(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(u,c,e)&&s.push(n.Yo.So(t,c))}}}));var u=st();if(e.ce.forEach((function(r,i){e.ue.has(r)&&s.push(n.persistence.Dr.Fc(t,r))})),s.push(function(t,e,n,r,i){var o=lt();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var i=st();return n.forEach((function(n,o){var s=t.get(n),u=r;o instanceof hn&&o.version.isEqual(k.min())?(e.Hn(n,u),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,u),i=i.Tt(n,o)):p("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),i}))}(t,o,e.ce,r).next((function(t){u=t}))),!r.isEqual(k.min())){var a=n.Yo.Po(t).next((function(e){return n.Yo.Vo(t,t.Lo,r)}));s.push(a)}return Yn.qn(s).next((function(){return o.apply(t)})).next((function(){return n.Bc.fs(t,u)}))})).then((function(t){return n.Mc=i,t}))}function Gi(t,e){var n=m(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.rs.Lr(t,e)}))}function Wi(t,e){var n=m(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Yo.xo(t,e).next((function(i){return i?(r=i,Yn.resolve(r)):n.Yo.mo(t).next((function(i){return r=new $(e,i,0,t.Lo),n.Yo.po(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Mc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Mc=n.Mc.Tt(t.targetId,t),n.kc.set(e,t.targetId)),t}))}function Ki(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u;return Object(e.d)(this,(function(e){switch(e.label){case 0:i=m(t),o=i.Mc.get(n),s=r?"readwrite":"readwrite-primary",e.label=1;case 1:return e.trys.push([1,4,,5]),r?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.Dr.removeTarget(t,o)}))];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:if(!ar(u=e.sent()))throw u;return p("LocalStore","Failed to update sequence numbers for target "+n+": "+u),[3,5];case 5:return i.Mc=i.Mc.remove(n),i.kc.delete(o.target),[2]}}))}))}function Hi(t,e,n){var r=m(t),i=k.min(),o=lt();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=m(t),i=r.kc.get(n);return void 0!==i?Yn.resolve(r.Mc.get(i)):r.Yo.xo(e,n)}(r,t,En(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Yo.$o(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Oc.ws(t,e,n?i:k.min(),n?o:lt())})).next((function(t){return{documents:t,Kc:o}}))}))}function Yi(t,e){var n=m(t),r=m(n.Yo),i=n.Mc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ze(t,e).next((function(t){return t?t.target:null}))}))}function Qi(t){var e=m(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=m(t),i=st(),o=kr(n),s=$r(e),u=IDBKeyRange.lowerBound(o,!0);return s._i({index:ci.readTimeIndex,range:u},(function(t,e){var n=Dr(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime})).next((function(){return{Wc:i,readTime:Lr(o)}}))}(e.Lc,t,e.$c)})).then((function(t){var n=t.Wc,r=t.readTime;return e.$c=r,n}))}function $i(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){return[2,(n=m(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=$r(t),n=k.min();return e._i({index:ci.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Lr(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){n.$c=t}))]}))}))}function Xi(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){if(t.code!==w.FAILED_PRECONDITION||t.message!==Zn)throw t;return p("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Ji=function(){function t(t,e,n,r,i,o){this.Cs=t,this.jc=n,this.Gc=r,this.zc=i,this.listener=o,this.state=0,this.Hc=0,this.Jc=null,this.stream=null,this.Si=new ir(t,e)}return t.prototype.Yc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Xc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Zc()},t.prototype.stop=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return this.Yc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.tu=function(){this.state=0,this.Si.reset()},t.prototype.eu=function(){var t=this;this.Xc()&&null===this.Jc&&(this.Jc=this.Cs.Us(this.jc,6e4,(function(){return t.nu()})))},t.prototype.su=function(t){this.iu(),this.stream.send(t)},t.prototype.nu=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(t){return this.Xc()?[2,this.close(0)]:[2]}))}))},t.prototype.iu=function(){this.Jc&&(this.Jc.cancel(),this.Jc=null)},t.prototype.close=function(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.iu(),this.Si.cancel(),this.Hc++,3!==t?this.Si.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(d(n.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):n&&n.code===w.UNAUTHENTICATED&&this.zc.m(),null!==this.stream&&(this.ru(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ou(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.ru=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.cu(this.Hc),n=this.Hc;this.zc.getToken().then((function(e){t.Hc===n&&t.uu(e)}),(function(n){e((function(){var e=new _(w.UNKNOWN,"Fetching auth token failed: "+n.message);return t.au(e)}))}))},t.prototype.uu=function(t){var e=this,n=this.cu(this.Hc);this.stream=this.hu(t),this.stream.lu((function(){n((function(){return e.state=2,e.listener.lu()}))})),this.stream.ou((function(t){n((function(){return e.au(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Zc=function(){var t=this;this.state=4,this.Si.Bs((function(){return Object(e.b)(t,void 0,void 0,(function(){return Object(e.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.au=function(t){return p("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.cu=function(t){var e=this;return function(n){e.Cs.Ri((function(){return e.Hc===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Zi=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(e.c)(n,t),n.prototype.hu=function(t){return this.Gc._u("Listen",t)},n.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:g()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(b(void 0===e||"string"==typeof e),H.fromBase64String(e||"")):(b(void 0===e||e instanceof Uint8Array),H.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?w.UNKNOWN:Z(t.code);return new _(e,t.message||"")}(s);n=new Et(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var c=ue(t,a.document.name),f=re(a.document.updateTime),h=new sn({mapValue:{fields:a.document.fields}}),l=new fn(c,f,h,{}),p=a.targetIds||[],d=a.removedTargetIds||[];n=new wt(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=ue(t,v.document),m=v.readTime?re(v.readTime):k.min(),E=new hn(y,m),O=v.removedTargetIds||[];n=new wt([],O,E.key,E)}else if("documentRemove"in e){e.documentRemove;var I=e.documentRemove;I.document;var T=ue(t,I.document),j=I.removedTargetIds||[];n=new wt([],j,T,null)}else{if(!("filter"in e))return g();e.filter;var A=e.filter;A.targetId;var S=A.count||0,x=new X(S),N=A.targetId;n=new _t(N,x)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return k.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?k.min():e.readTime?re(e.readTime):k.min()}(t);return this.listener.fu(e,n)},n.prototype.du=function(t){var e={};e.database=fe(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=K(r)?{documents:ve(t,r)}:{query:ye(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=ee(t,e.resumeToken):e.ft.F(k.min())>0&&(n.readTime=te(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.su(e)},n.prototype.wu=function(t){var e={};e.database=fe(this.serializer),e.removeTarget=t,this.su(e)},n}(Ji),to=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Eu=!1,s}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"Tu",{get:function(){return this.Eu},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.Eu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},n.prototype.ru=function(){this.Eu&&this.Iu([])},n.prototype.hu=function(t){return this.Gc._u("Write",t)},n.prototype.onMessage=function(t){if(b(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Eu){this.Si.reset();var e=function(t,e){return t&&t.length>0?(b(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?re(t.updateTime):re(e);n.isEqual(k.min())&&(n=re(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Be(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=re(t.commitTime);return this.listener.mu(n,e)}return b(!t.writeResults||0===t.writeResults.length),this.Eu=!0,this.listener.Au()},n.prototype.Ru=function(){var t={};t.database=fe(this.serializer),this.su(t)},n.prototype.Iu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return pe(e.serializer,t)}))};this.su(n)},n}(Ji),eo=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Gc=n,i.serializer=r,i.Pu=!1,i}return Object(e.c)(n,t),n.prototype.gu=function(){if(this.Pu)throw new _(w.FAILED_PRECONDITION,"The client has already been terminated.")},n.prototype.yu=function(t,e,n){var r=this;return this.gu(),this.credentials.getToken().then((function(i){return r.Gc.yu(t,e,n,i)})).catch((function(t){throw t.code===w.UNAUTHENTICATED&&r.credentials.m(),t}))},n.prototype.Vu=function(t,e,n){var r=this;return this.gu(),this.credentials.getToken().then((function(i){return r.Gc.Vu(t,e,n,i)})).catch((function(t){throw t.code===w.UNAUTHENTICATED&&r.credentials.m(),t}))},n.prototype.terminate=function(){this.Pu=!1},n}((function(){})),no=function(){function t(t,e){this.di=t,this.pu=e,this.state="Unknown",this.vu=0,this.bu=null,this.Su=!0}return t.prototype.Du=function(){var t=this;0===this.vu&&(this.Cu("Unknown"),this.bu=this.di.Us("online_state_timeout",1e4,(function(){return t.bu=null,t.Nu("Backend didn't respond within 10 seconds."),t.Cu("Offline"),Promise.resolve()})))},t.prototype.xu=function(t){"Online"===this.state?this.Cu("Unknown"):(this.vu++,this.vu>=1&&(this.Fu(),this.Nu("Connection failed 1 times. Most recent error: "+t.toString()),this.Cu("Offline")))},t.prototype.set=function(t){this.Fu(),this.vu=0,"Online"===t&&(this.Su=!1),this.Cu(t)},t.prototype.Cu=function(t){t!==this.state&&(this.state=t,this.pu(t))},t.prototype.Nu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Su?(d(e),this.Su=!1):p("OnlineStateTracker",e)},t.prototype.Fu=function(){null!==this.bu&&(this.bu.cancel(),this.bu=null)},t}(),ro=function(t,n,r,i,o){var s=this;this.Ou=t,this.Mu=n,this.di=r,this.ku={},this.$u=[],this.Lu=new Map,this.Bu=new Set,this.qu=[],this.Uu=o,this.Uu.Qu((function(t){r.Ri((function(){return Object(e.b)(s,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return lo(this)?(p("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(n=m(t)).Bu.add(4),[4,oo(n)];case 1:return e.sent(),n.Ku.set("Unknown"),n.Bu.delete(4),[4,io(n)];case 2:return e.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Ku=new no(r,i)};function io(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:if(!lo(t))return[3,4];n=0,r=t.qu,e.label=1;case 1:return n<r.length?[4,(0,r[n])(!0)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function oo(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:n=0,r=t.qu,e.label=1;case 1:return n<r.length?[4,(0,r[n])(!1)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function so(t,e){var n=m(t);n.Lu.has(e.targetId)||(n.Lu.set(e.targetId,e),ho(n)?fo(n):So(n).Xc()&&ao(n,e))}function uo(t,e){var n=m(t),r=So(n);n.Lu.delete(e),r.Xc()&&co(n,e),0===n.Lu.size&&(r.Xc()?r.eu():lo(n)&&n.Ku.set("Unknown"))}function ao(t,e){t.Wu.De(e.targetId),So(t).du(e)}function co(t,e){t.Wu.De(e),So(t).wu(e)}function fo(t){t.Wu=new It({Xe:function(e){return t.ku.Xe(e)},Ze:function(e){return t.Lu.get(e)||null}}),So(t).start(),t.Ku.Du()}function ho(t){return lo(t)&&!So(t).Yc()&&t.Lu.size>0}function lo(t){return 0===m(t).Bu.size}function po(t){t.Wu=void 0}function vo(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return t.Lu.forEach((function(e,n){ao(t,e)})),[2]}))}))}function yo(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return po(t),ho(t)?(t.Ku.xu(n),fo(t)):t.Ku.set("Unknown"),[2]}))}))}function go(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s;return Object(e.d)(this,(function(u){switch(u.label){case 0:if(t.Ku.set("Online"),!(n instanceof Et&&2===n.state&&n.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=n.cause,i=0,o=n.targetIds,e.label=1;case 1:return i<o.length?(s=o[i],t.Lu.has(s)?[4,t.ku.ju(s,r)]:[3,3]):[3,5];case 2:e.sent(),t.Lu.delete(s),t.Wu.removeTarget(s),e.label=3;case 3:e.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,n)];case 2:return u.sent(),[3,5];case 3:return i=u.sent(),p("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),i),[4,bo(t,i)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(n instanceof wt?t.Wu.$e(n):n instanceof _t?t.Wu.je(n):t.Wu.qe(n),r.isEqual(k.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,Bi(t.Ou)];case 8:return o=u.sent(),r.F(o)>=0?[4,function(t,e){var n=t.Wu.He(e);return n.re.forEach((function(n,r){if(n.resumeToken.ht()>0){var i=t.Lu.get(r);i&&t.Lu.set(r,i.wt(n.resumeToken,e))}})),n.oe.forEach((function(e){var n=t.Lu.get(e);if(n){t.Lu.set(e,n.wt(H.lt,n.ft)),co(t,e);var r=new $(n.target,e,1,n.sequenceNumber);ao(t,r)}})),t.ku.Gu(n)}(t,r)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return p("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,bo(t,s)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function bo(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i=this;return Object(e.d)(this,(function(o){switch(o.label){case 0:if(!ar(n))throw n;return t.Bu.add(1),[4,oo(t)];case 1:return o.sent(),t.Ku.set("Offline"),r||(r=function(){return Bi(t.Ou)}),t.di.Mi((function(){return Object(e.b)(i,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return p("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return e.sent(),t.Bu.delete(1),[4,io(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function mo(t,e){return e().catch((function(n){return bo(t,n,e)}))}function wo(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:n=m(t),r=xo(n),i=n.$u.length>0?n.$u[n.$u.length-1].batchId:-1,e.label=1;case 1:if(!function(t){return lo(t)&&t.$u.length<10}(n))return[3,7];e.label=2;case 2:return e.trys.push([2,4,,6]),[4,Gi(n.Ou,i)];case 3:return null===(o=e.sent())?(0===n.$u.length&&r.eu(),[3,7]):(i=o.batchId,function(t,e){t.$u.push(e);var n=xo(t);n.Xc()&&n.Tu&&n.Iu(e.mutations)}(n,o),[3,6]);case 4:return s=e.sent(),[4,bo(n,s)];case 5:return e.sent(),[3,6];case 6:return[3,1];case 7:return _o(n)&&Eo(n),[2]}}))}))}function _o(t){return lo(t)&&!xo(t).Yc()&&t.$u.length>0}function Eo(t){xo(t).start()}function Oo(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return xo(t).Ru(),[2]}))}))}function Io(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(e.d)(this,(function(e){for(n=xo(t),r=0,i=t.$u;r<i.length;r++)o=i[r],n.Iu(o.mutations);return[2]}))}))}function To(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:return i=t.$u.shift(),o=Kn.from(i,n,r),[4,mo(t,(function(){return t.ku.zu(o)}))];case 1:return e.sent(),[4,wo(t)];case 2:return e.sent(),[2]}}))}))}function jo(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(r){switch(r.label){case 0:return n&&xo(t).Tu?[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return J(i=n.code)&&i!==w.ABORTED?(r=t.$u.shift(),xo(t).tu(),[4,mo(t,(function(){return t.ku.Hu(r.batchId,n)}))]):[3,3];case 1:return e.sent(),[4,wo(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}(t,n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return _o(t)&&Eo(t),[2]}}))}))}function Ao(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=m(t),n?(r.Bu.delete(2),[4,io(r)]):[3,2];case 1:return e.sent(),[3,5];case 2:return n?[3,4]:(r.Bu.add(2),[4,oo(r)]);case 3:e.sent(),r.Ku.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))}function So(t){var n=this;return t.Ju||(t.Ju=function(t,e,n){var r=m(t);return r.gu(),new Zi(e,r.Gc,r.credentials,r.serializer,n)}(t.Mu,t.di,{lu:vo.bind(null,t),ou:yo.bind(null,t),fu:go.bind(null,t)}),t.qu.push((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return r?(t.Ju.tu(),ho(t)?fo(t):t.Ku.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ju.stop()];case 2:e.sent(),po(t),e.label=3;case 3:return[2]}}))}))}))),t.Ju}function xo(t){var n=this;return t.Yu||(t.Yu=function(t,e,n){var r=m(t);return r.gu(),new to(e,r.Gc,r.credentials,r.serializer,n)}(t.Mu,t.di,{lu:Oo.bind(null,t),ou:jo.bind(null,t),Au:Io.bind(null,t),mu:To.bind(null,t)}),t.qu.push((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return r?(t.Yu.tu(),[4,wo(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Yu.stop()];case 3:e.sent(),t.$u.length>0&&(p("RemoteStore","Stopping write stream with "+t.$u.length+" pending writes"),t.$u=[]),e.label=4;case 4:return[2]}}))}))}))),t.Yu}var No=function(){this.Xu=void 0,this.listeners=[]},Do=function(){this.queries=new Hn((function(t){return Tn(t)}),In),this.onlineState="Unknown",this.Zu=new Set};function Po(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c;return Object(e.d)(this,(function(e){switch(e.label){case 0:if(r=m(t),i=n.query,o=!1,(s=r.queries.get(i))||(o=!0,s=new No),!o)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),u=s,[4,r.ta(i)];case 2:return u.Xu=e.sent(),[3,4];case 3:return a=e.sent(),c=br(a,"Initialization of query '"+jn(n.query)+"' failed"),[2,void n.onError(c)];case 4:return r.queries.set(i,s),s.listeners.push(n),n.ea(r.onlineState),s.Xu&&n.na(s.Xu)&&Co(r),[2]}}))}))}function ko(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(e.d)(this,(function(e){return r=m(t),i=n.query,o=!1,(s=r.queries.get(i))&&(u=s.listeners.indexOf(n))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),o?[2,(r.queries.delete(i),r.sa(i))]:[2]}))}))}function Lo(t,e){for(var n=m(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,f=a.listeners;c<f.length;c++)f[c].na(s)&&(r=!0);a.Xu=s}}r&&Co(n)}function Ro(t,e,n){var r=m(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Co(t){t.Zu.forEach((function(t){t.next()}))}var Mo=function(){function t(t,e,n){this.query=t,this.ia=e,this.ra=!1,this.oa=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.na=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gt(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ra?this.ca(t)&&(this.ia.next(t),o=!0):this.ua(t,this.onlineState)&&(this.aa(t),o=!0),this.oa=t,o},t.prototype.onError=function(t){this.ia.error(t)},t.prototype.ea=function(t){this.onlineState=t;var e=!1;return this.oa&&!this.ra&&this.ua(this.oa,t)&&(this.aa(this.oa),e=!0),e},t.prototype.ua=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.ha&&n||t.docs.W()&&"Offline"!==e)},t.prototype.ca=function(t){if(t.docChanges.length>0)return!0;var e=this.oa&&this.oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.ne&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.aa=function(t){t=gt.ie(t.query,t.docs,t.ee,t.fromCache),this.ra=!0,this.ia.next(t)},t}(),Vo=function(){function t(){this.la=new rt(Uo._a),this.fa=new rt(Uo.da)}return t.prototype.W=function(){return this.la.W()},t.prototype.Oo=function(t,e){var n=new Uo(t,e);this.la=this.la.add(n),this.fa=this.fa.add(n)},t.prototype.wa=function(t,e){var n=this;t.forEach((function(t){return n.Oo(t,e)}))},t.prototype.ko=function(t,e){this.Ea(new Uo(t,e))},t.prototype.Ta=function(t,e){var n=this;t.forEach((function(t){return n.ko(t,e)}))},t.prototype.Ia=function(t){var e=this,n=new V(new R([])),r=new Uo(n,t),i=new Uo(n,t+1),o=[];return this.fa.Kt([r,i],(function(t){e.Ea(t),o.push(t.key)})),o},t.prototype.ma=function(){var t=this;this.la.forEach((function(e){return t.Ea(e)}))},t.prototype.Ea=function(t){this.la=this.la.delete(t),this.fa=this.fa.delete(t)},t.prototype.Aa=function(t){var e=new V(new R([])),n=new Uo(e,t),r=new Uo(e,t+1),i=lt();return this.fa.Kt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.zr=function(t){var e=new Uo(t,0),n=this.la.jt(e);return null!==n&&t.isEqual(n.key)},t}(),Uo=function(){function t(t,e){this.key=t,this.Ra=e}return t._a=function(t,e){return V.$(t.key,e.key)||x(t.Ra,e.Ra)},t.da=function(t,e){return x(t.Ra,e.Ra)||V.$(t.key,e.key)},t}();function qo(t,e){return"firestore_clients_"+t+"_"+e}function Fo(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function Bo(t,e){return"firestore_targets_"+t+"_"+e}var zo=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Pa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new _(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ga=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Go=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Pa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new _(r.error.code,r.error.message)),i?new t(e,r.state,o):(d("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ga=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wo=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Pa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=dt(),s=0;i&&s<r.activeTargetIds.length;++s)i=F(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(d("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ko=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Pa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ho=function(){function t(){this.activeTargetIds=dt()}return t.prototype.ya=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Va=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ga=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Yo=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.pa=r,this.va=null,this.pu=null,this.ps=null,this.ba=this.Sa.bind(this),this.Da=new tt(x),this.lr=!1,this.Ca=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Na=qo(this.persistenceKey,this.pa),this.xa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Da=this.Da.Tt(this.pa,new Ho),this.Fa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Oa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Ma=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ka=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.$a=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ba)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,a,c,f,h,l=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,this.va.gc()];case 1:for(t=e.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.pa&&(o=this.getItem(qo(this.persistenceKey,i)))&&(s=Wo.Pa(i,o))&&(this.Da=this.Da.Tt(s.clientId,s));for(this.La(),(u=this.storage.getItem(this.ka))&&(a=this.Ba(u))&&this.qa(a),c=0,f=this.Ca;c<f.length;c++)h=f[c],this.Sa(h);return this.Ca=[],this.window.addEventListener("unload",(function(){return l.Ic()})),this.lr=!0,[2]}}))}))},t.prototype.Ss=function(t){this.setItem(this.xa,JSON.stringify(t))},t.prototype.Ua=function(){return this.Qa(this.Da)},t.prototype.Ka=function(t){var e=!1;return this.Da.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Wa=function(t){this.ja(t,"pending")},t.prototype.Ga=function(t,e,n){this.ja(t,e,n),this.za(t)},t.prototype.Ha=function(t){var e="not-current";if(this.Ka(t)){var n=this.storage.getItem(Bo(this.persistenceKey,t));if(n){var r=Go.Pa(t,n);r&&(e=r.state)}}return this.Ja.ya(t),this.La(),e},t.prototype.Ya=function(t){this.Ja.Va(t),this.La()},t.prototype.Xa=function(t){return this.Ja.activeTargetIds.has(t)},t.prototype.Za=function(t){this.removeItem(Bo(this.persistenceKey,t))},t.prototype.th=function(t,e,n){this.eh(t,e,n)},t.prototype.nh=function(t,e,n){var r=this;e.forEach((function(t){r.za(t)})),this.currentUser=t,n.forEach((function(t){r.Wa(t)}))},t.prototype.sh=function(t){this.ih(t)},t.prototype.rh=function(){this.oh()},t.prototype.Ic=function(){this.lr&&(this.window.removeEventListener("storage",this.ba),this.removeItem(this.Na),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){p("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Sa=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(p("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Na)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi((function(){return Object(e.b)(n,void 0,void 0,(function(){var t,n,i,o,s,u;return Object(e.d)(this,(function(e){if(this.lr){if(null!==r.key)if(this.Fa.test(r.key)){if(null==r.newValue)return t=this.uh(r.key),[2,this.ah(t,null)];if(n=this.hh(r.key,r.newValue))return[2,this.ah(n.clientId,n)]}else if(this.Oa.test(r.key)){if(null!==r.newValue&&(i=this.lh(r.key,r.newValue)))return[2,this._h(i)]}else if(this.Ma.test(r.key)){if(null!==r.newValue&&(o=this.fh(r.key,r.newValue)))return[2,this.dh(o)]}else if(r.key===this.ka){if(null!==r.newValue&&(s=this.Ba(r.newValue)))return[2,this.qa(s)]}else if(r.key===this.xa)(u=function(t){var e=rr.Ds;if(null!=t)try{var n=JSON.parse(t);b("number"==typeof n),e=n}catch(t){d("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(r.newValue))!==rr.Ds&&this.ps(u);else if(r.key===this.$a)return[2,this.va.wh()]}else this.Ca.push(r);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ja",{get:function(){return this.Da.get(this.pa)},enumerable:!1,configurable:!0}),t.prototype.La=function(){this.setItem(this.Na,this.Ja.ga())},t.prototype.ja=function(t,e,n){var r=new zo(this.currentUser,t,e,n),i=Fo(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ga())},t.prototype.za=function(t){var e=Fo(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ih=function(t){var e={clientId:this.pa,onlineState:t};this.storage.setItem(this.ka,JSON.stringify(e))},t.prototype.eh=function(t,e,n){var r=Bo(this.persistenceKey,t),i=new Go(t,e,n);this.setItem(r,i.ga())},t.prototype.oh=function(){this.setItem(this.$a,"value-not-used")},t.prototype.uh=function(t){var e=this.Fa.exec(t);return e?e[1]:null},t.prototype.hh=function(t,e){var n=this.uh(t);return Wo.Pa(n,e)},t.prototype.lh=function(t,e){var n=this.Oa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zo.Pa(new f(i),r,e)},t.prototype.fh=function(t,e){var n=this.Ma.exec(t),r=Number(n[1]);return Go.Pa(r,e)},t.prototype.Ba=function(t){return Ko.Pa(t)},t.prototype._h=function(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.va.Eh(t.batchId,t.state,t.error)]:(p("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.dh=function(t){return this.va.Th(t.targetId,t.state,t.error)},t.prototype.ah=function(t,e){var n=this,r=e?this.Da.Tt(t,e):this.Da.remove(t),i=this.Qa(this.Da),o=this.Qa(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.va.Ih(s,u).then((function(){n.Da=r}))},t.prototype.qa=function(t){this.Da.get(t.clientId)&&this.pu(t.onlineState)},t.prototype.Qa=function(t){var e=dt();return t.forEach((function(t,n){e=e.Gt(n.activeTargetIds)})),e},t}(),Qo=function(){function t(){this.mh=new Ho,this.Ah={},this.pu=null,this.ps=null}return t.prototype.Wa=function(t){},t.prototype.Ga=function(t,e,n){},t.prototype.Ha=function(t){return this.mh.ya(t),this.Ah[t]||"not-current"},t.prototype.th=function(t,e,n){this.Ah[t]=e},t.prototype.Ya=function(t){this.mh.Va(t)},t.prototype.Xa=function(t){return this.mh.activeTargetIds.has(t)},t.prototype.Za=function(t){delete this.Ah[t]},t.prototype.Ua=function(){return this.mh.activeTargetIds},t.prototype.Ka=function(t){return this.mh.activeTargetIds.has(t)},t.prototype.start=function(){return this.mh=new Ho,Promise.resolve()},t.prototype.nh=function(t,e,n){},t.prototype.sh=function(t){},t.prototype.Ic=function(){},t.prototype.Ss=function(t){},t.prototype.rh=function(){},t}(),$o=function(t){this.key=t},Xo=function(t){this.key=t},Jo=function(){function t(t,e){this.query=t,this.Rh=e,this.Ph=null,this.le=!1,this.gh=lt(),this.ee=lt(),this.yh=Sn(t),this.Vh=new vt(this.yh)}return Object.defineProperty(t.prototype,"ph",{get:function(){return this.Rh},enumerable:!1,configurable:!0}),t.prototype.bh=function(t,e){var n=this,r=e?e.Sh:new yt,i=e?e.Vh:this.Vh,o=e?e.ee:this.ee,s=i,u=!1,a=yn(this.query)&&i.size===this.query.limit?i.last():null,c=gn(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt((function(t,e){var f=i.get(t),h=e instanceof fn?e:null;h&&(h=An(n.query,h)?h:null);var l=!!f&&n.ee.has(f.key),p=!!h&&(h.an||n.ee.has(h.key)&&h.hasCommittedMutations),d=!1;f&&h?f.data().isEqual(h.data())?l!==p&&(r.track({type:3,doc:h}),d=!0):n.Dh(f,h)||(r.track({type:2,doc:h}),d=!0,(a&&n.yh(h,a)>0||c&&n.yh(h,c)<0)&&(u=!0)):!f&&h?(r.track({type:0,doc:h}),d=!0):f&&!h&&(r.track({type:1,doc:f}),d=!0,(a||c)&&(u=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),yn(this.query)||gn(this.query))for(;s.size>this.query.limit;){var f=yn(this.query)?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Vh:s,Sh:r,br:u,ee:o}},t.prototype.Dh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Vh;this.Vh=t.Vh,this.ee=t.ee;var o=t.Sh.Zt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(t)-n(e)}(t.type,e.type)||r.yh(t.doc,e.doc)})),this.Ch(n);var s=e?this.Nh():[],u=0===this.gh.size&&this.le?1:0,a=u!==this.Ph;return this.Ph=u,0!==o.length||a?{snapshot:new gt(this.query,t.Vh,i,o,t.ee,0===u,a,!1),xh:s}:{xh:s}},t.prototype.ea=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Vh:this.Vh,Sh:new yt,ee:this.ee,br:!1},!1)):{xh:[]}},t.prototype.Fh=function(t){return!this.Rh.has(t)&&!!this.Vh.has(t)&&!this.Vh.get(t).an},t.prototype.Ch=function(t){var e=this;t&&(t._e.forEach((function(t){return e.Rh=e.Rh.add(t)})),t.fe.forEach((function(t){})),t.de.forEach((function(t){return e.Rh=e.Rh.delete(t)})),this.le=t.le)},t.prototype.Nh=function(){var t=this;if(!this.le)return[];var e=this.gh;this.gh=lt(),this.Vh.forEach((function(e){t.Fh(e.key)&&(t.gh=t.gh.add(e.key))}));var n=[];return e.forEach((function(e){t.gh.has(e)||n.push(new Xo(e))})),this.gh.forEach((function(t){e.has(t)||n.push(new $o(t))})),n},t.prototype.Oh=function(t){this.Rh=t.Kc,this.gh=lt();var e=this.bh(t.documents);return this.Zn(e,!0)},t.prototype.Mh=function(){return gt.ie(this.query,this.Vh,this.ee,0===this.Ph)},t}(),Zo=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ts=function(t){this.key=t,this.kh=!1},es=function(){function t(t,e,n,r,i,o){this.Ou=t,this.$h=e,this.Lh=n,this.Bh=r,this.currentUser=i,this.qh=o,this.Uh={},this.Qh=new Hn((function(t){return Tn(t)}),In),this.Kh=new Map,this.Wh=[],this.jh=new tt(V.$),this.Gh=new Map,this.zh=new Vo,this.Hh={},this.Jh=new Map,this.Yh=Ti.Io(),this.onlineState="Unknown",this.Xh=void 0}return Object.defineProperty(t.prototype,"Zh",{get:function(){return!0===this.Xh},enumerable:!1,configurable:!0}),t}();function ns(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=Ds(t),(s=r.Qh.get(n))?(i=s.targetId,r.Bh.Ha(i),o=s.view.Mh(),[3,4]):[3,1];case 1:return[4,Wi(r.Ou,En(n))];case 2:return u=e.sent(),a=r.Bh.Ha(u.targetId),i=u.targetId,[4,rs(r,n,i,"current"===a)];case 3:o=e.sent(),r.Zh&&so(r.$h,u),e.label=4;case 4:return[2,o]}}))}))}function rs(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,u,a,c,f;return Object(e.d)(this,(function(h){switch(h.label){case 0:return t.tl=function(n,r,i){return function(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,u;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(o=n.view.bh(r)).br?[4,Hi(t.Ou,n.query,!1).then((function(t){var e=t.documents;return n.view.bh(e,o)}))]:[3,2];case 1:o=e.sent(),e.label=2;case 2:return s=i&&i.re.get(n.targetId),u=n.view.Zn(o,t.Zh,s),[2,(ys(t,n.targetId,u.xh),u.snapshot)]}}))}))}(t,n,r,i)},[4,Hi(t.Ou,n,!0)];case 1:return o=h.sent(),s=new Jo(n,o.Kc),u=s.bh(o.documents),a=mt.he(r,i&&"Offline"!==t.onlineState),c=s.Zn(u,t.Zh,a),ys(t,r,c.xh),f=new Zo(n,r,s),[2,(t.Qh.set(n,f),t.Kh.has(r)?t.Kh.get(r).push(n):t.Kh.set(r,[n]),c.snapshot)]}}))}))}function is(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=m(t),i=r.Qh.get(n),(o=r.Kh.get(i.targetId)).length>1?[2,(r.Kh.set(i.targetId,o.filter((function(t){return!In(t,n)}))),void r.Qh.delete(n))]:r.Zh?(r.Bh.Ya(i.targetId),r.Bh.Ka(i.targetId)?[3,2]:[4,Ki(r.Ou,i.targetId,!1).then((function(){r.Bh.Za(i.targetId),uo(r.$h,i.targetId),ds(r,i.targetId)})).catch(Xi)]):[3,3];case 1:e.sent(),e.label=2;case 2:return[3,5];case 3:return ds(r,i.targetId),[4,Ki(r.Ou,i.targetId,!0)];case 4:e.sent(),e.label=5;case 5:return[2]}}))}))}function os(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u;return Object(e.d)(this,(function(e){switch(e.label){case 0:i=Ps(t),e.label=1;case 1:return e.trys.push([1,5,,6]),[4,function(t,e){var n,r=m(t),i=P.now(),o=e.reduce((function(t,e){return t.add(e.key)}),lt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Bc._s(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],f=Ye(c,n.get(c.key));null!=f&&s.push(new Je(c.key,f,an(f.proto.mapValue),ze.exists(!0)))}return r.rs.Or(t,i,s,e)}))})).then((function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}}))}(i.Ou,n)];case 2:return o=e.sent(),i.Bh.Wa(o.batchId),function(t,e,n){var r=t.Hh[t.currentUser.h()];r||(r=new tt(x)),r=r.Tt(e,n),t.Hh[t.currentUser.h()]=r}(i,o.batchId,r),[4,ms(i,o.Qn)];case 3:return e.sent(),[4,wo(i.$h)];case 4:return e.sent(),[3,6];case 5:return s=e.sent(),u=br(s,"Failed to persist write"),r.reject(u),[3,6];case 6:return[2]}}))}))}function ss(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=m(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,zi(r.Ou,n)];case 2:return i=e.sent(),n.re.forEach((function(t,e){var n=r.Gh.get(e);n&&(b(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?n.kh=!0:t.fe.size>0?b(n.kh):t.de.size>0&&(b(n.kh),n.kh=!1))})),[4,ms(r,i,n)];case 3:return e.sent(),[3,6];case 4:return[4,Xi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function us(t,e,n){var r=m(t);if(r.Zh&&0===n||!r.Zh&&1===n){var i=[];r.Qh.forEach((function(t,n){var r=n.view.ea(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=m(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].ea(e)&&(r=!0)})),r&&Co(n)}(r.Lh,e),i.length&&r.Uh.fu(i),r.onlineState=e,r.Zh&&r.Bh.sh(e)}}function as(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(i=m(t)).Bh.th(n,"rejected",r),o=i.Gh.get(n),(s=o&&o.key)?(u=(u=new tt(V.$)).Tt(s,new hn(s,k.min())),a=lt().add(s),c=new bt(k.min(),new Map,new rt(x),u,a),[4,ss(i,c)]):[3,2];case 1:return e.sent(),i.jh=i.jh.remove(s),i.Gh.delete(n),bs(i),[3,4];case 2:return[4,Ki(i.Ou,n,!1).then((function(){return ds(i,n,r)})).catch(Xi)];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}function cs(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=m(t),i=n.batch.batchId,e.label=1;case 1:return e.trys.push([1,4,,6]),[4,Fi(r.Ou,n)];case 2:return o=e.sent(),ps(r,i,null),ls(r,i),r.Bh.Ga(i,"acknowledged"),[4,ms(r,o)];case 3:return e.sent(),[3,6];case 4:return[4,Xi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function fs(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:i=m(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.rs.kr(t,e).next((function(e){return b(null!==e),r=e.keys(),n.rs.Qr(t,e)})).next((function(){return n.rs.Gr(t)})).next((function(){return n.Bc._s(t,r)}))}))}(i.Ou,n)];case 2:return o=e.sent(),ps(i,n,r),ls(i,n),i.Bh.Ga(n,"rejected",r),[4,ms(i,o)];case 3:return e.sent(),[3,6];case 4:return[4,Xi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function hs(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(e.d)(this,(function(e){switch(e.label){case 0:lo((r=m(t)).$h)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,function(t){var e=m(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.rs.Br(t)}))}(r.Ou)];case 2:return-1===(i=e.sent())?[2,void n.resolve()]:((o=r.Jh.get(i)||[]).push(n),r.Jh.set(i,o),[3,4]);case 3:return s=e.sent(),u=br(s,"Initialization of waitForPendingWrites() operation failed"),n.reject(u),[3,4];case 4:return[2]}}))}))}function ls(t,e){(t.Jh.get(e)||[]).forEach((function(t){t.resolve()})),t.Jh.delete(e)}function ps(t,e,n){var r=m(t),i=r.Hh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Hh[r.currentUser.h()]=i}}function ds(t,e,n){void 0===n&&(n=null),t.Bh.Ya(e);for(var r=0,i=t.Kh.get(e);r<i.length;r++){var o=i[r];t.Qh.delete(o),n&&t.Uh.el(o,n)}t.Kh.delete(e),t.Zh&&t.zh.Ia(e).forEach((function(e){t.zh.zr(e)||vs(t,e)}))}function vs(t,e){var n=t.jh.get(e);null!==n&&(uo(t.$h,n),t.jh=t.jh.remove(e),t.Gh.delete(n),bs(t))}function ys(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof $o?(t.zh.Oo(o.key,e),gs(t,o)):o instanceof Xo?(p("SyncEngine","Document no longer in limbo: "+o.key),t.zh.ko(o.key,e),t.zh.zr(o.key)||vs(t,o.key)):g()}}function gs(t,e){var n=e.key;t.jh.get(n)||(p("SyncEngine","New document in limbo: "+n),t.Wh.push(n),bs(t))}function bs(t){for(;t.Wh.length>0&&t.jh.size<t.qh;){var e=t.Wh.shift(),n=t.Yh.next();t.Gh.set(n,new ts(e)),t.jh=t.jh.Tt(e,n),so(t.$h,new $(En(vn(e.path)),n,2,rr.Ds))}}function ms(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u;return Object(e.d)(this,(function(a){switch(a.label){case 0:return i=m(t),o=[],s=[],u=[],i.Qh.W()?[3,3]:(i.Qh.forEach((function(t,e){u.push(i.tl(e,n,r).then((function(t){if(t){i.Zh&&i.Bh.th(e.targetId,t.fromCache?"not-current":"current"),o.push(t);var n=nr.Vs(e.targetId,t);s.push(n)}})))})),[4,Promise.all(u)]);case 1:return a.sent(),i.Uh.fu(o),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,f,h;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=m(t),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Yn.forEach(n,(function(e){return Yn.forEach(e.gs,(function(n){return r.persistence.Dr.Oo(t,e.targetId,n)})).next((function(){return Yn.forEach(e.ys,(function(n){return r.persistence.Dr.ko(t,e.targetId,n)}))}))}))}))];case 2:return e.sent(),[3,4];case 3:if(!ar(i=e.sent()))throw i;return p("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=n;o<s.length;o++)u=s[o],a=u.targetId,u.fromCache||(c=r.Mc.get(a),f=c.ft,h=c.Et(f),r.Mc=r.Mc.Tt(a,h));return[2]}}))}))}(i.Ou,s)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function ws(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(r=m(t)).currentUser.isEqual(n)?[3,3]:(p("SyncEngine","User change. New user:",n.h()),[4,qi(r.Ou,n)]);case 1:return i=e.sent(),r.currentUser=n,function(t,e){t.Jh.forEach((function(t){t.forEach((function(t){t.reject(new _(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Jh.clear()}(r),r.Bh.nh(n,i.Uc,i.Qc),[4,ms(r,i.qc)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}function _s(t,e){var n=m(t),r=n.Gh.get(e);if(r&&r.kh)return lt().add(r.key);var i=lt(),o=n.Kh.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Qh.get(a);i=i.Gt(c.view.ph)}return i}function Es(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Hi((r=m(t)).Ou,n.query,!0)];case 1:return i=e.sent(),o=n.view.Oh(i),[2,(r.Zh&&ys(r,n.targetId,o.xh),o)]}}))}))}function Os(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){return[2,Qi((n=m(t)).Ou).then((function(t){return ms(n,t)}))]}))}))}function Is(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,function(t,e){var n=m(t),r=m(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.$r(t,e).next((function(e){return e?n.Bc._s(t,e):Yn.resolve(null)}))}))}((o=m(t)).Ou,n)];case 1:return null===(s=e.sent())?[3,6]:"pending"!==r?[3,3]:[4,wo(o.$h)];case 2:return e.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(ps(o,n,i||null),ls(o,n),function(t,e){m(m(t).rs).Wr(e)}(o.Ou,n)):g(),e.label=4;case 4:return[4,ms(o,s)];case 5:return e.sent(),[3,7];case 6:p("SyncEngine","Cannot apply mutation batch with id: "+n),e.label=7;case 7:return[2]}}))}))}function Ts(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,f;return Object(e.d)(this,(function(e){switch(e.label){case 0:return Ds(r=m(t)),Ps(r),!0!==n||!0===r.Xh?[3,3]:(i=r.Bh.Ua(),[4,js(r,i.H())]);case 1:return o=e.sent(),r.Xh=!0,[4,Ao(r.$h,!0)];case 2:for(e.sent(),s=0,u=o;s<u.length;s++)a=u[s],so(r.$h,a);return[3,7];case 3:return!1!==n||!1===r.Xh?[3,7]:(c=[],f=Promise.resolve(),r.Kh.forEach((function(t,e){r.Bh.Xa(e)?c.push(e):f=f.then((function(){return ds(r,e),Ki(r.Ou,e,!0)})),uo(r.$h,e)})),[4,f]);case 4:return e.sent(),[4,js(r,c)];case 5:return e.sent(),function(t){var e=m(t);e.Gh.forEach((function(t,n){uo(e.$h,n)})),e.zh.ma(),e.Gh=new Map,e.jh=new tt(V.$)}(r),r.Xh=!1,[4,Ao(r.$h,!1)];case 6:e.sent(),e.label=7;case 7:return[2]}}))}))}function js(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,f,h,l,p,d,v,y;return Object(e.d)(this,(function(e){switch(e.label){case 0:r=m(t),i=[],o=[],s=0,u=n,e.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(f=r.Kh.get(a))&&0!==f.length?[4,Wi(r.Ou,En(f[0]))]:[3,7]):[3,13];case 2:c=e.sent(),h=0,l=f,e.label=3;case 3:return h<l.length?(p=l[h],d=r.Qh.get(p),[4,Es(r,d)]):[3,6];case 4:(v=e.sent()).snapshot&&o.push(v.snapshot),e.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Yi(r.Ou,a)];case 8:return y=e.sent(),[4,Wi(r.Ou,y)];case 9:return c=e.sent(),[4,rs(r,As(y),a,!1)];case 10:e.sent(),e.label=11;case 11:i.push(c),e.label=12;case 12:return s++,[3,1];case 13:return[2,(r.Uh.fu(o),i)]}}))}))}function As(t){return dn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ss(t){var e=m(t);return m(m(e.Ou).persistence).gc()}function xs(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,u;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(o=m(t)).Xh?(p("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Kh.has(n))return[3,8];switch(r){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qi(o.Ou)];case 3:return s=e.sent(),u=bt.ae(n,"current"===r),[4,ms(o,s,u)];case 4:return e.sent(),[3,8];case 5:return[4,Ki(o.Ou,n,!0)];case 6:return e.sent(),ds(o,n,i),[3,8];case 7:g(),e.label=8;case 8:return[2]}}))}))}function Ns(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u,a,c,f,h,l,d;return Object(e.d)(this,(function(v){switch(v.label){case 0:if(!(i=Ds(t)).Xh)return[3,10];o=0,s=n,v.label=1;case 1:return o<s.length?(u=s[o],i.Kh.has(u)?(p("SyncEngine","Adding an already active target "+u),[3,5]):[4,Yi(i.Ou,u)]):[3,6];case 2:return a=v.sent(),[4,Wi(i.Ou,a)];case 3:return c=v.sent(),[4,rs(i,As(a),c.targetId,!1)];case 4:v.sent(),so(i.$h,c),v.label=5;case 5:return o++,[3,1];case 6:f=function(t){return Object(e.d)(this,(function(e){switch(e.label){case 0:return i.Kh.has(t)?[4,Ki(i.Ou,t,!1).then((function(){uo(i.$h,t),ds(i,t)})).catch(Xi)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=r,v.label=7;case 7:return h<l.length?(d=l[h],[5,f(d)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ds(t){var e=m(t);return e.$h.ku.Gu=ss.bind(null,e),e.$h.ku.Xe=_s.bind(null,e),e.$h.ku.ju=as.bind(null,e),e.Uh.fu=Lo.bind(null,e.Lh),e.Uh.el=Ro.bind(null,e.Lh),e}function Ps(t){var e=m(t);return e.$h.ku.zu=cs.bind(null,e),e.$h.ku.Hu=fs.bind(null,e),e}var ks=function(){function t(t,e){this.os=t,this.Dr=e,this.rs=[],this.nl=1,this.sl=new rt(Uo._a)}return t.prototype.Fr=function(t){return Yn.resolve(0===this.rs.length)},t.prototype.Or=function(t,e,n,r){var i=this.nl;this.nl++,this.rs.length>0&&this.rs[this.rs.length-1];var o=new Wn(i,e,n,r);this.rs.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.sl=this.sl.add(new Uo(a.key,i)),this.os.Mr(t,a.key.path.q())}return Yn.resolve(o)},t.prototype.kr=function(t,e){return Yn.resolve(this.il(e))},t.prototype.Lr=function(t,e){var n=e+1,r=this.rl(n),i=r<0?0:r;return Yn.resolve(this.rs.length>i?this.rs[i]:null)},t.prototype.Br=function(){return Yn.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.qr=function(t){return Yn.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new Uo(e,0),i=new Uo(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],(function(t){var e=n.il(t.Ra);o.push(e)})),Yn.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new rt(x);return e.forEach((function(t){var e=new Uo(t,0),i=new Uo(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],(function(t){r=r.add(t.Ra)}))})),Yn.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;V.ot(i)||(i=i.child(""));var o=new Uo(new V(i),0),s=new rt(x);return this.sl.Wt((function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ra)),!0)}),o),Yn.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.il(t);null!==r&&n.push(r)})),n},t.prototype.Qr=function(t,e){var n=this;b(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return Yn.forEach(e.mutations,(function(i){var o=new Uo(i.key,e.batchId);return r=r.delete(o),n.Dr.jr(t,i.key)})).next((function(){n.sl=r}))},t.prototype.Wr=function(t){},t.prototype.zr=function(t,e){var n=new Uo(e,0),r=this.sl.jt(n);return Yn.resolve(e.isEqual(r&&r.key))},t.prototype.Gr=function(t){return this.rs.length,Yn.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),Ls=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new tt(V.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Mr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return Yn.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=ut();return e.forEach((function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)})),Yn.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=ct(),i=new V(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),u=s.key,a=s.value,c=a.zn,f=a.readTime;if(!e.path.j(u.path))break;f.F(n)<=0||c instanceof fn&&An(e,c)&&(r=r.Tt(c.key,c))}return Yn.resolve(r)},t.prototype.al=function(t,e){return Yn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.io=function(t){return new Rs(this)},t.prototype.oo=function(t){return Yn.resolve(this.size)},t}(),Rs=function(t){function n(e){var n=this;return(n=t.call(this)||this).co=e,n}return Object(e.c)(n,t),n.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach((function(r,i){i&&i.zn?n.push(e.co.jn(t,i.zn,e.Wn(r))):e.co.Hn(r)})),Yn.qn(n)},n.prototype.Yn=function(t,e){return this.co.Jn(t,e)},n.prototype.Xn=function(t,e){return this.co.getEntries(t,e)},n}(Qn),Cs=function(){function t(t){this.persistence=t,this.hl=new Hn((function(t){return G(t)}),W),this.lastRemoteSnapshotVersion=k.min(),this.highestTargetId=0,this.ll=0,this._l=new Vo,this.targetCount=0,this.fl=Ti.To()}return t.prototype.Ue=function(t,e){return this.hl.forEach((function(t,n){return e(n)})),Yn.resolve()},t.prototype.Po=function(t){return Yn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.yo=function(t){return Yn.resolve(this.ll)},t.prototype.mo=function(t){return this.highestTargetId=this.fl.next(),Yn.resolve(this.highestTargetId)},t.prototype.Vo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Yn.resolve()},t.prototype.vo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Ti(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.po=function(t,e){return this.vo(e),this.targetCount+=1,Yn.resolve()},t.prototype.So=function(t,e){return this.vo(e),Yn.resolve()},t.prototype.Do=function(t,e){return this.hl.delete(e.target),this._l.Ia(e.targetId),this.targetCount-=1,Yn.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.hl.delete(s),o.push(r.Co(t,u.targetId)),i++)})),Yn.qn(o).next((function(){return i}))},t.prototype.No=function(t){return Yn.resolve(this.targetCount)},t.prototype.xo=function(t,e){var n=this.hl.get(e)||null;return Yn.resolve(n)},t.prototype.Fo=function(t,e,n){return this._l.wa(e,n),Yn.resolve()},t.prototype.Mo=function(t,e,n){this._l.Ta(e,n);var r=this.persistence.Dr,i=[];return r&&e.forEach((function(e){i.push(r.jr(t,e))})),Yn.qn(i)},t.prototype.Co=function(t,e){return this._l.Ia(e),Yn.resolve()},t.prototype.$o=function(t,e){var n=this._l.Aa(e);return Yn.resolve(n)},t.prototype.zr=function(t,e){return Yn.resolve(this._l.zr(e))},t}(),Ms=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ho=function(t,e){return Yn.resolve(this.dl.get(e))},t.prototype.lo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:re(n.createTime)}),Yn.resolve()},t.prototype._o=function(t,e){return Yn.resolve(this.wl.get(e))},t.prototype.fo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:qr(n.bundledQuery),readTime:re(n.readTime)}),Yn.resolve()},t}(),Vs=function(){function t(t,e){var n=this;this.El={},this.Uo=new rr(0),this.Qo=!1,this.Qo=!0,this.Dr=t(this),this.Yo=new Cs(this),this.os=new Zr,this.ss=function(t,e){return new Ls(t,(function(t){return n.Dr.Tl(t)}))}(this.os),this.serializer=new Nr(e),this.Xo=new Ms(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Ic=function(){return this.Qo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),t.prototype.rc=function(){},t.prototype.oc=function(){},t.prototype.bc=function(){return this.os},t.prototype.yc=function(t){var e=this.El[t.h()];return e||(e=new ks(this.os,this.Dr),this.El[t.h()]=e),e},t.prototype.Vc=function(){return this.Yo},t.prototype.vc=function(){return this.ss},t.prototype.Sc=function(){return this.Xo},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Us(this.Uo.next());return this.Dr.Il(),n(i).next((function(t){return r.Dr.ml(i).next((function(){return t}))})).Ln().then((function(t){return i.ns(),t}))},t.prototype.Al=function(t,e){return Yn.Un(Object.values(this.El).map((function(n){return function(){return n.zr(t,e)}})))},t}(),Us=function(t){function n(e){var n=this;return(n=t.call(this)||this).Lo=e,n}return Object(e.c)(n,t),n}(tr),qs=function(){function t(t){this.persistence=t,this.Rl=new Vo,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw g()},enumerable:!1,configurable:!0}),t.prototype.Oo=function(t,e,n){return this.Rl.Oo(n,e),this.yl.delete(n.toString()),Yn.resolve()},t.prototype.ko=function(t,e,n){return this.Rl.ko(n,e),this.yl.add(n.toString()),Yn.resolve()},t.prototype.jr=function(t,e){return this.yl.add(e.toString()),Yn.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.Ia(e.targetId).forEach((function(t){return n.yl.add(t.toString())}));var r=this.persistence.Vc();return r.$o(t,e.targetId).next((function(t){t.forEach((function(t){return n.yl.add(t.toString())}))})).next((function(){return r.Do(t,e)}))},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.vc().io();return Yn.forEach(this.yl,(function(r){var i=V.st(r);return e.Vl(t,i).next((function(t){t||n.Hn(i)}))})).next((function(){return e.Pl=null,n.apply(t)}))},t.prototype.Fc=function(t,e){var n=this;return this.Vl(t,e).next((function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())}))},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return Yn.Un([function(){return Yn.resolve(n.Rl.zr(e))},function(){return n.persistence.Vc().zr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),Fs=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.lu=function(t){this.bl=t},t.prototype.ou=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),Bs={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},zs=function(t){function n(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(e.c)(n,t),n.prototype.Ll=function(t,e,n,r){return new Promise((function(i,o){var u=new s.f;u.listenOnce(s.c.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case s.a.NO_ERROR:var e=u.getResponseJson();p("Connection","XHR received:",JSON.stringify(e)),i(e);break;case s.a.TIMEOUT:p("Connection",'RPC "'+t+'" timed out'),o(new _(w.DEADLINE_EXCEEDED,"Request time out"));break;case s.a.HTTP_ERROR:var n=u.getStatus();if(p("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(e)>=0?e:w.UNKNOWN}(r.status);o(new _(a,r.message))}else o(new _(w.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new _(w.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{p("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);u.send(e,"POST",a,n,15)}))},n.prototype._u=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(s.g)(),i=Object(s.h)(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(u.initMessageHeaders,e),Object(o.l)()||Object(o.n)()||Object(o.j)()||Object(o.k)()||Object(o.o)()||Object(o.i)()||(u.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");p("Connection","Creating WebChannel: "+a,u);var c=r.createWebChannel(a,u),f=!1,h=!1,l=new Fs({pl:function(t){h?p("Connection","Not sending because WebChannel is closed:",t):(f||(p("Connection","Opening WebChannel transport."),c.open(),f=!0),p("Connection","WebChannel sending:",t),c.send(t))},vl:function(){return c.close()}}),d=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(c,s.e.EventType.OPEN,(function(){h||p("Connection","WebChannel transport opened.")})),d(c,s.e.EventType.CLOSE,(function(){h||(h=!0,p("Connection","WebChannel transport closed"),l.Nl())})),d(c,s.e.EventType.ERROR,(function(t){h||(h=!0,v("Connection","WebChannel transport errored:",t),l.Nl(new _(w.UNAVAILABLE,"The operation could not be completed")))})),d(c,s.e.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];b(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){p("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Y[t];if(void 0!==e)return Z(e)}(o),u=i.message;void 0===s&&(s=w.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,l.Nl(new _(s,u)),c.close()}else p("Connection","WebChannel received:",n),l.xl(n)}})),d(i,s.b.STAT_EVENT,(function(t){t.stat===s.d.PROXY?p("Connection","Detected buffering proxy"):t.stat===s.d.NOPROXY&&p("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Cl()}),0),l},n}(function(){function t(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.yu=function(t,e,n,r){var i=this.kl(t,e);p("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then((function(t){return p("RestConnection","Received: ",t),t}),(function(e){throw v("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Vu=function(t,e,n,r){return this.yu(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.2",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){var n=Bs[t];return this.Ol+"/v1/"+e+":"+n},t}()),Gs=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Qu=function(t){this.Kl.push(t)},t.prototype.Ic=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ws=function(){function t(){}return t.prototype.Qu=function(t){},t.prototype.Ic=function(){},t}(),Ks=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.serializer=Xn(t.Fl.t),this.Bh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Ou=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Ui(this.persistence,new Tr,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Vs(qs.gl,this.serializer)},t.prototype.jl=function(t){return new Qo},t.prototype.terminate=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.Bh.Ic()];case 1:return t.sent(),[4,this.persistence.Ic()];case 2:return t.sent(),[2]}}))}))},t}(),Hs=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(e.c)(n,t),n.prototype.initialize=function(n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return e.sent(),[4,$i(this.Ou)];case 2:return e.sent(),[4,this.Xl.initialize(this,n)];case 3:return e.sent(),[4,Ps(this.Xl.va)];case 4:return e.sent(),[4,wo(this.Xl.$h)];case 5:return e.sent(),[2]}}))}))},n.prototype.Jl=function(t){return Ui(this.persistence,new Tr,t.Yl,this.serializer)},n.prototype.Hl=function(t){var e=this.persistence.Dr.cr;return new Or(e,t.di)},n.prototype.Gl=function(t){var e=Mi(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Er.er(this.cacheSizeBytes):Er.ir;return new Pi(this.synchronizeTabs,e,t.clientId,n,t.di,dr(),vr(),this.serializer,this.Bh,!!this.forceOwnership)},n.prototype.jl=function(t){return new Qo},n}(Ks),Ys=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(e.c)(n,t),n.prototype.initialize=function(n){return Object(e.b)(this,void 0,void 0,(function(){var r,i=this;return Object(e.d)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Xl.va,this.Bh instanceof Yo?(this.Bh.va={Eh:Is.bind(null,r),Th:xs.bind(null,r),Ih:Ns.bind(null,r),gc:Ss.bind(null,r),wh:Os.bind(null,r)},[4,this.Bh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.ic((function(t){return Object(e.b)(i,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Ts(this.Xl.va,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Ou):t||this.zl.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},n.prototype.jl=function(t){var e=dr();if(!Yo.Gs(e))throw new _(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Mi(t.Fl.t,t.Fl.persistenceKey);return new Yo(e,t.di,n,t.clientId,t.Yl)},n}(Hs),Qs=function(){function t(){}return t.prototype.initialize=function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r=this;return Object(e.d)(this,(function(e){switch(e.label){case 0:return this.Ou?[3,2]:(this.Ou=t.Ou,this.Bh=t.Bh,this.Mu=this.Zl(n),this.$h=this.t_(n),this.Lh=this.e_(n),this.va=this.n_(n,!t.synchronizeTabs),this.Bh.pu=function(t){return us(r.va,t,1)},this.$h.ku.s_=ws.bind(null,this.va),[4,Ao(this.$h,this.va.Zh)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new Do},t.prototype.Zl=function(t){var e,n=Xn(t.Fl.t),r=(e=t.Fl,new zs(e));return function(t,e,n){return new eo(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Ou,n=this.Mu,r=t.di,i=function(t){return us(s.va,t,0)},o=Gs.Gs()?new Gs:new Ws,new ro(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new es(t,e,n,r,i,o);return s&&(u.Xh=!0),u}(this.Ou,this.$h,this.Lh,this.Bh,t.Yl,t.qh,e)},t.prototype.terminate=function(){return function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return n=m(t),p("RemoteStore","RemoteStore shutting down."),n.Bu.add(5),[4,oo(n)];case 1:return e.sent(),n.Uu.Ic(),n.Ku.set("Unknown"),[2]}}))}))}(this.$h)},t}(),$s=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Xs(t,e,n){if(!n)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Js(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _(w.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zs(t,e,n,r){if(!0===e&&!0===r)throw new _(w.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function tu(t){if(!V.ot(t))throw new _(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function eu(t){if(V.ot(t))throw new _(w.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function nu(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g()}function ru(t,e){if("_delegate"in t&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nu(t);throw new _(w.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function iu(t,e){if(e<=0)throw new _(w.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var ou=function(t){this._methodName=t},su=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.c_=function(t){if(2!==t.u_)throw 1===t.u_?t.a_(this._methodName+"() can only appear at the top level of your update data"):t.a_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},n.prototype.isEqual=function(t){return t instanceof n},n}(ou);function uu(t,e,n){return new ha({u_:3,h_:e.settings.h_,methodName:t._methodName,l_:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var au=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.c_=function(t){return new Fe(t.path,new Pe)},n.prototype.isEqual=function(t){return t instanceof n},n}(ou),cu=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).__=n,r}return Object(e.c)(n,t),n.prototype.c_=function(t){var e=uu(this,t,!0),n=this.__.map((function(t){return ga(t,e)})),r=new ke(n);return new Fe(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(ou),fu=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).__=n,r}return Object(e.c)(n,t),n.prototype.c_=function(t){var e=uu(this,t,!0),n=this.__.map((function(t){return ga(t,e)})),r=new Re(n);return new Fe(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(ou),hu=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(e.c)(n,t),n.prototype.c_=function(t){var e=new Me(t.serializer,Zt(t.serializer,this.f_));return new Fe(t.path,e)},n.prototype.isEqual=function(t){return this===t},n}(ou),lu=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new _(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.d_=t,this.w_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.d_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.d_===t.d_&&this.w_===t.w_},t.prototype.toJSON=function(){return{latitude:this.d_,longitude:this.w_}},t.prototype.C=function(t){return x(this.d_,t.d_)||x(this.w_,t.w_)},t}(),pu=function(){function t(t){this.E_=t}return t.fromBase64String=function(e){try{return new t(H.fromBase64String(e))}catch(e){throw new _(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(H.fromUint8Array(e))},t.prototype.toBase64=function(){return this.E_.toBase64()},t.prototype.toUint8Array=function(){return this.E_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},t}(),du=function(t){this.o_=t},vu=new Map,yu=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new _(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Zs("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),gu=function(){function t(t,e){this.T_="(lite)",this.I_=new yu({}),this.m_=!1,t instanceof c?(this.A_=t,this.R_=new O):(this.P_=t,this.A_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new _(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new c(t.options.projectId)}(t),this.R_=new I(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.P_)throw new _(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.P_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"g_",{get:function(){return this.m_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return void 0!==this.V_},enumerable:!1,configurable:!0}),t.prototype.p_=function(t){if(this.m_)throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.I_=new yu(t),void 0!==t.credentials&&(this.R_=function(t){if(!t)return new O;switch(t.type){case"gapi":var e=t.client;return b(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new j(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new _(w.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.v_=function(){return this.I_},t.prototype.b_=function(){return this.m_=!0,this.I_},t.prototype._delete=function(){return this.V_||(this.V_=this.S_()),this.V_},t.prototype.S_=function(){return function(t){var e=vu.get(t);e&&(p("ComponentProvider","Removing Datastore"),vu.delete(t),e.terminate())}(this),Promise.resolve()},t}();function bu(){if("undefined"==typeof Uint8Array)throw new _(w.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function mu(){if("undefined"==typeof atob)throw new _(w.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.fromBase64String=function(t){return mu(),new n(pu.fromBase64String(t))},n.fromUint8Array=function(t){return bu(),new n(pu.fromUint8Array(t))},n.prototype.toBase64=function(){return mu(),this.o_.toBase64()},n.prototype.toUint8Array=function(){return bu(),this.o_.toUint8Array()},n.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},n.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},n}(du),_u=function(){function t(){}return t.prototype.D_=function(t,e){switch(void 0===e&&(e="none"),kt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return qt(t.integerValue||t.doubleValue);case 3:return this.C_(t.timestampValue);case 4:return this.N_(t,e);case 5:return t.stringValue;case 6:return this.x_(Ft(t.bytesValue));case 7:return this.F_(t.referenceValue);case 8:return this.O_(t.geoPointValue);case 9:return this.M_(t.arrayValue,e);case 10:return this.k_(t.mapValue,e);default:throw g()}},t.prototype.k_=function(t,e){var n=this,r={};return St(t.fields||{},(function(t,i){r[t]=n.D_(i,e)})),r},t.prototype.O_=function(t){return new lu(qt(t.latitude),qt(t.longitude))},t.prototype.M_=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.D_(t,e)}))},t.prototype.N_=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Nt(n)?t(n):n}(t);return null==n?null:this.D_(n,e);case"estimate":return this.C_(Dt(t));default:return null}},t.prototype.C_=function(t){var e=Ut(t);return new P(e.seconds,e.nanos)},t.prototype.L_=function(t,e){var n=R.Y(t);b(Ae(n));var r=new c(n.get(1),n.get(3)),i=new V(n.B(5));return r.isEqual(e)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Eu=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.c)(n,t),n.prototype.x_=function(t){return new wu(new pu(t))},n.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return Qa.B_(e,this.firestore,null)},n}(_u),Ou=function(){function t(t,e,n,r,i){this.q_=t,this.U_=e,this.Q_=n,this.K_=r,this.W_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.Q_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new qu(this.q_,this.W_,this.Q_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.K_},t.prototype.data=function(){if(this.K_){if(this.W_){var t=new Iu(this.q_,this.U_,this.Q_,this.K_,null);return this.W_.fromFirestore(t)}return this.U_.D_(this.K_.En())}},t.prototype.get=function(t){if(this.K_){var e=this.K_.data().field(Tu("DocumentSnapshot.get",t));if(null!==e)return this.U_.D_(e)}},t}(),Iu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.data=function(){return t.prototype.data.call(this)},n}(Ou);function Tu(t,e){return"string"==typeof e?Oa(t,e):e instanceof du?e.o_.j_:e.j_}var ju=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new _(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new M(t)}return t.prototype.isEqual=function(t){return this.j_.isEqual(t.j_)},t}(),Au=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).G_=new gr,r.T_="name"in e?e.name:"[DEFAULT]",r}return Object(e.c)(n,t),n.prototype.S_=function(){return this.z_||Ka(this),this.z_.terminate()},n}(gu);function Su(t,n,r){var i=this,o=new $n;return t.di.enqueue((function(){return Object(e.b)(i,void 0,void 0,(function(){var i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,xa(t,r)];case 1:return e.sent(),[4,Na(t,n)];case 2:return e.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===w.FAILED_PRECONDITION||t.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=e.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function xu(t){if(t.g_||t.y_)throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Nu=function(t){function n(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).q_=e,u.H_=e,u.metadata=o,u}return Object(e.c)(n,t),n.prototype.exists=function(){return t.prototype.exists.call(this)},n.prototype.data=function(t){if(void 0===t&&(t={}),this.K_){if(this.W_){var e=new Du(this.q_,this.U_,this.Q_,this.K_,this.metadata,null);return this.W_.fromFirestore(e,t)}return this.U_.D_(this.K_.En(),t.serverTimestamps)}},n.prototype.get=function(t,e){if(void 0===e&&(e={}),this.K_){var n=this.K_.data().field(Tu("DocumentSnapshot.get",t));if(null!==n)return this.U_.D_(n,e.serverTimestamps)}},n}(Ou),Du=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},n}(Nu),Pu=function(){function t(t,e,n,r){this.q_=t,this.U_=e,this.J_=r,this.metadata=new Za(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.J_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.J_.docs.forEach((function(r){t.call(e,new Du(n.q_,n.U_,r.key,r,new Za(n.J_.ee.has(r.key),n.J_.fromCache),n.query.W_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.J_.se)throw new _(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Y_&&this.X_===e||(this.Y_=function(t,e){if(t.J_.te.W()){var n=0;return t.J_.docChanges.map((function(e){var r=new Du(t.q_,t.U_,e.doc.key,e.doc,new Za(t.J_.ee.has(e.doc.key),t.J_.fromCache),t.query.W_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.J_.te;return t.J_.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Du(t.q_,t.U_,e.doc.key,e.doc,new Za(t.J_.ee.has(e.doc.key),t.J_.fromCache),t.query.W_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:ku(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.X_=e),this.Y_},t}();function ku(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function Lu(t,e){return t instanceof Nu&&e instanceof Nu?t.q_===e.q_&&t.Q_.isEqual(e.Q_)&&(null===t.K_?null===e.K_:t.K_.isEqual(e.K_))&&t.W_===e.W_:t instanceof Pu&&e instanceof Pu&&t.q_===e.q_&&oa(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.J_.isEqual(e.J_)}var Ru=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.c)(n,t),n.prototype.x_=function(t){return new pu(t)},n.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return new qu(this.firestore,null,e)},n}(_u);function Cu(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ru(t,qu);var o=ru(t.firestore,Au),s=sa(o);return e instanceof du&&(e=e.o_),Vu(o,("string"==typeof e||e instanceof ju?va(s,"updateDoc",t.Q_,e,n,r):da(s,"updateDoc",t.Q_,e)).tf(t.Q_,ze.exists(!0)))}function Mu(t){for(var n,r,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];t instanceof du&&(t=t.o_);var u={includeMetadataChanges:!1},a=0;"object"!=typeof o[a]||Jn(o[a])||(u=o[a],a++);var c,f,h,l={includeMetadataChanges:u.includeMetadataChanges};if(Jn(o[a])){var p=o[a];o[a]=null===(n=p.next)||void 0===n?void 0:n.bind(p),o[a+1]=null===(r=p.error)||void 0===r?void 0:r.bind(p),o[a+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(t instanceof qu)f=ru(t.firestore,Au),h=vn(t.Q_.path),c={next:function(e){o[a]&&o[a](Uu(f,t,e))},error:o[a+1],complete:o[a+2]};else{var d=ru(t,Fu);f=ru(d.firestore,Au),h=d.Z_;var v=new Ru(f);c={next:function(t){o[a]&&o[a](new Pu(f,v,d,t))},error:o[a+1],complete:o[a+2]},Zu(t.Z_)}return function(t,n,r,i){var o=this,s=new $s(i),u=new Mo(n,s,r);return t.di.Ri((function(){return Object(e.b)(o,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return n=Po,[4,Ma(t)];case 1:return[2,n.apply(void 0,[e.sent(),u])]}}))}))})),function(){s.r_(),t.di.Ri((function(){return Object(e.b)(o,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return n=ko,[4,Ma(t)];case 1:return[2,n.apply(void 0,[e.sent(),u])]}}))}))}))}}(Wa(f),h,l,c)}function Vu(t,n){return function(t,n){var r=this,i=new $n;return t.di.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=os,[4,Ca(t)];case 1:return[2,r.apply(void 0,[e.sent(),n,i])]}}))}))})),i.promise}(Wa(t),n)}function Uu(t,e,n){var r=n.docs.get(e.Q_),i=new Ru(t);return new Nu(t,i,e.Q_,r,new Za(n.hasPendingWrites,n.fromCache),e.W_)}var qu=function(){function t(t,e,n){this.W_=e,this.Q_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"ef",{get:function(){return this.Q_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.Q_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.Q_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ta(this.firestore,this.W_,this.Q_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.Q_)},t}(),Fu=function(){function t(t,e,n){this.W_=e,this.Z_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.Z_)},t}(),Bu=function(){};function zu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.nf(t)}return t}var Gu=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).sf=e,i.rf=n,i.cf=r,i.type="where",i}return Object(e.c)(n,t),n.prototype.nf=function(t){var e=sa(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new _(w.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Xu(s,o);for(var a=[],c=0,f=s;c<f.length;c++){var h=f[c];a.push($u(r,t,h))}u={arrayValue:{values:a}}}else u=$u(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Xu(s,o),u=ya(n,"where",s,"in"===o||"not-in"===o);var l=xn.create(i,o,u);return function(t,e){if(e.An()){var n=mn(t);if(null!==n&&!n.isEqual(e.field))throw new _(w.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=bn(t);null!==r&&Ju(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new _(w.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new _(w.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.Z_,0,e,t.firestore.A_,this.sf,this.rf,this.cf);return new Fu(t.firestore,t.W_,function(t,e){var n=t.filters.concat([e]);return new pn(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.Z_,n))},n}(Bu),Wu=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).sf=e,r.uf=n,r.type="orderBy",r}return Object(e.c)(n,t),n.prototype.nf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new _(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new _(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bn(e,n);return function(t,e){if(null===bn(t)){var n=mn(t);null!==n&&Ju(t,n,e.field)}}(t,r),r}(t.Z_,this.sf,this.uf);return new Fu(t.firestore,t.W_,function(t,e){var n=t.Tn.concat([e]);return new pn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.Z_,e))},n}(Bu),Ku=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.af=n,i.hf=r,i}return Object(e.c)(n,t),n.prototype.nf=function(t){return new Fu(t.firestore,t.W_,On(t.Z_,this.af,this.hf))},n}(Bu),Hu=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.lf=n,i._f=r,i}return Object(e.c)(n,t),n.prototype.nf=function(t){var e=Qu(t,this.type,this.lf,this._f);return new Fu(t.firestore,t.W_,function(t,e){return new pn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.Z_,e))},n}(Bu),Yu=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.lf=n,i._f=r,i}return Object(e.c)(n,t),n.prototype.nf=function(t){var e=Qu(t,this.type,this.lf,this._f);return new Fu(t.firestore,t.W_,function(t,e){return new pn(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.Z_,e))},n}(Bu);function Qu(t,e,n,r){if(n[0]instanceof du&&(n[0]=n[0].o_),n[0]instanceof Ou)return function(t,e,n,r,i){if(!r)throw new _(w.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=_n(t);s<u.length;s++){var a=u[s];if(a.field.tt())o.push(Bt(e,r.key));else{var c=r.field(a.field);if(Nt(c))throw new _(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var f=a.field.J();throw new _(w.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Vn(o,i)}(t.Z_,t.firestore.A_,e,n[0].K_,r);var i=sa(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new _(w.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.tt()){if("string"!=typeof c)throw new _(w.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!wn(t)&&-1!==c.indexOf("/"))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var f=t.path.child(R.Y(c));if(!V.ot(f))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var h=new V(f);u.push(Bt(e,h))}else{var l=ya(n,r,c);u.push(l)}}return new Vn(u,o)}(t.Z_,t.firestore.A_,i,e,n,r)}function $u(t,e,n){if(n instanceof du&&(n=n.o_),"string"==typeof n){if(""===n)throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wn(e)&&-1!==n.indexOf("/"))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(R.Y(n));if(!V.ot(r))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Bt(t,new V(r))}if(n instanceof qu)return Bt(t,n.Q_);throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+nu(n)+".")}function Xu(t,e){if(!Array.isArray(t)||0===t.length)throw new _(w.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new _(w.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ju(t,e,n){if(!n.isEqual(e))throw new _(w.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Zu(t){if(gn(t)&&0===t.Tn.length)throw new _(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ta=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,vn(r))||this).firestore=e,i.ef=r,i.type="collection",i}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.Z_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.Z_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this.ef.q();return t.W()?null:new qu(this.firestore,null,new V(t))},enumerable:!1,configurable:!0}),n.prototype.withConverter=function(t){return new n(this.firestore,t,this.ef)},n}(Fu);function ea(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof du&&(t=t.o_),Xs("collection","path",n),t instanceof gu){var o=R.Y.apply(R,Object(e.g)([n],r));return eu(o),new ta(t,null,o)}if(!(t instanceof qu||t instanceof ta))throw new _(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=R.Y.apply(R,Object(e.g)([t.path],r)).child(R.Y(n));return eu(s),new ta(t.firestore,null,s)}function na(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof du&&(t=t.o_),1===arguments.length&&(n=S.D()),Xs("doc","path",n),t instanceof gu){var o=R.Y.apply(R,Object(e.g)([n],r));return tu(o),new qu(t,null,new V(o))}if(!(t instanceof qu||t instanceof ta))throw new _(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=t.ef.child(R.Y.apply(R,Object(e.g)([n],r)));return tu(s),new qu(t.firestore,t instanceof ta?t.W_:null,new V(s))}var ra=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.c)(n,t),n.prototype.x_=function(t){return new pu(t)},n.prototype.F_=function(t){var e=this.L_(t,this.firestore.A_);return new qu(this.firestore,null,e)},n}(_u);function ia(t,e){return t instanceof du&&(t=t.o_),e instanceof du&&(e=e.o_),(t instanceof qu||t instanceof ta)&&(e instanceof qu||e instanceof ta)&&t.firestore===e.firestore&&t.path===e.path&&t.W_===e.W_}function oa(t,e){return t instanceof du&&(t=t.o_),e instanceof du&&(e=e.o_),t instanceof Fu&&e instanceof Fu&&t.firestore===e.firestore&&In(t.Z_,e.Z_)&&t.W_===e.W_}function sa(t){var e=t.b_(),n=Xn(t.A_);return new la(t.A_,!!e.ignoreUndefinedProperties,n)}var ua=/^__.*__$/,aa=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.tf=function(t,e){var n=[];return null!==this.en?n.push(new Je(t,this.data,this.en,e)):n.push(new Xe(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new tn(t,this.fieldTransforms)),n},t}(),ca=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.tf=function(t,e){var n=[new Je(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new tn(t,this.fieldTransforms)),n},t}();function fa(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var ha=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ff(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),t.prototype.df=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.wf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.df({path:n,l_:!1});return r.Ef(t),r},t.prototype.Tf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.df({path:n,l_:!1});return r.ff(),r},t.prototype.If=function(t){return this.df({path:void 0,l_:!0})},t.prototype.a_=function(t){return Ia(t,this.settings.methodName,this.settings.mf||!1,this.path,this.settings.h_)},t.prototype.contains=function(t){return void 0!==this.en.find((function(e){return t.j(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.j(e.field)}))},t.prototype.ff=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Ef(this.path.get(t))},t.prototype.Ef=function(t){if(0===t.length)throw this.a_("Document fields must not be empty");if(fa(this.u_)&&ua.test(t))throw this.a_('Document fields cannot begin and end with "__"')},t}(),la=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||Xn(t)}return t.prototype.Af=function(t,e,n,r){return void 0===r&&(r=!1),new ha({u_:t,methodName:e,h_:n,path:M.X(),l_:!1,mf:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function pa(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Af(o.merge||o.mergeFields?2:0,e,n,i);wa("Data must be an object, but it was:",s,r);var u,a,c=ba(r,s);if(o.merge)u=new qe(s.en),a=s.fieldTransforms;else if(o.mergeFields){for(var f=[],h=0,l=o.mergeFields;h<l.length;h++){var p=_a(e,l[h],n);if(!s.contains(p))throw new _(w.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Ta(f,p)||f.push(p)}u=new qe(f),a=s.fieldTransforms.filter((function(t){return u.un(t.field)}))}else u=null,a=s.fieldTransforms;return new aa(new sn(c),u,a)}function da(t,e,n,r){var i=t.Af(1,e,n);wa("Data must be an object, but it was:",i,r);var o=[],s=new un;St(r,(function(t,r){var u=Oa(e,t,n);r instanceof du&&(r=r.o_);var a=i.Tf(u);if(r instanceof su)o.push(u);else{var c=ga(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new qe(o);return new ca(s.hn(),u,i.fieldTransforms)}function va(t,e,n,r,i,o){var s=t.Af(1,e,n),u=[_a(e,r,n)],a=[i];if(o.length%2!=0)throw new _(w.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(_a(e,o[c])),a.push(o[c+1]);for(var f=[],h=new un,l=u.length-1;l>=0;--l)if(!Ta(f,u[l])){var p=u[l],d=a[l];d instanceof du&&(d=d.o_);var v=s.Tf(p);if(d instanceof su)f.push(p);else{var y=ga(d,v);null!=y&&(f.push(p),h.set(p,y))}}var g=new qe(f);return new ca(h.hn(),g,s.fieldTransforms)}function ya(t,e,n,r){return void 0===r&&(r=!1),ga(n,t.Af(r?4:3,e))}function ga(t,e){if(t instanceof du&&(t=t.o_),ma(t))return wa("Unsupported field value:",e,t),ba(t,e);if(t instanceof ou)return function(t,e){if(!fa(e.u_))throw e.a_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.a_(t._methodName+"() is not currently supported inside arrays");var n=t.c_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.l_&&4!==e.u_)throw e.a_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=ga(o[i],e.If(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof du&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zt(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=P.fromDate(t);return{timestampValue:te(e.serializer,n)}}if(t instanceof P){var r=new P(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:te(e.serializer,r)}}if(t instanceof lu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pu)return{bytesValue:ee(e.serializer,t.E_)};if(t instanceof qu){var i=e.t,o=t.firestore.A_;if(!o.isEqual(i))throw e.a_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:ie(t.firestore.A_||e.t,t.Q_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.a_("Unsupported field value: "+nu(t))}(t,e)}function ba(t,e){var n={};return xt(t)?e.path&&e.path.length>0&&e.en.push(e.path):St(t,(function(t,r){var i=ga(r,e.wf(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function ma(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof P||t instanceof lu||t instanceof pu||t instanceof qu||t instanceof ou)}function wa(t,e,n){if(!ma(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=nu(n);throw"an object"===r?e.a_(t+" a custom object"):e.a_(t+" "+r)}}function _a(t,e,n){if(e instanceof du&&(e=e.o_),e instanceof ju)return e.j_;if("string"==typeof e)return Oa(t,e);throw Ia("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Ea=new RegExp("[~\\*/\\[\\]]");function Oa(t,n,r){if(n.search(Ea)>=0)throw Ia("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,r);try{return(new(ju.bind.apply(ju,Object(e.g)([void 0],n.split("."))))).j_}catch(e){throw Ia("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,r)}}function Ia(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new _(w.INVALID_ARGUMENT,(u+=". ")+t+a)}function Ta(t,e){return t.some((function(t){return t.isEqual(e)}))}var ja=function(){function t(t){this.Mu=t,this.Rf=new Map,this.mutations=[],this.Pf=!1,this.gf=null,this.yf=new Set}return t.prototype.Vf=function(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r=this;return Object(e.d)(this,(function(i){switch(i.label){case 0:if(this.pf(),this.mutations.length>0)throw new _(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=m(t),i=fe(r.serializer)+"/documents",o={documents:n.map((function(t){return se(r.serializer,t)}))},[4,r.Vu("BatchGetDocuments",i,o)];case 1:return s=e.sent(),u=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){b(!!e.found),e.found.name,e.found.updateTime;var n=ue(t,e.found.name),r=re(e.found.updateTime),i=new sn({mapValue:{fields:e.found.fields}});return new fn(n,r,i,{})}(t,e):"missing"in e?function(t,e){b(!!e.missing),b(!!e.readTime);var n=ue(t,e.missing),r=re(e.readTime);return new hn(n,r)}(t,e):g()}(r.serializer,t);u.set(e.key.toString(),e)})),a=[],[2,(n.forEach((function(t){var e=u.get(t.toString());b(!!e),a.push(e)})),a)]}}))}))}(this.Mu,t)];case 1:return[2,((n=i.sent()).forEach((function(t){t instanceof hn||t instanceof fn?r.vf(t):g()})),n)]}}))}))},t.prototype.set=function(t,e){this.write(e.tf(t,this.rn(t))),this.yf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.tf(t,this.bf(t)))}catch(t){this.gf=t}this.yf.add(t.toString())},t.prototype.delete=function(t){this.write([new rn(t,this.rn(t))]),this.yf.add(t.toString())},t.prototype.commit=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n=this;return Object(e.d)(this,(function(r){switch(r.label){case 0:if(this.pf(),this.gf)throw this.gf;return t=this.Rf,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,e){var r=V.st(e);n.mutations.push(new on(r,n.rn(r)))})),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.d)(this,(function(e){switch(e.label){case 0:return r=m(t),i=fe(r.serializer)+"/documents",o={writes:n.map((function(t){return pe(r.serializer,t)}))},[4,r.yu("Commit",i,o)];case 1:return e.sent(),[2]}}))}))}(this.Mu,this.mutations)];case 1:return r.sent(),this.Pf=!0,[2]}}))}))},t.prototype.vf=function(t){var e;if(t instanceof fn)e=t.version;else{if(!(t instanceof hn))throw g();e=k.min()}var n=this.Rf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new _(w.ABORTED,"Document version changed between two reads.")}else this.Rf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Rf.get(t.toString());return!this.yf.has(t.toString())&&e?ze.updateTime(e):ze.on()},t.prototype.bf=function(t){var e=this.Rf.get(t.toString());if(!this.yf.has(t.toString())&&e){if(e.isEqual(k.min()))throw new _(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(e)}return ze.exists(!0)},t.prototype.write=function(t){this.pf(),this.mutations=this.mutations.concat(t)},t.prototype.pf=function(){},t}(),Aa=function(){function t(t,e,n,r){this.di=t,this.Mu=e,this.updateFunction=n,this.Ti=r,this.Sf=5,this.Si=new ir(this.di,"transaction_retry")}return t.prototype.run=function(){this.Df()},t.prototype.Df=function(){var t=this;this.Si.Bs((function(){return Object(e.b)(t,void 0,void 0,(function(){var t,n,r=this;return Object(e.d)(this,(function(e){return t=new ja(this.Mu),(n=this.Cf(t))&&n.then((function(e){r.di.Ri((function(){return t.commit().then((function(){r.Ti.resolve(e)})).catch((function(t){r.Nf(t)}))}))})).catch((function(t){r.Nf(t)})),[2]}))}))}))},t.prototype.Cf=function(t){try{var e=this.updateFunction(t);return!U(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.Nf=function(t){var e=this;this.Sf>0&&this.xf(t)?(this.Sf-=1,this.di.Ri((function(){return e.Df(),Promise.resolve()}))):this.Ti.reject(t)},t.prototype.xf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!J(e)}return!1},t}(),Sa=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=f.UNAUTHENTICATED,this.clientId=S.D(),this.Ff=function(){},this.g=new $n,this.credentials.A((function(t){p("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Ff(t)),r.g.resolve()}))}return t.prototype.getConfiguration=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,qh:100})]}}))}))},t.prototype.Of=function(t){var e=this;this.Ff=t,this.g.promise.then((function(){return e.Ff(e.user)}))},t.prototype.Mf=function(){if(this.di.Ci)throw new _(w.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var n=new $n;return this.di.Ni((function(){return Object(e.b)(t,void 0,void 0,(function(){var t,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),this.kf?[4,this.kf.terminate()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.$f?[4,this.$f.terminate()]:[3,4];case 3:e.sent(),e.label=4;case 4:return this.credentials.R(),n.resolve(),[3,6];case 5:return t=e.sent(),r=br(t,"Failed to shutdown persistence"),n.reject(r),[3,6];case 6:return[2]}}))}))})),n.promise},t}();function xa(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i=this;return Object(e.d)(this,(function(o){switch(o.label){case 0:return t.di.Li(),p("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return r=o.sent(),[4,n.initialize(r)];case 2:return o.sent(),t.Of((function(r){return t.di.Mi((function(){return Object(e.b)(i,void 0,void 0,(function(){return Object(e.d)(this,(function(t){switch(t.label){case 0:return[4,qi(n.Ou,r)];case 1:return t.sent(),[2]}}))}))}))})),n.persistence.rc((function(){return t.terminate()})),t.$f=n,[2]}}))}))}function Na(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(o){switch(o.label){case 0:return t.di.Li(),[4,Da(t)];case 1:return r=o.sent(),p("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,n.initialize(r,i)];case 3:return o.sent(),t.Of((function(r){return t.di.Mi((function(){return function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(r=m(t)).di.Li(),p("RemoteStore","RemoteStore received new credentials"),i=lo(r),r.Bu.add(3),[4,oo(r)];case 1:return e.sent(),i&&r.Ku.set("Unknown"),[4,r.ku.s_(n)];case 2:return e.sent(),r.Bu.delete(3),[4,io(r)];case 3:return e.sent(),[2]}}))}))}(n.$h,r)}))})),t.kf=n,[2]}}))}))}function Da(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return t.$f?[3,2]:(p("FirestoreClient","Using default OfflineComponentProvider"),[4,xa(t,new Ks)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}}))}))}function Pa(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.d)(this,(function(e){switch(e.label){case 0:return t.kf?[3,2]:(p("FirestoreClient","Using default OnlineComponentProvider"),[4,Na(t,new Qs)]);case 1:e.sent(),e.label=2;case 2:return[2,t.kf]}}))}))}function ka(t){return Da(t).then((function(t){return t.persistence}))}function La(t){return Da(t).then((function(t){return t.Ou}))}function Ra(t){return Pa(t).then((function(t){return t.$h}))}function Ca(t){return Pa(t).then((function(t){return t.va}))}function Ma(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,Pa(t)];case 1:return n=e.sent(),[2,((r=n.Lh).ta=ns.bind(null,n.va),r.sa=is.bind(null,n.va),r)]}}))}))}function Va(t,n,r){var i=this;void 0===r&&(r={});var o=new $n;return t.di.Ri((function(){return Object(e.b)(i,void 0,void 0,(function(){var i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return i=function(t,e,n,r,i){var o=new $s({next:function(o){e.Ri((function(){return ko(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new _(w.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new _(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Mo(vn(n.path),o,{includeMetadataChanges:!0,ha:!0});return Po(t,s)},[4,Ma(t)];case 1:return[2,i.apply(void 0,[e.sent(),t.di,n,r,o])]}}))}))})),o.promise}function Ua(t,n,r){var i=this;void 0===r&&(r={});var o=new $n;return t.di.Ri((function(){return Object(e.b)(i,void 0,void 0,(function(){var i;return Object(e.d)(this,(function(e){switch(e.label){case 0:return i=function(t,e,n,r,i){var o=new $s({next:function(n){e.Ri((function(){return ko(t,s)})),n.fromCache&&"server"===r.source?i.reject(new _(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Mo(n,o,{includeMetadataChanges:!0,ha:!0});return Po(t,s)},[4,Ma(t)];case 1:return[2,i.apply(void 0,[e.sent(),t.di,n,r,o])]}}))}))})),o.promise}var qa=function(){function t(t,e){this.q_=t,this.Lf=e,this.Bf=[],this.qf=!1,this.Uf=sa(t)}return t.prototype.set=function(t,e,n){this.Qf();var r=Fa(t,this.q_),i=uc(r.W_,e,n),o=pa(this.Uf,"WriteBatch.set",r.Q_,i,null!==r.W_,n);return this.Bf=this.Bf.concat(o.tf(r.Q_,ze.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Qf();var o,s=Fa(t,this.q_);return e instanceof du&&(e=e.o_),o="string"==typeof e||e instanceof ju?va(this.Uf,"WriteBatch.update",s.Q_,e,n,r):da(this.Uf,"WriteBatch.update",s.Q_,e),this.Bf=this.Bf.concat(o.tf(s.Q_,ze.exists(!0))),this},t.prototype.delete=function(t){this.Qf();var e=Fa(t,this.q_);return this.Bf=this.Bf.concat(new rn(e.Q_,ze.on())),this},t.prototype.commit=function(){return this.Qf(),this.qf=!0,this.Bf.length>0?this.Lf(this.Bf):Promise.resolve()},t.prototype.Qf=function(){if(this.qf)throw new _(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Fa(t,e){if(t instanceof du&&(t=t.o_),t.firestore!==e)throw new _(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Ba=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).q_=e,r}return Object(e.c)(n,t),n.prototype.get=function(e){var n=this,r=Fa(e,this.q_),i=new Ru(this.q_);return t.prototype.get.call(this,e).then((function(t){return new Nu(n.q_,i,r.Q_,t.K_,new Za(!1,!1),r.W_)}))},n}(function(){function t(t,e){this.q_=t,this.Kf=e,this.Uf=sa(t)}return t.prototype.get=function(t){var e=this,n=Fa(t,this.q_),r=new ra(this.q_);return this.Kf.Vf([n.Q_]).then((function(t){if(!t||1!==t.length)return g();var i=t[0];if(i instanceof hn)return new Ou(e.q_,r,n.Q_,null,n.W_);if(i instanceof fn)return new Ou(e.q_,r,i.key,i,n.W_);throw g()}))},t.prototype.set=function(t,e,n){var r=Fa(t,this.q_),i=uc(r.W_,e,n),o=pa(this.Uf,"Transaction.set",r.Q_,i,null!==r.W_,n);return this.Kf.set(r.Q_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Fa(t,this.q_);return e instanceof du&&(e=e.o_),o="string"==typeof e||e instanceof ju?va(this.Uf,"Transaction.update",s.Q_,e,n,r):da(this.Uf,"Transaction.update",s.Q_,e),this.Kf.update(s.Q_,o),this},t.prototype.delete=function(t){var e=Fa(t,this.q_);return this.Kf.delete(e.Q_),this},t}()),za=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){xu(t=ru(t,Au));var n=Wa(t),r=t.b_(),i=new Qs;return Su(n,i,new Hs(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){xu(t=ru(t,Au));var e=Wa(t),n=t.b_(),r=new Qs;return Su(e,r,new Ys(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var n=this;if(t.g_&&!t.y_)throw new _(w.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new $n;return t.G_.Ni((function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return or.Gs()?(n=t+"main",[4,or.delete(n)]):[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Mi(t.A_,t.T_))];case 1:return i.sent(),r.resolve(),[3,3];case 2:return n=i.sent(),r.reject(n),[3,3];case 3:return[2]}}))}))})),r.promise}(t.o_)},t}(),Ga=function(t){function n(e,n,r){var i=this;return(i=t.call(this,n)||this).Wf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof c||(i.jf=e),i}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"A_",{get:function(){return this.o_.A_},enumerable:!1,configurable:!0}),n.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.v_()),t)).merge,this.o_.p_(t)},n.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.v_().host&&v("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},n.prototype.enableNetwork=function(){return function(t){var n=this;return t.di.enqueue((function(){return Object(e.b)(n,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,ka(t)];case 1:return n=e.sent(),[4,Ra(t)];case 2:return r=e.sent(),[2,(n.oc(!0),function(t){var e=m(t);return e.Bu.delete(0),io(e)}(r))]}}))}))}))}(Wa(ru(this.o_,Au)))},n.prototype.disableNetwork=function(){return function(t){var n=this;return t.di.enqueue((function(){return Object(e.b)(n,void 0,void 0,(function(){var n,r;return Object(e.d)(this,(function(i){switch(i.label){case 0:return[4,ka(t)];case 1:return n=i.sent(),[4,Ra(t)];case 2:return r=i.sent(),[2,(n.oc(!1),function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return(n=m(t)).Bu.add(0),[4,oo(n)];case 1:return e.sent(),n.Ku.set("Offline"),[2]}}))}))}(r))]}}))}))}))}(Wa(ru(this.o_,Au)))},n.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Zs("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Wf.enableMultiTabIndexedDbPersistence(this):this.Wf.enableIndexedDbPersistence(this,n)},n.prototype.clearPersistence=function(){return this.Wf.clearIndexedDbPersistence(this)},n.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},n.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new $n;return t.di.Ri((function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return n=hs,[4,Ca(t)];case 1:return[2,n.apply(void 0,[e.sent(),r])]}}))}))})),r.promise}(Wa(ru(this.o_,Au)))},n.prototype.onSnapshotsInSync=function(t){return function(t,n){return function(t,n){var r=this,i=new $s(n);return t.di.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return n=function(t,e){m(t).Zu.add(e),e.next()},[4,Ma(t)];case 1:return[2,n.apply(void 0,[e.sent(),i])]}}))}))})),function(){i.r_(),t.di.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var n;return Object(e.d)(this,(function(e){switch(e.label){case 0:return n=function(t,e){m(t).Zu.delete(e)},[4,Ma(t)];case 1:return[2,n.apply(void 0,[e.sent(),i])]}}))}))}))}}(Wa(t=ru(t,Au)),Jn(n)?n:{next:n})}(this.o_,t)},Object.defineProperty(n.prototype,"app",{get:function(){if(!this.jf)throw new _(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.jf},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new oc(this,ea(this.o_,t))}catch(t){throw $a(t,"collection()","Firestore.collection()")}},n.prototype.doc=function(t){try{return new Qa(this,na(this.o_,t))}catch(t){throw $a(t,"doc()","Firestore.doc()")}},n.prototype.collectionGroup=function(t){try{return new nc(this,function(t,e){if(t=ru(t,gu),Xs("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _(w.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Fu(t,null,function(t){return new pn(R.X(),t)}(e))}(this.o_,t))}catch(t){throw $a(t,"collectionGroup()","Firestore.collectionGroup()")}},n.prototype.runTransaction=function(t){var n=this;return function(t,n){return function(t,n){var r=this,i=new $n;return t.di.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.d)(this,(function(e){switch(e.label){case 0:return[4,function(t){return Pa(t).then((function(t){return t.Mu}))}(t)];case 1:return r=e.sent(),new Aa(t.di,r,n,i).run(),[2]}}))}))})),i.promise}(Wa(t),(function(e){return n(new Ba(t,e))}))}(this.o_,(function(e){return t(new Ha(n,e))}))},n.prototype.batch=function(){var t=this;return Wa(this.o_),new Ya(new qa(this.o_,(function(e){return Vu(t.o_,e)})))},n}(du);function Wa(t){return t.z_||Ka(t),t.z_.Mf(),t.z_}function Ka(t){var e=t.b_(),n=function(t,e,n){return new a(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.A_,t.T_,e);t.z_=new Sa(t.R_,t.G_,n)}var Ha=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(e.c)(n,t),n.prototype.get=function(t){var e=this,n=sc(t);return this.o_.get(n).then((function(t){return new tc(e.q_,t)}))},n.prototype.set=function(t,e,n){var r=sc(t);return n?(Js("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},n.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=sc(t);return 2===arguments.length?this.o_.update(u,n):(i=this.o_).update.apply(i,Object(e.g)([u,n,r],o)),this},n.prototype.delete=function(t){var e=sc(t);return this.o_.delete(e),this},n}(du),Ya=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.set=function(t,e,n){var r=sc(t);return n?(Js("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},n.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=sc(t);return 2===arguments.length?this.o_.update(u,n):(i=this.o_).update.apply(i,Object(e.g)([u,n,r],o)),this},n.prototype.delete=function(t){var e=sc(t);return this.o_.delete(e),this},n.prototype.commit=function(){return this.o_.commit()},n}(du),Qa=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.U_=new Eu(e),r}return Object(e.c)(n,t),n.Gf=function(t,e,r){if(t.length%2!=0)throw new _(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new n(e,new qu(e.o_,r,new V(t)))},n.B_=function(t,e,r){return new n(e,new qu(e.o_,r,t))},Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new oc(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new oc(this.firestore,ea(this.o_,t))}catch(t){throw $a(t,"collection()","DocumentReference.collection()")}},n.prototype.isEqual=function(t){return t instanceof du&&(t=t.o_),t instanceof qu&&ia(this.o_,t)},n.prototype.set=function(t,e){e=Js("DocumentReference.set",e);try{return function(t,e,n){t=ru(t,qu);var r=ru(t.firestore,Au),i=uc(t.W_,e,n);return Vu(r,pa(sa(r),"setDoc",t.Q_,i,null!==t.W_,n).tf(t.Q_,ze.on()))}(this.o_,t,e)}catch(t){throw $a(t,"setDoc()","DocumentReference.set()")}},n.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Cu(this.o_,t):Cu.apply(void 0,Object(e.g)([this.o_,t,n],r))}catch(t){throw $a(t,"updateDoc()","DocumentReference.update()")}},n.prototype.delete=function(){return Vu(ru((t=this.o_).firestore,Au),[new rn(t.Q_,ze.on())]);var t},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Xa(e),i=Ja(e,(function(e){return new tc(t.firestore,new Nu(t.firestore.o_,t.U_,e.Q_,e.K_,e.metadata,t.o_.W_))}));return Mu(this.o_,r,i)},n.prototype.get=function(t){var n=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ru(t,qu);var n=ru(t.firestore,Au),r=Wa(n),i=new Ru(n);return function(t,n){var r=this,i=new $n;return t.di.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.d)(this,(function(o){switch(o.label){case 0:return r=function(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s;return Object(e.d)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Bc.cs(t,e)}))}(t,n)];case 1:return(i=e.sent())instanceof fn?r.resolve(i):i instanceof hn?r.resolve(null):r.reject(new _(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=e.sent(),s=br(o,"Failed to get document '"+n+" from cache"),r.reject(s),[3,3];case 3:return[2]}}))}))},[4,La(t)];case 1:return[2,r.apply(void 0,[o.sent(),n,i])]}}))}))})),i.promise}(r,t.Q_).then((function(e){return new Nu(n,i,t.Q_,e,new Za(e instanceof fn&&e.an,!0),t.W_)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){t=ru(t,qu);var e=ru(t.firestore,Au);return Va(Wa(e),t.Q_,{source:"server"}).then((function(n){return Uu(e,t,n)}))}(this.o_):function(t){t=ru(t,qu);var e=ru(t.firestore,Au);return Va(Wa(e),t.Q_).then((function(n){return Uu(e,t,n)}))}(this.o_)).then((function(t){return new tc(n.firestore,new Nu(n.firestore.o_,n.U_,t.Q_,t.K_,t.metadata,n.o_.W_))}))},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}(du);function $a(t,e,n){return t.message=t.message.replace(e,n),t}function Xa(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Jn(r))return r}return{}}function Ja(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Jn(t[0])?t[0]:Jn(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Za=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"ref",{get:function(){return new Qa(this.q_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),n.prototype.data=function(t){return this.o_.data(t)},n.prototype.get=function(t,e){return this.o_.get(t,e)},n.prototype.isEqual=function(t){return Lu(this.o_,t.o_)},n}(du),ec=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.prototype.data=function(t){return this.o_.data(t)},n}(tc),nc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.U_=new Eu(e),r}return Object(e.c)(n,t),n.prototype.where=function(t,e,r){try{return new n(this.firestore,zu(this.o_,function(t,e,n){var r=e,i=Tu("where",t);return new Gu(i,r,n)}(t,e,r)))}catch(t){throw $a(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.orderBy=function(t,e){try{return new n(this.firestore,zu(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=Tu("orderBy",t);return new Wu(r,n)}(t,e)))}catch(t){throw $a(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.limit=function(t){try{return new n(this.firestore,zu(this.o_,function(t){return iu("limit",t),new Ku("limit",t,"F")}(t)))}catch(t){throw $a(t,"limit()","Query.limit()")}},n.prototype.limitToLast=function(t){try{return new n(this.firestore,zu(this.o_,function(t){return iu("limitToLast",t),new Ku("limitToLast",t,"L")}(t)))}catch(t){throw $a(t,"limitToLast()","Query.limitToLast()")}},n.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,zu(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hu("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw $a(t,"startAt()","Query.startAt()")}},n.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,zu(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hu("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw $a(t,"startAfter()","Query.startAfter()")}},n.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,zu(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yu("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw $a(t,"endBefore()","Query.endBefore()")}},n.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,zu(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yu("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw $a(t,"endAt()","Query.endAt()")}},n.prototype.isEqual=function(t){return oa(this.o_,t.o_)},n.prototype.get=function(t){var n=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ru(t,Fu);var n=ru(t.firestore,Au),r=Wa(n),i=new Ru(n);return function(t,n){var r=this,i=new $n;return t.di.Ri((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.d)(this,(function(o){switch(o.label){case 0:return r=function(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Object(e.d)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Hi(t,n,!0)];case 1:return i=e.sent(),o=new Jo(n,i.Kc),s=o.bh(i.documents),u=o.Zn(s,!1),r.resolve(u.snapshot),[3,3];case 2:return a=e.sent(),c=br(a,"Failed to execute query '"+n+" against cache"),r.reject(c),[3,3];case 3:return[2]}}))}))},[4,La(t)];case 1:return[2,r.apply(void 0,[o.sent(),n,i])]}}))}))})),i.promise}(r,t.Z_).then((function(e){return new Pu(n,i,t,e)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){t=ru(t,Fu);var e=ru(t.firestore,Au),n=Wa(e),r=new Ru(e);return Ua(n,t.Z_,{source:"server"}).then((function(n){return new Pu(e,r,t,n)}))}(this.o_):function(t){t=ru(t,Fu);var e=ru(t.firestore,Au),n=Wa(e),r=new Ru(e);return Zu(t.Z_),Ua(n,t.Z_).then((function(n){return new Pu(e,r,t,n)}))}(this.o_)).then((function(t){return new ic(n.firestore,new Pu(n.firestore.o_,n.U_,n.o_,t.J_))}))},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Xa(e),i=Ja(e,(function(e){return new ic(t.firestore,new Pu(t.firestore.o_,t.U_,t.o_,e.J_))}));return Mu(this.o_,r,i)},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}(du),rc=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doc",{get:function(){return new ec(this.q_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),n}(du),ic=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).q_=e,r}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"query",{get:function(){return new nc(this.q_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map((function(e){return new ec(t.q_,e)}))},enumerable:!1,configurable:!0}),n.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map((function(t){return new rc(e.q_,t)}))},n.prototype.forEach=function(t,e){var n=this;this.o_.forEach((function(r){t.call(e,new ec(n.q_,r))}))},n.prototype.isEqual=function(t){return Lu(this.o_,t.o_)},n}(du),oc=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(e.c)(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new Qa(this.firestore,t):null},enumerable:!1,configurable:!0}),n.prototype.doc=function(t){try{return new Qa(this.firestore,void 0===t?na(this.o_):na(this.o_,t))}catch(t){throw $a(t,"doc()","CollectionReference.doc()")}},n.prototype.add=function(t){var e=this;return function(t,e){var n=ru(t.firestore,Au),r=na(t),i=uc(t.W_,e);return Vu(n,pa(sa(t.firestore),"addDoc",r.Q_,i,null!==t.W_,{}).tf(r.Q_,ze.exists(!1))).then((function(){return r}))}(this.o_,t).then((function(t){return new Qa(e.firestore,t)}))},n.prototype.isEqual=function(t){return ia(this.o_,t.o_)},n.prototype.withConverter=function(t){return new n(this.firestore,this.o_.withConverter(t))},n}(nc);function sc(t){return t instanceof du&&(t=t.o_),ru(t,qu)}function uc(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ac,cc=function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.call(this,new(ju.bind.apply(ju,Object(e.g)([void 0],n))))||this}return Object(e.c)(n,t),n.documentId=function(){return new n(M.et().J())},n.prototype.isEqual=function(t){return t instanceof du&&(t=t.o_),t instanceof ju&&this.o_.j_.isEqual(t.j_)},n}(du),fc=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.c)(n,t),n.serverTimestamp=function(){var t=new au("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new n(t)},n.delete=function(){var t=new su("deleteField");return t._methodName="FieldValue.delete",new n(t)},n.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cu("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new n(r)},n.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fu("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new n(r)},n.increment=function(t){var e=function(t){return new hu("increment",t)}(t);return e._methodName="FieldValue.increment",new n(e)},n.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},n}(du),hc={Firestore:Ga,GeoPoint:lu,Timestamp:P,Blob:wu,Transaction:Ha,WriteBatch:Ya,DocumentReference:Qa,DocumentSnapshot:tc,Query:nc,QueryDocumentSnapshot:ec,QuerySnapshot:ic,CollectionReference:oc,FieldPath:cc,FieldValue:fc,setLogLevel:function(t){var e;e=t,h.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new u.a("firestore",(function(t){return function(t,e){return new Ga(t,new Au(t,e),new za)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},hc)))})(ac=r.a),ac.registerVersion("@firebase/firestore","2.0.5")}).call(this,n(331))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a,c=[],f=!1,h=-1;function l(){f&&a&&(f=!1,a.length?c=a.concat(c):h=-1,c.length&&p())}function p(){if(!f){var t=u(l);f=!0;for(var e=c.length;e;){for(a=c,c=[];++h<e;)a&&a[h].run();h=-1,e=c.length}a=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||f||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return rr})),n.d(e,"b",(function(){return or})),n.d(e,"c",(function(){return ir})),n.d(e,"d",(function(){return sr})),n.d(e,"e",(function(){return ur})),n.d(e,"f",(function(){return ar})),n.d(e,"g",(function(){return er})),n.d(e,"h",(function(){return nr}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},u=u||{},a=s||self;function c(){}function f(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var l="closure_uid_"+(1e9*Math.random()>>>0),p=0;function d(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function y(t,e,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:v).apply(null,arguments)}function g(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function b(){return Date.now()}function m(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,l)&&t[l]||(t[l]=++p)})(this)},w.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function O(t){return Array.prototype.concat.apply([],arguments)}function I(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function T(t){return/^[\s\xa0]*$/.test(t)}var j,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function S(t,e){return-1!=t.indexOf(e)}function x(t,e){return t<e?-1:t>e?1:0}t:{var N=a.navigator;if(N){var D=N.userAgent;if(D){j=D;break t}}j=""}function P(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function k(t){var e={};for(var n in t)e[n]=t[n];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function C(t){return C[" "](t),t}C[" "]=c;var M,V,U=S(j,"Opera"),q=S(j,"Trident")||S(j,"MSIE"),F=S(j,"Edge"),B=F||q,z=S(j,"Gecko")&&!(S(j.toLowerCase(),"webkit")&&!S(j,"Edge"))&&!(S(j,"Trident")||S(j,"MSIE"))&&!S(j,"Edge"),G=S(j.toLowerCase(),"webkit")&&!S(j,"Edge");function W(){var t=a.document;return t?t.documentMode:void 0}t:{var K="",H=(V=j,z?/rv:([^\);]+)(\)|;)/.exec(V):F?/Edge\/([\d\.]+)/.exec(V):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(V):G?/WebKit\/(\S+)/.exec(V):U?/(?:Version)[ \/]?(\S+)/.exec(V):void 0);if(H&&(K=H?H[1]:""),q){var Y=W();if(null!=Y&&Y>parseFloat(K)){M=String(Y);break t}}M=K}var Q,$={};function X(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=A(String(M)).split("."),r=A(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=x(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||x(0==s[2].length,0==u[2].length)||x(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(a.document&&q){var J=W();Q=J||(parseInt(M,10)||void 0)}else Q=void 0;var Z=Q,tt=!q||9<=Number(Z),et=q&&!X("9"),nt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(t){}return t}();function rt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function it(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(z){t:{try{C(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ot[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}rt.prototype.b=function(){this.defaultPrevented=!0},m(it,rt);var ot={2:"touch",3:"pen",4:"mouse"};it.prototype.b=function(){it.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var st="closure_listenable_"+(1e6*Math.random()|0),ut=0;function at(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ut,this.Y=this.Z=!1}function ct(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ft(t){this.src=t,this.a={},this.b=0}function ht(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ct(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function lt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=lt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new at(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),dt={};function vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ot(r),e&&e[st]?e.wa(n,r,h(i)?!!i.capture:!!i,o):yt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=Ot(n),t&&t[st]?t.va(e,n,h(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=h(i)?!!i.capture:!!i;if(s&&!tt)return null;var u=_t(t);if(u||(t[pt]=u=new ft(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=wt,e=tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[st])ht(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_t(e))?(ht(n,t),0==n.b&&(n.src=null,e[pt]=null)):ct(t)}}}function bt(t){return t in dt?dt[t]:dt[t]="on"+t}function mt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gt(t),n.call(r,e)}function wt(t,e){if(t.Y)return!0;if(!tt){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return mt(t,e=new it(e,this))}return mt(t,new it(e,this))}function _t(t){return(t=t[pt])instanceof ft?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(t){return"function"==typeof t?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function It(){w.call(this),this.c=new ft(this),this.J=this,this.C=null}function Tt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new rt(e,t);else if(e instanceof rt)e.target=e.target||t;else{var i=e;R(e=new rt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=jt(s,r,!0,e)&&i}if(i=jt(s=e.a=t,r,!0,e)&&i,i=jt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=jt(s=e.a=n[o],r,!1,e)&&i}function jt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&ht(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}m(It,w),It.prototype[st]=!0,(o=It.prototype).addEventListener=function(t,e,n,r){vt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=h(i)?!!i.capture:!!i,r=Ot(r),e&&e[st]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=lt(s=e.a[n],r,i,o))&&(ct(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--)))):e&&(e=_t(e))&&(n=e.a[n.toString()],e=-1,n&&(e=lt(n,r,i,o)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},o.G=function(){if(It.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ct(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var At=a.JSON.stringify;function St(){this.b=this.a=null}var xt,Nt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Pt}),(function(t){t.reset()}));function Dt(){var t=Ct,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pt(){this.next=this.b=this.a=null}function kt(t){a.setTimeout((function(){throw t}),0)}function Lt(t,e){xt||function(){var t=a.Promise.resolve(void 0);xt=function(){t.then(Mt)}}(),Rt||(xt(),Rt=!0),Ct.add(t,e)}St.prototype.add=function(t,e){var n=Nt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pt.prototype.reset=function(){this.next=this.b=this.a=null};var Rt=!1,Ct=new St;function Mt(){for(var t;t=Dt();){try{t.a.call(t.b)}catch(t){kt(t)}var e=Nt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Rt=!1}function Vt(t,e){It.call(this),this.b=t||1,this.a=e||a,this.f=y(this.Za,this),this.g=b()}function Ut(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function qt(t,e,n){if("function"==typeof t)n&&(t=y(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=y(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Ft(t){t.a=qt((function(){t.a=null,t.c&&(t.c=!1,Ft(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}m(Vt,It),(o=Vt.prototype).aa=!1,o.M=null,o.Za=function(){if(this.aa){var t=b()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Tt(this,"tick"),this.aa&&(Ut(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=b())},o.G=function(){Vt.X.G.call(this),Ut(this),delete this.a};var Bt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ft(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(a.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(w);function zt(t){w.call(this),this.b=t,this.a={}}m(zt,w);var Gt=[];function Wt(t,e,n,r){Array.isArray(n)||(n&&(Gt[0]=n.toString()),n=Gt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Kt(t){P(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gt(t)}),t),t.a={}}function Ht(){this.a=!0}function Yt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return At(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}zt.prototype.G=function(){zt.X.G.call(this),Kt(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ht.prototype.info=function(){};var Qt={},$t=null;function Xt(){return $t=$t||new It}function Jt(t){rt.call(this,Qt.Fa,t)}function Zt(t){var e=Xt();Tt(e,new Jt(e,t))}function te(t,e){rt.call(this,Qt.STAT_EVENT,t),this.stat=e}function ee(t){var e=Xt();Tt(e,new te(e,t))}function ne(t){rt.call(this,Qt.Ga,t)}function re(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}Qt.Fa="serverreachability",m(Jt,rt),Qt.STAT_EVENT="statevent",m(te,rt),Qt.Ga="timingevent",m(ne,rt);var ie={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},oe={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function se(){}function ue(t){var e;return(e=t.a)||(e=t.a={}),e}function ae(){}se.prototype.a=null;var ce,fe={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function he(){rt.call(this,"d")}function le(){rt.call(this,"c")}function pe(){}function de(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new zt(this),this.P=ve,t=B?125:void 0,this.R=new Vt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}m(he,rt),m(le,rt),m(pe,se),ce=new pe;var ve=45e3,ye={},ge={};function be(t,e,n){t.H=1,t.i=qe(Le(e)),t.j=n,t.I=!0,me(t,null)}function me(t,e){t.u=b(),Ee(t),t.l=Le(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ze(n.b,"t",r),t.D=0,t.a=Yn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Bt(y(t.Ca,t,t.a),t.O)),Wt(t.J,t.a,"readystatechange",t.Xa),e=t.B?k(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Zt(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var f=c[0];c=c[1];var h=f.split("_");s=2<=h.length&&"type"==h[1]?s+(f+"=")+c+"&":s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function we(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=_e(t,n);if(i==ge){4==e&&(t.h=4,ee(14),r=!1),Yt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ye){t.h=4,ee(15),Yt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Yt(t.c,t.f,i,null),Ae(t,i)}4==e&&0==n.length&&(t.h=1,ee(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),qn(e),e.F=!0,ee(11))):(Yt(t.c,t.f,n,"[Invalid Chunked Response]"),je(t),Te(t))}function _e(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?ye:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.D=r+n,e))}function Ee(t){t.T=b()+t.P,Oe(t,t.P)}function Oe(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=re(y(t.Va,t),e)}function Ie(t){t.o&&(a.clearTimeout(t.o),t.o=null)}function Te(t){0==t.g.v||t.A||zn(t.g,t)}function je(t){Ie(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ut(t.R),Kt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ae(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||un(n.b,t)))if(n.I=t.N,!t.C&&un(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Bn(n),Dn(n)}Un(n),ee(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=re(y(n.Sa,n),6e3));if(1>=sn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Wn(n,11)}else if((t.C||n.a==t)&&Bn(n),!T(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var f=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var h=a.b;!h.a&&(S(f,"spdy")||S(f,"quic")||S(f,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(an(h,h.b),h.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Ue(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=b()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=Hn(a,a.C?a.ga:null,a.fa),p.C){cn(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Ie(d),Ee(d)),a.a=p}else Vn(a);0<n.g.length&&Ln(n)}else"stop"!=i[0]&&"close"!=i[0]||Wn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wn(n,7):Nn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Zt(4)}catch(t){}}function Se(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)E(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(f(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ne(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];De(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)De(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function De(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=de.prototype).setTimeout=function(t){this.P=t},o.Xa=function(t){t=t.target;var e=this.F;e&&3==jn(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=jn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!B&&!this.a.$())){this.A||4!=e||7==n||Zt(8==n||0>=r?3:2),Ie(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,ee(12),je(this),Te(this);break t}Yt(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ae(this,a)}this.I?(we(this,e,o),B&&this.b&&3==e&&(Wt(this.J,this.R,"tick",this.Wa),this.R.start())):(Yt(this.c,this.f,o,null),Ae(this,o)),4==e&&je(this),this.b&&!this.A&&(4==e?zn(this.g,this):(this.b=!1,Ee(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ee(12)):(this.h=0,ee(13)),je(this),Te(this)}}}catch(t){}},o.Wa=function(){if(this.a){var t=jn(this.a),e=this.a.$();this.D<e.length&&(Ie(this),we(this,t,e),this.b&&4!=t&&Ee(this))}},o.cancel=function(){this.A=!0,je(this)},o.Va=function(){this.o=null;var t=b();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Zt(3),ee(17)),je(this),this.h=2,Te(this)):Oe(this,this.T-t)},(o=xe.prototype).K=function(){Ne(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return Ne(this),this.a.concat()},o.get=function(t,e){return De(this.b,t)?this.b[t]:e},o.set=function(t,e){De(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ke(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ke){this.a=void 0!==e?e:t.a,Re(this,t.f),this.j=t.j,Ce(this,t.c),Me(this,t.h),this.g=t.g,e=t.b;var n=new Qe;n.c=e.c,e.a&&(n.a=new xe(e.a),n.b=e.b),Ve(this,n),this.i=t.i}else t&&(n=String(t).match(Pe))?(this.a=!!e,Re(this,n[1]||"",!0),this.j=Fe(n[2]||""),Ce(this,n[3]||"",!0),Me(this,n[4]),this.g=Fe(n[5]||"",!0),Ve(this,n[6]||"",!0),this.i=Fe(n[7]||"")):(this.a=!!e,this.b=new Qe(null,this.a))}function Le(t){return new ke(t)}function Re(t,e,n){t.f=n?Fe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ce(t,e,n){t.c=n?Fe(e,!0):e}function Me(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ve(t,e,n){e instanceof Qe?(t.b=e,function(t,e){e&&!t.f&&($e(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),Ze(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Be(e,He)),t.b=new Qe(e,t.a))}function Ue(t,e,n){t.b.set(e,n)}function qe(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),t}function Fe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ke.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Be(e,Ge,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Be(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?Ke:We,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Be(n,Ye)),t.join("")};var Ge=/[#\/\?@]/g,We=/[#\?:]/g,Ke=/[#\?]/g,He=/[#\?@]/g,Ye=/#/g;function Qe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $e(t){t.a||(t.a=new xe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){$e(t),e=tn(t,e),De(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,De((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ne(t)))}function Je(t,e){return $e(t),e=tn(t,e),De(t.a.b,e)}function Ze(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),I(n)),t.b+=n.length)}function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(o=Qe.prototype).add=function(t,e){$e(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){$e(this),this.a.forEach((function(n,r){E(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){$e(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){$e(this);var e=[];if("string"==typeof t)Je(this,t)&&(e=O(e,this.a.get(tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=O(e,t[n])}return e},o.set=function(t,e){return $e(this),this.c=null,Je(this,t=tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var en=function(t,e){this.b=t,this.a=e};function nn(t){this.g=t||rn,a.PerformanceNavigationTiming?t=0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(a.ia&&a.ia.ya&&a.ia.ya()&&a.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var rn=10;function on(t){return!!t.b||!!t.a&&t.a.size>=t.f}function sn(t){return t.b?1:t.a?t.a.size:0}function un(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function an(t,e){t.a?t.a.add(e):t.b=e}function cn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function fn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),s=o.next();!s.done;s=o.next()){var u=s.value;r=r.concat(u.s)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return I(t.c)}function hn(){}function ln(){this.a=new hn}function pn(t,e,n){var r=n||"";try{Se(t,(function(t,n){var i=t;h(t)&&(i=At(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function dn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}nn.prototype.cancel=function(){var t,e;if(this.c=fn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hn.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},hn.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var vn=a.JSON.parse;function yn(t){It.call(this),this.headers=new xe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gn,this.D=this.F=!1}m(yn,It);var gn="",bn=/^https?$/i,mn=["POST","PUT"];function wn(t){return"content-type"==t.toLowerCase()}function _n(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,En(t),In(t)}function En(t){t.u||(t.u=!0,Tt(t,"complete"),Tt(t,"error"))}function On(t){if(t.b&&void 0!==u&&(!t.s[1]||4!=jn(t)||2!=t.W()))if(t.l&&4==jn(t))qt(t.za,0,t);else if(Tt(t,"readystatechange"),4==jn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Pe)[1]||null;if(!o&&a.self&&a.self.location){var s=a.self.location.protocol;o=s.substr(0,s.length-1)}i=!bn.test(o?o.toLowerCase():"")}e=i}if(e)Tt(t,"complete"),Tt(t,"success");else{t.h=6;try{var c=2<jn(t)?t.a.statusText:""}catch(n){c=""}t.f=c+" ["+t.W()+"]",En(t)}}finally{In(t)}}}function In(t,e){if(t.a){Tn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||Tt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Tn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function jn(t){return t.a?t.a.readyState:0}function An(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return P(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ue(t,e,n))}function Sn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xn(t){this.pa=0,this.g=[],this.c=new Ht,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Sn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Sn("baseRetryDelayMs",5e3,t),this.Ra=Sn("retryDelaySeedMs",1e4,t),this.Ma=Sn("forwardChannelMaxRetries",2,t),this.ma=Sn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nn(t&&t.concurrentRequestLimit),this.ka=new ln,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Nn(t){if(Pn(t),3==t.v){var e=t.R++,n=Le(t.B);Ue(n,"SID",t.J),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Cn(t,n),(e=new de(t,t.c,e,void 0)).H=2,e.i=qe(Le(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.i.toString(),"")),!n&&a.Image&&((new Image).src=e.i,n=!0),n||(e.a=Yn(e.g,null),e.a.ba(e.i)),e.u=b(),Ee(e)}Kn(t)}function Dn(t){t.a&&(qn(t),t.a.cancel(),t.a=null)}function Pn(t){Dn(t),t.j&&(a.clearTimeout(t.j),t.j=null),Bn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&a.clearTimeout(t.h),t.h=null)}function kn(t,e){t.g.push(new en(t.Oa++,e)),3==t.v&&Ln(t)}function Ln(t){on(t.b)||t.h||(t.h=!0,Lt(t.Ba,t),t.u=0)}function Rn(t,e){var n;n=e?e.f:t.R++;var r=Le(t.B);Ue(r,"SID",t.J),Ue(r,"RID",n),Ue(r,"AID",t.P),Cn(t,r),t.i&&t.l&&An(r,t.i,t.l),n=new de(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Mn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),an(t.b,n),be(n,r,e)}function Cn(t,e){t.f&&Se({},(function(t,n){Ue(e,n,t)}))}function Mn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?y(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,f=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{pn(f,s,"req"+c+"_")}catch(t){r&&r(f)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Vn(t){t.a||t.j||(t.T=1,Lt(t.Aa,t),t.o=0)}function Un(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=re(y(t.Aa,t),Gn(t,t.o)),t.o++,!0)}function qn(t){null!=t.s&&(a.clearTimeout(t.s),t.s=null)}function Fn(t){t.a=new de(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Le(t.la);Ue(e,"RID","rpc"),Ue(e,"SID",t.J),Ue(e,"CI",t.H?"0":"1"),Ue(e,"AID",t.P),Cn(t,e),Ue(e,"TYPE","xmlhttp"),t.i&&t.l&&An(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=qe(Le(e)),n.j=null,n.I=!0,me(n,t)}function Bn(t){null!=t.m&&(a.clearTimeout(t.m),t.m=null)}function zn(t,e){var n=null;if(t.a==e){Bn(t),qn(t),t.a=null;var r=2}else{if(!un(t.b,e))return;n=e.s,cn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=b()-e.u;var i=t.u;Tt(r=Xt(),new ne(r,n,e,i)),Ln(t)}else Vn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(sn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=re(y(t.Ba,t,e),Gn(t,t.u)),t.u++,!0))}(t,e)||2==r&&Un(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}function Gn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Wn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=y(t.Ya,t);n||(n=new ke("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Re(n,"https"),qe(n)),function(t,e){var n=new Ht;if(a.Image){var r=new Image;r.onload=g(dn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=g(dn,n,r,"TestLoadImage: error",!1,e),r.onabort=g(dn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=g(dn,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ee(2);t.v=0,t.f&&t.f.ra(e),Kn(t),Pn(t)}function Kn(t){t.v=0,t.I=-1,t.f&&(0==fn(t.b).length&&0==t.g.length||(t.b.c.length=0,I(t.g),t.g.length=0),t.f.qa())}function Hn(t,e,n){var r=function(t){return t instanceof ke?Le(t):new ke(t,void 0)}(n);if(""!=r.c)e&&Ce(r,e+"."+r.c),Me(r,r.h);else{var i=a.location;r=function(t,e,n,r){var i=new ke(null,void 0);return t&&Re(i,t),e&&Ce(i,e),n&&Me(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&P(t.V,(function(t,e){Ue(r,e,t)})),e=t.A,n=t.na,e&&n&&Ue(r,e,n),Ue(r,"VER",t.ha),Cn(t,r),r}function Yn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yn(t.Na)).F=t.C,e}function Qn(){}function $n(){if(q&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function Xn(t,e){It.call(this),this.a=new xn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!T(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!T(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new tr(this)}function Jn(t){he.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Zn(){le.call(this),this.status=1}function tr(t){this.a=t}(o=yn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ue(this.H):ue(ce),this.a.onreadystatechange=y(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void _n(this,t)}t=n||"";var i=new xe(this.headers);r&&Se(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=wn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=a.FormData&&t instanceof a.FormData,!(0<=_(mn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Tn(this),0<this.o&&((this.D=function(t){return q&&X(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=y(this.xa,this)):this.m=qt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){_n(this,t)}},o.xa=function(){void 0!==u&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Tt(this,"timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Tt(this,"complete"),Tt(this,"abort"),In(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),In(this,!0)),yn.X.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?On(this):this.Ua())},o.Ua=function(){On(this)},o.W=function(){try{return 2<jn(this)?this.a.status:-1}catch(t){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},o.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),vn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(o=xn.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new de(this,this.c,t,void 0),r=this.l;if(this.O&&(r?R(r=k(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Mn(this,n,e),Ue(i=Le(this.B),"RID",t),Ue(i,"CVER",22),this.A&&Ue(i,"X-HTTP-Session-Id",this.A),Cn(this,i),this.i&&r&&An(i,this.i,r),an(this.b,n),this.Ia&&Ue(i,"TYPE","init"),this.da?(Ue(i,"$req",e),Ue(i,"SID","null"),n.U=!0,be(n,i,null)):be(n,i,e),this.v=2}}else 3==this.v&&(t?Rn(this,t):0==this.g.length||on(this.b)||Rn(this))},o.Aa=function(){if(this.j=null,Fn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=re(y(this.Ta,this),t)}},o.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ee(10),Dn(this),Fn(this))},o.Sa=function(){null!=this.m&&(this.m=null,Dn(this),Un(this),ee(19))},o.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ee(2)):(this.c.info("Failed to ping google.com"),ee(1))},(o=Qn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ja=function(){},$n.prototype.a=function(t,e){return new Xn(t,e)},m(Xn,It),Xn.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ee(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Hn(t,null,t.fa),Ln(t)},Xn.prototype.close=function(){Nn(this.a)},Xn.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,kn(this.a,e)}else this.l?((e={}).__data__=At(t),kn(this.a,e)):kn(this.a,t)},Xn.prototype.G=function(){this.a.f=null,delete this.f,Nn(this.a),delete this.a,Xn.X.G.call(this)},m(Jn,he),m(Zn,le),m(tr,Qn),tr.prototype.ta=function(){Tt(this.a,"a")},tr.prototype.sa=function(t){Tt(this.a,new Jn(t))},tr.prototype.ra=function(t){Tt(this.a,new Zn(t))},tr.prototype.qa=function(){Tt(this.a,"b")},$n.prototype.createWebChannel=$n.prototype.a,Xn.prototype.send=Xn.prototype.h,Xn.prototype.open=Xn.prototype.g,Xn.prototype.close=Xn.prototype.close,ie.NO_ERROR=0,ie.TIMEOUT=8,ie.HTTP_ERROR=6,oe.COMPLETE="complete",ae.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",It.prototype.listen=It.prototype.va,yn.prototype.listenOnce=yn.prototype.wa,yn.prototype.getLastError=yn.prototype.Qa,yn.prototype.getLastErrorCode=yn.prototype.ua,yn.prototype.getStatus=yn.prototype.W,yn.prototype.getResponseJson=yn.prototype.Pa,yn.prototype.getResponseText=yn.prototype.$,yn.prototype.send=yn.prototype.ba;var er=function(){return new $n},nr=function(){return Xt()},rr=ie,ir=oe,or=Qt,sr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ur=ae,ar=yn}).call(this,n(97))},,function(t,e,n){"use strict";n.r(e),n.d(e,"connectFirebase",(function(){return ut}));n(261),n(265),n(285),n(286),n(294),n(295),n(297),n(298),n(299);var r=n(303),i=n.n(r),o=n(306),s=n.n(o),u=n(310),a=n.n(u),c=n(39),f=n.n(c),h=n(315),l=n.n(h),p=n(319),d=n.n(p),v=n(324),y=n.n(v),g=n(88),b=n.n(g),m=n(13),w=n.n(m),_=n(87),E=n.n(_),O=n(27),I=n.n(O),T=n(327),j=n.n(T),A=n(222);A.a.registerVersion("firebase","8.1.2","app");n(330);var S=n(210);function x(t){return"function"==typeof t}var N=!1,D={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;N=t},get useDeprecatedSynchronousErrorHandling(){return N}};function P(t){setTimeout((function(){throw t}),0)}var k={closed:!0,next:function(t){},error:function(t){if(D.useDeprecatedSynchronousErrorHandling)throw t;P(t)},complete:function(){}},L=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function R(t){return null!==t&&"object"==typeof t}var C=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),M=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s){n[s].remove(this)}if(x(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(t){e=t instanceof C?V(t.errors):[t]}}if(L(o)){s=-1;for(var u=o.length;++s<u;){var a=o[s];if(R(a))try{a.unsubscribe()}catch(t){e=e||[],t instanceof C?e=e.concat(V(t.errors)):e.push(t)}}}if(e)throw new C(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function V(t){return t.reduce((function(t,e){return t.concat(e instanceof C?e.errors:e)}),[])}var U=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),q=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=k;break;case 1:if(!n){o.destination=k;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new F(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new F(o,n,r,i)}return o}return S.c(e,t),e.prototype[U]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(M),F=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var u=s;return x(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==k&&(x((u=Object.create(n)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=o,s._error=r,s._complete=i,s}return S.c(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;D.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=D.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):P(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;P(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};D.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),D.useDeprecatedSynchronousErrorHandling)throw t;P(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!D.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return D.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(P(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(q);var B=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function z(t){return t}function G(t){return 0===t.length?z:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var W=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof q)return t;if(t[U])return t[U]()}return t||e||n?new q(t,e,n):new q(k)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||D.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),D.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){D.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof q?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=K(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[B]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:G(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=K(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function K(t){if(t||(t=D.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var H=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Y=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return S.c(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(M),Q=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return S.c(e,t),e}(q),$=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return S.c(e,t),e.prototype[U]=function(){return new Q(this)},e.prototype.lift=function(t){var e=new X(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new H;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new H;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new H;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new H;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new H;return this.hasError?(t.error(this.thrownError),M.EMPTY):this.isStopped?(t.complete(),M.EMPTY):(this.observers.push(t),new Y(this,t))},e.prototype.asObservable=function(){var t=new W;return t.source=this,t},e.create=function(t,e){return new X(t,e)},e}(W),X=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return S.c(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):M.EMPTY},e}($),J=new $,Z=function(t){window.csExposed.state=t,J.next(t)},tt=function(t){if("loaded"===t)return window.csExposed.instance},et={apiKey:"AIzaSyB-mHhHpxXrPBX4daEY0mzh3pefCshWydA",authDomain:"xp-customer.firebaseapp.com",databaseURL:"https://xp-customer.firebaseio.com",projectId:"xp-customer",storageBucket:"xp-customer.appspot.com",messagingSenderId:"563755071076",appId:"1:563755071076:web:432f165ba56352a5"};function nt(t,e){var n=b()(t);if(y.a){var r=y()(t);e&&(r=d()(r).call(r,(function(e){return l()(t,e).enumerable}))),n.push.apply(n,r)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)f()(n=nt(Object(r),!0)).call(n,(function(e){j()(t,e,r[e])}));else if(a.a)s()(t,a()(r));else{var o;f()(o=nt(Object(r))).call(o,(function(e){i()(t,e,l()(r,e))}))}}return t}var it,ot=function(){try{A.a.initializeApp(et);var t=A.a.firestore();return t.settings({experimentalAutoDetectLongPolling:!0}),window.csExposed=rt(rt({},window.csExposed),{},{instance:t,created:new Date}),Z("loaded"),t}catch(t){return Z("error"),console.error("An error occurred when instance firebase"),!1}},st=(it=I()(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new E.a((function(t,e){if(window.csExposed)"loading"===window.csExposed.state&&J.asObservable().subscribe((function(e){var n=tt(e);t(n)})),"loaded"===window.csExposed.state&&t(window.csExposed.instance),"error"===window.csExposed.state&&e(!1);else{window.csExposed={state:"loading",instance:{},created:""};var n=ot();n?t(n):e(!1)}})));case 1:case"end":return t.stop()}}),t)}))),function(){return it.apply(this,arguments)}),ut=function(){var t=I()(w.a.mark((function t(){var e;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=st()){t.next=3;break}return t.abrupt("return",!1);case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}])]);