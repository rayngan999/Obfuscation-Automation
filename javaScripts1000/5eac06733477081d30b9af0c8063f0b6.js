(function($,webshop){let categorization={};let buttonClicked=false;$.ajax({method:"GET",url:"https://cookies-data.onetrust.io/bannersdk/domaindata",headers:{'Content-Type':'application/json','lang':'en','domain':webshop.domainId,'location':'cdn-ukwest.onetrust.com',},contentType:'application/json',}).done(function(data){data.culture.DomainData.Groups.forEach(row=>{categorization[row.CustomGroupId]=row.FirstPartyCookies.map(cookie=>cookie.Name,[])})
localStorage.setItem('categorization',JSON.stringify(categorization))});function OptanonWrapper(){if(buttonClicked){const categorization=JSON.parse(localStorage.getItem("categorization"));const activeGroups=OnetrustActiveGroups.split(',').filter(el=>el!=null);const cookiesList=[];activeGroups.forEach(group=>categorization[group]?categorization[group].forEach(cookie=>cookiesList.push(cookie)):null);$.ajax({method:"POST",url:"api/v1/cookies/policy",data:JSON.stringify(cookiesList),contentType:"application/json",}).done(function(data){$.ajax({url:"api/v1/cookies/removeCookies",data:"",method:"POST",contentType:"application/json",})})}}
document.addEventListener('click',(e)=>{const id=e.target&&e.target.id;const className=e.target&&e.target.className;if(id&&(id==='onetrust-accept-btn-handler'||id==='accept-recommended-btn-handler')||(className&&(className.includes('save-preference-btn-handler')||className.includes('ot-pc-refuse-all-handler')))){buttonClicked=true;OptanonWrapper();document.querySelector('.hd-search__submitButton').focus();}})})(jQuery,webshop);