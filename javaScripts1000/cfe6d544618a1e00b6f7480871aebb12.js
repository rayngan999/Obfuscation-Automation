(this["webpackJsonp@zmedia/zmp3-desktop"]=this["webpackJsonp@zmedia/zmp3-desktop"]||[]).push([[6],{1440:function(e,t,r){window,e.exports=function(e){function t(t){for(var r,i,o=t[0],a=t[1],s=0,u=[];s<o.length;s++)i=o[s],n[i]&&u.push(n[i][0]),n[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(l&&l(t);u.length;)u.shift()()}var r={},n={0:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,i){r=n[e]=[t,i]}));t.push(r[2]=o);var a,s=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=function(e){return i.p+""+({}[e]||e)+".bundle.min.js"}(e),a=function(t){l.onerror=l.onload=null,clearTimeout(u);var r=n[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+i+": "+o+")");a.type=i,a.request=o,r[1](a)}n[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,s.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://zjs.zadn.vn/zplayer/releases/v1.0.65/",i.oe=function(e){throw console.error(e),e};var o=window.webpackJsonpzPlayer=window.webpackJsonpzPlayer||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var l=a;return i(i.s=62)}([function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(r=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(a).concat([o]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){var n,i,o={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),s=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),l=null,u=0,c=[],p=r(18);function f(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(A(n.parts[a],t))}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(A(n.parts[a],t));o[n.id]={id:n.id,refs:1,parts:s}}}}function d(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}function h(e,t){var r=s(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),c.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertAt.before,r);r.insertBefore(t,i)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=r.nc;n&&(e.attrs.nonce=n)}return m(t,e.attrs),h(e,t),t}function m(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function A(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=u++;r=l||(l=g(t)),n=_.bind(null,r,a,!1),i=_.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),h(e,t),t}(t),n=function(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=p(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,r,t),i=function(){y(r),r.href&&URL.revokeObjectURL(r.href)}):(r=g(t),n=function(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){y(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=d(e,t);return f(r,t),function(e){for(var n=[],i=0;i<r.length;i++){var a=r[i];(s=o[a.id]).refs--,n.push(s)}for(e&&f(d(e,t),t),i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var v,b=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function _(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t,r){var n;"undefined"!=typeof window&&(n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new a(r,n||e,o),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],p=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,o),!0;case 6:return c.fn.call(c.context,t,r,n,o,a),!0}for(u=1,l=new Array(p-1);u<p;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),p){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(f=1,l=new Array(p-1);f<p;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return l(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||l(this,o);else{for(var s=0,u=[],c=a.length;s<c;s++)(a[s].fn!==t||n&&!a[s].once||r&&a[s].context!==r)&&u.push(a[s]);u.length?this._events[o]=1===u.length?u[0]:u:l(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&l(this,t)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,a,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(u=r.slice()).length,l=0;l<a;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,o,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){var n,i,o,a,s;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=s.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=i.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var c=a.path,p=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=s.normalizePath(p)}else u.path=a.path,o.params||(u.params=a.params,o.query||(u.query=a.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,n){var s={};s[n]=[];var l=t.toString(),u=l.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,p=u[1],f=new RegExp("(\\\\n|\\W)"+a(p)+o,"g");c=f.exec(l);)"dll-reference"!==c[3]&&s[n].push(c[3]);for(f=new RegExp("\\("+a(p)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");c=f.exec(l);)e[c[2]]||(s[n].push(c[1]),e[c[2]]=r(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var d,h=Object.keys(s),y=0;y<h.length;y++)for(var g=0;g<s[h[y]].length;g++)d=s[h[y]][g],isNaN(1*d)||(s[h[y]][g]=1*s[h[y]][g]);return s}function l(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:r.m},o=t.all?{main:Object.keys(i.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};l(r);)for(var o=Object.keys(r),a=0;a<o.length;a++){var u=o[a],c=r[u].pop();if(i[u]=i[u]||{},!i[u][c]&&e[u][c]){i[u][c]=!0,n[u]=n[u]||[],n[u].push(c);for(var p=s(e,e[u][c],u),f=Object.keys(p),d=0;d<f.length;d++)r[f[d]]=r[f[d]]||[],r[f[d]]=r[f[d]].concat(p[f[d]])}}return n}(i,e),a="";Object.keys(o).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;o[e][t];)t++;o[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),a=a+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var u=new window.Blob([a],{type:"text/javascript"});if(t.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),p=new window.Worker(c);return p.objectURL=c,p}},"./src/config.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/controller/abr-controller.js"),i=r("./src/controller/buffer-controller.js"),o=r("./src/controller/cap-level-controller.js"),a=r("./src/controller/fps-controller.js"),s=r("./src/utils/xhr-loader.js"),l=r("./src/controller/audio-track-controller.js"),u=r("./src/controller/audio-stream-controller.js"),c=r("./src/utils/cues.js"),p=r("./src/controller/timeline-controller.js"),f=r("./src/controller/subtitle-track-controller.js"),d=r("./src/controller/subtitle-stream-controller.js"),h=r("./src/controller/eme-controller.js"),y=r("./src/utils/mediakeys-helper.js");t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:y.requestMediaKeySystemAccess},t.hlsDefaultConfig.subtitleStreamController=d.SubtitleStreamController,t.hlsDefaultConfig.subtitleTrackController=f.default,t.hlsDefaultConfig.timelineController=p.default,t.hlsDefaultConfig.cueHandler=c,t.hlsDefaultConfig.enableCEA708Captions=!0,t.hlsDefaultConfig.enableWebVTT=!0,t.hlsDefaultConfig.captionsTextTrack1Label="English",t.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",t.hlsDefaultConfig.captionsTextTrack2Label="Spanish",t.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",t.hlsDefaultConfig.audioStreamController=u.default,t.hlsDefaultConfig.audioTrackController=l.default,t.hlsDefaultConfig.emeController=h.default},"./src/controller/abr-controller.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/buffer-helper.js"),l=r("./src/errors.js"),u=r("./src/utils/logger.js"),c=r("./src/utils/ewma-bandwidth-estimator.js"),p=window.performance,f=function(t){function r(e){var r=t.call(this,e,o.default.FRAG_LOADING,o.default.FRAG_LOADED,o.default.FRAG_BUFFERED,o.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return i(r,t),r.prototype.destroy=function(){this.clearTimer(),a.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=t.level,o=void 0,a=void 0;r.levels[i].details.live?(o=n.abrEwmaFastLive,a=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,a=n.abrEwmaSlowVoD),this._bwEstimator=new c.default(r,a,o,n.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,i=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=n.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var l=p.now()-a.trequest,c=Math.abs(t.playbackRate);if(l>500*r.duration/c){var f=e.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/l),h=f[r.level],y=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,g=a.total?a.total:Math.max(a.loaded,Math.round(r.duration*y/8)),m=t.currentTime,A=(g-a.loaded)/d,v=(s.BufferHelper.bufferInfo(t,m,e.config.maxBufferHole).end-m)/c;if(v<2*r.duration/c&&A>v){var b=void 0,_=void 0;for(_=r.level-1;_>i;_--){var E=f[_].realBitrate?Math.max(f[_].realBitrate,f[_].bitrate):f[_].bitrate;if((b=r.duration*E/(6.4*d))<v)break}b<A&&(u.logger.warn("loading too slow, abort fragment loading and switch to level "+_+":fragLoadedDelay["+_+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+A.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=_,this._bwEstimator.sample(l,a.loaded),n.abort(),this.clearTimer(),e.trigger(o.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:a}))}}}}},r.prototype.onFragLoaded=function(t){var r=t.frag;if("main"===r.type&&e.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,o=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:o},n.realBitrate=Math.round(8*i/o)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},r.prototype.onFragBuffered=function(t){var r=t.stats,n=t.frag;if(!0!==r.aborted&&"main"===n.type&&e.isFinite(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;u.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(e){switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,c=o?o.currentTime:0,p=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(s.BufferHelper.bufferInfo(o,c,n.maxBufferHole).end-c)/p,h=this._findBestLevel(a,l,f,i,t,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(h>=0)return h;u.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var y=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===d){var A=this.bitrateTestDelay;A&&(y=(l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay)-A,u.logger.trace("bitrate test took "+Math.round(1e3*A)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*y)+" ms"),g=m=1)}return h=this._findBestLevel(a,l,f,i,t,d+y,g,m,r),Math.max(h,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(e,t,r,n,i,o,a,s,l){for(var c=i;c>=n;c--){var p=l[c];if(p){var f,d=p.details,h=d?d.totalduration/d.fragments.length:t,y=!!d&&d.live;f=c<=e?a*r:s*r;var g=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,m=g*h/f;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(f)+"/"+g+"/"+h+"/"+o+"/"+m),f>g&&(!m||y&&!this.bitrateTestDelay||m<o))return c}}return-1},r}(a.default);t.default=f}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/binary-search.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/demux/demuxer.js"),l=r("./src/events.js"),u=r("./src/controller/level-helper.js"),c=r("./src/utils/time-ranges.js"),p=r("./src/errors.js"),f=r("./src/utils/logger.js"),d=r("./src/utils/discontinuities.js"),h=r("./src/controller/fragment-tracker.js"),y=r("./src/loader/fragment.js"),g=r("./src/controller/base-stream-controller.js"),m=window.performance,A=function(t){function r(e,r){var n=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_RESET,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=g.State.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return i(r,t),r.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.prototype.onHandlerDestroyed=function(){this.state=g.State.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},r.prototype.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,f.logger.log("InitPTS for cc: "+r+" found from video track: "+n),this.state===g.State.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(f.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=g.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=g.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=g.State.STOPPED},r.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=g.State.STOPPED},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,f.logger.log("audio stream:"+t+"->"+e)}},enumerable:!0,configurable:!0}),r.prototype.doTick=function(){var t,r,n,i=this.hls,s=i.config;switch(this.state){case g.State.ERROR:case g.State.PAUSED:case g.State.BUFFER_FLUSHING:break;case g.State.STARTING:this.state=g.State.WAITING_TRACK,this.loadedmetadata=!1;break;case g.State.IDLE:var u=this.tracks;if(!u)break;if(!this.media&&(this.startFragRequested||!s.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var c=this.mediaBuffer?this.mediaBuffer:this.media,p=this.videoBuffer?this.videoBuffer:this.media,y=a.BufferHelper.bufferInfo(c,t,s.maxBufferHole),A=a.BufferHelper.bufferInfo(p,t,s.maxBufferHole),v=y.len,b=y.end,_=this.fragPrevious,E=Math.min(s.maxBufferLength,s.maxMaxBufferLength),w=Math.max(E,A.len),k=this.audioSwitch,T=this.trackId;if((v<w||k)&&T<u.length){if(void 0===(n=u[T].details)){this.state=g.State.WAITING_TRACK;break}if(!k&&this._streamEnded(y,n))return this.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),void(this.state=g.State.ENDED);var S=n.fragments,z=S.length,P=S[0].start,O=S[z-1].start+S[z-1].duration,L=void 0;if(k)if(n.live&&!n.PTSKnown)f.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),b=0;else if(b=t,n.PTSKnown&&t<P){if(!(y.end>P||y.nextStart))return;f.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=P+.05}if(n.initSegment&&!n.initSegment.data)L=n.initSegment;else if(b<=P){if(L=S[0],null!==this.videoTrackCC&&L.cc!==this.videoTrackCC&&(L=d.findFragWithCC(S,this.videoTrackCC)),n.live&&L.loadIdx&&L.loadIdx===this.fragLoadIdx){var C=y.nextStart?y.nextStart:P;return f.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(C+.05)),void(this.media.currentTime=C+.05)}}else{var R=void 0,D=s.maxFragLookUpTolerance,I=_?S[_.sn-S[0].sn+1]:void 0,M=function(e){var t=Math.min(D,e.duration);return e.start+e.duration-t<=b?1:e.start-t>b&&e.start?-1:0};b<O?(b>O-D&&(D=0),R=I&&!M(I)?I:o.default.search(S,M)):R=S[z-1],R&&(L=R,P=R.start,_&&L.level===_.level&&L.sn===_.sn&&(L.sn<n.endSN?(L=S[L.sn+1-n.startSN],f.logger.log("SN just loaded, load next one: "+L.sn)):L=null))}L&&(L.encrypted?(f.logger.log("Loading key for "+L.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+T),this.state=g.State.KEY_LOADING,i.trigger(l.default.KEY_LOADING,{frag:L})):(f.logger.log("Loading "+L.sn+", cc: "+L.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+T+", currentTime:"+t+",bufferEnd:"+b.toFixed(3)),this.fragCurrent=L,(k||this.fragmentTracker.getState(L)===h.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,e.isFinite(L.sn)&&(this.nextLoadPosition=L.start+L.duration),i.trigger(l.default.FRAG_LOADING,{frag:L}),this.state=g.State.FRAG_LOADING)))}break;case g.State.WAITING_TRACK:(r=this.tracks[this.trackId])&&r.details&&(this.state=g.State.IDLE);break;case g.State.FRAG_LOADING_WAITING_RETRY:var x=m.now(),j=this.retryDate,B=(c=this.media)&&c.seeking;(!j||x>=j||B)&&(f.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=g.State.IDLE);break;case g.State.WAITING_INIT_PTS:var N=this.videoTrackCC;if(void 0===this.initPTS[N])break;var F=this.waitingFragment;if(F){var U=F.frag.cc;N!==U?(r=this.tracks[this.trackId]).details&&r.details.live&&(f.logger.warn("Waiting fragment CC ("+U+") does not match video track CC ("+N+")"),this.waitingFragment=null,this.state=g.State.IDLE):(this.state=g.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=g.State.IDLE;break;case g.State.STOPPED:case g.State.FRAG_LOADING:case g.State.PARSING:case g.State.PARSED:case g.State.ENDED:}},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(f.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onAudioTracksUpdated=function(e){f.logger.log("audio tracks updated"),this.tracks=e.audioTracks},r.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=g.State.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=g.State.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(t){var r=t.details,n=t.id,i=this.tracks[n],o=r.totalduration,a=0;if(f.logger.log("track "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+o),r.live){var s=i.details;s&&r.fragments.length>0?(u.mergeDetails(s,r),a=r.fragments[0].start,r.PTSKnown?f.logger.log("live audio playlist sliding:"+a.toFixed(3)):f.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,f.logger.log("live audio playlist - first load, unknown sliding"))}else r.PTSKnown=!1;if(i.details=r,!this.startFragRequested){if(-1===this.startPosition){var l=r.startTimeOffset;e.isFinite(l)?(f.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===g.State.WAITING_TRACK&&(this.state=g.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===g.State.KEY_LOADING&&(this.state=g.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===g.State.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,o=i.totalduration,a=t.level,u=t.sn,c=t.cc,p=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===u)this.state=g.State.IDLE,d.tparsed=d.tbuffered=m.now(),i.initSegment.data=e.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=g.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new s.default(this.hls,"audio"));var h=this.initPTS[c],y=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==h?(this.pendingBuffering=!0,f.logger.log("Demuxing "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.demuxer.push(e.payload,y,p,null,t,o,!1,h)):(f.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=e,this.state=g.State.WAITING_INIT_PTS)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===g.State.PARSING){var n=e.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(l.default.BUFFER_CODECS,n),f.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,a))}this.tick()}}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===g.State.PARSING){var o=this.trackId,a=this.tracks[o],s=this.hls;e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(y.default.ElementaryStreamTypes.AUDIO),f.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),u.updateFragPTSDTS(a.details,n,t.startPTS,t.endPTS);var c=this.audioSwitch,d=this.media,h=!1;if(c&&d)if(d.readyState){var m=d.currentTime;f.logger.log("switching audio track : currentTime:"+m),m>=t.startPTS&&(f.logger.log("switching audio track : flushing all audio"),this.state=g.State.BUFFER_FLUSHING,s.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,s.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:o}))}else this.audioSwitch=!1,s.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:o});var A=this.pendingData;if(!A)return f.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void s.trigger(l.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&A.push({type:t.type,data:e,parent:"audio",content:"data"})})),!h&&A.length&&(A.forEach((function(e){r.state===g.State.PARSING&&(r.pendingBuffering=!0,r.hls.trigger(l.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===g.State.PARSING&&(this.stats.tparsed=m.now(),this.state=g.State.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==g.State.PARSING&&t!==g.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==g.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=m.now(),r.trigger(l.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;f.logger.log("audio buffered : "+c.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=g.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag;if(!r||"audio"===r.type)switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var i=this.fragLoadError;if(i?i++:i=1,i<=(s=this.config).fragLoadingMaxRetry){this.fragLoadError=i;var o=Math.min(Math.pow(2,i-1)*s.fragLoadingRetryDelay,s.fragLoadingMaxRetryTimeout);f.logger.warn("AudioStreamController: frag loading failed, retry in "+o+" ms"),this.retryDate=m.now()+o,this.state=g.State.FRAG_LOADING_WAITING_RETRY}else f.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=g.State.ERROR}break;case p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==g.State.ERROR&&(this.state=t.fatal?g.State.ERROR:g.State.IDLE,f.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===g.State.PARSING||this.state===g.State.PARSED)){var s,u=this.mediaBuffer,c=this.media.currentTime;u&&a.BufferHelper.isBuffered(u,c)&&a.BufferHelper.isBuffered(u,c+.5)?((s=this.config).maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,f.logger.warn("AudioStreamController: reduce max buffer length to "+s.maxMaxBufferLength+"s")),this.state=g.State.IDLE):(f.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=g.State.BUFFER_FLUSHING,this.hls.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}))}}},r.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(f.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(l.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=g.State.PARSED):(this.state=g.State.IDLE,this.fragPrevious=null,this.tick())},r}(g.default);t.default=A}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/task-loop.js"),s=r("./src/utils/logger.js"),l=r("./src/errors.js"),u=function(e){function t(t){var r=e.call(this,t,o.default.MANIFEST_LOADING,o.default.MANIFEST_PARSED,o.default.AUDIO_TRACK_LOADED,o.default.AUDIO_TRACK_SWITCHED,o.default.LEVEL_LOADED,o.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return i(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(o.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)s.logger.warn("Invalid audio track id:",e.id);else{if(s.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===l.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(s.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)s.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)s.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];s.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,i=t.id;this.hls.trigger(o.default.AUDIO_TRACK_SWITCHING,{id:i,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var i=t.filter((function(e){return e.default}));i.length?t=i:s.logger.warn("No default audio tracks defined")}var a=!1,u=function(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),a=!0)}))};u(),a||(n=null,u()),a||(s.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;s.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(o.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,s.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;s.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var o=e,a=0;a<this.tracks.length;a++)if(!this.trackIdBlacklist[a]&&this.tracks[a].name===r){o=a;break}o!==e?(s.logger.log("Attempting audio-track fallback id:",o,"group-id:",this.tracks[o].groupId),this._setAudioTrack(o)):s.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},t}(a.default);t.default=u},"./src/controller/base-stream-controller.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/task-loop.js"),a=r("./src/controller/fragment-tracker.js"),s=r("./src/utils/buffer-helper.js"),l=r("./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var u=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return i(n,r),n.prototype.doTick=function(){},n.prototype._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var i=n.getState(r);return i===a.FragmentState.PARTIAL||i===a.FragmentState.OK}return!1},n.prototype.onMediaSeeking=function(){var r=this.config,n=this.media,i=this.mediaBuffer,o=this.state,a=n?n.currentTime:null,u=s.BufferHelper.bufferInfo(i||n,a,this.config.maxBufferHole);if(e.isFinite(a)&&l.logger.log("media seeking to "+a.toFixed(3)),o===t.State.FRAG_LOADING){var c=this.fragCurrent;if(0===u.len&&c){var p=r.maxFragLookUpTolerance,f=c.start-p,d=c.start+c.duration+p;a<f||a>d?(c.loader&&(l.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),c.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):l.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else o===t.State.ENDED&&(0===u.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);n&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},n.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n}(o.default);t.default=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),l=r("./src/errors.js"),u=r("./src/utils/mediasource-helper.js").getMediaSource(),c=function(t){function r(e){var r=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_RESET,o.default.BUFFER_APPENDING,o.default.BUFFER_CODECS,o.default.BUFFER_EOS,o.default.BUFFER_FLUSHING,o.default.LEVEL_PTS_UPDATED,o.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r.bufferCodecEventsExpected=0,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return i(r,t),r.prototype.destroy=function(){a.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var i=n.updating;try{n.abort()}catch(e){s.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(s.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,s.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new u;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.prototype.onMediaDetaching=function(){s.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){s.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):s.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){s.logger.log("media source opened"),this.hls.trigger(o.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){s.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){s.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;s.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),n={},i=this.sourceBuffer;for(var a in i)n[a]=i[a].buffered;this.hls.trigger(o.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},r.prototype.onSBUpdateError=function(e){s.logger.error("sourceBuffer error:",e),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]}));var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var i=e[n],a=i.levelCodec||i.codec,u=i.container+";codecs="+a;s.logger.log("creating sourceBuffer("+u+")");try{var c=t[n]=r.addSourceBuffer(u);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[n]={codec:a,container:i.container},i.buffer=c}catch(e){s.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:u})}}this.hls.trigger(o.default.BUFFER_CREATED,{tracks:e})},r.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.prototype.onBufferAppendFail=function(e){s.logger.error("sourceBuffer error:",e.event),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,s.logger.log(n+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}s.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){s.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),o=n.length-1;o>=0;o--){var a=n[o],s=r[a].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(a,r[a],0,i)}}},r.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var t,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===r.liveDurationInfinity?(s.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(s.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){s.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(o.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var e=this.hls,t=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(this.media.error)return this.segments=[],void s.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(t&&t.length){var n=t.shift();try{var i=r[n.type];i?i.updating?t.unshift(n):(i.ended=!1,this.parent=n.parent,i.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(r){s.logger.error("error while trying to append buffer:"+r.message),t.unshift(n);var a={type:l.ErrorTypes.MEDIA_ERROR,parent:n.parent};22!==r.code?(this.appendError?this.appendError++:this.appendError=1,a.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(s.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0,e.trigger(o.default.ERROR,a)):(a.fatal=!1,e.trigger(o.default.ERROR,a))):(this.segments=[],a.details=l.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,e.trigger(o.default.ERROR,a))}}}},r.prototype.flushBuffer=function(e,t,r){var n,i=this.sourceBuffer;if(Object.keys(i).length){if(s.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var o in i)if(!r||o===r){if((n=i[o]).ended=!1,n.updating)return s.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(o,n,e,t))return this.flushBufferCounter++,!1}}else s.logger.warn("abort flushing too many retries");s.logger.log("buffer flushed")}return!0},r.prototype.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),a=t.buffered.end(i),l=Math.max(o,r),u=Math.min(a,n);if(Math.min(u,a)-l>.5)return s.logger.log("sb remove "+e+" ["+l+","+u+"], of ["+o+","+a+"], pos:"+this.media.currentTime),t.remove(l,u),!0}}catch(e){s.logger.warn("removeBufferRange failed",e)}return!1},r}(a.default);t.default=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=function(t){function r(r){var n=t.call(this,r,o.default.FPS_DROP_LEVEL_CAPPING,o.default.MEDIA_ATTACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_CODECS,o.default.MEDIA_DETACHING)||this;return n.autoLevelCapping=e.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return i(r,t),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(e){this.levels=e.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,i){return r.isLevelAllowed(i,t.restrictedLevels)&&i<=e}));return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n,i,o=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=r)&&(n=s,!(i=e[a+1])||n.width!==i.width||n.height!==i.height)){o=a;break}}return o},r}(r("./src/event-handler.js").default);t.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/event-handler.js"),a=r("./src/events.js"),s=r("./src/errors.js"),l=r("./src/utils/logger.js"),u=window.XMLHttpRequest,c="com.widevine.alpha",p=function(e){function t(t){var r=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=t.config.widevineLicenseUrl,r._licenseXhrSetup=t.config.licenseXhrSetup,r._emeEnabled=t.config.emeEnabled,r._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return i(t,e),t.prototype.getLicenseServerUrl=function(e){var t;switch(e){case c:t=this._widevineLicenseUrl;break;default:t=null}return t||(l.logger.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,r){var n=this,i=function(e,t,r){switch(e){case c:return function(e,t,r){var n={videoCapabilities:[]};return t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})})),[n]}(0,r);default:throw Error("Unknown key-system: "+e)}}(e,0,r);i?(l.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then((function(t){n._onMediaKeySystemAccessObtained(e,t)})).catch((function(t){l.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))):l.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e)},Object.defineProperty(t.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),t.prototype._onMediaKeySystemAccessObtained=function(e,t){var r=this;l.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n),t.createMediaKeys().then((function(t){n.mediaKeys=t,l.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()})).catch((function(e){l.logger.error("Failed to create media-keys:",e)}))},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},t.prototype._onNewMediaKeySession=function(e){var t=this;l.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},t.prototype._onKeySessionMessage=function(e,t){l.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){l.logger.log("Received license data, updating key-session"),e.update(t)}))},t.prototype._onMediaEncrypted=function(e,t){l.logger.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});l.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return l.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)l.logger.warn("Key-Session already initialized but requested again");else{var r=t.mediaKeysSession;r||(l.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var n=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;l.logger.log('Generating key-session request for "'+n+'" init data type'),t.mediaKeysSessionInitialized=!0,r.generateRequest(n,i).then((function(){l.logger.debug("Key-session generation succeeded")})).catch((function(t){l.logger.error("Error generating key-session request:",t),e.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},t.prototype._createLicenseXhr=function(e,t,r){var n=new u,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(t){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(e){return l.logger.error("Error setting up key-system license XHR",e),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},t.prototype._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,l.logger.log("License request succeeded"),n(e.response);else{if(l.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return l.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(r,n)}this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var r;return"com.microsoft.playready"===e.mediaKeySystemDomain?l.logger.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===c?r=t:l.logger.error("Unsupported key-system:",e.mediaKeySystemDomain),r},t.prototype._requestLicense=function(e,t){l.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return l.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);l.logger.log("Sending license request to URL: "+n),i.send(this._generateLicenseRequestChallenge(r,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",(function(e){t._onMediaEncrypted(e.initDataType,e.initData)}))}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(c,t,r)}},t}(o.default);t.default=p},"./src/controller/fps-controller.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),l=window.performance,u=function(e){function t(t){return e.call(this,t,o.default.MEDIA_ATTACHING)||this}return i(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,r){var n=l.now();if(t){if(this.lastTime){var i=n-this.lastTime,a=r-this.lastDroppedFrames,u=t-this.lastDecodedFrames,c=1e3*a/i,p=this.hls;if(p.trigger(o.default.FPS_DROP,{currentDropped:a,currentDecoded:u,totalDroppedFrames:r}),c>0&&a>p.config.fpsDroppedMonitoringThreshold*u){var f=p.currentLevel;s.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===p.autoLevelCapping||p.autoLevelCapping>=f)&&(f-=1,p.trigger(o.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:p.currentLevel}),p.autoLevelCapping=f,p.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(a.default);t.default=u},"./src/controller/fragment-finders.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/binary-search.js");function i(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function o(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-n>e}t.findFragmentByPDT=function(t,r,n){if(!Array.isArray(t)||!t.length||!e.isFinite(r))return null;if(r<t[0].programDateTime)return null;if(r>=t[t.length-1].endProgramDateTime)return null;n=n||0;for(var i=0;i<t.length;++i){var a=t[i];if(o(r,n,a))return a}return null},t.findFragmentByPTS=function(e,t,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a=e?t[e.sn-t[0].sn+1]:null;return a&&!i(r,o,a)?a:n.default.search(t,i.bind(null,r,o))},t.fragmentWithinToleranceTest=i,t.pdtWithinToleranceTest=o}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/event-handler.js"),a=r("./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var s=function(r){function n(e){var t=r.call(this,e,a.default.BUFFER_APPENDED,a.default.FRAG_BUFFERED,a.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return i(n,r),n.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,o.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},n.prototype.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter((function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS}));if(0===n.length)return null;var i=n.pop();return r[i].body},n.prototype.detectEvictedFragments=function(e,t){var r,n,i=this;Object.keys(this.fragments).forEach((function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){r=s.time;for(var l=0;l<r.length;l++)if(n=r[l],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(a.body);break}}}}))},n.prototype.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},n.prototype.getBufferedTimes=function(e,t,r){for(var n,i,o=[],a=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){o.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)o.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),a=!0;else if(t<=n)break}return{time:o,partial:a}},n.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},n.prototype.getPartialFragment=function(e){var t,r,n,i=this,o=null,a=0;return Object.keys(this.fragments).forEach((function(s){var l=i.fragments[s];i.isPartial(l)&&(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),a<=t&&(o=l.body,a=t)))})),o},n.prototype.getState=function(e){var r=this.getFragmentKey(e),n=this.fragments[r],i=t.FragmentState.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},n.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},n.prototype.isTimeBuffered=function(e,t,r){for(var n,i,o=0;o<r.length;o++){if(n=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},n.prototype.onFragLoaded=function(t){var r=t.frag;e.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},n.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},n.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},n.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},n.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},n.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},n}(o.default);t.FragmentTracker=s}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/buffer-helper.js"),i=r("./src/errors.js"),o=r("./src/events.js"),a=r("./src/utils/logger.js"),s=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.stallReported=!1}return e.prototype.poll=function(e,t){var r=this.config,i=this.media,o=i.currentTime,s=window.performance.now();if(o!==e)return this.stallReported&&(a.logger.warn("playback not stuck anymore @"+o+", after "+Math.round(s-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&n.BufferHelper.isBuffered(i,o))){var l=s-this.stalled,u=n.BufferHelper.bufferInfo(i,o,r.maxBufferHole);this.stalled?(l>=1e3&&this._reportStall(u.len),this._tryFixBufferStall(u,l)):this.stalled=s}},e.prototype._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,i=this.media.currentTime,o=n.getPartialFragment(i);o&&this._trySkipBufferHole(o),e.len>.5&&t>1e3*r.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,r=this.media,n=r.currentTime,s=0,l=0;l<r.buffered.length;l++){var u=r.buffered.start(l);if(n>=s&&n<u)return r.currentTime=Math.max(u,r.currentTime+.1),a.logger.warn("skipping hole, adjusting currentTime from "+n+" to "+r.currentTime),this.stalled=null,void t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+r.currentTime,frag:e});s=r.buffered.end(l)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var l=n+s*e.nudgeOffset;a.logger.log("adjust currentTime from "+n+" to "+l),r.currentTime=l,t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("still stuck in high buffer @"+n+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=s},"./src/controller/id3-track-controller.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/demux/id3.js"),l=r("./src/utils/texttrack-utils.js"),u=function(e){function t(t){var r=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return i(t,e),t.prototype.destroy=function(){a.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){l.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return l.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var o=s.default.getID3Frames(r[i].data);if(o){var a=r[i].pts,l=i<r.length-1?r[i+1].pts:t.endPTS;a===l&&(l+=1e-4);for(var u=0;u<o.length;u++){var c=o[u];if(!s.default.isTimeStampFrame(c)){var p=new n(a,l,"");p.value=c,this.id3Track.addCue(p)}}}}},t}(a.default);t.default=u},"./src/controller/level-controller.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=r("./src/events.js"),s=r("./src/event-handler.js"),l=r("./src/utils/logger.js"),u=r("./src/errors.js"),c=r("./src/utils/codecs.js"),p=r("./src/controller/level-helper.js"),f=window.performance,d=function(e){function t(t){var r=e.call(this,t,a.default.MANIFEST_LOADED,a.default.LEVEL_LOADED,a.default.AUDIO_TRACK_SWITCHED,a.default.FRAG_LOADED,a.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,o=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}return i(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,r=[],n=[],i={},s=null,f=!1,d=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,f=f||!!e.videoCodec,d=d||!!e.audioCodec,o&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(s=i[e.bitrate])?s.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(d=!0,p.addGroupId(s||e,"audio",t.AUDIO)),t.SUBTITLES&&p.addGroupId(s||e,"text",t.SUBTITLES))})),f&&d&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||c.isCodecSupportedInMp4(t,"audio"))&&(!r||c.isCodecSupportedInMp4(r,"video"))})),e.audioTracks&&(n=e.audioTracks.filter((function(e){return!e.audioCodec||c.isCodecSupportedInMp4(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var h=0;h<r.length;h++)if(r[h].bitrate===t){this._firstLevel=h,l.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(a.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:d,video:f,altAudio:n.some((function(e){return!!e.url}))})}else this.hls.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){l.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(a.default.LEVEL_SWITCHING,n)}var i=t[e],o=i.details;if(!o||o.live){var s=i.urlId;r.trigger(a.default.LEVEL_LOADING,{url:i.url[s],level:e,id:s})}}else r.trigger(a.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)e.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)}},t.prototype.recoverLevel=function(e,t,r,n){var i,o,a,s=this,u=this.hls.config,c=e.details,p=this._levels[t];if(p.loadError++,p.fragmentError=n,r){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return l.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),o),e.levelRetry=!0,this.levelRetryCount++,l.logger.warn("level controller, "+c+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((i=p.url.length)>1&&p.loadError<i?(p.urlId=(p.urlId+1)%i,p.details=void 0,l.logger.warn("level controller, "+c+" for level "+t+": switching to redundant URL-id "+p.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,l.logger.warn("level controller, "+c+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):n&&(l.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level;if(r===this.currentLevelIndex){var n=this._levels[r];n.fragmentError||(n.loadError=0,this.levelRetryCount=0);var i=e.details;if(i.live){var o=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),a=o,s=n.details;s&&i.endSN===s.endSN&&(a/=2,l.logger.log("same live playlist, reload twice faster")),a-=f.now()-e.stats.trequest,a=Math.max(o/2,Math.round(a)),l.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){var n=r.audioGroupIds.findIndex((function(e){return e===t}));n!==r.urlId&&(r.urlId=n,this.startLoad())}},t.prototype.loadLevel=function(){if(l.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];l.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(a.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(s.default);t.default=d},"./src/controller/level-helper.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js");function i(t,r,i){var o=t[r],a=t[i],s=a.startPTS;e.isFinite(s)?i>r?(o.duration=s-o.start,o.duration<0&&n.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):(a.duration=o.start-s,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=i>r?o.start+o.duration:Math.max(o.start-a.duration,0)}function o(t,r,n,o,a,s){var l=n;if(e.isFinite(r.startPTS)){var u=Math.abs(r.startPTS-n);e.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(u,r.deltaPTS):r.deltaPTS=u,l=Math.max(n,r.startPTS),n=Math.min(n,r.startPTS),o=Math.max(o,r.endPTS),a=Math.min(a,r.startDTS),s=Math.max(s,r.endDTS)}var c=n-r.start;r.start=r.startPTS=n,r.maxStartPTS=l,r.endPTS=o,r.startDTS=a,r.endDTS=s,r.duration=o-n;var p,f,d,h=r.sn;if(!t||h<t.startSN||h>t.endSN)return 0;for(p=h-t.startSN,(f=t.fragments)[p]=r,d=p;d>0;d--)i(f,d,d-1);for(d=p;d<f.length-1;d++)i(f,d,d+1);return t.PTSKnown=!0,c}t.addGroupId=function(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}},t.updatePTS=i,t.updateFragPTSDTS=o,t.mergeDetails=function(t,r){var i,a=Math.max(t.startSN,r.startSN)-r.startSN,s=Math.min(t.endSN,r.endSN)-r.startSN,l=r.startSN-t.startSN,u=t.fragments,c=r.fragments,p=0;if(r.initSegment&&t.initSegment&&(r.initSegment=t.initSegment),s<a)r.PTSKnown=!1;else{for(var f=a;f<=s;f++){var d=u[l+f],h=c[f];h&&d&&(p=d.cc-h.cc,e.isFinite(d.startPTS)&&(h.start=h.startPTS=d.startPTS,h.endPTS=d.endPTS,h.duration=d.duration,h.backtracked=d.backtracked,h.dropped=d.dropped,i=h))}if(p)for(n.logger.log("discontinuity sliding from playlist, take drift into account"),f=0;f<c.length;f++)c[f].cc+=p;if(i)o(r,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(l>=0&&l<u.length){var y=u[l].start;for(f=0;f<c.length;f++)c[f].start+=y}r.PTSKnown=t.PTSKnown}}}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/utils/binary-search.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/demux/demuxer.js"),l=r("./src/events.js"),u=r("./src/controller/fragment-tracker.js"),c=r("./src/loader/fragment.js"),p=r("./src/loader/playlist-loader.js"),f=r("./src/controller/level-helper.js"),d=r("./src/utils/time-ranges.js"),h=r("./src/errors.js"),y=r("./src/utils/logger.js"),g=r("./src/utils/discontinuities.js"),m=r("./src/controller/fragment-finders.js"),A=r("./src/controller/gap-controller.js"),v=r("./src/controller/base-stream-controller.js"),b=function(t){function r(e,r){var n=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=v.State.STOPPED,n.stallReported=!1,n.gapController=null,n}return i(r,t),r.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.prototype.onHandlerDestroyed=function(){this.state=v.State.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},r.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(y.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=v.State.STOPPED},r.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=v.State.STOPPED,this.forceStartLoad=!1},r.prototype.doTick=function(){switch(this.state){case v.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case v.State.IDLE:this._doTickIdle();break;case v.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=v.State.IDLE);break;case v.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(y.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v.State.IDLE);break;case v.State.ERROR:case v.State.STOPPED:case v.State.FRAG_LOADING:case v.State.PARSING:case v.State.PARSED:case v.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var s,u=o.bitrate;s=u?Math.max(8*t.maxBufferSize/u,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var c=a.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),p=c.len;if(!(p>=s)){y.logger.trace("buffer length of "+p.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=o.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=v.State.WAITING_LEVEL;else{if(this._streamEnded(c,f)){var d={};return this.altAudio&&(d.type="video"),this.hls.trigger(l.default.BUFFER_EOS,d),void(this.state=v.State.ENDED)}this._fetchPayloadOrEos(n,c,f)}}}}},r.prototype._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=this.level,o=r.fragments,a=o.length;if(0!==a){var s,l=o[0].start,u=o[a-1].start+o[a-1].duration,c=t.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var p=this.config.initialLiveManifestSize;if(a<p)return void y.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+p);if(null===(s=this._ensureFragmentAtLivePoint(r,c,l,u,n,o,a)))return}else c<l&&(s=o[0]);s||(s=this._findFragment(l,n,a,o,c,u,r)),s&&(s.encrypted?(y.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(s)):(y.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(s)))}},r.prototype._ensureFragmentAtLivePoint=function(e,t,r,n,i,a,s){var l,u=this.hls.config,c=this.media,p=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-u.maxFragLookUpTolerance,n-p)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);y.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,c&&c.readyState&&c.duration>f&&(c.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>n&&c&&c.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.hasProgramDateTime)y.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),l=m.findFragmentByPDT(a,i.endProgramDateTime,u.maxFragLookUpTolerance);else{var d=i.sn+1;if(d>=e.startSN&&d<=e.endSN){var h=a[d-e.startSN];i.cc===h.cc&&(l=h,y.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=o.default.search(a,(function(e){return i.cc-e.cc})))&&y.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=a[Math.min(s-1,Math.round(s/2))],y.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},r.prototype._findFragment=function(e,t,r,n,i,o,a){var s,l=this.hls.config;if(i<o){var u=i>o-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=m.findFragmentByPTS(t,n,i,u)}else s=n[r-1];if(s){var c=s.sn-a.startSN,p=t&&s.level===t.level,f=n[c-1],d=n[c+1];if(t&&s.sn===t.sn)if(p&&!s.backtracked)if(s.sn<a.endSN){var h=t.deltaPTS;h&&h>l.maxBufferHole&&t.dropped&&c?(s=f,y.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=d,y.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(d&&d.backtracked?(y.logger.warn("Already backtracked from fragment "+d.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+d.sn),s=d):(y.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f).backtracked=!0:c&&(s=null)))}return s},r.prototype._loadKey=function(e){this.state=v.State.KEY_LOADING,this.hls.trigger(l.default.KEY_LOADING,{frag:e})},r.prototype._loadFragment=function(t){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===u.FragmentState.NOT_LOADED||r===u.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(l.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new s.default(this.hls,"main")),this.state=v.State.FRAG_LOADING):r===u.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,y.logger.log("main stream:"+t+"->"+e),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),r.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,p.default.LevelType.MAIN)},Object.defineProperty(r.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),r.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(r.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),r.prototype._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),a.BufferHelper.isBuffered(r,t)?e=this.getBufferedFrag(t):a.BufferHelper.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.prototype.immediateLevelSwitch=function(){if(y.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,r=void 0;t?(r=t.paused,t.pause()):r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,a.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var r,n=void 0,i=void 0;if((r=this.getBufferedFrag(t.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)n=0;else{var o=this.hls.nextLoadLevel,a=this.levels[o],s=this.fragLastKbps;n=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+n))&&(i=this.followingBufferedFrag(i))){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(e,t){this.state=v.State.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,r)},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new A.default(r,t,this.fragmentTracker,this.hls)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(y.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeked=function(){var t=this.media,r=t?t.currentTime:void 0;e.isFinite(r)&&y.logger.log("media seeked to "+r.toFixed(3)),this.tick()},r.prototype.onManifestLoading=function(){y.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&y.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.prototype.onLevelLoaded=function(t){var r=t.details,n=t.level,i=this.levels[this.levelLastLoaded],o=this.levels[n],a=r.totalduration,s=0;if(y.logger.log("level "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+a),r.live){var u=o.details;u&&r.fragments.length>0?(f.mergeDetails(u,r),s=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,u),r.PTSKnown&&e.isFinite(s)?y.logger.log("live playlist sliding:"+s.toFixed(3)):(y.logger.log("live playlist - outdated PTS, unknown sliding"),g.alignStream(this.fragPrevious,i,r))):(y.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,g.alignStream(this.fragPrevious,i,r))}else r.PTSKnown=!1;if(o.details=r,this.levelLastLoaded=n,this.hls.trigger(l.default.LEVEL_UPDATED,{details:r,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=r.startTimeOffset;e.isFinite(c)?(c<0&&(y.logger.log("negative start time offset "+c+", count from end of last fragment"),c=s+a+c),y.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):r.live?(this.startPosition=this.computeLivePosition(s,r),y.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===v.State.WAITING_LEVEL&&(this.state=v.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===v.State.KEY_LOADING&&(this.state=v.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,i=this.media,o=e.frag;if(this.state===v.State.FRAG_LOADING&&t&&"main"===o.type&&o.level===t.level&&o.sn===t.sn){var a=e.stats,u=n[t.level],c=u.details;if(this.bitrateTest=!1,this.stats=a,y.logger.log("Loaded "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level),o.bitrateTest&&r.nextLoadLevel)this.state=v.State.IDLE,this.startFragRequested=!1,a.tparsed=a.tbuffered=window.performance.now(),r.trigger(l.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else if("initSegment"===o.sn)this.state=v.State.IDLE,a.tparsed=a.tbuffered=window.performance.now(),c.initSegment.data=e.payload,r.trigger(l.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else{y.logger.log("Parsing "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level+", cc "+t.cc),this.state=v.State.PARSING,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o}));var p=!(i&&i.seeking)&&(c.PTSKnown||!c.live),f=c.initSegment?c.initSegment.data:[],d=this._getAudioCodec(u);(this.demuxer=this.demuxer||new s.default(this.hls,"main")).push(e.payload,f,d,u.videoCodec,t,c.totalduration,p)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.State.PARSING){var n=e.tracks,i=void 0,o=void 0;if(n.audio&&this.altAudio&&delete n.audio,o=n.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(y.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",y.logger.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}for(i in(o=n.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(l.default.BUFFER_CODECS,n),n){o=n[i],y.logger.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var u=o.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:i,data:u,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===v.State.PARSING){var o=this.levels[this.level],a=n;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&a.addElementaryStream(c.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(c.default.ElementaryStreamTypes.VIDEO),y.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)y.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var s=o.details;if(!s||a.sn!==s.startSN)return y.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=v.State.IDLE,this.fragPrevious=a,void this.tick();y.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var u=f.updateFragPTSDTS(o.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),p=this.hls;p.trigger(l.default.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:u,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(e){e&&e.length&&r.state===v.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,p.trigger(l.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))})),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===v.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=v.State.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var r=!!t.url,n=t.id;if(!r){if(this.mediaBuffer!==this.media){y.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(y.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.State.IDLE}var o=this.hls;o.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),o.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(y.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.prototype.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var o in n){var a=n[o];"main"===a.id?(r=o,t=a,"video"===o&&(this.videoBuffer=n[o].buffer)):i=!0}i&&t?(y.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==v.State.PARSING&&t!==v.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==v.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;y.logger.log("main buffered : "+d.default.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=v.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag||this.fragCurrent;if(!r||"main"===r.type){var n=!!this.media&&a.BufferHelper.isBuffered(this.media,this.media.currentTime)&&a.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);y.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=v.State.FRAG_LOADING_WAITING_RETRY}else y.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=v.State.ERROR;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==v.State.ERROR&&(t.fatal?(this.state=v.State.ERROR,y.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==v.State.WAITING_LEVEL||(this.state=v.State.IDLE));break;case h.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==v.State.PARSING&&this.state!==v.State.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v.State.IDLE):(y.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,y.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=v.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(c.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=v.State.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},r.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&(y.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},r.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(y.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(r.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),r}(v.default);t.default=b}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/utils/logger.js"),s=r("./src/crypt/decrypter.js"),l=r("./src/task-loop.js"),u=r("./src/utils/buffer-helper.js"),c=r("./src/controller/fragment-finders.js"),p=r("./src/controller/fragment-tracker.js"),f=window.performance;t.SubtitleStreamControllerState={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"};var d=t.SubtitleStreamControllerState,h=function(e){function t(t,r){var n=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.ERROR,o.default.KEY_LOADED,o.default.FRAG_LOADED,o.default.SUBTITLE_TRACKS_UPDATED,o.default.SUBTITLE_TRACK_SWITCH,o.default.SUBTITLE_TRACK_LOADED,o.default.SUBTITLE_FRAG_PROCESSED)||this;return n.fragmentTracker=r,n.config=t.config,n.state=d.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new s.default(t,t.config),n}return i(t,e),t.prototype.onHandlerDestroyed=function(){this.fragmentTracker=null,this.state=d.STOPPED,e.prototype.onHandlerDestroyed.call(this)},t.prototype.onSubtitleFragProcessed=function(e){if(this.state=d.IDLE,e.success){var t=this.tracksBuffered[this.currentTrackId],r=e.frag;if(this.fragPrevious=r,t){for(var n,i=0;i<t.length;i++)if(r.start>=t[i].start&&r.start<=t[i].end){n=t[i];break}n?n.end=r.start+r.duration:t.push({start:r.start,end:r.start+r.duration})}}},t.prototype.onMediaAttached=function(e){this.media=e.media,this.state=d.IDLE},t.prototype.onMediaDetaching=function(){this.media=null,this.state=d.STOPPED},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=d.IDLE)},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;a.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},t.prototype.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details;this.tracks?(this.tracks[t]&&(a.logger.log("Updating subtitle track details"),this.tracks[t].details=r),this.setInterval(500)):a.logger.warn("Can not update subtitle details, no tracks found")},t.prototype.onKeyLoaded=function(){this.state===d.KEY_LOADING&&(this.state=d.IDLE)},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,i=this.hls;if(this.state===d.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=f.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=f.now();i.trigger(o.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},t.prototype.doTick=function(){if(this.media)switch(this.state){case d.IDLE:var e=this.tracks,t=this.currentTrackId;if(!e||!e[t]||!e[t].details)break;var r=e[t].details,n=this.config,i=n.maxBufferHole,s=Math.min(n.maxBufferLength,n.maxMaxBufferLength),l=n.maxFragLookUpTolerance,f=u.BufferHelper.bufferedInfo(this._getBuffered(),this.media.currentTime,i),h=f.end,y=f.len,g=r.fragments,m=g.length,A=g[m-1].start+g[m-1].duration,v=void 0;y<s&&h<A?v=c.findFragmentByPTS(this.fragPrevious,g,h,l):r.hasProgramDateTime&&this.fragPrevious&&(v=c.findFragmentByPDT(g,this.fragPrevious.endProgramDateTime,l)),v&&v.encrypted?(a.logger.log("Loading key for "+v.sn),this.state=d.KEY_LOADING,this.hls.trigger(o.default.KEY_LOADING,{frag:v})):v&&this.fragmentTracker.getState(v)===p.FragmentState.NOT_LOADED&&(v.trackId=t,this.fragCurrent=v,this.state=d.FRAG_LOADING,this.hls.trigger(o.default.FRAG_LOADING,{frag:v}))}else this.state=d.IDLE},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},t}(l.default);t.SubtitleStreamController=h},"./src/controller/subtitle-track-controller.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js");function l(e){for(var t=[],r=0;r<e.length;r++)"subtitles"===e[r].kind&&t.push(e[r]);return t}var u=function(e){function t(t){var r=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.subtitleDisplay=!0,r}return i(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=l(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},t.prototype.destroy=function(){a.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(o.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var r=t.details;r&&!r.live||(s.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(s.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval((function(){t.onTick()}),1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&this._stopTimer())},Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this.setSubtitleTrackInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;if(!("number"!=typeof e||e<-1||e>=r.length)&&(this._stopTimer(),this.trackId=e,s.logger.log("switching to subtitle track "+e),t.trigger(o.default.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e)){var n=r[e],i=n.details;i&&!i.live||(s.logger.log("(re)loading playlist for subtitle track "+e),t.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))}},t.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},t.prototype._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var i=l(t.textTracks);if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var o=i[n];o&&(o.mode="disabled")}var a=i[e];a&&(a.mode=r?"showing":"hidden")}},t}(a.default);t.default=u},"./src/controller/timeline-controller.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/cea-608-parser.js"),l=r("./src/utils/output-filter.js"),u=r("./src/utils/webvtt-parser.js"),c=r("./src/utils/logger.js"),p=r("./src/utils/texttrack-utils.js"),f=function(t){function r(e){var r=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_USERDATA,o.default.FRAG_DECRYPTED,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.FRAG_LOADED,o.default.LEVEL_SWITCHING,o.default.INIT_PTS_FOUND)||this;if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new l.default(r,"textTrack1"),i=new l.default(r,"textTrack2");r.cea608Parser=new s.default(0,n,i)}return r}return i(r,t),r.prototype.addCues=function(e,t,r,n){for(var i,o,a,s,l=this.cueRanges,u=!1,c=l.length;c--;){var p=l[c],f=(i=p[0],o=p[1],a=t,s=r,Math.min(o,s)-Math.max(i,a));if(f>=0&&(p[0]=Math.min(p[0],t),p[1]=Math.max(p[1],r),u=!0,f/(r-t)>.5))return}u||l.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,n)},r.prototype.onInitPtsFound=function(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var r=this.unparsedVttFrags;this.unparsedVttFrags=[],r.forEach((function(e){t.onFragLoaded(e)}))}},r.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],r=t.label,n=t.languageCode,i=this.captionsTracks;if(!i[e]){var o=this.getExistingTrack(e);if(o)i[e]=o,p.clearCurrentCues(i[e]),p.sendAddTrackEvent(i[e],this.media);else{var a=this.createTextTrack("captions",r,n);a&&(a[e]=!0,i[e]=a)}}},r.prototype.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.prototype.destroy=function(){a.default.prototype.destroy.call(this)},r.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){p.clearCurrentCues(e[t]),delete e[t]}))},r.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)p.clearCurrentCues(t[r])}},r.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,n){var i;if(n<r.length){var o=[].slice.call(r).find((function(t){return function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}(t,e)}));o&&(i=o)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)}))}},r.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},r.prototype.onFragLoaded=function(t){var r=t.frag,n=t.payload;if("main"===r.type){var i=r.sn;if(i!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=i}else if("subtitle"===r.type)if(n.byteLength){if(!e.isFinite(this.initPTS[r.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r}));var s=r.decryptdata;null!=s&&null!=s.key&&"AES-128"===s.method||this._parseVTTs(r,n)}else this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})},r.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var n=this.textTracks,i=this.hls;u.default.parse(t,this.initPTS[e.cc],r,e.cc,(function(t){var r=n[e.trackId];"disabled"!==r.mode?(t.forEach((function(e){if(!r.cues.getCueById(e.id))try{r.addCue(e)}catch(n){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}})),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}),(function(t){c.logger.log("Failed to parse VTT cue: "+t),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},r.prototype.onFragDecrypted=function(t){var r=t.payload,n=t.frag;if("subtitle"===n.type){if(!e.isFinite(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(n,r)}},r.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}},r.prototype.extractCea608Data=function(e){for(var t,r,n,i=31&e[0],o=2,a=[],s=0;s<i;s++)t=e[o++],r=127&e[o++],n=127&e[o++],0===r&&0===n||0!=(4&t)&&0===(3&t)&&(a.push(r),a.push(n));return a},r}(a.default);t.default=f}).call(this,r("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=n},"./src/crypt/aes-decryptor.js":function(e,t,r){"use strict";function n(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=n;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],p=s[3],f=new Uint32Array(256),d=0,h=0,y=0;for(y=0;y<256;y++)f[y]=y<128?y<<1:y<<1^283;for(y=0;y<256;y++){var g=h^h<<1^h<<2^h<<3^h<<4;g=g>>>8^255&g^99,e[d]=g,t[g]=d;var m=f[d],A=f[m],v=f[A],b=257*f[g]^16843008*g;n[d]=b<<24|b>>>8,i[d]=b<<16|b>>>16,o[d]=b<<8|b>>>24,a[d]=b,b=16843009*v^65537*A^257*m^16843008*d,l[g]=b<<24|b>>>8,u[g]=b<<16|b>>>16,c[g]=b<<8|b>>>24,p[g]=b,d?(d=m^f[f[f[v^m]]],h^=f[f[h]]):d=h=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),p=this.invKeySchedule=new Uint32Array(u),f=this.sBox,d=this.rcon,h=this.invSubMix,y=h[0],g=h[1],m=h[2],A=h[3];for(o=0;o<u;o++)o<i?s=c[o]=t[o]:(l=s,o%i==0?(l=f[(l=l<<8|l>>>24)>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=d[o/i|0]<<24):i>6&&o%i==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),c[o]=s=(c[o-i]^l)>>>0);for(a=0;a<u;a++)o=u-a,l=3&a?c[o]:c[o-4],p[a]=a<4||o<=4?l:y[f[l>>>24]]^g[f[l>>>16&255]]^m[f[l>>>8&255]]^A[f[255&l]],p[a]=p[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,i){for(var o,a,s,l,u,c,p,f,d,h,y,g,m,A,v=this.keySize+6,b=this.invKeySchedule,_=this.invSBox,E=this.invSubMix,w=E[0],k=E[1],T=E[2],S=E[3],z=this.uint8ArrayToUint32Array_(r),P=z[0],O=z[1],L=z[2],C=z[3],R=new Int32Array(e),D=new Int32Array(R.length),I=this.networkToHostOrderSwap;t<R.length;){for(d=I(R[t]),h=I(R[t+1]),y=I(R[t+2]),g=I(R[t+3]),u=d^b[0],c=g^b[1],p=y^b[2],f=h^b[3],m=4,A=1;A<v;A++)o=w[u>>>24]^k[c>>16&255]^T[p>>8&255]^S[255&f]^b[m],a=w[c>>>24]^k[p>>16&255]^T[f>>8&255]^S[255&u]^b[m+1],s=w[p>>>24]^k[f>>16&255]^T[u>>8&255]^S[255&c]^b[m+2],l=w[f>>>24]^k[u>>16&255]^T[c>>8&255]^S[255&p]^b[m+3],u=o,c=a,p=s,f=l,m+=4;o=_[u>>>24]<<24^_[c>>16&255]<<16^_[p>>8&255]<<8^_[255&f]^b[m],a=_[c>>>24]<<24^_[p>>16&255]<<16^_[f>>8&255]<<8^_[255&u]^b[m+1],s=_[p>>>24]<<24^_[f>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^b[m+2],l=_[f>>>24]<<24^_[u>>16&255]<<16^_[c>>8&255]<<8^_[255&p]^b[m+3],m+=3,D[t]=I(o^P),D[t+1]=I(l^O),D[t+2]=I(s^L),D[t+3]=I(a^C),P=d,O=h,L=y,C=g,t+=4}return i?n(D.buffer):D.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},"./src/crypt/decrypter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/crypt/aes-crypto.js"),i=r("./src/crypt/fast-aes-key.js"),o=r("./src/crypt/aes-decryptor.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=r("./src/events.js"),u=r("./src/utils/get-self-scope.js").getSelfScope(),c=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=u.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,a){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new o.default),u.expandKey(t),a(u.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(c,t)),this.fastAesKey.expandKey().then((function(i){new n.default(c,r).decrypt(e,i).catch((function(n){l.onWebCryptoError(n,e,t,r,a)})).then((function(e){a(e)}))})).catch((function(n){l.onWebCryptoError(n,e,t,r,a)}))}},e.prototype.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},"./src/crypt/fast-aes-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=n},"./src/demux/aacdemuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/utils/logger.js"),o=r("./src/demux/id3.js"),a=function(){function t(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=(o.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(n.probe(e,t))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,r,a,s){for(var l=this._audioTrack,u=o.default.getID3Data(t,0)||[],c=o.default.getTimeStamp(u),p=e.isFinite(c)?90*c:9e4*r,f=0,d=p,h=t.length,y=u.length,g=[{pts:d,dts:d,data:u}];y<h-1;)if(n.isHeader(t,y)&&y+5<h){n.initTrackConfig(l,this.observer,t,y,l.manifestCodec);var m=n.appendFrame(l,t,y,p,f);if(!m){i.logger.log("Unable to parse AAC frame");break}y+=m.length,d=m.sample.pts,f++}else o.default.isHeader(t,y)?(u=o.default.getID3Data(t,y),g.push({pts:d,dts:d,data:u}),y+=u.length):y++;this.remuxer.remux(l,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},r,a,s)},t.prototype.destroy=function(){},t}();t.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/errors.js"),o=r("./src/events.js");function a(e,t,r,a){var s,l,u,c,p,f=navigator.userAgent.toLowerCase(),d=a,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[r+2])>>>6),!((l=(60&t[r+2])>>>2)>h.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+l+"["+h[l]+"Hz],channelConfig:"+c),/firefox/i.test(f)?l>=6?(s=5,p=new Array(4),u=l-3):(s=2,p=new Array(2),u=l):-1!==f.indexOf("android")?(s=2,p=new Array(2),u=l):(s=5,p=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(f))||!a&&1===c)&&(s=2,p=new Array(2)),u=l)),p[0]=s<<3,p[0]|=(14&l)>>1,p[1]|=(1&l)<<7,p[1]|=c<<3,5===s&&(p[1]|=(14&u)>>1,p[2]=(1&u)<<7,p[2]|=8,p[3]=0),{config:p,samplerate:h[l],channelCount:c,codec:"mp4a.40."+s,manifestCodec:d};e.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e){return 9216e4/e}function p(e,t,r,n,i){var o,a,s=e.length;if(o=l(e,t),a=u(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:r+n*i}}t.getAudioConfig=a,t.isHeaderPattern=s,t.getHeaderLength=l,t.getFullFrameLength=u,t.isHeader=function(e,t){return!!(t+1<e.length&&s(e,t))},t.probe=function(e,t){if(t+1<e.length&&s(e,t)){var r=l(e,t);t+5<e.length&&(r=u(e,t));var n=t+r;if(n===e.length||n+1<e.length&&s(e,n))return!0}return!1},t.initTrackConfig=function(e,t,r,i,o){if(!e.samplerate){var s=a(t,r,i,o);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,n.logger.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}},t.getFrameDuration=c,t.parseFrameHeader=p,t.appendFrame=function(e,t,r,n,i){var o=p(t,r,n,i,c(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,l=o.frameLength,u={unit:t.subarray(r+s,r+s+l),pts:a,dts:a};return e.samples.push(u),e.len+=l,{sample:u,length:l+s}}}},"./src/demux/demuxer-inline.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r("./src/events.js"),o=r("./src/errors.js"),a=r("./src/crypt/decrypter.js"),s=r("./src/demux/aacdemuxer.js"),l=r("./src/demux/mp4demuxer.js"),u=r("./src/demux/tsdemuxer.js"),c=r("./src/demux/mp3demuxer.js"),p=r("./src/remux/mp4-remuxer.js"),f=r("./src/remux/passthrough-remuxer.js"),d=r("./src/utils/get-self-scope.js"),h=r("./src/utils/logger.js"),y=d.getSelfScope();try{n=y.performance.now.bind(y.performance)}catch(e){h.logger.debug("Unable to use Performance API on this environment"),n=y.Date.now}var g=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,o,s,l,u,c,p,f,d,h){var y=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a.default(this.observer,this.config));var m=n();g.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=n();y.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),y.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,l,u,c,p,f,d,h)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,l,u,c,p,f,d,h)},e.prototype.pushDecrypted=function(e,t,r,n,a,d,h,y,g,m,A,v){var b=this.demuxer;if(!b||(h||y)&&!this.probe(e)){for(var _=this.observer,E=this.typeSupported,w=this.config,k=[{demux:u.default,remux:p.default},{demux:l.default,remux:f.default},{demux:s.default,remux:p.default},{demux:c.default,remux:p.default}],T=0,S=k.length;T<S;T++){var z=k[T],P=z.demux.probe;if(P(e)){var O=this.remuxer=new z.remux(_,w,E,this.vendor);b=new z.demux(_,O,w,E),this.probe=P;break}}if(!b)return void _.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=b}var L=this.remuxer;(h||y)&&(b.resetInitSegment(r,n,a,m),L.resetInitSegment()),h&&(b.resetTimeStamp(v),L.resetTimeStamp(v)),"function"==typeof b.setDecryptData&&b.setDecryptData(t),b.append(e,d,g,A)},e}();t.default=g},"./src/demux/demuxer-worker.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/demuxer-inline.js"),i=r("./src/events.js"),o=r("./src/utils/logger.js"),a=r("./node_modules/node-libs-browser/node_modules/events/events.js");t.default=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(r))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new n.default(t,a.typeSupported,s,a.vendor),o.enableLogs(s.debug),r("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,(function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)}))}},"./src/demux/demuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/webworkify-webpack/index.js"),i=r("./src/events.js"),o=r("./src/demux/demuxer-inline.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),l=r("./src/utils/mediasource-helper.js"),u=r("./src/utils/get-self-scope.js"),c=r("./src/observer.js"),p=u.getSelfScope(),f=l.getMediaSource(),d=function(){function t(e,t){var r=this;this.hls=e,this.id=t;var l=this.observer=new c.Observer,u=e.config,d=function(t,n){(n=n||{}).frag=r.frag,n.id=r.id,e.trigger(t,n)};l.on(i.default.FRAG_DECRYPTED,d),l.on(i.default.FRAG_PARSING_INIT_SEGMENT,d),l.on(i.default.FRAG_PARSING_DATA,d),l.on(i.default.FRAG_PARSED,d),l.on(i.default.ERROR,d),l.on(i.default.FRAG_PARSING_METADATA,d),l.on(i.default.FRAG_PARSING_USERDATA,d),l.on(i.default.INIT_PTS_FOUND,d);var h={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},y=navigator.vendor;if(u.enableWorker&&"undefined"!=typeof Worker){a.logger.log("demuxing in webworker");var g=void 0;try{g=this.w=n("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(t){e.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},g.postMessage({cmd:"init",typeSupported:h,vendor:y,id:t,config:JSON.stringify(u)})}catch(e){a.logger.warn("Error in worker:",e),a.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),g&&p.URL.revokeObjectURL(g.objectURL),this.demuxer=new o.default(l,h,u,y),this.w=void 0}}else this.demuxer=new o.default(l,h,u,y)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,r,n,i,o,s,l,u){var c=this.w,p=e.isFinite(o.startPTS)?o.startPTS:o.start,f=o.decryptdata,d=this.frag,h=!(d&&o.cc===d.cc),y=!(d&&o.level===d.level),g=d&&o.sn===d.sn+1,m=!y&&g;if(h&&a.logger.log(this.id+":discontinuity detected"),y&&a.logger.log(this.id+":switch detected"),this.frag=o,c)c.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:p,discontinuity:h,trackSwitch:y,contiguous:m,duration:s,accurateTimeOffset:l,defaultInitPTS:u},t instanceof ArrayBuffer?[t]:[]);else{var A=this.demuxer;A&&A.push(t,f,r,n,i,p,h,y,m,s,l,u)}},t.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":p.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t}();t.default=d}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},e.prototype.readSPS=function(){var e,t,r,n,i,o,a,s=0,l=0,u=0,c=0,p=this.readUByte.bind(this),f=this.readBits.bind(this),d=this.readUEG.bind(this),h=this.readBoolean.bind(this),y=this.skipBits.bind(this),g=this.skipEG.bind(this),m=this.skipUEG.bind(this),A=this.skipScalingList.bind(this);if(p(),e=p(),f(5),y(3),p(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var v=d();if(3===v&&y(1),m(),m(),y(1),h())for(o=3!==v?8:12,a=0;a<o;a++)h()&&A(a<6?16:64)}m();var b=d();if(0===b)d();else if(1===b)for(y(1),g(),g(),t=d(),a=0;a<t;a++)g();m(),y(1),r=d(),n=d(),0===(i=f(1))&&y(1),y(1),h()&&(s=d(),l=d(),u=d(),c=d());var _=[1,1];if(h()&&h())switch(p()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[p()<<8|p(),p()<<8|p()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:_}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,i=0;e.isHeader(t,r);)i+=10,i+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(i+=10),r+=i;if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){for(var i=e._readSize(t,r+6),o=(r+=10)+i;r+8<o;){var a=e._getFrameData(t.subarray(r)),s=e._decodeFrame(a);s&&n.push(s),r+=a.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var r,n,i,o=e.length,a="",s=0;s<o;){if(0===(r=e[s++])&&t)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:n=e[s++],a+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[s++],i=e[s++],a+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}}return a},e}(),i=n._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=n},"./src/demux/mp3demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/id3.js"),i=r("./src/utils/logger.js"),o=r("./src/demux/mpegaudio.js"),a=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,r,a=n.default.getID3Data(e,0);if(a&&void 0!==n.default.getTimeStamp(a))for(t=a.length,r=Math.min(e.length-1,t+100);t<r;t++)if(o.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var a=n.default.getID3Data(e,0),s=n.default.getTimeStamp(a),l=s?90*s:9e4*t,u=a.length,c=e.length,p=0,f=0,d=this._audioTrack,h=[{pts:l,dts:l,data:a}];u<c;)if(o.default.isHeader(e,u)){var y=o.default.appendFrame(d,e,u,l,p);if(!y)break;u+=y.length,f=y.sample.pts,p++}else n.default.isHeader(e,u)?(a=n.default.getID3Data(e,u),h.push({pts:f,dts:f,data:a}),u+=a.length):u++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mp4demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/events.js"),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,n,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:n,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,o,a,s,l,u=[];if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!r.length)return null;for(n=s;n<o;)l=(i=e.readUint32(t,n))>1?n+i:o,e.bin2str(t.subarray(n+4,n+8))===r[0]&&(1===r.length?u.push({data:t,start:n+8,end:l}):(a=e.findBox({data:t,start:n+8,end:l},r.slice(1))).length&&(u=u.concat(a))),n=l;return u},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;r=[];var s=(a=a[0]).data[0];o=0===s?8:16;var l=e.readUint32(a,o);o+=4,o+=0===s?8:16,o+=2;var u=a.end+0,c=e.readUint16(a,o);o+=2;for(var p=0;p<c;p++){var f=o,d=e.readUint32(a,f);f+=4;var h=2147483647&d;if(1===(2147483648&d)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var y=e.readUint32(a,f);f+=4,r.push({referenceSize:h,subsegmentDuration:y,info:{duration:y/l,start:u,end:u+h-1}}),u+=h,o=f+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=0===(o=l.data[l.start])?12:20;var u=e.readUint32(l,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var p={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(p){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var d=e.bin2str(f.data.subarray(f.start+12,f.start+16));n.logger.log("MP4Demuxer:"+p+":"+d+" found")}r[s]={timescale:u,type:p},r[p]={timescale:u,id:s}}}}}})),r},e.getStartDTS=function(t,r){var n,i,o;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var i,o;return i=e.readUint32(n,4),o=t[i].timescale||9e4,e.findBox(r,["tfdt"]).map((function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n}))[0]/o}))}))),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),l=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,l)}}))}))}))},e.prototype.append=function(t,r,n,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(a,t);this.initPTS=l=u-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(a,t,l),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,n,o,t)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mpegaudio.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var o=this.parseHeader(t,r);if(o&&r+o.frameLength<=t.length){var a=n+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(r,r+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==r&&0!==o&&15!==o&&3!==a){var l=3===r?3-i:3===i?3:4,u=1e3*n.BitratesMap[14*l+o-1],c=3===r?0:2===r?1:2,p=n.SamplingRateMap[3*c+a],f=e[t+3]>>6==3?1:2,d=n.SamplesCoefficients[r][i],h=n.BytesInSlot[i],y=8*d*h;return{sampleRate:p,channelCount:f,frameLength:parseInt(d*u/p+s,10)*h,samplesPerFrame:y}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var i=t+n;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=n},"./src/demux/sample-aes.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/crypt/decrypter.js"),i=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,n){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,(function(o){o=new Uint8Array(o),i.set(o,16),n||s.decryptAacSamples(e,t+1,r)}))},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},e.prototype.decryptAvcSample=function(e,t,r,n,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,(function(s){i.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(e,t,r+1,n)}))},e.prototype.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,o,a),!a)return}}}},e}();t.default=i},"./src/demux/tsdemuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/demux/mpegaudio.js"),o=r("./src/events.js"),a=r("./src/demux/exp-golomb.js"),s=r("./src/demux/sample-aes.js"),l=r("./src/utils/logger.js"),u=r("./src/errors.js"),c={video:1,audio:2,id3:3,text:4},p=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&l.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,n,i){var a,s,c,p,f,d=t.length,h=!1;this.contiguous=n;var y=this.pmtParsed,g=this._avcTrack,m=this._audioTrack,A=this._id3Track,v=g.pid,b=m.pid,_=A.pid,E=this._pmtId,w=g.pesData,k=m.pesData,T=A.pesData,S=this._parsePAT,z=this._parsePMT,P=this._parsePES,O=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),C=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),D=e._syncOffset(t);for(d-=(d+D)%188,a=D;a<d;a+=188)if(71===t[a]){if(s=!!(64&t[a+1]),c=((31&t[a+1])<<8)+t[a+2],(48&t[a+3])>>4>1){if((p=a+5+t[a+4])===a+188)continue}else p=a+4;switch(c){case v:s&&(w&&(f=P(w))&&void 0!==f.pts&&O(f,!1),w={data:[],size:0}),w&&(w.data.push(t.subarray(p,a+188)),w.size+=a+188-p);break;case b:s&&(k&&(f=P(k))&&void 0!==f.pts&&(m.isAAC?L(f):C(f)),k={data:[],size:0}),k&&(k.data.push(t.subarray(p,a+188)),k.size+=a+188-p);break;case _:s&&(T&&(f=P(T))&&void 0!==f.pts&&R(f),T={data:[],size:0}),T&&(T.data.push(t.subarray(p,a+188)),T.size+=a+188-p);break;case 0:s&&(p+=t[p]+1),E=this._pmtId=S(t,p);break;case E:s&&(p+=t[p]+1);var I=z(t,p,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(v=I.avc)>0&&(g.pid=v),(b=I.audio)>0&&(m.pid=b,m.isAAC=I.isAAC),(_=I.id3)>0&&(A.pid=_),h&&!y&&(l.logger.log("reparse from beginning"),h=!1,a=D-188),y=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(f=P(w))&&void 0!==f.pts?(O(f,!0),g.pesData=null):g.pesData=w,k&&(f=P(k))&&void 0!==f.pts?(m.isAAC?L(f):C(f),m.pesData=null):(k&&k.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=k),T&&(f=P(T))&&void 0!==f.pts?(R(f),A.pesData=null):A.pesData=T,null==this.sampleAes?this.remuxer.remux(m,g,A,this._txtTrack,r,n,i):this.decryptAndRemux(m,g,A,this._txtTrack,r,n,i)},e.prototype.decryptAndRemux=function(e,t,r,n,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,n,i,o,a)}))}else this.decryptAndRemuxAvc(e,t,r,n,i,o,a)},e.prototype.decryptAndRemuxAvc=function(e,t,r,n,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,n,i,o,a)}))}else this.remuxer.remux(e,t,r,n,i,o,a)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,n){var i,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){l.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!n){l.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:r?-1===a.audio&&(a.audio=o,a.isAAC=!1):l.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn("HEVC stream type found, not supported for now");break;default:l.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},e.prototype._parsePES=function(e){var t,r,n,i,o,a,s,u,c=0,p=e.data;if(!e||0===e.size)return null;for(;p[0].length<19&&p.length>1;){var f=new Uint8Array(p[0].length+p[1].length);f.set(p[0]),f.set(p[1],p[0].length),p[0]=f,p.splice(1,1)}if(1===((t=p[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;192&(r=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&r?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(l.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),u=(i=t[8])+9,e.size-=u,o=new Uint8Array(e.size);for(var d=0,h=p.length;d<h;d++){var y=(t=p[d]).byteLength;if(u){if(u>y){u-=y;continue}t=t.subarray(u),y-=u,u=0}o.set(t,c),c+=y}return n&&(n-=i+3),{data:o,pts:a,dts:s,len:n}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&l.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r,n,i,o=this,s=this._avcTrack,l=this._parseAVCNALu(e.data),u=this.avcSample,c=!1,p=this.pushAccesUnit.bind(this),f=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,u&&l.length&&!s.audFound&&(p(u,s),u=this.avcSample=f(!1,e.pts,e.dts,"")),l.forEach((function(t){switch(t.type){case 1:n=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.frame=!0;var l=t.data;if(c&&l.length>4){var d=new a.default(l).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case 5:n=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:n=!0,(r=new a.default(o.discardEPB(t.data))).readUByte();for(var h=0,y=0,g=!1,m=0;!g&&r.bytesAvailable>1;){h=0;do{h+=m=r.readUByte()}while(255===m);y=0;do{y+=m=r.readUByte()}while(255===m);if(4===h&&0!==r.bytesAvailable){if(g=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var A=r.readUByte(),v=31&A,b=[A,r.readUByte()];for(i=0;i<v;i++)b.push(r.readUByte()),b.push(r.readUByte()),b.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(y<r.bytesAvailable)for(i=0;i<y;i++)r.readUByte()}break;case 7:if(n=!0,c=!0,!s.sps){var _=(r=new a.default(t.data)).readSPS();s.width=_.width,s.height=_.height,s.pixelRatio=_.pixelRatio,s.sps=[t.data],s.duration=o._duration;var E=t.data.subarray(1,4),w="avc1.";for(i=0;i<3;i++){var k=E[i].toString(16);k.length<2&&(k="0"+k),w+=k}s.codec=w}break;case 8:n=!0,s.pps||(s.pps=[t.data]);break;case 9:n=!1,s.audFound=!0,u&&p(u,s),u=o.avcSample=f(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&n&&u.units.push(t)})),t&&u&&(p(u,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,r,n,i,o=0,a=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],p=-1;for(-1===l&&(p=0,i=31&e[0],l=0,o=1);o<a;){var f,d;t=e[o++],l?1!==l?t?1===t?(p>=0?(n={data:e.subarray(p,o-l-1),type:i},c.push(n)):(f=this._getLastNalUnit())&&(u&&o<=4-u&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),(r=o-l-1)>0&&((d=new Uint8Array(f.data.byteLength+r)).set(f.data,0),d.set(e.subarray(0,r),f.data.byteLength),f.data=d)),o<a?(p=o,i=31&e[o],l=0):l=-1):l=0:l=3:l=t?0:2:l=t?0:1}return p>=0&&l>=0&&(n={data:e.subarray(p,a),type:i,state:l},c.push(n)),0===c.length&&(f=this._getLastNalUnit())&&((d=new Uint8Array(f.data.byteLength+e.byteLength)).set(f.data,0),d.set(e,f.data.byteLength),f.data=d),s.naluState=l,c},e.prototype.discardEPB=function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=e[a];return r},e.prototype._parseAACPES=function(e){var t,r,i,a,s,c=this._audioTrack,p=e.data,f=e.pts,d=this.aacOverFlow,h=this.aacLastPTS;if(d){var y=new Uint8Array(d.byteLength+p.byteLength);y.set(d,0),y.set(p,d.byteLength),p=y}for(i=0,s=p.length;i<s-1&&!n.isHeader(p,i);i++);if(i){var g=void 0,m=void 0;if(i<s-1?(g="AAC PES did not start with ADTS header,offset:"+i,m=!1):(g="no ADTS header found in AAC PES",m=!0),l.logger.warn("parsing error:"+g),this.observer.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:m,reason:g}),m)return}if(n.initTrackConfig(c,this.observer,p,i,this.audioCodec),r=0,t=n.getFrameDuration(c.samplerate),d&&h){var A=h+t;Math.abs(A-f)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((A-f)/90)),f=A)}for(;i<s;)if(n.isHeader(p,i)&&i+5<s){var v=n.appendFrame(c,p,i,f,r);if(!v)break;i+=v.length,a=v.sample.pts,r++}else i++;d=i<s?p.subarray(i,s):null,this.aacOverFlow=d,this.aacLastPTS=a},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,o=0,a=e.pts;o<r;)if(i.default.isHeader(t,o)){var s=i.default.appendFrame(this._audioTrack,t,o,a,n);if(!s)break;o+=s.length,n++}else o++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=p},"./src/errors.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/errors.js"),o=r("./src/events.js"),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){n.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(o.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=s},"./src/events.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/url-toolkit/src/url-toolkit.js"),a=r("./src/errors.js"),s=r("./src/loader/playlist-loader.js"),l=r("./src/loader/fragment-loader.js"),u=r("./src/loader/key-loader.js"),c=r("./src/controller/fragment-tracker.js"),p=r("./src/controller/stream-controller.js"),f=r("./src/controller/level-controller.js"),d=r("./src/controller/id3-track-controller.js"),h=r("./src/is-supported.js"),y=r("./src/utils/logger.js"),g=r("./src/config.js"),m=r("./src/events.js"),A=function(e){function t(r){void 0===r&&(r={});var n=e.call(this)||this,i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in r||(r[o]=i[o]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');y.enableLogs(r.debug),n.config=r,n._autoLevelCapping=-1;var a=n.abrController=new r.abrController(n),h=new r.bufferController(n),g=new r.capLevelController(n),m=new r.fpsController(n),A=new s.default(n),v=new l.default(n),b=new u.default(n),_=new d.default(n),E=n.levelController=new f.default(n),w=new c.FragmentTracker(n),k=[E,n.streamController=new p.default(n,w)],T=r.audioStreamController;T&&k.push(new T(n,w)),n.networkControllers=k;var S=[A,v,b,a,h,g,m,_,w];if(T=r.audioTrackController){var z=new T(n);n.audioTrackController=z,S.push(z)}if(T=r.subtitleTrackController){var P=new T(n);n.subtitleTrackController=P,S.push(P)}if(T=r.emeController){var O=new T(n);n.emeController=O,S.push(O)}return(T=r.subtitleStreamController)&&S.push(new T(n,w)),(T=r.timelineController)&&S.push(new T(n)),n.coreComponents=S,n}return i(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.2"},enumerable:!0,configurable:!0}),t.isSupported=function(){return h.isSupported()},Object.defineProperty(t,"Events",{get:function(){return m.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return a.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return a.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:g.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){y.logger.log("destroy"),this.trigger(m.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){y.logger.log("attachMedia"),this.media=e,this.trigger(m.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){y.logger.log("detachMedia"),this.trigger(m.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),y.logger.log("loadSource:"+e),this.url=e,this.trigger(m.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),y.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},t.prototype.stopLoad=function(){y.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},t.prototype.swapAudioCodec=function(){y.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){y.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){y.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){y.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){y.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){y.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){y.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){y.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++)if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n;return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(r("./src/observer.js").Observer);t.default=A},"./src/is-supported.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/mediasource-helper.js");t.isSupported=function(){var e=n.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!i}},"./src/loader/fragment-loader.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/errors.js"),l=r("./src/utils/logger.js"),u=function(t){function r(e){var r=t.call(this,e,o.default.FRAG_LOADING)||this;return r.loaders={},r}return i(r,t),r.prototype.destroy=function(){var e=this.loaders;for(var r in e){var n=e[r];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var r=t.frag,n=r.type,i=this.loaders,o=this.hls.config,a=o.fLoader,s=o.loader;r.loaded=0;var u,c,p,f=i[n];f&&(l.logger.warn("abort previous fragment loader for type: "+n),f.abort()),f=i[n]=r.loader=o.fLoader?new a(o):new s(o),u={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var d=r.byteRangeStartOffset,h=r.byteRangeEndOffset;e.isFinite(d)&&e.isFinite(h)&&(u.rangeStart=d,u.rangeEnd=h),c={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(u,c,p)},r.prototype.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var i=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(o.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:n})},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.prototype.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(o.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:n})},r}(a.default);t.default=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/level-key.js"),o=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new i.default).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},t}();t.default=o}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/errors.js"),l=r("./src/utils/logger.js"),u=function(e){function t(t){var r=e.call(this,t,o.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return i(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},a.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var s,u,c,p=this.hls.config;n&&(l.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new p.loader(p),this.decrypturl=a,this.decryptkey=null,s={url:a,frag:t,responseType:"arraybuffer"},u={timeout:p.fragLoadingTimeOut,maxRetry:0,retryDelay:p.fragLoadingRetryDelay,maxRetryDelay:p.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,u,c)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(o.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(o.default.KEY_LOADED,{frag:n})},t.prototype.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(a.default);t.default=u},"./src/loader/level-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},"./src/loader/level.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=r}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/fragment.js"),o=r("./src/loader/level.js"),a=r("./src/loader/level-key.js"),s=r("./src/utils/attr-list.js"),l=r("./src/utils/logger.js"),u=r("./src/utils/codecs.js"),c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,p=/#EXT-X-MEDIA:(.*)/g,f=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),d=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,h=/\.(mp4|m4s|m4v|m4a)$/i,y=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var r=null,n=0;n<e.length;n++){var i=e[n];i.id===t&&(r=i)}return r},t.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return n.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var n,i=[];function o(e,t){["video","audio"].forEach((function(r){var n=e.filter((function(e){return u.isCodecType(e,r)}));if(n.length){var i=n.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)}))}})),t.unknownCodecs=e}for(c.lastIndex=0;null!=(n=c.exec(e));){var a={},l=a.attrs=new s.default(n[1]);a.url=t.resolve(n[2],r);var p=l.decimalResolution("RESOLUTION");p&&(a.width=p.width,a.height=p.height),a.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),a.name=l.NAME,o([].concat((l.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=t.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},t.parseMasterPlaylistMedia=function(e,r,n,i){var o;void 0===i&&(i=[]);var a=[],l=0;for(p.lastIndex=0;null!==(o=p.exec(e));){var u={},c=new s.default(o[1]);if(c.TYPE===n){if(u.groupId=c["GROUP-ID"],u.name=c.NAME,u.type=n,u.default="YES"===c.DEFAULT,u.autoselect="YES"===c.AUTOSELECT,u.forced="YES"===c.FORCED,c.URI&&(u.url=t.resolve(c.URI,r)),u.lang=c.LANGUAGE,u.name||(u.name=u.lang),i.length){var f=t.findGroup(i,u.groupId);u.audioCodec=f?f.codec:i[0].codec}u.id=l++,a.push(u)}}return a},t.parseLevelPlaylist=function(t,r,n,u,c){var p,y,m=0,A=0,v=new o.default(r),b=new a.default,_=0,E=null,w=new i.default,k=null;for(f.lastIndex=0;null!==(p=f.exec(t));){var T=p[1];if(T){w.duration=parseFloat(T);var S=(" "+p[2]).slice(1);w.title=S||null,w.tagList.push(S?["INF",T,S]:["INF",T])}else if(p[3]){if(e.isFinite(w.duration)){var z=m++;w.type=u,w.start=A,w.levelkey=b,w.sn=z,w.level=n,w.cc=_,w.urlId=c,w.baseurl=r,w.relurl=(" "+p[3]).slice(1),g(w,E),v.fragments.push(w),E=w,A+=w.duration,w=new i.default}}else if(p[4]){if(w.rawByteRange=(" "+p[4]).slice(1),E){var P=E.byteRangeEndOffset;P&&(w.lastByteRangeEndOffset=P)}}else if(p[5])w.rawProgramDateTime=(" "+p[5]).slice(1),w.tagList.push(["PROGRAM-DATE-TIME",w.rawProgramDateTime]),null===k&&(k=v.fragments.length);else{for(p=p[0].match(d),y=1;y<p.length&&void 0===p[y];y++);var O=(" "+p[y+1]).slice(1),L=(" "+p[y+2]).slice(1);switch(p[y]){case"#":w.tagList.push(L?[O,L]:[O]);break;case"PLAYLIST-TYPE":v.type=O.toUpperCase();break;case"MEDIA-SEQUENCE":m=v.startSN=parseInt(O);break;case"TARGETDURATION":v.targetduration=parseFloat(O);break;case"VERSION":v.version=parseInt(O);break;case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"DIS":_++,w.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":_=parseInt(O);break;case"KEY":var C=O,R=new s.default(C),D=R.enumeratedString("METHOD"),I=R.URI,M=R.hexadecimalInteger("IV");D&&(b=new a.default,I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(D)>=0&&(b.method=D,b.baseuri=r,b.reluri=I,b.key=null,b.iv=M));break;case"START":var x=O,j=new s.default(x).decimalFloatingPoint("TIME-OFFSET");e.isFinite(j)&&(v.startTimeOffset=j);break;case"MAP":var B=new s.default(O);w.relurl=B.URI,w.rawByteRange=B.BYTERANGE,w.baseurl=r,w.level=n,w.type=u,w.sn="initSegment",v.initSegment=w,(w=new i.default).rawProgramDateTime=v.initSegment.rawProgramDateTime;break;default:l.logger.warn("line parsed but not handled: "+p)}}}return(w=E)&&!w.relurl&&(v.fragments.pop(),A-=w.duration),v.totalduration=A,v.averagetargetduration=A/v.fragments.length,v.endSN=m-1,v.startCC=v.fragments[0]?v.fragments[0].cc:0,v.endCC=_,!v.initSegment&&v.fragments.length&&v.fragments.every((function(e){return h.test(e.relurl)}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(w=new i.default).relurl=v.fragments[0].relurl,w.baseurl=r,w.level=n,w.type=u,w.sn="initSegment",v.initSegment=w,v.needSidxRanges=!0),k&&function(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(v.fragments,k),v},t}();function g(t,r){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):r&&r.programDateTime&&(t.programDateTime=r.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}t.default=y}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(e,t,r){"use strict";(function(e){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/errors.js"),l=r("./src/utils/logger.js"),u=r("./src/demux/mp4demuxer.js"),c=r("./src/loader/m3u8-parser.js"),p=window.performance,f={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},d={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},h=function(t){function r(e){var r=t.call(this,e,o.default.MANIFEST_LOADING,o.default.LEVEL_LOADING,o.default.AUDIO_TRACK_LOADING,o.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}return i(r,t),Object.defineProperty(r,"ContextType",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LevelType",{get:function(){return d},enumerable:!0,configurable:!0}),r.canHaveQualityLevels=function(e){return e!==f.AUDIO_TRACK&&e!==f.SUBTITLE_TRACK},r.mapContextToLevelType=function(e){switch(e.type){case f.AUDIO_TRACK:return d.AUDIO;case f.SUBTITLE_TRACK:return d.SUBTITLE;default:return d.MAIN}},r.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},r.prototype.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=new(r||n)(t);return e.loader=i,this.loaders[e.type]=i,i},r.prototype.getInternalLoader=function(e){return this.loaders[e.type]},r.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},r.prototype.onManifestLoading=function(e){this.load(e.url,{type:f.MANIFEST,level:0,id:null})},r.prototype.onLevelLoading=function(e){this.load(e.url,{type:f.LEVEL,level:e.level,id:e.id})},r.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:f.AUDIO_TRACK,level:null,id:e.id})},r.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:f.SUBTITLE_TRACK,level:null,id:e.id})},r.prototype.load=function(e,t){var r=this.hls.config;l.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,i,o,a,s=this.getInternalLoader(t);if(s){var u=s.context;if(u&&u.url===e)return l.logger.trace("playlist request ongoing"),!1;l.logger.warn("aborting previous loader for type: "+t.type),s.abort()}switch(t.type){case f.MANIFEST:n=r.manifestLoadingMaxRetry,i=r.manifestLoadingTimeOut,o=r.manifestLoadingRetryDelay,a=r.manifestLoadingMaxRetryTimeout;break;case f.LEVEL:n=0,i=r.levelLoadingTimeOut;break;default:n=r.levelLoadingMaxRetry,i=r.levelLoadingTimeOut,o=r.levelLoadingRetryDelay,a=r.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var c={timeout:i,maxRetry:n,retryDelay:o,maxRetryDelay:a},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return l.logger.debug("Calling internal loader delegate for URL: "+e),s.load(t,c,p),!0},r.prototype.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);this.resetInternalLoader(r.type);var i=e.data;t.tload=p.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r.prototype._handleMasterPlaylist=function(e,t,n,i){var a=this.hls,s=e.data,u=r.getResponseUrl(e,n),p=c.default.parseMasterPlaylist(s,u);if(p.length){var f=p.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),d=c.default.parseMasterPlaylistMedia(s,u,"AUDIO",f),h=c.default.parseMasterPlaylistMedia(s,u,"SUBTITLES");if(d.length){var y=!1;d.forEach((function(e){e.url||(y=!0)})),!1===y&&p[0].audioCodec&&!p[0].attrs.AUDIO&&(l.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),d.unshift({type:"main",name:"main"}))}a.trigger(o.default.MANIFEST_LOADED,{levels:p,audioTracks:d,subtitles:h,url:u,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,n,"no level found in manifest",i)},r.prototype._handleTrackOrLevelPlaylist=function(t,n,i,a){var s=this.hls,l=i.id,u=i.level,d=i.type,h=r.getResponseUrl(t,i),y=e.isFinite(l)?l:0,g=e.isFinite(u)?u:y,m=r.mapContextToLevelType(i),A=c.default.parseLevelPlaylist(t.data,h,g,m,y);if(A.tload=n.tload,d===f.MANIFEST){var v={url:h,details:A};s.trigger(o.default.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:h,stats:n,networkDetails:a})}if(n.tparsed=p.now(),A.needSidxRanges){var b=A.initSegment.url;this.load(b,{isSidxRequest:!0,type:d,level:u,levelDetails:A,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else i.levelDetails=A,this._handlePlaylistLoaded(t,n,i,a)},r.prototype._handleSidxRequest=function(e,t){var r=u.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach((function(e,t){var r=e.info,n=i.fragments[t];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))})),i.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},r.prototype._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r.prototype._handleNetworkError=function(e,t,r,n){var i,a;void 0===r&&(r=!1),void 0===n&&(n=null),l.logger.info("A network error occured while loading a "+e.type+"-type playlist");var u=this.getInternalLoader(e);switch(e.type){case f.MANIFEST:i=r?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case f.LEVEL:i=r?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case f.AUDIO_TRACK:i=r?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}u&&(u.abort(),this.resetInternalLoader(e.type));var c={type:s.ErrorTypes.NETWORK_ERROR,details:i,fatal:a,url:u.url,loader:u,context:e,networkDetails:t};n&&(c.response=n),this.hls.trigger(o.default.ERROR,c)},r.prototype._handlePlaylistLoaded=function(e,t,n,i){var a=n.type,s=n.level,l=n.id,u=n.levelDetails;if(u.targetduration)if(r.canHaveQualityLevels(n.type))this.hls.trigger(o.default.LEVEL_LOADED,{details:u,level:s||0,id:l||0,stats:t,networkDetails:i});else switch(a){case f.AUDIO_TRACK:this.hls.trigger(o.default.AUDIO_TRACK_LOADED,{details:u,id:l,stats:t,networkDetails:i});break;case f.SUBTITLE_TRACK:this.hls.trigger(o.default.SUBTITLE_TRACK_LOADED,{details:u,id:l,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,n,"invalid target duration",i)},r}(a.default);t.default=h}).call(this,r("./src/polyfills/number.js").Number)},"./src/observer.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(t))},t}(r("./node_modules/eventemitter3/index.js").EventEmitter);t.Observer=o},"./src/polyfills/number.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/get-self-scope.js").getSelfScope().Number;t.Number=n,n.isFinite=n.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=n},"./src/remux/mp4-generator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,l,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<o;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,o=[],a=[];for(r=0;r<t.sps.length;r++)i=(n=t.sps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)i=(n=t.pps[r]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,u=t.height,c=t.pixelRatio[0],p=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,p>>24,p>>16&255,p>>8&255,255&p])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,o=t.width,a=t.height,s=Math.floor(i/(n+1)),l=Math.floor(i%(n+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),o=t.id,a=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,o,a,s,l,u=t.samples||[],c=u.length,p=12+16*c,f=new Uint8Array(p);for(r+=8+p,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)o=(i=u[n]).duration,a=i.size,s=i.flags,l=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();t.default=i},"./src/remux/mp4-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/remux/aac-helper.js"),i=r("./src/remux/mp4-generator.js"),o=r("./src/events.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,n,i,a,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var u=e.samples.length,c=t.samples.length,p=i,f=i;if(u&&c){var d=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;p+=Math.max(0,d),f+=Math.max(0,-d)}if(u){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var h=this.remuxAudio(e,p,a,l);if(c){var y=void 0;h&&(y=h.endPTS-h.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,f,a,y,l)}}else if(c){var g=this.remuxVideo(t,f,a,0,l);g&&e.codec&&this.remuxEmptyAudio(e,p,a,g)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(o.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var n,l,u=this.observer,c=e.samples,p=t.samples,f=this.typeSupported,d="audio/mp4",h={},y={tracks:h},g=void 0===this._initPTS;if(g&&(n=l=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(d="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),h.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(n=l=c[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&p.length){var m=t.inputTimeScale;t.timescale=m,h.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},g&&(n=Math.min(n,p[0].pts-m*r),l=Math.min(l,p[0].dts-m*r),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(h).length?(u.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,y),this.ISGenerated=!0,g&&(this._initPTS=n,this._initDTS=l)):u.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,n,l){var u,c,p,f,d,h,y,g=8,m=e.timescale,A=e.samples,v=[],b=A.length,_=this._PTSNormalize,E=this._initPTS,w=this.nextAvcDts,k=this.isSafari;if(0!==b){k&&(r|=A.length&&w&&(l&&Math.abs(t-w/m)<.1||Math.abs(A[0].pts-w-E)<m/5)),r||(w=t*m),A.forEach((function(e){e.pts=_(e.pts-E,w),e.dts=_(e.dts-E,w)})),A.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id}));var T=A.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(T<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var S=0;S<A.length;S++)A[S].dts+=T}var z=A[0];d=Math.max(z.dts,0),f=Math.max(z.pts,0);var P=Math.round((d-w)/90);r&&P&&(P>1?s.logger.log("AVC:"+P+" ms hole between fragments detected,filling it"):P<-1&&s.logger.log("AVC:"+-P+" ms overlapping between fragments detected"),d=w,A[0].dts=d,f=Math.max(f-P,w),A[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(d/90)+",delta:"+P+" ms")),z=A[A.length-1],y=Math.max(z.dts,0),h=Math.max(z.pts,0,y),k&&(u=Math.round((y-d)/(A.length-1)));var O=0,L=0;for(S=0;S<b;S++){for(var C=A[S],R=C.units,D=R.length,I=0,M=0;M<D;M++)I+=R[M].data.length;L+=I,O+=D,C.length=I,C.dts=k?d+S*u:Math.max(C.dts,d),C.pts=Math.max(C.pts,C.dts)}var x=L+4*O+8;try{c=new Uint8Array(x)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:x,reason:"fail allocating video mdat "+x})}var j=new DataView(c.buffer);for(j.setUint32(0,x),c.set(i.default.types.mdat,4),S=0;S<b;S++){var B=A[S],N=B.units,F=0,U=void 0;for(M=0,D=N.length;M<D;M++){var Y=N[M],G=Y.data,V=Y.data.byteLength;j.setUint32(g,V),g+=4,c.set(G,g),g+=V,F+=4+V}if(k)U=Math.max(0,u*Math.round((B.pts-B.dts)/u));else{if(S<b-1)u=A[S+1].dts-B.dts;else{var H=this.config,Q=B.dts-A[S>0?S-1:S].dts;if(H.stretchShortVideoTrack){var K=H.maxBufferHole,W=Math.floor(K*m),q=(n?f+n*m:this.nextAudioPts)-B.pts;q>W?((u=q-Q)<0&&(u=Q),s.logger.log("It is approximately "+q/90+" ms to the next segment; using duration "+u/90+" ms for the last video frame.")):u=Q}else u=Q}U=Math.round(B.pts-B.dts)}v.push({size:F,duration:u,cts:U,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=y+u;var X=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,v.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var J=v[0].flags;J.dependsOn=2,J.isNonSync=0}e.samples=v,p=i.default.moof(e.sequenceNumber++,d,e),e.samples=[];var Z={data1:p,data2:c,startPTS:f/m,endPTS:(h+u)/m,startDTS:d/m,endDTS:this.nextAvcDts/m,type:"video",hasAudio:!1,hasVideo:!0,nb:v.length,dropped:X};return this.observer.trigger(o.default.FRAG_PARSING_DATA,Z),Z}},e.prototype.remuxAudio=function(e,t,r,l){var u,c,p,f,d,h,y,g=e.inputTimeScale,m=e.timescale,A=g/m,v=(e.isAAC?1024:1152)*A,b=this._PTSNormalize,_=this._initPTS,E=!e.isAAC&&this.typeSupported.mpeg,w=e.samples,k=[],T=this.nextAudioPts;if(r|=w.length&&T&&(l&&Math.abs(t-T/g)<.1||Math.abs(w[0].pts-T-_)<20*v),w.forEach((function(e){e.pts=e.dts=b(e.pts-_,t*g)})),0!==(w=w.filter((function(e){return e.pts>=0}))).length){if(r||(T=l?t*g:w[0].pts),e.isAAC)for(var S=this.config.maxAudioFramesDrift,z=0,P=T;z<w.length;){var O,L=w[z];O=(B=L.pts)-P;var C=Math.abs(1e3*O/g);if(O<=-S*v)s.logger.warn("Dropping 1 audio frame @ "+(P/g).toFixed(3)+"s due to "+Math.round(C)+" ms overlap."),w.splice(z,1),e.len-=L.unit.length;else if(O>=S*v&&C<1e4&&P){var R=Math.round(O/v);s.logger.warn("Injecting "+R+" audio frame @ "+(P/g).toFixed(3)+"s due to "+Math.round(1e3*O/g)+" ms gap.");for(var D=0;D<R;D++){var I=Math.max(P,0);(p=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),p=L.unit.subarray()),w.splice(z,0,{unit:p,pts:I,dts:I}),e.len+=p.length,P+=v,z++}L.pts=L.dts=P,P+=v,z++}else Math.abs(O),L.pts=L.dts=P,P+=v,z++}D=0;for(var M=w.length;D<M;D++){var x=w[D],j=x.unit,B=x.pts;if(void 0!==y)c.duration=Math.round((B-y)/A);else{var N=Math.round(1e3*(B-T)/g),F=0;if(r&&e.isAAC&&N){if(N>0&&N<1e4)F=Math.round((B-T)/v),s.logger.log(N+" ms hole between AAC samples detected,filling it"),F>0&&((p=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(p=j.subarray()),e.len+=F*p.length);else if(N<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(T/g).toFixed(3)+"s/"+(B/g).toFixed(3)+"s/"+-N+"ms"),e.len-=j.byteLength;continue}B=T}if(h=B,!(e.len>0))return;var U=E?e.len:e.len+8;u=E?0:8;try{f=new Uint8Array(U)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}for(E||(new DataView(f.buffer).setUint32(0,U),f.set(i.default.types.mdat,4)),z=0;z<F;z++)(p=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),p=j.subarray()),f.set(p,u),u+=p.byteLength,c={size:p.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(c)}f.set(j,u);var Y=j.byteLength;u+=Y,c={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(c),y=B}var G=0,V=k.length;if(V>=2&&(G=k[V-2].duration,c.duration=G),V){this.nextAudioPts=T=y+A*G,e.len=0,e.samples=k,d=E?new Uint8Array:i.default.moof(e.sequenceNumber++,h/A,e),e.samples=[];var H=h/g,Q=T/g,K={data1:d,data2:f,startPTS:H,endPTS:Q,startDTS:H,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:V};return this.observer.trigger(o.default.FRAG_PARSING_DATA,K),K}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,i){var o=e.inputTimeScale,a=o/(e.samplerate?e.samplerate:o),l=this.nextAudioPts,u=(void 0!==l?l:i.startDTS*o)+this._initDTS,c=i.endDTS*o+this._initDTS,p=1024*a,f=Math.ceil((c-u)/p),d=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),d){for(var h=[],y=0;y<f;y++){var g=u+y*p;h.push({unit:d,pts:g,dts:g}),e.len+=d.length}e.samples=h,this.remuxAudio(e,t,r)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS,a=this._initDTS;if(r){for(var s=0;s<r;s++)(t=e.samples[s]).pts=(t.pts-i)/n,t.dts=(t.dts-a)/n;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS;if(r){for(var a=0;a<r;a++)(t=e.samples[a]).pts=(t.pts-i)/n;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}();t.default=l},"./src/remux/passthrough-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,i,o,a,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:o,startDTS:o,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(n.default.FRAG_PARSED)},e}();t.default=i},"./src/task-loop.js":function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.apply(this,[t].concat(r))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return i(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(r("./src/event-handler.js").default);t.default=o},"./src/utils/attr-list.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var r=parseInt(this[t],10);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var r=parseInt(this[t],16);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,r={};for(n.lastIndex=0;null!==(t=n.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},t}();t.default=i}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={search:function(e,t){for(var r=0,n=e.length-1,i=null,o=null;r<=n;){var a=t(o=e[i=(r+n)/2|0]);if(a>0)r=i+1;else{if(!(a<0))return o;n=i-1}}return null}}},"./src/utils/buffer-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n=e.buffered,i=[],o=void 0;for(o=0;o<n.length;o++)i.push({start:n.start(o),end:n.end(o)});return this.bufferedInfo(i,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){var n,i,o,a,s,l=[];for(e.sort((function(e,t){return e.start-t.start||t.end-e.end})),s=0;s<e.length;s++){var u=l.length;if(u){var c=l[u-1].end;e[s].start-c<r?e[s].end>c&&(l[u-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,n=0,i=o=t;s<l.length;s++){var p=l[s].start,f=l[s].end;if(t+r>=p&&t<f)i=p,n=(o=f)-t;else if(t+r<p){a=p;break}}return{len:n,start:i,end:o,nextStart:a}},e}();t.BufferHelper=n},"./src/utils/cea-608-parser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},o=15,a=100,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e],this.verboseLevel}},d=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},h=function(){function e(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),y=function(){function e(e,t,r,n,i,o){this.uchar=e||" ",this.penState=new h(t,r,n,i,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),g=function(){function e(){this.chars=[];for(var e=0;e<a;e++)this.chars.push(new y);this.pos=0,this.currPenState=new h}return e.prototype.equals=function(e){for(var t=!0,r=0;r<a;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<a;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<a;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>a&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=a)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=i(e);this.pos>=a?f.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<a;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,r=0;r<a;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),m=function(){function e(){this.rows=[];for(var e=0;e<o;e++)this.rows.push(new g);this.currRow=14,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<o;e++)this.rows[e].clear();this.currRow=14},e.prototype.equals=function(e){for(var t=!0,r=0;r<o;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<o;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<o;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){f.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){f.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<o;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime;if(a&&a<f.time)for(r=0;r<this.nrRollUpRows;r++)this.rows[t-this.nrRollUpRows+r+1].copy(i.rows[n+r])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){f.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){f.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<o;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),A=function(){function e(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,f.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){f.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){f.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}f.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=f.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),v=function(){function e(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new A(1,t),new A(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var r,n,i,o=!1;this.lastTime=e,f.setTime(e);for(var a=0;a<t.length;a+=2)n=127&t[a],i=127&t[a+1],0!==n||0!==i?(f.log("DATA","["+d([t[a],t[a+1]])+"] -> ("+d([n,i])+")"),(r=this.parseCmd(n,i))||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),r||(o=this.parseChars(n,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(o):f.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+d([n,i])+" orig: "+d([t[a],t[a+1]])))):this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var r;if(!((20===e||28===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+d([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var n=this.channels[r-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.parseMidrow=function(e,t){var r=null;return(17===e||25===e)&&t>=32&&t<=47&&((r=17===e?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),f.log("DEBUG","MIDROW ("+d([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var r,n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=t>=64&&t<=95?1===r?s[e]:u[e]:1===r?l[e]:c[e];var i=this.interpretPAC(n,t);return this.channels[r-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.interpretPAC=function(e,t){var r,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},e.prototype.parseChars=function(e,t){var r,n=null,o=null,a=null;if(e>=25?(n=2,a=e-8):(n=1,a=e),a>=17&&a<=19?(r=17===a?t+80:18===a?t+112:t+144,f.log("INFO","Special char '"+i(r)+"' in channel "+n),o=[r]):e>=32&&e<=127&&(o=0===t?[e]:[e,t]),o){var s=d(o);f.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return o},e.prototype.parseBackgroundAttributes=function(e,t){var r,n,i;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=p[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();t.default=v},"./src/utils/codecs.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){var r=n[t];return!!r&&!0===r[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttparser.js");t.newCue=function(e,t,r,i){for(var o,a,s,l,u,c=window.VTTCue||window.TextTrackCue,p=0;p<i.rows.length;p++)if(s=!0,l=0,u="",!(o=i.rows[p]).isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?l++:(u+=o.chars[f].uchar,s=!1);o.cueStartTime=t,t===r&&(r+=1e-4),a=new c(t,r,n.fixLineBreaks(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?a.line=p+1:a.line=p>7?p-2:p+1,a.align="left",a.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}},"./src/utils/discontinuities.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/binary-search.js"),i=r("./src/utils/logger.js");function o(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function a(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function s(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var a=o(r,n[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function u(e,t,r){if(a(e,r,t)){var n=s(r.details,t);n&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level"),l(n.start,t))}}function c(t,r){if(r&&r.fragments.length){if(!t.hasProgramDateTime||!r.hasProgramDateTime)return;var n=r.fragments[0].programDateTime,o=(t.fragments[0].programDateTime-n)/1e3+r.fragments[0].start;e.isFinite(o)&&(i.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),l(o,t))}}t.findFirstFragWithCC=o,t.findFragWithCC=function(e,t){return n.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))},t.shouldAlignOnDiscontinuities=a,t.findDiscontinuousReferenceFrag=s,t.adjustPts=l,t.alignStream=function(e,t,r){u(e,r,t),!r.PTSKnown&&t&&c(r,t.details)},t.alignDiscontinuities=u,t.alignPDT=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/ewma.js"),i=function(){function e(e,t,r,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(t),this.fast_=new n.default(r)}return e.prototype.sample=function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},"./src/utils/ewma.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=n},"./src/utils/get-self-scope.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},"./src/utils/logger.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/get-self-scope.js");function i(){}var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o,s=n.getSelfScope();t.enableLogs=function(e){if(!0===e||"object"==typeof e){!function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach((function(t){a[t]=e[t]?e[t].bind(e):function(e){var t=s.console[e];return t?function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0]&&(r[0]=function(e,t){return"["+e+"] > "+t}(e,r[0])),t.apply(s.console,r)}:i}(t)}))}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},t.logger=a},"./src/utils/mediakeys-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;t.requestMediaKeySystemAccess=n},"./src/utils/mediasource-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},"./src/utils/output-filter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}();t.default=n},"./src/utils/texttrack-utils.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},t.clearCurrentCues=function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},"./src/utils/time-ranges.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},"./src/utils/vttcue.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function i(t,i,o){var a=this,s=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};s?a=document.createElement("custom"):l.enumerable=!0,a.hasBeenReset=!1;var u="",c=!1,p=t,f=i,d=o,h=null,y="",g=!0,m="auto",A="start",v=50,b="middle",_=50,E="middle";if(Object.defineProperty(a,"id",n({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(a,"pauseOnExit",n({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(a,"startTime",n({},l,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",n({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",n({},l,{get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",n({},l,{get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",n({},l,{get:function(){return y},set:function(t){var r=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");y=r,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",n({},l,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",n({},l,{get:function(){return m},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",n({},l,{get:function(){return A},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",n({},l,{get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",n({},l,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",n({},l,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",n({},l,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),a.displayState=void 0,s)return a}return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}()},"./src/utils/vttparser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttcue.js"),i=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function o(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function a(){this.values=Object.create(null)}function s(e,t,r,n){var i=n?e.split(n):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);2===a.length&&t(a[0],a[1])}}a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var l=new n.default(0,0,0),u="middle"===l.align?"middle":"center";function c(e,t,r){var n=e;function i(){var t=function(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var n=new a;s(e,(function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];n.integer(e,a),n.percent(e,a)&&n.set("snapToLines",!1),n.alt(e,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",u,"end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",u,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",u,"end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===l.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",u);var o=n.get("position","auto");"auto"===o&&50===l.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function p(e){return e.replace(/<br(?: \/)?>/gi,"\n")}t.fixLineBreaks=p,o.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=p(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i=void 0;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var o=(i=r()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=r(),t.state){case"HEADER":/:/.test(i)?s(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new n.default(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{c(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=-1!==i.indexOf("--\x3e");if(!i||l&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.default=o},"./src/utils/webvtt-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttparser.js"),i=r("./src/demux/id3.js"),o=function(e,t,r){return e.substr(r||0,t.length)===t},a=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},s={parse:function(t,r,s,l,u,c){var p,f=i.utf8ArrayToStr(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),d="00:00.000",h=0,y=0,g=0,m=[],A=!0,v=new n.default;v.oncue=function(e){var t=s[l],r=s.ccOffset;t&&t.new&&(void 0!==y?r=s.ccOffset=t.start:function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,i=e[(n=i).prevCC];e.presentationOffset=r}(s,l,g)),g&&(r=g-s.presentationOffset),e.startTime+=r-y,e.endTime+=r-y,e.id=a(e.startTime.toString())+a(e.endTime.toString())+a(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&m.push(e)},v.onparsingerror=function(e){p=e},v.onflush=function(){p&&c?c(p):u(m)},f.forEach((function(t){if(A){if(o(t,"X-TIMESTAMP-MAP=")){A=!1,t.substr(16).split(",").forEach((function(e){o(e,"LOCAL:")?d=e.substr(6):o(e,"MPEGTS:")&&(h=parseInt(e.substr(7)))}));try{r+(9e4*s[l].start||0)<0&&(r+=8589934592),h-=r,n=d,i=parseInt(n.substr(-3)),a=parseInt(n.substr(-6,2)),u=parseInt(n.substr(-9,2)),c=n.length>9?parseInt(n.substr(0,n.indexOf(":"))):0,y=(e.isFinite(i)&&e.isFinite(a)&&e.isFinite(u)&&e.isFinite(c)?(i+=1e3*a,i+=6e4*u,i+=36e5*c):-1)/1e3,g=h/9e4,-1===y&&(p=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){p=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(A=!1)}var n,i,a,u,c;v.parse(t+"\n")})),v.flush()}};t.default=s}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=window.performance,o=window.XMLHttpRequest,a=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new o;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,o=this.stats,a=this.context,s=this.config;if(!o.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(i.now(),o.trequest)),4===r){var l=t.status;if(l>=200&&l<300){o.tload=Math.max(o.tfirst,i.now());var u,c=void 0;u="arraybuffer"===a.responseType?(c=t.response).byteLength:(c=t.responseText).length,o.loaded=o.total=u;var p={url:t.responseURL,data:c};this.callbacks.onSuccess(p,o,a,t)}else o.retry>=s.maxRetry||l>=400&&l<499?(n.logger.error(l+" while loading "+a.url),this.callbacks.onError({code:l,text:t.statusText},a,t)):(n.logger.warn(l+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),o.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.prototype.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();t.default=a}}).default},e.exports=n())},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i=function(){function e(e){return null==e?String(e):V[H.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function o(t){return"object"==e(t)}function a(e){return o(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function s(e){return"number"==typeof e.length}function l(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in C?C[e]:C[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function c(e,t){return"number"!=typeof t||R[l(e)]?t:t+"px"}function p(e){return"children"in e?P.call(e.children):_.map(e.childNodes,(function(e){return 1==e.nodeType?e:void 0}))}function f(e,t){var r,n=e?e.length:0;for(r=0;n>r;r++)this[r]=e[r];this.length=n,this.selector=t||""}function d(e,t,r){for(b in t)r&&(a(t[b])||q(t[b]))?(a(t[b])&&!a(e[b])&&(e[b]={}),q(t[b])&&!q(e[b])&&(e[b]=[]),d(e[b],t[b],r)):t[b]!==v&&(e[b]=t[b])}function h(e,t){return null==t?_(e):_(e).filter(t)}function y(e,r,n,i){return t(r)?r.call(e,n,i):r}function g(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function m(e,t){var r=e.className||"",n=r&&r.baseVal!==v;return t===v?n?r.baseVal:r:void(n?r.baseVal=t:e.className=t)}function A(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?_.parseJSON(e):e):e}catch(t){return e}}var v,b,_,E,w,k,T=[],S=T.concat,z=T.filter,P=T.slice,O=window.document,L={},C={},R={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,I=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,M=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,x=/^(?:body|html)$/i,j=/([A-Z])/g,B=["val","css","html","text","data","width","height","offset"],N=O.createElement("table"),F=O.createElement("tr"),U={tr:O.createElement("tbody"),tbody:N,thead:N,tfoot:N,td:F,th:F,"*":O.createElement("div")},Y=/complete|loaded|interactive/,G=/^[\w-]*$/,V={},H=V.toString,Q={},K=O.createElement("div"),W={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},q=Array.isArray||function(e){return e instanceof Array};return Q.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var r=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(r)return r.call(e,t);var n,i=e.parentNode,o=!i;return o&&(i=K).appendChild(e),n=~Q.qsa(i,t).indexOf(e),o&&K.removeChild(e),n},w=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},k=function(e){return z.call(e,(function(t,r){return e.indexOf(t)==r}))},Q.fragment=function(e,t,r){var n,i,o;return I.test(e)&&(n=_(O.createElement(RegExp.$1))),n||(e.replace&&(e=e.replace(M,"<$1></$2>")),t===v&&(t=D.test(e)&&RegExp.$1),t in U||(t="*"),(o=U[t]).innerHTML=""+e,n=_.each(P.call(o.childNodes),(function(){o.removeChild(this)}))),a(r)&&(i=_(n),_.each(r,(function(e,t){B.indexOf(e)>-1?i[e](t):i.attr(e,t)}))),n},Q.Z=function(e,t){return new f(e,t)},Q.isZ=function(e){return e instanceof Q.Z},Q.init=function(e,r){var n;if(!e)return Q.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&D.test(e))n=Q.fragment(e,RegExp.$1,r),e=null;else{if(r!==v)return _(r).find(e);n=Q.qsa(O,e)}else{if(t(e))return _(O).ready(e);if(Q.isZ(e))return e;if(q(e))n=function(e){return z.call(e,(function(e){return null!=e}))}(e);else if(o(e))n=[e],e=null;else if(D.test(e))n=Q.fragment(e.trim(),RegExp.$1,r),e=null;else{if(r!==v)return _(r).find(e);n=Q.qsa(O,e)}}return Q.Z(n,e)},(_=function(e,t){return Q.init(e,t)}).extend=function(e){var t,r=P.call(arguments,1);return"boolean"==typeof e&&(t=e,e=r.shift()),r.forEach((function(r){d(e,r,t)})),e},Q.qsa=function(e,t){var r,n="#"==t[0],i=!n&&"."==t[0],o=n||i?t.slice(1):t,a=G.test(o);return e.getElementById&&a&&n?(r=e.getElementById(o))?[r]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:P.call(a&&!n&&e.getElementsByClassName?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},_.contains=O.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},_.type=e,_.isFunction=t,_.isWindow=n,_.isArray=q,_.isPlainObject=a,_.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},_.inArray=function(e,t,r){return T.indexOf.call(t,e,r)},_.camelCase=w,_.trim=function(e){return null==e?"":String.prototype.trim.call(e)},_.uuid=0,_.support={},_.expr={},_.noop=function(){},_.map=function(e,t){var r,n,i,o=[];if(s(e))for(n=0;n<e.length;n++)null!=(r=t(e[n],n))&&o.push(r);else for(i in e)null!=(r=t(e[i],i))&&o.push(r);return function(e){return e.length>0?_.fn.concat.apply([],e):e}(o)},_.each=function(e,t){var r,n;if(s(e)){for(r=0;r<e.length;r++)if(!1===t.call(e[r],r,e[r]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},_.grep=function(e,t){return z.call(e,t)},window.JSON&&(_.parseJSON=JSON.parse),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){V["[object "+t+"]"]=t.toLowerCase()})),_.fn={constructor:Q.Z,length:0,forEach:T.forEach,reduce:T.reduce,push:T.push,sort:T.sort,splice:T.splice,indexOf:T.indexOf,concat:function(){var e,t,r=[];for(e=0;e<arguments.length;e++)t=arguments[e],r[e]=Q.isZ(t)?t.toArray():t;return S.apply(Q.isZ(this)?this.toArray():this,r)},map:function(e){return _(_.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return _(P.apply(this,arguments))},ready:function(e){return Y.test(O.readyState)&&O.body?e(_):O.addEventListener("DOMContentLoaded",(function(){e(_)}),!1),this},get:function(e){return e===v?P.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return T.every.call(this,(function(t,r){return!1!==e.call(t,r,t)})),this},filter:function(e){return t(e)?this.not(this.not(e)):_(z.call(this,(function(t){return Q.matches(t,e)})))},add:function(e,t){return _(k(this.concat(_(e,t))))},is:function(e){return this.length>0&&Q.matches(this[0],e)},not:function(e){var r=[];if(t(e)&&e.call!==v)this.each((function(t){e.call(this,t)||r.push(this)}));else{var n="string"==typeof e?this.filter(e):s(e)&&t(e.item)?P.call(e):_(e);this.forEach((function(e){n.indexOf(e)<0&&r.push(e)}))}return _(r)},has:function(e){return this.filter((function(){return o(e)?_.contains(this,e):_(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!o(e)?e:_(e)},last:function(){var e=this[this.length-1];return e&&!o(e)?e:_(e)},find:function(e){var t=this;return e?"object"==r(e)?_(e).filter((function(){var e=this;return T.some.call(t,(function(t){return _.contains(t,e)}))})):1==this.length?_(Q.qsa(this[0],e)):this.map((function(){return Q.qsa(this,e)})):_()},closest:function(e,t){var n=this[0],o=!1;for("object"==r(e)&&(o=_(e));n&&!(o?o.indexOf(n)>=0:Q.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return _(n)},parents:function(e){for(var t=[],r=this;r.length>0;)r=_.map(r,(function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0}));return h(t,e)},parent:function(e){return h(k(this.pluck("parentNode")),e)},children:function(e){return h(this.map((function(){return p(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||P.call(this.childNodes)}))},siblings:function(e){return h(this.map((function(e,t){return z.call(p(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return _.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,r;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,L[e]||(t=O.createElement(e),O.body.appendChild(t),r=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==r&&(r="block"),L[e]=r),L[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var r=t(e);if(this[0]&&!r)var n=_(e).get(0),i=n.parentNode||this.length>1;return this.each((function(t){_(this).wrapAll(r?e.call(this,t):i?n.cloneNode(!0):n)}))},wrapAll:function(e){if(this[0]){_(this[0]).before(e=_(e));for(var t;(t=e.children()).length;)e=t.first();_(e).append(this)}return this},wrapInner:function(e){var r=t(e);return this.each((function(t){var n=_(this),i=n.contents(),o=r?e.call(this,t):e;i.length?i.wrapAll(o):n.append(o)}))},unwrap:function(){return this.parent().each((function(){_(this).replaceWith(_(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return this.each((function(){var t=_(this);(e===v?"none"==t.css("display"):e)?t.show():t.hide()}))},prev:function(e){return _(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return _(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var r=this.innerHTML;_(this).empty().append(y(this,e,t,r))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var r=y(this,e,t,this.textContent);this.textContent=null==r?"":""+r})):0 in this?this[0].textContent:null},attr:function(e,t){var r;return"string"!=typeof e||1 in arguments?this.each((function(r){if(1===this.nodeType)if(o(e))for(b in e)g(this,b,e[b]);else g(this,e,y(this,t,r,this.getAttribute(e)))})):this.length&&1===this[0].nodeType?!(r=this[0].getAttribute(e))&&e in this[0]?this[0][e]:r:v},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){g(this,e)}),this)}))},prop:function(e,t){return e=W[e]||e,1 in arguments?this.each((function(r){this[e]=y(this,t,r,this[e])})):this[0]&&this[0][e]},data:function(e,t){var r="data-"+e.replace(j,"-$1").toLowerCase(),n=1 in arguments?this.attr(r,t):this.attr(r);return null!==n?A(n):v},val:function(e){return 0 in arguments?this.each((function(t){this.value=y(this,e,t,this.value)})):this[0]&&(this[0].multiple?_(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var r=_(this),n=y(this,e,t,r.offset()),i=r.offsetParent().offset(),o={top:n.top-i.top,left:n.left-i.left};"static"==r.css("position")&&(o.position="relative"),r.css(o)}));if(!this.length)return null;if(!_.contains(O.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,r){if(arguments.length<2){var n,i=this[0];if(!i)return;if(n=getComputedStyle(i,""),"string"==typeof t)return i.style[w(t)]||n.getPropertyValue(t);if(q(t)){var o={};return _.each(t,(function(e,t){o[t]=i.style[w(t)]||n.getPropertyValue(t)})),o}}var a="";if("string"==e(t))r||0===r?a=l(t)+":"+c(t,r):this.each((function(){this.style.removeProperty(l(t))}));else for(b in t)t[b]||0===t[b]?a+=l(b)+":"+c(b,t[b])+";":this.each((function(){this.style.removeProperty(l(b))}));return this.each((function(){this.style.cssText+=";"+a}))},index:function(e){return e?this.indexOf(_(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&T.some.call(this,(function(e){return this.test(m(e))}),u(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){E=[];var r=m(this);y(this,e,t,r).split(/\s+/g).forEach((function(e){_(this).hasClass(e)||E.push(e)}),this),E.length&&m(this,r+(r?" ":"")+E.join(" "))}})):this},removeClass:function(e){return this.each((function(t){if("className"in this){if(e===v)return m(this,"");E=m(this),y(this,e,t,E).split(/\s+/g).forEach((function(e){E=E.replace(u(e)," ")})),m(this,E.trim())}}))},toggleClass:function(e,t){return e?this.each((function(r){var n=_(this);y(this,e,r,m(this)).split(/\s+/g).forEach((function(e){(t===v?!n.hasClass(e):t)?n.addClass(e):n.removeClass(e)}))})):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===v?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===v?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),r=this.offset(),n=x.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(_(e).css("margin-top"))||0,r.left-=parseFloat(_(e).css("margin-left"))||0,n.top+=parseFloat(_(t[0]).css("border-top-width"))||0,n.left+=parseFloat(_(t[0]).css("border-left-width"))||0,{top:r.top-n.top,left:r.left-n.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||O.body;e&&!x.test(e.nodeName)&&"static"==_(e).css("position");)e=e.offsetParent;return e}))}},_.fn.detach=_.fn.remove,["width","height"].forEach((function(e){var t=e.replace(/./,(function(e){return e[0].toUpperCase()}));_.fn[e]=function(r){var o,a=this[0];return r===v?n(a)?a["inner"+t]:i(a)?a.documentElement["scroll"+t]:(o=this.offset())&&o[e]:this.each((function(t){(a=_(this)).css(e,y(this,r,t,a[e]()))}))}})),["after","prepend","before","append"].forEach((function(t,r){var n=r%2;_.fn[t]=function(){var t,i,o=_.map(arguments,(function(r){return"object"==(t=e(r))||"array"==t||null==r?r:Q.fragment(r)})),a=this.length>1;return o.length<1?this:this.each((function(e,t){i=n?t:t.parentNode,t=0==r?t.nextSibling:1==r?t.firstChild:2==r?t:null;var s=_.contains(O.documentElement,i);o.forEach((function(e){if(a)e=e.cloneNode(!0);else if(!i)return _(e).remove();i.insertBefore(e,t),s&&function e(t,r){r(t);for(var n=0,i=t.childNodes.length;i>n;n++)e(t.childNodes[n],r)}(e,(function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)}))}))}))},_.fn[n?t+"To":"insert"+(r?"Before":"After")]=function(e){return _(e)[t](this),this}})),Q.Z.prototype=f.prototype=_.fn,Q.uniq=k,Q.deserializeValue=A,_.zepto=Q,_}();window.Zepto=i,void 0===window.$&&(window.$=i),function(e){function t(e){return e._zid||(e._zid=p++)}function r(e,r,i,o){if((r=n(r)).ns)var a=function(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}(r.ns);return(y[t(e)]||[]).filter((function(e){return!(!e||r.e&&e.e!=r.e||r.ns&&!a.test(e.ns)||i&&t(e.fn)!==t(i)||o&&e.sel!=o)}))}function n(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function i(e,t){return e.del&&!m&&e.e in A||!!t}function o(e){return v[e]||m&&A[e]||e}function a(r,a,s,u,p,f,d){var h=t(r),g=y[h]||(y[h]=[]);a.split(/\s/).forEach((function(t){if("ready"==t)return e(document).ready(s);var a=n(t);a.fn=s,a.sel=p,a.e in v&&(s=function(t){var r=t.relatedTarget;return!r||r!==this&&!e.contains(this,r)?a.fn.apply(this,arguments):void 0}),a.del=f;var h=f||s;a.proxy=function(e){if(!(e=l(e)).isImmediatePropagationStopped()){e.data=u;var t=h.apply(r,e._args==c?[e]:[e].concat(e._args));return!1===t&&(e.preventDefault(),e.stopPropagation()),t}},a.i=g.length,g.push(a),"addEventListener"in r&&r.addEventListener(o(a.e),a.proxy,i(a,d))}))}function s(e,n,a,s,l){var u=t(e);(n||"").split(/\s/).forEach((function(t){r(e,t,a,s).forEach((function(t){delete y[u][t.i],"removeEventListener"in e&&e.removeEventListener(o(t.e),t.proxy,i(t,l))}))}))}function l(t,r){return(r||!t.isDefaultPrevented)&&(r||(r=t),e.each(w,(function(e,n){var i=r[e];t[e]=function(){return this[n]=b,i&&i.apply(r,arguments)},t[n]=_})),(r.defaultPrevented!==c?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function u(e){var t,r={originalEvent:e};for(t in e)E.test(t)||e[t]===c||(r[t]=e[t]);return l(r,e)}var c,p=1,f=Array.prototype.slice,d=e.isFunction,h=function(e){return"string"==typeof e},y={},g={},m="onfocusin"in window,A={focus:"focusin",blur:"focusout"},v={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",e.event={add:a,remove:s},e.proxy=function(r,n){var i=2 in arguments&&f.call(arguments,2);if(d(r)){var o=function(){return r.apply(n,i?i.concat(f.call(arguments)):arguments)};return o._zid=t(r),o}if(h(n))return i?(i.unshift(r[n],r),e.proxy.apply(null,i)):e.proxy(r[n],r);throw new TypeError("expected function")},e.fn.bind=function(e,t,r){return this.on(e,t,r)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,r,n){return this.on(e,t,r,n,1)};var b=function(){return!0},_=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,r){return this.on(t,e,r)},e.fn.undelegate=function(e,t,r){return this.off(t,e,r)},e.fn.live=function(t,r){return e(document.body).delegate(this.selector,t,r),this},e.fn.die=function(t,r){return e(document.body).undelegate(this.selector,t,r),this},e.fn.on=function(t,r,n,i,o){var l,p,y=this;return t&&!h(t)?(e.each(t,(function(e,t){y.on(e,r,n,t,o)})),y):(h(r)||d(i)||!1===i||(i=n,n=r,r=c),(i===c||!1===n)&&(i=n,n=c),!1===i&&(i=_),y.each((function(c,d){o&&(l=function(e){return s(d,e.type,i),i.apply(this,arguments)}),r&&(p=function(t){var n,o=e(t.target).closest(r,d).get(0);return o&&o!==d?(n=e.extend(u(t),{currentTarget:o,liveFired:d}),(l||i).apply(o,[n].concat(f.call(arguments,1)))):void 0}),a(d,t,i,n,r,p||l)})))},e.fn.off=function(t,r,n){var i=this;return t&&!h(t)?(e.each(t,(function(e,t){i.off(e,r,t)})),i):(h(r)||d(n)||!1===n||(n=r,r=c),!1===n&&(n=_),i.each((function(){s(this,t,n,r)})))},e.fn.trigger=function(t,r){return(t=h(t)||e.isPlainObject(t)?e.Event(t):l(t))._args=r,this.each((function(){t.type in A&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,r)}))},e.fn.triggerHandler=function(t,n){var i,o;return this.each((function(a,s){(i=u(h(t)?e.Event(t):t))._args=n,i.target=s,e.each(r(s,t.type||t),(function(e,t){return o=t.proxy(i),!i.isImmediatePropagationStopped()&&void 0}))})),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){h(e)||(e=(t=e).type);var r=document.createEvent(g[e]||"Events"),n=!0;if(t)for(var i in t)"bubbles"==i?n=!!t[i]:r[i]=t[i];return r.initEvent(e,n,!0),l(r)}}(i),function(e){function t(t,r,n){var i=e.Event(r);return e(t).trigger(i,n),!i.isDefaultPrevented()}function r(e,r,n,i){return e.global?t(r||g,n,i):void 0}function n(t){t.global&&0==e.active++&&r(t,null,"ajaxStart")}function i(t){t.global&&!--e.active&&r(t,null,"ajaxStop")}function o(e,t){var n=t.context;return!1!==t.beforeSend.call(n,e,t)&&!1!==r(t,n,"ajaxBeforeSend",[e,t])&&void r(t,n,"ajaxSend",[e,t])}function a(e,t,n,i){var o=n.context,a="success";n.success.call(o,e,a,t),i&&i.resolveWith(o,[e,a,t]),r(n,o,"ajaxSuccess",[t,n,e]),l(a,t,n)}function s(e,t,n,i,o){var a=i.context;i.error.call(a,n,t,e),o&&o.rejectWith(a,[n,t,e]),r(i,a,"ajaxError",[n,i,e||t]),l(t,n,i)}function l(e,t,n){var o=n.context;n.complete.call(o,t,e),r(n,o,"ajaxComplete",[t,n]),i(n)}function u(){}function c(e){return e&&(e=e.split(";",2)[0]),e&&(e==_?"html":e==b?"json":A.test(e)?"script":v.test(e)&&"xml")||"text"}function p(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(t,r,n,i){return e.isFunction(r)&&(i=n,n=r,r=void 0),e.isFunction(n)||(i=n,n=void 0),{url:t,data:r,success:n,dataType:i}}var d,h,y=0,g=window.document,m=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,A=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,b="application/json",_="text/html",E=/^\s*$/,w=g.createElement("a");w.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,r){if(!("type"in t))return e.ajax(t);var n,i,l=t.jsonpCallback,u=(e.isFunction(l)?l():l)||"jsonp"+ ++y,c=g.createElement("script"),p=window[u],f=function(t){e(c).triggerHandler("error",t||"abort")},d={abort:f};return r&&r.promise(d),e(c).on("load error",(function(o,l){clearTimeout(i),e(c).off().remove(),"error"!=o.type&&n?a(n[0],d,t,r):s(null,l||"error",d,t,r),window[u]=p,n&&e.isFunction(p)&&p(n[0]),p=n=void 0})),!1===o(d,t)?(f("abort"),d):(window[u]=function(){n=arguments},c.src=t.url.replace(/\?(.+)=\?/,"?$1="+u),g.head.appendChild(c),t.timeout>0&&(i=setTimeout((function(){f("timeout")}),t.timeout)),d)},e.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:b,xml:"application/xml, text/xml",html:_,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var r,i,l=e.extend({},t||{}),f=e.Deferred&&e.Deferred();for(d in e.ajaxSettings)void 0===l[d]&&(l[d]=e.ajaxSettings[d]);n(l),l.crossDomain||((r=g.createElement("a")).href=l.url,r.href=r.href,l.crossDomain=w.protocol+"//"+w.host!=r.protocol+"//"+r.host),l.url||(l.url=window.location.toString()),(i=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,i)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=p(t.url,t.data),t.data=void 0)}(l);var y=l.dataType,m=/\?.+=\?/.test(l.url);if(m&&(y="jsonp"),!1!==l.cache&&(t&&!0===t.cache||"script"!=y&&"jsonp"!=y)||(l.url=p(l.url,"_="+Date.now())),"jsonp"==y)return m||(l.url=p(l.url,l.jsonp?l.jsonp+"=?":!1===l.jsonp?"":"callback=?")),e.ajaxJSONP(l,f);var A,v=l.accepts[y],b={},_=function(e,t){b[e.toLowerCase()]=[e,t]},k=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:window.location.protocol,T=l.xhr(),S=T.setRequestHeader;if(f&&f.promise(T),l.crossDomain||_("X-Requested-With","XMLHttpRequest"),_("Accept",v||"*/*"),(v=l.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(v)),(l.contentType||!1!==l.contentType&&l.data&&"GET"!=l.type.toUpperCase())&&_("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(h in l.headers)_(h,l.headers[h]);if(T.setRequestHeader=_,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=u,clearTimeout(A);var t,r=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==k){y=y||c(l.mimeType||T.getResponseHeader("content-type")),t=T.responseText;try{"script"==y?(0,eval)(t):"xml"==y?t=T.responseXML:"json"==y&&(t=E.test(t)?null:e.parseJSON(t))}catch(e){r=e}r?s(r,"parsererror",T,l,f):a(t,T,l,f)}else s(T.statusText||null,T.status?"error":"abort",T,l,f)}},!1===o(T,l))return T.abort(),s(null,"abort",T,l,f),T;if(l.xhrFields)for(h in l.xhrFields)T[h]=l.xhrFields[h];var z=!("async"in l)||l.async;for(h in T.open(l.type,l.url,z,l.username,l.password),b)S.apply(T,b[h]);return l.timeout>0&&(A=setTimeout((function(){T.onreadystatechange=u,T.abort(),s(null,"timeout",T,l,f)}),l.timeout)),T.send(l.data?l.data:null),T},e.get=function(){return e.ajax(f.apply(null,arguments))},e.post=function(){var t=f.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=f.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,r,n){if(!this.length)return this;var i,o=this,a=t.split(/\s/),s=f(t,r,n),l=s.success;return a.length>1&&(s.url=a[0],i=a[1]),s.success=function(t){o.html(i?e("<div>").html(t.replace(m,"")).find(i):t),l&&l.apply(o,arguments)},e.ajax(s),this};var k=encodeURIComponent;e.param=function(t,r){var n=[];return n.add=function(t,r){e.isFunction(r)&&(r=r()),null==r&&(r=""),this.push(k(t)+"="+k(r))},function t(r,n,i,o){var a,s=e.isArray(n),l=e.isPlainObject(n);e.each(n,(function(n,u){a=e.type(u),o&&(n=i?o:o+"["+(l||"object"==a||"array"==a?n:"")+"]"),!o&&s?r.add(u.name,u.value):"array"==a||!i&&"object"==a?t(r,u,i,n):r.add(n,u)}))}(n,t,r),n.join("&").replace(/%20/g,"+")}}(i),(n=i).Callbacks=function(e){e=n.extend({},e);var t,r,i,o,a,s,l=[],u=!e.once&&[],c=function n(c){for(t=e.memory&&c,r=!0,s=o||0,o=0,a=l.length,i=!0;l&&a>s;++s)if(!1===l[s].apply(c[0],c[1])&&e.stopOnFalse){t=!1;break}i=!1,l&&(u?u.length&&n(u.shift()):t?l.length=0:p.disable())},p={add:function(){if(l){var r=l.length;(function t(r){n.each(r,(function(r,n){"function"==typeof n?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&t(n)}))})(arguments),i?a=l.length:t&&(o=r,c(t))}return this},remove:function(){return l&&n.each(arguments,(function(e,t){for(var r;(r=n.inArray(t,l,r))>-1;)l.splice(r,1),i&&(a>=r&&--a,s>=r&&--s)})),this},has:function(e){return!(!l||!(e?n.inArray(e,l)>-1:l.length))},empty:function(){return a=l.length=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||r&&!u||(t=[e,(t=t||[]).slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments)},fired:function(){return!!r}};return p},function(e){function t(r){var n=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],i="pending",o={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var r=arguments;return t((function(t){e.each(n,(function(n,i){var s=e.isFunction(r[n])&&r[n];a[i[1]]((function(){var r=s&&s.apply(this,arguments);if(r&&e.isFunction(r.promise))r.promise().done(t.resolve).fail(t.reject).progress(t.notify);else{var n=this===o?t.promise():this,a=s?[r]:arguments;t[i[0]+"With"](n,a)}}))})),r=null})).promise()},promise:function(t){return null!=t?e.extend(t,o):o}},a={};return e.each(n,(function(e,t){var r=t[2],s=t[3];o[t[1]]=r.add,s&&r.add((function(){i=s}),n[1^e][2].disable,n[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?o:this,arguments),this},a[t[0]+"With"]=r.fireWith})),o.promise(a),r&&r.call(a,a),a}var r=Array.prototype.slice;e.when=function(n){var i,o,a,s=r.call(arguments),l=s.length,u=0,c=1!==l||n&&e.isFunction(n.promise)?l:0,p=1===c?n:t(),f=function(e,t,n){return function(o){t[e]=this,n[e]=arguments.length>1?r.call(arguments):o,n===i?p.notifyWith(t,n):--c||p.resolveWith(t,n)}};if(l>1)for(i=new Array(l),o=new Array(l),a=new Array(l);l>u;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(f(u,a,s)).fail(p.reject).progress(f(u,o,i)):--c;return c||p.resolveWith(a,s),p.promise()},e.Deferred=t}(i),function(e){function t(){u=null,p.last&&(p.el.trigger("longTap"),p={})}function r(){u&&clearTimeout(u),u=null}function n(){a&&clearTimeout(a),s&&clearTimeout(s),l&&clearTimeout(l),u&&clearTimeout(u),a=s=l=u=null,p={}}function i(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function o(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var a,s,l,u,c,p={};e(document).ready((function(){var f,d,h,y,g=0,m=0;"MSGesture"in window&&((c=new MSGesture).target=document.body),e(document).bind("MSGestureEnd",(function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(p&&p.el&&p.el.trigger("swipe"),p&&p.el&&p.el.trigger("swipe"+t))})).on("touchstart MSPointerDown pointerdown",(function(r){(!(y=o(r,"down"))||i(r))&&(h=y?r:r.touches[0],r.touches&&1===r.touches.length&&p.x2&&(p.x2=void 0,p.y2=void 0),f=Date.now(),d=f-(p.last||f),p.el=e("tagName"in h.target?h.target:h.target.parentNode),a&&clearTimeout(a),p.x1=h.pageX,p.y1=h.pageY,d>0&&250>=d&&(p.isDoubleTap=!0),p.last=f,u=setTimeout(t,750),c&&y&&c.addPointer(r.pointerId))})).on("touchmove MSPointerMove pointermove",(function(e){(!(y=o(e,"move"))||i(e))&&(h=y?e:e.touches[0],r(),p.x2=h.pageX,p.y2=h.pageY,g+=Math.abs(p.x1-p.x2),m+=Math.abs(p.y1-p.y2))})).on("touchend MSPointerUp pointerup",(function(t){(!(y=o(t,"up"))||i(t))&&(r(),p.x2&&Math.abs(p.x1-p.x2)>30||p.y2&&Math.abs(p.y1-p.y2)>30?l=setTimeout((function(){p&&p.el&&p.el.trigger("swipe"),p&&p.el&&p.el.trigger("swipe"+function(e,t,r,n){return Math.abs(e-t)>=Math.abs(r-n)?e-t>0?"Left":"Right":r-n>0?"Up":"Down"}(p.x1,p.x2,p.y1,p.y2)),p={}}),0):"last"in p&&(30>g&&30>m?s=setTimeout((function(){var t=e.Event("tap");t.cancelTouch=n,p.el&&p.el.trigger(t),p.isDoubleTap?(p.el&&p.el.trigger("doubleTap"),p={}):a=setTimeout((function(){a=null,p.el&&p.el.trigger("singleTap"),p={}}),250)}),0):p={}),g=m=0)})).on("touchcancel MSPointerCancel pointercancel",n),e(window).on("scroll",n)})),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach((function(t){e.fn[t]=function(e){return this.on(t,e)}}))}(i),function(e){function t(t){return!(!(t=e(t)).width()&&!t.height())&&"none"!==t.css("display")}function r(e,t){e=e.replace(/=#\]/g,'="#"]');var r,n,i=s.exec(e);if(i&&i[2]in a&&(r=a[i[2]],n=i[3],e=i[1],n)){var o=Number(n);n=isNaN(o)?n.replace(/^["']|["']$/g,""):o}return t(e,r,n)}var n=e.zepto,i=n.qsa,o=n.matches,a=e.expr[":"]={visible:function(){return t(this)?this:void 0},hidden:function(){return t(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(e){return 0===e?this:void 0},last:function(e,t){return e===t.length-1?this:void 0},eq:function(e,t,r){return e===r?this:void 0},contains:function(t,r,n){return e(this).text().indexOf(n)>-1?this:void 0},has:function(e,t,r){return n.qsa(this,r).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),l=/^\s*>/,u="Zepto"+ +new Date;n.qsa=function(t,o){return r(o,(function(r,a,s){try{var c;!r&&a?r="*":l.test(r)&&(c=e(t).addClass(u),r="."+u+" "+r);var p=i(t,r)}catch(e){throw console.error("error performing selector: %o",o),e}finally{c&&c.removeClass(u)}return a?n.uniq(e.map(p,(function(e,t){return a.call(e,t,p,s)}))):p}))},n.matches=function(e,t){return r(t,(function(t,r,n){return!(t&&!o(e,t)||r&&r.call(e,null,n)!==e)}))}}(i),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(e){return null}}}}(),e.exports=i},function(e,t,r){"use strict";var n=r(9);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&d(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function p(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}var a=h((function(){t(i,n)}));"error"===a.status&&n(a.value)}function h(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}e.exports=u,u.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(i);return this.state!==l?p(r,this.state===s?e:t,this.outcome):this.queue.push(new c(r,e,t)),r},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){p(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){p(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=h(f,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,l=-1,u=new this(i);++l<r;)c(e[l],l);return u;function c(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==r||n||(n=!0,o.resolve(u,a))}),(function(e){n||(n=!0,o.reject(u,e))}))}},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n,a=-1,s=new this(i);++a<t;)n=e[a],this.resolve(n).then((function(e){r||(r=!0,o.resolve(s,e))}),(function(e){r||(r=!0,o.reject(s,e))}));return s}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=18)}([function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n),o=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[r].concat(o).concat([i]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){var n={},i=function(e){var t;return function(){return void 0===t&&(t=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),t}}(),o=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),a=null,s=0,l=[],u=r(58);function c(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=n[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(g(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(g(i.parts[a],t));n[i.id]={id:i.id,refs:1,parts:s}}}}function p(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}function f(e,t){var r=o(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),l.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertAt.before,r);r.insertBefore(t,i)}}function d(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function h(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=r.nc;n&&(e.attrs.nonce=n)}return y(t,e.attrs),f(e,t),t}function y(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function g(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var l=s++;r=a||(a=h(t)),n=A.bind(null,r,l,!1),i=A.bind(null,r,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),f(e,t),t}(t),n=function(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=u(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,r,t),i=function(){d(r),r.href&&URL.revokeObjectURL(r.href)}):(r=h(t),n=function(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){d(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=p(e,t);return c(r,t),function(e){for(var i=[],o=0;o<r.length;o++){var a=r[o];(s=n[a.id]).refs--,i.push(s)}for(e&&c(p(e,t),t),o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete n[s.id]}}}};var m=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}();function A(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=m(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{}}return n(e,[{key:"name",get:function(){return this.constructor.name}},{key:"tagName",get:function(){return this.options.tagName||"div"}},{key:"attributes",get:function(){return{class:this.options.className}}}]),n(e,[{key:"attr",value:function(e,t){if(void 0===t)return this.element.getAttribute(e);this.element.setAttribute(e,t)}},{key:"show",value:function(){this.removeClass("ad_runner_ui_hide")}},{key:"hide",value:function(){this.addClass("ad_runner_ui_hide")}},{key:"on",value:function(e,t){this.element.addEventListener(e,t)}},{key:"off",value:function(e,t){this.element.removeEventListener(e,t)}},{key:"html",value:function(e){this.element.innerHTML=e}},{key:"style",value:function(e,t){this.element.style[e]=t}},{key:"appendChild",value:function(e){this.element.appendChild(e.element||e)}},{key:"hasClass",value:function(e){return this.element.classList?this.element.classList.contains(e):new RegExp("(^|\\s)"+e+"($|\\s)").test(this.element.className)}},{key:"addClass",value:function(e){this.element.classList?this.element.classList.add(e):this.hasClass(this.element,e)||(this.element.className=(this.element.className+" "+e).trim())}},{key:"removeClass",value:function(e){this.element.classList?this.element.classList.remove(e):this.element.className=this.element.className.split(/\s+/).filter((function(t){return t!==e})).join(" ")}},{key:"render",value:function(){var e=this;this.element=this.options.element||document.createElement(this.tagName),Object.keys(this.attributes).forEach((function(t){var r=e.attributes[t];void 0!==r&&e.element.setAttribute(t,r)}))}},{key:"remove",value:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null}}]),e}()},function(e,t,r){var n=r(5).DEFAULT_MAX_VOLUME;function i(e,t){return String(e).toUpperCase().indexOf(String(t).toUpperCase())>-1}function o(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}e.exports={contentVolumeToAdVolume:function(e){return e?e/100*n:0},convertToSecond:function(e){var t=isNaN(e)?e.split(":"):e;return 60*+t[0]*60+60*+t[1]+ +t[2]},isImaAd:function(e){return!i(e.system.name,"celtra")&&(i(e.system.name,"google")||i(e.system.version,"google"))},isFacebookAd:function(e){return i(e.system.name,"facebook")||i(e.system.version,"facebook")},isAsiaSmartAd:function(e){return e.vastAdTagURI&&i(e.vastAdTagURI,"adnetwork.adasiaholdings.com")||i(e.system.name,"smart")||i(e.system.name,"wootag")},formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;var r=(e=parseInt(e/1e3))%60,n=(e=parseInt(e/60))%60,i=(e=parseInt(e/60))%24,o=parseInt(e/24),a="";return o&&o>0&&(a+=o+":",i<1&&(a+="00:")),(i&&i>0||t)&&(a+=("0"+i).slice(-2)+":"),a+=("0"+n).slice(-2)+":",(a+=("0"+r).slice(-2)).trim()},createPromiseDefer:o,createTimeoutPromise:function(e){var t=o(),r=setTimeout(t.resolve,e);return t.promise.cancel=function(){return clearTimeout(r)},t.promise},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Opera Mini/i.test(navigator.userAgent)}}},function(e,t,r){"use strict";var n=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdViewableImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoProgress","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError","AdClickBackground","AdClickThruVpaid"];n.forEach((function(e){n[e]=e})),Object.freeze(n),e.exports=n},function(e,t){e.exports={AD_POSITION:{preroll:"pre-roll",midroll:"mid-roll",postroll:"post-roll"},AD_DONE_REASON:{timeout:"timeout",error:"error",ended:"ended",skipped:"skipped"},COUNT_DOWN_DURATION:5,PRELOAD_DURATION:7,DEFAULT_MIDROLL_START_TIME:10,DEFAULT_SKIP_TIMEOUT:3,DEFAULT_AD_START_TIMEOUT:10,DEFAULT_NON_LINEAR_DURATION:15,DEFAULT_MAX_VOLUME:.75}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"object"===r(e)&&null!==e}function a(e){return void 0===e}n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(a(r=this._events[e]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),n=(u=r.slice()).length,l=0;l<n;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},e.exports=n},function(e,t,r){e.exports={VastPlayer:r(20),VAST:r(12),EventEmitter:r(6)}},function(e,t,r){"use strict";var n=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];n.forEach((function(e){this[e.toUpperCase()]=e}),n),Object.freeze(n),e.exports=n},function(e,t,r){"use strict";var n=r(37),i=document.createElement("video");r(14),t.isDesktop=!/Android|Silk|Mobile|PlayBook/.test(n.navigator.userAgent),t.canPlay=function(e){switch(i.canPlayType(e)){case"probably":return 2;case"maybe":return 1;default:return 0}},Object.freeze(t)},function(e,t,r){"use strict";function n(e,t,r){t.on(e,(function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];r.emit.apply(r,[e].concat(t))}))}function i(e,t,r){r.forEach((function(r){t.listeners(r).length>0&&n(r,e,t)})),t.on("newListener",(function(i){r.indexOf(i)>-1&&t.listeners(i).length<1&&n(i,e,t)}))}function o(e){this.events=e.slice(),this.__private__={target:null,source:null}}o.prototype.from=function(e){return this.__private__.source=e,this.__private__.target&&i(e,this.__private__.target,this.events),this},o.prototype.to=function(e){return this.__private__.target=e,this.__private__.source&&i(this.__private__.source,e,this.events),this},e.exports=o},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}e.exports=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adContainerElement=t,this.videoContent=r,this.logger=n.logger,this.onAdStarted=n.onAdStarted,this.onAdStopped=n.onAdStopped,this.onAdLoaded=n.onAdLoaded,this.options=i,this.logger.debug(this.name,"initializing")}return n(e,[{key:"selfControl",get:function(){return!1}},{key:"canClickThrough",get:function(){return!1}},{key:"viewDetailLink",get:function(){return""}}]),n(e,[{key:"loadAd",value:function(e){throw new Error("this must be overridden")}},{key:"initUserAction",value:function(){throw new Error("this must be overridden")}},{key:"canRun",value:function(e){throw new Error("this must be overridden")}},{key:"start",value:function(){throw new Error("this must be overridden")}},{key:"stop",value:function(){throw new Error("this must be overridden")}},{key:"pause",value:function(){throw new Error("this must be overridden")}},{key:"resume",value:function(){throw new Error("this must be overridden")}},{key:"cancel",value:function(){throw new Error("this must be overridden")}},{key:"viewDetail",value:function(){throw new Error("this must be overridden")}},{key:"setVolume",value:function(e){throw new Error("this must be overridden")}},{key:"setAdData",value:function(e){this.adData=e}},{key:"getVolume",value:function(){throw new Error("this must be overridden")}},{key:"isPaused",value:function(){throw new Error("this must be overridden")}},{key:"getRemainingTime",value:function(){throw new Error("this must be overridden")}},{key:"getDuration",value:function(){throw new Error("this must be overridden")}},{key:"getSkipOffset",value:function(){throw new Error("this must be overridden")}},{key:"resize",value:function(e,t,r){}},{key:"destroy",value:function(){throw new Error("this must be overridden")}}]),e}()},function(e,t,r){e.exports=r(21)},function(e,t,r){"use strict";e.exports=function(){return Array.prototype.slice.call(arguments).reduce((function(e,t){return Object.keys(t||{}).reduce((function(e,r){return e[r]=t[r],e}),e)}),{})}},function(e,t){var r={JAVASCRIPT:"application/javascript",FLASH:"application/x-shockwave-flash"};Object.freeze(r),e.exports=r},function(e,t,r){"use strict";var n=r(39),i=r(8);function o(e,t){var r=this;n.call(this,Math.floor(e.duration||0),t),this.video=e,[i.PLAYING,i.PAUSE,i.TIMEUPDATE].forEach((function(t){return e.addEventListener(t,(function(){return r.tick()}),!1)}))}o.prototype=Object.create(n.prototype),o.prototype._getState=function(){return{playing:!this.video.paused,currentTime:this.video.currentTime}},e.exports=o},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=r(46),a=r(52),s=r(53),l=(r(3).createPromiseDefer,[o,a,s]),u=function(){},c=function(){function e(t){var r=this,n=t.linearAdContainer,i=t.nonLinearAdContainer,o=t.contentPlayer,a=t.logger,c=t.onAdStarted,p=t.onAdStopped,f=t.onAdSkipped,d=t.onAdLoaded,h=t.onResetState,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=a,this.props={onAdStarted:c,onAdStopped:p,onAdSkipped:f,onAdLoaded:d||u,onResetState:h||u},this.loadPromise=null,this.currentPlayer=null,this.adData=null,this.adStarted=!1,this.adCancelled=!1,this.adVolume=1,this.lastError=null,this.players=l.map((function(e){return new e(e===s?i:n,o,{logger:a,onAdStarted:r._onAdStarted.bind(r),onAdStopped:r._onAdStopped.bind(r),onAdSkipped:r._onAdSkipped.bind(r),onAdLoaded:r._onAdLoaded.bind(r)},y)}))}return i(e,[{key:"name",get:function(){return"Player"}}]),i(e,[{key:"initUserAction",value:function(){this.players.forEach((function(e){return e.initUserAction()}))}},{key:"load",value:function(e){return this.adData=e,this.adCancelled=!1,this.adStarted=!1,this.lastError=null,this.loadPromise=this._loadAd(),this.loadPromise}},{key:"start",value:function(){this._playAd()}},{key:"stop",value:function(){this.currentPlayer.stop()}},{key:"skip",value:function(){this.currentPlayer.skip()}},{key:"cancel",value:function(){this.adCancelled=!0,this.currentPlayer&&this.currentPlayer.cancel()}},{key:"pause",value:function(){this.currentPlayer.pause()}},{key:"resume",value:function(){this.currentPlayer.resume()}},{key:"destroy",value:function(){this.players.forEach((function(e){return e.destroy()}))}},{key:"resize",value:function(e,t,r){this.players.forEach((function(n){return n.resize(e,t,r)}))}},{key:"setVolume",value:function(e){this.adVolume=e,this.currentPlayer&&this.currentPlayer.setVolume(e)}},{key:"getCurrentPlayer",value:function(){return this.currentPlayer}},{key:"isPlayingLinearAd",value:function(){return this.currentPlayer instanceof o?this.currentPlayer.currentAd&&this.currentPlayer.currentAd.isLinear():!(this.currentPlayer instanceof s)}},{key:"isGoogleNonLinearAd",value:function(){return this.currentPlayer instanceof o&&this.currentPlayer.currentAd&&!this.currentPlayer.currentAd.isLinear()}},{key:"_onAdStarted",value:function(){this.adStarted=!0,this.props.onAdStarted()}},{key:"_onAdStopped",value:function(e,t,r,n){var i=n||this.adData;this.adStarted||r?this.props.onAdStopped(e,t,i):(this.lastError=e,this._playAd(this.adIndex+1))}},{key:"_onAdSkipped",value:function(){this.props.onAdSkipped()}},{key:"_onAdLoaded",value:function(){this.props.onAdLoaded()}},{key:"_loadAd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.logger.debug(this.name,"_loadAd | adIndex",t," | adData",this.adData.ads),this.adCancelled)return Promise.resolve();var r=this.adData.ads[t];if(this.currentPlayer=null,!r)return t>0&&this.logger.debug(this.name,"no ad left to load"),Promise.resolve();this.logger.debug(this.name,"loading ad item ".concat(t+1,"/").concat(this.adData.ads.length),r);var n=this._getPlayerForAd(r);return n?n.loadAd(r,this.adData).then((function(){return e.logger.debug(e.name,"ad loaded"),{player:n,adIndex:t}})).catch((function(r){return e.logger.error(e.name,"error while loading ad, falling back to next item:",r),e._loadAd(t+1)})):(this.logger.debug(this.name,"no player to play this ad, trying next item",r),this._loadAd(t+1))}},{key:"_playAd",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.adCancelled||(this.loadPromise?(e=this.loadPromise,delete this.loadPromise):e=this._loadAd(r),e.then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.player,n=e.adIndex;t.adCancelled||(r?(t.adIndex=n,t.currentPlayer=r,r.setAdData(t.adData),r.setVolume(t.adVolume),r.start()):t._onAdStopped(t.lastError||new Error("Cannot run ad"),null,!0))})))}},{key:"_getPlayerForAd",value:function(e){return this.players.filter((function(t){return t.canRun(e)}))[0]}}]),e}();e.exports=c},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=r(2),u=r(3).formatTime;r(62),e.exports=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(t).call(this,e))).render(),"string"!=typeof r.options.template)throw new Error("options.template is required");return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l),a(t,[{key:"attributes",get:function(){return{class:this.options.className||"ad_runner_ui_countdown"}}}]),a(t,[{key:"update",value:function(e){this._setRemainingTime(e)}},{key:"_setRemainingTime",value:function(e){var t;t=this.options.formatTime?u(e):Math.round(e),this.element.textContent=this.options.template.replace("%s",t)}}]),t}()},function(e,t,r){e.exports={Runner:r(19),Player:r(16),VAST:r(7).VAST}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=r(7).VAST,a=r(16),s=r(60),l=r(61),u=r(87),c=r(3),p=c.contentVolumeToAdVolume,f=c.convertToSecond,d=c.createPromiseDefer,h=c.createTimeoutPromise,y=r(5),g=y.AD_POSITION,m=y.AD_DONE_REASON,A=y.DEFAULT_AD_START_TIMEOUT,v=y.DEFAULT_MIDROLL_START_TIME,b=1,_=2,E=3,w=4,k={startTimeout:A,skipTimeout:y.DEFAULT_SKIP_TIMEOUT,countdownPlay:!0,defaultMidrollStartTime:v,getPoster:function(){},showSlideBlack:!1,removeAdmarkOnError:!0,autoPlayAdBreaks:!0,autoPlay:!1,mute:!1},T=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plugin=t,this.options=this._normalizeOption(r);var n=t.getAdContainers(),i=t.getContentPlayer();this.player=new a({linearAdContainer:n.linear,nonLinearAdContainer:n.nonLinear,contentPlayer:i,logger:this.logger,onAdStarted:this._onAdStarted.bind(this),onAdStopped:this._onAdStopped.bind(this),onAdSkipped:this._onAdSkipped.bind(this),onAdLoaded:this._onAdLoaded.bind(this),onResetState:this._onResetState.bind(this)},this.options),this.scheduler=new s({logger:this.logger,prepareAd:this._prepareAd.bind(this),beforePlayAd:this._beforePlayAd.bind(this),preloadAd:this._preloadAd.bind(this),loadAd:this._loadAd.bind(this),playAd:this._playAd.bind(this)}),this.adUi=new l(this.options,n),this.adMark=new u(n.adMark),this.state=b,this.adsLoaded=!1,this.adDeferred=null}return i(e,[{key:"name",get:function(){return"Runner"}},{key:"logger",get:function(){return this.plugin.getLogger()}},{key:"viewDetailLink",get:function(){var e=this.player.getCurrentPlayer();return e&&e.viewDetailLink}}]),i(e,[{key:"onContentProgress",value:function(e){this.scheduler.onContentProgress(e)}},{key:"onContentEnded",value:function(){this.scheduler.onContentEnded(),this.adMark.removeMarkItems()}},{key:"onUserAction",value:function(){this.player.initUserAction()}},{key:"onAdsDataLoaded",value:function(e){var t=this;this.logger.debug(this.name,"onAdsDataLoaded",e),this._normalizeAdsData(e),this.scheduler.populateAdsData(e),this.plugin.getContentMetadata().then((function(e){t.scheduler&&t.scheduler.dataLoadingDeferred.promise.then((function(){t.adMark.render(e.duration,t.scheduler.midrollAds)}))}))}},{key:"destroy",value:function(){this.player.destroy(),this.player=null,this.scheduler=null,this.adUi.remove(),this.adMark.remove()}},{key:"resize",value:function(e,t,r){this.player.resize(e,t,r)}},{key:"pauseAd",value:function(){this.player.pause()}},{key:"resumeAd",value:function(){this.player.resume()}},{key:"stopAd",value:function(){this.player.stop()}},{key:"showPosterAndPlayIcon",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.adUi.skipButton,r=t.poster,n=t.playIcon;e?(t.loadPoster(),r.show(),n.show()):(r.hide(),n.hide())}},{key:"_onResetState",value:function(){this.state=b,this.adsLoaded=!1}},{key:"_preloadAd",value:function(e){this.adsLoaded||this._loadAd(e)}},{key:"_prepareAd",value:function(e,t){this.options.countdownPlay&&this.adsLoaded&&(this.adUi.countdownToPlay.show(),this.adUi.countdownToPlay.update(t))}},{key:"_beforePlayAd",value:function(e,t){var r=this;this.adUi.countdownToPlay.hide(),e||!this.adsLoaded?setTimeout((function(){r.adsLoaded&&(r.options.showSlideBlack?(r.plugin.pauseForAd(),r.logger.debug(r.name,"Showing black screen"),r.adUi.slideBlack.show(),r.adUi.slideBlack.fadeIn(),setTimeout((function(){t()}),2e3)):t())}),1e3):t()}},{key:"_loadAd",value:function(e){this.state===b&&(this.adsLoaded=!1,this.state=_,this.adDeferred=d(),this.logger.debug(this.name,"loading ad",e),this.player.load(e))}},{key:"_playAd",value:function(e,t){var r=this;return this._loadAd(e),this.logger.debug(this.name,"play ad",e),this.state=E,this.adMetadata=t,this.adUi.onAdWillStart(),this.plugin.onAdWillStart&&this.plugin.onAdWillStart(),this.adTimeoutPromise=h(1e3*this.options.startTimeout),this.adTimeoutPromise.then((function(){r.logger.debug(r.name,"cannot start ad within ".concat(r.options.startTimeout,"s, cancelling...")),r.player&&r.player.cancel(),r._onAdStopped(null,m.timeout,e)})),this.player.setVolume(p(this.plugin.getContentVolume())),this.player.start(),this.adDeferred.promise}},{key:"_onAdStarted",value:function(){var e=this;this._mayPauseContent();var t=this.player.getCurrentPlayer();this.state=w,this.adTimeoutPromise.cancel(),this.adUi.slideBlack.fadeOut(),setTimeout((function(){e.adUi.slideBlack.hide()}),400),this.adUi.setPlayer(t),this.adUi.onAdStarted(this.adMetadata),this.plugin.onAdStarted&&this.plugin.onAdStarted(),this.logger.debug(this.name,"ad started by player:",t.name),this.player.isPlayingLinearAd()||(this.state=b,this.adDeferred.resolve(),this._mayResumeContent())}},{key:"_onAdStopped",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.ended,n=arguments.length>2?arguments[2]:void 0;e&&(r=m.error),this.player.isGoogleNonLinearAd()&&this.plugin.hideLinearAdContainer&&this.plugin.hideLinearAdContainer(),(!e||e&&this.options.removeAdmarkOnError)&&n._completeAd&&n._completeAd(),this.state,t.adTimeoutPromise.cancel(),t.adUi.onAdStopped(),t.plugin.onAdStopped&&t.plugin.onAdStopped(r),t._mayResumeContent(),t.logger.debug(t.name,"ad stopped:",r,e||""),t.adUi.slideBlack.hide(),this.state=b,this.adsLoaded=!1,this.adDeferred.resolve()}},{key:"_onAdSkipped",value:function(){this.plugin.onAdSkipped&&this.plugin.onAdSkipped()}},{key:"_onAdLoaded",value:function(){this.adsLoaded=!0}},{key:"_mayPauseContent",value:function(){this.player.isPlayingLinearAd()?this.plugin.pauseForAd():this.player.isGoogleNonLinearAd()&&(this.plugin.showLinearAdContainer&&this.plugin.showLinearAdContainer(),this.adUi.onAdStopped())}},{key:"_mayResumeContent",value:function(){this.adMetadata.order===this.adMetadata.total&&this.plugin.resumeAfterAd()}},{key:"_normalizeAdsData",value:function(e){var t=this;e.forEach((function(e){e.ads=o.pojoFromXML(e.server.tag).ads,delete e.server,Object.assign(e,t._buildAdOption(e))}))}},{key:"_buildAdOption",value:function(e){var t={position:e.position,skipoffset:e.skipoffset?f(e.skipoffset):-1,startTime:e.startTime?f(e.startTime):0};return t.position!==g.midroll||t.startTime||(this.logger.warn(this.name,"no startTime specified on mid-roll ad, will use default startTime:",this.options.defaultMidrollStartTime),t.startTime=this.options.defaultMidrollStartTime),t}},{key:"_normalizeOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},k,e,{getPoster:this.plugin.getPoster&&this.plugin.getPoster.bind(this.plugin)})}}]),e}();e.exports=T},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(6),o=r(12),a=r(35),s=r(40),l=r(4),u=r(10),c=r(43),p=r(44),f=r(9),d=r(45);function h(e){return e}function y(){return new Error("VASTPlayer not ready.")}function g(e){return function(){var t=this,r=this.__private__.player;return this.ready?r[e]?r[e].apply(r,arguments).then((function(){return t})):Promise.resolve().then((function(){return t})):Promise.reject(y())}}function m(e){return{get:function(){if(!this.ready)throw y();return this.__private__.player[e]},set:function(t){if(!this.ready)throw y();return this.__private__.player[e]=t}}}function A(e,t){return String(e).toUpperCase().indexOf(String(t).toUpperCase())>-1}function v(e,t){var r=this;i.call(this),this.__private__={container:e,config:function e(){var t,r,i,o,a={},s=arguments.length;for(t=0;t<s;t++)for(i in r=arguments[t]||{})o=r[i],void 0===a[i]&&(a[i]=o),"object"===n(o)&&(a[i]=e(a[i],o));return a}(t,{vast:{resolveWrappers:!0,maxRedirects:5},tracking:{mapper:h},width:480,height:270}),vast:null,ready:!1,player:null,isVPAID:!1,vpaidVendor:null,video:p()};var o=this;this.on(l.AdClickThru,(function(e,t,r){var n=e||o.viewDetailLink;r&&n&&(this.__private__.player.alreadyEmitViewable||(this.__private__.player.alreadyEmitViewable=!0,this.__private__.player.emit(l.AdViewableImpression)),window.open(n));var i=o.vast.get("ads[0].creatives[0].videoClicks.clickTrackings");i&&i.length>0&&i.map((function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.send(null)}))})),this.on(l.AdClickBackground,(function(){var e=o.__private__.player;e.video&&f.isDesktop&&(e.video.paused?r.resumeAd():r.pauseAd())}))}v.prototype=Object.create(i.prototype),Object.defineProperties(v.prototype,{container:{get:function(){return this.__private__.container}},config:{get:function(){return this.__private__.config}},vast:{get:function(){return this.__private__.vast}},ready:{get:function(){return this.__private__.ready}},paused:{get:function(){return this.__private__.video.paused}},video:{set:function(e){return this.__private__.video=e}},isVPAID:{get:function(){return this.__private__.isVPAID}},isAsiaSmartAd:{get:function(){return(e=this.vast.ads[0]).vastAdTagURI&&A(e.vastAdTagURI,"adnetwork.adasiaholdings.com")||A(e.system.name,"smart")||A(e.system.name,"wootag");var e}},vpaidVendor:{get:function(){return this.__private__.vpaidVendor}},viewDetailLink:{get:function(){return this.vast&&this.vast.get("ads[0].creatives[0].videoClicks.clickThrough")}},adRemainingTime:m("adRemainingTime"),adDuration:m("adDuration"),adVolume:m("adVolume")}),v.prototype.load=function(e){var t=this,r=this.config.vast;return("string"==typeof e?o.fetch(e,r):new o(e).resolveWrappers()).then((function(e){var r=function(){var r=e.filter("ads[0].creatives[0].mediaFiles",a.canPlayMediaFile),n=e.filter("ads[0].creatives[0].mediaFiles",s.canPlayMediaFile);if(n.length>0)return t.__private__.isVPAID=!1,t.__private__.vpaidVendor=null,{player:new s(t.container,t.__private__.video,t.config),mediaFiles:n};if(r.length>0)return t.__private__.isVPAID=!0,t.__private__.vpaidVendor=d.getVpaidVendor(r),{player:new a(t.container,t.__private__.video,t.config,t),mediaFiles:r};throw new Error("There are no playable <MediaFile>s.")}(),n=r.player,i=r.mediaFiles,o={adParameters:e.get("ads[0].creatives[0].parameters"),progressEvents:e.get("ads[0].creatives[0].trackingEvents").filter((function(e){return"progress"==e.event}))},p=[].concat(e.map("ads[0].impressions",(function(e){return{event:"impression",uri:e.uri}})),e.map("ads[0].viewableImpressions",(function(e){return{event:"viewableImpression",uri:e.uri}})),e.map("ads[0].errors",(function(e){return{event:"error",uri:e}})),e.get("ads[0].creatives[0].trackingEvents"),e.map("ads[0].creatives[0].videoClicks.clickTrackings",(function(e){return{event:"clickThrough",uri:e}}))),f=new u(l),h=new c(p,t.config.tracking.mapper);return f.from(n).to(t),t.__private__.vast=e,t.__private__.player=n,t.isAsiaSmartAd&&(n.adDuration=e.ads[0].creatives[0].duration),n.load(i,o).then((function(){h.track(n)}))})).then((function(){return t.__private__.ready=!0,t.emit("ready"),t})).catch((function(e){throw t.emit("error",e),e}))},v.prototype.startAd=g("startAd"),v.prototype.stopAd=g("stopAd"),v.prototype.skipAd=g("skipAd"),v.prototype.pauseAd=g("pauseAd"),v.prototype.resumeAd=g("resumeAd"),v.prototype.init=function(){var e=this.__private__.video,t=this.__private__.container;return e.init(t)},v.vpaidSWFLocation="https://ajax.cdnjs.com/ajax/libs/videojs-vast-vpaid/2.0.2/VPAIDFlash.swf",e.exports=v},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(22),o=r(23),a=r(24),s=r(13),l=r(25),u=Array.prototype.push,c=r(26),p={inline:function(e){a({description:null,survey:null},e)},wrapper:function(){}},f={linear:function(e){a({trackingEvents:[],parameters:null,videoClicks:null},e),(e.mediaFiles||[]).forEach((function(e){a({id:null,bitrate:null,scalable:null,maintainAspectRatio:null,apiFramework:null},e)}))},companions:function(e){e.companions.forEach((function(e){a({expandedWidth:null,expandedHeight:null,apiFramework:null,trackingEvents:[],clickThrough:null,altText:null,parameters:null},e)}))},nonLinear:function(e){a({trackingEvents:[]},e),e.ads.forEach((function(e){a({id:null,expandedWidth:null,expandedHeight:null,scalable:null,maintainAspectRatio:null,minSuggestedDuration:null,apiFramework:null,clickThrough:null,parameters:null},e)}))}},d=["ads.celtra.com"];function h(){}function y(e,t){var r=e.indexOf("redirectUrl=");if(r>-1&&d.some((function(t){return e.indexOf(t)>-1}))){var n=e.slice(r+"redirectUrl=".length);return e=e.slice(0,r),i.get(e,t).catch(h).then((function(){return i.get(n,t)}))}return i.get(e,t)}function g(e){o(e,this,!0),this.ads.forEach((function(e){a({system:{version:null},errors:[]},e),e.creatives.forEach((function(e){a({id:null,sequence:null,adID:null},e),f[e.type](e)})),p[e.type](e)})),this.__private__={wrappers:[],inlines:[]}}Object.defineProperties(g.prototype,{wrappers:{get:function(){var e=this.__private__.wrappers;return e.length=0,u.apply(e,this.filter("ads",(function(e){return"wrapper"===e.type}))),e}},inlines:{get:function(){var e=this.__private__.inlines;return e.length=0,u.apply(e,this.filter("ads",(function(e){return"inline"===e.type}))),e}}}),g.prototype.get=function(e){return((e||"").match(/[^\[\]\.]+/g)||[]).reduce((function(e,t){return e?e[t]:void 0}),this)},g.prototype.set=function(e,t){var r=function(){for(var t,r=/[^\[\]\.]+/g,n=[];t=r.exec(e);)n.push({token:t[0],type:o(t,t.index+t[0].length)});return n}(),n=r.pop(),i=r.reduce((function(e,t){return e[t.token]||(e[t.token]=new t.type)}),this);function o(e,t){switch(e.input.charAt(t)){case".":return Object;case"[":return Array;case"]":return o(e,t+1);default:return null}}if(!e)throw new Error("prop must be specified.");return i[n.token]=t},g.prototype.map=function(e,t){var r=this.get(e)||[],n=r.length,i=[];if(!(r instanceof Array))return i;for(var o=0;o<n;o++)i.push(t.call(this,r[o],o,r));return i},g.prototype.filter=function(e,t){var r=this.get(e)||[],n=r.length,i=[];if(!(r instanceof Array))return i;for(var o=0;o<n;o++)t.call(this,r[o],o,r)&&i.push(r[o]);return i},g.prototype.find=function(e,t){var r=this.get(e)||[],n=r.length;if(r instanceof Array)for(var i=0;i<n;i++)if(t.call(this,r[i],i,r))return r[i]},g.prototype.toPOJO=function(){var e=JSON.parse(JSON.stringify(this));return delete e.__private__,e},g.prototype.copy=function(){return new this.constructor(this.toPOJO())},g.prototype.resolveWrappers=function(){var e=isNaN(arguments[0])?1/0:arguments[0],t="function"==typeof arguments[0]?arguments[0]:arguments[1],r=this.constructor,n=this;return 0===e?Promise.reject(new Error("Too many redirects were made.")):l(Promise.all(this.map("wrappers",(function(e){return Promise.resolve(y(e.vastAdTagURI,{withCredentials:!0})).then((function(t){return{wrapper:e,response:r.pojoFromXML(t.data).ads}}))}))).then((function(e){var t=e.map((function(e){return e.wrapper})),i=e.map((function(e){return e.response}));return new r(s(n.toPOJO(),{ads:n.map("ads",(function(e){var r=t.indexOf(e),n=t[r],o=i[r];return o?o.map(function(e,t){var r=function(e){return{linear:e.filter(n("linear")),companions:e.filter(n("companions")),nonLinear:e.filter(n("nonLinear"))}}(e.creatives);function n(e){return function(t){return t.type===e}}return a(e.impressions,t.impressions),a(e.viewableImpressions,t.viewableImpressions),a(e.errors,t.errors),t.creatives.forEach((function(e){a(r[e.type].shift()||{},e)})),u.apply(t.creatives,"wrapper"!==t.type?[]:["linear","companions","nonLinear"].reduce((function(e,t){return e.concat(r[t])}),[])),t}.bind(null,n)):[e]})).reduce((function(e,t){return e.concat(t)}))}))})).then((function(t){return t.get("wrappers.length")>0?t.resolveWrappers(e-1):t})),t)},g.prototype.toXML=function(){var e=this.validate();if(!e.valid)throw new Error("VAST is invalid: "+e.reasons.join(", "));return c(this)},g.prototype.validate=function(){var e=this,t=[],r={inline:function(t){var r={linear:function(e){a(e,{exists:["duration"],atLeastOne:["mediaFiles"]})},companions:function(t){e.get(t("companions")).forEach((function(e,r){a((function(e){return t("companions["+r+"]."+e)}),{exists:[],atLeastOne:["resources"]})}))},nonLinear:function(t){e.get(t("ads")).forEach((function(e,r){a((function(e){return t("ads["+r+"]."+e)}),{exists:[],atLeastOne:["resources"]})}))}};a(t,{exists:["title"],atLeastOne:["creatives"]}),e.get(t("creatives")).forEach((function(e,n){function i(e){return t("creatives["+n+"]."+e)}a(i,{exists:["type"],atLeastOne:[]}),(r[e.type]||h)(i)}))},wrapper:function(e){a(e,{exists:["vastAdTagURI"],atLeastOne:[]})}};function n(e,r){e||t.push(r)}function i(t){n(e.get(t),t+" is required")}function o(t){n(e.get(t+".length")>0,t+" must contain at least one value")}function a(e,t){t.exists.map(e).forEach(i),t.atLeastOne.map(e).forEach(o)}return a((function(e){return e}),{exists:[],atLeastOne:["ads"]}),this.get("ads").forEach((function(e,t){function n(e){return"ads["+t+"]."+e}a(n,{exists:["type","system.name"],atLeastOne:["impressions"]}),(r[e.type]||h)(n)})),{valid:0===t.length,reasons:0===t.length?null:t}},g.pojoFromXML=r(29),g.fetch=function(e){var t="object"===n(arguments[1])&&arguments[1]||{},r="function"==typeof arguments[2]?arguments[2]:arguments[1],i=this;return l(Promise.resolve(y(e,{headers:t.headers||{}})).then((function(e){var r=new i(i.pojoFromXML(e.data));return t.resolveWrappers?r.resolveWrappers(t.maxRedirects):r})),r)},e.exports=g},function(e,t){e.exports={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.withCredentials,n=t.headers;return new Promise((function(t,i){var o=new XMLHttpRequest;o.open("GET",e),o.withCredentials=Boolean(r),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?t({data:o.responseText}):i(new Error("Unexpected status code:",o.status)))},n&&Object.keys(n).forEach((function(e){o.setRequestHeader(e,n[e])})),o.send()}))}}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=Array.prototype.push;e.exports=function e(t){var r="object"===n(arguments[1])?arguments[1]:null,o="boolean"==typeof arguments[1]?arguments[1]:arguments[2];return Object(t)!==t?t:t instanceof Array?function(t,r,n){var o=r||[];return i.apply(o,n?t.map((function(t){return e(t,null,!0)})):t),o}(t,r,o):function(t,r,n){return Object.keys(t).reduce((function(r,i){return r[i]=n?e(t[i],null,!0):t[i],r}),r||{})}(t,r,o)}},function(e,t,r){"use strict";var n=Array.prototype.push;function i(e){return Object(e)===e}function o(e){return e instanceof Array}e.exports=function e(t,r){return[t,r].every(o)?(n.apply(r,t.filter((function(e){return r.indexOf(e)<0}))),r):Object.keys(t).reduce((function(r,n){return[t[n],r[n]].every(i)&&e(t[n],r[n]),n in r||(r[n]=t[n]),r}),r)}},function(e,t,r){"use strict";e.exports=function(e,t){return"function"!=typeof t||e.then((function(e){t(null,e)}),(function(e){t(e)})),e}},function(e,t,r){"use strict";var n=r(27),i=r(28),o={linear:function(e){return{tag:"Linear",children:[{tag:"Duration",value:n(e.duration)},a(e.trackingEvents),l(e)].concat(e.videoClicks?[{tag:"VideoClicks",children:[{tag:"ClickThrough",value:e.videoClicks.clickThrough,cdata:!0}].concat(e.videoClicks.clickTrackings.map((function(e){return{tag:"ClickTracking",value:e,cdata:!0}})),e.videoClicks.customClicks.map((function(e){return{tag:"CustomClick",attributes:{id:e.id},value:e.uri,cdata:!0}})))}]:[],[{tag:"MediaFiles",children:e.mediaFiles.map((function(e){return{tag:"MediaFile",attributes:{id:e.id,width:e.width,height:e.height,bitrate:e.bitrate,type:e.type,delivery:e.delivery,scalable:e.scalable,maintainAspectRatio:e.maintainAspectRatio,apiFramework:e.apiFramework},value:e.uri,cdata:!0}}))}])}},companions:function(e){return{tag:"CompanionAds",children:e.companions.map((function(e){return{tag:"Companion",attributes:{id:e.id,width:e.width,height:e.height,expandedWidth:e.expandedWidth,expandedHeight:e.expandedHeight,apiFramework:e.apiFramework},children:s(e.resources).concat([a(e.trackingEvents),{tag:"CompanionClickThrough",value:e.clickThrough,cdata:!0},{tag:"AltText",value:e.altText},l(e)])}}))}},nonLinear:function(e){return{tag:"NonLinearAds",children:e.ads.map((function(e){return{tag:"NonLinear",attributes:{id:e.id,width:e.width,height:e.height,expandedWidth:e.expandedWidth,expandedHeight:e.expandedHeight,scalable:e.scalable,maintainAspectRatio:e.maintainAspectRatio,minSuggestedDuration:n(e.minSuggestedDuration),apiFramework:e.apiFramework},children:s(e.resources).concat([{tag:"NonLinearClickThrough",value:e.clickThrough,cdata:!0},l(e)])}})).concat([a(e.trackingEvents)])}}};function a(e){return{tag:"TrackingEvents",children:e.map((function(e){return{tag:"Tracking",attributes:{event:e.event},value:e.uri,cdata:!0}}))}}function s(e){return e.map((function(e){return{tag:function(t){switch(e.type){case"static":return"StaticResource";case"iframe":return"IFrameResource";case"html":return"HTMLResource"}}(),attributes:{creativeType:e.creativeType},value:e.data,cdata:!0}}))}function l(e){return{tag:"AdParameters",value:e.parameters}}e.exports=function(e){return i({tag:"VAST",attributes:{version:e.get("version")},children:e.map("ads",(function(e){return{tag:"Ad",attributes:{id:e.id},children:[{tag:function(){switch(e.type){case"inline":return"InLine";case"wrapper":return"Wrapper"}}(),children:[{tag:"AdSystem",attributes:{version:e.system.version},value:e.system.name},{tag:"AdTitle",value:e.title},{tag:"Description",value:e.description},{tag:"Survey",value:e.survey,cdata:!0},{tag:"VASTAdTagURI",value:e.vastAdTagURI,cdata:!0}].concat(e.errors.map((function(e){return{tag:"Error",value:e,cdata:!0}})),e.impressions.map((function(e){return{tag:"Impression",value:e.uri,cdata:!0,attributes:{id:e.id}}})),[{tag:"ViewableImpression",children:e.viewableImpressions.map((function(e){return{tag:"Viewable",value:e.uri,cdata:!0,attributes:{id:e.id}}}))}],[{tag:"Creatives",children:e.creatives.map((function(e){return{tag:"Creative",attributes:{id:e.id,sequence:e.sequence,AdID:e.adID},children:[(t=e.type,o[t](e))]};var t})),required:!0}])}]}}))},!0)}},function(e,t,r){"use strict";function n(e){return(e>9?"":"0")+e.toString()}e.exports=function(e){return Number(e)!==e?null:[Math.floor(e/60/60),Math.floor(e/60%60),Math.floor(e%60%60)].map(n).join(":")}},function(e,t,r){"use strict";function n(e){return null!=e}function i(e){return void 0!==e?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function o(e){return e.cdata?function(e){return(void 0!==e?function(e){for(var t,r,n=[],i=/]]>/g,o=0;t=i.exec(e);)r=t.index+2,n.push(t.input.substring(o,r)),o=r;return n.push(e.substring(o,e.length)),n}(String(e)):[""]).reduce((function(e,t){return e+"<![CDATA["+t+"]]>"}),"")}(e.value):i(e.value)}e.exports=function(e,t){return['<?xml version="1.0" encoding="UTF-8"?>'].concat(function e(t,r,a){var s=t.tag,l=t.attributes||{},u=Object.keys(l),c=t.children||[],p=t.value,f=c.length>0,d=u.every((function(e){return n(l[e])}))&&u.length>0,h=n(p)||f||d,y=function(e){for(var t="";e--;)t+=" ";return t}(r),g="<"+s+Object.keys(l).reduce((function(e,t){return a&&!n(l[t])?e:e+" "+t+'="'+i(l[t])+'"'}),"")+">",m="</"+s+">";return!a||h||t.required?f?[y+g].concat(t.children.reduce((function(t,n){return t.concat(e(n,r+4,a))}),[]),[y+m]):[y+g+o(t)+m]:[]}(e,0,t)).join("\n")}},function(e,t,r){"use strict";var n=r(30),i=r(31),o=r(32),a=r(13),s=r(33),l=r(34),u={linear:function(e){var t=p(e.find("Duration")),r=p(e.find("Linear")),n=e.find("Tracking"),a=p(e.find("AdParameters")),s=e.find("VideoClicks")[0],u=e.find("MediaFile");return{type:"linear",skipOffset:r.attributes.skipoffset,duration:i(t.value)||void 0,trackingEvents:n.map((function(e){var t={event:e.attributes.event,uri:e.value};return"progress"===e.attributes.event&&(t.offset=i(e.attributes.offset)),t})),parameters:a.value,videoClicks:s&&function(){var e=p(s.find("ClickThrough")),t=s.find("ClickTracking"),r=s.find("CustomClick");return{clickThrough:e.value,clickTrackings:t.map((function(e){return e.value})),customClicks:r.map((function(e){return{id:e.attributes.id,uri:e.value}}))}}(),mediaFiles:u.map((function(e){var t=e.attributes;return{id:t.id,delivery:t.delivery,type:t.type,uri:e.value,bitrate:l(t.bitrate),width:l(t.width),height:l(t.height),scalable:o(t.scalable),maintainAspectRatio:o(t.maintainAspectRatio),apiFramework:t.apiFramework}}))}},companions:function(e){return{type:"companions",companions:e.find("Companion").map((function(e){var t=e.find("Tracking"),r=p(e.find("CompanionClickThrough")),n=p(e.find("StaticResource")),i=p(e.find("AltText")),o=p(e.find("AdParameters"));return{id:e.attributes.id,width:l(e.attributes.width),height:l(e.attributes.height),expandedWidth:l(e.attributes.expandedWidth),expandedHeight:l(e.attributes.expandedHeight),apiFramework:e.attributes.apiFramework,resources:function(e){return e.find("URL").map((function(e){return{data:e.value}}))}(e),staticResource:n.value,trackingEvents:t.map((function(e){return{event:e.attributes.event,uri:e.value}})),clickThrough:r.value,altText:i.value,parameters:o.value}}))}},nonLinear:function(e){var t=e.find("NonLinear"),r=e.find("Tracking");return{type:"nonLinear",ads:t.map((function(e){var t=p(e.find("NonLinearClickThrough")),r=p(e.find("StaticResource")),n=p(e.find("AdParameters"));return{id:e.attributes.id,width:e.attributes.width,height:e.attributes.height,expandedWidth:l(e.attributes.expandedWidth),expandedHeight:l(e.attributes.expandedHeight),scalable:o(e.attributes.scalable),maintainAspectRatio:o(e.attributes.maintainAspectRatio),minSuggestedDuration:i(e.attributes.minSuggestedDuration)||void 0,apiFramework:e.attributes.apiFramework,resources:r.value,clickThrough:t.value,parameters:n.value}})),trackingEvents:r.map((function(e){return{event:e.attributes.event,uri:e.value}}))}}},c={inline:function(e){var t=p(e.find("AdTitle")),r=p(e.find("Description")),n=p(e.find("Survey"));return{type:"inline",title:t.value,description:r.value,survey:n.value}},wrapper:function(e){return{type:"wrapper",vastAdTagURI:p(e.find("VASTAdTagURI")).value}}};function p(e){return e[0]||{attributes:{}}}e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"VAST",r=n(e);if(!r(t)[0])throw new Error("["+e+"] is not a valid VAST document.");return s({version:p(r(t)).attributes.version,ads:r("Ad").map((function(e){var t=p(e.find("Wrapper,InLine")).tag.toLowerCase(),r=p(e.find("AdSystem")),n=p(e.find("AdTitle")),i=p(e.find("Description")),o=e.find("Error"),s=e.find("Impression"),f=e.find("ViewableImpression Viewable"),d=e.find("Creative").filter((function(e){return e.children().length}));return a({id:e.attributes.id,system:{name:r.value,version:r.attributes.version},advertiser:{title:n.value,description:i.value},errors:o.map((function(e){return e.value})),impressions:s.map((function(e){return{uri:e.value,id:e.attributes.id}})),viewableImpressions:f.map((function(e){return{uri:e.value,id:e.attributes.id}})),creatives:d.map((function(e){var t=function(){switch(p(e.find("Linear,CompanionAds,NonLinearAds")).tag){case"Linear":return"linear";case"CompanionAds":return"companions";case"NonLinearAds":return"nonLinear"}}();return a({id:e.attributes.id,sequence:l(e.attributes.sequence),adID:e.attributes.AdID},u[t](e))}))},c[t](e))}))},!0)}},function(e,t,r){"use strict";var n=Array.prototype.map,i=Array.prototype.filter,o=Array.prototype.reduce,a=new DOMParser;function s(e){var t=e.childElementCount>0;return{tag:e.tagName,value:t?null:e.textContent,attributes:o.call(e.attributes,(function(e,t){return e[t.name]=t.value,e}),{}),find:function(t){return l(e.querySelectorAll(t))},children:function(){return i.call(e.childNodes,(function(e){return e instanceof Element})).map(s)}}}function l(e){return n.call(e,s)}e.exports=function(e){var t=a.parseFromString(e,"application/xml");return function(e){return l(t.querySelectorAll(e))}}},function(e,t,r){"use strict";e.exports=function(e){var t=(e||"").match(/^(\d\d):(\d\d):(\d\d)$/);return t&&t.slice(1,4).map(parseFloat).reduce((function(e,t,r){return e+t*Math.pow(60,Math.abs(r-2))}),0)}},function(e,t,r){"use strict";e.exports=function(e){switch((e||"").toLowerCase()){case"true":return!0;case"false":return!1}}},function(e,t,r){"use strict";e.exports=function e(t,r){return Object(t)!==t?t:Object.keys(t).reduce((function(n,i){return r&&t[i]instanceof Array?n[i]=t[i].filter((function(e){return void 0!==e})).map((function(t){return e(t,!0)})):r&&t[i]instanceof Object?n[i]=e(t[i],!0):void 0!==t[i]&&(n[i]=t[i]),n}),{})}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){if(/string|number|boolean/.test(n(e)))return isNaN(e)?void 0:Number(e)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,r,n){return(l="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var i,o=c(e,t);if(o){if((i=Object.getOwnPropertyDescriptor(o,t)).set)return i.set.call(n,r),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(n,t)){if(!i.writable)return!1;i.value=r,Object.defineProperty(n,t,i)}else!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(n,t,r);return!0})(e,t,r,n)}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=c(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=r(36),d=r(4),h=r(14),y=r(8),g=r(9).isDesktop,m=r(38),A=r(15),v=r(10);function b(e,t,r){return e.addEventListener(t,r,!1)}var _=function(e){function t(e,r,n,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=i(this,p(t).call(this,e))).frame=null,a.video=r,a.config=n,a.parent=o,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,f),a(t,[{key:"adVolume",get:function(){return u(p(t.prototype),"adVolume",this)},set:function(e){(function(e,t,r,n,i){if(!l(e,"adVolume",r,n||e))throw new Error("failed to set property")})(p(t.prototype),0,e,this),this.video.muted=0===e}}],[{key:"canPlayMediaFile",value:function(e){return(e.type===h.JAVASCRIPT||"application/x-javascript"===e.type)&&"VPAID"===e.apiFramework}}]),a(t,[{key:"load",value:function(e,t){var r=this,n=e[0].uri,i=e[0].bitrate;return new Promise((function(e,o){var a=document.createElement("iframe"),s=document.createElement("script"),l=r.video,u=null;function c(e){r.container.removeChild(a),r.adVolume=0,r.video.clean&&r.video.clean(),r.video=null,r.frame=null,r.api=null,e&&o(e)}a.src="about:blank",a.setAttribute("scrolling","no"),a.style.width="100%",a.style.height="100%",a.style.display="block",a.style.opacity="0",a.style.border="none",r.container.appendChild(a),a.contentWindow.document.open(),a.contentWindow.document.close(),a.contentWindow.document.body.style.margin="0",r.frame=a,s.src=n,s.onload=function(){var n=a.contentWindow.getVPAIDAd(),s=a.contentWindow.document.body,u=r.vpaidVersion=new m(n.handshakeVersion("2.0"));if(u.major>2)return o(new Error("VPAID version "+u+" is not supported."));a.contentWindow.addEventListener("resize",(function(){var e=a.getBoundingClientRect();r.resizeAd(e.width,e.height,"normal")}),!1),d.forEach((function(e){if(r.parent.isAsiaSmartAd||e!==d.AdStarted)return n.subscribe((function(){for(var t=new Array(arguments.length),n=arguments.length;n--;)t[n]=arguments[n];return r.emit.apply(r,[e].concat(t))}),e)})),r.once(d.AdLoaded,(function(){a.style.opacity="1",r.api=n,e(r)})),r.once(d.AdError,(function(e){c(new Error(e))})),r.once(d.AdStopped,c),r.parent.isAsiaSmartAd&&(r.once(d.AdStopped,(function(e){r.emit(d.AdSkipped)})),r.once(d.AdVideoStart,(function(e){var t=a.contentWindow.document.querySelector(".sas-container").querySelector("iframe").contentWindow.document.querySelector("video");r.video=t,r.parent.video=t}))),n.initAd(r.config.width,r.config.height,"normal",i,{AdParameters:t.adParameters},{slot:s,videoSlot:l,videoSlotCanAutoPlay:g})},s.onerror=function(){c(new Error("Failed to load MediaFile ["+n+"]."))},function(e,t,r){b(e,t,(function n(){return function(e,t,r){e.removeEventListener(t,r,!1)}(e,t,n),r.apply(this,arguments)}))}(l,y.PLAYING,(function(){r.emit(d.AdStarted)})),b(l,y.TIMEUPDATE,(function(){var e;!((e=r.container.getBoundingClientRect()).top||e.height/2<=window.innerHeight-e.top&&e.bottom>=e.height/2)||r.alreadyEmitViewable?u=null:(u||(u=l.currentTime),l.currentTime-u>=2&&(r.alreadyEmitViewable=!0,r.emit(d.AdViewableImpression)))})),b(l,y.LOADEDMETADATA,(function(){var e=new A(l,t.progressEvents);new v([d.AdVideoProgress]).from(e).to(r)})),a.contentWindow.document.body.appendChild(l),a.contentWindow.document.body.appendChild(s)}))}}]),t}();e.exports=_},function(e,t,r){"use strict";var n=r(6),i=r(4);function o(e,t){return function(){var r=arguments,n=this.api,i=this;function o(){return new Error("Ad has not been loaded.")}function a(){return n[e].apply(n,r)}if(!t){if(!n)throw o();return a()}return new Promise((function(e,r){return n?(i.once(t,(function(){e(i)})),a()):r(o())}))}}function a(e){n.call(this),this.container=e,this.api=null,this.vpaidVersion=null}a.prototype=Object.create(n.prototype),Object.defineProperties(a.prototype,{adLinear:{get:o("getAdLinear")},adWidth:{get:o("getAdWidth")},adHeight:{get:o("getAdHeight")},adExpanded:{get:o("getAdExpanded")},adSkippableState:{get:o("getAdSkippableState")},adRemainingTime:{get:o("getAdRemainingTime")},adDuration:{get:o("getAdDuration"),set:function(e){}},adVolume:{get:o("getAdVolume"),set:o("setAdVolume")},adCompanions:{get:o("getAdCompanions")},adIcons:{get:o("getAdIcons")}}),a.prototype.load=function(){throw new Error("VPAID subclass must implement load() method.")},a.prototype.resizeAd=o("resizeAd",i.AdSizeChange),a.prototype.startAd=o("startAd",i.AdStarted),a.prototype.stopAd=o("stopAd",i.AdStopped),a.prototype.pauseAd=o("pauseAd",i.AdPaused),a.prototype.resumeAd=o("resumeAd",i.AdPlaying),a.prototype.expandAd=o("expandAd",i.AdExpandedChange),a.prototype.collapseAd=o("collapseAd",i.AdExpandedChange),a.prototype.skipAd=function(){o("skipAd",i.AdSkipped).call(this),this.stopAd()},e.exports=a},function(e,t){e.exports=window},function(e,t,r){"use strict";function n(e){var t=e.split(".").map(parseFloat);this.string=e,this.major=t[0],this.minor=t[1],this.patch=t[2],Object.freeze(this)}n.prototype.toString=function(){return this.string},e.exports=n},function(e,t,r){"use strict";var n=r(6),i=r(4);function o(e,t,r){e!==i.AdVideoProgress?t.fired[e]||(t.emit(e),t.fired[e]=!0):t.emit(e,r)}function a(e,t){n.apply(this,arguments),this.duration=e,this.progressEvents=t.sort((function(e,t){return e.offset<t.offset})),this.seconds=Array.apply([],new Array(e)).map((function(){return!1})),this.fired=[i.AdVideoStart,i.AdVideoFirstQuartile,i.AdVideoMidpoint,i.AdVideoThirdQuartile,i.AdVideoComplete].reduce((function(e,t){return e[t]=!1,e}),{})}a.prototype=Object.create(n.prototype),a.prototype.tick=function(){var e=this,t=this.seconds,r=this._getState(),n=Math.round(r.currentTime)-1,a=[1,2,3,4].map((function(e){return Math.floor(this.duration/4*e)}),this);function s(e){var r=a[e-1];return!(!r||0==r)&&t.slice(0,r).every((function(e){return!0===e}))}r.playing&&(o(i.AdVideoStart,this),n>-1&&(this.seconds[n]=!0)),s(1)&&o(i.AdVideoFirstQuartile,this),s(2)&&o(i.AdVideoMidpoint,this),s(3)&&o(i.AdVideoThirdQuartile,this),s(4)&&o(i.AdVideoComplete,this),this.progressEvents.length&&this._popMatchProgressEvents(r.currentTime).forEach((function(t){return o(i.AdVideoProgress,e,t)}))},a.prototype._popMatchProgressEvents=function(e){for(var t=this.progressEvents,r=t.length-1;r>-1&&e>t[r].offset;)r-=1;return t.splice(r+1)},a.prototype._getState=function(){throw Error("this method must be overridden")},e.exports=a},function(e,t,r){"use strict";var n=r(6),i=r(9).canPlay,o=r(41),a=r(4),s=r(8),l=r(15),u=r(10);function c(e,t,r){return e.addEventListener(t,r,!1)}function p(e,t,r){return c(e,t,(function n(){return function(e,t,r){e.removeEventListener(t,r,!1)}(e,t,n),r.apply(this,arguments)}))}function f(e,t){function r(){return new Error("The <video> has not been loaded.")}return function(){if(!this.video){if(t)return Promise.reject(r());throw r()}return e.apply(this,arguments)}}function d(){return this.container.removeChild(this.video),this.video.clean(),this.video=null,this.alreadyEmitViewable=!1,Promise.resolve(this)}function h(e,t,r){n.call(this),this.container=e,this.video=t,this.config=r,this.__private__={hasPlayed:!1}}h.prototype=Object.create(n.prototype),Object.defineProperties(h.prototype,{adRemainingTime:{get:f((function(){return this.video.duration-this.video.currentTime}))},adDuration:{get:f((function(){return this.video.duration}))},adVolume:{get:f((function(){return this.video.volume})),set:f((function(e){this.video.muted=0===e,this.video.volume=e}))}}),h.prototype.load=function(e,t){var r=this;return new Promise((function(n,f){var d=r.video,h=function(e,t){var r=t.width,n=e.map((function(e){return{mediaFile:e,playability:"video/3gpp"!==e.type&&i(e.type)}})).filter((function(e){return e.playability>0})).sort(o("-playability","-mediaFile.bitrate")),a=n.map((function(e){return Math.abs(r-e.mediaFile.width)})),s=n[a.indexOf(Math.min.apply(Math,a))];return!s||s.playability<1?null:s.mediaFile}(e,{width:r.config.width,height:r.config.height}),y=null;if(!h)return f(new Error("There are no playable <MediaFile>s."));d.src=h.uri,p(d,s.LOADEDMETADATA,(function(){var e=new l(d,t.progressEvents);new u(a).from(e).to(r),n(r),r.emit(a.AdLoaded),c(d,s.DURATIONCHANGE,(function(){r.emit(a.AdDurationChange)})),c(d,s.VOLUMECHANGE,(function(){r.emit(a.AdVolumeChange)}))})),p(d,s.ERROR,(function(){var e=d.error;r.emit(a.AdError,e.message),f(e)})),p(d,s.PLAYING,(function(){r.__private__.hasPlayed=!0,r.emit(a.AdImpression)})),p(d,s.ENDED,(function(){r.stopAd()})),c(d,s.TIMEUPDATE,(function(){var e;!((e=r.container.getBoundingClientRect()).top||e.height/2<=window.innerHeight-e.top&&e.bottom>=e.height/2)||r.alreadyEmitViewable?y=null:(y||(y=d.currentTime),d.currentTime-y>=2&&(r.alreadyEmitViewable=!0,r.emit(a.AdViewableImpression)))})),c(d,"click",(function(){r.emit(a.AdClickBackground,null,null,!0)})),r.container.appendChild(d)}))},h.prototype.startAd=f((function(){var e=this,t=this.video;return this.__private__.hasPlayed?Promise.reject(new Error("The advertisement has already been started.")):new Promise((function(r,n){return p(t,s.PLAYING,(function(){r(e),e.alreadyPlayAd=!0,e.emit(a.AdStarted)})),t.play().catch(n)}))}),!0),h.prototype.stopAd=f((function(){return this.emit(a.AdStopped),d.call(this)}),!0),h.prototype.skipAd=f((function(){return this.emit(a.AdSkipped),d.call(this)}),!0),h.prototype.pauseAd=f((function(){var e=this,t=this.video;return this.video.paused?Promise.resolve(this):new Promise((function(r){return p(t,s.PAUSE,(function(){r(e),e.emit(a.AdPaused)})),t.pause()}))}),!0),h.prototype.resumeAd=f((function(){var e=this,t=this.video;return this.__private__.hasPlayed?this.video.paused?new Promise((function(r){return p(t,s.PLAY,(function(){r(e),e.emit(a.AdPlaying)})),t.play()})):Promise.resolve(this):Promise.reject(new Error("The ad has not been started yet."))}),!0),h.canPlayMediaFile=function(e){return Boolean(document.createElement("video").canPlayType(e.type))},e.exports=h},function(e,t,r){var n,i,o,a=r(42);o=function(e){return function(t){return typeof t===e}},i=function(e,t){var r=1,n=t||function(e,t){return t};return"-"===e[0]&&(r=-1,e=e.substr(1)),function(t,i){var o,s=n(e,a.get(t,e)),l=n(e,a.get(i,e));return s<l&&(o=-1),s>l&&(o=1),s===l&&(o=0),o*r}},n=function(){var e=Array.prototype.slice.call(arguments),t=e.filter(o("string")),r=e.filter(o("function"))[0];return function(e,n){for(var o=t.length,a=0,s=0;0===a&&s<o;)a=i(t[s],r)(e,n),s++;return a}},e.exports=n},function(e,t,r){var n,i,o;!function(r,a){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=a():(i=[],void 0===(o="function"==typeof(n=a)?n.apply(t,i):n)||(e.exports=o))}(0,(function(){"use strict";var e=Object.prototype.toString,t=Object.prototype.hasOwnProperty;function r(e){if(!e)return!0;if(a(e)&&0===e.length)return!0;for(var r in e)if(t.call(e,r))return!1;return!0}function n(t){return e.call(t)}function i(e){return"number"==typeof e||"[object Number]"===n(e)}function o(e){return"string"==typeof e||"[object String]"===n(e)}function a(e){return"object"==typeof e&&"number"==typeof e.length&&"[object Array]"===n(e)}function s(e){var t=parseInt(e);return t.toString()===e?t:e}function l(e,t,n,a){if(i(t)&&(t=[t]),r(t))return e;if(o(t))return l(e,t.split("."),n,a);var u=s(t[0]);if(1===t.length){var c=e[u];return void 0!==c&&a||(e[u]=n),c}return void 0===e[u]&&(i(u)?e[u]=[]:e[u]={}),l(e[u],t.slice(1),n,a)}var u={ensureExists:function(e,t,r){return l(e,t,r,!0)},set:function(e,t,r,n){return l(e,t,r,n)},insert:function(e,t,r,n){var i=u.get(e,t);n=~~n,a(i)||(i=[],u.set(e,t,i)),i.splice(n,0,r)},empty:function(e,t){if(r(t))return e;if(!r(e)){var s;if(!(s=u.get(e,t)))return e;if(o(s))return u.set(e,t,"");if(function(e){return"[object Boolean]"===n(e)}(s))return u.set(e,t,!1);if(i(s))return u.set(e,t,0);if(!a(s))return u.set(e,t,null);s.length=0}},push:function(e,t){var r=u.get(e,t);a(r)||(r=[],u.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},coalesce:function(e,t,r){for(var n,i=0,o=t.length;i<o;i++)if(void 0!==(n=u.get(e,t[i])))return n;return r},get:function(e,t,n){if(i(t)&&(t=[t]),r(t))return e;if(r(e))return n;if(o(t))return u.get(e,t.split("."),n);var a=s(t[0]);return 1===t.length?void 0===e[a]?n:e[a]:u.get(e[a],t.slice(1),n)},del:function(e,t){return function e(t,n){if(i(n)&&(n=[n]),!r(t)){if(r(n))return t;if(o(n))return e(t,n.split("."));var l=s(n[0]),u=t[l];if(1===n.length)void 0!==u&&(a(t)?t.splice(l,1):delete t[l]);else if(void 0!==t[l])return e(t[l],n.slice(1));return t}}(e,t)}};return u}))},function(e,t,r){"use strict";var n=r(4);function i(e){return e}function o(e,t){(e||[]).forEach((function(e){(new Image).src=t(e)}))}function a(e,t){this.pixels=e.reduce((function(e,t){return t&&(e[t.event]||(e[t.event]=[])).push(t.uri),e}),{}),this.__private__={mapper:t||i}}a.prototype.track=function(e){var t=this.pixels,r=this.__private__.mapper,a=e.adVolume;function s(e,n,a){function s(e){return r((n||i)(e))}return function(){a&&!a()||o(t[e],s)}}e.on(n.AdSkipped,s("skip")),e.on(n.AdStarted,s("creativeView")),e.on(n.AdVolumeChange,s("unmute",null,(function(){return 0===a&&e.adVolume>0}))),e.on(n.AdVolumeChange,s("mute",null,(function(){return a>0&&0===e.adVolume}))),e.on(n.AdImpression,s("impression")),e.on(n.AdViewableImpression,(function(){s("viewableImpression"),s("impression")})),e.on(n.AdVideoStart,s("start")),e.on(n.AdVideoFirstQuartile,s("firstQuartile")),e.on(n.AdVideoMidpoint,s("midpoint")),e.on(n.AdVideoThirdQuartile,s("thirdQuartile")),e.on(n.AdVideoProgress,(function(e){o([e.uri],r||i)})),e.on(n.AdVideoComplete,s("complete")),e.on(n.AdUserAcceptInvitation,s("acceptInvitationLinear")),e.on(n.AdUserMinimize,s("collapse")),e.on(n.AdUserClose,s("closeLinear")),e.on(n.AdPaused,s("pause")),e.on(n.AdResumed,s("resume")),e.on(n.AdPlaying,s("resume")),e.on(n.AdError,s("error",(function(e){return e.replace(/\[ERRORCODE\]/g,901)}))),e.on(n.AdVolumeChange,(function(){a=e.adVolume}))},e.exports=a},function(e,t){e.exports=function(){var e=document.createElement("video"),t=[],r=!1,n=e.addEventListener,i=e.removeEventListener,o=e.play,a=Array.prototype.map.call(e.attributes,(function(e){return e.name}));return e.init=function(t){return r?Promise.resolve():(r=!0,e.parentNode||t.appendChild(e),Promise.resolve().then((function(){return e.load()})).catch((function(e){return console.log("Error while initializing video",e)})))},e.clean=function(){t.forEach((function(t){i.call(e,t.type,t.listener,t.options)})),t=[],e.load(),s()},e.addEventListener=function(r,i,o){return t.push({type:r,listener:i,options:o}),n.call(e,r,i,o)},e.removeEventListener=function(t,r,n){return i.call(e,t,r,n)},e.play=function(){return r=!0,o.call(e)},s(),e;function s(){Array.prototype.forEach.call(e.attributes,(function(t){-1===a.indexOf(t.name)&&e.removeAttribute(t.name)})),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),e.setAttribute("preload","auto"),e.style.display="block",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.backgroundColor="#000",e.style.objectFit="contain"}}},function(e,t){e.exports={getVpaidVendor:function(e){return/moatads\.com/.test(e[0].uri)?"MOAT":null}}},function(e,t,r){e.exports=r(47)},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=r(48),c=r(50),p=r(11),f=r(3),d=f.isImaAd,h=f.createPromiseDefer,y=r(51),g=r(5).DEFAULT_MAX_VOLUME;e.exports=function(e){function t(e,r,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}(this,i(t).call(this,e,r,o,a)))._onAdsManagerLoaded=s._onAdsManagerLoaded.bind(l(l(s))),s._onAdEvent=s._onAdEvent.bind(l(l(s))),s._onAdErrorEvent=s._onAdErrorEvent.bind(l(l(s))),s.adDisplayContainer=null,s.adsLoader=null,s.adsManager=null,s.adOption=null,s.currentAd=null,s.volume=s.videoContent.muted?0:s.videoContent.volume*g,s.paused=!1,s.destroyed=!1,s.loadDeferred=null,s.startAdRequested=!1,s.cancelledAdRequested=!1,s.initUserActionHappened=!1,u.load().then((function(){return s._init()})).catch((function(e){s.destroyed||s.logger.error(s.name,"cannot load SDK",e)})),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,p),a(t,[{key:"name",get:function(){return"GoogleImaPlayer"}},{key:"videoContentWidth",get:function(){return this.videoContent.offsetWidth}},{key:"videoContentHeight",get:function(){return this.videoContent.offsetHeight}},{key:"videoContentVolume",get:function(){return this.videoContent.muted?0:this.videoContent.volume}},{key:"selfControl",get:function(){return!1}},{key:"canClickThrough",get:function(){return!0}},{key:"isGoogleImaAd",get:function(){return!0}}]),a(t,[{key:"initUserAction",value:function(){!this.initUserActionHappened&&this.adDisplayContainer&&(this.initUserActionHappened=!0,this.adDisplayContainer.initialize(),this.adDisplayContainer.initialized=!0,this.logger.debug(this.name,"init user action done"))}},{key:"loadAd",value:function(e,t){var r=this;this.logger.debug(this.name,"loadAd ad ",e),this.adOption=t,this.tracker=new c(e),this.tracker._trackEvent("requestVast"),this.loadDeferred=h();var n=e.vastAdTagURI;return u.isReady().then((function(){return r._requestAds(n)})).then((function(){return r.loadDeferred.promise}))}},{key:"canRun",value:function(e){return d(e)}},{key:"start",value:function(){return this.startAdRequested=!1,this.cancelledAdRequested=!1,this.paused=!1,this.destroyed?this._onAdStopped(new Error("cannot play ad since adsManager was destroyed")):this.adsManager?(this.initUserAction(),void this.adsManager.start()):(this.startAdRequested=!0,void this.logger.debug(this.name,"cannot play ad since adsManager is not loaded yet, try to play on load event"))}},{key:"stop",value:function(){this.adsManager&&this.adsManager.stop()}},{key:"skip",value:function(){this.stop()}},{key:"pause",value:function(){this.adsManager&&this.adsManager.pause()}},{key:"resume",value:function(){this.adsManager&&this.adsManager.resume()}},{key:"cancel",value:function(){this.adsManager?this.adsManager.stop():this.cancelledAdRequested=!0}},{key:"setVolume",value:function(e){this.logger.debug(this.name,"setVolume | volume ",e),this.volume=e,this.adsManager&&this.adsManager.setVolume(e)}},{key:"getVolume",value:function(){return this.volume}},{key:"isPaused",value:function(){return this.paused}},{key:"getRemainingTime",value:function(){return this.adsManager.getRemainingTime()}},{key:"getDuration",value:function(){return this.currentAd?this.currentAd.getDuration():0}},{key:"getSkipOffset",value:function(){return this.logger.debug(this.name,"skipTimeOffset",this.currentAd&&this.currentAd.getSkipTimeOffset()),this.adOption?this.adOption.skipoffset:-1}},{key:"resize",value:function(){this.adsManager&&this.adsManager.resize(this.videoContentWidth,this.videoContentHeight,google.ima.ViewMode.NORMAL)}},{key:"destroy",value:function(){this.destroyed=!0,this._destroyAdsManager(),this._destroyAdDisplayContainer(),this.element&&(this.adContainerElement.removeChild(this.element),this.element=null),this.logger.debug(this.name,"destroyed")}},{key:"_init",value:function(){this.destroyed||(this.element=document.createElement("div"),this.element.style.width="100%",this.element.style.height="100%",this.element.style.position="absolute",this.element.style.zIndex=1,this.element.style.backgroundColor="rgba(0, 0, 0, 0.8)",this.element.setAttribute("data-player",this.name),this.adContainerElement.appendChild(this.element),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setDisableFlashAds(!0),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.element,this.videoContent),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setPlayerType("zplayer-ima"),this.adsLoader.getSettings().setPlayerVersion(y.version),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.options.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._onAdsManagerLoaded,!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._onAdErrorEvent,!1),this._hide())}},{key:"_show",value:function(){this.element.style.display="block"}},{key:"_hide",value:function(){this.element.style.display="none"}},{key:"_requestAds",value:function(e){this.logger.debug(this.name,"_requestAds | adTagUrl",e);var t=new google.ima.AdsRequest;t.adTagUrl=e,t.linearAdSlotWidth=this.videoContentWidth,t.linearAdSlotHeight=this.videoContentHeight,t.nonLinearAdSlotWidth=this.videoContentWidth,t.nonLinearAdSlotHeight=this.videoContentHeight,t.forceNonLinearFullSlot=!0,t.setAdWillAutoPlay(this.options.autoPlay),t.setAdWillPlayMuted(this.options.mute),this.adsLoader.requestAds(t)}},{key:"_onAdsManagerLoaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.adsManager=e.getAdsManager(this.videoContent,t),this.setVolume(this.volume),this.adsManager.init(this.videoContentWidth,this.videoContentHeight,google.ima.ViewMode.NORMAL),this._startAdsManager(this.adsManager)}},{key:"_startAdsManager",value:function(e){e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._onAdErrorEvent,!1,this);var t=[google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.ALL_ADS_COMPLETED];for(var r in t)e.addEventListener(t[r],this._onAdEvent,!1,this);this.cancelledAdRequested?this.cancel():this.startAdRequested&&this.start()}},{key:"_onAdEvent",value:function(e){var t=this;this.logger.debug(this.name,"Ad event:",e.type),this.tracker.onAdEvent(e);var r=e.getAd();switch(e.type){case google.ima.AdEvent.Type.LOADED:this.onAdLoaded(),this.loadDeferred.resolve(),this.loadDeferred=null,r.isLinear()||(this.element.style.backgroundColor="transparent");break;case google.ima.AdEvent.Type.STARTED:if(this.currentAd=r,this._onAdStarted(),!r.isLinear()){var n=-1===r.g.duration?15:r.g.duration;setTimeout((function(){t.adsManager&&t.adsManager.stop(),t._onAdStopped()}),1e3*n)}break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this._onAdStopped();break;case google.ima.AdEvent.Type.PAUSED:this._onAdPausedEvent();break;case google.ima.AdEvent.Type.RESUMED:this._onAdResumedEvent()}}},{key:"_onAdErrorEvent",value:function(e){var t=e.getError();this.loadDeferred?this.loadDeferred.reject(t):(this.logger.error(this.name,"Ad error:",t.toString()),this._onAdStopped(t))}},{key:"_onAdPausedEvent",value:function(){this.paused=!0}},{key:"_onAdResumedEvent",value:function(){this.paused=!1}},{key:"_onAdStarted",value:function(){this._show(),this.onAdStarted()}},{key:"_onAdStopped",value:function(e){this._hide(),this._destroyAdsManager(),this.onAdStopped(e)}},{key:"_destroyAdsManager",value:function(){this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)}},{key:"_destroyAdDisplayContainer",value:function(){this.adDisplayContainer&&(this.adDisplayContainer.destroy(),this.adDisplayContainer=null)}}]),t}()},function(e,t,r){var n,i=r(49);e.exports={load:function(){return n||(n=new Promise((function(e,t){i((function(r){r?e():t(new Error("failed to load IMA SDK"))}),!0,6e3)}))),n},isReady:function(){return n}}},function(e,t){e.exports=function(e,t,r){var n=window,i=document,o=null,a=function(t){n.clearTimeout(o),"function"==typeof e&&e(t)};if(n.google&&n.google.ima)a(!0);else{var s=!0===t?"https:":"",l=i.getElementsByTagName("script")[0],u=i.createElement("script");u.src=s+"//imasdk.googleapis.com/js/sdkloader/ima3.js",u.async=!0,"function"==typeof e&&(u.onload=function(){a(!0)}),l.parentNode.insertBefore(u,l),r&&(o=n.setTimeout((function(){a(!1)}),r))}}},function(e,t){e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.impressionEvents=[].concat(t.impressions||[],t.viewableImpressions||[]),this.trackingEvents=t.creatives[0].trackingEvents,t.creatives[0].videoClicks&&(this.clickTrackingUri=t.creatives[0].videoClicks.clickTrackings[0])}return function(e,t,r){t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t)}(e,[{key:"onAdEvent",value:function(e){var t=this;switch(console.log("adEvent ",e.type),e.type){case google.ima.AdEvent.Type.IMPRESSION:this.impressionEvents.forEach((function(e){return t._fireEvent(e.uri)}));break;case google.ima.AdEvent.Type.STARTED:this._trackEvent("start"),this._trackEvent("creativeView");break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this._trackEvent("firstQuartile");break;case google.ima.AdEvent.Type.MIDPOINT:this._trackEvent("midpoint");break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this._trackEvent("thirdQuartile");break;case google.ima.AdEvent.Type.COMPLETE:this._trackEvent("complete");break;case google.ima.AdEvent.Type.PAUSED:this._trackEvent("pause");break;case google.ima.AdEvent.Type.RESUMED:this._trackEvent("resume");break;case google.ima.AdEvent.Type.SKIPPED:this._trackEvent("skip");break;case google.ima.AdEvent.Type.USER_CLOSE:this._trackEvent("close");break;case google.ima.AdEvent.Type.CLICK:this.clickTrackingUri&&this._fireEvent(this.clickTrackingUri)}}},{key:"_trackEvent",value:function(e){var t=this;this.trackingEvents.filter((function(t){return t.event===e})).forEach((function(e){return t._fireEvent(e.uri)}))}},{key:"_fireEvent",value:function(e){e&&((new Image).src=e)}}]),e}()},function(e){e.exports={name:"@zplayer/ad-runner",version:"1.0.26",description:"Generic ad runner library for media player",main:"dist/ad-runner.min.js",author:"ZTE folks",publishConfig:{registry:"https://nexus-repo.zapps.vn/repository/zjs-repo/"},scripts:{dev:"webpack-dev-server --progress --mode development --config webpack.config.js",watch:"webpack --progress --watch --mode development --output-filename=[name].min.js --config webpack.config.js",build:"webpack -p --progress --mode production --config webpack.config.js","build-demo":"webpack --progress --mode development --config webpack.config.js",lint:"eslint *.js src/"},devDependencies:{"@zjs/vast-player":"1.3.62","@babel/core":"^7.1.2","@babel/preset-env":"^7.1.0","babel-loader":"^8.0.4","clean-webpack-plugin":"0.1.19","css-loader":"1.0.0",eslint:"^5.4.0","eslint-plugin-import":"^2.15.0","generate-changelog":"^1.7.1","html-webpack-plugin":"3.2.0","node-sass":"4.13.0","sass-loader":"7.1.0","style-loader":"0.23.0",webpack:"4.17.2","webpack-cli":"3.1.0","webpack-dev-server":"3.1.8","webpack-merge":"4.1.4"}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=r(7).VastPlayer,c=r(11),p=r(3),f=p.isImaAd,d=p.isFacebookAd,h=p.isAsiaSmartAd,y=r(5).AD_DONE_REASON;e.exports=function(e){function t(e,r,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}(this,i(t).call(this,e,r,o,a))).adOption=null,s.loadPromise=null,s.initUserActionHappened=!1,s.onAdSkipped=o.onAdSkipped,s._onAdError=s._onAdError.bind(l(l(s))),s._init(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,c),a(t,[{key:"name",get:function(){return"VastLinearPlayer"}},{key:"canClickThrough",get:function(){return this.player.isVPAID&&"MOAT"!==this.player.vpaidVendor}},{key:"isFacebookAd",get:function(){return d(this.ad)}},{key:"isAsiaSmartAd",get:function(){return h(this.ad)}},{key:"viewDetailLink",get:function(){return this.player&&this.player.viewDetailLink}}]),a(t,[{key:"canRun",value:function(e){return!f(e)&&"linear"===e.creatives[0].type}},{key:"initUserAction",value:function(){this.initUserActionHappened||(this.initUserActionHappened=!0,this.player.init(),this.logger.debug(this.name,"init user action done"))}},{key:"loadAd",value:function(e,t){return this.ad=e,this.adOption=t,this.loadPromise=this.player.load({ads:[e]}),this.loadPromise}},{key:"start",value:function(){var e=this;this.loadPromise.then((function(){return e.player.startAd()})).catch(this._onAdError)}},{key:"stop",value:function(){var e=this;this.loadPromise.then((function(){return e.player.stopAd()})).catch(this._onAdError)}},{key:"skip",value:function(){var e=this;this.loadPromise.then((function(){return e.player.skipAd()})).catch(this._onAdError)}},{key:"pause",value:function(){var e=this;return this.loadPromise.then((function(){return e.player.pauseAd()})).catch(this._onAdError)}},{key:"resume",value:function(){var e=this;return this.loadPromise.then((function(){return e.player.resumeAd()})).catch(this._onAdError)}},{key:"cancel",value:function(){this.stop()}},{key:"viewDetail",value:function(){var e=this;this.loadPromise.then((function(){if(e.player.isVPAID)try{e.player.__private__.video.click(),e.resume()}catch(t){e.logger.error(e.name,"error while simulate click on VPAID ad",t)}else e.player.emit("AdClickThru",null,null,!0)})).catch(this._onAdError)}},{key:"setVolume",value:function(e){var t=this;this.loadPromise.then((function(){t.player.adVolume=e}))}},{key:"getVolume",value:function(){return this.loadPromise?this.player.adVolume:0}},{key:"isPaused",value:function(){return this.player.paused}},{key:"getRemainingTime",value:function(){if(this.isAsiaSmartAd){var e=this.getDuration();return e>0?e-this.getAdCurrentTime():e}return this.player&&this.player.adRemainingTime}},{key:"getDuration",value:function(){return this.player&&this.player.adDuration}},{key:"getAdCurrentTime",value:function(){return Math.floor(this.player.__private__.video.currentTime)}},{key:"getSkipOffset",value:function(){return this.logger.debug(this.name,"skipTimeOffset",this.adOption.skipoffset),this.adOption?this.adOption.skipoffset:-1}},{key:"destroy",value:function(){this.loadPromise&&this.ad&&this.stop(),this.player=null,this.element&&(this.adContainerElement.removeChild(this.element),this.element=null),this.logger.debug(this.name,"destroyed")}},{key:"_init",value:function(){var e=this,t=document.createElement("div"),r=new u(t,{width:e.videoContent.offsetWidth,height:e.videoContent.offsetHeight});t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.zIndex=1,t.setAttribute("data-player",this.name),r.on("AdStarted",(function(){return e._onAdStartedEvent()})),r.on("AdStopped",(function(){return e._onAdStoppedEvent()})),r.on("AdSkipped",(function(){return e._onAdSkippedEvent()})),r.on("AdLoaded",(function(){return e._onAdLoadedEvent()})),e.adContainerElement.appendChild(t),e.element=t,e.player=r,e._hide()}},{key:"_show",value:function(){this.element.style.display="block"}},{key:"_hide",value:function(){this.element.style.display="none"}},{key:"_onAdLoadedEvent",value:function(){this.onAdLoaded()}},{key:"_onAdStartedEvent",value:function(){if(this._show(),this.onAdStarted(),this.isFacebookAd)try{this.player.__private__.player.frame.contentDocument.querySelector("#an_skip_button").style.display="none"}catch(e){this.logger.warn(this.name,"failed to remove FB skip button",e)}}},{key:"_onAdStoppedEvent",value:function(e,t){this.loadPromise=null,this._hide(),this.onAdStopped(e,t)}},{key:"_onAdSkippedEvent",value:function(){this.onAdSkipped(),this._onAdStoppedEvent(null,y.skipped)}},{key:"_onAdError",value:function(e){this._onAdStoppedEvent(e)}}]),t}()},function(e,t,r){e.exports=r(54)},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=r(11),c=r(3).isImaAd,p=r(55),f=r(59),d=r(5).DEFAULT_NON_LINEAR_DURATION;e.exports=function(e){function t(e,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=i(this,o(t).call(this,e,r,n,a))).ad=null,s.adOption=null,s.imgUrl=null,s.adTimer=null,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,u),s(t,[{key:"name",get:function(){return"VastNonLinearPlayer"}},{key:"selfControl",get:function(){return!0}},{key:"viewDetailLink",get:function(){return this.ad.creatives[0].ads[0].clickThrough}}]),s(t,[{key:"canRun",value:function(e){return!c(e)&&"nonLinear"===e.creatives[0].type}},{key:"initUserAction",value:function(){}},{key:"loadAd",value:function(e,t){this.ad=e,this.adOption=t,this.imgUrl=null;var r=e.creatives[0].ads[0].resources;return r&&this._isValidImageAd(r)?(this.imgUrl=r,this.onAdLoaded(),Promise.resolve()):Promise.reject(new Error("no playable non-linear file"))}},{key:"start",value:function(){this.adTimer&&this.stop();var e=this.ad.creatives[0],t=parseInt(e.ads[0].width),r=parseInt(e.ads[0].height);return this.tracker=new f(this.ad),this.adUi=new p(this,this.videoContent.offsetWidth,this.videoContent.offsetHeight),this.adUi.setImage(this.imgUrl,t,r),this.adContainerElement.appendChild(this.adUi.element),this._onAdStartedEvent(),Promise.resolve()}},{key:"stop",value:function(){this._onAdStoppedEvent()}},{key:"cancel",value:function(){this.stop()}},{key:"viewDetail",value:function(){try{var e=this.viewDetailLink;e&&window.open(e,"_blank")}catch(e){this.logger.error(this.name,"error while showing detail of ad",e)}}},{key:"setVolume",value:function(){}},{key:"getRemainingTime",value:function(){}},{key:"getDuration",value:function(){}},{key:"destroy",value:function(){this._stopAdTimer(),this.adUi&&this.adUi.remove(),this.logger.debug(this.name,"destroyed")}},{key:"_isValidImageAd",value:function(e){return!/\.swf/.test(e)}},{key:"_startAdTimer",value:function(){var e=this;this.adTimer=setTimeout((function(){return e.stop()}),1e3*(this.adOption.duration||d))}},{key:"_stopAdTimer",value:function(){clearTimeout(this.adTimer),delete this.adTimer}},{key:"_onAdStartedEvent",value:function(){this._startAdTimer(),this.adUi.show(),this.tracker.onAdStarted(),this.onAdStarted()}},{key:"_onAdStoppedEvent",value:function(){this._stopAdTimer(),this.adUi.remove(),this.tracker.onAdStopped(),this.onAdStopped(null,null,!0,this.adData)}}]),t}()},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r(56);var l=r(2);e.exports=function(e){function t(e,r,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}(this,o(t).call(this,{className:"ad_runner_non_linear_ad_ui"}))).player=e,a.maxWidth=r,a.maxHeight=i,a._onCloseButtonClickEvent=a._onCloseButtonClickEvent.bind(s(s(a))),a._onImageClickEvent=a._onImageClickEvent.bind(s(s(a))),a.render(),a._registerEvents(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,l),function(e,t,r){t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t)}(t,[{key:"render",value:function(){i(o(t.prototype),"render",this).call(this),this.closeButton=new l({tagName:"span"}),this.closeButton.render(),this.closeButton.html("[x]"),this.closeButton.attr("title","\u0110\xf3ng qu\u1ea3ng c\xe1o"),this.appendChild(this.closeButton),this.image=new l({tagName:"img"}),this.image.render(),this.appendChild(this.image)}},{key:"remove",value:function(){this._unregisterEvents(),i(o(t.prototype),"remove",this).call(this)}},{key:"setImage",value:function(e,t,r){(t>this.maxWidth||r>this.maxHeight)&&(this.image.attr("width","auto"),this.image.attr("height","auto"),t>r?this.image.style("max-width","".concat(this.maxWidth-40,"px")):this.image.style("max-height","".concat(this.maxHeight-40,"px"))),this.image.attr("src",e)}},{key:"_registerEvents",value:function(){this.closeButton.on("click",this._onCloseButtonClickEvent),this.image.on("click",this._onImageClickEvent)}},{key:"_unregisterEvents",value:function(){this.closeButton.off("click",this._onCloseButtonClickEvent),this.image.off("click",this._onImageClickEvent)}},{key:"_onCloseButtonClickEvent",value:function(e){e.stopPropagation(),this.player.stop()}},{key:"_onImageClickEvent",value:function(e){e.stopPropagation(),this.player.viewDetail()}}]),t}()},function(e,t,r){var n=r(57);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runner_non_linear_ad_ui span{position:absolute;top:0;right:0;color:#f9754d;cursor:pointer;padding:2px;font-weight:bold;background-color:white}.ad_runner_non_linear_ad_ui img{cursor:pointer}\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t){var r=["start","creativeView"],n=["close"];e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.impressionEvents=[].concat(t.impressions||[],t.viewableImpressions||[]),this.trackingEvents=t.creatives[0].trackingEvents}return function(e,t,r){t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t)}(e,[{key:"onAdStarted",value:function(){var e=this;this.impressionEvents.forEach((function(t){return e._fireEvent(t.uri)})),this._trackEvents(r)}},{key:"onAdStopped",value:function(){this._trackEvents(n)}},{key:"_trackEvents",value:function(e){var t=this;this.trackingEvents.filter((function(t){return e.indexOf(t.event)>-1})).forEach((function(e){return t._fireEvent(e.uri)}))}},{key:"_fireEvent",value:function(e){e&&((new Image).src=e)}}]),e}()},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=r(5),a=o.AD_POSITION,s=o.PRELOAD_DURATION,l=o.COUNT_DOWN_DURATION,u=r(3).createPromiseDefer,c="midroll";function p(e){return e.ads[0]&&"nonLinear"!==e.ads[0].creatives[0].type}e.exports=function(){function e(t){var r=t.prepareAd,n=t.beforePlayAd,i=t.preloadAd,o=t.loadAd,a=t.playAd,s=t.logger;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props={prepareAd:r,beforePlayAd:n,preloadAd:i,loadAd:o,playAd:a,logger:s},this._reset(),this.dataLoadingDeferred=u()}return i(e,[{key:"name",get:function(){return"Scheduler"}},{key:"logger",get:function(){return this.props.logger}}]),i(e,[{key:"populateAdsData",value:function(e){var t=this;e.forEach((function(e){return e.position===a.preroll?t.prerollAds.push(e):e.position===a.postroll?t.postrollAds.push(e):void t.midrollAds.push(e)})),this.midrollAds.sort((function(e,t){return t.startTime>e.startTime?1:-1})),this.prerollAds.length&&this.props.loadAd(this.prerollAds[0]),this.dataLoadingDeferred.resolve()}},{key:"onContentProgress",value:function(e){var t=this;if(this.ignoredFirstFrame){if(!this.state)return this._setState("preroll"),void this.dataLoadingDeferred.promise.then((function(){t._playAds(t.prerollAds).then((function(){t._setState(c)}))}));if(this.state===c){if(!this.midrollAds.length)return this._setState("postroll");var r=e.current<0?e.total:e.current,n=this._getAdsPriorTime(this.midrollAds,r),i=this._getAdsPriorTime(this.midrollAds,r+s);if(i.length&&this.props.preloadAd(i[0]),n.length)this.midrollAds.splice(this.midrollAds.length-n.length,n.length),this.props.beforePlayAd(p(n[0]),(function(){t._playAds(n)}));else{var o=this._getAdsPriorTime(this.midrollAds,r+l);if(o.length){var a=o[0].startTime-r;this.props.prepareAd(o[0],a)}}}}else this.ignoredFirstFrame=!0}},{key:"onContentEnded",value:function(){this.midrollAds.length&&this.logger.warn(this.name,"cannot play these mid-roll ads because start time is too late",this.midrollAds),this._playAds(this.postrollAds),this._reset()}},{key:"_reset",value:function(){this.ignoredFirstFrame=!1,this._setState(null),this.prerollAds=[],this.midrollAds=[],this.postrollAds=[]}},{key:"_setState",value:function(e){this.logger.info(this.name,"state changed from ".concat(this.state," to ").concat(e)),this.state=e}},{key:"_playAds",value:function(e){var t=this,r=[],n=[];return e.forEach((function(e){p(e)?r.push(e):n.push(e)})),this._playAd(r).then((function(){return t._playAd(n)}))}},{key:"_playAd",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[r];if(n){var i={order:r+1,total:e.length};return this.props.playAd(n,i).catch((function(e){t.logger.error(t.name,"error while playing ad",e)})).then((function(){return t._playAd(e,r+1)}))}return Promise.resolve()}},{key:"_getAdsPriorTime",value:function(e,t){for(var r=e.length-1;r>-1&&t>e[r].startTime;)--r;return e.slice(r+1).reverse()}}]),e}()},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=r(2),p=r(17),f=r(64),d=r(3),h=r(79),y=r(82);r(85),e.exports=function(e){function t(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}(this,o(t).call(this))).options=e,i.adContainers=r,i.$adContainer=new c({element:r.linear}),i.$adContainer.render(),i.adPlayer=null,i.adPaused=!1,i.adVolume=0,i.adVolumeCached=1,i.mouseEntered=!1,i._onClick=i._onClick.bind(u(u(i))),i._onMouseEnter=i._onMouseEnter.bind(u(u(i))),i._onMouseLeave=i._onMouseLeave.bind(u(u(i))),i._onSkipBtnClick=i._onSkipBtnClick.bind(u(u(i))),i._onViewDetailBtnClick=i._onViewDetailBtnClick.bind(u(u(i))),i.render(),i._registerEvents(),i.control.hide(),d.isMobile()&&(i.addClass("is_mobile"),i.$adContainer.off("mouseenter",i._onMouseEnter),i.$adContainer.off("mouseleave",i._onMouseLeave)),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,c),s(t,[{key:"name",get:function(){return"ad_runner_ui"}},{key:"attributes",get:function(){return{class:this.name}}}]),s(t,[{key:"render",value:function(){return i(o(t.prototype),"render",this).call(this),this.hide(),this.$uiLoading=new c({className:"ad_runner_ui_loading"}),this.$uiLoading.render(),this.$uiLoading.element.textContent="\u0110ang t\u1ea3i qu\u1ea3ng c\xe1o...",this.$uiLoading.hide(),this.$uiViewDetail=new c({className:"ad_runner_ui_viewdetail"}),this.$uiViewDetail.render(),this.$uiViewDetail.element.textContent="Xem chi ti\u1ebft qu\u1ea3ng c\xe1o",this.$uiAdIndex=new c({className:"ad_runner_ui_adindex"}),this.$uiAdIndex.render(),this.$uiAdIndex.hide(),this.countdownToPlay=new p({template:"Qu\u1ea3ng c\xe1o hi\u1ec3n th\u1ecb sau %ss",className:"ad_runner_ui_countdown_to_play"}),this.countdownToPlay.hide(),this.skipButton=new h({getPoster:this.options.getPoster}),this.control=new f(this),this.slideBlack=new y(this),this.appendChild(this.$uiViewDetail),this.appendChild(this.$uiAdIndex),this.appendChild(this.skipButton),this.appendChild(this.control),this.$adContainer.appendChild(this),this.adContainers.notification.appendChild(this.countdownToPlay.element),this.adContainers.notification.appendChild(this.$uiLoading.element),this.adContainers.notification.appendChild(this.slideBlack.element),this}},{key:"remove",value:function(){this._unregisterEvents(),this._stopSkipTimer(),this._stopProgressTimer(),this.skipButton.remove(),this.countdownToPlay.remove(),this.control.remove(),this.$uiLoading.remove(),this.slideBlack.remove(),i(o(t.prototype),"remove",this).call(this)}},{key:"setPlayer",value:function(e){this.adPlayer=e}},{key:"togglePlayPause",value:function(){this.adPlayer.isPaused()?(this.adPlayer.resume(),this._onPauseStateChanged(!1)):(this.adPlayer.pause(),this._onPauseStateChanged(!0))}},{key:"toggleMute",value:function(){var e=this.adPlayer.getVolume(),t=e?0:this.adVolumeCached;this.adPlayer.setVolume(t),this._onVolumeChanged(t),this.adVolumeCached=e}},{key:"onAdWillStart",value:function(){this.show(),this.$uiLoading.show(),this.$uiViewDetail.hide(),this.$uiAdIndex.hide(),this.skipButton.hide(),this.skipButton.loadPoster(),this.countdownToPlay.hide()}},{key:"onAdStarted",value:function(e){if(this.adPlayer.selfControl)return this.$uiLoading.hide(),void this.hide();this.adPlayer.canClickThrough?this.addClass("click-through"):this.removeClass("click-through"),this.adPlayer.isFacebookAd?this.addClass("facebook-ad"):this.removeClass("facebook-ad"),this.adPlayer.isGoogleImaAd?this.addClass("google-ima-ad"):this.removeClass("google-ima-ad"),this.$uiLoading.hide(),this.$uiViewDetail.show(),e&&e.total>1&&(this.$uiAdIndex.show(),this.$uiAdIndex.html("Qu\u1ea3ng c\xe1o ".concat(e.order," / ").concat(e.total))),this._startProgressTimer(),this.adPlayer.getSkipOffset()>-1&&(this.skipButton.show(),this.skipButton.update(this._getTimeToSkip()||5),this._startSkipTimer()),this._onVolumeChanged(this.adPlayer.getVolume())}},{key:"onAdStopped",value:function(){this._stopSkipTimer(),this._stopProgressTimer(),this.$uiLoading.hide(),this.hide()}},{key:"_registerEvents",value:function(){this.on("click",this._onClick),this.$adContainer.on("mouseenter",this._onMouseEnter),this.$adContainer.on("mouseleave",this._onMouseLeave),this.skipButton.on("click",this._onSkipBtnClick),this.$uiViewDetail.on("click",this._onViewDetailBtnClick)}},{key:"_unregisterEvents",value:function(){this.off("click",this._onClick),this.$adContainer.off("mouseenter",this._onMouseEnter),this.$adContainer.off("mouseleave",this._onMouseLeave),this.skipButton.off("click",this._onSkipBtnClick),this.$uiViewDetail.off("click",this._onViewDetailBtnClick)}},{key:"_startProgressTimer",value:function(){var e=this;this.progressTimer=setInterval((function(){var t={duration:e.adPlayer.getDuration(),remaining:e.adPlayer.getRemainingTime(),paused:e.adPlayer.isPaused()};e.control.onProgress(t);var r=e.adPlayer.getVolume();t.paused!==e.adPaused&&e._onPauseStateChanged(t.paused),r!==e.adVolume&&e._onVolumeChanged(r)}),1e3)}},{key:"_stopProgressTimer",value:function(){clearInterval(this.progressTimer),this.progressTimer=null}},{key:"_startSkipTimer",value:function(){var e=this;this._stopSkipTimer();var t=this._getTimeToSkip();this.skipTimer=setInterval((function(){var r=e._getTimeToSkip();e.adPlayer.isPaused()||(t-=1),r<=0||r-t>e.options.skipTimeout?(e.skipButton.skipOn(),e._stopSkipTimer()):e.skipButton.update(r)}),1e3)}},{key:"_stopSkipTimer",value:function(){this.skipTimer&&(clearInterval(this.skipTimer),this.skipTimer=null)}},{key:"_getTimeToSkip",value:function(){var e=this.adPlayer.getSkipOffset()+this.adPlayer.getRemainingTime()-this.adPlayer.getDuration();return e<0?5:e}},{key:"_onSkipBtnClick",value:function(e){var t=this;e.stopPropagation(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,r=arguments.length>2?arguments[2]:void 0;e.style.opacity||(e.style.opacity=1);var n=null;window.requestAnimationFrame((function i(o){var a=o-(n=n||o),s=parseFloat(1-a/t,2);e.style.opacity=s<0?0:s,a>t?"function"==typeof r&&r():window.requestAnimationFrame(i)}))}(this.adPlayer.element,300,(function(){t.adPlayer.skip(),t.adPlayer.element.style.opacity=null}))}},{key:"_onViewDetailBtnClick",value:function(e){e.stopPropagation(),this.adPlayer.viewDetail()}},{key:"_onClick",value:function(){this.togglePlayPause()}},{key:"_onMouseEnter",value:function(){this.mouseEntered=!0,!this.adPaused&&this.control.show()}},{key:"_onMouseLeave",value:function(){this.mouseEntered=!1,!this.adPaused&&this.control.hide()}},{key:"_onPauseStateChanged",value:function(e){this.adPaused=e,this.control.onPauseStateChanged(e,this.mouseEntered)}},{key:"_onVolumeChanged",value:function(e){this.adVolume=e,this.control.onMuteStateChanged(0===e)}}]),t}()},function(e,t,r){var n=r(63);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runner_ui_countdown{background-color:rgba(0,0,0,0.4);color:#eee;font-size:12px;height:auto;line-height:18px;padding:5px;position:absolute;width:auto;top:10px;left:10px}\n",""])},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=r(2),c=r(65),p=r(68),f=r(71),d=r(74);r(77),e.exports=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,o(t).call(this))).adUi=e,r.render(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,u),s(t,[{key:"name",get:function(){return"ad_runner_ui_control"}},{key:"attributes",get:function(){return{class:this.name}}}]),s(t,[{key:"show",value:function(){this.playpause.show(),this.volume.show(),this.timer.show(),this.removeClass("minimized"),this.adUi.addClass("has_control")}},{key:"hide",value:function(){this.playpause.hide(),this.volume.hide(),this.timer.hide(),this.addClass("minimized"),this.adUi.removeClass("has_control")}},{key:"remove",value:function(){this.timeline.remove(),this.playpause.remove(),this.volume.remove(),this.timer.remove(),i(o(t.prototype),"remove",this).call(this)}},{key:"render",value:function(){i(o(t.prototype),"render",this).call(this),this.timeline=new c,this.playpause=new p(this.adUi),this.timer=new d,this.volume=new f(this.adUi),this.appendChild(this.timeline),this.appendChild(this.playpause),this.appendChild(this.timer),this.appendChild(this.volume)}},{key:"onProgress",value:function(e){e.paused||(this.timeline.setPosition((e.duration-e.remaining)/e.duration*100),this.timer.update(e))}},{key:"onPauseStateChanged",value:function(e,t){e?this.show():t||this.hide(),this.playpause.onPauseStateChanged(e)}},{key:"onMuteStateChanged",value:function(e){this.volume.onMuteStateChanged(e)}}]),t}()},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=r(2);r(66),e.exports=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,o(t).call(this))).render(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,u),s(t,[{key:"name",get:function(){return"ad_runner_ui_timeline"}},{key:"attributes",get:function(){return{class:this.name}}}]),s(t,[{key:"render",value:function(){i(o(t.prototype),"render",this).call(this),this.$uiProgress=new u,this.$uiProgress.render(),this.appendChild(this.$uiProgress)}},{key:"setPosition",value:function(e){e<=100&&this.$uiProgress.style("width","".concat(e,"%"))}}]),t}()},function(e,t,r){var n=r(67);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runner_ui_timeline{bottom:0;height:4px;left:0;position:absolute;width:100%}.ad_runner_ui_timeline>div{-webkit-transition:width 1s linear;-moz-transition:width 1s linear;-o-transition:width 1s linear;transition:width 1s linear;background-color:#ffff00;height:100%;width:0%}\n",""])},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=r(2);r(69);var p='<svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><path d="M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z"></path></svg>';e.exports=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}(this,o(t).call(this))).adUi=e,r._onClickEvent=r._onClickEvent.bind(u(u(r))),r.render(),r._registerEvents(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,c),s(t,[{key:"name",get:function(){return"ad_runner_ui_playpause"}},{key:"attributes",get:function(){return{class:this.name}}}]),s(t,[{key:"render",value:function(){i(o(t.prototype),"render",this).call(this),this.html(p)}},{key:"remove",value:function(){this._unregisterEvents(),i(o(t.prototype),"remove",this).call(this)}},{key:"onPauseStateChanged",value:function(e){e?this.html('<svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><path d="M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z"></path></svg>'):this.html(p)}},{key:"_registerEvents",value:function(){this.on("click",this._onClickEvent)}},{key:"_unregisterEvents",value:function(){this.off("click",this._onClickEvent)}},{key:"_onClickEvent",value:function(e){e.stopPropagation(),this.adUi.togglePlayPause()}}]),t}()},function(e,t,r){var n=r(70);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runner_ui_playpause{width:35px;height:35px;float:left;margin-left:5px}.ad_runner_ui_playpause:hover{cursor:pointer}.ad_runner_ui_playpause>svg{fill:#f5f5f5}.ad_runner_ui_playpause:hover>svg,.ad_runner_ui_playpause:active>svg{fill:#ffffff}\n",""])},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=r(2);r(72);var p='<svg height="100%" viewBox="0 0 36 36" width="100%"><path d="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 Z M19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"></path></svg>';e.exports=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}(this,o(t).call(this)))._onClickEvent=r._onClickEvent.bind(u(u(r))),r.adUi=e,r.render(),r._registerEvents(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,c),s(t,[{key:"name",get:function(){return"ad_runner_ui_volume"}},{key:"attributes",get:function(){return{class:this.name}}}]),s(t,[{key:"render",value:function(){i(o(t.prototype),"render",this).call(this),this.html(p)}},{key:"remove",value:function(){this._unregisterEvents(),i(o(t.prototype),"remove",this).call(this)}},{key:"onMuteStateChanged",value:function(e){e?this.html('<svg height="100%" viewBox="0 0 36 36" width="100%"><path d="m16.98686,9.984l0,4.219l-2.109,-2.109l2.109,-2.11zm-7.734,-0.984l16.734,16.734l-1.266,1.266l-2.063,-2.063c-1.078,0.844 -2.297,1.5 -3.656,1.828l0,-2.063c0.844,-0.234 1.594,-0.656 2.25,-1.172l-4.266,-4.266l0,6.75l-5.016,-5.016l-3.984,0l0,-6l4.734,0l-4.734,-4.734l1.267,-1.264zm14.718,9c0,-3.188 -2.063,-5.859 -4.969,-6.703l0,-2.063c4.031,0.891 6.984,4.5 6.984,8.766c0,1.5 -0.375,2.953 -1.031,4.172l-1.5,-1.547c0.328,-0.797 0.516,-1.688 0.516,-2.625zm-2.484,0c0,0.234 0,0.422 -0.047,0.609l-2.438,-2.438l0,-2.203c1.5,0.75 2.484,2.25 2.484,4.031l0.001,0.001z"></path></svg>'):this.html(p)}},{key:"_registerEvents",value:function(){this.on("click",this._onClickEvent)}},{key:"_unregisterEvents",value:function(){this.off("click",this._onClickEvent)}},{key:"_onClickEvent",value:function(e){e.stopPropagation(),this.adUi.toggleMute()}}]),t}()},function(e,t,r){var n=r(73);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runner_ui_volume{width:35px;height:35px;float:right;margin-right:5px}.ad_runner_ui_volume:hover{cursor:pointer}.ad_runner_ui_volume>svg{fill:#f5f5f5}.ad_runner_ui_volume:hover>svg,.ad_runner_ui_volume:active>svg{fill:#ffffff}\n",""])},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=r(2),c=r(3).formatTime;r(75),e.exports=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,o(t).call(this))).render(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,u),s(t,[{key:"name",get:function(){return"ad_runner_ui_timer"}},{key:"attributes",get:function(){return{class:this.name}}}]),s(t,[{key:"render",value:function(){i(o(t.prototype),"render",this).call(this),this.html("00:00 / 00:00")}},{key:"update",value:function(e){var t=c(e.duration-e.remaining),r=c(e.duration);this.html("".concat(t," / ").concat(r))}}]),t}()},function(e,t,r){var n=r(76);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runner_ui_timer{color:#f5f5f5;float:left;margin-left:5px;height:35px;line-height:35px;font-size:12px}\n",""])},function(e,t,r){var n=r(78);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runner_ui_control{-webkit-transition:height 100ms ease;-moz-transition:height 100ms ease;-o-transition:height 100ms ease;transition:height 100ms ease;background:linear-gradient(transparent, #000);bottom:0;height:40px;left:0;position:absolute;width:100%;pointer-events:none}.ad_runner_ui_control.minimized{background:none;height:5px}.ad_runner_ui_control>*{pointer-events:auto}\n",""])},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=r(2),p=r(17);r(80),e.exports=function(e){function t(e){var r,i=e.getPoster;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}(this,o(t).call(this)))._onPosterLoad=r._onPosterLoad.bind(u(u(r))),r.render(),r._registerEvents(),r.getPoster=i,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,c),s(t,[{key:"attributes",get:function(){return{class:"ad_runner_ui_skip_button"}}}]),s(t,[{key:"render",value:function(){i(o(t.prototype),"render",this).call(this),this.countdown=new p({template:"B\u1ecf qua qu\u1ea3ng c\xe1o sau %ss",className:"countdown"}),this.countdown.render(),this.update=this.countdown.update.bind(this.countdown),this.skipText=new c({className:"skip_text"}),this.skipText.render(),this.skipText.element.textContent="B\u1ecf qua",this.poster=new c({tagName:"img"}),this.poster.render(),this.poster.hide(),this.playIcon=new c({className:"play_icon"}),this.playIcon.render(),this.playIcon.html('<svg viewBox="12 12 24 24"><style type="text/css"> .st1{fill:none;stroke:#f1f1f1;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;} </style><g><g><path class="st1" d="M21.88173,28.00095l6.30217-3.67922c0.24333-0.14206,0.24348-0.49362,0.00028-0.63589l-6.30217-3.68663 c-0.2455-0.14361-0.5542,0.03345-0.5542,0.31786v7.36585C21.32781,27.9672,21.63623,28.14428,21.88173,28.00095z"/><circle class="st1" cx="24" cy="24" r="11.1667"/></g></g></svg>'),this.appendChild(this.skipText),this.appendChild(this.countdown),this.appendChild(this.poster),this.appendChild(this.playIcon)}},{key:"show",value:function(){i(o(t.prototype),"show",this).call(this),this.skipText.hide(),this.countdown.show(),this.removeClass("skippable")}},{key:"hide",value:function(){i(o(t.prototype),"hide",this).call(this),this.poster.hide(),this.removeClass("has_poster")}},{key:"remove",value:function(){this._unregisterEvents(),this.countdown.remove(),this.poster.remove(),this.skipText.remove(),this.playIcon.remove(),i(o(t.prototype),"remove",this).call(this)}},{key:"loadPoster",value:function(){var e=this;this.getPoster&&this.getPoster().then((function(t){e.poster.attr("src",t)}))}},{key:"skipOn",value:function(){this.skipText.show(),this.countdown.hide(),this.addClass("skippable")}},{key:"_onPosterLoad",value:function(){this.poster.show(),this.addClass("has_poster")}},{key:"_registerEvents",value:function(){this.poster.on("load",this._onPosterLoad)}},{key:"_unregisterEvents",value:function(){this.poster.off("load",this._onPosterLoad)}}]),t}()},function(e,t,r){var n=r(81);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runner_ui_skip_button{background-color:rgba(0,0,0,0.4);color:#eee;font-size:12px;height:auto;line-height:18px;padding:5px;position:absolute;width:auto;-webkit-transition:bottom 100ms ease;-moz-transition:bottom 100ms ease;-o-transition:bottom 100ms ease;transition:bottom 100ms ease;background-color:#2b2a2a;align-items:center;border:1px solid rgba(72,72,72,0.4);bottom:35px;display:flex;height:42px;padding:0;pointer-events:none !important;right:0px;text-align:center}.ad_runner_ui_skip_button.skippable{pointer-events:auto !important;cursor:pointer}.ad_runner_ui_skip_button .countdown{padding:5px;max-width:100px}.ad_runner_ui_skip_button .skip_text{font-size:13px;width:100px}.ad_runner_ui_skip_button .play_icon{position:absolute;width:65px;height:30px;right:0;display:none}.ad_runner_ui_skip_button .play_icon svg{width:30px;height:30px}.ad_runner_ui_skip_button.skippable.has_poster .play_icon{display:block}.ad_runner_ui_skip_button img{height:38px;object-fit:cover;width:65px}.is_mobile .ad_runner_ui_skip_button{width:170px;justify-content:center}.is_mobile .ad_runner_ui_skip_button .countdown{max-width:120px}.ad_runner_ui.facebook-ad .ad_runner_ui_skip_button{background-color:#000}.ad_runner_ui.has_control .ad_runner_ui_skip_button{bottom:35px}\n",""])},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(83);var s=r(2);e.exports=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,o(t).call(this,{className:"ad_runners_ui_slide_black"}))).render(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,s),function(e,t,r){t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t)}(t,[{key:"fadeIn",value:function(){this.addClass("ad_ui_slide_black_fade_in")}},{key:"fadeOut",value:function(){this.removeClass("ad_ui_slide_black_fade_in")}},{key:"render",value:function(){i(o(t.prototype),"render",this).call(this),this.html('<span class="ad_message_text">Video n\u1ed9i dung s\u1ebd ti\u1ebfp t\u1ee5c sau \u0111o\u1ea1n qu\u1ea3ng c\xe1o</span>'),this.hide()}}]),t}()},function(e,t,r){var n=r(84);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runners_ui_slide_black{position:absolute;top:0;left:0;z-index:1;width:100%;height:100%;background-color:#000;opacity:0;-webkit-transition:opacity .3s linear;-moz-transition:opacity .3s linear;-o-transition:opacity .3s linear;transition:opacity .3s linear}.ad_runners_ui_slide_black.ad_ui_slide_black_fade_in{opacity:1}.ad_runners_ui_slide_black .ad_message_text{color:#eee;font-size:13px;position:absolute;left:10px;bottom:10px}\n",""])},function(e,t,r){var n=r(86);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,'.ad_runner_ui{left:0px;position:absolute;top:0px;width:100%;height:100%;z-index:2}.ad_runner_ui.click-through{pointer-events:none}.ad_runner_ui.click-through>*{pointer-events:auto}.ad_runner_ui.click-through .ad_runner_ui_viewdetail{display:none}.ad_runner_ui .ad_runner_ui_viewdetail{background-color:rgba(0,0,0,0.4);color:#eee;font-size:12px;height:auto;line-height:18px;padding:5px;position:absolute;width:auto;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA2ElEQVQ4ja2U0U3DMBRFz0MM0BkyQleo2CAVm7ACYoaOUDagjJBs0G6A6AaHjzhSVcXGDtw/289H9z1fGbVXv83rCKBuCzWqwwPwBmz4D92Qt433+iVnawz0wDEtr/N+Myx1cEjLE/C6CpZAn0wzPkXE0+15New3UDXsDjQC+1xh8TVTvuYcDmo+RiVYEwh4bGhtFxHXTN0z8LXoTO3Uc40j9SUb2gT9ALqSo6o2I2JUR6ZkV4MWYQm4V7sWEBRyFhGXFlARtkahnpmG/Ve9z/9S6aet0aB2P+baSzgLyi9XAAAAAElFTkSuQmCC");background-position-x:calc(100% - 5px);background-position-y:center;background-repeat:no-repeat;background-size:12px;cursor:pointer;padding-right:20px;right:10px;top:10px}.ad_runner_ui .ad_runner_ui_adindex{background-color:rgba(0,0,0,0.4);color:#eee;font-size:12px;height:auto;line-height:18px;padding:5px;position:absolute;width:auto;background-color:transparent;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAjVJREFUOBHlVEFrU0EQ/mb35TVtqqRKq0LaXhRbxbMggh5UKioePQserEcP4smjoHjoTUERvAi9eCmC9A+UCqJQJIJ6KAhNqlBLNE3y8nb89iV5SbB66bEDYb/9ZufLzOy8BXadia84Wi/MOCezgE6rYoTkEEQy3Bu6hZxfScFxUSIH1YigSm6D+6Ix+jgz9u2NROWJ87Fziz5gp2aNuWCcczd3KtSJ91oGghMdorPa4bsIR5eQ2b8IM3itQ8OEZ8ktIBwrIsg/B8xo6ksAtdgb6WNt7hZsbhZxdR4arSDY+xASngbsOEWesIMNxL/mKH6Svvv9gtQKyOR6WZO9TKFlxL/nSFuE2Yuw2Stw0QeIySHavAONv/JOfkLsZG+oxzkKqhdNTYKjcLWF9j6GuhI8J1pJOHXfk9VtzacxXaCBHwc/Cl2Ly+zCnnQvxOrWeWqzxclga7UF/tF0eq4NnOFU1XtZx3JNeIqHp2AGZljWQbZtmSW/S47Z7FV2YgLhyEv28EFvqJ/QutRK4yU25EDqkTxv8hVMcCShtLmKxo8zxDEFHsEOtW5dXQXRxvWk391YKUt9rVDkxE+lZBtIcJwZnoMdvo1m5R5c9UXiEXuY47IP2lxhRlt9YfzCPgX8nj4zw78EtfkRMX8uesuS36eBGn/xyW5v1DIKebq9t8VqY4mg9r8jqc9rJY9DbW3ykoi7wUyPqSCfPA6QAdb078cBWk8eB+XjIFJUNc+yh1Zfp+q7B/wBa0XJ8tc9BKoAAAAASUVORK5CYII=");background-position-y:center;background-repeat:no-repeat;bottom:50px;left:15px;padding-left:25px;text-shadow:0 0 4px #000}.ad_runner_ui_countdown_to_play{background-color:rgba(0,0,0,0.4);color:#eee;font-size:12px;height:auto;line-height:18px;padding:5px;position:absolute;width:auto;top:10px;left:10px;z-index:1}.ad_runner_ui_loading{background-color:rgba(0,0,0,0.4);color:#eee;font-size:12px;height:auto;line-height:18px;padding:5px;position:absolute;width:auto;top:10px;left:10px}.ad_runner_ui_hide{display:none !important}\n',""])},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(88);var l=r(2);e.exports=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}(this,s(t).call(this,{className:"ad_runners_ui_ad_mark_container"})),a(s(t.prototype),"render",i(r)).call(i(r)),r.containerElement=e,e&&e.appendChild(r.element),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,l),function(e,t,r){t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t)}(t,[{key:"render",value:function(e,t){var r=this;this.containerElement&&t.forEach((function(t){var n=100*t.startTime/e;if(0<=n&&n<=100){var i=r._createAdMarkItem(n);r.appendChild(i),t.adMarkItem=i,t._completeAd=function(){i.remove()}}}))}},{key:"removeMarkItems",value:function(){this.html("")}},{key:"setContainer",value:function(e){e.appendChild(this.element)}},{key:"_createAdMarkItem",value:function(e){var t=document.createElement("span");return t.setAttribute("class","ad_runners_ui_ad_mark_container_item"),t.style.left="".concat(e,"%"),t}}]),t}()},function(e,t,r){var n=r(89);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".ad_runners_ui_ad_mark_container{display:flex !important;width:100%;height:100%}.ad_runners_ui_ad_mark_container .ad_runners_ui_ad_mark_container_item{height:100%;width:5px;background-color:yellow;display:block;position:relative}\n",""])}])},function(e,t){e.exports="data:application/vnd.ms-fontobject;charset=utf-8;base64,WA0AALQMAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAoXVQmwAAAAAAAAAAAAAAAAAAAAAAAA4AcABsAC0AaQBjAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBwAGwALQBpAGMAbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDtEG1AAAALwAAABgY21hcBdW0psAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmADY+2wAAAXgAAAiAaGVhZBkr5KEAAAn4AAAANmhoZWEJLQVEAAAKMAAAACRobXR4WcUPaQAAClQAAABkbG9jYRoQHFAAAAq4AAAANG1heHAAHgBcAAAK7AAAACBuYW1lFMWFdwAACwwAAAGGcG9zdAADAAAAAAyUAAAAIAADBBYBkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkUBAAAAAAABAAAAAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpFP/9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAMAgACqA4ADVgAXAC8APwAAATU0JisBIgYdARQWOwEyNj0BIxUjNTMVIzU0JisBIgYdARQWOwEyNj0BIxUjNTMVATIWFREUBiMhIiY1ETQ2MwMAGBKAEhoaEoASGEBWVuoaEoASGBgSgBIaQFZWAZQiNDMj/awkMjIkAiosEhgYEqwSGBgSLBaAFiwSGBgSrBIYGBIsFoAWASwzI/4AIjQzIwIAIjQAAAQA1gDWAyoDKgAFAAsAEQAXAAABMxUjNSMTNTMVIzUBNTMVIxUdATMVIzUCVtRUgIBU1P6A1ICA1AMq1ID+VIDUVAEs1FSArIBU1AAEAFYAVgOqA6oAAwAfADsAPwAAATUzFQMyNz4BNzY1NCcuAScmIyIHDgEHBhUUFx4BFxYTMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2ExEzEQHWVCpGPz5dGxsbG10+PkdGPz5dGxsbG10+PkdYTk5zIiEhInNOTVlYTk5zIiEhInNOTS9UAoBWVv4qGxtdPj5HRj8+XRsbGxtdPj5HRj8+XRsbAwAhInNOTVlYTk5zIiEhInNOTVlYTk5zIiH9gAEA/wAAAAIBAADWAwADKgADAAcAAAEzESMhETMRAlaqqv6qqgMq/awCVP2sAAABAVYA1gMqAyoAAgAACQIBVgHU/iwDKv7W/tYAAQCsAKoDVgNWADQAAAE3ESE3LgEjIgcOAQcGFRQXHgEXFjMyNz4BNzY3MwYHDgEHBiMiJy4BJyY1NDc+ATc2MzIWAvJk/tSKIl01NS8vRRQUFBRFLy81KiYnPxgXDVgOHx9XNTY8Rj4+XRobGxpdPj1HRn0C8mT+1IoiKhQURS8vNTUvL0UUFAwNLR8fJjcvL0UTExsbXT4+R0Y/Pl0bGzUAAAABAKoAgANWA9YALgAAATIXHgEXFhUUBw4BBwYjIicuAScmNTMUFx4BFxYzMjc+ATc2NTQnLgEnJiMVJzcCAEY/Pl0bGxsbXT4+R0Y/Pl0bG1YUFEUvLzU1Ly9FFBQUFEUvLzXW1gMqGxpdPj1HRj8+XRsbGxtdPj5HNS8vRRQUFBRFLy81NS8vRRQUrNbWAAACAGQAVgOcA6oACwBZAAABMjY1NCYjIgYVFBYlFx4BDwEOAS8BDgEPAQ4BKwEiJi8BLgEnBwYmLwEmNj8BLgE1PAE3Jy4BPwE+AR8BPgE/AT4BOwEyFh8BHgEXNzYWHwEWBg8BHgEVHAECAD1ZWD49WVgBfFoGAgRWBA4IahAkFBABCwisBwsCEBMkEWoHDgVWBAIGWgEBAloGAgRWBA4IahAkFBABCwisBwsCEBMkEWoHDgVWBAIGWgEBAWpYPj1ZWD49WWxGBBAIlAcEAyoMFghwBwsKCHAHFQ4qAwMIlAcQBUYKFQsKFQtGBBAIlAcEAyoMFghwBwsKCHAHFQ4qAwMIlAcQBUYKFQsKFQAAAAIA1gCqAxYDVgAFAAwAABMzNxEnIyUUBgcRHgHWqtbWqgJAPDAwPAKA1v1U1oA5WxgBWBhbAAAAAQEqAKoCqgNWAAUAAAEzNxEnIwEqrNTUrAKA1v1U1gADAIAAigOAA3YAHQAkACoAAAEWFx4BFxYVFAcOAQcGBzU2Nz4BNzY1NCcuAScmJxMUBgcRHgElMzcRJyMCVkA3N08XFhYXTzc2QS4nJzkPEBAPOScmL2o6MDA6/cCq1taqA3YOIyJjPj5ERD49YyMjDlgNHBtLLi4zMy4uSxsbDv7iOVsYAVgYW0fW/VTWAAAEANYA1gMqAyoABQALABEAFwAAATMVIzUzAzUzFSMVATUzFSM1ETUzFSM1AqqA1FRU1ID+rFTU1FQCqlTU/azUVIAB1IDUVP6sVNSAAAAAAAQAVgBWA6oDqgAbADcAOwA/AAAlMjc+ATc2NTQnLgEnJiMiBw4BBwYVFBceARcWEzIXHgEXFhUUBw4BBwYjIicuAScmNTQ3PgE3NhczESMVMxUjAgBGPz5dGxsbG10+PkdGPz5dGxsbG10+PkdYTk5zIiEhInNOTVlYTk5zIiEhInNOTS9UVFRUqhsbXT4+R0Y/Pl0bGxsbXT4+R0Y/Pl0bGwMAISJzTk1ZWE5OcyIhISJzTk1ZWE5OcyIh1P8AVlYAAAAEAIAAgAOAA4AAAgAUACoAMgAAARUnJwEHJw4BBzU+ATcnEScjETMnATQnLgEnJic1FhceARcWFRQGByc+ASccAQcnNR4BAgBa8ALKNlgiTiwbMBW21qrKygKqEA85JyYvQDc3TxcWFxVACgxqAmgwOgNWtFqE/TY2WBsoC1gHGhG2/uDWAQDK/rYzLi5LGxsOWA4jImM+PkQwWydCGTkeBw0GaF4YWwABAJIA1gOAAxIABQAACQEXASc3AYABxDz+AO46AUwBxjz+AO48AAAAAQEAAXYDAAKyAAUAAAEXNxcJAQE8xMQ8/wD/AAKyxMQ8/wABAAAAAAEBVgEWApIDFgAFAAABBwkBFwcCkjz/AAEAPMQBUjwBAAEAPMQAAAABAW4BCgKqAwoABQAAATcnNwkBAW7ExDwBAP8AAUbExDz/AP8AAAAAAQEAAW4DAAKqAAUAAAEnCQEHJwE8PAEAAQA8xAFuPAEA/wA8xAAAAAIAAAC4BJsDSAAPABMAAAEhIgYVERQWMyEyNjURNCYDIREhBBj8azZNTTYDlTZNTTb8awOVA0hNNv52Nk1NNgGKNk398wGKAAIAKwAOBSsD8gAQABQAAAEhIgYVERQWMyEyNjURNCYjESERIQSc/B07U1M7A+M7VFQ7/B0D4wPyVDr9ODpUVDoCyDpU/KoCyAAAAAABAAAAAQAAm1B1oV8PPPUACwQAAAAAANpxT9kAAAAA2nFP2QAAAAAFKwPyAAAACAACAAAAAAAAAAEAAAQAAAAAAAVVAAD/1QUrAAEAAAAAAAAAAAAAAAAAAAAZBAAAAAAAAAAAAAAAAAAAAAQAAIAEAADWBAAAVgQAAQAEAAFWBAAArAQAAKoEAABkBAAA1gQAASoEAACABAAA1gQAAFYEAACABAAAkgQAAQAEAAFWBAABbgQAAQAEcAAABVUAKwAAAAAACgAUAB4AcgCYAPwBEAEeAXABuAJAAlwCbAK0AtwDPgOSA6YDugPOA+ID9gQaBEAAAQAAABkAWgAEAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApHBsLWljb24AcABsAC0AaQBjAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMHBsLWljb24AcABsAC0AaQBjAG8AbnBsLWljb24AcABsAC0AaQBjAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcnBsLWljb24AcABsAC0AaQBjAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="},function(e,t,r){"use strict";(function(e){"function"!=typeof e.Promise&&(e.Promise=r(4))}).call(this,r(5))},function(e,t,r){"use strict";(function(t){var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,r=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}e.exports=function(e){1!==u.push(e)||n||r()}}).call(this,r(5))},function(e,t,r){var n=r(11);Object.getOwnPropertySymbols||(Object.getOwnPropertySymbols=n)},function(e,t,r){(function(t){!function(e,r){"use strict";if(!(r in e)){var n,i=typeof t==typeof i?window:t,o=0,a=""+Math.random(),s="__\x01symbol:",l=s.length,u="__\x01symbol@@"+a,c="defineProperty",p="defineProperties",f="getOwnPropertyNames",d="getOwnPropertyDescriptor",h="propertyIsEnumerable",y=e[f],g=e[d],m=e.create,A=e.keys,v=e.freeze||e,b=e[c],_=e[p],E=g(e,f),w=e.prototype,k=w.hasOwnProperty,T=w[h],S=w.toString,z=function(e,t,r){k.call(e,u)||b(e,u,{enumerable:!1,configurable:!1,writable:!1,value:{}}),e[u]["@@"+t]=r},P=function(){},O=function(e){return e!=u&&!k.call(I,e)},L=function(e){return e!=u&&k.call(I,e)},C=function(e){var t=""+e;return L(t)?k.call(this,t)&&this[u]["@@"+t]:T.call(this,e)},R=function(t){return b(w,t,{enumerable:!1,configurable:!0,get:P,set:function(e){n(this,t,{enumerable:!1,configurable:!0,writable:!0,value:e}),z(this,t,!0)}}),v(I[t]=b(e(t),"constructor",M))},D=function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return R(s.concat(t||"",a,++o))},I=m(null),M={value:D},x=function(e){return I[e]},j=function(e,t,r){var i=""+t;return L(i)?(n(e,i,r.enumerable?function(e){var t=m(e);return t.enumerable=!1,t}(r):r),z(e,i,!!r.enumerable)):b(e,t,r),e},B=function(e){return y(e).filter(L).map(x)};E.value=j,b(e,c,E),E.value=B,b(e,r,E),E.value=function(e){return y(e).filter(O)},b(e,f,E),E.value=function(e,t){var r=B(t);return r.length?A(t).concat(r).forEach((function(r){C.call(t,r)&&j(e,r,t[r])})):_(e,t),e},b(e,p,E),E.value=C,b(w,h,E),E.value=D,b(i,"Symbol",E),E.value=function(e){var t=s.concat(s,e,a);return t in w?I[t]:R(t)},b(D,"for",E),E.value=function(e){if(O(e))throw new TypeError(e+" is not a symbol");if(k.call(I,e)){var t=e.slice(l);if(t.slice(0,l)===s&&(t=t.slice(l))!==a)return(t=t.slice(0,t.length-a.length)).length>0?t:void 0}},b(D,"keyFor",E),E.value=function(e,t){var r=g(e,t);return r&&L(t)&&(r.enumerable=C.call(e,t)),r},b(e,d,E),E.value=function(e,t){return 1===arguments.length||void 0===t?m(e):function(e,t){var r=m(e);return y(t).forEach((function(e){C.call(t,e)&&j(r,e,t[e])})),r}(e,t)},b(e,"create",E),E.value=function(){var e=S.call(this);return"[object String]"===e&&L(this)?"[object Symbol]":e},b(w,"toString",E);try{if(!0!==m(b({},s,{get:function(){return b(this,s,{value:!0})[s]}}))[s])throw"IE11";n=b}catch(e){n=function(e,t,r){var n=g(w,t);delete w[t],b(e,t,r),b(w,t,n)}}}}(Object,"getOwnPropertySymbols"),function(e,t){"use strict";var r,n=e.defineProperty,i=e.prototype,o=i.toString,a="toStringTag";["iterator","match","replace","search","split","hasInstance","isConcatSpreadable","unscopables","species","toPrimitive",a].forEach((function(s){if(!(s in t))switch(n(t,s,{value:t(s)}),s){case a:(r=e.getOwnPropertyDescriptor(i,"toString")).value=function(){var e=o.call(this),r=null!=this?this[t.toStringTag]:this;return null==r?e:"[object "+r+"]"},n(i,"toString",r)}}))}(Object,Symbol),function(e,t,r){function n(){return this}t[e]||(t[e]=function(){var t=0,r=this,i={next:function(){var e=r.length<=t;return e?{done:e}:{done:e,value:r[t++]}}};return i[e]=n,i}),r[e]||(r[e]=function(){var t=String.fromCodePoint,r=this,i=0,o=r.length,a={next:function(){var e=o<=i,n=e?"":t(r.codePointAt(i));return i+=n.length,e?{done:e}:{done:e,value:n}}};return a[e]=n,a})}(Symbol.iterator,Array.prototype,String.prototype),e.exports=Object.getOwnPropertySymbols}).call(this,r(5))},function(e,t,r){var n=r(13);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){var n=r(14);(e.exports=r(0)(!1)).push([e.i,"@font-face{font-family:'pl-icon';src:url("+n(r(7))+");src:url("+n(r(7))+'#iefix) format("embedded-opentype"),url('+n(r(15))+') format("truetype"),url('+n(r(16))+') format("woff"),url('+n(r(17))+'#pl-icon) format("svg");font-weight:normal;font-style:normal;font-display:block}[class^="pl-ic-"],[class*=" pl-ic-"]{font-family:\'pl-icon\' !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pl-ic-theater-mini:before{content:"\\E913"}.pl-ic-theater:before{content:"\\E914"}.pl-ic-caption:before{content:"\\E900"}.pl-ic-fullscreen:before{content:"\\E901"}.pl-ic-info_outline:before{content:"\\E902"}.pl-ic-pause:before{content:"\\E903"}.pl-ic-play_arrow:before{content:"\\E904"}.pl-ic-refresh:before{content:"\\E905"}.pl-ic-replay:before{content:"\\E906"}.pl-ic-settings:before{content:"\\E907"}.pl-ic-volume_down:before{content:"\\E908"}.pl-ic-volume_mute:before{content:"\\E909"}.pl-ic-volume_up:before{content:"\\E90A"}.pl-ic-fullscreen_exit:before{content:"\\E90B"}.pl-ic-error_outline:before{content:"\\E90C"}.pl-ic-volume_off:before{content:"\\E90D"}.pl-ic-done:before{content:"\\E90E"}.pl-ic-keyboard_arrow_down:before{content:"\\E90F"}.pl-ic-keyboard_arrow_left:before{content:"\\E910"}.pl-ic-keyboard_arrow_right:before{content:"\\E911"}.pl-ic-keyboard_arrow_up:before{content:"\\E912"}.\\--z--player{height:343px;width:610px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:transform 0.1s cubic-bezier(0, 0, 0.2, 1);-moz-transition:transform 0.1s cubic-bezier(0, 0, 0.2, 1);transition:transform 0.1s cubic-bezier(0, 0, 0.2, 1);-webkit-transition:opacity 0.1s cubic-bezier(0, 0, 0.2, 1);-moz-transition:opacity 0.1s cubic-bezier(0, 0, 0.2, 1);transition:opacity 0.1s cubic-bezier(0, 0, 0.2, 1);position:relative;font-size:10px;font-family:sans-serif;line-height:1.5;padding:0;font-weight:normal;box-sizing:border-box;outline:none;background-color:#000}.\\--z--player *:focus{outline:none}.\\--z--player *,.\\--z--player *:after,.\\--z--player *:before{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.\\--z--player ::-webkit-scrollbar{width:6px;height:6px}.\\--z--player ::-webkit-scrollbar-track{background:transparent;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.\\--z--player ::-webkit-scrollbar-thumb{background:#dbdbdb;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.\\--z--player ::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.75);background-color:rgba(255,255,255,0.75)}.\\--z--player button{border:0;cursor:pointer;background-color:transparent}.\\--z--player svg{position:relative}.\\--z--player a{text-decoration:none}.\\--z--player li,.\\--z--player ul,.\\--z--player ol{margin:0;padding:0;list-style:none}.\\--z--player video{height:100%;width:100%;object-fit:contain;position:absolute;top:0;left:0;pointer-events:none}.\\--z--player .\\--z--center{text-align:center}.\\--z--player .\\--z--hide{display:none !important}.\\--z--player .\\--z--fadeout{opacity:0 !important}.\\--z--player .\\--z--show{display:block !important}.\\--z--player .\\--z--visible{visibility:visible !important}.\\--z--player .\\--z--unvisible{visibility:hidden !important}.\\--z--player .\\--z--clearfix:after{content:" ";display:table;clear:both}.\\--z--player .\\--z--icon{color:#fff}.\\--z--player .\\--z--btn{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;background-color:transparent;padding:0;opacity:0.8;font-size:1em}.\\--z--player .\\--z--btn:active{-webkit-animation:z-control-click 0.5s;-moz-animation:z-control-click 0.5s;-o-animation:z-control-click 0.5s;animation:z-control-click 0.5s}.\\--z--player .\\--z--btn:hover,.\\--z--player .\\--z--btn.\\--z--active{opacity:1}.\\--z--player.\\--z--full-screen{width:100% !important;height:100% !important;background-color:#000;object-fit:contain;position:fixed;top:0;right:0;bottom:0;left:0;min-width:0;max-width:none;min-height:0;max-height:none;transform:none;margin:0;font-size:13px}.\\--z--player.\\--z--custom-ios-fullscreen{width:100% !important;height:100% !important;position:fixed !important;z-index:10000 !important;top:50% !important;left:50% !important;transform:translate(-50%, -50%) !important}.\\--z--player.\\--z--orient-lock-fullscreen{transform:rotate(90deg) !important;transform-origin:bottom left;width:100vh !important;height:100vw !important;margin-top:-100vw !important;object-fit:cover !important;z-index:4 !important;visibility:visible !important;top:0 !important;left:0 !important}.\\--z--player.is-portrait{width:calc(100vh - 70px) !important}.\\--z--player-backdrop{position:fixed;display:none;width:100%;height:100%;left:0;top:0;bottom:0;right:0;z-index:9999;background-color:#000}.\\--z--player-backdrop.\\--z--show{display:block}@-webkit-keyframes z-control-click{from{opacity:0.6}to{opacity:1}}@-moz-keyframes z-control-click{from{opacity:0.6}to{opacity:1}}@-o-keyframes z-control-click{from{opacity:0.6}to{opacity:1}}@keyframes z-control-click{from{opacity:0.6}to{opacity:1}}\n',""])},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports="data:font/ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg7RBtQAAAC8AAAAYGNtYXAXVtKbAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgA2PtsAAAF4AAAIgGhlYWQZK+ShAAAJ+AAAADZoaGVhCS0FRAAACjAAAAAkaG10eFnFD2kAAApUAAAAZGxvY2EaEBxQAAAKuAAAADRtYXhwAB4AXAAACuwAAAAgbmFtZRTFhXcAAAsMAAABhnBvc3QAAwAAAAAMlAAAACAAAwQWAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpFAQAAAAAAAQAAAAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6RT//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAADAIAAqgOAA1YAFwAvAD8AAAE1NCYrASIGHQEUFjsBMjY9ASMVIzUzFSM1NCYrASIGHQEUFjsBMjY9ASMVIzUzFQEyFhURFAYjISImNRE0NjMDABgSgBIaGhKAEhhAVlbqGhKAEhgYEoASGkBWVgGUIjQzI/2sJDIyJAIqLBIYGBKsEhgYEiwWgBYsEhgYEqwSGBgSLBaAFgEsMyP+ACI0MyMCACI0AAAEANYA1gMqAyoABQALABEAFwAAATMVIzUjEzUzFSM1ATUzFSMVHQEzFSM1AlbUVICAVNT+gNSAgNQDKtSA/lSA1FQBLNRUgKyAVNQABABWAFYDqgOqAAMAHwA7AD8AAAE1MxUDMjc+ATc2NTQnLgEnJiMiBw4BBwYVFBceARcWEzIXHgEXFhUUBw4BBwYjIicuAScmNTQ3PgE3NhMRMxEB1lQqRj8+XRsbGxtdPj5HRj8+XRsbGxtdPj5HWE5OcyIhISJzTk1ZWE5OcyIhISJzTk0vVAKAVlb+KhsbXT4+R0Y/Pl0bGxsbXT4+R0Y/Pl0bGwMAISJzTk1ZWE5OcyIhISJzTk1ZWE5OcyIh/YABAP8AAAACAQAA1gMAAyoAAwAHAAABMxEjIREzEQJWqqr+qqoDKv2sAlT9rAAAAQFWANYDKgMqAAIAAAkCAVYB1P4sAyr+1v7WAAEArACqA1YDVgA0AAABNxEhNy4BIyIHDgEHBhUUFx4BFxYzMjc+ATc2NzMGBw4BBwYjIicuAScmNTQ3PgE3NjMyFgLyZP7UiiJdNTUvL0UUFBQURS8vNSomJz8YFw1YDh8fVzU2PEY+Pl0aGxsaXT49R0Z9AvJk/tSKIioUFEUvLzU1Ly9FFBQMDS0fHyY3Ly9FExMbG10+PkdGPz5dGxs1AAAAAQCqAIADVgPWAC4AAAEyFx4BFxYVFAcOAQcGIyInLgEnJjUzFBceARcWMzI3PgE3NjU0Jy4BJyYjFSc3AgBGPz5dGxsbG10+PkdGPz5dGxtWFBRFLy81NS8vRRQUFBRFLy811tYDKhsaXT49R0Y/Pl0bGxsbXT4+RzUvL0UUFBQURS8vNTUvL0UUFKzW1gAAAgBkAFYDnAOqAAsAWQAAATI2NTQmIyIGFRQWJRceAQ8BDgEvAQ4BDwEOASsBIiYvAS4BJwcGJi8BJjY/AS4BNTwBNycuAT8BPgEfAT4BPwE+ATsBMhYfAR4BFzc2Fh8BFgYPAR4BFRwBAgA9WVg+PVlYAXxaBgIEVgQOCGoQJBQQAQsIrAcLAhATJBFqBw4FVgQCBloBAQJaBgIEVgQOCGoQJBQQAQsIrAcLAhATJBFqBw4FVgQCBloBAQFqWD49WVg+PVlsRgQQCJQHBAMqDBYIcAcLCghwBxUOKgMDCJQHEAVGChULChULRgQQCJQHBAMqDBYIcAcLCghwBxUOKgMDCJQHEAVGChULChUAAAACANYAqgMWA1YABQAMAAATMzcRJyMlFAYHER4B1qrW1qoCQDwwMDwCgNb9VNaAOVsYAVgYWwAAAAEBKgCqAqoDVgAFAAABMzcRJyMBKqzU1KwCgNb9VNYAAwCAAIoDgAN2AB0AJAAqAAABFhceARcWFRQHDgEHBgc1Njc+ATc2NTQnLgEnJicTFAYHER4BJTM3EScjAlZANzdPFxYWF083NkEuJyc5DxAQDzknJi9qOjAwOv3AqtbWqgN2DiMiYz4+REQ+PWMjIw5YDRwbSy4uMzMuLksbGw7+4jlbGAFYGFtH1v1U1gAABADWANYDKgMqAAUACwARABcAAAEzFSM1MwM1MxUjFQE1MxUjNRE1MxUjNQKqgNRUVNSA/qxU1NRUAqpU1P2s1FSAAdSA1FT+rFTUgAAAAAAEAFYAVgOqA6oAGwA3ADsAPwAAJTI3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFhMyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYXMxEjFTMVIwIARj8+XRsbGxtdPj5HRj8+XRsbGxtdPj5HWE5OcyIhISJzTk1ZWE5OcyIhISJzTk0vVFRUVKobG10+PkdGPz5dGxsbG10+PkdGPz5dGxsDACEic05NWVhOTnMiISEic05NWVhOTnMiIdT/AFZWAAAABACAAIADgAOAAAIAFAAqADIAAAEVJycBBycOAQc1PgE3JxEnIxEzJwE0Jy4BJyYnNRYXHgEXFhUUBgcnPgEnHAEHJzUeAQIAWvACyjZYIk4sGzAVttaqysoCqhAPOScmL0A3N08XFhcVQAoMagJoMDoDVrRahP02NlgbKAtYBxoRtv7g1gEAyv62My4uSxsbDlgOIyJjPj5EMFsnQhk5HgcNBmheGFsAAQCSANYDgAMSAAUAAAkBFwEnNwGAAcQ8/gDuOgFMAcY8/gDuPAAAAAEBAAF2AwACsgAFAAABFzcXCQEBPMTEPP8A/wACssTEPP8AAQAAAAABAVYBFgKSAxYABQAAAQcJARcHApI8/wABADzEAVI8AQABADzEAAAAAQFuAQoCqgMKAAUAAAE3JzcJAQFuxMQ8AQD/AAFGxMQ8/wD/AAAAAAEBAAFuAwACqgAFAAABJwkBBycBPDwBAAEAPMQBbjwBAP8APMQAAAACAAAAuASbA0gADwATAAABISIGFREUFjMhMjY1ETQmAyERIQQY/Gs2TU02A5U2TU02/GsDlQNITTb+djZNTTYBijZN/fMBigACACsADgUrA/IAEAAUAAABISIGFREUFjMhMjY1ETQmIxEhESEEnPwdO1NTOwPjO1RUO/wdA+MD8lQ6/Tg6VFQ6Asg6VPyqAsgAAAAAAQAAAAEAAJtQdaFfDzz1AAsEAAAAAADacU/ZAAAAANpxT9kAAAAABSsD8gAAAAgAAgAAAAAAAAABAAAEAAAAAAAFVQAA/9UFKwABAAAAAAAAAAAAAAAAAAAAGQQAAAAAAAAAAAAAAAAAAAAEAACABAAA1gQAAFYEAAEABAABVgQAAKwEAACqBAAAZAQAANYEAAEqBAAAgAQAANYEAABWBAAAgAQAAJIEAAEABAABVgQAAW4EAAEABHAAAAVVACsAAAAAAAoAFAAeAHIAmAD8ARABHgFwAbgCQAJcAmwCtALcAz4DkgOmA7oDzgPiA/YEGgRAAAEAAAAZAFoABAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRwbC1pY29uAHAAbAAtAGkAYwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBwbC1pY29uAHAAbAAtAGkAYwBvAG5wbC1pY29uAHAAbAAtAGkAYwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJwbC1pY29uAHAAbAAtAGkAYwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(e,t){e.exports="data:font/woff;charset=utf-8;base64,d09GRgABAAAAAA0AAAsAAAAADLQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDtEG1GNtYXAAAAFoAAAAVAAAAFQXVtKbZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAACIAAAAiAADY+22hlYWQAAApEAAAANgAAADYZK+ShaGhlYQAACnwAAAAkAAAAJAktBURobXR4AAAKoAAAAGQAAABkWcUPaWxvY2EAAAsEAAAANAAAADQaEBxQbWF4cAAACzgAAAAgAAAAIAAeAFxuYW1lAAALWAAAAYYAAAGGFMWFd3Bvc3QAAAzgAAAAIAAAACAAAwAAAAMEFgGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6RQEAAAAAAAEAAAAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkU//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAwCAAKoDgANWABcALwA/AAABNTQmKwEiBh0BFBY7ATI2PQEjFSM1MxUjNTQmKwEiBh0BFBY7ATI2PQEjFSM1MxUBMhYVERQGIyEiJjURNDYzAwAYEoASGhoSgBIYQFZW6hoSgBIYGBKAEhpAVlYBlCI0MyP9rCQyMiQCKiwSGBgSrBIYGBIsFoAWLBIYGBKsEhgYEiwWgBYBLDMj/gAiNDMjAgAiNAAABADWANYDKgMqAAUACwARABcAAAEzFSM1IxM1MxUjNQE1MxUjFR0BMxUjNQJW1FSAgFTU/oDUgIDUAyrUgP5UgNRUASzUVICsgFTUAAQAVgBWA6oDqgADAB8AOwA/AAABNTMVAzI3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFhMyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYTETMRAdZUKkY/Pl0bGxsbXT4+R0Y/Pl0bGxsbXT4+R1hOTnMiISEic05NWVhOTnMiISEic05NL1QCgFZW/iobG10+PkdGPz5dGxsbG10+PkdGPz5dGxsDACEic05NWVhOTnMiISEic05NWVhOTnMiIf2AAQD/AAAAAgEAANYDAAMqAAMABwAAATMRIyERMxECVqqq/qqqAyr9rAJU/awAAAEBVgDWAyoDKgACAAAJAgFWAdT+LAMq/tb+1gABAKwAqgNWA1YANAAAATcRITcuASMiBw4BBwYVFBceARcWMzI3PgE3NjczBgcOAQcGIyInLgEnJjU0Nz4BNzYzMhYC8mT+1IoiXTU1Ly9FFBQUFEUvLzUqJic/GBcNWA4fH1c1NjxGPj5dGhsbGl0+PUdGfQLyZP7UiiIqFBRFLy81NS8vRRQUDA0tHx8mNy8vRRMTGxtdPj5HRj8+XRsbNQAAAAEAqgCAA1YD1gAuAAABMhceARcWFRQHDgEHBiMiJy4BJyY1MxQXHgEXFjMyNz4BNzY1NCcuAScmIxUnNwIARj8+XRsbGxtdPj5HRj8+XRsbVhQURS8vNTUvL0UUFBQURS8vNdbWAyobGl0+PUdGPz5dGxsbG10+Pkc1Ly9FFBQUFEUvLzU1Ly9FFBSs1tYAAAIAZABWA5wDqgALAFkAAAEyNjU0JiMiBhUUFiUXHgEPAQ4BLwEOAQ8BDgErASImLwEuAScHBiYvASY2PwEuATU8ATcnLgE/AT4BHwE+AT8BPgE7ATIWHwEeARc3NhYfARYGDwEeARUcAQIAPVlYPj1ZWAF8WgYCBFYEDghqECQUEAELCKwHCwIQEyQRagcOBVYEAgZaAQECWgYCBFYEDghqECQUEAELCKwHCwIQEyQRagcOBVYEAgZaAQEBalg+PVlYPj1ZbEYEEAiUBwQDKgwWCHAHCwoIcAcVDioDAwiUBxAFRgoVCwoVC0YEEAiUBwQDKgwWCHAHCwoIcAcVDioDAwiUBxAFRgoVCwoVAAAAAgDWAKoDFgNWAAUADAAAEzM3EScjJRQGBxEeAdaq1taqAkA8MDA8AoDW/VTWgDlbGAFYGFsAAAABASoAqgKqA1YABQAAATM3EScjASqs1NSsAoDW/VTWAAMAgACKA4ADdgAdACQAKgAAARYXHgEXFhUUBw4BBwYHNTY3PgE3NjU0Jy4BJyYnExQGBxEeASUzNxEnIwJWQDc3TxcWFhdPNzZBLicnOQ8QEA85JyYvajowMDr9wKrW1qoDdg4jImM+PkREPj1jIyMOWA0cG0suLjMzLi5LGxsO/uI5WxgBWBhbR9b9VNYAAAQA1gDWAyoDKgAFAAsAEQAXAAABMxUjNTMDNTMVIxUBNTMVIzURNTMVIzUCqoDUVFTUgP6sVNTUVAKqVNT9rNRUgAHUgNRU/qxU1IAAAAAABABWAFYDqgOqABsANwA7AD8AACUyNz4BNzY1NCcuAScmIyIHDgEHBhUUFx4BFxYTMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2FzMRIxUzFSMCAEY/Pl0bGxsbXT4+R0Y/Pl0bGxsbXT4+R1hOTnMiISEic05NWVhOTnMiISEic05NL1RUVFSqGxtdPj5HRj8+XRsbGxtdPj5HRj8+XRsbAwAhInNOTVlYTk5zIiEhInNOTVlYTk5zIiHU/wBWVgAAAAQAgACAA4ADgAACABQAKgAyAAABFScnAQcnDgEHNT4BNycRJyMRMycBNCcuAScmJzUWFx4BFxYVFAYHJz4BJxwBByc1HgECAFrwAso2WCJOLBswFbbWqsrKAqoQDzknJi9ANzdPFxYXFUAKDGoCaDA6A1a0WoT9NjZYGygLWAcaEbb+4NYBAMr+tjMuLksbGw5YDiMiYz4+RDBbJ0IZOR4HDQZoXhhbAAEAkgDWA4ADEgAFAAAJARcBJzcBgAHEPP4A7joBTAHGPP4A7jwAAAABAQABdgMAArIABQAAARc3FwkBATzExDz/AP8AArLExDz/AAEAAAAAAQFWARYCkgMWAAUAAAEHCQEXBwKSPP8AAQA8xAFSPAEAAQA8xAAAAAEBbgEKAqoDCgAFAAABNyc3CQEBbsTEPAEA/wABRsTEPP8A/wAAAAABAQABbgMAAqoABQAAAScJAQcnATw8AQABADzEAW48AQD/ADzEAAAAAgAAALgEmwNIAA8AEwAAASEiBhURFBYzITI2NRE0JgMhESEEGPxrNk1NNgOVNk1NNvxrA5UDSE02/nY2TU02AYo2Tf3zAYoAAgArAA4FKwPyABAAFAAAASEiBhURFBYzITI2NRE0JiMRIREhBJz8HTtTUzsD4ztUVDv8HQPjA/JUOv04OlRUOgLIOlT8qgLIAAAAAAEAAAABAACbUHWhXw889QALBAAAAAAA2nFP2QAAAADacU/ZAAAAAAUrA/IAAAAIAAIAAAAAAAAAAQAABAAAAAAABVUAAP/VBSsAAQAAAAAAAAAAAAAAAAAAABkEAAAAAAAAAAAAAAAAAAAABAAAgAQAANYEAABWBAABAAQAAVYEAACsBAAAqgQAAGQEAADWBAABKgQAAIAEAADWBAAAVgQAAIAEAACSBAABAAQAAVYEAAFuBAABAARwAAAFVQArAAAAAAAKABQAHgByAJgA/AEQAR4BcAG4AkACXAJsArQC3AM+A5IDpgO6A84D4gP2BBoEQAABAAAAGQBaAAQAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkcGwtaWNvbgBwAGwALQBpAGMAbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwcGwtaWNvbgBwAGwALQBpAGMAbwBucGwtaWNvbgBwAGwALQBpAGMAbwBuUmVndWxhcgBSAGUAZwB1AGwAYQBycGwtaWNvbgBwAGwALQBpAGMAbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(e,t){e.exports="data:image/svg+xml;charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiID4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8bWV0YWRhdGE+R2VuZXJhdGVkIGJ5IEljb01vb248L21ldGFkYXRhPgo8ZGVmcz4KPGZvbnQgaWQ9InBsLWljb24iIGhvcml6LWFkdi14PSIxMDI0Ij4KPGZvbnQtZmFjZSB1bml0cy1wZXItZW09IjEwMjQiIGFzY2VudD0iMTAyNCIgZGVzY2VudD0iMCIgLz4KPG1pc3NpbmctZ2x5cGggaG9yaXotYWR2LXg9IjEwMjQiIC8+CjxnbHlwaCB1bmljb2RlPSImI3gyMDsiIGhvcml6LWFkdi14PSIwIiBkPSIiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTAwOyIgZ2x5cGgtbmFtZT0iY2FwdGlvbiIgZD0iTTc2OCA1NTR2NDRjMCAyNC0xOCA0Mi00MiA0MmgtMTI4Yy0yNCAwLTQ0LTE4LTQ0LTQydi0xNzJjMC0yNCAyMC00MiA0NC00MmgxMjhjMjQgMCA0MiAxOCA0MiA0MnY0NGgtNjR2LTIyaC04NnYxMjhoODZ2LTIyaDY0ek00NzAgNTU0djQ0YzAgMjQtMjAgNDItNDQgNDJoLTEyOGMtMjQgMC00Mi0xOC00Mi00MnYtMTcyYzAtMjQgMTgtNDIgNDItNDJoMTI4YzI0IDAgNDQgMTggNDQgNDJ2NDRoLTY0di0yMmgtODZ2MTI4aDg2di0yMmg2NHpNODEwIDg1NGM0NiAwIDg2LTQwIDg2LTg2di01MTJjMC00Ni00MC04Ni04Ni04NmgtNTk2Yy00OCAwLTg2IDQwLTg2IDg2djUxMmMwIDQ2IDM4IDg2IDg2IDg2aDU5NnoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTAxOyIgZ2x5cGgtbmFtZT0iZnVsbHNjcmVlbiIgZD0iTTU5OCA4MTBoMjEydi0yMTJoLTg0djEyOGgtMTI4djg0ek03MjYgMjk4djEyOGg4NHYtMjEyaC0yMTJ2ODRoMTI4ek0yMTQgNTk4djIxMmgyMTJ2LTg0aC0xMjh2LTEyOGgtODR6TTI5OCA0MjZ2LTEyOGgxMjh2LTg0aC0yMTJ2MjEyaDg0eiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDI7IiBnbHlwaC1uYW1lPSJpbmZvX291dGxpbmUiIGQ9Ik00NzAgNjQwdjg2aDg0di04NmgtODR6TTUxMiAxNzBjMTg4IDAgMzQyIDE1NCAzNDIgMzQycy0xNTQgMzQyLTM0MiAzNDItMzQyLTE1NC0zNDItMzQyIDE1NC0zNDIgMzQyLTM0MnpNNTEyIDkzOGMyMzYgMCA0MjYtMTkwIDQyNi00MjZzLTE5MC00MjYtNDI2LTQyNi00MjYgMTkwLTQyNiA0MjYgMTkwIDQyNiA0MjYgNDI2ek00NzAgMjk4djI1Nmg4NHYtMjU2aC04NHoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTAzOyIgZ2x5cGgtbmFtZT0icGF1c2UiIGQ9Ik01OTggODEwaDE3MHYtNTk2aC0xNzB2NTk2ek0yNTYgMjE0djU5NmgxNzB2LTU5NmgtMTcweiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDQ7IiBnbHlwaC1uYW1lPSJwbGF5X2Fycm93IiBkPSJNMzQyIDgxMGw0NjgtMjk4LTQ2OC0yOTh2NTk2eiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDU7IiBnbHlwaC1uYW1lPSJyZWZyZXNoIiBkPSJNNzU0IDc1NGwxMDAgMTAwdi0zMDBoLTMwMGwxMzggMTM4Yy00NiA0Ni0xMTAgNzYtMTgwIDc2LTE0MiAwLTI1Ni0xMTQtMjU2LTI1NnMxMTQtMjU2IDI1Ni0yNTZjMTEyIDAgMjA4IDcwIDI0MiAxNzBoODhjLTM4LTE0OC0xNzAtMjU2LTMzMC0yNTYtMTg4IDAtMzQwIDE1NC0zNDAgMzQyczE1MiAzNDIgMzQwIDM0MmM5NCAwIDE4MC0zOCAyNDItMTAweiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDY7IiBnbHlwaC1uYW1lPSJyZXBsYXkiIGQ9Ik01MTIgODEwYzE4OCAwIDM0Mi0xNTIgMzQyLTM0MHMtMTU0LTM0Mi0zNDItMzQyLTM0MiAxNTQtMzQyIDM0Mmg4NmMwLTE0MiAxMTQtMjU2IDI1Ni0yNTZzMjU2IDExNCAyNTYgMjU2LTExNCAyNTYtMjU2IDI1NnYtMTcybC0yMTQgMjE0IDIxNCAyMTR2LTE3MnoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTA3OyIgZ2x5cGgtbmFtZT0ic2V0dGluZ3MiIGQ9Ik01MTIgMzYyYzgyIDAgMTUwIDY4IDE1MCAxNTBzLTY4IDE1MC0xNTAgMTUwLTE1MC02OC0xNTAtMTUwIDY4LTE1MCAxNTAtMTUwek04MzAgNDcwbDkwLTcwYzgtNiAxMC0xOCA0LTI4bC04Ni0xNDhjLTYtMTAtMTYtMTItMjYtOGwtMTA2IDQyYy0yMi0xNi00Ni0zMi03Mi00MmwtMTYtMTEyYy0yLTEwLTEwLTE4LTIwLTE4aC0xNzJjLTEwIDAtMTggOC0yMCAxOGwtMTYgMTEyYy0yNiAxMC01MCAyNC03MiA0MmwtMTA2LTQyYy0xMC00LTIwLTItMjYgOGwtODYgMTQ4Yy02IDEwLTQgMjIgNCAyOGw5MCA3MGMtMiAxNC0yIDI4LTIgNDJzMCAyOCAyIDQybC05MCA3MGMtOCA2LTEwIDE4LTQgMjhsODYgMTQ4YzYgMTAgMTYgMTIgMjYgOGwxMDYtNDJjMjIgMTYgNDYgMzIgNzIgNDJsMTYgMTEyYzIgMTAgMTAgMTggMjAgMThoMTcyYzEwIDAgMTgtOCAyMC0xOGwxNi0xMTJjMjYtMTAgNTAtMjQgNzItNDJsMTA2IDQyYzEwIDQgMjAgMiAyNi04bDg2LTE0OGM2LTEwIDQtMjItNC0yOGwtOTAtNzBjMi0xNCAyLTI4IDItNDJzMC0yOC0yLTQyeiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDg7IiBnbHlwaC1uYW1lPSJ2b2x1bWVfZG93biIgZD0iTTIxNCA2NDBoMTcwbDIxNCAyMTR2LTY4NGwtMjE0IDIxNGgtMTcwdjI1NnpNNzkwIDUxMmMwLTc2LTQ0LTE0MC0xMDgtMTcydjM0NGM2NC0zMiAxMDgtOTYgMTA4LTE3MnoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTA5OyIgZ2x5cGgtbmFtZT0idm9sdW1lX211dGUiIGQ9Ik0yOTggNjQwaDE3MmwyMTIgMjE0di02ODRsLTIxMiAyMTRoLTE3MnYyNTZ6IiAvPgo8Z2x5cGggdW5pY29kZT0iJiN4ZTkwYTsiIGdseXBoLW5hbWU9InZvbHVtZV91cCIgZD0iTTU5OCA4ODZjMTcyLTM4IDI5OC0xOTIgMjk4LTM3NHMtMTI2LTMzNi0yOTgtMzc0djg4YzEyNCAzNiAyMTIgMTUwIDIxMiAyODZzLTg4IDI1MC0yMTIgMjg2djg4ek03MDQgNTEyYzAtNzYtNDItMTQwLTEwNi0xNzJ2MzQ0YzY0LTMyIDEwNi05NiAxMDYtMTcyek0xMjggNjQwaDE3MGwyMTQgMjE0di02ODRsLTIxNCAyMTRoLTE3MHYyNTZ6IiAvPgo8Z2x5cGggdW5pY29kZT0iJiN4ZTkwYjsiIGdseXBoLW5hbWU9ImZ1bGxzY3JlZW5fZXhpdCIgZD0iTTY4MiA2ODJoMTI4di04NGgtMjEydjIxMmg4NHYtMTI4ek01OTggMjE0djIxMmgyMTJ2LTg0aC0xMjh2LTEyOGgtODR6TTM0MiA2ODJ2MTI4aDg0di0yMTJoLTIxMnY4NGgxMjh6TTIxNCAzNDJ2ODRoMjEydi0yMTJoLTg0djEyOGgtMTI4eiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MGM7IiBnbHlwaC1uYW1lPSJlcnJvcl9vdXRsaW5lIiBkPSJNNTEyIDE3MGMxODggMCAzNDIgMTU0IDM0MiAzNDJzLTE1NCAzNDItMzQyIDM0Mi0zNDItMTU0LTM0Mi0zNDIgMTU0LTM0MiAzNDItMzQyek01MTIgOTM4YzIzNiAwIDQyNi0xOTAgNDI2LTQyNnMtMTkwLTQyNi00MjYtNDI2LTQyNiAxOTAtNDI2IDQyNiAxOTAgNDI2IDQyNiA0MjZ6TTQ3MCA3MjZoODR2LTI1NmgtODR2MjU2ek00NzAgMzg0aDg0di04NmgtODR2ODZ6IiAvPgo8Z2x5cGggdW5pY29kZT0iJiN4ZTkwZDsiIGdseXBoLW5hbWU9InZvbHVtZV9vZmYiIGQ9Ik01MTIgODU0di0xODBsLTkwIDkwek0xODIgODk2bDcxNC03MTQtNTQtNTQtODggODhjLTQ2LTM2LTk4LTY0LTE1Ni03OHY4OGMzNiAxMCA2OCAyOCA5NiA1MGwtMTgyIDE4MnYtMjg4bC0yMTQgMjE0aC0xNzB2MjU2aDIwMmwtMjAyIDIwMnpNODEwIDUxMmMwIDEzNi04OCAyNTAtMjEyIDI4NnY4OGMxNzItMzggMjk4LTE5MiAyOTgtMzc0IDAtNjQtMTYtMTI2LTQ0LTE3OGwtNjQgNjZjMTQgMzQgMjIgNzIgMjIgMTEyek03MDQgNTEyYzAtMTAgMC0xOC0yLTI2bC0xMDQgMTA0djk0YzY0LTMyIDEwNi05NiAxMDYtMTcyeiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MGU7IiBnbHlwaC1uYW1lPSJkb25lIiBkPSJNMzg0IDMzMmw0NTIgNDU0IDYwLTYwLTUxMi01MTItMjM4IDIzOCA1OCA2MHoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTBmOyIgZ2x5cGgtbmFtZT0ia2V5Ym9hcmRfYXJyb3dfZG93biIgZD0iTTMxNiA2OTBsMTk2LTE5NiAxOTYgMTk2IDYwLTYwLTI1Ni0yNTYtMjU2IDI1NnoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTEwOyIgZ2x5cGgtbmFtZT0ia2V5Ym9hcmRfYXJyb3dfbGVmdCIgZD0iTTY1OCAzMzhsLTYwLTYwLTI1NiAyNTYgMjU2IDI1NiA2MC02MC0xOTYtMTk2eiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MTE7IiBnbHlwaC1uYW1lPSJrZXlib2FyZF9hcnJvd19yaWdodCIgZD0iTTM2NiAzMjZsMTk2IDE5Ni0xOTYgMTk2IDYwIDYwIDI1Ni0yNTYtMjU2LTI1NnoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTEyOyIgZ2x5cGgtbmFtZT0ia2V5Ym9hcmRfYXJyb3dfdXAiIGQ9Ik0zMTYgMzY2bC02MCA2MCAyNTYgMjU2IDI1Ni0yNTYtNjAtNjAtMTk2IDE5NnoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTEzOyIgZ2x5cGgtbmFtZT0idGhlYXRlci1taW5pIiBob3Jpei1hZHYteD0iMTEzNiIgZD0iTTEwNDguMDQyIDgzOS41MTJoLTkxNy4wMzdjLTcyLjA1MiAwLTEzMS4wMDUtNTguOTUzLTEzMS4wMDUtMTMxLjAwNXYtMzkzLjAxNWMwLTcyLjA1MiA1OC45NTMtMTMxLjAwNSAxMzEuMDA1LTEzMS4wMDVoOTE3LjAzN2M3Mi4wNTIgMCAxMzEuMDA1IDU4Ljk1MyAxMzEuMDA1IDEzMS4wMDV2MzkzLjAxNWMwIDcyLjA1Mi01OC45NTMgMTMxLjAwNS0xMzEuMDA1IDEzMS4wMDV6TTEwNDguMDQyIDMxNS40OWgtOTE3LjAzN3YzOTMuMDE1aDkxNy4wMzd2LTM5My4wMTV6IiAvPgo8Z2x5cGggdW5pY29kZT0iJiN4ZTkxNDsiIGdseXBoLW5hbWU9InRoZWF0ZXIiIGhvcml6LWFkdi14PSIxMzY1IiBkPSJNMTE4MC40NDQgMTAwOS43NzhoLTk5NS41NTZjLTc4LjIyMiAwLTE0Mi4yMjItNjQtMTQyLjIyMi0xNDIuMjIydi03MTEuMTExYzAtNzguMjIyIDY0LTE0Mi4yMjIgMTQyLjIyMi0xNDIuMjIyaDk5NS41NTZjNzguMjIyIDAgMTQyLjIyMiA2NCAxNDIuMjIyIDE0Mi4yMjJ2NzExLjExMWMwIDc4LjIyMi02NCAxNDIuMjIyLTE0Mi4yMjIgMTQyLjIyMnpNMTE4MC40NDQgMTU2LjQ0NGgtOTk1LjU1NnY3MTEuMTExaDk5NS41NTZ2LTcxMS4xMTF6IiAvPgo8L2ZvbnQ+PC9kZWZzPjwvc3ZnPg=="},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,r){var n=r(20);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,"[data-no-op]{position:absolute;height:100%;width:100%;text-align:center;background-color:#777;z-index:100}[data-no-op] p[data-no-op-msg]{position:absolute;text-align:center;font-size:2.5em;left:0;right:0;color:white;padding:1em;top:50%;transform:translateY(-50%);max-height:100%;overflow:auto}\n",""])},function(e,t,r){var n=r(22);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--control-left{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;flex-grow:1}.\\--z--player .\\--z--control-right{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;align-items:center;margin-right:1em}.\\--z--player .\\--z--control-right.\\--z--only-right-control{justify-content:flex-end;flex:1;padding:0.9em 0 0.4em}.\\--z--player .\\--z--controls-wrapper{position:absolute;width:100%;bottom:0;height:6em;background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.8))}.\\--z--player .\\--z--controls-wrapper.\\--z--bg-gradient,.\\--z--player .\\--z--controls-wrapper.\\--z--full-width{background-image:none}.\\--z--player .\\--z--controls{-webkit-transition:opacity 0.3s ease-out;-moz-transition:opacity 0.3s ease-out;transition:opacity 0.3s ease-out;display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;position:absolute;bottom:0;left:2em;width:calc(100% - 2em * 2);text-shadow:0 0 2px #000;flex-wrap:wrap;justify-content:center;align-items:center;opacity:1;padding:0.5em 0}.\\--z--player .\\--z--controls.\\--z--full-width{left:0;width:100%;background-color:rgba(0,0,0,0.5)}.\\--z--player .\\--z--controls.\\--z--full-width .\\--z--progress-bar .\\--z--bar-bg{background-color:#fff}.\\--z--player .\\--z--controls.\\--z--full-width.\\--z--bg-transparent{background-color:transparent}.\\--z--player .\\--z--controls.\\--z--full-width.\\--z--bg-gradient{padding-top:2em;background-image:linear-gradient(to bottom, transparent, rgba(0,0,0,0.8));background-color:transparent}.\\--z--player .\\--z--controls.\\--z--full-width.\\--z--bg-gradient.\\--z--to-top{background-image:linear-gradient(to top, transparent, rgba(0,0,0,0.8))}.\\--z--player .\\--z--controls.\\--z--full-width.\\--z--bg-gradient .\\--z--progress-bar{position:relative;bottom:-0.3em}.\\--z--player .\\--z--controls .\\--z--control{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;justify-content:center;align-items:center;padding:0}.\\--z--player .\\--z--controls .\\--z--control .\\--z--icon{font-size:3em}.\\--z--player .\\--z--controls .\\--z--control-play,.\\--z--player .\\--z--controls .\\--z--control-next,.\\--z--player .\\--z--controls .\\--z--control-settings,.\\--z--player .\\--z--controls .\\--z--control-caption,.\\--z--player .\\--z--controls .\\--z--control-full-screen{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex}.\\--z--player .\\--z--controls .\\--z--control-play{margin-left:1em;margin-right:.2em}.\\--z--player .\\--z--controls .\\--z--control-settings,.\\--z--player .\\--z--controls .\\--z--control-caption,.\\--z--player .\\--z--controls .\\--z--control-full-screen{padding:0 0.7em}.\\--z--player .\\--z--controls .\\--z--control-settings .\\--z--icon,.\\--z--player .\\--z--controls .\\--z--control-caption .\\--z--icon,.\\--z--player .\\--z--controls .\\--z--control-full-screen .\\--z--icon{font-size:2.2em}.\\--z--player .\\--z--controls .\\--z--control-full-screen{padding:0.2em}.\\--z--player .\\--z--controls .\\--z--control-full-screen .\\--z--icon{font-size:2.7em}.\\--z--player .\\--z--controls .\\--z--control-volume .\\--z--btn .\\--z--icon{font-size:2.5em}.\\--z--player .\\--z--controls .\\--z--control-caption.\\--z--active .\\--z--icon{color:#27baf4}.\\--z--player .\\--z--controls .\\--z--control-theater-mode .\\--z--icon.pl-ic-theater{font-size:1.6em}.\\--z--player .\\--z--controls .\\--z--control-theater-mode .\\--z--icon.pl-ic-theater-mini{font-size:2em}\n",""])},function(e,t,r){var n=r(24);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,"",""])},function(e,t,r){var n=r(26);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--controls .\\--z--progress-bar{position:absolute;bottom:3.2em;width:100%;height:2em;cursor:pointer}.\\--z--player .\\--z--controls .\\--z--progress-bar .\\--z--bar{-webkit-transition:height 0.2s,transform 0.2s cubic-bezier(0, 0, 0.2, 1),top 0.2s;-moz-transition:height 0.2s,transform 0.2s cubic-bezier(0, 0, 0.2, 1),top 0.2s;transition:height 0.2s,transform 0.2s cubic-bezier(0, 0, 0.2, 1),top 0.2s;height:0.3em;top:0.9em}.\\--z--player .\\--z--controls .\\--z--progress-bar .\\--z--bar .\\--z--bullet{-webkit-transition:all 0.2s,width 0s;-moz-transition:all 0.2s,width 0s;transition:all 0.2s,width 0s;height:0;width:0;top:0}.\\--z--player .\\--z--controls .\\--z--progress-bar.active .\\--z--bar,.\\--z--player .\\--z--controls .\\--z--progress-bar:hover .\\--z--bar{height:0.5em;top:0.8em}.\\--z--player .\\--z--controls .\\--z--progress-bar.active .\\--z--bar .\\--z--bullet,.\\--z--player .\\--z--controls .\\--z--progress-bar:hover .\\--z--bar .\\--z--bullet{height:1.2em;width:1.2em;top:-0.4em}.\\--z--player .\\--z--controls .\\--z--progress-bar .\\--z--seek-time{-webkit-border-radius:.2em;-moz-border-radius:.2em;border-radius:.2em;color:#f7f7f7;background-color:rgba(0,0,0,0.6);padding:0.2em 0.5em;font-size:1.1em;position:absolute;white-space:nowrap;top:-1.9em;left:0}.\\--z--player .\\--z--controls .\\--z--progress-bar .\\--z--seek-time::before{border-left:0.4em solid transparent;border-right:0.4em solid transparent;border-top:0.4em solid rgba(0,0,0,0.6);content:'';transform:translateX(-50%);position:absolute;bottom:-0.4em;left:50%}\n",""])},function(e,t,r){var n=r(28);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--controls .\\--z--bar-fill-recent{width:0;background-color:#27baf4}.\\--z--player .\\--z--controls .\\--z--bar-fill-recent .\\--z--bullet{height:1.4em;width:1.4em;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:inline-block;background-color:#f7f7f7;box-shadow:0 0 1px #f7f7f7;position:absolute;top:-0.6em;right:-0.6em}\n",""])},function(e,t,r){var n=r(30);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--controls .\\--z--bar-fill-load{width:0;background-color:#c2c2c2}\n",""])},function(e,t,r){var n=r(32);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--controls .\\--z--bar{-webkit-border-radius:.15em;-moz-border-radius:.15em;border-radius:.15em;cursor:pointer;height:.3em;position:absolute;display:inline-block;top:1.4em;left:0}.\\--z--player .\\--z--controls .\\--z--bar-bg{width:100%;background-color:rgba(255,255,255,0.5)}\n",""])},function(e,t,r){var n=r(34);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--controls .\\--z--control-time{line-height:4em;padding:0;display:flex;align-items:center;margin-left:0.7em;margin-right:0.7em;font-size:1.1em;color:#fff}.\\--z--player .\\--z--controls .\\--z--control-time>span{font-weight:500;line-height:2em;color:#f7f7f7;display:inline-block;font-size:1.2em}.\\--z--player .\\--z--controls .\\--z--control-time>span:first-child{padding-right:0.5em}.\\--z--player .\\--z--controls .\\--z--control-time>span:last-child{padding-left:0.5em}\n",""])},function(e,t,r){var n=r(36);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--controls .\\--z--control-volume{margin-left:0.7em;margin-right:0.7em}.\\--z--player .\\--z--controls .\\--z--control-volume.\\--z--hide-animation .\\--z--volume-bar{width:0;opacity:0;margin:0;overflow:hidden;will-change:width, opacity, margin-left;-webkit-transition:width 0.2s,opacity 0.2s,margin-left 0.2s;-moz-transition:width 0.2s,opacity 0.2s,margin-left 0.2s;transition:width 0.2s,opacity 0.2s,margin-left 0.2s}.\\--z--player .\\--z--controls .\\--z--control-volume.\\--z--hide-animation:hover .\\--z--volume-bar{width:7em;opacity:1;margin-left:1.3em;margin-right:0.8em;overflow:visible}\n",""])},function(e,t,r){var n=r(38);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--controls .\\--z--control-volume .\\--z--volume-icon{vertical-align:top}\n",""])},function(e,t,r){var n=r(40);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--controls .\\--z--control-volume .\\--z--volume-bar{width:7em;height:3em;display:inline-block;position:relative;vertical-align:top;margin-left:1.3em;margin-right:.8em}@media (max-width: 768px){.\\--z--player .\\--z--controls .\\--z--control-volume .\\--z--volume-bar{display:none}}\n",""])},function(e,t,r){var n=r(42);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,"",""])},function(e,t,r){var n=r(44);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,'.\\--z--player .\\--z--btn-settings{position:relative}.\\--z--player .\\--z--btn-settings .\\--z--badge{-webkit-border-radius:.1em;-moz-border-radius:.1em;border-radius:.1em;position:absolute;right:-0.5em;top:0;display:inline-block;padding:0 0.2em;font-size:0.8em;font-weight:900;color:#fff;background-color:#f00}.\\--z--player .\\--z--zpl-settings-menu{position:absolute;bottom:5em;right:2em;border-radius:0.2em;background-color:rgba(0,0,0,0.8);text-shadow:0 0 2px rgba(0,0,0,0.5);overflow:hidden;display:none;z-index:1}.\\--z--player .\\--z--zpl-settings-menu .\\--z--panel-scroll-wrapper{max-height:15.2em;max-height:attr(height);overflow-y:auto;overflow-x:hidden}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel{position:relative;bottom:0;right:0;overflow-y:auto;overflow-x:hidden}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .hd{color:#27baf4;text-transform:uppercase;margin-left:0.3em;font-weight:500}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-menu-item{display:table-row;cursor:default;outline:none;height:2.8em;white-space:nowrap}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-menu-item:not([aria-disabled=true]){cursor:pointer}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-menu-item .\\--z--zpl-item-label,.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-menu-item .\\--z--zpl-item-content{display:table-cell;vertical-align:middle;padding:0 1em;white-space:nowrap}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-menu-item:hover{background-color:rgba(255,255,255,0.1)}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-header{border-bottom:0.1em solid rgba(255,255,255,0.2);line-height:inherit;height:2.8em;white-space:nowrap;display:flex;align-items:center}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-header+.\\--z--panel-scroll-wrapper{max-height:18em}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-header .\\--z--panel-title{font-size:1.2em;color:#eee;float:left;padding:0 1em 0 0.5em}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-header .\\--z--zpl-options{color:#fff;font-size:1.1em;float:right;text-decoration:underline;padding:0 1em 0 0;cursor:pointer}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-header [class^="pl-ic-"],.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-header [class*=" pl-ic-"]{font-size:1.8em;color:#fff;vertical-align:middle}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-menu{padding:.6em 0;display:table;width:100%;color:#eee;box-sizing:border-box}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-menu .\\--z--zpl-menu-item .\\--z--zpl-item-label{border-bottom:none;text-align:right;font-size:1.2em}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-menu .\\--z--zpl-menu-item .\\--z--zpl-item-label [class^="pl-ic-"],.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-menu .\\--z--zpl-menu-item .\\--z--zpl-item-label [class*=" pl-ic-"]{font-size:1.3em;color:#fff}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-menu .\\--z--zpl-menu-item .\\--z--zpl-item-label i{float:left;position:relative;top:0.1em;visibility:hidden}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-menu .\\--z--zpl-menu-item .\\--z--zpl-item-label .txt{padding-left:2em}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-menu .\\--z--zpl-menu-item[aria-checked="true"] .\\--z--zpl-item-label i{visibility:visible}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner{padding:.6em 0;display:table;width:100%;height:100%;color:#eee;box-sizing:border-box}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-menu-item{line-height:normal}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-menu-item[aria-checked="true"] .\\--z--zpl-toggle-checkbox{background-color:#f00}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-menu-item[aria-checked="true"] .\\--z--zpl-toggle-checkbox::after{background-color:#fff;-moz-transform:translateX(1.3em);-o-transform:translateX(1.3em);-ms-transform:translateX(1.3em);-webkit-transform:translateX(1.3em);transform:translateX(1.3em)}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-item-label{color:#fff;font-size:1.3em}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-item-content{text-align:right;font-size:1.1em}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-item-content .\\--z--zpl-toggle-checkbox{height:1.2em;width:3em;float:right;position:relative;border-radius:1.4em;background:rgba(255,255,255,0.3);-moz-transform:scale(1);-o-transform:scale(1);-ms-transform:scale(1);-webkit-transform:scale(1);transform:scale(1);-webkit-transition:all 0.08s cubic-bezier(0.4, 0, 1, 1);-moz-transition:all 0.08s cubic-bezier(0.4, 0, 1, 1);transition:all 0.08s cubic-bezier(0.4, 0, 1, 1)}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-item-content .\\--z--zpl-toggle-checkbox::after{content:\'\';position:absolute;top:0;left:0;height:1.8em;width:1.8em;border-radius:50%;margin-top:-0.3em;background-color:#bdbdbd;box-shadow:0 1px 5px 0 rgba(0,0,0,0.6);-webkit-transition:all 0.08s cubic-bezier(0.4, 0, 1, 1);-moz-transition:all 0.08s cubic-bezier(0.4, 0, 1, 1);transition:all 0.08s cubic-bezier(0.4, 0, 1, 1)}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-item-content .\\--z--zpl-has-expand{display:flex;justify-content:flex-end;align-items:center}.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-item-content .\\--z--zpl-has-expand [class^="pl-ic-"],.\\--z--player .\\--z--zpl-settings-menu .\\--z--zpl-panel .\\--z--zpl-panel-inner .\\--z--zpl-item-content .\\--z--zpl-has-expand [class*=" pl-ic-"]{font-size:1.3em;color:#fff;margin-left:0.3em}\n',""])},function(e,t,r){var n={"./blue.scss":[63,1],"./green.scss":[64,2],"./light_blue.scss":[65,3],"./purple.scss":[66,4],"./red.scss":[67,5]};function i(e){var t=n[e];return t?r.e(t[1]).then((function(){var e=t[0];return r.t(e,7)})):Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return Object.keys(n)},i.id=45,e.exports=i},function(e,t,r){var n=r(47);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--player-poster{position:absolute;height:100%;top:0;left:0;right:0;bottom:0;margin:0;padding:0;display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:cover;background-color:#000;cursor:pointer}\n",""])},function(e,t,r){var n=r(49);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--loading-wrapper{-moz-transform:translate(-50%, -50%);-o-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);position:absolute;z-index:999;right:auto;top:50%;left:50%;padding:0;display:none}.\\--z--player .\\--z--loading-wrapper.\\--z--active{display:block}.\\--z--player .\\--z--pie-wrapper{height:6em;width:6em;line-height:6em;position:relative}.\\--z--player .\\--z--pie-wrapper .\\--z--pie{clip:rect(0, 6em, 6em, 3em);position:absolute;top:0;left:0;height:100%;width:100%}.\\--z--player .\\--z--pie-wrapper .\\--z--pie .\\--z--half-circle{height:100%;width:100%;border:0.4em solid #fff;border-radius:50%;clip:rect(0, 3em, 6em, 0);left:0;position:absolute;top:0}.\\--z--player .\\--z--pie-wrapper .\\--z--label{background:transparent;color:#fff;cursor:default;display:block;font-size:1.6em;font-weight:500;position:absolute;bottom:0;right:0;left:0;top:0;text-align:center;border-radius:50%;background-color:rgba(0,0,0,0.5)}.\\--z--player .\\--z--pie-wrapper .\\--z--shadow{height:100%;width:100%;border:0.4em solid rgba(255,255,255,0.5);border-radius:50%}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-1 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-1 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-1 .\\--z--pie .\\--z--left-side{transform:rotate(3.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-2 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-2 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-2 .\\--z--pie .\\--z--left-side{transform:rotate(7.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-3 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-3 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-3 .\\--z--pie .\\--z--left-side{transform:rotate(10.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-4 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-4 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-4 .\\--z--pie .\\--z--left-side{transform:rotate(14.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-5 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-5 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-5 .\\--z--pie .\\--z--left-side{transform:rotate(18deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-6 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-6 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-6 .\\--z--pie .\\--z--left-side{transform:rotate(21.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-7 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-7 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-7 .\\--z--pie .\\--z--left-side{transform:rotate(25.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-8 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-8 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-8 .\\--z--pie .\\--z--left-side{transform:rotate(28.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-9 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-9 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-9 .\\--z--pie .\\--z--left-side{transform:rotate(32.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-10 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-10 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-10 .\\--z--pie .\\--z--left-side{transform:rotate(36deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-11 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-11 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-11 .\\--z--pie .\\--z--left-side{transform:rotate(39.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-12 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-12 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-12 .\\--z--pie .\\--z--left-side{transform:rotate(43.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-13 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-13 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-13 .\\--z--pie .\\--z--left-side{transform:rotate(46.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-14 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-14 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-14 .\\--z--pie .\\--z--left-side{transform:rotate(50.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-15 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-15 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-15 .\\--z--pie .\\--z--left-side{transform:rotate(54deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-16 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-16 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-16 .\\--z--pie .\\--z--left-side{transform:rotate(57.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-17 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-17 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-17 .\\--z--pie .\\--z--left-side{transform:rotate(61.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-18 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-18 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-18 .\\--z--pie .\\--z--left-side{transform:rotate(64.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-19 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-19 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-19 .\\--z--pie .\\--z--left-side{transform:rotate(68.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-20 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-20 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-20 .\\--z--pie .\\--z--left-side{transform:rotate(72deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-21 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-21 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-21 .\\--z--pie .\\--z--left-side{transform:rotate(75.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-22 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-22 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-22 .\\--z--pie .\\--z--left-side{transform:rotate(79.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-23 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-23 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-23 .\\--z--pie .\\--z--left-side{transform:rotate(82.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-24 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-24 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-24 .\\--z--pie .\\--z--left-side{transform:rotate(86.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-25 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-25 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-25 .\\--z--pie .\\--z--left-side{transform:rotate(90deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-26 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-26 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-26 .\\--z--pie .\\--z--left-side{transform:rotate(93.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-27 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-27 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-27 .\\--z--pie .\\--z--left-side{transform:rotate(97.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-28 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-28 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-28 .\\--z--pie .\\--z--left-side{transform:rotate(100.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-29 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-29 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-29 .\\--z--pie .\\--z--left-side{transform:rotate(104.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-30 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-30 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-30 .\\--z--pie .\\--z--left-side{transform:rotate(108deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-31 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-31 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-31 .\\--z--pie .\\--z--left-side{transform:rotate(111.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-32 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-32 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-32 .\\--z--pie .\\--z--left-side{transform:rotate(115.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-33 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-33 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-33 .\\--z--pie .\\--z--left-side{transform:rotate(118.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-34 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-34 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-34 .\\--z--pie .\\--z--left-side{transform:rotate(122.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-35 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-35 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-35 .\\--z--pie .\\--z--left-side{transform:rotate(126deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-36 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-36 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-36 .\\--z--pie .\\--z--left-side{transform:rotate(129.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-37 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-37 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-37 .\\--z--pie .\\--z--left-side{transform:rotate(133.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-38 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-38 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-38 .\\--z--pie .\\--z--left-side{transform:rotate(136.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-39 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-39 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-39 .\\--z--pie .\\--z--left-side{transform:rotate(140.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-40 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-40 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-40 .\\--z--pie .\\--z--left-side{transform:rotate(144deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-41 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-41 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-41 .\\--z--pie .\\--z--left-side{transform:rotate(147.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-42 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-42 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-42 .\\--z--pie .\\--z--left-side{transform:rotate(151.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-43 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-43 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-43 .\\--z--pie .\\--z--left-side{transform:rotate(154.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-44 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-44 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-44 .\\--z--pie .\\--z--left-side{transform:rotate(158.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-45 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-45 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-45 .\\--z--pie .\\--z--left-side{transform:rotate(162deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-46 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-46 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-46 .\\--z--pie .\\--z--left-side{transform:rotate(165.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-47 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-47 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-47 .\\--z--pie .\\--z--left-side{transform:rotate(169.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-48 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-48 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-48 .\\--z--pie .\\--z--left-side{transform:rotate(172.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-49 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-49 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-49 .\\--z--pie .\\--z--left-side{transform:rotate(176.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-50 .\\--z--pie .\\--z--right-side{display:none}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-50 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-50 .\\--z--pie .\\--z--left-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-51 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-51 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-51 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-51 .\\--z--pie .\\--z--left-side{transform:rotate(183.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-52 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-52 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-52 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-52 .\\--z--pie .\\--z--left-side{transform:rotate(187.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-53 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-53 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-53 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-53 .\\--z--pie .\\--z--left-side{transform:rotate(190.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-54 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-54 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-54 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-54 .\\--z--pie .\\--z--left-side{transform:rotate(194.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-55 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-55 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-55 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-55 .\\--z--pie .\\--z--left-side{transform:rotate(198deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-56 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-56 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-56 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-56 .\\--z--pie .\\--z--left-side{transform:rotate(201.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-57 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-57 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-57 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-57 .\\--z--pie .\\--z--left-side{transform:rotate(205.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-58 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-58 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-58 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-58 .\\--z--pie .\\--z--left-side{transform:rotate(208.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-59 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-59 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-59 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-59 .\\--z--pie .\\--z--left-side{transform:rotate(212.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-60 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-60 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-60 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-60 .\\--z--pie .\\--z--left-side{transform:rotate(216deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-61 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-61 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-61 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-61 .\\--z--pie .\\--z--left-side{transform:rotate(219.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-62 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-62 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-62 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-62 .\\--z--pie .\\--z--left-side{transform:rotate(223.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-63 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-63 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-63 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-63 .\\--z--pie .\\--z--left-side{transform:rotate(226.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-64 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-64 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-64 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-64 .\\--z--pie .\\--z--left-side{transform:rotate(230.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-65 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-65 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-65 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-65 .\\--z--pie .\\--z--left-side{transform:rotate(234deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-66 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-66 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-66 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-66 .\\--z--pie .\\--z--left-side{transform:rotate(237.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-67 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-67 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-67 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-67 .\\--z--pie .\\--z--left-side{transform:rotate(241.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-68 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-68 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-68 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-68 .\\--z--pie .\\--z--left-side{transform:rotate(244.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-69 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-69 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-69 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-69 .\\--z--pie .\\--z--left-side{transform:rotate(248.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-70 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-70 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-70 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-70 .\\--z--pie .\\--z--left-side{transform:rotate(252deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-71 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-71 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-71 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-71 .\\--z--pie .\\--z--left-side{transform:rotate(255.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-72 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-72 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-72 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-72 .\\--z--pie .\\--z--left-side{transform:rotate(259.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-73 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-73 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-73 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-73 .\\--z--pie .\\--z--left-side{transform:rotate(262.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-74 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-74 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-74 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-74 .\\--z--pie .\\--z--left-side{transform:rotate(266.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-75 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-75 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-75 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-75 .\\--z--pie .\\--z--left-side{transform:rotate(270deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-76 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-76 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-76 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-76 .\\--z--pie .\\--z--left-side{transform:rotate(273.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-77 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-77 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-77 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-77 .\\--z--pie .\\--z--left-side{transform:rotate(277.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-78 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-78 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-78 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-78 .\\--z--pie .\\--z--left-side{transform:rotate(280.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-79 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-79 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-79 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-79 .\\--z--pie .\\--z--left-side{transform:rotate(284.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-80 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-80 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-80 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-80 .\\--z--pie .\\--z--left-side{transform:rotate(288deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-81 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-81 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-81 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-81 .\\--z--pie .\\--z--left-side{transform:rotate(291.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-82 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-82 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-82 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-82 .\\--z--pie .\\--z--left-side{transform:rotate(295.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-83 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-83 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-83 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-83 .\\--z--pie .\\--z--left-side{transform:rotate(298.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-84 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-84 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-84 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-84 .\\--z--pie .\\--z--left-side{transform:rotate(302.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-85 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-85 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-85 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-85 .\\--z--pie .\\--z--left-side{transform:rotate(306deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-86 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-86 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-86 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-86 .\\--z--pie .\\--z--left-side{transform:rotate(309.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-87 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-87 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-87 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-87 .\\--z--pie .\\--z--left-side{transform:rotate(313.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-88 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-88 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-88 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-88 .\\--z--pie .\\--z--left-side{transform:rotate(316.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-89 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-89 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-89 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-89 .\\--z--pie .\\--z--left-side{transform:rotate(320.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-90 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-90 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-90 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-90 .\\--z--pie .\\--z--left-side{transform:rotate(324deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-91 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-91 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-91 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-91 .\\--z--pie .\\--z--left-side{transform:rotate(327.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-92 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-92 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-92 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-92 .\\--z--pie .\\--z--left-side{transform:rotate(331.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-93 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-93 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-93 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-93 .\\--z--pie .\\--z--left-side{transform:rotate(334.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-94 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-94 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-94 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-94 .\\--z--pie .\\--z--left-side{transform:rotate(338.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-95 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-95 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-95 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-95 .\\--z--pie .\\--z--left-side{transform:rotate(342deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-96 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-96 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-96 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-96 .\\--z--pie .\\--z--left-side{transform:rotate(345.6deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-97 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-97 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-97 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-97 .\\--z--pie .\\--z--left-side{transform:rotate(349.2deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-98 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-98 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-98 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-98 .\\--z--pie .\\--z--left-side{transform:rotate(352.8deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-99 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-99 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-99 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-99 .\\--z--pie .\\--z--left-side{transform:rotate(356.4deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-100 .\\--z--pie{clip:rect(auto, auto, auto, auto)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-100 .\\--z--pie .\\--z--right-side{transform:rotate(180deg)}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-100 .\\--z--pie .\\--z--half-circle{border-color:#fff}.\\--z--player .\\--z--pie-wrapper.\\--z--progress-100 .\\--z--pie .\\--z--left-side{transform:rotate(360deg)}.\\--z--player .\\--z--loader{height:7em;width:7em;border:0.4em solid rgba(255,255,255,0.5);border-radius:50%;border-top:0.4em solid #fff;-webkit-animation:spin .8s linear infinite;animation:spin .8s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}\n",""])},function(e,t,r){var n=r(51);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,"div.player-error-screen{color:#CCCACA;position:absolute;top:0;height:100%;width:100%;background-color:rgba(0,0,0,0.7);z-index:2000;display:flex;flex-direction:column;justify-content:center}div.player-error-screen__content[data-error-screen]{font-size:1.4em;color:#CCCACA;margin:0 auto}div.player-error-screen__title[data-error-screen]{font-weight:bold;font-size:1.8em;margin-bottom:0.5em}div.player-error-screen__message[data-error-screen]{margin:0 auto}div.player-error-screen__code[data-error-screen]{font-size:1.3em}div.player-error-screen__reload{cursor:pointer;width:3em;margin:1.5em auto 0}div.player-error-screen__reload .icon{color:#fff;font-size:3em}\n",""])},function(e,t,r){var n=r(53);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .AdsPlugin{position:absolute;z-index:1;width:100%;height:100%;left:0;top:0}.\\--z--player .AdsPlugin iframe{background:none !important}.\\--z--player .AdsPlugin .ad_runner_ui_control svg{width:100%;height:100%}.\\--z--player .ad_runners_ui_ad_mark_container{-webkit-transition:height 0.2s,transform 0.2s cubic-bezier(0, 0, 0.2, 1),top 0.2s;-moz-transition:height 0.2s,transform 0.2s cubic-bezier(0, 0, 0.2, 1),top 0.2s;transition:height 0.2s,transform 0.2s cubic-bezier(0, 0, 0.2, 1),top 0.2s;position:absolute;height:0.3em !important;top:0.9em}.\\--z--player .\\--z--controls .\\--z--progress-bar:hover .ad_runners_ui_ad_mark_container{height:0.5em !important;top:0.8em}.\\--z--player .AdsPluginNonLinear{bottom:0;left:50%;margin-bottom:5em;position:absolute;transform:translateX(-50%)}.\\--z--player .ad_runners_ui_slide_black .ad_message_text,.\\--z--player .ad_runner_ui_loading,.\\--z--player .ad_runner_ui_countdown_to_play{top:initial;left:0.5em;bottom:0.5em;font-size:1.2em}.\\--z--player .ad_runners_ui_slide_black .ad_message_text.has_controls_bar,.\\--z--player .ad_runner_ui_loading.has_controls_bar,.\\--z--player .ad_runner_ui_countdown_to_play.has_controls_bar{bottom:4em}.\\--z--player .ad_runner_ui_skip_button{height:42px}.\\--z--player .ad_runners_ui_slide_black .ad_message_text{padding:0.5em;color:#eee}.\\--z--full-screen .ad_runner_ui_skip_button .countdown{max-width:170px}\n",""])},function(e,t,r){var n=r(55);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--big-play-button{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-moz-transform:translate(-50%, -50%);-o-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);height:7em;width:7em;font-size:1em;align-items:center;justify-content:center;position:absolute;top:50%;left:50%;bottom:auto;right:auto;padding:0;cursor:pointer;opacity:1;border:0.4em solid #fff;background-color:transparent;border-radius:50%}.\\--z--player .\\--z--big-play-button .\\--z--icon{font-size:5em}\n",""])},function(e,t,r){var n=r(57);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--playpause-fadeout{height:1.5em;width:1.5em;-webkit-animation:zp-bezel-fadeout 0.5s linear 1 normal forwards;-moz-animation:zp-bezel-fadeout 0.5s linear 1 normal forwards;-o-animation:zp-bezel-fadeout 0.5s linear 1 normal forwards;animation:zp-bezel-fadeout 0.5s linear 1 normal forwards;margin-left:-.75em;margin-top:-.75em;align-items:center;justify-content:center;position:absolute;top:50%;left:50%;bottom:auto;right:auto;padding:0;opacity:1;font-size:3em;border-radius:50%;border:0;background-color:rgba(0,0,0,0.5);color:#fff;pointer-events:none;display:none}@-webkit-keyframes zp-bezel-fadeout{0%{opacity:1}to{opacity:0;transform:scale(1.8)}}@-moz-keyframes zp-bezel-fadeout{0%{opacity:1}to{opacity:0;transform:scale(1.8)}}@-o-keyframes zp-bezel-fadeout{0%{opacity:1}to{opacity:0;transform:scale(1.8)}}@keyframes zp-bezel-fadeout{0%{opacity:1}to{opacity:0;transform:scale(1.8)}}\n",""])},function(e,t,r){var n=r(59);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--player .\\--z--unmute-box{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-animation:decrease-width-button 0.25s cubic-bezier(0.4, 0, 1, 1) 5.4s forwards;-moz-animation:decrease-width-button 0.25s cubic-bezier(0.4, 0, 1, 1) 5.4s forwards;-o-animation:decrease-width-button 0.25s cubic-bezier(0.4, 0, 1, 1) 5.4s forwards;animation:decrease-width-button 0.25s cubic-bezier(0.4, 0, 1, 1) 5.4s forwards;align-items:center;position:absolute;top:1em;left:1em;padding:.4em .5em .3em;width:18em;border-radius:.2em;background-color:rgba(0,0,0,0.8);cursor:pointer}.\\--z--player .\\--z--unmute-box span{-webkit-animation:decrease-opacity 0s cubic-bezier(0.4, 0, 1, 1) 5.4s forwards;-moz-animation:decrease-opacity 0s cubic-bezier(0.4, 0, 1, 1) 5.4s forwards;-o-animation:decrease-opacity 0s cubic-bezier(0.4, 0, 1, 1) 5.4s forwards;animation:decrease-opacity 0s cubic-bezier(0.4, 0, 1, 1) 5.4s forwards;font-size:1.2em;font-weight:500;text-transform:uppercase;display:inline-block;white-space:nowrap;color:#fff}.\\--z--player .\\--z--unmute-box .\\--z--btn-unmute{margin-left:0;font-size:1.6em;color:#fff;border-radius:.1em;padding:0 .4em}.\\--z--player .\\--z--unmute-box .\\--z--btn-unmute .\\--z--icon{font-size:1.4em;margin-right:.15em;color:inherit;position:relative;top:.06em}@-webkit-keyframes decrease-width-button{0%{width:18em}100%{width:4.5em}}@-moz-keyframes decrease-width-button{0%{width:18em}100%{width:4.5em}}@-o-keyframes decrease-width-button{0%{width:18em}100%{width:4.5em}}@keyframes decrease-width-button{0%{width:18em}100%{width:4.5em}}@-webkit-keyframes decrease-opacity{0%{opacity:1}100%{opacity:0}}@-moz-keyframes decrease-opacity{0%{opacity:1}100%{opacity:0}}@-o-keyframes decrease-opacity{0%{opacity:1}100%{opacity:0}}@keyframes decrease-opacity{0%{opacity:1}100%{opacity:0}}\n",""])},function(e,t,r){var n=r(61);"string"==typeof n&&(n=[[e.i,n,""]]),r(1)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(0)(!1)).push([e.i,".\\--z--control-dvr{margin-left:1.5em}.\\--z--control-dvr span.icon-live{border:4px solid red;border-radius:4px}.\\--z--control-dvr span.text{color:#fff;margin-left:5px}\n",""])},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"cloneDeep",(function(){return G})),r.d(n,"getDeep",(function(){return V})),r.d(n,"each",(function(){return H})),r.d(n,"extend",(function(){return Q})),r.d(n,"objValuesToArray",(function(){return K}));var i={};r.r(i),r.d(i,"hasClass",(function(){return ne})),r.d(i,"addClass",(function(){return ie})),r.d(i,"removeClass",(function(){return oe})),r.d(i,"toggleClass",(function(){return ae})),r.d(i,"setClass",(function(){return se})),r.d(i,"setStyles",(function(){return le})),r.d(i,"isEl",(function(){return ue})),r.d(i,"isTextNode",(function(){return ce})),r.d(i,"emptyEl",(function(){return pe})),r.d(i,"normalizeContent",(function(){return fe})),r.d(i,"appendContent",(function(){return de})),r.d(i,"insertContent",(function(){return he})),r.d(i,"textContent",(function(){return ye})),r.d(i,"createEl",(function(){return ge})),r.d(i,"createElFromHTML",(function(){return me})),r.d(i,"getAttribute",(function(){return Ae})),r.d(i,"setAttribute",(function(){return ve})),r.d(i,"removeAttribute",(function(){return be})),r.d(i,"findPosition",(function(){return _e})),r.d(i,"isOnViewport",(function(){return Ee})),r.d(i,"getPointerPosition",(function(){return we})),r.d(i,"isSingleLeftClick",(function(){return ke})),r.d(i,"removeFromDom",(function(){return Te}));var o={};r.r(o),r.d(o,"IS_IPAD",(function(){return Je})),r.d(o,"IS_IPHONE",(function(){return Ze})),r.d(o,"IS_IPOD",(function(){return $e})),r.d(o,"IS_IOS",(function(){return et})),r.d(o,"IOS_VERSION",(function(){return tt})),r.d(o,"IS_ANDROID",(function(){return rt})),r.d(o,"ANDROID_VERSION",(function(){return nt})),r.d(o,"IS_NATIVE_ANDROID",(function(){return it})),r.d(o,"IS_FIREFOX",(function(){return ot})),r.d(o,"IS_EDGE",(function(){return at})),r.d(o,"IS_CHROME",(function(){return st})),r.d(o,"CHROME_VERSION",(function(){return lt})),r.d(o,"IE_VERSION",(function(){return ut})),r.d(o,"IS_SAFARI",(function(){return ct})),r.d(o,"IS_ANY_SAFARI",(function(){return pt})),r.d(o,"IS_MOBILE",(function(){return ft}));var a={};r.r(a),r.d(a,"createPromiseDefer",(function(){return dt}));var s={};r.r(s),r.d(s,"orderBy",(function(){return Ct})),r.d(s,"whereBy",(function(){return Rt})),r.d(s,"average",(function(){return Dt})),r.d(s,"findWithAttr",(function(){return It}));var l={};r.r(l),r.d(l,"getHours",(function(){return zn})),r.d(l,"getMinutes",(function(){return Pn})),r.d(l,"getSeconds",(function(){return On})),r.d(l,"getCurrentTimeSeconds",(function(){return Ln})),r.d(l,"formatTime",(function(){return Cn}));var u={};r.r(u),r.d(u,"format",(function(){return Io})),r.d(u,"escapeHtml",(function(){return Mo})),r.d(u,"trimHtml",(function(){return xo})),r.d(u,"trimAccents",(function(){return jo})),r.d(u,"startsWith",(function(){return Bo})),r.d(u,"endsWith",(function(){return No})),r.d(u,"generateId",(function(){return Fo})),r.d(u,"getPercentage",(function(){return Uo})),r.d(u,"replaceAll",(function(){return Yo})),r.d(u,"toTitleCase",(function(){return Go})),r.d(u,"toPascalCase",(function(){return Vo})),r.d(u,"toCamelCase",(function(){return Ho})),r.d(u,"stripHTML",(function(){return Qo})),r.d(u,"getHTML",(function(){return Ko}));var c={};r.r(c),r.d(c,"checkAdBlocker",(function(){return ja}));var p={};r.r(p),r.d(p,"fetchUrl",(function(){return Ba}));var f={};r.r(f),r.d(f,"fadeOut",(function(){return ul})),r.d(f,"fadeIn",(function(){return cl})),r(8),r(10);var d={};function h(e){return d[e]||(d[e]=0),e+ ++d[e]}var y="font-weight: bold; font-size: 13px;",g="color: #ff8000;"+y,m="color: #ff0000;"+y,A=["color: #0000ff;font-weight: bold; font-size: 13px;","color: #006600;font-weight: bold; font-size: 13px;",g,m,m],v=["debug","info","warn","error","disabled"],b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=t,this.offLevel=r}var t;return(t=[{key:"debug",value:function(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Zplayer.Log] set log level to "+v[this.level],g)}},{key:"level",value:function(e){this.level=e}},{key:"log",value:function(e,t,r){if(!(t<this.level)){r||(r=e,e=null);var n=A[t],i="";e&&(i="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+v[t]+"]"+i,n].concat(r))}}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}b.LEVEL_DEBUG=0,b.LEVEL_INFO=1,b.LEVEL_WARN=2,b.LEVEL_ERROR=3,b.LEVEL_DISABLED=4,b.getInstance=function(){return void 0===this._instance&&(this._instance=new this,this._instance.previousLevel=this._instance.level,this._instance.level=this._instance.offLevel),this._instance},b.setLevel=function(e){this.getInstance().level=e},b.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},b.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},b.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},b.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var w=Array.prototype.slice,k=/\s+/,T=function(e,t,r,n){if(!r)return!0;if("object"===E(r)){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(k.test(r)){for(var o=r.split(k),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(n));return!1}return!0},S=function(e,t,r,n){var i,o=-1,a=e.length,s=t[0],l=t[1],u=t[2];!function c(){try{switch(t.length){case 0:for(;++o<a;)(i=e[o]).callback.call(i.ctx);return;case 1:for(;++o<a;)(i=e[o]).callback.call(i.ctx,s);return;case 2:for(;++o<a;)(i=e[o]).callback.call(i.ctx,s,l);return;case 3:for(;++o<a;)(i=e[o]).callback.call(i.ctx,s,l,u);return;default:for(;++o<a;)(i=e[o]).callback.apply(i.ctx,t);return}}catch(e){b.error.apply(b,[r,"error on event",n,"trigger","-",e]),c()}}()},z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"register",value:function(t){e.Custom||(e.Custom={});var r="string"==typeof t&&t.toUpperCase().trim();r&&!e.Custom[r]?e.Custom[r]=r.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):b.error("Events","Error when register event: "+t)}}],(r=[{key:"on",value:function(e,t,r){if(!T(this,"on",e,[t,r])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n?(n.push({callback:t,context:r,ctx:r||this}),this):this}},{key:"once",value:function(e,t,r){var n,i=this;return T(this,"once",e,[t,r])&&t?(n=function(){i.off(e,n),t.apply(this,arguments)},this.on(e,n,r)):this}},{key:"off",value:function(e,t,r){var n,i,o,a,s,l,u,c;if(!this._events||!T(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(s=0,l=(a=e?[e]:Object.keys(this._events)).length;s<l&&(e=a[s],o=this._events[e])&&(this._events[e]=n=[],t||r);s++){for(u=0,c=o.length;u<c;u++)i=o[u],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(!e)return b.warn.apply(b,[t,"trying to trigger undefined event, ignored"]),this;if(!this._events)return this;var r=w.call(arguments,1);if(!T(this,"trigger",e,r))return this;var n=this._events[e],i=this._events.all;return n&&S(n,r,t,e),i&&S(i,arguments,t,e),this}},{key:"stopListening",value:function(e,t,r){var n=this._listeningTo;if(!n)return this;var i=!t&&!r;for(var o in r||"object"!==E(t)||(r=this),e&&((n={})[e._listenId]=e),n)(e=n[o]).off(t,r,this),(i||0===Object.keys(e._events).length)&&delete this._listeningTo[o];return this}}])&&_(t.prototype,r),n&&_(t,n),e}(),P={listenTo:"on",listenToOnce:"once"};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.keys(P).forEach((function(e){z.prototype[e]=function(t,r,n){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=h("l"))]=t,n||"object"!==E(r)||(n=this),t[P[e]](r,n,this),this}})),["PLAYER_PLAY","PLAYER_PLAY_INTENT","PLAYER_PAUSE","PLAYER_STOP","PLAYER_ENDED","PLAYER_SEEK","PLAYER_SEEKED","PLAYER_SEEKING","PLAYER_ERROR","PLAYER_TIMEUPDATE","PLAYER_PROGRESS","PLAYER_FULLSCREEN","PLAYER_READY","PLAYER_BUFFERING","PLAYER_BUFFERING_CHANGE","PLAYER_BUFFERFULL","PLAYER_PRESS_PLAY","PLAYER_VOLUMEUPDATE","PLAYER_LOADEDMETADATA","PLAYER_CLICK","PLAYER_DBLCLICK","PLAYER_KEYDOWN","PLAYER_MOUSE_ENTER","PLAYER_MOUSE_LEAVE","PLAYER_MOUSE_MOVE","PLAYER_CONTEXTMENU","PLAYER_LEVELS_AVAILABEL","PLAYER_LEVEL_SWITCHED","PLAYER_SETTINGS_MENU_HIDE","PLAYER_QUALITY_LEVELS_SELECTED","PLAYER_UPDATE_SIZE","PLAYER_CANPLAYTHROUGH","PLAYER_WAITING","PLAYER_ORIENTATION_CHANGE","PLAYER_AD_PAUSE_REQUEST","PLAYER_AD_RESUME_REQUEST","PLAYER_AD_WILL_START","PLAYER_AD_STARTED","PLAYER_AD_STOPPED","PLAYER_AD_SKIPPED","PLAYER_AD_LOAD_TIMEOUT","PLAYER_MEDIACONTROL_DISABLE","PLAYER_MEDIACONTROL_ENABLE","PLAYER_MEDIACONTROL_SHOW","PLAYER_MEDIACONTROL_HIDE","PLAYER_MEDIACONTROL_READY","PLAYER_MEDIACONTROL_CLICK","PLAYER_MEDIACONTROL_DBLCLICK","PLAYER_DVRSTATECHANGED","PLAYER_THEATER_MODE_CHANGE","PLAYBACK_PROGRESS","PLAYBACK_TIMEUPDATE","PLAYBACK_BUFFERING","PLAYBACK_BUFFERING_CHANGE","PLAYBACK_BUFFERFULL","PLAYBACK_SETTINGSUPDATE","PLAYBACK_LOADEDMETADATA","PLAYBACK_VOLUMEUPDATE","PLAYBACK_HIGHDEFINITIONUPDATE","PLAYBACK_BITRATE","PLAYBACK_LEVELS_AVAILABLE","PLAYBACK_LEVEL_SWITCH_START","PLAYBACK_LEVEL_SWITCH_END","PLAYBACK_PLAYBACKSTATE","PLAYBACK_DVR","PLAYBACK_DVRSTATECHANGED","PLAYBACK_MEDIACONTROL_DISABLE","PLAYBACK_MEDIACONTROL_ENABLE","PLAYBACK_ENDED","PLAYBACK_PLAY_INTENT","PLAYBACK_PLAY","PLAYBACK_PAUSE","PLAYBACK_SEEKING","PLAYBACK_WAITING","PLAYBACK_SEEKED","PLAYBACK_STOP","PLAYBACK_ERROR","PLAYBACK_STATS_ADD","PLAYBACK_FRAGMENT_LOADED","PLAYBACK_LEVEL_SWITCHED","PLAYBACK_SUBTITLE_AVAILABLE","PLAYBACK_SUBTITLE_CHANGED","PLAYBACK_FULLSCREEN_IOS","PLAYBACK_CANPLAYTHROUGH","MEDIACONTROL_HIDE","MEDIACONTROL_SHOW","MEDIACONTROL_MOUSEMOVE_SEEKBAR","MEDIACONTROL_MOUSELEAVE_SEEKBAR"].forEach((function(e){z[e]=e}));var D=function(e){var t,r,n;function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e&&(t=e.options),(r=function(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,L(i).call(this))).player=e,r._options=t,r.uniqueId=h("o"),r._nameEvents={},r.constructor.NAME_EVENTS.forEach((function(e){z[e]=e,r._nameEvents[e]=e})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(i,z),t=i,n=[{key:"NAME_EVENTS",get:function(){return[]}}],(r=[{key:"bindEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.player;this.listenEvents.forEach((function(r){r.once?e.listenToOnce(r.target||t||e,r.name,r.handler):e.listenTo(r.target||t||e,r.name,r.handler)}))}},{key:"unbindEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.player;this.listenEvents.forEach((function(r){r.once?e.stopListening(r.target||t||e,r.name):e.stopListening(r.target||t||e,r.name,r.handler)}))}},{key:"options",get:function(){return this._options}},{key:"listenEvents",get:function(){return[]}}])&&C(t.prototype,r),n&&C(t,n),i}(),I=function(e){return null!=e?e.constructor:null},M=function(e,t){return Boolean(e&&t&&e instanceof t)},x=function(e){return null==e},j=function(e){return I(e)===Object},B=function(e){return I(e)===String},N=function(e){return Array.isArray(e)},F=function(e){return M(e,NodeList)},U=function(e){return x(e)||(B(e)||N(e)||F(e))&&!e.length||j(e)&&!Object.keys(e).length},Y={nullOrUndefined:x,object:j,number:function(e){return I(e)===Number&&!Number.isNaN(e)},string:B,boolean:function(e){return I(e)===Boolean},function:function(e){return I(e)===Function},array:N,weakMap:function(e){return M(e,WeakMap)},nodeList:F,element:function(e){return M(e,Element)},textNode:function(e){return I(e)===Text},event:function(e){return M(e,Event)},cue:function(e){return M(e,window.TextTrackCue)||M(e,window.VTTCue)},track:function(e){return M(e,TextTrack)||!x(e)&&B(e.kind)},url:function(e){if(M(e,window.URL))return!0;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!U(new URL(t).hostname)}catch(e){return!1}},empty:U};function G(e){return JSON.parse(JSON.stringify(e))}function V(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function H(e,t){(function(e){return Y.object(e)?Object.keys(e):[]})(e).forEach((function(r){return t(e[r],r)}))}function Q(e){e=e||{};for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(n)for(var i in n)n.hasOwnProperty(i)&&("[object Object]"!==Object.prototype.toString.call(n[i])?e[i]=n[i]:e[i]=Q(e[i],n[i]))}return e}function K(e){return Object.values&&Object.values(e)||Object.keys(e).map((function(t){return e[t]}))}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t,r){return t&&X(e.prototype,t),r&&X(e,r),e}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,q(t).call(this,e))).pluginOptions=r.getPluginOptions(),r.enabled=!0,r.pluginOptions.disabled&&r.disable(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,D),J(t,[{key:"defaultOptions",get:function(){return{}}}]),J(t,[{key:"initialize",value:function(){var e=this;return Promise.resolve().then((function(){return e.setUp()})).then((function(){return e.enabled&&e.bindEvents()}))}},{key:"getPluginOptions",value:function(){return Q(this.defaultOptions,V(this._options,"pluginsOptions.".concat(this.name))||this.defaultOptions)}},{key:"setUp",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0,b.debug(this.name,"enabled"))}},{key:"disable",value:function(){this.enabled&&(this.unbindEvents(),this.enabled=!1,b.debug(this.name,"disabled"))}},{key:"destroy",value:function(){this.disable(),this.player.removePlugin(this.name)}}]),t}(),ee=r(3),te=r.n(ee);function re(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function ne(e,t){return re(t),e.classList?e.classList.contains(t):(r=t,new RegExp("(^|\\s)"+r+"($|\\s)")).test(e.className);var r}function ie(e,t){return e.classList?e.classList.add(t):ne(e,t)||(e.className=(e.className+" "+t).trim()),e}function oe(e,t){return e.classList?e.classList.remove(t):(re(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e}function ae(e,t,r){if(e.classList)return void 0===r?e.classList.toggle(t):e.classList.toggle(t,r);var n=ne(e,t);return"function"==typeof r&&(r=r(e,t)),"boolean"!=typeof r&&(r=!n),r!==n?(r?ie(e,t):oe(e,t),e):void 0}function se(e,t){return e.className=t,e}function le(e,t){for(var r in t)if(null===t[r]){var n=r.split(/(?=[A-Z])/).map((function(e){return e.toLowerCase()})).join("-");e.style.removeProperty(n)}else e.style[r]=t[r];return e}function ue(e){return Y.object(e)&&1===e.nodeType}function ce(e){return Y.object(e)&&3===e.nodeType}function pe(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function fe(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),ue(e)||ce(e)?e:"string"==typeof e&&/\S/.test(e)?document.createTextNode(e):void 0})).filter((function(e){return e}))}function de(e,t){return fe(t).forEach((function(t){return e.appendChild(t)})),e}function he(e,t){return de(pe(e),t)}function ye(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,i=document.createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var r=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?i.setAttribute(e,r):i[e]=r})),Object.getOwnPropertyNames(r).forEach((function(e){i.setAttribute(e,r[e])})),n&&de(i,n),i}function me(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}function Ae(e,t){return e.getAttribute(t)}function ve(e,t,r){e.setAttribute(t,r)}function be(e,t){e.removeAttribute(t)}function _e(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var r=document.documentElement,n=document.body,i=r.clientLeft||n.clientLeft||0,o=window.pageXOffset||n.scrollLeft,a=t.left+o-i,s=r.clientTop||n.clientTop||0,l=window.pageYOffset||n.scrollTop,u=t.top+l-s;return{left:Math.round(a),top:Math.round(u)}}function Ee(e){if(e){var t=e.getBoundingClientRect();return t.height/2<=window.innerHeight-t.top&&t.bottom>=t.height/2}}function we(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={},i=_e(e),o=r?e.offsetHeight:e.offsetWidth,a=r?e.offsetWidth:e.offsetHeight,s=i.top,l=i.left,u=t.pageY,c=t.pageX;return t.changedTouches&&(c=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-u+a)/a)),n.x=Math.max(0,Math.min(1,(c-l)/o)),n}function ke(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons}function Te(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=/^(\S+)\s*(.*)$/,Ce=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Pe(t).call(this,e,r))).cid=h("c"),n.buildElement(),n.delegateEvents(),n}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,D),r=t,i=[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}],(n=[{key:"$",value:function(e){return this.$el.find(e)}},{key:"setElement",value:function(e){return this.$el=te.a.zepto.isZ(e)?e:te()(e),this.el=this.$el[0],this}},{key:"buildElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=Q({},this.attributes);this.id&&(e.id=this.id);var t=Q({},this.properties),r=ge(this.tagName,t,e);this.setElement(r,!1)}}},{key:"delegateEvents",value:function(e){if(!e&&!(e=this.events))return this;for(var t in e){var r=e[t];if(r&&r.constructor!==Function&&(r=this[e[t]]),r){var n=t.match(Le),i=n[1],o=n[2];i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,r.bind(this)):this.$el.on(i,o,r.bind(this))}}}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"render",value:function(){return this}},{key:"remove",value:function(){return this.$el.remove(),this.unbindEvents(),this.undelegateEvents(),this}},{key:"getAttribute",value:function(e){return Ae(this.el,e)}},{key:"setAttribute",value:function(e,t){ve(this.el,e,t)}},{key:"removeAttribute",value:function(e){be(this.el,e)}},{key:"setStyles",value:function(e){le(this.el,e)}},{key:"hasClass",value:function(e){return ne(this.el,e)}},{key:"addClass",value:function(e){ie(this.el,e)}},{key:"removeClass",value:function(e){oe(this.el,e)}},{key:"toggleClass",value:function(e,t){ae(this.el,e,t)}},{key:"show",value:function(){this.removeClass("--z--hide")}},{key:"hide",value:function(){this.addClass("--z--hide")}},{key:"properties",get:function(){return{}}}])&&ze(r.prototype,n),i&&ze(r,i),t}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(e,t,r){return t&&Ie(e.prototype,t),r&&Ie(e,r),e}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,De(t).call(this,e))).pluginOptions=r.getPluginOptions(),r.enabled=!0,r.pluginOptions.disabled&&r.disable(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,Ce),Me(t,[{key:"defaultOptions",get:function(){return{}}}]),Me(t,[{key:"initialize",value:function(){var e=this;return Promise.resolve().then((function(){return e.setUp()})).then((function(){return e.render()})).then((function(){return e.enabled&&e.bindEvents()}))}},{key:"getPluginOptions",value:function(){return Q(this.defaultOptions,V(this._options,"pluginsOptions.".concat(this.name))||this.defaultOptions)}},{key:"setUp",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.show(),this.enabled=!0,b.debug(this.name,"enabled"))}},{key:"disable",value:function(){this.enabled&&(this.unbindEvents(),this.hide(),this.enabled=!1,b.debug(this.name,"disabled"))}},{key:"destroy",value:function(){this.disable(),this.remove(),this.player.removePlugin(this.name)}}]),t}();function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(12);var Ye=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Fe(t).call(this,null,e))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,Ce),r=t,(n=[{key:"play",value:function(){throw new Error("this must be implemented")}},{key:"pause",value:function(){throw new Error("this must be implemented")}},{key:"stop",value:function(){}},{key:"seek",value:function(){}},{key:"seekPercentage",value:function(){}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"isReady",value:function(){throw new Error("this must be implemented")}},{key:"getPlaybackType",value:function(){return t.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"volume",value:function(){}},{key:"getVolume",value:function(){return 0}},{key:"isHlsPlayback",value:function(){return!1}},{key:"isMp4Playback",value:function(){return!1}},{key:"destroy",value:function(){this.remove()}}])&&Ne(r.prototype,n),t}();Ye.canPlay=function(){return!1},Ye.VOD="vod",Ye.AOD="aod",Ye.LIVE="live",Ye.LIVE_END="live_end",Ye.NO_OP="no_op",Ye.type="playback";var Ge,Ve,He,Qe,Ke=Ye,We=window.navigator&&window.navigator.userAgent||"",qe=/AppleWebKit\/([\d.]+)/i.exec(We),Xe=qe?parseFloat(qe.pop()):null,Je=/iPad/i.test(We),Ze=/iPhone/i.test(We)&&!Je,$e=/iPod/i.test(We),et=Ze||Je||$e,tt=(Ge=We.match(/OS (\d+)_/i))&&Ge[1]?Ge[1]:null,rt=/Android/i.test(We),nt=function(){var e=We.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t||null}(),it=rt&&nt<5&&Xe<537,ot=/Firefox/i.test(We),at=/Edge/i.test(We),st=!at&&(/Chrome/i.test(We)||/CriOS/i.test(We)),lt=(Qe=We.match(/(Chrome|CriOS)\/(\d+)/))&&Qe[2]?parseFloat(Qe[2]):null,ut=(!(He=(Ve=/MSIE\s(\d+)\.\d/.exec(We))&&parseFloat(Ve[1]))&&/Trident\/7.0/i.test(We)&&/rv:11.0/.test(We)&&(He=11),He),ct=/Safari/i.test(We)&&!st&&!rt&&!at,pt=(ct||et)&&!st,ft=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(We);function dt(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e,t,r){return(gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mt(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vt(e,t,r){return t&&At(e.prototype,t),r&&At(e,r),e}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Et={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},wt=Object.keys(Et).reduce((function(e,t){return[].concat(_t(e),_t(Et[t]))}),[]),kt=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];(r=yt(this,(e=mt(t)).call.apply(e,[this].concat(i))))._readyDeferred=dt(),r._destroyed=!1,r._loadStarted=!1,r._playheadMoving=!1,r._playheadMovingTimer=null,r._stopped=!1,r.isHlsPlayback()||r.setupSource(r.options.src),r.options.playback||(r.options.playback=r.options||{});var a=r.options.playback.preload||(ct?"auto":r.options.preload);return Q(r.el,{muted:r.options.mute,loop:r.options.loop,preload:a,autoPlay:r.options.autoPlay||!1}),r.options.playInline&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,Ke),vt(t,[{key:"isAudioOnly",get:function(){var e=this.options.src,r=t._mimeTypesForUrl(e,Et,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||wt.indexOf(r[0])>=0}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_onCanplaythrough",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",stalled:"_onStalled",timeupdate:"_onTimeUpdate",waiting:"_onWaiting",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",ended:"_onEnded",webkitbeginfullscreen:"_onBeginFullScreen",webkitendfullscreen:"_onEndFullScreen"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}}]),vt(t,[{key:"setupSource",value:function(e){Y.empty(e)||(this._src=e,this.el.src=e)}},{key:"getSource",value:function(){return this._src}},{key:"render",value:function(){return this._readyDeferred.resolve(),this}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"isReady",value:function(){return this._readyDeferred.promise}},{key:"play",value:function(){return this._stopped=!1,this._handleBufferingEvents(),this.playPromise=this.el.play(),b.debug(this.name,"PLAY_PROMISE",this.playPromise),this.playPromise}},{key:"pause",value:function(){var e=this;this.playPromise?this.playPromise.then((function(){return e.el.pause()})):this.el.pause()}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(z.PLAYBACK_STOP)}},{key:"volume",value:function(e){e<0||e>100||(0===e?this.mute():this.unmute(),this.el.volume=e/100,this.trigger(z.PLAYBACK_VOLUMEUPDATE,e))}},{key:"getVolume",value:function(){return this.el.volume}},{key:"mute",value:function(){this.$el.attr({muted:"true"}),this.el.muted=!0}},{key:"unmute",value:function(){this.$el.attr({muted:null}),this.el.muted=!1}},{key:"isMuted",value:function(){return this.el.muted}},{key:"seek",value:function(e){Y.number(e)&&(this.el.currentTime=e)}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"getCurrentTime",value:function(){this.el.currentTime}},{key:"getDuration",value:function(){return this.el.duration}},{key:"setPlaybackRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.el.playbackRate=e}},{key:"setPreload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"metadata";return this.el.preload=e,this}},{key:"destroy",value:function(){this._destroyed=!0,gt(mt(t.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this._src=null}},{key:"_now",value:function(){return Date.now()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onCanplaythrough",value:function(e){this._handleBufferingEvents(),this.trigger(z.PLAYBACK_CANPLAYTHROUGH,{time:this._now(),data:e})}},{key:"_onError",value:function(){var e=this.el.error;if(e){var t={code:e.code,description:e.message,raw:e};this.trigger(z.PLAYBACK_ERROR,t)}else b.warn(this.name,"HTML5 media unknown error")}},{key:"_onWaiting",value:function(e){this._handleBufferingEvents(),this.trigger(z.PLAYBACK_WAITING,{time:this._now(),data:e}),this._loadStarted=!0}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(z.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e})}},{key:"_onStalled",value:function(){this._handleBufferingEvents()}},{key:"_onTimeUpdate",value:function(){this.trigger(z.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration})}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=this.el.buffered.length,t=[],r=0,n=0;n<e;n++)t=[].concat(_t(t),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=t[n].start&&this.el.currentTime<=t[n].end&&(r=n);var i={start:t[r].start,current:t[r].end,total:this.el.duration};this.trigger(z.PLAYBACK_PROGRESS,i,t)}}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(z.PLAYBACK_PAUSE)}},{key:"_onPlaying",value:function(){this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(z.PLAYBACK_PLAY)}},{key:"_onSeeking",value:function(e){this._handleBufferingEvents(),this.trigger(z.PLAYBACK_SEEKING,{time:this._now(),data:e})}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(z.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(z.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingPercent",value:function(){if("html5_video"===this.name&&(1===this.el.networkState||2===this.el.networkState)){for(var e,t=this.el.buffered.length,r=this.el.currentTime,n=0,i=0;i<t;i++){var o=this.el.buffered.end(i);(o<=r&&o>n||this.el.buffered.start(i)<=r&&o>=r)&&(n=o)}e=100/6*(6-(r+3-n)),this.trigger(z.PLAYBACK_BUFFERING_CHANGE,e)}}},{key:"_handleBufferingEvents",value:function(){this._handleBufferingPercent();var e=!this.el.ended&&!this.el.paused,t=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!=t&&(this._isBuffering=t,t?this.trigger(z.PLAYBACK_BUFFERING,this.name):this.trigger(z.PLAYBACK_BUFFERFULL,this.name))}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onBeginFullScreen",value:function(){this.trigger(z.PLAYBACK_FULLSCREEN_IOS,!0)}},{key:"_onEndFullScreen",value:function(){this.trigger(z.PLAYBACK_FULLSCREEN_IOS,!1)}},{key:"getPlaybackType",value:function(){throw new Error("this must be implemented")}}]),t}();function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}kt._mimeTypesForUrl=function(e,t,r){var n=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],i=r||n&&t[n.toLowerCase()]||[];return i.constructor===Array?i:[i]},kt._canPlay=function(e,t,r,n){var i=kt._mimeTypesForUrl(r,t,n),o=document.createElement(e);return!!i.filter((function(e){return!!o.canPlayType(e).replace(/no/,"")}))[0]};var Lt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zt(this,Pt(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(t,kt),r=t,(n=[{key:"getPlaybackType",value:function(){var e=Ke.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?Ke.LIVE:e}},{key:"isMp4Playback",value:function(){return!0}},{key:"name",get:function(){return"html5_video"}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"attributes",get:function(){return{"data-html5-video":""}}}])&&St(r.prototype,n),t}();function Ct(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(Y.array(e)&&t)return e.sort((function(e,n){return r?e[t]-n[t]:n[t]-e[t]}))}function Rt(e,t,r){if(Y.array(e))return e.filter((function(e){return e[t]===r})).shift()}function Dt(e){return e.length?e.reduce((function(e,t){return e+t}),0)/e.length:0}function It(e,t,r){for(var n=e.length,i=0;i<n;i++)if(e[i][t]===r)return i;return-1}Lt.canPlay=function(e,t){var r={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};return r.ogv=r.ogg,r["3gp"]=r["3gpp"],kt._canPlay("video",r,e,t)};var Mt=r(2),xt=r.n(Mt);function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t,r){return(Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nt(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ut(e,t,r){return t&&Ft(e.prototype,t),r&&Ft(e,r),e}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Vt={startLevel:-1},Ht=function(e){function t(){var e,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=this,(r=!(i=(e=Nt(t)).call.apply(e,[this].concat(a)))||"object"!==jt(i)&&"function"!=typeof i?Gt(n):i)._config={hls:V(r.options,"playback.hls")||Vt,recoverMaxRetry:V(r.options,"playback.hls.recoverMaxRetry")||16},r._recoverRetry=0,r._recoveredMediaError=!1,r._playbackType=Ke.VOD,r._onHLSJSError=r._onHLSJSError.bind(Gt(Gt(r))),r._initHls(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(t,kt),Ut(t,[{key:"name",get:function(){return"hls"}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?-1:this._currentLevel},set:function(e){var t=this;this.playPromise&&this.playPromise.then((function(){t._currentLevel=e,t._hls&&(t._hls.currentLevel=t._currentLevel)}))}},{key:"startLevel",set:function(e){var t=this;this.playPromise&&this.playPromise.then((function(){t._startLevel=e,t._hls&&(t._hls.startLevel=t._startLevel)}))},get:function(){return this._startLevel}}],[{key:"canPlay",value:function(e,t){var r=e.split("?")[0].match(/.*\.(.*)$/)||[];return(r.length>1&&"m3u8"===r[1].toLowerCase()||"application/x-mpegURL"===t||"application/vnd.apple.mpegurl"===t)&&xt.a.isSupported()}}]),Ut(t,[{key:"stop",value:function(){Bt(Nt(t.prototype),"stop",this).call(this),this._hls.destroy(),delete this._hls}},{key:"isHlsPlayback",value:function(){return!0}},{key:"_initHls",value:function(){var e=this,t=new xt.a(this._config.hls);t.on(xt.a.Events.MEDIA_ATTACHED,(function(){return t.loadSource(e.options.src)})),t.on(xt.a.Events.ERROR,this._onHLSJSError),t.once(xt.a.Events.LEVEL_LOADED,this._updatePlaybackType.bind(this)),t.on(xt.a.Events.LEVEL_SWITCH,this._onLevelSwitch.bind(this)),t.on(xt.a.Events.LEVEL_SWITCHED,this._onLevelSwitched.bind(this)),t.on(xt.a.Events.FRAG_LOAD_PROGRESS,this._onFragLoadingProgress.bind(this)),t.on(xt.a.Events.FRAG_LOADED,this._onFragLoadedProgress.bind(this)),t.attachMedia(this.el),this._hls=t}},{key:"_updatePlaybackType",value:function(e,t){b.debug(this.name,"_updatePlaybackType",t),this._playbackType=t.details.live?Ke.LIVE:t.details.startSN>0?Ke.LIVE_END:Ke.VOD,this.trigger(z.PLAYBACK_DVRSTATECHANGED),this._fillLevels(),b.debug(this.name,"LEVELS",this._levels),this.initLevelFromLocalStorage()}},{key:"_onLevelSwitch",value:function(e,t){b.debug(this.name,"_onLevelSwitch",t)}},{key:"_onLevelSwitched",value:function(e,t){b.debug(this.name,"_onLevelSwitched",t);var r=Rt(this.levels,"index",t.level);this.trigger(z.PLAYBACK_LEVEL_SWITCHED,r)}},{key:"_addingSuffixCharacter",value:function(e){var t=e.toString().toLowerCase();return t.indexOf("p")>-1?t:t+"p"}},{key:"_generateLabel",value:function(e){return e.name||Math.ceil(e.bitrate/1e3)}},{key:"_fillLevels",value:function(){var e=this;Y.empty(this._levels)&&(this._levels=this._hls.levels.map((function(t,r){return{index:r,level:t,label:e._addingSuffixCharacter(e._generateLabel(t))}})),this._levels.unshift({index:-1,label:"Auto"}),this.trigger(z.PLAYBACK_LEVELS_AVAILABLE,this._levels))}},{key:"initLevelFromLocalStorage",value:function(){if(Y.array(this._levels)&&this.options.quality){var e=Rt(this._levels,"label",this.options.quality);Y.object(e)&&Y.object(e.level)&&(this.currentLevel=e.index,this.startLevel=e.index)}}},{key:"_recoverMediaError",value:function(e){return this._recoverRetry+=1,this._recoverRetry>this._config.recoverMaxRetry?(b.error(this.name,"could not recover from error after maximum number of attempts",e),this.trigger(z.PLAYBACK_ERROR,e),void this.stop()):(b.warn(this.name,"recovering fatal error (".concat(this._recoverRetry,"/").concat(this._config.recoverMaxRetry,"):"),e),this._recoveredMediaError?(this._hls.swapAudioCodec(),void this._hls.recoverMediaError()):(this._recoveredMediaError=!0,void this._hls.recoverMediaError()))}},{key:"_onError",value:function(){var e=this.el.error;if(e){var t=e.code,r={code:t,description:e.message,raw:e};if(t===e.MEDIA_ERR_DECODE)return this._recoverMediaError(r);this.trigger(z.PLAYBACK_ERROR,r)}else b.warn(this.name,"HTML5 video unknown error")}},{key:"_onHLSJSError",value:function(e,t){if(t.fatal){var r={code:"".concat(t.type,"_").concat(t.details),description:t.reason||(t.response?"status: ".concat(t.response.code,", text: ").concat(t.response.text):"unknown"),raw:t};return t.type===xt.a.ErrorTypes.NETWORK_ERROR&&t.response.code<400?(b.debug(this.name,"recovering network error, user may be offline:",r),void this._hls.startLoad()):t.type!==xt.a.ErrorTypes.MEDIA_ERROR?(b.error(this.name,"unrecoverable fatal error: ".concat(t.type),r),this.trigger(z.PLAYBACK_ERROR,r),void this.stop()):void this._recoverMediaError(r)}}},{key:"_onTimeUpdate",value:function(){this.el.duration&&this.trigger(z.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration})}},{key:"_onFragLoadingProgress",value:function(e,t){var r=100/t.stats.total*t.stats.loaded;this.trigger(z.PLAYBACK_BUFFERING_CHANGE,r)}},{key:"_onFragLoadedProgress",value:function(){this.trigger(z.PLAYBACK_BUFFERFULL,this.name)}},{key:"getPlaybackType",value:function(){return this._playbackType}}]),t}();function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e,t,r){return(Wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qt(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jt(e,t,r){return t&&Xt(e.prototype,t),r&&Xt(e,r),e}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $t=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(r=Kt(this,(e=qt(t)).call.apply(e,[this].concat(i))))._ready=!1,r._readyDeferred=dt(),r._isSeeking=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(t,Ke),Jt(t,[{key:"name",get:function(){return"youtube_playback"}},{key:"attributes",get:function(){return{"data-youtube-playback":"",class:"zplayer-youtube-playback",style:"height:100%",id:this.cid}}},{key:"buffering",get:function(){return!1}}],[{key:"canPlay",value:function(e){return this.isYTVideo(e)}},{key:"isYTVideo",value:function(e){return!!e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)&&RegExp.$1}}]),Jt(t,[{key:"ready",value:function(){this._ready=!0,this.$el.hide(),this._readyDeferred.resolve()}},{key:"qualityChange",value:function(){this.trigger(z.PLAYBACK_HIGHDEFINITIONUPDATE)}},{key:"stateChange",value:function(e){switch(e.data){case window.YT.PlayerState.PLAYING:this.$el.show(),this.trigger(z.PLAYBACK_PLAY),this._isSeeking&&(this._isSeeking=!1,this.trigger(z.PLAYBACK_SEEKED));break;case window.YT.PlayerState.PAUSE:this.$el.hide(),this.trigger(z.PLAYBACK_PAUSE);break;case window.YT.PlayerState.ENDED:this.ended(),this.seek(0),this.stop();break;default:this.$el.show()}}},{key:"play",value:function(){var e=this;this._progressTimer=this._progressTimer||setInterval((function(){return e.progress()}),100),this._timeupdateTimer=setInterval((function(){return e.timeupdate()}),100),this.player.playVideo(),this.trigger(z.PLAYBACK_PLAY),this.trigger(z.PLAYBACK_BUFFERFULL)}},{key:"pause",value:function(){this.clearTimer(),this.player&&this.player.pauseVideo(),this.trigger(z.PLAYBACK_PAUSE)}},{key:"seek",value:function(e){this.player&&(this.player.seekTo(e),this._isSeeking=!0,setTimeout((function(){}),100))}},{key:"ended",value:function(){this.trigger(z.PLAYBACK_ENDED)}},{key:"stop",value:function(){this.player.stopVideo(),this.clearTimer()}},{key:"volume",value:function(e){this.player&&(this.player.setVolume(e),e<=0?this.player.mute():this.player.unMute(),this.trigger(z.PLAYBACK_VOLUMEUPDATE,e))}},{key:"isMuted",value:function(){return this.player&&this.player.isMuted()}},{key:"getVolume",value:function(){return this.player&&this.player.getVolume()}},{key:"progress",value:function(){var e=this.player.getDuration()*this.player.getVideoLoadedFraction();this.trigger(z.PLAYBACK_PROGRESS,0,e,this.player.getDuration())}},{key:"timeupdate",value:function(){this.trigger(z.PLAYBACK_TIMEUPDATE,{current:this.player.getCurrentTime(),total:this.player.getDuration()})}},{key:"isPlaying",value:function(){return this.player&&this._timeupdateTimer&&this.player.getPlayerState()==window.YT.PlayerState.PLAYING}},{key:"isReady",value:function(){return this._readyDeferred.promise}},{key:"getDuration",value:function(){var e=0;return this.player&&(e=this.player.getDuration()),parseFloat(e)}},{key:"render",value:function(){var e=this;return this.el.append(ge("div",{},{id:"yt".concat(this.cid)})),setTimeout((function(){e._setupYoutubePlayer()}),1),this}},{key:"setPlaybackRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.player.setPlaybackRate(e)}},{key:"_setupYoutubePlayer",value:function(){window.YT&&window.YT.Player?this._embedYoutubePlayer():this._embedYoutubeApiScript()}},{key:"_getVideoId",value:function(e){return void 0!==(e=e.split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?e[2].split(/[^0-9a-z_\-]/i)[0]:e[0]}},{key:"_embedYoutubeApiScript",value:function(){var e=this,t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","https://www.youtube.com/iframe_api"),document.body.appendChild(t),window.onYouTubeIframeAPIReady=function(){return e._embedYoutubePlayer()}}},{key:"_embedYoutubePlayer",value:function(){var e=this,t={controls:0,autoplay:this.options.autoPlay?1:0,disablekb:1,rel:0,enablejsapi:1,iv_load_policy:3,modestbranding:1,showinfo:0,html5:1,playsinline:this.options.playInline?1:0};this.player=new window.YT.Player("yt".concat(this.cid),{videoId:this._getVideoId(this.options.source),playerVars:t,width:"100%",height:"100%",events:{onReady:function(){return e.ready()},onStateChange:function(t){return e.stateChange(t)},onPlaybackQualityChange:function(t){return e.qualityChange(t)}}})}},{key:"getPlaybackType",value:function(){return Ke.VOD}},{key:"clearTimer",value:function(){clearInterval(this._timeupdateTimer),clearInterval(this._progressTimer),this._timeupdateTimer=null,this._progressTimer=null}},{key:"destroy",value:function(){this.clearTimer(),Wt(qt(t.prototype),"destroy",this).call(this),this.stop(),this.player.destroy(),this.player=null}}]),t}();function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rr(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ir(e,t){return(ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(19);var or=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rr(this,nr(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ir(e,t)}(t,Ke),r=t,i=[{key:"canPlay",value:function(){return!0}}],(n=[{key:"render",value:function(){var e=ge("p",{innerHTML:"Your browser does not support the playback of this video. Please try using a different browser."},{"data-no-op-msg":""});return this.el.append(e),this}},{key:"isReady",value:function(){return Promise.resolve()}},{key:"name",get:function(){return"no_op"}},{key:"attributes",get:function(){return{"data-no-op":""}}}])&&tr(r.prototype,n),i&&tr(r,i),t}(),ar=(r(21),"--z--hide"),sr="--z--full-width",lr="--z--bg-transparent",ur={layout:{left:["playpause","volume","time"],right:["settings","fullscreen"],default:["seekbar"]},type:{fullWidth:!1},alwaysShowControl:!1,showOnPauseMobile:!1,hideAnimation:!1,theme:"",disabled:!1},cr="transparent",pr="gradient",fr={RED:"red",BLUE:"blue",PURPLE:"purple",GREEN:"green",LIGHT_BLUE:"light_blue"};function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yr(e){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(23);var mr=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,yr(t).call(this,e))).plugin=r,n.bindEvents(),n}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(t,Ce),r=t,(n=[{key:"destroy",value:function(){this.remove()}},{key:"handleClick",value:function(){}},{key:"className",get:function(){return["",this.name].join(" ")}},{key:"attributes",get:function(){return{class:this.className}}},{key:"events",get:function(){return{click:"handleClick"}}}])&&hr(r.prototype,n),t}();function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function br(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),br(this,_r(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(t,mr),r=t,(n=[{key:"name",get:function(){return"ButtonControl"}},{key:"tagName",get:function(){return"button"}},{key:"className",get:function(){return["--z--control --z--btn",this.name].join(" ")}}])&&vr(r.prototype,n),t}();function kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"initializer",value:function(e,t){this.controls=t}},{key:"onMouseOver",value:function(){ft||this.controls.disableAutoHide()}},{key:"onMouseOut",value:function(){this.controls.enableAutoHide()}},{key:"handleClick",value:function(){}},{key:"events",get:function(){return{click:"handleClick",mouseover:"onMouseOver",mouseout:"onMouseOut"}}}])&&kr(t.prototype,r),e}();function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Or(e,t){return(Or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=function(t){function n(){for(var e,t,i,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),i=(e=zr(n)).call.apply(e,[this].concat(a)),t=!i||"object"!==Sr(i)&&"function"!=typeof i?Pr(this):i,r.forEach((function(e){var r;(r=e.prototype.initializer).call.apply(r,[Pr(t)].concat(a))})),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Or(e,t)}(n,e),n}(),o=function(e,t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach((function(r){r.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))};return r.forEach((function(e){o(i.prototype,e.prototype),o(i,e)})),i}function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){return!t||"object"!==Cr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mr(e,t,r){return t&&Ir(e.prototype,t),r&&Ir(e,r),e}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jr=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r=Rr(this,(e=Dr(t)).call.apply(e,[this].concat(i)));var a=i[0];return r.config=Q({},ur,V(a.options,"controls.playPause")||{}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(t,Lr(wr,Tr)),Mr(t,[{key:"name",get:function(){return"PlayPauseControl"}},{key:"className",get:function(){return"--z--control --z--btn --z--control-play"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_ENDED,handler:this.onEnded},{name:z.PLAYER_CLICK,handler:this.toogleIcon},{name:z.PLAYER_PLAY,handler:this.toogleIcon},{name:z.PLAYER_PAUSE,handler:this.toogleIcon}]}}]),Mr(t,[{key:"toogleIcon",value:function(){oe(this.iconEl,"pl-ic-refresh");var e=this.player.isPlaying();ae(this.iconEl,"pl-ic-play_arrow",!e),ae(this.iconEl,"pl-ic-pause",e),this.setAttribute("title",e?"D\u1eebng":"Ph\xe1t")}},{key:"onEnded",value:function(){oe(this.iconEl,"pl-ic-play_arrow"),oe(this.iconEl,"pl-ic-pause"),ie(this.iconEl,"pl-ic-refresh"),this.setAttribute("title","Ph\xe1t l\u1ea1i")}},{key:"handleClick",value:function(){this.player.togglePlay(),this.toogleIcon()}},{key:"render",value:function(){return this.iconEl=ge("span",{},{class:"--z--icon pl-ic-play_arrow"}),this.config.color&&le(this.iconEl,{color:this.config.color}),this.el.append(this.iconEl),this}}]),t}();function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ur(e,t,r){return t&&Fr(e.prototype,t),r&&Fr(e,r),e}function Yr(e,t){return(Yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(25);var Gr=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Nr(t).call(this,e,r))).isDragging=!1,n.distance=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yr(e,t)}(t,mr),Ur(t,[{key:"name",get:function(){return"SliderControl"}}]),Ur(t,[{key:"onMouseDown",value:function(e){(ft||ke(e))&&(this.isDragging=!0,e&&e.preventDefault(),this.plugin.disableAutoHide(),window.on("mousemove",this.onMouseMove.bind(this)),window.on("mouseup",this.onBodyUnbindMouseMove.bind(this)))}},{key:"onMouseUp",value:function(e){this.isDragging=!1,this.distance=this.calculateDistance(e),this.handleMouseUp(),this.plugin.enableAutoHide()}},{key:"onMouseMove",value:function(e){ft&&!this.isDragging||(this.distance=this.calculateDistance(e),(ft||ke(e))&&(this.isDragging&&this.handleMouseMove(),this.plugin.disableAutoHide()))}},{key:"onBodyUnbindMouseMove",value:function(e){ft&&!this.isDragging||(window.off("mousemove",this.onMouseMove.bind(this)),window.off("mouseup",this.onBodyUnbindMouseMove.bind(this)),this.onMouseUp(e))}},{key:"calculateDistance",value:function(e){var t=this.player.options,r=t.lockRotateFullscreen,n=t.customIosFullscreen,i=!this.player.isLandscapeScreen(),o=this.player.isFullscreen(),a=n&&r&&i&&o,s=we(this.el,e,a);return a?1-s.y:s.x}},{key:"handleClick",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"handleMouseMove",value:function(){throw new Error("this must be overridden")}},{key:"handleMouseUp",value:function(){throw new Error("this must be overridden")}},{key:"events",get:function(){return{click:"handleClick",touchmove:"onMouseMove",touchstart:"onMouseDown",mousedown:"onMouseDown",touchend:"onMouseUp"}}}]),t}();function Vr(e){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e,t){return!t||"object"!==Vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qr(e){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wr(e,t,r){return t&&Kr(e.prototype,t),r&&Kr(e,r),e}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(27);var Xr={color:"",bulletColor:""},Jr=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Hr(this,Qr(t).call(this,e))).config=Q({},Xr,n),r.render(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(t,mr),Wr(t,[{key:"name",get:function(){return"SliderFillRecentBar"}},{key:"className",get:function(){return"--z--bar --z--bar-fill-recent"}},{key:"tagName",get:function(){return"span"}}]),Wr(t,[{key:"update",value:function(e){if(Y.number(e)){var t={width:"".concat(e,"%")};le(this.el,t)}}},{key:"render",value:function(){return this.config.color&&le(this.el,{backgroundColor:this.config.color}),this.bulletEl=ge("span",{},{class:"--z--bullet"}),this.config.bulletColor&&le(this.bulletEl,{backgroundColor:this.config.bulletColor}),this.el.append(this.bulletEl),this}}]),t}();function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tn(e,t,r){return t&&en(e.prototype,t),r&&en(e,r),e}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=V(e.options,"controls.seekBar.foregroundColor")||"",n=V(e.options,"controls.seekBar.playHeadColor")||"";return function(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,$r(t).call(this,e,{color:r,bulletColor:n}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(t,Jr),tn(t,[{key:"name",get:function(){return"ProgressControl"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_TIMEUPDATE,handler:this.onTimeUpdate}]}}]),tn(t,[{key:"onTimeUpdate",value:function(e){var t=e.current<0?e.total:e.current;this.currentPositionValue=t,this.currentDurationValue=e.total,this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100,this.update(this.currentSeekBarPercentage)}}]),t}();function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function an(e,t){return!t||"object"!==on(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function un(e,t,r){return t&&ln(e.prototype,t),r&&ln(e,r),e}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(29);var pn={color:""},fn=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=an(this,sn(t).call(this,e))).config=Q({},pn,n),r.render(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(t,mr),un(t,[{key:"name",get:function(){return"SliderLoadedBar"}},{key:"className",get:function(){return"--z--bar --z--bar-fill-load"}},{key:"tagName",get:function(){return"span"}}]),un(t,[{key:"update",value:function(e){if(Y.number(e)){var t={width:"".concat(e,"%")};le(this.el,t)}}},{key:"render",value:function(){return this.config.color&&le(this.el,{backgroundColor:this.config.color}),this}}]),t}();function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gn(e,t,r){return t&&yn(e.prototype,t),r&&yn(e,r),e}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var An=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=V(e.options,"controls.seekBar.bufferedColor")||"";return function(e,t){return!t||"object"!==dn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,hn(t).call(this,e,{color:r}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,fn),gn(t,[{key:"name",get:function(){return"LoadProgressBar"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_PROGRESS,handler:this.onProgressUpdate}]}}]),gn(t,[{key:"onProgressUpdate",value:function(e){var t=e.start/e.total*100,r=e.current/e.total*100;this.processLoaded=r-t,this.update(this.processLoaded)}}]),t}();function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wn(e,t,r){return t&&En(e.prototype,t),r&&En(e,r),e}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(31);var Tn={color:""},Sn=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=bn(this,_n(t).call(this,e))).config=Q({},Tn,n),r.render(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(t,mr),wn(t,[{key:"name",get:function(){return"SliderBackgroundBar"}},{key:"className",get:function(){return"--z--bar --z--bar-bg"}},{key:"tagName",get:function(){return"span"}}]),wn(t,[{key:"render",value:function(){return this.config.color&&le(this.el,{backgroundColor:this.config.color}),this}}]),t}(),zn=function(e){return parseInt(e/60/60%60,10)},Pn=function(e){return parseInt(e/60%60,10)},On=function(e){return parseInt(e%60,10)};function Ln(){return(new Date).getTime()/1e3}function Cn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Y.number(e))return"";var n=function(e){return"0".concat(e).slice(-2)},i=zn(e),o=Pn(e),a=On(e);return i=t||i>0?"".concat(i,":"):"","".concat(r&&e>0?"-":"").concat(i).concat(n(o),":").concat(n(a))}function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function In(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mn(e,t,r){return t&&In(e.prototype,t),r&&In(e,r),e}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jn=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==Rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Dn(t).call(this,e))).enabled=!0,r.render(),r.hide(),r.bindEvents(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(t,Ce),Mn(t,[{key:"name",get:function(){return"SeekTime"}},{key:"tagName",get:function(){return"span"}},{key:"attributes",get:function(){return{class:"--z--seek-time"}}},{key:"listenEvents",get:function(){return[{name:z.MEDIACONTROL_MOUSEMOVE_SEEKBAR,handler:this.onMouseMoveSeekbar},{name:z.MEDIACONTROL_MOUSELEAVE_SEEKBAR,handler:this.onMouseLeaveSeekbar}]}}]),Mn(t,[{key:"onMouseMoveSeekbar",value:function(e,t){var r=t*this.player.getDuration();le(this.el,{left:100*t+"%",marginLeft:-this.el.offsetWidth/2+"px"}),this.el.textContent=Cn(r),this.show()}},{key:"onMouseLeaveSeekbar",value:function(){this.hide()}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.show(),this.enabled=!0)}},{key:"disable",value:function(){this.unbindEvents(),this.hide(),this.enabled=!1}},{key:"render",value:function(){return this.el.innerHTML="00:00",this}}]),t}();function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){return!t||"object"!==Bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fn(e,t,r){return(Fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Un(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gn(e,t,r){return t&&Yn(e.prototype,t),r&&Yn(e,r),e}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hn=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r=Nn(this,(e=Un(t)).call.apply(e,[this].concat(i)));var a=i[0],s=V(a.options,"controls.seekBar.backgroundColor")||"";return r.loadProgressBar=new An(a),r.progressControl=new nn(a),r.barBackground=new Sn(a,{color:s}),r.seekTime=new jn(a),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(t,Lr(Gr,Tr)),Gn(t,[{key:"name",get:function(){return"SeekBarControl"}},{key:"className",get:function(){return"--z--progress-bar"}},{key:"events",get:function(){return{touchmove:"onMouseMove",mousedown:"onMouseDown",touchstart:"onMouseDown",touchend:"onMouseUp",mouseleave:"onMouseLeave",mouseover:"onMouseOver",mouseout:"onMouseOut",mousemove:"onMouseMove"}}},{key:"listenEvents",get:function(){return[{once:!0,name:z.PLAYER_DVRSTATECHANGED,handler:this.dvrChanged}]}}]),Gn(t,[{key:"onMouseLeave",value:function(e){this.player.trigger(z.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"onMouseMove",value:function(e){b.debug(this.name,"onMouseMove"),Fn(Un(t.prototype),"onMouseMove",this).call(this,e),this.player.trigger(z.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e,this.distance)}},{key:"onMouseDown",value:function(e){b.debug(this.name,"onMouseDown"),Fn(Un(t.prototype),"onMouseDown",this).call(this,e),this.addClass("active"),this.isPlayingBeforeSeek=this.player.isPlaying(),this.isPlayingBeforeSeek&&this.player.pause()}},{key:"update",value:function(){var e=100*this.distance;this.player.seekPercentage(e),this.currentSeekBarPercentage=e,this.progressControl.update(this.currentSeekBarPercentage)}},{key:"handleMouseMove",value:function(){this.player.mediaControl.draggingSeekBar=!0,this.update()}},{key:"handleMouseUp",value:function(){this.plugin.draggingSeekBar=!1,this.update(),this.removeClass("active"),this.seekTime.hide(),this.isPlayingBeforeSeek&&this.player.play()}},{key:"dvrChanged",value:function(){this.player.isLive()&&this.hide()}},{key:"render",value:function(){return this.el.append(this.barBackground.el),this.el.append(this.loadProgressBar.el),this.el.append(this.progressControl.el),this.el.append(this.seekTime.el),this}},{key:"remove",value:function(){[this.loadProgressBar,this.progressControl,this.barBackground,this.seekTime].forEach((function(e){e.remove()})),Fn(Un(t.prototype),"remove",this).call(this)}}]),t}();function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qn(e,t,r){return t&&Wn(e.prototype,t),r&&Wn(e,r),e}function Xn(e,t){return(Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(33);var Jn={currentTimeColor:"",totalTimeColor:"",delimiterColor:"",delimiter:"/"},Zn=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==Qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Kn(t).call(this,e))).config=Q({},Jn,V(e.options,"controls.time")||{}),r.currentTime=0,r.duration=r.player.getDuration(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xn(e,t)}(t,mr),qn(t,[{key:"name",get:function(){return"TimeControl"}},{key:"className",get:function(){return"--z--control --z--control-time"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_TIMEUPDATE,handler:this.onTimeUpdate},{once:!0,name:z.PLAYER_DVRSTATECHANGED,handler:this.dvrChanged}]}}]),qn(t,[{key:"onTimeUpdate",value:function(e){this.el&&(this.currentTime=e.current<0?e.total:e.current,this.duration||(this.duration=this.player.getDuration()),this.update())}},{key:"update",value:function(){this.currentTimeEl&&(this.currentTimeEl.textContent=Cn(this.currentTime)),this.durationEl&&(this.durationEl.textContent=Cn(this.duration))}},{key:"dvrChanged",value:function(){this.player.isLive()&&this.hide()}},{key:"render",value:function(){return this.currentTimeEl=ge("span"),this.spaceEl=ge("span",{innerHTML:this.config.delimiter}),this.durationEl=ge("span",{innerHTML:Cn(this.duration)}),le(this.currentTimeEl,{color:this.config.currentTimeColor}),le(this.spaceEl,{color:this.config.delimiterColor}),le(this.durationEl,{color:this.config.totalTimeColor}),this.el.append(this.currentTimeEl),this.el.append(this.spaceEl),this.el.append(this.durationEl),this}}]),t}();function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ri(e,t,r){return t&&ti(e.prototype,t),r&&ti(e,r),e}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(35),r(37);var ii={color:""},oi=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==$n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ei(t).call(this,e))).config=Q({},ii,V(e.options,"controls.volumeButton")||{}),r.volume=e.options.mute?0:e.options.volume,r.cachedVolume=e.options.volume||100,r.volumeIconClass="",r._chooseVolumeIconInit(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ni(e,t)}(t,wr),ri(t,[{key:"name",get:function(){return"VolumeButton"}},{key:"className",get:function(){return"--z--control --z--btn --z--volume-icon"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_VOLUMEUPDATE,handler:this.onVolumeUpdated}]}}]),ri(t,[{key:"_chooseVolumeIconInit",value:function(){0===this.volume?this.volumeIconClass="pl-ic-volume_off":this.volume>=50?this.volumeIconClass="pl-ic-volume_up":this.volume<50&&(this.volumeIconClass="pl-ic-volume_down")}},{key:"handleClick",value:function(){this.player.isMuted()?this.player.setVolume(this.cachedVolume,!0):this.player.setVolume(0,!0)}},{key:"onVolumeUpdated",value:function(e){this.volume=e,e>0&&(this.cachedVolume=e),this.updateIcon(e),this.setAttribute("title",0===e?"B\u1eadt \xe2m thanh":"T\u1eaft ti\u1ebfng")}},{key:"updateIcon",value:function(e){ae(this.iconEl,"pl-ic-volume_down",e<50),ae(this.iconEl,"pl-ic-volume_up",e>=50),ae(this.iconEl,"pl-ic-volume_off",0===e)}},{key:"render",value:function(){return this.iconEl=ge("span",{},{class:"--z--icon ".concat(this.volumeIconClass)}),this.config.color&&le(this.iconEl,{color:this.config.color}),this.el.append(this.iconEl),this}}]),t}();function ai(e){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(e,t,r){return(si="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=li(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function li(e){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ui(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ci(e,t,r){return t&&ui(e.prototype,t),r&&ui(e,r),e}function pi(e,t){return(pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(39);var fi=function(e){function t(e,r,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=function(e,t){return!t||"object"!==ai(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,li(t).call(this,e,n))).volume=e.options.mute?0:e.options.volume,i.parent=r;var o=V(e.options,"controls.volumeBar.foregroundColor")||"",a=V(e.options,"controls.volumeBar.backgroundColor")||"",s=V(e.options,"controls.volumeBar.volumeHeadColor")||"";return i.barFill=new Jr(e,{color:o,bulletColor:s}),i.barBackground=new Sn(e,{color:a}),i.update(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pi(e,t)}(t,Gr),ci(t,[{key:"name",get:function(){return"VolumeBar"}},{key:"className",get:function(){return"--z--volume-bar"}},{key:"tagName",get:function(){return"span"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_VOLUMEUPDATE,handler:this.onVolumeUpdated},{name:z.PLAYER_READY,handler:this.onPlayerReady},{name:z.PLAYER_FULLSCREEN,handler:this.onPlayerReady}]}}]),ci(t,[{key:"onPlayerReady",value:function(){this.player.getPlayerSize().width<=400?this.hide():this.show()}},{key:"onVolumeUpdated",value:function(e){this.volume=e,this.update()}},{key:"setVolume",value:function(e){e=Math.min(100,Math.max(e,0)),this.volume=e,this.player.setVolume(e,!0),this.update()}},{key:"update",value:function(){this.barFill&&this.barFill.update(this.volume)}},{key:"onMouseDown",value:function(e){si(li(t.prototype),"onMouseDown",this).call(this,e),this.parent.toggleHideAnimation(!1)}},{key:"handleMouseMove",value:function(){this.handleMouse()}},{key:"handleMouseUp",value:function(){this.handleMouse(),this.parent.toggleHideAnimation(!0)}},{key:"handleMouse",value:function(){this.player.mediaControl.draggingVolumeBar=!0,this.setVolume(100*this.distance)}},{key:"render",value:function(){return this.el.append(this.barBackground.el),this.el.append(this.barFill.el),this}}]),t}();function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(e,t,r){return(hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yi(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mi(e,t,r){return t&&gi(e.prototype,t),r&&gi(e,r),e}function Ai(e,t){return(Ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var bi=function(e){function t(){var e,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];n=this,r=!(i=(e=yi(t)).call.apply(e,[this].concat(a)))||"object"!==di(i)&&"function"!=typeof i?vi(n):i;var l=a[0],u=a[1];r.volumeButton=new oi(l),r.volumeBar=new fi(l,vi(vi(r)),u);var c=V(l.options,"controls.volumeBarShowOnHover");return Y.nullOrUndefined(c)&&(c=!0),r.toggleHideAnimation(c),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ai(e,t)}(t,Lr(mr,Tr)),mi(t,[{key:"name",get:function(){return"VolumeControl"}},{key:"className",get:function(){return"--z--control --z--control-volume"}}]),mi(t,[{key:"toggleHideAnimation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.toggleClass("--z--hide-animation",e)}},{key:"render",value:function(){return this.el.append(this.volumeButton.render().el),this.el.append(this.volumeBar.render().el),this}},{key:"remove",value:function(){[this.volumeButton,this.volumeBar].forEach((function(e){e.remove()})),hi(yi(t.prototype),"remove",this).call(this)}}]),t}(),_i=(r(41),{isFullscreenIos:!1,isFullscreen:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||this.isFullscreenIos)},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():void 0},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}});function Ei(e){return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wi(e,t){return!t||"object"!==Ei(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Si(e,t,r){return t&&Ti(e.prototype,t),r&&Ti(e,r),e}function zi(e,t){return(zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pi={color:""},Oi=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r=wi(this,(e=ki(t)).call.apply(e,[this].concat(i)));var a=i[0];return r.config=Q({},Pi,V(a.options,"controls.fullscreen")||{}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zi(e,t)}(t,Lr(wr,Tr)),Si(t,[{key:"name",get:function(){return"FullScreenControl"}},{key:"className",get:function(){return"--z--control --z--btn --z--control-full-screen"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_FULLSCREEN,handler:this._onFullScreenChange},{name:z.PLAYER_DBLCLICK,handler:this._onDblClicked}]}}]),Si(t,[{key:"handleClick",value:function(){this.config.functionFullscreen?this.config.functionFullscreen():this.player.toggleFullscreen()}},{key:"_onDblClicked",value:function(){this.config.dblClickToFullScreen&&this.handleClick()}},{key:"toogleIconFullScreen",value:function(e){ae(this.iconEl,"pl-ic-fullscreen_exit",e),ae(this.iconEl,"pl-ic-fullscreen",!e),this.setButtonTooltip(e)}},{key:"setButtonTooltip",value:function(e){var t=this.config.buttonTooltip,r=t?t.on:"To\xe0n m\xe0n h\xecnh",n=t?t.off:"Tho\xe1t ch\u1ebf \u0111\u1ed9 to\xe0n m\xe0n h\xecnh";this.setAttribute("title",e?n:r)}},{key:"render",value:function(){return this.iconEl=ge("span",{},{class:"--z--icon pl-ic-fullscreen"}),this.setButtonTooltip(this.player.isFullscreen()),this.config.color&&le(this.iconEl,{color:this.config.color}),this.el.append(this.iconEl),this}},{key:"_onFullScreenChange",value:function(e){this.toogleIconFullScreen(e)}}]),t}();function Li(e){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t,r){return(Ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ri(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Ri(e){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ii(e,t,r){return t&&Di(e.prototype,t),r&&Di(e,r),e}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r(43);var ji={color:"",labelBgColor:"",labelTextColor:""},Bi=function(e){function t(e,r){var n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=!(i=Ri(t).call(this,e))||"object"!==Li(i)&&"function"!=typeof i?xi(this):i).config=Q({},ji,V(e.options,"controls.SettingsButton")||{}),n.parent=r,n.label="",window.on("click.".concat(n.name),n.clickOutsideSettingsButton.bind(xi(xi(n)))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}(t,mr),Ii(t,[{key:"name",get:function(){return"SettingsButton"}},{key:"className",get:function(){return"--z--btn --z--btn-settings"}},{key:"tagName",get:function(){return"button"}}]),Ii(t,[{key:"clickOutsideSettingsButton",value:function(e){ne(e.target,"pl-ic-settings")||this.parent.hideSettingsMenu()}},{key:"remove",value:function(){window.off("click.".concat(this.name),this.clickOutsideSettingsButton.bind(this)),Ci(Ri(t.prototype),"remove",this).call(this)}},{key:"handleClick",value:function(e){e.stopPropagation(),this.parent.toggleVisibleSettingsMenu()}},{key:"updateBadgeLabel",value:function(e){this.label=e,this.iconLabelEl.textContent=e}},{key:"render",value:function(){return this.iconEl=ge("span",{},{class:"--z--icon pl-ic-settings"}),this.iconLabelEl=ge("span",{},{class:"--z--badge"}),this.iconLabelEl.textContent=this.label,this.setAttribute("title","C\xe0i \u0111\u1eb7t"),le(this.iconEl,{color:this.config.color}),le(this.iconLabelEl,{backgroundColor:this.config.labelBgColor,color:this.config.labelTextColor}),this.el.append(this.iconEl),this.el.append(this.iconLabelEl),this}}]),t}(),Ni={MENU_TYPE:{TOGGLE:"toggle",EXPAND:"expand"},LIST_MENU_TYPE:{CHECKLIST:"checklist",MIXIN:"mixin"}};function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ui(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Yi(e,t,r[t])}))}return e}function Yi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gi(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Vi(e,t){return!t||"object"!==Fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hi(e){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ki(e,t,r){return t&&Qi(e.prototype,t),r&&Qi(e,r),e}function Wi(e,t){return(Wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qi=function(){},Xi=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r=Vi(this,(e=Hi(t)).call.apply(e,[this].concat(i)));var a=i[2];return r.render(),r.parent=a,r.controls=r.parent.controls,r.settingsMenuItems={},r.routeHistory=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wi(e,t)}(t,Lr(mr,Tr)),Ki(t,[{key:"name",get:function(){return"SettingsMenu"}},{key:"className",get:function(){return"--z--zpl-settings-menu"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_READY,handler:this.onPlayerReady},{name:z.PLAYER_MEDIACONTROL_HIDE,handler:this.onHideMediaControl},{name:z.PLAYER_SETTINGS_MENU_HIDE,handler:this.hideMenu},{name:z.PLAYER_PLAY,handler:this.hideMenu},{name:z.PLAYER_PAUSE,handler:this.hideMenu},{name:z.PLAYER_FULLSCREEN,handler:this.hideMenu},{name:z.PLAYER_MEDIACONTROL_CLICK,handler:this.hideMenu},{name:z.PLAYER_VOLUMEUPDATE,handler:this.hideMenu}]}}]),Ki(t,[{key:"handleClick",value:function(e){e.stopPropagation()}},{key:"onHideMediaControl",value:function(){this.hideMenu()}},{key:"onPlayerReady",value:function(){var e=K(this.settingsMenuItems);e.length&&(e=Ct(e,"order")),e.length?(this.createMenu({type:Ni.LIST_MENU_TYPE.MIXIN,config:{itemsList:e}}),this.parent.show(),this.parent.settingsButton.show()):this.parent.hide()}},{key:"registerMenuItem",value:function(e){var t=e.pluginKey,r=void 0===t?"":t,n=e.type,i=void 0===n?Ni.MENU_TYPE.TOGGLE:n,o=e.config,a=void 0===o?{}:o,s=e.order,l=void 0===s?0:s,u=e.callback,c=void 0===u?qi:u,p=e.optionsConfig;if(!r)throw new Error("pluginKey must be required");this.settingsMenuItems[r]={type:i,config:a,order:l,callback:c,optionsConfig:p}}},{key:"asyncRegisterMenuItem",value:function(){this.registerMenuItem.apply(this,arguments),this.onPlayerReady()}},{key:"createToggleItem",value:function(e){var t=this,r=e.title,n=void 0===r?"":r,i=e.checked,o=void 0!==i&&i,a=e.clickCallback,s=void 0===a?qi:a,l=e.itemIndex,u=ge("div",{innerHTML:'\n            <div class="--z--zpl-item-label">\n                '.concat(n,'\n            </div>\n            <div class="--z--zpl-item-content">\n                <div class="--z--zpl-toggle-checkbox"></div>\n            </div>\n        ')},{class:"--z--zpl-menu-item","aria-checked":o});return u.on("click",(function(e){Y.function(s)&&s(e,u);var r="true"!==Ae(u,"aria-checked");ve(u,"aria-checked",r);var n=t.routeHistory.length;if(n){var i=t.routeHistory[n-1];if("mixin"===V(i,"config.headerConfig.optionsMenu.type")){var o=V(i,"config.headerConfig.optionsMenu.data");if(Y.array(o)&&o.length){var a=o[l],c=V(a,"config.checked");a&&!Y.nullOrUndefined(c)&&(a.config.checked=r)}}}})),u}},{key:"createExpandableItem",value:function(e){var t=this,r=e.title,n=void 0===r?"":r,i=e.activeItemIndex,o=void 0===i?0:i,a=e.clickCallback,s=void 0===a?qi:a,l=e.subMenu,u=e.optionsConfig,c=e.historyData,p=e.itemIndex,f=l.type,d=l.data,h=l.clickCallback,y=l.titleClickCallback,g=d&&Y.array(d)&&d[o],m=g&&g.displayName||g&&g.label||"",A=ge("div",{innerHTML:'\n            <div class="--z--zpl-item-label">\n                '.concat(n,'\n            </div>\n            <div class="--z--zpl-item-content">\n                <div class="--z--zpl-has-expand">\n                    <span> ').concat(m,' </span>\n                    <i class="pl-ic-keyboard_arrow_right"></i>\n                </div>\n            </div>\n        ')},{class:"--z--zpl-menu-item"});return d.map((function(e,t){return e.checked=o===t,e})),A.data={title:n,activeItemIndex:o,subMenu:l,optionsConfig:u,itemIndex:p},A.on("click",(function(e){if(Y.function(s)&&s(e,A),Y.nullOrUndefined(c)||Y.empty(c)||(t.routeHistory=[].concat(Gi(t.routeHistory),[c])),f===Ni.LIST_MENU_TYPE.CHECKLIST){var r={headerConfig:{title:n,showOptions:!!u,optionText:u&&u.label,optionsClickCallback:u&&u.clickCallback,optionsMenu:u&&u.subMenu,titleClickCallback:y},itemsList:d,clickCallback:h,itemIndex:p};t.createCheckListMenu(r,{type:Ni.LIST_MENU_TYPE.CHECKLIST,config:r})}})),A}},{key:"createCheckableItem",value:function(e){var t=this,r=e.label,n=void 0===r?"":r,i=e.disabled,o=void 0!==i&&i,a=e.checked,s=void 0!==a&&a,l=e.callback,u=void 0===l?qi:l,c=e.itemIndex,p=ge("div",{innerHTML:'\n            <div class="--z--zpl-item-label">\n                <i class="pl-ic-done"></i>\n                <span class="txt">'.concat(n,"</span>\n            </div>\n        ")},{class:"--z--zpl-menu-item","aria-checked":s,"aria-disabled":o});return p.on("click",(function(e){if(Y.function(u)&&u(e,p),o)return!1;for(var r=(p.parentNode||p.parentElement).childNodes,n=r.length,i=0;i<n;i++)ve(r[i],"aria-checked",!1);ve(p,"aria-checked",!0);var a=t.routeHistory.length,s=t.routeHistory[a-1],l=V(s,"config.itemsList"),f=l&&Y.array(l)&&l[c],d=V(p.data,"index");if(Y.nullOrUndefined(d))throw new Error("Element must be have index property in data",p);if(f&&!Y.nullOrUndefined(f.type)){var h=V(f,"config.activeItemIndex");Y.nullOrUndefined(h)||(f.config.activeItemIndex=d)}else{var y=V(s,"config.headerConfig.optionsMenu");y&&!Y.nullOrUndefined(V(y,"activeItemIndex"))&&(y.activeItemIndex=d)}})),p}},{key:"goBack",value:function(){var e=this.routeHistory.length;if(e){var t=this.routeHistory[e-1];t&&(this.createMenu(t),this.routeHistory.pop())}}},{key:"createMenuHeader",value:function(e){var t=this,r=e.title,n=void 0===r?"":r,i=e.showOptions,o=void 0!==i&&i,a=e.optionText,s=void 0===a?"Options":a,l=e.titleClickCallback,u=void 0===l?qi:l,c=e.optionsClickCallback,p=void 0===c?qi:c,f=e.optionsMenu,d=e.historyData,h=e.itemIndex,y=ge("div",{},{class:"--z--zpl-panel-header --z--clearfix"}),g=ge("button",{innerHTML:'<i class="pl-ic-keyboard_arrow_left"></i> '.concat(n)},{class:"--z--panel-title"});if(g.on("click",(function(e){e.stopPropagation(),t.goBack(),Y.function(u)&&u(e)})),y.append(g),o){var m=ge("div",{innerText:s},{class:"--z--zpl-options"});m.on("click",(function(e){e.stopPropagation();var r=t.routeHistory[t.routeHistory.length-1],n=r&&V(r,"config.itemsList"),i=n&&Y.array(n)&&n[h];if(i){var o=V(i,"config.activeItemIndex");Y.nullOrUndefined(o)||(d.config.activeItemIndex=o,V(d,"config.itemsList")&&d.config.itemsList.map((function(e,t){return e.checked=o===t,e})))}Y.nullOrUndefined(d)||Y.empty(d)||(t.routeHistory=[].concat(Gi(t.routeHistory),[d])),Y.function(p)&&p(e);var a=f.type,l=f.data,u=f.activeItemIndex,c={headerConfig:{title:s},itemsList:l,itemIndex:h};a===Ni.LIST_MENU_TYPE.CHECKLIST?(Y.number(u)&&l.map((function(e,t){return e.checked=u===t,e})),t.createCheckListMenu(c,{type:Ni.LIST_MENU_TYPE.CHECKLIST,config:c})):a===Ni.LIST_MENU_TYPE.MIXIN&&t.createMixinMenu(c,{type:Ni.LIST_MENU_TYPE.MIXIN,config:c})})),y.append(m)}return y}},{key:"createMenu",value:function(e){var t=e.type,r=e.config;"checklist"===t?this.createCheckListMenu(Ui({},r),{type:t,config:r}):"mixin"===t&&this.createMixinMenu(Ui({},r),{type:t,config:r})}},{key:"createCheckListMenu",value:function(e,t){var r=e.headerConfig,n=e.itemsList,i=void 0===n?[]:n,o=e.clickCallback,a=void 0===o?qi:o,s=e.itemIndex;if(this.panelEl.innerHTML="",r){var l=this.createMenuHeader(Ui({},r,{historyData:t,itemIndex:s}));this.panelEl.append(l)}for(var u=ge("div",{},{class:"--z--panel-scroll-wrapper"}),c=ge("div",{},{class:"--z--zpl-panel-menu"}),p=i.length,f=0;f<p;f++){var d=i[f];if(!Y.object(d)||!d.label)return;var h=this.createCheckableItem({label:d.displayName||d.label,checked:!!d.checked,disabled:!!d.disabled,callback:a,itemIndex:s});h.data=d,c.append(h)}u.append(c),this.panelEl.append(u)}},{key:"createMixinMenu",value:function(e,t){var r=e.headerConfig,n=e.itemsList,i=void 0===n?[]:n;if(this.panelEl.innerHTML="",r){var o=this.createMenuHeader(r);this.panelEl.append(o)}for(var a=ge("div",{},{class:"--z--panel-scroll-wrapper"}),s=ge("div",{},{class:"--z--zpl-panel-inner"}),l=i.length,u=0;u<l;u++){var c=i[u],p=c.type,f=c.config,d=c.callback,h=c.optionsConfig,y=null;p===Ni.MENU_TYPE.TOGGLE?y=this.createToggleItem(Ui({},f,{itemIndex:u})):p===Ni.MENU_TYPE.EXPAND&&(y=this.createExpandableItem(Ui({},f,{optionsConfig:h,historyData:t,itemIndex:u}))),Y.function(d)&&d(y),y&&s.append(y)}a.append(s),this.panelEl.append(a)}},{key:"toggleVisibleMenu",value:function(){ae(this.el,"--z--show"),this.player.isMenuOpen=!this.player.isMenuOpen}},{key:"hideMenu",value:function(){oe(this.el,"--z--show"),this.player.isMenuOpen=!1}},{key:"render",value:function(){this.panelEl=ge("div",{},{class:"--z--zpl-panel"}),this.el.append(this.panelEl),this.player.el.append(this.el)}}]),t}();function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zi(e,t,r){return(Zi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$i(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function $i(e){return($i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function to(e,t,r){return t&&eo(e.prototype,t),r&&eo(e,r),e}function ro(e,t){return(ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function no(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){return!t||"object"!==io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function so(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lo(e,t,r){return t&&so(e.prototype,t),r&&so(e,r),e}function uo(e,t){return(uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function co(e){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function po(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fo(e,t){return!t||"object"!==co(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ho(e,t,r){return(ho="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yo(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function go(e,t){return(go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mo={playpause:jr,seekbar:Hn,time:Zn,volume:bi,fullscreen:Oi,settings:function(e){function t(){var e,r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];n=this,r=!(i=(e=$i(t)).call.apply(e,[this].concat(a)))||"object"!==Ji(i)&&"function"!=typeof i?no(n):i;var l=a[0],u=a[1];return r.settingsButton=new Bi(l,no(no(r))),r.settingsMenu=new Xi(l,u,no(no(r))),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ro(e,t)}(t,Lr(mr,Tr)),to(t,[{key:"name",get:function(){return"SettingsControl"}},{key:"className",get:function(){return"--z--control --z--control-settings"}}]),to(t,[{key:"toggleVisibleSettingsMenu",value:function(){this.settingsMenu.toggleVisibleMenu()}},{key:"hideSettingsMenu",value:function(){this.settingsMenu.hideMenu()}},{key:"render",value:function(){return this.el.append(this.settingsButton.render().el),this}},{key:"remove",value:function(){[this.settingsButton,this.settingsMenu].forEach((function(e){e.remove()})),Zi($i(t.prototype),"remove",this).call(this)}}]),t}(),theatermode:function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r=oo(this,(e=ao(t)).call.apply(e,[this].concat(i)));var a=i[0];return r.config=Q({},ur,V(a.options,"controls.theaterMode")||{}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}(t,Lr(wr,Tr)),lo(t,[{key:"name",get:function(){return"TheaterModeControl"}},{key:"className",get:function(){return"--z--control --z--btn --z--control-theater-mode"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_THEATER_MODE_CHANGE,handler:this._onTheaterModeChange}]}}]),lo(t,[{key:"toggleIcon",value:function(e){ae(this.iconEl,"pl-ic-theater",e),ae(this.iconEl,"pl-ic-theater-mini",!e),this.setButtonTooltip(e)}},{key:"handleClick",value:function(){this.player.toggleTheaterMode()}},{key:"setButtonTooltip",value:function(e){var t=this.config.buttonTooltip,r=t?t.on:"Ch\u1ebf \u0111\u1ed9 r\u1ea1p chi\u1ebfu",n=t?t.off:"Tho\xe1t ch\u1ebf \u0111\u1ed9 r\u1ea1p chi\u1ebfu";this.setAttribute("title",e?n:r)}},{key:"render",value:function(){var e=this.options.theaterMode,t=e?"pl-ic-theater":"pl-ic-theater-mini";return this.iconEl=ge("span",{},{class:"--z--icon ".concat(t)}),this.setButtonTooltip(e),this.el.append(this.iconEl),this}},{key:"_onTheaterModeChange",value:function(e){this.toggleIcon(e)}}]),t}()},Ao=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fo(this,yo(t).apply(this,arguments))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(t,je),n=t,o=[{key:"NAME_EVENTS",get:function(){return[{name:z.PLAYER_MOUSE_MOVE,handler:this.onMouseMove},{name:z.PLAYER_MOUSE_LEAVE,handler:this.onMouseLeave},{name:z.PLAYER_PLAY,handler:this.onPlay},{name:z.PLAYER_PAUSE,handler:this.onPause}]}}],(i=[{key:"setUp",value:function(){this.draggingVolumeBar=!1,this.draggingSeekBar=!1,this.autoHideDisabled=!1,this.setting=Q({},this.pluginOptions),this.setting.layout=V(this.pluginOptions,"layout"),this.controls=[],this.leftElement=null,this.rightElement=null,this.pluginOptions.disabled||this.onMouseMove()}},{key:"setupTheme",value:function(){var e=this,t=this.setting,n=t.type,i=t.theme;if(n.fullWidth){ie(this.innerEl,sr),ie(this.el,sr);var o=n.fullWidth;switch(o.backgoundType){case cr:ie(this.innerEl,lr);break;case pr:ie(this.innerEl,lr),ie(this.el,lr)}var a=o.paddingTop;Y.number(a)&&a>=0&&le(this.innerEl,{paddingTop:String(a).indexOf("px")>-1?a:"".concat(a,"px")}),le(this.innerEl,{backgroundImage:o.backgroundImage,backgroundColor:o.backgroundColor}),this.setting.hideAnimation&&(this.hideClass="--z--fadeout")}i&&K(fr).indexOf(i)>-1&&r(45)("./".concat(i,".scss")).then((function(t){var r=ge("style",{innerHTML:t.default});e.innerEl.append(r)}))}},{key:"onClicked",value:function(e){e.stopPropagation(),this.player.trigger(z.PLAYER_MEDIACONTROL_CLICK)}},{key:"onDblClicked",value:function(e){e.stopPropagation(),this.player.trigger(z.PLAYER_MEDIACONTROL_DBLCLICK)}},{key:"onMouseLeave",value:function(){this.autoHideDisabled||this.setting.alwaysShowControl||(clearTimeout(this.hideTimeout),this.hide())}},{key:"onMouseMove",value:function(){var e=this;this.autoHideDisabled||(clearTimeout(this.hideTimeout),this.show(),this.setting.alwaysShowControl||(this.hideTimeout=setTimeout((function(){return e.onMouseLeave()}),3e3)))}},{key:"onPlay",value:function(){this.enableAutoHide()}},{key:"onPause",value:function(){this.onMouseLeave(),ft?this.setting.showOnPauseMobile&&this.disableAutoHide():this.disableAutoHide()}},{key:"disableAutoHide",value:function(){this.autoHideDisabled=!0,clearTimeout(this.hideTimeout),this.show()}},{key:"enableAutoHide",value:function(){this.player.isPlaying()&&(this.autoHideDisabled=!1,this.onMouseMove())}},{key:"disable",value:function(){ho(yo(t.prototype),"disable",this).call(this),this.player.disableMediaControl()}},{key:"enable",value:function(){ho(yo(t.prototype),"enable",this).call(this),this.player.enableMediaControl()}},{key:"show",value:function(){b.debug(this.name,"show"),oe(this.el,this.hideClass),this.player.showMediaControl()}},{key:"hide",value:function(){this.hideClass||(this.hideClass=ar),b.debug(this.name,"hide",this.hideClass),ie(this.el,this.hideClass),this.player.hideMediaControl()}},{key:"destroy",value:function(){ho(yo(t.prototype),"destroy",this).call(this),this.controls.forEach((function(e){return e.remove()})),this.remove()}},{key:"getControl",value:function(e){return this.controls&&this.controls.filter((function(t){return t.name===e}))[0]}},{key:"renderControl",value:function(e,t){if(t){var r=mo[t];if(r){var n=new r(this.player,this);e.append(n.render().el),this.controls.push(n)}}}},{key:"render",value:function(){var e=this;if(!this.controls)return this;if(ho(yo(t.prototype),"render",this).call(this),this.leftElement=ge("div",{},{class:"--z--control-left"}),this.rightElement=ge("div",{},{class:"--z--control-right"}),this.innerEl=ge("div",{},{class:"--z--controls"}),(!this.setting.layout.left||!this.setting.layout.left.length)&&ie(this.rightElement,"--z--only-right-control"),this.setting.layout.default){var r=!0,n=!1,i=void 0;try{for(var o,a=this.setting.layout.default[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;this.renderControl(this.innerEl,s)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}if(this.setting.layout.left){var l=!0,u=!1,c=void 0;try{for(var p,f=this.setting.layout.left[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var d=p.value;this.renderControl(this.leftElement,d)}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}}if(this.setting.layout.right){var h=!0,y=!1,g=void 0;try{for(var m,A=this.setting.layout.right[Symbol.iterator]();!(h=(m=A.next()).done);h=!0){var v=m.value;this.renderControl(this.rightElement,v)}}catch(e){y=!0,g=e}finally{try{h||null==A.return||A.return()}finally{if(y)throw g}}}return this.setupTheme(),this.innerEl.append(this.leftElement),this.innerEl.append(this.rightElement),this.el.append(this.innerEl),this.player.$el.append(this.el),setTimeout((function(){e.player.mediaControlReady()}),0),this}},{key:"name",get:function(){return"ControlsPlugin"}},{key:"attributes",get:function(){return{class:"--z--controls-wrapper"}}},{key:"events",get:function(){return{click:"onClicked",dblclick:"onDblClicked"}}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_MOUSE_MOVE,handler:this.onMouseMove},{name:z.PLAYER_MOUSE_LEAVE,handler:this.onMouseLeave},{name:z.PLAYER_PLAY,handler:this.onPlay},{name:z.PLAYER_PAUSE,handler:this.onPause}]}},{key:"defaultOptions",get:function(){return ur}}])&&po(n.prototype,i),o&&po(n,o),t}();function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _o(e,t){return!t||"object"!==vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eo(e){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(46);var ko={poster:"//zjs.zadn.vn/zplayer/images/poster_default.jpg"},To=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_o(this,Eo(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(t,je),r=t,(n=[{key:"_onPlayerPlayIntent",value:function(){this.hide()}},{key:"_onPlayerEnded",value:function(){this.player.options.customIosFullscreen||this.show()}},{key:"handleClick",value:function(){return this.player.play(),!1}},{key:"getPosterUrl",value:function(){return this.options.poster||this.pluginOptions.poster}},{key:"render",value:function(){var e=this.getPosterUrl(),t=ge("div",{},{class:"--z--poster-controls --z--play-wrapper --z--active"});return this.el.setAttribute("style","background-image : url(".concat(e,");")),Y.empty(this.pluginOptions.styles)||le(this.el,this.pluginOptions.styles),this.$el.append(t),this.player.$el.append(this.el),this}},{key:"name",get:function(){return"PosterPlugin"}},{key:"attributes",get:function(){return{class:"--z--player-poster"}}},{key:"events",get:function(){return{click:"handleClick",touch:"handleClick"}}},{key:"defaultOptions",get:function(){return ko}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_PLAY_INTENT,handler:this._onPlayerPlayIntent},{name:z.PLAYER_ENDED,handler:this._onPlayerEnded}]}}])&&bo(r.prototype,n),t}();function So(e){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Po(e,t){return!t||"object"!==So(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oo(e,t,r){return(Oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lo(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Co(e,t){return(Co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(48);var Ro={showLabel:!1},Do=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Po(this,Lo(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Co(e,t)}(t,je),r=t,(n=[{key:"setUp",value:function(){Oo(Lo(t.prototype),"setUp",this).call(this),this.bufferingPercent=1,this.shouldUpdate=!0}},{key:"onBuffering",value:function(){this.shouldUpdate=!0,this.show()}},{key:"onBufferingChange",value:function(e){Y.number(e)&&((e=Math.floor(e))<1?e=1:e>99&&(e=99),this.bufferingPercent=e,this.update())}},{key:"onBufferFull",value:function(){b.debug(this.name,"onBufferFull"),this.bufferingPercent=1,this.update(),this.hide(),this.shouldUpdate=!1}},{key:"onStop",value:function(){b.debug(this.name,"onStop"),this.bufferingPercent=1,this.hide()}},{key:"show",value:function(){var e=this;null===this.showTimeout&&(this.showTimeout=setTimeout((function(){return e.$el.show()}),300))}},{key:"hide",value:function(){null!==this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()}},{key:"update",value:function(){this.shouldUpdate&&this.pieWrapperEl&&(se(this.pieWrapperEl,"--z--pie-wrapper --z--progress-".concat(this.bufferingPercent)),this.labelEl&&ye(this.labelEl,"".concat(this.bufferingPercent,"%")))}},{key:"render",value:function(){return this.pieEl=ge("div",{},{class:"--z--pie-progress-size"}),this.pieWrapperEl=ge("div",{innerHTML:'\n                <div class="--z--pie">\n                    <div class="--z--left-side --z--half-circle"></div>\n                    <div class="--z--right-side --z--half-circle"></div>\n                </div>\n                <div class="--z--shadow"></div>\n                '},{class:"--z--pie-wrapper"}),this.pluginOptions.showLabel&&(this.labelEl=ge("div",{innerHTML:"".concat(this.bufferingPercent,"%")},{class:"--z--label"}),this.pieWrapperEl.prepend(this.labelEl)),this.pieEl.append(this.pieWrapperEl),this.$el.append(this.pieEl),this.player.$el.append(this.$el),this.$el.hide(),this.player.buffering&&this.onBuffering(),this}},{key:"_onPlayerPlayIntent",value:function(){this.player.buffering&&this.show()}},{key:"name",get:function(){return"LoadingSpinnerPlugin"}},{key:"attributes",get:function(){return{class:"--z--loading-wrapper"}}},{key:"defaultOptions",get:function(){return Ro}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_PLAY_INTENT,handler:this._onPlayerPlayIntent},{name:z.PLAYER_BUFFERING,handler:this.onBuffering},{name:z.PLAYER_BUFFERING_CHANGE,handler:this.onBufferingChange},{name:z.PLAYER_BUFFERFULL,handler:this.onBufferFull},{name:z.PLAYER_STOP,handler:this.onStop},{name:z.PLAYER_ENDED,handler:this.onStop},{name:z.PLAYER_ERROR,handler:this.onStop}]}}])&&zo(r.prototype,n),t}();function Io(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e?e.toString().replace(/{(\d+)}/g,(function(e,t){return r[t].toString()})):e}function Mo(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}function xo(e){var t=document.createDocumentFragment(),r=document.createElement("div");return t.appendChild(r),r.innerHTML=e,t.firstChild.innerText}function jo(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function Bo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return String.prototype.startsWith?e.startsWith(t,r):(r=!r||r<0?0:+r,e.indexOf(t)===r)}function No(e,t,r){return String.prototype.endsWith?e.endsWith(t,r):((void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t)}function Fo(e){return"".concat(e,"-").concat(Math.floor(1e4*Math.random()))}function Uo(e,t){return 0===e||0===t||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}function Yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"),r.toString())}function Go(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}function Vo(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return e=Yo(e,"-"," "),e=Yo(e,"_"," "),Yo(e=Go(e)," ","")}function Ho(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return(e=Vo(e)).charAt(0).toLowerCase()+e.slice(1)}function Qo(e){var t=document.createDocumentFragment(),r=document.createElement("div");return t.appendChild(r),r.innerHTML=e,t.firstChild.innerText}function Ko(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}function Wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=[]}var t,r;return t=e,(r=[{key:"getItem",value:function(e){return this.data[e]}},{key:"setItem",value:function(e,t){this.data[e]=String(t)}},{key:"removeItem",value:function(e){delete this.data[e]}}])&&Wo(t.prototype,r),e}();function Xo(){try{return"localStorage"in window&&(window.localStorage.setItem("__test__","__test__"),window.localStorage.removeItem("__test__"),!0)}catch(e){return!1}}var Jo=Xo()?window.localStorage:new qo;function Zo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zplayer";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t}var t,r,n;return t=e,n=[{key:"supported",value:function(){return Xo()}}],(r=[{key:"get",value:function(e){var t=Jo.getItem(this.key);if(Y.empty(t))return{};var r=JSON.parse(t);return Y.string(e)&&e.length?r[e]:r}},{key:"set",value:function(e){if(Y.object(e)){var t=this.get();Y.empty(t)&&(t={}),Q(t,e),Jo.setItem(this.key,JSON.stringify(t))}}},{key:"clean",value:function(){Jo.removeItem(this.key)}}])&&Zo(t.prototype,r),n&&Zo(t,n),e}();function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ra(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function na(e){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oa="zplayer-trk",aa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ra(this,na(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(t,je),r=t,(n=[{key:"setUp",value:function(){this.options.sources!=[{source:"",mimeType:""}]&&(this._isFirstLoad=!0,this._isBuffering=!0,this._trackingApi=this.pluginOptions.trackingApi,this._storage=new $o(Fo(oa)),this._reset(),this._sendLastReports())}},{key:"_now",value:function(){return Date.now()}},{key:"_onPlayIntent",value:function(){this._timeOnStartLoad=this._now(),this._start("startup"),this._startMonitoring()}},{key:"_onBitrate",value:function(e){var t=parseInt(e.label),r=this._now(),n=this._metrics.extra.bitratesHistory.length;if(n>0){var i=this._metrics.extra.bitratesHistory[n-1];i.end=r,i.time=r-i.start}this._metrics.extra.bitratesHistory.push({start:this._now(),bitrate:t}),this._inc("changeLevel")}},{key:"_onFirstPlaying",value:function(){this.listenTo(this.player,z.PLAYER_TIMEUPDATE,this._onContainerUpdateWhilePlaying),this.listenEvents.push({name:z.PLAYER_TIMEUPDATE,handler:this._onContainerUpdateWhilePlaying}),this._start("watch"),this._stop("startup")}},{key:"_onContainerUpdateWhilePlaying",value:function(){this.player.isPlaying()&&(this._stop("watch"),this._start("watch"))}},{key:"_onCanPlayThrough",value:function(e){if(this.player.isPlaying()){var t=e.time;this._isFirstLoad?(this._isFirstLoad=!1,this._timeOnCanPlayFirstLoad=t):(this._timeOnCanPlayThrough=t,this._trackLatencyHistory(this._isBuffering))}}},{key:"_trackLatencyHistory",value:function(e){if(e)if(this._isSeeking)this._seekLatencyHistory.push(this._timeOnCanPlayThrough-this._timeOnSeeking),this._isSeeking=!1;else if(this._isWaiting){var t=this._timeOnCanPlayThrough-this._timeOnWaiting;this._metrics.timers.playLatency+=t,this._isWaiting=!1}}},{key:"_onSeeking",value:function(e){this._isSeeking=!0,this._timeOnSeeking=e.time}},{key:"_onWaiting",value:function(e){this._isSeeking||(this._isWaiting=!0,this._timeOnWaiting=e.time)}},{key:"_onPlayerEnded",value:function(){this._sendReportThenReset(),this.stopListening(),this.bindEvents()}},{key:"_onPlayerError",value:function(e){this._metrics.extra.errorDetail.push("code: ".concat(e.code,", description: ").concat(e.description)),this._inc("error"),this._sendReportThenReset()}},{key:"_startMonitoring",value:function(){var e=this;this._intervalId=setInterval((function(){e._buildReport(),e._sendLastReports()}),5e3),this._buildReport(),b.info(this.name,"started monitoring")}},{key:"_stopMonitoring",value:function(){clearInterval(this._intervalId),b.info(this.name,"stopped monitoring")}},{key:"_sendReportThenReset",value:function(){this._stopMonitoring(),this._buildReport(),this._sendReport(this._storage.get()),this._reset()}},{key:"_reset",value:function(){this._isFirstLoad=!0,this._seekLatencyHistory=[],this._newMetrics(),this._storage.clean()}},{key:"_sendLastReports",value:function(){var e=this;Object.keys(Jo).filter(sa).forEach((function(t){var r,n=JSON.parse(Jo.getItem(t));e._storage.key===t||(r=n)&&Date.now()-r._updatedAt<5e3||(e._sendReport(n),Jo.removeItem(t),b.debug(e.name,"sent report:",t))}))}},{key:"_saveMetrics",value:function(){var e={_updatedAt:this._now(),userAgent:navigator.userAgent,fromUrl:window.location.href,params:JSON.stringify(this._metrics)};this._storage.set(e)}},{key:"_sendReport",value:function(e){b.debug(this.name,"sending report:",e),this._trackingApi.forEach((function(t){(new Image).src=t+"?userAgent="+encodeURIComponent(e.userAgent)+"&fromUrl="+encodeURIComponent(e.fromUrl)+"&params="+encodeURIComponent(e.params)}))}},{key:"onPlay",value:function(){this._inc("play")}},{key:"onPause",value:function(){this._stop("watch"),this._start("pause"),this._inc("pause"),this.listenToOnce(this.player,z.PLAYER_PLAY,this.playAfterPause)}},{key:"playAfterPause",value:function(){this._stop("pause"),this._start("watch")}},{key:"onSeek",value:function(e){this._inc("seek"),this._metrics.extra.watchHistory.push([1e3*e,1e3*e])}},{key:"onFullScreen",value:function(){this._inc("fullscreen")}},{key:"onProgress",value:function(e){this._metrics.extra.buffersize=1e3*e.current}},{key:"onTimeUpdate",value:function(e){var t=1e3*e.current,r=1e3*e.total,n=this._metrics.extra.watchHistory.length;this._metrics.extra.duration=r,this._metrics.extra.currentTime=t,0===n?this._metrics.extra.watchHistory.push([t,t]):this._metrics.extra.watchHistory[n-1][1]=t}},{key:"onBuffering",value:function(){this._isBuffering=!0,this._inc("buffering"),this._start("buffering"),this.listenToOnce(this.player,z.PLAYER_BUFFERFULL,this.onBufferfull)}},{key:"onBufferfull",value:function(){this._isBuffering=!1,this._stop("buffering"),this.listenToOnce(this.player,z.PLAYER_BUFFERING,this.onBuffering)}},{key:"_inc",value:function(e){this._metrics.counters[e]+=1}},{key:"_timerHasStarted",value:function(e){return void 0!==this["_start".concat(e)]}},{key:"_start",value:function(e){this["_start".concat(e)]=this._now()}},{key:"_stop",value:function(e){this._metrics.timers[e]+=this._now()-this["_start".concat(e)]}},{key:"_fetchFPS",value:function(){var e={html5_video:this._html5FetchFPS,hls:this._html5FetchFPS};e[this._playbackName]&&e[this._playbackName].call(this)}},{key:"_calculateBitrates",value:function(){var e=this,t=this._metrics.extra.bitratesHistory.map((function(e){return e.bitrate}));this._metrics.extra.bitrateMean=t.reduce((function(e,t){return e+t}),0)/t.length,this._metrics.extra.bitrateVariance=t.map((function(t){return Math.pow(t-e._metrics.extra.bitrateMean,2)})).reduce((function(e,t){return e+t}),0)/t.length,this._metrics.extra.bitrateStandardDeviation=Math.sqrt(this._metrics.extra.bitrateVariance),this._metrics.extra.bitrateMostUsed=this._metrics.extra.bitratesHistory.sort((function(e,t){return e.time<t.time}))[0]}},{key:"_calculatePercentages",value:function(){this._metrics.extra.duration>0&&(this._metrics.extra.watchedPercentage=this._metrics.timers.watch/this._metrics.extra.duration*100,this._metrics.extra.bufferingPercentage=this._metrics.timers.buffering/this._metrics.extra.duration*100)}},{key:"_calculateStartLatency",value:function(){!this._timeOnCanPlayFirstLoad||this._timeOnCanPlayFirstLoad<=0||(this._metrics.timers.startLatency=this._timeOnCanPlayFirstLoad-this._timeOnStartLoad)}},{key:"_calculateSeekLatency",value:function(){this._metrics.timers.seekLatency=Dt(this._seekLatencyHistory)}},{key:"_newMetrics",value:function(){var e=this;this._metrics={counters:{play:0,pause:0,error:0,buffering:0,decodedFrames:0,droppedFrames:0,fps:0,changeLevel:0,seek:0,fullscreen:0,dvrUsage:0},timers:{startup:0,watch:0,pause:0,buffering:0,session:0,startLatency:0,seekLatency:0,playLatency:0,getSourceLatency:0},extra:{product:"",level:"",playbackName:"",playbackType:"",playbackRedirector:"",playbackSrc:"",mimeType:"",platform:ft?"webm":"webd",zdnServer:"",bitratesHistory:[],bitrateMean:0,bitrateVariance:0,bitrateStandardDeviation:0,bitrateMostUsed:0,buffersize:0,errorDetail:[],watchHistory:[],watchedPercentage:0,bufferingPercentage:0,isOnline:!0}},window.ZA&&Y.function(window.ZA.getVisitorID)&&window.ZA.getVisitorID((function(t){b.debug(e.name,"ZA visitor ID:",t),e._metrics.extra.visitorId=t}))}},{key:"_buildReport",value:function(){this._stop("session"),this._start("session"),this._metrics.extra.playbackName=this._playbackName,this._metrics.extra.playbackType=this._playbackType,this._metrics.extra.product=this.options.product,this._calculateBitrates(),this._calculatePercentages(),this._fetchFPS(),this._calculateStartLatency(),this._calculateSeekLatency(),this._metrics.extra.playbackSrc=this.player.isHlsPlayback()?this.player.options.source:this.player.playback.el.src,this._metrics.extra.mimeType=this.player.options.mimeType,this._saveMetrics()}},{key:"_html5FetchFPS",value:function(){var e=this.player.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,r=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,n=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=r,this._metrics.counters.fps=n/5,this._lastDecodedFramesCount=t}},{key:"name",get:function(){return"StatsPlugin"}},{key:"defaultOptions",get:function(){return{trackingApi:["https://zplayer-trk.zdn.vn/track"]}}},{key:"_playbackName",get:function(){return this.player.playback.name}},{key:"_playbackType",get:function(){return this.player.getPlaybackType()}},{key:"listenEvents",get:function(){return[{once:!0,name:z.PLAYER_PLAY_INTENT,handler:this._onPlayIntent},{once:!0,name:z.PLAYER_PLAY,handler:this._onFirstPlaying},{name:z.PLAYER_QUALITY_LEVELS_SELECTED,handler:this._onBitrate},{name:z.PLAYER_CANPLAYTHROUGH,handler:this._onCanPlayThrough},{name:z.PLAYER_PLAY,handler:this.onPlay},{name:z.PLAYER_PAUSE,handler:this.onPause},{once:!0,name:z.PLAYER_ERROR,handler:this._onPlayerError},{name:z.PLAYER_ENDED,handler:this._onPlayerEnded},{name:z.PLAYER_SEEKING,handler:this._onSeeking},{name:z.PLAYER_SEEK,handler:this.onSeek},{name:z.PLAYER_WAITING,handler:this._onWaiting},{name:z.PLAYER_FULLSCREEN,handler:this.onFullScreen},{name:z.PLAYER_PROGRESS,handler:this.onProgress},{name:z.PLAYER_TIMEUPDATE,handler:this.onTimeUpdate},{once:!0,name:z.PLAYER_BUFFERING,handler:this.onBuffering},{once:!0,name:z.PLAYER_BUFFERFULL,handler:this.onBufferfull}]}}])&&ta(r.prototype,n),t}();function sa(e){return e&&0===e.indexOf(oa)}function la(e){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ua(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ca(e,t){return!t||"object"!==la(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fa(e,t){return(fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(50);var da=["PosterPlugin","LoadingSpinnerPlugin","BigPlayButtonPlugin","ClickToPausePlugin","PauseAdPlugin","PlayPauseFaceoutPlugin","HotKeysPlugin"],ha=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ca(this,pa(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fa(e,t)}(t,je),r=t,(n=[{key:"setUp",value:function(){var e=this;if(this.defaultOptions.disabled)return this.disable();this.shouldRender=!0,this.interferedPlugins=da.map((function(t){return e.player.getPlugin(t)}))}},{key:"bindReload",value:function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))}},{key:"reload",value:function(){var e=this;this.listenToOnce(this.player,z.PLAYER_READY,(function(){return e.player.play()})),this.unbindReload()}},{key:"unbindReload",value:function(){this.reloadButton&&this.reloadButton.off("click")}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.err=e,this.player.mediaControl.disable(),this._disableInterferedPlugins(),this.render(),this.show(),this.shouldRender=!1}},{key:"_disableInterferedPlugins",value:function(){this.interferedPlugins.forEach((function(e){return e&&e.disable()}))}},{key:"render",value:function(){if(this.err&&this.shouldRender){var e=ge("div",{innerHTML:'\n            <div class="player-error-screen__title" data-error-screen>'.concat(this.pluginOptions.message,'.</div>\n            <div class="player-error-screen__code" data-error-screen>Error code: ').concat(this.err.code,"</div>\n            ")},{"data-error-screen":"",class:"player-error-screen__content"});return this.el.append(e),this.player.el.append(this.el),this.bindReload(),this}}},{key:"name",get:function(){return"ErrorScreenPlugin"}},{key:"attributes",get:function(){return{class:"player-error-screen","data-error-screen":""}}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_ERROR,handler:this.onError}]}},{key:"defaultOptions",get:function(){return{message:"C\xf3 l\u1ed7i x\u1ea3y ra!"}}}])&&ua(r.prototype,n),t}();function ya(e){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ma(e,t){return!t||"object"!==ya(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Aa(e){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ba={disableHotKeys:!1},_a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ma(this,Aa(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(t,$),r=t,(n=[{key:"playPauseKey",value:function(e){return 32===e.which||179===e.which}},{key:"rewindKey",value:function(e){return 37===e.which||177===e.which}},{key:"forwardKey",value:function(e){return 39===e.which||176===e.which}},{key:"volumeUpKey",value:function(e){return 38===e.which}},{key:"volumeDownKey",value:function(e){return 40===e.which}},{key:"muteKey",value:function(e){return 77===e.which}},{key:"fullscreenKey",value:function(e){return 70===e.which}},{key:"numberKey",value:function(e){return e.which>47&&e.which<59||e.which>95&&e.which<106}},{key:"getNumberKey",value:function(e){var t=48;return e.which>95&&(t=96),e.which-t}},{key:"getKey",value:function(e){return!(e.metaKey||e.ctrlKey||e.altKey)&&(this.playPauseKey(e)?1:this.volumeUpKey(e)?2:this.volumeDownKey(e)?3:this.muteKey(e)?8:this.fullscreenKey(e)?4:this.rewindKey(e)?5:this.forwardKey(e)?6:this.numberKey(e)?9:void 0)}},{key:"_onPlayerKeydown",value:function(e){if(this.player.mediaControl.disabled)return!0;var t=this.getKey(e);if(!t)return!0;e.preventDefault(),e.stopPropagation(),this.player.mediaControl.show();var r=this.player.getCurrentTime(),n=100*this.player.getVolume(),i=this.player.getDuration(),o=this.getNumberKey(e);switch(t){case 1:this.player.togglePlay();break;case 2:this.player.setVolume(n+5,!0);break;case 3:this.player.setVolume(n-5,!0);break;case 8:this.player.isMuted()?this.player.unmute(!0):this.player.mute(!0);break;case 4:this.player.toggleFullscreen();break;case 5:this.player.seek(r-5);break;case 6:this.player.seek(r+5);break;case 9:this.player.seek(i*o*.1)}}},{key:"name",get:function(){return"HotKeysPlugin"}},{key:"defaultOptions",get:function(){return ba}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_KEYDOWN,handler:this._onPlayerKeydown}]}}])&&ga(r.prototype,n),t}();function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ka(e,t){return!t||"object"!==Ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sa(e,t){return(Sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var za=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ka(this,Ta(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sa(e,t)}(t,$),r=t,(n=[{key:"setUp",value:function(){this.userInteractive=!1}},{key:"_onPlayerClickEvent",value:function(){this.player.isMenuOpen||(ft?(this.userInteractive&&this.player.togglePlay(),this.userInteractive=!0):this.player.togglePlay())}},{key:"_onHideMediaControl",value:function(){this.userInteractive=!1}},{key:"name",get:function(){return"ClickToPausePlugin"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_CLICK,handler:this._onPlayerClickEvent},{name:z.PLAYER_MEDIACONTROL_HIDE,handler:this._onHideMediaControl}]}}])&&wa(r.prototype,n),t}();function Pa(e){return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function La(e,t){return!t||"object"!==Pa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ca(e){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Da=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),La(this,Ca(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}(t,$),r=t,(n=[{key:"_onDblClicked",value:function(){this.options.dblClickToFullScreen&&!ft&&this.player.toggleFullscreen()}},{key:"name",get:function(){return"DoubleClickToFullscreen"}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_DBLCLICK,handler:this._onDblClicked}]}}])&&Oa(r.prototype,n),t}(),Ia=r(6),Ma=r(4),xa=r.n(Ma),ja=function(){return new Promise((function(e,t){var r=new XMLHttpRequest;r.open("HEAD","//zjs.zadn.vn/zplayer/ads.js?ad",!0),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?e():t(new Error("Ad Blocker is enabled")))},r.send()}))};function Ba(){var e=Array.prototype.slice.call(arguments);if(window.fetch)return window.fetch.apply(window,e);function t(e){if("string"!=typeof e&&(e=e.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=e.toString()),e}function n(e){var t=this;this.map={},e instanceof n?e.forEach((function(e,r){r.forEach((function(r){t.append(e,r)}))})):e&&Object.getOwnPropertyNames(e).forEach((function(r){t.append(r,e[r])}))}function i(e){if(e.bodyUsed)return fetch.Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function o(e){return new fetch.Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function a(e){var t=new FileReader;return t.readAsArrayBuffer(e),o(t)}n.prototype.append=function(e,n){e=t(e),n=r(n);var i=this.map[e];i||(i=[],this.map[e]=i),i.push(n)},n.prototype.delete=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},n.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.map).forEach((function(r){e(r,t.map[r])}))};var s={blob:"FileReader"in window&&"Blob"in window&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in window};function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(s.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(s.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},s.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return fetch.Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return fetch.Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var e,t,r=i(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,(t=new FileReader).readAsText(e),o(t);if(this._bodyFormData)throw new Error("could not read FormData body as text");return fetch.Promise.resolve(this._bodyText)}):this.text=function(){return i(this)||fetch.Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then((function(e){return JSON.parse(e)}))},this}var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function c(e,t){var r,i;if(t=t||{},this.url=e,this.credentials=t.credentials||"omit",this.headers=new n(t.headers),this.method=(i=(r=t.method||"GET").toUpperCase(),u.indexOf(i)>-1?i:r),this.mode=t.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&t.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(t.body)}function p(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function f(e){var t=new n;return e.getAllResponseHeaders().trim().split("\n").forEach((function(e){var r=e.trim().split(":"),n=r.shift().trim(),i=r.join(":").trim();t.append(n,i)})),t}var d=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);function h(e,t){t||(t={}),this._initBody(e),this.type="default",this.url=null,this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof n?t.headers:new n(t.headers),this.url=t.url||""}return l.call(c.prototype),l.call(h.prototype),window.Headers=n,window.Request=c,window.Response=h,window.fetch=function(e,t){var r;return r=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t),new fetch.Promise((function(e,t){var n=function(){return d&&!/^(get|post|head|put|delete|options)$/i.test(this.method)?(this.usingActiveXhr=!0,new window.ActiveXObject("Microsoft.XMLHTTP")):new XMLHttpRequest}.call(this);function i(){if(4===n.readyState){var r=1223===n.status?204:n.status;if(r<100||r>599)t(new TypeError("Network request failed"));else{var i={status:r,statusText:n.statusText,headers:f(n),url:"responseURL"in n?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):void 0},o="response"in n?n.response:n.responseText;e(new h(o,i))}}}"cors"===r.credentials&&(n.withCredentials=!0),n.onreadystatechange=i,this.usingActiveXhr||(n.onload=i,n.onerror=function(){t(new TypeError("Network request failed"))}),n.open(r.method,r.url,!0),"responseType"in n&&s.blob&&(n.responseType="blob"),r.headers.forEach((function(e,t){t.forEach((function(t){n.setRequestHeader(e,t)}))})),n.send(void 0===r._bodyInit?null:r._bodyInit)}))},fetch.Promise=window.Promise,window.fetch.polyfill=!0,window.fetch.apply(window,e)}var Na=function(e,t){return Promise.resolve().then(ja).then((function(){return function(e){return"function"==typeof e?e():e}(e)})).then(Fa).then((function(e){return function(e,t){var r;b.debug("AdLoader","loading ad from source:",e);var n=Ba(e,{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return clearTimeout(r),e&&e.ads?e.ads.schedule:[]})),i=new Promise((function(e,n){r=setTimeout((function(){return n(new Error("Timeout reached: ".concat(t)))}),t)}));return Promise.race([n,i])}(e,t)}))};function Fa(e){if(!e)throw new Error("no ad source");return e}function Ua(e){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ga(e,t){return!t||"object"!==Ua(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Va(e,t,r){return(Va="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ha(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Ha(e){return(Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qa(e,t){return(Qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ka=["PosterPlugin","ClickToPausePlugin","DoubleClickToFullscreen","PauseAdPlugin","HotKeysPlugin"],Wa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ga(this,Ha(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qa(e,t)}(t,je),r=t,(n=[{key:"setUp",value:function(){this.interferedPlugins=[],this.pauseContentRequested=!1,this.interferedPluginNames=Ka.slice(0),b.debug(this.name,"initializing"),this._loadSource()}},{key:"addInterferedPlugin",value:function(e){this.interferedPluginNames.push(e)}},{key:"getPluginOptions",value:function(){return Q(this.defaultOptions,V(this._options,"pluginsOptions.ads")||this.defaultOptions)}},{key:"render",value:function(){Va(Ha(t.prototype),"render",this).call(this),this.$el.hide()}},{key:"init",value:function(){throw new Error("this must be overridden")}},{key:"canHandle",value:function(e){throw new Error("this must be overridden")}},{key:"onAdsDataLoaded",value:function(e){throw new Error("this must be overridden")}},{key:"onAdWillStart",value:function(){b.info(this.name,"ad will start"),this.player.trigger(z.PLAYER_AD_WILL_START)}},{key:"onAdStarted",value:function(){b.info(this.name,"ad started"),this.player.trigger(z.PLAYER_AD_STARTED)}},{key:"onAdStopped",value:function(e){b.info(this.name,"ad stopped:",e),this.player.trigger(z.PLAYER_AD_STOPPED,{reason:e})}},{key:"onAdSkipped",value:function(){b.info(this.name,"ad skipped"),this.player.trigger(z.PLAYER_AD_SKIPPED)}},{key:"pauseForAd",value:function(){return this.pauseContentRequested?xa.a.resolve():(b.debug(this.name,"pauseForAd"),this.pauseContentRequested=!0,this._disableMediaControl(),this._disableInterferedPlugins(),this.$el.show(),this._pausePlayback())}},{key:"resumeAfterAd",value:function(){return b.debug(this.name,"resumeAfterAd"),this.pauseContentRequested?(this.pauseContentRequested=!1,this._enableMediaControl(),this._enableInterferedPlugins(),this.$el.hide(),this._resumePlayback()):xa.a.resolve()}},{key:"_pausePlayback",value:function(){return this.player.pause()}},{key:"_resumePlayback",value:function(){return this.player.playback.ended?xa.a.resolve():this.player.play()}},{key:"_disableInterferedPlugins",value:function(){var e=this;this.interferedPlugins=this.interferedPluginNames.map((function(t){return function(e){return e&&e.enabled?{enable:e.enable.bind(e),disable:e.disable.bind(e)}:{enable:function(){},disable:function(){}}}(e.player.getPlugin(t))})),this.interferedPlugins.forEach((function(e){return e.disable()}))}},{key:"_enableInterferedPlugins",value:function(){this.interferedPlugins.forEach((function(e){return e.enable()}))}},{key:"_disableMediaControl",value:function(){this.mediaControlDisabled=this.player.mediaControl.disabled,this.mediaControlDisabled||this.player.mediaControl.disable()}},{key:"_enableMediaControl",value:function(){this.mediaControlDisabled||this.player.mediaControl.enable()}},{key:"_loadSource",value:function(){var e=this,t=this.pluginOptions,r=t.source,n=t.loadTimeout;Na(r,void 0===n?3e3:n).then((function(t){return e.onAdsDataLoaded(t)}),(function(t){/timeout reached/.test(t.message)&&e.player.trigger(z.PLAYER_AD_LOAD_TIMEOUT),b.error(e.name,"Cannot load ad:",t),e.onAdsDataLoaded(null)}))}},{key:"name",get:function(){return"AdsBase"}},{key:"attributes",get:function(){return{class:this.name}}}])&&Ya(r.prototype,n),t}();function qa(e){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ja(e,t){return!t||"object"!==qa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Za(e,t,r){return(Za="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$a(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function $a(e){return($a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function es(e,t){return(es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(52);var ts=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ja(this,$a(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&es(e,t)}(t,Wa),r=t,(n=[{key:"setUp",value:function(){b.debug(this.name,"setUp"),Za($a(t.prototype),"setUp",this).call(this),this.metadataDeferred=dt(),this.runnerDeferred=dt(),this.runnerDeferredPromise=this.runnerDeferred.promise,this.rootPosterConfig=this.pluginOptions.poster,this._onResize=this._onResize.bind(this),window.on("resize.ads",this._onResize,!1),this.player.$el.append(this.$el),this.nonLinearAdContainer=ge("div",{},{class:"AdsPluginNonLinear"}),this.player.$el.append(this.nonLinearAdContainer),this.runner=null}},{key:"onAdsDataLoaded",value:function(e){var t=this;this._transformAdsData(e).then((function(e){e&&e.length?t._runnerProxy((function(){t.runner.onAdsDataLoaded(e)})):(b.info(t.name,"empty ad data, destroying plugin..."),t.destroy())}))}},{key:"destroy",value:function(){var e=this;Za($a(t.prototype),"destroy",this).call(this),window.off("resize.ads",this._onResize,!1),Te(this.nonLinearAdContainer),this._runnerProxy((function(){e.runner.destroy(),e.runner=null})),b.debug(this.name,"destroyed")}},{key:"getPoster",value:function(){var e=this.player.getPlayerSize().width;if(this.pluginOptions.poster=!(e<=400)&&this.rootPosterConfig,!this.pluginOptions.poster)return Promise.resolve();var t=this.player.getPlugin("PosterPlugin");return t?Promise.resolve(t.getPosterUrl()):Promise.resolve()}},{key:"getContentPlayer",value:function(){return this.player.playback.el}},{key:"getContentVolume",value:function(){return this.player.isMuted()?0:100*this.player.getVolume()}},{key:"getContentMetadata",value:function(){return this.metadataDeferred.promise}},{key:"getAdContainers",value:function(){var e=this.player.mediaControl.getControl("SeekBarControl");return{linear:this.el,nonLinear:this.nonLinearAdContainer,notification:this.player.el,adMark:e&&e.el}}},{key:"getLogger",value:function(){return b}},{key:"onAdStarted",value:function(){var e=this;Za($a(t.prototype),"onAdStarted",this).call(this),!this.player.options.customIosFullscreen&&et&&_i.isFullscreen()&&(b.info(this.name,"player in fullscreen mode on iOS, skipping ad..."),this._runnerProxy((function(){e.runner.stopAd()})))}},{key:"_onUserActionEvent",value:function(){var e=this;this._runnerProxy((function(){e.runner.onUserAction()}))}},{key:"_onPlaybackEnded",value:function(){var e=this;this._runnerProxy((function(){e.runner.onContentEnded()})),this.pluginOptions.replayAds&&this._loadSource()}},{key:"_onPlayerError",value:function(){this.destroy()}},{key:"_onTimeUpdate",value:function(e){var t=this;this.player.mediaControl.draggingSeekBar||this._runnerProxy((function(){t.runner.onContentProgress(e)}))}},{key:"_onLoadedMetadata",value:function(e){this.player.getDuration()<this.pluginOptions.minDurationShowAd&&this.destroy(),this.metadataDeferred.resolve(e)}},{key:"_onAdPauseRequest",value:function(){this._pauseAd()}},{key:"_onAdResumeRequest",value:function(){this._resumeAd()}},{key:"_onResize",value:function(e){var t=this,r=arguments,n=this.player.getPlayerSize().width,i=this.rootPosterConfig&&n>400;this._runnerProxy((function(){var n=t.runner;Y.nullOrUndefined(n)||(n.showPosterAndPlayIcon(i),"resize"===e.type?n.resize():n.resize.apply(n,r))}))}},{key:"_pauseAd",value:function(){var e=this;this._runnerProxy((function(){e.runner.pauseAd()}))}},{key:"_resumeAd",value:function(){var e=this;this._runnerProxy((function(){e.runner.resumeAd()}))}},{key:"_transformAdsData",value:function(e){var t=this.pluginOptions.transform;return"function"!=typeof t?Promise.resolve(e):(b.debug(this.name,"transforming ad data..."),this.getContentMetadata().then((function(r){return t(e,r)})))}},{key:"_runnerProxy",value:function(e){this.runnerDeferred&&this.runnerDeferredPromise.then(e)}},{key:"_toggleMediaControls",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._runnerProxy((function(){var r=t?"addClass":"removeClass";e.runner.adUi.countdownToPlay[r]("has_controls_bar"),e.runner.adUi.$uiLoading[r]("has_controls_bar")}))}},{key:"_onPlayerControlShow",value:function(){this._toggleMediaControls()}},{key:"_onPlayerControlHide",value:function(){this._toggleMediaControls(!1)}},{key:"_onPlayerControlReady",value:function(){this.runner||(this.runnerOptions={startTimeout:this.pluginOptions.startTimeout/1e3,skipTimeout:this.pluginOptions.skipTimeout/1e3,countdownPlay:!this.pluginOptions.noCountdownPlay,showSlideBlack:this.pluginOptions.showSlideBlack,removeAdmarkOnError:this.pluginOptions.removeAdmarkOnError,autoPlayAdBreaks:this.pluginOptions.autoPlayAdBreaks,autoPlay:!!this.player.options.autoPlay,mute:!!this.player.options.mute},this.runner=new Ia.Runner(this,this.runnerOptions),this.runnerDeferred.resolve())}},{key:"_onPlayerFullscreen",value:function(){this._onResize("resize")}},{key:"name",get:function(){return"AdsPlugin"}},{key:"defaultOptions",get:function(){return{replayAds:!1,showSlideBlack:!0,removeAdmarkOnError:!0,startTimeout:1e4,skipTimeout:3e3,autoPlayAdBreaks:!0,minDurationShowAd:5}}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_PLAY_INTENT,handler:this._onUserActionEvent},{name:z.PLAYER_TIMEUPDATE,handler:this._onTimeUpdate},{once:!0,name:z.PLAYER_LOADEDMETADATA,handler:this._onLoadedMetadata},{once:!this.pluginOptions.replayAds,name:z.PLAYER_ENDED,handler:this._onPlaybackEnded},{name:z.PLAYER_ERROR,handler:this._onPlayerError},{name:z.PLAYER_AD_PAUSE_REQUEST,handler:this._onAdPauseRequest},{name:z.PLAYER_AD_RESUME_REQUEST,handler:this._onAdResumeRequest},{name:z.PLAYER_UPDATE_SIZE,handler:this._onResize},{name:z.PLAYER_MEDIACONTROL_SHOW,handler:this._onPlayerControlShow},{name:z.PLAYER_MEDIACONTROL_HIDE,handler:this._onPlayerControlHide},{once:!0,name:z.PLAYER_MEDIACONTROL_READY,handler:this._onPlayerControlReady},{name:z.PLAYER_FULLSCREEN,handler:this._onPlayerFullscreen}]}}])&&Xa(r.prototype,n),t}();function rs(e){return(rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function is(e,t){return!t||"object"!==rs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function os(e){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function as(e,t){return(as=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(54);var ss=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),is(this,os(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&as(e,t)}(t,je),r=t,(n=[{key:"setUp",value:function(){this.pluginOptions.disabled&&this.disable()}},{key:"handleClick",value:function(e){return e.stopPropagation(),this.player.play(),this.player.el.focus(),!1}},{key:"_onPlayerPlay",value:function(){this.hide()}},{key:"_onPlayerPause",value:function(){this.pluginOptions.showOnPauseMobile&&this.show()}},{key:"render",value:function(){var e=ge("span",{},{class:"--z--icon pl-ic-play_arrow"});return le(e,this.pluginOptions.iconStyles),le(this.el,this.pluginOptions.buttonStyles),this.setAttribute("title","Ph\xe1t"),this.el.append(e),this.player.el.append(this.el),this}},{key:"name",get:function(){return"BigPlayButtonPlugin"}},{key:"tagName",get:function(){return"button"}},{key:"className",get:function(){return"--z--big-play-button"}},{key:"attributes",get:function(){return{class:this.className,type:"button"}}},{key:"events",get:function(){return{click:"handleClick",touch:"handleClick"}}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_PLAY,handler:this._onPlayerPlay},{name:z.PLAYER_PLAY_INTENT,handler:this._onPlayerPlay},{name:z.PLAYER_PAUSE,handler:this._onPlayerPause}]}},{key:"defaultOptions",get:function(){return{showOnPauseMobile:!0}}}])&&ns(r.prototype,n),t}();function ls(e){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cs(e,t){return!t||"object"!==ls(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ps(e){return(ps=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fs(e,t){return(fs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(56);var ds=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cs(this,ps(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fs(e,t)}(t,je),r=t,(n=[{key:"setUp",value:function(){this.pluginOptions.disabled||ft?this.disable():(this.bigPlayButtonPlugin=this.player.getPlugin("BigPlayButtonPlugin"),this.isPlaying=!this.player.isPlaying(),this.mediaControlDisabled=this.player.mediaControl.disabled,this.bigPlayButtonEnabled=this.bigPlayButtonPlugin.enabled)}},{key:"_disableInterferedPlugins",value:function(){this.bigPlayButtonEnabled&&this.bigPlayButtonPlugin.disable()}},{key:"_onPlayerPlayIntent",value:function(){this._disableInterferedPlugins()}},{key:"_onPlayerClick",value:function(){this.player.isMenuOpen||this._togglePlayPause()}},{key:"_togglePlayPause",value:function(){var e=this;this.isPlaying=!this.isPlaying,le(this.el,{display:"flex"}),setTimeout((function(){le(e.el,{display:"none"})}),500),ae(this.iconEl,"pl-ic-play_arrow",this.isPlaying),ae(this.iconEl,"pl-ic-pause",!this.isPlaying)}},{key:"_onPlayerEnded",value:function(){this.bigPlayButtonEnabled&&this.bigPlayButtonPlugin.enable(),this.mediaControlDisabled||this.player.mediaControl.enable()}},{key:"render",value:function(){return this.iconEl=ge("span",{},{class:"--z--icon pl-ic-play_arrow"}),le(this.iconEl,this.pluginOptions.iconStyles),le(this.el,this.pluginOptions.buttonStyles),this.el.append(this.iconEl),this.player.el.append(this.el),this}},{key:"name",get:function(){return"PlayPauseFaceoutPlugin"}},{key:"tagName",get:function(){return"button"}},{key:"className",get:function(){return"--z--playpause-fadeout"}},{key:"attributes",get:function(){return{class:this.className,type:"button"}}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_CLICK,handler:this._onPlayerClick},{name:z.PLAYER_ENDED,handler:this._onPlayerEnded},{name:z.PLAYER_PLAY_INTENT,handler:this._onPlayerPlayIntent}]}}])&&us(r.prototype,n),t}(),hs=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),ys=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});function gs(e){return Object.assign({muted:!1,timeout:250,inline:!1},e)}function ms(e,t){var r=e.muted,n=e.timeout,i=e.inline,o=t(),a=o.element,s=o.source,l=void 0,u=void 0,c=void 0;return a.muted=r,!0===r&&a.setAttribute("muted","muted"),!0===i&&a.setAttribute("playsinline","playsinline"),a.src=s,new Promise((function(e){l=a.play(),u=setTimeout((function(){c(!1,new Error("Timeout "+n+" ms has been reached"))}),n),c=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(u),e({result:t,error:r})},void 0!==l?l.then((function(){return c(!0)})).catch((function(e){return c(!1,e)})):c(!0)}))}var As={audio:function(e){return ms(e=gs(e),(function(){return{element:document.createElement("audio"),source:URL.createObjectURL(hs)}}))},video:function(e){return ms(e=gs(e),(function(){return{element:document.createElement("video"),source:URL.createObjectURL(ys)}}))}};function vs(e){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _s(e,t,r){return(_s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Es(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Es(e){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ws(e,t){return(ws=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(58);var ks=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==vs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Es(t).call(this,e))).pluginOptions=r,n.render(),n.bindEvents(),n}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ws(e,t)}(t,Ce),r=t,(n=[{key:"render",value:function(){return _s(Es(t.prototype),"render",this).call(this),this.el.innerHTML='<button class="--z--btn-unmute" title=\''.concat(this.pluginOptions.boxUnmute.message,'\'>\n                                <i class="--z--icon pl-ic-volume_off"></i>\n                            </button>\n                            <span>').concat(this.pluginOptions.boxUnmute.message,"</span>"),this.player.el.append(this.el),this}},{key:"handleClick",value:function(e){e.stopPropagation(),this.player.unmute(),this.remove()}},{key:"_update",value:function(){this.player.isMuted()||this.remove()}},{key:"attributes",get:function(){return{class:"--z--unmute-box"}}},{key:"listenEvents",get:function(){return[{name:z.PLAYER_VOLUMEUPDATE,handler:this._update}]}},{key:"events",get:function(){return{click:"handleClick",touch:"handleClick"}}}])&&bs(r.prototype,n),t}();function Ts(e){return(Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zs(e,t){return!t||"object"!==Ts(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ps(e,t,r){return(Ps="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Os(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ls(e,t){return(Ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zs(this,Os(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ls(e,t)}(t,$),r=t,i=[{key:"NAME_EVENTS",get:function(){return["PLUGIN_AUTOPLAY_MUTE"]}}],(n=[{key:"registerMenuCallback",value:function(e){this.menuItemEl=e}},{key:"setUp",value:function(){var e=this;if(this.options.autoPlay&&this.enabled){var t="";switch(this.player.getPlaybackType()){case Ke.VOD:t="video";break;case Ke.AOD:t="audio"}t&&As[t]({timeout:this.pluginOptions.timeout}).then((function(r){r.result?e.player.play():(e.player.mute(),As[t]({timeout:e.pluginOptions.timeout,muted:!0}).then((function(t){var r=t.result,n=t.error;r?(b.info(e.name,"autoplay muted"),e.player.play(),e.trigger(e._nameEvents.PLUGIN_AUTOPLAY_MUTE),e.pluginOptions.showBoxUnmute&&(e.boxUnmute=new ks(e.player,e.pluginOptions))):(b.warn(e.name,"autoplay failed: ",n),e.player.unmute())})).catch((function(){e.player.unmute()})))})),this.player.getPlayerControl("SettingsControl")&&this.pluginOptions.showInSettingsMenu&&(this.pluginLabel="T\u1ef1 \u0111\u1ed9ng ph\xe1t",this.autoPlayChecked=!!this.options.autoPlay,this.updateSettingsControl())}else this.disable()}},{key:"_toggleAutoPlay",value:function(e){e.stopPropagation(),this.autoPlayChecked=!this.autoPlayChecked,this.updateSettingsControl(!0)}},{key:"updateSettingsControl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"asyncRegisterMenuItem":"registerMenuItem",t=this.player.getPlayerControl("SettingsControl");t&&t.settingsMenu[e]({pluginKey:this.name,type:Ni.MENU_TYPE.TOGGLE,config:{title:this.pluginLabel,checked:this.autoPlayChecked,clickCallback:this._toggleAutoPlay.bind(this)},order:0,callback:this.registerMenuCallback.bind(this)})}},{key:"destroy",value:function(){Ps(Os(t.prototype),"destroy",this).call(this),this.boxUnmute&&this.boxUnmute.remove()}},{key:"name",get:function(){return"AutoPlayPlugin"}},{key:"defaultOptions",get:function(){return{showInSettingsMenu:!1,timeout:1e3,showBoxUnmute:!0,boxUnmute:{message:"Nh\u1ea5n \u0111\u1ec3 b\u1eadt ti\u1ebfng"}}}}])&&Ss(r.prototype,n),i&&Ss(r,i),t}();function Rs(e,t){if(Y.array(e)&&t){var r=Rt(e.filter((function(e){return!e.disabled})),"label",t);if(Y.object(r)&&(r.source||r.level))return r}}function Ds(e){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Is(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ms(e){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function js(e,t,r){return t&&xs(e.prototype,t),r&&xs(e,r),e}function Bs(e,t){return(Bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ns=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==Ds(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ms(t).call(this,e))).pluginLabel="Ch\u1ea5t l\u01b0\u1ee3ng",r.currentSourceLevel=null,r.autoEnabled=!0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bs(e,t)}(t,je),js(t,[{key:"name",get:function(){return"QualityPlugin"}},{key:"defaultOptions",get:function(){return{autoText:"Auto",autoTextItem:"Auto"}}}]),js(t,[{key:"registerMenuCallback",value:function(e){this.menuItemEl=e}},{key:"render",value:function(){if(this.player.isHlsPlayback())return this.listenTo(this.player,z.PLAYER_LEVELS_AVAILABEL,this.onPlayerLevelsAvailabel),void this.listenTo(this.player,z.PLAYER_LEVEL_SWITCHED,this.onPlayerLevelSwitched);if(this.autoEnabled=!1,this.levels=this.player.options.sources||[],this.handleDisplayName(),this.currentSourceLevel=void 0!==this.player.options.currentSourceLevel?this.findIndexFromSourceLevels(this.player.options.currentSourceLevel):0,this.levels.length<2||-1===this.currentSourceLevel)this.disable();else{this.levels=this.orderLevelsByIndex(this.levels),this.handleDisplayName();var e=this.levels[this.currentSourceLevel];this.settingBadgeLabel=this._generateHdLabel(e.label),this.updateSettingsControl()}}},{key:"updateSettingsControl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"asyncRegisterMenuItem":"registerMenuItem",t=this.player.mediaControl.getControl("SettingsControl");t&&(t.settingsButton.updateBadgeLabel(this.settingBadgeLabel),t.settingsMenu[e]({pluginKey:this.name,type:Ni.MENU_TYPE.EXPAND,config:{title:this.pluginLabel,activeItemIndex:this.currentSourceLevel,clickCallback:this.handleExpandQuality.bind(this),subMenu:{type:Ni.LIST_MENU_TYPE.CHECKLIST,clickCallback:this.handleQualitySelected.bind(this),titleClickCallback:this.titleClickCallback.bind(this),data:this.levels}},order:0,callback:this.registerMenuCallback.bind(this)}))}},{key:"handleDisplayName",value:function(){var e=this.pluginOptions,t=e.displayName,r=e.autoTextItem;(t||r)&&this.levels.map((function(e){if(t&&e.label){var n=t[e.label];n&&(e.displayName=n)}return"auto"==e.label.toLowerCase()&&(e.label=r),e}))}},{key:"orderLevelsByIndex",value:function(e){return Ct(e,"index",!1)}},{key:"onPlayerLevelsAvailabel",value:function(e){var t=this.player.options.sources||[];this.levels=this.orderLevelsByIndex([].concat(Is(e),Is(t))),this.handleDisplayName();var r=Rs(this.levels,this.player.options.quality);r&&(this.player.options.currentSourceLevel=r.index,this.settingBadgeLabel=this._generateHdLabel(r.label),this.offAuto=!0),this.currentSourceLevel=void 0!==this.player.options.currentSourceLevel?this.findIndexFromSourceLevels(this.player.options.currentSourceLevel):this.findIndexFromSourceLevels(-1);var n=this.levels[this.currentSourceLevel];n&&-1!==n.index&&this.handleHLSLevelSelect(n)}},{key:"findIndexFromSourceLevels",value:function(e){return It(this.levels,"index",e)}},{key:"_generateHdLabel",value:function(e){var t=parseInt(e);return this.currentLabel=e,t>=720?"HD":""}},{key:"onPlayerLevelSwitched",value:function(e){var t=e.label;this.currentSwitchedLabel=t,clearTimeout(this.playerLevelSwitchedTimeout),!this.offAuto&&(this.settingBadgeLabel=this._generateHdLabel(t)),this.updateSettingsControl(!0);var r=te()(this.menuItemEl).find(".--z--zpl-has-expand span"),n=this.pluginOptions.autoText;this.autoEnabled&&(r.empty(),r.text(n+" "+this.transformDisplayNameLabel(t)))}},{key:"titleClickCallback",value:function(){var e=te()(this.menuItemEl).find(".--z--zpl-has-expand span"),t=this.pluginOptions.autoText;this.autoEnabled&&(e.empty(),e.text(t+" "+this.transformDisplayNameLabel(this.currentLabel)))}},{key:"transformDisplayNameLabel",value:function(e){var t=this.pluginOptions.displayName;return t&&t[e]||e}},{key:"handleQualitySelected",value:function(e,t){e.stopPropagation();var r=t.data;if(this.player.trigger(z.PLAYER_QUALITY_LEVELS_SELECTED,r,t),this.player.trigger(z.PLAYER_SETTINGS_MENU_HIDE),r&&!r.disabled){var n=this.findIndexFromSourceLevels(r.index);if(this.currentSourceLevel===n)return!1;this.player.storage.set({quality:r.label}),this.player.isHlsPlayback()?this.handleHLSLevelSelect(r):this.handleMP4QualitySelect(r)}}},{key:"handleMP4QualitySelect",value:function(e){var t=this.player.getCurrentTime(),r=this.player.isPlaying();this.player.stop(),this.player.setupSource(e.source),this.player.setPreload("metadata"),r&&this.listenToOnce(this.player,z.PLAYER_SEEKED,this.onPlayerSeeked),this.player.seek(t),this.currentSourceLevel=this.findIndexFromSourceLevels(e.index),this.settingBadgeLabel=this._generateHdLabel(e.label),this.autoEnabled=!1,this.updateSettingsControl(!0)}},{key:"onPlayerSeeked",value:function(){this.player.play()}},{key:"handleHLSLevelSelect",value:function(e){var t=this,r=e.index,n=-1===r;n&&(this.offAuto=!1),this.currentSourceLevel=this.findIndexFromSourceLevels(r),this.autoEnabled=n,this.player.setCurrentLevel(r),this.player.setStartLevel(r),this.playerLevelSwitchedTimeout=setTimeout((function(){t.onPlayerLevelSwitched({label:t.currentSwitchedLabel})}),1e3)}},{key:"handleExpandQuality",value:function(e){e.stopPropagation()}}]),t}();function Fs(e){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ys(e,t){return!t||"object"!==Fs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gs(e){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r(60);var Hs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ys(this,Gs(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(t,je),r=t,(n=[{key:"setUp",value:function(){this.pluginOptions.disabled&&this.disable()}},{key:"dvrChanged",value:function(){b.info(this.name,"dvrChanged"),this.addDvrToMediaControls()}},{key:"addDvrToMediaControls",value:function(){if(this.player.isLive()){var e=ge("button",{innerHTML:'<span class="icon-live"></span><span class="text">LIVE</span>'},{class:"--z--control --z--btn --z--drv-icon"});this.$el.append(e),this.player.mediaControl.leftElement.append(this.el)}}},{key:"name",get:function(){return"DVRControlsPlugin"}},{key:"attributes",get:function(){return{class:"--z--control --z--control-dvr","data-dvr-controls":""}}},{key:"listenEvents",get:function(){return[{once:!0,name:z.PLAYER_DVRSTATECHANGED,handler:this.dvrChanged}]}}])&&Us(r.prototype,n),t}();function Qs(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ks=function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playbackPlugins=[$t,Ht,Lt,or],this.plugins=[],r&&this.plugins.push(Ao);var n=[To,ss,ds,za,Da,Cs,Do,ha,_a,ts,Hs,Ns];if(this.plugins=[].concat(Qs(this.plugins),n),this.plugins.push(aa),!Y.empty(t)){var i=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;Y.function(u)&&this.plugins.push(u)}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}};function Ws(e){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xs(e,t){return!t||"object"!==Ws(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Js(e){return(Js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zs(e,t){return(Zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}window.on=document.on=Element.prototype.on=function(e,t,r){this.namespaces||(this.namespaces={}),this.namespaces[e]=t;var n=r||!1;return this.addEventListener(e.split(".")[0],t,n),this},window.off=document.off=Element.prototype.off=function(e){return this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e],this};var $s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xs(this,Js(t).apply(this,arguments))}var r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zs(e,t)}(t,je),r=t,(n=[{key:"getControl",value:function(){return null}},{key:"show",value:function(){}},{key:"hide",value:function(){}}])&&qs(r.prototype,n),t}();function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tl(e,t,r){return(tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rl(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function rl(e){return(rl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function il(e,t,r){return t&&nl(e.prototype,t),r&&nl(e,r),e}function ol(e,t){return(ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function al(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var sl={mute:!1,loop:!1,autoPlay:!1,volume:100,height:360,width:640,preload:"metadata",dblClickToFullScreen:!0,lockRotateFullscreen:!1,setStorageTheaterMode:!0},ll=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,i=e.storageKey,o=new $o(void 0===i?"zplayer":i);return(r=!(n=rl(t).call(this,null,Q({},sl,e,o.get())))||"object"!==el(n)&&"function"!=typeof n?al(this):n)._extendsOptions(r.options),b.debug(r.name,"player initialized with option:",e),r.storage=o,r.plugins=[],r._onFullScreenChanged=r._onFullScreenChanged.bind(al(al(r))),r.onWindowBlur=r.onWindowBlur.bind(al(al(r))),r._onOrientationChanged=r._onOrientationChanged.bind(al(al(r))),r.isMenuOpen=!1,r.theaterMode=!!r.options.theaterMode,r.toggleClass("--theater-mode",r.theaterMode),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ol(e,t)}(t,Ce),il(t,[{key:"name",get:function(){return"Player"}},{key:"attributes",get:function(){var e=this.options,t=e.width,r=e.height;return{class:e.className||"--z--player","data-player":"",tabindex:1,style:"\n                width: ".concat(t&&Y.number(t)?t+"px":t,";\n                height: ").concat(r&&Y.number(r)?r+"px":r,"\n            ")}}},{key:"events",get:function(){return{click:"onClicked",dblclick:"onDblClicked",contextmenu:"onContextMenu",keydown:"onKeydown",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchstart:"onMouseMove",touchleave:"onMouseLeave"}}},{key:"listenEvents",get:function(){return[{name:z.PLAYBACK_BUFFERING,handler:this.onBuffering},{name:z.PLAYBACK_BUFFERING_CHANGE,handler:this.onBufferingChange},{name:z.PLAYBACK_BUFFERFULL,handler:this.onBufferfull},{name:z.PLAYBACK_LOADEDMETADATA,handler:this.onLoadedMetadata},{name:z.PLAYBACK_TIMEUPDATE,handler:this.onTimeUpdated},{name:z.PLAYBACK_PROGRESS,handler:this.onProgress},{name:z.PLAYBACK_SEEKED,handler:this.onSeeked},{name:z.PLAYBACK_SEEKING,handler:this.onSeeking},{name:z.PLAYBACK_ENDED,handler:this.onEnded},{name:z.PLAYBACK_PLAY,handler:this.onPlay},{name:z.PLAYBACK_PAUSE,handler:this.onPaused},{name:z.PLAYBACK_STOP,handler:this.onStopped},{name:z.PLAYBACK_ERROR,handler:this.onError},{name:z.PLAYBACK_VOLUMEUPDATE,handler:this.onVolumeUpdated},{name:z.PLAYBACK_LEVELS_AVAILABLE,handler:this.onLevelsAvailabel},{name:z.PLAYBACK_LEVEL_SWITCHED,handler:this.onLevelSwitched},{name:z.PLAYBACK_FULLSCREEN_IOS,handler:this._onFullScreenIosChanged},{name:z.PLAYBACK_CANPLAYTHROUGH,handler:this.onCanPlayThrough},{name:z.PLAYBACK_WAITING,handler:this.onWaiting},{once:!0,name:z.PLAYBACK_DVRSTATECHANGED,handler:this.onDrvChanged},{once:!0,name:z.PLAYBACK_PLAY,handler:this.onDrvChanged}]}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"loader",set:function(e){this.loader=e},get:function(){return this._loader||(this._loader=new Ks(this.options.plugins,this.options.useDefaultControl)),this._loader}},{key:"mediaControl",get:function(){return this.getPlugin("ControlsPlugin")||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new $s(this)),this._dummyMediaControl}}]),il(t,[{key:"bindEvents",value:function(){tl(rl(t.prototype),"bindEvents",this).call(this,this.playback),this._addEventsFullScreen(),window.on("orientationchange",this._onOrientationChanged,!1),window.on("blur",this.onWindowBlur,!1)}},{key:"unbindEvents",value:function(){tl(rl(t.prototype),"unbindEvents",this).call(this,this.playback),this._removeEventsFullScreen(),window.off("orientationchange",this._onOrientationChanged,!1),window.off("blur",this.onWindowBlur,!1)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.find((function(t){return t.name===e}))}},{key:"removePlugin",value:function(e){this.plugins=this.plugins.filter((function(t){return t.name!==e}))}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"getPlaybackName",value:function(){return this.playback.name}},{key:"appendToParent",value:function(){if(!this.el)return null;this.options.parentElement.appendChild(this.el)}},{key:"render",value:function(){if(!this.el)return null;this.$el.append(this.playback.render().el)}},{key:"destroy",value:function(){this.plugins.forEach((function(e){return e.destroy()})),this.playback.destroy(),this.unbindEvents(),this.remove()}},{key:"attachTo",value:function(e){var t=this;this.options.parentElement=e,this._initPlayback(),this.bindEvents(),this.render(),this._initPlugins(),this.appendToParent(),this.playback.isReady().then((function(){return t._initConfig()})).then((function(){return Promise.all(t.plugins.map((function(e){return e.initialize()})))})).then((function(){b.info(t.name,"IS LIVE",t.isLive()),t.trigger(z.PLAYER_READY,t.name)})).catch((function(e){b.error(t.name,"error while initializing player:",e)})),this.setPlayerFontSizeBase()}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"play",value:function(){this.isPlaying()||(this.trigger(z.PLAYER_PLAY_INTENT),this.playback.play())}},{key:"pause",value:function(){this.isPlaying()&&this.playback.pause()}},{key:"togglePlay",value:function(){this.buffering||(this.isPlaying()?this.pause():this.play())}},{key:"stop",value:function(){this.playback.stop()}},{key:"pauseAd",value:function(){this.trigger(z.PLAYER_AD_PAUSE_REQUEST)}},{key:"resumeAd",value:function(){this.trigger(z.PLAYER_AD_RESUME_REQUEST)}},{key:"getVolume",value:function(){return this.playback.getVolume()}},{key:"setVolume",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Y.number(e)||e<0||e>100)b.debug(this.name,"setVolume fail , volume = ",e);else{var r=this.getVolume();this.playback.volume(e),t&&this.storage.set({volume:e,beforeMuteVolume:r})}}},{key:"mute",value:function(e){return this.setVolume(0,e),this}},{key:"unmute",value:function(e){var t=this.storage.get("beforeMuteVolume");return(!Y.number(t)||t<=0)&&(t=1),this.setVolume(100*t,e),this}},{key:"isMuted",value:function(){return this.playback.isMuted()}},{key:"seek",value:function(e){this.isLive()||e<0||e>this.getDuration()||(this.trigger(z.PLAYER_SEEK,e,this.name),this.playback.seek(e))}},{key:"isFullscreen",value:function(){return _i.isFullscreen()}},{key:"isTheaterMode",value:function(){return this.theaterMode}},{key:"setupSource",value:function(e){this.playback.setupSource(e)}},{key:"getSource",value:function(){this.playback.getSource()}},{key:"setCurrentLevel",value:function(e){this.playback.currentLevel=e}},{key:"setStartLevel",value:function(e){this.playback.startLevel=e}},{key:"setPreload",value:function(e){this.playback.setPreload(e)}},{key:"getPlayerControl",value:function(e){return this.mediaControl&&this.mediaControl.getControl(e)}},{key:"setPlaybackRate",value:function(e){this.playback.setPlaybackRate(e)}},{key:"isHlsPlayback",value:function(){return this.playback.isHlsPlayback()}},{key:"isMp4Playback",value:function(){return!this.isHlsPlayback()}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var r=t*(e/100);this.seek(r)}}},{key:"setPlayerFontSizeBase",value:function(){ft&&le(this.el,{fontSize:(this.isFullscreen()?70:60)+"%"})}},{key:"toggleFullscreen",value:function(){var e=this.options,t=e.customIosFullscreen;e.lockRotateFullscreen&&(this.isLandscapeScreen()?et&&this.removeClass("is-portrait"):(et&&this.addClass("--z--orient-lock-fullscreen"),et&&this.addClass("is-portrait"),setTimeout((function(){screen&&screen.orientation.lock("landscape")}),300)),this.isFullscreen()&&(et&&this.removeClass("--z--orient-lock-fullscreen"),et&&this.removeClass("is-portrait"),setTimeout((function(){return screen&&screen.orientation.unlock()}),300))),t?this._toggleFullScreenIos():this._toggleFullScreenNative()}},{key:"isLandscapeScreen",value:function(){return window.innerWidth>window.innerHeight}},{key:"getPlayBack",value:function(){return function(e,t,r){var n=null,i=r.mimeType;Y.object(t)?(n=t.source.toString(),t.mimeType&&(i=t.mimeType)):n=t.toString(),n.match(/^\/\//)&&(n=window.location.protocol+n);var o=Q({},r,{src:n,mimeType:i}),a=e.filter((function(e){return e.canPlay(t,i)}))[0];return"no_op"===a.name&&r.fallbackSrc&&(a=e.filter((function(e){return e.canPlay(r.fallbackSrc,i)}))[0]),new a(o)}(this.loader.playbackPlugins,this.options.source,this.options)}},{key:"isLive",value:function(){return this.getPlaybackType()===Ke.LIVE}},{key:"getCurrentTime",value:function(){return this.playback.el.currentTime}},{key:"getPlayerSize",value:function(){return{width:this.el.offsetWidth,height:this.el.offsetHeight}}},{key:"updateSize",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px",n={};e&&(n.width=e+r),t&&(n.height=t+r),le(this.el,n),this.trigger(z.PLAYER_UPDATE_SIZE,this.el.offsetWidth,this.el.offsetHeight,this.isFullscreen())}},{key:"onClicked",value:function(){b.debug(this.name,"onClicked"),this.trigger(z.PLAYER_CLICK,this,this.name)}},{key:"onDblClicked",value:function(){this.trigger(z.PLAYER_DBLCLICK,this,this.name)}},{key:"onKeydown",value:function(e){this.trigger(z.PLAYER_KEYDOWN,e,this.name)}},{key:"onMouseEnter",value:function(){this.trigger(z.PLAYER_MOUSE_ENTER)}},{key:"onMouseLeave",value:function(){this.trigger(z.PLAYER_MOUSE_LEAVE)}},{key:"onMouseMove",value:function(){this.trigger(z.PLAYER_MOUSE_MOVE)}},{key:"onContextMenu",value:function(e){this.trigger(z.PLAYER_CONTEXTMENU,e,this.name)}},{key:"onBuffering",value:function(){this.trigger(z.PLAYER_BUFFERING,this.name)}},{key:"onBufferingChange",value:function(e){this.trigger(z.PLAYER_BUFFERING_CHANGE,e)}},{key:"onBufferfull",value:function(){this.trigger(z.PLAYER_BUFFERFULL,this.name)}},{key:"onLoadedMetadata",value:function(e){this.trigger(z.PLAYER_LOADEDMETADATA,e)}},{key:"onTimeUpdated",value:function(e){this.currentTime=e.current,this.trigger(z.PLAYER_TIMEUPDATE,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(z.PLAYER_SEEKED,this.name)}},{key:"onSeeking",value:function(e){this.currentTime=e.data.target.currentTime,this.trigger(z.PLAYER_SEEKING,e)}},{key:"onWaiting",value:function(e){this.trigger(z.PLAYER_WAITING,e)}},{key:"onPlay",value:function(){b.debug(this.name,"PLAYER_PLAY"),this.trigger(z.PLAYER_PLAY,this.name)}},{key:"onPaused",value:function(){b.debug(this.name,"PLAYER_PAUSE"),this.trigger(z.PLAYER_PAUSE,this.name)}},{key:"onError",value:function(e){b.error(this.name,"player error:",e),this.trigger(z.PLAYER_ERROR,e,this.name)}},{key:"onStopped",value:function(){this.trigger(z.PLAYER_STOP)}},{key:"onEnded",value:function(){this.trigger(z.PLAYER_ENDED,this.name),this.currentTime=0}},{key:"onVolumeUpdated",value:function(e){this.trigger(z.PLAYER_VOLUMEUPDATE,e)}},{key:"onLevelsAvailabel",value:function(e){this.trigger(z.PLAYER_LEVELS_AVAILABEL,e)}},{key:"onLevelSwitched",value:function(e){this.trigger(z.PLAYER_LEVEL_SWITCHED,e)}},{key:"onCanPlayThrough",value:function(e){this.trigger(z.PLAYER_CANPLAYTHROUGH,e)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.trigger.apply(this,[z.PLAYER_PROGRESS].concat(t,[this.name]))}},{key:"onDrvChanged",value:function(){this.trigger(z.PLAYER_DVRSTATECHANGED)}},{key:"onWindowBlur",value:function(){ft&&this.pause()}},{key:"_addEventsFullScreen",value:function(){document.on("webkitfullscreenchange",this._onFullScreenChanged,!1),document.on("mozfullscreenchange",this._onFullScreenChanged,!1),document.on("fullscreenchange",this._onFullScreenChanged,!1),document.on("MSFullscreenChange",this._onFullScreenChanged,!1)}},{key:"_removeEventsFullScreen",value:function(){document.off("webkitfullscreenchange",this._onFullScreenChanged,!1),document.off("mozfullscreenchange",this._onFullScreenChanged,!1),document.off("fullscreenchange",this._onFullScreenChanged,!1),document.off("MSFullscreenChange",this._onFullScreenChanged,!1)}},{key:"_onFullScreenIosChanged",value:function(e){b.debug(this.name,"fullscreen status changed on iOS:",e),_i.isFullscreenIos=e,this._onFullScreenChanged()}},{key:"_onFullScreenChanged",value:function(){b.debug(this.name,"fullscreen status changed:",this.isFullscreen()),this.isFullscreen()?this.$el.addClass("--z--full-screen"):this.$el.removeClass("--z--full-screen"),this.setPlayerFontSizeBase(),this.trigger(z.PLAYER_FULLSCREEN,this.isFullscreen(),this.name)}},{key:"_onOrientationChanged",value:function(){var e=this,t=this.options,r=t.customIosFullscreen,n=t.lockRotateFullscreen;this.setPlayerFontSizeBase(),r&&this.isFullscreen()&&this.backdropEl&&le(this.backdropEl,{height:window.innerHeight+"px"}),n&&this.isFullscreen()&&et&&setTimeout((function(){e.isLandscapeScreen()?(e.removeClass("--z--orient-lock-fullscreen"),e.removeClass("is-portrait")):(e.addClass("is-portrait"),e.addClass("--z--orient-lock-fullscreen"))}),300),this.trigger(z.PLAYER_ORIENTATION_CHANGE,this.isFullscreen())}},{key:"_initPlayback",value:function(){this.playback=this.getPlayBack(),b.debug(this.name,"found playback",this.getPlaybackName()),b.debug(this.name,"found playbacktype",this.getPlaybackType())}},{key:"_initConfig",value:function(){var e=this.options.mute?0:this.options.volume;this.setVolume(e)}},{key:"_initPlugins",value:function(){var e=this;Y.empty(this.loader.plugins)||this.loader.plugins.forEach((function(t){e.plugins.push(new t(e))}))}},{key:"_extendsOptions",value:function(e){var t=Rs(e.sources,e.quality);t&&(e.source=t.source,e.currentSourceLevel=t.index),e.customIosFullscreen=!!et}},{key:"_onTouchMove",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"_toggleFullScreenIos",value:function(){this.backdropEl=this.backdropEl||ge("div",{},{class:"--z--player-backdrop"}),this.isFullscreen()?(this.removeClass("--z--custom-ios-fullscreen"),this.options.parentElement.append(this.el),this.backdropEl.innerHTML="",ae(this.backdropEl,"--z--show"),_i.isFullscreenIos=!1,this.scrollTopPos&&window.scrollTo(0,this.scrollTopPos)):(this.scrollTopPos=this.scrollTopPos||window.scrollY,window.scrollTo(0,0),this.addClass("--z--custom-ios-fullscreen"),le(this.backdropEl,{height:window.innerHeight+"px"}),this.backdropEl.append(this.el),document.body.append(this.backdropEl),ae(this.backdropEl,"--z--show"),_i.isFullscreenIos=!0),this.setPlayerFontSizeBase(),this.trigger(z.PLAYER_FULLSCREEN,this.isFullscreen())}},{key:"_toggleFullScreenNative",value:function(){this.isFullscreen()?_i.cancelFullscreen():_i.requestFullscreen(this.el)}},{key:"toggleTheaterMode",value:function(){this.theaterMode=!this.theaterMode,this.toggleClass("--theater-mode",this.theaterMode),this.options.setStorageTheaterMode&&this.storage.set({theaterMode:this.theaterMode}),this.trigger(z.PLAYER_THEATER_MODE_CHANGE,this.theaterMode)}},{key:"mediaControlReady",value:function(){b.debug(this.name,"mediaControlReady"),this.trigger(z.PLAYER_MEDIACONTROL_READY,this.name)}},{key:"disableMediaControl",value:function(){this.trigger(z.PLAYER_MEDIACONTROL_DISABLE,this.name)}},{key:"enableMediaControl",value:function(){this.trigger(z.PLAYER_MEDIACONTROL_ENABLE,this.name)}},{key:"showMediaControl",value:function(){this.trigger(z.PLAYER_MEDIACONTROL_SHOW,this.name)}},{key:"hideMediaControl",value:function(){this.trigger(z.PLAYER_MEDIACONTROL_HIDE,this.name)}}]),t}();function ul(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,r=arguments.length>2?arguments[2]:void 0;e.style.opacity||(e.style.opacity=1);var n=null;window.requestAnimationFrame((function i(o){var a=o-(n=n||o),s=parseFloat(1-a/t,2);e.style.opacity=s<0?0:s,a>t?Y.function(r)&&r():window.requestAnimationFrame(i)}))}function cl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,r=arguments.length>2?arguments[2]:void 0;e.style.opacity||(e.style.opacity=0);var n=null;window.requestAnimationFrame((function i(o){var a=o-(n=n||o),s=parseFloat(a/t,2);e.style.opacity=s>1?1:s,a>t?Y.function(r)&&r():window.requestAnimationFrame(i)}))}r.d(t,"AdRunner",(function(){return pl})),r.d(t,"Constant",(function(){return fl})),r.d(t,"PromiseUtils",(function(){return a})),r.d(t,"AdUtils",(function(){return c})),r.d(t,"AnimationUtils",(function(){return f})),r.d(t,"ArraysUtils",(function(){return s})),r.d(t,"BaseObject",(function(){return D})),r.d(t,"BasePlugin",(function(){return $})),r.d(t,"BrowserUtils",(function(){return o})),r.d(t,"DomUtils",(function(){return i})),r.d(t,"Events",(function(){return z})),r.d(t,"HttpUtils",(function(){return p})),r.d(t,"IsUtils",(function(){return Y})),r.d(t,"Log",(function(){return b})),r.d(t,"ObjectUtils",(function(){return n})),r.d(t,"Player",(function(){return ll})),r.d(t,"Storage",(function(){return $o})),r.d(t,"StringsUtils",(function(){return u})),r.d(t,"TimeUtils",(function(){return l})),r.d(t,"UIObject",(function(){return Ce})),r.d(t,"UIPlugin",(function(){return je}));var pl=null;pl=r(6);var fl={MediaControlConst:{BG_TYPE_TRANSPARENT:"transparent",BG_TYPE_GRADIENT:"gradient",THEME:{RED:"red",BLUE:"blue",PURPLE:"purple",GREEN:"green",LIGHT_BLUE:"light_blue"},MAP_THEME_COLOR:{RED:"#f00",BLUE:"#2FA1B3",PURPLE:"#721799",GREEN:"#6cd936",LIGHT_BLUE:"#2196F3"}},SettingsMenuConst:Ni};b.setLevel(b.LEVEL_DISABLED)}])}}]);