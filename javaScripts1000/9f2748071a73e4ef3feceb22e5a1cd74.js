!function(e){var t=function(e){this.initialized=!0,this.images=[],this.awakeImages=[],this.asleepImages=[],this.viewportHeight=window.innerHeight||document.documentElement.clientHeight},i=function(){if(!window.FlickrEmbedr||!window.FlickrEmbedr.initialized){var e=window.FlickrEmbedr?window.FlickrEmbedr.q:[];window.FlickrEmbedr=new t,window.FlickrEmbedr._parseGlobalDisplayOptions(),window.addEventListener("message",function(e){window.FlickrEmbedr.handlePostMessage(e)},!1),e&&e.length>0&&(e.indexOf("all")>-1?window.FlickrEmbedr.process("all"):e.indexOf("inline")>-1&&window.FlickrEmbedr.process("inline")),window.FlickrEmbedr._scanForChanges(),window.addEventListener("scroll",a(function(){window.FlickrEmbedr._handleScroll()},250)),window.addEventListener("resize",a(function(){window.FlickrEmbedr.viewportHeight=window.innerHeight||document.documentElement.clientHeight},250))}},r=function(e){try{e=parseInt((e+"").replace("px",""),10)}catch(t){}return e},o=function(e,t,i){var o=t;return(!t||r(o)<1)&&(o=r(e.width),r(o)<1&&(o=r(e.style.width),r(o)<1&&(o=r(getComputedStyle(e,null).getPropertyValue(i))))),o},a=function(e,t,i){var r;return function(){var o=this,a=arguments,n=function(){r=null,i||e.apply(o,a)},s=i&&!r;clearTimeout(r),r=setTimeout(n,t),s&&e.apply(o,a)}},n=function(e){var t=e.node.getBoundingClientRect(),i=2*window.FlickrEmbedr.viewportHeight;return t.top>=0-i&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)+i};getDevicePixelRatio=function(){var e=1;return void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?e=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(e=window.devicePixelRatio),e},getSizeToFit=function(e,t,i){function r(e){return e.source.indexOf(".jpg")>-1}var o,i={},a=parseInt(t.width,10),n=parseInt(t.height,10),s=getDevicePixelRatio(),l=a*s,c=n*s,d=e,h=i.excludeSizes||["o"],p=!1,g=!1,m={};return d.filter(r).forEach(function(e){var t,i=e.key||e.url.match(/\/sizes\/([a-z0-9]+)\/$/)[1];e&&-1===h.indexOf(i)&&((e.width>=l||e.height>=c)&&(t=!0),t&&(p?e.height<p.height&&e.width<p.width&&(p=e):p=e),g?(e.width>g.width||e.height>g.height)&&(g=e):g=e),o=p||g}),m.width=a,m.height=o.height*(a/o.width),{displayUrl:o.source,fittedWidth:Math.round(m.width),fittedHeight:Math.round(m.height)}},getPhotoForDisplay=function(e){var t,i,r=e.contentDocument.querySelector(".flickr-embed-photo").getBoundingClientRect(),o=getPixelRatio(),a=this.get("photo").getSizeToFit(r,options);return t=Math.min(r.height/o,a.height),i=Math.min(r.width/o,a.width/a.height*t),t=Math.min(t,a.height/a.width*i),{width:Math.round(i),height:Math.round(t),url:a.url,pixelRatio:a.width/i}},displayOptions=["header","footer","comment-count","fave-count","branding","truncate","letterbox","context","lang","sharing","vr","gp"],supportedTypes=['a[href*="flickr.com"][data-flickr-embed="true"] img','img[src^="https://farm"][src*="flickr.com"][src$=".jpg"]','img[src^="https://farm"][src*="flickr.com"][src$=".jpg?zz=1"]','img[src^="http://farm"][src*="flickr.com"][src$=".jpg"]','img[src^="http://farm"][src*="flickr.com"][src$=".jpg?zz=1"]','img[src^="//farm"][src*="flickr.com"][src$=".jpg"]','img[src^="//farm"][src*="flickr.com"][src$=".jpg?zz=1"]','img[src^="https://c"][src*="flickr.com"][src$=".jpg"]','img[src^="https://c"][src*="flickr.com"][src$=".jpg?zz=1"]','img[src^="http://c"][src*="flickr.com"][src$=".jpg"]','img[src^="http://c"][src*="flickr.com"][src$=".jpg?zz=1"]','img[src^="//c"][src*="flickr.com"][src$=".jpg"]','img[src^="//c"][src*="flickr.com"][src$=".jpg?zz=1"]'],t.prototype.process=function(e){this.detectImages(e),this.processImages()},t.prototype.handlePostMessage=function(e){e.data&&e.data.name&&("update:height"===e.data.name?e.source.frameElement.style.height=e.data.height:"update:resize"===e.data.name&&this.handleImageResize(e.source,e.data))},t.prototype.handleImageResize=function(e,t){var i=getSizeToFit.call(this,t.size.sizes,t.size),r=e.document.querySelector('a[data-is-current-slide="true"] img'),o=e.document.querySelector("video"),a=e.document.querySelector(".flickr-embed-photo");o||(r||(r=e.document.querySelector("a.slide img")),r.style.width=parseInt(i.fittedWidth,10)+"px",r.style.height=parseInt(i.fittedHeight,10)+"px",a.style.width=i.fittedWidth+"px",a.style.height=i.fittedHeight+"px",e.frameElement.style.height=e.document.body.clientHeight,r.src!==i.displayUrl&&(r.src=i.displayUrl))},t.prototype.detectImages=function(e){var t;"inline"===e?t=Array.prototype.slice.call(document.querySelectorAll('[data-flickr-embed="true"] img')):"all"===e&&(t=Array.prototype.slice.call(document.querySelectorAll(supportedTypes)));for(var i=0,r=t.length;r>i;i++)-1===this.images.indexOf(t[i])&&(this.images.push(t[i]),t[i]={node:t[i],processed:!1},n(t[i])?this.awakeImages.push(t[i]):this.asleepImages.push(t[i]))},t.prototype.processImages=function(){function e(e){this.awakeImages[e]&&!this.awakeImages[e].processed&&(this.parseImage(this.awakeImages[e].node),this.awakeImages[e].processed=!0)}for(var t=0;t<this.awakeImages.length;t++)this.awakeImages[t].node&&this.awakeImages[t].node.naturalWidth>0&&this.awakeImages[t].node.naturalHeight>0?this.awakeImages[t]&&!this.awakeImages[t].processed&&(this.parseImage(this.awakeImages[t].node),this.awakeImages[t].processed=!0):this.awakeImages[t].node.addEventListener("load",e.bind(this,t),!1)},t.prototype.parseImage=function(e){if(e&&e.tagName&&"img"===e.tagName.toLowerCase()){var t,i,r,a,n,s,l,c=/(flickr.com|flic.kr)\/(photos|p)\/([0-9a-zA-Z-_]+|[0-9]+@N[0-9]+)\/([0-9]+)\/?(in)?\/?([^\/]+)?/,d=/(flickr.com|flic.kr)\/gp\/([0-9a-zA-Z-_]+|[0-9]+@N[0-9]+)\/([a-zA-Z0-9]+)\/?/,h=/(flickr.com|flic.kr)\/(photos|p)\/([0-9a-zA-Z-_]+|[0-9]+@N[0-9]+)\/(sets|albums)\/([0-9]+)\/?(in)?\/?([^\/]+)?/,p=/(flickr.com|flic.kr)\/(photos|p)\/([0-9a-zA-Z-_]+|[0-9]+@N[0-9]+)\/galleries\/([0-9]+)\/?/,g=/(\d+)_([a-zA-Z0-9]+)_?[a-z0-9]{0,2}\.jpg(\?zz=1)*$/,m=/(flickr.com|flic.kr)\/(photos|ps)\/([0-9]+@N[0-9]+)\/?/,u=/(flickr.com|flic.kr)\/(photos|f)\/([0-9a-zA-Z-_]+|[0-9]+@N[0-9]+)\/(favorites)\/?/,f=/flickr.com\/groups\/([0-9a-zA-Z-_]+|[0-9]+@N[0-9]+)\/pool\/?/,w=/flickr.com\/explore\/?([0-9]{4}\/[0-9]{2}\/[0-9]{2}\/?)?/,y=/flickr.com\/search\/?\?(.+)/,I=null;if(s=e.width,n=e.height,!(e.width<=150))if("a"===e.parentNode.nodeName.toLowerCase()&&""!==e.parentNode.href&&"#"!==e.parentNode.href?(i=e.parentNode.href.match(c),r=e.parentNode.href.match(h),galleryInfo=e.parentNode.href.match(p),gpInfo=e.parentNode.href.match(d),photostreamInfo=e.parentNode.href.match(m),favesInfo=e.parentNode.href.match(u),groupInfo=e.parentNode.href.match(f),exploreInfo=e.parentNode.href.match(w),searchInfo=e.parentNode.href.match(y),a=e.parentNode,n=o(e.parentNode,n,"height"),s=o(e.parentNode,s,"width"),l=e.src.match(g)[2],i?(t="/photos/"+i[3]+"/"+i[4],-1!==i.indexOf("in")&&(t=t+"/in/"+i[i.indexOf("in")+1],this.isSlideshow=!0)):gpInfo?(I=gpInfo[3],t="/photos/"+gpInfo[2]+"/"+e.src.match(g)[1]):r?t="/photosets/"+r[5]:galleryInfo?t="/galleries/"+galleryInfo[3]+"-"+galleryInfo[4]:favesInfo?t="/faves/"+photostreamInfo[3]:groupInfo?t="/groups/"+groupInfo[1]:photostreamInfo?t="/photostreams/"+photostreamInfo[3]:exploreInfo?t="/explore/"+(exploreInfo[1]?exploreInfo[1]:""):searchInfo&&(t="/search/")):(i=e.src.match(g),i&&(t="/photos/"+i[1],a=e,n=o(e,n,"height"),s=o(e,s,"width"),l=i[2])),e&&t&&searchInfo)this.replaceImg(e,t,a,{width:s,height:n},l,I,searchInfo[1]);else{if(!e||!t)return;this.replaceImg(e,t,a,{width:s,height:n},l,I,null)}}},t.prototype.replaceImg=function(t,i,r,o,a,n,s){var l,c,d,h=t.className?" "+t.className:"",p=new XMLHttpRequest,g=window.getComputedStyle(t,null);"A"===r.tagName?d=r.getElementsByTagName("img")[0]:"IMG"===r.tagName&&(d=r),l=document.createElement("iframe"),l.setAttribute("frameborder","0"),l.setAttribute("allowfullscreen",""),l.className="flickr-embed-frame"+h,l.setAttribute("webkitallowfullscreen",""),l.setAttribute("mozallowfullscreen",""),l.setAttribute("oallowfullscreen",""),l.setAttribute("msallowfullscreen",""),t.getAttribute("align")&&l.setAttribute("align",t.getAttribute("align")),l.style.cssText=t.style.cssText,l.style.overflow="hidden",l.style.paddingTop=g.getPropertyValue("padding-top"),l.style.paddingRight=g.getPropertyValue("padding-right"),l.style.paddingBottom=g.getPropertyValue("padding-bottom"),l.style.paddingLeft=g.getPropertyValue("padding-left"),l.style.marginTop=g.getPropertyValue("margin-top"),l.style.marginRight=g.getPropertyValue("margin-right"),l.style.marginBottom=g.getPropertyValue("margin-bottom"),l.style.marginLeft=g.getPropertyValue("margin-left"),l.width=o.width,l.height=o.height,l.setAttribute("data-natural-width",t.naturalWidth),l.setAttribute("data-natural-height",t.naturalHeight),l.style.width=l.width+"px",l.style.height=l.height+"px",l.style.maxWidth=g.getPropertyValue("max-width"),l.style.display="none",c=this._parseDisplayOptions(r),p.onreadystatechange=function(){var e,t,i=function(){l.setAttribute("data-loaded","true"),l.style.display="",l.style.height=l.contentDocument.querySelector("body").clientHeight+"px",null!==r.parentNode&&r.parentNode.removeChild(r),t?t.removeEventListener("loadstart",i):e.removeEventListener("load",i),l.contentWindow.document.close()};if(4===p.readyState){if(!r.parentNode||null===r.parentNode)return;if(r.parentNode.insertBefore(l,r),l.contentWindow.document.write(p.response),e=l.contentDocument.querySelector("img"),t=l.contentDocument.querySelector("video"),!e&&!t)return void l.parentNode.removeChild(l);t?t.addEventListener("loadstart",i):e.addEventListener("load",i)}};var m=["width="+l.width,"height="+l.height,"secret="+a];n&&m.push("gp="+n),s&&m.push(s),p.open("GET",e+i+"?"+m.join("&")+c,!0),p.setRequestHeader("X-Embedr-Referrer",window.location.href),p.send(null)},t.prototype._handleScroll=function(){for(var e=[],t=0,i=this.asleepImages.length;i>t;t++)n(this.asleepImages[t])?this.awakeImages.push(this.asleepImages[t]):e.push(this.asleepImages[t]);this.asleepImages=e,this.processImages()},t.prototype._scanForChanges=function(){var e,t={childList:!0,subtree:!0};"undefined"==typeof MutationObserver?this.scanForChanges=window.setInterval(function(){window.FlickrEmbedr.process("inline")},1e3):(e=new MutationObserver(function(e){for(var t=0,i=e.length;i>t;t++)if(e[t].addedNodes.length&&e[t].addedNodes[0].querySelector&&null!==e[t].addedNodes[0].querySelector('[data-flickr-embed="true"] img'))return void window.FlickrEmbedr.process("inline")}),e.observe(document.body,t))},t.prototype._parseGlobalDisplayOptions=function(){if(!this.globalDisplayOptions){this.globalDisplayOptions={};for(var e="flickr:embedr:",t=document.querySelectorAll('meta[name^="'+e+'"]'),i=0,r=t.length;r>i;i++)this.globalDisplayOptions[t[i].getAttribute("name").replace(e,"")]=t[i].getAttribute("content")}},t.prototype._parseDisplayOptions=function(e){for(var t,i=[],r=JSON.parse(JSON.stringify(this.globalDisplayOptions)),o=0;o<displayOptions.length;o++)t=e.getAttribute("data-"+displayOptions[o]),null!==t&&(r[displayOptions[o]]=t);for(var a in r)r.hasOwnProperty(a)&&i.push(encodeURIComponent(a)+"="+encodeURIComponent(r[a]));return"&"+i.join("&")},document.onreadystatechange=function(){"complete"===document.readyState&&i()},"complete"===document.readyState&&i()}(window.FlickrEmbedr.baseURL);