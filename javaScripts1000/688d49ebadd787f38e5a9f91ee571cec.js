!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@feature-hub/react"),require("react"));else if("function"==typeof define&&define.amd)define(["@feature-hub/react","react"],t);else{var r="object"==typeof exports?t(require("@feature-hub/react"),require("react")):t(e["@feature-hub/react"],e.react);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=92)}([function(e,t,r){"use strict";var n=r(10),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function f(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:f,merge:function e(){var t={};function r(r,n){c(t[n])&&c(r)?t[n]=e(t[n],r):c(r)?t[n]=e({},r):o(r)?t[n]=r.slice():t[n]=r}for(var n=0,i=arguments.length;n<i;n++)f(arguments[n],r);return t},extend:function(e,t,r){return f(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,r){"use strict";var n;r.r(t),r.d(t,"Lifecycle",(function(){return i})),r.d(t,"autoInjectable",(function(){return T})),r.d(t,"inject",(function(){return L})),r.d(t,"injectable",(function(){return x})),r.d(t,"registry",(function(){return R})),r.d(t,"singleton",(function(){return M})),r.d(t,"injectAll",(function(){return I})),r.d(t,"injectAllWithTransform",(function(){return U})),r.d(t,"injectWithTransform",(function(){return F})),r.d(t,"scoped",(function(){return N})),r.d(t,"instanceCachingFactory",(function(){return V})),r.d(t,"predicateAwareClassFactory",(function(){return D})),r.d(t,"isClassProvider",(function(){return d})),r.d(t,"isFactoryProvider",(function(){return h})),r.d(t,"isNormalToken",(function(){return v})),r.d(t,"isTokenProvider",(function(){return w})),r.d(t,"isValueProvider",(function(){return b})),r.d(t,"delay",(function(){return g})),r.d(t,"container",(function(){return A})),function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"}(n||(n={}));var i=n,o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function s(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}function f(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],r=Reflect.getOwnMetadata("injectionTokens",e)||{};return Object.keys(r).forEach((function(e){t[+e]=r[e]})),t}function l(e,t){return function(r,n,i){var o=Reflect.getOwnMetadata("injectionTokens",r)||{};o[i]=t?{token:e,transform:t.transformToken,transformArgs:t.args||[]}:e,Reflect.defineMetadata("injectionTokens",o,r)}}function d(e){return!!e.useClass}function h(e){return!!e.useFactory}var p=function(){function e(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct"]}return e.prototype.createProxy=function(e){var t,r=this,n=!1;return new Proxy({},this.createHandler((function(){return n||(t=e(r.wrap()),n=!0),t})))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach((function(r){t[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t[0]=e();var i=Reflect[r];return i.apply(void 0,u(t))}})),t},e}();function g(e){if(void 0===e)throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new p(e)}function v(e){return"string"==typeof e||"symbol"==typeof e}function y(e){return"object"==typeof e&&"token"in e&&"multiple"in e}function m(e){return"object"==typeof e&&"token"in e&&"transform"in e}function w(e){return!!e.useToken}function b(e){return null!=e.useValue}var _=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(_),C=function(){this.scopedResolutions=new Map};function O(e,t,r){var n,i,o=c(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1],s=function(e,t){return null===e?"at position #"+t:'"'+e.split(",")[t].trim()+'" at position #'+t}(void 0===o?null:o,t);return n="Cannot inject the dependency "+s+' of "'+e.name+'" constructor. Reason:',void 0===i&&(i="    "),u([n],r.message.split("\n").map((function(e){return i+e}))).join("\n")}var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(_),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(_),E=function(){this.preResolution=new P,this.postResolution=new j},k=new Map,A=new(function(){function e(e){this.parent=e,this._registry=new S,this.interceptors=new E}return e.prototype.register=function(e,t,r){var n;if(void 0===r&&(r={lifecycle:i.Transient}),n=function(e){return d(e)||b(e)||w(e)||h(e)}(t)?t:{useClass:t},w(n))for(var o=[e],s=n;null!=s;){var a=s.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+u(o,[a]).join(" -> "));o.push(a);var c=this._registry.get(a);s=c&&w(c.provider)?c.provider:null}if((r.lifecycle===i.Singleton||r.lifecycle==i.ContainerScoped||r.lifecycle==i.ResolutionScoped)&&(b(n)||h(n)))throw new Error('Cannot use lifecycle "'+i[r.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:n,options:r}),this},e.prototype.registerType=function(e,t){return v(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,t){if(v(e)){if(v(t))return this.register(e,{useToken:t},{lifecycle:i.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:i.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var r=e;return t&&!v(t)&&(r=t),this.register(e,{useClass:r},{lifecycle:i.Singleton})},e.prototype.resolve=function(e,t){void 0===t&&(t=new C);var r=this.getRegistration(e);if(!r&&v(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),r){var n=this.resolveRegistration(r,t);return this.executePostResolutionInterceptor(e,n,"Single"),n}if(function(e){return"function"==typeof e||e instanceof p}(e)){n=this.construct(e,t);return this.executePostResolutionInterceptor(e,n,"Single"),n}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var r,n;if(this.interceptors.preResolution.has(e)){var i=[];try{for(var o=a(this.interceptors.preResolution.getAll(e)),s=o.next();!s.done;s=o.next()){var c=s.value;"Once"!=c.options.frequency&&i.push(c),c.callback(e,t)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}this.interceptors.preResolution.setAll(e,i)}},e.prototype.executePostResolutionInterceptor=function(e,t,r){var n,i;if(this.interceptors.postResolution.has(e)){var o=[];try{for(var s=a(this.interceptors.postResolution.getAll(e)),c=s.next();!c.done;c=s.next()){var u=c.value;"Once"!=u.options.frequency&&o.push(u),u.callback(e,t,r)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.interceptors.postResolution.setAll(e,o)}},e.prototype.resolveRegistration=function(e,t){if(e.options.lifecycle===i.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var r,n=e.options.lifecycle===i.Singleton,o=e.options.lifecycle===i.ContainerScoped,s=n||o;return r=b(e.provider)?e.provider.useValue:w(e.provider)?s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):d(e.provider)?s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):h(e.provider)?e.provider.useFactory(this):this.construct(e.provider,t),e.options.lifecycle===i.ResolutionScoped&&t.scopedResolutions.set(e,r),r},e.prototype.resolveAll=function(e,t){var r=this;void 0===t&&(t=new C);var n=this.getAllRegistrations(e);if(!n&&v(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),n){var i=n.map((function(e){return r.resolveRegistration(e,t)}));return this.executePostResolutionInterceptor(e,i,"All"),i}var o=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,o,"All"),o},e.prototype.isRegistered=function(e,t){return void 0===t&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;try{for(var r=a(this._registry.entries()),n=r.next();!n.done;n=r.next()){var i=c(n.value,2),o=i[0],s=i[1];this._registry.setAll(o,s.filter((function(e){return!b(e.provider)})).map((function(e){return e.instance=void 0,e})))}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var t,r,n=new e(this);try{for(var o=a(this._registry.entries()),s=o.next();!s.done;s=o.next()){var u=c(s.value,2),f=u[0],l=u[1];l.some((function(e){return e.options.lifecycle===i.ContainerScoped}))&&n._registry.setAll(f,l.map((function(e){return e.options.lifecycle===i.ContainerScoped?{provider:e.provider,options:e.options}:e})))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e.prototype.beforeResolution=function(e,t,r){void 0===r&&(r={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:r})},e.prototype.afterResolution=function(e,t,r){void 0===r&&(r={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:r})},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var r=this;if(e instanceof p)return e.createProxy((function(e){return r.resolve(e,t)}));var n=k.get(e);if(!n||0===n.length){if(0===e.length)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var i=n.map(this.resolveParams(t,e));return new(e.bind.apply(e,u([void 0],i)))},e.prototype.resolveParams=function(e,t){var r=this;return function(n,i){var o,s,a;try{return y(n)?m(n)?n.multiple?(o=r.resolve(n.transform)).transform.apply(o,u([r.resolveAll(n.token)],n.transformArgs)):(s=r.resolve(n.transform)).transform.apply(s,u([r.resolve(n.token,e)],n.transformArgs)):n.multiple?r.resolveAll(n.token):r.resolve(n.token,e):m(n)?(a=r.resolve(n.transform,e)).transform.apply(a,u([r.resolve(n.token,e)],n.transformArgs)):r.resolve(n,e)}catch(e){throw new Error(O(t,i,e))}}},e}());var T=function(){return function(e){var t=f(e);return function(r){function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.apply(this,u(n.concat(t.slice(n.length).map((function(t,r){var i,o,s;try{return y(t)?m(t)?t.multiple?(i=A.resolve(t.transform)).transform.apply(i,u([A.resolveAll(t.token)],t.transformArgs)):(o=A.resolve(t.transform)).transform.apply(o,u([A.resolve(t.token)],t.transformArgs)):t.multiple?A.resolveAll(t.token):A.resolve(t.token):m(t)?(s=A.resolve(t.transform)).transform.apply(s,u([A.resolve(t.token)],t.transformArgs)):A.resolve(t)}catch(t){var a=r+n.length;throw new Error(O(e,a,t))}})))))||this}return s(n,r),n}(e)}};var L=function(e){return l(e)};var x=function(){return function(e){k.set(e,f(e))}};var R=function(e){return void 0===e&&(e=[]),function(t){return e.forEach((function(e){var t=e.token,r=e.options,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["token","options"]);return A.register(t,n,r)})),t}};var M=function(){return function(e){x()(e),A.registerSingleton(e)}};var I=function(e){return l({token:e,multiple:!0})};var U=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i={token:e,multiple:!0,transform:t,transformArgs:r};return l(i)};var F=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return l(e,{transformToken:t,args:r})};function N(e,t){return function(r){x()(r),A.register(t||r,r,{lifecycle:e})}}function V(e){var t;return function(r){return null==t&&(t=e(r)),t}}function D(e,t,r,n){var i,o;return void 0===n&&(n=!0),function(s){var a=e(s);return n&&o===a||(i=(o=a)?s.resolve(t):s.resolve(r)),i}}if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingFacade=t.LogLevel=void 0;const n=r(3);var i;!function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(i=t.LogLevel||(t.LogLevel={}));t.LoggingFacade=class{constructor(e,t,r){if(this.appName=e,this.serviceConfigProvider=t,this.localeService=r,this.loggingUrl="",this.isLoggingConfigValid()&&this.isStageConfigValid()){const e=this.serviceConfigProvider.configs.myvw_logging.urlOrigin,t=this.serviceConfigProvider.configs.myvw_general.customConfig.stage;this.loggingUrl=`${e}/Prod?stage=${t}&appName=${this.appName}&countryCode=${this.localeService.countryCode}&language=${this.localeService.language}`}}log(e,t,r){if(this.loggingUrl){const i=r?JSON.stringify(r,Object.getOwnPropertyNames(r)):void 0;n.default.post(this.loggingUrl,{level:t,message:e,cause:i})}}debug(e,t){this.log(e,i.DEBUG,t)}info(e,t){this.log(e,i.INFO,t)}warn(e,t){this.log(e,i.WARN,t)}error(e,t){this.log(e,i.ERROR,t)}isStageConfigValid(){if(!this.serviceConfigProvider.configs.myvw_general)return console.error("stage config is missing"),!1;const e=this.serviceConfigProvider.configs.myvw_general.customConfig;return!(!e||!e.stage)||(console.error("incomplete stage config"),!1)}isLoggingConfigValid(){return!!this.serviceConfigProvider.configs.myvw_logging||(console.error("logging config is missing"),!1)}}},function(e,t,r){e.exports=r(48)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineAuthServices=t.defineGfaAuthService=t.defineAuthService=void 0,r(41);const n=r(43),i=r(2),o=r(1),s=r(22);function a(){return{id:"vw:authService",dependencies:{featureServices:{"layer-manager":"2.3.0","featureapp-service":"1.0.0","locale-service":"1.0.0","service-config-provider":"1.0.0"}},optionalDependencies:{featureServices:{"vw:authservice-config":"^1.0.0"}},create:e=>{const t=e.featureServices["vw:authservice-config"];if(!t)return;const r=e.featureServices["service-config-provider"],s=e.featureServices["locale-service"],a=new i.LoggingFacade("authservice",r,s);o.container.register("ServiceConfigProviderV1",{useValue:r}),o.container.register("LocaleServiceV1",{useValue:s}),o.container.register(i.LoggingFacade,{useValue:a}),o.container.register("LayerManagerV2",{useValue:e.featureServices["layer-manager"]}),o.container.register("FeatureappServiceV1",{useValue:e.featureServices["featureapp-service"]}),o.container.register("IAuthServiceOptions",{useValue:t});const c=o.container.resolve(n.AuthServiceProviderV1);return{"1.0.0":()=>({featureService:c})}}}}function c(){return{id:s.id,optionalDependencies:{featureServices:{"vw:authService":"^1.0.0"}},create:e=>{const t=e.featureServices["vw:authService"];if(t)return{"1.0.0":()=>({featureService:t})}}}}t.defineAuthService=a,t.defineGfaAuthService=c,t.defineAuthServices=[c(),a()]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFetchResponse=t.createFetchJson=void 0;var n=r(30);Object.defineProperty(t,"createFetchJson",{enumerable:!0,get:function(){return n.createFetchJson}});var i=r(6);Object.defineProperty(t,"createFetchResponse",{enumerable:!0,get:function(){return i.createFetchResponse}})},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createFetchResponse=void 0;const i=n(r(31)),o=n(r(32));function s(e){if(!(null==e?void 0:e.username)||!e.password)return;const{username:t,password:r}=e;return{Authorization:"Basic "+o.default(`${t}:${r}`)}}t.createFetchResponse=function(e={}){const{logger:t=console,applicationName:r}=e;let n;async function o(e,o,a={}){const c=new URL(e.origin),{auth:u}=e,{searchParams:f,headers:l}=a;e.path&&(c.pathname=e.path),f&&(c.search=f.toString());const d=Object.assign(Object.assign({},s(u)),l);if(n&&n.mockIds.length>0&&n.mocksServerConfig){const{mockIds:e,mocksServerConfig:a}=n,u={originalRequest:{href:c.href,headers:d},serviceName:o,mockIds:e,applicationName:r},f=new URL(a.baseUrl);f.searchParams.set("mockRequest",JSON.stringify(u));const l={headers:Object.assign({},s(a.auth))},h=Date.now();try{return await i.default(f.href,l)}catch(e){return void t.error("Error while fetching data:",c.href,e)}finally{t.debug(`Fetched ${o} mock data from ${f.href} via ${u.originalRequest.href}: ${Date.now()-h}ms`)}}else{const e=Date.now();try{return await i.default(c.href,{headers:d})}catch(e){return void t.error("Error while fetching data:",c.href,e)}finally{t.debug(`Fetched ${o} data from ${c.href}: ${Date.now()-e}ms`)}}}return o.injectMockConfig=e=>{n=e},o}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],f=!1,l=-1;function d(){f&&c&&(f=!1,c.length?u=c.concat(u):l=-1,u.length&&h())}function h(){if(!f){var e=a(d);f=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||f||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(0);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var s=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";(function(t){var n=r(0),i=r(53),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=r(14)),a),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){c.headers[e]=n.merge(o)})),e.exports=c}).call(this,r(9))},function(e,t,r){"use strict";var n=r(0),i=r(54),o=r(56),s=r(11),a=r(57),c=r(60),u=r(61),f=r(15);e.exports=function(e){return new Promise((function(t,r){var l=e.data,d=e.headers;n.isFormData(l)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(p+":"+g)}var v=a(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),s(v,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};i(t,r,o),h=null}},h.onabort=function(){h&&(r(f("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){r(f("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(f(t,e,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var y=(e.withCredentials||u(v))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in h&&n.forEach(d,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),r(e),h=null)})),l||(l=null),h.send(l)}))}},function(e,t,r){"use strict";var n=r(55);e.exports=function(e,t,r,i,o){var s=new Error(e);return n(s,t,r,i,o)}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){t=t||{};var r={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function u(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=c(void 0,e[i])):r[i]=c(e[i],t[i])}n.forEach(i,(function(e){n.isUndefined(t[e])||(r[e]=c(void 0,t[e]))})),n.forEach(o,u),n.forEach(s,(function(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=c(void 0,e[i])):r[i]=c(void 0,t[i])})),n.forEach(a,(function(n){n in t?r[n]=c(e[n],t[n]):n in e&&(r[n]=c(void 0,e[n]))}));var f=i.concat(o).concat(s).concat(a),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===f.indexOf(e)}));return n.forEach(l,u),r}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){var n,i;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(o){if(void 0===(i="function"==typeof(n=o)?n.call(t,r,t,e):n)||(e.exports=i),!0,e.exports=o(),!!0){var s=window.Cookies,a=window.Cookies=o();a.noConflict=function(){return window.Cookies=s,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function i(){}function o(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(r);/^[\{\[]/.test(s)&&(r=s)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in o)o[c]&&(a+="; "+c,!0!==o[c]&&(a+="="+o[c].split(";")[0]));return document.cookie=t+"="+r+a}}function s(e,r){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),c=a.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(n.read||n)(c,u)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(i[u]=c,e===u)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,r){o(t,"",e(r,{expires:-1}))},i.defaults={},i.withConverter=r,i}((function(){}))}))},function(e,t,r){"use strict";function n(e){this.message=e}r.r(t),r.d(t,"InvalidTokenError",(function(){return s})),n.prototype=new Error,n.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,s=0,a="";i=t.charAt(s++);~i&&(r=o%4?64*r+i:i,o++%4)?a+=String.fromCharCode(255&r>>(-2*o&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a};function o(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return i(t)}}function s(e){this.message=e}s.prototype=new Error,s.prototype.name="InvalidTokenError",t.default=function(e,t){if("string"!=typeof e)throw new s("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(o(e.split(".")[r]))}catch(e){throw new s("Invalid token specified: "+e.message)}}},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserProfileClient=void 0;const s=r(3),a=r(19),c=r(1);let u=class{constructor(e,t){this.localeService=e,this.serviceConfigProvider=t}async getUserProfile(e){let t;try{t=a.default(e).sub}catch(e){throw Error(`JWT to get user profile is invalid, caused by [${e}]`)}try{const r=this.serviceConfigProvider.configs["customer-profile"].urlOrigin+"/v2/customers/"+t+"/personalData";return(await s.default.get(r,{headers:{Authorization:"Bearer "+e}})).data}catch(e){throw Error(`Getting profile for user [${t}] failed, caused by [${e}]`)}}async getLatestLegalConsentVersion(e){var t,r,n;const i=a.default(e).sub;this.throwErrorIfLocaleIsIncomplete(),this.throwErrorIfConsentServiceConfigIsIncomplete();const o=this.localeService.countryCode,c=this.localeService.language,u=`${null===(t=this.serviceConfigProvider.configs.consent)||void 0===t?void 0:t.urlOrigin}/consent/v3/legal-text-consents/${(null===(r=this.serviceConfigProvider.configs.consent)||void 0===r?void 0:r.customConfig).appName}/${i}/${(null===(n=this.serviceConfigProvider.configs.consent)||void 0===n?void 0:n.customConfig).termsAndConditionsTextId}/${o}/${c}/details`,f=(await s.default.get(u,{headers:{Authorization:"Bearer "+e}})).data;if(this.isLatestVersionComplete(f))return{accepted:!!this.isConsentedLegalTextComplete(f)&&f.consentedLegalText.majorVersion===f.latestVersion.majorVersion,majorVersion:f.latestVersion.majorVersion,minorVersion:f.latestVersion.minorVersion};throw Error("Invalid response from consent")}throwErrorIfLocaleIsIncomplete(){if(!this.localeService.countryCode||!this.localeService.language)throw Error("LocaleService returned invalid data")}throwErrorIfConsentServiceConfigIsIncomplete(){var e,t,r,n;if(!(null===(t=null===(e=this.serviceConfigProvider.configs.consent)||void 0===e?void 0:e.customConfig)||void 0===t?void 0:t.appName)&&!(null===(n=null===(r=this.serviceConfigProvider.configs.consent)||void 0===r?void 0:r.customConfig)||void 0===n?void 0:n.termsAndConditionsTextId))throw Error('Service config "consent" is incomplete')}isConsentedLegalTextComplete(e){return e.consentedLegalText&&e.consentedLegalText.majorVersion}isLatestVersionComplete(e){return e.latestVersion&&e.latestVersion.majorVersion}};u=n([c.injectable(),o(0,c.inject("LocaleServiceV1")),o(1,c.inject("ServiceConfigProviderV1")),i("design:paramtypes",[Object,Object])],u),t.UserProfileClient=u},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LegalEntityHelper=void 0;const s=r(1),a=r(2);let c=class{constructor(e,t){this.authServiceOptions=e,this.logger=t}getMainLegalEntity(){let e=Object.keys(this.authServiceOptions.legalEntityMapping)[0];for(let e in this.authServiceOptions.legalEntityMapping)if(this.authServiceOptions.legalEntityMapping[e].mainEntity)return e;return this.logger.error("No main legal entity configured, using first as fallback"),e}};c=n([s.injectable(),o(0,s.inject("IAuthServiceOptions")),i("design:paramtypes",[Object,a.LoggingFacade])],c),t.LegalEntityHelper=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GfaAuthServiceEventV1=t.id=void 0;const n=r(73);Object.defineProperty(t,"GfaAuthServiceEventV1",{enumerable:!0,get:function(){return n.GfaAuthServiceEventV1}}),t.id="gfa:auth-service"},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defineUserLocationManager=void 0;const o=r(29);i(r(40),t),t.defineUserLocationManager=function(e={}){const{mocksServerConfig:t,mockIds:r=[]}=e;return{id:"user-location-manager",dependencies:{featureServices:{"featureapp-service":"^1.2.0","layer-manager":"^2.3.0","locale-service":"^1.0.0","service-config-provider":"^1.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"featureapp-service":n,"layer-manager":i,"locale-service":s,"s2:logger":a=console,"service-config-provider":c}=e;let u;return{"1.3.0":()=>({featureService:async()=>(u||(u=o.createUserLocationManager({featureAppService:n,language:s.language,layerManager:i,logger:a,mockIds:r,mocksServerConfig:t,serviceConfigs:c.configs})),u)})}}}}},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,o,s,a;if(u(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=f(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):v(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,f=v(c,u);for(r=0;r<u;++r)o(f[r],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,i,o,s;if(u(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.filterServiceDefinition=void 0;const o=r(74),s=r(77);i(r(78),t),i(r(79),t),t.filterServiceDefinition={id:"filter-service",dependencies:{featureServices:{"s2:history":"^2.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":t=console,"s2:history":r}=e,n=new o.FilterStore(r.history,t);return{"1.2.0":e=>({featureService:{get filters(){const{bodyType:e,engineType:t,gearType:r}=n.get();return{bodyType:e,engineType:t,gearType:r}},add:(t,r)=>{n.update({type:"add",filterType:t,value:r,consumerId:e})},remove:(t,r)=>{n.update({type:"remove",filterType:t,value:r,consumerId:e})},reset:t=>{n.update({type:"reset",filters:t,consumerId:e})},listen:e=>n.listen(t=>{switch(t.type){case"add":case"remove":s.isV1FilterType(t.filterType)&&e(Object.assign(Object.assign({},t),{filterType:t.filterType}));break;case"reset":if(t.filters){const r={};for(const e of s.v1FilterTypes){const n=t.filters[e];n&&(r[e]=n)}Object.keys(r).length>0&&e(Object.assign(Object.assign({},t),{filters:r}))}else e(t)}})}}),"2.0.0":e=>({featureService:{get filters(){return n.get()},add:(t,r)=>{n.update({type:"add",filterType:t,value:r,consumerId:e})},remove:(t,r)=>{n.update({type:"remove",filterType:t,value:r,consumerId:e})},toggleOn:t=>{n.update({type:"toggleOn",filterType:t,consumerId:e})},toggleOff:t=>{n.update({type:"toggleOff",filterType:t,consumerId:e})},reset:t=>{n.update({type:"reset",filters:t,consumerId:e})},listen:e=>n.listen(e)}})}}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.compareFeatureServiceDefinition=void 0;const o=r(80),s=r(81);i(r(82),t),i(r(83),t),t.compareFeatureServiceDefinition={id:"compare",dependencies:{featureServices:{"navigation-service":"^1.1.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":t=console,"navigation-service":r}=e,n=new s.CompareFeatureServiceV2Impl(r,t),i=new o.CompareFeatureServiceV1Impl(n);return{"1.0.0":()=>({featureService:i}),"2.0.0":()=>({featureService:n})}}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.pricePreferencesProviderDefinition=void 0;const o=r(84);i(r(85),t),t.pricePreferencesProviderDefinition={id:"price-preferences-provider",optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":t=console}=e,r=new Set;let n=o.readFromStorage(t)||"priceType1";return{"1.0.0":()=>({featureService:{getPriceType:()=>n,setPriceType:e=>{e!==n&&(n=e,o.writeToStorage(e,t),r.forEach(e=>e()))},listen:e=>(r.add(e),()=>r.delete(e))}})}}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defineFinancingProviderService=void 0;const o=r(86);i(r(89),t),i(r(90),t),t.defineFinancingProviderService=function(e={}){const{mocksServerConfig:t,mockIds:r=[]}=e;return{id:"financing-provider-service",dependencies:{featureServices:{"service-config-provider":"^1.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":n=console,"service-config-provider":i}=e;let s;const a=async()=>(s||(s=o.fetchFinancingProviderConfig({logger:n,mockIds:r,mocksServerConfig:t,serviceConfigs:i.configs})),s);return{"1.1.0":()=>({featureService:{getSettings:a}}),"2.0.0":()=>({featureService:{getSettings:async()=>{const e=await a();if(e)return e.settings}}})}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserLocationManager=void 0;const n=r(5),i=r(33),o=r(34),s=r(35),a=r(36),c=r(37),u=r(38);t.createUserLocationManager=async function(e){if("undefined"==typeof window)return void e.logger.warn("A User Location Manager was requested during server-side rendering.");const{featureAppService:t,language:r,layerManager:f,logger:l,mockIds:d,mocksServerConfig:h,serviceConfigs:p}=e,g=n.createFetchJson({applicationName:"ulf",logger:l});g.injectMockConfig({mockIds:d,mocksServerConfig:h});try{const e=i.createAcsServiceConfig(p.acs);if(!e)return;const n=await a.fetchAcsConfig(e,g);if("none"===n.requiredUserLocation.type)return;const d="region"===n.requiredUserLocation.type?await c.fetchTranslations(s.createI18nServiceConfig(p.i18n),r,g):void 0,h=o.createConfig(n.requiredUserLocation,d),v=t.featureAppConfigurations.ulf;if(!v){throw new Error('A Feature App configuration with the name "ulf" must be provided.')}return new u.UserLocationManager(h,v,f,l)}catch(e){throw l.error(e),e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFetchJson=void 0;const n=r(6);t.createFetchJson=function(e={}){const{logger:t=console}=e,r=n.createFetchResponse(e);async function i(e,n,i={}){const o=await r(e,n,i);if(o)try{return o.ok?await o.json():(t.error("Error while fetching data:",o.url,o.status,o.statusText),void t.error(await async function(e){const t=await e.text();try{return JSON.stringify(JSON.parse(t),null,2)}catch(e){return t}}(o)))}catch(e){return void t.error("Error while parsing fetched data:",o.url,o.status,o.statusText,e)}}return i.injectMockConfig=r.injectMockConfig,i}},function(e,t){e.exports=t=fetch.bind(window),t.fetch=fetch.bind(window),t.Headers=fetch.Headers,t.Request=fetch.Request,t.Response=fetch.Response,t.default=fetch.bind(window)},function(e,t){e.exports=function(e){return btoa(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAcsServiceConfig=void 0,t.createAcsServiceConfig=function(e){var t;if(!e)return;const r=null===(t=e.customConfig)||void 0===t?void 0:t.ulfTenant;return r?{origin:e.urlOrigin,path:e.urlPath,auth:e.credentials,tenant:r}:void 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConfig=void 0,t.createConfig=function(e,t){var r;if("region"===e.type){const n=null===(r=null==t?void 0:t.region)||void 0===r?void 0:r.regions;if(!n)throw new Error("A region user location is required, but no translated regions are defined.");return Object.assign(Object.assign({},e),{localizedRegions:n})}return Object.assign(Object.assign({},e),{pattern:new RegExp(e.pattern)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createI18nServiceConfig=void 0,t.createI18nServiceConfig=function(e){var t;if(!e)throw new Error("No i18n service config found.");const r=null===(t=e.customConfig)||void 0===t?void 0:t.ulfTenant;if(!r)throw new Error('The i18n service config is missing the required custom field "ulfTenant".');return{origin:e.urlOrigin,path:e.urlPath,auth:e.credentials,tenant:r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAcsConfig=void 0,t.fetchAcsConfig=async function(e,t){const{tenant:r}=e,n=await t(e,"acs",{searchParams:new URLSearchParams({tenant:r,application:"ULF",inherit:"true",type:"tenant_technical"})});if(!n)throw new Error(`Unable to fetch acs config for tenant ${JSON.stringify(r)}.`);return n.configurations.tenant_technical.items}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTranslations=void 0,t.fetchTranslations=async function(e,t,r){const{tenant:n}=e,i=Object.assign(Object.assign({},e),{path:`${e.path}/TranslationBundle:${n}:ULF:${t}`}),o=await r(i,"i18n");if(!o)throw new Error(`Unable to fetch translations for tenant ${JSON.stringify(n)}.`);return o.translation.ulf}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserLocationManager=void 0;const i=r(7),o=n(r(39)),s=n(r(8));function a(e,t){return"region"===e.type&&t.includes(e.regionCode)}function c(e,t){return"postalCode"===e.type&&t.test(e.postalCode)}t.UserLocationManager=class{constructor(e,t,r,n){this.config=e,this.featureAppConfig=t,this.layerManager=r,this.logger=n,this.listeners=new Set,this.userLocationIsSelectedByUser=!1,this.isUlfOpen=!1;const i=this.readUserLocationFromLocalStorage();i&&(this.userLocationIsSelectedByUser=!0),this.userLocation=i||this.createDefaultUserLocation()}setUserLocation(e){if("region"===this.config.type&&!a(e,this.config.regionCodes))return void this.logger.error(`An invalid region was attempted to be set in User Location Manager: ${JSON.stringify(e)}.`);if("postalCode"===this.config.type&&!c(e,this.config.pattern))return void this.logger.error(`An invalid postal code was attempted to be set in User Location Manager: ${JSON.stringify(e)}. A postal code must match ${this.config.pattern.toString()}.`);const t=!o.default(this.userLocation,e);if(!t&&this.userLocationIsSelectedByUser||this.writeUserLocationToLocalStorage(e),this.userLocationIsSelectedByUser=!0,this.userLocation=e,t)for(const t of this.listeners)t(e)}listen(e,t){return this.listeners.add(e),setTimeout(()=>{this.userLocation&&e(this.userLocation)}),this.userLocationIsSelectedByUser||(null==t?void 0:t.passive)||this.promptUserForLocation(),()=>this.listeners.delete(e)}promptUserForLocation(){this.isUlfOpen||(this.isUlfOpen=!0,this.layerManager.openFocusLayer((e,t)=>s.default.createElement(i.FeatureAppLoader,Object.assign({featureAppId:"ulf",done:t,onError:t},this.featureAppConfig)),void 0,{onClose:()=>this.isUlfOpen=!1,size:"A"}))}createDefaultUserLocation(){if("region"===this.config.type)return{type:"region",regionCode:this.config.defaultRegionCode}}writeUserLocationToLocalStorage(e){try{window.localStorage.setItem("ulf-user-location",JSON.stringify(e))}catch(e){this.logger.error(e)}}readUserLocationFromLocalStorage(){try{const e=window.localStorage.getItem("ulf-user-location"),t=e?JSON.parse(e):void 0;if(!t)return;return"region"!==this.config.type||a(t,this.config.regionCodes)?"postalCode"!==this.config.type||c(t,this.config.pattern)?t:void this.logger.warn(`An invalid postal code was read from local storage in the User Location Manager: ${JSON.stringify(t)}.`):void this.logger.warn(`An invalid region was read from local storage in the User Location Manager: ${JSON.stringify(t)}.`)}catch(e){return void this.logger.error(e)}}}},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){(function(e,t){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r;!function(r){!function(n){var i="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=s(r);function s(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===i.Reflect?i.Reflect=r:o=s(i.Reflect,o),function(t){var r=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,c=!s&&!a,u={create:s?function(){return R(Object.create(null))}:a?function(){return R({__proto__:null})}:function(){return R({})},has:c?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return r.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},f=Object.getPrototypeOf(Function),l="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,i)},t.prototype.entries=function(){return new r(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}():Map,h=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,p=new(l||"function"!=typeof WeakMap?function(){var e=u.create(),t=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var t;do{t="@@WeakMap@@"+s()}while(u.has(e,t));return e[t]=!0,t}function i(e,n){if(!r.call(e,t)){if(!n)return;Object.defineProperty(e,t,{value:u.create()})}return e[t]}function o(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function s(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<16;++n){var i=t[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}():WeakMap);function g(e,t,r){var n=p.get(e);if(_(n)){if(!r)return;n=new d,p.set(e,n)}var i=n.get(t);if(_(i)){if(!r)return;i=new d,n.set(t,i)}return i}function v(e,t,r){var n=g(t,r,!1);return!_(n)&&!!n.has(e)}function y(e,t,r){var n=g(t,r,!1);if(!_(n))return n.get(e)}function m(e,t,r,n){g(r,n,!0).set(e,t)}function w(e,t){var r=[],n=g(e,t,!1);if(_(n))return r;for(var i=function(e){var t=A(e,o);if(!E(t))throw new TypeError;var r=t.call(e);if(!C(r))throw new TypeError;return r}(n.keys()),s=0;;){var a=T(i);if(!a)return r.length=s,r;var c=a.value;try{r[s]=c}catch(e){try{L(i)}finally{throw e}}s++}}function b(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function _(e){return void 0===e}function S(e){return null===e}function C(e){return"object"==typeof e?null!==e:"function"==typeof e}function O(e,t){switch(b(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",n=A(e,i);if(void 0!==n){var o=n.call(e,r);if(C(o))throw new TypeError;return o}return function(e,t){if("string"===t){var r=e.toString;if(E(r))if(!C(i=r.call(e)))return i;if(E(n=e.valueOf))if(!C(i=n.call(e)))return i}else{var n;if(E(n=e.valueOf))if(!C(i=n.call(e)))return i;var i,o=e.toString;if(E(o))if(!C(i=o.call(e)))return i}throw new TypeError}(e,"default"===r?"number":r)}function P(e){var t=O(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function j(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function E(e){return"function"==typeof e}function k(e){return"function"==typeof e}function A(e,t){var r=e[t];if(null!=r){if(!E(r))throw new TypeError;return r}}function T(e){var t=e.next();return!t.done&&t}function L(e){var t=e.return;t&&t.call(e)}function x(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===f)return t;if(t!==f)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i||i===e?t:i}function R(e){return e.__=void 0,delete e.__,e}t("decorate",(function(e,t,r,n){if(_(r)){if(!j(e))throw new TypeError;if(!k(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!_(n)&&!S(n)){if(!k(n))throw new TypeError;t=n}}return t}(e,t)}if(!j(e))throw new TypeError;if(!C(t))throw new TypeError;if(!C(n)&&!_(n)&&!S(n))throw new TypeError;return S(n)&&(n=void 0),function(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,r,n);if(!_(o)&&!S(o)){if(!C(o))throw new TypeError;n=o}}return n}(e,t,r=P(r),n)})),t("metadata",(function(e,t){return function(r,n){if(!C(r))throw new TypeError;if(!_(n)&&!function(e){switch(b(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;m(e,t,r,n)}})),t("defineMetadata",(function(e,t,r,n){if(!C(r))throw new TypeError;return _(n)||(n=P(n)),m(e,t,r,n)})),t("hasMetadata",(function(e,t,r){if(!C(t))throw new TypeError;return _(r)||(r=P(r)),function e(t,r,n){if(v(t,r,n))return!0;var i=x(r);return!S(i)&&e(t,i,n)}(e,t,r)})),t("hasOwnMetadata",(function(e,t,r){if(!C(t))throw new TypeError;return _(r)||(r=P(r)),v(e,t,r)})),t("getMetadata",(function(e,t,r){if(!C(t))throw new TypeError;return _(r)||(r=P(r)),function e(t,r,n){if(v(t,r,n))return y(t,r,n);var i=x(r);return S(i)?void 0:e(t,i,n)}(e,t,r)})),t("getOwnMetadata",(function(e,t,r){if(!C(t))throw new TypeError;return _(r)||(r=P(r)),y(e,t,r)})),t("getMetadataKeys",(function(e,t){if(!C(e))throw new TypeError;return _(t)||(t=P(t)),function e(t,r){var n=w(t,r),i=x(t);if(null===i)return n;var o=e(i,r);if(o.length<=0)return n;if(n.length<=0)return o;for(var s=new h,a=[],c=0,u=n;c<u.length;c++){var f=u[c];s.has(f)||(s.add(f),a.push(f))}for(var l=0,d=o;l<d.length;l++){f=d[l];s.has(f)||(s.add(f),a.push(f))}return a}(e,t)})),t("getOwnMetadataKeys",(function(e,t){if(!C(e))throw new TypeError;return _(t)||(t=P(t)),w(e,t)})),t("deleteMetadata",(function(e,t,r){if(!C(t))throw new TypeError;_(r)||(r=P(r));var n=g(t,r,!1);if(_(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=p.get(t);return i.delete(r),i.size>0||p.delete(t),!0}))}(o)}()}(r||(r={}))}).call(this,r(9),r(42))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthServiceProviderV1=void 0;const s=r(44),a=r(47),c=r(1),u=r(2),f=r(21);let l=class{constructor(e,t,r,n){this.authServiceOptions=e,this.authProxyUrlBuilder=t,this.logger=r,this.legalEntityHelper=n,this.instances=new Map,this.loginAll=async(e,t,r)=>{let n=this.legalEntityHelper.getMainLegalEntity();return await this.instances.get(n).isAuthenticated()?this.loginRequestingLegalEntityIfNotAuthenticated(e,t,r):this.loginAllLegalEntities(n,t,r)}}register(e){const t=this.instances.get(e);if(t)return t;if(this.authServiceOptions.legalEntityMapping[e]){for(let e in this.authServiceOptions.legalEntityMapping){const t=new a.AuthServiceV1(e,this.loginAll);this.instances.set(e,t)}return this.instances.get(e)}{const t=Error('Legal entity "'+e+'" is unknown.');throw this.logger.error(t.message),t}}async loginRequestingLegalEntityIfNotAuthenticated(e,t,r){if(!await this.instances.get(e).isAuthenticated()){const n=this.authProxyUrlBuilder.getLoginUrl(e,t,r);window.location.assign(n)}}loginAllLegalEntities(e,t,r){const n=Array.from(this.instances.keys()).filter(t=>t!==e),i=this.authProxyUrlBuilder.getLoginUrlForAllLegalEntities(e,n,t,r);window.location.assign(i)}};l=n([c.injectable(),o(0,c.inject("IAuthServiceOptions")),i("design:paramtypes",[Object,s.AuthProxyUrlBuilder,u.LoggingFacade,f.LegalEntityHelper])],l),t.AuthServiceProviderV1=l},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthProxyUrlBuilder=void 0;const s=r(1),a=r(45),c=r(46);let u=class{constructor(e,t){this.authServiceOptions=e,this.serviceConfigProvider=t,this.authProxyUrl=this.serviceConfigProvider.configs["auth-proxy"].urlOrigin,this.defaultRedirectUrl=this.serviceConfigProvider.configs["auth-proxy"].customConfig.redirectUrl}getLoginUrlForAllLegalEntities(e,t,r,n){const i=this.authServiceOptions.legalEntityMapping[e].fag,o=this.authServiceOptions.legalEntityMapping[e].scopes,s=new Map;for(const e of t){const t=this.authServiceOptions.legalEntityMapping[e];s.set(t.fag,t.scopes)}return this.buildLoginUrl(i,o,s,r,n)}getLoginUrl(e,t,r){const n=this.authServiceOptions.legalEntityMapping[e],i=new Map;return this.buildLoginUrl(n.fag,n.scopes,i,t,r)}buildLoginUrl(e,t,r,n,i){let o="?fag="+[e,...r.keys()],s=a.AuthProxyScopeBuilder.buildScopeString(e,t,r),u=c.AuthProxyPromptBuilder.buildPromptString(e,n,[...r.keys()]),f="&redirectUrl="+(i||this.defaultRedirectUrl);return`${this.authProxyUrl}/login${o}${s}${u}${f}`}};u=n([s.injectable(),o(0,s.inject("IAuthServiceOptions")),o(1,s.inject("ServiceConfigProviderV1")),i("design:paramtypes",[Object,Object])],u),t.AuthProxyUrlBuilder=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthProxyScopeBuilder=void 0;t.AuthProxyScopeBuilder=class{static buildScopeString(e,t,r){let n="";return t.length>0&&(n+=`&scope-${e}=${t}`),r.forEach((e,t)=>{e.length>0&&(n+=`&scope-${t}=${e}`)}),n}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthProxyPromptBuilder=void 0;t.AuthProxyPromptBuilder=class{static buildPromptString(e,t,r){let n="";return t&&(n+=`&prompt-${e}=${t}`),r.forEach(e=>{n+=`&prompt-${e}=none`}),n}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthServiceV1=void 0;const n=r(3),i=r(18),o=r(19),s=r(65),a=r(66),c=r(67),u=r(69),f=r(1),l=r(2),d=r(70),h=r(72),p=r(93),g=r(22);t.AuthServiceV1=class{constructor(e,t){this.legalEntity=e,this.loginAllCallback=t,this.tokens={},this.tokenMutex=new p.Mutex,this.preconditionMutex=new p.Mutex,this.authenticationIsLocked=!0,this.unlockAuthenticationCallback=()=>{this.authenticationIsLocked=!1},this.areTokensUndefined=()=>void 0===this.tokens.access_token||void 0===this.tokens.id_token,this.authServiceOptions=f.container.resolve("IAuthServiceOptions"),this.serviceConfigProvider=f.container.resolve("ServiceConfigProviderV1"),this.sharedEventEmitter=f.container.resolve(s.default),this.loginPreconditionHandler=f.container.resolve(c.LoginPreconditionHandler),this.logger=f.container.resolve(l.LoggingFacade),this.preconditionVerifier=f.container.resolve(h.PreconditionVerifier),f.container.resolve(d.AuthServiceConfigValidator).validate(),this.fag=this.authServiceOptions.legalEntityMapping[e].fag,this.resourceCaller=new u.ResourceCaller(this.serviceConfigProvider.configs["auth-proxy"].urlOrigin,this.fag),this.authFagsCookieChecker=new a.AuthFagsCookieChecker(this.fag)}async isAuthenticated(){const e=this.authServiceOptions.legalEntityMapping[this.legalEntity].scopes;if(this.authFagsCookieChecker.checkPresenceOfScopes(e))try{return await this.getValidTokens(),await this.checkPreconditions(),!0}catch(e){return!1}return!1}async login(e,t){await this.sharedEventEmitter.emit(g.GfaAuthServiceEventV1.SAVE_STATE),this.loginAllCallback(this.legalEntity,e,t)}async logout(e){await this.sharedEventEmitter.emit(g.GfaAuthServiceEventV1.LOGOUT);const t=`?_csrf=${i.get("csrf_token")}&redirectUrl=${e||this.serviceConfigProvider.configs["auth-proxy"].customConfig.redirectUrl}`;window.location.assign(`${this.serviceConfigProvider.configs["auth-proxy"].urlOrigin}/logout${t}`)}async getAccessToken(){return this.preconditionVerifier.throwErrorIfPreconditionNotMet(this.authenticationIsLocked,this.legalEntity),(await this.getValidTokens()).access_token}async getIdToken(){return this.preconditionVerifier.throwErrorIfPreconditionNotMet(this.authenticationIsLocked,this.legalEntity),(await this.getValidTokens()).id_token}subscribe(e,t){this.sharedEventEmitter.on(e,t)}async get(e,t,r){return this.preconditionVerifier.throwErrorIfPreconditionNotMet(this.authenticationIsLocked,this.legalEntity),this.resourceCaller.call("GET",e,t,void 0,r)}async put(e,t,r,n){return this.preconditionVerifier.throwErrorIfPreconditionNotMet(this.authenticationIsLocked,this.legalEntity),this.resourceCaller.call("PUT",e,t,r,n)}async post(e,t,r,n){return this.preconditionVerifier.throwErrorIfPreconditionNotMet(this.authenticationIsLocked,this.legalEntity),this.resourceCaller.call("POST",e,t,r,n)}async patch(e,t,r,n){return this.preconditionVerifier.throwErrorIfPreconditionNotMet(this.authenticationIsLocked,this.legalEntity),this.resourceCaller.call("PATCH",e,t,r,n)}async delete(e,t,r,n){return this.preconditionVerifier.throwErrorIfPreconditionNotMet(this.authenticationIsLocked,this.legalEntity),this.resourceCaller.call("DELETE",e,t,r,n)}async checkPreconditions(){await this.preconditionMutex.runExclusive(async()=>{if(this.authenticationIsLocked){if(this.preconditionVerifier.isPreconditionCheckNeeded(this.legalEntity))return this.loginPreconditionHandler.showPreconditionsIfNecessary(this.tokens.access_token,this.unlockAuthenticationCallback);this.unlockAuthenticationCallback()}})}async getValidTokens(){return await this.tokenMutex.runExclusive(async()=>{!this.areTokensUndefined()&&this.areTokensValid(this.tokens)||(this.tokens=await this.retrieveAndValidateTokens())}),this.tokens}async retrieveAndValidateTokens(){const e=`${this.serviceConfigProvider.configs["auth-proxy"].urlOrigin}/${this.fag}/tokens`;let t;try{t=await n.default.get(e,{withCredentials:!0,xsrfCookieName:"csrf_token",xsrfHeaderName:"X-CSRF-TOKEN"})}catch(e){const t=Error("Token could not be retrieved");throw this.logger.error(t.message,e),t}if(this.areTokensValid(t.data))return t.data;{const e=Error("Newly retrieved tokens are not valid");throw this.logger.error(e.message),e}}areTokensValid(e){return this.isJwtTokenValid(e.access_token)&&this.isJwtTokenValid(e.id_token)}isJwtTokenValid(e){try{return 1e3*o.default(e).exp>Date.now()}catch(e){return this.logger.error("Error decoding token",e),!1}}}},function(e,t,r){"use strict";var n=r(0),i=r(10),o=r(49),s=r(16);function a(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var c=a(r(13));c.Axios=o,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=r(17),c.CancelToken=r(62),c.isCancel=r(12),c.all=function(e){return Promise.all(e)},c.spread=r(63),c.isAxiosError=r(64),e.exports=c,e.exports.default=c},function(e,t,r){"use strict";var n=r(0),i=r(11),o=r(50),s=r(51),a=r(16);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},c.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,r,n){return this.request(a(n||{},{method:e,url:t,data:r}))}})),e.exports=c},function(e,t,r){"use strict";var n=r(0);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,r){"use strict";var n=r(0),i=r(52),o=r(12),s=r(13);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(15);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(58),i=r(59);e.exports=function(e,t){return e&&!n(t)?i(e,t):t}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,s={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}})),s):s}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(17);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},function(e,t,r){"use strict";var n,i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=r(1);let s=n=class{constructor(){this.listenersByEvent=new Map}on(e,t){this.listenersByEvent.has(e)||this.listenersByEvent.set(e,[]),this.listenersByEvent.get(e).push(async()=>{const e=new Promise(e=>setTimeout(e,n.DEFAULT_TIMEOUT));return Promise.race([e,t()])})}async emit(e){const t=this.listenersByEvent.get(e);if(t){const e=t.map(e=>e());await Promise.all(e)}}};s.DEFAULT_TIMEOUT=500,s=n=i([o.singleton()],s),t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthFagsCookieChecker=void 0;t.AuthFagsCookieChecker=class{constructor(e){this.fag=e,this.authFagCookieIdentifier="auth_fags="}checkPresenceOfScopes(e){const t=this.getAuthFagCookieContent();if(!t)return!1;const r=t[this.fag];return!!r&&e.filter(e=>r.includes(e)).length===e.length}getAuthFagCookieContent(){return document.cookie.split(";").map(e=>e.trim()).filter(e=>e.startsWith(this.authFagCookieIdentifier)).map(e=>e.substring(this.authFagCookieIdentifier.length)).map(e=>atob(e)).map(e=>JSON.parse(e)).find(()=>!0)}}},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LoginPreconditionHandler=void 0;const s=r(7),a=r(8),c=r(68),u=r(20),f=r(1),l=r(2);let d=class{constructor(e,t,r,n,i){this.layerManager=e,this.featureappService=t,this.userProfileClient=r,this.profileCompletenessChecker=n,this.logger=i}async showPreconditionsIfNecessary(e,t){const r=await this.areTermsAndConditionsNecessary(e);r||t();const n=await this.isProfileCompletionNecessary(r,e);if(r||n)return new Promise(i=>{this.openLayerIfPreconditionsMissing(r,n,t,i,e)})}async areTermsAndConditionsNecessary(e){try{return!(await this.userProfileClient.getLatestLegalConsentVersion(e)).accepted}catch(e){throw this.logger.error("Getting latest legal consent version failed",e),e}}async isProfileCompletionNecessary(e,t){if(!e)try{return!await this.profileCompletenessChecker.isProfileComplete(t)}catch(e){return this.logger.error("Profile completeness check failed",e),!0}}openLayerIfPreconditionsMissing(e,t,r,n,i){this.layerManager.openContentLayer(this.renderLayer,{loginPreconditionFeatureAppBaseUrl:this.featureappService.featureAppConfigurations.myvw_loginprecondition.baseUrl,loginPreconditionFeatureAppSrc:this.featureappService.featureAppConfigurations.myvw_loginprecondition.src,showTermsAndConditions:e,showProfileCompletion:t,unlockAuthenticationCallback:r,allPreconditionsCompletedCallback:n,accessToken:i})}renderLayer(e,t){return a.createElement(s.FeatureAppLoader,{featureAppId:"myvw:login-precondition-service",baseUrl:e.loginPreconditionFeatureAppBaseUrl,src:e.loginPreconditionFeatureAppSrc,config:{closeCallback:t,showTermsAndConditions:e.showTermsAndConditions,showProfileCompletion:e.showProfileCompletion,termsAndConditionsAcceptedCallback:e.unlockAuthenticationCallback,allPreconditionsCompletedCallback:e.allPreconditionsCompletedCallback,accessToken:e.accessToken}})}};d=n([f.injectable(),o(0,f.inject("LayerManagerV2")),o(1,f.inject("FeatureappServiceV1")),i("design:paramtypes",[Object,Object,u.UserProfileClient,c.ProfileCompletenessChecker,l.LoggingFacade])],d),t.LoginPreconditionHandler=d},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileCompletenessChecker=void 0;const o=r(20),s=r(1);let a=class{constructor(e){this.userProfileClient=e}async isProfileComplete(e){const t=await this.userProfileClient.getUserProfile(e);return void 0!==t&&this.isNotBlank(t.firstName)&&this.isNotBlank(t.lastName)&&["SALUTATION:MR","SALUTATION:MRS","SALUTATION:MS",void 0].some(e=>e===t.salutation)}isNotBlank(e){return!(!e||!e.trim())}};a=n([s.injectable(),i("design:paramtypes",[o.UserProfileClient])],a),t.ProfileCompletenessChecker=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceCaller=void 0;const n=r(18);t.ResourceCaller=class{constructor(e,t){this.authProxyUrl=e,this.fag=t}async call(e,t,r,n,i){let o=this.authProxyUrl+"/"+this.fag+"/proxy";return r&&(o=o+"/"+r),t&&(o=o+"?resourceHost="+t),fetch(o,{method:e,headers:Object.assign(Object.assign({},i),this.createCsrfHeader()),credentials:"include",body:n})}createCsrfHeader(){const e=n.get("csrf_token");return{"X-CSRF-TOKEN":e||""}}}},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthServiceConfigValidator=void 0;const s=r(1),a=r(71);let c=class{constructor(e,t){this.serviceConfigProvider=e,this.serviceConfigValidator=t}validate(){this.serviceConfigValidator.validate("consent"),this.serviceConfigValidator.validate("auth-proxy",["redirectUrl"]),!0!==this.serviceConfigProvider.configs.consent.customConfig.deactivated&&this.serviceConfigValidator.validate("consent",["appName","termsAndConditionsTextId","privacyStatementTextId"])}};c=n([s.injectable(),o(0,s.inject("ServiceConfigProviderV1")),i("design:paramtypes",[Object,a.ServiceConfigValidator])],c),t.AuthServiceConfigValidator=c},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceConfigValidator=void 0;const s=r(1),a=r(2);let c=class{constructor(e,t){this.logger=e,this.serviceConfigProvider=t}validate(e,t){var r,n;const i=null===(n=null===(r=this.serviceConfigProvider)||void 0===r?void 0:r.configs)||void 0===n?void 0:n[e],o=`Invalid ${e} config: [${JSON.stringify(i)}]`;(null==i?void 0:i.urlOrigin)||this.logAndThrowError(o),t&&t.some(e=>{var t;return!(null===(t=null==i?void 0:i.customConfig)||void 0===t?void 0:t[e])})&&this.logAndThrowError(o)}logAndThrowError(e){const t=Error(e);throw this.logger.error(t.message),t}};c=n([s.injectable(),o(1,s.inject("ServiceConfigProviderV1")),i("design:paramtypes",[a.LoggingFacade,Object])],c),t.ServiceConfigValidator=c},function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.PreconditionVerifier=void 0;const o=r(1),s=r(21),a=r(2);let c=class{constructor(){this.serviceConfigProvider=o.container.resolve("ServiceConfigProviderV1"),this.legalEntityHelper=o.container.resolve(s.LegalEntityHelper),this.logger=o.container.resolve(a.LoggingFacade)}isPreconditionCheckNeeded(e){return e===this.legalEntityHelper.getMainLegalEntity()&&this.isConsentActivated()}throwErrorIfPreconditionNotMet(e,t){if(this.isPreconditionCheckNeeded(t)&&e){const e=new Error("Terms and conditions are not accepted by user");throw this.logger.error(e.message),e}}isConsentActivated(){var e,t;return!0!==(null===(t=null===(e=this.serviceConfigProvider.configs.consent)||void 0===e?void 0:e.customConfig)||void 0===t?void 0:t.deactivated)}};c=n([o.injectable(),i("design:paramtypes",[])],c),t.PreconditionVerifier=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GfaAuthServiceEventV1=void 0,function(e){e.LOGIN="login",e.SAVE_STATE="saveState",e.LOGOUT="logout"}(t.GfaAuthServiceEventV1||(t.GfaAuthServiceEventV1={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStore=void 0;const n=r(75),i=r(76);t.FilterStore=class{constructor(e,t){if(this.history=e,this.logger=t,this.listeners=new Set,e.location.search)this.filters=n.createFiltersFromSearchParams(e.location.search),this.writeSearchParamsToStorage(e.location.search);else{const e=this.readSearchParamsFromStorage();this.filters=n.createFiltersFromSearchParams(e)}}get(){return this.filters}update(e){const t=i.reduceFilters(this.filters,e);if(t!==this.filters){this.filters=t;for(const t of this.listeners)t(e);const r=n.createSearchParamsForFilters(this.filters);this.listeners.size>0&&this.history.replace({search:r}),this.writeSearchParamsToStorage(r)}}listen(e){if(0===this.listeners.size&&!this.history.location.search){const e=this.readSearchParamsFromStorage();e&&this.history.replace({search:e})}return this.listeners.add(e),()=>this.listeners.delete(e)}readSearchParamsFromStorage(){if("undefined"==typeof window)return"";try{return window.sessionStorage.getItem("filter-service:search-params")||""}catch(e){return this.logger.error(e),""}}writeSearchParamsToStorage(e){if("undefined"!=typeof window)try{window.sessionStorage.setItem("filter-service:search-params",e)}catch(e){this.logger.error(e)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFiltersFromSearchParams=t.createSearchParamsForFilters=void 0,t.createSearchParamsForFilters=function(e){const t=new URLSearchParams;for(const[r,n]of Object.entries(e))if("boolean"==typeof n)n&&t.append(r,"true");else if(n.length>0)for(const e of n)t.append(r,e);return t.toString()},t.createFiltersFromSearchParams=function(e){const t=new URLSearchParams(e);return{bodyType:t.getAll("bodyType"),engineType:t.getAll("engineType"),gearType:t.getAll("gearType"),customerGroup:t.getAll("customerGroup"),numberOfSeats:t.getAll("numberOfSeats"),maxGrossWeight:t.getAll("maxGrossWeight"),loadLength:t.getAll("loadLength"),loadHeight:t.getAll("loadHeight"),loadWidth:t.getAll("loadWidth"),fastLane:"true"===t.get("fastLane")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduceFilters=void 0,t.reduceFilters=function e(t,r){switch(r.type){case"add":return t[r.filterType].includes(r.value)?t:Object.assign(Object.assign({},t),{[r.filterType]:[...t[r.filterType],r.value]});case"remove":return t[r.filterType].includes(r.value)?Object.assign(Object.assign({},t),{[r.filterType]:t[r.filterType].filter(e=>e!==r.value)}):t;case"toggleOn":return t[r.filterType]?t:Object.assign(Object.assign({},t),{[r.filterType]:!0});case"toggleOff":return t[r.filterType]?Object.assign(Object.assign({},t),{[r.filterType]:!1}):t;case"reset":if(!r.filters)return{bodyType:[],engineType:[],gearType:[],customerGroup:[],numberOfSeats:[],maxGrossWeight:[],loadLength:[],loadHeight:[],loadWidth:[],fastLane:!1};let n=t;for(const[i,o]of Object.entries(r.filters))if(i in t)if("boolean"==typeof o)n=e(n,{type:"toggleOff",consumerId:r.consumerId,filterType:i});else if(o)for(const t of o)n=e(n,{type:"remove",consumerId:r.consumerId,filterType:i,value:t});return n}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isV1FilterType=t.v1FilterTypes=void 0,t.v1FilterTypes=["bodyType","engineType","gearType"],t.isV1FilterType=function(e){return t.v1FilterTypes.includes(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompareFeatureServiceV1Impl=void 0;t.CompareFeatureServiceV1Impl=class{constructor(e){this.delegate=e}get(){return this.delegate.getConfigurations()}add(e){this.delegate.addConfiguration(e)}set(e){this.delegate.setConfigurations(e)}remove(e){this.delegate.removeConfiguration(e)}listen(e){return this.delegate.listen(t=>{switch(t.type){case"addConfiguration":e({type:"add",configuration:t.configuration});break;case"removeConfiguration":e({type:"remove",configuration:t.configuration});break;case"setConfigurations":e({type:"set",configurations:t.configurations})}})}createCompareNavigation(e,t){return this.delegate.createCompareNavigation(e,t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompareFeatureServiceV2Impl=void 0;t.CompareFeatureServiceV2Impl=class{constructor(e,t){this.navigationService=e,this.logger=t,this.listeners=new Set,this.configurations=this.readConfigurationsFromSessionStorage(),this.idCount=this.configurations.reduce((e,{id:t})=>Math.max(e,parseInt(t,10)+1),0)}getConfigurations(){return this.configurations}addConfiguration(e){const t=this.createIdentifiableConfiguration(e);this.configurations=[...this.configurations,t],this.notifyListeners({type:"addConfiguration",configuration:t}),this.writeConfigurationsToSessionStorage(this.configurations)}setConfigurations(e){this.configurations=e.map(e=>this.createIdentifiableConfiguration(e)),this.notifyListeners({type:"setConfigurations",configurations:this.configurations}),this.writeConfigurationsToSessionStorage(this.configurations)}removeConfiguration(e){const t=this.configurations.find(t=>t.id===e);t&&(this.configurations=this.configurations.filter(e=>e!==t),this.notifyListeners({type:"removeConfiguration",configuration:t}),this.writeConfigurationsToSessionStorage(this.configurations))}setSelectedEngine(e,t){const r=this.configurations.find(t=>t.id===e);if(!r||r.engineKey&&(n=r.engineKey,i=t,n.modelId===i.modelId&&n.modelVersion===i.modelVersion&&n.modelYear===i.modelYear))return;var n,i;const o=Object.assign(Object.assign({},r),{engineKey:t});this.configurations=this.configurations.map(t=>t.id===e?o:t),this.notifyListeners({type:"setSelectedEngine",configuration:o}),this.writeConfigurationsToSessionStorage(this.configurations)}listen(e){return this.listeners.add(e),()=>this.listeners.delete(e)}createCompareNavigation(e,t){const r=new URLSearchParams;e.length>0&&r.set("configurations",JSON.stringify(e));const{pageId:n,featureAppName:i}=t,o=this.navigationService.navigateTo(n,{[i]:{pathname:"/",search:r.toString()}});if(o)return{href:o.createHref(),onClick:()=>o.push()}}notifyListeners(e){for(const t of this.listeners)t(e)}writeConfigurationsToSessionStorage(e){if("undefined"!=typeof window)try{window.sessionStorage.setItem("compare-configurations",JSON.stringify(e))}catch(e){this.logger.error(e)}}readConfigurationsFromSessionStorage(){if("undefined"==typeof window)return[];try{const e=window.sessionStorage.getItem("compare-configurations");return e?JSON.parse(e):[]}catch(e){return this.logger.error(e),[]}}createIdentifiableConfiguration(e){return Object.assign(Object.assign({},e),{id:""+this.idCount++})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeToStorage=t.readFromStorage=void 0;t.readFromStorage=function(e){if("undefined"!=typeof window)try{const e=window.localStorage.getItem("price-preferences-provider:price-type");if(!e)return;if(!function(e){return["priceType1","priceType2"].includes(e)}(e))throw new Error(e+" is not a valid price type.");return e}catch(t){return void e.error(t)}},t.writeToStorage=function(e,t){if("undefined"!=typeof window)try{window.localStorage.setItem("price-preferences-provider:price-type",e)}catch(e){t.error(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFinancingProviderConfig=void 0;const n=r(5),i=r(87),o=r(88);async function s(e){return new Promise((t,r)=>{const n=document.createElement("script");n.src=e,n.onload=()=>t(),n.onerror=r,document.head.appendChild(n)})}async function a(e){return new Promise((t,r)=>{const n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e,n.onload=()=>t(),n.onerror=r,document.head.appendChild(n)})}t.fetchFinancingProviderConfig=async function(e){const{logger:t,mockIds:r,mocksServerConfig:c,serviceConfigs:u}=e,f=n.createFetchJson({applicationName:"financing-provider-service",logger:t});f.injectMockConfig({mockIds:r,mocksServerConfig:c});const l=i.createAcsServiceConfig(u.acs);if(l)try{const e=await o.fetchAcsConfig(l,f);if(!e)return void t.info("No ACS found for Financing Provider.");const{scriptUrl:r,stylesUrl:n}=e;return r?(await Promise.all([s(r),n?a(n):void 0]),e):void t.info("No Financing Provider script found in ACS.")}catch(e){return void t.error(e)}else t.info("No Financing Provider Service Config for ACS found.")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAcsServiceConfig=void 0,t.createAcsServiceConfig=function(e){var t;if(!e)return;const r=null===(t=e.customConfig)||void 0===t?void 0:t.financingProviderTenant;return r?{origin:e.urlOrigin,path:e.urlPath,auth:e.credentials,tenant:r}:void 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAcsConfig=void 0;const n=(e,t)=>t?t.endsWith("/")?t+e:t+"/"+e:e;t.fetchAcsConfig=async function(e,t){const{path:r,tenant:i}=e,o="FINANCING_PROVIDER_SERVICE:"+i,s=Object.assign(Object.assign({},e),{path:n(o,r)}),a=await t(s,"acs",{searchParams:new URLSearchParams({inherit:"true"})});return null==a?void 0:a.items}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(91),t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";r.r(t),r.d(t,"definitions",(function(){return _}));class n{constructor(){this.data=new Map,this.listeners=new Map}getData(e){const t=e||"default-appointment-store";return this.data.get(t)}setData(e,t){this.data.set(e,t),this.fireListeners(e)}subscribe(e,t){const r=this.getConsumerListeners(e);r.add(t),this.listeners.set(e,r)}unsubscribe(e,t){this.getConsumerListeners(e).delete(t)}getConsumerListeners(e){var t;return null!==(t=this.listeners.get(e))&&void 0!==t?t:new Set}fireListeners(e){const t=this.data.get(e);return this.getConsumerListeners(e).forEach(e=>e(t))}}class i{constructor(){this.selectedDealerData=null,this.listeners=[]}getSelectedDealer(){return this.selectedDealerData}setSelectedDealer(e){this.selectedDealerData!==e&&(this.selectedDealerData=e,this.listeners.forEach(t=>t(e)))}registerOnSelectedDealerChange(e){this.listeners.push(e)}}var o=r(23);class s{constructor(e){this.observer=e}subscribe(e){return this.observer.subscribe(e)}update(e){this.observer.update(e)}get(){return this.observer.value}}var a,c=r(24),u=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(){function e(){this.eventEmitter=new c.EventEmitter}return e.prototype.subscribe=function(e){var t=this;return this.eventEmitter.addListener("update",e),{unsubscribe:function(){return t.eventEmitter.removeListener("update",e)}}},e.prototype.updateInternal=function(e){this.eventEmitter.emit("update",e)},e}();!function(e){function t(t){var r=e.call(this)||this;return r.value=t,r}u(t,e),t.prototype.update=function(e){this.value=e,this.updateInternal()}}(f);class l extends f{constructor(e){super(),this.value=e}update(e){this.value=e,this.updateInternal(e)}}const d={};var h=r(4);class p{constructor(e,t){this._consumerUid="",this._configuratorUid="",this._carConfiguratorConfig={},this._navigation=e,this._configProvider=t}shareItemWithCart({config:e,type:t,tenant:r}){var n,i,o,s;console.log("Vehicle configuration="+JSON.stringify(e)+", type="+t+", tenant="+r),this.setCartItem({config:e,type:t,tenant:r});const a=null===(i=null===(n=this._configProvider)||void 0===n?void 0:n.configs)||void 0===i?void 0:i.osoh,c=null==a?void 0:a.customConfig;console.info("Getting service-configs / osoh:",a);let u="os:checkout";if("object"==typeof c){console.info("Consuming routes from configuration service provider");const e=c,t=null==e?void 0:e.routes;u=null!==(s=null!==(o=null==t?void 0:t[this._consumerUid])&&void 0!==o?o:null==t?void 0:t.default)&&void 0!==s?s:u}console.info("Feature App ID is "+this._consumerUid),console.info("Navigating to "+u);const f=this._navigation.navigateTo(u,{},"");null==f||f.push()}getCartItem(e){var t;const r=e||this._configuratorUid;return null!==(t=this._carConfiguratorConfig[r])&&void 0!==t?t:{}}setCartItem(e){const t=this._consumerUid;e&&t&&(this._configuratorUid=t,this._carConfiguratorConfig[t]=e)}set consumerUid(e){this._consumerUid=e}}var g={id:"oneshop:share-cart-item-service",dependencies:{featureServices:{"navigation-service":"^1.0.0","service-config-provider":"^1.0.0"}},create:({featureServices:e})=>{const t=e["navigation-service"],r=e["service-config-provider"],n=new p(t,r);return{"1.0.0":e=>(n.consumerUid=e,{featureService:{shareCartItemService:n}})}}},v=r(25),y=r(26);class m{constructor(){this.listeners=new Map,this.storage=new Map,this.connectorStorage=new Map}getConnector(e){return this.connectorStorage.get(e)}registerConnector(e,t){this.connectorStorage.set(e,t)}unregisterConnector(e){this.connectorStorage.delete(e)}getStepData(e,t){return this.getOrCreateEntry(e).get(t)}getFormData(e){return this.getOrCreateEntry(e)}clearFormData(e){this.storage.delete(e)}setStepData(e,t,r){var n;const i=this.getOrCreateEntry(e);if(i.get(t)!==r){i.set(t,r);const o={formId:e,formStepId:t,data:r};null===(n=this.listeners.get(e))||void 0===n||n.forEach(e=>e(o))}}subscribeForm(e,t){const r=this.listeners.get(e)||new Set;return this.listeners.set(e,r.add(t)),function(){r.delete(t)}}getOrCreateEntry(e){let t=this.storage.get(e);return t||(t=new Map,this.storage.set(e,t)),t}}var w=r(27),b=r(28);const _=[{id:"appointment-selector-service",create:()=>{const e=new n;return{"1.0.0":()=>({featureService:e})}}},Object(o.defineUserLocationManager)(),{id:"financial-data",dependencies:{featureServices:d},create(){const e=new l(void 0);return{"1.0.1":()=>({featureService:new s(e)})}}},{id:"forms-service",create:()=>{const e=new m;return{"1.1.0":()=>({featureService:e})}}},{id:"dealer-search-service",create:()=>{const e=new i;return{"1.0.0":()=>({featureService:e})}}},g,Object(h.defineAuthService)(),Object(h.defineGfaAuthService)(),v.filterServiceDefinition,y.compareFeatureServiceDefinition,w.pricePreferencesProviderDefinition,Object(b.defineFinancingProviderService)()]},function(e,t,r){"use strict";r.r(t),r.d(t,"Mutex",(function(){return u})),r.d(t,"Semaphore",(function(){return c})),r.d(t,"withTimeout",(function(){return f})),r.d(t,"tryAcquire",(function(){return l})),r.d(t,"E_TIMEOUT",(function(){return o})),r.d(t,"E_ALREADY_LOCKED",(function(){return s})),r.d(t,"E_CANCELED",(function(){return a}));function n(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function i(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;Object.create;var o=new Error("timeout while waiting for mutex to become available"),s=new Error("mutex already locked"),a=new Error("request for lock canceled"),c=function(){function e(e,t){if(void 0===t&&(t=a),this._maxConcurrency=e,this._cancelError=t,this._queue=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),r=new Promise((function(t,r){return e._queue.push({resolve:t,reject:r})}));return t||this._dispatch(),r},e.prototype.runExclusive=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return i(this,(function(i){switch(i.label){case 0:return[4,this.acquire()];case 1:t=i.sent(),r=t[0],n=t[1],i.label=2;case 2:return i.trys.push([2,,4,5]),[4,e(r)];case 3:return[2,i.sent()];case 4:return n(),[7];case 5:return[2]}}))}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},e.prototype.cancel=function(){var e=this;this._queue.forEach((function(t){return t.reject(e._cancelError)})),this._queue=[]},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var r=!1;this._currentReleaser=function(){r||(r=!0,e._value++,e._dispatch())},t.resolve([this._value--,this._currentReleaser])}},e}(),u=function(){function e(e){this._semaphore=new c(1,e)}return e.prototype.acquire=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=t.sent(),[2,e[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}();function f(e,t,r){var s=this;return void 0===r&&(r=o),{acquire:function(){return new Promise((function(o,a){return n(s,void 0,void 0,(function(){var n,s,c,u;return i(this,(function(i){switch(i.label){case 0:n=!1,s=setTimeout((function(){n=!0,a(r)}),t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.acquire()];case 2:return c=i.sent(),n?(Array.isArray(c)?c[1]:c)():(clearTimeout(s),o(c)),[3,4];case 3:return u=i.sent(),n||(clearTimeout(s),a(u)),[3,4];case 4:return[2]}}))}))}))},runExclusive:function(e){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:t=function(){},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire()];case 2:return r=n.sent(),Array.isArray(r)?(t=r[1],[4,e(r[0])]):[3,4];case 3:return[2,n.sent()];case 4:return t=r,[4,e()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}}))}))},release:function(){e.release()},cancel:function(){return e.cancel()},isLocked:function(){return e.isLocked()}}}function l(e,t){return void 0===t&&(t=s),f(e,0,t)}}])}));