var AuthPopup=function(){var t=this;this.container=document.getElementById("ht-auth-popup"),this.show=function(){this.container.classList.add("active")},this.hide=function(){this.container.classList.remove("active")};var e=new function(){this.container=t.container.querySelector("#ht-auth-message"),this.text=function(t){return this.container.querySelector("p[data-message-text]").innerHTML=t,this},this.show=function(){return this.container.classList.add("active"),this.container.style.top=t.container.querySelector(".ha-container").scrollTop+"px",this},this.hide=function(){return this.container.classList.remove("active"),this},this.success=function(){return this.container.classList.remove("fail"),this.container.classList.add("success"),this},this.fail=function(){return this.container.classList.remove("success"),this.container.classList.add("fail"),this},this.reset=function(){return this.container.classList.remove("success"),this.container.classList.remove("fail"),this}},i=new function(){this.url={facebook:"/uyelik/facebook_login",twitter:"/uyelik/twitter_login",google:"/uyelik/google_login"};var t=window.screenX||window.screenLeft,e=window.screenY||window.screenTop,i=window.outerWidth||document.body.clientWidth,n=window.outerHeight||document.body.clientHeight,s=parseInt(t+(i-600)/2,10),o=parseInt(e+(n-600)/2.5,10),a="width=600,height=600,left="+s+",top="+o,r=location.protocol.concat("//").concat(window.location.hostname);this.facebook=function(){var t=window.open(this.url.facebook+"?referrer="+escape(r+"/statics/fbPopup"),"Login_by_facebook",a);t&&window.focus&&t.focus()},this.twitter=function(){var t=window.open(this.url.twitter+"?referrer="+escape(r+"/statics/fbPopup"),"Login_by_twitter",a);t&&window.focus&&t.focus()},this.google=function(){var t=window.open(this.url.google,"Login_by_google",a);t&&window.focus&&t.focus()}},n=this.container.querySelector("form[data-register-form]"),s=this.container.querySelector("form[data-login-form]"),o=this.container.querySelector("form[data-reset-form]"),a=new v("register",n),r=new v("login",s),c=new v("reset",o),u=this.container.querySelector("a[data-show-register]");u.addEventListener("click",function(t){t.preventDefault(),f(),this.classList.add("active"),a.show()});var d=this.container.querySelector("a[data-show-login]");d.addEventListener("click",function(t){t.preventDefault(),f(),this.classList.add("active"),r.show()});var l=this.container.querySelector("a[data-show-reset]");l.addEventListener("click",function(t){t.preventDefault(),f(),d.classList.add("active"),c.show()}),r.show(),d.classList.add("active"),this.container.querySelector("a[data-close-popup]").addEventListener("click",function(t){t.preventDefault(),f(),d.classList.add("active"),r.show(),this.hide()}.bind(this)),this.container.querySelector("a[data-close-reset]").addEventListener("click",function(t){t.preventDefault(),f(),r.show(),d.classList.add("active")}),this.container.querySelector("a[data-close-message]").addEventListener("click",function(t){t.preventDefault(),e.reset().hide()}),this.container.querySelector("button[data-register-submit]").addEventListener("click",function(t){t.preventDefault(),a.send()}),this.container.querySelector("button[data-login-submit]").addEventListener("click",function(t){t.preventDefault(),r.send()}),this.container.querySelector("button[data-reset-submit]").addEventListener("click",function(t){t.preventDefault(),c.send()}),this.container.querySelector("button[data-go-facebook]").addEventListener("click",function(t){t.preventDefault(),i.facebook()}),this.container.querySelector("button[data-go-twitter]").addEventListener("click",function(t){t.preventDefault(),i.twitter()});var h=this.container.querySelector("button[data-go-google]");function f(){a.reset(),u.classList.remove("active"),r.reset(),d.classList.remove("active"),c.reset(),l.classList.remove("active")}function v(t,i){this.name=t,this.container=i,this.show=function(){this.container.classList.add("active")},this.hide=function(){this.container.classList.remove("active")},this.reset=function(){this.container.reset(),this.hide()},this.response=function(t){var i=!1,n="Beklenmedik bir hata oluÅtu";void 0!==t&&(void 0!==t.status?i=!!t.status:void 0!==t.success&&(i=!!t.success),void 0!==t.statusText?n=String(t.statusText):void 0!==t.Infos&&(n=String(t.Infos.length?t.Infos[0]:""))),e.reset(),i?e.success():e.fail(),e.text(n).show(),i&&("login"===this.name&&(window.dataLayer&&window.dataLayer.push({event:"login"}),setTimeout(function(){window.location.reload()},5e3)),"register"===this.name&&window.dataLayer&&window.dataLayer.push({event:"registration"}))}}h&&h.addEventListener("click",function(t){t.preventDefault(),i.google()}),v.prototype.send=function(){var t=this,e=new XMLHttpRequest;e.open("POST",this.container.getAttribute("action"),!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==this.readyState&&(200==this.status?t.response(JSON.parse(this.responseText)):t.response())},e.send(this.serialize())},v.prototype.serialize=function(){for(var t=this.container.querySelectorAll("input"),e=[],i=0;i<t.length;i++){var n=t[i].getAttribute("name"),s=t[i].value;("checkbox"!=t[i].type||t[i].checked)&&(n&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(s)))}return e.join("&")}};