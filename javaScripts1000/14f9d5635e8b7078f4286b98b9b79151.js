define("components/sessionWarningModal",["FR","moment","services/freerideRestApi"],function(n,e,i){var o,t,s,a={closeModal:function(){n.$el.window.trigger("global-modal-close")},openModal:function(){setTimeout(function(){n.$el.window.trigger("global-modal-open",[o])},1e3)},startSessionWarning:function(){"true"===n.$el.body.attr("data-session-active")&&"logged in"===n.$el.body.attr("data-user-authentication-status")&&(t=e().add(parseInt(n.$el.body.attr("data-session-time"),10)-10,"m"),a.checkForSessionWarning())},checkForSessionWarning:function(){if(t){s&&clearTimeout(s);var n=e();n.isSame(t)||n.isAfter(t)?(t=void 0,a.openModal()):s=setTimeout(a.checkForSessionWarning,6e4)}},extendSession:function(){i.extendSession({},function(e){a.closeModal(),!0===e.success&&(n.$el.body.attr("data-session-time",e.data),a.startSessionWarning(),n.$el.window.trigger("session-extended"))})}},r={init:function(){o=$("#session_warning_template").html(),r.bindEvents(),a.startSessionWarning()},bindEvents:function(){n.$el.window.on("page-visibility-shown",a.checkForSessionWarning),n.$el.globalModal.on("click",".session_warning_modal__button",function(n){n.preventDefault(),a.extendSession()})}};$(function(){return r.init()})});
//# sourceMappingURL=sessionWarningModal.js.map
