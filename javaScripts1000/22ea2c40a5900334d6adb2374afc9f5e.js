/*! For license information please see 3.25b3612b.chunk.js.LICENSE.txt */
(this.clientJsonpCallback=this.clientJsonpCallback||[]).push([[3],{109:function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return r}));var r={baseUrl:"http://localhost:5002",eventPublishingEnabled:!1,retryInterval:15e3}},110:function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return r}));var r={baseUrl:"/g/traveller-auth-service",eventPublishingEnabled:!0,retryInterval:15e3}},124:function(e,t,n){"use strict";n.r(t);var r=n(93),i=n(109),a=n(110);describe("getConfig",(function(){it("should throw error when no env specified",(function(){expect((function(){return Object(r.default)({})})).toThrow()})),it("should return production config when specified",(function(){var e=Object(r.default)("production");expect(e).toEqual(a.config)})),it("should return development config when specified",(function(){var e=Object(r.default)("development");expect(e).toEqual(i.config)}))})),describe("getEnvFromUrl",(function(){it("returns development when running on local domain",(function(){expect(Object(r.getEnvFromUrl)({location:{protocol:"http",hostname:"localhost"}})).toEqual("development")})),it("returns production when not running on local domain",(function(){expect(Object(r.getEnvFromUrl)({location:{protocol:"https",hostname:"www.skyscanner.net"}})).toEqual("production")}))}))},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(128),i=n(7),a=n(4),s=n.n(a),o=n(5),u=n(61),c=n(62),l=n(13),f=n(157),d=n(219),p=n(222),h=n(1),v=function(){var e=new f.a("device_guid"),t=e.getValue();if(!t){var n=Object(l.v4)();return e.setValue(n),e.store(730),n}return t},b={search_guid:["searchresultpage_guid","searchresultoption_guid","bookingpaneloption_guid","miniredirect_guid"],searchresultpage_guid:["searchresultoption_guid","bookingpaneloption_guid","miniredirect_guid"],searchresultoption_guid:["bookingpaneloption_guid","miniredirect_guid"],bookingpaneloption_guid:["miniredirect_guid"],miniredirect_guid:[]},g=function(e){var t=e.messageGuid;return void 0===t||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(t)},y=function(e){return"".concat(e.split(".").pop().toLowerCase(),"_guid")},m=function(e){return"".concat(e.split(".").pop().toLowerCase,"_checksum")},_=function(e,t,n){e.trySetValue(t,n,!1,!0),(b[t]||[]).forEach((function(t){e.tryDeleteValue(t)}))},k=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Object(u.a)(this,e),!r)throw new Error("A schema must be provided");if(!t)throw new Error("A namespaced store must be provided");this.$window=h.a.getWindow(),this.store=t,this.fallbackStore=n,this.schema=r,this.message=null,this.opts=i}return Object(c.a)(e,[{key:"getSeqNumber",value:function(){var e=(this.store.tryGetValue("sequence_num")||0)+1;return this.store.trySetValue("sequence_num",e),e}},{key:"buildHeader",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)();case 2:return n=e.sent,null==(r=this.store.tryGetValue(y("clients.UserPreferences"),!1,!0))&&(r=this.fallbackStore.tryGetValue(y("clients.UserPreferences"),!1,!0)),e.abrupt("return",{header:{guid:t,client_timestamp:Object(p.b)(new Date(Date.now()),!0),traveller_identity:{utid:Object(d.a)(),authentication_status:n?"AUTHENTICATED":"UNAUTHENTICATED"},sequence_number:this.getSeqNumber(),device_guid:v(),experiment_allocation_id:new f.a("experiment_allocation_id").getValue(),user_agent:this.$window.navigator?this.$window.navigator.userAgent:"UNKNOWN",user_preferences_guid:r}});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createAndStoreGuid",value:function(){var e=this.opts.messageGuid||Object(l.v4)(),t=y(this.schema);return!1!==this.opts.store_guid&&_(this.store,t,e),e}},{key:"buildMessage",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createAndStoreGuid(),e.next=3,this.buildHeader(n);case 3:return r=e.sent,a=Object(i.a)(Object(i.a)({},r),t),this.message=a,e.abrupt("return",this.message);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){return this.message}}]),e}(),O=n(63),w=n(64),E=n(3),S=function(){return new Date};var j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.a.ERROR_LEVEL.ERROR;E.a.logError({component:"saddlebag-user-tracking-events",message:e,level:n,event:t})},T=function(){function e(t,n){Object(u.a)(this,e),this.grapplerLogger=new p.a(t,n,{enhance:!1}),this.store=new r.a("eventstracking"),this.fallbackStore=new r.a("funnelevents")}return Object(c.a)(e,[{key:"trackEvent",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n,r){var i,a,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.length>3&&void 0!==o[3]?o[3]:{},"object"===typeof r){e.next=3;break}throw new Error("message should be an Object");case 3:if(g(i)){e.next=5;break}throw new Error("The specified guid is invalid. It must conform to ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");case 5:return e.prev=5,a=new k(this.store,this.fallbackStore,n,i),e.next=9,a.buildMessage(r);case 9:return this.grapplerLogger.sendCustomEvent(t,n,a.get()).catch((function(e){return j(String(e),n,E.a.ERROR_LEVEL.WARN)})),e.abrupt("return",{guid:a.get().header.guid});case 13:e.prev=13,e.t0=e.catch(5),j(e.t0.message,n);case 16:return e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"trackBatchEvent",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n,r){var a,o,u,c=this,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>3&&void 0!==l[3]?l[3]:{},g(a)){e.next=3;break}throw new Error("The specified guid is invalid. It must conform to ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");case 3:return e.prev=3,o=r.map((function(e,t){if("object"!==typeof e)throw new Error("message should be an Object");return new k(c.store,c.fallbackStore,n,Object(i.a)(Object(i.a)({},a),{},{store_guid:a.store_guid===t})).buildMessage(e)})),e.next=7,Promise.all(o);case 7:return u=e.sent,this.grapplerLogger.sendCustomEvents(t,n,u).catch((function(e){return j(String(e),n,E.a.ERROR_LEVEL.WARN)})),e.abrupt("return",u.map((function(e){return{guid:e.header.guid}})));case 12:e.prev=12,e.t0=e.catch(3),j(e.t0.message,n);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"eventHasBeenLogged",value:function(e,t){var n=this.store.tryGetValue(m(e));if(!n)return!1;var r=JSON.parse(n);return!(r.logged_at<=S().getTime()-18e5)&&(delete r.logged_at,JSON.stringify(t)===JSON.stringify(r))}},{key:"markEventAsLogged",value:function(e,t){var n=Object(i.a)({logged_at:S().getTime()},t);this.store.trySetValue(m(e),JSON.stringify(n))}}]),e}(),x=function(e){Object(O.a)(n,e);var t=Object(w.a)(n);function n(e,r){var i;return Object(u.a)(this,n),(i=t.call(this,e,r)).eventName="funnel_events",i}return Object(c.a)(n,[{key:"track",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.abrupt("return",this.trackEvent(this.eventName,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trackBatch",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.abrupt("return",this.trackBatchEvent(this.eventName,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(T)},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(61),i=n(62),a=n(1),s=function(){function e(t){Object(r.a)(this,e),this.DEFAULT_COOKIE_NAME="storageFallback",this.COOKIE_EXPIRY_VALUE=7776e6,this.sessionOnly=t,this.$document=a.a.getDocument()}return Object(i.a)(e,[{key:"getRawCookie",value:function(e){var t=this.$document.cookie.split(";").filter((function(t){return 0===t.trim().indexOf(e)}));if(!t.length)return{};var n=t[0].split("=");return 2!==n.length?null:JSON.parse(n[1])}},{key:"setRawCookie",value:function(e,t,n,r){var i="".concat(e,"=").concat(t);if(!n){var a=r;a||(a=new Date).setTime(a.getTime()+this.COOKIE_EXPIRY_VALUE),i+="; expires=".concat(a.toUTCString())}return this.$document.cookie=i,this.$document.cookie}},{key:"getItem",value:function(e){var t=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return t?JSON.stringify(t[e]):null}},{key:"setItem",value:function(e,t){var n=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return n?(n[e]=JSON.parse(t),this.setRawCookie(this.DEFAULT_COOKIE_NAME,JSON.stringify(n),this.sessionOnly)):null}},{key:"createOrUpdateCookie",value:function(e,t,n){return this.setRawCookie(e,t,!1,n)}}]),e}(),o="__initTest__",u="__initValue",c=function(){function e(t){Object(r.a)(this,e),this.namespace=t,this.browserStorage=null}return Object(i.a)(e,[{key:"getBrowserStorage",value:function(e,t){var n=function(){try{var e=a.a.getWindow(),t=e.localStorage,n=e.sessionStorage;t.setItem(o,u),n.setItem(o,u)}catch(r){return!1}return!0}(),r=a.a.getWindow();return this.browserStorage=n?t?r.sessionStorage:r.localStorage:e?new s(t):null,this.browserStorage}},{key:"tryGetValue",value:function(e,t,n){var r=this.getBrowserStorage(t,n);if(!r)return null;var i=r.getItem(this.namespace);if(!i)return null;if(i=JSON.parse(i),null==e)return i;for(var a=e.split("."),s=i,o=0;o<a.length;o+=1){if("undefined"===typeof(s=s[a[o]]))return null;if(o+1===a.length)return s}return null}},{key:"trySetValue",value:function(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.getBrowserStorage(n,r);if(!s)return null;try{i=(i=s.getItem(this.namespace))?JSON.parse(i):{}}catch(f){return!1}for(var o=e.split("."),u=i,c=0;c<o.length;c+=1){var l=o[c];if(!(l in u)){if(a)return!1;u[l]={}}if(c+1===o.length){a?delete u[l]:u[l]=t;try{return s.setItem(this.namespace,JSON.stringify(i)),!0}catch(f){return!1}}u=u[l]}return!1}},{key:"tryDeleteValue",value:function(e,t,n){return this.trySetValue(e,null,t,n,!0)}}]),e}()},129:function(e,t,n){"use strict";var r=n(60),i=n(58),a=n.n(i),s=n(65),o=n(266),u=n.n(o),c=["children","className","href","padded","blank","atomic"],l=Object(s.a)(u.a),f=function(e){var t=e.children,n=e.className,i=e.href,s=e.padded,o=e.blank,u=e.atomic,f=Object(r.a)(e,c),d=[l("bpk-card")];s&&d.push(l("bpk-card--padded")),n&&d.push(n);var p=d.join(" "),h={};if(i){var v={};return o&&(v={target:"_blank",rel:"noopener noreferrer"}),u||(h.tabIndex=-1,h.role="group"),a.a.createElement("a",Object.assign({href:i,className:p},h,v,f),t)}return u&&(h.tabIndex=0,h.role="button"),a.a.createElement("div",Object.assign({},h,{className:p},f),t)};f.defaultProps={className:null,href:null,padded:!0,blank:!1,atomic:!0};var d=f;t.a=d},155:function(e,t,n){"use strict";var r=n(61),i=n(62),a=n(6),s=n(1),o="grp/v1/custom/public/saddlebag-event-logger/FrontendEventMessage/generic.FrontendEventMessage",u=new(function(){function e(){Object(r.a)(this,e),this.$window=s.a.getWindow(),this.$window.__internal&&this.$window.__internal.EventTracker||(this.$window.__internal=this.$window.__internal||{},this.$window.__internal.EventTracker={maxEvents:10,sentEvents:0});var t=this.$window.__internal.EventTracker.maxEvents;this.maxEvents=t,Object(s.f)()?this.endpoint="".concat("/slipstream","/").concat(o):this.endpoint="".concat("https://slipstream.skyscanner.net","/").concat(o)}return Object(i.a)(e,[{key:"track",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!(this.$window.__internal.EventTracker.sentEvents>=this.maxEvents)){if(!e||!t)throw Error("EventTracker: name and component must be set, got '".concat(e,"' and '").concat(t,"' instead."));if("number"!==typeof i)throw Error("EventTracker: value must be a number, got '".concat(typeof i,"' instead."));var o=JSON.stringify({name:e,component:t,version:n,value:i,page_name:s||"not_set"}),u={method:"POST",headers:{"Content-Type":"application/json"},body:o};return this.$window.__internal.EventTracker.sentEvents+=1,Object(a.a)(this.endpoint,u).catch((function(e){console.error("".concat(e,". Request to ").concat(r.endpoint," failed. Request payload: ").concat(o,"."))}))}console.warn("EventTracker: Event ignored, maximum number of events (".concat(this.maxEvents,") already logged."))}}]),e}());t.a=function(e,t,n,r,i){u.track(e,t,n,r,i)}},156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COOKIES=t.KEY_VALUE_SEPARATOR=t.PAIR_SEPARATOR=t.COOKIE_SEPARATOR=void 0;t.COOKIE_SEPARATOR=";";t.PAIR_SEPARATOR="&";t.KEY_VALUE_SEPARATOR=":::";var r=Object.freeze({SCANNER:"scanner",CULTURE:"ssculture",AB:"ssab",AB_OVERRIDES:"ssaboverrides",AB_GROUP:"abgroup",TRAVELLER_CONTEXT:"traveller_context",ANONYMOUS_TOKEN:"__Secure-anon_token",ANONYMOUS_CSRF_TOKEN:"__Secure-anon_csrf_token",SID_TOKEN:"sid_token",SID_UTID:"sid_utid",SID_SESSION_TOKEN:"sid_session_token",GDPR:"gdpr",HAS_APP:"has_app",DEVICE_GUID:"device_guid",SECURE_SKA:"__Secure-ska",EXPERIMENT_ALLOCATION_ID:"experiment_allocation_id"});t.COOKIES=r},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(61),i=n(62),a=n(166),s=n.n(a),o=(n(1),n(258),function(e){return Number.isInteger?Number.isInteger(e):"number"===typeof e&&isFinite(e)&&Math.floor(e)===e});function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.path,a=void 0===i?"/":i,u=r.secure,c=void 0===u||u;if(null==n)s.a.set(e,t,{path:a,secure:c});else{if(!o(n))throw new Error("Expires parameter needs to be an integer.");s.a.set(e,t,{expires:n,path:a,secure:c})}}var c=function(){function e(t){Object(r.a)(this,e),this.name=t,this.cookieValue=s.a.get(t)}return Object(i.a)(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"setValue",value:function(e){return this.cookieValue=e,this}},{key:"store",value:function(e,t){return u(this.name,this.cookieValue,e,t),this}},{key:"storeByDate",value:function(e,t){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.path,a=void 0===i?"/":i,o=r.secure,u=void 0===o||o;if(!n||"object"!==typeof n||!n.toUTCString)throw new Error("Expiration date must be a Date.");s.a.set(e,t,{expires:n,path:a,secure:u})}(this.name,this.cookieValue,e,t),this}},{key:"remove",value:function(){s.a.remove(this.name)}}]),e}()},166:function(e,t,n){var r,i;!function(a){if(void 0===(i="function"===typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=a(),!!0){var s=window.Cookies,o=window.Cookies=a();o.noConflict=function(){return window.Cookies=s,o}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function a(t,n,a){if("undefined"!==typeof document){"number"===typeof(a=e({path:"/"},i.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(c){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var u in a)a[u]&&(o+="; "+u,!0!==a[u]&&(o+="="+a[u].split(";")[0]));return document.cookie=t+"="+n+o}}function s(e,n){if("undefined"!==typeof document){for(var i={},a=document.cookie?document.cookie.split("; "):[],s=0;s<a.length;s++){var o=a[s].split("="),u=o.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(o[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(l){}if(i[c]=u,e===c)break}catch(l){}}return e?i[e]:i}}return i.set=a,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){a(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},219:function(e,t,n){"use strict";function r(e){this.message=e}n.d(t,"b",(function(){return be})),n.d(t,"a",(function(){return ge})),r.prototype=new Error,r.prototype.name="InvalidCharacterError";"undefined"!=typeof window&&window.atob&&window.atob.bind(window);function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError";var a=n(4),s=n.n(a),o=n(5),u=n(61),c=n(62),l=n(155),f=n(256),d=function(){function e(t){Object(u.a)(this,e),this.eventPublishingEnabled=t}return Object(c.a)(e,[{key:"publishMetric",value:function(e){this.eventPublishingEnabled&&Object(l.a)(e,"login",f.version,1)}}]),e}(),p=n(128),h="csrfToken",v=function(){return new p.a("SID")},b=function(){function e(t,n){Object(u.a)(this,e),this.baseUrl=t,this.metricPublisher=n}return Object(c.a)(e,[{key:"validate",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.validateSession({body:{idleSeconds:t,clientTimeUtc:n},path:"tokens/validate"}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post({reason:t},"tokens/logout");case 2:if((n=e.sent).ok){e.next=6;break}throw this.metricPublisher.publishMetric("sid_logout_error"),new Error(n.statusText);case 6:return v().tryDeleteValue(h),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateSession",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,r=t.path,this.metricPublisher.publishMetric("sid_validate_session_attempt"),e.next=4,this.post(n,r);case 4:if((i=e.sent).ok){e.next=8;break}throw this.metricPublisher.publishMetric("sid_validate_session_error"),new Error(i.statusText);case 8:return e.next=10,i.json();case 10:return(a=e.sent).csrfToken&&(s=a.csrfToken,v().trySetValue(h,s,!1,!1)),this.metricPublisher.publishMetric("sid_validate_session_success"),e.abrupt("return",a);case 14:case"end":return e.stop()}var s}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,i,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"content-type":"application/json",accept:"application/json",pragma:"no-cache","cache-control":"no-cache"},cache:"no-store",credentials:"include",body:JSON.stringify(t)},i="".concat(this.baseUrl,"/").concat(n),e.next=4,fetch(i,r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),g=function(){return new Date};var y="sid_validation_status",m="sid_validation_reason",_=new p.a("SID"),k=function(){return g().getTime()},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return Math.floor(Math.random()*(t-e+1)+e)},w=function(e){return 1e3*e},E=function(e){var t=e.status,n=e.reason;_.trySetValue(y,t),_.trySetValue(m,n)},S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.events,r=void 0===n?["click","keydown","scroll","mousewheel","touchstart"]:n,i=t.namespace,a=void 0===i?"hyperdrive":i;if(this.localStorage=new p.a(a),this.events=r,this.started=!1,this.updateLocalStore=this.updateLocalStore.bind(this),this.clearLocalStore=this.clearLocalStore.bind(this),"undefined"===typeof window)throw new Error("window not available")}return Object(c.a)(e,[{key:"start",value:function(){this.started||(this.started=!0,this.updateLocalStore(),this.subscribe())}},{key:"stop",value:function(){this.started=!1,this.unsubscribe(),this.clearLocalStore()}},{key:"subscribe",value:function(){var e=this;this.events.forEach((function(t){return window.addEventListener(t,e.updateLocalStore,{passive:!0})}))}},{key:"unsubscribe",value:function(){var e=this;this.events.forEach((function(t){return window.removeEventListener(t,e.updateLocalStore,{passive:!0})}))}},{key:"updateLocalStore",value:function(){this.localStorage.trySetValue("sid-last-active",k(),!0,!1)}},{key:"clearLocalStore",value:function(){this.localStorage.tryDeleteValue("sid-last-active",!0,!1)}},{key:"getLastActivityTime",value:function(){return this.localStorage.tryGetValue("sid-last-active",!0,!1)||k()}},{key:"getIdleTimeMillis",value:function(){return k()-this.getLastActivityTime()}}]),e}(),j=n(93),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.retryInterval,r=void 0===n?1e4:n;this.retryInterval=r,this.timeouts={}}return Object(c.a)(e,[{key:"schedulePersistent",value:function(e,t){var n=t.accessTokenExpiry-k()+O();this.schedule(e,n)}},{key:"scheduleTemporary",value:function(e,t){var n=t.sessionExpiry,r=t.maxIdleSeconds,i=n-k(),a=Math.min(i,w(r))+O();this.schedule(e,a)}},{key:"scheduleRetry",value:function(e){this.schedule(e)}},{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.retryInterval;this.timeouts.validate&&clearTimeout(this.timeouts.validate),this.timeouts.validate=setTimeout(e,t)}},{key:"cancel",value:function(){var e=this;Object.keys(this.timeouts).forEach((function(t){clearTimeout(e.timeouts[t])}))}}]),e}(),x=n(2),A=n(7),P=n(222),N=n(9),C=function(e){return function(e){return null==e||void 0===e}(e)?"undefined":e.toString()},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return Object(A.a)(Object(A.a)({},t),{},Object(N.a)({},n,C(e[n])))}),{})},R=function(){function e(t){var n=t.authConsumer;Object(u.a)(this,e),this.grapplerLogger=new P.a("public","login"),this.authConsumer=n}return Object(c.a)(e,[{key:"publishEvent",value:function(e,t){try{var n=this.authConsumer,i=I(t);this.grapplerLogger.sendApplogMessage({message:e,severity:"INFO",fields:Object(A.a)({authConsumer:n,market:"unknown"},i)})}catch(r){}}},{key:"publishError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var i=this.authConsumer,a=t.name,s=t.message,o=t.stack,u=t.errorCode,c=I(n);this.grapplerLogger.sendApplogMessage({message:e,severity:"ERR",fields:Object(A.a)({authConsumer:i,market:"unknown"},c),exception:{type:a,traceback:o,message:s||u}})}catch(r){}}}]),e}(),D=n(126),M=function(){function e(t){var n=t.applogPublisher;Object(u.a)(this,e),this.applogPublisher=n}return Object(c.a)(e,[{key:"publishLogoutSuccess",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.utid,e.prev=1,r=new D.a("public","logout"),e.next=5,r.track("clients.AuthenticationStatusChange",{previous_traveller_identity:{utid:n,authentication_status:"AUTHENTICATED"}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.applogPublisher.publishError("Failed to send AuthenticationStatusChange funnel event",e.t0);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),V="Logout",L="Session Validation Error",U=function(){function e(t){var n=t.authConsumer;Object(u.a)(this,e),this.applogPublisher=new R({authConsumer:n}),this.trustedFunnelPublisher=new M({applogPublisher:this.applogPublisher}),this.authConsumer=n}return Object(c.a)(e,[{key:"publishLogoutSuccess",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,i,a,o,u,c=this,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:{},n=t.cause,r=t.utid,i=t.sessionType,a=t.platformId,o=t.reason,u="".concat(V," Succeeded"),this.swallowErrors(u,(function(){c.applogPublisher.publishEvent(u,{cause:n,utid:r,sessionType:i,platformId:a,reason:o}),x.a.publish("sid-logout-success",{cause:n}),c.trustedFunnelPublisher.publishLogoutSuccess({utid:r})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publishSessionValidationError",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,i,a=this,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.utid,r=t.authError,i=L,this.swallowErrors(i,(function(){a.applogPublisher.publishError(i,r,{utid:n}),x.a.publish("sid-session-validation-error",r.errorMessage)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"swallowErrors",value:function(e,t){try{t()}catch(r){this.applogPublisher.publishError("".concat(e," Event Publishing Error"),r)}}}]),e}(),$="sid_lock",J="TIMED_OUT",F="COMPLETED_BY_OTHER_TAB",K=function(){return parseInt(_.tryGetValue($),10)},B=function(){},q=function(){window.removeEventListener("storage",B)},Y=function(e){return new Promise((function(t){var n=setTimeout((function(){return t(J)}),e);q(),B=function(e){e.key===$&&null===e.newValue&&(clearTimeout(n),t(F))},window.addEventListener("storage",B)}))},G=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,i,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[K(),g().getTime()],n=t[0],r=t[1];case 1:if(!(r<n&&i!==F)){e.next=11;break}return a=n-r,e.next=5,Y(a);case 5:i=e.sent,o=[K(),g().getTime()],n=o[0],r=o[1],e.next=1;break;case 11:return q(),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=g().getTime();_.trySetValue($,e+5e3)},z=function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:if(e.sent===F){e.next=10;break}return H(),e.next=7,t();case 7:return n=e.sent,_.tryDeleteValue($),e.abrupt("return",n);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=n(157),Z="PERSISTENT",X="TEMPORARY",Q="MOBILE",ee="INVALID",te=function(e){return"https://skyscanner.net/".concat(e)},ne=function(){try{var e=new W.a("sid_session_token").getValue();if(!e)return{};var t=e.split(".")[1];return JSON.parse(window.atob(t))}catch(n){return{}}},re=function(){try{var e=ne(),t=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne())[te("sessionType")]}(e),n=new W.a("sid_utid").getValue();switch(t){case Z:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Z,accessTokenExpiry:e[te("accessTokenExpiry")],accessTokenExpiryDate:new Date(e[te("accessTokenExpiry")])})}(e);case X:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:X,maxIdleSeconds:e[te("maxIdleSeconds")],sessionExpiry:e[te("sessionExpiry")],sessionExpiryDate:new Date(e[te("sessionExpiry")])})}(e);case Q:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Q})}(e);default:return n?Object.freeze({sessionType:ee}):void 0}}catch(r){return}},ie=n(63),ae=n(64),se=n(230),oe=n(161);var ue=n(231);function ce(e,t,n){return(ce=Object(ue.a)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Object(oe.a)(i,n.prototype),i}).apply(null,arguments)}function le(e){var t="function"===typeof Map?new Map:void 0;return(le=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ce(e,arguments,Object(se.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(oe.a)(r,e)})(e)}var fe=function(e){Object(ie.a)(n,e);var t=Object(ae.a)(n);function n(e){var r,i=e.errorCode,a=e.errorMessage,s=e.traceback;return Object(u.a)(this,n),(r=t.call(this)).errorCode=i,r.errorMessage=a,r.traceback=s,r}return n}(le(Error)),de="session-inactive",pe="session-expired",he=function(){function e(){Object(u.a)(this,e);var t=Object(j.getEnvFromUrl)(),n=Object(j.default)(t),r=n.baseUrl,i=n.eventPublishingEnabled,a=n.retryInterval;this.metricPublisher=new d(i),this.validateSessionClient=new b(r,this.metricPublisher),this.activityTracker=new S,this.eventPublisher=new U({authConsumer:"session-validation"}),this.scheduler=new T({retryInterval:a}),this.validationErrorCounter={},this.checkPersistentSession=this.checkPersistentSession.bind(this),this.stop=this.stop.bind(this),this.restart=this.restart.bind(this),this.checkTempSession=this.checkTempSession.bind(this),this.publishSessionValidationError=this.publishSessionValidationError.bind(this)}return Object(c.a)(e,[{key:"getValidatedSession",value:function(){return this.promise||(this.promise=this.validateSession()),this.promise}},{key:"stop",value:function(){this.scheduler.cancel(),this.activityTracker.stop(),this.promise=void 0,this.session=void 0}},{key:"restart",value:function(){this.stop(),this.promise=this.validateSession()}},{key:"validateSession",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=re())||t.sessionType!==ee){e.next=5;break}return e.next=4,this.validateSessionClient.logout("session-invalid");case 4:return e.abrupt("return",void 0);case 5:if(this.session=t,!(this.session&&this.session.sessionType!==Q)){e.next=19;break}this.activityTracker.start(),e.t0=this.session.sessionType,e.next=e.t0===Z?12:e.t0===X?15:18;break;case 12:return e.next=14,this.checkPersistentSession();case 14:return e.abrupt("break",19);case 15:return e.next=17,this.checkTempSession();case 17:case 18:return e.abrupt("break",19);case 19:return e.abrupt("return",this.session);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleSessionValidation",value:function(e,t,n){var r,i=e.status,a=e.reason;switch(i){case"PERSISTENT_SESSION_REFRESHED":case"PERSISTENT_SESSION_EXTENDED":case"PERSISTENT_SESSION_NO_REFRESH":this.scheduler.schedulePersistent(this.checkPersistentSession,this.session);break;case"PERSISTENT_SESSION_LOGGED_OUT":r="inactive"===a?de:"session-logged-out",this._invalidateSession(r,t,n,a);break;default:this.stop()}}},{key:"_performRetry",value:function(e){var t=new fe({errorMessage:e.message,traceback:e.stack});this.publishSessionValidationError(e,t),this.scheduler.scheduleRetry(this.checkPersistentSession)}},{key:"_invalidateSession",value:function(e,t,n,r){this.eventPublisher.publishLogoutSuccess({cause:e,utid:t,sessionType:n,reason:r}),this.stop()}},{key:"publishSessionValidationError",value:function(e,t){var n=this.session.utid;this.validationErrorCounter[e.message]=this.validationErrorCounter[e.message]||0,this.validationErrorCounter[e.message]<5&&(this.validationErrorCounter[e.message]+=1,this.eventPublisher.publishSessionValidationError({utid:n,authError:t}))}},{key:"isSessionActive",value:function(){var e=w(this.session.maxIdleSeconds);return this.activityTracker.getIdleTimeMillis()<=e}},{key:"validatePersistentSession",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,i,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=this.activityTracker.getIdleTimeMillis(),t=u/1e3,n=k(),e.next=4,z(Object(o.a)(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.validateSessionClient.validate(t,n);case 2:return r=e.sent,E(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))));case 4:return r=e.sent,i=null===r,e.abrupt("return",i?{status:_.tryGetValue(y),reason:_.tryGetValue(m)}:r);case 7:case"end":return e.stop()}var u}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkPersistentSession",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.session,n=t.utid,r=t.accessTokenExpiry,!(k()>r)){e.next=11;break}return e.next=6,this.validatePersistentSession();case 6:i=e.sent,this.session=re(),this._handleSessionValidation(i,n),e.next=12;break;case 11:this.scheduler.schedulePersistent(this.checkPersistentSession,this.session);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this._performRetry(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkTempSession",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.session,n=t.utid,r=t.sessionExpiry,i=t.sessionType,!(k()>r)){e.next=8;break}return e.next=5,this.validateSessionClient.logout(pe);case 5:this._invalidateSession(pe,n,i),e.next=15;break;case 8:if(this.isSessionActive()){e.next=14;break}return e.next=11,this.validateSessionClient.logout(de);case 11:this._invalidateSession(de,n,i),e.next=15;break;case 14:this.scheduler.scheduleTemporary(this.checkTempSession,this.session);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ve=function(){var e=Object(o.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.SessionValidator||(window.SessionValidator=new he),t=window.SessionValidator,e.next=3,t.getValidatedSession();case 3:return n=e.sent,e.abrupt("return",void 0!==n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=(Object.freeze({UNSET:0,UNAUTHENTICATED:1,AUTHENTICATED:2}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,t=new Promise((function(t){setTimeout((function(){return t(!1)}),e)}));return Promise.race([ve(),t])}),ge=function(){var e=re();return e&&e.utid||new W.a("traveller_context").getValue()}},222:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return O}));var r=n(61),i=n(62),a=n(7),s=n(6),o=n(1);var u=function(e){return e.getTimezoneOffset()},c=n(257),l=n.n(c),f={EU_WEST_1:0,EU_CENTRAL_1:1,AP_SOUTHEAST_1:2,AP_NORTHEAST_1:3,UK1:64,UK2:65,NL1:66,SG1:67,HK1:68},d={MILLI:0,SECOND:1,DAY:2,WEEK:4,MONTH:5,YEAR:6,ANYTIME:7,MINUTE:8},p=o.a.getWindow(),h=function(e){return"".concat(e||"").trim()},v=function(e){if(!isFinite(e))return 0;for(var t=0,n=1,r=Math.pow(10,20);Math.round(e*n)/n!==e&&n<=r;){if(n>=r)return null;n*=10,t++}return t},b=function(e){var t=null,n=isNaN(+e)?null:parseFloat(e);if(n&&"number"===typeof n&&!isNaN(n)){if((t={precision:v(n),amount:parseInt("".concat(n).replace(".",""),10)}).amount.toString().length>=10){var r=t.amount.toString().length-10;t.precision-=r,t.amount=parseInt(t.amount.toString().substring(0,10),10)}2147483647-t.amount<0&&(t.precision-=1,t.amount=parseInt(t.amount.toString().substring(0,9),10))}return t},g=function e(t){if(!t)return t;var n=JSON.parse(l.a.stringify(t));return Object.keys(n).forEach((function(t){var r=n[t];(r&&(r.constructor===Object||r.constructor===Array)||"function"===typeof r)&&(n[t]=e(r)),function(e){return void 0===e||null===e||""===e||"object"===typeof e&&0===Object.keys(e).length||"number"===typeof e&&e!==+e}(r)&&delete n[t]})),Array.isArray(n)&&(n=n.filter(Boolean)),n},y=function(e,t,n){var r=null,i=0,a=function(e,t,n){var r=t,i=n,a=e||new Date,s=u(a),o=r&&u(r),c=i&&u(i);return{thisTZOffset:s,jan:r=o||u(new Date(a.getFullYear(),0,1)),jul:i=c||u(new Date(a.getFullYear(),6,1))}}(e,t,n),s=a.thisTZOffset,o=a.jan,c=a.jul;return o>c?(r=c,i=o-c):o<c&&(r=o,i=c-o),c!==o&&null!=r&&r===s?{DSTOffset:i,TZOffset:-1*s-i}:{DSTOffset:0,TZOffset:-1*s||0}},m=function(e){return isNaN(+e)?null:parseInt(e,10)},_=function(e){return e&&"unknown"===e.toString().toLowerCase()?null:e},k=function(e,t){if(!e)return null;if(e instanceof Date)return e;if("number"===typeof e)return new Date(e);if("string"===typeof e&&"YYYYMMDDHHmmss"===t)try{return new Date(e.slice(0,4),e.slice(4,6)-1,e.slice(6,8),e.slice(8,10),e.slice(10,12),e.slice(12,14))}catch(i){return null}if("string"===typeof e){var n,r=e.split(/[ZT:\\.\\//-]/);try{n=new Date(Date.UTC(r[0],r[1]-1||0,r[2]||1,r[3]||null,r[4]||null,r[5]||null))}catch(a){return null}return n instanceof Date&&!isNaN(n.valueOf())?n:null}return null},O=function(e,t,n,r){var i=n||null,a=e;"string"===typeof e&&e&&4===e.length&&e.substring(2,4)<=12&&(a="20".concat(e));var s=k(a,r);s&&"string"===typeof a&&!i&&(i=function(){switch(a.length){case 4:return"YEAR";case 6:case 7:return"MONTH";case 8:case 10:return"DAY";default:return"MILLI"}}()),s&&s instanceof Date&&!i&&(i="MILLI");var o={};if(s&&(o={unix_time_millis:s.getTime(),date_time_kind:d[i]}),s&&s instanceof Date&&t){var u=y(s);o.timezone_offset_mins=u.TZOffset||0,o.daylight_savings_offset_mins=u.DSTOffset||0}return o.unix_time_millis||o.date_time_kind?g(o):null},w=function(e){return _(e)?function(e){var t=/(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/gi;return e&&t.test(e)?e.match(t)[0]:null}(e):null},E=function(){var e=Object(o.e)(),t=e.width*e.width+e.height*e.height,n=Math.round(Math.sqrt(t)/72*10)/10,r=p.screen||{};return{usable_width:e.width,usable_height:e.height,display_width:r.width,display_height:r.height,display_ppi:r.pixelDepth,diag_in_inches:n,device_pixel_ratio:p.device_pixel_ratio||null}},S=function(e,t){var n,r=e||{},i=r.utid,a=r.authState,s=r.preferences,o=r.ssTrack,u=r.gaCookie,c=r.screen,l=r.nav,d=r.nodeName,p=r.scaffoldVersion,v=r.componentContext,y=r.config,k=r.guid,S={};try{S.produced_by=2,S.producer_version=p,S.service_instance_fingerprint=function(e){var t=e.version,n=e.nodeName,r=e.identifier,i=e.version_identifier,a=n&&n.length>=8?n.substring(5,8):null,s=e.dc;return g({data_center:void 0===s?f[a]:s,name:n,version_tag:t,version_identifier:i,identifier:r})}({version:p,nodeName:d}),S.traveller_identity=function(e,t,n,r,i){var a=!1;-1===[2,1,0].indexOf(Number(t))&&(a=!0);var s=/.+\..+\.(.+.\..+)$/.exec(i),o={utid:e,user_status:a?"0":t.toString(),authentication_status:m(t),preference_string:h(n),sstrack:r,ga_cid:s&&s.length>1?s[1]:null};return g(o)}(i,a,s,o,u),S.client_details=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.navigator,r={user_agent:n.userAgent,vendor_name:n.vendor,browser_name:_(e.browserName)||n.appName,browser_version:_(e.browserVersion)||n.appVersion,is_browser:_(e.desktop),display_height:m(t.display_height),display_width:m(t.display_width),display_ppi:m(t.display_ppi),usable_display_width:m(t.usable_width),usable_display_height:m(t.usable_height),diagonal_screen_size_int:b(t.diag_in_inches),device_pixel_ratio_int:b(t.device_pixel_ratio)||null,ip_address:w(e.ipAddress),is_mobilephone:_(e.mobile),is_tablet:_(e.tablet),os_version:_(e.osVersion)};return document.referrer&&(r.referrer_url=document.referrer),g(r)}(v,c,l),S.traveller_culture_settings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g({country:e.market,currency:e.currency,locale:e.locale})}(v),S.ab_tests=g(y&&y.featureTests||null),S.created_on=O(new Date(Date.now()),!0),S.associate_id=(n=v&&v.associateId||null,_(n)?function(e){var t=/([a-z]{3}[_][a-z]{3}[_][0-9]{5}[_][0-9]{5})/i;return e&&t.test(e)?e.match(t)[0].toUpperCase():"DIR_ECT_00000_00000"}(n):null),S.guid=k||function(){for(var e=[],t=0;t<36;)e[t]=Math.floor(16*Math.random()),t+=1;e[14]=4,e[19]=3&e[19]|8;for(var n=0;n<36;)e[n]="0123456789abcdef"[e[n]],n+=1;return e[8]=e[13]=e[18]=e[23]="-",e.join("")}()}catch(j){if(!t)throw j}return S},j="https://slipstream.skyscanner.net",T="/slipstream",x=function(e,t,n){var r;if(n){var i=Object(a.a)(Object(a.a)({},t),{},{event_header:S()});r=JSON.stringify(i)}else r=JSON.stringify(t);return Object(s.a)(e,{method:"POST",body:r,headers:{"Content-Type":"application/json"}}).catch((function(t){console.error("".concat(t,". Request to ").concat(e," failed. Request payload: ").concat(r,"."))}))},A=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.enhance,s=void 0===a||a;if(Object(r.a)(this,e),"public"!==t&&"public-sandbox"!==t)throw new Error('GrapplerLogger environment must be "public" or "public-sandbox"');this.env=t,this.serviceName=n,this.enhance=s,this.endpoint=Object(o.f)()?T:j}return Object(i.a)(e,[{key:"sendApplogMessage",value:function(e){var t="".concat(this.endpoint,"/grp/v1/applog/").concat(this.env,"/").concat(this.serviceName);return x(t,e,this.enhance)}},{key:"sendCustomEvent",value:function(e,t,n){var r="".concat(this.endpoint,"/grp/v1/custom/").concat(this.env,"/").concat(this.serviceName,"/").concat(e,"/").concat(t);return x(r,n,this.enhance)}},{key:"sendCustomEvents",value:function(e,t,n){return function(e,t,n){var r=t.reduce((function(e,t){return e+(n?JSON.stringify(Object(a.a)(Object(a.a)({},t),{},{event_header:S()})):JSON.stringify(t))}),"");return Object(s.a)(e,{method:"POST",body:r,headers:{"Content-Type":"application/json"}}).catch((function(t){console.error("".concat(t,". Request to ").concat(e," failed. Request payload: ").concat(r,"."))}))}("".concat(this.endpoint,"/grp/v1/custom/").concat(this.env,"/").concat(this.serviceName,"/").concat(e,"/").concat(t),n,this.enhance)}},{key:"sendCustomEventWithEncodedUrl",value:function(e,t,n){var r="".concat(btoa("".concat(this.serviceName,"/").concat(e,"/").concat(t))),i="".concat(this.endpoint,"/grp/v1/encoded/").concat(this.env,"/").concat(r);return x(i,n,this.enhance)}}]),e}()},234:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n(156));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e,t){return e&&t?function(e,t){var n=t.map((function(e){var t=s(e.split("="),2);return{key:t[0],value:t[1]}})).filter((function(t){return t.key===e&&null!==t.value}));return n.length>0?n[0].value:null}(e,t.split(i.COOKIE_SEPARATOR).map((function(e){return e.trim()}))):null};t.default=u},235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(236)),i=a(n(237));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modified=!1,this._cookieObject=(0,r.default)(t)||{}}var t,n,a;return t=e,(n=[{key:"getValue",value:function(e){return this._cookieObject[e]}},{key:"setValue",value:function(e,t){return this._cookieObject[e]=t,this._modified=!0,this}},{key:"deleteValue",value:function(e){return delete this._cookieObject[e],this._modified=!0,this}},{key:"clear",value:function(){return this._cookieObject={},this._modified=!0,this}},{key:"isModified",value:function(){return this._modified}},{key:"keys",value:function(){return Object.keys(this._cookieObject)}},{key:"serializeToString",value:function(){return(0,i.default)(this._cookieObject)}}])&&s(t.prototype,n),a&&s(t,a),e}();t.default=o},236:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n(156));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){if(!e||"string"!==typeof e)return null;var t=e.split(i.PAIR_SEPARATOR),n={};return t.forEach((function(e){if(-1!==e.indexOf(i.KEY_VALUE_SEPARATOR)){var t=s(e.split(i.KEY_VALUE_SEPARATOR),2),r=t[0],a=t[1];n[r]=decodeURIComponent(a)}else n[e]=null})),n}},237:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return"";if("string"===typeof e)return e;var t=Object.keys(e);if(0===t.length)return"";return t.map((function(t){return function(e,t){return t?"".concat(e).concat(i.KEY_VALUE_SEPARATOR).concat(t):e}(t,e[t])})).reduce(s)};var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n(156));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}var s=function(e,t){return e?"".concat(e).concat(i.PAIR_SEPARATOR).concat(t):t}},256:function(e){e.exports=JSON.parse('{"_args":[["@skyscanner/session-validation@1.0.27","/drone/src/github.skyscannertools.net/wombat/blackbird/client"]],"_development":true,"_from":"@skyscanner/session-validation@1.0.27","_id":"@skyscanner/session-validation@1.0.27","_inBundle":false,"_integrity":"sha1-7rt8c8rfCaLB5jETcLcB2SqQLG8=","_location":"/@skyscanner/session-validation","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"@skyscanner/session-validation@1.0.27","name":"@skyscanner/session-validation","escapedName":"@skyscanner%2fsession-validation","scope":"@skyscanner","rawSpec":"1.0.27","saveSpec":null,"fetchSpec":"1.0.27"},"_requiredBy":["/saddlebag-user-management"],"_resolved":"https://artifactory.skyscannertools.net/artifactory/api/npm/npm/@skyscanner/session-validation/-/@skyscanner/session-validation-1.0.27.tgz","_spec":"1.0.27","_where":"/drone/src/github.skyscannertools.net/wombat/blackbird/client","author":{"name":"Diamond"},"backpack-react-scripts":{"babelIncludePrefixes":["@skyscanner/","@identity/"]},"bugs":{"email":"DiamondSquad@skyscanner.net"},"dependencies":{"saddlebag-browser":"^6.0.18","saddlebag-cookie":"^3.0.45","saddlebag-date":"^2.0.11","saddlebag-event-tracking":"^3.0.24","saddlebag-funnel-events":"^0.3.44","saddlebag-grappler":"^2.3.32","saddlebag-localstorage":"^3.0.36","saddlebag-observer":"^3.0.20","saddlebag-user-tracking-events":"^2.0.21"},"description":"Library to validate and refresh the access tokens using the refresh token","devDependencies":{"babel-eslint":"^10.1.0","ensure-node-env":"^1.0.8","eslint":"^4.9.0","eslint-config-airbnb":"^16.1.0","eslint-config-skyscanner":"^3.0.0","eslint-plugin-import":"^2.2.0","eslint-plugin-jsx-a11y":"^6.1.1","eslint-plugin-react":"^7.11.1","eslint-plugin-skyscanner-dates":"^1.0.9","husky":"^4.0.0","jest-fetch-mock":"^1.7.5","lint-staged":"^7.1.2"},"engines":{"node":"^12.10.0","npm":"^6.10.3"},"files":["src"],"gitHead":"0cab7737d5300a74c968fe8ef8ddf009b2e8bb02","homepage":"https://github.skyscannertools.net/identity/auth-libs/tree/master/packages/session-validation","keywords":["mshell","library","node"],"license":"UNLICENSED","lint-staged":{"**/*.{js,jsx}":["npm run lint:js:staged --"]},"main":"src/index.js","name":"@skyscanner/session-validation","publishConfig":{"registry":"https://artifactory.skyscannertools.net/artifactory/api/npm/npm/"},"scripts":{"coverage":"react-scripts test --coverage","lint":"npm run lint:js","lint:js":"eslint . --ignore-path .gitignore --ext .js,.jsx","lint:js:fix":"npm run lint:js -- --fix","lint:js:fix:staged":"eslint . --ignore-path .gitignore --fix","lint:js:staged":"eslint . --ignore-path .gitignore","precommit":"lint-staged","test":"react-scripts test"},"version":"1.0.27"}')},257:function(module,exports,__webpack_require__){"use strict";function decycle(e){var t=[],n=[];return function e(r,i){var a,s,o,u=r&&r.toJSON instanceof Function?r.toJSON():r;if("object"===typeof u&&null!==u){for(a=0;a<t.length;a+=1)if(t[a]===u)return{$ref:n[a]};if(t.push(u),n.push(i),"[object Array]"===Object.prototype.toString.apply(u))for(o=[],a=0;a<u.length;a+=1)o[a]=e(u[a],i+"["+a+"]");else for(s in o={},u)Object.prototype.hasOwnProperty.call(u,s)&&(o[s]=e(u[s],i+"["+JSON.stringify(s)+"]"));return o}return u}(e,"$")}function retrocycle($){var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"===typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"===typeof item&&(path=item.$ref,"string"===typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"===typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"===typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$}module.exports={stringify:function(e,t,n){return JSON.stringify(decycle(e),t,n)},parse:function(e,t){return retrocycle(JSON.parse(e,t))},decycle:decycle,retrocycle:retrocycle}},258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseCookie",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"parseMultiValueCookie",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"buildCookieObject",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"serializeToString",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"MultiValueCookie",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"COOKIES",{enumerable:!0,get:function(){return u.COOKIES}}),t.default=void 0;var r=c(n(259)),i=c(n(260)),a=c(n(236)),s=c(n(237)),o=c(n(235)),u=n(156);function c(e){return e&&e.__esModule?e:{default:e}}var l=r.default;t.default=l},259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(234))&&r.__esModule?r:{default:r};var a=function(e,t){var n=(0,i.default)(e,t);return n&&"string"===typeof n?n:null};t.default=a},260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.default)(e,t);return n?new r.default(n):null};var r=a(n(235)),i=a(n(234));function a(e){return e&&e.__esModule?e:{default:e}}},266:function(e,t,n){e.exports={"bpk-card":"BpkCard_bpk-card__3kPyo","bpk-no-touch-support":"BpkCard_bpk-no-touch-support__3mK1l","bpk-card--padded":"BpkCard_bpk-card--padded__c-mUE","bpk-keyframe-spin":"BpkCard_bpk-keyframe-spin__250El"}},93:function(e,t,n){"use strict";n.r(t),n.d(t,"getEnvFromUrl",(function(){return i}));var r=n(1),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.getWindow(),t="".concat(e.location.protocol,"//").concat(e.location.hostname),n=-1!==t.indexOf("local");return n?"development":"production"};t.default=function(e){if("development"===e||"production"===e)return n(165)("./".concat(e)).config;throw new Error("Environment is required.")}}}]);
//# sourceMappingURL=3.25b3612b.chunk.js.map