"use strict";function _readOnlyError(e){throw new Error('"'+e+'" is read-only')}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,a=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){a=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(a)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(b,e){b.grep=e.grep,b.map=e.map,b.trim=e.trim,b.proxy=e.proxy,b.ajax=e.ajax,b.param=e.param;var t=b.module("Sexlog",["ng","ngResource","ngAnimate","ngTouch","ngSanitize","ui.bootstrap","oc.lazyLoad"]);t.constant("CHECK_SESSION",!!parseInt(b.element("html").attr("check-session"))),t.constant("MODAL_TYPE",{TOKEN:"token",SUBSCRIPTION:"subscription"}),t.constant("DRIVE_REALTIME",{DEV_URL:"",URL:""}),b.module("Sexlog").constant("MESSAGE_FILTERS",{ALL:"all",UNREAD:"unread",ONLINE:"online",REPLIED:"replied",SPAM:"spam"}),t.config(["$httpProvider","$sceProvider","$compileProvider","$animateProvider","$sceDelegateProvider","$locationProvider","$provide","$qProvider",function(e,t,n,o,i,r,a,s){s.errorOnUnhandledRejections(!1),r.html5Mode({enabled:!0,requireBase:!1}),e.interceptors.push("redirectInterceptor"),e.interceptors.push("securityInterceptor"),e.interceptors.push("subscribeInterceptor"),e.interceptors.push("errorInterceptor"),e.interceptors.push("pagerInterceptor"),e.interceptors.push("titleInterceptor"),e.interceptors.push("onboardingInterceptor"),e.interceptors.push("experimentInterceptor"),e.interceptors.push("spamInterceptor"),e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript):/),t.enabled(!0),i.resourceUrlWhitelist(["self","https://sandbox.pagseguro.uol.com.br/v2/checkout/**","https://pagseguro.uol.com.br/v2/checkout/**","https://m.pagseguro.uol.com.br/v2/checkout/**","https://secure.billing.creditcard/startorder**","https://www.google.com/recaptcha/**","https://maps.googleapis.com/**"]),o.classNameFilter=function(){return/ng-animate/},a.decorator("$exceptionHandler",["$window",function(t){return function(e){t.Raven&&t.Raven.captureException(e),console.error(e)}}])}]),t.run(["$rootScope","$compile","$account","$subscribe","$signup","$login","$auth","$messages","$checkUpdates","$share","$token","$lang","$fingerprint","$uniquehash","$window","$dialog","$profileEditModal","$devtools",function(e,t,n,o,i,r,a,s,l,c,u,d,f,m,p,g,h,v){e.$onMany=function(e,t){b.isString(e)&&(e=e.split(" "));for(var n=0;n<e.length;n++)this.$on(e[n],t)},f(),m(),e.$account=n,e.$subscribe=o,e.$token=u,e.$signup=i,e.$login=r,e.$auth=a,e.$messages=s,e.$checkUpdates=l,e.$share=c,e.$lang=d,e.$dialog=g,p.Sexlog=p.Sexlog||{},p.Sexlog.$compile=t,p.Sexlog.$account=n,p.Sexlog.$subscribe=o,p.Sexlog.$token=u,p.Sexlog.$messages=s,p.Sexlog.$checkUpdates=l,p.Sexlog.$share=c,p.Sexlog.$profileEditModal=h,p.Sexlog.$livecam={},p.Sexlog.$dialog=g,p.Sexlog.$signup=i,p.Sexlog.$devtools=v}])}(angular,jQuery),function(t,n,o){t.element(n).ready(function(){var e=t.bootstrap(n,["Sexlog"]);setTimeout(function(){o(n).trigger("angularReady",e)})})}(angular,document,jQuery),angular.module("Sexlog").constant("ALERT_COPY",{SUCCESS:"SUCCESS",ERROR:"ERROR"}),angular.module("Sexlog").constant("CARD_HASH",{MOIP:""}),angular.module("Sexlog").constant("TAB",{PLANS:"plans",SUBSCRIBE:"subscribe",PAYMENT:"payment",ANTIFRAUDE:"antifraude"}),angular.module("Sexlog").constant("TESTAB_TOKENS",{TOKENS_900:"7",TOKENS_2500:"32",TOKENS_5000:"57"}),function(d){d.module("Sexlog").controller("LoginController",["$scope","$login","$signup","$url","$modalInstance","$focus","$newRecaptcha","$googleAnalytics","modalData","LoginModel","$http",function(n,e,t,o,i,r,a,s,l,c,u){n.modal=l,n.login=new c,n.init=function(e){e.validationMessage&&(n.loginValidationMessage=e.validationMessage)},n.setGoTo=function(e){e&&(n.login.postgoto=e)},n.doLogin=function(e,t){if(e.preventDefault(),n.hasError=!1,n.signinForm.$error.required)return n.hasError=!0,r(n.signinForm.$error.required[0].$name);n.modal.backUrl&&n.setGoTo(n.modal.backUrl),n.loading=!0,n.loginValidationMessage="",t?u.post("service/metrification/send",{description:t}).then(function(){n.serverValidate()}).catch(function(){n.serverValidate()}):n.serverValidate()},n.serverValidate=function(){n.login.$save().then(function(e){s.trackEvent("Login","Sucesso"),o.reload(e.redirectTo)},function(e){return s.trackEvent("Login","Erro"),n.loading=!1,n.loginValidationMessage=e.data.validationMessage,e.data.recaptcha&&a.reload(),r("topLogin")})},n.doForgetPassword=function(){if(n.forgetForm.$error.required)return r(n.forgetForm.$error.required[0].$name);n.loading=!0,n.login.$forgotPassword().then(function(){n.loading=!1,e.goToConfirmPassword()})},n.signup=function(){e.injected||n.close(),t.modal()},n.close=function(){d.isFunction(n.modal.onClose)&&n.modal.onClose.call(e,n),i.close()},n.clearErrors=function(){n.loginValidationMessage="",n.forgetValidationMessage=""},n.getFormGroupCss=function(e){return{"has-error":n.loginValidationMessage||n.hasError&&!n.login[e]}},n.setModalData=function(e){n.modal=e},n.getLoginButtonCss=function(){return{"btn-disabled":!n.login.login||!n.login.password||n.loading}},n.forgotPassword=function(e,t){u.post("service/metrification/send",{description:t}).then(function(){o.redirect(e)})}}])}(angular),function(c){c.module("Sexlog").controller("SignupController",["$scope","$signup","$modalInstance","$url","modalData","$http","$slLazyLoad","$lang",function(o,e,t,i,n,r,a,s){var l=i.getQueryString();o.init=function(){o.modal=n,l.action&&"LIVECAM_SIGNUP_FRUSTRATION_EXPLORER"===l.action&&(o.modal.title=s("livecamNonPublicTitle"),o.modal.subtitle=s("livecamNonPublicDescription"))},o.openLPDGTooltip=function(){localStorage.getItem("lgpdTooltip")||a.openLGPDTooltip().then(function(){o.openLGPDTooltip=!0})},o.close=function(){c.isFunction(o.modal.onClose)&&o.modal.onClose.call(e,o),t.close()},o.redirectTo=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i.redirect(e)},o.redirectToOnboarding=function(e,t){var n;o.genderError=!o.gender,l.link&&(window.localStorage.removeItem("redirectTo"),window.localStorage.setItem("redirectTo",l.link)),o.genderError||(n=i.customParams(e,{gender:o.gender}),t?r.post("service/metrification/send",{description:t}).then(function(){i.redirect(n)}):i.redirect(n))},o.closeLGPDTooltip=function(){localStorage.setItem("lgpdTooltip",1),o.openLGPDTooltip=!1},o.getGendersCss=function(){return{"signup-onboarding--error":o.genderError}},o.openModal=function(){return e.modal()},o.goToSignin=function(e,t){r.post("service/metrification/send",{description:t}).then(function(){i.redirect(e)})}}])}(angular),function(C){var P=!1;C.module("Sexlog").controller("SubscribeOneClickController",["$scope","SubscribeOneClickModel","modalData","plans","card","langs","$modalInstance","$subscribeOneClick","$timeout","$q","$compile","$url","$token","$subscribe","$carousel","$screen","$metric","METRIC","MODAL_TYPE","$slLazyLoad","$firebaseMessaging",function(f,e,t,n,o,i,r,m,p,g,h,a,s,v,l,c,u,d,b,S,$){function y(a,s){var e,t,n,o,i,r,l,c=g.defer(),u=a.find(".modal-content"),d=a.find(".modal-dialog");return s.url||c.resolve(),e=a,t=s.title,i=g.defer(),r=e.find(".modal-dialog"),l=e.find(".modal-content"),P?i.resolve():(n='<div class="modal-loader">',n+=t?"<h1>"+t+"</h1>":"",n+="</div>",r.find(".modal-loader").remove(),o=r.prepend(n).find(".modal-loader"),f.injected||r.height(E(l)),p(function(){r.addClass("loading progress"),o.addClass("in"),i.resolve()}),P=!0),i.promise.then(function(){u.empty().load(s.url,m.params,function(){var e,t,n,o,i,r;h(u.contents())(f),a.removeClass("erro sucesso pagseguro iframe").addClass(s.classModal).removeClass(s.classToRemove),C.isDefined(s.payment)&&(v.setActivePayment(s.payment),v.showPayment(s.payment)),e=a,t=s,n=g.defer(),o=e.find(".modal-dialog"),i=e.find(".modal-content"),r=e.find(".modal-loader"),P?(p(function(){r.removeClass("in").empty(),f.injected||o.height(E(i)),o.addClass(t.classToAdd),o.removeClass(t.classToRemove).removeClass("progress"),p(function(){o.removeClass("loading"),i.addClass("in"),n.resolve()},800)},1e3),P=!1):n.resolve(),n.promise.then(function(){p(function(){u.removeClass("in"),d.find(".modal-loader").remove(),c.resolve()},500)})})}),c.promise}function E(e){var t=e.height();return 885<t?885:t}function w(e){return m.getTemplateUrl(a.api("subscribe/"+e))}function T(){f.planIndex=0,f.plans.some(function(e,t){return e.specialOffer||+e.id==+o.planid?(f.planIndex=t,m.setPlan(e)):void 0})}f.subscription=new e(t.params),f.$subscribeOneClick=m,f.$subscribe=v,f.langs=i,f.modal=t,f.$modalInstance=r,f.plans=n,f.init=function(e,t){f.subscription.autorecharge=!!e,f.$subscribeOneClick.testab=t||null,f.autorechargeEventShow="mouseover",f.autorechargeEventHide="mouseleave",c.isMobile()&&(f.autorechargeEventShow="click",f.autorechargeEventHide=""),u.setTestABPageId(t),u.saveEvent(d.EVENT.OPENED_MODAL)},f.card={flag:null,last:null,planid:null},C.extend(f.card,o),f.subscription=C.extend(f.subscription,{onebuy:!0,planid:f.card.planid,card:{plots:null}}),f.hasPlots=!1,m.setModalScope(f),f.setElem=function(e){f.$elem=e},f.close=function(){C.isFunction(f.modal.onClose)&&f.modal.onClose.call(m,f),r.close()},f.closeModalPagseguro=function(){r.close()},f.error=function(e){C.isDefined(window.zEmbed)&&window.zEmbed.show(),e=e||{};var t=" erro ";return C.isDefined(e.windowClass)&&(t=e.windowClass+t),e.params.langkey&&(m.params.langkey=e.params.langkey),y(f.$elem,C.extend({url:w("subscribe-one-click-error"),classModal:t,classToRemove:"modal-sm"},e))},f.fatalError=function(e){return C.isDefined(window.zEmbed)&&window.zEmbed.show(),e=e||{},y(f.$elem,C.extend({url:w("subscribe-one-click-fatal-error"),classModal:"subscribe-one-click erro",classToAdd:"modal-sm",classToRemove:"modal-lg"},e))},f.success=function(e){e=e||{};var t=" sucesso ";return C.isDefined(e.windowClass)&&(t=e.windowClass+t),y(f.$elem,{url:w("subscribe-one-success"),classModal:t,classToRemove:"modal-lg subscribe-new-modal"})},f.successPagseguro=function(){return y(f.$elem,{url:w("success-pagseguro"),classModal:" sucesso-pagseguro ",classToRemove:"modal-lg modal-sm"})},f.pagseguro=function(e){e=e||{};var t=" iframe-pagseguro ";return C.isDefined(e.windowClass)&&(t=e.windowClass+t),y(f.$elem,C.extend({url:w("subscribe-one-click-pagseguro"),classModal:t,classToAdd:"modal-lg",classToRemove:"modal-sm"},e))},f.process=function(e){var t=C.copy(f.subscription),n=y(f.$elem,{title:e}),o=f.$subscribeOneClick.isPagseguro()?t.$pagseguro():t.$sign();return g.all([o,n])},f.choice=function(){var e=y(f.$elem,{url:w("subscribe-one-click"),classToAdd:"modal-sm",classToRemove:"modal-lg"});return g.when(e).then(function(){var e=l("ul[rn-carousel]");C.isDefined(e.carouselIndex)&&e.carouselIndex<0?e.nextSlide():T()}),e},f.isPremium=function(){return m.params.premium},f.isToken=function(){return m.params.token},f.isGift=function(){return m.params.to},f.isSignature=function(){return!(f.isPremium()||f.isToken()||f.isGift())},f.changePaymentMethod=function(e,t){var n,o,i;C.isDefined(m.params.onebuy)&&m.params.onebuy?(n="sl-modal sl-subscription-modal",m.premiumPlan&&(n+=" sl-modal-premium"),m.params.token&&(n+=" sl-subscription-token"),o={windowClass:n,premiumPlan:m.premiumPlan,params:{action:(m.params.action?"-":"")+"CHANGE",premium:!!m.premiumPlan,preventOneBuy:!0,planid:f.subscription.planid,payment:e,to:m.params.to?m.params.to:""},onSuccess:function(){f.modal.onSuccess.call(v,v.$modalScope)},onClose:function(){f.modal.onClose.call(v,v.$modalScope)}},m.params.to&&C.extend(o,{title:f.modal.title,subtitle:f.modal.subtitle}),m.type===b.TOKEN?s.modal(o):m.type===b.SUBSCRIPTION&&v.modal(o)):(i={premium:!!m.premiumPlan,premiumPlan:m.premiumPlan,params:{action:(m.params.action?"-":"")+"CHANGE",premium:!!m.premiumPlan,preventOneBuy:t,planid:f.subscription.planid,payment:e,to:m.params.to?m.params.to:""},onSuccess:function(){f.modal.onSuccess.call(v,v.$modalScope)},onClose:function(){f.modal.onClose.call(v,v.$modalScope)}},v.modal(i)),f.close()},f.getClass=function(e){return{one:0===e,two:1===e,three:2===e,visalogo:3===e}},f.$watch("planIndex",function(e){-1<e&&(f.subscription.planid=+f.plans[e].id,m.setPlan(f.plans[e]),m.premiumPlan&&(f.plans=f.plans.map(function(e,t){return+e.id==+m.premiumPlan.id&&(f.subscription.planid=m.premiumPlan.id,f.planIndex=t,e.selectedPlan=!0,e.parcs=m.premiumPlan.parcs),e})),C.isArray(f.plans[e].parcs)?(f.hasPlots=!!f.plans[e].parcs.length,f.setPlot(),f.setPlotName()):f.hasPlots&&f.resetPlot())}),f.resetPlot=function(){f.hasPlots=!1,f.editPlot=!1},f.setPlotName=function(){if(f.plans[f.planIndex].parcs.length){if(f.subscription.card.plots)return void f.plans[f.planIndex].parcs.forEach(function(e){+e.value==+f.subscription.card.plots&&(f.plotName=e.name)});f.subscription.card.plots=+f.plans[f.planIndex].parcs[0].value,f.plotName=f.plans[f.planIndex].parcs[0].name}},f.setEditPlot=function(){f.editPlot=!0},f.setPlot=function(e){var t,n=(t=f.planIndex,f.plans[t].parcs);e?f.subscription.card.plots=e:n.length&&(f.subscription.card.plots=n[n.length-1].value)},p(function(){T(),f.$elem=r.elem||{},f.setPlot()}),f.startOnboarding=function(){S.openSubscribeOnboarding().then(function(){f.showOnboarding=!0,f.showSuccessModal=!1})},f.showTipEnablePush=function(){f.showEnablePushTipScreen=!0},f.enablePushNotification=function(){$.optIn().then(function(){f.startSuccessModal()})},f.startSuccessModal=function(){f.showSuccessModal=!0,f.showPushModal=!1,f.showPremiumModal=!1},f.initModals=function(){var e=m.premiumModalInfo;f.premiumModalInfo=e,f.showPushModal=f.isSignature()&&!!m.showPushModal,f.showPremiumModal=!C.equals(m.premiumModalInfo,{})&&e&&e.status&&!f.showPushModal,f.showSuccessModal=!f.showPushModal&&!f.showPremiumModal}}])}(angular),function(U,F){var B=!1,j=["01","02","03","04","05","06","07","08","09","10","11","12"];U.module("Sexlog").controller("SubscribeController",["$scope","$screen","$browser","$url","$subscribe","$q","$compile","$interpolate","$timeout","$errorMessages","$modalInstance","$lang","$metric","plans","modalData","langs","SubscribeModel","AddressModel","SignupModel","AccountModel","METRIC","ALERT_COPY","TAB","$slLazyLoad","TESTAB_TOKENS","$firebaseMessaging","$token","$tooltip",function(s,n,o,t,r,l,a,e,c,i,u,d,f,m,p,g,h,v,b,S,$,y,E,w,T,C,P,_){function M(){var e="";return s.injected?(e=["specialOffer","bestOption","main"],n.equals(s.removeFixScreen)&&(e="")):e=n.isMobile()?["specialOffer","bestOption","main"]:"",e}function A(e,t){var n,o,i=l.defer(),r=e.find(".modal-dialog"),a=e.find(".modal-content");return B?i.resolve():(n='<div class="modal-loader">',t instanceof Array?t.forEach(function(e,t){n+=e?'<h1 class="anim'+t+'">'+e+"</h1>":""}):n+=t?"<h1>"+t+"</h1>":"",n+="</div>",r.find(".modal-loader").remove(),o=r.prepend(n).find(".modal-loader"),!s.injected&&s.isNewModal&&r.height(k(a)),c(function(){r.addClass("loading progress"),o.addClass("in"),i.resolve()}),B=!0),i.promise}function I(e,t){var n=l.defer(),o=e.find(".modal-dialog"),i=e.find(".modal-content"),r=e.find(".modal-loader");return B?(c(function(){r.removeClass("in").empty(),!s.injected&&s.isNewModal&&o.height(k(i)),o.addClass(t.classToAdd),o.removeClass(t.classToRemove).removeClass("progress"),c(function(){o.removeClass("loading"),i.addClass("in"),n.resolve()},800)},1e3),B=!1):n.resolve(),n.promise}function x(e,t){var n=l.defer(),o=e.find(".modal-content"),i=e.find(".modal-dialog");return t.url||n.resolve(),A(e,t.title).then(function(){o.empty().load(t.url,r.params,function(){a(o.contents())(s),e.removeClass("erro sucesso pagseguro iframe").addClass(t.classModal).removeClass(t.classToRemove),U.isDefined(t.payment)&&(r.setActivePayment(t.payment),r.showPayment(t.payment)),I(e,t).then(function(){c(function(){o.removeClass("in"),i.find(".modal-loader").remove(),n.resolve()},500)})})}),n.promise}function k(e){var t=e.height();return 885<t?885:t}function O(){return s.popoverRule.placeholder=4===s.popoverRule.cvv.code?"0000":"000",s.popoverRule.mask="000"===s.popoverRule.placeholder?"999":"9999",e('<div class="popoverSecurity"><div class="{{cvv.cssClass}}"></div><p>{{cvv.message}}</p></div>')(s.popoverRule)}function N(e){return r.getTemplateUrl(t.base("subscribe/?template="+e))}function D(){s.langs&&i.set("subscribeCard",{number:{required:s.langs.subscribe_validCard,creditCard:s.langs.subscribe_validCard,flag:s.langs.subscribe_WithoutFlag},name:{required:s.langs.subscribe_sameNameCard},securityCode:{required:s.langs.subscribe_securityCode,valid:s.langs.subscribe_securityCode},zipCode:{required:s.langs.subscribe_valid_required_zipcode,zipcode:s.langs.subscribe_invalid_required_zipcode},city:{required:s.langs.subscribe_valid_required_city},state:{required:s.langs.subscribe_valid_required_state,state:s.langs.subscribe_invalid_required_state},addressNum:{required:s.langs.subscribe_valid_required_address_num_min,addressnum:s.langs.subscribe_invalid_required_address_num},addressNumFixed:{required:s.langs.subscribe_valid_required_address_num,addressnum:s.langs.subscribe_invalid_required_address_num},address:{required:s.langs.subscribe_valid_required_address},ddd:{required:s.langs.subscribe_valid_required_ddd,ddd:s.langs.subscribe_invalidDD},phone:{required:s.langs.subscribe_valid_required_phone,phone:s.langs.subscribe_invalid_required_phone},neighborhood:{required:s.langs.subscribe_valid_required_neighborhood},email:{required:s.langs.subscribe_email,email:s.langs.subscribe_add_email_valid_error_invalidemail},nome:{required:s.langs.subscribe_fullName},cpf:{required:s.langs.subscribe_validCpf,cpf:s.langs.subscribe_invalidCpf},banco:{required:s.langs.subscribe_select_bank},month:{required:s.langs.subscribe_required_field},year:{required:s.langs.subscribe_required_field},date:{required:s.langs.subscribe_dateValidation,pattern:s.langs.subscribe_expirationDate},cCFlag:{required:s.langs.subscribe_required_field},cpfcnpj:{required:s.langs.subscribe_required_field,invalid:s.langs.paymee_invalid_cpfcnpj},agency:{required:s.langs.subscribe_required_field},account:{required:s.langs.subscribe_required_field}})}function L(e,t){for(var n=[],o=e,i=0;i<t;i++)n.push(o++);return n}function R(e){if(!e.type||!e.text)throw"Params is required";return s.alertCopy.type=e.type,s.alertCopy.text=e.text,s.alertCopy.show=!0,s.$$phase||s.$digest(),c(function(){s.alertCopy.show=!1},e.timeout||3e3),1}s.actualDate=new Date,s.subscription=new h(U.extend({},p.params,{card:{}})),s.subscription.bankTransfer={cCFlag:null,cpfcnpj:null,agency:null,account:null},s.tooltip=_,s.$screen=n,s.$modalInstance=u,s.injected=U.isUndefined(u.close),s.popoverRule={size:16,cvv:{code:3,cssClass:"securityCode",message:d("subscribe_number3Digits")}},s.plans=m,s.alertCopy={},s.ALERT_COPY=y,s.months=j,s.years=L(s.actualDate.getFullYear(),12),s.langs=g,s.modal=p,s.popoverSecurity=O(),s.showAddress=!1,s.gridOrder=M(),s.TAB=E,s.modalPage=0,s.planIsSelected=!1,s.promoPlans=[],s.isNewModal=r.isNewModal,s.showSuccessModal=!1,P.getAndUpdateBalance().$promise.then(function(e){return r.tokenOwned=e.balanceformat}),s.$on("$screenChange",function(){s.$screen=n,s.gridOrder=M(),n.isDesktop()&&(r.hasPayment()||r.setActivePayment(r.PAYMENTS.CREDIT))}),s.$on("$cardValidationRule",function(e,t){s.popoverRule=t,s.subscription.flag=t.flag,s.popoverSecurity=O()}),s.$watch(function(){return s.subscription.flagBank},function(e){e&&(r.flagbank=e,r.showFlagBankError=!1,s.subscription.bank=r.BANKS[e])}),c(function(){s.$elem=u.elem||{},u.elem&&0<s.plans.length&&u.elem.addClass(s.plans[0].cssclass)}),m.length&&(s.selected=m.filter(function(e){return e.default})[0]),S.getAccount({},function(e){s.isExterior=e.isExterior}),D(),F&&!s.injected&&F("trigger","subscribe-modal"),s.isSpecialPlan=function(e){return e.bestOption||e.discount},s.getClassByPlans=function(){return 4<=s.plans.length?"small-discount":""},s.setRemoveFixScreen=function(e){s.removeFixScreen=e.split(" ")},s.setPlots=function(e){e?s.subscription.card.plots=e:r.selectedPlan.parcs.length?s.subscription.card.plots=r.selectedPlan.parcs[r.selectedPlan.parcs.length-1].value:s.subscription.card.plots=null},s.setPlans=function(e){s.plans=e,s.gridOrder=M(),s.hasSpecialOffer=function(e){if(!U.isArray(e))throw"O parametro deve ser um array";return!e.every(function(e){return U.isUndefined(e.specialOffer)})}(s.plans),s.selected=e.filter(function(e){return e.default})[0]},s.setLangs=function(e){s.langs=e,D()},s.setModalData=function(e){(s.modal=e).params&&(s.subscription=U.extend(s.subscription,e.params))},s.setElem=function(e){s.$elem=e},s.checkPlanSelected=function(){var t=null;U.forEach(s.plans,function(e){e.selected&&(t=e)}),t&&(r.setActiveTab(E.PAYMENTS),r.setActivePayment(r.PAYMENTS.CREDIT),r.setPlan(t))},s.getPlanStyle=function(e){var t={main:e.main,"best-option":e.bestOption,"special-offer":e.specialOffer,discount:e.discount};return e.cssClass&&(t[e.cssClass]=e.cssClass),t},s.load=function(e){A(u.elem,e),c(function(){I(u.elem)},2e3)},s.process=function(e){var t,n=U.copy(s.subscription),o=x(s.$elem,{title:e});return s.$subscribe.isPagseguro()?t=n.$pagseguro():s.$subscribe.isInvoice()?t=n.$invoice():s.$subscribe.isDebit()||s.$subscribe.isCredit()?t=n.$sign():s.$subscribe.isDebitOnline()?(n.senderHash=PagSeguroDirectPayment.getSenderHash(),t=n.$pagseguroDebitOnline()):s.$subscribe.isVerotel()?t=n.$verotel():(s.$subscribe.isBankTransfer()||s.$subscribe.isPix())&&(t=n.$bankTransfer()),l.all([t,o])},s.saveSignup=function(e,t){var n=b.save(e),o=x(s.$elem,{title:t});return l.all([n,o])},s.choice=function(e){U.isUndefined(e)&&(e=r.PAYMENTS.CREDIT),r.PAYMENTS.CREDIT;var t=x(s.$elem,{url:N("subscribe"),classToAdd:"modal-lg",classToRemove:"modal-sm",classModal:"subscribe-new-modal",payment:e});return U.isDefined(s.subscription.signup)&&(s.subscription.signup.login=s.subscription.signup.email=s.subscription.signup.password=s.subscription.signup.terms=null,r.subscribe.valid=!1,r.setActiveTab(E.SUBSCRIBE)),l.when(t).then(function(){var e;s.$broadcast("$subscribe-retry",s.subscription),r.retry=!0,o.ie()&&9<o.version&&(e=U.copy(s.subscription.card),c(function(){s.subscription.card=e},100))}),t},s.success=function(){return x(s.$elem,{url:N("success"),classModal:"sucesso",classToRemove:"modal-lg subscribe-new-modal",keyboard:!1})},s.successPagseguro=function(){return x(s.$elem,{url:N("success-pagseguro"),classModal:"sucesso-pagseguro",classToRemove:"modal-lg subscribe-new-modal",keyboard:!1})},s.templateSuccess=function(e){return x(s.$elem,{url:N(e),classModal:"sucesso",classToRemove:"modal-lg subscribe-new-modal"})},s.invoice=function(e){return x(s.$elem,U.extend({url:N("invoice"),classModal:"iframe-boleto",classToAdd:"modal-lg",classToRemove:"modal-sm subscribe-new-modal"},e))},s.bankTransfer=function(e){return x(s.$elem,U.extend({url:N("banktransfer"),classModal:"iframe-boleto",classToAdd:"modal-lg",classToRemove:"modal-sm subscribe-new-modal"},e))},s.pix=function(e){return x(s.$elem,U.extend({url:N("pix"),classModal:"sucesso-pix",classToAdd:"modal-sm",classToRemove:"modal-lg subscribe-new-modal"},e))},s.error=function(e){return U.isDefined(window.zEmbed)&&window.zEmbed.show(),e.langkey&&(r.params.langkey=e.langkey),x(s.$elem,U.extend({url:N("error"),classModal:"erro",classToRemove:"modal-lg subscribe-new-modal"},e))},s.pagseguro=function(e){return x(s.$elem,U.extend({url:N("pagseguro"),classModal:"iframe-pagseguro",classToAdd:"modal-lg",classToRemove:"modal-sm subscribe-new-modal"},e))},s.verotel=function(e){return x(s.$elem,U.extend({url:N("verotel"),classModal:"iframe-pagseguro",classToAdd:"modal-lg",classToRemove:"modal-sm subscribe-new-modal"},e))},s.fatalError=function(e){return U.isDefined(window.zEmbed)&&window.zEmbed.show(),x(s.$elem,U.extend({url:N("fatal-error"),classModal:"erro",classToRemove:"modal-lg subscribe-new-modal"},e))},s.subscribeTemplate=function(){return s.selected=s.plans.filter(function(e){return e.default})[0],U.isDefined(window.zEmbed)&&window.zEmbed.show(),f.saveEvent($.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.LINK_OTHER_PAYMENTS),x(s.$elem,U.extend({url:N("subscribe-template"),classToRemove:"subscribe-new-modal"}))},s.closeSubscribe=function(){c(function(){r.toggleList=!1},1e3),h.close({testab:r.testab}),U.isFunction(s.modal.onClose)&&s.modal.onClose.call(r,s),u.close(),r.modalOpened=!1,U.isDefined(window.zEmbed)&&window.zEmbed.hide(),c(function(){r.clearPlan(),r.setCreditCard()},500),f.saveEvent($.EVENT.CLOSED_MODAL)},s.closeModalPagseguro=function(){u.close()},s.getSelectedBank=function(e){return{selected:e===s.subscription.flagBank}},s.getAddress=function(e){e=e||7;var t=s.subscription.address.zipCode;t&&t.length>e&&(s.subscription.address.city="",s.subscription.address.state="",s.subscription.address.street="",s.subscription.address.neighborhood="",s.subscription.address.formatedAddress="",s.subscription.address.number="",s.subscription.address.adjunct="",s.loadingAddress=!0,v.get({cep:t},function(e){var t=!1;U.isUndefined(e.cidade)||""===e.cidade?t=!0:s.subscription.address.city=e.cidade,U.isUndefined(e.uf)||""===e.uf?t=!0:s.subscription.address.state=e.uf,U.isUndefined(e.logradouro)||""===e.logradouro?t=!0:s.subscription.address.street=e.logradouro,U.isUndefined(e.bairro)||""===e.bairro?t=!0:s.subscription.address.neighborhood=e.bairro,t?s.showAddress=!0:s.subscription.address.formatedAddress=e.bairro+", "+e.cidade+"/"+e.uf,s.loadingAddress=!1},function(){s.loadingAddress=!1}))},s.getAddressBlur=function(e){var t;e=e||7,!s.subscription.address||(t=s.subscription.address.zipCode)&&t.length>=e&&(t.length===e&&(s.subscription.address.zipCode="0"+t,t=s.subscription.address.zipCode),v.get({cep:t},function(e){var t=!1;U.isUndefined(e.cidade)||""===e.cidade?t=!0:s.subscription.address.city=e.cidade,U.isUndefined(e.uf)||""===e.uf?t=!0:s.subscription.address.state=e.uf,U.isUndefined(e.logradouro)||""===e.logradouro?t=!0:s.subscription.address.street=e.logradouro,U.isUndefined(e.bairro)||""===e.bairro?t=!0:s.subscription.address.neighborhood=e.bairro,t?s.showAddress=!0:s.subscription.address.formatedAddress=e.bairro+", "+e.cidade+"/"+e.uf,s.loadingAddress=!1},function(){s.loadingAddress=!1}))},s.showAddressFields=function(){s.showAddress=!0},s.changePlots=function(){f.saveEvent($.EVENT.CHANGE_PLOTS_FORM)},s.createScriptPagSeguro=function(e,t,n){var o=e.createElement("script");o.type="text/javascript",o.async=!0,o.src=s.urlPagSeguro,o.onreadystatechange=function(){"complete"===this.readyState&&n()},o.onload=n,e.getElementsByTagName("body")[0].appendChild(o)},s.initCreditPayment=function(e,t){U.isDefined(s.subscription.saveonebuy)||(s.subscription.saveonebuy=!!e),U.isDefined(s.subscription.autorecharge)||(s.subscription.autorecharge=!!t)},s.selectPlan=function(e){f.setDescription(e.period),f.saveEvent($.EVENT.CHANGED_PLANS),s.selected=e,s.planIsSelected=!0},s.cssSelectedPlan=function(e){return{"plan-selected":s.selected.id===e.id,"plan-special":!!e.specialOffer}},r.setModalScope(s),s.checkPlanSelected(),s.onCopy=function(e){var t={type:e,text:d("subscribe_alert_copy_success")};e===y.ERROR&&(t.type=e,t.text=d("subscribe_alert_copy_error")),R(t)},s.getClassAlertCopy=function(){return{"alert-copy-success":s.alertCopy.type===y.SUCCESS&&s.alertCopy.show,"alert-copy-error":s.alertCopy.type===y.ERROR&&s.alertCopy.show}},s.checkYears=function(e){if(isNaN(e))return s.years=L(s.actualDate.getFullYear(),12),s.years;e--;var t=s.actualDate.getFullYear(),n="0"+s.actualDate.getMonth();return e<n&&0<=s.years.indexOf(t)?s.years.shift():n<=e&&s.years.indexOf(t)<0?s.years.unshift(t):s.years},s.checkMonths=function(e){var t=s.actualDate.getFullYear(),n=s.actualDate.getMonth();return isNaN(e)||t<e?(s.months=["01","02","03","04","05","06","07","08","09","10","11","12"],s.months):s.months.splice(0,n)},s.openPDF=function(){document.body.querySelector(".billet-form").submit(),f.saveEvent($.EVENT.OPENED_PDF)},s.copyNumber=function(){f.saveEvent($.EVENT.COPY_NUMBER_BILLET)},s.sentToEmail=function(e){if(!e)throw"invoiceId is required";return h.sendBilletByEmail({transactionId:e}),R({text:d("subscribe_send_email_success"),type:y.SUCCESS,timeout:5e3}),f.saveEvent($.EVENT.SEND_TO_EMAIL),!0},s.back=function(e){return s.isLastStep=!1,r.isActiveTab(E.ANTIFRAUDE)?(r.setActiveTab(E.PAYMENT),r.setActivePayment(r.PAYMENTS.CREDIT)):r.isCredit()&&n.isMobile()?r.clearPlan(e):!r.isSubscribe()&&!r.hasPayment()||n.isDesktop()?(f.saveEvent($.EVENT.BACK_TO_PLANS),r.clearPlan(e)):r.hasPayment()&&r.isPayment()?(s.prevPayment=r.hasPayment(),f.saveEvent($.EVENT.BACK_PAYMENT_OPTIONS),r.clearPayment(e)):r.isAntifraude()?(f.saveEvent($.EVENT.BACK_TO_PAYMENT_DATA),r.setActiveTab(E.PAYMENT)):void 0},s.getButtonText=function(){if(s.isLastStep=!1,r.selectedPlan)return r.isBankTransfer()||r.isPix()?(s.isLastStep=!0,d("paymee_next_button")):r.isCredit()&&!r.isAntifraude()&&r.hasAntifraude&&n.isMobile()?d("subscribe_button_next_step"):(s.isLastStep=!0,r.isGift()||r.isTokenModal()?d("subscribe_button_finish"):d("subscribe_button_sign",r.selectedPlan.name))},s.actionButton=function(){if(r.isActiveTab(E.ANTIFRAUDE)){f.saveEvent($.EVENT.SUCCESS_ANTIFRAUDE_FORM);var e=r.getForm();if(r.formIsValid(e))return r.save()}if(r.isActiveTab(E.PAYMENT))return r.isCredit()&&r.hasAntifraude&&!n.isDesktop()?(t=r.getForm(),void(r.formIsValid(t)&&r.setActiveTab(E.ANTIFRAUDE))):r.save();var t},s.isSignature=function(){return!(r.isPremium||r.isGift()||r.isTokenModal())},s.disabledButton=function(){return r.saving||r.waiting&&r.isDebitOnline()||r.isTokens()&&!s.isTokenEnough()},s.showPaymentTitle=function(){return!r.isSubscribe()&&r.selectedPlan&&!r.hasPayment()},s.showPlansTitle=function(){return r.isPlans()&&!r.isTokenModal()},s.showPlansTitleToken=function(){return r.isPlans()&&r.isTokenModal()},s.showPaymentOptionTitle=function(){return r.isPayment()&&r.hasPayment()},s.showTabPayment=function(){return r.isActiveTab(E.PAYMENT)||r.isActiveTab(E.ANTIFRAUDE)},s.hideButtonBack=function(){return!(!r.isPremium||r.hasPayment())||(!(!r.isPremium||!n.isDesktop())||!!r.isPlans())},s.cpfInfoMetric=function(){f.saveEvent($.EVENT.CPF_INFORMATION)},s.cpfInteractionMetric=function(){f.saveEvent($.EVENT.CPF_INTERACTION),s.subscribeFormInvoice.$invalid&&f.saveEvent($.EVENT.CPF_ERROR)},s.changePayment=function(e){if(r.selectedPlan.showInvoice)return s.prevPayment=r.hasPayment(),r.clearPayment(e)},s.clearCardForm=function(){s.subscription.card.month=s.subscription.card.name=s.subscription.card.year=s.subscription.card.number=s.subscription.card.securityCode=s.address=null},s.startOnboarding=function(){w.openSubscribeOnboarding().then(function(){s.showSuccessModal=!1,s.showOnboarding=!0})},s.openInvoiceModal=function(){w.openInvoiceModal(s.transactionId).then(function(){s.closeModal()})},s.nextPage=function(e){if("plans"===e)return f.saveEvent($.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.BUTTON_TRY_PROMOTION),void s.modalPage++;s.modalPage++,f.saveEvent($.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.BUTTON_PAYMENT)},s.prevPage=function(){f.saveEvent($.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.BACK_ARROW),s.modalPage--},s.closeModal=function(){f.saveEvent($.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.CLOSE_MODAL),s.closeSubscribe()},s.selectedPlanClass=function(e){return!!s.planIsSelected&&{"plans-body__plan--selected":s.selected.id===e.id}},s.isButtonDisabled=function(){return{"plans-body__button--disabled":!s.planIsSelected}},s.getPlans=function(e){s.promoPlans=e},s.startHotjar=function(){window.hj&&(window.hj("trigger","subscribe-new-modal"),window.hj("tagRecording",["start-subscribe-new-modal"]))},s.saveInjectedMetric=function(){f.saveEvent($.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.LINK_OTHER_PAYMENTS)},s.sendPlanMetric=function(e){var t=null;switch(e.renewInfo.period){case 30:t=$.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.SELECTED_PAYMENT_MONTHLY;break;case 90:t=$.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.SELECTED_PAYMENT_QUARTERLY;break;case 180:t=$.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.SELECTED_PAYMENT_SEMIANNUAL;break;case 365:t=$.EVENT.TESTAB_NEW_SUBSCRIBE_MODAL.SELECTED_PAYMENT_ANUALY}null!==t&&f.saveEvent(t)},s.openTooltipTestabToken=function(){f.saveEvent($.EVENT.TESTAB_NEW_TOKEN_MODAL.LINK_WHERE_TO_USE);var e={attr:".token-plans-modal__link",desc:s.langs.subscribe_token_testab_tooltip,attrMobile:".token-plans-modal__link",descMobile:s.langs.subscribe_token_testab_tooltip,placement:"top",placementMobile:"top",color:"#a52276",width:290,height:100};w.openTooltip(e)},s.testabSavePlanClick=function(){r.selectedPlan.price.int!==T.TOKENS_900?r.selectedPlan.price.int!==T.TOKENS_2500?r.selectedPlan.price.int!==T.TOKENS_5000||f.saveEvent($.EVENT.TESTAB_NEW_TOKEN_MODAL.SELECTED_5000_TOKENS):f.saveEvent($.EVENT.TESTAB_NEW_TOKEN_MODAL.SELECTED_2500_TOKENS):f.saveEvent($.EVENT.TESTAB_NEW_TOKEN_MODAL.SELECTED_900_TOKENS)},s.testabSaveClose=function(){f.saveEvent($.EVENT.TESTAB_NEW_TOKEN_MODAL.CLOSE_MODAL)},s.showTipEnablePush=function(){s.showEnablePushTipScreen=!0},s.enablePushNotification=function(){C.optIn().then(function(){s.startSuccessModal()})},s.startSuccessModal=function(){s.showSuccessModal=!0,s.showPushModal=!1,s.showPremiumModal=!1},s.isTokenEnough=function(){return 0<=parseFloat(r.originalTokens)},s.initTokenPlansValues=function(e){r.tokenPlansValues=e},s.setInjected=function(e,t){r.tokenOwned=P.asyncBalance,r.setPlan(e,t)},s.openTokensModal=function(){s.closeSubscribe(),P.modal({params:{action:"SUBSCRIBE_OPEN_TOKEN_MODAL"}})},s.startInjectedModal=function(){s.modalPage=1},s.getPixBanks=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s.pixBanks=e},s.getBanksForTransfer=function(e){s.banksForTransfer=e},s.getBankName=function(e){return s.banksForTransfer[e]},s.showPlanAndButton=function(){return!r.isBankTransfer()||r.isBankTransfer()&&!r.waitingForTransfer},s.isWaitingForTransfer=function(e){r.waitingForTransfer=e},s.selectTransferBank=function(e){s.subscription.bankTransfer.cCFlag=e},s.showCopySuccessMessage=function(){_.showSuccessMessage("CÃ³digo copiado com sucesso",!0)},s.initModals=function(e){var t=r.premiumModalInfo?r.premiumModalInfo:e;s.premiumModalInfo=t,s.showPushModal=s.isSignature()&&!!r.showPushModal,s.showPremiumModal=r.isPremium&&!U.equals(r.premiumModalInfo,{})&&t&&t.status&&!s.showPushModal,s.showSuccessModal=!s.showPushModal&&!s.showPremiumModal}}])}(angular,window.hj),angular.module("Sexlog").controller("TermsOfUseController",["$scope","$modalInstance",function(e,t){e.close=function(){t.close()}}]),function(e){e.module("Sexlog").directive("signupValidator",["$inlineValidator","AccountModel",function(i,r){return{restrict:"AC",require:"ngModel",link:function(e,t,n,o){i(t,o,n.name,r[n.method])}}}]),e.module("Sexlog").directive("subscribeValidator",["$inlineValidator","SubscribeModel",function(i,r){return{restrict:"AC",require:"ngModel",link:function(e,t,n,o){i(t,o,n.name,r[n.method],"SubscribeValidator")}}}])}(angular),function(r){var t=r.module("Sexlog"),e="$modalInstance modalData".split(" ");r.forEach(e,function(e){t.service(e,r.noop)}),t.directive("loginInjected",["$login","$url",function(i,o){return{restrict:"EA",replace:!0,controller:"LoginController",templateUrl:function(e,t){var n=r.isDefined(t.resendPassword)?"&resendPassword=true":"";return o.api("login/template/?inject=true"+n)},link:function(e,t){var n=t.data("config")||{},o=r.extend(i.modalDataDefault(),n);e.setModalData(o),i.injected=!0}}}])}(angular),function(i){i.module("Sexlog").directive("plans",["$detection",function(n){return{restrict:"A",link:function(e,t){setTimeout(function(){var o;n.isMobile()||((o=t.find(".plan")).each(function(e,t){var n=(t=i.element(t)).find(".plan-footer .plan-btn");t.hover(function(){o.addClass("fade hover"),t.removeClass("fade hover"),n.text(n.attr("hover-text")).addClass("active")},function(){o.removeClass("fade hover"),n.text(n.attr("text")).removeClass("active")})}),e.$on("$destroy",function(){o.off("mouseenter mouseleave")}))})}}}])}(angular),function(t){var n=t.module("Sexlog"),e="$modalInstance modalData langs".split(" ");t.forEach(e,function(e){n.service(e,t.noop)}),n.directive("signupInjected",["$signup","$url",function(o,i){return{restrict:"EA",controller:"SignupController",templateUrl:function(e){var t=e[0].dataset.action||"",n=!!window.location.href.includes("cadastro");return i.api(o.URL_PATH+"template?inject=true&action="+t+"&testeab="+n)}}}])}(angular),function(n){n.module("Sexlog").directive("subscribeCarousel",function(){return{restrict:"C",controller:["$scope",function(o){o.setSlide=function(e,t){n.forEach(e,function(e){e.active=!1}),t.active=!0},o.setNexSlide=function(e,t){var n=e.indexOf(t);++n>=e.length&&(n=0),o.setSlide(e,e[n])},o.setPrevSlide=function(e,t){var n=e.indexOf(t);--n<0&&(n=e.length-1),o.setSlide(e,e[n])}}]}})}(angular),angular.module("Sexlog").directive("subscribeHref",["$subscribe",function(o){return{restrict:"AC",link:function(e,n){n.on("click",function(e){e.preventDefault();var t={params:n.data()};o.modal(t)})}}}]),function(S){var t=S.module("Sexlog"),e="$modalInstance modalData plans testimonials".split(" ");S.forEach(e,function(e){t.service(e,S.noop)}),t.directive("subscribeInjected",["$subscribe","$url","$http","$timeout","SubscribeModel","$q","$auth","$templateRequest","$compile","$metric","METRIC","CHECK_SESSION",function(l,c,e,u,d,f,m,p,g,h,v,b){return{restrict:"EA",controller:"SubscribeController",link:function(n,o,i){var e,t=o.data("config")||{},r=S.extend(l.modalDataDefault(),t),a=f.defer();function s(){var e=c.customParams(l.URL_PATH,S.extend({inject:!0,modalClass:i.modalClass},l.params)),t="ACTION-GENERAL";r.params&&r.params.action&&(t=r.params.action),h.setData({modal:v.MODAL.INJECTED,type:v.TYPE.SUBSCRIPTION,action:t}),p(e,{},!1,!0).then(function(e){n.showSuccessModal=!1,n.showPushModal=!0,o.append(g(e)(n)),d.plans(l.params).$promise.then(function(e){n.setPlans(e)}),d.langs().$promise.then(function(e){n.setLangs(e)}),n.setModalData(r),S.isDefined(i.removeFixScreen)&&n.setRemoveFixScreen(i.removeFixScreen),u(function(){n.setElem(o.find(".sl-modal"))}),l.setParams(l.modalDefaults().params)})}b?(e=!0,m.checkSession(e).then(function(e){S.isUndefined(e.template)?a.resolve():a.resolve(e)},function(){a.reject()}),a.promise.then(function(){s()})):s()}}}])}(angular),function(d){var t=d.module("Sexlog"),e="$modalInstance modalData plans testimonials".split(" ");d.forEach(e,function(e){t.service(e,d.noop)}),t.directive("subscribeInjectedToken",["$subscribe","$url","$http","$timeout","SubscribeModel","$lang","TokenModel",function(a,e,t,s,l,c,u){return{restrict:"EA",controller:"SubscribeController",templateUrl:e.base(a.URL_PATH+"/?inject=true&token=true"),link:function(t,e){var n=e.data("config")||{},o={windowClass:"sl-modal sl-subscription-modal sl-subscription-token",keyboard:!0,token:!0,backdrop:"static",onClose:d.noop,title:c("subscribe_token_title"),subtitle:c("subscribe_token_subtitle")},i=d.extend(a.modalDataDefault(),o,n),r=d.extend({token:!0},a.params);l.plans(r).$promise.then(function(e){t.setPlans(e)}),u.langs().$promise.then(function(e){t.setLangs(e)}),i.params=r,t.setModalData(i),a.setParams(r),s(function(){t.setElem(e.find(".sl-modal"))})}}}])}(angular),angular.module("Sexlog").factory("AccountModel",["BaseModel","$url",function(e,t){return new e("account",{checkSession:{method:"GET",url:t.api("account/check-session")},checkSubscription:{method:"GET",url:t.api("account/check-subscription")},checkEmail:{method:"GET",url:t.api("account/check-email")},checkLogin:{method:"GET",url:t.api("account/check-login")},checkPassword:{method:"POST",url:t.api("account/check-password")},disablePromotion:{method:"POST",url:t.api("account/disable-promotion")},getAccount:{method:"GET",url:t.api("account/get-account")}})}]),angular.module("Sexlog").factory("LoginModel",["BaseModel","$url",function(e,t){return new e("login",{forgotPassword:{method:"POST",url:t.api("forgot-password")},changeEmail:{method:"POST",url:t.api("change-email")},changePassword:{method:"POST",url:t.api("change-password")},resendConfirmation:{method:"POST",url:t.api("resend-confirmation")}})}]),angular.module("Sexlog").factory("SignupModel",["BaseModel",function(e){return new e("account/signup")}]),angular.module("Sexlog").factory("SubscribeOneClickModel",["BaseModel","$url",function(e,t){return new e("subscribe",{getCard:{method:"GET",url:t.base("subscribe/one-click")},sign:{method:"POST",url:t.base("subscribe/sign"),requireExperiment:!0},pagseguro:{method:"POST",url:t.base("subscribe/pag-seguro")}})}]),function(o){o.module("Sexlog").factory("SubscribeModel",["BaseModel","$url",function(e,t){var n=+new Date;return new e("subscribe",{close:{method:"GET",url:t.base("subscribe/close/:testab")},plans:{method:"GET",url:t.base("subscribe/plans"),transformResponse:function(e){return e&&(e=o.fromJson(e),o.forEach(e,function(e){o.isObject(e.xdays)&&(e.currency="",e.price={int:e.xdays.title},e.benefits.unshift(e.xdays.link))})),e},isArray:!0,requireExperiment:!0},langs:{method:"GET",url:t.base("subscribe/langs"),isArray:!1},invoice:{method:"POST",url:t.base("service/payment/generate-billet")},pagseguro:{method:"POST",url:t.base("subscribe/pag-seguro")},sign:{method:"POST",url:t.base("subscribe/sign"),requireExperiment:!0},checkCard:{method:"POST",url:t.base("subscribe/card/details")},checkSession:{method:"GET",url:t.base("subscribe/check-session?unique="+n)},pagseguroSession:{method:"GET",url:t.base("subscribe/pag-seguro/session")},pagseguroDebitOnline:{method:"POST",url:t.base("subscribe/pag-seguro/debit-online")},pagseguroProcessing:{method:"GET",url:t.base("service/payment/processing")},disabledNotification:{method:"POST",url:t.base("subscribe/close-expiration-range")},verotel:{method:"POST",url:t.base("subscribe/verotel")},sendBilletByEmail:{method:"POST",url:t.base("service/payment/billet-send")},invoiceTestAB:{method:"GET",url:t.base("service/experiment/boleto/get")},tokens:{method:"POST",url:t.base("subscribe/with-tokens")},bankTransfer:{method:"POST",url:t.base("service/payment/bank-transfer/subscribe")}})}])}(angular),angular.module("Sexlog").factory("TokenModel",["BaseModel","$url",function(e,t){var n=+new Date;return new e("token",{langs:{method:"GET",url:t.base("subscribe/token/langs"),isArray:!1},getBalance:{method:"GET",url:t.api("token/balance?unique="+n)}})}]),function(d,f){d.module("Sexlog").factory("$account",["$q","$timeout","$subscribe","$signup","$modalLoading","$auth",function(e,r,a,s,t,n){var o=e.defer(),i=!1,l={URL_PATH:"account/"};function c(e){return n.checkSession(e).then(function(e){d.isUndefined(e.template)?o.resolve():o.resolve(e)},function(){o.reject()}),o.promise}function u(e){var t;return d.isFunction(e.onClose)?(t=e.onClose,e.onClose=function(){l.close(),t()}):e.onClose=l.close,e}return l.modal=function(t,e){l.isOpen()&&!e||(t=u(t=t||{}),c(!0).then(function(e){d.isUndefined(e)||(t.template=e.template),a.modal(t)},function(){s.modal(t)}),l.isOpen(!0)),l.isOpen()&&l.injected()&&f("html, body").animate({scrollTop:d.element("#divSubscribeTransactionInvoice").length?d.element("#divSubscribeTransactionInvoice").offset().top:0},500)},l.injected=function(){return s.$modalScope?s.$modalScope.injected:!!a.$modalScope&&a.$modalScope.injected},l.isOpen=function(e){return d.isUndefined(e)||(i=e),i},l.close=function(){l.isOpen(!1),t.restoreScroll()},f.fn.injectAccount=function(e){var t=f(this),n={};if(!l.injected())return t.each(function(){c(!0).then(function(){a.inject(t,e)},function(){s.inject(t,e)}),l.isOpen(!0)});var o=f(".sl-modal.injected"),i=o.parent().parent();if(i.length&&i.attr("id")!==this.attr("id")&&d.isUndefined(s.$modalScope))return i.empty(),e.onClose=function(){r(function(){a.setActiveTab(),a.getForm().$setPristine(),i.injectAccount(n)},500)},e=u(e),n=d.extend({},a.params,a.$modalScope.modal),void l.modal(e,!0);o.length?f("html, body").animate({scrollTop:o.offset().top-50},500):(s.$modalScope&&(s.$modalScope.injected=!1),a.$modalScope&&(a.$modalScope.injected=!1),l.isOpen(!1),t.injectAccount(e))},l}])}(angular,(window,window.jQuery)),function(t){t.module("Sexlog").factory("$antiFraude",function(){var e={getCode:function(){return parseInt(t.element("#referenceCode").val())||0}};return e})}(angular),function(l){var c="login",u="forget-password",d="confirm-forget-password";l.module("Sexlog").factory("$login",["$modalLoading","$modal","$compile","$rootScope","LoginModel",function(t,n,e,o,i){var r={view:c},a={windowClass:"sl-modal login",size:"sm",keyboard:!0},s={onClose:l.noop,onSuccess:l.noop};return r.modal=function(e){return e=e||{},r.setParams(e.params),t.create(),r.goToLogin(),n.open(l.extend({templateUrl:i.templateUrl(),controller:"LoginController",resolve:{modalData:function(){return l.extend(s,e)},langs:function(){return{}}}},a))},r.inject=function(t,n){if(!t.jquery)throw new Error("Ã necessÃ¡rio informar o elemento onde o modal vai ser injetado.");e("<div login-injected />")(o.$new(),function(e){e.prependTo(t),e.data("config",n)}),r.setParams(n.params)},r.modalDataDefault=function(){return s},r.setModalScope=function(e){r.$modalScope=e},r.setParams=function(e){r.params=e||{}},r.goToLogin=function(){r.view=c},r.goToPassword=function(){r.view=u},r.goToConfirmPassword=function(){r.view=d},r.isLogin=function(){return r.view===c},r.isPassword=function(){return r.view===u},r.isConfirmPassword=function(){return r.view===d},r}])}(angular),function(m){m.module("Sexlog").factory("$signup",["$rootScope","$compile","$timeout","$modal","$window","$url","$modalLoading","$lang","SignupModel","$templateCache",function(o,i,e,n,t,r,a,s,l,c){var u={URL_PATH:"account/signup/"},d={windowClass:"sl-modal signup",keyboard:!0,backdrop:"static"},f={onClose:m.noop};return u.modal=function(e){var t;return e=e||{},u.setParams(e.params),a.create(),d.windowClass="sl-modal signup-onboarding-modal",t=n.open(m.extend({templateUrl:l.templateUrl(u.params),controller:"SignupController",resolve:{modalData:function(){return m.extend({},f,e)},langs:function(){return l.langs().$promise.then(function(e){return e})}}},d)),c.remove(l.templateUrl()),t},u.inject=function(t,n){var e="";if(!t.jquery)throw new Error("Ã necessÃ¡rio informar o elemento onde o modal vai ser injetado.");n.params.action&&(e="action = "+n.params.action),i("<div signup-injected "+e+" />")(o.$new(),function(e){e.prependTo(t),e.data("config",n)}),u.setParams(n.params)},u.setParams=function(e){u.params=e||{},u.params.referrer=r.referrer()},u}])}(angular),function(b){b.module("Sexlog").factory("$subscribeOneClick",["$q","$screen","$url","$timeout","$lang","$modalLoading","$modal","$metric","SubscribeModel","SubscribeOneClickModel","METRIC","MODAL_TYPE","$rootScope",function(n,r,a,o,e,i,s,l,c,u,d,t,f){var m={URL_TEMPLATE:"subscribe/subscribe-one-click",controller:"SubscribeOneClickController",PAYMENTS:{CREDIT:"credit",PAGSEGURO:"pagseguro"},STATUS:{ERROR:-207,SUCCESS:"0000",SUCCESS_REDIRECT:"0000r",PAGSEGURO:"0000p",PAGSEGURO_CREDIT:"0202"},type:t.TOKEN,selectedPlan:null,premiumPlan:!1},p={},g={windowClass:"sl-modal subscribe-one-click",size:"sm",keyboard:!1,backdrop:"static"},h={hasCarousel:!0,size:"sm",title:"",subtitle:"",titleClass:"large primary text-center",headerClass:"",bodyClass:"no-padding",footerClass:"",onClose:b.noop,onSuccess:b.noop},v={activePayment:m.PAYMENTS.CREDIT};return m.init=function(e,t){m.testab=e,m.showPushModal=t,l.setTestABPageId(e),l.saveEvent(d.EVENT.OPENED_MODAL)},m.modal=function(e){e=e||{},m.setModalParent(e);var t={params:b.extend({onebuy:!0},e.params)};return e.onSuccess&&b.extend(t,{onSuccess:e.onSuccess}),e.onClose&&b.extend(t,{onClose:e.onClose}),e.title&&b.extend(t,{title:e.title}),e.subtitle&&b.extend(t,{subtitle:e.subtitle}),e.type&&(m.type=e.type,b.extend(t,{windowClass:g.windowClass+" "+m.type})),e.params&&e.params.premium&&(m.premiumPlan=e.premiumPlan,t.windowClass+=" sl-modal-one-click-premium"),m.setParams(t.params),i.create(),f.$broadcast("SUBSCRIBE_MODAL_LOADING"),s.open(b.extend({templateUrl:m.getTemplateUrl(),controller:m.controller,resolve:{modalData:function(){return b.extend(b.copy(h)||{},t)},plans:function(){return c.plans(t.params).$promise.then(function(e){return e})},card:function(){return u.getCard({type:m.type}).$promise.then(function(e){return e})},screen:function(){var e=n.defer();return o(function(){return e.resolve(r)}),e.promise},langs:function(){return c.langs().$promise.then(function(e){return e})}}},g,t))},m.setModalParent=function(e){p=b.copy(e)},m.getModalParent=function(){return p},m.isCredit=function(){return v.activePayment===m.PAYMENTS.CREDIT},m.isPagseguro=function(){return v.activePayment===m.PAYMENTS.PAGSEGURO},m.setModalScope=function(e){m.$modalScope=e},m.getTemplateUrl=function(e){return a.customParams(e||a.api(m.URL_TEMPLATE),m.params)},m.setParams=function(e){m.params=e||{},m.params.referrer=a.referrer()},m.setPlan=function(e){m.selectedPlan=e,m.$modalScope.subscription.gatewayId=e.gatewayId,m.$modalScope.subscription.autorecharge=e.tokenRepurchase.enable,m.params=b.extend(m.params,{planId:e.id})},m.setPlanId=function(e){m.params=b.extend(m.params,{planid:e})},m.goTo=function(e){var t=m.$modalScope[e];t&&t.apply()},m.pagseguro=function(){v.activePayment=m.PAYMENTS.PAGSEGURO,m.saveProcess()},m.credit=function(){v.activePayment=m.PAYMENTS.CREDIT,m.saveProcess()},m.recoverSetting=function(){var e=m.getModalParent();return e.params=b.extend({action:m.params.action,planid:m.params.planid,token:m.params.token},e.params),e},m.saveProcess=function(){m.$modalScope.subscription.testeab=m.testab,m.$modalScope.process(e("subscribe_pleaseWait")).then(function(e){var t=m.recoverSetting();switch((e=e[0]).result&&e.result.langkey&&(t.params.langkey=e.result.langkey),e.returncode){case m.STATUS.ERROR:l.saveEvent(d.EVENT.FAIL_SUBSCRIPTION),m.$modalScope.error(t);break;case m.STATUS.SUCCESS:m.premiumModalInfo=e.result.premiumPlotInfo,l.saveEvent(d.EVENT.SUCCESS_SUBSCRIPTION),m.$modalScope.success(t);break;case m.STATUS.PAGSEGURO_CREDIT:var n=0,o={transactionId:e.result.transactionId},i=setInterval(function(){8<=++n&&(m.$modalScope.successPagseguro(t),clearInterval(i)),c.pagseguroProcessing(o).$promise.then(function(e){e.captured&&(m.premiumModalInfo=e.premiumPlotInfo,m.$modalScope.success(t),clearInterval(i)),e.error&&(m.$modalScope.fatalError().then(function(){m.$modalScope.subscribeErrorMessage=e.message}),clearInterval(i))})},3e3);l.saveEvent(d.EVENT.SUCCESS_SUBSCRIPTION_PAGSEGURO);break;case m.STATUS.PAGSEGURO:m.isPagseguro()&&(l.saveEvent(d.EVENT.OPENED_PAGSEGURO),m.$modalScope.pagseguro(t).then(function(){r.isMobile()&&(e.returnmessage=e.returnmessage.replace("pagseguro","m.pagseguro")),m.$modalScope.pagseguroUrl=e.returnmessage}));break;case m.STATUS.SUCCESS_REDIRECT:a.redirect(e.returnmessage);break;default:l.saveEvent(d.EVENT.FAIL_SUBSCRIPTION),m.$modalScope.fatalError(t).then(function(){m.$modalScope.subscribeErrorMessage=e.returnmessage})}})},m}])}(angular),function(L,R){L.module("Sexlog").factory("$subscribe",["$q","$timeout","$url","$modal","$screen","$lang","$compile","$rootScope","$browser","$document","$modalLoading","$auth","$signup","$subscribeOneClick","$interval","$antiFraude","$metric","$scroll","METRIC","SubscribeModel","TokenModel","CHECK_SESSION","MODAL_TYPE","TAB","$metricPremium",function(a,r,s,t,l,c,e,i,o,n,u,d,f,m,p,g,h,v,b,S,$,y,E,w,T){var C,P={URL_PATH:"subscribe",URL_PLANS:"subscribe/plans",URL_LANGS:"subscribe/langs",URL_PROCESS:"service/payment/generate-billet",PAYMENTS:{CREDIT:"credit",DEBIT:"debit",INVOICE:"invoice",PAGSEGURO:"pagseguro",DEBITOONLINE:"debitonline",VEROTEL:"verotel",TOKENS:"tokens",BANK_TRANSFER:"banktransfer",PIX:"pix"},CARDS:{VISA:"visa",MASTER:"mastercard",VISAELECTRON:"visaelectron"},BANKS:{bancodobrasil:"Banco do Brasil",banrisul:"Banrisul",bradesco:"Bradesco",itau:"ItaÃº"},STATUS:{ERROR:-207,SUCCESS:"0000",SUCCESS_REDIRECT:"0000r",INVOICE:"0000i",PAGSEGURO:"0000p",PAGSEGURO_CREDIT:"0202",POPPUP:"0000pp",VEROTEL:"0000v",PAYMEE:"0000pm",PAGSEGURO_PIX:"0000pixps"},plans:{valid:!1},subscribe:{valid:!1},payment:{valid:!1},modalOpened:!1,$modalScope:{},hasAntifraude:!1,isPremium:!1,paymeeBankInfo:null,paymentType:null},_={windowClass:"sl-modal sl-subscription-modal",size:"lg",keyboard:!1,backdrop:"static",params:{showcredit:!0,showdebit:!0,showdebitonline:!0,showinvoice:!0,showverotel:!0,showTokens:!0,showBankTransfer:!0,showPix:!0}},M={hasCarousel:!1,size:"lg",title:c("subscribe_title"),subtitle:c("subscribe_subtitle"),titleClass:"large primary text-center",headerClass:"",bodyClass:"no-padding",footerClass:"",onClose:L.noop,onSuccess:L.noop},A={activeTab:w.PLANS,activePayment:P.PAYMENTS.CREDIT,plans:null},I=null,x=null,k=null;function O(e,t){return C=a.defer(),d.checkSession(e,t).then(function(e){C.resolve(e)},function(){C.reject()}),C.promise}function N(e){var t={modalData:function(){return L.extend(L.copy(M)||{},e)},plans:function(){return S.plans(e.params).$promise.then(function(e){return A.plans=e})}};return L.extend(e.resolve||{},t)}function D(n,o){u.create(),i.$broadcast("SUBSCRIBE_MODAL_LOADING");var e=t.open(o);return e.opened.then(function(){var e,t;o.params.premium?(P.isPremium=!0,n.plans=n.plans.map(function(e){return+e.id==+o.premiumPlan.id&&(e.selectedPlan=!0,e.parcs=o.premiumPlan.parcs,e.nameChosen=o.premiumPlan.nameChosen,e.buttonSuccess=o.premiumPlan.buttonSuccess),e})):P.isPremium=!1,P.$modalScope.savedCard=n.savedCard,e=o.aditionalData,t=n.plans,(P.$modalScope.cardForm||P.isPremium||e.params.payment)&&P.setPlan(P.findCurrentPlan(t)),L.isDefined(e.params)&&L.isDefined(e.params.payment)&&(P.showPayment(e.params.payment),P.setActivePayment(e.params.payment)),P.isPremium||P.$modalScope.cssSelectedPlan(P.findCurrentPlan(t))}),e}return P.init=function(e,t,n,o){P.testab=e,P.hasAntifraude=!!t,P.isNewModal="subscribe-new-modal"===n,P.showPushModal=o,this.showFlagBankError=!1,h.setAntifraude(P.hasAntifraude),h.setTestABPageId(e),h.saveEvent(b.EVENT.OPENED_MODAL)},P.modal=function(n,e){var o={},t={};v.getPosition();e=!!L.isDefined(e)&&e,(n=n||{}).params&&(n.params.preventOneBuy&&L.extend(t,{preventOneBuy:n.params.preventOneBuy}),n.params.action&&L.extend(t,{action:n.params.action}),n.params.planid&&L.extend(t,{planid:n.params.planid}));var i=L.extend({},_.params,n.params||{});if(_.windowClass="sl-modal sl-subscription-modal",_.windowClass=_.windowClass+" subscribe-new-modal",P.setParams(i),L.isDefined(n.template)){if(n.params.template=n.template,o=L.extend(_,{templateUrl:P.getTemplateUrl(),controller:"SubscribeController",windowClass:"sl-modal sl-subscription-modal "+(n.windowClass||"sucesso"),size:n.size||"",resolve:N(n)}),!y||o.token||e)return o.aditionalData=n,D(A,o);O(!0,t).then(function(e){var t=!(!e||!e.hasOwnProperty("oneclick"))&&e.oneclick;return L.isDefined(e.template)&&(n.params.template=n.template=e.template,L.extend(o,{resolve:N(n)})),t?(o=L.extend(o,{type:E.SUBSCRIPTION}),h.instance.onebuy=1,m.modal(o)):(o.aditionalData=n,D(A,o))})}if(n.resolve={screen:function(){var e=a.defer();return r(function(){return e.resolve(l)}),e.promise},langs:function(){return P.isTokenModal()?$.langs().$promise.then(function(e){return e}):S.langs().$promise.then(function(e){return e})}},P.modalOpened=!0,o=L.extend({templateUrl:P.getTemplateUrl(),controller:"SubscribeController",resolve:N(n)},_,n),h.initialized||h.setData({action:o.params.action,type:o.params.token||o.token?b.TYPE.TOKEN:b.TYPE.SUBSCRIPTION,modal:b.MODAL.POPUP}),!y||o.token||e)return o.aditionalData=n,D(A,o);O(!0,t).then(function(e){var t=!(!e||!e.hasOwnProperty("oneclick"))&&e.oneclick;return L.isDefined(e.template)&&(n.params.templateUrl=n.templateUrl=e.template,n.size="md",n.windowClass="sl-modal sl-subscription-modal",e.template.includes("success")&&(n.windowClass="".concat(n.windowClass," sucesso")),L.extend(o,{resolve:N(n)},n)),t?(o=L.extend(o,{type:E.SUBSCRIPTION}),h.instance.onebuy=1,m.modal(o)):(o.aditionalData=n,D(A,o))})},P.inject=function(t,n){if(!t.jquery)throw new Error("Ã necessÃ¡rio informar o elemento onde o modal vai ser injetado.");P.setParams(n.params),e("<div subscribe-injected />")(i.$new(),function(e){e.prependTo(t),e.data("config",n)})},P.isTokenModal=function(){if(P.params)return P.params.token},P.setPlan=function(e,t){var n;e&&(R.hj&&R.hj("tagRecording",["payment-step"]),P.selectedPlan=e,P.clearPayment(),d.isLogged()?P.setActiveTab(w.PAYMENT):P.setActiveTab(w.SUBSCRIBE),l.isDesktop()&&P.setActivePayment(P.PAYMENTS.CREDIT),P.selectedPlan.showVerotel&&P.setActivePayment(P.PAYMENTS.VEROTEL),P.plans.valid=!0,P.$modalScope.subscription.planid=e.id,P.$modalScope.subscription.autorecharge=e.tokenRepurchase.enable,P.$modalScope.setPlots(),v.to(0,0,".modal"),t&&(h.setDescription(e.nameChosen),h.saveEvent(b.EVENT.CHOSEN_PLAN)),P.showDebit()||P.showInvoice()||P.showDebitOnline()||P.showPix()||P.showBankTransfer()||(n=P.showVerotel()?P.PAYMENTS.VEROTEL:P.PAYMENTS.CREDIT,P.setActivePayment(n)),P.params=L.extend(P.params,{planId:e.id}),P.selectedPlan.showTokens&&(P.tokenPlanValue=P.selectedPlan.priceInTokens.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),r(function(){P.selectedTokenProduct=P.tokenPlansValues.filter(function(e){if(parseInt(e.period)===P.selectedPlan.period)return e.productid}).map(function(e){return e.productid})})))},P.clearPlan=function(e){P.setActiveTab(w.PLANS),P.selectedPlan=null,P.plans.valid=!1,e&&h.saveEvent(b.EVENT.CHANGE_TAB)},P.clearPayment=function(){P.setActiveTab(w.PAYMENT),A.activePayment=null},P.clear=function(){P.clearPlan(),P.clearPayment()},P.setActiveTab=function(e){P.selectedPlan&&(A.activeTab=e||w.PLANS,r(function(){i.$broadcast("changeTab")}))},P.isActiveTab=function(e){return A.activeTab===e},P.changeTabs=function(e,t){P.isPremium||(P[e].valid&&P.setActiveTab(t),h.saveEvent(b.EVENT.CHANGE_TAB))},P.setActivePayment=function(e,t){A.activePayment=e;var n=P.$modalScope.subscription.flag;if(L.isDefined(n)&&(P.isDebit()&&(n===P.CARDS.VISA&&(n=P.CARDS.VISAELECTRON),n===P.CARDS.MASTER&&(n=P.CARDS.MAESTRO)),P.isCredit()&&(n===P.CARDS.VISAELECTRON&&(n=P.CARDS.VISA),n===P.CARDS.MAESTRO&&(n=P.CARDS.MASTER)),P.$modalScope.subscription.flag=n),t)switch(e){case P.PAYMENTS.CREDIT:h.saveEvent(b.EVENT.CHOSEN_CREDIT);break;case P.PAYMENTS.DEBIT:h.saveEvent(b.EVENT.CHOSEN_DEBIT);break;case P.PAYMENTS.INVOICE:h.saveEvent(b.EVENT.CHOSEN_INVOICE);break;case P.PAYMENTS.DEBITOONLINE:h.saveEvent(b.EVENT.CHOSEN_ONLINE_DEBIT);break;case P.PAYMENTS.VEROTEL:h.saveEvent(b.EVENT.CHOSEN_VEROTEL);break;case P.PAYMENTS.TOKENS:P.calcTotalTokens(),h.saveEvent(b.EVENT.CHOSEN_TOKENS);break;case P.PAYMENTS.BANK_TRANSFER:h.saveEvent(b.EVENT.CHOSEN_BANK_TRANSFER);break;case P.PAYMENTS.PIX:h.saveEvent(b.EVENT.CHOSEN_PIX)}r(function(){i.$broadcast("changeTab")}),P.showBank=!1},P.calcTotalTokens=function(){P.originalTokens=parseFloat(P.tokenOwned.replace(".",""))-P.selectedPlan.priceInTokens,P.finalTokens=P.originalTokens<0?-1*P.originalTokens:P.originalTokens,P.finalTokens=P.finalTokens.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")},P.modalDefaults=function(){return _},P.modalDataDefault=function(){return M},P.isPlans=function(){return A.activeTab===w.PLANS},P.isSubscribe=function(){return A.activeTab===w.SUBSCRIBE},P.isPayment=function(){return A.activeTab===w.PAYMENT},P.isAntifraude=function(){return A.activeTab===w.ANTIFRAUDE},P.isCredit=function(){return A.activePayment===P.PAYMENTS.CREDIT},P.isVerotel=function(){return A.activePayment===P.PAYMENTS.VEROTEL},P.isTokens=function(){return A.activePayment===P.PAYMENTS.TOKENS},P.isDebit=function(){return A.activePayment===P.PAYMENTS.DEBIT},P.isInvoice=function(){return A.activePayment===P.PAYMENTS.INVOICE},P.isPagseguro=function(){return A.activePayment===P.PAYMENTS.PAGSEGURO},P.isDebitOnline=function(){var e=A.activePayment===P.PAYMENTS.DEBITOONLINE;return e&&L.isUndefined(A.PagSeguroSessionId)&&(i.$subscribe.waiting=!0,A.PagSeguroSessionId="0",P.$modalScope.createScriptPagSeguro(n[0],P.$modalScope.urlPagSeguro,function(){P.pagSeguroSession()})),e},P.isBankTransfer=function(){return A.activePayment===P.PAYMENTS.BANK_TRANSFER},P.isPix=function(){return A.activePayment===P.PAYMENTS.PIX},P.isExterior=function(){return P.$modalScope.isExterior},P.isAvailableDebitOnline=function(e){if(!L.isUndefined(i.$subscribe.pagseguroDebitAvailable))switch(e){case"bancodobrasil":return"AVAILABLE"===i.$subscribe.pagseguroDebitAvailable.BANCO_BRASIL.status;case"banrisul":return"AVAILABLE"===i.$subscribe.pagseguroDebitAvailable.BANRISUL.status;case"bradesco":return"AVAILABLE"===i.$subscribe.pagseguroDebitAvailable.BRADESCO.status;case"itau":return"AVAILABLE"===i.$subscribe.pagseguroDebitAvailable.ITAU.status;default:return!1}return!1},P.pagSeguroSession=function(){P.isDebitOnline()&&(i.$subscribe.waiting=!0,S.pagseguroSession().$promise.then(function(e){A.PagSeguroSessionId=e.session,PagSeguroDirectPayment.setSessionId(e.session),PagSeguroDirectPayment.getPaymentMethods({success:function(e){e.error||(i.$subscribe.pagseguroDebitAvailable=e.paymentMethods.ONLINE_DEBIT.options),i.$subscribe.waiting=!1,i.$apply()},error:function(){i.$subscribe.waiting=!1}})}))},P.hasPayment=function(){return A.activePayment},P.hasSelectedPlan=function(){return P.selectedPlan},P.isXDays=function(){if(P.hasSelectedPlan())return L.isDefined(P.selectedPlan.xdays)},P.isGift=function(){return P.params.to},P.showDebit=function(){if(P.hasSelectedPlan())return!P.isXDays()&&P.selectedPlan.showDebit&&P.params.showdebit},P.showCredit=function(){if(P.hasSelectedPlan())return P.selectedPlan.showCredit&&P.params.showcredit},P.showBankTransfer=function(){if(P.hasSelectedPlan())return P.selectedPlan.showBankTransfer&&P.params.showBankTransfer},P.showDebitOnline=function(){if(P.hasSelectedPlan())return!P.isXDays()&&P.selectedPlan.showDebitOnline&&P.params.showdebitonline},P.showVerotel=function(){if(P.hasSelectedPlan())return!P.isXDays()&&P.selectedPlan.showVerotel&&P.params.showverotel},P.showTokens=function(){if(P.hasSelectedPlan())return P.selectedPlan.showTokens&&P.params.showTokens},P.showInvoice=function(){if(P.hasSelectedPlan())return!P.isXDays()&&P.selectedPlan.showInvoice&&P.params.showinvoice},P.showPix=function(){if(P.hasSelectedPlan())return P.selectedPlan.showPix&&P.params.showPix},P.showPayment=function(e){if(!e)throw"Argumento Ã© obrigatÃ³rio";switch(e){case P.PAYMENTS.DEBIT:P.selectedPlan.showDebit=P.params.showdebit=!0;break;case P.PAYMENTS.DEBITOONLINE:P.selectedPlan.showDebitOnline=P.params.showdebitonline=!0;break;case P.PAYMENTS.INVOICE:P.selectedPlan.showInvoice=P.params.showinvoice=!0}},P.setModalScope=function(e){P.$modalScope=e,P.clearPlan(),P.clearPayment(),P.setActivePayment(P.PAYMENTS.CREDIT)},P.setModalScopeFormInvoice=function(e){P.$modalScope.subscribeFormInvoice=e},P.getForm=function(){if(!P.isPagseguro()&&!P.isVerotel())return P.isDebit()?P.$modalScope.subscribeFormDebit:P.isCredit()?P.hasAntifraude&&P.$modalScope.subscribeFormCredit.$valid&&l.isDesktop()||P.isAntifraude()?P.$modalScope.subscribeFormCreditAntifraude:P.$modalScope.subscribeFormCredit:P.isDebitOnline()?P.$modalScope.subscribeFormDebitOnline:P.isInvoice()?P.$modalScope.subscribeFormInvoice:P.isBankTransfer()?P.$modalScope.subscribeFormTransfer:P.isPix()?P.$modalScope.subscribeFormPix:void 0},P.save=function(){if(R.hj&&R.hj("tagRecording",["submit-subscribe"]),P.isTokens()){P.saving=!0;var e=c("subscribe_pleaseWait");return P.$modalScope.process(e),void S.tokens({productid:P.selectedTokenProduct[0]}).$promise.then(function(){P.saving=!1,P.$modalScope.success()}).catch(function(e){P.$modalScope.fatalError().then(function(){P.$modalScope.subscribeErrorMessage=e.data.validationMessage,P.saving=!1})})}var t=a.defer();P.isVerotel()&&(I=o.ie()?R.open("","","width="+screen.width/2+",height="+screen.height/2):R.open("","Verotel","width="+screen.width/2+",height="+screen.height/2));var n=P.getForm();if(P.formIsValid(n))return P.isDebitOnline()&&(this.showFlagBankError=!1,P.openPopup("DÃ©bito - PagSeguro")),P.isPix()&&(P.$modalScope.subscription.bankTransfer.cCFlag="pix"),(P.isPix()||P.isBankTransfer())&&(P.$modalScope.subscription.paymentType=A.activePayment),P.saveProcess().finally(function(){t.resolve()}),P.setActiveTab(w.PAYMENT),t.promise},P.formIsValid=function(e){var t,n,o,i,r="";return L.isUndefined(e)||(e.$submited=!0,P.isDebitOnline()&&!this.flagbank&&(this.showFlagBankError=!0,this.flagBankErrorMessage=c("subscribe_invalid_flag_bank"),r+="flag-bank;"),!e.$pristine&&!e.$invalid||P.retry||(e.$pristine=!1,e.$dirty=!0,L.forEach(e.$error,function(e){L.forEach(e,function(e){var t;e.$error&&(e.$inlineValidator&&(e.$pristine=!1,e.$dirty=!0,e.$inlineValidator.offlineValidation()),t=new RegExp(e.$name,"g"),r.match(t)||(r+=e.$name+";"))})}),e.$$controls.forEach(function(e){e.$error&&e.$inlineValidator&&(e.$pristine=!1,e.$dirty=!0,e.$inlineValidator.offlineValidation())}),r&&(t=e,n=L.element('[name="'+t.$name+'"]').find(".has-error")[0],o=L.element(".sl-subscription-modal"),i=L.element(".sl-subscription-modal").scrollTop()-(Math.abs(n.getBoundingClientRect().top)+15),o.scrollTop(i),h.setDescription(r),h.saveEvent(b.EVENT.FAIL_FORM)))),!r},P.saveProcess=function(){h.saveEvent(b.EVENT.CONFIRM_FORM),P.saving=!0;var e=f.user;return e?(e.lpSignUpSubscribe=!0,void P.$modalScope.saveSignup(e,c("subscribe_pleaseWait")).then(function(){P.saveSubscribe()})):P.saveSubscribe()},P.saveSubscribe=function(){var r=a.defer();P.$modalScope.subscription.testeab=P.testab,P.$modalScope.subscription.referenceCode=g.getCode(),P.isCredit()&&P.$modalScope.subscription.card.date&&(P.$modalScope.subscription.card.month=P.$modalScope.subscription.card.date.split("/")[0],P.$modalScope.subscription.card.year=Number("20".concat(P.$modalScope.subscription.card.date.split("/")[1]))),P.isCredit()&&(P.$modalScope.subscription.cardHash=P.getMoipHash(P.$modalScope.subscription.card));var e=[c("subscribe_modal_success_pagseguro_processing_1"),c("subscribe_modal_success_pagseguro_processing_2"),c("subscribe_modal_success_pagseguro_processing_3")],t=P.isCredit()?e:c("subscribe_pleaseWait");return P.$modalScope.process(t).then(function(n){switch(n=n[0],P.saving=!1,n.returncode){case P.STATUS.ERROR:var e={};n.result.langkey&&(e.langkey=n.result.langkey),P.$modalScope.error(e),(P.isDebitOnline()||P.isVerotel())&&(x&&(p.cancel(x),x=null),p.cancel(k),I.close(),P.pagSeguroSession()),r.reject(),h.saveEvent(b.EVENT.FAIL_SUBSCRIPTION);break;case P.STATUS.INVOICE:P.isInvoice()&&(P.$modalScope.invoice().then(function(){var e=n.result.limitDate.replace(/\/[0-9]+$/,""),t=n.result.code.replace(/ /g,"").replace(/\./g,"");P.$modalScope.invoiceId=n.result.id,P.$modalScope.formatedCode=n.result.code,P.$modalScope.rawCode=t,P.$modalScope.limitDate=e}),r.resolve(),h.saveEvent(b.EVENT.OPENED_INVOICE));break;case P.STATUS.VEROTEL:P.isVerotel()&&(I.location=n.returnmessage,P.isTokenModal()?s.redirect(s.base(P.$modalScope.langs.link_myaccount_credits)):s.redirect(P.$modalScope.langs.link_account_subscription),r.resolve(),h.saveEvent(b.EVENT.OPENED_VEROTEL));break;case P.STATUS.PAGSEGURO:P.isPagseguro()&&(P.params.template="pagseguro",P.$modalScope.pagseguro().then(function(){P.$modalScope.pagseguroUrl=n.returnmessage,r.resolve()}),h.saveEvent(b.EVENT.OPENED_PAGSEGURO));break;case P.STATUS.PAGSEGURO_CREDIT:var t=0,o={transactionId:n.result.transactionId};if(n.result.waitingCardChange)return P.$modalScope.waitingChange(),void r.resolve();var i=setInterval(function(){8<=++t&&(P.$modalScope.successPagseguro(),r.resolve(),clearInterval(i)),S.pagseguroProcessing(o).$promise.then(function(e){e.captured&&(P.premiumModalInfo=e.premiumPlotInfo,P.$modalScope.transactionId=n.result.transactionId,P.$modalScope.success(),r.resolve(),clearInterval(i)),e.error&&(P.$modalScope.fatalError().then(function(){P.$modalScope.subscribeErrorMessage=e.message,r.reject()}),clearInterval(i))})},3e3);h.saveEvent(b.EVENT.SUCCESS_SUBSCRIPTION_PAGSEGURO);break;case P.STATUS.POPPUP:I.location=n.returnmessage,r.resolve(),h.saveEvent(b.EVENT.OPENED_ONLINE_DEBIT);break;case P.STATUS.PAGSEGURO_PIX:case P.STATUS.PAYMEE:P.isBankTransfer()&&(P.$modalScope.bankTransfer().then(function(){P.paymeeBankInfo=n}),h.saveEvent(b.EVENT.OPENED_BANK_TRANSFER)),P.isPix()&&P.$modalScope.pix().then(function(){P.paymeePix=n}),r.resolve();break;case P.STATUS.SUCCESS:P.premiumModalInfo=n.result.premiumPlotInfo,P.$modalScope.transactionId=n.result.transactionId,P.$modalScope.success(),r.resolve(),h.saveEvent(b.EVENT.SUCCESS_SUBSCRIPTION);break;case P.STATUS.SUCCESS_REDIRECT:s.redirect(n.returnmessage),P.saving=!1,r.resolve(),h.saveEvent(b.EVENT.SUCCESS_SUBSCRIPTION);break;default:P.$modalScope.fatalError().then(function(){P.isDebitOnline()&&(p.cancel(k),I.close(),P.pagSeguroSession()),P.$modalScope.subscribeErrorMessage=n.returnmessage}),r.reject(),h.saveEvent(b.EVENT.FAIL_SUBSCRIPTION)}}),r.promise},P.openPopup=function(e){I=o.ie()?R.open("","","width="+screen.width/2+",height="+screen.height/2):R.open("",e,"width="+screen.width/2+",height="+screen.height/2),k=p(function(){I.closed&&(P.$modalScope.$modalInstance.close(),p.cancel(k))},1e3),P.isTokenModal()||(x=p(function(){try{null!==I&&!I.openedWindowclosed||(p.cancel(x),x=null,s.redirect(P.$modalScope.langs.link_account_subscription))}catch(e){}},1e3))},P.goTo=function(e,t){var n=P.$modalScope[e];n&&n.call(P,t)},P.pagseguro=function(){P.setActivePayment(P.PAYMENTS.PAGSEGURO),P.save(),h.saveEvent(b.EVENT.CHOSEN_PAGSEGURO)},P.getTemplateUrl=function(e){return!P.isNewModal&&P.params.injected&&e?s.customParams(e):s.customParams(e||s.base(P.URL_PATH),P.params)},P.setParams=function(e){P.params=e||{},P.params.referrer=s.referrer()},P.findCurrentPlan=function(e){var t=e.filter(function(e){return e.selectedPlan});return 0===t.length&&(t=e.filter(function(e){return e.default})),t[0]},P.setCreditCard=function(){P.$modalScope.subscription.flag=P.CARDS.MASTER},P.getModalTitle=function(e){return e||P.$modalScope.modal.title},P.getModalSubtitle=function(e){return e||P.$modalScope.modal.subtitle},P.getMoipHash=function(e){var t={number:e.number,cvc:e.securityCode,expMonth:e.month,expYear:e.year.toString(),pubKey:P.$modalScope.CARD_HASH.MOIP};return new R.Moip.CreditCard(t).hash()},P.goToPremium=function(e,t){T.saveAction(e).then(function(){s.redirect(t)})},P}])}(angular,(jQuery,window)),function(f){f.module("Sexlog").factory("$token",["$lang","$subscribe","$signup","$subscribeOneClick","$metric","SubscribeModel","TokenModel","MODAL_TYPE","METRIC",function(e,i,n,r,a,s,t,l,c){var u={balance:null,balanceformat:null},d={windowClass:"sl-modal sl-subscription-modal sl-subscription-token",keyboard:!0,backdrop:"static",token:!0,onClose:f.noop,title:e("subscribe_token_title"),subtitle:e("subscribe_token_subtitle")};return u.modal=function(e){a.setData({type:c.TYPE.TOKEN,modal:c.MODAL.POPUP,action:e.params.action}),(e=e||{}).params=f.extend({token:!0,preventOneBuy:null},e.params);var t,o=f.extend({params:e.params},d,e);return t=e.params.preventOneBuy,s.checkSession({token:!0,preventOneBuy:t}).$promise.then(function(e){var t,n=!(!e||!e.hasOwnProperty("oneclick"))&&e.oneclick;return f.isFunction(o.onSuccess)&&(t=f.copy(o.onSuccess)),o.onSuccess=function(){u.updateBalance(),f.isFunction(t)&&(n?t.call(r,r.$modalScope):t.call(i,i.$modalScope))},n?(o=f.extend(o,{type:l.TOKEN}),a.instance.onebuy=1,r.modal(o)):i.modal(o)},function(){n.modal(e)})},u.setBalance=function(e){f.isDefined(e)&&(u.balance=e)},u.getBalance=function(){return u.balance},u.setBalanceFormat=function(e){f.isDefined(e)&&(u.balanceformat=e)},u.getBalanceFormat=function(){return u.balanceformat},u.getAndUpdateBalance=function(){return t.getBalance({},function(e){return u.asyncBalance=e.balanceformat,e.balanceformat})},u.updateBalance=function(){t.getBalance({},function(e){u.asyncBalance=e.balanceformat})},u.setAsyncBalance=function(){t.getBalance({},function(e){u.asyncBalance=e.balanceformat})},u}])}(angular),angular.module("Sexlog").factory("AddressModel",["BaseModel","$url",function(e,t){return new e("address",{get:{method:"GET",url:t.base("subscribe/get-address/:cep"),isArray:!1,cache:!0}})}]),function(i){i.module("Sexlog").directive("alertDismissible",function(){return{restrict:"AC",link:function(t,n,o){n.find('[data-dismiss="alert"]').one("click",function(e){e.preventDefault(),n.remove(),i.isDefined(o.alertDismiss)&&t.$eval(o.alertDismiss)})}}})}(angular),angular.module("Sexlog").directive("analyticsMetric",["$googleAnalytics",function(a){return{restrict:"A",link:function(e,t,n){var o=n.amArea,i=n.amAction,r=n.amEvent||"click";t.on(r,function(){a.trackEvent(o,i)})}}}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="monospaced.elastic"),angular.module("Sexlog").constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function(C,P,_){return{require:"ngModel",restrict:"A, C",link:function(r,e,t,n){var o,a,i,s,l,c,u,d,f,m,p,g,h,v,b,S,$=e[0],y=e;function E(){var t=s;u=getComputedStyle(v=$),angular.forEach(S,function(e){t+=e+":"+u.getPropertyValue(e)+";"}),c.setAttribute("style",t)}function w(){var e,t,n,o,i;v!==$&&E(),b||(b=!0,c.value=$.value+a,c.style.overflowY=$.style.overflowY,e=""===$.style.height?"auto":parseInt($.style.height,10),"px"===(t=getComputedStyle($).getPropertyValue("width")).substr(t.length-2,2)&&(o=parseInt(t,10)-f.width,c.style.width=o+"px"),n=c.scrollHeight,h<n?(n=h,i="scroll"):n<g&&(n=g),n+=f.height,$.style.overflowY=i||"hidden",e!==n&&(r.$emit("elastic:resize",y,e,n),$.style.height=n+"px"),C(function(){b=!1},1,!1))}function T(){b=!1,w()}"TEXTAREA"===$.nodeName&&P.getComputedStyle&&(y.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"}),o=$.value,$.value="",$.value=o,a=t.msdElastic?t.msdElastic.replace(/\\n/g,"\n"):_.append,i=angular.element(P),s="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",l=angular.element('<textarea aria-hidden="true" tabindex="-1" style="'+s+'"/>').data("elastic",!0),c=l[0],d=(u=getComputedStyle($)).getPropertyValue("resize"),f="border-box"===u.getPropertyValue("box-sizing")||"border-box"===u.getPropertyValue("-moz-box-sizing")||"border-box"===u.getPropertyValue("-webkit-box-sizing")?{width:parseInt(u.getPropertyValue("border-right-width"),10)+parseInt(u.getPropertyValue("padding-right"),10)+parseInt(u.getPropertyValue("padding-left"),10)+parseInt(u.getPropertyValue("border-left-width"),10),height:parseInt(u.getPropertyValue("border-top-width"),10)+parseInt(u.getPropertyValue("padding-top"),10)+parseInt(u.getPropertyValue("padding-bottom"),10)+parseInt(u.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},m=parseInt(u.getPropertyValue("min-height"),10),p=parseInt(u.getPropertyValue("height"),10),g=Math.max(m,p)-f.height,h=parseInt(u.getPropertyValue("max-height"),10),S=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"],y.data("elastic")||(h=h&&0<h?h:9e4,c.parentNode!==document.body&&angular.element(document.body).append(c),y.css({resize:"none"===d||"vertical"===d?"none":"horizontal"}).data("elastic",!0),$.oninput="onpropertychange"in $&&"oninput"in $?$.onkeyup=w:w,i.bind("resize",T),r.$watch(function(){return n.$modelValue},function(e){T()}),r.$on("elastic:adjust",function(){E(),T()}),C(w,0,!1),r.$on("$destroy",function(){l.remove(),i.unbind("resize",T)})))}}}]),function(v){v.module("Sexlog").factory("$animatedContainer",["$q","$parse","$timeout","$compile","$window","$rootScope",function(o,e,i,r,a,s){var l=["transform","WebkitTransform","MozTransform","MsTransform"],c="animated-container",u="animated-container-target",d="animated-container-placeholder",f="animated-container-content",m={content:null,container:null,placeholder:null,target:null,options:{close:!0}},p=o.defer();function g(e){return"translate3d("+e.position().left+"px,"+e.position().top+"px, 0px)"}function h(e,t){return"scale3d("+e.outerWidth()/t.outerWidth()+","+e.outerHeight()/("x"===(n="y")?(o=m.container.width(),i=m.container.innerWidth()):"y"===n&&(o=m.container.height(),i=m.container.innerHeight()),o<i?i:o)+",1)";var n,o,i}return m.open=function(e){if(v.extend(m.options,e),!m.options.targetContainer)throw new Error("The param of target container is required!");if(!m.options.event&&!m.options.target)throw new Error("The param of target event is required!");if(!(0<a.document.getElementsByClassName(d).length)){var t=m.options.target;m.options.event&&(t=m.options.event.currentTarget);var n=v.element(t);return m.target=n.parents("."+m.options.targetContainer),m.container=v.isDefined(m.options.parentContainer)?m.target.parents("."+m.options.parentContainer):v.element("body"),m.container.addClass(c),m.target.addClass(u),m.target.addClass("in"),function(){var e=o.defer(),t=null,n=g(m.target)+" "+h(m.target,m.container);m.placeholder=v.element("<div/>"),m.placeholder.addClass(d),v.forEach(l,function(e){m.placeholder.css(e,n)}),m.options.btnClose&&(t=function(){var e=v.element('<button type="button">&times;</button>');return e.addClass("animated-container-close"),e.on("click",m.close),e}(),m.placeholder.prepend(t));return m.content=function(){var e=v.element("<div></div>"),t=v.element('<ng-include src="url"></ng-include>'),n=s.$new();return n.url=m.options.urlContent,e.append(r(t)(n)),e.addClass(f),e}(),m.placeholder.prepend(m.content),m.container.append(m.placeholder),i(function(){v.forEach(l,function(e){m.placeholder.css(e,"translate3d(0px, 0px, 0px)")}),m.placeholder.addClass("in"),m.content.addClass("in"),m.options.btnClose&&t.addClass("in"),e.resolve()},40),e.promise}().then(function(){m.placeholder.addClass("out"),m.placeholder.removeClass("in"),i(function(){m.content.addClass("out"),m.content.removeClass("in")},500)}),p.promise}},m.close=function(){m.target||(m.target=v.element("."+u)),m.container||(m.container=v.element("."+c)),m.placeholder||(m.placeholder=v.element("."+d)),function(){m.content.removeClass("out");var t=g(m.target)+" "+h(m.target,m.container);v.forEach(l,function(e){m.placeholder.css(e,t)}),m.placeholder.removeClass("out"),m.target.removeClass("in"),i(function(){m.target.removeClass(u),m.placeholder.remove(),p.resolve()},700)}()},m.progressBar=function(e,t){var n=setInterval(function(){99<=o&&clearInterval(n);o++,e.style.width=o+"%"},t),o=1;e=document.querySelector(e)},m}])}(angular),window.angular.module("Sexlog").constant("APP",{EVENTS:{APP_DATA_READY:"event-app-data-ready",APP_MODULES_READY:"event-modules-ready"},COOKIE_ACCOUNT_ID:"18043f34289b19de8f1110ddc9ddb8157344b18a",COOKIE_USER_TIMESTAMP:"00dbcdafebd26d594b57df87fce794d64abdd604"}),function(e){function t(n,o,i,r,a,s,t){var l=this;this.init=function(e,t){o.getAppData().then(function(e){o.data=e,n.$broadcast(i.EVENTS.APP_DATA_READY,e),l.getModulesStatus(e.user.countrySettingId).then(function(e){o.modules=e.modules,n.$broadcast(i.EVENTS.APP_MODULES_READY,e)})}),(a.isLogged()&&!t||!a.isLogged())&&e&&r.init(),a.isLogged()&&s.init(),this.isOnboarding=-1<window.location.href.indexOf("onboarding")},this.getModulesStatus=function(e){return o.getModulesStatus({headers:{countrySettingId:e}})},this.saveTestabMetric=function(e){t.post("service/metrification/send",{description:e})}}t.$inject=["$scope","AppService","APP","$devtools","$auth","$firebaseMessaging","$http"],e.module("Sexlog").controller("appController",t)}(angular),function(e){function t(n,o,i,r){var a=this;this.data={user:{isLogged:!!o(r.COOKIE_ACCOUNT_ID),language:o("force_language")}},this.modules={},this.getAppData=function(){var e,t=i.defer();return this.data.user.isLogged?(e="service/user/content/get/"+o(r.COOKIE_ACCOUNT_ID)+"/"+o(r.COOKIE_USER_TIMESTAMP),n.get(e).then(function(e){e.data.user.language=a.data.user.language,t.resolve(e.data)})):t.resolve(Object.assign(this.data,{user:{countrySettingId:1,language:this.data.user.language}})),t.promise},this.getModulesStatus=function(e){return n.get("service/countrysetting/info/get/"+e.headers.countrySettingId).then(function(e){return e.data})},this.isUserReady=function(){return!this.data.user.isLogged||void 0!==this.data.user.accountid},this.isModulesReady=function(){return!!Object.keys(this.modules).length},this.setShouldShowMessagePostsControl=function(e){this.data.user.shouldShowMessagePostsControl=e}}t.$inject=["$http","$cookies","$q","APP"],e.module("Sexlog").service("AppService",t)}(window.angular),function(e){function t(e){this.data={account:{}},this.getData=function(){return e.get("service/user/info/get")},this.isReady=function(){return Object.keys(this.data.account).length}}t.$inject=["$http"],e.module("Sexlog").service("UserService",t)}(window.angular),function(l){l.module("Sexlog").factory("$auth",["$q","AccountModel","SubscribeModel","$url",function(n,o,i,e){var r,t,a=n.defer(),s={user:{},STATUS:{SUBSCRIPTION_NEEDED:403},checkSession:function(e,t){return r=n.defer(),s.isLogged()||e?(t=t||{},i.checkSession(t,function(e){s.user=e,r.resolve(e)},function(){r.reject()})):o.checkSession({},function(e){s.user=e,r.resolve(e)},function(){r.reject()}),r.promise},checkSubscription:function(){return o.checkSubscription({},function(e){a.resolve(e)},function(){a.reject()}),a.promise},revalidateSubscription:function(){var t=n.defer();return o.checkSubscription({},function(e){t.resolve(e)},function(){t.reject()}),t.promise},keyUserSession:function(){return l.isUndefined(t)?t=l.element("#KeyUserSession").val():t},isLogged:function(){return!!s.keyUserSession()},logout:function(){e.redirect("/auth/logout")}};return s}])}(angular),function(f){f.module("Sexlog").directive("autoGrow",["$debounce",function(d){return function(e,n,o){var i,r,a,s=null,l=o.max||200,t=o.min||50;n.css("height",t);function c(){var e,t;null===s&&0!==(i=n[0].offsetHeight)&&(r=n.css("paddingLeft"),a=n.css("paddingRight"),s=f.element("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:n[0].offsetWidth-parseInt(r||0,10)-parseInt(a||0,10),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),lineHeight:o.lineHeight||n.css("lineHeight"),resize:"none"}),f.element(document.body).append(s)),null!==s&&(e=n.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/\s{2,}/g,function(e){return function(e,t){for(var n=0,o="";n<t;n++)o+=e;return o}("&nbsp;",e.length-1)+" "}),s.html(e),t=Math.max(s[0].offsetHeight+20,i),n.css("overflow","auto"),t<l?(n.css("overflow","hidden"),n.css("height",Math.max(s[0].offsetHeight+20,i)+"px"),u()):n.css("height",l+"px"))}var u=d(function(){setTimeout(function(){e.$evalAsync(o.autoGrow)},300)},300);n.bind("keyup keydown keypress change focus",c),e.$watch(o.ngModel,c),e.$watch(function(){return"none"!==n[0].style.display},c)}}])}(angular),angular.module("Sexlog").directive("autoRemove",function(){return{restrict:"A",link:function(t,n,e){var o=e.$observe("autoRemove",function(e){t.$eval(e)&&(o(),n.remove())})}}}),angular.module("Sexlog").directive("autoSelect",function(){return{restrict:"A",link:function(e,t){t.on("focus",function(e){e.preventDefault(),setTimeout(function(){t.select()})})}}}),function(i){i.module("Sexlog").directive("autoVisible",function(){return{restrict:"A",link:function(n,o,e){e.$observe("autoVisible",function(e){var t=n.$eval(e);i.isDefined(t)&&(t?(o.removeClass("hide"),o.show()):o.hide())})}}})}(angular),angular.module("Sexlog").directive("autotab",["$detection",function(i){var a="input,select,textarea";function r(o,i,r){o.off("keypress.autotab").on("keypress.autotab",function(){setTimeout(function(){var e,t,n=o.val().length;r&&(n=r.$viewValue?r.$viewValue.length:0),i<=n&&(t=(e=o).closest("form").find(a)).eq(t.index(e)+1).focus()},300)})}return{restrict:"A",require:"?ngModel",link:function(e,n,t,o){i.isMobile()||t.$observe("autotab",function(e,t){e&&e!==t&&r(n,e,o)})}}}]),angular.module("Sexlog").directive("bankAgencyMask",function(){return{restrict:"A",link:function(e,t){t.mask("##0-0",{reverse:!0})}}}),function(a){a.module("Sexlog").factory("BaseModel",["$resource","$url",function(i,r){return function(t,e,n,o){return e=a.isUndefined(e)?{}:e,n=a.isUndefined(n)?{}:n,this.model=a.extend({save:{method:"POST",url:r.api(t,!0),withCredentials:!0},update:{method:"PUT",url:r.api(t,!0)},search:{method:"GET",url:r.api(t+"/search",!0)},template:{method:"GET",url:r.api(t+"/template",!0)},langs:{method:"GET",url:r.api(t+"/langs",!0),cache:!0}},e),a.isDefined(o)&&a.forEach(this.model,function(e){e=a.extend(e,o)}),this.parameters=a.extend({id:"@id"},n),a.extend(i(r.api(t),this.parameters,this.model),{templateUrl:function(e){return r.customParams(r.api(t+"/template"),e)},baseUrl:function(e){return r.customParams(r.api(t),e)}})}}])}(angular),angular.module("Sexlog").directive("bindFile",[function(){return{require:"ngModel",restrict:"A",link:function(t,n,e,o){n.on("change",function(e){o.$setViewValue(e.target.files[0]),t.$apply()}),t.$watch(function(){return o.$viewValue},function(e){e||n.val("")})}}}]),angular.module("Sexlog").directive("bindHtml",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtml),e.$watch(n.bindHtml,function(e){t.html(e||"")})}}),angular.module("Sexlog").directive("bindHtmlCompile",["$compile",function(i){return function(t,n,e){n.addClass("ng-binding").data("$binding",e.bindHtmlCompile);var o=t.$watch(e.bindHtmlCompile,function(e){e&&angular.isString(e)&&(i(e)(t,function(e){n.empty(),e.appendTo(n)}),o())})}}]),function(){var e=angular.module("Sexlog");e.directive("bindonce",function(){function f(e){var t;return e=!(!e||0===e.length)&&!("f"===(t=angular.lowercase(""+e))||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}var m=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);return isNaN(m)&&(m=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10)),{restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(n,e,t,u){function d(r,e){r.transclude(e,function(e){var t=r.element.parent(),n=r.element&&r.element[r.element.length-1],o=t&&t[0]||n&&n.parentNode,i=n&&n.nextSibling||null;angular.forEach(e,function(e){o.insertBefore(e,i)})})}var o={watcherRemover:void 0,binders:[],group:t.boName,element:e,ran:!1,addBinder:function(e){this.binders.push(e),this.ran&&this.runBinders()},setupWatcher:function(e){var t=this;this.watcherRemover=n.$watch(e,function(e){void 0!==e&&(t.removeWatcher(),t.checkBindonce(e))},!0)},checkBindonce:function(e){var t=this,n=e.$promise?e.$promise.then:e.then;"function"==typeof n?n(function(){t.runBinders()}):t.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;0<this.binders.length;){var i=this.binders.shift();if(!this.group||this.group==i.group){var e,t=i.scope.$eval(i.interpolate?u(i.value):i.value);switch(i.attr){case"boIf":f(t)&&d(i,i.scope.$new());break;case"boSwitch":var n,o=i.controller[0];(n=o.cases["!"+t]||o.cases["?"])&&(i.scope.$eval(i.attrs.change),angular.forEach(n,function(e){d(e,i.scope.$new())}));break;case"boSwitchWhen":(e=i.controller[0]).cases["!"+i.attrs.boSwitchWhen]=e.cases["!"+i.attrs.boSwitchWhen]||[],e.cases["!"+i.attrs.boSwitchWhen].push({transclude:i.transclude,element:i.element});break;case"boSwitchDefault":(e=i.controller[0]).cases["?"]=e.cases["?"]||[],e.cases["?"].push({transclude:i.transclude,element:i.element});break;case"hide":case"show":r=i.element,a=i.attr,s=t,0,l="show"===a?"":"none",c="hide"===a?"":"none",r.css("display",f(s)?l:c);break;case"class":!function(e,t){var n;angular.isObject(t)&&!angular.isArray(t)&&(n=[],angular.forEach(t,function(e,t){e&&n.push(t)}),t=n),t&&e.addClass(angular.isArray(t)?t.join(" "):t)}(i.element,t);break;case"text":i.element.text(t);break;case"html":i.element.html(t);break;case"style":i.element.css(t);break;case"disabled":i.element.prop("disabled",t);break;case"src":i.element.attr(i.attr,t),m&&i.element.prop("src",t);break;case"attr":angular.forEach(i.attrs,function(e,t){var n,o;t.match(/^boAttr./)&&i.attrs[t]&&(n=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=i.scope.$eval(i.attrs[t]),i.element.attr(n,o))});break;case"href":case"alt":case"title":case"id":case"value":i.element.attr(i.attr,t)}}}var r,a,s,l,c;this.ran=!0}};angular.extend(this,o)}],link:function(e,t,n,o){var i=n.bindonce&&e.$eval(n.bindonce);void 0!==i?o.checkBindonce(i):(o.setupWatcher(n.bindonce),t.bind("$destroy",o.removeWatcher))}}}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boDisabled",attribute:"disabled"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(c){return e.directive(c.directiveName,function(){return{priority:c.priority||200,transclude:c.transclude||!1,terminal:c.terminal||!1,require:["^bindonce"].concat(c.require||[]),controller:c.controller,compile:function(e,t,l){return function(e,t,n,o){var i=o[0],r=n.boParent;if(r&&i.group!==r){for(var a,s=i.element.parent(),i=void 0;9!==s[0].nodeType&&s.length;){if((a=s.data("$bindonceController"))&&a.group===r){i=a;break}s=s.parent()}if(!i)throw new Error("No bindonce controller: "+r)}i.addBinder({element:t,attr:c.attribute||c.directiveName,attrs:n,value:n[c.directiveName],interpolate:c.interpolate,group:r,transclude:l,controller:o.slice(1),scope:e})}}}})})}(),angular.module("Sexlog").directive("blurOn",function(){return function(e,n,o){e.$on("blurOn",function(e,t){t!==o.blurOn&&t!==n[0].name||n[0].blur()})}}),angular.module("Sexlog").factory("$blur",["$rootScope","$timeout",function(t,n){return function(e){return n(function(){t.$broadcast("blurOn",e)})}}]),function(e,u){var t,n=(t=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/))?parseInt(t[1]):void 0;n&&e("body").addClass("ie"+n),u.module("Sexlog").config(["$provide",function(e){e.decorator("$browser",["$delegate","$window","$injector",function(e,t,n){var o,i,r=t.navigator.userAgent,a="",s=""+parseFloat(t.navigator.appVersion),l={safari:/safari/i,chrome:/chrome/i,firefox:/firefox/i,ie:/(msie|trident)/i,opera:/opr/i,edge:/edge/i};for(var c in l)l[c].test(r)&&(l[a=c]=!0);return!0===l.chrome?(o=r.indexOf("Chrome"),s=r.substring(o+7)):!0===l.ie?(o=r.indexOf("MSIE"),s=r.substring(o+5)):!0===l.safari?(o=r.indexOf("Safari"),s=r.substring(o+7),-1!==(i=r.indexOf("Version"))&&(s=r.substring(i+8))):!0===l.firefox?(o=r.indexOf("Firefox"),s=r.substring(o+8)):!0===l.edge&&(o=r.indexOf("Edge"),s=r.substring(o+5)),u.extend(e,{name:a,version:parseInt(""+s,10),fullVersion:s,ie:function(){return!0===l.ie},firefox:function(){return!0===l.firefox},safari:function(){return!0===l.safari&&!0!==l.chrome},chrome:function(){return!0===l.chrome&&!0!==l.edge},opera:function(){return!0===l.opera},edge:function(){return!0===l.edge},native:function(){return!0!==l.ie&&!0!==l.edge&&!0!==l.firefox&&!0!==l.safari&&!0!==l.chrome&&!0!==l.opera},private:function(){var e,t=n.get("$q").defer();if(this.chrome()&&(window.RequestFileSystem||window.webkitRequestFileSystem)(window.TEMPORARY,100,function(){t.resolve(!1)},function(){t.resolve(!0)}),this.firefox()){try{e=window.indexedDB.open("test")}catch(e){t.resolve(!0)}"done"===e.readyState&&t.resolve(!e.result),t.resolve(!1)}if(this.ie()||this.edge()){try{window.indexedDB||t.resolve(!0)}catch(e){t.resolve(!0)}t.resolve(!1)}if(this.safari()){try{window.localStorage.setItem("test",!0)}catch(e){t.resolve(!0)}t.resolve(!1)}return t.promise}}),e}])}])}(jQuery,angular),angular.module("Sexlog").provider("$detection",[function(){this.userAgent=navigator.userAgent,this.setUserAgent=function(e){this.userAgent=e},this.$get=function(){var e=this.userAgent,t={getUserAgent:function(){return e},isiOS:function(){return/(iPad|iPhone|iPod)/gi.test(e)},isAndroid:function(){return/(Android)/gi.test(e)},isWindowsPhone:function(){return/(IEMobile)/gi.test(e)},isMobile:function(){return t.isiOS()||t.isAndroid()||t.isWindowsPhone()}};return t}}]),angular.module("Sexlog").directive("btnProcess",["$url","BTN_STATE",function(e,a){return{restrict:"E",replace:!0,templateUrl:"assets/js/sl/angular/_common/btn-process/template/btn-process.html",scope:{method:"&method"},link:function(t,e,n){var o=!0,i=!1;function r(e){switch(e){case a.NORMAL:i=!(o=!0);break;case a.PROCESSING:i=!(o=!1)}}t.text=n.text,t.getState=function(){return{processing:i,normal:o}},t.process=function(){r(a.PROCESSING);var e=t.method();e?e.finally(function(){r(a.NORMAL)}):r(a.NORMAL)}}}}]),angular,angular.module("Sexlog").constant("BTN_STATE",{NORMAL:"normal",PROCESSING:"processing"}),function(r){r.module("Sexlog").directive("buttonSignup",["$signup","$url",function(o,i){return{restrict:"EA",link:function(e,t,n){t.on("click",function(e){if(!r.isDefined(n.signupDisabled)||n.signupDisabled&&!n.signupDisabled.bool()){n.buttonSignup=n.buttonSignup||"ACTION-GENERAL";var t={params:{action:n.buttonSignup},onSuccess:function(e){i.reload(),e.$modalInstance.close()}};return n.title&&(t.title=n.title),n.subtitle&&(t.subtitle=n.subtitle),o.modal(t),e.preventDefault(),!1}})}}}])}(angular),angular.module("Sexlog").directive("buttonSubscribe",["$subscribe","$url",function(o,i){return{restrict:"EA",scope:!0,link:function(e,t,n){t.on("click focus input",function(){var e={params:{action:n.action||n.buttonSubscribe||"ACTION-GENERAL"},onSuccess:function(e){i.reload(),e.$modalInstance.close()}};n.title&&(e.title=n.title),n.subtitle&&(e.subtitle=n.subtitle),n.skipFirstPage&&(e.params.skipFirstPage=n.skipFirstPage),n.template&&(e.params.template=n.template),n.injected&&(e.params.injected=n.injected),o.modal(e)})}}}]),angular.module("Sexlog").component("invoiceInfo",{bindings:{price:"@"},templateUrl:"template/assets/js/sl/angular/_common/c-invoice-info/component/invoice-info.html"}),function(a){a.module("Sexlog").factory("$campaign",["$rootScope",function(i){var r={autosize:function(e){var n=a.element('<div class="sl-promotion-offset"></div>'),o=a.element(".header-refactored").find(".sl-dropbox");function t(t,e){if(e)return n.remove(),o.css("top",50),t.remove(),void i.$broadcast("promotionClosed");setTimeout(function(){var e=t.height();n.height(e),o.css("top",e+50),i.$broadcast("promotionReady",{height:e})},0)}n.prependTo("body"),t(e),r.autosize=t}};return r}])}(angular),function(P,e,t){var _=jQuery(e),M=jQuery(t);P.module("Sexlog").directive("cardContainer",["$timeout","$debounce","$screen","$detection","$q","$cardContainer",function($,y,E,w,T,C){return{restrict:"EAC",scope:!0,controller:["$scope","$element","$attrs",function(o,s,t){function l(e,t,n,o){var i,r,a=(i=b,Math.min.apply(Math,i)),s=b.indexOf(a),l=g+s*(h+g),c=o?15:0;l<0&&(l=10),(!n||n&&e.index()>=t)&&u({left:l+"px",top:10===a?0:a+c+"px",position:"absolute"},e),b[s]=(10===(r=a)?0:r)+e.height()+g}function u(e,t){var n=t[0].style;for(var o in e)n[o]=e[o]}function c(e,t,n){e.hasClass(v)||(e.addClass(v),e.visible=!0),n&&(o.$emit("positionBlocks"),function(){var e=Math.max.apply(null,b);s.height(e)}())}function a(e){var r=[];return P.isArray(e)&&e.length&&P.forEach(e,function(e){var t,n,o,i;(i=e).complete&&0!==i.naturalWidth||(t=T.defer(),n=new Image,(o=P.element(e).attr("src"))&&(n.src=o,n.onload=function(){t.resolve()},n.onerror=function(){t.resolve()},r.push(t.promise)))}),r}function i(){b=[];for(var e=0;e<m;e++)b.push(g)}function d(i,r,a){var e=b.length<=1,t=T.defer();return n=!1,e?(i.forEach(function(e){u({left:"",top:"",position:""},e),e.addClass(v)}),s.css("height","auto")):P.forEach(i,function(e,t){var n=e[0].className.includes("contest"),o=t+1===i.length;l(e,r,a,n),c(e,0,o)}),t.resolve(),t.promise}function r(){return isNaN(parseInt(t.columnWidth))?0:parseInt(t.columnWidth)}var f=this,m=0,p=0,g=isNaN(parseInt(t.columnMargin))?10:parseInt(t.columnMargin),h=r(),v=t.showClass||"show",e=t.source||!1,b=[],n=!1,S=w.isMobile()?400:200;f.createColumns=function(e,t){var n=T.defer();return s.children().length&&s.is(":visible")?((!e||E.width()<=599)&&(b=[],h=r(),p=s.outerWidth(),h=h<=0?s.children(":first-child").outerWidth()||0:h,m=Math.floor(p/(h+g)),i()),f.positionBlocks(e,t).then(function(){n.resolve()})):n.reject(),n.promise},f.recreateColumns=function(){return f.createColumns(0,!0)},f.getElemIndex=function(e){return C.getTrackby(e)},f.positionBlocks=function(t,n){var o=C.get(t),i=C.getImages(o),r=T.defer();return $(function(){var e=a(i);T.all(e).then(function(){d(o,t,n).then(function(){r.resolve()})})}),r.promise},o.update=function(e,t){return t?f.recreateColumns():f.createColumns(e)},o.clear=function(){i()},o.toggleTransitions=function(){s.toggleClass("no-transitions")},C.init(),o.$on("$screenChange",y(function(){f.createColumns()},S)),M.on("visibilitychange",y(function(){o.toggleTransitions(),f.createColumns().then(function(){o.toggleTransitions()})},S)),_.on("scroll",y(function(){var e;"true"!==t.disableScroll&&(e=s.outerHeight()-_.outerHeight(),e-=650,_.scrollTop()>=e&&!n&&(n=!0,o.$evalAsync(t.onScroll)))},200)),e&&o.$watch(function(){return o.$eval(t.source)},function(e){P.isArray(e)&&e.length&&setTimeout(function(){C.init(),f.createColumns()})}),_.on("beforeunload",function(){P.element("body").hide(),_.scrollTop(0)})}]}}])}(angular,window,document),angular.module("Sexlog").factory("$cardContainer",["$rootScope","$compile","$timeout",function(r,a,n){var s={trackby:!1,visibleClass:"show",containerSelector:".card-container",cardItemSelector:".card-item",cardImageSelector:"img.card-image"},l=[],c=angular.element(s.containerSelector+":first"),o={},i=!1,u=!1;function d(e,t){return t=angular.isDefined(t)?t:1e3,n(function(){return o.update(e,i).then(function(){i=i&&!1,r.$broadcast("safe:update-watermark")})},t)}function f(e,t){e.uuid=function(e,t){var n="";t?n=t[s.trackby]:s.trackby&&(n=e.data(s.trackby));return n||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}(e,t),e.visible=!1,e.resource=t||{},e.fixed=e.data("fixed")}return s.init=function(){i=!(l=[]),c.children(s.cardItemSelector).each(function(e,t){f(t=angular.element(t)),l.push(t)})},s.get=function(e){return e&&0<e?l.slice(e):l},s.getImages=function(e){var t=[];return angular.forEach(e,function(e){e.image=e.find(s.cardImageSelector),!e.visible&&e.image.length&&t.push(e.image)}),t},s.getIndex=function(e){return l[angular.isDefined(e)?e:0]},s.getTrackby=function(n){var e=angular.map(l,function(e,t){if(e.uuid===n)return t});if(e.length)return e[0]},s.add=function(e,t,n){if(e){var o=l.length;e=function(e){if(!s.trackby)return e;var t=function(){if(angular.isString(s.trackby))return angular.map(l,function(e){return e.uuid})}();return angular.grep(e,function(e){return-1===t.indexOf(e[s.trackby])})}(e=function(e){angular.isArray(e)||(e=[e]);return e}(e));var i=[];return angular.forEach(e,function(e){i.push(function(e,t){var n,o,i=r.$new(!0);i.resource=e,n=angular.element("<div news-item></div>"),o=c.children(s.cardItemSelector).eq(t),t&&o.length?o.before(n):n.appendTo(c);return f(n=a(n)(i),e),n}(e,n))}),t?(angular.forEach(i,function(e){n?l.splice(n,0,e):l.unshift(e)}),s.rebuild()):l=l.concat(i),d(o)}},s.remove=function(e){s.getIndex(e).remove(),l.splice(e,1),d()},s.removeTrackby=function(e){return s.remove(s.getTrackby(e))},s.update=function(e,t){if(!u)return d(e,t)},s.clear=function(){l.forEach(function(e){e.fixed||(e.toRemove=!0,e.remove())}),l=angular.grep(l,function(e){return!e.toRemove})},s.total=function(){return l.length},s.rebuild=function(){i=!0},s.loading=function(e){u=!angular.isDefined(e)||!!e},s.isLoading=function(){return u},setTimeout(function(){c.length||(c=angular.element(s.containerSelector+":first")),o=c.scope()}),s}]),function(t){t.module("Sexlog").factory("$carousel",function(){return function(e){return t.element(e).scope()||t.element(e)}})}(angular),function(h){h.module("Sexlog").directive("checklistModel",["$parse","$compile",function(m,p){function g(e,t,n){if(h.isArray(e))for(var o=e.length;o--;)if(n(e[o],t))return!0;return!1}function n(a,e,n){var t=n.checklistModel;n.$set("checklistModel",null),p(e)(a),n.$set("checklistModel",t);var o,s=m(t),l=s.assign,i=m(n.checklistChange),r=m(n.checklistBeforeChange),c=n.checklistValue?m(n.checklistValue)(a.$parent):n.value,u=h.equals;function d(e,t){var n,o,i,r=s(a.$parent);h.isFunction(l)&&l(a.$parent,!0===t?(n=r,o=e,i=u,g(n=h.isArray(n)?n:[],o,i)||n.push(o),n):function(e,t,n){if(h.isArray(e))for(var o=e.length;o--;)if(n(e[o],t)){e.splice(o,1);break}return e}(r,e,u))}function f(e){r&&!1===r(a)?d(c,a[n.ngModel]):a[n.ngModel]=g(e,c,u)}n.hasOwnProperty("checklistComparator")&&(u="."===n.checklistComparator[0]?(o=n.checklistComparator.substring(1),function(e,t){return e[o]===t[o]}):m(n.checklistComparator)(a.$parent)),a.$watch(n.ngModel,function(e,t){e!==t&&(r&&!1===r(a)?a[n.ngModel]=g(s(a.$parent),c,u):(d(c,e),i&&i(a)))}),h.isFunction(a.$parent.$watchCollection)?a.$parent.$watchCollection(t,f):a.$parent.$watch(t,f,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(e,t){if(("INPUT"!==e[0].tagName||"checkbox"!==t.type)&&"MD-CHECKBOX"!==e[0].tagName&&!t.btnCheckbox)throw'checklist-model should be applied to `input[type="checkbox"]` or `md-checkbox`.';if(!t.checklistValue&&!t.value)throw"You should provide `value` or `checklist-value`.";return t.ngModel||t.$set("ngModel","checked"),n}}}])}(angular),function(g){g.module("Sexlog").factory("$checkUpdates",["$document","$window","$url","$http","$auth","$timeout","$tooltip",function(e,t,n,o,i,r,a){var s={friends:0,scraps:0,general:0},l=!1,c=!1,u=null;function d(){if(!l){var e=+new Date;return o.get(n.base("notification/newcheckupdate?unique="+e)).then(function(e){var t=e.data,n=t.result;0===t.returncode?(s={friends:n.friend_request.notifications,scraps:n.scraps.notifications,general:n.general.notifications},p.checkSession(n)):-1===parseInt(t.returncode)&&i.logout()})}}function f(){c||g.element(function(){r(function(){d(),u=t.setInterval(d,6e4),c=!0},8e3)})}function m(e){return 99<(e=e||0)?"99+":e}var p={start:f,navbar:function(e){return m(s[e])},initNavbar:function(e,t){f(),g.isDefined(s[e])&&(s[e]=t)},navbarCounters:function(){return s},pause:function(){l=!0,t.clearInterval(u),u=null,c=!1},unpause:function(e){g.isNumber(e)?setTimeout(function(){p.unpause()},1e3*e):(l=!1,f())},isPaused:function(){return l},checkSession:function(e){0<e.blocked&&(a.showErrorMessage(e.message,!1),setTimeout(function(){window.onbeforeunload=null,i.logout()},3e3))},clear:function(e){e?s[e]=0:s={friends:0,scraps:0,general:0}},setMessageUnread:function(e){r(function(){s.scraps=m(e)})}};return p}])}(angular),function(o,i){o.module("Sexlog").factory("$clickOutside",function(){var n={callback:o.noop,bind:function(e){var t;o.element("body").find(".dropbox-backdrop").length||(t=i('<div class="dropbox-backdrop"></div>').prependTo(".notifications"),o.isFunction(e)&&(n.callback=e),t.on("click",function(){t.remove(),n.callback.apply()}))},unbind:function(){n.callback=o.noop,i(".dropbox-backdrop").remove()}};return n})}(angular,jQuery),function(e,o){e.module("Sexlog").directive("slClipboard",function(){return{restrict:"A",scope:{text:"=slClipboard",onCopy:"&",onError:"&"},link:function(e,t){var n;o&&((n=new o(t[0],{text:function(){return e.text}})).on("success",function(){e.onCopy&&e.onCopy.apply()}),n.on("error",function(){e.onError&&e.onError.apply()}))}}})}(angular,window.Clipboard),function(t){t.module("Sexlog").filter("comma",function(){return function(e){if(e.length&&t.isArray(e))return e.join(", ")}})}(angular),function(m){m.module("Sexlog").factory("$cookies",["$document",function(f){return o.remove=function(e,t){var n=void 0!==o(e);return n&&((t=t||{}).expires=-1,o(e,"",t)),n},o;function o(e,t,n){var o,i,r,a,s,l,c,u,d;if(n=n||{},void 0!==t)return t="object"===_typeof(t)?JSON.stringify(t):String(t),"number"==typeof n.expires&&(d=n.expires,n.expires=new Date,-1===d?n.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==n.expirationUnit?"hours"===n.expirationUnit?n.expires.setHours(n.expires.getHours()+d):"minutes"===n.expirationUnit?n.expires.setMinutes(n.expires.getMinutes()+d):"seconds"===n.expirationUnit?n.expires.setSeconds(n.expires.getSeconds()+d):n.expires.setDate(n.expires.getDate()+d):n.expires.setDate(n.expires.getDate()+d)),f[0].cookie=[encodeURIComponent(e),"=",encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("");for(i=[],(u=f[0].cookie)&&(i=u.split("; ")),c=!(o={}),r=0;r<i.length;++r)if(i[r]){if(s=(a=i[r]).indexOf("="),l=a.substring(0,s),t=function(e){try{return decodeURIComponent(e)}catch(e){}}(a.substring(s+1)),m.isUndefined(t))continue;if(void 0===e||e===l){try{o[l]=JSON.parse(t)}catch(e){o[l]=t}if(e===l)return o[l];c=!0}}return c&&void 0===e?o:void 0}}])}(angular),function(n){var a="sl-copyright";function s(){n.element("."+a).remove(),window.removeEventListener("click",s)}n.module("Sexlog").directive("slCopyright",function(){return{restrict:"A",link:function(e,o,t){var i=n.element('<div class="sl-copyright"> <strong>&#169;</strong> '+t.slCopyright+"</div>"),r=o.parent();o.on("contextmenu",function(e){o.next("."+a).remove(),i.insertAfter(o);var t=e.pageY-r.offset().top,n=e.pageX-r.offset().left;return e.pageX+i.width()>r.offset().left+r.width()&&(n=n-(e.pageX+i.width()-(r.offset().left+r.width()))-30),i.css({top:t,left:n}),window.removeEventListener("click",s),window.addEventListener("click",s),!1})}}})}(angular),function(u){u.module("Sexlog").directive("countdown",["$lang","$templateCache",function(l,c){return{restrict:"EA",scope:{until:"@countdown",langs:"@",code:"@",layout:"@",format:"@",onExpiry:"&"},link:function(e,t){var n,o,i,r,a,s;u.isDefined(e.until)?(n=c.get("template/assets/js/sl/angular/_common/countdown/directives/countdown.html"),o=u.element(n),i=e.layout||o.html(),r=e.format||"ydHMS",a=e.onExpiry||u.noop,s=[l("date_years"),l("date_months"),l("date_weeks"),l("date_days"),l("date_hours"),l("date_minutes"),l("date_seconds")],e.langs&&(s=JSON.parse(e.langs)),t.countdown({until:e.until,format:r,layout:i,onExpiry:a,labels:s,labels1:s}),o.remove()):t.remove()}}}])}(angular),angular.module("Sexlog").directive("cpfCnpjValidator",function(){return{restrict:"A",require:"ngModel",link:function(e,l,t,c){function u(e,t,n){var o=1<arguments.length&&void 0!==t?t:10,i=2<arguments.length&&void 0!==n?n:0;e=e.toString();for(var r=0;r<e.length;r++)i+=e[r]*o,--o<2&&(o=9);return e+(i=(i%=11)<2?0:11-i)}function d(e){return e=e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4")}function f(e){return e=e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5")}function n(e){if(!e)return c.$setValidity("required",!1),e;c.$setValidity("required",!0);var t,n,o,i,r,a,s=(t=(t=(t=e).toString()).replace(/[^0-9]/g,"")).length<11?(c.$setValidity("invalid",!1),!1):11===t.length?"CPF":11<t.length&&t.length<14?(c.$setValidity("invalid",!1),!1):"CNPJ";return s?(e=(e=e.toString()).replace(/[^0-9]/g,""),"CPF"===s?(a=u((r=(r=(r=e).toString()).replace(/[^0-9]/g,"")).substr(0,9)),u(a,11)===r?c.$setValidity("invalid",!0):c.$setValidity("invalid",!1),l[0].value=d(r),r):"CNPJ"===s&&(o=n=(n=(n=e).toString()).replace(/[^0-9]/g,""),i=u(n.substr(0,12),5),u(i,6)===o?c.$setValidity("invalid",!0):c.$setValidity("invalid",!1),l[0].value=f(n),n)):e}c.$formatters.push(n),c.$parsers.unshift(n)}}}),angular.module("Sexlog").directive("cardSecurityCode",["$rootScope","$timeout",function(s,l){return{require:"?ngModel",restrict:"A",scope:!0,link:function(n,o,i,r){function e(){r.$setValidity("valid",!1)}function t(){r.$setValidity("valid",!0)}function a(e,t){l(function(){o.mask(e,{placeholder:t,clearIfNotMatch:!!i.clearIfNotMatch,onComplete:function(e){r&&n.$apply(function(){r.$setViewValue(e)})},onKeyPress:function(){r&&n.$apply(function(){r.$setViewValue("")})}}),r.$modelValue!==o.val()&&o.val(r.$modelValue)})}s.$on("$cardValidationRule",function(e,t){(t.mask||t.placeholder)&&o.is(":visible")&&"credit"===t.cardType&&(o.data("mask-pattern",t.mask),o.data("mask-placeholder",t.placeholder),a(t.mask,t.placeholder))}),i.$observe("cardSecurityCode",function(){return("amex"!==i.flag&&"discover"!==i.flag?i.cardSecurityCode.length<3?e:t:i.cardSecurityCode.length<4?e:t)()}),a(o.data("mask-pattern")||"999",o.data("mask-placeholder")||"000")}}}]),angular.module("Sexlog").directive("creditCardValidity",["$cacheFactory","$timeout","SubscribeModel",function(e,t,n){var r=+((new Date).getFullYear()+"").substr(2,2),a=(new Date).getMonth()+1;return{restrict:"A",require:"ngModel",link:function(e,t,n,i){function o(e){if(!e)return i.$setValidity("required",!1),e;i.$setValidity("required",!0);var t=e.split("/"),n=+t[0].substr(0,2),o=+t[1];return n<1||12<n?(i.$setValidity("month",!1),i.$setValidity("month2",!0),void i.$setValidity("year",!0)):isNaN(o)||o<r?void i.$setValidity("year",!1):o==r&&n<a?(i.$setValidity("month2",!1),i.$setValidity("month",!0),void i.$setValidity("year",!0)):(i.$setValidity("month",!0),i.$setValidity("month2",!0),i.$setValidity("year",!0),i.$setValidity("required",!0),e)}i.$formatters.push(o),i.$parsers.unshift(o)}}}]),function(){var p=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;angular.module("Sexlog").directive("creditCard",["$timeout","$window","SubscribeModel","$http",function(e,o,f,m){return{restrict:"A",scope:{},require:"?ngModel",link:function(i,r,a,s){var l,c,u,d;function t(e){var o;!n()&&!e||l||(l=!0,o=(o=s.$viewValue)&&o.replace(/ /g,""),f.checkCard({type:a.cardType,flag:c.cardType!==a.cardType||e?"":a.creditCard,card:{number:o||""}},function(e){var t,n;e=angular.extend({cardType:a.cardType},u,e),s.$setValidity("flag",!!e.flag),c=e,d(o),i.$emit("$cardValidationRule",e),a.$set("autotab",e.size||19),r.mask(e.maskCard),n=(t=r).val(),t.val(""),t.val(n),s.$valid&&s.$inlineValidator.clearErrors(),setTimeout(function(){l=!1},1e3)}))}function n(){return a.cardType&&r.is(":visible")}s&&(l=!1,c={cardType:a.cardType},u={minSize:14,maxSize:19,cvv:{code:3,cssClass:"securityCode"}},d=function(e){if(!e)return"";if(n()){var t=!0;return((e=function(e){if(e)return e.replace(/-/g,"").replace(/ /g,"")}(e)).length<6||!function(e){if(!p.test(e))return!1;for(var t=0,n=0,o=!1,i=(e=e.replace(/\D/g,"")).length-1;0<=i;i--){var r=e.charAt(i);n=parseInt(r,10),o&&9<(n*=2)&&(n-=9),t+=n,o=!o}return t%10==0}(e)||c.flag&&e.length>c.size||!c.flag&&e.length<u.minSize&&e.length>u.maxSize)&&(t=!1),s.$setValidity("creditCard",t),t?e:""}return s.$setValidity("creditCard",""),""},s.$formatters.push(d),s.$parsers.unshift(d),a.$observe("creditCard",function(){t()}),i.$on("$subscribe-retry",function(){n()&&i.$emit("$cardValidationRule",c),angular.isFunction(o.SetGoogleEventTrack)&&o.SetGoogleEventTrack("Monitor_Evento","Retry na Assinatura")}),r.on("input propertychange",function(){var e=r.val().length;0===e&&r.unmask(),7===e&&t(!0)}),r.on("blur",function(){setTimeout(function(){t()},400)}),r.on("paste",function(){setTimeout(function(){t(!0)},400),m.post("service/metrification/send",{description:"COPY_AND_PASTE_CARD_NUMBER"})}))}}}])}(),angular.module("Sexlog").controller("CropController",["$scope",function(e){e.busy=!1,e.format="free"}]),function(v,b){v.module("Sexlog").directive("slCrop",["$share","$crop","$rootScope",function(p,g,h){return{restrict:"A",require:"ngModel",scope:!0,link:function(e,d,f,t){var n,o,i,r,a,s,l,m={x:0,y:0,w:0,h:0};n=g.getImage(),o=g.getImageDimensions(),i=d.find(".previewCrop"),r=g.getLastCrop(),a=v.element("<canvas></canvas>").attr("width",r.w||o.width).attr("height",r.h||o.height),s=a.get(0).getContext("2d"),l=n.get(0),s.drawImage(l,0,0),b.URL||b.webkitURL,b.loadImage(a.get(0).toDataURL("image/png"),function(e){i.append(e),setTimeout(function(){g.jCrop&&g.jCrop.destroy(),i.find("img").Jcrop({bgOpacity:.6,minSize:[150,150],onChange:function(e){m=e},onSelect:function(e){m=e}},function(){(g.jCrop=this).animateTo([0,0,99999,99999])})})},{maxWidth:636,maxHeight:585}),e.free=function(){g.jCrop.setOptions({aspectRatio:0}),g.jCrop.animateTo([99999,999999,0,0]),t.$setViewValue("free")},e.landscape=function(){g.jCrop.animateTo([9999999,999999,0,0]),g.jCrop.setOptions({aspectRatio:4/3}),t.$setViewValue("landscape")},e.portrait=function(){g.jCrop.animateTo([999999,999999,0,0]),g.jCrop.setOptions({aspectRatio:.75}),t.$setViewValue("portrait")},e.square=function(){g.jCrop.setOptions({aspectRatio:1}),g.jCrop.animateTo([99999,99999,0,0]),t.$setViewValue("square")},e.crop=function(){var e,t=v.element(f.container),n=g.getImage(),o=g.getLastCrop(),i=g.getImageOriginalDimensions(),r=(o.w||i.width)/d.find(".previewCrop img").width(),a=Math.floor(m.x*r),s=Math.floor(m.y*r),l=Math.floor(m.w*r),c=Math.floor(m.h*r);a+l>i.width&&(l-=a+l-i.width),s+c>i.height&&(c-=s+c-i.height);var u={x:a+o.x,y:s+o.y,w:l,h:c};g.setLastCrop(u),p.setImageDimensions({width:u.w,height:u.h}),(e=v.element("<canvas></canvas>")).attr("width",l),e.attr("height",c),e.get(0).getContext("2d").drawImage(n.get(0),a,s,l,c,0,0,l,c),b.loadImage(e.get(0).toDataURL("image/png"),function(e){t.empty().append(e),p.setImage(v.element(e)),g.hasCrop=!0,h.$broadcast("$positionateWatermark"),g.close()},{maxWidth:475,maxHeight:385})},e.close=function(){g.close()}}}}])}(angular,window),function(u){u.module("Sexlog").factory("$crop",["$url","$modalLoading","$modal",function(n,o,i){var t=null,r={},a={},s={x:0,y:0,w:0,h:0},l={hasCrop:!1,jCrop:null,modalInstance:null},c={windowClass:"sl-modal sl-crop"};return l.modal=function(e){o.create();var t=u.extend(c,{templateUrl:n.api("share/modal-crop-template"),controller:"CropController",backdrop:"static"});return l.modalInstance=i.open(t),l.modalInstance},l.close=function(){l.modalInstance.close()},l.getLastCrop=function(){return s},l.setLastCrop=function(e){s=e},l.setImage=function(e){t=e},l.getImage=function(){return t},l.setImageDimensions=function(e){r.width=e.width,r.height=e.height},l.getImageDimensions=function(){return r},l.setImageOriginalDimensions=function(e){a.width=e.width,a.height=e.height},l.getImageOriginalDimensions=function(){return a},l.clean=function(){r=a={},t=l.hasCrop=l.jCrop=null,s={x:0,y:0,w:0,h:0}},l}])}(angular),angular.module("Sexlog").factory("CultureModel",["BaseModel","$url",function(e,t){return new e("culture",{save:{method:"POST",url:t.api("edit-language")}})}]),angular.module("Sexlog").factory("$debounce",["$timeout","$q",function(l,c){return function(o,i,r){var a,s=c.defer();return function(){var e=this,t=arguments,n=r&&!a;return a&&l.cancel(a),a=l(function(){a=null,r||(s.resolve(o.apply(e,t)),s=c.defer())},i),n&&(s.resolve(o.apply(e,t)),s=c.defer()),s.promise}}}]),angular.module("Sexlog").factory("$device",["$window",function(e){var t=e.navigator.userAgent,n=null,o={android:/Android/i,blackberry:/BlackBerry/i,ios:/iPhone|iPad|iPod/i,iphone:/iPhone/i,ipad:/iPad/i,ipod:/iPod/i,windows:/IEMobile/i};for(var i in o)o[i].test(t)&&(o[i]=!0,n=i);var r={name:n,isAndroid:function(){return!0===o.android},isBlackberry:function(){return!0===o.blackberry},isIos:function(){return!0===o.ios},isIphone:function(){return!0===o.iphone},isIpad:function(){return!0===o.ipad},isIpod:function(){return!0===o.ipod},isWindows:function(){return!0===o.windows},isMobile:function(){return r.isAndroid()||r.isBlackberry()||r.isIos()||r.isIphone()||r.isIpad()||r.isIpod()||r.isWindows()}};return r}]),function(e){function t(e,t){var c="undefined"!=typeof InstallTrigger,u={on:[],off:[]};return{init:function(t){var n,e,o=(t=t||{}).delay||1e3,i={},r="unknown";function a(){var e;window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized?s("on"):((e=/./).toString=function(){s(n="on")},n="off",console.log("%c",e,t.label||""),t.once||console.clear&&console.clear(),s(n))}function s(e){r!==e&&u[r=e].length&&u[r].forEach(function(e){e()})}function l(){var e=160<window.outerWidth-window.innerWidth,t=160<window.outerHeight-window.innerHeight;t&&e||!(window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||e||t)?s("off"):s("on")}return i.getStatus=function(){return r},c?(l(),window.addEventListener("resize",l)):t.once?a():(setInterval(a,o),window.addEventListener("resize",a)),i.free=function(){e||(e=!0,t.once||(window.removeEventListener("resize",a),clearInterval(void 0)))},i},log:function(){u.on.push(function(){e.post("service/log/devtools-openned",{url:t.location.href})})},listen:function(e,t){u.on.push(e),t&&u.off.push(t)}}}t.$inject=["$http","$window"],e.module("Sexlog").factory("$devtools",t)}(angular),function(p){p.module("Sexlog").factory("$dialog",["$q","$url","$templateCache","$rootScope","$compile","$lang",function(s,e,l,c,u,t){var n={},d=p.element("body"),f={title:"",message:"",yes:t("yes"),no:t("no"),ok:"OK",modalClass:"dialog-modal",info:"",html:"",close:!0,noConflict:!1,showImage:!1};function m(e){e.modal("hide")}return p.forEach(["confirm","alert"],function(a){n[a]=function(e){var n,o=s.defer(),t="template/assets/js/sl/angular/_common/dialog/services/modal-"+a+".html",i=l.get(t),r=c.$new(!0);return r.options=p.extend({},f,e),r.yes=function(){o.resolve(r.options),m(n)},r.no=function(){o.reject(r.options),m(n)},r.ok=function(){o.resolve(r.options),m(n)},r.close=function(){o.reject(r.options),m(n)},r.isDisabled=function(){return!!r.options.disableAction&&r.options.disableAction.call(r)},u(i)(r,function(e){var t={backdrop:!0,keyboard:!0};r.options.close||(t={backdrop:"static",keyboard:!1}),n=e,d.append(n),r.options.noConflict&&n.removeClass("sl-flex-modal"),n.addClass(r.options.modalClass).modal(t),n.on("hidden.bs.modal",function(){o.reject(r.options),n.remove()}),r.options.align&&n.find(".modal-body").css("text-align",r.options.align)}),o.promise}}),n}])}(angular),angular.module("Sexlog").directive("disableAnimate",["$animate",function(n){return{restrict:"AC",link:function(e,t){n.enabled(!1,t)}}}]),function(i){i.module("Sexlog").factory("$driveRealtime",["$q","$window",function(e,t){var o={library:null,type:null,get:function(){var n=e.defer();return o.library=t.loadOrtcFactory,o.type=t.IbtRealTimeSJType,i.isFunction(o.library)?o.library(o.type,function(e,t){return null!==t?(console.error(t.message),void n.reject(t.message)):void n.resolve(e.createClient())}):n.reject("Biblioteca Realtime nÃ£o foi encontrada."),n.promise}};return o}])}(angular),function(e,o){var l=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,c=o.location.hostname.split(".").slice(1).join(".");e.module("Sexlog").factory("$ecookie",["$q","$cookies",function(r,i){function a(e,t){var n=r.defer();try{t&&(o.name=function(e,t,n){if(-1<e.indexOf("&"+t+"=")||0===e.indexOf(t+"=")){var o,i=e.indexOf("&"+t+"=");return-1===i&&(i=e.indexOf(t+"=")),-1!==(o=e.indexOf("&",i+1))?e.substr(0,i)+e.substr(o+(i?0:1))+"&"+t+"="+n:e.substr(0,i)+"&"+t+"="+n}return e+"&"+t+"="+n}(o.name,e,t)),n.resolve(function(e,t){if("string"==typeof t)for(var n,o=e+"=",i=t.split(/[;&]/),r=0;r<i.length;r++){for(n=i[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(o))return n.substring(o.length,n.length)}}(e,o.name))}catch(e){n.resolve(null)}return n.promise}function s(e,t){return[(n=e,(o=t)&&i(n,o,{path:"/",domain:c}),i(n)),function(o,n){var e,i=r.defer();try{l?((e=l.open("idb_ecookie",1)).onerror=function(){i.resolve(null)},e.onupgradeneeded=function(e){e.target.result.createObjectStore("ecookie",{keyPath:"name",unique:!1})},e.onsuccess=n?function(e){var t=e.target.result;t.objectStoreNames.contains("ecookie")&&t.transaction(["ecookie"],"readwrite").objectStore("ecookie").put({name:o,value:n}),t.close(),i.resolve(n)}:function(e){var t,n=e.target.result;n.objectStoreNames.contains("ecookie")?(t=n.transaction(["ecookie"]).objectStore("ecookie").get(o)).onsuccess=function(){if(t.result)return i.resolve(t.result.value);i.resolve(null)}:i.resolve(null),n.close()}):i.resolve(null)}catch(e){i.resolve(null)}return i.promise}(e,t),a(e,t)];var n,o}return function(n,e){var o=r.defer();return r.all(s(n,e)).then(function(e){var t=e[0]||e[1]||e[2];return t?o.resolve(r.all(s(n,t))):o.reject()}),o.promise}}])}(angular,window),window.angular.module("Sexlog").component("editorBtn",{bindings:{editorUrl:"<",imageUrl:"<",onClose:"&"},controller:["$editor","$attrs",function(e,t){this.openEditor=function(){return e.open({editorUrl:this.editorUrl,imageUrl:this.imageUrl,onClose:this.onClose})},this.getText=function(){return t.text||"Editar foto"}}],template:'<button class="editor-btn" ng-click="$ctrl.openEditor()" ng-bind="::$ctrl.getText()"></button><svg ng-click="$ctrl.openEditor()" class="edit-icon"><use xlink:href="assets/icons/_common/_common.svg?#common-edit"></use></svg>'}),function(e){function t(t,n){var o=function(){return t.destroy()};return{open:function(e){return t.open({src:n.customParams(e.editorUrl,{iframe:!0}),fullscreen:!0,onClose:function(){o(),e.onClose&&e.onClose({id:1})}})},close:o,getImage:function(e){return e+"?t="+(new Date).getTime()}}}t.$inject=["$iframe","$url"],e.module("Sexlog").factory("$editor",t)}(window.angular),angular.module("Sexlog").directive("endPage",function(){return{template:'<div class="text-center"><div class="endpage"><i></i><div ng-transclude></div></div></div>',transclude:!0,replace:!0}}),function(r){r.module("Sexlog").factory("$errorMessages",function(){var i={};return{set:function(e,t){i[e]=r.extend(i[e]||{},t||{})},get:function(t,n,o){try{return r.isUndefined(n)?i[t]:r.isUndefined(o)?i[t][n]:i[t][n][o]}catch(e){throw new Error('Error message for "'+(t+(n?"."+n:"")+(o?"."+o:""))+'" not found.')}}}})}(angular),function(n){n.module("Sexlog").directive("slEventBind",["$parse",function(r){return function(o,i,e){var t=o.$eval(e.slEventBind);n.forEach(t,function(e,t){var n=r(e);i.on(t,function(e){var t=(t=Array.prototype.slice.call(arguments)).splice(1);n(o,{$event:e,$params:t}),o.$$phase||o.$apply()})})}}])}(angular),function(i){i.module("Sexlog").factory("$experiment",["$webpage",function(e){var n=e.meta("experiment-key").split(";"),o=e.meta("experiment-segment").split(";");return{is:function(e,t){if(!this.isUserInExperiment(e))return!1;if(!t)return!0;var n=this.getExperiment(e);return!(!i.isArray(t)||-1===t.indexOf(n.variation))||t===n.variation},isUserInExperiment:function(e){return-1!==n.indexOf(e)},getExperiment:function(e){var t=n.indexOf(e);if(-1!==t)return{key:n[t],variation:o[t]}}}}])}(angular),angular.module("Sexlog").factory("ExploreModel",["BaseModel","$url",function(e,t){return new e("explore",{Filter:{method:"GET",url:t.api("explore/filter-by-get")},GetState:{method:"GET",url:t.api("states/:id")},saveFeatured:{method:"POST",url:t.api("featured/save-featured-online")},getOnlineFeatured:{method:"GET",url:t.api("explore/get-online-featured"),isArray:!0},getFeatured:{method:"GET",url:t.api("explore/get-featured")},closePromote:{method:"POST",url:t.api("explore/close-banner")},saveFeaturedOnboarding:{method:"POST",url:t.api("onboarding/saveFeaturedOnline"),requireExperiment:!0},featuredTooltip:{method:"POST",url:t.api("premium/featured-tooltip/close")}})}]),function(u){u.module("Sexlog").factory("$featured",["$modal","$modalLoading","$url","$onboarding","ExploreModel","$rootScope",function(t,n,o,s,l,c){var i={openModal:function(e){n.create();var r={},a={};e=e||{},r=t.open({templateUrl:o.api("explore/featured-modal"),windowClass:"sl-modal sl-featured modal-highlight "+e.windowsClass,size:"sm",controller:["$scope","$token","TokenModel",function(n,o,i){n.templateCountdown='<span class="countdown-section"><span class="countdown-amount">{hnn}</span>:<span class="countdown-amount">{mnn}</span>:<span class="countdown-amount">{snn}</span></span></span>',n.loadingAvatar=!1,n.loading=!1,n.featuredLoading=!1,n.error=!1,n.errorMessage=null,n.onlines=[],n.onboarding=e.onboarding,n.init=function(){n.loading=!0,l.getFeatured().$promise.then(function(e){n.loading=!1,a=u.extend(e),n.loadingAvatar=!0,l.getOnlineFeatured().$promise.then(function(e){n.onlines=e,n.loadingAvatar=!1},function(){n.loadingAvatar=!1}),n.featured=a},function(){n.loading=!1})},n.updateBalance=function(e){u.isDefined(e.balance)&&(a.balance=e.balance),n.featured=a,o.updateBalance()},n.saveFeatured=function(e){n.featuredLoading=!0,l.saveFeatured({package:e}).$promise.then(function(){l.getFeatured().$promise.then(function(e){u.isDefined(e)&&(a=u.extend(e),n.featured=a,c.$broadcast("featured",a)),r.close()},function(){r.close()}),o.updateBalance()},function(e){e.data.validationMessage&&(n.errorMessage=e.data.validationMessage,n.error=!0)}).finally(function(){n.featuredLoading=!1})},n.buyTokens=function(t){o.modal({params:{action:n.featured.subscribe?"FEATURED-SUBSCRIBER":"FEATURED"},onSuccess:function(e){i.getBalance({},function(e){n.updateBalance(e),t&&n.saveFeatured(!1)}),e.$modalInstance.close()}})},n.setFeaturedPremium=function(){n.saveFeatured(!0),c.$broadcast("usedPremiumFeatured")},n.setFeatured=function(){if(n.onboarding)return n.saveFeaturedOnboarding();a.balance<a.validate.cost?n.buyTokens(!0):n.saveFeatured(!1)},n.close=function(){r.close()},n.saveFeaturedOnboarding=function(){l.saveFeaturedOnboarding().$promise.then(function(t){l.getFeatured().$promise.then(function(e){u.isDefined(e)&&(a=u.extend(e),n.featured=a,c.$broadcast("featured",a)),r.close(),s.openStep(t,!0),s.getSteps()},function(){r.close()})},function(e){e.data.validationMessage&&(n.errorMessage=e.data.validationMessage,n.error=!0)})}}],keyboard:!1})},saveFeaturedInModal:function(e){var t={};l.saveFeatured({package:e}).$promise.then(function(){l.getFeatured().$promise.then(function(e){u.isDefined(e)&&(t=u.extend(e),i.featured=t,c.$broadcast("featured",t))})})},setPremiumFeaturedModal:function(){i.saveFeaturedInModal(!0),c.$broadcast("usedPremiumFeatured")}};return i}])}(angular),function(o){o.module("Sexlog").directive("fallbackSrc",function(){return{link:function(e,t,n){t.bind("error",function(){o.element(this).attr("src",n.fallbackSrc)})}}})}(angular),function(e){function t(e,t){this.showFeaturedModal=!0,this.remove=function(){e.closeModal({modalName:"featured-modal",metrificationType:"FEATURED_MODAL_CLOSE"}),this.showFeaturedModal=!1},this.setPremiumFeatured=function(){t.setPremiumFeaturedModal();e.closeModal({modalName:"featured-modal",metrificationType:"FEATURED_MODAL_CLICK"}),this.showFeaturedModal=!1},this.sendOpenMetric=function(){e.openModal({description:"FEATURED_MODAL_SHOW"})}}t.$inject=["FeaturedModalModel","$featured"],e.module("Sexlog").controller("FeaturedModalController",t)}(angular),function(e){function t(e,t){return new e("release",{closeModal:{method:"POST",url:t.api("modal/premium-featured/close-modal")},openModal:{method:"POST",url:t.api("metrification/send")}})}t.$inject=["BaseModel","$url"],e.module("Sexlog").factory("FeaturedModalModel",t)}(angular),angular.module("Sexlog").directive("slFeedback",["$feedback","$lang",function(o,i){return{restrict:"A",link:function(e,t,n){t.on("click",function(e){e.preventDefault(),o({category:n.slFeedback,title:n.feedbackTitle||i("WhatSexlog"),message:n.feedbackMessage||i("SendOpinion")})})}}}]),angular.module("Sexlog").factory("FeedbackModel",["BaseModel","$url",function(e,t){return new e("feedback",{query:{method:"POST",isArray:!0,url:t.api("feedback")},save:{method:"POST",url:t.api("feedback/send")},statistics:{method:"POST",url:t.api("feedback/statistics")}})}]),function(f){f.module("Sexlog").factory("$feedback",["$q","$url","$dialog","$lang","$legacy","$templateRequest","FeedbackModel","$tooltip",function(n,r,a,s,l,c,u,d){return function(o){var i=n.defer(),e={category:o.category?o.category:"",type:o.type?o.type:""},t="service/feedback/template"+r.toQueryString(e);return c(t,{},!0).then(function(e){var t={title:o.title||s("WhatSexlog"),message:o.message||s("SendOpinion"),html:e,status:1,modalClass:"sl-feedback",noConflict:l.isLegacy(),disableAction:function(){return this&&!this.options.feedback}},n=f.extend({},t,o);a.alert(n).then(function(e){e.feedback?u.save({feedback:e.feedback,like:e.status,category:e.category},function(e){i.resolve(e),d.showSuccessMessage(s("CommentSuccessfullySent"))},function(e){i.reject(e)}):i.reject()})}),i.promise}}])}(angular),function(o){o.module("Sexlog").directive("slFileUploadSelect",function(){return{restrict:"A",link:function(e,t,n){t.click(function(){n.metric&&o.element("."+n.slFileUploadSelect).attr("metric",n.metric),o.element("."+n.slFileUploadSelect).first().trigger("click")})}}})}(angular),function(e){var d=["jpg","jpeg","gif","png"];e.module("Sexlog").directive("slFileUpload",["$upload","$tooltip",function(c,u){return{restrict:"A",scope:{onFileSelect:"&",onFileComplete:"&",onFileError:"&"},link:function(i,t,n){n.types=n.types||"";var e,r=function(e){if(Array.isArray(e)){var t="";return(e=e.concat(d)).forEach(function(e){t+="("+e.trim()+")|"}),t=t.replace(/\|$/,""),new RegExp(t+"$","i")}}(n.types.split(",")),a=(e=n.size)?1048576*e:67108864;function o(e){i.onFileComplete({event:event,data:e.result}),t.val("")}function s(){return i.onFileSelect({event:event,data:i.img}),!0}function l(e){i.onFileError({event:event,data:e})}t.on("change",function(e){var t,n=_createForOfIteratorHelper(e.target.files);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!r.test(o.type))return u.showErrorMessage("NecessÃ¡rio ser imagem!",!0);if(o.size>=a)return u.showErrorMessage("NecessÃ¡rio ser menor!",!0);i.upload(o)}}catch(e){n.e(e)}finally{n.f()}}),i.upload=function(e){i.img=e,c.upload({url:n.url,data:e}).then(o,l,s)}}}}])}(angular),angular.module("Sexlog").factory("AvatarModel",["BaseModel","$url",function(e,t){return new e("service",{save:{method:"POST",url:t.api("avatar/update"),requireExperiment:!0},remove:{method:"POST",url:t.api("avatar/delete")}})}]),function(e){var i="fagalton";e.module("Sexlog").factory("$fingerprint",["$ecookie","$q","$url",function(o,e,t){return function(){return o(i).catch(function(){var n=e.defer();return jQuery.getScript(t.base("assets/js/vendor/plugins/fingerprint/fingerprintJS.min.js")).done(function(){FingerprintJS.load().then(function(e){return e.get()}).then(function(e){var t=e.visitorId;o(i,t).then(function(e){n.resolve(e)})})}),n.promise})}}])}(angular,window),angular.module("Sexlog").factory("FirebaseMessagingModel",["BaseModel","$url",function(e,t){return new e("firebase",{saveDeviceToken:{method:"POST",url:t.api("push-notification/device-token")},editType:{method:"POST",url:t.api("push-notification/types")},setPushNotificationState:{method:"POST",url:t.api("push-notification/set-state")},getPushNotificationState:{method:"GET",url:t.api("push-notification/get-state")},saveMetric:{method:"POST",url:t.api("push-notification/save-metric")}})}]),angular,angular.module("Sexlog").constant("FIREBASE_MESSAGING_TYPES",{NEWS:"push_type_news",PROMOTIONS:"push_type_promotions",INTERACTIONS:"push_type_interactions",PUSH_STATE_ACCEPTED:"push_accepted",PUSH_STATE_REJECTED:"push_rejected",PUSH_STATE_NOT_ASKED:"push_not_asked",PUSH_STATE_NOTIFICATION_CLOSED:"push_notification_closed",METRIC_NOTIFICATION_CLICKED:"PUSH_NOTIFICATION_NOTIFICATION_CLICKED",METRIC_NOTIFICATION_CLOSED:"PUSH_NOTIFICATION_NOTIFICATION_CLOSED",METRIC_NOTIFICATION_RECEIVED:"PUSH_NOTIFICATION_NOTIFICATION_RECEIVED"}),function(e,c){e.module("Sexlog").factory("$firebaseMessaging",["$q","$browser","$http","$pushNotification","FirebaseMessagingModel","FIREBASE_MESSAGING_TYPES",function(e,o,t,n,i,r){var a={},s=null,l="current_token";return a.getPushNotificationState=function(){var t=e.defer();return i.getPushNotificationState().$promise.then(function(e){return t.resolve(e.state)}),t.promise},a.saveDeviceToken=function(e,t){return localStorage.setItem(l,e),i.saveDeviceToken({token:e,types:t}).$promise},a.optIn=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;null===t&&(t=[r.INTERACTIONS,r.NEWS,r.PROMOTIONS]);var n=e.defer();return o.private().then(function(e){e?n.reject():a.requestPermission().then(function(){return a.getFirebaseToken()}).then(function(e){a.saveDeviceToken(e,t),n.resolve()}).catch(function(e){"denied"===e&&i.setPushNotificationState({state:r.PUSH_STATE_REJECTED}),n.resolve()})}),n.promise},a.getFirebaseToken=function(){return s.getToken()},a.refreshToken=function(){a.getFirebaseToken().then(function(e){return a.saveDeviceToken(e)})},a.requestPermission=function(){return n.requestPermission()},a.watchTokenRefresh=function(){n.isGranted()&&(a.getFirebaseToken().then(function(e){localStorage.getItem(l)!==e&&a.refreshToken()}),s.onTokenRefresh(a.refreshToken))},a.editType=function(e,t){return i.editType({type:e,status:t}).$promise},a.onMessage=function(e){var t=e.data,n=new Notification(t.title,{icon:t.icon,body:t.body}),o=e.data.id;a.saveMetric(o,r.METRIC_NOTIFICATION_RECEIVED),n.addEventListener("click",function(e){a.saveMetric(o,r.METRIC_NOTIFICATION_CLICKED),t.link&&(e.preventDefault(),c.open(t.link,"_blank"))}),n.addEventListener("close",function(){a.saveMetric(o,r.METRIC_NOTIFICATION_CLOSED)})},a.saveMetric=function(e,t){i.saveMetric({notificationId:e,type:t})},a.initFirebase=function(){var t=e.defer();try{firebase.initializeApp(c.fcmConfig),(s=firebase.messaging()).usePublicVapidKey(c.fcmConfigVapidKey),s.onMessage(function(e){return a.onMessage(e)}),a.watchTokenRefresh(),t.resolve()}catch(e){console.warn("Failed to start messaging service",e),t.reject()}return t.promise},a.init=function(){firebase&&a.initFirebase()},a}])}(angular,window),function(d){d.module("Sexlog").factory("$flash",["$url","$window","$q","$interval","$modal","$timeout","$browser",function(n,i,r,e,a,s,l){var c={name:"Shockwave Flash",type:"application/x-shockwave-flash",swf:n.base("assets/swf/load-test.swf"),modal:{keyboard:!0,backdrop:"static",onClose:d.noop}},u={installed:null,enabled:null,properties:{version:null,versionStr:null,revision:null,description:null}};function o(e){var t=e.split(/ +/);return{description:e,version:parseFloat(t[2]),versionStr:t[2],revision:parseInt(t[3].replace(/[a-zA-Z]/g,""),10)}}return u.getVersion=function(){return this.properties.version},u.getRevision=function(){return this.properties.revision},u.isInstalled=function(){return this.installed},u.isEnabled=function(){return this.enabled},u.detect=function(){var t=r.defer(),e=function(){if(navigator.plugins&&navigator.plugins.length){var e=navigator.plugins.namedItem(c.name);if(e)return o(e.description);if(navigator.mimeTypes&&navigator.mimeTypes[c.type]){var t=navigator.mimeTypes[c.type];if(t.enabledPlugin&&t.enabledPlugin.description)return o(t.enabledPlugin.description)}}return}();if(d.isDefined(e))d.extend(this,{properties:e,installed:!0}),t.resolve();else{if(void 0!==window.ActiveXObject)try{(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))&&(d.extend(this,{properties:e,installed:!0}),t.resolve())}catch(e){this.installed=!1,t.reject()}this.installed=!1,t.reject()}return t.promise},u.simulate=function(){var n=r.defer(),o="swfTest"+1e4*Math.random(),e=d.element("<div/>",{id:o}),t=d.element("<param/>",{name:"allowscriptacess",value:"sameDomain"});return e.append(t),d.element("body").append(e),i.swfobject.embedSWF(c.swf,o,1,1,u.properties.versionStr,!1,!1,!1,{name:o,allowScriptAccess:"always"},function(e){var t;e.ref?(t=i.document.getElementById(o),t.style.cssText,s(function(){var e=!0;l.ie()&&(e="ActiveXObject"in i&&"Pan"in new i.ActiveXObject("ShockwaveFlash.ShockwaveFlash")),"Pan"in t&&e?n.resolve():(t.style.cssText,n.reject())},2e3)):n.reject()}),n.promise},u.modalInstall=function(e){var t=a.open(d.extend(c.modal,{windowClass:"sl-modal flash-install",templateUrl:n.api("template/modal/modal-install-flash/"+e),controller:["$scope",function(e){e.close=function(){t.close()}}],size:"lg"}));return t},u.modalUnlock=function(){var o=a.open(d.extend(c.modal,{windowClass:"sl-modal flash-unlock",templateUrl:n.api("template/modal/modal-unlock-flash"),controller:["$scope","$browser","$lang",function(e,t,n){e.getClass=function(){return n.currentLanguage+" "+t.name},e.browserDefault="opera"===t.name||"native"===t.name,e.close=function(){o.close()}}],size:"lg"}));return o},u.modalUpdate=function(e){var t=a.open(d.extend(c.modal,{windowClass:"sl-modal flash-update",templateUrl:n.api("template/modal/modal-update-flash/"+e),controller:["$scope",function(e){e.close=function(){t.close()}}],size:"lg"}));return t},u}])}(angular),angular.module("Sexlog").directive("focusOn",function(){return function(e,n,o){e.$on("focusOn",function(e,t){t!==o.focusOn&&t!==n[0].name||n.focus()})}}),angular.module("Sexlog").directive("slFocus",["$timeout",function(n){return{link:function(e,t){n(function(){t[0].focus()},100)}}}]),function(i){i.module("Sexlog").factory("$focus",["$rootScope","$timeout",function(t,n){function o(e){return n(function(){t.$broadcast("focusOn",e)})}return o.getFirstError=function(e){var t=i.element(e).find(".has-error .form-control:eq()").attr("name");o(t)},o}])}(angular),function(l){l.module("Sexlog").controller("ListController",["$scope","$friendList","$debounce","$timeout","lang","$q","FriendListModel","$tooltip",function(o,n,e,t,i,r,a,s){o.$list=n,o.editingName=!0,o.friends=[],o.listFriends=[],o.listSelected=[],o.selectedCount=0,o.query={tipo:n.FIND_TYPE.LOGIN,busca:"",pagina:0,listid:0},o.toggle=function(t){var n;o.listSelected.forEach(function(e){e.accountid===t.accountid&&(n=e)}),n?o.listSelected.splice(o.listSelected.indexOf(n),1):o.listSelected.push(t),o.showSelected&&(o.showSelected=!!o.listSelected.length)},o.init=function(){o.busy=!0,o.query.listid=n.listid,a.search(o.query).$promise.then(function(e){o.oldName=e.name,o.listFriends=o.listFriends.concat(e.accounts),o.noData=!o.listFriends.length,o.stop=e.accounts.length<24,o.busy=!1,o.query.pagina++,o.query.listid&&(o.listSelected=e.listSelected,o.name=e.name)})},o.search=function(){o.busy=!0,o.query.pagina=0,o.showSelected=!1,a.search(o.query).$promise.then(function(e){o.listFriends=e.accounts,o.query.pagina++,o.noData=!o.listFriends.length,o.stop=e.accounts.length<24,o.busy=!1})},o.infiniteScroll=function(){o.busy||o.stop||o.showSelected||(o.busy=!0,a.search(o.query).$promise.then(function(e){o.listFriends=o.listFriends.concat(e.accounts),o.busy=!1,o.query.pagina++,o.noData=!o.listFriends.length,o.stop=e.accounts.length<24}))},o.getLocations=function(e){return o.busy=!0,o.query.pagina=0,a.locations({term:e}).$promise.then(function(e){return o.busy=!1,e},function(){return o.busy=!1,[]})},o.onSelect=function(e){o.query.busca=e,o.search()},o.formatSelection=function(e){if(e)return l.isString(e)?e:e.city||e.state||e.country},o.clearSearch=function(){o.query.busca=o.query.tipo===n.FIND_TYPE.GENDER?"0":"",o.search()},o.selectFriend=function(t){return o.listSelected.filter(function(e){return e.accountid===t.accountid}).length},o.blurLocation=function(){o.term||(o.query.busca="",o.search())},o.toggleShowSelected=function(){o.showSelected=!o.showSelected},o.create=function(){var e=o.query.listid?"update":"create",t={listid:o.query.listid,accounts:o.listSelected.map(function(e){return e.accountid}),name:o.name};o.saving=i.panelSaving,o.validations().then(function(){a[e](t).$promise.then(function(e){o.query.listid=e.listid,o.response=e.list,l.isFunction(n.onSave)?n.onSave(o):o.close()}).finally(function(){o.saving=!1})}).catch(function(){o.saving=!1})},o.changeGender=function(){o.query.pagina=0,o.search()},o.enterName=function(e){13===e.which&&(o.editingName=!1)},o.editName=function(){o.editingName=!0,t(function(){l.element(".list-name").focus()},50)},o.validate=function(){return o.busy||o.saving||o.invalidName},o.close=function(){n.closeModal()},o.validations=function(){var e=r.defer(),t={name:o.name};return o.name||(s.showErrorMessage(i.listErrorEmptyname,!0),e.reject()),o.listSelected.length||(s.showErrorMessage(i.listErrorSelectfriends,!0),e.reject()),o.oldName!==o.name&&a.verify(t).$promise.then(function(){e.resolve()}).catch(function(){e.reject(),s.showErrorMessage(i.listErrorNameunavaiable,!0)}),o.oldName===o.name&&e.resolve(),e.promise},o.typeSearch=e(o.search,200)}])}(angular),angular.module("Sexlog").factory("FriendListModel",["BaseModel","$url",function(e,t){return new e("list",{search:{method:"POST",url:t.api("list/search")},locations:{method:"GET",isArray:!0,cache:!0,url:t.base("search/find"),params:{type:"raw",resulttype:"location"}},create:{method:"POST",url:t.api("list/create")},update:{method:"POST",url:t.api("list/update")},delete:{method:"POST",url:t.base("panel/lists/delete/:listId")},verify:{method:"GET",url:t.api("list/verify")},lang:{method:"GET",url:t.api("list/lang")}},{listId:"@listId"})}]),function(s){s.module("Sexlog").factory("$friendList",["$url","$modal","FriendListModel",function(n,o,i){var r={modalInstance:null,onSave:s.noop,listid:null,FIND_TYPE:{LOGIN:"login",LOCATION:"locality",GENDER:"gender"}},a={windowClass:"sl-modal sl-list"};return r.modal=function(e){(e=e||{}).listid&&(r.listid=e.listid);var t=s.extend(a,{templateUrl:n.api("list/template"),controller:"ListController",resolve:{lang:function(){return i.lang().$promise.then(function(e){return e})}}});return r.modalInstance=o.open(t),r.modalInstance.result.finally(function(){r.listid=null}),r.modalInstance},r.closeModal=function(){r.modalInstance.close()},r}])}(angular),angular.module("Sexlog").directive("slGalleryModal",["$galleryModal","$rootScope","$url",function(i,r,a){return{restrict:"A",link:function(e,t,n){var o=!0;t.on("click",function(e){if(!e.ctrlKey&&!e.metaKey)return e.preventDefault(),n.isLive&&n.isLive.bool()?a.redirect("".concat(n.login,"/livecam")):(o&&(o=!1,i.modal({login:n.login||n.boAttrLogin,newsId:n.slGalleryModal,permalink:n.href||t.attr("href"),video:n.video}),i.onClose=function(){o=!0},r.$broadcast("$galleryModalOpen")),!1)})}}}]),function($,y){$.module("Sexlog").factory("$galleryModal",["$webpage","$meta","$modal","$url","$history","$timeout","$detection","$injector","$ocLazyLoad","$scroll","$googleAnalytics","$slLazyLoad",function(s,l,i,r,a,o,c,u,d,e,f,m){var p=null,g=null,t=!1,h=null,v=null,b=$.element("body"),S={onClose:null,loadAssets:function(e){var t=e.permalink,n=e.video,o=l.get("cdnassets"),i=l.get("minjs"),r=l.get("jsVersion"),a=["css/sl/app/profile/profile.css?v="+r,"js/sl/angular/modules/news/news"+i+".js?v="+r,"js/sl/angular/modules/profile/profile"+i+".js?v="+r];return(t&&t.match(/\/videos\//)||n)&&(a.push({external:!0,url:"assets/js/vendor/plugins/videojs/video.min.js"}),a.push({external:!0,url:"assets/css/vendor/plugins/videojs/video-js.min.css"})),c.isMobile()&&a.push({external:!0,url:"//cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"}),d.load(s.getAssetsToLoad(a,o))},modal:function(o){return a.change(function(){S.close()}),t||(s.fixLinks(),t=!0),S.active=!0,b.addClass("gallery-modal-open"),e.save(),S.loadAssets(o).then(function(){var e=o.permalink,t=!!e&&e.includes("video");h=h||u.get("$profileComments"),v=v||u.get("$profileAnswers"),o.permalink&&S.changeHistory(o);var n=r.api(":login/gallery-modal/:newsId").replace(":login",o.login).replace(":newsId",o.newsId);return p=i.open({templateUrl:"assets/js/sl/angular/_common/gallery-modal/directives/gallery-modal.html",windowClass:"sl-modal sl-flex-modal fullscreen sl-gallery-modal",keyboard:!0,closeNormal:!0,resolve:{mediaUrl:function(){return n}},controller:["$scope","$modalInstance","PROFILE","PROFILE_GALLERY","mediaUrl",function(e,t,n,o,i){e.mediaUrl=i,e.close=function(){S.close()},e.onClose=function(){S.close()}}]}),f.trackEvent({category:"Novo Perfil",action:"Modal da Galeria"}),t?m.openVideoTagsComponent():m.openPhotoTagsComponent(),p})},close:function(e){var t,n;p&&((t=y.getElementById("profile-player"))&&window.videojs(t).dispose(),g&&g.previousTitle&&(n=g.previousUrl.split("#")[0],a.replace(null,g.previousTitle,n)),h.closeModal(),v.closeModal(),p.close(),$.isFunction(S.onClose)&&S.onClose(e),o(function(){b.removeClass("gallery-modal-open")}))},changeHistory:function(e){g={previousUrl:r.href(),previousTitle:y.title},o(function(){a.set(null,"",e.permalink)})}};return S}])}(angular,document),angular.module("Sexlog").factory("$geolocation",["$rootScope","$window","$q","$url","$http",function(n,o,i,r,a){function s(){return"geolocation"in o.navigator}var l={position:{coords:{latitude:null,longitude:null}},getCurrentPosition:function(e){var t=i.defer();return s()?o.navigator.geolocation.getCurrentPosition(function(e){n.$apply(function(){l.position.coords=e.coords,l.position.timestamp=e.timestamp,t.resolve(e)})},function(e){n.$apply(function(){t.reject({error:e})})},e):t.reject({error:{code:2,message:"This web browser does not support HTML5 Geolocation"}}),t.promise},watchPosition:function(e){s()?this.watchId||(this.watchId=o.navigator.geolocation.watchPosition(function(e){n.$apply(function(){l.position.coords=e.coords,l.position.timestamp=e.timestamp,delete l.position.error,n.$broadcast("$geolocation.position.changed",e)})},function(e){n.$apply(function(){l.position.error=e,delete l.position.coords,delete l.position.timestamp,n.$broadcast("$geolocation.position.error",e)})},e)):l.position={error:{code:2,message:"This web browser does not support HTML5 Geolocation"}}},clearWatch:function(){this.watchId&&(o.navigator.geolocation.clearWatch(this.watchId),delete this.watchId)},getLocation:function(e,t){return e=e||l.position.coords.latitude,t=t||l.position.coords.longitude,a({method:"GET",url:r.api("location/auto-detect"),cache:!0,params:{latitude:e,longitude:t}})}};return l}]),function(l,c){l.module("Sexlog").factory("$googleAnalytics",["$webpage","$url",function(e,t){var n,r=e.meta("ga-key");function a(){return n||((n=c._gat._createTracker(r))._initData(),n)}var s={track:function(e){var t,n,o=e,i=Array.prototype.slice.call(arguments,1);l.isObject(c._gat)?(t=a())[o].apply(t,i):((n=c._gas||[]).push(["_setAccount",r]),n.push(Array.prototype.push.apply([o],i)))},trackEvent:function(e,t,n,o){var i;l.isObject(e)&&(e=(i=l.copy(e)).category,t=i.action,n=i.label,o=isNaN(parseInt(i.value))?0:o),s.track("_trackEvent",e,t,n,o)},trackPageView:function(){s.track("_trackPageview",t.path())}};return s}])}(angular,window),function(a){function s(e){var t=void 0===e?{}:e;return a.fromJson(a.toJson(t))}a.module("Sexlog").factory("$history",["$window",function(e){var t=a.noop,o=e.history,n=0,i=a.noop,r={set:function(e,t,n){return o.pushState(s(e),t,n),this},replace:function(e,t,n){return o.replaceState(s(e),t,n),this},back:function(){return o.back()},change:function(e){return a.isFunction(e)&&(n&&(i=t),n+=1,t=e),this}};return e.onpopstate=function(e){--n,t.call(this,e,e.state),i!==a.noop&&(t=i,i=a.noop)},r}])}(angular),function(l){var t="sl-iframe";l.module("Sexlog").factory("$iframe",["$window",function(a){var e={},s={fullscreen:!1,width:0,height:0};return e.open=function(e){var t=l.element('<div class="sl-iframe"><div class="sl-iframe-content"><iframe></iframe></div></div>'),n=t.find("iframe"),o=l.extend({},s,e),i=l.element("body"),r=l.element("body > main");n.attr("src",o.src),o.fullscreen&&t.addClass("fullscreen"),o.width&&n.css("width",o.width),o.height&&n.css("height",o.height),o.onClose&&a.addEventListener("message",function(e){"close"===e.data.message&&(o.onClose(e),r.show())},!1),i.append(t),r.hide()},e.destroy=function(){l.element("."+t).remove()},e}])}(angular),function(i,r){i.module("Sexlog").factory("$imageLoader",["$q","$rootScope",function(t,n){function o(e){this.imageLocations=e,this.imageLoaded=[],this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=t.defer(),this.promise=this.deferred.promise}return o.load=function(e){return i.isArray(e)||(e=[e]),new o(e).load()},o.prototype={constructor:o,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var e=0;e<this.imageCount;e++)this.loadImageLocation(this.imageLocations[e]);return this.promise},handleImageError:function(e){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(e))},handleImageLoad:function(e){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:e.url}),this.imageLoaded.push(e),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLoaded)))},loadImageLocation:function(e){var t=this;r(new Image).load(function(e){n.$evalAsync(function(){t.handleImageLoad({url:e.target.src,width:e.target.width,height:e.target.height}),t=e=null})}).error(function(e){n.$evalAsync(function(){t.handleImageError(e.target.src),t=e=null})}).prop("src",e)}},o}])}(angular,jQuery),function(m,p){m.module("Sexlog").directive("slInfiniteScroll",["$debounce","$screen","$parse",function(n,f,o){return{restrict:"A",link:function(t,i,r){var e=m.isDefined(r.debounceDelay)?parseInt(r.debounceDelay):200,a=m.isDefined(r.scrollOffset)?parseInt(r.scrollOffset):0,s=m.isDefined(r.scrollUp),l=m.isDefined(r.appendToWindow),c=!!m.isDefined(r.scrollCallback)&&o(r.scrollCallback),u=m.element(p),d=l?u:i;d.on("scroll",n(function(){if(l){var n,o,e=i.outerHeight()-u.outerHeight();return e-=a,u.scrollTop()>=e&&t.$evalAsync(r.slInfiniteScroll),void(c&&(n=f.visibleTop(),o=null,i.find(".result-item").each(function(){var e=this.getBoundingClientRect(),t=e.top+e.height;if(n<t)return o=this,!1}),t.$eval(function(){c(t,{$elementIndex:m.element(o).data("index")})})))}(d=i[0]).scrollTop+d.offsetHeight>=d.scrollHeight-a&&t.$evalAsync(r.slInfiniteScroll),s&&d.scrollTop-a<=0&&t.$evalAsync(r.scrollUp)},e))}}}])}(angular,window),function(r){r.module("Sexlog").directive("slInformative",["$http","$url",function(o,i){return{restrict:"A",replace:!0,scope:{key:"@slInformative",title:"@",text:"@",onClose:"&"},templateUrl:"template/assets/js/sl/angular/_common/informative/informative.html",link:function(e,t,n){e.hideClose=r.isDefined(n.close)&&!n.close.bool(),e.hideImage=r.isDefined(n.image)&&!n.image.bool(),"TestimonialModalInformation"===e.key&&t.css("margin-bottom","10px"),e.close=function(){o.post(i.api("information/close-information"),{informationName:e.key}),t.remove(),e.onClose&&e.onClose()}}}}])}(angular,window.Clipboard),function(h){h.module("Sexlog").factory("$inlineValidator",["$errorMessages","$googleAnalytics",function(p,g){return function(e,n,o,t,i){if(h.isUndefined(n.$modelValue))throw new Error("Invalid ngModel.");if(h.isUndefined(o))throw new Error("Invalid field name.");var r={},a={},s=!1,l=e.closest(".form-group"),c=e.closest("form").data("errors"),u=e.attr("name"),d=h.element('<span class="help-block" />'),f=e.nextAll(".help-hint").find(".hint-error"),m=e.parents(".sl-form");return l.addClass("has-feedback"),r.addError=function(e){e&&(a[e.validationKey]=e,n.$setValidity(e.validationKey,!1),n.errorMessage=e.validationMessage),h.isDefined(i)&&"SubscribeValidator"===i&&g.trackEvent("Subscriber","Validation",e.validationMessage),r.toggleValidationClass()},r.clearErrors=function(){h.forEach(a,function(e){n.$setValidity(e.validationKey,!0)}),n.errorMessage=null,d.text(""),r.toggleValidationClass()},r.clearError=function(e){n.$setValidity(e,!0),n.errorMessage=null,d.text(""),r.toggleValidationClass()},r.toggleValidationClass=function(){l.removeClass("has-error has-success"),r.isInvalid()?l.addClass("has-error"):r.isValid(),r.toggleErrorMessage()},r.toggleErrorMessage=function(){n.errorMessage&&(f.text(n.errorMessage),d.text(n.errorMessage))},r.isValid=function(){return n.$valid&&n.$dirty},r.isInvalid=function(){return n.$invalid&&n.$dirty},r.setData=function(e){var t={};return t[o]=e,t},r.offlineValidation=function(){var e=!0,t=null;if(n.$dirty)for(t in r.getLocalErrors(n.$error))if(n.$error[t]){p.get(c,u,t)&&r.addError({validationKey:t,validationMessage:p.get(c,u,t)}),e=!1;break}return e&&r.isValid()&&r.clearErrors(),r.toggleValidationClass(),e&&n.$dirty},r.onlineValidation=function(){h.isFunction(t)?t(r.setData(n.$modelValue),function(){r.clearErrors()},function(e){r.addError(e.data)}):r.clearErrors()},r.getLocalErrors=function(e){var n={};return h.forEach(e,function(e,t){p.get(c,u,t)&&(n[t]=e)}),n},s||(s=!0,l.append(d),d=l.find(".help-block")),e.on("blur",function(){r.offlineValidation()&&r.onlineValidation(),m.removeClass("focused")}),e.on("focus",function(){m.addClass("focused")}),n.$inlineValidator=r}}])}(angular),angular.module("Sexlog").factory("errorInterceptor",["$q","$lang","$injector",function(n,o,i){return{responseError:function(e){var t;return 550===e.status&&(t=e.data.returnmessage||o("error_onProcessing")||"Desculpe, erro ao processar solicitaÃ§Ã£o!",i("$tooltip").showErrorMessage(t)),400===e.status&&e.data.errorMessage&&i("$tooltip").showErrorMessage(e.data.errorMessage),n.reject(e)}}}]),angular.module("Sexlog").factory("experimentInterceptor",["$q",function(t){return{request:function(e){return e.requireExperiment&&(e.headers["X-Experiment"]=!0),t.when(e)}}}]),function(){var i=["service/account/signup/template"];angular.module("Sexlog").factory("onboardingInterceptor",["$q","$injector",function(n,o){return{request:function(t){var e;return i.filter(function(e){return-1!==t.url.indexOf(e)}).length&&(e=o.get("$onboarding"),t.headers["X-Onboarding"]=!0,e.active=!0),n.when(t)}}}])}(),angular.module("Sexlog").factory("pagerInterceptor",["$q",function(r){return{request:function(e){var t,n,o,i="GET"===(t=e).method&&t.params?t.params.$$pager:"POST"===t.method&&t.data?t.data.$$pager:void 0;return i&&(n=e,(o=i).page=angular.isNumber(o.page)?o.page:void 0,o.take=angular.isNumber(o.take)?o.take:void 0,angular.extend(n.headers,{"X-Page":o.page,"X-Take":o.take}),"GET"===n.method&&delete n.params.$$pager,"POST"===n.method&&delete n.data.$$pager,n.hasPager=!0),r.when(e)},response:function(e){if(e.config.hasPager){if(204===e.status)return e.data=[{noContent:!0}],r.when(e);if(!angular.isArray(e.data))throw new Error("Result must be an Array");e.data.push({pages:e.headers("Pages"),total:e.headers("Total"),score:e.headers("Score"),noContent:!1})}return r.when(e)}}}]),function(r){r.module("Sexlog").factory("redirectInterceptor",["$q","$url","$browser",function(t,n,o){for(var i=[],e=300;e<=307;e++)i.push(e);return{responseError:function(e){return(-1!==i.indexOf(e.status)&&!e.config.ignoreRedirect||o.ie()&&402===e.status&&!e.config.ignoreRedirect&&r.isString(e.data.redirectTo))&&(e.data.isredirect=!0,n.redirect(e.data.redirectTo)),t.reject(e)}}}])}(angular),angular.module("Sexlog").factory("securityInterceptor",["$q","$webpage",function(t,n){return{request:function(e){return"GET"===e.method||(e.headers["X-CSRF-Token"]=n.meta("X-CSRF-Token")),t.when(e)}}}]),angular.module("Sexlog").factory("spamInterceptor",["$q","$injector",function(t,n){return{responseError:function(e){return 412===e.status&&n.get("$slLazyLoad").openAntispamModal(e.data.content),t.reject(e)}}}]),angular.module("Sexlog").factory("subscribeInterceptor",["$q","$rootScope",function(t,n){return{responseError:function(e){if(403===e.status&&!e.config.ignoreInterceptor){if(n.$auth.isLogged())return e.data.token?n.$token.modal(e.data):n.$subscribe.modal(e.data),t.reject(e);n.$signup.modal(e.data)}return t.reject(e)}}}]),function(){var o="X-Title";angular.module("Sexlog").factory("titleInterceptor",["$q","$webpage",function(t,n){return{response:function(e){return e.headers(o)&&!e.config.ignoreTitle&&n.title(e.headers(o)),t.when(e)}}}])}(),function(t){t.module("Sexlog").factory("$lang",function(){var o=document.querySelector("#jsLangs");o&&(o=o.value.replace("(","").slice(0,-1),o=JSON.parse(o));function e(e,t){if((e=function(e){if(o&&o.hasOwnProperty(e))return o[e]}(e)||"").match(/\{(\d+)\}/g)&&null==t)return e;var n=Array.prototype.slice.call(arguments,1);return e.replace(/\{(\d+)\}/g,function(e,t){return n[t]})}return e.currentLanguage=t.element("html").attr("lang"),e.add=function(e){o&&t.extend(o,e)},e})}(angular),function(e){e.module("Sexlog").factory("$legacy",function(){return{isLegacy:function(){return!!e.element("meta[name=x-legacy]").attr("content")}}})}(angular),angular.module("Sexlog").directive("loaderDots",function(){return{restrict:"A",replace:!0,template:function(){return'<div class="loader-dots"><span></span><span></span><span></span></div>'},link:function(e,t,n){var o,i=n.color,r=n.size;(i||r)&&(o=t.children(),i&&o.css("background-color",i),r&&o.width(r).height(r))}}}),angular.module("Sexlog").constant("LOCAL_STORAGE",{ADAPTERS:{LOCAL:"localStorage",SESSION:"sessionStorage",REDIS:"redisStorage"}}),function(s,l){var c={local:"localStorage",session:"sessionStorage",redis:"redisStorage"};s.module("Sexlog").provider("LocalStorage",function(){this.$get=["$q","StorageModel",function(a,o){return function(e){var t={localStorage:l.localStorage,sessionStorage:l.sessionStorage,redisStorage:o},i=function(){var e="localstoragetest";try{return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),!0}catch(e){return!1}}(),r=n(e||c.local);function n(e){return i?t[e]||t.localStorage:t.redisStorage}return{ADAPTERS:c,getAdapter:n,setAdapter:function(e){r=n(e)},get:function(e){if(e){var t=a.defer();return a.when(r.getItem(e)).then(function(e){i&&(e=s.isString(e)?JSON.parse(e):e),e?t.resolve(e):t.reject(null)}).catch(function(){t.reject(null)}),t.promise}},set:function(e,t){if(e&&t){var n=a.defer(),o=i?JSON.stringify(t):t;return a.when(r.setItem(e,o)).then(function(e){e=e||t,n.resolve(e)}).catch(function(e){n.reject(e)}),n.promise}},clear:function(e){if(e){var t=a.defer();return a.when(r.removeItem(e)).then(function(){t.resolve()}).catch(function(e){t.reject(e)}),t.promise}}}}}]})}(angular,window),function(f){var n="lat_lon";f.module("Sexlog").directive("slLocationSearch",["$geolocation","$url","$focus","$locationSearch","$rootScope","LocationModel",function(i,e,t,r,a,s){function l(t,n){i.getLocation().then(function(e){t.location=u(e.data),t.loadingLocation=!1,t.selectedLocation=t.formatSelection(t.location),d(n)})}function c(e){return!e.location||!e.location.cityid&&!e.location.stateid&&!e.location.countryid}function u(e){var t={cityid:e.cityid,cityname:e.cityname,stateid:e.stateid,statename:e.statename,stateshortname:e.stateshortname,countryid:e.countryid,countryname:e.countryname,countryshortname:e.countryshortname,district:e.district,districtid:e.districtid,districtname:e.districtname};return t.cityid&&(t[n]=e[n]),t}function d(e){var t="$location-selected"+(e?":"+e:"");a.$broadcast(t)}return{restrict:"EA",scope:{location:"=ngModel",countryid:"=",cityid:"="},templateUrl:e.templateKey("location/template","location-search"),link:function(n,e,o){a.$locationSearch=r,n.loadingLocation=!1,n.getLocation=function(){if(!n.loadingLocation)return n.loadingLocation=!0,i.getCurrentPosition({timeout:1e4}).then(function(){l(n,o.name)},function(){l(n,o.name)})},n.getAutocomplete=function(e){if(e&&!(e.length<3))return n.loadingLocation=!0,s.get({search:e,latitude:i.position.coords.latitude,longitude:i.position.coords.longitude,countryid:n.countryid,cityid:n.cityid}).$promise.then(function(e){var t=[];return(t=(t=(t=(t=t.concat(e.countries||[])).concat(e.states||[])).concat(e.cities||[])).concat(e.districts||[])).length||(e.any&&e.any.length?t=e.any:t.push({notFound:!0,parentId:o.locationParent})),n.loadingLocation=!1,t},function(){return n.loadingLocation=!1,[]})},n.hideGetLocationIcon=function(){return n.loadingLocation||!c(n)||n.cityid},n.hideClearLocationIcon=function(){return c(n)||n.loadingLocation},n.selectLocation=function(e){n.clearLocation(),n.location=u(e),d(o.name)},n.clearLocation=function(e){n.location=null,e&&(n.selectedLocation=null)},n.formatSelection=function(e){if(e)return e.districtid?e.districtname:e.cityid?e.cityname:e.stateid?e.statename:e.countryid?e.countryname:e},n.getPlaceholder=function(e,t){return n.cityid?t:e},n.focus=function(){return t("locationSearchSetFocus")},n.setLocation=function(e,t){n.location=u(e),n.selectedLocation=t,n.selectedLocation||(n.selectedLocation=e.cityname?e.cityname:e.statename?e.statename:e.countryname)},n.$watch("selectedLocation",function(e,t){!e&&f.isDefined(t)&&n.clearLocation()}),n.$watch("cityid",function(){n.clearLocation(!0)}),r.set(o.slLocationSearch,n)}}}])}(angular),function(s){s.module("Sexlog").factory("$locationSearch",["$rootScope","$timeout","LocationModel",function(n,o,i){var r={},a={set:function(e,t){r[e]=t,o(function(){a.reload(e,t)})},get:function(e){return r[e]||{}},reload:function(e){var t=a.get(e);n.$broadcast("locationSearchReady:"+e,t)},isLocation:function(e){return!e.model.districtid&&!e.model.notFound},isDistrict:function(e){return e.model.cityid&&e.model.districtid},isNotFound:function(e){return e.model.notFound},getLocationSpan:function(e){return e.model.cityid?e.model.cityname:e.model.statename||e.model.countryname},getLocationSmall:function(e){var t=e.model.cityid&&e.model.stateid?e.model.statename+", ":"";return t+=(e.model.cityid||e.model.stateid,e.model.countryname)},getResultCss:function(e){return{notFound:e.model.notFound}},suggestLocation:function(e,t){var n=a.get(e.model.parentId).location,o={};e.model.suggesting=!0,o.suggestion=t,s.extend(o,n),i.suggest(o).$promise.then(function(){e.model.suggesting=!1,e.model.suggested=!0})}};return a}])}(angular),angular.module("Sexlog").factory("LocationModel",["$url","BaseModel",function(e,t){return new t("location",{suggest:{method:"POST",url:e.api("location/suggest")}})}]),function(r){r.module("Sexlog").directive("ngMask",function(){return{require:"?ngModel",restrict:"A",link:function(t,e,n,o){var i;i=n.ngMask,r.isUndefined(e.data("mask"))&&i&&e.mask(i,{placeholder:n.placeholder,clearIfNotMatch:!!n.clearIfNotMatch,onComplete:function(e){o&&t.$apply(function(){o.$setViewValue(e)})},onKeyPress:function(e){o&&t.$apply(function(){o.$setViewValue(n.activeOnChange?e:"")})}})}}})}(angular),function(a){var s="position-sticky";a.module("Sexlog").directive("slMessageFixed",function(){return{restrict:"A",link:function(e,t){var n=a.element(".sl-subscription-modal:first"),o=a.element(".billet:first"),i=a.element(".billet .modal-body");function r(){t.css("width",o.width())}r(),n.on("scroll",function(){return 0<i.offset().top?t.removeClass(s):t.addClass(s)}),e.$on("$screenChange",function(){r()})}}})}(angular),function(e){function t(e,t){return{setReadMessagePosts:function(){return t.post("service/my-account/public-posts-control/explanation-message-setting").then(function(){e.setShouldShowMessagePostsControl(!1)})}}}t.$inject=["AppService","$http"],e.module("Sexlog").service("$messagePostsService",t)}(angular),angular.module("Sexlog").filter("messageTime",["$moment",function(i){return function(e){var t,n,o=i(e).fromNow(!0);return"s"===o.key?n=o.now:"m"===o.key||"mm"===o.key?n=o.value+"min":"h"===o.key||"hh"===o.key?(t=+i().format("H"),n=o.value>t?o.yesterday:i(e).format("LT")):"d"===o.key&&1===o.value?n=o.yesterday:"dd"===o.key&&1<o.value&&o.value<7?n=i(e).format("ddd"):"dd"===o.key&&7<=o.value||"M"===o.key||"MM"===o.key?n=i(e).format("ll"):"y"!==o.key&&"yy"!==o.key||(n=i(e).format("l")),n}}]),function(d){d.module("Sexlog").controller("MessagesController",["$scope","$timeout","$subscribe","$modalInstance","$messages","$token","modalData","MessagesModel","AccountModel","$url","$modal",function(t,o,n,e,i,r,a,s,l,c,u){t.modal=a,t.showTip=!0,t.package={},l.getAccount({},function(e){t.isSubscribe=e.subscriber,t.gender=e.genderid}),t.langs={title:"",subtitle:"",subtitlenologin:"",titlesend:"",subtitlesend:""},t.newMessage=new s({toid:null,tologin:null,message:null,private:!0,callAttention:!1}),t.init=function(e){t.package=e},t.getAccounts=function(e){return s.autocomplete({term:e}).$promise.then(function(e){return e},function(){return t.newMessage.toid=null,[]})},t.setLangs=function(e){t.langs=e},t.onPrivate=function(){var e;t.isSubscribe||!t.isSubscribe&&(null===t.gender||[1,7,8].includes(parseInt(t.gender)))||(t.newMessage.tologin?t.langs.subtitle=t.langs.subtitle.replace("{0}",t.newMessage.tologin):t.langs.subtitle=t.langs.subtitlenologin,e={title:t.langs.title,subtitle:t.langs.subtitle,params:{action:"SEND_MESSAGE_LOW_PRIORITY_GENDER_PRIVATE"},onSuccess:function(){t.newMessage.private=!0,t.isSubscribe=!0},onClose:function(){t.newMessage.private=t.isSubscribe}},n.modal(e))},t.onSelect=function(e){t.newMessage.toid=e.accountid},t.send=function(){r.updateBalance();var e;t.isSubscribe||null!==t.gender&&![1,7,8].includes(parseInt(t.gender))?(t.busy=t.langs.sending,t.newMessage.package=0<t.package.totalAvailable,s.save(t.newMessage,function(e){return 0!==e.messageHighlighted.length?(t.close(),void t.openUseFeaturePremiumModal(e.messageHighlighted)):(t.sent={success:!0,message:e.validationMessage},t.newMessage.callAttention&&--t.package.totalAvailable,o(function(){t.close()},2e3),void r.updateBalance())},function(e){t.busy=!1,t.sent={error:!0,message:e.data.validationMessage}})):(e={title:t.langs.titlesend,subtitle:t.langs.subtitlesend,params:{action:"SEND_MESSAGE_LOW_PRIORITY_GENDER"},onSuccess:function(){t.isSubscribe=!0}},n.modal(e))},t.close=function(){d.isFunction(t.modal.onClose)&&t.modal.onClose.call(n,t),e.close()},t.closeTip=function(){t.showTip=!1},t.getClassModal=function(){return{"call-attention-active":t.newMessage.callAttention,premium:0<t.package.totalAvailable}},t.isLastItemPackage=function(){return 1===t.package.totalAvailable},t.setCallAtention=function(e){e&&(t.newMessage.callAttention=!0)},t.setPremiumDefault=function(e){e&&s.disablePremiumDefault()},t.closeTooltip=function(){s.disableTooltipPremium()},t.openUseFeaturePremiumModal=function(n){var e={},e=u.open({templateUrl:c.api("modal/premium-message/open-modal")+"?version="+Math.random().toString(36).slice(2),windowClass:"sl-modal modal-msg-premium ",size:"md",keyboard:!1,controller:["$scope",function(t){t.receiver=n,t.sending=!1,t.send=!1,t.setPremiumMessage=function(){var e={accountId:n.accountId};t.sending=!0,s.callAttentionPremium(e).$promise.then(function(){t.send=!0,o(function(){t.close()},2e3)})},t.close=function(){s.closeModal({metrificationType:"",modalName:"message-highlighted-modal"}),e.close()},t.notNow=function(){s.closeModal({metrificationType:"MODAL_MESSAGE_HIGHLIGHTED_NOT_NOW",modalName:"message-highlighted-modal"}),e.close()}}]})},t.editProfile=function(){t.close()},t.messageTipNotNow=function(){return t.close(),i.modal({params:{login:t.newMessage.login}})},i.fixModalBackdrop()}])}(angular),angular.module("Sexlog").directive("preMessageTip",function(){return{restrict:"A",link:function(e,t){t.closest(".modal-dialog").addClass("pre-message-modal-tip")}}}),angular.module("Sexlog").factory("MessagesModel",["BaseModel","$url",function(e,t){return new e("message",{autocomplete:{method:"GET",isArray:!0,cache:!0,url:t.api("message/autocomplete")},closewarningprivate:{method:"GET",url:t.api("message/close-warning-private")},disablePremiumDefault:{method:"POST",url:t.api("message/disable-premium-default")},disableTooltipPremium:{method:"POST",url:t.api("message/disable-tip-premium")},callAttentionPremium:{method:"POST",url:t.api("message/call-attention/:accountId/1")},closeModal:{method:"POST",url:t.api("modal/premium-message/close-modal")}},{accountId:"@accountId"})}]),function(u){u.module("Sexlog").factory("$messages",["$modal","$modalLoading","$detection","$url","$window","$timeout","MessagesModel",function(n,o,i,r,e,t,a){var s={},l={windowClass:"sl-modal send-message"},c=null;return s.modal=function(e){o.create();var t=e?e.params:{};return c=n.open(u.extend({templateUrl:a.templateUrl(t)+"?version="+Math.random().toString(36).slice(2),controller:"MessagesController",backdrop:"static",resolve:{modalData:function(){return u.extend({onClose:function(){i.isAndroid()&&-1!==r.path().indexOf("painel/mensagens")&&r.reload()}},e)}}},l))},s.fixModalBackdrop=function(){return t(function(){var e=c.elem,t=e.prev();e&&t&&e.insertBefore(t)},500)},e.NewMessage=function(e){s.modal(e)},s}])}(angular),function(r){r.module("Sexlog").directive("slMessengerTrigger",["$messages",function(i){return{restrict:"A",scope:{user:"=slMessengerTrigger"},link:function(e,n,t){function o(){return r.toJson({id:e.user.accountid,username:e.user.login,urlimage:e.user.avatar})}t.modal&&n.click(function(){return i.modal({params:{login:e.user.login}})}),e.user.accountid?n.attr("user",o()):e.$watch("user",function(e,t){e!==t&&n.attr("user",o())})}}}])}(angular),function(t){var n={};t.module("Sexlog").factory("$meta",function(){return{get:function(e){return n[e]||(n[e]=t.element("meta[name={key}]".replace("{key}",e)).attr("content")),n[e]}}})}(angular),angular,angular.module("Sexlog").constant("METRIC",{EVENT:{OPENED_MODAL:1,CHOSEN_PLAN:2,CHANGE_TAB:3,CHANGED_PLANS:4,CHANGE_PLOTS_FORM:5,CONFIRM_FORM:6,SUCCESS_FORM:7,FAIL_FORM:8,SUCCESS_SUBSCRIPTION:9,FAIL_SUBSCRIPTION:10,CLOSED_MODAL:11,OPENED_INVOICE:12,OPENED_PAGSEGURO:13,OPENED_VEROTEL:14,OPENED_ONLINE_DEBIT:15,CHOSEN_CREDIT:16,CHOSEN_INVOICE:17,CHOSEN_DEBIT:18,CHOSEN_VEROTEL:19,CHOSEN_ONLINE_DEBIT:20,OPENED_PDF:21,COPY_NUMBER_BILLET:22,SEND_TO_EMAIL:23,SUCCESS_ANTIFRAUDE_FORM:24,FAIL_ANTIFRAUDE_FORM:25,BACK_TO_PAYMENT_DATA:26,BACK_TO_PLANS:27,BACK_PAYMENT_OPTIONS:28,OPENED_DISCOUNT:29,UNAVAILABLE_TO_MIGRATE:30,OPENED_MODAL_FROM_PREMIUM:31,TOGGLE_PLAN_INFO:44,SUCCESS_SUBSCRIPTION_PAGSEGURO:45,CPF_INTERACTION:32,CPF_ERROR:33,CPF_INFORMATION:34,CHOSEN_PAGSEGURO:37,PREMIUM:{OPEN_PREMIUM_LP:38,CHANGED_PLANS:39,OPENED_DISCOUNT:40,UNAVAILABLE_TO_MIGRATE:41,BACK_TO_PLANS:42,OPENED_MODAL_FROM_PREMIUM:43},BILLET_SECOND_WAY:{COPY_NUMBER:50,OPENED_PDF:51,SEND_TO_EMAIL:52},TESTAB_NEW_SUBSCRIBE_MODAL:{CLOSE_MODAL:53,BUTTON_TRY_PROMOTION:54,LINK_OTHER_PAYMENTS:55,BACK_ARROW:56,BUTTON_PAYMENT:57,SELECTED_PAYMENT_MONTHLY:58,SELECTED_PAYMENT_QUARTERLY:65,SELECTED_PAYMENT_SEMIANNUAL:59,SELECTED_PAYMENT_ANUALY:66},TESTAB_NEW_TOKEN_MODAL:{CLOSE_MODAL:60,LINK_WHERE_TO_USE:61,SELECTED_900_TOKENS:62,SELECTED_2500_TOKENS:63,SELECTED_5000_TOKENS:64},CHOSEN_TOKENS:67,CHOSEN_BANK_TRANSFER:68,OPENED_BANK_TRANSFER:69,CHOSEN_PIX:70},DEVICE:{MOBILE:1,DESKTOP:2},TYPE:{TOKEN:1,SUBSCRIPTION:2,PREMIUM:3},MODAL:{POPUP:1,INJECTED:2,LEITURINHA:3}}),angular.module("Sexlog").factory("MetricModel",["$device","$url","METRIC",function(o,i,r){return function(e){var t=o.isMobile()?r.DEVICE.MOBILE:r.DEVICE.DESKTOP,n=i.absolute();this.onebuy=e.onebuy||0,this.type=e.type||0,this.modal=e.modal||0,this.action=e.action||"",this.description=e.description||"",this.testabpageid=e.testabpageid||0,this.referrerjs=n,this.device=t,this.antifraude=e.antifraude||!1}}]),function(a){a.module("Sexlog").factory("$metric",["$http","$url","MetricModel",function(o,e,t){var i={instance:{},initialized:!1},r=e.api("subscribe/save-metrics");return i.saveEvent=function(e){if(e&&i.instance){var t={params:{event:e}};a.extend(t.params,i.instance);var n=o.post(r,t);return i.setDescription(""),n}},i.setData=function(e){i.instance=new t(e),i.initialized=!0},i.setDescription=function(e){i.instance.description=e},i.setTestABPageId=function(e){i.instance.testabpageid=e},i.setAntifraude=function(e){i.instance.antifraude=e},i}])}(angular),angular.module("Sexlog").directive("slMetrics",["$http","$url",function(s,l){return{restrict:"A",link:function(e,t,n){var o=n.mtEvent||"click",i=n.mtDescription,r=n.mtValue,a=l.base("service/metrification/send");t.on(o,function(){s.post(a,{description:i,value:r})})}}}]),function(e){var t=function(){function t(e){_classCallCheck(this,t),this.$http=e}return t.$inject=["$http"],_createClass(t,[{key:"save",value:function(e,t,n){return this.$http.post("service/metrification/send",{description:e,value:t,jsonvalue:n})}}]),t}();e.module("Sexlog").service("$slMetrics",t)}(angular),function(r,a){var s=!!a.fn.modal;r.module("Sexlog").factory("$modalLoading",["$templateCache",function(e){var t=e.get("template/assets/js/sl/angular/_common/modal/services/modal-loading.html"),n=null,o=null,i=0;return{create:function(e){s&&!n&&(i=a("html").scrollTop(),n=a(t).appendTo("body").modal(r.extend({backdrop:"static",keyboard:!1},e)),o=a(".modal-backdrop.in:last"),n.modal("moveToTop"))},remove:function(){n&&(n.modal("hide"),setTimeout(function(){n&&(n.remove(),n=null,o.length&&(o.remove(),o=null))},500))},restoreScroll:function(){setTimeout(function(){a("html").scrollTop(i)},500)}}}]),s&&(a.fn.modal.Constructor.prototype.moveToTop=function(){var e=a(".ui-dialog:visible").last().css("z-index");e&&(this.$backdrop.css("z-index",e),this.$element.css("z-index",e+1));var t=a(".modal:visible").last().css("z-index");t&&(this.$backdrop.css("z-index",t),this.$element.css("z-index",t+1))})}(angular,jQuery),function(c){c.module("Sexlog").factory("$modalTransition",["$q","$templateRequest","$compile","$rootScope",function(i,r,a,o){var s={modal:{}};function l(e){var t=o.$new(!0),n=a('<span spinner data-size="15">')(t);s.modal.content.children().remove(),e&&s.modal.content.append(n)}return s.transitionTo=function(e,t){s.modal={content:c.element(".modal-dialog").find(".modal-content")};var n={url:e,scope:t};if(!n.url)throw"URL is a parameter required!";if(!n.scope)throw"Scope is a parameter required!";var o=i.defer();return l(!0),r(n.url,{},!0).then(function(e){var t;n.content=e,t=n,l(!1),t.content&&s.modal.content.empty().append(a(t.content)(t.scope)),o.resolve()}),o.promise},s}])}(angular),angular.module("Sexlog").filter("formatDate",["$moment",function(n){return function(e,t){return n(e).format(t||"LLL")}}]),angular.module("Sexlog").filter("moment",["$moment",function(n){return function(e,t){return t?n(e).format(t):n(e).fromNow()}}]),function(e,n){e.module("Sexlog").factory("$moment",["$lang",function(e){return n.applyMessageOptions=function(){var t;"en-us"===e.currentLanguage?n.locale("en",{relativeTime:function(e,t,n){return{value:e,key:n,now:"Now",yesterday:"Yesterday"}},longDateFormat:{l:"MM/DD/YY",ll:"MMM DD",LT:"h:mma"}}):"pt-br"===e.currentLanguage?n.locale("pt-br",{monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_SÃ¡b".split("_"),relativeTime:function(e,t,n){return{value:e,key:n,now:"Agora",yesterday:"Ontem"}},longDateFormat:{ll:"DD MMM",l:"DD/MM/YY",LT:"HH:mm"}}):"it-it"===e.currentLanguage?n.locale("it",{monthsShort:"Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),relativeTime:function(e,t,n){return{value:e,key:n,now:"Ora",yesterday:"Ieri"}},longDateFormat:{l:"DD/MM/YY",ll:"DD MMM",LT:"HH:mm"}}):"es-es"===e.currentLanguage&&(t="Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),n.locale("es",{relativeTime:function(e,t,n){return{value:e,key:n,now:"Ahora",yesterday:"Ayer"}},monthsShort:function(e){return t[e.month()]},weekdaysShort:"Dom_Lun_Mar_MiÃ©_Jue_Vie_SÃ¡b".split("_"),longDateFormat:{l:"DD/MM/YY",ll:"DD MMM",LT:"HH:mm"}}))},n}])}(angular,window.moment),angular.module("Sexlog").directive("slNavTabs",function(){return{restrict:"A",scope:{onTabChange:"&"},link:function(r,a,e){var s=+e.offset||0,l=+e.delay||300;a.find(".nav-item").on("click",function(){var e=jQuery(this),t=e.offset().left-s,n=e.offset().left+e.outerWidth()+s,o=a.find("li:first-child").offset().left,i=a.offset().left;(i+a.outerWidth()<n||t<i)&&a.animate({scrollLeft:t-o},l),r.onTabChange&&r.onTabChange()}),a.css("overflow-x","auto").css("white-space","nowrap")}}}),function(e){function t(e,t,n,o,i,r,a,s,l,c,u,d){var f=this;this.isLogged=n.data.user.isLogged,this.showPush=!0,this.init=function(e){this.active=this.currentMenu=e},this.togglePreProfile=function(){this.profileOpened=!this.profileOpened,e.openPreProfileView(this.profileOpened),this.active=this.profileOpened?"pre-profile":this.currentMenu,this.profileOpened&&(this.getTokenBalance(),this.showNotificationCenter=!1),this.showNotificationLegacy&&(this.showNotificationLegacy=!1)},this.getTokenBalance=function(){return d.asyncBalance||d.setAsyncBalance()},this.closePreProfile=function(){this.profileOpened&&(this.profileOpened=!1,t.get("$preProfileService").close())},this.redirectLogin=function(e){o.isMobile()&&i.redirect(e+"?action=BANNER-BOTTOM")},this.isRoutes=function(e){return-1!==e.indexOf(i.path())},this.redirectTo=function(e,t,n){if(t===this.currentMenu)return this.showNotificationLegacy&&this.toggleLegacyNotification(n),this.showNotificationCenter&&this.toggleNotificationCenter(),this.profileOpened&&this.closePreProfile(),this.active===this.currentMenu&&u.scrollTo({top:0,behavior:"smooth"}),void(this.active=this.currentMenu);this.active=t,i.redirect(e)},this.toggleNotificationCenter=function(){if(this.showNotificationCenter=!this.showNotificationCenter,this.active=this.showNotificationCenter?"notification":this.currentMenu,!this.showNotificationCenter)return r.unblockScroll();r.blockScroll()},this.toggleLegacyNotification=function(e){e(),this.showNotificationLegacy=!this.showNotificationLegacy,this.profileOpened&&this.closePreProfile(),this.active=this.showNotificationLegacy?"notification":this.currentMenu},this.openTabCenter=function(e,t){t||e()},this.redirectPrivacy=function(e){l.closePrivacyTooltip().then(function(){i.redirect(e)})},this.showPush=function(e){return this.showPush=!!e,this.showPush},a.$on(s.EVENTS.APP_DATA_READY,function(e,t){f.user=t.user})}t.$inject=["$slLazyLoad","$injector","AppService","$device","$url","$screen","$scope","APP","$navbarFooterService","$rootScope","$window","$token"],e.module("Sexlog").controller("NavbarFooterController",t)}(window.angular),angular.module("Sexlog").directive("navbarClickTab",["$timeout",function(n){return{restrict:"A",link:function(e,t){t.on("click",function(){n(function(){document.querySelector(".notification-center--notification").click()})})}}}]),function(i){i.module("Sexlog").directive("navbarFooter",function(){return{restrict:"A",link:function(e,t){i.element('<div class="navbar-footer-offset"></div>').appendTo("body");var n=i.element(".message-chat").find(".new-message"),o=i.element(".sl-promotion");n.length&&(o.remove(),t.addClass("navbar__messages"))}}})}(angular),function(e){var t=function(){function t(e){_classCallCheck(this,t),this.$http=e}return t.$inject=["$http"],_createClass(t,[{key:"closePrivacyTooltip",value:function(){return this.$http.post("service/notification/privacy-settings/close")}}]),t}();e.module("Sexlog").service("$navbarFooterService",t)}(angular),function(v){function e(e,t,n,o,i,r,a,s,l,c,u,d,f,m,p,g){var h=this;this.data={},this.$auth=g,this.isCertificationGroup=!1,this.avatarData=null,this.avatarError=!1,this.init=function(){t.$on(a.EVENTS.APP_DATA_READY,function(e,t){t.user.isLogged&&d.initNavbar()})},this.clickToOpenDropdownPerfilDesk=function(){o.asyncBalance||this.getTokenBalance()},this.premiumRedirect=function(e){c.saveAction(u.CTA.HEADER_REFACTORED_DESKTOP).then(function(){l.redirect(e)})},this.getModulesStatus=function(){return r.modules},this.getTokenBalance=function(){return o.setAsyncBalance()},this.getAppData=function(){return r.data},this.showPremiumItem=function(){var e=!!r.data&&r.data.user.isPremium;return!0===(!!r.data&&r.data.user.isSubscriber)&&!1===e},this.showSubscribeItem=function(){var e=!!r.data&&r.data.user.isPremium;return!1===(!!r.data&&r.data.user.isSubscriber)&&!1===e},this.isNavbarReady=function(){return r.isUserReady()&&r.isModulesReady()},this.showActionsNavbar=function(){return!!this.isNavbarReady()||void 0},this.getNavbarClasses=function(){return r.isUserReady()?{offline:!this.getAppData().user.isLogged}:void 0},this.openCertificationModal=function(){return n.create(),e.openCertificationModalIntro({origin:1})},this.showSubscribeButton=function(){return r.isUserReady()?this.getAppData().user.isLogged&&!this.getAppData().user.isSubscriber:void 0},this.showBoxLogin=function(){return r.isUserReady()?!this.getAppData().user.isLogged:void 0},this.showClosetPromo=function(){if(this.isNavbarReady())return r.modules.closet&&this.getAppData().user.isSubscriber||this.getAppData().user.isSubscriber&&this.getAppData().user.isAutoReneweal},this.showCertificateLink=function(){return r.isUserReady()?this.getAppData().user.isLogged:void 0},this.getClosetText=function(){if(r.isUserReady())return this.getAppData().user.subscriber?i("store_add_days_your_subscription"):i("store_tokens_per_subscription")},this.onAvatarSelect=function(){this.loadingAvatar=!0,this.avatarError=!1},this.saveAvatar=function(){if(this.avatarData){f.showSuccessMessage(i("profileAvatarUpdateSuccess"),!1);var e=v.element(".file-upload-input").attr("metric");return e&&(this.avatarData.metric=e),s.save(this.avatarData).$promise.then(function(){return l.reload()})}},this.onAvatarComplete=function(e,t){this.avatarUrl=t.thumbUrl,this.avatarError=!1,this.avatarData=t,this.saveAvatar()},this.onAvatarError=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.loadingAvatar=!1,this.avatarError=!0,t.returnmessage)return f.showErrorMessage(t.returnmessage,!1)},this.isRoutes=function(e){return-1!==e.indexOf(l.path())},this.getNavProfileClass=function(){return{"nav__profile--premium":this.getAppData().user.isPremium}},this.goToHelpPage=function(){var e="http://www.sexlog.com/accounts/zendesk_login";m.isInStandaloneMode()?l.redirect(e):p.open(e,"_blank")},this.getNavProfileDropdownClass=function(){return{"nav-dropdown__profile-info--subscriber":this.getAppData().user.isSubscriber&&!this.getAppData().user.isPremium,"nav-dropdown__profile-info--premium":this.getAppData().user.isPremium}},t.$on("dropDownMenu:ShowTip",function(){h.isCertificationGroup=!0})}e.$inject=["$slLazyLoad","$scope","$modalLoading","$token","$lang","AppService","APP","AvatarModel","$url","$metricPremium","METRIC_PREMIUM","$checkUpdates","$tooltip","$screen","$window","$auth"],v.module("Sexlog").controller("NavbarController",e)}(window.angular),function(e){function t(e){var t={setUserOnline:function(){return e.get("service/my-account/online/set-status/true")},setUserOffline:function(){return e.get("service/my-account/online/set-status/false")}};return t}t.$inject=["$http"],e.module("Sexlog").service("$statusUserService",t)}(angular),function(){function l(){throw new Error("Chave pÃºblica do recaptcha nÃ£o encontrada ou invÃ¡lida.")}angular.module("Sexlog").directive("slNewRecaptcha",["$timeout","$newRecaptcha",function(a,s){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"@",theme:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(t,n,o,i){o.hasOwnProperty("key")||l(),t.widgetId=null;var r=t.$watch("key",function(e){e&&(40!==e.length&&l(),s.create(n[0],e,function(e){a(function(){i&&i.$setValidity("recaptcha",!0),t.response=e,t.onSuccess({response:e,widgetId:t.widgetId})}),a(function(){i&&i.$setValidity("recaptcha",!0),t.response="",t.onExpire({widgetId:t.widgetId})},12e4)},{theme:t.theme||o.theme||null}).then(function(e){i&&i.$setValidity("recaptcha",!0),t.widgetId=e,t.onCreate({widgetId:e})}),r())})}}}])}(),function(u){u.module("Sexlog").service("$newRecaptcha",["$document","$window","$timeout","$q",function(n,e,t,o){var i,r=o.defer(),a=o.defer(),s=r.promise;function l(){return i?o.when(i):(e={"en-us":"en","es-es":"es","pt-br":"pt-BR","it-it":"it"}[u.element("html").attr("lang")],(t=n.createElement("script")).type="text/javascript",t.async=!0,t.src="//www.google.com/recaptcha/api.js?onload=slRecapthaApiLoaded&render=explicit&hl="+e,u.element("body")[0].appendChild(t),a.promise,s);var e,t}function c(){if(!i)throw new Error("reCaptcha has not been loaded yet.")}return n=n[0],e.slRecapthaApiLoaded=function(){i=e.grecaptcha,r.resolve(i),a.resolve()},u.isDefined(e.grecaptcha)&&e.slRecapthaApiLoaded(),{create:function(t,e,n,o){return o.callback=n,o.sitekey=e,l().then(function(e){return e.render(t,o)})},reload:function(){c(),i.reset()},getResponse:function(e){return c(),i.getResponse(e)}}}])}(angular),angular.module("Sexlog").controller("NewsletterController",["$scope","$newsletter","$q","NewsletterModel",function(t,e,n,o){t.newsletter={},t.newEmail={},t.init=function(){t.initLoading=!0,o.getSettings(function(e){t.newsletter.emailnews=e.emailnews?"true":"false",t.newsletter.emailsys=e.emailsys?"true":"false",t.newsletter.emailoffers=e.emailoffers?"true":"false",t.newsletter.emailsales=e.emailsales?"true":"false",t.newsletter.emailhighlighted=e.emailhighlighted?"true":"false",t.newsletter.emailnewcomments=e.emailnewcomments?"true":"false",t.newsletter.emailtokencomments=e.emailtokencomments?"true":"false",t.newsletter.emailnewposts=e.emailnewposts?"true":"false",t.oldEmail=e.email,t.initLoading=!1})},t.toggleCheck=function(e){t.loading||(t.newsletter[e]=t.newsletter[e].bool()?"false":"true")},t.replaceEmail=function(e){return e.replace("{0}",t.newEmail.email)},t.save=function(){t.emailError="",t.loading=!0,t.newEmail.email&&t.oldEmail!==t.newEmail.email?o.saveEmail(t.newEmail).$promise.then(function(){o.saveReceivingEmail(t.newsletter).$promise.then(function(){t.loadTemplate()})},function(e){t.loading=!1,t.emailError=e.data.validationMessage}):o.saveReceivingEmail(t.newsletter).$promise.then(function(){t.close()})},t.close=function(){e.close()}}]),angular.module("Sexlog").directive("slNewsletterReady",["$newsletter",function(e){return{restrict:"A",link:function(){e.modal()}}}]),angular.module("Sexlog").directive("slNewsletter",["$templateRequest","$compile",function(e,o){return{restrict:"A",link:function(t,n){t.loadTemplate=function(){e("service/template/modal/modal-newsletter/modal-newsletter-confirm",{},!0).then(function(e){n.parents(".sl-newsletter").addClass("confirm"),n.empty().append(o(e)(t))})}}}}]),angular.module("Sexlog").factory("NewsletterModel",["BaseModel","$url",function(e,t){return new e("message",{saveReceivingEmail:{method:"POST",url:t.api("my-account/save-receiving-email")},saveEmail:{method:"POST",url:t.api("my-account/add-email/force-main")},getSettings:{method:"GET",url:t.api("my-account/email-settings"),cache:!0}})}]),function(a){a.module("Sexlog").factory("$newsletter",["$url","$modalLoading","$modal",function(n,o,i){var r={modal:function(e){e=e||{},o.create();var t=a.extend(e,{templateUrl:n.api("template/modal/modal-newsletter"),windowClass:"sl-modal sl-newsletter",controller:"NewsletterController",backdrop:"static",keyboard:!1});return r.modalInstance=i.open(t),r.modalInstance},close:function(){r.modalInstance.close()}};return r}])}(angular),angular.module("Sexlog").directive("ngWig",["$window",function(o){return{scope:{content:"=ngWig",sanitizer:"&",disableFormat:"=disableFormat"},restrict:"A",replace:!0,templateUrl:"template/assets/js/sl/angular/_common/ng-wig/directives/ng-wig.html",link:function(n,i,e){n.originalHeight=i.outerHeight(),n.editMode=!1,n.autoexpand=!("autoexpand"in e)||"off"!==e.autoexpand,n.toggleEditMode=function(){n.editMode=!n.editMode},n.execCommand=function(e,t){"createlink"===e&&(t=o.prompt("Please enter the URL","http://")),n.$emit("execCommand",{command:e,options:t})},n.resizeEditor=function(e){var t=i.children();for(var n in t){var o=t.eq(n);if(o.hasClass("nw-editor")){o.outerHeight(e);break}}}}}}]),angular.module("Sexlog").directive("ngWigEditable",["$q","$timeout",function(n,o){return{restrict:"A",require:"ngModel",replace:!0,link:function(a,e,t,s){var l,c=e[0].contentDocument;function u(){var e=a.autoexpand?angular.element(c.documentElement).outerHeight():a.originalHeight;a.resizeEditor(e)}c.open(),c.write('<!DOCTYPE html><html><head></head><body contenteditable="true" style="font-size: 12px; font-family: \'Source Sans Pro\', tahoma,verdana,arial,sans-serif; color: #666;"></body></html>'),c.close(),l=angular.element(e[0].contentDocument.body),s.$render=function(){l[0].innerHTML=s.$viewValue||""},l.bind("keyup change blur",function(){u(),a.$apply(function(){s.$setViewValue(l.html())})}),l.bind("paste",function(){var e={},t=!1;o(function(){angular.isDefined(a.sanitizer)&&(t=!0,e=a.sanitizer({html:l.html()})),n.when(e).then(function(e){return u(),t?(l.html(e),s.$setViewValue(e)):void s.$setViewValue(l.html())})},100)}),a.$on("execCommand",function(e,t){var n,o=c.selection,i=t.command,r=t.options;o?(n=o.createRange(),c.execCommand(i,!1,r),n.collapse(!1),n.select()):c.execCommand(i,!1,r),c.body.focus(),a.$evalAsync(function(){s.$setViewValue(l.html()),u()})}),a.$watch("autoexpand",u),a.$watch("content",function(){u()})}}}]),angular.module("Sexlog").filter("nl2br",function(){return function(e){return e?e.replace(new RegExp("\r?\n","g"),"<br />").replace(/(<br\s*\/?>){3,}/gi,"<br />"):""}}),angular.module("Sexlog").factory("$notificationWorkflow",["$http","$url",function(a,s){var e={create:function(e,t,n,o){var i,r=s.baseAccounts("sl/workflow-notification");e&&(i={login:t,type:e,qtd:n,ajax:1,account:o},a.post(r,i))}};return e}]),function(o){o.module("Sexlog").factory("NotificationModel",["BaseModel","$url",function(e,t){var n=+new Date;return new e("notification",{friendRequests:{method:"GET",url:t.api("notification/friend-requests")},accept:{method:"POST",url:t.api("notification/friend-requests/accept")},reject:{method:"POST",url:t.api("notification/friend-requests/reject")},messages:{method:"GET",isArray:!0,url:t.api("notification/messages"),transformResponse:function(e){return e?o.fromJson(e):[]}},setClicked:{method:"POST",url:t.api("notification/metrification/set-clicked/:idNotification/")},generalRequests:{method:"GET",isArray:!0,url:t.api("notification/general-requests?unique="+n),transformResponse:function(e){return e?o.fromJson(e):[]}},remove:{method:"POST",url:t.api("notification/general-requests/delete")},removeFriendshipRequest:{method:"POST",url:t.base("panel/friends/requests/delete/S/:accountid"),params:{accountid:"@accountid"}},SaveReceivingEmail:{method:"POST",url:t.api("my-account/save-receiving-email")}},{idNotification:"@idNotification"})}])}(angular),angular.module("Sexlog").directive("slNotificationsBackdrop",function(){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(e,t,n,o){e.slNotifications=o,e.closeBackdrop=function(){o.closeNotifications()}}}}),angular.module("Sexlog").directive("slNotificationsFriends",["NotificationModel","$checkUpdates","$window",function(i,r,e){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(o,e,t,n){o.slNotifications=n,o.open=function(){o.friends=[],o.stop=!1,o.data={},n.friendsOpened||o.load(),o.slNotifications.openNotifications("friends"),r.clear("friends")},o.load=function(n){o.busy||o.stop||(o.noData=!1,o.busy=!0,i.friendRequests(o.data,function(e){var t=e.requests||[];o.friends=o.friends.concat(t),o.busy=!1,o.noData=!o.friends.length,o.showMore=10<=t.length,o.privacySettingsClose=e.privacySettingsClose||null,o.stop=t.length<10,o.friends.length&&(o.data.friendId=o.friends[o.friends.length-1].friendid,o.data.notificationTimestamp=o.friends[o.friends.length-1].dtnotification),n&&n(t)}))},o.more=function(){o.showMore=!1,o.load(function(e){e.length||(o.noData=!0)})},o.handleFriendRequests=function(e,t,n){e.preventDefault(),t.remove=!0,setTimeout(function(){o.friends.splice(o.friends.indexOf(t),1),o.noData=!o.friends.length,o.$apply()},250),i[n]({requestId:t.accountid})},o.close=function(){o.slNotifications.openNotifications("friends")}}}}]),function(e){e.module("Sexlog").directive("slNotificationsMessages",["NotificationModel","$checkUpdates","$window","$injector",function(r,a,e,s){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(o,e,t,n){var i=null;o.slNotifications=n,o.open=function(){o.messages=[],o.stop=!1,o.data={},n.messagesOpened||o.load(),o.slNotifications.openNotifications("messages"),a.clear("scraps")},o.load=function(t){o.busy||o.stop||(o.noData=!1,o.busy=!0,r.messages(o.data,function(e){o.messages=o.messages.concat(e),o.messages=o.removeDuplicatesByLogin(o.messages),o.busy=!1,o.noData=!o.messages.length,o.showMore=0<e.length,o.stop=0===e.length,o.messages.length&&(o.data.messageId=o.messages[o.messages.length-1].contentid),t&&t(e)}))},o.removeDuplicatesByLogin=function(e){return e.reduce(function(e,t){return e.some(function(e){return e.loginfrom===t.loginfrom})||e.push(t),e},[])},o.more=function(){o.showMore=!1,o.load(function(e){e.length||(o.noData=!0)})},o.close=function(){o.slNotifications.openNotifications("messages")},o.select=function(e,t){if(!i)try{i=s.get("$messageList")}catch(e){i=null}o.close();var n=i?i.getItemByLogin(t.loginfrom):null;if(!n)return!0;i.selectAndUpdate(n),e.preventDefault()},o.getClass=function(e){return{new:!e.read,"call-attention":1===e.callattentiontype,"call-attention-premium":2===e.callattentiontype}}}}}])}(angular,jQuery),function(b){b.module("Sexlog").directive("slNotificationsNotifications",["NotificationModel","$checkUpdates","$token","$compile","$window","$slLazyLoad","$profileEditModal","$subscribe","$modalLoading","$firebaseMessaging","FirebaseMessagingModel","FIREBASE_MESSAGING_TYPES","$googleAnalytics","$slMetrics",function(r,n,c,a,u,s,d,f,m,o,p,g,h,v){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(i,l,e,t){i.slNotifications=t,i.showPushNotification=!!e.showpush,i.open=function(){i.pagination=1,i.notifications=[],i.stop=!1,i.data={},i.showPushNotificationTipText=!1,t.notificationsOpened||i.load(),i.slNotifications.openNotifications("notifications"),n.clear("general")},i.load=function(t){i.busy||i.stop||(i.noData=!1,i.busy=!0,r.generalRequests(i.data,function(e){i.notifications=i.notifications.concat(e).reduce(function(e,t){return e.some(function(e){return e.notificationid===t.notificationid})||e.push(t),e},[]),i.busy=!1,i.noData=!i.notifications.length,i.showMore=10<=e.length,i.stop=e.length<10,i.notifications.length&&(i.data.pagination=i.pagination++),t&&t(e)}))},i.more=function(){i.showMore=!1,i.load(function(e){e.length||(i.noData=!0)})},i.notificationLink=function(e,t){return t.url||""},i.isTargetBlank=function(e,t){return"t"===t.target_blank},i.notificationClick=function(n,o){var e=o.notificationid;r.setClicked({idNotification:e},function(){var e;if(o.url||n.preventDefault(),"1"===o.typecontent&&fJs_OpenModalMP(o.promotion_title,"1,2,3,4"),"CENSO"===o.typecontent&&(n.preventDefault(),window.open(o.url)),"videoModal"===o.typecontent&&(e=(e='<promote-video video="{videoModalUrl}" title="{title}" template="{template}" link-more="{link}"></promote-video>').replace("{title}",o.promotion_title).replace("{template}",Sexlog.baseUrl("promote/get-template-video-modal")).replace("{videoModalUrl}",o.videoModalUrl).replace("{link}",o.link?o.link:""),b.element("body").append(a(e)(i))),"tokenModal"===o.typecontent&&c.modal(),"invoiceModal"===o.typecontent){var t={params:{action:"NOTIFICATION",payment:"invoice",planIdLastTransaction:o.contentid,preventOneBuy:!0}};if(o.plantoken)return void c.modal(t);f.modal(t)}return"TESTIMONIAL"===o.typecontent&&s.openTestimonialModal(),"PROFILE_EDIT"===o.typecontent&&d.modal({tab:"info"}),"CERTIFICATION_MODAL"===o.typecontent?(m.create(),s.openCertificationModalIntro({origin:5})):"CERTIFICATION_MODAL_RECOVERING"===o.typecontent?(m.create(),s.openCertificationModalIntro({origin:6})):"invoice2via"===o.typecontent?s.openBilletModal(o.transactionid):void("datingFlowModal"===o.typecontent&&s.openMeetingModal(o.accountIdPartner,"notification"))})},i.remove=function(e,t){t.preventDefault(),e.remove=!0,setTimeout(function(){i.notifications.splice(i.notifications.indexOf(e),1),i.noData=!i.notifications.length,i.$apply()},250),r.remove({notificationid:e.notificationid})},i.subscribe=function(e,t,n,o){e.preventDefault();var i=$(l).attr("sTitle"),r=$(l).attr("sSubTitle"),a=t,s=n;if(null!=i&&null!=i||(i=""),null!=r&&null!=r||(r=""),null!=a&&null!=a||(a=""),null!=s&&null!=s||(s=0),o)return 1==s&&h.trackEvent("Notification",a,"Comprar Tokens"),"MODAL_SUBSCRIBER_LIMIT"==a&&h.trackEvent("Monitor_Evento","Abriu Modal Token",document.location.pathname.toString()),void c.modal({params:{action:"NOTIFICATION-TOKEN-"+t},onSuccess:function(){$timeout(function(){u.location.reload()},2e3)}});1==s&&h.trackEvent("Notification",a,"Quero Assinar"),"MODAL_SUBSCRIBER_LIMIT"==a&&h.trackEvent("Monitor_Evento","Abriu Modal Assinatura",document.location.pathname.toString());f.modal({params:{action:"NOTIFICATION"}})},i.close=function(){i.slNotifications.openNotifications("notifications")},i.toggle=function(){i.slNotifications.closeNotifications("notifications")},i.showText=function(e){return["0","1","CENSO","videoModal","tokenModal","invoiceModal","TESTIMONIAL","PROFILE_EDIT","PREMIUM","CERTIFICATION_MODAL","CERTIFICATION_MODAL_RECOVERING","invoice2via","datingFlowModal","EMAIL_MARKETING_OPTIN","EMAIL_OPTIN_RECOMMENDATIONS","EMAIL_OPTIN_INTERACTIONS"].includes(e.typecontent)},i.showSexlogLogo=function(e){if(e.webpush)return!1;return["0","CENSO","videoModal","tokenModal","invoiceModal","TESTIMONIAL","PROFILE_EDIT","CERTIFICATION_MODAL","CERTIFICATION_MODAL_RECOVERING","invoice2via","datingFlowModal","EMAIL_MARKETING_OPTIN"].includes(e.typecontent)},i.showPremiumLogo=function(e){return!e.webpush&&"PREMIUM"===e.typecontent},i.showAvatar=function(e){if(e.webpush)return!1;return-1===["0","1","CENSO","videoModal","tokenModal","invoiceModal","TESTIMONIAL","PROFILE_EDIT","PREMIUM","CERTIFICATION_MODAL","CERTIFICATION_MODAL_RECOVERING","invoice2via","datingFlowModal","EMAIL_MARKETING_OPTIN","EMAIL_OPTIN_RECOMMENDATIONS"].indexOf(e.typecontent)},i.getClassNotification=function(e){return{fade:e.remove,new:!e.read}},i.showPushNotificationTip=function(){i.showPushNotificationTipText=!0,p.setPushNotificationState({state:g.PUSH_STATE_NOTIFICATION_CLOSED})},i.enablePushNotification=function(){o.optIn().then(function(){i.removeWebPush()})},i.removeWebPush=function(){i.showPushNotification=!1},i.closeClick=function(){i.showPushNotificationTipText?i.removeWebPush():i.showPushNotificationTip()},i.buttonAction=function(t,n){t.preventDefault(),"EMAIL_MARKETING_OPTIN"===n.typecontent&&r.SaveReceivingEmail({emailsys:!0,emailnews:!0,emailoffers:!0,emailothers:!0}).$promise.then(function(e){return i.remove(n,t)}),"EMAIL_OPTIN_RECOMMENDATIONS"===n.typecontent&&r.SaveReceivingEmail({recommendations:!0}).$promise.then(function(e){return i.remove(n,t)}),"EMAIL_OPTIN_INTERACTIONS"===n.typecontent&&(v.save("INTERACTIONS_EMAIL_TRIGGER_NOTIFICATION_CLICK"),r.SaveReceivingEmail({profileinteractions:!0}).$promise.then(function(e){return i.remove(n,t)}))}}}}])}(angular),angular.module("Sexlog").directive("slNotificationsTokens",function(){return{restrict:"A",scope:!0,require:"^slNotifications",link:function(e,t,n,o){e.slNotifications=o}}}),function(e,n){e.module("Sexlog").directive("slNotifications",["$clickOutside","$detection","$screen","$browser","$legacy",function(l,e,c,t,u){return{scope:!0,restrict:"A",controller:["$scope",function(o){var i=n("#mainMessenger"),r=n(".navbar-search"),a=n(".notification-center__top"),s=this;s.friendsOpened=!1,s.messagesOpened=!1,s.notificationsOpened=!1,s.openNotifications=function(e){var t=s[e+"Opened"];s.closeNotifications();var n=s[e+"Opened"]=!t;n?(l.bind(function(){s.closeNotifications(),s.unblockScroll(),i.removeClass("close"),r.removeClass("dropbox-opened"),o.$digest()}),i.addClass("close"),r.addClass("dropbox-opened")):(l.unbind(),i.removeClass("close"),r.removeClass("dropbox-opened")),a.length||s.blockScroll(n),o.$on("$screenChange",function(){s.blockScroll(n)})},s.stopPropagation=function(e){e.stopPropagation()},s.closeNotifications=function(){s.friendsOpened=!1,s.messagesOpened=!1,s.notificationsOpened=!1},s.blockScroll=function(e){var t=u.isLegacy(),n=c.isPortrait(),o=c.size;(s.friendsOpened||s.messagesOpened||s.notificationsOpened)&&e&&("xs"===o||"sm"===o&&n)?(c.blockScroll(),t&&c.fixSize()):s.unblockScroll()},s.unblockScroll=function(){var e=u.isLegacy();c.unblockScroll(),e&&c.unfixSize()}}]}}]),n(".dropdown > a").click(function(e){e.preventDefault()})}(angular,jQuery),angular.module("Sexlog").directive("numericOnly",function(){return{require:"ngModel",link:function(n,e,t,o){e.attr("pattern","[0-9]+"),n.tokenStep=100,o.$parsers.push(function(e){if("number"==typeof e)return n.tokenStep=e%100?"any":100,e;var t=e?e.replace(/[^\d.-]/g,""):null;return t!==e&&(o.$setViewValue(t),o.$render()),t})}}}),angular.module("Sexlog").directive("slOnBoarding",function(){return{templateUrl:"assets/js/sl/angular/_common/on-boarding/directives/on-boarding.html",restrict:"EA",replace:!0,scope:{title:"@",description:"@",class:"@",primaryText:"@",primaryAction:"&",secondaryText:"@",secondaryAction:"&",closeAction:"&",mtKeyClose:"@",mtKeyPrimaryAction:"@",mtKeySecondaryAction:"@",show:"=",placement:"@"},link:function(t,e){e.context.parentElement.style.position="relative";var n="placement-"+(t.placement?t.placement:"bottom");t.getClass=function(){var e={};return e[t.class]=t.class,e.show=t.show,e[n]=!0,e},t.close=function(){t.show=!1}}}}),angular.module("Sexlog").controller("OnboardingStepsController",["$scope","$profileEditModal","$onboarding","$featured","$share","$url","OnboardingStepsModel","LocalStorage","LOCAL_STORAGE",function(t,e,n,o,i,r,a,s,l){var c=new s(l.ADAPTERS.SESSION);t.openProfileEditModal=function(){t.close(),e.modal()},t.openShareModal=function(){t.close(),i.modal()},t.openFeaturedModal=function(e){if(t.close(),!n.explorer)return r.redirect(e+"#featured");o.openModal({windowsClass:"tokens-free",onboarding:!0})},t.openStepWelcome=function(){n.openStep({action:"onboarding-step-welcome"})},t.saveStepWelcome=function(){t.closeAll(),a.saveFirstStep().$promise.then(function(e){n.openStep(e),n.openNotification(e)})},t.close=function(){n.close()},t.closeAll=function(){n.closeAll()},t.getNextStep=function(){t.close(),n.closeNotification(),a.getNextStep().$promise.then(function(e){n.openStep(e),n.openNotification(e)})},t.reload=function(){r.reload()},t.getImageStyle=function(){return{"background-image":"url("+t.lastImage+")"}},c.get("last-image").then(function(e){t.lastImage=e})}]),function(s){s.module("Sexlog").directive("slOnboardingNotificationLauncher",["$onboarding","LocalStorage","LOCAL_STORAGE",function(i,r,a){return{restrict:"A",link:function(e,t,n){var o=n.slOnboardingNotificationLauncher;new r(a.ADAPTERS.SESSION).get("onboarding-closed").catch(function(){return i.openNotification(s.fromJson(o),!0)})}}}])}(angular),function(e){var c="active";e.module("Sexlog").directive("slOnboardingNotification",["$q","OnboardingStepsModel","LocalStorage",function(a,s,l){return{restrict:"A",controller:"OnboardingStepsController",link:function(e,n){var o=new l,t=n.find(".action-close"),i=n.find(".action-delete");function r(){var t=a.defer();return o.get("onboarding").then(function(e){2<=e.closeCount&&i.css("display","flex"),t.resolve()}),t.promise}n.on("click",function(){n.addClass(c)}),t.on("click",function(e){var t;e.stopPropagation(),n.removeClass(c),t=a.defer(),o.get("onboarding").then(function(e){++e.closeCount,o.set("onboarding",e),t.resolve()}).catch(function(){o.set("onboarding",{closeCount:1}),t.resolve()}),t.promise.then(function(){r()})}),i.on("click",function(){s.closeFloatBanner(),n.remove()}),setTimeout(function(){n.addClass("visible")},1e3),setTimeout(function(){n.addClass(c)},6e3),r()}}}])}(angular),function(r){r.module("Sexlog").directive("slOnboardingStepsLauncher",["$onboarding",function(i){return{restrict:"A",link:function(e,t,n){var o=n.slOnboardingStepsLauncher;i.openStep(r.fromJson(o),!0)}}}])}(angular),angular.module("Sexlog").factory("OnboardingStepsModel",["BaseModel","$url",function(e,t){return new e("onboardingSteps",{getSteps:{method:"GET",url:t.api("onboarding/getSteps"),requireExperiment:!0,isArray:!0},saveVideo:{method:"POST",url:t.api("onboarding/saveVideo"),requireExperiment:!0},getNextStep:{method:"GET",url:t.api("onboarding/getNextStep"),requireExperiment:!0},saveStep:{method:"POST",url:t.api("onboarding/saveStep"),requireExperiment:!0},closeFloatBanner:{method:"POST",url:t.api("onboarding/closeFloatBanner"),requireExperiment:!0},saveFirstStep:{method:"POST",url:t.api("onboarding/saveFirstStep"),requireExperiment:!0}})}]),function(n){var c=n.element("body");n.module("Sexlog").factory("$onboarding",["$url","$modal","$experiment","$templateRequest","$compile","$rootScope","OnboardingStepsModel",function(i,r,e,o,a,s,t){var l={active:!1,explorer:!1,steps:[],openStep:function(e,t){var n=t?e.actionSuccess:e.action,o={templateUrl:i.templateKey("onboarding/template",n),controller:"OnboardingStepsController",windowClass:"sl-modal sl-flex-modal sl-onboarding-modal",backdrop:"static",resolve:{step:function(){return e}}};return l.modalInstance=r.open(o),(l.modalInstance.success=t)&&l.saveStep(e),l.modalInstance},openNotification:function(e){var t="service/onboarding/template?templateKey="+e.action+"-notification",n=s.$new(!0);o(t,{},!0).then(function(e){c.append(a(e)(n))})},close:function(){if(l.modalInstance)return l.modalInstance.close()},closeAll:function(){l.close(),l.closeNotification(),l.modalInstance.success&&t.getNextStep().$promise.then(function(e){l.openNotification(e)})},closeNotification:function(){n.element(".onboarding-steps-float").remove()},saveStep:function(e){t.saveStep({step:e})},getSteps:function(){e.is("onboarding_2",["b","c"])&&t.getSteps().$promise.then(function(e){l.steps=e})}};return l}])}(angular),angular.module("Sexlog").directive("onlyNumbersMask",function(){return{restrict:"A",link:function(e,t){t.on("input",function(){t[0].value=t[0].value.replace(/[^0-9]/g,"")})}}}),function(i){i.module("Sexlog").filter("orderByObject",function(){return function(e,n,t){var o=[];return i.forEach(e,function(e){o.push(e)}),o.sort(function(e,t){return e[n]>t[n]?1:-1}),t&&o.reverse(),o}})}(angular),angular.module("Sexlog").factory("$os",["$window",function(e){var t,n=e.navigator.platform,o={mac:"Mac",windows:"Win",linux:"Linux"};for(var i in o)-1!==n.indexOf(o[i])&&(o[i]=!0,t=i);return{name:t,isMac:function(){return!0===o.mac},isWindows:function(){return!0===o.windows},isLinux:function(){return!0===o.linux}}}]),function(c){c.module("Sexlog").provider("Pager",function(){var r={page:0,take:10,pages:0,total:0,end:!1,loading:!1};"page take".split(" ").forEach(c.proxy(function(n){var e;this["set"+(e=n.replace(/([A-Z])/g,"$1")).charAt(0).toUpperCase()+e.slice(1)]=function(e){var t;t=e,r[n]=t}},this)),this.setDefaults=function(e){r=c.extend(r,e)},this.$get=["$q",function(i){return function(o,e){var a={},s=c.extend(c.copy(r),e),t=[];function l(){s.loading=!1,a.$dirty=!0,a.$pristine=!1}return"page take".split(" ").forEach(function(t){a[t]=function(e){return function(e,t){if(c.isUndefined(t))return s[e];return s[e]=t}(t,e)}}),a.total=function(){return s.total},a.pages=function(){return s.pages},a.getPageFromIndex=function(e){return Math.floor(e/a.take())+1},a.score=function(){return s.score},a.next=function(){return s.page>s.pages&&s.pages?s.pages:++s.page},a.prev=function(){return s.page<=0?0:--s.page},a.hasMorePages=function(){return 0<s.pages&&s.page<s.pages},a.isLoading=function(){return s.loading},a.shouldPaginate=function(){return!a.isLoading()&&!(!a.hasMorePages()&&a.$dirty)},a.endOfPagination=function(){return s.end},a.clear=function(){s.page=0,s.take=10,s.pages=0,s.total="",s.score=0,s.end=!1,s.loading=!1},a.history=function(){return t},a.lastHistory=function(){if(t.length)return t[t.length-1]},a.paginate=function(e){if(c.isFunction(o))return e=c.extend(e||{},{$$pager:s}),t.push({params:e,options:s}),s.loading=!0,a.process(e)},a.process=function(e){var t,r=i.defer(),n=o.call({},e);if(t=n,c.isUndefined(t.$promise)&&!c.isFunction(t.then))throw new Error("Uma promise nÃ£o foi encontrada no resultado dos dados.");return i.when(n.$promise||n).then(function(e){var t,n,o,i=e[e.length-1];c.isObject(i)&&(t=i.total,n=i.pages,o=i.score,s.end=i.noContent,c.isString(o)&&(s.score=parseFloat(o)),c.isString(t)&&(s.total=t),c.isString(n)&&(s.pages=parseInt(n)),e.pop()),s.end||a.next(),l(),r.resolve(e)},function(e){r.reject(e),l()}),r.promise},a.$pristine=!0,a.$dirty=!1,a}}]})}(angular),angular.module("Sexlog").controller("PersonasController",["$scope","$personas",function(t,e){t.init=function(){t.initLoading=!0,e.getQuiz().$promise.then(function(e){t.quiz=e,t.initLoading=!1})},t.selectQuestion=function(e){t.selectedQuestion=e},t.isSelected=function(e){return t.selectedQuestion&&t.selectedQuestion.quizoptionid===e.quizoptionid},t.closeModal=function(){e.closeModal()},t.closeQuiz=function(){e.closeQuiz().$promise.then(function(){t.closeModal()})},t.saveQuiz=function(){t.loading=!0,e.saveQuiz(t.selectedQuestion).$promise.then(function(){t.loadTemplate()})},t.disableSave=function(){return t.loading||!t.selectedQuestion}}]),angular.module("Sexlog").directive("slPersonasReady",["$personas",function(i){return{restrict:"A",link:function(e,t,n){var o={quizName:n.slPersonasReady};i.modal(o)}}}]),angular.module("Sexlog").directive("slPersonas",["$compile","$templateRequest",function(o,e){return{restrict:"A",link:function(t,n){t.loadTemplate=function(){e("service/template/modal/modal-personas/modal-personas-success",{},!0).then(function(e){n.empty().append(o(e)(t))})}}}}]),angular.module("Sexlog").factory("QuizModel",["BaseModel","$url",function(e,t){return new e("message",{getQuiz:{method:"POST",url:t.api("quiz/get")},saveQuiz:{method:"POST",url:t.api("quiz/set")},closeQuiz:{method:"POST",url:t.api("quiz/close")}})}]),function(s){s.module("Sexlog").factory("$personas",["$url","$modal","QuizModel",function(n,o,t){var i,r,a={modal:function(e){i=(e=e||{}).quizName;var t=s.extend(e,{templateUrl:n.api("template/modal/modal-personas"),windowClass:"sl-modal sl-personas",controller:"PersonasController",backdrop:"static",keyboard:!1});return a.modalInstance=o.open(t),a.modalInstance},closeModal:function(){a.modalInstance.close()},getQuiz:function(){return r=t.getQuiz({quizname:i})},saveQuiz:function(e){return e.quizvariationid=r.quizvariationid,t.saveQuiz(e)},closeQuiz:function(){return t.closeQuiz({quizid:r.quizid})}};return a}])}(angular),angular.module("Sexlog").component("placeLoadingComponent",{bindings:{photoOnly:"<",roundOnly:"<",numberElements:"<",dark:"<"},templateUrl:"template/assets/js/sl/angular/_common/place-loading/components/place-loading.html",controller:function(){this.$onInit=function(){this.numberElements||(this.numberElements=[0,1,2,3,4])},this.selectClass=function(){return{"card__placeloading-round-only":this.roundOnly,"card__placeloading-photo-only":this.photoOnly}},this.selectClassColor=function(){return{" background--dark ":this.dark," ":!0}}}}),jQuery,angular.module("Sexlog").directive("placeholder",["$timeout","$browser",function(t,r){function a(e,t){""===e.val()&&e.val(t).addClass("placeholder")}return{restrict:"A",link:function(n,o,e){var i=e.placeholder;r.ie()&&r.version<10&&(o.on("focus",function(){var e,t;t=i,(e=o).val()===t&&e.val("").removeClass("placeholder"),n.$apply()}),o.on("blur",function(){a(o,i),n.$apply()}),t(function(){a(o,i)}))}}}]),function(d,f,m){d.module("Sexlog").directive("slPopover",[function(){return{scope:!0,restrict:"A",link:function(e,t,n){var o=d.element(t),i=n.tmplClass,r=n.eventShow,a=n.eventHide,s=n.timeout?+n.timeout:4e3;function l(){var e="."+n.elemTarget;return m(e).parents(".in")}function c(e){var t=e.length;1===t?e.removeClass("in"):1<t&&e.forEach(function(e){m(e).removeClass("in")})}function u(e){e&&3===e.which||t.hasClass("in")&&t.removeClass("in")}window.timeOutLeft=0,o.on(r,function(e){e.preventDefault(),window.timeOutLeft&&clearTimeout(window.timeOutLeft),t.hasClass("in")?a||(t.removeClass("in"),d.element(f).off("click.popover.backdrop")):(c(l()),t.addClass("in"),d.element(f).on("click.popover.backdrop",u).on("click.popover.backdrop","."+n.elemTarget+", ."+i,function(e){e.stopPropagation()}))}),o.on(a,function(){window.timeOutLeft&&clearTimeout(window.timeOutLeft),window.timeOutLeft=setTimeout(function(){c(l())},s)})}}}])}(angular,document,jQuery),angular,angular.module("Sexlog").constant("METRIC_PREMIUM",{CTA:{MYACCOUNT:"MYACCOUNT-SUBSCRIBE",SIDEBAR:"SIDEBAR_PREMIUM",HEADER_REFACTORED_MOBILE:"PREMIUM_NEW_NAVBAR_MOBILE",HEADER_REFACTORED_DESKTOP:"PREMIUM_NEW_NAVBAR_DESKTOP",PROFILE_SUBSCRIBE_MOBILE:"SUBSCRIBE_CLICK_PROFILE_MOBILE",PROFILE_PREMIUM_MOBILE:"PREMIUM_CLICK_PROFILE_MOBILE"}}),angular.module("Sexlog").factory("$metricPremium",["$http","$url",function(n,e){var t={},o=e.api("premium/save-action");return t.saveAction=function(e){if(e){var t={action:e};return n.post(o,t)}},t}]),function(l){l.module("Sexlog").directive("slPreventScroll",function(){return{restrict:"A",link:function(e,t){function s(e){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1}t.on("DOMMouseScroll mousewheel",function(e){var t=l.element(this),n=this.scrollTop,o=this.scrollHeight,i=t.outerHeight(),r="DOMMouseScroll"===e.type?-40*e.originalEvent.detail:e.originalEvent.wheelDelta,a=0<r;if(i<o){if(!a&&o-i-n<-r)return t.scrollTop(o),s(e);if(a&&n<r)return t.scrollTop(0),s(e)}})}}})}(angular),function(l){l.module("Sexlog").controller("PostPrivacyController",["$scope","$privacy","$subscribe","$auth","$friendList","langs","PrivacyModel",function(i,r,t,e,n,o,a){function s(){var e=[];l.element(".sl-privacy .active div").each(function(){e.push(l.element(this).find(".title")[0].innerHTML)}),r.setLists(i.selected),r.setListsName(e)}i.page=0,i.selected=r.getLists().slice(0),i.moreItens=!1,i.lists={common:[],user:[]},i.paginate=function(){a.getLists({page:i.page}).$promise.then(function(e){void 0!==e.common&&0<e.common.length&&(i.lists.common=e.common),void 0!==e.user&&0<e.user.length&&(i.lists.user=i.lists.user.concat(e.user));var t=i.page?10:9;i.moreItens=!0,i.moreItens=e.user.length>=t,i.page++})},i.select=function(e){var t=-1!==i.selected.indexOf(e),n=e===r.ID_LIST_PUBLIC,o=i.selected.indexOf(r.ID_LIST_PUBLIC);n?i.selected=[r.ID_LIST_PUBLIC]:t?(i.selected.splice(i.selected.indexOf(e),1),i.selected.length||(i.selected=[r.ID_LIST_PUBLIC])):(i.selected.push(e),-1!==(o=i.selected.indexOf(r.ID_LIST_PUBLIC))&&i.selected.splice(o,1))},i.isSelected=function(e){return-1!==i.selected.indexOf(e)},i.returnModal=function(){e.revalidateSubscription().then(function(){s(),r.closeModal()},function(){var e;s(),r.isPublic()?r.closeModal():(r.clean(),e={subtitle:o.privacyErrorSubscribertopostwithprivacy,params:{action:"UPLOAD_WITH_PRIVACY"}},t.modal(e))})},i.create=function(){n.onSave=function(e){var t={listid:e.query.listid,listname:e.name,total:e.listSelected.length};i.lists.user.unshift(t),i.selected=[t.listid],e.close()},n.modal(!0)},i.close=function(){r.closeModal(),i.selected=[]}}])}(angular,window),angular.module("Sexlog").factory("PrivacyModel",["BaseModel","$url",function(e,t){return new e("privacy",{getLists:{method:"GET",url:t.api("privacy/lists")},langs:{method:"GET",url:t.api("privacy/langs")}})}]),function(l){l.module("Sexlog").factory("$privacy",["$url","$modal","PrivacyModel",function(t,n,o){var i={ID_LIST_PUBLIC:"public",modalInstance:null},r=[],a=[i.ID_LIST_PUBLIC],s={windowClass:"sl-modal sl-privacy",showBackButton:!0};return i.modal=function(){var e=l.extend(s,{templateUrl:t.api("privacy/template"),controller:"PostPrivacyController",resolve:{langs:function(){return o.langs().$promise.then(function(e){return e})}}});return i.modalInstance=n.open(e),i.modalInstance.selected=a,i.modalInstance},i.closeModal=function(){i.modalInstance.close()},i.setLists=function(e){a=e.length?e:[i.ID_LIST_PUBLIC]},i.getLists=function(){return a},i.setListsName=function(e){r=e},i.getListsName=function(){return r},i.set=function(e){var n,o;e&&(n=[],o=[],l.forEach(e,function(e,t){n.push(t),o.push(e)}),i.setLists(n),i.setListsName(o))},i.isPublic=function(){return a.length&&a[0]===i.ID_LIST_PUBLIC},i.clean=function(){a=[i.ID_LIST_PUBLIC],r=[]},i}])}(angular),angular.module("Sexlog").directive("slProfileBetaBannerClose",["$http","$url","$googleAnalytics",function(n,o,i){return{restrict:"A",link:function(e,t){t.one("click",function(){t.parent().remove(),i.trackEvent("Perfil","Fechar banner"),n.post(o.api("profile/beta/closeBanner"))})}}}]),angular.module("Sexlog").directive("slProfileBeta",["$http","$url","$googleAnalytics",function(i,r,a){return{restrict:"A",link:function(e,t,n){var o=n.slProfileBeta?n.slProfileBeta:"opt-in";t.one("click",function(){a.trackEvent("Perfil","Testar o novo perfil",o),i.post(r.api("profile/beta/"+o)).then(function(){r.reload()})})}}}]),angular.module("Sexlog").directive("slPerfilCommentsTokens",function(){return{restrict:"A",scope:{amountTokens:"=slPerfilCommentsTokens"},link:function(e,t){t.find(".form-comments-checkbox").on("change",function(){this.checked?(e.amountTokens<=100||!e.amountTokens)&&(e.amountTokens=100):e.amountTokens=null,e.$apply()})}}}),angular.module("Sexlog").directive("slProfileEditModalOpen",["$profileEditModal","$modalLoading",function(n,o){return{restrict:"A",link:function(e,t){t.on("click",function(e){if(!e.ctrlKey&&!e.metaKey)return e.preventDefault(),o.create(),n.modal(),!1})}}}]),angular.module("Sexlog").factory("$profileEditModal",["$webpage","$meta","$injector","$lang","$url","$ocLazyLoad","$modalLoading","$auth",function(i,r,e,n,t,a,o,s){var l=null,c=null,u={loadAssets:function(){var e=r.get("cdnassets"),t=r.get("minjs"),n=r.get("jsVersion"),o=["css/sl/app/profile/profile.css?v="+n,"js/sl/angular/modules/profile/profile"+t+".js?v="+n];return a.load(i.getAssetsToLoad(o,e))},modal:function(t){if(s.isLogged())return o.create(),u.loadAssets().then(function(){l=l||e.get("$profileEdit"),(c=c||e.get("ProfileEditModel")).langs().$promise.then(function(e){return n.add(e),l.openModal(t)})})}};return u}]),function(e,n){e.module("Sexlog").controller("GiftController",["$scope","$rootScope",function(e,t){e.modalPreGiftAvatar=t.modalPreGiftAvatar,e.modalPreGiftAvatarOwner=t.modalPreGiftAvatarOwner,e.gift=function(){n.Gift("GIFT-MODAL-PRE-PRESENT"),e.$close()}}])}(angular,window),function(e,c){e.module("Sexlog").directive("slProfileGift",["$timeout","$modal","$modalLoading","$url",function(r,a,s,l){return{restrict:"A",link:function(t,e,n){t.enableOnboarding=!1,t.modalPreGift=n.modalPreGift,t.modalPreGiftAvatar=n.modalPreGiftAvatar,t.modalPreGiftAvatarOwner=n.modalPreGiftAvatarOwner,r(function(){t.enableOnboarding=!!n.giftOnboarding},2e3);var o={templateUrl:l.api("template/modal/modal-pre-gift"),windowClass:"sl-modal modal-gift",controller:"GiftController",keyboard:!1,backdrop:"static"},i=null;t.onboardingGift=function(){c.Gift("PROFILE-ONBOARDING-GIFT"),t.enableOnboarding=!1},t.openGift=function(e){e.preventDefault(),t.enableOnboarding=!1,t.modalPreGift?(s.create(),(i=a.open(o)).opened.then(function(){r(function(){i.elem.addClass("opened")},300)})):c.Gift()}}}}])}(angular,window),function(r){r.module("Sexlog").directive("promoteVideo",["$modal",function(t){return{restrict:"E",scope:{video:"@",title:"@",description:"@",template:"@",linkMore:"@",onClose:"&"},link:function(o){var e={modal:{templateUrl:o.template,windowClass:"sl-modal promote-video",keyboard:!0,backdrop:"static",size:"md",onClose:r.noop}},i=null,i=t.open(r.extend(e.modal,{controller:["$scope","$compile",function(e,t){var n=r.element('<div class="video-inline"></div>').attr("sl-video-inline",o.video);e.html=t(n)(o),e.link=o.linkMore,e.title=o.title,e.description=o.description,e.close=function(){i.close()}}]}))}}}])}(angular),angular.module("Sexlog").directive("slPromotionLegacy",["$url","$rootScope",function(e,t){return{restrict:"AC",replace:!1,templateUrl:e.api("account/promotion"),link:function(){t.$broadcast("promotionLegacyLoaded")}}}]),function(v){v.module("Sexlog").directive("slPromotion",["$account","$token","$window","$url","$screen","$cookies","$subscribe","$lang","$compile","$campaign","AccountModel","SubscribeModel",function(s,n,l,c,u,d,f,m,p,g,h,e){return{scope:!0,restrict:"C",controllerAs:"promotion",controller:["$scope","$element","$attrs",function(o,i,r){l=v.element(l),o.$screen=u,o.videoUrl=r.url;var a=this,e=v.element("body");function t(){if("xs"===u.size||"sm"===u.size&&u.isPortrait()){if(i.hasClass("active"))return void e.addClass("promotion-scroll-block");e.removeClass("promotion-scroll-block")}}a.isActive=function(){return i.hasClass("active")},a.toggle=function(){i.toggleClass("active"),g.autosize(i),t(),v.isDefined(r.hasCountdown)&&function(){if(d(r.action))return d.remove(r.action,{path:"/"});d(r.action,!0,{path:"/",expires:30})}()},a.close=function(){i.removeClass("active"),g.autosize(i)},a.subscribe=function(e,t){e.stopPropagation(),a.isActive()||a.close();var n={params:{action:r.action,payment:t}};i.data("auto-close")&&(n.onSuccess=function(){g.autosize(i,!0)}),s.modal(n)},a.token=function(e){e.stopPropagation(),a.close(),n.modal({params:{action:r.action},onSuccess:function(){c.reload()}})},a.expiry=function(e){f.modalOpened?g.autosize(i,!0):e?c.redirect(e):c.reload()},a.remove=function(e){e.stopPropagation(),g.autosize(i,!0),h.disablePromotion({code:r.code})},a.modalCombo=function(e){e.stopPropagation(),f.modal()},a.openVideo=function(e){e.stopPropagation();var t='<promote-video video="{videoModalUrl}" title="{title}" template="{template}"></promote-video>',n=window.Sexlog.baseUrl("promote/get-template-video-modal");o.templateView&&(n=c.customParams(n,{view:o.templateView})),t=t.replace("{title}",o.title).replace("{template}",n).replace("{videoModalUrl}",o.videoUrl),v.element("body").append(p(t)(o))},a.modalCurrentSubscribe=function(e,t,n){var o={params:{showverotel:!1,action:"END-SUBSCRIBE",payment:t,preventOneBuy:"credit"!==t&&!v.isUndefined(n)},onSuccess:function(){g.autosize(i,!0)}};e&&(o={title:m("subscribe_chooseNewPayment"),subtitle:m("notification_title_modal"),params:{showdebit:!1,showdebitonline:!1,showinvoice:!1,showverotel:!1,showTokens:!1,action:"FIX-SUBSCRIBE",preventOneBuy:!n}}),f.modal(o)},o.$on("$destroy",function(){l.off("resize.slPromotion orientationchange.slPromotion")}),o.$on("$screenChange",function(){g.autosize(i),t()}),l.load(function(){g.autosize(i)}),g.autosize(i)}]}}])}(angular,window),function(e,i){e.module("Sexlog").factory("$pushNotification",["$q",function(e){var o={hasSupport:function(){return"Notification"in i},isGranted:function(){if(o.hasSupport())return"granted"===i.Notification.permission},isDenied:function(){if(o.hasSupport())return"denied"===i.Notification.permission},isDefault:function(){if(o.hasSupport())return"default"===i.Notification.permission}};return o.requestPermission=function(){var t=e.defer();if(!o.hasSupport())return t.reject("Browser nÃ£o suportado"),t.promise;function n(e){switch(e){case"granted":t.resolve(e);break;case"denied":case"default":t.reject(e)}}return i.Notification.requestPermission()instanceof Promise?i.Notification.requestPermission().then(function(e){n(e)}):i.Notification.requestPermission(n),t.promise},o.show=function(e,t){o.hasSupport()&&o.requestPermission().then(function(){o.show=function(e){return new i.Notification(e,t)},o.show(e)})},o}])}(angular,window),function(o){o.module("Sexlog").filter("rangeSliderFilter",function(){return function(e,t,n){return e+(n=o.isDefined(n)?n:" ")+t}})}(angular),function(U){U.module("Sexlog").directive("rangeSlider",["$document","$filter","$log",function(S,$,y){function E(e){try{return[e.clientX||e.originalEvent.clientX||e.originalEvent.touches[0].clientX,e.clientY||e.originalEvent.clientY||e.originalEvent.touches[0].clientY]}catch(e){return["x","y"]}}function w(e){return e<0?0:100<e?100:e}function T(e){return!isNaN(parseFloat(e))&&isFinite(e)}var C=".rangeSlider",P=!1,_="horizontal",M=0,A=0,I=!0,x=!1,k=!1,e=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup",over:"pointerdown",out:"mouseout"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",over:"MSPointerDown",out:"mouseout"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend",over:"mouseover touchstart",out:"mouseout"},O=e.start+C,N=e.move+C,D=e.end+C,L=e.over+C,R=e.out+C;return{restrict:"A",replace:!0,template:['<div class="ngrs-range-slider">','<div class="ngrs-runner">','<div class="ngrs-handle ngrs-handle-min"><i></i></div>','<div class="ngrs-handle ngrs-handle-max"><i></i></div>','<div class="ngrs-join"></div>','<div class="ngrs-join background"></div>',"</div>",'<div class="ngrs-value-runner">','<div class="ngrs-value ngrs-value-min"><div>{{filteredModelMin}}</div></div>','<div class="ngrs-value ngrs-value-max"><div>{{filteredModelMax}}</div></div>',"</div>","</div>"].join(""),scope:{disabled:"=?",min:"=",max:"=",modelMin:"=?",modelMax:"=?",onHandleDown:"&",onHandleUp:"&",orientation:"@",step:"@",decimalPlaces:"@",filter:"@",filterOptions:"@",showValues:"@",pinHandle:"@",preventEqualMinMax:"@",attachHandleValues:"@"},link:function(f,e,t){function n(e){"min"===e?(U.element(c[0]).css("display","none"),U.element(c[1]).css("display","block")):"max"===e?(U.element(c[0]).css("display","block"),U.element(c[1]).css("display","none")):(U.element(c[0]).css("display","block"),U.element(c[1]).css("display","block"))}function o(e){e?m.addClass("ngrs-disabled"):m.removeClass("ngrs-disabled")}function i(){f.min>f.max&&s("min must be less than or equal to max"),U.isDefined(f.min)&&U.isDefined(f.max)&&(T(f.min)||s("min must be a number"),T(f.max)||s("max must be a number"),v=f.max-f.min,r())}function r(){var e,t,n,o;f.modelMin>f.modelMax&&(l("modelMin must be less than or equal to modelMax"),f.modelMin=f.modelMax),!U.isDefined(f.modelMin)&&"min"!==f.pinHandle||!U.isDefined(f.modelMax)&&"max"!==f.pinHandle||(T(f.modelMin)||("min"!==f.pinHandle&&l("modelMin must be a number"),f.modelMin=f.min),T(f.modelMax)||("max"!==f.pinHandle&&l("modelMax must be a number"),f.modelMax=f.max),e=w((f.modelMin-f.min)/v*100),t=w((f.modelMax-f.min)/v*100),f.attachHandleValues&&(n=e,o=t),f.modelMin=Math.max(f.min,f.modelMin),f.modelMax=Math.min(f.max,f.modelMax),f.filter?(f.filteredModelMin=$(f.filter)(f.modelMin,f.filterOptions),f.filteredModelMax=$(f.filter)(f.modelMax,f.filterOptions)):(f.filteredModelMin=f.modelMin,f.filteredModelMax=f.modelMax),f.min===f.max&&f.modelMin===f.modelMax?(U.element(c[0]).css(p,"0%"),U.element(c[1]).css(p,"100%"),f.attachHandleValues&&(U.element(".ngrs-value-runner").addClass("ngrs-attached-handles"),U.element(u[0]).css(p,"0%"),U.element(u[1]).css(p,"100%")),U.element(d).css(p,"0%").css(g,"0%")):(U.element(c[0]).css(p,e+"%"),U.element(c[1]).css(p,t+"%"),f.attachHandleValues&&(U.element(".ngrs-value-runner").addClass("ngrs-attached-handles"),U.element(u[0]).css(p,n+"%"),U.element(u[1]).css(p,o+"%"),U.element(u[1]).css(g,"auto")),U.element(d).css(p,e+"%").css(g,100-t+"%"),95<e&&U.element(c[0]).css("z-index",3)))}function a(u){var d=c[u];d.bind(O+"X",function(e){var t=(0===u?"ngrs-handle-min":"ngrs-handle-max")+"-down",a=((0===u?f.modelMin:f.modelMax)-f.min)/v*100,s=E(e),l=s,c=!1;U.isFunction(f.onHandleDown)&&f.onHandleDown(),U.element("body").bind("selectstart"+C,function(){return!1}),f.disabled||(b=!0,d.addClass("ngrs-down"),m.addClass("ngrs-focus "+t),U.element("body").addClass("ngrs-touching"),S.bind(N,function(e){var t,n,o=E(e),i=f.step/v*100,r=((0===u?f.modelMax:f.modelMin)-f.min)/v*100;"x"!==o[0]&&(o[0]-=s[0],o[1]-=s[1],t=[l[0]!==o[0],l[1]!==o[1]],n=a+100*o[h]/(h?m.height():m.width()),n=w(n),f.preventEqualMinMax&&(0===i&&(i=1/v*100),0===u?r-=i:1===u&&(r+=i)),0===u?n=r<n?r:n:1===u&&(n=n<r?r:n),0<f.step&&n<100&&0<n&&(n=Math.round(n/i)*i),95<n&&0===u?d.css("z-index",3):d.css("z-index",""),t[h]&&n!==c&&(0===u?f.modelMin=parseFloat(parseFloat(n*v/100+f.min).toFixed(f.decimalPlaces)):1===u&&(f.modelMax=parseFloat(parseFloat(n*v/100+f.min).toFixed(f.decimalPlaces))),f.$apply(),c=n),l=o)}).bind(D,function(){U.isFunction(f.onHandleUp)&&f.onHandleUp(),S.off(N),S.off(D),U.element("body").removeClass("ngrs-touching"),b=!1,d.removeClass("ngrs-down"),d.removeClass("ngrs-over"),m.removeClass("ngrs-focus "+t)}))}).on(L,function(){d.addClass("ngrs-over")}).on(R,function(){b||d.removeClass("ngrs-over")})}function s(e){throw f.disabled=!0,new Error("RangeSlider: "+e)}function l(e){y.warn(e)}var m=U.element(e),c=[e.find(".ngrs-handle-min"),e.find(".ngrs-handle-max")],u=[e.find(".ngrs-value-min"),e.find(".ngrs-value-max")],d=e.find(".ngrs-join:not(.background)"),p="left",g="right",h=0,v=0,b=!1;f.filteredModelMin=f.modelMin,f.filteredModelMax=f.modelMax,t.$observe("disabled",function(e){U.isDefined(e)||(f.disabled=P),f.$watch("disabled",o)}),t.$observe("orientation",function(e){U.isDefined(e)||(f.orientation=_);for(var t,n=f.orientation.split(" "),o=0,i=n.length;o<i;o++)n[o]="ngrs-"+n[o];t=n.join(" "),m.addClass(t),"vertical"!==f.orientation&&"vertical left"!==f.orientation&&"vertical right"!==f.orientation||(p="top",g="bottom",h=1)}),t.$observe("step",function(e){U.isDefined(e)||(f.step=M)}),t.$observe("decimalPlaces",function(e){U.isDefined(e)||(f.decimalPlaces=A)}),t.$observe("showValues",function(e){U.isDefined(e)?f.showValues="false"!==e:f.showValues=I}),t.$observe("pinHandle",function(e){U.isDefined(e)?f.pinHandle="min"===e||"max"===e?e:null:f.pinHandle=null,f.$watch("pinHandle",n)}),t.$observe("preventEqualMinMax",function(e){U.isDefined(e)?f.preventEqualMinMax="false"!==e:f.preventEqualMinMax=x}),t.$observe("attachHandleValues",function(e){U.isDefined(e)?f.attachHandleValues="false"!==e:f.attachHandleValues=k}),f.$watch("min",i),f.$watch("max",i),f.$watch("modelMin",r),f.$watch("modelMax",r),f.$on("$destroy",function(){m.off(C),U.element("body").off(C),S.off(C);for(var e=0,t=c.length;e<t;e++)c[e].off(C),c[e].off(C+"X")}),m.bind("selectstart"+C,function(){return!1}).bind("click",function(e){e.stopPropagation()}),a(0),a(1)}}}]),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(angular),angular.module("Sexlog").directive("reachedBottom",["$timeout","$subscribe",function(i,r){return{restrict:"A",scope:{},link:function(e,t){var n=t.closest(".modal"),o=n.find(".modal-dialog");n.length&&(i(function(){e.$broadcast("$screenChange")}),n.on("scroll",function(){if(r.hasPayment()&&r.hasSelectedPlan())return n.outerHeight()>n[0].scrollHeight-n.scrollTop()-50?t.addClass("hide"):t.removeClass("hide")}),e.$on("$screenChange",function(){t.css("width",o.width())}),e.$on("changeTab",function(){return n[0].scrollHeight===n.height()?t.addClass("hide"):t.removeClass("hide")}))}}}]),function(a){a.module("Sexlog").directive("recaptcha",["reCAPTCHA","$compile","$url",function(o,i,r){return{restrict:"A",require:"ngModel",templateUrl:"template/assets/js/sl/angular/_common/recaptcha/directives/recaptcha.html",replace:!0,scope:{ngModel:"=",langs:"="},link:function(t,e,n){t.clear=function(){t.ngModel={response:"",challenge:!1}},t.imgFolder=function(e){return r.base("assets/images/icons/gif/recaptcha/"+e)},o.create(e[0],n.key,function(){t.clear(),t.$watch(function(){return o.challenge()},function(e){t.ngModel.challenge=e}),i(a.element(document.querySelector("input#recaptcha_response_field")).attr("ng-model","ngModel.response"))(t),i(a.element(document.querySelector("a#recaptcha_reload_btn")).attr("ng-click","clear()"))(t)}),t.$on("$destroy",o.destroy)}}}])}(angular),angular.module("Sexlog").provider("reCAPTCHA",function(){var a={theme:"custom",custom_theme_widget:"recaptcha"},s=this;this.setPublicKey=function(e){0},this.setOptions=function(e){a=e},this._createScript=function(e,t){var n=e.createElement("script");n.type="text/javascript",n.async=!0,n.src="//www.google.com/recaptcha/api/js/recaptcha_ajax.js",n.onreadystatechange=function(){"complete"==this.readyState&&t()},n.onload=t,e.getElementsByTagName("body")[0].appendChild(n)},this.$get=["$q","$rootScope","$window","$document",function(e,t,o,i){var r=e.defer();return{create:function(e,t,n){return o.Recaptcha?r.resolve():s._createScript(i[0],r.resolve),a.callback=n,r.promise.then(function(){o.Recaptcha.create(t,e,a)})},response:function(){return o.Recaptcha.get_response()},challenge:function(){return o.Recaptcha.get_challenge()},reload:function(){return o.Recaptcha.reload()},destroy:function(){return o.Recaptcha.destroy()}}}]}),angular.module("Sexlog").filter("reverse",function(){return function(e){return e.slice().reverse()}}),angular.module("Sexlog").directive("slGui",["SlSafeService",function(n){return{restrict:"A",scope:{media:"=slGui"},link:function(e,t){e.media.encrypted&&n.createDecryptedImage(t,{src:e.media.thumb,width:e.media.cropWidth,height:e.media.cropHeight})}}}]),function(s){s.module("Sexlog").directive("slSafe",["$compile",function(a){return{restrict:"A",link:function(e,t,n){var o=n.copyright?'sl-copyright="'+n.copyright+'"':"",i=s.element('<div class="sl-safe-glass"'+o+"></div>");function r(){setTimeout(function(){var e=i.find(".sl-safe-watermark").get(0)||document.createElement("canvas");e.classList.add("sl-safe-watermark"),e.width=t.width(),e.height=t.height(),i.append(e),function(e,t){var n=e.getContext("2d");n.font="300 18px Arial",n.fillStyle="rgba(255, 255, 255, 0.1)";for(var o=Math.ceil(n.measureText(t).width),i=new Array(2*o).join(t),r=0;r<Math.ceil(e.height/50);r++)r%2&&n.fillText(i,-0*r,50*r),r%2||n.fillText(i,-(0*r+128),50*r)}(e,n.watermark)})}t.on("contextmenu",function(){return!1}).addClass("sl-safe"),i.insertAfter(t),a(i)(e),t.next(".sl-safe-glass").on("contextmenu",function(){return!1}),n.watermark&&("DIV"===t.prop("tagName")&&r(),"IMG"===t.prop("tagName")&&t.on("load",r),e.$on("safe:update-watermark",function(){t.updated||(r(),t.updated=!0)}))}}}])}(angular),function(d,i){var r="sl-safe-canvas",s="sl-safe-placeholder";d.module("Sexlog").factory("SlSafeService",["$compile",function(n){function a(e){var t=o(i.createElement("canvas"));return Object.assign(t,{width:e.width,height:e.height,className:e.className})}function u(e,t){var n=d.element(e).parent().find("."+r);return n.length?n[0]:n=a(Object.assign(t,{className:r}))}function o(e){return e}return{createDecryptedImage:function(i,r){return new Promise(function(t){var n=u(i,r),o=new Image;o.src=r.src,o.onload=function(){var e=n.getContext("2d");e.drawImage(o,r.width/2,r.height/2,r.width/2,r.height/2,0,0,r.width/2,r.height/2),e.drawImage(o,0,r.height/2,r.width/2,r.height/2,r.width/2,0,r.width/2,r.height/2),e.drawImage(o,r.width/2,0,r.width/2,r.height/2,0,r.height/2,r.width/2,r.height/2),e.drawImage(o,0,0,r.width/2,r.height/2,r.width/2,r.height/2,r.width/2,r.height/2),d.element("."+s).addClass(s+"--fade"),i.hide().parent().append(n),t()}})},createPlaceholder:function(i,r){return new Promise(function(t){var n=a(Object.assign(r,{className:s})),o=new Image;o.src=r.src,o.onload=function(){var e=n.getContext("2d");e.filter="blur(10px)",e.drawImage(o,0,0,r.width,r.height),i.hide().parent().append(n),t()}})},createWatermark:function(e,t,n){var o=u(t,n),i=o.getContext("2d");i.font="300 18px Arial",i.fillStyle="rgba(255, 255, 255, 0.1)";var r=e+"        ";d.isArray(e)&&(r=e.map(function(e){return e+"        "}).join(""));for(var a=Math.ceil(i.measureText(r).width),s=new Array(2*a).join(r),l=0;l<Math.ceil(o.height/50);l++){var c=l%2?0:128;i.fillText(s,-l*c,50*l)}t.parent().append(o)},protectFromCopy:function(e){var t=o(i.createElement("div"));t.className="sl-safe-glass",e.after(t)},showCopyright:function(e,t){t.attr("sl-copyright",e),n(t)(t.scope())}}}])}(angular,window.document),function(v,b,S,$){v.module("Sexlog").factory("$screen",["$timeout","$rootScope","$detection","$debounce",function(e,t,n,o){var i,r=v.element("body").append('<div class="screen-visibility"></div>').find(".screen-visibility"),a=$("html"),s=$("body"),l=$(S),c=$(b),u=!1,d="modal-open",f=n.isMobile(),m=f?"orientationchange.screen":"resize.screen",p=f?500:50,g=0;r.append('<div data-mode="xs" class="visible-xs"></div><div data-mode="sm" class="visible-sm"></div><div data-mode="md" class="visible-md"></div><div data-mode="lg" class="visible-lg"></div><div data-mode="xl" class="visible-xl"></div><div data-mode="hd" class="visible-hd"></div>'),i=r.find("div"),l.on(m,o(function(){h.update(),u&&h.fixSize()},p));var h={SIDEBAR_BREAKPOINT_MOBILE:992,SIDEBAR_BREAKPOINT_DESKTOP:1200,XS_WIDTH:480,SM_WIDTH:600,MD_WIDTH:992,LG_WIDTH:1200,HD_WIDTH:1415,FULL_HD_WIDTH:1920,size:"xs",calculatedSize:"xs",calculedSizeMatch:480,mode:"mobile",setSize:function(e){h.size=e},setMode:function(e){h.mode=e},equals:function(e){return!v.isUndefined(e)&&-1<e.indexOf(h.size)},isWideScreen:function(){return"xl"===h.size||"hd"===h.size},isLargeScreen:function(){return"md"===h.size||"lg"===h.size},isMediumScreen:function(){return"md"===h.size},isSmallScreen:function(){return"sm"===h.size||"xs"===h.size},isExtraSmallScreen:function(){return"xs"===h.size},isWide:function(){return"wide"===h.mode},isMobile:function(){return"mobile"===h.mode},isDesktop:function(){return"desktop"===h.mode||"wide"===h.mode},orientation:function(){return S.orientation||S.screen&&S.screen.orientation||S.screen.orientation&&S.screen.orientation.angle||0},isPortrait:function(){return 0===h.orientation()||180===h.orientation()},isLandscape:function(){return 90===h.orientation()||-90===h.orientation()},width:function(){return l.outerWidth()},innerWidth:function(){return S.innerWidth},height:function(e){var t=l.height();return e?t-v.element(".nav").outerHeight():t},update:function(){v.forEach(i,function(e){if((n=e)&&!n.style.display.toString().match(/none/i)&&n.offsetWidth){var t=e.getAttribute("data-mode");switch(h.setSize(t),t){case"sm":case"xs":h.setMode("mobile");break;case"md":case"lg":h.setMode("desktop");break;case"xl":case"hd":h.setMode("wide")}return!1}var n});var e=h.width();e>=h.XS_WIDTH&&e<=h.SM_WIDTH&&(h.calculatedSize="xs",h.calculedSizeMatch=h.XS_WIDTH),e>=h.SM_WIDTH&&e<=h.MD_WIDTH&&(h.calculatedSize="sm",h.calculedSizeMatch=h.SM_WIDTH),e>=h.MD_WIDTH&&e<=h.LG_WIDTH&&(h.calculatedSize="md",h.calculedSizeMatch=h.MD_WIDTH),e>=h.LG_WIDTH&&e<=h.HD_WIDTH&&(h.calculatedSize="lg",h.calculedSizeMatch=h.LG_WIDTH),e>h.HD_WIDTH&&(h.calculatedSize="hd",h.calculedSizeMatch=h.HD_WIDTH),t.$broadcast("$screenChange",h.calculatedSize)},fixSize:function(){var e,t;s.hasClass("fixed-size")||(e=jQuery(S).width(),t=jQuery(S).height(),a.width(e).height(t),s.width(e).height(t).css("overflow","hidden").addClass("fixed-size"),u=!0)},unfixSize:function(){s.hasClass("fixed-size")&&(a.css({width:"",height:""}),s.css({width:"",height:"",overflow:""}).removeClass("fixed-size"),u=!1)},blockScroll:function(e,t){(h.isMobile()||e)&&(s.addClass(d),t&&s.addClass(t))},unblockScroll:function(e){s.removeClass(d),e&&s.removeClass(e)},hasVerticalScroll:function(){return c.height()>l.height()},visibleTop:function(){var e=v.element(".nav").outerHeight(),t=v.element(".sl-sticky-menu").outerHeight()||0;return e+g+t},isVisible:function(){return"visible"===b.visibilityState},getProportionalSize:function(e){var t,n;return e.width<e.maxWidth&&e.height<e.maxHeight?{width:e.width,height:e.height}:(t=e.width>e.maxWidth?e.maxWidth:e.width,n=Math.ceil(t*e.height/e.width),e.height>e.width&&(n=e.height>e.maxHeight?e.maxHeight:e.height,t=Math.ceil(n*e.width/e.height)),t>e.maxWidth&&(t=e.maxWidth,n=Math.ceil(t*e.height/e.width)),n>e.maxHeight&&(n=e.maxHeight,t=Math.ceil(n*e.width/e.height)),{width:t,height:n})},isInStandaloneMode:function(){return"standalone"in S.navigator&&S.navigator.standalone||S.matchMedia("(display-mode: standalone)").matches}};return e(function(){h.update()}),t.$on("promotionReady",function(e,t){g=t.height}),h}])}(angular,document,window,jQuery),function(e,i){e.module("Sexlog").factory("$script",["$q",function(o){var e={inject:function(e){var t=o.defer();e||t.reject();var n=i.createElement("script");return n.type="text/javascript",n.src=e,n.async=!0,n.onreadystatechange=function(){"complete"===this.readyState&&t.resolve()},n.onload=function(){t.resolve()},i.getElementsByTagName("body")[0].appendChild(n),t.promise}};return e}])}(angular,document),angular.module("Sexlog").directive("scrollOn",function(){return function(e,o,i){e.$on("scrollOn",function(e,t,n){t===i.scrollOn&&("top"===n&&(o[0].scrollTop=0),"bottom"===n&&(o[0].scrollTop=o[0].scrollHeight))})}}),function(o,i){o.module("Sexlog").directive("slScrollTo",function(){return{restrict:"A",link:function(e,t,n){t.on("click",function(){var e,t=0;n.slScrollTo&&(t=(e=o.element(n.slScrollTo)).length?e.offset().top:0),i("body, html").animate({scrollTop:t},"slow")})}}})}(angular,jQuery),function(c,u){c.module("Sexlog").factory("$scroll",["$q","$timeout","$rootScope",function(s,n,o){var l=u("html, body"),e=u("body"),t=0,i=document.documentElement;return{to:function(e,t,n,o){n&&(l=u(n));var i=0,r=s.defer();if(c.isString(e)&&(e=c.element(e)).length&&(i=e.offset().top),c.isNumber(e)&&(i=e),!c.isElement(e)||t)return t=t||400,c.isNumber(o)&&(i+=o),l.animate({scrollTop:i},{duration:t,complete:function(){r.resolve()}}),r.promise;var a=e[0];return c.isFunction(a.scrollIntoViewIfNeeded)?void a.scrollIntoViewIfNeeded():void a.scrollIntoView()},toElement:function(e,t){if(c.isString(e))return n(function(){o.$broadcast("scrollOn",e,t)});c.isArray(e)&&(e=e[0]),"top"===t&&(e.scrollTop=0),"bottom"===t&&(e.scrollTop=e.scrollHeight)},toTop:function(e){return this.toElement(e,"top")},toBottom:function(e){return this.toElement(e,"bottom")},save:function(){t=e.scrollTop()},restore:function(){e.scrollTop(t)},getPosition:function(){return(window.pageYOffset||i.scrollTop)-(i.clientTop||0)},checkViewPort:function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return 1874<t?3:1100<t&&990<e?2:879<t&&990<e&&1},checkVisible:function(e){if(e=document.getElementsByClassName(e)[0]){var t=e.getBoundingClientRect(),n=t.top,o=t.height;if(e=e.parentNode,t.bottom<0)return!1;if(n>document.documentElement.clientHeight)return!1;do{if(n<=(t=e.getBoundingClientRect()).bottom==!1)return!1;if(n+o<=t.top)return!1;e=e.parentNode}while(e!==document.body);return!0}},smooth:function(e){n(function(){return document.body.querySelector(e).scrollIntoView({behavior:"smooth"})})},setVirtualScroll:function(l,c,u,e){setTimeout(function(){var e=document.querySelector(l),t=e.scrollHeight,n=e.offsetHeight,o=e.scrollTop,i=document.querySelector(c),r=document.querySelector(u),a=(100*n/t).toFixed(2),s=(100-(o+n)/t*100).toFixed(2);i&&(i.style.display="block",98<a&&(i.style.display="none")),r.style.height=a+"%",r.style.bottom=s+"%"},3<arguments.length&&void 0!==e?e:0)},configVirtualScroll:function(t,n,o,e){var i=this;setTimeout(function(){var e=document.querySelector(t);e&&(i.setVirtualScroll(t,n,o),e.addEventListener("scroll",function(){i.setVirtualScroll(t,n,o)}))},3<arguments.length&&void 0!==e?e:2e3)},scrollCard:function(e,t,n){var o=c.element(n),i=o[0],r=i.children[0],a=0;"prev"===t&&(a=i.scrollLeft-r.offsetWidth),"next"===t&&(a=i.scrollLeft+r.offsetWidth),o[0].scroll({left:a,behavior:"smooth"}),this.showPrev=0<a,this.showNext=i.offsetWidth+a<i.scrollWidth,e.preventDefault()},scrollCardArrowVisible:function(e,t){var n=c.element(e)[0];this.showPrev=!1,this.showNext=!0,8*t>n.offsetWidth&&(this.showNext=!0)}}}])}(angular,jQuery),function(s){s.module("Sexlog").directive("slSearch",["SearchModel","$debounce","$search","$lang",function(i,e,r,a){return{restrict:"A",scope:!0,compile:function(){return function(n,t){function o(){t.removeClass("loading")}n.selectedItem={},n.search=e(function(e){return e&&3<=e.length?(t.addClass("loading"),i.query({term:e}).$promise.then(function(e){return o(),t=e,n=[],s.forEach(t,function(e){s.isArray(e)&&(n=n.concat(e))}),n.push({cssClass:"advanced-search",text:a("advancedsearch")}),n;var t,n},function(){return o(),[]})):(o(),[{cssClass:"empty",text:a("searchonsexlog")},{cssClass:"advanced-search",text:a("advancedsearch")}])},r.delay),n.select=function(e){n.selectedItem=e,n.submit()},n.clear=function(){o(),n.selectedItem={}},n.close=function(e){n.term="",n.clear(),n.search(),t.find("input[type=search]").focus(),n.$emit("$closeTypeaheadDropdown",e)},n.submit=function(){n.submitAfterBlur=!0,r.submit(n.term,n.selectedItem)},n.formatSelection=function(e){if(e){if("all"===e.cssClass)return e.desc;if("friend"===e.cssClass)return e.login;if("location"===e.cssClass){var t="";return e.city&&(t+=e.city+", "),e.state&&(t+=e.state+" - "),e.country&&(t+=e.country),t||n.term}}}}}}}])}(angular),function(n){n.module("Sexlog").factory("SearchModel",["BaseModel","$url",function(e,t){return new e("search",{query:{method:"GET",url:t.base("search/find"),isArray:!1,cache:!0,params:{type:"raw"},transformResponse:function(e){return e&&(e=n.fromJson(e),n.isArray(e.custons)&&n.forEach(e.custons,function(e){e.cssClass="all"}),n.isArray(e.friends)&&n.forEach(e.friends,function(e){e.cssClass="friend"}),n.isArray(e.locations)&&n.forEach(e.locations,function(e){e.cssClass="location"})),e}}})}])}(angular),function(l){l.module("Sexlog").factory("$search",["$url","$timeout",function(i,n){function r(){return l.element("#navbar-search-form")}function a(){return l.element("#navbar-search-form input[type=search]")}function o(){return a().prevObject.scope()}var s={set:function(e){var t=r().find(".form-data");t.find('input[name="txtLocations"]').attr("value",e.txtLocations),t.find('input[name="gender"]').attr("value",e.gender),t.find('input[name="country"]').attr("value",e.country),t.find('input[name="state"]').attr("value",e.state),t.find('input[name="city"]').attr("value",e.city)},submit:function(e,t){var n=a().val();if(n&&(e=n===e?e:n),l.isDefined(t)&&(s.set({txtLocations:e,gender:t.gender,country:t.countryid,state:t.stateid,city:t.cityid}),"friend"===t.cssClass))return i.redirect(i.base(t.login));var o=r();return o.length?o.submit():void 0},setNavbarText:function(e){var t;e&&(t=o(),n(function(){t.term=e}))},clear:function(){var e=o();n(function(){e.term=""})},delay:400};return s}])}(angular),function(e,o){e.module("Sexlog").directive("slSendConfirmationSignup",function(){return{restrict:"A",link:function(e,t,n){o.post(n.url,{ai:n.accountid,eml:n.email})}}})}(angular,jQuery),angular.module("Sexlog").directive("slSetHeight",function(){return{restrict:"A",link:function(e,n){setTimeout(function(){var e=n.find(".item"),t=e.length*e.height();n.height(t)})}}}),angular,angular.module("Sexlog").constant("SHARE_TYPE",{TYPE_JPG:"image/jpg",TYPE_GIF:"image/gif"}),function(P){var _={facebook:"https://www.facebook.com/sharer/sharer.php?u={url}",twitter:"https://twitter.com/home?status=Friends, help me win the top prize in the Sexually Empowered Photo Contest by @sexlog and @sluttygirlprobs! {url}",pinterest:"https://www.pinterest.com/pin/create/button/?url={url}&media={media}&description={description}"};P.module("Sexlog").controller("ShareController",["$scope","$share","$url","$compile","$crop","$privacy","$auth","lang","$subscribe","$timeout","$onboarding","$experiment","$sce","LocalStorage","ShareModel","news","LOCAL_STORAGE","$firebaseMessaging","$scroll",function(i,o,r,a,s,l,c,u,d,f,m,p,g,e,h,n,t,v,b){var S=this,$=new e(t.ADAPTERS.SESSION),y=P.element("body");function E(){return o.showWebPushModal&&!o.closedWebPushModal&&!i.config[o.UPLOAD_TYPE.VIDEO]}function w(e){var t=P.element(".sl-share"),n=t.find(".modal-content");f(function(){n.height(e),f(function(){E()&&(t.addClass("sl-share-notification"),n.height("auto")),t.find(".modal-loader").remove()},600)})}function T(e){var t=P.element(".sl-share"),n=t.find(".modal-content");i.busy=!0,n.height(n.outerHeight()),t.addClass("sl-share-success"),n.parent().prepend('<div class="modal-loader in"></div>'),h[e](i.post,function(t){function e(){localStorage.getItem("reload-page")&&(localStorage.removeItem("reload-page"),r.reload()),i.message.saveMessage=-1===t.returncode?g.trustAsHtml(t.returnmessage):u.shareSuccessText,i.message.limit=-1===t.returncode,a(n.contents())(i),i.$apply(),$.clear("editor");var e=n.find(".modal-body").outerHeight();E()&&(e="534px"),w(e)}i.post.image=t.result&&t.result.image,t.result&&t.result.showWebPush&&!p.is("onboarding_2",["b","c"])&&(o.showWebPush=!0),i.post.image&&t.result.showOnboardingModal&&(o.onClose=function(){m.openStep({actionSuccess:"onboarding-step-photo-success",id:t.result.onboardingModalId,image:t.result.image.image},!0)},$.set("last-image",t.result.image.image)),n.empty().load(r.api(function(e){if(e.result&&e.result.image&&e.result.image.share)return"share/template?t=sluttygirlprobs";return"share/template?t=success"}(t)),function(){!P.isFunction(o.onSave)||i.config[o.UPLOAD_TYPE.VIDEO]||-1===t.returncode?e():o.onSave.call(i,{complete:e,data:t,isSgp:t.result&&t.result.image.share})})},function(){i.busy=!1}),l.clean()}function C(e){var t=P.element(".sl-share"),n=t.find(".modal-content"),o=-1===e.returncode;return o?n.empty().load(r.api("share/template?t=success&limit=true"),function(){t.addClass("sl-share-success"),i.message.saveMessage=-1===e.returncode?g.trustAsHtml(e.returnmessage):u.shareSuccessText,i.message.limit=o,a(n.contents())(i),w("auto")}):n.empty().load(r.api("share/template?t=video"),function(){t.addClass("sl-flex-modal sl-modal-video in"),t.removeClass("sl-modal-content-privacy"),a(n.contents())(i),w(244)})}i.$share=o,i.$privacy=l,i.busy=!1,i.config={},i.error={},i.message={},i.showAllText=!1,i.post={text:"",rotate:0},i.saved=!1,i.ShowAllPrivacy=function(){i.showAllText=!i.showAllText},i.showAll=function(){return 3<l.getListsName().length&&!0!==i.showAllText},i.privacyText=function(){var e=l.getListsName();return e.length<=0?(i.showAllText=!1,u.privacyPublic):3<e.length?i.showAllText?e.join(", "):e.slice(0,3).join(", ")+"... ":(i.showAllText=!1,e.join(", "))},i.close=function(){return localStorage.removeItem("tempTagId"),y.removeClass("photo-post"),o.showWebPush&&o.openWebPushDialog(),o.close()},i.save=function(){localStorage.removeItem("tempTagId"),b.to(0,0,".modal");var e,t=i.config[o.UPLOAD_TYPE.VIDEO];if(i.post.isVideo=t,i.post.privacy=l.getLists(),o.tagsArray?(e=o.tagsArray.filter(function(e){return e.status}),i.post.tag=e.length?e[0].id:""):i.post.tag="",i.post.tmpFileName){var n=s.getLastCrop();return s.clean(),i.post.description=i.post.text,n?(i.post.crop=!0,i.post.cropx=n.x,i.post.cropy=n.y,i.post.cropw=n.w,i.post.croph=n.h):i.post.crop=!1,t?function(){i.busy=!0;var e=P.element(".sl-share").find(".modal-content");e.height(e.outerHeight()),e.parent().prepend('<div class="modal-loader in"></div>'),h.saveFile(i.post,C)}():T("saveFile")}c.checkSubscription().then(function(){T("saveText")},function(){d.modal({subtitle:u.panelSubscribeForCreateNews,params:{action:"SHARE_TEXT"}})})},i.limitText=function(e){return e.substring(0,256)},i.repost=function(){o.showWebPush=!1,i.injected?r.reload():(i.close(),f(function(){o.modal()},200))},i.getShareLink=function(e){return _[e].replace("{url}",i.post.image.shareUrl).replace("{media}",i.post.image.cropLp).replace("{description}",i.post.text)},i.initSgp=function(e){var t;n&&(n.media.thumb&&(t=P.element('<img src="'+n.media.thumb+' ">'),o.setImage(t)),i.post={text:n.media.description,image:{cropLp:e.cropLp,shareUrl:e.shareUrl}})},i.setLangs=function(e){u=e},i.getPostUrl=function(e){var t=i.config[o.UPLOAD_TYPE.VIDEO],n=i.config[o.UPLOAD_TYPE.PHOTO];return t||n?e.baseUrl+(t?e.linkVideos:e.linkPhotos):e.baseUrl},i.enablePushNotification=function(){v.optIn().then(function(){i.setClosedModal(),o.close()})},i.setClosedModal=function(){o.closedWebPushModal=!0},i.getPrivacyModalFlag=function(e){S.contentPrivacyModal.showContentPrivacyModal=e},i.allowContentPrivacy=function(){h.contentPrivacy({value:!1}),o.contentPrivacyModal.showContentPrivacyModal=!1,i.save()},i.openLoadingVideoModal=function(){o.contentPrivacyModal.showContentPrivacyModal=!1,h.contentPrivacy({value:!0}),i.save()},i.getContentPrivacyModal=function(){o.contentPrivacyModal.showContentPrivacyModal=!1;var e=l.getListsName(),t=P.element(".sl-share"),n=t.find(".modal-content");if(e.length<=0)return n.height(n.outerHeight()),n.parent().prepend('<div class="modal-loader in"></div>'),n.empty().load(r.api("share/template?t=content-privacy"),function(){t.addClass("sl-flex-modal sl-modal-content-privacy in"),a(n.contents())(i),w(330)});i.save()}}])}(angular),function(e){var m=/(mp3)$/i;e.module("Sexlog").directive("slShareAudio",["$share","$upload","$tooltip",function(u,d,f){return{restrict:"A",require:"^slShare",scope:!0,link:function(t,n,e,o){var i,r,a;function s(e){o.onComplete(e,u.UPLOAD_TYPE.PHOTO),n.val("")}function l(){return r=!1,i=n,o.onSelect(PREVIEW_COMPATIBLE,a,u.UPLOAD_TYPE.PHOTO),u.setUploader(i),!0}function c(){r||o.onError(u.UPLOAD_TYPE.PHOTO),r=!1}n.on("change",function(e){if(a=e.target.files[0]||null,!m.test(a.type))return f.showErrorMessage("NecessÃ¡rio ser imagem!",!0);if(67108864<=a.size)return f.showErrorMessage("NecessÃ¡rio ser menor!",!0);t.upload()}),t.upload=function(){a&&d.upload({url:e.url,data:a}).then(s,c,l)}}}}])}(angular,window),function(e,t){var p=new RegExp("(jpg)|(jpeg)|(gif)|(png)$","i"),g=!!t.URL||!!t.webkitURL;e.module("Sexlog").directive("slShareFile",["$share","$upload","$tooltip",function(d,f,m){return{restrict:"A",require:"^slShare",scope:!0,link:function(t,n,e,o){var i,r,a,s;function l(e){o.onComplete(e,d.UPLOAD_TYPE.PHOTO),n.val("")}function c(){if(s)return r=s=!1,i=n,o.onSelect(g,a,d.UPLOAD_TYPE.PHOTO),d.setUploader(i),!0}function u(e){r||o.onError(d.UPLOAD_TYPE.PHOTO),m.showErrorMessage(e.returnmessage||"Ops... Algo deu errado, tente de novo!"),r=!1}n.on("change",function(e){if(a=e.target.files[0]||null,s=!0,!p.test(a.type))return m.showErrorMessage("NecessÃ¡rio ser imagem!",!0);if(67108864<=a.size)return m.showErrorMessage("NecessÃ¡rio ser menor!",!0);t.upload()}),t.upload=function(){a&&f.upload({url:e.url,data:a}).then(l,u,c)}}}}])}(angular,window),function(t){var n=t.module("Sexlog"),e="$modalInstance modalData lang news".split(" ");t.forEach(e,function(e){n.service(e,t.noop)}),t.module("Sexlog").directive("shareInjected",["$url","ShareModel",function(e,n){return{restrict:"EA",controller:"ShareController",templateUrl:function(){return e.api("share/template?t=modal&inject=true")},link:function(t){n.lang().$promise.then(function(e){t.setLangs(e)}),t.injected=!0}}}])}(angular),function(h,v){h.module("Sexlog").directive("slShareRotate",["$share","$crop","$rootScope",function(m,p,g){return{require:"ngModel",scope:!0,link:function(e,t,d,f){e.rotate=function(){var e,t,n,o=h.element(d.container),i=h.element("<canvas></canvas>"),r=m.getImageDimensions(),a=m.getImageOriginalDimensions(),s=m.getImage(),l=r.width,c=r.height,u=a.width;m.setImageDimensions({width:c,height:l}),m.setImageOriginalDimensions({width:a.height,height:u}),p.hasCrop&&(t=p.getLastCrop(),n={x:a.width-t.h-t.y,y:t.x,w:t.h,h:t.w},p.setLastCrop(n)),i.attr("width",c).attr("height",l),(e=i.get(0).getContext("2d")).translate(c,0),e.rotate(Math.PI/2),e.drawImage(s.get(0),0,0),v.loadImage(i.get(0).toDataURL("image/png"),function(e){var t=f.$viewValue;o.empty().append(e),m.setImage(h.element(e)),g.$broadcast("$positionateWatermark"),360===(t+=90)&&(t=0),f.$setViewValue(t)},{maxWidth:475,maxHeight:385})}}}}])}(angular,window),function(e){var m=new RegExp("(avi)|(mpg)|(mpeg)|(quicktime)|(mov)|(mp4)|(3gp)|(wmv)|(x-msvideo)$","i");e.module("Sexlog").directive("slShareVideo",["$share","$upload","$tooltip",function(u,d,f){return{restrict:"A",require:"^slShare",scope:!0,link:function(t,n,e,o){var i,r,a;function s(e){o.onComplete(e,u.UPLOAD_TYPE.VIDEO),n.val("")}function l(){return r=!1,i=n,o.onSelect(event,a,u.UPLOAD_TYPE.VIDEO),u.setUploader(i),!0}function c(e){r||o.onError(u.UPLOAD_TYPE.VIDEO),f.showErrorMessage(e.returnmessage||"Ops... Algo deu errado, tente de novo!"),r=!1}n.on("change",function(e){if(a=e.target.files[0]||null,!m.test(a.type))return f.showErrorMessage("NecessÃ¡rio ser vÃ­deo!",!0);if(536870912<=a.size)return f.showErrorMessage("NecessÃ¡rio ser menor!",!0);t.upload()}),t.upload=function(){a&&d.upload({url:e.url,data:a}).then(s,c,l)}}}}])}(angular,window),function(l){l.module("Sexlog").directive("slShareWatermark",["$share","$timeout",function(a,s){return{require:"ngModel",scope:!0,link:function(e,t,n,o){var i=l.element(n.watermarkContainer);function r(){var e=a.getImage();e&&(i.width(e.width()),i.offset({left:e.offset().left}))}e.$on("$screenChange",function(){r()}),e.$on("$positionateWatermark",function(){r()}),e.$on("$defaultWatermark",function(){s(function(){e.setMark("sw")})}),e.setMark=function(e){r(),o.$setViewValue(e)}}}}])}(angular),function(P,_){P.module("Sexlog").directive("slShare",["$q","$share","$crop","$lang","$privacy","$terms","$auth","$subscribe","$screen","$iframe","$url","$googleAnalytics","LocalStorage","SHARE_TYPE","$slLazyLoad","AppService","$messagePostsService",function(d,f,t,m,p,r,g,h,v,b,S,$,y,E,w,T,C){return{restrict:"A",scope:!0,controller:["$scope","$element",function(a,n){a.messagePostsLoaded=T.data.user.shouldShowMessagePostsControl;var e=P.element("body");a.messagePostsLoaded&&C.setReadMessagePosts();var s=n.find(".body-container"),l=s.find(".preview .image"),c=new y;function o(){a.config[f.UPLOAD_TYPE.PHOTO]=!1,a.config[f.UPLOAD_TYPE.VIDEO]=!1,a.config[f.UPLOAD_TYPE.AUDIO]=!1}function i(e){P.element(e).trigger("click")}function u(e){return 19<e.length?e.substr(0,8)+"..."+e.substr(e.length-8):e}this.onSelect=function(e,t,n){var i,o,r;a.isMobile=v.isMobile(),a.error={},a.$parent.busy=m("loading")+"...",a.post.watermark="",s.removeClass("error-media error-photo"),s.addClass("loading"),n===f.UPLOAD_TYPE.PHOTO?(o=e,r=(i=t).size.toString(),s.removeClass("image-edit image-no-preview error-media error-photo"),l.empty(),o?(s.addClass("image-edit"),function(e){var t=d.defer();return _.loadImage(e,function(e){t.resolve(e)},{maxWidth:475,maxHeight:385}),t.promise}(i).then(function(e){if(l.append(e),i.type===E.TYPE_GIF){var t=P.element("<canvas></canvas>"),n=t.get(0).getContext("2d");return t.attr("width",e.naturalWidth).attr("height",e.naturalHeight),n.drawImage(e,0,0),void _.loadImage(t.get(0).toDataURL(E.TYPE_JPG),function(e){var t=l.empty().append(e).find("img");f.setImage(t)})}var o=l.append(e).find("img");f.setImage(o)})):(s.addClass("image-no-preview"),3<r.length&&(r=r.substring(0,r.length-3)),a.$apply())):s.addClass("file-uploaded"),function(e,t){var n={name:u(t.name),size:t.size/1e3+"kb"};if(e===f.UPLOAD_TYPE.PHOTO||e===f.UPLOAD_TYPE.VIDEO)return a.file=n;a.fileAudio=n}(n,t),a.config[n]=!0},this.onComplete=function(e,t){var n;a.$broadcast("$defaultWatermark"),a.$parent.busy=!1,s.removeClass("loading"),0===e.returncode&&(t===f.UPLOAD_TYPE.PHOTO&&(n={width:e.result.width,height:e.result.height},f.setImageDimensions(n),f.setImageOriginalDimensions(n)),t===f.UPLOAD_TYPE.PHOTO||t===f.UPLOAD_TYPE.VIDEO?a.post.tmpFileName=e.result.name:t===f.UPLOAD_TYPE.AUDIO&&(a.post.tmpAudioName=e.result.name)),t===f.UPLOAD_TYPE.PHOTO&&(a.objImage=e)},this.onError=function(e){var t=n.find(".body-container");a.removeImage(),a.removeFile(),a.$parent.busy=!1,t.addClass(e===f.UPLOAD_TYPE.PHOTO?"error-photo":"error-media")},a.removeImage=function(){localStorage.removeItem("tempTagId"),s.removeClass("image-edit loading image-no-preview file-uploaded error-media error-photo"),a.post.tmpFileName=null,a.post.tmpAudioName=null,a.post.watermark="",a.post.rotate=0,f.setImage(null),t.clean(),o(),a.busy=!1,a.$broadcast("upload:cancel")},a.removeFile=function(e){s.removeClass("file-uploaded error-media error-photo loading"),a.config[f.UPLOAD_TYPE.AUDIO]?(a.post.tmpAudioName=null,a.config[f.UPLOAD_TYPE.AUDIO]=!1):(a.post.tmpFileName=null,o()),a.$broadcast("upload:cancel"),e&&e.stopPropagation()},a.openModalCrop=function(){t.setImage(f.getImage()),t.setImageDimensions(f.getImageDimensions()),t.setImageOriginalDimensions(f.getImageOriginalDimensions()),t.modal()},a.choosePhoto=function(){if(w.openPhotoTagsComponent(!0),e.addClass("photo-post"),a.config[f.UPLOAD_TYPE.VIDEO])return n.parents(".modal-content").addClass("change-file-type"),void(a.message={changeTypeTitle:m("post_changetophoto_title"),changeTypeText:m("post_changefromvideo_txt"),changeTypeYes:m("post_changetophoto_btnyes"),changeTypeNo:m("post_changefromvideo_btnno")});i(".share-file")},a.chooseVideo=function(){if(w.openVideoTagsComponent(!0),a.config[f.UPLOAD_TYPE.PHOTO])return n.parents(".modal-content").addClass("change-file-type"),void(a.message={changeTypeTitle:m("post_changetovideo_title"),changeTypeText:m("post_changefromphoto_txt"),changeTypeYes:m("post_changetovideo_btnyes"),changeTypeNo:m("post_changefromphoto_btnno")});i(".share-video")},a.chooseAudio=function(e){var t;a.post.tmpAudioName||P.element(e.target).hasClass("disabled")||(a.subscriber?i(".share-audio"):(t={subtitle:m("upload_audio_subscribe")},h.modal(t)))},a.closeModalConfirm=function(){n.parents(".modal-content").removeClass("change-file-type")},a.changeFileType=function(){var e=a.config[f.UPLOAD_TYPE.PHOTO],t=a.config[f.UPLOAD_TYPE.VIDEO];o(),e?(a.removeImage(),a.chooseVideo()):t&&(a.removeFile(),a.choosePhoto()),a.closeModalConfirm()},a.modalPrivacy=function(){p.modal()},a.modalTerms=function(e,t){r.modal(e,t)},a.checkEnabled=function(e){if(a.busy)return e.preventDefault(),!1},a.init=function(e){g.revalidateSubscription().then(function(){a.subscriber=!0},function(){a.subscriber=!1}),v.isMobile()||setTimeout(function(){P.element(n).find(".body-container textarea").focus()},100),e.injected&&w.openPhotoTagsComponent(!0).then(function(){c.get("editor").then(function(e){a.post.text=e.text,e.privacy&&(p.setLists(e.privacy.list),p.setListsName(e.privacy.names)),e.image&&(a.config[f.UPLOAD_TYPE.PHOTO]=!0,a.file={name:u(e.image.name),size:e.image.size+"kb"},s.addClass("image-edit"),f.refreshImage(e.image.url),a.post.tmpFileName=e.image.backName,a.objImage={result:{imageUrl:e.image.url,editorUrl:e.image.editorUrl,size:e.image.size,name:e.image.name}}),e.audio&&(a.config[f.UPLOAD_TYPE.AUDIO]=!0,a.fileAudio={name:u(e.audio.name)},a.post.tmpAudioName=e.audio.backName),e.watermark&&(a.post.watermark=e.watermark)})}),f.showWebPushModal=e.showWebPushModal,f.contentPrivacyModal.shareModalOpened||(f.contentPrivacyModal.shareModalOpened=!0,f.contentPrivacyModal.showContentPrivacyModal=e.showContentPrivacyModal)},a.openEditor=function(e){if(v.isMobile()||a.injected){var t={},n=a.objImage.result,o=p.getLists(),i=a.fileAudio,r=a.post.watermark;return t.text=a.post.text,t.image={url:S.removeSearch(n.imageUrl)+"?t="+(new Date).getTime(),size:n.size,name:a.file.name,backName:a.post.tmpFileName,editorUrl:n.editorUrl},o&&(t.privacy={list:p.getLists(),names:p.getListsName()}),i&&(t.audio={name:a.fileAudio.name,backName:a.post.tmpAudioName}),r&&(t.watermark=r),"/editor"!==S.path()&&(t.editorOriginUrl=S.href()),void c.set("editor",t).then(function(){$.trackEvent("Editor de Fotos","Mobile"),S.redirect(S.customParams(n.editorUrl,{backUrl:S.base("editor"),originUrl:S.href()}))}).catch(function(){a.openEditorFrame(e)})}a.openEditorFrame(e)},a.openEditorFrame=function(t){b.open({src:S.customParams(a.objImage.result.editorUrl,{iframe:!0}),fullscreen:!0,onClose:function(e){e.origin===t.editorUrl&&(f.refreshImage(a.objImage.result.imageUrl+"?t="+(new Date).getTime()),b.destroy(),$.trackEvent("Editor de Fotos","Desktop"))}})},a.hidePopover=function(){a.showPopover=!1}}]}}])}(angular,window),angular.module("Sexlog").directive("slShareAppend",["$share",function(o){return{restrict:"A",scope:!0,link:function(e,t){var n=o.getImage();n&&t.append(n)}}}]),angular.module("Sexlog").factory("ShareModel",["BaseModel","$url",function(e,t){return new e("share",{saveText:{method:"POST",url:t.api("share/text")},saveFile:{method:"POST",url:t.base("news/post"),requireExperiment:!0},lang:{method:"GET",url:t.api("share/lang"),isArray:!1,cache:!0},contentPrivacy:{method:"POST",url:t.api("my-account/content-privacy")}})}]),function(d){d.module("Sexlog").factory("$share",["$url","$modalLoading","$modal","$lang","$privacy","ShareModel",function(n,o,i,e,r,a){var s=null,t={width:null,height:null},l={width:null,height:null},c={modalInstance:null,showWebPush:!1,showWebPushModal:!1,closedWebPushModal:!1,UPLOAD_TYPE:{PHOTO:"Photo",VIDEO:"Video",AUDIO:"Audio"},onClose:null},u={windowClass:"sl-modal sl-share"};return c.modal=function(e){r.clean(),e&&localStorage.setItem("reload-page",!0),s=null,o.create();var t=d.extend(u,{templateUrl:n.api("share/modal-template"),controller:"ShareController",backdrop:"static",resolve:{lang:function(){return a.lang().$promise.then(function(e){return e})},news:function(){return!1}}});return c.showWebPush=!1,c.modalInstance=i.open(t),c.modalInstance.result.finally(function(){d.isFunction(c.onClose)&&c.onClose()}),c.onClose=null,c.modalInstance},c.modalSgpSuccess=function(e){var t={windowClass:"sl-modal sl-share sl-share-success",templateUrl:n.api("share/template?t=sluttygirlprobs&contentId="+e.contentid),controller:"ShareController",backdrop:"static",resolve:{lang:function(){return a.lang().$promise.then(function(e){return e})},news:function(){return e},profileValidation:function(){return!1}}};return c.modalInstance=i.open(t),c.modalInstance},c.close=function(){c.modalInstance.close()},c.setImage=function(e){s=e},c.getImage=function(){return s},c.setImageDimensions=function(e){t.width=e.width,t.height=e.height},c.getImageDimensions=function(){return t},c.setImageOriginalDimensions=function(e){l.width=e.width,l.height=e.height},c.getImageOriginalDimensions=function(){return l},c.hasImage=function(){return null!==s},c.setUploader=function(e){c.uploader=e},c.refreshImage=function(e){var t=d.element('<img src="'+e+'">');d.element(".sl-share").find(".image").empty().append(t),c.setImage(t)},c.contentPrivacyModal={showContentPrivacyModal:!1,shareModalOpened:!1},c}])}(angular),function(d){function e(o,i,r,t,n,a,s,l){function c(e){return e.includes(".js")&&!e.includes(".min")&&t.get("minjs")&&(e=e.replace(".js",t.get("minjs")+".js")),e+"?v="+t.get("jsVersion")}var u={load:function(e,t){var n=o.defer();return i.load(e.map(c)).then(function(){return t?n.resolve(r.get(t)):n.resolve()}).catch(function(e){n.reject(e)}),n.promise},openCertificationModal:function(t){u.load(["assets/js/sl/angular/modules/certification-modal/certification-modal.js","assets/css/sl/app/certification-modal/certification-modal.css","assets/js/sl/angular/modules/profile/profile.js","assets/css/sl/app/profile/profile.css"]).then(function(){var e=d.extend(t||{},{templateUrl:"service/certification-modal",windowsClass:"certification-modal",modalId:t.modalId,origin:t.origin});n.open(e)}),a.get("service/certification/lang").then(function(e){s.add(e.data)})},openCertificationModalIntro:function(e){u.load(["assets/js/sl/angular/modules/certification-modal-intro/certification-modal-intro.js","assets/css/sl/app/certification-modal-intro/certification-modal-intro.css"]).then(function(){n.open({templateUrl:"service/certification-modal-intro?origin="+e.origin+"&v="+(new Date).getTime(),owner:e.owner,origin:e.origin})}),a.get("service/certification/lang").then(function(e){s.add(e.data)})},openTooltipCertification:function(){o.all([a.get("service/certification/lang"),u.load(["assets/js/sl/angular/modules/sltoast/sltoast.js","assets/css/sl/app/sltoast/sltoast.css"],"SlToastService")]).then(function(e){var t=e[0],n=e[1];s.add(t.data);var o={},o=l.isMobile()?(d.element("body").removeClass("sidebar-open"),{title:"",desc:s("certification_tooltip_mobile"),attr:".navbar-default",placement:"custom",custom:{Y:65,X:2},class:"toast-sidebar"}):(n.clickOnElement("#dropdown-toggle"),{title:s("certification_tooltip_title"),desc:s("certification_tooltip_text"),attr:".certification",placement:"left"});n.createElement(o)})},openTestimonialModal:function(){u.load(["assets/js/sl/angular/modules/modal-testimonials/modal-testimonials.js","assets/css/sl/app/modal-testimonials/modal-testimonials.css","assets/js/sl/angular/modules/profile/profile.js","assets/css/sl/app/profile/profile.css"],"$modalTestimonials").then(function(e){e.openPending()})},openAntispamModal:function(t){return u.load(["assets/js/sl/angular/modules/antispam/antispam.js","assets/css/sl/app/antispam/antispam.css"],"AntispamService").then(function(e){e.openModal(t)})},openTooltip:function(o){return u.load(["assets/js/sl/angular/modules/sltoastparams/sltoastparams.js","assets/css/sl/app/sltoastparams/sltoastparams.css"],"SlToastServiceParams").then(function(e){var t=e,n=d.merge({},{title:"",titleParam:"",desc:"",placement:"left",color:"#661577",fontColor:"#FFF",hasButton:!1,class:"",buttonProperties:{color:"#FFF",fontColor:"#661577",text:""},linkText:"",isMobile:!1,height:125,width:275},o);l.isMobile()&&(n.isMobile=!0,n.title="",n.attr=o.attrMobile,n.desc=o.descMobile,n.class="toast-mobile",n.hasButton=!1),t.createElement(n)})},openBilletModal:function(t){u.load(["assets/js/sl/angular/modules/billet-modal/billet-modal.js","assets/css/sl/app/billet-modal/billet-modal.css"],"$billetModalService").then(function(e){e.openModal(t)})},openSubscribeOnboarding:function(){return u.load(["assets/js/sl/angular/modules/onboarding-success/onboarding-success.js","assets/css/sl/app/onboarding-success/onboarding-success.css"])},openPreProfileView:function(t){return u.load(["assets/js/sl/angular/modules/pre-profile/pre-profile.js","assets/css/sl/app/pre-profile/pre-profile.css"],"$preProfileService").then(function(e){return t?void e.openModal():e.close()})},openCancellationModal:function(){u.load(["assets/js/sl/angular/modules/cancellation-modal/cancellation-modal.js","assets/css/sl/app/cancellation-modal/cancellation-modal.css"],"$cancellationModalService").then(function(e){e.openModal()})},openOnboardingNewMenu:function(t){return u.load(["assets/js/sl/angular/modules/onboarding-tour-menu/onboarding-tour-menu.js","assets/css/sl/app/onboarding-tour-menu/onboarding-tour-menu.css"],"$onboardingTourMenuService").then(function(e){e.openModal(t)})},openReportModal:function(t,n){u.load(["assets/js/sl/angular/modules/report-flow/report-flow.js","assets/css/sl/app/report-flow/report-flow.css"],"$reportModalService").then(function(e){e.openModal(t,n)})},openFilterComponent:function(){return u.load(["assets/js/sl/angular/modules/new-filter/new-filter.js","assets/css/sl/app/new-filter/new-filter.css"])},openFilterExploreComponent:function(){return u.load(["assets/js/sl/angular/modules/filter-explore/filter-explore.js","assets/css/sl/app/filter-explore/filter-explore.css"])},callBodyScroll:function(){return u.load(["assets/js/vendor/plugins/body-scroll-lock/bodyScrollLock.min.js"])},callMessagePosts:function(){return u.load(["assets/js/sl/angular/modules/message-posts/message-posts.js","assets/css/sl/app/message-posts/message-posts.css"])},callFeedbackBar:function(){return u.load(["assets/js/sl/angular/modules/feedback-bar/feedback-bar.js","assets/css/sl/app/feedback-bar/feedback-bar.css"])},callPeopleSuggestion:function(){return u.load(["assets/js/sl/angular/modules/people-suggestion/people-suggestion.js","assets/css/sl/app/people-suggestion/people-suggestion.css"])},openVideoTagsComponent:function(e){var t=["assets/js/sl/angular/modules/video-tags/video-tags.js","assets/css/sl/app/video-tags/video-tags.css"];return e&&t.push("assets/js/sl/angular/modules/profile/profile.js"),u.load(t)},openPhotoTagsComponent:function(e){var t=["assets/js/sl/angular/modules/photo-tags/photo-tags.js","assets/css/sl/app/photo-tags/photo-tags.css"];return e&&t.push("assets/js/sl/angular/modules/profile/profile.js"),u.load(t)},openCommonModal:function(t){u.load(["assets/js/sl/angular/modules/informative-modal/informative-modal.js","assets/js/sl/angular/modules/modal-email-confirm/modal-email-confirm.js","assets/css/sl/app/informative-modal/informative-modal.css"],"informativeModalService").then(function(e){e.openModal(t)})},loadVideoCardAssets:function(){return u.load(["assets/js/sl/angular/modules/video-card/video-card.js","assets/css/sl/app/video-card/video-card.css"])},openVideoFilter:function(){return u.load(["assets/js/sl/angular/modules/new-videos-filters/new-videos-filters.js","assets/css/sl/app/new-videos-filters/new-videos-filters.css"])},openExpiredRenewalModal:function(t){return u.load(["assets/js/sl/angular/modules/expired-renewal-modal/expired-renewal-modal.js","assets/css/sl/app/expired-renewal-modal/expired-renewal-modal.css"],"$expiredRenewalModalService").then(function(e){e.openModal(t)})},openTagVote:function(){return u.load(["assets/js/sl/angular/modules/tag-vote/tag-vote.js","assets/css/sl/app/tag-vote/tag-vote.css"])},loadCommentInputAssets:function(){return u.load(["assets/js/sl/angular/modules/comment-input/comment-input.js","assets/css/sl/app/comment-input/comment-input.css"])},openRenewalSignature:function(t,n){return u.load(["assets/js/sl/angular/modules/renewal-signature-modal/renewal-signature-modal.js","assets/css/sl/app/renewal-signature-modal/renewal-signature-modal.css"],"$renewalSignatureModalService").then(function(e){e.openModal(t,n)})},openModalWithConfirmation:function(t,n){return u.load(["assets/js/sl/angular/modules/modal-with-confirmation/modal-with-confirmation.js","assets/css/sl/app/modal-with-confirmation/modal-with-confirmation.css"],"$modalWithConfimation").then(function(e){e.openModal(t,n)})},openLGPDTooltip:function(){return u.load(["assets/js/sl/angular/modules/lgpd-tooltip/lgpd-tooltip.js","assets/css/sl/app/lpgd-tooltip/lgpd-tooltip.css"])},openInvoiceModal:function(t){return u.load(["assets/js/sl/angular/modules/invoice-modal/invoice-modal.js","assets/css/sl/app/invoice-modal/invoice-modal.css"],"$invoiceModalService").then(function(e){e.openModal(t)})},openShowReactionsModal:function(){return u.load(["assets/js/sl/angular/modules/show-reactions-modal/show-reactions-modal.js","assets/css/sl/app/show-reactions-modal/show-reactions-modal.css"],"$showReactionsModalService").then(function(e){e.openModal()})},openCookiesModal:function(){return u.load(["assets/js/sl/angular/modules/myaccount/myaccount.js","assets/css/sl/app/myaccount/cookies-modal.css"],"$cookiesModalService").then(function(e){e.openModal()})},openFillingModal:function(t){return u.load(["assets/js/sl/angular/modules/filling-modal/filling-modal.js","assets/css/sl/app/filling-modal/filling-modal.css"],"$fillingModalService").then(function(e){e.openModal(t)})},getDonateTokenComponent:function(){return u.load(["assets/js/sl/angular/modules/donate-token/donate-token.js","assets/css/sl/app/donate-token/donate-token.css"])},openMeetingModal:function(t,n){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return u.load(["assets/js/sl/angular/modules/meeting-flow/meeting-flow.js","assets/css/sl/app/meeting-flow/meeting-flow.css"],"$meetingFlowService").then(function(e){e.openModal(t,n,o)})}};return u}e.$inject=["$q","$ocLazyLoad","$injector","$meta","$slmodal","$http","$lang","$device"],d.module("Sexlog").factory("$slLazyLoad",e)}(window.angular),function(e){e.module("Sexlog").component("slCardComponent",{bindings:{login:"@"},template:' \n            <div class="slcard">\n                <div class="slcard__content" ng-if="!$ctrl.isLoading">\n\n                    \x3c!-- HEADER --\x3e\n                    <a class="slcard__avatar" ng-href="{{\'u/\' + $ctrl.login}}" ng-class="{\'slcard__avatar--premium\': $ctrl.user.isPremium }">\n                        <img class="slcard__img img-circle lazyload" sl-safe ng-src="{{$ctrl.user.avatar}}" alt="{{$ctrl.login}}">\n                    </a>\n                    <a class="slcard__user"  ng-href="{{\'u/\' + $ctrl.login}}">\n                        <svg class="slcard__icon--premium" ng-if="$ctrl.user.isPremium">\n                            <use xlink:href="assets/icons/_common/_common.svg#common-premium-icon"></use>\n                        </svg>\n                        <svg class="slcard__icon--premium" ng-if="$ctrl.user.isSubscriber && !$ctrl.user.isPremium">\n                            <use xlink:href="assets/icons/_common/_common.svg#common-estrela-assinante"></use>\n                        </svg>\n                        <span class="slcard__login" ng-bind="$ctrl.login" title="{{$ctrl.login}}"></span>\n                    </a>\n                    <div class="slcard__info">\n                        <span class="slcard__gender" ng-bind="$ctrl.user.gender"></span>\n                        <span class="slcard__gender--more" ng-if="$ctrl.user.brief" ng-bind="$ctrl.user.brief"></span>\n                    </div>\n                    <div class="slcard__location" ng-if="$ctrl.user.city">\n                        <svg class="slcard__icon--location">\n                            <use xlink:href="assets/icons/slcard/slcard.svg#tag-location"></use>\n                        </svg>\n                        <span class="slcard__city" ng-bind="$ctrl.user.city"></span>\n                    </div>\n                    <div class="slcard__certificate" ng-if="$ctrl.user.isCertified">\n                        <svg class="slcard__icon">\n                            <use xlink:href="assets/icons/slcard/slcard.svg#certificate"></use>\n                        </svg>\n                        <span ng-bind="::$ctrl.langs.profileCertificated"></span>\n                    </div>\n\n                    \x3c!-- DESCRIÃÃO --\x3e\n                    <div class="slcard__description">\n                        <span ng-bind="$ctrl.user.description"></span>\n                        <a ng-if="$ctrl.user.wrapDescription"\n                           ng-click="$ctrl.seeMoreLink()"\n                           ng-bind="$ctrl.langs.seeMore" \n                           class="slcard__see-more">\n                        </a>\n                    </div>\n\n                    \x3c!-- BOTOES --\x3e\n                    <div class="slcard__buttons" ng-if="!$ctrl.isLoadingButtons && !$ctrl.isBlocked" ng-hide="$ctrl.buttons.hasBlock || $ctrl.buttons.isOwner">\n                        <div class="slcard__button slcard__button--friendship" ng-click="$ctrl.friendship(\'sendFriendship\', \'friendship-sent\')" ng-if="$ctrl.buttons.friendshipStatus === \'no-friends\'">\n                            <svg class="slcard__icon slcard__icon--friendship" ng-hide="$ctrl.loadingFriendship">\n                                <use xlink:href="assets/icons/slcard/slcard.svg#add-user"></use>\n                            </svg>\n                            <span spinner ng-show="$ctrl.loadingFriendship"></span>\n                            <div class="slcard__send-text" ng-hide="$ctrl.loadingFriendship" ng-bind="::$ctrl.langs.addFriendship"></div>\n                        </div>\n                        <div class="slcard__button slcard__button--friendship slcard__button--purple-text" ng-click="$ctrl.friendship(\'cancelFriendship\', \'no-friends\')" ng-if="$ctrl.buttons.friendshipStatus === \'friendship-sent\'">\n                            <svg class="slcard__icon slcard__icon--friendship" ng-hide="$ctrl.loadingFriendship">\n                                <use xlink:href="assets/icons/slcard/slcard.svg#add-user"></use>\n                            </svg>\n                            <span spinner ng-show="$ctrl.loadingFriendship"></span>\n                            <div class="slcard__send-text" ng-hide="$ctrl.loadingFriendship" ng-bind="::$ctrl.langs.cancelRequest"></div>\n                        </div>\n                        <div class="slcard__button slcard__button--friendship slcard__button--purple-text" ng-click="$ctrl.friendship(\'acceptFriendship\', \'friends\')" ng-if="$ctrl.buttons.friendshipStatus === \'friendship-received\'">\n                            <svg class="slcard__icon slcard__icon--friendship" ng-hide="$ctrl.loadingFriendship">\n                                <use xlink:href="assets/icons/slcard/slcard.svg#add-user"></use>\n                            </svg>\n                            <span spinner ng-show="$ctrl.loadingFriendship"></span>\n                            <div class="slcard__send-text" ng-hide="$ctrl.loadingFriendship" ng-bind="::$ctrl.langs.acceptFriendship"></div>\n                        </div>\n                        <div class="slcard__button slcard__button--friendship slcard__button--purple-button" ng-click="$ctrl.friendship(\'removeFriendship\', \'no-friends\')"  ng-if="$ctrl.buttons.friendshipStatus === \'friends\'">\n                            <svg class="slcard__icon slcard__icon--friendship" ng-hide="$ctrl.loadingFriendship">\n                                <use xlink:href="assets/icons/slcard/slcard.svg#added-user"></use>\n                            </svg>\n                            <span spinner ng-show="$ctrl.loadingFriendship"></span>\n                            <div class="slcard__send-text" ng-hide="$ctrl.loadingFriendship" ng-bind="::$ctrl.langs.undoFriendship"></div>\n                        </div>\n                        <div class="slcard__button"  ng-click="$ctrl.sendMessage()" ng-if="$ctrl.buttons.isMessage">\n                            <svg class="slcard__icon slcard__icon--message">\n                                <use xlink:href="assets/icons/slcard/slcard.svg#menu-msg"></use>\n                            </svg>\n                        </div>\n                        <div class="slcard__button" ng-click="$ctrl.showMoreActions = !$ctrl.showMoreActions">\n                            <svg class="slcard__icon">\n                                <use xlink:href="assets/icons/slcard/slcard.svg#combined-shape"></use>\n                            </svg>\n                        </div>\n\n                        \x3c!-- BOTOES DE MAIS AÃÃES --\x3e\n                        <div class="slcard__more-actions" ng-class="{\'slcard__more-actions--opened-top\': $ctrl.repositionSubCard}" ng-show="$ctrl.showMoreActions">\n                            <div class="slcard__more-action" ng-click="$ctrl.favorite()">\n                                <svg class="slcard__icon slcard__icon--more">\n                                    <use xlink:href="assets/icons/slcard/slcard.svg#favorite"></use>\n                                </svg>\n                                <span spinner class="slcard__fav-spinner" data-size="12" ng-show="$ctrl.loadingFavorite"></span>\n                                <span class="slcard__more-action-text" ng-hide="$ctrl.loadingFavorite" ng-bind="$ctrl.buttons.isFavorite ? $ctrl.langs.removeFavorite : $ctrl.langs.addFavorite"></span>\n                            </div>\n                            <span class="slcard__divider"></span>\n                            <div class="slcard__more-action" ng-click="$ctrl.block()">\n                                <svg class="slcard__icon">\n                                    <use xlink:href="assets/icons/slcard/slcard.svg#block"></use>\n                                </svg>\n                                <span class="slcard__more-action-text" ng-bind="::$ctrl.langs.block"></span>\n                            </div>\n                            <div class="slcard__more-action" ng-click="$ctrl.reportFlow()">\n                                <svg class="slcard__icon">\n                                    <use xlink:href="assets/icons/slcard/slcard.svg#report"></use>\n                                </svg>\n                                <span class="slcard__more-action-text" ng-bind="::$ctrl.langs.denounce"></span>\n                            </div>\n                        </div>\n                    </div>\n                    <span ng-if="$ctrl.isLoadingButtons" class="slcard__loading-btns" spinner></span>\n                </div>\n                <div class="slcard__content slcard__loading" ng-if="$ctrl.isLoading">\n                    <span spinner ></span>\n                </div>\n            </div>\n                ',controller:function(){function f(e,t,n,o,i,r,a,s,l,c,u){var d=this;_classCallCheck(this,f),this.$slCardService=e,this.$messages=t,this.$dialog=n,this.$slLazyLoad=o,this.$auth=i,this.$timeout=r,this.$url=s,this.cardHeight=255,this.$tooltip=c,this.$signup=u,this.cardHeight+=l.isLegacy()?55:0,a.$on("SLCARD_OPENED_BOTTOM",function(){return d.openedTop=!0}),a.$on("REPOSITION_SUB_CARD",function(){return d.repositionSubCard=!0})}return f.$inject=["$slCardService","$messages","$dialog","$slLazyLoad","$auth","$timeout","$scope","$url","$legacy","$tooltip","$signup"],_createClass(f,[{key:"$onInit",value:function(){this.getInfoUser()}},{key:"getInfoUser",value:function(){var n=this;this.isLoading=!0,this.$slCardService.getInfoUser(this.login).then(function(e){var t=e.data;n.updateHeight(),n.user=t,n.langs=Object.assign({},n.langs,t.langs),n.isLoading=!1,n.getButtons()})}},{key:"getButtons",value:function(){var n=this;this.$auth.isLogged()?(this.isLoadingButtons=!0,this.$slCardService.getInfoButtons(this.login).then(function(e){var t=e.data;t||(n.isBlocked=!0),n.buttons=t,n.langs=Object.assign({},n.langs,t.langs),n.isLoadingButtons=!1})):this.isBlocked=!0}},{key:"seeMoreLink",value:function(){if(this.$auth.isLogged())return this.$url.redirect(this.user.aboutUrl);this.$signup.modal(),this.closeSlCard()}},{key:"sendMessage",value:function(){this.$messages.modal({params:{login:this.login}}),this.closeSlCard()}},{key:"favorite",value:function(){var e=this,t=this.buttons.isFavorite?"remove":"add";this.loadingFavorite=!0,this.$slCardService.favorite(t,this.login).then(function(){e.buttons.isFavorite=!e.buttons.isFavorite,e.loadingFavorite=!1})}},{key:"block",value:function(){var e=this;this.$dialog.confirm({title:this.langs.blockUser,message:this.langs.reallyWantto.replace("{0}",this.login),yes:this.langs.block,no:this.langs.cancel}).then(function(){e.$slCardService.block(e.login)}),this.closeSlCard()}},{key:"reportFlow",value:function(){this.$slLazyLoad.openReportModal("profile",{login:this.login,avatar:this.user.avatar}),this.closeSlCard()}},{key:"friendship",value:function(e,t){var o=this;this.loadingFriendship||(this.loadingFriendship=!0,this.$slCardService[e](this.login).then(function(){o.buttons.friendshipStatus=t}).catch(function(e){var t=e.data,n=void 0===t?{}:t;n.title&&o.$tooltip.showErrorMessage(n.title,!0)}).finally(function(){o.loadingFriendship=!1}))}},{key:"updateHeight",value:function(){var o=this;this.$timeout(function(){var e,t,n=document.querySelector("sl-card-component");n&&!o.openedTop&&(e=o.cardHeight-n.offsetHeight,o.cardHeight=n.offsetHeight,t=parseInt(n.style.top,10)+e,n.style.top="".concat(t,"px"))},0)}},{key:"closeSlCard",value:function(){e.element("sl-card-component").remove()}}]),f}()})}(angular),function(d,f){var m=document.querySelector(".sl-campaign")?document.querySelector(".sl-campaign").offsetHeight:0;d.module("Sexlog").directive("slCard",["$compile","$rootScope","$device",function(c,u,o){return{restrict:"A",link:function(e,i,r){var a,t;function s(){t=!0}function l(){t=!1,n()}function n(){t||d.element("sl-card-component").remove()}o.isMobile()||(a=i[0],f(a,function(){if(document.querySelector("sl-card-component"))return;var e=d.element('\n                        <sl-card-component login="'.concat(r.login,'"></sl-card-component>\n                        '));d.element(document.body).prepend(c(e)(u.$new(!0)));var t=document.querySelector("sl-card-component"),n=a.getBoundingClientRect(),o=document.body.getBoundingClientRect();t.style.top=function(e,t,n){if(0<=e-t.offsetHeight-130-m)return function(e){window.innerHeight-e-130<0&&u.$broadcast("REPOSITION_SUB_CARD")}(e),"".concat(parseInt(e-t.offsetHeight+Math.abs(n)),"px");return u.$broadcast("SLCARD_OPENED_BOTTOM"),"".concat(parseInt(e+i.height()+Math.abs(n)),"px")}(n.top,t,o.top),t.style.left=function(e,t,n){if(e+20+t.offsetWidth+150>=Math.abs(n))return"".concat(parseInt(e+i.width()-t.offsetWidth),"px");return"".concat(parseInt(e+20),"px")}(n.left,t,o.right),f(t,s,l).options({timeout:350,interval:0})},n).options({timeout:600,interval:300}))}}}])}(angular,window.hoverintent),function(e){var t=function(){function t(e){_classCallCheck(this,t),this.$http=e}return t.$inject=["$http"],_createClass(t,[{key:"getInfoUser",value:function(e){return this.$http.get("service/profile/slcard/user/info/".concat(e))}},{key:"getInfoButtons",value:function(e){return this.$http.get("service/profile/slcard/buttons/info/".concat(e))}},{key:"favorite",value:function(e,t){return this.$http.post("service/profile/favorite/".concat(t,"/").concat(e))}},{key:"block",value:function(e){return this.$http.post("service/profile/".concat(e,"/block"))}},{key:"sendFriendship",value:function(e){return this.$http.post("service/profile/friend/".concat(e,"/request"))}},{key:"removeFriendship",value:function(e){return this.$http.post("service/profile/friend/".concat(e,"/remove"))}},{key:"acceptFriendship",value:function(e){return this.$http.post("service/profile/friend/".concat(e,"/accept"))}},{key:"cancelFriendship",value:function(e){return this.$http.post("service/profile/friend/".concat(e,"/cancel"))}}]),t}();e.module("Sexlog").service("$slCardService",t)}(angular),function(n){n.module("Sexlog").directive("slmodalBody",function(){return{transclude:!0,replace:!0,template:function(e,t){return'<div class="slmodal__body '+(n.isDefined(t.center)?"slmodal__body--center":"")+'" ng-transclude></div>'}}})}(angular),angular.module("Sexlog").directive("slmodalBtn",function(){return{scope:{disabled:"="},transclude:!0,replace:!0,template:'<button class="slmodal__btn" ng-disabled="disabled" ng-transclude></button>'}}),angular.module("Sexlog").component("slmodalClose",{bindings:{save:"=",confirm:"<"},transclude:!0,controller:["$slmodal","$dialog","$rootScope",function(t,n,o){this.closeModal=function(){if(o.$broadcast("slModal:Close"),this.confirm){var e={message:t.params.closeMessage};return n.confirm(e).then(function(){return t.close()})}return t.close()}}],template:'<div class="slmodal__close" ng-click="$ctrl.closeModal()">&times;</div>'}),angular.module("Sexlog").directive("slmodalCondition",["$slmodal",function(o){return{scope:{condition:"="},transclude:!0,replace:!0,link:function(e,t){var n=null;e.$watch("condition",function(e){return e?void(n=t.find(".slmodal__step").appendTo(o.$stepWrapper)):n&&t.append(n)})},template:'<div class="slmodal__condition" ng-transclude></div>'}}]),angular.module("Sexlog").directive("slmodalFooter",function(){return{scope:{save:"="},transclude:!0,replace:!0,template:'<div class="slmodal__footer" ng-transclude></div>'}}),angular.module("Sexlog").directive("slmodalHeader",["$slmodal","$compile",function(o,i){return{scope:{onClose:"&",onPrevStep:"&"},transclude:!0,replace:!0,compile:function(){return{pre:function(e,t){var n=t.index(".slmodal__content .slmodal__header");o.hasSteps&&n&&t.append(i('<div class="slmodal__back" ng-click="prevStep()"><svg xmlns="http://www.w3.org/2000/svg" width="11" height="17"><path d="M.98 7.506l-.98.98 8.485 8.485 1.958-1.959-6.527-6.527 6.527-6.527L8.485 0 .98 7.506z" fill="#999" fill-rule="evenodd"/></svg></div>')(e)),e.prevStep=function(){o.prevStep(),e.onPrevStep()}}}},template:function(e,t){return'<div class="slmodal__header"><slmodal-close confirm="'+t.confirmOnClose+'"></slmodal-close><div ng-transclude class="slmodal__header-content"></div></div>'}}}]),angular.module("Sexlog").component("slmodalMessage",{bindings:{show:"=",type:"<"},transclude:!0,template:'<ul class="slmodal__messages alert {{ $ctrl.type || "alert-danger" }}" ng-show="$ctrl.show" ng-transclude></ul>'}),function(e,t){function i(e){9===e.keyCode&&e.preventDefault()}var r=e.element(t);e.module("Sexlog").directive("slmodalStep",["$slmodal",function(o){return{restrict:"AE",transclude:!0,replace:!0,template:'<div class="slmodal__step" ng-transclude></div>',link:function(e,t){function n(){var e=o.$stepWrapper.width();t.width(e)}r.on("resize",function(){n(),o.refreshPosition()}),t.on("keydown",i),setTimeout(function(){n()})}}}])}(angular,window),angular.module("Sexlog").directive("slmodalSteps",function(){return{transclude:!0,replace:!0,template:'<div class="slmodal__step-wrapper" ng-transclude></div>'}}),function(i){i.module("Sexlog").directive("slmodal",["$slmodal",function(o){return{restrict:"AE",replace:!0,transclude:!0,controller:"@",name:"controllerName",controllerAs:"$ctrl",compile:function(){return{pre:function(e,t,n){o.hasSteps=i.isDefined(n.steps)},post:function(e,t){o.hasSteps&&(o.$stepWrapper=t.find(".slmodal__step-wrapper"),t.find(".slmodal__step").each(function(e,t){i.element(t).find(".slmodal__header, .slmodal__body, .slmodal__messages").wrapAll('<div class="slmodal__scrollable"></div>')}))}}},template:'<div class="slmodal__content" ng-transclude></div>'}}])}(angular),function(e){function t(n){var o={params:"",modalInstance:null,translateX:0,$stepWrapper:null,stepIndex:0,resetParams:function(){o.stepIndex=o.translateX=0},open:function(e){var t={templateUrl:(o.params=e).templateUrl,windowClass:"sl-modal slmodal "+e.windowsClass,backdrop:"static"};return o.modalInstance=n.open(t),o.modalInstance.opened.then(function(){e.height&&o.setHeight(e.height)}),o.modalInstance.result.finally(function(){o.onClose&&o.onClose()}),o.resetParams(),o.modalInstance},close:function(){return o.modalInstance.close()},nextStep:function(){return o.stepIndex++,o.translateX+=o.$stepWrapper.width(),o.move(o.translateX),o},prevStep:function(){return o.stepIndex--,o.translateX-=o.$stepWrapper.width(),o.move(o.translateX),o},move:function(e){return o.preventClicks(),o.$stepWrapper.css("transform","translateX(-"+e+"px)"),o},refreshPosition:function(){return o.translateX=o.$stepWrapper.width()*o.stepIndex,o.move(o.translateX),o},preventClicks:function(){var e="slmodal__step-wrapper--moving";o.$stepWrapper.addClass(e),setTimeout(function(){o.$stepWrapper.removeClass(e)},400)},setHeight:function(e){setTimeout(function(){return o.$stepWrapper.height(e).find(".slmodal__scrollable").css("max-height",e+"px"),o})}};return o}t.$inject=["$modal"],e.module("Sexlog").service("$slmodal",t)}(angular),function(c){c.module("Sexlog").factory("Socket",["$rootScope","$window","$driveRealtime","$interval","$q","DRIVE_REALTIME",function(i,e,o,r,a,t){function s(e){this.id=null,this.token=null,this.key=null,this.dev=!0,this.cluster="0",c.extend(this,e),this.url=null,this.connected=!1,this.subscribed=!1,this.connectionMetaData={},this.ortc=null,this.channels=[],this.client=null,this.options={retry:!1,retryInterval:1e4,retryRepeat:0}}var l=null;return s.prototype.onDisconnect=c.noop,s.prototype.onDisconnected=c.noop,s.prototype.onException=c.noop,s.prototype.onSubscribed=c.noop,s.prototype.onReconnecting=c.noop,s.prototype.onReconnected=c.noop,s.prototype.onConnected=c.noop,s.prototype.set=function(){c.isDefined(arguments[0])&&c.extend(this,arguments[0])},s.prototype.connect=function(e){var t=this;e=e||{},c.extend(t.options,e);var n=a.defer();return this.key?(this.get().then(function(e){n.resolve(e)}),this.options.retry&&(this.interval=r(function(){t.isConnected()?r.cancel(t.interval):t.get().then(function(e){n.resolve(e)})},t.options.retryInterval,t.options.retryRepeat))):n.reject("Invalid Application Key"),n.promise},s.prototype.get=function(){var n=this,t=a.defer();return o.get().then(function(e){e.setClusterUrl(n.url),e.setId(n.id),e.setConnectionMetadata(c.toJson({token:n.token,cluster:n.cluster})),e.setHeartbeatActive(!0),e.setHeartbeatFails(20),e.setHeartbeatTime(10),e.setConnectionTimeout(2e3),e.setAnnouncementSubChannel(n.cluster.toString()),e.connect(n.key,n.token),e.onConnected=function(e){n.ortc=e,n.connected=!0,t.resolve(n.ortc),n.options.retry&&r.cancel(l),n.onConnected.call(n,n.ortc)},e.onReconnected=function(e){n.ortc=e,n.connected=!0,n.onReconnected.call(n,n.ortc)},e.onReconnecting=function(e){n.reconnecting=!0,n.onReconnecting.call(n,e)},e.onSubscribed=function(e,t){n.subscribed=!0,n.onSubscribed.call(n,e,t)},e.onDisconnected=function(e){n.connected=!1,n.reconnected=!1,n.reconnecting=!1,n.onDisconnected.call(n,e)},e.onDisconnect=function(e){n.connected=!1,n.reconnected=!1,n.reconnecting=!1,n.onDisconnect.call(n,e)},e.onException=function(e,t){n.onException.call(n,e,t)},n.client=e}),t.promise},s.prototype.send=function(e,t,n){this.ortc&&e&&t&&(e=this.parseChannelName(e,n),this.ortc.send(e,c.toJson(t)))},s.prototype.subscribe=function(e,o,t){e=this.parseChannelName(e,t),this.channels.push(e),this.ortc.subscribe(e,!0,function(e,t,n){o.call(s,c.fromJson(n)),i.$$phase||i.$apply()})},s.prototype.unsubscribe=function(e,t){e=this.parseChannelName(e,t),-1!==this.channels.indexOf(e)&&s.ortc&&this.ortc.unsubscribe(e)},s.prototype.isConnected=function(){return!!this.ortc&&this.ortc.getIsConnected()},s.prototype.disconnect=function(){return!!this.ortc&&this.ortc.disconnect()},s.prototype.parseChannelName=function(e,t){return t&&(e="server."+e+":"+this.token,e+="."+this.cluster),e},s}])}(angular),angular.module("Sexlog").directive("spinner",function(){return{restrict:"A",replace:!0,template:function(){return'<div class="spinner"><div class="one"></div><div class="two"></div><div class="three"></div></div>'},link:function(e,t,n){var o,i=n.color,r=n.size;(i||r)&&(o=t.children(),i&&o.css("background-color",i),r&&o.width(r).height(r))}}}),function(f,m){var p="sl-sticky-menu";f.module("Sexlog").directive("slStickyMenu",["$screen",function(d){return{restrict:"A",link:function(e,t,o){var i,r=t.offset().top,a=f.element(m),s=f.element(".sl.navbar").outerHeight(),l=0,c=!1;function n(e){var t,n;o.minWidth&&d.width()<parseInt(o.minWidth)?u(e):(t=s+l,n=a.scrollTop()+t,r+l<n?(c||(e.addClass(p).css("top",t),i.height(e.outerHeight()).show()),c=!0):u(e))}function u(e){c&&(e.removeClass(p).css("top","auto"),i.hide()),c=!1}i=f.element('<div class="sl-stick-menu"></div>').insertAfter(t),a.on("scroll.stickyMenu",function(){n(t)}),e.$on("$screenChange",function(){n(t)}),e.$on("promotionReady",function(e,t){l=t.height}),e.$on("promotionClosed",function(){l=0,c=!1,n(t)})}}}])}(angular,window),angular.module("Sexlog").directive("stopPropagation",function(){return function(e,t,n){t.on(n.stopPropagation,function(e){e.stopPropagation()})}}),angular.module("Sexlog").service("StorageModel",["$http","$q","$url",function(o,i,r){function e(e){return o.delete(r.api("storage/clear/"+e))}return{getItem:function(e){var t=i.defer();return o.get(r.api("storage/get/"+e.toLowerCase())).then(function(e){t.resolve(e.data)}).catch(function(){t.reject()}),t.promise},setItem:function(e,t){var n=i.defer();return o.post(r.api("storage/set/"+e.toLowerCase()),{value:t}).then(function(e){n.resolve(e.data)}).catch(function(){n.reject()}),n.promise},removeItem:e,clear:e}}]),angular.module("Sexlog").factory("SubDomainModel",["BaseModel","$url",function(e,t){return new e("subdomain",{save:{method:"POST",url:t.api("save-cookie")}})}]),angular.module("Sexlog").directive("svgIcon",function(){return{restrict:"EA",templateUrl:function(e,t){return"assets/js/sl/angular/_common/svg-icon/directives/"+t.svgIcon+".html"},replace:!0,link:function(e,t,n){var o=t.find("svg"),i=(o[0].attributes.viewBox?o[0].attributes.viewBox.value:"").split(" "),r=n.width||i[2],a=n.height||i[3],s=n.fill||"#D8D8D8";o.attr("width",r),o.attr("height",a),o.attr("fill",s)}}}),function(c){c.module("Sexlog").directive("tabs",function(){return{restrict:"AC",scope:!0,link:function(e,t,n){var o=t.find("> .panel-tabs a"),i=t.find("> .panel-tabs"),r=t.find("> .panel-panes"),a=null;function s(){var e=i.find("> .active"),t=r.find("> .panel-pane.active");e.removeClass("active"),t.removeClass("active")}function l(e){var t=i.find("[href="+e.hash+"]");a=r.find(e.hash),t.parent().addClass("active"),a.addClass("active")}o.on("click",function(e){e.preventDefault(),s(),l(e.currentTarget)}),c.isUndefined(n.children)&&e.$on("tab.activeTab",function(e,t,n){var o;c.isDefined(t)&&(s(),l({hash:t})),c.isDefined(n)&&(a.find(".panel-tabs > .active").removeClass("active"),a.find(".panel-panes > .panel-pane.active").removeClass("active"),o=n,a.find(".panel-tabs [href="+o+"]").parent().addClass("active"),a.find(".panel-panes "+o).addClass("active"))})}}})}(angular),angular.module("Sexlog").component("termsComponent",{bindings:{langs:"<"},template:'\n        <div class="modal-header">\n            <button type="button" class="permission-btn permission-btn-back" data-dismiss="modal" ng-click="$ctrl.close()">\n            <i></i>\n            </button>\n            <h4 ng-bind="$ctrl.langs[15]"></h4>\n        </div>\n        <div class="terms">\n            <div class="terms__image--div">\n                <img src="assets/images/modules/terms/term-pub.jpg" class="terms__image--img" />\n            </div> \n            <h3 class="terms__h3" ng-bind="$ctrl.langs[0]"></h3>\n            <ul class="terms__ul">\n                <li ng-bind="$ctrl.langs[1]"> </li>\n                <li ng-bind="$ctrl.langs[2]"> </li>\n                <li ng-bind="$ctrl.langs[3]"> </li>\n                <li ng-bind="$ctrl.langs[4]"> </li>\n                <li ng-bind="$ctrl.langs[5]"> </li>\n                <li ng-bind="$ctrl.langs[6]"> </li>\n                <li ng-bind="$ctrl.langs[7]"> </li>\n                <li ng-bind="$ctrl.langs[8]"> </li>\n                <li ng-bind="$ctrl.langs[9]"> </li>\n                <li ng-bind="$ctrl.langs[10]"></li>\n                <li ng-bind="$ctrl.langs[11]"></li>\n                <li ng-bind="$ctrl.langs[12]"></li>\n                <li ng-bind="$ctrl.langs[13]"></li>\n                <li ng-bind="$ctrl.langs[14]"></li>\n            </ul>\n        \n            <span ng-show="$ctrl.isLoading" \n                    class="report-flow__spinner spinner" \n                    spinner  \n                    data-size="16">\n            </span>\n        </div>\n\t\t\t\t',controller:function(){function t(e){_classCallCheck(this,t),this.$terms=e,this.longs=this.langs}return t.$inject=["$terms"],_createClass(t,[{key:"$onInit",value:function(){this.isLoading=!1}},{key:"close",value:function(){this.$terms.closeModal()}}]),t}()}),function(e){var t=function(){function t(e){_classCallCheck(this,t),this.$http=e}return t.$inject=["$http"],_createClass(t,[{key:"closeWarningTerms",value:function(){return this.$http.get("service/share/postings-terms/close")}}]),t}();e.module("Sexlog").service("$sendCloseTerms",t)}(angular),angular.module("Sexlog").factory("$terms",["$modal","$sendCloseTerms",function(o,e){var i={modal:function(e,t){t&&i.sendCloseFromTop();var n={template:"<terms-component langs='".concat(JSON.stringify(e),"'></terms-component>"),backdrop:"static",windowClass:"sl-modal sl-terms",keyboard:!1,size:"sm",showBackButton:!0};return i.modalInstance=o.open(n),i.modalInstance},sendCloseFromTop:function(){e.closeWarningTerms()},closeModal:function(){i.modalInstance.close()}};return i}]),angular.module("Sexlog").factory("$throttle",["$timeout",function(l){return function(o,i,r){var a,s;return i=i||250,function(){var e=r||this,t=Date.now(),n=arguments;a&&t<a+i?(l.cancel(s),s=l(function(){a=t,o.apply(e,n)},i)):(a=t,o.apply(e,n))}}}]),angular.module("Sexlog").filter("toArray",function(){return function(t,e){return t?!1===e?Object.keys(t).map(function(e){return t[e]}):Object.keys(t).map(function(e){return Object.defineProperty(t[e],"$key",{enumerable:!1,value:e})}):t}}),function(e){e.module("Sexlog").component("tooltipComponent",{bindings:{message:"@",type:"@",timer:"<"},template:' \n            <div class="sl-tooltip" ng-class="[$ctrl.closeAnimation, $ctrl.tooltipClass, $ctrl.hasBanner]">\n                <div class="sl-tooltip__close" ng-if="::!$ctrl.timer" ng-click="$ctrl.closeBtn()">&times;</div>\n                <svg class="sl-tooltip__icon" ng-cloak>\n                    <use xlink:href="" ng-attr-xlink:href="{{$ctrl.tooltipSvg}}"></use>\n                </svg>\n                <div class="sl-tooltip__message" ng-bind="::$ctrl.message"></div>\n                <div class="sl-tooltip__progress-bar" ng-if="::$ctrl.timer"></div>\n            </div>\n                ',controller:function(){function o(e,t,n){_classCallCheck(this,o),this.$tooltip=e,this.$timeout=t,this.$animatedContainer=n}return o.$inject=["$tooltip","$timeout","$animatedContainer"],_createClass(o,[{key:"$onInit",value:function(){this.hasBanner=e.element(".sl-campaign").length?"sl-tooltip__banner":"",this.tooltipClass="sl-tooltip__".concat(this.type),this.tooltipSvg="assets/icons/tooltip/tooltip.svg?#tooltip-".concat(this.type,"-icon"),this.timer&&(this.startProgressBarAnimation(),this.startCloseTimer())}},{key:"closeBtn",value:function(){var e=this;this.closeAnimation="tooltip__close-animation",this.$timeout(function(){e.$tooltip.close()},500)}},{key:"getTimer",value:function(){return.9*this.message.trim().length}},{key:"startCloseTimer",value:function(){var e=this;this.$timeout(function(){e.$tooltip.close()},120*this.getTimer()),this.$timeout(function(){e.closeAnimation="tooltip__close-animation"},110*this.getTimer())}},{key:"startProgressBarAnimation",value:function(){var e=this;this.$timeout(function(){e.$animatedContainer.progressBar(".sl-tooltip__progress-bar",e.getTimer())})}}]),o}()})}(angular),function(r){r.module("Sexlog").directive("slTooltip",["$detection",function(i){return{restrict:"A",compile:function(e,t){if(!i.isMobile()||t.force)return function(e,n,o){o.$observe("title",function(e){var t={title:e,html:o.html};i.isMobile()&&r.extend(t,{trigger:"click"}),n.data("bs.tooltip",null),n.tooltip(t)}),e.$on("$destroy",function(){n.tooltip("destroy")})}}}}])}(angular),function(i){var e=function(){function n(e,t){_classCallCheck(this,n),this.$compile=e,this.$rootScope=t}return n.$inject=["$compile","$rootScope"],_createClass(n,[{key:"createElement",value:function(e,t,n){this.hasTooltip()&&this.close();var o=i.element('\n                <tooltip-component \n                    message="'.concat(e,'"\n                    type="').concat(n,'"\n                    timer="').concat(t,'">\n                </tooltip-component >\n            '));i.element(document.body).prepend(this.$compile(o)(this.$rootScope.$new(!0)))}},{key:"showErrorMessage",value:function(e,t){this.createElement(e,t,"error")}},{key:"showSuccessMessage",value:function(e,t){this.createElement(e,t,"success")}},{key:"showAlertMessage",value:function(e,t){this.createElement(e,t,"alert")}},{key:"close",value:function(){i.element("tooltip-component").remove()}},{key:"hasTooltip",value:function(){return i.element("tooltip-component").length}}]),n}();i.module("Sexlog").service("$tooltip",e)}(angular),angular.module("Sexlog").component("topTitle",{bindings:{title:"@",button:"@"},templateUrl:"template/assets/js/sl/angular/_common/top-title/components/top-title.html",controller:["$window",function(e){this.backPage=function(){e.history.back()}}]}),function(e){e.module("Sexlog").factory("$uniquehash",["$ecookie","$q",function(o,i){function d(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function f(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function m(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function p(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function g(e,t){return[e[0]^t[0],e[1]^t[1]]}function h(e){return e=g(e,[0,e[0]>>>1]),e=g(e=f(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=g(e=f(e,[3301882366,444984403]),[0,e[0]>>>1])}return function(){return o("rivest").catch(function(){var t=i.defer(),e=[];e.push((new Date).toISOString()),e.push(Math.random()),e.push(Math.random()+(new Date).toISOString());var n=function(e,t){t=t||0;for(var n=(e=e||"").length%16,o=e.length-n,i=[0,t],r=[0,t],a=[0,0],s=[0,0],l=[2277735313,289559509],c=[1291169091,658871167],u=0;u<o;u+=16)a=[255&e.charCodeAt(u+4)|(255&e.charCodeAt(u+5))<<8|(255&e.charCodeAt(u+6))<<16|(255&e.charCodeAt(u+7))<<24,255&e.charCodeAt(u)|(255&e.charCodeAt(u+1))<<8|(255&e.charCodeAt(u+2))<<16|(255&e.charCodeAt(u+3))<<24],s=[255&e.charCodeAt(u+12)|(255&e.charCodeAt(u+13))<<8|(255&e.charCodeAt(u+14))<<16|(255&e.charCodeAt(u+15))<<24,255&e.charCodeAt(u+8)|(255&e.charCodeAt(u+9))<<8|(255&e.charCodeAt(u+10))<<16|(255&e.charCodeAt(u+11))<<24],a=m(a=f(a,l),31),i=d(i=m(i=g(i,a=f(a,c)),27),r),i=d(f(i,[0,5]),[0,1390208809]),s=m(s=f(s,c),33),r=d(r=m(r=g(r,s=f(s,l)),31),i),r=d(f(r,[0,5]),[0,944331445]);switch(a=[0,0],s=[0,0],n){case 15:s=g(s,p([0,e.charCodeAt(u+14)],48));break;case 14:s=g(s,p([0,e.charCodeAt(u+13)],40));break;case 13:s=g(s,p([0,e.charCodeAt(u+12)],32));break;case 12:s=g(s,p([0,e.charCodeAt(u+11)],24));break;case 11:s=g(s,p([0,e.charCodeAt(u+10)],16));break;case 10:s=g(s,p([0,e.charCodeAt(u+9)],8));break;case 9:s=f(s=g(s,[0,e.charCodeAt(u+8)]),c),r=g(r,s=f(s=m(s,33),l));break;case 8:a=g(a,p([0,e.charCodeAt(u+7)],56));break;case 7:a=g(a,p([0,e.charCodeAt(u+6)],48));break;case 6:a=g(a,p([0,e.charCodeAt(u+5)],40));break;case 5:a=g(a,p([0,e.charCodeAt(u+4)],32));break;case 4:a=g(a,p([0,e.charCodeAt(u+3)],24));break;case 3:a=g(a,p([0,e.charCodeAt(u+2)],16));break;case 2:a=g(a,p([0,e.charCodeAt(u+1)],8));break;case 1:a=f(a=g(a,[0,e.charCodeAt(u)]),l),i=g(i,a=f(a=m(a,31),c))}return i=d(i=g(i,[0,e.length]),r=g(r,[0,e.length])),r=d(r,i),i=d(i=h(i),r=h(r)),r=d(r,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(r[0]>>>0).toString(16)).slice(-8)+("00000000"+(r[1]>>>0).toString(16)).slice(-8)}(e.join("~~~"),31);return o("rivest",n).then(function(e){t.resolve(e)}),t.promise})}}])}(angular),function(e){var t=function(){function t(e){_classCallCheck(this,t),this._uploading=!1,this._complete=!1,this._progress=0,this.$q=e}return t.$inject=["$q"],_createClass(t,[{key:"upload",value:function(e){var t=this,n=e.url,o=e.data,i=e.key,r=this.$q.defer(),a=new FormData,s=new XMLHttpRequest;return a.append(i||"files",o),s.upload.onprogress=function(e){t.onProgress(e),r.notify(t._progress)},s.upload.onerror=function(e){t.onError(),r.reject(e)},s.addEventListener("readystatechange",function(){if(4===s.readyState){t.onLoad();var e={};try{e=JSON.parse(s.response)}catch(e){}e.index=o.index,e.result&&!e.result.returncode?r.resolve(e):r.reject(e)}}),s.open("POST",n),s.send(a),this._progress=0,this._uploading=!0,this._complete=!1,r.promise}},{key:"onLoad",value:function(){this._uploading=!1,this._complete=!0,this._progress=100}},{key:"onProgress",value:function(e){this._progress=Math.round(100*e.loaded/e.total)}},{key:"onError",value:function(){this._progress=0,this._complete=!1,this._uploading=!1}},{key:"uploading",get:function(){return this._uploading}},{key:"progress",get:function(){return this._progress}},{key:"complete",get:function(){return this._complete}}]),t}();e.module("Sexlog").service("$upload",t)}(angular),function(r){r.module("Sexlog").factory("$url",["$window",function(i){function t(e){var t,n=window.location.protocol+"//"+window.location.host+"/",o=[],i=_createForOfIteratorHelper(window.location.pathname.split("/"));try{for(i.s();!(t=i.n()).done;){var r=t.value;r.trim()&&o.push(r)}}catch(e){i.e(e)}finally{i.f()}for(var a=0,s=o;a<s.length;a++){var l=s[a];null!==l.match(/^(sexlog_v12|accounts|chat|sexlogx|revista)$/)&&l!==e&&(n+=(_readOnlyError("baseUrl"),l+"/"))}return n}var o={base:function(e){return t(["accounts","chat"])+e},baseAccounts:function(e){return t()+"accounts/"+e},baseJsCDN:function(e){return t()+"/js/"+e},assets:function(e){return t()+"/assets/"+e},api:function(e){return o.base("service/"+e)},template:function(e){return o.api(e+"/template")},templateKey:function(e,t){return o.api(e+"?templateKey="+t)},referrer:function(){return document.referrer},redirect:function(e){i.location.href=e},reload:function(e){e?o.redirect(e):i.location.reload()},path:function(){return i.location.pathname},href:function(e){return e?i.location.href.replace(i.location.search,"")+e:i.location.href},customParams:function(e,t){var n=e+(-1!==e.indexOf("?")?"&":"?");return n+=t?r.param(t):"",decodeURIComponent(n)},toQueryString:function(e){return"?"+decodeURIComponent(r.param(e))},pushState:function(e,t,n){i.history.pushState(e,t,o.href(n))},replaceState:function(e,t,n){i.history.replaceState(e,t,o.href(n))},getCDN:function(){return r.element("meta[name=cdnbase]").attr("content")},removeUrlQueryString:function(){return i.history.replaceState({},"Sexlog",o.href(" "))},changeUrlQueryString:function(e){return i.history.replaceState({},"Sexlog",e)},getQueryString:function(){var e,t,n=i.location.href.split("?"),o={};return 1<n.length&&(1<(e=n[1].split("&")).length?e.forEach(function(e){var t=e.split("=");o[t[0]]=!(1<t.length)||t[1]}):(t=e[0].split("="),o[t[0]]=!(1<t.length)||t[1])),o||!1},removeSearch:function(e){return e.split("?")[0]},avatar:function(e,t){return o.base("avatar/"+e+"/"+t)},absolute:function(){return i.location.href},openUrlNewTab:function(e){return window.open(e,"_blank")}};return o}])}(angular),angular.module("Sexlog").directive("addressnum",["$cacheFactory","$timeout","SubscribeModel",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){function i(e){return e?(o.$setValidity("required",!0),0!==parseInt(e)?(o.$setValidity("addressnum",!0),e):void o.$setValidity("addressnum",!1)):(o.$setValidity("required",!1),e)}o.$formatters.push(i),o.$parsers.unshift(i)}}}]),angular.module("Sexlog").directive("cpf",["$cacheFactory","$timeout","SubscribeModel",function(e,t,n){var r,a,s;return{restrict:"A",require:"ngModel",link:function(e,t,n,i){function o(e){if(!e)return i.$setValidity("required",!1),e;i.$setValidity("required",!0);var t=e.replace(".","");if((t=(t=t.replace(".","")).replace("-","")).length<11)i.$setValidity("cpf",!1);else if("00000000000"!==t&&"11111111111"!==t&&"22222222222"!==t&&"33333333333"!==t&&"44444444444"!==t&&"55555555555"!==t&&"66666666666"!==t&&"77777777777"!==t&&"88888888888"!==t&&"99999999999"!==t){r=t.substring(0,9),a=t.substring(9),s=0;for(var n=10;1<n;n--)s+=r.charAt(10-n)*n;if((s%11<2?0:11-s%11)===parseInt(a.charAt(0))){r=t.substring(0,10),s=0;for(var o=11;1<o;o--)s+=r.charAt(11-o)*o;if((s%11<2?0:11-s%11)===parseInt(a.charAt(1)))return i.$setValidity("cpf",!0),e;i.$setValidity("cpf",!1)}else i.$setValidity("cpf",!1)}else i.$setValidity("cpf",!1)}i.$formatters.push(o),i.$parsers.unshift(o)}}}]),angular.module("Sexlog").directive("ddd",["$cacheFactory","$timeout","SubscribeModel",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){function i(e){if(!e)return o.$setValidity("required",!1),e;o.$setValidity("required",!0);var t=e;if(2===t.length){var n=!1;if(angular.forEach([{ddd:"11"},{ddd:"12"},{ddd:"13"},{ddd:"14"},{ddd:"15"},{ddd:"16"},{ddd:"17"},{ddd:"18"},{ddd:"19"},{ddd:"21"},{ddd:"22"},{ddd:"24"},{ddd:"27"},{ddd:"28"},{ddd:"31"},{ddd:"32"},{ddd:"33"},{ddd:"34"},{ddd:"35"},{ddd:"37"},{ddd:"38"},{ddd:"41"},{ddd:"42"},{ddd:"43"},{ddd:"44"},{ddd:"45"},{ddd:"46"},{ddd:"47"},{ddd:"48"},{ddd:"49"},{ddd:"51"},{ddd:"53"},{ddd:"54"},{ddd:"55"},{ddd:"61"},{ddd:"62"},{ddd:"63"},{ddd:"64"},{ddd:"65"},{ddd:"66"},{ddd:"67"},{ddd:"68"},{ddd:"69"},{ddd:"71"},{ddd:"73"},{ddd:"74"},{ddd:"75"},{ddd:"77"},{ddd:"79"},{ddd:"81"},{ddd:"82"},{ddd:"83"},{ddd:"84"},{ddd:"85"},{ddd:"86"},{ddd:"87"},{ddd:"88"},{ddd:"89"},{ddd:"91"},{ddd:"92"},{ddd:"93"},{ddd:"94"},{ddd:"95"},{ddd:"96"},{ddd:"97"},{ddd:"98"},{ddd:"99"}],function(e){e.ddd===t&&(n=!0)}),n)return o.$setValidity("ddd",!0),e;o.$setValidity("ddd",!1)}else o.$setValidity("ddd",!1)}o.$formatters.push(i),o.$parsers.unshift(i)}}}]),angular.module("Sexlog").directive("fullname",["$cacheFactory","$timeout","SubscribeModel",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){function i(e){return!e||1===e.split(" ").length?o.$setValidity("required",!1):o.$setValidity("required",!0),e}o.$formatters.push(i),o.$parsers.unshift(i)}}}]),angular.module("Sexlog").directive("phone",["$cacheFactory","$timeout","SubscribeModel",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){function i(e){if(!e)return o.$setValidity("required",!1),e;o.$setValidity("required",!0);var t=e;if(t.length<7||9<t.length)o.$setValidity("phone",!1);else{if(0!==parseInt(t))return o.$setValidity("phone",!0),e;o.$setValidity("phone",!1)}}o.$formatters.push(i),o.$parsers.unshift(i)}}}]),angular.module("Sexlog").directive("state",["$cacheFactory","$timeout","SubscribeModel",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){function i(e){if(!e)return o.$setValidity("required",!1),e;o.$setValidity("required",!0);var t=e;if(2===t.length){var n=!1;if(angular.forEach([{state:"AC"},{state:"AL"},{state:"AP"},{state:"AM"},{state:"BA"},{state:"CE"},{state:"DF"},{state:"ES"},{state:"GO"},{state:"MA"},{state:"MT"},{state:"MS"},{state:"MG"},{state:"PA"},{state:"PB"},{state:"PR"},{state:"PE"},{state:"PI"},{state:"RJ"},{state:"RN"},{state:"RS"},{state:"RO"},{state:"RR"},{state:"SC"},{state:"SP"},{state:"SE"},{state:"TO"}],function(e){e.state===t.toUpperCase()&&(n=!0)}),n)return o.$setValidity("state",!0),e;o.$setValidity("state",!1)}else o.$setValidity("state",!1)}o.$formatters.push(i),o.$parsers.unshift(i)}}}]),angular.module("Sexlog").directive("zipcode",["$cacheFactory","$timeout","SubscribeModel",function(e,t,n){return{restrict:"A",require:"ngModel",link:function(e,t,n,o){function i(e){if(!e)return o.$setValidity("required",!1),e;o.$setValidity("required",!0);var t=e;if(t.length<7)o.$setValidity("zipcode",!1);else{if(0!==parseInt(t))return o.$setValidity("zipcode",!0),e;o.$setValidity("zipcode",!1)}}o.$formatters.push(i),o.$parsers.unshift(i)}}}]),function(o){o.module("Sexlog").factory("$validator",function(){return{email:function(e){return t=e,(n=document.createElement("input")).type="email",n.value=o.trim(t),o.isFunction(n.checkValidity)?n.checkValidity():/\S+@\S+\.\S+/.test(t);var t,n}}})}(angular),angular.module("Sexlog").directive("slVideoInline",["$url",function(n){return{restrict:"A",replace:!0,template:function(e,t){return'<div class="embed-responsive embed-responsive-16by9"><iframe src="{url}" allowfullscreen></div>'.replace("{url}",n.api("embed/video/"+t.slVideoInline))}}}]),function(r,n){r.module("Sexlog").factory("$webpage",["$meta",function(t){var i={title:function(e){return r.isDefined(e)&&(n.title=e),n.title},meta:function(e){return t.get(e)||""},getScripts:function(){return[].map.call(document.querySelectorAll("script[src]"),function(e){return e.src})},getStyles:function(){return[].map.call(document.querySelectorAll('link[type="text/css"]'),function(e){return e.href})},getUnloadedAssets:function(e){var t=i.getScripts(),n=i.getStyles(),o=t.concat(n);return e.filter(function(t){return!o.filter(function(e){return r.isObject(t)?-1!==e.indexOf(t.url):-1!==e.indexOf(t)}).length})},getAssetsToLoad:function(e,t){return i.getUnloadedAssets(e).map(function(e){return r.isObject(e)&&e.external?e.url:t+e})},fixLinks:function(){r.element("a[href]:not([target])").attr("target","_self")}};return i}])}(angular,document),function(o,i){o.module("Sexlog").factory("WebsocketService",function(){var n,t=[];return{connect:function(e){return n=n||new i(e),this},send:function(e){return o.isObject(e)&&(e=JSON.stringify(e)),0===n.readyState?(t.push(e),n.onopen=function(){t.forEach(function(e){n.send(e)}),t=[]}):n.send(e),this},onmessage:function(t){n.onmessage=function(e){return t(JSON.parse(e.data)),this}},close:function(){n.close(),n=null}}})}(window.angular,window.WebSocket),function(t,a){t.module("Sexlog").config(["$provide",function(e){e.decorator("$window",["$delegate",function(e){return t.extend(e,{popup:function(e,t,n,o){n=n||600,o=o||600;var i=screen.width/2-n/2,r=screen.height/2-o/2;return a.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+o+", top="+r+", left="+i)}}),e}])}])}(angular,window),function(e,n){e.module("Sexlog").directive("slZendeskReport",function(){return{restrict:"A",link:function(e,t){t.on("click",n.Zenbox.render)}}})}(angular,window),String.prototype.bool=function(){return!!this&&(-1===["f","false","undefined","null","0"].indexOf(this)&&!!this)};