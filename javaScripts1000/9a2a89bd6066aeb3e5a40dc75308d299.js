(function(){this.Blue=this.Blue||{},this.Blue.version=this.Blue.version||{},this.Blue.buildDate=this.Blue.buildDate||{},this.Blue.buildHash=this.Blue.buildHash||{},this.Blue.version["blue/main"]="2.36.0",this.Blue.buildDate["blue/main"]="2021-06-08T16:13:53.490Z",this.Blue.buildHash["blue/main"]="0ae8673"}).call(this),requirejs.config({waitSeconds:60,map:{"*":{"mout/random/random":"blue/random"}}}),define("blue/config",(function(){})),function(){this.Blue||(this.Blue={version:{},buildDate:{},buildHash:{}}),this.Blue.network={stats:{speed:0,isOnline:!0}},this.Blue.minified=function e(){return e.toString().length<60}(),define("blue/index",[],(function(){return this.Blue})),this.Blue.status={applicationLoaded:new function(){var e=!1,t=[];return{then:function(n){void 0!==n&&"function"!=typeof n||(e&&n?n.call(this):t.push(n))},resolve:function(){return t&&t.forEach((function(e){e.call(this)})),t=[],e=!0,this}}}}}.call(),define("blue/as/serializable",[],(function(){"use strict";return function(e){this.toJSON=e||function(){return"missing serializer"},this.toString=function(){return this.toJSON()}}})),define("blue/root",[],(function(){return function(){return this}.call()})),define("blue/perf",["require","blue/root"],(function(require){"use strict";var data,methods,lastRoute,snapshots,debugRx,traceRx,v="1.2.1",root=require("blue/root"),noop=function(){return noop},perf=root.performance||{},perfNow=perf.now&&perf.now.bind(perf),perfMark=perf.mark?perf.mark.bind(perf):noop,getDtm=perfNow||Date.now.bind(Date),dtmCnt=0,dtmStart=getDtm(),dtmLastEvent=dtmStart,dtmLastRoute=dtmStart,options={},originals={console:{},func:{}},consoleLevels={none:7,error:6,warn:5,info:4,log:3,debug:2,trace:1,all:0},routeHistory=[],ui,pad=function(e,t,n){return(new Array(t||0).join(n||" ")+e).slice(-t)},formatNumber=function(e,t){return e.toFixed(t||0).replace(/(\d)(?=(\d{3})+$)/g,"$1,")},internals={console:function(e,t){(originals.console[e]||root.console[e]||noop).apply(root.console,t)},setTimeout:function(){return(originals.setTimeout||root.setTimeout).apply(root,arguments)},setInterval:function(){return(originals.setInterval||root.setInterval).apply(root,arguments)}},getObject=function(e,t,n){return e[t]&&"function"!=typeof e[t]?e[t]:e[t]=n},buildTree=function(e,t){var n=""+t.shift();e[n]=getObject(e,n,{_cnt:0,_time:0}),e[n]._cnt++,t.length&&buildTree(e[n],t)},addTime=function(e,t,n,r){var o=""+t.shift();e[o]._time+=n,t.length?addTime(e[o],t,n,r):r&&delete e[o]},getRoutes=function(e){var t=function(e,n){var r,o,i,s=0;for(r in e)switch(r){case"_cnt":case"_time":break;case"*:cnt":case"*:ms":n[r]=e[r];break;default:s++,i=(o=e[r])._time?" | "+formatNumber(o._time)+"ms ":" ",n["["+r+"] "+formatNumber(o._cnt)+i]=t(o,{})}return s?n:""};return e?t(data.routes[e],{}):data.routes},resetRoutes=function(e){e?delete data.routes[e]:data.routes={}},getLeaked=function(){var e,t,n,r,o,i,s,a={"*":0};for(e in data.track)if("*"!==e&&-1===e.indexOf("â¡"))for(i in a[e]=0,t=e+" â¡",n=data.track[t],r=getObject(a,t,{}),n)(s=n[i]).history!==routeHistory.length&&(o=getObject(r,s.history+" - "+routeHistory[s.history-1],{}),a[e]++,a["*"]++,o[i]=s);return a},getHooks=function(){var e,t,n={"*":0},r=jQuery&&jQuery._data_priv_cache||{};return Object.keys(r).forEach((function(o){(e=r[o]).events&&(t=getObject(n,o,{}),Object.keys(e.events).forEach((function(r){t[r]=e.events[r][0].handler,n["*"]++})))})),n},getTimers=function(){var e,t=0,n=originals.setIntervalIndex,r=originals.setTimeoutIndex,o={setIntervals:n,setTimeouts:r};for(e in n)isNaN(e)||(t+=1e3/n[e].interval);return o.intervalsPerSecond=t,r.timeline.unshift(0),r.timeline.length>5&&r.timeline.pop(),t=r.timeline.reduce((function(e,t){return e+t}),0)/r.timeline.length*2,o.timeoutsPerSecond=t,o},track=function(e,t,n){var r=""+t,o=e+" â¡",i=getObject(data.track,e,0),s=getObject(data.track,o,{}),a=s[r];data.track[e]=i,n?(a?internals.console("error",["tracked item overwritten",e,t,n]):(data.track["*"]++,data.track[e]++),s[r]={ref:n,history:routeHistory.length,dtm:getDtm()}):(a?(data.track["*"]--,data.track[e]--):internals.console("warn",["tracked item destroyed multiple times",e,t,n]),delete s[r])},test=function(e,t,n){var r,o;for(r=e.length;r--;)switch(typeof(o=e[r])){case"object":if(o.test(t))return!0;break;case"function":if(o(t,n))return!0}return!1},snapshot=function(e){var t={};if(e?t[e]=getRoutes(e):t=getRoutes(),options.output)if(e){var n=getLeaked(),r=getHooks(),o=getTimers(),i={log:"background:#eee;",info:"background:#cff;border:1px solid #999;padding: 0 4px;",warn:"background:#ffc;border:1px solid #999;padding: 0 4px;",error:"background:#fcc;border:1px solid #999;padding: 0 4px;"},s=["%c!PERF/SNAPSHOT #"+routeHistory.length+"%c %c"+formatNumber(t[e]["*:cnt"])+"%c %c"+(options.lifecycle?formatNumber(data.track["*"]):"-")+"%c %c"+(options.lifecycle?formatNumber(n["*"]):"-")+"%c %c"+(options.hooks?formatNumber(r["*"]):"-")+"%c %c"+e,i.log,"",i.info,"",i.warn,"",i.error,"",i.error,"",i.log];internals.console("groupCollapsed",s),internals.console("log",["%c!PERF/EVENTS:  %s events   %O","background:#cff;",pad(formatNumber(t[e]["*:cnt"]),7),t[e]]),options.lifecycle&&internals.console("log",["%c!PERF/TRACKED: %s items    %O","background:#ffc;",pad(formatNumber(data.track["*"]),7),data.track]),options.lifecycle&&internals.console("log",["%c!PERF/SUSPECT: %s items    %O","background:#fcc;",pad(formatNumber(n["*"]),7),n]),options.hooks&&internals.console("log",["%c!PERF/HOOKS: %s hooks    %O","background:#fcc;",pad(formatNumber(r["*"]),7),r]),options.timers&&internals.console("log",["%c!PERF/TIMERS:  %s timers/s %O","background:#fcc;",pad(formatNumber(o.timeoutsPerSecond+o.intervalsPerSecond),7),o]),options.timeline&&internals.console("log",["%c!PERF/TIMELINE:%s events   %O","background:#cfc;",pad(formatNumber(data.times["*"]),7),data.times]),internals.console("groupEnd"),data.times={"*":0}}else internals.console("log",["%c!PERF/SNAPSHOT: %d events\n%O","background:#cfc;",t["*"],t]);snapshots.push(t),resetRoutes(e)},lastRender,init=!0,waitingTO,waiting=0,getHash=function(){return document.location.hash||"#"},hasRouteChanged=function(e){return e!==getHash()},calcSeq=function(e){var t,n,r,o,i=e.map((function(e){return{start:e.start,end:e.start+e.ms}}));for(i.sort((function(e,t){return e.start-t.start}));o!==i.length;)for(o=r=i.length;r--;)r&&(t=i[r])&&(n=i[r-1])&&t.start<n.end&&(n.end=Math.max(t.end,n.end),i.splice(r,1));return i.reduce((function(e,t){return e+t.end-t.start}),0)},countAlwaysOn=function(){var e,t,n,r,o=arguments.length,i=[],s=this.bucket,a=getHash(),u=getDtm(),c=function(e){var t;for(t in data.perf.complete=e,data.perf.ms=Math.round((e&&lastRender?lastRender:u)-data.perf.start),data.perf.buckets)data.perf.buckets[t].ms=calcSeq(data.perf.buckets[t].details);try{methods.handler(data.perf)}catch(e){}if(options.output){var n=e?"%c!PERF/COMPLETE: %d":"%c!PERF/ABORT: %d",r=e?"background:#cfc;":"background:#ffc;";internals.console("groupCollapsed",[n,r,data.perf.ms]),internals.console("log",["%c!PERF/SUMMARY: %O","background:#cff;",data.perf]),internals.console("groupEnd")}};if(a!==lastRoute&&(lastRoute&&!data.perf.ms&&c(!waiting),data.perf={buckets:{},first:init,key:a.split(";")[0],params:a.split(";").slice(1),start:init&&!lastRoute&&u<1e9?0:u,dtm:Date.now()},lastRoute=a,lastRender=0,waiting=0),!s)return noop;for(clearTimeout(waitingTO);o--;)i[o]=""+arguments[o];return r=i.join("/"),e=getObject(data.perf.buckets,s,{msSum:0,details:[]}),n={start:Math.round(u-data.perf.start),key:r},e.details.push(n),waiting++,init=!1,function(){if(t)throw new Error('blue/perf: "done" function can only be called once');if(!hasRouteChanged(a)){var r=getDtm(),o=r-u;t=1,n.ms=Math.round(o),e.msSum+=n.ms,waiting--,"render"===s&&(lastRender=r),waiting||data.perf.ms||(waitingTO=internals.setTimeout((function(){hasRouteChanged(a)||c(!0)}),500))}}},count=function(){var x,route,key,result,me=this,dtmNow=getDtm(),keys=[],keys2=[],routeName=getHash();for(routeName!==lastRoute&&(lastRoute&&options.auto&&snapshot(lastRoute),routeHistory.push(routeName),lastRoute=routeName,dtmLastRoute=dtmNow),x=arguments.length;x--;)keys[x]=keys2[x]=""+arguments[x];return key=keys.join(" "),options.lifecycle&&me.id&&track(keys[0],me.id,me.ref),options.timestamp&&internals.console("timeStamp",["[START] "+keys2.join("/")]),options.mark&&perfMark("[START] "+keys2.join("/")),route=getObject(data.routes,routeName,{"*:cnt":0,"*:ms":0}),buildTree(route,keys),route["*:cnt"]++,data.all["*:cnt"]++,options.timeline&&me.time&&(data.times["[ "+dtmCnt+++" | "+(dtmNow-dtmLastRoute)+" ] "+key]={event:key,fromStart:dtmNow-dtmStart,fromRoute:dtmNow-dtmLastRoute,idle:dtmNow-dtmLastEvent},data.times["*"]++,dtmLastEvent=dtmNow),options.debug&&test(debugRx,key,me.ref)&&eval("debugger"),options.trace&&(result=test(traceRx,key,me.ref))&&internals.console("trace",["%c!PERF/LOG: %s","background:#cfc;",key,result]),dtmNow=getDtm(),function(e){var t=getDtm()-dtmNow;if(!keys2)throw new Error('blue/perf: "done" function can only be called once');options.timestamp&&internals.console("timeStamp",["[FINISH] "+keys2.join("/")]),options.mark&&perfMark("[FINISH] "+keys2.join("/")),route["*:ms"]+=t,addTime(route,keys2,t,e>t),keys2=0}},timerUpdate=function(e,t,n){n?(e.total++,e["*"]++,e.timeline[0]++,e[t]=n):e[t]&&(e["*"]--,delete e[t])},timerInterceptor=function(){originals.setTimeout||(originals.setInterval=root.setInterval,originals.clearInterval=root.clearInterval,root.setInterval=function(e,t){var n=originals.setInterval.apply(root,arguments);return timerUpdate(originals.setIntervalIndex,n,{fn:e,interval:t}),n},root.clearInterval=function(e){timerUpdate(originals.setIntervalIndex,e),originals.clearInterval.apply(root,arguments)},originals.setTimeout=root.setTimeout,originals.clearTimeout=root.clearTimeout,root.setTimeout=function(e,t){var n=originals.setTimeout.call(root,(function(){timerUpdate(originals.setTimeoutIndex,n),e()}),t);return timerUpdate(originals.setTimeoutIndex,n,{fn:e,timeout:t}),n},root.clearTimeout=function(e){timerUpdate(originals.setTimeoutIndex,e),originals.clearTimeout.apply(root,arguments)})},consoleInterceptor=function(){var e,t=function(e){var t=consoleLevels[e]||0;originals.console[e]=root.console[e]||noop,root.console[e]=function(){options.enabled&&t&&options.console>t||originals.console[e].apply(root.console,arguments)}};if(root.console&&!originals.console.log)for(e in root.console)"function"==typeof root.console[e]&&t(e)},functionInterceptor=function(){originals.func.bind||(originals.func.bind=Function.prototype.bind,Function.prototype.bind=function(){var e=methods.count("function","bind",this.toString().slice(0,100)),t=originals.func.bind.apply(this,arguments);return e(),t})},saveOptions=function(){try{localStorage.setItem("blue/perf",JSON.stringify(options))}catch(e){}},applyOptions=function(){methods.count=options.enabled?count:countAlwaysOn,options.enabled&&(options.timers&&timerInterceptor(),options.console&&consoleInterceptor(),options.bind&&functionInterceptor())},updateOptions=function(e){var t;for(t in e)options[t]=e[t];applyOptions(),saveOptions()},loadOptions=function(){try{options=JSON.parse(localStorage.getItem("blue/perf")||"{}")||{}}catch(e){options={}}applyOptions()};return methods={count:countAlwaysOn,enable:function(e){options=e?"object"==typeof e?e:{enabled:!0,auto:!0,output:!0,bind:!0,hooks:!0,lifecycle:!0,mark:!0,timestamp:!0,timers:!0,debug:!0,trace:!0,console:0,timeline:!1}:{},saveOptions()},handler:noop,disable:function(){options={},saveOptions()},updateOptions:updateOptions,showUI:function(){var e,t=this;void 0===ui?(!function(){var e,n,r=function(){var e;for(e in options)$("#blue-perf-option-"+e).prop("checked",options[e])},o=function(e){var n={},r=e.target.getAttribute("option"),o=e.target.checked;"console"===r?($("#blue-perf-options").hide(),$("#blue-perf-console").show(),function(){var e,t="all";for(e in consoleLevels)if(options.console===consoleLevels[e]){t=e;break}$("#blue-perf-console-"+t).prop("checked",!0)}()):(n[r]=o,t.updateOptions(n))},i=function(){var e=$("#blue-perf-options");e.is(":visible")?e.hide():(r(),e.show()),$("#blue-perf-console").hide()},s={SNAPSHOT:function(){t.snapshot(getHash())},RESET:function(){t.reset()},v:i},a=[],u={auto:"Auto-snapshot",output:"Output to console",mark:"Enable perf markers",timestamp:"Output to timeline",bind:"Track bind",hooks:"Track jQuery DOM Hooks",lifecycle:"Track lifecycles",timers:"Track timers",debug:"Dynamic debugging",trace:"Dynamic tracing",console:"Disable console methods",timeline:"Timeline Logging"},c=[],l=[],f="position:fixed;z-index:4294967295;background:#ccc;padding:2px 5px;border-color:#999; border-style:solid;font-size:10px;",p=['<div id="blue-perf-counters" style="'+f+'top:0;left:0;border-width:0 1px 1px 0; border-bottom-right-radius:5px;"></div>','<div id="blue-perf-tools" style="'+f+'top:0;right:0;border-width:0 0 1px 1px;border-bottom-left-radius:5px;">','<input type="checkbox" id="blue-perf-option-enabled" option="enabled"/>','<label for="blue-perf-option-enabled">&nbsp;PERF TOOLS</label>&nbsp;#buttonHTML#',"</div>",'<div id="blue-perf-options" style="'+f+'top:28px;right:5px;border-width:0 0 1px 1px;border-radius:5px;display:none;">#checkHTML#</div>','<div id="blue-perf-console" style="'+f+'top:28px;right:5px;border-width:0 0 1px 1px;border-radius:5px;display:none;"><span>Allow Console Level</span><hr/>#consoleHTML#</div>'];for(e in s)a.push('<button id="blue-perf-button-'+e+'">'+e+"</button>");for(e in u)c.push((n>e?"<hr/>":"")+'<input type="checkbox" id="blue-perf-option-'+e+'" option="'+e+'"/><label for="blue-perf-option-'+e+'">&nbsp;'+u[e]+"</label>"),n=e;for(e in consoleLevels)l.push('<input type="radio" id="blue-perf-console-'+e+'" name="blue-perf-console" value="'+consoleLevels[e]+'"/><label for="blue-perf-console-'+e+'">&nbsp;'+e+"</label>");for(e in c.push('<span style="float:right;">v'+v+"</span>"),$(document.body).append(p.join("").replace(/#buttonHTML#/,a.join("&nbsp;")).replace(/#checkHTML#/,c.join("<br/>")).replace(/#consoleHTML#/,l.join("<br/>"))),$("#blue-perf-option-enabled").on("change",o),$("#blue-perf-console input[name=blue-perf-console]:radio").on("change",(function(e){var n=e.target.value;t.updateOptions({console:parseInt(n,10)}),r()})),$("#blue-perf-console input[name=blue-perf-console]:radio").on("click",i),s)$("#blue-perf-button-"+e).on("click",s[e]);for(e in u)$("#blue-perf-option-"+e).on("change",o);r()}(),ui=internals.setInterval.call(root,(function(){if(options.enabled){var t,n,r,o=['<b style="color:#369;">Events:</b> <span>'+formatNumber(data.all["*:cnt"])+"</span>"];options.lifecycle&&(r=getLeaked(),o.push('<b style="color:#963;">Tracked:</b> <span>'+formatNumber(data.track["*"])+"</span>"),o.push('<b style="color:#933;">Suspect:</b> <span>'+formatNumber(r["*"])+"</span>")),options.timers&&(n=getTimers(),o.push('<b style="color:#933;">Timers / Sec:</b> <span>'+formatNumber(n.timeoutsPerSecond+n.intervalsPerSecond,2)+"</span>")),t=o.join(" | "),e!==t&&($("#blue-perf-counters").html(e=t),$("#blue-perf-counters").show())}else $("#blue-perf-counters").hide()}),500)):(clearInterval(ui),ui=void 0,$("#blue-perf-counters").remove(),$("#blue-perf-tools").remove(),$("#blue-perf-options").remove())},resetRoutes:resetRoutes,reset:function(){data={times:{"*":0},routes:{},all:{"*:cnt":0,"*:ms":0},complete:{},track:{"*":0},perf:{}},originals.setTimeoutIndex={"*":0,total:0,timeline:[0]},originals.setIntervalIndex={"*":0,total:0,timeline:[0]},lastRoute="",snapshots=[],debugRx=[],traceRx=[]},snapshot:snapshot,getRoutes:getRoutes,getLeaked:getLeaked,getHooks:getHooks,getSnapshots:function(){return snapshots},getCount:function(e,t){return(e?data.routes[e]||{"*":0}:data.all)[t||"*"]||0},getTimers:getTimers,debug:function(e){e?debugRx.push(e):internals.console("log",["Example usage:\n\tdebug(/regexp/)\n\tdebug(function (key, ref) { return ref && ref.prop === 'val'; })"])},trace:function(e){e?traceRx.push(e):internals.console("log",["Example usage:\n\ttrace(/regexp/)\n\ttrace(function (key, ref) { return ref && ref.prop === 'val'; })"])}},methods.reset(),loadOptions(),methods})),define("blue/model",["require","./as/serializable","blue/perf"],(function(e){"use strict";var t,n=e("./as/serializable"),r=e("blue/perf"),o=0,i=Object.prototype.hasOwnProperty,s=function(e){return Object.keys(e).length},a=function(e){var t=!this.data.models||!this.data.models[this.id];if(t&&e)throw new Error('"'+e.slice(1)+'" cannot be call on a destroyed model');return t},u=function(e,t){if(e===t&&null!==e&&"object"==typeof e)return!1;if(e===t)return!0;if(e==t||!e||!t||"object"!=typeof e||"object"!=typeof t)return!1;var n,r=0,o=0;for(n in e)if(i.call(e,n)&&++r&&(!i.call(t,n)||!u(e[n],t[n])))return!1;for(n in t)i.call(t,n)&&o++;return!!(r+o)&&r===o},c=function(e){if(null===e||"object"!=typeof e||e.prototype)return e;var t,n;switch(e.constructor){case Array:for(t=[],n=e.length;n--;)t[n]=c(e[n]);return t;case Date:return new Date(+e);case RegExp:return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":""));default:for(n in t={},e)i.call(e,n)&&(t[n]=c(e[n]));return t}},l=function(e,t,n){for(var r;void 0!==(r=t.shift());){if(n&&void 0!==e[r]&&"object"!=typeof e[r])throw new Error("cannot add property to non-object");e=n?e[r]||(e[r]={}):e&&i.call(e,r)?e[r]:void 0}return e},f=function(e,t,n){for(var r,o=e.tree;void 0!==(r=t.shift());)o.props[r]||(o.props[r]={cnt:0,any:0,handlers:{},props:{}}),(o=o.props[r]).any+=n;return o},p=function(e,t,n,r){for(var o,i=e.split("."),s=this.data.tree,a=[],c=function(e,t){Object.keys(e.handlers).forEach((function(n){(t||e.handlers[n])&&a.push(n)}))},f=function(e,t,n){var r,o;Object.keys(e.props).forEach((function(i){var s=l(t,[i]),a=l(n,[i]);r=e.props[i],((o=r.cnt&&!u(s,a))||r.any)&&c(r,o),(o||r.any||!r.cnt)&&f(r,s,a)}))};void 0!==(o=i.shift())&&s.props[o];)s=s.props[o],c(s,r);return void 0===o&&f(s,t,n),a},d=function(e){var t=this.data,n=t.handlers;if(n&&n[e]){var r,o=n[e],i=o.path,a=i.split("."),u=f(t,a,o.options.skipRepeats?0:-1),c=function(e){var n=e.split("."),r=n.pop(),o=n.join("."),i=f(t,n,0).props;r&&(i[r].cnt||s(i[r].props)||(delete i[r],c(o)))};for(delete u.handlers[e],u.cnt--,delete t.models[o.parent].on.value[e];r=t.handlers[e].options.tos.pop();)clearTimeout(r);delete t.handlers[e],u.cnt||c(i)}},h=function(e,t){for(var n,r,o,i,s;e.length;)i=(o=this.data.handlers[e.pop()]).options,o.path!==n&&(n=o.path,r=t.substr(n.length+1),s=l(this.data,n.split(".")),this.methods.isolate&&(s=c(s))),o.handler.call(i.scope,i.isolate?c(s):s,r)},m=function(e){var t=this.id,n=this.data,r="n"+o++,i=function(){delete n.models[t].on.destroy[r],e()};return n.models[t].on.destroy[r]=i,i},b=function(e,t){console.groupCollapsed&&console.groupCollapsed("Model Internals"),console.log("id:",e.id),console.log("path:",e.lensPath),t&&console.log("data:",e.data),console.log("methods:",e.methods),console.log("on:",e.on),console.log("children:",e.children),console.groupEnd&&console.groupEnd()},g=function(e,t){var n=this.methods,r=e.split("."),o=l(this.data,r),i=t&&"isolate"in t?t.isolate:n.isolate;return n.get?n.get(o,e.substr(this.lensPath.length+1)):i?c(o):o},v=function(e,t,n){var r,o=this.methods,i=e.split("."),s=i.pop(),a=l(this.data,i,1),f=o.set?o.set(a[s],t,e.substr(this.lensPath.length+1)):t,d=this._changed||!u(a[s],f),m=n&&"isolate"in n?n.isolate:o.isolate;return d&&m&&(f=c(f)),r=p.call(this,e,a[s],f,d),d&&(a[s]=f),h.call(this,r,e),d},y=function(e,t,n){var r;return Object.keys(t||{}).forEach((function(o){r|=v.call(this,e+"."+o,t[o],n)}),this),1===r},x=function(e,n){r.count.call({id:"<modelLens:n"+o+">",ref:this.data},"blue/model","create/lens",e);var i=this.data,s="n"+o,a=new t(i,e,n);return i.models[s].parent=this.id,i.models[this.id].children[s]=1,a},w=function(e,t){this._changed=!0;var n=t(g.call(this,e)),r=v.call(this,e,n);return this._changed=!1,r},E=function(e){var t=this.data.handlers;return Object.keys(t).some((function(n){var r=t[n].path;return e===r||e+"."===r.substr(0,e.length+1)||r+"."===e.substr(0,r.length+1)}))},k=function(e,t,n,r){for(var o,i,s=["addEventListener","addListener","on"],a=["removeEventListener","removeListener","off"],u=v.bind(this,e),c=r||function(e){return e},l=function(e){u(c(e))};(o=s.shift())&&(i=a.shift())&&("function"!=typeof t[o]||"function"!=typeof t[i]););if(!o)throw new Error("source must support addEventListener, addListener, or on");return t[o](n,l),m.call(this,t[i].bind(t,n,l))},j=function(e,t){var n,r=function(){},o=v.bind(this,e),i=t.onValue?t.onValue(o):t.subscribe?t.subscribe(o,r,r):t.observe?t.takeWhile((function(){return!n})).observe(o)&&function(){n=1}:r,s="function"==typeof i?i:t.offValue?t.offValue.bind(t,o):i.dispose?i.dispose.bind(i):r;return m.call(this,s)},S=function(e,t,n,r){var o=this,i=o.data,s=e.split("."),a=f(i,s,r.skipRepeats?0:1),u=function(e,t,n,r,i){if(t.tos.length)return t.x=1;(t.leading||i)&&e.call(t.scope,r),t.x=!i&&!t.leading,t.tos.push(setTimeout((function(){t.tos.shift(),t.x&&t.trailing&&u(e,t,n,g.call(o,n),1)}),t.throttle))};a.cnt++,a.handlers[t]=r.skipRepeats?0:1,i.models[o.id].on.value[t]=1,r.tos=[],r.delay?n=function(e,t,n){t.tos.push(setTimeout((function(){t.tos.shift(),e.call(t.scope,n)}),t.delay))}.bind(o,n,r):r.debounce?n=function(e,t,n,r){!t.tos.length&&t.immediate&&e(r),clearTimeout(t.tos.shift()),t.tos.push(setTimeout((function(){t.tos.shift(),!t.immediate&&e.call(t.scope,g.call(o,n))}),t.debounce))}.bind(o,n,r,e):r.throttle&&(n=u.bind(o,n,r,e)),i.handlers[t]={path:e,parent:o.id,handler:n,options:r}},O=function(e,t,n){var r,i,s=this,a="n"+o++;return r={initial:1,leading:1,trailing:1,skipRepeats:1},i=n||{},Object.keys(i).forEach((function(e){r[e]=i[e]})),S.call(this,e,a,t,n=r),n.initial&&t.call(n.scope,g.call(this,e),""),function(){d.call(s,a)}},T=function(e,t,n){var r=this;if(!a.call(r,"_connect")){var o,i={},s=e===t,u=r.lensPath,c=[],l=function(e){s&&function(e,t){var n=e+".",r=t+".";if(n===r||n===r.slice(0,n.length)||r===n.slice(0,r.length))throw new Error("cannot connect same/nested properties on the same model")}(e,o);var n=o?u+"."+o:u,a=function(t){i[e]||(i[e]=!0,v.call(r,n,t),i[e]=!1)};c.push(O.call(r,n,(function(n){if(!i[e]){if(t.destroyed)return function(){for(var e;e=c.pop();)e()}();i[e]=!0,e?t.set(e,n):t.set(n),i[e]=!1}}),{isolate:!0})),m.call(r,e?t.onValue(e,a,{isolate:!0,initial:!1}):t.onValue(a,{isolate:!0,initial:!1}))};for(o in n)l(n[o])}},P=function(e,t){var n,r=this,o=function(t,o){return n||(m.call(r,o),n=1),O.call(r,e,t,{initial:!1})};return t.stream?t.stream((function(e){return o(e.emit,e.end)})):t.fromBinder?t.fromBinder((function(e){return o(e,(function(){e(new t.End)}))})):t.Observable&&t.Observable.create?t.Observable.create((function(e){return o(e.onNext.bind(e),e.onCompleted.bind(e))})):t.create?t.create((function(e,t){return o(e,t)})):void 0},I=function(e){var t,n,o,i=this;a.call(i)||(void 0!==i.parent?r.count.call({id:"<modelLens:"+i.id+">"},"blue/model","destroy/lens",i.lensPath):r.count.call({id:"<model:"+i.id+">"},"blue/model","destroy",i.lensPath),t=i.data,n=t.models[i.id],o=i.instance,Object.keys(n.children).forEach((function(e){I.call(t.models[e])})),Object.keys(n.on.destroy).forEach((function(e){n.on.destroy[e]()})),Object.keys(n.on.value).forEach((function(e){d.call(i,e)})),"parent"in n&&delete t.models[n.parent].children[i.id],delete t.models[i.id],delete i.instance,e&&(e.logger&&E.call(i,i.lensPath)&&e.logger.warn("Destroyed model data that had listeners"),v.call(i,i.lensPath,void 0)),s(t.models)||(delete t.handlers,delete t.models,delete t.root,delete t.tree),o.destroyed=!0)},R=function(e,t,n,r){var o,i=this.me,s=this.func;if(!a.call(i,s.name||"_method"))return o=arguments.length<this.expect||"string"!=typeof e||"function"==typeof e?[i.lensPath,e,t,n,r]:["string"==typeof e?[i.lensPath,e].join("."):i.lensPath,t,n,r],s.apply(i,o)};return t=function(e,t,n){var r={id:"n"+o++,data:e,lensPath:t,instance:this,methods:n||{},on:{value:{},destroy:{}},children:{}};e.models[r.id]=r,this.logInternals=function(){return b(r)},this.get=function(){return R.apply({me:r,expect:1,func:g},arguments)},this.set=function(){return R.apply({me:r,expect:2,func:v},arguments)},this.lens=function(e){var t=R.apply({me:r,expect:1,func:x},arguments);return t.lensPath=e,t},this.modify=function(){return R.apply({me:r,expect:2,func:w},arguments)},this.fromEvent=function(){return R.apply({me:r,expect:3,func:k},arguments)},this.fromStream=function(){return R.apply({me:r,expect:2,func:j},arguments)},this.onValue=function(){return R.apply({me:r,expect:2,func:O},arguments)},this.connect=function(e,t){return T.call(r,this,e,t)},this.toStream=function(){return R.apply({me:r,expect:2,func:P},arguments)},this.logInternals=function(e){return b(r,e)},this.get=function(){return R.apply({me:r,expect:1,func:g},arguments)},this.set=function(){return R.apply({me:r,expect:2,func:v},arguments)},this.update=function(){return R.apply({me:r,expect:2,func:y},arguments)},this.lens=function(e){var t=R.apply({me:r,expect:1,func:x},arguments);return t.lensPath=e,t},this.modify=function(){return R.apply({me:r,expect:2,func:w},arguments)},this.fromEvent=function(){return R.apply({me:r,expect:3,func:k},arguments)},this.fromStream=function(){return R.apply({me:r,expect:2,func:j},arguments)},this.onValue=function(){return R.apply({me:r,expect:2,func:O},arguments)},this.connect=function(e,t){return T.call(r,this,e,t)},this.toStream=function(){return R.apply({me:r,expect:2,func:P},arguments)},this.destroy=function(e){return I.call(r,e)}},n.call(t.prototype,(function(e){return{model:e?function(e,t){if(!e)return{};var n,r=c(t);for(n in r)!(e[n]||{}).exportable&&delete r[n];return r}(e,this.get()):this.get()}})),function(e,n){var i={handlers:{},models:{},root:(n||{}).isolate?c(e):e,tree:{props:{}}};return r.count.call({id:"<model:n"+o+">",ref:i},"blue/model","create","root"),new t(i,"root",n)}})),define("blue/has",["require","./root"],(function(e){"use strict";var t,n=e("./root");function r(e,t){this.root=e,t&&this.addAll(t)}function o(e){return e?t[e]:t}return r.prototype={add:function(){for(var e,t=[];"string"==typeof(e=Array.prototype.shift.call(arguments));)t.push(e);e="function"==typeof e?e(this.root):e;for(var n=0,r=t.length;n<r;n++)this[t[n]]=e},addAll:function(e){if("object"==typeof(e="function"==typeof e?e(this.root):e)&&e.constructor===Object)for(var t in e)e.hasOwnProperty(t)&&this.add(t,e[t])}},r.constructor=r.prototype.constructor=r,t=new r(n),o().add("has-api",!0),o})),define("blue/has/walk",["require","../has","mout/object/hasOwn"],(function(e){"use strict";var t=e("../has"),n=e("mout/object/hasOwn"),r=function(e,t){return typeof e===t},o=function(e,t){return t?(""===e?t:e+"-"+t).toLowerCase():t};return function e(i,s,a){var u;for(var c in i)if(n(i,c)&&!r(s,"undefined")&&(u=i[c],r(u,"object")))if("prototype"===c)e(u,s[c],a);else{var l;try{l=s[c]}catch(e){l=void 0}var f=o(a,c),p=o(a,u.$alias);t().add(f,c in s),p&&t().add(p,c in s),Object.keys(u).length>0&&(e(u,l,c),p&&e(u,l,p))}}})),define("blue/has/var/env",{addEventListener:{},ArrayBuffer:{},clearTimeout:{},clearImmediate:{},clearInterval:{},crypto:{getRandomValues:{}},DataView:{},decodeURI:{},decodeURIComponent:{},dispatchEvent:{},document:{$alias:"dom",addEventListener:{},attachEvent:{},cookie:{},detachEvent:{},dispatchEvent:{},removeEventListener:{}},Element:{prototype:{addEventListener:{},attachEvent:{},detachEvent:{},dispatchEvent:{},removeEventListener:{}}},encodeURI:{},encodeURIComponent:{},Event:{},Float32Array:{},Float64Array:{},getComputedStyle:{},history:{pushState:{},replaceState:{}},indexedDB:{},Int8Array:{},Int16Array:{},Int32Array:{},isFinite:{},isNaN:{},localStorage:{},matchMedia:{},MessageChannel:{},module:{exports:{}},MutationObserver:{prototype:{}},navigator:{cookieEnabled:{},language:{},languages:{},plugins:{},geolocation:{},userAgent:{},userLanguage:{}},parseFloat:{},parseInt:{},postMessage:{},process:{nextTick:{},versions:{node:{},v8:{}}},Promise:{all:{},reject:{},resolve:{},prototype:{catch:{},then:{}}},removeEventListener:{},screen:{},sessionStorage:{},setTimeout:{},setImmediate:{},setInterval:{},showModalDialog:{},XMLHttpRequest:{$alias:"xhr",prototype:{open:{}}},Array:{from:{},isArray:{},observe:{},of:{},unobserve:{},prototype:{concat:{},copyWithin:{},entries:{},every:{},fill:{},filter:{},find:{},findIndex:{},forEach:{},indexOf:{},join:{},keys:{},lastIndexOf:{},map:{},pop:{},push:{},reduce:{},reduceRight:{},reverse:{},shift:{},slice:{},sort:{},some:{},splice:{},toString:{},unshift:{},values:{}}},console:{assert:{},clear:{},count:{},debug:{},dir:{},dirxml:{},error:{},group:{},groupCollapsed:{},groupEnd:{},info:{},log:{},markTimeline:{},memoryProfile:{},memoryProfileEnd:{},profile:{},profileEnd:{},table:{},time:{},timeEnd:{},timeStamp:{},trace:{},warn:{}},Date:{now:{},parse:{},UTC:{},prototype:{getDate:{},getDay:{},getFullYear:{},getHours:{},getMilliseconds:{},getMinutes:{},getMonth:{},getSeconds:{},getTime:{},getTimezoneOffset:{},getUTCDate:{},getUTCDay:{},getUTCFullYear:{},getUTCHours:{},getUTCMilliseconds:{},getUTCMinutes:{},getUTCMonth:{},getUTCSeconds:{},setDate:{},setFullYear:{},setHours:{},setMilliseconds:{},setMinutes:{},setMonth:{},setSeconds:{},setTime:{},setUTCDate:{},setUTCFullYear:{},setUTCHours:{},setUTCMilliseconds:{},setUTCMinutes:{},setUTCMonth:{},setUTCSeconds:{},toDateString:{},toISOString:{},toJSON:{},toLocaleDateString:{},toLocaleFormat:{},toLocaleString:{},toLocaleTimeString:{},toString:{},toTimeString:{},toUTCString:{},valueOf:{}}},Function:{prototype:{apply:{},bind:{},call:{},isGenerator:{},name:{},toMethod:{},toString:{}}},JSON:{parse:{},stringify:{}},Map:{prototype:{clear:{},delete:{},entries:{},forEach:{},get:{},has:{},keys:{},set:{},values:{}}},Math:{abs:{},acos:{},acosh:{},asin:{},asinh:{},atan:{},atan2:{},atanh:{},cbrt:{},ceil:{},clz32:{},cos:{},cosh:{},exp:{},expm1:{},floor:{},fround:{},hypot:{},imul:{},log:{},log1p:{},log2:{},log10:{},max:{},min:{},pow:{},random:{},round:{},sign:{},sin:{},sinh:{},sqrt:{},tan:{},tanh:{},trunc:{}},media:{matchMedium:{}},Number:{isFinite:{},isInteger:{},isNaN:{},isSafeInteger:{},toInteger:{},prototype:{clz:{},toExponential:{},toFixed:{},toLocaleString:{},toPrecision:{},toString:{},valueOf:{}}},Object:{assign:{},create:{},defineProperty:{},defineProperties:{},deliverChangeRecords:{},freeze:{},getNotifier:{},getOwnPropertyDescriptor:{},getOwnPropertyDescriptors:{},getOwnPropertyNames:{},getOwnPropertySymbols:{},getPropertyDescriptor:{},getPropertyNames:{},getPrototypeOf:{},is:{},isExtensible:{},isFrozen:{},isSealed:{},keys:{},mixin:{},observe:{},preventExtensions:{},seal:{},setPrototypeOf:{},unobserve:{},prototype:{eval:{},hasOwnProperty:{},isPrototypeOf:{},propertyIsEnumerable:{},toLocaleString:{},toString:{},unwatch:{},valueOf:{},watch:{}}},performance:{navigation:{toJSON:{}},now:{},timing:{toJSON:{}},toJSON:{}},RegExp:{prototype:{compile:{},exec:{},match:{},replace:{},search:{},split:{},test:{},toString:{}}},Set:{prototype:{add:{},clear:{},delete:{},entries:{},forEach:{},has:{},values:{}}},String:{fromCharCode:{},fromCodePoint:{},raw:{},prototype:{anchor:{},big:{},blink:{},bold:{},charAt:{},charCodeAt:{},codePointAt:{},concat:{},contains:{},createHTML:{},endsWith:{},fixed:{},fontcolor:{},fontsize:{},indexOf:{},italics:{},lastIndexOf:{},link:{},localeCompare:{},match:{},normalize:{},quote:{},repeat:{},replace:{},search:{},slice:{},small:{},split:{},startsWith:{},strike:{},sub:{},substr:{},substring:{},sup:{},toArray:{},toLocaleLowerCase:{},toLocaleUpperCase:{},toLowerCase:{},toString:{},toUpperCase:{},trim:{},trimLeft:{},trimRight:{},valueOf:{}}},styleMedia:{matchMedium:{}},Uint8Array:{},Unit8ArrayClamped:{},Unit16Array:{},Uint32Array:{},WeakMap:{prototype:{clear:{},delete:{},get:{},has:{},set:{}}},WeakSet:{prototype:{add:{},clear:{},delete:{},has:{}}}}),define("blue/has/detect",["require","../has","./walk","./var/env","../root"],(function(e){"use strict";var t=e("../has");return e("./walk")(e("./var/env"),e("../root"),""),t})),define("blue/has/framed",["require","../has"],(function(e){"use strict";var t=e("../has");return t().add("framed",(function(e){return e.self!==e.top})),t})),define("blue/dom",["require","./has/detect","./root"],(function(e){"use strict";var t=e("./has/detect"),n=e("./root");return t("dom")?n.document:{}})),define("blue/dom/createElement",["require","../dom"],(function(e){"use strict";var t=e("../dom");return function(){return t.createElement.apply(t,arguments)}})),define("blue/has/iframe",["require","./detect","../dom/createElement"],(function(e){"use strict";var t=e("./detect"),n=e("../dom/createElement")("iframe");return t().add("iframe-sandbox",(function(){return"sandbox"in n})),t().add("iframe-seamless",(function(){return"seamless"in n})),t().add("iframe-srcdoc",(function(){return"srcdoc"in n})),n=void 0,t})),define("blue/has/var/INPUT_TYPES",[],(function(){"use strict";return"search tel url email datetime date month week time datetime-local number range color".split(" ")})),define("blue/dom/body",["require","../dom"],(function(e){"use strict";var t=e("../dom");return t.documentElement||t.body})),define("blue/has/form",["require","./detect","./var/INPUT_TYPES","../dom","../dom/body","../dom/createElement"],(function(e){"use strict";for(var t,n=e("./detect"),r=e("./var/INPUT_TYPES"),o=e("../dom"),i=e("../dom/body"),s=e("../dom/createElement"),a=o,u=i,c=s("input"),l=s("textarea"),f=/^range$/,p=/^(search|tel)$/,d=/^(url|email)$/,h=!1,m="__TEST__",b=0,g=r.length;b<g;b++)c.setAttribute("type",t=r[b]),(h="text"!==c.type)&&(c.value=m,c.style.cssText="position:absolute;visibility:hidden;",f.test(t)&&void 0!==c.style.WebkitAppearance?(u.appendChild(c),h="textfield"!==a.defaultView.getComputedStyle(c,null).WebkitAppearance&&0!==c.offsetHeight,u.removeChild(c)):p.test(t)||(h=d.test(t)?c.checkValidity&&!1===c.checkValidity():c.value!==m)),n().add("input-"+t,!!h);return n().add("input-placeholder","placeholder"in c),n().add("textarea-placeholder","placeholder"in l),c=l=void 0,n})),define("blue/has/object",["require","./detect","../dom/createElement"],(function(e){"use strict";var t=e("./detect"),n=e("../dom/createElement")("div"),r=function(e){var t=!1;try{Object.defineProperty(e,"definedProperty1",{value:1}),t="definedProperty1"in e}catch(e){}return t},o=function(e){var t=!1;try{Object.defineProperties(e,{definedProperty2:{value:1}}),t="definedProperty2"in e}catch(e){}return t},i=function(e){var t=!1;e.definedProperty3=!0;try{t=Object.getOwnPropertyDescriptor(e,"definedProperty3").value}catch(e){}return t};return t().add("object-__proto__","array-__proto__",(function(){var e={__proto__:[]}instanceof Array;if(e){var t=[],n=t.__proto__;t.__proto__={},e=void 0===t.push,t.__proto__=n,e="function"==typeof t.push}return e})),t().add("object-defineproperties-obj",t("object-defineproperties")&&o({})),t().add("object-defineproperties-dom",t("object-defineproperties")&&o(n)),t().add("object-defineproperty-obj",t("object-defineproperty")&&r({})),t().add("object-defineproperty-dom",t("object-defineproperty")&&r(n)),t().add("object-getownpropertydescriptor-obj",t("object-getownpropertydescriptor")&&i({})),t().add("object-getownpropertydescriptor-dom",t("object-getownpropertydescriptor")&&i(n)),n=void 0,t})),define("blue/has/style",["require","./detect","../dom/createElement"],(function(e){"use strict";var t=e("./detect"),n=e("../dom/createElement")("style");return t().add("style-currentstyle","currentStyle"in n),t().add("style-stylesheet","styleSheet"in n),t().add("style-textcontent","textContent"in n),t})),define("blue/has/storage",["require","./detect","blue/root"],(function(e){"use strict";var t=e("./detect"),n=e("blue/root"),r=t("localstorage"),o=t("sessionstorage"),i=t("navigator-cookieenabled");return r&&t().add("localstorage",(function(){var e=!0;try{localStorage.setItem("has","has"),"has"!==localStorage.getItem("has")?e=!1:localStorage.removeItem("has","has")}catch(t){e=!1}return e})),o&&t().add("sessionstorage",(function(){var e=!0;try{sessionStorage.setItem("has","has"),"has"!==sessionStorage.getItem("has")?e=!1:sessionStorage.removeItem("has","has")}catch(t){e=!1}return e})),i&&t().add("navigator-cookieenabled",n.navigator.cookieEnabled),t})),define("blue/has/all",["require","./detect","blue/has/framed","blue/has/iframe","blue/has/form","blue/has/object","blue/has/style","blue/has/storage"],(function(e){"use strict";var t=e("./detect");return e("blue/has/framed"),e("blue/has/iframe"),e("blue/has/form"),e("blue/has/object"),e("blue/has/style"),e("blue/has/storage"),t})),define("blue/device/platform",["../has/all","platform"],(function(e,t){"use strict";return e("navigator-useragent")?t:{}})),define("blue/is",["require","./root","mout/object/hasOwn","mout/lang/kindOf","./device/platform"],(function(e){"use strict";var t=e("./root"),n=e("mout/object/hasOwn"),r=e("mout/lang/kindOf"),o=e("./device/platform"),i={Boolean:!0,Number:!0,String:!0,Undefined:!0},s=/<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>/,a=function(e){return"string"==typeof e||e instanceof String},u=function(e,t){var n=r(e);return a(t)&&(n=n===e),n};return u.array=function(e){return"isArray"in Array?Array.isArray(e):u(e,"Array")},u.boolean=function(e){return e===!!e||e instanceof Boolean},u.date=function(e){return e instanceof Date||u(e,"Date")},u.defined=function(e){return!u.undefined(e)},u.empty=function(e){var t=!1;if(null===e)t=!1;else if(u.string(e)||u.array(e))t=!e.length;else if(u.object(e)||u.function(e)){var r=!0;for(var o in e)if(n(e,o)){r=!1;break}t=r}return t},u.finite=function(e){return"isFinite"in Number?Number.isFinite(e):"number"==typeof e||e instanceof Number||t.isFinite(e)},u.function=function(e){return"function"==typeof e||e instanceof Function},u.host=function(e){var t=u(e);return"Object"===t?!!e:!i[t]},u.integer=function(e){return u.number(e)&&e%1==0},u.markup=function(e){return u.string(e)&&s.test(e)},u.nan=function(e){return"isNaN"in Number?Number.isNaN(e):t.isNaN(parseFloat(e))},u.null=function(e){return null===e},u.number=function(e){return("number"==typeof e||e instanceof Number)&&u.finite(e)},u.numeric=function(e){return!u.nan(e)&&u.finite(e)},u.object=function(e){return!u.null(e)&&"object"==typeof e},u.plainObject=function(e){return u.object(e)&&(e.constructor===Object||u.undefined(e.constructor))},u.primitive=function(e){return u.null(e)||u.undefined(e)||u.boolean(e)||u.number(e)||u.string(e)},u.promise=function(e){return e instanceof Promise||u(e,"Promise")},u.regExp=function(e){return e instanceof RegExp||!!(u.function(e.test)&&u.function(e.exec)&&u.boolean(e.ignoreCase))},u.singleSpaced=function(e){var t=!0;return e.split(" ").forEach((function(e){""===e&&(t=!1)})),t},u.string=a,u.thenable=function(e){return u.promise(e)||u.defined(e)&&u.function(e.then)},u.undefined=function(e){return void 0===e},u.element=function(e){return u.object(HTMLElement)?e instanceof HTMLElement:e&&u.object(e)&&1===e.nodeType&&u.string(e.nodeName)},u.node=function(e){return u.object(Node)?e instanceof Node:e&&u.object(e)&&u.number(e.nodeType)&&u.string(e.nodeName)},u.internetExplorer=function(e){return"IE"===o.name&&(!e||parseInt(e,10)<=o.version)},u.magicModeSupported=function(){return u.internetExplorer(11)},u})),define("blue/log/var/loggers",{}),define("blue/log/var/levels",{ALL:Number.MIN_VALUE,TRACE:1e4,DEBUG:2e4,INFO:3e4,WARN:4e4,ERROR:5e4,FATAL:6e4,OFF:Number.MAX_VALUE}),define("blue/declare",["require","./is","mout/object/hasOwn"],(function(e){"use strict";var t=e("./is"),n=e("mout/object/hasOwn");return function(e,r){t.undefined(r)&&(r=e,(e=function(){}).prototype=Object.create(null));var o=e.prototype,i=(t.function(r)?r.call(e,e,o):r)||Object.create(null),s=n(i,"constructor")?i.constructor:function(){e.apply(this,arguments)},a=Object.keys(i);s.prototype=Object.create(o);for(var u=a.length;u--;)s.prototype[a[u]]=i[a[u]];return s.constructor=s.prototype.constructor=s,s}})),define("blue/log/level",["require","blue/log/var/levels","mout/string/sentenceCase","blue/declare"],(function(e){"use strict";var t=e("blue/log/var/levels"),n=e("mout/string/sentenceCase"),r=e("blue/declare")({constructor:function(e,t){this.level=e,this.name=t,this.sentenceCaseName=n(t),this.lowerCaseName=t.toLowerCase()},equals:function(e){return e instanceof r&&this.level===e.level},greaterThan:function(e){return e instanceof r&&this.level>e.level},lessThan:function(e){return e instanceof r&&this.level<e.level},toString:function(){return this.name},valueOf:function(){return this.toString()}});return Object.keys(t).forEach((function(e){r[e]=new r(t[e],e)})),r.levels=t,r})),define("blue/log/var/types",[],(function(){"use strict";return"ASSERT GROUP GROUP_END LOG TIME TIME_END".split(" ")})),define("blue/string/toComponentName",[],(function(){"use strict";return function(e){e=null==e?"":String(e);var t;!0!==/^[A-Z]*$/.test(e)&&(["_","-"," "].forEach((function(r){t=n(t||e,r)})),e=t);return e;function n(e,t){var n=e.split(t);if(n.length>1){var r=0;e=n.map((function(e){return e=String(e).toLowerCase(),++r>1?e.charAt(0).toUpperCase()+e.slice(1):e})).join("")}return e}}})),define("blue/log/type",["require","blue/log/var/types","blue/string/toComponentName","blue/declare"],(function(e){"use strict";var t=e("blue/log/var/types"),n=e("blue/string/toComponentName"),r=e("blue/declare")({constructor:function(e){this.name=e,this.lowerCaseName=e.toLowerCase(),this.camelCaseName=n(this.lowerCaseName)},toString:function(){return this.name},valueOf:function(){return this.toString()}});return t.forEach((function(e){r[e]=new r(e)})),r.types=t,r})),define("blue/timer",["require","./declare"],(function(e){"use strict";return e("./declare")({constructor:function(){this.startTime=0,this.stopTime=0},start:function(e){this.stopTime=0,this.startTime=e||Date.now()},stop:function(){this.stopTime=Date.now(),0===this.startTime&&(this.stopTime=0)},microseconds:function(){return 1e3*this.milliseconds()},milliseconds:function(){var e=this.stopTime;return 0===e&&0!==this.startTime&&(e=Date.now()),Math.ceil(e-this.startTime)},profile:function(e,t){for(this.start();t--;)e();this.stop()},seconds:function(){return this.milliseconds()/1e3},toString:function(){return"Timer"}})})),define("blue/log/logger",["require","../has/all","../is","../log/level","../log/type","mout/array/slice","../timer","blue/dom","blue/declare","blue/log/logger"],(function(e){"use strict";e("../has/all");var t,n=e("../is"),r=e("../log/level"),o=e("../log/type"),i=e("mout/array/slice"),s=e("../timer"),a=e("blue/dom"),u=e("blue/declare"),c={constructor:function(t,o,i){if(!(this instanceof e("blue/log/logger")))throw new TypeError('Logger must be called with "new"');if(!n.string(t))throw new TypeError('"name" must be a string');this.name=t,this.enabled=void 0===i||i,this.appenders=new Set,this.threshold=r[o]||r.DEBUG,this.timers={}},addAppender:function(){for(var e=0,t=arguments.length;e<t;e++)this.appenders.has(arguments[e])||this.appenders.add(arguments[e])},assert:function(e){this.enabled&&!0!==e&&this.log(r.ERROR,{expression:e,message:arguments.length>1?i(arguments,1):["Assertion Failure"],type:o.ASSERT})},callAppenders:function(e){this.appenders.forEach((function(t){t&&t.append(e)}))},destroy:function(){this.appenders.forEach((function(e){e&&e.destroy()})),this.name=this.enabled=this.appenders=this.threshold=this.timers=void 0},group:function(e,t){this.enabled&&this.log(r.INFO,{groupName:e,expanded:void 0===t||t,type:o.GROUP})},groupEnd:function(){this.enabled&&this.log(r.INFO,{type:o.GROUP_END})},isLevelEnabled:function(e){return this.threshold.lessThan(e)||this.threshold.equals(e)},log:function(e,t){if(this.enabled&&t&&this.isLevelEnabled(e)){var n;try{var r=a,o=r.location;n=r&&r.URL||o&&o.href||""}catch(e){n=""}t.level=e,t.loggerName=this.name,t.source=n,t.timestamp=Date.now(),this.callAppenders(t)}},removeAppender:function(e){this.appenders.has(e)&&this.appenders.delete(e)},time:function(e,t){this.enabled&&e&&(t=t||r.INFO,this.timers[e]=new s,this.timers[e].level=t,this.timers[e].start(),this.log(t,{timerName:e,type:o.TIME}))},timeEnd:function(e){var t=this.timers[e];this.enabled&&e&&t&&(t.stop(),this.log(t.level,{timerName:e,elapsed:t.milliseconds(),type:o.TIME_END}),t=this.timers[e]=void 0)},toString:function(){return" Logger[ name:"+this.name+" threshold: "+this.threshold+"]"}};return Object.keys(r.levels).forEach((function(e){t=r[e],r.ALL.equals(t)||r.OFF.equals(t)||(c["is"+t.sentenceCaseName+"Enabled"]=function(){return this.isLevelEnabled(r[e])},c[t.lowerCaseName]=function(){var n,i;if(this.enabled&&this.isLevelEnabled(t)){for(n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];this.log(r[e],{message:n,type:o.LOG})}})})),u(c)})),define("blue/log/get",["require","blue/is","blue/log/var/loggers","blue/log/logger"],(function(e){"use strict";var t=e("blue/is"),n=e("blue/log/var/loggers"),r=e("blue/log/logger");return function(e,o,i){if(!t.string(e))throw new TypeError('"name" must be a string');return n[e]=n[e]||new r(e,o,i),n[e]}})),define("blue/log/layout",["require","blue/is"],(function(e){"use strict";var t=e("blue/is");function n(){this.batchHeader="",this.batchFooter="",this.batchSeparator="",this.batchSupport=!0,this.contentType="text/plain"}return n.prototype.format=function(){throw new Error("format() is not implemented")},n.prototype.stringify=function(e,n){var r,o,i,s="";if(t.null(e)||t.undefined(e))return s;try{return"{}"===(s=JSON.stringify(e)||"")&&e instanceof Error&&(e.stack?s=e.stack.toString():e.name&&e.message&&(s=e.name.toString()+": "+e.message.toString())),t.defined(n)&&s.length>n?s.substring(0,n-1)+"â¦":s}catch(e){}if(t.array(e))for(o=0,i=e.length-1;o<=i;o++)s+=this.stringify(e[o],n),o<i&&(s+=",");else if(t.plainObject(e))for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s+=r.toString&&!t.null(e[r])&&t.defined(e[r])&&e[r].toString?r.toString()+"::"+e[r].toString()+"\n":"");else s=e.toString?e.toString():"";return t.defined(n)&&s.length>n?s.substring(0,n-1)+"â¦":s},n})),define("blue/log/layout/null",["require","blue/log/layout","blue/declare"],(function(e){"use strict";var t=e("blue/log/layout");return e("blue/declare")(t,{constructor:function(){t.call(this),this.contentType="text/javascript"},format:function(e){return e}})})),define("blue/log/appender",["require","../declare","./level","./layout/null"],(function(e){"use strict";var t=e("../declare"),n=e("./level"),r=e("./layout/null");return t({constructor:function(e,t){this.enabled=void 0===t||t,this.threshold=n[e]||n.ALL,this.layout=new r,this.start()},append:function(e){this.enabled&&(this.threshold.lessThan(e.level)||this.threshold.equals(e.level))&&this.doAppend(e)},destroy:function(){this.stop(),this.enabled=this.threshold=this.layout=void 0},doAppend:function(){throw new Error('"doAppend()" is not implemented')},start:function(){},stop:function(){this.enabled&&(this.enabled=!1)},toString:function(){return" Appender[ threshold: "+this.threshold+"]"}})})),define("blue/log/appender/console",["require","blue/log/appender","blue/has/all","blue/is","blue/declare"],(function(e){"use strict";var t=e("blue/log/appender"),n=function(){}.call,r=e("blue/has/all"),o=e("blue/is"),i=e("blue/declare"),s={assert:function(e){console.assert(e.expression,e.message)},group:function(e){console.group(e.groupName)},groupEnd:function(){console.groupEnd()},log:function(e){if(o.plainObject(e)){var t=e.level.lowerCaseName,i=[];r("console-"+e.level.lowerCaseName)||(t="log");try{r("native-console")?console[t].apply(console,e.message):n.apply(console[t],[console].concat(e.message))}catch(n){e.message.forEach((function(e){try{i.push(JSON.stringify(e))}catch(e){}})),console[t](i.join(" "))}}},time:function(e){console.time(e.timerName)},timeEnd:function(e){console.timeEnd(e.timerName)}};return i(t,{constructor:function(e,n){t.call(this,e,n)},doAppend:function(e){var t=e.type.camelCaseName;o.array(e.message)&&e.message.unshift(e.loggerName),r("console-"+e.type.lowerCaseName)&&o.function(s[t])?s[t](e):s.log(e)}})})),define("blue/observable",["require","kefir","blue/perf","./model"],(function(e){"use strict";var t=e("kefir"),n=e("blue/perf"),r=t.Property.prototype,o=t.Stream.prototype,i=r.onValue,s=r.filter,a=r.map,u=r.scan,c=o.onValue,l=o.filter,f=o.map,p=o.scan,d=Object.prototype.hasOwnProperty,h=function(){},m=0,b=function(e,t){return e&&e.emit(t),this},g=function(e,t){return e&&e.error(t),this},v=function(e){return e&&e.end(),this},y=function(e,t){return e&&e.emitEvent(t),this},x=function(e,t,n){var r,o,i,s,a=t[0]||n||h,u=[];switch(typeof a){case"function":for(u=[],r=1;r<t.length;r++)u.push(t[r]);o=function(e){return a.apply(null,u.concat([e]))};break;case"boolean":o=function(){return a};break;case"object":o=(i=t[1])?function(){return a[i].apply(a,arguments)}:h;break;case"string":for(a=a.substr(1),r=1;r<t.length;r++)u.push(t[r]);o=u.length?function(e){return e[a].apply(e,u)}:"boolean"==typeof n?function(e){return d.call(e,a)}:function(e){return e[a]}}return s=e.call(this,o),"function"==typeof n?o:s},w=function(e,t){var r=this,o="<stream:"+m+++">",i=x.call(this,e,t,h);return n.count.call({id:o,ref:t},"blue/observable","stream","onValue"),function(){n.count.call({id:o},"blue/observable","stream","offValue"),r.offValue(i)}},E=function(e){var t=function(t){var n;t.value=(n=t.value)&&function(){return n},e(t)};return this.onAny(t),function(){this.offAny(t)}},k=function(e,t){var r=this;return e.onAny(t.emitEvent),r.emit=function(e){return b.call(r,t,e)},r.push=this.emit,r.error=function(e){return g.call(r,t,e)},r.end=function(){return v.call(r,t)},r.emitEvent=function(e){return y.call(r,t,e)},n.count.call({add:"active"},"blue/observable","bus","activate"),function(){n.count.call({rem:"active"},"blue/observable","bus","deactivate"),e.offAny(t.emitEvent)}};return t.Model=e("./model"),t.once=function(e){return t.merge([t.constant(e),t.never()])},r.subscribe=function(e){return E.call(this,e)},o.subscribe=function(e){return E.call(this,e)},r.onValue=function(){return w.call(this,i,arguments)},o.onValue=function(){return w.call(this,c,arguments)},r.filter=function(){return x.call(this,s,arguments,!1)},o.filter=function(){return x.call(this,l,arguments,!1)},r.map=function(){return x.call(this,a,arguments)},o.map=function(){return x.call(this,f,arguments)},r.scan=function(e,t){return u.call(this,t,e)},o.scan=function(e,t){return p.call(this,t,e)},t.Bus=function(){var e=t.pool(),r=e.plug,o=e.unplug,i=t.stream((function(t){return k.call(i,e,t)}));return e.plug=function(t){n.count.call({add:"plug"},"blue/observable","bus","plug"),r.call(e,t)},e.unplug=function(t){n.count.call({rem:"plug"},"blue/observable","bus","unplug"),o.call(e,t)},i.setName("bus"),i.id="<bus:"+m+++">",i.push=h,i.error=h,i.end=h,i.emitEvent=h,i.plug=function(t){return e.plug(t),function(){e.unplug(t)}},i.unplug=e.unplug,n.count.call({id:i.id,ref:{}},"blue/observable","bus","create"),i.onEnd((function(){n.count.call({id:i.id},"blue/observable","bus","destroy")})),i},t})),define("blue/string/wildCardMatch",[],(function(){"use strict";return function(e,t,n){var r;return t===(n=n||"*")||(-1===t.indexOf(n)?e===t:(r="^"+t.split(n).join(".*?")+"$",new RegExp(r).test(e)))}})),define("blue/object/extend",["require","../is","mout/object/deepMixIn","mout/object/mixIn"],(function(e){"use strict";var t=e("../is"),n=e("mout/object/deepMixIn"),r=e("mout/object/mixIn");return function(e){for(var o=t.boolean(e)?1:0,i=[];o<arguments.length;o++)i.push(arguments[o]);return!0===e?n.apply(this,i):r.apply(this,i)}})),define("blue/event",["require","./is","./string/wildCardMatch","./object/extend","./as/serializable"],(function(e){"use strict";var t=e("./is"),n=e("./string/wildCardMatch"),r=e("./object/extend"),o=e("./as/serializable"),i=0,s=function(e,n){e instanceof s||t.defined(e)&&t.string(e.type)?(this.originalEvent=e,this.type=e.type):this.type=e,this.extend(n),this.eventId=++i,this.eventTimeStamp=t.defined(e)&&t.number(e.timestamp)||Date.now()};return s.prototype.extend=function(){var e,t=[!0,this];for(e=0;e<arguments.length;e++)t.push(arguments[e]);r.apply(this,t)},s.prototype.match=function(e,t){var r=this[e]||"";return n(r,t||"")},o.call(s.prototype,(function(){return"<"+this.type+">"})),s})),define("blue/event/channel",["require","../observable","../is","../event","../object/extend","blue/perf"],(function(e){"use strict";var t=e("../observable"),n=e("../is"),r=e("../event"),o=e("../object/extend"),i=e("blue/perf"),s=0,a=0,u=0,c=function(e,r){var a={eventTarget:this,eventType:"data"};this.id=++s,this.settings=o(!0,{},a,e||{}),this.stream=n.defined(r)&&n.function(r.push)&&1===r.push.length&&n.function(r.end)&&n.function(r.filter)&&3===r.filter.length?r:new t.Bus,this.cleanup={},i.count.call({id:this.id,ref:this},"blue/event/channel","create",e&&e.eventTarget&&(e.eventTarget.name||e.eventTarget.__name))};return c.prototype.asEventStream=function(e){return n.function(e)?this.stream.filter(e):n.string(e)?this.stream.filter(".match","type",e):this.stream},c.prototype.destroy=function(){i.count.call({id:this.id},"blue/event/channel","destroy"),Object.keys(this.cleanup).forEach((function(e){this.cleanup[e]()}),this),this.stream.end(),this.id=this.settings=this.stream=this.cleanup=void 0},c.prototype.emit=function(e,t){var o;e instanceof r?o=e:(n.string(e)?e=e:(t=e,e=this.settings.eventType),o=new r(e)),i.count("blue/event/channel","emit",o.type),n.plainObject(t)&&o.extend(t),n.undefined(o.target)&&(o.target=this.settings.eventTarget),this.stream.push(o)},c.prototype.on=function(e,t){n.function(e)&&(t=e,e="*");var r,o,s,c,l=[],f=function(e){var t=u++,n="n"+t,r=this.cleanup;return r[n]=function(){r[n]&&(i.count.call({id:"listenerOn"+t,time:1},"blue/event/channel","off",n),delete r[n],e())},r[n]};return n.plainObject(e)?s=e:(s={})[e]=t,Object.keys(s).forEach((function(e){(o=s[e]).listenId=a++,r=function(e){var t=e.split("/");switch(t.length){case 1:return{type:t[0]||"",value:"*"};case 2:return{type:t[0]||"",value:t[1]||""};default:return{type:"",value:""}}}(e),i.count.call({id:"listenerOn"+u,ref:{func:o,type:e},time:1},"blue/event/channel","on",e),c=this.stream.onValue(function(e,t,n){return function(r){r.match("type",t)&&r.match("value",n)&&e(r)}}(o,r.type,r.value)),l.push(f.call(this,c))}),this),l},c.prototype.plug=function(e){return e.onValue(this,"emit")},c})),define("blue/event/channel/component",["require","../channel"],(function(e){"use strict";return new(e("../channel"))})),define("blue/log/appender/analytics",["require","blue/log/appender","../layout","blue/is","blue/event/channel/component"],(function(e){"use strict";var t=e("blue/log/appender"),n=new(e("../layout")),r=e("blue/is"),o=e("blue/event/channel/component");function i(e,n,r,o){t.call(this,e,n),this.fieldLimit=r||1995,this.totalLimit=o||2e3,this.totalLess=this.totalLimit-1}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.doAppend=function(e){var t=e.type.camelCaseName;-1===e.loggerName.indexOf("[blue-analytics]")&&this.supportedMethods[t]&&this.supportedMethods[t].call(this,e)},i.prototype.supportedMethods={log:function(e){if(r.plainObject(e)){var t=this,i=1===e.message.length?n.stringify(e.message[0],this.fieldLimit):e.message.reduce((function(e,r,o){return 0===o?e+n.stringify(r,t.fieldLimit):e+"\n "+n.stringify(r,t.fieldLimit)}),"");o.emit("log",{timestamp:e.timestamp,data:{level:e.level.name,message:i.length<this.totalLimit?i:i.substring(0,this.totalLess)+"â¦"},logger:e.loggerName})}}},i})),define("blue/log/appender/consoleAnalytics",["require","blue/log/appender","blue/has/all","blue/is","../layout"],(function(e){"use strict";var t=e("blue/log/appender"),n=function(){}.call,r=e("blue/has/all"),o=e("blue/is"),i=new(e("../layout"));function s(e,n,r,o){t.call(this,e,n),this.fieldLimit=r||1995,this.totalLimit=o||2e3,this.totalLess=this.totalLimit-1}return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype.doAppend=function(e){var t=e.type.camelCaseName;-1===e.loggerName.indexOf("[blue-analytics]")&&this.supportedMethods[t]&&this.supportedMethods[t].call(this,e)},s.prototype.supportedMethods={log:function(e){if(o.plainObject(e)){var t=this,s=e.level.lowerCaseName,a=1===e.message.length?i.stringify(e.message[0],this.fieldLimit):e.message.reduce((function(e,n,r){return 0===r?e+i.stringify(n,t.fieldLimit):e+"\n "+i.stringify(n,t.fieldLimit)}),"");a=a.length<this.totalLimit?a:a.substring(0,this.totalLess)+"â¦",r("console-"+e.level.lowerCaseName)||(s="log");try{r("native-console")?console[s].apply(console,a):n.apply(console[s],[console].concat(a))}catch(e){console[s](a.join(" "))}}}},s})),define("blue/log",["require","exports","module","./log/get","./log/appender/console","./log/appender/analytics","./log/appender/consoleAnalytics","./is"],(function(e,t,n){"use strict";var r,o,i,s,a,u=e("./log/get"),c=e("./log/appender/console"),l=e("./log/appender/analytics"),f=e("./log/appender/consoleAnalytics"),p=e("./is"),d=n.config(),h=["console","analytics","consoleAnalytics"],m=[c,l,f],b=[!0,!0,!1],g={};for(a=0;a<h.length;++a)r=d.appender&&d.appender[h[a]]&&p.defined(d.appender[h[a]].level)?d.appender[h[a]].level:"ALL",o=d.appender&&d.appender[h[a]]&&p.defined(d.appender[h[a]].enabled)&&p.boolean(d.appender[h[a]].enabled)?d.appender[h[a]].enabled:b[a],i=d.appender&&d.appender[h[a]]&&p.defined(d.appender[h[a]].fieldLimit)&&p.integer(d.appender[h[a]].fieldLimit)?d.appender[h[a]].fieldLimit:void 0,s=d.appender&&d.appender[h[a]]&&p.defined(d.appender[h[a]].totalLimit)&&p.integer(d.appender[h[a]].totalLimit)?d.appender[h[a]].totalLimit:void 0,g[h[a]]=new m[a](r,o,i,s);return function(e){var t=d[e]&&d[e].level||d.ALL&&d.ALL.level,n=d[e]&&p.defined(d[e].enabled)&&p.boolean(d[e].enabled)?d[e].enabled:!(d.ALL&&p.defined(d.ALL.enabled)&&p.boolean(d.ALL.enabled))||d.ALL.enabled,r=u(e,t,n);for(a=0;a<h.length;++a)g[h[a]].enabled&&r.addAppender(g[h[a]]);return r}})),define("blue/as/dataProvider",["../model","../log"],(function(e,t){"use strict";var n=t("[dataprovider]"),r=function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!0})},o=function(e,t,r,o){for(var i,s,a,u,c=this,l=e.model,f=e.services||{},p=e.mappers||{},d=t.split("."),h={dtm:Date.now(),params:r,options:o};(i=d.shift())&&(s=f)&&(f=f[i]||{});)p=p[i]||{};if(a=p.success||{},u=p.failure,!l||!l.lens)throw new Error("Invalid model");if("function"!=typeof f)throw new Error("Service not found: "+t);if("function"!=typeof a)throw new Error("Service success mapping function not found: "+t);return"function"!=typeof u&&n.warn("No failure callback provided: "+t),f.call(s,r,o).then((function(e){return a.call(c,h,e,l.get(),l)})).catch((function(e){return u&&u.call(c,h,e,l.get(),l)}))};return function(t){var n,i,s={model:t.model||(n=e()),services:{},mappers:{}};return Object.defineProperty(s,"services",{get:function(){return i||(i=(t.context||{}).services||{})},enumerable:!0}),r(s,"request",(function(e,t,n){return o.call(s,s,e,t,n)})),r(t,"dataProvider",s),{destroy:function(){n&&n.destroy()}}}})),define("blue/compose",["require","./is","mout/object/hasOwn"],(function(e){"use strict";var t=e("./is"),n=e("mout/object/hasOwn"),r=function(e,r){e.mixedIn=n(e,"mixedIn")?e.mixedIn:[],r.forEach((function(n){-1===e.mixedIn.indexOf(n)&&(t.function(n)?n.call(e,e.context):Object.keys(n).forEach((function(t){e[t]=n[t]})),e.mixedIn.push(n))}))};return function(e){var n,o=[],i=t.function(e)?0:1;for(n=i&&e||Object.create(null);i<arguments.length;i++)o.push(arguments[i]);return r(n,o),n}})),define("blue/as/constructable",["../compose","../is"],(function(e,t){"use strict";return function(){this.defineConstruct=function(n){Object.defineProperty(this,"construct",{set:function(r){if(t.function(r))e(this,function(){r.call(this,n)}.bind(this));else{if(!t.plainObject(r)&&!t.object(r))throw new TypeError("definition must be a function or object mixin");e(this,r)}},configurable:!0,enumerable:!1})},this.destroyConstruct=function(){delete this.construct}}})),define("blue/context",["require","./as/serializable","emitter-js","./is","blue/perf"],(function(e){"use strict";var t,n=e("./as/serializable"),r=e("emitter-js").default,o=e("./is"),i=e("blue/perf"),s=0,a=function(e){var n=function(n){Object.keys(n||{}).forEach((function(e){this[e]=n[e]}),this),r(this),t=t||this.on,this.on=function(e,n){var r,o=this,i=n||e;switch(i&&i.constructor){case Function:return(r=function(){try{i.apply(o,arguments)}catch(e){o.logger&&o.logger.error(e)}}).listener=i,n?t.call(o,e,r):t.call(o,r);case Object:Object.keys(i).forEach((function(e){o.on(e,i[e])}));break;case Array:i.forEach((function(t){if(n)return o.on(e,t);o.on(t)}))}},Object.defineProperties(this,{id:{value:++s,configurable:!0},createdTimestamp:{value:Date.now(),configurable:!0}}),e||Object.defineProperties(this,{root:{value:this,configurable:!0}}),this.parent=this._ChildContext=this.children=null,i.count.call({id:this.id,ref:this},"blue/context",e?"createChild":"create")};return n.prototype=e,n},u=a();return u.prototype=Object.create(r.prototype),delete u.prototype.trigger,u.prototype.constructor=u,u.prototype.getStack=function(){var e=[],t=this;for(this.name&&e.unshift(this.name);t.parent;)t=t.parent,e.unshift(t.name);return e.join("/")},u.prototype.broadcast=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.direct((function(t){t.trigger(e,n)}),!0)},u.prototype.bubble=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.escalate((function(t){t.trigger(e,n)}),!0)},u.prototype.newChild=function(e){var t;return o.function(this._ChildContext)||(this._ChildContext=a(this),this.children=[]),(t=new this._ChildContext(e)).parent=this,this.children.push(t),t},u.prototype.hasChild=function(e){return e&&this.children&&-1!==this.children.indexOf(e)},u.prototype.removeChild=function(e){var t=e&&this.children&&this.children.indexOf(e);if(-1!==t&&"number"==typeof t)return this.children.splice(t,1),!0},u.prototype.destroy=function(){this.children&&this.children.length&&(this.direct((function(e){e.destroy()})),delete this.children),this.parent&&this.parent.removeChild(this),this._ChildContext&&delete this._ChildContext,r.prototype.destroy.call(this);var e=Object.getOwnPropertyNames(this),t=e.length;for(i.count.call({id:this.id},"blue/context","destroy");t--;)delete this[e[t]]},u.prototype.direct=function(e,t){var n=t?[this]:this.children;n&&n.length&&n.forEach((function(t){e(t),t.direct(e)}))},u.prototype.escalate=function(e,t){var n=t?this:this.parent;n&&(e(n),n.escalate(e))},n.call(u.prototype,(function(){return{ContextID:this.id||"empty id"}})),u})),define("blue/mixin",[],(function(){"use strict";return function(e,t){return function(n){var r=n||{},o=this.prototype,i=o.constructor,s=function(){var n={self:this,shared:r},o=function(t){this[t]=function(){return e[t].apply(n,arguments)}};Object.keys(e||{}).forEach(o,this),t&&t.apply(n,arguments),i.apply(this,arguments)};return s.prototype=Object.create(o),Object.keys(this).forEach((function(e){s[e]=this[e]}),this),s}}})),define("blue/as/contextual",["../context","../mixin"],(function(e,t){"use strict";var n=function(e,t){Object.keys(t||{}).forEach((function(n){e[n]=t[n]}))},r=function(t,r){var o=this.shared.name,i=this.context=t?this.shared.inherit?t.newChild():t:new e;return o&&(i[o]=i),n(i,r),i};return t({defineContext:function(e,t){var o=this;Object.defineProperty(this.self,"context",{get:function(){return o.context||r.call(o,e,t)},set:function(t){o.context?n(o.context,t):r.call(o,e,t)},configurable:!0,enumerable:!0})},destroyContext:function(){var e=this.self,t=e.context;t&&(t.destroy(),delete e.context),delete e.context,delete e.defineContext,delete e.destroyContext}},(function(){var e=this.shared;void 0===e.inherit&&(e.inherit=!0)}))})),define("blue/fetch",["require","blue/root","URI","blue/log"],(function(e){"use strict";var t=e("blue/root"),n=e("URI"),r=e("blue/log")("[http:fetch]"),o=/%20/g,i=/^(?:GET|HEAD)$/,s={lastModified:{},etag:{}},a={text:function(e){return e.text()},json:function(e){return e.json().catch((function(t){throw e.headers&&(t.headers=e.headers),e.status&&(t.status=e.status,t.statusText=e.statusText),t}))},xml:function(e){return e.text().then((function(e){return(new DOMParser).parseFromString(e,"text/xml")}))},image:function(e){return e._bodyBlob?Promise.resolve(e._bodyBlob):"function"==typeof e.blob?e.blob():e.body&&e.body instanceof ReadableStream?e:Promise.reject(new Error("Blue:fetch - expected image blob, blob not found"))}},u={text:a.text,"application/json":a.json,"text/json":a.json,"application/xml":a.xml,"text/xml":a.xml,"application/pdf":a.image,"image/bmp":a.image,"image/gif":a.image,"image/x-icon":a.image,"image/jpeg":a.image,"image/png":a.image,"image/svg+xml":a.image,"image/tiff":a.image,"image/webp":a.image},c=function(e){return n(e).absoluteTo(t.location.href).toString()};return function(e,n){var l,f,p,d,h,m=n||e&&e.constructor===Object&&e||{},b=m.fullResponse||!1,g=!1;return m.beforeSend&&m.beforeSend.constructor===Function&&(r.warn('DEPRECATED:BLUEJS-770:"beforeSend" is not a supported service option'),m.beforeSend({setRequestHeader:function(e,t){!("headers"in m)&&(m.headers={}),m.headers[e]=t}},m)),p=m.url||e,d={cache:"default",credentials:"same-origin",headers:m.headers||{},method:m.method||m.type||"GET",mode:"cors",redirect:"follow"},(l=!m.data||m.data.constructor===String||"processData"in m&&!m.processData?m.data:function(e){var t=[],n=function(e,n){var r;r=n&&n.constructor===Function?n():null===n?"":n,t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))};switch(e&&e.constructor){case Array:e.forEach((function(e){e&&n(e.name,e.value)}));break;case Object:Object.keys(e).forEach((function(t){n(t,e[t])}))}return t.join("&").replace(o,"+")}(m.data))&&(i.test(d.method)?p+=(-1===p.indexOf("?")?"?":"&")+l:d.body=l),["complete","dataFilter","error","success","xhr"].forEach((function(e){m[e]&&r.warn('DEPRECATED:BLUEJS-770:"'+e+'" is not a supported service option')})),m.xhrFields&&m.xhrFields.withCredentials&&(d.credentials="include"),m.ifModified&&((f=s.lastModified[p])&&(d.headers["If-Modified-Since"]=f),(f=s.etag[p])&&(d.headers["If-None-Match"]=f)),m.timeout&&!isNaN(parseInt(m.timeout))&&parseInt(m.timeout)>0&&(d.timeout=parseInt(m.timeout)),m.contentType&&(d.headers["Content-Type"]=m.contentType),new Promise((function(e,n){var r=t.AbortController?new AbortController:void 0,o=r?r.signal:void 0;d.timeout&&(o&&(d.signal=o),h=setTimeout((function(){g=!0,r&&r.abort(),n({headers:new t.Headers,status:0,statusText:"Request timed out",url:c(p)})}),d.timeout)),t.fetch(new t.Request(p),d).then((function(n){if(!g){h&&clearTimeout(h);var r={headers:n.headers,status:n.status,statusText:n.statusText,url:n.url||c(p),fullResponse:b};if(!n.ok&&!function(e){return 0===e.status&&(t._phantom||t.callPhantom)&&"file:"===e.url.slice(0,5)}(r))return n.text().then((function(e){throw r.data=e,r}));m.ifModified&&((f=n.headers.get("Last-Modified"))&&(s.lastModified[p]=f),(f=n.headers.get("etag"))&&(s.etag[p]=f)),e(function(e,t){var n=e.headers.get("Content-Type")||"",r=n.split("/"),o=a[t]||u[n]||u[r[0]];return o?o(e):e.text()}(n,m.dataType).then((function(e){return r.data=e,r})))}})).catch((function(e){g||(h&&clearTimeout(h),n(e.headers?e:{headers:new t.Headers,status:0,statusText:e.message,url:c(p)}))}))}))}})),define("blue/http",["require","blue/fetch","blue/perf"],(function(e){"use strict";var t=e("blue/fetch"),n=e("blue/perf"),r=0,o=function(e){return this.headers.get(e)},i=function(){var e=[];return this.headers.forEach((function(t,n){e.push(n+":"+t)})),e.length?e.join("\r\n"):null};return{request:function(e,r){var s=n.count.call({bucket:"service"},"blue/http",e.url||e),a=t(e,r);return a.then(s).catch(s),a.then((function(e){if(e.headers.get("Alt-Location"))throw e;return e.fullResponse&&e||e.data})).catch((function(e){throw e.responseText=e.data,e.getResponseHeader=o,e.getAllResponseHeaders=i,e}))},append:function(e,t){return new Promise((function(n,o){var i,s,a=document.getElementsByTagName("head")[0],u=function(e){return function(t){clearInterval(s),e(t)}},c=u(n),l=u(o);switch(t){case"css":(i=document.createElement("link")).rel="stylesheet",i.href=e,s=setInterval((function(){Array.prototype.reduce.call(document.styleSheets||[],(function(t,n){return t||n.href===e}),!1)&&c()}),100);break;case"js":(i=document.createElement("script")).src=e;break;default:return l("unsupported resource type: "+t)}i.id=t+r++,i.onload=c,i.onerror=l,a.appendChild(i)}))}}})),define("blue/promiseList",[],(function(){"use strict";var e=function(e,t){return new Promise((function(n,r){Promise.allSettled(e).then((function(e){var r=e.map((function(e){return"fulfilled"===e.status?e.value:void(t&&t(e.reason))}));n(r)}))}))};return(e.prototype=Object.create(null)).constructor=e,e})),function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,i&&("object"==typeof i&&o(i,n),s.state=function(){return o(n,{})}),s}t&&t.exports?t.exports=i:n&&n.amd?n("alea",[],(function(){return i})):this.alea=i}(0,"object"==typeof module&&module,"function"==typeof define&&define),define("blue/random",["require","alea"],(function(e){"use strict";return e("alea")(function(){try{var e=new Uint8Array(256);return crypto.getRandomValues(e),String.fromCharCode.apply(0,e)}catch(e){return String(Date.now())}}(),{entropy:!0}).double})),define("blue/util",["require","mout/array/combine","mout/array/compact","mout/lang/deepEquals","mout/array/difference","mout/array/find","mout/array/flatten","mout/array/groupBy","mout/array/intersection","mout/array/invoke","mout/array/max","mout/array/min","mout/array/pick","mout/array/pluck","mout/array/range","mout/array/sort","mout/array/union","mout/array/unique","mout/function/compose","mout/function/debounce","mout/function/partial","mout/function/prop","mout/function/series","mout/function/times","mout/function/wrap","mout/lang/defaults","mout/object/equals","mout/object/every","./object/extend","mout/lang/deepClone","mout/lang/deepEquals","mout/object/deepMatches","mout/object/filter","mout/object/find","mout/object/functions","mout/object/get","mout/object/has","mout/object/map","mout/object/matches","mout/object/max","mout/object/merge","mout/object/min","mout/object/mixIn","mout/object/pick","mout/object/pluck","mout/object/set","mout/lang/toString","mout/object/unset","mout/random/choice","mout/random/guid","mout/random/rand","mout/random/randHex","mout/random/randInt","mout/random/random","./string/toComponentName","mout/string/hyphenate","mout/string/interpolate","mout/string/makePath","mout/string/properCase","mout/string/removeNonASCII","mout/string/removeNonWord","mout/string/stripHtmlTags","mout/lang/toNumber","mout/string/trim","mout/string/truncate","mout/string/typecast","mout/string/unCamelCase","mout/string/unhyphenate","mout/string/WHITE_SPACES"],(function(e){"use strict";return{array:{combine:e("mout/array/combine"),compact:e("mout/array/compact"),deepEquals:e("mout/lang/deepEquals"),difference:e("mout/array/difference"),find:e("mout/array/find"),flatten:e("mout/array/flatten"),groupBy:e("mout/array/groupBy"),intersection:e("mout/array/intersection"),invoke:e("mout/array/invoke"),max:e("mout/array/max"),min:e("mout/array/min"),pick:e("mout/array/pick"),pluck:e("mout/array/pluck"),range:e("mout/array/range"),sort:e("mout/array/sort"),union:e("mout/array/union"),unique:e("mout/array/unique")},function:{compose:e("mout/function/compose"),debounce:e("mout/function/debounce"),partial:e("mout/function/partial"),prop:e("mout/function/prop"),series:e("mout/function/series"),times:e("mout/function/times"),wrap:e("mout/function/wrap")},lang:{defaults:e("mout/lang/defaults")},object:{equals:e("mout/object/equals"),every:e("mout/object/every"),extend:e("./object/extend"),deepClone:e("mout/lang/deepClone"),deepEquals:e("mout/lang/deepEquals"),deepMatches:e("mout/object/deepMatches"),filter:e("mout/object/filter"),find:e("mout/object/find"),functions:e("mout/object/functions"),get:e("mout/object/get"),has:e("mout/object/has"),map:e("mout/object/map"),matches:e("mout/object/matches"),max:e("mout/object/max"),merge:e("mout/object/merge"),min:e("mout/object/min"),mixIn:e("mout/object/mixIn"),pick:e("mout/object/pick"),pluck:e("mout/object/pluck"),set:e("mout/object/set"),toString:e("mout/lang/toString"),unset:e("mout/object/unset")},random:{choice:e("mout/random/choice"),guid:e("mout/random/guid"),rand:e("mout/random/rand"),randHex:e("mout/random/randHex"),randInt:e("mout/random/randInt"),random:e("mout/random/random")},string:{camelCase:e("./string/toComponentName"),escapeHtml:function(e){var t=document.createElement("pre"),n=document.createTextNode(e);return t.appendChild(n),t.innerHTML},hyphenate:e("mout/string/hyphenate"),interpolate:e("mout/string/interpolate"),makePath:e("mout/string/makePath"),properCase:e("mout/string/properCase"),removeNonASCII:e("mout/string/removeNonASCII"),removeNonWord:e("mout/string/removeNonWord"),stripHtmlTags:e("mout/string/stripHtmlTags"),toNumber:e("mout/lang/toNumber"),trim:e("mout/string/trim"),truncate:e("mout/string/truncate"),typecast:e("mout/string/typecast"),unCamelCase:e("mout/string/unCamelCase"),unescapeHtml:function(e){var t=document.createElement("div");return e.replace(/\&[#0-9a-z]+;/gi,(function(e){return t.innerHTML=e,t.innerText}))},unhyphenate:e("mout/string/unhyphenate"),WHITE_SPACES:e("mout/string/WHITE_SPACES")}}})),define("blue/event/lifecycle",["require","blue/event","blue/root","blue/util"],(function(e){"use strict";var t=e("blue/event"),n=e("blue/root"),r=e("blue/util"),o=n.performance&&n.performance.now&&n.performance.mark,i=function(e){var n;e||(e={}),e.beginEvent&&((e=r.object.extend(e.beginEvent,e)).stage="end"),n=["blue","lifecycle",e.type||"unknownType",e.action||"unknownAction",e.stage||"unknownStage"].join(":"),t.call(this,n),o&&(this.timestamp=e.timestamp||performance.now()),this.name=e.name||"unknownName",this.eventName=n+":"+this.name+":"+this.eventId,this.msgType=n,this.value={},Object.assign(this.value,e)};return(i.prototype=Object.create(t.prototype)).constructor=i,i.prototype.updateTimestamp=function(e){return e?this.timestamp=e:o&&(this.timestamp=performance.now()),this},i.prototype.toJSON=function(){return{eventName:this.eventName,timestamp:this.timestamp}},i})),define("blue/as/registry",["../compose","../is","../perf","../http","../promiseList","../log","../event/lifecycle"],(function(e,t,n,r,o,i,s){"use strict";var a=function(){},u=Object.prototype.hasOwnProperty,c=!1,l=new Map,f=i("[blue:core]"),p=function(e){return l.get(e)||(l.set(e,{})||l).get(e)};return function(i,d,h){if(!t.string(i)||!i.length)throw new TypeError("type must be a non-empty string");var m,b=(h=h||{}).lazy,g=h.noCache,v=h.immediate,y=h.plugin||"",x=i+"s",w=(m=i)[0].toUpperCase()+m.slice(1),E=w+"s",k=x,j=i+"Store",S=i+"Desc",O=i+"Temp",T=i+"Updates",P=i+"Context",I="define"+E+"Registry",R="destroy"+E+"Registry";function C(e,t){var n;for(n in t)u.call(t,n)&&(e[n]=t[n])}function N(e,n,o){var s=p(e)[T][n]||{},a=s.dependencies||{},u=[];return t.thenable(a)?a:(a&&a.constructor===Object||(a={}),Object.keys(a).forEach((function(e){var t=r.append(e,a[e]).catch((function(){f.error("["+o.getStack()+"]","Unable to load-dependency for "+i+":"+n+" ("+e+")")}));u.push(t)})),s.dependencies=Promise.all(u))}function L(r,s,a,u,c,l,m){var v,y,x={},E=p(r),k=E[T][s]||{};return n.count("blue/as/registry","construct",w,s),u&&f.info("["+u.getStack()+"]","Creating "+i+":"+s),t.object(a)?(C(x,a),C(x,k)):x=a,h.onCreate&&h.onCreate.call(E.host,s,x),d.create?l=d.create(s,u,x):(l=new d(s,u),y=function(n,r,i,s){var a,u,c;s||(s=new d(n,r));t.function(i)?(a=i.call(s,s.context),c=t.promise(a)?new Promise((function(t,r){a.then((function(n){e(s,n&&n.default||n),t(s)}),(function(e){console&&console.error("Unable to load area: ",n.toString())}))})):Promise.resolve(s)):(e(s,i),c=Promise.resolve(s));return new Promise((function(e,n){c.then((function(n){if(u=(u=r.site._internal.importer.importLibrary[n.context.getStack()])?u[u.type]||u:void 0,t.function(n.onInit)?n.onInit.call(n,u):t.function(n.init)&&n.init.call(n,u),b){var i=n.imports?[r.site._internal.import(n,n.imports)]:[];new o(i,(function(e){f.error("["+r.getStack()+"] Import failed: "+e.toString())})).then((function(){Promise.resolve(r.site._internal.importer.completeImport(n,n.context.getStack())).then((function(){if(!t.function(n.onComplete)||(r=n,t.function(r.addReady)&&t.function(r.appendTo)&&t.function(r.replaceIn)))return e(n);var r;Promise.resolve(n.onComplete(u)).then((function(){n.disableServiceAPI&&n.disableServiceAPI(),u&&u.services&&Object.keys(u.services).forEach((function(e){n.services[e].disableServiceAPI()})),e(n)}))}))}))}else e(n)})).catch(n)}))}(s,u,x,l),b&&(v=t.promise(y)?y:Promise.resolve(y))),E.key.set(l,s),l.context.on(":destroy",(function(){g||r["remove"+w](s),u.emit("blue:registry:"+i+":destroy",s)})),g||(c[s]=l),E[O][s]=!0,setTimeout((function(){r&&E[O]&&delete E[O][s]}),0),b?v.then((function(e){return Promise.resolve(h.onAfterCreate?h.onAfterCreate.call(E.host,s,e):e).then((function(e){return u.emit("blue:registry:"+i+":create",s),e}))})):(h.onAfterCreate&&h.onAfterCreate.call(E.host,s,x),u.emit("blue:registry:"+i+":create",s),l)}function q(e,t){n.count("blue/as/registry","remove",w,t);var r=p(e),o=r[j],i=o[t];return r[O][t]&&(f.warn("["+r[P].getStack()+"]",["Created "+w+" "+t+" just to destroy it?","Use this.registry.has"+w+"('"+t+"')"," or this.registry.destroy"+w+"('"+t+"')"].join("\n")),delete r[O][t]),i&&(r.key.delete(i),delete o[t]),b?Promise.resolve(i):i}function A(e,n,r,o){var a,u,l=p(e),d=function(){const t=function(e,t,n,r){var o,a,u=p(e)[j],c=u[t];if(!c){o=new s({type:i,action:"construct",stage:"begin",name:t}),r.bubble(o.msgType,o);try{c=L(e,t,n,r,u,c),!g&&(u[t]=c)}catch(e){f.error("["+r.getStack()+"]","Problem creating "+i+" "+t,e)}a=new s({type:i,action:"construct",stage:"end",name:t,beginEventName:o.eventName}),c.then?c=c.then((function(e){return r.bubble(a.msgType,a.updateTimestamp()),e})):r.bubble(a.msgType,a.updateTimestamp())}return c}(e,n,r,o);return r&&r.constructor&&"AsyncFunction"===r.constructor.name?N(e,n,o).then((function(){return t})):t},h=t.string(r)?function(){return function(e,t,n,r){a=new s({type:i,action:"load",stage:"begin",name:t}),r.bubble(a.msgType,a),u=new s({type:i,action:"load",stage:"end",name:t,beginEventName:a.eventName}),r.emit("blue:registry:"+i+":load",t);var o,f,p=y?(f=n.split("!"))&&f.splice(-1,0,y)&&f.join("!"):n,d=function(){return!r.env||!("onLine"in r.env)||r.env.onLine},h=function(e){e!==c&&r.bubble("blue:network:offline",e),c=e},m=new Promise((function(n,i){var s=function(s){r.bubble(u.msgType,u.updateTimestamp()),h(!1),o=!0,s=s&&s.default||s,A(e,t,s,r);try{n(l[k][t])}catch(e){i(e)}},a=function(n){var c,l=p.split("!"),f=l.pop();r.bubble(u.msgType,u.updateTimestamp()),A(e,t,p,r);do{requirejs.undef(f)}while((c=l.pop())&&(f=requirejs.toUrl(c).slice(1)+"!"+f));d()?(h(!1),o=!0,i(n)):(h(!0),setTimeout((function(){return d()?requirejs([p],s,a):a(n)}),500))};Blue.webpack?Blue.webpack.resolve(p,s,a):requirejs([p],s,a)}));return!o&&A(e,t,m,r),N(e,t,r).then((function(){return m}))}(e,n,r,o)}:t.thenable(r)?function(){return r}:v?d()&&d:d;l[S][n]=r,Object.defineProperty(l[k],n,{get:h,set:function(){f.error("["+o.getStack()+"]","Cannot set registry "+w+" "+n+".")},configurable:!0,enumerable:!0})}function M(e){return p(this)[k][e]}function _(e){return q(this,e)}function H(e){return e in p(this)[j]}function U(e){return e in p(this)[k]}function D(e){return e&&p(this).key.get(e)}function F(e,t,r){n.count("blue/as/registry","register",w,e);var o=this,s=p(o)[P];if(H.call(o,e)){if(!r)throw Error(w+" "+e+" already exists. Use the overwrite flag if needed.");_.call(o,e)}A(o,e,t,s),s.emit("blue:registry:"+i+":register",e)}function B(e){n.count("blue/as/registry","unregister",w,e);var t=p(this),r=_.call(this,e);return delete t[k][e],t[P].emit("blue:registry:"+i+":unregister",e),r}function z(e,t){var n=this;Object.keys(e).forEach((function(r){F.call(n,r,e[r],t)}))}function $(e,t){n.count("blue/as/registry","update",w,e);var r=p(this);U.call(this,e)&&("object"==typeof t?r[T][e]=t:t||delete r[T][e])}function V(e,t,r){n.count("blue/as/registry","clone",w,e,t);var o=this,i=p(o)[S][e];if(!i)throw Error(w+" "+e+" does not exist");F.call(o,t,i,!0),r&&$.call(o,t,r)}function W(e){var n=p(this),r=n[j][e],o=function(r){if(r&&r.destroy&&!r.destroy.constructor!==Function){var o=r.destroy();return t.thenable(o)?(o.catch((function(t){f.error("["+n[P].getStack()+"]",w+" "+e+" did not destroy successfully",t)})),o):void 0}};return q(this,e),t.thenable(r)?r.then(o):Promise.resolve(r&&o(r))}function J(){var e=this,t=p(e),n=[];return Object.keys(t[k]).forEach((function(r){delete t[k][r],n.push(W.call(e,r))})),Promise.all(n)}function Y(){var e=this,t=this.registry,n=p(t),r=J.call(t);return r.catch((function(){})).then((function(){Object.keys(n).forEach((function(e){0===e.indexOf(i)&&delete n[e]})),Object.keys(t).forEach((function(e){e.indexOf(w)>0&&delete t[e]})),Object.keys(t).length||(delete e.registry,function(e){l.delete(e)}(t)),delete e[x],delete e[R]})),r}this[I]=function(e){var t,n,r=this.registry;r?t=p(r):(this.registry=r=Object.create(null),(t=p(r)).host=this),Object.defineProperty(this,x,{set:function(e){e?n?e!==t[k]&&this.context&&f.error("["+this.context.getStack()+"]",x+" can only be set once per registry"):(z.call(r,e),n=!0):(J(),n=!1)},get:function(){var e=t[k];return n||Object.keys(e).length?e:void 0},configurable:!0,enumerable:!0}),t[k]=Object.create(null),t[S]=Object.create(null),t[j]=Object.create(null),t[O]=Object.create(null),t[T]=Object.create(null),t.key=new Map,t[P]=e,r["clone"+w]=V,r["destroy"+w]=W,r["destroy"+E]=J,r["get"+w]=M,r["has"+w]=H,r["is"+w]=U,r["keyFor"+w]=D,r["register"+w]=F,r["register"+E]=z,r["remove"+w]=_,r["unregister"+w]=B,r["update"+w]=$,r["get"+E]=function(){return t[k]},this[I]=a,this[R]=Y}}})),define("blue/deferred",["require","./declare"],(function(e){"use strict";return e("./declare")({constructor:function(){var e,t;this.promise=new Promise((function(n,r){e=n,t=r})),this.resolve=e,this.reject=t},toString:function(){return"Deferred"}})})),define("blue/device/lang",["require","../has/all","../root"],(function(e){"use strict";var t,n=e("../has/all");return t=e("../root").navigator,n("navigator-languages")?t.languages[0]:n("navigator-userlanguage")?t.userLanguage:n("navigator-language")?t.language:""})),define("blue/device/screen",["../has/all","../root"],(function(e,t){"use strict";return e("screen")?t.screen:{width:0,height:0}})),define("blue/device/screen/dimensions",["require","../screen"],(function(e){"use strict";var t=e("../screen");return{width:t.width,height:t.height}})),define("blue/dom/dimensions",["require","../has/all","../root","./body"],(function(e){"use strict";var t,n,r=e("../has/all"),o=e("../root"),i=e("./body");return r("dom")&&o.addEventListener("resize",(function(){t=i.clientHeight,n=i.clientWidth})),function(){return void 0===t&&(r("dom")?(t=i.clientHeight,n=i.clientWidth):t=n=0),{width:n,height:t}}})),define("blue/device",["require","./has/all","./device/lang","./device/screen/dimensions","./dom/dimensions","./device/platform"],(function(e){"use strict";e("./has/all");var t=e("./device/lang"),n=e("./device/screen/dimensions"),r=e("./dom/dimensions"),o=e("./device/platform");return{dimensions:{screen:n,window:r()},lang:t,shortLang:t?t.split("-")[0]:"",userAgent:o.ua}})),define("blue/dom/body/dimensions",["require","../../has/all","../body"],(function(e){"use strict";var t=e("../../has/all"),n=e("../body");return function(){var e,r;return t("dom")?(e=Math.max(n.scrollHeight,n.offsetHeight,n.clientHeight),r=Math.max(n.scrollWidth,n.offsetWidth,n.clientWidth)):(e=0,r=0),{width:r,height:e}}})),define("blue/importer",["require","./is","mout/object/merge","./root","./deferred","./promiseList","URI","./log"],(function(e){"use strict";var t=e("./is"),n=e("mout/object/merge"),r=e("./root"),o=e("./deferred"),i=e("./promiseList"),s=e("URI"),a=e("./log")("[blue:core]"),u="manifest";function c(e){return e[0].toUpperCase()+e.slice(1)}function l(e){return e.application?"application":e.area?"area":e.controller?"controller":e.component?"component":""}function f(){return arguments.length?Array.prototype.join.call(arguments,"/"):""}function p(e,n){return e?t.function(e)?e:n?e.replace(/^\.\//,n+"/"):e:""}function d(e,n,o){var i=p(n,o);return t.function(i)?i():new Promise((function(t,o){r.require([i],(function(e){t(e&&e.default||e)}),(function(t){a.error("["+e.getStack()+"]","Site importer failed to load-module ("+n+")",t),e.broadcast("blue:site:error:importerLoadModuleFailed",{code:"blue:site:error:importerLoadModuleFailed",description:"Site importer failed to load module ("+n+")"+t}),o(t)}))}))}function h(e,r,o,i,s){var a={},u=function(){(a=n({},r)).block?a.loadPath=p(a.block,o):(a.module=a.module||f(i,e),a.loadPath=p(a.module,o))},c=function(){a.module=f(i,e),a.loadPath=p(a.module,o)};return s&&1!==s?2===s&&(t.plainObject(r)?u():c()):t.string(r)?(a.block=r,a.loadPath=p(r,o)):t.plainObject(r)?u():c(),a.version=s,a}var m=function(e){this.site=e,this.importMap={},this.importLibrary={}};return(m.prototype=Object.create(null)).constructor=m,m.prototype.isImport=function(e){return void 0!==this.importLibrary[e]},m.prototype.registerView=function(e,t,n){this.site.tellPage("importer:registerView",{contextStack:e,viewName:t,viewPath:n})},m.prototype.completeImport=function(e,n){var r,o=this,s=o.importLibrary[n]||{},m=s[l(s)],b=[];if(m){r=m.version||1,m._immediate={},m.viewPath?(e.viewPath={},m.viewPath.prefix&&(e.viewPath.prefix=p(m.viewPath.prefix,n)),m.viewPath.suffix&&(e.viewPath.suffix=p(m.viewPath.suffix,n))):s._local||(e.viewPath={prefix:p("./views/",n)}),m.viewEngine&&(e.context.viewEngine=m.viewEngine),["area","controller","component"].forEach((function(i){var s=i+"s",a=m[s];a&&e.registry["register"+c(i)]&&(m._immediate[s]=[],Object.keys(a).forEach((function(c){var l;1===r&&t.string(a[c])&&(a[c]=h(c,a[c],n,".",r)),t.string(a[c].block)?(o.registerRequireMap(e,c,a[c].block),b.push(d(o.site.context,f(a[c].block,u)).then((function(t){var r=h(c,t,n,f(".",s),t.version);return m&&m.components&&m.components[c]&&m.components[c].kind&&r.component&&(r.component.kind=m.components[c].kind),o.importBlock(e,c,r)})))):t.function(a[c].block)?(o.registerRequireMap(e,c,a[c].block),b.push(a[c].block().then((function(t){t=t&&t.default||t;var i=h(c,t,n,f(".",s),r);return o.importBlock(e,c,i)})))):(o.registerRequireMap(e,c,o.importMap[n]),(l={_local:!0,version:r})[i]=h(c,a[c],n,f(".",s),r),b.push(o.importBlock(e,c,l))),a[c].immediate&&m._immediate[s].push(c)})))})),m.services&&e.registry.registerService&&(m.defaultServiceInterceptors&&(m.loadedDefaultServiceInterceptors=[],m.defaultServiceInterceptors.forEach((function(e,t){m.defaultServiceInterceptors[t]=p(e,n),b.push(d(o.site.context,m.defaultServiceInterceptors[t]).then((function(e){m.loadedDefaultServiceInterceptors.push(e)})))}))),e.context.services=Object.hasOwnProperty.call(e.context,"services")?e.context.services:{},Object.keys(m.services).forEach((function(i){var s,u=m.services[i]=h(i,m.services[i],n,f(".","services"),r);u||a.error("["+e.context.getStack()+"]","Importer failed to load-service due to error in manifest"),e.registry.registerService(i,u.loadPath),u.interceptors&&(u.loadedInterceptors=[],u.interceptors.forEach((function(e,t){u.interceptors[t]=p(e,n),b.push(d(o.site.context,u.interceptors[t]).then((function(e){u.loadedInterceptors.push(e)})))}))),s=t.thenable(e.services[i])?e.services[i]:Promise.resolve(e.services[i]),b.push(s.then((function(t){e.context.services[i]=t})))}))),m.routeMappings&&e.addRouteMapping&&(m.routeMappings.forEach((function(e,t){e.module,m.routeMappings[t].loadPath=p(e.module,n),b.push(d(o.site.context,e.module).then((function(t){e.loadedModule=t})))})),m.routeInterceptors&&(m.loadedRouteInterceptors=[],m.routeInterceptors.forEach((function(e,t){m.routeInterceptors[t]=p(e,n),b.push(d(o.site.context,m.routeInterceptors[t]).then((function(e){m.loadedRouteInterceptors.push(e)})))}))));return new i(b,(function(t){a.error("["+e.context.getStack()+"]","Import dependency failed to load/create:",t)})).then((function(){var t=[];return m.services&&Object.keys(m.services).forEach((function(t){m.services[t].loadedInterceptors?m.services[t].loadedInterceptors.forEach((function(n){e.context.services[t].addInterceptor(n)})):m.loadedDefaultServiceInterceptors&&m.loadedDefaultServiceInterceptors.forEach((function(n){e.context.services[t].addInterceptor(n)}))})),m.routeMappings&&e.addRouteMapping&&(m.routeMappings.forEach((function(t){e.addRouteMapping(t.loadedModule,t.config)})),(m.loadedRouteInterceptors||[]).forEach((function(t){e.addRouteInterceptor(t)}))),Object.keys(m._immediate).forEach((function(n){m._immediate[n].forEach((function(r){t.push(e[n][r])}))})),delete m._immediate,new i(t)}))}},m.prototype.importBlock=function(r,i,u){null!==u&&"object"==typeof u||a.error("["+r.context.getStack()+"]","Unexpected type for argument block in importBlock",new TypeError("Received typeof `"+typeof u+"` for "+i+" block in importBlock. Expected typeof `object`."));var m,b,g=this,v=!u._local,y=f(r.context.getStack(),i),x=new o,w=n({},u),E=w.type=l(w),k=w[E],j={};switch(m=w.version||1,g.importLibrary[y]=w,r.registry["register"+c(E)]&&(w[E]=k=v?h(E,k,y,".",m):h(i,k,y,f(".",E+"s"),m)),E){case"application":case"area":case"controller":r.registry["register"+c(E)](i,k.loadPath),x.resolve();break;case"component":k.spec=t.function(k.spec)?k.spec:t.string(k.spec)?p(k.spec,y):p(v?f(".","spec"):f(".","components","specs",i),y),Promise.all([d(g.site.context,k.loadPath),d(g.site.context,k.spec)]).then((function(e){var t=e[0],o=e[1],s=n({},k,{methods:t&&t.default||t,spec:o&&o.default||o});w.viewEngine&&(s.viewEngine=w.viewEngine),r.registry.registerComponent(i,s,!0),x.resolve()})).catch(x.reject);break;default:return delete g.importLibrary[y],x.reject(new Error(E?'Unable to import block "'+i+'" into target '+r.context.getStack()+" : improper type for this target":'Unable to import block "'+i+'" : unknown block type')),x.promise}return k.loadPath&&k.dependencies&&k.dependencies.constructor===Object&&(b=e.toUrl(t.function(k.loadPath)&&`${i}/`||k.loadPath))&&(b=s("./",b).toString().replace(/\/js\/$/,"/"),Object.keys(k.dependencies).forEach((function(e){var t=s(e,b).toString();j[t]=k.dependencies[e]})),r.registry["update"+c(E)](i,{dependencies:j})),Object.keys(w.views||{}).forEach((function(e){g.registerView(r.context.getStack(),f(i,e),p(t.string(w.views[e])||t.function(w.views[e])?w.views[e]:f(".","views",e),y))})),x.promise},m.prototype.registerRequireMap=function(e,t,n){var o={map:{"*":{}}},i=f(e.context.getStack(),t);o.map["*"][i]=n,r.require.config(o),this.importMap[i]=n},m.prototype.applyImports=function(e,t){var n,r=this,o=[],s=function(t){var o=n,i=e.context.getStack();t(d(r.site.context,f(i,o,u)).then((function(t){return r.importBlock(e,o,t)})).catch((function(e){throw new Error("Import "+o+" failed ("+e+")")})))};for(n in t)Object.hasOwnProperty.call(t,n)&&(r.registerRequireMap(e,n,t[n]),o.push(new Promise(s)));return new i(o,(function(t){a.error("["+e.context.getStack()+"]","Import failed to load/create:",t)}))},m})),define("blue/hash",["require","blue/dom","blue/root","URI"],(function(e){"use strict";var t=e("blue/dom"),n=e("blue/root"),r=e("URI"),o=void 0;return r.getURL=function(){return t.location.toString()},r.getHash=function(e){return e===o?r().fragment():r(e).fragment()},r.setHash=function(e){location.hash=e||""},r.replaceHash=function(e){var t=new r,o=function(){try{return n.history&&n.history.state?n.history.state:1}catch(e){return 1}}(),i=e||"";t.hash(i),history.replaceState(o,"",t.toString())},r.getHashArr=function(e){var t=e;return t||(t=r.getHash()),t.replace(/^\//,"").split(/[/|?]/)},r.getParamsStr=function(e){return(e?r(e):r()).query()},r.getParamsObj=function(e){return(e?r(e):r()).query(!0)},r.getParamsArr=function(e){var t,n=e||r.getURL(),o=r.getParamsStr(n),i=o?r.getParamsObj(n):{};return t=""===o?(t=r.getHashArr()).splice(3,t.length):Object.keys(i).map((function(e){return i[e]}))},r.getCanonicalRoute=function(e){var t=e||r.getHash(r.getURL());return r.parseMatrixParamHash(t).path},r.parseSegment=function(e){var t,n,r,o,i=e.split(";"),s=decodeURIComponent(i[0]),a={};for(o=i.length-1;o>0;o--)i[o].length&&(t=i[o].indexOf("="),n=decodeURIComponent(i[o].substr(0,t)),r=(r=t?i[o].substr(t+1):"").indexOf(",")>-1?r.split(",").map((function(e){return decodeURIComponent(e)})):decodeURIComponent(r),a[n]=r);return{name:s,params:a}},r.segmentObjectToString=function(e){var t="";return Object.keys(e.params).sort().forEach((function(n){var r=encodeURIComponent(n),i="";e.params[n]===o?t+=";"+r+"=":Array.isArray(e.params[n])?(i=e.params[n].map((function(e){return encodeURIComponent(e)})).join(","),t+=";"+r+"="+i):(i=encodeURIComponent(e.params[n].toString()),t+=";"+r+"="+i)})),encodeURIComponent(e.name)+t},r.parseFragment=function(e){var t={},n=r.getHash(e).replace(/^\/+/,"").split("?"),o=n[0].split("/");return t.segments=[],o.forEach((function(e){e.length&&t.segments.push(r.parseSegment(e))})),t.query={},t.query.string=n[1]||"",t.query.params=r.getParamsObj(e)||{},t},r.addSegmentToCurrentHash=function(e,t){var n,o=r.parseFragment(),i=[];o.segments.push({name:e,params:t||{}}),i=o.segments.map((function(e){return r.segmentObjectToString(e)})),n="/"+(o.query.string?i.join("/")+"?"+o.query.string:i.join("/")),r.replaceHash(n)},r.parseMatrixParamHash=function(e){var t,n,o,i,s=e.split("?",2),a=s[0]?s[0].substr(1):"",u=a?a.split("/"):[],c=u.length,l=[],f={},p="",d="",h="",m="";return u.forEach((function(e,t){var n=r.parseSegment(e);l.push(n.name),f[t]=n.params})),c&&(p=l[0],t=f[0]?f[0]:{}),2!==c&&3!==c||(h=l[1],o=f[1]||{},m=l[2]||"index",i=f[2]||{}),4===c&&(d=l[1],n=f[1]?f[1]:{},h=l[2],o=f[2]?f[2]:{},m=l[3],i=f[3]?f[3]:{}),{hash:e,path:"/"+l.join("/"),pathOnly:"/"+a,pathSegments:l,pathSegmentParams:f,rawSegments:u,queryString:r(e).query(),queryParams:r.getParamsObj(e),matrixParams:f,app:p,appParams:t||{},area:d,areaParams:n||{},controller:h,controllerParams:o||{},action:m,actionParams:i||{}}},r})),define("blue/performance/emitter",["require","blue/observable"],(function(e){var t=e("blue/observable"),n=!1,r=null,o={};function i(){}return i.prototype.enable=function(e){n||(n=!0,o=e||{},r=new t.Bus)},i.prototype.disable=function(){n=!1,o={},r&&r.end(),r=null},i.prototype.emit=function(){if(n){r.emit.apply(this,arguments);var e=o.analyzer?o.analyzer.process:0;e&&(Array.prototype.unshift.call(arguments,o),Array.prototype.unshift.call(arguments,this.stream.emit),e.apply(this,arguments))}},Object.defineProperty(i.prototype,"isEnabled",{get:function(){return n}}),Object.defineProperty(i.prototype,"stream",{get:function(){return r}}),i})),define("blue/performance/analyzer",["require","blue/is","blue/event"],(function(e){"use strict";var t,n,r=e("blue/is"),o=e("blue/event"),i=new Map,s=["route"],a=2e3;function u(e){return"route"===e.type?e.info.route:e.name}function c(){n={totals:{},data:{}}}return c(),{process:function(e,l,f){if(f){var p=f,d=p.value||{},h=d.beginEventName;i.set(p.eventName,p),h&&function(){var e=i.get(h)||{},t=n.data[d.type],r=(o=e.timestamp,s=p.timestamp,o?s-o:0);var o,s;t||(t=n.data[d.type]={});t[d.action]||(t[d.action]=[]);t[d.action].push({name:u(d),duration:r}),n.totals[d.type]=(n.totals[d.type]||0)+r}(),r.defined(l.summary)&&(l.summaryInterval&&(a=l.summaryInterval),"auto"===l.summary?h&&~s.indexOf(d.type)&&(b(d.type),t&&(clearTimeout(t),t=0),m()):r.number(l.summary)?(a=l.summary,m()):(r.array(l.summary)||r.string(l.summary))&&function(e){var t=[],n=d.type+"."+d.action;r.string(e)?t.push(e):t=e;t.some((function(e){return e===n}))&&b(d.type)}(l.summary))}function m(){t||(t=setInterval((function(){b("time:"+a)}),a))}function b(r){if(0!==Object.keys(n.data).length){var i=new o("summary:"+r,n);e(i),c()}else t&&(clearTimeout(t),t=0)}}}})),define("blue/performance/monitor",["require","blue/root","blue/util","blue/observable","blue/performance/emitter","blue/performance/analyzer","blue/event/lifecycle"],(function(e){"use strict";var t=e("blue/root"),n=e("blue/util"),r=(e("blue/observable"),e("blue/performance/emitter")),o=e("blue/performance/analyzer"),i=e("blue/event/lifecycle"),s=t.performance&&t.performance.now&&t.performance.mark,a=new r;function u(){var e={},t={},n={},r={};s&&performance.getEntriesByType("mark");this.context.on("blue:lifecycle",(function(e){a.emit(e)})),this.context.on("blue:route:viewRenderStart",(function(t){var n=new i({type:"view",action:"render",stage:"begin",group:"app",name:t.name});a.emit(n),e[t.displayReqId]=n.eventName})),this.context.on("blue:route:viewRenderComplete",(function(t){var n=new i({type:"view",action:"render",stage:"end",name:t.contextPath+t.displayReqId,beginEventName:e[t.displayReqId]||""});a.emit(n.updateTimestamp())})),this.context.on("blue:route:routeBatchBegin",(function(e){var n=new i({type:"route",action:"batch",stage:"begin",name:e.id});a.emit(n),t[e.id]=n.eventName})),this.context.on("blue:route:routeBatchComplete",(function(e){var n=new i({type:"route",action:"batch",stage:"end",name:e.id,beginEventName:t[e.id]||"",info:{route:e.routes&&e.routes.length>0?e.routes[0].route:"/"}});a.emit(n)})),this.context.on("blue:service:serviceCallBegin",(function(e){var t=new i({type:"service",action:"request",stage:"begin",name:e.service+"."+e.serviceCall});a.emit(t),n[e.id]=t.eventName})),this.context.on("blue:service:serviceCallComplete",(function(e){var t=new i({type:"service",action:"request",stage:"end",name:e.service+"."+e.serviceCall,beginEventName:n[e.id]||""});a.emit(t)})),this.context.on("blue:route:executeAction",(function(e){var t=new i({type:"action",action:"execute",stage:"begin",name:e.contextPath+" "+e.id,info:{routeId:e.routeId,route:e.route}});a.emit(t),r[e.id]=t.eventName})),this.context.on(["blue:route:executeActionComplete","blue:error:app:actionExecutionError"],(function(e){var t=new i({type:"action",action:"execute",stage:"end",name:e.contextPath+" "+e.id,beginEventName:r[e.id]||""});a.emit(t)}))}return{enable:function(e,r){e&&!a.isEnabled&&(r=r||{},t.Blue.perfMonitoring=!0,a.enable(n.object.extend({analyzer:o,summary:"auto"},r)),s&&performance.clearMarks(),r.stream?e&&e.call(this,a.stream):e&&a.stream.onValue(e),s&&r.markTimeline&&a.stream.onValue((function(e){e.eventName&&(e.beginEventName?performance.measure(e.eventName,e.beginEventName):performance.mark(e.eventName))})),u.call(this))},disable:function(){t.Blue.perfMonitoring=!1,a.disable()}}})),define("blue/resolver",["require","./is","./as/serializable","./observable"],(function(e){"use strict";var t=e("./is"),n=e("./as/serializable"),r=e("./observable");function o(e){e||(e={}),this.prefix=e.prefix||"",this.suffix=e.suffix||""}return o.prototype.createId=function(e,t){t||(t={});var n="",r=t.prefix||this.prefix,o=t.suffix||this.suffix;return r&&0!==e.indexOf(r)&&(e.match(/^\//)?e=e.replace(/^\//,""):n+=r),n+=e,o&&(n+=o),n},o.prototype.load=function(){throw new Error('"load()" is not implemented')},o.prototype.resolve=function(e,n){return n||(n={}),t.string(e)?this.load(this.createId(e,n)):r.once(e)},n.call(o.prototype,(function(){return"Resolver[ prefix:"+this.prefix+" suffix: "+this.suffix+"]"})),o})),define("blue/resolver/module",["require","../resolver","../observable","../declare","../root","../has","blue/log"],(function(e){"use strict";var t,n,r=e("../resolver"),o=e("../observable"),i=e("../declare"),s=e("../root"),a=e("../has"),u=e("blue/log");return Blue.status.applicationLoaded.then((function(){t=u("[ModuleResolver]"),n=!0})),i(r,{constructor:function(){r.apply(this,arguments)},load:function(e){return a("webpack-resolve")?o.fromNodeCallback((function(t){Blue.webpack.resolve(e.replace("wire!",""),(function(e){t(null,e)}),(function(e){t(e)}))})):o.fromNodeCallback((function(r){s.requirejs([e],(function(e){r(null,e)}),(function(e){if(n)for(var o in s.requirejs.s.contexts._.registry)s.requirejs.s.contexts._.registry[o].error&&t.error('Requirejs failed to load module "'+o+'" failed to load due to error: ',e);r(e)}))}))},toString:function(){return"Module Resolver"}})})),define("blue/context/root",["blue/context","blue/is","blue/log","blue/util","module"],(function(e,t,n,r,o){"use strict";var i=new e,s=o.config();return i.name="ROOT",i.is=t,i.util=r,i.logger=n("[root]"),i.config=s,i})),define("blue/intercept",["require","meld"],(function(e){"use strict";var t=e("meld");return t.withAdvice=function(){["after","afterReturning","afterThrowing","around","before","on"].forEach((function(e){this[e]=function(n,r){var o=this[n],i=r.bind(this);return this[n]="function"==typeof o?t[e](o,i):i}}),this)},t.withInterceptors=function(e){function n(n,r){n._removers.push(t(n,e,"function"==typeof r?r():r))}this.addInterceptor=function(e){this._removers.length||(this._interceptors=[]),-1===this._interceptors.indexOf(e)&&(this._interceptors.push(e),n(this,e))},this.addInterceptors=function(e){var t,n=e.length;for(t=0;t<n;t++)this.addInterceptor(e[t])},this.setInterceptors=function(e){var t,n=Array.isArray(e)?e:[e],r=n.length;for(this.destroyInterceptors(),this._interceptors=[],this._removers=[],t=0;t<r;t++)this.addInterceptor(n[t]);Object.defineProperty(this,"interceptors",{set:this.setInterceptors,configurable:!0,enumerable:!1})},this.defineInterceptors=function(){var e=this.interceptors||[];this._interceptors=[],this._removers=[],Object.defineProperty(this,"interceptors",{set:this.setInterceptors,configurable:!0,enumerable:!1}),this.interceptors=e},this.destroyInterceptors=function(){this.disableInterceptors(),delete this._interceptors,delete this._removers,delete this.interceptors},this.disableInterceptors=function(){for(var e;e=this._removers.pop();)e.remove()},this.enableInterceptors=function(){var e,t=this._interceptors.length;for(this.disableInterceptors(),e=0;e<t;e++)n(this,this._interceptors[e])},this.removeInterceptor=function(e){var t=this._interceptors.indexOf(e);-1!==t&&this._interceptors.splice(t,1)}},t})),define("blue/event/channel/screen",["require","../channel"],(function(e){"use strict";return new(e("../channel"))})),define("blue/router",["require","blue/as/contextual","blue/hash","blue/intercept","blue/is","blue/log","blue/root","blue/event/channel/screen"],(function(e){"use strict";var t,n,r,o=e("blue/as/contextual"),i=e("blue/hash"),s=e("blue/intercept"),a=e("blue/is"),u=e("blue/log")("[site]"),c=e("blue/root"),l=e("blue/event/channel/screen"),f=!1,p=/(^[^/])/g,d=/^\//,h=/([^:])\/{2,}/g,m=/\?{2,}/g,b=/\/$/,g=1,v=0,y={},x=!1,w=function(){return v+=1},E=function(){try{return c.history&&c.history.state?c.history.state:1}catch(e){return 1}},k=function(e){var t,n,r=e;return r&&"#"!==r[0]&&(r="#"+r),n=t=i.getHash(r),(p.test(t)||h.test(t)||m.test(t)||b.test(t))&&(n=t.replace(p,"/$1").replace(h,"$1/").replace(m,"").replace(b,"")),n},j=function(e){var t,n,r={},o=((n=e)?((t=n.indexOf("#"))>=0&&(n=n.length<=t+1?"":n.substr(t+1)),d.test(n)?n.substr(1):n):"").split("?"),s=o[0].split("/");return r.segments=[],s.forEach((function(e){e.length&&r.segments.push(i.parseSegment(e))})),r.query={},r.query.string=o[1]||"",r.query.params=i.getParamsObj(e)||{},r},S=function(e,t,n){var o=n.source,i=n.historyState?n.historyState:1,s={oldRoute:r,newRoute:n.route,source:o||"external",privateDataObject:n.privateDataObject,isRedirect:n.isRedirect},u={parseRoute:j};y[t]||(y[t]={source:n.source,historyState:i},e.context.site.emit("blue:route:newRouteRequest",{msgType:"blue:route:newRouteRequest",id:t,source:o,route:n.route}),e._executeRoute(e.context,s,u,t),!c.history||y[t].done||"external"!==o||!a.undefined(r)&&n.route===r||(x=!0,e.context.site.emit("blue:route:newRouteRequestAborted",{msgType:"blue:route:newRouteRequestAborted",id:t,source:o,route:n.route}),i?c.history.go(g-i):c.history.go(-1),y[t].done="aborted"))},O=function(e,t){var n=this;this.name="router",this.defineContext(t),this.defineInterceptors(),this.context.on("publicRoute",(function(e){var t=k(e.route),r=w();S(n,r,{source:"public",route:t,historyState:E(),isRedirect:void 0===e.isRedirect?void 0:!!e.isRedirect})})),this.context.on("privateRoute",(function(e){var t=k(e.route),r=w();S(n,r,{source:"private",route:t,historyState:E(),privateDataObject:e.privateDataObject,isRedirect:void 0})}))};return O.prototype=Object.create(null),O.prototype.constructor=O,O.prototype._executeRoute=function(e,n,o,s){var u,f=y[s],p=n.source||"external",d=n.newRoute,h=i.parseMatrixParamHash(d),m=j(d);m.source=p,"private"===p?(h.mapping=h.pathSegments.join("."),e.site.emit("blue:route:newRouteExecuting",{msgType:"blue:route:newRouteExecuting",id:s,source:p,route:d}),m.privateDataObject=n.privateDataObject,e.site.emit("processRoute",m)):setTimeout((function(){c.history&&"external"===p&&(u=f.historyState,i.replaceHash(d),g=u),a.undefined(r)||d!==r?(r=d,h.mapping=h.pathSegments.join("."),"public"===p&&(u=g+1,c.history&&c.history.pushState(u,t,"#"+d),g=u),e.parent.routeHistory.saveRoute("site",d),e.site.emit("blue:route:newRouteExecuting",{msgType:"blue:route:newRouteExecuting",id:s,source:p,route:d}),e.site.emit("processRoute",m),c.location&&l.emit("screen",{oldUrl:e.parent.routeHistory.lastRoute(),newUrl:c.location.href,canonicalRoute:i.getCanonicalRoute(),isRedirect:n.isRedirect})):(e.site.emit("blue:route:newRouteRequestAborted",{msgType:"blue:route:newRouteRequestAborted",id:s,source:p,route:d}),e.site.logger.warn("Router public state change ignored: destination URL matches current URL "+d))}),0),y[s].done="complete"},O.prototype.updateHash=function(e){var n=k(e);c.history&&c.history.replaceState(E(),t,"#"+n),r=n},O.prototype.hashChangeListen=function(){var e=this;c.history&&(c.onhashchange=function(n){var r="",o=w(),s=g+1;x?x=!1:(r=k(i.getHash(n.newURL)),E()===g&&c.history.replaceState(s,t,"#"+r),S(e,o,{source:"external",route:r,historyState:E()}))})},O.prototype.handleInitialRoute=function(){var e=k(),t=w();S(this,t,{source:"external",route:e,historyState:E()})},O.prototype.init=function(e){var t=i.getHashArr(),r=t[0]?t[0].split(";")[0]:"";n=appRoutes&&appRoutes[0]?appRoutes[0]:"app",f?u.debug("!!!! ROUTER SHOULD ONLY BE INITIALIZED ONCE"):(f=!0,e&&this.addInterceptors(e),""!==i.getHash()?n!==r&&(this.context.parent.routeHistory.saveRoute("site"),this.context.parent.routeHistory.saveRoute("redirect"),i.replaceHash(n)):i.replaceHash(n))},O=o.call(O,{name:"router"}),s.withInterceptors.call(O.prototype,"_executeRoute"),O})),define("blue/store",["require","./is","./declare"],(function(e){"use strict";var t=e("./is");return e("./declare")({constructor:function(e){if(!t.string(e))throw new TypeError('"name" is not a string');this.name=e},clear:function(){throw new Error('"clear()" is not implemented')},get:function(){throw new Error('"get()" is not implemented')},has:function(){throw new Error('"has()" is not implemented')},remove:function(){throw new Error('"remove()" is not implemented')},set:function(){throw new Error('"set()" is not implemented')},toString:function(){return"Store"}})})),define("blue/store/enumerable",["require","../store","../declare"],(function(e){"use strict";var t=e("../store");return e("../declare")(t,{constructor:function(e){t.call(this,e)},forEach:function(){throw new Error('"forEach()" is not implemented')},keys:function(){throw new Error('"keys()" is not implemented')}})})),define("blue/store/enumerable/memory",["require","../enumerable","blue/declare","blue/perf"],(function(e){"use strict";var t=e("../enumerable"),n=e("blue/declare"),r=e("blue/perf");return n(t,{constructor:function(e,n,o){(n=n||{_type:"memory"})._q=n._q||{},this.data=n[e]||(n[e]=new Map);var i=this,s=n._q[e]||(n._q[e]=[]),a=function(e,t){if(o)try{s[0]&&function(){for(var e;e=s[0];)o[e.method].apply(o,e.args||[]),s.shift()}(),!s.sync&&(o.forEach((function(e,t){i.data.set(t,e)})),s.sync=!0),e&&o[e].apply(o,t||[])}catch(n){e&&s.push({method:e,args:t})}};t.call(this,e),Object.defineProperty(this,"size",{get:function(){return r.count("blue/store",n._type,e,"size"),a(),this.data.size},enumerable:!0}),this.clear=function(){r.count("blue/store",n._type,e,"clear"),a("clear"),this.data.clear()},this.get=function(t){return r.count("blue/store",n._type,e,"get",t),a(),this.data.get(t)},this.set=function(t,o){r.count("blue/store",n._type,e,"set",t),a("set",[t,o]),this.data.set(t,o)},this.has=function(t){return r.count("blue/store",n._type,e,"has",t),a(),this.data.has(t)},this.remove=function(t){r.count("blue/store",n._type,e,"remove",t),a("remove",[t]),this.data.delete(t)},this.keys=function(){return r.count("blue/store",n._type,e,"keys"),a(),this.data.keys()},this.forEach=function(t,o){return r.count("blue/store",n._type,e,"forEach"),a(),this.data.forEach(t,o)},r.count("blue/store",n._type,e,"create")}})})),define("blue/routeHistory",["require","blue/as/contextual","blue/is","blue/store/enumerable/memory","blue/dom","blue/hash"],(function(e){"use strict";var t,n=e("blue/as/contextual"),r=e("blue/is"),o=new(e("blue/store/enumerable/memory"))("RouteHistory"),i=e("blue/dom"),s=e("blue/hash"),a=0;function u(e){r.defined(i.title)&&e&&(i.title=e)}function c(e,t){var n,i=s.getHash(),a=0;if(0===arguments.length?(e="site",t=1):1===arguments.length&&r.string(arguments[0])?t=1:1===arguments.length&&(t=e,e="site"),o.has(e)&&(n=o.get(e)).length>0&&(n[0].url!==i&&(a=-1),t+a<n.length))return n[t+a]}function l(e){o.forEach((function(t){for(;t.length&&t[0].id>e;)t.shift()}))}return(t=function(e,t){this.name=e,this.defineContext(t),o.set("site",[])}).prototype=Object.create(null),t.prototype.constructor=t,t.prototype.saveRoute=function(e,t,n){var c,l,f=t||s.getHash();e=e||"site",n=!!n,o.has(e)||o.set(e,[]),(c=o.get(e)).length&&c[0].url===f||("site"===e||t!==s.getHash()?function(e,t,n){var o={id:++a,url:t,title:r.defined(i.title)?i.title:null,titlePrefix:"",titleSuffix:""};e.length&&(e[0].titlePrefix||e[0].titleSuffix)&&o.title===e[0].titlePrefix+e[0].title+e[0].titleSuffix&&(o.title=e[0].title,u(o.title)),n?e[0]=o:e.unshift(o)}(c,f,n):(l=o.get("site")[0])!==c[0]&&c.unshift(l))},t.prototype.clearNamedHistory=function(e){o.has(e)&&"site"!==e&&o.set(e,[])},t.prototype.lastRoute=function(){var e=c.apply(this,arguments);if(e)return e.url},t.prototype.getHistory=function(){var e=c.apply(this,arguments);if(e)return e},t.prototype.goBack=function(){var e=c.apply(this,arguments);e&&(l(e.id),u(e.titlePrefix+e.title+e.titleSuffix),s.setHash(e.url))},t.prototype.updateRouteTitle=function(e){var t=o.get("site");t[0]?(t[0].title=e,u(t[0].titlePrefix+e+t[0].titleSuffix)):u(e)},t.prototype.updateRouteTitlePrefix=function(e){var t=o.get("site");e=e||"",t[0]&&(t[0].titlePrefix=e,u(t[0].titlePrefix+t[0].title+t[0].titleSuffix))},t.prototype.updateRouteTitleSuffix=function(e){var t=o.get("site");e=e||"",t[0]&&(t[0].titleSuffix=e,u(t[0].titlePrefix+t[0].title+t[0].titleSuffix))},t.prototype.toString=function(){return" Route History "},t=n.call(t,{name:"routeHistory"})})),define("blue/site",["require","blue/as/contextual","blue/as/registry","blue/importer","blue/compose","blue/log","blue/hash","blue/is","blue/event/lifecycle","blue/performance/monitor","blue/perf","blue/resolver/module","blue/context/root","blue/router","blue/routeHistory","blue/root"],(function(e){"use strict";var t,n=e("blue/as/contextual"),r=e("blue/as/registry"),o=e("blue/importer"),i=e("blue/compose"),s=e("blue/log"),a=e("blue/hash"),u=e("blue/is"),c=e("blue/event/lifecycle"),l=e("blue/performance/monitor"),f=e("blue/perf"),p=new(e("blue/resolver/module")),d=e("blue/context/root"),h=e("blue/router"),m=e("blue/routeHistory"),b=s("[blue:core]"),g={},v={},y=e("blue/root"),x=y.performance&&y.performance.now&&y.performance.mark;function w(e,t){return t.routeHandler.mappings&&t.routeHandler.mappings.length||t.addRouteMapping("IdentityMapping"),t}return p.prefix="",p.suffix="",(t=function(e,t){var n=this,r=0;this.constructEvent=new c({type:"site",action:"construct",stage:"begin",name:"site"}),x&&performance.mark(this.constructEvent.eventName),this.name=e,this.defineContext(t,{name:"SITE",logger:s("[site]"),emitChildren:function(){var e=arguments;this.children&&this.children.forEach((function(t){t.emit.apply(t,e)}))},env:Object.create(t.env||null)}),this.context._internal={},this.context.router=new h("router",this.context),this.context.routeHistory=new m("routeHistory",this.context),this.defaultAppName="",this.context.on("bootRouter",(function(){n.bootRouter()})),this._pageQ=[],this.tellPage=function(){n._pageQ.push(arguments)},this.context._internal.importer=new o(this),this.context._internal.import=function(e,t,r){var o;return u.string(t)?(o={})[t]=r:o=t,n.context._internal.importer.applyImports(e,o)},this.context.on("processRoute",(function(e){var t,o=e.segments.shift()||{},i=o.name||n.defaultAppName||(1===(t=Object.keys(g)).length?t[0]:"");g[i]&&(e.routeId=++r,e.onSuccess=[],!o.name&&a.addSegmentToCurrentHash(i),n.registry&&n.registry.getApplication?n.registry.getApplication(i).then((function(t){e.segmentParams=o.params,t.context.emit("blue:route:routeRequest",e)})):g[i].then((function(t){e.segmentParams=o.params,t.context.emit("blue:route:routeRequest",e)})))})),this.context.on("blue:route",(function(e){var t,r,o;"blue:route:newRouteRequest"!==e.msgType&&"blue:route:newRouteRequestAborted"!==e.msgType&&"blue:route:newRouteExecuting"!==e.msgType||(t=n,r=e.msgType,o=e,Object.keys(g).forEach((function(e){t.registry&&t.registry.hasApplication&&t.registry.hasApplication(e)?t.registry.getApplication(e).then((function(e){e.context.emit(r,o)})):g[e]&&g[e].then((function(e){e.context.emit(r,o)}))})))})),this.constructEventEnd=new c({type:"site",action:"construct",stage:"end",name:"site",beginEventName:this.constructEvent.eventName}),x&&performance.mark(this.constructEventEnd.eventName),y&&setTimeout((function(){y.dispatchEvent(new Event("blueLoaded"))}),1)}).prototype=Object.create(null),t.prototype.constructor=t,t.prototype.initialize=function(e){"function"==typeof e?e.call(this,this.context):i(this,e),"function"==typeof this.onInit?this.onInit():"function"==typeof this.init&&this.init()},t.prototype.enablePerformanceMonitoring=function(e,t){l.enable.apply(this,arguments)},t.prototype.disablePerformanceMonitoring=function(){l.disable.call(this)},t.prototype.defineApplication=function(e,n,o){var i=this;return i.registry&&i.registry.getApplication||(r.call(t.prototype,"application",e,{lazy:!0,onAfterCreate:w}),i.defineApplicationsRegistry(i.context)),i.context._internal.import(i,n,o)},t.prototype.destroyApplication=function(e){return this.registry&&this.registry.hasApplication&&this.registry.hasApplication(e)?this.registry.destroyApplication(e):g[e]?g[e].then((function(t){return t.destroy().then((function(){delete g[e]}))})):Promise.resolve()},t.prototype.startApplication=function(e,t){var n,r,o,i,s,a,l=this,f=new Promise((function(e,t){n=e,r=t}));return t&&e?(i=new c({type:"application",action:"construct",stage:"begin",name:t}),l.context.bubble(i.msgType,i),l.registry&&l.registry.getApplication?o=l.registry.getApplication(t):g[t]||(o=this.createApplication(e,t)),o.then((function(e){var f=function(){var f;s=new c({type:"application",action:"construct",stage:"dependenciesLoaded",name:t}),l.context.bubble(s.msgType,s),a=new c({type:"application",action:"construct",stage:"end",name:t,beginEventName:i.eventName}),g[t]=o,u.function(e.onLoad)&&(f=e.onLoad()),f&&u.thenable(f)?f.then((function(){u.function(e.afterOnLoad)&&e.afterOnLoad(),e.tellPage=function(){},l.context.bubble(a.msgType,a.updateTimestamp()),n(e)}),(function(e){l.context.bubble(a.msgType,a.updateTimestamp()),r(e)})).catch((function(e){l.context.bubble(a.msgType,a.updateTimestamp()),r(e)})):(u.function(e.afterOnLoad)&&e.afterOnLoad(),e.tellPage=function(){},l.context.bubble(a.msgType,a.updateTimestamp()),n(e))};l.context.logger.debug("created new default application"),l.tellApp=e.context.emit.bind(e.context),(l.context._internal.importer.isImport(e.context.getStack())?Promise.resolve():e.loadSpec()).then(f).catch(f)})),f.then((function(e){e.context.broadcast("blue:applicationComplete")})),f):Promise.reject(new Error("Missing Application module paths"))},t.prototype.startPage=function(e,t){var n,r,o,i,s=this,a=new Promise((function(e,t){o=e,i=t}));return t&&e?(n=new c({type:"page",action:"construct",stage:"begin",name:"page"}),s.context.bubble(n.msgType,n),r=new c({type:"page",action:"construct",stage:"end",name:"page",beginEventName:n.eventName}),v[t]||s.createPage(e,t),v[t].then((function(e){e.loadSpec().then((function(){var t;u.function(e.onLoad)&&(t=e.onLoad()),t&&u.thenable(t)?t.then((function(){e.tellApp=function(){},s.context.bubble(r.msgType,r.updateTimestamp()),o(e)}),(function(e){s.context.bubble(r.msgType,r.updateTimestamp()),i(e)})):(e.tellApp=function(){},s.context.bubble(r.msgType,r.updateTimestamp()),o(e))}))}),(function(e){var n={},o={};b.fatal("["+s.context.getStack()+"]","Failed to load Page ("+t+")",e),o.code="blue:site:error:pageLoadError",o.description="Failed to load Page ("+t+"): "+e,s.context.broadcast(o.code,o),s.context.is.empty(g)&&((n=s.context.util.object.deepClone(o)).code="blue:error:site:pageLoadError",s.context.emit(n.code,n)),s.context.bubble(r.msgType,r.updateTimestamp()),i(e)})),a):Promise.reject(new Error("Missing Page module path"))},t.prototype.createApplication=function(e,t){var n=this,r=t+"/"+t,o=this.context,s=new Promise((function(s,a){var c=new Promise((function(t){p.resolve(e).onValue((function(e){t(e)}))})),l=new Promise((function(e){p.resolve(r).onValue((function(t){e(t)}))}));Promise.all([c,l]).then((function(e){var r,c=e[0],l=e[1];c&&l||a(new Error("Unable to load Application modules")),r=new c(t,o),i(r,l),u.function(r.onInit)?r.onInit():u.function(r.init)&&r.init(),n.tellApp=r.context.emit.bind(r.context),u.function(r.onPerf)&&(f.handler=r.onPerf.bind(r)),s(r)})).catch((function(e){a(e)}))}));return g[t]=s,s},t.prototype.createPage=function(e,t){var n=this,r=this.context,o=new Promise((function(o,s){var a=new Promise((function(t){p.resolve(e).onValue((function(e){t(e)}))})),c=new Promise((function(e){p.resolve(t).onValue((function(t){e(t)}))}));Promise.all([a,c]).then((function(e){var a,c=e[0],l=e[1];c&&l||s(new Error("Unable to load Page modules")),a=new c(t,r),i(a,l),u.function(a.onInit)?a.onInit():u.function(a.init)&&a.init(),n.tellPage=a.context.emit.bind(a.context),n._pageQ&&(n._pageQ.forEach((function(e){n.tellPage.apply(n,e)})),delete n._pageQ),o(a)})).catch((function(e){s(e)}))}));return v[t]=o,o},t.prototype.wireAppPage=function(e,t){e&&t&&(e.tellPage=t.context.emit.bind(t.context),t.tellApp=e.context.emit.bind(e.context),e.tellPage("application:ready"),t.tellApp("page:ready"),y&&y.dispatchEvent(new Event("blueReady")))},t.prototype.bootRouter=function(e){this.context.router.init(e),this.context.router.hashChangeListen(),this.context.router.handleInitialRoute(),y&&y.dispatchEvent(new Event("blueStarted"))},new(t=n.call(t,{name:"site"}))("site",d)})),define("blue/dom/title",["require","../dom","../site"],(function(e){"use strict";var t=e("../dom"),n=e("../site").context.routeHistory;return function(){this.getTitle=function(){return t.title},this.setTitle=function(e){n.updateRouteTitle(e)},this.getPrefix=function(){var e=n.getHistory(0);return e?e.titlePrefix:""},this.setPrefix=function(e){n.updateRouteTitlePrefix(e)},this.getSuffix=function(){var e=n.getHistory(0);return e?e.titleSuffix:""},this.setSuffix=function(e){n.updateRouteTitleSuffix(e)},this.clearPrefix=function(){n.updateRouteTitlePrefix()},this.clearSuffix=function(){n.updateRouteTitleSuffix()}}})),define("blue/event/channel/domEvents",["require","../../event","../../is","../channel"],(function(e){"use strict";var t=e("../../event"),n=e("../../is"),r=new(e("../channel"));function o(e,t,n){t.forEach((function(t){e.addEventListener(t,n.bind(e))}))}function i(e){var n=new t(e,{type:e.type,target:this});r.emit(n)}return n.defined(document)&&o(document,["click","scroll"],i),n.defined(window)&&o(window,["click","keydown","keyup","resize","scroll","beforeunload"],i),r})),define("blue/event/channel/analytics",["require","../channel","./component","./domEvents","../../device","../../dom/dimensions","../../device/lang"],(function(e){"use strict";var t=new(e("../channel")),n=e("./component"),r=e("./domEvents"),o={},i=e("../../device"),s=e("../../dom/dimensions"),a=e("../../device/lang"),u=r.asEventStream("beforeunload"),c=n.asEventStream().merge(u);return c.onValue((function(e){return e.identity={device:i},e.identity.device.dimensions.window=s(),e.location=o,e.language=a,e})),t.plug(c),t})),define("blue/event/channel/controller",["require","../channel"],(function(e){"use strict";return new(e("../channel"))})),define("blue/$",["require","jquery"],(function(e){"use strict";return e("jquery")})),define("blue/fill/promise/allSettled",[],(function(){"use strict";return{shim:function(){"function"!=typeof Promise.allSettled&&Reflect.defineProperty(Promise,"allSettled",{value:function(e){var t=Array.from(e);return Promise.all(t.map((function(e){var t=Promise.resolve(e);try{return t.then((function(e){return{status:"fulfilled",value:e}}),(function(e){return{status:"rejected",reason:e}}))}catch(e){return Promise.reject(e)}})))}})}}})),define("blue/fill/dom/event",["require","../../is","../../dom"],(function(e){"use strict";var t=e("../../is"),n=e("../../dom");return function(e,r){if(t.undefined(e))throw new Error("Not enough arguments");t.undefined(r)&&(r={});var o=n.createEventObject();return o.type=e,o.bubbles=!!t.boolean(r.bubbles)&&r.bubbles,o.cancelable=!!t.boolean(r.cancelable)&&r.cancelable,o}})),define("blue/fill",["require","blue/device","webcrypto-shim","blue/$","blue/has/all","blue/fill/promise/allSettled","blue/root","blue/fill/dom/event"],(function(e){"use strict";e("blue/device"),e("webcrypto-shim");var t,n,r=e("blue/$"),o=(e("blue/has/all"),e("blue/fill/promise/allSettled")),i=e("blue/root"),s=(e("blue/fill/dom/event"),function(e,t){var n;try{n=new i.MouseEvent(t,{bubbles:!0,cancelable:!0,view:i,button:0}),e.dispatchEvent(n)}catch(r){document.createEvent?((n=document.createEvent("MouseEvent")).initMouseEvent(t,!0,!0,i,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(n)):document.createEventObject&&((n=document.createEventObject(i.event)).button=1,e.fireEvent("on"+t,n))}});document&&document.body&&(r(document.body).on("mouseup touchend pointerup MSPointerUp",(function(){t=!0,clearTimeout(n),n=setTimeout((function(){t=!1}),300)})),r(document.body).click((function(e){t||(i.PointerEvent?(s(e.target,"pointerdown"),s(e.target,"pointerup"),s(e.target,"pointercancel")):i.MSPointerEvent?(s(e.target,"MSPointerDown"),s(e.target,"MSPointerUp"),s(e.target,"MSPointerCancel")):(s(e.target,"mousedown"),s(e.target,"mouseup")))}))),o.shim()})),define("blue/store/enumerable/cookie",["require","blue/store/enumerable","blue/has/all","blue/dom","blue/declare","blue/root"],(function(e){"use strict";var t=e("blue/store/enumerable"),n=(e("blue/has/all"),e("blue/dom")),r=e("blue/declare"),o=e("blue/root"),i=function(e,t){return"anonymous"===e?t:["store",e,t].join("~")},s=function(e,t){return t?e:encodeURIComponent(e)},a=function(e,t){return t?e:decodeURIComponent(e)},u=function(e){return"string"!=typeof e?"lax":["strict","lax","none"].includes(e.toLowerCase())?e:"lax"};return r(t,(function(){var e={getItem:function(e,t){return a(n.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+s(e,t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"),t)||null},setItem:function(e,t,r,o,i,a,u,c){if(!e||/^(?:expires|max-age|path|domain|secure|samesite)$/i.test(e))return!1;var l="";if(r)switch(r.constructor){case Number:l=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:l="; expires="+r;break;case Date:l="; expires="+r.toUTCString()}var f=a||"None"===u?"; secure":"";return n.cookie=s(e,c)+"="+s(t,c)+l+(i?"; domain="+i:"")+(o?"; path="+o:"")+f+"; SameSite="+u,!0},removeItem:function(e,t,r,o){return!(!e||!this.hasItem(e))&&(n.cookie=s(e,o)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(t?"; path="+t:""),!0)},hasItem:function(e,t){return new RegExp("(?:^|;\\s*)"+s(e,t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(n.cookie)},keys:function(e){for(var t=n.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),r=0;r<t.length;r++)t[r]=a(t[r],e);return t}};return{constructor:function(n,r,o,s,a,c,l){null===n&&(n="anonymous"),t.call(this,n),this.ids=new Set,this.size=0,this.raw=r,this.end=o,this.path=s,this.domain=a,this.secure=c,this.sameSite=u(l),this.namespace=function(e){return["store",e].join("~")+"~"}(this.name),this.getId=i.bind(this,this.name);for(var f=e.keys(this.raw),p=0;p<f.length;p++){var d=f[p];"anonymous"!==n&&0!==d.indexOf(this.namespace)||this.ids.has(d)||(this.ids.add(d),this.size++)}},clear:function(){this.keys().forEach(function(e){this.remove(e)}.bind(this))},forEach:function(e,t){this.keys().forEach((function(n){e.call(t||o,this.get(n),n,this)}),this)},get:function(t){var n=e.getItem(this.getId(t),this.raw);return n?this.raw?n:JSON.parse(n):void 0},has:function(e){return this.ids.has(this.getId(e),this.raw)},keys:function(){var e=[];return this.ids.forEach((function(t){e.push(t.split("~").pop())})),e},set:function(t,n,r,o,i,s,a){var c,l=this.getId(t);a&&(c=u(a)),this.ids.has(l)||this.ids.add(l),e.setItem(l,this.raw?n:JSON.stringify(n),r||this.end,o||this.path,i||this.domain,s||this.secure,c||this.sameSite,this.raw),this.size++},remove:function(t,n,r){var o=this.getId(t);this.ids.has(o)&&(this.ids.delete(o),e.removeItem(o,n||this.path,r||this.domain,this.raw),this.size--)}}}))})),define("blue/queue",["require","blue/log","./declare"],(function(e){"use strict";var t=new(e("blue/log"))("[queue]");return e("./declare")((function(){var e=function(e){return new Promise((function(t,n){try{e(t)}catch(e){n(e)}}))},n=function(e){return e((function(){})),Promise.resolve()};return{constructor:function(e){e=e||"sync",this.q=[],this.sync="sync"===e,this.running=!1},execQ:function(){var e=this;e.running||void 0===e.q[0]||(e.running=!0,e.q.shift()().then((function(){e.running=!1,e.execQ()})).catch((function(t){throw e.running=!1,e.execQ(),t})).catch((function(e){throw t.warn("Queue execution encountered an error",e),e})))},idle:function(){return!this.running&&void 0===this.q[0]},busy:function(){return this.running||void 0!==this.q[0]},add:function(t){this.sync?this.q.push(e.bind(void 0,t)):this.q.push(n.bind(void 0,t)),this.execQ()}}}))})),define("blue/resource",["require","./is","./declare"],(function(e){"use strict";var t=e("./is");return e("./declare")({constructor:function(e){if(!t.string(e))throw new TypeError('"name" is not a string');this.name=e},destroy:function(){throw new Error('"destroy()" is not implemented')},read:function(e){throw new Error('"read()" is not implemented')},update:function(e){throw new Error('"update()" is not implemented')},toString:function(){return"Resource"}})})),define("blue/string/parsePipedList",["require","../is","../root"],(function(e){"use strict";var t=e("../is"),n=e("../root").unescape,r=function(e,t){if(-1!==e.indexOf(t)){var n=e.charAt(e.length-1)===t,r=n&&e.charAt(e.length-2)===t;return(n&&!r?e.substring(0,e.length-1):e).split(t)}return e};return function(e){for(var o=r(n(e),"|"),i={},s=0,a=o.length;s<a;s++){var u=o[s].split("="),c=u[0],l=r(decodeURIComponent(u[1]),"&");if(t.array(l))for(var f=0,p=l.length;f<p;f++){var d=l.shift();d=d.split(","),l.push(d)}else l=r(l,",");i[c]=l}return i}})),define("blue/object/toPipedList",["require","../is","../log","../root"],(function(e){"use strict";var t=e("../is"),n=e("../log")("[app]"),r=e("../root").escape,o=function(e,n){return t.array(e)?e.join(n)+n:e};return function(e,i){var s,a,u,c=[];return t.function(i)||(i=function(){return!0}),Object.keys(e).forEach((function(l){var f=e[l];if(s=t.array(f),a=s&&!!f.length&&t.array(f[0]),i(l,f)){if(a){for(var p=0,d=f.length;p<d;p++){var h=f.shift();h=h.join(","),f.push(h)}f=o(f,"&")}s&&(f=o(f,",")),u=a?r(l+"=")+f:r(l+"="+encodeURIComponent(f)),c.push(u)}else n.error("Invalid key or value:",l+"="+f)})),o(c,"|")}})),define("blue/resource/persona",["require","../is","../has/detect","../root","../resource","../store/enumerable/cookie","../log","moment","../string/parsePipedList","../object/toPipedList","../declare"],(function(e){"use strict";e("../is");var t=e("../has/detect"),n=e("../root"),r=e("../resource"),o=e("../store/enumerable/cookie"),i=e("../log")("[app]"),s=e("moment"),a=e("../string/parsePipedList"),u=e("../object/toPipedList"),c=e("../declare"),l=new Date,f=(l.setDate(l.getDate()+365),n.location&&n.location.hostname?n.location.hostname:""),p=new o(null,!0,l,"/",""===f?"":"localhost"===f?"localhost":".chase.com"),d=a,h=function(e,t,n){var r=n[e];if(r)for(var o=0,i=r.length;o<i;o++)if(t===r[o])return"Y";return"N"},m=u,b=function(e,t){return!0};return c(r,(function(){return{constructor:function(e){e=e||"PC_1_0",r.call(this,e)},destroy:function(){p.remove(this.name)},read:function(e){e=e||!1;var t,n=p.get(this.name);if(e)t=n;else if(n)try{(n=d(n)).pplr=h("ppl","A",n),n.fieir=h("fiei","Y",n),n.fpeir=h("fpei","Y",n),n.sieir=h("siei","Y",n),n.tieir=h("tiei","Y",n),n.accounts=function(e){var t={};if(e)for(var n=0,r=e.length;n<r;n++){var o=e[n];t[o[0]]={},t[o[0]].uratc=o[1],t[o[0]].rwdb=o[2]}return t}(n.accts),t=n}catch(e){i.error("Unable to read Persona resource:",this.name,". Error:",e)}return t},update:function(e){try{var n=t("date-toisostring")?(new Date).toISOString().split("T")[0]:s.format("YYYY-MM-DD");"string"==typeof e&&(e=d(e)),e.lastUpdate=n,e.lastSent=e.lastSent||e.lastUpdate,e.segment&&e.seg&&delete e.seg,function(e,t){for(var n=0,r=(e=e.split(" ")).length;n<r;n++)void 0!==t[e[n]]&&delete t[e[n]]}("fieir fpeir pplr sieir tieir accounts",e),e=m(e,b),p.set(this.name,e)}catch(t){i.error("Unable to update Persona resource:",this.name,"=",e,". Error:",t)}},toString:function(){return"Persona"}}}))})),define("blue/store/enumerable/localUnbuffered",["require","blue/store/enumerable","blue/root","blue/declare"],(function(e){"use strict";var t,n=e("blue/store/enumerable"),r=e("blue/root"),o=e("blue/declare"),i=function(){},s=function(e,t){return["store",e,t].join("~")};try{(t=r.localStorage).length}catch(e){t={length:0,getItem:i,removeItem:i,setItem:i}}return o(n,(function(){return{constructor:function(e){n.call(this,e),this.ids=new Set,this.size=0,this.namespace=function(e){return["store",e].join("~")+"~"}(this.name),this.getId=s.bind(this,this.name);for(var r=0;r<t.length;r++){var o=t.key(r);0!==o.indexOf(this.namespace)||this.ids.has(o)||(this.ids.add(o),this.size++)}},clear:function(){this.keys().forEach(this.remove.bind(this))},forEach:function(e,t){this.keys().forEach((function(n){e.call(t||r,this.get(n),n,this)}),this)},get:function(e){var n=t.getItem(this.getId(e));return n&&"undefined"!==n?JSON.parse(n):void 0},has:function(e){return this.ids.has(this.getId(e))},keys:function(){var e=[];return this.ids.forEach((function(t){e.push(t.split("~").pop())})),e},set:function(e,n){var r=this.getId(e);this.ids.has(r)||this.ids.add(r),t.setItem(r,JSON.stringify(n)),this.size++},remove:function(e){var n=this.getId(e);this.ids.has(n)&&(this.ids.delete(n),t.removeItem(n),this.size--)}}}))})),define("blue/store/enumerable/local",["require","./localUnbuffered","./memory"],(function(e){"use strict";var t=e("./localUnbuffered"),n=e("./memory"),r={_type:"local"};return function(e){return new n(e,r,new t(e))}})),define("blue/store/enumerable/sessionUnbuffered",["require","../enumerable","blue/root","blue/declare","blue/has"],(function(e){"use strict";var t=e("../enumerable"),n=e("blue/root"),r=e("blue/declare"),o=e("blue/has"),i=function(e,t){return["store",e,t].join("~")};return r(t,(function(){return{constructor:function(e){if(t.call(this,e),this.ids=new Set,this.size=0,this.namespace=function(e){return["store",e].join("~")+"~"}(this.name),this.getId=i.bind(this,this.name),o("sessionstorage"))for(var n=0;n<sessionStorage.length;n++){var r=sessionStorage.key(n);0!==r.indexOf(this.namespace)||this.ids.has(r)||(this.ids.add(r),this.size++)}},clear:function(){this.keys().forEach(this.remove.bind(this))},forEach:function(e,t){this.keys().forEach((function(r){e.call(t||n,this.get(r),r,this)}),this)},get:function(e){var t=o("sessionstorage")?sessionStorage.getItem(this.getId(e)):void 0;return t&&"undefined"!==t?JSON.parse(t):void 0},has:function(e){return this.ids.has(this.getId(e))},keys:function(){var e=[];return this.ids.forEach((function(t){e.push(t.split("~").pop())})),e},set:function(e,t){var n=this.getId(e);this.ids.has(n)||this.ids.add(n),o("sessionstorage")&&sessionStorage.setItem(n,JSON.stringify(t)),this.size++},remove:function(e){var t=this.getId(e);this.ids.has(t)&&(this.ids.delete(t),o("sessionstorage")&&sessionStorage.removeItem(t),this.size--)}}}))})),define("blue/store/enumerable/session",["require","./sessionUnbuffered","./memory"],(function(e){"use strict";var t=e("./sessionUnbuffered"),n=e("./memory"),r={_type:"session"};return function(e){return new n(e,r,new t(e))}})),define("blue/settings",["require","blue/store/enumerable/local","blue/store/enumerable/session","blue/store/enumerable/cookie"],(function(e){"use strict";var t={local:e("blue/store/enumerable/local"),session:e("blue/store/enumerable/session"),cookie:e("blue/store/enumerable/cookie")},n=Object.prototype.hasOwnProperty;return new function(e){var r,o,i,s=this,a=null,u={},c={},l=function(i){var l,f,p,d=i.name,h=t[i.type],m=function(e){Object.defineProperty(p,e,{get:function(){return h.get(e)},set:function(t){h.set(e,t)},configurable:!0,enumerable:!0})};if(s.Type[d]=d,c[d]={clearable:i.clearable,set:h?function(e,t){n.call(p,e)||m(e),p[e]=t}:function(e,t){p[e]=t},remove:h?function(e){h.remove(e),delete p[e]}:function(e){delete p[e]},clear:h?function(){h.clear(),Object.keys(p).forEach((function(e){delete p[e]}))}:function(){Object.keys(p).forEach((function(e){delete p[e]}))}},u[d]=p=a=Object.create(a),h)for(l=(h=h([e,d].join("~"))).keys();f=l.next().value;)m(f);o=d,i.default&&(r=d)};for(s.Type={},i=1;i<arguments.length;i++)l(arguments[i]);r=r||o,s.clear=function(e){c[e].clearable&&c[e].clear()},s.get=function(e,t){return t?n.call(u[t],e)?u[t][e]:void 0:u[r][e]},s.has=function(e,t){return t?n.call(u[t],e):e in u[r]},s.set=function(e,t,n){var o,i;switch((e||1).constructor){case String:c[n||r].set(e,t);break;case Object:for(o in i=c[t||r].set,e)i(o,e[o])}},s.remove=function(e,t){c[t||r].remove(e)}}("settings",{name:"SITE"},{name:"APP"},{name:"ENV",clearable:!0},{name:"USER",clearable:!0},{name:"PERM"},{name:"TEMP",clearable:!0,default:!0})})),define("blue/siteData",["require","exports","module","./is"],(function(e,t,n){"use strict";var r=n.config(),o=e("./is"),i=o.plainObject(r)?r:{};return{setData:function(e,t){i[e]=t},getData:function(e){return o.defined(i[e])?i[e]:void 0}}})),define("blue/siteMode",["require","exports","module","./is"],(function(e,t,n){"use strict";var r=n.config(),o=e("./is"),i=o.plainObject(r)?r:{};return{setMode:function(e,t){i[e]=t},isModeEnabled:function(e){return o.defined(i[e])&&!!i[e]}}})),define("blue/siteFeature",["require","exports","module","./is"],(function(e,t,n){"use strict";var r=n.config(),o=e("./is"),i=o.plainObject(r)?r:{};return{setData:function(e,t){i[e]=t},getData:function(e){return o.defined(i[e])?i[e]:void 0}}})),define("blue/store/weakMemory",["require","blue/store","blue/declare"],(function(e){"use strict";var t=e("blue/store");return e("blue/declare")(t,{constructor:function(e){t.call(this,e),this.data=new WeakMap,this.size=0},clear:function(){this.data=void 0,this.data=new WeakMap,this.size=0},get:function(e){return this.data.get(e)},has:function(e){return this.data.has(e)},set:function(e,t){this.data.set(e,t),this.size++},remove:function(e){this.data.has(e)&&(this.data.delete(e),this.size--)}})})),define("blue/main",(function(){}));