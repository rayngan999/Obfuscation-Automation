Cube("datav:/com/text-label/1.2.11",["datav:/npm/bcore/0.0.18/event","datav:/npm/jquery/2.1.4","datav:/npm/lodash/4.6.1"],function(a,b,c){var d=c("datav:/npm/bcore/0.0.18/event"),e=c("datav:/npm/jquery/2.1.4"),f=c("datav:/npm/lodash/4.6.1");return a.exports=d.extend(function(a,b){this.config={theme:{}},this.container=e(a),this.apis=b.apis,this._data=null,this.init(b)},{init:function(a){this.mergeConfig(a),this.setTemplate(),this.updateLayout(),this.updateStyle(),this.compiled=this.setTemplate()},render:function(a,b){if(a=this.data(a),a&&0<a.length){var c=this.mergeConfig(b),d=c.series,e=this.container;e.empty(),this.updateStyle();var g="auto",h="auto",j="normal";!1===c.global.autoMode&&(this.updateLayout(),g=this.labelWidth+"px",h=this.labelHeight+"px",j=this.labelHeight-2*c.defaultLabel.padding+"px");for(var k=this.compiled,l="",m=0;m<a.length;m++){var i=a[m],n=f.cloneDeep(c.defaultLabel),o=f.merge(n,d[i.type]||{});i.width=g,i.height=h,i.lineheight=j,i.maxwidth=e.width()-2*o.padding,i.marginRight=c.global.marginRight,i.marginBottom=c.global.marginBottom,i=f.merge(i,o),l+=k(i)}e.css({"font-size":0}),e.append(l)}},resize:function(){this.render()},setColors:function(){},data:function(a){return a&&0<a.length&&(this._data=a),this._data},setTemplate:function(){return f.template("<div style=\"display: inline-block;text-overflow: ellipsis;white-space: nowrap;overflow: hidden;vertical-align: middle;text-align: center;max-width: <%= maxwidth %>px;width: <%= width %>;height: <%= height %>;line-height: <%= lineheight %>;border-radius: <%= borderRadius %>px;margin-right: <%= marginRight %>px;margin-bottom: <%= marginBottom %>px;padding: <%= padding %>px;background-color: <%= backgroundColor %>;color: <%= textStyle.color %>;font-size: <%= textStyle.fontSize %>px;font-weight: <%= textStyle.fontWeight %>\"><%= content %></div>")},setSeriesConfig:function(){var a=this.config,b=a.series;b=f.keyBy(b,"typeName"),this.config.series=b},mergeConfig:function(a){return a?(this.config.theme=f.defaultsDeep(a.theme||{},this.config.theme),this.setColors(),this.config=f.defaultsDeep(a||{},this.config),this.setSeriesConfig(),this.config):this.config},updateLayout:function(){var a=this.container,b=this.config;this.labelWidth=Math.floor(a.width()/b.global.columNum)-b.global.marginRight,this.labelHeight=Math.floor(a.height()/b.global.rowNum)-b.global.marginBottom},updateStyle:function(){var a=this.config;this.container.css({"font-family":"\""+a.global.textStyle.fontFamily+"\""})},destroy:function(){this._data=null,this.container.empty()}}),a.exports});