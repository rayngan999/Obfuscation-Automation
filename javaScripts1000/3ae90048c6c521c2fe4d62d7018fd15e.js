function escapeSearchHtmlEntities(){$("#Ntt").val($("<textarea />").html($("#Ntt").val()).text())}function getQueryParams(f){f=f.split("+").join(" ");for(var c,b={},d=/[?&]?([^=]+)=([^&]*)/g;c=d.exec(f);){b[decodeURIComponent(c[1])]=decodeURIComponent(c[2])}return b}function selectAll(f){var c=document.getElementsByTagName("input"),b=new Array;for(d=0,iarr=0;d<c.length;d++){att=c[d].getAttribute("name"),"check"==att&&(b[iarr]=c[d],iarr++)}for(var d in b){b[d].checked!=f.checked&&(b[d].click(),b[d].checked=f.checked)}}function gatherChecked(){itemIds=[];var d=document.getElementsByTagName("input"),c=new Array;for(b=0,iarr=0;b<d.length;b++){att=d[b].getAttribute("name"),"check"==att&&(c[iarr]=d[b],iarr++)}for(var b=c.length-1;b>=0;b--){"checkbox"===c[b].type&&c[b].checked&&itemIds.push(c[b].id)}return itemIds}function getQuantitiesOfChecked(a){for(quans=[],i=0;i<a.length;i++){quans[i]=$("#"+a[i]+"_qty").val()}return quans}function hoverOn(){$(this).siblings().removeClass("active"),$(this).addClass("active")}function hoverOff(){$(this).removeClass("active")}function subnavOn(){$(this).siblings().removeClass("active"),$(this).addClass("active")}function subnavOff(){}function signupOptins(){var a=$("#global-email").val();return $.modal('<iframe src="/global/modals/bronto.jsp?modal=true&emailVal='+a+'" height="540" width="820" scrolling="auto">',{overlayClose:!0}),!1}function closeModalDialog(){parent.$.modal.close()}var isResponseBelow3sec=false;var canPopulateJetloreResponse=true;var cartProdsList=null;function addToCartItemsCat(d,c,b){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",function(a){addToCartItemsCatOriginal(d,c,b)})}else{addToCartItemsCatOriginal(d,c,b)}}function addToCartItemsCatOriginal(d,c,b){if($("#add-item-error-message").remove(),""==d&&""==c){dataString=$("#addToCartQuickOrderHeader").serialize()}else{$("#"+c+"_qty").val();dataString=$("#addToCart"+d).serialize()}return $.ajax({type:"POST",url:b,data:dataString,dataType:"json",success:function(e){if(null!=e&&"undefined"!=typeof e.errors&&"true"==e.error){if(e.noAddedProducts){$.modal('<iframe src="/global/modals/cart.jsp?modal=true" height="360" width="840" scrolling="auto">',{overlayClose:!0})}else{$("#body").prepend('<div id="add-item-error-message" class="message message-red"></div>');for(var g="",f=0;f<e.errors.length;f++){g=""==g?e.errors[f]:g+"<br />"+e.errors[f]}$("#add-item-error-message").html("<p>"+g+"</p>")}}else{updateMainCart();updateminCart();$.modal('<iframe src="/global/modals/cart.jsp?modal=true" height="360" width="840" scrolling="auto">',{overlayClose:true})}},error:function(h,g,f){}}),!1}function updateMainCart(){$.ajax({url:"/spc/includes/displayCartLineItems.jsp?modal=true",type:"POST",cache:true,success:function(a){$(".cartLineItem-wrapper").html(a)},error:function(){console.log("error")}})}function updateminCart(){$.ajax({url:"/includes/gadgets/header-tools-cart.jsp?modal=true",type:"POST",cache:true,success:function(a){$(".header-tools-cart").html(a);$("#minicartCount").empty();$.ajax({url:"/global/content/minicart-items-count.jsp",cache:false}).done(function(b){$("#minicartCount").html(b)})},error:function(){console.log("error")}})}function addToCompareList(){var a=gatherChecked2();return $("#compareProductList").val(a),$("#add-item-error-message").hide(),$("#lastBrowsedUrl").val(window.location.href),dataString=$("#compareProducts").serialize(),$.ajax({type:"POST",url:"/catalog/compare.jsp",data:dataString,dataType:"json",success:function(d){if(null!=d&&"undefined"!=typeof d.errors&&"true"==d.error){for(var c="",b=0;b<d.errors.length;b++){c=""==c?d.errors[b]:c+"<br />"+d.errors[b]}$("#body").prepend('<div id="add-item-error-message" class="message message-red"></div>'),$("#add-item-error-message").html("<p>"+c+"</p>")}else{window.location.href="/catalog/compare.jsp"}}}),!1}function hookTypeAhead(){$.ui.autocomplete.prototype._renderMenu=function(h,d){var c=this,g="",f="";var b;$.each(d,function(j,e){if("product"==e.type){b=e.seeAllResultsUrl;b=decodeHtml(b)}e.category!=g&&($("<li></li>").addClass("search-flyout-"+e.type).append("<ul class='menu-"+e.type+"'><div class='suggestType'><b>"+e.category+"</b><br></div></ul>").appendTo(h),g=e.category),c._renderItem(h,e)});$("<a id='type-ahead-product' class='button' style='float:right' href='#' onclick=''>See All Results</a>").appendTo(".search-flyout-product"),$("#type-ahead-product").attr("onclick","window.location="+b)},$.ui.autocomplete.prototype._renderItem=function(h,k){var j,b=k.type,m=decodeHtml(this.term),g=new RegExp("("+m+")","gi"),c=k.label,d=decodeHtml(c),f=d.replace(g,"<span class='txtb'>$1</span>");if("product"==k.type||"content"==k.type){f='<div class="suggestion-'+k.type+'"><span class="suggestion-'+k.type+'"><img class="sug-thumb-'+k.type+'"src='+k.imagePath+">&nbsp;&nbsp;"+f+"</span></div>"}return"category"==k.type?j="<a href='#' onclick='window.location="+k.link+"'>"+f+"</a>":"product"==k.type?j="<a href='#' onclick='window.location="+k.link+"'>"+f+"</a>":"content"==k.type&&(j="<a href='#' onclick='window.location="+k.link+"'>"+f+"</a>"),k.value=$("<div/>").html(k.value),$("<li></li>").data("item.autocomplete",k).append(j).addClass(b).appendTo($(".menu-"+k.type))};var a="input.global-search";$(a).autocomplete({source:function(d,c){var b=$.trim(decodeHtml(d.term));$.ajax({url:"/includes/gadgets/type-ahead-new.jsp",dataType:"json",data:{Dy:"1",Nty:"1",Ntt:$.trim(decodeHtml(d.term))},success:function(h){var f=[];var g=[];$.each(h,function(j,e){$.each(e.records,function(l,k){f.push(k);g.push(k.link)})});c(f);tealiumAutocomplete(b,JSON.stringify(g))}})},minLength:3,delay:400})}function addCheckedItemstoCart(d){$("#add-item-error-message").remove();var c=gatherChecked2(),b=getQuantitiesOfCheckedToCart(c);return $("#checkedItems").val(c),$("#checkedItemsQty").val(b),dataString=$("#addCheckedToCart").serialize(),$.ajax({type:"POST",url:d,data:dataString,dataType:"json",success:function(h){if(null!=h&&"undefined"!=typeof h.errors&&"true"==h.error){if(h.noAddedProducts){$.modal('<iframe src="/global/modals/cart.jsp?modal=true" height="360" width="840" scrolling="auto">',{overlayClose:!0})}else{$("#body").prepend('<div id="add-item-error-message" class="message message-red"></div>');for(var g="",f=0;f<h.errors.length;f++){g=""==g?h.errors[f]:g+"<br />"+h.errors[f]}$("#add-item-error-message").html("<p>"+g+"</p>")}}else{$("#minicartCount").empty(),$.ajax({url:"/global/content/minicart-items-count.jsp",cache:!1}).done(function(a){$("#minicartCount").html(a)}),$.modal('<iframe src="/global/modals/cart.jsp?modal=true" height="360" width="840" scrolling="auto">',{overlayClose:!0})}}}),!1}function gatherChecked2(){itemIds=[];var d=document.getElementsByTagName("input"),c=new Array;for(b=0,iarr=0;b<d.length;b++){att=d[b].getAttribute("name"),"check"==att&&(c[iarr]=d[b],iarr++)}for(var b=c.length-1;b>=0;b--){"checkbox"===c[b].type&&c[b].checked&&itemIds.push(c[b].id)}return itemIds}function gatherCheckedOmni(){itemIds=[];var d=document.getElementsByTagName("input"),c=new Array;for(b=0,iarr=0;b<d.length;b++){att=d[b].getAttribute("name"),"check"==att&&(c[iarr]=d[b],iarr++)}for(var b=c.length-1;b>=0;b--){"checkbox"===c[b].type&&c[b].checked&&itemIds.push(";"+c[b].id)}return itemIds}function getQuantitiesOfCheckedToCart(b){for(quans=[],i=0;i<b.length;i++){var a=$("#"+b[i]+"_qty").val();(""==a||void 0==a)&&(a="1"),quans[i]=a}return quans}function plpComparisonAction(g,c,b,f){var d=$("#changeComparisonForm"+c);g=$(f).is(":checked")?"add":"remove",g&&("add"==g?(d.find("#ch_comp_f_remove").attr("disabled","disabled"),d.find("#ch_comp_f_add").removeAttr("disabled")):"remove"==g&&(d.find("#ch_comp_f_add").attr("disabled","disabled"),d.find("#ch_comp_f_remove").removeAttr("disabled")),d.find("#ch_comp_f_prodId").val(c)),dataString=d.serialize(),$.ajax({type:"POST",url:b,data:dataString,dataType:"json"})}function searchFormSubmitForProduct(b,a){"product"==b&&($("#Ntt").val(a),$("#Nr").val("OR(product.type:Product),OR(product.siteId:100001)"),$("#tab").val("p")),$("#mainSearchForm").submit()}function searchFormSubmit(a){"content"==a&&($("#Nr").val("OR(product.type:Content),OR(product.catalogId:navigationCatalog,product.catalogId:teacherResourcesCatalog),OR(product.siteId:100001)"),$("#tab").val("c")),$("#mainSearchForm").submit()}function decodeHtml(b){var a=document.createElement("textarea");return a.innerHTML=b,a.value}function getParameterByName(d){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+d+"=([^&#]*)"),b=c.exec(location.search);return null===b?"":decodeURIComponent(b[1].replace(/\+/g," "))}function getQuestion(){var a=$("#Ntt").val();$("#searchQuestion").val(a),""!=a?$("#search-submit").removeAttr("disabled"):$("#search-submit").prop("disabled",!0)}function adjustHorizontalCarouselWidth(){var b=$("#content").find(".cartridge.cartridge-carousel-h").width();if(b<=0){b=$("#content").find(".tab.ui-tabs.ui-widget.ui-widget-content.ui-corner-all").find(".tab-content.ui-tabs-panel.ui-widget-content.ui-corner-bottom").width()}var a=$(".cartridge.cartridge-carousel-h").find(".jcarousel-next.jcarousel-next-horizontal").height();var c=$(".cartridge.cartridge-carousel-h").find(".jcarousel-next.jcarousel-next-horizontal").width();var d=b-a-c;$("#content").find(".jcarousel-prev.jcarousel-prev-horizontal").css("left",d+"px")}$(document).ready(function(){function d(){try{return document.createEvent("TouchEvent"),!0}catch(a){return !1}}$.ajaxSetup({cache:!1}),$("body").removeClass("nojs");var c=getQueryParams(document.location.search);"true"==c.added&&$.modal('<iframe src="/global/modals/list-added.jsp?modal=true" height="360" width="840" scrolling="auto">',{overlayClose:!0});var b=navigator.userAgent;d()||b.match(/(iPhone|iPod|iPad)/)||b.match(/BlackBerry/)||b.match(/Android/)?$("body").addClass("touch"):"true"!=c.modal&&($("ul.hover>li").hover(hoverOn,hoverOff),$("ul.hover-delay>li").hoverIntent({interval:200,over:hoverOn,timeout:200,out:hoverOff}),$("ul.header-subnav>li").hoverIntent({interval:200,over:subnavOn,timeout:200,out:subnavOff}),$("ul.header-subnav>li:first-child").addClass("active")),$(".header-tools-label, .header-nav-drop .header-nav-label").append('<span class="arrow">&nbsp;</span>'),$("ul.header-tools-cart-list>li:first-child").css("border","none"),$(".address-right ul li:first-child").addClass("first"),$("ul.home-cats li:nth-child(3n), ul.cats li:nth-child(4n)").after('<li class="clear">&nbsp;</li>'),$.browser.msie?($("body").addClass("ie"),6==$.browser.version.substr(0,1)&&($("").supersleight(),$("body").addClass("ie6")),7==$.browser.version.substr(0,1)&&$("body").addClass("ie7")):$.browser.mozilla?$("body").addClass("ff"):$.browser.webkit&&$("body").addClass("wk"),""==$("#shipJde").val()&&$("#shipJde").val("JDE Shipping Acc Num #"),""==$("#billJde").val()&&$("#billJde").val("JDE Billing Acc Num #"),""==$("#recipJde").val()&&$("#recipJde").val("JDE Recipient Acc Num #"),""==$("#phoneNumberExt").val()&&$("#phoneNumberExt").val("Ext."),$("#phoneNumberExt").focus(function(){"Ext."==$(this).val()&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val("Ext.")}),$("#shipJde").focus(function(){"JDE Shipping Acc Num #"==$(this).val()&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val("JDE Shipping Acc Num #")}),$("#billJde").focus(function(){"JDE Billing Acc Num #"==$(this).val()&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val("JDE Billing Acc Num #")}),$("#recipJde").focus(function(){"JDE Recipient Acc Num #"==$(this).val()&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val("JDE Recipient Acc Num #")}),$(".global-form label").inFieldLabels(),$.mask.definitions["~"]="[234567890]",$(".form-phone").mask("(~99) 999-9999"),$(".form-date").datepicker({changeMonth:!1,changeYear:!1,maxDate:"+0M +0D",dateFormat:"mm/dd/yy",showOn:"button",buttonImageOnly:!0,buttonImage:"/images/icon-calendar.gif"}),$("table.stripe tr:nth-child(2n)").addClass("alt"),$(".slideshow")[0]&&$(".slideshow ul").first().after('<div class="slideshow-nav">').cycle({fx:"fade",timeout:5000,pause:1,pager:".slideshow-nav"}),$(".tab")[0]&&$(".tab").tabs(),$(".accordion")[0]&&($("ul.accordion").accordion({active:!1,alwaysOpen:!0,collapsible:!0,autoHeight:!1,navigation:!0,animated:!1,header:".subnav-header"}),$(".subnav-header a").click(function(){return window.location=$(this).attr("href"),!1})),$("ul.expand .subnav-header").append('<span class="ui-icon">&nbsp;</span>'),$("ul.expand .active ul").show(),$("ul.expand .active .subnav-header").addClass("ui-state-active"),$("ul.expand .subnav-header").click(function(a){$(this).hasClass("ui-state-active")?($(this).removeClass("ui-state-active"),$(this).siblings("ul").hide()):($(this).addClass("ui-state-active"),$(this).siblings("ul").show())}),$("#content .expand-content").hide(),$("#content .expand h2.active").addClass("ui-state-active").siblings(".expand-content").show(),$("#content .expand h2").append('<span class="ui-icon">Show/Hide</span>').click(function(a){$(this).hasClass("ui-state-active")?($(this).removeClass("ui-state-active"),$(this).siblings(".expand-content").hide()):($(this).addClass("ui-state-active"),$(this).siblings(".expand-content").show())}),$("ul.subnav>li>a").addClass("subnav-header"),$("ul.subnav a.subnav-header").append('<span class="ui-icon">&nbsp;</span>'),$("ul.actions li a").prepend('<span class="icon">&nbsp;</span>'),$(".item-qv").click(function(a){return $.modal('<iframe src="'+this.href+'" height="380" width="840" scrolling="auto" id="qv">',{overlayClose:!0}),!1}),$(".modal-xsell").click(function(a){return $.modal('<iframe src="modal-cart.html?modal=true" height="540" width="820" scrolling="no">',{overlayClose:!0}),!1}),$(".modal-list").click(function(k){var g=$("#items").val(),f=$("#quantities").val(),j=this.href,h="";return h=null!=j?j+"?redirect=list&items="+g+"&quantities="+f+"&modal=true":"/global/modals/list.jsp?items="+g+"&quantities="+f+"&modal=true",$.modal('<iframe src="'+h+'" height="400" width="620" scrolling="yes">',{overlayClose:!0}),!1}),$(".modal-list-listing").click(function(k){var g=gatherChecked(),f=getQuantitiesOfChecked(g),j=this.href,h="";return h=null!=j?j+"?redirect=list&items="+g+"&quantities="+f+"&modal=true":"/global/modals/list.jsp?items="+g+"&quantities="+f+"&modal=true",$.modal('<iframe src="'+h+'" height="400" width="620" scrolling="yes">',{overlayClose:!0}),!1}),$(".modal-list-cart").click(function(j){var g=$("#citems").val(),f=this.href,h="";return h=null!=f?f+"?redirect=list&citems="+g+"&modal=true":"/global/modals/list.jsp?citems="+g+"&modal=true",$.modal('<iframe src="'+h+'" height="400" width="620" scrolling="yes">',{overlayClose:!0}),!1}),$(".modal-list-order").click(function(h){var g=$("#listOrderId").val(),f="/global/modals/list.jsp?listOrderId="+g+"&modal=true";return $.modal('<iframe src="'+f+'" height="400" width="620" scrolling="yes">',{overlayClose:!0}),!1}),$(".modal-delivery").click(function(a){return $.modal('<iframe src="'+this.href+'" height="540" width="820" scrolling="no">',{overlayClose:!0}),!1}),$(".modal-address").click(function(a){return $.modal('<iframe src="'+this.href+'" height="540" width="620" scrolling="auto">',{overlayClose:!0}),!1}),$(".modal-text").click(function(a){return $.modal('<iframe src="'+this.href+'" height="400" width="620" scrolling="yes">',{overlayClose:!0}),!1}),$(".modal-short").click(function(a){return $.modal('<iframe src="'+this.href+'" height="310" width="400" scrolling="auto">',{overlayClose:!0}),!1}),$(".modal-quarantine").click(function(a){return $.modal('<iframe src="'+this.href+'" height="540" width="820" scrolling="no">',{overlayClose:!0}),!1}),"function"==typeof $.jcarousel&&($(".cartridge-carousel-h ul.item-grid").jcarousel({scroll:4}),$(".cartridge-carousel-v ul.item-mini").jcarousel({scroll:4,vertical:!0})),$("#mainSearchForm").submit(function(a){escapeSearchHtmlEntities()}),$("#Ntt").keydown(function(a){13==a.keyCode&&escapeSearchHtmlEntities()})}),$(function(){hookTypeAhead()});function submitwithredirectcheckoutactionminicart(a){document.getElementById("actionMiniCart").value="redirectCheckout";document.getElementById("redirectCheckoutFromMiniCart").value=a;document.getElementById("mini_cart").submit()}function submitwithvalidatecheckoutaction(a){var b=document.getElementsByClassName("simplemodal-close");if(b.length!=0){document.getElementsByClassName("simplemodal-close")[0].click()}$("#loading").show();$.get("/spc/includes/quarantine.jsp?modal=true&urlParam="+a+"&checkoutType=miniCart","",function(e){var d=$(e).find("#restrictedItem").val();var c=$(e).find("#isCartEmptyCart").val();if(d=="true"){$.modal(e,{overlayClose:true,containerCss:{height:"540",width:"820"}});$("#loading").hide()}else{if(c=="true"){$("#loading").hide()}$.ajax({url:"/global/content/minicart-items-count.jsp",cache:false}).done(function(f){if(f!=0){submitwithredirectcheckoutactionminicart(a)}})}})}function removeRestrictedItems(f,d,e){var a=[],b=document.getElementsByTagName("input");for(var c=b.length-1;c>=0;c--){if(b[c].type=="hidden"&&b[c].name==d){a.push(b[c].value)}}$.ajax({url:"/spc/includes/cartIntermediateRequest.jsp?actionType=removeMultipleItems&itemIds="+a+"&formID=config_form_acorn",cache:true,success:function(h){var g=$("#currentPage").val();if(g=="cart"){updateEntireCart()}else{updateminiCart()}if(e=="miniCart"){submitwithvalidatecheckoutaction(f)}else{submitwithredirectcheckoutaction(f)}},error:function(){}})}function goToCartReview(b){var a=$("#currentPage").val();if(a=="cart"){$.get("/spc/includes/displayCartLineItemsIntermediateRequest.jsp","",function(d){var c=d.replace(/[\[\]']+/g,"");c=c.split(", ");for(i=0;i<c.length;i++){$.each(parent.$("tr.lineItem"),function(){if($(this).attr("data-proid")==c[i]){$(this).addClass("restricted-item-row")}})}var e=$(".restricted-item-row").first().position();$("html,body").animate({scrollTop:e.top},800);document.getElementsByClassName("simplemodal-close")[0].click()})}else{window.location.href="/checkout/cart.jsp"}}function updateminiCart(){$.ajax({url:"/includes/gadgets/header-tools-cart.jsp?modal=true",type:"POST",cache:true,success:function(a){$(".header-tools-cart").html(a);$("#minicartCount").empty();$.ajax({url:"/global/content/minicart-items-count.jsp",cache:false}).done(function(b){$("#minicartCount").html(b)})},error:function(){console.log("error in update mini cart")}})}var clickIdUrlParameter="clickId";var clickIdCookieName="pjn_clicks";var lookbackPeriodInDays=$("#ppJamCookieMaxAge").val();var cookieDataParsed;var maxCookieAge=lookbackPeriodInDays*(60*24*60);function getClickId(){var a="",e=window.location.search.substring(1),c=e.split("&");for(var b=0;b<c.length;b++){var d=c[b].split("=");if(d[0]===clickIdUrlParameter){a=d[1]}}return a}function getCookieData(){var b,a=document.cookie.split(";");a.forEach(function(c){var d=c.split("="),f=d[0],e=d[1];if(f.trim()===clickIdCookieName){b=e}});return b}function checkLookbackPeriod(){var c=getCookieData()||"[]",a=[],f=new Date(Date.now());cookieDataParsed=JSON.parse(c);if(cookieDataParsed.length>0){for(var d=0;d<cookieDataParsed.length;d++){var b=cookieDataParsed[d].date,e=new Date(b.substring(0,4)+"-"+b.substring(4,6)+"-"+b.substring(6,8)),h=Math.abs(f.getTime()-e.getTime()),g=Math.ceil(h/(1000*3600*24));if(g<=lookbackPeriodInDays){a.push(cookieDataParsed[d])}}document.cookie=clickIdCookieName+"="+JSON.stringify(a)+";max-age="+maxCookieAge+";path=/";cookieDataParsed=a}}function captureClickId(){var c=getClickId();if(c!==""){var b=new Date(Date.now()),a=b.getFullYear()+("0"+(b.getMonth()+1)).slice(-2)+("0"+b.getDate()).slice(-2),e=false;for(var d=0;d<cookieDataParsed.length;d++){if(c===cookieDataParsed[d].id){e=true;break}}if(!e){cookieDataParsed.push({id:c,date:a});document.cookie=clickIdCookieName+"="+JSON.stringify(cookieDataParsed)+";max-age="+maxCookieAge+";path=/"}}}$(document).ready(function(){var b=$("#confirmPage").val();if(b!="true"){checkLookbackPeriod();captureClickId()}var a=navigator.cookieEnabled;if(a==true){$("#cookieBanner").show()}});function acceptCookieTerms(){$.ajax({url:"/includes/acceptCookieTerms.jsp?actionType=acceptCookieTerms",type:"POST",cache:true,success:function(a){$("#cookieTnC").load("/includes/acceptCookieTerms.jsp")}})}function getStandalonePrice(b){var a="";$.ajax({url:"/includes/getStandalonePrice.jsp?productId="+b,async:false,success:function(c){a=c}});return a};