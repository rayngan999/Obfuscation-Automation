!function(e){function t(t){for(var a,o,s=t[0],u=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);for(l&&l(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={91:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+""+({0:"lang_af",1:"lang_ar",2:"lang_bg",3:"lang_bs",4:"lang_ca",5:"lang_cs",6:"lang_da",7:"lang_de",8:"lang_el",9:"lang_es",10:"lang_et",11:"lang_fi",12:"lang_fil",13:"lang_fr",14:"lang_he",15:"lang_hi",16:"lang_hr",17:"lang_hu",18:"lang_id",19:"lang_is",20:"lang_it",21:"lang_ja",22:"lang_ka",23:"lang_ko",24:"lang_lt",25:"lang_lv",26:"lang_nl",27:"lang_no",28:"lang_pl",29:"lang_pt",30:"lang_pt_br",31:"lang_ro",32:"lang_ru",33:"lang_sk",34:"lang_sl",35:"lang_sq",36:"lang_sr",37:"lang_sr_me",38:"lang_sv",39:"lang_sw",40:"lang_th",41:"lang_tr",42:"lang_tw",43:"lang_uk",44:"lang_vi",45:"lang_zh_cn",46:"lang_zh_tw",47:"locale_af",48:"locale_ak",49:"locale_ar",50:"locale_bg",51:"locale_bs",52:"locale_ca",53:"locale_cs",54:"locale_da",55:"locale_de",56:"locale_el",57:"locale_es",58:"locale_et",59:"locale_fi",60:"locale_fil",61:"locale_fr",62:"locale_he",63:"locale_hi",64:"locale_hr",65:"locale_hu",66:"locale_id",67:"locale_is",68:"locale_it",69:"locale_ja",70:"locale_ka",71:"locale_ko",72:"locale_lt",73:"locale_lv",74:"locale_nl",75:"locale_no",76:"locale_pl",77:"locale_pt",78:"locale_ro",79:"locale_ru",80:"locale_sk",81:"locale_sl",82:"locale_sq",83:"locale_sr",84:"locale_sv",85:"locale_sw",86:"locale_th",87:"locale_tr",88:"locale_uk",89:"locale_vi",90:"locale_zh"}[e]||e)+"."+{0:"3944aa44e94d1f970f46",1:"eb910a056ed3a5214eb6",2:"66df66d417935be3461b",3:"942d8365eb8bb382b5b7",4:"97394acb183794fe56fc",5:"640289ea7227ae1bdb26",6:"5791bafad7614f631196",7:"f232f4e00feb2f644278",8:"2290b6a6ab17d624a824",9:"510438c306c895feb119",10:"a0e5ac1602898c67ccd7",11:"87465ddf3c6273dc7663",12:"b80d8567cd2ffade2873",13:"471120e94f32d9c062fe",14:"bcc61b8a65d12ca36911",15:"2d0a8fc64f2ad73ffbb5",16:"2bd94121b9df11ee319d",17:"b9a7ce323fd03fe273b0",18:"1d61b0ae26a4f7e35367",19:"d9a0d53898d23a52c36c",20:"bf79b237dbf8ed21b677",21:"2e8fb78d67f65deba0d3",22:"f2cb464a594a01fce031",23:"9d7aca781af3ea32243a",24:"3806b965d4a115c2f8e3",25:"df2806aefbccaee25edc",26:"e864ee97c692d0375606",27:"5f84276ba0a99f6bb44d",28:"1ebf526b2dfa6dae5c2e",29:"556e2f30a3ed5e253004",30:"3c148df6a3e8e5e591cf",31:"d9b91f7fea779ec5ea4b",32:"38b6bc5c7e9713ad23cc",33:"2f3e1f93c49fd221f3e5",34:"f6359ed69d1fd4543d86",35:"7beb63acff6e6b878cca",36:"21760c9a2ed8dcd89f9c",37:"cf2912beee7b1b32cfa9",38:"54d984a81ea02bad653a",39:"39179c7b3944b6bea1ae",40:"1ce49e1ad11b921da040",41:"3837dbad9d6f04e1a406",42:"1832d5b248fab52bca57",43:"ff8c4b7c053df6a02a51",44:"70ed3fbe3981796d7e85",45:"b83d61e952912e0af705",46:"cac4d686cc5ca75e34ba",47:"f767cbb952cea3d1f255",48:"7d26a498209007a29065",49:"e7eb1bf8a3d0662792b2",50:"51bb4e1ae5612d8e2a6f",51:"f076646da121b6895b66",52:"89b27e1eb8be10d39bcc",53:"7f62baf4646f73786d25",54:"c4da0c8ec29ea6520c6b",55:"64f3f48b150764626abe",56:"924defb747fa84349cc5",57:"1374a7d97c238614da14",58:"94e91e3deb33bc0dd2c2",59:"d1bc829fb3a59095c9f2",60:"deb3c76085b435dcdc1d",61:"045ef9203d6b308f93c1",62:"ea61e575b970d46cc8ef",63:"9b72b250670dd07d7870",64:"0e5b62a69f224c54f93d",65:"4ab88f58b24d9f0e2d4e",66:"4fde7554b8bfac8fe712",67:"9e09cbcd5dabe04a2cbd",68:"829c49c17cda52330bd4",69:"b479aefe87012d3718be",70:"a71be92009efabb8968c",71:"fb745357123776ff7eef",72:"deb4d829e04838cfb7a7",73:"27329821643ae50ddf03",74:"f7f4f90bb645d1920279",75:"647a5dfa79109c6cce8f",76:"af19e9e4d11a4d27a1e2",77:"45d06c0a12cc74a3888b",78:"90e2bdaf05cd834a42a6",79:"daa4e61ada2cb13e9e7a",80:"22c13190d6ad91bfa299",81:"80df7ad794f1c8921e9b",82:"e73836a72175fcafd179",83:"1647bb5297cf2177003f",84:"77487307fc8307096583",85:"8ecd1274de6e07adcb8a",86:"22bdf4d6761e209179b7",87:"2aff68b7dfdcd93354ac",88:"ff8552312e459ca532fd",89:"7c16d3ddb34dd41a7c30",90:"6fa573e2d1aab39c480a"}[e]+".min.js"}(e);var u=new Error;i=function(t){s.onerror=s.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",u.name="ChunkLoadError",u.type=a,u.request=i,n[1](u)}r[e]=void 0}};var c=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://cdn.kustomerapp.com/cw/",o.oe=function(e){throw console.error(e),e};var s=window.kustomer_webpackJsonp=window.kustomer_webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;i.push([0,92]),n()}({"+7Q0":function(e,t){e.exports=[{locale:"en_us",parentLocale:"en",displayName:"English (US)"},{locale:"es",displayName:"Spanish"},{locale:"fr",displayName:"French"},{locale:"de",displayName:"German"},{locale:"pt",displayName:"Portuguese"},{locale:"ar",rtl:!0,displayName:"Arabic"},{locale:"he",rtl:!0,displayName:"Hebrew"},{locale:"af",name:"Afrikaans",displayName:"Afrikaans"},{locale:"bg",name:"Bulgarian",displayName:"ÐÑÐ»Ð³Ð°ÑÑÐºÐ¸"},{locale:"bs",name:"Bosnian",displayName:"Bosanski"},{locale:"ca",name:"Catalan",displayName:"CatalÃ "},{locale:"cs",name:"Czech",displayName:"ÄeÅ¡tina"},{locale:"da",name:"Danish",displayName:"Dansk"},{locale:"nl",name:"Dutch",displayName:"Nederlands"},{locale:"el",name:"Greek",displayName:"ÎÎ»Î»Î·Î½Î¹ÎºÎ¬"},{locale:"et",name:"Estonian",displayName:"Eesti"},{locale:"fi",name:"Finnish",displayName:"Suomi"},{locale:"fil",name:"Filipino",displayName:"Filipino"},{locale:"hi",name:"Hindi",displayName:"à¤¹à¤¿à¤à¤¦à¥"},{locale:"hr",name:"Croatian",displayName:"Hrvatski"},{locale:"hu",name:"Hungarian",displayName:"Magyar"},{locale:"id",name:"Indonesian",displayName:"Bahasa Indonesia"},{locale:"is",name:"Icelandic",displayName:"Ãslenska"},{locale:"it",name:"Italian",displayName:"Italiano"},{locale:"ja",name:"Japanese",displayName:"æ¥æ¬èª"},{locale:"ka",name:"Georgian",displayName:"á¥áá áá£áá"},{locale:"ko",name:"Korean",displayName:"íêµ­ì´"},{locale:"lt",name:"Lithuanian",displayName:"LietuviÅ³"},{locale:"lv",name:"Latvian",displayName:"LatvieÅ¡u"},{locale:"no",name:"Norwegian",displayName:"Norsk"},{locale:"pl",name:"Polish",displayName:"Polski"},{locale:"pt_br",parentLocale:"pt",name:"Portuguese (BR)",displayName:"PortuguÃªs (BR)"},{locale:"ro",name:"Romanian",displayName:"RomÃ¢nÄ"},{locale:"ru",name:"Russian",displayName:"Ð ÑÑÑÐºÐ¸Ð¹"},{locale:"sk",name:"Slovakian",displayName:"SlovenÄina"},{locale:"sl",name:"Slovenian",displayName:"SlovenÅ¡Äina"},{locale:"sq",name:"Albanian",displayName:"Shqip"},{locale:"sr",name:"Serbian",displayName:"Srpski"},{locale:"sr_me",parentLocale:"sr",name:"Serbian (Montenegro)",displayName:"Crnogorski"},{locale:"sv",name:"Swedish",displayName:"Svenska"},{locale:"sw",name:"Swahili",displayName:"Kiswahili"},{locale:"th",name:"Thai",displayName:"à¸ à¸²à¸©à¸²à¹à¸à¸¢"},{locale:"tr",name:"Turkish",displayName:"TÃ¼rkÃ§e"},{locale:"tw",parentLocale:"ak",name:"Twi",displayName:"Twi",skipAutoTranslate:!0},{locale:"uk",name:"Ukrainian",displayName:"Ð£ÐºÑÐ°ÑÐ½ÑÑÐºÐ°"},{locale:"vi",name:"Vietnamese",displayName:"Tiáº¿ng Viá»t"},{locale:"zh_cn",parentLocale:"zh",name:"Simplified Chinese",displayName:"ä¸­æ (ç®ä½)"},{locale:"zh_tw",parentLocale:"zh",name:"Traditional Chinese",displayName:"ä¸­æ (é¦æ¸¯)"}]},"/bK8":function(e,t,n){"use strict";var a=n("JRPe");t.a=Object(a.d)({placeholder_error_email:{id:"kustomer.chat.conversation.volumeControl.input.email.error",defaultMessage:"Please enter a valid email"},placeholder_error_phone:{id:"kustomer.chat.conversation.volumeControl.input.phone.error.1",defaultMessage:"Please enter a valid phone number with a country code"},placeholder:{id:"kustomer.chat.conversation.volumeControl.input.placeholder",defaultMessage:"Type a message..."},wait_label:{id:"kustomer.chat.conversation.volumeControl.wait.label",defaultMessage:"I'll wait"},no_avail:{id:"kustomer.chat.conversation.volumeControl.noAvail.message",defaultMessage:"Sorry, it looks like no one has become available in the time we expected. Please select an alternate contact method for us to follow up with you..."},no_avail_upfront:{id:"kustomer.chat.conversation.volumeControl.upfront.noAvail.message",defaultMessage:"Our current wait time is approximately {waitTime}. You can choose to wait for the next available agent or select an alternative contact method for us to follow up with you."},channel_message:{id:"kustomer.chat.conversation.volumeControl.channel.message",defaultMessage:"Great, what's the best {channelName} to reach you at?"},thankYou_message:{id:"kustomer.chat.conversation.volumeControl.thankYou.message",defaultMessage:"Thank you. We'll get back to you shortly."},phone_number:{id:"kustomer.chat.conversation.volumeControl.phoneNumber.message",defaultMessage:"phone number"},days:{id:"kustomer.chat.conversation.volumeControl.days",defaultMessage:"days"},hours:{id:"kustomer.chat.conversation.volumeControl.hours",defaultMessage:"hours"},minutes:{id:"kustomer.chat.conversation.volumeControl.minutes",defaultMessage:"minutes"},seconds:{id:"kustomer.chat.conversation.volumeControl.seconds.v2",defaultMessage:"under 1 minute"},aria_label_send_message:{id:"kustomer.chat.conversation.volumeControl.aria.label.send.message",defaultMessage:"Send message"}})},0:function(e,t,n){e.exports=n("tjUo")},1:function(e,t){},2:function(e,t){},3:function(e,t){},"3wRA":function(e,t,n){"use strict";var a=n("lSNA"),r=n.n(a),i=n("o0o1"),o=n.n(i),s=n("yXPU"),u=n.n(s),c=n("mwIZ"),l=n.n(c),d=n("JPcv"),p=n.n(d),g=n("qPyV"),f=n.n(g),h=n("E+oP"),m=n.n(h),I=n("QkVN"),b=n.n(I),v=n("Puqe"),y=n.n(v),C=n("TdDX"),A=n.n(C),M=n("OjRq"),w=n("sMkI"),k=n("pI4q"),x=n("Nlzp"),D=n("KbFG"),N=n("GMKn"),j=n("vBIC"),T=n("ci4T"),S=n("4eWA"),O=function(e){return function(t){var n,a,r=l()(e,"data.clipped"),i=Object(j.b)(e);return t(r?(n=i,a=l()(n,"id"),function(e,t){var n=T.e(t());e(Tt({messageId:a,sessionId:n}))}):Be(i)),"__team"!==l()(i,"sentBy.id")&&t(Qe(i.sentBy.id)),t(S.d()),t(mt())}},P=function(e,t){return function(n,a){switch(e){case"kustomer.app.chat.message.send":var r=Object(j.b)(t),i=T.D(a()),o=l()(r,"sessionId");return i.get(o)||n(ut({withoutCache:!0})),n(O(t));default:return n(function(e,t){return{type:N.c,message:t,event:e}}(e,t))}}},E=n("AqJW"),L=n("Ualb"),_=n("MoPD"),z=n("lFXU"),R=n("sBJV"),Z=n("wo01"),U=n("ijCd"),G=n.n(U),W=n("WGix"),B=function(e){var t=e.whiteListOptions,n=e.mockUpdatedLocation||window.location.href,a=t&&t.or,r=t&&t.and,i=r&&function(e,t){var n,a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var u=o.value,c=l()(u,"website_url.operator"),d="equals"===c,p="not_equals"===c,g="contains"===c,f="not_contains"===c,h=l()(u,"website_url.value");if(!(g&&G()(t,h)||f&&!G()(t,h)||d&&t===h||p&&t!==h)){n=!0;break}n=!1}}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(t.and,n),o=a&&function(e,t){var n=!0,a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var u=o.value,c=l()(u,"website_url.operator"),d="equals"===c,p="not_equals"===c,g="contains"===c,f="not_contains"===c,h=l()(u,"website_url.value");if(g&&G()(t,h)||f&&!G()(t,h)||d&&t===h||p&&t!==h){n=!1;break}}}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(t.or,n);return a&&r?!(!i&&!o):a?o:i},F=function(e){var t=e.whiteListOptions,n=e.dispatch,a=e.getState,r=e.mockUpdatedLocation,i=a(),o="app"===W.c(i);B({whiteListOptions:t,mockUpdatedLocation:r})&&!o?n(_.t({value:!0})):o||n(_.t({value:!1}))},H=function(e){var t=e.whiteListOptions,n=e.store;return function(){setTimeout((function(){var e=n.dispatch,a=n.getState;F({whiteListOptions:t,getState:a,dispatch:e})}),0)}};n.d(t,"r",(function(){return V})),n.d(t,"n",(function(){return J})),n.d(t,"o",(function(){return X})),n.d(t,"h",(function(){return K})),n.d(t,"p",(function(){return q})),n.d(t,"q",(function(){return $})),n.d(t,"m",(function(){return ee})),n.d(t,"l",(function(){return te})),n.d(t,"i",(function(){return ne})),n.d(t,"c",(function(){return ae})),n.d(t,"e",(function(){return re})),n.d(t,"b",(function(){return ie})),n.d(t,"d",(function(){return oe})),n.d(t,"f",(function(){return se})),n.d(t,"t",(function(){return ue})),n.d(t,"u",(function(){return ce})),n.d(t,"s",(function(){return le})),n.d(t,"a",(function(){return de})),n.d(t,"x",(function(){return pe})),n.d(t,"E",(function(){return ge})),n.d(t,"j",(function(){return fe})),n.d(t,"k",(function(){return he})),n.d(t,"y",(function(){return me})),n.d(t,"g",(function(){return Ie})),n.d(t,"A",(function(){return be})),n.d(t,"z",(function(){return ve})),n.d(t,"B",(function(){return ye})),n.d(t,"C",(function(){return Ce})),n.d(t,"v",(function(){return Ae})),n.d(t,"D",(function(){return Me})),n.d(t,"w",(function(){return we})),n.d(t,"G",(function(){return De})),n.d(t,"J",(function(){return Te})),n.d(t,"K",(function(){return Se})),n.d(t,"H",(function(){return Pe})),n.d(t,"I",(function(){return Ee})),n.d(t,"L",(function(){return Ue})),n.d(t,"qb",(function(){return Ge})),n.d(t,"sb",(function(){return We})),n.d(t,"hb",(function(){return Be})),n.d(t,"pb",(function(){return He})),n.d(t,"Y",(function(){return Ye})),n.d(t,"U",(function(){return Qe})),n.d(t,"fb",(function(){return Xe})),n.d(t,"db",(function(){return et})),n.d(t,"eb",(function(){return tt})),n.d(t,"gb",(function(){return at})),n.d(t,"T",(function(){return rt})),n.d(t,"X",(function(){return ut})),n.d(t,"ab",(function(){return dt})),n.d(t,"O",(function(){return pt})),n.d(t,"Z",(function(){return ft})),n.d(t,"S",(function(){return ht})),n.d(t,"bb",(function(){return mt})),n.d(t,"mb",(function(){return It})),n.d(t,"ob",(function(){return bt})),n.d(t,"kb",(function(){return vt})),n.d(t,"N",(function(){return yt})),n.d(t,"F",(function(){return Ct})),n.d(t,"P",(function(){return Mt})),n.d(t,"M",(function(){return xt})),n.d(t,"Q",(function(){return Dt})),n.d(t,"ib",(function(){return jt})),n.d(t,"W",(function(){return Tt})),n.d(t,"R",(function(){return St})),n.d(t,"rb",(function(){return Pt})),n.d(t,"jb",(function(){return Et})),n.d(t,"nb",(function(){return Lt})),n.d(t,"lb",(function(){return _t})),n.d(t,"V",(function(){return Rt})),n.d(t,"cb",(function(){return Zt}));var Y=!1,Q={},V="chat-update-users",J="chat-update-company",X="chat-update-session",K="chat-modify-session",q="chat-update-sessions",$="chat-update-session-messages",ee="chat-scroll-to-message-id",te="chat-reset-scroll-to-message-id",ne="chat-new-session",ae="CHAT_FORM_INIT",re="CHAT_FORM_POST",ie="CHAT_FORM_GET_TEAMS",oe="CHAT_FORM_IN_PROGRESS",se="CHAT_IS_AFTER_HOURS",ue="CHAT_VOLUME_CONTROL_START",ce="CHAT_VOLUME_CONTROL_STOP",le="CHAT_VOLUME_CONTROL_POST",de="CHAT_ATTACHMENT_FETCH",pe="INIT_SINGLE_CHAT",ge="UPDATE_SINGLE_CHAT",fe="CHAT_QUEUE_FETCH",he="CHAT_QUEUE_POLLING_CLEAR",me="LAST_ACTIVITY",Ie="chat-message-received",be="SESSION_STATE",ve="SATISFACTION_FORM",ye="SET_FOCUS",Ce="TOGGLE_CAMPAIGN_CLICKED",Ae="GET_KB_ARTICLES",Me="UPDATE_KB_ARTICLES_FETCHING",we="INCREMENT_KB_ARTICLE_VISITED",ke=function(e){return{type:V,users:e}},xe=function(e){return{type:X,session:e}},De=function(e){return{type:K,session:e}},Ne=function(e,t){return{type:$,sessionId:e,messages:t}},je=function(e){return{type:ae,payload:{form:e}}},Te=function(e){return{type:ue,sessionId:e}},Se=function(e){return{type:ce,sessionId:e}},Oe=function(e){return{type:ie,payload:{teams:e}}},Pe=function(e){return Object(k.c)("sessionId",e.id),{type:ne,session:e}},Ee=function(){return{type:te}},Le=function(e){return{type:se,isAfterHours:e}},_e=function(e){return{type:re,form:e}},ze=function(e){return{type:"CHAT_ATTACHMENT_CREATE",attachment:e}},Re=function(e,t){return{type:de,attachment:e,messageId:t}},Ze=function(e){return{type:fe,sessionQueue:e}},Ue=function(){return{type:he}},Ge=function(e){return{type:me,activity:e}},We=function(e,t){return{type:e,data:t}},Be=function(e){return{type:Ie,message:e}},Fe=function(e){return{type:be,sessionStates:e}},He=function(e){return{type:Ce,data:e}},Ye=function(e){return function(t){e&&"new"!==e&&x.b.markChatSessionSeen(e).then((function(e){return t(xe(e))}))}},Qe=function(e){return function(t){x.b.getUser(e).then((function(e){t(ke([e]))}))}},Ve=function(e){return function(t){var n=e.reduce((function(e,t){return"user"!==t.sentBy.type||e.includes(t.sentBy.id)?e:(e.push(t.sentBy.id),e)}),[]);n&&n.length>0&&t(function(e){return function(t){x.b.getUsers(e).then((function(e){t(ke(e))}))}}(n))}},Je=function(e){return function(t){x.b.getSatisfactionForm(e).then((function(n){var a=n.satisfactionForm,r=n.session;t(function(e){return{type:ve,satisfactionForm:e}}(a)),t(De(Object.assign({},{id:e},r)))}))}},Xe=function(e){var t=Object(T.V)(),n=Object(T.X)();return function(a,r){var i=r(),o=n(i,e).get("satisfactionId");t(i,o).get("id")||a(Je(e))}},Ke=function(e,t){return function(n,a){if(["customer_ended","user_ended"].includes(t)){var r=a(),i=Object(T.i)(r);i&&i.size>0&&i.some((function(e){return"__team"!==e.id}))&&n(Je(e))}}},qe=function(e){var t=e.sessionId,n=e.isSocket;return function(e,a){Object(k.a)("input-disabled-".concat(t))&&t&&(n?Object(k.b)("input-disabled-".concat(t)):Object(T.O)(a())&&Object(k.b)("input-disabled-".concat(t)))}},$e=function(){return function(e,t){var n=t(),a=Object(T.O)(n);Object(T.M)(n)&&a&&e(Ue())}},et=function(e,t){return function(){var n=u()(o.a.mark((function n(a){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x.b.markConversationDone(e,t);case 3:return r=n.sent,a(xe(r)),a(Ue()),n.abrupt("return",r);case 9:return n.prev=9,n.t0=n.catch(0),n.abrupt("return",Promise.reject(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},tt=function(){return function(e,t){var n=t();if(Object(T.l)(n).singleSessionChat){var a=Object(T.j)(n)||p.a.OrderedSet();f()(a.toJS(),(function(e){return e.sessionId})).forEach((function(t){var n=t.sessionId;n&&(e(Ye(n)),e(et(n,w.a.CUSTOMER_ENDED)))}))}}},nt=function(){return function(e,t){var n=t(),a=Object(T.B)(n),r=Object(T.ob)(n,{sessionId:a}),i=Object(T.R)(n);!Object(T.l)(n).singleSessionChat||r&&!i||(e(function(e){return{type:pe,activeSessionId:e}}(a)),a||e(E.d("new")))}},at=function(){return function(e,t){var n=t();if(Object(T.l)(n).singleSessionChat){var a=Object(T.e)(n);Object(T.eb)(n)&&e(function(e){return{type:ge,activeSessionId:e}}(a))}}},rt=function(){return function(e,t){var n=Object(T.c)(t());if(n.id){var a,r,i=n.messages.size,o=Math.ceil((i+1)/x.a);a=n,r=o,x.b.getMessagesForSession(a,r).then((function(t){var r,i=a.id;e(Ne(i,t)),e(qe({sessionId:i,isSocket:!1})),e($e()),e((r=n.messages.first(),{type:ee,messageId:r})),e(Ve(t))})).catch((function(e){console.log("Error fetching messages",e)}))}}},it=function(e){return function(t){var n=Object(M.j)({id:"__team",name:e.name,avatarUrl:e.avatarUrl});t(ke([n]))}},ot=function(e,t){t({enabled:!0,settings:e.settings,isInsideBusinessHours:e.isInsideBusinessHours})},st=function(e,t){t({enabled:!1,settings:e.settings,isInsideBusinessHours:e.isInsideBusinessHours})},ut=function(e){var t=e.withoutCache,n=void 0!==t&&t;return function(e){return x.b.getChatSessions(n).then((function(t){return e(function(e){return{type:q,sessions:e}}(t)),x.b.getMessagesForMultiSession(t).then((function(t){return t.forEach((function(t){var n=t.sessionId,a=t.messages;Z.e(n)&&(a&&a.reduce((function(e,t){return e||"user"===t.sentBy.type&&"__team"!==t.sentBy.id}),!1)&&(Z.f(n),Z.c(n)));e(Ne(n,a)),e(Ve(a))})),Z.d(),t}))})).catch((function(e){console.log("Error fetching multiple sessions",e)}))}},ct=function(){return x.b.hasCustomerId()?Promise.resolve():x.b.refreshTrackingToken()},lt=function(e,t){return function(n){var a="kustomer.app.chat.session.end"===e;if("kustomer.tracking.identity.update"===e){var r=l()(t,"data.relationships.customer.data.id");x.b.customerId=r}else if(a)n(function(e,t){return function(e){var n=l()(t,"data.id");if(l()(t,"clipped"))x.b.getChatSession(n).then((function(t){var a=l()(t,"lockReason");e(xe(t)),e(Ke(n,a))})).catch((function(e){console.log("Error fetching sessions on end",e)}));else{var a=Object(R.a)({data:t}),r=l()(a,"lockReason");e(xe(a)),e(Ke(n,r))}}}(0,t));else{var i=l()(t,"data.relationships.session.data.id"),o="user"===l()(t,"data.relationships.sentBy.data.type");n(P(e,{data:t})),o&&(n(qe({sessionId:i,isSocket:!0})),n($e()))}}},dt=function(e,t){return function(n,a){return x.b.refreshTrackingToken().then((function(){x.b.connect({lastActivity:e,onConnect:function(){t||ct().then((function(){n(ut({}))}))},onMessage:function(e,t){n(lt(e,t))},onDisconnect:function(){var e=a(),t=Object(T.jb)(e),r=Object(T.l)(e).offhoursDisplay;t&&"none"===r&&n(_.x())}}),x.b.startStatsPoller({onCallStats:function(){return n(_.s())}})}))}},pt=function(e,t){return function(){var n=u()(o.a.mark((function n(a){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x.b.getChatForm(e);case 3:return r=n.sent,t&&(r.formPrefill=t),a(je(r)),n.abrupt("return",r);case 9:return n.prev=9,n.t0=n.catch(0),n.abrupt("return",Promise.reject(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},gt=function(e){return function(t,n){m()(e)||F({whiteListOptions:e,getState:n,dispatch:t});var a=x.b.store;!function(e){var t=e.whiteListOptions,n=e.store;if(!m()(t))try{history.onpushstate=H({whiteListOptions:t,store:n}),window.onpopstate=H({whiteListOptions:t,store:n})}catch(e){console.log("error adding white list listeners",e)}}({whiteListOptions:e,store:a})}},ft=function(e){return function(){var t=u()(o.a.mark((function t(n){var a,r,i,s,u,c,d,p,g,f,h,m,I;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.b.getCurrentCompanySettings();case 2:if(a=t.sent,!(r=A.a.get("x-kustomer-tracking-token"))){t.next=8;break}return t.next=7,x.b.getCustomerStats();case 7:i=t.sent;case 8:if(s=a.offhoursDisplay,u=D.h(a.hours),c=D.g(a.holidays),d=l()(i,"activity"),p=x.b.shouldMaintainActiveChats(d),g=(!u||c)&&"none"===s,f=u&&!c,n({type:J,company:a}),p||a.enabled&&!g){t.next=19;break}return st({settings:a,isInsideBusinessHours:f},e),t.abrupt("return");case 19:if(!a.activeForm){t.next=30;break}return t.prev=20,h=x.b.getFormOverride()||a.activeForm,t.next=24,x.b.getChatForm(h);case 24:m=t.sent,n(je(m)),t.next=30;break;case 28:t.prev=28,t.t0=t.catch(20);case 30:n(Le(!u&&"offline"===s)),n(it(a)),l()(a,"campaignsEnabled")?(n(dt(d)),x.b.initClientActivity()):(d||null!==d)&&r&&(n(dt(d,!0)),n(ut({})).then((function(){return n(nt())}))),ot({settings:a,isInsideBusinessHours:f},e),n((function(e,t){var n;setInterval((function(){var e=Object(T.J)(t());n!==e&&(n=e,x.b.broadcast("unread",e))}),500)})),I=l()(a,"domainCriteria"),n(gt(I));case 38:case"end":return t.stop()}}),t,null,[[20,28]])})));return function(e){return t.apply(this,arguments)}}()},ht=function(e){return function(){var t=u()(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.b.getTeams(e);case 3:a=t.sent,n(Oe(a)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},mt=function(){return function(e,t){var n=t(),a=Object(T.a)(n);if(document&&document.hasFocus&&document.hasFocus()&&a){var r=Object(T.e)(n);e(Ye(r))}}},It=function(e){return function(){var t=u()(o.a.mark((function t(n,a){var r,i,s,u,c,d,p,g,f,h;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,i=a(),s=Object(T.k)(i),u=Object(T.jb)(i),c=l()(s,"id"),(d=l()(r,"lastDeflection.query"))?((p=Object(T.hb)(i))&&p.length&&(g=p.map((function(e){return{version:e.id,visited:e.visited||0}})),r.lastDeflection.articles=g),r.lastDeflection.query={rawText:d},r.lastDeflection.type="kb-search"):r.lastDeflection=void 0,t.prev=7,t.next=10,x.b.submitForm(c,r);case 10:return f=t.sent,3600,h=l()(f,"session.id"),x.b.setActiveSession(h),Object(k.b)("formId"),u&&Object(k.c)("input-disabled-".concat(h),h,{maxAge:3600}),n(_e(f)),n(tt()),n(L.d(h,!1)),x.b.flushPendingDescribeNexts(),ct(),t.abrupt("return",f);case 24:throw t.prev=24,t.t0=t.catch(7),t.t0;case 27:case"end":return t.stop()}}),t,null,[[7,24]])})));return function(e,n){return t.apply(this,arguments)}}()},bt=function(e){return function(){var t=u()(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.b.submitVCForm(e);case 3:return a=t.sent,3600,r=l()(a,"session.id"),x.b.setActiveSession(r),Object(k.c)("input-disabled-".concat(r),r,{maxAge:3600}),n({type:le,form:a}),n(Se(r)),n(Ue()),t.abrupt("return",a);case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},vt=function(){return function(e,t){var n=Object(T.c)(t());return e(E.g(n))}},yt=function(){return function(e,t){var n=t(),a=Object(T.k)(n).inProgress,r=Object(T.l)(n);if(r.hours){var i=r.hours,o=r.holidays,s=r.offhoursDisplay,u=Object(T.jb)(n),c=D.g(o),l=c||!c&&!D.h(i);if(l!==u)l&&"none"===s&&!a&&e(_.r()),l&&"offline"===s&&e(Le(!0)),l||e(Le(!1))}}},Ct=function(e){return{type:oe,inProgress:e}},At=function(e){return function(t,n){var a=Object(T.e)(n()),r={id:D.e(),body:e,type:"customer",sessionId:a,failed:!0},i=Object(M.e)(r);return t(z.i(i))}},Mt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(a){return setTimeout(u()(o.a.mark((function n(){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x.b.fetchMessageAttachment(e,t);case 3:return r=n.sent,a(Re(r,e)),n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",Q);case 11:case"end":return n.stop()}}),n,null,[[0,8]])}))),n)}},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=e.sessionId,n={body:e.messageBody,session:t,attachments:[e.attachmentId]};return x.b.createMessageWithAttachment(n)},kt=function(e,t,n,a){return function(){var r=u()(o.a.mark((function r(i,s){var u,c,l,d,p,g;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,u=Object(T.e)(s()),c=e.id,l=e.fields,d=e.url,p=D.b(l,t),r.next=8,x.b.uploadAttachment(d,p);case 8:return r.next=10,wt({sessionId:u,attachmentId:c,messageBody:n});case 10:return g=r.sent,i(Ne(u,[g])),i(Mt(g.id,c,4e3)),r.abrupt("return",g);case 16:throw r.prev=16,r.t0=r.catch(0),i(At(a)),r.t0;case 20:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(e,t){return r.apply(this,arguments)}}()},xt=function(e,t,n,a){return function(){var r=u()(o.a.mark((function r(i){var s;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,x.b.createAttachment(e);case 3:return s=r.sent,i(ze(s)),i(kt(s,t,n,a)),r.abrupt("return",s);case 9:throw r.prev=9,r.t0=r.catch(0),i(At(a)),r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},Dt=function(e){return function(){var t=u()(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.b.getQueueWaitTime(e);case 3:return a=t.sent,n(Ze(a)),t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Nt=function(e){return function(t,n){var a=Object(T.lb)(n(),e),r=Object(T.N)(n()),i=Object(T.M)(n())&&a>r,o=Object(k.a)("vc-".concat(e));i&&!o&&(Object(k.c)("vc-".concat(e),e,{maxAge:43200}),t(L.d(e,i)))}},jt=function(e){return function(){var t=u()(o.a.mark((function t(n,a){var r,i,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(T.S)(a(),e),i=Object(T.M)(a()),!r&&i){t.next=4;break}return t.abrupt("return",Promise.resolve(Q));case 4:return t.prev=4,t.next=7,n(Dt(e));case 7:return s=t.sent,n(Nt(e)),t.abrupt("return",s);case 12:throw t.prev=12,t.t0=t.catch(4),t.t0;case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n){return t.apply(this,arguments)}}()},Tt=function(e){var t=e.messageId,n=e.sessionId;return function(e){x.b.fetchChatMessageById({messageId:t,sessionId:n}).then((function(t){return e(Be(t))})).catch((function(e){throw e}))}},St=function(){return function(e){Y||x.b.getSessionState().then((function(t){e(Fe(t)),Y=!0}))}},Ot=function(e){return function(t){x.b.updateSessionState(e).then((function(e){t(Fe(e))}))}},Pt=function(e,t){return function(n,a){var i=a(),o=Object(T.F)(i),s=b()(o,r()({},"session_".concat(e),{satisfaction:t}));n(Ot(s)),n(Fe(s))}},Et=function(e){return function(t,n){var a=n(),r=Object(T.F)(a),i=y()(r,"session_".concat(e));t(Ot(i)),t(Fe(i))}},Lt=function(e,t){return x.b.submitSatisfactionResponse(e,t)},_t=function(e){return{type:ye,data:e}},zt=function(e){return{type:Me,payload:e}},Rt=function(e){return function(t){t(zt(!0)),x.b.getArticles(e).then((function(e){t(function(e){return{type:Ae,payload:e}}(e)),t(zt(!1))}))}},Zt=function(e){return{type:we,payload:e}}},"4eWA":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o}));var a="chat-sound-play",r="chat-sound-done",i=function(){return{type:a}},o=function(){return{type:r}}},"7UJJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return l}));var a=n("pkk+"),r="CLEAR_TREEPICKER",i="TREEPICKER_UPDATE_PARENT",o="TREEPICKER_SELECT_NODE",s="INIT_TREEPICKER",u=function(){return{type:r}},c=function(e){return function(t){t({type:i,parentId:e}),t(function(e){return{type:o,nodeId:e}}(e))}},l=function(e){return function(t,n){t(function(e){return{type:s,tree:e}}(a.d(n(),e)))}}},"7eGY":function(e,t,n){"use strict";n.r(t);var a=n("fvjX"),r=n("TdMD"),i=n.n(r),o=n("JPcv"),s=n.n(o),u=n("0R0V"),c=n("mwIZ"),l=n.n(c),d=n("MoPD"),p={route:"",isRTL:!1,online:!0,isBlackListed:!1},g=n("GMKn"),f=n("zNGB"),h=s.a.Map({success:!1,address:null}),m=Object(u.combineReducers)({show:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.c:return!0;case f.b:return!1;default:return e}},email:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.a:return e.set("success",!0).set("address",t.email);default:return e}}}),I=n("OjRq"),b=n("lFXU"),v=n("3wRA"),y=function(e,t){var n=function(e,t,n){return"messages"===n?e:t};return e.update(t.id,Object(I.h)(),(function(e){return e.mergeWith(n,t)}))},C=Object(u.combineReducers)({attachments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.a:var n=t.messageId,a=Object(I.a)(t.attachment);return e.set(n,a);default:return e}},company:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(I.b)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.n:var n=t.company;return n?Object(I.b)(n):e;default:return e}},forms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(I.d)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.c:var n=l()(t,"payload.form",{});return Object(I.d)(n);case v.d:var a=t.inProgress;return e.set("inProgress",a);default:return e}},sessions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.i:return t.session?y(e,Object(I.h)(t.session)):e;case v.p:var n=t.sessions;return n?n.reduce((function(e,t){return y(e,Object(I.h)(t))}),e):e;case v.o:var a=t.session;return a?y(e,Object(I.h)(a)):e;case v.h:var r=t.session;return r?e.update(r.id,Object(I.h)(),(function(e){return e.merge(r)})):e;case v.q:var i=t.sessionId,o=t.messages;if(!i||!o||!e.get(i))return e;var u=s.a.OrderedSet(o.map((function(e){return e.id})));return e.updateIn([i,"messages"],s.a.OrderedSet(),(function(e){return e.merge(u)}));case b.a:var c=t.partialMessage;return c&&e.get(c.sessionId)?e.updateIn([c.sessionId,"messages"],s.a.OrderedSet(),(function(e){return e.add(c.id)})):e;case b.e:var d=t.message,p=t.partial;return p&&d&&e.get(d.sessionId)?e.updateIn([d.sessionId,"messages"],s.a.OrderedSet(),(function(e){return e.reduce((function(e,t){return t===p.id?e.add(d.id):e.add(t)}),s.a.OrderedSet())})):e;case v.g:var g=t.message;return g&&e.get(g.sessionId)?e.updateIn([g.sessionId,"messages"],s.a.OrderedSet(),(function(e){return e.add(g.id)})):e;case v.e:var f=l()(t,"form.session"),h=l()(t,"form.messages");return f.messages=s.a.OrderedSet(h.map((function(e){return e.id}))),e.set(f.id,Object(I.h)(f));case v.s:var m=l()(t,"form.session"),C=l()(t,"form.messages"),A=e.getIn([m.id,"messages"],s.a.OrderedSet()),M=A.reduce((function(e,t){return t.length>20?e.add(t):e}),s.a.OrderedSet());return m.messages=C.reduce((function(e,t){return e.add(t.id)}),M),e.set(m.id,Object(I.h)(m));default:return e}},sessionQueues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.j:var n=Object(I.f)(t.sessionQueue),a=n.id;return e.set(a,n);case v.k:return e.clear();default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.q:var n=t.sessionId,a=t.messages;return n&&a?a.reduce((function(e,t){return e.set(t.id,Object(I.e)(t))}),e):e;case b.a:var r=t.partialMessage;return r?e.set(r.id,r):e;case b.e:var i=t.message,o=t.partial;return i?e.set(i.id,Object(I.e)(i)).delete(o.id):e;case b.b:var u=t.partialMessage;return u?e.update(u.id,(function(e){return e.set("failed",!0)})):e;case b.d:var c=t.partialMessage;return c?e.update(c.id,(function(e){return e.set("loading",!0).set("failed",!1)})):e;case b.c:var d=t.partialMessage;return d?e.update(d.id,(function(e){return e.set("loading",!0)})):e;case v.g:var p=t.message;return p?e.set(p.id,Object(I.e)(p)):e;case v.e:var g=l()(t,"form.messages");return g.reduce((function(e,t){return e.set(t.id,Object(I.e)(t))}),e);case v.s:var f=l()(t,"form.messages"),h=e.filter((function(e){return e.id&&e.id.length>20}));return f.reduce((function(e,t){return e.set(t.id,Object(I.e)(t))}),h);default:return e}},teams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.List(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.b:var n=l()(t,"payload.teams",[]);return Object(o.fromJS)(n);default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.r:var n=t.users;return n?n.reduce((function(e,t){return e.set(t.id,Object(I.j)(t))}),e):e;default:return e}},satisfactionForms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.z:var n=Object(I.g)(t.satisfactionForm),a=n.id;return e.set(a,n);default:return e}},articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.v:return t.payload?t.payload.reduce((function(e,t){return e.set(t.id,t)}),s.a.Map()):e;case v.w:var n=t.payload,a=e.get(n),r=a.visited||0;return a.visited=r+1,e.set(n,a);default:return e}}}),A=n("4eWA"),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map({play:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.b:return e.set("play",!0);case A.a:return e.set("play",!1);default:return e}},w=n("7UJJ"),k=n("f4zv"),x=s.a.Map({tree:{children:[]},parent:null,selectedPath:[],selectedId:null,lastNodeRequired:!1}),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w.b:var n=l()(t,"tree.tree",{}),a=l()(t,"tree.lastNodeRequired",!1);return e.set("tree",n).set("lastNodeRequired",a);case w.c:var r=t.nodeId,i=e.get("tree"),o=k.b(i,r);return e.set("selectedId",r).set("selectedPath",o);case w.d:var s=t.parentId;if(!s)return e.set("parent",null).set("selectedPath",[]);var u=e.get("tree"),c=k.b(u,s),d=k.a(u,s);return e.set("parent",d).set("selectedPath",c);case w.a:return e.merge({parent:null,selectedPath:[],selectedId:null});default:return e}},N=n("AqJW"),j=Object(u.combineReducers)({entities:C,route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.c:return"history";case N.a:return"conversation";case N.b:return"form";default:return e}},activeSessionId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.a:return t.sessionId;case v.i:return t.session?t.session.id:e;case v.e:case v.s:var n=l()(t,"form.session.id");return n;default:return e}},describe:m,sound:M,scrollToMessageId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.m:return t.messageId;case v.s:var n=l()(t,"form.session.messages",s.a.OrderedSet()),a=n.last();return a;case v.l:return"";default:return e}},sessions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.OrderedSet(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.i:if(!t.session)return e;var n=s.a.OrderedSet([t.session.id]);return n.union(e);case v.p:var a=t.sessions;return a?a.reduce((function(e,t){return e.add(t.id)}),e):e;case v.o:var r=t.session;return r?e.add(r.id):e;case v.e:case v.s:var i=l()(t,"form.session.id");return e.add(i);default:return e}},sessionStates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.A:return t.sessionStates;default:return e}},isAfterHours:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.f:return t.isAfterHours;default:return e}},volumeControlSessions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.OrderedSet(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.t:if(!t.sessionId)return e;var n=s.a.OrderedSet([t.sessionId]);return n.union(e);case v.u:return t.sessionId?e.delete(t.sessionId):e;case v.g:var a=l()(t,"message.sessionId"),r=l()(t,"message.sentBy.type"),i="user"===r;return i&&(a&&e.includes(a))?e.delete(a):e;default:return e}},singleChat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map({enabled:!1,sessionId:""}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.n:var n=l()(t,"company.singleSessionChat",!1);return e.merge({enabled:n});case v.x:var a=l()(t,"activeSessionId","");return e.merge({sessionId:a});case v.E:var r=l()(t,"activeSessionId","");return e.merge({sessionId:r});case v.e:var i=l()(t,"form.session.id","");return e.merge({sessionId:i});case v.i:var o=l()(t,"session.id","");return e.merge({sessionId:o});case v.o:var u=l()(t,"session",{});return e.get("sessionId")===u.id&&u.lockedAt?e.set("sessionId",""):e;default:return e}},treePicker:D,lastActivity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.y:return t.activity;default:return e}},socketActivity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map({}),t=arguments.length>1?arguments[1]:void 0,n=l()(t,"data.status"),a=l()(t,"data.id"),r=l()(t,"type");switch(r){case g.a:return e.setIn([a,"typingStatus"],n);default:return e}},focus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.B:return t.data;default:return e}},isCampaignClicked:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.C:return t.data;default:return e}},articlesFetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.D:return t.payload;default:return e}}}),T=Object(u.combineReducers)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.Map(p),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.e:return e.set("route","kusty");case d.f:return e.set("route","none");case d.d:return e.set("route","app");case d.g:return e.set("isRTL",!0);case d.c:return e.set("online",!0);case d.b:return e.set("online",!1);case d.a:var n=l()(t,"payload.value");return e.set("isBlackListed",n);default:return e}},chat:j}),S=function(e,t){return t.type===d.h?T(void 0,t):T(e,t)},O={ui:{}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.a.fromJS(O),t=Object(a.a)(i.a)(a.c);return t(S,e)}},"7jBj":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));var a=6e4,r=864e5,i=function(e,t){return e.setSeconds(e.getSeconds()+t),e.toISOString()},o=function(e){var t=new Date,n=t.getTime()+6e4*t.getTimezoneOffset();return new Date(n+e)}},"94TQ":function(e,t,n){"use strict";var a=n("lwsE"),r=n.n(a),i=n("W8MJ"),o=n.n(i),s=5e3,u=6e5,c=function(){},l={RUNNING:"running",STOPPED:"stopped"},d=function(){function e(t){r()(this,e),this.task=t.task||c,this.status=l.STOPPED,this._startTime=null,this.lastPollTime=0,this._maxInterval=u,this._defaultInterval=t.defaultInterval||s,this._skipFirstPoll=t.skipFirstPoll||!1}return o()(e,[{key:"poll",value:function(){var e=this,t=function t(){if(e.status!==l.STOPPED){var n=Date.now(),a=e.lastPollTime?n-e.lastPollTime:0;e.lastPollTime=n,e._skipFirstPoll?e._skipFirstPoll=!1:e.task(a),e._currentTimeout=setTimeout((function(){return t()}),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,a=Date.now()-e,r=n;return a<3e5?r=(Math.floor(a/1e3/15)+1)*t:a<6e5&&(r=60*Math.floor(a/1e3/60)*1e3),Math.min(r,n)}(e._startTime,e._defaultInterval,e._maxInterval))}};this._currentTimeout=setTimeout((function(){t()}),0)}},{key:"start",value:function(){this.status=l.RUNNING,this._startTime=Date.now(),this.poll()}},{key:"stop",value:function(){this.state=l.STOPPED,this._startTime=null,this._currentTimeout&&clearTimeout(this._currentTimeout)}},{key:"restart",value:function(){this.stop(),this.start()}},{key:"setMaxInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;this._maxInterval=e}}]),e}();t.a=d},AqJW:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return I})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"i",(function(){return C})),n.d(t,"f",(function(){return M}));var a=n("o0o1"),r=n.n(a),i=n("yXPU"),o=n.n(i),s=n("JPcv"),u=n.n(s),c=n("7jBj"),l=n("pI4q"),d=n("Nlzp"),p=n("ci4T"),g=n("3wRA"),f="chat-route-to-form",h="chat-route-to-conversation",m="chat-route-to-history",I=function(e){return Object(l.c)("chat-route","conversation"),Object(l.c)("sessionId",e),{type:h,sessionId:e}},b=function(e){return function(t){var n=e.get("id");t(g.Y(n)),t(I(n))}},v=function(e){return function(t){return d.b.getChatSession(e).then((function(e){return t(b(u.a.fromJS(e)))})).catch((function(){return Object(l.b)("sessionId"),t(y())}))}},y=function(e){return function(){var t=o()(r.a.mark((function t(n,a){var i,o,s,u,c,h;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a(),o=Object(p.l)(i),s=o.get("singleSessionChat"),e||d.b.removeTempFormOverride(),u=d.b.getTempFormOverride()||d.b.getFormOverride()||o.activeForm,!s){t.next=9;break}if(!(c=Object(p.H)(i))){t.next=9;break}return t.abrupt("return",n(I(c)));case 9:if(u){t.next=11;break}return t.abrupt("return",n(I("new")));case 11:return t.prev=11,t.next=14,n(g.O(u,e));case 14:if(h=t.sent,!(h.questions&&h.questions.length)){t.next=18;break}return t.abrupt("return",n((r=h.id,Object(l.c)("chat-route","form"),Object(l.c)("formId",r),{type:f})));case 18:return t.abrupt("return",n(I("new")));case 21:throw t.prev=21,t.t0=t.catch(11),t.t0;case 24:case"end":return t.stop()}var r}),t,null,[[11,21]])})));return function(e,n){return t.apply(this,arguments)}}()},C=function(){return function(e,t){Object(p.o)(t())?e((Object(l.c)("chat-route","history"),Object(l.b)("sessionId"),{type:m})):e(A())}},A=function(){return function(e,t){var n=Object(l.a)("sessionId");if(n&&"new"!==n){var a=Object(p.o)(t()),r=Object(p.z)(t(),n);e(Date.now()-r>c.a&&a?C():v(n))}else e(y())}},M=function(){return function(e,t){var n,a=Object(p.y)(t());e(g.ab(a,!0)),(n=d.b.customerId)!==Object(l.a)("cust-id")&&(Object(l.b)("chat-route"),Object(l.b)("sessionId"),Object(l.b)("d-em")),Object(l.c)("cust-id",n),Object(p.x)(t())?e(g.pb(!1)):function(e){var t=Object(l.a)("chat-route");return"conversation"===t?(e(A()),!0):"history"===t&&(e(C()),!0)}(e)||function(e,t){var n=t.getIn(["chat","sessions"]);n&&n.size>0?e(C()):e(A())}(e,t())}}},EstQ:function(e,t,n){"use strict";var a=n("WUEa"),r={formatMessage:function(e,t){var n=Object(a.b)();return n?n.formatMessage(e,t):e.defaultMessage}};t.a=r},FfGl:function(e,t,n){(function(t){var n={environment:"production",port:Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).PORT||8023,host:Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).HOST,orgApiKey:Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).ORG_API_KEY||"",orgId:Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).ORG_ID||"",sdkHost:"https://cdn.kustomerapp.com/cw",sdkVersion:Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).SDK_VERSION||"v1.1",e2eApiKey:Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).E2E_API_KEY||"",pusherAPIKey:"55af7c7423b80da74f5d",apiBaseUrl:"https://api.kustomerapp.com"},a={};try{if("--useHttps"===t.argv.slice(2)[0])Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_CUSTOMER_WEB_BASE_URL&&Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_PUSHER_ACCESS_KEY&&Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_PORT&&Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_HOST&&Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_API_BASE_URL?(a.port=parseInt(Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_PORT,10),a.host=Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_HOST,a.sdkHost=Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_CUSTOMER_WEB_BASE_URL,a.pusherAPIKey=Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_PUSHER_ACCESS_KEY,a.apiBaseUrl=Object({API_BASE_URL:"https://api.kustomerapp.com",PUSHER_API_KEY:"55af7c7423b80da74f5d",NODE_ENV:"production",CUSTOMER_WEB_BASE_URL:"https://cdn.kustomerapp.com/cw"}).DEV_STAGING_API_BASE_URL):(console.log("start:https failed. Please add all necessary env vars."),t.exit(1))}catch(e){console.log("Error using https",e)}e.exports=Object.assign({},n,a)}).call(this,n("8oxB"))},GMKn:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a="socket-type-unknown",r="client-kustomer.app.chat.activity.typing",i="conversation"},KEuA:function(e,t,n){e.exports=n("7eGY")},KQ8z:function(e,t,n){"use strict";var a=n("TdDX"),r=n.n(a);t.a={get:function(e){return r.a.get(e)},set:function(e,t){return void 0!==t&&r.a.set(e,t)},remove:function(e){return r.a.remove(e)}}},KbFG:function(e,t,n){"use strict";n.d(t,"c",(function(){return A})),n.d(t,"e",(function(){return M})),n.d(t,"f",(function(){return w})),n.d(t,"h",(function(){return k})),n.d(t,"g",(function(){return x})),n.d(t,"b",(function(){return D})),n.d(t,"d",(function(){return N})),n.d(t,"a",(function(){return j}));var a=n("J4zp"),r=n.n(a),i=n("jfjY"),o=n.n(i),s=n("Uynq"),u=n.n(s),c=n("d5fF"),l=n.n(c),d=n("mwIZ"),p=n.n(d),g=n("6qam"),f=n.n(g),h=n("E+oP"),m=n.n(h),I=n("MJIl"),b=n.n(I),v=n("bNQv"),y=n.n(v),C=n("7jBj"),A=function(e,t,n){var a;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=void 0,u=function(){a=null,n||Reflect.apply(e,s,i)},c=n&&!a;clearTimeout(a),a=setTimeout(u,t),c&&Reflect.apply(e,s,i)}},M=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return"".concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e())},w=function(){return o()()||!(!window||!navigator)&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},k=function(e){var t=e.hours,n=e.timezoneOffset||0,a=C.d(n),i=a.getDay(),o=p()(t,i);if(f()(o)||m()(o))return!1;var s=60*a.getHours()+a.getMinutes();return b()(o,(function(e){var t=r()(e,2),n=t[0],a=t[1];return s>=n&&s<a}))},x=function(e){var t=Date.now();return!f()(e)&&!m()(e)&&b()(e,(function(e){if(!e.enabled)return!1;var n=new Date(e.startDate).valueOf(),a=new Date(e.endDate).valueOf();return t>n&&t<a}))},D=function(e,t){var n=new FormData;return y()(e,(function(e,t){return n.append(t,e)})),n.append("file",t),n},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Date.now()-e},j=function(e){var t=e.replace(/&nbsp;/g," ");return t=l.a.decode(t),0===(t=u()(t)).trim().length?"":t}},MoPD:function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"h",(function(){return C})),n.d(t,"g",(function(){return A})),n.d(t,"c",(function(){return M})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return k})),n.d(t,"t",(function(){return D})),n.d(t,"x",(function(){return N})),n.d(t,"w",(function(){return j})),n.d(t,"v",(function(){return T})),n.d(t,"u",(function(){return S})),n.d(t,"j",(function(){return L})),n.d(t,"l",(function(){return _})),n.d(t,"q",(function(){return z})),n.d(t,"m",(function(){return R})),n.d(t,"n",(function(){return Z})),n.d(t,"k",(function(){return U})),n.d(t,"s",(function(){return G})),n.d(t,"p",(function(){return B})),n.d(t,"o",(function(){return F})),n.d(t,"r",(function(){return H})),n.d(t,"i",(function(){return Y}));var a=n("o0o1"),r=n.n(a),i=n("yXPU"),o=n.n(i),s=n("mwIZ"),u=n.n(s),c=n("pI4q"),l=n("3wRA"),d=n("TsPW"),p=n("Nlzp"),g=n("ci4T"),f=n("AqJW"),h=n("WGix"),m=n("wo01"),I=n("KbFG"),b="app-route-to-kusty",v="app-route-to-none",y="app-route-to-app",C="app-stop",A="app-rtl",M="app-online",w="app-offline",k="app-blacklist",x=function(){return{type:y}},D=function(e){return{type:k,payload:e}},N=function(){return{type:C}},j=function(){return{type:A}},T=function(){return{type:M}},S=function(){return{type:w}},O=function(){return function(e){Object(c.c)("route","kusty"),e({type:b})}},P=function(){return function(e){Object(c.c)("route","none"),e({type:v})}},E=function(){return function(e){Object(c.c)("route","app",{maxAge:3600}),e(x()),e(Object(l.R)())}},L=function(e){return function(t,n){var a=g.d(n()),r=g.l(n()).get("singleSessionChat");a>=1&&r?t(E()):(p.b.setActiveSession(e),t(Object(f.d)(e)),t(E()),t(Object(l.pb)(!0)))}},_=function(){return function(e,t){var n=g.j(t()),a=u()(n.first(),"sessionId");e(a?L(a):E())}},z=function(){return function(e){e(N()),e(P())}},R=function(){return function(e){e(E())}},Z=function(e){return function(t){t(function(e){return function(t){Object(c.c)("route","app",{maxAge:3600}),t(Object(f.h)(e)),t(x()),t(Object(l.R)())}}(e))}},U=function(){return function(e){d.b.unsubscribeFromCustomerPresenceChannel(),e(Object(c.a)("noIcon")?P():O())}},G=function(){return function(){var e=o()(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.b.getCustomerStats(!1);case 3:a=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return");case 9:i=g.y(n()),new Date(a.activity).valueOf()>new Date(i).valueOf()||!i&&a?(t(Object(l.ab)(a)),t(Object(l.X)({})),t(Object(l.qb)(a.activity))):m.d();case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},W=function(e){return function(t,n){return t(Object(l.Z)((function(a){var r=a.enabled,i=a.settings,o=a.isInsideBusinessHours,s=n(),l=d.b.getLangOverride(),p=d.b.isLangOverrideRTL(),f=d.b.getFormOverride(),m=g.d(s),b=!h.a(s),v=u()(window,"Kustomer._startCallback");r&&(p&&(d.b.setWidgetToRTL(),t((function(e){e(j())}))),t((function(e){var t=Object(c.a)("sessionId"),n=t&&"new"!==t,a=Object(c.a)("route"),r=Object(c.a)("noIcon");!Object(I.f)()||r?e(r&&"none"===a?P():r&&n?E():"app"===a?E():r?P():O()):e(O())}))),v&&!e&&(window.Kustomer._startCallback({enabled:r,settings:i,isInsideBusinessHours:o,activeSessionCount:m,isLangRTL:p,lang:l,form:f,isDomainWhitelisted:b}),window.Kustomer._startCallback=null),e&&e({enabled:r,settings:i,isInsideBusinessHours:o,activeSessionCount:m,isLangRTL:p,lang:l,form:f,isDomainWhitelisted:b})})))}},B=function(e){return function(t){t({type:"app-start"}),t(W(e))}},F=function(e){return function(t){t(N()),t(B(e))}},H=function(){return function(e,t){var n=g.y(t()),a=d.b.shouldMaintainActiveChats(n);!d.b.isRTCAlive()&&!a&&(d.b.disconnect(),e(N()))}},Y=function(){return function(e,t){var n=t();return Promise.resolve(g.l(n))}}},Nlzp:function(e,t,n){"use strict";var a=n("TsPW");n.d(t,"a",(function(){return a.a})),t.b=a.b},O3XI:function(e,t,n){"use strict";n.r(t);var a=n("gcR/"),r=n.n(a),i=n("q1tI"),o=n.n(i),s=n("/MKj"),u=n("J54a"),c=n("lwsE"),l=n.n(c),d=n("W8MJ"),p=n.n(d),g=n("a1gu"),f=n.n(g),h=n("Nsbk"),m=n.n(h),I=n("PJYZ"),b=n.n(I),v=n("7W2i"),y=n.n(v),C=n("lSNA"),A=n.n(C),M=n("17x9"),w=n.n(M),k=n("mwIZ"),x=n.n(k),D=function(e){var t=x()(e,"which"),n=x()(e,"key"),a=x()(e,"keyCode");return 13===t||"Enter"===n||13===a},N=function(e){var t=x()(e,"which"),n=x()(e,"key"),a=x()(e,"keyCode");return 9===t||"Tab"===n||9===a},j=function(e){var t=x()(e,"which"),n=x()(e,"key"),a=x()(e,"keyCode");return!(27!==t&&"Escape"!==n&&"Esc"!==n&&27!==a)},T=n("1Cge"),S=n("JRPe"),O="kustomer-app-icon",P="kustomer-app-icon-image",E="kustomer-app-minimized-unread-icon",L="kustomer-app-email-banner-success-container",_="kustomer-app-email-banner-success-message",z=(w.a.object,{icon:{cursor:"pointer",position:"fixed",bottom:"25px",right:"25px",width:"50px",height:"50px",pointerEvents:"all","@media (max-width: 600px)":{right:"10px",bottom:"10px"},WebkitFilter:"drop-shadow(1px 1px 4px rgba(0,0,0,.33))",filter:"drop-shadow(1px 1px 4px rgba(0,0,0,.33))",WebkitTransition:"all .2s ease-in-out",transition:"all ".concat("150ms"," ").concat("ease-in-out"),WebkitPerspective:1e3,WebkitBackfaceVisibility:"hidden",":hover":{WebkitTransform:"translateY(-5px) scale(1.05)",transform:"translateY(-5px) scale(1.05)",WebkitFilter:"drop-shadow(1px 1px 6px rgba(0,0,0,.33))",filter:"drop-shadow(1px 1px 6px rgba(0,0,0,.33))"}}}),R=n("MoPD"),Z=n("ci4T"),U=Object(S.d)({aria_label_expand_chat_widget:{id:"kustomer.chat.icon.aria.label.expand.chat.widget",defaultMessage:"Expand chat widget"}}),G=function(e,t){return t},W=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+U2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxwYXRoIGQ9Ik05LDEzIEwxMSwxMyBMMTEsMTUgTDksMTUgTDksMTMgTDksMTMgWiBNOSw1IEwxMSw1IEwxMSwxMSBMOSwxMSBMOSw1IEw5LDUgWiBNMTAsMCBDNC40NywwIDAsNC41IDAsMTAgQy0yLjIyMDQ0NjA1ZS0xNiwxMi42NTIxNjQ5IDEuMDUzNTY4NCwxNS4xOTU3MDQgMi45Mjg5MzIxOSwxNy4wNzEwNjc4IEM0LjgwNDI5NTk3LDE4Ljk0NjQzMTYgNy4zNDc4MzUxLDIwIDEwLDIwIEMxNS41MjI4NDc1LDIwIDIwLDE1LjUyMjg0NzUgMjAsMTAgQzIwLDcuMzQ3ODM1MSAxOC45NDY0MzE2LDQuODA0Mjk1OTcgMTcuMDcxMDY3OCwyLjkyODkzMjE5IEMxNS4xOTU3MDQsMS4wNTM1Njg0IDEyLjY1MjE2NDksLTIuMjIwNDQ2MDVlLTE2IDEwLC00LjQ0MDg5MjFlLTE2IEwxMCwwIFogTTEwLDE4IEM1LjU4MTcyMiwxOCAyLDE0LjQxODI3OCAyLDEwIEMyLDUuNTgxNzIyIDUuNTgxNzIyLDIgMTAsMiBDMTIuMTIxNzMxOSwyIDE0LjE1NjU2MzIsMi44NDI4NTQ3MiAxNS42NTY4NTQyLDQuMzQzMTQ1NzUgQzE3LjE1NzE0NTMsNS44NDM0MzY3OCAxOCw3Ljg3ODI2ODA4IDE4LDEwIEMxOCwxNC40MTgyNzggMTQuNDE4Mjc4LDE4IDEwLDE4IEwxMCwxOCBaIiBpZD0iU2hhcGUiIGZpbGw9IiNFNDUyNDYiPjwvcGF0aD4gICAgPC9nPjwvc3ZnPg=="),B=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSIwIDAgMTAgMTAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQxICgzNTMyNikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+UGFnZSAxPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9InByb2R1Y3QiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJwcm9kdWN0LWNvcHktMTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00MjQuMDAwMDAwLCAtNTg0Ny4wMDAwMDApIiBmaWxsPSIjRkZGRkZGIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTc0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMi4wMDAwMDAsIDU0MjAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExNi4wMDAwMDAsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9ImNoYXQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDk5MTc0LCAwLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUGFnZS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI4MC41OTMzMjYsIDQzMS42NzQwMDApIHJvdGF0ZSgtMTgwLjAwMDAwMCkgdHJhbnNsYXRlKC0yODAuNTkzMzI2LCAtNDMxLjY3NDAwMCkgIiBwb2ludHM9IjI4MC4wOTI4MjYgNDI3IDI4MC4wOTI4MjYgNDM0LjQzNCAyNzYuNjA3ODI2IDQzMC45NDkgMjc1LjkwMDgyNiA0MzEuNjU2IDI4MC41OTI4MjYgNDM2LjM0OCAyODUuMjg1ODI2IDQzMS42NTYgMjg0LjU3ODgyNiA0MzAuOTQ5IDI4MS4wOTI4MjYgNDM0LjQzNCAyODEuMDkyODI2IDQyNyI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="),F=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTIwLDE0SDRWMTBIMjAiIC8+PC9zdmc+"),H=G(0,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAPUExURf///////0xpcf///////9FYg5QAAAAFdFJOU/xQAKoFoCAUowAAAEVJREFUGNNtj9EWACAEQ6/0/99cp5qHyQMzDMyMURY5SSgm2Ol2Yg5kFHMBAgqopEbUrEFK7kn/CR9xUV/rh7XT23P+/gKvUAFJaWnr8gAAAABJRU5ErkJggg=="),Y=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjU2MHB4IiBoZWlnaHQ9IjU2MHB4IiB2aWV3Qm94PSIwIDAgNTYwIDU2MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy42LjEgKDI2MzEzKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5pY29uLWNoZXZyb24tbGVmdDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJpY29uLWNoZXZyb24tbGVmdCIgZmlsbD0iIzAwMDAwMCI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik01NiwxODkuNTM1MzYgTDk3LjU0NCwxNDcuOTkxMzYgTDI3OS42MzIsMzMwLjA3OTM2IEw0NjEuODY0LDE0OC4xMzUzNiBMNTAzLjI2NCwxODkuNTM1MzYgTDI3OS42MzIsNDEzLjIzOTM2IEw1NiwxODkuNTM1MzYgWiIgaWQ9IkZpbGwtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjc5LjYzMjAwMCwgMjgwLjYxNTM2MCkgcm90YXRlKC0yNzAuMDAwMDAwKSB0cmFuc2xhdGUoLTI3OS42MzIwMDAsIC0yODAuNjE1MzYwKSAiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="),Q=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE5LDYuNDFMMTcuNTksNUwxMiwxMC41OUw2LjQxLDVMNSw2LjQxTDEwLjU5LDEyTDUsMTcuNTlMNi40MSwxOUwxMiwxMy40MUwxNy41OSwxOUwxOSwxNy41OUwxMy40MSwxMkwxOSw2LjQxWiIgLz48L3N2Zz4="),V=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTEzLDlIMTguNUwxMywzLjVWOU02LDJIMTRMMjAsOFYyMEEyLDIgMCAwLDEgMTgsMjJINkM0Ljg5LDIyIDQsMjEuMSA0LDIwVjRDNCwyLjg5IDQuODksMiA2LDJNMTUsMThWMTZINlYxOEgxNU0xOCwxNFYxMkg2VjE0SDE4WiIgLz48L3N2Zz4="),J='<?xml version="1.0" encoding="UTF-8"?><svg width="50px" height="50px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>kusty-icon copy 5</title><desc>Created with Sketch.</desc><defs><path d="M25.463866,50 L15.6068856,43.0136986 L10.5414929,43.0136986 C4.65468519,43.0136986 1.0658141e-14,38.2191781 1.0658141e-14,32.4657534 L1.0658141e-14,10.5479452 C1.0658141e-14,4.65753425 4.79158769,0 10.5414929,0 L32.4458938,0 C38.3327015,0 42.9873867,4.79452055 42.9873867,10.5479452 L42.9873867,32.4657534 C42.9873867,38.3561644 38.195799,43.0136986 32.4458938,43.0136986 L28.3388186,43.0136986 L28.3388186,50 L25.463866,50 Z" id="path-1"></path><mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="42.9873867" height="50" fill="white"><use xlink:href="#path-1"></use></mask></defs><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="kusty-icon-copy-5"><g id="Group-2" transform="translate(4.000000, 0.000000)"><use id="Fill-3-Copy-3" stroke="#073256" mask="url(#mask-2)" stroke-width="8" fill="#FFFFFF" xlink:href="#path-1"></use><g id="Group-16" transform="translate(12.000000, 10.000000)" fill="#222222"><path d="M16.7648458,18.1542441 L2.27714375,18.1542441 C2.06719889,18.1542441 1.87382862,18.2627738 1.76885619,18.4428231 C1.66388377,18.6238726 1.66388377,18.8449331 1.76885619,19.0259826 C1.87382862,19.2105331 4.43234325,23.5547217 9.52476174,23.5547217 C14.6176825,23.5547217 17.1686632,19.2105331 17.2736356,19.0259826 C17.3705719,18.8449331 17.3705719,18.6238726 17.264595,18.4428231 C17.1606271,18.2627738 16.9667545,18.1542441 16.7648458,18.1542441 L16.7648458,18.1542441 Z M16.9988992,2.80704516 C17.6684123,2.80704516 18.2013107,2.26489683 18.2013107,1.60121524 C18.2013107,0.934032704 17.6684123,0.395885468 16.9988992,0.395885468 C14.1495758,0.395885468 11.8411868,2.6990156 11.8411868,5.52728941 L11.8411868,11.4389068 C11.8411868,12.1020883 12.3821213,12.6402355 13.0521367,12.6402355 L16.9988992,12.6402355 C17.6684123,12.6402355 18.2013107,12.1020883 18.2013107,11.4389068 L18.2013107,7.50433032 C18.2013107,6.83764792 17.6684123,6.29900055 16.9988992,6.29900055 L14.246512,6.29900055 L14.246512,5.52728941 C14.246512,4.03288054 15.4810682,2.80704516 16.9988992,2.80704516 L16.9988992,2.80704516 Z M2.03505422,12.6402355 C1.36554107,12.6402355 0.832140494,12.1020883 0.832140494,11.4389068 L0.832140494,5.52728941 C0.832140494,2.6990156 3.14052943,0.395885468 5.98985284,0.395885468 C6.65986826,0.395885468 7.20030048,0.934032704 7.20030048,1.60121524 C7.20030048,2.26489683 6.65986826,2.80704516 5.98985284,2.80704516 C4.48056025,2.80704516 3.24600412,4.03288054 3.24600412,5.52728941 L3.24600412,6.29900055 L5.98985284,6.29900055 C6.65986826,6.29900055 7.20030048,6.83764792 7.20030048,7.50433032 L7.20030048,11.4389068 C7.20030048,12.1020883 6.65986826,12.6402355 5.98985284,12.6402355 L2.03505422,12.6402355 Z" id="Fill-1"></path></g></g></g></g></svg>',X=G(0,"data:image/svg+xml;base64,".concat(btoa(J))),K=function(e){return G("kustyColored: ".concat(e),"data:image/svg+xml;base64,".concat(btoa(J.replace(/#073256/,e))))},q=G(0,"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMjciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiA8dGl0bGU+Y2hlY2std2hpdGU8L3RpdGxlPgogPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CgogPGc+CiAgPHRpdGxlPmJhY2tncm91bmQ8L3RpdGxlPgogIDxyZWN0IGZpbGw9Im5vbmUiIGlkPSJjYW52YXNfYmFja2dyb3VuZCIgaGVpZ2h0PSI0MDIiIHdpZHRoPSI1ODIiIHk9Ii0xIiB4PSItMSIvPgogPC9nPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgZmlsbD0ibm9uZSIgaWQ9IkZJTkFMX0lSSVNfbmV3X291dGxpbmVfc2VtaXNlbWlzZW1pc2VtaXJvdW5kZWQiPgogICA8ZyBmaWxsPSIjRkZGRkZGIiBpZD0iY2hlY2std2hpdGUiPgogICAgPHBvbHlnb24gcG9pbnRzPSI5LjI0ODEzMjE2IDI0LjkwMDUxMzIgMTAuNTMzODY5NiAyNi40ODI5ODIxIDEyLjA5MTI0NjQgMjUuMTY2OTYzMiAzNi4xMjYyMjYyIDQuODU2ODU2ODQgMzMuNTQ0NDcxNiAxLjgwMTYwODQxIDkuNTA5NDkxNzUgMjIuMTExNzE0NyAxMi4zNTI2MDYgMjIuMzc4MTY0NiAzLjU1MjIzNjkgMTEuNTQ2Nzg0OSAwLjQ0Nzc2MzA5NyAxNC4wNjkxMzM1IiBpZD0iUGFnZS0xIi8+CiAgIDwvZz4KICA8L2c+CiAgPGxpbmUgc3Ryb2tlLWxpbmVjYXA9InVuZGVmaW5lZCIgc3Ryb2tlLWxpbmVqb2luPSJ1bmRlZmluZWQiIGlkPSJzdmdfNCIgeTI9IjIzLjAwNzI2MiIgeDI9IjEyLjM2ODE2IiB5MT0iMjAuNDc0MzU1IiB4MT0iOS44MzUyNTIiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2U9IiNmZmZmZmYiIGZpbGw9Im5vbmUiLz4KICA8bGluZSBzdHJva2UtbGluZWNhcD0idW5kZWZpbmVkIiBzdHJva2UtbGluZWpvaW49InVuZGVmaW5lZCIgaWQ9InN2Z181IiB5Mj0iMjMuODczMjAxIiB4Mj0iMTEuNjI2NjQ1IiB5MT0iMjAuODQwNTk1IiB4MT0iOC41OTQwMzkiIGZpbGwtb3BhY2l0eT0ibnVsbCIgc3Ryb2tlLW9wYWNpdHk9Im51bGwiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2U9IiNmZmZmZmYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+"),$=G(0,"".concat("https://cdn.kustomerapp.com/cw","/message.mp3")),ee=G(0,"".concat("https://cdn.kustomerapp.com/cw","/blank.mp3")),te=G(0,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiICB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgIDxwYXRoIGZpbGw9IiM0NDRjNTIiIGQ9Ik0xNi41LDZWMTcuNUE0LDQgMCAwLDEgMTIuNSwyMS41QTQsNCAwIDAsMSA4LjUsMTcuNVY1QTIuNSwyLjUgMCAwLDEgMTEsMi41QTIuNSwyLjUgMCAwLDEgMTMuNSw1VjE1LjVBMSwxIDAgMCwxIDEyLjUsMTYuNUExLDEgMCAwLDEgMTEuNSwxNS41VjZIMTBWMTUuNUEyLjUsMi41IDAgMCwwIDEyLjUsMThBMi41LDIuNSAwIDAsMCAxNSwxNS41VjVBNCw0IDAgMCwwIDExLDFBNCw0IDAgMCwwIDcsNVYxNy41QTUuNSw1LjUgMCAwLDAgMTIuNSwyM0E1LjUsNS41IDAgMCwwIDE4LDE3LjVWNkgxNi41WiIgLz4KPC9zdmc+"),ne=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZmlsbD0iIzkzOUZBOCIgZD0iTTcsMlYxM0gxMFYyMkwxNywxMEgxM0wxNywySDdaIiAvPjwvc3ZnPg=="),ae=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIzMjVweCIgaGVpZ2h0PSIxODZweCIgdmlld0JveD0iMCAwIDMyNSAxODYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+R3JvdXAgNDQ8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+ICAgICAgICA8Y2lyY2xlIGlkPSJwYXRoLTEiIGN4PSI4MyIgY3k9IjgzIiByPSI4MyI+PC9jaXJjbGU+ICAgICAgICA8cmVjdCBpZD0icGF0aC0zIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTUzIiBoZWlnaHQ9IjY0IiByeD0iMiI+PC9yZWN0PiAgICAgICAgPHBhdGggZD0iTTk3LjY5Nzc0NDUsNzkuNDg5Njc5MyBDOTQuNDYxNTMyNiw4MC41MzQ2MzQzIDkxLjAwNzU5NjksODEuMDk5Mzk0IDg3LjQyMDk5MTEsODEuMDk5Mzk0IEM4NS41MTc0Njg5LDgxLjA5OTM5NCA4My42NTEzMTY1LDgwLjk0MDMxNTIgODEuODM1MjQ5LDgwLjYzNDc5OTQgQzc2LjE4OTYyMDgsODkuMTY0MjI5MiA2Ni40NzQ2MTYzLDk0Ljc5NDQyNDMgNTUuNDM2OTk5Nyw5NC43OTQ0MjQzIEMzNy45OTY0NTM5LDk0Ljc5NDQyNDMgMjMuODU4MDk4Miw4MC43Mzc0MTM2IDIzLjg1ODA5ODIsNjMuMzk3MjEyMiBDMjMuODU4MDk4Miw0Ni4wNTcwMTA3IDM3Ljk5NjQ1MzksMzIgNTUuNDM2OTk5NywzMiBDNTYuMzk3MTgwMiwzMiA1Ny4zNDczNTE4LDMyLjA0MjYwNjggNTguMjg1NzA2MiwzMi4xMjYwMjI1IEM2My45NDIyNDA3LDIxLjkxNjg2MiA3NC44NjkxODE3LDE1IDg3LjQyMDk5MTEsMTUgQzEwNS4wODgwMywxNSAxMTkuNTM1OTgsMjguNzAzMjYyMyAxMjAuNTk5MjE4LDQ2LjAwMjY1MzMgQzEzMy44OTQwNyw0Ni4xOTYzNjIyIDE0NC42MTE0OSw1Ni45NzIwMTA2IDE0NC42MTE0OSw3MC4yMzY0NDQ1IEMxNDQuNjExNDksODMuNjIxODYzMSAxMzMuNjk3NjcxLDk0LjQ3Mjg4ODkgMTIwLjIzNDc5NCw5NC40NzI4ODg5IEMxMTAuMDY3ODcsOTQuNDcyODg4OSAxMDEuMzU0Njc0LDg4LjI4NDU0ODkgOTcuNjk3NzQ0NSw3OS40ODk2NzkyIFoiIGlkPSJwYXRoLTUiPjwvcGF0aD4gICAgICAgIDxmaWx0ZXIgeD0iLTUzLjglIiB5PSItODEuNSUiIHdpZHRoPSIyMDcuNyUiIGhlaWdodD0iMjYyLjklIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItNiI+ICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iLTIiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+ICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTgiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4gICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC4zNDkwMTk2MDggICAwIDAgMCAwIDAuNDA3ODQzMTM3ICAgMCAwIDAgMCAwLjQ1MDk4MDM5MiAgMCAwIDAgMC4xNSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4PiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjIiPjwvZmVPZmZzZXQ+ICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNSIgaW49InNoYWRvd09mZnNldE91dGVyMiIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIyIj48L2ZlR2F1c3NpYW5CbHVyPiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjM0OTAxOTYwOCAgIDAgMCAwIDAgMC40MDc4NDMxMzcgICAwIDAgMCAwIDAuNDUwOTgwMzkyICAwIDAgMCAwLjE1IDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjIiIHJlc3VsdD0ic2hhZG93TWF0cml4T3V0ZXIyIj48L2ZlQ29sb3JNYXRyaXg+ICAgICAgICAgICAgPGZlTWVyZ2U+ICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPiAgICAgICAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49InNoYWRvd01hdHJpeE91dGVyMiI+PC9mZU1lcmdlTm9kZT4gICAgICAgICAgICA8L2ZlTWVyZ2U+ICAgICAgICA8L2ZpbHRlcj4gICAgICAgIDxwYXRoIGQ9Ik0xMzIsNjQuODM0NjA2MyBDMTM3LjM5MDgxNiw1Mi45NTEwMjM2IDE0OS4zNTkxODEsNDQuNjg1NjkzOCAxNjMuMjU4MDE2LDQ0LjY4NTY5MzggQzE2My4zODY4MjksNDQuNjg1NjkzOCAxNjMuNTE1NDc2LDQ0LjY4NjQwMzcgMTYzLjY0Mzk1Myw0NC42ODc4MTk5IEMxNjcuNDM4NzcyLDI4LjgwNzAxOTIgMTgxLjcyNDUxMSwxNyAxOTguNzY3OTI4LDE3IEMyMTQuMjA1OTM0LDE3IDIyNy4zODEzMTYsMjYuNjg3NDQ3OCAyMzIuNTQ2NzUyLDQwLjMxNTAyMjYgQzIzMy4zMTU0NjEsNDAuMjQ3OTI2OCAyMzQuMDkzNTgxLDQwLjIxMzY3MzQgMjM0Ljg3OTcwMiw0MC4yMTM2NzM0IEMyNDguNzI3NTg5LDQwLjIxMzY3MzQgMjYwLjA5MjkzOCw1MC44NDI2NzU1IDI2MS4yNjI0NjYsNjQuMzg3Mzk0MyBDMjYwLjUwMTc5MSw2NC4zMjE3MTMzIDI1OS43MzE5Miw2NC4yODgxODk3IDI1OC45NTQyMTksNjQuMjg4MTg5NyBMMTM3LjM3NzkxMSw2NC4yODgxODk3IEwxMzcuMzc3OTExLDY0LjI4ODE4OTcgQzEzNS41MzUyNjEsNjQuMjg4MTg5NyAxMzMuNzM2NTY2LDY0LjQ3NjM4NjEgMTMyLDY0LjgzNDYwNjMgWiIgaWQ9InBhdGgtNyI+PC9wYXRoPiAgICAgICAgPGZpbHRlciB4PSItNTAuMyUiIHk9Ii0xMzUuOSUiIHdpZHRoPSIyMDAuNiUiIGhlaWdodD0iMzcxLjglIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItOCI+ICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iLTIiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+ICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTgiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4gICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC4zNDkwMTk2MDggICAwIDAgMCAwIDAuNDA3ODQzMTM3ICAgMCAwIDAgMCAwLjQ1MDk4MDM5MiAgMCAwIDAgMC4xNSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4PiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjIiPjwvZmVPZmZzZXQ+ICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNSIgaW49InNoYWRvd09mZnNldE91dGVyMiIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIyIj48L2ZlR2F1c3NpYW5CbHVyPiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjM0OTAxOTYwOCAgIDAgMCAwIDAgMC40MDc4NDMxMzcgICAwIDAgMCAwIDAuNDUwOTgwMzkyICAwIDAgMCAwLjE1IDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjIiIHJlc3VsdD0ic2hhZG93TWF0cml4T3V0ZXIyIj48L2ZlQ29sb3JNYXRyaXg+ICAgICAgICAgICAgPGZlTWVyZ2U+ICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPiAgICAgICAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49InNoYWRvd01hdHJpeE91dGVyMiI+PC9mZU1lcmdlTm9kZT4gICAgICAgICAgICA8L2ZlTWVyZ2U+ICAgICAgICA8L2ZpbHRlcj4gICAgICAgIDxwYXRoIGQ9Ik03MSwxMjUgTDcxLDM3LjYyMzIxMjEgQzcxLDM2LjE3NDA2MTggNzIuMTc4NDExOCwzNSA3My42MTY5NDEyLDM1IEwyMDIuMzgzMDU5LDM1IEMyMDMuODI4MTU3LDM1IDIwNSwzNi4xNzE0Mjk0IDIwNSwzNy42MjMyMTIxIEwyMDUsMTI1IiBpZD0icGF0aC05Ij48L3BhdGg+ICAgICAgICA8ZmlsdGVyIHg9Ii02LjclIiB5PSItMTAuMCUiIHdpZHRoPSIxMTMuNCUiIGhlaWdodD0iMTIwLjAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMTAiPiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+ICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjUwMTQ4ODA5NSAgIDAgMCAwIDAgMC41MDE0ODgwOTUgICAwIDAgMCAwIDAuNTAxNDg4MDk1ICAwIDAgMCAwLjE5NTQ1NDAzMSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+ICAgICAgICA8L2ZpbHRlcj4gICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMjEuMjEyMjAyOCUiIHgyPSI1MCUiIHkyPSIxNDUuMTQwNDM5JSIgaWQ9ImxpbmVhckdyYWRpZW50LTExIj4gICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQjJFMEZGIiBvZmZzZXQ9IjAlIj48L3N0b3A+ICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0QwN0ZGRiIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+ICAgICAgICA8L2xpbmVhckdyYWRpZW50PiAgICAgICAgPHBhdGggZD0iTTUuNTUxMTE1MTJlLTE1LDExMS4zNzU4NTUgQzQuMjEyMTQ2NTMsMTAyLjA5MDU0NyAxMy41NjM2OTk2LDk1LjYzMjM4MjMgMjQuNDIzNjM3OSw5NS42MzIzODIzIEMyNC41MjQyODY0LDk1LjYzMjM4MjMgMjQuNjI0ODA1NCw5NS42MzI5MzcgMjQuNzI1MTkxOSw5NS42MzQwNDM1IEMyNy42OTAyOTYzLDgzLjIyNTQ4NSAzOC44NTI1NDQxLDc0IDUyLjE2OTUxOTQsNzQgQzY0LjIzMjA5NzgsNzQgNzQuNTI2NzYwOSw4MS41NjkzNDUyIDc4LjU2MjgwNTEsOTIuMjE3MzMyMiBDNzkuMTYzNDQwNyw5Mi4xNjQ5MDY1IDc5Ljc3MTQyOTksOTIuMTM4MTQyNCA4MC4zODU2NzAyLDkyLjEzODE0MjQgQzkxLjIwNTc5ODcsOTIuMTM4MTQyNCAxMDAuMDg2MTgzLDEwMC40NDMxNzcgMTAxLDExMS4wMjY0MjQgQzEwMC40MDU2NDIsMTEwLjk3NTEwMyA5OS44MDQwOTg3LDExMC45NDg5MSA5OS4xOTY0Mzc0LDExMC45NDg5MSBMOTkuMTk2NDM3NCwxMTAuOTQ4OTEgTDQuMjAyMDYzMTQsMTEwLjk0ODkxIEw0LjIwMjA2MzE0LDExMC45NDg5MSBDMi43NjIyOTczMywxMTAuOTQ4OTEgMS4zNTY4NzY1MiwxMTEuMDk1OTU4IDIuNjExMjQ0NTVlLTEzLDExMS4zNzU4NTUgWiIgaWQ9InBhdGgtMTIiPjwvcGF0aD4gICAgICAgIDxmaWx0ZXIgeD0iLTY0LjQlIiB5PSItMTczLjklIiB3aWR0aD0iMjI4LjclIiBoZWlnaHQ9IjQ0Ny44JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTEzIj4gICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSItMiIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4gICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxOCIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjM0OTAxOTYwOCAgIDAgMCAwIDAgMC40MDc4NDMxMzcgICAwIDAgMCAwIDAuNDUwOTgwMzkyICAwIDAgMCAwLjE1IDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHJlc3VsdD0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+ICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMiIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMiI+PC9mZU9mZnNldD4gICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI1IiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIyIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjIiPjwvZmVHYXVzc2lhbkJsdXI+ICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuMzQ5MDE5NjA4ICAgMCAwIDAgMCAwLjQwNzg0MzEzNyAgIDAgMCAwIDAgMC40NTA5ODAzOTIgIDAgMCAwIDAuMTUgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMiIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjIiPjwvZmVDb2xvck1hdHJpeD4gICAgICAgICAgICA8ZmVNZXJnZT4gICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+ICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIyIj48L2ZlTWVyZ2VOb2RlPiAgICAgICAgICAgIDwvZmVNZXJnZT4gICAgICAgIDwvZmlsdGVyPiAgICAgICAgPHBhdGggZD0iTTIxNC4zNTc0NSwxMjQgTDE1My40NzA4MzMsMTI0IEwxNTMuNDcwODMzLDEyNi40NzE3MTcgTDEyMi41MjkxNjcsMTI2LjQ3MTcxNyBMMTIyLjUyOTE2NywxMjQgTDYxLjY0Mzg2NjcsMTI0IEM2MC4xODEwNSwxMjQgNTksMTI0Ljg1ODc2OCA1OSwxMjUuOTE3MTE2IEw1OSwxMzEuMDgyODg0IEM1OSwxMzIuMTQ4OTA4IDYwLjE4MzY4MzMsMTMzIDYxLjY0Mzg2NjcsMTMzIEwyMTQuMzU3NDUsMTMzIEMyMTUuODE4OTUsMTMzIDIxNywxMzIuMTQxMjMyIDIxNywxMzEuMDgyODg0IEwyMTcsMTI1LjkxNzExNiBDMjE3LDEyNC44NTEwOTIgMjE1LjgxNjMxNywxMjQgMjE0LjM1NzQ1LDEyNCBaIiBpZD0icGF0aC0xNCI+PC9wYXRoPiAgICAgICAgPGZpbHRlciB4PSItNS43JSIgeT0iLTEwMC4wJSIgd2lkdGg9IjExMS40JSIgaGVpZ2h0PSIzMDAuMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xNSI+ICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4gICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+ICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuNTAxNDg4MDk1ICAgMCAwIDAgMCAwLjUwMTQ4ODA5NSAgIDAgMCAwIDAgMC41MDE0ODgwOTUgIDAgMCAwIDAuMTk1NDU0MDMxIDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4gICAgICAgIDwvZmlsdGVyPiAgICAgICAgPGVsbGlwc2UgaWQ9InBhdGgtMTYiIGN4PSIyOS41MjE2NDMiIGN5PSIyOS4wNTAxMjkyIiByeD0iMjkuMjc2OTgxNiIgcnk9IjI5LjA1MDEyOTIiPjwvZWxsaXBzZT4gICAgICAgIDxmaWx0ZXIgeD0iLTE1LjQlIiB5PSItMTUuNSUiIHdpZHRoPSIxMzAuNyUiIGhlaWdodD0iMTMxLjAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMTgiPiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+ICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwLjUwMTQ4ODA5NSAgIDAgMCAwIDAgMC41MDE0ODgwOTUgICAwIDAgMCAwIDAuNTAxNDg4MDk1ICAwIDAgMCAwLjE5NTQ1NDAzMSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+ICAgICAgICA8L2ZpbHRlcj4gICAgICAgIDxwYXRoIGQ9Ik0yLjM0NDUxMzg5LDEuMzIxODc1MjggQzQuODE2OTIzMjgsMi43OTYzMzM5MSA3LjQ4NjM5OTA0LDMuNTMzNTYzMjIgMTAuMzUyOTQxMiwzLjUzMzU2MzIyIEMxMy40MjAyMDgxLDMuNTMzNTYzMjIgMTYuNTQzMzg4MSwyLjY4OTQ3MjU5IDE5LjcyMjQ4MTEsMS4wMDEyOTEzMyBMMTkuNzIyNDkwNiwxLjAwMTMwOTE5IEMyMC40Nzg3Mjk2LDAuNTk5NzI2NTkxIDIxLjQxNzMyOTQsMC44ODcyMzIzODEgMjEuODE4OTEyLDEuNjQzNDcxMzUgQzIxLjkzNzgyMTMsMS44NjczOTQ5NyAyMiwyLjExNzA2MzU4IDIyLDIuMzcwNjAwOTcgTDIyLDguNDQ5NiBMMjIsOC40NDk2IEMyMiw5LjMwNTg2MjI4IDIxLjMwNTg2MjMsMTAgMjAuNDQ5NiwxMCBMMS41NTA0LDEwIEwxLjU1MDQsMTAgQzAuNjk0MTM3NzI0LDEwIC0xLjE3MTgyNzczZS0xNiw5LjMwNTg2MjI4IC0yLjIyMDQ0NjA1ZS0xNiw4LjQ0OTYgTDIuMjIwNDQ2MDVlLTE2LDIuNjUzNDY1NDYgTC0yLjkzODgzNzI3ZS0wNiwyLjY1MzQ2NTQ2IEMtMi45Mzg4MzcyN2UtMDYsMS43OTcyMDE1NiAwLjY5NDEzNjEwMSwxLjEwMzA2MjUyIDEuNTUwNCwxLjEwMzA2MjUyIEMxLjgyOTk5MjIyLDEuMTAzMDYyNTIgMi4xMDQzODEzMSwxLjE3ODY2ODU5IDIuMzQ0NTEzODksMS4zMjE4NzUyOCBaIiBpZD0icGF0aC0xOSI+PC9wYXRoPiAgICA8L2RlZnM+ICAgIDxnIGlkPSJyMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iYWZ0ZXItaHJzLXplcm8tc3RhdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NC4wMDAwMDAsIC0yNDAuMDAwMDAwKSI+ICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTQ0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDUuMDAwMDAwLCAyNjAuMDAwMDAwKSI+ICAgICAgICAgICAgICAgIDxnIGlkPSJSZWN0YW5nbGUtNi1Db3B5LSstR3JvdXAtMTctKy1TdHJva2UtMy1Db3B5LSstU3Ryb2tlLTUtQ29weS1NYXNrLUNvcHktQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTUuMDAwMDAwLCAwLjAwMDAwMCkiPiAgICAgICAgICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stMiIgZmlsbD0id2hpdGUiPiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+ICAgICAgICAgICAgICAgICAgICA8L21hc2s+ICAgICAgICAgICAgICAgICAgICA8dXNlIGlkPSJNYXNrIiBmaWxsPSIjRTlFRkY0IiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDb21iaW5lZC1TaGFwZS1Db3B5LTIiIG1hc2s9InVybCgjbWFzay0yKSI+ICAgICAgICAgICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2LjUwMDAwMCwgMTQwLjAwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMTM2LjUwMDAwMCwgLTE0MC4wMDAwMDApIHRyYW5zbGF0ZSg2MC4wMDAwMDAsIDEwOC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stNCIgZmlsbD0id2hpdGUiPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0zIj48L3VzZT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXNrPiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTWFzayIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIj48L2c+ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDb21iaW5lZC1TaGFwZS1Db3B5IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIG1hc2s9InVybCgjbWFzay00KSI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItNikiIHhsaW5rOmhyZWY9IiNwYXRoLTUiPjwvdXNlPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTUiPjwvdXNlPiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+ICAgICAgICAgICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgICAgICA8L2c+ICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDEuOTk4MDE3LDY4LjAwMDYzMjcgQzkyLjc5MDQ2MjcsNjguMzkxNDE3NyA4NS40NzQzMzE2LDc2Ljc5ODIyMDIgODcuMjczODEwOSw4Ni40MTY3ODQ1IEM4OC40MDk5Nzg1LDkyLjQ4MjE2MTIgOTMuMjQ2OSw5Ny4zOTgxNzA0IDk5LjI4NTY2MzYsOTguNjYyNDc0NyBDMTA5LjAyNTE4MSwxMDAuNzAxNzgxIDExNy42MDIyNjEsOTMuMjE0NDcyNSAxMTcuOTk5NTkxLDgzLjkwNDU5NTUgQzExOC4wMTI3MjYsODMuNTQwMDgxOCAxMTcuNzA3MzQsODMuMjM0Njc4NCAxMTcuMzM5NTY0LDgzLjIzNzk2MjMgTDEwMi42NTQ3NjIsODMuMzY2MDM0NyBMMTAyLjY2Nzg5Nyw2OC42NTQxMzAzIEMxMDIuNjY3ODk3LDY4LjI4OTYxNjYgMTAyLjM1OTIyNyw2Ny45ODQyMTMyIDEwMS45OTgwMTcsNjguMDAwNjMyNyBaIiBpZD0iU3Ryb2tlLTMxLUNvcHkiIGZpbGw9IiNGRkUxRkQiPjwvcGF0aD4gICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwNyw2MS42MDcyOTk4IEwxMDcsNzYgTDEyMS4zOTIxNzgsNzYgQzEyMS43MzI3MDcsNzYgMTIyLjAxNTQxLDc1LjcxMTI0NzcgMTIxLjk5OTM0OCw3NS4zNzExNjE2IEMxMjEuNjIwMjY4LDY3LjYxMzM0ODYgMTE1LjM5NzU3OSw2MS4zOTIzMzk3IDEwNy42Mjk2NTgsNjEuMDAwOTE5OSBDMTA3LjI5MjM0MSw2MC45ODE2Njk3IDEwNyw2MS4yNjcyMTM3IDEwNyw2MS42MDcyOTk4IFoiIGlkPSJTdHJva2UtMzMtQ29weSIgZmlsbD0iI0ZGRTFGRCI+PC9wYXRoPiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTcuOTg4MzU0Myw2Ni4wMDk4NjY4IEM4OC43Nzg2MDQ4LDY2LjAwOTg2NjggODEuNDc1NTc0NSw3NC44MDQ4MzM3IDgzLjI3Mzg2NjEsODQuNDIwNTMyOCBDODQuNDA5MjgzOCw5MC40ODQxMDI3IDg5LjI0MzAxMjgsOTUuMzk4NjQ3NSA5NS4yNzc3OTA3LDk2LjY2MjU3NTIgQzEwNS4wMTA4OCw5OC43MDEyNzQxIDExMy41ODIyOTksOTEuMjE2MTk1OSAxMTMuOTc5MzY3LDgxLjkwOTA5MjEgQzExMy45OTI0OTMsODEuNTQ0Njg3IDExNCw4MS4zNzA2OTE3IDExNCw4MS4zNzA2OTE3IEw5OC42NDQ2NjUxLDgxLjM3MDY5MTcgTDk4LjY1NTk5OTksNjYgTDk3Ljk4ODM1NDMsNjYuMDA5ODY2OCBaIiBpZD0iU3Ryb2tlLTMxLUNvcHktMiIgc3Ryb2tlPSIjNTJBQUZGIiBzdHJva2Utd2lkdGg9IjEuNzE2IiBzdHJva2UtZGFzaGFycmF5PSIyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSI+PC9wYXRoPiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTAzLDU3LjAwODU1MTMgTDEwMy4xMTMxODMsNzIgQzEwMy4xMTMxODMsNzIgMTE3LjY1NTEwNCw3MiAxMTcuOTkyOTE4LDcyIEMxMTcuOTkyOTE4LDcyIDExOC4wMDg4NTMsNzEuNzExMzk0NiAxMTcuOTkyOTE4LDcxLjM3MTQ4MTUgQzExNy42MTY4NjEsNjMuNjE3NjE1NiAxMTEuNDQzNzk1LDU3LjM5OTc3MiAxMDMuNzM3ODIsNTcuMDA4NTUxMyBDMTAzLjQwMzE5Myw1Ni45ODkzMTA5IDEwMyw1Ny4wMDg1NTEzIDEwMyw1Ny4wMDg1NTEzIFoiIGlkPSJTdHJva2UtMzMtQ29weS0yIiBzdHJva2U9IiM1MkFBRkYiIHN0cm9rZS13aWR0aD0iMS43MTYiIHN0cm9rZS1kYXNoYXJyYXk9IjIuNjQwMDAwMTA0OTA0MTc1LDIuNjQwMDAwMTA0OTA0MTc1LDIuNjQwMDAwMTA0OTA0MTc1Ij48L3BhdGg+ICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iU3Ryb2tlLTciIGZpbGw9IiNDREZGRDUiIHBvaW50cz0iMTc5IDEyMSAxNzkgODEgMTkwIDgxIDE5MCAxMjEiPjwvcG9seWxpbmU+ICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iU3Ryb2tlLTEiIGZpbGw9IiNDREZGRDUiIHBvaW50cz0iMTU2IDEyMiAxNTYgNTcgMTY3IDU3IDE2NyAxMjIiPjwvcG9seWxpbmU+ICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iU3Ryb2tlLTMiIGZpbGw9IiNDREZGRDUiIHBvaW50cz0iMTM0IDEyNCAxMzQgNzMgMTQ1IDczIDE0NSAxMjQiPjwvcG9seWxpbmU+ICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iU3Ryb2tlLTUiIGZpbGw9IiNDREZGRDUiIHBvaW50cz0iMTEwIDEyMyAxMTAgMTA1IDEyMSAxMDUgMTIxIDEyMyI+PC9wb2x5bGluZT4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJTdHJva2UtNyIgc3Ryb2tlPSIjNTJBQUZGIiBzdHJva2Utd2lkdGg9IjEuNzE2IiBzdHJva2UtZGFzaGFycmF5PSIyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSIgcG9pbnRzPSIxNzYgMTI1IDE3NiA4NSAxODcgODUgMTg3IDEyNSI+PC9wb2x5bGluZT4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJTdHJva2UtMSIgc3Ryb2tlPSIjNTJBQUZGIiBzdHJva2Utd2lkdGg9IjEuNzE2IiBzdHJva2UtZGFzaGFycmF5PSIyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSIgcG9pbnRzPSIxNTQgMTI0IDE1NCA1OSAxNjUgNTkgMTY1IDEyNCI+PC9wb2x5bGluZT4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJTdHJva2UtMyIgc3Ryb2tlPSIjNTJBQUZGIiBzdHJva2Utd2lkdGg9IjEuNzE2IiBzdHJva2UtZGFzaGFycmF5PSIyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSIgcG9pbnRzPSIxMzIgMTI2IDEzMiA3NSAxNDMgNzUgMTQzIDEyNiI+PC9wb2x5bGluZT4gICAgICAgICAgICAgICAgPGcgaWQ9IkNvbWJpbmVkLVNoYXBlIj4gICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci04KSIgeGxpbms6aHJlZj0iI3BhdGgtNyI+PC91c2U+ICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtNyI+PC91c2U+ICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJTdHJva2UtNSIgc3Ryb2tlPSIjNTJBQUZGIiBzdHJva2Utd2lkdGg9IjEuNzE2IiBzdHJva2UtZGFzaGFycmF5PSIyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSwyLjY0MDAwMDEwNDkwNDE3NSIgcG9pbnRzPSIxMDggMTI1IDEwOCAxMDcgMTE5IDEwNyAxMTkgMTI1Ij48L3BvbHlsaW5lPiAgICAgICAgICAgICAgICA8ZyBpZD0iU3Ryb2tlLTMiPiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTEwKSIgeGxpbms6aHJlZj0iI3BhdGgtOSI+PC91c2U+ICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtOSI+PC91c2U+ICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPHBhdGggZD0iTTc4LDEyOCBMNzgsNDYuMzcxNjcxNCBDNzgsNDUuMDYxNTY3NSA3OS4wNjUwMTA5LDQ0IDgwLjM2MzMyMjQsNDQgTDE5Ni42MzY2NzgsNDQgQzE5Ny45NDE1OCw0NCAxOTksNDUuMDU4OTIzNSAxOTksNDYuMzcxNjcxNCBMMTk5LDEyOCIgaWQ9IlN0cm9rZS01IiBmaWxsPSIjRUFGMUY0Ij48L3BhdGg+ICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03OCwxMjggTDc4LDQ2LjM3MTY3MTQgQzc4LDQ1LjA2MTU2NzUgNzkuMDY1MDEwOSw0NCA4MC4zNjMzMjI0LDQ0IEwxOTYuNjM2Njc4LDQ0IEMxOTcuOTQxNTgsNDQgMTk5LDQ1LjA1ODkyMzUgMTk5LDQ2LjM3MTY3MTQgTDE5OSwxMjgiIGlkPSJTdHJva2UtNS1Db3B5LTIiIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQtMTEpIiBvcGFjaXR5PSIwLjI1Nzk4MjMzNyI+PC9wYXRoPiAgICAgICAgICAgICAgICA8ZyBpZD0iQ29tYmluZWQtU2hhcGUtQ29weS0zIj4gICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xMykiIHhsaW5rOmhyZWY9IiNwYXRoLTEyIj48L3VzZT4gICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xMiI+PC91c2U+ICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPHRleHQgaWQ9IloiIGZvbnQtZmFtaWx5PSJOZXV0cmFsU3RkLUJvbGQsIE5ldXRyYWwgU3RkIiBmb250LXNpemU9IjEzIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzgwQkFGRiI+ICAgICAgICAgICAgICAgICAgICA8dHNwYW4geD0iMTY3IiB5PSI2NyI+WjwvdHNwYW4+ICAgICAgICAgICAgICAgIDwvdGV4dD4gICAgICAgICAgICAgICAgPHRleHQgaWQ9IlotQ29weSIgZm9udC1mYW1pbHk9Ik5ldXRyYWxTdGQtTWVkaXVtLCBOZXV0cmFsIFN0ZCIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjQwMCIgZmlsbD0iIzgwQkFGRiI+ICAgICAgICAgICAgICAgICAgICA8dHNwYW4geD0iMTc5IiB5PSI2MSI+WjwvdHNwYW4+ICAgICAgICAgICAgICAgIDwvdGV4dD4gICAgICAgICAgICAgICAgPGcgaWQ9IlN0cm9rZS0xIj4gICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xNSkiIHhsaW5rOmhyZWY9IiNwYXRoLTE0Ij48L3VzZT4gICAgICAgICAgICAgICAgICAgIDx1c2UgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiB4bGluazpocmVmPSIjcGF0aC0xNCI+PC91c2U+ICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTEyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDYuMDAwMDAwLCA1Ny4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC03Ij4gICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iT3ZhbC0xMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC41NDIwMzUsIDAuMTkxMTA5KSI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTE3IiBmaWxsPSJ3aGl0ZSI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTE2Ij48L3VzZT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXNrPiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTWFzayI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMTgpIiB4bGluazpocmVmPSIjcGF0aC0xNiI+PC91c2U+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMTYiPjwvdXNlPiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxlbGxpcHNlIGZpbGw9IiM3M0JBRkYiIG1hc2s9InVybCgjbWFzay0xNykiIGN4PSI1MS4xMDkwMTM3IiBjeT0iLTAuMzE1NjE5MjA5IiByeD0iMzEuOTU1Nzc0MyIgcnk9IjI0LjkzMzkxNzUiPjwvZWxsaXBzZT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGVsbGlwc2UgaWQ9Ik92YWwtMTEtQ29weSIgZmlsbD0iIzczQkFGRiIgbWFzaz0idXJsKCNtYXNrLTE3KSIgY3g9Ii05LjU4NjczMjI5IiBjeT0iNC4xMDMwNDk3MiIgcng9IjMxLjk1NTc3NDMiIHJ5PSIyNC45MzM5MTc1Ij48L2VsbGlwc2U+ICAgICAgICAgICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ik92YWwtNS1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOS4wMDAwMDAsIDMzLjAwMDAwMCkiPiAgICAgICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIwIiBmaWxsPSJ3aGl0ZSI+ICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMTkiPjwvdXNlPiAgICAgICAgICAgICAgICAgICAgICAgIDwvbWFzaz4gICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iTWFzayI+PC9nPiAgICAgICAgICAgICAgICAgICAgICAgIDxlbGxpcHNlIGlkPSJPdmFsLTUiIGZpbGw9IiM3M0JBRkYiIG1hc2s9InVybCgjbWFzay0yMCkiIGN4PSI5Ljg0MjEwNTI2IiBjeT0iLTAuNTU1NTU1NTU2IiByeD0iNy41MjYzMTU3OSIgcnk9IjcuMjIyMjIyMjIiPjwvZWxsaXBzZT4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg=="),re=G(0,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiICB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgIDxwYXRoIGZpbGw9IiM5MzlmYTgiIGQ9Ik0xMywxNEgxMVYxMEgxM00xMywxOEgxMVYxNkgxM00xLDIxSDIzTDEyLDJMMSwyMVoiIC8+Cjwvc3ZnPg=="),ie={default:{backgroundSize:"50px",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundImage:'url("'.concat(X,'")'),height:50,width:50}},oe=Object(S.d)({aria_label_default_kustomer_icon:{id:"kustomer.chat.icon.default.aria.label",defaultMessage:"Default Kustomer icon"}}),se=function(e){var t=e.intl;return r()("div",{role:"img","aria-label":t.formatMessage(oe.aria_label_default_kustomer_icon),style:ie.default})};se.defaultProps={};var ue=Object(S.e)(se),ce={default:{backgroundSize:"50px",backgroundPosition:"center center",backgroundRepeat:"no-repeat",height:50,width:50}},le=Object(S.d)({aria_label_default_colored_icon:{id:"kustomer.chat.icon.default.colored.aria.label",defaultMessage:"Default Kustomer icon with color"}}),de=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.intl,a=Object.assign({},ce.default,{backgroundImage:"url('".concat(K(t),"')")});return r()("div",{className:P,role:"img","aria-label":n.formatMessage(le.aria_label_default_colored_icon),style:a})}}]),t}(i.PureComponent);de.defaultProps={color:"#0A3355"};var pe=Object(S.e)(de),ge=Object(S.d)({aria_label_custom_icon:{id:"kustomer.chat.icon.custom.aria.label",defaultMessage:"Custom icon from {iconUrl}"}}),fe={custom:{backgroundSize:"50px",backgroundPosition:"center center",backgroundRepeat:"no-repeat",height:50,width:50,borderRadius:25}},he=function(e){var t=e.iconUrl,n=e.intl;return fe.custom.backgroundImage='url("'.concat(t,'")'),r()("div",{className:P,style:fe.custom,role:"img","aria-label":n.formatMessage(ge.aria_label_custom_icon,{iconUrl:t})})};he.defaultProps={iconUrl:""};var me=Object(S.e)(he),Ie={unread:{position:"absolute",left:"34px",top:"-10px",background:"#336DEC",height:"24px",width:"24px",lineHeight:"13px",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",fontSize:11,fontWeight:500,border:"3px solid ".concat("#F8FAFD"),borderRadius:"50%"}},be=Object(S.d)({aria_label_unread_message_count:{id:"kustomer.chat.icon.unread.badge.message.count",defaultMessage:"{unreadMessageCount} unread messages"}}),ve=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"renderUnread",value:function(){var e=this.props,t=e.unreadMessageCount,n=e.activeSessionUnreadMessageCount;return e.showHistory?t:n}},{key:"render",value:function(){var e=this.props,t=e.unreadMessageCount,n=e.showHistory,a=e.activeSessionUnreadMessageCount,i=e.intl;return t&&(n||a)?r()("div",{className:"minimizedUnreadIcon ".concat(E),style:Ie.unread,"aria-live":"assertive","aria-label":i.formatMessage(be.aria_label_unread_message_count,{unreadMessageCount:t})},void 0,this.renderUnread()):null}}]),t}(i.PureComponent);ve.defaultProps={unreadMessageCount:0,activeSessionUnreadMessageCount:0,showHistory:!1};var ye=Object(S.e)(ve),Ce=Object(s.b)((function(e){return{unreadMessageCount:Object(Z.J)(e),activeSessionUnreadMessageCount:Object(Z.K)(e),showHistory:Object(Z.o)(e)}}))(ye),Ae={container:{pointerEvents:"all",position:"absolute",bottom:"60px",width:"300px",right:"10px"}},Me=n("1M3H"),we=n.n(Me),ke=n("OjRq"),xe=n("ck4X"),De=Object(S.d)({aria_label_default_avatar:{id:"kustomer.chat.avatar.aria.label.default.avatar",defaultMessage:"Default avatar"},aria_label_user_avatar:{id:"kustomer.chat.avatar.aria.label.user.avatar",defaultMessage:"User avatar"},aria_label_avatar:{id:"kustomer.chat.avatar.aria.label.avatar",defaultMessage:"Avatar"}}),Ne={unread:{position:"absolute",left:"26px",top:"-8px",background:"#336DEC",height:"24px",width:"24px",lineHeight:"13px",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",fontSize:11,fontWeight:500,border:"3px solid ".concat("#F8FAFD"),borderRadius:"50%"}},je=Object(S.d)({aria_label_unread_messages:{id:"kustomer.chat.conversation.header.unread.aria.label",defaultMessage:"{unreadMessageCount} unread messages"}}),Te=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.unreadMessageCount,n=e.intl;return 0===t?null:r()("div",{"aria-live":"polite","aria-label":n.formatMessage(je.aria_label_unread_messages,{unreadMessageCount:t}),className:"conversationUnreadIcon",style:Ne.unread},void 0,t)}}]),t}(i.PureComponent);Te.defaultProps={unreadMessageCount:0};var Se=Object(S.e)(Object(T.a)(Te),{withRef:!0}),Oe=Object(s.b)((function(e){return{unreadMessageCount:Object(Z.L)(e)}}))(Se),Pe={wrapper:{margin:"auto"},avatar:{backgroundRepeat:"no-repeat",margin:"auto",position:"absolute",top:-1,left:-1},avatarWrapper:{margin:"auto",position:"relative"},reactAvatar:{position:"absolute",display:"block",overflow:"hidden"}},Ee=function(e){return Object.assign({},Pe.avatarWrapper,{height:e,width:e})},Le=function(e,t){var n=t+2,a={backgroundImage:e?'url("'.concat(e,'")'):null,height:n,width:n,backgroundSize:n,borderRadius:Math.ceil(n/2)};return Object.assign({},Pe.avatar,a)},_e=r()(Oe,{}),ze=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"renderUnread",value:function(){return this.props.showUnread?_e:null}},{key:"renderDefaultOnly",value:function(){var e=this.props,t=e.avatarColor,n=e.defaultName,a=e.size,i=e.intl,o=Ee(a);return r()("div",{style:o,className:"kustomer-app-avatar",role:"img","aria-label":i.formatMessage(De.aria_label_default_avatar)},void 0,r()(xe.a,{name:n,style:Pe.reactAvatar,color:t,size:a,round:!0}),this.renderUnread())}},{key:"renderAvatarImage",value:function(){var e=this.props,t=e.avatarUrl,n=e.size,a=e.intl,i=Le(t,n),o=Ee(n);return r()("div",{style:o},void 0,r()("div",{style:i,className:"kustomer-app-avatar",role:"img","aria-label":a.formatMessage(De.aria_label_user_avatar)}),this.renderUnread())}},{key:"renderAvatarImageWithDefaultBehind",value:function(){var e=this.props,t=e.avatarUrl,n=e.avatarColor,a=e.defaultName,i=e.size,o=e.intl,s=Le(t,i),u=Ee(i);return r()("div",{style:u},void 0,r()(xe.a,{name:a,style:Pe.reactAvatar,color:n,size:i,round:!0}),r()("div",{style:s,className:"kustomer-app-avatar",role:"img","aria-label":o.formatMessage(De.aria_label_avatar)}),this.renderUnread())}},{key:"render",value:function(){var e=this.props,t=e.avatarUrl,n=e.includeDefault;return!t&&n?this.renderDefaultOnly():t&&n?this.renderAvatarImageWithDefaultBehind():this.renderAvatarImage()}}]),t}(i.PureComponent);ze.defaultProps={avatarUrl:null,avatarColor:null,defaultName:"",size:30,includeDefault:!0,showUnread:!1};var Re=Object(S.e)(ze),Ze=n("3wRA"),Ue={container:{display:"flex",position:"relative"},message:{flex:"1",backgroundColor:"#fff",marginBottom:"10px",filter:"drop-shadow(rgba(0, 0, 0, 0.1) 1px 1px 3px)",fontSize:"14px",fontWeight:"400",padding:"9px 10px",borderRadius:"9px 9px 9px 0px",lineHeight:"16px",wordWrap:"break-word",cursor:"pointer",WebkitTransition:"all .2s ease-in-out",transition:"all ".concat("150ms"," ").concat("ease-in-out"),":hover":{WebkitTransform:"translateY(-5px) scale(1.05)",transform:"translateY(-5px) scale(1.05)",WebkitFilter:"drop-shadow(1px 1px 6px rgba(0,0,0,.33))",filter:"drop-shadow(1px 1px 6px rgba(0,0,0,.33))"}},body:{wordWrap:"break-word"},close:{backgroundImage:'url("'.concat(H,'")'),backgroundColor:"#3d3f41",backgroundRepeat:"no-repeat",backgroundSize:"8px 8px",borderRadius:12,height:24,width:24,backgroundPosition:"50%",position:"absolute",right:"-10px",top:"-12px"},avatar:{height:"30px",width:"30px",borderRadius:"15px",marginTop:"2px",marginRight:"10px",boxShadow:"0 0 22px 0 rgba(105,105,105,0.16)"}},Ge=Object(S.d)({aria_label_close_button:{id:"kustomer.chat.icon.messages.message.aria.label.close.button",defaultMessage:"Close"}}),We=new we.a({breaks:!0}),Be=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"handleKeyPress",(function(e){var t=n.props,a=t.onClick,r=t.sessionId;D(e)&&(e.preventDefault(),e.stopPropagation(),a(r))})),A()(b()(n),"handleDismissKeyPress",(function(e){var t=n.props,a=t.onDismiss,r=t.sessionId;D(e)&&(e.preventDefault(),e.stopPropagation(),a(r))})),A()(b()(n),"handleClick",(function(e){var t=n.props,a=t.onClick,r=t.sessionId;e.preventDefault(),e.stopPropagation(),a(r)})),A()(b()(n),"handleDismiss",(function(e){var t=n.props,a=t.onDismiss,r=t.sessionId;e.preventDefault(),e.stopPropagation(),a(r)})),n}return y()(t,e),p()(t,[{key:"renderCloseIcon",value:function(){var e=this.props.intl;return r()("div",{tabIndex:"0",onKeyPress:this.handleDismissKeyPress,role:"button","aria-label":e.formatMessage(Ge.aria_label_close_button),className:"iconMessageClose",style:Ue.close,onClick:this.handleDismiss})}},{key:"renderBody",value:function(){var e=this.props.message.body.replace(/(?:\r\n|\r|\n)/g," ");return e&&e.length>140&&(e="".concat(e.substring(0,140),"...")),r()("div",{style:Ue.body,id:"kustomerIconMessageBody",dangerouslySetInnerHTML:{__html:We.renderInline(e)}})}},{key:"render",value:function(){var e=this.props.user;return r()("div",{style:Ue.container},void 0,r()("div",{className:"iconMessageAvatar",style:Ue.avatar},void 0,r()(Re,{avatarUrl:e.avatarUrl,defaultName:e.name})),r()("div",{tabIndex:"0",style:Ue.message,onClick:this.handleClick,onKeyPress:this.handleKeyPress,role:"button","aria-labelledby":"kustomerIconMessageBody"},void 0,this.renderCloseIcon(),this.renderBody()))}}]),t}(o.a.PureComponent);Be.defaultProps={message:Object(ke.e)(),sessionId:null,user:Object(ke.j)(),onClick:function(){},onDismiss:function(){}};var Fe=Object(S.e)(Be),He=Object(s.b)((function(){var e=Object(Z.T)();return function(t,n){return{user:e(t,n)}}}),(function(e){return{onClick:function(t){e(Object(R.j)(t))},onDismiss:function(t){t&&e(Object(Ze.Y)(t))}}}))(Fe),Ye=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.unreadSessionMessages;return!e||e.size<1?null:r()("div",{className:"iconMessage",style:Ae.container},void 0,e.map((function(e){return r()(He,{sessionId:e.sessionId,message:e.message},e.sessionId)})))}}]),t}(o.a.PureComponent);Ye.defaultProps={unreadSessionMessages:void 0};var Qe=Object(s.b)((function(e){return{unreadSessionMessages:Z.j(e)}}))(Ye),Ve=r()(ue,{}),Je=r()(Qe,{}),Xe=r()(Ce,{}),Ke=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"handleKeyPress",(function(e){var t=n.props.handleClick;D(e)&&(e.preventDefault(),e.stopPropagation(),t())})),n}return y()(t,e),p()(t,[{key:"renderIconCustomOrDefault",value:function(){var e=this.props,t=e.iconUrl,n=e.iconColor;return t?r()(me,{iconUrl:t}):n?r()(pe,{color:n}):Ve}},{key:"render",value:function(){var e=this.props,t=e.handleClick,n=e.intl;return r()("div",{},void 0,r()("div",{tabIndex:"0",className:O,style:z.icon,onKeyPress:this.handleKeyPress,role:"button","aria-label":n.formatMessage(U.aria_label_expand_chat_widget),onClick:t},void 0,Je,this.renderIconCustomOrDefault(),Xe))}}]),t}(i.PureComponent);Ke.defaultProps={handleClick:function(){},iconUrl:"",iconColor:null};var qe=Object(S.e)(Object(T.a)(Ke),{withRef:!0}),$e=Object(s.b)((function(e){return{iconUrl:Z.q(e),iconColor:Z.p(e)}}),(function(e){return{handleClick:function(){e(Object(R.l)())}}}))(qe),et=n("0wEy"),tt=n("QkVN"),nt=n.n(tt),at=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,n=e.tween,a=e.children,i=this.props,s=i.styles,u=i.start,c=i.end;return"function"==typeof s&&(s=s(this.props)),"function"==typeof u&&(u=u(this.props)),"function"==typeof c&&(c=c(this.props)),r()(et.Motion,{defaultStyle:u,style:c},void 0,(function(e){return o.a.cloneElement(o.a.Children.only(a),{styles:t.getMergedStyles(s,n,e)})}))}}],[{key:"getMergedStyles",value:function(e,t,n){return nt()({},e,t(n))}}]),t}(i.Component);at.defaultProps={tween:function(){return{}},styles:{},start:function(){return{}},end:function(){return{}},children:r()("div",{})};var rt=at,it=function(e){return function(e,t){return function(n){var a=function(a){function r(){return l()(this,r),f()(this,m()(r).apply(this,arguments))}return y()(r,a),p()(r,[{key:"render",value:function(){var t=Object.assign({},this.props,r.handleConfig());return o.a.createElement(e,t,o.a.createElement(n,this.props))}}],[{key:"handleConfig",value:function(){var e=document.querySelector("body");return e&&"rtl"===e.dir?{styles:t.stylesRTL||t.styles,start:t.startRTL||t.start,end:t.endRTL||t.end,tween:t.tweenRTL||t.tween}:t}}]),r}(i.Component);return a.displayName="KAnimate(".concat(function(e){return e.displayName||e.name||"Component"}(n),")"),a.WrappedComponent=n,a}}(rt,e)},ot=function(e){return Object(et.spring)(e)},st=function(e){return Object(et.spring)(e,et.presets.stiff)},ut=n("BkRI"),ct=n.n(ut),lt={wrapper:{position:"fixed",bottom:"25px",right:"25px",width:"375px",minHeight:"400px",maxHeight:"600px",height:"calc(100% - 110px)",pointerEvents:"all","@media (max-width: 600px)":{top:0,bottom:0,right:0,left:0,height:"100%",width:"100%",minHeight:"initial",minWidth:"initial",maxHeight:"100%",maxWidth:"100%"}},border:{display:"flex",flexDirection:"column",height:"".concat(100,"%"),width:"100%",position:"relative",borderRadius:"10px",backgroundColor:"#FFFFFF",border:"solid 1px ".concat("#dadada"),boxShadow:"0px 2px 10px 0px ".concat("rgba(151, 151, 151, 0.17)",", 0 2px 32px 0 ").concat("rgba(153, 153, 153, 0.15)"),transform:"translate(150px, 1000px)",overflow:"hidden","@media (max-width: 600px)":{borderRadius:"0",boxShadow:"none",border:"none"}}},dt=ct()(lt);dt.wrapper.right="auto",dt.wrapper.left="25px";var pt=dt,gt=n("Nlzp"),ft={wrapper:{flex:"0 0 auto",width:"100%",fontWeight:"300",fontSize:"12px",display:"flex",position:"relative",backgroundColor:"".concat("#FFF"),borderBottom:"1px solid ".concat("#E9EFF4"),borderRadius:"9px 9px 0 0"},close:{wrapper:{position:"absolute",top:"18px",right:"10px",padding:"5px",borderRadius:"50%",cursor:"pointer"},icon:{backgroundImage:'url("'.concat(F,'")'),backgroundRepeat:"no-repeat",backgroundSize:"16px",height:"16px",width:"16px"}}},ht=n("pVnL"),mt=n.n(ht),It=n("JPcv"),bt=n.n(It),vt=(n("yb06"),{wrapper:{display:"flex",alignItems:"center",alignContent:"center",justifyContent:"center",padding:"0 40px",width:"100%",height:"100%",flex:"1 1 auto"},wrapperExpanded:{flexDirection:"column"},noHistory:{padding:"0 40px 0 15px"},title:{fontSize:12,fontWeight:500,textTransform:"uppercase",letterSpacing:"0.2px",overflow:"hidden",textOverflow:"ellipsis"},description:{margin:"12px 0 0",maxWidth:"327px",fontSize:12,display:"-webkit-box",maxHeight:"30px",lineHeight:"15px",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},infoWrap:{display:"flex",flexDirection:"column",flex:"1 1 0",margin:"0 8px",minWidth:"80px"},avatar:{position:"relative",flexShrink:0},infoWrapExpanded:{display:"flex",flexDirection:"column",minWidth:"80px",width:"100%",alignItems:"center",marginTop:"6px",marginBottom:"5px",textAlign:"center"},descriptionExpanded:{marginTop:"24px",maxWidth:"327px",textAlign:"center"},waitMessage:{fontSize:13,marginTop:"4px"}}),yt=Object(S.d)({queue_waitTime_days:{id:"kustomer.chat.conversation.headerInfo.waitTime.days",defaultMessage:"Your expected wait time is {waitTime} days"},queue_waitTime__more_than_days:{id:"kustomer.chat.conversation.headerInfo.waitTime.more_than_days",defaultMessage:"Your expected wait time is greater than one day"},queue_waitTime_hours:{id:"kustomer.chat.conversation.headerInfo.waitTime.hours",defaultMessage:"Your expected wait time is {waitTime} hours"},queue_waitTime_minutes:{id:"kustomer.chat.conversation.headerInfo.waitTime.minutes",defaultMessage:"Your expected wait time is {waitTime} minutes"},queue_waitTime_seconds:{id:"kustomer.chat.conversation.headerInfo.waitTime.seconds",defaultMessage:"Your expected wait time is {waitTime} seconds"},queue_waitTime_momentarily:{id:"kustomer.chat.conversation.headerInfo.waitTime.momentarily",defaultMessage:"Someone should be with you momentarily"}}),Ct=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"renderAvatar",value:function(){var e=this.props,t=e.sessionUsers,n=e.showMenu,a=e.company,i=e.styles,o=e.showOrgAvatar,s=t.last(),u=a.name,c=a.avatarUrl;return s&&!o&&(u=s.name,c=s.avatarUrl),r()("div",{style:i.avatar},void 0,r()(Re,{avatarUrl:c,defaultName:u,size:42,showUnread:n}))}},{key:"renderGreeting",value:function(){var e=this.props,t=e.styles,n=e.isAfterHours,a=e.company,i=e.expanded;if(!i&&!n&&x()(a,"volumeControl.enabled"))return null;if(n){var o=a.get("offhoursMessage");return r()("div",{title:o,role:"heading","aria-level":"4",style:i?vt.descriptionExpanded:t.description,className:"kustomer-app-header-after-hours-greeting"},void 0,o)}var s=a.get("greeting");return r()("div",{role:"heading","aria-level":"4",title:s,style:t.description,className:"kustomer-app-header-greeting"},void 0,s)}},{key:"renderQueueTime",value:function(){var e=this.props.queueTime;if(null===e)return null;return 0===e?r()("span",{role:"heading","aria-level":"2",style:vt.waitMessage,className:"kustomer-app-header-wait-message"},void 0,o.a.createElement(S.a,yt.queue_waitTime_momentarily)):e>86400?r()("span",{role:"heading","aria-level":"2",style:vt.waitMessage,className:"kustomer-app-header-wait-message"},void 0,o.a.createElement(S.a,yt.queue_waitTime__more_than_days)):e>3600?r()("span",{role:"heading","aria-level":"2",style:vt.waitMessage,className:"kustomer-app-header-wait-message"},void 0,o.a.createElement(S.a,mt()({},yt.queue_waitTime_hours,{values:{waitTime:Math.ceil(e/3600)}}))):e>60?r()("span",{role:"heading","aria-level":"2",style:vt.waitMessage,className:"kustomer-app-header-wait-message"},void 0,o.a.createElement(S.a,mt()({},yt.queue_waitTime_minutes,{values:{waitTime:Math.ceil(e/60)}}))):r()("span",{role:"heading","aria-level":"2",style:vt.waitMessage,className:"kustomer-app-header-wait-message"},void 0,o.a.createElement(S.a,mt()({},yt.queue_waitTime_seconds,{values:{waitTime:Math.ceil(e)}})))}},{key:"renderWaitMessage",value:function(){var e=this.props,t=e.company,n=e.company.waitMessage,a=e.expanded;return null!==e.queueTime?null:!a&&!x()(t,"volumeControl.enabled")?null:r()("span",{role:"heading","aria-level":"3",style:vt.waitMessage,className:"kustomer-app-header-wait-message"},void 0,n)}},{key:"renderWaitMessageOrQueueTime",value:function(){var e=this.props,t=e.company,n=e.isAfterHours,a=e.hasAgent;return n||a?null:x()(t,"volumeControl.useDynamicWaitMessage")?this.renderQueueTime():this.renderWaitMessage()}},{key:"render",value:function(){var e=this.props,t=e.styles,n=e.sessionUsers,a=e.company,i=e.showMenu,o=e.expanded,s=function(e,t,n){return t?n||!e||0===e.size?t.name:e.last().name:null}(n,a,e.showOrgAvatar),u=Object.assign({},t.wrapper,i||o?{}:t.noHistory,o?t.wrapperExpanded:{});return r()("div",{style:u},void 0,this.renderAvatar(),r()("div",{style:o?vt.infoWrapExpanded:t.infoWrap},void 0,r()("div",{role:"heading","aria-level":"1",style:t.title,className:"kustomer-app-header-title"},void 0,s),this.renderWaitMessageOrQueueTime(),this.renderGreeting()))}}]),t}(i.PureComponent);Ct.defaultProps={sessionUsers:bt.a.List(),company:Object(ke.b)(),showOrgAvatar:!1,showMenu:!0,styles:{},queueTime:null,hasAgent:!1};var At=it({styles:vt,start:function(e){return e.expanded?{titleFontSize:11,titleMarginTop:11,descriptionFontSize:12,descriptionMarginTop:12,avatarWidth:42,avatarTop:5}:{avatarTop:0,descriptionMarginTop:12}},end:function(e){return e.expanded?{titleFontSize:11,titleMarginTop:11,descriptionFontSize:12,descriptionMarginTop:12,avatarWidth:300}:{titleFontSize:12,titleMarginTop:0,descriptionFontSize:11,descriptionMarginTop:4,avatarWidth:42,avatarTop:0,infoWrapMarginLeft:12}},tween:function(e){return{wrapper:{},title:{fontSize:"".concat(e.titleFontSize,"px"),marginTop:"".concat(e.titleMarginTop,"px")},description:{fontSize:"".concat(e.descriptionFontSize,"px"),marginTop:"".concat(e.descriptionMarginTop,"px")},avatar:{width:"".concat(e.avatarWidth,"px"),top:"".concat(e.avatarTop,"px")}}}})(Ct),Mt=Object(s.b)((function(e){return{showMenu:Object(Z.P)(e)&&Object(Z.o)(e),isAfterHours:Object(Z.jb)(e),sessionUsers:Object(Z.i)(e),queueTime:Object(Z.fb)(e),company:Object(Z.l)(e)}}))(At),wt=n("AqJW"),kt={wrapper:{position:"absolute",top:"18px",left:"8px",padding:"5px",borderRadius:"50%",cursor:"pointer",zIndex:10},icon:{backgroundImage:'url("'.concat(Y,'")'),backgroundRepeat:"no-repeat",backgroundSize:"16px",height:"16px",width:"16px"}},xt=Object(S.d)({aria_label_back_button:{id:"kustomer.chat.conversation.header.menu.button.back.aria.label",defaultMessage:"Back"}}),Dt=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"handleKeyPress",(function(e){var t=n.props.handleMenuClick;D(e)&&(e.preventDefault(),e.stopPropagation(),t())})),n}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.showMenu,n=e.handleMenuClick,a=e.intl;return t?r()("div",{tabIndex:"0",style:kt.wrapper,onKeyPress:this.handleKeyPress,onClick:n,className:"kustomer-app-header-menu-button",role:"button","aria-label":a.formatMessage(xt.aria_label_back_button)},void 0,r()("div",{className:"iconButton backButton",style:kt.icon})):null}}]),t}(i.PureComponent);Dt.defaultProps={handleMenuClick:function(){},showMenu:!1};var Nt=function(e){return{showMenu:Object(Z.P)(e)&&Object(Z.o)(e)}},jt=function(e){return{handleMenuClick:function(){e(Object(wt.i)())}}},Tt=Object(S.e)(Dt),St=Object(s.b)(Nt,jt)(Tt),Ot=Object(s.b)(Nt,jt)(St),Pt=Object(S.d)({aria_label_chat_conversation_header:{id:"kustomer.chat.conversation.header.aria.label",defaultMessage:"Chat conversation"},aria_label_chat_conversation_close_chat:{id:"kustomer.chat.conversation.close.chat.aria.label",defaultMessage:"Close chat"}}),Et=r()(Ot,{}),Lt=function(e){var t=e.styles,n=e.onCloseClick,a=e.expanded,i=e.hasAgent,o=e.showOrgAvatar,s=e.intl;return r()("div",{style:t.wrapper,className:"kustomer-app-header",role:"main","aria-label":s.formatMessage(Pt.aria_label_chat_conversation_header)},"wrapper",Et,r()(Mt,{expanded:a,team:!i,showOrgAvatar:o,hasAgent:i}),r()("div",{style:t.close.wrapper,tabIndex:"0",onClick:n,onKeyPress:function(t){D(t)&&(t.preventDefault(),t.stopPropagation(),e.onCloseClick())},className:"kustomer-app-header-close-button",role:"button","aria-label":s.formatMessage(Pt.aria_label_chat_conversation_close_chat)},void 0,r()("div",{style:t.close.icon})))};Lt.defaultProps={onCloseClick:function(){},expanded:!0,showOrgAvatar:!1,hasAgent:!1,team:!0,styles:{menu:{},close:{}}};var _t={styles:ft,start:function(e){return{wrapperHeight:e.expanded?195:64}},end:function(e){return{wrapperHeight:ot(e.expanded?195:64)}},tween:function(e){return{wrapper:{height:"".concat(e.wrapperHeight,"px")}}}},zt=Object(S.e)(Lt),Rt=Object(T.a)(zt),Zt=it(_t)(Rt),Ut=n("KbFG"),Gt=n("sEfC"),Wt=n.n(Gt),Bt=n("pI4q"),Ft={input:{flex:"1 1 auto",position:"relative",fontSize:"12px",lineHeight:"16px",maxHeight:150,padding:"10px",boxShadow:"none",border:"none",outline:"none",overflowY:"auto",display:"block",cursor:"text"}},Ht=function(e){function t(e){var n;return l()(this,t),(n=f()(this,m()(t).call(this,e))).focus=n.focus.bind(b()(n)),n.handleKeyPress=n.handleKeyPress.bind(b()(n)),n.handleChange=n.handleChange.bind(b()(n)),n.handleClipAtMaxLength=n.handleClipAtMaxLength.bind(b()(n)),n.handlePasteOnlyPlaintext=n.handlePasteOnlyPlaintext.bind(b()(n)),n._input={focus:function(){},blur:function(){}},n}return y()(t,e),p()(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.value,n=e.value,a=this._input.innerHTML,r=this.props.placeholder,i=e.placeholder;return!((n===a||n===t)&&r===i)}},{key:"componentDidUpdate",value:function(){var e=this.props.value;this._input&&e!==this._input.innerHTML&&(this._input.innerHTML=this.props.value)}},{key:"focus",value:function(){this._input&&this._input.focus()}},{key:"blur",value:function(){this._input&&this._input.blur()}},{key:"handleKeyPress",value:function(e){this.props.onKeyPress(e)}},{key:"handleChange",value:function(){var e=this.props.onChange,t=this._input.innerHTML,n=t!==this._lastHtml;e&&n&&e({target:{value:t}}),this._lastHtml=t}},{key:"handleClipAtMaxLength",value:function(e){var t=this.props.maxlength,n="Backspace"===e.key||"Enter"===e.key,a=e.altKey||e.metaKey||e.ctrlKey||e.shiftKey;this._input.innerText.length!==t||n||a||e.preventDefault()}},{key:"handlePasteOnlyPlaintext",value:function(e){var t=this.props.maxlength;e.preventDefault();var n=e.clipboardData.getData("text/plain")||"",a=t-this._input.innerHTML.length,r=n.substr(0,a);document.execCommand("insertText",!1,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,a={__html:t.value||null};return o.a.createElement("div",{key:"input",role:"textbox","aria-label":n,className:"messageInput kustomer-app-reply-input",style:Ft.input,ref:function(t){e._input=t},placeholder:n,contentEditable:!0,onKeyPress:this.handleKeyPress,onKeyDown:this.handleClipAtMaxLength,onInput:this.handleChange,onBlur:this.handleChange,onPaste:this.handlePasteOnlyPlaintext,dangerouslySetInnerHTML:a})}}]),t}(i.Component);Ht.defaultProps={placeholder:"",onKeyPress:function(){},onChange:function(){},value:"",maxlength:10240};var Yt=Ht,Qt={button:{backgroundColor:"#f9fdfe",border:"1px solid ".concat("#336DEC"),color:"#336DEC",display:"inline-block",cursor:"pointer",borderRadius:"3px",fontSize:"1rem",fontWeight:"500",fontStyle:"normal",fontStretch:"normal",letterSpacing:"normal",lineHeight:"25px",overflowWrap:"break-word",padding:"0 10px",transition:"all ".concat("150ms"," ").concat("ease-in-out"),margin:"5px",":disabled":{opacity:".5",cursor:"not-allowed"},":hover":{transition:"all ".concat("150ms"," ").concat("ease-in-out"),backgroundColor:"#f0fafd",boxShadow:"0 2px 7px rgba(0, 0, 0, 0.1)"},":hover:disabled":{cursor:"default !important",backgroundColor:"#f9fdfe",boxShadow:"none"}},innerText:{fontSize:"0.875rem",textTransform:"capitalize"}},Vt=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"handleKeyPress",(function(e){var t=n.props,a=t.onClick,r=t.displayName,i=t.value,o=t.disabled;if(D(e)){if(e.preventDefault(),e.stopPropagation(),o)return;a(i,r)}})),A()(b()(n),"handleClick",(function(){var e=n.props,t=e.onClick,a=e.displayName,r=e.value,i=e.disabled,o=e.endChat;i||t(r,a,o)})),n}return y()(t,e),p()(t,[{key:"getSafeButtonMessage",value:function(e){var t=e;return e&&e.length>80&&(t="".concat(t.substring(0,80),"...")),t}},{key:"render",value:function(){var e=this.props,t=e.displayName,n=e.disabled,a=e.label||t,i=this.getSafeButtonMessage(a);return r()("button",{tabIndex:"0",style:Qt.button,onClick:this.handleClick,onKeyPress:this.handleKeyPress,disabled:n,className:"kustomer-app-reply-input-option"},void 0,r()("span",{"aria-label":i,style:Qt.innerText},void 0,i))}}]),t}(o.a.PureComponent);Vt.defaultProps={onClick:function(){},disabled:!1,label:null,endChat:!1};var Jt=Object(T.a)(Vt),Xt={wrapper:{pointerEvents:"none"},button:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#FFF",color:"#336DEC",fontSize:14,fontWeight:500,height:48,boxShadow:"0 -8px 15px 0 ".concat("rgba(0, 0, 0, 0.06)"),textAlign:"center",pointerEvents:"all",cursor:"pointer",transition:"all ".concat("150ms"," ").concat("ease-in-out"),margin:5,":hover":{color:"#FFF",backgroundColor:"#336DEC"},":active":{color:"#FFF",backgroundColor:"#336DEC"}}},Kt=Object(S.d)({new_conversation_inHours:{id:"kustomer.chat.history.new_conversation_inHours",defaultMessage:"Start a New Conversation"},new_conversation_afterHours:{id:"kustomer.chat.history.new_conversation_afterHours",defaultMessage:"Leave a Message"},new_conversation_singleChat:{id:"kustomer.chat.history.new_conversation_singleChat",defaultMessage:"Back to Chat"}}),qt=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"handleKeyPress",(function(e){var t=n.props.onClick;D(e)&&(e.preventDefault(),e.stopPropagation(),t())})),A()(b()(n),"renderButtonText",(function(){var e=n.props,t=e.intl,a=e.isAfterHours;return e.hasActiveSingleChat?t.formatMessage(Kt.new_conversation_singleChat):a?t.formatMessage(Kt.new_conversation_afterHours):t.formatMessage(Kt.new_conversation_inHours)})),n}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.onClick;return e.hasMultipleActiveChats?null:r()("div",{style:Xt.wrapper},void 0,r()("div",{style:Xt.button,tabIndex:"0",onKeyPress:this.handleKeyPress,onClick:t,className:"kustomer-app-new-conversation-button",role:"button","aria-label":this.renderButtonText()},void 0,this.renderButtonText()))}}]),t}(o.a.Component);qt.defaultProps={onClick:function(){},isAfterHours:!1,hasActiveSingleChat:!1,hasMultipleActiveChats:!1};var $t=Object(s.b)((function(e){return{isAfterHours:Object(Z.jb)(e)}}))(Object(S.e)(Object(T.a)(qt),{withRef:!0})),en=n("lFXU"),tn=n("GMKn"),nn=function(e){gt.b.sendToChatActivityChannel(e,tn.a)},an=n("FfGl"),rn=n.n(an),on=Object(S.d)({placeholder_inHours:{id:"kustomer.chat.conversation.input.placeholder.inHours",defaultMessage:"Type a message..."},placeholder_afterHours:{id:"kustomer.chat.conversation.input.placeholder.afterHours",defaultMessage:"Leave a message..."},input_disabled:{id:"kustomer.chat.conversation.input.disabled.copy",defaultMessage:"Thank You! We'll follow up on your request."},upload_fail_fileSize:{id:"kustomer.chat.conversation.input.error.fileSize",defaultMessage:"Please upload a file less than 10mb"},upload_fail_fileType:{id:"kustomer.chat.conversation.input.error.fileType",defaultMessage:"Only images and PDFs are allowed uploads"},message_body_attachment:{id:"kustomer.chat.conversation.input.attachment.body",defaultMessage:"File attached"},message_body_attachment_failed:{id:"kustomer.chat.conversation.input.attachment.error.failed",defaultMessage:"Attachment upload failed"},aria_label_send_messages:{id:"kustomer.chat.conversation.input.aria.label.send.message",defaultMessage:"Send message"},aria_label_upload_attachment_button:{id:"kustomer.chat.conversation.input.aria.label.upload.attachment.button",defaultMessage:"Upload attachment"}}),sn={wrapper:{padding:"5px 10px 5px 10px",position:"relative",backgroundColor:"white",boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)"),borderTop:"1px solid transparent",borderBottom:"1px solid transparent",display:"flex",alignItems:"center"},wrapperOptions:{padding:"5px 10px",position:"relative",background:"".concat("#F8FAFD"),boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)")},hasError:{borderTop:"1px solid ".concat("#FF655D"),borderBottom:"1px solid ".concat("#FF655D")},enter:{flex:"0 0 auto",cursor:"pointer",height:"28px",width:"28px",background:"#336DEC",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",borderRadius:"50%",transition:"all ".concat("150ms")},enterIcon:{display:"inline-block",backgroundImage:'url("'.concat(B,'")'),backgroundRepeat:"no-repeat",backgroundSize:"10px",height:"10px",width:"10px"},uploadBtn:{flex:"0 0 auto",marginRight:"10px",cursor:"pointer",height:"28px",width:"28px",transition:"all ".concat("150ms"),opacity:.7,":hover":{opacity:1}},uploadIcon:{display:"inline-block",backgroundImage:'url("'.concat(te,'")'),backgroundRepeat:"no-repeat",backgroundSize:"26px",height:"100%",width:"100%"},fileInput:{display:"none"},wrapperTeam:{padding:"5px 10px",position:"relative",background:"".concat("#F8FAFD"),boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)")},wrapperMll:{position:"relative",background:"".concat("#F8FAFD"),boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)")},wrapperDisabled:{padding:"10px",background:"".concat("#F8FAFD"),boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)"),textAlign:"center"},disabledText:{color:"#717070",fontWeight:"500",fontSize:"13px"}},un="image/*,application/pdf",cn=1e7,ln=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"handleKeyPress",(function(e){D(e)?(e.preventDefault(),e.stopPropagation(),n.handleSubmit()):(n.debouncedTypingActivity(),n.debouncedEndTypingActivity())})),A()(b()(n),"handleSubmit",(function(e){var t,a=n.props,r=a.handleSendMessage,i=a.sessionId,o=a.intl,s=n.state.body||e||"",u=Ut.a(s),c=n.getResponseButtonsFromLastMessage();if(e&&c){var l=c.find((function(t){return t.value===e}));t=x()(l,"label")}u&&(r({body:u,url:"".concat(rn.a.host,"/img/test-avatar.png"),user:"customer@kustomer.com",meta:{displayBody:t},sentBy:{type:"customer"}},i,o),n.setState({body:""}),Ut.f()?n._input.blur():n._input&&n._input.focus())})),A()(b()(n),"handleChange",(function(e){n.setState({body:e.target.value})})),A()(b()(n),"handleNewConversationClick",(function(){n.props.redirectToNewConversation()})),A()(b()(n),"handleFileChange",(function(e){var t=n.props,a=t.createAttachment,r=t.intl,i=x()(e,["target","files",[0]]),o=x()(i,"type",""),s=x()(i,"size",cn);if(i)if(s>=cn){var u=r.formatMessage(on.upload_fail_fileSize);n.setState({error:u})}else if(o.includes("image")||o.includes("pdf")){n.state.error&&n.setState({error:""});var c=r.formatMessage(on.message_body_attachment),l=r.formatMessage(on.message_body_attachment_failed);a({name:i.name,contentType:o,contentLength:s,file:i,messageBody:c,failedMessageBody:l})}else{var d=r.formatMessage(on.upload_fail_fileSize);n.setState({error:d})}})),A()(b()(n),"renderDisabled",(function(){return r()("div",{style:sn.wrapperDisabled,className:"kustomer-app-reply-input-disabled-text"},void 0,r()("span",{style:sn.disabledText},void 0,o.a.createElement(S.a,on.input_disabled)))})),A()(b()(n),"renderAttachmentIcon",(function(){var e=n.props,t=e.sessionId,a=e.intl;return"new"===t?null:r()("label",{tabIndex:"0",htmlFor:"fileUpload",style:sn.uploadBtn},void 0,r()("div",{className:"uploadIcon kustomer-app-reply-input-upload-attachment-button",style:sn.uploadIcon,"aria-label":a.formatMessage(on.aria_label_upload_attachment_button),role:"button"}),r()("input",{id:"fileUpload",type:"file",accept:un,style:sn.fileInput,onChange:n.handleFileChange}))})),A()(b()(n),"getResponseButtonsFromLastMessage",(function(){var e=n.props.lastMessage,t=x()(e,"meta"),a=x()(t,"responseButtons");if(a&&a.length)return a})),A()(b()(n),"renderInput",(function(){var e=n.props,t=e.isAfterHours,a=e.intl,i=n.state.error,s=n.getResponseButtonsFromLastMessage();return s?r()("div",{className:"chatConvsationInputButtonWrap kustomer-app-reply-input-option-prompt",style:sn.wrapperOptions},void 0,s.map((function(e,t){return r()(Jt,{displayName:e.label,value:e.value,onClick:n.handleSubmit},"chat-conversation-input-".concat(e.value,"-").concat(t))}))):r()("div",{style:[sn.wrapper,i?sn.hasError:null],className:"kustomer-app-reply-input-container",onKeyPress:n.handleKeyPress},void 0,o.a.createElement(Yt,{ref:function(e){return n._input=e},placeholder:i||(t?a.formatMessage(on.placeholder_afterHours):a.formatMessage(on.placeholder_inHours)),value:n.state.body,onChange:n.handleChange,tabIndex:"0",error:i}),n.renderAttachmentIcon(),r()("div",{style:sn.enter,className:"enterIcon kustomer-app-reply-input-enter-button",onClick:n.handleSubmit,onKeyPress:n.handleKeyPress,tabIndex:"0",role:"button","aria-label":a.formatMessage(on.aria_label_send_messages)},void 0,r()("div",{style:sn.enterIcon})))})),A()(b()(n),"renderLocked",(function(){var e=n.props,t=e.hasActiveSingleChat,a=e.hasMultipleActiveChats;return r()($t,{onClick:n.handleNewConversationClick,hasActiveSingleChat:t,hasMultipleActiveChats:a})})),n.debouncedTypingActivity=Wt()((function(){return nn("typing")}),1e3,{leading:!0,maxWait:2500}),n.debouncedEndTypingActivity=Wt()((function(){return nn("typing-ended")}),5e3),n._input={focus:function(){},blur:function(){}},n.state={body:"",error:""},n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){this._input&&!Ut.f()&&this._input.focus()}},{key:"render",value:function(){var e=this.props,t=e.inputDisabled;return e.isLocked?this.renderLocked():t?this.renderDisabled():this.renderInput()}}]),t}(i.Component);ln.defaultProps={sessionId:null,isLocked:!1,hasActiveSingleChat:!1,hasMultipleActiveChats:!1,lastMessage:void 0,handleSendMessage:function(){},redirectToNewConversation:function(){}};var dn=Object(S.e)(Object(T.a)(ln),{withRef:!0}),pn=Object(s.b)((function(e){var t=Z.e(e),n=Z.jb(e),a=!!Object(Bt.a)("input-disabled-".concat(t)),r=Z.n(e),i=Z.G(e),o=Z.Y(e);return{hasActiveSingleChat:!!Z.H(e),hasMultipleActiveChats:i&&Z.R(e),sessionId:t,inputDisabled:a,isAfterHours:n,isLocked:r&&Z.S(e,t),lastMessage:o(e,{item:{id:t}})}}),(function(e){return{handleSendMessage:function(t,n,a){e(n&&"new"!==n?Object(en.h)(n,t):Object(en.g)(t,a))},redirectToNewConversation:function(){e(wt.e()),e(Ze.L())},createAttachment:function(t){var n=t.name,a=t.contentType,r=t.contentLength,i=t.file,o=t.messageBody,s=t.failedMessage;if(n||a||r){var u={name:n,contentType:a,contentLength:r};e(Ze.M(u,i,o,s))}}}}))(dn),gn=n("u7uK"),fn=n.n(gn),hn=/^[\w.!#$%&â*+/=?^`{|}~-]{1,64}@[\w-]+((?:\.[\w-]+))+$/,mn=function(e){if(!e)return!1;var t=e.substring(e.lastIndexOf("@")+1);return!(e.length>256||t.length>254)&&hn.test(e)},In=function(e){if(!e)return!1;var t=["+","(",")","-"];if(e.split("").find((function(e){return!t.includes(e)&&isNaN(e)})))return!1;var n=fn()(e,"",!0);return Array.isArray(n)&&n.length>0},bn=function(e){return("string"==typeof e||"number"==typeof e)&&!isNaN(e)},vn={wrapper:{padding:"5px 42px 5px 10px",position:"relative",background:"".concat("#FFFFFF"),border:"1px solid transparent",boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)")},hasError:{borderTop:"1px solid ".concat("#FF655D"),borderBottom:"1px solid ".concat("#FF655D")},enter:{position:"absolute",right:"10px",top:"12px",cursor:"pointer",height:"22px",width:"22px",background:"#336DEC",lineHeight:"22px",textAlign:"center",borderRadius:"50%",transition:"all ".concat("150ms")},enterIcon:{display:"inline-block",backgroundImage:'url("'.concat(B,'")'),backgroundRepeat:"no-repeat",backgroundSize:"10px",height:"10px",width:"10px"},wrapperTeam:{padding:"5px 10px",position:"relative",background:"".concat("#F8FAFD"),boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)")},wrapperDisabled:{padding:"10px",background:"".concat("#F8FAFD"),boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)"),textAlign:"center"},disabledText:{color:"#717070",fontWeight:"500",fontSize:"13px"},wrapperOptions:{padding:"5px 10px",position:"relative",background:"".concat("#F8FAFD"),boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)")}},yn=n("Ualb"),Cn=n("/bK8"),An=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"getErrorPlaceholder",(function(){var e=n.props.intl,t=n.state,a=t.error,r=t.channel;return a?"email"===r?e.formatMessage(Cn.a.placeholder_error_email):e.formatMessage(Cn.a.placeholder_error_phone):""})),A()(b()(n),"handleKeyPress",(function(e){if(n.state.error&&n.setState({error:!1}),D(e)){if(e.preventDefault(),e.stopPropagation(),!n.state.channel)return;n.handleAddressSubmit()}})),A()(b()(n),"handleSubmitReplyChannel",(function(e){var t=n.props.sessionId;"wait"!==e?(n.setState({channel:e}),n.props.handleChooseReplyChannel(e,t)):n.props.handleChooseReplyChannelWait(t)})),A()(b()(n),"handleAddressSubmit",(function(){var e=n.props.sessionId,t=n.state,a=t.address,r=t.channel;("email"!==r||mn(a))&&("email"===r||In(a))?(n.setState({address:""}),Object(Ut.f)()&&n._input.blur(),n.props.handleReplyChannelAddress(a,e)):n.setState({error:!0,address:""})})),A()(b()(n),"handleAddressChange",(function(e){n.setState({address:e.target.value})})),A()(b()(n),"renderReplyChannelAddress",(function(){var e=n.props.intl,t=n.state.error;return r()("div",{style:Object.assign({},vn.wrapper,sn[t?"hasError":{}])},void 0,o.a.createElement(Yt,{ref:function(e){return n._input=e},placeholder:n.getErrorPlaceholder()||e.formatMessage(Cn.a.placeholder),onKeyPress:n.handleKeyPress,value:n.state.address,onChange:n.handleAddressChange,tabIndex:"0"}),r()("div",{style:vn.enter,className:"enterIcon kustomer-app-reply-input-enter-button",onClick:n.handleAddressSubmit,onKeyPress:n.handleKeyPress,tabIndex:"0",role:"button","aria-label":e.formatMessage(Cn.a.aria_label_send_message)},void 0,r()("div",{style:vn.enterIcon})))})),A()(b()(n),"renderReplyChannel",(function(){var e=n.props.intl,t=n.props.followUpChannels;return r()("div",{className:"volumeControlButtonWrap kustomer-app-reply-input-option-prompt",style:vn.wrapperOptions},void 0,t.map((function(t,a){var i="wait"===t?e.formatMessage(Cn.a.wait_label):t;return r()(Jt,{displayName:i,value:t,onClick:n.handleSubmitReplyChannel},"".concat(t,"-").concat(a))})))})),n._input={focus:function(){}},n.state={address:"",channel:""},n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){this._input&&!Object(Ut.f)()&&this._input.focus()}},{key:"render",value:function(){return this.state.channel?this.renderReplyChannelAddress():this.renderReplyChannel()}}]),t}(i.Component);An.defaultProps={sessionId:null,followUpChannels:[]};var Mn=Object(s.b)((function(e){return{sessionId:Z.e(e),followUpChannels:Z.nb(e),userId:""}}),(function(e,t){return{handleChooseReplyChannelWait:function(t){e(yn.b(t))},handleChooseReplyChannel:function(n,a){e(yn.a(a,n,t.intl))},handleReplyChannelAddress:function(n,a){e(yn.e(a,n,t.intl))},handleSubmit:function(t,n){e(yn.c(n))}}}))(An),wn=(Object(S.e)(An),Object(S.e)(Mn)),kn=n("lDzU"),xn=function(e){return{flex:"1 1 auto",overflowY:"auto",overflowX:"hidden",backgroundPosition:"center 33.333%",backgroundRepeat:"no-repeat",backgroundImage:'url("'.concat(e||ae,'")')}},Dn={alley:{flex:"1 1 auto",overflowY:"auto",overflowX:"hidden",backgroundColor:"#F8FAFD",zIndex:2},mobileScrollContainer:{flex:"1 1 auto",overflowY:"auto",overflowX:"hidden",backgroundColor:"#F8FAFD",display:"flex",justifyContent:"flex-end",flexDirection:"column"},messagesContainer:{padding:"35px 16px 25px"},mobileMessagesContainer:{minHeight:0}},Nn=n("1iNE"),jn=n.n(Nn),Tn=n("afOK"),Sn=n.n(Tn),On=n("LlRK"),Pn=n.n(On),En=n("EstQ"),Ln=n("Y3Pm"),_n=n.n(Ln),zn=Object(S.d)({seconds_ago:{id:"kustomer.chat.time.ago.wrapper.seconds.ago.1",defaultMessage:"Just now"}}),Rn=Object(S.e)((function(e){var t=e.date,n=e.intl;return r()(Pn.a,{date:t,minPeriod:60,formatter:function(e,t){return function(e,t,n){var a=e,r=t,i=1===a?"one":"other";if("second"===t&&a<60)return En.a.formatMessage(zn.seconds_ago);"week"===t&&(r="day",i="other",a=7*e);var o=x()(n,[r,"relativeTime","past",i]);return _n()(o,"{0}",a)}(e,t,n.formats)}})})),Zn={message:{marginTop:"10px"},failed:{background:"url('".concat(W,"')"),backgroundSize:16,backgroundRepeat:"no-repeat",height:16,width:16,marginTop:10,marginLeft:8,cursor:"pointer"},userDate:{alignSelf:"flex-start",color:"#717070",fontSize:"11px",marginTop:"10px"},customerDate:{alignSelf:"flex-end",color:"#717070",fontSize:"11px",marginTop:"10px"}},Un=n("sIYH"),Gn=n.n(Un),Wn=new we.a({breaks:!0,html:!1,linkify:!0}),Bn=Wn.renderer.rules.link_open||function(e,t,n,a,r){return r.renderToken(e,t,n)};Wn.renderer.rules.link_open=function(e,t,n,a,r){var i=e[t].attrIndex("target");return i<0?(e[t].attrPush(["target","_blank"]),e[t].attrPush(["rel","noopener noreferrer"])):e[t].attrs[i][1]="_blank",Bn(e,t,n,a,r)};var Fn=r()("span",{},void 0,"Sent a message with an image"),Hn=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e,t=this.props,n=t.text;if(t.isPreview&&((e=n)&&e.match(/!\[[^\]]+\]\([^)]+\)/)))return Fn;var a=Wn.renderInline(n);return r()("span",{dangerouslySetInnerHTML:{__html:a}})}}]),t}(i.PureComponent);Hn.defaultProps={isPreview:!1,text:""};var Yn=Hn,Qn={target:{url:"_blank",rel:"noopener noreferrer"},format:function(e,t){if("url"===t&&e.length>28){var n=e.slice(0,25);return"".concat(n,"...")}return e}},Vn=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"renderMessage",value:function(){var e=this.props,t=e.text;return e.markdown?r()(Yn,{text:t}):t}},{key:"render",value:function(){return r()(Gn.a,{role:"log","aria-live":"assertive","aria-relevant":"additions","aria-atomic":"true",options:Qn},void 0,this.renderMessage())}}]),t}(i.PureComponent);Vn.defaultProps={text:"",markdown:!1};var Jn=Vn,Xn={message:{fontSize:"12px",fontWeight:"400",padding:"9px 10px",borderRadius:"9px 9px 0 9px",display:"inline-block",maxWidth:"250px",margin:0,lineHeight:"16px",color:"#FFFFFF",backgroundColor:"#336DEC",wordWrap:"break-word",boxShadow:"0 0 22px 0 ".concat("rgba(105,105,105,0.16)"),alignSelf:"flex-end"},loading:{opacity:.4},messageContainer:{display:"flex",justifyContent:"flex-end",flexDirection:"column"}},Kn=n("E+oP"),qn=n.n(Kn),$n=n("i8i4"),ea=n.n($n),ta={modalContainer:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",zIndex:"9999999999",display:"block"},modalContent:{top:"50%",left:"50%",position:"relative",transform:"translate(-50%, -50%)",display:"block",width:"600px",height:"400px",overflow:"hidden","@media (max-width: 600px)":{width:"320px"}},close:{color:"#FFF",fontSize:"28px",fontWeight:"bold",position:"absolute",top:"10px",right:"20px",cursor:"pointer",zIndex:"9999999999"}},na=Object(S.d)({aria_label_modal:{id:"kustomer.chat.icon.aria.label.modal",defaultMessage:"Image in modal"},aria_label_modal_close:{id:"kustomer.chat.icon.aria.label.modal.close",defaultMessage:"Close"}}),aa=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(i))),A()(b()(n),"handleKeyPress",(function(e){var t=n.props.onClose;j(e)&&(e.preventDefault(),e.stopPropagation(),t())})),A()(b()(n),"handleClick",(function(e){var t=n.props.onClose;n.node.contains(e.target)||t()})),A()(b()(n),"_renderLayer",(function(){ea.a.render(n.renderModal(),n.modal)})),A()(b()(n),"renderModal",(function(){var e=n.props,t=e.children,a=e.intl,i=e.onClose;return r()(u.a,{},void 0,r()("div",{id:"kustomer-modal-container",className:"kustomer-app-modal",style:ta.modalContainer,onClick:n.handleClick,role:"dialog",tabIndex:"0","aria-label":a.formatMessage(na.aria_label_modal)},void 0,r()("span",{onClick:i,style:ta.close,"aria-label":a.formatMessage(na.aria_label_modal_close)},void 0,"Ã"),r()("div",{style:ta.modalContent},void 0,o.a.createElement("div",{ref:function(e){return n.node=e}},t))))})),n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.modal=document.createElement("div"),document.body.appendChild(this.modal),this._renderLayer(),window.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"componentDidUpdate",value:function(){this._renderLayer()}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.modal),window.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"render",value:function(){return null}}]),t}(i.PureComponent);aa.defaultProps={children:void 0,onClose:void 0};var ra=Object(S.e)(aa,{withRef:!0}),ia=Object(T.a)(ra),oa=Object(S.d)({loading_attachment:{id:"kustomer.chat.conversation.message.attachment.loading",defaultMessage:"Loading attachment..."}}),sa=["image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp"],ua={imgStyles:{maxHeight:"100%",maxWidth:"100%",width:"auto",height:"auto",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"},imgPreview:{cursor:"pointer"}},ca=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"handleClickImage",(function(){n.setState({showModal:!n.state.showModal})})),A()(b()(n),"renderImageModal",(function(){var e=n.props.attachment;return n.state.showModal?r()(ia,{onClose:n.handleClickImage},void 0,r()("img",{src:e.preview,alt:e.name,style:ua.imgStyles})):null})),n.state={showModal:!1},n}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.attachment,n=e.className,a=e.message,i=e.displayBody,s=e.style;return qn()(t)?null:t.preview?function(e){return sa.includes(e.contentType)}(t)?r()("div",{className:"".concat(n," kustomer-app-thread-customer-message"),style:s},void 0,r()(Jn,{text:i||a.body}),r()("div",{onClick:this.handleClickImage},void 0,r()("img",{src:t.preview,alt:t.name,style:ua.imgPreview})),this.renderImageModal()):r()("div",{className:"".concat(n," kustomer-app-thread-customer-message"),style:s},void 0,r()(Jn,{text:i||a.body}),r()("div",{},void 0,r()("a",{href:t.preview},void 0,t.name))):r()("div",{className:"".concat(n," kustomer-app-thread-customer-message"),style:s},void 0,r()(Jn,{text:i||a.body}),r()("div",{className:"kustomer-app-customer-message-attachment-loading"},void 0,o.a.createElement(S.a,oa.loading_attachment)))}}]),t}(i.PureComponent);ca.defaultProps={displayBody:void 0};var la=ca,da=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.attachment,n=e.message,a=e.timeAgoNode,i=Xn.message,o=x()(n,"meta.displayBody");return(n.loading||n.failed)&&(i=Object.assign({},i,Xn.loading)),n.attachments&&n.attachments.length?r()("div",{style:Xn.messageContainer},void 0,r()(la,{attachment:t,className:"customerMessage",message:n,displayBody:o,style:i})):n.body?r()("div",{style:Xn.messageContainer},void 0,r()("p",{style:i,className:"customerMessage kustomer-app-thread-customer-message"},void 0,r()(Jn,{text:o||n.body})),a):null}}]),t}(i.PureComponent);da.defaultProps={message:Object(ke.e)(),attachment:Object(ke.a)(),timeAgoNode:void 0};var pa=da,ga={message:{fontSize:"12px",fontWeight:"400",padding:"7px 12px",borderRadius:"9px 9px 9px 0",display:"inline-block",maxWidth:"250px",lineHeight:"16px",color:"#313f48",backgroundColor:"#FFF",wordWrap:"break-word",boxShadow:"0 0 7px 0 ".concat("rgba(105,105,105,0.1)"),alignSelf:"flex-start"},messageContainer:{display:"flex",flexDirection:"column"},wrapper:{display:"flex"},emptyAvatar:{width:30,margin:"0 5px"},userAvatar:{margin:"0px 5px"}},fa=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"renderMessageColumn",value:function(){var e=this.props.message;return r()("p",{className:"userMessage kustomer-app-thread-user-message",style:ga.message},void 0,r()(Jn,{text:e.body,markdown:!0}))}},{key:"renderAvatarColumn",value:function(){var e=this.props,t=e.user,n=e.hideAvatar;return n?r()("div",{style:ga.emptyAvatar}):r()("div",{style:ga.userAvatar},void 0,r()(Re,{avatarUrl:t.avatarUrl,defaultName:t.name,includeDefault:!n}))}},{key:"render",value:function(){var e=this.props,t=e.attachment,n=e.message,a=e.timeAgoNode,i=ga.message;return(n.loading||n.failed)&&(i=Object.assign({},i,ga.loading)),n.attachments&&n.attachments.length?r()(la,{attachment:t,className:"userMessage",message:n,style:i}):r()("div",{style:ga.wrapper},void 0,this.renderAvatarColumn(),r()("div",{style:ga.messageContainer},void 0,this.renderMessageColumn(),a))}}]),t}(i.PureComponent);fa.defaultProps={message:Object(ke.e)(),user:Object(ke.j)(),hideAvatar:!1,attachment:Object(ke.a)(),timeAgoNode:void 0};var ha=Object(s.b)((function(){var e=Object(Z.T)();return function(t,n){return{user:e(t,n)}}}))(fa),ma={message:{fontSize:"12px",fontWeight:"400",padding:"7px 12px",borderRadius:"9px 9px 9px 0",display:"inline-block",maxWidth:"250px",margin:"5px 5px",lineHeight:"16px",color:"#313f48",backgroundColor:"#FFF",wordWrap:"break-word",boxShadow:"0 0 7px 0 ".concat("rgba(105,105,105,0.1)")},listContainer:{display:"flex",flexDirection:"column"},wrapper:{display:"flex",cursor:"default"},userAvatar:{margin:"0px 5px"},title:{fontWeight:"500",maxHeight:"215px"},articleItem:{display:"flex",cursor:"pointer",":hover":{icon:{opacity:"1",transition:"all 150ms"}}},icon:{backgroundImage:'url("'.concat(V,'")'),backgroundRepeat:"no-repeat",backgroundSize:"16px",height:"18px",width:"18px",opacity:".4",transition:"all 150ms",marginRight:"5px"}},Ia=Object(S.d)({follow_up_prompt:{id:"kustomer.chat.message.article.list.follow.up.prompt.text",defaultMessage:"Did you find those articles helpful?"}}),ba=T.a.keyframes({"10%":{transform:"translateY(-5px)",backgroundColor:"#9E9DA2"},"50%":{transform:"translateY(0)",backgroundColor:"#B6B5BA"}},"indicator-animation"),va={message:{fontSize:"12px",fontWeight:"400",padding:"7px 12px",borderRadius:"9px 9px 9px 0",display:"inline-block",maxWidth:"250px",margin:"0 5px",lineHeight:"16px",color:"#313f48",backgroundColor:"#FFF",wordWrap:"break-word",boxShadow:"0 0 7px 0 ".concat("rgba(105,105,105,0.1)")},wrapper:{display:"flex",margin:"20px 0"},emptyAvatar:{width:30},userAvatar:{margin:"auto 0 0"},indicatorOne:{animation:"2s ease -1s infinite",animationName:ba,display:"inline-block",backgroundColor:"#B6B5BA",width:"7px",height:"7px",borderRadius:"100%",marginRight:"5px",animationDelay:-1},indicatorTwo:{animation:"2s ease -.85s infinite",animationName:ba,display:"inline-block",backgroundColor:"#B6B5BA",width:"7px",height:"7px",borderRadius:"100%",marginRight:"5px",animationDelay:-.85},indicatorThree:{animation:"2s ease -.7s infinite",animationName:ba,display:"inline-block",backgroundColor:"#B6B5BA",width:"7px",height:"7px",borderRadius:"100%",marginRight:"5px",animationDelay:-.7}},ya=Object(S.d)({aria_label_typing_indicator:{id:"kustomer.chat.typing.indicator.aria.label",defaultMessage:"Typing indicator"}}),Ca=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this.props.stayScrolled;e&&e()}},{key:"renderAvatarColumn",value:function(){var e=this.props.avatarUrl;return r()("div",{style:va.userAvatar},void 0,r()(Re,{avatarUrl:e,includeDefault:!0}))}},{key:"renderIndicator",value:function(){var e=this.props.intl;return r()("span",{style:va.message},void 0,r()("div",{style:va.indicatorOne,"aria-label":e.formatMessage(ya.aria_label_typing_indicator)}),r()("div",{style:va.indicatorTwo,"aria-label":e.formatMessage(ya.aria_label_typing_indicator)}),r()("div",{style:va.indicatorThree,"aria-label":e.formatMessage(ya.aria_label_typing_indicator)}))}},{key:"render",value:function(){return r()("div",{style:va.wrapper},void 0,this.renderAvatarColumn(),this.renderIndicator())}}]),t}(i.PureComponent);Ca.defaultProps={avatarUrl:void 0,stayScrolled:void 0};var Aa=Object(S.e)(Ca),Ma=Object(kn.b)(Object(T.a)(Aa)),wa=Object(s.b)((function(e,t){return{avatarUrl:Z.W()(e,{item:t.session})}}))(Ma),ka=r()(wa,{}),xa=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(i))),A()(b()(n),"handleClick",(function(e){var t=n.props,a=t.onSelectArticle,r=t.incrementVisited;a(e),r(e.id)})),A()(b()(n),"renderSatisfaction",(function(){var e=n.props,t=e.intl,a=e.articles,i=e.message;if(!a||!a.length)return null;var o=x()(i,"followUpPrompt");return r()("div",{style:ma.wrapper},void 0,n.renderAvatarColumn(),r()("p",{className:"articleListMessage kustomer-app-thread-article-list-message",style:ma.message},void 0,r()("span",{},void 0,o||t.formatMessage(Ia.follow_up_prompt))))})),n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchArticles,n=e.message;t(x()(n,"query"))}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.fetching,n=e.articles,a=e.onHandleResponse;t||!n||n.length||a({skip:!0})}},{key:"renderResults",value:function(){var e=this,t=this.props.articles;return r()("ul",{style:ma.listContainer},void 0,t.map((function(t){return r()("div",{className:"userMessage kustomer-app-thread-user-message",style:ma.message},t.id,r()("li",{style:ma.articleItem,onClick:function(){return e.handleClick(t)}},void 0,r()("div",{},void 0,r()("div",{style:ma.icon})),r()("span",{style:ma.title},void 0,t.title)))})))}},{key:"renderResultsMessage",value:function(){var e=this.props,t=e.message,n=e.articles;return jn()(n)?x()(t,"hasResults.displayValue"):x()(t,"noResults.displayValue")}},{key:"renderMessageColumn",value:function(){return r()("div",{},void 0,r()("div",{className:"articleListMessage kustomer-app-thread-article-list-message",style:ma.message},void 0,r()("p",{},void 0,this.renderResultsMessage())),this.renderResults())}},{key:"renderAvatarColumn",value:function(){var e=this.props.avatarUrl;return r()("div",{style:ma.userAvatar},void 0,r()(Re,{includeDefault:!0,avatarUrl:e}))}},{key:"render",value:function(){return this.props.fetching?ka:r()("div",{},void 0,r()("div",{style:ma.wrapper},void 0,this.renderAvatarColumn(),this.renderMessageColumn()),this.renderSatisfaction())}}]),t}(i.PureComponent);xa.defaultProps={articles:void 0,message:{},avatarUrl:null,fetching:!1};var Da=Object(S.e)(xa),Na=Object(s.b)((function(){return function(e){return{articles:Object(Z.hb)(e),avatarUrl:Object(Z.m)(e),fetching:Object(Z.gb)(e)}}}),(function(e){return{fetchArticles:function(t){e(Object(Ze.V)(t))},incrementVisited:function(t){e(Object(Ze.cb)(t))}}}))(Da),ja=Object(S.d)({sent_failure:{id:"kustomer.chat.conversation.message.failure",defaultMessage:"Failed to send message, click to retry"}}),Ta=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"handleFailedRetryKeyPress",(function(e){var t=n.props,a=t.onRetry,r=t.message;D(e)&&(e.preventDefault(),e.stopPropagation(),a(r))})),n.registerDOMNode=n.registerDOMNode.bind(b()(n)),n.handleFailedRetry=n.handleFailedRetry.bind(b()(n)),n}return y()(t,e),p()(t,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.message,t=e.attachments;if(jn()(t)){var n=Sn()(t);this.props.fetchMessageAttachment(e.id,n.id)}}},{key:"registerDOMNode",value:function(e){(0,this.props.provideDOMNode)(e)}},{key:"handleFailedRetry",value:function(e){e.preventDefault(),this.props.onRetry(this.props.message)}},{key:"renderFailed",value:function(){var e=this.props,t=e.message,n=e.intl;return t.failed?r()("div",{tabIndex:"0",style:Zn.failed,title:n.formatMessage(ja.sent_failure),onKeyPress:this.handleFailedRetryKeyPress,"aria-label":n.formatMessage(ja.sent_failure),onClick:this.handleFailedRetry}):null}},{key:"renderTimeAgo",value:function(){var e=this.props,t=e.lastMessageTimeUTC,n=e.isLastMessageInSession,a=e.message;if(!n||!t)return null;var i="user"===x()(a,"sentBy.type");return r()("span",{style:i?Zn.userDate:Zn.customerDate,"aria-live":"polite"},void 0,r()(Rn,{date:t}))}},{key:"renderBodyForType",value:function(){var e=this.props,t=e.message,n=e.short,a=e.attachment,i=e.onSelectArticle,o=e.onHandleResponse,s="articleList"===x()(t,"type");return"customer"===t.sentBy.type?r()(pa,{message:t,attachment:a,timeAgoNode:this.renderTimeAgo()}):s?r()(Na,{onSelectArticle:i,message:t,onHandleResponse:o}):"user"===t.sentBy.type?r()(ha,{message:t,attachment:a,hideAvatar:n,timeAgoNode:this.renderTimeAgo()}):null}},{key:"render",value:function(){var e=this.props.short,t=Object.assign({},Zn.message);return e&&(t.marginTop="5px"),o.a.createElement("div",{style:t,ref:this.registerDOMNode},this.renderBodyForType(),this.renderFailed())}}]),t}(i.PureComponent);Ta.defaultProps={attachment:Object(ke.a)(),provideDOMNode:function(){},onRetry:function(){},onHandleResponse:function(){},fetchMessageAttachment:function(){},message:Object(ke.e)(),short:!1,isLastMessageInSession:!1,lastMessageTimeUTC:void 0};var Sa=Object(S.e)(Ta,{withRef:!0}),Oa=Object(s.b)((function(e,t){var n=Z.Z();return{attachment:Z.db()(e,t),lastMessageTimeUTC:n(e,{item:{id:t.message.sessionId}})}}),(function(e){return{fetchMessageAttachment:function(t,n){(t||n)&&e(Ze.P(t,n))}}}))(Sa),Pa=n("sMkI"),Ea={wrapper:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"10px 30px",backgroundColor:"#F8FAFD",position:"absolute",width:"100%",zIndex:1},mobileWrapper:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"10px 16px",backgroundColor:"#F8FAFD",position:"absolute",width:"100%",zIndex:1},endChatBtn:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#FFF",color:"#717070",fontSize:10,fontWeight:500,border:"1px solid ".concat("#dadada"),textAlign:"center",cursor:"pointer",transition:"all ".concat("150ms"," ").concat("ease-in-out"),WebkitAppearance:"none",flex:"0 1 auto",padding:"3px 5px",borderRadius:"10px",height:"20px",letterSpacing:"0.3px",textTransform:"uppercase",":hover":{color:"rgb(112, 112, 112)",backgroundColor:"rgb(241, 241, 241)"},":active":{color:"rgb(112, 112, 112)",backgroundColor:"rgb(241, 241, 241)"}}},La=Object(S.d)({end_chat_copy:{id:"kustomer.chat.conversation.endChat.button.text",defaultMessage:"End Chat"}}),_a=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"handleKeyPress",(function(e){var t=n.props,a=t.requestEndChat,r=t.sessionId;D(e)&&(e.preventDefault(),e.stopPropagation(),a(r))})),A()(b()(n),"handleClick",(function(){var e=n.props;(0,e.requestEndChat)(e.sessionId)})),n}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.intl,n=e.isLocked,a=e.sessionId,i=e.campaignHasResponse;return!e.closedChatEnabled||n||"new"===a||!1===i?null:r()("div",{style:Object(Ut.f)()?Ea.mobileWrapper:Ea.wrapper,className:"kustomer-app-end-chat-button-container"},void 0,r()("button",{tabIndex:"0",onClick:this.handleClick,onKeyPress:this.handleKeyPress,style:Ea.endChatBtn,className:"kustomer-app-end-chat-button"},void 0,t.formatMessage(La.end_chat_copy)))}}]),t}(o.a.PureComponent);_a.defaultProps={isLocked:!1,campaignHasResponse:void 0,closedChatEnabled:!1,sessionId:""};var za=Object(S.e)(Object(T.a)(_a)),Ra=Object(s.b)((function(e){var t=Z.n(e),n=Z.e(e);return{closedChatEnabled:t,campaignHasResponse:Z.ib(e),sessionId:n,isLocked:Z.S(e,n)}}),(function(e){return{requestEndChat:function(t){var n=Pa.a.CUSTOMER_ENDED;e(Ze.db(t,n))}}}))(za),Za={eventLocked:{margin:"15px 0 35px",padding:"10px",color:"#717070",backgroundColor:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",textTransform:"uppercase",fontSize:12,fontWeight:500}},Ua=Object(S.d)({event_session_end:{id:"kustomer.chat.conversation.event.end.session",defaultMessage:"Chat has ended"}}),Ga=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.isLocked,n=e.intl;return t?r()("div",{style:Za.eventLocked,className:"kustomer-app-chat-ended-banner"},void 0,n.formatMessage(Ua.event_session_end)):null}}]),t}(o.a.PureComponent);Ga.defaultProps={isLocked:!1};var Wa=Object(S.e)(Ga,{withRef:!0}),Ba=n("3WF5"),Fa=n.n(Ba),Ha=n("QVEU"),Ya=n.n(Ha),Qa={message:{maxWidth:"280px",width:"280px"},satisfaction:{margin:"10px 0"},intro:{borderRadius:"3px",marginBottom:"30px",letterSpacing:".5px"},introHeading:{fontSize:"13px",fontWeight:600,textAlign:"center"},rating:{borderRadius:"3px"},ratingPrompt:{fontSize:"12px",fontWeight:500,textAlign:"center"},ratingOptionsWrapper:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},ratingOptions:{marginTop:"10px",display:"flex",justifyContent:"space-between"},ratingOption:{width:"50px",height:"50px",cursor:"pointer",borderRadius:"50%",":hover":{opacity:.8},":active":{opacity:.8}},ratingLabels:{display:"flex",marginTop:"10px",width:"100%"},ratingLabelLeft_wide:{textAlign:"left",whiteSpace:"nowrap",color:"#7b858d",fontWeight:500,fontSize:"11px",margin:"0 10px",flex:"1 1 50%",overflow:"hidden"},ratingLabelRight_wide:{textAlign:"right",whiteSpace:"nowrap",color:"#7b858d",fontWeight:500,fontSize:"11px",margin:"0 10px",flex:"1 1 50%",overflow:"hidden"},ratingLabelLeft_narrow:{textAlign:"right",whiteSpace:"nowrap",color:"#7b858d",fontWeight:500,fontSize:"11px",margin:"0 10px",flex:"1 1 50%",overflow:"hidden"},ratingLabelRight_narrow:{textAlign:"left",whiteSpace:"nowrap",color:"#7b858d",fontWeight:500,fontSize:"11px",margin:"0 10px",flex:"1 1 50%",overflow:"hidden"},form:{marginTop:"20px"},questions:{marginTop:"30px",animation:"slide-in-top 300ms cubic-bezier(0.215, 0.610, 0.355, 1.000) forwards",animationName:T.a.keyframes({from:{opacity:0,transform:"translate3d(0, -20px, 0)"},to:{opacity:1,transform:"translate3d(0, 0, 0)"}})},question:{marginTop:"10px"},questionLabel:{display:"block",fontSize:"12px",fontWeight:500},questionField:{display:"block",marginTop:"5px",borderRadius:"3px",borderColor:"#e3e3e3",width:"100%",lineHeight:"1.4em",padding:"5px",resize:"none"},questionFieldHint:{fontSize:"10px",display:"flex",justifyContent:"flex-end"},submitButton:{marginTop:"20px",height:"35px",fontSize:"13px",fontWeight:500,backgroundColor:"#52aaff",color:"#fff",borderRadius:"3px",width:"100%",border:"0",transition:"all ".concat("150ms"," ").concat("ease-in-out"),cursor:"pointer",":hover":{backgroundColor:"#3088dc"},":active":{backgroundColor:"#3088dc"}},completed:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"},completedIcon:{display:"block",backgroundImage:"url('".concat(q,"')"),backgroundColor:"#4eb96f",backgroundSize:"28px",backgroundRepeat:"no-repeat",backgroundPosition:"7px",height:"42px",width:"42px",borderRadius:"50%"},completedText:{marginTop:"10px",fontSize:"13px",fontWeight:500,textAlign:"center"},completedEditButton:{marginTop:"10px",fontWeight:500,cursor:"pointer",":hover":{color:"#1093c3"},":active":{color:"#1093c3"}}},Va=Object(S.d)({edit:{id:"kustomer.chat.satisfactionSurvey.button.edit",defaultMessage:"Edit"},submit:{id:"kustomer.chat.satisfactionSurvey.button.submit",defaultMessage:"Submit"},feedback_thanks:{id:"kustomer.chat.satisfactionSurvey.feedback.thanks",defaultMessage:"Thank you for your feedback!"},max_length:{id:"kustomer.chat.satisfactionSurvey.questions.field.max_length",defaultMessage:"{count} / {max} characters"},aria_label_text_area_further_details:{id:"kustomer.chat.satisfactionSurvey.aria.label.text.area",defaultMessage:"Text area for further details"},aria_label_submit:{id:"kustomer.chat.satisfactionSurvey.aria.label.submit",defaultMessage:"Submit satisfaction form"}}),Ja=1024,Xa={5:[1,2,3,4,5],3:[1,3,5],2:[1,5]},Ka=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"handleSubmitKeyPress",(function(e){D(e)&&(e.preventDefault(),e.stopPropagation(),n.handleSubmit(e))})),A()(b()(n),"updateSessionState",(function(e,t){(0,n.props.updateState)(e,t)})),A()(b()(n),"handleSubmit",(function(e){var t=n.props,a=t.sessionId,r=t.responseId,i=t.submit,o=t.clearState;e.preventDefault(),n.setState({editing:!1}),i(a,r,{rating:n.state.rating,answers:Object.values(n.state.answers),submittedAt:(new Date).toISOString()}),o(a)})),A()(b()(n),"handleEditKeyPress",(function(e){D(e)&&(e.preventDefault(),e.stopPropagation(),n.handleEdit(e))})),A()(b()(n),"handleEdit",(function(e){e.preventDefault(),n.setState({rating:null,answers:{},editing:!0})})),A()(b()(n),"handleSubmitRatingKeyPress",(function(e,t){D(e)&&(e.preventDefault(),e.stopPropagation(),n.handleSubmitRating(t))})),A()(b()(n),"handleSubmitRating",(function(e){var t=n.props,a=t.sessionId,r=t.responseId,i=t.submit,o=t.submitRating,s=t.form;qn()(s.get("questions"))?(n.setState({editing:!1}),i(a,r,{rating:e,answers:[],submittedAt:(new Date).toISOString()})):o(a,r,{rating:e}),n.debouncedUpdateSessionState(a,{rating:e,answers:Object.values(n.state.answers)}),n.setState({rating:e})})),A()(b()(n),"handleUpdateAnswer",(function(e,t){var a=n.props.sessionId,r=Object.assign({},n.state.answers,A()({},e,{id:e,answer:t.target.value}));n.setState({answers:r}),n.debouncedUpdateSessionState(a,{rating:n.state.rating,answers:Object.values(r)})})),A()(b()(n),"renderQuestion",(function(e,t){var a=n.props.intl,i=x()(n.state,["answers",e.id,"answer"])||"";return r()("div",{style:Qa.question},"question_".concat(e.id),r()("label",{style:Qa.questionLabel,htmlFor:"question_".concat(t)},void 0,e.prompt),r()("textarea",{style:Qa.questionField,id:"question_".concat(t),name:"question_".concat(t,"_text"),rows:5,value:x()(n.state,["answers",e.id,"answer"]),onChange:function(t){return n.handleUpdateAnswer(e.id,t)},maxLength:Ja,"aria-label":a.formatMessage(Va.aria_label_text_area_further_details)}),r()("span",{style:Qa.questionFieldHint,"aria-live":"polite"},void 0,o.a.createElement(S.a,mt()({},Va.max_length,{values:{count:i.length,max:Ja}}))))})),A()(b()(n),"renderQuestions",(function(){if(null===n.state.rating)return null;var e=n.props,t=e.form,a=e.intl;return qn()(t)||qn()(t.get("questions"))?null:o.a.createElement("form",{style:Qa.questions,onSubmit:n.handleSubmit,ref:function(e){n._questionsDOMNode=e}},Fa()(t.get("questions"),n.renderQuestion),r()("button",{tabIndex:"0",onKeyPress:n.handleSubmitKeyPress,onClick:n.handleSubmit,"aria-label":a.formatMessage(Va.aria_label_submit),style:Qa.submitButton},void 0,o.a.createElement(S.a,Va.submit)))})),A()(b()(n),"renderRating",(function(){var e=n.props.form,t=e.get("scaleOptions");return r()("div",{style:Qa.rating},void 0,r()("h3",{style:Qa.ratingPrompt},void 0,e.get("ratingPrompt")),r()("div",{style:Qa.ratingOptionsWrapper},void 0,r()("div",{style:Qa.ratingOptions},void 0,Xa[t].map((function(t,a){var i=n.state.rating===t?"color":"grey",o="https://cdn.kustomerapp.com/satisfaction/".concat(e.get("scaleType"),"_").concat(t,"_").concat(i,".svg");return r()("img",{tabIndex:"0",src:o,style:Qa.ratingOption,alt:"".concat(a," / ").concat(e.get("scaleOptions")),onKeyPress:function(e){return n.handleSubmitRatingKeyPress(e,t)},role:"button",onClick:function(){return n.handleSubmitRating(t)}},t)}))),r()("div",{style:Qa.ratingLabels},void 0,r()("span",{style:Qa["ratingLabelLeft_".concat(t>3?"wide":"narrow")]},void 0,e.get("scaleLabelLow")),r()("span",{style:Qa["ratingLabelRight_".concat(t>3?"wide":"narrow")]},void 0,e.get("scaleLabelHigh")))))})),A()(b()(n),"renderIntroduction",(function(){var e=n.props.form;return r()("div",{style:Qa.intro},void 0,r()("h3",{style:Qa.introHeading},void 0,e.get("introduction")))})),A()(b()(n),"renderForm",(function(){return r()("div",{style:Qa.satisfaction},void 0,n.renderIntroduction(),n.renderRating(),n.renderQuestions())})),A()(b()(n),"renderCompleted",(function(){var e=n.props.session.get("satisfactionLockedAt"),t=e&&Date.parse(e),a=Date.now()<t;return r()("div",{style:Qa.completed},void 0,r()("i",{style:Qa.completedIcon}),r()("div",{style:Qa.completedText},void 0,o.a.createElement(S.a,Va.feedback_thanks)),a&&r()("a",{tabIndex:"0",style:Qa.completedEditButton,onKeyPress:n.handleEditKeyPress,onClick:n.handleEdit},void 0,o.a.createElement(S.a,Va.edit)))})),A()(b()(n),"renderMessageColumn",(function(){var e=n.props.session,t=n.state.editing,a="commented"===e.get("satisfactionStatus"),i=e.get("satisfactionSubmittedAt");return r()("div",{className:"userMessage kustomer-app-thread-user-message",style:Object.assign({},ga.message,Qa.message)},void 0,!i||(a||i)&&t?n.renderForm():n.renderCompleted())})),A()(b()(n),"renderAvatarColumn",(function(){var e=n.props.company;return e?r()("div",{style:ga.userAvatar},void 0,r()(Re,{avatarUrl:e.avatarUrl,defaultName:e.name})):null})),n._questionsDOMNode=null,n.debouncedUpdateSessionState=Object(Ut.c)(n.updateSessionState,1e3),n.state={answers:Ya()(x()(e.sessionState,"answers"),"id"),rating:x()(e.sessionState,"rating")||null,editing:!1},n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){(0,this.props.onScrollToBottom)()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.onScrollToBottom,r=n.onScrollToDOMNode;!e.form.get("id")&&this.props.form.get("id")&&a();var i=null!==this.state.rating;null===t.rating&&i?r(this._questionsDOMNode):(t.editing!==this.state.editing&&a(),!e.sessionState&&this.props.sessionState&&this.setState({answers:Ya()(x()(this.props.sessionState,"answers"),"id"),rating:x()(this.props.sessionState,"rating")||null}))}},{key:"render",value:function(){var e=this.props,t=e.sessionId,n=e.form;return t&&n.get("id")?r()("div",{style:ga.wrapper},void 0,this.renderAvatarColumn(),this.renderMessageColumn()):null}}]),t}(i.PureComponent);Ka.defaultProps={form:{}};var qa=Object(T.a)(Ka),$a=Object(S.e)(qa,{withRef:!0}),er=Object(s.b)((function(){var e=Object(Z.ab)(),t=Object(Z.V)();return function(n){var a=Object(Z.c)(n),r=a.get("satisfactionId");return{company:Object(Z.l)(n),session:a,sessionId:a.get("id"),sessionState:e(n,a.id),responseId:r,form:t(n,r)}}}),(function(e){return{submit:function(t,n,a){e(Ze.G({id:t,satisfactionStatus:"commented",satisfactionSubmittedAt:a.submittedAt})),Ze.nb(n,a)},submitRating:function(t,n,a){e(Ze.G({id:t,satisfactionStatus:"rated"})),Ze.nb(n,a)},updateState:function(t,n){e(Ze.rb(t,n))},clearState:function(t){e(Ze.jb(t))}}}))($a),tr=Object(S.d)({aria_label_after_hours:{id:"kustomer.chat.conversation.thread.aria.label.after.hours",defaultMessage:"After hours"}}),nr=r()(Ra,{}),ar=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"handleMaybeFetchSatisfactionForm",(function(){var e=n.props.session;e&&!!e.get("satisfactionId",{})&&n.props.fetchSatisfactionForm(e.id)})),A()(b()(n),"renderSatisfactionSurvey",(function(){var e=n.props,t=e.isLocked,a=e.session,i=a&&a.get("satisfactionId",{});return t&&i?r()("div",{style:Dn.messagesContainer},void 0,r()(er,{onScrollToBottom:n.handleScrollToBottom,onScrollToDOMNode:n.handleScrollToDOMNode})):null})),A()(b()(n),"renderTypingIndicator",(function(){var e=n.props,t=e.typingStatus,a=e.session;return t&&"typing-ended"!==t?r()(wa,{session:a}):null})),A()(b()(n),"renderMessagesContainer",(function(){return r()("div",{},void 0,nr,r()("div",{style:Dn.messagesContainer},void 0,n.renderThread(),n.renderTypingIndicator()))})),A()(b()(n),"renderMobileConversationThread",(function(){var e=n.props,t=e.isAfterHours,a=e.offlineImageUrl,i=e.messages,o=e.intl,s=e.isLocked;return r()(kn.a,{component:"div",style:t&&!i.size?xn(a):Dn.mobileScrollContainer,provideControllers:n.storeScrolledControllers,onScroll:n.handleScroll,stayInaccuracy:100,_provideDOMNode:n.storeDOM,className:"kustomer-app-thread",tabIndex:"0","aria-label":t&&!i.size?o.formatMessage(tr.aria_label_after_hours):""},void 0,r()("div",{style:Dn.mobileMessagesContainer},void 0,n.renderMessagesContainer(),r()(Wa,{isLocked:s}),n.renderSatisfactionSurvey()))})),n.storeScrolledControllers=n.storeScrolledControllers.bind(b()(n)),n.handleScroll=n.handleScroll.bind(b()(n)),n.handleScrollToBottom=n.handleScrollToBottom.bind(b()(n)),n.handleScrollToDOMNode=n.handleScrollToDOMNode.bind(b()(n)),n.storeDOM=n.storeDOM.bind(b()(n)),n.stayScrolled=function(){},n.scrollDOM=null,n.messageDOMRefs=[],n.debouncedScrollHandler=Object(Ut.c)((function(){e.onScroll()}),1e3,!0),n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.handleMaybeFetchSatisfactionForm()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.session,a=t.messages,r=t.scrollToMessageId,i=t.resetScrollToMessageId,o=t.isVolumeControl,s=t.isLocked;if(!e.session.get("id")&&n.get("id")&&this.handleMaybeFetchSatisfactionForm(),o)this.stayScrolled();else if(r){var u=this.messageDOMRefs[r];u&&u.scrollIntoView(),i()}else(e.messages.size<a.size||e.isLocked!==s)&&this.scrollBottom()}},{key:"storeScrolledControllers",value:function(e){var t=e.stayScrolled,n=e.scrollBottom;this.stayScrolled=t,this.scrollBottom=n}},{key:"handleScroll",value:function(){this.scrollDOM.scrollTop<100&&this.debouncedScrollHandler()}},{key:"handleScrollToBottom",value:function(){this.scrollBottom&&this.scrollBottom()}},{key:"handleScrollToDOMNode",value:function(e){e&&e.scrollIntoView()}},{key:"storeDOM",value:function(e){this.scrollDOM=e}},{key:"renderThread",value:function(){var e=this,t=this.props,n=t.messages,a=t.retryMessageSend,i=n.toList();return i.map((function(t,n){var o=n>0?i.get(n-1):null,s=o&&o.sentBy.id===t.sentBy.id,u=n===i.size-1;return r()(Oa,{isLastMessageInSession:u,message:t,short:s,provideDOMNode:function(n){e.messageDOMRefs[t.id]=n},onRetry:a},t.id)}))}},{key:"render",value:function(){var e=this.props,t=e.isAfterHours,n=e.offlineImageUrl,a=e.messages,i=e.intl,o=e.isLocked;return Object(Ut.f)()?this.renderMobileConversationThread():r()(kn.a,{component:"div",style:t&&!a.size?xn(n):Dn.alley,provideControllers:this.storeScrolledControllers,onScroll:this.handleScroll,stayInaccuracy:100,_provideDOMNode:this.storeDOM,className:"kustomer-app-thread",tabIndex:"0","aria-label":t&&!a.size?i.formatMessage(tr.aria_label_after_hours):""},void 0,this.renderMessagesContainer(),r()(Wa,{isLocked:o}),this.renderSatisfactionSurvey())}}]),t}(i.PureComponent);ar.defaultProps={messages:bt.a.OrderedSet(),session:null,scrollToMessageId:null,isVolumeControl:!1,onScroll:function(){},resetScrollToMessageId:function(){},retryMessageSend:function(){},isLocked:!1,typingStatus:void 0};var rr=Object(S.e)(ar,{withRef:!0}),ir=Object(s.b)((function(e){var t=Object(Z.c)(e);return{session:t,isLocked:Object(Z.n)(e)&&Object(Z.S)(e,t.id),isAfterHours:Object(Z.jb)(e),offlineImageUrl:Object(Z.kb)(e),messages:Object(Z.g)(e),scrollToMessageId:Object(Z.C)(e),typingStatus:Object(Z.h)(e)}}),(function(e){return{fetchSatisfactionForm:function(t){e(Object(Ze.fb)(t))},onScroll:function(){e(Object(Ze.T)())},resetScrollToMessageId:function(){e(Object(Ze.I)())},retryMessageSend:function(t){e(Object(en.f)(t))}}}))(rr),or=n("zNGB"),sr=n("peh1"),ur=function(e){return e.getIn(["chat","describe","email","success"],!1)},cr=function(e){return e.getIn(["chat","describe","email","address"],!1)},lr=Object(sr.createSelector)([function(e){return e.getIn(["chat","describe","show"],!1)},Z.Q,Z.b,Z.s],(function(e,t,n,a){return e&&a&&t&&!n})),dr={input:{border:"1px solid transparent",borderColor:"#4EB96F",outline:"none",padding:"5px 10px",borderRadius:12,display:"inline",borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,flex:1,margin:0},submit:{border:"1px solid transparent",borderColor:"rgb(78, 185, 111)",padding:"0 2px 1px 1px",borderLeft:"none",background:"#fff",borderTopRightRadius:"15px",borderBottomRightRadius:"15px",flex:0,display:"flex"},submitIcon:{background:"url('".concat(q,"') #4EB96F"),backgroundSize:12,backgroundRepeat:"no-repeat",backgroundPosition:"3px",height:18,width:18,borderRadius:25,marginTop:2,cursor:"pointer"},submitError:{borderColor:"#FF655D"},submitErrorIconWrap:{borderColor:"#FF655D",pointerEvents:"none"},submitErrorIcon:{opacity:.5}},pr=Object(S.d)({aria_label_input_email:{id:"kustomer.chat.input.with.submit.aria.label.input.email",defaultMessage:"Input email"},aria_label_submit_email:{id:"kustomer.chat.input.with.submit.aria.label.submit.email",defaultMessage:"Submit email"}}),gr=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"handleSubmit",(function(){var e=n.props,t=e.onSubmit,a=e.value;n._input&&Object(Ut.f)()&&n._input.blur(),t(a)})),A()(b()(n),"handleKeyPress",(function(e){D(e)&&(e.preventDefault(),n.handleSubmit())})),n._input={blur:function(){}},n}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onChange,a=t.placeholder,i=t.style,s=t.value,u=t.error,c=t.intl;return r()("div",{style:i},void 0,o.a.createElement("input",{style:u?Object.assign({},dr.input,dr.submitError):dr.input,type:"text",onChange:n,value:s,placeholder:u||a,onKeyPress:this.handleKeyPress,"aria-label":c.formatMessage(pr.aria_label_input_email),className:"inputWithSubmit kustomer-app-email-banner-input",ref:function(t){e._input=t}}),r()("div",{tabIndex:"0",className:"inputWithSubmitIcon kustomer-app-email-banner-icon",style:u?Object.assign({},dr.submit,dr.submitErrorIconWrap):dr.submit,onClick:this.handleSubmit,onKeyPress:this.handleKeyPress,role:"button","aria-label":c.formatMessage(pr.aria_label_submit_email)},void 0,r()("div",{style:u?Object.assign({},dr.submitIcon,dr.submitErrorIcon):dr.submitIcon})))}}]),t}(i.Component);gr.defaultProps={onChange:function(){},onSubmit:function(){},placeholder:"",style:{},value:"",error:""};var fr=Object(S.e)(gr),hr={successWrapper:{background:"#4EB96F",height:"100%",color:"#fff",fontSize:"13px",display:"flex"},success:{margin:"auto",display:"inline-block",textAlign:"center",padding:"10px 10px"},inputWrapper:{padding:15,fontSize:"13px",display:"flex",flexDirection:"column",position:"relative"},title:{color:"#717070"},input:{marginTop:10,display:"flex",background:"#fff",borderRadius:"12px"}},mr=Object(S.d)({title:{id:"kustomer.chat.describe.email.title",defaultMessage:"Don't miss a response! Get notified by email:"},placeholder:{id:"kustomer.chat.describe.email.placeholder",defaultMessage:"example@domain.com"},success_message:{id:"kustomer.chat.describe.email.success",defaultMessage:"Thanks! We'll update you here and by email to"},failure_message:{id:"kustomer.chat.describe.email.failure",defaultMessage:"Please enter a valid email"}}),Ir=r()("br",{}),br=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"handleEmailChange",(function(e){n.setState({error:"",email:e.target.value})})),A()(b()(n),"handleSubmit",(function(e){var t=n.props,a=t.submit,r=t.intl;mn(e)?(n.setState({error:""}),a(e)):n.setState({email:"",error:r.formatMessage(mr.failure_message)})})),n.state={email:"",error:""},n}return y()(t,e),p()(t,[{key:"renderSuccess",value:function(){var e=this.props.emailAddress;return r()("div",{className:L,style:hr.successWrapper},void 0,r()("div",{className:_,style:hr.success},void 0,o.a.createElement(S.a,mr.success_message),Ir,e))}},{key:"renderInput",value:function(){var e=this.props.intl,t=this.state,n=t.email,a=t.error;return r()("div",{style:hr.inputWrapper,className:"kustomer-app-email-banner"},void 0,r()("div",{className:"describeEmailTitle kustomer-app-email-banner-label",style:hr.title},void 0,o.a.createElement(S.a,mr.title)),r()(fr,{style:hr.input,placeholder:e.formatMessage(mr.placeholder),onChange:this.handleEmailChange,onSubmit:this.handleSubmit,value:n,error:a}))}},{key:"renderInputOrSuccess",value:function(){return this.props.success?this.renderSuccess():this.renderInput()}},{key:"render",value:function(){return this.renderInputOrSuccess()}}]),t}(i.PureComponent);br.defaultProps={success:!1,emailAddress:"",submit:function(){}};var vr=Object(S.e)(br,{withRef:!0}),yr=Object(s.b)((function(e){return{success:ur(e),emailAddress:cr(e)}}),(function(e){return{submit:function(t){return e(or.d(t))}}}))(vr),Cr={wrapper:{background:"#F4F6F7",borderBottom:"1px solid #E4E7EA"}},Ar=r()(yr,{}),Mr=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"UNSAFE_componentWillMount",value:function(){(0,this.props.init)()}},{key:"render",value:function(){return this.props.show?r()("div",{className:"emailBanner kustomer-app-email-banner-container",style:Cr.wrapper},void 0,Ar):null}}]),t}(i.PureComponent);Mr.defaultProps={show:!1,init:function(){}};var wr=Object(s.b)((function(e){return{show:lr(e)}}),(function(e){return{init:function(){return e(or.e())}}}))(Mr),kr=n("WGix"),xr={container:{flex:"0 0 auto",display:"flex",flexDirection:"column",backgroundColor:"#F8FAFD",alignItems:"center",justifyContent:"center",padding:"10px 0 15px",height:"75px"},alertIcon:{backgroundPosition:"center center",backgroundImage:'url("'.concat(re,'")'),backgroundRepeat:"no-repeat",backgroundSize:"contain",minHeight:"20px",width:"20px",marginBottom:"5px"},text:{maxWidth:"67.666%",fontSize:"12px",color:"#717070",textAlign:"center",textTransform:"uppercase",fontWeight:500}},Dr=Object(S.d)({warningText:{id:"kustomer.chat.offlineWarning",defaultMessage:"You are offline and may not be able to send or receive messages"}}),Nr=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){return this.props.online?null:r()("div",{style:xr.container},void 0,r()("div",{style:xr.alertIcon}),r()("span",{style:xr.text},void 0,o.a.createElement(S.a,Dr.warningText)))}}]),t}(o.a.PureComponent);Nr.defaultProps={online:!0};var jr=Object(s.b)((function(e){return{online:Object(kr.d)(e)}}))(Nr),Tr=n("94TQ"),Sr={},Or=r()("div",{}),Pr=function(e){function t(e){var n;return l()(this,t),(n=f()(this,m()(t).call(this,e))).pollerForQueue=null,n.pollerForEstimatedWaitTime=null,n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.maybeStartPollerForQueue()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.sessionId,a=t.vcFormTriggered,r=t.clearQueueEntities;"new"!==n&&"new"===e.sessionId&&this.maybeStartPollerForQueue(),a&&!e.vcFormTriggered&&(this.stopPolling(),r())}},{key:"componentWillUnmount",value:function(){this.pollerForQueue&&clearTimeout(this.pollerForQueue),this.stopPolling()}},{key:"maybeStartPollerForQueue",value:function(){var e=this.props,t=e.isLocked,n=e.sessionId,a=e.upfrontVolumeControlEnabled,r=e.vcFormTriggered;t||"new"===n||!a||r||this.pollForQueue()}},{key:"startQueuePolling",value:function(){var e=this;this.pollerForEstimatedWaitTime=new Tr.a({task:function(t){return e.pollQueue(t)},defaultInterval:1e4}),this.pollerForEstimatedWaitTime.start()}},{key:"stopPolling",value:function(){this.pollerForEstimatedWaitTime&&this.pollerForEstimatedWaitTime.stop()}},{key:"updateInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr;if(!this.pollerForEstimatedWaitTime&&!this.pollerForEstimatedWaitTime.setMaxInterval)return Sr;var t=e.estimatedWaitTime,n=t/60;return 0===n?(this.pollerForEstimatedWaitTime.stop(),e):(n<6e4?this.pollerForEstimatedWaitTime.setMaxInterval(6e3):n>6e4&&n<3e5?this.pollerForEstimatedWaitTime.setMaxInterval(3e4):n>3e5&&n<6e5?this.pollerForEstimatedWaitTime.setMaxInterval(6e4):this.pollerForEstimatedWaitTime.setMaxInterval(),e)}},{key:"pollForQueue",value:function(){var e=this,t=this.props,n=t.fetchQueue,a=t.sessionId,r=0;this.pollerForQueue=function(){return setTimeout((function(){return n(a).then((function(){return e.startQueuePolling()})).catch((function(){3e3*r<6e4&&(r+=1,e.pollerForQueue())}))}),3e3)},this.pollerForQueue()}},{key:"pollQueue",value:function(){var e=this,t=this.props,n=t.pollQueue;return n(t.sessionId).then(this.updateInterval.bind(this)).catch((function(){e.stopPolling()}))}},{key:"render",value:function(){return Or}}]),t}(o.a.PureComponent);Pr.defaultProps={sessionId:"new",isLocked:!1,upfrontVolumeControlEnabled:!1,vcFormTriggered:!1};var Er=Object(s.b)((function(e){var t=Z.e(e);return{upfrontVolumeControlEnabled:Z.M(e),isLocked:Z.S(e,t),vcFormTriggered:!!Object(Bt.a)("input-disabled-".concat(t)),sessionId:t}}),(function(e){return{fetchQueue:function(t){return e(Ze.Q(t))},pollQueue:function(t){return e(Ze.ib(t))},clearQueueEntities:function(){return e(Ze.L())}}}))(Pr),Lr=r()(wn,{}),_r=r()(pn,{}),zr=r()(Er,{}),Rr=r()(wr,{}),Zr=r()(jr,{}),Ur=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.props.sessionId&&(gt.b.subscribeToChatActivityChannel(),gt.b.subscribeToCustomerPresenceChannel())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.sessionId,n=x()(e,"sessionId");t&&n!==t&&(gt.b.subscribeToChatActivityChannel(),gt.b.subscribeToCustomerPresenceChannel())}},{key:"componentWillUnmount",value:function(){gt.b.unsubscribeFromChatActivityChannel()}},{key:"renderInputForState",value:function(){return this.props.isVolumeControl?Lr:_r}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.hasAgent,a=e.sessionId,i=e.isVolumeControl;return a?r()("div",{style:{height:"".concat(96,"%"),display:"flex",flexDirection:"column"}},void 0,zr,r()(Zt,{onCloseClick:t,expanded:"new"===a,hasAgent:n}),Rr,r()(ir,{isVolumeControl:i}),Zr,this.renderInputForState()):null}}]),t}(i.PureComponent);Ur.defaultProps={sessionId:null,handleClose:function(){},hasAgent:!1,isVolumeControl:!1,isLocked:!1};var Gr=Object(s.b)((function(e,t){return{sessionId:Z.e(e),hasAgent:Z.O(e),isVolumeControl:Z.f(e,t)}}),(function(e){return{handleClose:function(){e(R.k())},handleThreadScroll:function(){e(Ze.T())}}}))(Ur),Wr=n("o0o1"),Br=n.n(Wr),Fr=n("yXPU"),Hr=n.n(Fr),Yr=n("RIqP"),Qr=n.n(Yr),Vr=n("J2m7"),Jr=n.n(Vr),Xr=n("RBan"),Kr=n.n(Xr),qr=n("k4Da"),$r=n.n(qr),ei=n("GtlU"),ti=n.n(ei),ni=n("7UJJ"),ai=n("pkk+"),ri=Object(S.d)({aria_label_send_message:{id:"kustomer.chat.form.input.enter.aria.label.send.message",defaultMessage:"Send message"}}),ii=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"handleKeyPress",(function(e){var t=n.props,a=t.onClick,r=t.disabled;D(e)&&!r&&(e.preventDefault(),e.stopPropagation(),a())})),A()(b()(n),"handleSubmit",(function(){var e=n.props,t=e.onClick;e.disabled||t()})),n}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.tabIndex,n=e.className,a=e.intl;return r()("div",{style:sn.enter,className:n,onClick:this.handleSubmit,onKeyPress:this.handleKeyPress,tabIndex:t,role:"button","aria-label":a.formatMessage(ri.aria_label_send_message)},void 0,r()("div",{style:sn.enterIcon}))}}]),t}(o.a.PureComponent);ii.defaultProps={disabled:!1,className:null,tabIndex:null};var oi=Object(S.e)(ii),si={container:{display:"flex",flexWrap:"wrap",flexDirection:"column"},submit:{marginLeft:"auto",position:"relative"},top:{padding:"5px 10px",overflowY:"scroll",maxHeight:175},bottom:{display:"flex",padding:"5px 10px",alignItems:"center",borderTop:"1px solid transparent",borderBottom:"1px solid transparent"},arrowPlain:{margin:"0 5px",flex:"0 0 auto",backgroundImage:'url("'.concat(Y,'")'),backgroundRepeat:"no-repeat",backgroundSize:"8px",transform:"rotate(180deg)",height:"8px",width:"8px"},breadcrumb:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:"0 1 auto",transition:"color ".concat("150ms"," ").concat("ease-in-out")},breadcrumbWrap:{display:"flex",alignItems:"center",padding:"10px",flex:"0 0 auto",fontSize:"12px",color:"rgb(49, 63, 72)",maxWidth:"315px"}},ui=Object(S.d)({prompt:{id:"kustomer.chat.form.mll.prompt",defaultMessage:"Please select an item"},submitBtn:{id:"kustomer.chat.form.mll.submit",defaultMessage:"Submit"},breadcrumbHome:{id:"kustomer.chat.form.mll.breadcrumb.home",defaultMessage:"Home"},inputPlaceholder:{id:"kustomer.chat.form.mll.input.placeholder",defaultMessage:"Please select an item"},aria_label_breadcrumb:{id:"kustomer.chat.form.mll.aria.label.breadcrumb.1",defaultMessage:"{displayName} breadcrumb"}}),ci=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(i))),A()(b()(n),"handleNodeSelect",(function(e){(0,n.props.nodeSelect)(e)})),A()(b()(n),"handleKeyPress",(function(e,t){var a=n.props.nodeSelect;D(t)&&(t.preventDefault(),t.stopPropagation(),a(e))})),A()(b()(n),"handleSubmit",(function(){var e=n.props,t=e.onSubmit,a=e.breadcrumbs;t(a.map((function(e){return e.id})).join("."),x()(Kr()(a),"displayName"))})),A()(b()(n),"handleLastEnumButtonClick",(function(e,t){(0,n.props.onSubmit)(e,t)})),A()(b()(n),"renderBreadcrumbHeader",(function(){var e=n.props,t=e.intl;return e.parent?r()("span",{style:si.breadcrumbWrap,className:"kustomer-app-reply-input-option-preview"},"breadcrumbs",r()("span",{onClick:function(){return n.handleNodeSelect(null)},onKeyPress:function(e){return n.handleKeyPress(null,e)},className:"treePicker-homeNode",tabIndex:"0"},void 0,t.formatMessage(ui.breadcrumbHome)),r()("span",{style:si.arrowPlain}),n.renderBreadcrumbs()):r()("span",{style:si.breadcrumbWrap},"breadcrumbs",r()("span",{},void 0,t.formatMessage(ui.prompt)))})),A()(b()(n),"renderBreadcrumbs",(function(){var e=n.props,t=e.breadcrumbs,a=e.intl;return jn()(t)?(jn()(t)>2?ti()(t,2):t).map((function(e,t,i){return[r()("span",{role:"button","aria-label":a.formatMessage(ui.aria_label_breadcrumb,{displayName:e.displayName}),onClick:function(){return n.handleNodeSelect(e.id)},onKeyPress:function(t){return n.handleKeyPress(e.id,t)},tabIndex:"0",style:si.breadcrumb,title:e.displayName,className:"treePicker-breadcrumb"},e.id,e.displayName),t+1<jn()(i)&&r()("span",{style:si.arrowPlain},"breadcrumb-arrow-".concat(e.id))]})):null})),A()(b()(n),"renderMenu",(function(){var e=n.props,t=e.tree,a=e.parent||t;return r()("div",{style:si.top},void 0,a.children&&a.children.map((function(e){if(e.deleted)return null;var t=x()(e,"children"),a=$r()(t,(function(e){return!e.deleted}));return r()(Jt,{onClick:jn()(a)>0?n.handleNodeSelect:n.handleLastEnumButtonClick,displayName:e.displayName,value:e.id},e.id)})))})),A()(b()(n),"renderSubmit",(function(){var e=n.props.canSubmit;return r()("div",{style:si.submit},void 0,r()(oi,{disabled:!e,className:"enterIcon kustomer-app-reply-input-enter-button",onClick:function(){return n.handleSubmit()},tabIndex:"0"}))})),n}return y()(t,e),p()(t,[{key:"UNSAFE_componentWillMount",value:function(){(0,this.props.init)()}},{key:"render",value:function(){return r()("div",{style:si.container},void 0,this.renderMenu(),r()("div",{style:si.bottom},void 0,this.renderBreadcrumbHeader(),this.renderSubmit()))}}]),t}(o.a.PureComponent);ci.defaultProps={canSubmit:!1,tree:{},breadcrumbs:[],parent:null};var li=Object(S.e)(Object(T.a)(ci),{withRef:!0}),di=Object(s.b)((function(e,t){var n=x()(t,"property","");return{tree:ai.d(e,n).tree,canSubmit:ai.b(e),breadcrumbs:ai.a(e),parent:ai.c(e)}}),(function(e,t){return{init:function(){var n=x()(t,"property","");e(ni.g(n)),e(ni.e())},nodeSelect:function(t,n){e(ni.f(t,n))}}}))(li),pi={btnContainer:{display:"flex",flexWrap:"wrap"}},gi=Object(S.d)({placeholder_inHours:{id:"kustomer.chat.form.input.placeholder.inHours",defaultMessage:"Type a message..."},placeholder_afterHours:{id:"kustomer.chat.form.input.placeholder.afterHours",defaultMessage:"Leave a message..."}}),fi=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(i))),A()(b()(n),"state",{body:""}),A()(b()(n),"_input",{focus:function(){}}),A()(b()(n),"handleKeyPress",(function(e){return D(e)&&(e.preventDefault(),e.stopPropagation(),n.handleSubmit()),!1})),A()(b()(n),"handleChange",(function(e){n.setState({body:e.target.value})})),A()(b()(n),"handleSubmit",(function(){var e=n.props.disabled,t=n.state.body,a=Ut.a(t);!e&&a&&(n.props.onSubmit({body:a}),n.setState({body:""}),Ut.f()?n._input.blur():n._input.focus())})),A()(b()(n),"handleButtonClick",(function(e,t,a){n.props.onSubmit({value:e,displayName:t,endChat:a})})),A()(b()(n),"renderValueSelect",(function(){var e=n.props.values;return e&&e.length?r()("div",{style:pi.btnContainer},void 0,e.map((function(e,t){return r()(Jt,{onClick:n.handleButtonClick,displayName:e.displayName,endChat:e.endChat,value:e.value},"".concat(e.value,"-").concat(t))}))):null})),A()(b()(n),"renderInput",(function(){var e=n.props,t=e.values,a=e.error,i=e.isAfterHours,s=e.intl;return t&&t.length?null:[o.a.createElement(Yt,{key:"input-expanding",ref:function(e){return n._input=e},placeholder:a||(i?s.formatMessage(gi.placeholder_afterHours):s.formatMessage(gi.placeholder_inHours)),onKeyPress:n.handleKeyPress,value:n.state.body,onChange:n.handleChange,tabIndex:"0",error:a}),r()(oi,{className:"enterIcon kustomer-app-reply-input-enter-button",onClick:n.handleSubmit,tabIndex:"0"},"input-enter")]})),A()(b()(n),"renderMLLPicker",(function(){var e=n.props.property;return r()("div",{className:"messageInputWrap kustomer-app-reply-input-option-prompt",style:sn.wrapperMll},void 0,r()(di,{onSubmit:n.handleButtonClick,property:e}))})),n}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.values;return e.isMLL?this.renderMLLPicker():r()("div",{className:"messageInputWrap kustomer-app-reply-input-option-prompt",style:[[jn()(n)?sn.wrapperTeam:sn.wrapper],sn[t?"hasError":null]]},void 0,this.renderInput(),this.renderValueSelect())}}]),t}(o.a.PureComponent);fi.defaultProps={values:null,error:null,isMLL:!1,property:""};var hi=Object(T.a)(fi),mi=Object(S.e)(hi,{withRef:!0}),Ii={articleContainer:{padding:"5px 16px 25px",backgroundColor:"#FFFFFF"}},bi=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.article;return jn()(e)?r()("div",{style:Ii.articleContainer,className:"kb-article"},void 0,r()("h3",{},void 0,x()(e,"title")),r()("div",{dangerouslySetInnerHTML:{__html:x()(e,"htmlBody")}},"border")):null}}]),t}(i.PureComponent);bi.defaultProps={article:{}};var vi=bi,yi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;if(!e)return n;try{var r=e.split(" ").length,i=r/t*3e4+a;return i>n?n:i}catch(e){return n}},Ci=function(e){return!!/_custom_/.test(e)&&"Num"===e.substring(e.length-3)},Ai={container:{flex:"1 1 auto",display:"flex",flexDirection:"column",backgroundColor:"#F8FAFD",overflowY:"auto"},articleContainer:{height:"100%",width:"100%",backgroundColor:"white",overflowY:"scroll"},articleContainerClosed:{height:"0"},scrollContainer:{flex:"1 1 auto",overflowY:"auto",overflowX:"hidden",position:"relative"},iconContainer:{display:"flex",justifyContent:"flex-end",zIndex:1,background:"#fff",paddingRight:"14px",paddingTop:"20px",paddingBottom:"20px",width:"100%",alignItems:"center",cursor:"pointer"},collapseIcon:{backgroundImage:'url("'.concat(Q,'")'),backgroundRepeat:"no-repeat",backgroundSize:"16px",height:"16px",width:"16px"},messagesContainer:{padding:"5px 16px 25px"},mobileScrollContainer:{flex:"1 1 auto",display:"flex",flexDirection:"column",backgroundColor:"#F8FAFD",overflowY:"auto",justifyContent:"flex-end",position:"relative"},mobileMessageContainer:{padding:"5px 16px 25px",minHeight:0,width:"100%"},mobileInputContainer:{marginTop:"20px"},wrapperDisabled:{padding:"10px",background:"".concat("#F8FAFD"),boxShadow:"0 -8px 15px 0 ".concat("rgba(0,0,0,0.06)"),textAlign:"center"},disabledText:{color:"#717070",fontWeight:"500",fontSize:"13px"}},Mi=function(e){return{flex:"1 1 auto",overflowY:"auto",overflowX:"hidden",backgroundPosition:"center 33.333%",backgroundImage:'url("'.concat(e||ae,'")'),backgroundRepeat:"no-repeat"}},wi=Ai,ki=Object(S.d)({placeholder_error_phone:{id:"kustomer.chat.form.placeholder.error.phone.1",defaultMessage:"Please enter a valid phone number with a country code"},placeholder_error_number:{id:"kustomer.chat.form.placeholder.error.number",defaultMessage:"Please enter a valid number..."},placeholder_error_email:{id:"kustomer.chat.form.placeholder.error.email",defaultMessage:"Please enter a valid email address, e.g. yourname@example.com."},submit_error:{id:"kustomer.chat.form.placeholder.error.submit",defaultMessage:"We're very sorry but there was an error with your message. Please try again later."},thank_you_message:{id:"kustomer.chat.form.thank.you.message",defaultMessage:"Thank you for contacting us!"}});function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(n,!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ni=function(e){var t={};return t.type=e.sentBy,"user"===e.sentBy&&(t.id="__team"),{id:e.id,body:e.body,input:e.input,inputAt:e.inputAt,type:e.type,prompt:e.prompt,promptAt:e.promptAt,property:e.property,values:e.values,sentBy:t,query:e.query,hasResults:e.hasResults,noResults:e.noResults,followUpPrompt:e.followUpPrompt}},ji=r()(jr,{}),Ti=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(i))),A()(b()(n),"state",{questions:n.props.questions,messages:[],responses:[],waiting:!1,error:null,deflectionForm:{selectedArticle:null,status:null,query:null,running:!1,deflectedAt:null}}),A()(b()(n),"observer",void 0),A()(b()(n),"scrollContainerRef",void 0),A()(b()(n),"observerCallback",(function(e,t){var n=x()(e,0);n&&!n.inView&&(n.target.scrollIntoView(),t.unobserve(n.target))})),A()(b()(n),"handleSelectedArticle",(function(e){n.setState((function(t){return{deflectionForm:Di({},t.deflectionForm,{selectedArticle:e})}}))})),A()(b()(n),"init",(function(){var e=n.props,t=e.questions,a=e.requestTeams,r=Jr()(t,(function(e){return"conversation_team"===e.property})),i=x()(r,"values");return!(!i||!i.length)&&a(i.join(","))})),A()(b()(n),"handleNextMessage",(function(){var e=n.props.delay.delay,t=n.state.questions;n.setState({waiting:!0});var a=x()(t,0),r=x()(a,"prompt"),i=yi(r,80,e),o=x()(a,"type");return"kbDeflect"!==o&&"articleList"!==o||n.setState((function(e){return{deflectionForm:Di({},e.deflectionForm,{running:!0})}})),setTimeout((function(){n.setState((function(e){var t=n.state.deflectionForm,a=Qr()(e.questions),r=a.shift(),i=Qr()(e.messages),o=(new Date).toISOString();if(r&&"accepted"!==t.status){var s=new Ni({id:r.id,body:r.prompt,prompt:r.prompt,promptAt:o,sentBy:"user",property:r.property,type:r.type,values:r.values});i.push(s)}return{questions:a,messages:i}}),(function(){var e=n.state,a=e.messages,r=e.deflectionForm,i=a[a.length-1];return 0===t.length||"accepted"===r.status?n.submit():r.running?n.setState({waiting:!1}):"message"===i.type?n.handleNextMessage():n.setState({waiting:!1})}))}),i)})),A()(b()(n),"handleResponse",(function(e){var t=e.body,a=e.value,r=e.displayName,i=e.proactive,o=e.endChat,s=e.skip,u=(new Date).toISOString();if(a||s||o)n.setState((function(e){var t,n=e.messages,i=e.deflectionForm,c=Qr()(e.responses),l=x()(n,[n.length-1]),d=l.id,p=l.property,g=new Ni({property:p,body:r,sentBy:"customer",id:d,input:r,value:a});return c.push({value:a,id:l.id,inputAt:u,input:r}),n.push(g),i.running?(t=o?"accepted":s?"no-match":"rejected",{responses:c,messages:n,deflectionForm:Di({},e.deflectionForm,{status:t,deflectedAt:(new Date).toISOString(),running:!1})}):{responses:c,messages:n}}),n.handleNextMessage);else{var c=n.hasErrorMessage(t);c?n.setState({error:c}):n.setState((function(e){var a=Qr()(e.messages),r=Qr()(e.responses),o=a[a.length-1],s=x()(o,"type"),c=e.deflectionForm;if(o&&r.push({input:t,id:o.id,inputAt:u}),!i){var l=new Ni({body:t,inputAt:u,sentBy:"customer",id:o?o.id:null});a.push(l)}if("kbDeflect"===s){var d=n.props.questions.find((function(e){return e.id===o.id})),p=d&&d.inputResponses,g=d&&d.followUpPrompt,f=new Ni({type:"articleList",sentBy:"user",query:t,followUpPrompt:g,hasResults:p.find((function(e){return!0===e.hasResults})),noResults:p.find((function(e){return!1===e.hasResults})),values:o.values});a.push(f)}return c.running?{error:null,messages:a,responses:r,deflectionForm:Di({},e.deflectionForm,{query:t})}:{error:null,messages:a,responses:r}}),(function(){var e=n.state,t=e.questions,a=e.deflectionForm,r=n.props.questions,o=t.length===r.length;(1===n.state.messages.length||o&&i)&&n.props.handleOnStart(),a.running||n.handleNextMessage()}))}})),A()(b()(n),"submit",Hr()(Br.a.mark((function e(){var t,a,r,i,o;return Br.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.intl,a=n.state.deflectionForm,r={status:a.status,query:a.query,deflectedAt:a.deflectedAt},e.prev=3,e.next=6,n.props.onSubmit(n.state.messages,n.state.responses,r);case 6:return e.abrupt("return",n.props.routeToConversation());case 9:e.prev=9,e.t0=e.catch(3),i=t.formatMessage(ki.submit_error),o=new Ni({sentBy:"user",body:i}),n.setState({questions:[],messages:[o],responses:[],waiting:!1,error:null});case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})))),A()(b()(n),"hasErrorMessage",(function(e){var t=n.props.intl,a=n.state.messages;if(!a.length||!e)return"";var r=a[a.length-1];if(!r)return"";var i=x()(r,"property");return"customer_phone"!==i||In(e)?Ci(i)&&!bn(e)?t.formatMessage(ki.placeholder_error_number):"customer_email"!==i||mn(e)?"":t.formatMessage(ki.placeholder_error_email):t.formatMessage(ki.placeholder_error_phone)})),A()(b()(n),"renderMessages",(function(){var e=n.state.messages;return e.map((function(t,a){var r=a===e.length-1;return o.a.createElement("div",{ref:function(e){r&&e&&window.IntersectionObserver&&n.observer.observe(e)},key:a},n.renderFormMessage(t),n.renderCustomerMessage(t))}))})),A()(b()(n),"renderFormMessage",(function(e){return x()(e,"sentBy.type")&&"customer"!==e.sentBy.type?r()(Oa,{message:e,onSelectArticle:n.handleSelectedArticle,onHandleResponse:n.handleResponse}):null})),A()(b()(n),"renderCustomerMessage",(function(e){return x()(e,"sentBy.type")&&"user"!==e.sentBy.type?r()(Oa,{message:e}):null})),n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.formPrefill,n=e.proactive;return this.init(),window.IntersectionObserver&&(this.observer=new IntersectionObserver(this.observerCallback,{root:this.scrollContainerRef&&this.scrollContainerRef.current})),t?this.handleResponse({body:t}):n?this.handleResponse({proactive:n}):void 0}},{key:"componentDidUpdate",value:function(e){var t=this.props.formPrefill,n=x()(e,"formPrefill");t&&t!==n&&this.handleResponse({body:t})}},{key:"renderChatFormInput",value:function(){var e=this.props,t=e.teams,n=e.isAfterHours,a=e.articles,i=e.fetchingArticles,o=this.state,s=o.messages,u=o.waiting,c=o.error,l=s[s.length-1],d=x()(l,"property",""),p=d.includes("Tree"),g="articleList"===x()(l,"type"),f=x()(l,"values"),h=null;f&&f.length&&"kbDeflect"!==x()(l,"type")&&(h="conversation_team"===x()(l,"property")?Qr()(t):l.values.map((function(e){return{displayName:e,value:e}})),g&&(h=l.values.map((function(e){return{displayName:e.displayName,value:e.displayName,endChat:e.endChat}}))));return g&&(i||a&&a.length<1)?null:r()(mi,{onSubmit:this.handleResponse,values:h,disabled:!!g||u,error:c,isAfterHours:n,isMLL:p,property:d})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isAfterHours,a=t.offhoursImageUrl,i=t.intl,s=this.state,u=s.messages,c=s.deflectionForm,l=Ut.f()?wi.mobileScrollContainer:wi.scrollContainer,d=Ut.f()?wi.mobileMessageContainer:wi.messagesContainer,p=c.selectedArticle?wi.articleContainer:Di({},wi.articleContainer,{},wi.articleContainerClosed);return c.selectedArticle&&(d=Di({},d,{display:"none"})),r()("div",{style:wi.container},void 0,c.selectedArticle?r()("div",{style:wi.iconContainer,onClick:function(){return e.handleSelectedArticle(null)}},void 0,r()("div",{style:wi.collapseIcon})):null,o.a.createElement("div",{style:n&&!u.length?Mi(a):l,ref:this.scrollContainerRef,className:"kustomer-app-thread"},r()("div",{style:d},void 0,this.renderMessages()),r()("div",{style:p},void 0,r()(vi,{article:c.selectedArticle}))),c.selectedArticle?null:r()("div",{style:Ut.f()?wi.mobileInputContainer:null},void 0,ji,"accepted"===c.status?r()("div",{style:wi.wrapperDisabled},void 0,r()("span",{style:wi.disabledText},void 0,i.formatMessage(ki.thank_you_message))):this.renderChatFormInput()))}}]),t}(o.a.PureComponent);Ti.defaultProps={formPrefill:null,questions:[],delay:2e3,teams:[],isAfterHours:!1,offhoursImageUrl:"",handleOnStart:function(){},proactive:!1,articles:void 0,fetchingArticles:!1};var Si=Object(S.e)(Ti,{withRef:!0}),Oi=Object(s.b)((function(e){return{isAfterHours:Object(Z.jb)(e),offhoursImageUrl:Object(Z.kb)(e),teams:Object(Z.mb)(e),articles:Object(Z.hb)(e),fetching:Object(Z.gb)(e)}}),(function(e){return{requestTeams:function(t){return e(Object(Ze.S)(t))},routeToConversation:function(){return e(Object(Ze.kb)())}}}))(Si),Pi=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"state",{initiated:!1}),A()(b()(n),"onStart",(function(){n.setState({initiated:!0}),n.props.formIsInProgress(!0)})),A()(b()(n),"handleSubmit",(function(e,t,a){var r=n.props.proactive,i=e.reduce((function(e,n,a){if(0===a&&!r)return e.push({input:n.body,inputAt:n.inputAt}),e;if(x()(n,"prompt")){var i=t.find((function(e){return e.id===n.id}));return i?x()(n,"values")||x()(n,"property","").includes("Tree")?e.push({prompt:n.body,promptAt:n.promptAt,id:n.id,value:i.value,input:i.input,inputAt:i.inputAt}):e.push({prompt:n.body,promptAt:n.promptAt,id:n.id,input:i.input,inputAt:i.inputAt}):e.push({prompt:n.body,promptAt:n.promptAt,id:n.id}),e}return e}),[]);return n.props.submit(i,a)})),n}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.questions,a=e.formPrefill,i=e.proactive,o=this.state.initiated;return n.length?r()("div",{style:{height:"".concat(96,"%"),display:"flex",flexDirection:"column"}},void 0,r()(Zt,{onCloseClick:t,expanded:!o,hasAgent:!1,showOrgAvatar:!0}),r()(Oi,{proactive:i,onSubmit:this.handleSubmit,formPrefill:a,questions:n,handleOnStart:this.onStart})):null}}]),t}(i.PureComponent);Pi.defaultProps={questions:[],formPrefill:null,handleClose:function(){},formIsInProgress:function(){},proactive:!1};var Ei=Object(s.b)((function(e){var t=Object(Z.k)(e);return{questions:t.questions,formPrefill:t.formPrefill,proactive:t.proactive}}),(function(e){return{handleClose:function(){e(Object(R.k)())},formIsInProgress:function(){e(Object(Ze.F)(!0))},submit:function(t,n){return e(Object(Ze.F)(!1)),e(Object(Ze.mb)({messages:t,lastDeflection:n}))}}}))(Pi),Li={wrapper:{width:"100%",fontWeight:"300",fontSize:"12px",position:"relative",display:"flex",borderBottom:"1px solid ".concat("#E9EFF4"),borderRadius:"9px 9px 0 0",flex:"0 0 auto",height:"195px",alignItems:"center"},close:{wrapper:{position:"absolute",top:"18px",right:"10px",padding:"5px",borderRadius:"50%",cursor:"pointer"},icon:{backgroundImage:'url("'.concat(F,'")'),backgroundRepeat:"no-repeat",backgroundSize:"16px",height:"16px",width:"16px"}}},_i=Object(S.d)({aria_label_close_button:{id:"kustomer.chat.history.header.aria.label.close.button",defaultMessage:"Close widget"},aria_label_main:{id:"kustomer.chat.history.header.aria.label.main",defaultMessage:"Chat conversation history"}}),zi={headerInfoWrap:{display:"flex",alignItems:"center",alignContent:"center",justifyContent:"center",flexWrap:"wrap",padding:"0 40px",width:"100%",height:"100%",flexDirection:"column"},companyName:{fontSize:11,textTransform:"uppercase",fontWeight:500,marginTop:"12px",letterSpacing:"0.2px"},companyMessage:{margin:"12px 0 0",maxWidth:"327px",fontSize:12,textAlign:"center",display:"-webkit-box",maxHeight:"30px",lineHeight:"15px",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},waitMessage:{fontSize:13,marginTop:"4px"},avatar:{position:"relative",width:300}},Ri=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(i))),A()(b()(n),"renderGreeting",(function(){var e=n.props,t=e.isAfterHours,a=e.offhoursMessage,i=e.greeting;return t?r()("div",{role:"heading",title:a,style:zi.companyMessage,className:"kustomer-app-header-greeting","aria-level":"2"},void 0,a):r()("span",{role:"heading",title:i,style:zi.companyMessage,className:"kustomer-app-header-greeting","aria-level":"3"},void 0,i)})),A()(b()(n),"renderWaitMessage",(function(){var e=n.props,t=e.waitMessage;return e.isAfterHours?null:r()("span",{role:"heading",title:t,style:zi.waitMessage,"aria-level":"2",className:"kustomer-app-header-wait-message"},void 0,t)})),A()(b()(n),"renderAvatar",(function(){var e=n.props,t=e.avatarUrl,a=e.name;return r()("div",{style:zi.avatar},void 0,r()(Re,{defaultName:a,avatarUrl:t,size:42,showUnread:!0}))})),A()(b()(n),"renderHeader",(function(){var e=n.props.name;return r()("div",{style:zi.headerInfoWrap},void 0,n.renderAvatar(),r()("span",{style:zi.companyName,role:"heading","aria-level":"1",className:"kustomer-app-header-company-name"},void 0,e),n.renderWaitMessage(),n.renderGreeting())})),n}return y()(t,e),p()(t,[{key:"render",value:function(){return this.renderHeader()}}]),t}(i.PureComponent);Ri.defaultProps={avatarUrl:"",name:"",greeting:"",offhoursMessage:"",waitMessage:"",isAfterHours:!1};var Zi=Object(s.b)((function(e){var t=Object(Z.l)(e),n=t.get("waitMessage"),a=t.get("greeting"),r=t.get("offhoursMessage"),i=t.get("name");return{avatarUrl:t.get("avatarUrl"),name:i,isAfterHours:Object(Z.jb)(e),greeting:a,offhoursMessage:r,waitMessage:n}}))(Ri),Ui=r()(Zi,{}),Gi=function(e){var t=e.onClose,n=e.intl;return r()("div",{style:Li.wrapper,className:"kustomer-app-header",role:"main","aria-label":n.formatMessage(_i.aria_label_main)},"wrapper",Ui,r()("div",{style:Li.close.wrapper,className:"iconButton closeButton kustomer-app-header-close-button",onClick:t,onKeyPress:function(e){D(e)&&(e.preventDefault(),e.stopPropagation(),t())},tabIndex:"0",role:"button","aria-label":n.formatMessage(_i.aria_label_close_button)},void 0,r()("div",{style:Li.close.icon})))};Gi.defaultProps={onClose:function(){}};var Wi=Object(S.e)(Gi),Bi=Object(T.a)(Wi),Fi={alley:{padding:0,overflowX:"hidden",overflowY:"auto",backgroundColor:"#F8FAFD",flex:"1 1 auto"}},Hi={anonWrapper:{color:"#000000",height:108,padding:"25px 18px",display:"flex",alignItems:"center",position:"relative",flexDirection:"row",fontSize:12,borderBottom:"1px solid ".concat("#E9EFF4")},messageColumn:{flex:"1 auto",width:"79%",marginLeft:10},filler:{},fillerRowOne:{background:"#E9E9E9",height:10,width:"15%"},fillerRowTwo:{background:"#E9E9E9",height:10,width:"100%",marginTop:8},fillerRowThree:{background:"#E9E9E9",height:10,width:"81%",marginTop:8}},Yi=function(){return r()("div",{style:Hi.anonWrapper},void 0,r()("div",{style:Hi.messageColumn},void 0,r()("div",{style:Hi.fillerRowOne}),r()("div",{style:Hi.fillerRowTwo}),r()("div",{style:Hi.fillerRowThree})))},Qi={wrapper:{color:"#000000",height:108,padding:"25px",display:"flex",alignItems:"center",position:"relative",flexDirection:"row",fontSize:12,cursor:"pointer",borderBottom:"1px solid ".concat("#E9EFF4"),margin:5},wrapperHover:{":hover":{backgroundColor:"#fff"}},messageColumn:{flex:"1 auto",width:"79%",marginLeft:20},nameDateRow:{height:22,display:"flex",justifyContent:"space-between"},name:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:500,letterSpacing:"0.2px",color:"#182833",lineHeight:1},date:{display:"block",color:"#717070",fontSize:11,lineHeight:"12px",fontWeight:500,textTransform:"uppercase"},messageRow:{fontSize:12,fontWeight:500,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",paddingRight:16,height:16,color:"#717070"},fillerRowOne:{background:"#E9E9E9",height:10,width:"15%"},fillerRowTwo:{background:"#E9E9E9",height:10,width:"100%",marginTop:8},fillerRowThree:{background:"#E9E9E9",height:10,width:"81%",marginTop:8},unread:{position:"absolute",left:"50px",top:"22px",zIndex:20,background:"#336DEC",height:"28px",width:"28px",lineHeight:"13px",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",fontSize:11,fontWeight:500,border:"3px solid ".concat("#F8FAFD"),borderRadius:"50%"},locked:{backgroundColor:"rgba(233,239,244,0.6)",position:"absolute",top:8,left:8,right:8,bottom:8,borderRadius:8,zIndex:20},closedLabel:{position:"relative",zIndex:20}},Vi=Object(S.d)({no_preview:{id:"kustomer.chat.history.item.preview",defaultMessage:"No preview available"},closed:{id:"kustomer.chat.history.item.closed",defaultMessage:"Closed"},aria_label_unread_messages:{id:"kustomer.chat.history.item.aria.label.unread.messages",defaultMessage:"{unreadMessages} unread messages"}}),Ji=r()(Yi,{}),Xi=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(i))),A()(b()(n),"handleClick",(function(e){var t=n.props,a=t.item,r=t.onClick;e.preventDefault(),r(a)})),A()(b()(n),"handleKeyPress",(function(e){var t=n.props,a=t.item,r=t.onClick;D(e)&&(e.preventDefault(),e.stopPropagation(),r(a))})),A()(b()(n),"renderLockedOverlay",(function(){return n.props.isLocked?r()("div",{style:Qi.locked}):null})),n}return y()(t,e),p()(t,[{key:"renderTimeAgo",value:function(){var e=this.props,t=e.intl,n=e.lastMessageTimeUTC,a=e.isLocked;return n?a?r()("span",{style:Qi.closedLabel,className:"kustomer-app-list-item-closed-label"},void 0,t.formatMessage(Vi.closed)):r()(Rn,{date:n}):null}},{key:"renderUnreadCount",value:function(){var e=this.props,t=e.unreadCount,n=e.intl;return t?r()("div",{"aria-live":"assertive","aria-label":n.formatMessage(Vi.aria_label_unread_messages,{unreadMessages:t}),className:"unread kustomer-app-list-item-unread-count",style:Qi.unread},void 0,t):null}},{key:"renderAvatar",value:function(){var e=this.props,t=e.userName,n=e.avatarUrl;return r()(Re,{defaultName:t,avatarUrl:n,size:40})}},{key:"renderNameDateRow",value:function(){var e=this.props.userName;return r()("div",{style:Qi.nameDateRow},void 0,r()("span",{style:Qi.name,className:"kustomer-app-list-item-name"},void 0,e),r()("span",{style:Qi.date,"aria-live":"polite",className:"kustomer-app-list-item-date"},void 0,this.renderTimeAgo()))}},{key:"renderMessageRow",value:function(){var e=this.props,t=e.intl,n=e.item;return n.preview?r()("div",{className:"messageRow messagePreview kustomer-app-list-item-message-preview","aria-label":n.preview,style:Qi.messageRow},void 0,r()(Yn,{text:n.preview,isPreview:!0})):r()("div",{style:Qi.messageRow},void 0,t.formatMessage(Vi.no_preview))}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.isLocked;if("anon"===t.type)return Ji;var a=n?"kustomer-app-list-item kustomer-app-list-item-disabled":"kustomer-app-list-item";return r()("div",{tabIndex:"0",style:[Qi.wrapper,Qi.wrapperHover],onKeyPress:this.handleKeyPress,onClick:this.handleClick,className:a,role:"treeitem"},void 0,this.renderLockedOverlay(),this.renderUnreadCount(),this.renderAvatar(),r()("div",{className:"messageColumn",style:Qi.messageColumn},void 0,this.renderNameDateRow(),this.renderMessageRow()))}}]),t}(i.PureComponent);Xi.defaultProps={item:Object(ke.h)(),unreadCount:0,onClick:function(){},title:"Untitled",lastMessageTimeUTC:null,closableChatEnabled:!1,isLocked:!1};var Ki=Object(S.e)(Object(T.a)(Xi),{withRef:!0}),qi=Object(s.b)((function(){var e=Object(Z.U)(),t=Object(Z.cb)(),n=Object(Z.bb)(),a=Object(Z.W)(),r=Object(Z.Z)();return function(i,o){var s=Object(Z.n)(i);return{firstMessage:e(i,o),unreadCount:t(i,o),userName:n(i,o),avatarUrl:a(i,o),lastMessageTimeUTC:r(i,o),isLocked:s&&!!o.item.lockedAt}}}),(function(e){return{onClick:function(t){t&&e(Object(wt.g)(t))}}}))(Ki),$i=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"renderList",value:function(){return this.props.sessions.map((function(e){return r()(qi,{item:e},e.get("id"))}))}},{key:"render",value:function(){return r()("div",{role:"tree",style:Fi.alley,className:"kustomer-app-list"},void 0,this.renderList())}}]),t}(i.PureComponent);$i.defaultProps={sessions:bt.a.OrderedSet()};var eo=$i,to={wrap:{display:"flex",flexDirection:"column",flex:"1 1 auto",height:"".concat(96,"%")},wrapNoCTA:{display:"flex",flexDirection:"column",flex:"1 1 auto",height:"".concat(96,"%"),paddingBottom:29}},no=r()(jr,{}),ao=function(e){var t=e.handleClose,n=e.handleNewConversation,a=e.sessions,i=e.hasActiveSingleChat,o=e.hasMultipleActiveChats,s=o?to.wrapNoCTA:to.wrap;return r()("div",{style:s},void 0,r()(Bi,{onClose:t}),r()(eo,{sessions:a}),no,r()($t,{onClick:n,hasActiveSingleChat:i,hasMultipleActiveChats:o}))};ao.defaultProps={handleClose:function(){},handleNewConversation:function(){},sessions:bt.a.OrderedSet(),hasActiveSingleChat:!1,hasMultipleActiveChats:!1};var ro=Object(s.b)((function(e){return{sessions:Object(Z.I)(e),hasActiveSingleChat:Object(Z.G)(e)&&Boolean(Object(Z.H)(e)),hasMultipleActiveChats:Object(Z.G)(e)&&Object(Z.R)(e)}}),(function(e){return{handleClose:function(){e(Object(R.k)())},handleNewConversation:function(){e(Object(wt.e)())}}}))(ao),io={wrapper:{width:"100%",height:"".concat(4,"%"),lineHeight:"16px",fontSize:11,fontWeight:500,backgroundColor:"#F8FAFD",color:"#687382",textTransform:"uppercase",display:"flex",justifyContent:"center",alignItems:"center",zIndex:20},branding:{color:"#687382",textDecoration:"none"},icon:{backgroundImage:'url("'.concat(ne,'")'),backgroundSize:14,backgroundRepeat:"no-repeat",height:15,width:15,color:"#687382",display:"inline-block"}},oo=Object(S.d)({footer_brand:{id:"kustomer.chat.footer.brand",defaultMessage:"by Kustomer"}}),so=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.intl;return r()("div",{style:io.wrapper},void 0,r()("i",{"aria-hidden":"true",style:io.icon}),r()("span",{style:io.branding},void 0,e.formatMessage(oo.footer_brand)))}}]),t}(i.PureComponent),uo=Object(S.e)(so),co=r()(Gr,{}),lo=r()(Ei,{}),po=r()(ro,{}),go=r()(uo,{}),fo=function(e){function t(e){var n;return l()(this,t),n=f()(this,m()(t).call(this,e)),A()(b()(n),"initPollerBH",(function(){n.pollerBH&&clearTimeout(n.pollerBH),n.pollerBH=setTimeout((function(){return n.props.handleDisplay(),n.initPollerBH()}),3e3)})),A()(b()(n),"handleKeyDown",(function(e){var t=n.props.focusOn,a=x()(document,"activeElement.id"),r="firstFocusableElement"===a,i="lastFocusableElement"===a,o=x()(e,"shiftKey");N(e)&&o&&r?(e.preventDefault(),t("lastFocusableElement")):N(e)&&!o&&i?(e.preventDefault(),t("firstFocusableElement")):t("")})),n.pollerBH=null,n.chatAppWrapper=null,n}return y()(t,e),p()(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.handleDisplay()}},{key:"componentDidMount",value:function(){this.props.initRoute(),this.initPollerBH()}},{key:"componentDidUpdate",value:function(){"firstFocusableElement"===this.props.elInFocus&&this.chatAppWrapper.focus()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.pollerBH)}},{key:"renderRoute",value:function(){switch(this.props.chatRoute){case"conversation":return co;case"form":return lo;case"history":return po;default:return null}}},{key:"renderFooter",value:function(){return this.props.showBrandingIdentifier?go:null}},{key:"render",value:function(){var e=this,t=this.props.styles;return r()("div",{className:"chatAppWrapper kustomer-app-container",style:t.wrapper},void 0,o.a.createElement("div",{id:"firstFocusableElement",ref:function(t){return e.chatAppWrapper=t},tabIndex:"0",onKeyDown:this.handleKeyDown,key:"border",className:"kustomer-app",style:t.border},this.renderRoute(),this.renderFooter()))}}]),t}(i.PureComponent);fo.defaultProps={chatRoute:null,showBrandingIdentifier:!0,initRoute:function(){},handleDisplay:function(){},styles:{}};var ho={styles:lt,stylesRTL:pt,start:{x:150,y:200,scale:.1},startRTL:{x:-150,y:200,scale:.1},end:function(){return{x:st(0),y:st(0),scale:st(1)}},tween:function(e){return{border:{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px) scale(").concat(e.scale,")")}}}},mo=Object(T.a)(fo),Io=it(ho)(mo),bo=Object(s.b)((function(e){return{chatRoute:Object(Z.v)(e),showBrandingIdentifier:Object(Z.r)(e),elInFocus:Object(Z.w)(e)}}),(function(e){return{initRoute:function(){e(Object(wt.f)())},handleDisplay:function(){e(Object(Ze.N)())},focusOn:function(t){e(Object(Ze.lb)(t))}}}))(Io),vo=n("gZx5"),yo=n.n(vo),Co=function(e){function t(e){var n;return l()(this,t),(n=f()(this,m()(t).call(this,e))).state={isSoundAllowed:!1},n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this;if(Audio){var t=new Audio(ee);try{t.play().then((function(){e.setState({isSoundAllowed:!0})})).catch((function(){e.setState({isSoundAllowed:!1})}))}catch(e){this.setState({isSoundAllowed:!1})}}}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.play,a=e.onFinish,i=this.state.isSoundAllowed,o=n?yo.a.status.PLAYING:yo.a.status.STOPPED;return i?r()(yo.a,{url:t,playStatus:o,onFinishedPlaying:a}):null}}]),t}(i.PureComponent);Co.defaultProps={url:"",play:!1,onFinish:function(){}};var Ao=Co,Mo=function(e){return e.getIn(["chat","sound","play"],!1)},wo=n("4eWA"),ko=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.play,n=e.resetPlay;return r()(Ao,{url:$,play:t,onFinish:n})}}]),t}(i.PureComponent);ko.defaultProps={play:!1,resetPlay:function(){}};var xo=Object(s.b)((function(e){return{play:Mo(e)}}),(function(e){return{resetPlay:function(){return e(Object(wo.c)())}}}))(ko),Do={font:"16px Roboto, sans-serif",WebkitFontSmoothing:"antialiased"},No=n("TsPW"),jo=r()($e,{}),To=r()(bo,{}),So=r()(xo,{}),Oo=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=f()(this,(e=m()(t)).call.apply(e,[this].concat(r))),A()(b()(n),"handleFirstTab",(function(e){N(e)&&(document.getElementById("kustomer-root").classList.add("userIsTabbing"),window.removeEventListener("keydown",n.handleFirstTab),window.addEventListener("mousedown",n.handleMouseClick))})),A()(b()(n),"handleMouseClick",(function(){document.getElementById("kustomer-root").classList.remove("userIsTabbing"),window.removeEventListener("mousedown",n.handleMouseClick),window.addEventListener("keydown",n.handleFirstTab)})),n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleFirstTab)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleFirstTab),window.removeEventListener("mousedown",this.handleMouseClick)}},{key:"renderRoute",value:function(){var e=this.props,t=e.route,n=e.blackListed;switch(t){case"kusty":return n?null:jo;case"app":return To;default:return null}}},{key:"render",value:function(){return r()("div",{style:Do,className:"kustomer"},void 0,So,this.renderRoute())}}]),t}(i.PureComponent);Oo.defaultProps={route:"kusty",blackListed:!1};var Po=Object(s.b)((function(e){var t=Z.y(e),n=No.b.shouldMaintainActiveChats(t),a=Object(kr.a)(e);return{route:Object(kr.c)(e),blackListed:a&&!n}}))(Oo),Eo=function(e,t){window.Kustomer||(window.Kustomer={});for(var n=e.split("."),a=n.length,r=0,i=window.Kustomer;r<a;){var o=n[r];r===a-1&&(i[o]=t),void 0===i[o]&&(i[o]={}),i=i[o],r+=1}},Lo=n("WUEa"),_o=n("pZt1"),zo=n.n(_o),Ro=n("PTt1"),Zo=n.n(Ro),Uo=n("R7f6"),Go=n("+7Q0"),Wo=n.n(Go),Bo={en_us:{getMessages:function(){return Promise.resolve().then(n.t.bind(null,"R7f6",3))},getLocaleData:function(){return Promise.resolve().then(n.t.bind(null,"PTt1",7))}},en:{getMessages:function(){return Promise.resolve().then(n.t.bind(null,"R7f6",3))},getLocaleData:function(){return Promise.resolve().then(n.t.bind(null,"PTt1",7))}},en_gb:{getMessages:function(){return Promise.resolve().then(n.t.bind(null,"R7f6",3))},getLocaleData:function(){return Promise.resolve().then(n.t.bind(null,"PTt1",7))}},en_ca:{getMessages:function(){return Promise.resolve().then(n.t.bind(null,"R7f6",3))},getLocaleData:function(){return Promise.resolve().then(n.t.bind(null,"PTt1",7))}},es:{getMessages:function(){return n.e(9).then(n.t.bind(null,"SLNN",3))},getLocaleData:function(){return n.e(57).then(n.t.bind(null,"TrdP",7))}},es_es:{getMessages:function(){return n.e(9).then(n.t.bind(null,"SLNN",3))},getLocaleData:function(){return n.e(57).then(n.t.bind(null,"TrdP",7))}},fr:{getMessages:function(){return n.e(13).then(n.t.bind(null,"M2LD",3))},getLocaleData:function(){return n.e(61).then(n.t.bind(null,"Z6Ro",7))}},fr_ca:{getMessages:function(){return n.e(13).then(n.t.bind(null,"M2LD",3))},getLocaleData:function(){return n.e(61).then(n.t.bind(null,"Z6Ro",7))}},de:{getMessages:function(){return n.e(7).then(n.t.bind(null,"9gl7",3))},getLocaleData:function(){return n.e(55).then(n.t.bind(null,"AJYP",7))}},pt:{getMessages:function(){return n.e(29).then(n.t.bind(null,"rJMq",3))},getLocaleData:function(){return n.e(77).then(n.t.bind(null,"Ktao",7))}},ar:{getMessages:function(){return n.e(1).then(n.t.bind(null,"79D8",3))},getLocaleData:function(){return n.e(49).then(n.t.bind(null,"UYUC",7))}},he:{getMessages:function(){return n.e(14).then(n.t.bind(null,"4r0m",3))},getLocaleData:function(){return n.e(62).then(n.t.bind(null,"vMgC",7))}},af:{getMessages:function(){return n.e(0).then(n.t.bind(null,"eAFh",3))},getLocaleData:function(){return n.e(47).then(n.t.bind(null,"W0vY",7))}},bg:{getMessages:function(){return n.e(2).then(n.t.bind(null,"EROE",3))},getLocaleData:function(){return n.e(50).then(n.t.bind(null,"R88W",7))}},bs:{getMessages:function(){return n.e(3).then(n.t.bind(null,"wBLm",3))},getLocaleData:function(){return n.e(51).then(n.t.bind(null,"X4Fz",7))}},ca:{getMessages:function(){return n.e(4).then(n.t.bind(null,"uUf1",3))},getLocaleData:function(){return n.e(52).then(n.t.bind(null,"aEMn",7))}},cs:{getMessages:function(){return n.e(5).then(n.t.bind(null,"iIQZ",3))},getLocaleData:function(){return n.e(53).then(n.t.bind(null,"1035",7))}},da:{getMessages:function(){return n.e(6).then(n.t.bind(null,"SZwh",3))},getLocaleData:function(){return n.e(54).then(n.t.bind(null,"cmGi",7))}},nl:{getMessages:function(){return n.e(26).then(n.t.bind(null,"bFCN",3))},getLocaleData:function(){return n.e(74).then(n.t.bind(null,"22ZZ",7))}},el:{getMessages:function(){return n.e(8).then(n.t.bind(null,"vf5f",3))},getLocaleData:function(){return n.e(56).then(n.t.bind(null,"5TID",7))}},et:{getMessages:function(){return n.e(10).then(n.t.bind(null,"aOO0",3))},getLocaleData:function(){return n.e(58).then(n.t.bind(null,"XqIu",7))}},fi:{getMessages:function(){return n.e(11).then(n.t.bind(null,"O+O5",3))},getLocaleData:function(){return n.e(59).then(n.t.bind(null,"LjnU",7))}},fil:{getMessages:function(){return n.e(12).then(n.t.bind(null,"ykWF",3))},getLocaleData:function(){return n.e(60).then(n.t.bind(null,"NJ7N",7))}},hi:{getMessages:function(){return n.e(15).then(n.t.bind(null,"6qX3",3))},getLocaleData:function(){return n.e(63).then(n.t.bind(null,"T4Tp",7))}},hr:{getMessages:function(){return n.e(16).then(n.t.bind(null,"c7KL",3))},getLocaleData:function(){return n.e(64).then(n.t.bind(null,"i9pw",7))}},hu:{getMessages:function(){return n.e(17).then(n.t.bind(null,"RLvk",3))},getLocaleData:function(){return n.e(65).then(n.t.bind(null,"DsW2",7))}},id:{getMessages:function(){return n.e(18).then(n.t.bind(null,"gbCj",3))},getLocaleData:function(){return n.e(66).then(n.t.bind(null,"X1Zk",7))}},is:{getMessages:function(){return n.e(19).then(n.t.bind(null,"sFCp",3))},getLocaleData:function(){return n.e(67).then(n.t.bind(null,"1up2",7))}},it:{getMessages:function(){return n.e(20).then(n.t.bind(null,"GExY",3))},getLocaleData:function(){return n.e(68).then(n.t.bind(null,"jtQn",7))}},ja:{getMessages:function(){return n.e(21).then(n.t.bind(null,"aIBG",3))},getLocaleData:function(){return n.e(69).then(n.t.bind(null,"vSOm",7))}},ka:{getMessages:function(){return n.e(22).then(n.t.bind(null,"DV9J",3))},getLocaleData:function(){return n.e(70).then(n.t.bind(null,"iUsX",7))}},ko:{getMessages:function(){return n.e(23).then(n.t.bind(null,"GTvS",3))},getLocaleData:function(){return n.e(71).then(n.t.bind(null,"KAgo",7))}},lt:{getMessages:function(){return n.e(24).then(n.t.bind(null,"AWzh",3))},getLocaleData:function(){return n.e(72).then(n.t.bind(null,"wi9P",7))}},lv:{getMessages:function(){return n.e(25).then(n.t.bind(null,"Eyra",3))},getLocaleData:function(){return n.e(73).then(n.t.bind(null,"Z4kT",7))}},no:{getMessages:function(){return n.e(27).then(n.t.bind(null,"1TiX",3))},getLocaleData:function(){return n.e(75).then(n.t.bind(null,"qxVP",7))}},pl:{getMessages:function(){return n.e(28).then(n.t.bind(null,"oSTK",3))},getLocaleData:function(){return n.e(76).then(n.t.bind(null,"Tk0z",7))}},pt_br:{getMessages:function(){return n.e(30).then(n.t.bind(null,"/Uo4",3))},getLocaleData:function(){return n.e(77).then(n.t.bind(null,"Ktao",7))}},ro:{getMessages:function(){return n.e(31).then(n.t.bind(null,"AaIk",3))},getLocaleData:function(){return n.e(78).then(n.t.bind(null,"wIkc",7))}},ru:{getMessages:function(){return n.e(32).then(n.t.bind(null,"sXBe",3))},getLocaleData:function(){return n.e(79).then(n.t.bind(null,"CrYA",7))}},sk:{getMessages:function(){return n.e(33).then(n.t.bind(null,"Qc7S",3))},getLocaleData:function(){return n.e(80).then(n.t.bind(null,"fz3P",7))}},sl:{getMessages:function(){return n.e(34).then(n.t.bind(null,"6yWy",3))},getLocaleData:function(){return n.e(81).then(n.t.bind(null,"pNBJ",7))}},sq:{getMessages:function(){return n.e(35).then(n.t.bind(null,"6fui",3))},getLocaleData:function(){return n.e(82).then(n.t.bind(null,"kW9/",7))}},sr:{getMessages:function(){return n.e(36).then(n.t.bind(null,"1thh",3))},getLocaleData:function(){return n.e(83).then(n.t.bind(null,"1AF2",7))}},sr_me:{getMessages:function(){return n.e(37).then(n.t.bind(null,"oQw8",3))},getLocaleData:function(){return n.e(83).then(n.t.bind(null,"1AF2",7))}},sv:{getMessages:function(){return n.e(38).then(n.t.bind(null,"VOsf",3))},getLocaleData:function(){return n.e(84).then(n.t.bind(null,"3BAL",7))}},sw:{getMessages:function(){return n.e(39).then(n.t.bind(null,"CKoV",3))},getLocaleData:function(){return n.e(85).then(n.t.bind(null,"Nbyf",7))}},th:{getMessages:function(){return n.e(40).then(n.t.bind(null,"NwwZ",3))},getLocaleData:function(){return n.e(86).then(n.t.bind(null,"dTP/",7))}},tr:{getMessages:function(){return n.e(41).then(n.t.bind(null,"fWz1",3))},getLocaleData:function(){return n.e(87).then(n.t.bind(null,"F03f",7))}},tw:{getMessages:function(){return n.e(42).then(n.t.bind(null,"4D5S",3))},getLocaleData:function(){return n.e(48).then(n.t.bind(null,"8jTO",7))}},uk:{getMessages:function(){return n.e(43).then(n.t.bind(null,"Y3vj",3))},getLocaleData:function(){return n.e(88).then(n.t.bind(null,"4U5H",7))}},vi:{getMessages:function(){return n.e(44).then(n.t.bind(null,"zV6i",3))},getLocaleData:function(){return n.e(89).then(n.t.bind(null,"kEdy",7))}},zh_cn:{getMessages:function(){return n.e(45).then(n.t.bind(null,"7KGv",3))},getLocaleData:function(){return n.e(90).then(n.t.bind(null,"dVHv",7))}},zh_tw:{getMessages:function(){return n.e(46).then(n.t.bind(null,"gQy9",3))},getLocaleData:function(){return n.e(90).then(n.t.bind(null,"dVHv",7))}}},Fo=n("KQ8z"),Ho=function(){var e=Fo.a.get("lang")||x()(navigator,["languages",0],navigator.browserLanguage||"en_us");return e&&e.toLowerCase().replace("-","_")},Yo=Ho(),Qo=function(){var e=Ho(),t=$r()(Wo.a,(function(e){return!e.hidden||!1})),n=Jr()(t,(function(t){return t.locale===e})),a=Jr()(t,(function(e){return"en_us"===e.locale}));return n||a},Vo=r()(Lo.a,{}),Jo=function(e){function t(e){var n;return l()(this,t),(n=f()(this,m()(t).call(this,e))).state={messages:null,localeData:null},n}return y()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e,t,n=this;(e=Ho(),t=x()(Bo,[e,"getMessages"]),t?t().catch((function(){return Promise.resolve({default:Uo})})):Promise.resolve({default:Uo})).then((function(e){Eo("_loadedEvents.langFile",!0);var t=e.default;n.setState({messages:t})})),function(){var e=Ho(),t=x()(Bo,[e,"getLocaleData"]);return t?t().catch((function(){return Promise.resolve({default:Zo.a})})):Promise.resolve({default:Zo.a})}().then((function(e){Eo("_loadedEvents.localeFile",!0);var t=function(e){var t=Qo(),n=t.parentLocale,a=zo()(e),r=[].concat(Qr()(e),Qr()(Zo.a));return n&&r.unshift({locale:t.locale,parentLocale:n,pluralRuleFunction:a.pluralRuleFunction||function(){return"other"},fields:a.fields}),r.reduce((function(e,t){var n=e;return n[t.locale]=t,n}),{})}(e.default);Object(S.c)(Object.values(t)),n.setState({localeData:t})}))}},{key:"render",value:function(){var e=this.state,t=e.localeData,n=e.messages;if(!t||!n)return null;var a=t[Yo]||{},i=a&&a.fields,o=a.parentLocale||a.locale||Yo;return r()(S.b,{locale:o,messages:n,formats:i},void 0,r()("div",{},void 0,Vo,this.props.children))}}]),t}(o.a.Component);Jo.defaultProps={children:null};var Xo=n("IWvv"),Ko={"#kustomer-root:not(.userIsTabbing)":{"div:focus":{outline:"none"},"label:focus":{outline:"none"}},".kustomer":{background:"none !important",border:"none !important",boxShadow:"none !important",color:"#222222 !important"},".kustomer *":{boxSizing:"border-box !important"},".kustomer strong":{fontWeight:"bold"},".kustomer em":{fontStyle:"italic"},".kustomer .customerMessage":{a:{color:"#fff"}},".kustomer .userMessage":{a:{color:"#336DEC"}},".kustomer .messageInput[contenteditable=true]:empty:before":{content:"attr(placeholder)",display:"block",color:"#717070",fontSize:12,position:"relative"},".kustomer .iconButton":{opacity:".6",transition:"all 150ms"},".kustomer .iconButton:hover":{opacity:"1",transition:"all 150ms"},".kustomer .enterIcon:hover":{background:"rgba(2, 127, 255, .8) !important",transition:"all 150ms"},".kustomer .enterIcon:active":{background:"rgba(2, 127, 255, .8) !important",transition:"all 150ms"},".kustomer img":{maxWidth:"100%"},".kustomer .messagePreview a":{color:"#717070",textDecoration:"none"},".kustomer .treePicker-node:hover":{cursor:"pointer",backgroundColor:"rgba(82, 170, 255, 0.333)"},".kustomer .treePicker-arrowWrap:hover":{backgroundColor:"#336DEC"},".kustomer .treePicker-node:hover .treePicker-arrowWrap":{backgroundColor:"#336DEC"},".kustomer .treePicker-breadcrumb:hover":{cursor:"pointer",color:"#336DEC"},".kustomer .treePicker-homeNode:hover":{cursor:"pointer",color:"#336DEC"},".kb-article p":{color:"#666;",margin:"1rem 0",lineHeight:"20px"},".kb-article h3":{color:"#666;",fontWeight:"bold",fontSize:"25px",marginTop:"15px"},".kb-article h2":{color:"#666;",fontWeight:"bold",fontSize:"20px",marginTop:"15px"},".kb-article li":{color:"#666;",fontSize:"15px",marginTop:"15px",paddingLeft:"1.5em"}},qo=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"render",value:function(){return r()("div",{},void 0,Object.keys(Ko).map((function(e){return r()(Xo.a,{scopeSelector:e,rules:Ko[e]},e)})))}}]),t}(i.PureComponent),$o={".closeButton":{right:"auto !important",left:"10px"},".conversationMenubutton":{left:"auto !important",right:"8px"},".backButton":{transform:"rotate(180deg)"},".minimizedUnreadIcon":{left:"auto !important",right:"32px"},".kustomer-app-icon":{right:"auto !important",left:"25px"},".chatAppWrapper":{left:"25px",right:"auto !important"}},es={".userMessage":{borderRadius:"9px 9px 0 9px !important"},".customerMessage":{borderRadius:"9px 9px 9px 0 !important"},".messageInputWrap":{padding:"5px 10px 5px 42px !important"},".messageInput":{textAlign:"right"},".enterIcon":{right:"auto !important",left:"10px"},".inputWithSubmit":{order:2},".inputWithSubmitIcon":{order:1},".describeEmailTitle":{textAlign:"right"},".volumeControlButtonWrap":{textAlign:"right"},".chatConvsationInputButtonWrap":{textAlign:"right"},".conversationUnreadIcon":{right:"58px"},".conversationUnreadIcon.centered":{right:"185px"},".uploadIcon":{right:"auto !important",left:"35px"}},ts={".unread":{right:"46px",left:"auto !important"},".messageColumn":{marginLeft:"0 !important",marginRight:"20px"},".messageRow":{paddingRight:"0 !important",paddingLeft:"16px",textAlign:"right"}},ns={".iconMessage":{right:"auto !important",left:"30px"},".iconMessageAvatar":{marginRight:"0 !important",marginLeft:"10px"},".iconMessageClose":{right:"auto !important",left:"-10px"}},as=function(e){function t(){return l()(this,t),f()(this,m()(t).apply(this,arguments))}return y()(t,e),p()(t,[{key:"renderCustomOverride",value:function(){var e=Object.assign({},$o,es,ts,ns);return r()(Xo.a,{scopeSelector:".kustomer[dir='rtl']",rules:e})}},{key:"renderBodyOverride",value:function(){var e=Object.assign({},$o,es,ts,ns);return r()(Xo.a,{scopeSelector:"body[dir='rtl']",rules:e})}},{key:"render",value:function(){return this.props.rtlOverride?this.renderCustomOverride():this.renderBodyOverride()}}]),t}(i.PureComponent),rs=Object(s.b)((function(e){return{rtlOverride:kr.b(e)}}))(Object(T.a)(as));n.d(t,"default",(function(){return os}));var is=r()(u.a,{},void 0,r()(qo,{}),r()(rs,{}),r()(Jo,{},void 0,r()(Po,{})));function os(e){var t=e.store;return r()(s.a,{store:t},void 0,is)}},OjRq:function(e,t,n){"use strict";var a=n("JPcv"),r=n.n(a),i=r.a.Record({user:"",type:"unknown",url:"",id:null,body:"",createdAt:null,trackingId:null,sessionId:null,campaignId:null,failed:!1,loading:!1,inputAt:null,promptAt:null,sentBy:{id:null,type:null},attachments:null,meta:null}),o=function(e){var t=e.sessionId,n=e.body,a=e.id,r=void 0===a?"__team":a,o=e.promptAt,s=void 0===o?(new Date).toISOString():o;return i({sessionId:t,body:n,id:r,promptAt:s,createdAt:null,trackingId:"__none",failed:!1,loading:!1,sentBy:{id:"__team",type:"user"}})},s=function(e){var t=e.sessionId,n=e.body,a=e.id,r=e.inputAt,o=void 0===r?(new Date).toISOString():r;return i({sessionId:t,body:n,id:a,inputAt:o,createdAt:null,failed:!1,loading:!1,sentBy:{id:a,type:"customer"}})},u=i,c=r.a.Record({id:null,type:"Unknown",name:"Unknown",preview:"No preview available",createdAt:null,lastSeenAt:0,lastMessageAt:0,trackingId:null,messages:r.a.OrderedSet(),lockedAt:null,queueId:"",satisfactionId:null,satisfactionStatus:null,satisfactionLockedAt:null,satisfactionSubmittedAt:null}),l=r.a.Record({id:null,name:"",avatarUrl:null}),d=r.a.Record({id:null,name:null,history:!0,avatarUrl:"",iconUrl:"",iconColor:"",greeting:"",enabled:!1,useDefaultSchedule:!1,activeForm:null,offhoursMessage:"",offhoursImageUrl:"",offhoursDisplay:"",hours:null,holidays:null,volumeControl:{},waitMessage:"",closableChat:!1,singleSessionChat:!1,showTypingIndicatorCustomerWeb:!1,showTypingIndicatorWeb:!1,showBrandingIdentifier:!0,showEmailInputBanner:!0}),p=r.a.Record({id:null,name:null,questions:[],inProgress:null,formValues:{},formPrefill:null,proactive:!1}),g=(r.a.List(),r.a.Record({id:"",type:"",name:"",contentType:"",contentLength:"",preview:"",url:""})),f=r.a.Record({id:"",type:"",name:"",sessionId:"",enteredAt:null,estimatedWaitTime:null,latestWaitTimeSeconds:null}),h=r.a.Record({id:null,scaleLabelHigh:null,scaleLabelLow:null,scaleType:null,scaleOptions:null,ratingPrompt:null,questions:[],introduction:null});n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"i",(function(){return s})),n.d(t,"a",(function(){return g})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return h}))},R7f6:function(e){e.exports=JSON.parse('{"kustomer.chat.offlineWarning":"You are offline and may not be able to send or receive messages","kustomer.chat.footer.brand":"by Kustomer","kustomer.chat.conversation.endChat.button.text":"End Chat","kustomer.chat.conversation.event.end.session":"Chat has ended","kustomer.chat.conversation.header.aria.label":"Chat conversation","kustomer.chat.conversation.close.chat.aria.label":"Close chat","kustomer.chat.conversation.headerInfo.waitTime.days":"Your expected wait time is {waitTime} days","kustomer.chat.conversation.headerInfo.waitTime.more_than_days":"Your expected wait time is greater than one day","kustomer.chat.conversation.headerInfo.waitTime.hours":"Your expected wait time is {waitTime} hours","kustomer.chat.conversation.headerInfo.waitTime.minutes":"Your expected wait time is {waitTime} minutes","kustomer.chat.conversation.headerInfo.waitTime.seconds":"Your expected wait time is {waitTime} seconds","kustomer.chat.conversation.headerInfo.waitTime.momentarily":"Someone should be with you momentarily","kustomer.chat.conversation.header.menu.button.back.aria.label":"Back","kustomer.chat.conversation.header.unread.aria.label":"{unreadMessageCount} unread messages","kustomer.chat.conversation.input.placeholder.inHours":"Type a message...","kustomer.chat.conversation.input.placeholder.afterHours":"Leave a message...","kustomer.chat.conversation.input.disabled.copy":"Thank You! We\'ll follow up on your request.","kustomer.chat.conversation.input.error.fileSize":"Please upload a file less than 10mb","kustomer.chat.conversation.input.error.fileType":"Only images and PDFs are allowed uploads","kustomer.chat.conversation.input.attachment.body":"File attached","kustomer.chat.conversation.input.attachment.error.failed":"Attachment upload failed","kustomer.chat.conversation.input.aria.label.send.message":"Send message","kustomer.chat.conversation.input.aria.label.upload.attachment.button":"Upload attachment","kustomer.chat.satisfactionSurvey.button.edit":"Edit","kustomer.chat.satisfactionSurvey.button.submit":"Submit","kustomer.chat.satisfactionSurvey.feedback.thanks":"Thank you for your feedback!","kustomer.chat.satisfactionSurvey.questions.field.max_length":"{count} / {max} characters","kustomer.chat.satisfactionSurvey.aria.label.text.area":"Text area for further details","kustomer.chat.satisfactionSurvey.aria.label.submit":"Submit satisfaction form","kustomer.chat.conversation.thread.aria.label.after.hours":"After hours","kustomer.chat.conversation.volumeControl.input.email.error":"Please enter a valid email","kustomer.chat.conversation.volumeControl.input.phone.error.1":"Please enter a valid phone number with a country code","kustomer.chat.conversation.volumeControl.input.placeholder":"Type a message...","kustomer.chat.conversation.volumeControl.wait.label":"I\'ll wait","kustomer.chat.conversation.volumeControl.noAvail.message":"Sorry, it looks like no one has become available in the time we expected. Please select an alternate contact method for us to follow up with you...","kustomer.chat.conversation.volumeControl.upfront.noAvail.message":"Our current wait time is approximately {waitTime}. You can choose to wait for the next available agent or select an alternative contact method for us to follow up with you.","kustomer.chat.conversation.volumeControl.channel.message":"Great, what\'s the best {channelName} to reach you at?","kustomer.chat.conversation.volumeControl.thankYou.message":"Thank you. We\'ll get back to you shortly.","kustomer.chat.conversation.volumeControl.phoneNumber.message":"phone number","kustomer.chat.conversation.volumeControl.days":"days","kustomer.chat.conversation.volumeControl.hours":"hours","kustomer.chat.conversation.volumeControl.minutes":"minutes","kustomer.chat.conversation.volumeControl.seconds.v2":"under 1 minute","kustomer.chat.conversation.volumeControl.aria.label.send.message":"Send message","kustomer.chat.describe.email.title":"Don\'t miss a response! Get notified by email:","kustomer.chat.describe.email.placeholder":"example@domain.com","kustomer.chat.describe.email.success":"Thanks! We\'ll update you here and by email to","kustomer.chat.describe.email.failure":"Please enter a valid email","kustomer.chat.conversation.message.failure":"Failed to send message, click to retry","kustomer.chat.message.article.list.follow.up.prompt.text":"Did you find those articles helpful?","kustomer.chat.conversation.message.attachment.loading":"Loading attachment...","kustomer.chat.typing.indicator.aria.label":"Typing indicator","kustomer.chat.form.input.placeholder.inHours":"Type a message...","kustomer.chat.form.input.placeholder.afterHours":"Leave a message...","kustomer.chat.form.input.enter.aria.label.send.message":"Send message","kustomer.chat.form.placeholder.error.phone.1":"Please enter a valid phone number with a country code","kustomer.chat.form.placeholder.error.number":"Please enter a valid number...","kustomer.chat.form.placeholder.error.email":"Please enter a valid email address, e.g. yourname@example.com.","kustomer.chat.form.placeholder.error.submit":"We\'re very sorry but there was an error with your message. Please try again later.","kustomer.chat.form.thank.you.message":"Thank you for contacting us!","kustomer.chat.form.mll.prompt":"Please select an item","kustomer.chat.form.mll.submit":"Submit","kustomer.chat.form.mll.breadcrumb.home":"Home","kustomer.chat.form.mll.input.placeholder":"Please select an item","kustomer.chat.form.mll.aria.label.breadcrumb.1":"{displayName} breadcrumb","kustomer.chat.history.header.aria.label.close.button":"Close widget","kustomer.chat.history.header.aria.label.main":"Chat conversation history","kustomer.chat.history.item.preview":"No preview available","kustomer.chat.history.item.closed":"Closed","kustomer.chat.history.item.aria.label.unread.messages":"{unreadMessages} unread messages","kustomer.chat.history.new_conversation_inHours":"Start a New Conversation","kustomer.chat.history.new_conversation_afterHours":"Leave a Message","kustomer.chat.history.new_conversation_singleChat":"Back to Chat","kustomer.chat.icon.aria.label.expand.chat.widget":"Expand chat widget","kustomer.chat.icon.custom.aria.label":"Custom icon from {iconUrl}","kustomer.chat.icon.default.aria.label":"Default Kustomer icon","kustomer.chat.icon.default.colored.aria.label":"Default Kustomer icon with color","kustomer.chat.icon.unread.badge.message.count":"{unreadMessageCount} unread messages","kustomer.chat.icon.messages.message.aria.label.close.button":"Close","kustomer.chat.avatar.aria.label.default.avatar":"Default avatar","kustomer.chat.avatar.aria.label.user.avatar":"User avatar","kustomer.chat.avatar.aria.label.avatar":"Avatar","kustomer.chat.input.with.submit.aria.label.input.email":"Input email","kustomer.chat.input.with.submit.aria.label.submit.email":"Submit email","kustomer.chat.icon.aria.label.modal":"Image in modal","kustomer.chat.icon.aria.label.modal.close":"Close","kustomer.chat.time.ago.wrapper.seconds.ago.1":"Just now"}')},TsPW:function(e,t,n){"use strict";var a=n("J4zp"),r=n.n(a),i=n("lwsE"),o=n.n(i),s=n("W8MJ"),u=n.n(s),c={ur:{name:"Urdu",nativeName:"Ø§Ø±Ø¯Ù"},he:{name:"Hebrew",nativeName:"×¢××¨××ª"},ar:{name:"Arabic",nativeName:"Ø§ÙØ¹Ø±Ø¨ÙØ©"}},l=function(e){return!!c[e]},d=n("mwIZ"),p=n.n(d),g=n("qPyV"),f=n.n(g),h=n("7jBj"),m=n("KbFG"),I=n("pZt1"),b=n.n(I),v=n("pI4q"),y=n("eC5B"),C=n.n(y);C.a.Runtime.createXHR=function(){var e=new XMLHttpRequest;return e.withCredentials=!0,e};var A=new(function(){function e(){o()(this,e),this._pusher=null,this.resetPusherProperties()}return u()(e,[{key:"channelAlreadyJoined",value:function(e){return!!this._joinedChannels[e]}},{key:"disconnect",value:function(){var e=this;return new Promise((function(t){return e._pusher&&(e._pusher.disconnect(),e._pusher=null),e.resetPusherProperties(),t()}))}},{key:"init",value:function(e){var t=e.pusherAuthEndpoint,n=e.trackingToken,a=e.pusherAccessKey,r=e.pusherCluster;this._pusher&&this.disconnect(),this._pusher=new C.a(a,function(e,t,n){var a={authEndpoint:e,auth:{headers:{"X-Kustomer":"kustomer","x-kustomer-tracking-token":t}},encrypted:!0,disableStats:!0};return n&&(a.cluster=n),a}(t,n,r))}},{key:"joinAppChannel",value:function(e,t){return this.joinChannel("app",e,t)}},{key:"joinChatActivityChannel",value:function(e,t){return this.joinChannel("activity",e,t)}},{key:"joinCustomerPresenceChannel",value:function(e,t){return this.joinChannel("customerPresence",e,t)}},{key:"sendChatActivity",value:function(e,t){var n=this._channels.activity.channel;return n?n.trigger(t,e):Promise.resolve()}},{key:"joinChannel",value:function(e,t,n){var a=this;return new Promise((function(r){if(!t||a.channelAlreadyJoined(t))return r();var i=a._channels[e];return i.name&&i.name===t||(a.leaveChannel(e),i.channel=a._pusher.subscribe(t),i.name=t,a.listen(i.channel,n),a._joinedChannels[t]=!0),r()}))}},{key:"leaveChannel",value:function(e){var t=this._channels[e];t&&t.name&&(this._pusher.unsubscribe(t.name),this._joinedChannels[t.name]=!1)}},{key:"resetPusherActivityChannel",value:function(){this._channels.activity={name:null,channel:null}}},{key:"resetPusherPresenceChannel",value:function(){this._channels.customerPresence={name:null,channel:null}}},{key:"leaveChatActivityChannel",value:function(){this.leaveChannel("activity")}},{key:"leaveCustomerPresenceChannel",value:function(){this.leaveChannel("customerPresence")}},{key:"listen",value:function(e,t){e&&e.bind_global(t)}},{key:"resetPusherProperties",value:function(){this._joinedChannels={},this._channels={app:{name:null,channel:null},activity:{name:null,channel:null},customerPresence:{name:null,channel:null}}}}]),e}()),M=n("94TQ"),w=n("GMKn"),k={CONNECTED:"connected",DISCONNECTED:"disconnected"},x=function(){function e(t){var n=t.api,a=t.onConnect,r=t.onMessage,i=t.onDisconnect,s=t.lastActivity,u=t.pollingEnabled,c=void 0===u||u;o()(this,e),this.api=n,this.pusherChannelName="presence-external-".concat(n.orgId,"-tracking-").concat(n.trackingId),this.onConnect=a,this.onDisconnect=i,this.onMessage=r,this.status=k.DISCONNECTED,this.poller=null,this.millisSinceActivity=s||Date.now(),this.skipFirstPoll=!!s,this.pollingEnabled=c}return u()(e,[{key:"start",value:function(){var e=this;return this.pollingEnabled?this.poller?void 0:(this.poller=new M.a({task:function(t){return e.updateConnectionState(t)},skipFirstPoll:this.skipFirstPoll}),this.poller.start()):this.updateConnectionState()}},{key:"_connect",value:function(){this.status=k.CONNECTED,this.initPusher(),this.joinChatSocketChannels().then(this.onConnect),this.poller&&this.poller.restart()}},{key:"_disconnect",value:function(){this.status=k.DISCONNECTED,this.disconnectPusher().then(this.onDisconnect),this.poller&&this.poller.restart()}},{key:"_toggleConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.connected)this.millisSinceActivity>6e4&&this.pollingEnabled&&this._disconnect();else{var t=Math.max(e,6e4);(this.millisSinceActivity<=t||!this.pollingEnabled)&&this._connect()}}},{key:"_updateMaxPollInterval",value:function(){if(this.poller)return this.millisSinceActivity<36e5?this.poller.setMaxInterval(3e4):this.millisSinceActivity<108e5?this.poller.setMaxInterval(3e5):this.poller.setMaxInterval()}},{key:"refresh",value:function(){this.poller&&this.poller.restart()}},{key:"updateConnectionState",value:function(e){var t=this;return this.pollingEnabled?this.getCustomerStats().then((function(n){var a=n.activity;t.millisSinceActivity=Object(m.d)(a),t._updateMaxPollInterval(),t._toggleConnection(e)})):this._toggleConnection()}},{key:"stop",value:function(){this.poller&&this.poller.stop(),this.disconnectPusher(),this.poller=null}},{key:"getCustomerStats",value:function(){var e=this;return this.api.getCustomerStats().then((function(t){var n=t.activity;return{activity:n&&e.api.convertServerToLocalDate(n).getTime()}}))}},{key:"initPusher",value:function(){A.init({pusherAuthEndpoint:"".concat(this.api.orgBaseUrl,"/c/v1/pusher/auth"),trackingToken:this.api.trackingToken,pusherAccessKey:this.api.pusherAccessKey,pusherCluster:this.api.pusherCluster})}},{key:"disconnectPusher",value:function(){return A.disconnect()}},{key:"joinChatSocketChannels",value:function(){return A.joinAppChannel(this.pusherChannelName,this.onMessage)}},{key:"leaveAndResetChatActivityChannel",value:function(){A.leaveChatActivityChannel(),A.resetPusherActivityChannel()}},{key:"joinChatActivityChannel",value:function(e,t){var n="private-external-".concat(this.api.orgId,"-chat-activity-").concat(e);return A.joinChatActivityChannel(n,t)}},{key:"leaveCustomerPresenceChannel",value:function(){A.leaveCustomerPresenceChannel(),A.resetPusherPresenceChannel()}},{key:"joinCustomerPresenceChannel",value:function(e,t){var n="presence-external-".concat(this.api.orgId,"-customer-activity-").concat(e);return A.joinCustomerPresenceChannel(n,t)}},{key:"sendChatActivity",value:function(e){var t=e.customerId,n=e.sessionId,a=e.status,r=e.eventName;return A.sendChatActivity({type:w.b,id:n,status:a,userId:t,userType:"customer",createdAt:Date.now()},r)}},{key:"connected",get:function(){return this.status===k.CONNECTED}}]),e}(),D=n("KQ8z"),N=n("sBJV"),j=n("Puqe"),T=n.n(j),S=n("noZS"),O=n.n(S),P=function(e){return{rating:e.rating,answers:e.answers}},E=function(e){return{satisfaction:new P(e.satisfaction)}},L=function(e){return O()(e,(function(e){return new E(e)}))},_=function(e){return t=e.data.data,new L(T()(t.attributes,"expiresAt"));var t},z=function(e){return{activity:e.activity}},R=function(e){return t=e.data.data,new z({activity:p()(t,"attributes.lastActivity")});var t},Z=n("vBIC"),U=function(e){return{id:e.id,name:e.name,avatarUrl:e.avatarUrl}},G=function(e){return new U({id:e.id,name:e.attributes.displayName,avatarUrl:e.attributes.avatarUrl})},W=function(e){return G(e.data.data)},B=function(e){var t=e.data.data;return Array.isArray(t)||(t=[t]),t.map(G)},F=function(e){return{id:e.id,name:e.name,hours:e.hours||{},timezone:e.timezone,timezoneOffset:e.timezoneOffset,default:e.default||!1}},H=F({name:"Default Hours",timezone:"America/New_York",default:!0,hours:{0:[[0,1440]],1:[[0,1440]],2:[[0,1440]],3:[[0,1440]],4:[[0,1440]],5:[[0,1440]],6:[[0,1440]]}}),Y=function(e){return e?(t=e.data.data,new F({id:p()(t,"id"),name:p()(t,"attributes.name"),hours:p()(t,"attributes.hours"),timezone:p()(t,"attributes.timezone"),timezoneOffset:p()(t,"attributes.timezoneOffset"),default:p()(t,"attributes.default")})):H;var t},Q=function(e){return{id:e.id,name:e.name,startDate:e.startDate,endDate:e.endDate,description:e.description,enabled:e.enabled||!1}},V=[],J=function(e){return new Q({id:p()(e,"id"),name:p()(e,"attributes.name"),startDate:p()(e,"attributes.startDate"),endDate:p()(e,"attributes.endDate"),description:p()(e,"attributes.description"),enabled:p()(e,"attributes.enabled")})},X=function(e){return{id:e.id,enabled:e.enabled,useDefaultSchedule:e.useDefaultSchedule,name:e.name,history:e.history,avatarUrl:e.avatarUrl,iconUrl:e.iconUrl,iconColor:e.iconColor,greeting:e.greeting,activeForm:e.activeForm,offhoursDisplay:e.offhoursDisplay,offhoursMessage:e.offhoursMessage,offhoursImageUrl:e.offhoursImageUrl,pusherAccessKey:e.pusherAccessKey,pusherCluster:e.pusherCluster,volumeControl:e.volumeControl,hours:e.hours,holidays:e.holidays,waitMessage:e.waitMessage,closableChat:e.closableChat,singleSessionChat:e.singleSessionChat,domainCriteria:e.domainCriteria,showTypingIndicatorCustomerWeb:e.showTypingIndicatorCustomerWeb,showTypingIndicatorWeb:e.showTypingIndicatorWeb,showBrandingIdentifier:e.showBrandingIdentifier,showEmailInputBanner:e.showEmailInputBanner,campaignsEnabled:e.campaignsEnabled}},K=function(e,t,n){return new X({id:p()(e,"id"),enabled:p()(e,"attributes.enabled"),useDefaultSchedule:p()(e,"attributes.useDefaultSchedule"),name:p()(e,"attributes.teamName"),history:!p()(e,"attributes.noHistory",!1),avatarUrl:p()(e,"attributes.teamIconUrl"),iconUrl:p()(e,"attributes.embedIconUrl"),iconColor:p()(e,"attributes.embedIconColor"),greeting:p()(e,"attributes.greeting"),activeForm:p()(e,"attributes.activeForm"),offhoursDisplay:p()(e,"attributes.offhoursDisplay"),offhoursMessage:p()(e,"attributes.offhoursMessage"),offhoursImageUrl:p()(e,"attributes.offhoursImageUrl"),pusherAccessKey:p()(e,"attributes.pusherAccessKey"),pusherCluster:p()(e,"attributes.pusherCluster"),volumeControl:p()(e,"attributes.volumeControl"),hours:t,holidays:n,waitMessage:p()(e,"attributes.waitMessage"),closableChat:p()(e,"attributes.closableChat"),singleSessionChat:p()(e,"attributes.singleSessionChat"),domainCriteria:p()(e,"attributes.domainCriteria"),showTypingIndicatorCustomerWeb:p()(e,"attributes.showTypingIndicatorCustomerWeb"),showTypingIndicatorWeb:p()(e,"attributes.showTypingIndicatorWeb"),showBrandingIdentifier:p()(e,"attributes.showBrandingIdentifier"),showEmailInputBanner:p()(e,"attributes.showEmailInputBanner",!0),campaignsEnabled:p()(e,"attributes.campaignsEnabled")})},q=function(e,t){return K(e.data.data,Y(t),(n=t)?n.data.included.map(J):V);var n},$=function(e){return{id:e.id,intervals:e.intervals||[]}},ee=function(e){return t=e.data.data,new $({id:p()(t,"id"),intervals:p()(t,"attributes.intervals")});var t},te=function(e){return{id:e.id,displayName:e.displayName,icon:e.icon}},ne=function(e){return new te({id:p()(e,"id"),displayName:p()(e,"attributes.displayName"),icon:p()(e,"attributes.icon")})},ae=function(e){return Array.isArray(p()(e,"data.data"))?e.data.data.map(ne):[ne(p()(e,"data.data"))]},re=function(e){return{id:e.id,type:e.type,name:e.name,contentType:e.contentType,contentLength:e.contentLength,url:e.url,fields:e.fields,preview:e.preview}},ie=function(e){return new re({id:p()(e,"data.data.id"),type:p()(e,"data.data.type"),name:p()(e,"data.data.attributes.name"),contentType:p()(e,"data.data.attributes.contentType"),contentLength:p()(e,"data.data.attributes.contentLength"),url:p()(e,"data.meta.upload.url"),fields:p()(e,"data.meta.upload.fields"),preview:p()(e,"data.data.links.related")})},oe=n("afOK"),se=n.n(oe),ue=function(e){return{id:e.id,introduction:e.introduction,ratingPrompt:e.ratingPrompt,questions:e.questions,scaleLabelHigh:e.scaleLabelHigh,scaleLabelLow:e.scaleLabelLow,scaleType:e.scaleType,scaleOptions:e.scaleOptions}},ce=function(e){return t=e.data,a=se()(t.included)||{},{satisfactionForm:new ue({id:p()(t,"data.id"),introduction:p()(a,"attributes.introduction"),ratingPrompt:p()(a,"attributes.ratingPrompt"),questions:p()(a,"attributes.questions"),scaleLabelHigh:p()(a,"attributes.scale.labelHigh"),scaleLabelLow:p()(a,"attributes.scale.labelLow"),scaleType:p()(a,"attributes.scale.type"),scaleOptions:p()(a,"attributes.scale.options"),lockedAt:p()(t,"data.attributes.lockedAt")}),session:(n={satisfactionId:p()(t,"data.id"),satisfactionStatus:p()(t,"data.attributes.status"),satisfactionLockedAt:p()(t,"data.attributes.lockedAt")},{satisfactionId:n.satisfactionId,satisfactionStatus:n.satisfactionStatus,satisfactionLockedAt:n.satisfactionLockedAt?Date.parse(n.satisfactionLockedAt):null})};var t,n,a},le=function(e){return{id:p()(e,"id"),htmlBody:p()(e,"attributes.htmlBody"),title:p()(e,"attributes.title")}},de=function(e){var t=p()(e,"data.data");return t?t.map(le):[]},pe=n("AqJW"),ge=n("MoPD"),fe=n("lFXU"),he=n("3wRA"),me=n("ci4T"),Ie=n("wo01"),be=n("k4Da"),ve=n.n(be),ye=function(e){var t=function(e){return e.map(Z.a)}(ve()(e.messages,(function(e){return"chat_message"===e.type})));return{id:e.id,session:{id:e.sessionId,trackingId:e.trackingId},messages:t}},Ce=function(e){return t=e.data,new ye({id:p()(t,"data.id"),sessionId:p()(t,"data.relationships.session.data.id"),trackingId:p()(t,"data.attributes.trackingId"),messages:p()(t,"included",[])});var t},Ae=function(e){return{id:p()(e,"data.data.id"),questions:p()(e,"data.data.attributes.questions"),formValues:p()(e,"data.meta.formValues"),proactive:p()(e,"data.data.attributes.proactive")}},Me=function(e){return{id:e.id,type:e.type,name:e.name,enteredAt:e.enteredAt,estimatedWaitTime:e.estimatedWaitTime,latestWaitTime:e.latestWaitTime,sessionId:e.sessionId}},we=function(e){var t=p()(e,"data");return new Me({id:p()(t,"data.id"),type:p()(t,"data.type"),name:p()(t,"data.attributes.name"),enteredAt:p()(t,"data.attributes.enteredAt"),estimatedWaitTime:p()(t,"data.attributes.estimatedWaitTimeSeconds"),latestWaitTime:p()(t,"data.attributes.latestWaitTimeSeconds"),sessionId:p()(t,"data.relationships.session.data.id")})};n.d(t,"a",(function(){return ke}));var ke=100,xe=5*h.b,De=function(){function e(t){o()(this,e),this.api=t,this._eventListeners={},window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this))}return u()(e,[{key:"init",value:function(){var e=this;return this.api.init().then((function(){e.disconnect(),e.store.dispatch(Object(ge.p)())}))}},{key:"start",value:function(e,t){this.store.dispatch(Object(ge.p)(t))}},{key:"stop",value:function(){this.store.dispatch(Object(ge.q)())}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.icon;!0===t?Object(v.c)("noIcon",!1):!1===t&&Object(v.c)("noIcon",!0),this.store.dispatch(Object(ge.m)())}},{key:"openToSession",value:function(e){this.store.dispatch(Object(ge.n)(e))}},{key:"close",value:function(){this.store.dispatch(Object(ge.k)())}},{key:"on",value:function(e,t){this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].push(t)}},{key:"broadcast",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this._eventListeners[e]&&this._eventListeners[e].forEach((function(e){e.apply(void 0,n)}))}},{key:"connect",value:function(e){var t=e.onConnect,n=e.onMessage,a=e.onDisconnect,r=e.lastActivity;if(!this.rtc){this.rtc=new x({api:this,onConnect:t,onMessage:n,onDisconnect:a,lastActivity:r,pollingEnabled:!1}),this.rtc.start()}}},{key:"subscribeToChatActivityChannel",value:function(){var e=this.store.getState(),t=this.store.dispatch,n=me.u(e),a=me.t(e),r=me.e(e);return"new"!==r&&(a||n)?this.rtc.joinChatActivityChannel(r,(function(e,n){return t(Object(he.sb)(e,n))})):Promise.resolve()}},{key:"unsubscribeFromChatActivityChannel",value:function(){this.rtc&&this.rtc.leaveAndResetChatActivityChannel()}},{key:"subscribeToCustomerPresenceChannel",value:function(){var e=this.customerId,t=this.store.dispatch,n=this.store.getState();return"new"!==me.e(n)&&e?this.rtc.joinCustomerPresenceChannel(e,(function(e,n){return t(Object(he.sb)(e,n))})):Promise.resolve()}},{key:"unsubscribeFromCustomerPresenceChannel",value:function(){this.rtc&&this.rtc.leaveCustomerPresenceChannel()}},{key:"sendToChatActivityChannel",value:function(e,t){var n=this.store.getState();if(!me.u(n))return Promise.resolve();var a={sessionId:me.e(n),customerId:this.customerId,status:e,eventName:t};this.rtc&&this.rtc.sendChatActivity(a)}},{key:"startStatsPoller",value:function(e){var t=e.onCallStats;this.statsPoller||(this.statsPoller=new M.a({task:function(){return t()},defaultInterval:h.b,skipFirstPoll:!0}),this.statsPoller.start())}},{key:"disconnect",value:function(){this.rtc&&(this.rtc.stop(),this.rtc=null)}},{key:"handleOnline",value:function(){this.store.dispatch(Object(ge.v)()),this.store.dispatch(Object(ge.s)())}},{key:"handleOffline",value:function(){this.store.dispatch(Object(ge.u)()),Ie.b()}},{key:"hasCustomerId",value:function(){return!!this.customerId}},{key:"identify",value:function(){var e,t=this;(e=this.api).identify.apply(e,arguments).then((function(){t.disconnect(),t.store.dispatch(Object(ge.o)())}))}},{key:"trackEvent",value:function(){return this.api.trackEvent()}},{key:"clearTracking",value:function(e){var t=this;return this.api.clearTracking().then((function(){t.disconnect(),t.store.dispatch(Object(ge.o)(e))}))}},{key:"describe",value:function(){var e;return(e=this.api).describe.apply(e,arguments)}},{key:"describeNext",value:function(){var e;return(e=this.api).describeNext.apply(e,arguments)}},{key:"describeEmail",value:function(e){return this.describe({email:e})}},{key:"flushPendingDescribeNexts",value:function(){return this.api.flushPendingDescribeNexts("conversation")}},{key:"createSession",value:function(e){var t={title:e};return this.ensureRecentConnection(),this.api.sdkPost("chat/sessions",t).then(N.a)}},{key:"getChatSession",value:function(e){return this.getChatSessions().then((function(t){var n=t.find((function(t){return t.id===e}));if(!n)throw Error("Unable to find session");return n}))}},{key:"getSessionState",value:function(){return this.api.sdkGet("chat/states/current").then(_)}},{key:"updateSessionState",value:function(e){return this.api.sdkPut("chat/states/current",e).then(_)}},{key:"getUsers",value:function(e){if(!e)return Promise.resolve([]);var t=e.filter((function(e){return"__team"!==e}));return 0===t.length?Promise.resolve([]):this.api.sdkGetWithCache("users/".concat(t.join(","))).then(B)}},{key:"getUser",value:function(e){return e&&"__team"!==e?this.api.sdkGetWithCache("users/".concat(e)).then(W):null}},{key:"getArticles",value:function(e){return this.api.sdkGet("kb/deflection/chat?term=".concat(e,"&pageSize=3")).then(de)}},{key:"getChatSessions",value:function(e){return e?this.api.sdkGet("chat/sessions").then(N.b):this.api.sdkGetWithCache("chat/sessions").then(N.b)}},{key:"getCustomerStats",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.api.sdkGetWithCache("chat/customers/stats").then(R).then((function(n){return t&&e.store.dispatch(Object(he.qb)(n.activity)),n}))}},{key:"getSchedule",value:function(e){var t=this,n=e.id,a=void 0===n?void 0:n,r=e.attemptRefetchForDefault,i=void 0===r||r,o=a||"default";return this.api.sdkGetWithCache("schedules/".concat(o,"?include=holidays")).catch((function(e){var n=e&&e.response&&e.response.status;404!==n&&400!==n||!i||t.getSchedule({attemptRefetchForDefault:!1})}))}},{key:"getCurrentCompanySettings",value:function(){var e=this,t=this.getScheduleOverride();return Promise.all([this.api.sdkGetWithCache("chat/settings"),this.getSchedule({id:t})]).then((function(e){var t=r()(e,2),n=t[0],a=t[1];return q(n,a)})).then((function(t){e.api.pusherAccessKey=t.pusherAccessKey,e.api.pusherCluster=t.pusherCluster;var n=t;return t.name||(n.name=e.orgName[0].toUpperCase()+e.orgName.substr(1)),n}))}},{key:"getMessagesForSession",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="page=".concat(t,"&pageSize=").concat(ke);return this.api.sdkGetWithCache("chat/sessions/".concat(e.id,"/messages?").concat(n)).then(Z.c).then((function(e){return e&&0!==e.length?e:[]}))}},{key:"getMessagesForMultiSession",value:function(e){var t=this;return this.api.all(e.map((function(e){return t.getMessagesForSession(e).then((function(t){return{sessionId:e.id,messages:t}}))})))}},{key:"getChatForm",value:function(e){return this.api.sdkGet("chat/forms/".concat(e)).then(Ae).catch((function(e){var t=p()(e,"response.status"),n=p()(e,"response.data.errors"),a=b()(n),r=p()(a,"code"),i=p()(a,"source.parameter");if(400===t)return"badparam"===r?console.error("There was an error fetching the form. You have entered an invalid ".concat(i,".")):console.error("There was an error fetching the form."),{};if(404===t)return console.error("There was an error fetching the form. Please check if the form still exists in your Chat Assistant Settings. https://help.kustomer.com/chat-conversational-assistant-B1b2rXYXz"),{};throw e}))}},{key:"getTeams",value:function(e){return this.api.sdkGetWithCache("chat/teams/".concat(e)).then(ae)}},{key:"sendClientActivity",value:function(e){var t={currentPageSeconds:e,previousPage:document.referrer,currentPage:window.location.href};return this.api.sdkPost("client-activity",t)}},{key:"initClientActivity",value:function(){var e=this;return this.sendClientActivity(0).then(ee).then((function(t){return f()(t.intervals,"seconds").forEach((function(t){setTimeout((function(){return e.sendClientActivity(t.seconds)}),1e3*t.seconds)})),t}))}},{key:"submitForm",value:function(e,t){return this.ensureRecentConnection(),this.api.sdkPost("chat/forms/".concat(e,"/responses"),t).then(Ce)}},{key:"markChatSessionSeen",value:function(e){return this.api.sdkPut("chat/sessions/".concat(e),{lastSeenAt:(new Date).toISOString()}).then(N.a)}},{key:"refreshTrackingToken",value:function(){return this.api.getCurrentTrackingToken()}},{key:"fetchChatMessageById",value:function(e){var t=e.messageId,n=e.sessionId;return this.api.sdkGetWithCache("chat/sessions/".concat(n,"/messages/").concat(t)).then(Z.b)}},{key:"sendChatMessage",value:function(e){return this.api.sdkPost("chat/messages",e).then(Z.b)}},{key:"setActiveSession",value:function(e){this.api.activeConversation=e}},{key:"submitVCForm",value:function(e){return this.api.sdkPost("chat/volume-control/responses",e).then(Ce)}},{key:"markConversationDone",value:function(e,t){return this.api.sdkPut("chat/sessions/".concat(e),{locked:!0,lockReason:t}).then(N.a)}},{key:"createAttachment",value:function(e){return this.api.sdkPost("chat/attachments",e).then(ie)}},{key:"uploadAttachment",value:function(e,t){return this.api.sdkExternalPost(e,t)}},{key:"fetchMessageAttachment",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.api.sdkGet("chat/messages/".concat(e,"/attachments/").concat(t,"?redirect=").concat(n)).then(ie)}},{key:"createMessageWithAttachment",value:function(e){return this.api.sdkPost("chat/messages",e).then(Z.b)}},{key:"getQueueWaitTime",value:function(e){return this.api.sdkGet("chat/sessions/".concat(e,"/queue")).then(we)}},{key:"convertServerToLocalDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=new Date(e).getTime()+this.api.millisAheadOfServer;return new Date(t)}},{key:"convertLocalToServerDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=new Date(e).getTime()-this.api.millisAheadOfServer;return new Date(t)}},{key:"shouldMaintainActiveChats",value:function(e){if(!e)return!1;var t=this.convertServerToLocalDate(e).getTime();return m.d(t)<xe}},{key:"isRTCAlive",value:function(){return p()(this,"rtc.connected")}},{key:"isChatAvailable",value:function(){var e=this.store.getState(),t=me.l(e);if(!t.hours)return Promise.reject(new Error("company hours not found"));var n=t.hours,a=t.enabled,r=t.holidays,i=m.h(n),o=m.g(r);return Promise.resolve(i&&a&&!o)}},{key:"openConversationsCount",value:function(){var e=this.store.getState(),t=me.d(e);return Promise.resolve(t)}},{key:"ensureRecentConnection",value:function(){this.rtc&&this.rtc.refresh()}},{key:"setWidgetToRTL",value:function(){try{document.querySelector(".kustomer").dir="rtl",this.store.dispatch(Object(ge.w)())}catch(e){}}},{key:"setLangOverride",value:function(e){D.a.set("lang",e),l(e)&&this.setWidgetToRTL()}},{key:"getLangOverride",value:function(){return D.a.get("lang")||void 0}},{key:"isLangOverrideRTL",value:function(){var e=this.getLangOverride();return l(e)}},{key:"removeLangOverride",value:function(){D.a.remove("lang")}},{key:"setFormOverride",value:function(e){D.a.set("form",e)}},{key:"getFormOverride",value:function(){return D.a.get("form")||void 0}},{key:"removeFormOverride",value:function(){this.getFormOverride()&&D.a.remove("form")}},{key:"setTempFormOverride",value:function(e){D.a.set("tempForm",e)}},{key:"getTempFormOverride",value:function(){return D.a.get("tempForm")||void 0}},{key:"removeTempFormOverride",value:function(){this.getTempFormOverride()&&D.a.remove("tempForm")}},{key:"getScheduleOverride",value:function(){return D.a.get("schedule")||void 0}},{key:"getSatisfactionForm",value:function(e){return this.api.sdkPost("chat/sessions/".concat(e,"/satisfaction"),{}).then(ce)}},{key:"submitSatisfactionResponse",value:function(e,t){return this.api.sdkPut("chat/satisfaction-responses/".concat(e),t)}},{key:"openAndSendMessage",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.icon,i=a.form;if(!e)return Promise.reject(Error("Missing message object"));if(!e.body)return Promise.reject(Error("Missing message 'body'"));!0===r?Object(v.c)("noIcon",!1):!1===r&&Object(v.c)("noIcon",!0);var o=Object.assign({},e),s=m.a(e.body);return s?(o=Object.assign({},o,{body:s}),this.store.dispatch(Object(ge.i)()).then((function(e){if(!e.enabled)return Promise.reject(Error("Chat is disabled"));var a=e.offhoursDisplay,r=m.h(e.hours);return r||"none"!==a?r||"offline"!==a?(t&&n.describeNext("conversation",t),i?n.store.dispatch(pe.e(s)).then((function(){return n.open()})):n.store.dispatch(Object(fe.g)(o)).then((function(e){e&&e.id&&n.openToSession(e.id)}))):Promise.reject(Error("Chat is offline")):Promise.reject(Error("Chat is hidden"))}))):Promise.reject(Error("Message 'body' is invalid"))}},{key:"store",get:function(){return n("UqNH").default}},{key:"orgId",get:function(){return this.api.org.id}},{key:"orgName",get:function(){return this.api.org.name}},{key:"orgBaseUrl",get:function(){return this.api.orgBaseURL}},{key:"pusherAccessKey",get:function(){return this.api.pusherAccessKey}},{key:"pusherCluster",get:function(){return this.api.pusherCluster}},{key:"trackingToken",get:function(){return this.api.trackingToken}},{key:"trackingId",get:function(){return this.api.trackingId}},{key:"customerId",get:function(){return this.api.customerId},set:function(e){this.api.customerId=e}},{key:"customerVerified",get:function(){return this.api.customerVerified}}]),e}(),Ne=window.Kustomer||{_q:[],_i:[]};var je=new De(Ne.API);Ne.identify=function(){return je.identify.apply(je,arguments)},Ne.clear=function(){return je.clearTracking.apply(je,arguments)},Ne.track=function(){return je.trackEvent.apply(je,arguments)},Ne.describe=function(){return je.describe.apply(je,arguments)},Ne.describeCustomer=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return je.describe.apply(je,["customer"].concat(t))},Ne.describeConversation=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return je.describe.apply(je,["conversation"].concat(t))},Ne.describeNextConversation=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return je.describeNext.apply(je,["conversation"].concat(t))},Ne.start=function(e,t){var n=p()(e,"form"),a=p()(e,"lang");!e||e.icon?Object(v.c)("noIcon",!1):Object(v.c)("noIcon",!0),a?je.setLangOverride(a):null===a&&je.removeLangOverride(),n?je.setFormOverride(n):je.removeFormOverride();for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return je.start.apply(je,[e,t].concat(i))},Ne.stop=function(){return je.stop.apply(je,arguments)},Ne.open=function(){return je.open.apply(je,arguments)},Ne.openAndSendMessage=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=p()(t,2),r=a&&a.form;return r?je.setTempFormOverride(r):je.removeTempFormOverride(),je.openAndSendMessage.apply(je,t)},Ne.isChatAvailable=function(){return je.isChatAvailable()},Ne.openConversationsCount=function(){return je.openConversationsCount()},Ne.close=function(){return je.close.apply(je,arguments)},Ne.on=function(e,t){return je.on(e,t)};t.b=je},Ualb:function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return C})),n.d(t,"c",(function(){return A})),n.d(t,"e",(function(){return M}));var a=n("OjRq"),r=n("KbFG"),i=n("6acW"),o=n.n(i),s=n("mwIZ"),u=n.n(s),c=n("EstQ"),l=n("sMkI"),d=n("3wRA"),p=n("ci4T"),g=n("lFXU"),f=n("wo01"),h=n("/bK8"),m=function(e,t){return function(n){if(t){var a=1e3*t.timeout;a&&setTimeout((function(){return n(function(e,t){return function(n,a){if(p.E(a(),e)&&t.markDoneAfterTimeout){var r=l.a.TIMED_OUT;n(d.db(e,r)),n(d.K(e))}}}(e,t))}),a)}}},I=function(e,t,n){return function(r,i){var o=p.l(i()),s=function(e){switch(!0){case e>86400:return"".concat(Math.ceil(e/86400)," ").concat(c.a.formatMessage(h.a.days));case e>3600:return"".concat(Math.ceil(e/3600)," ").concat(c.a.formatMessage(h.a.hours));case e>60:return"".concat(Math.ceil(e/60)," ").concat(c.a.formatMessage(h.a.minutes));default:return c.a.formatMessage(h.a.seconds)}}(p.lb(i(),e)),l=u()(o,"volumeControl.useDynamicWaitMessage"),f=Object(a.c)({sessionId:e,body:l&&n?c.a.formatMessage(h.a.no_avail_upfront,{waitTime:s}):c.a.formatMessage(h.a.no_avail),id:"__team"});r(g.i(f)),r(d.J(e)),r(m(e,t))}},b=function(e,t,n){return function(a,r){var i=p.A(r(),e),o=i&&i.find((function(e){return"user"===e.sentBy.type&&"__team"!==e.sentBy.id})),s=p.S(r(),e)||!1,u=p.E(r(),e);o||s||u||a(I(e,t,n))}},v=function(e,t){return function(n,a){var r=a(),i=p.l(r),o=p.jb(r),s=i&&i.volumeControl||{},u=s&&1e3*s.promptDelay,c=p.M(r);c&&t&&!o&&s&&s.enabled?n(b(e,s,c)):!c&&!t&&!o&&s&&u&&s.enabled&&f.a({action:b,dispatch:n,sendToSessionId:e,settings:s,upfrontEnabled:c,delay:u})}},y=function(e,t){return function(n){var i="email"!==t?c.a.formatMessage(h.a.phone_number):"email",s=c.a.formatMessage(h.a.channel_message,{channelName:i}),u=Object(r.e)(),l=o()(t),d=Object(a.i)({sessionId:e,body:l,id:u});n(g.i(d)),setTimeout((function(){var t=Object(a.c)({sessionId:e,body:s,id:"__team_1"});n(g.i(t))}),1500)}},C=function(e){return function(t){t(d.K(e))}},A=function(e){return function(t,n){var a=p.g(n()),r=function(e,t){var n=e.toList(),a=n.get(0),r=n.get(1),i=n.get(2),s=n.get(3),u=n.get(4),c="Email"===r.body?"email":"phone",l=o()(r.body);return{session:t,messages:[{prompt:a.body,promptAt:a.promptAt,input:l,inputAt:r.inputAt,property:"conversation_replyChannel"},{prompt:i.body,promptAt:i.promptAt,input:s.body,inputAt:s.inputAt,property:"customer_".concat(c)},{prompt:u.body,promptAt:u.promptAt}]}}(a.slice(a.size-5),e);t(d.ob(r))}},M=function(e,t){return function(n){var i=Object(r.e)(),o=Object(a.i)({sessionId:e,body:t,id:i}),s=c.a.formatMessage(h.a.thankYou_message);n(g.i(o)),setTimeout((function(){var t=Object(a.c)({sessionId:e,body:s,id:"__team_2"});n(g.i(t)),n(A(e))}),1500)}}},UqNH:function(e,t,n){"use strict";n.r(t);var a=n("JPcv"),r=n.n(a),i=n("KEuA"),o=n.n(i);t.default=o()(r.a.fromJS(window.__INITIAL_STATE__))},WGix:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o}));var a=function(e){return e.getIn(["app","route"])},r=function(e){return e.getIn(["app","isRTL"])},i=function(e){return e.getIn(["app","isBlackListed"])},o=function(e){return e.getIn(["app","online"])}},WUEa:function(e,t,n){"use strict";var a=n("lwsE"),r=n.n(a),i=n("W8MJ"),o=n.n(i),s=n("a1gu"),u=n.n(s),c=n("Nsbk"),l=n.n(c),d=n("PJYZ"),p=n.n(d),g=n("7W2i"),f=n.n(g),h=n("q1tI"),m=n.n(h),I=n("JRPe"),b=n("mwIZ"),v=n.n(b),y=function(e){function t(){var e;return r()(this,t),e=u()(this,l()(t).call(this)),t.instance||(t.instance=p()(e)),e}return f()(t,e),o()(t,[{key:"render",value:function(){return!1}}]),t}(m.a.PureComponent),C=Object(I.e)(y),A=function(){return v()(y,"instance.props.intl")};n.d(t,"b",(function(){return A}));t.a=C},ci4T:function(e,t,n){"use strict";n.d(t,"D",(function(){return l})),n.d(t,"C",(function(){return I})),n.d(t,"e",(function(){return b})),n.d(t,"y",(function(){return v})),n.d(t,"w",(function(){return y})),n.d(t,"x",(function(){return C})),n.d(t,"E",(function(){return M})),n.d(t,"X",(function(){return k})),n.d(t,"f",(function(){return x})),n.d(t,"nb",(function(){return D})),n.d(t,"S",(function(){return N})),n.d(t,"l",(function(){return T})),n.d(t,"o",(function(){return S})),n.d(t,"q",(function(){return O})),n.d(t,"m",(function(){return P})),n.d(t,"p",(function(){return E})),n.d(t,"r",(function(){return L})),n.d(t,"a",(function(){return _})),n.d(t,"n",(function(){return z})),n.d(t,"u",(function(){return R})),n.d(t,"t",(function(){return Z})),n.d(t,"s",(function(){return U})),n.d(t,"v",(function(){return G})),n.d(t,"z",(function(){return B})),n.d(t,"I",(function(){return H})),n.d(t,"P",(function(){return Y})),n.d(t,"c",(function(){return Q})),n.d(t,"g",(function(){return V})),n.d(t,"i",(function(){return J})),n.d(t,"O",(function(){return X})),n.d(t,"Q",(function(){return K})),n.d(t,"J",(function(){return $})),n.d(t,"L",(function(){return ee})),n.d(t,"K",(function(){return te})),n.d(t,"j",(function(){return ne})),n.d(t,"ib",(function(){return ae})),n.d(t,"eb",(function(){return re})),n.d(t,"ob",(function(){return ie})),n.d(t,"U",(function(){return oe})),n.d(t,"cb",(function(){return se})),n.d(t,"bb",(function(){return ce})),n.d(t,"W",(function(){return le})),n.d(t,"h",(function(){return de})),n.d(t,"Z",(function(){return pe})),n.d(t,"Y",(function(){return ge})),n.d(t,"T",(function(){return fe})),n.d(t,"k",(function(){return he})),n.d(t,"hb",(function(){return me})),n.d(t,"gb",(function(){return Ie})),n.d(t,"mb",(function(){return be})),n.d(t,"b",(function(){return ve})),n.d(t,"jb",(function(){return ye})),n.d(t,"kb",(function(){return Ce})),n.d(t,"db",(function(){return Ae})),n.d(t,"R",(function(){return ke})),n.d(t,"d",(function(){return xe})),n.d(t,"B",(function(){return De})),n.d(t,"H",(function(){return Ne})),n.d(t,"G",(function(){return je})),n.d(t,"fb",(function(){return Te})),n.d(t,"lb",(function(){return Se})),n.d(t,"M",(function(){return Oe})),n.d(t,"N",(function(){return Pe})),n.d(t,"F",(function(){return Ee})),n.d(t,"ab",(function(){return Le})),n.d(t,"V",(function(){return ze})),n.d(t,"A",(function(){return Re}));var a=n("peh1"),r=n("JPcv"),i=n.n(r),o=n("mwIZ"),s=n.n(o),u=n("OjRq"),c=function(e){return e.getIn(["chat","route"])},l=function(e){return e.getIn(["chat","entities","sessions"],i.a.Map())},d=function(e){return e.getIn(["chat","entities","company"],Object(u.b)())},p=function(e){return e.getIn(["chat","entities","users"],i.a.Map())},g=function(e){return e.getIn(["chat","entities","messages"],i.a.Map())},f=function(e){return e.getIn(["chat","entities","attachments"],i.a.Map())},h=function(e){return e.getIn(["chat","entities","sessionQueues"],i.a.Map())},m=function(e){return e.getIn(["chat","volumeControlSessions"],i.a.List())},I=function(e){return e.getIn(["chat","scrollToMessageId"])},b=function(e){return e.getIn(["chat","activeSessionId"])},v=function(e){return e.getIn(["chat","lastActivity"])},y=function(e){return e.getIn(["chat","focus"])},C=function(e){return e.getIn(["chat","isCampaignClicked"])},A=function(e,t){var n=t.message||Object(u.e)();return e.getIn(["chat","entities","users",n.sentBy.id],Object(u.j)())},M=function(e,t){return m(e).includes(t)},w=function(e,t){var n=t.item||Object(u.h)();return e.getIn(["chat","entities","sessions",n.id],Object(u.h)())},k=function(){return Object(a.createSelector)([l,function(e,t){return t}],(function(e,t){return e.get(t)}))},x=Object(a.createSelector)(m,b,(function(e,t){return e.includes(t)})),D=function(e){var t=e.getIn(["chat","entities","company","volumeControl"],{}),n=t.followUpChannels&&t.followUpChannels.slice()||[];return t.hideWaitOption||(n=n.concat(["wait"])),n},N=function(e,t){return Boolean(e.getIn(["chat","entities","sessions",t,"lockedAt"],!1))},j=function(e,t){var n=(t.item||Object(u.h)()).get("id");return e.getIn(["chat","sessions",n,"messages"],i.a.List())},T=Object(a.createSelector)([d],(function(e){return e})),S=Object(a.createSelector)(d,(function(e){return!!e.history})),O=Object(a.createSelector)([T],(function(e){return e?e.iconUrl:""})),P=Object(a.createSelector)([T],(function(e){return e?e.avatarUrl:""})),E=Object(a.createSelector)([T],(function(e){return e?e.iconColor:""})),L=Object(a.createSelector)([T],(function(e){return!e||e.showBrandingIdentifier})),_=Object(a.createSelector)([function(e){return e.getIn(["app","route"])},c],(function(e,t){return"app"===e&&"conversation"===t})),z=Object(a.createSelector)(T,(function(e){return e.closableChat})),R=Object(a.createSelector)(T,(function(e){return e.showTypingIndicatorWeb})),Z=Object(a.createSelector)(T,(function(e){return e.showTypingIndicatorCustomerWeb})),U=Object(a.createSelector)(T,(function(e){return e.showEmailInputBanner})),G=Object(a.createSelector)([c],(function(e){return e})),W=Object(a.createSelector)([function(e){return e.getIn(["chat","sessions"],i.a.OrderedSet())},l],(function(e,t){return e.map((function(e){return t.get(e)})).filter((function(e){return 0!==e.messages.size})).toOrderedSet()})),B=Object(a.createSelector)([function(e,t){return t},l],(function(e,t){return t.get(e,Object(u.h)()).lastSeenAt})),F=Object(a.createSelector)([W],(function(e){return e})),H=Object(a.createSelector)([F,z],(function(e,t){if(t){var n=e.filter((function(e){return!e.lockedAt})).sort((function(e,t){return t.lastMessageAt-e.lastMessageAt})),a=e.filter((function(e){return e.lockedAt})).sortBy((function(e){return e.lockedAt}));return n.concat(a)}return e.sort((function(e,t){return t.lastMessageAt-e.lastMessageAt}))})),Y=Object(a.createSelector)([F],(function(e){return e&&e.size>0})),Q=Object(a.createSelector)([b,l],(function(e,t){return t.get(e,Object(u.h)())})),V=Object(a.createSelector)([Q,g],(function(e,t){return e.messages.map((function(e){return t.get(e)}))})),J=Object(a.createSelector)([V,p],(function(e,t){return e.reduce((function(e,n){if("user"!==n.sentBy.type)return e;var a=t.get(n.sentBy.id);return a?e.push(a):e}),i.a.List())})),X=Object(a.createSelector)([V],(function(e){return e&&e.reduce((function(e,t){return e||"user"===t.sentBy.type&&"__team"!==t.sentBy.id}),!1)})),K=Object(a.createSelector)([V],(function(e){return e&&e.reduce((function(e,t){return e||"customer"===t.sentBy.type}),!1)})),q=Object(a.createSelector)([W,g],(function(e,t){return i.a.fromJS(e.map((function(e){var n=function(e){return e.messages.reduce((function(n,a){return t.get(a,Object(u.e)()).createdAt>e.lastSeenAt?n+1:n}),0)}(e);return{sessionId:e.id,unreadCount:n}})))})),$=Object(a.createSelector)([q],(function(e){return e.reduce((function(e,t){return e+t.unreadCount}),0)})),ee=Object(a.createSelector)([q,b],(function(e,t){return e.reduce((function(e,n){return n.sessionId===t?e:e+n.unreadCount}),0)})),te=Object(a.createSelector)([q,b],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((function(e,n){return n.sessionId!==t?e:e+n.unreadCount}),0)})),ne=Object(a.createSelector)([W,g],(function(e,t){if(!e||!t)return i.a.OrderedSet();var n=e.map((function(e){var n=function(e){return e.messages.reduce((function(n,a){var r=t.get(a,Object(u.e)());return r.campaignId&&r.createdAt>e.lastSeenAt?r:n}),void 0)}(e);return n?{sessionId:e.id,message:n}:null})).filter((function(e){return e}));return i.a.fromJS(n).take(3)})),ae=Object(a.createSelector)(V,(function(e){var t=i.a.fromJS(e).toMap().first()||Object(u.e)();if(t.get("campaignId"))return!!t.get("campaignId")&&e.reduce((function(e,t){return e||"customer"===t.sentBy.type}),!1)})),re=Object(a.createSelector)(V,(function(e){return Boolean(e.find((function(e){return e.campaignId})))})),ie=Object(a.createSelector)(l,g,(function(e,t){return t.sessionId}),(function(e,t,n){var a=e.get(n);if(!a)return!1;var r=a.messages.map((function(e){return t.get(e)}));return Boolean(r.find((function(e){return e.campaignId})))})),oe=function(){return Object(a.createSelector)([j,g],(function(e,t){return t.get(e.last())}))},se=function(){return Object(a.createSelector)([w,g],(function(e,t){return e.messages.reduce((function(n,a){return t.get(a,Object(u.e)()).createdAt>e.lastSeenAt?n+1:n}),0)}))},ue=function(e,t,n){return e.messages.reduce((function(e,a){var r=t.get(a,Object(u.e)()),i=r.sentBy.id;if("user"!==r.sentBy.type)return e;var o=n.get(i);return o?e.push(o):e}),i.a.List())},ce=function(){return Object(a.createSelector)([w,g,p,T],(function(e,t,n,a){var r=ue(e,t,n).last();return r&&r.name?r.name:a.name}))},le=function(){return Object(a.createSelector)([w,g,p,T],(function(e,t,n,a){var r=ue(e,t,n).last();return r&&r.avatarUrl?r.avatarUrl:a.avatarUrl}))},de=Object(a.createSelector)([function(e){return e.getIn(["chat","socketActivity"])},b],(function(e,t){var n=e.get(t);if(n)return n.get("typingStatus")})),pe=function(){return Object(a.createSelector)([w,g],(function(e,t){var n=t.get(e.messages.last(),Object(u.e)());return s()(n,"createdAt")}))},ge=function(){return Object(a.createSelector)([w,g],(function(e,t){var n=s()(e,"messages");if(t&&t.size){var a=n&&n.last();return t.get(a,Object(u.e)())}}))},fe=function(){return Object(a.createSelector)([A],(function(e){return e}))},he=function(e){return e.getIn(["chat","entities","forms"],Object(u.d)())},me=Object(a.createSelector)([function(e){return e.getIn(["chat","entities","articles"])}],(function(e){return e.toArray()})),Ie=function(e){return e.getIn(["chat","articlesFetching"])},be=Object(a.createSelector)((function(e){return e.getIn(["chat","entities","teams"])}),(function(e){return e.map((function(e){return{value:e.get("id"),displayName:e.get("displayName"),icon:e.get("icon")}})).toArray()})),ve=function(e){var t=he(e),n=i.a.fromJS(t.get("questions"));return!!n.size&&Boolean(n.find((function(e){return"customer_email"===e.get("property")})))},ye=function(e){return e.getIn(["chat","isAfterHours"])},Ce=function(e){return e.getIn(["chat","entities","company","offhoursImageUrl"])},Ae=function(){return Object(a.createSelector)(g,f,(function(e,t){return t.message.id}),(function(e,t,n){return e.get(n,i.a.Map()).attachments?t.get(n):null}))},Me=Object(a.createSelector)(l,(function(e){return e.filter((function(e){return!e.lockedAt}))})),we=Object(a.createSelector)(Me,g,(function(e,t){return e.filter((function(e){return!e.messages.every((function(e){return t.get(e).campaignId}))}))})),ke=Object(a.createSelector)(we,(function(e){return e.size>1})),xe=Object(a.createSelector)(we,(function(e){return e.size})),De=Object(a.createSelector)(Me,(function(e){var t=e.first();if(t)return t.id})),Ne=function(e){return e.getIn(["chat","singleChat","sessionId"])},je=function(e){return e.getIn(["chat","singleChat","enabled"])},Te=Object(a.createSelector)(Q,h,(function(e,t){var n=t.find((function(t){return t.sessionId===e.id}));return n?n.estimatedWaitTime:null})),Se=function(e,t){var n=h(e).find((function(e){return e.sessionId===t}));return n?n.estimatedWaitTime:null},Oe=function(e){return"upfront"===e.getIn(["chat","entities","company","volumeControl"],i.a.Record()).mode},Pe=function(e){return e.getIn(["chat","entities","company","volumeControl"],i.a.Record()).upfrontWaitThreshold},Ee=function(e){return e.getIn(["chat","sessionStates"])},Le=function(){var e=Object(a.createSelector)([Ee,function(e,t){return t}],(function(e,t){return e?e["session_".concat(t)]:null}));return Object(a.createSelector)(e,(function(e){return e?e.satisfaction:null}))},_e=function(e){return e.getIn(["chat","entities","satisfactionForms"],i.a.Map())},ze=function(){return Object(a.createSelector)([_e,function(e,t){return t}],(function(e,t){return e.get(t)||Object(u.g)()}))},Re=Object(a.createSelector)([function(e,t){return t},g],(function(e,t){return t&&t.filter((function(t){return t.get("sessionId")===e}))}))},esmf:function(e,t,n){e.exports=n("O3XI").default},f4zv:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var a=n("J2m7"),r=n.n(a),i=n("JZM8"),o=n.n(i),s=n("mwIZ"),u=n.n(s),c=n("1iNE"),l=n.n(c),d=function(e,t){if(!e||!e.children)return{children:[]};var n=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var u=o.value;n.push(u),u.children&&e(u.children,n)}}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e.children);return r()(n,(function(e){return e.id===t}))||{children:[]}},p=function(e,t,n){var a=t;return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"displayName",r=!0,i=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var d=u.value;if(d.id===n)return[o()(d,["id",a])];var p=e(d.children,n,a);if(l()(p))return[o()(d,["id",a])].concat(p)}}catch(e){i=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}return[]}(function(e){return u()(e,"children",[])}(e),a,n)}},lFXU:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"i",(function(){return m})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return y}));var a=n("KbFG"),r=n("OjRq"),i=n("mwIZ"),o=n.n(i),s=n("Nlzp"),u=n("3wRA"),c=n("ci4T"),l=n("Ualb"),d="chat-message-send-optimistically",p="chat-message-sent-success",g="chat-message-sent-failed",f="chat-message-sent-loading",h="chat-message-sent-retry",m=function(e){return{type:d,partialMessage:e}},I=function(e){return function(t,n){var a,r={body:e.body,session:e.sessionId,meta:{displayBody:o()(e,"meta.displayBody")}},i=setTimeout((function(){t({partialMessage:e,type:f})}),300);return a=e,void s.b.sendChatMessage(r).then((function(r){var s=c.j(n()),l=s&&s.first(),d=o()(l,"sessionId");clearTimeout(i),t(function(e,t){return{message:e,partial:t,type:p}}(r,a)),t(u.Y(e.sessionId)),d!==o()(e,"sessionId")&&t(u.eb()),t(u.gb())})).catch((function(e){clearTimeout(i),t({response:e,partialMessage:a,type:g})}))}},b=function(e,t){return function(n){var i=t;i.id=Object(a.e)(),i.type="customer",i.sessionId=e;var o=Object(r.e)(i);s.b.setActiveSession(e),n(m(o)),n(I(o))}},v=function(e){return function(t){var n=(e.body||"").substr(0,256);return s.b.createSession(n).then((function(n){var a=n.id;return t(u.H(n)),t(b(a,e)),t(u.eb()),t(l.d(a,!1)),s.b.flushPendingDescribeNexts(),s.b.hasCustomerId()||s.b.refreshTrackingToken(),n}))}},y=function(e){return function(t){t({partialMessage:e,type:h});setTimeout((function(){t(I(e))}),1e3)}}},pI4q:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return m}));var a=n("lSNA"),r=n.n(a),i=n("5yww"),o=n.n(i),s=n("mwIZ"),u=n.n(s),c=n("QkVN"),l=n.n(c),d=n("Puqe"),p=n.n(d),g=n("7jBj"),f=function(e){var t=o.a.load("kustomer-chat"),n=o.a.load(e);if(n){var a=l()({},t,r()({},e,n));return o.a.save("kustomer-chat",a,{path:"/"}),o.a.remove(e),n}var i="".concat(e,"_exp"),s=u()(t,i),c=Date.now()-new Date(s);if(s&&c>0){var d,p=l()({},t,(d={},r()(d,e,null),r()(d,i,null),d));return o.a.save("kustomer-chat",p,{path:"/"}),null}return u()(t,e)},h=function(e,t,n){var a=o.a.load("kustomer-chat"),i="".concat(e,"_exp"),s=l()({},a,r()({},e,t));if(n&&n.maxAge){var c=g.c(new Date,n.maxAge);s=l()({},s,r()({},i,c))}else u()(a,i)&&(s=l()({},s,r()({},i,null)));return o.a.save("kustomer-chat",s,{path:"/"}),s},m=function(e){var t=o.a.load("kustomer-chat"),n=p()(t,[e,"".concat(e,"_exp")]);o.a.save("kustomer-chat",n,{path:"/"})}},"pkk+":function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f}));var a=n("mwIZ"),r=n.n(a),i=n("1iNE"),o=n.n(i),s=n("f4zv"),u={},c=[],l=function(e,t){var n=function(e){return e.getIn(["chat","entities","forms","formValues"],u)}(e);return r()(n,[t],{})},d=function(e){return e.getIn(["chat","treePicker","selectedPath"],c)},p=function(e){return e.getIn(["chat","treePicker","parent"],u)},g=function(e,t){var n=function(e){return e.getIn(["chat","treePicker","tree"],u)}(e),a=s.a(n,t);return!!a.children&&!!o()(a.children)},f=function(e){var t=function(e){return e.getIn(["chat","treePicker","selectedId"],"")}(e);if(!t)return!1;var n=function(e){return function(e){return e.getIn(["chat","treePicker"])}(e).get("lastNodeRequired",!1)}(e),a=g(e,t);return!(n&&a)}},sBJV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var a=n("mwIZ"),r=n.n(a),i=function(e){return{id:e.id,name:e.name,preview:e.preview,createdAt:e.createdAt?Date.parse(e.createdAt):null,lastSeenAt:e.lastSeenAt?Date.parse(e.lastSeenAt):null,lastMessageAt:e.lastMessageAt?Date.parse(e.lastMessageAt):null,trackingId:e.trackingId,lockedAt:e.lockedAt,lockReason:e.lockReason,satisfactionId:e.satisfactionId,satisfactionStatus:e.satisfactionStatus,satisfactionLockedAt:e.satisfactionLockedAt,satisfactionSubmittedAt:e.satisfactionSubmittedAt}},o=function(e){return new i({id:e.id,name:e.attributes.name,preview:e.attributes.preview,createdAt:e.attributes.createdAt,lastSeenAt:e.attributes.lastSeenAt,lastMessageAt:e.attributes.lastMessageAt,trackingId:e.attributes.trackingId,lockedAt:e.attributes.lockedAt,lockReason:e.attributes.lockReason,satisfactionId:r()(e,"attributes.satisfaction.id"),satisfactionStatus:r()(e,"attributes.satisfaction.status"),satisfactionLockedAt:r()(e,"attributes.satisfaction.lockedAt"),satisfactionSubmittedAt:r()(e,"attributes.satisfaction.submittedAt")})},s=function(e){return o(e.data.data)},u=function(e){return e.data.data.map(o)}},sMkI:function(e,t,n){"use strict";var a={CUSTOMER_ENDED:"customer_ended",TIMED_OUT:"timed_out",USER_ENDED:"user_ended",UNSPECIFIED:"unspecified"};a.DEFAULT=a.UNSPECIFIED,a.ALL=Object.keys(a),t.a=a},tjUo:function(e,t,n){"use strict";n.r(t);var a=n("gcR/"),r=n.n(a),i=(n("q1tI"),n("i8i4")),o=n("UqNH"),s=n("esmf"),u=n.n(s),c=n("3wRA"),l=function(){o.default.dispatch(c.bb())};var d=n("Nlzp"),p=r()(u.a,{store:o.default});d.b.init().then((function(){window.onfocus=l,Object(i.render)(p,document.getElementById("kustomer-root"))}))},vBIC:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n("mwIZ"),r=n.n(a),i=n("d5fF"),o=n.n(i),s=function(e){return{id:e.id,body:o.a.decode(e.body||""),createdAt:e.createdAt?Date.parse(e.createdAt):null,trackingId:e.trackingId,sessionId:e.sessionId,campaignId:e.campaignId,sentBy:{id:r()(e,"sentBy.id","__team"),type:r()(e,"sentBy.type","user")},attachments:e.attachments,meta:r()(e,"meta")}},u=function(e){return new s({id:r()(e,"id"),body:r()(e,"attributes.body"),createdAt:r()(e,"attributes.createdAt"),trackingId:r()(e,"attributes.trackingId"),sessionId:r()(e,"relationships.session.data.id"),campaignId:r()(e,"relationships.campaign.data.id"),sentBy:r()(e,"relationships.sentBy.data",{}),attachments:r()(e,"relationships.attachments.data"),meta:r()(e,"attributes.meta")})},c=function(e){return e.data.data.map(u).reverse()},l=function(e){return u(e.data.data)}},wo01:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var a=null,r=new Map,i=function(e){var t=e.action,n=e.dispatch,i=e.sendToSessionId,o=e.settings,s=e.upfrontEnabled,u=e.delay;(a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{opts:{}},n=t.opts,a=n.delay||0===n.delay?n.delay:null,r=n.task,i=null,o=0;function s(){(a||0===a)&&r&&(i=Date.now(),e=setTimeout((function(){r(),o+=1,i=null}),a))}function u(){return{taskCalled:o>0,timesCalled:o}}function c(){if(i&&!e&&0===o){var t=Date.now()-i;t<a?e=setTimeout((function(){r(),o+=1}),a-t):(r(),o+=1),i=null}}function l(){e&&(clearTimeout(e),e=null)}function d(){e&&(clearTimeout(e),e=null),i=null}return{start:s,pause:l,stop:d,resume:c,timerTaskCalled:u}}({opts:{delay:u,task:function(){n(t(i,o,s)),r.delete(i)}}})).start(),r.set(i,a)},o=function(){return r.size>0},s=function(){o()&&r.forEach((function(e){e.timerTaskCalled().taskCalled||e.resume()}))},u=function(e){return r.has(e)},c=function(e){var t=function(e){return r.get(e)}(e);t&&t.stop()},l=function(e){return r.delete(e)},d=function(){o()&&r.forEach((function(e){e.timerTaskCalled().taskCalled||e.pause()}))}},zNGB:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l}));var a=n("pI4q"),r=n("Nlzp"),i=n("ci4T"),o="chat-describe-show",s="chat-describe-hide",u="chat-describe-email-success",c=function(e){return function(t){r.b.describeEmail(e).then((function(){t(function(e){return Object(a.c)("d-em",e),{type:u,email:e}}(e)),setTimeout((function(){return t({type:s})}),1e4)}))}},l=function(){return function(e,t){var n=t(),s=Object(i.s)(n),u=Object(a.a)("d-em")||!1,c=!r.b.customerVerified&&!u&&!Object(i.b)(n);s&&c&&e({type:o})}}}});
//# sourceMappingURL=bundle.439344cf3463aa456ad5.min.js.map